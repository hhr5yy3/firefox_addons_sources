(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1094:function(e,t,o){"use strict";o.r(t),o.d(t,"PushNotification",(function(){return y}));o(15),o(11);var a=o(730),c=o(49),r=o(2),s=o.n(r),l=o(185),n=o(96),i=o(137),d=o(44),u=o(243),m=o(149),b=o(4);function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){g(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function y(e){const{activity:t,getRecordValue:o,baseURL:r,userTimeZone:p,intl:g}=e,y=Object(a.b)(f({},e)),k=Object(a.a)(y,g),j=Object(a.g)(f({},e,{intl:g})),N=Object(a.c)(f({},e,{intl:g})),_=Object(a.f)(f({},e,{intl:g}));switch(t.type){case"top-level-block-created":return{subject:g.formatMessage(a.h.topLevelBlockCreated,{userName:k,targetName:j,spaceName:_})};case"top-level-block-deleted":return{subject:g.formatMessage(a.h.topLevelBlockDeleted,{userName:k,targetName:j,spaceName:_})};case"collection-row-created":return{subject:g.formatMessage(a.h.collectionRowCreated,{userName:k,targetName:j,collectionName:N})};case"collection-row-deleted":return{subject:g.formatMessage(a.h.collectionRowDeleted,{userName:k,targetName:j,collectionName:N})};case"block-edited":{let l;if(t.edits){const n=t.edits[0];if("block-changed"===n.type){const t=n.block_data.after.block_value;if("page"===t.type&&t.parent_table===c.a){const t=n.block_schema||d.g(g),c=u.g({before:n.block_data.before.block_value,after:n.block_data.after.block_value,schema:t}).filter(e=>{const o=t[e];return o&&"formula"!==o.type}).map(c=>{const r=t[c],s=r?r.name:void 0,l=Object(a.n)({intl:g,property:c,schema:t,block:n.block_data.after.block_value,getRecordValue:o,userTimeZone:e.userTimeZone,baseURL:e.baseURL})||g.formatMessage(a.h.emptyBlockEditedProperty);return g.formatMessage(a.h.propertyNameAndValueEdited,{propertyName:s,propertyValue:l})}),r=u.h({before:n.block_data.before.block_value,after:n.block_data.after.block_value}),i=s.a.compact(r.map(e=>{const t=Object(a.k)({formatProperty:e,intl:g}),c=Object(a.j)({formatProperty:e,intl:g,block:n.block_data.after.block_value,getRecordValue:o});if(t&&c)return g.formatMessage(a.h.propertyNameAndValueEdited,{propertyName:t,propertyValue:c})}));l=g.formatList(c.concat(i),{type:"conjunction",style:"narrow"})}else l=Object(a.i)({intl:g,blockValue:t,getRecordValue:o,baseURL:r,userTimeZone:p})}else if("block-created"===n.type){const e=n.block_data.block_value;l=Object(a.i)({intl:g,blockValue:e,getRecordValue:o,baseURL:r,userTimeZone:p})}else if("block-deleted"===n.type){const e=n.block_data.block_value,t=Object(a.i)({intl:g,blockValue:e,getRecordValue:o,baseURL:r,userTimeZone:p});l=g.formatMessage(a.h.blockDeletedEditBody,{renderedBlock:t})}}return{subject:g.formatMessage(a.h.blockEditedNotification,{userName:k,blockName:j}),body:l}}case"permissions-edited":return{subject:g.formatMessage(a.h.userEditedPermissionsFor,{userName:k,targetName:j}),body:Object(a.m)({intl:g,activity:t,getRecordValue:o,userTimeZone:e.userTimeZone})};case"user-mentioned":return{subject:g.formatMessage(a.h.userMentionedIn,{userName:k,targetName:j}),body:Object(a.o)({intl:g,getRecordValue:o,baseURL:r,userTimeZone:e.userTimeZone,blockId:t.mentioned_block_id,property:t.mentioned_property})};case"commented":{let c;if(t.edits){const r=t.edits[0];if("comment-created"===r.type){const t=o({table:l.a,id:r.comment_id}),a=r.comment_data||t;a&&(c="ðŸ’¬ ".concat(m.k({intl:g,textValue:a.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone})))}else if("comment-changed"===r.type)c="ðŸ’¬ ".concat(m.k({intl:g,textValue:r.comment_data.after.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone}));else{const t=o({table:l.a,id:r.comment_id}),s=r.comment_data||t;if(s){const t=m.k({intl:g,textValue:s.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone});c=g.formatMessage(a.h.userDeletedComment,{commentText:t})}}}return{subject:g.formatMessage(a.h.userCommentedSubject,{userName:k,targetName:j}),body:c}}case"user-invited":if(t.permission_group_id)return{subject:g.formatMessage(a.h.userAddedToSpace,{userName:k,workspaceName:j})};return{subject:0===y.filter(n.f).length?g.formatMessage(a.h.userInvitedToSpaceByBot,{workspaceName:j}):g.formatMessage(a.h.userInvitedToSpace,{userName:k,workspaceName:j})};case"collection-edited":{let e,o=g.formatMessage(a.h.userEditedCollectionSubject,{userName:k,collectionName:j});if(t.edits){const c=t.edits[0];if("collection-changed"===c.type&&c.collection_data){const t=c.collection_data.after?c.collection_data.after.description:void 0,r=c.collection_data.before?c.collection_data.before.description:void 0;r&&!t?o=g.formatMessage(a.h.collectionDescriptionDeleted,{userName:k,collectionName:j}):!r&&t?(o=g.formatMessage(a.h.collectionDescriptionCreated,{userName:k,collectionName:j}),e=b.cb(t)):r&&t&&u.n(r,t)&&(e=b.cb(t))}else if("collection-created"===c.type&&c.collection_data){const t=c.collection_data.description;t&&(o=g.formatMessage(a.h.userCreatedCollectionSubject,{userName:k,collectionName:j}),e=b.cb(t))}}return{subject:o,body:e}}case"collection-view-edited":const f=e.getRecordValue({table:i.a,id:t.collection_view_id}),h=f&&f.name||g.formatMessage(a.h.untitledCollectionView);return{subject:g.formatMessage(a.h.collectionViewEditedSubject,{userName:k,collectionViewName:h,collectionName:j})};case"collection-property-edited":const v=t.edits&&t.edits[0],O=v&&("collection-property-changed"===v.type?v.collection_property_data.after.name:v.collection_property_data.name)||g.formatMessage(a.h.collectionPropertyEditedUnknown);return t.collection_property_id,{subject:g.formatMessage(a.h.collectionPropertyEditedSubject,{userName:k,propertyType:O,collectionName:j})};case"reminder":return{subject:g.formatMessage(a.h.reminderSubject,{pageName:j}),body:Object(a.o)({getRecordValue:o,baseURL:r,userTimeZone:e.userTimeZone,blockId:t.reminder_block_id,property:t.reminder_property,intl:g})};case"permission-group-edited":return{subject:Object(a.l)({activity:t,intl:g,userName:k,targetName:j})};case"page-locked":case"page-unlocked":return{subject:"page-locked"===t.type?g.formatMessage(a.h.pageLockedActivity,{userName:k,pageName:j}):g.formatMessage(a.h.pageUnlockedActivity,{userName:k,pageName:j})};case"email-edited":return{subject:g.formatMessage(a.h.emailEditedActivity,{userName:k})};case"access-requested":return{subject:g.formatMessage(a.h.accessRequestedSubject,{userName:k,pageName:j})}}}}}]);