{"version":3,"file":"popup-BWpTd3fD.js","sources":["../../../src/common/Timings.ts","../../../src/popup/components/Notification.vue","../../../src/common/SearchUtils.ts","../../../src/common/KeeURL.ts","../../../src/common/SearcherAll.ts","../../../src/popup/components/SearchInput.vue","../../../src/popup/components/Field.vue","../../../src/popup/reconcileFieldLists.ts","../../../src/popup/supplementEntryState.ts","../../../src/popup/getAllFrameURLs.ts","../../../src/popup/reconcileURLs.ts","../../../src/popup/components/Entry.vue","../../../src/common/SearcherMatchedOnly.ts","../../../src/popup/components/SearchResults.vue","../../../src/popup/components/FieldEditor.vue","../../../src/common/model/DatabaseSummary.ts","../../../src/popup/components/Save1stParty.vue","../../../src/popup/components/TreeItem.vue","../../../src/popup/components/GroupSelectorTree.vue","../../../src/popup/components/SaveWhere.vue","../../../src/popup/favicon.ts","../../../src/popup/App.vue","../../../src/popup/main.ts"],"sourcesContent":["export const autoRecoveryTimeMs = 120_000;\nexport const manualRecoveryPromptTimeMs = 3_600_000;\nexport const tooltipDelay = 750;\n","<template>\n    <v-card color=\"yellow-lighten-3\">\n        <div style=\"float: right\">\n            <v-btn variant=\"text\" class=\"ml-4 mr-2 px-2 text-primary\" @click=\"closeNotification(notification.id)\">\n                {{ $i18n(\"close\") }}\n                <mdi-close />\n            </v-btn>\n        </div>\n\n        <v-card-text class=\"text-primary\">\n            <p v-for=\"(msg, index) of notification.messages\" :key=\"index\">\n                {{ msg }}\n            </p>\n        </v-card-text>\n        <v-card-actions>\n            <v-row justify=\"center\" align=\"end\" class=\"mb-1 mt-1\">\n                <v-col>\n                    <v-row align=\"end\" class=\"ml-2 justify-left my-0\">\n                        <v-btn\nv-for=\"(but, index) of notification.buttons\" :id=\"but.id\" :key=\"index\" class=\"mr-4 my-2\"\n                            @click=\"\n                                dispatchActionResponse(\n                                    notification.id,\n                                    but.action,\n                                    but.values\n                                )\n                            \">\n                            <v-tooltip location=\"top\" :disabled=\"!but.tooltip\" :open-delay=\"tooltipDelay\"> <span>{{\n                                but.tooltip\n                            }}</span>\n                            </v-tooltip>\n                            {{ but.label }}\n                        </v-btn>\n                    </v-row>\n                </v-col>\n            </v-row>\n        </v-card-actions>\n    </v-card>\n</template>\n\n<script lang=\"ts\">\nimport { ButtonAction } from \"../../common/Button\";\nimport { configManager } from \"../../common/ConfigManager\";\nimport { AddonMessage } from \"../../common/AddonMessage\";\nimport { Port } from \"../../common/port\";\nimport { tooltipDelay } from \"../../common/Timings\";\n//import useStore from \"../../store\";\n\nexport default {\n    props: [\"notification\"],\n    // setup () {\n    //     const { updateSaveState } = useStore();\n    //     return { updateSaveState };\n    // },\n    data: () => ({\n        tooltipDelay\n    }),\n    methods: {\n        dispatchActionResponse(id: string, action: ButtonAction, data: { [id: string]: string }) {\n            const pm = Port.postMessage;\n            switch (action) {\n                case \"enableHighSecurityKPRPCConnection\":\n                    configManager.current.connSLClient = 3;\n                    configManager.save();\n                    break;\n                case \"loadUrlUpgradeKee\":\n                    pm({ loadUrlUpgradeKee: true });\n                    break;\n                case \"disableNotifyWhenEntryUpdated\":\n                    configManager.current.notifyWhenEntryUpdated = false;\n                    configManager.save();\n                    break;\n                case \"launchLoginEditorFromNotification\":\n                    pm({\n                        loginEditor: {\n                            uuid: data.uuid,\n                            DBfilename: data.fileName\n                        }\n                    } as AddonMessage);\n                    break;\n            }\n            pm({ removeNotification: id } as AddonMessage);\n        },\n        closeNotification(id: string) {\n            const pm = Port.postMessage;\n            pm({ removeNotification: id } as AddonMessage);\n        }\n    }\n};\n</script>\n","import { KeeLog } from \"./Logger\";\nimport { SearchConfig } from \"./model/SearchConfig\";\nimport { EntrySummary } from \"./model/EntrySummary\";\nimport { Group } from \"./model/Group\";\n\nfunction isEntrySummary(item: Partial<Group> | EntrySummary): item is EntrySummary {\n    return !!(item as EntrySummary).url;\n}\n\nexport function calculateMatchScore(\n    item: EntrySummary | Partial<Group>,\n    keywords: string[],\n    parentGroupMatchScore: number,\n    searchConfig: SearchConfig,\n    filter?\n) {\n    if (filter) {\n        if (!filter(item)) return 0;\n        if (keywords.length < 1) return 1; // Fixed relevance score for all matches\n    } else if (keywords.length < 1) {\n        return 0;\n    }\n\n    if (!isEntrySummary(item)) {\n        // must be a group.\n        // If we know that a parent group has already matched, no point in searching further\n        if (parentGroupMatchScore > 0) return 1;\n        for (const keyword of keywords) {\n            if (item.title.toLowerCase().indexOf(keyword) >= 0) return 1;\n        }\n        return 0;\n    }\n\n    let matchScore = 0.0;\n\n    for (const keyword of keywords) {\n        let keywordScore = 0;\n        if (\n            searchConfig.searchTitles &&\n            item.title &&\n            item.title.toLowerCase().indexOf(keyword) >= 0\n        ) {\n            keywordScore += searchConfig.weightTitles;\n        }\n        if (\n            searchConfig.searchUsernames &&\n            item.usernameValue &&\n            item.usernameValue.toLowerCase().indexOf(keyword) >= 0\n        ) {\n            keywordScore += searchConfig.weightUsernames;\n        }\n        if (\n            searchConfig.searchURLs &&\n            item.uRLs &&\n            item.uRLs.filter(function (i) {\n                return i.toLowerCase().indexOf(keyword) >= 0;\n            }).length > 0\n        ) {\n            keywordScore += searchConfig.weightURLs;\n        }\n\n        // Increment the relevance score proportionally to the number of keywords\n        matchScore += keywordScore * (1 / keywords.length);\n    }\n\n    if (parentGroupMatchScore > 0) matchScore += searchConfig.weightGroups;\n\n    return matchScore;\n}\n\nexport function resolveConfig(config: Partial<SearchConfig>) {\n    if (!config) config = {};\n    else {\n        if (config.version != 1) {\n            KeeLog.warn(\"Unknown search config version. Will use version 1 defaults\");\n        }\n    }\n\n    return {\n        version: 1,\n        searchAllDatabases:\n            typeof config.searchAllDatabases !== \"undefined\" ? config.searchAllDatabases : true,\n        searchTitles: typeof config.searchTitles !== \"undefined\" ? config.searchTitles : true,\n        searchUsernames:\n            typeof config.searchUsernames !== \"undefined\" ? config.searchUsernames : true,\n        searchGroups: typeof config.searchGroups !== \"undefined\" ? config.searchGroups : true,\n        searchURLs: typeof config.searchURLs !== \"undefined\" ? config.searchURLs : true,\n        weightTitles: config.weightTitles || 2,\n        weightUsernames: config.weightUsernames || 1,\n        weightGroups: config.weightGroups || 0.25,\n        weightURLs: config.weightURLs || 0.75,\n        maximumResults: typeof config.maximumResults !== \"undefined\" ? config.maximumResults : 30,\n        onComplete: config.onComplete,\n        onMatch: config.onMatch\n    };\n}\n\nexport function tokenise(text) {\n    const tokens = text.match(/'[^']*'|\"[^\"]*\"|[^\\s ]+/g) || [];\n    tokens.forEach(function (_value, index, array) {\n        array[index] = array[index]\n            .replace(/(^['\"])|(['\"]$)/g, \"\")\n            .replace(/[\\s ]+/g, \" \")\n            .toLowerCase();\n    });\n    return tokens;\n}\n","import { utils } from \"./utils\";\nimport { KeeLog } from \"./Logger\";\n\nexport class KeeURL {\n    private constructor(\n        private _domain: string,\n        private _url: URL,\n        private _isIPAddress: boolean\n    ) {}\n\n    public get domain(): string {\n        return this._domain;\n    }\n    public get url(): URL {\n        return this._url;\n    }\n    public get isIPAddress(): boolean {\n        return this._isIPAddress;\n    }\n    public get domainOrIPAddress(): string {\n        return this._domain ?? (this._isIPAddress ? this._url.hostname : \"\");\n    }\n\n    public get domainWithPort(): string {\n        if (!this._domain) return \"\";\n        if (this._url.port) return this._domain + \":\" + this._url.port;\n        return this._domain;\n    }\n\n    public static fromString(urlStr: string) {\n        if (\n            !urlStr.startsWith(\"https://\") &&\n            !urlStr.startsWith(\"http://\") &&\n            !urlStr.startsWith(\"file://\")\n        ) {\n            urlStr = \"https://\" + urlStr;\n        }\n        try {\n            const url = new URL(urlStr);\n            const isIPAddress = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/.test(\n                url.hostname\n            );\n            const domain = isIPAddress ? null : utils.psl.getDomain(url.hostname);\n            return new KeeURL(domain, url, isIPAddress);\n        } catch (e) {\n            KeeLog.warn(\"Error processing URL: \" + e);\n        }\n        return null;\n    }\n}\n","import { KeeLog } from \"./Logger\";\nimport type { KeeState } from \"../store/KeeState\";\nimport { SearchConfig } from \"./model/SearchConfig\";\nimport { EntrySummary } from \"./model/EntrySummary\";\nimport { resolveConfig, tokenise, calculateMatchScore } from \"./SearchUtils\";\nimport { Group } from \"./model/Group\";\nimport { KeeURL } from \"./KeeURL\";\n\nexport class SearcherAll {\n    constructor(private state: KeeState, config: Partial<SearchConfig>) {\n        this.searchConfig = resolveConfig(config);\n        this.validateConfig();\n    }\n    private configIsValid: boolean;\n    private _makeAsyncTimer;\n    private searchConfig: SearchConfig;\n\n    public execute(query, onComplete, filterDomains: string[]) {\n        let abort = false;\n        const filteringByDomain =\n            filterDomains &&\n            filterDomains.length > 0 &&\n            Array.isArray(filterDomains) &&\n            filterDomains[0].length > 0\n                ? true\n                : false;\n\n        if (!this.configIsValid) {\n            KeeLog.error(\"You can't execute a search while the search configuration is invalid.\");\n            abort = true;\n        }\n\n        if ((!query || query.length == 0) && !filteringByDomain) abort = true;\n\n        if (this.state.KeePassDatabases.length == 0) abort = true;\n\n        onComplete = onComplete || this.searchConfig.onComplete;\n\n        if (abort) {\n            if (onComplete) {\n                onComplete([]);\n                return;\n            } else {\n                return [];\n            }\n        }\n\n        const results = [];\n        const addResult = result => {\n            if (this.searchConfig.onMatch) {\n                result = this.searchConfig.onMatch(result);\n                if (result) results.push(result);\n                else return false;\n            } else results.push(result);\n            return true;\n        };\n\n        // allow pre-tokenised search terms to be supplied\n        let keywords = [];\n        if (Array.isArray(query)) keywords = query;\n        else if (query.length > 0) keywords = tokenise(query);\n\n        let filter;\n\n        if (filteringByDomain) {\n            filter = item => {\n                if (!item.uRLs || item.uRLs.length <= 0) return false;\n\n                for (const filterDomain of filterDomains) {\n                    const filteredUrls = item.uRLs.filter(itemURL => {\n                        try {\n                            if (itemURL.indexOf(filterDomain) < 0) return false;\n                            const url = KeeURL.fromString(itemURL);\n                            return url.domainOrIPAddress === filterDomain;\n                        } catch (e) {\n                            return false;\n                        } // ignore invalid URLs\n                    });\n                    if (filteredUrls.length > 0) return true;\n                }\n                return false;\n            };\n        }\n\n        function actualSearch(this: SearcherAll) {\n            let databases;\n            if (this.searchConfig.searchAllDatabases) databases = this.state.KeePassDatabases;\n            else databases = [this.state.KeePassDatabases[this.state.ActiveKeePassDatabaseIndex]];\n\n            for (let i = 0; i < databases.length; i++) {\n                const root = databases[i].root;\n                const dbFileName = databases[i].fileName;\n                this.treeTraversal(root, keywords, 0, addResult.bind(this), 0, dbFileName, filter);\n            }\n            if (onComplete) onComplete(results);\n        }\n\n        if (onComplete) {\n            // Create a timer to make the search run async\n            this._makeAsyncTimer = window.setTimeout(actualSearch.bind(this), 1);\n            return;\n        } else {\n            actualSearch.call(this);\n            return results;\n        }\n    }\n\n    private validateConfig() {\n        this.configIsValid = true;\n\n        if (this.searchConfig.version != 1) {\n            KeeLog.warn(\"Unknown config version\");\n            this.configIsValid = false;\n        }\n\n        if (\n            this.searchConfig.searchAllDatabases !== true &&\n            this.searchConfig.searchAllDatabases !== false\n        ) {\n            KeeLog.warn(\"searchAllDatabases should be a boolean\");\n            this.configIsValid = false;\n        }\n\n        if (this.searchConfig.searchTitles !== true && this.searchConfig.searchTitles !== false) {\n            KeeLog.warn(\"searchTitles should be a boolean\");\n            this.configIsValid = false;\n        }\n\n        if (\n            this.searchConfig.searchUsernames !== true &&\n            this.searchConfig.searchUsernames !== false\n        ) {\n            KeeLog.warn(\"searchUsernames should be a boolean\");\n            this.configIsValid = false;\n        }\n\n        if (this.searchConfig.searchGroups !== true && this.searchConfig.searchGroups !== false) {\n            KeeLog.warn(\"searchGroups should be a boolean\");\n            this.configIsValid = false;\n        }\n\n        if (this.searchConfig.searchURLs !== true && this.searchConfig.searchURLs !== false) {\n            KeeLog.warn(\"searchURLs should be a boolean\");\n            this.configIsValid = false;\n        }\n\n        if (isNaN(this.searchConfig.weightTitles) || this.searchConfig.weightTitles <= 0) {\n            KeeLog.warn(\"weightTitles should be a positive number\");\n            this.configIsValid = false;\n        }\n\n        if (isNaN(this.searchConfig.weightUsernames) || this.searchConfig.weightUsernames <= 0) {\n            KeeLog.warn(\"weightUsernames should be a positive number\");\n            this.configIsValid = false;\n        }\n\n        if (isNaN(this.searchConfig.weightGroups) || this.searchConfig.weightGroups <= 0) {\n            KeeLog.warn(\"weightGroups should be a positive number\");\n            this.configIsValid = false;\n        }\n\n        if (isNaN(this.searchConfig.weightURLs) || this.searchConfig.weightURLs <= 0) {\n            KeeLog.warn(\"weightURLs should be a positive number\");\n            this.configIsValid = false;\n        }\n\n        if (isNaN(this.searchConfig.maximumResults) || this.searchConfig.maximumResults <= 0) {\n            KeeLog.warn(\"maximumResults should be a positive number\");\n            this.configIsValid = false;\n        }\n\n        if (\n            this.searchConfig.onComplete != null &&\n            typeof this.searchConfig.onComplete !== \"function\"\n        ) {\n            KeeLog.warn(\"onComplete should be a function (or ommitted)\");\n            this.configIsValid = false;\n        }\n\n        if (this.searchConfig.onMatch != null && typeof this.searchConfig.onMatch !== \"function\") {\n            KeeLog.warn(\"onMatch should be a function (or ommitted)\");\n            this.configIsValid = false;\n        }\n\n        return this.configIsValid;\n    }\n\n    private treeTraversal(\n        branch: Group,\n        keywords: string[],\n        parentGroupMatchScore: number,\n        addResult: (item: EntrySummary) => boolean,\n        currentResultCount,\n        dbFileName,\n        filter\n    ) {\n        let totalResultCount = currentResultCount;\n        for (const leaf of branch.entrySummaries) {\n            const item = leaf;\n\n            // We might already know this is a match if the item is contained within\n            // a matching group but we check again because we probably want to update\n            // the relevance score for the item\n            const matchResult = calculateMatchScore(\n                item,\n                keywords,\n                parentGroupMatchScore,\n                this.searchConfig,\n                filter\n            );\n            if (matchResult > 0.0) {\n                const accepted = addResult({\n                    ...item,\n                    ...{ relevanceScore: matchResult }\n                });\n                if (accepted) {\n                    totalResultCount++;\n                    if (totalResultCount >= this.searchConfig.maximumResults) {\n                        return totalResultCount;\n                    }\n                }\n            }\n        }\n        for (const subBranch of branch.groups) {\n            const groupMatchScore = calculateMatchScore(\n                { title: subBranch.title },\n                keywords,\n                parentGroupMatchScore,\n                this.searchConfig,\n                filter\n            );\n            totalResultCount = this.treeTraversal(\n                subBranch,\n                keywords,\n                groupMatchScore,\n                addResult,\n                totalResultCount,\n                dbFileName,\n                filter\n            );\n            if (totalResultCount >= this.searchConfig.maximumResults) return totalResultCount;\n        }\n        return totalResultCount;\n    }\n}\n","<template>\n    <v-text-field\nid=\"searchBox\" single-line density=\"compact\" variant=\"solo\" :placeholder=\"$i18n('Search_label')\" hide-details class=\"search my-0 py-0 mx-2\"\n        style=\"\" name=\"cc5704978dc0411591addc66d25c325b\" :model-value=\"currentSearchTerm\" autofocus\n        @update:model-value=\"onSearchInput\" @keyup.arrow-down.stop.prevent=\"focusFirstResult\"\n        @keyup.enter.stop.prevent=\"focusFirstResult\" @keyup.escape.stop.prevent=\"handleEscape\" />\n</template>\n\n<script lang=\"ts\">\nimport { configManager } from \"../../common/ConfigManager\";\nimport { Port } from \"../../common/port\";\nimport { SearcherAll } from \"../../common/SearcherAll\";\nimport useStore from \"../../store\";\nimport { KeeLog } from \"../../common/Logger\";\nimport { EntrySummary } from \"../../common/model/EntrySummary\";\nimport { mapState } from \"pinia\";\nimport { Database } from \"../../common/model/Database\";\n\nexport default {\n    setup() {\n        const { updateSearchResults, updateCurrentSearchTerm } = useStore();\n        return { updateSearchResults, updateCurrentSearchTerm };\n    },\n    data() {\n        return {\n            search: null as SearcherAll\n        };\n    },\n    computed: {\n        ...mapState(useStore, [\"currentSearchTerm\", \"KeePassDatabases\", \"ActiveKeePassDatabaseIndex\"])\n    },\n    watch: {\n        KeePassDatabases: function (newState: Database[], oldState: Database[]) {\n            this.onDBChanged();\n        }\n    },\n    created() {\n        this.onDBChanged();\n    },\n    methods: {\n        onDBChanged() {\n            this.search = new SearcherAll(\n                {\n                    KeePassDatabases: this.KeePassDatabases,\n                    ActiveKeePassDatabaseIndex: this.ActiveKeePassDatabaseIndex\n                } as any,\n                {\n                    version: 1,\n                    searchAllDatabases: configManager.current.searchAllOpenDBs,\n                    maximumResults: 50\n                }\n            );\n        },\n        onSearchComplete(entrySummaries: EntrySummary[]) {\n            KeeLog.debug(\"onSearchComplete\");\n            entrySummaries = entrySummaries\n                .sort(function (a, b) {\n                    if (a.relevanceScore > b.relevanceScore) return -1;\n                    if (a.relevanceScore < b.relevanceScore) return 1;\n                    return 0;\n                })\n                .map(l => Object.assign(l, { fullDetails: null }));\n            this.updateSearchResults(entrySummaries);\n        },\n        onSearchInput(value) {\n            // Think this is OK but if it is actually async then user may have subsequent\n            // characters deleted when the change is actually applied\n            this.updateCurrentSearchTerm(value);\n            this.search.execute(value, this.onSearchComplete.bind(this), []);\n        },\n        focusFirstResult() {\n            const firstCard = document.querySelector(\"#searchPanel > .v-card\");\n            if (firstCard) {\n                (firstCard as HTMLLIElement).focus();\n            }\n        },\n        handleEscape() {\n            // This does not work in Firefox due to https://bugzilla.mozilla.org/show_bug.cgi?id=1373175\n            const searchBox = document.getElementById(\"searchBox\") as HTMLInputElement;\n            if (searchBox.value) {\n                searchBox.value = \"\";\n                searchBox.dispatchEvent(new Event(\"input\"));\n            } else {\n                window.close();\n            }\n        }\n    }\n};\n</script>\n","<template>\n        <v-sheet v-if=\"useful\" class=\"my-0\" style=\"display: flex; align-items: center;\">\n<v-sheet class=\"text-truncate my-2 text-right flex-grow-1\">\n            <span :style=\"fieldStyle\" @click=\"toggleReveal\">\n                <v-tooltip location=\"bottom\" :open-delay=\"tooltipDelay\" activator=\"parent\">\n                    <span>{{ tooltip }}</span>\n                </v-tooltip>\n                {{ displayValue }}\n            </span>\n        </v-sheet>\n\n        <v-sheet class=\"my-1 mx-2 shrink\">\n            <v-btn size=\"small\" icon class=\"my-0\" @click=\"copyValue\">\n                <v-tooltip location=\"start\" :open-delay=\"tooltipDelay\" activator=\"parent\">\n                    <span>{{ $i18n(\"copy_value_to_clipboard\") }}</span>\n                </v-tooltip>\n                <mdi-content-copy />\n            </v-btn>\n        </v-sheet>\n    </v-sheet>\n</template>\n\n<script lang=\"ts\">\nimport { copyStringToClipboard } from \"../../common/copyStringToClipboard\";\nimport { Field } from \"../../common/model/Field\";\nimport { tooltipDelay } from \"../../common/Timings\";\n\nexport default {\n    props: [\"field\"],\n    data: () => ({\n        revealed: false,\n        tooltipDelay: tooltipDelay\n    }),\n    computed: {\n        displayValue: function () {\n            return Field.getDisplayValue(this.field, this.revealed);\n        },\n        tooltip: function () {\n            return Field.getDisplayTooltip(this.field, this.revealed);\n        },\n        useful: function () {\n            return this.field.type !== \"checkbox\" && this.displayValue.length > 0;\n        },\n        fieldStyle: function () {\n            return this.field.type === \"password\" ? \"cursor: pointer\" : \"cursor: default\";\n        }\n    },\n    methods: {\n        toggleReveal: function () {\n            this.revealed = !this.revealed;\n        },\n        copyValue: async function () {\n            await copyStringToClipboard(Field.getDisplayValue(this.field, true));\n        }\n    }\n};\n</script>\n","import { Field } from \"../common/model/Field\";\nimport { Locator } from \"../common/model/Locator\";\n\nfunction locatorMatches(locator1: Locator, locator2: Locator) {\n    if (locator1.type !== locator2.type) return false;\n    if (locator1.id === locator2.id && locator1.name === locator2.name) return true;\n    return false;\n}\n\nfunction fieldMatches(oldField: Field, newField: Field) {\n    if (oldField.type !== newField.type) return false;\n    if (oldField.value === newField.value) return true;\n    if (\n        oldField.locators.some(locator1 =>\n            newField.locators.some(locator2 => locatorMatches(locator1, locator2))\n        )\n    ) {\n        return true;\n    }\n    return false;\n}\n\nfunction fieldMatchesType(oldField: Field, newField: Field) {\n    if (oldField.type === newField.type) return true;\n    return false;\n}\n\nfunction getNewLocator(oldField: Field, newField: Field) {\n    if (newField.locators[0].autocompleteValues?.some(v => v === \"new-password\")) {\n        return oldField.locators[0];\n    }\n    return newField.locators[0];\n}\n\nexport function reconcileFieldLists(oldFields: Field[], newFields: Field[]) {\n    // Every new field is included but we try to only include old fields if\n    // they aren't for the same purpose as any of the new fields\n\n    // Future implementations could take advantage of the new Field model\n    // to establish some sort of match score but for this first version we\n    // just accept the first match that we find. If no good match for\n    // username or password is found, we pick the first field of the\n    // corresponding type\n\n    const fields: Field[] = [];\n    const sortedFields: Field[] = [];\n    const matchedNewFieldIndexes: number[] = [];\n\n    newFields.forEach((newField, newFieldIndex) => {\n        if (newField.type !== \"text\") return;\n        let matchingIndex = oldFields.findIndex(oldField => fieldMatches(oldField, newField));\n        if (matchingIndex === -1) {\n            matchingIndex = oldFields.findIndex(oldField => fieldMatchesType(oldField, newField));\n        }\n        if (matchingIndex >= 0) {\n            fields.push(new Field({ ...newField, resetValue: oldFields[matchingIndex].value }));\n            oldFields.splice(matchingIndex, 1);\n            matchedNewFieldIndexes.push(newFieldIndex);\n        }\n    });\n\n    newFields.forEach((newField, newFieldIndex) => {\n        if (newField.type !== \"password\") return;\n        let matchingIndex = oldFields.findIndex(oldField => fieldMatches(oldField, newField));\n        if (matchingIndex === -1) {\n            matchingIndex = oldFields.findIndex(oldField => fieldMatchesType(oldField, newField));\n        }\n        if (matchingIndex >= 0) {\n            fields.push(\n                new Field({\n                    ...newField,\n                    resetValue: oldFields[matchingIndex].value,\n                    locators: [getNewLocator(oldFields[matchingIndex], newField)]\n                })\n            );\n            oldFields.splice(matchingIndex, 1);\n            matchedNewFieldIndexes.push(newFieldIndex);\n        }\n    });\n\n    newFields.forEach((newField, newFieldIndex) => {\n        if (matchedNewFieldIndexes.indexOf(newFieldIndex) >= 0) return;\n        const matchingIndex = oldFields.findIndex(oldField => fieldMatches(oldField, newField));\n        if (matchingIndex >= 0) {\n            fields.push(new Field({ ...newField, resetValue: oldFields[matchingIndex].value }));\n            oldFields.splice(matchingIndex, 1);\n        } else {\n            fields.push(newField);\n        }\n    });\n\n    // Keep any old fields we've not yet matched to a new field\n    oldFields.forEach(f => fields.push(f));\n\n    const firstTextFieldIndex = fields.findIndex(f => f.type === \"text\");\n    if (firstTextFieldIndex >= 0) {\n        sortedFields.push(fields.splice(firstTextFieldIndex, 1)[0]);\n    }\n\n    const firstPasswordFieldIndex = fields.findIndex(f => f.type === \"password\");\n    if (firstPasswordFieldIndex >= 0) {\n        sortedFields.push(fields.splice(firstPasswordFieldIndex, 1)[0]);\n    }\n\n    return sortedFields.concat(fields);\n}\n","import { SaveState } from \"../common/SaveState\";\nimport { Entry } from \"../common/model/Entry\";\nimport { reconcileFieldLists } from \"./reconcileFieldLists\";\n\nexport function supplementEntryState(entry: Entry, saveState: SaveState, urls?: string[]) {\n    const sd = saveState.submittedData;\n    const submittedFields = sd ? sd.fields : [];\n    const newFields = reconcileFieldLists(\n        JSON.parse(JSON.stringify(entry.fields)),\n        submittedFields\n    );\n    const overwriteWithSubmittedData = (sd\n        ? {\n              URLs: [sd.url],\n              fields: newFields,\n              title: sd.title\n          }\n        : {}) as Entry;\n    const overwriteWithURLs = (urls\n        ? {\n              URLs: urls\n          }\n        : {}) as Entry;\n    return Object.assign({}, entry, overwriteWithSubmittedData, overwriteWithURLs);\n}\n","export async function getAllFrameURLs(currentTab: chrome.tabs.Tab) {\n    const frames = await chrome.webNavigation.getAllFrames({\n        tabId: currentTab.id\n    });\n    return frames.map(f => f.url);\n}\n","import { getAllFrameURLs } from \"./getAllFrameURLs\";\nimport { KeeURL } from \"../common/KeeURL\";\n\nexport async function reconcileURLs(oldUrls: string[], submittedUrl?: string) {\n    const currentTab = !submittedUrl\n        ? (await chrome.tabs.query({ active: true, currentWindow: true }))[0]\n        : null;\n\n    // primary url to compare against entry being edited\n    const compareUrl = submittedUrl ?? currentTab.url;\n\n    // An Exact match, regardless of the existing entry's configuration\n    if (oldUrls.some(url => url === compareUrl)) {\n        return { urls: oldUrls, showWarning: false };\n    }\n\n    const compareURLDomainOrIPAddress = KeeURL.fromString(compareUrl)?.domainOrIPAddress;\n\n    if (!compareURLDomainOrIPAddress) {\n        return { urls: oldUrls, showWarning: false };\n    }\n\n    // A Domain match, regardless of the existing entry's configuration\n    if (\n        oldUrls.some(\n            url => KeeURL.fromString(url)?.domainOrIPAddress === compareURLDomainOrIPAddress\n        )\n    ) {\n        return {\n            urls: [compareUrl].concat(oldUrls.slice(1)),\n            showWarning: false\n        };\n    }\n\n    if (!submittedUrl) {\n        const allFrameUrls = await getAllFrameURLs(currentTab);\n        if (\n            oldUrls.some(url =>\n                allFrameUrls.some(\n                    fu =>\n                        KeeURL.fromString(fu)?.domainOrIPAddress ===\n                        KeeURL.fromString(url)?.domainOrIPAddress\n                )\n            )\n        ) {\n            return { urls: oldUrls, showWarning: false };\n        }\n    }\n\n    return { urls: [compareUrl].concat(oldUrls), showWarning: true };\n}\n","<template>\n    <v-hover>\n        <template #default=\"{ isHovering, props }\">\n            <v-card\n            :data-index=\"dataIndex\"\nv-bind=\"props\" ref=\"card\" :tabindex=\"`${tabindex}`\" :elevation=\"isHovering ? 12 : 3\" class=\"my-2\"\n                :ripple=\"false\" @focusin=\"focusin\" @focusout=\"focusout\"\n                @keyup.context-menu.stop.prevent=\"showFullDetails\" @keyup.arrow-down.stop.prevent=\"nextInList\"\n                @keyup.arrow-up.stop.prevent=\"prevInList\" @keyup.arrow-right.stop.prevent=\"showFullDetails\"\n                @keyup.arrow-left.stop.prevent=\"hideFullDetails\" @keyup.escape.stop.prevent=\"exitList\"\n                @keyup.enter.self.stop.prevent=\"primaryClickAction\" @keyup.enter.ctrl.self.stop.prevent=\"loadInNewTab\">\n                <v-container class=\"ma-0 pa-0 my-2\" :style=\"titleStyle\">\n                            <v-hover>\n                    <v-sheet\nclass=\"mr-3 ml-12 my-0\"\n                        :style=\"`display: flex; align-items:center; justify-content:space-between; ${isHovering ? 'cursor: pointer' : ''}; column-gap:0.5rem;`\" @click.left.exact=\"primaryClickAction\"\n                        @click.middle.exact=\"loadInNewTab\" @click.left.ctrl=\"loadInNewTab\"\n                        @click.middle.ctrl=\"primaryClickAction\" @click.right.stop.prevent=\"showFullDetails\">\n                        <v-sheet class=\"text-truncate\">\n                                <v-container fluid class=\"ma-0 pa-0\" style=\"padding: 0px;\">\n                                    <v-row no-gutters class=\"my-0\">\n                                        <v-col class=\"text-truncate\">\n                                            {{ entrySummary.title }}\n                                        </v-col>\n                                    </v-row>\n                                    <v-row no-gutters class=\"my-0\">\n                                        <v-col\n:style=\"`${expanded ? 'visibility:hidden' : ''}`\"\n                                            class=\"text-truncate text-caption\">\n                                            {{ usernameDisplayValue }}\n                                        </v-col>\n                                    </v-row>\n                                </v-container>\n                        </v-sheet>\n                        <v-sheet v-if=\"isHovering || focussed\" class=\"align-self-center\">\n                            <v-btn\nvariant=\"elevated\" color=\"secondary\" size=\"x-small\" icon\n                                @click.stop.prevent=\"toggleFullDetails\">\n                                <mdi-chevron-down v-if=\"!expanded\" scale=\"200\" />\n                                <mdi-chevron-up v-if=\"expanded\" scale=\"200\" />\n                            </v-btn>\n                        </v-sheet>\n                    </v-sheet>\n                            </v-hover>\n                </v-container>\n                <v-card-text class=\"text-truncate\" style=\"cursor: default; padding: 0px;\">\n                    <v-slide-y-transition>\n                        <v-container v-if=\"expanded && !!entrySummary.fullDetails\" class=\"my-0 pa-0 mx-2\">\n                            <Field v-for=\"f of allFields\" :key=\"f.uuid\" :field=\"f\" />\n                            <v-sheet class=\"my-0\" style=\"display: flex; justify-content: space-between;\">\n                                <v-sheet class=\"text-truncate\">\n                                    <v-sheet class=\"text-truncate my-0\" style=\"flex-wrap: nowrap; display: flex; align-items: center;\">\n                                        <v-tooltip\nlocation=\"top\" :disabled=\"!entryPathIsLong\"\n                                            :open-delay=\"tooltipDelay\" activator=\"parent\">\n                                            <span>{{ fullEntryPath }}</span>\n                                        </v-tooltip>\n                                        <mdi-folder class=\"mr-2\" />\n                                        <span class=\"text-truncate text-caption py-1\">{{\n                                            entryPath\n                                        }}</span>\n                                    </v-sheet>\n                                    <v-sheet class=\"text-truncate my-0\" style=\"flex-wrap: nowrap; display: flex; align-items: center;\">\n                                        <v-tooltip location=\"top\" :open-delay=\"tooltipDelay\" activator=\"parent\">\n                                            <span>{{ entrySummary.url }}</span>\n                                        </v-tooltip>\n                                        <mdi-cloud class=\"mr-2\" />\n                                        <span class=\"text-truncate text-caption py-1\">{{\n                                            entryDomain\n                                        }}</span>\n                                    </v-sheet>\n                                </v-sheet>\n\n                                <v-sheet class=\"ma-2 shrink\">\n                                    <v-btn size=\"small\" location=\"bottom left\" icon=\"mdi-pencil\" @click=\"editEntry\">\n                                    </v-btn>\n                                </v-sheet>\n                            </v-sheet>\n                            <v-row v-if=\"isMatchedEntry\" justify=\"space-between\" align=\"center\">\n                                <v-col class=\"text-truncate pt-0 ma-0\">\n                                    <v-divider class=\"mt-4 mx-5\"></v-divider>\n                                    <v-checkbox\n:label=\"$i18n('preferred_matching_entry')\"\n                                        :model-value=\"entrySummary.isPreferredMatch\"\n                                        @update:model-value=\"onPreferredEntryClick\"></v-checkbox>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                    </v-slide-y-transition>\n                </v-card-text>\n            </v-card>\n        </template>\n    </v-hover>\n</template>\n\n<script lang=\"ts\">\nimport Field from \"./Field.vue\";\nimport { AddonMessage } from \"../../common/AddonMessage\";\nimport { Port } from \"../../common/port\";\nimport useStore from \"../../store\";\nimport { KeeURL } from \"../../common/KeeURL\";\nimport { Action } from \"../../common/Action\";\nimport { supplementEntryState } from \"../supplementEntryState\";\nimport { reconcileURLs } from \"../reconcileURLs\";\nimport { SaveState } from \"../../common/SaveState\";\nimport { Entry } from \"../../common/model/Entry\";\nimport { EntrySummary } from \"../../common/model/EntrySummary\";\nimport { tooltipDelay } from \"../../common/Timings\";\nimport { mapState } from \"pinia\";\nimport { $STR } from \"~/common/DollarPolyfills\";\n\nexport default {\n    components: { Field },\n    props: [\"entrySummary\", \"isFirstInAList\", \"entryIndex\", \"frameId\", \"dataIndex\"],\n    emits: [\"move-next-in-list\", \"move-prev-in-list\", \"move-out-of-list\", \"pref-entry-toggle\"],\n    setup() {\n        const { updateSaveState } = useStore();\n        return { updateSaveState };\n    },\n    data: () => ({\n        expanded: false,\n        focussed: false,\n        tooltipDelay: tooltipDelay\n    }),\n    computed: {\n        ...mapState(useStore, [\"saveState\"]),\n        titleStyle: function () {\n            const e = this.entrySummary as EntrySummary;\n            return (\n                \"padding: 0px; background-size:32px; background-position: 8px calc(50% + 0px); background-repeat: no-repeat; background-image:url(data:image/png;base64,\" +\n                e.icon.iconImageData +\n                \")\"\n            );\n        },\n        usernameDisplayValue: function () {\n            const e = this.entrySummary as EntrySummary;\n            return e && e.usernameValue\n                ? e.usernameValue\n                : \"[\" + $STR(\"noUsername_partial_tip\") + \"]\";\n        },\n        tabindex: function () {\n            return \"0\"; //this.isFirstInAList ? \"0\" : \"-1\"; // new treeview component needs this to be 0 for everything\n        },\n        allFields: function () {\n            const e = this.entrySummary.fullDetails as Entry;\n            return e.fields;\n        },\n        entryDomain: function () {\n            const urlStr = this.entrySummary.url;\n            if (!urlStr || urlStr.length < 4) return \"<unknown>\";\n            const kurl = KeeURL.fromString(urlStr);\n            if (!kurl) {\n                return \"<error>\";\n            }\n            return kurl.domainWithPort || kurl.url.host;\n        },\n        entryPath: function () {\n            if (!this.entryPathIsLong) {\n                return this.fullEntryPath;\n            }\n            const e = this.entrySummary.fullDetails as Entry;\n            return \"... > \" + e.parentGroup.path;\n        },\n        entryPathIsLong: function () {\n            return this.fullEntryPath.length > 35;\n        },\n        fullEntryPath: function () {\n            const e = this.entrySummary.fullDetails as Entry;\n            return e.database.name + \" > \" + e.parentGroup.path;\n        },\n        isMatchedEntry: function () {\n            const e = this.entrySummary as EntrySummary;\n            return typeof e.isPreferredMatch === \"boolean\";\n        }\n    },\n    methods: {\n        toggleFullDetails() {\n            if (!this.expanded) {\n                this.showFullDetails();\n            } else {\n                this.hideFullDetails();\n            }\n        },\n        showFullDetails() {\n            if (!this.expanded && !this.entrySummary.fullDetails) {\n                Port.postMessage({\n                    findMatches: {\n                        uuid: this.entrySummary.uuid,\n                        DBfilename: this.entrySummary.dbFileName\n                    }\n                } as AddonMessage);\n            }\n            this.expanded = true;\n        },\n        hideFullDetails() {\n            this.expanded = false;\n        },\n        async editEntry() {\n            const ss = this.saveState as SaveState;\n            const entry = this.entrySummary.fullDetails as Entry;\n            const updatedSaveState = Object.assign({}, ss);\n            const { urls, showWarning } = await reconcileURLs(entry.URLs, ss.submittedData?.url);\n            updatedSaveState.newEntry = supplementEntryState(entry, ss, urls);\n            updatedSaveState.titleResetValue = entry.title;\n            updatedSaveState.lastActiveAt = new Date();\n            updatedSaveState.showURLMismatchWarning = showWarning;\n            //TODO: Confirm that we don't have to roundtrip JSON here too\n//            this.updateSaveState(JSON.parse(JSON.stringify(updatedSaveState)));\n            this.updateSaveState(updatedSaveState);\n        },\n        focusin: function (e) {\n            if (!(this.$refs.card as any).$el.contains(e.relatedTarget)) {\n                this.focussed = true;\n            }\n        },\n        focusout: function (e) {\n            if (!(this.$refs.card as any).$el.contains(e.relatedTarget)) {\n                this.focussed = false;\n            }\n        },\n        async primaryClickAction() {\n            if (this.entryIndex !== undefined) {\n                // We are expected to fill an already discovered entry\n                this.manualFill();\n            } else {\n                // Overwriting the Kee Vault tab causes much confusion so prevent that from happening\n                const currentTab = await chrome.tabs.query({\n                    currentWindow: true,\n                    active: true,\n                    url: [\n                        \"https://keevault.pm/*\",\n                        \"https://app-beta.kee.pm/*\",\n                        \"https://app-dev.kee.pm/*\"\n                    ]\n                });\n                if (currentTab && currentTab.length > 0) {\n                    this.loadInNewTab();\n                } else {\n                    this.loadInSameTab();\n                }\n            }\n        },\n        loadInSameTab() {\n            chrome.tabs.update({ url: this.entrySummary.url });\n            window.close();\n        },\n        loadInNewTab() {\n            chrome.tabs.create({ url: this.entrySummary.url });\n            window.close();\n        },\n        manualFill() {\n            Port.postMessage({\n                action: Action.ManualFill,\n                selectedEntryIndex: this.entryIndex,\n                frameId: this.frameId\n            });\n            window.close();\n        },\n        nextInList() {\n            this.$emit(\"move-next-in-list\");\n        },\n        prevInList() {\n            this.$emit(\"move-prev-in-list\");\n        },\n        exitList() {\n            this.$emit(\"move-out-of-list\");\n        },\n        onPreferredEntryClick() {\n            // json may be unncessary\n            this.$emit(\"pref-entry-toggle\", { uuid: JSON.parse(JSON.stringify(this.entrySummary.uuid)) });\n        }\n    }\n};\n</script>\n","import { SearchConfig } from \"./model/SearchConfig\";\nimport { EntrySummary } from \"./model/EntrySummary\";\nimport { resolveConfig, tokenise, calculateMatchScore } from \"./SearchUtils\";\n\nexport class SearcherMatchedOnly {\n    private searchConfig: SearchConfig;\n    constructor(private matchedEntrySummaries: EntrySummary[]) {\n        this.searchConfig = resolveConfig({ version: 1 });\n    }\n\n    private filterExistingResults(entrySummaries: EntrySummary[], keywords: string[]) {\n        return entrySummaries.filter(entrySummary =>\n            calculateMatchScore(entrySummary, keywords, 0, this.searchConfig)\n        );\n    }\n\n    public execute(query: string, onComplete) {\n        let abort = false;\n\n        if (!this.matchedEntrySummaries || this.matchedEntrySummaries.length === 0) abort = true;\n\n        onComplete = onComplete || this.searchConfig.onComplete;\n\n        if (!onComplete) abort = true;\n\n        if (abort) {\n            if (onComplete) {\n                onComplete([]);\n                return;\n            } else {\n                return [];\n            }\n        }\n\n        if (!query || query.length === 0) {\n            onComplete(this.matchedEntrySummaries);\n            return;\n        }\n\n        // allow pre-tokenised search terms to be supplied\n        let keywords = [];\n        if (Array.isArray(query)) keywords = query;\n        else if (query.length > 0) keywords = tokenise(query);\n\n        // Create a timer to make the search run async\n        window.setTimeout(() => {\n            const results = this.filterExistingResults(this.matchedEntrySummaries, keywords);\n            onComplete(results);\n        }, 1);\n    }\n}\n","<template>\n    <div id=\"searchPanel\" class=\"pb-6 pt-0 pr-0\">\n        <v-divider v-show=\"filteredMatches && filteredMatches.length > 0\" class=\"mt-2\" />\n        <Entry\nv-for=\"(match, index) of filteredMatches\" :key=\"match.entry.uuid\" :ref=\"setNodesA\"\n            :entrySummary=\"match.entry\" :isFirstInAList=\"index === 0\" :frame-id=\"frameId\"\n            :entry-index=\"match.originalIndex\" :dataIndex=\"index\" @move-next-in-list=\"\n                nextInList(index, 'listAarray', filteredMatches.length)\n            \" @move-prev-in-list=\"\n    prevInList(index, 'listAarray')\n\" @move-out-of-list=\"exitList\"\n@pref-entry-toggle=\"onPreferredEntryClick\"  />\n\n        <v-divider v-show=\"deduplicatedSearchResults && deduplicatedSearchResults.length > 0\" class=\"mt-2\" />\n        <v-list-subheader\nv-show=\"deduplicatedSearchResults && deduplicatedSearchResults.length > 0\" class=\"text-center\"\n            style=\"justify-content: center\">\n            {{ $i18n(\"matches_from_other_sites\") }}\n        </v-list-subheader>\n\n        <Entry\nv-for=\"(entry, index) of deduplicatedSearchResults\" :key=\"entry.uuid\" :ref=\"setNodesB\"\n            :entrySummary=\"entry\" :isFirstInAList=\"index === 0\" :dataIndex=\"index\"\n            @move-next-in-list=\"nextInList(index, 'listBarray', deduplicatedSearchResults.length)\"\n            @move-prev-in-list=\"prevInList(index, 'listBarray')\" @move-out-of-list=\"exitList\" />\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport Entry from \"./Entry.vue\";\nimport { KeeLog } from \"../../common/Logger\";\nimport { EntrySummary } from \"../../common/model/EntrySummary\";\nimport { Entry as ModelEntry } from \"../../common/model/Entry\";\nimport { SearcherMatchedOnly } from \"../../common/SearcherMatchedOnly\";\nimport { mapState } from \"pinia\";\nimport useStore from \"../../store\";\n\nexport default {\n    components: { Entry },\n    props: [\"matchedEntriesIn\", \"frameId\"],\n    emits: [\"pref-entry-toggle\"],\n    data() {\n        return {\n            filteredMatches: null,\n            uidMap: new Map<string, number>(),\n            aNodes: [],\n            bNodes: [],\n            searchOnlyMatches: null as SearcherMatchedOnly,\n            matchedEntries: this.$props.matchedEntriesIn\n        };\n    },\n    computed: {\n        ...mapState(useStore, [\"currentSearchTerm\", \"searchResults\"]),\n        deduplicatedSearchResults: function () {\n            if (this.searchResults) {\n                if (this.matchedEntries) {\n                    return this.searchResults.filter(\n                        e => !this.matchedEntries.some(m => m.uuid === e.uuid)\n                    );\n                } else {\n                    return this.searchResults;\n                }\n            }\n            return null;\n        }\n    },\n    watch: {\n        matchedEntries: function (newVal) {\n            KeeLog.debug(\"about to reinit\");\n            this.initAndSearchMatchedEntries(newVal);\n        },\n        currentSearchTerm: function (newVal) {\n            KeeLog.debug(\"about to reexecute\");\n            this.searchOnlyMatches.execute(\n                newVal,\n                this.onSearchOnlyMatchesComplete.bind(this)\n            );\n        }\n    },\n    beforeUpdate() {\n        this.aNodes = [];\n        this.bNodes = [];\n    },\n    created() {\n        KeeLog.debug(\"created. about to init\");\n        this.initAndSearchMatchedEntries(this.matchedEntries);\n    },\n    methods: {\n        setNodesA(node) {\n            if (node) this.aNodes.push(node);\n        },\n        setNodesB(node) {\n            if (node) this.bNodes.push(node);\n        },\n        onSearchOnlyMatchesComplete(entrySummaries: EntrySummary[]) {\n            KeeLog.debug(\"onSearchOnlyMatchesComplete\");\n            entrySummaries = entrySummaries.sort(function (a, b) {\n                if (a.relevanceScore > b.relevanceScore) return -1;\n                if (a.relevanceScore < b.relevanceScore) return 1;\n                return 0;\n            });\n            this.filteredMatches = entrySummaries.map(m => ({\n                entry: m,\n                originalIndex: this.uidMap.get(m.uuid)\n            }));\n        },\n        nextInList(currentIndex: number, listName: string, listLength: any) {\n            const currentVueNode = (listName === \"listAarray\" ? this.aNodes : this.bNodes).find(\n                e => {\n            return parseInt(e.dataIndex) === currentIndex;\n                }\n            );\n            if (currentIndex < listLength - 1) {\n                // Current treeview implementation seems to have some text node get\n                // focus even after we ask the div to get focus. So we have to skip forward 2 and back 1\n                currentVueNode.$el.nextElementSibling.nextElementSibling.focus();\n            } else if (listName === \"listAarray\" && this.deduplicatedSearchResults.length > 0) {\n                const firstBListVueNode = this.bNodes.find(\n                    e => parseInt(e.dataIndex) === 0\n                );\n                firstBListVueNode.$el.nextElementSibling.focus();\n            }\n        },\n        prevInList(currentIndex: number, listName: string) {\n            const currentVueNode = (listName === \"listAarray\" ? this.aNodes : this.bNodes).find(\n                e => parseInt(e.dataIndex) === currentIndex\n            );\n            if (currentIndex > 0) {\n                currentVueNode.$el.previousElementSibling.focus();\n            } else if (listName === \"listBarray\" && this.filteredMatches.length > 0) {\n                const lastAListVueNode = this.aNodes.find(\n                    e => parseInt(e.dataIndex) === this.filteredMatches.length - 1\n                );\n                lastAListVueNode.$el.nextElementSibling.focus();\n            } else {\n                (document.getElementById(\"searchBox\") as HTMLInputElement).focus();\n            }\n        },\n        exitList() {\n            (document.getElementById(\"searchBox\") as HTMLInputElement).focus();\n        },\n        initAndSearchMatchedEntries(matchedEntries: ModelEntry[]) {\n            if (matchedEntries) {\n                for (let i = 0; i < matchedEntries.length; i++) {\n                    this.uidMap.set(matchedEntries[i].uuid, matchedEntries[i].entryIndex);\n                }\n            }\n            this.searchOnlyMatches = new SearcherMatchedOnly(\n                matchedEntries?.map(e => EntrySummary.fromEntry(e))\n            );\n            KeeLog.debug(\"about to execute\");\n            this.searchOnlyMatches.execute(\n                this.currentSearchTerm,\n                this.onSearchOnlyMatchesComplete.bind(this)\n            );\n        },\n        onPreferredEntryClick(payload: any) {\n            this.$emit(\"pref-entry-toggle\", payload);\n        }\n    }\n};\n</script>\n","<template>\n    <v-row v-if=\"field.type === 'password' || field.type === 'text'\">\n        <v-col>\n            <v-text-field\n                :label=\"label\"\n                :model-value=\"field.value\"\n                color=\"secondary\"\n                variant=\"filled\"\n                density=\"comfortable\"\n                hide-details=\"auto\"\n                :type=\"renderType\"\n                @update:model-value=\"valueChanged\"\n                @focus=\"onFocus\"\n                @blur=\"onBlur\"\n            >\n                <template #append>\n                    <v-slide-x-transition>\n                        <v-btn v-if=\"focussed && resettable\" size=\"x-small\" icon class=\"ml-1\" @click=\"reset\">\n                            <mdi-undo scale=\"175\"/>\n                        </v-btn>\n                    </v-slide-x-transition>\n                    <v-btn\n                        v-if=\"field.type === 'password'\"\n                        size=\"x-small\"\n                        icon\n                        class=\"ml-1\"\n                        @click=\"revealed = !revealed\"\n                    >\n                        <mdi-eye v-if=\"revealed\" scale=\"175\"/>\n                        <mdi-eye-off v-if=\"!revealed\" scale=\"175\"/>\n                    </v-btn>\n                    <v-btn\n                        v-if=\"field.type === 'password'\"\n                        size=\"x-small\"\n                        icon\n                        class=\"ml-1\"\n                        @click=\"showPasswordGenerator = true\"\n                    >\n                        <mdi-flash  scale=\"175\"/>\n                    </v-btn>\n                    <v-btn size=\"x-small\" icon class=\"ml-1\" @click=\"deleteClicked\">\n                        <mdi-delete scale=\"175\" />\n                    </v-btn>\n                </template>\n            </v-text-field>\n            <PasswordGenerator\n                v-if=\"showPasswordGenerator\"\n                @dialog-closed=\"passwordGeneratorClosed\"\n                @copy-to-clipboard=\"copyToClipboard\"\n            />\n        </v-col>\n    </v-row>\n</template>\n\n<script lang=\"ts\">\nimport { Field } from \"../../common/model/Field\";\nimport PasswordGenerator from \"../../common/components/PasswordGenerator.vue\";\nimport { copyStringToClipboard } from \"../../common/copyStringToClipboard\";\nimport { KeeLog } from \"~/common/Logger\";\n\nexport default {\n    components: {\n        PasswordGenerator\n    },\n    props: [\"field\"],\n    emits: [\"field-value-changed\", \"field-deleted\"],\n    data: () => ({\n        revealed: false,\n        showPasswordGenerator: false,\n        focussed: false\n    }),\n    computed: {\n        renderType: function () {\n            if (this.field.type === \"password\") {\n                return this.revealed ? \"text\" : \"password\";\n            }\n            return this.field.type;\n        },\n        resettable: function () {\n            return this.field.resetValue !== this.field.value;\n        },\n        label: function () {\n            return Field.getDisplayName(this.field);\n        }\n    },\n    methods: {\n        reset: function () {\n            this.valueChanged(this.field.resetValue);\n        },\n        valueChanged: function (value) {\n            this.$emit(\"field-value-changed\", { uuid: this.field.uuid, value });\n        },\n        deleteClicked: function () {\n            this.$emit(\"field-deleted\", { uuid: this.field.uuid });\n        },\n        passwordGeneratorClosed: function (payload) {\n            if (payload?.value) this.valueChanged(payload.value);\n            this.showPasswordGenerator = false;\n        },\n        onFocus() {\n            this.focussed = true;\n        },\n        onBlur() {\n            this.focussed = false;\n        },\n        copyToClipboard: async function (payload) {\n            if (payload?.value) await copyStringToClipboard(payload.value);\n        }\n    }\n};\n</script>\n","import { DatabaseSummaryDto } from \"./KPRPCDTOs\";\nimport { Icon } from \"./Icon\";\nimport { GroupSummary } from \"./GroupSummary\";\nimport { Database } from \"./Database\";\n\nexport class DatabaseSummary {\n    name: string;\n    fileName: string;\n    icon: Icon;\n    root: GroupSummary;\n    active: boolean;\n\n    constructor(db: Partial<DatabaseSummary>) {\n        this.name = db.name || \"\";\n        this.fileName = db.fileName || \"\";\n        this.icon = db.icon || { version: 1, iconImageData: \"\" };\n        this.root = db.root || new GroupSummary({});\n        this.active = db.active || false;\n    }\n\n    public static fromKPRPCDatabaseSummaryDTO(dto: DatabaseSummaryDto) {\n        return new DatabaseSummary({\n            name: dto.name,\n            fileName: dto.fileName,\n            icon: { version: 1, iconImageData: dto.iconImageData },\n            root: GroupSummary.fromKPRPCGroupSummaryDTO(dto.root),\n            active: dto.active\n        });\n    }\n\n    public static fromDatabase(db: Database) {\n        return new DatabaseSummary({\n            name: db.name,\n            fileName: db.fileName,\n            icon: db.icon,\n            root: GroupSummary.fromGroup(db.root)\n        });\n    }\n}\n","<template>\n    <div>\n        <v-slide-y-transition>\n            <v-container class=\"my-3 pa-0\" style=\"padding: 0px;\">\n                <v-row>\n                    <v-col>\n                        <v-text-field\n:label=\"$i18n('title')\" :model-value=\"saveState.newEntry.title\" variant=\"filled\"\n                            density=\"comfortable\" hide-details=\"auto\" type=\"text\" autofocus\n                            @update:model-value=\"setTitle\" @focus=\"onTitleFocus\" @blur=\"onTitleBlur\">\n                            <template v-if=\"titleFocussed && resettableTitle\" #append>\n                                    <v-btn size=\"x-small\" icon class=\"ml-1\" @click=\"resetTitle\">\n                                        <mdi-undo scale=\"175\" />\n                                    </v-btn>\n                            </template>\n                        </v-text-field>\n                    </v-col>\n                </v-row>\n\n                <FieldEditor\nv-for=\"f of saveState.newEntry.fields\" :key=\"f.uuid\" :field=\"f\"\n                    @field-value-changed=\"fieldValueChanged\" @field-deleted=\"fieldDeleted\" />\n            </v-container>\n        </v-slide-y-transition>\n        <v-alert\nv-if=\"showURLMismatchWarning\" border=\"top\" border-color=\"primary\" type=\"warning\" :icon=\"false\"\n            elevation=\"1\" class=\"my-3\">\n            <v-row dense>\n                <v-col>\n                    <p>{{ $i18n(\"url_mismatch_1\") }}</p>\n                    <p>{{ $i18n(\"url_mismatch_2\") }}</p>\n                    <p>{{ $i18n(\"url_mismatch_3\") }}</p>\n                </v-col>\n            </v-row>\n            <v-row dense>\n                <v-col class=\"my-0 py-0\">\n                    <div>\n                        <v-checkbox\nv-model=\"differentSiteConfirmation\" class=\"my-0 py-0\" hide-details\n                            :label=\"$i18n('url_mismatch_confirm', entryDomain)\" />\n                    </div>\n                </v-col>\n            </v-row>\n        </v-alert>\n        <v-container style=\"display: flex; width: 100%; justify-content: space-between;\">\n            <v-btn color=\"tertiary\" @click=\"cancel\">\n                {{ $i18n(\"cancel\") }}\n            </v-btn>\n            <v-btn\nv-if=\"!loading && !editingExisting && !skipWhere\" color=\"primary\"\n                @click=\"nextClicked\">\n                {{ $i18n(\"next\") }}\n            </v-btn>\n            <v-btn v-if=\"!loading && !editingExisting && skipWhere\" color=\"primary\" @click=\"saveEntry\">\n                {{ $i18n(\"save\") }}\n            </v-btn>\n            <v-btn v-if=\"loading\" loading disabledcolor=\"primary\"> ......... </v-btn>\n            <v-btn\nv-if=\"editingExisting\" :disabled=\"showURLMismatchWarning && !differentSiteConfirmation\"\n                color=\"primary\" @click=\"updateEntry\">\n                {{ $i18n(\"update\") }}\n            </v-btn>\n        </v-container>\n        <v-alert\nv-if=\"editingExisting\" border=\"top\" border-color=\"primary\" type=\"info\" :icon=\"false\" elevation=\"1\"\n            class=\"my-4\">\n            <v-row align=\"center\">\n                <v-col class=\"grow\">\n                    {{ $i18n(\"make_additional_changes_using_full_editor\") }}\n                </v-col>\n            </v-row>\n            <v-row align=\"center\">\n                <v-col class=\"grow\">\n                    <v-btn size=\"small\" @click=\"openFullEntryEditor\">\n                        {{ $i18n(\"open_full_editor\") }}\n                    </v-btn>\n                </v-col>\n            </v-row>\n        </v-alert>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { Port } from \"../../common/port\";\nimport { Action } from \"../../common/Action\";\nimport { SaveState } from \"../../common/SaveState\";\nimport { Entry } from \"../../common/model/Entry\";\nimport FieldEditor from \"./FieldEditor.vue\";\nimport { Field } from \"../../common/model/Field\";\nimport { AddonMessage } from \"../../common/AddonMessage\";\nimport { KeeURL } from \"../../common/KeeURL\";\nimport { TemporaryIDString, GroupSummary } from \"../../common/model/GroupSummary\";\nimport { configManager } from \"../../common/ConfigManager\";\nimport { DatabaseSummary } from \"../../common/model/DatabaseSummary\";\nimport { Database } from \"../../common/model/Database\";\nimport { Group } from \"../../common/model/Group\";\nimport { SearcherAll } from \"../../common/SearcherAll\";\nimport useStore from \"../../store\";\nimport { mapState } from \"pinia\";\nimport { KeeLog } from \"~/common/Logger\";\n\nexport default {\n    components: {\n        FieldEditor\n    },\n    emits: [\"cancel-clicked\", \"save-where-clicked\"],\n    setup() {\n        const { updateSaveState, removeFieldFromActiveEntry } = useStore();\n        return { updateSaveState, removeFieldFromActiveEntry };\n    },\n    data: () => ({\n        originalFields: [],\n        differentSiteConfirmation: false,\n        loading: true,\n        preferToSkipWhere: false,\n        skipWhere: false,\n        domainMatchesExistingEntry: false,\n        preferredGroupUuid: null,\n        preferredDb: null,\n        primaryFound: false,\n        titleFocussed: true\n    }),\n    computed: {\n        ...mapState(useStore, [\"saveState\", \"KeePassDatabases\", \"ActiveKeePassDatabaseIndex\"]),\n        resettableTitle: function () {\n            return (\n                this.saveState.titleResetValue !==\n                this.saveState.newEntry.title\n            );\n        },\n        editingExisting: function () {\n            const e = (this.saveState as SaveState).newEntry;\n            return e.database.fileName && e.database.root.uuid !== TemporaryIDString;\n        },\n        showURLMismatchWarning: function () {\n            return this.saveState.showURLMismatchWarning;\n        },\n        entryDomain: function () {\n            const urlStr = (this.saveState as SaveState).newEntry.URLs[0];\n            if (!urlStr || urlStr.length < 4) return \"<unknown>\";\n            const kurl = KeeURL.fromString(urlStr);\n            if (!kurl) {\n                return \"<error>\";\n            }\n            return kurl.domainWithPort || kurl.url.host;\n        },\n        displayWhereReason: function () {\n            if (this.loading || !this.preferToSkipWhere) return null;\n            return this.domainMatchesExistingEntry\n                ? this.$i18n(\"skip_where_reason_domain_entry_exists\")\n                : this.primaryFound\n                    ? this.$i18n(\"skip_where_reason_group_not_found\")\n                    : null;\n        }\n    },\n    async mounted() {\n        this.preferToSkipWhere = configManager.current.rememberMRUGroup;\n        const dbs = this.KeePassDatabases as Database[];\n        const { preferredGroupUuid, preferredDb, primaryFound } = this.getPreferredGroup(\n            configManager.current.mruGroup,\n            dbs\n        );\n        this.preferredGroupUuid = preferredGroupUuid;\n        if (this.preferToSkipWhere) {\n            this.preferredDb = preferredDb;\n            this.primaryFound = primaryFound;\n\n            this.domainMatchesExistingEntry = this.anyEntryMatchesNewDomain();\n\n            if (this.preferredGroupUuid && this.preferredDb && !this.domainMatchesExistingEntry) {\n                this.skipWhere = true;\n            }\n        }\n        this.loading = false;\n    },\n    methods: {\n        cancel: function () {\n            this.$emit(\"cancel-clicked\");\n        },\n        nextClicked: function () {\n            this.$emit(\"save-where-clicked\", this.displayWhereReason, this.preferredGroupUuid);\n        },\n        saveEntry: function () {\n            const updatedSaveState = Object.assign({}, JSON.parse(JSON.stringify(this.saveState))) as SaveState;\n            updatedSaveState.newEntry = new Entry({\n                ...updatedSaveState.newEntry,\n                parentGroup: new GroupSummary({ uuid: this.preferredGroupUuid }),\n                database: this.preferredDb\n            });\n            this.updateSaveState(updatedSaveState);\n            Port.postMessage({ action: Action.CreateEntry } as AddonMessage);\n            window.close();\n        },\n        updateEntry: function () {\n            Port.postMessage({ action: Action.UpdateEntry } as AddonMessage);\n            window.close();\n        },\n        openFullEntryEditor() {\n            const entry = (JSON.parse(JSON.stringify(this.saveState)) as SaveState).newEntry;\n            Port.postMessage({\n                loginEditor: {\n                    uuid: entry.uuid,\n                    DBfilename: entry.database.fileName\n                }\n            } as AddonMessage);\n            window.close();\n        },\n        setTitle: function (value) {\n            const updatedSaveState = Object.assign({}, JSON.parse(JSON.stringify(this.saveState))) as SaveState;\n            updatedSaveState.newEntry = new Entry({\n                ...updatedSaveState.newEntry,\n                title: value\n            });\n            this.updateSaveState(updatedSaveState);\n        },\n        resetTitle: function () {\n            this.setTitle(JSON.parse(JSON.stringify(this.saveState.titleResetValue)));\n        },\n        fieldValueChanged: function (change) {\n            const updatedSaveState = Object.assign({}, JSON.parse(JSON.stringify(this.saveState))) as SaveState;\n            const originalFieldIndex = (JSON.parse(JSON.stringify(this.saveState)) as SaveState).newEntry.fields.findIndex(f => f.uuid === change.uuid);\n            const originalField = (JSON.parse(JSON.stringify(this.saveState)) as SaveState).newEntry.fields[\n                originalFieldIndex\n            ];\n            const newField = new Field({\n                ...originalField,\n                value: change.value\n            });\n            //TODO:5: faster deep clone\n            const newFields = JSON.parse(\n                JSON.stringify(updatedSaveState.newEntry.fields)\n            ) as Field[];\n            newFields[originalFieldIndex] = newField;\n            updatedSaveState.newEntry = new Entry({\n                ...updatedSaveState.newEntry,\n                fields: newFields\n            });\n            this.updateSaveState(updatedSaveState);\n        },\n        fieldDeleted: function (field: Partial<Field>) {\n            this.removeFieldFromActiveEntry(field.uuid);\n        },\n        getPreferredGroup: function (mruGroup: { [key: string]: string }, dbs: Database[]) {\n            if (!mruGroup) {\n                return { preferredGroupUuid: null, preferredDb: null, primaryFound: false };\n            }\n\n            let primaryFound = false;\n            const UUIDs = [];\n            const primaryUuid = mruGroup[\"{<{{<<kee-primary>>}}>}\"];\n            if (primaryUuid) {\n                primaryFound = true;\n                UUIDs.push(primaryUuid);\n            }\n\n            // We normally expect the value in the primary key to be correct but it may not\n            // be if the user has just upgraded from Kee 3.4 or lower, or if they have a\n            // particuarlly complex set of databases with different filenames and/or duplicate\n            // UUIDs or if they constantly switch back and forth between multiple databases so\n            // we may as well try the one specific to the currently open database, although\n            // only if there is a single open database.\n            if (dbs.length === 1 && mruGroup[dbs[0].fileName]) {\n                if (mruGroup[dbs[0].fileName] !== UUIDs[0]) {\n                    UUIDs.push(mruGroup[dbs[0].fileName]);\n                }\n            }\n\n            for (const groupId of UUIDs) {\n                if (!groupId) continue;\n                const matchedDb = dbs.find(db => Group.containsId(db.root, groupId));\n                if (matchedDb) {\n                    return {\n                        preferredGroupUuid: groupId,\n                        preferredDb: new DatabaseSummary({\n                            fileName: matchedDb.fileName,\n                            root: new GroupSummary({ uuid: TemporaryIDString })\n                        }),\n                        primaryFound\n                    };\n                }\n            }\n            return {\n                preferredGroupUuid: null,\n                preferredDb: null,\n                primaryFound\n            };\n        },\n        anyEntryMatchesNewDomain: function () {\n            const urlStr = JSON.parse(JSON.stringify((this.saveState as SaveState).newEntry.URLs[0]));\n            if (!urlStr || urlStr.length < 4) return false;\n            const kurl = KeeURL.fromString(urlStr);\n            if (!kurl) {\n                return false;\n            }\n            const search = new SearcherAll(\n                {\n                    KeePassDatabases: this.KeePassDatabases,\n                    ActiveKeePassDatabaseIndex: this.ActiveKeePassDatabaseIndex\n                } as any,\n                {\n                    version: 1,\n                    searchAllDatabases: configManager.current.searchAllOpenDBs,\n                    maximumResults: 1\n                }\n            );\n            const results = search.execute(\"\", undefined, [kurl.domainOrIPAddress]);\n            return !!results?.length;\n        },\n        onTitleFocus() {\n            this.titleFocussed = true;\n        },\n        onTitleBlur() {\n            this.titleFocussed = false;\n        }\n    }\n};\n</script>\n","<template>\n    <li>\n        <div>\n            <v-list-item :style=\"indentStyle\" :active=\"item.selected\" density=\"comfortable\" @click=\"$emit('select', item)\">\n                <v-btn\n                    v-if=\"hasVisibleChildren\" icon size=\"1.5rem\" color=\"secondary\"\n                    style=\"margin-left:0rem; margin-right: 0.5rem;\" @click.stop=\"toggleExpand\">\n                    <mdi-chevron-up v-if=\"isExpanded\" scale=\"150\" />\n                    <mdi-chevron-down v-if=\"!(isExpanded)\" scale=\"150\" />\n                </v-btn>\n                <span>{{ item.text }}</span>\n            </v-list-item>\n            <v-item-group v-if=\"hasVisibleChildren\" v-model=\"isExpanded\">\n                <ul v-show=\"isExpanded\">\n                    <TreeItem\n                        v-for=\"child in filteredChildren\" :key=\"child.id\" :item=\"child\"\n                        :indent-level=\"indentLevel + 1\" @select=\"(item) => handleSelect(item)\"></TreeItem>\n                </ul>\n            </v-item-group>\n        </div>\n    </li>\n</template>\n<script lang=\"ts\">\nexport class GroupListItem {\n    constructor(\n        public id: string,\n        public text: string,\n        public children?: GroupListItem[],\n        public selected?: boolean,\n        public visibleChildIds: string[] = []\n    ) { }\n}\nexport default {\n    name: \"TreeItem\",\n    props: {\n        item: {\n            type: GroupListItem,\n            required: true\n        },\n        indentLevel: {\n            type: Number,\n            default: 0\n        }\n    },\n    emits: [\"select\"],\n\n    data() {\n        return {\n            isExpanded: true\n        };\n    },\n    computed: {\n        hasVisibleChildren() {\n            return this.item.visibleChildIds.length > 0;\n        },\n        indentStyle() {\n            return {\n                // expand/contract icon is 2rem wide\n                paddingLeft: this.hasVisibleChildren ? `${(this.indentLevel) + 0.25}rem` : `${(this.indentLevel) + 2.25}rem`\n            };\n        },\n        filteredChildren() {\n            return this.item.children.filter(child => this.isChildVisible(child));\n        }\n    },\n    methods: {\n        toggleExpand() {\n            this.isExpanded = !this.isExpanded;\n        },\n        handleSelect(item: GroupListItem) {\n            this.$emit(\"select\", item);\n        },\n        isChildVisible(item: GroupListItem) {\n            return this.item.visibleChildIds.includes(item.id);\n        }\n    }\n};\n\n</script>\n","<template>\n    <div>\n        <ul>\n            <TreeItem\n                v-for=\"item in filteredItems\" :key=\"item.id\" :item=\"item\" :indent-level=\"0\"\n                @select=\"(item: GroupListItem) => handleSelect(item)\">\n            </TreeItem>\n        </ul>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport TreeItem, { GroupListItem } from \"./TreeItem.vue\";\nexport default {\n    name: \"GroupSelectorTree\",\n    components: {\n        TreeItem\n    },\n    props: {\n        items: {\n            type: Array<GroupListItem>,\n            required: true\n        },\n        filterText: {\n            type: String,\n            required: true\n        }\n    },\n    emits: [\"setGroup\"],\n    computed: {\n        filteredItems() {\n            const lowercaseFilterText = this.filterText ? this.filterText.toLowerCase() : \"\";\n\n            const traverseTree = (node: GroupListItem): boolean => {\n                const filteredChildren = node.children?.filter(child => traverseTree(child)) ?? Array<GroupListItem>();\n                node.visibleChildIds = filteredChildren.map(child => child.id);\n                return node.text.toLowerCase().includes(lowercaseFilterText) || filteredChildren.length > 0;\n            };\n\n            this.items.map(item => traverseTree(item));\n            return this.items;\n        }\n    },\n    methods: {\n        handleSelect(item: GroupListItem) {\n            this.$emit(\"setGroup\", item);\n        }\n    }\n};\n</script>\n","<template>\n    <div>\n        <v-slide-y-transition>\n            <v-container class=\"ma-0 pa-0\" style=\"cursor: default; padding: 0; margin: 0\">\n                <v-row justify=\"center\" style=\"cursor: default; padding: 0; margin: 0\">\n                    <v-col style=\"cursor: default; padding: 0; margin: 0\" class=\"text-6 text-center\">\n                        {{ $i18n(\"where\") }}\n                    </v-col>\n                </v-row>\n                <v-row style=\"margin-top: 0px;\">\n                    <v-col>\n                        <v-card class=\"mx-auto\" max-width=\"500\">\n                            <v-sheet class=\"pa-4 pb-1\">\n                                <v-text-field\n                                    v-model=\"debouncedSearchValue\" :label=\"$i18n('Search_label')\"\n                                    color=\"secondary\" variant=\"outlined\" hide-details=\"auto\" clearable density=\"compact\"\n                                    clear-icon=\"mdi-close-circle-outline\" />\n                            </v-sheet>\n                            <v-card-text>\n                                <Tree\n                                    :items=\"items\" :filter-text=\"search ?? ''\"\n                                    style=\"max-height: 220px;min-height: 220px;overflow-y: auto;\"\n                                    @set-group=\"(item: GroupListItem) => handleSelect(item)\"></tree>\n                            </v-card-text>\n                        </v-card>\n                    </v-col>\n                </v-row>\n                <v-row>\n                    <v-col class=\"py-0\">\n                        <v-checkbox v-model=\"skipInFuture\" :label=\"$i18n('skip_where_enable_context')\"></v-checkbox>\n                    </v-col>\n                </v-row>\n            </v-container>\n        </v-slide-y-transition>\n\n        <v-btn :disabled=\"!saveEnabled\" location=\"right\" color=\"primary\" @click=\"saveEntry\">\n            {{ $i18n(\"save\") }}\n        </v-btn>\n\n        <v-container v-if=\"displayReason\">\n            {{ displayReason }}\n        </v-container>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { Port } from \"../../common/port\";\nimport { Action } from \"../../common/Action\";\nimport { SaveState } from \"../../common/SaveState\";\nimport { Entry } from \"../../common/model/Entry\";\nimport { Group } from \"../../common/model/Group\";\nimport { AddonMessage } from \"../../common/AddonMessage\";\nimport { Database } from \"../../common/model/Database\";\nimport { DatabaseSummary } from \"../../common/model/DatabaseSummary\";\nimport { GroupSummary, TemporaryIDString } from \"../../common/model/GroupSummary\";\nimport { configManager } from \"../../common/ConfigManager\";\nimport useStore from \"../../store\";\nimport { mapState } from \"pinia\";\nimport { KeeLog } from \"~/common/Logger\";\nimport GroupSelectorTree from \"./GroupSelectorTree.vue\";\nimport { GroupListItem } from \"./TreeItem.vue\";\n\n\nconst recursiveFilterMap = (group: Group, filter: (grp: Group) => boolean, map: (grp: Group) => Group): Group => {\n    const chosenChildGroups: Group[] = [];\n\n    for (const childGroup of group.groups) {\n        const chosenChildGroup = recursiveFilterMap(childGroup, filter, map);\n        if (chosenChildGroup) chosenChildGroups.push(chosenChildGroup);\n    }\n\n    // groups can be included just because a child is included\n    if (filter(group) || chosenChildGroups.length > 0) {\n        const old = JSON.parse(JSON.stringify(group));\n        old.groups = chosenChildGroups;\n        const g = new Group(old);\n        return map(g);\n    }\n    return null;\n};\n\nfunction findDatabaseAndGroupByGroupId(databases: Database[], uuid: string) {\n\n    for (const database of databases) {\n        const group = Group.matchingId(database.root, uuid);\n        if (group) {\n            return { database, group };\n        }\n    }\n    return null;\n}\n\nlet selectedItem: any = {};\n\nexport default {\n    components: {\n        Tree: GroupSelectorTree\n    },\n    props: [\"preferredGroupUuid\", \"displayReason\"],\n    setup() {\n        const { updateSaveState } = useStore();\n        return { updateSaveState };\n    },\n    data: function () {\n        return {\n            search: \"\",\n            debounceTimeout: null,\n            updatingConfig: false,\n            skipInFuture: configManager.current.rememberMRUGroup,\n            lastSelectedGroupUuid: this.$props.preferredGroupUuid, // caller has already checked that this uuid is present in list of DBs and groups\n            initialSelectedGroupId: JSON.parse(JSON.stringify(this.$props.preferredGroupUuid)) // really do not want this to be reactive!\n        };\n    },\n    computed: {\n        ...mapState(useStore, [\"saveState\", \"KeePassDatabases\", \"ActiveKeePassDatabaseIndex\"]),\n        rootGroup: function () {\n            return this.KeePassDatabases[this.ActiveKeePassDatabaseIndex].root;\n        },\n        saveEnabled: function () {\n            return !this.updatingConfig && this.lastSelectedGroupUuid?.length > 0;\n        },\n        debouncedSearchValue: {\n            get() {\n                return this.search;\n            },\n            set(value) {\n                clearTimeout(this.debounceTimeout);\n                this.debounceTimeout = setTimeout(() => {\n                    this.search = value;\n                }, 50);\n            }\n        },\n        items: function () {\n            // array of all databases root group\n            const groups = this.KeePassDatabases.map(db => recursiveFilterMap(db.root, g => true, g => {\n                const grp = new Group({\n                    entrySummaries: [],\n                    groups: g.groups,\n                    icon: null,\n                    path: g.path,\n                    title: g.title,\n                    uuid: g.uuid\n                }\n                );\n                return grp;\n            }));\n\n            const mapItem = (item: Group) => {\n                const selected = item.uuid === this.initialSelectedGroupId;\n                const gli = new GroupListItem(\n                    item.uuid,\n                    item.title,\n                    item.groups.map(mapItem),\n                    selected,\n                    []\n\n                );\n                // We need to cache the reference to a reactive version of the item if it has been preselected\n                // so we can deselect it later. The other items will be Proxified later.\n                const result = selected ? reactive(gli) : gli;\n                if (selected) {\n                    selectedItem = result;\n                }\n                return result;\n            };\n            return reactive(groups.map(mapItem));\n        }\n    },\n    watch: {\n        skipInFuture: async function (newValue: boolean, oldValue: boolean) {\n            if (newValue !== oldValue) {\n                this.updatingConfig = true;\n                configManager.current.rememberMRUGroup = newValue;\n                await configManager.save();\n                this.updatingConfig = false;\n            }\n        }\n    },\n    mounted() {\n        // Not certain that mounted is the right place for this but maybe it's fine\n        if (this.initialSelectedGroupId?.length > 0) {\n            this.setGroupById(this.initialSelectedGroupId);\n        }\n    },\n    methods: {\n\n        saveEntry: function () {\n            Port.postMessage({ action: Action.CreateEntry } as AddonMessage);\n            window.close();\n        },\n        setGroupById: function (uuid: string) {\n            if (!uuid) return;\n\n            const { database, group: selectedGroup } = findDatabaseAndGroupByGroupId(this.KeePassDatabases, uuid);\n\n            // Maybe object assign isn't actually removing the proxy objects?\n            const updatedSaveState = Object.assign({}, this.saveState) as SaveState;\n            //const updatedSaveState = JSON.parse(JSON.stringify(this.saveState)) as SaveState;\n\n            updatedSaveState.newEntry = new Entry({\n                ...updatedSaveState.newEntry,\n                parentGroup: selectedGroup,\n                database: new DatabaseSummary({\n                    fileName: JSON.parse(JSON.stringify(database.fileName)),\n                    root: new GroupSummary({ uuid: TemporaryIDString })\n                })\n            });\n            this.updateSaveState(updatedSaveState);\n            this.lastSelectedGroupUuid = uuid;\n        },\n        handleSelect(item: GroupListItem) {\n            KeeLog.debug(\"Setting selected group to \" + item.id);\n            selectedItem.selected = false;\n            item.selected = true;\n            selectedItem = item;\n            this.setGroupById(item.id);\n        }\n    }\n};\n\n</script>\n","async function sleep(milliseconds: number) {\n    return new Promise(resolve => window.setTimeout(resolve, milliseconds));\n}\n\nexport function fetchFavicon(url): Promise<string> {\n    return new Promise(function (resolve) {\n        if (!url) {\n            resolve(undefined);\n            return;\n        }\n        const img = new Image();\n        img.onload = function (this: HTMLImageElement) {\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = this.width;\n            canvas.height = this.height;\n            const ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(this, 0, 0);\n            const dataURL = canvas.toDataURL(\"image/png\");\n            resolve(dataURL.substr(22));\n        };\n        img.src = url;\n    });\n}\n\nexport async function getFaviconUrl() {\n    for (let i = 0; i < 45; i++) {\n        const tab = (await chrome.tabs.query({ active: true, currentWindow: true }))[0];\n        if (tab) {\n            return tab.favIconUrl;\n        }\n        sleep(1000);\n    }\n}\n","<template>\n    <v-app class=\"\">\n        <v-app-bar v-model=\"showSearchPanel\" class=\"py-1\" density=\"compact\" style=\"max-width: 400px\">\n            <SearchInput />\n        </v-app-bar>\n        <v-main>\n            <v-container fluid class=\"overflow-auto app_height\" style=\"padding: 8px 12px\">\n                <div>\n                    <v-alert v-show=\"showSaveRecovery\" color=\"secondary\" border=\"top\" border-color=\"primary\"\n                        elevation=\"1\" class=\"mt-2\">\n                        <v-row dense>\n                            <v-col>{{ $i18n(\"unsaved_changes\") }}</v-col>\n                        </v-row>\n                        <v-row dense class=\"py-1\" align=\"start\">\n                            <v-col>\n                                <v-btn color=\"primary\" size=\"small\" @click=\"saveRecover\">\n                                    {{ $i18n(\"continue_saving\") }}\n                                </v-btn>\n                            </v-col>\n                            <v-col>\n                                <v-btn color=\"tertiary\" size=\"small\" @click=\"saveDiscard\">\n                                    {{ $i18n(\"discard_changes\") }}\n                                </v-btn>\n                            </v-col>\n                        </v-row>\n                    </v-alert>\n                    <v-alert v-show=\"showSaveResult\" color=\"secondary\" border=\"top\" border-color=\"primary\"\n                        elevation=\"1\" class=\"mt-2\">\n                        <v-row dense>\n                            <v-col>{{ $i18n(\"you_recently_saved\") }}</v-col>\n                        </v-row>\n                        <v-row dense class=\"py-1\" align=\"start\">\n                            <v-col>\n                                <v-btn size=\"small\" @click=\"openFullEntryEditor\">\n                                    {{ $i18n(\"open_full_editor\") }}\n                                </v-btn>\n                            </v-col>\n                            <v-spacer />\n                        </v-row>\n                    </v-alert>\n\n                    <div v-if=\"showNotifications\" id=\"notifications\" class=\"pt-4 mt-2\">\n                        <Notification v-for=\"n of notifications\" :key=\"n.id\" :notification=\"n\" />\n                    </div>\n                    <SearchResults v-show=\"showSearchPanel\" :matched-entries-in=\"cachedMatchedEntries\" :frame-id=\"frameId\"\n                        @pref-entry-toggle=\"prefEntryToggle\" />\n                    <Save1stParty v-if=\"showSaveStart && !showSaveWhere\" @save-where-clicked=\"saveWhere\"\n                        @cancel-clicked=\"saveDiscard\" />\n                    <SaveWhere v-if=\"showSaveWhere\" :display-reason=\"displayWhereReason\"\n                        :preferred-group-uuid=\"preferredGroupUuid\" />\n                </div>\n            </v-container>\n        </v-main>\n\n\n        <v-btn v-show=\"showSearchPanel && !showSaveRecovery\" position=\"fixed\" location=\"bottom right\" color=\"primary\"\n            style=\"bottom: 70px; right: 16px\" :class=\"hasSubmittedData ? 'pulse-button' : ''\" icon @click=\"saveStart\">\n            <mdi-plus scale=\"150\" />\n            <v-tooltip location=\"left\" :open-delay=\"tooltipDelay\" activator=\"parent\">\n                <span>{{ $i18n(\"create_new_entry\") }}</span>\n            </v-tooltip>\n        </v-btn>\n\n        <v-footer app height=\"auto\" style=\"padding:8px;\">\n            <!-- <v-container style=\"padding:8px;\"></v-container> -->\n            <v-btn id=\"password-open-kee-vault\" :aria-label=\"$i18n('Menu_Button_open_kee_vault_label')\"\n                class=\"ml-0 mr-1\" size=\"small\" icon @click=\"openKeeVault\">\n                <v-img width=\"24px\" height=\"24px\" src=\"/assets/images/48-kee-vault.png\" />\n                <v-tooltip location=\"top\" :open-delay=\"tooltipDelay\" activator=\"parent\">\n                    <span>{{ $i18n(\"Menu_Button_open_kee_vault_label\") }}</span>\n                </v-tooltip>\n            </v-btn>\n\n            <v-btn v-show=\"showOpenKeePassButton\" id=\"password-open-keepass\"\n                :aria-label=\"$i18n('Menu_Button_open_keepass_label')\" class=\"mr-1 ml-n1\" size=\"small\" icon\n                @click=\"openKeePass\">\n                <v-img width=\"24px\" height=\"24px\" src=\"/assets/images/48-keepass.png\" />\n                <v-tooltip location=\"top\" :open-delay=\"tooltipDelay\" activator=\"parent\">\n                    <span>{{ $i18n(\"Menu_Button_open_keepass_label\") }}</span></v-tooltip>\n            </v-btn>\n            <v-divider vertical />\n            <mdi-lock :color=\"statusIconColour\" class=\"mx-1\" />\n\n            <div class=\"text-caption py-1 shrink\"\n                style=\"word-break: break-word; overflow-wrap: break-word; max-width: 210px; font-size: 0.8rem\">\n                {{ connectionStatus }}\n                <v-tooltip location=\"top\" :open-delay=\"tooltipDelay\" activator=\"parent\">\n                    <span>{{ connectionStatusDetail }}</span>\n                </v-tooltip>\n            </div>\n            <!--\n            <v-spacer /> -->\n\n            <v-btn icon size=\"small\" class=\"ms-auto\">\n                <mdi-menu scale=\"150\" />\n                <v-menu location=\"top\" activator=\"parent\">\n                    <v-list>\n                        <v-list-item @click=\"showHelp\">\n                            <v-list-item-title class=\"text-right text-body-2\">\n                                {{ $i18n(\"Help_Centre_Button_label\") }}\n                            </v-list-item-title>\n                            <template #append>\n                                <mdi-help class=\"ml-2\" />\n                            </template>\n                        </v-list-item>\n                        <v-list-item @click=\"showOptions\">\n                            <v-list-item-title class=\"text-right text-body-2\">\n                                {{ $i18n(\"Menu_Button_options_label\") }}\n                            </v-list-item-title>\n                            <template #append>\n                                <mdi-cog class=\"ml-2\" />\n                            </template>\n                        </v-list-item>\n                        <v-list-item v-show=\"showSearchPanel\" @click=\"showPasswordGenerator = true\">\n                            <v-list-item-title class=\"text-right text-body-2\">\n                                {{ $i18n(\"Menu_Button_copyNewPasswordToClipboard_label\") }}\n                            </v-list-item-title>\n                            <template #append>\n                                <mdi-flash class=\"ml-2\" />\n                            </template>\n                        </v-list-item>\n                    </v-list>\n                </v-menu>\n            </v-btn>\n        </v-footer>\n        <PasswordGenerator v-if=\"showPasswordGenerator\" :standalone=\"true\" @dialog-closed=\"passwordGeneratorClosed\"\n            @copy-to-clipboard=\"copyToClipboard\" />\n    </v-app>\n</template>\n\n<script lang=\"ts\">\nimport Notification from \"./components/Notification.vue\";\nimport SearchInput from \"./components/SearchInput.vue\";\nimport SearchResults from \"./components/SearchResults.vue\";\nimport Save1stParty from \"./components/Save1stParty.vue\";\nimport SaveWhere from \"./components/SaveWhere.vue\";\nimport PasswordGenerator from \"../common/components/PasswordGenerator.vue\";\nimport { Port } from \"../common/port\";\nimport { Action } from \"../common/Action\";\nimport { KeeLog } from \"../common/Logger\";\nimport { SaveState } from \"../common/SaveState\";\nimport { Entry } from \"../common/model/Entry\";\nimport { supplementEntryState } from \"./supplementEntryState\";\nimport { fetchFavicon, getFaviconUrl } from \"./favicon\";\nimport { autoRecoveryTimeMs, manualRecoveryPromptTimeMs, tooltipDelay } from \"../common/Timings\";\nimport { SaveEntryResult } from \"../common/SaveEntryResult\";\nimport { Field } from \"../common/model/Field\";\nimport { Locator } from \"../common/model/Locator\";\nimport { copyStringToClipboard } from \"../common/copyStringToClipboard\";\nimport { configManager } from \"../common/ConfigManager\";\nimport { AddonMessage } from \"../common/AddonMessage\";\nimport useStore from \"../store\";\nimport { mapState } from \"pinia\";\nimport punycode from \"punycode/\";\n\nexport default {\n    components: {\n        Notification: Notification,\n        SearchResults: SearchResults,\n        SearchInput: SearchInput,\n        Save1stParty: Save1stParty,\n        SaveWhere: SaveWhere,\n        PasswordGenerator: PasswordGenerator\n    },\n    props: [\"matchedEntries\", \"frameId\"],\n    setup() {\n        const { updateSaveState, updateSaveEntryResult } = useStore();\n        return { updateSaveState, updateSaveEntryResult };\n    },\n    data: function () {\n        return {\n            // We can't use the Vuex property directly because when it changes it causes\n            // the app to re-render from scratch, destroying the user input that triggered\n            // the datestamp change. Instead we can watch for changes and only modify this\n            // value in a set of circumstances that meet our requirements.\n            // Also note that Chromium and Firefox extensions behave differently - Chrome\n            // persists strings to represent the Date whereas Firefox persists a valid\n            // Date object. Hence every place where this is used, you must wrap the\n            // variable in a new Date(...) call before comparing against other Dates\n            saveLastActiveAt: null,\n            showSaveWhere: false,\n            displayWhereReason: null,\n            preferredGroupUuid: \"\",\n\n            cachedMatchedEntries: this.matchedEntries,\n\n            // imported constants are only available in Vue if we assign them to data\n            tooltipDelay: tooltipDelay,\n            manualRecoveryPromptTimeMs: manualRecoveryPromptTimeMs,\n            autoRecoveryTimeMs: autoRecoveryTimeMs,\n            showPasswordGenerator: false,\n            lastSaveEntryResult: null\n        };\n    },\n    computed: {\n        ...mapState(useStore, [\n            \"showGeneratePasswordLink\",\n            \"saveState\",\n            \"showMatchedLogins\",\n            \"showOpenKeePassButton\",\n            \"connectionStatus\",\n            \"connectionStatusDetail\",\n            \"connected\",\n            \"databaseIsOpen\",\n            \"notifications\",\n            \"showNotifications\",\n            \"connectedWebsocket\",\n            \"saveEntryResult\"\n        ]),\n        statusIconColour: function () {\n            if (this.connected && this.databaseIsOpen) {\n                return \"green\";\n            } else if (this.connected) {\n                return \"orange\";\n            }\n            return \"red\";\n        },\n        showSaveStart: function () {\n            return new Date(this.saveLastActiveAt) > new Date(Date.now() - this.autoRecoveryTimeMs);\n        },\n        showSaveRecovery: function () {\n            KeeLog.debug(`showSaveRecovery ${this.showSaveStart} : ${new Date(this.saveLastActiveAt)} ${new Date(Date.now() - this.manualRecoveryPromptTimeMs\n            )} : ${new Date(this.saveLastActiveAt) > new Date(Date.now() - this.manualRecoveryPromptTimeMs)}`);\n            return (\n                !this.showSaveStart &&\n                new Date(this.saveLastActiveAt) >\n                new Date(Date.now() - this.manualRecoveryPromptTimeMs)\n            );\n        },\n        showSearchPanel: function () {\n            return this.databaseIsOpen && !this.showSaveStart;\n        },\n        hasSubmittedData: function () {\n            return (this.saveState as SaveState)?.submittedData?.fields?.length > 0;\n        },\n        showSaveResult: function () {\n            return this.lastSaveEntryResult && !this.showSaveStart;\n        }\n    },\n    watch: {\n        saveState: {\n            handler: function (newState: SaveState, oldState: SaveState) {\n                //TODO:f: For some reason the old and new state are always identical.\n                // So we now always update the last active date but this may have\n                // some side-effect we're yet to find. Perhaps the watch only\n                // gets called as a response to a reflected message from the\n                // background so it has already been changed locally.\n                if (newState?.newEntry?.uuid !== oldState?.newEntry?.uuid) {\n                    KeeLog.debug(\"savestate watch modified\");\n                } else {\n                    KeeLog.debug(\"savestate watch not modified\");\n                }\n                this.saveLastActiveAt = newState.lastActiveAt;\n            },\n            deep: true\n        }\n    },\n    mounted: async function () {\n        this.saveLastActiveAt = this.saveState?.lastActiveAt;\n\n        const discardRequired = this.handleLastSaveResult();\n\n        // Clear the newEntry if it is beyond our maximum recovery time\n        // This frees up memory but more importantly allows the watch for saveState to\n        // set the appropriate last active datetime when the user attempts to re-edit\n        // the same entry as most recently.\n        if (\n            discardRequired ||\n            this.saveState?.lastActiveAt <=\n            new Date(Date.now() - this.manualRecoveryPromptTimeMs)\n        ) {\n            KeeLog.debug(\"discarding upon mount\");\n            this.saveDiscard();\n        }\n\n        const favIconUrl = await getFaviconUrl();\n        if (!favIconUrl) return;\n        const favicon = await fetchFavicon(favIconUrl);\n        if (!favicon) return;\n\n        const updatedSaveState = Object.assign({}, JSON.parse(JSON.stringify(this.saveState)));\n        updatedSaveState.favicon = favicon;\n        this.updateSaveState(updatedSaveState);\n    },\n    methods: {\n        showOptions: () => {\n            chrome.runtime.openOptionsPage();\n            window.close();\n        },\n        saveStart: async function () {\n            const currentTab = (await chrome.tabs.query({ active: true, currentWindow: true }))[0];\n            if (!currentTab) return;\n            const entryTemplate = {\n                URLs: [currentTab.url],\n                title: currentTab.title,\n                fields: [\n                    new Field({\n                        name: \"KeePass username\",\n                        type: \"text\",\n                        locators: [\n                            new Locator({\n                                type: \"text\"\n                            })\n                        ]\n                    }),\n                    new Field({\n                        name: \"KeePass password\",\n                        type: \"password\",\n                        locators: [\n                            new Locator({\n                                type: \"password\"\n                            })\n                        ]\n                    })\n                ]\n            };\n            const ss = JSON.parse(JSON.stringify(this.saveState as SaveState));\n            const updatedSaveState = Object.assign({}, ss);\n            updatedSaveState.newEntry = supplementEntryState(new Entry(entryTemplate), ss);\n            updatedSaveState.titleResetValue = updatedSaveState.newEntry.title;\n            updatedSaveState.lastActiveAt = new Date();\n            updatedSaveState.showURLMismatchWarning = false;\n            KeeLog.debug(\"updating saveState\");\n            this.updateSaveState(updatedSaveState);\n            //this.saveLastActiveAt = updatedSaveState.lastActiveAt;\n        },\n        saveRecover: function () {\n            const ss = JSON.parse(JSON.stringify(this.saveState as SaveState));\n            const updatedSaveState = Object.assign({}, ss);\n            updatedSaveState.lastActiveAt = new Date();\n            this.updateSaveState(updatedSaveState);\n\n            // Normally we ignore active datetime changes but user has explicitly requested this\n            this.saveLastActiveAt = updatedSaveState.lastActiveAt;\n        },\n        saveDiscard: function () {\n            const ss = JSON.parse(JSON.stringify(this.saveState as SaveState));\n            const updatedSaveState = Object.assign({}, ss);\n            updatedSaveState.newEntry = new Entry({});\n            updatedSaveState.titleResetValue = null;\n            updatedSaveState.lastActiveAt = null;\n            updatedSaveState.showURLMismatchWarning = false;\n            updatedSaveState.favicon = null;\n            this.updateSaveState(updatedSaveState);\n            //this.saveLastActiveAt = updatedSaveState.lastActiveAt;\n        },\n        saveWhere: function (displayWhereReason: string, preferredGroupUuid: string) {\n            this.displayWhereReason = displayWhereReason;\n            this.preferredGroupUuid = preferredGroupUuid;\n            this.showSaveWhere = true;\n        },\n        showHelp: () => {\n            chrome.tabs.create({ url: \"https://www.kee.pm/help\" });\n            window.close();\n        },\n        openKeeVault: async function () {\n            KeeLog.debug(\"open Kee Vault requested\");\n            const vaultTabs = await chrome.tabs.query({\n                url: [\n                    \"https://keevault.pm/*\",\n                    \"https://app-beta.kee.pm/*\",\n                    \"https://app-dev.kee.pm/*\"\n                ]\n            });\n            if (vaultTabs && vaultTabs[0]) {\n                chrome.tabs.update(vaultTabs[0].id, { active: true });\n                chrome.windows.update(vaultTabs[0].windowId, { focused: true });\n            } else {\n                chrome.tabs.create({\n                    url: \"https://keevault.pm/\",\n                    active: true\n                });\n            }\n            window.close();\n        },\n        openKeePass: function () {\n            KeeLog.debug(\"open KeePass requested\");\n            if (this.connectedWebsocket) {\n                Port.postMessage({ action: Action.OpenKeePass });\n            } else {\n                KeeLog.info(\"KeePass no longer connected so taking no action\");\n            }\n            window.close();\n        },\n        handleLastSaveResult: function () {\n            const lastResult = this.saveEntryResult as SaveEntryResult;\n\n            if (!lastResult?.result) return false;\n\n            if (lastResult.result === \"created\" || lastResult.result === \"updated\") {\n                if (!configManager.current.hideConfirmationAfterSave) {\n                    this.lastSaveEntryResult = lastResult;\n                }\n                this.updateSaveEntryResult({\n                    result: null,\n                    receivedAt: new Date()\n                } as SaveEntryResult);\n                return true;\n            } else {\n                this.updateSaveEntryResult({\n                    result: null,\n                    receivedAt: new Date()\n                } as SaveEntryResult);\n                return false;\n            }\n        },\n        passwordGeneratorClosed: function () {\n            this.showPasswordGenerator = false;\n        },\n        copyToClipboard: async function (payload) {\n            if (payload?.value) await copyStringToClipboard(payload.value);\n        },\n        prefEntryToggle: async function (payload: any) {\n            if (payload?.uuid) {\n                const currentTab = (\n                    await chrome.tabs.query({\n                        active: true,\n                        currentWindow: true\n                    })\n                )[0];\n                if (!currentTab) return;\n                const url = new URL(currentTab.url);\n                url.hostname = punycode.toUnicode(url.hostname);\n                configManager.togglePreferredEntryUuid(payload.uuid, url.href);\n                const conf = configManager.siteConfigFor(url.href);\n                this.cachedMatchedEntries = this.cachedMatchedEntries.map(me => {\n                    me.isPreferredMatch = conf.preferredEntryUuid === me.uuid ? true : false;\n                    return me;\n                });\n                Port.postMessage({ action: Action.DetectForms } as AddonMessage);\n                // hacky, but changing the cachedMatchedEntries value does not appear to trigger\n                // any reactive behaviour a couple of components down at the actual checkbox\n                // so closing the window avoids user seeing out of date information.\n                window.close();\n            }\n        },\n        openFullEntryEditor: function () {\n            Port.postMessage({\n                loginEditor: {\n                    uuid: this.lastSaveEntryResult.uuid,\n                    DBfilename: this.lastSaveEntryResult.fileName\n                }\n            } as AddonMessage);\n            this.lastSaveEntryResult = null;\n            window.close();\n        }\n    }\n};\n</script>\n\n<style>\n.text-truncate{white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}\n\n.app_height {\n    max-height: calc(570px - var(--v-layout-bottom) - var(--v-layout-top));\n    min-height: calc(570px - var(--v-layout-bottom) - var(--v-layout-top));\n    height: calc(570px - var(--v-layout-bottom) - var(--v-layout-top));\n}\n\n.pulse-button {\n    animation: pulse 0.5s 2 cubic-bezier(0.45, 0.05, 0.55, 0.95) 0.25s reverse;\n}\n\n@keyframes pulse {\n    0% {\n        opacity: 1;\n        transform: scale(1);\n    }\n\n    25% {\n        opacity: 1;\n        transform: scale(1.25);\n    }\n\n    50% {\n        opacity: 1;\n        transform: scale(1);\n    }\n\n    75% {\n        opacity: 1;\n        transform: scale(0.8);\n    }\n\n    100% {\n        opacity: 1;\n        transform: scale(1);\n    }\n}\n</style>\n","import { App as VueApp, createApp, h } from \"vue\";\nimport { createVuetify } from \"vuetify\";\nimport App from \"./App.vue\";\nimport useStore, { KeeStore } from \"../store\";\nimport { KeeLog } from \"../common/Logger\";\nimport { configManager } from \"../common/ConfigManager\";\nimport { AddonMessage } from \"../common/AddonMessage\";\nimport { Port } from \"../common/port\";\nimport { createPinia } from \"pinia\";\nimport { Action } from \"../common/Action\";\nimport \"../styles\";\nimport * as components from \"vuetify/components\";\nimport * as directives from \"vuetify/directives\";\nimport { IPCPiniaPlugin } from \"../common/IPCPiniaPlugin\";\n\nconst piniaInstance = createPinia();\nlet vueApp: VueApp<Element>;\nlet store: KeeStore;\n\nasync function start() {\n    await configManager.load();\n    KeeLog.debug(\"popup starting\");\n    KeeLog.attachConfig(configManager.current);\n    Port.startup(\"browserPopup\");\n\n    Port.raw.onMessage.addListener(function (m: AddonMessage) {\n        KeeLog.debug(\"In browser popup script, received message from background script.\");\n\n        if (m.initialState) {\n\n        try {\n            vueApp = createApp({\n                mounted: function () {\n                    // This can wait until after the popup app has rendered, at least until there is\n                    // some way to launch in password generation mode\n                    Port.postMessage({\n                        action: Action.GetPasswordProfiles\n                    });\n                },\n                render: () => h(App, {\n                        matchedEntries: !m.entries ? null : m.entries,\n                        frameId: m.frameId\n                })\n            });\n\n            const vuetify = createVuetify({\n                components,\n                directives,\n                theme: {\n                    defaultTheme: configManager.activeTheme,\n                    themes: {\n                        dark: {\n                            dark: true,\n                            colors: {\n                                primary: \"#1a466b\",\n                                secondary: \"#ABB2BF\",\n                                tertiary: \"#e66a2b\",\n                                error: \"#C34034\",\n                                info: \"#2196F3\",\n                                success: \"#4CAF50\",\n                                warning: \"#FFC107\"\n                            }\n                        },\n                        light: {\n                            dark: false,\n                            colors: {\n                                primary: \"#1a466b\",\n                                secondary: \"#13334e\",\n                                tertiary: \"#e66a2b\",\n                                error: \"#C34034\",\n                                info: \"#2196F3\",\n                                success: \"#4CAF50\",\n                                warning: \"#FFC107\"\n                            }\n                        }\n                    }\n                }\n            });\n            piniaInstance.use(IPCPiniaPlugin);\n            vueApp.use(vuetify);\n            vueApp.use(piniaInstance);\n            vueApp.config.globalProperties.$chrome = chrome;\n            vueApp.config.globalProperties.$i18n = chrome.i18n.getMessage;\n            store = useStore();\n\n            store.$patch(m.initialState);\n\n            vueApp.mount(\"#main\");\n            //TODO:f: Sometimes popup size is wrong initially. Possibly only when in dev\n            // mode and it's much slower to load everything? In any case, might be\n            // affected by timing of when we mount the main app to the popup DOM\n            // Each time I've seen it, it's an extra 16px right and bottom.\n            // (footer padding = 8px each side; extra width and height = 16px.\n            // I changed default from 16px 8px so height is unchanged.)\n\n            // This maybe could be moved to onMounted once all vuex state is changed before this popup is opened.\n            window.setTimeout(() => {\n                window.focus();\n                const sb = $(\"#searchBox\");\n                if (sb) sb.focus();\n                window.scrollTo(0, 0);\n            }, 50);\n        } catch (e) {\n            KeeLog.error(\"Failed to create user interface.\", e);\n        }\n        }\n        if (m.mutation) {\n            store.onRemoteMessage(Port.raw, m.mutation);\n            return;\n        }\n\n        if (store?.connected && m.findMatchesResult) {\n            store.updateSearchResultWithFullDetails(\n                JSON.parse(JSON.stringify(m.findMatchesResult[0]))\n            );\n        }\n    });\n\n    KeeLog.info(\"popup ready\");\n}\n\n(async () => {\n    await start();\n})();\n"],"names":["_resolveComponent","_openBlock","_createBlock","_withCtx","_createElementVNode","_hoisted_1","_createVNode","_createTextVNode","_toDisplayString","_createElementBlock","_Fragment","_renderList","_withKeys","_withModifiers","Field","_normalizeStyle","_createCommentVNode","_a","_mergeProps","expanded","_hoisted_2","$i18n","_withDirectives","_vShow","focussed","showPasswordGenerator","Entry","titleFocussed","differentSiteConfirmation","loading","skipInFuture","showNotifications","cachedMatchedEntries","showSaveWhere","displayWhereReason","_normalizeClass"],"mappings":"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"}