"use strict";(globalThis.webpackChunkvisual_bookmarks_dev=globalThis.webpackChunkvisual_bookmarks_dev||[]).push([[211],{60:(t,e,i)=>{i.r(e);var n=i(374),a=i(339);class s extends HTMLElement{node=null;scrollableContainer=null;buttons=[];currentPage=0;constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.scrollableContainer=document.querySelector(this.scrollableSelector)??document.body,this.node=(0,a.xX)("div",{class:"vb-virtual-pagination"}),this.shadowRoot.innerHTML=`<style>${n.Z}</style>`,this.shadowRoot.append(this.node),this.renderDots(),this.attachEvents()}disconnectedCallback(){this.detachEvents()}get windowHeight(){return window.innerHeight}get pages(){const t=this.scrollableContainer.scrollHeight;return Math.ceil(t/this.windowHeight)}get scrollableSelector(){return this.getAttribute("scrollable-selector")}get isHidden(){if(this.hidden)return!0;const t=window.getComputedStyle(this);return"none"===t.display||"hidden"===t.visibility}attachEvents(){this.handleScroll=this.handleScroll.bind(this),this.scrollableContainer.addEventListener("scroll",this.handleScroll),this.handleClick=this.handleClick.bind(this),this.shadowRoot.addEventListener("click",this.handleClick),this.handleChangeHash=this.renderDots.bind(this),window.addEventListener("changeFolder",this.handleChangeHash),this.handleResize=(0,a.sW)(this.renderDots.bind(this),300),window.addEventListener("resize",this.handleResize)}dettachEvents(){this.scrollableContainer.addEventListener("scroll",this.handleScroll),this.shadowRoot.addEventListener("click",this.handleClick),window.addEventListener("changeFolder",this.handleChangeHash),window.addEventListener("resize",this.handleResize)}renderDots(){const t=this.pages;if(t<=1)this.buttons=[];else{if(!(t<=20))return void(this.hidden=!0);this.buttons=Array.from(Array(t).keys()).map(((t,e)=>`<button${this.currentPage===e?' class="is-active"':""} data-page="${t}">${e+1}</button>`))}this.node.innerHTML=this.buttons.join(""),this.hidden=t<=1}handleClick(t){const e=t.target.closest("[data-page]");if(!e)return!0;t.preventDefault();const i=this.currentPage,n=parseInt(e.dataset.page);i!==n&&(this.changeActiveSlide(n),this.scrollableContainer.scrollTo({left:0,top:n*this.windowHeight,behavior:"smooth"}))}handleScroll(){if(this.isHidden)return;const t=this.scrollableContainer===window?"scrollY":"scrollTop",e=Math.floor(this.scrollableContainer[t]+this.windowHeight),i=Math.floor(e/Math.floor(this.scrollableContainer.scrollHeight/this.pages))-1;this.changeActiveSlide(i)}changeActiveSlide(t){const e=this.currentPage;if(this.currentPage=t,e===this.currentPage)return;const i=Array.from(this.shadowRoot.querySelectorAll("button"));i[e]?.classList?.remove("is-active"),i[this.currentPage]?.classList?.add("is-active")}}window.customElements.define("vb-virtual-pagination",s)},374:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(81),a=i.n(n),s=i(645),r=i.n(s)()(a());r.push([t.id,".vb-virtual-pagination{display:inline-flex;flex-direction:column;gap:12px;padding:12px;background-color:var(--theme-background-3-alpha-95);border-radius:calc(var(--base-radius)*3)}.vb-virtual-pagination button{display:inline-flex;align-items:center;justify-content:center;width:var(--virtual-pagination-size, 10px);height:var(--virtual-pagination-size, 10px);padding:0;font-size:var(--virtual-pagination-fontsize, 0);border-radius:50%;border:solid var(--theme-text-color);border-width:var(--virtual-pagination-border-width, 2px);background-color:transparent;color:var(--theme-text-color);cursor:pointer;transition:transform .25s ease,background-color .25s ease;will-change:transform}.vb-virtual-pagination button:focus-visible{outline:2px solid var(--color-primary);outline-offset:2px}.vb-virtual-pagination button:hover{transform:var(--virtual-pagination-transform-none, scale(1.6))}.vb-virtual-pagination button.is-active{transform:var(--virtual-pagination-transform-none, scale(1.3));background-color:var(--theme-text-color);color:var(--theme-background)}",""]);const o=r}}]);