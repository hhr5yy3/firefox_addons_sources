/*! For license information please see vendors-node_modules_mui_material_ListItemIcon_listItemIconClasses_js-node_modules_react-erro-38cb1e.js.LICENSE.txt */
"use strict";(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["vendors-node_modules_mui_material_ListItemIcon_listItemIconClasses_js-node_modules_react-erro-38cb1e"],{"../../../node_modules/@mui/material/ListItemIcon/listItemIconClasses.js":(t,e,i)=>{i.d(e,{Z:()=>s});const s=(0,i("../../../node_modules/@mui/utils/generateUtilityClasses/generateUtilityClasses.js").Z)("MuiListItemIcon",["root","alignItemsFlexStart"])},"../../../node_modules/react-error-boundary/dist/react-error-boundary.esm.js":(t,e,i)=>{i.d(e,{SV:()=>o});var s=i("../../../node_modules/react/index.js");const n=(0,s.createContext)(null),r={didCatch:!1,error:null};class o extends s.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=r}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(null!==t){for(var e,i,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];null===(e=(i=this.props).onReset)||void 0===e||e.call(i,{args:n,reason:"imperative-api"}),this.setState(r)}}componentDidCatch(t,e){var i,s;null===(i=(s=this.props).onError)||void 0===i||i.call(s,t,e)}componentDidUpdate(t,e){const{didCatch:i}=this.state,{resetKeys:s}=this.props;var n,o;i&&null!==e.error&&function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length!==e.length||t.some(((t,i)=>!Object.is(t,e[i])))}(t.resetKeys,s)&&(null===(n=(o=this.props).onReset)||void 0===n||n.call(o,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(r))}render(){const{children:t,fallbackRender:e,FallbackComponent:i,fallback:r}=this.props,{didCatch:o,error:h}=this.state;let l=t;if(o){const t={error:h,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof e)l=e(t);else if(i)l=(0,s.createElement)(i,t);else{if(null!==r&&!(0,s.isValidElement)(r))throw h;l=r}}return(0,s.createElement)(n.Provider,{value:{didCatch:o,error:h,resetErrorBoundary:this.resetErrorBoundary}},l)}}},"../../../node_modules/react-router-dom/dist/index.js":(t,e,i)=>{var s,n;i.d(e,{OL:()=>w,UT:()=>p});var r=i("../../../node_modules/react/index.js"),o=i("../../../node_modules/react-dom/index.js"),h=i("../../../node_modules/react-router/dist/index.js"),l=i("../../../node_modules/@remix-run/router/dist/router.js");function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a.apply(this,arguments)}function u(t,e){if(null==t)return{};var i,s,n={},r=Object.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const c=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],d=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];try{window.__reactRouterVersion="6"}catch(t){}const f=r.createContext({isTransitioning:!1});new Map;const m=(s||(s=i.t(r,2))).startTransition;function p(t){let{basename:e,children:i,future:s,window:n}=t,o=r.useRef();null==o.current&&(o.current=(0,l.q_)({window:n,v5Compat:!0}));let a=o.current,[u,c]=r.useState({action:a.action,location:a.location}),{v7_startTransition:d}=s||{},f=r.useCallback((t=>{d&&m?m((()=>c(t))):c(t)}),[c,d]);return r.useLayoutEffect((()=>a.listen(f)),[a,f]),r.createElement(h.F0,{basename:e,children:i,location:u.location,navigationType:u.action,navigator:a,future:s})}(n||(n=i.t(o,2))).flushSync,(s||(s=i.t(r,2))).useId;const v="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,g=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b=r.forwardRef((function(t,e){let i,{onClick:s,relative:n,reloadDocument:o,replace:d,state:f,target:m,to:p,preventScrollReset:b,unstable_viewTransition:w}=t,S=u(t,c),{basename:y}=r.useContext(h.Us),x=!1;if("string"==typeof p&&g.test(p)&&(i=p,v))try{let t=new URL(window.location.href),e=p.startsWith("//")?new URL(t.protocol+p):new URL(p),i=(0,l.Zn)(e.pathname,y);e.origin===t.origin&&null!=i?p=i+e.search+e.hash:x=!0}catch(t){}let C=(0,h.oQ)(p,{relative:n}),M=function(t,e){let{target:i,replace:s,state:n,preventScrollReset:o,relative:a,unstable_viewTransition:u}=void 0===e?{}:e,c=(0,h.s0)(),d=(0,h.TH)(),f=(0,h.WU)(t,{relative:a});return r.useCallback((e=>{if(function(t,e){return!(0!==t.button||e&&"_self"!==e||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t))}(e,i)){e.preventDefault();let i=void 0!==s?s:(0,l.Ep)(d)===(0,l.Ep)(f);c(t,{replace:i,state:n,preventScrollReset:o,relative:a,unstable_viewTransition:u})}}),[d,c,f,s,n,i,t,o,a,u])}(p,{replace:d,state:f,target:m,preventScrollReset:b,relative:n,unstable_viewTransition:w});return r.createElement("a",a({},S,{href:i||C,onClick:x||o?s:function(t){s&&s(t),t.defaultPrevented||M(t)},ref:e,target:m}))})),w=r.forwardRef((function(t,e){let{"aria-current":i="page",caseSensitive:s=!1,className:n="",end:o=!1,style:c,to:m,unstable_viewTransition:p,children:v}=t,g=u(t,d),w=(0,h.WU)(m,{relative:g.relative}),y=(0,h.TH)(),x=r.useContext(h.FR),{navigator:C,basename:M}=r.useContext(h.Us),_=null!=x&&function(t,e){void 0===e&&(e={});let i=r.useContext(f);null==i&&(0,l.J0)(!1);let{basename:s}=function(t){let e=r.useContext(h.w3);return e||(0,l.J0)(!1),e}(S.useViewTransitionState),n=(0,h.WU)(t,{relative:e.relative});if(!i.isTransitioning)return!1;let o=(0,l.Zn)(i.currentLocation.pathname,s)||i.currentLocation.pathname,a=(0,l.Zn)(i.nextLocation.pathname,s)||i.nextLocation.pathname;return null!=(0,l.LX)(n.pathname,a)||null!=(0,l.LX)(n.pathname,o)}(w)&&!0===p,T=C.encodeLocation?C.encodeLocation(w).pathname:w.pathname,z=y.pathname,I=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(z=z.toLowerCase(),I=I?I.toLowerCase():null,T=T.toLowerCase()),I&&M&&(I=(0,l.Zn)(I,M)||I);const E="/"!==T&&T.endsWith("/")?T.length-1:T.length;let k,R=z===T||!o&&z.startsWith(T)&&"/"===z.charAt(E),B=null!=I&&(I===T||!o&&I.startsWith(T)&&"/"===I.charAt(T.length)),P={isActive:R,isPending:B,isTransitioning:_},O=R?i:void 0;k="function"==typeof n?n(P):[n,R?"active":null,B?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let H="function"==typeof c?c(P):c;return r.createElement(b,a({},g,{"aria-current":O,className:k,ref:e,style:H,to:m,unstable_viewTransition:p}),"function"==typeof v?v(P):v)}));var S,y;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(S||(S={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(y||(y={}))},"../../../node_modules/react-router/dist/index.js":(t,e,i)=>{var s;i.d(e,{AW:()=>O,F0:()=>H,FR:()=>a,Fg:()=>B,TH:()=>v,UO:()=>y,Us:()=>u,V$:()=>C,WU:()=>x,Z5:()=>W,bS:()=>g,j3:()=>P,oQ:()=>m,s0:()=>w,w3:()=>l});var n=i("../../../node_modules/react/index.js"),r=i("../../../node_modules/@remix-run/router/dist/router.js"),o=i("../../../node_modules/console-browserify/index.js");function h(){return h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},h.apply(this,arguments)}const l=n.createContext(null),a=n.createContext(null),u=n.createContext(null),c=n.createContext(null),d=n.createContext({outlet:null,matches:[],isDataRoute:!1}),f=n.createContext(null);function m(t,e){let{relative:i}=void 0===e?{}:e;p()||(0,r.J0)(!1);let{basename:s,navigator:o}=n.useContext(u),{hash:h,pathname:l,search:a}=x(t,{relative:i}),c=l;return"/"!==s&&(c="/"===l?s:(0,r.RQ)([s,l])),o.createHref({pathname:c,search:a,hash:h})}function p(){return null!=n.useContext(c)}function v(){return p()||(0,r.J0)(!1),n.useContext(c).location}function g(t){p()||(0,r.J0)(!1);let{pathname:e}=v();return n.useMemo((()=>(0,r.LX)(t,e)),[e,t])}function b(t){n.useContext(u).static||n.useLayoutEffect(t)}function w(){let{isDataRoute:t}=n.useContext(d);return t?function(){let{router:t}=function(t){let e=n.useContext(l);return e||(0,r.J0)(!1),e}(I.UseNavigateStable),e=k(E.UseNavigateStable),i=n.useRef(!1);return b((()=>{i.current=!0})),n.useCallback((function(s,n){void 0===n&&(n={}),i.current&&("number"==typeof s?t.navigate(s):t.navigate(s,h({fromRouteId:e},n)))}),[t,e])}():function(){p()||(0,r.J0)(!1);let t=n.useContext(l),{basename:e,future:i,navigator:s}=n.useContext(u),{matches:o}=n.useContext(d),{pathname:h}=v(),a=JSON.stringify((0,r.cm)(o,i.v7_relativeSplatPath)),c=n.useRef(!1);return b((()=>{c.current=!0})),n.useCallback((function(i,n){if(void 0===n&&(n={}),!c.current)return;if("number"==typeof i)return void s.go(i);let o=(0,r.pC)(i,JSON.parse(a),h,"path"===n.relative);null==t&&"/"!==e&&(o.pathname="/"===o.pathname?e:(0,r.RQ)([e,o.pathname])),(n.replace?s.replace:s.push)(o,n.state,n)}),[e,s,a,h,t])}()}const S=n.createContext(null);function y(){let{matches:t}=n.useContext(d),e=t[t.length-1];return e?e.params:{}}function x(t,e){let{relative:i}=void 0===e?{}:e,{future:s}=n.useContext(u),{matches:o}=n.useContext(d),{pathname:h}=v(),l=JSON.stringify((0,r.cm)(o,s.v7_relativeSplatPath));return n.useMemo((()=>(0,r.pC)(t,JSON.parse(l),h,"path"===i)),[t,l,h,i])}function C(t,e){return function(t,e,i,s){p()||(0,r.J0)(!1);let{navigator:o}=n.useContext(u),{matches:l}=n.useContext(d),a=l[l.length-1],f=a?a.params:{},m=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let g,b=v();if(e){var w;let t="string"==typeof e?(0,r.cP)(e):e;"/"===m||(null==(w=t.pathname)?void 0:w.startsWith(m))||(0,r.J0)(!1),g=t}else g=b;let S=g.pathname||"/",y=S;if("/"!==m){let t=m.replace(/^\//,"").split("/");y="/"+S.replace(/^\//,"").split("/").slice(t.length).join("/")}let x=(0,r.fp)(t,{pathname:y}),C=function(t,e,i,s){var o;if(void 0===e&&(e=[]),void 0===i&&(i=null),void 0===s&&(s=null),null==t){var h;if(null==(h=i)||!h.errors)return null;t=i.matches}let l=t,a=null==(o=i)?void 0:o.errors;if(null!=a){let t=l.findIndex((t=>t.route.id&&void 0!==(null==a?void 0:a[t.route.id])));t>=0||(0,r.J0)(!1),l=l.slice(0,Math.min(l.length,t+1))}let u=!1,c=-1;if(i&&s&&s.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=t),e.route.id){let{loaderData:t,errors:s}=i,n=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||n){u=!0,l=c>=0?l.slice(0,c+1):[l[0]];break}}}return l.reduceRight(((t,s,r)=>{let o,h=!1,d=null,f=null;var m;i&&(o=a&&s.route.id?a[s.route.id]:void 0,d=s.route.errorElement||_,u&&(c<0&&0===r?(R[m="route-fallback"]||(R[m]=!0),h=!0,f=null):c===r&&(h=!0,f=s.route.hydrateFallbackElement||null)));let p=e.concat(l.slice(0,r+1)),v=()=>{let e;return e=o?d:h?f:s.route.Component?n.createElement(s.route.Component,null):s.route.element?s.route.element:t,n.createElement(z,{match:s,routeContext:{outlet:t,matches:p,isDataRoute:null!=i},children:e})};return i&&(s.route.ErrorBoundary||s.route.errorElement||0===r)?n.createElement(T,{location:i.location,revalidation:i.revalidation,component:d,error:o,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()}),null)}(x&&x.map((t=>Object.assign({},t,{params:Object.assign({},f,t.params),pathname:(0,r.RQ)([m,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?m:(0,r.RQ)([m,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),l,i,s);return e&&C?n.createElement(c.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:r.aU.Pop}},C):C}(t,e)}function M(){let t=function(){var t;let e=n.useContext(f),i=function(t){let e=n.useContext(a);return e||(0,r.J0)(!1),e}(E.UseRouteError),s=k(E.UseRouteError);return void 0!==e?e:null==(t=i.errors)?void 0:t[s]}(),e=(0,r.WK)(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},e),i?n.createElement("pre",{style:s},i):null,null)}const _=n.createElement(M,null);class T extends n.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){o.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?n.createElement(d.Provider,{value:this.props.routeContext},n.createElement(f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function z(t){let{routeContext:e,match:i,children:s}=t,r=n.useContext(l);return r&&r.static&&r.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=i.route.id),n.createElement(d.Provider,{value:e},s)}var I=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(I||{}),E=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(E||{});function k(t){let e=function(t){let e=n.useContext(d);return e||(0,r.J0)(!1),e}(),i=e.matches[e.matches.length-1];return i.route.id||(0,r.J0)(!1),i.route.id}const R={};function B(t){let{to:e,replace:i,state:s,relative:o}=t;p()||(0,r.J0)(!1);let{future:h,static:l}=n.useContext(u),{matches:a}=n.useContext(d),{pathname:c}=v(),f=w(),m=(0,r.pC)(e,(0,r.cm)(a,h.v7_relativeSplatPath),c,"path"===o),g=JSON.stringify(m);return n.useEffect((()=>f(JSON.parse(g),{replace:i,state:s,relative:o})),[f,g,o,i,s]),null}function P(t){return function(t){let e=n.useContext(d).outlet;return e?n.createElement(S.Provider,{value:t},e):e}(t.context)}function O(t){(0,r.J0)(!1)}function H(t){let{basename:e="/",children:i=null,location:s,navigationType:o=r.aU.Pop,navigator:l,static:a=!1,future:d}=t;p()&&(0,r.J0)(!1);let f=e.replace(/^\/*/,"/"),m=n.useMemo((()=>({basename:f,navigator:l,static:a,future:h({v7_relativeSplatPath:!1},d)})),[f,d,l,a]);"string"==typeof s&&(s=(0,r.cP)(s));let{pathname:v="/",search:g="",hash:b="",state:w=null,key:S="default"}=s,y=n.useMemo((()=>{let t=(0,r.Zn)(v,f);return null==t?null:{location:{pathname:t,search:g,hash:b,state:w,key:S},navigationType:o}}),[f,v,g,b,w,S,o]);return null==y?null:n.createElement(u.Provider,{value:m},n.createElement(c.Provider,{children:i,value:y}))}function W(t){let{children:e,location:i}=t;return C(V(e),i)}function V(t,e){void 0===e&&(e=[]);let i=[];return n.Children.forEach(t,((t,s)=>{if(!n.isValidElement(t))return;let o=[...e,s];if(t.type===n.Fragment)return void i.push.apply(i,V(t.props.children,o));t.type!==O&&(0,r.J0)(!1),t.props.index&&t.props.children&&(0,r.J0)(!1);let h={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(h.children=V(t.props.children,o)),i.push(h)})),i}(s||(s=i.t(n,2))).startTransition,new Promise((()=>{})),n.Component},"../../../node_modules/react-virtuoso/dist/index.m.js":(t,e,i)=>{i.d(e,{OO:()=>si,Px:()=>ni});var s=i("../../../node_modules/@virtuoso.dev/react-urx/dist/react-urx.esm.js"),n=i("../../../node_modules/@virtuoso.dev/urx/dist/urx.esm.js"),r=i("../../../node_modules/react/index.js"),o=i("../../../node_modules/react-dom/index.js"),h=i("../../../node_modules/console-browserify/index.js");function l(){return l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},l.apply(this,arguments)}function a(t,e){if(null==t)return{};var i,s,n={},r=Object.keys(t);for(s=0;s<r.length;s++)e.indexOf(i=r[s])>=0||(n[i]=t[i]);return n}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function c(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,f,m,p="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;(m=f||(f={}))[m.DEBUG=0]="DEBUG",m[m.INFO=1]="INFO",m[m.WARN=2]="WARN",m[m.ERROR=3]="ERROR";var v=((d={})[f.DEBUG]="debug",d[f.INFO]="log",d[f.WARN]="warn",d[f.ERROR]="error",d),g=n.By((function(){var t=n.P0(f.ERROR);return{log:n.P0((function(e,i,s){var r;void 0===s&&(s=f.INFO),s>=(null!=(r=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?r:n.NA(t))&&h[v[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,i)})),logLevel:t}}),[],{singleton:!0});function b(t,e){void 0===e&&(e=!0);var i=(0,r.useRef)(null),s=function(t){};if("undefined"!=typeof ResizeObserver){var n=new ResizeObserver((function(e){var i=e[0].target;null!==i.offsetParent&&t(i)}));s=function(t){t&&e?(n.observe(t),i.current=t):(i.current&&n.unobserve(i.current),i.current=null)}}return{ref:i,callbackRef:s}}function w(t,e){return void 0===e&&(e=!0),b(t,e).callbackRef}function S(t,e,i,s,n,r,o){return b((function(i){for(var h=function(t,e,i,s){var n=t.length;if(0===n)return null;for(var r=[],o=0;o<n;o++){var h=t.item(o);if(h&&void 0!==h.dataset.index){var l=parseInt(h.dataset.index),a=parseFloat(h.dataset.knownSize),u=e(h,"offsetHeight");if(0===u&&s("Zero-sized element, this should not happen",{child:h},f.ERROR),u!==a){var c=r[r.length-1];0===r.length||c.size!==u||c.endIndex!==l-1?r.push({startIndex:l,endIndex:l,size:u}):r[r.length-1].endIndex++}}}return r}(i.children,e,0,n),l=i.parentElement;!l.dataset.virtuosoScroller;)l=l.parentElement;var a="window"===l.firstElementChild.dataset.viewportType,u=o?o.scrollTop:a?window.pageYOffset||document.documentElement.scrollTop:l.scrollTop,c=o?o.scrollHeight:a?document.documentElement.scrollHeight:l.scrollHeight,d=o?o.offsetHeight:a?window.innerHeight:l.offsetHeight;s({scrollTop:Math.max(u,0),scrollHeight:c,viewportHeight:d}),null==r||r(function(t,e,i){return"normal"===e||null!=e&&e.endsWith("px")||i("row-gap was not resolved to pixel value correctly",e,f.WARN),"normal"===e?0:parseInt(null!=e?e:"0",10)}(0,getComputedStyle(i).rowGap,n)),null!==h&&t(h)}),i)}function y(t,e){return Math.round(t.getBoundingClientRect()[e])}function x(t,e){return Math.abs(t-e)<1.01}function C(t,e,i,s,h){void 0===s&&(s=n.ZT);var l=(0,r.useRef)(null),a=(0,r.useRef)(null),u=(0,r.useRef)(null),c=(0,r.useRef)(!1),d=(0,r.useCallback)((function(i){var s=i.target,n=s===window||s===document,r=n?window.pageYOffset||document.documentElement.scrollTop:s.scrollTop,h=n?document.documentElement.scrollHeight:s.scrollHeight,l=n?window.innerHeight:s.offsetHeight,d=function(){t({scrollTop:Math.max(r,0),scrollHeight:h,viewportHeight:l})};c.current?(0,o.flushSync)(d):d(),c.current=!1,null!==a.current&&(r===a.current||r<=0||r===h-l)&&(a.current=null,e(!0),u.current&&(clearTimeout(u.current),u.current=null))}),[t,e]);return(0,r.useEffect)((function(){var t=h||l.current;return s(h||l.current),d({target:t}),t.addEventListener("scroll",d,{passive:!0}),function(){s(null),t.removeEventListener("scroll",d)}}),[l,d,i,s,h]),{scrollerRef:l,scrollByCallback:function(t){c.current=!0,l.current.scrollBy(t)},scrollToCallback:function(i){var s=l.current;if(s&&(!("offsetHeight"in s)||0!==s.offsetHeight)){var n,r,o,h="smooth"===i.behavior;if(s===window?(r=Math.max(y(document.documentElement,"height"),document.documentElement.scrollHeight),n=window.innerHeight,o=document.documentElement.scrollTop):(r=s.scrollHeight,n=y(s,"height"),o=s.scrollTop),i.top=Math.ceil(Math.max(Math.min(r-n,i.top),0)),x(n,r)||i.top===o)return t({scrollTop:o,scrollHeight:r,viewportHeight:n}),void(h&&e(!0));h?(a.current=i.top,u.current&&clearTimeout(u.current),u.current=setTimeout((function(){u.current=null,a.current=null,e(!0)}),1e3)):a.current=null,s.scrollTo(i)}}}}var M=n.By((function(){var t=n.Vw(),e=n.Vw(),i=n.P0(0),s=n.Vw(),r=n.P0(0),o=n.Vw(),h=n.Vw(),l=n.P0(0),a=n.P0(0),u=n.P0(0),c=n.P0(0),d=n.Vw(),f=n.Vw(),m=n.P0(!1),p=n.P0(!1);return n.$j(n.zG(t,n.UI((function(t){return t.scrollTop}))),e),n.$j(n.zG(t,n.UI((function(t){return t.scrollHeight}))),h),n.$j(e,r),{scrollContainerState:t,scrollTop:e,viewportHeight:o,headerHeight:l,fixedHeaderHeight:a,fixedFooterHeight:u,footerHeight:c,scrollHeight:h,smoothScrollTargetReached:s,react18ConcurrentRendering:p,scrollTo:d,scrollBy:f,statefulScrollTop:r,deviation:i,scrollingInProgress:m}}),[],{singleton:!0}),_={lvl:0};function T(t,e,i,s,n){return void 0===s&&(s=_),void 0===n&&(n=_),{k:t,v:e,lvl:i,l:s,r:n}}function z(t){return t===_}function I(){return _}function E(t,e){if(z(t))return _;var i=t.k,s=t.l,n=t.r;if(e===i){if(z(s))return n;if(z(n))return s;var r=O(s);return L(W(t,{k:r[0],v:r[1],l:H(s)}))}return L(W(t,e<i?{l:E(s,e)}:{r:E(n,e)}))}function k(t,e,i){if(void 0===i&&(i="k"),z(t))return[-1/0,void 0];if(t[i]===e)return[t.k,t.v];if(t[i]<e){var s=k(t.r,e,i);return-1/0===s[0]?[t.k,t.v]:s}return k(t.l,e,i)}function R(t,e,i){return z(t)?T(e,i,1):e===t.k?W(t,{k:e,v:i}):function(t){return $(F(t))}(W(t,e<t.k?{l:R(t.l,e,i)}:{r:R(t.r,e,i)}))}function B(t,e,i){if(z(t))return[];var s=t.k,n=t.v,r=t.r,o=[];return s>e&&(o=o.concat(B(t.l,e,i))),s>=e&&s<=i&&o.push({k:s,v:n}),s<=i&&(o=o.concat(B(r,e,i))),o}function P(t){return z(t)?[]:[].concat(P(t.l),[{k:t.k,v:t.v}],P(t.r))}function O(t){return z(t.r)?[t.k,t.v]:O(t.r)}function H(t){return z(t.r)?t.l:L(W(t,{r:H(t.r)}))}function W(t,e){return T(void 0!==e.k?e.k:t.k,void 0!==e.v?e.v:t.v,void 0!==e.lvl?e.lvl:t.lvl,void 0!==e.l?e.l:t.l,void 0!==e.r?e.r:t.r)}function V(t){return z(t)||t.lvl>t.r.lvl}function L(t){var e=t.l,i=t.r,s=t.lvl;if(i.lvl>=s-1&&e.lvl>=s-1)return t;if(s>i.lvl+1){if(V(e))return F(W(t,{lvl:s-1}));if(z(e)||z(e.r))throw new Error("Unexpected empty nodes");return W(e.r,{l:W(e,{r:e.r.l}),r:W(t,{l:e.r.r,lvl:s-1}),lvl:s})}if(V(t))return $(W(t,{lvl:s-1}));if(z(i)||z(i.l))throw new Error("Unexpected empty nodes");var n=i.l,r=V(n)?i.lvl-1:i.lvl;return W(n,{l:W(t,{r:n.l,lvl:s-1}),r:$(W(i,{l:n.r,lvl:r})),lvl:n.lvl+1})}function N(t,e,i){return z(t)?[]:j(B(t,k(t,e)[0],i),(function(t){return{index:t.k,value:t.v}}))}function j(t,e){var i=t.length;if(0===i)return[];for(var s=e(t[0]),n=s.index,r=s.value,o=[],h=1;h<i;h++){var l=e(t[h]),a=l.index,u=l.value;o.push({start:n,end:a-1,value:r}),n=a,r=u}return o.push({start:n,end:1/0,value:r}),o}function $(t){var e=t.r,i=t.lvl;return z(e)||z(e.r)||e.lvl!==i||e.r.lvl!==i?t:W(e,{l:W(t,{r:e.l}),lvl:i+1})}function F(t){var e=t.l;return z(e)||e.lvl!==t.lvl?t:W(e,{r:W(t,{l:e.r})})}function D(t,e,i,s){void 0===s&&(s=0);for(var n=t.length-1;s<=n;){var r=Math.floor((s+n)/2),o=i(t[r],e);if(0===o)return r;if(-1===o){if(n-s<2)return r-1;n=r-1}else{if(n===s)return r;s=r+1}}throw new Error("Failed binary finding record in array - "+t.join(",")+", searched for "+e)}function A(t,e,i){return t[D(t,e,i)]}var U=n.By((function(){return{recalcInProgress:n.P0(!1)}}),[],{singleton:!0});function Y(t){var e=t.size,i=t.startIndex,s=t.endIndex;return function(t){return t.start===i&&(t.end===s||1/0===t.end)&&t.value===e}}function G(t,e){var i=t.index;return e===i?0:e<i?-1:1}function Z(t,e){var i=t.offset;return e===i?0:e<i?-1:1}function X(t){return{index:t.index,value:t}}function J(t,e,i,s){var n=t,r=0,o=0,h=0,l=0;if(0!==e){h=n[l=D(n,e-1,G)].offset;var a=k(i,e-1);r=a[0],o=a[1],n.length&&n[l].size===k(i,e)[1]&&(l-=1),n=n.slice(0,l+1)}else n=[];for(var u,d=c(N(i,e,1/0));!(u=d()).done;){var f=u.value,m=f.start,p=f.value,v=m-r,g=v*o+h+v*s;n.push({offset:g,size:p,index:m}),r=m,h=g,o=p}return{offsetTree:n,lastIndex:r,lastOffset:h,lastSize:o}}function K(t,e){var i=e[0],s=e[1],n=e[3];i.length>0&&(0,e[2])("received item sizes",i,f.DEBUG);var r=t.sizeTree,o=r,h=0;if(s.length>0&&z(r)&&2===i.length){var l=i[0].size,a=i[1].size;o=s.reduce((function(t,e){return R(R(t,e,l),e+1,a)}),o)}else{var u=function(t,e){for(var i,s=z(t)?0:1/0,n=c(e);!(i=n()).done;){var r=i.value,o=r.size,h=r.startIndex,l=r.endIndex;if(s=Math.min(s,h),z(t))t=R(t,0,o);else{var a=N(t,h-1,l+1);if(!a.some(Y(r))){for(var u,d=!1,f=!1,m=c(a);!(u=m()).done;){var p=u.value,v=p.start,g=p.end,b=p.value;d?(l>=v||o===b)&&(t=E(t,v)):(f=b!==o,d=!0),g>l&&l>=v&&b!==o&&(t=R(t,l+1,b))}f&&(t=R(t,h,o))}}}return[t,s]}(o,i);o=u[0],h=u[1]}if(o===r)return t;var d=J(t.offsetTree,h,o,n),m=d.offsetTree;return{sizeTree:o,offsetTree:m,lastIndex:d.lastIndex,lastOffset:d.lastOffset,lastSize:d.lastSize,groupOffsetTree:s.reduce((function(t,e){return R(t,e,q(e,m,n))}),I()),groupIndices:s}}function q(t,e,i){if(0===e.length)return 0;var s=A(e,t,G),n=t-s.index,r=s.size*n+(n-1)*i+s.offset;return r>0?r+i:r}function Q(t,e,i){if(function(t){return void 0!==t.groupIndex}(t))return e.groupIndices[t.groupIndex]+1;var s=tt("LAST"===t.index?i:t.index,e);return Math.max(0,s,Math.min(i,s))}function tt(t,e){if(!et(e))return t;for(var i=0;e.groupIndices[i]<=t+i;)i++;return t+i}function et(t){return!z(t.groupOffsetTree)}var it={offsetHeight:"height",offsetWidth:"width"},st=n.By((function(t){var e=t[0].log,i=t[1].recalcInProgress,s=n.Vw(),r=n.Vw(),o=n.o3(r,0),h=n.Vw(),a=n.Vw(),u=n.P0(0),c=n.P0([]),d=n.P0(void 0),m=n.P0(void 0),p=n.P0((function(t,e){return y(t,it[e])})),v=n.P0(void 0),g=n.P0(0),b={offsetTree:[],sizeTree:I(),groupOffsetTree:I(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},w=n.o3(n.zG(s,n.Mm(c,e,g),n.Rp(K,b),n.xb()),b);n.$j(n.zG(c,n.hX((function(t){return t.length>0})),n.Mm(w,g),n.UI((function(t){var e=t[0],i=t[1],s=t[2],n=e.reduce((function(t,e,n){return R(t,e,q(e,i.offsetTree,s)||n)}),I());return l({},i,{groupIndices:e,groupOffsetTree:n})}))),w),n.$j(n.zG(r,n.Mm(w),n.hX((function(t){return t[0]<t[1].lastIndex})),n.UI((function(t){var e=t[1];return[{startIndex:t[0],endIndex:e.lastIndex,size:e.lastSize}]}))),s),n.$j(d,m);var S=n.o3(n.zG(d,n.UI((function(t){return void 0===t}))),!0);n.$j(n.zG(m,n.hX((function(t){return void 0!==t&&z(n.NA(w).sizeTree)})),n.UI((function(t){return[{startIndex:0,endIndex:0,size:t}]}))),s);var x=n.Er(n.zG(s,n.Mm(w),n.Rp((function(t,e){var i=e[1];return{changed:i!==t.sizes,sizes:i}}),{changed:!1,sizes:b}),n.UI((function(t){return t.changed}))));n.Ld(n.zG(u,n.Rp((function(t,e){return{diff:t.prev-e,prev:e}}),{diff:0,prev:0}),n.UI((function(t){return t.diff}))),(function(t){t>0?(n.nY(i,!0),n.nY(h,t)):t<0&&n.nY(a,t)})),n.Ld(n.zG(u,n.Mm(e)),(function(t){t[0]<0&&(0,t[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:u},f.ERROR)}));var C=n.Er(h);n.$j(n.zG(h,n.Mm(w),n.UI((function(t){var e=t[0],i=t[1];if(i.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return P(i.sizeTree).reduce((function(t,i){var s=i.k,n=i.v;return{ranges:[].concat(t.ranges,[{startIndex:t.prevIndex,endIndex:s+e-1,size:t.prevSize}]),prevIndex:s+e,prevSize:n}}),{ranges:[],prevIndex:0,prevSize:i.lastSize}).ranges}))),s);var M=n.Er(n.zG(a,n.Mm(w,g),n.UI((function(t){return q(-t[0],t[1].offsetTree,t[2])}))));return n.$j(n.zG(a,n.Mm(w,g),n.UI((function(t){var e=t[0],i=t[1],s=t[2];if(i.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var n=P(i.sizeTree).reduce((function(t,i){var s=i.v;return R(t,Math.max(0,i.k+e),s)}),I());return l({},i,{sizeTree:n},J(i.offsetTree,0,n,s))}))),w),{data:v,totalCount:r,sizeRanges:s,groupIndices:c,defaultItemSize:m,fixedItemSize:d,unshiftWith:h,shiftWith:a,shiftWithOffset:M,beforeUnshiftWith:C,firstItemIndex:u,gap:g,sizes:w,listRefresh:x,statefulTotalCount:o,trackItemSizes:S,itemSize:p}}),n.Tc(g,U),{singleton:!0}),nt="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function rt(t){var e="number"==typeof t?{index:t}:t;return e.align||(e.align="start"),e.behavior&&nt||(e.behavior="auto"),e.offset||(e.offset=0),e}var ot=n.By((function(t){var e=t[0],i=e.sizes,s=e.totalCount,r=e.listRefresh,o=e.gap,h=t[1],l=h.scrollingInProgress,a=h.viewportHeight,u=h.scrollTo,c=h.smoothScrollTargetReached,d=h.headerHeight,m=h.footerHeight,p=h.fixedHeaderHeight,v=h.fixedFooterHeight,g=t[2].log,b=n.Vw(),w=n.P0(0),S=null,y=null,x=null;function C(){S&&(S(),S=null),x&&(x(),x=null),y&&(clearTimeout(y),y=null),n.nY(l,!1)}return n.$j(n.zG(b,n.Mm(i,a,s,w,d,m,g),n.Mm(o,p,v),n.UI((function(t){var e=t[0],i=e[0],s=e[1],o=e[2],h=e[3],a=e[4],u=e[5],d=e[6],m=e[7],p=t[1],v=t[2],g=t[3],w=rt(i),M=w.align,_=w.behavior,T=w.offset,z=h-1,I=Q(w,s,z),E=q(I,s.offsetTree,p)+u;"end"===M?(E+=v+k(s.sizeTree,I)[1]-o+g,I===z&&(E+=d)):"center"===M?E+=(v+k(s.sizeTree,I)[1]-o+g)/2:E-=a,T&&(E+=T);var R=function(t){C(),t?(m("retrying to scroll to",{location:i},f.DEBUG),n.nY(b,i)):m("list did not change, scroll successful",{},f.DEBUG)};if(C(),"smooth"===_){var B=!1;x=n.Ld(r,(function(t){B=B||t})),S=n.eM(c,(function(){R(B)}))}else S=n.eM(n.zG(r,(function(t){var e=setTimeout((function(){t(!1)}),150);return function(i){i&&(t(!0),clearTimeout(e))}})),R);return y=setTimeout((function(){C()}),1200),n.nY(l,!0),m("scrolling from index to",{index:I,top:E,behavior:_},f.DEBUG),{top:E,behavior:_}}))),u),{scrollToIndex:b,topListHeight:w}}),n.Tc(st,M,g),{singleton:!0}),ht="up",lt={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},at=n.By((function(t){var e=t[0],i=e.scrollContainerState,s=e.scrollTop,r=e.viewportHeight,o=e.headerHeight,h=e.footerHeight,l=e.scrollBy,a=n.P0(!1),u=n.P0(!0),c=n.Vw(),d=n.Vw(),f=n.P0(4),m=n.P0(0),p=n.o3(n.zG(n.TS(n.zG(n.Ho(s),n.T0(1),n.hZ(!0)),n.zG(n.Ho(s),n.T0(1),n.hZ(!1),n.bh(100))),n.xb()),!1),v=n.o3(n.zG(n.TS(n.zG(l,n.hZ(!0)),n.zG(l,n.hZ(!1),n.bh(200))),n.xb()),!1);n.$j(n.zG(n.aj(n.Ho(s),n.Ho(m)),n.UI((function(t){return t[0]<=t[1]})),n.xb()),u),n.$j(n.zG(u,n.pO(50)),d);var g=n.Er(n.zG(n.aj(i,n.Ho(r),n.Ho(o),n.Ho(h),n.Ho(f)),n.Rp((function(t,e){var i,s,n=e[0],r=n.scrollTop,o=n.scrollHeight,h=e[1],l={viewportHeight:h,scrollTop:r,scrollHeight:o};return r+h-o>-e[4]?(r>t.state.scrollTop?(i="SCROLLED_DOWN",s=t.state.scrollTop-r):(i="SIZE_DECREASED",s=t.state.scrollTop-r||t.scrollTopDelta),{atBottom:!0,state:l,atBottomBecause:i,scrollTopDelta:s}):{atBottom:!1,notAtBottomBecause:l.scrollHeight>t.state.scrollHeight?"SIZE_INCREASED":h<t.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":r<t.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:l}}),lt),n.xb((function(t,e){return t&&t.atBottom===e.atBottom})))),b=n.o3(n.zG(i,n.Rp((function(t,e){var i=e.scrollTop,s=e.scrollHeight,n=e.viewportHeight;return x(t.scrollHeight,s)?{scrollTop:i,scrollHeight:s,jump:0,changed:!1}:t.scrollTop!==i&&s-(i+n)<1?{scrollHeight:s,scrollTop:i,jump:t.scrollTop-i,changed:!0}:{scrollHeight:s,scrollTop:i,jump:0,changed:!0}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),n.hX((function(t){return t.changed})),n.UI((function(t){return t.jump}))),0);n.$j(n.zG(g,n.UI((function(t){return t.atBottom}))),a),n.$j(n.zG(a,n.pO(50)),c);var w=n.P0("down");n.$j(n.zG(i,n.UI((function(t){return t.scrollTop})),n.xb(),n.Rp((function(t,e){return n.NA(v)?{direction:t.direction,prevScrollTop:e}:{direction:e<t.prevScrollTop?ht:"down",prevScrollTop:e}}),{direction:"down",prevScrollTop:0}),n.UI((function(t){return t.direction}))),w),n.$j(n.zG(i,n.pO(50),n.hZ("none")),w);var S=n.P0(0);return n.$j(n.zG(p,n.hX((function(t){return!t})),n.hZ(0)),S),n.$j(n.zG(s,n.pO(100),n.Mm(p),n.hX((function(t){return!!t[1]})),n.Rp((function(t,e){return[t[1],e[0]]}),[0,0]),n.UI((function(t){return t[1]-t[0]}))),S),{isScrolling:p,isAtTop:u,isAtBottom:a,atBottomState:g,atTopStateChange:d,atBottomStateChange:c,scrollDirection:w,atBottomThreshold:f,atTopThreshold:m,scrollVelocity:S,lastJumpDueToItemResize:b}}),n.Tc(M)),ut=n.By((function(t){var e=t[0].log,i=n.P0(!1),s=n.Er(n.zG(i,n.hX((function(t){return t})),n.xb()));return n.Ld(i,(function(t){t&&n.NA(e)("props updated",{},f.DEBUG)})),{propsReady:i,didMount:s}}),n.Tc(g),{singleton:!0}),ct=n.By((function(t){var e=t[0],i=e.sizes,s=e.listRefresh,r=e.defaultItemSize,o=t[1].scrollTop,h=t[2].scrollToIndex,l=t[3].didMount,a=n.P0(!0),u=n.P0(0);return n.$j(n.zG(l,n.Mm(u),n.hX((function(t){return!!t[1]})),n.hZ(!1)),a),n.Ld(n.zG(n.aj(s,l),n.Mm(a,i,r),n.hX((function(t){var e=t[1],i=t[3];return t[0][1]&&(!z(t[2].sizeTree)||void 0!==i)&&!e})),n.Mm(u)),(function(t){var e=t[1];setTimeout((function(){n.eM(o,(function(){n.nY(a,!0)})),n.nY(h,e)}))})),{scrolledToInitialItem:a,initialTopMostItemIndex:u}}),n.Tc(st,M,ot,ut),{singleton:!0});function dt(t){return!!t&&("smooth"===t?"smooth":"auto")}var ft=n.By((function(t){var e=t[0],i=e.totalCount,s=e.listRefresh,r=t[1],o=r.isAtBottom,h=r.atBottomState,l=t[2].scrollToIndex,a=t[3].scrolledToInitialItem,u=t[4],c=u.propsReady,d=u.didMount,m=t[5].log,p=t[6].scrollingInProgress,v=n.P0(!1),g=n.Vw(),b=null;function w(t){n.nY(l,{index:"LAST",align:"end",behavior:t})}function S(t){var e=n.eM(h,(function(e){!t||e.atBottom||"SIZE_INCREASED"!==e.notAtBottomBecause||b||(n.NA(m)("scrolling to bottom due to increased size",{},f.DEBUG),w("auto"))}));setTimeout(e,100)}return n.Ld(n.zG(n.aj(n.zG(n.Ho(i),n.T0(1)),d),n.Mm(n.Ho(v),o,a,p),n.UI((function(t){var e=t[0],i=e[0],s=e[1]&&t[3],n="auto";return s&&(n=function(t,e){return"function"==typeof t?dt(t(e)):e&&dt(t)}(t[1],t[2]||t[4]),s=s&&!!n),{totalCount:i,shouldFollow:s,followOutputBehavior:n}})),n.hX((function(t){return t.shouldFollow}))),(function(t){var e=t.totalCount,i=t.followOutputBehavior;b&&(b(),b=null),b=n.eM(s,(function(){n.NA(m)("following output to ",{totalCount:e},f.DEBUG),w(i),b=null}))})),n.Ld(n.zG(n.aj(n.Ho(v),i,c),n.hX((function(t){return t[0]&&t[2]})),n.Rp((function(t,e){var i=e[1];return{refreshed:t.value===i,value:i}}),{refreshed:!1,value:0}),n.hX((function(t){return t.refreshed})),n.Mm(v,i)),(function(t){S(!1!==t[1])})),n.Ld(g,(function(){S(!1!==n.NA(v))})),n.Ld(n.aj(n.Ho(v),h),(function(t){var e=t[1];t[0]&&!e.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===e.notAtBottomBecause&&w("auto")})),{followOutput:v,autoscrollToBottom:g}}),n.Tc(st,at,ot,ct,ut,g,M));function mt(t){return t.reduce((function(t,e){return t.groupIndices.push(t.totalCount),t.totalCount+=e+1,t}),{totalCount:0,groupIndices:[]})}var pt=n.By((function(t){var e=t[0],i=e.totalCount,s=e.groupIndices,r=e.sizes,o=t[1],h=o.scrollTop,l=o.headerHeight,a=n.Vw(),u=n.Vw(),c=n.Er(n.zG(a,n.UI(mt)));return n.$j(n.zG(c,n.UI((function(t){return t.totalCount}))),i),n.$j(n.zG(c,n.UI((function(t){return t.groupIndices}))),s),n.$j(n.zG(n.aj(h,r,l),n.hX((function(t){return et(t[1])})),n.UI((function(t){return k(t[1].groupOffsetTree,Math.max(t[0]-t[2],0),"v")[0]})),n.xb(),n.UI((function(t){return[t]}))),u),{groupCounts:a,topItemsIndexes:u}}),n.Tc(st,M));function vt(t,e){return!(!t||t[0]!==e[0]||t[1]!==e[1])}function gt(t,e){return!(!t||t.startIndex!==e.startIndex||t.endIndex!==e.endIndex)}function bt(t,e,i){return"number"==typeof t?i===ht&&"top"===e||"down"===i&&"bottom"===e?t:0:i===ht?"top"===e?t.main:t.reverse:"bottom"===e?t.main:t.reverse}function wt(t,e){return"number"==typeof t?t:t[e]||0}var St=n.By((function(t){var e=t[0],i=e.scrollTop,s=e.viewportHeight,r=e.deviation,o=e.headerHeight,h=e.fixedHeaderHeight,l=n.Vw(),a=n.P0(0),u=n.P0(0),c=n.P0(0),d=n.o3(n.zG(n.aj(n.Ho(i),n.Ho(s),n.Ho(o),n.Ho(l,vt),n.Ho(c),n.Ho(a),n.Ho(h),n.Ho(r),n.Ho(u)),n.UI((function(t){var e=t[0],i=t[1],s=t[2],n=t[3],r=n[0],o=n[1],h=t[4],l=t[6],a=t[7],u=t[8],c=e-a,d=t[5]+l,f=Math.max(s-c,0),m="none",p=wt(u,"top"),v=wt(u,"bottom");return r-=a,o+=s+l,(r+=s+l)>e+d-p&&(m=ht),(o-=a)<e-f+i+v&&(m="down"),"none"!==m?[Math.max(c-s-bt(h,"top",m)-p,0),c-f-l+i+bt(h,"bottom",m)+v]:null})),n.hX((function(t){return null!=t})),n.xb(vt)),[0,0]);return{listBoundary:l,overscan:c,topListHeight:a,increaseViewportBy:u,visibleRange:d}}),n.Tc(M),{singleton:!0}),yt={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function xt(t,e,i){if(0===t.length)return[];if(!et(e))return t.map((function(t){return l({},t,{index:t.index+i,originalIndex:t.index})}));for(var s,n=[],r=N(e.groupOffsetTree,t[0].index,t[t.length-1].index),o=void 0,h=0,a=c(t);!(s=a()).done;){var u=s.value;(!o||o.end<u.index)&&(o=r.shift(),h=e.groupIndices.indexOf(o.start)),n.push(l({},u.index===o.start?{type:"group",index:h}:{index:u.index-(h+1)+i,groupIndex:h},{size:u.size,offset:u.offset,originalIndex:u.index,data:u.data}))}return n}function Ct(t,e,i,s,n,r){var o=0,h=0;if(t.length>0){o=t[0].offset;var l=t[t.length-1];h=l.offset+l.size}var a=i-n.lastIndex,u=o,c=n.lastOffset+a*n.lastSize+(a-1)*s-h;return{items:xt(t,n,r),topItems:xt(e,n,r),topListHeight:e.reduce((function(t,e){return e.size+t}),0),offsetTop:o,offsetBottom:c,top:u,bottom:h,totalCount:i,firstItemIndex:r}}var Mt=n.By((function(t){var e=t[0],i=e.sizes,s=e.totalCount,r=e.data,o=e.firstItemIndex,h=e.gap,a=t[1],u=t[2],d=u.visibleRange,f=u.listBoundary,m=u.topListHeight,p=t[3],v=p.scrolledToInitialItem,g=p.initialTopMostItemIndex,b=t[4].topListHeight,w=t[5],S=t[6].didMount,y=t[7].recalcInProgress,x=n.P0([]),C=n.Vw();n.$j(a.topItemsIndexes,x);var M=n.o3(n.zG(n.aj(S,y,n.Ho(d,vt),n.Ho(s),n.Ho(i),n.Ho(g),v,n.Ho(x),n.Ho(o),n.Ho(h),r),n.hX((function(t){return t[0]&&!t[1]})),n.UI((function(t){var e=t[2],i=e[0],s=e[1],r=t[3],o=t[5],h=t[6],a=t[7],u=t[8],d=t[9],f=t[10],m=t[4],p=m.sizeTree,v=m.offsetTree;if(0===r||0===i&&0===s)return l({},yt,{totalCount:r});if(z(p))return Ct(function(t,e,i){if(et(e)){var s=tt(t,e);return[{index:k(e.groupOffsetTree,s)[0],size:0,offset:0},{index:s,size:0,offset:0,data:i&&i[0]}]}return[{index:t,size:0,offset:0,data:i&&i[0]}]}(function(t,e){return"number"==typeof t?t:"LAST"===t.index?e-1:t.index}(o,r),m,f),[],r,d,m,u);var g=[];if(a.length>0)for(var b,w=a[0],S=a[a.length-1],y=0,x=c(N(p,w,S));!(b=x()).done;)for(var C=b.value,M=C.value,_=Math.max(C.start,w),T=Math.min(C.end,S),I=_;I<=T;I++)g.push({index:I,size:M,offset:y,data:f&&f[I]}),y+=M;if(!h)return Ct([],g,r,d,m,u);var E=a.length>0?a[a.length-1]+1:0,R=function(t,e,i,s){return void 0===s&&(s=0),s>0&&(e=Math.max(e,A(t,s,G).offset)),j((r=i,h=D(n=t,e,o=Z),l=D(n,r,o,h),n.slice(h,l+1)),X);var n,r,o,h,l}(v,i,s,E);if(0===R.length)return null;var B=r-1;return Ct(n.bw([],(function(t){for(var e,n=c(R);!(e=n()).done;){var r=e.value,o=r.value,h=o.offset,l=r.start,a=o.size;if(o.offset<i){var u=(l+=Math.floor((i-o.offset+d)/(a+d)))-r.start;h+=u*a+u*d}l<E&&(h+=(E-l)*a,l=E);for(var m=Math.min(r.end,B),p=l;p<=m&&!(h>=s);p++)t.push({index:p,size:a,offset:h,data:f&&f[p]}),h+=a+d}})),g,r,d,m,u)})),n.hX((function(t){return null!==t})),n.xb()),yt);return n.$j(n.zG(r,n.hX((function(t){return void 0!==t})),n.UI((function(t){return t.length}))),s),n.$j(n.zG(M,n.UI((function(t){return t.topListHeight}))),b),n.$j(b,m),n.$j(n.zG(M,n.UI((function(t){return[t.top,t.bottom]}))),f),n.$j(n.zG(M,n.UI((function(t){return t.items}))),C),l({listState:M,topItemsIndexes:x,endReached:n.Er(n.zG(M,n.hX((function(t){return t.items.length>0})),n.Mm(s,r),n.hX((function(t){var e=t[0].items;return e[e.length-1].originalIndex===t[1]-1})),n.UI((function(t){return[t[1]-1,t[2]]})),n.xb(vt),n.UI((function(t){return t[0]})))),startReached:n.Er(n.zG(M,n.pO(200),n.hX((function(t){var e=t.items;return e.length>0&&e[0].originalIndex===t.topItems.length})),n.UI((function(t){return t.items[0].index})),n.xb())),rangeChanged:n.Er(n.zG(M,n.hX((function(t){return t.items.length>0})),n.UI((function(t){for(var e=t.items,i=0,s=e.length-1;"group"===e[i].type&&i<s;)i++;for(;"group"===e[s].type&&s>i;)s--;return{startIndex:e[i].index,endIndex:e[s].index}})),n.xb(gt))),itemsRendered:C},w)}),n.Tc(st,pt,St,ct,ot,at,ut,U),{singleton:!0}),_t=n.By((function(t){var e=t[0],i=e.sizes,s=e.firstItemIndex,r=e.data,o=e.gap,h=t[1].listState,l=t[2].didMount,a=n.P0(0);return n.$j(n.zG(l,n.Mm(a),n.hX((function(t){return 0!==t[1]})),n.Mm(i,s,o,r),n.UI((function(t){var e=t[0][1],i=t[1],s=t[2],n=t[3],r=t[4],o=void 0===r?[]:r,h=0;if(i.groupIndices.length>0)for(var l,a=c(i.groupIndices);!((l=a()).done||l.value-h>=e);)h++;var u=e+h;return Ct(Array.from({length:u}).map((function(t,e){return{index:e,size:0,offset:0,data:o[e]}})),[],u,n,i,s)}))),h),{initialItemCount:a}}),n.Tc(st,Mt,ut),{singleton:!0}),Tt=n.By((function(t){var e=t[0].scrollVelocity,i=n.P0(!1),s=n.Vw(),r=n.P0(!1);return n.$j(n.zG(e,n.Mm(r,i,s),n.hX((function(t){return!!t[1]})),n.UI((function(t){var e=t[0],i=t[1],s=t[2],n=t[3],r=i.enter;if(s){if((0,i.exit)(e,n))return!1}else if(r(e,n))return!0;return s})),n.xb()),i),n.Ld(n.zG(n.aj(i,e,s),n.Mm(r)),(function(t){var e=t[0],i=t[1];return e[0]&&i&&i.change&&i.change(e[1],e[2])})),{isSeeking:i,scrollSeekConfiguration:r,scrollVelocity:e,scrollSeekRangeChanged:s}}),n.Tc(at),{singleton:!0}),zt=n.By((function(t){var e=t[0].topItemsIndexes,i=n.P0(0);return n.$j(n.zG(i,n.hX((function(t){return t>0})),n.UI((function(t){return Array.from({length:t}).map((function(t,e){return e}))}))),e),{topItemCount:i}}),n.Tc(Mt)),It=n.By((function(t){var e=t[0],i=e.footerHeight,s=e.headerHeight,r=e.fixedHeaderHeight,o=e.fixedFooterHeight,h=t[1].listState,l=n.Vw(),a=n.o3(n.zG(n.aj(i,o,s,r,h),n.UI((function(t){var e=t[4];return t[0]+t[1]+t[2]+t[3]+e.offsetBottom+e.bottom}))),0);return n.$j(n.Ho(a),l),{totalListHeight:a,totalListHeightChanged:l}}),n.Tc(M,Mt),{singleton:!0});function Et(t){var e,i=!1;return function(){return i||(i=!0,e=t()),e}}var kt=Et((function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)})),Rt=n.By((function(t){var e=t[0],i=e.scrollBy,s=e.scrollTop,r=e.deviation,o=e.scrollingInProgress,h=t[1],l=h.isScrolling,a=h.isAtBottom,u=h.scrollDirection,c=t[3],d=c.beforeUnshiftWith,m=c.shiftWithOffset,p=c.sizes,v=c.gap,g=t[4].log,b=t[5].recalcInProgress,w=n.Er(n.zG(t[2].listState,n.Mm(h.lastJumpDueToItemResize),n.Rp((function(t,e){var i=t[1],s=e[0],n=s.items,r=s.totalCount,o=s.bottom+s.offsetBottom,h=0;return t[2]===r&&i.length>0&&n.length>0&&(0===n[0].originalIndex&&0===i[0].originalIndex||0!=(h=o-t[3])&&(h+=e[1])),[h,n,r,o]}),[0,[],0,0]),n.hX((function(t){return 0!==t[0]})),n.Mm(s,u,o,a,g),n.hX((function(t){return!t[3]&&0!==t[1]&&t[2]===ht})),n.UI((function(t){var e=t[0][0];return(0,t[5])("Upward scrolling compensation",{amount:e},f.DEBUG),e}))));function S(t){t>0?(n.nY(i,{top:-t,behavior:"auto"}),n.nY(r,0)):(n.nY(r,0),n.nY(i,{top:-t,behavior:"auto"}))}return n.Ld(n.zG(w,n.Mm(r,l)),(function(t){var e=t[0],i=t[1];t[2]&&kt()?n.nY(r,i-e):S(-e)})),n.Ld(n.zG(n.aj(n.o3(l,!1),r,b),n.hX((function(t){return!t[0]&&!t[2]&&0!==t[1]})),n.UI((function(t){return t[1]})),n.pO(1)),S),n.$j(n.zG(m,n.UI((function(t){return{top:-t}}))),i),n.Ld(n.zG(d,n.Mm(p,v),n.UI((function(t){var e=t[0];return e*t[1].lastSize+e*t[2]}))),(function(t){n.nY(r,t),requestAnimationFrame((function(){n.nY(i,{top:t}),requestAnimationFrame((function(){n.nY(r,0),n.nY(b,!1)}))}))})),{deviation:r}}),n.Tc(M,at,Mt,st,g,U)),Bt=n.By((function(t){var e=t[0].totalListHeight,i=t[1].didMount,s=t[2].scrollTo,r=n.P0(0);return n.Ld(n.zG(i,n.Mm(r),n.hX((function(t){return 0!==t[1]})),n.UI((function(t){return{top:t[1]}}))),(function(t){n.eM(n.zG(e,n.hX((function(t){return 0!==t}))),(function(){setTimeout((function(){n.nY(s,t)}))}))})),{initialScrollTop:r}}),n.Tc(It,ut,M),{singleton:!0}),Pt=n.By((function(t){var e=t[0].viewportHeight,i=t[1].totalListHeight,s=n.P0(!1);return{alignToBottom:s,paddingTopAddition:n.o3(n.zG(n.aj(s,e,i),n.hX((function(t){return t[0]})),n.UI((function(t){return Math.max(0,t[1]-t[2])})),n.xb()),0)}}),n.Tc(M,It),{singleton:!0}),Ot=n.By((function(t){var e=t[0],i=e.scrollTo,s=e.scrollContainerState,r=n.Vw(),o=n.Vw(),h=n.Vw(),a=n.P0(!1),u=n.P0(void 0);return n.$j(n.zG(n.aj(r,o),n.UI((function(t){var e=t[0],i=e.viewportHeight,s=e.scrollHeight;return{scrollTop:Math.max(0,e.scrollTop-t[1].offsetTop),scrollHeight:s,viewportHeight:i}}))),s),n.$j(n.zG(i,n.Mm(o),n.UI((function(t){var e=t[0];return l({},e,{top:e.top+t[1].offsetTop})}))),h),{useWindowScroll:a,customScrollParent:u,windowScrollContainerState:r,windowViewportRect:o,windowScrollTo:h}}),n.Tc(M)),Ht=["done","behavior","align"],Wt=n.By((function(t){var e=t[0],i=e.sizes,s=e.totalCount,r=e.gap,o=t[1],h=o.scrollTop,u=o.viewportHeight,c=o.headerHeight,d=o.scrollingInProgress,f=t[2].scrollToIndex,m=n.Vw();return n.$j(n.zG(m,n.Mm(i,u,s,c,h,r),n.UI((function(t){var e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],h=t[5],u=t[6],c=e.done,f=e.behavior,m=e.align,p=a(e,Ht),v=null,g=Q(e,i,r-1),b=q(g,i.offsetTree,u)+o;return b<h?v=l({},p,{behavior:f,align:null!=m?m:"start"}):b+k(i.sizeTree,g)[1]>h+s&&(v=l({},p,{behavior:f,align:null!=m?m:"end"})),v?c&&n.eM(n.zG(d,n.T0(1),n.hX((function(t){return!1===t}))),c):c&&c(),v})),n.hX((function(t){return null!==t}))),f),{scrollIntoView:m}}),n.Tc(st,M,ot,Mt,g),{singleton:!0}),Vt=["listState","topItemsIndexes"],Lt=n.By((function(t){return l({},t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}),n.Tc(St,_t,ut,Tt,It,Bt,Pt,Ot,Wt)),Nt=n.By((function(t){var e=t[0],i=e.totalCount,s=e.sizeRanges,r=e.fixedItemSize,o=e.defaultItemSize,h=e.trackItemSizes,u=e.itemSize,c=e.data,d=e.firstItemIndex,f=e.groupIndices,m=e.statefulTotalCount,p=e.gap,v=t[1],g=v.initialTopMostItemIndex,b=v.scrolledToInitialItem,w=t[2],S=t[3],y=t[4],x=y.listState,C=y.topItemsIndexes,M=a(y,Vt),_=t[5].scrollToIndex,T=t[7].topItemCount,z=t[8].groupCounts,I=t[9],E=t[10];return n.$j(M.rangeChanged,I.scrollSeekRangeChanged),n.$j(n.zG(I.windowViewportRect,n.UI((function(t){return t.visibleHeight}))),w.viewportHeight),l({totalCount:i,data:c,firstItemIndex:d,sizeRanges:s,initialTopMostItemIndex:g,scrolledToInitialItem:b,topItemsIndexes:C,topItemCount:T,groupCounts:z,fixedItemHeight:r,defaultItemHeight:o,gap:p},S,{statefulTotalCount:m,listState:x,scrollToIndex:_,trackItemSizes:h,itemSize:u,groupIndices:f},M,I,w,E)}),n.Tc(st,ct,M,ft,Mt,ot,Rt,zt,pt,Lt,g)),jt=Et((function(){if("undefined"==typeof document)return"sticky";var t=document.createElement("div");return t.style.position="-webkit-sticky","-webkit-sticky"===t.style.position?"-webkit-sticky":"sticky"}));function $t(t,e){var i=(0,r.useRef)(null),s=(0,r.useCallback)((function(s){if(null!==s&&s.offsetParent){var n,r,o=s.getBoundingClientRect(),h=o.width;if(e){var l=e.getBoundingClientRect(),a=o.top-l.top;n=l.height-Math.max(0,a),r=a+e.scrollTop}else n=window.innerHeight-Math.max(0,o.top),r=o.top+window.pageYOffset;i.current={offsetTop:r,visibleHeight:n,visibleWidth:h},t(i.current)}}),[t,e]),n=b(s),o=n.callbackRef,h=n.ref,l=(0,r.useCallback)((function(){s(h.current)}),[s,h]);return(0,r.useEffect)((function(){if(e){e.addEventListener("scroll",l);var t=new ResizeObserver(l);return t.observe(e),function(){e.removeEventListener("scroll",l),t.unobserve(e)}}return window.addEventListener("scroll",l),window.addEventListener("resize",l),function(){window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}}),[l,e]),o}var Ft=r.createContext(void 0),Dt=["placeholder"],At=["style","children"],Ut=["style","children"];function Yt(t){return t}var Gt=n.By((function(){var t=n.P0((function(t){return"Item "+t})),e=n.P0(null),i=n.P0((function(t){return"Group "+t})),s=n.P0({}),r=n.P0(Yt),o=n.P0("div"),h=n.P0(n.ZT),l=function(t,e){return void 0===e&&(e=null),n.o3(n.zG(s,n.UI((function(e){return e[t]})),n.xb()),e)};return{context:e,itemContent:t,groupContent:i,components:s,computeItemKey:r,headerFooterTag:o,scrollerRef:h,FooterComponent:l("Footer"),HeaderComponent:l("Header"),TopItemListComponent:l("TopItemList"),ListComponent:l("List","div"),ItemComponent:l("Item","div"),GroupComponent:l("Group","div"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder")}}));function Zt(t,e){var i=n.Vw();return n.Ld(i,(function(){return h.warn("react-virtuoso: You are using a deprecated property. "+e,"color: red;","color: inherit;","color: blue;")})),n.$j(i,t),i}var Xt=n.By((function(t){var e=t[0],i=t[1],s={item:Zt(i.itemContent,"Rename the %citem%c prop to %citemContent."),group:Zt(i.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Zt(e.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Zt(e.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Zt(e.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:n.Vw(),maxHeightCacheSize:n.Vw(),footer:n.Vw(),header:n.Vw(),HeaderContainer:n.Vw(),FooterContainer:n.Vw(),ItemContainer:n.Vw(),ScrollContainer:n.Vw(),GroupContainer:n.Vw(),ListContainer:n.Vw(),emptyComponent:n.Vw(),scrollSeek:n.Vw()};function r(t,e,s){n.$j(n.zG(t,n.Mm(i.components),n.UI((function(t){var i,n=t[0],r=t[1];return h.warn("react-virtuoso: "+s+" property is deprecated. Pass components."+e+" instead."),l({},r,((i={})[e]=n,i))}))),i.components)}return n.Ld(s.adjustForPrependedItems,(function(){h.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")})),n.Ld(s.maxHeightCacheSize,(function(){h.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")})),n.Ld(s.HeaderContainer,(function(){h.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")})),n.Ld(s.FooterContainer,(function(){h.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")})),n.Ld(s.scrollSeek,(function(t){var s=t.placeholder,r=a(t,Dt);h.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),n.nY(i.components,l({},n.NA(i.components),{ScrollSeekPlaceholder:s})),n.nY(e.scrollSeekConfiguration,r)})),r(s.footer,"Footer","footer"),r(s.header,"Header","header"),r(s.ItemContainer,"Item","ItemContainer"),r(s.ListContainer,"List","ListContainer"),r(s.ScrollContainer,"Scroller","ScrollContainer"),r(s.emptyComponent,"EmptyPlaceholder","emptyComponent"),r(s.GroupContainer,"Group","GroupContainer"),l({},e,i,s)}),n.Tc(Nt,Gt)),Jt=function(t){return r.createElement("div",{style:{height:t.height}})},Kt={position:jt(),zIndex:1,overflowAnchor:"none"},qt={overflowAnchor:"none"},Qt=r.memo((function(t){var e=t.showTopList,i=void 0!==e&&e,s=me("listState"),o=fe("sizeRanges"),h=me("useWindowScroll"),a=me("customScrollParent"),u=fe("windowScrollContainerState"),c=fe("scrollContainerState"),d=a||h?u:c,f=me("itemContent"),m=me("context"),p=me("groupContent"),v=me("trackItemSizes"),g=me("itemSize"),b=me("log"),w=fe("gap"),y=S(o,g,v,i?n.ZT:d,b,w,a).callbackRef,x=r.useState(0),C=x[0],M=x[1];pe("deviation",(function(t){C!==t&&M(t)}));var _=me("EmptyPlaceholder"),T=me("ScrollSeekPlaceholder")||Jt,z=me("ListComponent"),I=me("ItemComponent"),E=me("GroupComponent"),k=me("computeItemKey"),R=me("isSeeking"),B=me("groupIndices").length>0,P=me("paddingTopAddition"),O=i?{}:{boxSizing:"border-box",paddingTop:s.offsetTop+P,paddingBottom:s.offsetBottom,marginTop:C};return!i&&0===s.totalCount&&_?(0,r.createElement)(_,se(_,m)):(0,r.createElement)(z,l({},se(z,m),{ref:y,style:O,"data-test-id":i?"virtuoso-top-item-list":"virtuoso-item-list"}),(i?s.topItems:s.items).map((function(t){var e=t.originalIndex,i=k(e+s.firstItemIndex,t.data,m);return R?(0,r.createElement)(T,l({},se(T,m),{key:i,index:t.index,height:t.size,type:t.type||"item"},"group"===t.type?{}:{groupIndex:t.groupIndex})):"group"===t.type?(0,r.createElement)(E,l({},se(E,m),{key:i,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:Kt}),p(t.index)):(0,r.createElement)(I,l({},se(I,m),{key:i,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,"data-item-group-index":t.groupIndex,style:qt}),B?f(t.index,t.groupIndex,t.data,m):f(t.index,t.data,m))})))})),te={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},ee={width:"100%",height:"100%",position:"absolute",top:0},ie={width:"100%",position:jt(),top:0};function se(t,e){if("string"!=typeof t)return{context:e}}var ne=r.memo((function(){var t=me("HeaderComponent"),e=fe("headerHeight"),i=me("headerFooterTag"),s=w((function(t){return e(y(t,"height"))})),n=me("context");return t?(0,r.createElement)(i,{ref:s},(0,r.createElement)(t,se(t,n))):null})),re=r.memo((function(){var t=me("FooterComponent"),e=fe("footerHeight"),i=me("headerFooterTag"),s=w((function(t){return e(y(t,"height"))})),n=me("context");return t?(0,r.createElement)(i,{ref:s},(0,r.createElement)(t,se(t,n))):null}));function oe(t){var e=t.usePublisher,i=t.useEmitter,s=t.useEmitterValue;return r.memo((function(t){var n=t.style,o=t.children,h=a(t,At),u=e("scrollContainerState"),c=s("ScrollerComponent"),d=e("smoothScrollTargetReached"),f=s("scrollerRef"),m=s("context"),p=C(u,d,c,f),v=p.scrollerRef,g=p.scrollByCallback;return i("scrollTo",p.scrollToCallback),i("scrollBy",g),(0,r.createElement)(c,l({ref:v,style:l({},te,n),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},h,se(c,m)),o)}))}function he(t){var e=t.usePublisher,i=t.useEmitter,s=t.useEmitterValue;return r.memo((function(t){var o=t.style,h=t.children,u=a(t,Ut),c=e("windowScrollContainerState"),d=s("ScrollerComponent"),f=e("smoothScrollTargetReached"),m=s("totalListHeight"),v=s("deviation"),g=s("customScrollParent"),b=s("context"),w=C(c,f,d,n.ZT,g),S=w.scrollerRef,y=w.scrollByCallback,x=w.scrollToCallback;return p((function(){return S.current=g||window,function(){S.current=null}}),[S,g]),i("windowScrollTo",x),i("scrollBy",y),(0,r.createElement)(d,l({style:l({position:"relative"},o,0!==m?{height:m+v}:{}),"data-virtuoso-scroller":!0},u,se(d,b)),h)}))}var le=function(t){var e=t.children,i=(0,r.useContext)(Ft),s=fe("viewportHeight"),o=fe("fixedItemHeight"),h=w(n.qC(s,(function(t){return y(t,"height")})));return r.useEffect((function(){i&&(s(i.viewportHeight),o(i.itemHeight))}),[i,s,o]),r.createElement("div",{style:ee,ref:h,"data-viewport-type":"element"},e)},ae=function(t){var e=t.children,i=(0,r.useContext)(Ft),s=fe("windowViewportRect"),n=fe("fixedItemHeight"),o=me("customScrollParent"),h=$t(s,o);return r.useEffect((function(){i&&(n(i.itemHeight),s({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:100}))}),[i,s,n]),r.createElement("div",{ref:h,style:ee,"data-viewport-type":"window"},e)},ue=function(t){var e=t.children,i=me("TopItemListComponent"),s=me("headerHeight"),n=l({},ie,{marginTop:s+"px"}),o=me("context");return(0,r.createElement)(i||"div",{style:n,context:o},e)},ce=(0,s.C)(Xt,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},r.memo((function(t){var e=me("useWindowScroll"),i=me("topItemsIndexes").length>0,s=me("customScrollParent"),n=s||e?ae:le;return r.createElement(s||e?ge:ve,l({},t),r.createElement(n,null,r.createElement(ne,null),r.createElement(Qt,null),r.createElement(re,null)),i&&r.createElement(ue,null,r.createElement(Qt,{showTopList:!0})))}))),de=ce.Component,fe=ce.usePublisher,me=ce.useEmitterValue,pe=ce.useEmitter,ve=oe({usePublisher:fe,useEmitterValue:me,useEmitter:pe}),ge=he({usePublisher:fe,useEmitterValue:me,useEmitter:pe}),be={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},we={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Se=Math.round,ye=Math.ceil,xe=Math.floor,Ce=Math.min,Me=Math.max;function _e(t,e){return Array.from({length:e-t+1}).map((function(e,i){return{index:i+t}}))}function Te(t,e){return t&&t.column===e.column&&t.row===e.row}var ze=n.By((function(t){var e=t[0],i=e.overscan,s=e.visibleRange,r=e.listBoundary,o=t[1],h=o.scrollTop,a=o.viewportHeight,u=o.scrollBy,c=o.scrollTo,d=o.smoothScrollTargetReached,f=o.scrollContainerState,m=t[2],p=t[3],v=t[4],g=v.propsReady,b=v.didMount,w=t[5],S=w.windowViewportRect,y=w.windowScrollTo,x=w.useWindowScroll,C=w.customScrollParent,M=w.windowScrollContainerState,_=t[6],T=n.P0(0),z=n.P0(0),I=n.P0(be),E=n.P0({height:0,width:0}),k=n.P0({height:0,width:0}),R=n.Vw(),B=n.Vw(),P=n.P0(0),O=n.P0({row:0,column:0});n.$j(n.zG(b,n.Mm(z),n.hX((function(t){return 0!==t[1]})),n.UI((function(t){return{items:_e(0,t[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}}))),I),n.$j(n.zG(n.aj(n.Ho(T),s,n.Ho(O,Te),n.Ho(k,(function(t,e){return t&&t.width===e.width&&t.height===e.height}))),n.Mm(E),n.UI((function(t){var e=t[0],i=e[0],s=e[1],n=s[0],r=s[1],o=e[2],h=e[3],l=t[1],a=o.row,u=h.height,c=h.width,d=l.width;if(0===i||0===d)return be;if(0===c)return we;var f=ke(d,c,o.column),m=f*xe((n+a)/(u+a)),p=f*ye((r+a)/(u+a))-1;p=Me(0,Ce(i-1,p));var v=_e(m=Ce(p,Me(0,m)),p),g=Ie(l,o,h,v),b=g.top,w=g.bottom,S=ye(i/f);return{items:v,offsetTop:b,offsetBottom:S*u+(S-1)*a-w,top:b,bottom:w,itemHeight:u,itemWidth:c}}))),I),n.$j(n.zG(E,n.UI((function(t){return t.height}))),a),n.$j(n.zG(n.aj(E,k,I,O),n.UI((function(t){var e=Ie(t[0],t[3],t[1],t[2].items);return[e.top,e.bottom]})),n.xb(vt)),r);var H=n.Er(n.zG(n.Ho(I),n.hX((function(t){return t.items.length>0})),n.Mm(T),n.hX((function(t){var e=t[0].items;return e[e.length-1].index===t[1]-1})),n.UI((function(t){return t[1]-1})),n.xb())),W=n.Er(n.zG(n.Ho(I),n.hX((function(t){var e=t.items;return e.length>0&&0===e[0].index})),n.hZ(0),n.xb())),V=n.Er(n.zG(n.Ho(I),n.hX((function(t){return t.items.length>0})),n.UI((function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}})),n.xb(gt)));n.$j(V,p.scrollSeekRangeChanged),n.$j(n.zG(R,n.Mm(E,k,T,O),n.UI((function(t){var e=t[1],i=t[2],s=t[3],n=t[4],r=rt(t[0]),o=r.align,h=r.behavior,l=r.offset,a=r.index;"LAST"===a&&(a=s-1);var u=Ee(e,n,i,a=Me(0,a,Ce(s-1,a)));return"end"===o?u=Se(u-e.height+i.height):"center"===o&&(u=Se(u-e.height/2+i.height/2)),l&&(u+=l),{top:u,behavior:h}}))),c);var L=n.o3(n.zG(I,n.UI((function(t){return t.offsetBottom+t.bottom}))),0);return n.$j(n.zG(S,n.UI((function(t){return{width:t.visibleWidth,height:t.visibleHeight}}))),E),l({totalCount:T,viewportDimensions:E,itemDimensions:k,scrollTop:h,scrollHeight:B,overscan:i,scrollBy:u,scrollTo:c,scrollToIndex:R,smoothScrollTargetReached:d,windowViewportRect:S,windowScrollTo:y,useWindowScroll:x,customScrollParent:C,windowScrollContainerState:M,deviation:P,scrollContainerState:f,initialItemCount:z,gap:O},p,{gridState:I,totalListHeight:L},m,{startReached:W,endReached:H,rangeChanged:V,propsReady:g},_)}),n.Tc(St,M,at,Tt,ut,Ot,g));function Ie(t,e,i,s){var n=i.height;return void 0===n||0===s.length?{top:0,bottom:0}:{top:Ee(t,e,i,s[0].index),bottom:Ee(t,e,i,s[s.length-1].index)+n}}function Ee(t,e,i,s){var n=ke(t.width,i.width,e.column),r=xe(s/n),o=r*i.height+Me(0,r-1)*e.row;return o>0?o+e.row:o}function ke(t,e,i){return Me(1,xe((t+i)/(e+i)))}var Re=["placeholder"],Be=n.By((function(){var t=n.P0((function(t){return"Item "+t})),e=n.P0({}),i=n.P0(null),s=n.P0("virtuoso-grid-item"),r=n.P0("virtuoso-grid-list"),o=n.P0(Yt),h=n.P0(n.ZT),l=function(t,i){return void 0===i&&(i=null),n.o3(n.zG(e,n.UI((function(e){return e[t]})),n.xb()),i)};return{context:i,itemContent:t,components:e,computeItemKey:o,itemClassName:s,listClassName:r,scrollerRef:h,ListComponent:l("List","div"),ItemComponent:l("Item","div"),ScrollerComponent:l("Scroller","div"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder","div")}})),Pe=n.By((function(t){var e=t[0],i=t[1],s={item:Zt(i.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:n.Vw(),ScrollContainer:n.Vw(),ListContainer:n.Vw(),emptyComponent:n.Vw(),scrollSeek:n.Vw()};function r(t,e,s){n.$j(n.zG(t,n.Mm(i.components),n.UI((function(t){var i,n=t[0],r=t[1];return h.warn("react-virtuoso: "+s+" property is deprecated. Pass components."+e+" instead."),l({},r,((i={})[e]=n,i))}))),i.components)}return n.Ld(s.scrollSeek,(function(t){var s=t.placeholder,r=a(t,Re);h.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),n.nY(i.components,l({},n.NA(i.components),{ScrollSeekPlaceholder:s})),n.nY(e.scrollSeekConfiguration,r)})),r(s.ItemContainer,"Item","ItemContainer"),r(s.ListContainer,"List","ListContainer"),r(s.ScrollContainer,"Scroller","ScrollContainer"),l({},e,i,s)}),n.Tc(ze,Be)),Oe=r.memo((function(){var t=Ne("gridState"),e=Ne("listClassName"),i=Ne("itemClassName"),s=Ne("itemContent"),n=Ne("computeItemKey"),o=Ne("isSeeking"),h=Le("scrollHeight"),a=Ne("ItemComponent"),u=Ne("ListComponent"),c=Ne("ScrollSeekPlaceholder"),d=Ne("context"),f=Le("itemDimensions"),m=Le("gap"),p=Ne("log"),v=w((function(t){h(t.parentElement.parentElement.scrollHeight);var e=t.firstChild;e&&f(e.getBoundingClientRect()),m({row:De("row-gap",getComputedStyle(t).rowGap,p),column:De("column-gap",getComputedStyle(t).columnGap,p)})}));return(0,r.createElement)(u,l({ref:v,className:e},se(u,d),{style:{paddingTop:t.offsetTop,paddingBottom:t.offsetBottom}}),t.items.map((function(e){var h=n(e.index);return o?(0,r.createElement)(c,l({key:h},se(c,d),{index:e.index,height:t.itemHeight,width:t.itemWidth})):(0,r.createElement)(a,l({},se(a,d),{className:i,"data-index":e.index,key:h}),s(e.index,d))})))})),He=function(t){var e=t.children,i=Le("viewportDimensions"),s=w((function(t){i(t.getBoundingClientRect())}));return r.createElement("div",{style:ee,ref:s},e)},We=function(t){var e=t.children,i=$t(Le("windowViewportRect"),Ne("customScrollParent"));return r.createElement("div",{ref:i,style:ee},e)},Ve=(0,s.C)(Pe,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},r.memo((function(t){var e=l({},t),i=Ne("useWindowScroll"),s=Ne("customScrollParent"),n=s||i?We:He;return r.createElement(s||i?Fe:$e,l({},e),r.createElement(n,null,r.createElement(Oe,null)))}))),Le=(Ve.Component,Ve.usePublisher),Ne=Ve.useEmitterValue,je=Ve.useEmitter,$e=oe({usePublisher:Le,useEmitterValue:Ne,useEmitter:je}),Fe=he({usePublisher:Le,useEmitterValue:Ne,useEmitter:je});function De(t,e,i){return"normal"===e||null!=e&&e.endsWith("px")||i(t+" was not resolved to pixel value correctly",e,f.WARN),"normal"===e?0:parseInt(null!=e?e:"0",10)}var Ae=n.By((function(){var t=n.P0((function(t){return r.createElement("td",null,"Item $",t)})),e=n.P0(null),i=n.P0(null),s=n.P0(null),o=n.P0({}),h=n.P0(Yt),l=n.P0(n.ZT),a=function(t,e){return void 0===e&&(e=null),n.o3(n.zG(o,n.UI((function(e){return e[t]})),n.xb()),e)};return{context:e,itemContent:t,fixedHeaderContent:i,fixedFooterContent:s,components:o,computeItemKey:h,scrollerRef:l,TableComponent:a("Table","table"),TableHeadComponent:a("TableHead","thead"),TableFooterComponent:a("TableFoot","tfoot"),TableBodyComponent:a("TableBody","tbody"),TableRowComponent:a("TableRow","tr"),ScrollerComponent:a("Scroller","div"),EmptyPlaceholder:a("EmptyPlaceholder"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder"),FillerRow:a("FillerRow")}})),Ue=n.By((function(t){return l({},t[0],t[1])}),n.Tc(Nt,Ae)),Ye=function(t){return r.createElement("tr",null,r.createElement("td",{style:{height:t.height}}))},Ge=function(t){return r.createElement("tr",null,r.createElement("td",{style:{height:t.height,padding:0,border:0}}))},Ze=r.memo((function(){var t=Qe("listState"),e=qe("sizeRanges"),i=Qe("useWindowScroll"),s=Qe("customScrollParent"),n=qe("windowScrollContainerState"),o=qe("scrollContainerState"),h=s||i?n:o,a=Qe("itemContent"),u=Qe("trackItemSizes"),c=S(e,Qe("itemSize"),u,h,Qe("log"),void 0,s),d=c.callbackRef,f=c.ref,m=r.useState(0),p=m[0],v=m[1];ti("deviation",(function(t){p!==t&&(f.current.style.marginTop=t+"px",v(t))}));var g=Qe("EmptyPlaceholder"),b=Qe("ScrollSeekPlaceholder")||Ye,w=Qe("FillerRow")||Ge,y=Qe("TableBodyComponent"),x=Qe("TableRowComponent"),C=Qe("computeItemKey"),M=Qe("isSeeking"),_=Qe("paddingTopAddition"),T=Qe("firstItemIndex"),z=Qe("statefulTotalCount"),I=Qe("context");if(0===z&&g)return(0,r.createElement)(g,se(g,I));var E=t.offsetTop+_+p,k=t.offsetBottom,R=E>0?r.createElement(w,{height:E,key:"padding-top"}):null,B=k>0?r.createElement(w,{height:k,key:"padding-bottom"}):null,P=t.items.map((function(t){var e=t.originalIndex,i=C(e+T,t.data,I);return M?(0,r.createElement)(b,l({},se(b,I),{key:i,index:t.index,height:t.size,type:t.type||"item"})):(0,r.createElement)(x,l({},se(x,I),{key:i,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:{overflowAnchor:"none"}}),a(t.index,t.data,I))}));return(0,r.createElement)(y,l({ref:d,"data-test-id":"virtuoso-item-list"},se(y,I)),[R].concat(P,[B]))})),Xe=function(t){var e=t.children,i=(0,r.useContext)(Ft),s=qe("viewportHeight"),o=qe("fixedItemHeight"),h=w(n.qC(s,(function(t){return y(t,"height")})));return r.useEffect((function(){i&&(s(i.viewportHeight),o(i.itemHeight))}),[i,s,o]),r.createElement("div",{style:ee,ref:h,"data-viewport-type":"element"},e)},Je=function(t){var e=t.children,i=(0,r.useContext)(Ft),s=qe("windowViewportRect"),n=qe("fixedItemHeight"),o=Qe("customScrollParent"),h=$t(s,o);return r.useEffect((function(){i&&(n(i.itemHeight),s({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:100}))}),[i,s,n]),r.createElement("div",{ref:h,style:ee,"data-viewport-type":"window"},e)},Ke=(0,s.C)(Ue,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},r.memo((function(t){var e=Qe("useWindowScroll"),i=Qe("customScrollParent"),s=qe("fixedHeaderHeight"),o=qe("fixedFooterHeight"),h=Qe("fixedHeaderContent"),a=Qe("fixedFooterContent"),u=Qe("context"),c=w(n.qC(s,(function(t){return y(t,"height")}))),d=w(n.qC(o,(function(t){return y(t,"height")}))),f=i||e?ii:ei,m=i||e?Je:Xe,p=Qe("TableComponent"),v=Qe("TableHeadComponent"),g=Qe("TableFooterComponent"),b=h?r.createElement(v,l({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:c},se(v,u)),h()):null,S=a?r.createElement(g,l({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:d},se(g,u)),a()):null;return r.createElement(f,l({},t),r.createElement(m,null,r.createElement(p,l({style:{borderSpacing:0}},se(p,u)),[b,r.createElement(Ze,{key:"TableBody"}),S])))}))),qe=(Ke.Component,Ke.usePublisher),Qe=Ke.useEmitterValue,ti=Ke.useEmitter,ei=oe({usePublisher:qe,useEmitterValue:Qe,useEmitter:ti}),ii=he({usePublisher:qe,useEmitterValue:Qe,useEmitter:ti}),si=de,ni=de},"../../../node_modules/react/cjs/react.production.min.js":(t,e)=>{var i=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),l=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,v={};function g(t,e,i){this.props=t,this.context=e,this.refs=v,this.updater=i||m}function b(){}function w(t,e,i){this.props=t,this.context=e,this.refs=v,this.updater=i||m}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=g.prototype;var S=w.prototype=new b;S.constructor=w,p(S,g.prototype),S.isPureReactComponent=!0;var y=Array.isArray,x=Object.prototype.hasOwnProperty,C={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function _(t,e,s){var n,r={},o=null,h=null;if(null!=e)for(n in void 0!==e.ref&&(h=e.ref),void 0!==e.key&&(o=""+e.key),e)x.call(e,n)&&!M.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(1===l)r.children=s;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:i,type:t,key:o,ref:h,props:r,_owner:C.current}}function T(t){return"object"==typeof t&&null!==t&&t.$$typeof===i}var z=/\/+/g;function I(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function E(t,e,n,r,o){var h=typeof t;"undefined"!==h&&"boolean"!==h||(t=null);var l=!1;if(null===t)l=!0;else switch(h){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=t),t=""===r?"."+I(l,0):r,y(o)?(n="",null!=t&&(n=t.replace(z,"$&/")+"/"),E(o,e,n,"",(function(t){return t}))):null!=o&&(T(o)&&(o=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(z,"$&/")+"/")+t)),e.push(o)),1;if(l=0,r=""===r?".":r+":",y(t))for(var a=0;a<t.length;a++){var u=r+I(h=t[a],a);l+=E(h,e,n,u,o)}else if(u=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"==typeof u)for(t=u.call(t),a=0;!(h=t.next()).done;)l+=E(h=h.value,e,n,u=r+I(h,a++),o);else if("object"===h)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function k(t,e,i){if(null==t)return t;var s=[],n=0;return E(t,s,"","",(function(t){return e.call(i,t,n++)})),s}function R(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var B={current:null},P={transition:null},O={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:P,ReactCurrentOwner:C};e.Children={map:k,forEach:function(t,e,i){k(t,(function(){e.apply(this,arguments)}),i)},count:function(t){var e=0;return k(t,(function(){e++})),e},toArray:function(t){return k(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=g,e.Fragment=n,e.Profiler=o,e.PureComponent=w,e.StrictMode=r,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.cloneElement=function(t,e,s){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=p({},t.props),r=t.key,o=t.ref,h=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,h=C.current),void 0!==e.key&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)x.call(e,a)&&!M.hasOwnProperty(a)&&(n[a]=void 0===e[a]&&void 0!==l?l[a]:e[a])}var a=arguments.length-2;if(1===a)n.children=s;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:i,type:t.type,key:r,ref:o,props:n,_owner:h}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:h,_context:t},t.Consumer=t},e.createElement=_,e.createFactory=function(t){var e=_.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:a,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:R}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=P.transition;P.transition={};try{t()}finally{P.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return B.current.useCallback(t,e)},e.useContext=function(t){return B.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return B.current.useDeferredValue(t)},e.useEffect=function(t,e){return B.current.useEffect(t,e)},e.useId=function(){return B.current.useId()},e.useImperativeHandle=function(t,e,i){return B.current.useImperativeHandle(t,e,i)},e.useInsertionEffect=function(t,e){return B.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return B.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return B.current.useMemo(t,e)},e.useReducer=function(t,e,i){return B.current.useReducer(t,e,i)},e.useRef=function(t){return B.current.useRef(t)},e.useState=function(t){return B.current.useState(t)},e.useSyncExternalStore=function(t,e,i){return B.current.useSyncExternalStore(t,e,i)},e.useTransition=function(){return B.current.useTransition()},e.version="18.2.0"},"../../../node_modules/react/index.js":(t,e,i)=>{t.exports=i("../../../node_modules/react/cjs/react.production.min.js")},"../../../node_modules/lightweight-charts/dist/lightweight-charts.production.mjs":(t,e,i)=>{i.d(e,{C2:()=>yn,Mr:()=>Bi,SP:()=>d,TD:()=>f,rM:()=>lt});var s=i("../../../node_modules/fancy-canvas/index.mjs");const n={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},r={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},o={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},h={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},l={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},a={color:"#26a69a",base:0},u={color:"#2196f3"},c={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var d,f,m;function p(t,e){const i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function v(t,e,i,s){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(i,e+n),t.lineTo(s,e+n),t.stroke()}function g(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function b(t){if(void 0===t)throw new Error("Value is undefined");return t}function w(t){if(null===t)throw new Error("Value is null");return t}function S(t){return w(b(t))}(m=d||(d={}))[m.Simple=0]="Simple",m[m.WithSteps=1]="WithSteps",m[m.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(f||(f={}));const y={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function x(t){return t<0?0:t>255?255:Math.round(t)||0}function C(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const M=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,_=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,T=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,z=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function I(t){(t=t.toLowerCase())in y&&(t=y[t]);{const e=z.exec(t)||T.exec(t);if(e)return[x(parseInt(e[1],10)),x(parseInt(e[2],10)),x(parseInt(e[3],10)),C(e.length<5?1:parseFloat(e[4]))]}{const e=_.exec(t);if(e)return[x(parseInt(e[1],16)),x(parseInt(e[2],16)),x(parseInt(e[3],16)),1]}{const e=M.exec(t);if(e)return[x(17*parseInt(e[1],16)),x(17*parseInt(e[2],16)),x(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function E(t){const e=I(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:(i=e,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")};var i}class k{constructor(){this.h=[]}l(t,e,i){const s={o:t,_:e,u:!0===i};this.h.push(s)}v(t){const e=this.h.findIndex((e=>t===e.o));e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter((e=>e._!==t))}m(t,e,i){const s=[...this.h];this.h=this.h.filter((t=>!t.u)),s.forEach((s=>s.o(t,e,i)))}M(){return this.h.length>0}S(){this.h=[]}}function R(t,...e){for(const i of e)for(const e in i)void 0!==i[e]&&("object"!=typeof i[e]||void 0===t[e]||Array.isArray(i[e])?t[e]=i[e]:R(t[e],i[e]));return t}function B(t){return"number"==typeof t&&isFinite(t)}function P(t){return"number"==typeof t&&t%1==0}function O(t){return"string"==typeof t}function H(t){return"boolean"==typeof t}function W(t){const e=t;if(!e||"object"!=typeof e)return e;let i,s,n;for(s in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(n=e[s],i[s]=n&&"object"==typeof n?W(n):n);return i}function V(t){return null!==t}function L(t){return null===t?void 0:t}const N="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function j(t,e,i){return void 0===e&&(e=N),`${i=void 0!==i?`${i} `:""}${t}px ${e}`}class ${constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",B:0,V:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=j(e,i),t.L=2.5/12*e,t.B=t.L,t.V=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class F{constructor(){this.Y=[]}X(t){this.Y=t}K(t,e,i){this.Y.forEach((s=>{s.K(t,e,i)}))}}class D{K(t,e,i){t.useBitmapCoordinateSpace((t=>this.Z(t,e,i)))}}class A extends D{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.G||null===this.G.tt)return;const s=this.G.tt,n=this.G,r=Math.max(1,Math.floor(e))%2/2,o=o=>{t.beginPath();for(let h=s.to-1;h>=s.from;--h){const s=n.it[h],l=Math.round(s.nt*e)+r,a=s.st*i,u=o*i+r;t.moveTo(l,a),t.arc(l,a,u,0,2*Math.PI)}t.fill()};n.et>0&&(t.fillStyle=n.rt,o(n.ht+n.et)),t.fillStyle=n.lt,o(n.ht)}}function U(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const Y={from:0,to:1};class G{constructor(t,e){this.ut=new F,this.ct=[],this.dt=[],this.ft=!0,this.F=t,this.vt=e,this.ut.X(this.ct)}bt(t){const e=this.F.wt();e.length!==this.ct.length&&(this.dt=e.map(U),this.ct=this.dt.map((t=>{const e=new A;return e.J(t),e})),this.ut.X(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const t=2===this.vt.W().mode,e=this.F.wt(),i=this.vt.xt(),s=this.F.St();e.forEach(((e,n)=>{var r;const o=this.dt[n],h=e.kt(i);if(t||null===h||!e.yt())return void(o.tt=null);const l=w(e.Ct());o.lt=h.Tt,o.ht=h.ht,o.et=h.Pt,o.it[0]._t=h._t,o.it[0].st=e.Dt().Rt(h._t,l.Ot),o.rt=null!==(r=h.At)&&void 0!==r?r:this.F.Bt(o.it[0].st/e.Dt().Vt()),o.it[0].ot=i,o.it[0].nt=s.It(i),o.tt=Y}))}}class Z extends D{constructor(t){super(),this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;const n=this.zt.Lt.yt,r=this.zt.Et.yt;if(!n&&!r)return;const o=Math.round(this.zt.nt*i),h=Math.round(this.zt.st*s);t.lineCap="butt",n&&o>=0&&(t.lineWidth=Math.floor(this.zt.Lt.et*i),t.strokeStyle=this.zt.Lt.O,t.fillStyle=this.zt.Lt.O,p(t,this.zt.Lt.Nt),function(t,e,i,s){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(e+n,0),t.lineTo(e+n,s),t.stroke()}(t,o,0,e.height)),r&&h>=0&&(t.lineWidth=Math.floor(this.zt.Et.et*s),t.strokeStyle=this.zt.Et.O,t.fillStyle=this.zt.Et.O,p(t,this.zt.Et.Nt),v(t,h,0,e.width))}}class X{constructor(t){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,O:"",yt:!1},Et:{et:1,Nt:0,O:"",yt:!1},nt:0,st:0},this.Wt=new Z(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.yt(),e=w(this.jt.Ht()),i=e.$t().W().crosshair,s=this.Ft;if(2===i.mode)return s.Et.yt=!1,void(s.Lt.yt=!1);s.Et.yt=t&&this.jt.Ut(e),s.Lt.yt=t&&this.jt.qt(),s.Et.et=i.horzLine.width,s.Et.Nt=i.horzLine.style,s.Et.O=i.horzLine.color,s.Lt.et=i.vertLine.width,s.Lt.Nt=i.vertLine.style,s.Lt.O=i.vertLine.color,s.nt=this.jt.Yt(),s.st=this.jt.Xt()}}function J(t,e,i,s,n,r){t.fillRect(e+r,i,s-2*r,r),t.fillRect(e+r,i+n-r,s-2*r,r),t.fillRect(e,i,r,n),t.fillRect(e+s-r,i,r,n)}function K(t,e,i,s,n,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,i,s,n),t.restore()}function q(t,e,i,s,n,r){t.beginPath(),t.roundRect?t.roundRect(e,i,s,n,r):(t.lineTo(e+s-r[1],i),0!==r[1]&&t.arcTo(e+s,i,e+s,i+r[1],r[1]),t.lineTo(e+s,i+n-r[2]),0!==r[2]&&t.arcTo(e+s,i+n,e+s-r[2],i+n,r[2]),t.lineTo(e+r[3],i+n),0!==r[3]&&t.arcTo(e,i+n,e,i+n-r[3],r[3]),t.lineTo(e,i+r[0]),0!==r[0]&&t.arcTo(e,i,e+r[0],i,r[0]))}function Q(t,e,i,s,n,r,o=0,h=[0,0,0,0],l=""){if(t.save(),!o||!l||l===r)return q(t,e,i,s,n,h),t.fillStyle=r,t.fill(),void t.restore();const a=o/2;var u;q(t,e+a,i+a,s-o,n-o,(u=-a,h.map((t=>0===t?t:t+u)))),"transparent"!==r&&(t.fillStyle=r,t.fill()),"transparent"!==l&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function tt(t,e,i,s,n,r,o){t.save(),t.globalCompositeOperation="copy";const h=t.createLinearGradient(0,0,0,n);h.addColorStop(0,r),h.addColorStop(1,o),t.fillStyle=h,t.fillRect(e,i,s,n),t.restore()}class et{constructor(t,e){this.J(t,e)}J(t,e){this.zt=t,this.Kt=e}Vt(t,e){return this.zt.yt?t.P+t.L+t.B:0}K(t,e,i,s){if(!this.zt.yt||0===this.zt.Zt.length)return;const n=this.zt.O,r=this.Kt.t,o=t.useBitmapCoordinateSpace((t=>{const o=t.context;o.font=e.R;const h=this.Gt(t,e,i,s),l=h.Jt,a=(t,e)=>{h.Qt?Q(o,l.ti,l.ii,l.ni,l.si,t,l.ei,[l.ht,0,0,l.ht],e):Q(o,l.ri,l.ii,l.ni,l.si,t,l.ei,[0,l.ht,l.ht,0],e)};return a(r,"transparent"),this.zt.hi&&(o.fillStyle=n,o.fillRect(l.ri,l.li,l.ai-l.ri,l.oi)),a("transparent",r),this.zt._i&&(o.fillStyle=e.A,o.fillRect(h.Qt?l.ui-l.ei:0,l.ii,l.ei,l.ci-l.ii)),h}));t.useMediaCoordinateSpace((({context:t})=>{const i=o.di;t.font=e.R,t.textAlign=o.Qt?"right":"left",t.textBaseline="middle",t.fillStyle=n,t.fillText(this.zt.Zt,i.fi,(i.ii+i.ci)/2+i.vi)}))}Gt(t,e,i,s){var n;const{context:r,bitmapSize:o,mediaSize:h,horizontalPixelRatio:l,verticalPixelRatio:a}=t,u=this.zt.hi||!this.zt.pi?e.T:0,c=this.zt.mi?e.C:0,d=e.L+this.Kt.bi,f=e.B+this.Kt.wi,m=e.V,p=e.I,v=this.zt.Zt,g=e.P,b=i.gi(r,v),w=Math.ceil(i.Mi(r,v)),S=g+d+f,y=e.C+m+p+w+u,x=Math.max(1,Math.floor(a));let C=Math.round(S*a);C%2!=x%2&&(C+=1);const M=c>0?Math.max(1,Math.floor(c*l)):0,_=Math.round(y*l),T=Math.round(u*l),z=null!==(n=this.Kt.xi)&&void 0!==n?n:this.Kt.Si,I=Math.round(z*a)-Math.floor(.5*a),E=Math.floor(I+x/2-C/2),k=E+C,R="right"===s,B=R?h.width-c:c,P=R?o.width-M:M;let O,H,W;return R?(O=P-_,H=P-T,W=B-u-m-c):(O=P+_,H=P+T,W=B+u+m),{Qt:R,Jt:{ii:E,li:I,ci:k,ni:_,si:C,ht:2*l,ei:M,ti:O,ri:P,ai:H,oi:x,ui:o.width},di:{ii:E/a,ci:k/a,fi:W,vi:b}}}}class it{constructor(t){this.ki={Si:0,t:"#000",wi:0,bi:0},this.yi={Zt:"",yt:!1,hi:!0,pi:!1,At:"",O:"#FFF",_i:!1,mi:!1},this.Ci={Zt:"",yt:!1,hi:!1,pi:!0,At:"",O:"#FFF",_i:!0,mi:!0},this.ft=!0,this.Ti=new(t||et)(this.yi,this.ki),this.Pi=new(t||et)(this.Ci,this.ki)}Zt(){return this.Ri(),this.yi.Zt}Si(){return this.Ri(),this.ki.Si}bt(){this.ft=!0}Vt(t,e=!1){return Math.max(this.Ti.Vt(t,e),this.Pi.Vt(t,e))}Di(){return this.ki.xi||0}Oi(t){this.ki.xi=t}Ai(){return this.Ri(),this.yi.yt||this.Ci.yt}Bi(){return this.Ri(),this.yi.yt}gt(t){return this.Ri(),this.yi.hi=this.yi.hi&&t.W().ticksVisible,this.Ci.hi=this.Ci.hi&&t.W().ticksVisible,this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Ti}Vi(){return this.Ri(),this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Pi}Ri(){this.ft&&(this.yi.hi=!0,this.Ci.hi=!1,this.Ii(this.yi,this.Ci,this.ki))}}class st extends it{constructor(t,e,i){super(),this.jt=t,this.zi=e,this.Li=i}Ii(t,e,i){if(t.yt=!1,2===this.jt.W().mode)return;const s=this.jt.W().horzLine;if(!s.labelVisible)return;const n=this.zi.Ct();if(!this.jt.yt()||this.zi.Ei()||null===n)return;const r=E(s.labelBackgroundColor);i.t=r.t,t.O=r.i;const o=2/12*this.zi.P();i.bi=o,i.wi=o;const h=this.Li(this.zi);i.Si=h.Si,t.Zt=this.zi.Ni(h._t,n),t.yt=!0}}const nt=/[1-9]/g;class rt{constructor(){this.zt=null}J(t){this.zt=t}K(t,e){if(null===this.zt||!1===this.zt.yt||0===this.zt.Zt.length)return;const i=t.useMediaCoordinateSpace((({context:t})=>(t.font=e.R,Math.round(e.Fi.Mi(t,w(this.zt).Zt,nt)))));if(i<=0)return;const s=e.Wi,n=i+2*s,r=n/2,o=this.zt.ji;let h=this.zt.Si,l=Math.floor(h-r)+.5;l<0?(h+=Math.abs(0-l),l=Math.floor(h-r)+.5):l+n>o&&(h-=Math.abs(o-(l+n)),l=Math.floor(h-r)+.5);const a=l+n,u=Math.ceil(0+e.C+e.T+e.L+e.P+e.B);t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{const n=w(this.zt);t.fillStyle=n.t;const r=Math.round(l*i),o=Math.round(0*s),h=Math.round(a*i),c=Math.round(u*s),d=Math.round(2*i);if(t.beginPath(),t.moveTo(r,o),t.lineTo(r,c-d),t.arcTo(r,c,r+d,c,d),t.lineTo(h-d,c),t.arcTo(h,c,h,c-d,d),t.lineTo(h,o),t.fill(),n.hi){const r=Math.round(n.Si*i),h=o,l=Math.round((h+e.T)*s);t.fillStyle=n.O;const a=Math.max(1,Math.floor(i)),u=Math.floor(.5*i);t.fillRect(r-u,h,a,l-h)}})),t.useMediaCoordinateSpace((({context:t})=>{const i=w(this.zt),n=0+e.C+e.T+e.L+e.P/2;t.font=e.R,t.textAlign="left",t.textBaseline="middle",t.fillStyle=i.O;const r=e.Fi.gi(t,"Apr0");t.translate(l+s,n+r),t.fillText(i.Zt,0,0)}))}}class ot{constructor(t,e,i){this.ft=!0,this.Wt=new rt,this.Ft={yt:!1,t:"#4c525e",O:"white",Zt:"",ji:0,Si:NaN,hi:!0},this.vt=t,this.Hi=e,this.Li=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const t=this.Ft;if(t.yt=!1,2===this.vt.W().mode)return;const e=this.vt.W().vertLine;if(!e.labelVisible)return;const i=this.Hi.St();if(i.Ei())return;t.ji=i.ji();const s=this.Li();if(null===s)return;t.Si=s.Si;const n=i.$i(this.vt.xt());t.Zt=i.Ui(w(n)),t.yt=!0;const r=E(e.labelBackgroundColor);t.t=r.t,t.O=r.i,t.hi=i.W().ticksVisible}}class ht{constructor(){this.qi=null,this.Yi=0}Xi(){return this.Yi}Ki(t){this.Yi=t}Dt(){return this.qi}Zi(t){this.qi=t}Gi(t){return[]}Ji(){return[]}yt(){return!0}}var lt;!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"}(lt||(lt={}));class at extends ht{constructor(t,e){super(),this.Qi=null,this.tn=NaN,this.nn=0,this.sn=!0,this.en=new Map,this.rn=!1,this.hn=NaN,this.ln=NaN,this.an=NaN,this.on=NaN,this.Hi=t,this._n=e,this.un=new G(t,this),this.cn=((t,e)=>i=>{const s=e(),n=t();if(i===w(this.Qi).dn())return{_t:n,Si:s};{const t=w(i.Ct());return{_t:i.fn(s,t),Si:s}}})((()=>this.tn),(()=>this.ln));const i=((t,e)=>()=>{const i=this.Hi.St().vn(t()),s=e();return i&&Number.isFinite(s)?{ot:i,Si:s}:null})((()=>this.nn),(()=>this.Yt()));this.pn=new ot(this,t,i),this.mn=new X(this)}W(){return this._n}bn(t,e){this.an=t,this.on=e}wn(){this.an=NaN,this.on=NaN}gn(){return this.an}Mn(){return this.on}xn(t,e,i){this.rn||(this.rn=!0),this.sn=!0,this.Sn(t,e,i)}xt(){return this.nn}Yt(){return this.hn}Xt(){return this.ln}yt(){return this.sn}kn(){this.sn=!1,this.yn(),this.tn=NaN,this.hn=NaN,this.ln=NaN,this.Qi=null,this.wn()}Cn(t){return null!==this.Qi?[this.mn,this.un]:[]}Ut(t){return t===this.Qi&&this._n.horzLine.visible}qt(){return this._n.vertLine.visible}Tn(t,e){this.sn&&this.Qi===t||this.en.clear();const i=[];return this.Qi===t&&i.push(this.Pn(this.en,e,this.cn)),i}Ji(){return this.sn?[this.pn]:[]}Ht(){return this.Qi}Rn(){this.mn.bt(),this.en.forEach((t=>t.bt())),this.pn.bt(),this.un.bt()}Dn(t){return t&&!t.dn().Ei()?t.dn():null}Sn(t,e,i){this.On(t,e,i)&&this.Rn()}On(t,e,i){const s=this.hn,n=this.ln,r=this.tn,o=this.nn,h=this.Qi,l=this.Dn(i);this.nn=t,this.hn=isNaN(t)?NaN:this.Hi.St().It(t),this.Qi=i;const a=null!==l?l.Ct():null;return null!==l&&null!==a?(this.tn=e,this.ln=l.Rt(e,a)):(this.tn=NaN,this.ln=NaN),s!==this.hn||n!==this.ln||o!==this.nn||r!==this.tn||h!==this.Qi}yn(){const t=this.Hi.wt().map((t=>t.Bn().An())).filter(V),e=0===t.length?null:Math.max(...t);this.nn=null!==e?e:NaN}Pn(t,e,i){let s=t.get(e);return void 0===s&&(s=new st(this,e,i),t.set(e,s)),s}}function ut(t){return"left"===t||"right"===t}class ct{constructor(t){this.Vn=new Map,this.In=[],this.zn=t}Ln(t,e){const i=function(t,e){return void 0===t?e:{En:Math.max(t.En,e.En),Nn:t.Nn||e.Nn}}(this.Vn.get(t),e);this.Vn.set(t,i)}Fn(){return this.zn}Wn(t){const e=this.Vn.get(t);return void 0===e?{En:this.zn}:{En:Math.max(this.zn,e.En),Nn:e.Nn}}jn(){this.Hn(),this.In=[{$n:0}]}Un(t){this.Hn(),this.In=[{$n:1,Ot:t}]}qn(t){this.Yn(),this.In.push({$n:5,Ot:t})}Hn(){this.Yn(),this.In.push({$n:6})}Xn(){this.Hn(),this.In=[{$n:4}]}Kn(t){this.Hn(),this.In.push({$n:2,Ot:t})}Zn(t){this.Hn(),this.In.push({$n:3,Ot:t})}Gn(){return this.In}Jn(t){for(const e of t.In)this.Qn(e);this.zn=Math.max(this.zn,t.zn),t.Vn.forEach(((t,e)=>{this.Ln(e,t)}))}static ts(){return new ct(2)}static ns(){return new ct(3)}Qn(t){switch(t.$n){case 0:this.jn();break;case 1:this.Un(t.Ot);break;case 2:this.Kn(t.Ot);break;case 3:this.Zn(t.Ot);break;case 4:this.Xn();break;case 5:this.qn(t.Ot);break;case 6:this.Yn()}}Yn(){const t=this.In.findIndex((t=>5===t.$n));-1!==t&&this.In.splice(t,1)}}function dt(t,e){if(!B(t))return"n/a";if(!P(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}class ft{constructor(t,e){if(e||(e=1),B(t)&&P(t)||(t=100),t<0)throw new TypeError("invalid base");this.zi=t,this.ss=e,this.es()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.rs(t)}es(){if(this.hs=0,this.zi>0&&this.ss>0){let t=this.zi;for(;t>1;)t/=10,this.hs++}}rs(t){const e=this.zi/this.ss;let i=Math.floor(t),s="";const n=void 0!==this.hs?this.hs:NaN;if(e>1){let r=+(Math.round(t*e)-i*e).toFixed(this.hs);r>=e&&(r-=e,i+=1),s="."+dt(+r.toFixed(this.hs)*this.ss,n)}else i=Math.round(i*e)/e,n>0&&(s="."+dt(0,n));return i.toFixed(0)+s}}class mt extends ft{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class pt{constructor(t){this.ls=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.os(t):t<999995?e+this.os(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.os(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.os(t/1e9)+"B")}os(t){let e;const i=Math.pow(10,this.ls);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.ls).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((t,e)=>e))}}function vt(t,e,i,s,n,r,o){if(0===e.length||s.from>=e.length||s.to<=0)return;const{context:h,horizontalPixelRatio:l,verticalPixelRatio:a}=t,u=e[s.from];let c=r(t,u),d=u;if(s.to-s.from<2){const e=n/2;h.beginPath();const i={nt:u.nt-e,st:u.st},s={nt:u.nt+e,st:u.st};h.moveTo(i.nt*l,i.st*a),h.lineTo(s.nt*l,s.st*a),o(t,c,i,s)}else{const n=(e,i)=>{o(t,c,d,i),h.beginPath(),c=e,d=i};let f=d;h.beginPath(),h.moveTo(u.nt*l,u.st*a);for(let o=s.from+1;o<s.to;++o){f=e[o];const s=r(t,f);switch(i){case 0:h.lineTo(f.nt*l,f.st*a);break;case 1:h.lineTo(f.nt*l,e[o-1].st*a),s!==c&&(n(s,f),h.lineTo(f.nt*l,e[o-1].st*a)),h.lineTo(f.nt*l,f.st*a);break;case 2:{const[t,i]=St(e,o-1,o);h.bezierCurveTo(t.nt*l,t.st*a,i.nt*l,i.st*a,f.nt*l,f.st*a);break}}1!==i&&s!==c&&(n(s,f),h.moveTo(f.nt*l,f.st*a))}(d!==f||d===f&&1===i)&&o(t,c,d,f)}}const gt=6;function bt(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function wt(t,e){return{nt:t.nt/e,st:t.st/e}}function St(t,e,i){const s=Math.max(0,e-1),n=Math.min(t.length-1,i+1);var r,o;return[(r=t[e],o=wt(bt(t[i],t[s]),gt),{nt:r.nt+o.nt,st:r.st+o.st}),bt(t[i],wt(bt(t[n],t[e]),gt))]}function yt(t,e,i,s,n){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:h}=e;r.lineTo(n.nt*o,t*h),r.lineTo(s.nt*o,t*h),r.closePath(),r.fillStyle=i,r.fill()}class xt extends D{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){var e;if(null===this.G)return;const{it:i,tt:s,_s:n,et:r,Nt:o,us:h}=this.G,l=null!==(e=this.G.cs)&&void 0!==e?e:this.G.ds?0:t.mediaSize.height;if(null===s)return;const a=t.context;a.lineCap="butt",a.lineJoin="round",a.lineWidth=r,p(a,o),a.lineWidth=1,vt(t,i,h,s,n,this.fs.bind(this),yt.bind(null,l))}}function Ct(t,e,i){return Math.min(Math.max(t,e),i)}function Mt(t,e,i){return e-t<=i}function _t(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Tt{vs(t,e){const i=this.ps,{bs:s,ws:n,gs:r,Ms:o,xs:h,cs:l}=e;if(void 0===this.Ss||void 0===i||i.bs!==s||i.ws!==n||i.gs!==r||i.Ms!==o||i.cs!==l||i.xs!==h){const i=t.context.createLinearGradient(0,0,0,h);if(i.addColorStop(0,s),null!=l){const e=Ct(l*t.verticalPixelRatio/h,0,1);i.addColorStop(e,n),i.addColorStop(e,r)}i.addColorStop(1,o),this.Ss=i,this.ps=e}return this.Ss}}class zt extends xt{constructor(){super(...arguments),this.ks=new Tt}fs(t,e){return this.ks.vs(t,{bs:e.ys,ws:"",gs:"",Ms:e.Cs,xs:t.bitmapSize.height})}}function It(t,e){const i=t.context;i.strokeStyle=e,i.stroke()}class Et extends D{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){if(null===this.G)return;const{it:e,tt:i,_s:s,us:n,et:r,Nt:o,Ts:h}=this.G;if(null===i)return;const l=t.context;l.lineCap="butt",l.lineWidth=r*t.verticalPixelRatio,p(l,o),l.lineJoin="round";const a=this.Ps.bind(this);void 0!==n&&vt(t,e,n,i,s,a,It),h&&function(t,e,i,s,n){const{horizontalPixelRatio:r,verticalPixelRatio:o,context:h}=t;let l=null;const a=Math.max(1,Math.floor(r))%2/2,u=i*o+a;for(let i=s.to-1;i>=s.from;--i){const s=e[i];if(s){const e=n(t,s);e!==l&&(h.beginPath(),null!==l&&h.fill(),h.fillStyle=e,l=e);const i=Math.round(s.nt*r)+a,c=s.st*o;h.moveTo(i,c),h.arc(i,c,u,0,2*Math.PI)}}h.fill()}(t,e,h,i,a)}}class kt extends Et{Ps(t,e){return e.lt}}function Rt(t,e,i,s,n=0,r=e.length){let o=r-n;for(;0<o;){const r=o>>1,h=n+r;s(e[h],i)===t?(n=h+1,o-=r+1):o=r}return n}const Bt=Rt.bind(null,!0),Pt=Rt.bind(null,!1);function Ot(t,e){return t.ot<e}function Ht(t,e){return e<t.ot}function Wt(t,e,i){const s=e.Rs(),n=e.ui(),r=Bt(t,s,Ot),o=Pt(t,n,Ht);if(!i)return{from:r,to:o};let h=r,l=o;return r>0&&r<t.length&&t[r].ot>=s&&(h=r-1),o>0&&o<t.length&&t[o-1].ot<=n&&(l=o+1),{from:h,to:l}}class Vt{constructor(t,e,i){this.Ds=!0,this.Os=!0,this.As=!0,this.Bs=[],this.Vs=null,this.Is=t,this.zs=e,this.Ls=i}bt(t){this.Ds=!0,"data"===t&&(this.Os=!0),"options"===t&&(this.As=!0)}gt(){return this.Is.yt()?(this.Es(),null===this.Vs?null:this.Ns):null}Fs(){this.Bs=this.Bs.map((t=>Object.assign(Object.assign({},t),this.Is.js().Ws(t.ot))))}Hs(){this.Vs=null}Es(){this.Os&&(this.$s(),this.Os=!1),this.As&&(this.Fs(),this.As=!1),this.Ds&&(this.Us(),this.Ds=!1)}Us(){const t=this.Is.Dt(),e=this.zs.St();if(this.Hs(),e.Ei()||t.Ei())return;const i=e.qs();if(null===i)return;if(0===this.Is.Bn().Ys())return;const s=this.Is.Ct();null!==s&&(this.Vs=Wt(this.Bs,i,this.Ls),this.Xs(t,e,s.Ot),this.Ks())}}class Lt extends Vt{constructor(t,e){super(t,e,!0)}Xs(t,e,i){e.Zs(this.Bs,L(this.Vs)),t.Gs(this.Bs,i,L(this.Vs))}Js(t,e){return{ot:t,_t:e,nt:NaN,st:NaN}}$s(){const t=this.Is.js();this.Bs=this.Is.Bn().Qs().map((e=>{const i=e.Ot[3];return this.te(e.ie,i,t)}))}}class Nt extends Lt{constructor(t,e){super(t,e),this.Ns=new F,this.ne=new zt,this.se=new kt,this.Ns.X([this.ne,this.se])}te(t,e,i){return Object.assign(Object.assign({},this.Js(t,e)),i.Ws(t))}Ks(){const t=this.Is.W();this.ne.J({us:t.lineType,it:this.Bs,Nt:t.lineStyle,et:t.lineWidth,cs:null,ds:t.invertFilledArea,tt:this.Vs,_s:this.zs.St().ee()}),this.se.J({us:t.lineVisible?t.lineType:void 0,it:this.Bs,Nt:t.lineStyle,et:t.lineWidth,tt:this.Vs,_s:this.zs.St().ee(),Ts:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class jt extends D{constructor(){super(...arguments),this.zt=null,this.re=0,this.he=0}J(t){this.zt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.Bn.length||null===this.zt.tt)return;this.re=this.le(e),this.re>=2&&Math.max(1,Math.floor(e))%2!=this.re%2&&this.re--,this.he=this.zt.ae?Math.min(this.re,Math.floor(e)):this.re;let s=null;const n=this.he<=this.re&&this.zt.ee>=Math.floor(1.5*e);for(let r=this.zt.tt.from;r<this.zt.tt.to;++r){const o=this.zt.Bn[r];s!==o.oe&&(t.fillStyle=o.oe,s=o.oe);const h=Math.floor(.5*this.he),l=Math.round(o.nt*e),a=l-h,u=this.he,c=a+u-1,d=Math.min(o._e,o.ue),f=Math.max(o._e,o.ue),m=Math.round(d*i)-h,p=Math.round(f*i)+h,v=Math.max(p-m,this.he);t.fillRect(a,m,u,v);const g=Math.ceil(1.5*this.re);if(n){if(this.zt.ce){const e=l-g;let s=Math.max(m,Math.round(o.de*i)-h),n=s+u-1;n>m+v-1&&(n=m+v-1,s=n-u+1),t.fillRect(e,s,a-e,n-s+1)}const e=l+g;let s=Math.max(m,Math.round(o.fe*i)-h),n=s+u-1;n>m+v-1&&(n=m+v-1,s=n-u+1),t.fillRect(c+1,s,e-c,n-s+1)}}}le(t){const e=Math.floor(t);return Math.max(e,Math.floor(function(t,e){return Math.floor(.3*t*e)}(w(this.zt).ee,t)))}}class $t extends Vt{constructor(t,e){super(t,e,!1)}Xs(t,e,i){e.Zs(this.Bs,L(this.Vs)),t.ve(this.Bs,i,L(this.Vs))}pe(t,e,i){return{ot:t,me:e.Ot[0],be:e.Ot[1],we:e.Ot[2],ge:e.Ot[3],nt:NaN,de:NaN,_e:NaN,ue:NaN,fe:NaN}}$s(){const t=this.Is.js();this.Bs=this.Is.Bn().Qs().map((e=>this.te(e.ie,e,t)))}}class Ft extends $t{constructor(){super(...arguments),this.Ns=new jt}te(t,e,i){return Object.assign(Object.assign({},this.pe(t,e,i)),i.Ws(t))}Ks(){const t=this.Is.W();this.Ns.J({Bn:this.Bs,ee:this.zs.St().ee(),ce:t.openVisible,ae:t.thinBars,tt:this.Vs})}}class Dt extends xt{constructor(){super(...arguments),this.ks=new Tt}fs(t,e){const i=this.G;return this.ks.vs(t,{bs:e.Me,ws:e.xe,gs:e.Se,Ms:e.ke,xs:t.bitmapSize.height,cs:i.cs})}}class At extends Et{constructor(){super(...arguments),this.ye=new Tt}Ps(t,e){const i=this.G;return this.ye.vs(t,{bs:e.Ce,ws:e.Ce,gs:e.Te,Ms:e.Te,xs:t.bitmapSize.height,cs:i.cs})}}class Ut extends Lt{constructor(t,e){super(t,e),this.Ns=new F,this.Pe=new Dt,this.Re=new At,this.Ns.X([this.Pe,this.Re])}te(t,e,i){return Object.assign(Object.assign({},this.Js(t,e)),i.Ws(t))}Ks(){const t=this.Is.Ct();if(null===t)return;const e=this.Is.W(),i=this.Is.Dt().Rt(e.baseValue.price,t.Ot),s=this.zs.St().ee();this.Pe.J({it:this.Bs,et:e.lineWidth,Nt:e.lineStyle,us:e.lineType,cs:i,ds:!1,tt:this.Vs,_s:s}),this.Re.J({it:this.Bs,et:e.lineWidth,Nt:e.lineStyle,us:e.lineVisible?e.lineType:void 0,Ts:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,cs:i,tt:this.Vs,_s:s})}}class Yt extends D{constructor(){super(...arguments),this.zt=null,this.re=0}J(t){this.zt=t}Z(t){if(null===this.zt||0===this.zt.Bn.length||null===this.zt.tt)return;const{horizontalPixelRatio:e}=t;this.re=function(t,e){if(t>=2.5&&t<=4)return Math.floor(3*e);const i=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*i*e),n=Math.floor(t*e),r=Math.min(s,n);return Math.max(Math.floor(e),r)}(this.zt.ee,e),this.re>=2&&Math.floor(e)%2!=this.re%2&&this.re--;const i=this.zt.Bn;this.zt.De&&this.Oe(t,i,this.zt.tt),this.zt._i&&this.Ae(t,i,this.zt.tt);const s=this.Be(e);(!this.zt._i||this.re>2*s)&&this.Ve(t,i,this.zt.tt)}Oe(t,e,i){if(null===this.zt)return;const{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t;let o="",h=Math.min(Math.floor(n),Math.floor(this.zt.ee*n));h=Math.max(Math.floor(n),Math.min(h,this.re));const l=Math.floor(.5*h);let a=null;for(let t=i.from;t<i.to;t++){const i=e[t];i.Ie!==o&&(s.fillStyle=i.Ie,o=i.Ie);const u=Math.round(Math.min(i.de,i.fe)*r),c=Math.round(Math.max(i.de,i.fe)*r),d=Math.round(i._e*r),f=Math.round(i.ue*r);let m=Math.round(n*i.nt)-l;const p=m+h-1;null!==a&&(m=Math.max(a+1,m),m=Math.min(m,p));const v=p-m+1;s.fillRect(m,d,v,u-d),s.fillRect(m,c+1,v,f-c),a=p}}Be(t){let e=Math.floor(1*t);this.re<=2*e&&(e=Math.floor(.5*(this.re-1)));const i=Math.max(Math.floor(t),e);return this.re<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}Ae(t,e,i){if(null===this.zt)return;const{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t;let o="";const h=this.Be(n);let l=null;for(let t=i.from;t<i.to;t++){const i=e[t];i.ze!==o&&(s.fillStyle=i.ze,o=i.ze);let a=Math.round(i.nt*n)-Math.floor(.5*this.re);const u=a+this.re-1,c=Math.round(Math.min(i.de,i.fe)*r),d=Math.round(Math.max(i.de,i.fe)*r);if(null!==l&&(a=Math.max(l+1,a),a=Math.min(a,u)),this.zt.ee*n>2*h)J(s,a,c,u-a+1,d-c+1,h);else{const t=u-a+1;s.fillRect(a,c,t,d-c+1)}l=u}}Ve(t,e,i){if(null===this.zt)return;const{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t;let o="";const h=this.Be(n);for(let t=i.from;t<i.to;t++){const i=e[t];let l=Math.round(Math.min(i.de,i.fe)*r),a=Math.round(Math.max(i.de,i.fe)*r),u=Math.round(i.nt*n)-Math.floor(.5*this.re),c=u+this.re-1;if(i.oe!==o){const t=i.oe;s.fillStyle=t,o=t}this.zt._i&&(u+=h,l+=h,c-=h,a-=h),l>a||s.fillRect(u,l,c-u+1,a-l+1)}}}class Gt extends $t{constructor(){super(...arguments),this.Ns=new Yt}te(t,e,i){return Object.assign(Object.assign({},this.pe(t,e,i)),i.Ws(t))}Ks(){const t=this.Is.W();this.Ns.J({Bn:this.Bs,ee:this.zs.St().ee(),De:t.wickVisible,_i:t.borderVisible,tt:this.Vs})}}class Zt{constructor(t,e){this.Le=t,this.zi=e}K(t,e,i){this.Le.draw(t,this.zi,e,i)}}class Xt extends Vt{constructor(t,e,i){super(t,e,!1),this.mn=i,this.Ns=new Zt(this.mn.renderer(),(e=>{const i=t.Ct();return null===i?null:t.Dt().Rt(e,i.Ot)}))}Ee(t){return this.mn.priceValueBuilder(t)}Ne(t){return this.mn.isWhitespace(t)}$s(){const t=this.Is.js();this.Bs=this.Is.Bn().Qs().map((e=>Object.assign(Object.assign({ot:e.ie,nt:NaN},t.Ws(e.ie)),{Fe:e.We})))}Xs(t,e){e.Zs(this.Bs,L(this.Vs))}Ks(){this.mn.update({bars:this.Bs.map(Jt),barSpacing:this.zs.St().ee(),visibleRange:this.Vs},this.Is.W())}}function Jt(t){return{x:t.nt,time:t.ot,originalData:t.Fe,barColor:t.oe}}class Kt extends D{constructor(){super(...arguments),this.zt=null,this.je=[]}J(t){this.zt=t,this.je=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return;this.je.length||this.He(e);const s=Math.max(1,Math.floor(i)),n=Math.round(this.zt.$e*i)-Math.floor(s/2),r=n+s;for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){const o=this.zt.it[e],h=this.je[e-this.zt.tt.from],l=Math.round(o.st*i);let a,u;t.fillStyle=o.oe,l<=n?(a=l,u=r):(a=n,u=l-Math.floor(s/2)+s),t.fillRect(h.Rs,a,h.ui-h.Rs+1,u-a)}}He(t){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return void(this.je=[]);const e=Math.ceil(this.zt.ee*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.zt.ee*t)-e;this.je=new Array(this.zt.tt.to-this.zt.tt.from);for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){const s=this.zt.it[e],n=Math.round(s.nt*t);let r,o;if(i%2){const t=(i-1)/2;r=n-t,o=n+t}else{const t=i/2;r=n-t,o=n+t-1}this.je[e-this.zt.tt.from]={Rs:r,ui:o,Ue:n,qe:s.nt*t,ot:s.ot}}for(let t=this.zt.tt.from+1;t<this.zt.tt.to;t++){const i=this.je[t-this.zt.tt.from],s=this.je[t-this.zt.tt.from-1];i.ot===s.ot+1&&i.Rs-s.ui!==e+1&&(s.Ue>s.qe?s.ui=i.Rs-e-1:i.Rs=s.ui+e+1)}let s=Math.ceil(this.zt.ee*t);for(let t=this.zt.tt.from;t<this.zt.tt.to;t++){const e=this.je[t-this.zt.tt.from];e.ui<e.Rs&&(e.ui=e.Rs);const i=e.ui-e.Rs+1;s=Math.min(i,s)}if(e>0&&s<4)for(let t=this.zt.tt.from;t<this.zt.tt.to;t++){const e=this.je[t-this.zt.tt.from];e.ui-e.Rs+1>s&&(e.Ue>e.qe?e.ui-=1:e.Rs+=1)}}}class qt extends Lt{constructor(){super(...arguments),this.Ns=new Kt}te(t,e,i){return Object.assign(Object.assign({},this.Js(t,e)),i.Ws(t))}Ks(){const t={it:this.Bs,ee:this.zs.St().ee(),tt:this.Vs,$e:this.Is.Dt().Rt(this.Is.W().base,w(this.Is.Ct()).Ot)};this.Ns.J(t)}}class Qt extends Lt{constructor(){super(...arguments),this.Ns=new kt}te(t,e,i){return Object.assign(Object.assign({},this.Js(t,e)),i.Ws(t))}Ks(){const t=this.Is.W(),e={it:this.Bs,Nt:t.lineStyle,us:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Ts:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.Vs,_s:this.zs.St().ee()};this.Ns.J(e)}}const te=/[2-9]/g;class ee{constructor(t=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ze={},this.Ge=new Map,this.Je=t}Qe(){this.Ye=0,this.Ge.clear(),this.Xe=1,this.Ke=1,this.Ze={}}Mi(t,e,i){return this.tr(t,e,i).width}gi(t,e,i){const s=this.tr(t,e,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}tr(t,e,i){const s=i||te,n=String(e).replace(s,"0");if(this.Ge.has(n))return b(this.Ge.get(n)).ir;if(this.Ye===this.Je){const t=this.Ze[this.Ke];delete this.Ze[this.Ke],this.Ge.delete(t),this.Ke++,this.Ye--}t.save(),t.textBaseline="middle";const r=t.measureText(n);return t.restore(),0===r.width&&e.length||(this.Ge.set(n,{ir:r,nr:this.Xe}),this.Ze[this.Xe]=n,this.Ye++,this.Xe++),r}}class ie{constructor(t){this.sr=null,this.k=null,this.er="right",this.rr=t}hr(t,e,i){this.sr=t,this.k=e,this.er=i}K(t){null!==this.k&&null!==this.sr&&this.sr.K(t,this.k,this.rr,this.er)}}class se{constructor(t,e,i){this.lr=t,this.rr=new ee(50),this.ar=e,this.F=i,this.j=-1,this.Wt=new ie(this.rr)}gt(){const t=this.F._r(this.ar);if(null===t)return null;const e=t.ur(this.ar)?t.cr():this.ar.Dt();if(null===e)return null;const i=t.dr(e);if("overlay"===i)return null;const s=this.F.vr();return s.P!==this.j&&(this.j=s.P,this.rr.Qe()),this.Wt.hr(this.lr.Vi(),s,i),this.Wt}}class ne extends D{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}pr(t,e){var i;if(!(null===(i=this.zt)||void 0===i?void 0:i.yt))return null;const{st:s,et:n,mr:r}=this.zt;return e>=s-n-7&&e<=s+n+7?{br:this.zt,mr:r}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;if(!1===this.zt.yt)return;const n=Math.round(this.zt.st*s);n<0||n>e.height||(t.lineCap="butt",t.strokeStyle=this.zt.O,t.lineWidth=Math.floor(this.zt.et*i),p(t,this.zt.Nt),v(t,n,0,e.width))}}class re{constructor(t){this.wr={st:0,O:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.gr=new ne,this.ft=!0,this.Is=t,this.zs=t.$t(),this.gr.J(this.wr)}bt(){this.ft=!0}gt(){return this.Is.yt()?(this.ft&&(this.Mr(),this.ft=!1),this.gr):null}}class oe extends re{constructor(t){super(t)}Mr(){this.wr.yt=!1;const t=this.Is.Dt(),e=t.Sr().Sr;if(2!==e&&3!==e)return;const i=this.Is.W();if(!i.baseLineVisible||!this.Is.yt())return;const s=this.Is.Ct();null!==s&&(this.wr.yt=!0,this.wr.st=t.Rt(s.Ot,s.Ot),this.wr.O=i.baseLineColor,this.wr.et=i.baseLineWidth,this.wr.Nt=i.baseLineStyle)}}class he extends D{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}We(){return this.zt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const s=this.zt;if(null===s)return;const n=Math.max(1,Math.floor(e)),r=n%2/2,o=Math.round(s.qe.x*e)+r,h=s.qe.y*i;t.fillStyle=s.kr,t.beginPath();const l=Math.max(2,1.5*s.yr)*e;t.arc(o,h,l,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.Cr,t.beginPath(),t.arc(o,h,s.ht*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=n,t.strokeStyle=s.Tr,t.beginPath(),t.arc(o,h,s.ht*e+n/2,0,2*Math.PI,!1),t.stroke()}}const le=[{Pr:0,Rr:.25,Dr:4,Or:10,Ar:.25,Br:0,Vr:.4,Ir:.8},{Pr:.25,Rr:.525,Dr:10,Or:14,Ar:0,Br:0,Vr:.8,Ir:0},{Pr:.525,Rr:1,Dr:14,Or:14,Ar:0,Br:0,Vr:0,Ir:0}];function ae(t,e,i,s){return function(t,e){if("transparent"===t)return t;const i=I(t),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*s})`}(t,i+(s-i)*e)}function ue(t,e){const i=t%2600/2600;let s;for(const t of le)if(i>=t.Pr&&i<=t.Rr){s=t;break}g(void 0!==s,"Last price animation internal logic error");const n=(i-s.Pr)/(s.Rr-s.Pr);return{Cr:ae(e,n,s.Ar,s.Br),Tr:ae(e,n,s.Vr,s.Ir),ht:(r=n,o=s.Dr,h=s.Or,o+(h-o)*r)};var r,o,h}class ce{constructor(t){this.Wt=new he,this.ft=!0,this.zr=!0,this.Lr=performance.now(),this.Er=this.Lr-1,this.Nr=t}Fr(){this.Er=this.Lr-1,this.bt()}Wr(){if(this.bt(),2===this.Nr.W().lastPriceAnimation){const t=performance.now(),e=this.Er-t;if(e>0)return void(e<650&&(this.Er+=2600));this.Lr=t,this.Er=t+2600}}bt(){this.ft=!0}jr(){this.zr=!0}yt(){return 0!==this.Nr.W().lastPriceAnimation}Hr(){switch(this.Nr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Er}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.zr=!1):this.zr&&(this.$r(),this.zr=!1),this.Wt}Mt(){this.Wt.J(null);const t=this.Nr.$t().St(),e=t.qs(),i=this.Nr.Ct();if(null===e||null===i)return;const s=this.Nr.Ur(!0);if(s.qr||!e.Yr(s.ie))return;const n={x:t.It(s.ie),y:this.Nr.Dt().Rt(s._t,i.Ot)},r=s.O,o=this.Nr.W().lineWidth,h=ue(this.Xr(),r);this.Wt.J({kr:r,yr:o,Cr:h.Cr,Tr:h.Tr,ht:h.ht,qe:n})}$r(){const t=this.Wt.We();if(null!==t){const e=ue(this.Xr(),t.kr);t.Cr=e.Cr,t.Tr=e.Tr,t.ht=e.ht}}Xr(){return this.Hr()?performance.now()-this.Lr:2599}}function de(t,e){return _t(Math.min(Math.max(t,12),30)*e)}function fe(t,e){switch(t){case"arrowDown":case"arrowUp":return de(e,1);case"circle":return de(e,.8);case"square":return de(e,.7)}}function me(t){return function(t){const e=Math.ceil(t);return e%2!=0?e-1:e}(de(t,1))}function pe(t){return Math.max(de(t,.1),3)}function ve(t,e,i){return e?t:i?Math.ceil(t/2):0}function ge(t,e,i,s,n){const r=fe("square",i),o=(r-1)/2,h=t-o,l=e-o;return s>=h&&s<=h+r&&n>=l&&n<=l+r}function be(t,e,i,s){const n=(fe("arrowUp",s)-1)/2*i.Kr,r=(_t(s/2)-1)/2*i.Kr;e.beginPath(),t?(e.moveTo(i.nt-n,i.st),e.lineTo(i.nt,i.st-n),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+r,i.st+n),e.lineTo(i.nt-r,i.st+n),e.lineTo(i.nt-r,i.st)):(e.moveTo(i.nt-n,i.st),e.lineTo(i.nt,i.st+n),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+r,i.st-n),e.lineTo(i.nt-r,i.st-n),e.lineTo(i.nt-r,i.st)),e.fill()}class we extends D{constructor(){super(...arguments),this.zt=null,this.rr=new ee,this.j=-1,this.H="",this.Zr=""}J(t){this.zt=t}hr(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Zr=j(t,e),this.rr.Qe())}pr(t,e){if(null===this.zt||null===this.zt.tt)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const s=this.zt.it[i];if(ye(s,t,e))return{br:s.Gr,mr:s.mr}}return null}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i},s,n){if(null!==this.zt&&null!==this.zt.tt){t.textBaseline="middle",t.font=this.Zr;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const n=this.zt.it[s];void 0!==n.Zt&&(n.Zt.ji=this.rr.Mi(t,n.Zt.Jr),n.Zt.Vt=this.j,n.Zt.nt=n.nt-n.Zt.ji/2),Se(n,t,e,i)}}}}function Se(t,e,i,s){e.fillStyle=t.O,void 0!==t.Zt&&function(t,e,i,s,n,r){t.save(),t.scale(n,r),t.fillText(e,i,s),t.restore()}(e,t.Zt.Jr,t.Zt.nt,t.Zt.st,i,s),function(t,e,i){if(0!==t.Ys){switch(t.Qr){case"arrowDown":return void be(!1,e,i,t.Ys);case"arrowUp":return void be(!0,e,i,t.Ys);case"circle":return void function(t,e,i){const s=(fe("circle",i)-1)/2;t.beginPath(),t.arc(e.nt,e.st,s*e.Kr,0,2*Math.PI,!1),t.fill()}(e,i,t.Ys);case"square":return void function(t,e,i){const s=fe("square",i),n=(s-1)*e.Kr/2,r=e.nt-n,o=e.st-n;t.fillRect(r,o,s*e.Kr,s*e.Kr)}(e,i,t.Ys)}t.Qr}}(t,e,function(t,e,i){const s=Math.max(1,Math.floor(e))%2/2;return{nt:Math.round(t.nt*e)+s,st:t.st*i,Kr:e}}(t,i,s))}function ye(t,e,i){return!(void 0===t.Zt||!function(t,e,i,s,n,r){const o=s/2;return n>=t&&n<=t+i&&r>=e-o&&r<=e+o}(t.Zt.nt,t.Zt.st,t.Zt.ji,t.Zt.Vt,e,i))||function(t,e,i){if(0===t.Ys)return!1;switch(t.Qr){case"arrowDown":case"arrowUp":return function(t,e,i,s,n,r){return ge(e,i,s,n,r)}(0,t.nt,t.st,t.Ys,e,i);case"circle":return function(t,e,i,s,n){const r=2+fe("circle",i)/2,o=t-s,h=e-n;return Math.sqrt(o*o+h*h)<=r}(t.nt,t.st,t.Ys,e,i);case"square":return ge(t.nt,t.st,t.Ys,e,i)}}(t,e,i)}function xe(t,e,i,s,n,r,o,h,l){const a=B(i)?i:i.ge,u=B(i)?i:i.be,c=B(i)?i:i.we,d=B(e.size)?Math.max(e.size,0):1,f=me(h.ee())*d,m=f/2;switch(t.Ys=f,e.position){case"inBar":return t.st=o.Rt(a,l),void(void 0!==t.Zt&&(t.Zt.st=t.st+m+r+.6*n));case"aboveBar":return t.st=o.Rt(u,l)-m-s.th,void 0!==t.Zt&&(t.Zt.st=t.st-m-.6*n,s.th+=1.2*n),void(s.th+=f+r);case"belowBar":return t.st=o.Rt(c,l)+m+s.ih,void 0!==t.Zt&&(t.Zt.st=t.st+m+r+.6*n,s.ih+=1.2*n),void(s.ih+=f+r)}e.position}class Ce{constructor(t,e){this.ft=!0,this.nh=!0,this.sh=!0,this.eh=null,this.rh=null,this.Wt=new we,this.Nr=t,this.Hi=e,this.zt={it:[],tt:null}}bt(t){this.ft=!0,this.sh=!0,"data"===t&&(this.nh=!0,this.rh=null)}gt(t){if(!this.Nr.yt())return null;this.ft&&this.hh();const e=this.Hi.W().layout;return this.Wt.hr(e.fontSize,e.fontFamily),this.Wt.J(this.zt),this.Wt}lh(){if(this.sh){if(this.Nr.ah().length>0){const t=this.Hi.St().ee(),e=pe(t),i=1.5*me(t)+2*e,s=this.oh();this.eh={above:ve(i,s.aboveBar,s.inBar),below:ve(i,s.belowBar,s.inBar)}}else this.eh=null;this.sh=!1}return this.eh}oh(){return null===this.rh&&(this.rh=this.Nr.ah().reduce(((t,e)=>(t[e.position]||(t[e.position]=!0),t)),{inBar:!1,aboveBar:!1,belowBar:!1})),this.rh}hh(){const t=this.Nr.Dt(),e=this.Hi.St(),i=this.Nr.ah();this.nh&&(this.zt.it=i.map((t=>({ot:t.time,nt:0,st:0,Ys:0,Qr:t.shape,O:t.color,Gr:t.Gr,mr:t.id,Zt:void 0}))),this.nh=!1);const s=this.Hi.W().layout;this.zt.tt=null;const n=e.qs();if(null===n)return;const r=this.Nr.Ct();if(null===r)return;if(0===this.zt.it.length)return;let o=NaN;const h=pe(e.ee()),l={th:h,ih:h};this.zt.tt=Wt(this.zt.it,n,!0);for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const a=i[n];a.time!==o&&(l.th=h,l.ih=h,o=a.time);const u=this.zt.it[n];u.nt=e.It(a.time),void 0!==a.text&&a.text.length>0&&(u.Zt={Jr:a.text,nt:0,st:0,ji:0,Vt:0});const c=this.Nr._h(a.time);null!==c&&xe(u,a,c,l,s.fontSize,h,t,e,r.Ot)}this.ft=!1}}class Me extends re{constructor(t){super(t)}Mr(){const t=this.wr;t.yt=!1;const e=this.Is.W();if(!e.priceLineVisible||!this.Is.yt())return;const i=this.Is.Ur(0===e.priceLineSource);i.qr||(t.yt=!0,t.st=i.Si,t.O=this.Is.uh(i.O),t.et=e.priceLineWidth,t.Nt=e.priceLineStyle)}}class _e extends it{constructor(t){super(),this.jt=t}Ii(t,e,i){t.yt=!1,e.yt=!1;const s=this.jt;if(!s.yt())return;const n=s.W(),r=n.lastValueVisible,o=""!==s.dh(),h=0===n.seriesLastValueMode,l=s.Ur(!1);if(l.qr)return;r&&(t.Zt=this.fh(l,r,h),t.yt=0!==t.Zt.length),(o||h)&&(e.Zt=this.ph(l,r,o,h),e.yt=e.Zt.length>0);const a=s.uh(l.O),u=E(a);i.t=u.t,i.Si=l.Si,e.At=s.$t().Bt(l.Si/s.Dt().Vt()),t.At=a,t.O=u.i,e.O=u.i}ph(t,e,i,s){let n="";const r=this.jt.dh();return i&&0!==r.length&&(n+=`${r} `),e&&s&&(n+=this.jt.Dt().mh()?t.bh:t.wh),n.trim()}fh(t,e,i){return e?i?this.jt.Dt().mh()?t.wh:t.bh:t.Zt:""}}function Te(t,e,i,s){const n=Number.isFinite(e),r=Number.isFinite(i);return n&&r?t(e,i):n||r?n?e:i:s}class ze{constructor(t,e){this.gh=t,this.Mh=e}xh(t){return null!==t&&this.gh===t.gh&&this.Mh===t.Mh}Sh(){return new ze(this.gh,this.Mh)}kh(){return this.gh}yh(){return this.Mh}Ch(){return this.Mh-this.gh}Ei(){return this.Mh===this.gh||Number.isNaN(this.Mh)||Number.isNaN(this.gh)}Jn(t){return null===t?this:new ze(Te(Math.min,this.kh(),t.kh(),-1/0),Te(Math.max,this.yh(),t.yh(),1/0))}Th(t){if(!B(t))return;if(0==this.Mh-this.gh)return;const e=.5*(this.Mh+this.gh);let i=this.Mh-e,s=this.gh-e;i*=t,s*=t,this.Mh=e+i,this.gh=e+s}Ph(t){B(t)&&(this.Mh+=t,this.gh+=t)}Rh(){return{minValue:this.gh,maxValue:this.Mh}}static Dh(t){return null===t?null:new ze(t.minValue,t.maxValue)}}class Ie{constructor(t,e){this.Oh=t,this.Ah=e||null}Bh(){return this.Oh}Vh(){return this.Ah}Rh(){return null===this.Oh?null:{priceRange:this.Oh.Rh(),margins:this.Ah||void 0}}static Dh(t){return null===t?null:new Ie(ze.Dh(t.priceRange),t.margins)}}class Ee extends re{constructor(t,e){super(t),this.Ih=e}Mr(){const t=this.wr;t.yt=!1;const e=this.Ih.W();if(!this.Is.yt()||!e.lineVisible)return;const i=this.Ih.zh();null!==i&&(t.yt=!0,t.st=i,t.O=e.color,t.et=e.lineWidth,t.Nt=e.lineStyle,t.mr=this.Ih.W().id)}}class ke extends it{constructor(t,e){super(),this.Nr=t,this.Ih=e}Ii(t,e,i){t.yt=!1,e.yt=!1;const s=this.Ih.W(),n=s.axisLabelVisible,r=""!==s.title,o=this.Nr;if(!n||!o.yt())return;const h=this.Ih.zh();if(null===h)return;r&&(e.Zt=s.title,e.yt=!0),e.At=o.$t().Bt(h/o.Dt().Vt()),t.Zt=this.Lh(s.price),t.yt=!0;const l=E(s.axisLabelColor||s.color);i.t=l.t;const a=s.axisLabelTextColor||l.i;t.O=a,e.O=a,i.Si=h}Lh(t){const e=this.Nr.Ct();return null===e?"":this.Nr.Dt().Ni(t,e.Ot)}}class Re{constructor(t,e){this.Nr=t,this._n=e,this.Eh=new Ee(t,this),this.lr=new ke(t,this),this.Nh=new se(this.lr,t,t.$t())}Fh(t){R(this._n,t),this.bt(),this.Nr.$t().Wh()}W(){return this._n}jh(){return this.Eh}Hh(){return this.Nh}$h(){return this.lr}bt(){this.Eh.bt(),this.lr.bt()}zh(){const t=this.Nr,e=t.Dt();if(t.$t().St().Ei()||e.Ei())return null;const i=t.Ct();return null===i?null:e.Rt(this._n.price,i.Ot)}}class Be extends ht{constructor(t){super(),this.Hi=t}$t(){return this.Hi}}const Pe={Bar:(t,e,i,s)=>{var n;const r=e.upColor,o=e.downColor,h=w(t(i,s)),l=S(h.Ot[0])<=S(h.Ot[3]);return{oe:null!==(n=h.O)&&void 0!==n?n:l?r:o}},Candlestick:(t,e,i,s)=>{var n,r,o;const h=e.upColor,l=e.downColor,a=e.borderUpColor,u=e.borderDownColor,c=e.wickUpColor,d=e.wickDownColor,f=w(t(i,s)),m=S(f.Ot[0])<=S(f.Ot[3]);return{oe:null!==(n=f.O)&&void 0!==n?n:m?h:l,ze:null!==(r=f.At)&&void 0!==r?r:m?a:u,Ie:null!==(o=f.Uh)&&void 0!==o?o:m?c:d}},Custom:(t,e,i,s)=>{var n;return{oe:null!==(n=w(t(i,s)).O)&&void 0!==n?n:e.color}},Area:(t,e,i,s)=>{var n,r,o,h;const l=w(t(i,s));return{oe:null!==(n=l.lt)&&void 0!==n?n:e.lineColor,lt:null!==(r=l.lt)&&void 0!==r?r:e.lineColor,ys:null!==(o=l.ys)&&void 0!==o?o:e.topColor,Cs:null!==(h=l.Cs)&&void 0!==h?h:e.bottomColor}},Baseline:(t,e,i,s)=>{var n,r,o,h,l,a;const u=w(t(i,s));return{oe:u.Ot[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Ce:null!==(n=u.Ce)&&void 0!==n?n:e.topLineColor,Te:null!==(r=u.Te)&&void 0!==r?r:e.bottomLineColor,Me:null!==(o=u.Me)&&void 0!==o?o:e.topFillColor1,xe:null!==(h=u.xe)&&void 0!==h?h:e.topFillColor2,Se:null!==(l=u.Se)&&void 0!==l?l:e.bottomFillColor1,ke:null!==(a=u.ke)&&void 0!==a?a:e.bottomFillColor2}},Line:(t,e,i,s)=>{var n,r;const o=w(t(i,s));return{oe:null!==(n=o.O)&&void 0!==n?n:e.color,lt:null!==(r=o.O)&&void 0!==r?r:e.color}},Histogram:(t,e,i,s)=>{var n;return{oe:null!==(n=w(t(i,s)).O)&&void 0!==n?n:e.color}}};class Oe{constructor(t){this.qh=(t,e)=>void 0!==e?e.Ot:this.Nr.Bn().Yh(t),this.Nr=t,this.Xh=Pe[t.Kh()]}Ws(t,e){return this.Xh(this.qh,this.Nr.W(),t,e)}}var He;!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(He||(He={}));const We=30;class Ve{constructor(){this.Zh=[],this.Gh=new Map,this.Jh=new Map}Qh(){return this.Ys()>0?this.Zh[this.Zh.length-1]:null}tl(){return this.Ys()>0?this.il(0):null}An(){return this.Ys()>0?this.il(this.Zh.length-1):null}Ys(){return this.Zh.length}Ei(){return 0===this.Ys()}Yr(t){return null!==this.nl(t,0)}Yh(t){return this.sl(t)}sl(t,e=0){const i=this.nl(t,e);return null===i?null:Object.assign(Object.assign({},this.el(i)),{ie:this.il(i)})}Qs(){return this.Zh}rl(t,e,i){if(this.Ei())return null;let s=null;for(const n of i)s=Le(s,this.hl(t,e,n));return s}J(t){this.Jh.clear(),this.Gh.clear(),this.Zh=t}il(t){return this.Zh[t].ie}el(t){return this.Zh[t]}nl(t,e){const i=this.ll(t);if(null===i&&0!==e)switch(e){case-1:return this.al(t);case 1:return this.ol(t);default:throw new TypeError("Unknown search mode")}return i}al(t){let e=this._l(t);return e>0&&(e-=1),e!==this.Zh.length&&this.il(e)<t?e:null}ol(t){const e=this.ul(t);return e!==this.Zh.length&&t<this.il(e)?e:null}ll(t){const e=this._l(t);return e===this.Zh.length||t<this.Zh[e].ie?null:e}_l(t){return Bt(this.Zh,t,((t,e)=>t.ie<e))}ul(t){return Pt(this.Zh,t,((t,e)=>t.ie>e))}cl(t,e,i){let s=null;for(let n=t;n<e;n++){const t=this.Zh[n].Ot[i];Number.isNaN(t)||(null===s?s={dl:t,fl:t}:(t<s.dl&&(s.dl=t),t>s.fl&&(s.fl=t)))}return s}hl(t,e,i){if(this.Ei())return null;let s=null;const n=w(this.tl()),r=w(this.An()),o=Math.max(t,n),h=Math.min(e,r),l=Math.ceil(o/We)*We,a=Math.max(l,Math.floor(h/We)*We);{const t=this._l(o),n=this.ul(Math.min(h,l,e));s=Le(s,this.cl(t,n,i))}let u=this.Gh.get(i);void 0===u&&(u=new Map,this.Gh.set(i,u));for(let t=Math.max(l+1,o);t<a;t+=We){const e=Math.floor(t/We);let n=u.get(e);if(void 0===n){const t=this._l(e*We),s=this.ul((e+1)*We-1);n=this.cl(t,s,i),u.set(e,n)}s=Le(s,n)}{const t=this._l(a),e=this.ul(h);s=Le(s,this.cl(t,e,i))}return s}}function Le(t,e){return null===t?e:null===e?t:{dl:Math.min(t.dl,e.dl),fl:Math.max(t.fl,e.fl)}}class Ne{constructor(t){this.vl=t}K(t,e,i){this.vl.draw(t)}pl(t,e,i){var s,n;null===(n=(s=this.vl).drawBackground)||void 0===n||n.call(s,t)}}class je{constructor(t){this.Ge=null,this.mn=t}gt(){var t;const e=this.mn.renderer();if(null===e)return null;if((null===(t=this.Ge)||void 0===t?void 0:t.ml)===e)return this.Ge.bl;const i=new Ne(e);return this.Ge={ml:e,bl:i},i}wl(){var t,e,i;return null!==(i=null===(e=(t=this.mn).zOrder)||void 0===e?void 0:e.call(t))&&void 0!==i?i:"normal"}}function $e(t){var e,i,s,n,r;return{Zt:t.text(),Si:t.coordinate(),xi:null===(e=t.fixedCoordinate)||void 0===e?void 0:e.call(t),O:t.textColor(),t:t.backColor(),yt:null===(s=null===(i=t.visible)||void 0===i?void 0:i.call(t))||void 0===s||s,hi:null===(r=null===(n=t.tickVisible)||void 0===n?void 0:n.call(t))||void 0===r||r}}class Fe{constructor(t,e){this.Wt=new rt,this.gl=t,this.Ml=e}gt(){return this.Wt.J(Object.assign({ji:this.Ml.ji()},$e(this.gl))),this.Wt}}class De extends it{constructor(t,e){super(),this.gl=t,this.zi=e}Ii(t,e,i){const s=$e(this.gl);i.t=s.t,t.O=s.O;const n=2/12*this.zi.P();i.bi=n,i.wi=n,i.Si=s.Si,i.xi=s.xi,t.Zt=s.Zt,t.yt=s.yt,t.hi=s.hi}}class Ae{constructor(t,e){this.xl=null,this.Sl=null,this.kl=null,this.yl=null,this.Cl=null,this.Tl=t,this.Nr=e}Pl(){return this.Tl}Rn(){var t,e;null===(e=(t=this.Tl).updateAllViews)||void 0===e||e.call(t)}Cn(){var t,e,i,s;const n=null!==(i=null===(e=(t=this.Tl).paneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.xl)||void 0===s?void 0:s.ml)===n)return this.xl.bl;const r=n.map((t=>new je(t)));return this.xl={ml:n,bl:r},r}Ji(){var t,e,i,s;const n=null!==(i=null===(e=(t=this.Tl).timeAxisViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.Sl)||void 0===s?void 0:s.ml)===n)return this.Sl.bl;const r=this.Nr.$t().St(),o=n.map((t=>new Fe(t,r)));return this.Sl={ml:n,bl:o},o}Tn(){var t,e,i,s;const n=null!==(i=null===(e=(t=this.Tl).priceAxisViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.kl)||void 0===s?void 0:s.ml)===n)return this.kl.bl;const r=this.Nr.Dt(),o=n.map((t=>new De(t,r)));return this.kl={ml:n,bl:o},o}Rl(){var t,e,i,s;const n=null!==(i=null===(e=(t=this.Tl).priceAxisPaneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.yl)||void 0===s?void 0:s.ml)===n)return this.yl.bl;const r=n.map((t=>new je(t)));return this.yl={ml:n,bl:r},r}Dl(){var t,e,i,s;const n=null!==(i=null===(e=(t=this.Tl).timeAxisPaneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.Cl)||void 0===s?void 0:s.ml)===n)return this.Cl.bl;const r=n.map((t=>new je(t)));return this.Cl={ml:n,bl:r},r}Ol(t,e){var i,s,n;return null!==(n=null===(s=(i=this.Tl).autoscaleInfo)||void 0===s?void 0:s.call(i,t,e))&&void 0!==n?n:null}pr(t,e){var i,s,n;return null!==(n=null===(s=(i=this.Tl).hitTest)||void 0===s?void 0:s.call(i,t,e))&&void 0!==n?n:null}}function Ue(t,e,i,s){t.forEach((t=>{e(t).forEach((t=>{t.wl()===i&&s.push(t)}))}))}function Ye(t){return t.Cn()}function Ge(t){return t.Rl()}function Ze(t){return t.Dl()}class Xe extends Be{constructor(t,e,i,s,n){super(t),this.zt=new Ve,this.Eh=new Me(this),this.Al=[],this.Bl=new oe(this),this.Vl=null,this.Il=null,this.zl=[],this.Ll=[],this.El=null,this.Nl=[],this._n=e,this.Fl=i;const r=new _e(this);this.en=[r],this.Nh=new se(r,this,t),"Area"!==i&&"Line"!==i&&"Baseline"!==i||(this.Vl=new ce(this)),this.Wl(),this.jl(n)}S(){null!==this.El&&clearTimeout(this.El)}uh(t){return this._n.priceLineColor||t}Ur(t){const e={qr:!0},i=this.Dt();if(this.$t().St().Ei()||i.Ei()||this.zt.Ei())return e;const s=this.$t().St().qs(),n=this.Ct();if(null===s||null===n)return e;let r,o;if(t){const t=this.zt.Qh();if(null===t)return e;r=t,o=t.ie}else{const t=this.zt.sl(s.ui(),-1);if(null===t)return e;if(r=this.zt.Yh(t.ie),null===r)return e;o=t.ie}const h=r.Ot[3],l=this.js().Ws(o,{Ot:r}),a=i.Rt(h,n.Ot);return{qr:!1,_t:h,Zt:i.Ni(h,n.Ot),bh:i.Hl(h),wh:i.$l(h,n.Ot),O:l.oe,Si:a,ie:o}}js(){return null!==this.Il||(this.Il=new Oe(this)),this.Il}W(){return this._n}Fh(t){const e=t.priceScaleId;void 0!==e&&e!==this._n.priceScaleId&&this.$t().Ul(this,e),R(this._n,t),void 0!==t.priceFormat&&(this.Wl(),this.$t().ql()),this.$t().Yl(this),this.$t().Xl(),this.mn.bt("options")}J(t,e){this.zt.J(t),this.Kl(),this.mn.bt("data"),this.un.bt("data"),null!==this.Vl&&(e&&e.Zl?this.Vl.Wr():0===t.length&&this.Vl.Fr());const i=this.$t()._r(this);this.$t().Gl(i),this.$t().Yl(this),this.$t().Xl(),this.$t().Wh()}Jl(t){this.zl=t,this.Kl();const e=this.$t()._r(this);this.un.bt("data"),this.$t().Gl(e),this.$t().Yl(this),this.$t().Xl(),this.$t().Wh()}Ql(){return this.zl}ah(){return this.Ll}ta(t){const e=new Re(this,t);return this.Al.push(e),this.$t().Yl(this),e}ia(t){const e=this.Al.indexOf(t);-1!==e&&this.Al.splice(e,1),this.$t().Yl(this)}Kh(){return this.Fl}Ct(){const t=this.na();return null===t?null:{Ot:t.Ot[3],sa:t.ot}}na(){const t=this.$t().St().qs();if(null===t)return null;const e=t.Rs();return this.zt.sl(e,1)}Bn(){return this.zt}_h(t){const e=this.zt.Yh(t);return null===e?null:"Bar"===this.Fl||"Candlestick"===this.Fl||"Custom"===this.Fl?{me:e.Ot[0],be:e.Ot[1],we:e.Ot[2],ge:e.Ot[3]}:e.Ot[3]}ea(t){const e=[];Ue(this.Nl,Ye,"top",e);const i=this.Vl;return null!==i&&i.yt()?(null===this.El&&i.Hr()&&(this.El=setTimeout((()=>{this.El=null,this.$t().ra()}),0)),i.jr(),e.unshift(i),e):e}Cn(){const t=[];this.ha()||t.push(this.Bl),t.push(this.mn,this.Eh,this.un);const e=this.Al.map((t=>t.jh()));return t.push(...e),Ue(this.Nl,Ye,"normal",t),t}la(){return this.aa(Ye,"bottom")}oa(t){return this.aa(Ge,t)}_a(t){return this.aa(Ze,t)}ua(t,e){return this.Nl.map((i=>i.pr(t,e))).filter((t=>null!==t))}Gi(t){return[this.Nh,...this.Al.map((t=>t.Hh()))]}Tn(t,e){if(e!==this.qi&&!this.ha())return[];const i=[...this.en];for(const t of this.Al)i.push(t.$h());return this.Nl.forEach((t=>{i.push(...t.Tn())})),i}Ji(){const t=[];return this.Nl.forEach((e=>{t.push(...e.Ji())})),t}Ol(t,e){if(void 0!==this._n.autoscaleInfoProvider){const i=this._n.autoscaleInfoProvider((()=>{const i=this.ca(t,e);return null===i?null:i.Rh()}));return Ie.Dh(i)}return this.ca(t,e)}da(){return this._n.priceFormat.minMove}fa(){return this.va}Rn(){var t;this.mn.bt(),this.un.bt();for(const t of this.en)t.bt();for(const t of this.Al)t.bt();this.Eh.bt(),this.Bl.bt(),null===(t=this.Vl)||void 0===t||t.bt(),this.Nl.forEach((t=>t.Rn()))}Dt(){return w(super.Dt())}kt(t){if("Line"!==this.Fl&&"Area"!==this.Fl&&"Baseline"!==this.Fl||!this._n.crosshairMarkerVisible)return null;const e=this.zt.Yh(t);return null===e?null:{_t:e.Ot[3],ht:this.pa(),At:this.ma(),Pt:this.ba(),Tt:this.wa(t)}}dh(){return this._n.title}yt(){return this._n.visible}ga(t){this.Nl.push(new Ae(t,this))}Ma(t){this.Nl=this.Nl.filter((e=>e.Pl()!==t))}xa(){if(this.mn instanceof Xt!=0)return t=>this.mn.Ee(t)}Sa(){if(this.mn instanceof Xt!=0)return t=>this.mn.Ne(t)}ha(){return!ut(this.Dt().ka())}ca(t,e){if(!P(t)||!P(e)||this.zt.Ei())return null;const i="Line"===this.Fl||"Area"===this.Fl||"Baseline"===this.Fl||"Histogram"===this.Fl?[3]:[2,1],s=this.zt.rl(t,e,i);let n=null!==s?new ze(s.dl,s.fl):null;if("Histogram"===this.Kh()){const t=this._n.base,e=new ze(t,t);n=null!==n?n.Jn(e):e}let r=this.un.lh();return this.Nl.forEach((i=>{const s=i.Ol(t,e);if(null==s?void 0:s.priceRange){const t=new ze(s.priceRange.minValue,s.priceRange.maxValue);n=null!==n?n.Jn(t):t}var o,h,l,a;(null==s?void 0:s.margins)&&(o=r,h=s.margins,r={above:Math.max(null!==(l=null==o?void 0:o.above)&&void 0!==l?l:0,h.above),below:Math.max(null!==(a=null==o?void 0:o.below)&&void 0!==a?a:0,h.below)})})),new Ie(n,r)}pa(){switch(this.Fl){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerRadius}return 0}ma(){switch(this.Fl){case"Line":case"Area":case"Baseline":{const t=this._n.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}ba(){switch(this.Fl){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerBorderWidth}return 0}wa(t){switch(this.Fl){case"Line":case"Area":case"Baseline":{const t=this._n.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.js().Ws(t).oe}Wl(){switch(this._n.priceFormat.type){case"custom":this.va={format:this._n.priceFormat.formatter};break;case"volume":this.va=new pt(this._n.priceFormat.precision);break;case"percent":this.va=new mt(this._n.priceFormat.precision);break;default:{const t=Math.pow(10,this._n.priceFormat.precision);this.va=new ft(t,this._n.priceFormat.minMove*t)}}null!==this.qi&&this.qi.ya()}Kl(){const t=this.$t().St();if(!t.Ca()||this.zt.Ei())return void(this.Ll=[]);const e=w(this.zt.tl());this.Ll=this.zl.map(((i,s)=>{const n=w(t.Ta(i.time,!0)),r=n<e?1:-1;return{time:w(this.zt.sl(n,r)).ie,position:i.position,shape:i.shape,color:i.color,id:i.id,Gr:s,text:i.text,size:i.size,originalTime:i.originalTime}}))}jl(t){switch(this.un=new Ce(this,this.$t()),this.Fl){case"Bar":this.mn=new Ft(this,this.$t());break;case"Candlestick":this.mn=new Gt(this,this.$t());break;case"Line":this.mn=new Qt(this,this.$t());break;case"Custom":this.mn=new Xt(this,this.$t(),b(t));break;case"Area":this.mn=new Nt(this,this.$t());break;case"Baseline":this.mn=new Ut(this,this.$t());break;case"Histogram":this.mn=new qt(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.Fl)}}aa(t,e){const i=[];return Ue(this.Nl,t,e,i),i}}class Je{constructor(t){this._n=t}Pa(t,e,i){let s=t;if(0===this._n.mode)return s;const n=i.dn(),r=n.Ct();if(null===r)return s;const o=n.Rt(t,r),h=i.Ra().filter((t=>t instanceof Xe)).reduce(((t,s)=>{if(i.ur(s)||!s.yt())return t;const n=s.Dt(),r=s.Bn();if(n.Ei()||!r.Yr(e))return t;const o=r.Yh(e);if(null===o)return t;const h=S(s.Ct());return t.concat([n.Rt(o.Ot[3],h.Ot)])}),[]);if(0===h.length)return s;h.sort(((t,e)=>Math.abs(t-o)-Math.abs(e-o)));const l=h[0];return s=n.fn(l,r),s}}class Ke extends D{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;const n=Math.max(1,Math.floor(i));t.lineWidth=n,function(t,e){t.save(),t.lineWidth%2&&t.translate(.5,.5),e(),t.restore()}(t,(()=>{const r=w(this.zt);if(r.Da){t.strokeStyle=r.Oa,p(t,r.Aa),t.beginPath();for(const s of r.Ba){const r=Math.round(s.Va*i);t.moveTo(r,-n),t.lineTo(r,e.height+n)}t.stroke()}if(r.Ia){t.strokeStyle=r.za,p(t,r.La),t.beginPath();for(const i of r.Ea){const r=Math.round(i.Va*s);t.moveTo(-n,r),t.lineTo(e.width+n,r)}t.stroke()}}))}}class qe{constructor(t){this.Wt=new Ke,this.ft=!0,this.Qi=t}bt(){this.ft=!0}gt(){if(this.ft){const t=this.Qi.$t().W().grid,e={Ia:t.horzLines.visible,Da:t.vertLines.visible,za:t.horzLines.color,Oa:t.vertLines.color,La:t.horzLines.style,Aa:t.vertLines.style,Ea:this.Qi.dn().Na(),Ba:(this.Qi.$t().St().Na()||[]).map((t=>({Va:t.coord})))};this.Wt.J(e),this.ft=!1}return this.Wt}}class Qe{constructor(t){this.mn=new qe(t)}jh(){return this.mn}}const ti={Fa:4,Wa:1e-4};function ei(t,e){const i=100*(t-e)/e;return e<0?-i:i}function ii(t,e){const i=ei(t.kh(),e),s=ei(t.yh(),e);return new ze(i,s)}function si(t,e){const i=100*(t-e)/e+100;return e<0?-i:i}function ni(t,e){const i=si(t.kh(),e),s=si(t.yh(),e);return new ze(i,s)}function ri(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.log10(i+e.Wa)+e.Fa;return t<0?-s:s}function oi(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.pow(10,i-e.Fa)-e.Wa;return t<0?-s:s}function hi(t,e){if(null===t)return null;const i=ri(t.kh(),e),s=ri(t.yh(),e);return new ze(i,s)}function li(t,e){if(null===t)return null;const i=oi(t.kh(),e),s=oi(t.yh(),e);return new ze(i,s)}function ai(t){if(null===t)return ti;const e=Math.abs(t.yh()-t.kh());if(e>=1||e<1e-15)return ti;const i=Math.ceil(Math.abs(Math.log10(e))),s=ti.Fa+i;return{Fa:s,Wa:1/Math.pow(10,s)}}class ui{constructor(t,e){if(this.ja=t,this.Ha=e,function(t){if(t<0)return!1;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.ja))this.$a=[2,2.5,2];else{this.$a=[];for(let t=this.ja;1!==t;){if(t%2==0)this.$a.push(2),t/=2;else{if(t%5!=0)throw new Error("unexpected base");this.$a.push(2,2.5),t/=5}if(this.$a.length>100)throw new Error("something wrong with base")}}}Ua(t,e,i){const s=0===this.ja?0:1/this.ja;let n=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),r=0,o=this.Ha[0];for(;;){const t=Mt(n,s,1e-14)&&n>s+1e-14,e=Mt(n,i*o,1e-14),h=Mt(n,1,1e-14);if(!(t&&e&&h))break;n/=o,o=this.Ha[++r%this.Ha.length]}if(n<=s+1e-14&&(n=s),n=Math.max(1,n),this.$a.length>0&&(h=n,Math.abs(h-1)<1e-14))for(r=0,o=this.$a[0];Mt(n,i*o,1e-14)&&n>s+1e-14;)n/=o,o=this.$a[++r%this.$a.length];var h;return n}}class ci{constructor(t,e,i,s){this.qa=[],this.zi=t,this.ja=e,this.Ya=i,this.Xa=s}Ua(t,e){if(t<e)throw new Error("high < low");const i=this.zi.Vt(),s=(t-e)*this.Ka()/i,n=new ui(this.ja,[2,2.5,2]),r=new ui(this.ja,[2,2,2.5]),o=new ui(this.ja,[2.5,2,2]),h=[];return h.push(n.Ua(t,e,s),r.Ua(t,e,s),o.Ua(t,e,s)),function(t){if(t.length<1)throw Error("array is empty");let e=t[0];for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e}(h)}Za(){const t=this.zi,e=t.Ct();if(null===e)return void(this.qa=[]);const i=t.Vt(),s=this.Ya(i-1,e),n=this.Ya(0,e),r=this.zi.W().entireTextOnly?this.Ga()/2:0,o=r,h=i-1-r,l=Math.max(s,n),a=Math.min(s,n);if(l===a)return void(this.qa=[]);let u=this.Ua(l,a),c=l%u;c+=c<0?u:0;const d=l>=a?1:-1;let f=null,m=0;for(let i=l-c;i>a;i-=u){const s=this.Xa(i,e,!0);null!==f&&Math.abs(s-f)<this.Ka()||s<o||s>h||(m<this.qa.length?(this.qa[m].Va=s,this.qa[m].Ja=t.Qa(i)):this.qa.push({Va:s,Ja:t.Qa(i)}),m++,f=s,t.io()&&(u=this.Ua(i*d,a)))}this.qa.length=m}Na(){return this.qa}Ga(){return this.zi.P()}Ka(){return Math.ceil(2.5*this.Ga())}}function di(t){return t.slice().sort(((t,e)=>w(t.Xi())-w(e.Xi())))}var fi;!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(fi||(fi={}));const mi=new mt,pi=new ft(100,1);class vi{constructor(t,e,i,s){this.no=0,this.so=null,this.Oh=null,this.eo=null,this.ro={ho:!1,lo:null},this.ao=0,this.oo=0,this._o=new k,this.uo=new k,this.co=[],this.do=null,this.fo=null,this.vo=null,this.po=null,this.va=pi,this.mo=ai(null),this.bo=t,this._n=e,this.wo=i,this.Mo=s,this.xo=new ci(this,100,this.So.bind(this),this.ko.bind(this))}ka(){return this.bo}W(){return this._n}Fh(t){if(R(this._n,t),this.ya(),void 0!==t.mode&&this.yo({Sr:t.mode}),void 0!==t.scaleMargins){const e=b(t.scaleMargins.top),i=b(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.Co(),this.fo=null}}To(){return this._n.autoScale}io(){return 1===this._n.mode}mh(){return 2===this._n.mode}Po(){return 3===this._n.mode}Sr(){return{Nn:this._n.autoScale,Ro:this._n.invertScale,Sr:this._n.mode}}yo(t){const e=this.Sr();let i=null;void 0!==t.Nn&&(this._n.autoScale=t.Nn),void 0!==t.Sr&&(this._n.mode=t.Sr,2!==t.Sr&&3!==t.Sr||(this._n.autoScale=!0),this.ro.ho=!1),1===e.Sr&&t.Sr!==e.Sr&&(function(t,e){if(null===t)return!1;const i=oi(t.kh(),e),s=oi(t.yh(),e);return isFinite(i)&&isFinite(s)}(this.Oh,this.mo)?(i=li(this.Oh,this.mo),null!==i&&this.Do(i)):this._n.autoScale=!0),1===t.Sr&&t.Sr!==e.Sr&&(i=hi(this.Oh,this.mo),null!==i&&this.Do(i));const s=e.Sr!==this._n.mode;s&&(2===e.Sr||this.mh())&&this.ya(),s&&(3===e.Sr||this.Po())&&this.ya(),void 0!==t.Ro&&e.Ro!==t.Ro&&(this._n.invertScale=t.Ro,this.Oo()),this.uo.m(e,this.Sr())}Ao(){return this.uo}P(){return this.wo.fontSize}Vt(){return this.no}Bo(t){this.no!==t&&(this.no=t,this.Co(),this.fo=null)}Vo(){if(this.so)return this.so;const t=this.Vt()-this.Io()-this.zo();return this.so=t,t}Bh(){return this.Lo(),this.Oh}Do(t,e){const i=this.Oh;(e||null===i&&null!==t||null!==i&&!i.xh(t))&&(this.fo=null,this.Oh=t)}Ei(){return this.Lo(),0===this.no||!this.Oh||this.Oh.Ei()}Eo(t){return this.Ro()?t:this.Vt()-1-t}Rt(t,e){return this.mh()?t=ei(t,e):this.Po()&&(t=si(t,e)),this.ko(t,e)}Gs(t,e,i){this.Lo();const s=this.zo(),n=w(this.Bh()),r=n.kh(),o=n.yh(),h=this.Vo()-1,l=this.Ro(),a=h/(o-r),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.No();for(let i=u;i<c;i++){const n=t[i],o=n._t;if(isNaN(o))continue;let h=o;null!==d&&(h=d(n._t,e));const u=s+a*(h-r),c=l?u:this.no-1-u;n.st=c}}ve(t,e,i){this.Lo();const s=this.zo(),n=w(this.Bh()),r=n.kh(),o=n.yh(),h=this.Vo()-1,l=this.Ro(),a=h/(o-r),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.No();for(let i=u;i<c;i++){const n=t[i];let o=n.me,h=n.be,u=n.we,c=n.ge;null!==d&&(o=d(n.me,e),h=d(n.be,e),u=d(n.we,e),c=d(n.ge,e));let f=s+a*(o-r),m=l?f:this.no-1-f;n.de=m,f=s+a*(h-r),m=l?f:this.no-1-f,n._e=m,f=s+a*(u-r),m=l?f:this.no-1-f,n.ue=m,f=s+a*(c-r),m=l?f:this.no-1-f,n.fe=m}}fn(t,e){const i=this.So(t,e);return this.Fo(i,e)}Fo(t,e){let i=t;return this.mh()?i=function(t,e){return e<0&&(t=-t),t/100*e+e}(i,e):this.Po()&&(i=function(t,e){return t-=100,e<0&&(t=-t),t/100*e+e}(i,e)),i}Ra(){return this.co}Wo(){if(this.do)return this.do;let t=[];for(let e=0;e<this.co.length;e++){const i=this.co[e];null===i.Xi()&&i.Ki(e+1),t.push(i)}return t=di(t),this.do=t,this.do}jo(t){-1===this.co.indexOf(t)&&(this.co.push(t),this.ya(),this.Ho())}$o(t){const e=this.co.indexOf(t);if(-1===e)throw new Error("source is not attached to scale");this.co.splice(e,1),0===this.co.length&&(this.yo({Nn:!0}),this.Do(null)),this.ya(),this.Ho()}Ct(){let t=null;for(const e of this.co){const i=e.Ct();null!==i&&(null===t||i.sa<t.sa)&&(t=i)}return null===t?null:t.Ot}Ro(){return this._n.invertScale}Na(){const t=null===this.Ct();if(null!==this.fo&&(t||this.fo.Uo===t))return this.fo.Na;this.xo.Za();const e=this.xo.Na();return this.fo={Na:e,Uo:t},this._o.m(),e}qo(){return this._o}Yo(t){this.mh()||this.Po()||null===this.vo&&null===this.eo&&(this.Ei()||(this.vo=this.no-t,this.eo=w(this.Bh()).Sh()))}Xo(t){if(this.mh()||this.Po())return;if(null===this.vo)return;this.yo({Nn:!1}),(t=this.no-t)<0&&(t=0);let e=(this.vo+.2*(this.no-1))/(t+.2*(this.no-1));const i=w(this.eo).Sh();e=Math.max(e,.1),i.Th(e),this.Do(i)}Ko(){this.mh()||this.Po()||(this.vo=null,this.eo=null)}Zo(t){this.To()||null===this.po&&null===this.eo&&(this.Ei()||(this.po=t,this.eo=w(this.Bh()).Sh()))}Go(t){if(this.To())return;if(null===this.po)return;const e=w(this.Bh()).Ch()/(this.Vo()-1);let i=t-this.po;this.Ro()&&(i*=-1);const s=i*e,n=w(this.eo).Sh();n.Ph(s),this.Do(n,!0),this.fo=null}Jo(){this.To()||null!==this.po&&(this.po=null,this.eo=null)}fa(){return this.va||this.ya(),this.va}Ni(t,e){switch(this._n.mode){case 2:return this.Qo(ei(t,e));case 3:return this.fa().format(si(t,e));default:return this.Lh(t)}}Qa(t){switch(this._n.mode){case 2:return this.Qo(t);case 3:return this.fa().format(t);default:return this.Lh(t)}}Hl(t){return this.Lh(t,w(this.t_()).fa())}$l(t,e){return t=ei(t,e),this.Qo(t,mi)}i_(){return this.co}n_(t){this.ro={lo:t,ho:!1}}Rn(){this.co.forEach((t=>t.Rn()))}ya(){this.fo=null;const t=this.t_();let e=100;null!==t&&(e=Math.round(1/t.da())),this.va=pi,this.mh()?(this.va=mi,e=100):this.Po()?(this.va=new ft(100,1),e=100):null!==t&&(this.va=t.fa()),this.xo=new ci(this,e,this.So.bind(this),this.ko.bind(this)),this.xo.Za()}Ho(){this.do=null}t_(){return this.co[0]||null}Io(){return this.Ro()?this._n.scaleMargins.bottom*this.Vt()+this.oo:this._n.scaleMargins.top*this.Vt()+this.ao}zo(){return this.Ro()?this._n.scaleMargins.top*this.Vt()+this.ao:this._n.scaleMargins.bottom*this.Vt()+this.oo}Lo(){this.ro.ho||(this.ro.ho=!0,this.s_())}Co(){this.so=null}ko(t,e){if(this.Lo(),this.Ei())return 0;t=this.io()&&t?ri(t,this.mo):t;const i=w(this.Bh()),s=this.zo()+(this.Vo()-1)*(t-i.kh())/i.Ch();return this.Eo(s)}So(t,e){if(this.Lo(),this.Ei())return 0;const i=this.Eo(t),s=w(this.Bh()),n=s.kh()+s.Ch()*((i-this.zo())/(this.Vo()-1));return this.io()?oi(n,this.mo):n}Oo(){this.fo=null,this.xo.Za()}s_(){const t=this.ro.lo;if(null===t)return;let e=null;const i=this.i_();let s=0,n=0;for(const r of i){if(!r.yt())continue;const i=r.Ct();if(null===i)continue;const o=r.Ol(t.Rs(),t.ui());let h=o&&o.Bh();if(null!==h){switch(this._n.mode){case 1:h=hi(h,this.mo);break;case 2:h=ii(h,i.Ot);break;case 3:h=ni(h,i.Ot)}if(e=null===e?h:e.Jn(w(h)),null!==o){const t=o.Vh();null!==t&&(s=Math.max(s,t.above),n=Math.max(n,t.below))}}}if(s===this.ao&&n===this.oo||(this.ao=s,this.oo=n,this.fo=null,this.Co()),null!==e){if(e.kh()===e.yh()){const t=this.t_(),i=5*(null===t||this.mh()||this.Po()?1:t.da());this.io()&&(e=li(e,this.mo)),e=new ze(e.kh()-i,e.yh()+i),this.io()&&(e=hi(e,this.mo))}if(this.io()){const t=li(e,this.mo),i=ai(t);if(r=i,o=this.mo,r.Fa!==o.Fa||r.Wa!==o.Wa){const s=null!==this.eo?li(this.eo,this.mo):null;this.mo=i,e=hi(t,i),null!==s&&(this.eo=hi(s,i))}}this.Do(e)}else null===this.Oh&&(this.Do(new ze(-.5,.5)),this.mo=ai(null));var r,o;this.ro.ho=!0}No(){return this.mh()?ei:this.Po()?si:this.io()?t=>ri(t,this.mo):null}e_(t,e,i){return void 0===e?(void 0===i&&(i=this.fa()),i.format(t)):e(t)}Lh(t,e){return this.e_(t,this.Mo.priceFormatter,e)}Qo(t,e){return this.e_(t,this.Mo.percentageFormatter,e)}}class gi{constructor(t,e){this.co=[],this.r_=new Map,this.no=0,this.h_=0,this.l_=1e3,this.do=null,this.a_=new k,this.Ml=t,this.Hi=e,this.o_=new Qe(this);const i=e.W();this.__=this.u_("left",i.leftPriceScale),this.c_=this.u_("right",i.rightPriceScale),this.__.Ao().l(this.d_.bind(this,this.__),this),this.c_.Ao().l(this.d_.bind(this,this.c_),this),this.f_(i)}f_(t){if(t.leftPriceScale&&this.__.Fh(t.leftPriceScale),t.rightPriceScale&&this.c_.Fh(t.rightPriceScale),t.localization&&(this.__.ya(),this.c_.ya()),t.overlayPriceScales){const e=Array.from(this.r_.values());for(const i of e){const e=w(i[0].Dt());e.Fh(t.overlayPriceScales),t.localization&&e.ya()}}}v_(t){switch(t){case"left":return this.__;case"right":return this.c_}return this.r_.has(t)?b(this.r_.get(t))[0].Dt():null}S(){this.$t().p_().p(this),this.__.Ao().p(this),this.c_.Ao().p(this),this.co.forEach((t=>{t.S&&t.S()})),this.a_.m()}m_(){return this.l_}b_(t){this.l_=t}$t(){return this.Hi}ji(){return this.h_}Vt(){return this.no}w_(t){this.h_=t,this.g_()}Bo(t){this.no=t,this.__.Bo(t),this.c_.Bo(t),this.co.forEach((e=>{if(this.ur(e)){const i=e.Dt();null!==i&&i.Bo(t)}})),this.g_()}Ra(){return this.co}ur(t){const e=t.Dt();return null===e||this.__!==e&&this.c_!==e}jo(t,e,i){const s=void 0!==i?i:this.x_().M_+1;this.S_(t,e,s)}$o(t){const e=this.co.indexOf(t);g(-1!==e,"removeDataSource: invalid data source"),this.co.splice(e,1);const i=w(t.Dt()).ka();if(this.r_.has(i)){const e=b(this.r_.get(i)),s=e.indexOf(t);-1!==s&&(e.splice(s,1),0===e.length&&this.r_.delete(i))}const s=t.Dt();s&&s.Ra().indexOf(t)>=0&&s.$o(t),null!==s&&(s.Ho(),this.k_(s)),this.do=null}dr(t){return t===this.__?"left":t===this.c_?"right":"overlay"}y_(){return this.__}C_(){return this.c_}T_(t,e){t.Yo(e)}P_(t,e){t.Xo(e),this.g_()}R_(t){t.Ko()}D_(t,e){t.Zo(e)}O_(t,e){t.Go(e),this.g_()}A_(t){t.Jo()}g_(){this.co.forEach((t=>{t.Rn()}))}dn(){let t=null;return this.Hi.W().rightPriceScale.visible&&0!==this.c_.Ra().length?t=this.c_:this.Hi.W().leftPriceScale.visible&&0!==this.__.Ra().length?t=this.__:0!==this.co.length&&(t=this.co[0].Dt()),null===t&&(t=this.c_),t}cr(){let t=null;return this.Hi.W().rightPriceScale.visible?t=this.c_:this.Hi.W().leftPriceScale.visible&&(t=this.__),t}k_(t){null!==t&&t.To()&&this.B_(t)}V_(t){const e=this.Ml.qs();t.yo({Nn:!0}),null!==e&&t.n_(e),this.g_()}I_(){this.B_(this.__),this.B_(this.c_)}z_(){this.k_(this.__),this.k_(this.c_),this.co.forEach((t=>{this.ur(t)&&this.k_(t.Dt())})),this.g_(),this.Hi.Wh()}Wo(){return null===this.do&&(this.do=di(this.co)),this.do}L_(){return this.a_}E_(){return this.o_}B_(t){const e=t.i_();if(e&&e.length>0&&!this.Ml.Ei()){const e=this.Ml.qs();null!==e&&t.n_(e)}t.Rn()}x_(){const t=this.Wo();if(0===t.length)return{N_:0,M_:0};let e=0,i=0;for(let s=0;s<t.length;s++){const n=t[s].Xi();null!==n&&(n<e&&(e=n),n>i&&(i=n))}return{N_:e,M_:i}}S_(t,e,i){let s=this.v_(e);if(null===s&&(s=this.u_(e,this.Hi.W().overlayPriceScales)),this.co.push(t),!ut(e)){const i=this.r_.get(e)||[];i.push(t),this.r_.set(e,i)}s.jo(t),t.Zi(s),t.Ki(i),this.k_(s),this.do=null}d_(t,e,i){e.Sr!==i.Sr&&this.B_(t)}u_(t,e){const i=Object.assign({visible:!0,autoScale:!0},W(e)),s=new vi(t,i,this.Hi.W().layout,this.Hi.W().localization);return s.Bo(this.Vt()),s}}class bi{constructor(t,e,i=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ge=new Map,this.Ze=new Map,this.F_=t,this.W_=e,this.Je=i}j_(t){const e=t.time,i=this.W_.cacheKey(e),s=this.Ge.get(i);if(void 0!==s)return s.H_;if(this.Ye===this.Je){const t=this.Ze.get(this.Ke);this.Ze.delete(this.Ke),this.Ge.delete(b(t)),this.Ke++,this.Ye--}const n=this.F_(t);return this.Ge.set(i,{H_:n,nr:this.Xe}),this.Ze.set(this.Xe,i),this.Ye++,this.Xe++,n}}class wi{constructor(t,e){g(t<=e,"right should be >= left"),this.U_=t,this.q_=e}Rs(){return this.U_}ui(){return this.q_}Y_(){return this.q_-this.U_+1}Yr(t){return this.U_<=t&&t<=this.q_}xh(t){return this.U_===t.Rs()&&this.q_===t.ui()}}function Si(t,e){return null===t||null===e?t===e:t.xh(e)}class yi{constructor(){this.X_=new Map,this.Ge=null,this.K_=!1}Z_(t){this.K_=t,this.Ge=null}G_(t,e){this.J_(e),this.Ge=null;for(let i=e;i<t.length;++i){const e=t[i];let s=this.X_.get(e.timeWeight);void 0===s&&(s=[],this.X_.set(e.timeWeight,s)),s.push({index:i,time:e.time,weight:e.timeWeight,originalTime:e.originalTime})}}Q_(t,e){const i=Math.ceil(e/t);return null!==this.Ge&&this.Ge.tu===i||(this.Ge={Na:this.iu(i),tu:i}),this.Ge.Na}J_(t){if(0===t)return void this.X_.clear();const e=[];this.X_.forEach(((i,s)=>{t<=i[0].index?e.push(s):i.splice(Bt(i,t,(e=>e.index<t)),1/0)}));for(const t of e)this.X_.delete(t)}iu(t){let e=[];for(const i of Array.from(this.X_.keys()).sort(((t,e)=>e-t))){if(!this.X_.get(i))continue;const s=e;e=[];const n=s.length;let r=0;const o=b(this.X_.get(i)),h=o.length;let l=1/0,a=-1/0;for(let i=0;i<h;i++){const h=o[i],u=h.index;for(;r<n;){const t=s[r],i=t.index;if(!(i<u)){l=i;break}r++,e.push(t),a=i,l=1/0}if(l-u>=t&&u-a>=t)e.push(h),a=u;else if(this.K_)return s}for(;r<n;r++)e.push(s[r])}return e}}class xi{constructor(t){this.nu=t}su(){return null===this.nu?null:new wi(Math.floor(this.nu.Rs()),Math.ceil(this.nu.ui()))}eu(){return this.nu}static ru(){return new xi(null)}}function Ci(t,e){return t.weight>e.weight?t:e}class Mi{constructor(t,e,i,s){this.h_=0,this.hu=null,this.lu=[],this.po=null,this.vo=null,this.au=new yi,this.ou=new Map,this._u=xi.ru(),this.uu=!0,this.cu=new k,this.du=new k,this.fu=new k,this.vu=null,this.pu=null,this.mu=[],this._n=e,this.Mo=i,this.bu=e.rightOffset,this.wu=e.barSpacing,this.Hi=t,this.W_=s,this.gu(),this.au.Z_(e.uniformDistribution)}W(){return this._n}Mu(t){R(this.Mo,t),this.xu(),this.gu()}Fh(t,e){var i;R(this._n,t),this._n.fixLeftEdge&&this.Su(),this._n.fixRightEdge&&this.ku(),void 0!==t.barSpacing&&this.Hi.Kn(t.barSpacing),void 0!==t.rightOffset&&this.Hi.Zn(t.rightOffset),void 0!==t.minBarSpacing&&this.Hi.Kn(null!==(i=t.barSpacing)&&void 0!==i?i:this.wu),this.xu(),this.gu(),this.fu.m()}vn(t){var e,i;return null!==(i=null===(e=this.lu[t])||void 0===e?void 0:e.time)&&void 0!==i?i:null}$i(t){var e;return null!==(e=this.lu[t])&&void 0!==e?e:null}Ta(t,e){if(this.lu.length<1)return null;if(this.W_.key(t)>this.W_.key(this.lu[this.lu.length-1].time))return e?this.lu.length-1:null;const i=Bt(this.lu,this.W_.key(t),((t,e)=>this.W_.key(t.time)<e));return this.W_.key(t)<this.W_.key(this.lu[i].time)?e?i:null:i}Ei(){return 0===this.h_||0===this.lu.length||null===this.hu}Ca(){return this.lu.length>0}qs(){return this.yu(),this._u.su()}Cu(){return this.yu(),this._u.eu()}Tu(){const t=this.qs();if(null===t)return null;const e={from:t.Rs(),to:t.ui()};return this.Pu(e)}Pu(t){const e=Math.round(t.from),i=Math.round(t.to),s=w(this.Ru()),n=w(this.Du());return{from:w(this.$i(Math.max(s,e))),to:w(this.$i(Math.min(n,i)))}}Ou(t){return{from:w(this.Ta(t.from,!0)),to:w(this.Ta(t.to,!0))}}ji(){return this.h_}w_(t){if(!isFinite(t)||t<=0)return;if(this.h_===t)return;const e=this.Cu(),i=this.h_;if(this.h_=t,this.uu=!0,this._n.lockVisibleTimeRangeOnResize&&0!==i){const e=this.wu*t/i;this.wu=e}if(this._n.fixLeftEdge&&null!==e&&e.Rs()<=0){const e=i-t;this.bu-=Math.round(e/this.wu)+1,this.uu=!0}this.Au(),this.Bu()}It(t){if(this.Ei()||!P(t))return 0;const e=this.Vu()+this.bu-t;return this.h_-(e+.5)*this.wu-1}Zs(t,e){const i=this.Vu(),s=void 0===e?0:e.from,n=void 0===e?t.length:e.to;for(let e=s;e<n;e++){const s=t[e].ot,n=i+this.bu-s,r=this.h_-(n+.5)*this.wu-1;t[e].nt=r}}Iu(t){return Math.ceil(this.zu(t))}Zn(t){this.uu=!0,this.bu=t,this.Bu(),this.Hi.Lu(),this.Hi.Wh()}ee(){return this.wu}Kn(t){this.Eu(t),this.Bu(),this.Hi.Lu(),this.Hi.Wh()}Nu(){return this.bu}Na(){if(this.Ei())return null;if(null!==this.pu)return this.pu;const t=this.wu,e=5*(this.Hi.W().layout.fontSize+4)/8*(this._n.tickMarkMaxCharacterLength||8),i=Math.round(e/t),s=w(this.qs()),n=Math.max(s.Rs(),s.Rs()-i),r=Math.max(s.ui(),s.ui()-i),o=this.au.Q_(t,e),h=this.Ru()+i,l=this.Du()-i,a=this.Fu(),u=this._n.fixLeftEdge||a,c=this._n.fixRightEdge||a;let d=0;for(const t of o){if(!(n<=t.index&&t.index<=r))continue;let i;d<this.mu.length?(i=this.mu[d],i.coord=this.It(t.index),i.label=this.Wu(t),i.weight=t.weight):(i={needAlignCoordinate:!1,coord:this.It(t.index),label:this.Wu(t),weight:t.weight},this.mu.push(i)),this.wu>e/2&&!a?i.needAlignCoordinate=!1:i.needAlignCoordinate=u&&t.index<=h||c&&t.index>=l,d++}return this.mu.length=d,this.pu=this.mu,this.mu}ju(){this.uu=!0,this.Kn(this._n.barSpacing),this.Zn(this._n.rightOffset)}Hu(t){this.uu=!0,this.hu=t,this.Bu(),this.Su()}$u(t,e){const i=this.zu(t),s=this.ee(),n=s+e*(s/10);this.Kn(n),this._n.rightBarStaysOnScroll||this.Zn(this.Nu()+(i-this.zu(t)))}Yo(t){this.po&&this.Jo(),null===this.vo&&null===this.vu&&(this.Ei()||(this.vo=t,this.Uu()))}Xo(t){if(null===this.vu)return;const e=Ct(this.h_-t,0,this.h_),i=Ct(this.h_-w(this.vo),0,this.h_);0!==e&&0!==i&&this.Kn(this.vu.ee*e/i)}Ko(){null!==this.vo&&(this.vo=null,this.qu())}Zo(t){null===this.po&&null===this.vu&&(this.Ei()||(this.po=t,this.Uu()))}Go(t){if(null===this.po)return;const e=(this.po-t)/this.ee();this.bu=w(this.vu).Nu+e,this.uu=!0,this.Bu()}Jo(){null!==this.po&&(this.po=null,this.qu())}Yu(){this.Xu(this._n.rightOffset)}Xu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.bu,s=performance.now();this.Hi.qn({Ku:t=>(t-s)/e>=1,Zu:n=>{const r=(n-s)/e;return r>=1?t:i+(t-i)*r}})}bt(t,e){this.uu=!0,this.lu=t,this.au.G_(t,e),this.Bu()}Gu(){return this.cu}Ju(){return this.du}Qu(){return this.fu}Vu(){return this.hu||0}tc(t){const e=t.Y_();this.Eu(this.h_/e),this.bu=t.ui()-this.Vu(),this.Bu(),this.uu=!0,this.Hi.Lu(),this.Hi.Wh()}ic(){const t=this.Ru(),e=this.Du();null!==t&&null!==e&&this.tc(new wi(t,e+this._n.rightOffset))}nc(t){const e=new wi(t.from,t.to);this.tc(e)}Ui(t){return void 0!==this.Mo.timeFormatter?this.Mo.timeFormatter(t.originalTime):this.W_.formatHorzItem(t.time)}Fu(){const{handleScroll:t,handleScale:e}=this.Hi.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Ru(){return 0===this.lu.length?null:0}Du(){return 0===this.lu.length?null:this.lu.length-1}sc(t){return(this.h_-1-t)/this.wu}zu(t){const e=this.sc(t),i=this.Vu()+this.bu-e;return Math.round(1e6*i)/1e6}Eu(t){const e=this.wu;this.wu=t,this.Au(),e!==this.wu&&(this.uu=!0,this.ec())}yu(){if(!this.uu)return;if(this.uu=!1,this.Ei())return void this.rc(xi.ru());const t=this.Vu(),e=this.h_/this.wu,i=this.bu+t,s=new wi(i-e+1,i);this.rc(new xi(s))}Au(){const t=this.hc();if(this.wu<t&&(this.wu=t,this.uu=!0),0!==this.h_){const t=.5*this.h_;this.wu>t&&(this.wu=t,this.uu=!0)}}hc(){return this._n.fixLeftEdge&&this._n.fixRightEdge&&0!==this.lu.length?this.h_/this.lu.length:this._n.minBarSpacing}Bu(){const t=this.lc();this.bu>t&&(this.bu=t,this.uu=!0);const e=this.ac();null!==e&&this.bu<e&&(this.bu=e,this.uu=!0)}ac(){const t=this.Ru(),e=this.hu;return null===t||null===e?null:t-e-1+(this._n.fixLeftEdge?this.h_/this.wu:Math.min(2,this.lu.length))}lc(){return this._n.fixRightEdge?0:this.h_/this.wu-Math.min(2,this.lu.length)}Uu(){this.vu={ee:this.ee(),Nu:this.Nu()}}qu(){this.vu=null}Wu(t){let e=this.ou.get(t.weight);return void 0===e&&(e=new bi((t=>this.oc(t)),this.W_),this.ou.set(t.weight,e)),e.j_(t)}oc(t){return this.W_.formatTickmark(t,this.Mo)}rc(t){const e=this._u;this._u=t,Si(e.su(),this._u.su())||this.cu.m(),Si(e.eu(),this._u.eu())||this.du.m(),this.ec()}ec(){this.pu=null}xu(){this.ec(),this.ou.clear()}gu(){this.W_.updateFormatter(this.Mo)}Su(){if(!this._n.fixLeftEdge)return;const t=this.Ru();if(null===t)return;const e=this.qs();if(null===e)return;const i=e.Rs()-t;if(i<0){const t=this.bu-i-1;this.Zn(t)}this.Au()}ku(){this.Bu(),this.Au()}}class _i{K(t,e,i){t.useMediaCoordinateSpace((t=>this.Z(t,e,i)))}pl(t,e,i){t.useMediaCoordinateSpace((t=>this._c(t,e,i)))}_c(t,e,i){}}class Ti extends _i{constructor(t){super(),this.uc=new Map,this.zt=t}Z(t){}_c(t){if(!this.zt.yt)return;const{context:e,mediaSize:i}=t;let s=0;for(const t of this.zt.cc){if(0===t.Zt.length)continue;e.font=t.R;const n=this.dc(e,t.Zt);n>i.width?t.$u=i.width/n:t.$u=1,s+=t.fc*t.$u}let n=0;switch(this.zt.vc){case"top":n=0;break;case"center":n=Math.max((i.height-s)/2,0);break;case"bottom":n=Math.max(i.height-s,0)}e.fillStyle=this.zt.O;for(const t of this.zt.cc){e.save();let s=0;switch(this.zt.mc){case"left":e.textAlign="left",s=t.fc/2;break;case"center":e.textAlign="center",s=i.width/2;break;case"right":e.textAlign="right",s=i.width-1-t.fc/2}e.translate(s,n),e.textBaseline="top",e.font=t.R,e.scale(t.$u,t.$u),e.fillText(t.Zt,0,t.bc),e.restore(),n+=t.fc*t.$u}}dc(t,e){const i=this.wc(t.font);let s=i.get(e);return void 0===s&&(s=t.measureText(e).width,i.set(e,s)),s}wc(t){let e=this.uc.get(t);return void 0===e&&(e=new Map,this.uc.set(t,e)),e}}class zi{constructor(t){this.ft=!0,this.Ft={yt:!1,O:"",cc:[],vc:"center",mc:"center"},this.Wt=new Ti(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.W(),e=this.Ft;e.yt=t.visible,e.yt&&(e.O=t.color,e.mc=t.horzAlign,e.vc=t.vertAlign,e.cc=[{Zt:t.text,R:j(t.fontSize,t.fontFamily,t.fontStyle),fc:1.2*t.fontSize,bc:0,$u:0}])}}class Ii extends ht{constructor(t,e){super(),this._n=e,this.mn=new zi(this)}Tn(){return[]}Cn(){return[this.mn]}W(){return this._n}Rn(){this.mn.bt()}}var Ei,ki,Ri,Bi,Pi;!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(Ei||(Ei={}));class Oi{constructor(t,e,i){this.gc=[],this.Mc=[],this.h_=0,this.xc=null,this.Sc=new k,this.kc=new k,this.yc=null,this.Cc=t,this._n=e,this.W_=i,this.Tc=new $(this),this.Ml=new Mi(this,e.timeScale,this._n.localization,i),this.vt=new at(this,e.crosshair),this.Pc=new Je(e.crosshair),this.Rc=new Ii(this,e.watermark),this.Dc(),this.gc[0].b_(2e3),this.Oc=this.Ac(0),this.Bc=this.Ac(1)}ql(){this.Vc(ct.ns())}Wh(){this.Vc(ct.ts())}ra(){this.Vc(new ct(1))}Yl(t){const e=this.Ic(t);this.Vc(e)}zc(){return this.xc}Lc(t){const e=this.xc;this.xc=t,null!==e&&this.Yl(e.Ec),null!==t&&this.Yl(t.Ec)}W(){return this._n}Fh(t){R(this._n,t),this.gc.forEach((e=>e.f_(t))),void 0!==t.timeScale&&this.Ml.Fh(t.timeScale),void 0!==t.localization&&this.Ml.Mu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Sc.m(),this.Oc=this.Ac(0),this.Bc=this.Ac(1),this.ql()}Nc(t,e){if("left"===t)return void this.Fh({leftPriceScale:e});if("right"===t)return void this.Fh({rightPriceScale:e});const i=this.Fc(t);null!==i&&(i.Dt.Fh(e),this.Sc.m())}Fc(t){for(const e of this.gc){const i=e.v_(t);if(null!==i)return{Ht:e,Dt:i}}return null}St(){return this.Ml}Wc(){return this.gc}jc(){return this.Rc}Hc(){return this.vt}$c(){return this.kc}Uc(t,e){t.Bo(e),this.Lu()}w_(t){this.h_=t,this.Ml.w_(this.h_),this.gc.forEach((e=>e.w_(t))),this.Lu()}Dc(t){const e=new gi(this.Ml,this);void 0!==t?this.gc.splice(t,0,e):this.gc.push(e);const i=void 0===t?this.gc.length-1:t,s=ct.ns();return s.Ln(i,{En:0,Nn:!0}),this.Vc(s),e}T_(t,e,i){t.T_(e,i)}P_(t,e,i){t.P_(e,i),this.Xl(),this.Vc(this.qc(t,2))}R_(t,e){t.R_(e),this.Vc(this.qc(t,2))}D_(t,e,i){e.To()||t.D_(e,i)}O_(t,e,i){e.To()||(t.O_(e,i),this.Xl(),this.Vc(this.qc(t,2)))}A_(t,e){e.To()||(t.A_(e),this.Vc(this.qc(t,2)))}V_(t,e){t.V_(e),this.Vc(this.qc(t,2))}Yc(t){this.Ml.Yo(t)}Xc(t,e){const i=this.St();if(i.Ei()||0===e)return;const s=i.ji();t=Math.max(1,Math.min(t,s)),i.$u(t,e),this.Lu()}Kc(t){this.Zc(0),this.Gc(t),this.Jc()}Qc(t){this.Ml.Xo(t),this.Lu()}td(){this.Ml.Ko(),this.Wh()}Zc(t){this.Ml.Zo(t)}Gc(t){this.Ml.Go(t),this.Lu()}Jc(){this.Ml.Jo(),this.Wh()}wt(){return this.Mc}nd(t,e,i,s,n){this.vt.bn(t,e);let r=NaN,o=this.Ml.Iu(t);const h=this.Ml.qs();null!==h&&(o=Math.min(Math.max(h.Rs(),o),h.ui()));const l=s.dn(),a=l.Ct();null!==a&&(r=l.fn(e,a)),r=this.Pc.Pa(r,o,s),this.vt.xn(o,r,s),this.ra(),n||this.kc.m(this.vt.xt(),{x:t,y:e},i)}sd(t,e,i){const s=i.dn(),n=s.Ct(),r=s.Rt(t,w(n)),o=this.Ml.Ta(e,!0),h=this.Ml.It(w(o));this.nd(h,r,null,i,!0)}ed(t){this.Hc().kn(),this.ra(),t||this.kc.m(null,null,null)}Xl(){const t=this.vt.Ht();if(null!==t){const e=this.vt.gn(),i=this.vt.Mn();this.nd(e,i,null,t)}this.vt.Rn()}rd(t,e,i){const s=this.Ml.vn(0);void 0!==e&&void 0!==i&&this.Ml.bt(e,i);const n=this.Ml.vn(0),r=this.Ml.Vu(),o=this.Ml.qs();if(null!==o&&null!==s&&null!==n){const e=o.Yr(r),h=this.W_.key(s)>this.W_.key(n),l=null!==t&&t>r&&!h,a=this.Ml.W().allowShiftVisibleRangeOnWhitespaceReplacement,u=e&&(!(void 0===i)||a)&&this.Ml.W().shiftVisibleRangeOnNewBar;if(l&&!u){const e=t-r;this.Ml.Zn(this.Ml.Nu()-e)}}this.Ml.Hu(t)}Gl(t){null!==t&&t.z_()}_r(t){const e=this.gc.find((e=>e.Wo().includes(t)));return void 0===e?null:e}Lu(){this.Rc.Rn(),this.gc.forEach((t=>t.z_())),this.Xl()}S(){this.gc.forEach((t=>t.S())),this.gc.length=0,this._n.localization.priceFormatter=void 0,this._n.localization.percentageFormatter=void 0,this._n.localization.timeFormatter=void 0}hd(){return this.Tc}vr(){return this.Tc.W()}p_(){return this.Sc}ld(t,e,i){const s=this.gc[0],n=this.ad(e,t,s,i);return this.Mc.push(n),1===this.Mc.length?this.ql():this.Wh(),n}od(t){const e=this._r(t),i=this.Mc.indexOf(t);g(-1!==i,"Series not found"),this.Mc.splice(i,1),w(e).$o(t),t.S&&t.S()}Ul(t,e){const i=w(this._r(t));i.$o(t);const s=this.Fc(e);if(null===s){const s=t.Xi();i.jo(t,e,s)}else{const n=s.Ht===i?t.Xi():void 0;s.Ht.jo(t,e,n)}}ic(){const t=ct.ts();t.jn(),this.Vc(t)}_d(t){const e=ct.ts();e.Un(t),this.Vc(e)}Xn(){const t=ct.ts();t.Xn(),this.Vc(t)}Kn(t){const e=ct.ts();e.Kn(t),this.Vc(e)}Zn(t){const e=ct.ts();e.Zn(t),this.Vc(e)}qn(t){const e=ct.ts();e.qn(t),this.Vc(e)}Hn(){const t=ct.ts();t.Hn(),this.Vc(t)}ud(){return this._n.rightPriceScale.visible?"right":"left"}dd(){return this.Bc}q(){return this.Oc}Bt(t){const e=this.Bc,i=this.Oc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.yc||this.yc.ys!==i||this.yc.Cs!==e)this.yc={ys:i,Cs:e,fd:new Map};else{const e=this.yc.fd.get(t);if(void 0!==e)return e}const s=function(t,e,i){const[s,n,r,o]=I(t),[h,l,a,u]=I(e),c=[x(s+i*(h-s)),x(n+i*(l-n)),x(r+i*(a-r)),C(o+i*(u-o))];return`rgba(${c[0]}, ${c[1]}, ${c[2]}, ${c[3]})`}(i,e,t/100);return this.yc.fd.set(t,s),s}qc(t,e){const i=new ct(e);if(null!==t){const s=this.gc.indexOf(t);i.Ln(s,{En:e})}return i}Ic(t,e){return void 0===e&&(e=2),this.qc(this._r(t),e)}Vc(t){this.Cc&&this.Cc(t),this.gc.forEach((t=>t.E_().jh().bt()))}ad(t,e,i,s){const n=new Xe(this,t,e,i,s),r=void 0!==t.priceScaleId?t.priceScaleId:this.ud();return i.jo(n,r),ut(r)||n.Fh(t),n}Ac(t){const e=this._n.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}}function Hi(t){return!B(t)&&!O(t)}function Wi(t){return B(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(ki||(ki={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Ri||(Ri={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Bi||(Bi={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Pi||(Pi={}));const Vi=t=>t.getUTCFullYear();class Li{constructor(t="yyyy-MM-dd",e="default"){this.vd=t,this.pd=e}j_(t){return function(t,e,i){return e.replace(/yyyy/g,(t=>dt(Vi(t),4))(t)).replace(/yy/g,(t=>dt(Vi(t)%100,2))(t)).replace(/MMMM/g,((t,e)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"long"}))(t,i)).replace(/MMM/g,((t,e)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"short"}))(t,i)).replace(/MM/g,(t=>dt((t=>t.getUTCMonth()+1)(t),2))(t)).replace(/dd/g,(t=>dt((t=>t.getUTCDate())(t),2))(t))}(t,this.vd,this.pd)}}class Ni{constructor(t){this.md=t||"%h:%m:%s"}j_(t){return this.md.replace("%h",dt(t.getUTCHours(),2)).replace("%m",dt(t.getUTCMinutes(),2)).replace("%s",dt(t.getUTCSeconds(),2))}}const ji={bd:"yyyy-MM-dd",wd:"%h:%m:%s",gd:" ",Md:"default"};class $i{constructor(t={}){const e=Object.assign(Object.assign({},ji),t);this.xd=new Li(e.bd,e.Md),this.Sd=new Ni(e.wd),this.kd=e.gd}j_(t){return`${this.xd.j_(t)}${this.kd}${this.Sd.j_(t)}`}}function Fi(t){return 60*t*60*1e3}function Di(t){return 60*t*1e3}const Ai=[{yd:1e3,Cd:10},{yd:Di(1),Cd:20},{yd:Di(5),Cd:21},{yd:Di(30),Cd:22},{yd:Fi(1),Cd:30},{yd:Fi(3),Cd:31},{yd:Fi(6),Cd:32},{yd:Fi(12),Cd:33}];function Ui(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=Ai.length-1;i>=0;--i)if(Math.floor(e.getTime()/Ai[i].yd)!==Math.floor(t.getTime()/Ai[i].yd))return Ai[i].Cd;return 0}function Yi(t){let e=t;if(O(t)&&(e=Zi(t)),!Hi(e))throw new Error("time must be of type BusinessDay");const i=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Td:Math.round(i.getTime()/1e3),Pd:e}}function Gi(t){if(!Wi(t))throw new Error("time must be of type isUTCTimestamp");return{Td:t}}function Zi(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Xi(t){O(t.time)&&(t.time=Zi(t.time))}class Ji{options(){return this._n}setOptions(t){this._n=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(t){t.forEach(Xi)}(t):Xi(t)}createConverterToInternalObj(t){return w(function(t){return 0===t.length?null:Hi(t[0].time)||O(t[0].time)?Yi:Gi}(t))}key(t){return"object"==typeof t&&"Td"in t?t.Td:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return void 0===e.Pd?new Date(1e3*e.Td).getTime():new Date(Date.UTC(e.Pd.year,e.Pd.month-1,e.Pd.day)).getTime()}convertHorzItemToInternal(t){return Wi(e=t)?Gi(e):Hi(e)?Yi(e):Yi(Zi(e));var e}updateFormatter(t){if(!this._n)return;const e=t.dateFormat;this._n.timeScale.timeVisible?this.Rd=new $i({bd:e,wd:this._n.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",gd:"   ",Md:t.locale}):this.Rd=new Li(e,t.locale)}formatHorzItem(t){const e=t;return this.Rd.j_(new Date(1e3*e.Td))}formatTickmark(t,e){const i=function(t,e,i){switch(t){case 0:case 10:return e?i?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return e?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this._n.timeScale.timeVisible,this._n.timeScale.secondsVisible),s=this._n.timeScale;if(void 0!==s.tickMarkFormatter){const n=s.tickMarkFormatter(t.originalTime,i,e.locale);if(null!==n)return n}return function(t,e,i){const s={};switch(e){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}const n=void 0===t.Pd?new Date(1e3*t.Td):new Date(Date.UTC(t.Pd.year,t.Pd.month-1,t.Pd.day));return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()).toLocaleString(i,s)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(Ci,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){!function(t,e=0){if(0===t.length)return;let i=0===e?null:t[e-1].time.Td,s=null!==i?new Date(1e3*i):null,n=0;for(let r=e;r<t.length;++r){const e=t[r],o=new Date(1e3*e.time.Td);null!==s&&(e.timeWeight=Ui(o,s)),n+=e.time.Td-(i||e.time.Td),i=e.time.Td,s=o}if(0===e&&t.length>1){const e=Math.ceil(n/(t.length-1)),i=new Date(1e3*(t[0].time.Td-e));t[0].timeWeight=Ui(new Date(1e3*t[0].time.Td),i)}}(t,e)}static Dd(t){return R({localization:{dateFormat:"dd MMM 'yy"}},null!=t?t:{})}}const Ki="undefined"!=typeof window;function qi(){return!!Ki&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Qi(){return!!Ki&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function ts(t){return t+t%2}function es(t,e){return t.Od-e.Od}function is(t,e,i){const s=(t.Od-e.Od)/(t.ot-e.ot);return Math.sign(s)*Math.min(Math.abs(s),i)}class ss{constructor(t,e,i,s){this.Ad=null,this.Bd=null,this.Vd=null,this.Id=null,this.zd=null,this.Ld=0,this.Ed=0,this.Nd=t,this.Fd=e,this.Wd=i,this.ss=s}jd(t,e){if(null!==this.Ad){if(this.Ad.ot===e)return void(this.Ad.Od=t);if(Math.abs(this.Ad.Od-t)<this.ss)return}this.Id=this.Vd,this.Vd=this.Bd,this.Bd=this.Ad,this.Ad={ot:e,Od:t}}Pr(t,e){if(null===this.Ad||null===this.Bd)return;if(e-this.Ad.ot>50)return;let i=0;const s=is(this.Ad,this.Bd,this.Fd),n=es(this.Ad,this.Bd),r=[s],o=[n];if(i+=n,null!==this.Vd){const t=is(this.Bd,this.Vd,this.Fd);if(Math.sign(t)===Math.sign(s)){const e=es(this.Bd,this.Vd);if(r.push(t),o.push(e),i+=e,null!==this.Id){const t=is(this.Vd,this.Id,this.Fd);if(Math.sign(t)===Math.sign(s)){const e=es(this.Vd,this.Id);r.push(t),o.push(e),i+=e}}}}let h=0;for(let t=0;t<r.length;++t)h+=o[t]/i*r[t];Math.abs(h)<this.Nd||(this.zd={Od:t,ot:e},this.Ed=h,this.Ld=function(t,e){const i=Math.log(e);return Math.log(1*i/-t)/i}(Math.abs(h),this.Wd))}Zu(t){const e=w(this.zd),i=t-e.ot;return e.Od+this.Ed*(Math.pow(this.Wd,i)-1)/Math.log(this.Wd)}Ku(t){return null===this.zd||this.Hd(t)===this.Ld}Hd(t){const e=t-w(this.zd).ot;return Math.min(e,this.Ld)}}function ns(t,e){const i=w(t.ownerDocument).createElement("canvas");t.appendChild(i);const n=(0,s.qW)(i,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(t,e)=>({width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)})});return n.resizeCanvasElement(e),n}function rs(t){var e;t.width=1,t.height=1,null===(e=t.getContext("2d"))||void 0===e||e.clearRect(0,0,1,1)}function os(t,e,i,s){t.pl&&t.pl(e,i,s)}function hs(t,e,i,s){t.K(e,i,s)}function ls(t,e,i,s){const n=t(i,s);for(const t of n){const i=t.gt();null!==i&&e(i)}}class as{constructor(t,e,i){this.$d=0,this.Ud=null,this.qd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Yd=0,this.Xd=null,this.Kd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Zd=null,this.Gd=!1,this.Jd=null,this.Qd=null,this.tf=!1,this.if=!1,this.nf=!1,this.sf=null,this.ef=null,this.rf=null,this.hf=null,this.lf=null,this.af=null,this._f=null,this.uf=0,this.cf=!1,this.df=!1,this.ff=!1,this.vf=0,this.pf=null,this.mf=!Qi(),this.bf=t=>{this.wf(t)},this.gf=t=>{if(this.Mf(t)){const e=this.xf(t);if(++this.Yd,this.Xd&&this.Yd>1){const{Sf:i}=this.kf(ds(t),this.Kd);i<30&&!this.nf&&this.yf(e,this.Tf.Cf),this.Pf()}}else{const e=this.xf(t);if(++this.$d,this.Ud&&this.$d>1){const{Sf:i}=this.kf(ds(t),this.qd);i<5&&!this.if&&this.Rf(e,this.Tf.Df),this.Of()}}},this.Af=t,this.Tf=e,this._n=i,this.Bf()}S(){null!==this.sf&&(this.sf(),this.sf=null),null!==this.ef&&(this.ef(),this.ef=null),null!==this.hf&&(this.hf(),this.hf=null),null!==this.lf&&(this.lf(),this.lf=null),null!==this.af&&(this.af(),this.af=null),null!==this.rf&&(this.rf(),this.rf=null),this.Vf(),this.Of()}If(t){this.hf&&this.hf();const e=this.zf.bind(this);if(this.hf=()=>{this.Af.removeEventListener("mousemove",e)},this.Af.addEventListener("mousemove",e),this.Mf(t))return;const i=this.xf(t);this.Rf(i,this.Tf.Lf),this.mf=!0}Of(){null!==this.Ud&&clearTimeout(this.Ud),this.$d=0,this.Ud=null,this.qd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Pf(){null!==this.Xd&&clearTimeout(this.Xd),this.Yd=0,this.Xd=null,this.Kd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}zf(t){if(this.ff||null!==this.Qd)return;if(this.Mf(t))return;const e=this.xf(t);this.Rf(e,this.Tf.Ef),this.mf=!0}Nf(t){const e=ms(t.changedTouches,w(this.pf));if(null===e)return;if(this.vf=fs(t),null!==this._f)return;if(this.df)return;this.cf=!0;const i=this.kf(ds(e),w(this.Qd)),{Ff:s,Wf:n,Sf:r}=i;if(this.tf||!(r<5)){if(!this.tf){const t=.5*s,e=n>=t&&!this._n.jf(),i=t>n&&!this._n.Hf();e||i||(this.df=!0),this.tf=!0,this.nf=!0,this.Vf(),this.Pf()}if(!this.df){const i=this.xf(t,e);this.yf(i,this.Tf.$f),cs(t)}}}Uf(t){if(0!==t.button)return;const e=this.kf(ds(t),w(this.Jd)),{Sf:i}=e;if(i>=5&&(this.if=!0,this.Of()),this.if){const e=this.xf(t);this.Rf(e,this.Tf.qf)}}kf(t,e){const i=Math.abs(e.nt-t.nt),s=Math.abs(e.st-t.st);return{Ff:i,Wf:s,Sf:i+s}}Yf(t){let e=ms(t.changedTouches,w(this.pf));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null===e)return;this.pf=null,this.vf=fs(t),this.Vf(),this.Qd=null,this.af&&(this.af(),this.af=null);const i=this.xf(t,e);if(this.yf(i,this.Tf.Xf),++this.Yd,this.Xd&&this.Yd>1){const{Sf:t}=this.kf(ds(e),this.Kd);t<30&&!this.nf&&this.yf(i,this.Tf.Cf),this.Pf()}else this.nf||(this.yf(i,this.Tf.Kf),this.Tf.Kf&&cs(t));0===this.Yd&&cs(t),0===t.touches.length&&this.Gd&&(this.Gd=!1,cs(t))}wf(t){if(0!==t.button)return;const e=this.xf(t);if(this.Jd=null,this.ff=!1,this.lf&&(this.lf(),this.lf=null),qi()&&this.Af.ownerDocument.documentElement.removeEventListener("mouseleave",this.bf),!this.Mf(t))if(this.Rf(e,this.Tf.Zf),++this.$d,this.Ud&&this.$d>1){const{Sf:i}=this.kf(ds(t),this.qd);i<5&&!this.if&&this.Rf(e,this.Tf.Df),this.Of()}else this.if||this.Rf(e,this.Tf.Gf)}Vf(){null!==this.Zd&&(clearTimeout(this.Zd),this.Zd=null)}Jf(t){if(null!==this.pf)return;const e=t.changedTouches[0];this.pf=e.identifier,this.vf=fs(t);const i=this.Af.ownerDocument.documentElement;this.nf=!1,this.tf=!1,this.df=!1,this.Qd=ds(e),this.af&&(this.af(),this.af=null);{const e=this.Nf.bind(this),s=this.Yf.bind(this);this.af=()=>{i.removeEventListener("touchmove",e),i.removeEventListener("touchend",s)},i.addEventListener("touchmove",e,{passive:!1}),i.addEventListener("touchend",s,{passive:!1}),this.Vf(),this.Zd=setTimeout(this.Qf.bind(this,t),240)}const s=this.xf(t,e);this.yf(s,this.Tf.tv),this.Xd||(this.Yd=0,this.Xd=setTimeout(this.Pf.bind(this),500),this.Kd=ds(e))}iv(t){if(0!==t.button)return;const e=this.Af.ownerDocument.documentElement;qi()&&e.addEventListener("mouseleave",this.bf),this.if=!1,this.Jd=ds(t),this.lf&&(this.lf(),this.lf=null);{const t=this.Uf.bind(this),i=this.wf.bind(this);this.lf=()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",t),e.addEventListener("mouseup",i)}if(this.ff=!0,this.Mf(t))return;const i=this.xf(t);this.Rf(i,this.Tf.nv),this.Ud||(this.$d=0,this.Ud=setTimeout(this.Of.bind(this),500),this.qd=ds(t))}Bf(){this.Af.addEventListener("mouseenter",this.If.bind(this)),this.Af.addEventListener("touchcancel",this.Vf.bind(this));{const t=this.Af.ownerDocument,e=t=>{this.Tf.sv&&(t.composed&&this.Af.contains(t.composedPath()[0])||t.target&&this.Af.contains(t.target)||this.Tf.sv())};this.ef=()=>{t.removeEventListener("touchstart",e)},this.sf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Qi()&&(this.rf=()=>{this.Af.removeEventListener("dblclick",this.gf)},this.Af.addEventListener("dblclick",this.gf)),this.Af.addEventListener("mouseleave",this.ev.bind(this)),this.Af.addEventListener("touchstart",this.Jf.bind(this),{passive:!0}),function(t){Ki&&void 0!==window.chrome&&t.addEventListener("mousedown",(t=>{if(1===t.button)return t.preventDefault(),!1}))}(this.Af),this.Af.addEventListener("mousedown",this.iv.bind(this)),this.rv(),this.Af.addEventListener("touchmove",(()=>{}),{passive:!1})}rv(){void 0===this.Tf.hv&&void 0===this.Tf.lv&&void 0===this.Tf.av||(this.Af.addEventListener("touchstart",(t=>this.ov(t.touches)),{passive:!0}),this.Af.addEventListener("touchmove",(t=>{if(2===t.touches.length&&null!==this._f&&void 0!==this.Tf.lv){const e=us(t.touches[0],t.touches[1])/this.uf;this.Tf.lv(this._f,e),cs(t)}}),{passive:!1}),this.Af.addEventListener("touchend",(t=>{this.ov(t.touches)})))}ov(t){1===t.length&&(this.cf=!1),2!==t.length||this.cf||this.Gd?this._v():this.uv(t)}uv(t){const e=this.Af.getBoundingClientRect()||{left:0,top:0};this._f={nt:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,st:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.uf=us(t[0],t[1]),void 0!==this.Tf.hv&&this.Tf.hv(),this.Vf()}_v(){null!==this._f&&(this._f=null,void 0!==this.Tf.av&&this.Tf.av())}ev(t){if(this.hf&&this.hf(),this.Mf(t))return;if(!this.mf)return;const e=this.xf(t);this.Rf(e,this.Tf.cv),this.mf=!Qi()}Qf(t){const e=ms(t.touches,w(this.pf));if(null===e)return;const i=this.xf(t,e);this.yf(i,this.Tf.dv),this.nf=!0,this.Gd=!0}Mf(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:fs(t)<this.vf+500}yf(t,e){e&&e.call(this.Tf,t)}Rf(t,e){e&&e.call(this.Tf,t)}xf(t,e){const i=e||t,s=this.Af.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,fv:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,vv:t.type,pv:i.target,mv:t.view,bv:()=>{"touchstart"!==t.type&&cs(t)}}}}function us(t,e){const i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function cs(t){t.cancelable&&t.preventDefault()}function ds(t){return{nt:t.pageX,st:t.pageY}}function fs(t){return t.timeStamp||performance.now()}function ms(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}function ps(t){return{Ec:t.Ec,wv:{mr:t.gv.externalId},Mv:t.gv.cursorStyle}}function vs(t,e,i){for(const s of t){const t=s.gt();if(null!==t&&t.pr){const n=t.pr(e,i);if(null!==n)return{mv:s,wv:n}}}return null}function gs(t,e){return i=>{var s,n,r,o;return(null!==(n=null===(s=i.Dt())||void 0===s?void 0:s.ka())&&void 0!==n?n:"")!==e?[]:null!==(o=null===(r=i.oa)||void 0===r?void 0:r.call(i,t))&&void 0!==o?o:[]}}class bs{constructor(t,e,i,n){this.zi=null,this.xv=null,this.Sv=!1,this.kv=new ee(200),this.Zr=null,this.yv=0,this.Cv=!1,this.Tv=()=>{this.Cv||this.Qi.Pv().$t().Wh()},this.Rv=()=>{this.Cv||this.Qi.Pv().$t().Wh()},this.Qi=t,this._n=e,this.wo=e.layout,this.Tc=i,this.Dv="left"===n,this.Ov=gs("normal",n),this.Av=gs("top",n),this.Bv=gs("bottom",n),this.Vv=document.createElement("div"),this.Vv.style.height="100%",this.Vv.style.overflow="hidden",this.Vv.style.width="25px",this.Vv.style.left="0",this.Vv.style.position="relative",this.Iv=ns(this.Vv,(0,s.dp)({width:16,height:16})),this.Iv.subscribeSuggestedBitmapSizeChanged(this.Tv);const r=this.Iv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.zv=ns(this.Vv,(0,s.dp)({width:16,height:16})),this.zv.subscribeSuggestedBitmapSizeChanged(this.Rv);const o=this.zv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const h={nv:this.Lv.bind(this),tv:this.Lv.bind(this),qf:this.Ev.bind(this),$f:this.Ev.bind(this),sv:this.Nv.bind(this),Zf:this.Fv.bind(this),Xf:this.Fv.bind(this),Df:this.Wv.bind(this),Cf:this.Wv.bind(this),Lf:this.jv.bind(this),cv:this.Hv.bind(this)};this.$v=new as(this.zv.canvasElement,h,{jf:()=>!this._n.handleScroll.vertTouchDrag,Hf:()=>!0})}S(){this.$v.S(),this.zv.unsubscribeSuggestedBitmapSizeChanged(this.Rv),rs(this.zv.canvasElement),this.zv.dispose(),this.Iv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),rs(this.Iv.canvasElement),this.Iv.dispose(),null!==this.zi&&this.zi.qo().p(this),this.zi=null}Uv(){return this.Vv}P(){return this.wo.fontSize}qv(){const t=this.Tc.W();return this.Zr!==t.R&&(this.kv.Qe(),this.Zr=t.R),t}Yv(){if(null===this.zi)return 0;let t=0;const e=this.qv(),i=w(this.Iv.canvasElement.getContext("2d"));i.save();const s=this.zi.Na();i.font=this.Xv(),s.length>0&&(t=Math.max(this.kv.Mi(i,s[0].Ja),this.kv.Mi(i,s[s.length-1].Ja)));const n=this.Kv();for(let e=n.length;e--;){const s=this.kv.Mi(i,n[e].Zt());s>t&&(t=s)}const r=this.zi.Ct();if(null!==r&&null!==this.xv){const e=this.zi.fn(1,r),s=this.zi.fn(this.xv.height-2,r);t=Math.max(t,this.kv.Mi(i,this.zi.Ni(Math.floor(Math.min(e,s))+.11111111111111,r)),this.kv.Mi(i,this.zi.Ni(Math.ceil(Math.max(e,s))-.11111111111111,r)))}i.restore();const o=t||34;return ts(Math.ceil(e.C+e.T+e.V+e.I+5+o))}Zv(t){null!==this.xv&&(0,s.J$)(this.xv,t)||(this.xv=t,this.Cv=!0,this.Iv.resizeCanvasElement(t),this.zv.resizeCanvasElement(t),this.Cv=!1,this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`)}Gv(){return w(this.xv).width}Zi(t){this.zi!==t&&(null!==this.zi&&this.zi.qo().p(this),this.zi=t,t.qo().l(this._o.bind(this),this))}Dt(){return this.zi}Qe(){const t=this.Qi.Jv();this.Qi.Pv().$t().V_(t,w(this.Dt()))}Qv(t){if(null===this.xv)return;if(1!==t){this.tp(),this.Iv.applySuggestedBitmapSize();const t=(0,s.sE)(this.Iv);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.ip(t),this.Ae(t)})),this.Qi.np(t,this.Bv),this.sp(t),this.Qi.np(t,this.Ov),this.ep(t))}this.zv.applySuggestedBitmapSize();const e=(0,s.sE)(this.zv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.rp(e),this.Qi.np(e,this.Av))}hp(){return this.Iv.bitmapSize}lp(t,e,i){const s=this.hp();s.width>0&&s.height>0&&t.drawImage(this.Iv.canvasElement,e,i)}bt(){var t;null===(t=this.zi)||void 0===t||t.Na()}Lv(t){if(null===this.zi||this.zi.Ei()||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Pv().$t(),i=this.Qi.Jv();this.Sv=!0,e.T_(i,this.zi,t.localY)}Ev(t){if(null===this.zi||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Pv().$t(),i=this.Qi.Jv(),s=this.zi;e.P_(i,s,t.localY)}Nv(){if(null===this.zi||!this._n.handleScale.axisPressedMouseMove.price)return;const t=this.Qi.Pv().$t(),e=this.Qi.Jv(),i=this.zi;this.Sv&&(this.Sv=!1,t.R_(e,i))}Fv(t){if(null===this.zi||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Pv().$t(),i=this.Qi.Jv();this.Sv=!1,e.R_(i,this.zi)}Wv(t){this._n.handleScale.axisDoubleClickReset.price&&this.Qe()}jv(t){null!==this.zi&&(!this.Qi.Pv().$t().W().handleScale.axisPressedMouseMove.price||this.zi.mh()||this.zi.Po()||this.ap(1))}Hv(t){this.ap(0)}Kv(){const t=[],e=null===this.zi?void 0:this.zi;return(i=>{for(let s=0;s<i.length;++s){const n=i[s].Tn(this.Qi.Jv(),e);for(let e=0;e<n.length;e++)t.push(n[e])}})(this.Qi.Jv().Wo()),t}ip({context:t,bitmapSize:e}){const{width:i,height:s}=e,n=this.Qi.Jv().$t(),r=n.q(),o=n.dd();r===o?K(t,0,0,i,s,r):tt(t,0,0,i,s,r,o)}Ae({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(null===this.xv||null===this.zi||!this.zi.W().borderVisible)return;t.fillStyle=this.zi.W().borderColor;const s=Math.max(1,Math.floor(this.qv().C*i));let n;n=this.Dv?e.width-s:0,t.fillRect(n,0,s,e.height)}sp(t){if(null===this.xv||null===this.zi)return;const e=this.zi.Na(),i=this.zi.W(),s=this.qv(),n=this.Dv?this.xv.width-s.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:r,verticalPixelRatio:o})=>{t.fillStyle=i.borderColor;const h=Math.max(1,Math.floor(o)),l=Math.floor(.5*o),a=Math.round(s.T*r);t.beginPath();for(const i of e)t.rect(Math.floor(n*r),Math.round(i.Va*o)-l,a,h);t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{var r;t.font=this.Xv(),t.fillStyle=null!==(r=i.textColor)&&void 0!==r?r:this.wo.textColor,t.textAlign=this.Dv?"right":"left",t.textBaseline="middle";const o=this.Dv?Math.round(n-s.V):Math.round(n+s.T+s.V),h=e.map((e=>this.kv.gi(t,e.Ja)));for(let i=e.length;i--;){const s=e[i];t.fillText(s.Ja,o,s.Va+h[i])}}))}tp(){if(null===this.xv||null===this.zi)return;let t=this.xv.height/2;const e=[],i=this.zi.Wo().slice(),s=this.Qi.Jv(),n=this.qv();this.zi===s.cr()&&this.Qi.Jv().Wo().forEach((t=>{s.ur(t)&&i.push(t)}));const r=this.zi.Ra()[0],o=this.zi;i.forEach((i=>{const n=i.Tn(s,o);n.forEach((t=>{t.Oi(null),t.Ai()&&e.push(t)})),r===i&&n.length>0&&(t=n[0].Si())})),e.forEach((t=>t.Oi(t.Si()))),this.zi.W().alignLabels&&this.op(e,n,t)}op(t,e,i){if(null===this.xv)return;const s=t.filter((t=>t.Si()<=i)),n=t.filter((t=>t.Si()>i));s.sort(((t,e)=>e.Si()-t.Si())),s.length&&n.length&&n.push(s[0]),n.sort(((t,e)=>t.Si()-e.Si()));for(const i of t){const t=Math.floor(i.Vt(e)/2),s=i.Si();s>-t&&s<t&&i.Oi(t),s>this.xv.height-t&&s<this.xv.height+t&&i.Oi(this.xv.height-t)}for(let t=1;t<s.length;t++){const i=s[t],n=s[t-1],r=n.Vt(e,!1),o=i.Si(),h=n.Di();o>h-r&&i.Oi(h-r)}for(let t=1;t<n.length;t++){const i=n[t],s=n[t-1],r=s.Vt(e,!0),o=i.Si(),h=s.Di();o<h+r&&i.Oi(h+r)}}ep(t){if(null===this.xv)return;const e=this.Kv(),i=this.qv(),s=this.Dv?"right":"left";e.forEach((e=>{e.Bi()&&e.gt(w(this.zi)).K(t,i,this.kv,s)}))}rp(t){if(null===this.xv||null===this.zi)return;const e=this.Qi.Pv().$t(),i=[],s=this.Qi.Jv(),n=e.Hc().Tn(s,this.zi);n.length&&i.push(n);const r=this.qv(),o=this.Dv?"right":"left";i.forEach((e=>{e.forEach((e=>{e.gt(w(this.zi)).K(t,r,this.kv,o)}))}))}ap(t){this.Vv.style.cursor=1===t?"ns-resize":"default"}_o(){const t=this.Yv();this.yv<t&&this.Qi.Pv().$t().ql(),this.yv=t}Xv(){return j(this.wo.fontSize,this.wo.fontFamily)}}function ws(t,e){var i,s;return null!==(s=null===(i=t.la)||void 0===i?void 0:i.call(t,e))&&void 0!==s?s:[]}function Ss(t,e){var i,s;return null!==(s=null===(i=t.Cn)||void 0===i?void 0:i.call(t,e))&&void 0!==s?s:[]}function ys(t,e){var i,s;return null!==(s=null===(i=t.Gi)||void 0===i?void 0:i.call(t,e))&&void 0!==s?s:[]}function xs(t,e){var i,s;return null!==(s=null===(i=t.ea)||void 0===i?void 0:i.call(t,e))&&void 0!==s?s:[]}class Cs{constructor(t,e){this.xv=(0,s.dp)({width:0,height:0}),this._p=null,this.up=null,this.cp=null,this.dp=!1,this.fp=new k,this.vp=new k,this.pp=0,this.mp=!1,this.bp=null,this.wp=!1,this.gp=null,this.Mp=null,this.Cv=!1,this.Tv=()=>{this.Cv||null===this.xp||this.Hi().Wh()},this.Rv=()=>{this.Cv||null===this.xp||this.Hi().Wh()},this.Sp=t,this.xp=e,this.xp.L_().l(this.kp.bind(this),this,!0),this.yp=document.createElement("td"),this.yp.style.padding="0",this.yp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Cp=document.createElement("td"),this.Cp.style.padding="0",this.Tp=document.createElement("td"),this.Tp.style.padding="0",this.yp.appendChild(i),this.Iv=ns(i,(0,s.dp)({width:16,height:16})),this.Iv.subscribeSuggestedBitmapSizeChanged(this.Tv);const n=this.Iv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.zv=ns(i,(0,s.dp)({width:16,height:16})),this.zv.subscribeSuggestedBitmapSizeChanged(this.Rv);const r=this.zv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Pp=document.createElement("tr"),this.Pp.appendChild(this.Cp),this.Pp.appendChild(this.yp),this.Pp.appendChild(this.Tp),this.Rp(),this.$v=new as(this.zv.canvasElement,this,{jf:()=>null===this.bp&&!this.Sp.W().handleScroll.vertTouchDrag,Hf:()=>null===this.bp&&!this.Sp.W().handleScroll.horzTouchDrag})}S(){null!==this._p&&this._p.S(),null!==this.up&&this.up.S(),this.zv.unsubscribeSuggestedBitmapSizeChanged(this.Rv),rs(this.zv.canvasElement),this.zv.dispose(),this.Iv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),rs(this.Iv.canvasElement),this.Iv.dispose(),null!==this.xp&&this.xp.L_().p(this),this.$v.S()}Jv(){return w(this.xp)}Dp(t){null!==this.xp&&this.xp.L_().p(this),this.xp=t,null!==this.xp&&this.xp.L_().l(Cs.prototype.kp.bind(this),this,!0),this.Rp()}Pv(){return this.Sp}Uv(){return this.Pp}Rp(){if(null!==this.xp&&(this.Op(),0!==this.Hi().wt().length)){if(null!==this._p){const t=this.xp.y_();this._p.Zi(w(t))}if(null!==this.up){const t=this.xp.C_();this.up.Zi(w(t))}}}Ap(){null!==this._p&&this._p.bt(),null!==this.up&&this.up.bt()}m_(){return null!==this.xp?this.xp.m_():0}b_(t){this.xp&&this.xp.b_(t)}Lf(t){if(!this.xp)return;this.Bp();const e=t.localX,i=t.localY;this.Vp(e,i,t)}nv(t){this.Bp(),this.Ip(),this.Vp(t.localX,t.localY,t)}Ef(t){var e;if(!this.xp)return;this.Bp();const i=t.localX,s=t.localY;this.Vp(i,s,t);const n=this.pr(i,s);this.Sp.zp(null!==(e=null==n?void 0:n.Mv)&&void 0!==e?e:null),this.Hi().Lc(n&&{Ec:n.Ec,wv:n.wv})}Gf(t){null!==this.xp&&(this.Bp(),this.Lp(t))}Df(t){null!==this.xp&&this.Ep(this.vp,t)}Cf(t){this.Df(t)}qf(t){this.Bp(),this.Np(t),this.Vp(t.localX,t.localY,t)}Zf(t){null!==this.xp&&(this.Bp(),this.mp=!1,this.Fp(t))}Kf(t){null!==this.xp&&this.Lp(t)}dv(t){if(this.mp=!0,null===this.bp){const e={x:t.localX,y:t.localY};this.Wp(e,e,t)}}cv(t){null!==this.xp&&(this.Bp(),this.xp.$t().Lc(null),this.jp())}Hp(){return this.fp}$p(){return this.vp}hv(){this.pp=1,this.Hi().Hn()}lv(t,e){if(!this.Sp.W().handleScale.pinch)return;const i=5*(e-this.pp);this.pp=e,this.Hi().Xc(t.nt,i)}tv(t){this.mp=!1,this.wp=null!==this.bp,this.Ip();const e=this.Hi().Hc();null!==this.bp&&e.yt()&&(this.gp={x:e.Yt(),y:e.Xt()},this.bp={x:t.localX,y:t.localY})}$f(t){if(null===this.xp)return;const e=t.localX,i=t.localY;if(null===this.bp)this.Np(t);else{this.wp=!1;const s=w(this.gp),n=s.x+(e-this.bp.x),r=s.y+(i-this.bp.y);this.Vp(n,r,t)}}Xf(t){0===this.Pv().W().trackingMode.exitMode&&(this.wp=!0),this.Up(),this.Fp(t)}pr(t,e){const i=this.xp;return null===i?null:function(t,e,i){const s=t.Wo(),n=function(t,e,i){var s,n;let r,o;for(const a of t){const t=null!==(n=null===(s=a.ua)||void 0===s?void 0:s.call(a,e,i))&&void 0!==n?n:[];for(const e of t)h=e.zOrder,(!(l=null==r?void 0:r.zOrder)||"top"===h&&"top"!==l||"normal"===h&&"bottom"===l)&&(r=e,o=a)}var h,l;return r&&o?{gv:r,Ec:o}:null}(s,e,i);if("top"===(null==n?void 0:n.gv.zOrder))return ps(n);for(const r of s){if(n&&n.Ec===r&&"bottom"!==n.gv.zOrder&&!n.gv.isBackground)return ps(n);const s=vs(r.Cn(t),e,i);if(null!==s)return{Ec:r,mv:s.mv,wv:s.wv};if(n&&n.Ec===r&&"bottom"!==n.gv.zOrder&&n.gv.isBackground)return ps(n)}return(null==n?void 0:n.gv)?ps(n):null}(i,t,e)}qp(t,e){w("left"===e?this._p:this.up).Zv((0,s.dp)({width:t,height:this.xv.height}))}Yp(){return this.xv}Zv(t){(0,s.J$)(this.xv,t)||(this.xv=t,this.Cv=!0,this.Iv.resizeCanvasElement(t),this.zv.resizeCanvasElement(t),this.Cv=!1,this.yp.style.width=t.width+"px",this.yp.style.height=t.height+"px")}Xp(){const t=w(this.xp);t.k_(t.y_()),t.k_(t.C_());for(const e of t.Ra())if(t.ur(e)){const i=e.Dt();null!==i&&t.k_(i),e.Rn()}}hp(){return this.Iv.bitmapSize}lp(t,e,i){const s=this.hp();s.width>0&&s.height>0&&t.drawImage(this.Iv.canvasElement,e,i)}Qv(t){if(0===t)return;if(null===this.xp)return;if(t>1&&this.Xp(),null!==this._p&&this._p.Qv(t),null!==this.up&&this.up.Qv(t),1!==t){this.Iv.applySuggestedBitmapSize();const t=(0,s.sE)(this.Iv);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.ip(t)})),this.xp&&(this.Kp(t,ws),this.Zp(t),this.Gp(t),this.Kp(t,Ss),this.Kp(t,ys)))}this.zv.applySuggestedBitmapSize();const e=(0,s.sE)(this.zv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.Jp(e),this.Kp(e,xs))}Qp(){return this._p}tm(){return this.up}np(t,e){this.Kp(t,e)}kp(){null!==this.xp&&this.xp.L_().p(this),this.xp=null}Lp(t){this.Ep(this.fp,t)}Ep(t,e){const i=e.localX,s=e.localY;t.M()&&t.m(this.Hi().St().Iu(i),{x:i,y:s},e)}ip({context:t,bitmapSize:e}){const{width:i,height:s}=e,n=this.Hi(),r=n.q(),o=n.dd();r===o?K(t,0,0,i,s,o):tt(t,0,0,i,s,r,o)}Zp(t){const e=w(this.xp).E_().jh().gt();null!==e&&e.K(t,!1)}Gp(t){const e=this.Hi().jc();this.im(t,Ss,os,e),this.im(t,Ss,hs,e)}Jp(t){this.im(t,Ss,hs,this.Hi().Hc())}Kp(t,e){const i=w(this.xp).Wo();for(const s of i)this.im(t,e,os,s);for(const s of i)this.im(t,e,hs,s)}im(t,e,i,s){const n=w(this.xp),r=n.$t().zc(),o=null!==r&&r.Ec===s,h=null!==r&&o&&void 0!==r.wv?r.wv.br:void 0;ls(e,(e=>i(e,t,o,h)),s,n)}Op(){if(null===this.xp)return;const t=this.Sp,e=this.xp.y_().W().visible,i=this.xp.C_().W().visible;e||null===this._p||(this.Cp.removeChild(this._p.Uv()),this._p.S(),this._p=null),i||null===this.up||(this.Tp.removeChild(this.up.Uv()),this.up.S(),this.up=null);const s=t.$t().hd();e&&null===this._p&&(this._p=new bs(this,t.W(),s,"left"),this.Cp.appendChild(this._p.Uv())),i&&null===this.up&&(this.up=new bs(this,t.W(),s,"right"),this.Tp.appendChild(this.up.Uv()))}nm(t){return t.fv&&this.mp||null!==this.bp}sm(t){return Math.max(0,Math.min(t,this.xv.width-1))}rm(t){return Math.max(0,Math.min(t,this.xv.height-1))}Vp(t,e,i){this.Hi().nd(this.sm(t),this.rm(e),i,w(this.xp))}jp(){this.Hi().ed()}Up(){this.wp&&(this.bp=null,this.jp())}Wp(t,e,i){this.bp=t,this.wp=!1,this.Vp(e.x,e.y,i);const s=this.Hi().Hc();this.gp={x:s.Yt(),y:s.Xt()}}Hi(){return this.Sp.$t()}Fp(t){if(!this.dp)return;const e=this.Hi(),i=this.Jv();if(e.A_(i,i.dn()),this.cp=null,this.dp=!1,e.Jc(),null!==this.Mp){const t=performance.now(),i=e.St();this.Mp.Pr(i.Nu(),t),this.Mp.Ku(t)||e.qn(this.Mp)}}Bp(){this.bp=null}Ip(){if(this.xp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)w(document.activeElement).blur();else{const t=document.getSelection();null!==t&&t.removeAllRanges()}!this.xp.dn().Ei()&&this.Hi().St().Ei()}}Np(t){if(null===this.xp)return;const e=this.Hi(),i=e.St();if(i.Ei())return;const s=this.Sp.W(),n=s.handleScroll,r=s.kineticScroll;if((!n.pressedMouseMove||t.fv)&&(!n.horzTouchDrag&&!n.vertTouchDrag||!t.fv))return;const o=this.xp.dn(),h=performance.now();if(null!==this.cp||this.nm(t)||(this.cp={x:t.clientX,y:t.clientY,Td:h,hm:t.localX,lm:t.localY}),null!==this.cp&&!this.dp&&(this.cp.x!==t.clientX||this.cp.y!==t.clientY)){if(t.fv&&r.touch||!t.fv&&r.mouse){const t=i.ee();this.Mp=new ss(.2/t,7/t,.997,15/t),this.Mp.jd(i.Nu(),this.cp.Td)}else this.Mp=null;o.Ei()||e.D_(this.xp,o,t.localY),e.Zc(t.localX),this.dp=!0}this.dp&&(o.Ei()||e.O_(this.xp,o,t.localY),e.Gc(t.localX),null!==this.Mp&&this.Mp.jd(i.Nu(),h))}}class Ms{constructor(t,e,i,n,r){this.ft=!0,this.xv=(0,s.dp)({width:0,height:0}),this.Tv=()=>this.Qv(3),this.Dv="left"===t,this.Tc=i.hd,this._n=e,this.am=n,this.om=r,this.Vv=document.createElement("div"),this.Vv.style.width="25px",this.Vv.style.height="100%",this.Vv.style.overflow="hidden",this.Iv=ns(this.Vv,(0,s.dp)({width:16,height:16})),this.Iv.subscribeSuggestedBitmapSizeChanged(this.Tv)}S(){this.Iv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),rs(this.Iv.canvasElement),this.Iv.dispose()}Uv(){return this.Vv}Yp(){return this.xv}Zv(t){(0,s.J$)(this.xv,t)||(this.xv=t,this.Iv.resizeCanvasElement(t),this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`,this.ft=!0)}Qv(t){if(t<3&&!this.ft)return;if(0===this.xv.width||0===this.xv.height)return;this.ft=!1,this.Iv.applySuggestedBitmapSize();const e=(0,s.sE)(this.Iv);null!==e&&e.useBitmapCoordinateSpace((t=>{this.ip(t),this.Ae(t)}))}hp(){return this.Iv.bitmapSize}lp(t,e,i){const s=this.hp();s.width>0&&s.height>0&&t.drawImage(this.Iv.canvasElement,e,i)}Ae({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.am())return;t.fillStyle=this._n.timeScale.borderColor;const n=Math.floor(this.Tc.W().C*i),r=Math.floor(this.Tc.W().C*s),o=this.Dv?e.width-n:0;t.fillRect(o,0,n,r)}ip({context:t,bitmapSize:e}){K(t,0,0,e.width,e.height,this.om())}}function _s(t){return e=>{var i,s;return null!==(s=null===(i=e._a)||void 0===i?void 0:i.call(e,t))&&void 0!==s?s:[]}}const Ts=_s("normal"),zs=_s("top"),Is=_s("bottom");class Es{constructor(t,e){this._m=null,this.um=null,this.k=null,this.dm=!1,this.xv=(0,s.dp)({width:0,height:0}),this.fm=new k,this.kv=new ee(5),this.Cv=!1,this.Tv=()=>{this.Cv||this.Sp.$t().Wh()},this.Rv=()=>{this.Cv||this.Sp.$t().Wh()},this.Sp=t,this.W_=e,this._n=t.W().layout,this.vm=document.createElement("tr"),this.pm=document.createElement("td"),this.pm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.Vv=document.createElement("td"),this.Vv.style.height="25px",this.Vv.style.padding="0",this.wm=document.createElement("div"),this.wm.style.width="100%",this.wm.style.height="100%",this.wm.style.position="relative",this.wm.style.overflow="hidden",this.Vv.appendChild(this.wm),this.Iv=ns(this.wm,(0,s.dp)({width:16,height:16})),this.Iv.subscribeSuggestedBitmapSizeChanged(this.Tv);const i=this.Iv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.zv=ns(this.wm,(0,s.dp)({width:16,height:16})),this.zv.subscribeSuggestedBitmapSizeChanged(this.Rv);const n=this.zv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.vm.appendChild(this.pm),this.vm.appendChild(this.Vv),this.vm.appendChild(this.bm),this.gm(),this.Sp.$t().p_().l(this.gm.bind(this),this),this.$v=new as(this.zv.canvasElement,this,{jf:()=>!0,Hf:()=>!this.Sp.W().handleScroll.horzTouchDrag})}S(){this.$v.S(),null!==this._m&&this._m.S(),null!==this.um&&this.um.S(),this.zv.unsubscribeSuggestedBitmapSizeChanged(this.Rv),rs(this.zv.canvasElement),this.zv.dispose(),this.Iv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),rs(this.Iv.canvasElement),this.Iv.dispose()}Uv(){return this.vm}Mm(){return this._m}xm(){return this.um}nv(t){if(this.dm)return;this.dm=!0;const e=this.Sp.$t();!e.St().Ei()&&this.Sp.W().handleScale.axisPressedMouseMove.time&&e.Yc(t.localX)}tv(t){this.nv(t)}sv(){const t=this.Sp.$t();!t.St().Ei()&&this.dm&&(this.dm=!1,this.Sp.W().handleScale.axisPressedMouseMove.time&&t.td())}qf(t){const e=this.Sp.$t();!e.St().Ei()&&this.Sp.W().handleScale.axisPressedMouseMove.time&&e.Qc(t.localX)}$f(t){this.qf(t)}Zf(){this.dm=!1;const t=this.Sp.$t();t.St().Ei()&&!this.Sp.W().handleScale.axisPressedMouseMove.time||t.td()}Xf(){this.Zf()}Df(){this.Sp.W().handleScale.axisDoubleClickReset.time&&this.Sp.$t().Xn()}Cf(){this.Df()}Lf(){this.Sp.$t().W().handleScale.axisPressedMouseMove.time&&this.ap(1)}cv(){this.ap(0)}Yp(){return this.xv}Sm(){return this.fm}km(t,e,i){(0,s.J$)(this.xv,t)||(this.xv=t,this.Cv=!0,this.Iv.resizeCanvasElement(t),this.zv.resizeCanvasElement(t),this.Cv=!1,this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`,this.fm.m(t)),null!==this._m&&this._m.Zv((0,s.dp)({width:e,height:t.height})),null!==this.um&&this.um.Zv((0,s.dp)({width:i,height:t.height}))}ym(){const t=this.Cm();return Math.ceil(t.C+t.T+t.P+t.L+t.B+t.Tm)}bt(){this.Sp.$t().St().Na()}hp(){return this.Iv.bitmapSize}lp(t,e,i){const s=this.hp();s.width>0&&s.height>0&&t.drawImage(this.Iv.canvasElement,e,i)}Qv(t){if(0===t)return;if(1!==t){this.Iv.applySuggestedBitmapSize();const e=(0,s.sE)(this.Iv);null!==e&&(e.useBitmapCoordinateSpace((t=>{this.ip(t),this.Ae(t),this.Pm(e,Is)})),this.sp(e),this.Pm(e,Ts)),null!==this._m&&this._m.Qv(t),null!==this.um&&this.um.Qv(t)}this.zv.applySuggestedBitmapSize();const e=(0,s.sE)(this.zv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.Rm([...this.Sp.$t().wt(),this.Sp.$t().Hc()],e),this.Pm(e,zs))}Pm(t,e){const i=this.Sp.$t().wt();for(const s of i)ls(e,(e=>os(e,t,!1,void 0)),s,void 0);for(const s of i)ls(e,(e=>hs(e,t,!1,void 0)),s,void 0)}ip({context:t,bitmapSize:e}){K(t,0,0,e.width,e.height,this.Sp.$t().dd())}Ae({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Sp.W().timeScale.borderVisible){t.fillStyle=this.Dm();const s=Math.max(1,Math.floor(this.Cm().C*i));t.fillRect(0,0,e.width,s)}}sp(t){const e=this.Sp.$t().St(),i=e.Na();if(!i||0===i.length)return;const s=this.W_.maxTickMarkWeight(i),n=this.Cm(),r=e.W();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:e,verticalPixelRatio:s})=>{t.strokeStyle=this.Dm(),t.fillStyle=this.Dm();const r=Math.max(1,Math.floor(e)),o=Math.floor(.5*e);t.beginPath();const h=Math.round(n.T*s);for(let s=i.length;s--;){const n=Math.round(i[s].coord*e);t.rect(n-o,0,r,h)}t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{const e=n.C+n.T+n.L+n.P/2;t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.$(),t.font=this.Xv();for(const n of i)if(n.weight<s){const i=n.needAlignCoordinate?this.Om(t,n.coord,n.label):n.coord;t.fillText(n.label,i,e)}this.Sp.W().timeScale.allowBoldLabels&&(t.font=this.Am());for(const n of i)if(n.weight>=s){const i=n.needAlignCoordinate?this.Om(t,n.coord,n.label):n.coord;t.fillText(n.label,i,e)}}))}Om(t,e,i){const s=this.kv.Mi(t,i),n=s/2,r=Math.floor(e-n)+.5;return r<0?e+=Math.abs(0-r):r+s>this.xv.width&&(e-=Math.abs(this.xv.width-(r+s))),e}Rm(t,e){const i=this.Cm();for(const s of t)for(const t of s.Ji())t.gt().K(e,i)}Dm(){return this.Sp.W().timeScale.borderColor}$(){return this._n.textColor}j(){return this._n.fontSize}Xv(){return j(this.j(),this._n.fontFamily)}Am(){return j(this.j(),this._n.fontFamily,"bold")}Cm(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,B:NaN,Wi:NaN,T:5,P:NaN,R:"",Fi:new ee,Tm:0});const t=this.k,e=this.Xv();if(t.R!==e){const i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.B=3*i/12,t.Wi=9*i/12,t.N=0,t.Tm=4*i/12,t.Fi.Qe()}return this.k}ap(t){this.Vv.style.cursor=1===t?"ew-resize":"default"}gm(){const t=this.Sp.$t(),e=t.W();e.leftPriceScale.visible||null===this._m||(this.pm.removeChild(this._m.Uv()),this._m.S(),this._m=null),e.rightPriceScale.visible||null===this.um||(this.bm.removeChild(this.um.Uv()),this.um.S(),this.um=null);const i={hd:this.Sp.$t().hd()},s=()=>e.leftPriceScale.borderVisible&&t.St().W().borderVisible,n=()=>t.dd();e.leftPriceScale.visible&&null===this._m&&(this._m=new Ms("left",e,i,s,n),this.pm.appendChild(this._m.Uv())),e.rightPriceScale.visible&&null===this.um&&(this.um=new Ms("right",e,i,s,n),this.bm.appendChild(this.um.Uv()))}}const ks=!!Ki&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((t=>t.brand.includes("Chromium")))&&!!Ki&&((null===(Rs=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===Rs?void 0:Rs.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);var Rs;class Bs{constructor(t,e,i){var s;this.Bm=[],this.Vm=0,this.no=0,this.h_=0,this.Im=0,this.zm=0,this.Lm=null,this.Em=!1,this.fp=new k,this.vp=new k,this.kc=new k,this.Nm=null,this.Fm=null,this.Wm=t,this._n=e,this.W_=i,this.vm=document.createElement("div"),this.vm.classList.add("tv-lightweight-charts"),this.vm.style.overflow="hidden",this.vm.style.direction="ltr",this.vm.style.width="100%",this.vm.style.height="100%",(s=this.vm).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.jm=document.createElement("table"),this.jm.setAttribute("cellspacing","0"),this.vm.appendChild(this.jm),this.Hm=this.$m.bind(this),Ps(this._n)&&this.Um(!0),this.Hi=new Oi(this.Cc.bind(this),this._n,i),this.$t().$c().l(this.qm.bind(this),this),this.Ym=new Es(this,this.W_),this.jm.appendChild(this.Ym.Uv());const n=e.autoSize&&this.Xm();let r=this._n.width,o=this._n.height;if(n||0===r||0===o){const e=t.getBoundingClientRect();r=r||e.width,o=o||e.height}this.Km(r,o),this.Zm(),t.appendChild(this.vm),this.Gm(),this.Hi.St().Qu().l(this.Hi.ql.bind(this.Hi),this),this.Hi.p_().l(this.Hi.ql.bind(this.Hi),this)}$t(){return this.Hi}W(){return this._n}Jm(){return this.Bm}Qm(){return this.Ym}S(){this.Um(!1),0!==this.Vm&&window.cancelAnimationFrame(this.Vm),this.Hi.$c().p(this),this.Hi.St().Qu().p(this),this.Hi.p_().p(this),this.Hi.S();for(const t of this.Bm)this.jm.removeChild(t.Uv()),t.Hp().p(this),t.$p().p(this),t.S();this.Bm=[],w(this.Ym).S(),null!==this.vm.parentElement&&this.vm.parentElement.removeChild(this.vm),this.kc.S(),this.fp.S(),this.vp.S(),this.tb()}Km(t,e,i=!1){if(this.no===e&&this.h_===t)return;const n=function(t){const e=Math.floor(t.width),i=Math.floor(t.height);return(0,s.dp)({width:e-e%2,height:i-i%2})}((0,s.dp)({width:t,height:e}));this.no=n.height,this.h_=n.width;const r=this.no+"px",o=this.h_+"px";w(this.vm).style.height=r,w(this.vm).style.width=o,this.jm.style.height=r,this.jm.style.width=o,i?this.ib(ct.ns(),performance.now()):this.Hi.ql()}Qv(t){void 0===t&&(t=ct.ns());for(let e=0;e<this.Bm.length;e++)this.Bm[e].Qv(t.Wn(e).En);this._n.timeScale.visible&&this.Ym.Qv(t.Fn())}Fh(t){const e=Ps(this._n);this.Hi.Fh(t);const i=Ps(this._n);i!==e&&this.Um(i),this.Gm(),this.nb(t)}Hp(){return this.fp}$p(){return this.vp}$c(){return this.kc}sb(){null!==this.Lm&&(this.ib(this.Lm,performance.now()),this.Lm=null);const t=this.eb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=w(e.getContext("2d"));return this.eb(i),e}rb(t){return"left"===t&&!this.hb()||"right"===t&&!this.lb()||0===this.Bm.length?0:w("left"===t?this.Bm[0].Qp():this.Bm[0].tm()).Gv()}ab(){return this._n.autoSize&&null!==this.Nm}ob(){return this.vm}zp(t){this.Fm=t,this.Fm?this.ob().style.setProperty("cursor",t):this.ob().style.removeProperty("cursor")}_b(){return this.Fm}ub(){return b(this.Bm[0]).Yp()}nb(t){(void 0!==t.autoSize||!this.Nm||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Nm&&this.Xm(),!1===t.autoSize&&null!==this.Nm&&this.tb(),t.autoSize||void 0===t.width&&void 0===t.height||this.Km(t.width||this.h_,t.height||this.no))}eb(t){let e=0,i=0;const n=this.Bm[0],r=(e,i)=>{let s=0;for(let n=0;n<this.Bm.length;n++){const r=this.Bm[n],o=w("left"===e?r.Qp():r.tm()),h=o.hp();null!==t&&o.lp(t,i,s),s+=h.height}};this.hb()&&(r("left",0),e+=w(n.Qp()).hp().width);for(let s=0;s<this.Bm.length;s++){const n=this.Bm[s],r=n.hp();null!==t&&n.lp(t,e,i),i+=r.height}e+=n.hp().width,this.lb()&&(r("right",e),e+=w(n.tm()).hp().width);const o=(e,i,s)=>{w("left"===e?this.Ym.Mm():this.Ym.xm()).lp(w(t),i,s)};if(this._n.timeScale.visible){const e=this.Ym.hp();if(null!==t){let s=0;this.hb()&&(o("left",s,i),s=w(n.Qp()).hp().width),this.Ym.lp(t,s,i),s+=e.width,this.lb()&&o("right",s,i)}i+=e.height}return(0,s.dp)({width:e,height:i})}cb(){let t=0,e=0,i=0;for(const s of this.Bm)this.hb()&&(e=Math.max(e,w(s.Qp()).Yv(),this._n.leftPriceScale.minimumWidth)),this.lb()&&(i=Math.max(i,w(s.tm()).Yv(),this._n.rightPriceScale.minimumWidth)),t+=s.m_();e=ts(e),i=ts(i);const n=this.h_,r=this.no,o=Math.max(n-e-i,0),h=this._n.timeScale.visible;let l=h?Math.max(this.Ym.ym(),this._n.timeScale.minimumHeight):0;var a;l=(a=l)+a%2;const u=0+l,c=r<u?0:r-u,d=c/t;let f=0;for(let t=0;t<this.Bm.length;++t){const n=this.Bm[t];n.Dp(this.Hi.Wc()[t]);let r=0,h=0;h=t===this.Bm.length-1?c-f:Math.round(n.m_()*d),r=Math.max(h,2),f+=r,n.Zv((0,s.dp)({width:o,height:r})),this.hb()&&n.qp(e,"left"),this.lb()&&n.qp(i,"right"),n.Jv()&&this.Hi.Uc(n.Jv(),r)}this.Ym.km((0,s.dp)({width:h?o:0,height:l}),h?e:0,h?i:0),this.Hi.w_(o),this.Im!==e&&(this.Im=e),this.zm!==i&&(this.zm=i)}Um(t){t?this.vm.addEventListener("wheel",this.Hm,{passive:!1}):this.vm.removeEventListener("wheel",this.Hm)}fb(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return ks?1/window.devicePixelRatio:1}$m(t){if(!(0!==t.deltaX&&this._n.handleScroll.mouseWheel||0!==t.deltaY&&this._n.handleScale.mouseWheel))return;const e=this.fb(t),i=e*t.deltaX/100,s=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this._n.handleScale.mouseWheel){const e=Math.sign(s)*Math.min(1,Math.abs(s)),i=t.clientX-this.vm.getBoundingClientRect().left;this.$t().Xc(i,e)}0!==i&&this._n.handleScroll.mouseWheel&&this.$t().Kc(-80*i)}ib(t,e){var i;const s=t.Fn();3===s&&this.vb(),3!==s&&2!==s||(this.pb(t),this.mb(t,e),this.Ym.bt(),this.Bm.forEach((t=>{t.Ap()})),3===(null===(i=this.Lm)||void 0===i?void 0:i.Fn())&&(this.Lm.Jn(t),this.vb(),this.pb(this.Lm),this.mb(this.Lm,e),t=this.Lm,this.Lm=null)),this.Qv(t)}mb(t,e){for(const i of t.Gn())this.Qn(i,e)}pb(t){const e=this.Hi.Wc();for(let i=0;i<e.length;i++)t.Wn(i).Nn&&e[i].I_()}Qn(t,e){const i=this.Hi.St();switch(t.$n){case 0:i.ic();break;case 1:i.nc(t.Ot);break;case 2:i.Kn(t.Ot);break;case 3:i.Zn(t.Ot);break;case 4:i.ju();break;case 5:t.Ot.Ku(e)||i.Zn(t.Ot.Zu(e))}}Cc(t){null!==this.Lm?this.Lm.Jn(t):this.Lm=t,this.Em||(this.Em=!0,this.Vm=window.requestAnimationFrame((t=>{if(this.Em=!1,this.Vm=0,null!==this.Lm){const e=this.Lm;this.Lm=null,this.ib(e,t);for(const i of e.Gn())if(5===i.$n&&!i.Ot.Ku(t)){this.$t().qn(i.Ot);break}}})))}vb(){this.Zm()}Zm(){const t=this.Hi.Wc(),e=t.length,i=this.Bm.length;for(let t=e;t<i;t++){const t=b(this.Bm.pop());this.jm.removeChild(t.Uv()),t.Hp().p(this),t.$p().p(this),t.S()}for(let s=i;s<e;s++){const e=new Cs(this,t[s]);e.Hp().l(this.bb.bind(this),this),e.$p().l(this.wb.bind(this),this),this.Bm.push(e),this.jm.insertBefore(e.Uv(),this.Ym.Uv())}for(let i=0;i<e;i++){const e=t[i],s=this.Bm[i];s.Jv()!==e?s.Dp(e):s.Rp()}this.Gm(),this.cb()}gb(t,e,i){var s;const n=new Map;let r;if(null!==t&&this.Hi.wt().forEach((e=>{const i=e.Bn().sl(t);null!==i&&n.set(e,i)})),null!==t){const e=null===(s=this.Hi.St().$i(t))||void 0===s?void 0:s.originalTime;void 0!==e&&(r=e)}const o=this.$t().zc(),h=null!==o&&o.Ec instanceof Xe?o.Ec:void 0,l=null!==o&&void 0!==o.wv?o.wv.mr:void 0;return{Mb:r,ie:null!=t?t:void 0,xb:null!=e?e:void 0,Sb:h,kb:n,yb:l,Cb:null!=i?i:void 0}}bb(t,e,i){this.fp.m((()=>this.gb(t,e,i)))}wb(t,e,i){this.vp.m((()=>this.gb(t,e,i)))}qm(t,e,i){this.kc.m((()=>this.gb(t,e,i)))}Gm(){const t=this._n.timeScale.visible?"":"none";this.Ym.Uv().style.display=t}hb(){return this.Bm[0].Jv().y_().W().visible}lb(){return this.Bm[0].Jv().C_().W().visible}Xm(){return"ResizeObserver"in window&&(this.Nm=new ResizeObserver((t=>{const e=t.find((t=>t.target===this.Wm));e&&this.Km(e.contentRect.width,e.contentRect.height)})),this.Nm.observe(this.Wm,{box:"border-box"}),!0)}tb(){null!==this.Nm&&this.Nm.disconnect(),this.Nm=null}}function Ps(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function Os(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i}function Hs(t,e,i,s){const n=i.value,r={ie:e,ot:t,Ot:[n,n,n,n],Mb:s};return void 0!==i.color&&(r.O=i.color),r}function Ws(t,e,i,s){const n=i.value,r={ie:e,ot:t,Ot:[n,n,n,n],Mb:s};return void 0!==i.lineColor&&(r.lt=i.lineColor),void 0!==i.topColor&&(r.ys=i.topColor),void 0!==i.bottomColor&&(r.Cs=i.bottomColor),r}function Vs(t,e,i,s){const n=i.value,r={ie:e,ot:t,Ot:[n,n,n,n],Mb:s};return void 0!==i.topLineColor&&(r.Ce=i.topLineColor),void 0!==i.bottomLineColor&&(r.Te=i.bottomLineColor),void 0!==i.topFillColor1&&(r.Me=i.topFillColor1),void 0!==i.topFillColor2&&(r.xe=i.topFillColor2),void 0!==i.bottomFillColor1&&(r.Se=i.bottomFillColor1),void 0!==i.bottomFillColor2&&(r.ke=i.bottomFillColor2),r}function Ls(t,e,i,s){const n={ie:e,ot:t,Ot:[i.open,i.high,i.low,i.close],Mb:s};return void 0!==i.color&&(n.O=i.color),n}function Ns(t,e,i,s){const n={ie:e,ot:t,Ot:[i.open,i.high,i.low,i.close],Mb:s};return void 0!==i.color&&(n.O=i.color),void 0!==i.borderColor&&(n.At=i.borderColor),void 0!==i.wickColor&&(n.Uh=i.wickColor),n}function js(t,e,i,s,n){const r=b(n)(i),o=Math.max(...r),h=Math.min(...r),l=r[r.length-1],a=[l,o,h,l],u=i,{time:c,color:d}=u;return{ie:e,ot:t,Ot:a,Mb:s,We:Os(u,["time","color"]),O:d}}function $s(t){return void 0!==t.Ot}function Fs(t,e){return void 0!==e.customValues&&(t.Tb=e.customValues),t}function Ds(t){return(e,i,s,n,r,o)=>function(t,e){return e?e(t):void 0===(i=t).open&&void 0===i.value;var i}(s,o)?Fs({ot:e,ie:i,Mb:n},s):Fs(t(e,i,s,n,r),s)}function As(t){return{Candlestick:Ds(Ns),Bar:Ds(Ls),Area:Ds(Ws),Baseline:Ds(Vs),Histogram:Ds(Hs),Line:Ds(Hs),Custom:Ds(js)}[t]}function Us(t){return{ie:0,Pb:new Map,sa:t}}function Ys(t,e){if(void 0!==t&&0!==t.length)return{Rb:e.key(t[0].ot),Db:e.key(t[t.length-1].ot)}}function Gs(t){let e;return t.forEach((t=>{void 0===e&&(e=t.Mb)})),b(e)}class Zs{constructor(t){this.Ob=new Map,this.Ab=new Map,this.Bb=new Map,this.Vb=[],this.W_=t}S(){this.Ob.clear(),this.Ab.clear(),this.Bb.clear(),this.Vb=[]}Ib(t,e){let i=0!==this.Ob.size,s=!1;const n=this.Ab.get(t);if(void 0!==n)if(1===this.Ab.size)i=!1,s=!0,this.Ob.clear();else for(const e of this.Vb)e.pointData.Pb.delete(t)&&(s=!0);let r=[];if(0!==e.length){const i=e.map((t=>t.time)),n=this.W_.createConverterToInternalObj(e),o=As(t.Kh()),h=t.xa(),l=t.Sa();r=e.map(((e,r)=>{const a=n(e.time),u=this.W_.key(a);let c=this.Ob.get(u);void 0===c&&(c=Us(a),this.Ob.set(u,c),s=!0);const d=o(a,c.ie,e,i[r],h,l);return c.Pb.set(t,d),d}))}i&&this.zb(),this.Lb(t,r);let o=-1;if(s){const t=[];this.Ob.forEach((e=>{t.push({timeWeight:0,time:e.sa,pointData:e,originalTime:Gs(e.Pb)})})),t.sort(((t,e)=>this.W_.key(t.time)-this.W_.key(e.time))),o=this.Eb(t)}return this.Nb(t,o,function(t,e,i){const s=Ys(t,i),n=Ys(e,i);if(void 0!==s&&void 0!==n)return{Zl:s.Db>=n.Db&&s.Rb>=n.Rb}}(this.Ab.get(t),n,this.W_))}od(t){return this.Ib(t,[])}Fb(t,e){const i=e;!function(t){void 0===t.Mb&&(t.Mb=t.time)}(i),this.W_.preprocessData(e);const s=this.W_.createConverterToInternalObj([e])(e.time),n=this.Bb.get(t);if(void 0!==n&&this.W_.key(s)<this.W_.key(n))throw new Error(`Cannot update oldest data, last time=${n}, new time=${s}`);let r=this.Ob.get(this.W_.key(s));const o=void 0===r;void 0===r&&(r=Us(s),this.Ob.set(this.W_.key(s),r));const h=As(t.Kh()),l=t.xa(),a=t.Sa(),u=h(s,r.ie,e,i.Mb,l,a);r.Pb.set(t,u),this.Wb(t,u);const c={Zl:$s(u)};if(!o)return this.Nb(t,-1,c);const d={timeWeight:0,time:r.sa,pointData:r,originalTime:Gs(r.Pb)},f=Bt(this.Vb,this.W_.key(d.time),((t,e)=>this.W_.key(t.time)<e));this.Vb.splice(f,0,d);for(let t=f;t<this.Vb.length;++t)Xs(this.Vb[t].pointData,t);return this.W_.fillWeightsForPoints(this.Vb,f),this.Nb(t,f,c)}Wb(t,e){let i=this.Ab.get(t);void 0===i&&(i=[],this.Ab.set(t,i));const s=0!==i.length?i[i.length-1]:null;null===s||this.W_.key(e.ot)>this.W_.key(s.ot)?$s(e)&&i.push(e):$s(e)?i[i.length-1]=e:i.splice(-1,1),this.Bb.set(t,e.ot)}Lb(t,e){0!==e.length?(this.Ab.set(t,e.filter($s)),this.Bb.set(t,e[e.length-1].ot)):(this.Ab.delete(t),this.Bb.delete(t))}zb(){for(const t of this.Vb)0===t.pointData.Pb.size&&this.Ob.delete(this.W_.key(t.time))}Eb(t){let e=-1;for(let i=0;i<this.Vb.length&&i<t.length;++i){const s=this.Vb[i],n=t[i];if(this.W_.key(s.time)!==this.W_.key(n.time)){e=i;break}n.timeWeight=s.timeWeight,Xs(n.pointData,i)}if(-1===e&&this.Vb.length!==t.length&&(e=Math.min(this.Vb.length,t.length)),-1===e)return-1;for(let i=e;i<t.length;++i)Xs(t[i].pointData,i);return this.W_.fillWeightsForPoints(t,e),this.Vb=t,e}jb(){if(0===this.Ab.size)return null;let t=0;return this.Ab.forEach((e=>{0!==e.length&&(t=Math.max(t,e[e.length-1].ie))})),t}Nb(t,e,i){const s={Hb:new Map,St:{Vu:this.jb()}};if(-1!==e)this.Ab.forEach(((e,n)=>{s.Hb.set(n,{We:e,$b:n===t?i:void 0})})),this.Ab.has(t)||s.Hb.set(t,{We:[],$b:i}),s.St.Ub=this.Vb,s.St.qb=e;else{const e=this.Ab.get(t);s.Hb.set(t,{We:e||[],$b:i})}return s}}function Xs(t,e){t.ie=e,t.Pb.forEach((t=>{t.ie=e}))}function Js(t){const e={value:t.Ot[3],time:t.Mb};return void 0!==t.Tb&&(e.customValues=t.Tb),e}function Ks(t){const e=Js(t);return void 0!==t.O&&(e.color=t.O),e}function qs(t){const e=Js(t);return void 0!==t.lt&&(e.lineColor=t.lt),void 0!==t.ys&&(e.topColor=t.ys),void 0!==t.Cs&&(e.bottomColor=t.Cs),e}function Qs(t){const e=Js(t);return void 0!==t.Ce&&(e.topLineColor=t.Ce),void 0!==t.Te&&(e.bottomLineColor=t.Te),void 0!==t.Me&&(e.topFillColor1=t.Me),void 0!==t.xe&&(e.topFillColor2=t.xe),void 0!==t.Se&&(e.bottomFillColor1=t.Se),void 0!==t.ke&&(e.bottomFillColor2=t.ke),e}function tn(t){const e={open:t.Ot[0],high:t.Ot[1],low:t.Ot[2],close:t.Ot[3],time:t.Mb};return void 0!==t.Tb&&(e.customValues=t.Tb),e}function en(t){const e=tn(t);return void 0!==t.O&&(e.color=t.O),e}function sn(t){const e=tn(t),{O:i,At:s,Uh:n}=t;return void 0!==i&&(e.color=i),void 0!==s&&(e.borderColor=s),void 0!==n&&(e.wickColor=n),e}function nn(t){return{Area:qs,Line:Ks,Baseline:Qs,Histogram:Ks,Bar:en,Candlestick:sn,Custom:rn}[t]}function rn(t){const e=t.Mb;return Object.assign(Object.assign({},t.We),{time:e})}const on={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},hn={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},ln={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:N},an={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},un={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},cn={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:N,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function dn(){return{width:0,height:0,autoSize:!1,layout:ln,crosshair:on,grid:hn,overlayPriceScales:Object.assign({},an),leftPriceScale:Object.assign(Object.assign({},an),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},an),{visible:!0}),timeScale:un,watermark:cn,localization:{locale:Ki?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class fn{constructor(t,e){this.Yb=t,this.Xb=e}applyOptions(t){this.Yb.$t().Nc(this.Xb,t)}options(){return this.zi().W()}width(){return ut(this.Xb)?this.Yb.rb(this.Xb):0}zi(){return w(this.Yb.$t().Fc(this.Xb)).Dt}}function mn(t,e,i){const s=Os(t,["time","originalTime"]),n=Object.assign({time:e},s);return void 0!==i&&(n.originalTime=i),n}const pn={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class vn{constructor(t){this.Ih=t}applyOptions(t){this.Ih.Fh(t)}options(){return this.Ih.W()}Kb(){return this.Ih}}class gn{constructor(t,e,i,s,n){this.Zb=new k,this.Is=t,this.Gb=e,this.Jb=i,this.W_=n,this.Qb=s}S(){this.Zb.S()}priceFormatter(){return this.Is.fa()}priceToCoordinate(t){const e=this.Is.Ct();return null===e?null:this.Is.Dt().Rt(t,e.Ot)}coordinateToPrice(t){const e=this.Is.Ct();return null===e?null:this.Is.Dt().fn(t,e.Ot)}barsInLogicalRange(t){if(null===t)return null;const e=new xi(new wi(t.from,t.to)).su(),i=this.Is.Bn();if(i.Ei())return null;const s=i.sl(e.Rs(),1),n=i.sl(e.ui(),-1),r=w(i.tl()),o=w(i.An());if(null!==s&&null!==n&&s.ie>n.ie)return{barsBefore:t.from-r,barsAfter:o-t.to};const h={barsBefore:null===s||s.ie===r?t.from-r:s.ie-r,barsAfter:null===n||n.ie===o?o-t.to:o-n.ie};return null!==s&&null!==n&&(h.from=s.Mb,h.to=n.Mb),h}setData(t){this.W_,this.Is.Kh(),this.Gb.tw(this.Is,t),this.iw("full")}update(t){this.Is.Kh(),this.Gb.nw(this.Is,t),this.iw("update")}dataByIndex(t,e){const i=this.Is.Bn().sl(t,e);return null===i?null:nn(this.seriesType())(i)}data(){const t=nn(this.seriesType());return this.Is.Bn().Qs().map((e=>t(e)))}subscribeDataChanged(t){this.Zb.l(t)}unsubscribeDataChanged(t){this.Zb.v(t)}setMarkers(t){this.W_;const e=t.map((t=>mn(t,this.W_.convertHorzItemToInternal(t.time),t.time)));this.Is.Jl(e)}markers(){return this.Is.Ql().map((t=>mn(t,t.originalTime,void 0)))}applyOptions(t){this.Is.Fh(t)}options(){return W(this.Is.W())}priceScale(){return this.Jb.priceScale(this.Is.Dt().ka())}createPriceLine(t){const e=R(W(pn),t),i=this.Is.ta(e);return new vn(i)}removePriceLine(t){this.Is.ia(t.Kb())}seriesType(){return this.Is.Kh()}attachPrimitive(t){this.Is.ga(t),t.attached&&t.attached({chart:this.Qb,series:this,requestUpdate:()=>this.Is.$t().ql()})}detachPrimitive(t){this.Is.Ma(t),t.detached&&t.detached()}iw(t){this.Zb.M()&&this.Zb.m(t)}}class bn{constructor(t,e,i){this.sw=new k,this.du=new k,this.fm=new k,this.Hi=t,this.Ml=t.St(),this.Ym=e,this.Ml.Gu().l(this.ew.bind(this)),this.Ml.Ju().l(this.rw.bind(this)),this.Ym.Sm().l(this.hw.bind(this)),this.W_=i}S(){this.Ml.Gu().p(this),this.Ml.Ju().p(this),this.Ym.Sm().p(this),this.sw.S(),this.du.S(),this.fm.S()}scrollPosition(){return this.Ml.Nu()}scrollToPosition(t,e){e?this.Ml.Xu(t,1e3):this.Hi.Zn(t)}scrollToRealTime(){this.Ml.Yu()}getVisibleRange(){const t=this.Ml.Tu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.W_.convertHorzItemToInternal(t.from),to:this.W_.convertHorzItemToInternal(t.to)},i=this.Ml.Ou(e);this.Hi._d(i)}getVisibleLogicalRange(){const t=this.Ml.Cu();return null===t?null:{from:t.Rs(),to:t.ui()}}setVisibleLogicalRange(t){g(t.from<=t.to,"The from index cannot be after the to index."),this.Hi._d(t)}resetTimeScale(){this.Hi.Xn()}fitContent(){this.Hi.ic()}logicalToCoordinate(t){const e=this.Hi.St();return e.Ei()?null:e.It(t)}coordinateToLogical(t){return this.Ml.Ei()?null:this.Ml.Iu(t)}timeToCoordinate(t){const e=this.W_.convertHorzItemToInternal(t),i=this.Ml.Ta(e,!1);return null===i?null:this.Ml.It(i)}coordinateToTime(t){const e=this.Hi.St(),i=e.Iu(t),s=e.$i(i);return null===s?null:s.originalTime}width(){return this.Ym.Yp().width}height(){return this.Ym.Yp().height}subscribeVisibleTimeRangeChange(t){this.sw.l(t)}unsubscribeVisibleTimeRangeChange(t){this.sw.v(t)}subscribeVisibleLogicalRangeChange(t){this.du.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.du.v(t)}subscribeSizeChange(t){this.fm.l(t)}unsubscribeSizeChange(t){this.fm.v(t)}applyOptions(t){this.Ml.Fh(t)}options(){return Object.assign(Object.assign({},W(this.Ml.W())),{barSpacing:this.Ml.ee()})}ew(){this.sw.M()&&this.sw.m(this.getVisibleRange())}rw(){this.du.M()&&this.du.m(this.getVisibleLogicalRange())}hw(t){this.fm.m(t.width,t.height)}}function wn(t){return function(t){if(H(t.handleScale)){const e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){const{axisPressedMouseMove:e,axisDoubleClickReset:i}=t.handleScale;H(e)&&(t.handleScale.axisPressedMouseMove={time:e,price:e}),H(i)&&(t.handleScale.axisDoubleClickReset={time:i,price:i})}const e=t.handleScroll;H(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),t}class Sn{constructor(t,e,i){this.lw=new Map,this.aw=new Map,this.ow=new k,this._w=new k,this.uw=new k,this.cw=new Zs(e);const s=void 0===i?W(dn()):R(W(dn()),wn(i));this.W_=e,this.Yb=new Bs(t,s,e),this.Yb.Hp().l((t=>{this.ow.M()&&this.ow.m(this.dw(t()))}),this),this.Yb.$p().l((t=>{this._w.M()&&this._w.m(this.dw(t()))}),this),this.Yb.$c().l((t=>{this.uw.M()&&this.uw.m(this.dw(t()))}),this);const n=this.Yb.$t();this.fw=new bn(n,this.Yb.Qm(),this.W_)}remove(){this.Yb.Hp().p(this),this.Yb.$p().p(this),this.Yb.$c().p(this),this.fw.S(),this.Yb.S(),this.lw.clear(),this.aw.clear(),this.ow.S(),this._w.S(),this.uw.S(),this.cw.S()}resize(t,e,i){this.autoSizeActive()||this.Yb.Km(t,e,i)}addCustomSeries(t,e){const i=S(t),s=Object.assign(Object.assign({},u),i.defaultOptions());return this.pw("Custom",s,e,i)}addAreaSeries(t){return this.pw("Area",h,t)}addBaselineSeries(t){return this.pw("Baseline",l,t)}addBarSeries(t){return this.pw("Bar",r,t)}addCandlestickSeries(t={}){return function(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(t),this.pw("Candlestick",n,t)}addHistogramSeries(t){return this.pw("Histogram",a,t)}addLineSeries(t){return this.pw("Line",o,t)}removeSeries(t){const e=b(this.lw.get(t)),i=this.cw.od(e);this.Yb.$t().od(e),this.mw(i),this.lw.delete(t),this.aw.delete(e)}tw(t,e){this.mw(this.cw.Ib(t,e))}nw(t,e){this.mw(this.cw.Fb(t,e))}subscribeClick(t){this.ow.l(t)}unsubscribeClick(t){this.ow.v(t)}subscribeCrosshairMove(t){this.uw.l(t)}unsubscribeCrosshairMove(t){this.uw.v(t)}subscribeDblClick(t){this._w.l(t)}unsubscribeDblClick(t){this._w.v(t)}priceScale(t){return new fn(this.Yb,t)}timeScale(){return this.fw}applyOptions(t){this.Yb.Fh(wn(t))}options(){return this.Yb.W()}takeScreenshot(){return this.Yb.sb()}autoSizeActive(){return this.Yb.ab()}chartElement(){return this.Yb.ob()}paneSize(){const t=this.Yb.ub();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,i){const s=this.lw.get(i);if(void 0===s)return;const n=this.Yb.$t()._r(s);null!==n&&this.Yb.$t().sd(t,e,n)}clearCrosshairPosition(){this.Yb.$t().ed(!0)}pw(t,e,i={},s){!function(t){if(void 0===t||"custom"===t.type)return;const e=t;void 0!==e.minMove&&void 0===e.precision&&(e.precision=function(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const i=Math.round(t);if(Math.abs(i-t)<1e-8)return e;t*=10}return e}(e.minMove))}(i.priceFormat);const n=R(W(c),W(e),i),r=this.Yb.$t().ld(t,n,s),o=new gn(r,this,this,this,this.W_);return this.lw.set(o,r),this.aw.set(r,o),o}mw(t){const e=this.Yb.$t();e.rd(t.St.Vu,t.St.Ub,t.St.qb),t.Hb.forEach(((t,e)=>e.J(t.We,t.$b))),e.Lu()}bw(t){return b(this.aw.get(t))}dw(t){const e=new Map;t.kb.forEach(((t,i)=>{const s=i.Kh(),n=nn(s)(t);if("Custom"!==s)g(function(t){return void 0!==t.open||void 0!==t.value}(n));else{const t=i.Sa();g(!t||!1===t(n))}e.set(this.bw(i),n)}));const i=void 0!==t.Sb&&this.aw.has(t.Sb)?this.bw(t.Sb):void 0;return{time:t.Mb,logical:t.ie,point:t.xb,hoveredSeries:i,hoveredObjectId:t.yb,seriesData:e,sourceEvent:t.Cb}}}function yn(t,e){return function(t,e,i){let s;if(O(t)){const e=document.getElementById(t);g(null!==e,`Cannot find element in DOM with id=${t}`),s=e}else s=t;const n=new Sn(s,e,i);return e.setOptions(n.options()),n}(t,new Ji,Ji.Dd(e))}Object.assign(Object.assign({},c),u)}}]);