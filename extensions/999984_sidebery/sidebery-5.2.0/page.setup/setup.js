import{Keybindings,popup_bookmarks_default,popup_dialog_default,popup_new_tab_shortcuts_default,reactiveUpgrading,select_field_default,select_input_default,showUpgradingScreen,text_field_default,text_input_default,toggle_field_default,toggle_input_default,upgrade_screen_default}from"../chunk-76OYADB3.js";import{BKM_MENU_ID,BKM_ROOT_ID,BOOKMARKS_MENU,BOOKMARKS_PANEL_MENU,BTN_ICONS,Bookmarks,COLOR_OPTS,CONTAINER_ICON_OPTS,CONTAINER_ID,Containers,DEFAULT_CONTAINER,DEFAULT_CONTAINER_ID,DEFAULT_SETTINGS,FOLDER_NAME_DATA_RE,Info,LANG,MAX_COUNT_LIMIT,MAX_SIZE_LIMIT,Menu,NOID,PANEL_ICON_OPTS,PROXY_OPTS,Permissions,RGB_COLORS,SETTINGS_OPTIONS,Settings,SetupPage,Sidebar,SidebarConfigRState,Snapshots,Store,Styles,TABS_MENU,TABS_PANEL_MENU,Windows,ask,bg,broadcast,bytesToStr,cloneArray,cloneObject,closeNewTabShortcutsPopup,closeTabMoveRulesPopup,closeTabReopenRulesPopup,connectTo,createBookmarksPanelConfig,createHistoryPanelConfig,createTabsPanelConfig,debounce,err,fillIcon,getDayStartMS,getSidebarConfigFromV4,initFavicons,initPopups,initSidebarConfig,isBookmarksPanel,isTabsPanel,loadBinAsBase64,loadFavicons,loadFaviconsData,loadSidebarConfig,normalizeUrl,openNewTabShortcutsPopup,openTabMoveRulesPopup,openTabReopenRulesPopup,reactive,reactive2,recreateNormalizedObject,registerActions,resizeFavicon,saveSidebarConfig,setInstanceType,setInstanceType2,setTabId,setTabId2,setWinId,setWinId2,setupGlobalMessageListener,setupSidebarConfigListeners,sidebar,sleep,strSize,toRGBA,translate,uDate,uTime,uid,wait,warn}from"../chunk-4KZVVU6Z.js";import"../chunk-FF3JOXTG.js";import{createApp,reactive as reactive16}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent37}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref36,renderList as _renderList10,Fragment as _Fragment10,openBlock as _openBlock38,createElementBlock as _createElementBlock38,toDisplayString as _toDisplayString37,createElementVNode as _createElementVNode38,normalizeClass as _normalizeClass4,createBlock as _createBlock9,createCommentVNode as _createCommentVNode23,KeepAlive as _KeepAlive,Transition as _Transition5,withCtx as _withCtx6,createVNode as _createVNode31}from"/vendor/vue.runtime.esm-browser.prod.js";import{computed as computed16,onMounted as onMounted28}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent24}from"/vendor/vue.runtime.esm-browser.prod.js";import{createVNode as _createVNode23,unref as _unref24,toDisplayString as _toDisplayString24,createElementVNode as _createElementVNode25,withModifiers as _withModifiers6,openBlock as _openBlock25,createElementBlock as _createElementBlock25,createCommentVNode as _createCommentVNode12,Transition as _Transition4,withCtx as _withCtx4}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref21,onActivated}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref,toDisplayString as _toDisplayString,createElementVNode as _createElementVNode,createVNode as _createVNode,openBlock as _openBlock,createElementBlock as _createElementBlock}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref,reactive as reactive3,onMounted}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_1=_createElementVNode("span",{class:"header-shadow"},null,-1),_hoisted_2={class:"sub-fields"},_hoisted_3={class:"sub-fields"},_hoisted_4={class:"ctrls"},settings_general_default=_defineComponent({__name:"settings.general",setup(__props){let el=ref(null),state=reactive3({storageOveral:"-"});onMounted(()=>{SetupPage.registerEl("settings_general",el.value),calcStorageInfo()});function showStorageView(){location.hash="storage"}async function calcStorageInfo(){let stored;try{stored=await browser.storage.local.get()}catch{return}state.storageOveral=strSize(JSON.stringify(stored))}async function toggleSelWinScreenshots(){!Settings.state.selWinScreenshots&&!Permissions.reactive.webData&&!await Permissions.request("<all_urls>")||(Settings.state.selWinScreenshots=!Settings.state.selWinScreenshots,Settings.saveDebounced(150))}function showPermissionsPopup(){SetupPage.reactive.permissions=!0}return(_ctx,_cache)=>(_openBlock(),_createElementBlock("section",{ref_key:"el",ref:el},[_createElementVNode("h2",null,_toDisplayString(_unref(translate)("settings.general_title")),1),_hoisted_1,_createVNode(toggle_field_default,{label:"settings.native_scrollbars",value:_unref(Settings).state.nativeScrollbars,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref(Settings).state.nativeScrollbars=$event),_cache[1]||(_cache[1]=$event=>_unref(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode("div",_hoisted_2,[_createVNode(toggle_field_default,{label:"settings.native_scrollbars_thin",inactive:!_unref(Settings).state.nativeScrollbars,value:_unref(Settings).state.nativeScrollbarsThin,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref(Settings).state.nativeScrollbarsThin=$event),_cache[3]||(_cache[3]=$event=>_unref(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode(toggle_field_default,{label:"settings.native_scrollbars_left",inactive:!_unref(Settings).state.nativeScrollbars,value:_unref(Settings).state.nativeScrollbarsLeft,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref(Settings).state.nativeScrollbarsLeft=$event),_cache[5]||(_cache[5]=$event=>_unref(Settings).saveDebounced(150))]},null,8,["inactive","value"])]),_createVNode(toggle_field_default,{label:"settings.sel_win_screenshots",value:_unref(Settings).state.selWinScreenshots,"onUpdate:value":toggleSelWinScreenshots},null,8,["value"]),_createVNode(toggle_field_default,{label:"settings.update_sidebar_title",value:_unref(Settings).state.updateSidebarTitle,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref(Settings).state.updateSidebarTitle=$event),_cache[7]||(_cache[7]=$event=>_unref(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode(toggle_field_default,{label:"settings.mark_window",value:_unref(Settings).state.markWindow,"onUpdate:value":[_cache[8]||(_cache[8]=$event=>_unref(Settings).state.markWindow=$event),_cache[9]||(_cache[9]=$event=>_unref(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode("div",_hoisted_3,[_createVNode(text_field_default,{class:"-inline",label:"settings.mark_window_preface",or:"---",value:_unref(Settings).state.markWindowPreface,"onUpdate:value":[_cache[10]||(_cache[10]=$event=>_unref(Settings).state.markWindowPreface=$event),_cache[11]||(_cache[11]=$event=>_unref(Settings).saveDebounced(500))],note:_unref(translate)("settings.mark_window_preface_note"),inactive:!_unref(Settings).state.markWindow},null,8,["value","note","inactive"])]),_createElementVNode("div",_hoisted_4,[_createElementVNode("div",{class:"btn",onClick:showStorageView},_toDisplayString(_unref(translate)("settings.storage_btn"))+" "+_toDisplayString(state.storageOveral),1),_createElementVNode("div",{class:"btn",onClick:showPermissionsPopup},_toDisplayString(_unref(translate)("settings.permissions_btn")),1)])],512))}});import{defineComponent as _defineComponent2}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref2,toDisplayString as _toDisplayString2,createElementVNode as _createElementVNode2,createVNode as _createVNode2,openBlock as _openBlock2,createElementBlock as _createElementBlock2}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref2,onMounted as onMounted2}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_12=_createElementVNode2("span",{class:"header-shadow"},null,-1),_hoisted_22={class:"ctrls"},settings_menu_default=_defineComponent2({__name:"settings.menu",setup(__props){let el=ref2(null),ignoreContainersRuleValid=ref2(""),validateIgnoreContainersRule=debounce(value=>{value?Menu.getContainersRules(value)?ignoreContainersRuleValid.value="valid":ignoreContainersRuleValid.value="invalid":ignoreContainersRuleValid.value=""});function onCtxMenuIgnoreContainersUpdate(value){validateIgnoreContainersRule(321,value),Settings.saveDebounced(500)}return onMounted2(()=>SetupPage.registerEl("settings_menu",el.value)),(_ctx,_cache)=>(_openBlock2(),_createElementBlock2("section",{ref_key:"el",ref:el},[_createElementVNode2("h2",null,_toDisplayString2(_unref2(translate)("settings.ctx_menu_title")),1),_hoisted_12,_createVNode2(toggle_field_default,{label:"settings.ctx_menu_native",value:_unref2(Settings).state.ctxMenuNative,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref2(Settings).state.ctxMenuNative=$event),_cache[1]||(_cache[1]=$event=>_unref2(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode2(toggle_field_default,{label:"settings.ctx_menu_render_inact",value:_unref2(Settings).state.ctxMenuRenderInact,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref2(Settings).state.ctxMenuRenderInact=$event),_cache[3]||(_cache[3]=$event=>_unref2(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode2(toggle_field_default,{label:"settings.ctx_menu_render_icons",value:_unref2(Settings).state.ctxMenuRenderIcons,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref2(Settings).state.ctxMenuRenderIcons=$event),_cache[5]||(_cache[5]=$event=>_unref2(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode2(text_field_default,{label:"settings.ctx_menu_ignore_ctr",or:_unref2(translate)("settings.ctx_menu_ignore_ctr_or"),note:_unref2(translate)("settings.ctx_menu_ignore_ctr_note"),line:!0,valid:ignoreContainersRuleValid.value,"input-width":"50",value:_unref2(Settings).state.ctxMenuIgnoreContainers,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref2(Settings).state.ctxMenuIgnoreContainers=$event),onCtxMenuIgnoreContainersUpdate]},null,8,["or","note","valid","value"]),_createElementVNode2("div",_hoisted_22,[_createElementVNode2("div",{class:"btn",onClick:_cache[7]||(_cache[7]=$event=>_unref2(SetupPage).switchView("menu_editor"))},_toDisplayString2(_unref2(translate)("settings.ctx_menu_editor")),1)])],512))}});import{defineComponent as _defineComponent6}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref6,toDisplayString as _toDisplayString6,createElementVNode as _createElementVNode6,createVNode as _createVNode5,openBlock as _openBlock6,createElementBlock as _createElementBlock6,createCommentVNode as _createCommentVNode4,renderList as _renderList,Fragment as _Fragment,withModifiers as _withModifiers,TransitionGroup as _TransitionGroup,withCtx as _withCtx,Transition as _Transition}from"/vendor/vue.runtime.esm-browser.prod.js";import{computed as computed3,ref as ref4,onMounted as onMounted4}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent3}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref3,toDisplayString as _toDisplayString3,createElementVNode as _createElementVNode3,openBlock as _openBlock3,createElementBlock as _createElementBlock3,createCommentVNode as _createCommentVNode}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_13=["data-inactive"],_hoisted_23={class:"body"},_hoisted_32={class:"label"},_hoisted_42={key:0,class:"info"},info_field_default=_defineComponent3({__name:"info-field",props:{value:{},label:{},inactive:{type:Boolean}},emits:["click"],setup(__props,{emit:__emit}){let emit=__emit,props=__props;function onClick(e){emit("click",e)}return(_ctx,_cache)=>(_openBlock3(),_createElementBlock3("div",{class:"InfoField","data-inactive":props.inactive,onClick},[_createElementVNode3("div",_hoisted_23,[_createElementVNode3("div",_hoisted_32,_toDisplayString3(_unref3(translate)(props.label)),1),props.value?(_openBlock3(),_createElementBlock3("div",_hoisted_42,_toDisplayString3(props.value),1)):_createCommentVNode("v-if",!0)])],8,_hoisted_13))}});import{defineComponent as _defineComponent4}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref4,toDisplayString as _toDisplayString4,createElementVNode as _createElementVNode4,createVNode as _createVNode3,openBlock as _openBlock4,createBlock as _createBlock,createCommentVNode as _createCommentVNode2,createElementBlock as _createElementBlock4}from"/vendor/vue.runtime.esm-browser.prod.js";import{computed}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_14=["data-active","data-inactive"],_hoisted_24={class:"body"},_hoisted_33={class:"label"},_hoisted_43={class:"input-group"},_hoisted_5={key:0,class:"note"},num_field_default=_defineComponent4({__name:"num-field",props:{label:{},value:{},or:{},inactive:{type:Boolean},unit:{},unitOpts:{},unitLabel:{},allowNegative:{type:Boolean},note:{},maxValue:{}},emits:["update:value","update:unit"],setup(__props,{emit:__emit}){let emit=__emit,props=__props,validUnit=computed(()=>props.value?props.unit??"none":"none");function valueFilter(e){let target=e.target,raw=target.value;if(props.allowNegative&&(raw==="-0"||raw==="0-")){target.value="-";return}let val=parseInt(raw);return isNaN(val)||!props.allowNegative&&val<0?0:(props.maxValue!==void 0&&val>props.maxValue&&(val=props.maxValue),val)}function select(unit){if(!props.inactive&&(emit("update:unit",unit),props.value!==void 0)){let val;if(typeof props.value=="string"?val=parseInt(props.value):val=props.value,isNaN(val))return;val===0&&emit("update:value",1)}}function onKD(e){if(props.inactive||props.value===void 0)return;let val;if(typeof props.value=="string"?val=parseInt(props.value):val=props.value,!isNaN(val)){if(e.key==="ArrowUp")emit("update:value",val+1);else if(e.key==="ArrowDown"){if(val<=0)return;emit("update:value",val-1)}}}return(_ctx,_cache)=>(_openBlock4(),_createElementBlock4("div",{class:"NumField","data-active":!!props.value,"data-inactive":props.inactive},[_createElementVNode4("div",_hoisted_24,[_createElementVNode4("div",_hoisted_33,_toDisplayString4(_unref4(translate)(props.label)),1),_createElementVNode4("div",_hoisted_43,[_createVNode3(text_input_default,{class:"text-input",value:props.value,line:!0,filter:valueFilter,onKeydown:onKD,"onUpdate:value":_cache[0]||(_cache[0]=$event=>emit("update:value",$event))},null,8,["value"]),props.unitOpts&&props.unitLabel?(_openBlock4(),_createBlock(select_input_default,{key:0,class:"unit-input",value:validUnit.value,opts:props.unitOpts,label:props.unitLabel,plurNum:props.value,"onUpdate:value":select},null,8,["value","opts","label","plurNum"])):_createCommentVNode2("v-if",!0)])]),props.note?(_openBlock4(),_createElementBlock4("div",_hoisted_5,_toDisplayString4(props.note),1)):_createCommentVNode2("v-if",!0)],8,_hoisted_14))}});import{defineComponent as _defineComponent5}from"/vendor/vue.runtime.esm-browser.prod.js";import{toDisplayString as _toDisplayString5,openBlock as _openBlock5,createElementBlock as _createElementBlock5,createCommentVNode as _createCommentVNode3,unref as _unref5,createBlock as _createBlock2,createElementVNode as _createElementVNode5,createVNode as _createVNode4}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref3,reactive as reactive4,computed as computed2,onMounted as onMounted3,nextTick}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_15={key:0},_hoisted_25={key:5,class:"TextField custom-icon"},_hoisted_34={class:"body"},_hoisted_44={class:"label"},_hoisted_52=["data-active"],_hoisted_6=["data-active"],_hoisted_7=["data-active"],_hoisted_8={class:"btn-label"},_hoisted_9={key:0,class:"img-box"},_hoisted_10=["src"],_hoisted_11=_createElementVNode5("svg",null,[_createElementVNode5("use",{"xlink:href":"#icon_remove"})],-1),_hoisted_122=[_hoisted_11],_hoisted_132={key:0,class:"body -sub"},_hoisted_142={key:1,class:"note -sub"},_hoisted_152={key:2,class:"body -sub"},_hoisted_16={key:6,class:"sub-fields"},_hoisted_17={class:"sub-fields"},_hoisted_18={key:13,class:"InfoField -folder"},_hoisted_19={class:"label"},_hoisted_20={class:"value"},_hoisted_21={class:"ctrls"},_hoisted_222={key:14,class:"InfoField"},_hoisted_232={class:"label"},_hoisted_242={key:15,class:"sub-fields"},_hoisted_252={key:16,class:"InfoField"},_hoisted_26={class:"label"},popup_panel_config_default=_defineComponent5({__name:"popup.panel-config",props:{conf:{}},setup(__props){let URL_RE=/^https?:\/\/.+/,TABS_PANEL_ICON_OPTS=[{value:"icon_tabs",icon:"#icon_tabs"},...PANEL_ICON_OPTS],BOOKMARKS_PANEL_ICON_OPTS=[{value:"icon_bookmarks",icon:"#icon_bookmarks"},...PANEL_ICON_OPTS],defaultContainerTooltip=translate("panel.ctr_tooltip_default"),noneContainerTooltip=translate("panel.ctr_tooltip_none"),nonePanelTooltip=translate("panel.panel_tooltip_none"),state=reactive4({customIconUrl:"",customIconType:"",customIconTextValue:"",customIconUrlValue:"",customIconOriginal:"",customIconColorize:!1}),updCustomIconTimeout,rootEl=ref3(null),nameInput=ref3(null),props=__props,isBookmarks=computed2(()=>isBookmarksPanel(props.conf)),isTabs=computed2(()=>isTabsPanel(props.conf)),isTabsOrBookmarks=computed2(()=>!isTabs.value&&!isBookmarks.value),containersOpts=computed2(()=>{let result=[];for(let c of Object.values(Containers.reactive.byId))result.push({value:c.id,color:c.color,icon:"#"+c.icon,title:c.name,tooltip:c.name});return result.push({value:"none",color:"inactive",icon:"#icon_none",title:noneContainerTooltip,tooltip:noneContainerTooltip}),result}),availableForAutoMoveContainersOpts=computed2(()=>{let result=[],used={};for(let id of SidebarConfigRState.nav){let p=SidebarConfigRState.panels[id];if(!(!isTabsPanel(p)||p.id===props.conf.id))for(let ruleConf of p.moveRules)ruleConf.containerId&&!ruleConf.url&&(used[ruleConf.containerId]=!0)}used[DEFAULT_CONTAINER_ID]||result.push({value:DEFAULT_CONTAINER_ID,color:"toolbar",icon:"#icon_ff",title:defaultContainerTooltip,tooltip:defaultContainerTooltip});for(let c of Object.values(Containers.reactive.byId))if(!used[c.id]){let icon="#"+c.icon;result.push({value:c.id,color:c.color,icon,title:c.name,tooltip:c.name})}return result.push({value:"none",color:"inactive",icon:"#icon_none",title:noneContainerTooltip,tooltip:noneContainerTooltip}),result}),availableForMoveExcludePanelsOpts=computed2(()=>{let result=[];for(let id of SidebarConfigRState.nav){let p=SidebarConfigRState.panels[id];if(!isTabsPanel(p)||p.id===props.conf.id)continue;let icon=p.iconIMG?p.iconIMG:"#"+p.iconSVG;result.push({value:p.id,color:p.color,icon,title:p.name})}return result.push({value:NOID,color:"inactive",icon:"#icon_none",title:nonePanelTooltip,tooltip:nonePanelTooltip}),result}),iconSVG=computed2(()=>props.conf.iconSVG??""),color=computed2(()=>props.conf.color||""),newTabCtx=computed2(()=>isTabsPanel(props.conf)&&props.conf.newTabCtx||""),dropTabCtx=computed2(()=>isTabsPanel(props.conf)&&props.conf.dropTabCtx||""),rootPath=computed2(()=>{if(!isBookmarksPanel(props.conf))return"";if(!props.conf.rootId||props.conf.rootId===BKM_ROOT_ID)return"/";let parent=Bookmarks.reactive.byId[props.conf.rootId];if(!parent)return translate("panel.root_id_wrong");let path=[];for(;parent;){let titleExec=FOLDER_NAME_DATA_RE.exec(parent.title);titleExec?path.push(titleExec[1]):path.push(parent.title),parent=Bookmarks.reactive.byId[parent.parentId]}return"/"+path.reverse().join("/")}),rootDirIsFF=computed2(()=>isBookmarksPanel(props.conf)?props.conf.rootId.endsWith("___"):!1);onMounted3(()=>{init(),Bookmarks.reactive.tree.length||Bookmarks.load()});async function init(){await nextTick(),setCustomIconType(),props.conf.iconIMG&&(state.customIconUrl=props.conf.iconIMG,props.conf.iconIMGSrc&&(state.customIconType==="text"?state.customIconTextValue=props.conf.iconIMGSrc:state.customIconType==="url"&&(state.customIconUrlValue=props.conf.iconIMGSrc))),nameInput.value&&nameInput.value.recalcTextHeight()}function isNotTabsPanel(conf){return!!conf&&!isTabsPanel(conf)}function onWheel(e){if(!rootEl.value)return;let scrollOffset=rootEl.value.scrollTop,maxScrollOffset=rootEl.value.scrollHeight-rootEl.value.offsetHeight;scrollOffset===0&&e.deltaY<0&&e.preventDefault(),scrollOffset===maxScrollOffset&&e.deltaY>0&&e.preventDefault()}function onNameInput(value){props.conf.name=value,value&&saveSidebarConfig(500)}function setIcon(value){props.conf.iconSVG=value,saveSidebarConfig()}function setColor(value){props.conf.color=value,props.conf.iconIMG&&recolorCustomIcon(),saveSidebarConfig()}function setCustomIconType(type){if(type===void 0)if(props.conf.iconIMG){let normSrc=props.conf.iconIMGSrc?.trim();normSrc?URL_RE.test(normSrc)?state.customIconType="url":state.customIconType="text":state.customIconType="file"}else state.customIconType="";else state.customIconType===type?state.customIconType="":state.customIconType=type}function onCustomIconTextInput(value){state.customIconTextValue=value,updCustomIconTimeout=wait(updCustomIconTimeout,500,()=>{let normValue=state.customIconTextValue?.trim();if(!normValue){state.customIconUrl="",props.conf.iconIMG="",props.conf.iconIMGSrc="",saveSidebarConfig();return}props.conf.iconIMGSrc=normValue,drawTextIcon()})}async function loadCustomIcon(){if(!Permissions.reactive.webData&&!await Permissions.request("<all_urls>"))return;let normValue=state.customIconUrlValue?.trim();props.conf.iconIMGSrc=normValue,normValue&&(state.customIconUrl=normValue)}async function onCustomIconLoad(e){if(!state.customIconUrl||state.customIconUrl.startsWith("data:image"))return;let img=e.target,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");if(!ctx)return;canvas.width=img.naturalWidth,canvas.height=img.naturalHeight,ctx.imageSmoothingEnabled=!1,ctx.drawImage(img,0,0,img.naturalWidth,img.naturalHeight);let base64=canvas.toDataURL("image/png");try{props.conf.iconIMG=await prepareCustomIcon(base64)}catch{return}state.customIconUrl=props.conf.iconIMG,saveSidebarConfig()}function onCustomIconError(){state.customIconUrl=props.conf.iconIMG??""}async function drawTextIcon(){if(!props.conf.iconIMGSrc)return;let canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");if(!ctx)return;let[txt,color2,font]=props.conf.iconIMGSrc.split("::"),x=16,y=16;color2||(Styles.reactive.toolbarColorScheme==="light"&&(color2="#000000"),Styles.reactive.toolbarColorScheme==="dark"&&(color2="#ffffff")),canvas.width=32,canvas.height=32,ctx.imageSmoothingEnabled=!1,ctx.fillStyle=color2,ctx.textBaseline="middle",ctx.textAlign="center",font||(font="32px sans-serif");let offset=0,offsetProbe=isTextFit(ctx,txt,font,30,30);offsetProbe!==null&&(offset=offsetProbe),y+=offset,ctx.font=font,ctx.fillText(txt,x,y,32);let base64=canvas.toDataURL("image/png");props.conf.iconIMG=await prepareCustomIcon(base64),state.customIconUrl=props.conf.iconIMG,saveSidebarConfig()}function isTextFit(ctx,txt,font,maxW,maxH){ctx.font=font;let metrics;try{metrics=ctx.measureText(txt)}catch{return null}let w=metrics.width;return metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent<=maxH&&w<=maxW?(metrics.actualBoundingBoxAscent-metrics.actualBoundingBoxDescent)/2:null}async function prepareCustomIcon(icon){if(state.customIconOriginal=icon,state.customIconColorize){let color2=RGB_COLORS[props.conf.color];props.conf.color==="toolbar"&&(Styles.reactive.toolbarColorScheme==="light"&&(color2="#000000"),Styles.reactive.toolbarColorScheme==="dark"&&(color2="#ffffff")),icon=await fillIcon(icon,color2)}return await resizeFavicon(icon)}function openCustomIconFile(importEvent){let file=importEvent.target.files?.[0];if(!file)return onCustomIconRm();let reader=new FileReader;reader.onload=async fileEvent=>{if(!fileEvent.target?.result)return onCustomIconRm(),err("Cannot import data: No file content");let icon;try{icon=await prepareCustomIcon(fileEvent.target.result)}catch{onCustomIconRm();return}props.conf.iconIMG=icon,props.conf.iconIMGSrc="",state.customIconTextValue="",state.customIconUrlValue="",state.customIconUrl=props.conf.iconIMG,saveSidebarConfig()},reader.readAsDataURL(file)}function onCustomIconRm(){setCustomIconType(""),state.customIconTextValue="",state.customIconUrlValue="",state.customIconOriginal="",state.customIconUrl="",props.conf.iconIMG="",props.conf.iconIMGSrc="",saveSidebarConfig()}function toggleCustomIconColorize(){state.customIconColorize=!state.customIconColorize,recolorCustomIcon()}async function recolorCustomIcon(){state.customIconOriginal&&(props.conf.iconIMG=await prepareCustomIcon(state.customIconOriginal),state.customIconUrl=props.conf.iconIMG,saveSidebarConfig())}function togglePanelLock(){props.conf.lockedPanel=!props.conf.lockedPanel,saveSidebarConfig()}function toggleTempMode(){isNotTabsPanel(props.conf)&&(props.conf.tempMode=!props.conf.tempMode,saveSidebarConfig())}function toggleSkipOnSwitching(){props.conf.skipOnSwitching=!props.conf.skipOnSwitching,saveSidebarConfig()}function togglePanelNoEmpty(){isTabsPanel(props.conf)&&(props.conf.noEmpty=!props.conf.noEmpty,saveSidebarConfig())}function togglePanelNewTabCtx(value){isTabsPanel(props.conf)&&(props.conf.newTabCtx=value,saveSidebarConfig())}async function toggleNewTabCtxReopen(){!Permissions.reactive.webData&&!Settings.state.newTabCtxReopen&&!await Permissions.request("<all_urls>")||(Settings.state.newTabCtxReopen=!Settings.state.newTabCtxReopen,Settings.saveDebounced(150))}function togglePanelDropTabCtx(value){isTabsPanel(props.conf)&&(props.conf.dropTabCtx=value,saveSidebarConfig())}async function setBookmarksRootId(){if(!isBookmarksPanel(props.conf)||!Permissions.reactive.bookmarks&&!await browser.permissions.request({origins:[],permissions:["bookmarks"]}))return;let result=await Bookmarks.openBookmarksPopup({title:translate("popup.bookmarks.select_root_folder"),controls:[{label:"btn.save"}],location:BKM_MENU_ID,locationField:!0,locationTree:!0});result&&result.location&&(props.conf.rootId=result.location,saveSidebarConfig(500))}function resetBookmarksRootId(){isBookmarksPanel(props.conf)&&(props.conf.rootId=BKM_ROOT_ID,saveSidebarConfig(500))}function selectBookmarksViewMode(value){isBookmarksPanel(props.conf)&&(props.conf.viewMode=value,saveSidebarConfig())}function toggleAutoConvert(){isBookmarksPanel(props.conf)&&(props.conf.autoConvert=!props.conf.autoConvert,saveSidebarConfig())}function openRulesPopup(){openTabMoveRulesPopup(props.conf)}function openShortcutsPopup(){openNewTabShortcutsPopup(props.conf)}function getManageRulesBtnLabel(panel){let label=translate("panel.tab_move_rules_manage_btn");return panel.moveRules.length?label+` (${panel.moveRules.length})`:label}function getManageShortcutsBtnLabel(panel){let label=translate("panel.new_tab_shortcuts_manage_btn");return panel.newTabBtns.length?label+` (${panel.newTabBtns.length})`:label}function onFileInputKeyup(e){e.code==="Escape"&&(e.stopPropagation(),rootEl.value?.focus())}function toggleMoveExclude(id){isTabsPanel(props.conf)&&(props.conf.moveExcludedTo=id,saveSidebarConfig())}return(_ctx,_cache)=>(_openBlock5(),_createElementBlock5("div",{class:"ConfigPopup",ref_key:"rootEl",ref:rootEl,onWheel},[isTabsOrBookmarks.value?(_openBlock5(),_createElementBlock5("h2",_hoisted_15,_toDisplayString5(_ctx.conf.name),1)):_createCommentVNode3("v-if",!0),isTabsOrBookmarks.value?_createCommentVNode3("v-if",!0):(_openBlock5(),_createBlock2(text_input_default,{key:1,class:"title",ref_key:"nameInput",ref:nameInput,line:!0,value:_ctx.conf.name,or:_unref5(translate)("panel.name_placeholder"),"onUpdate:value":onNameInput},null,8,["value","or"])),isTabsPanel(_ctx.conf)?(_openBlock5(),_createBlock2(select_field_default,{key:2,label:"panel.icon_label",optLabel:"settings.panel_icon_",value:iconSVG.value,opts:TABS_PANEL_ICON_OPTS,color:color.value,"onUpdate:value":setIcon},null,8,["value","color"])):_createCommentVNode3("v-if",!0),isBookmarksPanel(_ctx.conf)?(_openBlock5(),_createBlock2(select_field_default,{key:3,label:"panel.icon_label",optLabel:"settings.panel_icon_",value:iconSVG.value,opts:BOOKMARKS_PANEL_ICON_OPTS,color:color.value,"onUpdate:value":setIcon},null,8,["value","color"])):_createCommentVNode3("v-if",!0),isTabsOrBookmarks.value?_createCommentVNode3("v-if",!0):(_openBlock5(),_createBlock2(select_field_default,{key:4,label:"panel.color_label",value:color.value,opts:_unref5(COLOR_OPTS),icon:"#"+iconSVG.value,"onUpdate:value":setColor},null,8,["value","opts","icon"])),isTabsPanel(_ctx.conf)||isBookmarksPanel(_ctx.conf)?(_openBlock5(),_createElementBlock5("div",_hoisted_25,[_createElementVNode5("div",_hoisted_34,[_createElementVNode5("div",_hoisted_44,_toDisplayString5(_unref5(translate)("panel.custom_icon")),1),_createElementVNode5("div",{class:"btn","data-active":state.customIconType==="text",onClick:_cache[0]||(_cache[0]=$event=>setCustomIconType("text"))},_toDisplayString5(_unref5(translate)("panel.custom_icon_text_btn")),9,_hoisted_52),_createElementVNode5("div",{class:"btn","data-active":state.customIconType==="url",onClick:_cache[1]||(_cache[1]=$event=>setCustomIconType("url"))},_toDisplayString5(_unref5(translate)("panel.custom_icon_url_btn")),9,_hoisted_6),_createElementVNode5("div",{class:"btn","data-active":state.customIconType==="file",onClick:_cache[2]||(_cache[2]=$event=>setCustomIconType("file"))},[_createElementVNode5("div",_hoisted_8,_toDisplayString5(_unref5(translate)("panel.custom_icon_file_btn")),1),_createElementVNode5("input",{type:"file",accept:"image/*",onInput:openCustomIconFile,onKeyup:onFileInputKeyup},null,32)],8,_hoisted_7),state.customIconUrl?(_openBlock5(),_createElementBlock5("div",_hoisted_9,[_createElementVNode5("img",{src:state.customIconUrl,onLoad:onCustomIconLoad,onError:onCustomIconError},null,40,_hoisted_10)])):_createCommentVNode3("v-if",!0),state.customIconUrl?(_openBlock5(),_createElementBlock5("div",{key:1,class:"img-rm",onClick:onCustomIconRm},_hoisted_122)):_createCommentVNode3("v-if",!0)]),state.customIconType==="text"?(_openBlock5(),_createElementBlock5("div",_hoisted_132,[_createVNode4(text_input_default,{value:state.customIconTextValue,line:!0,or:_unref5(translate)("panel.custom_icon_text_placeholder"),"onUpdate:value":onCustomIconTextInput},null,8,["value","or"])])):_createCommentVNode3("v-if",!0),state.customIconType==="text"?(_openBlock5(),_createElementBlock5("div",_hoisted_142,_toDisplayString5(_unref5(translate)("panel.custom_icon_note")),1)):_createCommentVNode3("v-if",!0),state.customIconType==="url"?(_openBlock5(),_createElementBlock5("div",_hoisted_152,[_createVNode4(text_input_default,{value:state.customIconUrlValue,"onUpdate:value":_cache[3]||(_cache[3]=$event=>state.customIconUrlValue=$event),line:!0,or:_unref5(translate)("panel.custom_icon_url_placeholder")},null,8,["value","or"]),_createElementVNode5("div",{class:"btn",onClick:loadCustomIcon},_toDisplayString5(_unref5(translate)("panel.custom_icon_load")),1)])):_createCommentVNode3("v-if",!0)])):_createCommentVNode3("v-if",!0),isTabsPanel(_ctx.conf)||isBookmarksPanel(_ctx.conf)?(_openBlock5(),_createElementBlock5("div",_hoisted_16,[_createVNode4(toggle_field_default,{label:"panel.custom_icon_colorize",inactive:!state.customIconOriginal,value:state.customIconColorize,"onUpdate:value":toggleCustomIconColorize},null,8,["inactive","value"])])):_createCommentVNode3("v-if",!0),_createVNode4(toggle_field_default,{label:"panel.lock_panel_label",value:_ctx.conf.lockedPanel,"onUpdate:value":togglePanelLock},null,8,["value"]),isNotTabsPanel(_ctx.conf)?(_openBlock5(),_createBlock2(toggle_field_default,{key:7,label:"panel.temp_mode_label",value:_ctx.conf.tempMode,"onUpdate:value":toggleTempMode},null,8,["value"])):_createCommentVNode3("v-if",!0),_createVNode4(toggle_field_default,{label:"panel.skip_on_switching",value:_ctx.conf.skipOnSwitching,"onUpdate:value":toggleSkipOnSwitching},null,8,["value"]),isTabsPanel(_ctx.conf)?(_openBlock5(),_createBlock2(toggle_field_default,{key:8,label:"panel.no_empty_label",value:_ctx.conf.noEmpty,"onUpdate:value":togglePanelNoEmpty},null,8,["value"])):_createCommentVNode3("v-if",!0),isTabsPanel(_ctx.conf)?(_openBlock5(),_createBlock2(select_field_default,{key:9,label:"panel.new_tab_ctx",value:newTabCtx.value,opts:containersOpts.value,folded:!0,"onUpdate:value":togglePanelNewTabCtx},null,8,["value","opts"])):_createCommentVNode3("v-if",!0),_createElementVNode5("div",_hoisted_17,[isTabsPanel(_ctx.conf)?(_openBlock5(),_createBlock2(toggle_field_default,{key:0,label:"panel.new_tab_ctx_reopen",inactive:_ctx.conf.newTabCtx==="none",value:_unref5(Settings).state.newTabCtxReopen,"onUpdate:value":toggleNewTabCtxReopen},null,8,["inactive","value"])):_createCommentVNode3("v-if",!0)]),isTabsPanel(_ctx.conf)?(_openBlock5(),_createBlock2(select_field_default,{key:10,label:"panel.drop_tab_ctx",value:dropTabCtx.value,opts:availableForAutoMoveContainersOpts.value,folded:!0,"onUpdate:value":togglePanelDropTabCtx},null,8,["value","opts"])):_createCommentVNode3("v-if",!0),isBookmarksPanel(_ctx.conf)?(_openBlock5(),_createBlock2(select_field_default,{key:11,label:"panel.bookmarks_view_mode",optLabel:"panel.bookmarks_view_mode_",value:_ctx.conf.viewMode,opts:["tree","history"],"onUpdate:value":selectBookmarksViewMode},null,8,["value"])):_createCommentVNode3("v-if",!0),isBookmarksPanel(_ctx.conf)?(_openBlock5(),_createBlock2(toggle_field_default,{key:12,label:"panel.auto_convert",inactive:rootDirIsFF.value,value:_ctx.conf.autoConvert,"onUpdate:value":toggleAutoConvert},null,8,["inactive","value"])):_createCommentVNode3("v-if",!0),isBookmarks.value?(_openBlock5(),_createElementBlock5("div",_hoisted_18,[_createElementVNode5("div",_hoisted_19,_toDisplayString5(_unref5(translate)("panel.root_id_label")),1),_createElementVNode5("div",_hoisted_20,_toDisplayString5(rootPath.value),1),_createElementVNode5("div",_hoisted_21,[_createElementVNode5("div",{class:"btn",onClick:setBookmarksRootId},_toDisplayString5(_unref5(translate)("panel.root_id.choose")),1),_createElementVNode5("div",{class:"btn",onClick:resetBookmarksRootId},_toDisplayString5(_unref5(translate)("panel.root_id.reset")),1)])])):_createCommentVNode3("v-if",!0),isTabsPanel(_ctx.conf)?(_openBlock5(),_createElementBlock5("div",_hoisted_222,[_createElementVNode5("div",_hoisted_232,_toDisplayString5(_unref5(translate)("panel.tab_move_rules")),1),_createElementVNode5("div",{class:"btn",onClick:openRulesPopup},_toDisplayString5(getManageRulesBtnLabel(_ctx.conf)),1)])):_createCommentVNode3("v-if",!0),isTabsPanel(_ctx.conf)?(_openBlock5(),_createElementBlock5("div",_hoisted_242,[_createVNode4(select_field_default,{label:"panel.move_excluded_to",inactive:!_ctx.conf.moveRules.length,value:_ctx.conf.moveExcludedTo,opts:availableForMoveExcludePanelsOpts.value,folded:!0,"onUpdate:value":toggleMoveExclude},null,8,["inactive","value","opts"])])):_createCommentVNode3("v-if",!0),isTabsPanel(_ctx.conf)?(_openBlock5(),_createElementBlock5("div",_hoisted_252,[_createElementVNode5("div",_hoisted_26,_toDisplayString5(_unref5(translate)("panel.new_tab_shortcuts")),1),_createElementVNode5("div",{class:"btn",onClick:openShortcutsPopup},_toDisplayString5(getManageShortcutsBtnLabel(_ctx.conf)),1)])):_createCommentVNode3("v-if",!0)],544))}});var _hoisted_110=["data-dnd"],_hoisted_27=_createElementVNode6("span",{class:"header-shadow"},null,-1),_hoisted_35={class:"sub-fields"},_hoisted_45={class:"sub-fields"},_hoisted_53={class:"sub-fields"},_hoisted_62=["data-dnd-target"],_hoisted_72={class:"card-body"},_hoisted_82=_createElementVNode6("div",{class:"card-dnd-layer","data-dnd-group":"enabled","data-dnd-index":"-1"},null,-1),_hoisted_92={class:"card-name"},_hoisted_102=["data-id","data-inactive","data-first","data-last","data-dnd-target","data-dnd"],_hoisted_112=["data-dnd-index","data-dnd-target"],_hoisted_123=["onClick"],_hoisted_133=["data-dnd-index","onDragstart"],_hoisted_143=["data-color"],_hoisted_153={key:0,class:"bookmarks-badge-icon"},_hoisted_162=_createElementVNode6("use",{"xlink:href":"#icon_bookmark_badge"},null,-1),_hoisted_172=[_hoisted_162],_hoisted_182={key:1},_hoisted_192=["xlink:href"],_hoisted_202=["src"],_hoisted_212={class:"card-name"},_hoisted_223={key:0,class:"card-inact-note"},_hoisted_233={class:"card-badges"},_hoisted_243=["title","onClick"],_hoisted_253=_createElementVNode6("svg",{class:"-rotate270"},[_createElementVNode6("use",{"xlink:href":"#icon_download_in_progress"})],-1),_hoisted_262={class:"len"},_hoisted_272=["title","onClick"],_hoisted_28=_createElementVNode6("svg",null,[_createElementVNode6("use",{"xlink:href":"#icon_plus"})],-1),_hoisted_29={class:"len"},_hoisted_30={class:"card-ctrls"},_hoisted_31=["onClick"],_hoisted_322=_createElementVNode6("svg",null,[_createElementVNode6("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_332=[_hoisted_322],_hoisted_342=["data-inactive","onClick"],_hoisted_352=_createElementVNode6("svg",null,[_createElementVNode6("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_36=[_hoisted_352],_hoisted_37=["onClick"],_hoisted_38=_createElementVNode6("svg",null,[_createElementVNode6("use",{"xlink:href":"#icon_remove"})],-1),_hoisted_39=[_hoisted_38],_hoisted_40={key:0,class:"sub-fields -disabled"},_hoisted_41=["data-first","data-last","onClick"],_hoisted_422={class:"card-body"},_hoisted_432=["onDragstart"],_hoisted_442={class:"card-icon"},_hoisted_452={key:0},_hoisted_46=["xlink:href"],_hoisted_47=["src"],_hoisted_48={class:"card-name"},settings_navbar_default=_defineComponent6({__name:"settings.navbar",setup(__props){let el=ref4(null);function normalizeItemId(id){return id.startsWith("sp-")?"sp":id.startsWith("sd-")?"sd":id}let enabledBtns=computed3(()=>SidebarConfigRState.nav.map(id=>{let panelConf=SidebarConfigRState.panels[id];if(panelConf){let btn={id:panelConf.id,name:panelConf.name,color:panelConf.color,iconSVG:panelConf.iconSVG,iconIMG:panelConf.iconIMG};return isTabsPanel(panelConf)&&(btn.badgeMoveRules=panelConf.moveRules.length,btn.badgeShortcuts=panelConf.newTabBtns.length),btn}else{let normId=normalizeItemId(id),isSpace=normId==="sp"||normId==="sd"||id==="hdn",isHorizontal=Settings.state.navBarLayout==="horizontal",isInline=Settings.state.navBarInline,inactive=isHorizontal&&isInline&&isSpace,name=translate(`settings.nav_bar_btn_${normId}`);return{id,inactive,iconSVG:BTN_ICONS[normId],name}}})),availableBtns=computed3(()=>{let result=[],ids=["tabs_panel","bookmarks_panel","sp","sd","hdn","history","search","add_tp","create_snapshot","collapse","remute_audio_tabs","settings"];for(let id of ids)SidebarConfigRState.nav.includes(id)||result.push({id,iconSVG:BTN_ICONS[id],name:translate(`settings.nav_bar_btn_${id}`)});return result});onMounted4(()=>{SetupPage.registerEl("settings_nav",el.value)});function isBookmarksBadgeNeeded(btn){if(isBookmarksPanel(btn)){let panel=btn;return panel.iconSVG!=="icon_bookmarks"&&!panel.iconIMG}else return!1}function moveBtn(index,dir){let btnId=SidebarConfigRState.nav[index];if(btnId&&!(index===0&&dir<0)){{if(index===SidebarConfigRState.nav.length-1&&dir>0)return;SidebarConfigRState.nav.splice(index,1),SidebarConfigRState.nav.splice(index+dir,0,btnId)}saveSidebarConfig()}}async function createNavElement(id){if(id){if(id==="tabs_panel"){let panelConf=createTabsPanelConfig();return SidebarConfigRState.panels[panelConf.id]=panelConf,panelConf.id}else if(id==="bookmarks_panel"){if(!Permissions.reactive.bookmarks&&!await Permissions.request("bookmarks"))return;let panelConf=createBookmarksPanelConfig();return SidebarConfigRState.panels[panelConf.id]=panelConf,panelConf.id}else if(id==="history"){if(!Permissions.reactive.history&&!await Permissions.request("history"))return;let panelConf=createHistoryPanelConfig();return SidebarConfigRState.panels[panelConf.id]=panelConf,panelConf.id}else id==="sp"?id="sp-"+uid():id==="sd"&&(id="sd-"+uid());return id}}async function enableElement(id){id=await createNavElement(id),id&&(SidebarConfigRState.nav.push(id),saveSidebarConfig())}function disableBtn(index){let panelConf=SidebarConfigRState.panels[SidebarConfigRState.nav[index]];if(panelConf){let msg=getRmConfirmMsg(panelConf);if(msg&&!window.confirm(msg))return}SidebarConfigRState.nav.splice(index,1),saveSidebarConfig()}function getRmConfirmMsg(panel){if(panel.name){if(isTabsPanel(panel)){let preMsg=translate("settings.nav_rm_tabs_panel_confirm_pre"),postMsg=translate("settings.nav_rm_tabs_panel_confirm_post");return preMsg+panel.name+postMsg}else if(isBookmarksPanel(panel)){let preMsg=translate("settings.nav_rm_bookmarks_panel_confirm_pre"),postMsg=translate("settings.nav_rm_bookmarks_panel_confirm_post");return preMsg+panel.name+postMsg}}}let dndItemId=ref4(null),dndSrcGroup=ref4(null),dndSrcIndex=ref4(null),dndDstGroup=ref4(null),dndDstIndex=ref4(null);function onDragStart(e,group,index,id){if(!e.dataTransfer)return;if(id==="bookmarks_panel"){if(!Permissions.reactive.bookmarks){e.preventDefault(),e.stopPropagation(),location.hash="bookmarks";return}}else if(id==="history"&&!Permissions.reactive.history){e.preventDefault(),e.stopPropagation(),location.hash="history";return}let currentTarget=e.currentTarget;dndItemId.value=id,dndSrcGroup.value=group,dndSrcIndex.value=index,dndDstGroup.value=group,dndDstIndex.value=index,e.dataTransfer.setData("application/x-sidebery-dnd","{}"),currentTarget.parentElement&&e.dataTransfer.setDragImage(currentTarget.parentElement,32,32),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"}function onDragEnter(e){let target=e.target;if(!target.getAttribute||!dndItemId.value)return;let group=target.getAttribute("data-dnd-group"),index=parseInt(target.getAttribute("data-dnd-index")??"");if(!group){dndDstGroup.value=null,dndDstIndex.value=null;return}dndDstGroup.value=group,isNaN(index)?dndDstIndex.value=null:dndDstIndex.value=index}async function onDrop(e){let target=e.target,dstIndexRaw=target.getAttribute?.("data-dnd-index");if(!dndItemId.value)return;let srcIndex=dndSrcIndex.value,isEnabled=srcIndex!==null&&SidebarConfigRState.nav[srcIndex],isAdding=dstIndexRaw&&!isEnabled,isRemoving=!dstIndexRaw&&isEnabled,isMoving=dstIndexRaw&&isEnabled,newElementId;if(isAdding&&(newElementId=await createNavElement(dndItemId.value),!newElementId))return resetDnd();let dstIndex=parseInt(target.getAttribute("data-dnd-index")??"");if(isNaN(dstIndex)&&(dstIndex=0),isEnabled){let panelConf=SidebarConfigRState.panels[dndItemId.value];if(panelConf&&isRemoving){let msg=getRmConfirmMsg(panelConf);if(msg&&!window.confirm(msg))return resetDnd()}SidebarConfigRState.nav.splice(srcIndex,1),srcIndex<dstIndex&&dstIndex--}(isAdding||isMoving)&&(newElementId?SidebarConfigRState.nav.splice(dstIndex,0,newElementId):SidebarConfigRState.nav.splice(dstIndex,0,dndItemId.value)),resetDnd(),saveSidebarConfig(500)}function onDragEnd(){dndItemId.value&&resetDnd()}function resetDnd(){dndItemId.value=null,dndSrcGroup.value=null,dndSrcIndex.value=null}function openConfig(item){let panelConf=SidebarConfigRState.panels[item.id];panelConf&&(SetupPage.reactive.selectedPanelConfig=panelConf)}return(_ctx,_cache)=>(_openBlock6(),_createElementBlock6("section",{ref_key:"el",ref:el,"data-dnd":!!dndItemId.value,onDragenter:_withModifiers(onDragEnter,["prevent","stop"]),onDragover:_cache[22]||(_cache[22]=_withModifiers(()=>{},["prevent","stop"])),onDrop:_withModifiers(onDrop,["stop"]),onDragend:onDragEnd},[_createElementVNode6("h2",null,_toDisplayString6(_unref6(translate)("settings.nav_title")),1),_hoisted_27,_createVNode5(select_field_default,{label:"settings.nav_bar_layout",optLabel:"settings.nav_bar_layout_",value:_unref6(Settings).state.navBarLayout,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref6(Settings).state.navBarLayout=$event),_cache[1]||(_cache[1]=$event=>_unref6(Settings).saveDebounced(150))],opts:_unref6(Settings).getOpts("navBarLayout")},null,8,["value","opts"]),_createElementVNode6("div",_hoisted_35,[_createVNode5(toggle_field_default,{label:"settings.nav_bar_inline",value:_unref6(Settings).state.navBarInline,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref6(Settings).state.navBarInline=$event),_cache[3]||(_cache[3]=$event=>_unref6(Settings).saveDebounced(150))],inactive:_unref6(Settings).state.navBarLayout!=="horizontal"},null,8,["value","inactive"]),_createVNode5(select_field_default,{label:"settings.nav_bar_side",optLabel:"settings.nav_bar_side_",value:_unref6(Settings).state.navBarSide,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref6(Settings).state.navBarSide=$event),_cache[5]||(_cache[5]=$event=>_unref6(Settings).saveDebounced(150))],opts:_unref6(Settings).getOpts("navBarSide"),inactive:_unref6(Settings).state.navBarLayout!=="vertical"},null,8,["value","opts","inactive"])]),_createVNode5(toggle_field_default,{label:"settings.nav_btn_count",value:_unref6(Settings).state.navBtnCount,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref6(Settings).state.navBtnCount=$event),_cache[7]||(_cache[7]=$event=>_unref6(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode5(toggle_field_default,{label:"settings.hide_empty_panels",value:_unref6(Settings).state.hideEmptyPanels,"onUpdate:value":[_cache[8]||(_cache[8]=$event=>_unref6(Settings).state.hideEmptyPanels=$event),_cache[9]||(_cache[9]=$event=>_unref6(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode5(toggle_field_default,{label:"settings.hide_discarded_tab_panels",value:_unref6(Settings).state.hideDiscardedTabPanels,"onUpdate:value":[_cache[10]||(_cache[10]=$event=>_unref6(Settings).state.hideDiscardedTabPanels=$event),_cache[11]||(_cache[11]=$event=>_unref6(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode5(num_field_default,{class:"-inline",label:"settings.nav_switch_panels_delay",value:_unref6(Settings).state.navSwitchPanelsDelay,"onUpdate:value":[_cache[12]||(_cache[12]=$event=>_unref6(Settings).state.navSwitchPanelsDelay=$event),_cache[13]||(_cache[13]=$event=>_unref6(Settings).saveDebounced(500))],or:128},null,8,["value"]),_createVNode5(info_field_default,{label:"settings.bottom_bar"}),_createElementVNode6("div",_hoisted_45,[_createVNode5(toggle_field_default,{label:"settings.sub_panel.recently_closed_tabs",value:_unref6(Settings).state.subPanelRecentlyClosedBar,"onUpdate:value":[_cache[14]||(_cache[14]=$event=>_unref6(Settings).state.subPanelRecentlyClosedBar=$event),_cache[15]||(_cache[15]=$event=>_unref6(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode5(toggle_field_default,{label:"settings.sub_panel.bookmarks",value:_unref6(Settings).state.subPanelBookmarks,"onUpdate:value":[_cache[16]||(_cache[16]=$event=>_unref6(Settings).state.subPanelBookmarks=$event),_cache[17]||(_cache[17]=$event=>_unref6(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode5(toggle_field_default,{label:"settings.sub_panel.history",value:_unref6(Settings).state.subPanelHistory,"onUpdate:value":[_cache[18]||(_cache[18]=$event=>_unref6(Settings).state.subPanelHistory=$event),_cache[19]||(_cache[19]=$event=>_unref6(Settings).saveDebounced(150))]},null,8,["value"])]),_createVNode5(info_field_default,{class:"-sub-title",label:"settings.nav_bar_enabled",inactive:!availableBtns.value.length},null,8,["inactive"]),_createElementVNode6("div",_hoisted_53,[enabledBtns.value.length?_createCommentVNode4("v-if",!0):(_openBlock6(),_createElementBlock6("div",{key:0,class:"card -placeholder","data-inactive":"true","data-first":"true","data-dnd-target":dndItemId.value&&dndDstGroup.value==="enabled"&&dndDstIndex.value===-1},[_createElementVNode6("div",_hoisted_72,[_hoisted_82,_createElementVNode6("div",_hoisted_92,_toDisplayString6(_unref6(translate)("settings.nav_bar.no_elements")),1)])],8,_hoisted_62)),_createVNode5(_TransitionGroup,{name:"card",tag:"div"},{default:_withCtx(()=>[(_openBlock6(!0),_createElementBlock6(_Fragment,null,_renderList(enabledBtns.value,(btn,i)=>(_openBlock6(),_createElementBlock6("div",{class:"card -enabled",key:btn.id,"data-id":btn.id,"data-inactive":btn.inactive,"data-first":i===0,"data-last":i===enabledBtns.value.length-1,"data-dnd-target":dndItemId.value&&dndDstGroup.value==="enabled"&&dndDstIndex.value===i,"data-dnd":dndItemId.value&&dndSrcGroup.value==="enabled"&&dndSrcIndex.value===i},[i===enabledBtns.value.length-1?(_openBlock6(),_createElementBlock6("div",{key:0,class:"card-dnd-layer -last","data-dnd-group":"enabled","data-dnd-index":i+1,"data-dnd-target":dndItemId.value&&dndDstGroup.value==="enabled"&&dndDstIndex.value===enabledBtns.value.length},null,8,_hoisted_112)):_createCommentVNode4("v-if",!0),_createElementVNode6("div",{class:"card-body",onClick:$event=>openConfig(btn)},[_createElementVNode6("div",{class:"card-dnd-layer",draggable:"true","data-dnd-group":"enabled","data-dnd-index":i,onDragstart:_withModifiers($event=>onDragStart($event,"enabled",i,btn.id),["stop"])},null,40,_hoisted_133),_createElementVNode6("div",{class:"card-icon","data-color":btn.color},[isBookmarksBadgeNeeded(btn)?(_openBlock6(),_createElementBlock6("svg",_hoisted_153,_hoisted_172)):_createCommentVNode4("v-if",!0),btn.iconIMG?(_openBlock6(),_createElementBlock6("img",{key:2,src:btn.iconIMG},null,8,_hoisted_202)):(_openBlock6(),_createElementBlock6("svg",_hoisted_182,[_createElementVNode6("use",{"xlink:href":"#"+btn.iconSVG},null,8,_hoisted_192)]))],8,_hoisted_143),_createElementVNode6("div",_hoisted_212,_toDisplayString6(btn.name),1),btn.inactive?(_openBlock6(),_createElementBlock6("div",_hoisted_223,_toDisplayString6(_unref6(translate)("settings.nav_bar.inact_note")),1)):_createCommentVNode4("v-if",!0)],8,_hoisted_123),_createElementVNode6("div",_hoisted_233,[btn.badgeMoveRules?(_openBlock6(),_createElementBlock6("div",{key:0,class:"card-badge",title:_unref6(translate)("panel.tab_move_rules_manage_badge"),onClick:$event=>openTabMoveRulesPopup(_unref6(SidebarConfigRState).panels[btn.id])},[_hoisted_253,_createElementVNode6("div",_hoisted_262,_toDisplayString6(btn.badgeMoveRules),1)],8,_hoisted_243)):_createCommentVNode4("v-if",!0),btn.badgeShortcuts?(_openBlock6(),_createElementBlock6("div",{key:1,class:"card-badge",title:_unref6(translate)("panel.new_tab_shortcuts_manage_btn"),onClick:$event=>openNewTabShortcutsPopup(_unref6(SidebarConfigRState).panels[btn.id])},[_hoisted_28,_createElementVNode6("div",_hoisted_29,_toDisplayString6(btn.badgeShortcuts),1)],8,_hoisted_272)):_createCommentVNode4("v-if",!0)]),_createElementVNode6("div",_hoisted_30,[_createElementVNode6("div",{class:"card-ctrl -down",onClick:$event=>moveBtn(i,1)},_hoisted_332,8,_hoisted_31),_createElementVNode6("div",{class:"card-ctrl -up","data-inactive":i===0,onClick:$event=>moveBtn(i,-1)},_hoisted_36,8,_hoisted_342),_createElementVNode6("div",{class:"card-ctrl -rm",onClick:$event=>disableBtn(i)},_hoisted_39,8,_hoisted_37)])],8,_hoisted_102))),128))]),_:1})]),_createVNode5(info_field_default,{class:"-sub-title",label:"settings.nav_bar.available_elements",inactive:!availableBtns.value.length},null,8,["inactive"]),availableBtns.value.length?(_openBlock6(),_createElementBlock6("div",_hoisted_40,[(_openBlock6(!0),_createElementBlock6(_Fragment,null,_renderList(availableBtns.value,(btn,i)=>(_openBlock6(),_createElementBlock6("div",{class:"card -disabled",key:btn.id,"data-first":i===0,"data-last":i===availableBtns.value.length-1,onClick:$event=>enableElement(btn.id)},[_createElementVNode6("div",_hoisted_422,[_createElementVNode6("div",{class:"card-dnd-layer",draggable:"true",onDragstart:_withModifiers($event=>onDragStart($event,null,null,btn.id),["stop"])},null,40,_hoisted_432),_createElementVNode6("div",_hoisted_442,[btn.iconIMG?(_openBlock6(),_createElementBlock6("img",{key:1,src:btn.iconIMG},null,8,_hoisted_47)):(_openBlock6(),_createElementBlock6("svg",_hoisted_452,[_createElementVNode6("use",{"xlink:href":"#"+btn.iconSVG},null,8,_hoisted_46)]))]),_createElementVNode6("div",_hoisted_48,_toDisplayString6(btn.name),1)])],8,_hoisted_41))),128))])):_createCommentVNode4("v-if",!0),_createVNode5(_Transition,{name:"popup"},{default:_withCtx(()=>[_unref6(SetupPage).reactive.selectedPanelConfig?(_openBlock6(),_createElementBlock6("div",{key:0,class:"popup-layer",onClick:_cache[21]||(_cache[21]=$event=>_unref6(SetupPage).reactive.selectedPanelConfig=null)},[_createElementVNode6("div",{class:"popup-box",onClick:_cache[20]||(_cache[20]=_withModifiers(()=>{},["stop"]))},[_createVNode5(popup_panel_config_default,{conf:_unref6(SetupPage).reactive.selectedPanelConfig},null,8,["conf"])])])):_createCommentVNode4("v-if",!0)]),_:1})],40,_hoisted_110))}});import{defineComponent as _defineComponent7}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref7,toDisplayString as _toDisplayString7,createElementVNode as _createElementVNode7,createVNode as _createVNode6,openBlock as _openBlock7,createElementBlock as _createElementBlock7}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref5,onMounted as onMounted5}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_111=_createElementVNode7("span",{class:"header-shadow"},null,-1),settings_group_default=_defineComponent7({__name:"settings.group",setup(__props){let el=ref5(null);return onMounted5(()=>SetupPage.registerEl("settings_group",el.value)),(_ctx,_cache)=>(_openBlock7(),_createElementBlock7("section",{ref_key:"el",ref:el},[_createElementVNode7("h2",null,_toDisplayString7(_unref7(translate)("settings.group_title")),1),_hoisted_111,_createVNode6(select_field_default,{label:"settings.group_layout",optLabel:"settings.group_layout_",value:_unref7(Settings).state.groupLayout,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref7(Settings).state.groupLayout=$event),_cache[1]||(_cache[1]=$event=>_unref7(Settings).saveDebounced(150))],opts:_unref7(Settings).getOpts("groupLayout")},null,8,["value","opts"])],512))}});import{defineComponent as _defineComponent9}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref9,toDisplayString as _toDisplayString9,createElementVNode as _createElementVNode9,createVNode as _createVNode8,renderList as _renderList2,Fragment as _Fragment2,openBlock as _openBlock9,createElementBlock as _createElementBlock9,createCommentVNode as _createCommentVNode6,withModifiers as _withModifiers2,Transition as _Transition2,withCtx as _withCtx2}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref7,onMounted as onMounted7}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent8}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref8,createVNode as _createVNode7,toDisplayString as _toDisplayString8,createElementVNode as _createElementVNode8,openBlock as _openBlock8,createBlock as _createBlock3,createCommentVNode as _createCommentVNode5,createElementBlock as _createElementBlock8}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref6,computed as computed4,onMounted as onMounted6,nextTick as nextTick2}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_113={class:"InfoField"},_hoisted_210={class:"label"},_hoisted_310={key:0,class:"sub-fields"},_hoisted_49={key:1,class:"sub-fields -nosep"},_hoisted_54={class:"field"},popup_container_config_default=_defineComponent8({__name:"popup.container-config",props:{conf:{type:Object,default:()=>({})}},setup(__props){let PROXY_HOST_RE=/^.{3,65536}$/,PROXY_PORT_RE=/^\d{2,5}$/,props=__props,rootEl=ref6(null),nameInput=ref6(null),includeHostsInput=ref6(null),excludeHostsInput=ref6(null),proxyHostInput=ref6(null),proxyPortInput=ref6(null),proxyUsernameInput=ref6(null),proxyPasswordInput=ref6(null),userAgentInput=ref6(null),name=computed4(()=>props.conf.name||""),icon=computed4(()=>props.conf.icon?props.conf.icon:"#fingerprint"),color=computed4(()=>props.conf.color||"blue"),proxied=computed4(()=>props.conf.proxy?.type??"direct"),isSomeSocks=computed4(()=>proxied.value==="socks"||proxied.value==="socks4"),proxyHost=computed4(()=>!props.conf.id||!props.conf.proxy?.host?"":props.conf.proxy.host),proxyPort=computed4(()=>!props.conf.id||!props.conf.proxy?.port?"":props.conf.proxy.port),proxyHostValid=computed4(()=>proxyHost.value?PROXY_HOST_RE.test(proxyHost.value)?"valid":"invalid":""),proxyPortValid=computed4(()=>proxyPort.value?PROXY_PORT_RE.test(proxyPort.value)?"valid":"invalid":""),proxyUsername=computed4(()=>!props.conf.id||!props.conf.proxy?"":props.conf.proxy.username??""),proxyPassword=computed4(()=>!props.conf.id||!props.conf.proxy?"":props.conf.proxy.password??""),proxyDNS=computed4(()=>!props.conf.id||!props.conf.proxy?!1:props.conf.proxy.proxyDNS??!1);onMounted6(()=>init());function onWheel(e){if(!rootEl.value)return;let scrollOffset=rootEl.value.scrollTop,maxScrollOffset=rootEl.value.scrollHeight-rootEl.value.offsetHeight;scrollOffset===0&&e.deltaY<0&&e.preventDefault(),scrollOffset===maxScrollOffset&&e.deltaY>0&&e.preventDefault()}let updateNameTimeout;function onNameInput(value){props.conf.name=value,updateNameTimeout=wait(updateNameTimeout,321,()=>updateName())}function updateContainer(){!props.conf.name||!props.conf.id||browser.contextualIdentities.update(props.conf.id,{name:props.conf.name,icon:props.conf.icon,color:props.conf.color})}function updateName(){name.value&&updateContainer()}function updateIcon(icon2){props.conf.icon=icon2,updateContainer()}function updateColor(color2){props.conf.color=color2,updateContainer()}async function init(){await nextTick2(),nameInput.value&&nameInput.value.recalcTextHeight(),includeHostsInput.value&&includeHostsInput.value.recalcTextHeight(),excludeHostsInput.value&&excludeHostsInput.value.recalcTextHeight(),userAgentInput.value&&userAgentInput.value.recalcTextHeight()}async function checkWebDataPerm(){return Permissions.reactive.webData?!0:(props.conf.proxified&&(props.conf.proxified=!1,props.conf.proxy&&(props.conf.proxy.type="direct")),props.conf.includeHostsActive=!1,props.conf.excludeHostsActive=!1,props.conf.userAgentActive=!1,Containers.saveContainers(),Permissions.request("<all_urls>"))}async function switchProxy(type){type!=="direct"&&!await checkWebDataPerm()||(props.conf.proxy={type,host:proxyHost.value,port:proxyPort.value,username:proxyUsername.value,password:proxyPassword.value,proxyDNS:proxyDNS.value},type==="direct"?props.conf.proxified=!1:props.conf.proxified=proxyHostValid.value==="valid"&&proxyPortValid.value==="valid",Containers.saveContainers())}function onProxyHostInput(value){!props.conf.id||!props.conf.proxy||(props.conf.proxy.host=value,props.conf.proxified=proxyHostValid.value==="valid"&&proxyPortValid.value==="valid",Containers.saveContainers(500))}function onProxyPortInput(value){!props.conf.id||!props.conf.proxy||(props.conf.proxy.port=value,props.conf.proxified=proxyHostValid.value==="valid"&&proxyPortValid.value==="valid",Containers.saveContainers(500))}function onProxyUsernameInput(value){!props.conf.id||!props.conf.proxy||(props.conf.proxy.username=value,Containers.saveContainers(500))}function onProxyPasswordInput(value){!props.conf.id||!props.conf.proxy||(props.conf.proxy.password=value,Containers.saveContainers(500))}function toggleProxyDns(){!props.conf.id||!props.conf.proxy||(props.conf.proxy.proxyDNS=!props.conf.proxy.proxyDNS,Containers.saveContainers())}function onFieldKeydown(e,nextInput,prevInput){(e.code==="Enter"||e.code==="Tab")&&(e.shiftKey?prevInput?.focus():nextInput?.focus(),e.preventDefault())}async function toggleUserAgent(){!props.conf.userAgentActive&&!await checkWebDataPerm()||(props.conf.userAgentActive=!props.conf.userAgentActive,Containers.saveContainers(),await nextTick2(),userAgentInput.value?.focus())}function onUserAgentInput(value){props.conf.userAgent=value,Containers.saveContainers(500)}function openRulesPopup(){openTabReopenRulesPopup(props.conf.id)}function getManageRulesBtnLabel(container){let label=translate("container.manage_reopen_rules_label");return container.reopenRules.length?label+` (${container.reopenRules.length})`:label}return(_ctx,_cache)=>(_openBlock8(),_createElementBlock8("div",{class:"ConfigPopup",ref_key:"rootEl",ref:rootEl,onWheel},[_createVNode7(text_input_default,{class:"title",ref_key:"nameInput",ref:nameInput,value:props.conf.name,line:!0,or:_unref8(translate)("container.name_placeholder"),"onUpdate:value":onNameInput},null,8,["value","or"]),_createVNode7(select_field_default,{class:"-no-separator",label:"container.icon_label",value:icon.value,opts:_unref8(CONTAINER_ICON_OPTS),color:color.value,"onUpdate:value":updateIcon},null,8,["value","opts","color"]),_createVNode7(select_field_default,{label:"container.color_label",value:color.value,opts:_unref8(COLOR_OPTS),icon:"#"+icon.value,"onUpdate:value":updateColor},null,8,["value","opts","icon"]),_createElementVNode8("div",_hoisted_113,[_createElementVNode8("div",_hoisted_210,_toDisplayString8(_unref8(translate)("container.reopen_rules_label")),1),_createElementVNode8("div",{class:"btn",onClick:openRulesPopup},_toDisplayString8(getManageRulesBtnLabel(__props.conf)),1)]),_createVNode7(select_field_default,{label:"container.proxy_label",optLabel:"container.proxy_",noneOpt:"direct",value:proxied.value,opts:_unref8(PROXY_OPTS),"onUpdate:value":switchProxy},null,8,["value","opts"]),proxied.value!=="direct"?(_openBlock8(),_createElementBlock8("div",_hoisted_310,[_createVNode7(text_field_default,{ref_key:"proxyHostInput",ref:proxyHostInput,label:"Host",or:_unref8(translate)("container.proxy_host_placeholder"),line:!0,value:proxyHost.value,valid:proxyHostValid.value,"onUpdate:value":onProxyHostInput,onKeydown:_cache[0]||(_cache[0]=$event=>onFieldKeydown($event,proxyPortInput.value,nameInput.value))},null,8,["or","value","valid"]),_createVNode7(text_field_default,{ref_key:"proxyPortInput",ref:proxyPortInput,label:"Port",or:_unref8(translate)("container.proxy_port_placeholder"),line:!0,value:proxyPort.value,valid:proxyPortValid.value,"onUpdate:value":onProxyPortInput,onKeydown:_cache[1]||(_cache[1]=$event=>onFieldKeydown($event,proxyUsernameInput.value,proxyHostInput.value))},null,8,["or","value","valid"]),_createVNode7(text_field_default,{ref_key:"proxyUsernameInput",ref:proxyUsernameInput,label:"Username",or:_unref8(translate)("container.proxy_username_placeholder"),line:!0,value:proxyUsername.value,"onUpdate:value":onProxyUsernameInput,onKeydown:_cache[2]||(_cache[2]=$event=>onFieldKeydown($event,proxyPasswordInput.value,proxyPortInput.value))},null,8,["or","value"]),_createVNode7(text_field_default,{ref_key:"proxyPasswordInput",ref:proxyPasswordInput,label:"Password",or:_unref8(translate)("container.proxy_password_placeholder"),line:!0,value:proxyPassword.value,password:!0,"onUpdate:value":onProxyPasswordInput,onKeydown:_cache[3]||(_cache[3]=$event=>onFieldKeydown($event,null,proxyUsernameInput.value))},null,8,["or","value"]),isSomeSocks.value?(_openBlock8(),_createBlock3(toggle_field_default,{key:0,label:"container.proxy_dns_label",value:proxyDNS.value,"onUpdate:value":toggleProxyDns},null,8,["value"])):_createCommentVNode5("v-if",!0)])):_createCommentVNode5("v-if",!0),_createVNode7(toggle_field_default,{label:"container.user_agent",value:props.conf.userAgentActive,"onUpdate:value":toggleUserAgent},null,8,["value"]),props.conf.userAgentActive?(_openBlock8(),_createElementBlock8("div",_hoisted_49,[_createElementVNode8("div",_hoisted_54,[_createVNode7(text_input_default,{class:"text",ref_key:"userAgentInput",ref:userAgentInput,or:"---",value:props.conf.userAgent,"onUpdate:value":onUserAgentInput},null,8,["value"])])])):_createCommentVNode5("v-if",!0)],544))}});var _hoisted_114=_createElementVNode9("span",{class:"header-shadow"},null,-1),_hoisted_211={class:"sub-fields"},_hoisted_311=["data-color"],_hoisted_410=["onClick"],_hoisted_55={class:"card-icon"},_hoisted_63=["xlink:href"],_hoisted_73={class:"card-name"},_hoisted_83={class:"card-badges"},_hoisted_93=["title","data-inactive","onClick"],_hoisted_103=_createElementVNode9("svg",null,[_createElementVNode9("use",{"xlink:href":"#icon_reload"})],-1),_hoisted_115={class:"len"},_hoisted_124={class:"card-ctrls"},_hoisted_134=["onClick"],_hoisted_144=_createElementVNode9("svg",null,[_createElementVNode9("use",{"xlink:href":"#icon_remove"})],-1),_hoisted_154=[_hoisted_144],_hoisted_163={key:0,class:"card-placeholder"},_hoisted_173={class:"ctrls"},settings_containers_default=_defineComponent9({__name:"settings.containers",setup(__props){let el=ref7(null);onMounted7(()=>SetupPage.registerEl("settings_containers",el.value));async function createContainer(){let containersCount=Object.keys(Containers.reactive.byId).length,newFFContainer=await browser.contextualIdentities.create({name:`New Container ${containersCount+1}`,color:"blue",icon:"fingerprint"}),container=cloneObject(DEFAULT_CONTAINER);container.cookieStoreId=newFFContainer.cookieStoreId,container.id=newFFContainer.cookieStoreId,container.name=newFFContainer.name,container.icon=newFFContainer.icon,container.color=newFFContainer.color,Containers.reactive.byId[newFFContainer.cookieStoreId]=container,SetupPage.reactive.selectedContainer=container}async function removeContainer(container){let preMsg=translate("settings.contianer_remove_confirm_prefix"),postMsg=translate("settings.contianer_remove_confirm_postfix");if(window.confirm(preMsg+container.name+postMsg)){let navSaveNeeded=!1;try{await browser.contextualIdentities.remove(container.id)}catch(err2){return err("Cannot remove container",err2)}delete Containers.reactive.byId[container.id];for(let panelConf of Object.values(SidebarConfigRState.panels))isTabsPanel(panelConf)&&(panelConf.newTabCtx===container.id&&(panelConf.newTabCtx="none",navSaveNeeded=!0),panelConf.moveRules.length&&(panelConf.moveRules=panelConf.moveRules.filter(rule=>!(rule.containerId&&rule.containerId===container.id&&(navSaveNeeded=!0,delete rule.containerId,!rule.url)))));navSaveNeeded&&saveSidebarConfig()}}return(_ctx,_cache)=>(_openBlock9(),_createElementBlock9("section",{ref_key:"el",ref:el},[_createElementVNode9("h2",null,_toDisplayString9(_unref9(translate)("settings.containers_title")),1),_hoisted_114,_createVNode8(toggle_field_default,{label:"settings.containers_sort_by_name",value:_unref9(Settings).state.containersSortByName,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref9(Settings).state.containersSortByName=$event),_cache[1]||(_cache[1]=$event=>_unref9(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode9("div",_hoisted_211,[(_openBlock9(!0),_createElementBlock9(_Fragment2,null,_renderList2(_unref9(Containers).sortContainers(Object.values(_unref9(Containers).reactive.byId)),(container,id)=>(_openBlock9(),_createElementBlock9("div",{class:"card",key:container.id,"data-color":container.color},[_createElementVNode9("div",{class:"card-body",onClick:$event=>_unref9(SetupPage).reactive.selectedContainer=container},[_createElementVNode9("div",_hoisted_55,[(_openBlock9(),_createElementBlock9("svg",null,[_createElementVNode9("use",{"xlink:href":"#"+container.icon},null,8,_hoisted_63)]))]),_createElementVNode9("div",_hoisted_73,_toDisplayString9(container.name),1)],8,_hoisted_410),_createElementVNode9("div",_hoisted_83,[container.reopenRules?.length?(_openBlock9(),_createElementBlock9("div",{key:0,class:"card-badge",title:_unref9(translate)("container.manage_reopen_rules_label"),"data-inactive":!container.reopenRulesActive,onClick:$event=>openTabReopenRulesPopup(container.id)},[_hoisted_103,_createElementVNode9("div",_hoisted_115,_toDisplayString9(container.reopenRules.length),1)],8,_hoisted_93)):_createCommentVNode6("v-if",!0)]),_createElementVNode9("div",_hoisted_124,[_createElementVNode9("div",{class:"card-ctrl -rm",onClick:$event=>removeContainer(container)},_hoisted_154,8,_hoisted_134)])],8,_hoisted_311))),128)),Object.keys(_unref9(Containers).reactive.byId).length?_createCommentVNode6("v-if",!0):(_openBlock9(),_createElementBlock9("div",_hoisted_163))]),_createElementVNode9("div",_hoisted_173,[_createElementVNode9("div",{class:"btn",onClick:createContainer},_toDisplayString9(_unref9(translate)("settings.containers_create_btn")),1)]),_createVNode8(_Transition2,{name:"popup"},{default:_withCtx2(()=>[_unref9(SetupPage).reactive.selectedContainer?(_openBlock9(),_createElementBlock9("div",{key:0,class:"popup-layer",onClick:_cache[3]||(_cache[3]=$event=>_unref9(SetupPage).reactive.selectedContainer=null)},[_createElementVNode9("div",{class:"popup-box",onClick:_cache[2]||(_cache[2]=_withModifiers2(()=>{},["stop"]))},[_createVNode8(popup_container_config_default,{conf:_unref9(SetupPage).reactive.selectedContainer},null,8,["conf"])])])):_createCommentVNode6("v-if",!0)]),_:1})],512))}});import{defineComponent as _defineComponent10}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref10,toDisplayString as _toDisplayString10,createElementVNode as _createElementVNode10,createVNode as _createVNode9,openBlock as _openBlock10,createElementBlock as _createElementBlock10}from"/vendor/vue.runtime.esm-browser.prod.js";import{onMounted as onMounted8,ref as ref8}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_116=_createElementVNode10("span",{class:"header-shadow"},null,-1),_hoisted_213={class:"sub-fields -nosep"},_hoisted_312={class:"sub-fields -nosep"},settings_dnd_default=_defineComponent10({__name:"settings.dnd",setup(__props){let el=ref8(null);return onMounted8(()=>SetupPage.registerEl("settings_dnd",el.value)),(_ctx,_cache)=>(_openBlock10(),_createElementBlock10("section",{ref_key:"el",ref:el},[_createElementVNode10("h2",null,_toDisplayString10(_unref10(translate)("settings.dnd_title")),1),_hoisted_116,_createVNode9(toggle_field_default,{label:"settings.dnd_tab_act",value:_unref10(Settings).state.dndTabAct,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref10(Settings).state.dndTabAct=$event),_cache[1]||(_cache[1]=$event=>_unref10(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode10("div",_hoisted_213,[_createVNode9(num_field_default,{class:"-inline",label:"settings.dnd_tab_act_delay",value:_unref10(Settings).state.dndTabActDelay,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref10(Settings).state.dndTabActDelay=$event),_cache[3]||(_cache[3]=$event=>_unref10(Settings).saveDebounced(500))],inactive:!_unref10(Settings).state.dndTabAct,or:0},null,8,["value","inactive"]),_createVNode9(select_field_default,{label:"settings.dnd_mod",optLabel:"settings.dnd_mod_",value:_unref10(Settings).state.dndTabActMod,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref10(Settings).state.dndTabActMod=$event),_cache[5]||(_cache[5]=$event=>_unref10(Settings).saveDebounced(150))],inactive:!_unref10(Settings).state.dndTabAct,opts:_unref10(Settings).getOpts("dndTabActMod")},null,8,["value","inactive","opts"])]),_createVNode9(select_field_default,{label:"settings.dnd_exp",optLabel:"settings.dnd_exp_",value:_unref10(Settings).state.dndExp,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref10(Settings).state.dndExp=$event),_cache[7]||(_cache[7]=$event=>_unref10(Settings).saveDebounced(150))],opts:_unref10(Settings).getOpts("dndExp"),folded:!0},null,8,["value","opts"]),_createElementVNode10("div",_hoisted_312,[_createVNode9(num_field_default,{class:"-inline",label:"settings.dnd_exp_delay",inactive:_unref10(Settings).state.dndExp==="none",value:_unref10(Settings).state.dndExpDelay,"onUpdate:value":[_cache[8]||(_cache[8]=$event=>_unref10(Settings).state.dndExpDelay=$event),_cache[9]||(_cache[9]=$event=>_unref10(Settings).saveDebounced(500))],or:0},null,8,["inactive","value"]),_createVNode9(select_field_default,{label:"settings.dnd_mod",optLabel:"settings.dnd_mod_",value:_unref10(Settings).state.dndExpMod,"onUpdate:value":[_cache[10]||(_cache[10]=$event=>_unref10(Settings).state.dndExpMod=$event),_cache[11]||(_cache[11]=$event=>_unref10(Settings).saveDebounced(150))],inactive:_unref10(Settings).state.dndExp==="none",opts:_unref10(Settings).getOpts("dndExpMod")},null,8,["value","inactive","opts"])]),_createVNode9(select_field_default,{label:"settings.dnd_outside",optLabel:"settings.dnd_outside_",value:_unref10(Settings).state.dndOutside,"onUpdate:value":[_cache[12]||(_cache[12]=$event=>_unref10(Settings).state.dndOutside=$event),_cache[13]||(_cache[13]=$event=>_unref10(Settings).saveDebounced(150))],opts:_unref10(Settings).getOpts("dndOutside"),note:_unref10(translate)("settings.settings.dnd_outside_note")},null,8,["value","opts","note"]),_createVNode9(toggle_field_default,{label:"settings.dnd_act_tab_from_link",value:_unref10(Settings).state.dndActTabFromLink,"onUpdate:value":[_cache[14]||(_cache[14]=$event=>_unref10(Settings).state.dndActTabFromLink=$event),_cache[15]||(_cache[15]=$event=>_unref10(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode9(toggle_field_default,{label:"settings.dnd_act_search_tab",value:_unref10(Settings).state.dndActSearchTab,"onUpdate:value":[_cache[16]||(_cache[16]=$event=>_unref10(Settings).state.dndActSearchTab=$event),_cache[17]||(_cache[17]=$event=>_unref10(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode9(toggle_field_default,{label:"settings.dnd_move_tabs",note:_unref10(translate)("settings.dnd_move_tabs_note"),value:_unref10(Settings).state.dndMoveTabs,"onUpdate:value":[_cache[18]||(_cache[18]=$event=>_unref10(Settings).state.dndMoveTabs=$event),_cache[19]||(_cache[19]=$event=>_unref10(Settings).saveDebounced(150))]},null,8,["note","value"]),_createVNode9(toggle_field_default,{label:"settings.dnd_move_bookmarks",note:_unref10(translate)("settings.dnd_move_bookmarks_note"),value:_unref10(Settings).state.dndMoveBookmarks,"onUpdate:value":[_cache[20]||(_cache[20]=$event=>_unref10(Settings).state.dndMoveBookmarks=$event),_cache[21]||(_cache[21]=$event=>_unref10(Settings).saveDebounced(150))]},null,8,["note","value"])],512))}});import{defineComponent as _defineComponent11}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref11,toDisplayString as _toDisplayString11,createElementVNode as _createElementVNode11,createVNode as _createVNode10,openBlock as _openBlock11,createElementBlock as _createElementBlock11}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref9,onMounted as onMounted9}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_117=_createElementVNode11("span",{class:"header-shadow"},null,-1),_hoisted_214={class:"sub-fields"},settings_search_default=_defineComponent11({__name:"settings.search",setup(__props){let el=ref9(null);return onMounted9(()=>SetupPage.registerEl("settings_search",el.value)),(_ctx,_cache)=>(_openBlock11(),_createElementBlock11("section",{ref_key:"el",ref:el},[_createElementVNode11("h2",null,_toDisplayString11(_unref11(translate)("settings.search_title")),1),_hoisted_117,_createVNode10(select_field_default,{label:"settings.search_bar_mode",optLabel:"settings.search_bar_mode_",value:_unref11(Settings).state.searchBarMode,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref11(Settings).state.searchBarMode=$event),_cache[1]||(_cache[1]=$event=>_unref11(Settings).saveDebounced(150))],opts:_unref11(Settings).getOpts("searchBarMode")},null,8,["value","opts"]),_createVNode10(select_field_default,{label:"settings.search_panel_switch",optLabel:"settings.search_panel_switch_",value:_unref11(Settings).state.searchPanelSwitch,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref11(Settings).state.searchPanelSwitch=$event),_cache[3]||(_cache[3]=$event=>_unref11(Settings).saveDebounced(150))],opts:_unref11(Settings).getOpts("searchPanelSwitch"),folded:!0},null,8,["value","opts"]),_createVNode10(info_field_default,{label:"settings.search.shortcuts",value:_unref11(translate)("settings.search.shortcuts.note")},null,8,["value"]),_createElementVNode11("div",_hoisted_214,[_createVNode10(text_field_default,{label:"settings.search.bookmarks_shortcut",value:_unref11(Settings).state.searchBookmarksShortcut,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref11(Settings).state.searchBookmarksShortcut=$event),_cache[5]||(_cache[5]=$event=>_unref11(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode10(text_field_default,{label:"settings.search.history_shortcut",value:_unref11(Settings).state.searchHistoryShortcut,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref11(Settings).state.searchHistoryShortcut=$event),_cache[7]||(_cache[7]=$event=>_unref11(Settings).saveDebounced(150))]},null,8,["value"])])],512))}});import{defineComponent as _defineComponent13}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref13,toDisplayString as _toDisplayString13,createElementVNode as _createElementVNode13,createVNode as _createVNode12,openBlock as _openBlock13,createElementBlock as _createElementBlock13}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref10,computed as computed5,onMounted as onMounted10}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent12}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref12,toDisplayString as _toDisplayString12,createElementVNode as _createElementVNode12,createVNode as _createVNode11,withModifiers as _withModifiers3,openBlock as _openBlock12,createElementBlock as _createElementBlock12}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_118=["data-active","data-inactive"],_hoisted_215={class:"body"},_hoisted_313={class:"label"},count_field_default=_defineComponent12({__name:"count-field",props:{label:{},value:{},or:{},inactive:{type:Boolean},off:{},min:{default:0}},emits:["update:value","change"],setup(__props,{emit:__emit}){let emit=__emit,props=__props;function onInput(val){emit("update:value",val)}function onChange(){emit("change",props.value)}function valueFilter(e){let val=parseInt(e.target.value);return isNaN(val)?0:props.min!==void 0&&val<props.min?props.min:val}function toggle(){props.inactive||(props.value===props.off&&props.off?emit("update:value",props.min??props.off+1):emit("update:value",props.off))}return(_ctx,_cache)=>(_openBlock12(),_createElementBlock12("div",{class:"CountField","data-active":props.value!==_ctx.off,"data-inactive":props.inactive,onClick:toggle},[_createElementVNode12("div",_hoisted_215,[_createElementVNode12("div",_hoisted_313,_toDisplayString12(_unref12(translate)(props.label)),1),_createElementVNode12("div",{class:"input-group",onClick:_cache[0]||(_cache[0]=_withModifiers3(()=>{},["stop"]))},[_createVNode11(text_input_default,{class:"text-input",value:props.value,line:!0,filter:valueFilter,"onUpdate:value":onInput,onChange},null,8,["value"]),_createVNode11(toggle_input_default,{class:"toggle-input",value:props.value!==props.off,"onUpdate:value":toggle},null,8,["value"])])])],8,_hoisted_118))}});var _hoisted_119=_createElementVNode13("span",{class:"header-shadow"},null,-1),_hoisted_216={class:"sub-fields"},_hoisted_314={class:"sub-fields"},_hoisted_411={class:"sub-fields"},_hoisted_56={class:"sub-fields"},_hoisted_64={class:"sub-fields"},_hoisted_74={class:"wrapper"},_hoisted_84={class:"sub-title"},_hoisted_94={class:"text"},_hoisted_104={class:"sub-fields"},_hoisted_1110={class:"sub-fields"},_hoisted_125={class:"wrapper"},_hoisted_135={class:"sub-title"},_hoisted_145={class:"text"},_hoisted_155={class:"wrapper"},_hoisted_164={class:"sub-title"},_hoisted_174={class:"text"},_hoisted_183={class:"sub-fields"},_hoisted_193={class:"sub-fields"},_hoisted_203={class:"sub-fields"},_hoisted_217={class:"wrapper"},_hoisted_224={class:"sub-title"},_hoisted_234={class:"text"},_hoisted_244={class:"sub-fields"},_hoisted_254={class:"sub-fields"},_hoisted_263={class:"wrapper"},_hoisted_273={class:"sub-title"},_hoisted_282={class:"text"},_hoisted_292={class:"sub-fields"},_hoisted_302={class:"wrapper"},_hoisted_315={class:"sub-title"},_hoisted_323={class:"text"},_hoisted_333={class:"sub-fields"},settings_tabs_default=_defineComponent13({__name:"settings.tabs",setup(__props){let el=ref10(null),relativeToActiveTab=computed5(()=>Settings.state.moveNewTab==="after"||Settings.state.moveNewTab==="before"||Settings.state.moveNewTab==="first_child"||Settings.state.moveNewTab==="last_child");function toggleActivateLastTabOnPanelSwitching(){Settings.state.activateLastTabOnPanelSwitching=!Settings.state.activateLastTabOnPanelSwitching,!Settings.state.activateLastTabOnPanelSwitching&&Settings.state.hideInact&&(Settings.state.hideInact=!1),Settings.saveDebounced(150)}async function toggleHideInact(){if(!Settings.state.hideInact&&!Permissions.reactive.tabHide&&!await Permissions.request("tabHide"))return;Settings.state.hideInact=!Settings.state.hideInact,Settings.state.hideInact&&!Settings.state.activateLastTabOnPanelSwitching&&(Settings.state.activateLastTabOnPanelSwitching=!0),Settings.state.hideInact&&!Settings.state.tabsPanelSwitchActMove&&(Settings.state.tabsPanelSwitchActMove=!0);let notAlwaysSwitch=Settings.state.switchPanelAfterSwitchingTab!=="always";Settings.state.hideInact&&notAlwaysSwitch&&(Settings.state.switchPanelAfterSwitchingTab="always"),Settings.saveDebounced(150)}function toggleTabsPanelSwitchActMove(){Settings.state.tabsPanelSwitchActMove=!Settings.state.tabsPanelSwitchActMove,!Settings.state.tabsPanelSwitchActMove&&Settings.state.hideInact&&(Settings.state.hideInact=!1),Settings.saveDebounced(150)}function toggleTabsPanelSwitchActMoveAuto(){Settings.state.tabsPanelSwitchActMoveAuto=!Settings.state.tabsPanelSwitchActMoveAuto,!Settings.state.tabsPanelSwitchActMoveAuto&&Settings.state.hideInact&&(Settings.state.hideInact=!1),Settings.saveDebounced(150)}async function toggleHideFoldedTabs(){!Settings.state.hideInact&&!Permissions.reactive.tabHide&&!await Permissions.request("tabHide")||(Settings.state.hideFoldedTabs=!Settings.state.hideFoldedTabs,Settings.saveDebounced(150))}function toggleSwitchPanelAfterSwitchingTab(){Settings.state.switchPanelAfterSwitchingTab!=="always"&&Settings.state.hideInact&&(Settings.state.hideInact=!1),Settings.saveDebounced(150)}async function togglePreviewTabs(){!Settings.state.previewTabs&&!Permissions.reactive.webData&&!await Permissions.request("<all_urls>")||(Settings.state.previewTabs=!Settings.state.previewTabs,Settings.saveDebounced(150))}return onMounted10(()=>SetupPage.registerEl("settings_tabs",el.value)),(_ctx,_cache)=>(_openBlock13(),_createElementBlock13("section",{ref_key:"el",ref:el},[_createElementVNode13("h2",null,_toDisplayString13(_unref13(translate)("settings.tabs_title")),1),_hoisted_119,_createVNode12(select_field_default,{label:"settings.warn_on_multi_tab_close",optLabel:"settings.warn_on_multi_tab_close_",value:_unref13(Settings).state.warnOnMultiTabClose,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref13(Settings).state.warnOnMultiTabClose=$event),_cache[1]||(_cache[1]=$event=>_unref13(Settings).saveDebounced(150))],opts:_unref13(Settings).getOpts("warnOnMultiTabClose")},null,8,["value","opts"]),_createVNode12(toggle_field_default,{label:"settings.tabs_rm_undo_note",value:_unref13(Settings).state.tabsRmUndoNote,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref13(Settings).state.tabsRmUndoNote=$event),_cache[3]||(_cache[3]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode12(toggle_field_default,{label:"settings.activate_last_tab_on_panel_switching",value:_unref13(Settings).state.activateLastTabOnPanelSwitching,"onUpdate:value":toggleActivateLastTabOnPanelSwitching},null,8,["value"]),_createElementVNode13("div",_hoisted_216,[_createVNode12(toggle_field_default,{label:"settings.activate_last_tab_on_panel_switching_loaded_only",value:_unref13(Settings).state.activateLastTabOnPanelSwitchingLoadedOnly,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref13(Settings).state.activateLastTabOnPanelSwitchingLoadedOnly=$event),_cache[5]||(_cache[5]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"])]),_createVNode12(select_field_default,{label:"settings.switch_panel_after_switching_tab",optLabel:"settings.switch_panel_after_switching_tab_",value:_unref13(Settings).state.switchPanelAfterSwitchingTab,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref13(Settings).state.switchPanelAfterSwitchingTab=$event),toggleSwitchPanelAfterSwitchingTab],folded:!0,opts:_unref13(Settings).getOpts("switchPanelAfterSwitchingTab")},null,8,["value","opts"]),_createVNode12(select_field_default,{label:"settings.tab_rm_btn",optLabel:"settings.tab_rm_btn_",value:_unref13(Settings).state.tabRmBtn,"onUpdate:value":[_cache[7]||(_cache[7]=$event=>_unref13(Settings).state.tabRmBtn=$event),_cache[8]||(_cache[8]=$event=>_unref13(Settings).saveDebounced(150))],folded:!0,opts:_unref13(Settings).getOpts("tabRmBtn")},null,8,["value","opts"]),_createVNode12(select_field_default,{label:"settings.activate_after_closing",optLabel:"settings.activate_after_closing_",value:_unref13(Settings).state.activateAfterClosing,"onUpdate:value":[_cache[9]||(_cache[9]=$event=>_unref13(Settings).state.activateAfterClosing=$event),_cache[10]||(_cache[10]=$event=>_unref13(Settings).saveDebounced(150))],folded:!0,opts:_unref13(Settings).getOpts("activateAfterClosing")},null,8,["value","opts"]),_createElementVNode13("div",_hoisted_314,[_createVNode12(toggle_field_default,{label:"settings.activate_after_closing_stay_in_panel",value:_unref13(Settings).state.activateAfterClosingStayInPanel,"onUpdate:value":[_cache[11]||(_cache[11]=$event=>_unref13(Settings).state.activateAfterClosingStayInPanel=$event),_cache[12]||(_cache[12]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode12(toggle_field_default,{label:"settings.activate_after_closing_global",value:_unref13(Settings).state.activateAfterClosingGlobal,"onUpdate:value":[_cache[13]||(_cache[13]=$event=>_unref13(Settings).state.activateAfterClosingGlobal=$event),_cache[14]||(_cache[14]=$event=>_unref13(Settings).saveDebounced(150))],inactive:_unref13(Settings).state.activateAfterClosing!=="prev_act"},null,8,["value","inactive"]),_createVNode12(toggle_field_default,{label:"settings.activate_after_closing_no_folded",value:_unref13(Settings).state.activateAfterClosingNoFolded,"onUpdate:value":[_cache[15]||(_cache[15]=$event=>_unref13(Settings).state.activateAfterClosingNoFolded=$event),_cache[16]||(_cache[16]=$event=>_unref13(Settings).saveDebounced(150))],inactive:_unref13(Settings).state.activateAfterClosing!=="prev_act"},null,8,["value","inactive"]),_createVNode12(toggle_field_default,{label:"settings.activate_after_closing_no_discarded",value:_unref13(Settings).state.activateAfterClosingNoDiscarded,"onUpdate:value":[_cache[17]||(_cache[17]=$event=>_unref13(Settings).state.activateAfterClosingNoDiscarded=$event),_cache[18]||(_cache[18]=$event=>_unref13(Settings).saveDebounced(150))],inactive:_unref13(Settings).state.activateAfterClosing==="none"},null,8,["value","inactive"])]),_createVNode12(toggle_field_default,{label:"settings.tabs_unread_mark",value:_unref13(Settings).state.tabsUnreadMark,"onUpdate:value":[_cache[19]||(_cache[19]=$event=>_unref13(Settings).state.tabsUnreadMark=$event),_cache[20]||(_cache[20]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode12(select_field_default,{label:"settings.tabs_update_mark",optLabel:"settings.tabs_update_mark_",value:_unref13(Settings).state.tabsUpdateMark,"onUpdate:value":[_cache[21]||(_cache[21]=$event=>_unref13(Settings).state.tabsUpdateMark=$event),_cache[22]||(_cache[22]=$event=>_unref13(Settings).saveDebounced(150))],opts:_unref13(Settings).getOpts("tabsUpdateMark"),folded:!0},null,8,["value","opts"]),_createElementVNode13("div",_hoisted_411,[_createVNode12(toggle_field_default,{label:"settings.tabs_update_mark_first",value:_unref13(Settings).state.tabsUpdateMarkFirst,"onUpdate:value":[_cache[23]||(_cache[23]=$event=>_unref13(Settings).state.tabsUpdateMarkFirst=$event),_cache[24]||(_cache[24]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"])]),_createVNode12(count_field_default,{class:"-inline",label:"settings.tabs_reload_limit",value:_unref13(Settings).state.tabsReloadLimit,"onUpdate:value":[_cache[25]||(_cache[25]=$event=>_unref13(Settings).state.tabsReloadLimit=$event),_cache[26]||(_cache[26]=$event=>_unref13(Settings).saveDebounced(500))],min:1},null,8,["value"]),_createElementVNode13("div",_hoisted_56,[_createVNode12(toggle_field_default,{label:"settings.tabs_reload_limit_notif",value:_unref13(Settings).state.tabsReloadLimitNotif,"onUpdate:value":[_cache[27]||(_cache[27]=$event=>_unref13(Settings).state.tabsReloadLimitNotif=$event),_cache[28]||(_cache[28]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!(_unref13(Settings).state.tabsReloadLimit>0)},null,8,["value","inactive"])]),_createVNode12(toggle_field_default,{label:"settings.tabs_panel_switch_act_move",value:_unref13(Settings).state.tabsPanelSwitchActMove,"onUpdate:value":toggleTabsPanelSwitchActMove},null,8,["value"]),_createVNode12(toggle_field_default,{label:"settings.tabs_panel_switch_act_move_auto",value:_unref13(Settings).state.tabsPanelSwitchActMoveAuto,"onUpdate:value":toggleTabsPanelSwitchActMoveAuto},null,8,["value"]),_createVNode12(select_field_default,{label:"settings.tabs_url_in_tooltip",optLabel:"settings.tabs_url_in_tooltip_",value:_unref13(Settings).state.tabsUrlInTooltip,"onUpdate:value":[_cache[29]||(_cache[29]=$event=>_unref13(Settings).state.tabsUrlInTooltip=$event),_cache[30]||(_cache[30]=$event=>_unref13(Settings).saveDebounced(150))],opts:_unref13(Settings).getOpts("tabsUrlInTooltip")},null,8,["value","opts"]),_createVNode12(toggle_field_default,{label:"settings.show_new_tab_btns",value:_unref13(Settings).state.showNewTabBtns,"onUpdate:value":[_cache[31]||(_cache[31]=$event=>_unref13(Settings).state.showNewTabBtns=$event),_cache[32]||(_cache[32]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode13("div",_hoisted_64,[_createVNode12(select_field_default,{label:"settings.new_tab_bar_position",optLabel:"settings.new_tab_bar_position_",value:_unref13(Settings).state.newTabBarPosition,"onUpdate:value":[_cache[33]||(_cache[33]=$event=>_unref13(Settings).state.newTabBarPosition=$event),_cache[34]||(_cache[34]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.showNewTabBtns,opts:_unref13(Settings).getOpts("newTabBarPosition")},null,8,["value","inactive","opts"])]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs_switch_delay",value:_unref13(Settings).state.tabSwitchDelay,"onUpdate:value":[_cache[35]||(_cache[35]=$event=>_unref13(Settings).state.tabSwitchDelay=$event),_cache[36]||(_cache[36]=$event=>_unref13(Settings).saveDebounced(500))],or:0},null,8,["value"]),_createElementVNode13("div",_hoisted_74,[_createElementVNode13("div",_hoisted_84,[_createElementVNode13("div",_hoisted_94,_toDisplayString13(_unref13(translate)("settings.new_tab_position")),1)]),_createVNode12(select_field_default,{class:"-no-separator",label:"settings.move_new_tab_pin",optLabel:"settings.move_new_tab_pin_",value:_unref13(Settings).state.moveNewTabPin,"onUpdate:value":[_cache[37]||(_cache[37]=$event=>_unref13(Settings).state.moveNewTabPin=$event),_cache[38]||(_cache[38]=$event=>_unref13(Settings).saveDebounced(150))],opts:_unref13(Settings).getOpts("moveNewTabPin")},null,8,["value","opts"]),_createVNode12(toggle_field_default,{label:"settings.pinned_auto_group",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.pinnedAutoGroup,"onUpdate:value":[_cache[39]||(_cache[39]=$event=>_unref13(Settings).state.pinnedAutoGroup=$event),_cache[40]||(_cache[40]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(select_field_default,{label:"settings.move_new_tab_parent",optLabel:"settings.move_new_tab_parent_",value:_unref13(Settings).state.moveNewTabParent,"onUpdate:value":[_cache[41]||(_cache[41]=$event=>_unref13(Settings).state.moveNewTabParent=$event),_cache[42]||(_cache[42]=$event=>_unref13(Settings).saveDebounced(150))],opts:_unref13(Settings).getOpts("moveNewTabParent"),folded:!0},null,8,["value","opts"]),_createElementVNode13("div",_hoisted_104,[_createVNode12(toggle_field_default,{label:"settings.move_new_tab_parent_act_panel",inactive:_unref13(Settings).state.moveNewTabParent==="none",value:_unref13(Settings).state.moveNewTabParentActPanel,"onUpdate:value":[_cache[43]||(_cache[43]=$event=>_unref13(Settings).state.moveNewTabParentActPanel=$event),_cache[44]||(_cache[44]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"])]),_createVNode12(select_field_default,{label:"settings.move_new_tab",optLabel:"settings.move_new_tab_",value:_unref13(Settings).state.moveNewTab,"onUpdate:value":[_cache[45]||(_cache[45]=$event=>_unref13(Settings).state.moveNewTab=$event),_cache[46]||(_cache[46]=$event=>_unref13(Settings).saveDebounced(150))],opts:_unref13(Settings).getOpts("moveNewTab"),folded:!0},null,8,["value","opts"]),_createElementVNode13("div",_hoisted_1110,[_createVNode12(select_field_default,{inactive:!relativeToActiveTab.value,label:"settings.move_new_tab_active_pin",optLabel:"settings.move_new_tab_pin_",value:_unref13(Settings).state.moveNewTabActivePin,"onUpdate:value":[_cache[47]||(_cache[47]=$event=>_unref13(Settings).state.moveNewTabActivePin=$event),_cache[48]||(_cache[48]=$event=>_unref13(Settings).saveDebounced(150))],opts:_unref13(Settings).getOpts("moveNewTabActivePin")},null,8,["inactive","value","opts"])])]),_createElementVNode13("div",_hoisted_125,[_createElementVNode13("div",_hoisted_135,[_createElementVNode13("div",_hoisted_145,_toDisplayString13(_unref13(translate)("settings.pinned_tabs_title")),1)]),_createVNode12(select_field_default,{class:"-no-separator",value:_unref13(Settings).state.pinnedTabsPosition,"onUpdate:value":[_cache[49]||(_cache[49]=$event=>_unref13(Settings).state.pinnedTabsPosition=$event),_cache[50]||(_cache[50]=$event=>_unref13(Settings).saveDebounced(150))],label:"settings.pinned_tabs_position",optLabel:"settings.pinned_tabs_position_",opts:_unref13(Settings).getOpts("pinnedTabsPosition"),folded:!0},null,8,["value","opts"]),_createVNode12(toggle_field_default,{label:"settings.pinned_tabs_list",inactive:_unref13(Settings).state.pinnedTabsPosition!=="panel"&&_unref13(Settings).state.pinnedTabsPosition!=="top",value:_unref13(Settings).state.pinnedTabsList,"onUpdate:value":[_cache[51]||(_cache[51]=$event=>_unref13(Settings).state.pinnedTabsList=$event),_cache[52]||(_cache[52]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(toggle_field_default,{label:"settings.pinned.no_unload",inactive:_unref13(Settings).state.pinnedTabsPosition!=="panel",value:_unref13(Settings).state.pinnedNoUnload,"onUpdate:value":[_cache[53]||(_cache[53]=$event=>_unref13(Settings).state.pinnedNoUnload=$event),_cache[54]||(_cache[54]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"])]),_createElementVNode13("div",_hoisted_155,[_createElementVNode13("div",_hoisted_164,[_createElementVNode13("div",_hoisted_174,_toDisplayString13(_unref13(translate)("settings.tabs_tree_title")),1)]),_createVNode12(toggle_field_default,{class:"-no-separator",label:"settings.tabs_tree_layout",value:_unref13(Settings).state.tabsTree,"onUpdate:value":[_cache[55]||(_cache[55]=$event=>_unref13(Settings).state.tabsTree=$event),_cache[56]||(_cache[56]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode12(toggle_field_default,{label:"settings.group_on_open_layout",value:_unref13(Settings).state.groupOnOpen,"onUpdate:value":[_cache[57]||(_cache[57]=$event=>_unref13(Settings).state.groupOnOpen=$event),_cache[58]||(_cache[58]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.tabsTree},null,8,["value","inactive"]),_createVNode12(select_field_default,{label:"settings.tabs_tree_limit",optLabel:"settings.tabs_tree_limit_",value:_unref13(Settings).state.tabsTreeLimit,"onUpdate:value":[_cache[59]||(_cache[59]=$event=>_unref13(Settings).state.tabsTreeLimit=$event),_cache[60]||(_cache[60]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.tabsTree,opts:_unref13(Settings).getOpts("tabsTreeLimit")},null,8,["value","inactive","opts"]),_createVNode12(toggle_field_default,{label:"settings.auto_fold_tabs",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.autoFoldTabs,"onUpdate:value":[_cache[61]||(_cache[61]=$event=>_unref13(Settings).state.autoFoldTabs=$event),_cache[62]||(_cache[62]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createElementVNode13("div",_hoisted_183,[_createVNode12(select_field_default,{label:"settings.auto_fold_tabs_except",optLabel:"settings.auto_fold_tabs_except_",value:_unref13(Settings).state.autoFoldTabsExcept,"onUpdate:value":[_cache[63]||(_cache[63]=$event=>_unref13(Settings).state.autoFoldTabsExcept=$event),_cache[64]||(_cache[64]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.tabsTree||!_unref13(Settings).state.autoFoldTabs,opts:_unref13(Settings).getOpts("autoFoldTabsExcept")},null,8,["value","inactive","opts"])]),_createVNode12(toggle_field_default,{label:"settings.auto_exp_tabs",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.autoExpandTabs,"onUpdate:value":[_cache[65]||(_cache[65]=$event=>_unref13(Settings).state.autoExpandTabs=$event),_cache[66]||(_cache[66]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(toggle_field_default,{label:"settings.auto_exp_tabs_on_new",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.autoExpandTabsOnNew,"onUpdate:value":[_cache[67]||(_cache[67]=$event=>_unref13(Settings).state.autoExpandTabsOnNew=$event),_cache[68]||(_cache[68]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(select_field_default,{label:"settings.rm_child_tabs",optLabel:"settings.rm_child_tabs_",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.rmChildTabs,"onUpdate:value":[_cache[69]||(_cache[69]=$event=>_unref13(Settings).state.rmChildTabs=$event),_cache[70]||(_cache[70]=$event=>_unref13(Settings).saveDebounced(150))],opts:_unref13(Settings).getOpts("rmChildTabs")},null,8,["inactive","value","opts"]),_createVNode12(toggle_field_default,{label:"settings.tabs_lvl_dots",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.tabsLvlDots,"onUpdate:value":[_cache[71]||(_cache[71]=$event=>_unref13(Settings).state.tabsLvlDots=$event),_cache[72]||(_cache[72]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(toggle_field_default,{label:"settings.discard_folded",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.discardFolded,"onUpdate:value":[_cache[73]||(_cache[73]=$event=>_unref13(Settings).state.discardFolded=$event),_cache[74]||(_cache[74]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createElementVNode13("div",_hoisted_193,[_createVNode12(num_field_default,{class:"-last",label:"settings.discard_folded_delay",unitLabel:"settings.discard_folded_delay_",value:_unref13(Settings).state.discardFoldedDelay,"onUpdate:value":[_cache[75]||(_cache[75]=$event=>_unref13(Settings).state.discardFoldedDelay=$event),_cache[77]||(_cache[77]=$event=>_unref13(Settings).saveDebounced(500))],unit:_unref13(Settings).state.discardFoldedDelayUnit,"onUpdate:unit":[_cache[76]||(_cache[76]=$event=>_unref13(Settings).state.discardFoldedDelayUnit=$event),_cache[78]||(_cache[78]=$event=>_unref13(Settings).saveDebounced(150))],or:0,inactive:!_unref13(Settings).state.tabsTree||!_unref13(Settings).state.discardFolded,unitOpts:_unref13(SETTINGS_OPTIONS).discardFoldedDelayUnit},null,8,["value","unit","inactive","unitOpts"])]),_createVNode12(toggle_field_default,{label:"settings.tabs_tree_bookmarks",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.tabsTreeBookmarks,"onUpdate:value":[_cache[79]||(_cache[79]=$event=>_unref13(Settings).state.tabsTreeBookmarks=$event),_cache[80]||(_cache[80]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(select_field_default,{label:"settings.tree_rm_outdent",optLabel:"settings.tree_rm_outdent_",value:_unref13(Settings).state.treeRmOutdent,"onUpdate:value":[_cache[81]||(_cache[81]=$event=>_unref13(Settings).state.treeRmOutdent=$event),_cache[82]||(_cache[82]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.tabsTree,opts:_unref13(Settings).getOpts("treeRmOutdent")},null,8,["value","inactive","opts"]),_createVNode12(toggle_field_default,{label:"settings.auto_group_on_close",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.autoGroupOnClose,"onUpdate:value":[_cache[83]||(_cache[83]=$event=>_unref13(Settings).state.autoGroupOnClose=$event),_cache[84]||(_cache[84]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createElementVNode13("div",_hoisted_203,[_createVNode12(toggle_field_default,{label:"settings.auto_group_on_close_0_lvl",inactive:!_unref13(Settings).state.tabsTree||!_unref13(Settings).state.autoGroupOnClose,value:_unref13(Settings).state.autoGroupOnClose0Lvl,"onUpdate:value":[_cache[85]||(_cache[85]=$event=>_unref13(Settings).state.autoGroupOnClose0Lvl=$event),_cache[86]||(_cache[86]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(toggle_field_default,{label:"settings.auto_group_on_close_mouse_only",inactive:!_unref13(Settings).state.tabsTree||!_unref13(Settings).state.autoGroupOnClose,value:_unref13(Settings).state.autoGroupOnCloseMouseOnly,"onUpdate:value":[_cache[87]||(_cache[87]=$event=>_unref13(Settings).state.autoGroupOnCloseMouseOnly=$event),_cache[88]||(_cache[88]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"])]),_createVNode12(toggle_field_default,{label:"settings.ignore_folded_parent",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.ignoreFoldedParent,"onUpdate:value":[_cache[89]||(_cache[89]=$event=>_unref13(Settings).state.ignoreFoldedParent=$event),_cache[90]||(_cache[90]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(toggle_field_default,{label:"settings.show_new_group_conf",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.showNewGroupConf,"onUpdate:value":[_cache[91]||(_cache[91]=$event=>_unref13(Settings).state.showNewGroupConf=$event),_cache[92]||(_cache[92]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createVNode12(toggle_field_default,{label:"settings.sort_groups_first",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.sortGroupsFirst,"onUpdate:value":[_cache[93]||(_cache[93]=$event=>_unref13(Settings).state.sortGroupsFirst=$event),_cache[94]||(_cache[94]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"])]),_createElementVNode13("div",_hoisted_217,[_createElementVNode13("div",_hoisted_224,[_createElementVNode13("div",_hoisted_234,_toDisplayString13(_unref13(translate)("settings.tabs_colorization_title")),1)]),_createVNode12(toggle_field_default,{class:"-no-separator",label:"settings.colorize_tabs",value:_unref13(Settings).state.colorizeTabs,"onUpdate:value":[_cache[95]||(_cache[95]=$event=>_unref13(Settings).state.colorizeTabs=$event),_cache[96]||(_cache[96]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode13("div",_hoisted_244,[_createVNode12(select_field_default,{label:"settings.colorize_tabs_src",optLabel:"settings.colorize_tabs_src_",value:_unref13(Settings).state.colorizeTabsSrc,"onUpdate:value":[_cache[97]||(_cache[97]=$event=>_unref13(Settings).state.colorizeTabsSrc=$event),_cache[98]||(_cache[98]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.colorizeTabs,opts:_unref13(Settings).getOpts("colorizeTabsSrc")},null,8,["value","inactive","opts"])]),_createVNode12(toggle_field_default,{label:"settings.colorize_branches",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.colorizeTabsBranches,"onUpdate:value":[_cache[99]||(_cache[99]=$event=>_unref13(Settings).state.colorizeTabsBranches=$event),_cache[100]||(_cache[100]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"]),_createElementVNode13("div",_hoisted_254,[_createVNode12(select_field_default,{label:"settings.colorize_branches_src",optLabel:"settings.colorize_branches_src_",value:_unref13(Settings).state.colorizeTabsBranchesSrc,"onUpdate:value":[_cache[101]||(_cache[101]=$event=>_unref13(Settings).state.colorizeTabsBranchesSrc=$event),_cache[102]||(_cache[102]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.tabsTree||!_unref13(Settings).state.colorizeTabsBranches,opts:_unref13(Settings).getOpts("colorizeTabsBranchesSrc")},null,8,["value","inactive","opts"])]),_createVNode12(toggle_field_default,{label:"settings.tabs.inherit_custom_color",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.inheritCustomColor,"onUpdate:value":[_cache[103]||(_cache[103]=$event=>_unref13(Settings).state.inheritCustomColor=$event),_cache[104]||(_cache[104]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["inactive","value"])]),_createElementVNode13("div",_hoisted_263,[_createElementVNode13("div",_hoisted_273,[_createElementVNode13("div",_hoisted_282,_toDisplayString13(_unref13(translate)("settings.tabs_preview_title")),1)]),_createVNode12(toggle_field_default,{class:"-no-separator",label:"settings.tabs.preview",value:_unref13(Settings).state.previewTabs,"onUpdate:value":togglePreviewTabs},null,8,["value"]),_createVNode12(select_field_default,{label:"settings.tabs.preview_mode",optLabel:"settings.tabs.preview_mode_",value:_unref13(Settings).state.previewTabsMode,"onUpdate:value":[_cache[105]||(_cache[105]=$event=>_unref13(Settings).state.previewTabsMode=$event),_cache[106]||(_cache[106]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.previewTabs,opts:_unref13(Settings).getOpts("previewTabsMode"),folded:!0},null,8,["value","inactive","opts"]),_createElementVNode13("div",_hoisted_292,[_createVNode12(select_field_default,{label:"settings.tabs.preview_page_mode_fallback",optLabel:"settings.tabs.preview_mode_",value:_unref13(Settings).state.previewTabsPageModeFallback,"onUpdate:value":[_cache[107]||(_cache[107]=$event=>_unref13(Settings).state.previewTabsPageModeFallback=$event),_cache[108]||(_cache[108]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode!=="p",opts:_unref13(Settings).getOpts("previewTabsPageModeFallback"),folded:!0},null,8,["value","inactive","opts"])]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs.preview_delay",value:_unref13(Settings).state.previewTabsDelay,"onUpdate:value":[_cache[109]||(_cache[109]=$event=>_unref13(Settings).state.previewTabsDelay=$event),_cache[110]||(_cache[110]=$event=>_unref13(Settings).saveDebounced(500))],or:0,inactive:!_unref13(Settings).state.previewTabs},null,8,["value","inactive"]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs.preview_inline_height",value:_unref13(Settings).state.previewTabsInlineHeight,"onUpdate:value":[_cache[111]||(_cache[111]=$event=>_unref13(Settings).state.previewTabsInlineHeight=$event),_cache[112]||(_cache[112]=$event=>_unref13(Settings).saveDebounced(500))],or:0,inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode!=="i"&&_unref13(Settings).state.previewTabsPageModeFallback!=="i"},null,8,["value","inactive"]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs.preview_popup_width",value:_unref13(Settings).state.previewTabsPopupWidth,"onUpdate:value":[_cache[113]||(_cache[113]=$event=>_unref13(Settings).state.previewTabsPopupWidth=$event),_cache[114]||(_cache[114]=$event=>_unref13(Settings).saveDebounced(500))],or:0,inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode==="i"},null,8,["value","inactive"]),_createVNode12(select_field_default,{label:"settings.tabs.preview_side",optLabel:"settings.tabs.preview_side_",value:_unref13(Settings).state.previewTabsSide,"onUpdate:value":[_cache[115]||(_cache[115]=$event=>_unref13(Settings).state.previewTabsSide=$event),_cache[116]||(_cache[116]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode==="i",opts:_unref13(Settings).getOpts("previewTabsSide")},null,8,["value","inactive","opts"]),_createVNode12(toggle_field_default,{label:"settings.tabs.preview_follow_mouse",value:_unref13(Settings).state.previewTabsFollowMouse,"onUpdate:value":[_cache[117]||(_cache[117]=$event=>_unref13(Settings).state.previewTabsFollowMouse=$event),_cache[118]||(_cache[118]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode==="i"},null,8,["value","inactive"]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs.preview_win_offset_y",value:_unref13(Settings).state.previewTabsWinOffsetY,"onUpdate:value":[_cache[119]||(_cache[119]=$event=>_unref13(Settings).state.previewTabsWinOffsetY=$event),_cache[120]||(_cache[120]=$event=>_unref13(Settings).saveDebounced(500))],allowNegative:!0,or:0,inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode!=="w"&&_unref13(Settings).state.previewTabsPageModeFallback!=="w"},null,8,["value","inactive"]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs.preview_win_offset_x",value:_unref13(Settings).state.previewTabsWinOffsetX,"onUpdate:value":[_cache[121]||(_cache[121]=$event=>_unref13(Settings).state.previewTabsWinOffsetX=$event),_cache[122]||(_cache[122]=$event=>_unref13(Settings).saveDebounced(500))],allowNegative:!0,or:0,inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode!=="w"&&_unref13(Settings).state.previewTabsPageModeFallback!=="w"},null,8,["value","inactive"]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs.preview_in_page_offset_y",value:_unref13(Settings).state.previewTabsInPageOffsetY,"onUpdate:value":[_cache[123]||(_cache[123]=$event=>_unref13(Settings).state.previewTabsInPageOffsetY=$event),_cache[124]||(_cache[124]=$event=>_unref13(Settings).saveDebounced(500))],allowNegative:!0,or:0,inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode!=="p"},null,8,["value","inactive"]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs.preview_in_page_offset_x",value:_unref13(Settings).state.previewTabsInPageOffsetX,"onUpdate:value":[_cache[125]||(_cache[125]=$event=>_unref13(Settings).state.previewTabsInPageOffsetX=$event),_cache[126]||(_cache[126]=$event=>_unref13(Settings).saveDebounced(500))],allowNegative:!0,or:0,inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode!=="p"},null,8,["value","inactive"]),_createVNode12(num_field_default,{class:"-inline",label:"settings.tabs.preview_crop_right",value:_unref13(Settings).state.previewTabsCropRight,"onUpdate:value":[_cache[127]||(_cache[127]=$event=>_unref13(Settings).state.previewTabsCropRight=$event),_cache[128]||(_cache[128]=$event=>_unref13(Settings).saveDebounced(500))],or:0,inactive:!_unref13(Settings).state.previewTabs||_unref13(Settings).state.previewTabsMode!=="p"},null,8,["value","inactive"])]),_createElementVNode13("div",_hoisted_302,[_createElementVNode13("div",_hoisted_315,[_createElementVNode13("div",_hoisted_323,_toDisplayString13(_unref13(translate)("settings.tabs_native_title")),1)]),_createVNode12(toggle_field_default,{class:"-no-separator",label:"settings.hide_inactive_panel_tabs",value:_unref13(Settings).state.hideInact,"onUpdate:value":toggleHideInact},null,8,["value"]),_createVNode12(toggle_field_default,{label:"settings.hide_folded_tabs",inactive:!_unref13(Settings).state.tabsTree,value:_unref13(Settings).state.hideFoldedTabs,"onUpdate:value":toggleHideFoldedTabs},null,8,["inactive","value"]),_createElementVNode13("div",_hoisted_333,[_createVNode12(select_field_default,{label:"settings.hide_folded_parent",optLabel:"settings.hide_folded_parent_",value:_unref13(Settings).state.hideFoldedParent,"onUpdate:value":[_cache[129]||(_cache[129]=$event=>_unref13(Settings).state.hideFoldedParent=$event),_cache[130]||(_cache[130]=$event=>_unref13(Settings).saveDebounced(150))],inactive:!_unref13(Settings).state.hideFoldedTabs,opts:_unref13(Settings).getOpts("hideFoldedParent")},null,8,["value","inactive","opts"])]),_createVNode12(toggle_field_default,{label:"settings.native_highlight",value:_unref13(Settings).state.nativeHighlight,"onUpdate:value":[_cache[131]||(_cache[131]=$event=>_unref13(Settings).state.nativeHighlight=$event),_cache[132]||(_cache[132]=$event=>_unref13(Settings).saveDebounced(150))]},null,8,["value"])])],512))}});import{defineComponent as _defineComponent14}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref14,toDisplayString as _toDisplayString14,createElementVNode as _createElementVNode14,createVNode as _createVNode13,normalizeStyle as _normalizeStyle,openBlock as _openBlock14,createElementBlock as _createElementBlock14,createCommentVNode as _createCommentVNode7}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref11,reactive as reactive5,onMounted as onMounted11,computed as computed6}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_120=_createElementVNode14("span",{class:"header-shadow"},null,-1),_hoisted_218={class:"sub-fields"},_hoisted_316={class:"ctrls"},_hoisted_412={key:0,class:"fetch-progress"},_hoisted_57={class:"progress-bar"},_hoisted_65={class:"progress-info"},_hoisted_75={class:"progress-host"},_hoisted_85={class:"progress-info"},_hoisted_95={class:"progress-done"},_hoisted_105={class:"progress-errors"},settings_bookmarks_default=_defineComponent14({__name:"settings.bookmarks",setup(__props){let el=ref11(null),state=reactive5({fetchingBookmarksFavs:!1,fetchingBookmarksFavsDone:0,fetchingBookmarksFavsAll:0,fetchingBookmarksFavsErrors:0,fetchingBookmarksFavsPercent:0,fetchingBookmarksFavsHost:""});onMounted11(()=>SetupPage.registerEl("settings_bookmarks",el.value));let progressBarStyle=computed6(()=>({transform:`translateX(${state.fetchingBookmarksFavsPercent}%)`}));async function getBookmarkedUrls(){let bookmarksRoot=await browser.bookmarks.getTree(),bookmarksUrls=[],hWalk=nodes=>{for(let n of nodes)n.url&&bookmarksUrls.push(n.url),n.children&&hWalk(n.children)};return bookmarksRoot[0]?.children&&hWalk(bookmarksRoot[0].children),bookmarksUrls}function sortUrlByHosts(urls,exclude){let hosts={};for(let url of urls){if(!url.startsWith("http")||url.length<13)continue;let urlInfo;try{urlInfo=new URL(url)}catch{continue}let protoHost=urlInfo.protocol+"//"+urlInfo.host;exclude.includes(urlInfo.host)||(hosts[protoHost]?hosts[protoHost].length>url.length&&(hosts[protoHost]=url):hosts[protoHost]=url)}return hosts}async function fetchBookmarksFavicons(){if((!Permissions.reactive.webData||!Permissions.reactive.bookmarks)&&!await Permissions.request("<all_urls>","bookmarks"))return;state.fetchingBookmarksFavs=!0,state.fetchingBookmarksFavsAll=0,state.fetchingBookmarksFavsDone=0,state.fetchingBookmarksFavsErrors=0,state.fetchingBookmarksFavsPercent=0;let stored=await browser.storage.local.get("favDomains"),favDomains=Object.keys(stored?.favDomains??{}),bookmarksUrls=await getBookmarkedUrls(),hosts=sortUrlByHosts(bookmarksUrls,favDomains);state.fetchingBookmarksFavsAll=Object.keys(hosts).length;let perc=100/state.fetchingBookmarksFavsAll;for(let host of Object.keys(hosts)){if(!state.fetchingBookmarksFavs)break;let icon;try{state.fetchingBookmarksFavsHost=host,icon=await loadBinAsBase64(host+"/favicon.ico")}catch{state.fetchingBookmarksFavsErrors++,state.fetchingBookmarksFavsPercent+=perc,state.fetchingBookmarksFavsDone++;continue}if(!icon||!icon.startsWith("data:image")||icon[icon.length-1]===","){state.fetchingBookmarksFavsErrors++,state.fetchingBookmarksFavsPercent+=perc,state.fetchingBookmarksFavsDone++;continue}state.fetchingBookmarksFavsPercent+=perc,state.fetchingBookmarksFavsDone++,bg("saveFavicon",hosts[host],icon)}state.fetchingBookmarksFavs=!1,setTimeout(()=>{broadcast({dstType:2,action:"loadFavicons"})},1500)}function stopFetchingBookmarksFavicons(){state.fetchingBookmarksFavs=!1}return(_ctx,_cache)=>(_openBlock14(),_createElementBlock14("section",{ref_key:"el",ref:el},[_createElementVNode14("h2",null,_toDisplayString14(_unref14(translate)("settings.bookmarks_title")),1),_hoisted_120,_createVNode13(toggle_field_default,{label:"settings.load_bookmarks_on_demand",value:_unref14(Settings).state.loadBookmarksOnDemand,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref14(Settings).state.loadBookmarksOnDemand=$event),_cache[1]||(_cache[1]=$event=>_unref14(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode13(select_field_default,{label:"settings.warn_on_multi_bookmark_delete",optLabel:"settings.warn_on_multi_bookmark_delete_",value:_unref14(Settings).state.warnOnMultiBookmarkDelete,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref14(Settings).state.warnOnMultiBookmarkDelete=$event),_cache[3]||(_cache[3]=$event=>_unref14(Settings).saveDebounced(150))],opts:_unref14(Settings).getOpts("warnOnMultiBookmarkDelete")},null,8,["value","opts"]),_createVNode13(toggle_field_default,{label:"settings.ask_new_bookmark_place",value:_unref14(Settings).state.askNewBookmarkPlace,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref14(Settings).state.askNewBookmarkPlace=$event),_cache[5]||(_cache[5]=$event=>_unref14(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode13(toggle_field_default,{label:"settings.bookmarks_rm_undo_note",value:_unref14(Settings).state.bookmarksRmUndoNote,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref14(Settings).state.bookmarksRmUndoNote=$event),_cache[7]||(_cache[7]=$event=>_unref14(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode13(toggle_field_default,{label:"settings.auto_close_bookmarks",value:_unref14(Settings).state.autoCloseBookmarks,"onUpdate:value":[_cache[8]||(_cache[8]=$event=>_unref14(Settings).state.autoCloseBookmarks=$event),_cache[9]||(_cache[9]=$event=>_unref14(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode13(toggle_field_default,{label:"settings.auto_rm_other",value:_unref14(Settings).state.autoRemoveOther,"onUpdate:value":[_cache[10]||(_cache[10]=$event=>_unref14(Settings).state.autoRemoveOther=$event),_cache[11]||(_cache[11]=$event=>_unref14(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode13(toggle_field_default,{label:"settings.show_bookmark_len",value:_unref14(Settings).state.showBookmarkLen,"onUpdate:value":[_cache[12]||(_cache[12]=$event=>_unref14(Settings).state.showBookmarkLen=$event),_cache[13]||(_cache[13]=$event=>_unref14(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode13(toggle_field_default,{label:"settings.highlight_open_bookmarks",value:_unref14(Settings).state.highlightOpenBookmarks,"onUpdate:value":[_cache[14]||(_cache[14]=$event=>_unref14(Settings).state.highlightOpenBookmarks=$event),_cache[15]||(_cache[15]=$event=>_unref14(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode14("div",_hoisted_218,[_createVNode13(toggle_field_default,{label:"settings.activate_open_bookmark_tab",value:_unref14(Settings).state.activateOpenBookmarkTab,"onUpdate:value":[_cache[16]||(_cache[16]=$event=>_unref14(Settings).state.activateOpenBookmarkTab=$event),_cache[17]||(_cache[17]=$event=>_unref14(Settings).saveDebounced(150))],inactive:!_unref14(Settings).state.highlightOpenBookmarks},null,8,["value","inactive"])]),_createVNode13(toggle_field_default,{label:"settings.pin_opened_bookmarks_folder",value:_unref14(Settings).state.pinOpenedBookmarksFolder,"onUpdate:value":[_cache[18]||(_cache[18]=$event=>_unref14(Settings).state.pinOpenedBookmarksFolder=$event),_cache[19]||(_cache[19]=$event=>_unref14(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode13(select_field_default,{label:"settings.old_bookmarks_after_save",optLabel:"settings.old_bookmarks_after_save_",value:_unref14(Settings).state.oldBookmarksAfterSave,"onUpdate:value":[_cache[20]||(_cache[20]=$event=>_unref14(Settings).state.oldBookmarksAfterSave=$event),_cache[21]||(_cache[21]=$event=>_unref14(Settings).saveDebounced(150))],opts:_unref14(Settings).getOpts("oldBookmarksAfterSave"),folded:!0},null,8,["value","opts"]),_createElementVNode14("div",_hoisted_316,[state.fetchingBookmarksFavs?(_openBlock14(),_createElementBlock14("div",_hoisted_412,[_createElementVNode14("div",_hoisted_57,[_createElementVNode14("div",{class:"progress-lvl",style:_normalizeStyle(progressBarStyle.value)},null,4)]),_createElementVNode14("div",_hoisted_65,[_createElementVNode14("div",_hoisted_75,_toDisplayString14(state.fetchingBookmarksFavsHost),1)]),_createElementVNode14("div",_hoisted_85,[_createElementVNode14("div",_hoisted_95,_toDisplayString14(state.fetchingBookmarksFavsDone)+"/"+_toDisplayString14(state.fetchingBookmarksFavsAll)+" "+_toDisplayString14(_unref14(translate)("settings.fetch_bookmarks_favs_done")),1),_createElementVNode14("div",_hoisted_105,_toDisplayString14(state.fetchingBookmarksFavsErrors)+" "+_toDisplayString14(_unref14(translate)("settings.fetch_bookmarks_favs_errors")),1)]),state.fetchingBookmarksFavs?(_openBlock14(),_createElementBlock14("div",{key:0,class:"btn",onClick:stopFetchingBookmarksFavicons},_toDisplayString14(_unref14(translate)("settings.fetch_bookmarks_favs_stop")),1)):_createCommentVNode7("v-if",!0)])):_createCommentVNode7("v-if",!0),state.fetchingBookmarksFavs?_createCommentVNode7("v-if",!0):(_openBlock14(),_createElementBlock14("div",{key:1,class:"btn",onClick:fetchBookmarksFavicons},_toDisplayString14(_unref14(translate)("settings.fetch_bookmarks_favs")),1))])],512))}});import{defineComponent as _defineComponent15}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref15,toDisplayString as _toDisplayString15,createElementVNode as _createElementVNode15,createVNode as _createVNode14,openBlock as _openBlock15,createElementBlock as _createElementBlock15}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref12,onMounted as onMounted12}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_121=_createElementVNode15("span",{class:"header-shadow"},null,-1),settings_history_default=_defineComponent15({__name:"settings.history",setup(__props){let el=ref12(null);return onMounted12(()=>SetupPage.registerEl("settings_history",el.value)),(_ctx,_cache)=>(_openBlock15(),_createElementBlock15("section",{ref_key:"el",ref:el},[_createElementVNode15("h2",null,_toDisplayString15(_unref15(translate)("settings.history_title")),1),_hoisted_121,_createVNode14(toggle_field_default,{label:"settings.load_history_on_demand",value:_unref15(Settings).state.loadHistoryOnDemand,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref15(Settings).state.loadHistoryOnDemand=$event),_cache[1]||(_cache[1]=$event=>_unref15(Settings).saveDebounced(150))]},null,8,["value"])],512))}});import{defineComponent as _defineComponent16}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref16,toDisplayString as _toDisplayString16,createElementVNode as _createElementVNode16,createVNode as _createVNode15,openBlock as _openBlock16,createElementBlock as _createElementBlock16}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref13,onMounted as onMounted13}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_126=_createElementVNode16("span",{class:"header-shadow"},null,-1),_hoisted_219={class:"sub-fields"},_hoisted_317={class:"note-field"},_hoisted_413={class:"label"},_hoisted_58={class:"note"},_hoisted_66={class:"ctrls"},settings_appearance_default=_defineComponent16({__name:"settings.appearance",setup(__props){let el=ref13(null);function onColorSchemeUpdate(){Styles.initColorScheme(),Settings.saveDebounced(150)}return onMounted13(()=>SetupPage.registerEl("settings_appearance",el.value)),(_ctx,_cache)=>(_openBlock16(),_createElementBlock16("section",{ref_key:"el",ref:el},[_createElementVNode16("h2",null,_toDisplayString16(_unref16(translate)("settings.appearance_title")),1),_hoisted_126,_createVNode15(select_field_default,{label:"settings.font_size",optLabel:"settings.font_size_",value:_unref16(Settings).state.fontSize,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref16(Settings).state.fontSize=$event),_cache[1]||(_cache[1]=$event=>_unref16(Settings).saveDebounced(150))],opts:_unref16(Settings).getOpts("fontSize")},null,8,["value","opts"]),_createVNode15(toggle_field_default,{label:"settings.animations",value:_unref16(Settings).state.animations,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref16(Settings).state.animations=$event),_cache[3]||(_cache[3]=$event=>_unref16(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode16("div",_hoisted_219,[_createVNode15(select_field_default,{label:"settings.animation_speed",optLabel:"settings.animation_speed_",value:_unref16(Settings).state.animationSpeed,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref16(Settings).state.animationSpeed=$event),_cache[5]||(_cache[5]=$event=>_unref16(Settings).saveDebounced(150))],inactive:!_unref16(Settings).state.animations,opts:_unref16(Settings).getOpts("animationSpeed")},null,8,["value","inactive","opts"])]),_createVNode15(select_field_default,{label:"settings.theme",optLabel:"settings.theme_",value:_unref16(Settings).state.theme,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref16(Settings).state.theme=$event),_cache[7]||(_cache[7]=$event=>_unref16(Settings).saveDebounced(150))],opts:_unref16(Settings).getOpts("theme")},null,8,["value","opts"]),_createVNode15(select_field_default,{label:"settings.density",optLabel:"settings.density_",value:_unref16(Settings).state.density,"onUpdate:value":[_cache[8]||(_cache[8]=$event=>_unref16(Settings).state.density=$event),_cache[9]||(_cache[9]=$event=>_unref16(Settings).saveDebounced(150))],opts:_unref16(Settings).getOpts("density")},null,8,["value","opts"]),_createVNode15(select_field_default,{label:"settings.switch_color_scheme",optLabel:"settings.color_scheme_",value:_unref16(Settings).state.colorScheme,"onUpdate:value":[_cache[10]||(_cache[10]=$event=>_unref16(Settings).state.colorScheme=$event),onColorSchemeUpdate],opts:_unref16(Settings).getOpts("colorScheme")},null,8,["value","opts"]),_createElementVNode16("div",_hoisted_317,[_createElementVNode16("div",_hoisted_413,_toDisplayString16(_unref16(translate)("settings.appearance_notes_title")),1),_createElementVNode16("div",_hoisted_58,_toDisplayString16(_unref16(translate)("settings.appearance_notes")),1)]),_createElementVNode16("div",_hoisted_66,[_createElementVNode16("div",{class:"btn",onClick:_cache[11]||(_cache[11]=$event=>_unref16(SetupPage).switchView("styles_editor"))},_toDisplayString16(_unref16(translate)("settings.edit_styles")),1)])],512))}});import{defineComponent as _defineComponent17}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref17,toDisplayString as _toDisplayString17,createElementVNode as _createElementVNode17,createVNode as _createVNode16,openBlock as _openBlock17,createElementBlock as _createElementBlock17}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref14,onMounted as onMounted14}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_127=_createElementVNode17("span",{class:"header-shadow"},null,-1),_hoisted_220={class:"sub-fields"},_hoisted_318={class:"sub-fields"},_hoisted_414={class:"sub-fields"},_hoisted_59={class:"wrapper"},_hoisted_67={class:"sub-title"},_hoisted_76={class:"text"},_hoisted_86={class:"wrapper"},_hoisted_96={class:"sub-title"},_hoisted_106={class:"text"},_hoisted_1111={class:"sub-fields"},_hoisted_128={class:"sub-fields"},_hoisted_136={class:"wrapper"},_hoisted_146={class:"sub-title"},_hoisted_156={class:"text"},_hoisted_165={class:"wrapper"},_hoisted_175={class:"sub-title"},_hoisted_184={class:"text"},_hoisted_194={class:"wrapper"},_hoisted_204={class:"sub-title"},_hoisted_2110={class:"text"},_hoisted_225={class:"sub-fields"},_hoisted_235={class:"sub-fields"},_hoisted_245={class:"wrapper"},_hoisted_255={class:"sub-title"},_hoisted_264={class:"text"},_hoisted_274={class:"sub-fields"},_hoisted_283={class:"sub-fields"},settings_mouse_default=_defineComponent17({__name:"settings.mouse",setup(__props){let el=ref14(null);onMounted14(()=>SetupPage.registerEl("settings_mouse",el.value));function onTabsSecondClickActPrevUpdate(value){value&&(Settings.state.tabDoubleClick="none"),Settings.saveDebounced(150)}function onTabDoubleClickUpdate(value){value!=="none"&&(Settings.state.tabsSecondClickActPrev=!1),Settings.saveDebounced(150)}function onActivateOnMouseUpUpdate(value){!value&&Settings.state.tabLongLeftClick==="edit_title"&&(Settings.state.tabLongLeftClick="none"),Settings.saveDebounced(150)}function onTabLongLeftClickUpdate(value){value==="edit_title"&&!Settings.state.activateOnMouseUp&&(Settings.state.activateOnMouseUp=!0),Settings.saveDebounced(150)}return(_ctx,_cache)=>(_openBlock17(),_createElementBlock17("section",{ref_key:"el",ref:el},[_createElementVNode17("h2",null,_toDisplayString17(_unref17(translate)("settings.mouse_title")),1),_hoisted_127,_createVNode16(select_field_default,{label:"settings.h_scroll_action",optLabel:"settings.h_scroll_action_",value:_unref17(Settings).state.hScrollAction,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref17(Settings).state.hScrollAction=$event),_cache[1]||(_cache[1]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("hScrollAction"),folded:!0},null,8,["value","opts"]),_createElementVNode17("div",_hoisted_220,[_createVNode16(toggle_field_default,{label:"settings.one_panel_switch_per_scroll",value:_unref17(Settings).state.onePanelSwitchPerScroll,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref17(Settings).state.onePanelSwitchPerScroll=$event),_cache[3]||(_cache[3]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.hScrollAction!=="switch_panels"},null,8,["value","inactive"])]),_createVNode16(select_field_default,{label:"settings.scroll_through_tabs",optLabel:"settings.scroll_through_tabs_",value:_unref17(Settings).state.scrollThroughTabs,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref17(Settings).state.scrollThroughTabs=$event),_cache[5]||(_cache[5]=$event=>_unref17(Settings).saveDebounced(150))],folded:!0,opts:_unref17(Settings).getOpts("scrollThroughTabs"),note:_unref17(Settings).state.scrollThroughTabs==="psp"||_unref17(Settings).state.scrollThroughTabs==="psg"?_unref17(translate)("settings.scroll_through_tabs_preselect_note"):void 0},null,8,["value","opts","note"]),_createElementVNode17("div",_hoisted_318,[_createVNode16(toggle_field_default,{label:"settings.scroll_through_visible_tabs",value:_unref17(Settings).state.scrollThroughVisibleTabs,"onUpdate:value":[_cache[6]||(_cache[6]=$event=>_unref17(Settings).state.scrollThroughVisibleTabs=$event),_cache[7]||(_cache[7]=$event=>_unref17(Settings).saveDebounced(150))],inactive:!_unref17(Settings).state.tabsTree||_unref17(Settings).state.scrollThroughTabs==="none"||_unref17(Settings).state.scrollThroughTabs==="psp"||_unref17(Settings).state.scrollThroughTabs==="psg"},null,8,["value","inactive"]),_createVNode16(toggle_field_default,{label:"settings.scroll_through_tabs_skip_discarded",value:_unref17(Settings).state.scrollThroughTabsSkipDiscarded,"onUpdate:value":[_cache[8]||(_cache[8]=$event=>_unref17(Settings).state.scrollThroughTabsSkipDiscarded=$event),_cache[9]||(_cache[9]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.scrollThroughTabs==="none"||_unref17(Settings).state.scrollThroughTabs==="psp"||_unref17(Settings).state.scrollThroughTabs==="psg"},null,8,["value","inactive"]),_createVNode16(toggle_field_default,{label:"settings.scroll_through_tabs_except_overflow",value:_unref17(Settings).state.scrollThroughTabsExceptOverflow,"onUpdate:value":[_cache[10]||(_cache[10]=$event=>_unref17(Settings).state.scrollThroughTabsExceptOverflow=$event),_cache[11]||(_cache[11]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.scrollThroughTabs==="none"},null,8,["value","inactive"]),_createVNode16(toggle_field_default,{label:"settings.scroll_through_tabs_cyclic",value:_unref17(Settings).state.scrollThroughTabsCyclic,"onUpdate:value":[_cache[12]||(_cache[12]=$event=>_unref17(Settings).state.scrollThroughTabsCyclic=$event),_cache[13]||(_cache[13]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.scrollThroughTabs==="none"},null,8,["value","inactive"]),_createVNode16(num_field_default,{class:"-inline",label:"settings.scroll_through_tabs_scroll_area",value:_unref17(Settings).state.scrollThroughTabsScrollArea,"onUpdate:value":[_cache[14]||(_cache[14]=$event=>_unref17(Settings).state.scrollThroughTabsScrollArea=$event),_cache[15]||(_cache[15]=$event=>_unref17(Settings).saveDebounced(500))],inactive:_unref17(Settings).state.scrollThroughTabs==="none"||_unref17(Settings).state.scrollThroughTabsExceptOverflow,or:0,allowNegative:!0,note:_unref17(translate)("settings.scroll_through_tabs_scroll_area_note")},null,8,["value","inactive","note"])]),_createVNode16(toggle_field_default,{label:"settings.auto_menu_multi_sel",value:_unref17(Settings).state.autoMenuMultiSel,"onUpdate:value":[_cache[16]||(_cache[16]=$event=>_unref17(Settings).state.autoMenuMultiSel=$event),_cache[17]||(_cache[17]=$event=>_unref17(Settings).saveDebounced(150))],note:_unref17(translate)("settings.auto_menu_multi_sel_note")},null,8,["value","note"]),_createVNode16(num_field_default,{class:"-inline",label:"settings.long_click_delay",unitLabel:"settings.long_click_delay_",value:_unref17(Settings).state.longClickDelay,"onUpdate:value":[_cache[18]||(_cache[18]=$event=>_unref17(Settings).state.longClickDelay=$event),_cache[19]||(_cache[19]=$event=>_unref17(Settings).saveDebounced(500))],or:300},null,8,["value"]),_createVNode16(toggle_field_default,{label:"settings.wheel_threshold",value:_unref17(Settings).state.wheelThreshold,"onUpdate:value":[_cache[20]||(_cache[20]=$event=>_unref17(Settings).state.wheelThreshold=$event),_cache[21]||(_cache[21]=$event=>_unref17(Settings).saveDebounced(150))]},null,8,["value"]),_createElementVNode17("div",_hoisted_414,[_createVNode16(num_field_default,{class:"-inline",label:"settings.wheel_threshold_y",value:_unref17(Settings).state.wheelThresholdY,"onUpdate:value":[_cache[22]||(_cache[22]=$event=>_unref17(Settings).state.wheelThresholdY=$event),_cache[23]||(_cache[23]=$event=>_unref17(Settings).saveDebounced(500))],inactive:!_unref17(Settings).state.wheelThreshold,or:60},null,8,["value","inactive"]),_createVNode16(toggle_field_default,{label:"settings.wheel_accumulation_y",value:_unref17(Settings).state.wheelAccumulationY,"onUpdate:value":[_cache[24]||(_cache[24]=$event=>_unref17(Settings).state.wheelAccumulationY=$event),_cache[25]||(_cache[25]=$event=>_unref17(Settings).saveDebounced(150))],inactive:!_unref17(Settings).state.wheelThreshold},null,8,["value","inactive"]),_createVNode16(num_field_default,{class:"-inline",label:"settings.wheel_threshold_x",value:_unref17(Settings).state.wheelThresholdX,"onUpdate:value":[_cache[26]||(_cache[26]=$event=>_unref17(Settings).state.wheelThresholdX=$event),_cache[27]||(_cache[27]=$event=>_unref17(Settings).saveDebounced(500))],inactive:!_unref17(Settings).state.wheelThreshold,or:10},null,8,["value","inactive"]),_createVNode16(toggle_field_default,{class:"-no-separator",label:"settings.wheel_accumulation_x",value:_unref17(Settings).state.wheelAccumulationX,"onUpdate:value":[_cache[28]||(_cache[28]=$event=>_unref17(Settings).state.wheelAccumulationX=$event),_cache[29]||(_cache[29]=$event=>_unref17(Settings).saveDebounced(150))],inactive:!_unref17(Settings).state.wheelThreshold},null,8,["value","inactive"])]),_createElementVNode17("div",_hoisted_59,[_createElementVNode17("div",_hoisted_67,[_createElementVNode17("div",_hoisted_76,_toDisplayString17(_unref17(translate)("settings.nav_actions_sub_title")),1)]),_createVNode16(select_field_default,{class:"-no-separator",label:"settings.nav_act_tabs_panel_left_click",optLabel:"settings.nav_act_tabs_panel_left_click_",value:_unref17(Settings).state.navActTabsPanelLeftClickAction,"onUpdate:value":[_cache[30]||(_cache[30]=$event=>_unref17(Settings).state.navActTabsPanelLeftClickAction=$event),_cache[31]||(_cache[31]=$event=>_unref17(Settings).saveDebounced(150))],folded:!0,opts:_unref17(Settings).getOpts("navActTabsPanelLeftClickAction")},null,8,["value","opts"]),_createVNode16(select_field_default,{label:"settings.nav_act_bookmarks_panel_left_click",optLabel:"settings.nav_act_bookmarks_panel_left_click_",value:_unref17(Settings).state.navActBookmarksPanelLeftClickAction,"onUpdate:value":[_cache[32]||(_cache[32]=$event=>_unref17(Settings).state.navActBookmarksPanelLeftClickAction=$event),_cache[33]||(_cache[33]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("navActBookmarksPanelLeftClickAction")},null,8,["value","opts"]),_createVNode16(select_field_default,{label:"settings.nav_tabs_panel_mid_click",optLabel:"settings.nav_tabs_panel_mid_click_",value:_unref17(Settings).state.navTabsPanelMidClickAction,"onUpdate:value":[_cache[34]||(_cache[34]=$event=>_unref17(Settings).state.navTabsPanelMidClickAction=$event),_cache[35]||(_cache[35]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("navTabsPanelMidClickAction"),folded:!0},null,8,["value","opts"]),_createVNode16(select_field_default,{label:"settings.nav_bookmarks_panel_mid_click",optLabel:"settings.nav_bookmarks_panel_mid_click_",value:_unref17(Settings).state.navBookmarksPanelMidClickAction,"onUpdate:value":[_cache[36]||(_cache[36]=$event=>_unref17(Settings).state.navBookmarksPanelMidClickAction=$event),_cache[37]||(_cache[37]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("navBookmarksPanelMidClickAction")},null,8,["value","opts"]),_createVNode16(toggle_field_default,{class:"-last",label:"settings.nav_switch_panels_wheel",value:_unref17(Settings).state.navSwitchPanelsWheel,"onUpdate:value":[_cache[38]||(_cache[38]=$event=>_unref17(Settings).state.navSwitchPanelsWheel=$event),_cache[39]||(_cache[39]=$event=>_unref17(Settings).saveDebounced(150))]},null,8,["value"])]),_createElementVNode17("div",_hoisted_86,[_createElementVNode17("div",_hoisted_96,[_createElementVNode17("div",_hoisted_106,_toDisplayString17(_unref17(translate)("settings.tab_actions_sub_title")),1)]),_createVNode16(select_field_default,{class:"-no-separator",label:"settings.tab_double_click",optLabel:"settings.tab_action_",value:_unref17(Settings).state.tabDoubleClick,"onUpdate:value":[_cache[40]||(_cache[40]=$event=>_unref17(Settings).state.tabDoubleClick=$event),onTabDoubleClickUpdate],opts:_unref17(Settings).getOpts("tabDoubleClick"),folded:!0},null,8,["value","opts"]),_createVNode16(toggle_field_default,{label:"settings.tabs_second_click_act_prev",value:_unref17(Settings).state.tabsSecondClickActPrev,"onUpdate:value":[_cache[41]||(_cache[41]=$event=>_unref17(Settings).state.tabsSecondClickActPrev=$event),onTabsSecondClickActPrevUpdate]},null,8,["value"]),_createElementVNode17("div",_hoisted_1111,[_createVNode16(toggle_field_default,{label:"settings.tabs_second_click_act_prev_panel_only",value:_unref17(Settings).state.tabsSecondClickActPrevPanelOnly,"onUpdate:value":[_cache[42]||(_cache[42]=$event=>_unref17(Settings).state.tabsSecondClickActPrevPanelOnly=$event),_cache[43]||(_cache[43]=$event=>_unref17(Settings).saveDebounced(150))],inactive:!_unref17(Settings).state.tabsSecondClickActPrev},null,8,["value","inactive"])]),_createVNode16(toggle_field_default,{label:"settings.activate_on_mouseup",value:_unref17(Settings).state.activateOnMouseUp,"onUpdate:value":[_cache[44]||(_cache[44]=$event=>_unref17(Settings).state.activateOnMouseUp=$event),onActivateOnMouseUpUpdate]},null,8,["value"]),_createVNode16(toggle_field_default,{label:"settings.shift_selection_from_active",value:_unref17(Settings).state.shiftSelAct,"onUpdate:value":[_cache[45]||(_cache[45]=$event=>_unref17(Settings).state.shiftSelAct=$event),_cache[46]||(_cache[46]=$event=>_unref17(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode16(select_field_default,{label:"settings.tab_long_left_click",optLabel:"settings.tab_action_",value:_unref17(Settings).state.tabLongLeftClick,"onUpdate:value":[_cache[47]||(_cache[47]=$event=>_unref17(Settings).state.tabLongLeftClick=$event),onTabLongLeftClickUpdate],opts:_unref17(Settings).getOpts("tabLongLeftClick"),folded:!0},null,8,["value","opts"]),_createVNode16(select_field_default,{label:"settings.tab_long_right_click",optLabel:"settings.tab_action_",value:_unref17(Settings).state.tabLongRightClick,"onUpdate:value":[_cache[48]||(_cache[48]=$event=>_unref17(Settings).state.tabLongRightClick=$event),_cache[49]||(_cache[49]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("tabLongRightClick"),folded:!0},null,8,["value","opts"]),_createVNode16(select_field_default,{label:"settings.tab_middle_click",optLabel:"settings.tab_action_",value:_unref17(Settings).state.tabMiddleClick,"onUpdate:value":[_cache[50]||(_cache[50]=$event=>_unref17(Settings).state.tabMiddleClick=$event),_cache[51]||(_cache[51]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("tabMiddleClick"),folded:!0},null,8,["value","opts"]),_createElementVNode17("div",_hoisted_128,[_createVNode16(select_field_default,{label:"settings.tab_middle_click_ctrl",optLabel:"settings.tab_action_",value:_unref17(Settings).state.tabMiddleClickCtrl,"onUpdate:value":[_cache[52]||(_cache[52]=$event=>_unref17(Settings).state.tabMiddleClickCtrl=$event),_cache[53]||(_cache[53]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("tabMiddleClickModifier"),folded:!0},null,8,["value","opts"]),_createVNode16(select_field_default,{label:"settings.tab_middle_click_shift",optLabel:"settings.tab_action_",value:_unref17(Settings).state.tabMiddleClickShift,"onUpdate:value":[_cache[54]||(_cache[54]=$event=>_unref17(Settings).state.tabMiddleClickShift=$event),_cache[55]||(_cache[55]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("tabMiddleClickModifier"),folded:!0},null,8,["value","opts"]),_createVNode16(toggle_field_default,{label:"settings.multiple_middle_close",value:_unref17(Settings).state.multipleMiddleClose,"onUpdate:value":[_cache[56]||(_cache[56]=$event=>_unref17(Settings).state.multipleMiddleClose=$event),_cache[57]||(_cache[57]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.tabMiddleClick!=="close",note:_unref17(translate)("settings.multiple_middle_close_note")},null,8,["value","inactive","note"])]),_createVNode16(select_field_default,{label:"settings.tab_close_middle_click",optLabel:"settings.tab_action_",value:_unref17(Settings).state.tabCloseMiddleClick,"onUpdate:value":[_cache[58]||(_cache[58]=$event=>_unref17(Settings).state.tabCloseMiddleClick=$event),_cache[59]||(_cache[59]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("tabCloseMiddleClick")},null,8,["value","opts"])]),_createElementVNode17("div",_hoisted_136,[_createElementVNode17("div",_hoisted_146,[_createElementVNode17("div",_hoisted_156,_toDisplayString17(_unref17(translate)("settings.tabs_panel_actions_sub_title")),1)]),_createVNode16(select_field_default,{class:"-no-separator",label:"settings.tabs_panel_left_click_action",optLabel:"settings.tabs_panel_action_",value:_unref17(Settings).state.tabsPanelLeftClickAction,"onUpdate:value":[_cache[60]||(_cache[60]=$event=>_unref17(Settings).state.tabsPanelLeftClickAction=$event),_cache[61]||(_cache[61]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("tabsPanelLeftClickAction"),folded:!0},null,8,["value","opts"]),_createVNode16(select_field_default,{label:"settings.tabs_panel_double_click_action",optLabel:"settings.tabs_panel_action_",value:_unref17(Settings).state.tabsPanelDoubleClickAction,"onUpdate:value":[_cache[62]||(_cache[62]=$event=>_unref17(Settings).state.tabsPanelDoubleClickAction=$event),_cache[63]||(_cache[63]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.tabsPanelLeftClickAction!=="none",opts:_unref17(Settings).getOpts("tabsPanelDoubleClickAction"),folded:!0},null,8,["value","inactive","opts"]),_createVNode16(select_field_default,{label:"settings.tabs_panel_right_click_action",optLabel:"settings.tabs_panel_action_",value:_unref17(Settings).state.tabsPanelRightClickAction,"onUpdate:value":[_cache[64]||(_cache[64]=$event=>_unref17(Settings).state.tabsPanelRightClickAction=$event),_cache[65]||(_cache[65]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("tabsPanelRightClickAction"),folded:!0},null,8,["value","opts"]),_createVNode16(select_field_default,{label:"settings.tabs_panel_middle_click_action",optLabel:"settings.tabs_panel_action_",value:_unref17(Settings).state.tabsPanelMiddleClickAction,"onUpdate:value":[_cache[66]||(_cache[66]=$event=>_unref17(Settings).state.tabsPanelMiddleClickAction=$event),_cache[67]||(_cache[67]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("tabsPanelMiddleClickAction"),folded:!0},null,8,["value","opts"])]),_createElementVNode17("div",_hoisted_165,[_createElementVNode17("div",_hoisted_175,[_createElementVNode17("div",_hoisted_184,_toDisplayString17(_unref17(translate)("settings.mouse.new_tab_button_title")),1)]),_createVNode16(select_field_default,{class:"-no-separator",label:"settings.mouse.new_tab_middle_click_action",optLabel:"settings.mouse.new_tab_action_",value:_unref17(Settings).state.newTabMiddleClickAction,"onUpdate:value":[_cache[68]||(_cache[68]=$event=>_unref17(Settings).state.newTabMiddleClickAction=$event),_cache[69]||(_cache[69]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("newTabAction"),folded:!0},null,8,["value","opts"])]),_createElementVNode17("div",_hoisted_194,[_createElementVNode17("div",_hoisted_204,[_createElementVNode17("div",_hoisted_2110,_toDisplayString17(_unref17(translate)("settings.mouse.bookmarks_title")),1)]),_createVNode16(select_field_default,{class:"-no-separator",label:"settings.mouse.bookmarks.left_click_action",optLabel:"settings.mouse.bookmarks.left_click_action_",value:_unref17(Settings).state.bookmarksLeftClickAction,"onUpdate:value":[_cache[70]||(_cache[70]=$event=>_unref17(Settings).state.bookmarksLeftClickAction=$event),_cache[71]||(_cache[71]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("bookmarksLeftClickAction"),folded:!1},null,8,["value","opts"]),_createElementVNode17("div",_hoisted_225,[_createVNode16(toggle_field_default,{label:"settings.mouse.bookmarks.new_tab_activate",value:_unref17(Settings).state.bookmarksLeftClickActivate,"onUpdate:value":[_cache[72]||(_cache[72]=$event=>_unref17(Settings).state.bookmarksLeftClickActivate=$event),_cache[73]||(_cache[73]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.bookmarksLeftClickAction!=="open_in_new"},null,8,["value","inactive"]),_createVNode16(select_field_default,{label:"settings.mouse.bookmarks.new_tab_pos",optLabel:"settings.mouse.bookmarks.new_tab_pos_",value:_unref17(Settings).state.bookmarksLeftClickPos,"onUpdate:value":[_cache[74]||(_cache[74]=$event=>_unref17(Settings).state.bookmarksLeftClickPos=$event),_cache[75]||(_cache[75]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.bookmarksLeftClickAction!=="open_in_new",opts:_unref17(Settings).getOpts("bookmarksNewTabPos"),folded:!1},null,8,["value","inactive","opts"])]),_createVNode16(select_field_default,{label:"settings.mouse.bookmarks.mid_click_action",optLabel:"settings.mouse.bookmarks.mid_click_action_",value:_unref17(Settings).state.bookmarksMidClickAction,"onUpdate:value":[_cache[76]||(_cache[76]=$event=>_unref17(Settings).state.bookmarksMidClickAction=$event),_cache[77]||(_cache[77]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("bookmarksMidClickAction"),folded:!0},null,8,["value","opts"]),_createElementVNode17("div",_hoisted_235,[_createVNode16(toggle_field_default,{label:"settings.mouse.bookmarks.new_tab_activate",value:_unref17(Settings).state.bookmarksMidClickActivate,"onUpdate:value":[_cache[78]||(_cache[78]=$event=>_unref17(Settings).state.bookmarksMidClickActivate=$event),_cache[79]||(_cache[79]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.bookmarksMidClickAction!=="open_in_new"},null,8,["value","inactive"]),_createVNode16(toggle_field_default,{label:"settings.mouse.bookmarks.new_tab_rm",value:_unref17(Settings).state.bookmarksMidClickRemove,"onUpdate:value":[_cache[80]||(_cache[80]=$event=>_unref17(Settings).state.bookmarksMidClickRemove=$event),_cache[81]||(_cache[81]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.bookmarksMidClickAction!=="open_in_new"},null,8,["value","inactive"]),_createVNode16(select_field_default,{label:"settings.mouse.bookmarks.new_tab_pos",optLabel:"settings.mouse.bookmarks.new_tab_pos_",value:_unref17(Settings).state.bookmarksMidClickPos,"onUpdate:value":[_cache[82]||(_cache[82]=$event=>_unref17(Settings).state.bookmarksMidClickPos=$event),_cache[83]||(_cache[83]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.bookmarksMidClickAction!=="open_in_new",opts:_unref17(Settings).getOpts("bookmarksNewTabPos"),folded:!1},null,8,["value","inactive","opts"])])]),_createElementVNode17("div",_hoisted_245,[_createElementVNode17("div",_hoisted_255,[_createElementVNode17("div",_hoisted_264,_toDisplayString17(_unref17(translate)("settings.mouse.history_title")),1)]),_createVNode16(select_field_default,{class:"-no-separator",label:"settings.mouse.history.left_click_action",optLabel:"settings.mouse.history.left_click_action_",value:_unref17(Settings).state.historyLeftClickAction,"onUpdate:value":[_cache[84]||(_cache[84]=$event=>_unref17(Settings).state.historyLeftClickAction=$event),_cache[85]||(_cache[85]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("historyLeftClickAction"),folded:!1},null,8,["value","opts"]),_createElementVNode17("div",_hoisted_274,[_createVNode16(toggle_field_default,{label:"settings.mouse.history.new_tab_activate",value:_unref17(Settings).state.historyLeftClickActivate,"onUpdate:value":[_cache[86]||(_cache[86]=$event=>_unref17(Settings).state.historyLeftClickActivate=$event),_cache[87]||(_cache[87]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.historyLeftClickAction!=="open_in_new"},null,8,["value","inactive"]),_createVNode16(select_field_default,{label:"settings.mouse.history.new_tab_pos",optLabel:"settings.mouse.history.new_tab_pos_",value:_unref17(Settings).state.historyLeftClickPos,"onUpdate:value":[_cache[88]||(_cache[88]=$event=>_unref17(Settings).state.historyLeftClickPos=$event),_cache[89]||(_cache[89]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.historyLeftClickAction!=="open_in_new",opts:_unref17(Settings).getOpts("historyNewTabPos"),folded:!1},null,8,["value","inactive","opts"])]),_createVNode16(select_field_default,{label:"settings.mouse.history.mid_click_action",optLabel:"settings.mouse.history.mid_click_action_",value:_unref17(Settings).state.historyMidClickAction,"onUpdate:value":[_cache[90]||(_cache[90]=$event=>_unref17(Settings).state.historyMidClickAction=$event),_cache[91]||(_cache[91]=$event=>_unref17(Settings).saveDebounced(150))],opts:_unref17(Settings).getOpts("historyMidClickAction"),folded:!1},null,8,["value","opts"]),_createElementVNode17("div",_hoisted_283,[_createVNode16(toggle_field_default,{label:"settings.mouse.history.new_tab_activate",value:_unref17(Settings).state.historyMidClickActivate,"onUpdate:value":[_cache[92]||(_cache[92]=$event=>_unref17(Settings).state.historyMidClickActivate=$event),_cache[93]||(_cache[93]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.historyMidClickAction!=="open_in_new"},null,8,["value","inactive"]),_createVNode16(select_field_default,{label:"settings.mouse.history.new_tab_pos",optLabel:"settings.mouse.history.new_tab_pos_",value:_unref17(Settings).state.historyMidClickPos,"onUpdate:value":[_cache[94]||(_cache[94]=$event=>_unref17(Settings).state.historyMidClickPos=$event),_cache[95]||(_cache[95]=$event=>_unref17(Settings).saveDebounced(150))],inactive:_unref17(Settings).state.historyMidClickAction!=="open_in_new",opts:_unref17(Settings).getOpts("historyNewTabPos"),folded:!1},null,8,["value","inactive","opts"])])])],512))}});import{defineComponent as _defineComponent18}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref18,toDisplayString as _toDisplayString18,createElementVNode as _createElementVNode18,createVNode as _createVNode17,openBlock as _openBlock18,createElementBlock as _createElementBlock18}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref15,reactive as reactive6,onMounted as onMounted15}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_129={class:"title-note"},_hoisted_221=_createElementVNode18("span",{class:"header-shadow"},null,-1),_hoisted_319={class:"sub-fields"},_hoisted_415={class:"ctrls"},settings_snapshots_default=_defineComponent18({__name:"settings.snapshots",setup(__props){let el=ref15(null),state=reactive6({snapshotsLen:"-",snapshotsSize:"-"});onMounted15(()=>{SetupPage.registerEl("settings_snapshots",el.value),calcInfo()});async function createSnapshot(){await bg("createSnapshot"),calcInfo()}async function calcInfo(){let stored;try{stored=await browser.storage.local.get("snapshots")}catch{return}let snapshots=stored.snapshots??[];state.snapshotsLen=snapshots.length.toString(),state.snapshotsSize=bytesToStr(new Blob([JSON.stringify(snapshots)]).size)}async function toggleAutoExport(){!Settings.state.snapAutoExport&&!Permissions.reactive.downloads&&!await Permissions.request("downloads")||(Settings.state.snapAutoExport=!Settings.state.snapAutoExport,Settings.saveDebounced(150))}return(_ctx,_cache)=>(_openBlock18(),_createElementBlock18("section",{ref_key:"el",ref:el},[_createElementVNode18("h2",null,[_createElementVNode18("span",null,_toDisplayString18(_unref18(translate)("settings.snapshots_title")),1),_createElementVNode18("div",_hoisted_129," ("+_toDisplayString18(state.snapshotsLen)+": ~"+_toDisplayString18(state.snapshotsSize)+" / 10 mb)",1)]),_hoisted_221,_createVNode17(toggle_field_default,{label:"settings.snap_notify",value:_unref18(Settings).state.snapNotify,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref18(Settings).state.snapNotify=$event),_cache[1]||(_cache[1]=$event=>_unref18(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode17(toggle_field_default,{label:"settings.snap_exclude_private",value:_unref18(Settings).state.snapExcludePrivate,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>_unref18(Settings).state.snapExcludePrivate=$event),_cache[3]||(_cache[3]=$event=>_unref18(Settings).saveDebounced(150))]},null,8,["value"]),_createVNode17(num_field_default,{label:"settings.snap_interval",unitLabel:"settings.snap_interval_",value:_unref18(Settings).state.snapInterval,"onUpdate:value":[_cache[4]||(_cache[4]=$event=>_unref18(Settings).state.snapInterval=$event),_cache[6]||(_cache[6]=$event=>_unref18(Settings).saveDebounced(500))],unit:_unref18(Settings).state.snapIntervalUnit,"onUpdate:unit":[_cache[5]||(_cache[5]=$event=>_unref18(Settings).state.snapIntervalUnit=$event),_cache[7]||(_cache[7]=$event=>_unref18(Settings).saveDebounced(150))],or:"none",unitOpts:_unref18(SETTINGS_OPTIONS).snapIntervalUnit},null,8,["value","unit","unitOpts"]),_createVNode17(toggle_field_default,{label:"settings.snap_export_md_tree",value:_unref18(Settings).state.snapMdFullTree,"onUpdate:value":[_cache[8]||(_cache[8]=$event=>_unref18(Settings).state.snapMdFullTree=$event),_cache[9]||(_cache[9]=$event=>_unref18(Settings).saveDebounced(150))],note:_unref18(translate)("settings.snap_export_md_tree_note")},null,8,["value","note"]),_createVNode17(toggle_field_default,{label:"settings.snap_auto_export",value:_unref18(Settings).state.snapAutoExport,"onUpdate:value":toggleAutoExport},null,8,["value"]),_createElementVNode18("div",_hoisted_319,[_createVNode17(select_field_default,{label:"settings.snap_auto_export_type",optLabel:"settings.snap_auto_export_type_",value:_unref18(Settings).state.snapAutoExportType,"onUpdate:value":[_cache[10]||(_cache[10]=$event=>_unref18(Settings).state.snapAutoExportType=$event),_cache[11]||(_cache[11]=$event=>_unref18(Settings).saveDebounced(150))],inactive:!_unref18(Settings).state.snapAutoExport,opts:_unref18(Settings).getOpts("snapAutoExportType"),folded:!1},null,8,["value","inactive","opts"]),_createVNode17(text_field_default,{class:"-wide",label:"settings.snap_export_path",or:_unref18(translate)("settings.snap_export_path_ph"),inactive:!_unref18(Settings).state.snapAutoExport,line:!0,note:_unref18(translate)("settings.snap_export_path_note"),value:_unref18(Settings).state.snapAutoExportPath,"onUpdate:value":[_cache[12]||(_cache[12]=$event=>_unref18(Settings).state.snapAutoExportPath=$event),_cache[13]||(_cache[13]=$event=>_unref18(Settings).saveDebounced(500))]},null,8,["or","inactive","note","value"])]),_createVNode17(num_field_default,{label:"settings.snap_limit",unitLabel:"settings.snap_limit_",value:_unref18(Settings).state.snapLimit,"onUpdate:value":[_cache[14]||(_cache[14]=$event=>_unref18(Settings).state.snapLimit=$event),_cache[16]||(_cache[16]=$event=>_unref18(Settings).saveDebounced(500))],unit:_unref18(Settings).state.snapLimitUnit,"onUpdate:unit":[_cache[15]||(_cache[15]=$event=>_unref18(Settings).state.snapLimitUnit=$event),_cache[17]||(_cache[17]=$event=>_unref18(Settings).saveDebounced(150))],or:"none",unitOpts:_unref18(SETTINGS_OPTIONS).snapLimitUnit,maxValue:_unref18(Settings).state.snapLimitUnit==="kb"?_unref18(MAX_SIZE_LIMIT):void 0,note:_unref18(translate)("settings.snap_limit_note")},null,8,["value","unit","unitOpts","maxValue","note"]),_createElementVNode18("div",_hoisted_415,[_createElementVNode18("div",{class:"btn",onClick:_cache[18]||(_cache[18]=$event=>_unref18(SetupPage).switchView("snapshots"))},_toDisplayString18(_unref18(translate)("settings.snapshots_view_label")),1),_createElementVNode18("div",{class:"btn",onClick:createSnapshot},_toDisplayString18(_unref18(translate)("settings.make_snapshot")),1)])],512))}});import{defineComponent as _defineComponent19}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref19,toDisplayString as _toDisplayString19,createElementVNode as _createElementVNode19,createVNode as _createVNode18,renderList as _renderList3,Fragment as _Fragment3,openBlock as _openBlock19,createElementBlock as _createElementBlock19,withModifiers as _withModifiers4,createCommentVNode as _createCommentVNode8}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref16,reactive as reactive7,onMounted as onMounted16}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_130={class:"title-note"},_hoisted_226=_createElementVNode19("span",{class:"header-shadow"},null,-1),_hoisted_320={key:0,class:"sync-data"},_hoisted_416={class:"sync-title"},_hoisted_510={class:"sync-list"},_hoisted_68=["title","data-same-profile"],_hoisted_77={class:"sync-name"},_hoisted_87={class:"sync-info"},_hoisted_97={class:"sync-info"},_hoisted_107={class:"sync-info"},_hoisted_1112={class:"sync-btns"},_hoisted_1210=["onClick"],_hoisted_137=["onClick"],_hoisted_147={key:1,class:"sync-data"},_hoisted_157={class:"sync-title"},_hoisted_166={class:"sync-list"},_hoisted_176=["title","data-same-profile"],_hoisted_185={class:"sync-name"},_hoisted_195={class:"sync-info"},_hoisted_205={class:"sync-info"},_hoisted_2111={class:"sync-info"},_hoisted_227={class:"sync-btns"},_hoisted_236=["onClick"],_hoisted_246=["onClick"],_hoisted_256={key:2,class:"sync-data"},_hoisted_265={class:"sync-title"},_hoisted_275={class:"sync-list"},_hoisted_284=["title","data-same-profile"],_hoisted_293={class:"sync-name"},_hoisted_303={class:"sync-info"},_hoisted_3110={class:"sync-info"},_hoisted_324={class:"sync-info"},_hoisted_334={class:"sync-btns"},_hoisted_343=["onClick"],_hoisted_353=["onClick"],_hoisted_362={key:3,class:"sync-data"},_hoisted_372={class:"sync-title"},_hoisted_382={class:"sync-list"},_hoisted_392=["title","data-same-profile"],_hoisted_402={class:"sync-name"},_hoisted_417={class:"sync-info"},_hoisted_423={class:"sync-info"},_hoisted_433={class:"sync-info"},_hoisted_443={class:"sync-btns"},_hoisted_453=["onClick"],_hoisted_462=["onClick"],_hoisted_472={class:"note-field"},_hoisted_482={class:"label"},_hoisted_492={class:"note"},_hoisted_50={class:"ctrls"},settings_sync_default=_defineComponent19({__name:"settings.sync",setup(__props){let el=ref16(null),state=reactive7({syncedOveral:"-",syncedSettings:null,syncedCtxMenu:null,syncedStyles:null,syncedKeybindings:null});onMounted16(()=>{SetupPage.registerEl("settings_sync",el.value),loadSyncedData()});async function loadSyncedData(){let[syncStorage,profileId]=await Promise.all([browser.storage.sync.get(),Info.getProfileId()]),toRemove=[],data={};state.syncedOveral=strSize(JSON.stringify(syncStorage));for(let syncKey of Object.keys(syncStorage)){let syncData=syncStorage[syncKey],[syncProfileId,syncPropName]=syncKey.split("::");if(!syncData||!syncProfileId||!syncPropName){toRemove.push(syncKey);continue}syncData.id=syncKey,syncData.profileId=syncProfileId,syncData.tooltip=getSyncDataTooltipString(syncData,syncProfileId),syncData.timeYYYYMMDD=uDate(syncData.time),syncData.timeHHMM=uTime(syncData.time,":",!1),syncData.size=strSize(JSON.stringify(syncData)),syncData.sameProfile=profileId===syncProfileId,data[syncPropName]||(data[syncPropName]=[]),data[syncPropName].push(syncData)}data.settings&&data.settings.sort((a,b)=>b.time-a.time),data.ctxMenu&&data.ctxMenu.sort((a,b)=>b.time-a.time),data.styles&&data.styles.sort((a,b)=>b.time-a.time),data.settings?state.syncedSettings=data.settings:state.syncedSettings=null,data.ctxMenu?state.syncedCtxMenu=data.ctxMenu:state.syncedCtxMenu=null,data.styles?state.syncedStyles=data.styles:state.syncedStyles=null,data.kb?state.syncedKeybindings=data.kb:state.syncedKeybindings=null,toRemove.length&&browser.storage.sync.remove(toRemove)}function getSyncDataTooltipString(info,profileId){let name=info.name||profileId,date=uDate(info.time),time=uTime(info.time),dataJSON=JSON.stringify(info);return`${name} - ${date} - ${time} - ${strSize(dataJSON)}`}async function applySyncData(info){if(!window.confirm(translate("settings.sync_apply_confirm")))return;let syncMajorVer=Info.getMajVer(info.ver),currentMajorVer=Info.majorVersion,data=cloneObject(info.value);if(!syncMajorVer||syncMajorVer!==currentMajorVer){let old=data;if(data={},old.settings)try{data.settings=recreateNormalizedObject(old.settings,DEFAULT_SETTINGS),data.settings.theme="proton",data.settings.tabDoubleClick!=="none"&&(data.settings.tabsSecondClickActPrev=!1),old.settings.hScrollThroughPanels===!0?data.settings.hScrollAction="switch_panels":old.settings.hScrollThroughPanels===!1&&(data.settings.hScrollAction="none"),old.settings.moveNewTabPin==="none"&&(data.settings.moveNewTabPin="start")}catch(err2){return err("Cannot upgrade legacy settings",err2),window.alert(translate("settings.sync.apply_err"))}if(old.sidebarCSS||old.groupCSS||old.cssVars)try{Styles.upgradeCustomStyles(old,data)}catch(err2){return err("Cannot upgrade legacy styles",err2),window.alert(translate("settings.sync.apply_err"))}}if(data.settings&&(data.settings.syncName=Settings.state.syncName,data.settings.syncSaveSettings=Settings.state.syncSaveSettings,data.settings.syncSaveCtxMenu=Settings.state.syncSaveCtxMenu,data.settings.syncSaveStyles=Settings.state.syncSaveStyles,data.settings.syncSaveKeybindings=Settings.state.syncSaveKeybindings,await Store.set({settings:data.settings}),Settings.loadSettings()),data.contextMenu&&(await Store.set({contextMenu:data.contextMenu}),Menu.loadCtxMenu()),(data.sidebarCSS||data.groupCSS)&&await Store.set({sidebarCSS:data.sidebarCSS,groupCSS:data.groupCSS}),data.keybindings){let waiting=[];for(let name of Object.keys(data.keybindings)){let shortcut=data.keybindings[name];if(!name||!shortcut)continue;let toRm=Keybindings.reactive.list.find(c=>c.shortcut===shortcut);toRm?.name&&waiting.push(browser.commands.update({name:toRm.name,shortcut:""})),waiting.push(browser.commands.update({name,shortcut}))}await Promise.allSettled(waiting),Keybindings.loadKeybindings()}}async function deleteSyncData(key){key&&(await browser.storage.sync.remove(key),loadSyncedData())}function saveSyncSettings(){Settings.state.syncSaveSettings||Store.sync("settings",{}),Settings.saveDebounced(150)}function saveSyncCtxMenu(){Settings.state.syncSaveCtxMenu?Menu.saveCtxMenuToSync():Store.sync("ctxMenu",{}),Settings.saveDebounced(150)}async function saveSyncStyles(){if(!Settings.state.syncSaveStyles)return Store.sync("styles",{});let[sidebarCSS,groupCSS]=await Promise.all([Styles.getCustomCSS("sidebar"),Styles.getCustomCSS("group")]);sidebarCSS&&(Styles.sidebarCSS=sidebarCSS),groupCSS&&(Styles.groupCSS=groupCSS),Styles.saveStylesToSync(),Settings.saveDebounced(150)}function saveSyncKb(){Settings.state.syncSaveKeybindings?Keybindings.saveKeybindingsToSync():Store.sync("kb",{}),Settings.saveDebounced(150)}let onSyncNameUpdatedTimeout;function onSyncNameUpdated(){clearTimeout(onSyncNameUpdatedTimeout),onSyncNameUpdatedTimeout=setTimeout(()=>{Settings.state.syncSaveCtxMenu&&saveSyncCtxMenu(),Settings.state.syncSaveStyles&&saveSyncStyles(),Settings.state.syncSaveKeybindings&&saveSyncKb()},500),Settings.saveDebounced(500)}return(_ctx,_cache)=>(_openBlock19(),_createElementBlock19("section",{ref_key:"el",ref:el},[_createElementVNode19("h2",null,[_createElementVNode19("span",null,_toDisplayString19(_unref19(translate)("settings.sync_title")),1),_createElementVNode19("div",_hoisted_130," (~"+_toDisplayString19(state.syncedOveral)+" / 100 kb)",1)]),_hoisted_226,_createVNode18(text_field_default,{label:"settings.sync_name",or:_unref19(translate)("settings.sync_name_or"),value:_unref19(Settings).state.syncName,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref19(Settings).state.syncName=$event),onSyncNameUpdated]},null,8,["or","value"]),_createVNode18(toggle_field_default,{label:"settings.sync_save_settings",value:_unref19(Settings).state.syncSaveSettings,"onUpdate:value":[_cache[1]||(_cache[1]=$event=>_unref19(Settings).state.syncSaveSettings=$event),_cache[2]||(_cache[2]=$event=>saveSyncSettings())]},null,8,["value"]),_createVNode18(toggle_field_default,{label:"settings.sync_save_ctx_menu",value:_unref19(Settings).state.syncSaveCtxMenu,"onUpdate:value":[_cache[3]||(_cache[3]=$event=>_unref19(Settings).state.syncSaveCtxMenu=$event),_cache[4]||(_cache[4]=$event=>saveSyncCtxMenu())]},null,8,["value"]),_createVNode18(toggle_field_default,{label:"settings.sync_save_styles",value:_unref19(Settings).state.syncSaveStyles,"onUpdate:value":[_cache[5]||(_cache[5]=$event=>_unref19(Settings).state.syncSaveStyles=$event),_cache[6]||(_cache[6]=$event=>saveSyncStyles())]},null,8,["value"]),_createVNode18(toggle_field_default,{label:"settings.sync_save_kb",value:_unref19(Settings).state.syncSaveKeybindings,"onUpdate:value":[_cache[7]||(_cache[7]=$event=>_unref19(Settings).state.syncSaveKeybindings=$event),_cache[8]||(_cache[8]=$event=>saveSyncKb())]},null,8,["value"]),state.syncedSettings?(_openBlock19(),_createElementBlock19("div",_hoisted_320,[_createElementVNode19("div",_hoisted_416,_toDisplayString19(_unref19(translate)("settings.sync_settings_title")),1),_createElementVNode19("table",_hoisted_510,[(_openBlock19(!0),_createElementBlock19(_Fragment3,null,_renderList3(state.syncedSettings,item=>(_openBlock19(),_createElementBlock19("tr",{class:"sync-item",title:item.tooltip,"data-same-profile":item.sameProfile},[_createElementVNode19("td",_hoisted_77,_toDisplayString19(item.name||item.profileId),1),_createElementVNode19("td",_hoisted_87,_toDisplayString19(item.timeYYYYMMDD),1),_createElementVNode19("td",_hoisted_97,_toDisplayString19(item.timeHHMM),1),_createElementVNode19("td",_hoisted_107,_toDisplayString19(item.size)+" / 8 kb",1),_createElementVNode19("td",_hoisted_1112,[_createElementVNode19("div",{class:"btn sync-btn",onClick:_withModifiers4($event=>applySyncData(item),["stop"])},_toDisplayString19(_unref19(translate)("settings.sync_apply_btn")),9,_hoisted_1210),_createElementVNode19("div",{class:"btn sync-btn -warn",onClick:_withModifiers4($event=>deleteSyncData(item.id),["stop"])},_toDisplayString19(_unref19(translate)("settings.sync_delete_btn")),9,_hoisted_137)])],8,_hoisted_68))),256))])])):_createCommentVNode8("v-if",!0),state.syncedCtxMenu?(_openBlock19(),_createElementBlock19("div",_hoisted_147,[_createElementVNode19("div",_hoisted_157,_toDisplayString19(_unref19(translate)("settings.sync_ctx_menu_title")),1),_createElementVNode19("table",_hoisted_166,[(_openBlock19(!0),_createElementBlock19(_Fragment3,null,_renderList3(state.syncedCtxMenu,item=>(_openBlock19(),_createElementBlock19("tr",{class:"sync-item",title:item.tooltip,"data-same-profile":item.sameProfile},[_createElementVNode19("td",_hoisted_185,_toDisplayString19(item.name||item.profileId),1),_createElementVNode19("td",_hoisted_195,_toDisplayString19(item.timeYYYYMMDD),1),_createElementVNode19("td",_hoisted_205,_toDisplayString19(item.timeHHMM),1),_createElementVNode19("td",_hoisted_2111,_toDisplayString19(item.size)+" / 8kb",1),_createElementVNode19("td",_hoisted_227,[_createElementVNode19("div",{class:"btn sync-btn",onClick:_withModifiers4($event=>applySyncData(item),["stop"])},_toDisplayString19(_unref19(translate)("settings.sync_apply_btn")),9,_hoisted_236),_createElementVNode19("div",{class:"btn sync-btn -warn",onClick:_withModifiers4($event=>deleteSyncData(item.id),["stop"])},_toDisplayString19(_unref19(translate)("settings.sync_delete_btn")),9,_hoisted_246)])],8,_hoisted_176))),256))])])):_createCommentVNode8("v-if",!0),state.syncedStyles?(_openBlock19(),_createElementBlock19("div",_hoisted_256,[_createElementVNode19("div",_hoisted_265,_toDisplayString19(_unref19(translate)("settings.sync_styles_title")),1),_createElementVNode19("table",_hoisted_275,[(_openBlock19(!0),_createElementBlock19(_Fragment3,null,_renderList3(state.syncedStyles,item=>(_openBlock19(),_createElementBlock19("tr",{class:"sync-item",title:item.tooltip,"data-same-profile":item.sameProfile},[_createElementVNode19("td",_hoisted_293,_toDisplayString19(item.name||item.profileId),1),_createElementVNode19("td",_hoisted_303,_toDisplayString19(item.timeYYYYMMDD),1),_createElementVNode19("td",_hoisted_3110,_toDisplayString19(item.timeHHMM),1),_createElementVNode19("td",_hoisted_324,_toDisplayString19(item.size)+" / 8kb",1),_createElementVNode19("td",_hoisted_334,[_createElementVNode19("div",{class:"btn sync-btn",onClick:_withModifiers4($event=>applySyncData(item),["stop"])},_toDisplayString19(_unref19(translate)("settings.sync_apply_btn")),9,_hoisted_343),_createElementVNode19("div",{class:"btn sync-btn -warn",onClick:_withModifiers4($event=>deleteSyncData(item.id),["stop"])},_toDisplayString19(_unref19(translate)("settings.sync_delete_btn")),9,_hoisted_353)])],8,_hoisted_284))),256))])])):_createCommentVNode8("v-if",!0),state.syncedKeybindings?(_openBlock19(),_createElementBlock19("div",_hoisted_362,[_createElementVNode19("div",_hoisted_372,_toDisplayString19(_unref19(translate)("settings.sync_kb_title")),1),_createElementVNode19("table",_hoisted_382,[(_openBlock19(!0),_createElementBlock19(_Fragment3,null,_renderList3(state.syncedKeybindings,item=>(_openBlock19(),_createElementBlock19("tr",{class:"sync-item",title:item.tooltip,"data-same-profile":item.sameProfile},[_createElementVNode19("td",_hoisted_402,_toDisplayString19(item.name||item.profileId),1),_createElementVNode19("td",_hoisted_417,_toDisplayString19(item.timeYYYYMMDD),1),_createElementVNode19("td",_hoisted_423,_toDisplayString19(item.timeHHMM),1),_createElementVNode19("td",_hoisted_433,_toDisplayString19(item.size)+" / 8kb",1),_createElementVNode19("td",_hoisted_443,[_createElementVNode19("div",{class:"btn sync-btn",onClick:_withModifiers4($event=>applySyncData(item),["stop"])},_toDisplayString19(_unref19(translate)("settings.sync_apply_btn")),9,_hoisted_453),_createElementVNode19("div",{class:"btn sync-btn -warn",onClick:_withModifiers4($event=>deleteSyncData(item.id),["stop"])},_toDisplayString19(_unref19(translate)("settings.sync_delete_btn")),9,_hoisted_462)])],8,_hoisted_392))),256))])])):_createCommentVNode8("v-if",!0),_createElementVNode19("div",_hoisted_472,[_createElementVNode19("div",_hoisted_482,_toDisplayString19(_unref19(translate)("settings.sync_notes_title")),1),_createElementVNode19("div",_hoisted_492,_toDisplayString19(_unref19(translate)("settings.sync_notes")),1)]),_createElementVNode19("div",_hoisted_50,[_createElementVNode19("div",{class:"btn",onClick:loadSyncedData},_toDisplayString19(_unref19(translate)("settings.sync_update_btn")),1)])],512))}});import{defineComponent as _defineComponent22}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref22,toDisplayString as _toDisplayString22,createElementVNode as _createElementVNode22,openBlock as _openBlock22,createElementBlock as _createElementBlock22,createCommentVNode as _createCommentVNode11,createVNode as _createVNode21,withModifiers as _withModifiers5,Transition as _Transition3,withCtx as _withCtx3}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref19,onMounted as onMounted19}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent20}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref20,toDisplayString as _toDisplayString20,createElementVNode as _createElementVNode20,createVNode as _createVNode19,openBlock as _openBlock20,createBlock as _createBlock4,createCommentVNode as _createCommentVNode9,createElementBlock as _createElementBlock20}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref17,reactive as reactive8,computed as computed7,onMounted as onMounted17}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_131={class:"title"},_hoisted_228={class:"ctrls"},popup_export_config_default=_defineComponent20({__name:"popup.export-config",setup(__props){let rootEl=ref17(null),exportDataLink=ref17(null),state=reactive8({settings:!0,hasStyles:!1,styles:!0,containers:!0,snapshots:!0,favicons:!0,keybindings:!0});onMounted17(async()=>{state.hasStyles=await Styles.hasCustomCSS()});let allSelected=computed7(()=>state.settings&&(!state.hasStyles||state.styles)&&state.containers&&state.snapshots&&state.favicons&&state.keybindings);function onAllChanged(){allSelected.value?(state.settings=!1,state.hasStyles&&(state.styles=!1),state.containers=!1,state.snapshots=!1,state.favicons=!1,state.keybindings=!1):(state.settings=!0,state.hasStyles&&(state.styles=!0),state.containers=!0,state.snapshots=!0,state.favicons=!0,state.keybindings=!0)}function onWheel(e){if(!rootEl.value)return;let scrollOffset=rootEl.value.scrollTop,maxScrollOffset=rootEl.value.scrollHeight-rootEl.value.offsetHeight;scrollOffset===0&&e.deltaY<0&&e.preventDefault(),scrollOffset===maxScrollOffset&&e.deltaY>0&&e.preventDefault()}async function genExportData(){let storageKeys=[];state.containers&&storageKeys.push("containers"),state.settings&&(storageKeys.push("settings"),storageKeys.push("sidebar"),storageKeys.push("contextMenu")),state.hasStyles&&state.styles&&(storageKeys.push("sidebarCSS"),storageKeys.push("groupCSS")),state.snapshots&&storageKeys.push("snapshots"),state.favicons&&(storageKeys.push("favicons_01"),storageKeys.push("favicons_02"),storageKeys.push("favicons_03"),storageKeys.push("favicons_04"),storageKeys.push("favicons_05"),storageKeys.push("favHashes"),storageKeys.push("favDomains"));let data;try{data=await browser.storage.local.get(storageKeys)}catch(err2){return err("genExportData: Cannot get storage data",err2)}if(state.favicons){if(data.favicons_01?.length){let fullList=data.favicons_01;data.favicons_02?.length&&fullList.push(...data.favicons_02),data.favicons_03?.length&&fullList.push(...data.favicons_03),data.favicons_04?.length&&fullList.push(...data.favicons_04),data.favicons_05?.length&&fullList.push(...data.favicons_05),data.favicons=fullList}delete data.favicons_01,delete data.favicons_02,delete data.favicons_03,delete data.favicons_04,delete data.favicons_05}let backup={...data};if(backup.ver=browser.runtime.getManifest().version,state.keybindings){backup.keybindings={};let cmds=await browser.commands.getAll()??[];for(let cmd of cmds)cmd.name&&cmd.shortcut&&(backup.keybindings[cmd.name]=cmd.shortcut)}let backupJSON=JSON.stringify(backup),file=new Blob([backupJSON],{type:"application/json"}),now=Date.now(),date=uDate(now,"."),time=uTime(now,".");exportDataLink.value&&(exportDataLink.value.href=URL.createObjectURL(file),exportDataLink.value.download=`sidebery-data-${date}-${time}.json`,exportDataLink.value.title=`sidebery-data-${date}-${time}.json`)}return(_ctx,_cache)=>(_openBlock20(),_createElementBlock20("div",{class:"ConfigPopup",ref_key:"rootEl",ref:rootEl,onWheel},[_createElementVNode20("h2",_hoisted_131,_toDisplayString20(_unref20(translate)("settings.export_title")),1),_createVNode19(toggle_field_default,{label:"settings.backup_all",value:allSelected.value,"onUpdate:value":onAllChanged},null,8,["value"]),_createVNode19(toggle_field_default,{label:"settings.backup_settings",value:state.settings,"onUpdate:value":_cache[0]||(_cache[0]=$event=>state.settings=$event)},null,8,["value"]),state.hasStyles?(_openBlock20(),_createBlock4(toggle_field_default,{key:0,label:"settings.backup_styles",value:state.styles,"onUpdate:value":_cache[1]||(_cache[1]=$event=>state.styles=$event)},null,8,["value"])):_createCommentVNode9("v-if",!0),_createVNode19(toggle_field_default,{label:"settings.backup_containers",value:state.containers,"onUpdate:value":_cache[2]||(_cache[2]=$event=>state.containers=$event)},null,8,["value"]),_createVNode19(toggle_field_default,{label:"settings.backup_snapshots",value:state.snapshots,"onUpdate:value":_cache[3]||(_cache[3]=$event=>state.snapshots=$event)},null,8,["value"]),_createVNode19(toggle_field_default,{label:"settings.backup_favicons",value:state.favicons,"onUpdate:value":_cache[4]||(_cache[4]=$event=>state.favicons=$event)},null,8,["value"]),_createVNode19(toggle_field_default,{label:"settings.backup_kb",value:state.keybindings,"onUpdate:value":_cache[5]||(_cache[5]=$event=>state.keybindings=$event)},null,8,["value"]),_createElementVNode20("div",_hoisted_228,[_createElementVNode20("a",{class:"btn",ref_key:"exportDataLink",ref:exportDataLink,onMouseenter:genExportData},_toDisplayString20(_unref20(translate)("settings.help_exp_data")),545)])],544))}});import{defineComponent as _defineComponent21}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref21,toDisplayString as _toDisplayString21,createElementVNode as _createElementVNode21,createVNode as _createVNode20,openBlock as _openBlock21,createElementBlock as _createElementBlock21,createCommentVNode as _createCommentVNode10}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref18,reactive as reactive9,computed as computed8,onMounted as onMounted18}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_138={class:"title"},_hoisted_229={key:0,class:"error-msg"},_hoisted_321=["data-inactive"],popup_import_config_default=_defineComponent21({__name:"popup.import-config",props:{importedData:{type:Object,default:()=>({})}},setup(__props){let props=__props,rootEl=ref18(null),state=reactive9({errorMsg:"",settings:!1,styles:!1,containers:!1,snapshots:!1,favicons:!1,keybindings:!1,permNeeded:!1}),permWebData=!1,permTabHide=!1,allSelected=computed8(()=>(settingsInactive.value||state.settings)&&(stylesInactive.value||state.styles)&&(containersInactive.value||state.containers)&&(snapshotsInactive.value||state.snapshots)&&(faviconsInactive.value||state.favicons)&&(keybindingsInactive.value||state.keybindings)),settingsInactive=computed8(()=>{let data=props.importedData;return!data.settings&&!data.sidebar&&!data.contextMenu&&!data.panels_v4&&!data.tabsMenu&&!data.bookmarksMenu}),stylesInactive=computed8(()=>{let data=props.importedData;return!data.cssVars&&!data.sidebarCSS&&!data.groupCSS}),containersInactive=computed8(()=>{let data=props.importedData,cKeysLen=data.containers?Object.keys(data.containers).length:0,cv4KeysLen=data.containers_v4?Object.keys(data.containers_v4).length:0;return!cKeysLen&&!cv4KeysLen}),snapshotsInactive=computed8(()=>{let data=props.importedData,sLen=data.snapshots?.length,sv4Len=data.snapshots_v4?.length;return!sLen&&!sv4Len}),faviconsInactive=computed8(()=>{let data=props.importedData;return!data.favicons||!data.favHashes||!data.favDomains}),keybindingsInactive=computed8(()=>!props.importedData.keybindings),importInactive=computed8(()=>!state.settings&&!state.styles&&!state.containers&&!state.snapshots&&!state.favicons&&!state.keybindings);onMounted18(()=>{if(Info.getMajVer(props.importedData.ver)===void 0){state.errorMsg=translate("settings.backup_parse_err"),warn("Backup import: Cannot get backup major version");return}if(Info.majorVersion===void 0){err("Backup import: Cannot get current major version");return}settingsInactive.value||(state.settings=!0),stylesInactive.value||(state.styles=!0),containersInactive.value||(state.containers=!0),snapshotsInactive.value||(state.snapshots=!0),faviconsInactive.value||(state.favicons=!0),keybindingsInactive.value||(state.keybindings=!0),checkPermissions()});function onAllChanged(){allSelected.value?(settingsInactive.value||(state.settings=!1),stylesInactive.value||(state.styles=!1),containersInactive.value||(state.containers=!1),snapshotsInactive.value||(state.snapshots=!1),faviconsInactive.value||(state.favicons=!1),keybindingsInactive.value||(state.keybindings=!1)):(settingsInactive.value||(state.settings=!0),stylesInactive.value||(state.styles=!0),containersInactive.value||(state.containers=!0),snapshotsInactive.value||(state.snapshots=!0),faviconsInactive.value||(state.favicons=!0),keybindingsInactive.value||(state.keybindings=!0))}function onWheel(e){if(!rootEl.value)return;let scrollOffset=rootEl.value.scrollTop,maxScrollOffset=rootEl.value.scrollHeight-rootEl.value.offsetHeight;scrollOffset===0&&e.deltaY<0&&e.preventDefault(),scrollOffset===maxScrollOffset&&e.deltaY>0&&e.preventDefault()}async function importData(){let backup=cloneObject(props.importedData),toStore={},atLeastOne=!1,containersIds;if(state.containers)try{containersIds=await importContainers(backup,toStore),atLeastOne=!0}catch(err2){return err("Backup import: Cannot import containers",err2)}if(state.settings&&(importSettings(backup,toStore),importSidebar(backup,toStore,containersIds),importContextMenu(backup,toStore),atLeastOne=!0),state.styles&&(await importStyles(backup,toStore),atLeastOne=!0),state.snapshots){try{await importSnapshots(backup,toStore)}catch(err2){return err("Backup import: Cannot import snapshots:",err2)}atLeastOne=!0}if(state.favicons){try{await importFavicons(backup,toStore)}catch(err2){return err("Backup import: Cannot import favicons:",err2)}atLeastOne=!0}if(state.keybindings){try{importKeybindings(backup,toStore)}catch(err2){return err("Backup import: Cannot import keybindings:",err2)}atLeastOne=!0}atLeastOne&&(await Store.set(toStore),browser.runtime.reload())}function checkPermissions(){let backup=props.importedData,webData=!1,tabsHide=!1;permWebData=!1,permTabHide=!1,state.permNeeded=!1;let containers=backup.containers??backup.containers_v4;if(state.containers&&containers){for(let ctr of Object.values(containers))if(ctr.proxified&&(webData=!0),ctr.includeHostsActive&&(webData=!0),ctr.excludeHostsActive&&(webData=!0),ctr.reopenRulesActive&&(webData=!0),ctr.userAgentActive&&(webData=!0),webData)break}state.settings&&backup.settings&&(backup.settings.hideInact&&(tabsHide=!0),backup.settings.hideFoldedTabs&&(tabsHide=!0)),webData&&!Permissions.reactive.webData&&(permWebData=!0,state.permNeeded=!0),tabsHide&&!Permissions.reactive.tabHide&&(permTabHide=!0,state.permNeeded=!0)}function requestPermissions(){let origins=["<all_urls>"],permissions=["webRequest","webRequestBlocking","proxy"];permWebData&&(origins.push("<all_urls>"),permissions.push("webRequest","webRequestBlocking")),permTabHide&&permissions.push("tabHide"),!(!origins.length&&!permissions.length)&&browser.permissions.request({origins,permissions}).then(allowed=>{permWebData&&(permWebData=!allowed),permTabHide&&(permTabHide=!allowed),state.permNeeded=!allowed})}async function importContainers(backup,toStore){if(backup.containers_v4&&(backup.containers=Containers.upgradeV4Containers(backup.containers_v4)),!backup.containers)throw"No containers data";let ffContainers=await browser.contextualIdentities.query({}),storage=await browser.storage.local.get({containers:{}});storage.containers||(storage.containers={});let oldNewContainersMap={};for(let ctr of Object.values(cloneObject(backup.containers))){Containers.updateReopeningRules(ctr);let ffCtr=ffContainers.find(c=>c.name===ctr.name&&c.icon===ctr.icon&&c.color===ctr.color);ctr=recreateNormalizedObject(ctr,DEFAULT_CONTAINER),ffCtr||(ffCtr=await browser.contextualIdentities.create({name:ctr.name,color:ctr.color,icon:ctr.icon})),ffCtr&&(oldNewContainersMap[ctr.id]=ffCtr.cookieStoreId,ctr.id=ffCtr.cookieStoreId,storage.containers[ctr.id]=ctr)}return toStore.containers=storage.containers,oldNewContainersMap}function importSettings(backup,toStore){backup.settings&&(toStore.settings=recreateNormalizedObject(backup.settings,DEFAULT_SETTINGS))}function importSidebar(backup,toStore,containersIds={}){if(backup.panels_v4&&!backup.sidebar&&(backup.sidebar=getSidebarConfigFromV4(backup.panels_v4)),!backup.sidebar)return;let nav=backup.sidebar?.nav??[],panels=backup.sidebar?.panels??{};for(let id of nav){let panel=panels[id];isTabsPanel(panel)&&(panel.newTabCtx=containersIds[panel.newTabCtx]??"none",panel.moveRules?panel.moveRules=panel.moveRules.map(rule=>{if(rule.containerId){let newId=containersIds[rule.containerId];newId?rule.containerId=newId:(delete rule.containerId,rule.active=!1)}return rule}):panel.moveRules=[])}toStore.sidebar=backup.sidebar}function importContextMenu(backup,toStore){!backup.contextMenu?.tabs&&backup.tabsMenu&&(backup.contextMenu||(backup.contextMenu={}),backup.contextMenu.tabs=Menu.upgradeMenuConf(backup.tabsMenu)),!backup.contextMenu?.bookmarks&&backup.bookmarksMenu&&(backup.contextMenu||(backup.contextMenu={}),backup.contextMenu.bookmarks=Menu.upgradeMenuConf(backup.bookmarksMenu)),backup.contextMenu&&(toStore.contextMenu=backup.contextMenu)}async function importStyles(backup,toStore){let storage=await browser.storage.local.get(["sidebarCSS","groupCSS"]),sidebarCSS="",groupCSS="";if(storage.sidebarCSS&&(sidebarCSS=`/* OLD STYLES
${storage.sidebarCSS}
*/`),backup.sidebarCSS&&(sidebarCSS=backup.sidebarCSS+`

`+sidebarCSS),sidebarCSS=sidebarCSS.trim(),storage.groupCSS&&(groupCSS=`/* OLD STYLES
${storage.groupCSS}
*/`),backup.groupCSS&&(groupCSS=backup.groupCSS+`

`+groupCSS),groupCSS=groupCSS.trim(),backup.cssVars){let varsCSS=Styles.convertVarsToCSS(backup.cssVars);varsCSS&&(sidebarCSS=varsCSS+`

`+sidebarCSS,groupCSS=varsCSS+`

`+groupCSS)}sidebarCSS&&(toStore.sidebarCSS=sidebarCSS.trim()),groupCSS&&(toStore.groupCSS=groupCSS.trim())}async function importSnapshots(backup,toStore){if(!backup.snapshots&&backup.snapshots_v4&&(backup.snapshots=Snapshots.convertFromV4(backup.snapshots_v4)),!backup.snapshots)throw"No snapshots data";let storage;try{storage=await browser.storage.local.get("snapshots")}catch(err2){return err("importSnapshots: Cannot get stored snapshots",err2)}storage.snapshots||(storage.snapshots=[]);let backupSnapshots=[];for(let i=0;i<backup.snapshots.length;i++){let backupSnapshot=backup.snapshots[i];if(storage.snapshots.find(s=>s.id===backupSnapshot.id))continue;let backupNormSnapshot=Snapshots.getNormalizedSnapshot(backup.snapshots,i);backupNormSnapshot&&(Snapshots.updateInternalUrls(backupNormSnapshot),backupSnapshots.push(backupNormSnapshot))}if(!backupSnapshots.length)return;let storedSnapshots=[];for(let i=0;i<storage.snapshots.length;i++){let storedNormSnapshot=Snapshots.getNormalizedSnapshot(storage.snapshots,i);storedNormSnapshot&&storedSnapshots.push(storedNormSnapshot)}let allNormSnapshots=storedSnapshots.concat(backupSnapshots);allNormSnapshots.sort((a,b)=>a.time-b.time);let allSnapshots=[];for(let i=0;i<allNormSnapshots.length;i++){let normSnapshot=allNormSnapshots[i];Snapshots.minimizeSnapshot(allSnapshots,normSnapshot),allSnapshots.push(normSnapshot)}toStore.snapshots=allSnapshots}async function importFavicons(backup,toStore){if(!backup.favicons||!backup.favHashes||!backup.favDomains)throw"No favicons data";let favData;try{favData=await loadFaviconsData()}catch(err2){return err("importFavicons: Cannot get stored favicons",err2)}let index=favData.favicons.length;if(index>=MAX_COUNT_LIMIT)return warn("importFavicons: Exceeding the limit");let oldNewIndexes=new Map;for(let backupDomain of Object.keys(backup.favDomains)){let backupDomainInfo=backup.favDomains[backupDomain];if(favData.favDomains[backupDomain])continue;let backupIndex=backupDomainInfo.index,backupFavicon=backup.favicons[backupIndex],backupHash=backup.favHashes[backupIndex];if(!backupFavicon||backupHash===void 0)continue;let existedIndex=favData.favHashes.indexOf(backupHash),reusedIndex=oldNewIndexes.get(backupIndex);existedIndex!==-1&&(backupDomainInfo.index=existedIndex,favData.favicons[existedIndex]=backupFavicon,favData.favHashes[existedIndex]=backupHash,favData.favDomains[backupDomain]=backupDomainInfo),reusedIndex!==void 0?(backupDomainInfo.index=reusedIndex,favData.favicons[reusedIndex]=backupFavicon,favData.favHashes[reusedIndex]=backupHash,favData.favDomains[backupDomain]=backupDomainInfo):(oldNewIndexes.set(backupIndex,index),backupDomainInfo.index=index,favData.favicons[index]=backupFavicon,favData.favHashes[index]=backupHash,favData.favDomains[backupDomain]=backupDomainInfo,index++)}toStore.favicons_01=favData.favicons,toStore.favHashes=favData.favHashes,toStore.favDomains=favData.favDomains}function importKeybindings(backup,toStore){if(!backup.keybindings)throw"No keybindings data";for(let name of Object.keys(backup.keybindings)){let shortcut=backup.keybindings[name];browser.commands.update({name,shortcut})}}return(_ctx,_cache)=>(_openBlock21(),_createElementBlock21("div",{class:"ConfigPopup",ref_key:"rootEl",ref:rootEl,onWheel},[_createElementVNode21("h2",_hoisted_138,_toDisplayString21(_unref21(translate)("settings.import_title")),1),_createVNode20(toggle_field_default,{label:"settings.backup_all",value:allSelected.value,"onUpdate:value":onAllChanged},null,8,["value"]),_createVNode20(toggle_field_default,{label:"settings.backup_settings",value:state.settings,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>state.settings=$event),checkPermissions],inactive:settingsInactive.value||!!state.errorMsg},null,8,["value","inactive"]),_createVNode20(toggle_field_default,{label:"settings.backup_styles",value:state.styles,"onUpdate:value":_cache[1]||(_cache[1]=$event=>state.styles=$event),inactive:stylesInactive.value||!!state.errorMsg},null,8,["value","inactive"]),_createVNode20(toggle_field_default,{label:"settings.backup_containers",value:state.containers,"onUpdate:value":[_cache[2]||(_cache[2]=$event=>state.containers=$event),checkPermissions],inactive:containersInactive.value||!!state.errorMsg},null,8,["value","inactive"]),_createVNode20(toggle_field_default,{label:"settings.backup_snapshots",value:state.snapshots,"onUpdate:value":_cache[3]||(_cache[3]=$event=>state.snapshots=$event),inactive:snapshotsInactive.value||!!state.errorMsg},null,8,["value","inactive"]),_createVNode20(toggle_field_default,{label:"settings.backup_favicons",value:state.favicons,"onUpdate:value":_cache[4]||(_cache[4]=$event=>state.favicons=$event),inactive:faviconsInactive.value||!!state.errorMsg},null,8,["value","inactive"]),_createVNode20(toggle_field_default,{label:"settings.backup_kb",value:state.keybindings,"onUpdate:value":_cache[5]||(_cache[5]=$event=>state.keybindings=$event),inactive:keybindingsInactive.value||!!state.errorMsg},null,8,["value","inactive"]),state.errorMsg?(_openBlock21(),_createElementBlock21("div",_hoisted_229,_toDisplayString21(state.errorMsg),1)):_createCommentVNode10("v-if",!0),state.errorMsg?_createCommentVNode10("v-if",!0):(_openBlock21(),_createElementBlock21("div",{key:1,class:"ctrls","data-inactive":importInactive.value},[state.permNeeded?(_openBlock21(),_createElementBlock21("a",{key:0,class:"btn",onClick:requestPermissions},_toDisplayString21(_unref21(translate)("settings.help_imp_perm")),1)):(_openBlock21(),_createElementBlock21("a",{key:1,class:"btn",onClick:importData},_toDisplayString21(_unref21(translate)("settings.help_imp_data")),1))],8,_hoisted_321))],544))}});var _hoisted_139=_createElementVNode22("span",{class:"header-shadow"},null,-1),_hoisted_230={class:"ctrls"},_hoisted_325={class:"btn",type:"file"},_hoisted_418={class:"label"},_hoisted_511={key:0,class:"btn",tabindex:"-1",href:"https://github.com/mbnuqw/sidebery/issues/new?template=Bug_report.md"},_hoisted_69={key:1,class:"btn",tabindex:"-1",href:"https://github.com/mbnuqw/sidebery/issues/new?template=Feature_request.md"},_hoisted_78={class:"ctrls"},settings_help_default=_defineComponent22({__name:"settings.help",setup(__props){let el=ref19(null);onMounted19(()=>SetupPage.registerEl("settings_help",el.value));function resetSettings(){window.confirm(translate("settings.reset_confirm"))&&(Settings.resetSettings(),Settings.saveSettings())}function importData(importEvent){let file=importEvent.target.files?.[0];if(!file)return;let reader=new FileReader;reader.onload=fileEvent=>{if(!fileEvent.target)return err("Cannot import data: No file content");let jsonStr=fileEvent.target.result;if(!jsonStr||typeof jsonStr!="string"){err("Cannot import data: Wrong file content"),SetupPage.reactive.importedData={};return}try{SetupPage.reactive.importedData=JSON.parse(jsonStr)}catch(err2){err("Cannot import data",err2),SetupPage.reactive.importedData={}}},reader.readAsText(file)}async function showDbgDetails(){let dbg=await SetupPage.getDbgDetails();SetupPage.reactive.detailsText=JSON.stringify(dbg,null,2)}function reloadAddon(){browser.runtime.reload()}return(_ctx,_cache)=>(_openBlock22(),_createElementBlock22("section",{ref_key:"el",ref:el},[_createElementVNode22("h2",null,_toDisplayString22(_unref22(translate)("settings.help_title")),1),_hoisted_139,_createElementVNode22("div",_hoisted_230,[_createElementVNode22("a",{class:"btn",onClick:_cache[0]||(_cache[0]=$event=>_unref22(SetupPage).reactive.exportDialog=!0)},_toDisplayString22(_unref22(translate)("settings.help_exp_data")),1),_createElementVNode22("div",_hoisted_325,[_createElementVNode22("div",_hoisted_418,_toDisplayString22(_unref22(translate)("settings.help_imp_data")),1),_createElementVNode22("input",{type:"file",accept:"application/json",onInput:importData},null,32)]),_createElementVNode22("div",{class:"btn",onClick:_cache[1]||(_cache[1]=$event=>showDbgDetails())},_toDisplayString22(_unref22(translate)("settings.debug_info")),1),_createElementVNode22("a",{class:"btn",onClick:_cache[2]||(_cache[2]=$event=>_unref22(SetupPage).copyDevtoolsUrl())},_toDisplayString22(_unref22(translate)("settings.copy_devtools_url")),1),_unref22(LANG)==="en"?(_openBlock22(),_createElementBlock22("a",_hoisted_511,_toDisplayString22(_unref22(translate)("settings.repo_bug")),1)):_createCommentVNode11("v-if",!0),_unref22(LANG)==="en"?(_openBlock22(),_createElementBlock22("a",_hoisted_69,_toDisplayString22(_unref22(translate)("settings.repo_feature")),1)):_createCommentVNode11("v-if",!0)]),_createElementVNode22("div",_hoisted_78,[_createElementVNode22("div",{class:"btn -warn",onClick:reloadAddon},_toDisplayString22(_unref22(translate)("settings.reload_addon")),1),_createElementVNode22("div",{class:"btn -warn",onClick:resetSettings},_toDisplayString22(_unref22(translate)("settings.reset_settings")),1)]),_createVNode21(_Transition3,{name:"popup"},{default:_withCtx3(()=>[_unref22(SetupPage).reactive.exportDialog?(_openBlock22(),_createElementBlock22("div",{key:0,class:"popup-layer",onClick:_cache[4]||(_cache[4]=$event=>_unref22(SetupPage).reactive.exportDialog=!1)},[_createElementVNode22("div",{class:"popup-box",onClick:_cache[3]||(_cache[3]=_withModifiers5(()=>{},["stop"]))},[_createVNode21(popup_export_config_default)])])):_createCommentVNode11("v-if",!0)]),_:1}),_createVNode21(_Transition3,{name:"popup"},{default:_withCtx3(()=>[_unref22(SetupPage).reactive.importedData?(_openBlock22(),_createElementBlock22("div",{key:0,class:"popup-layer",onClick:_cache[7]||(_cache[7]=$event=>_unref22(SetupPage).reactive.importedData=null)},[_createElementVNode22("div",{class:"popup-box",onClick:_cache[6]||(_cache[6]=_withModifiers5(()=>{},["stop"]))},[_createVNode21(popup_import_config_default,{importedData:_unref22(SetupPage).reactive.importedData,onClose:_cache[5]||(_cache[5]=$event=>_unref22(SetupPage).reactive.importedData=null)},null,8,["importedData"])])])):_createCommentVNode11("v-if",!0)]),_:1})],512))}});import{defineComponent as _defineComponent23}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref23,toDisplayString as _toDisplayString23,createElementVNode as _createElementVNode23,createVNode as _createVNode22,openBlock as _openBlock23,createElementBlock as _createElementBlock23}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref20,onMounted as onMounted20}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_140=["data-highlight"],_hoisted_231=["data-highlight"],_hoisted_326=["data-highlight"],_hoisted_419=["data-highlight"],_hoisted_512=["data-highlight"],_hoisted_610=["data-highlight"],popup_permissions_default=_defineComponent23({__name:"popup.permissions",setup(__props){let rootEl=ref20(null),all_urls=ref20(null),tab_hide=ref20(null),clipboard_write=ref20(null),historyEl=ref20(null),downloadsEl=ref20(null),bookmarksEl=ref20(null);onMounted20(()=>{SetupPage.registerEl("all_urls",all_urls.value),SetupPage.registerEl("tab_hide",tab_hide.value),SetupPage.registerEl("clipboard_write",clipboard_write.value),SetupPage.registerEl("history",historyEl.value),SetupPage.registerEl("downloads",downloadsEl.value),SetupPage.registerEl("bookmarks",bookmarksEl.value)});function onWheel(e){if(!rootEl.value)return;let scrollOffset=rootEl.value.scrollTop,maxScrollOffset=rootEl.value.scrollHeight-rootEl.value.offsetHeight;scrollOffset===0&&e.deltaY<0&&e.preventDefault(),scrollOffset===maxScrollOffset&&e.deltaY>0&&e.preventDefault()}function onHighlighClick(name){SetupPage.reactive.permissions===name&&window.history.replaceState({},"",location.origin+location.pathname),SetupPage.reactive.permissions=!0}function togglePermAllUrls(){let origins=["<all_urls>"],p=["webRequest","webRequestBlocking","proxy"];Permissions.reactive.webData?browser.permissions.remove({origins,permissions:p}):browser.permissions.request({origins,permissions:p})}function togglePermBookmarks(){Permissions.reactive.bookmarks?browser.permissions.remove({permissions:["bookmarks"]}):browser.permissions.request({origins:[],permissions:["bookmarks"]})}function togglePermTabHide(){Permissions.reactive.tabHide?browser.permissions.remove({permissions:["tabHide"]}):browser.permissions.request({origins:[],permissions:["tabHide"]})}function togglePermClipboardWrite(){let p=["clipboardWrite"];Permissions.reactive.clipboardWrite?browser.permissions.remove({permissions:p}):browser.permissions.request({origins:[],permissions:p})}function togglePermHistory(){let p=["history"];Permissions.reactive.history?browser.permissions.remove({permissions:p}):browser.permissions.request({origins:[],permissions:p})}function togglePermDownloads(){let p=["downloads"];Permissions.reactive.downloads?browser.permissions.remove({permissions:p}):browser.permissions.request({origins:[],permissions:p})}return(_ctx,_cache)=>(_openBlock23(),_createElementBlock23("div",{class:"ConfigPopup",ref_key:"rootEl",ref:rootEl,onWheel},[_createElementVNode23("h2",null,_toDisplayString23(_unref23(translate)("settings.permissions_title")),1),_createElementVNode23("div",{class:"permission",ref_key:"all_urls",ref:all_urls,"data-highlight":_unref23(SetupPage).reactive.permissions==="all_urls",onClick:_cache[0]||(_cache[0]=$event=>onHighlighClick("all_urls"))},[_createVNode22(toggle_field_default,{label:"settings.all_urls_label",value:_unref23(Permissions).reactive.webData,note:_unref23(translate)("settings.all_urls_info"),"onUpdate:value":togglePermAllUrls},null,8,["value","note"])],8,_hoisted_140),_createElementVNode23("div",{class:"permission",ref_key:"bookmarksEl",ref:bookmarksEl,"data-highlight":_unref23(SetupPage).reactive.permissions==="bookmarks",onClick:_cache[1]||(_cache[1]=$event=>onHighlighClick("bookmarks"))},[_createVNode22(toggle_field_default,{label:"settings.perm.bookmarks_label",value:_unref23(Permissions).reactive.bookmarks,note:_unref23(translate)("settings.perm.bookmarks_info"),"onUpdate:value":togglePermBookmarks},null,8,["value","note"])],8,_hoisted_231),_createElementVNode23("div",{class:"permission",ref_key:"tab_hide",ref:tab_hide,"data-highlight":_unref23(SetupPage).reactive.permissions==="tab_hide",onClick:_cache[2]||(_cache[2]=$event=>onHighlighClick("tab_hide"))},[_createVNode22(toggle_field_default,{label:"settings.tab_hide_label",value:_unref23(Permissions).reactive.tabHide,note:_unref23(translate)("settings.tab_hide_info"),"onUpdate:value":togglePermTabHide},null,8,["value","note"])],8,_hoisted_326),_createElementVNode23("div",{class:"permission",ref_key:"clipboard_write",ref:clipboard_write,"data-highlight":_unref23(SetupPage).reactive.permissions==="clipboard_write",onClick:_cache[3]||(_cache[3]=$event=>onHighlighClick("clipboard_write"))},[_createVNode22(toggle_field_default,{label:"settings.clipboard_write_label",value:_unref23(Permissions).reactive.clipboardWrite,note:_unref23(translate)("settings.clipboard_write_info"),"onUpdate:value":togglePermClipboardWrite},null,8,["value","note"])],8,_hoisted_419),_createElementVNode23("div",{class:"permission",ref_key:"historyEl",ref:historyEl,"data-highlight":_unref23(SetupPage).reactive.permissions==="history",onClick:_cache[4]||(_cache[4]=$event=>onHighlighClick("history"))},[_createVNode22(toggle_field_default,{label:"settings.history_label",value:_unref23(Permissions).reactive.history,note:_unref23(translate)("settings.history_info"),"onUpdate:value":togglePermHistory},null,8,["value","note"])],8,_hoisted_512),_createElementVNode23("div",{class:"permission",ref_key:"downloadsEl",ref:downloadsEl,"data-highlight":_unref23(SetupPage).reactive.permissions==="downloads",onClick:_cache[5]||(_cache[5]=$event=>onHighlighClick("downloads"))},[_createVNode22(toggle_field_default,{label:"settings.perm.downloads_label",value:_unref23(Permissions).reactive.downloads,note:_unref23(translate)("settings.perm.downloads_info"),"onUpdate:value":togglePermDownloads},null,8,["value","note"])],8,_hoisted_610)],544))}});import{createStaticVNode as _createStaticVNode,openBlock as _openBlock24,createElementBlock as _createElementBlock24}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_141=_createStaticVNode('<a class="github" tabindex="-1" href="https://github.com/mbnuqw/sidebery" target="_blank"><svg><use xlink:href="#icon_github"></use></svg></a><svg class="logo"><use xlink:href="#icon_sidebery"></use></svg><a class="amo" tabindex="-1" href="https://addons.mozilla.org/en-US/firefox/addon/sidebery/" target="_blank"><svg><use xlink:href="#icon_amo"></use></svg></a>',3),_hoisted_420=[_hoisted_141];function render(_ctx,_cache){return _openBlock24(),_createElementBlock24("footer",null,_hoisted_420)}var _C={};_C.render=render;var footer_section_default=_C;var _hoisted_148={class:"btw"},settings_default=_defineComponent24({__name:"settings",setup(__props){let rootEl=ref21(null),scrollY=0;onActivated(()=>{scrollY&&rootEl.value&&(rootEl.value.scrollTop=scrollY)});function onScroll(e){scrollY=e.target.scrollTop,!SetupPage.reactive.navLock&&SetupPage.updateActiveSection(e.target.scrollTop)}return(_ctx,_cache)=>(_openBlock25(),_createElementBlock25("div",{class:"Settings",ref_key:"rootEl",ref:rootEl,onScrollPassive:onScroll},[_createVNode23(settings_general_default),_createVNode23(settings_menu_default),_createVNode23(settings_navbar_default),_createVNode23(settings_group_default),_createVNode23(settings_containers_default),_createVNode23(settings_dnd_default),_createVNode23(settings_search_default),_createVNode23(settings_tabs_default),_createVNode23(settings_bookmarks_default),_createVNode23(settings_history_default),_createVNode23(settings_appearance_default),_createVNode23(settings_mouse_default),_createVNode23(settings_snapshots_default),_createVNode23(settings_sync_default),_createVNode23(settings_help_default),_createVNode23(footer_section_default),_createElementVNode25("div",_hoisted_148,[_createElementVNode25("p",null,"v"+_toDisplayString24(_unref24(Info).reactive.addonVer),1)]),_createVNode23(_Transition4,{name:"popup"},{default:_withCtx4(()=>[_unref24(SetupPage).reactive.permissions?(_openBlock25(),_createElementBlock25("div",{key:0,class:"popup-layer",onClick:_cache[1]||(_cache[1]=(...args)=>_unref24(SetupPage).closePermissionsPopup&&_unref24(SetupPage).closePermissionsPopup(...args))},[_createElementVNode25("div",{class:"popup-box",onClick:_cache[0]||(_cache[0]=_withModifiers6(()=>{},["stop"]))},[_createVNode23(popup_permissions_default)])])):_createCommentVNode12("v-if",!0)]),_:1})],544))}});import{defineComponent as _defineComponent26}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref26,toDisplayString as _toDisplayString26,createElementVNode as _createElementVNode27,renderList as _renderList4,Fragment as _Fragment4,openBlock as _openBlock27,createElementBlock as _createElementBlock27,createBlock as _createBlock5,createCommentVNode as _createCommentVNode14,withModifiers as _withModifiers8,createVNode as _createVNode24}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref22,reactive as reactive10,computed as computed10,onMounted as onMounted21}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent25}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref25,createElementVNode as _createElementVNode26,openBlock as _openBlock26,createElementBlock as _createElementBlock26,withModifiers as _withModifiers7,createCommentVNode as _createCommentVNode13,toDisplayString as _toDisplayString25}from"/vendor/vue.runtime.esm-browser.prod.js";import{computed as computed9}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_149=["title","data-separator","data-selected"],_hoisted_237=["title"],_hoisted_327=_createElementVNode26("svg",null,[_createElementVNode26("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_421=[_hoisted_327],_hoisted_513={class:"opt-title"},_hoisted_611=["title"],_hoisted_79=_createElementVNode26("svg",null,[_createElementVNode26("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_88=[_hoisted_79],_hoisted_98=["title"],_hoisted_108=_createElementVNode26("svg",null,[_createElementVNode26("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_1113=[_hoisted_108],_hoisted_1211=["title"],_hoisted_1310=_createElementVNode26("svg",null,[_createElementVNode26("use",{"xlink:href":"#icon_remove"})],-1),_hoisted_1410=[_hoisted_1310],menu_editor_option_default=_defineComponent25({__name:"menu-editor.option",props:{type:{},title:{},selected:{type:Boolean},isTopLvl:{type:Boolean},option:{},groupTitle:{}},emits:["select","createSubMenu","downOpt","upOpt","disableOpt"],setup(__props,{emit:__emit}){let props=__props,emit=__emit,shrinkedTitle=computed9(()=>props.groupTitle&&props.title?.startsWith(props.groupTitle)?Menu.shrinkLabel(props.groupTitle,props.title)??props.title:props.title);return(_ctx,_cache)=>(_openBlock26(),_createElementBlock26("div",{class:"opt",title:_ctx.title,"data-separator":_ctx.option.startsWith("separator"),"data-selected":_ctx.selected,onClick:_cache[4]||(_cache[4]=$event=>emit("select",_ctx.option))},[_ctx.isTopLvl?(_openBlock26(),_createElementBlock26("div",{key:0,class:"opt-btn -in",title:_unref25(translate)("menu.editor.create_sub_tooltip"),onClick:_cache[0]||(_cache[0]=_withModifiers7($event=>emit("createSubMenu",_ctx.type,_ctx.option),["stop"]))},_hoisted_421,8,_hoisted_237)):_createCommentVNode13("v-if",!0),_createElementVNode26("div",_hoisted_513,_toDisplayString25(shrinkedTitle.value),1),_createElementVNode26("div",{class:"opt-btn",title:_unref25(translate)("menu.editor.down_tooltip"),onClick:_cache[1]||(_cache[1]=_withModifiers7($event=>emit("downOpt",_ctx.type,_ctx.option),["stop"]))},_hoisted_88,8,_hoisted_611),_createElementVNode26("div",{class:"opt-btn -up",title:_unref25(translate)("menu.editor.up_tooltip"),onClick:_cache[2]||(_cache[2]=_withModifiers7($event=>emit("upOpt",_ctx.type,_ctx.option),["stop"]))},_hoisted_1113,8,_hoisted_98),_createElementVNode26("div",{class:"opt-btn -rm",title:_unref25(translate)("menu.editor.disable_tooltip"),onClick:_cache[3]||(_cache[3]=_withModifiers7($event=>emit("disableOpt",_ctx.type,_ctx.option),["stop"]))},_hoisted_1410,8,_hoisted_1211)],8,_hoisted_149))}});var _hoisted_150=["data-type"],_hoisted_238={key:0,class:"menu-group -dis"},_hoisted_328=["title","onClick"],_hoisted_424={class:"opt-title"},_hoisted_514={class:"ctrls"},_hoisted_612=["data-type"],_hoisted_710={key:0,class:"menu-group -dis"},_hoisted_89=["title","onClick"],_hoisted_99={class:"opt-title"},_hoisted_109={class:"ctrls"},_hoisted_1114=["data-type"],_hoisted_1212={key:0,class:"menu-group -dis"},_hoisted_1311=["title","onClick"],_hoisted_1411={class:"opt-title"},_hoisted_158={class:"ctrls"},_hoisted_167=["data-type"],_hoisted_177={key:0,class:"menu-group -dis"},_hoisted_186=["title","onClick"],_hoisted_196={class:"opt-title"},_hoisted_206={class:"ctrls"},menu_editor_default=_defineComponent26({__name:"menu-editor",setup(__props){let TABS_MENU_OPTS={undoRmTab:"menu.tab.undo",pin:"menu.tab.pin",reload:"menu.tab.reload",bookmark:"menu.tab.bookmark",moveToNewWin:"menu.tab.move_to_new_window",moveToWin:"menu.tab.move_to_window_",moveToPanel:"menu.tab.move_to_panel_label",moveToNewPanel:"menu.tab.move_to_new_panel",reopenInNewWin:"menu.tab.reopen_in_new_window",reopenInWin:"menu.tab.reopen_in_window",reopenInCtr:"menu.tab.reopen_in_ctr_",reopenInNewCtr:"menu.tab.reopen_in_new_container",openTabsInCtr:"menu.tab.open_in_ctr_",mute:"menu.tab.mute",duplicate:"menu.tab.duplicate",discard:"menu.tab.discard",copyTabsUrls:"menu.copy_urls",copyTabsTitles:"menu.copy_titles",editTabTitle:"menu.tab.edit_title",colorizeTab:"menu.tab.colorize_colors",group:"menu.tab.group",flatten:"menu.tab.flatten",urlConf:"menu.tab.url_conf",sortTabsByTitleAscending:"menu.tab.sort_by_title_asc",sortTabsByTitleDescending:"menu.tab.sort_by_title_des",sortTabsByUrlAscending:"menu.tab.sort_by_url_asc",sortTabsByUrlDescending:"menu.tab.sort_by_url_des",sortTabsByAccessTimeAscending:"menu.tab.sort_by_time_asc",sortTabsByAccessTimeDescending:"menu.tab.sort_by_time_des",sortTabsTreeByTitleAscending:"menu.tab.sort_tree_by_title_asc",sortTabsTreeByTitleDescending:"menu.tab.sort_tree_by_title_des",sortTabsTreeByUrlAscending:"menu.tab.sort_tree_by_url_asc",sortTabsTreeByUrlDescending:"menu.tab.sort_tree_by_url_des",sortTabsTreeByAccessTimeAscending:"menu.tab.sort_tree_by_time_asc",sortTabsTreeByAccessTimeDescending:"menu.tab.sort_tree_by_time_des",clearCookies:"menu.tab.clear_cookies",closeDescendants:"menu.tab.close_descendants",close:"menu.tab.close",closeBranch:"menu.tab.close_branch",closeTabsAbove:"menu.tab.close_above",closeTabsBelow:"menu.tab.close_below",closeOtherTabs:"menu.tab.close_other"},TABS_PANEL_MENU_OPTS={selectAllTabs:"menu.tabs_panel.sel_all",muteAllAudibleTabs:"menu.tabs_panel.mute_all_audible",closeTabsDuplicates:"menu.tabs_panel.dedup",undoRmTab:"menu.tab.undo",reloadTabs:"menu.tabs_panel.reload",discardTabs:"menu.tabs_panel.discard",collapseInactiveBranches:"menu.tabs_panel.collapse_inact_branches",closeTabs:"menu.tabs_panel.close",openPanelConfig:"menu.common.conf",openPanelConfigInSidebar:"menu.common.conf_in_sidebar",hidePanel:"menu.panels.hide_panel",removePanel:"menu.tabs_panel.remove_panel",bookmarkTabsPanel:"menu.tabs_panel.bookmark",restoreFromBookmarks:"menu.tabs_panel.restore_from_bookmarks",convertToBookmarksPanel:"menu.tabs_panel.convert_to_bookmarks_panel",sortAllTabsByTitleAscending:"menu.tabs_panel.sort_all_by_title_asc",sortAllTabsByTitleDescending:"menu.tabs_panel.sort_all_by_title_des",sortAllTabsByUrlAscending:"menu.tabs_panel.sort_all_by_url_asc",sortAllTabsByUrlDescending:"menu.tabs_panel.sort_all_by_url_des",sortAllTabsByAccessTimeAscending:"menu.tabs_panel.sort_all_by_time_asc",sortAllTabsByAccessTimeDescending:"menu.tabs_panel.sort_all_by_time_des"},BOOKMARKS_MENU_OPTS={openInNewWin:"menu.bookmark.open_in_new_window",openInNewPrivWin:"menu.bookmark.open_in_new_priv_window",openInNewPanel:"menu.bookmark.open_in_new_panel",openInPanel:"menu.bookmark.open_in_panel_",openInCtr:"menu.bookmark.open_in_ctr_",openAsBookmarksPanel:"menu.bookmark.open_as_bookmarks_panel",openAsTabsPanel:"menu.bookmark.open_as_tabs_panel",createBookmark:"menu.bookmark.create_bookmark",createFolder:"menu.bookmark.create_folder",createSeparator:"menu.bookmark.create_separator",sortByNameAscending:"menu.bookmark.sort_by_name_asc",sortByNameDescending:"menu.bookmark.sort_by_name_des",sortByLinkAscending:"menu.bookmark.sort_by_link_asc",sortByLinkDescending:"menu.bookmark.sort_by_link_des",sortByTimeAscending:"menu.bookmark.sort_by_time_asc",sortByTimeDescending:"menu.bookmark.sort_by_time_des",copyBookmarksUrls:"menu.copy_urls",copyBookmarksTitles:"menu.copy_titles",edit:"menu.bookmark.edit_bookmark",delete:"menu.bookmark.delete_bookmark",moveBookmarksTo:"menu.bookmark.move_to"},BOOKMARKS_PANEL_MENU_OPTS={collapseAllFolders:"menu.bookmark.collapse_all",switchViewMode:"menu.bookmark.switch_view",unloadPanelType:"menu.panels.unload",openPanelConfig:"menu.common.conf",openPanelConfigInSidebar:"menu.common.conf_in_sidebar",convertToTabsPanel:"menu.bookmark.convert_to_tabs_panel",hidePanel:"menu.panels.hide_panel",removePanel:"menu.tabs_panel.remove_panel"},menuNameTimeout,menuEditorTabsEl=ref22(null),menuEditorTabsPanelEl=ref22(null),menuEditorBookmarksEl=ref22(null),menuEditorBookmarksPanelEl=ref22(null),state=reactive10({selected:"",tabsConf:[],bookmarksConf:[],tabsPanelConf:[],bookmarksPanelConf:[]}),tabsMenu=computed10(()=>parseMenuConf(state.tabsConf)),disabledTabsMenu=computed10(()=>{let all=Object.keys(TABS_MENU_OPTS),active=state.tabsConf.reduce((a,v)=>typeof v=="string"?a.concat(v):a.concat(v.opts),[]);return all.filter(option=>!active.includes(option))}),tabsPanelMenu=computed10(()=>parseMenuConf(state.tabsPanelConf)),disabledTabsPanelMenu=computed10(()=>{let all=Object.keys(TABS_PANEL_MENU_OPTS),active=state.tabsPanelConf.reduce((a,v)=>typeof v=="string"?a.concat(v):a.concat(v.opts),[]);return all.filter(option=>!active.includes(option))}),bookmarksMenu=computed10(()=>parseMenuConf(state.bookmarksConf)),disabledBookmarksMenu=computed10(()=>{let all=Object.keys(BOOKMARKS_MENU_OPTS),active=state.bookmarksConf.reduce((a,v)=>typeof v=="string"?a.concat(v):a.concat(v.opts),[]);return all.filter(option=>!active.includes(option))}),bookmarksPanelMenu=computed10(()=>parseMenuConf(state.bookmarksPanelConf)),disabledBookmarksPanelMenu=computed10(()=>{let all=Object.keys(BOOKMARKS_PANEL_MENU_OPTS),active=state.bookmarksPanelConf.reduce((a,v)=>typeof v=="string"?a.concat(v):a.concat(v.opts),[]);return all.filter(option=>!active.includes(option))});(async()=>(await Menu.loadCtxMenu(),Menu.setupListeners(),state.tabsConf=Menu.tabsConf,state.bookmarksConf=Menu.bookmarksConf,state.tabsPanelConf=Menu.tabsPanelConf,state.bookmarksPanelConf=Menu.bookmarksPanelConf))(),onMounted21(()=>{SetupPage.registerEl("menu_editor_tabs",menuEditorTabsEl.value),SetupPage.registerEl("menu_editor_tabs_panel",menuEditorTabsPanelEl.value),SetupPage.registerEl("menu_editor_bookmarks",menuEditorBookmarksEl.value),SetupPage.registerEl("menu_editor_bookmarks_panel",menuEditorBookmarksPanelEl.value)});function parseMenuConf(conf){let out=[],group=null;for(let i=0;i<conf.length;i++){let item=conf[i];if(typeof item=="string")group||(group={type:"list",name:"",options:[],i},out.push(group)),group.options.push(item);else{let name=item.name?.startsWith("%")?translate(item.name.slice(1)):item.name;out.push({type:"sub",name,i,options:item.opts}),group=null}}return out}function onScroll(e){SetupPage.reactive.navLock||SetupPage.updateActiveSection(e.target.scrollTop)}function select(opt){state.selected===opt?state.selected="":state.selected=opt}function resetSelection(){state.selected=""}function moveSelected(e,type){state.selected&&(e.preventDefault(),e.deltaY>0&&downOpt(type,state.selected),e.deltaY<0&&upOpt(type,state.selected))}function resetTabsMenu(){Menu.tabsConf=cloneArray(TABS_MENU),state.tabsConf=Menu.tabsConf,Menu.saveCtxMenu()}function resetTabsPanelMenu(){Menu.tabsPanelConf=cloneArray(TABS_PANEL_MENU),Menu.saveCtxMenu(),state.tabsPanelConf=Menu.tabsPanelConf}function resetBookmarksMenu(){Menu.bookmarksConf=cloneArray(BOOKMARKS_MENU),state.bookmarksConf=Menu.bookmarksConf,Menu.saveCtxMenu()}function resetBookmarksPanelMenu(){Menu.bookmarksPanelConf=cloneArray(BOOKMARKS_PANEL_MENU),state.bookmarksPanelConf=Menu.bookmarksPanelConf,Menu.saveCtxMenu()}function restoreOption(type,opt){let menuConfig=getMenu(type);menuConfig&&(menuConfig.push(opt),Menu.saveCtxMenu())}function disableOpt(type,opt){let menuConfig=getMenu(type);if(menuConfig){for(let i=0;i<menuConfig.length;i++){let optConf=menuConfig[i];if(optConf===opt){menuConfig.splice(i,1);break}if(typeof optConf!="string"){let index=optConf.opts.indexOf(opt);if(index===-1)continue;optConf.opts.splice(index,1);break}}normalizeMenu(menuConfig),Menu.saveCtxMenu()}}function createSubMenu(type,opt){let menuConfig=getMenu(type);if(menuConfig){for(let i=0;i<menuConfig.length;i++)if(menuConfig[i]===opt){menuConfig.splice(i,1,{name:"",opts:[opt]});break}Menu.saveCtxMenu()}}function onSubMenuNameInput(type,i,value){let menuConfig=getMenu(type);if(!menuConfig)return;let optConf=menuConfig[i];!optConf||typeof optConf=="string"||(optConf.name=value,clearTimeout(menuNameTimeout),menuNameTimeout=setTimeout(()=>{Menu.saveCtxMenu()},500))}function downOpt(type,opt){let menuConfig=getMenu(type);if(menuConfig&&menuConfig[menuConfig.length-1]!==opt){for(let i=0;i<menuConfig.length;i++){let optConf=menuConfig[i];if(optConf===opt){menuConfig.splice(i,1);let nextOptConf=menuConfig[i];if(!nextOptConf)break;typeof nextOptConf=="string"?menuConfig.splice(i+1,0,opt):nextOptConf.opts.unshift(opt);break}if(typeof optConf!="string"){let index=optConf.opts.indexOf(opt);if(index===-1)continue;optConf.opts.splice(index,1),optConf.opts[index]?optConf.opts.splice(index+1,0,opt):menuConfig.splice(i+1,0,opt);break}}normalizeMenu(menuConfig),Menu.saveCtxMenu(500)}}function upOpt(type,opt){let menuConfig=getMenu(type);if(menuConfig&&menuConfig[0]!==opt){for(let i=0;i<menuConfig.length;i++){let optConf=menuConfig[i];if(optConf===opt){if(menuConfig.splice(i,1),optConf=menuConfig[i-1],!optConf)break;typeof optConf=="string"?menuConfig.splice(i-1,0,opt):optConf.opts.push(opt);break}if(typeof optConf!="string"){let index=optConf.opts.indexOf(opt);if(index===-1)continue;optConf.opts.splice(index,1),optConf.opts[index-1]?optConf.opts.splice(index-1,0,opt):menuConfig.splice(i,0,opt);break}}normalizeMenu(menuConfig),Menu.saveCtxMenu(500)}}function normalizeMenu(menu){for(let i=0;i<menu.length;i++){let optConf=menu[i];if(typeof optConf!="string"&&!optConf.opts.length){menu.splice(i,1),i--;continue}}}function createSeparator(type){let menu=getMenu(type);menu&&menu.push(String(Math.random()).replace("0.","separator-"))}function getMenu(type){return type==="tabs"?state.tabsConf:type==="bookmarks"?state.bookmarksConf:type==="tabsPanel"?state.tabsPanelConf:type==="bookmarksPanel"?state.bookmarksPanelConf:null}return(_ctx,_cache)=>(_openBlock27(),_createElementBlock27("div",{class:"MenuEditor",onClick:resetSelection,onScrollPassive:onScroll},[_createElementVNode27("section",{ref_key:"menuEditorTabsEl",ref:menuEditorTabsEl,onClick:_cache[1]||(_cache[1]=_withModifiers8(()=>{},["stop"])),onWheel:_cache[2]||(_cache[2]=$event=>moveSelected($event,"tabs"))},[_createElementVNode27("h2",null,_toDisplayString26(_unref26(translate)("menu.editor.tabs_title")),1),(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(tabsMenu.value,group=>(_openBlock27(),_createElementBlock27("div",{class:"menu-group","data-type":group.type},[group.type==="sub"?(_openBlock27(),_createBlock5(text_input_default,{key:0,class:"group-title",value:group.name,line:!0,or:_unref26(translate)("menu.editor.inline_group_title"),"onUpdate:value":$event=>onSubMenuNameInput("tabs",group.i,$event)},null,8,["value","or","onUpdate:value"])):_createCommentVNode14("v-if",!0),(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(group.options,opt=>(_openBlock27(),_createBlock5(menu_editor_option_default,{type:"tabs",title:_unref26(translate)(TABS_MENU_OPTS[opt]),selected:state.selected===opt,isTopLvl:group.type==="list",option:opt,groupTitle:group.name,onSelect:select,onCreateSubMenu:createSubMenu,onDownOpt:downOpt,onUpOpt:upOpt,onDisableOpt:disableOpt},null,8,["title","selected","isTopLvl","option","groupTitle"]))),256))],8,_hoisted_150))),256)),disabledTabsMenu.value.length?(_openBlock27(),_createElementBlock27("div",_hoisted_238,[(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(disabledTabsMenu.value,opt=>(_openBlock27(),_createElementBlock27("div",{class:"opt",title:_unref26(translate)(TABS_MENU_OPTS[opt]),onClick:$event=>restoreOption("tabs",opt)},[_createElementVNode27("div",_hoisted_424,_toDisplayString26(_unref26(translate)(TABS_MENU_OPTS[opt])),1)],8,_hoisted_328))),256))])):_createCommentVNode14("v-if",!0),_createElementVNode27("div",_hoisted_514,[_createElementVNode27("div",{class:"btn",onClick:resetTabsMenu},_toDisplayString26(_unref26(translate)("menu.editor.reset")),1),_createElementVNode27("div",{class:"btn",onClick:_cache[0]||(_cache[0]=$event=>createSeparator("tabs"))},_toDisplayString26(_unref26(translate)("menu.editor.create_separator")),1)])],544),_createElementVNode27("section",{ref_key:"menuEditorTabsPanelEl",ref:menuEditorTabsPanelEl,onClick:_cache[4]||(_cache[4]=_withModifiers8(()=>{},["stop"])),onWheel:_cache[5]||(_cache[5]=$event=>moveSelected($event,"tabsPanel"))},[_createElementVNode27("h2",null,_toDisplayString26(_unref26(translate)("menu.editor.tabs_panel_title")),1),(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(tabsPanelMenu.value,group=>(_openBlock27(),_createElementBlock27("div",{class:"menu-group","data-type":group.type},[group.type==="sub"?(_openBlock27(),_createBlock5(text_input_default,{key:0,class:"group-title",value:group.name,or:_unref26(translate)("menu.editor.inline_group_title"),"onUpdate:value":$event=>onSubMenuNameInput("tabs",group.i,$event)},null,8,["value","or","onUpdate:value"])):_createCommentVNode14("v-if",!0),(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(group.options,opt=>(_openBlock27(),_createBlock5(menu_editor_option_default,{type:"tabsPanel",title:_unref26(translate)(TABS_PANEL_MENU_OPTS[opt]),selected:state.selected===opt,isTopLvl:group.type==="list",option:opt,onSelect:select,onCreateSubMenu:createSubMenu,onDownOpt:downOpt,onUpOpt:upOpt,onDisableOpt:disableOpt},null,8,["title","selected","isTopLvl","option"]))),256))],8,_hoisted_612))),256)),disabledTabsPanelMenu.value.length?(_openBlock27(),_createElementBlock27("div",_hoisted_710,[(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(disabledTabsPanelMenu.value,opt=>(_openBlock27(),_createElementBlock27("div",{class:"opt",title:_unref26(translate)(TABS_PANEL_MENU_OPTS[opt]),onClick:$event=>restoreOption("tabsPanel",opt)},[_createElementVNode27("div",_hoisted_99,_toDisplayString26(_unref26(translate)(TABS_PANEL_MENU_OPTS[opt])),1)],8,_hoisted_89))),256))])):_createCommentVNode14("v-if",!0),_createElementVNode27("div",_hoisted_109,[_createElementVNode27("div",{class:"btn",onClick:resetTabsPanelMenu},_toDisplayString26(_unref26(translate)("menu.editor.reset")),1),_createElementVNode27("div",{class:"btn",onClick:_cache[3]||(_cache[3]=$event=>createSeparator("tabsPanel"))},_toDisplayString26(_unref26(translate)("menu.editor.create_separator")),1)])],544),_createElementVNode27("section",{ref_key:"menuEditorBookmarksEl",ref:menuEditorBookmarksEl,onClick:_cache[7]||(_cache[7]=_withModifiers8(()=>{},["stop"])),onWheel:_cache[8]||(_cache[8]=$event=>moveSelected($event,"bookmarks"))},[_createElementVNode27("h2",null,_toDisplayString26(_unref26(translate)("menu.editor.bookmarks_title")),1),(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(bookmarksMenu.value,(group,i)=>(_openBlock27(),_createElementBlock27("div",{class:"menu-group","data-type":group.type},[group.type==="sub"?(_openBlock27(),_createBlock5(text_input_default,{key:0,class:"group-title",value:group.name,or:_unref26(translate)("menu.editor.inline_group_title"),"onUpdate:value":$event=>onSubMenuNameInput("bookmarks",group.i,$event)},null,8,["value","or","onUpdate:value"])):_createCommentVNode14("v-if",!0),(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(group.options,opt=>(_openBlock27(),_createBlock5(menu_editor_option_default,{type:"bookmarks",title:_unref26(translate)(BOOKMARKS_MENU_OPTS[opt]),selected:state.selected===opt,isTopLvl:group.type==="list",option:opt,onSelect:select,onCreateSubMenu:createSubMenu,onDownOpt:downOpt,onUpOpt:upOpt,onDisableOpt:disableOpt},null,8,["title","selected","isTopLvl","option"]))),256))],8,_hoisted_1114))),256)),disabledBookmarksMenu.value.length?(_openBlock27(),_createElementBlock27("div",_hoisted_1212,[(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(disabledBookmarksMenu.value,opt=>(_openBlock27(),_createElementBlock27("div",{class:"opt",title:_unref26(translate)(BOOKMARKS_MENU_OPTS[opt]),onClick:$event=>restoreOption("bookmarks",opt)},[_createElementVNode27("div",_hoisted_1411,_toDisplayString26(_unref26(translate)(BOOKMARKS_MENU_OPTS[opt])),1)],8,_hoisted_1311))),256))])):_createCommentVNode14("v-if",!0),_createElementVNode27("div",_hoisted_158,[_createElementVNode27("div",{class:"btn",onClick:resetBookmarksMenu},_toDisplayString26(_unref26(translate)("menu.editor.reset")),1),_createElementVNode27("div",{class:"btn",onClick:_cache[6]||(_cache[6]=$event=>createSeparator("bookmarks"))},_toDisplayString26(_unref26(translate)("menu.editor.create_separator")),1)])],544),_createElementVNode27("section",{ref_key:"menuEditorBookmarksPanelEl",ref:menuEditorBookmarksPanelEl,onClick:_cache[10]||(_cache[10]=_withModifiers8(()=>{},["stop"])),onWheel:_cache[11]||(_cache[11]=$event=>moveSelected($event,"bookmarksPanel"))},[_createElementVNode27("h2",null,_toDisplayString26(_unref26(translate)("menu.editor.bookmarks_panel_title")),1),(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(bookmarksPanelMenu.value,(group,i)=>(_openBlock27(),_createElementBlock27("div",{class:"menu-group","data-type":group.type},[group.type==="sub"?(_openBlock27(),_createBlock5(text_input_default,{key:0,class:"group-title",value:group.name,or:_unref26(translate)("menu.editor.inline_group_title"),"onUpdate:value":$event=>onSubMenuNameInput("bookmarksPanel",group.i,$event)},null,8,["value","or","onUpdate:value"])):_createCommentVNode14("v-if",!0),(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(group.options,opt=>(_openBlock27(),_createBlock5(menu_editor_option_default,{type:"bookmarksPanel",title:_unref26(translate)(BOOKMARKS_PANEL_MENU_OPTS[opt]),selected:state.selected===opt,isTopLvl:group.type==="list",option:opt,onSelect:select,onCreateSubMenu:createSubMenu,onDownOpt:downOpt,onUpOpt:upOpt,onDisableOpt:disableOpt},null,8,["title","selected","isTopLvl","option"]))),256))],8,_hoisted_167))),256)),disabledBookmarksPanelMenu.value.length?(_openBlock27(),_createElementBlock27("div",_hoisted_177,[(_openBlock27(!0),_createElementBlock27(_Fragment4,null,_renderList4(disabledBookmarksPanelMenu.value,opt=>(_openBlock27(),_createElementBlock27("div",{class:"opt",title:_unref26(translate)(BOOKMARKS_PANEL_MENU_OPTS[opt]),onClick:$event=>restoreOption("bookmarksPanel",opt)},[_createElementVNode27("div",_hoisted_196,_toDisplayString26(_unref26(translate)(BOOKMARKS_PANEL_MENU_OPTS[opt])),1)],8,_hoisted_186))),256))])):_createCommentVNode14("v-if",!0),_createElementVNode27("div",_hoisted_206,[_createElementVNode27("div",{class:"btn",onClick:resetBookmarksPanelMenu},_toDisplayString26(_unref26(translate)("menu.editor.reset")),1),_createElementVNode27("div",{class:"btn",onClick:_cache[9]||(_cache[9]=$event=>createSeparator("bookmarksPanel"))},_toDisplayString26(_unref26(translate)("menu.editor.create_separator")),1)])],544),_createVNode24(footer_section_default)],32))}});import{defineComponent as _defineComponent28}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref28,toDisplayString as _toDisplayString28,createElementVNode as _createElementVNode29,renderList as _renderList5,Fragment as _Fragment5,openBlock as _openBlock29,createElementBlock as _createElementBlock29,createBlock as _createBlock6,vModelText as _vModelText,withDirectives as _withDirectives,normalizeStyle as _normalizeStyle3}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref24,reactive as reactive11,onMounted as onMounted22,nextTick as nextTick3}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent27}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref27,toDisplayString as _toDisplayString27,createElementVNode as _createElementVNode28,openBlock as _openBlock28,createElementBlock as _createElementBlock28,createCommentVNode as _createCommentVNode15,normalizeStyle as _normalizeStyle2,createVNode as _createVNode25,normalizeClass as _normalizeClass}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref23,computed as computed11}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_151=["data-active"],_hoisted_239={class:"label"},_hoisted_329={class:"desc"},_hoisted_425={key:0,class:"var"},_hoisted_515={class:"input-group"},_hoisted_613={key:0,class:"color-wrapper"},_hoisted_711=["value"],style_field_default=_defineComponent27({__name:"style-field",props:{value:{},active:{type:Boolean},or:{},label:{},name:{},isColor:{type:Boolean},noSeparator:{type:Boolean}},emits:["update:value","change","toggle"],setup(__props,{emit:__emit}){let emit=__emit,props=__props,opaq=ref23("ff"),colorValue=computed11(()=>{if(!props.value)return"#000000";if(props.value[0]==="#"&&props.value.length===7)return props.value.toLowerCase();let rgb=toRGBA(props.value);return rgb?`#${rgb[0].toString(16)}${rgb[1].toString(16)}${rgb[2].toString(16)}`:"#000000"}),colorOpacity=computed11(()=>{let num=parseInt(opaq.value,16);return isNaN(num)?1:num/255});function onColorInput(e){let len=e.target.value.length;len<7&&(e.target.value+="0".repeat(6-len)),emit("update:value",e.target.value+opaq.value)}function onInput(val){emit("update:value",val)}function onKeyDown(e){e.key==="Escape"&&props.active&&toggle(),e.key==="Enter"&&toggle(),e.key==="ArrowUp"&&upValue(e),e.key==="ArrowDown"&&downValue(e)}function onChange(){emit("change",props.value)}function toggle(){emit("toggle")}function upValue(e){let parsedNum=parseFloat(props.value);if(isNaN(parsedNum))return;e.preventDefault(),e.stopPropagation();let newNum=parsedNum;e.shiftKey&&e.ctrlKey?newNum=Math.ceil((newNum+.01)*100)/100:e.shiftKey?newNum=Math.ceil((newNum+.1)*10)/10:newNum=Math.ceil(newNum+1);let newVal=props.value.replace(parsedNum.toString(),newNum.toString());emit("update:value",newVal)}function downValue(e){let parsedNum=parseFloat(props.value);if(isNaN(parsedNum))return;e.preventDefault(),e.stopPropagation();let newNum=parsedNum;e.shiftKey&&e.ctrlKey?newNum=Math.floor((newNum-.01)*100)/100:e.shiftKey?newNum=Math.floor((newNum-.1)*10)/10:newNum=Math.floor(newNum-1);let newVal=props.value.replace(parsedNum.toString(),newNum.toString());emit("update:value",newVal)}return(_ctx,_cache)=>(_openBlock28(),_createElementBlock28("div",{class:_normalizeClass(["StyleField",{"-no-separator":_ctx.noSeparator}]),"data-active":!!props.value},[_createElementVNode28("div",_hoisted_239,[_createElementVNode28("div",_hoisted_329,_toDisplayString27(_unref27(translate)(props.label)||props.name),1),props.name?(_openBlock28(),_createElementBlock28("div",_hoisted_425,_toDisplayString27(props.name),1)):_createCommentVNode15("v-if",!0)]),_createElementVNode28("div",_hoisted_515,[_ctx.isColor?(_openBlock28(),_createElementBlock28("div",_hoisted_613,[_createElementVNode28("input",{class:"color",type:"color",style:_normalizeStyle2({opacity:colorOpacity.value}),value:colorValue.value,onInput:onColorInput},null,44,_hoisted_711)])):_createCommentVNode15("v-if",!0),_createVNode25(text_input_default,{class:"text-input",value:props.value,line:!0,or:props.or,"onUpdate:value":onInput,onChange,onKeydown:onKeyDown},null,8,["value","or"]),_createVNode25(toggle_input_default,{class:"toggle",value:props.active,"onUpdate:value":toggle},null,8,["value"])])],10,_hoisted_151))}});var _hoisted_159={class:"StylesEditor"},_hoisted_240=["data-active"],_hoisted_330=["data-active"],_hoisted_426={class:"columns"},_hoisted_516={class:"vars"},_hoisted_614=["data-hidden"],_hoisted_712={class:"section-header"},_hoisted_810={class:"wrapper"},_hoisted_910={class:"editor-box"},_hoisted_1010=["data-hidden"],_hoisted_1115=["data-hidden"],_hoisted_1213={class:"bottom-bar"},_hoisted_1312=["value"],_hoisted_1412={class:"value"},_hoisted_1510=_createElementVNode29("div",{class:"example"},null,-1),TAB_STR="	",COMMENT_START="/* ",COMMENT_END=" */",HISTORY_LIMIT=16,HISTORY_WRITE_DELAY=1e3,styles_editor_default=_defineComponent28({__name:"styles-editor",setup(__props){let FIRST_LETTER_RE=/^\w/,DASH_RE=/-/g,customCssEl=ref24(null),cssEditorEl=ref24(null),state=reactive11({active:!1,vars:[],customCSS:"",cssTarget:"sidebar",colorSampleValue:"#000000",groups:[{id:"--general-",label:"General",vars:[],match:/^--(general|frame|toolbar)/},{id:"--frame-",label:"Frame colors",vars:[]},{id:"--toolbar-",label:"Toolbar colors",vars:[]},{id:"--nav-",label:translate("styles.vars_group.nav"),vars:[]},{id:"--tabs-",label:translate("styles.vars_group.tabs"),vars:[]},{id:"--bookmarks-",label:translate("styles.vars_group.bookmarks"),vars:[]},{id:"--history-",label:"History",vars:[]},{id:"--popup-",label:"Popup",vars:[]},{id:"--ctx-menu-",label:translate("styles.vars_group.menu"),vars:[]},{id:"--slt-",label:"Sub-list title",vars:[]},{id:"--search-",label:"Search bar",vars:[]},{id:"--ntb-",label:"New-tab bar",vars:[]},{id:"--notification-",label:"Notification",vars:[]},{id:"--btn-",label:translate("styles.vars_group.buttons"),vars:[]},{id:"--scroll-",label:translate("styles.vars_group.scroll"),vars:[]},{id:"--d-",label:translate("styles.vars_group.animation"),vars:[]},{id:"other",label:translate("styles.vars_group.other"),vars:[]}]});(async function(){state.customCSS=await Styles.getCustomCSS(state.cssTarget),updateVars(),saveToHistory(state.customCSS)})(),onMounted22(async()=>{await loadVars(),updateVars(),recalcGroups(state.vars)});function getColorSampleStyle(){return{"--color":state.colorSampleValue}}function updateVars(){for(let v of state.vars){let reResult=v.re.exec(state.customCSS);v.active=!!reResult,reResult&&(v.value=reResult[1])}}let updateVarsTimeout;function updateVarsDebounced(){clearTimeout(updateVarsTimeout),updateVarsTimeout=setTimeout(()=>updateVars(),500)}function recalcGroups(vars){let commonGroup=state.groups[state.groups.length-1];for(let g of state.groups)g.vars=[];for(let v of vars){if(v.key.startsWith("--s-"))continue;v.key.endsWith("bg")||v.key.endsWith("fg")||v.key.endsWith("border")||v.key.endsWith("color")||v.key.endsWith("accent")||v.key.endsWith("separator")?v.weight=1:v.key.endsWith("shadow")&&(v.weight=2);let group=state.groups.find(g=>g.match?g.match.test(v.key):v.key.startsWith(g.id));if(group){let key=v.key;key=key.replace(group.id,""),key=key.replace("--",""),key=key.replace(DASH_RE," "),key=key.replace("bg","background"),key=key.replace("fg","foreground"),key=key.replace("btn","button"),v.label=key.replace(FIRST_LETTER_RE,c=>c.toUpperCase()),group.vars.push(v)}else{let key=v.key;key=key.slice(2),key=key.replace(DASH_RE," "),key=key.replace("bg","background"),key=key.replace("fg","foreground"),key=key.replace("btn","button"),v.label=key.replace(FIRST_LETTER_RE,c=>c.toUpperCase()),commonGroup.vars.push(v)}}for(let g of state.groups)g.vars.length&&g.vars.sort((a,b)=>a.weight-b.weight)}async function getRootStyles(target){let shadowContainerEl=document.getElementById("shadows_container");return shadowContainerEl&&shadowContainerEl.remove(),shadowContainerEl=document.createElement("div"),shadowContainerEl.setAttribute("id","shadows_container"),document.body.appendChild(shadowContainerEl),new Promise(res=>{if(!shadowContainerEl)return;let shadow=shadowContainerEl.attachShadow({mode:"open"}),shadowedRootEl=document.createElement("div");shadowedRootEl.setAttribute("id","root"),shadowedRootEl.setAttribute("data-theme",Settings.state.theme||"proton"),shadowedRootEl.setAttribute("data-animations",Settings.state.animationSpeed||"fast"),shadowedRootEl.setAttribute("data-density",Settings.state.density||"default"),shadowedRootEl.setAttribute("data-frame-color-scheme",Styles.reactive.frameColorScheme),shadowedRootEl.setAttribute("data-toolbar-color-scheme",Styles.reactive.toolbarColorScheme),shadowedRootEl.setAttribute("data-act-el-color-scheme",Styles.reactive.actElColorScheme),shadowedRootEl.setAttribute("data-popup-color-scheme",Styles.reactive.popupColorScheme),Styles.parsedTheme&&Styles.applyThemeSrcVars(Styles.parsedTheme,shadowedRootEl),shadow.appendChild(shadowedRootEl);let shadowLinkEl=document.createElement("link");shadowLinkEl.onload=()=>res(getComputedStyle(shadowedRootEl)),shadowLinkEl.onerror=()=>res(void 0),shadowLinkEl.setAttribute("rel","stylesheet"),shadowLinkEl.setAttribute("href",`../themes/proton/${target}.css`),shadow.appendChild(shadowLinkEl)})}async function loadVars(){let compStyle=await getRootStyles(state.cssTarget);if(!compStyle)return;let props=[];for(let prop of compStyle){if(!prop.startsWith("--")||prop==="--color"||prop.startsWith("--settings-")||prop.startsWith("--s-"))continue;let value=compStyle.getPropertyValue(prop).trim(),isColor=isValueColor(value),name=prop,re=new RegExp(`#root\\.root \\{${prop}: (.+?);\\}`);props.push({active:!1,key:prop,value,re,isColor,label:prop,name,weight:0})}state.vars=props}function isValueColor(value){return value.startsWith("#")||value.startsWith("rgb")||value.startsWith("hsl")||value==="transparent"||value==="white"||value==="black"}function toggleCSSVar(cssVar){cssVar.active=!cssVar.active;let re=new RegExp(`#root\\.root \\{${cssVar.key}: (.*?);\\}`);if(cssVar.active){let css=`#root.root {${cssVar.key}: ${cssVar.value};}`;re.test(state.customCSS)?state.customCSS=state.customCSS.replace(re,css):state.customCSS=css+`
`+state.customCSS}else{state.customCSS=state.customCSS.replace(re,""),state.customCSS=state.customCSS.trim();let rootEl=document.getElementById("root");if(rootEl&&!cssVar.value){let value=getComputedStyle(rootEl).getPropertyValue(cssVar.key);value&&(cssVar.value=value)}}applyCssDebounced(0),saveToHistory(state.customCSS,0)}function setCSSVar(cssVar){cssVar.active=!0;let re=new RegExp(`#root\\.root \\{${cssVar.key}: (.*?);\\}`),css=`#root.root {${cssVar.key}: ${cssVar.value};}`;re.test(state.customCSS)?state.customCSS=state.customCSS.replace(re,css):state.customCSS=css+`
`+state.customCSS,applyCssDebounced(0),saveToHistory(state.customCSS,0)}let setCSSVarTimeout;function setCSSVarDebounced(cssVar){clearTimeout(setCSSVarTimeout),setCSSVarTimeout=setTimeout(()=>setCSSVar(cssVar),500)}function resetCSSVars(){let rootEl=document.getElementById("root"),compStyle=rootEl?getComputedStyle(rootEl):null;for(let v of state.vars)if(v.active&&toggleCSSVar(v),compStyle){let value=compStyle.getPropertyValue(v.key);value&&(v.value=value)}}async function selectCssTarget(target){state.cssTarget=target,state.customCSS=await Styles.getCustomCSS(target),await loadVars(),updateVars(),recalcGroups(state.vars),resetHistory(),saveToHistory(state.customCSS)}function onInput(e){applyCssDebounced(1e3),saveToHistory(state.customCSS,1e3),updateVarsDebounced()}function onKeyDown(e){e.key==="Tab"&&tab(e),e.key==="/"&&e.ctrlKey&&comment(e),e.code==="KeyZ"&&e.ctrlKey&&undoRedo(e)}function tab(e){if(e.preventDefault(),!cssEditorEl.value)return;let start=cssEditorEl.value.selectionStart,end=cssEditorEl.value.selectionEnd,rawSrcValue=cssEditorEl.value.value,preStr=rawSrcValue.slice(0,start),postStr=rawSrcValue.slice(end);state.customCSS=preStr+TAB_STR+postStr,nextTick3(()=>{cssEditorEl.value&&(cssEditorEl.value.selectionStart=start+TAB_STR.length,cssEditorEl.value.selectionEnd=cssEditorEl.value.selectionStart)}),applyCssDebounced(),saveToHistory(state.customCSS,300)}function comment(e){if(e.preventDefault(),!cssEditorEl.value)return;let start=cssEditorEl.value.selectionStart,end=cssEditorEl.value.selectionEnd,rawSrcValue=cssEditorEl.value.value,finalSelectionStart=start,lineStart=start,lineEnd=end-1;start===end&&(lineStart=findPrevLineBreak(rawSrcValue,start),lineEnd=findNextLineBreak(rawSrcValue,start));let preCommentStr=rawSrcValue.slice(0,lineStart),commentStr=rawSrcValue.slice(lineStart,lineEnd+1),postCommentStr=rawSrcValue.slice(lineEnd+1);if(commentStr.startsWith(COMMENT_START)&&commentStr.endsWith(COMMENT_END)){let uncommentedStr=commentStr.slice(COMMENT_START.length,commentStr.length-COMMENT_END.length);state.customCSS=preCommentStr+uncommentedStr+postCommentStr,start-3<lineStart?finalSelectionStart=start+(lineStart-start):start>lineEnd-2?finalSelectionStart=start+(lineEnd-start-5):finalSelectionStart=start-3}else state.customCSS=preCommentStr+"/* "+commentStr+" */"+postCommentStr,finalSelectionStart=start+3;nextTick3(()=>{cssEditorEl.value&&(cssEditorEl.value.selectionStart=finalSelectionStart,cssEditorEl.value.selectionEnd=cssEditorEl.value.selectionStart)}),applyCssDebounced(),saveToHistory(state.customCSS,0)}function findPrevLineBreak(text,index){if(index<=0)return 0;for(let i=index;i--;){let char=text[i];if(char===`
`||char==="\r")return i+1}return 0}function findNextLineBreak(text,index){if(index>=text.length)return text.length-1;for(let i=index;i<text.length;i++){let char=text[i];if(char===`
`||char==="\r")return i-1}return text.length-1}function undoRedo(e){if(e.preventDefault(),!cssEditorEl.value)return;let newValue;if(e.shiftKey?newValue=historyRedo():newValue=historyUndo(),newValue){let start=cssEditorEl.value.selectionStart;state.customCSS=newValue.text,nextTick3(()=>{cssEditorEl.value&&(cssEditorEl.value.selectionStart=newValue?.cursor??start,cssEditorEl.value.selectionEnd=newValue?.cursor??start)})}applyCssDebounced()}let applyTimeout;function applyCssDebounced(delay=1e3){clearTimeout(applyTimeout),applyTimeout=setTimeout(()=>Styles.setCustomCSS(state.cssTarget,state.customCSS),delay)}function onColorSampelInput(e){let target=e.target;state.colorSampleValue=target.value,copyColorSampleDebounced()}let copyColorSampleTimeout;function copyColorSampleDebounced(){clearTimeout(copyColorSampleTimeout),copyColorSampleTimeout=setTimeout(()=>{Permissions.reactive.clipboardWrite&&navigator.clipboard.writeText(state.colorSampleValue)})}let saveToHistoryTimeout,history=[],historyPosition=0;function saveToHistory(text,delay=HISTORY_WRITE_DELAY){clearTimeout(saveToHistoryTimeout),saveToHistoryTimeout=setTimeout(()=>{saveToHistoryTimeout=void 0,history[0]?.text!==text&&(history.unshift({text,cursor:cssEditorEl.value?.selectionStart}),history.length>HISTORY_LIMIT&&history.pop(),historyPosition=0)},delay)}function resetHistory(){history=[],historyPosition=0}function historyUndo(){if(!history.length)return;saveToHistoryTimeout!==void 0&&(clearTimeout(saveToHistoryTimeout),saveToHistoryTimeout=void 0,history.unshift({text:state.customCSS,cursor:cssEditorEl.value?.selectionStart}));let value=history[++historyPosition];return historyPosition>=history.length&&(historyPosition=history.length-1),value}function historyRedo(){clearTimeout(saveToHistoryTimeout),saveToHistoryTimeout=void 0;let value=history[--historyPosition];return historyPosition<0&&(historyPosition=0),value}return(_ctx,_cache)=>(_openBlock29(),_createElementBlock29("div",_hoisted_159,[_createElementVNode29("nav",null,[_createElementVNode29("div",{class:"nav-item","data-active":state.cssTarget==="sidebar",onClick:_cache[0]||(_cache[0]=$event=>selectCssTarget("sidebar"))},_toDisplayString28(_unref28(translate)("styles.css_sidebar")),9,_hoisted_240),_createElementVNode29("div",{class:"nav-item","data-active":state.cssTarget==="group",onClick:_cache[1]||(_cache[1]=$event=>selectCssTarget("group"))},_toDisplayString28(_unref28(translate)("styles.css_group")),9,_hoisted_330)]),_createElementVNode29("div",_hoisted_426,[_createElementVNode29("div",_hoisted_516,[(_openBlock29(!0),_createElementBlock29(_Fragment5,null,_renderList5(state.groups,group=>(_openBlock29(),_createElementBlock29("section",{key:group.id,"data-hidden":!group.vars?.length},[_createElementVNode29("div",_hoisted_712,[_createElementVNode29("h2",null,_toDisplayString28(group.label),1)]),(_openBlock29(!0),_createElementBlock29(_Fragment5,null,_renderList5(group.vars,(cssVar,i)=>(_openBlock29(),_createBlock6(style_field_default,{key:cssVar.key,value:cssVar.value,"onUpdate:value":[$event=>cssVar.value=$event,$event=>setCSSVarDebounced(cssVar)],noSeparator:i===0,active:cssVar.active,label:cssVar.label,name:cssVar.name,isColor:cssVar.isColor,or:"---",onChange:$event=>setCSSVar(cssVar),onToggle:$event=>toggleCSSVar(cssVar)},null,8,["value","onUpdate:value","noSeparator","active","label","name","isColor","onChange","onToggle"]))),128))],8,_hoisted_614))),128))]),_createElementVNode29("div",{class:"css",ref_key:"customCssEl",ref:customCssEl},[_createElementVNode29("div",_hoisted_810,[_createElementVNode29("div",_hoisted_910,[_withDirectives(_createElementVNode29("textarea",{class:"editor",ref_key:"cssEditorEl",ref:cssEditorEl,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>state.customCSS=$event),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",onInputPassive:onInput,onKeydown:onKeyDown,onChange:_cache[3]||(_cache[3]=$event=>applyCssDebounced())},null,544),[[_vModelText,state.customCSS]]),_createElementVNode29("div",{class:"placeholder","data-hidden":!!state.customCSS},_toDisplayString28(_unref28(translate)("styles.css_placeholder")),9,_hoisted_1010),_createElementVNode29("div",{class:"placeholder-note","data-hidden":!!state.customCSS},_toDisplayString28(_unref28(translate)("styles.css_selectors_instruction")),9,_hoisted_1115)])])],512)]),_createElementVNode29("div",_hoisted_1213,[_createElementVNode29("div",{class:"btn",onClick:resetCSSVars},_toDisplayString28(_unref28(translate)("styles.reset_styles")),1),_createElementVNode29("a",{class:"btn",onClick:_cache[4]||(_cache[4]=$event=>_unref28(SetupPage).copyDevtoolsUrl())},_toDisplayString28(_unref28(translate)("settings.copy_devtools_url")),1),_createElementVNode29("div",{class:"color-sample",style:_normalizeStyle3(getColorSampleStyle())},[_createElementVNode29("input",{class:"color",type:"color",value:state.colorSampleValue,onInput:onColorSampelInput},null,40,_hoisted_1312),_createElementVNode29("div",_hoisted_1412,_toDisplayString28(state.colorSampleValue),1),_hoisted_1510],4)])]))}});import{defineComponent as _defineComponent30}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref29,toDisplayString as _toDisplayString30,createElementVNode as _createElementVNode31,renderList as _renderList6,Fragment as _Fragment6,openBlock as _openBlock31,createElementBlock as _createElementBlock31,withCtx as _withCtx5,createVNode as _createVNode26,createCommentVNode as _createCommentVNode17,withModifiers as _withModifiers10}from"/vendor/vue.runtime.esm-browser.prod.js";import{reactive as reactive13,computed as computed12,nextTick as nextTick5}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent29}from"/vendor/vue.runtime.esm-browser.prod.js";import{toDisplayString as _toDisplayString29,createElementVNode as _createElementVNode30,renderSlot as _renderSlot,normalizeStyle as _normalizeStyle4,openBlock as _openBlock30,createElementBlock as _createElementBlock30,createCommentVNode as _createCommentVNode16,Teleport as _Teleport,createBlock as _createBlock7,withModifiers as _withModifiers9}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref25,nextTick as nextTick4,onMounted as onMounted23,reactive as reactive12}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_160=["data-drop-down"],_hoisted_241={class:"body"},_hoisted_331={class:"label"},drop_down_button_default=_defineComponent29({__name:"drop-down-button",props:{label:{}},emits:["open"],setup(__props,{emit:__emit}){let emit=__emit,dropDownOpen=ref25(!1),rootEl=ref25(null),dropDownEl=ref25(null),disabledDropDownTeleport=ref25(!0),dropDownStyle=reactive12({"--left":"0px","--top":"0px"});onMounted23(()=>{setupDropDownTeleport()});function setupDropDownTeleport(){disabledDropDownTeleport.value=!1}function onBlur(){rootEl.value&&(rootEl.value.tabIndex=-1)}async function onMouseUp(){await sleep(3),rootEl.value&&rootEl.value.tabIndex===-1&&dropDownOpen.value&&(dropDownOpen.value=!1)}function onWheel(e){if(!dropDownEl.value)return;let scrollOffset=dropDownEl.value.scrollTop,maxScrollOffset=dropDownEl.value.scrollHeight-dropDownEl.value.offsetHeight;scrollOffset===0&&e.deltaY<0&&e.preventDefault(),scrollOffset===maxScrollOffset&&e.deltaY>0&&e.preventDefault()}async function open(){if(!rootEl.value)return;rootEl.value&&(rootEl.value.tabIndex=0,rootEl.value.focus()),dropDownOpen.value=!0,emit("open");let elStyles=window.getComputedStyle(rootEl.value,null),bottomPadding=parseInt(elStyles.getPropertyValue("padding-bottom"));if(isNaN(bottomPadding)&&(bottomPadding=0),await nextTick4(),!dropDownEl.value)return;let inputRect=rootEl.value.getBoundingClientRect(),dropDownRect=dropDownEl.value.getBoundingClientRect(),viewportHeight=window.innerHeight,viewportWidth=window.innerWidth,inputBottom=Math.round(inputRect.bottom),inputRight=Math.round(inputRect.right),dropDownTop=inputBottom-bottomPadding+1;if(viewportHeight<=dropDownTop+dropDownRect.height+bottomPadding&&(dropDownTop=viewportHeight-dropDownRect.height-bottomPadding),viewportWidth<dropDownRect.width+(viewportWidth-inputRight)){let inputWidth=Math.round(inputRect.width);dropDownStyle["--max-width"]=`${inputWidth}px`,dropDownRect.width=inputWidth}dropDownStyle["--top"]=`${dropDownTop}px`,dropDownStyle["--left"]=`${inputRight-dropDownRect.width}px`}return(_ctx,_cache)=>(_openBlock30(),_createElementBlock30("div",{class:"DropDownButton",ref_key:"rootEl",ref:rootEl,"data-drop-down":dropDownOpen.value,onClick:open,onContextmenu:_cache[0]||(_cache[0]=_withModifiers9(()=>{},["stop","prevent"])),onBlur},[_createElementVNode30("div",_hoisted_241,[_createElementVNode30("div",_hoisted_331,_toDisplayString29(_ctx.label),1),disabledDropDownTeleport.value?_createCommentVNode16("v-if",!0):(_openBlock30(),_createBlock7(_Teleport,{key:0,to:"#root"},[dropDownOpen.value?(_openBlock30(),_createElementBlock30("div",{key:0,class:"DropDownButton-drop-down-layer",onWheel,onMouseup:onMouseUp},[_createElementVNode30("div",{class:"DropDownButton-drop-down",ref_key:"dropDownEl",ref:dropDownEl,style:_normalizeStyle4(dropDownStyle)},[_renderSlot(_ctx.$slots,"default")],4)],32)):_createCommentVNode16("v-if",!0)]))])],40,_hoisted_160))}});var _hoisted_161={class:"wrapper"},_hoisted_247={class:"snapshot-list-section"},_hoisted_335=["data-empty"],_hoisted_427={class:"controls"},_hoisted_517={class:"btn"},_hoisted_615={class:"label"},_hoisted_713=["id","data-active","onClick"],_hoisted_811={class:"info"},_hoisted_911={class:"date-time"},_hoisted_1011={class:"content-info"},_hoisted_1116=["title","onClick"],_hoisted_1214=_createElementVNode31("svg",null,[_createElementVNode31("use",{"xlink:href":"#icon_trash"})],-1),_hoisted_1313=[_hoisted_1214],_hoisted_1413={class:"active-snapshot-section"},_hoisted_1511=["data-empty"],_hoisted_168={class:"title"},_hoisted_178={class:"snapshot-export-opt",id:"json_snap_export_link"},_hoisted_187={class:"label"},_hoisted_197={class:"snapshot-export-opt",id:"md_snap_export_link"},_hoisted_207={class:"label"},_hoisted_2112={class:"note"},_hoisted_2210={class:"label"},_hoisted_2310={key:1,class:"content"},_hoisted_248={class:"windows"},_hoisted_257={class:"window-bar"},_hoisted_266={class:"win-name"},_hoisted_276={class:"win-len"},_hoisted_285=["onClick"],_hoisted_294={class:"panels"},_hoisted_304=["data-void"],_hoisted_3111=["data-color"],_hoisted_3210={class:"icon"},_hoisted_336=["src"],_hoisted_344={key:1},_hoisted_354=["xlink:href"],_hoisted_363={class:"name"},_hoisted_373={class:"len"},_hoisted_383={class:"tabs"},_hoisted_393=["title","id","data-sel","data-lvl","data-pinned","data-color","data-shift-sel"],_hoisted_403=["href","onMousedown","onMouseup"],_hoisted_4110={key:0,class:"container-mark"},_hoisted_428={class:"icon"},_hoisted_434=["src"],_hoisted_444={key:1},_hoisted_454=["xlink:href"],_hoisted_463={key:2,class:"pin"},_hoisted_473=_createElementVNode31("use",{"xlink:href":"#icon_pin"},null,-1),_hoisted_483=[_hoisted_473],_hoisted_493={class:"title-url"},_hoisted_502={class:"title"},_hoisted_51={class:"url"},_hoisted_522=["data-sel","onMousedown","onMouseup"],_hoisted_532=["data-active"],_hoisted_542={class:"info"},_hoisted_552={key:0,class:"placeholder"},_hoisted_562={class:"btn"},_hoisted_572={class:"label"},LONG_CLICK_DELAY=700,snapshots_default=_defineComponent30({__name:"snapshots",setup(__props){let SCROLL_CONF={behavior:"smooth",block:"nearest"},dayStartMs=getDayStartMS(),state=reactive13({snapshots:[],activeSnapshot:null,mouseUpShiftTabId:null}),selectedTabsLen=computed12(()=>{if(!state.activeSnapshot)return 0;let len=0;for(let win of state.activeSnapshot.windows)for(let panel of win.panels)for(let tab of panel.tabs)tab.sel&&len++;return len});(async function(){let snapshots=[],stored;try{stored=await browser.storage.local.get("snapshots")}catch(err2){return err("Snapshots.vue: init: Cannot get stored snapshots",err2)}if(stored.snapshots||(stored.snapshots=[]),stored.snapshots.length>0){for(let i=stored.snapshots.length;i--;){let snapshot=Snapshots.parseSnapshot(stored.snapshots,i,dayStartMs);snapshot&&snapshots.push(snapshot)}state.snapshots=snapshots,state.activeSnapshot=snapshots[0]}Store.onKeyChange("snapshots",onSnapshotsChange)})();function onSnapshotsChange(newSnapshots){newSnapshots||(newSnapshots=[]);let snapshots=[];for(let i=newSnapshots.length;i--;){let snapshot=Snapshots.parseSnapshot(newSnapshots,i,dayStartMs);snapshot&&snapshots.push(snapshot)}let activeSnapshot=snapshots.find(s=>s.id===state.activeSnapshot?.id)??null;activeSnapshot||resetSelection(state.activeSnapshot),activeSnapshot&&(activeSnapshot=state.activeSnapshot),state.snapshots=snapshots,state.activeSnapshot=activeSnapshot??snapshots[0]}function activateSnapshot(snapshot){!snapshot||state.activeSnapshot===snapshot||(resetSelection(state.activeSnapshot),state.activeSnapshot=snapshot)}function onHeaderWheel(e){if(e.preventDefault(),e.stopPropagation(),!state.activeSnapshot)return;let index=state.snapshots.findIndex(s=>s.id===state.activeSnapshot?.id);if(index===-1)return;resetSelection(state.activeSnapshot);let maxIndex=state.snapshots.length-1;e.deltaY>0&&index<maxIndex&&index++,e.deltaY<0&&index>0&&index--,state.activeSnapshot=state.snapshots[index];let el=document.getElementById(state.activeSnapshot.id);el&&el.scrollIntoView(SCROLL_CONF)}let longClickTimeout,mouseDownTabId;function onTabMouseDown(e,tab){mouseDownTabId=tab.id,clearTimeout(longClickTimeout),e.button===0&&(longClickTimeout=setTimeout(()=>{tab.sel=!0,mouseDownTabId=void 0},LONG_CLICK_DELAY))}let mouseUpShiftMode=!0;function onTabMouseUp(e,tab){if(clearTimeout(longClickTimeout),mouseDownTabId!==tab.id){mouseDownTabId=void 0;return}if(mouseDownTabId=void 0,e.shiftKey&&e.button===0){state.mouseUpShiftTabId===null?(state.mouseUpShiftTabId=tab.id??null,tab.sel=!tab.sel,mouseUpShiftMode=tab.sel):(selectRange(state.mouseUpShiftTabId,tab.id,!mouseUpShiftMode),state.mouseUpShiftTabId=null);return}if(e.ctrlKey&&e.button===0){tab.sel=!tab.sel;return}state.mouseUpShiftTabId=null,e.button===0&&openTab(tab)}function onCheckboxMouseDown(e,tab){mouseDownTabId=tab.id}function onCheckboxMouseUp(e,tab){if(mouseDownTabId!==tab.id){mouseDownTabId=void 0;return}if(mouseDownTabId=void 0,e.shiftKey&&e.button===0){state.mouseUpShiftTabId===null?(state.mouseUpShiftTabId=tab.id??null,tab.sel=!tab.sel,mouseUpShiftMode=tab.sel):(selectRange(state.mouseUpShiftTabId,tab.id,!mouseUpShiftMode),state.mouseUpShiftTabId=null);return}state.mouseUpShiftTabId=null,e.button===0&&(tab.sel=!tab.sel)}function onTabDragStart(e){clearTimeout(longClickTimeout);let target=e.currentTarget;if(target.parentElement){let bounds=target.parentElement.getBoundingClientRect(),x=e.clientX-bounds.x,y=e.clientY-bounds.y;e.dataTransfer&&e.dataTransfer.setDragImage(target.parentElement,x,y)}}function selectRange(tabAId,tabBId,deselectActually=!1){if(!state.activeSnapshot)return;!tabBId===void 0&&(tabBId=tabAId);let oneTab=tabAId===tabBId,inRange=!1;for(let win of state.activeSnapshot.windows)for(let panel of win.panels)for(let tab of panel.tabs)inRange&&(tab.sel=!deselectActually),(tab.id===tabAId||tab.id===tabBId)&&(inRange=!inRange,inRange&&(tab.sel=!deselectActually),oneTab&&(inRange=!inRange))}function resetSelection(snapshot){if(!snapshot&&state.activeSnapshot&&(snapshot=state.activeSnapshot),!!snapshot){state.mouseUpShiftTabId=null;for(let win of snapshot.windows)for(let panel of win.panels)for(let tab of panel.tabs)tab.sel=!1}}function onClick(){state.mouseUpShiftTabId=null,mouseUpShiftMode=!0}async function openTab(tab){let activePanel=await sidebar(Windows.id,"getActivePanelConfig");if(isTabsPanel(activePanel)){let item={id:tab.id??NOID,url:tab.url,title:tab.title,container:tab.containerId??CONTAINER_ID};await sidebar(Windows.id,"openTabs",[item],{panelId:activePanel.id})}else{let conf={url:normalizeUrl(tab.url,tab.title),windowId:Windows.id,active:!1,cookieStoreId:tab.containerId??CONTAINER_ID};browser.tabs.create(conf)}}async function openSelectedTabs(){if(!state.activeSnapshot)return;let items=[];for(let win of state.activeSnapshot.windows){let ids={},tabsByLvl={};for(let panel of win.panels)for(let tab of panel.tabs){if(tab.id===void 0||(tabsByLvl[tab.lvl??0]=tab,!tab.sel))continue;ids[tab.id]=!0;let item={id:tab.id,url:tab.url,title:tab.title,container:tab.containerId??CONTAINER_ID};if(tab.lvl&&tab.lvl>0){let shift=1,parent=tabsByLvl[tab.lvl-shift];for(;parent&&!parent.sel;)parent=tabsByLvl[tab.lvl-++shift];parent?.sel&&(item.parentId=parent.id)}tab.parentId!==void 0&&ids[tab.parentId]&&(item.parentId=tab.parentId),items.push(item)}}let activePanel=await sidebar(Windows.id,"getActivePanelConfig");if(isTabsPanel(activePanel))await sidebar(Windows.id,"openTabs",items,{panelId:activePanel.id});else for(let item of items){let conf={url:normalizeUrl(item.url,item.title),windowId:Windows.id,active:!1,cookieStoreId:item.container};conf.url&&!conf.url.startsWith("a")&&item.title&&(conf.discarded=!0,conf.title=item.title,conf.active=!1),browser.tabs.create(conf)}}async function createSnapshot(){await bg("createSnapshot")}async function openAllWindows(snapshot){if(snapshot)try{await bg("openSnapshotWindows",cloneObject(snapshot))}catch(err2){err("Snapshots: Cannot openAllWindows",err2)}}async function openWindow(snapshot,winIndex){if(snapshot)try{await bg("openSnapshotWindows",cloneObject(snapshot),winIndex)}catch(err2){err("Snapshots: Cannot openWindow",err2)}}async function removeSnapshot(snapshot){if(await bg("removeSnapshot",snapshot.id)===1){let index=state.snapshots.findIndex(s=>s.id===snapshot.id);if(index===-1)return;if(state.activeSnapshot?.id===snapshot.id){let nextActiveSnapshot=state.snapshots[index-1];nextActiveSnapshot||(nextActiveSnapshot=state.snapshots[index+1]),state.activeSnapshot=nextActiveSnapshot??null}state.snapshots.splice(index,1),recalcSizes()}else warn("Snapshots: Cannot removeSnapshot")}async function recalcSizes(){let storedSnapshots=await Snapshots.getStoredSnapshots();if(storedSnapshots)for(let snapshot of storedSnapshots){let snapshotState=state.snapshots.find(s=>s.id===snapshot.id);snapshotState&&(snapshotState.sizeStr=strSize(JSON.stringify(snapshot)))}}function getSnapInfo(s){return`${s.winCount} ${translate("snapshot.snap_win",s.winCount)} / ${s.tabsCount} ${translate("snapshot.snap_tab",s.tabsCount)} / ~ ${s.sizeStr}`}let exportInfo;async function onExportSnapshotDropDownOpen(){if(await nextTick5(),!state.activeSnapshot)return;exportInfo=Snapshots.prepareExport(state.activeSnapshot,{JSON:!0,Markdown:!0});let dateStr=uDate(exportInfo.time,"."),timeStr=uTime(exportInfo.time,"."),mdSnapExportLink=document.getElementById("md_snap_export_link"),jsonSnapExportLink=document.getElementById("json_snap_export_link");mdSnapExportLink&&exportInfo.mdFile&&(mdSnapExportLink.href=URL.createObjectURL(exportInfo.mdFile),mdSnapExportLink.download=`sidebery-snapshot-${dateStr}-${timeStr}.md`,mdSnapExportLink.title=`sidebery-snapshot-${dateStr}-${timeStr}.md`),jsonSnapExportLink&&exportInfo.jsonFile&&(jsonSnapExportLink.href=URL.createObjectURL(exportInfo.jsonFile),jsonSnapExportLink.download=`sidebery-snapshot-${dateStr}-${timeStr}.json`,jsonSnapExportLink.title=`sidebery-snapshot-${dateStr}-${timeStr}.json`)}function copyAsMarkdown(){if(!state.activeSnapshot)return;let{id,time,containers,sidebar:sidebar2,tabs}=state.activeSnapshot;if(exportInfo?.md)navigator.clipboard.writeText(exportInfo.md);else{let markdown=Snapshots.convertToMarkdown({id,time,containers,sidebar:sidebar2,tabs});navigator.clipboard.writeText(markdown)}}function importSnapshot(importEvent){let file=importEvent.target.files?.[0];if(!file)return;let reader=new FileReader;reader.onload=fileEvent=>{if(!fileEvent.target)return err("Cannot import snapshot: No file content");let jsonStr=fileEvent.target.result;if(!jsonStr||typeof jsonStr!="string")return err("Cannot import snapshot: Wrong file content");let snapshot;try{snapshot=JSON.parse(jsonStr)}catch(err2){return err("Cannot import snapshot",err2)}if(!snapshot)return err("Cannot import snapshot: No snapshot");let noId=!snapshot.id,noTime=!snapshot.time,noContainers=!snapshot.containers,noSidebar=!snapshot.sidebar,noTabs=!snapshot.tabs;if(noId||noTime||noContainers||noSidebar||noTabs)return err("Cannot import snapshot: Incomplete snapshot");Snapshots.addSnapshot(snapshot)},reader.readAsText(file)}return(_ctx,_cache)=>(_openBlock31(),_createElementBlock31("div",{class:"Snapshots",onClick},[_createElementVNode31("div",_hoisted_161,[_createElementVNode31("div",_hoisted_247,[_createElementVNode31("div",{class:"snapshot-list","data-empty":!state.snapshots.length},[_createElementVNode31("div",_hoisted_427,[_createElementVNode31("div",{class:"btn",onClick:_cache[0]||(_cache[0]=$event=>createSnapshot())},_toDisplayString30(_unref29(translate)("snapshot.btn_create_snapshot")),1),_createElementVNode31("div",_hoisted_517,[_createElementVNode31("div",_hoisted_615,_toDisplayString30(_unref29(translate)("snapshot.btn_import_snapshot")),1),_createElementVNode31("input",{type:"file",accept:"application/json",onInput:importSnapshot},null,32)])]),(_openBlock31(!0),_createElementBlock31(_Fragment6,null,_renderList6(state.snapshots,snapshot=>(_openBlock31(),_createElementBlock31("div",{class:"snapshot",key:snapshot.id,id:String(snapshot.id),"data-active":state.activeSnapshot?.id===snapshot.id,onClick:$event=>activateSnapshot(snapshot)},[_createElementVNode31("div",_hoisted_811,[_createElementVNode31("div",_hoisted_911,_toDisplayString30(snapshot.dateStr)+" - "+_toDisplayString30(snapshot.timeStr),1),_createElementVNode31("div",_hoisted_1011,_toDisplayString30(getSnapInfo(snapshot)),1)]),_createElementVNode31("div",{class:"rm-btn",title:_unref29(translate)("snapshot.btn_remove"),onClick:$event=>removeSnapshot(snapshot)},_hoisted_1313,8,_hoisted_1116)],8,_hoisted_713))),128))],8,_hoisted_335)]),_createElementVNode31("div",_hoisted_1413,[state.activeSnapshot?(_openBlock31(),_createElementBlock31("div",{key:0,class:"header",onWheel:onHeaderWheel,"data-empty":!state.activeSnapshot},[_createElementVNode31("div",_hoisted_168,_toDisplayString30(state.activeSnapshot?.dateStr??"?")+" - "+_toDisplayString30(state.activeSnapshot?.timeStr??"?"),1),_createVNode26(drop_down_button_default,{label:_unref29(translate)("snapshot.btn_export_snapshot"),onOpen:onExportSnapshotDropDownOpen},{default:_withCtx5(()=>[_createElementVNode31("a",_hoisted_178,[_createElementVNode31("div",_hoisted_187,_toDisplayString30(_unref29(translate)("snapshot.btn_export_snapshot_json")),1)]),_createElementVNode31("a",_hoisted_197,[_createElementVNode31("div",_hoisted_207,_toDisplayString30(_unref29(translate)("snapshot.btn_export_snapshot_md")),1),_createElementVNode31("div",_hoisted_2112,_toDisplayString30(_unref29(translate)("snapshot.btn_export_snapshot_md_note")),1)]),_createElementVNode31("div",{class:"snapshot-export-opt",onClick:copyAsMarkdown},[_createElementVNode31("div",_hoisted_2210,_toDisplayString30(_unref29(translate)("snapshot.btn_copy_snapshot_md")),1)])]),_:1},8,["label"]),_createElementVNode31("div",{class:"btn",onClick:_cache[1]||(_cache[1]=$event=>openAllWindows(state.activeSnapshot))},_toDisplayString30(_unref29(translate)("snapshot.btn_open_all_win")),1)],40,_hoisted_1511)):_createCommentVNode17("v-if",!0),state.activeSnapshot?(_openBlock31(),_createElementBlock31("div",_hoisted_2310,[_createElementVNode31("div",_hoisted_248,[(_openBlock31(!0),_createElementBlock31(_Fragment6,null,_renderList6(state.activeSnapshot.windows,(win,i)=>(_openBlock31(),_createElementBlock31("div",{class:"window",key:i},[_createElementVNode31("div",_hoisted_257,[_createElementVNode31("div",_hoisted_266,_toDisplayString30(_unref29(translate)("snapshot.window_title")+" "+(i+1)),1),_createElementVNode31("div",_hoisted_276,"("+_toDisplayString30(win.tabsLen)+" "+_toDisplayString30(_unref29(translate)("snapshot.snap_tab",win.tabsLen))+")",1),_createElementVNode31("div",{class:"btn",onClick:$event=>openWindow(state.activeSnapshot,i)},_toDisplayString30(_unref29(translate)("snapshot.btn_open_win")),9,_hoisted_285)]),_createElementVNode31("div",_hoisted_294,[(_openBlock31(!0),_createElementBlock31(_Fragment6,null,_renderList6(win.panels,panel=>(_openBlock31(),_createElementBlock31("div",{class:"panel",key:panel.id,"data-void":panel.id===-1},[_createElementVNode31("div",{class:"panel-bar","data-color":panel.color},[_createElementVNode31("div",_hoisted_3210,[panel.iconIMG?(_openBlock31(),_createElementBlock31("img",{key:0,src:panel.iconIMG},null,8,_hoisted_336)):(_openBlock31(),_createElementBlock31("svg",_hoisted_344,[_createElementVNode31("use",{"xlink:href":"#"+panel.iconSVG},null,8,_hoisted_354)]))]),_createElementVNode31("div",_hoisted_363,_toDisplayString30(panel.name),1),_createElementVNode31("div",_hoisted_373,_toDisplayString30(panel.tabs.length)+" "+_toDisplayString30(_unref29(translate)("snapshot.snap_tab",panel.tabs.length)),1)],8,_hoisted_3111),_createElementVNode31("div",_hoisted_383,[(_openBlock31(!0),_createElementBlock31(_Fragment6,null,_renderList6(panel.tabs,tab=>(_openBlock31(),_createElementBlock31("div",{class:"tab",key:tab.id,title:tab.title,id:String(tab.id),"data-sel":tab.sel,"data-lvl":tab.lvl,"data-pinned":tab.pinned,"data-color":tab.containerColor,"data-shift-sel":state.mouseUpShiftTabId===tab.id,onClick:_cache[3]||(_cache[3]=_withModifiers10(()=>{},["stop","prevent"]))},[_createElementVNode31("a",{class:"link",target:"_blank",href:tab.url,onDragstart:_cache[2]||(_cache[2]=$event=>onTabDragStart($event)),onMousedown:$event=>onTabMouseDown($event,tab),onMouseup:_withModifiers10($event=>onTabMouseUp($event,tab),["stop","prevent"])},null,40,_hoisted_403),tab.containerIcon?(_openBlock31(),_createElementBlock31("div",_hoisted_4110)):_createCommentVNode17("v-if",!0),_createElementVNode31("div",_hoisted_428,[tab.domain&&reactive2.byDomains[tab.domain]?(_openBlock31(),_createElementBlock31("img",{key:0,src:reactive2.byDomains[tab.domain]},null,8,_hoisted_434)):(_openBlock31(),_createElementBlock31("svg",_hoisted_444,[_createElementVNode31("use",{"xlink:href":tab.iconSVG},null,8,_hoisted_454)])),tab.pinned?(_openBlock31(),_createElementBlock31("svg",_hoisted_463,_hoisted_483)):_createCommentVNode17("v-if",!0)]),_createElementVNode31("div",_hoisted_493,[_createElementVNode31("div",_hoisted_502,_toDisplayString30(tab.title),1),_createElementVNode31("div",_hoisted_51,_toDisplayString30(tab.url),1)]),_createElementVNode31("div",{class:"checkbox","data-sel":tab.sel,onMousedown:$event=>onCheckboxMouseDown($event,tab),onMouseup:$event=>onCheckboxMouseUp($event,tab)},null,40,_hoisted_522)],8,_hoisted_393))),128))])],8,_hoisted_304))),128))])]))),128))])])):_createCommentVNode17("v-if",!0),_createElementVNode31("div",{class:"selection-bar","data-active":!!selectedTabsLen.value},[_createElementVNode31("div",_hoisted_542,_toDisplayString30(_unref29(translate)("snapshot.selected"))+" "+_toDisplayString30(selectedTabsLen.value),1),_createElementVNode31("div",{class:"btn",onClick:_cache[4]||(_cache[4]=$event=>openSelectedTabs())},_toDisplayString30(_unref29(translate)("snapshot.sel.open_in_panel")),1),_createElementVNode31("div",{class:"btn",onClick:_cache[5]||(_cache[5]=$event=>resetSelection())},_toDisplayString30(_unref29(translate)("snapshot.sel.reset_sel")),1)],8,_hoisted_532)]),state.snapshots.length?_createCommentVNode17("v-if",!0):(_openBlock31(),_createElementBlock31("div",_hoisted_552,[_createElementVNode31("div",{class:"btn",onClick:_cache[6]||(_cache[6]=$event=>createSnapshot())},_toDisplayString30(_unref29(translate)("snapshot.btn_create_first")),1),_createElementVNode31("div",_hoisted_562,[_createElementVNode31("div",_hoisted_572,_toDisplayString30(_unref29(translate)("snapshot.btn_import_snapshot")),1),_createElementVNode31("input",{type:"file",accept:"application/json",onInput:importSnapshot},null,32)])]))])]))}});import{defineComponent as _defineComponent31}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref30,toDisplayString as _toDisplayString31,createElementVNode as _createElementVNode32,renderList as _renderList7,Fragment as _Fragment7,openBlock as _openBlock32,createElementBlock as _createElementBlock32,createCommentVNode as _createCommentVNode18,withModifiers as _withModifiers11,createVNode as _createVNode27}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref26,reactive as reactive14,onMounted as onMounted24}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_169={class:"Settings"},_hoisted_249={class:"title-note"},_hoisted_337={class:"storage-section"},_hoisted_429=["onClick"],_hoisted_518={class:"name"},_hoisted_616={key:0,class:"len"},_hoisted_714={class:"size"},_hoisted_812=["onClick"],_hoisted_912={class:"ctrls"},_hoisted_1012={class:"storage-section"},_hoisted_1117={class:"sub-title"},_hoisted_1215={class:"text"},_hoisted_1314={class:"favs"},_hoisted_1414=["title"],_hoisted_1512=["src"],storage_default=_defineComponent31({__name:"storage",setup(__props){let el=ref26(null),state=reactive14({storedProps:[],storageOveral:"-",faviconsCache:[]});onMounted24(()=>{SetupPage.registerEl("settings_storage",el.value),calcStorageInfo()});async function calcStorageInfo(){let stored;try{stored=await browser.storage.local.get()}catch{return}if(state.storageOveral=strSize(JSON.stringify(stored)),state.storedProps=Object.keys(stored).map(key=>{let value=stored[key],size=new Blob([JSON.stringify(value)]).size,len=Array.isArray(value)?`(${value.length}) `:"";return{name:key,size,len,sizeStr:"~"+strSize(JSON.stringify(value))}}).sort((a,b)=>b.size-a.size),(stored.favicons||stored.favicons_01)&&stored.favDomains){let fullList=stored.favicons??[...stored.favicons_01??[],...stored.favicons_02??[],...stored.favicons_03??[],...stored.favicons_04??[],...stored.favicons_05??[]];state.faviconsCache=[];let favsDomainsInfo=[];for(let d of Object.keys(stored.favDomains)){let domainInfo=stored.favDomains[d],fdi=favsDomainsInfo[domainInfo.index];fdi?fdi.push({domain:d,...domainInfo}):favsDomainsInfo[domainInfo.index]=[{domain:d,...domainInfo}]}for(let fav,domains,i=0;i<fullList.length;i++){fav=fullList[i],domains=favsDomainsInfo[i];let tooltipInfo=[];if(fav&&tooltipInfo.push(`${fav.substring(0,32)}...
Size: ${bytesToStr(fav.length)}`),domains?.length){let index=domains[0].index;tooltipInfo.push(`Index: ${index}`);for(let domain of domains)tooltipInfo.push(`Domain: ${domain.domain} | src url len: ${domain.len}`)}state.faviconsCache.push({favicon:fav,tooltip:tooltipInfo.join(`
`)})}}}async function openStoredData(prop){let stored;try{stored=await browser.storage.local.get(prop)}catch(err2){SetupPage.reactive.detailsTitle="Error: Cannot get value",SetupPage.reactive.detailsText=String(err2);return}stored&&stored[prop]!==void 0&&(SetupPage.reactive.detailsMode="view",SetupPage.reactive.detailsTitle=prop,SetupPage.reactive.detailsText=JSON.stringify(stored[prop],null,2),SetupPage.reactive.detailsEdit=newValue=>{let json;try{json=JSON.parse(newValue)}catch(err2){return err("Settings.Storage: Cannot parse json",err2)}Store.set({[prop]:json})})}async function deleteStoredData(prop){if(window.confirm(translate("settings.storage_delete_confirm")+`"${prop}"?`)){try{await browser.storage.local.remove(prop)}catch(err2){return err("deleteStoredData: Cannot remove value",err2)}calcStorageInfo()}}async function clearStorage(){if(window.confirm(translate("settings.clear_storage_confirm"))){try{await browser.storage.local.clear()}catch(err2){return err("clearStorage: Cannot clean storage",err2)}browser.runtime.reload()}}return(_ctx,_cache)=>(_openBlock32(),_createElementBlock32("div",_hoisted_169,[_createElementVNode32("section",{ref_key:"el",ref:el},[_createElementVNode32("h2",null,[_createElementVNode32("span",null,_toDisplayString31(_unref30(translate)("settings.storage_title")),1),_createElementVNode32("div",_hoisted_249," (~"+_toDisplayString31(state.storageOveral)+")",1)]),_createElementVNode32("div",_hoisted_337,[(_openBlock32(!0),_createElementBlock32(_Fragment7,null,_renderList7(state.storedProps,info=>(_openBlock32(),_createElementBlock32("div",{class:"storage-prop",onClick:$event=>openStoredData(info.name)},[_createElementVNode32("div",_hoisted_518,_toDisplayString31(info.name),1),info.len?(_openBlock32(),_createElementBlock32("div",_hoisted_616,_toDisplayString31(info.len),1)):_createCommentVNode18("v-if",!0),_createElementVNode32("div",_hoisted_714,_toDisplayString31(info.sizeStr),1),_createElementVNode32("div",{class:"btn -warn",onClick:_withModifiers11($event=>deleteStoredData(info.name),["stop"])},_toDisplayString31(_unref30(translate)("settings.storage_delete_prop")),9,_hoisted_812)],8,_hoisted_429))),256))]),_createElementVNode32("div",_hoisted_912,[_createElementVNode32("div",{class:"btn",onClick:calcStorageInfo},_toDisplayString31(_unref30(translate)("settings.update_storage_info")),1),_createElementVNode32("div",{class:"btn -warn",onClick:clearStorage},_toDisplayString31(_unref30(translate)("settings.clear_storage_info")),1)]),_createElementVNode32("div",_hoisted_1012,[_createElementVNode32("div",_hoisted_1117,[_createElementVNode32("div",_hoisted_1215,_toDisplayString31(_unref30(translate)("settings.favs_title")),1)]),_createElementVNode32("div",_hoisted_1314,[(_openBlock32(!0),_createElementBlock32(_Fragment7,null,_renderList7(state.faviconsCache,fav=>(_openBlock32(),_createElementBlock32("div",{class:"fav",key:fav.tooltip,title:fav.tooltip},[_createElementVNode32("img",{src:fav.favicon},null,8,_hoisted_1512)],8,_hoisted_1414))),128))])])],512),_createVNode27(footer_section_default)]))}});import{defineComponent as _defineComponent33}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref32,toDisplayString as _toDisplayString33,createElementVNode as _createElementVNode34,createVNode as _createVNode28,openBlock as _openBlock34,createElementBlock as _createElementBlock34}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref28,onMounted as onMounted25}from"/vendor/vue.runtime.esm-browser.prod.js";import{defineComponent as _defineComponent32}from"/vendor/vue.runtime.esm-browser.prod.js";import{toDisplayString as _toDisplayString32,createElementVNode as _createElementVNode33,openBlock as _openBlock33,createElementBlock as _createElementBlock33,unref as _unref31,withModifiers as _withModifiers12}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref27,reactive as reactive15,computed as computed13,nextTick as nextTick6}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_170=["is-focused","data-error"],_hoisted_250={key:0,class:"value"},_hoisted_338={key:1,class:"value"},_hoisted_430=["data-enabled"],_hoisted_519=_createElementVNode33("svg",null,[_createElementVNode33("use",{"xlink:href":"#icon_remove"})],-1),_hoisted_617=[_hoisted_519],ERR_SHOW_TIMEOUT=2e3,keybindings_keybinding_default=_defineComponent32({__name:"keybindings.keybinding",props:{keybinding:{}},setup(__props){let inputEl=ref27(null),state=reactive15({newShortcut:"",overrideShortcut:null}),errTimeout,errMsg="",inputLabel=computed13(()=>state.newShortcut||translate("settings.kb_input"));function changeKeybinding(cmd){state.newShortcut="",errMsg="",inputEl.value?.focus(),Keybindings.update(cmd,{focus:!0,error:""}),errTimeout&&(clearTimeout(errTimeout),Keybindings.resetErrors())}function normalizeShortcut(s){return s?Info.reactive.os==="mac"?s.replace("Command","").replace("MacCtrl",""):Info.reactive.os==="win"?s.replace("Command","Win"):Info.reactive.os==="linux"?s.replace("Command","Super"):s:"---"}async function onKBBlur(cmd){if(cmd.focus)if(errMsg){let newShortcut=state.newShortcut,dup=Keybindings.reactive.list.find(k=>k.shortcut===newShortcut);if(dup){if(dup.name===cmd.name){Keybindings.update(cmd,{focus:!1}),errMsg="";return}let title=translate("settings.kb_override_popup_title"),noteShortcut=translate("settings.kb_override_popup_note_shortcut",newShortcut),noteUsed=translate("settings.kb_override_popup_note_used",dup.description);if(await ask({title,note:noteShortcut+`
`+noteUsed,buttonsInline:!0,buttonsCentered:!0,buttons:[{label:translate("btn.yes"),value:"set"},{label:translate("btn.no"),value:"-"}],buttonsDefaultFocus:"set"})==="set"){removeKeybinding(dup),Keybindings.update(cmd,{shortcut:newShortcut,focus:!1});return}}state.overrideShortcut=cmd,Keybindings.update(cmd,{focus:!1,error:errMsg}),errTimeout&&clearTimeout(errTimeout),errTimeout=setTimeout(()=>{Keybindings.update(cmd,{error:""}),errMsg=""},ERR_SHOW_TIMEOUT)}else Keybindings.update(cmd,{focus:!1})}function onKBKey(e,cmd){if(e.key==="Escape")return inputEl.value?.blur();if(e.key==="Delete"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){if(Keybindings.reactive.list.findIndex(c=>c.name===cmd.name)===-1)return;Keybindings.update(cmd,{shortcut:"",focus:!1}),nextTick6(()=>inputEl.value?.blur());return}let keys=[];e.ctrlKey&&(Info.reactive.os==="mac"?keys.push("MacCtrl"):keys.push("Ctrl")),e.metaKey&&Info.reactive.os==="mac"&&keys.push("Ctrl"),e.altKey&&keys.length<=1&&keys.push("Alt"),e.shiftKey&&keys.length<=1&&keys.push("Shift");let LetterRe=/^[0-9A-Za-z]$/,FRe=/^F\d\d?$/;LetterRe.test(e.key)?keys.push(e.key.toUpperCase()):e.key.startsWith("Arrow")?keys.push(e.key.slice(5)):FRe.test(e.key)?keys.push(e.key):e.key===","||e.key==="<"?keys.push("Comma"):e.key==="."||e.key===">"?keys.push("Period"):e.key===" "?keys.push("Space"):e.key==="Home"||e.key==="End"||e.key==="PageUp"||e.key==="PageDown"||e.key==="Insert"||e.key==="Delete"||e.key==="Up"||e.key==="Down"||e.key==="Left"||e.key==="Right"?keys.push(e.key):e.code.startsWith("Digit")&&keys.push(e.code.slice(5));let shortcut=keys.join("+");state.newShortcut=shortcut;let checkResult=Keybindings.checkShortcut(shortcut);checkResult==="valid"?(Keybindings.update(cmd,{shortcut,focus:!1}),nextTick6(()=>inputEl.value?.blur())):errMsg=checkResult}function onKBKeyUp(e){inputEl.value?.blur()}function removeKeybinding(cmd){cmd.shortcut&&Keybindings.update(cmd,{shortcut:"",focus:!1})}return(_ctx,_cache)=>(_openBlock33(),_createElementBlock33("div",{class:"keybinding","is-focused":_ctx.keybinding.focus,"data-error":!!_ctx.keybinding.error},[_createElementVNode33("div",{class:"label",onClick:_cache[0]||(_cache[0]=$event=>changeKeybinding(_ctx.keybinding))},_toDisplayString32(_ctx.keybinding.description),1),_ctx.keybinding.focus?(_openBlock33(),_createElementBlock33("div",_hoisted_250,_toDisplayString32(inputLabel.value),1)):_ctx.keybinding.error?(_openBlock33(),_createElementBlock33("div",_hoisted_338,_toDisplayString32(_unref31(translate)("settings.kb_err_"+_ctx.keybinding.error)),1)):(_openBlock33(),_createElementBlock33("div",{key:2,class:"value",onClick:_cache[1]||(_cache[1]=$event=>changeKeybinding(_ctx.keybinding))},_toDisplayString32(normalizeShortcut(_ctx.keybinding.shortcut)),1)),_createElementVNode33("input",{type:"text",tabindex:"-1",ref_key:"inputEl",ref:inputEl,onBlur:_cache[2]||(_cache[2]=$event=>onKBBlur(_ctx.keybinding)),onKeydown:_cache[3]||(_cache[3]=_withModifiers12($event=>onKBKey($event,_ctx.keybinding),["prevent","stop"])),onKeyup:_cache[4]||(_cache[4]=_withModifiers12($event=>onKBKeyUp($event),["prevent","stop"]))},null,544),_createElementVNode33("div",{class:"icon-btn","data-enabled":!!_ctx.keybinding.shortcut,onClick:_cache[5]||(_cache[5]=$event=>removeKeybinding(_ctx.keybinding))},_hoisted_617,8,_hoisted_430)],8,_hoisted_170))}});var _hoisted_171={class:"Settings"},_hoisted_251=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_339=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_431=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_520=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_618=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_715=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_813=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_913={class:"sub-fields"},_hoisted_1013={class:"sub-fields"},_hoisted_1118={class:"info"},_hoisted_1216=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_1315=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_1415=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_1513=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_1610={class:"info"},_hoisted_179={class:"info"},_hoisted_188=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_198=_createElementVNode34("span",{class:"header-shadow"},null,-1),_hoisted_208={class:"ctrls"},keybindings_default=_defineComponent33({__name:"keybindings",setup(__props){let el=ref28(null);return onMounted25(()=>SetupPage.registerEl("settings_keybindings",el.value)),(_ctx,_cache)=>(_openBlock34(),_createElementBlock34("div",_hoisted_171,[_createElementVNode34("section",{ref_key:"el",ref:el},[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_general")),1),_hoisted_251,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName._execute_sidebar_action},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.search},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.hide_act_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.create_snapshot},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.open_snap_viewer},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.menu},null,8,["keybinding"])],512),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_switching_panel")),1),_hoisted_339,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.next_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.prev_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_0},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_1},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_2},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_3},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_4},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_5},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_6},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_7},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_8},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_panel_9},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_scroll_active_panel")),1),_hoisted_431,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.scroll_to_active_panel_top},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.scroll_to_active_panel_bottom},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_tabs")),1),_hoisted_520,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.duplicate_tabs},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.pin_tabs},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.group_tabs},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.group_tabs_act},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.flatten_tabs},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_tabs_open")),1),_hoisted_618,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.new_tab_on_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.new_tab_in_group},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.new_tab_as_first_child},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.new_tab_as_last_child},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_rm")),1),_hoisted_715,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.rm_tab_on_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.rm_tabs_above_in_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.rm_tabs_below_in_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.rm_tabs_other_in_panel},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_selections")),1),_hoisted_813,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.sel_next_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sel_prev_panel},null,8,["keybinding"]),_createVNode28(info_field_default,{label:"settings.kb_sel_tabs_bookmarks"}),_createElementVNode34("div",_hoisted_913,[_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.select_all},null,8,["keybinding"]),_createVNode28(info_field_default,{label:"settings.kb_selecting_up_down"}),_createElementVNode34("div",_hoisted_1013,[_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.up},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.down},null,8,["keybinding"]),_createVNode28(toggle_field_default,{label:"settings.select_active_tab_first",value:_unref32(Settings).state.selectActiveTabFirst,"onUpdate:value":[_cache[0]||(_cache[0]=$event=>_unref32(Settings).state.selectActiveTabFirst=$event),_cache[1]||(_cache[1]=$event=>_unref32(Settings).saveDebounced(150))]},null,8,["value"])]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.up_shift},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.down_shift},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sel_child_tabs},null,8,["keybinding"])]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.reset_selection},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.activate},null,8,["keybinding"]),_createElementVNode34("div",_hoisted_1118,_toDisplayString33(_unref32(translate)("settings.kb_select_act_note")),1)]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_unloading_tabs")),1),_hoisted_1216,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.unload_tabs},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.unload_all_tabs_in_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.unload_other_tabs_in_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.unload_folded_tabs_in_panel},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.unload_all_tabs_in_inact_panels},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_branches")),1),_hoisted_1315,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.fold_branch},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.expand_branch},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.toggle_branch},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.fold_inact_branches},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_active_tabs_history")),1),_hoisted_1415,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.activate_prev_active_tab_c},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.activate_prev_active_tab},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.activate_next_active_tab},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.activate_panel_prev_active_tab},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.activate_panel_next_active_tab},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_switching_tab")),1),_hoisted_1513,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.switch_to_next_tab},null,8,["keybinding"]),_createElementVNode34("div",_hoisted_1610,_toDisplayString33(_unref32(translate)("settings.kb_switch_act_note")),1),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_prev_tab},null,8,["keybinding"]),_createElementVNode34("div",_hoisted_179,_toDisplayString33(_unref32(translate)("settings.kb_switch_act_note")),1),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_parent_tab},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_0},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_1},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_2},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_3},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_4},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_5},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_6},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_7},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_8},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_unpinned_tab_9},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_0},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_1},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_2},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_3},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_4},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_5},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_6},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_7},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_8},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_tab_9},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.switch_to_last_tab},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_move_tabs")),1),_hoisted_188,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.move_tab_to_active},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_up},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_down},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_start},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_end},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.tabs_indent},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.tabs_outdent},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_0},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_1},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_2},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_3},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_4},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_5},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_6},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_7},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_8},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.move_tabs_to_panel_9},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("h2",null,_toDisplayString33(_unref32(translate)("settings.kb_sort_tabs")),1),_hoisted_198,_createVNode28(keybindings_keybinding_default,{class:"-no-separator",keybinding:_unref32(Keybindings).reactive.byName.sort_tabs_by_title_asc},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_tabs_by_title_des},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_tabs_by_url_asc},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_tabs_by_url_des},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_tabs_by_time_asc},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_tabs_by_time_des},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_panel_tabs_by_title_asc},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_panel_tabs_by_title_des},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_panel_tabs_by_url_asc},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_panel_tabs_by_url_des},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_panel_tabs_by_time_asc},null,8,["keybinding"]),_createVNode28(keybindings_keybinding_default,{keybinding:_unref32(Keybindings).reactive.byName.sort_panel_tabs_by_time_des},null,8,["keybinding"])]),_createElementVNode34("section",null,[_createElementVNode34("div",_hoisted_208,[_createElementVNode34("div",{class:"btn",onClick:_cache[2]||(_cache[2]=(...args)=>_unref32(Keybindings).resetKeybindings&&_unref32(Keybindings).resetKeybindings(...args))},_toDisplayString33(_unref32(translate)("settings.reset_kb")),1)])])]))}});import{defineComponent as _defineComponent34}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref33,toDisplayString as _toDisplayString34,openBlock as _openBlock35,createElementBlock as _createElementBlock35,createCommentVNode as _createCommentVNode20,renderList as _renderList8,Fragment as _Fragment8,createElementVNode as _createElementVNode35,withModifiers as _withModifiers13,createVNode as _createVNode29,normalizeClass as _normalizeClass2}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref29,computed as computed14,onMounted as onMounted26}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_180={key:0,class:"popup"},_hoisted_258={key:0},_hoisted_340={key:1,class:"rules"},_hoisted_435=["data-edit","data-active","onClick"],_hoisted_521=["data-color"],_hoisted_619={class:"icon-box"},_hoisted_716={class:"icon"},_hoisted_814=["xlink:href"],_hoisted_914={class:"container"},_hoisted_1014={key:0,class:"controls-box"},_hoisted_1119=["onClick"],_hoisted_1217=_createElementVNode35("svg",null,[_createElementVNode35("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_1316=[_hoisted_1217],_hoisted_1416=["onClick"],_hoisted_1514=_createElementVNode35("svg",null,[_createElementVNode35("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_1611=[_hoisted_1514],_hoisted_1710=["onClick"],_hoisted_189=_createElementVNode35("svg",null,[_createElementVNode35("use",{"xlink:href":"#icon_remove"})],-1),_hoisted_199=[_hoisted_189],_hoisted_209=["data-with-container"],_hoisted_2113={class:"url"},_hoisted_2211={key:0,class:"controls-box"},_hoisted_2311=["onClick"],_hoisted_2410=_createElementVNode35("svg",null,[_createElementVNode35("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_259=[_hoisted_2410],_hoisted_267=["onClick"],_hoisted_277=_createElementVNode35("svg",null,[_createElementVNode35("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_286=[_hoisted_277],_hoisted_295=["onClick"],_hoisted_305=_createElementVNode35("svg",null,[_createElementVNode35("use",{"xlink:href":"#icon_remove"})],-1),_hoisted_3112=[_hoisted_305],_hoisted_3211=_createElementVNode35("div",{class:"space"},null,-1),_hoisted_3310={key:2,class:"ctrls"},_hoisted_345={key:3,class:"ctrls"},popup_tab_move_rules_default=_defineComponent34({__name:"popup.tab-move-rules",setup(__props){let rules=ref29([]),newRuleName=ref29(""),newRuleContainerId=ref29("none"),newRuleURL=ref29(""),newRuleTopLvl=ref29(!0),editing=ref29(null),addBtnActive=computed14(()=>{let urlIsValid=!!newRuleURL.value,containerIsValid=newRuleContainerId.value!=="none";return urlIsValid||containerIsValid});onMounted26(()=>{initPopupState()});function initPopupState(){if(!reactive.tabMoveRulesPopup)return[];let output=[],ruleConfigs=reactive.tabMoveRulesPopup.rules;for(let conf of ruleConfigs)output.push(createRulePreview(conf));rules.value=output}function createRulePreview(ruleConfig){let rule={id:ruleConfig.id,active:ruleConfig.active,url:ruleConfig.url},container;return ruleConfig.containerId&&(container=getContainerConf(ruleConfig.containerId)),container?(rule.containerId=ruleConfig.containerId,rule.containerName=container.name,rule.containerIcon="#"+container.icon,rule.containerColor=container.color):ruleConfig.containerId&&(rule.active=!1),ruleConfig.url&&(rule.url=ruleConfig.url,rule.urlIcon="#icon_ff"),rule.topLvlOnly=!!ruleConfig.topLvlOnly,ruleConfig.name&&(rule.name=ruleConfig.name),rule}function getContainerConf(containerId){if(containerId==="none")return;if(containerId===DEFAULT_CONTAINER_ID){let defaultTitle=translate("popup.new_tab_shortcuts.new_shortcut_default_container");return{id:DEFAULT_CONTAINER_ID,name:defaultTitle,icon:"icon_ff",color:"toolbar"}}let container=Containers.reactive.byId[containerId];if(container)return{id:container.id,name:container.name,icon:container.icon,color:container.color}}let availableContainersOpts=computed14(()=>{if(!reactive.tabMoveRulesPopup)return[];let defaultTitle=translate("popup.new_tab_shortcuts.new_shortcut_default_container"),result=[{value:"none",color:"inactive",icon:"#icon_none",title:"Not set",tooltip:"Not set"},{value:DEFAULT_CONTAINER_ID,color:"toolbar",icon:"#icon_ff",title:defaultTitle,tooltip:defaultTitle}];for(let c of Object.values(Containers.reactive.byId)){let icon="#"+c.icon;result.push({value:c.id,color:c.color,icon,title:c.name,tooltip:c.name})}return result});function onAdd(){if(!reactive.tabMoveRulesPopup||!addBtnActive.value||!newRuleURL.value&&newRuleContainerId.value==="none")return;let name=newRuleName.value.trim(),panelId=reactive.tabMoveRulesPopup.panelId,panel=Info.isSidebar?Sidebar.panelsById[panelId]:SidebarConfigRState.panels[panelId],panels=Info.isSidebar?Sidebar.panels:Object.values(SidebarConfigRState.panels);if(!isTabsPanel(panel))return;let newCtrId=newRuleContainerId.value!=="none"?newRuleContainerId.value:void 0,newURL=newRuleURL.value?newRuleURL.value:void 0;panels.find(p=>{if(!isTabsPanel(p))return!1;let sameRuleIndex=p.moveRules.findIndex(r=>newCtrId===r.containerId&&newURL===r.url);sameRuleIndex!==-1&&(p.moveRules.splice(sameRuleIndex,1),p.id===panel.id&&rules.value.splice(sameRuleIndex,1))});let ruleConfig={id:uid(),active:!0};newRuleContainerId.value!=="none"&&(ruleConfig.containerId=newRuleContainerId.value),newRuleURL.value&&(ruleConfig.url=newRuleURL.value),name&&(ruleConfig.name=name),panel.moveRules.push(ruleConfig),rules.value.push(createRulePreview(ruleConfig)),newRuleName.value="",newRuleURL.value="",newRuleContainerId.value="none",Info.isSidebar?Sidebar.saveSidebar(1e3):saveSidebarConfig(1e3)}function onCancel(){reactive.tabMoveRulesPopup&&closeTabMoveRulesPopup()}function shortcutUp(rule){if(!reactive.tabMoveRulesPopup)return;let panelId=reactive.tabMoveRulesPopup.panelId,panel=Info.isSidebar?Sidebar.panelsById[panelId]:SidebarConfigRState.panels[panelId];if(!isTabsPanel(panel))return;let index=panel.moveRules.findIndex(r=>r.id===rule.id);if(index!==-1&&index>0){let ruleConfig=panel.moveRules.splice(index,1)[0];ruleConfig&&panel.moveRules.splice(index-1,0,ruleConfig)}let localIndex=rules.value.findIndex(r=>r.id===rule.id);localIndex!==-1&&localIndex>0&&(rules.value.splice(localIndex,1),rules.value.splice(localIndex-1,0,rule)),Info.isSidebar?Sidebar.saveSidebar(1e3):saveSidebarConfig(1e3)}function shortcutDown(rule){if(!reactive.tabMoveRulesPopup)return;let panelId=reactive.tabMoveRulesPopup.panelId,panel=Info.isSidebar?Sidebar.panelsById[panelId]:SidebarConfigRState.panels[panelId];if(!isTabsPanel(panel))return;let index=panel.moveRules.findIndex(r=>r.id===rule.id);if(index!==-1&&index<panel.moveRules.length-1){let ruleConfig=panel.moveRules.splice(index,1)[0];ruleConfig&&panel.moveRules.splice(index+1,0,ruleConfig)}let localIndex=rules.value.findIndex(r=>r.id===rule.id);localIndex!==-1&&localIndex<panel.moveRules.length-1&&(rules.value.splice(localIndex,1),rules.value.splice(localIndex+1,0,rule)),Info.isSidebar?Sidebar.saveSidebar(1e3):saveSidebarConfig(1e3)}function removeRule(rule){if(!reactive.tabMoveRulesPopup)return;let panelId=reactive.tabMoveRulesPopup.panelId,panel=Info.isSidebar?Sidebar.panelsById[panelId]:SidebarConfigRState.panels[panelId];if(!isTabsPanel(panel))return;let index=panel.moveRules.findIndex(r=>r.id===rule.id);index!==-1&&panel.moveRules.splice(index,1);let localIndex=rules.value.findIndex(r=>r.id===rule.id);localIndex!==-1&&rules.value.splice(localIndex,1),Info.isSidebar?Sidebar.saveSidebar(1e3):saveSidebarConfig(1e3)}function editRule(rule){if(editing.value===rule.id)return onEditCancel();editing.value=rule.id,rule.url?newRuleURL.value=rule.url:newRuleURL.value="",rule.containerId&&getContainerConf(rule.containerId)?newRuleContainerId.value=rule.containerId:newRuleContainerId.value="none",newRuleTopLvl.value=!!rule.topLvlOnly,rule.name?newRuleName.value=rule.name:newRuleName.value=""}function onEditCancel(){editing.value=null,newRuleName.value="",newRuleURL.value="",newRuleContainerId.value="none",newRuleTopLvl.value=!0}function onSave(){if(!editing.value||!reactive.tabMoveRulesPopup)return;let panelId=reactive.tabMoveRulesPopup.panelId,panel=Info.isSidebar?Sidebar.panelsById[panelId]:SidebarConfigRState.panels[panelId],panels=Info.isSidebar?Sidebar.panels:Object.values(SidebarConfigRState.panels);if(!isTabsPanel(panel))return;let rule=rules.value.find(r=>r.id===editing.value);if(!rule)return;let name=newRuleName.value.trim(),newCtrId=newRuleContainerId.value!=="none"?newRuleContainerId.value:void 0,newURL=newRuleURL.value?newRuleURL.value:void 0;panels.find(p=>{if(!isTabsPanel(p))return!1;let sameRuleIndex=p.moveRules.findIndex(r=>rule.id===r.id?!1:newCtrId===r.containerId&&newURL===r.url);sameRuleIndex!==-1&&(p.moveRules.splice(sameRuleIndex,1),p.id===panel.id&&rules.value.splice(sameRuleIndex,1))});let ruleConfig=panel.moveRules.find(r=>r.id===rule.id);ruleConfig&&(ruleConfig.active=!0,newRuleContainerId.value!=="none"?ruleConfig.containerId=newRuleContainerId.value:delete ruleConfig.containerId,newRuleURL.value?ruleConfig.url=newRuleURL.value:delete ruleConfig.url,ruleConfig.topLvlOnly=newRuleTopLvl.value,name?ruleConfig.name=name:delete ruleConfig.name),Info.isSidebar?Sidebar.saveSidebar(1e3):saveSidebarConfig(1e3),rule.active=!0,rule.name=name||void 0;let container=getContainerConf(newRuleContainerId.value);container?(rule.containerId=container.id,rule.containerName=container.name,rule.containerIcon="#"+container.icon,rule.containerColor=container.color):delete rule.containerId,newRuleURL.value?rule.url=newRuleURL.value:delete rule.url,rule.topLvlOnly=newRuleTopLvl.value,newRuleName.value="",newRuleURL.value="",newRuleContainerId.value="none",newRuleTopLvl.value=!0,editing.value=null}return(_ctx,_cache)=>(_openBlock35(),_createElementBlock35("div",{class:"TabMoveRulesPopup popup-container",onMousedown:_withModifiers13(onCancel,["stop","self"]),onMouseup:_cache[4]||(_cache[4]=_withModifiers13(()=>{},["stop"]))},[reactive.tabMoveRulesPopup?(_openBlock35(),_createElementBlock35("div",_hoisted_180,[rules.value.length?(_openBlock35(),_createElementBlock35("h2",_hoisted_258,_toDisplayString34(_unref33(translate)("popup.tab_move_rules.title")),1)):_createCommentVNode20("v-if",!0),rules.value.length?(_openBlock35(),_createElementBlock35("div",_hoisted_340,[(_openBlock35(!0),_createElementBlock35(_Fragment8,null,_renderList8(rules.value,rule=>(_openBlock35(),_createElementBlock35("div",{class:"rule",key:rule.id,"data-edit":rule.id===editing.value,"data-active":rule.active,onClick:$event=>editRule(rule)},[rule.containerId?(_openBlock35(),_createElementBlock35("div",{key:0,class:"container-box","data-color":rule.containerColor},[_createElementVNode35("div",_hoisted_619,[(_openBlock35(),_createElementBlock35("svg",_hoisted_716,[_createElementVNode35("use",{"xlink:href":rule.containerIcon},null,8,_hoisted_814)]))]),_createElementVNode35("div",_hoisted_914,_toDisplayString34(rule.containerName),1),editing.value?_createCommentVNode20("v-if",!0):(_openBlock35(),_createElementBlock35("div",_hoisted_1014,[_createElementVNode35("div",{class:"btn-up",onClick:_withModifiers13($event=>shortcutUp(rule),["stop"])},_hoisted_1316,8,_hoisted_1119),_createElementVNode35("div",{class:"btn-down",onClick:_withModifiers13($event=>shortcutDown(rule),["stop"])},_hoisted_1611,8,_hoisted_1416),_createElementVNode35("div",{class:"btn-rm",onClick:_withModifiers13($event=>removeRule(rule),["stop"])},_hoisted_199,8,_hoisted_1710)]))],8,_hoisted_521)):_createCommentVNode20("v-if",!0),rule.url?(_openBlock35(),_createElementBlock35("div",{key:1,class:"url-box","data-with-container":!!rule.containerId},[_createElementVNode35("div",_hoisted_2113,_toDisplayString34(rule.name||rule.url),1),!rule.containerId&&!editing.value?(_openBlock35(),_createElementBlock35("div",_hoisted_2211,[_createElementVNode35("div",{class:"btn-up",onClick:_withModifiers13($event=>shortcutUp(rule),["stop"])},_hoisted_259,8,_hoisted_2311),_createElementVNode35("div",{class:"btn-down",onClick:_withModifiers13($event=>shortcutDown(rule),["stop"])},_hoisted_286,8,_hoisted_267),_createElementVNode35("div",{class:"btn-rm",onClick:_withModifiers13($event=>removeRule(rule),["stop"])},_hoisted_3112,8,_hoisted_295)])):_createCommentVNode20("v-if",!0)],8,_hoisted_209)):_createCommentVNode20("v-if",!0)],8,_hoisted_435))),128))])):_createCommentVNode20("v-if",!0),_hoisted_3211,_createElementVNode35("h2",null,_toDisplayString34(editing.value?_unref33(translate)("popup.tab_move_rules.editor_title.edit"):_unref33(translate)("popup.tab_move_rules.editor_title.new")),1),_createVNode29(text_field_default,{class:"-no-separator -compact",label:"popup.tab_move_rules.rule_name_label",value:newRuleName.value,"onUpdate:value":_cache[0]||(_cache[0]=$event=>newRuleName.value=$event),or:"...",line:!0},null,8,["value","or"]),_createVNode29(select_field_default,{class:"-no-separator -compact",label:"popup.tab_move_rules.rule_container_label",noneOpt:"-",value:newRuleContainerId.value,"onUpdate:value":_cache[1]||(_cache[1]=$event=>newRuleContainerId.value=$event),opts:availableContainersOpts.value,inline:!1,folded:!0},null,8,["value","opts"]),_createVNode29(text_field_default,{class:"-compact",label:"popup.tab_move_rules.rule_url_label",value:newRuleURL.value,"onUpdate:value":_cache[2]||(_cache[2]=$event=>newRuleURL.value=$event),or:"Any URL",line:!0},null,8,["value"]),_createVNode29(toggle_field_default,{class:"-compact",label:"popup.tab_move_rules.rule_top_lvl_label",value:newRuleTopLvl.value,"onUpdate:value":_cache[3]||(_cache[3]=$event=>newRuleTopLvl.value=$event)},null,8,["value"]),editing.value?(_openBlock35(),_createElementBlock35("div",_hoisted_3310,[_createElementVNode35("div",{class:_normalizeClass2(["btn",{"-inactive":!addBtnActive.value}]),onClick:onSave},_toDisplayString34(_unref33(translate)("popup.tab_move_rules.edit_rule_btn.save")),3),_createElementVNode35("div",{class:"btn",onClick:onEditCancel},_toDisplayString34(_unref33(translate)("popup.tab_move_rules.edit_rule_btn.cancel")),1)])):(_openBlock35(),_createElementBlock35("div",_hoisted_345,[_createElementVNode35("div",{class:_normalizeClass2(["btn -wide",{"-inactive":!addBtnActive.value}]),onClick:onAdd},_toDisplayString34(_unref33(translate)("popup.tab_move_rules.add_rule_btn")),3)]))])):_createCommentVNode20("v-if",!0)],32))}});import{defineComponent as _defineComponent35}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref34,toDisplayString as _toDisplayString35,openBlock as _openBlock36,createElementBlock as _createElementBlock36,createCommentVNode as _createCommentVNode21,renderList as _renderList9,Fragment as _Fragment9,createElementVNode as _createElementVNode36,withModifiers as _withModifiers14,createBlock as _createBlock8,createVNode as _createVNode30,normalizeClass as _normalizeClass3}from"/vendor/vue.runtime.esm-browser.prod.js";import{ref as ref30,computed as computed15,onMounted as onMounted27}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_181={key:0,class:"popup"},_hoisted_260={key:0},_hoisted_341=["data-active"],_hoisted_436=["data-active","data-edit","data-type","data-color","onClick"],_hoisted_523={class:"url-box"},_hoisted_620={class:"icon-box"},_hoisted_717={class:"icon"},_hoisted_815=["xlink:href"],_hoisted_915={class:"url"},_hoisted_1015={key:0,class:"controls-box"},_hoisted_1120=["onClick"],_hoisted_1218=_createElementVNode36("svg",null,[_createElementVNode36("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_1317=[_hoisted_1218],_hoisted_1417=["onClick"],_hoisted_1515=_createElementVNode36("svg",null,[_createElementVNode36("use",{"xlink:href":"#icon_expand"})],-1),_hoisted_1612=[_hoisted_1515],_hoisted_1711=["onClick"],_hoisted_1810=_createElementVNode36("svg",null,[_createElementVNode36("use",{"xlink:href":"#icon_remove"})],-1),_hoisted_1910=[_hoisted_1810],_hoisted_2010=_createElementVNode36("div",{class:"space"},null,-1),_hoisted_2114={class:"type-selector"},_hoisted_2212=["data-active"],_hoisted_2312=_createElementVNode36("svg",{class:"icon"},[_createElementVNode36("use",{"xlink:href":"#icon_ctr_include"})],-1),_hoisted_2411={class:"label"},_hoisted_2510=["data-active"],_hoisted_268=_createElementVNode36("svg",{class:"icon"},[_createElementVNode36("use",{"xlink:href":"#icon_ctr_exclude"})],-1),_hoisted_278={class:"label"},_hoisted_287={key:3,class:"note"},_hoisted_296={key:4,class:"note"},_hoisted_306={key:5,class:"ctrls"},_hoisted_3113={key:6,class:"ctrls"},popup_tab_reopen_rules_default=_defineComponent35({__name:"popup.tab-reopen-rules",setup(__props){let rules=ref30([]),newRuleName=ref30(""),newRuleType=ref30("include"),newRuleURL=ref30(""),editing=ref30(null),addBtnActive=computed15(()=>!!newRuleURL.value);onMounted27(()=>{initPopupState()});function initPopupState(){if(!reactive.tabReopenRulesPopup)return[];let output=[],ruleConfigs=reactive.tabReopenRulesPopup.container.reopenRules;for(let conf of ruleConfigs)output.push(createRulePreview(conf));rules.value=output}function createRulePreview(ruleConfig){let rule={id:ruleConfig.id,type:ruleConfig.type===1?"include":"exclude",url:ruleConfig.url,active:ruleConfig.active};return ruleConfig.url&&(rule.url=ruleConfig.url,rule.urlIcon="#icon_ff"),ruleConfig.name&&(rule.name=ruleConfig.name),rule}async function onAdd(){if(!reactive.tabReopenRulesPopup||!addBtnActive.value||!newRuleURL.value)return;let container=reactive.tabReopenRulesPopup.container,name=newRuleName.value.trim();if(!Permissions.reactive.webData&&!container.reopenRulesActive&&!await Permissions.request("<all_urls>"))return;let ruleConfig={id:uid(),active:!0,type:newRuleType.value==="include"?1:2,url:newRuleURL.value};container.reopenRules.length||(container.reopenRulesActive=!0),name&&(ruleConfig.name=name),container.reopenRules.push(ruleConfig),rules.value.push(createRulePreview(ruleConfig)),newRuleName.value="",newRuleType.value="include",newRuleURL.value="",Containers.saveContainers(1e3)}function onCancel(){reactive.tabReopenRulesPopup&&closeTabReopenRulesPopup()}function shortcutUp(rule){if(!reactive.tabReopenRulesPopup)return;let container=reactive.tabReopenRulesPopup.container,index=container.reopenRules.findIndex(r=>r.id===rule.id);if(index!==-1&&index>0){let ruleConfig=container.reopenRules.splice(index,1)[0];ruleConfig&&container.reopenRules.splice(index-1,0,ruleConfig)}let localIndex=rules.value.findIndex(r=>r.id===rule.id);localIndex!==-1&&localIndex>0&&(rules.value.splice(localIndex,1),rules.value.splice(localIndex-1,0,rule)),Containers.saveContainers(1e3)}function shortcutDown(rule){if(!reactive.tabReopenRulesPopup)return;let container=reactive.tabReopenRulesPopup.container,index=container.reopenRules.findIndex(r=>r.id===rule.id);if(index!==-1&&index<container.reopenRules.length-1){let ruleConfig=container.reopenRules.splice(index,1)[0];ruleConfig&&container.reopenRules.splice(index+1,0,ruleConfig)}let localIndex=rules.value.findIndex(r=>r.id===rule.id);localIndex!==-1&&localIndex<container.reopenRules.length-1&&(rules.value.splice(localIndex,1),rules.value.splice(localIndex+1,0,rule)),Containers.saveContainers(1e3)}function removeRule(rule){if(!reactive.tabReopenRulesPopup)return;let container=reactive.tabReopenRulesPopup.container,index=container.reopenRules.findIndex(r=>r.id===rule.id);index!==-1&&container.reopenRules.splice(index,1),container.reopenRules.length||(container.reopenRulesActive=!1);let localIndex=rules.value.findIndex(r=>r.id===rule.id);localIndex!==-1&&rules.value.splice(localIndex,1),Containers.saveContainers(1e3)}function editRule(rule){if(editing.value===rule.id)return onEditCancel();editing.value=rule.id,rule.url?newRuleURL.value=rule.url:newRuleURL.value="",newRuleType.value=rule.type,rule.name?newRuleName.value=rule.name:newRuleName.value=""}function onEditCancel(){editing.value=null,newRuleName.value="",newRuleURL.value="",newRuleType.value="include"}function onSave(){if(!editing.value||!newRuleURL.value||!reactive.tabReopenRulesPopup)return;let container=reactive.tabReopenRulesPopup.container,rule=rules.value.find(r=>r.id===editing.value);if(!rule)return;let name=newRuleName.value.trim(),ruleConfig=container.reopenRules.find(r=>r.id===rule.id);if(ruleConfig){ruleConfig.active=!0,ruleConfig.url=newRuleURL.value;let isIncludeRule=newRuleType.value==="include";ruleConfig.type=isIncludeRule?1:2,name?ruleConfig.name=name:delete ruleConfig.name,Containers.saveContainers(1e3)}rule.name=name||void 0,rule.url=newRuleURL.value,rule.type=newRuleType.value,rule.active=!0,newRuleName.value="",newRuleURL.value="",newRuleType.value="include",editing.value=null}async function toggleRules(){let container=reactive.tabReopenRulesPopup?.container;container&&(!Permissions.reactive.webData&&!container.reopenRulesActive&&!await Permissions.request("<all_urls>")||(container.reopenRulesActive=!container.reopenRulesActive,Containers.saveContainers(1e3)))}return(_ctx,_cache)=>(_openBlock36(),_createElementBlock36("div",{class:"TabReopenRulesPopup popup-container",onMousedown:_withModifiers14(onCancel,["stop","self"]),onMouseup:_cache[4]||(_cache[4]=_withModifiers14(()=>{},["stop"]))},[reactive.tabReopenRulesPopup?(_openBlock36(),_createElementBlock36("div",_hoisted_181,[rules.value.length?(_openBlock36(),_createElementBlock36("h2",_hoisted_260,_toDisplayString35(_unref34(translate)("popup.tab_reopen_rules.title")),1)):_createCommentVNode21("v-if",!0),rules.value.length?(_openBlock36(),_createElementBlock36("div",{key:1,class:"rules","data-active":reactive.tabReopenRulesPopup.container.reopenRulesActive},[(_openBlock36(!0),_createElementBlock36(_Fragment9,null,_renderList9(rules.value,rule=>(_openBlock36(),_createElementBlock36("div",{class:"rule",key:rule.id,"data-active":rule.active,"data-edit":rule.id===editing.value,"data-type":rule.type,"data-color":rule.type==="include"?"green":"red",onClick:$event=>editRule(rule)},[_createElementVNode36("div",_hoisted_523,[_createElementVNode36("div",_hoisted_620,[(_openBlock36(),_createElementBlock36("svg",_hoisted_717,[_createElementVNode36("use",{"xlink:href":rule.type==="include"?"#icon_ctr_include":"#icon_ctr_exclude"},null,8,_hoisted_815)]))]),_createElementVNode36("div",_hoisted_915,_toDisplayString35(rule.name||rule.url),1),editing.value?_createCommentVNode21("v-if",!0):(_openBlock36(),_createElementBlock36("div",_hoisted_1015,[_createElementVNode36("div",{class:"btn-up",onClick:_withModifiers14($event=>shortcutUp(rule),["stop"])},_hoisted_1317,8,_hoisted_1120),_createElementVNode36("div",{class:"btn-down",onClick:_withModifiers14($event=>shortcutDown(rule),["stop"])},_hoisted_1612,8,_hoisted_1417),_createElementVNode36("div",{class:"btn-rm",onClick:_withModifiers14($event=>removeRule(rule),["stop"])},_hoisted_1910,8,_hoisted_1711)]))])],8,_hoisted_436))),128))],8,_hoisted_341)):_createCommentVNode21("v-if",!0),rules.value.length?(_openBlock36(),_createBlock8(toggle_field_default,{key:2,class:"-compact",label:"popup.tab_reopen_rules.enable_label",value:reactive.tabReopenRulesPopup.container.reopenRulesActive,"onUpdate:value":toggleRules},null,8,["value"])):_createCommentVNode21("v-if",!0),_hoisted_2010,_createElementVNode36("h2",null,_toDisplayString35(editing.value?_unref34(translate)("popup.tab_reopen_rules.editor_title.edit"):_unref34(translate)("popup.tab_reopen_rules.editor_title.new")),1),_createVNode30(text_field_default,{class:"-no-separator -compact",label:"popup.tab_reopen_rules.rule_name_label",value:newRuleName.value,"onUpdate:value":_cache[0]||(_cache[0]=$event=>newRuleName.value=$event),or:"...",line:!0},null,8,["value","or"]),_createElementVNode36("div",_hoisted_2114,[_createElementVNode36("div",{class:"type-opt","data-color":"green","data-active":newRuleType.value==="include",onClick:_cache[1]||(_cache[1]=$event=>newRuleType.value="include")},[_hoisted_2312,_createElementVNode36("div",_hoisted_2411,_toDisplayString35(_unref34(translate)("popup.tab_reopen_rules.rule_type_include")),1)],8,_hoisted_2212),_createElementVNode36("div",{class:"type-opt","data-color":"red","data-active":newRuleType.value==="exclude",onClick:_cache[2]||(_cache[2]=$event=>newRuleType.value="exclude")},[_hoisted_268,_createElementVNode36("div",_hoisted_278,_toDisplayString35(_unref34(translate)("popup.tab_reopen_rules.rule_type_exclude")),1)],8,_hoisted_2510)]),_createVNode30(text_field_default,{class:"-no-separator -compact",label:"popup.tab_reopen_rules.rule_url_label",value:newRuleURL.value,"onUpdate:value":_cache[3]||(_cache[3]=$event=>newRuleURL.value=$event),or:"URL...",line:!0},null,8,["value","or"]),newRuleType.value==="include"?(_openBlock36(),_createElementBlock36("div",_hoisted_287,_toDisplayString35(_unref34(translate)("popup.tab_reopen_rules.rule_suffix_include",reactive.tabReopenRulesPopup.container.name)),1)):(_openBlock36(),_createElementBlock36("div",_hoisted_296,_toDisplayString35(_unref34(translate)("popup.tab_reopen_rules.rule_suffix_exclude",reactive.tabReopenRulesPopup.container.name)),1)),editing.value?(_openBlock36(),_createElementBlock36("div",_hoisted_306,[_createElementVNode36("div",{class:_normalizeClass3(["btn",{"-inactive":!addBtnActive.value}]),onClick:onSave},_toDisplayString35(_unref34(translate)("popup.tab_reopen_rules.edit_rule_btn.save")),3),_createElementVNode36("div",{class:"btn",onClick:onEditCancel},_toDisplayString35(_unref34(translate)("popup.tab_reopen_rules.edit_rule_btn.cancel")),1)])):(_openBlock36(),_createElementBlock36("div",_hoisted_3113,[_createElementVNode36("div",{class:_normalizeClass3(["btn -wide",{"-inactive":!addBtnActive.value}]),onClick:onAdd},_toDisplayString35(_unref34(translate)("popup.tab_reopen_rules.add_rule_btn")),3)]))])):_createCommentVNode21("v-if",!0)],32))}});import{defineComponent as _defineComponent36}from"/vendor/vue.runtime.esm-browser.prod.js";import{unref as _unref35,toDisplayString as _toDisplayString36,openBlock as _openBlock37,createElementBlock as _createElementBlock37,createCommentVNode as _createCommentVNode22,createElementVNode as _createElementVNode37,vModelText as _vModelText2,withModifiers as _withModifiers15,withKeys as _withKeys,withDirectives as _withDirectives2}from"/vendor/vue.runtime.esm-browser.prod.js";var _hoisted_190={class:"box"},_hoisted_261={key:0,class:"title"},_hoisted_346={key:1,class:"json"},settings_details_default=_defineComponent36({__name:"settings.details",setup(__props){function onDetailsWheel(e){let target=e.target;target.offsetHeight>=target.scrollHeight&&(target=target.parentNode);let scrollOffset=target.scrollTop,offsetHeight=target.offsetHeight,maxScrollOffset=target.scrollHeight-offsetHeight;scrollOffset===0&&e.deltaY<0&&e.preventDefault(),scrollOffset===maxScrollOffset&&e.deltaY>0&&e.preventDefault()}function copyDetails(){SetupPage.reactive.detailsText&&navigator.clipboard.writeText(SetupPage.reactive.detailsText)}function editDetails(){SetupPage.reactive.detailsMode="edit"}function saveDetails(){if(SetupPage.reactive.detailsEdit)try{SetupPage.reactive.detailsEdit(SetupPage.reactive.detailsText)}catch(err2){window.alert(err2)}closeDetails()}function closeDetails(){SetupPage.reactive.detailsText="",SetupPage.reactive.detailsTitle="",SetupPage.reactive.detailsEdit=void 0}return(_ctx,_cache)=>_unref35(SetupPage).reactive.detailsText?(_openBlock37(),_createElementBlock37("div",{key:0,class:"DetailsBox",onWheel:onDetailsWheel},[_createElementVNode37("div",_hoisted_190,[_unref35(SetupPage).reactive.detailsTitle?(_openBlock37(),_createElementBlock37("div",_hoisted_261,_toDisplayString36(_unref35(SetupPage).reactive.detailsTitle),1)):_createCommentVNode22("v-if",!0),_unref35(SetupPage).reactive.detailsMode==="view"&&_unref35(SetupPage).reactive.detailsEdit?(_openBlock37(),_createElementBlock37("div",{key:1,class:"btn",onClick:editDetails},_toDisplayString36(_unref35(translate)("settings.ctrl_edit")),1)):_unref35(SetupPage).reactive.detailsMode==="edit"?(_openBlock37(),_createElementBlock37("div",{key:2,class:"btn",onClick:saveDetails},_toDisplayString36(_unref35(translate)("settings.ctrl_save")),1)):_createCommentVNode22("v-if",!0),_createElementVNode37("div",{class:"btn",onClick:copyDetails},_toDisplayString36(_unref35(translate)("settings.ctrl_copy")),1),_createElementVNode37("div",{class:"btn -warn",onClick:closeDetails},_toDisplayString36(_unref35(translate)("settings.ctrl_close")),1)]),_unref35(SetupPage).reactive.detailsMode==="edit"&&_unref35(SetupPage).reactive.detailsEdit?_withDirectives2((_openBlock37(),_createElementBlock37("textarea",{key:0,class:"editor","onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>_unref35(SetupPage).reactive.detailsText=$event),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",onKeydown:_cache[1]||(_cache[1]=_withKeys(_withModifiers15(()=>{},["prevent"]),["tab"]))},null,544)),[[_vModelText2,_unref35(SetupPage).reactive.detailsText]]):(_openBlock37(),_createElementBlock37("div",_hoisted_346,_toDisplayString36(_unref35(SetupPage).reactive.detailsText),1))],32)):_createCommentVNode22("v-if",!0)}});var _hoisted_191=["data-toolbar-color-scheme","data-animations","data-sticky-bookmarks"],_hoisted_269={class:"nav"},_hoisted_347=["data-active","onClick"],_hoisted_437={class:"body"},setup_default=_defineComponent37({__name:"setup",setup(__props){let animations=computed16(()=>Settings.state.animations?"fast":"none");onMounted28(()=>{document.addEventListener("keyup",onDocumentKeyup)});function onDocumentKeyup(e){if(e.code==="Escape"){if(Bookmarks.reactive.popup?.close){Bookmarks.reactive.popup.close();return}if(reactive.tabReopenRulesPopup){closeTabReopenRulesPopup();return}if(reactive.tabMoveRulesPopup){closeTabMoveRulesPopup();return}if(reactive.newTabShortcutsPopup){closeNewTabShortcutsPopup();return}if(reactive.dialog){reactive.dialog.result(null);return}SetupPage.reactive.selectedPanelConfig&&(SetupPage.reactive.selectedPanelConfig=null),SetupPage.reactive.selectedContainer&&(SetupPage.reactive.selectedContainer=null),SetupPage.reactive.detailsText&&(SetupPage.reactive.detailsText="",SetupPage.reactive.detailsTitle="",SetupPage.reactive.detailsEdit=void 0),SetupPage.reactive.exportDialog&&(SetupPage.reactive.exportDialog=!1),SetupPage.reactive.importedData&&(SetupPage.reactive.importedData=null)}}function navigateTo(urlHash){location.hash.slice(1)===urlHash?SetupPage.updateActiveView():location.hash=urlHash}return(_ctx,_cache)=>(_openBlock38(),_createElementBlock38("div",{class:"root Setup",id:"root","data-toolbar-color-scheme":_unref36(Styles).reactive.toolbarColorScheme,"data-animations":animations.value,"data-sticky-bookmarks":_unref36(Settings).state.pinOpenedBookmarksFolder},[_createElementVNode38("div",_hoisted_269,[(_openBlock38(!0),_createElementBlock38(_Fragment10,null,_renderList10(_unref36(SetupPage).reactive.nav,opt=>(_openBlock38(),_createElementBlock38("div",{class:_normalizeClass4(opt.sub?"sub-option":"option"),"data-active":opt.name===(opt.sub?_unref36(SetupPage).reactive.activeSection:_unref36(SetupPage).reactive.activeView),onClick:$event=>navigateTo(opt.name)},[_createElementVNode38("div",_hoisted_437,_toDisplayString37(_unref36(translate)(`settings.nav_${opt.name}`)),1)],10,_hoisted_347))),256))]),_createVNode31(_Transition5,{name:"view",mode:"out-in"},{default:_withCtx6(()=>[(_openBlock38(),_createBlock9(_KeepAlive,null,[_unref36(SetupPage).reactive.activeView==="settings"?(_openBlock38(),_createBlock9(settings_default,{key:0})):_unref36(SetupPage).reactive.activeView==="menu_editor"?(_openBlock38(),_createBlock9(menu_editor_default,{key:1})):_unref36(SetupPage).reactive.activeView==="styles_editor"?(_openBlock38(),_createBlock9(styles_editor_default,{key:2})):_unref36(SetupPage).reactive.activeView==="snapshots"?(_openBlock38(),_createBlock9(snapshots_default,{key:3})):_unref36(SetupPage).reactive.activeView==="storage"?(_openBlock38(),_createBlock9(storage_default,{key:4})):(_openBlock38(),_createBlock9(keybindings_default,{key:5}))],1024))]),_:1}),_createVNode31(_Transition5,{name:"popup"},{default:_withCtx6(()=>[_unref36(Bookmarks).reactive.popup?(_openBlock38(),_createBlock9(popup_bookmarks_default,{key:0})):_createCommentVNode23("v-if",!0)]),_:1}),_createVNode31(_Transition5,{name:"popup"},{default:_withCtx6(()=>[reactive.newTabShortcutsPopup?(_openBlock38(),_createBlock9(popup_new_tab_shortcuts_default,{key:0})):_createCommentVNode23("v-if",!0)]),_:1}),_createVNode31(_Transition5,{name:"popup"},{default:_withCtx6(()=>[reactive.tabMoveRulesPopup?(_openBlock38(),_createBlock9(popup_tab_move_rules_default,{key:0})):_createCommentVNode23("v-if",!0)]),_:1}),_createVNode31(_Transition5,{name:"popup"},{default:_withCtx6(()=>[reactive.tabReopenRulesPopup?(_openBlock38(),_createBlock9(popup_tab_reopen_rules_default,{key:0})):_createCommentVNode23("v-if",!0)]),_:1}),_createVNode31(_Transition5,{name:"popup",type:"transition"},{default:_withCtx6(()=>[reactive.dialog?(_openBlock38(),_createBlock9(popup_dialog_default,{key:0,dialog:reactive.dialog},null,8,["dialog"])):_createCommentVNode23("v-if",!0)]),_:1}),_createVNode31(settings_details_default),_unref36(reactiveUpgrading).status?(_openBlock38(),_createBlock9(upgrade_screen_default,{key:0})):_createCommentVNode23("v-if",!0)],8,_hoisted_191))}});async function main(){if(Info.setInstanceType(3),setInstanceType2(3),setInstanceType(3),Settings.state=reactive16(Settings.state),Containers.reactive=reactive16(Containers.reactive),Windows.reactive=reactive16(Windows.reactive),initFavicons(reactive16),Keybindings.reactive=reactive16(Keybindings.reactive),Bookmarks.reactive=reactive16(Bookmarks.reactive),initSidebarConfig(reactive16),initPopups(reactive16),Permissions.reactive=reactive16(Permissions.reactive),SetupPage.reactive=reactive16(SetupPage.reactive),Info.reactive=reactive16(Info.reactive),Styles.reactive=reactive16(Styles.reactive),registerActions({storageChanged:Store.storageChangeListener,connectTo}),SetupPage.updateActiveView(),SetupPage.setupListeners(),await Promise.all([Windows.loadWindowInfo(),Settings.loadSettings().then(()=>Styles.initColorScheme()),Containers.load(),Keybindings.loadKeybindings(),Info.loadVersionInfo(),Info.loadCurrentTabInfo()]),setWinId2(Windows.id),setTabId2(Info.currentTabId),setWinId(Windows.id),setTabId(Info.currentTabId),createApp(setup_default).mount("#root_container"),Info.isMajorUpgrade()){showUpgradingScreen();return}Settings.setupSettingsChangeListener(),await loadSidebarConfig(),setupSidebarConfigListeners(),Styles.loadCustomCSS(),Info.loadPlatformInfo(),Info.loadVersionInfo(),Permissions.loadPermissions(),Permissions.setupListeners(),loadFavicons(),connectTo(0),setupGlobalMessageListener(),SetupPage.initialized()}main();
