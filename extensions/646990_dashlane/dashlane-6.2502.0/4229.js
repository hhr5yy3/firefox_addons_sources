"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[4229],{82994:(e,t,i)=>{i.d(t,{s:()=>p}),i(96832);var a=i(61468),n=i(8180),s=i(51031),l=i(25792),o=i(88203);let r=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var d=i(65580),_=i(68593);const c=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:n})=>{const{translate:s}=(0,o.Z)(),l=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:a,collectionSharingTitle:n,genericErrorTitle:s}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return i;case r.CollectionSharing:return n;case r.Generic:return s;default:return(0,d.U)(t)}})(t,e),c=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:a,collectionSharingSubtitle:n,genericErrorSubtitle:s}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return i;case r.CollectionSharing:return n;case r.Generic:return s;default:return(0,d.U)(t)}})(t,e);return(0,_.tZ)(a.Vq,{isOpen:!0,onClose:n,title:null!=l?l:"",closeActionLabel:s("_common_dialog_dismiss_button"),actions:e===r.LastAdmin||r.GroupSharing||r.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),n()}}}:void 0,children:c})};var u=i(37527);const h=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:n}=(0,o.Z)(),{confirmDeleteSubtitle:s,confirmDeleteTitle:l,confirmDeleteDismiss:r,confirmDeleteConfirm:d}=i;return(0,_.tZ)(a.Vq,{title:l,onClose:e,isOpen:!0,dialogClassName:u.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:d,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:r,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:s})},p=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:d,onDeletionSuccess:u,sharingStatus:p,translations:m,vaultItemType:b,isShared:g,isSharedViaUserGroup:f,isItemInCollection:E,isLastAdmin:S})=>{const{showToast:v}=(0,a.pm)(),{translate:D}=(0,o.Z)(),{deleteVaultItem:y}=(0,n.u)(l.L);if(!i)return null;let T;return(g||p?.isShared)&&(f&&(T=r.GroupSharing),S&&(T=r.LastAdmin),E&&(T=r.CollectionSharing)),T&&t?(0,_.tZ)(c,{reason:T,translations:m,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,_.tZ)(h,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await y({id:d,vaultItemType:b})).tag===s.rq.Success?(v({description:null!=(e=m.deleteSuccessToast)?e:D("webapp_personal_info_edition_delete_success_toast")}),u()):v({description:D("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){v({description:D("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:m})}},42521:(e,t,i)=>{i.d(t,{Jh:()=>o,UE:()=>s,ZP:()=>r});var a=i(96832),n=i(26849);const s=(0,n.compose)(n.not,n.isEmpty,n.trim,(0,n.defaultTo)("")),l=/.+@.+\..+/,o=e=>l.test(e.trim());class r extends a.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:i}=this.props,a={...this.state.values,...e};this.setState({values:a},(()=>{t&&t(this.hasFormBeenEdited()),i&&i(a)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const i=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(i)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,n.reduce)(((t,i)=>(t[i]=e[i]?(0,n.compose)(n.not,e[i]):()=>!1,t)),{},Object.keys(this.state.values)),i=(0,n.evolve)(t,this.state.values);return this.setState({errors:i}),(0,n.all)((0,n.equals)(!1),(0,n.values)(i))},this.hasFormBeenEdited=()=>!(0,n.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,n.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},86816:(e,t,i)=>{i.d(t,{Y:()=>E});var a=i(96832),n=i(61468),s=i(48062),l=i(39431),o=i(25792),r=i(8180),d=i(14900),_=i(63520),c=i(82994),u=i(92077),h=i(86498),p=i(88203),m=i(45272),b=i(68593);const g={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"},f={[l.U.Address]:"address",[l.U.Company]:"company",[l.U.Email]:"email",[l.U.Identity]:"name",[l.U.Phone]:"phone-number",[l.U.Website]:"website"};function E(e){const{getItemTypeDescription:t,getDeleteTitle:i,getTitle:E,vaultItemType:S,renderForm:v}=e;return({lee:e,item:D,match:y})=>{const T=(0,a.useRef)(null),I=(0,h.V)(),{translate:C}=(0,p.Z)(),{routes:A}=(0,u.Xo)(),{updateVaultItem:w}=(0,r.u)(o.L),[N,V]=(0,a.useState)(!1),[L,M]=(0,a.useState)(!1);if((0,a.useEffect)((()=>{const e={[l.U.Address]:s.PageView.ItemAddressDetails,[l.U.Company]:s.PageView.ItemCompanyDetails,[l.U.Email]:s.PageView.ItemEmailDetails,[l.U.Identity]:s.PageView.ItemIdentityDetails,[l.U.Phone]:s.PageView.ItemPhoneDetails,[l.U.Website]:s.PageView.ItemWebsiteDetails};(0,m.Nc)(e[S])}),[]),!D)return null;const U=()=>{(0,m.Nc)(s.PageView.ItemPersonalInfoList),(0,u.uX)(A.userPersonalInfo)},P=D?E(D,C):"",O={confirmDeleteConfirm:C(g.DELETE_CONFIRM),confirmDeleteDismiss:C(g.DELETE_DISMISS),confirmDeleteSubtitle:C(g.DELETE_SUBTITLE),confirmDeleteTitle:i(C)};return(0,b.BX)(_.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(y.params?.uuid),itemHasBeenEdited:N,onNavigateOut:U,onSubmit:async()=>{D.id&&Boolean(T.current?.isFormValid())&&(await(async()=>{const e=T.current?.getValues();e&&"success"!==(await w({vaultItemType:S,content:e,id:D.id})).tag&&I.showAlert(C("_common_generic_error"),d.BLW.ERROR)})(),U())},onClickDelete:()=>M(!0),ignoreCloseOnEscape:L,formId:"edit_personalinfo_panel",header:(0,b.tZ)(_.V9,{icon:(0,b.tZ)(n.AK,{type:f[S],size:"xlarge"}),title:P,titleDescription:t(C)}),children:[v(e,D,T,(()=>V(!0))),(0,b.tZ)(c.s,{isVisible:L,itemId:D.id,closeConfirmDeleteDialog:()=>M(!1),onDeletionSuccess:U,translations:O,vaultItemType:S})]})}}},74229:(e,t,i)=>{i.r(t),i.d(t,{Connected:()=>u}),i(96832);var a=i(24507),n=i(25792),s=i(39431),l=i(7973),o=i(79862),r=i(86816),d=i(18462),_=i(68593);const c=(0,r.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_name"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_identity_description"),getTitle:e=>(0,d.kl)(e)||"",vaultItemType:s.U.Identity,renderForm:(e,t,i,a)=>{const n=(0,d.sG)(t.birthDate),s=(0,l.Z)(n,"yyyy-MM-dd"),r={...t,birthDate:s};return(0,_.tZ)(o.P,{lee:e,currentValues:r,signalEditedValues:a,ref:i})}}),u=e=>{const{data:t}=(0,a.k)(n.L,"query",{vaultItemTypes:[s.U.Identity],ids:[`{${e.match.params.uuid}}`]});return(0,_.tZ)(c,{...e,item:t?.identitiesResult.items[0]})}},79862:(e,t,i)=>{i.d(t,{P:()=>f});var a=i(26849),n=i(26311),s=i(61468),l=i(42521),o=i(77063),r=i(67406),d=i(50506);let _=function(e){return e[e.TITLE=0]="TITLE",e[e.FIRSTNAME=1]="FIRSTNAME",e[e.MIDDLENAME=2]="MIDDLENAME",e[e.LASTNAME=3]="LASTNAME",e[e.LASTNAME2=4]="LASTNAME2",e[e.PSEUDO=5]="PSEUDO",e[e.BIRTHDATE=6]="BIRTHDATE",e[e.BIRTHPLACE=7]="BIRTHPLACE",e}({});const c=e=>e!==d.n.JAPAN,u=e=>e===d.n.NORTH_AMERICA_AND_ASIA,h=e=>e===d.n.SPANISH;var p=i(68037),m=i(68593);const b="webapp_personal_info_edition_identity_error",g="webapp_personal_info_edition_identity_birthdate_label";class f extends l.ZP{constructor(...e){super(...e),this.isFieldVisible=(e=>{const t=(0,d.S)(e),i={[_.TITLE]:c(t),[_.FIRSTNAME]:!0,[_.MIDDLENAME]:u(t),[_.LASTNAME]:!0,[_.LASTNAME2]:h(t),[_.PSEUDO]:!0,[_.BIRTHDATE]:!0,[_.BIRTHPLACE]:!0};return(e,t)=>i[e]||!!t})(this.props.currentValues.localeFormat)}isFormValid(){return this.validateValues({firstName:l.UE,lastName:l.UE})}render(){var e,t,i;const l=this.props.lee.translate,{shouldShowFrozenStateDialog:o}=this.context,d=[{label:l("webapp_personal_info_edition_identity_title_mr"),value:n.t.Mr},{label:l("webapp_personal_info_edition_identity_title_mrs"),value:n.t.Mrs},{label:l("webapp_personal_info_edition_identity_title_miss"),value:n.t.Miss},{label:l("webapp_personal_info_edition_identity_title_ms"),value:n.t.Ms},{label:l("webapp_personal_info_edition_identity_title_mx"),value:n.t.Mx},{label:l("webapp_personal_info_edition_identity_title_none_of_these"),value:n.t.NoneOfThese}],c=(0,a.uniqBy)((e=>e.label),d),u=null!=(e=c.find((({value:e})=>this.state.values.title===e)))?e:c[c.length-1];return(0,m.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,m.BX)(p.u,{title:l("webapp_payment_edition_content_identity_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[this.isFieldVisible(_.TITLE,null!=(t=this.state.values.title)?t:"")&&(0,m.tZ)(s.mg,{label:l("webapp_personal_info_edition_identity_title_label"),placeholder:u.label,"data-name":"title",value:u.value,onChange:e=>this.handleChange(e,"title"),disabled:!!o,children:c.map((e=>(0,m.tZ)(s.$m,{value:e.value,children:e.label},e.value)))}),this.isFieldVisible(_.FIRSTNAME,this.state.values.firstName)&&(0,m.tZ)(s.qo,{required:!0,label:l("webapp_personal_info_edition_identity_firstname_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_firstname"),"data-name":"firstName",onChange:this.handleChange,readOnly:!!o,value:this.state.values.firstName,error:this.state.errors.firstName,feedback:this.state.errors.firstName?{text:l(b)}:void 0}),this.isFieldVisible(_.MIDDLENAME,this.state.values.middleName)&&(0,m.tZ)(s.qo,{label:l("webapp_personal_info_edition_identity_middlename_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_middlename"),"data-name":"middleName",value:this.state.values.middleName,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(_.LASTNAME,this.state.values.lastName)&&(0,m.tZ)(s.qo,{required:!0,label:l("webapp_personal_info_edition_identity_lastname_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_lastname"),"data-name":"lastName",value:this.state.values.lastName,onChange:this.handleChange,readOnly:!!o,error:this.state.errors.lastName,feedback:this.state.errors.lastName?{text:l(b)}:void 0}),this.isFieldVisible(_.LASTNAME2,this.state.values.lastName2)&&(0,m.tZ)(s.qo,{label:l("webapp_personal_info_edition_identity_lastname2_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_lastname2"),"data-name":"lastName2",value:this.state.values.lastName2,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(_.PSEUDO,this.state.values.pseudo)&&(0,m.tZ)(s.qo,{label:l("webapp_personal_info_edition_identity_pseudo_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_pseudo"),"data-name":"pseudo",value:this.state.values.pseudo,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(_.BIRTHDATE,this.state.values.birthDate)&&(0,m.tZ)(s.Nn,{value:this.state.values.birthDate,calendarButtonLabel:l(g),label:l(g),onChange:e=>{this.handleChange(e.target.value,"birthDate")},readOnly:!!o}),this.isFieldVisible(_.BIRTHPLACE,this.state.values.birthPlace)&&(0,m.tZ)(s.qo,{label:l("webapp_personal_info_edition_identity_birthplace_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_birthplace"),"data-name":"birthPlace",value:this.state.values.birthPlace,onChange:this.handleChange,readOnly:!!o})]}),(0,m.tZ)(r.M,{isUsingNewDesign:!0,wrapInContentCard:!0,contentCardLabel:l("webapp_payment_edition_content_identity_organization_label"),labelSx:r.e,spaceId:null!=(i=this.state.values.spaceId)?i:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!o})]})}}f.contextType=o.CQ},26311:(e,t,i)=>{i.d(t,{t:()=>a});var a=function(e){return e.Mr="MR",e.Mrs="MRS",e.Miss="MISS",e.Ms="MS",e.Mx="MX",e.NoneOfThese="NONEOFTHESE",e}({})}}]);