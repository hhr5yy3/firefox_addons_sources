import{j as p,c as F,S as D}from"./cplx-DEt7CUyc.js";import{u as N}from"./cplx-Cdcyb6EG.js";import{a as P,t as k,s as C,u as I,P as T,b as S}from"./cplx-DSnlyBAv.js";import{c as L,m as u,b as E,d as R,q as j,s as A,aa as B,C as $,t as G,u as K,v as M,f as V,ab as W,r as m,a7 as f,w as _,x as q,y as H,z as U,A as J}from"./cplx-CXGk_GMP.js";import{g as Q,a as O}from"./cplx-B19A3gYQ.js";import{h as X,p as Y,t as Z}from"./cplx-BsCYqTWz.js";import{r as g}from"./cplx-M4JPizzD.js";const[w,v]=L({name:"PopoverContext",hookName:"usePopoverContext",providerName:"<PopoverProvider />"}),h=g.forwardRef((t,n)=>{const e=v(),o=P(),i=u(e.getContentProps(),o.getPresenceProps(),t);return o.unmounted?null:p.jsx(E.div,{...i,ref:R(o.ref,n)})});h.displayName="PopoverContent";const b=g.forwardRef((t,n)=>{const e=v(),o=P(),i=u(e.getPositionerProps(),t);return o.unmounted?null:p.jsx(E.div,{...i,ref:n})});b.displayName="PopoverPositioner";var x=j("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger"),c=x.build(),r=A({getAnchorId:t=>{var n;return((n=t.ids)==null?void 0:n.anchor)??`popover:${t.id}:anchor`},getTriggerId:t=>{var n;return((n=t.ids)==null?void 0:n.trigger)??`popover:${t.id}:trigger`},getContentId:t=>{var n;return((n=t.ids)==null?void 0:n.content)??`popover:${t.id}:content`},getPositionerId:t=>{var n;return((n=t.ids)==null?void 0:n.positioner)??`popover:${t.id}:popper`},getArrowId:t=>{var n;return((n=t.ids)==null?void 0:n.arrow)??`popover:${t.id}:arrow`},getTitleId:t=>{var n;return((n=t.ids)==null?void 0:n.title)??`popover:${t.id}:title`},getDescriptionId:t=>{var n;return((n=t.ids)==null?void 0:n.description)??`popover:${t.id}:desc`},getCloseTriggerId:t=>{var n;return((n=t.ids)==null?void 0:n.closeTrigger)??`popover:${t.id}:close`},getAnchorEl:t=>r.getById(t,r.getAnchorId(t)),getTriggerEl:t=>r.getById(t,r.getTriggerId(t)),getContentEl:t=>r.getById(t,r.getContentId(t)),getPositionerEl:t=>r.getById(t,r.getPositionerId(t)),getTitleEl:t=>r.getById(t,r.getTitleId(t)),getDescriptionEl:t=>r.getById(t,r.getDescriptionId(t)),getFocusableEls:t=>V(r.getContentEl(t)),getFirstFocusableEl:t=>r.getFocusableEls(t)[0]});function z(t,n,e){const o=t.matches("open"),i=t.context.currentPlacement,a=t.context.currentPortalled,l=t.context.renderedElements,d=Q({...t.context.positioning,placement:i});return{portalled:a,open:o,setOpen(s){s!==o&&n(s?"OPEN":"CLOSE")},reposition(s={}){n({type:"POSITIONING.SET",options:s})},getArrowProps(){return e.element({id:r.getArrowId(t.context),...c.arrow.attrs,dir:t.context.dir,style:d.arrow})},getArrowTipProps(){return e.element({...c.arrowTip.attrs,dir:t.context.dir,style:d.arrowTip})},getAnchorProps(){return e.element({...c.anchor.attrs,dir:t.context.dir,id:r.getAnchorId(t.context)})},getTriggerProps(){return e.button({...c.trigger.attrs,dir:t.context.dir,type:"button","data-placement":i,id:r.getTriggerId(t.context),"aria-haspopup":"dialog","aria-expanded":o,"data-state":o?"open":"closed","aria-controls":r.getContentId(t.context),onPointerDown(s){B()&&s.currentTarget.focus()},onClick(s){s.defaultPrevented||n("TOGGLE")},onBlur(s){n({type:"TRIGGER_BLUR",target:s.relatedTarget})}})},getIndicatorProps(){return e.element({...c.indicator.attrs,dir:t.context.dir,"data-state":o?"open":"closed"})},getPositionerProps(){return e.element({id:r.getPositionerId(t.context),...c.positioner.attrs,dir:t.context.dir,style:d.floating})},getContentProps(){return e.element({...c.content.attrs,dir:t.context.dir,id:r.getContentId(t.context),tabIndex:-1,role:"dialog",hidden:!o,"data-state":o?"open":"closed","data-expanded":$(o),"aria-labelledby":l.title?r.getTitleId(t.context):void 0,"aria-describedby":l.description?r.getDescriptionId(t.context):void 0,"data-placement":i})},getTitleProps(){return e.element({...c.title.attrs,id:r.getTitleId(t.context),dir:t.context.dir})},getDescriptionProps(){return e.element({...c.description.attrs,id:r.getDescriptionId(t.context),dir:t.context.dir})},getCloseTriggerProps(){return e.button({...c.closeTrigger.attrs,dir:t.context.dir,id:r.getCloseTriggerId(t.context),type:"button","aria-label":"close",onClick(s){s.defaultPrevented||n("CLOSE")}})}}}function ee(t){const n=G(t);return K({id:"popover",initial:n.open?"open":"closed",context:{closeOnInteractOutside:!0,closeOnEscape:!0,autoFocus:!0,modal:!1,portalled:!0,positioning:{placement:"bottom",...n.positioning},currentPlacement:void 0,...n,renderedElements:{title:!0,description:!0}},computed:{currentPortalled:e=>!!e.modal||!!e.portalled},watch:{open:["toggleVisibility"]},entry:["checkRenderedElements"],states:{closed:{on:{"CONTROLLED.OPEN":{target:"open",actions:["setInitialFocus"]},TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}]}},open:{activities:["trapFocus","preventScroll","hideContentBelow","trackPositioning","trackDismissableElement","proxyTabFocus"],on:{"CONTROLLED.CLOSE":{target:"closed",actions:["setFinalFocus"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose","setFinalFocus"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"POSITIONING.SET":{actions:"reposition"}}}}},{guards:{isOpenControlled:e=>!!e["open.controlled"]},activities:{trackPositioning(e){e.currentPlacement=e.positioning.placement;const o=r.getAnchorEl(e)??r.getTriggerEl(e);return O(o,()=>r.getPositionerEl(e),{...e.positioning,defer:!0,onComplete(a){e.currentPlacement=a.placement}})},trackDismissableElement(e,o,{send:i}){const a=()=>r.getContentEl(e);let l=!0;return k(a,{pointerBlocking:e.modal,exclude:r.getTriggerEl(e),defer:!0,onEscapeKeyDown(d){var s;(s=e.onEscapeKeyDown)==null||s.call(e,d),!e.closeOnEscape&&d.preventDefault()},onInteractOutside(d){var s;(s=e.onInteractOutside)==null||s.call(e,d),!d.defaultPrevented&&(l=!(d.detail.focusable||d.detail.contextmenu),e.closeOnInteractOutside||d.preventDefault())},onPointerDownOutside:e.onPointerDownOutside,onFocusOutside:e.onFocusOutside,persistentElements:e.persistentElements,onDismiss(){i({type:"CLOSE",src:"interact-outside",restoreFocus:l})}})},proxyTabFocus(e){return e.modal||!e.portalled?void 0:W(()=>r.getContentEl(e),{triggerElement:r.getTriggerEl(e),defer:!0,onFocus(i){i.focus({preventScroll:!0})}})},hideContentBelow(e){return e.modal?X(()=>[r.getContentEl(e),r.getTriggerEl(e)],{defer:!0}):void 0},preventScroll(e){if(e.modal)return Y(r.getDoc(e))},trapFocus(e){return e.modal?Z(()=>r.getContentEl(e),{initialFocus:()=>f({root:r.getContentEl(e),getInitialEl:e.initialFocusEl,enabled:e.autoFocus})}):void 0}},actions:{reposition(e,o){const i=r.getAnchorEl(e)??r.getTriggerEl(e);O(i,()=>r.getPositionerEl(e),{...e.positioning,...o.options,defer:!0,listeners:!1,onComplete(l){e.currentPlacement=l.placement}})},checkRenderedElements(e){m(()=>{Object.assign(e.renderedElements,{title:!!r.getTitleEl(e),description:!!r.getDescriptionEl(e)})})},setInitialFocus(e){e.modal||m(()=>{const o=f({root:r.getContentEl(e),getInitialEl:e.initialFocusEl,enabled:e.autoFocus});o==null||o.focus({preventScroll:!0})})},setFinalFocus(e,o){var a;const i=o.restoreFocus??((a=o.previousEvent)==null?void 0:a.restoreFocus);i!=null&&!i||m(()=>{const l=r.getTriggerEl(e);l==null||l.focus({preventScroll:!0})})},invokeOnOpen(e){var o;(o=e.onOpenChange)==null||o.call(e,{open:!0})},invokeOnClose(e){var o;(o=e.onOpenChange)==null||o.call(e,{open:!1})},toggleVisibility(e,o,{send:i}){i({type:e.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:o})}}})}M()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]);const te=(t={})=>{const{getRootNode:n}=_(),{dir:e}=q(),o={id:g.useId(),dir:e,getRootNode:n,open:t.defaultOpen,"open.controlled":t.open!==void 0,...t},i={...o,open:t.open,onOpenChange:H(t.onOpenChange,{sync:!0})},[a,l]=U(ee(o),{context:i});return z(a,l,J)},oe=t=>{const[n,{children:e,...o}]=C(t),i=te(o),a=I(u({present:i.open},n));return p.jsx(w,{value:i,children:p.jsx(T,{value:a,children:e})})},ne=t=>{const[n,{value:e,children:o}]=C(t),i=I(u({present:e.open},n));return p.jsx(w,{value:e,children:p.jsx(T,{value:i,children:o})})},y=g.forwardRef((t,n)=>{const e=v(),o=P(),i=u({...e.getTriggerProps(),"aria-controls":o.unmounted?void 0:e.getTriggerProps()["aria-controls"]},t);return p.jsx(E.button,{...i,ref:n})});y.displayName="PopoverTrigger";const me=ne;function re({...t}){return p.jsx(oe,{unmountOnExit:!0,lazyMount:!0,...t})}re.displayName="Popover";const ie=({...t})=>p.jsx(y,{...t});ie.displayName="PopoverTrigger";const se=({className:t,portal:n=!0,ref:e,...o})=>{const i=n?S:D;return p.jsx(i,{children:p.jsx(b,{children:p.jsx(h,{ref:e,className:F("tw-z-50 tw-w-max tw-rounded-md tw-border tw-border-border/50 tw-bg-popover tw-p-4 tw-text-popover-foreground tw-shadow-md focus-visible:tw-outline-none","data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out","data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0","data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95","data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2","data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2",t),onWheel:N,...o})})})};se.displayName="PopoverContent";export{me as P,se as a,re as b,ie as c,te as u};
