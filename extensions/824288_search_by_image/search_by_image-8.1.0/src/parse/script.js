/*! For license information please see script.js.LICENSE.txt */
(()=>{var e={1024:(e,t)=>{t.L=function(e,t,r,i,n){var a,o,s=8*n-i-1,c=(1<<s)-1,u=c>>1,f=-7,p=r?n-1:0,m=r?-1:1,l=e[t+p];for(p+=m,a=l&(1<<-f)-1,l>>=-f,f+=s;f>0;a=256*a+e[t+p],p+=m,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=i;f>0;o=256*o+e[t+p],p+=m,f-=8);if(0===a)a=1-u;else{if(a===c)return o?NaN:1/0*(l?-1:1);o+=Math.pow(2,i),a-=u}return(l?-1:1)*o*Math.pow(2,a-i)},t.M=function(e,t,r,i,n,a){var o,s,c,u=8*a-n-1,f=(1<<u)-1,p=f>>1,m=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,l=i?0:a-1,h=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+p>=1?m/c:m*Math.pow(2,1-p))*c>=2&&(o++,c/=2),o+p>=f?(s=0,o=f):o+p>=1?(s=(t*c-1)*Math.pow(2,n),o+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,n),o=0));n>=8;e[r+l]=255&s,l+=h,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[r+l]=255&o,l+=h,o/=256,u-=8);e[r+l-h]|=128*g}},2365:(e,t,r)=>{"use strict";var i=r(9200),n=r(7938),a=TypeError;e.exports=function(e){if(i(e))return e;throw new a(n(e)+" is not a function")}},602:(e,t,r)=>{"use strict";var i=r(2430),n=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw new n("Incorrect invocation")}},4398:(e,t,r)=>{"use strict";var i=r(9131),n=String,a=TypeError;e.exports=function(e){if(i(e))return e;throw new a(n(e)+" is not an object")}},9013:(e,t,r)=>{"use strict";var i=r(8793),n=r(9229),a=r(5589),o=i.ArrayBuffer,s=i.TypeError;e.exports=o&&n(o.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==a(e))throw new s("ArrayBuffer expected");return e.byteLength}},4345:(e,t,r)=>{"use strict";var i=r(8793),n=r(527),a=r(9013),o=i.ArrayBuffer,s=o&&o.prototype,c=s&&n(s.slice);e.exports=function(e){if(0!==a(e))return!1;if(!c)return!1;try{return c(e,0,0),!1}catch(e){return!0}}},3112:(e,t,r)=>{"use strict";var i=r(4345),n=TypeError;e.exports=function(e){if(i(e))throw new n("ArrayBuffer is detached");return e}},985:(e,t,r)=>{"use strict";var i=r(8793),n=r(7133),a=r(9229),o=r(8663),s=r(3112),c=r(9013),u=r(5646),f=r(879),p=i.structuredClone,m=i.ArrayBuffer,l=i.DataView,h=Math.min,g=m.prototype,d=l.prototype,x=n(g.slice),v=a(g,"resizable","get"),w=a(g,"maxByteLength","get"),y=n(d.getInt8),b=n(d.setInt8);e.exports=(f||u)&&function(e,t,r){var i,n=c(e),a=void 0===t?n:o(t),g=!v||!v(e);if(s(e),f&&(e=p(e,{transfer:[e]}),n===a&&(r||g)))return e;if(n>=a&&(!r||g))i=x(e,0,a);else{var d=r&&!g&&w?{maxByteLength:w(e)}:void 0;i=new m(a,d);for(var k=new l(e),j=new l(i),S=h(a,n),E=0;E<S;E++)b(j,E,y(k,E))}return f||u(e),i}},6134:(e,t,r)=>{"use strict";var i=r(4360),n=r(8479),a=r(7457),o=function(e){return function(t,r,o){var s=i(t),c=a(s);if(0===c)return!e&&-1;var u,f=n(o,c);if(e&&r!=r){for(;c>f;)if((u=s[f++])!=u)return!0}else for(;c>f;f++)if((e||f in s)&&s[f]===r)return e||f||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},1512:(e,t,r)=>{"use strict";var i=r(4398),n=r(9400);e.exports=function(e,t,r,a){try{return a?t(i(r)[0],r[1]):t(r)}catch(t){n(e,"throw",t)}}},5589:(e,t,r)=>{"use strict";var i=r(7133),n=i({}.toString),a=i("".slice);e.exports=function(e){return a(n(e),8,-1)}},3650:(e,t,r)=>{"use strict";var i=r(917),n=r(9200),a=r(5589),o=r(4702)("toStringTag"),s=Object,c="Arguments"===a(function(){return arguments}());e.exports=i?a:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=s(e),o))?r:c?a(t):"Object"===(i=a(t))&&n(t.callee)?"Arguments":i}},4085:(e,t,r)=>{"use strict";var i=r(9158),n=r(4540),a=r(2428),o=r(4446);e.exports=function(e,t,r){for(var s=n(t),c=o.f,u=a.f,f=0;f<s.length;f++){var p=s[f];i(e,p)||r&&i(r,p)||c(e,p,u(t,p))}}},6308:(e,t,r)=>{"use strict";var i=r(942);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},7236:e=>{"use strict";e.exports=function(e,t){return{value:e,done:t}}},5044:(e,t,r)=>{"use strict";var i=r(6857),n=r(4446),a=r(2007);e.exports=i?function(e,t,r){return n.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},2007:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5909:(e,t,r)=>{"use strict";var i=r(6857),n=r(4446),a=r(2007);e.exports=function(e,t,r){i?n.f(e,t,a(0,r)):e[t]=r}},3129:(e,t,r)=>{"use strict";var i=r(4174),n=r(4446);e.exports=function(e,t,r){return r.get&&i(r.get,t,{getter:!0}),r.set&&i(r.set,t,{setter:!0}),n.f(e,t,r)}},8521:(e,t,r)=>{"use strict";var i=r(9200),n=r(4446),a=r(4174),o=r(8466);e.exports=function(e,t,r,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:t;if(i(r)&&a(r,u,s),s.global)c?e[t]=r:o(t,r);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:n.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},3948:(e,t,r)=>{"use strict";var i=r(8521);e.exports=function(e,t,r){for(var n in t)i(e,n,t[n],r);return e}},8466:(e,t,r)=>{"use strict";var i=r(8793),n=Object.defineProperty;e.exports=function(e,t){try{n(i,e,{value:t,configurable:!0,writable:!0})}catch(r){i[e]=t}return t}},6857:(e,t,r)=>{"use strict";var i=r(942);e.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},5646:(e,t,r)=>{"use strict";var i,n,a,o,s=r(8793),c=r(7578),u=r(879),f=s.structuredClone,p=s.ArrayBuffer,m=s.MessageChannel,l=!1;if(u)l=function(e){f(e,{transfer:[e]})};else if(p)try{m||(i=c("worker_threads"))&&(m=i.MessageChannel),m&&(n=new m,a=new p(2),o=function(e){n.port1.postMessage(null,[e])},2===a.byteLength&&(o(a),0===a.byteLength&&(l=o)))}catch(e){}e.exports=l},1466:(e,t,r)=>{"use strict";var i=r(8793),n=r(9131),a=i.document,o=n(a)&&n(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},2030:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1320:(e,t,r)=>{"use strict";var i=r(5898);e.exports="NODE"===i},824:(e,t,r)=>{"use strict";var i=r(8793).navigator,n=i&&i.userAgent;e.exports=n?String(n):""},9140:(e,t,r)=>{"use strict";var i,n,a=r(8793),o=r(824),s=a.process,c=a.Deno,u=s&&s.versions||c&&c.version,f=u&&u.v8;f&&(n=(i=f.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!n&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(n=+i[1]),e.exports=n},5898:(e,t,r)=>{"use strict";var i=r(8793),n=r(824),a=r(5589),o=function(e){return n.slice(0,e.length)===e};e.exports=o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===a(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"},3353:(e,t,r)=>{"use strict";var i=r(8793),n=r(2428).f,a=r(5044),o=r(8521),s=r(8466),c=r(4085),u=r(7453);e.exports=function(e,t){var r,f,p,m,l,h=e.target,g=e.global,d=e.stat;if(r=g?i:d?i[h]||s(h,{}):i[h]&&i[h].prototype)for(f in t){if(m=t[f],p=e.dontCallGetSet?(l=n(r,f))&&l.value:r[f],!u(g?f:h+(d?".":"#")+f,e.forced)&&void 0!==p){if(typeof m==typeof p)continue;c(m,p)}(e.sham||p&&p.sham)&&a(m,"sham",!0),o(r,f,m,e)}}},942:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},5457:(e,t,r)=>{"use strict";var i=r(527),n=r(2365),a=r(7315),o=i(i.bind);e.exports=function(e,t){return n(e),void 0===t?e:a?o(e,t):function(){return e.apply(t,arguments)}}},7315:(e,t,r)=>{"use strict";var i=r(942);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},492:(e,t,r)=>{"use strict";var i=r(7315),n=Function.prototype.call;e.exports=i?n.bind(n):function(){return n.apply(n,arguments)}},7403:(e,t,r)=>{"use strict";var i=r(6857),n=r(9158),a=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,s=n(a,"name"),c=s&&"something"===function(){}.name,u=s&&(!i||i&&o(a,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},9229:(e,t,r)=>{"use strict";var i=r(7133),n=r(2365);e.exports=function(e,t,r){try{return i(n(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},527:(e,t,r)=>{"use strict";var i=r(5589),n=r(7133);e.exports=function(e){if("Function"===i(e))return n(e)}},7133:(e,t,r)=>{"use strict";var i=r(7315),n=Function.prototype,a=n.call,o=i&&n.bind.bind(a,a);e.exports=i?o:function(e){return function(){return a.apply(e,arguments)}}},7578:(e,t,r)=>{"use strict";var i=r(8793),n=r(1320);e.exports=function(e){if(n){try{return i.process.getBuiltinModule(e)}catch(e){}try{return Function('return require("'+e+'")')()}catch(e){}}}},848:(e,t,r)=>{"use strict";var i=r(8793),n=r(9200);e.exports=function(e,t){return arguments.length<2?(r=i[e],n(r)?r:void 0):i[e]&&i[e][t];var r}},5134:e=>{"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},590:(e,t,r)=>{"use strict";var i=r(3650),n=r(9325),a=r(2178),o=r(488),s=r(4702)("iterator");e.exports=function(e){if(!a(e))return n(e,s)||n(e,"@@iterator")||o[i(e)]}},1778:(e,t,r)=>{"use strict";var i=r(492),n=r(2365),a=r(4398),o=r(7938),s=r(590),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(n(r))return a(i(r,e));throw new c(o(e)+" is not iterable")}},9325:(e,t,r)=>{"use strict";var i=r(2365),n=r(2178);e.exports=function(e,t){var r=e[t];return n(r)?void 0:i(r)}},8793:function(e,t,r){"use strict";var i=function(e){return e&&e.Math===Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9158:(e,t,r)=>{"use strict";var i=r(7133),n=r(9272),a=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(n(e),t)}},640:e=>{"use strict";e.exports={}},4510:(e,t,r)=>{"use strict";var i=r(848);e.exports=i("document","documentElement")},5842:(e,t,r)=>{"use strict";var i=r(6857),n=r(942),a=r(1466);e.exports=!i&&!n((function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},8060:(e,t,r)=>{"use strict";var i=r(7133),n=r(942),a=r(5589),o=Object,s=i("".split);e.exports=n((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"===a(e)?s(e,""):o(e)}:o},7217:(e,t,r)=>{"use strict";var i=r(7133),n=r(9200),a=r(5210),o=i(Function.toString);n(a.inspectSource)||(a.inspectSource=function(e){return o(e)}),e.exports=a.inspectSource},1514:(e,t,r)=>{"use strict";var i,n,a,o=r(3125),s=r(8793),c=r(9131),u=r(5044),f=r(9158),p=r(5210),m=r(2316),l=r(640),h="Object already initialized",g=s.TypeError,d=s.WeakMap;if(o||p.state){var x=p.state||(p.state=new d);x.get=x.get,x.has=x.has,x.set=x.set,i=function(e,t){if(x.has(e))throw new g(h);return t.facade=e,x.set(e,t),t},n=function(e){return x.get(e)||{}},a=function(e){return x.has(e)}}else{var v=m("state");l[v]=!0,i=function(e,t){if(f(e,v))throw new g(h);return t.facade=e,u(e,v,t),t},n=function(e){return f(e,v)?e[v]:{}},a=function(e){return f(e,v)}}e.exports={set:i,get:n,has:a,enforce:function(e){return a(e)?n(e):i(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=n(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return r}}}},6:(e,t,r)=>{"use strict";var i=r(4702),n=r(488),a=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[a]===e)}},9200:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},7453:(e,t,r)=>{"use strict";var i=r(942),n=r(9200),a=/#|\.prototype\./,o=function(e,t){var r=c[s(e)];return r===f||r!==u&&(n(t)?i(t):!!t)},s=o.normalize=function(e){return String(e).replace(a,".").toLowerCase()},c=o.data={},u=o.NATIVE="N",f=o.POLYFILL="P";e.exports=o},2178:e=>{"use strict";e.exports=function(e){return null==e}},9131:(e,t,r)=>{"use strict";var i=r(9200);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},1818:e=>{"use strict";e.exports=!1},460:(e,t,r)=>{"use strict";var i=r(848),n=r(9200),a=r(2430),o=r(6253),s=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return n(t)&&a(t.prototype,s(e))}},3973:(e,t,r)=>{"use strict";var i=r(5457),n=r(492),a=r(4398),o=r(7938),s=r(6),c=r(7457),u=r(2430),f=r(1778),p=r(590),m=r(9400),l=TypeError,h=function(e,t){this.stopped=e,this.result=t},g=h.prototype;e.exports=function(e,t,r){var d,x,v,w,y,b,k,j=r&&r.that,S=!(!r||!r.AS_ENTRIES),E=!(!r||!r.IS_RECORD),O=!(!r||!r.IS_ITERATOR),_=!(!r||!r.INTERRUPTED),z=i(t,j),T=function(e){return d&&m(d,"normal",e),new h(!0,e)},A=function(e){return S?(a(e),_?z(e[0],e[1],T):z(e[0],e[1])):_?z(e,T):z(e)};if(E)d=e.iterator;else if(O)d=e;else{if(!(x=p(e)))throw new l(o(e)+" is not iterable");if(s(x)){for(v=0,w=c(e);w>v;v++)if((y=A(e[v]))&&u(g,y))return y;return new h(!1)}d=f(e,x)}for(b=E?e.next:d.next;!(k=n(b,d)).done;){try{y=A(k.value)}catch(e){m(d,"throw",e)}if("object"==typeof y&&y&&u(g,y))return y}return new h(!1)}},9400:(e,t,r)=>{"use strict";var i=r(492),n=r(4398),a=r(9325);e.exports=function(e,t,r){var o,s;n(e);try{if(!(o=a(e,"return"))){if("throw"===t)throw r;return r}o=i(o,e)}catch(e){s=!0,o=e}if("throw"===t)throw r;if(s)throw o;return n(o),r}},7399:(e,t,r)=>{"use strict";var i=r(492),n=r(2909),a=r(5044),o=r(3948),s=r(4702),c=r(1514),u=r(9325),f=r(1982).IteratorPrototype,p=r(7236),m=r(9400),l=s("toStringTag"),h="IteratorHelper",g="WrapForValidIterator",d=c.set,x=function(e){var t=c.getterFor(e?g:h);return o(n(f),{next:function(){var r=t(this);if(e)return r.nextHandler();try{var i=r.done?void 0:r.nextHandler();return p(i,r.done)}catch(e){throw r.done=!0,e}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var a=u(n,"return");return a?i(a,n):p(void 0,!0)}if(r.inner)try{m(r.inner.iterator,"normal")}catch(e){return m(n,"throw",e)}return n&&m(n,"normal"),p(void 0,!0)}})},v=x(!0),w=x(!1);a(w,l,"Iterator Helper"),e.exports=function(e,t){var r=function(r,i){i?(i.iterator=r.iterator,i.next=r.next):i=r,i.type=t?g:h,i.nextHandler=e,i.counter=0,i.done=!1,d(this,i)};return r.prototype=t?v:w,r}},2154:(e,t,r)=>{"use strict";var i=r(492),n=r(2365),a=r(4398),o=r(5134),s=r(7399),c=r(1512),u=s((function(){var e=this.iterator,t=a(i(this.next,e));if(!(this.done=!!t.done))return c(e,this.mapper,[t.value,this.counter++],!0)}));e.exports=function(e){return a(this),n(e),new u(o(this),{mapper:e})}},1982:(e,t,r)=>{"use strict";var i,n,a,o=r(942),s=r(9200),c=r(9131),u=r(2909),f=r(5270),p=r(8521),m=r(4702),l=r(1818),h=m("iterator"),g=!1;[].keys&&("next"in(a=[].keys())?(n=f(f(a)))!==Object.prototype&&(i=n):g=!0),!c(i)||o((function(){var e={};return i[h].call(e)!==e}))?i={}:l&&(i=u(i)),s(i[h])||p(i,h,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},488:e=>{"use strict";e.exports={}},7457:(e,t,r)=>{"use strict";var i=r(2695);e.exports=function(e){return i(e.length)}},4174:(e,t,r)=>{"use strict";var i=r(7133),n=r(942),a=r(9200),o=r(9158),s=r(6857),c=r(7403).CONFIGURABLE,u=r(7217),f=r(1514),p=f.enforce,m=f.get,l=String,h=Object.defineProperty,g=i("".slice),d=i("".replace),x=i([].join),v=s&&!n((function(){return 8!==h((function(){}),"length",{value:8}).length})),w=String(String).split("String"),y=e.exports=function(e,t,r){"Symbol("===g(l(t),0,7)&&(t="["+d(l(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!o(e,"name")||c&&e.name!==t)&&(s?h(e,"name",{value:t,configurable:!0}):e.name=t),v&&r&&o(r,"arity")&&e.length!==r.arity&&h(e,"length",{value:r.arity});try{r&&o(r,"constructor")&&r.constructor?s&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var i=p(e);return o(i,"source")||(i.source=x(w,"string"==typeof t?t:"")),e};Function.prototype.toString=y((function(){return a(this)&&m(this).source||u(this)}),"toString")},8226:e=>{"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?r:t)(i)}},2909:(e,t,r)=>{"use strict";var i,n=r(4398),a=r(2066),o=r(2030),s=r(640),c=r(4510),u=r(1466),f=r(2316),p="prototype",m="script",l=f("IE_PROTO"),h=function(){},g=function(e){return"<"+m+">"+e+"</"+m+">"},d=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},x=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;x="undefined"!=typeof document?document.domain&&i?d(i):(t=u("iframe"),r="java"+m+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):d(i);for(var n=o.length;n--;)delete x[p][o[n]];return x()};s[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h[p]=n(e),r=new h,h[p]=null,r[l]=e):r=x(),void 0===t?r:a.f(r,t)}},2066:(e,t,r)=>{"use strict";var i=r(6857),n=r(335),a=r(4446),o=r(4398),s=r(4360),c=r(3733);t.f=i&&!n?Object.defineProperties:function(e,t){o(e);for(var r,i=s(t),n=c(t),u=n.length,f=0;u>f;)a.f(e,r=n[f++],i[r]);return e}},4446:(e,t,r)=>{"use strict";var i=r(6857),n=r(5842),a=r(335),o=r(4398),s=r(2548),c=TypeError,u=Object.defineProperty,f=Object.getOwnPropertyDescriptor,p="enumerable",m="configurable",l="writable";t.f=i?a?function(e,t,r){if(o(e),t=s(t),o(r),"function"==typeof e&&"prototype"===t&&"value"in r&&l in r&&!r[l]){var i=f(e,t);i&&i[l]&&(e[t]=r.value,r={configurable:m in r?r[m]:i[m],enumerable:p in r?r[p]:i[p],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(o(e),t=s(t),o(r),n)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},2428:(e,t,r)=>{"use strict";var i=r(6857),n=r(492),a=r(6732),o=r(2007),s=r(4360),c=r(2548),u=r(9158),f=r(5842),p=Object.getOwnPropertyDescriptor;t.f=i?p:function(e,t){if(e=s(e),t=c(t),f)try{return p(e,t)}catch(e){}if(u(e,t))return o(!n(a.f,e,t),e[t])}},5809:(e,t,r)=>{"use strict";var i=r(8959),n=r(2030).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},1264:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},5270:(e,t,r)=>{"use strict";var i=r(9158),n=r(9200),a=r(9272),o=r(2316),s=r(6308),c=o("IE_PROTO"),u=Object,f=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=a(e);if(i(t,c))return t[c];var r=t.constructor;return n(r)&&t instanceof r?r.prototype:t instanceof u?f:null}},2430:(e,t,r)=>{"use strict";var i=r(7133);e.exports=i({}.isPrototypeOf)},8959:(e,t,r)=>{"use strict";var i=r(7133),n=r(9158),a=r(4360),o=r(6134).indexOf,s=r(640),c=i([].push);e.exports=function(e,t){var r,i=a(e),u=0,f=[];for(r in i)!n(s,r)&&n(i,r)&&c(f,r);for(;t.length>u;)n(i,r=t[u++])&&(~o(f,r)||c(f,r));return f}},3733:(e,t,r)=>{"use strict";var i=r(8959),n=r(2030);e.exports=Object.keys||function(e){return i(e,n)}},6732:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!r.call({1:2},1);t.f=n?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},1427:(e,t,r)=>{"use strict";var i=r(492),n=r(9200),a=r(9131),o=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&n(r=e.toString)&&!a(s=i(r,e)))return s;if(n(r=e.valueOf)&&!a(s=i(r,e)))return s;if("string"!==t&&n(r=e.toString)&&!a(s=i(r,e)))return s;throw new o("Can't convert object to primitive value")}},4540:(e,t,r)=>{"use strict";var i=r(848),n=r(7133),a=r(5809),o=r(1264),s=r(4398),c=n([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=a.f(s(e)),r=o.f;return r?c(t,r(e)):t}},3977:(e,t,r)=>{"use strict";var i=r(2178),n=TypeError;e.exports=function(e){if(i(e))throw new n("Can't call method on "+e);return e}},2316:(e,t,r)=>{"use strict";var i=r(6014),n=r(685),a=i("keys");e.exports=function(e){return a[e]||(a[e]=n(e))}},5210:(e,t,r)=>{"use strict";var i=r(1818),n=r(8793),a=r(8466),o="__core-js_shared__",s=e.exports=n[o]||a(o,{});(s.versions||(s.versions=[])).push({version:"3.39.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6014:(e,t,r)=>{"use strict";var i=r(5210);e.exports=function(e,t){return i[e]||(i[e]=t||{})}},879:(e,t,r)=>{"use strict";var i=r(8793),n=r(942),a=r(9140),o=r(5898),s=i.structuredClone;e.exports=!!s&&!n((function(){if("DENO"===o&&a>92||"NODE"===o&&a>94||"BROWSER"===o&&a>97)return!1;var e=new ArrayBuffer(8),t=s(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength}))},260:(e,t,r)=>{"use strict";var i=r(9140),n=r(942),a=r(8793).String;e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},8479:(e,t,r)=>{"use strict";var i=r(4932),n=Math.max,a=Math.min;e.exports=function(e,t){var r=i(e);return r<0?n(r+t,0):a(r,t)}},8663:(e,t,r)=>{"use strict";var i=r(4932),n=r(2695),a=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),r=n(t);if(t!==r)throw new a("Wrong length or index");return r}},4360:(e,t,r)=>{"use strict";var i=r(8060),n=r(3977);e.exports=function(e){return i(n(e))}},4932:(e,t,r)=>{"use strict";var i=r(8226);e.exports=function(e){var t=+e;return t!=t||0===t?0:i(t)}},2695:(e,t,r)=>{"use strict";var i=r(4932),n=Math.min;e.exports=function(e){var t=i(e);return t>0?n(t,9007199254740991):0}},9272:(e,t,r)=>{"use strict";var i=r(3977),n=Object;e.exports=function(e){return n(i(e))}},9422:(e,t,r)=>{"use strict";var i=r(492),n=r(9131),a=r(460),o=r(9325),s=r(1427),c=r(4702),u=TypeError,f=c("toPrimitive");e.exports=function(e,t){if(!n(e)||a(e))return e;var r,c=o(e,f);if(c){if(void 0===t&&(t="default"),r=i(c,e,t),!n(r)||a(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},2548:(e,t,r)=>{"use strict";var i=r(9422),n=r(460);e.exports=function(e){var t=i(e,"string");return n(t)?t:t+""}},917:(e,t,r)=>{"use strict";var i={};i[r(4702)("toStringTag")]="z",e.exports="[object z]"===String(i)},7938:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},685:(e,t,r)=>{"use strict";var i=r(7133),n=0,a=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++n+a,36)}},6253:(e,t,r)=>{"use strict";var i=r(260);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},335:(e,t,r)=>{"use strict";var i=r(6857),n=r(942);e.exports=i&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},3125:(e,t,r)=>{"use strict";var i=r(8793),n=r(9200),a=i.WeakMap;e.exports=n(a)&&/native code/.test(String(a))},4702:(e,t,r)=>{"use strict";var i=r(8793),n=r(6014),a=r(9158),o=r(685),s=r(260),c=r(6253),u=i.Symbol,f=n("wks"),p=c?u.for||u:u&&u.withoutSetter||o;e.exports=function(e){return a(f,e)||(f[e]=s&&a(u,e)?u[e]:p("Symbol."+e)),f[e]}},6166:(e,t,r)=>{"use strict";var i=r(6857),n=r(3129),a=r(4345),o=ArrayBuffer.prototype;i&&!("detached"in o)&&n(o,"detached",{configurable:!0,get:function(){return a(this)}})},9191:(e,t,r)=>{"use strict";var i=r(3353),n=r(985);n&&i({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return n(this,arguments.length?arguments[0]:void 0,!1)}})},4599:(e,t,r)=>{"use strict";var i=r(3353),n=r(985);n&&i({target:"ArrayBuffer",proto:!0},{transfer:function(){return n(this,arguments.length?arguments[0]:void 0,!0)}})},2306:(e,t,r)=>{"use strict";var i=r(3353),n=r(8793),a=r(602),o=r(4398),s=r(9200),c=r(5270),u=r(3129),f=r(5909),p=r(942),m=r(9158),l=r(4702),h=r(1982).IteratorPrototype,g=r(6857),d=r(1818),x="constructor",v="Iterator",w=l("toStringTag"),y=TypeError,b=n[v],k=d||!s(b)||b.prototype!==h||!p((function(){b({})})),j=function(){if(a(this,h),c(this)===h)throw new y("Abstract class Iterator not directly constructable")},S=function(e,t){g?u(h,e,{configurable:!0,get:function(){return t},set:function(t){if(o(this),this===h)throw new y("You can't redefine this property");m(this,e)?this[e]=t:f(this,e,t)}}):h[e]=t};m(h,w)||S(w,v),!k&&m(h,x)&&h[x]!==Object||S(x,j),j.prototype=h,i({global:!0,constructor:!0,forced:k},{Iterator:j})},8481:(e,t,r)=>{"use strict";var i=r(3353),n=r(3973),a=r(2365),o=r(4398),s=r(5134);i({target:"Iterator",proto:!0,real:!0},{every:function(e){o(this),a(e);var t=s(this),r=0;return!n(t,(function(t,i){if(!e(t,r++))return i()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},7374:(e,t,r)=>{"use strict";var i=r(3353),n=r(492),a=r(2365),o=r(4398),s=r(5134),c=r(7399),u=r(1512),f=r(1818),p=c((function(){for(var e,t,r=this.iterator,i=this.predicate,a=this.next;;){if(e=o(n(a,r)),this.done=!!e.done)return;if(t=e.value,u(r,i,[t,this.counter++],!0))return t}}));i({target:"Iterator",proto:!0,real:!0,forced:f},{filter:function(e){return o(this),a(e),new p(s(this),{predicate:e})}})},2099:(e,t,r)=>{"use strict";var i=r(3353),n=r(3973),a=r(2365),o=r(4398),s=r(5134);i({target:"Iterator",proto:!0,real:!0},{forEach:function(e){o(this),a(e);var t=s(this),r=0;n(t,(function(t){e(t,r++)}),{IS_RECORD:!0})}})},3640:(e,t,r)=>{"use strict";var i=r(3353),n=r(2154);i({target:"Iterator",proto:!0,real:!0,forced:r(1818)},{map:n})},356:(e,t,r)=>{"use strict";var i=r(3353),n=r(3973),a=r(2365),o=r(4398),s=r(5134);i({target:"Iterator",proto:!0,real:!0},{some:function(e){o(this),a(e);var t=s(this),r=0;return n(t,(function(t,i){if(e(t,r++))return i()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},9849:(e,t,r)=>{"use strict";r(2306)},9558:(e,t,r)=>{"use strict";r(8481)},1167:(e,t,r)=>{"use strict";r(7374)},6658:(e,t,r)=>{"use strict";r(2099)},6831:(e,t,r)=>{"use strict";r(3640)},1177:(e,t,r)=>{"use strict";r(356)}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,r),a.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";r(9849),r(1167),r(6658),r(1177);const e=function(e,t){return e===t||e!=e&&t!=t},t=function(t,r){for(var i=t.length;i--;)if(e(t[i][0],r))return i;return-1};var i=Array.prototype.splice;function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}n.prototype.clear=function(){this.__data__=[],this.size=0},n.prototype.delete=function(e){var r=this.__data__,n=t(r,e);return!(n<0||(n==r.length-1?r.pop():i.call(r,n,1),--this.size,0))},n.prototype.get=function(e){var r=this.__data__,i=t(r,e);return i<0?void 0:r[i][1]},n.prototype.has=function(e){return t(this.__data__,e)>-1},n.prototype.set=function(e,r){var i=this.__data__,n=t(i,e);return n<0?(++this.size,i.push([e,r])):i[n][1]=r,this};const a=n,o="object"==typeof global&&global&&global.Object===Object&&global;var s="object"==typeof self&&self&&self.Object===Object&&self;const c=o||s||Function("return this")(),u=c.Symbol;var f=Object.prototype,p=f.hasOwnProperty,m=f.toString,l=u?u.toStringTag:void 0;var h=Object.prototype.toString;var g=u?u.toStringTag:void 0;const d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":g&&g in Object(e)?function(e){var t=p.call(e,l),r=e[l];try{e[l]=void 0;var i=!0}catch(e){}var n=m.call(e);return i&&(t?e[l]=r:delete e[l]),n}(e):function(e){return h.call(e)}(e)},x=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},v=function(e){if(!x(e))return!1;var t=d(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},w=c["__core-js_shared__"];var y,b=(y=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"";var k=Function.prototype.toString;const j=function(e){if(null!=e){try{return k.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var S=/^\[object .+?Constructor\]$/,E=Function.prototype,O=Object.prototype,_=E.toString,z=O.hasOwnProperty,T=RegExp("^"+_.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const A=function(e){return!(!x(e)||(t=e,b&&b in t))&&(v(e)?T:S).test(j(e));var t},I=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return A(r)?r:void 0},B=I(c,"Map"),M=I(Object,"create");var U=Object.prototype.hasOwnProperty;var P=Object.prototype.hasOwnProperty;function L(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}L.prototype.clear=function(){this.__data__=M?M(null):{},this.size=0},L.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},L.prototype.get=function(e){var t=this.__data__;if(M){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return U.call(t,e)?t[e]:void 0},L.prototype.has=function(e){var t=this.__data__;return M?void 0!==t[e]:P.call(t,e)},L.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=M&&void 0===t?"__lodash_hash_undefined__":t,this};const R=L,F=function(e,t){var r,i,n=e.__data__;return("string"==(i=typeof(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map};function C(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}C.prototype.clear=function(){this.size=0,this.__data__={hash:new R,map:new(B||a),string:new R}},C.prototype.delete=function(e){var t=F(this,e).delete(e);return this.size-=t?1:0,t},C.prototype.get=function(e){return F(this,e).get(e)},C.prototype.has=function(e){return F(this,e).has(e)},C.prototype.set=function(e,t){var r=F(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};const D=C;function N(e){var t=this.__data__=new a(e);this.size=t.size}N.prototype.clear=function(){this.__data__=new a,this.size=0},N.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},N.prototype.get=function(e){return this.__data__.get(e)},N.prototype.has=function(e){return this.__data__.has(e)},N.prototype.set=function(e,t){var r=this.__data__;if(r instanceof a){var i=r.__data__;if(!B||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new D(i)}return r.set(e,t),this.size=r.size,this};const q=N;function W(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new D;++t<r;)this.add(e[t])}W.prototype.add=W.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},W.prototype.has=function(e){return this.__data__.has(e)};const $=W,V=function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1},H=function(e,t){return e.has(t)},G=function(e,t,r,i,n,a){var o=1&r,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=a.get(e),f=a.get(t);if(u&&f)return u==t&&f==e;var p=-1,m=!0,l=2&r?new $:void 0;for(a.set(e,t),a.set(t,e);++p<s;){var h=e[p],g=t[p];if(i)var d=o?i(g,h,p,t,e,a):i(h,g,p,e,t,a);if(void 0!==d){if(d)continue;m=!1;break}if(l){if(!V(t,(function(e,t){if(!H(l,t)&&(h===e||n(h,e,r,i,a)))return l.push(t)}))){m=!1;break}}else if(h!==g&&!n(h,g,r,i,a)){m=!1;break}}return a.delete(e),a.delete(t),m},X=c.Uint8Array,J=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,i){r[++t]=[i,e]})),r},Q=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r};var Y=u?u.prototype:void 0,K=Y?Y.valueOf:void 0;const Z=function(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e},ee=Array.isArray;var te=Object.prototype.propertyIsEnumerable,re=Object.getOwnPropertySymbols;const ie=re?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,n=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[n++]=o)}return a}(re(e),(function(t){return te.call(e,t)})))}:function(){return[]},ne=function(e){return null!=e&&"object"==typeof e},ae=function(e){return ne(e)&&"[object Arguments]"==d(e)};var oe=Object.prototype,se=oe.hasOwnProperty,ce=oe.propertyIsEnumerable;const ue=ae(function(){return arguments}())?ae:function(e){return ne(e)&&se.call(e,"callee")&&!ce.call(e,"callee")};var fe="object"==typeof exports&&exports&&!exports.nodeType&&exports,pe=fe&&"object"==typeof module&&module&&!module.nodeType&&module,me=pe&&pe.exports===fe?c.Buffer:void 0;const le=(me?me.isBuffer:void 0)||function(){return!1};var he=/^(?:0|[1-9]\d*)$/;const ge=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&he.test(e))&&e>-1&&e%1==0&&e<t},de=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var xe={};xe["[object Float32Array]"]=xe["[object Float64Array]"]=xe["[object Int8Array]"]=xe["[object Int16Array]"]=xe["[object Int32Array]"]=xe["[object Uint8Array]"]=xe["[object Uint8ClampedArray]"]=xe["[object Uint16Array]"]=xe["[object Uint32Array]"]=!0,xe["[object Arguments]"]=xe["[object Array]"]=xe["[object ArrayBuffer]"]=xe["[object Boolean]"]=xe["[object DataView]"]=xe["[object Date]"]=xe["[object Error]"]=xe["[object Function]"]=xe["[object Map]"]=xe["[object Number]"]=xe["[object Object]"]=xe["[object RegExp]"]=xe["[object Set]"]=xe["[object String]"]=xe["[object WeakMap]"]=!1;const ve=function(e){return function(t){return e(t)}};var we="object"==typeof exports&&exports&&!exports.nodeType&&exports,ye=we&&"object"==typeof module&&module&&!module.nodeType&&module,be=ye&&ye.exports===we&&o.process,ke=function(){try{return ye&&ye.require&&ye.require("util").types||be&&be.binding&&be.binding("util")}catch(e){}}(),je=ke&&ke.isTypedArray;const Se=je?ve(je):function(e){return ne(e)&&de(e.length)&&!!xe[d(e)]};var Ee=Object.prototype.hasOwnProperty;const Oe=function(e,t){var r=ee(e),i=!r&&ue(e),n=!r&&!i&&le(e),a=!r&&!i&&!n&&Se(e),o=r||i||n||a,s=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],c=s.length;for(var u in e)!t&&!Ee.call(e,u)||o&&("length"==u||n&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ge(u,c))||s.push(u);return s};var _e=Object.prototype;const ze=(Te=Object.keys,Ae=Object,function(e){return Te(Ae(e))});var Te,Ae,Ie=Object.prototype.hasOwnProperty;const Be=function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||_e))return ze(e);var t,r,i=[];for(var n in Object(e))Ie.call(e,n)&&"constructor"!=n&&i.push(n);return i},Me=function(e){return null!=e&&de(e.length)&&!v(e)},Ue=function(e){return Me(e)?Oe(e):Be(e)},Pe=function(e){return function(e,t,r){var i=t(e);return ee(e)?i:Z(i,r(e))}(e,Ue,ie)};var Le=Object.prototype.hasOwnProperty;const Re=I(c,"DataView"),Fe=I(c,"Promise"),Ce=I(c,"Set"),De=I(c,"WeakMap");var Ne="[object Map]",qe="[object Promise]",We="[object Set]",$e="[object WeakMap]",Ve="[object DataView]",He=j(Re),Ge=j(B),Xe=j(Fe),Je=j(Ce),Qe=j(De),Ye=d;(Re&&Ye(new Re(new ArrayBuffer(1)))!=Ve||B&&Ye(new B)!=Ne||Fe&&Ye(Fe.resolve())!=qe||Ce&&Ye(new Ce)!=We||De&&Ye(new De)!=$e)&&(Ye=function(e){var t=d(e),r="[object Object]"==t?e.constructor:void 0,i=r?j(r):"";if(i)switch(i){case He:return Ve;case Ge:return Ne;case Xe:return qe;case Je:return We;case Qe:return $e}return t});const Ke=Ye;var Ze="[object Arguments]",et="[object Array]",tt="[object Object]",rt=Object.prototype.hasOwnProperty;const it=function(t,r,i,n,a,o){var s=ee(t),c=ee(r),u=s?et:Ke(t),f=c?et:Ke(r),p=(u=u==Ze?tt:u)==tt,m=(f=f==Ze?tt:f)==tt,l=u==f;if(l&&le(t)){if(!le(r))return!1;s=!0,p=!1}if(l&&!p)return o||(o=new q),s||Se(t)?G(t,r,i,n,a,o):function(t,r,i,n,a,o,s){switch(i){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!o(new X(t),new X(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return e(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var c=J;case"[object Set]":var u=1&n;if(c||(c=Q),t.size!=r.size&&!u)return!1;var f=s.get(t);if(f)return f==r;n|=2,s.set(t,r);var p=G(c(t),c(r),n,a,o,s);return s.delete(t),p;case"[object Symbol]":if(K)return K.call(t)==K.call(r)}return!1}(t,r,u,i,n,a,o);if(!(1&i)){var h=p&&rt.call(t,"__wrapped__"),g=m&&rt.call(r,"__wrapped__");if(h||g){var d=h?t.value():t,x=g?r.value():r;return o||(o=new q),a(d,x,i,n,o)}}return!!l&&(o||(o=new q),function(e,t,r,i,n,a){var o=1&r,s=Pe(e),c=s.length;if(c!=Pe(t).length&&!o)return!1;for(var u=c;u--;){var f=s[u];if(!(o?f in t:Le.call(t,f)))return!1}var p=a.get(e),m=a.get(t);if(p&&m)return p==t&&m==e;var l=!0;a.set(e,t),a.set(t,e);for(var h=o;++u<c;){var g=e[f=s[u]],d=t[f];if(i)var x=o?i(d,g,f,t,e,a):i(g,d,f,e,t,a);if(!(void 0===x?g===d||n(g,d,r,i,a):x)){l=!1;break}h||(h="constructor"==f)}if(l&&!h){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(l=!1)}return a.delete(e),a.delete(t),l}(t,r,i,n,a,o))},nt=function e(t,r,i,n,a){return t===r||(null==t||null==r||!ne(t)&&!ne(r)?t!=t&&r!=r:it(t,r,i,n,e,a))},at=function(e){return e==e&&!x(e)},ot=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},st=function(e){var t=function(e){for(var t=Ue(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,at(n)]}return t}(e);return 1==t.length&&t[0][2]?ot(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,i){var n=r.length,a=n,o=!i;if(null==e)return!a;for(e=Object(e);n--;){var s=r[n];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<a;){var c=(s=r[n])[0],u=e[c],f=s[1];if(o&&s[2]){if(void 0===u&&!(c in e))return!1}else{var p=new q;if(i)var m=i(u,f,c,e,t,p);if(!(void 0===m?nt(f,u,3,i,p):m))return!1}}return!0}(r,e,t)}},ct=function(e){return"symbol"==typeof e||ne(e)&&"[object Symbol]"==d(e)};var ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ft=/^\w*$/;const pt=function(e,t){if(ee(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ct(e))||ft.test(e)||!ut.test(e)||null!=t&&e in Object(t)};function mt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var o=e.apply(this,i);return r.cache=a.set(n,o)||a,o};return r.cache=new(mt.Cache||D),r}mt.Cache=D;var lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ht=/\\(\\)?/g;const gt=(dt=mt((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(lt,(function(e,r,i,n){t.push(i?n.replace(ht,"$1"):r||e)})),t}),(function(e){return 500===xt.size&&xt.clear(),e})),xt=dt.cache,dt);var dt,xt;const vt=function(e,t){for(var r=-1,i=null==e?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n};var wt=u?u.prototype:void 0,yt=wt?wt.toString:void 0;const bt=function e(t){if("string"==typeof t)return t;if(ee(t))return vt(t,e)+"";if(ct(t))return yt?yt.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},kt=function(e){return null==e?"":bt(e)},jt=function(e,t){return ee(e)?e:pt(e,t)?[e]:gt(kt(e))},St=function(e){if("string"==typeof e||ct(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Et=function(e,t){for(var r=0,i=(t=jt(t,e)).length;null!=e&&r<i;)e=e[St(t[r++])];return r&&r==i?e:void 0},Ot=function(e,t){return null!=e&&t in Object(e)},_t=function(e,t){return null!=e&&function(e,t,r){for(var i=-1,n=(t=jt(t,e)).length,a=!1;++i<n;){var o=St(t[i]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++i!=n?a:!!(n=null==e?0:e.length)&&de(n)&&ge(o,n)&&(ee(e)||ue(e))}(e,t,Ot)},zt=function(e,t){return pt(e)&&at(t)?ot(St(e),t):function(r){var i=function(e,t,r){var i=null==e?void 0:Et(e,t);return void 0===i?r:i}(r,e);return void 0===i&&i===t?_t(r,e):nt(t,i,3)}},Tt=function(e){return e},At=function(e){return pt(e)?(t=St(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Et(t,e)}}(e);var t},It=function(e){return e!=e},Bt=function(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}(e,t,r):function(e,t,r,i){for(var n=e.length,a=r+(i?1:-1);i?a--:++a<n;)if(t(e[a],a,e))return a;return-1}(e,It,r)}(e,t,0)>-1},Mt=function(e,t,r){for(var i=-1,n=null==e?0:e.length;++i<n;)if(r(t,e[i]))return!0;return!1},Ut=Ce&&1/Q(new Ce([,-0]))[1]==1/0?function(e){return new Ce(e)}:function(){},Pt=function(e,t){return e&&e.length?function(e,t,r){var i=-1,n=Bt,a=e.length,o=!0,s=[],c=s;if(r)o=!1,n=Mt;else if(a>=200){var u=t?null:Ut(e);if(u)return Q(u);o=!1,n=H,c=new $}else c=t?[]:s;e:for(;++i<a;){var f=e[i],p=t?t(f):f;if(f=r||0!==f?f:0,o&&p==p){for(var m=c.length;m--;)if(c[m]===p)continue e;t&&c.push(p),s.push(f)}else n(c,p,r)||(c!==s&&c.push(p),s.push(f))}return s}(e,"function"==typeof(r=t)?r:null==r?Tt:"object"==typeof r?ee(r)?zt(r[0],r[1]):st(r):At(r)):[];var r},Lt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Rt;const Ft=new Uint8Array(16);function Ct(){if(!Rt){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Rt=crypto.getRandomValues.bind(crypto)}return Rt(Ft)}const Dt=[];for(let e=0;e<256;++e)Dt.push((e+256).toString(16).slice(1));const Nt=function(e,t,r){if(Lt.randomUUID&&!t&&!e)return Lt.randomUUID();const i=(e=e||{}).random||(e.rng||Ct)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=i[e];return t}return function(e,t=0){return(Dt[e[t+0]]+Dt[e[t+1]]+Dt[e[t+2]]+Dt[e[t+3]]+"-"+Dt[e[t+4]]+Dt[e[t+5]]+"-"+Dt[e[t+6]]+Dt[e[t+7]]+"-"+Dt[e[t+8]]+Dt[e[t+9]]+"-"+Dt[e[t+10]]+Dt[e[t+11]]+Dt[e[t+12]]+Dt[e[t+13]]+Dt[e[t+14]]+Dt[e[t+15]]).toLowerCase()}(i)};r(9558),r(6831);var qt=u?u.isConcatSpreadable:void 0;const Wt=function(e){return ee(e)||ue(e)||!!(qt&&e&&e[qt])},$t=function e(t,r,i,n,a){var o=-1,s=t.length;for(i||(i=Wt),a||(a=[]);++o<s;){var c=t[o];r>0&&i(c)?r>1?e(c,r-1,i,n,a):Z(a,c):n||(a[a.length]=c)}return a};var Vt=Math.max;const Ht=function(){try{var e=I(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Gt=Ht?function(e,t){return Ht(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Tt;var Xt=Date.now;const Jt=function(e){var t=0,r=0;return function(){var i=Xt(),n=16-(i-r);if(r=i,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Gt),Qt=function(e){return ne(e)&&Me(e)},Yt=function(e){return Jt(function(e,t,r){return t=Vt(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=Vt(i.length-t,0),o=Array(a);++n<a;)o[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,void 0,Tt),e+"")}((function(e,t){return Qt(e)?function(e,t,r,i){var n=-1,a=Bt,o=!0,s=e.length,c=[],u=t.length;if(!s)return c;r&&(t=vt(t,ve(r))),i?(a=Mt,o=!1):t.length>=200&&(a=H,o=!1,t=new $(t));e:for(;++n<s;){var f=e[n],p=null==r?f:r(f);if(f=i||0!==f?f:0,o&&p==p){for(var m=u;m--;)if(t[m]===p)continue e;c.push(f)}else a(t,p,i)||c.push(f)}return c}(e,$t(t,1,Qt,!0)):[]}));function Kt(e){return new DataView(e.buffer,e.byteOffset)}r(1024);const Zt={len:1,get:(e,t)=>Kt(e).getUint8(t),put:(e,t,r)=>(Kt(e).setUint8(t,r),t+1)},er={len:2,get:(e,t)=>Kt(e).getUint16(t,!0),put:(e,t,r)=>(Kt(e).setUint16(t,r,!0),t+2)},tr={len:2,get:(e,t)=>Kt(e).getUint16(t),put:(e,t,r)=>(Kt(e).setUint16(t,r),t+2)},rr={len:4,get:(e,t)=>Kt(e).getUint32(t,!0),put:(e,t,r)=>(Kt(e).setUint32(t,r,!0),t+4)},ir={len:4,get:(e,t)=>Kt(e).getUint32(t),put:(e,t,r)=>(Kt(e).setUint32(t,r),t+4)},nr={len:4,get:(e,t)=>Kt(e).getInt32(t),put:(e,t,r)=>(Kt(e).setInt32(t,r),t+4)},ar={len:8,get:(e,t)=>Kt(e).getBigUint64(t,!0),put:(e,t,r)=>(Kt(e).setBigUint64(t,r,!0),t+8)};class or{constructor(e,t){this.len=e,this.encoding=t,this.textDecoder=new TextDecoder(t)}get(e,t){return this.textDecoder.decode(e.subarray(t,t+this.len))}}class sr extends Error{constructor(){super("End-Of-Stream")}}class cr{constructor(){this.maxStreamReadSize=1048576,this.endOfStream=!1,this.peekQueue=[]}async peek(e,t,r){const i=await this.read(e,t,r);return this.peekQueue.push(e.subarray(t,t+i)),i}async read(e,t,r){if(0===r)return 0;let i=this.readFromPeekBuffer(e,t,r);if(i+=await this.readRemainderFromStream(e,t+i,r-i),0===i)throw new sr;return i}readFromPeekBuffer(e,t,r){let i=r,n=0;for(;this.peekQueue.length>0&&i>0;){const r=this.peekQueue.pop();if(!r)throw new Error("peekData should be defined");const a=Math.min(r.length,i);e.set(r.subarray(0,a),t+n),n+=a,i-=a,a<r.length&&this.peekQueue.push(r.subarray(a))}return n}async readRemainderFromStream(e,t,r){let i=r,n=0;for(;i>0&&!this.endOfStream;){const r=Math.min(i,this.maxStreamReadSize),a=await this.readFromStream(e,t+n,r);if(0===a)break;n+=a,i-=a}return n}}class ur extends cr{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,t,r){if(this.endOfStream)throw new sr;const i=await this.reader.read(new Uint8Array(r));return i.done&&(this.endOfStream=i.done),i.value?(e.set(i.value,t),i.value.byteLength):0}async abort(){await this.reader.cancel(),this.reader.releaseLock()}}class fr{constructor(e){this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=e?.onClose,e?.abortSignal&&e.abortSignal.addEventListener("abort",(()=>{this.abort()}))}async readToken(e,t=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:t})<e.len)throw new sr;return e.get(r,0)}async peekToken(e,t=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:t})<e.len)throw new sr;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new sr;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new sr;return e.get(this.numBuffer,0)}async ignore(e){if(void 0!==this.fileInfo.size){const t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){await this.abort(),await(this.onClose?.())}normalizeOptions(e,t){if(t&&void 0!==t.position&&t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return t?{mayBeLess:!0===t.mayBeLess,offset:t.offset?t.offset:0,length:t.length?t.length:e.length-(t.offset?t.offset:0),position:t.position?t.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}abort(){return Promise.resolve()}}class pr extends fr{constructor(e,t){super(t),this.streamReader=e,this.fileInfo=t?.fileInfo??{}}async readBuffer(e,t){const r=this.normalizeOptions(e,t),i=r.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,t);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(0===r.length)return 0;const n=await this.streamReader.read(e,r.offset,r.length);if(this.position+=n,(!t||!t.mayBeLess)&&n<r.length)throw new sr;return n}async peekBuffer(e,t){const r=this.normalizeOptions(e,t);let i=0;if(r.position){const t=r.position-this.position;if(t>0){const n=new Uint8Array(r.length+t);return i=await this.peekBuffer(n,{mayBeLess:r.mayBeLess}),e.set(n.subarray(t),r.offset),i-t}if(t<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{i=await this.streamReader.peek(e,r.offset,r.length)}catch(e){if(t?.mayBeLess&&e instanceof sr)return 0;throw e}if(!r.mayBeLess&&i<r.length)throw new sr}return i}async ignore(e){const t=Math.min(256e3,e),r=new Uint8Array(t);let i=0;for(;i<e;){const n=e-i,a=await this.readBuffer(r,{length:Math.min(t,n)});if(a<0)return a;i+=a}return i}abort(){return this.streamReader.abort()}supportsRandomAccess(){return!1}}class mr extends fr{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo={...t?.fileInfo??{},size:e.length}}async readBuffer(e,t){if(t?.position){if(t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=t.position}const r=await this.peekBuffer(e,t);return this.position+=r,r}async peekBuffer(e,t){const r=this.normalizeOptions(e,t),i=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&i<r.length)throw new sr;return e.set(this.uint8Array.subarray(r.position,r.position+i),r.offset),i}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}}function lr(e){const{byteLength:t}=e;return 6===t?e.getUint16(0)*2**32+e.getUint32(2):5===t?e.getUint8(0)*2**32+e.getUint32(1):4===t?e.getUint32(0):3===t?65536*e.getUint8(0)+e.getUint16(1):2===t?e.getUint16(0):1===t?e.getUint8(0):void 0}function hr(e,t){const r=e.length,i=t.length;if(0===i)return-1;if(i>r)return-1;const n=r-i;for(let r=0;r<=n;r++){let n=!0;for(let a=0;a<i;a++)if(e[r+a]!==t[a]){n=!1;break}if(n)return r}return-1}Object.prototype.toString,new globalThis.TextDecoder("utf8"),new globalThis.TextEncoder,Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const gr={get:(e,t)=>127&e[t+3]|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4},dr=4100;function xr(e,t,r){r={offset:0,...r};for(const[i,n]of t.entries())if(r.mask){if(n!==(r.mask[i]&e[i+r.offset]))return!1}else if(n!==e[i+r.offset])return!1;return!0}class vr{constructor(e){this.detectors=e?.customDetectors,this.tokenizerOptions={abortSignal:e?.signal},this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const t=e.position;for(const r of this.detectors||[]){const i=await r(e);if(i)return i;if(t!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Uint8Array?e:new Uint8Array(e);var r,i;if(t?.length>1)return this.fromTokenizer((r=t,i=this.tokenizerOptions,new mr(r,i)))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const t=await(r=e,i=this.tokenizerOptions,new pr(new ur(r),i));var r,i;try{return await this.fromTokenizer(t)}finally{await t.close()}}async toDetectionStream(e,t){const{sampleSize:r=dr}=t;let i,n;const a=e.getReader({mode:"byob"});try{const{value:e,done:t}=await a.read(new Uint8Array(r));if(n=e,!t&&e)try{i=await this.fromBuffer(e.slice(0,r))}catch(e){if(!(e instanceof sr))throw e;i=void 0}n=e}finally{a.releaseLock()}const o=new TransformStream({async start(e){e.enqueue(n)},transform(e,t){t.enqueue(e)}}),s=e.pipeThrough(o);return s.fileType=i,s}check(e,t){return xr(this.buffer,e,t)}checkString(e,t){return this.check((r=e,[...r].map((e=>e.charCodeAt(0)))),t);var r}async parse(e){if(this.buffer=new Uint8Array(dr),void 0===e.fileInfo.size&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const t=await e.readToken(gr);return e.position+t>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(t),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===this.buffer[0]||70===this.buffer[0])&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const r=new DataView(this.buffer.buffer),i={compressedSize:r.getUint32(18,!0),uncompressedSize:r.getUint32(22,!0),filenameLength:r.getUint16(26,!0),extraFieldLength:r.getUint16(28,!0)};if(i.filename=await e.readToken(new or(i.filenameLength,"utf-8")),await e.ignore(i.extraFieldLength),/classes\d*\.dex/.test(i.filename))return{ext:"apk",mime:"application/vnd.android.package-archive"};if("META-INF/mozilla.rsa"===i.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(i.filename.endsWith(".rels")||i.filename.endsWith(".xml"))switch(i.filename.split("/")[0]){case"_rels":default:break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"}}if(i.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(i.filename.startsWith("3D/")&&i.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if("mimetype"===i.filename&&i.compressedSize===i.uncompressedSize){let n=await e.readToken(new or(i.compressedSize,"utf-8"));switch(n=n.trim(),n){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}}if(0===i.compressedSize){let a=-1;for(;a<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),a=hr(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(a>=0?a:this.buffer.length)}else await e.ignore(i.compressedSize)}}catch(o){if(!(o instanceof sr))throw o}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const s=new Uint8Array(8);return await e.readBuffer(s),xr(s,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/ogg; codecs=opus"}:xr(s,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:xr(s,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:xr(s,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:xr(s,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:xr(s,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(3===this.buffer[2]||5===this.buffer[2]||7===this.buffer[2])&&(4===this.buffer[3]||6===this.buffer[3]||8===this.buffer[3]))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&96&this.buffer[8]){const c=new or(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(c){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return c.startsWith("3g")?c.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const u=10485760,f=new Uint8Array(Math.min(u,e.fileInfo.size));if(await e.readBuffer(f,{mayBeLess:!0}),-1!==hr(f,(new TextEncoder).encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(p){if(!(p instanceof sr))throw p}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const m=await this.readTiffHeader(!1);if(m)return m}if(this.check([77,77])){const l=await this.readTiffHeader(!0);if(l)return l}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function h(){const t=await e.peekNumber(Zt);let r=128,i=0;for(;!(t&r)&&0!==r;)++i,r>>=1;const n=new Uint8Array(i+1);return await e.readBuffer(n),n}async function g(){const e=await h(),t=await h();t[0]^=128>>t.length-1;const r=Math.min(6,t.length),i=new DataView(e.buffer),n=new DataView(t.buffer,t.length-r,r);return{id:lr(i),len:lr(n)}}async function d(t){for(;t>0;){const r=await g();if(17026===r.id)return(await e.readToken(new or(r.len))).replaceAll(/\00.*$/g,"");await e.ignore(r.len),--t}}const x=await g();switch(await d(x.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(0===this.buffer[6]||1===this.buffer[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const v=new or(4,"latin1").get(this.buffer,2);if(v.match("^d*")&&v>=1e3&&v<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),"debian-binary"===await e.readToken(new or(13,"ascii"))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&["\n","\r","\t"," ","\0"].some((e=>this.checkString(e,{offset:6}))))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){async function w(){return{length:await e.readToken(nr),type:await e.readToken(new or(4,"latin1"))}}await e.ignore(8);do{const y=await w();if(y.length<0)return;switch(y.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(y.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function b(){const t=new Uint8Array(16);return await e.readBuffer(t),{id:t,size:Number(await e.readToken(ar))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const k=await b();let j=k.size-24;if(xr(k.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const S=new Uint8Array(16);if(j-=await e.readBuffer(S),xr(S,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(xr(S,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(j)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new or(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const E=new DataView(this.buffer.buffer).getUint32(12,!0);if(E>12&&this.buffer.length>=E+16)try{const O=(new TextDecoder).decode(this.buffer.slice(16,E+16));if(JSON.parse(O).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),function(e,t=0){const r=Number.parseInt(new or(6).get(e,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(r))return!1;let i=256;for(let r=t;r<t+148;r++)i+=e[r];for(let r=t+156;r<t+512;r++)i+=e[r];return r===i}(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const t=await this.tokenizer.readToken(e?tr:er);switch(this.tokenizer.ignore(10),t){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const t=await this.tokenizer.readToken(e?tr:er);for(let r=0;r<t;++r){const t=await this.readTiffTag(e);if(t)return t}}async readTiffHeader(e){const t=(e?tr:er).get(this.buffer,2),r=(e?ir:rr).get(this.buffer,4);if(42===t){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(43===t)return{ext:"tif",mime:"image/tiff"}}}new Set(["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk"]),new Set(["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive"]);const wr=/\s*([^,]\S*[^,](?:\s+[^,]+)?)\s*(?:,|$)/,yr=(e,t,r)=>{if(e[r]=e[r]||{},e[r][t])throw new Error(`No more than one image candidate is allowed for a given descriptor: ${t}${r}`);e[r][t]=!0},br=(e,t,r)=>{if(Number.isNaN(e))throw new TypeError(`${r||e} is not a valid number`);switch(t){case"w":if(e<=0)throw new Error("Width descriptor must be greater than zero");if(!Number.isInteger(e))throw new TypeError("Width descriptor must be an integer");break;case"x":if(e<=0)throw new Error("Pixel density descriptor must be greater than zero");break;case"h":throw new Error("Height descriptor is no longer allowed");default:throw new Error(`Invalid srcset descriptor: ${r}`)}};new Set(["width","height","density"]),r(6166),r(4599),r(9191);const kr="firefox",jr={local:"20250102095603_add_lenso.ai",session:"20240514122825_initial_version"};function Sr(e){return void 0!==e.convertToBlob}function Er(e,t,{offscreen:r=!0,contextType:i="2d"}={}){let n,a;return r?n=new OffscreenCanvas(e,t):(n=document.createElement("canvas"),n.width=e,n.height=t),i&&(a=n.getContext(i)),{cnv:n,ctx:a}}async function Or(e,{ctx:t,type:r="image/png",quality:i=.8,clear:n=!0}={}){let a;if(t||(t=e.getContext("2d")),Sr(e)){const t=await e.convertToBlob({type:r,quality:i}).catch((e=>null));t&&(a=await Br(t))}else try{a=e.toDataURL(r,i)}catch(e){}return n&&t.clearRect(0,0,e.width,e.height),a}async function _r(e,{ctx:t,type:r="image/png",quality:i=.8,clear:n=!0}={}){function a(){n&&t.clearRect(0,0,e.width,e.height)}if(t||(t=e.getContext("2d")),Sr(e)){let t;try{t=await e.convertToBlob({type:r,quality:i})}catch(e){}finally{a()}return t}return new Promise((t=>{try{e.toBlob((function(e){a(),t(e)}),r,i)}catch(e){a(),t()}}))}function zr(e,t){try{return e.drawImage(t,0,0),!0}catch(e){}}function Tr(e){return e.slice(0,100).split(",")[0].split(":")[1].split(";")[0].toLowerCase()}function Ar(e){const[t,r]=e.split(",");let i;i=t.endsWith(";base64")?atob(r):unescape(r);const n=i.length,a=new Uint8Array(new ArrayBuffer(n));for(let e=0;e<n;e++)a[e]=i.charCodeAt(e);return a}function Ir(e){return new Blob([Ar(e)],{type:Tr(e)})}function Br(e){return new Promise((t=>{const r=new FileReader;r.onload=e=>{t(e.target.result)},r.onerror=()=>{t()},r.onabort=()=>{t()},r.readAsDataURL(e)}))}function Mr(e){const t=document.createElement("a");return t.href=e,t.href}const Ur={local:!1,session:!1,sync:!1};async function Pr({area:e="local"}={}){if(!Ur[e])return new Promise(((t,r)=>{let i;const n=async function(){await async function({area:e="local"}={}){if(Ur[e])return!0;{const{storageVersion:t}=await browser.storage[e].get("storageVersion");if(t&&t===jr[e])return Ur[e]=!0,!0}return!1}({area:e})?(self.clearTimeout(a),t()):i?r(new Error(`Storage (${e}) is not ready`)):self.setTimeout(n,30)},a=self.setTimeout((function(){i=!0}),6e4);n()}))}function Lr(e,t,{encode:r=!0}={}){return r?`${t}${function(e,{locale:t="en-US"}={}){return e.replace(/^\p{CWU}/u,(e=>e.toLocaleUpperCase(t)))}(e)}`:function(e,{locale:t="en-US"}={}){return e.replace(/^\p{CWL}/u,(e=>e.toLocaleLowerCase(t)))}(e.replace(new RegExp(`^${t}`),""))}function Rr(e,t,{encode:r=!0}={}){if("string"==typeof e)return Lr(e,t,{encode:r});if(Array.isArray(e)){const i=[];for(const n of e)i.push(Lr(n,t,{encode:r}));return i}{const i={};for(const[n,a]of Object.entries(e))i[Lr(n,t,{encode:r})]=a;return i}}function Fr(e,t){return t?.active?Rr(e,t.name,{encode:!0}):e}const Cr=async function(e=null,{area:t="local",context:r=null}={}){return await Pr({area:t}),function(e,t){return t?.active?Rr(e,t.name,{encode:!1}):e}(await browser.storage[t].get(Fr(e,r)),r)},Dr=browser.runtime.getURL("/src/search/index.html")+"?id={id}",Nr={google:{url:{target:"https://www.google.com/searchbyimage?sbisrc=cr_1_5_2&image_url={imgUrl}",isExec:!0},image:{target:Dr,isTaskId:!0}},bing:{url:{target:"https://www.bing.com/images/search?q=imgurl:{imgUrl}&view=detailv2&iss=sbi&FORM=IRSBIQ&redirecturl=https%3A%2F%2Fwww.bing.com%2Fimages%2Fdiscover%3Fform%3DHDRSC2#enterInsights"},image:{target:"https://www.bing.com/",isExec:!0}},yandex:{url:{target:"https://yandex.com/images/search?url={imgUrl}&rpt=imageview"},image:{target:"https://yandex.com/images/",isExec:!0}},baidu:{url:{target:"https://www.baidu.com/",isExec:!0},image:{target:"https://www.baidu.com/",isExec:!0}},tineye:{url:{target:"https://www.tineye.com/search/?&url={imgUrl}"},image:{target:"https://www.tineye.com/",isExec:!0}},sogou:{url:{target:"https://pic.sogou.com/ris?query={imgUrl}&flag=1&drag=0"},image:{target:"https://pic.sogou.com/",isExec:!0}},karmaDecay:{url:{target:"http://karmadecay.com/search?q={imgUrl}"},image:{target:"http://karmadecay.com/",isExec:!0}},whatanime:{url:{target:"https://trace.moe/?url={imgUrl}"},image:{target:"https://trace.moe/",isExec:!0}},saucenao:{url:{target:"https://saucenao.com/",isExec:!0},image:{target:"https://saucenao.com/",isExec:!0}},iqdb:{url:{target:"https://iqdb.org/?url={imgUrl}"},image:{target:"https://iqdb.org/",isExec:!0}},ascii2d:{url:{target:"https://ascii2d.net/search/url/{imgUrl}"},image:{target:"https://ascii2d.net/",isExec:!0}},getty:{image:{target:"https://www.gettyimages.com/",isExec:!0}},istock:{image:{target:"https://www.istockphoto.com/",isExec:!0}},shutterstock:{image:{target:"https://www.shutterstock.com/images",isExec:!0}},adobestock:{image:{target:"https://stock.adobe.com/",isExec:!0}},depositphotos:{image:{target:"https://depositphotos.com/",isExec:!0}},pinterest:{image:{target:Dr,isTaskId:!0}},qihoo:{image:{target:"https://st.so.com/",isExec:!0}},taobao:{image:{target:"https://www.taobao.com/",isExec:!0}},alibabaChina:{image:{target:"https://www.1688.com/",isExec:!0}},dreamstime:{image:{target:"https://www.dreamstime.com/",isExec:!0}},alamy:{image:{target:"https://www.alamy.com/",isExec:!0}},"123rf":{image:{target:"https://www.123rf.com/",isExec:!0}},esearch:{image:{target:"https://euipo.europa.eu/eSearch/",isExec:!0}},tmview:{image:{target:"https://www.tmdn.org/tmview/#/tmview",isExec:!0}},branddb:{image:{target:"https://branddb.wipo.int/en/similarlogo",isExec:!0}},madridMonitor:{image:{target:"https://www3.wipo.int/madrid/monitor/en/",isExec:!0}},auTrademark:{image:{target:"https://search.ipaustralia.gov.au/trademarks/search/advanced",isExec:!0}},auDesign:{image:{target:"https://search.ipaustralia.gov.au/designs/search/advanced",isExec:!0}},nzTrademark:{image:{target:"https://app.iponz.govt.nz/app/TradeMarkCheck",isExec:!0}},jpDesign:{image:{target:"https://www.graphic-image.inpit.go.jp/",isExec:!0}},pimeyes:{image:{target:"https://pimeyes.com/en",isExec:!0}},stocksy:{image:{target:"https://www.stocksy.com/",isExec:!0}},pond5:{image:{target:"https://www.pond5.com/stock-images/",isExec:!0}},pixta:{image:{target:"https://www.pixtastock.com/",isExec:!0}},ikea:{image:{target:"https://www.ikea.com/",isExec:!0}},repostSleuth:{url:{target:"https://repostsleuth.com/search?targetImageMatch=60&filterSameAuthor=false",isExec:!0},image:{target:"https://repostsleuth.com/search?targetImageMatch=60&filterSameAuthor=false",isExec:!0}},shein:{image:{target:"https://m.shein.com/presearch",isExec:!0}},lykdat:{image:{target:"https://lykdat.com/",isExec:!0}},wildberries:{image:{target:"https://www.wildberries.ru/",isExec:!0}},googleLens:{url:{target:"https://www.google.com/imghp",isExec:!0},image:{target:"https://www.google.com/imghp",isExec:!0}},lexica:{url:{target:"https://lexica.art/?q={imgUrl}"},image:{target:"https://lexica.art/",isExec:!0}},kagi:{url:{target:"https://kagi.com/images",isExec:!0},image:{target:"https://kagi.com/images",isExec:!0}},freepik:{image:{target:"https://www.freepik.com/search",isExec:!0}},icons8:{image:{target:"https://icons8.com/",isExec:!0}},lenso:{url:{target:"https://lenso.ai/en/search-by-url?url={imgUrl}&utm_source=sbi",isExec:!0},image:{target:"https://lenso.ai/en?utm_source=sbi",isExec:!0}}},qr=["baidu","sogou","qihoo","taobao","alibabaChina"],Wr={"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpg","jpeg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/webp":["webp"],"image/wmf":["wmf"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["bmp"],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"]};Object.assign(Wr,{"image/jxl":["jxl"]}),Object.assign({"image/aces":"","image/apng":"APNG","image/avci":"","image/avcs":"","image/avif":"AVIF","image/bmp":"BMP","image/cgm":"","image/dicom-rle":"","image/emf":"","image/fits":"","image/g3fax":"","image/gif":"GIF","image/heic":"HEIC","image/heic-sequence":"","image/heif":"HEIF","image/heif-sequence":"","image/hej2k":"","image/hsj2":"","image/ief":"","image/jls":"","image/jp2":"JP2","image/jpeg":"JPEG","image/jph":"","image/jphc":"","image/jpm":"","image/jpx":"JPX","image/jxr":"","image/jxra":"","image/jxrs":"","image/jxs":"","image/jxsc":"","image/jxsi":"","image/jxss":"","image/ktx":"","image/ktx2":"","image/png":"PNG","image/prs.btif":"","image/prs.pti":"","image/sgi":"","image/svg+xml":"SVG","image/t38":"","image/tiff":"TIFF","image/tiff-fx":"","image/vnd.adobe.photoshop":"PSD","image/vnd.airzip.accelerator.azv":"","image/vnd.dece.graphic":"","image/vnd.djvu":"","image/vnd.dvb.subtitle":"","image/vnd.dwg":"","image/vnd.dxf":"","image/vnd.fastbidsheet":"","image/vnd.fpx":"","image/vnd.fst":"","image/vnd.fujixerox.edmics-mmr":"","image/vnd.fujixerox.edmics-rlc":"","image/vnd.microsoft.icon":"ICO","image/vnd.ms-dds":"","image/vnd.ms-modi":"","image/vnd.ms-photo":"","image/vnd.net-fpx":"","image/vnd.pco.b16":"","image/vnd.tencent.tap":"","image/vnd.valve.source.texture":"","image/vnd.wap.wbmp":"","image/vnd.xiff":"","image/vnd.zbrush.pcx":"","image/webp":"WebP","image/wmf":"","image/x-3ds":"","image/x-cmu-raster":"","image/x-cmx":"","image/x-freehand":"","image/x-icon":"ICO","image/x-jng":"","image/x-mrsid-image":"","image/x-ms-bmp":"","image/x-pcx":"","image/x-pict":"","image/x-portable-anymap":"","image/x-portable-bitmap":"","image/x-portable-graymap":"","image/x-portable-pixmap":"","image/x-rgb":"","image/x-tga":"","image/x-xbitmap":"XBM","image/x-xpixmap":"","image/x-xwindowdump":""},{"image/jxl":"JPEG XL"});const $r=["image/webp","image/avif"],Vr=["google","bing","yandex","baidu","tineye","whatanime","saucenao","ascii2d","adobestock","depositphotos","pinterest","qihoo","alibabaChina","dreamstime","pimeyes","pond5","ikea","shein","lykdat","googleLens","lexica","icons8","lenso"],Hr=["bing","yandex","whatanime","adobestock","alibabaChina","dreamstime","pond5","lexica"];async function Gr(e,{bypassBlocking:t=!0}={}){let r;r=Array.isArray(e)?e:"allEngines"===e?await async function(e){return void 0===e&&(e=await Cr(["engines","disabledEngines"])),Yt(e.engines,e.disabledEngines)}():[e];const{bypassImageHostBlocking:i}=await Cr("bypassImageHostBlocking");for(const e of r)if(!Nr[e].url||t&&i&&qr.includes(e))return!1;return!0}function Xr(e,{name:t,type:r}={}){const i=r||e.type,n=function({name:e,type:t}={}){if(e||(e="image"),t){const r=function(e){const t=Wr[e];return t?t[0]:null}(t);if(r){const i=function(e){return(/(?:\.([^.]+))?$/.exec(e)[1]||"").toLowerCase()}(e);i?ti(i)!==t?e=e.replace(new RegExp(`${i}$`,"i"),r):e.endsWith(i)||(e=e.replace(new RegExp(`${i}$`,"i"),i)):e=`${e}.${r}`}}return e}({name:t||e.name,type:i});return e.name!==n||e.type!==i?new File([e],n,{type:i}):e}async function Jr({blob:e,dataUrl:t,name:r}={}){e||(e=Ir(t));const i=await async function(e,{name:t}={}){if(!ci(e))return;const r=await async function(e){return new Uint8Array(await new Response(e).arrayBuffer())}(e.slice(0,4100)).catch((e=>null));let i;if(r&&({mime:i}=await async function(e){return(new vr).fromBuffer(e)}(r)||{}),i){if(ri(i))return Xr(e,{type:i,name:t})}else if(ri(e.type))return Xr(e,{name:t})}(e,{name:r});if(i)return i}async function Qr(e){const t=await ei({url:e,query:!0});if(t){let{name:r,type:i}=ii(e);["image/jpeg","image/png"].includes(i)||(i="image/png");const{cnv:n,ctx:a}=Er(t.naturalWidth,t.naturalHeight);if(zr(a,t)){const e=await _r(n,{ctx:a,type:i});if(ci(e))return Xr(e,{name:r})}}}async function Yr(e){const t=await ei({url:e,query:!0});if(t){const{cnv:e,ctx:r}=Er(t.naturalWidth,t.naturalHeight);if(zr(r,t)){const t=await _r(e,{ctx:r});if(ci(t))return Xr(t)}}}async function Kr(e){const t=await Br(e);if(t)return{imageDataUrl:t,imageFilename:e.name,imageType:e.type,imageSize:e.size}}function Zr(e,t,{maxDimension:r=1/0}={}){let i,n;return e>r||t>r?(e===t&&(i=n=r),e>t&&(i=r,n=t/e*r),e<t&&(i=e/t*r,n=r)):(i=e,n=t),{width:i,height:n}}async function ei({url:e,blob:t,query:r=!1}={}){if("undefined"==typeof Image){if(e){if(!e.startsWith("data:"))throw new Error("getImageElement does not accept image URLs in service workers");try{t=Ir(e)}catch{}}let r;try{r=await createImageBitmap(t),r.naturalWidth=r.width,r.naturalHeight=r.height}catch{}return r}return new Promise((i=>{if(r){const t=document.images;for(let r=0;r<t.length;r++){const n=t[r];if(n?.currentSrc===e){if(!n.complete||!n.naturalWidth)break;i(n)}}}if(e&&e.startsWith("data:")&&e.length>(["firefox","safari"].includes(kr)?31457280:1/0))try{t=Ir(e)}catch{}function n(r){t&&URL.revokeObjectURL(e),r?i(r):i()}t&&(e=URL.createObjectURL(t));const a=new Image;a.onload=()=>{n(a)},a.onerror=()=>{n()},a.onabort=()=>{n()},a.src=e}))}function ti(e){for(const[t,r]of Object.entries(Wr))if(r.includes(e))return t;return null}function ri(e){return!!Wr.hasOwnProperty(e)}function ii(e){const{name:t,ext:r}=function(e){const t=e.split("/").pop().replace(/(?:#|\?).*?$/,"").split(".");let r="",i="";return 1===t.length?r=t[0]:(r=t.join("."),i=t.pop().toLowerCase()),{name:r,ext:i}}(e);return{name:t,ext:r,type:ti(r)}}async function ni(e,{credentials:t=!1,timeout:r=12e4,token:i=""}={}){return new Promise((n=>{const a=function(){try{return new content.XMLHttpRequest}catch(e){return new XMLHttpRequest}}();a.open("GET",e),r&&(a.timeout=r),a.responseType="blob",a.withCredentials=t,i&&a.setRequestHeader("Accept",i),a.onload=()=>{n(a.response)},a.onerror=()=>{n()},a.onabort=()=>{n()},a.ontimeout=()=>{n()},a.send()}))}async function ai(e){const t=await pi({message:{id:"fetchImage",url:e},transferResponse:!0});if(t)return Ir(t)}async function oi(e,{convert:t=!1}={}){let r;t&&$r.includes(e.imageType)&&(r=await async function(e,{newType:t="",maxSize:r=1/0,maxDimension:i=1/0,getFile:n=!1,setBlob:a=!1,throwError:o=!1}={}){try{const o=await async function({blob:e,dataUrl:t,currentType:r="",currentSize:i=0,newType:n="",maxSize:a=1/0,maxDimension:o=1/0,getBlob:s=!1}={}){a!==1/0&&(i||(e||(e=Ir(t)),i=e.size),o===1/0&&(o=function({maxSize:e=1/0}={}){return e&&e!==1/0?e>=8388608?1680:e>=4194304?1280:880:1/0}({maxSize:a}))),r||(r=e?.type||Tr(t)),n||(n=r);const c=await ei({url:t,blob:e});let u=c.naturalWidth,f=c.naturalHeight;for(;r!==n||i>a||u>o||f>o;){const{width:t,height:r}=Zr(u,f,{maxDimension:o}),{cnv:p,ctx:m}=Er(t,r);if("image/jpeg"===n&&(m.fillStyle="#FFFFFF",m.fillRect(0,0,t,r)),m.drawImage(c,0,0,u,f,0,0,t,r),(s||a<1/0)&&(e=await _r(p,{ctx:m,type:n,clear:!1})),!(a!==1/0&&(i=e.size)>a&&o>480))return s?e:await Or(p,{ctx:m,type:n});o-=200}return s&&!e&&(e=Ir(t)),s?e:t}({dataUrl:e.imageDataUrl,currentType:e.imageType,currentSize:e.imageSize,newType:t,maxSize:r,maxDimension:i,getBlob:!0});if(o){const t=Xr(o,{name:e.imageFilename});if(n)return t;const r=await Kr(t);return a&&(r.imageBlob=o),r}}catch(e){if(console.log(e.toString()),o)throw e}}(e,{newType:"image/png",getFile:!0}));const i=[r||new File([Ir(e.imageDataUrl)],e.imageFilename,{type:e.imageType})];try{await async function(e){if(!navigator.canShare||!navigator.canShare({files:e}))throw new Error("File sharing not supported");try{await navigator.share({files:e})}catch(e){if("AbortError"!==e.name)throw e}}(i)}catch(e){console.log(e.toString()),await browser.runtime.sendMessage({id:"notification",messageId:"error_imageShareNotSupported"})}}function si(e,t){if("image/webp"===e){if(Vr.includes(t))return!0}else{if("image/avif"!==e)return!0;if(Hr.includes(t))return!0}}async function ci(e){if(e){if(e.size<=314572800)return!0;console.log(`File too large (${e.size} bytes)`)}return!1}function ui(e){const t=[];try{const r=function(e,{strict:t=!1}={}){const r=t?{}:void 0;return e.replace(/\r?\n/,"").replace(/,\s+/,", ").split(wr).filter(((e,t)=>t%2==1)).map((e=>{const[i,...n]=e.trim().split(/\s+/),a={url:i};t&&((e,t)=>{if(0===t.length)(e=>{if(e.fallback)throw new Error("Only one fallback image candidate is allowed");if(e.x&&e.x[1])throw new Error("A fallback image is equivalent to a 1x descriptor, providing both is invalid.");e.fallback=!0})(e);else if(t.length>1)throw new Error(`Image candidate may have no more than one descriptor, found ${t.length}: ${t.join(" ")}`)})(r,n);for(const e of n){const i=e[e.length-1],n=Number.parseFloat(e.slice(0,-1));switch(t&&(br(n,i,e),yr(r,n,i)),i){case"w":a.width=n;break;case"h":a.height=n;break;case"x":a.density=n}}return a}))}(e,{strict:!1});for(const e of r)t.push(e.url)}catch(e){}return t}function fi({port:e,checkMessage:t=null,timeout:r=12e4}={}){let i;const n=function(e){t(e)&&(i=!0)};return e.onMessage.addListener(n),new Promise(((a,o)=>{const s=function(){u(),a()},c=function(e){t(e)&&s()},u=function({throwError:t=!1}={}){self.clearTimeout(p),e.onDisconnect.removeListener(f),e.onMessage.removeListener(n),e.onMessage.removeListener(c),t&&o()},f=function(){u({throwError:!0})};e.onDisconnect.addListener(f);const p=self.setTimeout(f,r);i?s():e.onMessage.addListener(c)}))}async function pi({target:e="runtime",tabId:t,frameId:r,messagePort:i,message:n,transferResponse:a=!1,openConnection:o=!1}={}){let s;if(!a)try{if("runtime"===e)return await browser.runtime.sendMessage(n);if("tab"===e)return await browser.tabs.sendMessage(t,n,{frameId:r});if("port"===e)return i.postMessage(n)}catch(e){s=e}const c=Nt(),u=83886080,f=JSON.stringify(n),p=Boolean(s)||f.length>u,m=!Boolean(i);if(o){(i=browser.runtime.connect({name:`message_${c}`})).postMessage({id:"safari 18 regression"});const e=fi({port:i,checkMessage:function(e){if(e.transfer?.id===c&&"connection"===e.transfer.type&&e.transfer.complete)return!0}});await e}return new Promise((async(s,l)=>{let h=[];const g=function(e){if(e.transfer?.id===c)if("chunkedMessage"===e.transfer?.type){for(const e of function*(e,t){let r=0;for(;r<e.length;){const i=Math.min(r+t,e.length);yield e.slice(r,i),r=i}}(f,u))i.postMessage({transfer:{type:"chunkedMessage",data:e,id:c}});i.postMessage({transfer:{type:"chunkedMessage",complete:!0,id:c}})}else"chunkedResponse"===e.transfer?.type?e.transfer.complete?h=JSON.parse(h.join("")):h.push(e.transfer.data):"response"===e.transfer?.type&&(h=e.transfer.data)};let d;i?i.onMessage.addListener(g):(d=function(e){e.name===c&&((i=e).onMessage.addListener(g),self.setTimeout((function(){i.postMessage({transfer:{type:"connection",complete:!0,id:c}})}),100))},browser.runtime.onConnect.addListener(d));const x=function(e){if(d&&browser.runtime.onConnect.removeListener(d),i&&(i.onMessage.removeListener(g),m))try{i.disconnect()}catch(e){}e&&l(e)};let v=null;try{const s={transferId:c,transferMessage:p,transferResponse:a,openConnection:!o},u=p?{transfer:s}:{...n,transfer:s};if("runtime"===e)v=await browser.runtime.sendMessage(u);else if("tab"===e)v=await browser.tabs.sendMessage(t,u,{frameId:r});else if("port"===e){const e=fi({port:i,checkMessage:function(e){if(e.transfer?.id===c&&"message"===e.transfer.type&&e.transfer.complete)return!0}});i.postMessage(u),await e}}catch(e){x(e)}x(),s(a?h:v)}))}const mi=["background-image","border-image-source","mask-image","cursor"],li=["::before","::after"],hi=["img","video","iframe","embed"],gi=/url\s*\(\s*(?:"(.*?)"|'(.*?)'|(.*?))\s*\)/gi;async function di(e,{credentials:t=!1}={}){let r;const i=new URL(e).origin===window.location.origin;if(i&&(r=await ni(e)),!r)if(["safari"].includes(kr))r=await ni(e),r||(r=await ai(e));else{const n=Nt(),a=i?"":window.location.origin,o=await browser.runtime.sendMessage({id:"addContentRequestListener",url:e,origin:a,token:n});try{r=await ni(e,{credentials:t,token:n})}finally{await browser.runtime.sendMessage({id:"removeContentRequestListener",ruleId:o})}r||(r=await ai(e))}return r}function xi(e,t=null){const r=e.nodeName.toLowerCase(),i=mi.slice();"li"===r&&i.push("list-style-image"),t&&i.push("content");const n=[],a=window.getComputedStyle(e,t);let o;return i.forEach((function(e){let t=a.getPropertyValue(e);if(t&&"none"!==t)for(;o=gi.exec(t);){const e=o[1]||o[2]||o[3];e&&n.push({data:e})}})),n}async function vi(e,t){const r=[],i=e.nodeName.toLowerCase();if("img"===i){const i="use-credentials"===e.crossOrigin;if(t.options.detectAltImageDimension){if(e.srcset){const t=ui(e.srcset);for(const e of t.reverse()){const t=Mr(e);t&&r.push({data:t,credentials:i})}}if("picture"===e.parentNode?.nodeName.toLowerCase()){const t=e.parentNode.querySelectorAll("source");for(const e of t){const t=ui(e.srcset);for(const e of t.reverse()){const t=Mr(e);t&&r.push({data:t,credentials:i})}}}e.currentSrc&&r.push({data:e.currentSrc,credentials:i}),e.src&&r.push({data:e.src,credentials:i})}else e.currentSrc&&r.push({data:e.currentSrc,credentials:i})}else if("image"===i){const t=e.getAttribute("href")||e.getAttribute("xlink:href");if(t){const e=Mr(t);e&&r.push({data:e})}}else if("embed"===i){const t=e.src;t&&await ei({url:t})&&r.push({data:t})}else if("object"===i){const t=e.data;t&&await ei({url:t})&&r.push({data:t})}else if("iframe"===i){const t=e.src;t&&!e.srcdoc&&await ei({url:t})&&r.push({data:t})}else if("canvas"===i){const t=await Or(e,{clear:!1});t&&t!==await async function(e,t){const{cnv:r,ctx:i}=Er(e,t);return Or(r,{ctx:i,type:"image/png"})}(e.width,e.height)&&r.push({data:t})}else if("video"===i){if(e.readyState>=2){const{cnv:t,ctx:i}=Er(e.videoWidth,e.videoHeight);if(zr(i,e)){const e=await Or(t,{ctx:i});e&&r.push({data:e})}}e.poster&&r.push({data:e.poster})}else"input"===i&&"image"===e.type&&e.src&&r.push({data:e.src});return r.push(...xi(e)),hi.includes(i)||li.forEach((function(t){r.push(...xi(e,t))})),r}function wi(e){try{return chrome.dom?.openOrClosedShadowRoot(e)||e.openOrClosedShadowRoot||e.shadowRoot}catch(e){}}async function yi({root:e=null,touchRect:t=null,session:r}={}){const i=[];for(const n of e.querySelectorAll("*")){let e=n.getBoundingClientRect();if(t.bottom<e.top+window.scrollY||t.top>e.bottom+window.scrollY||t.left>e.right+window.scrollX||t.right<e.left+window.scrollX)continue;i.push(await vi(n,r));const a=wi(n);a&&i.push(await yi({root:a,touchRect:t,session:r}))}return i.reverse().flat()}async function bi(e){if(!self.runStore?.baseModule)throw new Error("Base module missing");const t=[],r=document.documentElement.nodeName.toLowerCase();if(!["html","svg"].includes(r))return t;const i=touchTarget.node||document.elementFromPoint(touchTarget.ux-window.scrollX,touchTarget.uy-window.scrollY);if(i&&t.push(...await vi(i,e)),!t.length||!i||"img"!==i.nodeName.toLowerCase()||e.options.imgFullParse){const r={bottom:touchTarget.uy+24,top:touchTarget.uy-24,left:touchTarget.ux-24,right:touchTarget.ux+24};t.push(...await yi({root:document,touchRect:r,session:e}))}return async function(e,t){const r=(e=Pt(e,"data")).filter((e=>e.data&&e.data.startsWith("data:")));for(const t of r){const r=await Jr({dataUrl:t.data});if(r){const i=await Kr(r);i&&(e[e.indexOf(t)]=i)}}if(window.location.href.startsWith("file://")){const t=e.filter((e=>e.data&&e.data.startsWith("file://")));for(const r of t){const t=await Qr(r.data);if(t){const i=await Kr(t);i&&(e[e.indexOf(r)]=i)}}}const i=e.filter((e=>e.data&&e.data.startsWith("blob:")));for(const t of i){const r=await Yr(t.data);if(r){const i=await Kr(r);i&&(e[e.indexOf(t)]=i)}}const n=e.filter((e=>e.data&&function(e,{allowDataUrl:t=!1}={}){try{if(t&&e.startsWith("data:"))return!0;if(e.length<=2048&&/^https?:$/i.test(new URL(e).protocol))return!0}catch(e){}}(e.data)));if(n.length){const r="share"===t.sessionType||"view"===t.sessionType&&t.options.viewImageUseViewer||"search"===t.sessionType&&("selectImage"===t.searchMode||!await Gr(t.engines));for(const i of n){let n=i.data;const{name:a,type:o}=ii(n);if(r||"search"===t.sessionType&&t.engines.some((e=>!si(o,e)))){let r,s=await di(n,{credentials:i.credentials});if(!s&&window.isSecureContext&&n.match(/^http:/i)&&(n=n.replace(/^http:/i,"https:"),s=await di(n,{credentials:i.credentials})),s){const e=await Jr({blob:s,name:a});if(e){const t=await Kr(e);t&&(r={imageUrl:n,...t})}}r||"view"!==t.sessionType||(r={imageUrl:n,imageType:o}),r&&(e[e.indexOf(i)]=r)}else e[e.indexOf(i)]={imageUrl:n,imageType:o}}}return e.filter((e=>!e.data))}(t,e)}(function(e){const t=function(e,{content:t=null}={}){return e=`${e}Store`,self[e]||(self[e]=t||{}),self[e]}("run");if(!t[e])return t[e]=!0,!0})("parseModule")&&browser.runtime.onMessage.addListener((function(e,t){t.url!==document.URL&&"parsePage"===e.id&&async function(e){try{const t=await bi(e);if("share"===e.sessionType&&1===t.length)return void await oi(t[0],{convert:e.options.convertSharedImage});await pi({message:{id:"pageParseSubmit",images:t,session:e}})}catch(t){throw console.log(t.toString()),await browser.runtime.sendMessage({id:"pageParseError",session:e}),t}}(e.session)}))})()})();