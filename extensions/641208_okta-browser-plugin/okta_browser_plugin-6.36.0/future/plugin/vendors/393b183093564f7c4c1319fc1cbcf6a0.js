(() => {
var f=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var m=(r,e)=>()=>(r&&(e=r(r=0)),e);var N=(r,e)=>{for(var t in e)f(r,t,{get:e[t],enumerable:!0})},O=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of I(e))!x.call(r,s)&&s!==t&&f(r,s,{get:()=>e[s],enumerable:!(i=j(e,s))||i.enumerable});return r};var T=r=>O(f({},"__esModule",{value:!0}),r);var C,w,c,p=m(()=>{C=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(r=>[r.name,r]),w=new Map(C),c=w});var h={};N(h,{NonError:()=>u,deserializeError:()=>B,errorConstructors:()=>c,isErrorLike:()=>y,serializeError:()=>k});function k(r,e={}){let{maxDepth:t=Number.POSITIVE_INFINITY,useToJSON:i=!0}=e;return typeof r=="object"&&r!==null?b({from:r,seen:[],forceEnumerable:!0,maxDepth:t,depth:0,useToJSON:i,serialize:!0}):typeof r=="function"?`[Function: ${r.name||"anonymous"}]`:r}function B(r,e={}){let{maxDepth:t=Number.POSITIVE_INFINITY}=e;if(r instanceof Error)return r;if(J(r)){let i=_(r.name);return b({from:r,seen:[],to:new i,maxDepth:t,depth:0,serialize:!1})}return new u(r)}function y(r){return!!r&&typeof r=="object"&&"name"in r&&"message"in r&&"stack"in r}function J(r){return!!r&&typeof r=="object"&&"message"in r&&!Array.isArray(r)}var u,z,l,A,_,b,S=m(()=>{p();p();u=class r extends Error{name="NonError";constructor(e){super(r._prepareSuperMessage(e))}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}},z=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],l=new WeakSet,A=r=>{l.add(r);let e=r.toJSON();return l.delete(r),e},_=r=>c.get(r)??Error,b=({from:r,seen:e,to:t,forceEnumerable:i,maxDepth:s,depth:a,useToJSON:E,serialize:d})=>{if(!t)if(Array.isArray(r))t=[];else if(!d&&y(r)){let n=_(r.name);t=new n}else t={};if(e.push(r),a>=s)return t;if(E&&typeof r.toJSON=="function"&&!l.has(r))return A(r);let g=n=>b({from:n,seen:[...e],forceEnumerable:i,maxDepth:s,depth:a,useToJSON:E,serialize:d});for(let[n,o]of Object.entries(r)){if(o&&o instanceof Uint8Array&&o.constructor.name==="Buffer"){t[n]="[object Buffer]";continue}if(o!==null&&typeof o=="object"&&typeof o.pipe=="function"){t[n]="[object Stream]";continue}if(typeof o!="function"){if(!o||typeof o!="object"){try{t[n]=o}catch{}continue}if(!e.includes(r[n])){a++,t[n]=g(r[n]);continue}t[n]="[Circular]"}}for(let{property:n,enumerable:o}of z)typeof r[n]<"u"&&r[n]!==null&&Object.defineProperty(t,n,{value:y(r[n])?g(r[n]):r[n],enumerable:i?!0:o,configurable:!0,writable:!0});return t}});"serialize-error"in globalThis.__thrush_future_vendor_registry__||Object.defineProperty(globalThis.__thrush_future_vendor_registry__,"serialize-error",{get(){return S(),T(h)}});
})();
