"use strict";(globalThis.webpackChunkcsgotrader_app_extension=globalThis.webpackChunkcsgotrader_app_extension||[]).push([[423],{1650:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294);const o=({action:e,children:t,className:a,title:o,id:r})=>n.createElement("span",{role:"button",tabIndex:"0",onClick:e,onKeyDown:e,className:`${a} customButton`,title:o,id:r},t)},1258:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(7294),o=a(982),r=a(9417),l=a(1404),i=a(3006),m=a(7475),c=a(1425),s=a(3012);const d=({children:e,className:t,title:a})=>n.createElement("span",{className:`action ${t}`,title:a},e),u=({tradability:e})=>{const t=e,[a,o]=(0,n.useState)({text:"",class:"countdown"});return(0,n.useEffect)((()=>{const e=setInterval((()=>{n()}),1e3),n=()=>{const n=(new Date).getTime(),r=new Date(t)-n,l=Math.floor(r/864e5),i=Math.floor(r%864e5/36e5),m=Math.floor(r%36e5/6e4),c=Math.floor(r%6e4/1e3);r>0?o({...a,text:`${l}d ${i}h ${m}m ${c}s`}):(o({text:"Tradable",class:null}),clearInterval(e))};return n(),()=>{clearInterval(e)}}),[]),n.createElement("div",{className:a.class},a.text)},f=e=>{const{tradability:t}=e;return"Tradable"===t?n.createElement("span",null,t):"Not Tradable"===t?n.createElement("div",{className:"countdown"},"Untradable"):"Tradelocked"===t?n.createElement("div",{className:"countdown"},"Tradelocked"):n.createElement(u,{tradability:t})},p=({st:e,s:t})=>e?n.createElement("span",{className:"statTrak"},"StatTrak™"):t?n.createElement("span",{className:"souvenir"},"Souvenir"):null;var E=a(4227);const k=({bookmarkData:e,editBookmark:t,removeBookmark:a})=>{const{added:u,itemInfo:k,notifTime:h,notifType:v,notify:y,owner:b}=e,N=`https://steamcommunity.com/economy/image/${k.iconURL}/256x256`,$=k.exterior?k.exterior.localized_name:"",w=k.name.split("| ")[1]?k.name.split("| ")[1]:k.name,[g,x]=(0,n.useState)(e.comment),[_,I]=(0,n.useState)(y),T=(0,c.OE)(k.tradability,h),S=n.createRef(),R=n.createRef(),A=n.createRef(),D=n.createRef(),B=void 0!==k.quality&&null!==k.quality?`bookmark__${k.quality.name}`:"";return n.createElement("div",{className:`bookmark ${B}`},n.createElement("h5",{className:"itemName",title:k.name},w),n.createElement("div",{className:"exterior"},$),n.createElement("div",{className:"bookmark__image-container"},n.createElement("span",{className:"STS"},n.createElement(p,{st:k.isStatrack,s:k.isSouvenir})),n.createElement("img",{src:N,alt:k.name,title:k.name})),n.createElement("div",{className:"actions"},n.createElement(d,{title:"Add or edit a comment"},n.createElement(i.Z,{modalTitle:"Add your comment",opener:n.createElement(o.G,{icon:r.Mzg}),validator:a=>{const n={...e,comment:g};t(n),a()}},n.createElement("textarea",{className:"modalTextArea",placeholder:"Type your comment here",onChange:e=>{x(e.target.value)},value:g}))),n.createElement(d,{title:"Edit notifications options",className:"Tradable"===k.tradability||"Not Tradable"===k.tradability?"hidden":null},n.createElement(i.Z,{modalTitle:"Edit notifications options",opener:n.createElement(o.G,{icon:r.qmU}),validator:a=>{const n=(0,c.Sn)(k.tradability,A.current.value,R.current.value,D.current.value).toString(),o={...e,notify:_,notifType:S.current.value,notifTime:n};t(o),_?chrome.runtime.sendMessage({setAlarm:{name:`${k.appid}_${k.contextid}_${k.assetid}_${u}`,when:n}},(()=>{a()})):chrome.alarms.clear(`${k.appid}_${k.contextid}_${k.assetid}_${u}`,(()=>{a()}))}},n.createElement("div",{className:"center"},n.createElement(f,{tradability:k.tradability})),n.createElement("div",null,"Notify:"," ",n.createElement(m.Z,{id:"notify",checked:_,onChange:()=>{I(!_)}})),n.createElement("div",{className:_?null:"hidden"},n.createElement("div",{className:"mt-3"},"How do you want to be notified?",n.createElement("div",null,n.createElement("select",{ref:S,defaultValue:v,className:"select"},n.createElement("option",{value:"chrome"},"Browser desktop notification"),n.createElement("option",{value:"alert"},"Browser alert (to focus)")))),n.createElement("div",{className:"mt-3"},"When do you want to be notified?",n.createElement("div",null,n.createElement("input",{type:"number",ref:R,defaultValue:T.numberOfMinutesOrHours,className:"numberInput numberInput__narrow"}),n.createElement("select",{ref:A,defaultValue:T.minutesOrHours,className:"select"},n.createElement("option",{value:"minutes"},"minutes"),n.createElement("option",{value:"hours"},"hours")),n.createElement("select",{ref:D,defaultValue:T.beforeOrAfter,className:"select"},n.createElement("option",{value:"before"},"before"),n.createElement("option",{value:"after"},"after"))))))),n.createElement(d,{title:"Delete bookmark"},n.createElement(i.Z,{modalTitle:"Are you sure?",opener:n.createElement(o.G,{icon:r.$aW}),validator:e=>{a(k.appid,k.contextid,k.assetid,u),e()}}))),n.createElement("div",{className:"actions"},n.createElement(d,{title:"Inspect the item in-game"},n.createElement(l.Z,{to:k.inspectLink},n.createElement(o.G,{icon:r.Mdf}))),n.createElement(d,{title:"Open the market listings page of the item"},n.createElement(l.Z,{to:k.marketlink},n.createElement(o.G,{icon:r.Stf}))),n.createElement(d,{title:"View the item in the owner's inventory"},n.createElement(l.Z,{to:(0,E.r8)(b,k.appid,k.contextid,k.assetid)},n.createElement(o.G,{icon:r.nNP}))),n.createElement(d,{title:"Send a trade offer to the owner (if on friend list)"},n.createElement(l.Z,{to:`https://steamcommunity.com/tradeoffer/new/?partner=${(0,s.Rv)(b)}`},n.createElement(o.G,{icon:r.Ssp}))),n.createElement(d,{title:"Open the owner's profile"},n.createElement(l.Z,{to:`https://steamcommunity.com/profiles/${b}`},n.createElement(o.G,{icon:r.ILF})))),n.createElement("div",{className:"center"},n.createElement(f,{tradability:k.tradability})))},h=e=>0===e.bookmarks.length?"You don't have any bookmarks yet. You can bookmark items from user inventories!":e.bookmarks.map((t=>n.createElement(k,{key:`${t.itemInfo.appid}_${t.itemInfo.contextid}_${t.itemInfo.assetid}_${t.added}`,bookmarkData:t,removeBookmark:e.remove,editBookmark:e.edit}))),v=()=>{chrome.runtime.onMessage.addListener(((e,t,a)=>{void 0!==e.alert&&(alert(`${e.alert} is now tradable!`),a({alert:e.alert}))}));const[e,t]=(0,n.useState)([]),a=e=>{chrome.storage.local.set({bookmarks:e},(()=>{t(e)}))};return(0,n.useEffect)((()=>{document.title="Bookmarks",chrome.storage.local.get("bookmarks",(e=>{t(e.bookmarks)}))}),[]),n.createElement("div",null,n.createElement("h1",null,"Bookmark and Notify"),n.createElement("div",{className:"bookmarks"},n.createElement(h,{bookmarks:e,remove:(t,n,o,r)=>{const l=e.filter((e=>e.itemInfo.appid!==t||e.itemInfo.contextid!==n||e.itemInfo.assetid!==o||e.added!==r));a(l)},edit:t=>{const n=e.map((e=>e.itemInfo.assetid===t.itemInfo.assetid&&e.itemInfo.appid===t.itemInfo.appid&&e.itemInfo.contextid===t.itemInfo.contextid&&e.added===t.added?t:e));a(n)}})))}},4227:(e,t,a)=>{a.d(t,{Ej:()=>l,GN:()=>n,JG:()=>r,PL:()=>c,Sk:()=>i,_N:()=>s,r8:()=>o,rK:()=>m});const n=(e,t)=>`https://steamcommunity.com/market/listings/${e}/${t}`,o=(e,t,a,n)=>`https://steamcommunity.com/profiles/${e}/inventory/#${t}_${a}_${n}`,r=e=>`https://steamcommunity.com/tradeoffer/${e}`,l=async(e,t)=>{await chrome.offscreen.hasDocument()||await chrome.offscreen.createDocument({url:"/offScreen/offscreen.html",reasons:e,justification:t})},i=chrome.runtime.getURL("/index.html").includes("chrome-extension")?async(e,t,a)=>{const n="local"===t?chrome.runtime.getURL(e):e;await l([chrome.offscreen.Reason.AUDIO_PLAYBACK],"to play notification sound in the background"),await chrome.runtime.sendMessage({playAudio:{sourceURL:n,volume:a}})}:(e,t,a)=>{const n="local"===t?chrome.runtime.getURL(e):e,o=new Audio(n);o.volume=a,o.play()},m=(e,t)=>0===e||0===t?"":`(${(100*(t/e-1)).toFixed(2)}%)`,c=e=>new RegExp(["Doppler","doppler","多普勒","도플러","Доплер","Волны"].join("|"),"i").test(e),s=e=>{let t=null;return e&&e.forEach((e=>{(" Collection"===e.value.slice(e.value.length-11)||" Agents"===e.value.slice(e.value.length-7))&&(t=e.value)})),t}},886:(e,t,a)=>{a.d(t,{u:()=>n});const n={"done-for-you":{key:"done-for-you",name:"Done for you"},juntos:{key:"juntos",name:"Juntos"},"piece-of-cake":{key:"piece-of-cake",name:"Piece of cake"},pristine:{key:"pristine",name:"Pristine"},swiftly:{key:"swiftly",name:"Swifty"},when:{key:"when",name:"When"},custom:{key:"custom",name:"Custom"}}},3012:(e,t,a)=>{a.d(t,{Kv:()=>n,Rv:()=>o});const n=e=>`7656${Number(e)+Number(1197960265728)}`,o=e=>Number(e.split("7656")[1])-Number(1197960265728)}}]);
//# sourceMappingURL=423.bundle.js.map