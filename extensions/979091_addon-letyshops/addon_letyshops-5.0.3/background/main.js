"use strict";(self.webpackChunkbackground=self.webpackChunkbackground||[]).push([[792],{0:(ui,Kn,Ot)=>{var At={};function Fn(t,n,e,i,r,o,s){try{var a=t[o](s),c=a.value}catch(l){return void e(l)}a.done?n(c):Promise.resolve(c).then(i,r)}function C(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var o=t.apply(n,e);function s(c){Fn(o,i,r,s,a,"next",c)}function a(c){Fn(o,i,r,s,a,"throw",c)}s(void 0)})}}
/**
         * @license Angular v17.3.7
         * (c) 2010-2024 Google LLC. https://angular.io/
         * License: MIT
         */Ot.r(At),Ot.d(At,{VERSION:()=>B1,after:()=>K8,all:()=>FT,allKeys:()=>Ec,any:()=>BT,assign:()=>xd,before:()=>DT,bind:()=>TT,bindAll:()=>j8,chain:()=>IT,chunk:()=>S7,clone:()=>I8,collect:()=>co,compact:()=>GT,compose:()=>q8,constant:()=>tT,contains:()=>qi,countBy:()=>l7,create:()=>E8,debounce:()=>W8,default:()=>E7,defaults:()=>mT,defer:()=>G8,delay:()=>xT,detect:()=>n_,difference:()=>zT,drop:()=>Md,each:()=>yn,escape:()=>M8,every:()=>FT,extend:()=>gT,extendOwn:()=>xd,filter:()=>lo,find:()=>n_,findIndex:()=>t_,findKey:()=>PT,findLastIndex:()=>OT,findWhere:()=>Z8,first:()=>o_,flatten:()=>g7,foldl:()=>i_,foldr:()=>LT,forEach:()=>yn,functions:()=>zm,get:()=>yT,groupBy:()=>a7,has:()=>T8,head:()=>o_,identity:()=>qm,include:()=>qi,includes:()=>qi,indexBy:()=>c7,indexOf:()=>NT,initial:()=>$T,inject:()=>i_,intersection:()=>v7,invert:()=>pT,invoke:()=>e7,isArguments:()=>Um,isArray:()=>Er,isArrayBuffer:()=>X1,isBoolean:()=>Y1,isDataView:()=>wd,isDate:()=>r8,isElement:()=>n8,isEmpty:()=>_n,isEqual:()=>uT,isError:()=>s8,isFinite:()=>u8,isFunction:()=>sn,isMap:()=>_8,isMatch:()=>sT,isNaN:()=>eT,isNull:()=>t8,isNumber:()=>q1,isObject:()=>oo,isRegExp:()=>o8,isSet:()=>y8,isString:()=>Id,isSymbol:()=>K1,isTypedArray:()=>rT,isUndefined:()=>Fm,isWeakMap:()=>v8,isWeakSet:()=>b8,iteratee:()=>Xm,keys:()=>$e,last:()=>p7,lastIndexOf:()=>Q8,map:()=>co,mapObject:()=>x8,matcher:()=>wc,matches:()=>wc,max:()=>HT,memoize:()=>$8,methods:()=>zm,min:()=>n7,mixin:()=>WT,negate:()=>e_,noop:()=>CT,now:()=>xc,object:()=>b7,omit:()=>h7,once:()=>X8,pairs:()=>C8,partial:()=>Dd,partition:()=>u7,pick:()=>jT,pluck:()=>r_,property:()=>Km,propertyOf:()=>D8,random:()=>Qm,range:()=>C7,reduce:()=>i_,reduceRight:()=>LT,reject:()=>J8,rest:()=>Md,restArguments:()=>gn,result:()=>H8,sample:()=>VT,select:()=>lo,shuffle:()=>o7,size:()=>d7,some:()=>BT,sortBy:()=>s7,sortedIndex:()=>AT,tail:()=>Md,take:()=>o_,tap:()=>w8,template:()=>B8,templateSettings:()=>R8,throttle:()=>z8,times:()=>P8,toArray:()=>UT,toPath:()=>vT,transpose:()=>s_,unescape:()=>A8,union:()=>_7,uniq:()=>Od,unique:()=>Od,uniqueId:()=>V8,unzip:()=>s_,values:()=>so,where:()=>t7,without:()=>m7,wrap:()=>Y8,zip:()=>y7});let ie=null,Ve=1;const Rt=Symbol("SIGNAL");function X(t){const n=ie;return ie=t,n}function or(t){if((!Ar(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Ve)){if(!t.producerMustRecompute(t)&&!fi(t))return t.dirty=!1,void(t.lastCleanEpoch=Ve);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ve}}function fi(t){cr(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(or(e),i!==e.version))return!0}return!1}function Po(t,n){if(function il(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),cr(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)Po(t.producerNode[i],t.producerIndexOfThis[i]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[n],r=t.liveConsumerNode[n];cr(r),r.producerIndexOfThis[i]=n}}function Ar(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function cr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let bf=null;function he(t){return"function"==typeof t}function Sn(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Qn=Sn(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function hi(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class Bn{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(he(i))try{i()}catch(o){n=o instanceof Qn?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{hv(o)}catch(s){n=n??[],s instanceof Qn?n=[...n,...s.errors]:n.push(s)}}if(n)throw new Qn(n)}}add(n){var e;if(n&&n!==this)if(this.closed)hv(n);else{if(n instanceof Bn){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&hi(e,n)}remove(n){const{_finalizers:e}=this;e&&hi(e,n),n instanceof Bn&&n._removeParent(this)}}Bn.EMPTY=(()=>{const t=new Bn;return t.closed=!0,t})();const dv=Bn.EMPTY;function fv(t){return t instanceof Bn||t&&"closed"in t&&he(t.remove)&&he(t.add)&&he(t.unsubscribe)}function hv(t){he(t)?t():t.unsubscribe()}const Rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},rl={setTimeout(t,n,...e){const{delegate:i}=rl;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=rl;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function pv(t){rl.setTimeout(()=>{const{onUnhandledError:n}=Rr;if(!n)throw t;n(t)})}function Cf(){}const QP=Sf("C",void 0,void 0);function Sf(t,n,e){return{kind:t,value:n,error:e}}let Nr=null;function ol(t){if(Rr.useDeprecatedSynchronousErrorHandling){const n=!Nr;if(n&&(Nr={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=Nr;if(Nr=null,e)throw i}}else t()}class Ef extends Bn{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,fv(n)&&n.add(this)):this.destination=rM}static create(n,e,i){return new Zs(n,e,i)}next(n){this.isStopped?wf(function JP(t){return Sf("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?wf(function ZP(t){return Sf("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?wf(QP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tM=Function.prototype.bind;function If(t,n){return tM.call(t,n)}class nM{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){sl(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){sl(i)}else sl(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){sl(e)}}}class Zs extends Ef{constructor(n,e,i){let r;if(super(),he(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Rr.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&If(n.next,o),error:n.error&&If(n.error,o),complete:n.complete&&If(n.complete,o)}):r=n}this.destination=new nM(r)}}function sl(t){Rr.useDeprecatedSynchronousErrorHandling?function eM(t){Rr.useDeprecatedSynchronousErrorHandling&&Nr&&(Nr.errorThrown=!0,Nr.error=t)}(t):pv(t)}function wf(t,n){const{onStoppedNotification:e}=Rr;e&&rl.setTimeout(()=>e(t,n))}const rM={closed:!0,next:Cf,error:function iM(t){throw t},complete:Cf},Tf="function"==typeof Symbol&&Symbol.observable||"@@observable";function al(t){return t}let Tt=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const o=function sM(t){return t&&t instanceof Ef||function oM(t){return t&&he(t.next)&&he(t.error)&&he(t.complete)}(t)&&fv(t)}(e)?e:new Zs(e,i,r);return ol(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=mv(i))((r,o)=>{const s=new Zs({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Tf](){return this}pipe(...e){return function gv(t){return 0===t.length?al:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=mv(e))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=n=>new t(n),t})();function mv(t){var n;return null!==(n=t??Rr.Promise)&&void 0!==n?n:Promise}const aM=Sn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let lr=(()=>{class t extends Tt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new _v(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new aM}next(e){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:o}=this;return i||r?dv:(this.currentObservers=null,o.push(e),new Bn(()=>{this.currentObservers=null,hi(o,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){const e=new Tt;return e.source=this,e}}return t.create=(n,e)=>new _v(n,e),t})();class _v extends lr{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:dv}}class cM extends lr{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function Ft(t){return n=>{if(function lM(t){return he(t?.lift)}(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Bt(t,n,e,i,r){return new uM(t,n,e,i,r)}class uM extends Ef{constructor(n,e,i,r,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){n.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){n.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function tt(t,n){return Ft((e,i)=>{let r=0;e.subscribe(Bt(i,o=>{i.next(t.call(n,o,r++))}))})}
/**
         * @license Angular v17.3.7
         * (c) 2010-2024 Google LLC. https://angular.io/
         * License: MIT
         */class H extends Error{constructor(n,e){super(function Mo(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function ki(t){return{toString:t}.toString()}const Ce=globalThis;function we(t){for(let n in t)if(t[n]===we)return n;throw Error("Could not find renamed property on target object.")}function _t(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(_t).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Df(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const fM=we({__forward_ref__:we});function Pf(t){return t.__forward_ref__=Pf,t.toString=function(){return _t(this())},t}function Y(t){return ll(t)?t():t}function ll(t){return"function"==typeof t&&t.hasOwnProperty(fM)&&t.__forward_ref__===Pf}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ul(t){return Sv(t,fl)||Sv(t,Ev)}function Sv(t,n){return t.hasOwnProperty(n)?t[n]:null}function dl(t){return t&&(t.hasOwnProperty(Mf)||t.hasOwnProperty(_M))?t[Mf]:null}const fl=we({\u0275prov:we}),Mf=we({\u0275inj:we}),Ev=we({ngInjectableDef:we}),_M=we({ngInjectorDef:we});class j{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=U({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function kf(t){return t&&!!t.\u0275providers}const Js=we({\u0275cmp:we}),Lf=we({\u0275dir:we}),Ff=we({\u0275pipe:we}),wv=we({\u0275mod:we}),Li=we({\u0275fac:we}),ea=we({__NG_ELEMENT_ID__:we}),Tv=we({__NG_ENV_ID__:we});function me(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function Z(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function Bf(t,n){throw new H(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{});let Hf;function xv(){return Hf}function ln(t){const n=Hf;return Hf=t,n}function Dv(t,n,e){const i=ul(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&fe.Optional?null:void 0!==n?n:void Bf()}const ta={},Uf="__NG_DI_FLAG__",hl="ngTempTokenPath",EM=/\n/gm,Pv="__source";let ko;function dr(t){const n=ko;return ko=t,n}function TM(t,n=fe.Default){if(void 0===ko)throw new H(-203,!1);return null===ko?Dv(t,void 0,n):ko.get(t,n&fe.Optional?null:void 0,n)}function w(t,n=fe.Default){return(xv()||TM)(Y(t),n)}function oe(t,n=fe.Default){return w(t,pl(n))}function pl(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vf(t){const n=[];for(let e=0;e<t.length;e++){const i=Y(t[e]);if(Array.isArray(i)){if(0===i.length)throw new H(900,!1);let r,o=fe.Default;for(let s=0;s<i.length;s++){const a=i[s],c=xM(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}n.push(w(r,o))}else n.push(w(i))}return n}function xM(t){return t[Uf]}function kr(t,n){return t.hasOwnProperty(Li)?t[Li]:null}function Lo(t,n){t.forEach(e=>Array.isArray(e)?Lo(e,n):n(e))}function gl(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}const pi={},pe=[],Bo=new j(""),Nv=new j("",-1),Wf=new j("");class _l{get(n,e=ta){if(e===ta){const i=new Error(`NullInjectorError: No provider for ${_t(n)}!`);throw i.name="NullInjectorError",i}return e}}var Zn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Zn||{}),fr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(fr||{});function Yf(t,n,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const o=e[i++],s=e[i++],a=e[i++];t.setAttribute(n,s,a,o)}else{const o=r,s=e[++i];Lv(o)?t.setProperty(n,o,s):t.setAttribute(n,o,s),i++}}return i}function Lv(t){return 64===t.charCodeAt(0)}function ia(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||Fv(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function Fv(t,n,e,i,r){let o=0,s=t.length;if(-1===n)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,n),o=s+1),t.splice(o++,0,e),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}const Bv="ng-template";function qf(t){return 4===t.type&&t.value!==Bv}function Jn(t){return!(1&t)}function Uv(t,n){return t?":not("+n.trim()+")":n}function $M(t){let n=t[0],e=1,i=2,r="",o=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&i){const a=t[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Jn(s)&&(n+=Uv(o,r),r=""),i=s,o=o||!Jn(i);e++}return""!==r&&(n+=Uv(o,r)),n}function xt(t){return ki(()=>({type:t.type,bootstrap:t.bootstrap||pe,declarations:t.declarations||pe,imports:t.imports||pe,exports:t.exports||pe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Zt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function se(t){return t[Js]||null}function Lr(t){const n=se(t)||function yt(t){return t[Lf]||null}(t)||function Nt(t){return t[Ff]||null}(t);return null!==n&&n.standalone}function QM(...t){return{\u0275providers:Kf(0,t),\u0275fromNgModule:!0}}function Kf(t,...n){const e=[],i=new Set;let r;const o=s=>{e.push(s)};return Lo(n,s=>{const a=s;Cl(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Gv(r,o),e}function Gv(t,n){for(let e=0;e<t.length;e++){const{ngModule:i,providers:r}=t[e];Xf(r,o=>{n(o,i)})}}function Cl(t,n,e,i){if(!(t=Y(t)))return!1;let r=null,o=dl(t);const s=!o&&se(t);if(o||s){if(s&&!s.standalone)return!1;r=t}else{const c=t.ngModule;if(o=dl(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Cl(l,n,e,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{Lo(o.imports,u=>{Cl(u,n,e,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&Gv(l,n)}if(!a){const l=kr(r)||(()=>new r);n({provide:r,useFactory:l,deps:pe},r),n({provide:Wf,useValue:r,multi:!0},r),n({provide:Bo,useValue:()=>w(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=t;Xf(c,u=>{n(u,l)})}}}return r!==t&&void 0!==t.providers}function Xf(t,n){for(let e of t)kf(e)&&(e=e.\u0275providers),Array.isArray(e)?Xf(e,n):n(e)}const ZM=we({provide:String,useValue:we});function Qf(t){return null!==t&&"object"==typeof t&&ZM in t}function Fr(t){return"function"==typeof t}const Zf=new j(""),Sl={},eO={};let Jf;function El(){return void 0===Jf&&(Jf=new _l),Jf}class gi{}class Ho extends gi{get destroyed(){return this._destroyed}constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,th(n,s=>this.processProvider(s)),this.records.set(Nv,Uo(void 0,this)),r.has("environment")&&this.records.set(gi,Uo(void 0,this));const o=this.records.get(Zf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Wf,pe,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=X(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=dr(this),i=ln(void 0);try{return n()}finally{dr(e),ln(i)}}get(n,e=ta,i=fe.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Tv))return n[Tv](this);i=pl(i);const o=dr(this),s=ln(void 0);try{if(!(i&fe.SkipSelf)){let c=this.records.get(n);if(void 0===c){const l=function oO(t){return"function"==typeof t||"object"==typeof t&&t instanceof j}(n)&&ul(n);c=l&&this.injectableDefInScope(l)?Uo(eh(n),Sl):null,this.records.set(n,c)}if(null!=c)return this.hydrate(n,c)}return(i&fe.Self?El():this.parent).get(n,e=i&fe.Optional&&e===ta?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[hl]=a[hl]||[]).unshift(_t(n)),o)throw a;return function DM(t,n,e,i){const r=t[hl];throw n[Pv]&&r.unshift(n[Pv]),t.message=function PM(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=_t(n);if(Array.isArray(n))r=n.map(_t).join(" -> ");else if("object"==typeof n){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):_t(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(EM,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[hl]=null,t}(a,n,"R3InjectorError",this.source)}throw a}finally{ln(s),dr(o)}}resolveInjectorInitializers(){const n=X(null),e=dr(this),i=ln(void 0);try{const o=this.get(Bo,pe,fe.Self);for(const s of o)s()}finally{dr(e),ln(i),X(n)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(_t(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(n){let e=Fr(n=Y(n))?n:Y(n&&n.provide);const i=function nO(t){return Qf(t)?Uo(void 0,t.useValue):Uo(function Yv(t,n,e){let i;if(Fr(t)){const r=Y(t);return kr(r)||eh(r)}if(Qf(t))i=()=>Y(t.useValue);else if(function Wv(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Vf(t.deps||[]));else if(function zv(t){return!(!t||!t.useExisting)}(t))i=()=>w(Y(t.useExisting));else{const r=Y(t&&(t.useClass||t.provide));if(!function iO(t){return!!t.deps}(t))return kr(r)||eh(r);i=()=>new r(...Vf(t.deps))}return i}(t),Sl)}(n);if(!Fr(n)&&!0===n.multi){let r=this.records.get(e);r||(r=Uo(void 0,Sl,!0),r.factory=()=>Vf(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e){const i=X(null);try{return e.value===Sl&&(e.value=eO,e.value=e.factory()),"object"==typeof e.value&&e.value&&function rO(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{X(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Y(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function eh(t){const n=ul(t),e=null!==n?n.factory:kr(t);if(null!==e)return e;if(t instanceof j)throw new H(204,!1);if(t instanceof Function)return function tO(t){if(t.length>0)throw new H(204,!1);const e=function mM(t){return t&&(t[fl]||t[Ev])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new H(204,!1)}function Uo(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function th(t,n){for(const e of t)Array.isArray(e)?th(e,n):e&&kf(e)?th(e.\u0275providers,n):n(e)}const je=0,L=1,$=2,nt=3,ei=4,Ut=5,Tn=6,jo=7,Re=8,Dt=9,ti=10,q=11,oa=12,$o=14,We=15,sa=16,Go=17,Fi=18,aa=19,Zv=20,hr=21,Tl=22,Br=23,J=25,ih=1,mi=7,zo=9,it=10;var rh=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(rh||{});function Vt(t){return Array.isArray(t)&&"object"==typeof t[ih]}function jt(t){return Array.isArray(t)&&!0===t[ih]}function ni(t){return!!t.template}function sh(t){return!!(512&t[$])}class vO{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function ny(t,n,e,i){null!==n?n.applyValueToInputSignal(n,i):t[e]=i}function iy(t){return t.type.prototype.ngOnChanges&&(t.setInput=bO),yO}function yO(){const t=oy(this),n=t?.current;if(n){const e=t.previous;if(e===pi)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function bO(t,n,e,i,r){const o=this.declaredInputs[i],s=oy(t)||function CO(t,n){return t[ry]=n}(t,{previous:pi,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new vO(l&&l.currentValue,e,c===pi),ny(t,n,r,e)}const ry="__ngSimpleChanges__";function oy(t){return t[ry]||null}const _i=function(t,n,e){};function De(t){for(;Array.isArray(t);)t=t[je];return t}function Jt(t,n){return De(n[t.index])}function xn(t,n){const e=n[t];return Vt(e)?e:e[je]}function dh(t){return!(128&~t[$])}function ly(t){t[Go]=0}function xO(t){1024&t[$]||(t[$]|=1024,dh(t)&&da(t))}function fh(t){return!!(9216&t[$]||t[Br]?.dirty)}function hh(t){t[ti].changeDetectionScheduler?.notify(1),fh(t)?da(t):64&t[$]&&t[ti].changeDetectionScheduler?.notify()}function da(t){t[ti].changeDetectionScheduler?.notify();let n=Ur(t);for(;null!==n&&!(8192&n[$])&&(n[$]|=8192,dh(n));)n=Ur(n)}function Ml(t,n){if(!(256&~t[$]))throw new H(911,!1);null===t[hr]&&(t[hr]=[]),t[hr].push(n)}function Ur(t){const n=t[nt];return jt(n)?n[nt]:n}const K={lFrame:yy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function P(){return K.lFrame.lView}function Te(){let t=hy();for(;null!==t&&64===t.type;)t=t.parent;return t}function hy(){return K.lFrame.currentTNode}function UO(t,n){const e=K.lFrame;e.bindingIndex=e.bindingRootIndex=t,_h(n)}function _h(t){K.lFrame.currentDirectiveIndex=t}function Ol(t){K.lFrame.currentQueryIndex=t}function jO(t){const n=t[L];return 2===n.type?n.declTNode:1===n.type?t[Ut]:null}function _y(t,n,e){if(e&fe.SkipSelf){let r=n,o=t;for(;!(r=r.parent,null!==r||e&fe.Host||(r=jO(o),null===r||(o=o[$o],10&r.type))););if(null===r)return!1;n=r,t=o}const i=K.lFrame=vy();return i.currentTNode=n,i.lView=t,!0}function bh(t){const n=vy(),e=t[L];K.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function vy(){const t=K.lFrame,n=null===t?null:t.child;return null===n?yy(t):n}function yy(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function by(){const t=K.lFrame;return K.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Cy=by;function Ch(){const t=by();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Vr(t){K.lFrame.selectedIndex=t}function Rl(t,n,e){Iy(t,n,3,e)}function Nl(t,n,e,i){(3&t[$])===e&&Iy(t,n,e,i)}function Sh(t,n){let e=t[$];(3&e)===n&&(e&=16383,e+=1,t[$]=e)}function Iy(t,n,e,i){const o=i??-1,s=n.length-1;let a=0;for(let c=void 0!==i?65535&t[Go]:0;c<s;c++)if("number"==typeof n[c+1]){if(a=n[c],null!=i&&a>=i)break}else n[c]<0&&(t[Go]+=65536),(a<o||-1==o)&&(KO(t,e,n,c),t[Go]=(4294901760&t[Go])+c+2),c++}function wy(t,n){_i(4,t,n);const e=X(null);try{n.call(t)}finally{X(e),_i(5,t,n)}}function KO(t,n,e,i){const r=e[i]<0,o=e[i+1],a=t[r?-e[i]:e[i]];r?t[$]>>14<t[Go]>>16&&(3&t[$])===n&&(t[$]+=16384,wy(a,o)):wy(a,o)}const qo=-1;class pa{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function ga(t){return 32767&t}function ma(t,n){let e=function eA(t){return t>>16}(t),i=n;for(;e>0;)i=i[$o],e--;return i}let wh=!0;function kl(t){const n=wh;return wh=t,n}const Ty=255,xy=5;let tA=0;const Ci={};function Ll(t,n){const e=Dy(t,n);if(-1!==e)return e;const i=n[L];i.firstCreatePass&&(t.injectorIndex=n.length,Th(i.data,t),Th(n,null),Th(i.blueprint,null));const r=Fl(t,n),o=t.injectorIndex;if(function Ih(t){return t!==qo}(r)){const s=ga(r),a=ma(r,n),c=a[L].data;for(let l=0;l<8;l++)n[o+l]=a[s+l]|c[s+l]}return n[o+8]=r,o}function Th(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Dy(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Fl(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){if(i=ky(r),null===i)return qo;if(e++,r=r[$o],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return qo}function xh(t,n,e){!function nA(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(ea)&&(i=e[ea]),null==i&&(i=e[ea]=tA++);const r=i&Ty;n.data[t+(r>>xy)]|=1<<r}(t,n,e)}function Py(t,n,e){if(e&fe.Optional||void 0!==t)return t;Bf()}function My(t,n,e,i){if(e&fe.Optional&&void 0===i&&(i=null),!(e&(fe.Self|fe.Host))){const r=t[Dt],o=ln(void 0);try{return r?r.get(n,i,e&fe.Optional):Dv(n,i,e&fe.Optional)}finally{ln(o)}}return Py(i,0,e)}function Oy(t,n,e,i=fe.Default,r){if(null!==t){if(2048&n[$]&&!(i&fe.Self)){const s=function aA(t,n,e,i,r){let o=t,s=n;for(;null!==o&&null!==s&&2048&s[$]&&!(512&s[$]);){const a=Ay(o,s,e,i|fe.Self,Ci);if(a!==Ci)return a;let c=o.parent;if(!c){const l=s[Zv];if(l){const u=l.get(e,Ci,i);if(u!==Ci)return u}c=ky(s),s=s[$o]}o=c}return r}(t,n,e,i,Ci);if(s!==Ci)return s}const o=Ay(t,n,e,i,Ci);if(o!==Ci)return o}return My(n,e,i,r)}function Ay(t,n,e,i,r){const o=function oA(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(ea)?t[ea]:void 0;return"number"==typeof n?n>=0?n&Ty:sA:n}(e);if("function"==typeof o){if(!_y(n,t,i))return i&fe.Host?Py(r,0,i):My(n,e,i,r);try{let s;if(s=o(i),null!=s||i&fe.Optional)return s;Bf()}finally{Cy()}}else if("number"==typeof o){let s=null,a=Dy(t,n),c=qo,l=i&fe.Host?n[We][Ut]:null;for((-1===a||i&fe.SkipSelf)&&(c=-1===a?Fl(t,n):n[a+8],c!==qo&&Ny(i,!1)?(s=n[L],a=ga(c),n=ma(c,n)):a=-1);-1!==a;){const u=n[L];if(Ry(o,a,u.data)){const d=rA(a,n,e,s,i,l);if(d!==Ci)return d}c=n[a+8],c!==qo&&Ny(i,n[L].data[a+8]===l)&&Ry(o,a,n)?(s=u,a=ga(c),n=ma(c,n)):a=-1}}return r}function rA(t,n,e,i,r,o){const s=n[L],a=s.data[t+8],u=function Bl(t,n,e,i,r){const o=t.providerIndexes,s=n.data,a=1048575&o,c=t.directiveStart,u=o>>20,f=r?a+u:t.directiveEnd;for(let h=i?a:a+u;h<f;h++){const p=s[h];if(h<c&&e===p||h>=c&&p.type===e)return h}if(r){const h=s[c];if(h&&ni(h)&&h.type===e)return c}return null}(a,s,e,null==i?function Hr(t){return t.componentOffset>-1}(a)&&wh:i!=s&&!!(3&a.type),r&fe.Host&&o===a);return null!==u?jr(n,s,u,a):Ci}function jr(t,n,e,i){let r=t[e];const o=n.data;if(function XO(t){return t instanceof pa}(r)){const s=r;s.resolving&&function bM(t,n){throw n&&n.join(" > "),new H(-200,t)}(me(o[e]));const a=kl(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?ln(s.injectImpl):null;_y(t,i,fe.Default);try{r=t[e]=s.factory(void 0,o,t,i),n.firstCreatePass&&e>=i.directiveStart&&function qO(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){const s=iy(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}r&&(e.preOrderHooks??=[]).push(0-t,r),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}(e,o[e],n)}finally{null!==l&&ln(l),kl(a),s.resolving=!1,Cy()}}return r}function Ry(t,n,e){return!!(e[n+(t>>xy)]&1<<t)}function Ny(t,n){return!(t&fe.Self||t&fe.Host&&n)}class Ct{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return Oy(this._tNode,this._lView,n,pl(i),e)}}function sA(){return new Ct(Te(),P())}function _a(t){return ki(()=>{const n=t.prototype.constructor,e=n[Li]||Dh(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[Li]||Dh(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Dh(t){return ll(t)?()=>{const n=Dh(Y(t));return n&&n()}:kr(t)}function ky(t){const n=t[L],e=n.type;return 2===e?n.declTNode:1===e?t[Ut]:null}function Uy(t,n=null,e=null,i){const r=Vy(t,n,e,i);return r.resolveInjectorInitializers(),r}function Vy(t,n=null,e=null,i,r=new Set){const o=[e||pe,QM(t)];return i=i||("object"==typeof t?void 0:_t(t)),new Ho(o,n||El(),i||null,r)}let Un=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=ta;static#t=this.NULL=new _l;static create(e,i){if(Array.isArray(e))return Uy({name:""},i,e,"");{const r=e.name??"";return Uy({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=U({token:t,providedIn:"any",factory:()=>w(Nv)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();
/*!
         * @license
         * Copyright Google LLC All Rights Reserved.
         *
         * Use of this source code is governed by an MIT-style license that can be
         * found in the LICENSE file at https://angular.io/license
         */function Mh(t){return t.ngOriginalError}class Si{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&Mh(n);for(;e&&Mh(e);)e=Mh(e);return e||null}}const $y=new j("",{providedIn:"root",factory:()=>oe(Si).handleError.bind(void 0)});let Qo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=mA;static#t=this.__NG_ENV_ID__=e=>e}return t})();class gA extends Qo{constructor(n){super(),this._lView=n}onDestroy(n){return Ml(this._lView,n),()=>function ph(t,n){if(null===t[hr])return;const e=t[hr].indexOf(n);-1!==e&&t[hr].splice(e,1)}(this._lView,n)}}function mA(){return new gA(P())}function _A(){return Zo(Te(),P())}function Zo(t,n){return new Jo(Jt(t,n))}let Jo=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=_A}return t})();function Oh(t){return n=>{setTimeout(t,void 0,n)}}const tn=class vA extends lr{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,function Kv(){return void 0!==xv()||null!=function wM(){return ko}()}()&&(this.destroyRef=oe(Qo,{optional:!0})??void 0)}emit(n){const e=X(null);try{super.next(n)}finally{X(e)}}subscribe(n,e,i){let r=n,o=e||(()=>null),s=i;if(n&&"object"==typeof n){const c=n;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Oh(o),r&&(r=Oh(r)),s&&(s=Oh(s)));const a=super.subscribe({next:r,error:o,complete:s});return n instanceof Bn&&n.add(a),a}};Symbol;const Rh=new Map;let CA=0;const kh="__ngContext__";function Gt(t,n){Vt(n)?(t[kh]=n[aa],function EA(t){Rh.set(t[aa],t)}(n)):t[kh]=n}function t0(t){return r0(t[oa])}function n0(t){return r0(t[ei])}function r0(t){for(;null!==t&&!jt(t);)t=t[ei];return t}let Lh;const Gl=new j("",{providedIn:"root",factory:()=>VA}),VA="ng",f0=new j(""),es=new j("",{providedIn:"platform",factory:()=>"unknown"}),h0=new j("",{providedIn:"root",factory:()=>function pr(){if(void 0!==Lh)return Lh;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let p0=()=>null;function Gh(t,n,e=!1){return p0(t,n,e)}const y0=new j("",{providedIn:"root",factory:()=>!1});var mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(mr||{});let ip;function rp(t,n){return ip(t,n)}function ss(t,n,e,i,r){if(null!=i){let o,s=!1;jt(i)?o=i:Vt(i)&&(s=!0,i=i[je]);const a=De(i);0===t&&null!==e?null==r?function W0(t,n,e){t.appendChild(n,e)}(n,e,a):$r(n,e,a,r||null,!0):1===t&&null!==e?$r(n,e,a,r||null,!0):2===t?function Pa(t,n,e){const i=function ru(t,n){return t.parentNode(n)}(t,n);i&&function qR(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}(n,a,s):3===t&&n.destroyNode(a),null!=o&&function QR(t,n,e,i,r){const o=e[mi];o!==De(e)&&ss(n,t,i,o,r);for(let a=it;a<e.length;a++){const c=e[a];su(c[L],c,t,n,i,o)}}(n,t,o,e,r)}}function $0(t,n){n[ti].changeDetectionScheduler?.notify(1),su(t,n,n[q],2,null,null)}function G0(t,n){const e=t[zo],i=e.indexOf(n);e.splice(i,1)}function ap(t,n){if(256&n[$])return;const e=X(null);try{n[$]&=-129,n[$]|=256,n[Br]&&function ar(t){if(cr(t),Ar(t))for(let n=0;n<t.producerNode.length;n++)Po(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(n[Br]),function YR(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof pa)){const o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];_i(4,a,c);try{c.call(a)}finally{_i(5,a,c)}}else{_i(4,r,o);try{o.call(r)}finally{_i(5,r,o)}}}}}(t,n),function WR(t,n){const e=t.cleanup,i=n[jo];if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else e[o].call(i[e[o+1]]);null!==i&&(n[jo]=null);const r=n[hr];if(null!==r){n[hr]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(t,n),1===n[L].type&&n[q].destroy();const i=n[sa];if(null!==i&&jt(n[nt])){i!==n[nt]&&G0(i,n);const r=n[Fi];null!==r&&r.detachView(t)}!function IA(t){Rh.delete(t[aa])}(n)}finally{X(e)}}function $r(t,n,e,i,r){t.insertBefore(n,e,i,r)}function Z0(t,n){return null!==n?t[We][Ut].projection[n.projection]:null}function dp(t,n,e,i,r,o,s){for(;null!=e;){const a=i[e.index],c=e.type;if(s&&0===n&&(a&&Gt(De(a),i),e.flags|=2),32&~e.flags)if(8&c)dp(t,n,e.child,i,r,o,!1),ss(n,t,r,a,o);else if(32&c){const l=rp(e,i);let u;for(;u=l();)ss(n,t,r,u,o);ss(n,t,r,a,o)}else 16&c?eb(t,n,i,e,r,o):ss(n,t,r,a,o);e=s?e.projectionNext:e.next}}function su(t,n,e,i,r,o){dp(e,i,t.firstChild,n,r,o,!1)}function eb(t,n,e,i,r,o){const s=e[We],c=s[Ut].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)ss(n,t,r,c[l],o);else{let l=c;const u=s[nt];(function Vl(t){return!(128&~t.flags)})(i)&&(l.flags|=128),dp(t,n,l,u,r,o,!0)}}function tb(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}const ne={};function ae(t,n=fe.Default){const e=P();return null===e?w(t,n):Oy(Te(),e,Y(t),n)}function rb(t,n,e,i,r,o){const s=X(null);try{let a=null;r&fr.SignalBased&&(a=n[i][Rt]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),r&fr.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(n,o)),null!==t.setInput?t.setInput(n,a,o,e,i):ny(n,a,i,o)}finally{X(s)}}function au(t,n,e,i,r,o,s,a,c,l,u){const d=n.blueprint.slice();return d[je]=r,d[$]=204|i,(null!==l||t&&2048&t[$])&&(d[$]|=2048),ly(d),d[nt]=d[$o]=t,d[Re]=e,d[ti]=s||t&&t[ti],d[q]=a||t&&t[q],d[Dt]=c||t&&t[Dt]||null,d[Ut]=o,d[aa]=function SA(){return CA++}(),d[Tn]=u,d[Zv]=l,d[We]=2==n.type?t[We]:d,d}function as(t,n,e,i,r){let o=t.data[n];if(null===o)o=function fp(t,n,e,i,r){const o=hy(),s=function gh(){return K.lFrame.isParent}(),c=t.data[n]=function lN(t,n,e,i,r,o){let s=n?n.injectorIndex:-1,a=0;return function Yo(){return null!==K.skipHydrationRootTNode}()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(t,n,e,i,r),function HO(){return K.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=i,o.attrs=r;const s=function fa(){const t=K.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return function yi(t,n){const e=K.lFrame;e.currentTNode=t,e.isParent=n}(o,!0),o}function Ma(t,n,e,i){if(0===e)return-1;const r=n.length;for(let o=0;o<e;o++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function ob(t,n,e,i,r){const o=function $t(){return K.lFrame.selectedIndex}(),s=2&i;try{Vr(-1),s&&n.length>J&&function ib(t,n,e,i){if(!i)if(3&~n[$]){const o=t.preOrderHooks;null!==o&&Nl(n,o,0,e)}else{const o=t.preOrderCheckHooks;null!==o&&Rl(n,o,e)}Vr(e)}(t,n,J,!1),_i(s?2:0,r),e(i,r)}finally{Vr(o),_i(s?3:1,r)}}function mp(t,n,e,i,r,o,s,a,c,l,u){const d=J+i,f=d+r,h=function iN(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:ne);return e}(d,f),p="function"==typeof l?l():l;return h[L]={type:t,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let ab=()=>null;function cb(t,n,e,i,r){for(let o in n){if(!n.hasOwnProperty(o))continue;const s=n[o];if(void 0===s)continue;i??={};let a,c=fr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(null!==r){if(!r.hasOwnProperty(o))continue;l=r[o]}0===t?lb(i,e,l,a,c):lb(i,e,l,a)}return i}function lb(t,n,e,i,r){let o;t.hasOwnProperty(e)?(o=t[e]).push(n,i):o=t[e]=[n,i],void 0!==r&&o.push(r)}function _N(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function bN(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;ni(n)&&(e[""]=t)}}function SN(t,n,e,i,r){t.data[i]=r;const o=r.factory||(r.factory=kr(r.type)),s=new pa(o,ni(r),ae);t.blueprint[i]=s,e[i]=s,function pN(t,n,e,i,r){const o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~n.index;(function gN(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,i,o)}}(t,n,i,Ma(t,e,r.hostVars,ne),r)}function wN(t,n,e){let i=null,r=0;for(;r<e.length;){const o=e[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===i&&(i=[]);const s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===n){i.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function hb(t,n){const e=t.contentQueries;if(null!==e){const i=X(null);try{for(let r=0;r<e.length;r+=2){const s=e[r+1];if(-1!==s){const a=t.data[s];Ol(e[r]),a.contentQueries(2,n[s],s)}}}finally{X(i)}}}function bp(t,n,e){Ol(0);const i=X(null);try{n(t,e)}finally{X(i)}}function TN(t,n){const e=xn(n,t),i=e[L];!function xN(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(i,e);const r=e[je];null!==r&&null===e[Tn]&&(e[Tn]=Gh(r,e[Dt])),Sp(i,e,e[Re])}function Sp(t,n,e){bh(n);try{const i=t.viewQuery;null!==i&&bp(1,i,e);const r=t.template;null!==r&&ob(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[Fi]?.finishViewCreation(t),t.staticContentQueries&&hb(t,n),t.staticViewQueries&&bp(2,t.viewQuery,e);const o=t.components;null!==o&&function DN(t,n){for(let e=0;e<n.length;e++)TN(t,n[e])}(n,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[$]&=-5,Ch()}}function Ra(t,n,e,i,r=!1){for(;null!==e;){const o=n[e.index];null!==o&&i.push(De(o)),jt(o)&&vb(o,i);const s=e.type;if(8&s)Ra(t,n,e.child,i);else if(32&s){const a=rp(e,n);let c;for(;c=a();)i.push(c)}else if(16&s){const a=Z0(n,e);if(Array.isArray(a))i.push(...a);else{const c=Ur(n[We]);Ra(c[L],c,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function vb(t,n){for(let e=it;e<t.length;e++){const i=t[e],r=i[L].firstChild;null!==r&&Ra(i[L],i,r,n)}t[mi]!==t[je]&&n.push(t[mi])}let yb=[];const AN={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{da(t.lView)},consumerOnSignalRead(){this.lView[Br]=this}},bb=100;function uu(t,n=!0,e=0){const i=t[ti],r=i.rendererFactory;r.begin?.();try{!function RN(t,n){Ip(t,n);let e=0;for(;fh(t);){if(e===bb)throw new H(103,!1);e++,Ip(t,1)}}(t,e)}catch(s){throw n&&function lu(t,n){const e=t[Dt],i=e?e.get(Si,null):null;i&&i.handleError(n)}(t,s),s}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function NN(t,n,e,i){const r=n[$];if(!(256&~r))return;n[ti].inlineEffectRunner?.flush(),bh(n);let s=null,a=null;(function kN(t){return 2!==t.type})(t)&&(a=function PN(t){return t[Br]??function MN(t){const n=yb.pop()??Object.create(AN);return n.lView=t,n}(t)}(n),s=function Do(t){return t&&(t.nextProducerIndex=0),X(t)}(a));try{ly(n),function gy(t){return K.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&ob(t,n,e,2,i);const c=!(3&~r);if(c){const d=t.preOrderCheckHooks;null!==d&&Rl(n,d,null)}else{const d=t.preOrderHooks;null!==d&&Nl(n,d,0,null),Sh(n,0)}if(function LN(t){for(let n=t0(t);null!==n;n=n0(n)){if(!(n[$]&rh.HasTransplantedViews))continue;const e=n[zo];for(let i=0;i<e.length;i++){xO(e[i])}}}(n),Cb(n,0),null!==t.contentQueries&&hb(t,n),c){const d=t.contentCheckHooks;null!==d&&Rl(n,d)}else{const d=t.contentHooks;null!==d&&Nl(n,d,1),Sh(n,1)}!function nN(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)Vr(~r);else{const o=r,s=e[++i],a=e[++i];UO(s,o),a(2,n[o])}}}finally{Vr(-1)}}(t,n);const l=t.components;null!==l&&Eb(n,l,0);const u=t.viewQuery;if(null!==u&&bp(2,u,i),c){const d=t.viewCheckHooks;null!==d&&Rl(n,d)}else{const d=t.viewHooks;null!==d&&Nl(n,d,2),Sh(n,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[Tl]){for(const d of n[Tl])d();n[Tl]=null}n[$]&=-73}catch(c){throw da(n),c}finally{null!==a&&(function an(t,n){if(X(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ar(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)Po(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(a,s),function ON(t){t.lView[Br]!==t&&(t.lView=null,yb.push(t))}(a)),Ch()}}function Cb(t,n){for(let e=t0(t);null!==e;e=n0(e))for(let i=it;i<e.length;i++)Sb(e[i],n)}function FN(t,n,e){Sb(xn(n,t),e)}function Sb(t,n){dh(t)&&Ip(t,n)}function Ip(t,n){const i=t[L],r=t[$],o=t[Br];let s=!!(0===n&&16&r);if(s||=!!(64&r&&0===n),s||=!!(1024&r),s||=!(!o?.dirty||!fi(o)),o&&(o.dirty=!1),t[$]&=-9217,s)NN(i,t,i.template,t[Re]);else if(8192&r){Cb(t,1);const a=i.components;null!==a&&Eb(t,a,1)}}function Eb(t,n,e){for(let i=0;i<n.length;i++)FN(t,n[i],e)}function Na(t){for(t[ti].changeDetectionScheduler?.notify();t;){t[$]|=64;const n=Ur(t);if(sh(t)&&!n)return t;t=n}return null}class ka{get rootNodes(){const n=this._lView,e=n[L];return Ra(e,n,e.firstChild,[])}constructor(n,e,i=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Re]}set context(n){this._lView[Re]=n}get destroyed(){return!(256&~this._lView[$])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[nt];if(jt(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(function xa(t,n){if(t.length<=it)return;const e=it+n,i=t[e];if(i){const r=i[sa];null!==r&&r!==t&&G0(r,i),n>0&&(t[e-1][ei]=i[ei]);const o=gl(t,it+n);!function VR(t,n){$0(t,n),n[je]=null,n[Ut]=null}(i[L],i);const s=o[Fi];null!==s&&s.detachView(o[L]),i[nt]=null,i[ei]=null,i[$]&=-129}return i}(n,i),gl(e,i))}this._attachedToViewContainer=!1}!function iu(t,n){if(!(256&n[$])){const e=n[q];e.destroyNode&&su(t,n,e,3,null,null),function $R(t){let n=t[oa];if(!n)return ap(t[L],t);for(;n;){let e=null;if(Vt(n))e=n[oa];else{const i=n[it];i&&(e=i)}if(!e){for(;n&&!n[ei]&&n!==t;)Vt(n)&&ap(n[L],n),n=n[nt];null===n&&(n=t),Vt(n)&&ap(n[L],n),e=n&&n[ei]}n=e}}(n)}}(this._lView[L],this._lView)}onDestroy(n){Ml(this._lView,n)}markForCheck(){Na(this._cdRefInjectingView||this._lView)}detach(){this._lView[$]&=-129}reattach(){hh(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,uu(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,$0(this._lView[L],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=n,hh(this._lView)}}class Mp{}class d2{}class Mb{}class h2{resolveComponentFactory(n){throw function f2(t){const n=Error(`No component factory found for ${_t(t)}.`);return n.ngComponent=t,n}(n)}}let mu=(()=>{class t{static#e=this.NULL=new h2}return t})();class Ab{}let g2=(()=>{class t{static#e=this.\u0275prov=U({token:t,providedIn:"root",factory:()=>null})}return t})();const Op={};let Ua=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of e)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})();class Ub extends mu{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=se(n);return new $a(e,this.ngModule)}}function Vb(t){const n=[];for(const e in t){if(!t.hasOwnProperty(e))continue;const i=t[e];void 0!==i&&n.push({propName:Array.isArray(i)?i[0]:i,templateName:e})}return n}class yu{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=pl(i);const r=this.injector.get(n,Op,i);return r!==Op||e===Op?r:this.parentInjector.get(n,e,i)}}class $a extends Mb{get inputs(){const n=this.componentDef,e=n.inputTransforms,i=Vb(n.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return Vb(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function GM(t){return t.map($M).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,r){const o=X(null);try{let s=(r=r||this.ngModule)instanceof gi?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new yu(n,s):n,c=a.get(Ab,null);if(null===c)throw new H(407,!1);const l=a.get(g2,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(Ua,null),changeDetectionScheduler:a.get(Mp,null)},h=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=i?function rN(t,n,e,i){const o=i.get(y0,!1)||e===Zn.ShadowDom,s=t.selectRootElement(n,o);return function oN(t){ab(t)}(s),s}(h,i,this.componentDef.encapsulation,a):function nu(t,n,e){return t.createElement(n,e)}(h,p,function b2(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(p));let m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let v=null;null!==g&&(v=Gh(g,a,!0));const _=mp(0,null,null,1,0,null,null,null,null,null,null),E=au(null,_,null,m,null,null,f,h,a,null,v);let I,y;bh(E);try{const T=this.componentDef;let k,N=null;T.findHostDirectiveDefs?(k=[],N=new Map,T.findHostDirectiveDefs(T,k,N),k.push(T)):k=[T];const O=function S2(t,n){const e=t[L],i=J;return t[i]=n,as(e,i,2,"#host",null)}(E,g),M=function E2(t,n,e,i,r,o,s){const a=r[L];!function I2(t,n,e,i){for(const r of t)n.mergedAttrs=ia(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&(function vu(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,o=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?o=a:1==o?r=Df(r,a):2==o&&(i=Df(i,a+": "+n[++s]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}(n,n.mergedAttrs,!0),null!==e&&function nb(t,n,e){const{mergedAttrs:i,classes:r,styles:o}=e;null!==i&&Yf(t,n,i),null!==r&&tb(t,n,r),null!==o&&function JR(t,n,e){t.setAttribute(n,"style",e)}(t,n,o)}(i,e,n))}(i,t,n,s);let c=null;null!==n&&(c=Gh(n,r[Dt]));const l=o.rendererFactory.createRenderer(n,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const d=au(r,function sb(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=mp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}(e),null,u,r[t.index],t,o,l,null,null,c);return a.firstCreatePass&&function vp(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}(a,t,i.length-1),function cu(t,n){return t[oa]?t[13][ei]=n:t[oa]=n,t[13]=n,n}(r,d),r[t.index]=d}(O,g,T,k,E,f,h);y=function ua(t,n){return t.data[n]}(_,J),g&&function T2(t,n,e,i){if(i)Yf(t,e,["ng-version","17.3.7"]);else{const{attrs:r,classes:o}=function zM(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&n.push(o,t[++i]):8===r&&e.push(o);else{if(!Jn(r))break;r=o}i++}return{attrs:n,classes:e}}(n.selectors[0]);r&&Yf(t,e,r),o&&o.length>0&&tb(t,e,o.join(" "))}}(h,T,g,i),void 0!==e&&function x2(t,n,e){const i=t.projection=[];for(let r=0;r<n.length;r++){const o=e[r];i.push(null!=o?Array.from(o):null)}}(y,this.ngContentSelectors,e),I=function w2(t,n,e,i,r,o){const s=Te(),a=r[L],c=Jt(s,r);!function ub(t,n,e,i,r,o){for(let l=0;l<i.length;l++)xh(Ll(e,n),t,i[l].type);!function CN(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Ma(t,n,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];e.mergedAttrs=ia(e.mergedAttrs,u.hostAttrs),SN(t,e,n,c,u),bN(c,u,r),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),a=!0),c++}!function uN(t,n,e){const r=n.directiveEnd,o=t.data,s=n.attrs,a=[];let c=null,l=null;for(let u=n.directiveStart;u<r;u++){const d=o[u],f=e?e.get(d):null,p=f?f.outputs:null;c=cb(0,d.inputs,u,c,f?f.inputs:null),l=cb(1,d.outputs,u,l,p);const g=null===c||null===s||qf(n)?null:wN(c,u,s);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(n.flags|=8),c.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=c,n.outputs=l}(t,e,o)}(a,r,s,e,null,i);for(let u=0;u<e.length;u++)Gt(jr(r,a,s.directiveStart+u,s),r);(function db(t,n,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,s=function VO(){return K.lFrame.currentDirectiveIndex}();try{Vr(o);for(let a=i;a<r;a++){const c=t.data[a],l=n[a];_h(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&_N(c,l)}}finally{Vr(-1),_h(s)}})(a,r,s),c&&Gt(c,r);const l=jr(r,a,s.directiveStart+s.componentOffset,s);if(t[Re]=r[Re]=l,null!==o)for(const u of o)u(l,n);return function hp(t,n,e){if(function oh(t){return!!(4&t.flags)}(n)){const i=X(null);try{const o=n.directiveEnd;for(let s=n.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,e[s],s)}}finally{X(i)}}}(a,s,r),l}(M,T,k,N,E,[D2]),Sp(_,E,null)}finally{Ch()}return new C2(this.componentType,I,Zo(y,E),E,y)}finally{X(o)}}}class C2 extends d2{constructor(n,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new ka(r,void 0,!1),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const o=this._rootLView;(function Cp(t,n,e,i,r){for(let o=0;o<e.length;){const s=e[o++],a=e[o++],c=e[o++];rb(t.data[s],n[s],i,a,c,r)}})(o[L],o,r,n,e),this.previousInputValues.set(n,e),Na(xn(this._tNode.index,o))}}get injector(){return new Ct(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function D2(){const t=Te();!function Al(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const o=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-e,s),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),c&&(t.viewHooks??=[]).push(-e,c),l&&((t.viewHooks??=[]).push(e,l),(t.viewCheckHooks??=[]).push(e,l)),null!=u&&(t.destroyHooks??=[]).push(e,u)}}(P()[L],t)}class Wr{}class ck{}class zp extends Wr{constructor(n,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ub(this);const r=function Ht(t,n){const e=t[wv]||null;if(!e&&!0===n)throw new Error(`Type ${_t(t)} does not have '\u0275mod' property.`);return e}(n);this._bootstrapComponents=function Dn(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=Vy(n,e,[{provide:Wr,useValue:this},{provide:mu,useValue:this.componentFactoryResolver},...i],_t(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Wp extends ck{constructor(n){super(),this.moduleType=n}create(n){return new zp(this.moduleType,n,[])}}let za=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new cM(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function DC(...t){}class Ye{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tn(!1),this.onMicrotaskEmpty=new tn(!1),this.onStable=new tn(!1),this.onError=new tn(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function bk(){const t="function"==typeof Ce.requestAnimationFrame;let n=Ce[t?"requestAnimationFrame":"setTimeout"],e=Ce[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Ek(t){const n=()=>{!function Sk(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ce,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Xp(t),t.isCheckStableRunning=!0,Kp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Xp(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,o,s,a)=>{if(function Ik(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(r,o,s,a);try{return PC(t),e.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&n(),MC(t)}},onInvoke:(e,i,r,o,s,a,c)=>{try{return PC(t),e.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&n(),MC(t)}},onHasTask:(e,i,r,o)=>{e.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Xp(t),Kp(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,i,r,o)=>(e.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ye.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(Ye.isInAngularZone())throw new H(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,n,Ck,DC,DC);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const Ck={};function Kp(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Xp(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function PC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function MC(t){t._nesting--,Kp(t)}class OC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tn,this.onMicrotaskEmpty=new tn,this.onStable=new tn,this.onError=new tn}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}const Xr=void 0;var tF=["en",[["a","p"],["AM","PM"],Xr],[["AM","PM"],Xr,Xr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xr,"{1} 'at' {0}",Xr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eF(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let xs={};function nn(t){const n=function nF(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=MS(n);if(e)return e;const i=n.split("-")[0];if(e=MS(i),e)return e;if("en"===i)return tF;throw new H(701,!1)}function MS(t){return t in xs||(xs[t]=Ce.ng&&Ce.ng.common&&Ce.ng.common.locales&&Ce.ng.common.locales[t]),xs[t]}var ke=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ke||{});const Ds="en-US";let OS=Ds;const lI=new j(""),Hu=new j("");let kg,Rg=(()=>{class t{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,kg||(function Y4(t){kg=t}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ye.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e()},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(w(Ye),w(Ng),w(Hu))};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Ng=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return kg?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Lg(t){return!!t&&"function"==typeof t.then}function uI(t){return!!t&&"function"==typeof t.subscribe}const Mn=new j("");let Fg=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=oe(Mn,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const o=r();if(Lg(o))e.push(o);else if(uI(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const dI=new j("");function pI(t,n){return Array.isArray(n)?n.reduce(pI,t):{...t,...n}}let Qr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe($y),this.afterRenderEffectManager=oe(Ua),this.externalTestViews=new Set,this.beforeRender=new lr,this.afterTick=new lr,this.componentTypes=[],this.components=[],this.isStable=oe(za).hasPendingTasks.pipe(tt(e=>!e)),this._injector=oe(gi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof Mb;if(!this._injector.get(Fg).done)throw!r&&Lr(e),new H(405,!1);let s;s=r?e:this._injector.get(mu).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function q4(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Wr),l=s.create(Un.NULL,[],i||s.selector,a),u=l.location.nativeElement,d=l.injector.get(lI,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Uu(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new H(101,!1);const i=X(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,X(i)}}detectChangesInAttachedViews(e){let i=0;const r=this.afterRenderEffectManager;for(;;){if(i===bb)throw new H(103,!1);if(e){const o=0===i;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)X4(s,o,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Bg(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Bg(o))))break}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Uu(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(dI,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Uu(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new H(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Uu(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function X4(t,n,e){!n&&!Bg(t)||function Q4(t,n,e){let i;e?(i=0,t[$]|=1024):i=64&t[$]?0:1,uu(t,n,i)}(t,e,n)}function Bg(t){return fh(t)}let t5=(()=>{class t{constructor(){this.zone=oe(Ye),this.applicationRef=oe(Qr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function n5(){const t=oe(Ye),n=oe(Si);return e=>t.runOutsideAngular(()=>n.handleError(e))}let o5=(()=>{class t{constructor(){this.subscription=new Bn,this.initialized=!1,this.zone=oe(Ye),this.pendingTasks=oe(za)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ye.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ye.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Gi=new j("",{providedIn:"root",factory:()=>oe(Gi,fe.Optional|fe.SkipSelf)||function s5(){return typeof $localize<"u"&&$localize.locale||Ds}()}),Hg=new j("");let vI=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function wk(t="zone.js",n){return"noop"===t?new OC:"zone.js"===t?new Ye(n):t}(i?.ngZone,function _I(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function uk(t,n,e){return new zp(t,n,e)}(e.moduleType,this.injector,function mI(t){return[{provide:Ye,useFactory:t},{provide:Bo,multi:!0,useFactory:()=>{const n=oe(t5,{optional:!0});return()=>n.initialize()}},{provide:Bo,multi:!0,useFactory:()=>{const n=oe(o5);return()=>{n.initialize()}}},{provide:$y,useFactory:n5}]}(()=>r)),s=o.injector.get(Si,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{Uu(this._modules,o),a.unsubscribe()})}),function hI(t,n,e){try{const i=e();return Lg(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(Fg);return a.runInitializers(),a.donePromise.then(()=>(function AS(t){"string"==typeof t&&(OS=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Gi,Ds)||Ds),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,i=[]){const r=pI({},i);return function e5(t,n,e){const i=new Wp(e);return Promise.resolve(i)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){const i=e.injector.get(Qr);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new H(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(Hg,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(w(Un))};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),br=null;const yI=new j("");function bI(t,n,e=[]){const i=`Platform: ${n}`,r=new j(i);return(o=[])=>{let s=Ug();if(!s||s.injector.get(yI,!1)){const a=[...e,...o,{provide:r,useValue:!0}];t?t(a):function l5(t){if(br&&!br.get(yI,!1))throw new H(400,!1);(function fI(){!function D(t){bf=t}(()=>{throw new H(600,!1)})})(),br=t;const n=t.get(vI);(function SI(t){t.get(f0,null)?.forEach(e=>e())})(t)}(function CI(t=[],n){return Un.create({name:n,providers:[{provide:Zf,useValue:"platform"},{provide:Hg,useValue:new Set([()=>br=null])},...t]})}(a,i))}return function u5(t){const n=Ug();if(!n)throw new H(401,!1);return n}()}}function Ug(){return br?.get(vI)??null}const w5=bI(null,"core",[]);let T5=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||t)(w(Qr))};static#t=this.\u0275mod=xt({type:t});static#n=this.\u0275inj=vt({})}return t})(),nw=null;function qg(){return nw}class l6{}const Jr=new j("");var on=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(on||{}),Ae=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ae||{}),On=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(On||{});const ht={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Qu(t,n){return $n(nn(t)[ke.DateFormat],n)}function Zu(t,n){return $n(nn(t)[ke.TimeFormat],n)}function Ju(t,n){return $n(nn(t)[ke.DateTimeFormat],n)}function jn(t,n){const e=nn(t),i=e[ke.NumberSymbols][n];if(typeof i>"u"){if(n===ht.CurrencyDecimal)return e[ke.NumberSymbols][ht.Decimal];if(n===ht.CurrencyGroup)return e[ke.NumberSymbols][ht.Group]}return i}function rw(t){if(!t[ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function $n(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function Xg(t){const[n,e]=t.split(":");return{hours:+n,minutes:+e}}const w6=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ed={},T6=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var zi=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(zi||{}),_e=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(_e||{}),ve=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(ve||{});function x6(t,n,e,i){let r=function L6(t){if(aw(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[r,o=1,s=1]=t.split("-").map(a=>+a);return td(r,o-1,s)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let i;if(i=t.match(w6))return function F6(t){const n=new Date(0);let e=0,i=0;const r=t[8]?n.setUTCFullYear:n.setFullYear,o=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-e,a=Number(t[5]||0)-i,c=Number(t[6]||0),l=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(n,s,a,c,l),n}(i)}const n=new Date(t);if(!aw(n))throw new Error(`Unable to convert "${t}" into a date`);return n}(t);n=Wi(e,n)||n;let a,s=[];for(;n;){if(a=T6.exec(n),!a){s.push(n);break}{s=s.concat(a.slice(1));const u=s.pop();if(!u)break;n=u}}let c=r.getTimezoneOffset();i&&(c=sw(i,c),r=function k6(t,n,e){const i=e?-1:1,r=t.getTimezoneOffset();return function N6(t,n){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+n),t}(t,i*(sw(n,r)-r))}(r,i,!0));let l="";return s.forEach(u=>{const d=function R6(t){if(Zg[t])return Zg[t];let n;switch(t){case"G":case"GG":case"GGG":n=Le(ve.Eras,Ae.Abbreviated);break;case"GGGG":n=Le(ve.Eras,Ae.Wide);break;case"GGGGG":n=Le(ve.Eras,Ae.Narrow);break;case"y":n=pt(_e.FullYear,1,0,!1,!0);break;case"yy":n=pt(_e.FullYear,2,0,!0,!0);break;case"yyy":n=pt(_e.FullYear,3,0,!1,!0);break;case"yyyy":n=pt(_e.FullYear,4,0,!1,!0);break;case"Y":n=od(1);break;case"YY":n=od(2,!0);break;case"YYY":n=od(3);break;case"YYYY":n=od(4);break;case"M":case"L":n=pt(_e.Month,1,1);break;case"MM":case"LL":n=pt(_e.Month,2,1);break;case"MMM":n=Le(ve.Months,Ae.Abbreviated);break;case"MMMM":n=Le(ve.Months,Ae.Wide);break;case"MMMMM":n=Le(ve.Months,Ae.Narrow);break;case"LLL":n=Le(ve.Months,Ae.Abbreviated,on.Standalone);break;case"LLLL":n=Le(ve.Months,Ae.Wide,on.Standalone);break;case"LLLLL":n=Le(ve.Months,Ae.Narrow,on.Standalone);break;case"w":n=Qg(1);break;case"ww":n=Qg(2);break;case"W":n=Qg(1,!0);break;case"d":n=pt(_e.Date,1);break;case"dd":n=pt(_e.Date,2);break;case"c":case"cc":n=pt(_e.Day,1);break;case"ccc":n=Le(ve.Days,Ae.Abbreviated,on.Standalone);break;case"cccc":n=Le(ve.Days,Ae.Wide,on.Standalone);break;case"ccccc":n=Le(ve.Days,Ae.Narrow,on.Standalone);break;case"cccccc":n=Le(ve.Days,Ae.Short,on.Standalone);break;case"E":case"EE":case"EEE":n=Le(ve.Days,Ae.Abbreviated);break;case"EEEE":n=Le(ve.Days,Ae.Wide);break;case"EEEEE":n=Le(ve.Days,Ae.Narrow);break;case"EEEEEE":n=Le(ve.Days,Ae.Short);break;case"a":case"aa":case"aaa":n=Le(ve.DayPeriods,Ae.Abbreviated);break;case"aaaa":n=Le(ve.DayPeriods,Ae.Wide);break;case"aaaaa":n=Le(ve.DayPeriods,Ae.Narrow);break;case"b":case"bb":case"bbb":n=Le(ve.DayPeriods,Ae.Abbreviated,on.Standalone,!0);break;case"bbbb":n=Le(ve.DayPeriods,Ae.Wide,on.Standalone,!0);break;case"bbbbb":n=Le(ve.DayPeriods,Ae.Narrow,on.Standalone,!0);break;case"B":case"BB":case"BBB":n=Le(ve.DayPeriods,Ae.Abbreviated,on.Format,!0);break;case"BBBB":n=Le(ve.DayPeriods,Ae.Wide,on.Format,!0);break;case"BBBBB":n=Le(ve.DayPeriods,Ae.Narrow,on.Format,!0);break;case"h":n=pt(_e.Hours,1,-12);break;case"hh":n=pt(_e.Hours,2,-12);break;case"H":n=pt(_e.Hours,1);break;case"HH":n=pt(_e.Hours,2);break;case"m":n=pt(_e.Minutes,1);break;case"mm":n=pt(_e.Minutes,2);break;case"s":n=pt(_e.Seconds,1);break;case"ss":n=pt(_e.Seconds,2);break;case"S":n=pt(_e.FractionalSeconds,1);break;case"SS":n=pt(_e.FractionalSeconds,2);break;case"SSS":n=pt(_e.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=id(zi.Short);break;case"ZZZZZ":n=id(zi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=id(zi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=id(zi.Long);break;default:return null}return Zg[t]=n,n}(u);l+=d?d(r,e,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function td(t,n,e){const i=new Date(0);return i.setFullYear(t,n,e),i.setHours(0,0,0),i}function Wi(t,n){const e=function h6(t){return nn(t)[ke.LocaleId]}(t);if(ed[e]??={},ed[e][n])return ed[e][n];let i="";switch(n){case"shortDate":i=Qu(t,On.Short);break;case"mediumDate":i=Qu(t,On.Medium);break;case"longDate":i=Qu(t,On.Long);break;case"fullDate":i=Qu(t,On.Full);break;case"shortTime":i=Zu(t,On.Short);break;case"mediumTime":i=Zu(t,On.Medium);break;case"longTime":i=Zu(t,On.Long);break;case"fullTime":i=Zu(t,On.Full);break;case"short":const r=Wi(t,"shortTime"),o=Wi(t,"shortDate");i=nd(Ju(t,On.Short),[r,o]);break;case"medium":const s=Wi(t,"mediumTime"),a=Wi(t,"mediumDate");i=nd(Ju(t,On.Medium),[s,a]);break;case"long":const c=Wi(t,"longTime"),l=Wi(t,"longDate");i=nd(Ju(t,On.Long),[c,l]);break;case"full":const u=Wi(t,"fullTime"),d=Wi(t,"fullDate");i=nd(Ju(t,On.Full),[u,d])}return i&&(ed[e][n]=i),i}function nd(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,i){return null!=n&&i in n?n[i]:e})),t}function si(t,n,e="-",i,r){let o="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,o=e));let s=String(t);for(;s.length<n;)s="0"+s;return i&&(s=s.slice(s.length-n)),o+s}function pt(t,n,e=0,i=!1,r=!1){return function(o,s){let a=function P6(t,n){switch(t){case _e.FullYear:return n.getFullYear();case _e.Month:return n.getMonth();case _e.Date:return n.getDate();case _e.Hours:return n.getHours();case _e.Minutes:return n.getMinutes();case _e.Seconds:return n.getSeconds();case _e.FractionalSeconds:return n.getMilliseconds();case _e.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((e>0||a>-e)&&(a+=e),t===_e.Hours)0===a&&-12===e&&(a=12);else if(t===_e.FractionalSeconds)return function D6(t,n){return si(t,3).substring(0,n)}(a,n);const c=jn(s,ht.MinusSign);return si(a,n,c,i,r)}}function Le(t,n,e=on.Format,i=!1){return function(r,o){return function M6(t,n,e,i,r,o){switch(e){case ve.Months:return function m6(t,n,e){const i=nn(t),o=$n([i[ke.MonthsFormat],i[ke.MonthsStandalone]],n);return $n(o,e)}(n,r,i)[t.getMonth()];case ve.Days:return function g6(t,n,e){const i=nn(t),o=$n([i[ke.DaysFormat],i[ke.DaysStandalone]],n);return $n(o,e)}(n,r,i)[t.getDay()];case ve.DayPeriods:const s=t.getHours(),a=t.getMinutes();if(o){const l=function b6(t){const n=nn(t);return rw(n),(n[ke.ExtraData][2]||[]).map(i=>"string"==typeof i?Xg(i):[Xg(i[0]),Xg(i[1])])}(n),u=function C6(t,n,e){const i=nn(t);rw(i);const o=$n([i[ke.ExtraData][0],i[ke.ExtraData][1]],n)||[];return $n(o,e)||[]}(n,r,i),d=l.findIndex(f=>{if(Array.isArray(f)){const[h,p]=f,g=s>=h.hours&&a>=h.minutes,m=s<p.hours||s===p.hours&&a<p.minutes;if(h.hours<p.hours){if(g&&m)return!0}else if(g||m)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function p6(t,n,e){const i=nn(t),o=$n([i[ke.DayPeriodsFormat],i[ke.DayPeriodsStandalone]],n);return $n(o,e)}(n,r,i)[s<12?0:1];case ve.Eras:return function _6(t,n){return $n(nn(t)[ke.Eras],n)}(n,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,o,t,n,e,i)}}function id(t){return function(n,e,i){const r=-1*i,o=jn(e,ht.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case zi.Short:return(r>=0?"+":"")+si(s,2,o)+si(Math.abs(r%60),2,o);case zi.ShortGMT:return"GMT"+(r>=0?"+":"")+si(s,1,o);case zi.Long:return"GMT"+(r>=0?"+":"")+si(s,2,o)+":"+si(Math.abs(r%60),2,o);case zi.Extended:return 0===i?"Z":(r>=0?"+":"")+si(s,2,o)+":"+si(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}const O6=0,rd=4;function ow(t){const n=t.getDay(),e=0===n?-3:rd-n;return td(t.getFullYear(),t.getMonth(),t.getDate()+e)}function Qg(t,n=!1){return function(e,i){let r;if(n){const o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{const o=ow(e),s=function A6(t){const n=td(t,O6,1).getDay();return td(t,0,1+(n<=rd?rd:rd+7)-n)}(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return si(r,t,jn(i,ht.MinusSign))}}function od(t,n=!1){return function(e,i){return si(ow(e).getFullYear(),t,jn(i,ht.MinusSign),n)}}const Zg={};function sw(t,n){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function aw(t){return t instanceof Date&&!isNaN(t.valueOf())}const gB=new j(""),mB=new j("");let fc=(()=>{class t{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,o){if(null==e||""===e||e!=e)return null;try{return x6(e,i??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function ai(t,n){return new H(2100,!1)}()}}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Gi,16),ae(gB,24),ae(mB,24))};static#t=this.\u0275pipe=Zt({name:"date",type:t,pure:!0,standalone:!0})}return t})(),Gn=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=xt({type:t});static#n=this.\u0275inj=vt({})}return t})();function vw(t){return"server"===t}
/**
         * @license Angular v17.3.7
         * (c) 2010-2024 Google LLC. https://angular.io/
         * License: MIT
         */
class rH extends l6{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class um extends rH{static makeCurrent(){!function c6(t){nw??=t}(new um)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function oH(){return gc=gc||document.querySelector("base"),gc?gc.getAttribute("href"):null}();return null==e?null:function sH(t){return new URL(t,document.baseURI).pathname}(e)}resetBaseElement(){gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function K6(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}(document.cookie,n)}}let gc=null,cH=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac})}return t})();const dm=new j("");let xw=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new H(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(w(dm),w(Ye))};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac})}return t})();class Dw{constructor(n){this._doc=n}}const fm="ng-app-id";let Pw=(()=>{class t{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vw(o),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${fm}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(fm),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(fm,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){const r=this.getStyleElement(e,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(w(Jr),w(Gl),w(h0,8),w(es))};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac})}return t})();const hm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pm=/%COMP%/g,fH=new j("",{providedIn:"root",factory:()=>!0});function Ow(t,n){return n.map(e=>e.replace(pm,t))}let Aw=(()=>{class t{constructor(e,i,r,o,s,a,c,l=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=vw(a),this.defaultRenderer=new gm(e,s,c,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Zn.ShadowDom&&(i={...i,encapsulation:Zn.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof Nw?r.applyToHost(e):r instanceof mm&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Zn.Emulated:o=new Nw(c,l,i,this.appId,u,s,a,d);break;case Zn.ShadowDom:return new mH(c,l,e,i,s,a,this.nonce,d);default:o=new mm(c,l,i,u,s,a,d)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(w(xw),w(Pw),w(Gl),w(fH),w(Jr),w(es),w(Ye),w(h0))};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac})}return t})();class gm{constructor(n,e,i,r){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(hm[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(Rw(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(Rw(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new H(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const o=hm[r];o?n.setAttributeNS(o,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=hm[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(mr.DashCase|mr.Important)?n.style.setProperty(e,i,r&mr.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&mr.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){null!=n&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=qg().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function Rw(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class mH extends gm{constructor(n,e,i,r,o,s,a,c){super(n,o,s,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ow(r.id,r.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mm extends gm{constructor(n,e,i,r,o,s,a,c){super(n,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?Ow(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Nw extends mm{constructor(n,e,i,r,o,s,a,c){const l=r+"-"+i.id;super(n,e,i,o,s,a,c,l),this.contentAttr=function hH(t){return"_ngcontent-%COMP%".replace(pm,t)}(l),this.hostAttr=function pH(t){return"_nghost-%COMP%".replace(pm,t)}(l)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let _H=(()=>{class t extends Dw{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||t)(w(Jr))};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac})}return t})();const kw=["alt","control","meta","shift"],vH={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yH={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let bH=(()=>{class t extends Dw{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const o=t.parseEventName(i),s=t.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qg().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=t._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),kw.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),s+=l+".")}),s+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(e,i){let r=vH[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),kw.forEach(s=>{s!==r&&(0,yH[s])(e)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{t.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||t)(w(Jr))};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac})}return t})();const IH=bI(w5,"browser",[{provide:es,useValue:"browser"},{provide:f0,useValue:function CH(){um.makeCurrent()},multi:!0},{provide:Jr,useFactory:function EH(){return function UA(t){Lh=t}(document),document},deps:[]}]),wH=new j(""),Bw=[{provide:Hu,useClass:class aH{addToWindow(n){Ce.getAngularTestability=(i,r=!0)=>{const o=n.findTestabilityInTree(i,r);if(null==o)throw new H(5103,!1);return o},Ce.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ce.getAllAngularRootElements=()=>n.getAllRootElements(),Ce.frameworkStabilizers||(Ce.frameworkStabilizers=[]),Ce.frameworkStabilizers.push(i=>{const r=Ce.getAllAngularTestabilities();let o=r.length;const s=function(){o--,0==o&&i()};r.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?qg().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:lI,useClass:Rg,deps:[Ye,Ng,Hu]},{provide:Rg,useClass:Rg,deps:[Ye,Ng,Hu]}],Hw=[{provide:Zf,useValue:"root"},{provide:Si,useFactory:function SH(){return new Si},deps:[]},{provide:dm,useClass:_H,multi:!0,deps:[Jr,Ye,es]},{provide:dm,useClass:bH,multi:!0,deps:[Jr]},Aw,Pw,xw,{provide:Ab,useExisting:Aw},{provide:class MB{},useClass:cH,deps:[]},[]];let TH=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:Gl,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(w(wH,12))};static#t=this.\u0275mod=xt({type:t});static#n=this.\u0275inj=vt({providers:[...Hw,...Bw],imports:[Gn,T5]})}return t})();function $w(t){return t&&he(t.schedule)}function _m(t){return t[t.length-1]}function vm(t){return $w(_m(t))?t.pop():void 0}var eo=Ot(270);const Gw=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function zw(t){return he(t?.then)}function Ww(t){return he(t[Tf])}function Yw(t){return Symbol.asyncIterator&&he(t?.[Symbol.asyncIterator])}function qw(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Kw=function OH(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Xw(t){return he(t?.[Kw])}function Qw(t){return(0,eo.AQ)(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield(0,eo.N3)(e.read());if(r)return yield(0,eo.N3)(void 0);yield yield(0,eo.N3)(i)}}finally{e.releaseLock()}})}function Zw(t){return he(t?.getReader)}function pn(t){if(t instanceof Tt)return t;if(null!=t){if(Ww(t))return function AH(t){return new Tt(n=>{const e=t[Tf]();if(he(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Gw(t))return function RH(t){return new Tt(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(zw(t))return function NH(t){return new Tt(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,pv)})}(t);if(Yw(t))return Jw(t);if(Xw(t))return function kH(t){return new Tt(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(Zw(t))return function LH(t){return Jw(Qw(t))}(t)}throw qw(t)}function Jw(t){return new Tt(n=>{(function FH(t,n){var e,i,r,o;return(0,eo.sH)(this,void 0,void 0,function*(){try{for(e=(0,eo.xN)(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Yi(t,n,e,i=0,r=!1){const o=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function e1(t,n=0){return Ft((e,i)=>{e.subscribe(Bt(i,r=>Yi(i,t,()=>i.next(r),n),()=>Yi(i,t,()=>i.complete(),n),r=>Yi(i,t,()=>i.error(r),n)))})}function t1(t,n=0){return Ft((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function n1(t,n){if(!t)throw new Error("Iterable cannot be null");return new Tt(e=>{Yi(e,n,()=>{const i=t[Symbol.asyncIterator]();Yi(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function to(t,n){return n?function $H(t,n){if(null!=t){if(Ww(t))return function BH(t,n){return pn(t).pipe(t1(n),e1(n))}(t,n);if(Gw(t))return function UH(t,n){return new Tt(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(zw(t))return function HH(t,n){return pn(t).pipe(t1(n),e1(n))}(t,n);if(Yw(t))return n1(t,n);if(Xw(t))return function VH(t,n){return new Tt(e=>{let i;return Yi(e,n,()=>{i=t[Kw](),Yi(e,n,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void e.error(s)}o?e.complete():e.next(r)},0,!0)}),()=>he(i?.return)&&i.return()})}(t,n);if(Zw(t))return function jH(t,n){return n1(Qw(t),n)}(t,n)}throw qw(t)}(t,n):pn(t)}function Xe(...t){return to(t,vm(t))}function ud(t,n,e=1/0){return he(n)?ud((i,r)=>tt((o,s)=>n(i,o,r,s))(pn(t(i,r))),e):("number"==typeof n&&(e=n),Ft((i,r)=>function GH(t,n,e,i,r,o,s,a){const c=[];let l=0,u=0,d=!1;const f=()=>{d&&!c.length&&!l&&n.complete()},h=g=>l<i?p(g):c.push(g),p=g=>{o&&n.next(g),l++;let m=!1;pn(e(g,u++)).subscribe(Bt(n,v=>{r?.(v),o?h(v):n.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<i;){const v=c.shift();s?Yi(n,s,()=>p(v)):p(v)}f()}catch(v){n.error(v)}}))};return t.subscribe(Bt(n,h,()=>{d=!0,f()})),()=>{a?.()}}(i,r,t,e)))}function r1(t,n){return he(n)?ud(t,n,1):ud(t,1)}function o1(t,n){return Ft((e,i)=>{let r=0;e.subscribe(Bt(i,o=>t.call(n,o,r++)&&i.next(o)))})}
/**
         * @license Angular v17.3.7
         * (c) 2010-2024 Google LLC. https://angular.io/
         * License: MIT
         */class ym{}class Pi{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Pi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Pi;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Pi?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const r=("a"===n.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const o=n.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class zH{encodeKey(n){return s1(n)}encodeValue(n){return s1(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const YH=/%(\d[a-f0-9])/gi,qH={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function s1(t){return encodeURIComponent(t).replace(YH,(n,e)=>qH[e]??n)}function dd(t){return`${t}`}class Cr{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new zH,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function WH(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],r=Array.isArray(i)?i.map(dd):[dd(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Cr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(dd(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(dd(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class KH{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function a1(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function c1(t){return typeof Blob<"u"&&t instanceof Blob}function l1(t){return typeof FormData<"u"&&t instanceof FormData}class _c{constructor(n,e,i,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function XH(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Pi,this.context??=new KH,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Cr,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||a1(this.body)||c1(this.body)||l1(this.body)||function QH(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Cr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||l1(this.body)?null:c1(this.body)?this.body.type||null:a1(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Cr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=n.transferCache??this.transferCache,s=void 0!==n.body?n.body:this.body,a=n.withCredentials??this.withCredentials,c=n.reportProgress??this.reportProgress;let l=n.headers||this.headers,u=n.params||this.params;const d=n.context??this.context;return void 0!==n.setHeaders&&(l=Object.keys(n.setHeaders).reduce((f,h)=>f.set(h,n.setHeaders[h]),l)),n.setParams&&(u=Object.keys(n.setParams).reduce((f,h)=>f.set(h,n.setParams[h]),u)),new _c(e,i,s,{params:u,headers:l,context:d,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}}var fd=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(fd||{});class Cm{constructor(n,e=d1.Ok,i="OK"){this.headers=n.headers||new Pi,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Rs extends Cm{constructor(n={}){super(n),this.type=fd.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Rs({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Sm extends Cm{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}var d1=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(d1||{});function Em(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let It=(()=>{class t{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof _c)o=e;else{let c,l;c=r.headers instanceof Pi?r.headers:new Pi(r.headers),r.params&&(l=r.params instanceof Cr?r.params:new Cr({fromObject:r.params})),o=new _c(e,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const s=Xe(o).pipe(r1(c=>this.handler.handle(c)));if(e instanceof _c||"events"===r.observe)return s;const a=s.pipe(o1(c=>c instanceof Rs));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(tt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(tt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(tt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(tt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Cr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Em(r,i))}post(e,i,r={}){return this.request("POST",e,Em(r,i))}put(e,i,r={}){return this.request("PUT",e,Em(r,i))}static#e=this.\u0275fac=function(i){return new(i||t)(w(ym))};static#t=this.\u0275prov=U({token:t,factory:t.\u0275fac})}return t})();const Tm=Sn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function le(t,n){const e="object"==typeof n;return new Promise((i,r)=>{let s,o=!1;t.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):e?i(n.defaultValue):r(new Tm)}})})}function zn(t,n){return Ft((e,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();e.subscribe(Bt(i,c=>{r?.unsubscribe();let l=0;const u=o++;pn(t(c,u)).subscribe(r=Bt(i,d=>i.next(n?n(c,d,u,l++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function io(t,n,e){const i=he(t)||n||e?{next:t,error:n,complete:e}:t;return i?Ft((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(Bt(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):al}class S{static LEVEL_ERROR=0;static LEVEL_WARNING=1;static LEVEL_INFO=2;static LEVEL_ERROR_COLOR="#f44336";static LEVEL_WARNING_COLOR="#ffcc00";static LEVEL_INFO_COLOR="#00c853";static LEVEL_ERROR_STATUS="bad";static LEVEL_WARNING_STATUS="stranger";static LEVEL_INFO_STATUS="good";static TYPE_NO_CHANGE=0;static TYPE_MINOR_DOWN=1;static TYPE_DOWN=2;static TYPE_MINOR_DOWN_AFTER_UP=3;static TYPE_MINOR_UP_AFTER_DOWN=4;static TYPE_UP=5;static TYPE_MINOR_UP=6;static BROWSER_NAME_IE="Internet Explorer";static BROWSER_NAME_FF="Firefox";static BROWSER_NAME_CHROME="Chrome";static BROWSER_NAME_OPERA="Opera";static BROWSER_NAME_SAFARI="Safari";static BROWSER_NAME_YABROWSER="YaBrowser";static PARAMETER_DEEP_LINK="?ext_referrer=";static APP_TOKEN="Owmeaiaiwlsn3444_aasi344Mgoak";static REGEX_ACT_MIN_PRICE=/window\.runParams\.actMinPrice="(.+)";/gim;static REGEX_ACT_MAX_PRICE=/window\.runParams\.actMaxPrice="(.+)";/gim;static REGEX_MIN_PRICE=/window\.runParams\.minPrice="(.+)";/gim;static REGEX_MAX_PRICE=/window\.runParams\.maxPrice="(.+)";/gim;static REGEX_BASE_CURRENCY_CODE=/window\.runParams\.baseCurrencyCode="(.+)";/gim;static REGEX_REGION_COUNTRY_NAME=/window\.runParams\.regionCountryName="(.+)";/gim;static REGEX_REGION_PROVINCE_NAME=/window\.runParams\.regionProvinceName="(.+)";/gim;static REGEX_REGION_CITY_NAME=/window\.runParams\.regionCityName="(.+)";/gim;static REGEX_ALI_PRODUCT_ID=/^\/(?:item(?:\/.*)?\/|s\/item(?:\/.*)?\/|store\/product(?:\/.*)?\/\d+_|\d+\-)([\d]+)(?:\-detail)?\.html/g;static REGEX_GEARBEST_PRODUCT_ID=/^(?:\/.*)?\/pp_([\d]+)\.html/g;static REGEX_BANG_GOOD_PRODUCT_ID=/^(?:\/.*)?\/(?:.*)?\-p\-([\d]+)\.html/g;static REGEX_BANG_GOOD_US_PRODUCT_ID=/^(?:\/.*)?\/(?:.*)?\-wp\-Usa\-([\d]+)\.html/g;static REGEX_BANG_GOOD_EU_PRODUCT_ID=/^(?:\/.*)?\/(?:.*)?\-wp\-Eu\-([\d]+)\.html/g;static REGEX_LIGHT_IN_THE_BOX_PRODUCT_ID=/^(?:\/.*)?\/(?:.*)?_p([\d]+)\.html/g;static REGEX_TOM_TOP_PRODUCT_ID=/^(?:\/.*)?\/p\-(.+)\.html/g;static CHECK_LETYSHOPS=/letyshops\.[\w]+/gim;static CHECK_LETYSHOPS_VIEW=/letyshops\.[\w]+\/[\w-_\/]*[view|short\-link]\/(\d+)/gim;static CHECK_LETYSHOPS_GO=/letyshops\.[\w]+\/[\w-_\/]*[view|short\-link]\/(\d+)\/go/gim;static CHECK_LETYSHOPS_VIEW_OR_GO=/letyshops\.[\D]+\/*[view|short\-link|shops]\/(\d+)/gim;static REG_URL=/(https?:\/\/[^\s]+)/g;static ARRAY_MERCHANTS_PRICE=[13366481,17292915,17289199,15131011,15131239,13433222,13083906,15223074];static ARRAY_MERCHANTS_PRICE_SELLER=[13366481,17292915,17289199];static COMMUNICATION_EVENT_NAME_PREFIX="LETYSHOPS_";static USER=`${S.COMMUNICATION_EVENT_NAME_PREFIX}USER`;static LOGIN_TOKEN=`${S.COMMUNICATION_EVENT_NAME_PREFIX}LOGIN_TOKEN`;static POPUP_FIRST_OPENING_TOKEN=`${S.COMMUNICATION_EVENT_NAME_PREFIX}POPUP_FIRST_OPENING_TOKEN`;static CASHBACK_ACTIVATE=`${S.COMMUNICATION_EVENT_NAME_PREFIX}CASHBACK_ACTIVATE`;static PROMO_ACTIVATE=`${S.COMMUNICATION_EVENT_NAME_PREFIX}PROMO_ACTIVATE`;static OFFLINE_LIKES=`${S.COMMUNICATION_EVENT_NAME_PREFIX}OFFLINE_LIKES`;static MERCHANT_SUPPRESSED=`${S.COMMUNICATION_EVENT_NAME_PREFIX}MERCHANT_SUPPRESSED`;static POPUP_MERCHANTS_UPDATE=`${S.COMMUNICATION_EVENT_NAME_PREFIX}POPUP_MERCHANTS_UPDATE`;static USER_APPLIED_LETY_CODES=`${S.COMMUNICATION_EVENT_NAME_PREFIX}USER_APPLIED_LETY_CODES`;static USER_REFRESH_PRODUCT_MONITORING_LIST=`${S.COMMUNICATION_EVENT_NAME_PREFIX}USER_REFRESH_PRODUCT_MONITORING_LIST`;static USER_APPLIED_AUTOPROMO=`${S.COMMUNICATION_EVENT_NAME_PREFIX}USER_APPLIED_AUTOPROMO`;static HISIORY_LENGTH=10;static GLOBAL_HISTORY_LENGTH=100;static TAB_STATE_3RD_PARTY=2;static TAB_STATE_INTERSTITIAL_REDIRECT=3;static THIRD_PARTY_LINKS=["event.2parale.ro","www.awin1.com","partners.webmasterplan.com","web.epartner.es","clic.reussissonsensemble.fr","being.successfultogether.co.uk","anrdoezrs.net","t.dgm-au.com","google.com/aclk?sa","pepperjamnetwork.com","aos.prf.hn","ad.zanox.com","rover.ebay.com","track.commissionfactory.com.au","clk.tradedoubler.com","tkqlhce.com","partnerprogramma.bol.com","tc.tradetracker.net","tr.rdrtr.com","lead-analytics.nl","partners.adtriplex.com","action.metaffiliation.com","smart4ads.com","gr.linkwi.se","tracking.publicidees.com","fls.doubleclick.net","gan.doubleclick.net","click.linksynergy.com","v2.afilio.com.br","jdoqocy.com","send.onenetworkdirect.net",".7eer.net",".evyy.net",".ojrq.net","affiliate.buy.com","affiliate.rakuten.com","affiliates.abebooks.com","affiliates.babiesrus.com","affiliates.toysrus.com","afsrc=1","aos.prf.hn","commission-junction.com","dpbolvw.net","dpbolvw.net","google.com/aclk","gopjn.com","goto.orientaltrading.com","goto.target.com","goto.target.com/c/","kqzyfj.com","partners.hotwire.com","pepperjamnetwork.com","pjatr.com","pjtra.com","pntra.com","pntrs.com","prf.hn","qksrv.net","shareasale.com","t.dgm-au.com","www.linkconnector.com","apytrc.com","ams.apypx.com"];static gaPrefix="/_extension/";static gaPageShops=`${S.gaPrefix}shops/`;static gaPagePopup=`${S.gaPrefix}popup/`;static gaPageSales=`${S.gaPrefix}sales/`;static gaPageFriends=`${S.gaPrefix}friends/`;static gaPageHistory=`${S.gaPrefix}history/`;static gaPageSettings=`${S.gaPrefix}settings/`;static gaDisabledShop=`${S.gaPagePopup}no-extension/`;static gaLetyClub=`${S.gaPagePopup}letyclub/`;static gaPrefixMonitor="_monitor/";static gaPrefixSimilar="_recommendation/";static gaPageSimilarShow=`${S.gaPrefixSimilar}show/`;static gaPrefixAdvices="_partner_link/";static gaPageAdvices=`${S.gaPrefixAdvices}show/`;static gaPrefixSmartToolBar="_smart-tool-bar/";static gaPrefixProductMonitoring="_product-monitoring/";static gaPrefixSellerAnalysis="_seller-analysis/";static gaPrefixSimilarItems="_similar-items/";static gaPrefixViewingHistory="_viewing-history/";static aliexpressID=13366481;static aliexpressWWID=17292915;static PERMISSIONS_SEGMENTS={similar:["web.ex_726_similar_test_5"],simpleSimilar:["web.SS-test-group-5-teaser"],extTestQ1:["web.test_ext_q1"],bestDeals:["web.best_deals"]};static NOTIFICATION_RECIPIENT="extension";static NO_ALI_AFFILIATE_COUNTRY=["RU","AM","AZ","BY","GE","KG","KZ","TJ","TM","UZ","MD"];static BOOKING_ID=13810496;static DEFAULT_USER_SETTINGS={showPrice:!0,showUserNotifications:!0,showPromoNotifications:!0,showCashbackHints:!0,showSimilarListInjection:!0,showSimpleSimilarInjection:!0,allowTabUrlCollect:!0,allowAnalyticsCollect:!0};static DEFAULT_FIREFOX_USER_SETTINGS={showPrice:!1,showUserNotifications:!0,showPromoNotifications:!0,showCashbackHints:!0,showSimilarListInjection:!1,showSimpleSimilarInjection:!0,allowTabUrlCollect:!1,allowAnalyticsCollect:!1};static SHOW_PROMO_NOTIFY_INTERVAL=12e4;static SHOW_USER_NOTIFY_INTERVAL=3e5;static UPDATE_INTERVAL_ACTIVATE=36e5;static UPDATE_INTERVAL_USER=6e4;static UPDATE_INTERVAL_USER_NOTIFICATION=36e5;static UPDATE_LOG_REQUEST=864e5;static INTERVAL_PUSH_LOG_REQUEST=3e5;static INTERVAL_PUSH_LOG=6e4;static UPDATE_INTERVAL_INFO_HISTORY_PRICE=6e5;static INTERVAL_SHOW_NOTIFICATION_MARKET=36e5;static PERIOD_DISABLED_FOR_HOUR=36e5;static SIMPLE_SIMILAR_VIEWS_SETTINGS={frequency_view_page:10,frequency_view_time:3e5};static PERIOD_DISABLED_BAR=36e5;static SIMILAR_MINIMIZED_TYPE_VIEW_PERIOD=36e5;static CLEAR_CACHE_INTERVAL=18e5;static HIDE_NOTIFICATION_TIME=9e5;static DEFAULT_UPDATE_INTERVAL_MERCHANT=18e5;static CURRENCY_LIST={PERCENT:"%",RUB:"\u0440\u0443\u0431.",RUR:"\u0440\u0443\u0431.",USD:"$",EUR:"\u20ac",UAH:"\u0433\u0440\u043d.",KZT:"\u0442\u0433.",BYR:"Br",BYN:"Br",PLN:"z\u0142",GBP:"\xa3",MXN:"MXN",ARS:"ARS",CLP:"CLP",COP:"COP",BRL:"R$",PEN:"S/",CAD:"C$",AUD:"A$",NZD:"NZ$",ZAR:"R",INR:"Rs",PHP:"\u20b1",AED:"Dhs",SGD:"S$"};static GLOBAL_CACHE_PREFIX="global"}let gd=(()=>{class t{static get(e,i){chrome.storage.local.get(e,r=>{i&&i(r[e])})}static syncGet(e){return new Promise(i=>{chrome.storage.local.get(e,r=>i("string"==typeof e?r[e]:r))})}static set(e,i){return C(function*(){yield chrome.storage.local.set({[e]:i})})()}static remove(e){return C(function*(){yield chrome.storage.local.remove(e)})()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Qe=(()=>{class t{static MAX_CACHE_TIME_LIVING=432e5;static createKey(e,i){return`${e}.${i}`}createExpiredTime(e){return null==e?this.now+t.MAX_CACHE_TIME_LIVING:this.now+e}notExpiredTimeCheck(e){return void 0===e||e===1/0||e!==1/0&&isFinite(e)&&e>this.now&&e<this.now+t.MAX_CACHE_TIME_LIVING}get now(){return Date.now()}get(e,i){var r=this;return C(function*(){const o=t.createKey(e,i),s=yield gd.syncGet([o,i]);if(!r.isEmpty(s[o])||!r.isEmpty(s[i])){if(!r.isEmpty(s[o])){const{payload:a,expired:c}=s[o];return!r.isEmpty(a)&&r.notExpiredTimeCheck(c)?a:void(yield r.remove(e,i))}return yield r.moveToPrefixKeyStructure(e,i,s[i]),s[i]}})()}set(e,i,r,o){var s=this;return C(function*(){yield gd.set(t.createKey(e,i),{payload:o,expired:s.createExpiredTime(r)})})()}remove(e,i){return C(function*(){yield gd.remove(t.createKey(e,i))})()}moveToPrefixKeyStructure(e,i,r){var o=this;return C(function*(){yield o.set(e,i,1/0,r),yield gd.remove(i)})()}isEmpty(e){return null==e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),re=(()=>{class t{cacheService;static UPDATE_INTERVAL_MERCHANT="UPDATE_INTERVAL_MERCHANT";static UPDATE_INTERVAL_OFFERS="UPDATE_INTERVAL_OFFERS";static UPDATE_INTERVAL_CODES="UPDATE_INTERVAL_CODES";static UPDATE_INTERVAL_SETTINGS="UPDATE_INTERVAL_SETTINGS";static UPDATE_INTERVAL_URLS="UPDATE_INTERVAL_URLS";static PROMO_NOTIFY_PERIOD="PROMO_NOTIFY_PERIOD";static R_LIST_ADD_PERIOD="R_LIST_ADD_PERIOD";static USER_NOTIFY_INTERVAL="USER_NOTIFY_INTERVAL";static INTERVAL_COUNT_USER_CASHBACK_RATES="INTERVAL_COUNT_USER_CASHBACK_RATES";static INTERVAL_COUNT_CLUB_OFFERS="INTERVAL_COUNT_CLUB_OFFERS";static INTERVAL_COUNT_SETTINGS_BY_SEGMENT="INTERVAL_COUNT_SETTINGS_BY_SEGMENT";static UPDATE_INTERVAL_USER_FORCE="UPDATE_INTERVAL_USER_FORCE";static UPDATE_INTERVAL_AUTOPROMO="UPDATE_INTERVAL_AUTOPROMO";static INTERVAL_COUNT_SETTINGS_SIMPLE_SIMILAR="INTERVAL_COUNT_SETTINGS_SIMPLE_SIMILAR";static INTERVAL_SHOPPING_TRIP_ID="INTERVAL_SHOPPING_TRIP_ID";static UPDATE_INTERVAL_USER_PARTNER_SETTINGS="UPDATE_INTERVAL_USER_PARTNER_SETTINGS";static UPDATE_INTERVAL_INFO_SIMILAR="UPDATE_INTERVAL_INFO_SIMILAR";static GREEN_LIGHT_BOOKING_END_TIME="GREEN_LIGHT_BOOKING_END_TIME";configKey="config";constructor(e){this.cacheService=e}parameters={UPDATE_INTERVAL_MERCHANT:72e5,UPDATE_INTERVAL_OFFERS:9e5,UPDATE_INTERVAL_CODES:72e5,UPDATE_INTERVAL_SETTINGS:72e5,UPDATE_INTERVAL_URLS:72e5,PROMO_NOTIFY_PERIOD:36e5,R_LIST_ADD_PERIOD:432e5,USER_NOTIFY_INTERVAL:3e5,INTERVAL_COUNT_USER_CASHBACK_RATES:3e5,INTERVAL_COUNT_CLUB_OFFERS:18e6,INTERVAL_COUNT_SETTINGS_BY_SEGMENT:72e5,UPDATE_INTERVAL_USER_FORCE:72e5,INTERVAL_COUNT_SETTINGS_SIMPLE_SIMILAR:72e5,UPDATE_INTERVAL_AUTOPROMO:36e5,INTERVAL_SHOPPING_TRIP_ID:36e5,UPDATE_INTERVAL_USER_PARTNER_SETTINGS:216e5,UPDATE_INTERVAL_INFO_SIMILAR:12e4,GREEN_LIGHT_BOOKING_END_TIME:1635724799e3};getParameter(e){var i=this;return C(function*(){const r=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,i.configKey);return void 0!==r&&Object.keys(r).length===Object.keys(i.parameters).length&&r[e]?i.parameters=r:yield i.cacheService.set(S.GLOBAL_CACHE_PREFIX,i.configKey,1/0,i.parameters),i.parameters[e]})()}updateConfig(e){var i=this;this.cacheService.get(S.GLOBAL_CACHE_PREFIX,this.configKey).then(function(){var r=C(function*(o){for(const s of Object.keys(e))o[s]=e[s];yield i.cacheService.set(S.GLOBAL_CACHE_PREFIX,i.configKey,1/0,o)});return function(o){return r.apply(this,arguments)}}())}static \u0275fac=function(i){return new(i||t)(w(Qe))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class yU extends Bn{constructor(n,e){super()}schedule(n,e=0){return this}}const md={setInterval(t,n,...e){const{delegate:i}=md;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=md;return(n?.clearInterval||clearInterval)(t)},delegate:void 0},xm={now:()=>(xm.delegate||Date).now(),delegate:void 0};class vc{constructor(n,e=vc.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}vc.now=xm.now;const Dm=new class CU extends vc{constructor(n,e=vc.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class bU extends yU{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,i=0){return md.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&md.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,hi(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),SU=Dm;function T1(t){return t instanceof Date&&!isNaN(t)}function _d(...t){return function TU(){return function wU(t=1/0){return ud(al,t)}(1)}()(to(t,vm(t)))}function x1(...t){const n=vm(t);return Ft((e,i)=>{(n?_d(t,e,n):_d(t,e)).subscribe(i)})}const D1=new Tt(t=>t.complete());function Ns(t){return t<=0?()=>D1:Ft((n,e)=>{let i=0;n.subscribe(Bt(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}class PU extends lr{constructor(n=1/0,e=1/0,i=xm){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(n),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!n.closed;s+=i?1:2)n.next(o[s]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*n;if(n<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=e.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}function Pm(t,n,...e){if(!0===n)return void t();if(!1===n)return;const i=new Zs({next:()=>{i.unsubscribe(),t()}});return pn(n(...e)).subscribe(i)}function vd(t,n,e){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:n=1/0,refCount:r=!1,scheduler:e}=t):i=t??1/0,function MU(t={}){const{connector:n=(()=>new lr),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,u=d=!1},p=()=>{const g=s;h(),g?.unsubscribe()};return Ft((g,m)=>{l++,!d&&!u&&f();const v=c=c??n();m.add(()=>{l--,0===l&&!d&&!u&&(a=Pm(p,r))}),v.subscribe(m),!s&&l>0&&(s=new Zs({next:_=>v.next(_),error:_=>{d=!0,f(),a=Pm(h,e,_),v.error(_)},complete:()=>{u=!0,f(),a=Pm(h,i),v.complete()}}),pn(g).subscribe(s))})(o)}}({connector:()=>new PU(i,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}class b{static LETYSHOPS="LETYSHOPS_";static BROWSER="LETYSHOPS_BROWSER_";static TAB_CHANGED=`${b.BROWSER}TAB_CHANGED`;static TAB_CHANGED_URL=`${b.BROWSER}TAB_CHANGED_URL`;static TAB_CLOSED=`${b.BROWSER}TAB_CLOSED`;static BEFORE_NAVIGATE=`${b.BROWSER}BEFORE_NAVIGATE`;static DOCUMENT_COMPLETE=`${b.BROWSER}DOCUMENT_COMPLETE`;static SEND_THANKS_PAGE_PARAMETERS=`${b.LETYSHOPS}SEND_THANKS_PAGE_PARAMETERS`;static GET_THANKS_PAGE_PARAMETERS=`${b.LETYSHOPS}GET_THANKS_PAGE_PARAMETERS`;static FETCH_SIMPLE_SIMILAR_AUTOPROMO=`${b.LETYSHOPS}FETCH_SIMPLE_SIMILAR_AUTOPROMO`;static NOTIFICATION_GET_PRICE_SIMILAR_PRODUCTS=`${b.LETYSHOPS}NOTIFICATION_GET_PRICE_SIMILAR_PRODUCTS`;static GET_TOKEN_COOKIES=`${b.LETYSHOPS}GET_TOKEN_COOKIES`;static SEND_LETYTOOL_EVENT=`${b.LETYSHOPS}SEND_LETYTOOL_EVENT`;static CHECK_ALIEXPRESS_AFF_PRODUCT=`${b.LETYSHOPS}CHECK_ALIEXPRESS_AFF_PRODUCT`;static SEND_GOOGLE_ANALYTICS=`${b.LETYSHOPS}SEND_GOOGLE_ANALYTICS`;static SEND_GA_CID=`${b.LETYSHOPS}SEND_GA_CID`;static SEND_TO_GOOGLE_FORM=`${b.LETYSHOPS}SEND_TO_GOOGLE_FORM`;static SEND_GA_CID_AND_SID=`${b.LETYSHOPS}SEND_GA_CID_AND_SID`;static REFRESH_ALL=`${b.LETYSHOPS}REFRESH_ALL`;static GET_OFFERS_WITH_AUTOPROMO_AND_CASHBACK=`${b.LETYSHOPS}GET_OFFERS_WITH_AUTOPROMO_AND_CASHBACK`;static GET_PAGE_COOKIES=`${b.LETYSHOPS}GET_PAGE_COOKIES`;static SENT_LOG_SHOPPING_TRIP=`${b.LETYSHOPS}SENT_LOG_SHOPPING_TRIP`;static IS_BROWSER=`${b.LETYSHOPS}IS_BROWSER`;static GET_GLOBAL_SETTINGS=`${b.LETYSHOPS}GET_GLOBAL_SETTINGS`;static GET_DD_LIST=`${b.LETYSHOPS}GET_DD_LIST`;static GET_CURRENT_CONTENT_TAB=`${b.LETYSHOPS}GET_CURRENT_CONTENT_TAB`;static UPDATE_GLOBAL_HISTORY=`${b.LETYSHOPS}UPDATE_GLOBAL_HISTORY`;static GET_USER_PARTNER_DATA=`${b.LETYSHOPS}GET_USER_PARTNER_DATA`;static CLEAR_USER_PARTNER_DATA=`${b.LETYSHOPS}CLEAR_USER_PARTNER_DATA`;static USER_WAS_UPDATED=`${b.LETYSHOPS}USER_WAS_UPDATED`;static UPDATE_LETY_CODES=`${b.LETYSHOPS}UPDATE_LETY_CODES`;static USER_UPDATE=`${b.LETYSHOPS}USER_UPDATE`;static UPDATE_USER_FORCE=`${b.LETYSHOPS}UPDATE_USER_FORCE`;static ON_USER_LOGIN=`${b.LETYSHOPS}ON_USER_LOGIN`;static ON_USER_LOGOUT=`${b.LETYSHOPS}ON_USER_LOGOUT`;static LOAD_USER_LANGUAGE=`${b.LETYSHOPS}LOAD_USER_LANGUAGE`;static PUSH_USER_REVIEWED_NOTIFICATIONS=`${b.LETYSHOPS}PUSH_USER_REVIEWED_NOTIFICATIONS`;static SEND_USER_NOTIFICATION_LOGS=`${b.LETYSHOPS}SEND_USER_NOTIFICATION_LOGS`;static GET_USER_SETTINGS=`${b.LETYSHOPS}GET_USER_SETTINGS`;static UPDATE_USER_SETTINGS=`${b.LETYSHOPS}UPDATE_USER_SETTINGS`;static CASHBACK_DEACTIVATE=`${b.LETYSHOPS}CASHBACK_DEACTIVATE`;static PRICE_MONITORING_GET_DATA=`${b.LETYSHOPS}PRICE_MONITORING_GET_DATA`;static PRICE_MONITORING_GET_CHART_DATA=`${b.LETYSHOPS}PRICE_MONITORING_GET_CHART_DATA`;static PRICE_MONITORING_GET_SIMILAR_PRODUCTS=`${b.LETYSHOPS}PRICE_MONITORING_GET_SIMILAR_PRODUCTS`;static PRICE_MONITORING_GET_PRICE_SELLER_PAGE_DATA=`${b.LETYSHOPS}PRICE_MONITORING_GET_PRICE_SELLER_PAGE_DATA`;static PRICE_MONITORING_CLEAR_HISTORY=`${b.LETYSHOPS}PRICE_MONITORING_CLEAR_HISTORY`;static UPDATE_FAVORITE_STATUS_FROM_BG=`${b.LETYSHOPS}UPDATE_FAVORITE_STATUS_FROM_BG`;static UPDATE_FAVORITE_STATUS=`${b.LETYSHOPS}UPDATE_FAVORITE_STATUS`;static GET_ALL_MERCHANTS_AND_AUTOPROMO_POPUP=`${b.LETYSHOPS}GET_ALL_MERCHANTS_AND_AUTOPROMO_POPUP`;static GET_VALID_AUTOPROMO_OFFERS=`${b.LETYSHOPS}GET_VALID_AUTOPROMO_OFFERS`;static GET_AUTOPROMO_OFFERS=`${b.LETYSHOPS}GET_AUTOPROMO_OFFERS`;static UPDATE_AUTOPROMO_OFFERS=`${b.LETYSHOPS}UPDATE_AUTOPROMO_OFFERS`;static GET_API_CLIENT_URLS_STATE=`${b.LETYSHOPS}GET_API_CLIENT_URLS_STATE`;static CHECK_MERCHANT_COOKIES=`${b.LETYSHOPS}CHECK_MERCHANT_COOKIES`;static SET_MERCHANT_COOKIES=`${b.LETYSHOPS}SET_MERCHANT_COOKIES`;static CLEAR_COOKIES=`${b.LETYSHOPS}CLEAR_COOKIES`;static GET_BANNERS_SHOPS=`${b.LETYSHOPS}GET_BANNERS_SHOPS`;static GET_BANNERS_SHOP_ID=`${b.LETYSHOPS}GET_BANNERS_SHOP_ID`;static NOTIFICATION_GET_SIMILAR_LIST=`${b.LETYSHOPS}NOTIFICATION_GET_SIMILAR_LIST`;static TAB_WAS_CHANGED=`${b.LETYSHOPS}TAB_WAS_CHANGED`;static BUTTON_UPDATE=`${b.LETYSHOPS}BUTTON_UPDATE`;static SET_NOTIFICATIONS_POPUP=`${b.LETYSHOPS}SET_NOTIFICATIONS_POPUP`;static SEND_USER_SETTINGS=`${b.LETYSHOPS}SEND_USER_SETTINGS`;static NOTIFICATION_DISMISS=`${b.LETYSHOPS}NOTIFICATION_DISMISS`;static NOTIFICATION_CASHBACK_ACTIVATE=`${b.LETYSHOPS}NOTIFICATION_CASHBACK_ACTIVATE`;static NOTIFICATION_GET_INFO=`${b.LETYSHOPS}NOTIFICATION_GET_INFO`;static USER_NOTIFICATION_DISMISS=`${b.LETYSHOPS}USER_NOTIFICATION_DISMISS`;static SAW_REWRITE=`${b.LETYSHOPS}SAW_REWRITE`;static UPDATE_MERCHANTS_RATES=`${b.LETYSHOPS}UPDATE_MERCHANTS_RATES`;static GET_NATIVE_USER_AGENT=`${b.LETYSHOPS}GET_NATIVE_USER_AGENT`;static GET_MERCHANT_BY_DOMAIN=`${b.LETYSHOPS}GET_MERCHANT_BY_DOMAIN`;static GET_INFO_USER=`${b.LETYSHOPS}GET_INFO_USER`;static CHECK_USER_IN_SEGMENT=`${b.LETYSHOPS}CHECK_USER_IN_SEGMENT`;static UPDATE_MERCHANTS_HOT_PRODUCTS=`${b.LETYSHOPS}UPDATE_MERCHANTS_HOT_PRODUCTS`;static CLOSE_ALL_NOTIFICATION=`${b.LETYSHOPS}CLOSE_ALL_NOTIFICATION`;static NOTIFICATION_RENDER_LETYSHOPS_BAR_ALI=`${b.LETYSHOPS}NOTIFICATION_RENDER_LETYSHOPS_BAR_ALI`;static GET_EXTENSION_INFO=`${b.LETYSHOPS}GET_EXTENSION_INFO`;static SEND_EXTENSION_INFO=`${b.LETYSHOPS}SEND_EXTENSION_INFO`;static GET_SIMPLE_SIMILAR_DOMAIN_DATA=`${b.LETYSHOPS}GET_SIMPLE_SIMILAR_DOMAIN_DATA`;static SEND_PAGE_INFO=`${b.LETYSHOPS}SEND_PAGE_INFO`;static CHECK_PAGE=`${b.LETYSHOPS}CHECK_PAGE`;static OPEN_POPUP=`${b.LETYSHOPS}OPEN_POPUP`;static MERCHANT_WAS_RESET=`${b.LETYSHOPS}MERCHANT_WAS_RESET`;static PRODUCT_MONITORING_GET_COUNT_ITEMS=`${b.LETYSHOPS}PRODUCT_MONITORING_GET_COUNT_ITEMS`;static PRODUCT_MONITORING_CREATE_ITEM=`${b.LETYSHOPS}PRODUCT_MONITORING_CREATE_ITEM`;static PRODUCT_MONITORING_REMOVE_ITEM=`${b.LETYSHOPS}PRODUCT_MONITORING_REMOVE_ITEM`;static PRODUCT_MONITORING_UPDATE_ITEM=`${b.LETYSHOPS}PRODUCT_MONITORING_UPDATE_ITEM`;static PRODUCT_MONITORING_GET_ITEM_BY_TARGET_URL_OR_URL=`${b.LETYSHOPS}PRODUCT_MONITORING_GET_ITEM_BY_TARGET_URL`;static PRODUCT_MONITORING_GET_LIST=`${b.LETYSHOPS}PRODUCT_MONITORING_GET_LIST`;static PRODUCT_MONITORING_REFRESH_LIST=`${b.LETYSHOPS}PRODUCT_MONITORING_REFRESH_LIST`;static GET_TARGET_INFO=`${b.LETYSHOPS}GET_TARGET_INFO`;static GET_PRICE_HISTORY=`${b.LETYSHOPS}GET_PRICE_HISTORY`;static ALLOWED_PRICE_DROP_NOTIFICATION=`${b.LETYSHOPS}ALLOWED_PRICE_DROP_NOTIFICATION`;static SELLER_INFO_GET_INFO=`${b.LETYSHOPS}SELLER_INFO_GET_INFO`;static VIEWING_HISTORY_GET_LIST=`${b.LETYSHOPS}VIEWING_HISTORY_GET_LIST`;static VIEWING_HISTORY_CLEAR_LIST=`${b.LETYSHOPS}VIEWING_HISTORY_CLEAR_LIST`;static SIMILAR_ITEMS_GET_LIST=`${b.LETYSHOPS}SIMILAR_ITEMS_GET_LIST`;static SIMILAR_ITEMS_GET_ALI_LIST=`${b.LETYSHOPS}GET_ALI_SIMILAR_LIST`;static CHECK_IS_FEATURE_ENABLE=`${b.LETYSHOPS}CHECK_IS_FEATURE_ENABLE`;static GET_POPUP_INIT_DATA=`${b.LETYSHOPS}GET_POPUP_INIT_DATA`;static SET_CURRENT_POPUP_TAB=`${b.LETYSHOPS}SET_CURRENT_POPUP_TAB`;static TRIGGER_FROM_POPUP_CASHBACK_ACTIVATE=`${b.LETYSHOPS}TRIGGER_FROM_POPUP_CASHBACK_ACTIVATE`;static WAKE_UP=`${b.LETYSHOPS}WAKE_UP`;static GET_PROMO_NOTIFICATIONS=`${b.LETYSHOPS}GET_PROMO_NOTIFICATIONS`;callStack=[];runtime=chrome.runtime;tabsManager=chrome.tabs;subscription;swReady=new lr;initEventListener(){this.onMessageListener()}onMessageListener(){var n=this;this.runtime.onMessage.addListener((e,i,r)=>(C(function*(){const o=n.callStack.filter(({event:s})=>s===e.name);for(const{handler:s}of o)e.url=i.tab?.url??i.url,e.tab=i.tab,e.tabId=i.tab?.id,r(yield s(e))})(),!0))}attachEvent(n,e){this.callStack.push({event:n,handler:e})}detachEvent(n){this.callStack=this.callStack.filter(({event:e})=>e!==n)}awakeServiceWorker(){return this.subscription||(this.subscription=function IU(t=0,n=Dm){return t<0&&(t=0),function EU(t=0,n,e=SU){let i=-1;return null!=n&&($w(n)?e=n:i=n),new Tt(r=>{let o=T1(t)?+t-e.now():t;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(t,t,n)}(200).pipe(x1(0),function xU(t){return Ft((n,e)=>{pn(t).subscribe(Bt(e,()=>e.complete(),Cf)),!e.closed&&n.subscribe(e)})}(this.swReady),Ns(8),vd(),zn(()=>to(this.awakeRequest())),io(n=>n&&this.swReady.next(!0)))),this.subscription}awakeRequest(){var n=this;return C(function*(){return new Promise(e=>{n.runtime.sendMessage({action:"event",name:b.WAKE_UP},i=>e(i))})})()}static \u0275fac=function(e){return new(e||b)};static \u0275prov=U({token:b,factory:b.\u0275fac,providedIn:"root"})}let OU=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>e.initEventListener(),multi:!0,deps:[b]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({})}return t})(),AU=(()=>{class t extends b{initEventListener(){this.onMessageListener(),this.beforeNavigateListener(),this.tabChangedListener(),this.documentCompleteListener(),this.tabCloseListener()}fireEvent(e,i={}){return new Promise(r=>{const o={action:"event",name:e,data:i.data?i.data:i},{tabId:s,extensionId:a}=i;let{allTabs:c=!1}=i;i.allTabs||(c=-4===s),a?this.runtime.sendMessage(a,o,l=>r(l)):c?this.tabsManager.query({},l=>{for(const u of l)this.tabsManager.sendMessage(u.id,o)}):s?this.tabsManager.sendMessage(s,o,l=>r(l)):this.tabsManager.query({active:!0},l=>{l&&l[0]&&l[0].id&&!l[0].url.startsWith("chrome://")&&this.tabsManager.sendMessage(l[0].id,o)}),this.eventHandler(e,o,r)})}eventHandler(e,i,r){const o=this.callStack.filter(({event:s})=>s===e);for(const{handler:s}of o)r?r(s(i)):s(i)}fireFromCallStack(e){if(e){const i={action:"event",data:{name:b.TAB_CHANGED,tabId:e.id,url:e.url}};e.url&&0!==e.url.indexOf("chrome://")&&chrome.tabs.sendMessage(e.id,i),this.eventHandler(b.TAB_CHANGED,i.data)}}beforeNavigateListener(){chrome.webRequest.onBeforeRequest.addListener(e=>{this.eventHandler(b.BEFORE_NAVIGATE,{name:b.BEFORE_NAVIGATE,tabId:e.tabId,url:e.url})},{urls:["<all_urls>"],types:["main_frame"]})}tabChangedListener(){this.tabsManager.onActivated.addListener(e=>{setTimeout(()=>{chrome.tabs.get(e.tabId,i=>{chrome.runtime.lastError||this.fireFromCallStack(i)})},250)}),chrome.windows.onFocusChanged.addListener(e=>{setTimeout(()=>{e!==chrome.windows.WINDOW_ID_NONE&&chrome.tabs.query({windowId:e,active:!0},i=>{chrome.runtime.lastError||this.fireFromCallStack(i.pop())})},250)})}documentCompleteListener(){this.tabsManager.onUpdated.addListener((e,i,r)=>{"loading"!==i.status&&"complete"===i.status&&this.tabsManager.sendMessage(e,{action:"event",name:b.DOCUMENT_COMPLETE,data:{name:b.DOCUMENT_COMPLETE,tabId:e,url:i.url?i.url:r.url}})})}tabCloseListener(){const e=[];this.tabsManager.onUpdated.addListener((i,r)=>{r.url&&(e[i]={},e[i].url=r.url)}),this.tabsManager.onRemoved.addListener(i=>{e.splice(i,1),this.eventHandler(b.TAB_CLOSED,{name:b.TAB_CLOSED,tabId:i,url:e[i]&&e[i].url?e[i].url:""})})}static \u0275fac=(()=>{let e;return function(r){return(e||(e=_a(t)))(r||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class V{configService;eventService;cacheService;httpClient;static domain="letyshops.com";static _api_eapi="https://eapi.letyshops.com";static _api="https://eapi.letyshops.com/eapi";static _root=`https://${V.domain}`;static _club="https://club.letyshops.com";static _help="https://help.letyshops.com";static _tools="https://tools.letyshops.com";static cookieKey="uid";prefix=S.GLOBAL_CACHE_PREFIX;settingsKey="settings";urlsKey="urls.settings";updateSettingsInterval;updateUrlsInterval;_link;_cdn;constructor(n,e,i,r){this.configService=n,this.eventService=e,this.cacheService=i,this.httpClient=r}static get mainDomain(){return this.domain}init(){var n=this;return C(function*(){yield n.updateUrlsApi(),yield n.initSettings(),yield n.attachListeners(),2===chrome.runtime.getManifest().manifest_version&&(yield n.reInitUrlsWithInTime(),yield n.reInitSettingsWithInTime())})()}reInitUrlsWithInTime(){var n=this;return C(function*(){clearInterval(n.updateUrlsInterval);const e=yield n.configService.getParameter(re.UPDATE_INTERVAL_URLS);n.updateUrlsInterval=setInterval(C(function*(){yield n.updateUrlsApi()}),e)})()}reInitSettingsWithInTime(){var n=this;return C(function*(){clearInterval(n.updateSettingsInterval);const e=yield n.configService.getParameter(re.UPDATE_INTERVAL_SETTINGS);n.updateSettingsInterval=setInterval(C(function*(){yield n.initSettings()}),e)})()}attachListeners(){this.eventService.attachEvent(b.GET_GLOBAL_SETTINGS,()=>this.getSettings())}updateUrlsApi(){var n=this;return C(function*(){let e=yield n.cacheService.get(n.prefix,n.urlsKey);if(!e){e=yield n.fetchUrls();const i=yield n.configService.getParameter(re.UPDATE_INTERVAL_URLS);n.cacheService.set(n.prefix,n.urlsKey,i,e)}e&&(e.siteUrl&&(V.domain=new URL(e.siteUrl).hostname,V._root=e.siteUrl,n._link=e.siteUrl),e.apiUrl&&(V._api=`${e.apiUrl}/eapi`),e.apiUrl&&e.cdnUrl&&(n._cdn=`${e.cdnUrl}/eapi`),e.clubUrl&&(V._club=e.clubUrl),e.helpUrl&&(V._help=e.helpUrl),e.toolsUrl&&(V._tools=e.toolsUrl))})()}fetchUrls(){var n=this;return C(function*(){return le(n.httpClient.get(`${V._api}/urls`,{withCredentials:!0})).then(e=>e).catch(e=>console.error(e))})()}initSettings(){var n=this;return C(function*(){const e=yield n.getSettings();if(e){if(e.updateIntervals||e.updateEndTimeFeatures){const i={};e.updateIntervals&&Object.keys(e.updateIntervals).forEach((r,o)=>{switch(r){case"shops":i[re.UPDATE_INTERVAL_MERCHANT]=Object.values(e.updateIntervals)[o];break;case"lety-codes":i[re.UPDATE_INTERVAL_CODES]=Object.values(e.updateIntervals)[o];break;case"settings":i[re.UPDATE_INTERVAL_SETTINGS]=Object.values(e.updateIntervals)[o];break;case"urls":i[re.UPDATE_INTERVAL_URLS]=Object.values(e.updateIntervals)[o];break;case"promo-notifications":i[re.PROMO_NOTIFY_PERIOD]=Object.values(e.updateIntervals)[o];break;case"dd-list":i[re.R_LIST_ADD_PERIOD]=Object.values(e.updateIntervals)[o];break;case"user_notifications":i[re.USER_NOTIFY_INTERVAL]=Object.values(e.updateIntervals)[o];break;case"user_cashback_rates":i[re.INTERVAL_COUNT_USER_CASHBACK_RATES]=Object.values(e.updateIntervals)[o];break;case"segment_settings":i[re.INTERVAL_COUNT_SETTINGS_BY_SEGMENT]=Object.values(e.updateIntervals)[o];break;case"user_update_force":i[re.UPDATE_INTERVAL_USER_FORCE]=Object.values(e.updateIntervals)[o];break;case"simple_similar_settings":i[re.INTERVAL_COUNT_SETTINGS_SIMPLE_SIMILAR]=Object.values(e.updateIntervals)[o];break;case"user_autopromo_update":i[re.UPDATE_INTERVAL_AUTOPROMO]=Object.values(e.updateIntervals)[o];break;case"interval_shopping_trip_id":i[re.INTERVAL_SHOPPING_TRIP_ID]=Object.values(e.updateIntervals)[o];break;case"update_interval_info_similar":i[re.UPDATE_INTERVAL_INFO_SIMILAR]=Object.values(e.updateIntervals)[o]}}),e.updateEndTimeFeatures&&Object.keys(e.updateEndTimeFeatures).forEach((r,o)=>{"greenLightBookingEndTime"===r&&(i[re.GREEN_LIGHT_BOOKING_END_TIME]=Object.values(e.updateEndTimeFeatures)[o])}),n.configService.updateConfig(i)}e.autoUpdate.shops&&n.eventService.fireEvent(b.UPDATE_MERCHANTS_RATES,{})}})()}getSettings(){var n=this;return C(function*(){let e=yield n.cacheService.get(n.prefix,n.settingsKey);if(e)return e;const i=yield n.configService.getParameter(re.UPDATE_INTERVAL_SETTINGS);return e=yield n.fetchSettings(),yield n.cacheService.set(n.prefix,n.settingsKey,i,e),e})()}fetchSettings(){var n=this;return C(function*(){return le(n.httpClient.get(`${n._cdn?n._cdn:V._api}/settings?version-ext=${chrome.runtime.getManifest().version}`,{withCredentials:!0})).then(e=>{if(e)return e}).catch(e=>console.error(e))})()}static get getRoot(){return`${V._root}/`}static get getLink(){return this._link?`${this._link}/`:this.getRoot}static afterInstall(n){return`${this._root}/extension?action=install&utm_source=extension&utm_campaign=install&utm_term=${n}`}static afterDelete(n){return`${this._root}/extension?action=uninstall&utm_source=extension&utm_campaign=uninstall&utm_term=${n}`}static get user(){return`${V._api}/user`}static userCashbackRates(n){return`${V._api}/cashback-rates/${n}`}static get userCodes(){return`${V._api}/user/lety-codes`}static get favoriteMerchants(){return`${V._api}/user/shops-liked`}static get deleteFavoriteMerchant(){return`${V._api}/user/shops-disliked`}static get merchants(){return`${this._cdn?this._cdn:V._api}/shops`}static get recommendMerchants(){return`${V._api}/user/shops-recomended`}static get getUserNotifications(){return`${V._api}/user/notifications`}static get advices(){return`${V._api}/user/advices`}static get userNotificationLogs(){return`${V._api}/user/notifications/logs`}static get interstitialPage(){return`${V._root}/`}static interstitialPageLogIn(n){return`${V._root}?auth=1&utm_source=extension&utm_campaign=popup_login&utm_term=${n.toLowerCase()}`}static accountPage(n){return`${V._root}/user?utm_source=extension&utm_campaign=popup_user&utm_term=${n.toLowerCase()}`}static allStoresPage(n){return`${V._root}/shops?utm_source=extension&utm_campaign=shops&utm_term=${n.toLowerCase()}`}static helpPage(n,e){return`${V._help}/hc/${n}/sections/360000147845?utm_source=extension&utm_campaign=support&utm_content=zendesk&utm_term=${e.toLowerCase()}`}static confidentialPage(n){return`${V._root}/confidential?utm_campaign=confidential&utm_content=zendesk&utm_source=extension&utm_term=${n.toLowerCase()}`}static reasonCashbackReactivate(n){return`${V._root}/re-activate-cashback-message?utm_source=extension&utm_campaign=notification_re_activate_cashback&utm_term=${n.toLowerCase()}`}static get logInstall(){return`${V._api}/extension/install`}static get logRequest(){return`${V._api}/extension/request`}static get logUserSettings(){return`${V._api}/user/extension-settings`}static get ddList(){return`${this._cdn?this._cdn:V._api}/dd-list`}static get partner(){return`${V._root}/cashbacklink`}}class yd{id;title;startAt;endAt;image1;image2;image3;transition;additionalData;constructor(n){this.id=n.id,this.title=n.title,this.startAt=n.start_at,this.endAt=n.end_at,this.image1=n.image1,this.image2=n.image2,this.image3=n.image3,this.transition=n.transition,this.additionalData=new RU(n.additional_data)}static serialize(n){const e=[];return n.forEach(i=>{e.push(new yd(i))}),e}}class RU{shortDescription;injectionDescription;isTop;constructor(n){this.shortDescription=n.short_description,this.injectionDescription=n.injection_description,this.isTop=n.is_top}}let zt=(()=>{class t{cacheService;static DEFAULT_LANGUAGE="en";static DEFAULT_COUNTRY="001";static CHECK_LOCALE_COOKIE="hl";country=t.DEFAULT_COUNTRY;language=t.DEFAULT_LANGUAGE;static LOCALE_KEY="locale";static LOCALE_SEPARATOR_SYMBOL="_";constructor(e){this.cacheService=e,this.cacheService.get(S.GLOBAL_CACHE_PREFIX,t.LOCALE_KEY).then(i=>{if(i){const r=i.split(t.LOCALE_SEPARATOR_SYMBOL);this.language=r[0],this.country=r[1]}else this.cacheService.set(S.GLOBAL_CACHE_PREFIX,t.LOCALE_KEY,1/0,`${t.DEFAULT_LANGUAGE}_${t.DEFAULT_COUNTRY}`)})}load(e,i){var r=this;return C(function*(){if(e&&i)r.language=e,r.country=i;else{const s=((yield r.cacheService.get(S.GLOBAL_CACHE_PREFIX,t.LOCALE_KEY))||t.LOCALE_SEPARATOR_SYMBOL).split(t.LOCALE_SEPARATOR_SYMBOL);r.language=s[0],r.country=s[1]}r.cacheService.set("global",t.LOCALE_KEY,1/0,`${r.language}_${r.country}`)})()}get locale(){return`${this.language}_${this.country}`}fetchTranslation(e){return C(function*(){let i;try{i=yield fetch(`./i18n/${e}.json`,{mode:"same-origin"}).then(r=>r.json())}catch{i=yield fetch(`./i18n/${t.DEFAULT_LANGUAGE}.json`,{mode:"same-origin"}).then(o=>o.json())}return i})()}static \u0275fac=function(i){return new(i||t)(w(Qe))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ks(t){return!!t&&(t instanceof Tt||he(t.lift)&&he(t.subscribe))}const{isArray:NU}=Array,{getPrototypeOf:kU,prototype:LU,keys:FU}=Object;const{isArray:UU}=Array;function $U(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function GU(...t){const n=function MH(t){return he(_m(t))?t.pop():void 0}(t),{args:e,keys:i}=function BU(t){if(1===t.length){const n=t[0];if(NU(n))return{args:n,keys:null};if(function HU(t){return t&&"object"==typeof t&&kU(t)===LU}(n)){const e=FU(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}(t),r=new Tt(o=>{const{length:s}=e;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let u=0;u<s;u++){let d=!1;pn(e[u]).subscribe(Bt(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(i?$U(i,a):a),o.complete())}))}});return n?r.pipe(function jU(t){return tt(n=>function VU(t,n){return UU(n)?t(...n):t(n)}(t,n))}(n)):r}function P1(t){return new Tt(n=>{pn(t()).subscribe(n)})}class bd{}let M1=(()=>{class t extends bd{getTranslation(e){return Xe({})}static \u0275fac=(()=>{let e;return function(r){return(e||(e=_a(t)))(r||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();class Mm{}let O1=(()=>{class t{handle(e){return e.key}static \u0275fac=function(i){return new(i||t)};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();function ro(t){return typeof t<"u"&&null!==t}function Om(t){return t&&"object"==typeof t&&!Array.isArray(t)}function R1(t,n){let e=Object.assign({},t);return Om(t)&&Om(n)&&Object.keys(n).forEach(i=>{Om(n[i])?i in t?e[i]=R1(t[i],n[i]):Object.assign(e,{[i]:n[i]}):Object.assign(e,{[i]:n[i]})}),e}class Cd{}let N1=(()=>{class t extends Cd{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,i){let r;return r="string"==typeof e?this.interpolateString(e,i):"function"==typeof e?this.interpolateFunction(e,i):e,r}getValue(e,i){let r="string"==typeof i?i.split("."):[i];i="";do{i+=r.shift(),!ro(e)||!ro(e[i])||"object"!=typeof e[i]&&r.length?r.length?i+=".":e=void 0:(e=e[i],i="")}while(r.length);return e}interpolateFunction(e,i){return e(i)}interpolateString(e,i){return i?e.replace(this.templateMatcher,(r,o)=>{let s=this.getValue(i,o);return ro(s)?s:r}):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=_a(t)))(r||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();class Sd{}let k1=(()=>{class t extends Sd{compile(e,i){return e}compileTranslations(e,i){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=_a(t)))(r||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();class L1{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new tn;onLangChange=new tn;onDefaultLangChange=new tn}const Am=new j("USE_STORE"),Rm=new j("USE_DEFAULT_LANG"),Nm=new j("DEFAULT_LANGUAGE"),km=new j("USE_EXTEND");let yc=(()=>{class t{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new tn;_onLangChange=new tn;_onDefaultLangChange=new tn;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}constructor(e,i,r,o,s,a=!0,c=!1,l=!1,u){this.store=e,this.currentLoader=i,this.compiler=r,this.parser=o,this.missingTranslationHandler=s,this.useDefaultLang=a,this.isolate=c,this.extend=l,u&&this.setDefaultLang(u)}setDefaultLang(e){if(e===this.defaultLang)return;let i=this.retrieveTranslations(e);typeof i<"u"?(null==this.defaultLang&&(this.defaultLang=e),i.pipe(Ns(1)).subscribe(r=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return Xe(this.translations[e]);let i=this.retrieveTranslations(e);return typeof i<"u"?(this.currentLang||(this.currentLang=e),i.pipe(Ns(1)).subscribe(r=>{this.changeLang(e)}),i):(this.changeLang(e),Xe(this.translations[e]))}retrieveTranslations(e){let i;return(typeof this.translations[e]>"u"||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),i=this._translationRequests[e]),i}getTranslation(e){this.pending=!0;const i=this.currentLoader.getTranslation(e).pipe(vd(1),Ns(1));return this.loadingTranslations=i.pipe(tt(r=>this.compiler.compileTranslations(r,e)),vd(1),Ns(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[e]=this.extend&&this.translations[e]?{...r,...this.translations[e]}:r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),i}setTranslation(e,i,r=!1){i=this.compiler.compileTranslations(i,e),this.translations[e]=(r||this.extend)&&this.translations[e]?R1(this.translations[e],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(i=>{-1===this.langs.indexOf(i)&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,i,r){let o;if(i instanceof Array){let s={},a=!1;for(let c of i)s[c]=this.getParsedResult(e,c,r),ks(s[c])&&(a=!0);return a?GU(i.map(l=>ks(s[l])?s[l]:Xe(s[l]))).pipe(tt(l=>{let u={};return l.forEach((d,f)=>{u[i[f]]=d}),u})):s}if(e&&(o=this.parser.interpolate(this.parser.getValue(e,i),r)),typeof o>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(o=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),r)),typeof o>"u"){let s={key:i,translateService:this};typeof r<"u"&&(s.interpolateParams=r),o=this.missingTranslationHandler.handle(s)}return typeof o<"u"?o:i}get(e,i){if(!ro(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(r1(r=>ks(r=this.getParsedResult(r,e,i))?r:Xe(r)));{let r=this.getParsedResult(this.translations[this.currentLang],e,i);return ks(r)?r:Xe(r)}}getStreamOnTranslationChange(e,i){if(!ro(e)||!e.length)throw new Error('Parameter "key" required');return _d(P1(()=>this.get(e,i)),this.onTranslationChange.pipe(zn(r=>{const o=this.getParsedResult(r.translations,e,i);return"function"==typeof o.subscribe?o:Xe(o)})))}stream(e,i){if(!ro(e)||!e.length)throw new Error('Parameter "key" required');return _d(P1(()=>this.get(e,i)),this.onLangChange.pipe(zn(r=>{const o=this.getParsedResult(r.translations,e,i);return ks(o)?o:Xe(o)})))}instant(e,i){if(!ro(e)||!e.length)throw new Error('Parameter "key" required');let r=this.getParsedResult(this.translations[this.currentLang],e,i);if(ks(r)){if(e instanceof Array){let o={};return e.forEach((s,a)=>{o[e[a]]=e[a]}),o}return e}return r}set(e,i,r=this.currentLang){this.translations[r][e]=this.compiler.compile(i,r),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof e>"u"?void 0:(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}static \u0275fac=function(i){return new(i||t)(w(L1),w(bd),w(Sd),w(Cd),w(Mm),w(Rm),w(Am),w(km),w(Nm))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),zU=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:bd,useClass:M1},e.compiler||{provide:Sd,useClass:k1},e.parser||{provide:Cd,useClass:N1},e.missingTranslationHandler||{provide:Mm,useClass:O1},L1,{provide:Am,useValue:e.isolate},{provide:Rm,useValue:e.useDefaultLang},{provide:km,useValue:e.extend},{provide:Nm,useValue:e.defaultLanguage},yc]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:bd,useClass:M1},e.compiler||{provide:Sd,useClass:k1},e.parser||{provide:Cd,useClass:N1},e.missingTranslationHandler||{provide:Mm,useClass:O1},{provide:Am,useValue:e.isolate},{provide:Rm,useValue:e.useDefaultLang},{provide:km,useValue:e.extend},{provide:Nm,useValue:e.defaultLanguage},yc]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({})}return t})(),F1=(()=>{class t{localeService;translateService;constructor(e,i){this.localeService=e,this.translateService=i}transform(e,i,r){try{r||(r=this.localeService.locale);const o={style:"currency",currencyDisplay:"symbol",currency:i,minimumFractionDigits:0};return new Intl.NumberFormat(r.replace("_","-"),o).format(+e)}catch{return this.translateService.instant("localizationNoValidPrice")}}static \u0275fac=function(i){return new(i||t)(ae(zt,16),ae(yc,16))};static \u0275pipe=Zt({name:"priceInfo",type:t,pure:!0})}return t})(),WU=(()=>{class t{httpClient;eventService;cacheService;localeService;bannersShopsUrl="/banners/shops";bannersShopUrl="/banners/shop";cacheBannersPrefix="banners";cacheBannersTime=18e5;constructor(e,i,r,o){this.httpClient=e,this.eventService=i,this.cacheService=r,this.localeService=o}get baseUrl(){return V._api}get language(){return this.localeService.language}get cacheBannersKey(){return this.language}attachListeners(){var e=this;this.eventService.attachEvent(b.GET_BANNERS_SHOPS,C(function*(){return e.getBannersShops()})),this.eventService.attachEvent(b.GET_BANNERS_SHOP_ID,function(){var i=C(function*(r){return e.getBannersShopId(r.data.shopId)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.REFRESH_ALL,C(function*(){return e.clearCacheBanners()}))}getBannersShops(){var e=this;return C(function*(){const i=yield e.cacheService.get(e.cacheBannersPrefix,e.cacheBannersKey);if(i&&i.shops)return i.shops;const s=`?locale=${(yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"locale"))||`${zt.DEFAULT_LANGUAGE}_${zt.DEFAULT_COUNTRY}`}&version-ext=${chrome.runtime.getManifest().version}`;return le(e.httpClient.get(`${e.baseUrl}${e.bannersShopsUrl}${s}`,{withCredentials:!0}).pipe(zn(a=>Xe(yd.serialize(a.data))),io(a=>{a&&e.cacheService.set(e.cacheBannersPrefix,e.cacheBannersKey,e.cacheBannersTime,{...i,shops:a})})))})()}getBannersShopId(e){var i=this;return C(function*(){const r=yield i.cacheService.get(i.cacheBannersPrefix,i.cacheBannersKey);if(r&&r[e])return r[e];const a=`?locale=${(yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,"locale"))||`${zt.DEFAULT_LANGUAGE}_${zt.DEFAULT_COUNTRY}`}&version-ext=${chrome.runtime.getManifest().version}`;return le(i.httpClient.get(`${i.baseUrl}${i.bannersShopUrl}/${e}${a}`,{withCredentials:!0}).pipe(zn(c=>Xe(yd.serialize(c.data))),io(c=>{c&&i.cacheService.set(i.cacheBannersPrefix,i.cacheBannersKey,i.cacheBannersTime,{...r,[e]:c})})))})()}clearCacheBanners(){this.cacheService.remove(this.cacheBannersPrefix,this.cacheBannersKey)}static \u0275fac=function(i){return new(i||t)(w(It),w(b),w(Qe),w(zt))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YU=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>e.attachListeners(),multi:!0,deps:[WU]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({imports:[Gn]})}return t})();new j("CAROUSEL_OPTIONS",{factory:()=>({})}),new j("Current extension background instance");let bc=(()=>{class t{httpClient;eventService;cacheService;versionExt="version-ext";locale="locale";domain="domain";pathSettingsSimpleSimilar="/settings/simple-similar";promoNotifications="/promo-notifications";categoriesUrl="/shop-categories";constructor(e,i,r){this.httpClient=e,this.eventService=i,this.cacheService=r}get baseUrl(){return V._api}getExtensionVersion(){return chrome.runtime.getManifest().version}getSimpleSimilarSettings(e){var i=this;return C(function*(){const r=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,"locale"),o=`${r?`&${i.locale}=${r}`:""}${e?`&${i.domain}=${e}`:""}`,s=`${i.baseUrl}${i.pathSettingsSimpleSimilar}?${i.versionExt}=${i.getExtensionVersion()}${o}`;return i.httpClient.get(s,{withCredentials:!0}).toPromise().then(a=>a)})()}getPromoNotifications(){var e=this;return C(function*(){const i=(yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"locale"))||`${zt.DEFAULT_LANGUAGE}_${zt.DEFAULT_COUNTRY}`,r=`${e.baseUrl}${e.promoNotifications}?locale=${i}&${e.versionExt}=${e.getExtensionVersion()}`;return le(e.httpClient.get(r,{withCredentials:!0})).then(s=>s)})()}getMerchantsCategories(){var e=this;return C(function*(){const i=(yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"locale"))||`${zt.DEFAULT_LANGUAGE}_${zt.DEFAULT_COUNTRY}`,r=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"deliveryCountry"),o=r?`&delivery_country=${r}`:"",s=`?locale=${i}\n\t\t&version-ext=${chrome.runtime.getManifest().version}${o}`;return le(e.httpClient.get(`${e.baseUrl}${e.categoriesUrl}${s}`,{withCredentials:!0}))})()}static \u0275fac=function(i){return new(i||t)(w(It),w(b),w(Qe))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var B1="1.13.6",H1="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},Ed=Array.prototype,Lm=Object.prototype,U1=typeof Symbol<"u"?Symbol.prototype:null,qU=Ed.push,Cc=Ed.slice,Sc=Lm.toString,KU=Lm.hasOwnProperty,V1=typeof ArrayBuffer<"u",XU=typeof DataView<"u",QU=Array.isArray,j1=Object.keys,$1=Object.create,G1=V1&&ArrayBuffer.isView,ZU=isNaN,JU=isFinite,z1=!{toString:null}.propertyIsEnumerable("toString"),W1=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],e8=Math.pow(2,53)-1;function gn(t,n){return n=null==n?t.length-1:+n,function(){for(var e=Math.max(arguments.length-n,0),i=Array(e),r=0;r<e;r++)i[r]=arguments[r+n];switch(n){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var o=Array(n+1);for(r=0;r<n;r++)o[r]=arguments[r];return o[n]=i,t.apply(this,o)}}function oo(t){var n=typeof t;return"function"===n||"object"===n&&!!t}function t8(t){return null===t}function Fm(t){return void 0===t}function Y1(t){return!0===t||!1===t||"[object Boolean]"===Sc.call(t)}function n8(t){return!(!t||1!==t.nodeType)}function Wt(t){var n="[object "+t+"]";return function(e){return Sc.call(e)===n}}const Id=Wt("String"),q1=Wt("Number"),r8=Wt("Date"),o8=Wt("RegExp"),s8=Wt("Error"),K1=Wt("Symbol"),X1=Wt("ArrayBuffer");var Q1=Wt("Function");"object"!=typeof Int8Array&&"function"!=typeof(H1.document&&H1.document.childNodes)&&(Q1=function(t){return"function"==typeof t||!1});const sn=Q1,Z1=Wt("Object");var J1=XU&&Z1(new DataView(new ArrayBuffer(8))),Bm=typeof Map<"u"&&Z1(new Map),c8=Wt("DataView");const wd=J1?function l8(t){return null!=t&&sn(t.getInt8)&&X1(t.buffer)}:c8,Er=QU||Wt("Array");function Ir(t,n){return null!=t&&KU.call(t,n)}var Hm=Wt("Arguments");!function(){Hm(arguments)||(Hm=function(t){return Ir(t,"callee")})}();const Um=Hm;function u8(t){return!K1(t)&&JU(t)&&!isNaN(parseFloat(t))}function eT(t){return q1(t)&&ZU(t)}function tT(t){return function(){return t}}function nT(t){return function(n){var e=t(n);return"number"==typeof e&&e>=0&&e<=e8}}function iT(t){return function(n){return n?.[t]}}const Td=iT("byteLength"),d8=nT(Td);var f8=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const rT=V1?function h8(t){return G1?G1(t)&&!wd(t):d8(t)&&f8.test(Sc.call(t))}:tT(!1),mn=iT("length");function oT(t,n){n=function p8(t){for(var n={},e=t.length,i=0;i<e;++i)n[t[i]]=!0;return{contains:function(r){return!0===n[r]},push:function(r){return n[r]=!0,t.push(r)}}}(n);var e=W1.length,i=t.constructor,r=sn(i)&&i.prototype||Lm,o="constructor";for(Ir(t,o)&&!n.contains(o)&&n.push(o);e--;)(o=W1[e])in t&&t[o]!==r[o]&&!n.contains(o)&&n.push(o)}function $e(t){if(!oo(t))return[];if(j1)return j1(t);var n=[];for(var e in t)Ir(t,e)&&n.push(e);return z1&&oT(t,n),n}function _n(t){if(null==t)return!0;var n=mn(t);return"number"==typeof n&&(Er(t)||Id(t)||Um(t))?0===n:0===mn($e(t))}function sT(t,n){var e=$e(n),i=e.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var s=e[o];if(n[s]!==r[s]||!(s in r))return!1}return!0}function Se(t){return t instanceof Se?t:this instanceof Se?void(this._wrapped=t):new Se(t)}function aT(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,Td(t))}Se.VERSION=B1,Se.prototype.valueOf=Se.prototype.toJSON=Se.prototype.value=function(){return this._wrapped},Se.prototype.toString=function(){return String(this._wrapped)};var cT="[object DataView]";function Vm(t,n,e,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var r=typeof t;return("function"===r||"object"===r||"object"==typeof n)&&lT(t,n,e,i)}function lT(t,n,e,i){t instanceof Se&&(t=t._wrapped),n instanceof Se&&(n=n._wrapped);var r=Sc.call(t);if(r!==Sc.call(n))return!1;if(J1&&"[object Object]"==r&&wd(t)){if(!wd(n))return!1;r=cT}switch(r){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return U1.valueOf.call(t)===U1.valueOf.call(n);case"[object ArrayBuffer]":case cT:return lT(aT(t),aT(n),e,i)}var o="[object Array]"===r;if(!o&&rT(t)){if(Td(t)!==Td(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof n)return!1;var a=t.constructor,c=n.constructor;if(a!==c&&!(sn(a)&&a instanceof a&&sn(c)&&c instanceof c)&&"constructor"in t&&"constructor"in n)return!1}i=i||[];for(var l=(e=e||[]).length;l--;)if(e[l]===t)return i[l]===n;if(e.push(t),i.push(n),o){if((l=t.length)!==n.length)return!1;for(;l--;)if(!Vm(t[l],n[l],e,i))return!1}else{var d,u=$e(t);if(l=u.length,$e(n).length!==l)return!1;for(;l--;)if(!Ir(n,d=u[l])||!Vm(t[d],n[d],e,i))return!1}return e.pop(),i.pop(),!0}function uT(t,n){return Vm(t,n)}function Ec(t){if(!oo(t))return[];var n=[];for(var e in t)n.push(e);return z1&&oT(t,n),n}function jm(t){var n=mn(t);return function(e){if(null==e)return!1;var i=Ec(e);if(mn(i))return!1;for(var r=0;r<n;r++)if(!sn(e[t[r]]))return!1;return t!==hT||!sn(e[$m])}}var $m="forEach",Gm=["clear","delete"],fT=["get","has","set"],g8=Gm.concat($m,fT),hT=Gm.concat(fT),m8=["add"].concat(Gm,$m,"has");const _8=Bm?jm(g8):Wt("Map"),v8=Bm?jm(hT):Wt("WeakMap"),y8=Bm?jm(m8):Wt("Set"),b8=Wt("WeakSet");function so(t){for(var n=$e(t),e=n.length,i=Array(e),r=0;r<e;r++)i[r]=t[n[r]];return i}function C8(t){for(var n=$e(t),e=n.length,i=Array(e),r=0;r<e;r++)i[r]=[n[r],t[n[r]]];return i}function pT(t){for(var n={},e=$e(t),i=0,r=e.length;i<r;i++)n[t[e[i]]]=e[i];return n}function zm(t){var n=[];for(var e in t)sn(t[e])&&n.push(e);return n.sort()}function Wm(t,n){return function(e){var i=arguments.length;if(n&&(e=Object(e)),i<2||null==e)return e;for(var r=1;r<i;r++)for(var o=arguments[r],s=t(o),a=s.length,c=0;c<a;c++){var l=s[c];(!n||void 0===e[l])&&(e[l]=o[l])}return e}}const gT=Wm(Ec),xd=Wm($e),mT=Wm(Ec,!0);function _T(t){if(!oo(t))return{};if($1)return $1(t);var n=function(){};n.prototype=t;var e=new n;return n.prototype=null,e}function E8(t,n){var e=_T(t);return n&&xd(e,n),e}function I8(t){return oo(t)?Er(t)?t.slice():gT({},t):t}function w8(t,n){return n(t),t}function vT(t){return Er(t)?t:[t]}function Ic(t){return Se.toPath(t)}function Ym(t,n){for(var e=n.length,i=0;i<e;i++){if(null==t)return;t=t[n[i]]}return e?t:void 0}function yT(t,n,e){var i=Ym(t,Ic(n));return Fm(i)?e:i}function T8(t,n){for(var e=(n=Ic(n)).length,i=0;i<e;i++){var r=n[i];if(!Ir(t,r))return!1;t=t[r]}return!!e}function qm(t){return t}function wc(t){return t=xd({},t),function(n){return sT(n,t)}}function Km(t){return t=Ic(t),function(n){return Ym(n,t)}}function Tc(t,n,e){if(void 0===n)return t;switch(e??3){case 1:return function(i){return t.call(n,i)};case 3:return function(i,r,o){return t.call(n,i,r,o)};case 4:return function(i,r,o,s){return t.call(n,i,r,o,s)}}return function(){return t.apply(n,arguments)}}function bT(t,n,e){return null==t?qm:sn(t)?Tc(t,n,e):oo(t)&&!Er(t)?wc(t):Km(t)}function Xm(t,n){return bT(t,n,1/0)}function vn(t,n,e){return Se.iteratee!==Xm?Se.iteratee(t,n):bT(t,n,e)}function x8(t,n,e){n=vn(n,e);for(var i=$e(t),r=i.length,o={},s=0;s<r;s++){var a=i[s];o[a]=n(t[a],a,t)}return o}function CT(){}function D8(t){return null==t?CT:function(n){return yT(t,n)}}function P8(t,n,e){var i=Array(Math.max(0,t));n=Tc(n,e,1);for(var r=0;r<t;r++)i[r]=n(r);return i}function Qm(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))}Se.toPath=vT,Se.iteratee=Xm;const xc=Date.now||function(){return(new Date).getTime()};function ST(t){var n=function(o){return t[o]},e="(?:"+$e(t).join("|")+")",i=RegExp(e),r=RegExp(e,"g");return function(o){return i.test(o=null==o?"":""+o)?o.replace(r,n):o}}const ET={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M8=ST(ET),A8=ST(pT(ET)),R8=Se.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Zm=/(.)^/,N8={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},k8=/\\|'|\r|\n|\u2028|\u2029/g;function L8(t){return"\\"+N8[t]}var F8=/^\s*(\w|\$)+\s*$/;function B8(t,n,e){!n&&e&&(n=e),n=mT({},n,Se.templateSettings);var i=RegExp([(n.escape||Zm).source,(n.interpolate||Zm).source,(n.evaluate||Zm).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(l,u,d,f,h){return o+=t.slice(r,h).replace(k8,L8),r=h+l.length,u?o+="'+\n((__t=("+u+"))==null?'':_.escape(__t))+\n'":d?o+="'+\n((__t=("+d+"))==null?'':__t)+\n'":f&&(o+="';\n"+f+"\n__p+='"),l}),o+="';\n";var a,s=n.variable;if(s){if(!F8.test(s))throw new Error("variable is not a bare identifier: "+s)}else o="with(obj||{}){\n"+o+"}\n",s="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(s,"_",o)}catch(l){throw l.source=o,l}var c=function(l){return a.call(this,l,Se)};return c.source="function("+s+"){\n"+o+"}",c}function H8(t,n,e){var i=(n=Ic(n)).length;if(!i)return sn(e)?e.call(t):e;for(var r=0;r<i;r++){var o=t?.[n[r]];void 0===o&&(o=e,r=i),t=sn(o)?o.call(t):o}return t}var U8=0;function V8(t){var n=++U8+"";return t?t+n:n}function IT(t){var n=Se(t);return n._chain=!0,n}function wT(t,n,e,i,r){if(!(i instanceof n))return t.apply(e,r);var o=_T(t.prototype),s=t.apply(o,r);return oo(s)?s:o}var Jm=gn(function(t,n){var e=Jm.placeholder,i=function(){for(var r=0,o=n.length,s=Array(o),a=0;a<o;a++)s[a]=n[a]===e?arguments[r++]:n[a];for(;r<arguments.length;)s.push(arguments[r++]);return wT(t,i,this,this,s)};return i});Jm.placeholder=Se;const Dd=Jm,TT=gn(function(t,n,e){if(!sn(t))throw new TypeError("Bind must be called on a function");var i=gn(function(r){return wT(t,i,n,this,e.concat(r))});return i}),An=nT(mn);function ao(t,n,e,i){if(i=i||[],n||0===n){if(n<=0)return i.concat(t)}else n=1/0;for(var r=i.length,o=0,s=mn(t);o<s;o++){var a=t[o];if(An(a)&&(Er(a)||Um(a)))if(n>1)ao(a,n-1,e,i),r=i.length;else for(var c=0,l=a.length;c<l;)i[r++]=a[c++];else e||(i[r++]=a)}return i}const j8=gn(function(t,n){var e=(n=ao(n,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var i=n[e];t[i]=TT(t[i],t)}return t});function $8(t,n){var e=function(i){var r=e.cache,o=""+(n?n.apply(this,arguments):i);return Ir(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return e.cache={},e}const xT=gn(function(t,n,e){return setTimeout(function(){return t.apply(null,e)},n)}),G8=Dd(xT,Se,1);function z8(t,n,e){var i,r,o,s,a=0;e||(e={});var c=function(){a=!1===e.leading?0:xc(),i=null,s=t.apply(r,o),i||(r=o=null)},l=function(){var u=xc();!a&&!1===e.leading&&(a=u);var d=n-(u-a);return r=this,o=arguments,d<=0||d>n?(i&&(clearTimeout(i),i=null),a=u,s=t.apply(r,o),i||(r=o=null)):!i&&!1!==e.trailing&&(i=setTimeout(c,d)),s};return l.cancel=function(){clearTimeout(i),a=0,i=r=o=null},l}function W8(t,n,e){var i,r,o,s,a,c=function(){var u=xc()-r;n>u?i=setTimeout(c,n-u):(i=null,e||(s=t.apply(a,o)),i||(o=a=null))},l=gn(function(u){return a=this,o=u,r=xc(),i||(i=setTimeout(c,n),e&&(s=t.apply(a,o))),s});return l.cancel=function(){clearTimeout(i),i=o=a=null},l}function Y8(t,n){return Dd(n,t)}function e_(t){return function(){return!t.apply(this,arguments)}}function q8(){var t=arguments,n=t.length-1;return function(){for(var e=n,i=t[n].apply(this,arguments);e--;)i=t[e].call(this,i);return i}}function K8(t,n){return function(){if(--t<1)return n.apply(this,arguments)}}function DT(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=null),e}}const X8=Dd(DT,2);function PT(t,n,e){n=vn(n,e);for(var r,i=$e(t),o=0,s=i.length;o<s;o++)if(n(t[r=i[o]],r,t))return r}function MT(t){return function(n,e,i){e=vn(e,i);for(var r=mn(n),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(e(n[o],o,n))return o;return-1}}const t_=MT(1),OT=MT(-1);function AT(t,n,e,i){for(var r=(e=vn(e,i,1))(n),o=0,s=mn(t);o<s;){var a=Math.floor((o+s)/2);e(t[a])<r?o=a+1:s=a}return o}function RT(t,n,e){return function(i,r,o){var s=0,a=mn(i);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(e&&o&&a)return i[o=e(i,r)]===r?o:-1;if(r!=r)return(o=n(Cc.call(i,s,a),eT))>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(i[o]===r)return o;return-1}}const NT=RT(1,t_,AT),Q8=RT(-1,OT);function n_(t,n,e){var r=(An(t)?t_:PT)(t,n,e);if(void 0!==r&&-1!==r)return t[r]}function Z8(t,n){return n_(t,wc(n))}function yn(t,n,e){var i,r;if(n=Tc(n,e),An(t))for(i=0,r=t.length;i<r;i++)n(t[i],i,t);else{var o=$e(t);for(i=0,r=o.length;i<r;i++)n(t[o[i]],o[i],t)}return t}function co(t,n,e){n=vn(n,e);for(var i=!An(t)&&$e(t),r=(i||t).length,o=Array(r),s=0;s<r;s++){var a=i?i[s]:s;o[s]=n(t[a],a,t)}return o}function kT(t){return function(e,i,r,o){var s=arguments.length>=3;return function(e,i,r,o){var s=!An(e)&&$e(e),a=(s||e).length,c=t>0?0:a-1;for(o||(r=e[s?s[c]:c],c+=t);c>=0&&c<a;c+=t){var l=s?s[c]:c;r=i(r,e[l],l,e)}return r}(e,Tc(i,o,4),r,s)}}const i_=kT(1),LT=kT(-1);function lo(t,n,e){var i=[];return n=vn(n,e),yn(t,function(r,o,s){n(r,o,s)&&i.push(r)}),i}function J8(t,n,e){return lo(t,e_(vn(n)),e)}function FT(t,n,e){n=vn(n,e);for(var i=!An(t)&&$e(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(!n(t[s],s,t))return!1}return!0}function BT(t,n,e){n=vn(n,e);for(var i=!An(t)&&$e(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(n(t[s],s,t))return!0}return!1}function qi(t,n,e,i){return An(t)||(t=so(t)),("number"!=typeof e||i)&&(e=0),NT(t,n,e)>=0}const e7=gn(function(t,n,e){var i,r;return sn(n)?r=n:(n=Ic(n),i=n.slice(0,-1),n=n[n.length-1]),co(t,function(o){var s=r;if(!s){if(i&&i.length&&(o=Ym(o,i)),null==o)return;s=o[n]}return null==s?s:s.apply(o,e)})});function r_(t,n){return co(t,Km(n))}function t7(t,n){return lo(t,wc(n))}function HT(t,n,e){var o,s,i=-1/0,r=-1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=An(t)?t:so(t)).length;a<c;a++)null!=(o=t[a])&&o>i&&(i=o);else n=vn(n,e),yn(t,function(l,u,d){((s=n(l,u,d))>r||s===-1/0&&i===-1/0)&&(i=l,r=s)});return i}function n7(t,n,e){var o,s,i=1/0,r=1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=An(t)?t:so(t)).length;a<c;a++)null!=(o=t[a])&&o<i&&(i=o);else n=vn(n,e),yn(t,function(l,u,d){((s=n(l,u,d))<r||s===1/0&&i===1/0)&&(i=l,r=s)});return i}var r7=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function UT(t){return t?Er(t)?Cc.call(t):Id(t)?t.match(r7):An(t)?co(t,qm):so(t):[]}function VT(t,n,e){if(null==n||e)return An(t)||(t=so(t)),t[Qm(t.length-1)];var i=UT(t),r=mn(i);n=Math.max(Math.min(n,r),0);for(var o=r-1,s=0;s<n;s++){var a=Qm(s,o),c=i[s];i[s]=i[a],i[a]=c}return i.slice(0,n)}function o7(t){return VT(t,1/0)}function s7(t,n,e){var i=0;return n=vn(n,e),r_(co(t,function(r,o,s){return{value:r,index:i++,criteria:n(r,o,s)}}).sort(function(r,o){var s=r.criteria,a=o.criteria;if(s!==a){if(s>a||void 0===s)return 1;if(s<a||void 0===a)return-1}return r.index-o.index}),"value")}function Pd(t,n){return function(e,i,r){var o=n?[[],[]]:{};return i=vn(i,r),yn(e,function(s,a){var c=i(s,a,e);t(o,s,c)}),o}}const a7=Pd(function(t,n,e){Ir(t,e)?t[e].push(n):t[e]=[n]}),c7=Pd(function(t,n,e){t[e]=n}),l7=Pd(function(t,n,e){Ir(t,e)?t[e]++:t[e]=1}),u7=Pd(function(t,n,e){t[e?0:1].push(n)},!0);function d7(t){return null==t?0:An(t)?t.length:$e(t).length}function f7(t,n,e){return n in e}const jT=gn(function(t,n){var e={},i=n[0];if(null==t)return e;sn(i)?(n.length>1&&(i=Tc(i,n[1])),n=Ec(t)):(i=f7,n=ao(n,!1,!1),t=Object(t));for(var r=0,o=n.length;r<o;r++){var s=n[r],a=t[s];i(a,s,t)&&(e[s]=a)}return e}),h7=gn(function(t,n){var i,e=n[0];return sn(e)?(e=e_(e),n.length>1&&(i=n[1])):(n=co(ao(n,!1,!1),String),e=function(r,o){return!qi(n,o)}),jT(t,e,i)});function $T(t,n,e){return Cc.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))}function o_(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[0]:$T(t,t.length-n)}function Md(t,n,e){return Cc.call(t,null==n||e?1:n)}function p7(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[t.length-1]:Md(t,Math.max(0,t.length-n))}function GT(t){return lo(t,Boolean)}function g7(t,n){return ao(t,n,!1)}const zT=gn(function(t,n){return n=ao(n,!0,!0),lo(t,function(e){return!qi(n,e)})}),m7=gn(function(t,n){return zT(t,n)});function Od(t,n,e,i){Y1(n)||(i=e,e=n,n=!1),null!=e&&(e=vn(e,i));for(var r=[],o=[],s=0,a=mn(t);s<a;s++){var c=t[s],l=e?e(c,s,t):c;n&&!e?((!s||o!==l)&&r.push(c),o=l):e?qi(o,l)||(o.push(l),r.push(c)):qi(r,c)||r.push(c)}return r}const _7=gn(function(t){return Od(ao(t,!0,!0))});function v7(t){for(var n=[],e=arguments.length,i=0,r=mn(t);i<r;i++){var o=t[i];if(!qi(n,o)){var s;for(s=1;s<e&&qi(arguments[s],o);s++);s===e&&n.push(o)}}return n}function s_(t){for(var n=t&&HT(t,mn).length||0,e=Array(n),i=0;i<n;i++)e[i]=r_(t,i);return e}const y7=gn(s_);function b7(t,n){for(var e={},i=0,r=mn(t);i<r;i++)n?e[t[i]]=n[i]:e[t[i][0]]=t[i][1];return e}function C7(t,n,e){null==n&&(n=t||0,t=0),e||(e=n<t?-1:1);for(var i=Math.max(Math.ceil((n-t)/e),0),r=Array(i),o=0;o<i;o++,t+=e)r[o]=t;return r}function S7(t,n){if(null==n||n<1)return[];for(var e=[],i=0,r=t.length;i<r;)e.push(Cc.call(t,i,i+=n));return e}function a_(t,n){return t._chain?Se(n).chain():n}function WT(t){return yn(zm(t),function(n){var e=Se[n]=t[n];Se.prototype[n]=function(){var i=[this._wrapped];return qU.apply(i,arguments),a_(this,e.apply(Se,i))}}),Se}yn(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=Ed[t];Se.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),("shift"===t||"splice"===t)&&0===e.length&&delete e[0]),a_(this,e)}}),yn(["concat","join","slice"],function(t){var n=Ed[t];Se.prototype[t]=function(){var e=this._wrapped;return null!=e&&(e=n.apply(e,arguments)),a_(this,e)}});const E7=Se;var YT=WT(At);YT._=YT;const qT=t=>"object"==typeof t&&null!==t,KT=t=>qT(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),I7=Symbol("mapObjectSkip"),c_=(t,n,e,i=new WeakMap)=>{if(e={deep:!1,target:{},...e},i.has(t))return i.get(t);i.set(t,e.target);const{target:r}=e;delete e.target;const o=s=>s.map(a=>KT(a)?c_(a,n,e,i):a);if(Array.isArray(t))return o(t);for(const[s,a]of Object.entries(t)){const c=n(s,a,t);if(c===I7)continue;let[l,u,{shouldRecurse:d=!0}={}]=c;"__proto__"!==l&&(e.deep&&d&&KT(u)&&(u=Array.isArray(u)?o(u):c_(u,n,e,i)),r[l]=u)}return r};function XT(t,n,e){if(!qT(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);return c_(t,n,e)}const w7=/[\p{Lu}]/u,T7=/[\p{Ll}]/u,QT=/^[\p{Lu}](?![\p{Lu}])/gu,ZT=/([\p{Alpha}\p{N}_]|$)/u,l_=/[_.\- ]+/,x7=new RegExp("^"+l_.source),JT=new RegExp(l_.source+ZT.source,"gu"),ex=new RegExp("\\d+"+ZT.source,"gu");class A7 extends Map{constructor(n={}){if(super(),!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof n.maxAge&&0===n.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=n.maxSize,this.maxAge=n.maxAge||Number.POSITIVE_INFINITY,this.onEviction=n.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(n){if("function"==typeof this.onEviction)for(const[e,i]of n)this.onEviction(e,i.value)}_deleteIfExpired(n,e){return"number"==typeof e.expiry&&e.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(n,e.value),this.delete(n))}_getOrDeleteIfExpired(n,e){if(!1===this._deleteIfExpired(n,e))return e.value}_getItemValue(n,e){return e.expiry?this._getOrDeleteIfExpired(n,e):e.value}_peek(n,e){const i=e.get(n);return this._getItemValue(n,i)}_set(n,e){this.cache.set(n,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(n,e){this.oldCache.delete(n),this._set(n,e)}*_entriesAscending(){for(const n of this.oldCache){const[e,i]=n;this.cache.has(e)||!1===this._deleteIfExpired(e,i)&&(yield n)}for(const n of this.cache){const[e,i]=n;!1===this._deleteIfExpired(e,i)&&(yield n)}}get(n){if(this.cache.has(n)){const e=this.cache.get(n);return this._getItemValue(n,e)}if(this.oldCache.has(n)){const e=this.oldCache.get(n);if(!1===this._deleteIfExpired(n,e))return this._moveToRecent(n,e),e.value}}set(n,e,{maxAge:i=this.maxAge}={}){const r="number"==typeof i&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;this.cache.has(n)?this.cache.set(n,{value:e,expiry:r}):this._set(n,{value:e,expiry:r})}has(n){return this.cache.has(n)?!this._deleteIfExpired(n,this.cache.get(n)):!!this.oldCache.has(n)&&!this._deleteIfExpired(n,this.oldCache.get(n))}peek(n){return this.cache.has(n)?this._peek(n,this.cache):this.oldCache.has(n)?this._peek(n,this.oldCache):void 0}delete(n){const e=this.cache.delete(n);return e&&this._size--,this.oldCache.delete(n)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(n){if(!(n&&n>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],i=e.length-n;i<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(i>0&&this._emitEvictions(e.slice(0,i)),this.oldCache=new Map(e.slice(i)),this.cache=new Map,this._size=0),this.maxSize=n}*keys(){for(const[n]of this)yield n}*values(){for(const[,n]of this)yield n}*[Symbol.iterator](){for(const n of this.cache){const[e,i]=n;!1===this._deleteIfExpired(e,i)&&(yield[e,i.value])}for(const n of this.oldCache){const[e,i]=n;this.cache.has(e)||!1===this._deleteIfExpired(e,i)&&(yield[e,i.value])}}*entriesDescending(){let n=[...this.cache];for(let e=n.length-1;e>=0;--e){const i=n[e],[r,o]=i;!1===this._deleteIfExpired(r,o)&&(yield[r,o.value])}n=[...this.oldCache];for(let e=n.length-1;e>=0;--e){const i=n[e],[r,o]=i;this.cache.has(r)||!1===this._deleteIfExpired(r,o)&&(yield[r,o.value])}}*entriesAscending(){for(const[n,e]of this._entriesAscending())yield[n,e.value]}get size(){if(!this._size)return this.oldCache.size;let n=0;for(const e of this.oldCache.keys())this.cache.has(e)||n++;return Math.min(this._size+n,this.maxSize)}entries(){return this.entriesAscending()}forEach(n,e=this){for(const[i,r]of this.entriesAscending())n.call(e,r,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}const u_=new A7({maxSize:1e5}),tx=t=>!("object"!=typeof t||null===t||t instanceof RegExp||t instanceof Error||t instanceof Date),nx=(t,n={})=>{if(!tx(t))return t;const{exclude:e,pascalCase:i=!1,stopPaths:r,deep:o=!1,preserveConsecutiveUppercase:s=!1}=n,a=new Set(r),c=l=>(u,d)=>{if(o&&tx(d)){const f=void 0===l?u:`${l}.${u}`;a.has(f)||(d=XT(d,c(f)))}if(!e||!((t,n)=>t.some(e=>"string"==typeof e?e===n:(e.lastIndex=0,e.test(n))))(e,u)){const f=i?`${u}_`:u;if(u_.has(f))u=u_.get(f);else{const h=function O7(t,n){if("string"!=typeof t&&!Array.isArray(t))throw new TypeError("Expected the input to be `string | string[]`");if(n={pascalCase:!1,preserveConsecutiveUppercase:!1,...n},0===(t=Array.isArray(t)?t.map(o=>o.trim()).filter(o=>o.length).join("-"):t.trim()).length)return"";const e=!1===n.locale?o=>o.toLowerCase():o=>o.toLocaleLowerCase(n.locale),i=!1===n.locale?o=>o.toUpperCase():o=>o.toLocaleUpperCase(n.locale);return 1===t.length?l_.test(t)?"":n.pascalCase?i(t):e(t):(t!==e(t)&&(t=((t,n,e,i)=>{let r=!1,o=!1,s=!1,a=!1;for(let c=0;c<t.length;c++){const l=t[c];a=!(c>2)||"-"===t[c-3],r&&w7.test(l)?(t=t.slice(0,c)+"-"+t.slice(c),r=!1,s=o,o=!0,c++):o&&s&&T7.test(l)&&(!a||i)?(t=t.slice(0,c-1)+"-"+t.slice(c-1),s=o,o=!1,r=!0):(r=n(l)===l&&e(l)!==l,s=o,o=e(l)===l&&n(l)!==l)}return t})(t,e,i,n.preserveConsecutiveUppercase)),t=t.replace(x7,""),t=n.preserveConsecutiveUppercase?((t,n)=>(QT.lastIndex=0,t.replaceAll(QT,e=>n(e))))(t,e):e(t),n.pascalCase&&(t=i(t.charAt(0))+t.slice(1)),((t,n)=>(JT.lastIndex=0,ex.lastIndex=0,t.replaceAll(ex,(e,i,r)=>["_","-"].includes(t.charAt(r+e.length))?e:n(e)).replaceAll(JT,(e,i)=>n(i))))(t,i))}(u,{pascalCase:i,locale:!1,preserveConsecutiveUppercase:s});u.length<100&&u_.set(f,h),u=h}}return[u,d]};return XT(t,c(void 0))};var k7=Ot(570);let G=(()=>{class t{cacheService;constructor(e){this.cacheService=e}static getDomain(e){if(!e)return null;try{e=new URL(e).host.replace("www.","")}catch{e=e.replace("www.","")}return e}static guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const i=16*Math.random()|0;return("x"===e?i:3&i|8).toString(16)})}static getAllUrlParams(e){let i=e?e.split("?")[1]:window.location.search.slice(1);const r={};if(i){i=i.split("#")[0];const o=i.split("&");for(let s=0;s<o.length;s++){const a=o[s].split("=");let c,l=a[0].replace(/\[\d*\]/,d=>(c=d.slice(1,-1),"")),u=typeof a[1]>"u"||null===a[1]?"":a[1];l=l.toLowerCase(),u=u.toLowerCase(),r[l]?("string"==typeof r[l]&&(r[l]=[r[l]]),typeof c>"u"?r[l].push(u):r[l][c]=u):r[l]=u}}return r}static getRegexValue(e,i){return[...e.matchAll(i)][0]??[]}getDomainPrice(e){let i=null;return e&&e.length>0&&(e.includes("aliexpress")?i="aliexpress":e.includes("gearbest")?i="gearbest":e.includes("banggood")?i="banggood":e.includes("lightinthebox")?i="lightinthebox":e.includes("miniinthebox")?i="miniinthebox":e.includes("tomtop")&&(i="tomtop")),i}getProductId(e,i){let r=null;if(e&&e.length>0)switch(e){case"aliexpress":r=t.getRegexValue(i,S.REGEX_ALI_PRODUCT_ID)[1],r+="_aliexpress";break;case"gearbest":r=t.getRegexValue(i,S.REGEX_GEARBEST_PRODUCT_ID)[1],r+="_gearbest";break;case"ru.gearbest":r=t.getRegexValue(i,S.REGEX_GEARBEST_PRODUCT_ID)[1],r+="_ru_gearbest";break;case"banggood":r=t.getRegexValue(i,S.REGEX_BANG_GOOD_PRODUCT_ID)[1],r+="_banggood";break;case"eu.banggood":r=t.getRegexValue(i,S.REGEX_BANG_GOOD_EU_PRODUCT_ID)[1],r+="_eu_banggood";break;case"us.banggood":r=t.getRegexValue(i,S.REGEX_BANG_GOOD_US_PRODUCT_ID)[1],r+="_us_banggood";break;case"lightinthebox":r=t.getRegexValue(i,S.REGEX_LIGHT_IN_THE_BOX_PRODUCT_ID)[1],r+="_lightinthebox";break;case"miniinthebox":r=t.getRegexValue(i,S.REGEX_LIGHT_IN_THE_BOX_PRODUCT_ID)[1],r+="_miniinthebox";break;case"tomtop":r=t.getRegexValue(i,S.REGEX_TOM_TOP_PRODUCT_ID)[1],r+="_tomtop"}return r}getRegion(e){let i="";if("aliexpress"===e){const r=document.body.textContent;i=`${t.getRegexValue(r,S.REGEX_REGION_COUNTRY_NAME)[1]??"UNKNOWN"}_${t.getRegexValue(r,S.REGEX_REGION_PROVINCE_NAME)[1]??"UNKNOWN"}_${t.getRegexValue(r,S.REGEX_REGION_CITY_NAME)[1]??"UNKNOWN"}`}return i}matchLocaleCookie(e){var i=this;return C(function*(){const r=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,"locale");if(!r||_n(e))return!1;const o=r.split("_")[1].toUpperCase();return e.some(s=>s.toUpperCase()===o)})()}checkConditionsBooking(e,i){return C(function*(){return Promise.resolve(!0)})()}getViewUrlItem(e,i){return`${V.getLink}view/${e}${S.PARAMETER_DEEP_LINK}${encodeURIComponent(i)}`}getGoUrlItem(e,i){return`${V.getLink}shops/${e}/go${S.PARAMETER_DEEP_LINK}${encodeURIComponent(i)}&productWithGo=true`}urlFromObject(e){const i=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].length>0&&i.push(`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`);return i.join("&")}objectKeysTransform(e,i="camelcase"){switch(i){case"camelcase":return function N7(t,n){return Array.isArray(t)?Object.keys(t).map(e=>nx(t[e],n)):nx(t,n)}(e,{deep:!0});case"snakecase":return k7(e,{deep:!0});default:return e}}sleep(e){return new Promise(i=>setTimeout(i,e))}getLSViewedShopsPageUrl(e){const{merchant:i,utmCampaign:r,browser:o}=e,s=`&utm_source=extension&utm_campaign=${r??"no-activate-cashback"}&utm_term=${o.toLowerCase()}`;return V._root+(i?`/shops-viewed?with_shop=${i.id}`:"/shops-viewed?")+s}calculateRateCoefficient(e){return e?e/100+1:1}checkEnableDisableDomain(e,i){const r=e.domains_enabled,o=e.domains_disabled;return r?.length&&o?.length?!!r.find(a=>this.patternCheck(a,i))&&!o.find(a=>this.patternCheck(a,i)):i===t.getDomain(e.domain)}patternCheck(e,i){return e.includes("*.")&&i.includes(e.replace("*.",""))||i===e}isAliexpress(e){return[S.aliexpressID,S.aliexpressWWID].includes(e)}isAliexpressGlobal(e){return e===S.aliexpressWWID}isAliexpressCis(e){return e===S.aliexpressID}isAliexpressProductPage(e){return S.REGEX_ALI_PRODUCT_ID.test(e)}getAliRunParams(e){try{const i=t.getRegexValue(e,/window\.runParams\s*=\s*({[.\s\S]+?});/gim)[1];return JSON.parse(i.split(" ").join("").split("\r").join("").split("\n").join("").replace("data",'"data"').replace("csrfToken",'"csrfToken"').replace(":'",':"').replace("',",'"').replace("abVersion",',"abVersion"').replace(":'",':"').replace("'}",'"}').replace("',",'",').replace("abtestMap",'"abtestMap"'))}catch{return!1}}getPrice(e,i){const r=document.body.textContent;let s,a,o={};if(e&&e.length>0)switch(e){case"aliexpress":if(s=r,a=i??this.getAliRunParams(s),a){o=this._getPriceAliexpressNewDesign(a);break}o=this.getPriceAliexpress(s);break;case"gearbest":case"ru.gearbest":o=this.getPriceGearbest();break;case"banggood":o=this.getPriceBanggood();break;case"us.banggood":case"eu.banggood":o=this.getPriceUsEuBanggood();break;case"lightinthebox":case"miniinthebox":o=this.getPriceLightinthebox();break;case"tomtop":o=this.getPriceTomtop(r)}return o.timezone=this.getTimeZoneOffset(),o}getTimeZoneOffset(){try{return(new Date).toString().match(/([-+][0-9]+)\s/)[1]}catch{return null}}getPriceGearbest(){try{let e=[...document.querySelector("#siteWrap").querySelectorAll("script")][0].innerText;e=e.match(/\s+appPrice:\s*"([\d.]+)",/im)[1];const i=parseFloat(parseFloat(e).toFixed(2)),r=i,o="USD";if(!o)throw new Error("getPriceObj currency bad string");if(i>r)throw new Error("getPriceObj priceMin > priceMax");if(!(i>0&&r>0))throw new Error("getPriceObj priceMin or priceMax less or equal 0");const s=this.getDisplayPriceGearBest();return{currency:o,priceMin:i,priceMax:r,currencyDisplay:s.currency,priceMinDisplay:s.priceMin,priceMaxDisplay:s.priceMax}}catch(e){return console.log("Error",e),{currency:null,priceMin:null,priceMax:null,currencyDisplay:null,priceMinDisplay:null,priceMaxDisplay:null}}}getPriceBanggood(){try{const e=document.querySelector(".item_box.price .now");let i=e&&parseFloat(e.getAttribute("oriattrmin")),r=e&&parseFloat(e.getAttribute("oriattrmax")),o=e&&parseFloat(e.getAttribute("oriprice")),s=null,a=[],c=document.documentElement.innerHTML.match(/fb_jsonNewFB\s*=\s*(\{.+\}),/i);if(c&&2===c.length)try{const u=JSON.parse(c[1]);!o&&u.value&&(o=parseFloat(u.value),a.push(o)),u.currency&&(s=u.currency)}catch{}if(c=document.documentElement.innerHTML.match(/var\s+google_tag_params\s*=\s*{.+ecomm_totalvalue:(.+),\s*ecomm_pagetype:/i),c&&2===c.length)try{const u=JSON.parse(c[1]);u&&"number"==typeof u?a.push(u):"object"==typeof u&&Array.isArray(u)&&(a=a.concat(u))}catch{}s&&(s=s.toUpperCase().trim()),(!i||o<i)&&(i=o),r||(r=i);for(const u of a)r<u?r=u:u&&i>u&&(i=u);if(document.querySelectorAll(".item_warehouse_list li").forEach(u=>{if(u&&"US"!==u.getAttribute("value")){const d=u.querySelector(".item_warehouse_price");parseFloat(d.getAttribute("oriprice"))<i&&(i=parseFloat(d.getAttribute("oriprice"))),parseFloat(d.getAttribute("oriprice"))>r&&(r=parseFloat(d.getAttribute("oriprice")))}}),!s)throw new Error("getPriceObj currency bad string");if(i>r)throw new Error("getPriceObj priceMin > priceMax");if(!(i>0&&r>0))throw new Error("getPriceObj priceMin or priceMax less or equal 0");const l=this.getDisplayPriceBanggood();return{currency:s,priceMin:i,priceMax:r,currencyDisplay:l.currency,priceMinDisplay:l.priceMin,priceMaxDisplay:l.priceMax}}catch(e){return console.log("Error",e),{currency:null,priceMin:null,priceMax:null,currencyDisplay:null,priceMinDisplay:null,priceMaxDisplay:null}}}getPriceUsEuBanggood(){try{const e=document.querySelector('.pro_price [itemprop="price"]'),i=parseFloat(e.textContent),r=parseFloat(e.textContent),o={USD:"US$",EUR:"\u20ac",GBP:"\xa3",AUD:"AU$",CAD:"CA$",RUB:"\u0440\u0443\u0431.",BRL:"R$",CHF:"SFr",DKK:"Dkr",PHP:"\u20b1",SGD:"S$",CZK:"K\u010d",HUF:"Ft",MXN:"Mex$",NOK:"Kr",NZD:"NZD$",PLN:"z\u0142",THB:"\u0e3f",HKD:"HK$",ILS:"\u20aa",SEK:"Kr",ZAR:"R",KRW:"\u20a9",CLP:"$",TRY:"TRY",INR:"Rs",JPY:"JPY",AED:"AED",MYR:"RM",IDR:"Rp",UAH:"\u20b4",KWD:"K.D.",QAR:"QR.",BHD:"BD.",SAR:"S.R."},s=Object.keys(o);let c,a=document.querySelector(".item_box.price .hbactive b").textContent;a||(a=document.querySelector(".pro_price .currency .currency_Prefix").textContent);for(const u in s)if(o[s[u]]===a){c=s[u];break}if(!c)throw new Error("getPriceObj currency bad string");if(i>r)throw new Error("getPriceObj priceMin > priceMax");if(!(i>0&&r>0))throw new Error("getPriceObj priceMin or priceMax less or equal 0");const l=this.getDisplayPriceBanggood();return{currency:c,priceMin:i,priceMax:r,currencyDisplay:l.currency,priceMinDisplay:l.priceMin,priceMaxDisplay:l.priceMax}}catch(e){return console.log("Error",e),{currency:null,priceMin:null,priceMax:null,currencyDisplay:null,priceMinDisplay:null,priceMaxDisplay:null}}}getPriceLightinthebox(){try{const e=document.querySelector('div[tabindex="0"]'),i=e&&e.getAttribute("data-cur").replace(/\s\s+/g," ").trim().toUpperCase(),r=document.querySelector("#_prodInfoConfig_"),o=JSON.parse(r&&r.getAttribute("data-config")),s=Object.keys(o)[0],a=parseFloat(o[s].salePrice);let c=a;const l=o[s].attributes;for(const u of l)for(const d of u.items)if(d.price>0){const f=parseFloat((a+parseFloat(d.price)).toFixed(2));f>c&&(c=f)}if(!i)throw new Error("getPriceObjLightinthebox currency bad string");if(a>c)throw new Error("getPriceObjLightinthebox priceMin > priceMax");if(!(a>0&&c>0))throw new Error("getPriceObjLightinthebox priceMin or priceMax less or equal 0");return{currency:i,priceMin:a,priceMax:c,currencyDisplay:i,priceMinDisplay:a,priceMaxDisplay:c}}catch(e){return console.log("Error",e),{currency:null,priceMin:null,priceMax:null,currencyDisplay:null,priceMinDisplay:null,priceMaxDisplay:null}}}getPriceTomtop(e){try{let i,r,o;try{i=JSON.parse(t.getRegexValue(e,/var\s+product\s*=(.*)/gim)[1])}catch{i=null}try{r=JSON.parse(t.getRegexValue(e,/var\s+mainContent\s*=(.*)?;/gim)[1])}catch{r=null}try{o=JSON.parse(t.getRegexValue(e,/var\s+timeLimit\s*=(.*)?;/gim)[1])}catch{o=null}const s=i?parseFloat(i.saleprice?i.saleprice:i.price):null,a=i?i.currency:null,c=[];"object"==typeof r&&r&&r.length>0&&r.forEach(y=>{"object"==typeof y.whouse&&y.whouse&&Object.keys(y.whouse).forEach(T=>{c.push({listingId:y.listingId,depotId:y.whouse[T].depotId,symbol:y.whouse[T].symbol,nowprice:parseFloat(y.whouse[T].nowprice),origprice:parseFloat(y.whouse[T].origprice),us_nowprice:parseFloat(y.whouse[T].us_nowprice),us_origprice:parseFloat(y.whouse[T].us_origprice),saleStartDate:y.whouse[T].saleStartDate,saleEndDate:y.whouse[T].saleEndDate})})});const l=[];"object"==typeof o&&o&&Object.keys(o).forEach(y=>{"object"==typeof o[y]&&o[y]&&Object.keys(o[y]).forEach(T=>{l.push({listingId:o[y][T].listingId,depotId:o[y][T].depot,actPrice:parseFloat(o[y][T].actPrice),nowprice:parseFloat(o[y][T].nowprice)})})});const u="USD",d=a,f={},h={},p={},g={},m=[];l.length>0&&l.forEach(y=>{m.push(`${y.depotId}_${y.listingId}`),f[y.listingId]||(f[y.listingId]=y.actPrice),h[y.listingId]||(h[y.listingId]=y.actPrice),y.actPrice<f[y.listingId]&&(f[y.listingId]=y.actPrice),y.actPrice>h[y.listingId]&&(h[y.listingId]=y.actPrice),p[y.listingId]||(p[y.listingId]=y.nowprice),g[y.listingId]||(g[y.listingId]=y.nowprice),y.nowprice<p[y.listingId]&&(p[y.listingId]=y.nowprice),y.nowprice>g[y.listingId]&&(g[y.listingId]=y.nowprice)}),c.length>0&&c.forEach(y=>{if(-1!==m.indexOf(`${y.depotId}_${y.listingId}`))return 0;f[y.listingId]||(f[y.listingId]=y.us_nowprice),h[y.listingId]||(h[y.listingId]=y.us_nowprice),y.us_nowprice<f[y.listingId]&&(f[y.listingId]=y.us_nowprice),y.us_nowprice>h[y.listingId]&&(h[y.listingId]=y.us_nowprice),p[y.listingId]||(p[y.listingId]=y.nowprice),g[y.listingId]||(g[y.listingId]=y.nowprice),y.nowprice<p[y.listingId]&&(p[y.listingId]=y.nowprice),y.nowprice>g[y.listingId]&&(g[y.listingId]=y.nowprice)});let v=null,_=null,E=null,I=null;if(Object.keys(f).forEach(y=>{v||(v=f[y]),f[y]<v&&(v=f[y])}),Object.keys(h).forEach(y=>{_||(_=h[y]),h[y]>_&&(_=h[y])}),Object.keys(p).forEach(y=>{E||(E=p[y]),p[y]<E&&(E=p[y])}),Object.keys(g).forEach(y=>{I||(I=g[y]),g[y]>I&&(I=g[y])}),E||(E=s),I||(I=s),s<E&&(E=s),s>I&&(I=s),!u)throw new Error("getPriceObj currency bad string");if(v>_)throw new Error("getPriceObj priceMin > priceMax");if(!(v>0&&_>0))throw new Error("getPriceObj priceMin or priceMax less or equal 0");if(!d)throw new Error("getPriceObj currencyDisplay bad string");if(E>I)throw new Error("getPriceObj priceMinDisplay > priceMaxDisplay");if(!(E>0&&I>0))throw new Error("getPriceObj priceMinDisplay or priceMaxDisplay less or equal 0");return{currency:u,priceMin:v,priceMax:_,currencyDisplay:d,priceMinDisplay:E,priceMaxDisplay:I}}catch(i){return console.error("Error",i),{currency:null,priceMin:null,priceMax:null,currencyDisplay:null,priceMinDisplay:null,priceMaxDisplay:null}}}getDisplayPriceBanggood(){try{const e={USD:{label:"US$",decimal:"."},EUR:{label:"\u20ac",decimal:","},GBP:{label:"\xa3",decimal:"."},AUD:{label:"AU$",decimal:"."},CAD:{label:"CA$",decimal:"."},RUB:{label:"\u0440\u0443\u0431.",decimal:","},BRL:{label:"R$",decimal:","},CHF:{label:"SFr",decimal:"."},DKK:{label:"Dkr",decimal:"."},PHP:{label:"\u20b1",decimal:"."},SGD:{label:"S$",decimal:"."},CZK:{label:"K\u010d",decimal:"."},HUF:{label:"Ft",decimal:"."},MXN:{label:"Mex$",decimal:"."},NOK:{label:"Kr",decimal:"."},NZD:{label:"NZD$",decimal:"."},PLN:{label:"z\u0142",decimal:","},THB:{label:"\u0e3f",decimal:"."},HKD:{label:"HK$",decimal:"."},ILS:{label:"\u20aa",decimal:"."},SEK:{label:"Kr",decimal:"."},ZAR:{label:"R",decimal:"."},KRW:{label:"\u20a9",decimal:"."},CLP:{label:"$",decimal:"."},TRY:{label:"TRY",decimal:"."},INR:{label:"\u20b9",decimal:"."},JPY:{label:"JPY",decimal:"."},AED:{label:"AED",decimal:"."},MYR:{label:"RM",decimal:"."},IDR:{label:"Rp",decimal:"."},UAH:{label:"\u20b4",decimal:"."},KWD:{label:"K.D.",decimal:"."},QAR:{label:"QR.",decimal:"."},BHD:{label:"BD.",decimal:"."},SAR:{label:"S.R.",decimal:"."},EGP:{label:"E\xa3",decimal:"."},OMR:{label:"RO.",decimal:"."},JOD:{label:"J.D.",decimal:"."},LBP:{label:"\uffe1L",decimal:"."},COP:{label:"COP$",decimal:"."},PEN:{label:"PEN",decimal:","}},i=/\d{1,3}(?:[.,\s]\d{1,3})*(?:[.,]\d{1,3})|\d{1,3}/gm,o=(document.querySelector(".product-price .main-price")||document.querySelector(".item-box-price .price")).textContent,s=o.match(i),a=o.replace(i,"").replace("-","").trim(),c=Object.keys(e).find(p=>a===e[p].label);if(!c)throw new Error("getPriceObj currency bad string");const l=p=>{let m=(p.match(i)||[]).find(v=>v.length>0);return m&&c?(m=m.replace(e[c].decimal,"~").replace(",","").replace(".","").replace("~","."),+m.replace(" ","")):null};if(!s||1!==s.length&&2!==s.length||!s[0])throw new Error("getPriceObj can not match");const d=s[1]??s[0],f=l(s[0]);let h=l(d);if(0===f)throw new Error("getPriceObj priceMin should be more than 0");if(h||(h=f),f>h)throw new Error("getPriceObj priceMin > priceMax");if(!(f>0&&h>0))throw new Error("getPriceObj priceMin or priceMax less or equal 0");return{currency:c,priceMin:f,priceMax:h}}catch(e){return console.log("Error",e),{currency:null,priceMin:null,priceMax:null}}}getDisplayPriceGearBest(){const e=document.querySelector(".goodsIntro_price").textContent;try{const i={AED:"\u062f.\u0625",AUD:"AU$",BGN:"\u043b\u0432",BRL:"R$",CAD:"C$",CHF:"SFr.",CLP:"CL$",CNY:"\xa5",COP:"Col$",CZK:"K\u010d",DKK:"DKr.",EUR:"\u20ac",GBP:"\xa3",HKD:"HK$",HRK:"Kn",HUF:"Ft",IDR:"Rp",ILS:"\u20aa",INR:"Rs",JPY:"\u5186",KRW:"\u20a9",MAD:"\u062f.\u0645.",MXN:"MXN$",MYR:"RM",NGN:"\u20a6",NOK:"NKr.",NZD:"NZ$",PEN:"S/.",PLN:"z\u0142",RON:"lei",RSD:"\u0420\u0421\u0414",RUB:"\u0440\u0443\u0431.",SAR:"\u0631.\u0633",SEK:"SKr",SGD:"S$",THB:"\u0e3f",TRY:"TL",TWD:"NT$",UAH:"\u20b4",USD:"$",ZAR:"R"},r=Object.keys(i);let o;for(const c in r)if(-1!==e.toLowerCase().indexOf(i[r[c]].toLowerCase())){o=r[c];break}if(!o)throw new Error("getPriceObj currency bad string");if("string"!=typeof e)throw new Error("getPriceObj priceText not string");const s=parseFloat(e.replace(/\s+/g,"").replace(",",".").match(/\d+[.\d+]*/gim)[0]),a=s;if(s>a)throw new Error("getPriceObj priceMin > priceMax");if(!(s>0&&a>0))throw new Error("getPriceObj priceMin or priceMax less or equal 0");return{currency:o,priceMin:s,priceMax:a}}catch(i){return console.log("Error",i),{currency:null,priceMin:null,priceMax:null}}}getPriceAliexpress(e){let i;try{let r,o;i=this.getPriceStrAliexpress();try{r=parseFloat(parseFloat(t.getRegexValue(e,S.REGEX_ACT_MIN_PRICE)[1]).toFixed(2))}catch{r=parseFloat(parseFloat(t.getRegexValue(e,S.REGEX_MIN_PRICE)[1]).toFixed(2))}try{o=parseFloat(parseFloat(t.getRegexValue(e,S.REGEX_ACT_MAX_PRICE)[1]).toFixed(2))}catch{o=parseFloat(parseFloat(t.getRegexValue(e,S.REGEX_MAX_PRICE)[1]).toFixed(2))}const s=t.getRegexValue(e,S.REGEX_BASE_CURRENCY_CODE)[1];if(!s)throw new Error("getPriceObj currency bad string");if(r>o)throw new Error("getPriceObj priceMin > priceMax");if(!(r>0&&o>0))throw new Error("getPriceObj priceMin or priceMax less or equal 0");const a=this.getDisplayPriceAliexpress(i);return{currency:s,priceMin:r,priceMax:o,currencyDisplay:a.currency,priceMinDisplay:a.priceMin,priceMaxDisplay:a.priceMax}}catch{try{const o=this.getDisplayPriceAliexpress(i);return{currency:null,priceMin:null,priceMax:null,currencyDisplay:o.currency,priceMinDisplay:o.priceMin,priceMaxDisplay:o.priceMax}}catch(o){return console.log("Error",o),{currency:null,priceMin:null,priceMax:null,currencyDisplay:null,priceMinDisplay:null,priceMaxDisplay:null}}}}getDisplayPriceAliexpress(e){try{if("string"!=typeof e)throw new Error("getPriceObj priceText not string");const i=[[/US.*\$/gim,"USD","."],[/\u0440\u0443\u0431\./gim,"RUB",","],[/\uffe1/gim,"GBP","."],[/R\$/gim,"BRL",","],[/C\$/gim,"CAD","."],[/AU.*\$/gim,"AUD","."],[/\u20ac/gim,"EUR",","],[/Rs\./gim,"INR","."],[/\u0433\u0440\u043d\./gim,"UAH",","],[/\uffe5/gim,"JPY","."],[/MXN\$/gim,"MXN","."],[/Rp/gim,"IDR","."],[/TL/gim,"TRY","."],[/SEK/gim,"SEK","."],[/CLP/gim,"CLP","."],[/\u20a9/gim,"KRW","."],[/SG\$/gim,"SGD","."],[/NZ\$/gim,"NZD","."],[/CHF/gim,"CHF","."],[/z\u0142/gim,"PLN",","],[/AED./gim,"AED","."],[/PHP./gim,"PHP","."],[/ZAR./gim,"ZAR","."],[/ARS./gim,"ARS",","],[/PEN./gim,"PEN",","]];let r=null,o=null;for(let u=0;u<i.length;u++){const d=i[u];if(d[0].test(e)){r=d[1],o=d[2],e=e.replace(d[0],"");break}}if(null===r||null===o)throw new Error("getPriceObj can not find currency (USD, RUB)");const s=e.toLowerCase().match(/[\d.,-]+/gim).join("").split("-");if(!s||1!==s.length&&2!==s.length||!s[0])throw new Error("getPriceObj can not match");(-1!==s[0].indexOf(",")&&-1!==s[0].indexOf(".")&&s[0].indexOf(",")<s[0].indexOf(".")||-1===s[0].indexOf(",")&&s[0].match(/\./gim)&&1===s[0].match(/\./gim).length)&&(o=".");const a=new RegExp(`[^0-9-${o}]`,"g"),c=parseFloat(s[0].replace(a,"").replace(o,"."));let l=c;if(s[1]&&(l=parseFloat(s[1].replace(a,"").replace(o,"."))),c>l)throw new Error("getPriceObj priceMin > priceMax");if(!(c>0&&l>0))throw new Error("getPriceObj priceMin or priceMax less or equal 0");return{currency:r,priceMin:c,priceMax:l}}catch(i){return console.log("Error",i),{currency:null,priceMin:null,priceMax:null}}}getPriceStrAliexpress(){let e=document.querySelector("div.product-price span.product-price-current")?.textContent;return e||(e=document.querySelector(".p-price-content .p-symbol, .p-price-content .p-price")?.textContent),e||(e=document.querySelector("div.p-price span.p-price")?.textContent),e||(e=document.querySelector(".detail-price-container .price-span")?.textContent),e||(e=document.querySelector("span[class^='Product_UniformBanner__uniformBannerBoxPrice__']")?.textContent),e||(e=document.querySelector("div.uniform-banner-box span.uniform-banner-box-price")?.innerText),e||(e=document.querySelector("div.product-price-current")?.innerText),e}_getPriceAliexpressNewDesign(e){try{let i=null,r=null;const o=this._getCurrencyPriceAliexpressNewDesign(e),s=e.data.skuModule.skuPriceList;for(const c in s)if(s[c]&&s[c].skuVal){const l=parseFloat(s[c].skuVal.actSkuCalPrice||s[c].skuVal.skuCalPrice);(null===i||i>l)&&(i=l),(null===r||r<l)&&(r=l)}const a=this._getDisplayPriceAliexpressNewDesign(e);return{currency:o,priceMin:i,priceMax:r,currencyDisplay:a.currency,priceMinDisplay:a.priceMin,priceMaxDisplay:a.priceMax}}catch{try{const r=this._getDisplayPriceAliexpressNewDesign(e);return{currency:null,priceMin:null,priceMax:null,currencyDisplay:r.currency,priceMinDisplay:r.priceMin,priceMaxDisplay:r.priceMax}}catch(r){return console.log("Error",r),{currency:null,priceMin:null,priceMax:null,currencyDisplay:null,priceMinDisplay:null,priceMaxDisplay:null}}}}_getCurrencyPriceAliexpressNewDesign(e){try{const i=e.data.skuModule.skuPriceList[0].skuVal,r=parseFloat(i.actSkuCalPrice?i.actSkuCalPrice:i.skuCalPrice),o=i.skuActivityAmount?i.skuActivityAmount:i.skuAmount,s=parseFloat(o.value),a=o.currency;if(!(r>0&&s>0))throw new Error("Can not detect currency");if(r===s)return a;const c=e.data.commonModule;return c.tradeCurrencyCode!==c.currencyCode?c.tradeCurrencyCode:"USD"}catch{return null}}_getDisplayPriceAliexpressNewDesign(e){try{const i=e.data.priceModule;return{currency:i.minActivityAmount?i.minActivityAmount.currency:i.minAmount.currency,priceMin:i.minActivityAmount?i.minActivityAmount.value:i.minAmount.value,priceMax:i.maxActivityAmount?i.maxActivityAmount.value:i.maxAmount.value}}catch{return{currency:null,priceMin:null,priceMax:null}}}static \u0275fac=function(i){return new(i||t)(w(Qe))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class L7{id;name;shortName;machineName;parentId;weight;count;attribute;mapping;constructor(n){this.id=n.id,this.name=n.name,this.shortName=n.shortName,this.machineName=n.machineName,this.parentId=n.parentId,this.weight=n.weight,this.count=n.count,this.attribute=n.attribute,this.mapping=n.mapping}}let ix=(()=>{class t{cacheService;eapiService;constructor(e,i){this.cacheService=e,this.eapiService=i}cachePrefix="merchants";cacheCategoriesKey="categories";cacheCategoriesTime=72e5;static serialize(e){const i={};return e.forEach(r=>{i[r.id]=new L7(r)}),i}fetch(){this.eapiService.getMerchantsCategories().then(e=>{if(!e||!e.data)return;const{data:i}=e,r=t.serialize(i);r&&this.cacheService.set(this.cachePrefix,this.cacheCategoriesKey,this.cacheCategoriesTime,r)})}get categories(){return this.cacheService.get(this.cachePrefix,this.cacheCategoriesKey)}getById(e){var i=this;return C(function*(){return(yield i.categories)[e]})()}getByIds(e){var i=this;return C(function*(){const r=yield i.categories,o=[];return e.forEach(s=>{o.push(r[s])}),o})()}static \u0275fac=function(i){return new(i||t)(w(Qe),w(bc))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ki=(()=>{class t{_extVersion;browser;browserVersion;os;osVersion;bit;mobile=0;constructor(){this.init()}get extVersion(){return this._extVersion}get browserInfo(){return{name:this.browser,version:this.browserVersion}}get osInfo(){return{name:this.os,version:this.osVersion}}get isMobile(){return!!this.mobile}get fullInfo(){return{browser:this.browser.toLowerCase(),version:this.browserVersion,mobile:this.isMobile,os:this.os,osversion:this.osVersion,bit:this.bit}}isBrowser(e){return this.browser.toLowerCase()===e.toLowerCase()}init(){const e=window.navigator.userAgent||"";let i=window.navigator.platform||"";this._extVersion=chrome.runtime.getManifest().version,/MSIE/.test(e)?(this.browser="Internet Explorer",/IEMobile/.test(e)&&(this.mobile=1),this.browserVersion=/MSIE \d+[.]\d+/.exec(e)[0].split(" ")[1]):/YaBrowser/.test(e)?(/CrOS/.test(e)&&(i="CrOS"),this.browser="YaBrowser",this.browserVersion=/YaBrowser\/[\d.]+/.exec(e)[0].split("/")[1]):/Opera/.test(e)||/OPR/.test(e)?(this.browser="Opera",this.browserVersion=/OPR\/[\d.]+/.exec(e)[0].split("/")[1],(/mini/.test(e)||/Mobile/.test(e))&&(this.mobile=1)):/Chrome/.test(e)?(/CrOS/.test(e)&&(i="CrOS"),this.browser="Chrome",this.browserVersion=/Chrome\/[\d.]+/.exec(e)[0].split("/")[1]):/Android/.test(e)?(this.browser="Android Webkit Browser",this.mobile=1,this.os=/Android\s[.\d]+/.exec(e)[0]):/Firefox/.test(e)?(this.browser="Firefox",/Fennec/.test(e)&&(this.mobile=1),this.browserVersion=/Firefox\/[.\d]+/.exec(e)[0].split("/")[1]):/Safari/.test(e)&&(this.browser="Safari",(/iPhone/.test(e)||/iPad/.test(e)||/iPod/.test(e))&&(this.os="iOS",this.mobile=1)),this.browserVersion||(this.browserVersion=/Version\/[.\d]+/.exec(e).toString(),this.browserVersion=this.browserVersion?this.browserVersion[0].split("/")[1]:this.extVersion),"MacIntel"===i||"MacPPC"===i?(this.os="Mac OS X",this.osVersion=G.getRegexValue(e,/[\d\\_]+[\d]+/gim)[0],this.osVersion&&(this.osVersion=this.osVersion.split("_").join("."))):"CrOS"===i?this.os="ChromeOS":"Win32"===i||"Win64"===i?(this.os="Windows",this.bit=i.replace(/[^0-9]+/,"")):!this.os&&/Android/.test(e)?this.os="Android":!this.os&&/Linux/.test(i)?this.os="Linux":!this.os&&/Windows/.test(e)&&(this.os="Windows")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pt=(()=>{class t{browserToolsService;static NEW_TAB="NEW_TAB";static CURRENT_TAB="CURRENT_TAB";static NEW_WINDOW="NEW_WINDOW";static ALL_TABS="ALL_TABS";static EVENT_ACTION="NAVIGATION";constructor(e){this.browserToolsService=e}navigate(e){return chrome.runtime.sendMessage({...e,action:t.EVENT_ACTION})}get currentBrowser(){return this.browserToolsService.browserInfo.name}buildUrl(e,i){return`${e}?${i}`}buildQueryString(e){const i=new URLSearchParams(e);return i.append("utm_source","extension"),i.append("utm_term",this.currentBrowser),i.toString()}static \u0275fac=function(i){return new(i||t)(w(Ki))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),F7=(()=>{class t extends Pt{constructor(){super(),chrome.runtime.onMessage.addListener(e=>{e.action===Pt.EVENT_ACTION&&this.navigate({url:e.url,tabId:e.tabId??Pt.CURRENT_TAB})})}navigate(e){return new Promise(i=>{const{url:r,tabId:o}=e;switch(o||Pt.CURRENT_TAB){case Pt.CURRENT_TAB:return chrome.tabs.query({active:!0,currentWindow:!0},s=>{0<s.length&&i(chrome.tabs.update(s[0].id,{url:r}))}),i(!1);case Pt.NEW_WINDOW:return i(chrome.windows.create({url:r,active:!0}));case Pt.ALL_TABS:return chrome.windows.getAll({populate:!0},s=>{s.forEach(a=>{a.tabs.forEach(c=>{i(chrome.tabs.update(c.id,{url:r}))})})}),i(!1);case Pt.NEW_TAB:return chrome.tabs.create({url:r,active:!0});default:return chrome.tabs.get(+o,s=>{if(s)return i(chrome.tabs.update(+o,{url:r}))}),i(!1)}})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Xi(t){return Ft((n,e)=>{let o,i=null,r=!1;i=n.subscribe(Bt(e,void 0,void 0,s=>{o=pn(t(s,Xi(t)(n))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}class d_{bonus;desc;exclude_shop_ids;shop_ids;constructor(n){this.bonus=n.bonus,this.desc=n.desc,this.exclude_shop_ids=n.exclude_shop_ids,this.shop_ids=n.shop_ids}static serialize(n){const e=[];return n&&n.length&&n.forEach(i=>{e.push(new d_(i))}),e}}let V7=(()=>{class t{httpClient;eventService;cacheService;localeService;configService;letyCodesUrl="/user/lety-codes";cacheLetyCodesPrefix="user";cacheLetyCodesKey="codes";_updateCodesInterval;constructor(e,i,r,o,s){this.httpClient=e,this.eventService=i,this.cacheService=r,this.localeService=o,this.configService=s}get baseUrl(){return V._api}url(){var e=this;return C(function*(){return`${e.baseUrl}${e.letyCodesUrl}`})()}getRates(){var e=this;return C(function*(){const i=yield e.cacheService.get(e.cacheLetyCodesPrefix,e.cacheLetyCodesKey);if(i&&Array.isArray(i)&&i)return i;const r=yield e.fetchCodes();return yield e.updateRatesInCache(r),yield e.setUpdateCodesInterval(),r})()}fetchCodes(){var e=this;return C(function*(){const i=`?locale=${e.localeService.locale}&version-ext=${chrome.runtime.getManifest().version}`;return le(e.httpClient.get(`${e.baseUrl}${e.letyCodesUrl}${i}`,{withCredentials:!0}).pipe(tt(r=>d_.serialize(r)),Xi(()=>Xe([]))))})()}updateRatesInCache(e){var i=this;return C(function*(){const r=yield i.configService.getParameter(re.UPDATE_INTERVAL_CODES);i.cacheService.set(i.cacheLetyCodesPrefix,i.cacheLetyCodesKey,r,e),yield i.triggerRatesChangeEvents(e)})()}triggerRatesChangeEvents(e){this.eventService.fireEvent(b.UPDATE_LETY_CODES,{data:{letyCodes:e}})}updateRates(){var e=this;return C(function*(){const i=yield e.fetchCodes();return yield e.updateRatesInCache(i),yield e.setUpdateCodesInterval(),i})()}clearCache(){this.cacheService.remove(this.cacheLetyCodesPrefix,this.cacheLetyCodesKey)}setUpdateCodesInterval(){var e=this;return C(function*(){const i=yield e.configService.getParameter(re.UPDATE_INTERVAL_CODES);clearInterval(e._updateCodesInterval),e._updateCodesInterval=setInterval(()=>{e.updateRates()},i)})()}static \u0275fac=function(i){return new(i||t)(w(It),w(b),w(Qe),w(zt),w(re))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class j7{balanceApproved;balancePending;currency;currencyFormatted;totalBalance;constructor(n){this.balanceApproved=n.balance_approved,this.balancePending=n.balance_pending,this.currency=n.currency,this.currencyFormatted=n.currency_formatted,this.totalBalance=n.total_balance}}class Dc{token=void 0;rates;notifications=[];balance;balanceInfo;country;deliveryCountry;experiments;image;language;name;partnerPercent;partnerUrl;segments;favorites;recommended;viewed;tokenCookies;googleAnalyticsCID;gaClientId="";gaSessionId="";constructor(n){this.token=n.id.toString(),this.balance=n.balance,this.balanceInfo=new j7(n.balance_info),this.country=n.country,this.deliveryCountry=n.delivery_country,this.experiments=n.experiments,this.image=n.image,this.language=n.language,this.name=n.name,this.partnerPercent=n.partner_percent,this.partnerUrl=n.partner_url,this.segments=n.segments,this.favorites=n.shops_liked,this.recommended=n.shops_recomended,this.viewed=n.shops_viewed}static serialize(n){return n&&n&&n.name&&n.id?new Dc(n):{token:void 0,name:"",balanceInfo:null,image:"https://image.letyshops.com/sites/default/files/pictures/ava-def.png",partnerUrl:"",partnerPercent:15,rates:[],notifications:[],favorites:[],recommended:[],viewed:[],language:"",country:"",deliveryCountry:"",segments:[],experiments:[],tokenCookies:null,googleAnalyticsCID:null,gaClientId:"",gaSessionId:""}}}let f_=(()=>{class t{utilsService;counter="";iconPath="images/btn/";icons={standard:`${this.iconPath}logo18.png`,green:`${this.iconPath}logo18green.png`,red:`${this.iconPath}logo18red.png`,animated:`${this.iconPath}logo19.svg`,rainbow:`${this.iconPath}logo18rainbow.svg`,safari:`${this.iconPath}logo18safari.png`,safari_act:`${this.iconPath}logo18safari_activated.png`,safari_info:`${this.iconPath}logo18safari_info.png`};browserAction;_animation=!1;constructor(e){this.utilsService=e,this.browserAction=3===chrome.runtime.getManifest().manifest_version?chrome.action:chrome.browserAction}get animation(){return this._animation}set animation(e){this._animation=e}green(){this.setIcon("green")}red(){this.setIcon("red")}standard(){this.setIcon("standard")}setBadge(e=""){(e&&("number"==typeof e||"!"===e)||null!==e)&&(this.counter=e.toString()),this.browserAction.setBadgeText({text:this.counter})}clearCounter(){"!"!==this.counter&&(this.counter="",this.setBadge())}setTitle(e){this.browserAction.setTitle({title:e||"LetyShops \u2014 Cashback Service"})}setIcon(e){this.browserAction.setIcon({path:this.icons[e]})}pulseIcon(e=350){var i=this;return new Promise((r,o)=>{C(function*(){for(let s=0;s<=4;s++){if(!i.animation)return o();yield i.utilsService.sleep(e),i.red(),yield i.utilsService.sleep(e),i.standard()}return yield i.utilsService.sleep(e),i.animation?r():o()})()})}static \u0275fac=function(i){return new(i||t)(w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Wn=(()=>{class t{httpClient;eventService;cacheService;letyCodeService;configService;iconService;datePipe;localeService;utilsService;userUrl="/user";userValidUrl="/user-valid";pathUserPartnerData="/user/partner-system";cacheNotificationPrefix=S.GLOBAL_CACHE_PREFIX;cacheNotificationKey="user.notifications";cacheForceUpdateTimePrefix=S.GLOBAL_CACHE_PREFIX;cacheForceUpdateTimeKey="user.force_update";partnerSystemPrefix="user";partnerSystemKey="partner.system";userLastTokenStoreKey="userLastTokenStoreKey";cacheUserResponsePrefix=S.GLOBAL_CACHE_PREFIX;cacheUserResponseKey="user.response";cacheUserValidResponseKey="user.valid.response";_user;_userForceUpdateInterval;_userNotificationUpdateInterval;updateInterval=18e5;userCacheTime=18e5;constructor(e,i,r,o,s,a,c,l,u){this.httpClient=e,this.eventService=i,this.cacheService=r,this.letyCodeService=o,this.configService=s,this.iconService=a,this.datePipe=c,this.localeService=l,this.utilsService=u,this._user=Dc.serialize(),this.attachListeners()}init(){var e=this;return C(function*(){let i;if(2===chrome.runtime.getManifest().manifest_version)i=yield e.fetchUser();else if(i=yield e.cacheService.get(e.cacheUserResponsePrefix,e.cacheUserResponseKey),i?.id){const{isLogged:o,sameUser:s}=yield e.checkUserValid(i.id);(!o||!s)&&(i=yield e.fetchUser())}else{const o=yield e.cacheService.get(e.cacheUserResponsePrefix,e.cacheUserValidResponseKey);(!0===o?.isLogged||void 0===o)&&(i=yield e.fetchUser())}yield e.initUserData(i),e.isLogin&&(yield Promise.all([e.runForceUpdateInterval(),e.userNotificationUpdateInterval()]))})()}get user(){return this._user}set user(e){this._user=e}get isLogin(){return!!this.user?.token}attachListeners(){var e=this;this.eventService.attachEvent(b.GET_INFO_USER,C(function*(){return e.user})),this.eventService.attachEvent(b.ON_USER_LOGIN,function(){var i=C(function*(r){const{cookie:o}=r.data;yield e.logIn(o)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.ON_USER_LOGOUT,C(function*(){yield e.logOut()})),this.eventService.attachEvent(b.UPDATE_USER_FORCE,C(function*(){const i=yield e.fetchUser();yield e.initUserData(i)})),this.eventService.attachEvent(b.GET_USER_PARTNER_DATA,C(function*(){return e.getPartnerData()})),this.eventService.attachEvent(b.PUSH_USER_REVIEWED_NOTIFICATIONS,function(){var i=C(function*(r){const{id:o}=r.data;yield e.pushReviewedNotifications(o)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.CLEAR_USER_PARTNER_DATA,()=>{this.clearPartnerSystemDataCache()}),this.eventService.attachEvent(b.REFRESH_ALL,C(function*(){e.clearPartnerSystemDataCache(),e.cacheService.remove(e.cacheNotificationPrefix,e.cacheNotificationKey),yield e.updateUserRates()})),this.eventService.attachEvent(b.UPDATE_LETY_CODES,i=>{const{letyCodes:r}=i.data;this.user.rates=r??[]}),this.eventService.attachEvent(b.UPDATE_USER_SETTINGS,i=>{const{item:r,value:o}=i.data;return this.saveSettings(r,o)}),this.eventService.attachEvent(b.GET_USER_SETTINGS,()=>this.settings())}get baseUrl(){return V._api}checkUserValid(e){var i=this;return C(function*(){const r=`?version-ext=${chrome.runtime.getManifest().version}${e?"&user-id="+e:""}`;return le(i.httpClient.get(`${i.baseUrl}${i.userValidUrl}${r}`,{withCredentials:!0}).pipe(tt(o=>(i.cacheService.set(i.cacheUserResponsePrefix,i.cacheUserValidResponseKey,2*i.userCacheTime,o),{isLogged:o.isLogged,sameUser:o.sameUser})),Xi(()=>Xe({isLogged:!1,sameUser:!1}))))})()}fetchUser(){var e=this;return C(function*(){const i=`?locale=${e.localeService.locale}&version-ext=${chrome.runtime.getManifest().version}`;return le(e.httpClient.get(`${e.baseUrl}${e.userUrl}${i}`,{withCredentials:!0}).pipe(io(r=>{3===chrome.runtime.getManifest().manifest_version&&(e.cacheService.set(e.cacheUserResponsePrefix,e.cacheUserResponseKey,e.userCacheTime,r),r?.id||e.cacheService.set(e.cacheUserResponsePrefix,e.cacheUserValidResponseKey,2*e.userCacheTime,{isLogged:!1}))})))})()}initUserData(e){var i=this;return C(function*(){if(i.user=Dc.serialize(e),i.isLogin){const s=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,"locale"),a=`${i.user.language}_${i.user.country}`;i.cacheService.set(S.GLOBAL_CACHE_PREFIX,"locale",1/0,a),(!s||s!==a)&&(yield i.eventService.fireEvent(b.LOAD_USER_LANGUAGE,{data:{user:i.user}})),i.user.notifications=yield i.getUserNotifications(`${i.localeService.locale}`),i.user.googleAnalyticsCID=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,"googleAnalyticsCID");const c=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,"userTokenCookies");c&&c.token===i.user.token&&(i.user.tokenCookies=c.tokenCookies),i.configService.getParameter(re.UPDATE_INTERVAL_USER_FORCE).then(l=>{i.cacheService.set(i.cacheForceUpdateTimePrefix,i.cacheForceUpdateTimeKey,l,Date.now())})}const r=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,"GA4ClientIdAndSessionId");i.user.gaClientId=r?.gaClientId,i.user.gaSessionId=r?.gaSessionId,yield i.cacheService.set(S.GLOBAL_CACHE_PREFIX,"deliveryCountry",1/0,i.user.deliveryCountry),(yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,i.userLastTokenStoreKey))!==i.user.token&&(yield i.eventService.fireEvent(b.REFRESH_ALL,{tabId:null}),yield i.eventService.fireEvent(b.USER_WAS_UPDATED,{data:{user:i.user}})),yield i.cacheService.set(S.GLOBAL_CACHE_PREFIX,i.userLastTokenStoreKey,1/0,i.user.token),i.user.rates=yield i.letyCodeService.getRates()})()}checkAndForceUserUpdate(){var e=this;return C(function*(){if(!(yield e.cacheService.get(e.cacheForceUpdateTimePrefix,e.cacheForceUpdateTimeKey))){const r=yield e.fetchUser();yield e.initUserData(r)}})()}runForceUpdateInterval(){var e=this;return C(function*(){clearInterval(e._userForceUpdateInterval),e._userForceUpdateInterval=setInterval(C(function*(){yield e.checkAndForceUserUpdate(),e.isLogin||clearInterval(e._userForceUpdateInterval)}),e.updateInterval)})()}userNotificationUpdateInterval(){var e=this;return C(function*(){const i=yield e.configService.getParameter(re.USER_NOTIFY_INTERVAL);clearInterval(e._userNotificationUpdateInterval),e._userNotificationUpdateInterval=setInterval(C(function*(){e.isLogin?e.user.notifications=yield e.updateUserNotifications():clearInterval(e._userNotificationUpdateInterval)}),i)})()}updateUserRates(){var e=this;return C(function*(){yield e.letyCodeService.updateRates()})()}logIn(e){var i=this;return C(function*(){if(e&&i.user&&i.user.token===e)return;i.letyCodeService.clearCache();const r=yield i.fetchUser();yield i.initUserData(r),i.isLogin?(yield i.runForceUpdateInterval(),yield i.userNotificationUpdateInterval(),yield i.handleOfflineFavorites()):yield i.logOut()})()}logOut(){var e=this;return C(function*(){e.user=Dc.serialize(),clearInterval(e._userForceUpdateInterval),clearInterval(e._userNotificationUpdateInterval),e.iconService.clearCounter(),yield e.clearAllCache(),yield e.eventService.fireEvent(b.REFRESH_ALL,{tabId:null}),e.user.rates=yield e.letyCodeService.getRates()})()}clearAllCache(){var e=this;return C(function*(){yield e.cacheService.remove(e.cacheNotificationPrefix,e.cacheNotificationKey),yield e.cacheService.remove(S.GLOBAL_CACHE_PREFIX,"similarList"),yield e.cacheService.remove("merchants","viewedMerchants"),yield e.cacheService.remove(S.GLOBAL_CACHE_PREFIX,"deliveryCountry"),yield e.cacheService.remove(S.GLOBAL_CACHE_PREFIX,"userTokenCookies"),yield e.cacheService.remove(S.GLOBAL_CACHE_PREFIX,"googleAnalyticsCID"),yield e.cacheService.remove(S.GLOBAL_CACHE_PREFIX,S.OFFLINE_LIKES),yield e.cacheService.remove(S.GLOBAL_CACHE_PREFIX,"GA4ClientIdAndSessionId"),yield e.cacheService.set(S.GLOBAL_CACHE_PREFIX,e.userLastTokenStoreKey,1/0,e.user.token),3===chrome.runtime.getManifest().manifest_version&&(yield e.cacheService.remove(e.cacheUserResponsePrefix,e.cacheUserResponseKey),yield e.cacheService.remove(e.cacheUserResponsePrefix,e.cacheUserValidResponseKey)),e.clearPartnerSystemDataCache()})()}getUserNotifications(e){var i=this;return C(function*(){let r=yield i.cacheService.get(i.cacheNotificationPrefix,i.cacheNotificationKey);if(r)return r;r=yield i.fetchUserNotifications(e);const o=yield i.configService.getParameter(re.USER_NOTIFY_INTERVAL);return i.handleUnreadUserNotification(r),i.cacheService.set(i.cacheNotificationPrefix,i.cacheNotificationKey,o,r),r})()}updateUserNotifications(){var e=this;return C(function*(){const i=yield e.fetchUserNotifications(),r=yield e.configService.getParameter(re.USER_NOTIFY_INTERVAL);return e.handleUnreadUserNotification(i),e.cacheService.set(e.cacheNotificationPrefix,e.cacheNotificationKey,r,i),i})()}fetchUserNotifications(e){var i=this;return C(function*(){return le(i.httpClient.get(`${V.getUserNotifications}?locale=${e??i.localeService.locale}`,{withCredentials:!0}).pipe(tt(o=>o&&0!==o.length?o.map(s=>({id:s.id.toString(),status:s.status,markup:s.markup,showed:2===parseInt(s.status),date:s.date,url:s.url,type:s.type})):[]),Xi(()=>Xe([]))))})()}pushReviewedNotifications(e){var i=this;return C(function*(){i.user.notifications.filter(s=>s.id===e)&&le(i.httpClient.post(V.getUserNotifications,JSON.stringify({notification_ids:[e]}),{withCredentials:!0})).then(function(){var s=C(function*(a){a&&(i.user.notifications=yield i.updateUserNotifications())});return function(a){return s.apply(this,arguments)}}()).catch(s=>console.error(s))})()}handleUnreadUserNotification(e){const i=e.filter(r=>"1"===r.status);i&&i.length?(this.iconService.setBadge(i.length.toString()),this.eventService.fireEvent(b.SEND_USER_NOTIFICATION_LOGS,{data:{arrayNotifications:i,notificationEvent:"fetchUserNotification"}})):this.iconService.clearCounter()}getPartnerData(){var e=this;return C(function*(){const i=yield e.cacheService.get(e.partnerSystemPrefix,e.partnerSystemKey);if(i)return i;const r=yield e.fetchPartnerSystemData();return r?(yield e.setPartnerSystemDataToCache(r),r):{}})()}fetchPartnerSystemData(){var e=this;return C(function*(){return le(e.httpClient.get(`${e.baseUrl}${e.pathUserPartnerData}?locale=${e.localeService.locale}`,{withCredentials:!0})).then(r=>!(!r||!r.title&&!r.description)&&e.utilsService.objectKeysTransform(r)).catch(()=>!1)})()}setPartnerSystemDataToCache(e){var i=this;return C(function*(){const r=yield i.configService.getParameter(re.UPDATE_INTERVAL_USER_PARTNER_SETTINGS);i.cacheService.set(i.partnerSystemPrefix,i.partnerSystemKey,r/2,e)})()}clearPartnerSystemDataCache(){this.cacheService.remove(this.partnerSystemPrefix,this.partnerSystemKey)}rewriteViewed(e){var i=this;return C(function*(){if(!e)return;let r;r=[...new Set([e,...i.user.viewed||[]])],r&&r.length>20&&(r=r.slice(0,20));const s=r.map(a=>!!a&&a);i.user.viewed=s,i.cacheService.set("merchants","viewedMerchants",1/0,s)})()}addToFavorites(e){var i=this;return C(function*(){const r=yield i.sendLiked(e);if(i.isLogin&&(i.user.favorites=[...i.user.favorites,e]),!i.isLogin||!r){const o=(yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,S.OFFLINE_LIKES))||[];o.push(e),i.cacheService.set(S.GLOBAL_CACHE_PREFIX,S.OFFLINE_LIKES,1/0,o)}})()}removeFromFavorites(e){var i=this;return C(function*(){const r=yield i.sendDisliked(e);if(i.isLogin){const o=new Set([...i.user.favorites]);o.delete(e),i.user.favorites=[...o]}if(!i.isLogin||!r){const o=(yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,S.OFFLINE_LIKES))||[],s=new Set(o);s.delete(e)&&i.cacheService.set(S.GLOBAL_CACHE_PREFIX,S.OFFLINE_LIKES,1/0,[...s])}})()}handleOfflineFavorites(){var e=this;return C(function*(){const i=(yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,S.OFFLINE_LIKES))||[];i.length&&(yield e.mergeOfflineLikesWithUser(i),i.forEach(r=>e.sendLiked(r)))})()}mergeOfflineLikesWithUser(e){var i=this;return C(function*(){const r=new Set([...i.user.favorites,...e]);i.user.favorites=[...r]})()}sendLiked(e){return le(this.httpClient.post(V.favoriteMerchants,JSON.stringify({shops_liked:[{shop_id:`${e}`,date:this.datePipe.transform(new Date,"yyyy-MM-dd'T'HH:mm:ssZZZZZ")}]}),{withCredentials:!0,headers:{"Content-Type":"application/json"}})).then(()=>!0).catch(i=>(console.error(i),!1))}sendDisliked(e){return le(this.httpClient.post(V.deleteFavoriteMerchant,JSON.stringify({shops_disliked:[e]}),{withCredentials:!0,headers:{"Content-Type":"application/json"}})).then(()=>!0).catch(i=>(console.error(i),!1))}checkUserSegments(e){return this.isLogin&&Array.isArray(e)&&e.length&&!!e.filter(i=>this.user.segments.includes(i)).length}settings(){var e=this;return C(function*(){return e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"userSettings")})()}saveSettings(e,i){var r=this;return C(function*(){const o=(yield r.cacheService.get(S.GLOBAL_CACHE_PREFIX,"userSettings"))||{};if("object"==typeof e)for(const s in e)o[s]=e[s];else o[e]=i;return r.cacheService.set(S.GLOBAL_CACHE_PREFIX,"userSettings",1/0,o),!0})()}static \u0275fac=function(i){return new(i||t)(w(It),w(b),w(Qe),w(V7),w(re),w(f_),w(fc),w(zt),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$7=(()=>{class t{userService;eventService;navigationService;browserToolsService;iconService;translateService;cacheService;intervalUsersNotifyHandler;notificationStack={};constructor(e,i,r,o,s,a,c){this.userService=e,this.eventService=i,this.navigationService=r,this.browserToolsService=o,this.iconService=s,this.translateService=a,this.cacheService=c,this.attachActionListeners()}usersNotifyHandler(){var e=this;return C(function*(){const i=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"showUserNotifications");if(e.userService.isLogin&&(typeof i>"u"||i)){const r=e.userService.user.notifications,o=e.getNotReadAndShowed(r);o&&o.length&&(e.userService.user.notifications=r.map(s=>(s.showed=!0,s)),o.forEach(s=>{e.showPush(s)}))}})()}showPush(e){const i=e.id,r={type:"basic",iconUrl:"images/btn/logo65.png",title:this.translateService.instant("titleCreateNotification"),message:e.markup.replace(/<\/?[^>]+(>|$)/g,"")};this.notificationStack[e.id]=e,chrome.notifications.create(i,r,()=>{this.sendEventUserNotificationLogs("createNotification",e)})}userNotifyHandlerTimer(){var e=this;clearInterval(this.intervalUsersNotifyHandler),this.intervalUsersNotifyHandler=setInterval(C(function*(){yield e.usersNotifyHandler()}),S.SHOW_USER_NOTIFY_INTERVAL)}getNotReadAndShowed(e){return e.filter(i=>"1"===i.status&&!i.showed)}attachActionListeners(){chrome.notifications.onClicked.addListener(e=>{if(this.notificationStack[e]){const i=this.browserToolsService.browserInfo,r=i.name===S.BROWSER_NAME_YABROWSER?"yabrowser":i.name.toLowerCase();this.navigationService.navigate({tabId:Pt.NEW_TAB,url:`${V._root+this.notificationStack[e].url}&utm_term=${r}`}),this.actionHandler("clickNotification",this.notificationStack[e]),chrome.notifications.clear(e)}}),this.browserToolsService.browserInfo.name!==S.BROWSER_NAME_FF&&chrome.notifications.onClosed.addListener((e,i)=>{this.notificationStack[e]&&i&&this.actionHandler("closeNotification",this.notificationStack[e])})}actionHandler(e,i){const o=this.userService.user.notifications.filter(s=>"1"===s.status);this.iconService.setBadge(o.length.toString()),this.userService.pushReviewedNotifications(i.id),this.sendEventUserNotificationLogs(e,i),delete this.notificationStack[i.id]}sendEventUserNotificationLogs(e,i){this.eventService.fireEvent(b.SEND_USER_NOTIFICATION_LOGS,{data:{arrayNotifications:[i],notificationEvent:e}})}static \u0275fac=function(i){return new(i||t)(w(Wn),w(b),w(Pt),w(Ki),w(f_),w(yc),w(Qe))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Ls{active;audible;autoDiscardable;discarded;favIconUrl;groupId;height;highlighted;id;incognito;index;mutedInfo;openerTabId;pendingUrl;pinned;selected;sessionId;status;title;url;width;windowId;domain;history=[];interstitialPageId;interstitialPage;state;shopId;constructor(n){this.active=n.active,this.audible=n.audible,this.autoDiscardable=n.autoDiscardable,this.discarded=n.discarded,this.favIconUrl=n.favIconUrl,this.groupId=n.groupId,this.height=n.height,this.highlighted=n.highlighted,this.id=n.id,this.incognito=n.incognito,this.index=n.index,this.mutedInfo=n.mutedInfo,this.openerTabId=n.openerTabId,this.pendingUrl=n.pendingUrl,this.pinned=n.pinned,this.selected=n.selected,this.sessionId=n.sessionId,this.status=n.status,this.title=n.title,this.url=n.url,this.width=n.width,this.windowId=n.windowId,this.domain=G.getDomain(n.url),this.interstitialPageId=n.interstitialPageId,this.interstitialPage=n.interstitialPage,this.state=n.state,this.shopId=n.shopId,this.history=n.history??[]}static serialize(n){const e={};return n.forEach(i=>{e[i.id]=new Ls(i)}),e}}let Fs=(()=>{class t{eventService;browserToolsService;datePipe;cacheService;utilsService;tabs;prefix=S.GLOBAL_CACHE_PREFIX;cacheKey="tabs.list";cacheTime=18e5;currentTabId=null;constructor(e,i,r,o,s){this.eventService=e,this.browserToolsService=i,this.datePipe=r,this.cacheService=o,this.utilsService=s}init(){var e=this;return C(function*(){yield e.setUpTabs(),e.updateCache(),e.attachListeners()})()}setUpTabs(){var e=this;return C(function*(){const i=yield e.getAllChromeTabs(),r=yield e.cacheService.get(e.prefix,e.cacheKey);if(!i&&!r)return void(e.tabs={});if(!r)return void(e.tabs=Ls.serialize(i));const o=e.mergeChromeAndCachedTabs(i,r);e.tabs=Ls.serialize(o)})()}mergeChromeAndCachedTabs(e,i){const r=[];for(const o of e){const s=i[o.id];r.push(s?{...s,...o}:o)}return r}updateCache(){this.cacheService.set(this.prefix,this.cacheKey,this.cacheTime,this.tabs)}tabWasClosed(e){const i=this.selectById(e.tabId);i&&this.delete(i.id)}tabWasWalkingAlongChain(e){const r=this.browserToolsService.browserInfo.name;var o,s,c;o=e.tabId,s=e.url,G.guid(),c=this,setTimeout(()=>{c.tabWasChanged({tabId:o,url:s})},S.BROWSER_NAME_FF===r?50:1)}tabWasChanged(e){var i=this;return C(function*(){if(!e)return;const{url:r,tabId:o}=e;if(!r||!o)return;let s=i.selectById(o);if(s){const a=yield i.getChromeTabById(o),c=G.getDomain(e.url);s=i.updateTab(o,{...a,domain:c,url:r}),i.triggerTabUrlChangeEvent(s)}else yield i.add(o)})()}tabBeforeNavigate(e){var i=this;return C(function*(){if(!e)return;const{url:r,tabId:o}=e,s=i.selectById(o)??(yield i.add(o));if(!s)return;const a=G.getDomain(r);let c;const{merchant:l}=yield i.eventService.fireEvent(b.GET_MERCHANT_BY_DOMAIN,{data:{domain:a}}),u={date:i.datePipe.transform(new Date,"yyyy-MM-dd'T'HH:mm:ssZZZZZ"),url:r,referer:"",cookies:{},params:{}};l&&(u.cookies={checkCookieParams:l.checkCookieParams,savedCookie:l.savedCookie?l.savedCookie:"",pageCookies:""},u.params={checkUrlParams:l.checkUrlParams,savedParams:l.savedParams,checkedParams:G.getAllUrlParams(e.url)}),s.history.length&&(c=s.history,c.length>=S.HISIORY_LENGTH&&c.shift(),c.length>0&&(u.referer=c.slice(-1)[0].url),c.push(u),i.eventService.fireEvent(b.UPDATE_GLOBAL_HISTORY,{data:{history:u}})),i.updateTab(s.id,{history:c?.length?c:[u]})})()}triggerTabUrlChangeEvent(e){this.eventService.fireEvent(b.TAB_CHANGED_URL,{data:{tab:e,url:e.url}}).then()}getChromeTabById(e){return C(function*(){return 3===chrome.runtime.getManifest().manifest_version?chrome.tabs.get(e):new Promise(i=>{chrome.tabs.get(e,r=>i(r))})})()}getAllChromeTabs(){return 3===chrome.runtime.getManifest().manifest_version?chrome.tabs.query({currentWindow:!0}):new Promise(e=>{chrome.tabs.query({currentWindow:!0},i=>(chrome.runtime.lastError&&(console.error(chrome.runtime.lastError),i=[]),e(i)))})}attachListeners(){var e=this;this.eventService.attachEvent(b.TAB_CHANGED,function(){var i=C(function*(r){e.currentTabId=r.tabId,yield e.tabWasChanged(r)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.TAB_CLOSED,i=>{this.tabWasClosed(i)}),this.eventService.attachEvent(b.BEFORE_NAVIGATE,function(){var i=C(function*(r){e.tabWasWalkingAlongChain(r),yield e.tabBeforeNavigate(r)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.DOCUMENT_COMPLETE,function(){var i=C(function*(r){yield e.tabWasChanged(r)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.GET_PAGE_COOKIES,function(){var i=C(function*(r){r&&r.data&&(yield e.setUpTabMerchantPageCookies(r))});return function(r){return i.apply(this,arguments)}}())}setUpTabMerchantPageCookies(e){var i=this;return C(function*(){const r=G.getDomain(e.url),{merchant:o}=yield i.eventService.fireEvent(b.GET_MERCHANT_BY_DOMAIN,{data:{domain:r}});if(!o)return;const s=i.selectById(e.tabId),a=s.history;a[a.length-1].cookies.pageCookies=e.data.pageCookies,i.updateTab(s.id,{history:a})})()}get length(){return Object.keys(this.tabs).length}add(e){var i=this;return C(function*(){let r;if("number"==typeof e){if(e<=0)return null;r=yield i.getChromeTabById(e)}else r=e;return r?(i.tabs[r.id]=new Ls(i.tabs[r.id]?{...i.tabs[r.id],...r}:r),i.updateCache(),i.tabs[r.id]):null})()}delete(e){delete this.tabs[e],this.updateCache()}selectById(e){return this.tabs[e=e||this.currentTabId]}immediateTabReset(e){this.updateTab(e.id,{state:null,interstitialPageId:null})}updateTab(e,i){for(const r in i)this.tabs[e][r]=i[r];return this.updateCache(),this.tabs[e]}static \u0275fac=function(i){return new(i||t)(w(b),w(Ki),w(fc),w(Qe),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),G7=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>e.init(),multi:!0,deps:[Fs]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({imports:[Gn]})}return t})();class Ad{activateUrl;aliases;animated;cashback;cashbackFloated;cashbackRate;categoriesIds;checkCookieParams;checkUrlParams;clickPageUrl;conditionsFormated;countDomainLevel;delayActivate;domain;domains_disabled;domains_enabled;hasPromoActivated;id;isActivated;isFavorite;isRecommended;isSuppressed;isSuppressedTime;isViewed;is_floating;logo;longDesc;parsePromoCodeParameters;parseSentTrackingParameters;pattern;promo;rate;rate_formated;rewrite;savedParams;settings;shortDesc;suffix;thankYouPage;title;trackOrderParams;transitionId;type;url;userCashback;cartPage;disabledRedirect;savedCookie;shoppingTrip;lastTimeCountPersonalCashback;userCashbackValue;bonus;bonusCoefficient;hotProducts;hot;autoPromotion;extendedTabThanksPage;extendedTab;extendedPromo;mainFrame;productWithGo;isCashbackAvailable;constructor(n){this.activateUrl=n.activateUrl,this.aliases=n.aliases??[],this.animated=n.animated,this.cashback=n.cashback,this.cashbackFloated=n.cashbackFloated,this.cashbackRate=n.cashbackRate,this.categoriesIds=n.categoriesIds,this.checkCookieParams=n.checkCookieParams,this.checkUrlParams=n.checkUrlParams,this.clickPageUrl=n.clickPageUrl,this.conditionsFormated=n.conditionsFormated,this.countDomainLevel=n.countDomainLevel,this.delayActivate=n.delayActivate,this.domain=n.domain,this.domains_disabled=n.domains_disabled,this.domains_enabled=n.domains_enabled,this.hasPromoActivated=n.hasPromoActivated,this.id=n.id,this.isActivated=n.isActivated,this.isFavorite=n.isFavorite,this.isRecommended=n.isRecommended,this.isSuppressed=n.isSuppressed,this.isSuppressedTime=n.isSuppressedTime,this.isViewed=n.isViewed,this.is_floating=n.is_floating,this.logo=n.logo,this.longDesc=n.longDesc,this.parsePromoCodeParameters=n.parsePromoCodeParameters,this.parseSentTrackingParameters=n.parseSentTrackingParameters,this.pattern=n.pattern,this.promo=n.promo??[],this.rate=n.rate,this.rate_formated=n.rate_formated,this.rewrite=n.rewrite,this.savedParams=n.savedParams??[],this.settings=n.settings,this.shortDesc=n.shortDesc,this.suffix=n.suffix,this.thankYouPage=n.thankYouPage??[],this.title=n.title,this.trackOrderParams=n.trackOrderParams,this.transitionId=n.transitionId,this.type=n.type,this.url=n.url,this.userCashback=n.userCashback,this.savedCookie=n.savedCookie,this.shoppingTrip=n.shoppingTrip,this.lastTimeCountPersonalCashback=n.lastTimeCountPersonalCashback,this.userCashbackValue=n.userCashbackValue,this.bonus=n.bonus,this.bonusCoefficient=n.bonusCoefficient,this.hotProducts=n.hotProducts,this.hot=n.hot,this.autoPromotion=n.autoPromotion,this.extendedTabThanksPage=n.extendedTabThanksPage,this.extendedTab=n.extendedTab,this.extendedPromo=n.extendedPromo,this.mainFrame=n.mainFrame,this.productWithGo=n.productWithGo,this.isCashbackAvailable=n.isCashbackAvailable,this.disabledRedirect=n.disabledRedirect,this.cartPage=n.cartPage}static serialize(n){return new Ad(n)}}let uo=(()=>{class t{httpClient;localeService;userService;categoriesService;cacheService;configService;eventService;utilsService;cacheMerchantsPrefix=S.GLOBAL_CACHE_PREFIX;cacheMerchantsKey="merchants_list";oldCacheMerchantsKey="merchants";_merchants={};updateInterval;lastTimeContextUpdate;contextUpdateInterval=6e4;constructor(e,i,r,o,s,a,c,l){this.httpClient=e,this.localeService=i,this.userService=r,this.categoriesService=o,this.cacheService=s,this.configService=a,this.eventService=c,this.utilsService=l}get merchants(){return this._merchants}set merchants(e){this._merchants=e}attachListeners(){var e=this;this.eventService.attachEvent(S.PROMO_ACTIVATE,i=>{const{id:r,promoId:o}=i.data;this.activatePromo(r,o)}),this.eventService.attachEvent(S.MERCHANT_SUPPRESSED,i=>{const{id:r}=i.data;this.suppressed(r)}),this.eventService.attachEvent(b.GET_MERCHANT_BY_DOMAIN,function(){var i=C(function*(r){return yield e.reInitMerchantsIfEmptyContext(),{merchant:e.selectByDomain(r.data.domain)}});return function(r){return i.apply(this,arguments)}}())}init(){var e=this;return C(function*(){try{e.saveStatusActivateMerchant(),e.saveShoppingTripMerchants(),yield e.checkInCacheOrFetch(),yield e.initMerchantPropsAndRatesBasedOnUser(),yield e.restoreStatusActivateMerchant(),yield e.restoreShoppingTripMerchants(),yield e.cacheService.remove(e.cacheMerchantsPrefix,e.oldCacheMerchantsKey)}finally{e.setUpdateInterval()}})()}transform(e){return{id:e.id,title:e.a,aliases:e.h,thankYouPage:e.o,domain:e.c,pattern:e.c,domains_enabled:e.de,domains_disabled:e.dd,logo:e.d,shortDesc:e.e,longDesc:e.f,url:e.b,activateUrl:e.m,promo:e.k,checkUrlParams:e.l,checkCookieParams:e.n,countDomainLevel:null!=e.c.match(/\./gi)?e.c.match(/\./gi).length:0,settings:{globalDisabled:e.g?.includes("global_disabled")??!1,partnerList:e.g?.includes("partner_list")??!1,partnerListNoActive:e.g?.includes("partner_list_noactive")??!1,browserAction:e.g?.includes("browser_action")??!1,injectNotification:e.g?.includes("inject_notification")??!1,injectNotificationWithoutActivate:e.g?.includes("inject_notification_without_activate")??!1,injectSuccessNotification:e.g?.includes("inject_success_notification")??!1,injectRewriteNotification:e.g?.includes("inject_rewrite_notification")??!1,injectRewriteNotificationWithoutActivate:e.g?.includes("inject_rewrite_notification_without_activate")??!1,showInSearchEngine:e.g?.includes("show_in_search_engine")??!1,dontShowInformer:e.g?.includes("dont_show_informer")??!1,iconClickPage:e.g?.includes("icon_click_page")??!1,showInSimilar:e.g?.includes("show_in_similar")??!1,injectNotificationCart:e.g?.includes("inject_notification_cart")??!1,injectLetyBar:e.g?.includes("inject_letybar")??!1,injectionTracking:e.g?.includes("injection_tracking")??!1},cashbackRate:{rate:e.p.a,rateFormated:e.p.b,isFloating:e.p.c,suffixFormated:e.p.d,type:e.p.e,conditionsFormated:e.p.f??[]},rate:e.p.a,rate_formated:e.p.b,is_floating:e.p.c,suffix:e.p.d,type:e.p.e,conditionsFormated:e.p.f,cashback:e.p.b,userCashback:e.p.b,cashbackFloated:e.p.c&&e.p.c>0,clickPageUrl:e.q,cartPage:e.r,disabledRedirect:e.v,trackOrderParams:e.u,parsePromoCodeParameters:e.s,parseSentTrackingParameters:e.t,userCashbackValue:e.p.a,categoriesIds:e.i}}resetAll(){for(const e in this.merchants)this.resetRates(+e),this.reset(+e),this.eventService.fireEvent(b.BUTTON_UPDATE,{tabId:null})}fetch(){var e=this;return C(function*(){const i=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"deliveryCountry"),r=i?`&delivery_country=${i}`:"",o=`${V.merchants}?locale=${e.localeService.locale}&version-ext=${chrome.runtime.getManifest().version}${r}`,s=yield le(e.httpClient.get(o,{withCredentials:!0}).pipe(Xi(()=>Xe([])),tt(a=>a.filter(c=>!!c.id&&!!c.c&&!!c.p?.a).map(c=>e.transform(c)))));s&&s.length&&(e.setToCache(s),e.setMerchants(s)),e.categoriesService.fetch()})()}update(){var e=this;return C(function*(){yield e.fetch(),yield e.initMerchantPropsAndRatesBasedOnUser()})()}setMerchants(e){this._merchants={},e.forEach(i=>{this._merchants[i.id]=Ad.serialize(i)})}setToCache(e){this.configService.getParameter(re.UPDATE_INTERVAL_MERCHANT).then(i=>{i||(i=S.DEFAULT_UPDATE_INTERVAL_MERCHANT),this.cacheService.set(this.cacheMerchantsPrefix,this.cacheMerchantsKey,i,e)}).catch(()=>{this.cacheService.set(this.cacheMerchantsPrefix,this.cacheMerchantsKey,S.DEFAULT_UPDATE_INTERVAL_MERCHANT,e)})}checkInCacheOrFetch(){var e=this;return C(function*(){const i=yield e.cacheService.get(e.cacheMerchantsPrefix,e.cacheMerchantsKey);i?e.setMerchants(i):yield e.fetch()})()}setUpdateInterval(){var e=this;clearInterval(this.updateInterval),this.configService.getParameter(re.UPDATE_INTERVAL_MERCHANT).then(i=>{this.updateInterval=setInterval(C(function*(){yield e.init()}),i)}).catch(()=>{const i=S.DEFAULT_UPDATE_INTERVAL_MERCHANT;this.updateInterval=setInterval(C(function*(){yield e.init()}),i)})}reInitMerchantsIfEmptyContext(){var e=this;return C(function*(){2!==chrome.runtime.getManifest().manifest_version&&(e._merchants&&Object.keys(e._merchants).length>0||e.lastTimeContextUpdate>Date.now()||(yield e.init(),e.lastTimeContextUpdate=Date.now()+e.contextUpdateInterval))})()}fetchUserCashbackRates(e){var i=this;return C(function*(){i.merchants[e].lastTimeCountPersonalCashback=Date.now();const r=`${V.userCashbackRates(e)}?locale=${i.localeService.locale}`;yield le(i.httpClient.get(r,{withCredentials:!0}).pipe(tt(function(){var o=C(function*(s){yield i.addRates([s])});return function(s){return o.apply(this,arguments)}}())))})()}addRates(e){e.forEach(i=>{this.merchants[i.id]&&(this.merchants[i.id]=new Ad({...this.merchants[i.id],rate:i.a,rate_formated:i.b,is_floating:i.c,suffix:i.d,type:i.e,conditionsFormated:i.f,cashback:i.b,rateUserCashback:i.ac?i.ac:i.a,userCashback:i.bc?i.bc:i.b,userCashbackValue:i.ac?i.ac:i.a,lastTimeCountPersonalCashback:Date.now(),cashbackFloated:i.c&&i.c>0}))})}saveStatusActivateMerchant(){if(this.cacheService.remove(S.GLOBAL_CACHE_PREFIX,"statusActivateMerchants"),this.userService.isLogin){const e=[];for(const i in this.merchants)this.merchants[i].isActivated&&e.push({id:this.merchants[i].id,isActivated:this.merchants[i].isActivated,delayActivate:this.merchants[i].delayActivate,isSuppressed:this.merchants[i].isSuppressed,savedParams:this.merchants[i].savedParams,savedCookie:this.merchants[i].savedCookie,transitionId:this.merchants[i].transitionId});e&&e.length>0&&this.cacheService.set(S.GLOBAL_CACHE_PREFIX,"statusActivateMerchants",1/0,e)}}restoreStatusActivateMerchant(){var e=this;return C(function*(){if(e.userService.isLogin){const i=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"statusActivateMerchants");i&&i.length>0&&i.forEach(r=>{e.merchants[r.id]&&(e.merchants[r.id].isActivated=r.isActivated,e.merchants[r.id].delayActivate=r.delayActivate,e.merchants[r.id].isSuppressed=r.isSuppressed,e.merchants[r.id].savedParams=r.savedParams,e.merchants[r.id].savedCookie=r.savedCookie,e.merchants[r.id].transitionId=r.transitionId)})}})()}saveShoppingTripMerchants(){const e=[];this.cacheService.remove(S.GLOBAL_CACHE_PREFIX,"shoppingTripMerchants");for(const i in this.merchants)this.merchants[i].shoppingTrip&&e.push({id:this.merchants[i].id,shoppingTrip:this.merchants[i].shoppingTrip});e&&e.length>0&&this.cacheService.set(S.GLOBAL_CACHE_PREFIX,"shoppingTripMerchants",1/0,e)}restoreShoppingTripMerchants(){var e=this;return C(function*(){const i=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"shoppingTripMerchants");i&&i.length>0&&i.forEach(r=>{e.merchants[r.id]&&(e.merchants[r.id].shoppingTrip=r.shoppingTrip)})})()}setPersonalCashback(e){var i=this;return C(function*(){e.sort((o,s)=>s.bonus-o.bonus);const r=[];for(const o of e){if(typeof o.exclude_shop_ids>"u")return!0;o.exclude_shop_ids||r.push(o)}e=e.filter(o=>r.indexOf(o)<0);for(const o in i.merchants)if(e&&e.length>0)for(const s of e)typeof s.exclude_shop_ids>"u"?i.merchants[o]&&(!i.merchants[o].bonus||s.bonus>i.merchants[o].bonus)&&i.countPersonalCashback(+o,s):s.exclude_shop_ids&&i.merchants[o]&&!s.shop_ids.includes(o.toString())&&(!i.merchants[o].bonus||s.bonus>i.merchants[o].bonus)&&i.countPersonalCashback(+o,s);else i.resetRates(+o);for(const o of r)for(const s of o.shop_ids)i.merchants[s]&&(!i.merchants[s].bonus||o.bonus>i.merchants[s].bonus)&&i.countPersonalCashback(i.merchants[s].id,o)})()}countPersonalCashback(e,i){this.merchants[e].conditionsFormated&&this.merchants[e].conditionsFormated.length>0&&this.merchants[e].conditionsFormated.forEach(s=>{s.currentRate=((+i.bonus+100)/100*+s.rate).toFixed(2),s.currentRateFormated=`${100*+s.currentRate/100}${s.suffix}`});const r=((+i.bonus+100)/100*+this.merchants[e].rate).toFixed(2);this.merchants[e].userCashback=`${100*+r/100}${this.merchants[e].suffix}`,this.merchants[e].userCashbackValue=+r,this.merchants[e].bonus=i.bonus,this.merchants[e].bonusCoefficient=this.utilsService.calculateRateCoefficient(i.bonus),this.merchants[e].lastTimeCountPersonalCashback=Date.now()}setFavorites(e){if(0!==Object.values(this.merchants).length&&e)for(const i in this.merchants)this.merchants[i].isFavorite=e&&e.includes(+i)}setRecommended(e){for(const i in e)this.merchants[+i]&&(this.merchants[+i].isRecommended=!0)}setViewed(e){if(0!==Object.values(this.merchants).length&&e)for(const i in this.merchants)this.merchants[i].isViewed=e&&e.includes(+i)}initMerchantPropsAndRatesBasedOnUser(){var e=this;return C(function*(){if(e.userService.isLogin){const i=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"viewedMerchants");i&&i.length>0?(e.userService.user.viewed=i,e.setViewed(i)):e.setViewed(e.userService.user.viewed),e.setRecommended(e.userService.user.recommended),e.setFavorites(e.userService.user.favorites)}yield e.setPersonalCashback(e.userService.user.rates)})()}getMerchantById(e){return this.merchants[e]}selectByDomain(e){return Object.values(this.merchants).find(i=>this.utilsService.checkEnableDisableDomain(i,e))}selectById(e){if(!this.merchants[+e])return null;const{settings:{partnerList:i,partnerListNoActive:r,browserAction:o,injectNotification:s,injectSuccessNotification:a,injectRewriteNotification:c,injectRewriteNotificationWithoutActivate:l,iconClickPage:u}}=this.merchants[e];return i||r||o||s||a||c||l||u?this.merchants[e]:null}suppressed(e){this.merchants[e].isSuppressed=!0}delayActivateStatus(e){this.merchants[e].delayActivate=Date.now()+S.UPDATE_INTERVAL_ACTIVATE,this.merchants[e].isSuppressed=null}activate(e){this.merchants[e].isActivated=!0,this.delayActivateStatus(e)}activatePromo(e,i){this.merchants[e].hasPromoActivated=i,this.delayActivateStatus(e)}reset(e){this.merchants[e].hot=null,this.merchants[e].hotProducts=null,this.resetOnRewrite(e)}resetRates(e){this.merchants[e].bonus=null,this.merchants[e].bonusCoefficient=null,this.merchants[e].userCashback=this.merchants[e].cashback,this.merchants[e].userCashbackValue=this.merchants[e].rate,this.merchants[e].conditionsFormated.forEach(i=>{i.currentRateFormated=i.rateFormated,i.currentRate=i.rate})}resetOnRewrite(e){this.merchants[e].delayActivate=null,this.merchants[e].isActivated=null,this.merchants[e].isSuppressed=null,this.merchants[e].savedParams=null,this.merchants[e].savedCookie=null,this.merchants[e].transitionId=null}clearSuppressed(e){this.merchants[e].isSuppressed=null,this.merchants[e].isSuppressedTime=null}setSuppressedTime(e){this.merchants[e].isSuppressedTime=Date.now()+S.HIDE_NOTIFICATION_TIME}static \u0275fac=function(i){return new(i||t)(w(It),w(zt),w(Wn),w(ix),w(Qe),w(re),w(b),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),z7=(()=>{class t{httpClient;baseUrl="https://gpsfront.aliexpress.com";recommendingResults="/getI2iRecommendingResults.do";constructor(e){this.httpClient=e}getAliSimilarItems(e,i,r,o,s="pcDetailLeftTopSell",a=50,c=0){return`${this.baseUrl}${this.recommendingResults}?currentItemList=${e}&categoryId=\n\t\t\t${i}&shopId=${r}&companyId=\n\t\t\t${o}&scenario=${s}&limit=\n\t\t\t${a}&offset=${c}`}getAliexpressSimilarItems(e){var i=this;return C(function*(){return le(i.httpClient.get(e).pipe(tt(o=>o?.results.map(s=>{const a=new URL(`https:${s.productDetailUrl}`);return s.productDetailUrl=a.origin+a.pathname,s}))))})()}getAliexpressRecommendationSimilarItems(e){var i=this;return C(function*(){return le(i.httpClient.post(e,JSON.stringify({pageSize:50})).pipe(tt(o=>o?.products.map(s=>{const a=new URL(`https:${s.url}`);return s.productDetailUrl=a.origin+a.pathname,s.productId=s.id,s.productImage=s.imgUrl,s.productTitle=s.title,s.minPrice=s.price,s}))))})()}static \u0275fac=function(i){return new(i||t)(w(It))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rx=(()=>{class t{eventService;aliexpressProductsService;httpClient;userService;merchantsService;tabsService;cacheService;utilsService;baseUrl=V._tools;itemHistory="/api/extension/v1/item/history";itemInfo="/api/extension/v1/item/info";affiliateCheck="/api/extension/v1/affiliate/check";affiliateCheckList="/api/extension/v1/affiliate/check-list";user;tabs;merchants;constructor(e,i,r,o,s,a,c,l){this.eventService=e,this.aliexpressProductsService=i,this.httpClient=r,this.userService=o,this.merchantsService=s,this.tabsService=a,this.cacheService=c,this.utilsService=l,this.user=o.user,this.merchants=s.merchants}attachListeners(){var e=this;this.eventService.attachEvent(b.PRICE_MONITORING_GET_DATA,function(){var i=C(function*(r){r.tabId||(r.tabId=e.tabsService.currentTabId);const o=yield e.init(r);return JSON.parse(JSON.stringify(o))});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.PRICE_MONITORING_GET_CHART_DATA,function(){var i=C(function*(r){const o=yield e.getPriceDynamicChartData(r);return JSON.parse(JSON.stringify(o))});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.PRICE_MONITORING_GET_SIMILAR_PRODUCTS,function(){var i=C(function*(r){const o=yield e.getSimilarProducts(r);return JSON.parse(JSON.stringify(o))});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.PRICE_MONITORING_CLEAR_HISTORY,()=>{const i=this.clearHistoryItems();return JSON.parse(JSON.stringify(i))})}init(e){var i=this;return C(function*(){const r=e.data;if(!r||!r.priceData)return null;const o=i.merchantsService.selectByDomain(G.getDomain(r.href)),s=i.isMerchantHasSellerInfo(o);let a=yield i.getPriceSellerData(e,o);return!a||s&&!a.targetInfo?.itemInfo?.seller?.resume?.notes?.[1]?{empty:!0}:(s&&(a=yield i.setUpHistoryItems({...a,productReviewsText:r.productReviewsText,countSoldItemText:r.countSoldItemText})),{rawData:a,pageData:r,hasSellerInfo:s,history:i.isMerchantHasSellerInfo(o)&&i.historyInfo(a),merchant:o,user:i.userService.user,affiliate:yield i.getAffiliateStatus(r,o,i.userService.user)})})()}getPriceSellerData(e,i){var r=this;return C(function*(){let o={};if(!r.isEventValid(e))return null;o.locale=yield r.cacheService.get(S.GLOBAL_CACHE_PREFIX,"locale"),o.language=o.locale.split("_")[0];const s=yield r.getPriceInfo(e,i);return s&&(o={...o,...s}),r.isValid(o)?JSON.parse(JSON.stringify(o)):null})()}getAffiliateStatus(e,i,r){var o=this;return C(function*(){const s=new URL(e.href),a=o.utilsService.isAliexpressProductPage(s.pathname),c=yield o.utilsService.matchLocaleCookie(S.NO_ALI_AFFILIATE_COUNTRY),l={status:null,isAffiliate:!1,show:!1};if(!a||!c)return l.isAffiliate=!0,l.show=!1,l;const u=s.origin+s.pathname,d=yield o.checkAffiliateAliItem(u,r),f=d&&d.result;return f&&i?(d||(l.status="unknown",l.icon="alert"),d&&f&&i.isActivated&&(l.status="success",l.icon="check"),d&&f&&!i.isActivated&&(l.status="pending",l.icon="alert"),d&&!f&&(l.status="failur",l.icon="alert"),l.isAffiliate=f,l.show=!0,o.eventService.fireEvent(b.SEND_GOOGLE_ANALYTICS,{tabId:null,data:{type:"pageview",page:`${S.gaPrefixMonitor}view/notification/${l.status}/`}}),l):(l.isAffiliate=!1,l.status="unknown",l.icon="alert",l)})()}isValid(e){if(!e||!e.targetInfo)return null;const{itemInfo:i}=e.targetInfo;return!!i?.url||!!i?.dynamic?.value||!!i?.seller?.score}isEventValid(e){return e?.data?.href&&e?.data?.priceData}isMerchantHasSellerInfo(e){return e&&S.ARRAY_MERCHANTS_PRICE_SELLER.includes(e.id)}getPriceDynamicChartData(e){var i=this;return C(function*(){const{user:r,pageData:o,targetInfo:s}=e.data,a=yield i.getPriceChartData(o.priceData,r,s.itemInfo);if(!a.list)return null;const c=(new Date).getTime(),l=new Date(c-2592e6).getTime(),u=i.getArrayFromPeriodDate(l,c,o.month),d=a.list[0].currency.sign,{dataPriceDate:f,arrMinPrice:h}=i.prepareChartData({list:a,month:o.month,previousDate:l,currentDate:c}),p=Math.min(...h),g=Math.max(...h);return{chart:i.prepareChart(f,u,g,d),minPrice:i.getPrice(p,d),maxPrice:i.getPrice(g,d),priceLast:i.getPrice(s.itemInfo.priceLast.min,d),description:s.itemInfo.dynamic.ItemDynamic.ItemDynamicSvg.text}})()}prepareChartData(e){const{list:i,previousDate:r,currentDate:o,month:s}=e,a=[],c=[];return i.list.sort((l,u)=>l.timestamp-u.timestamp).forEach(l=>{if(1e3*l.timestamp<r){const u=new Date(r);u.setDate(u.getDate()-3),a.length>0?(a[0].x=`${u.getDate()} ${s[u.getMonth()]} ${u.getFullYear()}`,a[0].y=l.min,a[0].time=1e3*l.timestamp,a[0].dateStr=`${u.getDate()} ${s[u.getMonth()]}`):a.push({x:`${u.getDate()} ${s[u.getMonth()]} ${u.getFullYear()}`,y:l.min,time:1e3*l.timestamp,dateStr:`${u.getDate()} ${s[u.getMonth()]}`})}if(1e3*l.timestamp>r&&1e3*l.timestamp<o){const u=new Date(1e3*l.timestamp);c.push(l.min),a.push({x:`${u.getDate()} ${s[u.getMonth()]} ${u.getFullYear()}`,y:l.min,time:1e3*l.timestamp,dateStr:`${u.getDate()} ${s[u.getMonth()]}`})}}),{dataPriceDate:a,arrMinPrice:c}}getArrayFromPeriodDate(e,i,r){const o=[];for((e=new Date(e)).setDate(e.getDate()-3),(i=new Date(i)).setDate(i.getDate()+3),o.push(`${new Date(e).getDate()} ${r[new Date(e).getMonth()]} ${new Date(e).getFullYear()}`);e<i;)(e=new Date(e)).setDate(e.getDate()+1),o.push(`${new Date(e).getDate()} ${r[new Date(e).getMonth()]} ${new Date(e).getFullYear()}`);return o}prepareChart(e,i,r,o){return{signPrice:o,labels:i,datasets:[{data:e,backgroundColor:"transparent",borderColor:"#bce0fc",pointBackgroundColor:"#00A8FF",pointBorderColor:"#00A8FF",tension:.5}],options:{bezierCurve:!0,plugins:{legend:{display:!1},tooltip:{mode:"nearest",intersect:!1,displayColors:!1,callbacks:{}}},scales:{y:{beginAtZero:!0,grid:{borderDash:[5,5]},ticks:{min:0,stepSize:Math.ceil(Math.ceil(r+.1*r)/4)}},x:{grid:{display:!1},ticks:{display:!1}}}}}}historyInfo(e){const{targetInfo:{itemInfo:i},historyItems:r}=e;return i&&e&&r?e.historyItems.map(o=>({productDetailUrl:o.urlItemActivated,productImage:o.imageItem,productTitle:o.name,minPrice:this.getPrice(o.priceLastMin,i.dynamic.currency.sign),orders:o.countSoldItem,reviews:o.countReviewsItem,sellerResumeStatusItem:{icon:"smile_"+o.sellerResumeStatusItem,value:o.sellerResumeScoreItem?.value},priceDynamicItem:{icon:o.priceDynamicItem.ItemDynamic.ItemDynamicSvg.icon,svgIcon:o.priceDynamicItem.ItemDynamic.ItemDynamicSvg.svg,value:`${o.priceDynamicItem.sign} ${this.getPrice(o.priceDynamicItem.value,o.priceDynamicItem.currency.sign)}`}})):null}setUpHistoryItems(e){var i=this;return C(function*(){const r=yield i.getHistoryItems(),o=r.slice(),s=i.setHistoryItems(r,e.id,e);return i.cacheService.set(S.GLOBAL_CACHE_PREFIX,"historyItems",1/0,s),e.historyItems=i.setHistoryItemUrl(o,e.merchant),e})()}clearHistoryItems(){var e=this;return C(function*(){const i=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"historyItems");return e.cacheService.set(S.GLOBAL_CACHE_PREFIX,"historyItems",1/0,[i.pop()]),!0})()}setHistoryItemUrl(e,i){const{id:r,isActivated:o}=i;return e.map(s=>(this.utilsService.isAliexpressCis(r)||(s.urlItemActivated=o?this.utilsService.getGoUrlItem(r,s.urlItem):this.utilsService.getViewUrlItem(r,s.urlItem)),s))}setHistoryItems(e,i,r){if(e.find(s=>s.idItem===i))return e;const o=this.createHistoryItem(i,r);return e.concat([o])}createHistoryItem(e,i){const r=new URL(i.targetInfo.itemInfo.url);return{idItem:e,nameItem:i.targetInfo.itemInfo.name,countReviewsItem:i.productReviewsText?parseInt(i.productReviewsText,10):"-",countSoldItem:i.countSoldItemText?parseInt(i.countSoldItemText,10):"-",urlItem:r.origin+r.pathname,imageItem:i.targetInfo.itemInfo.img,sellerResumeScoreItem:i.targetInfo.itemInfo.seller.resume.score,sellerResumeStatusItem:i.targetInfo.itemInfo.seller.resume.decodeNotes.notesScore.status,priceDynamicItem:i.targetInfo.itemInfo.dynamic,priceLastMin:i.targetInfo.itemInfo.priceLast.min}}getHistoryItems(){var e=this;return C(function*(){return(yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"historyItems"))||[]})()}getSimilarProducts(e){var i=this;return C(function*(){const{data:{aliRunParams:r,merchant:{id:o,isActivated:s},url:a}}=e;e.data.urlsSimilarItems=i.getUrlsSimilarItems(r,a);const c=yield i.getPriceSimilarProducts(e);return c&&c.length?c.map(l=>(i.utilsService.isAliexpressCis(o)||(l.productDetailUrl=s?i.utilsService.getGoUrlItem(o,l.productDetailUrl):i.utilsService.getViewUrlItem(o,l.productDetailUrl)),l)):null})()}getUrlsSimilarItems(e,i){const r=i.match(new RegExp(/[\d*]{1,}/gim))[0],o=e?.data?.recommendModule??{},s=o.productId??r,a=o.categoryId??"",c=o.storeNum??"",l=o.companyId??"",u=o.features?.recommendGpsScenarioOtherSellerProducts??"pcDetailBottomMoreOtherSeller";return{urlTopSell:this.aliexpressProductsService.getAliSimilarItems(s,a,c,l,o.features?.recommendGpsScenarioTopSelling??"pcDetailLeftTopSell",5),urlOtherSeller:this.aliexpressProductsService.getAliSimilarItems(s,a,c,l,u)}}getPriceChartData(e,i,r){var o=this;return C(function*(){const s={data:{itemInfo:r}};try{const{id:a,region:c,currencyDisplay:l}=e;if(a&&a.length){const u=`${a}_${c?`${c}_`:""}${l}_chartData`,d=`${a}_${c?`${c}_`:""}${l}_chartTimeLastUpdated`,f=yield o.cacheService.get(S.GLOBAL_CACHE_PREFIX,d);if(!f||Date.now()-f>S.UPDATE_INTERVAL_INFO_HISTORY_PRICE){const h=yield o.getPriceHistory(s,i);if(h)return o.cacheService.set(S.GLOBAL_CACHE_PREFIX,u,1/0,h),o.cacheService.set(S.GLOBAL_CACHE_PREFIX,d,1/0,Date.now()),h}else{const h=yield o.cacheService.get(S.GLOBAL_CACHE_PREFIX,u);if(h)return h}}}catch{const c=yield o.getPriceHistory(s,i);if(c)return c}})()}getPriceHistory(e,i){const r=e.data.itemInfo,o=r.priceLast.dataPricePage,s=Object.keys(o).length;return this.getItemHistory(r,o,s,i)}getItemHistory(e,i,r,o){var s=this;return C(function*(){const a=new URL(`${s.baseUrl}${s.itemHistory}`),c={id:e.id.id,type:e.id.type,priceMin:e&&0!==r?i.priceMin:"",priceMax:e&&0!==r?i.priceMax:"",currency:e&&0!==r?i.currency:"",priceMinDisplay:e&&0!==r?i.priceMinDisplay:"",priceMaxDisplay:e&&0!==r?i.priceMaxDisplay:"",currencyDisplay:e&&0!==r?i.currencyDisplay:"",timezone:e&&0!==r?i.timezone:""};return Object.keys(c).forEach(l=>{a.searchParams.append(l,c[l])}),s.httpClient.get(a.href,{headers:s.getHeaders(o),withCredentials:!0}).toPromise().then(l=>l)})()}getHeaders(e,i){return{"app-token":S.APP_TOKEN,"extension-token":e.tokenCookies&&e.tokenCookies.eaetkn?e.tokenCookies.eaetkn:"","user-token":e.tokenCookies&&e.tokenCookies.eautkn?e.tokenCookies.eautkn:"",referrer:i||"","version-ext":chrome.runtime.getManifest().version}}getPriceSimilarProducts(e){var i=this;return C(function*(){const{data:{merchant:{id:r}}}=e;let o=[];try{if(null!==e.data.urlsSimilarItems&&S.ARRAY_MERCHANTS_PRICE_SELLER.includes(r)){if(e.data.urlsSimilarItems.productId){const a=yield i.aliexpressProductsService.getAliexpressRecommendationSimilarItems(e.data.urlsSimilarItems.urlTopSell),c=yield i.aliexpressProductsService.getAliexpressRecommendationSimilarItems(e.data.urlsSimilarItems.urlOtherSeller);o=a.concat(c)}else{const a=yield i.aliexpressProductsService.getAliexpressSimilarItems(e.data.urlsSimilarItems.urlTopSell),c=yield i.aliexpressProductsService.getAliexpressSimilarItems(e.data.urlsSimilarItems.urlOtherSeller);o=a.concat(c)}if(yield i.utilsService.matchLocaleCookie(S.NO_ALI_AFFILIATE_COUNTRY)){const a=o.map(l=>({input:l.productId})),c=yield i.checkArrayAffiliateAliItems(a,i.user);o=o.filter(l=>c.list.find(u=>u.input===l.productId&&!!u.result))}}}catch(s){console.error(s)}return o.filter(s=>s&&s.productId)})()}checkAffiliateAliItem(e,i){var r=this;return C(function*(){return r.httpClient.post(`${r.baseUrl}${r.affiliateCheck}`,JSON.stringify({input:e}),{headers:r.getHeaders(i),withCredentials:!0}).toPromise().then(o=>o)})()}checkArrayAffiliateAliItems(e,i){var r=this;return C(function*(){return r.httpClient.post(`${r.baseUrl}${r.affiliateCheckList}`,JSON.stringify({list:e}),{headers:r.getHeaders(i),withCredentials:!0}).toPromise().then(o=>o)})()}getTargetInfo(e,i,r){var o=this;return C(function*(){const s=Object.keys(i).length,a=new URL(`${o.baseUrl}${o.itemInfo}`),c={url:e,priceMin:i&&0!==s?i.priceMin:"",priceMax:i&&0!==s?i.priceMax:"",currency:i&&0!==s?i.currency:"",priceMinDisplay:i&&0!==s?i.priceMinDisplay:"",priceMaxDisplay:i&&0!==s?i.priceMaxDisplay:"",currencyDisplay:i&&0!==s?i.currencyDisplay:"",timezone:i&&0!==s?i.timezone:""};return Object.keys(c).forEach(l=>{a.searchParams.append(l,c[l])}),o.httpClient.get(a.href,{headers:o.getHeaders(r),withCredentials:!0}).toPromise().then(l=>l)})()}getPriceInfo(e,i){var r=this;return C(function*(){let o=null;const{priceData:s,href:a}=e.data,c=r.tabsService.selectById(e.tabId);if(i&&S.ARRAY_MERCHANTS_PRICE.includes(i.id)){const l=`${s.id}_${s.region?`${s.region}_`:""}${s.currencyDisplay}`;let u=yield r.cacheService.get("global",l);if(!u||(new Date).getTime()-u.createdAt>S.UPDATE_INTERVAL_INFO_HISTORY_PRICE){const f=e.url.includes("http")?e.url:a;u=yield r.getTargetInfo(f,s,r.user),u.createdAt=(new Date).getTime(),u&&u.itemInfo&&u.itemInfo.dynamic&&(u.itemInfo.dynamic.sign=u.itemInfo.dynamic.value>0?"+":u.itemInfo.dynamic.value<0?"-":"",u.itemInfo.dynamic.value=Math.abs(u.itemInfo.dynamic.value),u.itemInfo.dynamic.ItemDynamic=r.getDecodeItemDynamic(u),s&&Object.keys(s).length&&(u.itemInfo.priceLast.dataPricePage=s)),u&&u.itemInfo&&u.itemInfo.seller&&(u.itemInfo.seller.resume.score.value=parseInt(u.itemInfo.seller.resume.score.value,10),u.itemInfo.seller.resume.decodeNotes=r.getDecodeNotes(u)),r.cacheService.set("global",l,1/0,u)}const d=i&&i.hasPromoActivated||null;c&&(i.extendedTab=c,i.extendedPromo=d,o={merchant:i,isLogin:r.user.isLogin,targetInfo:u||"",id:s.id,region:s.region})}return o})()}getDecodeItemDynamic(e){const i={};switch(e.itemInfo.dynamic.type){case S.TYPE_NO_CHANGE:i.icon="dynamic_no_changes",i.text="notificationPriceTypeNoChangeText";break;case S.TYPE_MINOR_DOWN:i.icon="dynamic_low_down",i.text="notificationPriceTypeMinorDownText";break;case S.TYPE_DOWN:i.icon="dynamic_down",i.text="notificationPriceTypeDownText";break;case S.TYPE_MINOR_DOWN_AFTER_UP:i.icon="dynamic_down_after_up",i.text="notificationPriceTypeMinorAfterUpText";break;case S.TYPE_MINOR_UP_AFTER_DOWN:i.icon="dynamic_up_after_down",i.text="notificationPriceTypeMinorAfterDownText";break;case S.TYPE_UP:i.icon="dynamic_up",i.text="notificationPriceTypeUpText";break;case S.TYPE_MINOR_UP:i.icon="dynamic_low_up",i.text="notificationPriceTypeMinorUpText"}return{ItemDynamicSvg:i}}getDecodeNotes(e){let i={};const r=e.itemInfo.seller.resume;function d(O){const M={};switch(O){case S.LEVEL_ERROR:M.color=S.LEVEL_ERROR_COLOR,M.status=S.LEVEL_ERROR_STATUS;break;case S.LEVEL_WARNING:M.color=S.LEVEL_WARNING_COLOR,M.status=S.LEVEL_WARNING_STATUS;break;case S.LEVEL_INFO:M.color=S.LEVEL_INFO_COLOR,M.status=S.LEVEL_INFO_STATUS}return M}function f(O,M){switch(O){case 0:M.text="notificationPriceTypeScore1";break;case 1:M.text="notificationPriceTypeScore2";break;case 2:M.text="notificationPriceTypeScore3";break;case 3:M.text="notificationPriceTypeScore4"}}function h(O,M){switch(O){case 4:M.text="notificationPriceTypeFeedback1";break;case 5:M.text="notificationPriceTypeFeedback2";break;case 6:M.text="notificationPriceTypeFeedback3";break;case 7:M.text="notificationPriceTypeFeedback4"}}function p(O,M,ee){switch(O){case 8:M.text="notificationPriceTypeAge1";break;case 9:M.text="notificationPriceTypeAge2";break;case 10:M.text="notificationPriceTypeAge3",M.textArg=ee}}function g(O,M){switch(O){case 11:M.text="notificationPriceTypeDescription1";break;case 12:M.text="notificationPriceTypeDescription2";break;case 13:M.text="notificationPriceTypeDescription3";break;case 14:M.text="notificationPriceTypeDescription4";break;case 15:M.text="notificationPriceTypeDescription5"}}function m(O,M){switch(O){case 16:M.text="notificationPriceTypeCommunication1";break;case 17:M.text="notificationPriceTypeCommunication2";break;case 18:M.text="notificationPriceTypeCommunication3";break;case 19:M.text="notificationPriceTypeCommunication4";break;case 20:M.text="notificationPriceTypeCommunication5"}}function v(O,M){switch(O){case 21:M.text="notificationPriceTypeShipping1";break;case 22:M.text="notificationPriceTypeShipping2";break;case 23:M.text="notificationPriceTypeShipping3";break;case 24:M.text="notificationPriceTypeShipping4";break;case 25:M.text="notificationPriceTypeShipping5"}}const _={color:"",status:"",text:""};let E=_,I=_,y=_,T=_,k=_,N=_;for(const O of r.notes)switch(O.group){case 0:E=d(O.level),f(O.type,E),i={notesScore:E};break;case 1:I=d(O.level),h(O.type,I),i={notesFeedback:I};break;case 2:y=d(O.level),p(O.type,y,O.tokens[0].value),i={notesAge:y};break;case 3:T=d(O.level),g(O.type,T),i={notesDescription:T};break;case 4:k=d(O.level),m(O.type,k),i={notesCommunication:k};break;case 5:N=d(O.level),v(O.type,N),i={notesShipping:N}}return i={notesScore:E,notesFeedback:I,notesAge:y,notesDescription:T,notesCommunication:k,notesShipping:N},i}getPrice(e,i){const r=parseFloat(e.toFixed(2)).toLocaleString("en").replace(/,/g," ");return"\u20bd"===i?`${r} \u0440\u0443\u0431.`:`${i}${r}`}static \u0275fac=function(i){return new(i||t)(w(b),w(z7),w(It),w(Wn),w(uo),w(Fs),w(Qe),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),W7=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>e.attachListeners(),multi:!0,deps:[rx]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({providers:[rx],imports:[Gn]})}return t})();function VV(t=jV){return Ft((n,e)=>{let i=!1;n.subscribe(Bt(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function jV(){return new Tm}function Rd(t,n){const e=arguments.length>=2;return i=>i.pipe(t?o1((r,o)=>t(r,o,i)):al,Ns(1),e?function UV(t){return Ft((n,e)=>{let i=!1;n.subscribe(Bt(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}(n):VV(()=>new Tm))}let $V=(()=>{class t{httpClient;eventService;userService;browserToolsService;cacheService;googleAnalyticsTID="UA-97996247-1";apiSecretGA4="pz7DejZCRIGQFY51P4b--A";measurementIdGA4="G-13563BV10W";googleAnalyticsURL="https://www.google-analytics.com";googleAnalyticsURLCollect="/collect";googleAnalytics4URLCollect="/mp/collect";googleFormUrl="https://docs.google.com/forms";cloudFunctionUrl="https://us-central1-excellent-style-170512.cloudfunctions.net";cloudFunctionUrlCollect="/ga_extension";constructor(e,i,r,o,s){this.httpClient=e,this.eventService=i,this.userService=r,this.browserToolsService=o,this.cacheService=s}attachListeners(){this.eventService.attachEvent(b.SEND_GOOGLE_ANALYTICS,e=>{const{data:i,tabId:r}=e;if(i||0!==Object.keys(i).length){switch(i.type){case"pageview":this.sendGoogleAnalyticsPageView(i.page,r);break;case"event":this.sendGoogleAnalyticsEvent(i.category,i.action,i.label,i.value,r)}this.sendGA4Event(i,r)}}),this.eventService.attachEvent(b.SEND_GA_CID,e=>{this.writeGoogleAnalyticsCID(e)}),this.eventService.attachEvent(b.SEND_GA_CID_AND_SID,e=>{this.writeGA4ClientIdAndSessionId(e)}),this.eventService.attachEvent(b.SEND_TO_GOOGLE_FORM,e=>{const{body:i,replaceUserId:r,id:o}=e.data;this.sendToGoogleForm(i,r,o)})}writeGoogleAnalyticsCID(e){this.userService.user.googleAnalyticsCID=e.data,this.cacheService.set(S.GLOBAL_CACHE_PREFIX,"googleAnalyticsCID",1/0,e.data)}writeGA4ClientIdAndSessionId(e){this.userService.user.gaClientId=e.data.gaClientId,this.userService.user.gaSessionId=e.data.gaSessionId,this.cacheService.set(S.GLOBAL_CACHE_PREFIX,"GA4ClientIdAndSessionId",1/0,e.data)}sendGoogleAnalyticsPageView(e,i){var r=this;return C(function*(){const o=r.userService.user;if(r.browserToolsService.isBrowser(S.BROWSER_NAME_FF)&&!(yield r.cacheService.get(S.GLOBAL_CACHE_PREFIX,"allowAnalyticsCollect")))return;const s=o&&o.googleAnalyticsCID,c={v:"1",tid:r.googleAnalyticsTID,cid:s||"anonymous",cd1:o&&o.token||"0",cd2:s||"anonymous",t:"pageview",dp:e,cd4:Date.now(),cd5:r.browserToolsService.extVersion,cd6:i??0};r.analyticsDataRequestHandler(c)})()}sendGoogleAnalyticsEvent(e,i,r,o,s){var a=this;return C(function*(){const c=a.userService.user;if(a.browserToolsService.isBrowser(S.BROWSER_NAME_FF)&&!(yield a.cacheService.get(S.GLOBAL_CACHE_PREFIX,"allowAnalyticsCollect")))return;const l=c&&c.googleAnalyticsCID,d={v:"1",tid:a.googleAnalyticsTID,cid:l||"anonymous",cd1:c&&c.token||"0",cd2:l||"anonymous",t:"event",ec:e,ea:i,el:r,ev:o||0,cd4:Date.now(),cd5:a.browserToolsService.extVersion,cd6:s??0};a.analyticsDataRequestHandler(d)})()}sendGA4Event(e,i){var r=this;return C(function*(){if(r.browserToolsService.isBrowser(S.BROWSER_NAME_FF)&&!(yield r.cacheService.get(S.GLOBAL_CACHE_PREFIX,"allowAnalyticsCollect")))return;const o=r.userService.user,s=o&&o.token,a=o&&o.gaClientId;let l;const u={tabId:i||0,extVersion:r.browserToolsService.extVersion,session_id:o&&o.gaSessionId||"anonymous"};switch(e.type){case"pageview":l={name:"page_view",params:{...u,page:e.page}};break;case"event":l={name:"click",params:{...u,category:e.category,action:e.action,label:e.label,value:e.value}}}const d={client_id:a||"anonymous",user_id:s||"0",timestamp_micros:1e3*Date.now(),events:[l]};r.sendGA4Data(d)})()}sendToGoogleForm(e,i,r){var o=this;return C(function*(){e[i]=o.userService.user.token||0,o.sendGoogleFormData(e,r)})()}analyticsDataRequestHandler(e){this.sendGoogleAnalyticsData(e),this.sendGoogleAnalyticsDataCloudFunction(e)}sendGoogleAnalyticsData(e){const i=new URL(`${this.googleAnalyticsURL}${this.googleAnalyticsURLCollect}`);for(const r of Object.keys(e))try{i.searchParams.append(r,decodeURIComponent(e[r]))}catch{i.searchParams.append(r,e[r])}this.httpClient.post(i.href,null,{responseType:"text"}).pipe(Rd()).subscribe()}sendGoogleAnalyticsDataCloudFunction(e){this.httpClient.post(`${this.cloudFunctionUrl}${this.cloudFunctionUrlCollect}`,JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).pipe(Rd()).subscribe()}sendGA4Data(e){this.httpClient.post(`${this.googleAnalyticsURL}${this.googleAnalytics4URLCollect}?api_secret=${this.apiSecretGA4}&measurement_id=${this.measurementIdGA4}`,JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).pipe(Rd()).subscribe()}sendGoogleFormData(e,i){const r=[];for(const o of Object.keys(e))r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));this.httpClient.post(`${this.googleFormUrl}${i}`,r.join("&"),{headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"text"}).pipe(Rd()).subscribe()}static \u0275fac=function(i){return new(i||t)(w(It),w(b),w(Wn),w(Ki),w(Qe))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),GV=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>e.attachListeners(),multi:!0,deps:[$V]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({imports:[Gn]})}return t})(),zV=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({imports:[Gn]})}return t})(),WV=(()=>{class t{httpClient;eventService;configService;userService;merchantsService;tabsService;browserToolsService;pathLogShoppingTrip="/log-shopping-trip";merchants;tabs;constructor(e,i,r,o,s,a,c){this.httpClient=e,this.eventService=i,this.configService=r,this.userService=o,this.merchantsService=s,this.tabsService=a,this.browserToolsService=c,this.merchants=s.merchants}get baseUrl(){return V._api}attachListeners(){var e=this;chrome.webRequest.onBeforeRedirect.addListener(function(){var i=C(function*(r){const o=r.redirectUrl.match(new RegExp(`:${e.userService.user?.token}:T([0-9]*)`));if(o&&r.url){let s;const a=G.getRegexValue(r.url,S.CHECK_LETYSHOPS_VIEW_OR_GO);if(a&&a.length){const c=parseInt(a[1],10);s=e.merchantsService.getMerchantById(c)}if(s){(yield e.isMerchantHasShoppingTripId(s))||(yield e.createShoppingTripId(r,s));const c=s.shoppingTrip;c.transitionIdPrevious=0!==c.transitionId&&c.transitionId!==parseInt(o[1],10)?c.transitionId:c.transitionIdPrevious||0,c.transitionId=parseInt(o[1],10),1===c.activationState&&(c.activationState=2),c.activationStatus=!0,e.sendLogEvent(s,2)}}});return function(r){return i.apply(this,arguments)}}(),{urls:["<all_urls>"],types:["main_frame"]}),chrome.webRequest.onCompleted.addListener(function(){var i=C(function*(r){const o=r.url.includes(V.mainDomain)?new URL(r.url):null;if(o&&o.origin.includes(V.mainDomain)){let a=null;try{a=parseInt(G.getRegexValue(r.url,S.CHECK_LETYSHOPS_VIEW)[1],10)}catch{}if(a){const c=e.merchantsService.getMerchantById(a);if(c){const l=c.shoppingTrip;l&&(r.url.includes("notification_re_activate_cashback")?(l.activationStatePrevious=l.activationState,l.activationState=3):(l.activationStatePrevious=l.activationState||1,l.activationState=2))}}}const s=e.merchantsService.selectByDomain(G.getDomain(r.url));s&&(yield e.sendLogShoppingTrip(r,s))});return function(r){return i.apply(this,arguments)}}(),{urls:["<all_urls>"],types:["main_frame"]}),chrome.webRequest.onBeforeRequest.addListener(function(){var i=C(function*(r){let o=null;try{o=G.getDomain(r.initiator)}catch{}if(o){const s=e.merchantsService.selectByDomain(o);s&&(yield e.getPromoCode(r,s),yield e.checkSentTrackingMerchant(r,s),yield e.getOrderIdByRequest(r,s))}});return function(r){return i.apply(this,arguments)}}(),{urls:["<all_urls>"]},["requestBody"]),this.eventService.attachEvent(b.SEND_THANKS_PAGE_PARAMETERS,function(){var i=C(function*(r){if(r&&r.data&&r.data.info){let o={type:r.data.trackOrderParamMerchant.type};if(r.data.info.orderId)o=Object.assign(o,{order_id:r.data.info.orderId});else if(r.data.info.cookies)for(const a of r.data.trackOrderParamMerchant.cookie_params)if(r.data.info.cookies[a]){o=Object.assign(o,{order_id:r.data.info.cookies[a]});break}const s=e.merchantsService.getMerchantById(r.data.merchantId);e.sendLogEvent(s,6,{orderParam:o})}});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.SENT_LOG_SHOPPING_TRIP,i=>{if(i&&i.data&&i.data.merchantId&&i.data.injectionTracking){const r=this.merchantsService.getMerchantById(i.data.merchantId);this.sendLogEvent(r,9,i.data.injectionTracking)}})}isMerchantHasShoppingTripId(e){var i=this;return C(function*(){return!!e.shoppingTrip&&!!e.shoppingTrip.id&&(yield i.isTimeExpiredShoppingTripId(e))})()}isTimeExpiredShoppingTripId(e){var i=this;return C(function*(){const r=yield i.configService.getParameter(re.INTERVAL_SHOPPING_TRIP_ID);return(new Date).getTime()-r<e.shoppingTrip.timeCreateShoppingTripId})()}sendLogShoppingTrip(e,i){var r=this;return C(function*(){(yield r.isMerchantHasShoppingTripId(i))?i.shoppingTrip.timeCreateShoppingTripId=(new Date).getTime():yield r.createShoppingTripId(e,i);const o=i.cartPage;o&&e.url.includes(o)&&r.sendLogEvent(i,4),r.checkThanksPage(i,e.url)&&(r.sendLogEvent(i,5),yield r.getOrderId(e,i))})()}checkThanksPage(e,i){const r=e.thankYouPage;return r&&r.length>0&&i.includes(r[0].url)&&this.checkParamsThanksPage(i,r)&&this.checkReloadThanksPage()}checkParamsThanksPage(e,i){let r=!0;const o=i[0].params;if(!(o instanceof Array)){r=!1;for(const s in o){if(!new RegExp(`${o[s]}`,"i").test(new URL(e).searchParams.get(s))){r=!1;break}r=!0}}return r&&!!o}checkReloadThanksPage(){const e=this.getHistoryTransitionsCurrentTab(),i=e[e.length-1];return i.referer&&i.url!==i.referer}createShoppingTripId(e,i){var r=this;return C(function*(){const o=i.shoppingTrip;if(yield r.isMerchantHasShoppingTripId(i))o.id=G.guid(),i.shoppingTrip.timeCreateShoppingTripId=(new Date).getTime();else{const{transitionId:a}=o||{};let{transitionIdPrevious:c}=o||{};c=c||a||0,i.shoppingTrip={id:G.guid(),timeCreateShoppingTripId:(new Date).getTime(),activationState:1,activationStatePrevious:1,transitionIdPrevious:c}}const s=r.getHistoryTransitionsEvent(e);r.sendLogEvent(i,1,{historyTransitions:s})})()}sendLogEvent(e,i,r={}){this.sendLogShoppingTripEvent(this.getPreparedData(e,i,r)).then()}getPreparedData(e,i,r){const o=this.browserToolsService.fullInfo,s=e.shoppingTrip;return{shopping_trip_id:s.id,transition_id:s.transitionId||0,shop_id:e.id,event_type:i,extension_version:this.browserToolsService.extVersion,activation_status:!!s.activationStatus,activation_state:s.activationState||1,data:Object.assign(r,{activation_state_previous:s.activationStatePrevious||1,transition_id_previous:s.transitionIdPrevious||0,environment:{os:o.os,os_version:o.osversion,browser:o.browser,browser_version:o.version}})}}getOrderId(e,i){var r=this;return C(function*(){const o=i.trackOrderParams;if(o&&o.length>0){const s=o[0];let a={type:s.type};const c=s.parameters;let l=null;switch(s.type){case"url":if(c&&"params"===c.type){const u=c.param_name;l=new URL(e.url).searchParams.get(u)}c&&"url"===c.type&&(l=decodeURIComponent(e.url).match(new RegExp(c.regex))[c.index]),l&&(a=Object.assign(a,{order_id:l}),r.sendLogEvent(i,6,{orderParam:a}));break;case"cookies":case"page":(c&&"element"===c.type||s.cookie_params)&&setTimeout(()=>{r.eventService.fireEvent(b.GET_THANKS_PAGE_PARAMETERS,{tabId:r.tabsService.currentTabId,data:{merchantId:i.id,parameters:c,trackOrderParamMerchant:s}})},2e3)}}})()}getOrderIdByRequest(e,i){var r=this;return C(function*(){const o=i.trackOrderParams;if(o&&o.length>0){const s=o[0];if("request"===s.type){const a=s.parameters;if("url"===a.type){let c={type:s.type},l=null;try{l=decodeURIComponent(e.url).match(new RegExp(a.regex))[a.index]}catch{}l&&(c=Object.assign(c,{order_id:l}),r.sendLogEvent(i,6,{orderParam:c}))}}}})()}getHistoryTransitionsCurrentTab(){const e=this.tabsService.selectById(),i=[];return e.history.forEach(r=>{i.push({date:r.date,referer:r.referer,url:r.url})}),i}getHistoryTransitionsEvent(e){return e.redirectUrl?{initiator:e.initiator,url:e.redirectUrl,referer:e.url}:{initiator:e.initiator,url:e.url,referer:e.initiator}}getPromoCode(e,i){var r=this;return C(function*(){const o=i.parsePromoCodeParameters;if(o&&e.url.includes(o.requestUrl)&&e.method===o.requestMethod){let c={type:o.parseType},l=null;switch(o.parseType){case"requestBody":if(e.requestBody&&e.requestBody.formData){const u=e.requestBody.formData;l=u[o.requestData]&&u[o.requestData][0]}else if(e.requestBody&&e.requestBody.raw){let u=JSON.parse(decodeURIComponent(String.fromCharCode.apply(null,new Uint8Array(e.requestBody.raw[0].bytes))));const d=o.requestData.split(".");for(const f of d)l=u[f],u=u[f]}break;case"requestRegExp":l=e.url.match(new RegExp(o.requestData))[1],c=Object.assign(c,{promoCode:l})}l&&(c=Object.assign(c,{promoCode:l}),r.sendLogEvent(i,7,{promoCodeParam:c}))}})()}checkSentTrackingMerchant(e,i){var r=this;return C(function*(){const o=i.parseSentTrackingParameters;o&&e.url.includes(o.requestUrl)&&e.method===o.requestMethod&&r.sendLogEvent(i,8,{trackingMerchantParameters:{url:e.url,saveParameters:{cookies:i.savedCookie,get:i.savedParams}}})})()}sendLogShoppingTripEvent(e){var i=this;return C(function*(){le(i.httpClient.post(`${i.baseUrl}${i.pathLogShoppingTrip}`,JSON.stringify(e),{withCredentials:!0})).then(r=>r).catch(r=>console.error(r))})()}static \u0275fac=function(i){return new(i||t)(w(It),w(b),w(re),w(Wn),w(uo),w(Fs),w(Ki))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),h_=(()=>{class t{httpClient;configService;eventService;userService;merchantsService;tabsService;browserToolsService;cacheService;utilsService;cashbackIsAvailable="/api/extension/v1/cashback/is-available";eventInform="/api/extension/v1/event/inform";similarList="/twirp/letytools.api.v2.SimilarService/list";itemHot="/api/extension/v1/item/hot";cacheKeySimilarList="similarList";cacheKeySimpleSimilar="simpleSimilar";tabs;merchants;constructor(e,i,r,o,s,a,c,l,u){this.httpClient=e,this.configService=i,this.eventService=r,this.userService=o,this.merchantsService=s,this.tabsService=a,this.browserToolsService=c,this.cacheService=l,this.utilsService=u,this.merchants=s.merchants}get baseUrl(){return V._tools}getHeaders(e,i){return{"app-token":S.APP_TOKEN,"extension-token":e.tokenCookies&&e.tokenCookies.eaetkn?e.tokenCookies.eaetkn:"","user-token":e.tokenCookies&&e.tokenCookies.eautkn?e.tokenCookies.eautkn:"",referrer:i||"","version-ext":chrome.runtime.getManifest().version}}sendCashbackIsAvailable(e,i){const r=new URL(`${this.baseUrl}${this.cashbackIsAvailable}`),o={url:e.href};Object.keys(o).forEach(a=>{r.searchParams.append(a,o[a])}),le(this.httpClient.get(r.href,{headers:this.getHeaders(this.userService.user,i),withCredentials:!0}).pipe()).then(a=>{const c=G.getDomain(r.href),l=c&&this.merchantsService.selectByDomain(c);l?l.isCashbackAvailable={code:a.code,expire:1e3*a.expire,lastTimeRequest:(new Date).getTime()}:this.cacheService.get(S.GLOBAL_CACHE_PREFIX,"isCashbackAvailable").then(u=>{if(u){const d=[];for(const f of u)d.push(f.url);if(d.includes(e.host)){for(const f of u)e.host===f.url&&(f.url=e.host,f.code=a.code,f.expire=1e3*a.expire,f.lastTimeRequest=(new Date).getTime());this.cacheService.set("global","isCashbackAvailable",1/0,u)}else u.push({url:e.host,code:a.code,expire:1e3*a.expire,lastTimeRequest:(new Date).getTime()}),this.cacheService.set("global","isCashbackAvailable",1/0,u)}else(u=[]).push({url:e.host,code:a.code,expire:1e3*a.expire,lastTimeRequest:(new Date).getTime()}),this.cacheService.set("global","isCashbackAvailable",1/0,u)})})}getItemHot(e,i){var r=this;return C(function*(){const o=new URL(`${r.baseUrl}${r.itemHot}`),s={url:e};return Object.keys(s).forEach(c=>{o.searchParams.append(c,s[c])}),le(r.httpClient.get(o.href,{headers:r.getHeaders(i),withCredentials:!0}).pipe()).then(c=>c).catch(c=>console.log(c))})()}letyToolEvent(e,i){le(this.httpClient.post(`${this.baseUrl}${this.eventInform}`,JSON.stringify({name:e.data.name,data:e.data.data}),{headers:this.getHeaders(i),withCredentials:!0}).pipe())}fetchSimilarList(e,i){var r=this;return C(function*(){return le(r.httpClient.post(`${r.baseUrl}${r.similarList}`,JSON.stringify(e),{headers:r.getHeaders(i),withCredentials:!0}).pipe()).then(s=>s)})()}globalCashbackIsAvailableHandler(e){const i=new URL(e.url),r=this.tabsService.selectById(this.tabsService.currentTabId),o=r&&r.history&&r.history.length>0?r.history[r.history.length-1].referer:"";this.userService.isLogin&&e&&e.data&&e.data.tokenCookies&&Object.keys(e.data.tokenCookies).length&&(this.userService.user.tokenCookies=e.data.tokenCookies,this.cacheService.set("global","userTokenCookies",1/0,{token:this.userService.user.token,tokenCookies:e.data.tokenCookies}));const s=G.getDomain(e.url),a=s&&this.merchantsService.selectByDomain(s),c=a?a.isCashbackAvailable:{};if(a&&a.isCashbackAvailable&&(0===c.code||1===c.code&&(new Date).getTime()-c.lastTimeRequest>c.expire))return this.sendCashbackIsAvailable(i,o),!0;e.url.startsWith("http")&&this.eventService.fireEvent(b.GET_DD_LIST,{}).then(l=>{l&&!l.includes(G.getDomain(i.host))&&this.cacheService.get("global","isCashbackAvailable").then(u=>{if(u){const d=[];for(const f of u)d.push(f.url);if(d.includes(i.host))for(const f of u)f.url===i.host&&(0===f.code||1===f.code&&(new Date).getTime()-f.lastTimeRequest>f.expire)&&this.sendCashbackIsAvailable(i,o);else this.sendCashbackIsAvailable(i,o)}else this.sendCashbackIsAvailable(i,o)})})}getSimilarList(e){var i=this;return C(function*(){if(!e.data)return null;const r=G.getDomain(e.url),o=r&&i.merchantsService.selectByDomain(r),s=[],a=[],c=[],{similarRequestParams:l,storageData:u}=e.data,d=yield i.fetchSimilarList(l,i.userService.user);if(o)return null;const f=d&&d.searchResult&&d.searchResult.rows;if(f)for(const I of f){const y=G.getDomain(I.target.url),T=y&&i.merchantsService.selectByDomain(y);if(T&&T.settings.showInSimilar){const k=I.target.priceMinLast&&I.target.priceMinLast.price,N=k,O=k&&k.value,M=k.currency&&S.CURRENCY_LIST[k.currency.name];a.push(I.target.id),s.push({merchantId:T.id,targetId:I.target.id,ext_referrer:encodeURIComponent(I.target.url),name:I.target.name,url:I.target.url,img:I.target.imgs[0]??null,productPricePrefix:M,productPriceValue:O,productPrice:N,link:i.utilsService.getViewUrlItem(T.id,I.target.url),cashbackRate:I.target.cashbackRate,userCashbackAmount:null})}else c.push(I.target.id)}const h={isLogin:i.userService.isLogin,settingsQuery:d.settingsQuery,params:d.params,offers:s,targetShow:a,targetSkip:c},g={...yield i.cacheService.get("global","similarList")},m={...u,productData:h},{domainKey:v,similarKey:_,productData:E}=m;return void 0===g[v]&&(g[v]={blockedByDomain:!1,blockedByTime:null,showMinimizedTill:0}),g[v][_]={...E,lastTimeUpdated:Date.now()},(!E?.settingsQuery||"CODE_STOP"===E.settingsQuery.code)&&(g[v].apiBlockTime=Date.now(),g[v].apiBlockTimeExpire=1e3*E.settingsQuery.expire),g[v][_].params&&g[v][_].params.isPreview&&delete g[v][_].params.isPreview,i.cacheService.set("global","similarList",1/0,g),h})()}attachListeners(){var e=this;this.eventService.attachEvent(b.GET_TOKEN_COOKIES,function(){var i=C(function*(r){e.browserToolsService.isBrowser(S.BROWSER_NAME_FF)&&!(yield e.cacheService.get("global","allowTabUrlCollect"))||e.globalCashbackIsAvailableHandler(r)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.SEND_LETYTOOL_EVENT,function(){var i=C(function*(r){e.browserToolsService.isBrowser(S.BROWSER_NAME_FF)&&!(yield e.cacheService.get("global","allowTabUrlCollect"))||e.letyToolEvent(r,e.userService.user)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.NOTIFICATION_GET_SIMILAR_LIST,i=>this.getSimilarList(i))}getHotInfo(e,i){var r=this;return C(function*(){return yield r.getItemHot(e,i)})()}clearSimilarToolsCache(){this.cacheService.get("global","userSettings").then(e=>{const i=e&&!e.showSimpleSimilarInjection&&!this.isUndefined(e.showSimpleSimilarInjection),r=e&&!e.showSimilarListInjection&&!this.isUndefined(e.showSimilarListInjection);this.cleanSimpleSimilarCache(i),this.cleanSimilarCache(r)})}cleanSimpleSimilarCache(e){this.cacheService.get("global",this.cacheKeySimpleSimilar).then(i=>{if(e||this.isEmpty(i))return void this.cacheService.remove("global",this.cacheKeySimpleSimilar);const r=i.domainsList.filter(o=>"boolean"==typeof o.status?!o.status:o.status>Date.now());this.cacheService.set("global",this.cacheKeySimpleSimilar,1/0,{domainsList:r,settings:i.settings})})}cleanSimilarCache(e){this.cacheService.get("global",this.cacheKeySimilarList).then(i=>{if(e||this.isEmpty(i))return void this.cacheService.remove("global",this.cacheKeySimilarList);const r={};for(const o of Object.keys(i)){const s=i[o],a=s.showMinimizedTill>Date.now(),c=s.blockedByDomain,l=s.blockedByTime&&s.blockedByTime>Date.now(),u=s.apiBlockTimeExpire&&Date.now()-s.apiBlockTime<s.apiBlockTimeExpire;(a||c||l||u)&&(r[o]={blockedByDomain:s.blockedByDomain,blockedByTime:s.blockedByTime,apiBlockTime:s.apiBlockTime,apiBlockTimeExpire:s.apiBlockTimeExpire,showMinimizedTill:s.showMinimizedTill})}this.cacheService.set("global",this.cacheKeySimilarList,1/0,r)})}isEmpty(e){return Array.isArray(e)||"string"==typeof e?!e||0===e.length:!("object"==typeof e&&!Array.isArray(e)&&null!==e)||!e||0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}isUndefined(e){return typeof e>"u"}static \u0275fac=function(i){return new(i||t)(w(It),w(re),w(b),w(Wn),w(uo),w(Fs),w(Ki),w(Qe),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YV=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>e.attachListeners(),multi:!0,deps:[h_]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({imports:[Gn]})}return t})(),sx=(()=>{class t{eventService;cacheService;utilsService;static SIMPLE_SIMILAR_USER_SETTINGS="showSimpleSimilarInjection";static SIMILAR_USER_SETTINGS="showSimilarListInjection";static PRODUCT_MONITORING_USER_SETTINGS="showSmartToolBarInjection";static SIMPLE_SIMILAR="SIMPLE_SIMILAR";static SIMILAR="SIMILAR";static BEST_DEALS="BEST_DEALS";static SMART_TOOLBAR="SMART_TOOLBAR_2";domain=G.getDomain(window.location.href);eapiSettings;constructor(e,i,r){this.eventService=e,this.cacheService=i,this.utilsService=r}isFeatureEnable(e,i=!1){var r=this;return C(function*(){const o=yield r.eventService.fireEvent(b.GET_INFO_USER,{});return!(!(yield r.isFeatureEnableOnEapi(e))||!(yield r.isFeatureEnableForAnonymous(e,!!o.token))||!i&&!(yield r.isFeatureEnableOnUserSettings(e))||!(yield r.checkByAvailableCountry(e))||(yield r.checkDomainInFeatureDisabledHosts(e))||!(yield r.checkByAvailableSegments(e,o.segments))||!(yield r.checkByAvailableExperiments(e,o.experiments)))})()}isFeatureEnableOnEapi(e){var i=this;return C(function*(){const r=yield i.getSettings();return!!r&&r.features&&Object.prototype.hasOwnProperty.call(r.features,e)&&r.features[e].enabled})()}isFeatureEnableForAnonymous(e,i){var r=this;return C(function*(){return!!i||(yield r.getSettings())?.features[e]?.enabledForAnonymous})()}isFeatureEnableOnUserSettings(e){var i=this;return C(function*(){let r;switch(e){case t.SIMILAR:r=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,t.SIMILAR_USER_SETTINGS);break;case t.SIMPLE_SIMILAR:r=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,t.SIMPLE_SIMILAR_USER_SETTINGS);break;case t.SMART_TOOLBAR:r=yield i.cacheService.get(S.GLOBAL_CACHE_PREFIX,t.PRODUCT_MONITORING_USER_SETTINGS);break;default:r=!0}return"boolean"!=typeof r||r})()}checkDomainInFeatureDisabledHosts(e){var i=this;return C(function*(){const r=yield i.getSettings(),o=!!r&&Object.prototype.hasOwnProperty.call(r.features,e)&&r.features[e].alwaysDisabledHosts;return o&&o.some(s=>s===i.domain)})()}checkByAvailableCountry(e){var i=this;return C(function*(){const r=yield i.getSettings(),o=!!r&&Object.prototype.hasOwnProperty.call(r.features,e)&&r.features[e].countries;return yield i.utilsService.matchLocaleCookie(o)})()}checkByAvailableSegments(e,i){var r=this;return C(function*(){const s=(yield r.getSettings()).features[e].segments;return!s?.length||!!s.filter(c=>i.some(l=>l===c)).length})()}checkByAvailableExperiments(e,i){var r=this;return C(function*(){const s=(yield r.getSettings()).features[e].experiments;return!s?.length||!!s.filter(c=>i.some(l=>l===c)).length})()}getSettings(){var e=this;return C(function*(){return e.eapiSettings||(e.eapiSettings=yield e.eventService.fireEvent(b.GET_GLOBAL_SETTINGS)),e.eapiSettings})()}static \u0275fac=function(i){return new(i||t)(w(b),w(Qe),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),KV=(()=>{class t{eapiService;eventService;configService;cacheService;httpClient;localeService;userService;prefix="auto.promo";key="shops";pathSimpleSimilarOffers="/simple-similar/offers";_request$;constructor(e,i,r,o,s,a,c){this.eapiService=e,this.eventService=i,this.configService=r,this.cacheService=o,this.httpClient=s,this.localeService=a,this.userService=c}get baseUrl(){return V._api}attachListener(){this.eventService.attachEvent(b.GET_AUTOPROMO_OFFERS,()=>this.userAutoPromoShops()),this.eventService.attachEvent(b.UPDATE_AUTOPROMO_OFFERS,()=>this.refresh())}userAutoPromoShops(){var e=this;return C(function*(){const i=yield e.cacheService.get(e.prefix,e.key);if(i)return i;const r=yield e.fetch();return yield e.setToCache(r),r})()}getValidAutoPromoOffers(e){var i=this;return C(function*(){let r=yield i.userAutoPromoShops();return i.getEndedAutoPromo(r)&&(e.resetAll(),yield i.userService.updateUserRates(),r=yield i.fetch(),yield i.setToCache(r)),r})()}refresh(){var e=this;return C(function*(){const i=yield e.fetch();yield e.setToCache(i)})()}clear(){this.cacheService.remove(this.prefix,this.key)}getEndedAutoPromo(e){return e?.autoPromotions?.find(i=>i.autoPromotion.endAt&&new Date(i.autoPromotion.endAt).getTime()<=Date.now())}fetch(){var e=this;return C(function*(){return e._request$||(e._request$=e.httpClient.get(`${e.baseUrl}${e.pathSimpleSimilarOffers}`,{withCredentials:!0}).pipe(tt(i=>{const r=i||{autoPromotions:[]};return r.lastUpdate=Date.now(),r}),Xi(()=>Xe({lastUpdate:null,autoPromotions:[]})),vd(),function qV(t){return Ft((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}(()=>{e._request$=null}))),le(e._request$)})()}setToCache(e){var i=this;return C(function*(){const r=yield i.configService.getParameter(re.UPDATE_INTERVAL_AUTOPROMO);i.cacheService.set(i.prefix,i.key,r/2,e)})()}static \u0275fac=function(i){return new(i||t)(w(bc),w(b),w(re),w(Qe),w(It),w(zt),w(Wn))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XV=(()=>{class t{cacheService;eapiService;configService;eventService;navigationService;browserToolsService;prefix=S.GLOBAL_CACHE_PREFIX;promoNotificationKey="promo.notification";fetchPromoNotificationKey="promo.notification.fetch";showPromoNotificationKey="promo.notification.show";showPromoNotificationUserSettings="showPromoNotifications";intervalPromoNotifyHandler;notificationStack={};constructor(e,i,r,o,s,a){this.cacheService=e,this.eapiService=i,this.configService=r,this.eventService=o,this.navigationService=s,this.browserToolsService=a,this.attachListeners(),this.attachActionListeners()}init(){var e=this;return C(function*(){yield e.promoNotifyHandlerFetch(),yield e.promoNotifyHandlerTimer()})()}attachListeners(){var e=this;this.eventService.attachEvent(b.GET_PROMO_NOTIFICATIONS,C(function*(){let i=e.cacheService.get(e.prefix,e.promoNotificationKey);return i||(i=yield e.promoNotifyHandlerFetch()),i}))}promoNotifyHandlerFetch(){var e=this;return C(function*(){let i=yield e.cacheService.get(e.prefix,e.promoNotificationKey);i||(i=(yield e.eapiService.getPromoNotifications())??[]);const r=yield e.configService.getParameter(re.PROMO_NOTIFY_PERIOD);e.cacheService.set(e.prefix,e.promoNotificationKey,r/2,i);const o=[];for(const a of Object.keys(i))o.push({id:i[a].id,type:"promo"});const s=yield e.cacheService.get(e.prefix,e.fetchPromoNotificationKey);if(null==s)e.eventService.fireEvent(b.SEND_USER_NOTIFICATION_LOGS,{data:{arrayNotifications:o,notificationEvent:"fetchPromoNotification"}});else{const a=o.filter((c,l)=>c.id!==(s[l]?s[l].id:null));Array.isArray(a)&&a.length>0&&e.eventService.fireEvent(b.SEND_USER_NOTIFICATION_LOGS,{data:{arrayNotifications:a,notificationEvent:"fetchPromoNotification"}})}return e.cacheService.set(e.prefix,e.fetchPromoNotificationKey,r/2,o),i})()}promoNotifyHandler(){var e=this;return C(function*(){const i=yield e.eventService.fireEvent(b.GET_CURRENT_CONTENT_TAB);e.cacheService.get(e.prefix,e.showPromoNotificationUserSettings).then(o=>{if((typeof o>"u"||o)&&i){const s=new URL(i.url);e.cacheService.get(e.prefix,e.promoNotificationKey).then(function(){var a=C(function*(c){c||(c=yield e.promoNotifyHandlerFetch());const l=Date.now();for(const[u,d]of Object.entries(c))(d.domains.includes("*")||d.domains.includes(s.origin))&&l>new Date(d._notificateAt).getTime()&&l<new Date(d._expireAt).getTime()&&"push"===d.type&&e.cacheService.get(e.prefix,`${e.showPromoNotificationKey}_${u}`).then(f=>{f||e.showPush(d,()=>{e.cacheService.set(e.prefix,`${e.showPromoNotificationKey}_${u}`,252e5,!0)})})});return function(c){return a.apply(this,arguments)}}())}})})()}promoNotifyHandlerTimer(){var e=this;clearInterval(this.intervalPromoNotifyHandler),this.intervalPromoNotifyHandler=setInterval(C(function*(){yield e.promoNotifyHandler()}),S.SHOW_PROMO_NOTIFY_INTERVAL)}showPush(e,i){let r="images/btn/logo65.png";(e._href_logo||e._href_logo.startsWith("http"))&&(r=e._href_logo);const o=e.id,s={type:"basic",iconUrl:r,title:e.title,message:e.message};this.notificationStack[o]=e,chrome.notifications.create(o,s,()=>{this.sendEventPromoNotificationLogs("createPromoNotification",e)}),"function"==typeof i&&i()}sendEventPromoNotificationLogs(e,i){this.eventService.fireEvent(b.SEND_USER_NOTIFICATION_LOGS,{data:{arrayNotifications:[{id:i.id,type:"promo"}],notificationEvent:e}})}clearNotificationCache(){var e=this;return C(function*(){yield e.cacheService.remove(e.prefix,e.promoNotificationKey),yield e.cacheService.remove(e.prefix,e.fetchPromoNotificationKey)})()}attachActionListeners(){chrome.notifications.onClicked.addListener(e=>{this.notificationStack[e]&&(this.navigationService.navigate({tabId:Pt.NEW_TAB,url:this.notificationStack[e]._href}),this.sendEventPromoNotificationLogs("clickPromoNotification",this.notificationStack[e]),chrome.notifications.clear(e),delete this.notificationStack[e])}),this.browserToolsService.browserInfo.name!==S.BROWSER_NAME_FF&&chrome.notifications.onClosed.addListener((e,i)=>{this.notificationStack[e]&&i&&(this.sendEventPromoNotificationLogs("closePromoNotification",this.notificationStack[e]),delete this.notificationStack[e])})}static \u0275fac=function(i){return new(i||t)(w(Qe),w(bc),w(re),w(b),w(Pt),w(Ki))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QV=(()=>{class t{similarToolsService;eapiService;eventService;configService;featureService;localeService;categoriesService;translateService;logShoppingTripService;userService;iconService;merchantsService;navigationService;browserToolsService;autoPromoShopsService;cacheService;notificationService;httpClient;tabsService;utilsService;userNotificationsService;apiClient;intervalPushLogInstall;intervalUsersNotifyHandler;intervalPushLogRequest;lastMerchantDomain=null;isHotProduct=!1;hotProductId=null;rate=null;backgroundInited=!1;history=[];currentMerchantId;constructor(e,i,r,o,s,a,c,l,u,d,f,h,p,g,m,v,_,E,I,y,T){this.similarToolsService=e,this.eapiService=i,this.eventService=r,this.configService=o,this.featureService=s,this.localeService=a,this.categoriesService=c,this.translateService=l,this.logShoppingTripService=u,this.userService=d,this.iconService=f,this.merchantsService=h,this.navigationService=p,this.browserToolsService=g,this.autoPromoShopsService=m,this.cacheService=v,this.notificationService=_,this.httpClient=E,this.tabsService=I,this.utilsService=y,this.userNotificationsService=T,this.attachListeners(),m.attachListener(),u.attachListeners(),h.attachListeners()}init(){var e=this;return C(function*(){e.apiClient=new V(e.configService,e.eventService,e.cacheService,e.httpClient),yield e.apiClient.init(),e.onInstalledAndDelete(),yield e.userService.init(),yield e.merchantsService.init(),yield e.loadUserLanguage(),e.setPushLogsInterval(),e.iconService.standard(),e.initOptionsPagePortListener(),yield e.notificationService.init(),yield e.userNotificationsService.userNotifyHandlerTimer(),yield e.getDisableDomainList(),yield e.setCurrentTabIdForMV3(),e.similarToolsService.clearSimilarToolsCache(),e.setIconOnFirstOpenBadge(),e.onBeforeSendHeadersListener(),e.backgroundInited=!0,e.cacheService.remove("club","popup.offers")})()}setCurrentTabIdForMV3(){var e=this;return C(function*(){if(3===chrome.runtime.getManifest().manifest_version){const i={active:!0,lastFocusedWindow:!0},[r]=yield chrome.tabs.query(i);r&&(e.tabsService.currentTabId=r.id)}})()}initOptionsPagePortListener(){var e=this;chrome.runtime.onConnect.addListener(function(){var i=C(function*(r){const o=(yield e.userService.settings())||{};"optionspresence"===r.name&&r.onDisconnect.addListener(C(function*(){const s=(yield e.userService.settings())||{};Object.entries(o).toString()!==Object.entries(s).toString()&&e.eventService.fireEvent(b.SEND_USER_SETTINGS,{data:{type:1}})}))});return function(r){return i.apply(this,arguments)}}())}onBeforeSendHeadersListener(){var e=this;const i={urls:["<all_urls>"],types:["main_frame","xmlhttprequest"]};this.browserToolsService.isBrowser(S.BROWSER_NAME_YABROWSER)&&(i.types=["main_frame","xmlhttprequest","image"]),chrome.webRequest.onBeforeSendHeaders.addListener(r=>{C(function*(){yield e.checkActivateCashback(r)})()},i)}setIconOnFirstOpenBadge(){setTimeout(()=>{this.cacheService.get(S.GLOBAL_CACHE_PREFIX,S.POPUP_FIRST_OPENING_TOKEN).then(e=>{!e&&!this.userService.isLogin&&this.iconService.setBadge("!")})},4e3)}setPushLogsInterval(){clearInterval(this.intervalPushLogRequest),this.intervalPushLogRequest=setInterval(()=>{this.pushLogRequest()},S.INTERVAL_PUSH_LOG_REQUEST)}attachListeners(){var e=this;this.eventService.attachEvent(b.WAKE_UP,C(function*(){return e.backgroundInited})),this.eventService.attachEvent(b.GET_POPUP_INIT_DATA,C(function*(){return{currentMerchantId:e.currentMerchantId,currentPopupTab:yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"currentPopupTab"),currentContentTab:e.tabsService.selectById(e.tabsService.currentTabId)}})),this.eventService.attachEvent(b.SET_CURRENT_POPUP_TAB,function(){var i=C(function*(r){const{currentPopupTab:o}=r.data;e.cacheService.set(S.GLOBAL_CACHE_PREFIX,"currentPopupTab",1/0,o)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.TRIGGER_FROM_POPUP_CASHBACK_ACTIVATE,function(){var i=C(function*(r){const{id:o}=r.data;e.activateFromPopup(o)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.GET_DD_LIST,C(function*(){return e.getDisableDomainList()})),this.eventService.attachEvent(b.GET_CURRENT_CONTENT_TAB,C(function*(){return e.tabsService.selectById(e.tabsService.currentTabId)})),this.eventService.attachEvent(b.DOCUMENT_COMPLETE,i=>this.globalPageHandler(i)),this.eventService.attachEvent(b.TAB_CHANGED,i=>this.globalPageHandler(i)),this.eventService.attachEvent(b.BEFORE_NAVIGATE,i=>{this.cacheService.get(S.GLOBAL_CACHE_PREFIX,"settings").then(r=>{if(r&&r.redirectUrl&&r.redirectUrl.length>0){const o=new URL(i.url);let s=null;try{s=G.getRegexValue(window.location.href,S.CHECK_LETYSHOPS)[0]}catch{}(new RegExp(s,"i").test(o.host)&&!new RegExp(s,"i").test(new URL(r.redirectUrl).host)||s===o.host&&o.host!==new URL(r.redirectUrl).host)&&this.navigationService.navigate({tabId:this.tabsService.currentTabId.toString(),url:r.redirectUrl+o.pathname+o.search})}})}),this.eventService.attachEvent(b.NOTIFICATION_DISMISS,i=>{if(i.data){const r=this.merchantsService.selectById(i.data);if(!r)return;this.eventService.fireEvent(S.MERCHANT_SUPPRESSED,{data:{id:r.id}}),this.userService.isLogin&&this.userService.checkUserSegments(S.PERMISSIONS_SEGMENTS.extTestQ1)&&this.merchantsService.setSuppressedTime(r.id)}}),this.eventService.attachEvent(b.NOTIFICATION_CASHBACK_ACTIVATE,i=>{if(i.data){let r;r=i.data&&i.data.merchantId?this.merchantsService.selectById(i.data.merchantId):this.merchantsService.selectByDomain(G.getDomain(i.url)),r&&this.eventService.fireEvent(b.CLOSE_ALL_NOTIFICATION,{allTabs:!0,data:r})}}),this.eventService.attachEvent(b.NOTIFICATION_GET_INFO,i=>this.globalPageHandler(i)),this.eventService.attachEvent(b.USER_NOTIFICATION_DISMISS,function(){var i=C(function*(r){r.data&&(yield e.userService.pushReviewedNotifications(r.data))});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.SAW_REWRITE,i=>{this.unRewrite(i)}),this.eventService.attachEvent(b.BUTTON_UPDATE,()=>{const i=!!this.currentMerchantId&&this.merchantsService.selectById(this.currentMerchantId);i?i.isActivated?this.iconService.green():this.iconService.red():this.iconService.standard()}),this.eventService.attachEvent(b.UPDATE_MERCHANTS_RATES,C(function*(){yield e.userService.updateUserRates()})),this.eventService.attachEvent(b.LOAD_USER_LANGUAGE,function(){var i=C(function*(r){const{user:o}=r.data;yield e.localeService.load(o?.language,o?.country),yield e.loadUserLanguage(),e.userService.isLogin&&e.eventService.fireEvent(b.CLEAR_USER_PARTNER_DATA)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.REFRESH_ALL,C(function*(){yield e.notificationService.clearNotificationCache(),yield e.notificationService.init(),yield e.autoPromoShopsService.refresh(),yield e.merchantsService.update(),e.similarToolsService.cleanSimpleSimilarCache(),e.similarToolsService.cleanSimilarCache()})),this.eventService.attachEvent(b.UPDATE_MERCHANTS_HOT_PRODUCTS,i=>{const r=this.merchantsService.selectById(i.data.id);r&&(r.hotProducts=i.data.hotProductsArr)}),this.eventService.attachEvent(b.CHECK_USER_IN_SEGMENT,function(){var i=C(function*(r){const{segments:o,resultByKey:s}=r.data;if(!(Array.isArray(o)&&o.length&&e.userService.user&&e.userService.user.token))return!1;const a=e.userService.user.segments;if(!Array.isArray(a)||!a.length)return!1;if(s){const c={};return o.forEach(l=>{c[l]=!!a.find(u=>u===l)}),Object.values(c).some(l=>!0===l)&&c}return!!o.filter(c=>a.includes(c)).length});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.SEND_USER_SETTINGS,i=>{this.similarToolsService.clearSimilarToolsCache(),this.pushLogUserSettings(i.data.type)}),this.eventService.attachEvent(b.GET_NATIVE_USER_AGENT,()=>{}),this.eventService.attachEvent(b.SEND_USER_NOTIFICATION_LOGS,i=>{this.pushUserNotificationLogs(i.data)}),this.eventService.attachEvent(b.GET_SIMPLE_SIMILAR_DOMAIN_DATA,function(){var i=C(function*(r){const{domain:o}=r.data;if(e.merchantsService.selectByDomain(o)||!o)return;const a={domainsList:[],settings:S.SIMPLE_SIMILAR_VIEWS_SETTINGS},c=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"simpleSimilar");let l,d;if(_n(c)||_n(c.domainsList))l={...a};else{const h=c.domainsList;if(l={...c},d=h.some(p=>p.domain.replace("www.","").includes(o)),d)return l}const f=yield e.eapiService.getSimpleSimilarSettings(o);if(_n(f)||_n(f.domainsList)){const h=yield e.configService.getParameter(re.INTERVAL_COUNT_SETTINGS_SIMPLE_SIMILAR);l.domainsList.push({domain:o,status:Date.now()+h})}else f.domainsList.forEach(h=>{h.status=!0,h.pageCount=1,h.lastShown=1,l.domainsList.push(h)}),l.settings=f.settings;return e.cacheService.set(S.GLOBAL_CACHE_PREFIX,"simpleSimilar",1/0,l),l});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.GET_OFFERS_WITH_AUTOPROMO_AND_CASHBACK,i=>this.prepareProductOffers(i.data.offers)),this.eventService.attachEvent(b.IS_BROWSER,i=>{const{names:r}=i.data;return r.some(o=>this.browserToolsService.isBrowser(o))}),this.eventService.attachEvent(b.UPDATE_FAVORITE_STATUS,i=>{if(i.data){const r=i.data.id,o=i.data.isFavorite;o?this.userService.removeFromFavorites(r):this.userService.addToFavorites(r),this.merchantsService.selectById(r).isFavorite=!o,i.data.triggerContent&&this.updateFavoriteStatusInContent(!o,r)}}),this.eventService.attachEvent(b.FETCH_SIMPLE_SIMILAR_AUTOPROMO,()=>this.autoPromoShopsService.refresh()),this.eventService.attachEvent(b.GET_API_CLIENT_URLS_STATE,C(function*(){return{...V,reasonCashbackReactivate:V.reasonCashbackReactivate(e.browserToolsService.browserInfo.name.toLowerCase()),confidentialPage:V.confidentialPage(e.browserToolsService.browserInfo.name.toLowerCase()),helpPage:V.helpPage(e.localeService.language,e.browserToolsService.browserInfo.name.toLowerCase())}})),this.eventService.attachEvent(b.GET_VALID_AUTOPROMO_OFFERS,C(function*(){return yield e.autoPromoShopsService.getValidAutoPromoOffers(Object.values(e.merchantsService.merchants))})),this.eventService.attachEvent(b.GET_ALL_MERCHANTS_AND_AUTOPROMO_POPUP,C(function*(){yield e.merchantsService.reInitMerchantsIfEmptyContext();const i=e.userService.user.recommended??[],r=e.userService.user.viewed??[],o=e.userService.isLogin,{autoPromotions:s}=yield e.autoPromoShopsService.getValidAutoPromoOffers(Object.values(e.merchantsService.merchants)),a=!!s&&s.filter(c=>{const{autoPromotion:{placements:l}}=c;return l.includes("extension_main")});for(const c in e.merchantsService.merchants)e.merchantsService.merchants[c].isRecommended=e.merchantsService.merchants[c].isRecommended||i.includes(+c),e.merchantsService.merchants[c].isViewed=o&&(e.merchantsService.merchants[c].isViewed||r.includes(+c)),e.merchantsService.merchants[c].autoPromotion=a&&a.find(l=>+l.id==+c);return Object.values(e.merchantsService.merchants)})),this.eventService.attachEvent(b.GET_EXTENSION_INFO,i=>{const r=chrome.runtime.getManifest();this.eventService.fireEvent(b.SEND_EXTENSION_INFO,{tabId:i.tabId,data:{version:r.version,name:r.name}})}),this.eventService.attachEvent(b.SET_MERCHANT_COOKIES,i=>{i.data&&this.merchantsService.merchants[i.data.merchantId]&&(this.merchantsService.merchants[i.data.merchantId].savedCookie=i.data.cookie)}),this.eventService.attachEvent(b.CASHBACK_DEACTIVATE,i=>{if(i.data){const r=this.merchantsService.merchants[i.data.merchantId],o=r.savedCookie;if(!r.rewrite){this.iconService.red(),this.merchantsService.reset(r.id),r.rewrite=!0,this.eventService.fireEvent(b.BUTTON_UPDATE,{tabId:null});const s=r.shoppingTrip;s.activationStatus=!1,s.activationStatePrevious=s.activationState,s.activationState=4,s.transitionIdPrevious=s.transitionId,s.transitionId=0;const a=this.logShoppingTripService.getHistoryTransitionsCurrentTab();this.logShoppingTripService.sendLogEvent(r,3,{overwritten:{type:"cookie",savedCookie:o,pageCookies:i.data.pageCookies},historyTransitions:a})}}}),this.eventService.attachEvent(b.CHECK_MERCHANT_COOKIES,function(){var i=C(function*(r){const o=G.getDomain(r.url),s=o&&e.merchantsService.selectByDomain(o);return s&&s.checkCookieParams&&s.checkCookieParams.length?{merchant:s}:null});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.CLEAR_COOKIES,i=>{const r=G.getDomain(i.url),o=r&&this.merchantsService.selectByDomain(r);o&&(o.savedCookie=null)}),this.eventService.attachEvent(b.OPEN_POPUP,()=>{this.iconService.setBadge(""),this.cacheService.get(S.GLOBAL_CACHE_PREFIX,S.POPUP_FIRST_OPENING_TOKEN).then(i=>{i||this.cacheService.set(S.GLOBAL_CACHE_PREFIX,S.POPUP_FIRST_OPENING_TOKEN,1/0,"Wow!")})}),this.eventService.attachEvent(b.CHECK_IS_FEATURE_ENABLE,i=>{const{featureName:r,ignoreUserSettings:o}=i.data;return this.featureService.isFeatureEnable(r,o)}),this.eventService.attachEvent(b.UPDATE_GLOBAL_HISTORY,i=>{const{history:r}=i.data;r&&(this.history.length>=S.GLOBAL_HISTORY_LENGTH&&this.history.shift(),this.history.push(r))}),this.eventService.attachEvent(b.USER_WAS_UPDATED,function(){var i=C(function*(r){r.data?.user?.token&&(e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"viewedMerchants").then(o=>{e.merchantsService.setViewed(o&&o.length>0?o:r.data.user.viewed)}),e.merchantsService.setFavorites(r.data.user.favorites),e.merchantsService.setRecommended(r.data.user.recommended))});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.MERCHANT_WAS_RESET,C(function*(){yield e.merchantsService.initMerchantPropsAndRatesBasedOnUser()})),this.eventService.attachEvent(b.UPDATE_LETY_CODES,i=>{this.merchantsService.setPersonalCashback(i.data.letyCodes).then()}),this.eventService.attachEvent(b.TAB_CHANGED_URL,i=>{const{tab:r,url:o}=i.data;this.initializeInterstitialPageActivationHandler(r,o)})}loadUserLanguage(){var e=this;return C(function*(){const i=yield e.localeService.fetchTranslation(e.localeService.language),r={[e.localeService.language]:i};e.translateService.setTranslation(e.localeService.language,i),e.translateService.use(e.localeService.language),e.iconService.setTitle(e.translateService.instant("title")),e.cacheService.set(S.GLOBAL_CACHE_PREFIX,"i18nDataLocale",1/0,r)})()}initializeInterstitialPageActivationHandler(e,i){if(i)if(i.includes(V.mainDomain)){let r=null;try{r=parseInt(G.getRegexValue(i,S.CHECK_LETYSHOPS_VIEW)[1])}catch{}if(r){let o=this.merchantsService.merchants[r];if(!o){const s=Object.values(this.merchantsService.merchants).filter(a=>a.promo.includes(parseInt(r)));Er(s)&&!_n(s)&&(o=s[0])}o&&(this.merchantsService.reset(o.id),o.rewrite=null,this.eventService.fireEvent(b.BUTTON_UPDATE,{tabId:null}),o.extendedTabThanksPage={extendedTabThanksPage:{state:e.state||S.TAB_STATE_INTERSTITIAL_REDIRECT,interstitialPageId:r,shopId:r,interstitialPage:i,tabInfo:e}},this.tabsService.updateTab(e.id,{state:e.state||S.TAB_STATE_INTERSTITIAL_REDIRECT,interstitialPageId:r,interstitialPage:i,shopId:r}))}}else for(const r of S.THIRD_PARTY_LINKS)if(-1!==i.indexOf(r))return this.tabsService.updateTab(e.id,{state:e.state||S.TAB_STATE_3RD_PARTY}),!1}activateFromPopup(e){const i=this.browserToolsService.browserInfo.name.toLowerCase(),r=this.merchantsService.selectById(e);if(r){const o=this.tabsService.selectById(),s=r.activateUrl,a=G.getDomain(o.url),c=this.utilsService.checkEnableDisableDomain(r,a);if(o&&c){const l=new URL(o.url),u=encodeURIComponent(l.origin+l.pathname);this.navigationService.navigate({tabId:Pt.CURRENT_TAB,url:`${V.getLink+s+S.PARAMETER_DEEP_LINK+u}&utm_source=extension&utm_campaign=partner_info&utm_term=${i}`})}else{const l=r.url.split("/");this.navigationService.navigate({tabId:Pt.NEW_TAB,url:`${V.getLink+s}?utm_source=extension&utm_campaign=${l[0]}&utm_content=${l[1]}&utm_term=${i}`})}}}globalPageHandler(e){var i=this;return C(function*(){if(i.iconService.animation=!1,_n(e.url)||e.url.startsWith("chrome://newtab"))return i.currentMerchantId=null,void i.iconService.standard();const r=G.getDomain(e.url),o=i.tabsService.selectById(e.tabId),s=i.userService.user,a=r&&i.merchantsService.selectByDomain(r);if(!a||!o||!r)return i.currentMerchantId=null,void i.iconService.standard();const c=(new Date).getTime();if(a&&(!a.delayActivate&&a.isActivated||a.delayActivate&&c>a.delayActivate)){const h=a.delayActivate&&c>a.delayActivate;i.merchantsService.reset(a.id),h&&(a.savedParams=[]),i.eventService.fireEvent(b.BUTTON_UPDATE,{tabId:null});const p=a.shoppingTrip;p.activationStatePrevious=p.activationState,p.activationState=5,p.activationStatus=!1}a&&s&&i.userService.checkUserSegments(S.PERMISSIONS_SEGMENTS.extTestQ1)&&!a.isActivated&&a.isSuppressed&&a.isSuppressedTime&&(new Date).getTime()>a.isSuppressedTime&&i.merchantsService.clearSuppressed(a.id);const l=yield i.configService.getParameter(re.INTERVAL_COUNT_USER_CASHBACK_RATES);a&&i.userService.isLogin&&(!a.lastTimeCountPersonalCashback||Date.now()-a.lastTimeCountPersonalCashback>l)&&i.merchantsService.fetchUserCashbackRates(a.id).then(),a&&i.tabsService.currentTabId===e.tabId?((a.settings.partnerList||a.settings.partnerListNoActive)&&(yield i.userService.rewriteViewed(a.id)),i.currentMerchantId=a.id,a.settings.browserAction&&i.tabsService.currentTabId===+o.id?a.isActivated&&i.userService.isLogin?i.iconService.green():(i.iconService.animation=!0,setTimeout(()=>{i.iconService.pulseIcon().then(()=>i.iconService.red()).catch(()=>{const h=i.tabsService.selectById(i.tabsService.currentTabId);if(h){const p=G.getDomain(h.url),g=i.merchantsService.selectByDomain(p);if(g&&g.isActivated)return void i.iconService.green()}i.iconService.standard()})},500)):i.tabsService.currentTabId===+o.id&&i.iconService.standard()):(i.currentMerchantId=null,o&&i.tabsService.currentTabId===+o.id&&i.iconService.standard());const u=o&&o.state;let d=null;try{d=G.getRegexValue(e.url,S.CHECK_LETYSHOPS_VIEW)[0]}catch{}e.name===b.DOCUMENT_COMPLETE&&!new RegExp(d,"i").test(e.url)&&i.tabsService.immediateTabReset(o),S.TAB_STATE_INTERSTITIAL_REDIRECT!==(u&&S.TAB_STATE_INTERSTITIAL_REDIRECT)&&S.TAB_STATE_3RD_PARTY===(u&&S.TAB_STATE_3RD_PARTY)?i.eventService.fireEvent(S.MERCHANT_SUPPRESSED,{data:{id:a.id}}):S.TAB_STATE_INTERSTITIAL_REDIRECT===(u&&S.TAB_STATE_INTERSTITIAL_REDIRECT)&&a&&a.settings.browserAction&&i.tabsService.currentTabId===+o.id&&(a.isActivated?i.iconService.green():i.iconService.red());const f=a.hasPromoActivated??null;return a.extendedTab=o,a.extendedPromo=f&&f,a})()}getDisableDomainList(){var e=this;return C(function*(){let i=yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,"ddList");if(i)return i;const r=e.localeService.locale,o=yield e.configService.getParameter(re.R_LIST_ADD_PERIOD);return i=yield le(e.httpClient.get(`${V.ddList}?locale=${r}`,{withCredentials:!0})),yield e.cacheService.set(S.GLOBAL_CACHE_PREFIX,"ddList",o,i),i})()}onInstalledAndDelete(){var e=this;this.cacheService.get(S.GLOBAL_CACHE_PREFIX,"afterInstallPageIsShown").then(i=>{if(!i){if(this.cacheService.set(S.GLOBAL_CACHE_PREFIX,"afterInstallPageIsShown",1/0,!0),this.browserToolsService.isBrowser(S.BROWSER_NAME_FF)){const s=S.DEFAULT_FIREFOX_USER_SETTINGS;Object.keys(s).forEach(function(){var a=C(function*(c){Fm(yield e.cacheService.get(S.GLOBAL_CACHE_PREFIX,c))&&(yield e.cacheService.set(S.GLOBAL_CACHE_PREFIX,c,1/0,s[c]),yield e.userService.saveSettings(c,s[c]))});return function(c){return a.apply(this,arguments)}}())}this.pushLogInstall();const r=this.browserToolsService.browserInfo,o=r.name===S.BROWSER_NAME_YABROWSER?"yabrowser":r.name.toLowerCase();setTimeout(()=>{this.navigationService.navigate({tabId:Pt.NEW_TAB,url:V.afterInstall(o)})},500),chrome.runtime.setUninstallURL(V.afterDelete(o))}})}pushLogInstall(){if(this.userService.isLogin){const e=this.browserToolsService.fullInfo;le(this.httpClient.post(V.logInstall,JSON.stringify({os:e.os,browser:e.browser,browser_version:e.version,extension_version:chrome.runtime.getManifest().version}),{withCredentials:!0})).then().catch(i=>console.error(i)),clearInterval(this.intervalPushLogInstall)}else clearInterval(this.intervalPushLogInstall),this.intervalPushLogInstall=setInterval(()=>{this.pushLogInstall()},S.INTERVAL_PUSH_LOG)}pushLogRequest(){const e="timePushLogRequest";this.cacheService.get(S.GLOBAL_CACHE_PREFIX,"afterInstallPageIsShown").then(i=>{i&&this.cacheService.get(S.GLOBAL_CACHE_PREFIX,e).then(r=>{if((!r||Date.now()-r>S.UPDATE_LOG_REQUEST)&&this.userService.isLogin){const o=this.browserToolsService.fullInfo;le(this.httpClient.post(V.logRequest,JSON.stringify({os:o.os,browser:o.browser,browser_version:o.version,extension_version:chrome.runtime.getManifest().version}),{withCredentials:!0})).then().catch(s=>console.error(s)),clearInterval(this.intervalPushLogRequest),this.cacheService.set(S.GLOBAL_CACHE_PREFIX,e,1/0,Date.now())}})})}getUrlParameter(e,i){const o=decodeURIComponent(i.search.substring(1)).split("&");let s,a;for(a=0;a<o.length;a++)if(s=o[a].split("="),s[0]===e)return void 0===s[1]||s[1]}onParameterSave(e,i){const r=e.url,o=G.getDomain(r);i||(i=this.merchantsService.selectByDomain(o));const s=$e(G.getAllUrlParams(r));if(s.length>0||0===s.length&&typeof i.mainFrame<"u"){if(i&&i.checkUrlParams&&i.checkUrlParams.length&&!i.isActivated&&!i.savedParams){const c=!1,l=[];return yn(i.checkUrlParams,u=>{if(c)return;const d=IT(u).map((h,p)=>{const g=new RegExp(`${p.replace("$","\\$")}=([^&]+)`,"i").exec(decodeURIComponent(r));if(g){const m=new RegExp(`${p.replace("$","\\$")}=([^;]+)`,"i").exec(decodeURIComponent(decodeURIComponent(g[0])));return null!==m&&new RegExp(h,"i").test(m[1])?[p,m[1].split(" ").join("+")]:[p,null]}}).compact().object().value(),f=[];for(const h in d)f.push(d[h]);f.length>0&&!f.includes(null)&&l.push(d)}),l&&l.length>0&&(i.savedParams=l),!0}i&&!i.isActivated&&!i.rewrite&&_n(i.checkUrlParams)&&(i.mainFrame=null,this.merchantsService.activate(i.id))}else i.mainFrame=!0}onParameterResearch(e){const i=e.url,r=G.getDomain(i),o={},s=r&&this.merchantsService.selectByDomain(r);if(s&&s.checkUrlParams&&s.checkUrlParams.length&&s.isActivated){const a=s.checkUrlParams;if(s.savedParams&&s.savedParams.length>0){const c=s.savedParams;let l;if($e(G.getAllUrlParams(i)).length>0){let u=!0;yn(c,d=>{u&&(yn(lo(a,h=>uT($e(h),$e(d)))[0],(h,p)=>{const g=new RegExp(`${p.replace("$","\\$")}=([^&]+)`,"i").exec(decodeURIComponent(i));if(g){const m=new RegExp(`${p.replace("$","\\$")}=([^;]+)`,"i").exec(decodeURIComponent(decodeURIComponent(g[0])));o[p]=null!==m&&new RegExp(h,"i").test(m[1])?m[1].split(" ").join("+"):null}}),JSON.stringify($e(o))===JSON.stringify($e(d))?l=JSON.stringify(d)===JSON.stringify(o):0!==GT(Od(so(o))).length?(l=!0,yn(o,(h,p)=>{if(-1!==Object.keys(d).indexOf(p)){const g=-1!==Object.values(d).indexOf(h);g||(l=g)}})):l=!0,l||(u=!1))})}else l=!0;if(!l){this.merchantsService.resetOnRewrite(s.id),this.eventService.fireEvent(b.BUTTON_UPDATE,{tabId:null}),s.rewrite=!0,this.tabsService.currentTabId===e.tabId&&this.iconService.red(),s.extendedTabThanksPage=null;const u=s.shoppingTrip;u.activationStatus=!1,u.activationStatePrevious=u.activationState,u.activationState=4,u.transitionIdPrevious=u.transitionId,u.transitionId=0;const d=this.logShoppingTripService.getHistoryTransitionsCurrentTab();this.logShoppingTripService.sendLogEvent(s,3,{overwritten:{type:"get",cashbackParams:c,checkedParams:o},historyTransitions:d})}}}}unRewrite(e){const i=this.merchantsService.selectById(e.data.id);this.merchantsService.resetOnRewrite(i.id),this.eventService.fireEvent(b.BUTTON_UPDATE,{tabId:null}),i.rewrite=!1,i.savedParams=[]}checkActivateCashback(e){var i=this;return C(function*(){if(e.url.includes(V.mainDomain)){let s=null,a=null;try{s=G.getRegexValue(e.url,S.CHECK_LETYSHOPS_GO)[0],a=parseInt(G.getRegexValue(e.url,S.CHECK_LETYSHOPS_VIEW)[1])}catch{}if(s&&a){const c=i.merchantsService.selectById(a),u="true"===new URL(e.url).searchParams.get("productWithGo");u&&(c.productWithGo=u)}}if(!e.url.includes("s.click.aliexpress")&&!e.url.includes("affiliates.rozetka.com.ua")){const s=G.getDomain(e.url),a=i.merchantsService.selectByDomain(s);a&&(i.lastMerchantDomain=a.domain.replace("www.",""));const c=new URL(e.url);if(c.search.substr(1).match("hot_product_id=")&&(i.hotProductId=i.getUrlParameter("hot_product_id",c),i.rate=i.getUrlParameter("rate",c),i.isHotProduct=!0),a&&i.isHotProduct){a.hotProducts||(a.hotProducts=[]);const l=i.utilsService.getDomainPrice(c.host),u=i.utilsService.getProductId(l,c.pathname),d={};d[u]={hot_product_id:i.hotProductId,rate:i.rate},a.hotProducts&&a.hotProducts.length>0?yn(a.hotProducts,f=>{Object.keys(f).includes(u)||a.hotProducts.push(d)}):a.hotProducts.push(d),i.isHotProduct=!1,i.hotProductId=null,i.rate=null}a&&i.userService.isLogin&&(a.isActivated||a.savedParams||a.rewrite?a.isActivated&&a.savedParams&&i.onParameterResearch(e):(i.onParameterSave(e,a),a.savedParams&&i.merchantsService.activate(a.id)))}const r=G.getDomain(e.url),o=i.merchantsService.selectByDomain(r);if(o&&o.extendedTab&&o.extendedTab.history.forEach(s=>{const l=new URL(s.url).href.match(new RegExp(`:${i.userService.user.token}:T([0-9]*)`));if(l){const u=o.transitionId;o.transitionId=u&&u>l[1]?u:l[1]}}),!e.url.includes("s.click.aliexpress")&&e.url.includes("aliexpress.")&&o&&o.isActivated){let s,a;try{s=i.utilsService.getDomainPrice(new URL(e.url).host),a=parseInt(i.utilsService.getProductId(s,new URL(e.url).pathname),10)}catch{}if(a&&(!o.hot||o.hot&&!o.hot[`hot_${a}`])){const c=yield i.similarToolsService.getHotInfo(e.url,i.userService.user);c.hot||(c.hot=!1),o.hot={[`hot_${a}`]:c.hot}}if(o.hot&&o.hot[`hot_${a}`]&&!o.hot[`hot_${a}`].isActivatedHotProduct){let c=!1;if((i.tabsService.selectById(i.tabsService.currentTabId)?.history?i.tabsService.selectById(i.tabsService.currentTabId)?.history:o.extendedTab?.history).forEach(u=>{const f=new URL(u.url);f.origin.includes("letyshops.com")&&f.searchParams.get("hot_product_id")&&f.searchParams.get("rate")&&(c=!0)}),!c){o.isActivated=null,o.savedParams=null,o.savedCookie=null;const u=o.hot[`hot_${a}`];u.isActivatedHotProduct=!0,o.hot={[`hot_${a}`]:u};const d=new Date,f=`${o.id}:${i.userService.user.token}:T${o.shoppingTrip.transitionId}`,p=`${d.getFullYear()}-${d.getMonth()}-${d.getDate()}_${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}`;return i.navigationService.navigate({url:`${o.hot[`hot_${a}`].url}&subid=${f}&subid2=${p}&subid3=ex53${o.hot[`hot_${a}`].commissionCategory}`,tabId:Pt.CURRENT_TAB})}}o.productWithGo&&(o.isSuppressed=!0,o.productWithGo=null)}})()}checkMerchantInAutopromo(e,i,r=null){let o=[];return Object.keys(e).forEach(s=>{"lastUpdate"!==s&&(o=[...o,...e[s]])}),o.find(s=>parseInt(s.id)===parseInt(i)&&!_n(s.autoPromotion)&&(s.autoPromotion.placements.includes(r)||Id(s.autoPromotion.endAt)))}getCalculatedPriceForOffer(e){const i=e.cashbackRate&&e.cashbackRate.rate;if(i)switch(i.type){case"RATE_TYPE_PERCENT":return(e.productPriceValue*i.value*(e.userBonusCoefficient??1)/100).toFixed(2);case"RATE_TYPE_FIXED":return(i.value*(e.userBonusCoefficient??1)).toFixed(0)}return null}addAutopromoAndCashbackToOffer(e,i){const r=this.merchantsService.getMerchantById(e.merchantId),o=r.suffix;let s,a,c;if(e.cashbackFloated=r.cashbackFloated,e.merchantTitle=r.title,e.cashback=r.cashback,e.userCashback=r.userCashback,e.userBonusCoefficient=r.bonusCoefficient??null,e.userBonus=r.bonus??null,!_n(e.cashbackRate)){const l=e.cashbackRate.rate;try{c=parseFloat((l.value*(e.userBonusCoefficient??1)).toFixed(2))+o}catch{c=null}if(s=this.checkMerchantInAutopromo(i,e.merchantId,"similar_products"),a=this.getCalculatedPriceForOffer(e),!_n(s)&&s.autoPromotion&&s.autoPromotion.bonus&&(e.userBonusCoefficient=this.utilsService.calculateRateCoefficient(s.autoPromotion.bonus),c=parseFloat((l.value*e.userBonusCoefficient).toFixed(2))+o,a=this.getCalculatedPriceForOffer(e),!_n(s.autoPromotion.maxLimit))){const u=!_n(e.productPrice)&&e.productPrice.currency,d=s.autoPromotion.maxLimit[u.name];d&&+a>d.amount&&(a=d.amount)}}return{...e,userCashbackAmount:a,autopromo:s,userCashbackOffer:c}}prepareProductOffers(e){var i=this;return C(function*(){const r=yield i.autoPromoShopsService.getValidAutoPromoOffers(Object.values(i.merchantsService.merchants));return e.map(o=>i.addAutopromoAndCashbackToOffer(o,r))})()}pushLogUserSettings(e){var i=this;return C(function*(){if(i.userService.isLogin){const r=(yield i.userService.settings())||{};let o;o=i.browserToolsService.isBrowser(S.BROWSER_NAME_FF)?S.DEFAULT_FIREFOX_USER_SETTINGS:S.DEFAULT_USER_SETTINGS,yield Object.keys(o).forEach(s=>{r&&!Object.prototype.hasOwnProperty.call(r,s)&&(r[s]=o[s],i.userService.saveSettings(s,o[s]))}),le(i.httpClient.post(V.logUserSettings,JSON.stringify({type:e,settings:r}),{withCredentials:!0})).then().catch(s=>console.error(s))}})()}pushUserNotificationLogs(e){if(this.userService.isLogin&&e&&e.arrayNotifications&&e.arrayNotifications.length>0&&e.notificationEvent){const i=[];e.arrayNotifications.forEach(r=>{i.push({user_id:this.userService.user.token,notification_id:r.id,notification_type:r.type,notification_recipient:S.NOTIFICATION_RECIPIENT,notification_event:e.notificationEvent})}),le(this.httpClient.post(V.userNotificationLogs,JSON.stringify({data:i}),{withCredentials:!0})).then().catch(r=>console.error(r))}}updateFavoriteStatusInContent(e,i){this.eventService.fireEvent(b.UPDATE_FAVORITE_STATUS_FROM_BG,{allTabs:!0,data:{isFavorite:e,id:i}})}static \u0275fac=function(i){return new(i||t)(w(h_),w(bc),w(b),w(re),w(sx),w(zt),w(ix),w(yc),w(WV),w(Wn),w(f_),w(uo),w(Pt),w(Ki),w(KV),w(Qe),w(XV),w(It),w(Fs),w(G),w($7))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Bs{id;url;urlInitial;target;origin;targetPriceHistory;initialPrice;resolvingState;notificationConfig;expired;daysGone;createdAt;updatedAt;expiresAt;constructor(n){this.id=n.id,this.url=n.url,this.urlInitial=n.urlInitial,this.target=n.target,this.origin=n.origin,this.targetPriceHistory=n.targetPriceHistory,this.initialPrice=n.initialPrice,this.resolvingState=n.resolvingState,this.notificationConfig=n.notificationConfig,this.expired=n.expired,this.daysGone=n.daysGone,this.createdAt=n.createdAt,this.updatedAt=n.updatedAt,this.expiresAt=n.expiresAt}static serialize(n){const e=[];return n.forEach(i=>{e.push(new Bs(i))}),e}}let ax=(()=>{class t{eventService;httpClient;cacheService;userService;constructor(e,i,r,o){this.eventService=e,this.httpClient=i,this.cacheService=r,this.userService=o}baseUrl=V._api_eapi;proxyPath="/proxy/pm/v1";countPath="/Count";createPath="/Create";createFeedbackPath="/CreateFeedback";deletePath="/Delete";getPath="/Get";searchPath="/Search";updatePath="/Update";prefix="list";cacheKey="product.monitoring";cacheTime=18e5;maxLimit=100;get cachePrefix(){return`${this.prefix}_${this.userService.user.token??0}`}attachListeners(){var e=this;return C(function*(){e.eventService.attachEvent(b.PRODUCT_MONITORING_GET_ITEM_BY_TARGET_URL_OR_URL,function(){var i=C(function*(r){let o=(yield e.cacheService.get(e.cachePrefix,e.cacheKey))??[];return o&&o.length||(o=yield e.refreshListItems()),e.getProductMonitoringByTargetUulOrUrl(o,r.data.urlTarget,r.data.url)});return function(r){return i.apply(this,arguments)}}()),e.eventService.attachEvent(b.PRODUCT_MONITORING_GET_COUNT_ITEMS,()=>e.countItems()),e.eventService.attachEvent(b.PRODUCT_MONITORING_CREATE_ITEM,i=>e.createItem(i.data)),e.eventService.attachEvent(b.PRODUCT_MONITORING_REMOVE_ITEM,i=>e.deleteItem(i.data)),e.eventService.attachEvent(b.PRODUCT_MONITORING_UPDATE_ITEM,i=>e.updateItem(i.data)),e.eventService.attachEvent(b.PRODUCT_MONITORING_GET_LIST,()=>e.getAll()),e.eventService.attachEvent(b.REFRESH_ALL,C(function*(){return e.clearCacheItems()})),e.eventService.attachEvent(b.PRODUCT_MONITORING_REFRESH_LIST,()=>e.refreshListItems())})()}getProductMonitoringByTargetUulOrUrl(e,i,r){return e.find(o=>o?.target?.url===i||o?.urlInitial===r||o?.url===r||o?.url===i)}getProductMonitoringById(e,i){return e.find(r=>r.id===i)}deleteProductMonitoringById(e,i){return e.filter(r=>r.id!==i)}getCountItems(e){var i=this;return C(function*(){return le(i.request(`${i.baseUrl}${i.proxyPath}${i.countPath}`,e)).then(o=>o).catch(o=>o)})()}createItem(e){var i=this;const r=this.request(`${this.baseUrl}${this.proxyPath}${this.createPath}`,e).pipe(zn(o=>Xe(new Bs(o?.monitoring??{}))),io(function(){var o=C(function*(s){if(s){const a=(yield i.cacheService.get(i.cachePrefix,i.cacheKey))??[];a.push(s),i.cacheService.set(i.cachePrefix,i.cacheKey,i.cacheTime,a)}});return function(s){return o.apply(this,arguments)}}()));return le(r).then(o=>o).catch(()=>({error:!0}))}getSearchItems(e){return le(this.request(`${this.baseUrl}${this.proxyPath}${this.searchPath}`,e).pipe(zn(r=>Xe(Bs.serialize(r.monitors))))).then(r=>r).catch(r=>r)}createFeedbackItem(e){return le(this.request(`${this.baseUrl}${this.proxyPath}${this.createFeedbackPath}`,e)).then(r=>r).catch(r=>r)}deleteItem(e){var i=this;const r=this.request(`${this.baseUrl}${this.proxyPath}${this.deletePath}`,e).pipe(zn(o=>Xe(new Bs(o?.monitoring??{}))),io(function(){var o=C(function*(s){if(s){let a=(yield i.cacheService.get(i.cachePrefix,i.cacheKey))??[];a=i.deleteProductMonitoringById(a,e.id),i.cacheService.set(i.cachePrefix,i.cacheKey,i.cacheTime,a)}});return function(s){return o.apply(this,arguments)}}()));return le(r).then(o=>o).catch(o=>o)}getItem(e){return le(this.request(`${this.baseUrl}${this.proxyPath}${this.getPath}`,e)).then(r=>r).catch(r=>r)}updateItem(e){var i=this;const r=this.request(`${this.baseUrl}${this.proxyPath}${this.updatePath}`,e).pipe(zn(o=>Xe(new Bs(o?.monitoring??{}))),io(function(){var o=C(function*(s){if(s){let a=(yield i.cacheService.get(i.cachePrefix,i.cacheKey))??[];a=i.deleteProductMonitoringById(a,e.id),a.push(s),i.cacheService.set(i.cachePrefix,i.cacheKey,i.cacheTime,a)}});return function(s){return o.apply(this,arguments)}}()));return le(r).then(o=>o).catch(()=>({error:!0}))}getAll(){return this.cacheService.get(this.cachePrefix,this.cacheKey)}request(e,i){return this.httpClient.post(e,JSON.stringify(i),{headers:{"version-ext":chrome.runtime.getManifest().version},withCredentials:!0})}clearCacheItems(){this.cacheService.remove(this.cachePrefix,this.cacheKey)}countItems(){var e=this;return C(function*(){return((yield e.cacheService.get(e.cachePrefix,e.cacheKey))??[]).length})()}refreshListItems(){var e=this;return C(function*(){const i=[],r=yield e.getCountItems(),o=Math.ceil(r.count/e.maxLimit);let s=0;for(let a=1;a<=o;a++){const c=yield e.getSearchItems({limit:e.maxLimit,offset:s});i.push(...c),s=a*e.maxLimit}return i&&e.cacheService.set(e.cachePrefix,e.cacheKey,e.cacheTime,i),i})()}static \u0275fac=function(i){return new(i||t)(w(b),w(It),w(Qe),w(Wn))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZV=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>{e.attachListeners()},multi:!0,deps:[ax]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({providers:[ax],imports:[Gn]})}return t})();function bo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Math,Math,Math,typeof window>"u"||window,function(){let t=!1;try{const n={get passive(){return t=!0,!1}};(function Cj(){return typeof window<"u"&&typeof document<"u"})()&&(window.addEventListener("test",null,n),window.removeEventListener("test",null,n))}catch{}}();class F_{static override(n){Object.assign(F_.prototype,n)}options;constructor(n){this.options=n||{}}init(){}formats(){return bo()}parse(){return bo()}format(){return bo()}add(){return bo()}diff(){return bo()}startOf(){return bo()}endOf(){return bo()}}var gD={_date:F_};function z(t){const n=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===n?new t.constructor(+t):"number"==typeof t||"[object Number]"===n||"string"==typeof t||"[object String]"===n?new Date(t):new Date(NaN)}function Ue(t,n){return t instanceof Date?new t.constructor(n):new Date(n)}let EP={};function Eo(){return EP}const dW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Q_(t){return(n={})=>{const e=n.width?String(n.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const mW={date:Q_({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Q_({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Q_({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},_W={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function qc(t){return(n,e)=>{let r;if("formatting"===(e?.context?String(e.context):"standalone")&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,a=e?.width?String(e.width):s;r=t.formattingValues[a]||t.formattingValues[s]}else{const s=t.defaultWidth,a=e?.width?String(e.width):t.defaultWidth;r=t.values[a]||t.values[s]}return r[t.argumentCallback?t.argumentCallback(n):n]}}function Kc(t){return(n,e={})=>{const i=e.width,o=n.match(i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth]);if(!o)return null;const s=o[0],a=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?function xW(t,n){for(let e=0;e<t.length;e++)if(n(t[e]))return e}(a,d=>d.test(s)):function TW(t,n){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n(t[e]))return e}(a,d=>d.test(s));let l;return l=t.valueCallback?t.valueCallback(c):c,l=e.valueCallback?e.valueCallback(l):l,{value:l,rest:n.slice(s.length)}}}const IP={code:"en-US",formatDistance:(t,n,e)=>{let i;const r=dW[t];return i="string"==typeof r?r:1===n?r.one:r.other.replace("{{count}}",n.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i},formatLong:mW,formatRelative:(t,n,e,i)=>_W[t],localize:{ordinalNumber:(t,n)=>{const e=Number(t),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},era:qc({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:qc({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:qc({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:qc({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:qc({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function DW(t){return(n,e={})=>{const i=n.match(t.matchPattern);if(!i)return null;const r=i[0],o=n.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];return s=e.valueCallback?e.valueCallback(s):s,{value:s,rest:n.slice(r.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)}),era:Kc({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Kc({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:Kc({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Kc({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Kc({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},wP=(t,n)=>{switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});default:return n.date({width:"full"})}},TP=(t,n)=>{switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});default:return n.time({width:"full"})}},Z_={p:TP,P:(t,n)=>{const e=t.match(/(P+)(p+)?/)||[],i=e[1],r=e[2];if(!r)return wP(t,n);let o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;default:o=n.dateTime({width:"full"})}return o.replace("{{date}}",wP(i,n)).replace("{{time}}",TP(r,n))}},jW=/^D+$/,$W=/^Y+$/,GW=["D","DD","YY","YYYY"];function xP(t){return jW.test(t)}function DP(t){return $W.test(t)}function J_(t,n,e){const i=function zW(t,n,e){const i="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(t,n,e);if(console.warn(i),GW.includes(t))throw new RangeError(i)}class PP{subPriority=0;validate(n,e){return!0}}class qW extends PP{constructor(n,e,i,r,o){super(),this.value=n,this.validateValue=e,this.setValue=i,this.priority=r,o&&(this.subPriority=o)}validate(n,e){return this.validateValue(n,this.value,e)}set(n,e,i){return this.setValue(n,e,this.value,i)}}class KW extends PP{priority=10;subPriority=-1;set(n,e){return e.timestampIsSet?n:Ue(n,function WW(t,n){const e=n instanceof Date?Ue(n,0):new n(0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}(n,Date))}}class ye{run(n,e,i,r){const o=this.parse(n,e,i,r);return o?{setter:new qW(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(n,e,i){return!0}}Math.pow(10,8);const MP=6048e5,ZW=864e5,Xc=6e4,Qc=36e5,ct_month=/^(1[0-2]|0?\d)/,ct_date=/^(3[0-1]|[0-2]?\d)/,ct_dayOfYear=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,ct_week=/^(5[0-3]|[0-4]?\d)/,ct_hour23h=/^(2[0-3]|[0-1]?\d)/,ct_hour24h=/^(2[0-4]|[0-1]?\d)/,ct_hour11h=/^(1[0-1]|0?\d)/,ct_hour12h=/^(1[0-2]|0?\d)/,ct_minute=/^[0-5]?\d/,ct_second=/^[0-5]?\d/,ct_singleDigit=/^\d/,ct_twoDigits=/^\d{1,2}/,ct_threeDigits=/^\d{1,3}/,ct_fourDigits=/^\d{1,4}/,ct_anyDigitsSigned=/^-?\d+/,ct_singleDigitSigned=/^-?\d/,ct_twoDigitsSigned=/^-?\d{1,2}/,ct_threeDigitsSigned=/^-?\d{1,3}/,ct_fourDigitsSigned=/^-?\d{1,4}/,Ai_basicOptionalMinutes=/^([+-])(\d{2})(\d{2})?|Z/,Ai_basic=/^([+-])(\d{2})(\d{2})|Z/,Ai_basicOptionalSeconds=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Ai_extended=/^([+-])(\d{2}):(\d{2})|Z/,Ai_extendedOptionalSeconds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function lt(t,n){return t&&{value:n(t.value),rest:t.rest}}function qe(t,n){const e=n.match(t);return e?{value:parseInt(e[0],10),rest:n.slice(e[0].length)}:null}function Ri(t,n){const e=n.match(t);if(!e)return null;if("Z"===e[0])return{value:0,rest:n.slice(1)};const i="+"===e[1]?1:-1,r=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,s=e[5]?parseInt(e[5],10):0;return{value:i*(r*Qc+o*Xc+1e3*s),rest:n.slice(e[0].length)}}function AP(t){return qe(ct_anyDigitsSigned,t)}function Je(t,n){switch(t){case 1:return qe(ct_singleDigit,n);case 2:return qe(ct_twoDigits,n);case 3:return qe(ct_threeDigits,n);case 4:return qe(ct_fourDigits,n);default:return qe(new RegExp("^\\d{1,"+t+"}"),n)}}function df(t,n){switch(t){case 1:return qe(ct_singleDigitSigned,n);case 2:return qe(ct_twoDigitsSigned,n);case 3:return qe(ct_threeDigitsSigned,n);case 4:return qe(ct_fourDigitsSigned,n);default:return qe(new RegExp("^-?\\d{1,"+t+"}"),n)}}function ev(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function RP(t,n){const e=n>0,i=e?n:1-n;let r;if(i<=50)r=t||100;else{const o=i+50;r=t+100*Math.trunc(o/100)-(t>=o%100?100:0)}return e?r:1-r}function NP(t){return t%400==0||t%4==0&&t%100!=0}function Ni(t,n){const e=Eo(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=z(t),o=r.getDay(),s=(o<i?7:0)+o-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function tv(t,n){const e=z(t),i=e.getFullYear(),r=Eo(),o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=Ue(t,0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);const a=Ni(s,n),c=Ue(t,0);c.setFullYear(i,0,o),c.setHours(0,0,0,0);const l=Ni(c,n);return e.getTime()>=a.getTime()?i+1:e.getTime()>=l.getTime()?i:i-1}function Ys(t){return Ni(t,{weekStartsOn:1})}function kP(t,n){const e=z(t),i=+Ni(e,n)-+function lY(t,n){const e=Eo(),i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=tv(t,n),o=Ue(t,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),Ni(o,n)}(e,n);return Math.round(i/MP)+1}function LP(t){const n=z(t),e=n.getFullYear(),i=Ue(t,0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);const r=Ys(i),o=Ue(t,0);o.setFullYear(e,0,4),o.setHours(0,0,0,0);const s=Ys(o);return n.getTime()>=r.getTime()?e+1:n.getTime()>=s.getTime()?e:e-1}function FP(t){const n=z(t),e=+Ys(n)-+function fY(t){const n=LP(t),e=Ue(t,0);return e.setFullYear(n,0,4),e.setHours(0,0,0,0),Ys(e)}(n);return Math.round(e/MP)+1}const gY=[31,28,31,30,31,30,31,31,30,31,30,31],mY=[31,29,31,30,31,30,31,31,30,31,30,31];function ff(t,n){const e=z(t);return isNaN(n)?Ue(t,NaN):(n&&e.setDate(e.getDate()+n),e)}function nv(t,n,e){const i=Eo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=z(t),s=o.getDay(),l=7-r;return ff(o,n<0||n>6?n-(s+l)%7:((n%7+7)%7+l)%7-(s+l)%7)}function hf(t){const n=z(t),e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+t-+e}const HY={G:new class XW extends ye{priority=140;parse(n,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,e,i){return e.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}incompatibleTokens=["R","u","t","T"]},y:new class tY extends ye{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(n,e,i){const r=o=>({year:o,isTwoDigitYear:"yy"===e});switch(e){case"y":return lt(Je(4,n),r);case"yo":return lt(i.ordinalNumber(n,{unit:"year"}),r);default:return lt(Je(e.length,n),r)}}validate(n,e){return e.isTwoDigitYear||e.year>0}set(n,e,i){const r=n.getFullYear();if(i.isTwoDigitYear){const s=RP(i.year,r);return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}return n.setFullYear("era"in e&&1!==e.era?1-i.year:i.year,0,1),n.setHours(0,0,0,0),n}},Y:new class nY extends ye{priority=130;parse(n,e,i){const r=o=>({year:o,isTwoDigitYear:"YY"===e});switch(e){case"Y":return lt(Je(4,n),r);case"Yo":return lt(i.ordinalNumber(n,{unit:"year"}),r);default:return lt(Je(e.length,n),r)}}validate(n,e){return e.isTwoDigitYear||e.year>0}set(n,e,i,r){const o=tv(n,r);if(i.isTwoDigitYear){const a=RP(i.year,o);return n.setFullYear(a,0,r.firstWeekContainsDate),n.setHours(0,0,0,0),Ni(n,r)}return n.setFullYear("era"in e&&1!==e.era?1-i.year:i.year,0,r.firstWeekContainsDate),n.setHours(0,0,0,0),Ni(n,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class iY extends ye{priority=130;parse(n,e){return df("R"===e?4:e.length,n)}set(n,e,i){const r=Ue(n,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),Ys(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class rY extends ye{priority=130;parse(n,e){return df("u"===e?4:e.length,n)}set(n,e,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class oY extends ye{priority=120;parse(n,e,i){switch(e){case"Q":case"QQ":return Je(e.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,e){return e>=1&&e<=4}set(n,e,i){return n.setMonth(3*(i-1),1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class sY extends ye{priority=120;parse(n,e,i){switch(e){case"q":case"qq":return Je(e.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,e){return e>=1&&e<=4}set(n,e,i){return n.setMonth(3*(i-1),1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class aY extends ye{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(n,e,i){const r=o=>o-1;switch(e){case"M":return lt(qe(ct_month,n),r);case"MM":return lt(Je(2,n),r);case"Mo":return lt(i.ordinalNumber(n,{unit:"month"}),r);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,e){return e>=0&&e<=11}set(n,e,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}},L:new class cY extends ye{priority=110;parse(n,e,i){const r=o=>o-1;switch(e){case"L":return lt(qe(ct_month,n),r);case"LL":return lt(Je(2,n),r);case"Lo":return lt(i.ordinalNumber(n,{unit:"month"}),r);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,e){return e>=0&&e<=11}set(n,e,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class dY extends ye{priority=100;parse(n,e,i){switch(e){case"w":return qe(ct_week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Je(e.length,n)}}validate(n,e){return e>=1&&e<=53}set(n,e,i,r){return Ni(function uY(t,n,e){const i=z(t),r=kP(i,e)-n;return i.setDate(i.getDate()-7*r),i}(n,i,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class pY extends ye{priority=100;parse(n,e,i){switch(e){case"I":return qe(ct_week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Je(e.length,n)}}validate(n,e){return e>=1&&e<=53}set(n,e,i){return Ys(function hY(t,n){const e=z(t),i=FP(e)-n;return e.setDate(e.getDate()-7*i),e}(n,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class _Y extends ye{priority=90;subPriority=1;parse(n,e,i){switch(e){case"d":return qe(ct_date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Je(e.length,n)}}validate(n,e){const r=NP(n.getFullYear()),o=n.getMonth();return r?e>=1&&e<=mY[o]:e>=1&&e<=gY[o]}set(n,e,i){return n.setDate(i),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class vY extends ye{priority=90;subpriority=1;parse(n,e,i){switch(e){case"D":case"DD":return qe(ct_dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Je(e.length,n)}}validate(n,e){return NP(n.getFullYear())?e>=1&&e<=366:e>=1&&e<=365}set(n,e,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class yY extends ye{priority=90;parse(n,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,e){return e>=0&&e<=6}set(n,e,i,r){return(n=nv(n,i,r)).setHours(0,0,0,0),n}incompatibleTokens=["D","i","e","c","t","T"]},e:new class bY extends ye{priority=90;parse(n,e,i,r){const o=s=>{const a=7*Math.floor((s-1)/7);return(s+r.weekStartsOn+6)%7+a};switch(e){case"e":case"ee":return lt(Je(e.length,n),o);case"eo":return lt(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,e){return e>=0&&e<=6}set(n,e,i,r){return(n=nv(n,i,r)).setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class CY extends ye{priority=90;parse(n,e,i,r){const o=s=>{const a=7*Math.floor((s-1)/7);return(s+r.weekStartsOn+6)%7+a};switch(e){case"c":case"cc":return lt(Je(e.length,n),o);case"co":return lt(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,e){return e>=0&&e<=6}set(n,e,i,r){return(n=nv(n,i,r)).setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class IY extends ye{priority=90;parse(n,e,i){const r=o=>0===o?7:o;switch(e){case"i":case"ii":return Je(e.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return lt(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r);case"iiiii":return lt(i.day(n,{width:"narrow",context:"formatting"}),r);case"iiiiii":return lt(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r);default:return lt(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r)}}validate(n,e){return e>=1&&e<=7}set(n,e,i){return(n=function EY(t,n){const e=z(t),i=function SY(t){let e=z(t).getDay();return 0===e&&(e=7),e}(e);return ff(e,n-i)}(n,i)).setHours(0,0,0,0),n}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class wY extends ye{priority=80;parse(n,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,e,i){return n.setHours(ev(i),0,0,0),n}incompatibleTokens=["b","B","H","k","t","T"]},b:new class TY extends ye{priority=80;parse(n,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,e,i){return n.setHours(ev(i),0,0,0),n}incompatibleTokens=["a","B","H","k","t","T"]},B:new class xY extends ye{priority=80;parse(n,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,e,i){return n.setHours(ev(i),0,0,0),n}incompatibleTokens=["a","b","t","T"]},h:new class DY extends ye{priority=70;parse(n,e,i){switch(e){case"h":return qe(ct_hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Je(e.length,n)}}validate(n,e){return e>=1&&e<=12}set(n,e,i){const r=n.getHours()>=12;return n.setHours(r&&i<12?i+12:r||12!==i?i:0,0,0,0),n}incompatibleTokens=["H","K","k","t","T"]},H:new class PY extends ye{priority=70;parse(n,e,i){switch(e){case"H":return qe(ct_hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Je(e.length,n)}}validate(n,e){return e>=0&&e<=23}set(n,e,i){return n.setHours(i,0,0,0),n}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class MY extends ye{priority=70;parse(n,e,i){switch(e){case"K":return qe(ct_hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Je(e.length,n)}}validate(n,e){return e>=0&&e<=11}set(n,e,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}incompatibleTokens=["h","H","k","t","T"]},k:new class OY extends ye{priority=70;parse(n,e,i){switch(e){case"k":return qe(ct_hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Je(e.length,n)}}validate(n,e){return e>=1&&e<=24}set(n,e,i){return n.setHours(i<=24?i%24:i,0,0,0),n}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class AY extends ye{priority=60;parse(n,e,i){switch(e){case"m":return qe(ct_minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Je(e.length,n)}}validate(n,e){return e>=0&&e<=59}set(n,e,i){return n.setMinutes(i,0,0),n}incompatibleTokens=["t","T"]},s:new class RY extends ye{priority=50;parse(n,e,i){switch(e){case"s":return qe(ct_second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Je(e.length,n)}}validate(n,e){return e>=0&&e<=59}set(n,e,i){return n.setSeconds(i,0),n}incompatibleTokens=["t","T"]},S:new class NY extends ye{priority=30;parse(n,e){return lt(Je(e.length,n),r=>Math.trunc(r*Math.pow(10,3-e.length)))}set(n,e,i){return n.setMilliseconds(i),n}incompatibleTokens=["t","T"]},X:new class kY extends ye{priority=10;parse(n,e){switch(e){case"X":return Ri(Ai_basicOptionalMinutes,n);case"XX":return Ri(Ai_basic,n);case"XXXX":return Ri(Ai_basicOptionalSeconds,n);case"XXXXX":return Ri(Ai_extendedOptionalSeconds,n);default:return Ri(Ai_extended,n)}}set(n,e,i){return e.timestampIsSet?n:Ue(n,n.getTime()-hf(n)-i)}incompatibleTokens=["t","T","x"]},x:new class LY extends ye{priority=10;parse(n,e){switch(e){case"x":return Ri(Ai_basicOptionalMinutes,n);case"xx":return Ri(Ai_basic,n);case"xxxx":return Ri(Ai_basicOptionalSeconds,n);case"xxxxx":return Ri(Ai_extendedOptionalSeconds,n);default:return Ri(Ai_extended,n)}}set(n,e,i){return e.timestampIsSet?n:Ue(n,n.getTime()-hf(n)-i)}incompatibleTokens=["t","T","X"]},t:new class FY extends ye{priority=40;parse(n){return AP(n)}set(n,e,i){return[Ue(n,1e3*i),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class BY extends ye{priority=20;parse(n){return AP(n)}set(n,e,i){return[Ue(n,i),{timestampIsSet:!0}]}incompatibleTokens="*"}},UY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,VY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jY=/^'([^]*?)'?$/,$Y=/''/g,GY=/\S/,zY=/[a-zA-Z]/;function YY(t){return t.match(jY)[1].replace($Y,"'")}const pf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},KY=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,XY=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,QY=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Zc(t){return t?parseInt(t):1}function iv(t){return t&&parseFloat(t.replace(",","."))||0}const rq=[31,null,31,30,31,30,31,31,30,31,30,31];function BP(t){return t%400==0||t%4==0&&t%100!=0}function HP(t){if(!function uq(t){return t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}(t)&&"number"!=typeof t)return!1;const n=z(t);return!isNaN(Number(n))}function rv(t){const n=z(t);return n.setHours(0,0,0,0),n}function UP(t,n){const e=rv(t),i=rv(n),r=+e-hf(e),o=+i-hf(i);return Math.round((r-o)/ZW)}function VP(t){const n=z(t),e=Ue(t,0);return e.setFullYear(n.getFullYear(),0,1),e.setHours(0,0,0,0),e}function xe(t,n){return(t<0?"-":"")+Math.abs(t).toString().padStart(n,"0")}const Mr={y(t,n){const e=t.getFullYear(),i=e>0?e:1-e;return xe("yy"===n?i%100:i,n.length)},M(t,n){const e=t.getMonth();return"M"===n?String(e+1):xe(e+1,2)},d:(t,n)=>xe(t.getDate(),n.length),a(t,n){const e=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];default:return"am"===e?"a.m.":"p.m."}},h:(t,n)=>xe(t.getHours()%12||12,n.length),H:(t,n)=>xe(t.getHours(),n.length),m:(t,n)=>xe(t.getMinutes(),n.length),s:(t,n)=>xe(t.getSeconds(),n.length),S(t,n){const e=n.length,i=t.getMilliseconds();return xe(Math.trunc(i*Math.pow(10,e-3)),n.length)}},jP={G:function(t,n,e){const i=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});default:return e.era(i,{width:"wide"})}},y:function(t,n,e){if("yo"===n){const i=t.getFullYear();return e.ordinalNumber(i>0?i:1-i,{unit:"year"})}return Mr.y(t,n)},Y:function(t,n,e,i){const r=tv(t,i),o=r>0?r:1-r;return"YY"===n?xe(o%100,2):"Yo"===n?e.ordinalNumber(o,{unit:"year"}):xe(o,n.length)},R:function(t,n){return xe(LP(t),n.length)},u:function(t,n){return xe(t.getFullYear(),n.length)},Q:function(t,n,e){const i=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return xe(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,e){const i=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return xe(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,e){const i=t.getMonth();switch(n){case"M":case"MM":return Mr.M(t,n);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,e){const i=t.getMonth();switch(n){case"L":return String(i+1);case"LL":return xe(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,e,i){const r=kP(t,i);return"wo"===n?e.ordinalNumber(r,{unit:"week"}):xe(r,n.length)},I:function(t,n,e){const i=FP(t);return"Io"===n?e.ordinalNumber(i,{unit:"week"}):xe(i,n.length)},d:function(t,n,e){return"do"===n?e.ordinalNumber(t.getDate(),{unit:"date"}):Mr.d(t,n)},D:function(t,n,e){const i=function dq(t){const n=z(t);return UP(n,VP(n))+1}(t);return"Do"===n?e.ordinalNumber(i,{unit:"dayOfYear"}):xe(i,n.length)},E:function(t,n,e){const i=t.getDay();switch(n){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,e,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return xe(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(t,n,e,i){const r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return xe(o,n.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(t,n,e){const i=t.getDay(),r=0===i?7:i;switch(n){case"i":return String(r);case"ii":return xe(r,n.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,e){const r=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,n,e){const i=t.getHours();let r;switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",n){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,n,e){const i=t.getHours();let r;switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",n){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,n,e){if("ho"===n){let i=t.getHours()%12;return 0===i&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return Mr.h(t,n)},H:function(t,n,e){return"Ho"===n?e.ordinalNumber(t.getHours(),{unit:"hour"}):Mr.H(t,n)},K:function(t,n,e){const i=t.getHours()%12;return"Ko"===n?e.ordinalNumber(i,{unit:"hour"}):xe(i,n.length)},k:function(t,n,e){let i=t.getHours();return 0===i&&(i=24),"ko"===n?e.ordinalNumber(i,{unit:"hour"}):xe(i,n.length)},m:function(t,n,e){return"mo"===n?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):Mr.m(t,n)},s:function(t,n,e){return"so"===n?e.ordinalNumber(t.getSeconds(),{unit:"second"}):Mr.s(t,n)},S:function(t,n){return Mr.S(t,n)},X:function(t,n,e){const i=t.getTimezoneOffset();if(0===i)return"Z";switch(n){case"X":return GP(i);case"XXXX":case"XX":return Io(i);default:return Io(i,":")}},x:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"x":return GP(i);case"xxxx":case"xx":return Io(i);default:return Io(i,":")}},O:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+$P(i,":");default:return"GMT"+Io(i,":")}},z:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+$P(i,":");default:return"GMT"+Io(i,":")}},t:function(t,n,e){return xe(Math.trunc(t.getTime()/1e3),n.length)},T:function(t,n,e){return xe(t.getTime(),n.length)}};function $P(t,n=""){const e=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),o=i%60;return 0===o?e+String(r):e+String(r)+n+xe(o,2)}function GP(t,n){return t%60==0?(t>0?"-":"+")+xe(Math.abs(t)/60,2):Io(t,n)}function Io(t,n=""){const e=t>0?"-":"+",i=Math.abs(t);return e+xe(Math.trunc(i/60),2)+n+xe(i%60,2)}const fq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pq=/^'([^]*?)'?$/,gq=/''/g,mq=/[a-zA-Z]/;function vq(t){const n=t.match(pq);return n?n[1].replace(gq,"'"):t}function gf(t,n){return Ue(t,+z(t)+n)}function ov(t,n){const e=z(t);if(isNaN(n))return Ue(t,NaN);if(!n)return e;const i=e.getDate(),r=Ue(t,e.getTime());return r.setMonth(e.getMonth()+n+1,0),i>=r.getDate()?r:(e.setFullYear(r.getFullYear(),r.getMonth(),i),e)}function mf(t,n){return+z(t)-+z(n)}function Jc(t){return n=>{const i=(t?Math[t]:Math.trunc)(n);return 0===i?0:i}}function zP(t,n){const e=z(t),i=z(n),r=WP(e,i),o=Math.abs(UP(e,i));e.setDate(e.getDate()-r*o);const a=r*(o-+(WP(e,i)===-r));return 0===a?0:a}function WP(t,n){const e=t.getFullYear()-n.getFullYear()||t.getMonth()-n.getMonth()||t.getDate()-n.getDate()||t.getHours()-n.getHours()||t.getMinutes()-n.getMinutes()||t.getSeconds()-n.getSeconds()||t.getMilliseconds()-n.getMilliseconds();return e<0?-1:e>0?1:e}function el(t,n){const e=z(t),i=z(n),r=e.getTime()-i.getTime();return r<0?-1:r>0?1:r}function YP(t){const n=z(t);return n.setHours(23,59,59,999),n}function qP(t){const n=z(t),e=n.getMonth();return n.setFullYear(n.getFullYear(),e+1,0),n.setHours(23,59,59,999),n}function KP(t,n){const e=z(t),i=z(n),r=el(e,i),o=Math.abs(function Pq(t,n){const e=z(t),i=z(n);return 12*(e.getFullYear()-i.getFullYear())+(e.getMonth()-i.getMonth())}(e,i));let s;if(o<1)s=0;else{1===e.getMonth()&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*o);let a=el(e,i)===-r;(function Mq(t){const n=z(t);return+YP(n)==+qP(n)})(z(t))&&1===o&&1===el(t,i)&&(a=!1),s=r*(o-Number(a))}return 0===s?0:s}const zq={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};
/*!
         * chartjs-adapter-date-fns v3.0.0
         * https://www.chartjs.org
         * (c) 2022 chartjs-adapter-date-fns Contributors
         * Released under the MIT license
         */gD._date.override({_id:"date-fns",formats:function(){return zq},parse:function(t,n){if(null===t||typeof t>"u")return null;const e=typeof t;return"number"===e||t instanceof Date?t=z(t):"string"===e&&(t="string"==typeof n?function WY(t,n,e,i){const r=function uW(){return Object.assign({},Eo())}(),o=i?.locale??r.locale??IP,s=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0;if(""===n)return""===t?z(e):Ue(e,NaN);const c={firstWeekContainsDate:s,weekStartsOn:a,locale:o},l=[new KW],u=n.match(VY).map(g=>{const m=g[0];return m in Z_?(0,Z_[m])(g,o.formatLong):g}).join("").match(UY),d=[];for(let g of u){!i?.useAdditionalWeekYearTokens&&DP(g)&&J_(g,n,t),!i?.useAdditionalDayOfYearTokens&&xP(g)&&J_(g,n,t);const m=g[0],v=HY[m];if(v){const{incompatibleTokens:_}=v;if(Array.isArray(_)){const I=d.find(y=>_.includes(y.token)||y.token===m);if(I)throw new RangeError(`The format string mustn't contain \`${I.fullToken}\` and \`${g}\` at the same time`)}else if("*"===v.incompatibleTokens&&d.length>0)throw new RangeError(`The format string mustn't contain \`${g}\` and any other token at the same time`);d.push({token:m,fullToken:g});const E=v.run(t,g,o.match,c);if(!E)return Ue(e,NaN);l.push(E.setter),t=E.rest}else{if(m.match(zY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");if("''"===g?g="'":"'"===m&&(g=YY(g)),0!==t.indexOf(g))return Ue(e,NaN);t=t.slice(g.length)}}if(t.length>0&&GY.test(t))return Ue(e,NaN);const f=l.map(g=>g.priority).sort((g,m)=>m-g).filter((g,m,v)=>v.indexOf(g)===m).map(g=>l.filter(m=>m.priority===g).sort((m,v)=>v.subPriority-m.subPriority)).map(g=>g[0]);let h=z(e);if(isNaN(h.getTime()))return Ue(e,NaN);const p={};for(const g of f){if(!g.validate(h,c))return Ue(e,NaN);const m=g.set(h,p,c);Array.isArray(m)?(h=m[0],Object.assign(p,m[1])):h=m}return Ue(e,h)}(t,n,new Date,this.options):function qY(t,n){const e=n?.additionalDigits??2,i=function ZY(t){const n={},e=t.split(pf.dateTimeDelimiter);let i;if(e.length>2)return n;if(/:/.test(e[0])?i=e[0]:(n.date=e[0],i=e[1],pf.timeZoneDelimiter.test(n.date)&&(n.date=t.split(pf.timeZoneDelimiter)[0],i=t.substr(n.date.length,t.length))),i){const r=pf.timezone.exec(i);r?(n.time=i.replace(r[1],""),n.timezone=r[1]):n.time=i}return n}(t);let r;if(i.date){const c=function JY(t,n){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),i=t.match(e);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:null===o?r:100*o,restDateString:t.slice((i[1]||i[2]).length)}}(i.date,e);r=function eq(t,n){if(null===n)return new Date(NaN);const e=t.match(KY);if(!e)return new Date(NaN);const i=!!e[4],r=Zc(e[1]),o=Zc(e[2])-1,s=Zc(e[3]),a=Zc(e[4]),c=Zc(e[5])-1;if(i)return function aq(t,n,e){return n>=1&&n<=53&&e>=0&&e<=6}(0,a,c)?function iq(t,n,e){const i=new Date(0);i.setUTCFullYear(t,0,4);const o=7*(n-1)+e+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+o),i}(n,a,c):new Date(NaN);{const l=new Date(0);return function oq(t,n,e){return n>=0&&n<=11&&e>=1&&e<=(rq[n]||(BP(t)?29:28))}(n,o,s)&&function sq(t,n){return n>=1&&n<=(BP(t)?366:365)}(n,r)?(l.setUTCFullYear(n,o,Math.max(r,s)),l):new Date(NaN)}}(c.restDateString,c.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const o=r.getTime();let a,s=0;if(i.time&&(s=function tq(t){const n=t.match(XY);if(!n)return NaN;const e=iv(n[1]),i=iv(n[2]),r=iv(n[3]);return function cq(t,n,e){return 24===t?0===n&&0===e:e>=0&&e<60&&n>=0&&n<60&&t>=0&&t<25}(e,i,r)?e*Qc+i*Xc+1e3*r:NaN}(i.time),isNaN(s)))return new Date(NaN);if(!i.timezone){const c=new Date(o+s),l=new Date(0);return l.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),l.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),l}return a=function nq(t){if("Z"===t)return 0;const n=t.match(QY);if(!n)return 0;const e="+"===n[1]?-1:1,i=parseInt(n[2]),r=n[3]&&parseInt(n[3])||0;return function lq(t,n){return n>=0&&n<=59}(0,r)?e*(i*Qc+r*Xc):NaN}(i.timezone),isNaN(a)?new Date(NaN):new Date(o+s+a)}(t,this.options)),HP(t)?t.getTime():null},format:function(t,n){return function _q(t,n,e){const i=Eo(),r=e?.locale??i.locale??IP,o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=z(t);if(!HP(a))throw new RangeError("Invalid time value");let c=n.match(hq).map(u=>{const d=u[0];return"p"===d||"P"===d?(0,Z_[d])(u,r.formatLong):u}).join("").match(fq).map(u=>{if("''"===u)return{isToken:!1,value:"'"};const d=u[0];if("'"===d)return{isToken:!1,value:vq(u)};if(jP[d])return{isToken:!0,value:u};if(d.match(mq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});r.localize.preprocessor&&(c=r.localize.preprocessor(a,c));const l={firstWeekContainsDate:o,weekStartsOn:s,locale:r};return c.map(u=>{if(!u.isToken)return u.value;const d=u.value;return(!e?.useAdditionalWeekYearTokens&&DP(d)||!e?.useAdditionalDayOfYearTokens&&xP(d))&&J_(d,n,String(t)),(0,jP[d[0]])(a,d,r.localize,l)}).join("")}(t,n,this.options)},add:function(t,n,e){switch(e){case"millisecond":return gf(t,n);case"second":return function yq(t,n){return gf(t,1e3*n)}(t,n);case"minute":return function bq(t,n){return gf(t,n*Xc)}(t,n);case"hour":return function Cq(t,n){return gf(t,n*Qc)}(t,n);case"day":return ff(t,n);case"week":return function Sq(t,n){return ff(t,7*n)}(t,n);case"month":return ov(t,n);case"quarter":return function Eq(t,n){return ov(t,3*n)}(t,n);case"year":return function Iq(t,n){return ov(t,12*n)}(t,n);default:return t}},diff:function(t,n,e){switch(e){case"millisecond":return mf(t,n);case"second":return function wq(t,n,e){const i=mf(t,n)/1e3;return Jc(e?.roundingMethod)(i)}(t,n);case"minute":return function Tq(t,n,e){const i=mf(t,n)/Xc;return Jc(e?.roundingMethod)(i)}(t,n);case"hour":return function xq(t,n,e){const i=mf(t,n)/Qc;return Jc(e?.roundingMethod)(i)}(t,n);case"day":return zP(t,n);case"week":return function Dq(t,n,e){const i=zP(t,n)/7;return Jc(e?.roundingMethod)(i)}(t,n);case"month":return KP(t,n);case"quarter":return function Oq(t,n,e){const i=KP(t,n)/3;return Jc(e?.roundingMethod)(i)}(t,n);case"year":return function Rq(t,n){const e=z(t),i=z(n),r=el(e,i),o=Math.abs(function Aq(t,n){const e=z(t),i=z(n);return e.getFullYear()-i.getFullYear()}(e,i));e.setFullYear(1584),i.setFullYear(1584);const a=r*(o-+(el(e,i)===-r));return 0===a?0:a}(t,n);default:return 0}},startOf:function(t,n,e){switch(n){case"second":return function Nq(t){const n=z(t);return n.setMilliseconds(0),n}(t);case"minute":return function kq(t){const n=z(t);return n.setSeconds(0,0),n}(t);case"hour":return function Lq(t){const n=z(t);return n.setMinutes(0,0,0),n}(t);case"day":return rv(t);case"week":return Ni(t);case"isoWeek":return Ni(t,{weekStartsOn:+e});case"month":return function Fq(t){const n=z(t);return n.setDate(1),n.setHours(0,0,0,0),n}(t);case"quarter":return function Bq(t){const n=z(t),e=n.getMonth();return n.setMonth(e-e%3,1),n.setHours(0,0,0,0),n}(t);case"year":return VP(t);default:return t}},endOf:function(t,n){switch(n){case"second":return function Hq(t){const n=z(t);return n.setMilliseconds(999),n}(t);case"minute":return function Uq(t){const n=z(t);return n.setSeconds(59,999),n}(t);case"hour":return function Vq(t){const n=z(t);return n.setMinutes(59,59,999),n}(t);case"day":return YP(t);case"week":return function jq(t,n){const e=Eo(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=z(t),o=r.getDay(),s=6+(o<i?-7:0)-(o-i);return r.setDate(r.getDate()+s),r.setHours(23,59,59,999),r}(t);case"month":return qP(t);case"quarter":return function $q(t){const n=z(t),e=n.getMonth();return n.setMonth(e-e%3+3,0),n.setHours(23,59,59,999),n}(t);case"year":return function Gq(t){const n=z(t),e=n.getFullYear();return n.setFullYear(e+1,0,0),n.setHours(23,59,59,999),n}(t);default:return t}}});let XP=(()=>{class t{eventService;merchantsService;tabsService;tabs;merchants;constructor(e,i,r){this.eventService=e,this.merchantsService=i,this.tabsService=r,this.merchants=i.merchants}attachListeners(){var e=this;this.eventService.attachEvent(b.SELLER_INFO_GET_INFO,function(){var i=C(function*(r){r.tabId||(r.tabId=e.tabsService.currentTabId);const o=r.data.itemInfo;if(!o||!o.seller?.resume?.notes?.[1])return null;const s=e.merchantsService.selectByDomain(G.getDomain(r.url));return s&&S.ARRAY_MERCHANTS_PRICE_SELLER.includes(s.id)?yield e.getSellerInfo(o):null});return function(r){return i.apply(this,arguments)}}())}getSellerInfo(e){var i=this;return C(function*(){return{rating:parseInt(e.seller.resume.score.value,10),notes:i.getDecodeNotes(e),seller:e.seller}})()}getDecodeNotes(e){let i={};const r=e.seller.resume;function d(O){const M={};switch(O){case S.LEVEL_ERROR:M.color=S.LEVEL_ERROR_COLOR,M.status=S.LEVEL_ERROR_STATUS;break;case S.LEVEL_WARNING:M.color=S.LEVEL_WARNING_COLOR,M.status=S.LEVEL_WARNING_STATUS;break;case S.LEVEL_INFO:M.color=S.LEVEL_INFO_COLOR,M.status=S.LEVEL_INFO_STATUS}return M}function f(O,M){switch(O){case 0:M.text="notificationPriceTypeScore1";break;case 1:M.text="notificationPriceTypeScore2";break;case 2:M.text="notificationPriceTypeScore3";break;case 3:M.text="notificationPriceTypeScore4"}}function h(O,M){switch(O){case 4:M.text="notificationPriceTypeFeedback1";break;case 5:M.text="notificationPriceTypeFeedback2";break;case 6:M.text="notificationPriceTypeFeedback3";break;case 7:M.text="notificationPriceTypeFeedback4"}}function p(O,M,ee){switch(O){case 8:M.text="notificationPriceTypeAge1";break;case 9:M.text="notificationPriceTypeAge2";break;case 10:M.text="notificationPriceTypeAge3",M.textArg=ee}}function g(O,M){switch(O){case 11:M.text="notificationPriceTypeDescription1";break;case 12:M.text="notificationPriceTypeDescription2";break;case 13:M.text="notificationPriceTypeDescription3";break;case 14:M.text="notificationPriceTypeDescription4";break;case 15:M.text="notificationPriceTypeDescription5"}}function m(O,M){switch(O){case 16:M.text="notificationPriceTypeCommunication1";break;case 17:M.text="notificationPriceTypeCommunication2";break;case 18:M.text="notificationPriceTypeCommunication3";break;case 19:M.text="notificationPriceTypeCommunication4";break;case 20:M.text="notificationPriceTypeCommunication5"}}function v(O,M){switch(O){case 21:M.text="notificationPriceTypeShipping1";break;case 22:M.text="notificationPriceTypeShipping2";break;case 23:M.text="notificationPriceTypeShipping3";break;case 24:M.text="notificationPriceTypeShipping4";break;case 25:M.text="notificationPriceTypeShipping5"}}const _={color:"",status:"",text:""};let E=_,I=_,y=_,T=_,k=_,N=_;for(const O of r.notes)switch(O.group){case 0:E=d(O.level),f(O.type,E),i={notesScore:E};break;case 1:I=d(O.level),h(O.type,I),i={notesFeedback:I};break;case 2:y=d(O.level),p(O.type,y,O.tokens[0].value),i={notesAge:y};break;case 3:T=d(O.level),g(O.type,T),i={notesDescription:T};break;case 4:k=d(O.level),m(O.type,k),i={notesCommunication:k};break;case 5:N=d(O.level),v(O.type,N),i={notesShipping:N}}return i={notesScore:E,notesFeedback:I,notesAge:y,notesDescription:T,notesCommunication:k,notesShipping:N},i}static \u0275fac=function(i){return new(i||t)(w(b),w(uo),w(Fs))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rK=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>{e.attachListeners()},multi:!0,deps:[XP]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({providers:[XP],imports:[Gn]})}return t})(),oK=(()=>{class t{httpClient;utilsService;baseToolsUrl=V._tools;affiliateCheckList="/api/extension/v1/affiliate/check-list";baseAliUrl="https://gpsfront.aliexpress.com";recommendingResults="/getI2iRecommendingResults.do";constructor(e,i){this.httpClient=e,this.utilsService=i}getAliSimilarItems(e,i,r,o,s="pcDetailLeftTopSell",a=50,c=0){return`${this.baseAliUrl}${this.recommendingResults}?currentItemList=${e}&categoryId=\n\t\t\t${i}&shopId=${r}&companyId=\n\t\t\t${o}&scenario=${s}&limit=\n\t\t\t${a}&offset=${c}`}getAliexpressSimilarItems(e){var i=this;return C(function*(){return le(i.httpClient.get(e,{withCredentials:!0}).pipe(tt(o=>o?.results.map(s=>{const a=new URL(`https:${s.productDetailUrl}`);return s.productDetailUrl=a.origin+a.pathname,s}))))})()}getAliexpressRecommendationSimilarItems(e){var i=this;return C(function*(){return le(i.httpClient.post(e,JSON.stringify({pageSize:50})).pipe(tt(o=>o?.products.map(s=>{const a=new URL(`https:${s.url}`);return s.productDetailUrl=a.origin+a.pathname,s.productId=s.id,s.productImage=s.imgUrl,s.productTitle=s.title,s.minPrice=s.price,s}))))})()}getSimilarProducts(e){var i=this;return C(function*(){const{aliRunParams:r,url:o}=e,s=i.getUrlsSimilarItems(r,o),a=yield i.getPriceSimilarProducts(e,s);return a&&a.length?a:null})()}getUrlsSimilarItems(e,i){const r=i.match(new RegExp(/[\d*]{1,}/gim))[0],o=e?.data?.recommendModule??{},s=o.productId??r,a=o.categoryId??"",c=o.storeNum??"",l=o.companyId??"",u=o.features?.recommendGpsScenarioOtherSellerProducts??"pcDetailBottomMoreOtherSeller";return{urlTopSell:this.getAliSimilarItems(s,a,c,l,o.features?.recommendGpsScenarioTopSelling??"pcDetailLeftTopSell",5),urlOtherSeller:this.getAliSimilarItems(s,a,c,l,u)}}getPriceSimilarProducts(e,i){var r=this;return C(function*(){const{merchant:{id:o},user:s}=e;let a=[];try{if(null!==i&&S.ARRAY_MERCHANTS_PRICE_SELLER.includes(o)){if(i.productId){const l=yield r.getAliexpressRecommendationSimilarItems(i.urlTopSell),u=yield r.getAliexpressRecommendationSimilarItems(i.urlOtherSeller);a=l.concat(u)}else{const l=yield r.getAliexpressSimilarItems(i.urlTopSell),u=yield r.getAliexpressSimilarItems(i.urlOtherSeller);a=l.concat(u)}if(yield r.utilsService.matchLocaleCookie(S.NO_ALI_AFFILIATE_COUNTRY)){const l=a.map(d=>({input:d.productId})),u=yield r.checkArrayAffiliateAliItems(l,s);a=a.filter(d=>u.list.find(f=>f.input===d.productId&&!!f.result))}}}catch(c){console.error(c)}return a.filter(c=>c&&c.productId)})()}checkArrayAffiliateAliItems(e,i){var r=this;return C(function*(){return r.httpClient.post(`${r.baseToolsUrl}${r.affiliateCheckList}`,JSON.stringify({list:e}),{headers:r.getHeaders(i)}).toPromise().then(o=>o)})()}getHeaders(e,i){return{"app-token":S.APP_TOKEN,"extension-token":e.tokenCookies&&e.tokenCookies.eaetkn?e.tokenCookies.eaetkn:"","user-token":e.tokenCookies&&e.tokenCookies.eautkn?e.tokenCookies.eautkn:"",referrer:i||"","version-ext":chrome.runtime.getManifest().version}}static \u0275fac=function(i){return new(i||t)(w(It),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sK=(()=>{class t{eventService;aliexpressProductsService;httpClient;userService;merchantsService;merchants;constructor(e,i,r,o,s){this.eventService=e,this.aliexpressProductsService=i,this.httpClient=r,this.userService=o,this.merchantsService=s,this.merchants=s.merchants}attachListeners(){var e=this;this.eventService.attachEvent(b.SIMILAR_ITEMS_GET_ALI_LIST,function(){var i=C(function*(r){const{url:o,aliRunParams:s,merchant:a}=r.data;return e.aliSimilarList(s,o,a)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.SIMILAR_ITEMS_GET_LIST,function(){var i=C(function*(r){return e.generalSimilarList()});return function(r){return i.apply(this,arguments)}}())}aliSimilarList(e,i,r){var o=this;return C(function*(){return o.aliexpressProductsService.getSimilarProducts({user:o.userService.user,merchant:r,aliRunParams:e,url:i})})()}generalSimilarList(){return C(function*(){return Promise.resolve(null)})()}static \u0275fac=function(i){return new(i||t)(w(b),w(oK),w(It),w(Wn),w(uo))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aK=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>{e.attachListeners()},multi:!0,deps:[sK]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({imports:[Gn]})}return t})(),uK=(()=>{class t{eventService;cacheService;userService;priceInfoPipe;utilsService;merchants;prefix="list";cacheKey="viewing.history";cacheTime=864e5;maxItemsInCache=30;constructor(e,i,r,o,s){this.eventService=e,this.cacheService=i,this.userService=r,this.priceInfoPipe=o,this.utilsService=s}attachListeners(){var e=this;this.eventService.attachEvent(b.VIEWING_HISTORY_GET_LIST,function(){var i=C(function*(r){const{url:o,data:s}=r,a=yield e.getFromCache(o);let c=e.updateHistory(a,s);return c.length>e.maxItemsInCache&&(c=c.reverse().slice(0,e.maxItemsInCache).reverse()),yield e.setToCache(c,o),e.getFormattedList(c.reverse())});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.VIEWING_HISTORY_CLEAR_LIST,function(){var i=C(function*(r){const{url:o}=r;return e.clearByDomain(o)});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.REFRESH_ALL,C(function*(){return e.clear()}))}getFormattedList(e){return e.map(i=>{const r={productDetailUrl:i.url,productImage:i.imageItem,productTitle:i.nameItem,minPrice:this.priceInfoPipe.transform(i.price.amount,i.price.currency.name),orders:i.countSoldItem,reviews:i.countReviewsItem,sellerResumeStatusItem:{icon:"smile_"+i.sellerResumeStatusItem,value:i.sellerResumeScoreItem?i.sellerResumeScoreItem.value:null}};i.priceDynamic||(i.priceDynamic={currency:{name:i.price.currency.name,sign:i.price.currency.sign},type:0,value:0});const o=this.getDecodeItemDynamic(i.priceDynamic?.type);return r.priceDynamicItem={icon:o.ItemDynamicSvg.icon,value:`${this.priceInfoPipe.transform(i.priceDynamic?.value,i.priceDynamic?.currency.name)}`},r})}updateHistory(e,i){const{itemInfo:r}=i,o=r.id?"id":"url";e=e.filter(a=>a[o]!==r[o]);const s=this.createItem(i);return[...e,s]}createItem(e){const{itemInfo:i,productReviewsText:r,countSoldItemText:o}=e,s=i.seller?.resume;return{id:i.id,nameItem:i.name,countReviewsItem:r?parseInt(r,10):null,countSoldItem:o?parseInt(o,10):null,url:i.url,imageItem:i.img,sellerResumeScoreItem:s&&s.notes.length>1?i.seller?.resume?.score:null,sellerResumeStatusItem:this.sellerStatus(s?.notes),priceDynamic:i.priceDynamic,price:i.price}}getDecodeItemDynamic(e){const i={};switch(e){case S.TYPE_MINOR_DOWN:i.icon="dynamic_low_down",i.text="notificationPriceTypeMinorDownText";break;case S.TYPE_DOWN:i.icon="dynamic_down",i.text="notificationPriceTypeDownText";break;case S.TYPE_MINOR_DOWN_AFTER_UP:i.icon="dynamic_down_after_up",i.text="notificationPriceTypeMinorAfterUpText";break;case S.TYPE_MINOR_UP_AFTER_DOWN:i.icon="dynamic_up_after_down",i.text="notificationPriceTypeMinorAfterDownText";break;case S.TYPE_UP:i.icon="dynamic_up",i.text="notificationPriceTypeUpText";break;case S.TYPE_MINOR_UP:i.icon="dynamic_low_up",i.text="notificationPriceTypeMinorUpText";break;default:i.icon="dynamic_no_changes",i.text="notificationPriceTypeNoChangeText"}return{ItemDynamicSvg:i}}sellerStatus(e){switch(e?.find(r=>0===r.group)?.level){case S.LEVEL_ERROR:return S.LEVEL_ERROR_STATUS;case S.LEVEL_WARNING:return S.LEVEL_WARNING_STATUS;default:return S.LEVEL_INFO_STATUS}}get cachePrefix(){return`${this.prefix}_${this.userService.user.token??0}`}getFromCache(e){var i=this;return C(function*(){let r=yield i.cacheService.get(i.cachePrefix,i.cacheKey);return r||(r={}),r[G.getDomain(e)]||[]})()}setToCache(e,i){var r=this;return C(function*(){let o=yield r.cacheService.get(r.cachePrefix,r.cacheKey);o||(o={}),o[G.getDomain(i)]=e,r.cacheService.set(r.cachePrefix,r.cacheKey,r.cacheTime,o)})()}clearByDomain(e){var i=this;return C(function*(){const r=yield i.cacheService.get(i.cachePrefix,i.cacheKey);r[G.getDomain(e)]&&(delete r[G.getDomain(e)],i.cacheService.set(i.cachePrefix,i.cacheKey,i.cacheTime,r))})()}clear(){this.cacheService.remove(this.cachePrefix,this.cacheKey)}static \u0275fac=function(i){return new(i||t)(w(b),w(Qe),w(Wn),w(F1),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dK=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>e.attachListeners(),multi:!0,deps:[uK]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({providers:[F1],imports:[Gn]})}return t})(),SK=(()=>{class t{eventService;httpClient;userService;cacheService;datePipe;utilsService;baseUrl=V._tools;itemInfo="/api/extension/v1/item/info";itemHistory=`${V._tools}/api/extension/v1/item/history`;prefix="price.monitoring";prefixDropNotification="price.monitoring.drop.notification";cacheKey="item";cacheTime=108e5;dropNotificationCacheTime=2592e5;constructor(e,i,r,o,s,a){this.eventService=e,this.httpClient=i,this.userService=r,this.cacheService=o,this.datePipe=s,this.utilsService=a}attachListeners(){var e=this;this.eventService.attachEvent(b.GET_TARGET_INFO,function(){var i=C(function*(r){const{data:{pageData:o,url:s,currency:a}}=r,{info:c}=yield e.getFromCache(s,a);if(c)return c;const l=yield e.fetchTargetInfo(s,o);return l&&l.itemInfo&&(yield e.setToCache({info:l,history:null},s,a)),l});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.REFRESH_ALL,C(function*(){return e.clear()})),this.eventService.attachEvent(b.GET_PRICE_HISTORY,function(){var i=C(function*(r){const{data:{url:o,priceStamp:s,currency:a}}=r;let{info:c,history:l}=yield e.getFromCache(o,a);if(!c){const d=yield e.fetchTargetInfo(o,{price:s.price.amount,currency:s.price.currency});if(!d||!d.itemInfo)return null;c=d}if(l)return e.getFormatedHistoryList(l.list);const u=yield e.fetchPriceHistory(c,s);return u&&u.list?(yield e.setToCache({history:u,info:c},o,a),e.getFormatedHistoryList(u.list)):null});return function(r){return i.apply(this,arguments)}}()),this.eventService.attachEvent(b.ALLOWED_PRICE_DROP_NOTIFICATION,function(){var i=C(function*(r){const{url:o,dropValue:s}=r.data;let a=yield e.cacheService.get(e.cachePrefix,e.prefixDropNotification);a||(a={});const c=a[e.cacheDomainKey(o)]??0;return Math.abs(s)>Math.abs(c)&&(a[e.cacheDomainKey(o)]=s,e.cacheService.set(e.cachePrefix,e.prefixDropNotification,e.dropNotificationCacheTime,a),!0)});return function(r){return i.apply(this,arguments)}}())}fetchPriceHistory(e,i){const r=new URL(this.itemHistory),o={id:e.itemInfo?.id?.id,type:e.itemInfo?.id?.type,priceMinDisplay:i.price?.amount??"",priceMaxDisplay:i.price?.amount??"",currencyDisplay:i.price?.currency?.name??"",timezone:this.getTimeZoneOffset()};return Object.keys(o).forEach(s=>{r.searchParams.append(s,o[s])}),this.httpClient.get(r.href,{headers:this.getHeaders(),withCredentials:!0}).toPromise().then(s=>s)}fetchTargetInfo(e,i){const r=new URL(`${this.baseUrl}${this.itemInfo}`),o={url:e,priceMin:i.price??"",priceMax:i.price??"",currency:i.currency?.name??"",priceMinDisplay:i.price??"",priceMaxDisplay:i.price??"",currencyDisplay:i.currency?.name??"",timezone:this.getTimeZoneOffset()};return Object.keys(o).forEach(s=>{r.searchParams.append(s,o[s])}),this.httpClient.get(r.href,{headers:this.getHeaders(),withCredentials:!0}).toPromise().then(s=>s)}getHeaders(){const e=this.userService.user;return{"app-token":S.APP_TOKEN,"extension-token":e.tokenCookies&&e.tokenCookies.eaetkn?e.tokenCookies.eaetkn:"","user-token":e.tokenCookies&&e.tokenCookies.eautkn?e.tokenCookies.eautkn:"","version-ext":chrome.runtime.getManifest().version}}getFromCache(e,i){var r=this;return C(function*(){const o=yield r.cacheService.get(r.cachePrefix,r.cacheKey);return o?o[r.cacheDomainKey(e,i)]??{info:null,history:null}:{info:null,history:null}})()}setToCache(e,i,r){var o=this;return C(function*(){let s=yield o.cacheService.get(o.cachePrefix,o.cacheKey);s||(s={}),s[o.cacheDomainKey(i,r)]=e,o.cacheService.set(o.cachePrefix,o.cacheKey,o.cacheTime,s)})()}get cachePrefix(){return`${this.prefix}_${this.userService.user.token??0}`}cacheDomainKey(e,i){const r=new URL(e),o=r.origin+r.pathname;return i?i+"_"+o:o}clear(){this.cacheService.remove(this.cachePrefix,this.cacheKey),this.cacheService.remove(this.cachePrefix,this.prefixDropNotification)}getFormatedHistoryList(e){return e.sort((i,r)=>i.timestamp-r.timestamp).map(i=>({when:this.datePipe.transform(new Date(1e3*i.timestamp),"yyyy-MM-dd'T'HH:mm:ssZZZZZ"),price:{amount:i.max,converted:i.converted,currency:i.currency}}))??[]}getTimeZoneOffset(){try{return(new Date).toString().match(/([-+][0-9]+)\s/)[1]}catch{return null}}static \u0275fac=function(i){return new(i||t)(w(b),w(It),w(Wn),w(Qe),w(fc),w(G))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),EK=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Mn,useFactory:e=>()=>{e.attachListeners()},multi:!0,deps:[SK]}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({imports:[Gn]})}return t})();const IK=Sn(t=>function(e=null){t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e});function TK(t){throw new IK(t)}function sv(t,n){const e=he(t)?t:()=>t,i=r=>r.error(e());return new Tt(n?r=>n.schedule(i,0,r):i)}class DK{localeService;constructor(n){this.localeService=n}handle(n){return this.doFetch(n).pipe(this.handleResponse(n),this.parseResponse(n),x1({type:fd.Sent}))}doFetch(n){return function xK(t,n={}){const{selector:e}=n,i=(0,eo.Tt)(n,["selector"]);return new Tt(r=>{const o=new AbortController,{signal:s}=o;let a=!0;const{signal:c}=i;if(c)if(c.aborted)o.abort();else{const d=()=>{s.aborted||o.abort()};c.addEventListener("abort",d),r.add(()=>c.removeEventListener("abort",d))}const l=Object.assign(Object.assign({},i),{signal:s}),u=d=>{a=!1,r.error(d)};return fetch(t,l).then(d=>{e?pn(e(d)).subscribe(Bt(r,void 0,()=>{a=!1,r.complete()},u)):(a=!1,r.next(d),r.complete())}).catch(u),()=>{a&&o.abort()}})}(n.url,{method:n.method,body:n.serializeBody(),headers:this.mapFromHttpHeaders(n),credentials:n.withCredentials?"same-origin":"omit"}).pipe(function wK(t,n){const{first:e,each:i,with:r=TK,scheduler:o=n??Dm,meta:s=null}=T1(t)?{first:t}:"number"==typeof t?{each:t}:t;if(null==e&&null==i)throw new TypeError("No timeout provided.");return Ft((a,c)=>{let l,u,d=null,f=0;const h=p=>{u=Yi(c,o,()=>{try{l.unsubscribe(),pn(r({meta:s,lastValue:d,seen:f})).subscribe(c)}catch(g){c.error(g)}},p)};l=a.subscribe(Bt(c,p=>{u?.unsubscribe(),f++,c.next(d=p),i>0&&h(i)},void 0,void 0,()=>{u?.closed||u?.unsubscribe(),d=null})),!f&&h(null!=e?"number"==typeof e?e:+e-o.now():i)})}(1e4))}handleResponse(n){return e=>e.pipe(Xi(i=>sv(()=>new Sm({error:i,status:0,statusText:"Unknown Error",url:n.url}))),zn(i=>i.ok?Xe(i):this.parseBody(i,n).pipe(Xi(r=>Xe(r)),zn(r=>sv(()=>new Sm({error:r,headers:this.mapToHttpHeaders(i.headers),status:i.status,statusText:i.statusText,url:i.url||void 0}))))))}parseResponse(n){return e=>e.pipe(zn(i=>this.parseBody(i,n).pipe(Xi(r=>sv(()=>new Sm({error:{error:r,text:i.body},headers:this.mapToHttpHeaders(i.headers),status:i.status,statusText:i.statusText,url:i.url||void 0}))),tt(r=>this.mapToHttpResponse(r,i)))))}parseBody(n,e){switch(e.responseType){case"json":return to(n.text()).pipe(tt(i=>""!==i?JSON.parse(i):null));case"blob":return to(n.blob());case"arraybuffer":return to(n.arrayBuffer());default:return to(n.text())}}mapToHttpResponse(n,e){return new Rs({body:n,headers:this.mapToHttpHeaders(e.headers),status:e.status,statusText:e.statusText,url:e.url})}mapToHttpHeaders(n){const e=new Pi;return n.forEach((i,r)=>e.set(r,i)),e}mapFromHttpHeaders(n){return n.headers.keys().reduce((e,i)=>({...e,[i]:n.headers.get(i)}),{Accept:"application/json",locale:this.localeService.locale,"Content-Type":"application/json","extension-version":chrome.runtime.getManifest().version})}}let PK=(()=>{class t extends It{localeService;constructor(e){super(new DK(e)),this.localeService=e}static \u0275fac=function(i){return new(i||t)(w(zt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),MK=(()=>{class t{ngDoBootstrap(e){}static \u0275fac=function(i){return new(i||t)};static \u0275mod=xt({type:t});static \u0275inj=vt({providers:[h_,bc,fc,{provide:It,useClass:PK},{provide:b,useClass:AU},{provide:Pt,useClass:F7},re,Qe,sx,{provide:Mn,useFactory:e=>C(function*(){yield e.init()}),multi:!0,deps:[QV]},Ki,uo],imports:[TH,GV.forRoot(),W7.forRoot(),YU.forRoot(),zU.forRoot(),zV,YV.forRoot(),OU.forRoot(),ZV.forRoot(),rK.forRoot(),EK.forRoot(),dK.forRoot(),aK.forRoot(),G7.forRoot()]})}return t})();IH().bootstrapModule(MK,{ngZone:"noop"}).catch(t=>console.error(t))},317:ui=>{const Kn=C=>"object"==typeof C&&null!==C,Ot=Symbol("skip"),At=C=>Kn(C)&&!(C instanceof RegExp)&&!(C instanceof Error)&&!(C instanceof Date),Fn=(C,Xt,ie,Me=new WeakMap)=>{if(ie={deep:!1,target:{},...ie},Me.has(C))return Me.get(C);Me.set(C,ie.target);const{target:Ve}=ie;delete ie.target;const Rt=X=>X.map(di=>At(di)?Fn(di,Xt,ie,Me):di);if(Array.isArray(C))return Rt(C);for(const[X,di]of Object.entries(C)){const dt=Xt(X,di,C);if(dt===Ot)continue;let[Oe,ft,{shouldRecurse:Qt=!0}={}]=dt;"__proto__"!==Oe&&(ie.deep&&Qt&&At(ft)&&(ft=Array.isArray(ft)?Rt(ft):Fn(ft,Xt,ie,Me)),Ve[Oe]=ft)}return Ve};ui.exports=(C,Xt,ie)=>{if(!Kn(C))throw new TypeError(`Expected an object, got \`${C}\` (${typeof C})`);return Fn(C,Xt,ie)},ui.exports.mapObjectSkip=Ot},450:(ui,Kn,Ot)=>{Ot.r(Kn),Ot.d(Kn,{snakeCase:()=>di});var At=Ot(270);function Xt(dt){return dt.toLowerCase()}var ie=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Me=/[^A-Z0-9]+/gi;function Rt(dt,Oe,ft){return Oe instanceof RegExp?dt.replace(Oe,ft):Oe.reduce(function(Qt,rr){return Qt.replace(rr,ft)},dt)}function di(dt,Oe){return void 0===Oe&&(Oe={}),function X(dt,Oe){return void 0===Oe&&(Oe={}),function Ve(dt,Oe){void 0===Oe&&(Oe={});for(var ft=Oe.splitRegexp,rr=Oe.stripRegexp,or=void 0===rr?Me:rr,sr=Oe.transform,xo=void 0===sr?Xt:sr,Or=Oe.delimiter,Do=void 0===Or?" ":Or,an=Rt(Rt(dt,void 0===ft?ie:ft,"$1\0$2"),or,"\0"),fi=0,ar=an.length;"\0"===an.charAt(fi);)fi++;for(;"\0"===an.charAt(ar-1);)ar--;return an.slice(fi,ar).split("\0").map(xo).join(Do)}(dt,(0,At.Cl)({delimiter:"."},Oe))}(dt,(0,At.Cl)({delimiter:"_"},Oe))}},570:(ui,Kn,Ot)=>{const At=Ot(317),{snakeCase:Fn}=Ot(450);function C(ie,Me){return ie.some(function(Ve){return"string"==typeof Ve?Ve===Me:Ve.test(Me)})}function Xt(ie,Me,Ve){return Ve.shouldRecurse?{shouldRecurse:Ve.shouldRecurse(ie,Me)}:void 0}ui.exports=function(ie,Me){if(Array.isArray(ie)){if(ie.some(Ve=>Ve.constructor!==Object))throw new Error("obj must be array of plain objects")}else if(ie.constructor!==Object)throw new Error("obj must be an plain object");return Me=Object.assign({deep:!0,exclude:[],parsingOptions:{}},Me),At(ie,function(Ve,Rt){return[C(Me.exclude,Ve)?Ve:Fn(Ve,Me.parsingOptions),Rt,Xt(Ve,Rt,Me)]},Me)}},270:(ui,Kn,Ot)=>{Ot.d(Kn,{AQ:()=>fi,Cl:()=>C,N3:()=>an,Tt:()=>Xt,sH:()=>Oe,xN:()=>Qs});var C=function(){return C=Object.assign||function(D){for(var A,R=1,B=arguments.length;R<B;R++)for(var F in A=arguments[R])Object.prototype.hasOwnProperty.call(A,F)&&(D[F]=A[F]);return D},C.apply(this,arguments)};function Xt(x,D){var A={};for(var R in x)Object.prototype.hasOwnProperty.call(x,R)&&D.indexOf(R)<0&&(A[R]=x[R]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var B=0;for(R=Object.getOwnPropertySymbols(x);B<R.length;B++)D.indexOf(R[B])<0&&Object.prototype.propertyIsEnumerable.call(x,R[B])&&(A[R[B]]=x[R[B]])}return A}function Oe(x,D,A,R){return new(A||(A=Promise))(function(F,Q){function Ie(Ke){try{te(R.next(Ke))}catch(mt){Q(mt)}}function cn(Ke){try{te(R.throw(Ke))}catch(mt){Q(mt)}}function te(Ke){Ke.done?F(Ke.value):function B(F){return F instanceof A?F:new A(function(Q){Q(F)})}(Ke.value).then(Ie,cn)}te((R=R.apply(x,D||[])).next())})}function an(x){return this instanceof an?(this.v=x,this):new an(x)}function fi(x,D,A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,R=A.apply(x,D||[]),F=[];return B={},Q("next"),Q("throw"),Q("return"),B[Symbol.asyncIterator]=function(){return this},B;function Q(et){R[et]&&(B[et]=function(Xn){return new Promise(function(he,Sn){F.push([et,Xn,he,Sn])>1||Ie(et,Xn)})})}function Ie(et,Xn){try{!function cn(et){et.value instanceof an?Promise.resolve(et.value.v).then(te,Ke):mt(F[0][2],et)}(R[et](Xn))}catch(he){mt(F[0][3],he)}}function te(et){Ie("next",et)}function Ke(et){Ie("throw",et)}function mt(et,Xn){et(Xn),F.shift(),F.length&&Ie(F[0][0],F[0][1])}}function Qs(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A,D=x[Symbol.asyncIterator];return D?D.call(x):(x=function or(x){var D="function"==typeof Symbol&&Symbol.iterator,A=D&&x[D],R=0;if(A)return A.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&R>=x.length&&(x=void 0),{value:x&&x[R++],done:!x}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}(x),A={},R("next"),R("throw"),R("return"),A[Symbol.asyncIterator]=function(){return this},A);function R(F){A[F]=x[F]&&function(Q){return new Promise(function(Ie,cn){!function B(F,Q,Ie,cn){Promise.resolve(cn).then(function(te){F({value:te,done:Ie})},Q)}(Ie,cn,(Q=x[F](Q)).done,Q.value)})}}}"function"==typeof SuppressedError&&SuppressedError}},ui=>{ui(ui.s=0)}]);