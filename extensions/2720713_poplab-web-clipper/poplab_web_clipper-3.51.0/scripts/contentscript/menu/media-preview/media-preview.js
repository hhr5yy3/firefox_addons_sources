(()=>{"use strict";var e={1741:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MediaPreviewView=void 0;const r=t(2688),s=t(4911);i.MediaPreviewView=class{constructor(e){this.controller=e}createSingleMediaPreview(e){return`\n    <div class="poplab-capture-form-block">\n      <label class="form-block-label-title">\n        <div class="form-block-label-title">\n          <img src="${e.images.mediaIcon}" alt="" class="label-icon" />\n          <p>${chrome.i18n.getMessage("medias_capture")}</p>\n        </div>\n      </label>\n      <div class="poplab-preview">\n        ${this.buildPreview(e.capture.mediaPreviews[0])}\n        ${e.capture.recapturable?`\n          <div class="recapturer">\n            <div class="btn-recapturer vertically-center">\n              <img src="${e.images.selector}" />\n              <div>${chrome.i18n.getMessage("recapture_element")}</div>\n            </div>\n          </div>`:""}\n      </div>\n    </div>`}createManyMediaPreview(e,i){let t=(0,s.getCountPerFileType)(e.capture.mediaPreviews);const n=document.createElement("div");return 2===t.filter((e=>e.typeFichier===r.TypeFichier.IMAGE||e.typeFichier===r.TypeFichier.VIDEO)).length&&(t=t.filter((e=>e.typeFichier!==r.TypeFichier.VIDEO&&e.typeFichier!==r.TypeFichier.IMAGE)),n.innerHTML+=this.buildImagesVideosPreview(e.capture.mediaPreviews)),t.forEach((t=>{if(t.count>1)n.innerHTML+=this.buildMediasToChoosePreview(e.capture.mediaPreviews,t);else{const r=e.capture.mediaPreviews.find((e=>e.type_fichier===t.typeFichier));n.innerHTML+=this.buildSingleMediaForTypePreview(r,t),null==i||i.push(r.id)}})),n.outerHTML}buildImagesVideosPreview(e){let i=`\n            <p class="select-file-type">\n              ${chrome.i18n.getMessage("selectionnez")}\n              ${chrome.i18n.getMessage("image_ou_video_avec_determinant")}\n              ${chrome.i18n.getMessage("a_recuperer")}</p>\n            `;return e.filter((e=>e.type_fichier===r.TypeFichier.IMAGE||e.type_fichier===r.TypeFichier.VIDEO)).map(((e,t)=>{const r=document.createElement("div");r.className="poplab-preview";const s=document.createElement("button");s.className="radio-wrap",s.type="button",s.innerHTML+=`\n                <label class="radio">\n                  <input type="radio" name="IMAGE_VIDEO" id="preview-radio-${t}" value="${e.id}" ${0===t?"checked":""}/>\n                  <div class="contour-radio">\n                    <div class="bg-radio"></div>\n                  </div>\n                  ${this.buildPreview(e)}\n                </label>`,r.appendChild(s),i+=r.outerHTML})),i}buildMediasToChoosePreview(e,i){let t=`\n            <p class="select-file-type">\n              ${chrome.i18n.getMessage("selectionnez")}\n              ${chrome.i18n.getMessage(`${i.typeFichier.toLowerCase()}_avec_determinant`)}\n              ${chrome.i18n.getMessage("a_recuperer")}</p>\n            `;return e.filter((e=>e.type_fichier===i.typeFichier)).map(((e,i)=>{const r=document.createElement("div");r.className="poplab-preview";const s=document.createElement("button");s.className="radio-wrap",s.type="button",s.innerHTML+=`\n                  <label class="radio">\n                    <input type="radio" name="${e.type_fichier}" id="preview-radio-${i}" value="${e.id}" ${0===i?"checked":""}/>\n                    <div class="contour-radio">\n                      <div class="bg-radio"></div>\n                    </div>\n                    ${this.buildPreview(e)}\n                  </label>`,r.appendChild(s),t+=r.outerHTML})),t}buildSingleMediaForTypePreview(e,i){return`<p class="select-file-type">${chrome.i18n.getMessage(`${i.typeFichier}_capture`)}</p>\n            <div class="poplab-preview">\n              ${this.buildPreview(e)}\n            </div>`}buildPreview(e){var i;return e.type_fichier===r.TypeFichier.IMAGE?`<img src="${e.url}" title="${chrome.i18n.getMessage("medias_capture")}"/>`:e.type_fichier===r.TypeFichier.LIEN?`<p class="poplab-capture-lien" title="${e.url}">${e.url}</p>`:e.type_fichier===r.TypeFichier.AUDIO?`<audio class="media-preview" src=${e.url} controls></audio>`:e.type_fichier===r.TypeFichier.VIDEO||e.type_fichier===r.TypeFichier.EXERCISEUR?`<iframe id="preview-iframe" src="${e.url}" title="${chrome.i18n.getMessage("medias_capture")}" style="max-width: 344px"></iframe>`:e.type_fichier===r.TypeFichier.FICHIER?`<p>Fichier : ${null!==(i=e.label)&&void 0!==i?i:e.subTypeFichier}</p>`:""}}},4911:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.fromHTML=i.clearHighlight=i.smoothScrollToTargetedHtmlElement=i.hasSameFileTypeMoreThanOnce=i.getCountPerFileType=void 0;const r=t(2688);function s(e){return Object.entries(e.reduce(((e,i)=>{const t=i.type_fichier;return e[t]=(e[t]||0)+1,e}),{})).map((([e,i])=>({typeFichier:e,count:i})))}i.getCountPerFileType=s,i.hasSameFileTypeMoreThanOnce=function(e){const i=s(e);return i.filter((e=>e.count>1)).length>0||2===i.filter((e=>e.typeFichier===r.TypeFichier.IMAGE||e.typeFichier===r.TypeFichier.VIDEO)).length};i.smoothScrollToTargetedHtmlElement=function(e,i=0){const t=document.querySelector(`#${e}`);if(t){const e=function(e){let i=e.parentElement;for(;i;){const e=window.getComputedStyle(i);if("auto"===e.overflowY||"scroll"===e.overflowY)return i;i=i.parentElement}return null}(t);if(e){let r=t.getBoundingClientRect().top+e.scrollTop-i;r>e.scrollHeight-e.getBoundingClientRect().height&&(r=e.scrollHeight-e.getBoundingClientRect().height),o(Math.floor(r),e).then((()=>l(t)))}else{let e=t.getBoundingClientRect().top+window.scrollY-i;const r=function(){const e=document.body,i=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)-window.innerHeight-40}();e>r&&(e=r),o(Math.floor(e)).then((()=>l(t)))}}};let n=null;function l(e){n&&n.classList.remove("poplab-highlighted"),n=e;let i=document.getElementById("poplab-highlight-stylesheet");i||(i=document.createElement("style"),i.id="poplab-highlight-stylesheet",i.textContent="\n        .poplab-highlighted {\n            border: solid 8px rgb(75, 198, 185);\n        }",document.head.appendChild(i)),setTimeout((()=>{e.classList.add("poplab-highlighted")}),100)}function o(e,i){return i?i.scrollTo({top:e,behavior:"smooth"}):window.scrollTo({top:e,behavior:"smooth"}),new Promise((t=>{const r=()=>{i?Math.floor(i.scrollTop)!==e&&Math.ceil(i.scrollTop)!==e||(i.removeEventListener("scroll",r),t()):Math.floor(window.scrollY)!==e&&Math.ceil(window.scrollY)!==e||(window.removeEventListener("scroll",r),t())};i?(i.removeEventListener("scroll",r),Math.floor(i.scrollTop)===e||Math.ceil(i.scrollTop)===e?t():i.addEventListener("scroll",r)):(window.removeEventListener("scroll",r),Math.floor(window.scrollY)===e||Math.ceil(window.scrollY)===e?t():window.addEventListener("scroll",r))}))}i.clearHighlight=function(){var e;const i=document.getElementById("poplab-highlight-stylesheet");i&&(null===(e=i.parentNode)||void 0===e||e.removeChild(i))},i.fromHTML=function(e){if(!e)return null;const i=document.createElement("template");i.innerHTML=e;const t=i.content.children;return 1===t.length?t[0]:t}},2688:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DocumentCaptureData=i.ElementCaptureData=i.CaptureData=i.FichierMediaObject=i.ExerciseurMediaObject=i.UrlMediaObject=i.AudioMediaObject=i.VideoMediaObject=i.ImageMediaObject=i.MediaObject=i.TypeFichier=i.CaptureType=void 0;const r=t(4393);var s,n;!function(e){e.BASIQUE="BASIQUE",e.UPLOAD="UPLOAD"}(s||(i.CaptureType=s={})),function(e){e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.FICHIER="FICHIER",e.LIEN="LIEN",e.EXERCISEUR="EXERCISEUR"}(n||(i.TypeFichier=n={}));class l{constructor(e,i,t,r,s,n,l){this.id=e,this.url=i,this.type_fichier=t,this.copyright=r,this.file=s,this.editeur=n,this.subTypeFichier=l}}i.MediaObject=l,i.ImageMediaObject=class extends l{constructor(e,i,t,r,s){super(e,i,n.IMAGE,t,r,s)}},i.VideoMediaObject=class extends l{constructor(e,i,t,r,s){super(e,i,n.VIDEO,t,r,s)}},i.AudioMediaObject=class extends l{constructor(e,i,t,r,s){super(e,i,n.AUDIO,t,r,s)}},i.UrlMediaObject=class extends l{constructor(e,i,t,r){super(e,i,n.LIEN,t),this.displayPreview=!1,this.bigPreview=!1,this.label=r}},i.ExerciseurMediaObject=class extends l{constructor(e,i,t){super(e,i,n.EXERCISEUR),this.typeExerciseur=t}},i.FichierMediaObject=class extends l{constructor(e,i,t,r,s){super(e,i,n.FICHIER,void 0,t,void 0,r),this.label=s}};class o{constructor(e,i,t){this.titre=e,this.description=i,this.auteurInitial=t}}i.CaptureData=o;class c extends o{constructor(e){var i,t,s,n,l,o,c;super(null==e?void 0:e.titre,null==e?void 0:e.description,null==e?void 0:e.auteurInitial),this.type=r.ElementType.ELEMENT,this.images=[],this.videos=[],this.audios=[],this.urls=[],this.exerciseurs=[],this.fichiers=[],this.credit=null==e?void 0:e.credit,this.images=null!==(i=null==e?void 0:e.images)&&void 0!==i?i:[],this.videos=null!==(t=null==e?void 0:e.videos)&&void 0!==t?t:[],this.audios=null!==(s=null==e?void 0:e.audios)&&void 0!==s?s:[],this.urls=null!==(n=null==e?void 0:e.urls)&&void 0!==n?n:[],this.exerciseurs=null!==(l=null==e?void 0:e.exerciseurs)&&void 0!==l?l:[],this.fichiers=null!==(o=null==e?void 0:e.fichiers)&&void 0!==o?o:[],this.type=null!==(c=null==e?void 0:e.type)&&void 0!==c?c:r.ElementType.ELEMENT,this.options=null==e?void 0:e.options,this.meta=null==e?void 0:e.meta}setTitre(e){return this.titre=e,this}setDescription(e){return this.description=e,this}setCredit(e){return this.credit=e,this}setImages(e){return this.images=e,this}setVideos(e){return this.videos=e,this}setAudios(e){return this.audios=e,this}setUrls(e){return this.urls=e,this}setExerciseurs(e){return this.exerciseurs=e,this}setType(e){return this.type=e,this}getMedias(){return this.images.concat(this.videos.concat(this.audios.concat(this.fichiers)))}getAllEmbeds(){return this.getMedias().concat(this.urls).concat(this.exerciseurs)}}i.ElementCaptureData=c,i.DocumentCaptureData=class extends o{constructor(e){super(null==e?void 0:e.titre,null==e?void 0:e.description,null==e?void 0:e.auteurInitial),this.elements=[],null==e||e.elements.forEach((e=>this.elements.push(new c(e)))),this.meta=null==e?void 0:e.meta}setTitre(e){return this.titre=e,this}setDescription(e){return this.description=e,this}setElements(e){return this.elements=e,this}}},4393:(e,i)=>{var t,r,s,n;Object.defineProperty(i,"__esModule",{value:!0}),i.Editeur=i.ElementType=i.ExerciseurType=i.PoplabElementCreationRequest=void 0,i.PoplabElementCreationRequest=class{constructor(e,i){var r,n,l;this.titre=null!==(r=e.titre)&&void 0!==r?r:"",this.description=null!==(n=e.description)&&void 0!==n?n:"",this.type=e.type,this.options={isnew:!0,separator:!1},this.type!==s.SECTION||this.titre||(this.options.separator=!0),this.credits=null!==(l=e.credit)&&void 0!==l?l:"",this.webAuteurInitial=e.auteurInitial,this.imageEmbed=e.images[0]?{url:e.images[0].url,type:t.IMAGE}:void 0,this.videoEmbed=e.videos[0]?{url:e.videos[0].url,type:t.VIDEO}:void 0,this.audioEmbed=e.audios[0]?{url:e.audios[0].url,type:t.AUDIO}:void 0,this.lienEmbed=e.urls[0]?{url:e.urls[0].url,label:e.urls[0].label,displayPreview:e.urls[0].displayPreview,bigPreview:e.urls[0].bigPreview,type:t.LIEN}:void 0,this.exerciseur=e.exerciseurs[0]?{url:e.exerciseurs[0].url,exerciseurType:e.exerciseurs[0].typeExerciseur,type:t.EXERCISEUR}:void 0,i&&(this.document=i),this.meta=e.meta}},function(e){e.LIEN="LIEN",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.FICHIER="FICHIER",e.EXERCISEUR="EXERCISEUR"}(t||(t={})),function(e){e.QUIZLET="QUIZLET",e.LEARNINGAPPS="LEARNINGAPPS",e.GENIALLY="GENIALLY",e.BOOKWIDGETS="BOOKWIDGETS",e.EDUPOOL="EDUPOOL",e.BELIN="BELIN"}(r||(i.ExerciseurType=r={})),function(e){e.ELEMENT="element",e.SECTION="section"}(s||(i.ElementType=s={})),function(e){e.BELIN="https://www.belin-education.com/"}(n||(i.Editeur=n={}))}},i={};function t(r){var s=i[r];if(void 0!==s)return s.exports;var n=i[r]={exports:{}};return e[r](n,n.exports,t),n.exports}t(2688),t(1741)})();