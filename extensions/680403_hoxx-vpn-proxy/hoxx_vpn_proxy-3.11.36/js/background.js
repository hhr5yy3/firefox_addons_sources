(()=>{var t={627:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof E?e:E,i=Object.create(o.prototype),s=new P(n||[]);return a(i,"_invoke",{value:x(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",d="suspendedYield",g="executing",v="completed",m={};function E(){}function S(){}function b(){}var A={};f(A,u,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==r&&i.call(O,u)&&(A=O);var T=b.prototype=E.prototype=Object.create(A);function R(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,s,u){var c=p(t[o],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function x(e,r,n){var o=y;return function(i,a){if(o===g)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=_(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var c=p(e,r,n);if("normal"===c.type){if(o=n.done?v:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function _(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return S.prototype=b,a(T,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:S,configurable:!0}),S.displayName=f(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},R(L.prototype),f(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},R(T),f(T,l,"Generator"),f(T,u,(function(){return this})),f(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function i(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,u,"next",t)}function u(t){i(a,n,o,s,u,"throw",t)}s(void 0)}))}}var s=r.g||window||self;s.__gobridge__||(s.__gobridge__={});var u=s.__gobridge__;e.A=function(t){var e=!1;function r(){return(r=a(o().mark((function r(){var n,i,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new s.Go,r.next=3,t;case 3:return i=r.sent,r.next=6,WebAssembly.instantiate(i,n.importObject);case 6:a=r.sent,n.run(a.instance),e=!0;case 9:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),new Proxy({},{get:function(t,r){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return new Promise(function(){var t=a(o().mark((function t(i,a){var s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=function(){u[r].apply(void 0,[].concat(n,[function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t?a(t):i.apply(void 0,r)}]))};case 1:if(e){t.next=6;break}return t.next=4,new Promise(requestAnimationFrame);case 4:t.next=1;break;case 6:if(r in u){t.next=9;break}return a('There is nothing defined with the name "'.concat(r.toString(),'"')),t.abrupt("return");case 9:if("function"==typeof u[r]){t.next=12;break}return i(u[r]),t.abrupt("return");case 12:s();case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}}})}},526:(t,e)=>{"use strict";e.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,i=s(t),a=i[0],u=i[1],c=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,u)),l=0,f=u>0?a-4:a;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;2===u&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,c[l++]=255&e);1===u&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(u(t,s,s+a>c?c:s+a));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},287:(t,e,r)=>{"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const n=r(526),o=r(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return c(t,e,r)}function c(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|d(t,e);let n=s(r);const o=n.write(t,e);o!==r&&(n=n.slice(0,o));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(J(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(J(t,ArrayBuffer)||t&&J(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(J(t,SharedArrayBuffer)||t&&J(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);const o=function(t){if(u.isBuffer(t)){const e=0|y(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||z(t.length)?s(0):h(t);if("Buffer"===t.type&&Array.isArray(t.data))return h(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return l(t),s(t<0?0:0|y(t))}function h(t){const e=t.length<0?0:0|y(t.length),r=s(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function y(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||J(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(t).length;default:if(o)return n?-1:V(t).length;e=(""+e).toLowerCase(),o=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,r);case"utf8":case"utf-8":return R(this,e,r);case"ascii":return x(this,e,r);case"latin1":case"binary":return _(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),z(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:E(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):E(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function E(t,e,r,n,o){let i,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let n=-1;for(i=r;i<s;i++)if(c(t,i)===c(e,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===u)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){let r=!0;for(let n=0;n<u;n++)if(c(t,i+n)!==c(e,n)){r=!1;break}if(r)return i}return-1}function S(t,e,r,n){r=Number(r)||0;const o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=e.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(e.substr(2*a,2),16);if(z(n))return a;t[r+a]=n}return a}function b(t,e,r,n){return W(V(e,t.length-r),t,r,n)}function A(t,e,r,n){return W(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return W(X(e),t,r,n)}function O(t,e,r,n){return W(function(t,e){let r,n,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function R(t,e,r){r=Math.min(t.length,r);const n=[];let o=e;for(;o<r;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=r){let r,n,s,u;switch(a){case 1:e<128&&(i=e);break;case 2:r=t[o+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(i=u));break;case 3:r=t[o+1],n=t[o+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:r=t[o+1],n=t[o+2],s=t[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(t){const e=t.length;if(e<=L)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=L));return r}(n)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),!u.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return c(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},u.allocUnsafe=function(t){return f(t)},u.allocUnsafeSlow=function(t){return f(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(J(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=u.allocUnsafe(e);let o=0;for(r=0;r<t.length;++r){let e=t[r];if(J(e,Uint8Array))o+e.length>n.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(n,o)):Uint8Array.prototype.set.call(n,e,o);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,o)}o+=e.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?R(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,o){if(J(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0);const s=Math.min(i,a),c=this.slice(n,o),l=t.slice(e,r);for(let t=0;t<s;++t)if(c[t]!==l[t]){i=c[t],a=l[t];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return S(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":case"latin1":case"binary":return A(this,t,e,r);case"base64":return w(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const L=4096;function x(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function _(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function k(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=e;n<r;++n)o+=Q[t[n]];return o}function I(t,e,r){const n=t.slice(e,r);let o="";for(let t=0;t<n.length-1;t+=2)o+=String.fromCharCode(n[t]+256*n[t+1]);return o}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n,o){M(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,r}function G(t,e,r,n,o){M(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i>>=8,t[r+6]=i,i>>=8,t[r+5]=i,i>>=8,t[r+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a>>=8,t[r+2]=a,a>>=8,t[r+1]=a,a>>=8,t[r]=a,r+8}function Y(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(t,e,r,n,i){return e=+e,r>>>=0,i||Y(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function D(t,e,r,n,i){return e=+e,r>>>=0,i||Y(t,0,r,8),o.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t],o=1,i=0;for(;++i<e&&(o*=256);)n+=this[t+i]*o;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t+--e],o=1;for(;e>0&&(o*=256);)n+=this[t+--e]*o;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=$((function(t){F(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=$((function(t){F(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t],o=1,i=0;for(;++i<e&&(o*=256);)n+=this[t+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=e,o=1,i=this[t+--n];for(;n>0&&(o*=256);)i+=this[t+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=$((function(t){F(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=$((function(t){F(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){C(this,t,e,r,Math.pow(2,8*r)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){C(this,t,e,r,Math.pow(2,8*r)-1,0)}let o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=$((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=$((function(t,e=0){return G(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,t,e,r,n-1,-n)}let o=0,i=1,a=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,t,e,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=$((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=$((function(t,e=0){return G(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,r){return K(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return K(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return D(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return D(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const o=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{const i=u.isBuffer(t)?t:u.from(t,n),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=i[o%a]}return this};const B={};function U(t,e,r){B[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function M(t,e,r,n,o,i){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new B.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,r){F(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,o,i)}function F(t,e){if("number"!=typeof t)throw new B.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw F(t,r),new B.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}U("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),U("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),U("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=j(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=j(o)),o+="n"),n+=` It must be ${e}. Received ${o}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(t,e){let r;e=e||1/0;const n=t.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,r,n){let o;for(o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function J(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function z(t){return t!=t}const Q=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)e[n+o]=t[r]+t[o]}return e}();function $(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},251:(t,e)=>{
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+t[e+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=c}return(p?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=y,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[r+p]=255&a,p+=y,a/=256,c-=8);t[r+p-y]|=128*d}},698:t=>{"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},861:(t,e,r)=>{var n=r(287),o=n.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return o(t,e,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=a),i(o,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=o(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},392:(t,e,r)=>{var n=r(861).Buffer;function o(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}o.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=n.from(t,e));for(var r=this._block,o=this._blockSize,i=t.length,a=this._len,s=0;s<i;){for(var u=a%o,c=Math.min(i-s,o-u),l=0;l<c;l++)r[u+l]=t[s+l];s+=c,(a+=c)%o==0&&this._update(r)}return this._len+=i,this},o.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,o=(r-n)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return t?i.toString(t):i},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=o},802:(t,e,r)=>{var n=t.exports=function(t){t=t.toLowerCase();var e=n[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};n.sha=r(816),n.sha1=r(737),n.sha224=r(710),n.sha256=r(107),n.sha384=r(827),n.sha512=r(890)},816:(t,e,r)=>{var n=r(698),o=r(392),i=r(861).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,o.call(this,64,56)}function c(t){return t<<30|t>>>2}function l(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<80;++f)r[f]=r[f-3]^r[f-8]^r[f-14]^r[f-16];for(var h=0;h<80;++h){var p=~~(h/20),y=0|((e=n)<<5|e>>>27)+l(p,o,i,s)+u+r[h]+a[p];u=s,s=i,i=c(o),o=n,n=y}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=i.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},737:(t,e,r)=>{var n=r(698),o=r(392),i=r(861).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,o.call(this,64,56)}function c(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function f(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)r[h]=t.readInt32BE(4*h);for(;h<80;++h)r[h]=(e=r[h-3]^r[h-8]^r[h-14]^r[h-16])<<1|e>>>31;for(var p=0;p<80;++p){var y=~~(p/20),d=c(n)+f(y,o,i,s)+u+r[p]+a[y]|0;u=s,s=i,i=l(o),o=n,n=d}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=i.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},710:(t,e,r)=>{var n=r(698),o=r(107),i=r(392),a=r(861).Buffer,s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}n(u,o),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},107:(t,e,r)=>{var n=r(698),o=r(392),i=r(861).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}function c(t,e,r){return r^t&(e^r)}function l(t,e,r){return t&e|r&(t|e)}function f(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function h(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}n(u,o),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,s=0|this._d,u=0|this._e,y=0|this._f,d=0|this._g,g=0|this._h,v=0;v<16;++v)r[v]=t.readInt32BE(4*v);for(;v<64;++v)r[v]=0|(((e=r[v-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[v-7]+p(r[v-15])+r[v-16];for(var m=0;m<64;++m){var E=g+h(u)+c(u,y,d)+a[m]+r[m]|0,S=f(n)+l(n,o,i)|0;g=d,d=y,y=u,u=s+E|0,s=i,i=o,o=n,n=E+S|0}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=y+this._f|0,this._g=d+this._g|0,this._h=g+this._h|0},u.prototype._hash=function(){var t=i.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},827:(t,e,r)=>{var n=r(698),o=r(890),i=r(392),a=r(861).Buffer,s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}n(u,o),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},890:(t,e,r)=>{var n=r(698),o=r(392),i=r(861).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}function c(t,e,r){return r^t&(e^r)}function l(t,e,r){return t&e|r&(t|e)}function f(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function h(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function y(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function d(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function v(t,e){return t>>>0<e>>>0?1:0}n(u,o),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,o=0|this._ch,i=0|this._dh,s=0|this._eh,u=0|this._fh,m=0|this._gh,E=0|this._hh,S=0|this._al,b=0|this._bl,A=0|this._cl,w=0|this._dl,O=0|this._el,T=0|this._fl,R=0|this._gl,L=0|this._hl,x=0;x<32;x+=2)e[x]=t.readInt32BE(4*x),e[x+1]=t.readInt32BE(4*x+4);for(;x<160;x+=2){var _=e[x-30],k=e[x-30+1],I=p(_,k),P=y(k,_),C=d(_=e[x-4],k=e[x-4+1]),N=g(k,_),G=e[x-14],Y=e[x-14+1],K=e[x-32],D=e[x-32+1],B=P+Y|0,U=I+G+v(B,P)|0;U=(U=U+C+v(B=B+N|0,N)|0)+K+v(B=B+D|0,D)|0,e[x]=U,e[x+1]=B}for(var j=0;j<160;j+=2){U=e[j],B=e[j+1];var M=l(r,n,o),F=l(S,b,A),q=f(r,S),H=f(S,r),V=h(s,O),X=h(O,s),W=a[j],J=a[j+1],z=c(s,u,m),Q=c(O,T,R),$=L+X|0,Z=E+V+v($,L)|0;Z=(Z=(Z=Z+z+v($=$+Q|0,Q)|0)+W+v($=$+J|0,J)|0)+U+v($=$+B|0,B)|0;var tt=H+F|0,et=q+M+v(tt,H)|0;E=m,L=R,m=u,R=T,u=s,T=O,s=i+Z+v(O=w+$|0,w)|0,i=o,w=A,o=n,A=b,n=r,b=S,r=Z+et+v(S=$+tt|0,$)|0}this._al=this._al+S|0,this._bl=this._bl+b|0,this._cl=this._cl+A|0,this._dl=this._dl+w|0,this._el=this._el+O|0,this._fl=this._fl+T|0,this._gl=this._gl+R|0,this._hl=this._hl+L|0,this._ah=this._ah+r+v(this._al,S)|0,this._bh=this._bh+n+v(this._bl,b)|0,this._ch=this._ch+o+v(this._cl,A)|0,this._dh=this._dh+i+v(this._dl,w)|0,this._eh=this._eh+s+v(this._el,O)|0,this._fh=this._fh+u+v(this._fl,T)|0,this._gh=this._gh+m+v(this._gl,R)|0,this._hh=this._hh+E+v(this._hl,L)|0},u.prototype._hash=function(){var t=i.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},436:(t,e,r)=>{t=r.nmd(t),(()=>{if(void 0!==r.g);else if("undefined"!=typeof window)window.global=window;else{if("undefined"==typeof self)throw new Error("cannot export Go (neither global, window nor self is defined)");self.global=self}const e=()=>{const t=new Error("not implemented");return t.code="ENOSYS",t};if(!r.g.fs){let t="";r.g.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(e,r){t+=o.decode(r);const n=t.lastIndexOf("\n");return-1!=n&&(t=t.substr(n+1)),r.length},write(t,r,n,o,i,a){if(0!==n||o!==r.length||null!==i)return void a(e());a(null,this.writeSync(t,r))},chmod(t,r,n){n(e())},chown(t,r,n,o){o(e())},close(t,r){r(e())},fchmod(t,r,n){n(e())},fchown(t,r,n,o){o(e())},fstat(t,r){r(e())},fsync(t,e){e(null)},ftruncate(t,r,n){n(e())},lchown(t,r,n,o){o(e())},link(t,r,n){n(e())},lstat(t,r){r(e())},mkdir(t,r,n){n(e())},open(t,r,n,o){o(e())},read(t,r,n,o,i,a){a(e())},readdir(t,r){r(e())},readlink(t,r){r(e())},rename(t,r,n){n(e())},rmdir(t,r){r(e())},stat(t,r){r(e())},symlink(t,r,n){n(e())},truncate(t,r,n){n(e())},unlink(t,r){r(e())},utimes(t,r,n,o){o(e())}}}r.g.process||(r.g.process={getuid:()=>-1,getgid:()=>-1,geteuid:()=>-1,getegid:()=>-1,getgroups(){throw e()},pid:-1,ppid:-1,umask(){throw e()},cwd(){throw e()},chdir(){throw e()}}),r.g.performance||(r.g.performance={now(){const[t,e]=process.hrtime();return 1e3*t+e/1e6}});const n=new TextEncoder("utf-8"),o=new TextDecoder("utf-8");let i=new DataView(new ArrayBuffer(8));var a=[];if(r.g.Go=class{constructor(){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;const t=()=>new DataView(this._inst.exports.memory.buffer),e=t=>{i.setBigInt64(0,t,!0);const e=i.getFloat64(0,!0);if(0===e)return;if(!isNaN(e))return e;const r=0xffffffffn&t;return this._values[r]},s=r=>{let n=t().getBigUint64(r,!0);return e(n)},u=t=>{const e=0x7FF80000n;if("number"==typeof t)return isNaN(t)?e<<32n:0===t?e<<32n|1n:(i.setFloat64(0,t,!0),i.getBigInt64(0,!0));switch(t){case void 0:return 0n;case null:return e<<32n|2n;case!0:return e<<32n|3n;case!1:return e<<32n|4n}let r=this._ids.get(t);void 0===r&&(r=this._idPool.pop(),void 0===r&&(r=BigInt(this._values.length)),this._values[r]=t,this._goRefCounts[r]=0,this._ids.set(t,r)),this._goRefCounts[r]++;let n=1n;switch(typeof t){case"string":n=2n;break;case"symbol":n=3n;break;case"function":n=4n}return r|(e|n)<<32n},c=(e,r)=>{let n=u(r);t().setBigUint64(e,n,!0)},l=(t,e,r)=>new Uint8Array(this._inst.exports.memory.buffer,t,e),f=(t,e,r)=>{const n=new Array(e);for(let r=0;r<e;r++)n[r]=s(t+8*r);return n},h=(t,e)=>o.decode(new DataView(this._inst.exports.memory.buffer,t,e)),p=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(e,r,n,i){let s=0;if(1==e)for(let e=0;e<n;e++){let n=r+8*e,i=t().getUint32(n+0,!0),u=t().getUint32(n+4,!0);s+=u;for(let e=0;e<u;e++){let r=t().getUint8(i+e);if(13==r);else if(10==r){o.decode(new Uint8Array(a));a=[]}else a.push(r)}}return t().setUint32(i,s,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:t=>{if(!r.g.process)throw"trying to exit with code "+t;process.exit(t)},random_get:(t,e)=>(crypto.getRandomValues(l(t,e)),0)},gojs:{"runtime.ticks":()=>p+performance.now(),"runtime.sleepTicks":t=>{setTimeout(this._inst.exports.go_scheduler,t)},"syscall/js.finalizeRef":r=>{const n=t().getUint32(e(r),!0);if(this._goRefCounts[n]--,0===this._goRefCounts[n]){const t=this._values[n];this._values[n]=null,this._ids.delete(t),this._idPool.push(n)}},"syscall/js.stringVal":(t,e)=>{const r=h(t,e);return u(r)},"syscall/js.valueGet":(t,r,n)=>{let o=h(r,n),i=e(t),a=Reflect.get(i,o);return u(a)},"syscall/js.valueSet":(t,r,n,o)=>{const i=e(t),a=h(r,n),s=e(o);Reflect.set(i,a,s)},"syscall/js.valueDelete":(t,r,n)=>{const o=e(t),i=h(r,n);Reflect.deleteProperty(o,i)},"syscall/js.valueIndex":(t,r)=>u(Reflect.get(e(t),r)),"syscall/js.valueSetIndex":(t,r,n)=>{Reflect.set(e(t),r,e(n))},"syscall/js.valueCall":(r,n,o,i,a,s,u)=>{const l=e(n),p=h(o,i),y=f(a,s);try{const e=Reflect.get(l,p);c(r,Reflect.apply(e,l,y)),t().setUint8(r+8,1)}catch(e){c(r,e),t().setUint8(r+8,0)}},"syscall/js.valueInvoke":(r,n,o,i,a)=>{try{const a=e(n),s=f(o,i);c(r,Reflect.apply(a,void 0,s)),t().setUint8(r+8,1)}catch(e){c(r,e),t().setUint8(r+8,0)}},"syscall/js.valueNew":(r,n,o,i,a)=>{const s=e(n),u=f(o,i);try{c(r,Reflect.construct(s,u)),t().setUint8(r+8,1)}catch(e){c(r,e),t().setUint8(r+8,0)}},"syscall/js.valueLength":t=>e(t).length,"syscall/js.valuePrepareString":(r,o)=>{const i=String(e(o)),a=n.encode(i);c(r,a),t().setInt32(r+8,a.length,!0)},"syscall/js.valueLoadString":(t,r,n,o)=>{const i=e(t);l(r,n).set(i)},"syscall/js.valueInstanceOf":(t,r)=>e(t)instanceof e(r),"syscall/js.copyBytesToGo":(r,n,o,i,a)=>{let s=r,u=r+4;const c=l(n,o),f=e(a);if(!(f instanceof Uint8Array||f instanceof Uint8ClampedArray))return void t().setUint8(u,0);const h=f.subarray(0,c.length);c.set(h),t().setUint32(s,h.length,!0),t().setUint8(u,1)},"syscall/js.copyBytesToJS":(r,n,o,i,a)=>{let s=r,u=r+4;const c=e(n),f=l(o,i);if(!(c instanceof Uint8Array||c instanceof Uint8ClampedArray))return void t().setUint8(u,0);const h=f.subarray(0,c.length);c.set(h),t().setUint32(s,h.length,!0),t().setUint8(u,1)}}},this.importObject.env=this.importObject.gojs}async run(t){this._inst=t,this._values=[NaN,0,null,!0,!1,r.g,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;new DataView(this._inst.exports.memory.buffer);for(;;){const t=new Promise((t=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(t,0)}}));if(this._inst.exports._start(),this.exited)break;await t}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(t){const e=this;return function(){const r={id:t,this:this,args:arguments};return e._pendingEvent=r,e._resume(),r.result}}},r.g.require&&r.g.require.main===t&&r.g.process&&r.g.process.versions&&!r.g.process.versions.electron){3!=process.argv.length&&process.exit(1);const t=new Go;WebAssembly.instantiate(fs.readFileSync(process.argv[2]),t.importObject).then((e=>t.run(e.instance))).catch((t=>{process.exit(1)}))}})()}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,r),i.loaded=!0,i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:String(r)}const o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.values={}}var r,n,o;return r=t,(n=[{key:"set",value:function(t,e){this.values[t]=e}},{key:"get",value:function(t){return!!this.values.hasOwnProperty(t)&&this.values[t]}}])&&e(r.prototype,n),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}()),i="./assets",a="./images",s="./locale",u={name:"Firefox",WebRTCAddon:{id:"@webrtc-leak-shield",url:"https://addons.mozilla.org/en-US/firefox/addon/webrtc-leak-shield"},proxyAddons:["@hoxx-vpn","@setupvpncom"],exceptionAddons:["mozilla_cc3@internetdownloadmanager.com"]},c=JSON.parse('{"version":4,"update_interval_hours":6,"settings":{"tierbase_search_timeout":15000,"mainbase_search_timeout":20000,"tierbase_api_timeout":35000,"mainbase_api_timeout":30000,"proxy_search_timeout":30000,"mirror_timeout":20000,"base_ttl_days":90,"bs_consequtive_fails":42},"uibase":["https://account1.hoxx.net","https://account2.hoxx.net","https://account3.hoxx.net","https://account4.hoxx.net","https://account5.hoxx.net","https://account6.hoxx.net","https://account7.hoxx.net","https://account8.hoxx.net","https://account9.hoxx.net","https://account10.hoxx.net","https://account11.hoxx.net","https://account12.hoxx.net","https://account13.hoxx.net","https://account14.hoxx.net","https://account15.hoxx.net"],"mainbase":["https://wgle.denied-garcia.pics","https://eukj.exclude.pics","https://ycyu.surprise.pics","https://vsxm.denied-garcia.pics","https://okog.surprise.pics","https://fhhb.exclude.pics","https://severity.uk","https://sublimity.uk","https://flyingsq.uk","https://curlybeauty.uk","https://therewego.uk","https://1.openips.cc"],"tierbase":["https://nytw.surprise.pics","https://fwlu.surprise.pics","https://bwxm.exclude.pics","https://pkcw.exclude.pics","https://qidx.surprise.pics","https://eggx.surprise.pics","https://nvne.surprise.pics","https://api.doneverdrop.com","https://1.saferip.uk","https://solarsie.com","https://scandiums.org","https://vanadiums.org","https://phosphorusonline.com"],"t":1718992944158,"mirrors":["https://tierbase3.fra1.cdn.digitaloceanspaces.com/tiershx.json","https://tierbase4.s3.amazonaws.com/tiershx.json","https://pub-8029ed10cf4e4db0b3757e6b82ef7a40.r2.dev/tiershx.json","https://ams1.vultrobjects.com/tierupdate2/tiershx.json","https://mirror4.es-mad-1.linodeobjects.com/tiershx.json","https://raw.githubusercontent.com/the7c/update/master/src/js/data.json","https://bitbucket.org/the7c/update/raw/master/ip/ens4/data.json"]}'),l={VERSION:chrome.runtime.getManifest().version,PLATFORM:u.name,BROWSERLANG:chrome.i18n.getUILanguage(),SERVERSJSONFILE:i+"/servers.json",TIERUPDATETTL:86400,VERSIONSTATUSTTL:86400,UNINSTALLPATH:"/api2/pub/uinstalled",TESTREQUESTREGEX:/http:\/\/test[0-9]{6,12}\.io/,SERVICE:"Hoxx VPN",SERVICESHORT:"hoxx",SHORTNAME:"hx",REALM:"hoxx.com",CONTACTSUPPORTURL:"https://hoxx.com/support/",PACSCRIPT:"js/PAC.js",DOWNLOADLINKS:{ANDROID:"https://play.google.com/store/apps/details?id=com.hoxxvpn.main",DESKTOP:"http://desktopclient.net/gw/index.html#/hoxx"},RATEUS:{LINKS:{FIREFOX:"https://addons.mozilla.org/en-US/firefox/addon/hoxx-vpn-proxy/reviews/",CHROME:"https://chrome.google.com/webstore/detail/hoxx-vpn-proxy/nbcojefnccbanplpoffopkoepjmhgdgh/reviews",EDGE:!1},INTERVAL:2592e5,DONTASKINTERVAL:7776e6},WEBRTCADDON:{URL:u.WebRTCAddon.url,ID:u.WebRTCAddon.id},PROXYADDONS:u.proxyAddons,EXCEPTIONADDONS:u.exceptionAddons,STORAGEKEYS:{BASELINK:"baselink",LASTBASELINK:"lastBaselink",BASELINKNOTFOUND:"baselinkNotFound",LOCALE:"locale",LANGUAGE:"language",USERDATA:"userData",CONFIGDATA:"configData",CONFIGDATATTL:"configDataTTL",PROXYSEARCHFAILED:"proxySearchFailed",PROXYSEARCHFAILEDCOUNTRY:"proxySearchFailedCountry",PROXYSEARCHLOCK:"proxySearchLock",ISPROXYON:"isProxyOn",CURRENTPROXY:"currentSelectedProxy",DCACHE:"dCache",NOTIFICATIONS:"cachedNotifications",RATEUSNEXTTIME:"ratingNextTime",PROXYEXTENSIONS:"activeProxyExtensionList",IPLOOKUPURL:"ipLookUpUrl",STICKEDCOUNTRIES:"stickedCountries",ISCOUNTRYSORTED:"isCountrySorted",LASTSELECTEDTAB:"lastSelectedTab",BYPASSLIST:"bypassList",CONNECTIONNOTIFICATION:"connectionNotification",LASTLOGINRESULT:"lastLoginResult",IID:"iid",TIID:"tiid",LASTRESENDACTIVATION:"lastResendActivation",SERVERSJSON:"serversJson",TIERNEXTUPDATE:"tierNextUpdate",ERRCACHE:"errCache",ECACHE:"eCache",RCACHE:"rCache",HASHCACHE:"hashCache",BASELINKTYPE:"baselinkType",DEBUGVAL:"debugVal",TIMEOUTSETTINGS:"timeoutSettings",TEASERNEXT:"teaserNext",VERSIONSTATUSNEXTUPDATE:"versionStatusNextTime",VERSIONSTATUS:"versionStatus",LOGINTYPE:"logintype",LSER:"localeLser",COUNTRYLOCALE:"countryLocale",CONFIGHARDTTL:"configHardTTL",LASTLOGOUTREASON:"lastLogoutReason",COUNTRYSESSIONSTATE:"countrySessionState",LASTFAILEDSERVER:"lastFailedServer",SHOWWELCOME:"showWelcomePage",LASTBEAT:"lastBeat",BYPASSINGHOSTS:"bypassingHosts",SHOWPROXYWARNING:"showProxyWarning",LASTBASELINKTTL:"lastBaselinkTTL",VERSIONUPDATE:"versionUpdate",USERNOTIFICATION:"userNotification",NOTIFICATIONHISTORY:"notificationHistory",MARKEDBASELINK:"markBaselink",MARKEDCONFIG:"markedConfig",LASTSESSION:"lastSession",PROXYSEARCH:"proxySearch",TIMEEXPIRED:"timeexpired",TLEFT:"tleft"},STATUS:{BLOCKED:"BLOCKED",OK:"OK"},IMAGES:{ONICON:a+"/symbol48.png",OFFICON:a+"/symbol-disabled48.png",HEADERLOGO:a+"/logo-header.png",LOGOLARGE:a+"/logo.png",FEATUREPINGIF:"/cdn/feature_pin.gif",FEATURESORTGIF:"/cdn/feature_sorting.gif",PERMERRORICON:a+"/symbol48-permission-error.png",PERMFIXGIF:"/api2/static/hx/permission-fix.gif",OTHERTOOLSGIF:"/cdn/other-tools.gif"},SERVERSJSON:c,ERRORCODES:{CONNECTIONERROR:"NS_ERROR_NET_ON_CONNECTING_TO",CONNECTIONERROR2:"NS_ERROR_PROXY_CONNECTION_REFUSED",VERIFYERROR:"NS_ERROR_NET_ON_RESOLVED",VERIFYERROR2:"NS_ERROR_UNKNOWN_HOST"},LOADINGIMG:'<img src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==">'},f={PING:"/api2/p",TIER:"/api2/t/u",LANGUAGELIST:"/api2/l/l",GETLOCALE:"/api2/l/g",CONFIG:"/api/c/e",TICKETTOKEN:"/api/misc/persist",REST:"/api",REST2:"/api2",FORGOTPASS:"/api2/user/forgotpassword",PRODUCTS:"/api2/i/p",PROFILE:"/api/user/profile",AUTOPROXY:"/api2/m/debug",FEEDBACK:"/api2/m/feedback",NOTIFICATION:"/api/user/profile/notification",SUPPORT:"/api2/pub/support/fw",DISCONNECTS:"/api/misc/disconnects",RESENDACTIVATION:"/api/user/activation/resend",CLOSEACCOUNT:"/api2/user/closeaccount",TRIAL:"/api2/user/trial",CLIENTUPDATES:"/api2/cu",CREATEACCOUNT:"/api2/r/email",LOGINAUTHCODE:"/api2/c/2",WELCOMEPAGE:"/api2/wp",CREATETICKET:"/api2/support/ticket/new",CLIENT3:"/api2/c/3"},h=1e4,p=15e3,y=2e4,d=25e3,g=1e4,v=3e4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},m(t,e)};function E(t,e){function r(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var S=function(){return S=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},S.apply(this,arguments)};function b(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var w=function(){function t(t){void 0===t&&(t={}),this.adapter=t}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}();
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var O=function(){function t(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this.root=t,this.initialize.apply(this,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(A(arguments[e]));return t}(r)),this.foundation=void 0===e?this.getDefaultFoundation():e,this.foundation.init(),this.initialSyncWithDOM()}return t.attachTo=function(e){return new t(e,new w({}))},t.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},t.prototype.initialSyncWithDOM=function(){},t.prototype.destroy=function(){this.foundation.destroy()},t.prototype.listen=function(t,e,r){this.root.addEventListener(t,e,r)},t.prototype.unlisten=function(t,e,r){this.root.removeEventListener(t,e,r)},t.prototype.emit=function(t,e,r){var n;void 0===r&&(r=!1),"function"==typeof CustomEvent?n=new CustomEvent(t,{bubbles:r,detail:e}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,r,!1,e),this.root.dispatchEvent(n)},t}();
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var T={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};function R(t){return Boolean(t.document)&&"function"==typeof t.document.createElement}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var L={CLOSED_CLASS:"mdc-linear-progress--closed",CLOSED_ANIMATION_OFF_CLASS:"mdc-linear-progress--closed-animation-off",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed",ANIMATION_READY_CLASS:"mdc-linear-progress--animation-ready"},x={ARIA_VALUEMAX:"aria-valuemax",ARIA_VALUEMIN:"aria-valuemin",ARIA_VALUENOW:"aria-valuenow",BUFFER_BAR_SELECTOR:".mdc-linear-progress__buffer-bar",FLEX_BASIS:"flex-basis",PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar"},_=.8367142,k=2.00611057,I=.37651913,P=.84386165,C=1.60277782,N=function(t){function e(r){var n=t.call(this,S(S({},e.defaultAdapter),r))||this;return n.observer=null,n}return E(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return L},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return x},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},attachResizeObserver:function(){return null},forceLayout:function(){},getWidth:function(){return 0},hasClass:function(){return!1},setBufferBarStyle:function(){return null},setPrimaryBarStyle:function(){return null},setStyle:function(){},removeAttribute:function(){},removeClass:function(){},setAttribute:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this;this.isDeterminate=!this.adapter.hasClass(L.INDETERMINATE_CLASS),this.adapter.addClass(L.ANIMATION_READY_CLASS),this.progress=0,this.buffer=1,this.observer=this.adapter.attachResizeObserver((function(e){var r,n;if(!t.isDeterminate)try{for(var o=b(e),i=o.next();!i.done;i=o.next()){var a=i.value;a.contentRect&&t.calculateAndSetDimensions(a.contentRect.width)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}})),!this.isDeterminate&&this.observer&&this.calculateAndSetDimensions(this.adapter.getWidth())},e.prototype.setDeterminate=function(t){if(this.isDeterminate=t,this.isDeterminate)return this.adapter.removeClass(L.INDETERMINATE_CLASS),this.adapter.setAttribute(x.ARIA_VALUENOW,this.progress.toString()),this.adapter.setAttribute(x.ARIA_VALUEMAX,"1"),this.adapter.setAttribute(x.ARIA_VALUEMIN,"0"),this.setPrimaryBarProgress(this.progress),void this.setBufferBarProgress(this.buffer);this.observer&&this.calculateAndSetDimensions(this.adapter.getWidth()),this.adapter.addClass(L.INDETERMINATE_CLASS),this.adapter.removeAttribute(x.ARIA_VALUENOW),this.adapter.removeAttribute(x.ARIA_VALUEMAX),this.adapter.removeAttribute(x.ARIA_VALUEMIN),this.setPrimaryBarProgress(1),this.setBufferBarProgress(1)},e.prototype.getDeterminate=function(){return this.isDeterminate},e.prototype.setProgress=function(t){this.progress=t,this.isDeterminate&&(this.setPrimaryBarProgress(t),this.adapter.setAttribute(x.ARIA_VALUENOW,t.toString()))},e.prototype.getProgress=function(){return this.progress},e.prototype.setBuffer=function(t){this.buffer=t,this.isDeterminate&&this.setBufferBarProgress(t)},e.prototype.open=function(){this.adapter.removeClass(L.CLOSED_CLASS),this.adapter.removeClass(L.CLOSED_ANIMATION_OFF_CLASS)},e.prototype.close=function(){this.adapter.addClass(L.CLOSED_CLASS)},e.prototype.handleTransitionEnd=function(){this.adapter.hasClass(L.CLOSED_CLASS)&&this.adapter.addClass(L.CLOSED_ANIMATION_OFF_CLASS)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.observer&&this.observer.disconnect()},e.prototype.restartAnimation=function(){this.adapter.removeClass(L.ANIMATION_READY_CLASS),this.adapter.forceLayout(),this.adapter.addClass(L.ANIMATION_READY_CLASS)},e.prototype.setPrimaryBarProgress=function(t){var e="scaleX("+t+")",r="undefined"!=typeof window?function(t,e){if(R(t)&&e in T){var r=t.document.createElement("div"),n=T[e],o=n.standard,i=n.prefixed;return o in r.style?o:i}return e}(window,"transform"):"transform";this.adapter.setPrimaryBarStyle(r,e)},e.prototype.setBufferBarProgress=function(t){var e=100*t+"%";this.adapter.setBufferBarStyle(x.FLEX_BASIS,e)},e.prototype.calculateAndSetDimensions=function(t){var e=t*_,r=t*k,n=t*I,o=t*P,i=t*C;this.adapter.setStyle("--mdc-linear-progress-primary-half",e+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-half-neg",-e+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-full",r+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-full-neg",-r+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-quarter",n+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-quarter-neg",-n+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-half",o+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-half-neg",-o+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-full",i+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-full-neg",-i+"px"),this.restartAnimation()},e}(w);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.attachTo=function(t){return new e(t)},Object.defineProperty(e.prototype,"determinate",{set:function(t){this.foundation.setDeterminate(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{set:function(t){this.foundation.setProgress(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{set:function(t){this.foundation.setBuffer(t)},enumerable:!0,configurable:!0}),e.prototype.open=function(){this.foundation.open()},e.prototype.close=function(){this.foundation.close()},e.prototype.initialSyncWithDOM=function(){var t=this;this.root.addEventListener("transitionend",(function(){t.foundation.handleTransitionEnd()}))},e.prototype.getDefaultFoundation=function(){var t=this;return new N({addClass:function(e){t.root.classList.add(e)},forceLayout:function(){t.root.getBoundingClientRect()},setBufferBarStyle:function(e,r){var n=t.root.querySelector(N.strings.BUFFER_BAR_SELECTOR);n&&n.style.setProperty(e,r)},setPrimaryBarStyle:function(e,r){var n=t.root.querySelector(N.strings.PRIMARY_BAR_SELECTOR);n&&n.style.setProperty(e,r)},hasClass:function(e){return t.root.classList.contains(e)},removeAttribute:function(e){t.root.removeAttribute(e)},removeClass:function(e){t.root.classList.remove(e)},setAttribute:function(e,r){t.root.setAttribute(e,r)},setStyle:function(e,r){t.root.style.setProperty(e,r)},attachResizeObserver:function(e){var r=window.ResizeObserver;if(r){var n=new r(e);return n.observe(t.root),n}return null},getWidth:function(){return t.root.offsetWidth}})},e}(O);function Y(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Y=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:R(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",g={};function v(){}function m(){}function E(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(I([])));A&&A!==r&&n.call(A,a)&&(S=A);var w=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==B(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function R(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?d:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(B(e)+" is not iterable")}return m.prototype=E,o(w,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:m,configurable:!0}),m.displayName=c(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function K(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function D(t,e,r){return(e=j(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}function j(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B(e)?e:String(e)}var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isValidExtenionObj=this.isValidExtenionObj.bind(this),this.getProxyExtData=this.getProxyExtData.bind(this)}var e,r,n,o,i;return e=t,r=[{key:"isEmpty",value:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},{key:"shuffleArray",value:function(t){for(var e,r,n=t.length;n;e=Math.floor(Math.random()*n),r=t[--n],t[n]=t[e],t[e]=r);return t}},{key:"loadTemplate",value:function(t,e){var r=t,n=t.match(/(?:\{)[^\{\}]*?(?:\})/g);return n?(n.forEach((function(t){var n=t.replace("{","").replace("}","");e[n]&&(r=r.replace(t,e[n]))})),r):r}},{key:"loadTemplateWithFallback",value:function(t,e,r){var n=t;return n=this.loadTemplate(t,e),n=this.loadTemplate(n,r)}},{key:"isObject",value:function(t){return"object"===B(t)&&null!==t}},{key:"isString",value:function(t){return"[object String]"===Object.prototype.toString.call(t)}},{key:"getFallbackLocale",value:function(t,e,r){return this.isObject(e)&&e.hasOwnProperty(t)&&this.isString(e[t])?e[t]:this.isObject(r)&&r.hasOwnProperty(t)&&this.isString(r[t])?r[t]:"Undefined locale"}},{key:"getConfigTTL",value:function(t,e){var r=e;return t&&Number.isInteger(t)&&(r=Math.min(Math.max(5,t),120)),Math.floor(Date.now()/1e3)+60*r}},{key:"getLocaleInStorage",value:function(){return new Promise((function(t,e){chrome.storage.local.get(l.STORAGEKEYS.LOCALE,(function(r){if(r[l.STORAGEKEYS.LOCALE])return t(r[l.STORAGEKEYS.LOCALE]);e()}))}))}},{key:"isUserPremium",value:function(t){if(0==t.user_premium)return!1;Date.now||(Date.now=function(){return(new Date).getTime()});var e=Math.floor(Date.now()/1e3);return t.user_premium>e}},{key:"getUserExpirationData",value:function(t){var e=new Date(1e3*t),r=e.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];return e.getDate()+". "+n+" "+r}},{key:"getRandomInt",value:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}},{key:"getRandomRange",value:function(){var t={s:1e5,e:1e11};try{var e=this.getRandomInt(6,12),r=parseInt("1".padEnd(e,"0")),n=parseInt("9".padEnd(e,"9"));return t.s=r,t.e=n,t}catch(e){return t}return t}},{key:"generateIdentifierDomain",value:function(){var t=this.getRandomRange();return"test"+this.getRandomInt(t.s,t.e)}},{key:"getDateNow",value:function(){return Math.floor(Date.now()/1e3)}},{key:"getDateMid",value:function(){return Math.floor((new Date).setUTCHours(0,0,0,0)/1e3)}},{key:"openNewTab",value:function(t){chrome.tabs.create({url:t})}},{key:"setProxyStatusIcon",value:function(t){var e=t?l.IMAGES.ONICON:l.IMAGES.OFFICON;chrome.browserAction.setIcon({path:{38:e}})}},{key:"setPermissionIcon",value:function(t){var e=t?l.IMAGES.OFFICON:l.IMAGES.PERMERRORICON;chrome.browserAction.setIcon({path:{38:e}})}},{key:"showConnectionNotification",value:function(t,e,r){var n={type:"basic",title:t,message:e,iconUrl:r?l.IMAGES.ONICON:l.IMAGES.OFFICON};chrome.storage.local.get([l.STORAGEKEYS.CONNECTIONNOTIFICATION,l.STORAGEKEYS.CONFIGDATA],(function(t){var e=t[l.STORAGEKEYS.CONFIGDATA],r=e&&e.uid?e.uid:"",o=t[l.STORAGEKEYS.CONNECTIONNOTIFICATION];o&&!1===o[r]||chrome.notifications.create(n)}))}},{key:"showNotification",value:function(t,e){var r={type:"basic",title:t,message:e,iconUrl:l.IMAGES.ONICON};chrome.notifications.create(r)}},{key:"removePort",value:function(t){return t&&t.indexOf(":")>-1?t.substring(0,t.indexOf(":")):t}},{key:"escapeParamsOfUrl",value:function(t){var e=""+t;return e.indexOf("?")>-1&&(e=e.substr(0,e.indexOf("?"))),e}},{key:"addMetaParameter",value:function(t){return t+"&cv="+l.VERSION+"&platform="+l.PLATFORM}},{key:"getRemainingTime",value:function(t,e){if(t>1){var r=t-Math.floor(Date.now()/1e3);return r<3600?Math.floor(r/60)+" "+e.tempBlockMinutes:Math.floor(r/3600)+" "+e.tempBlockHours}return 0}},{key:"hideElement",value:function(t){t&&t.css&&t.css("display","none")}},{key:"showElement",value:function(t){t&&t.css&&t.css("display","block")}},{key:"stripProtocol",value:function(t){return t.replace("http://","").replace("https://","")}},{key:"sortObject",value:function(t){return Object.keys(t).sort().reduce((function(e,r){return e[r]=t[r],e}),{})}},{key:"getTabIdByServerType",value:function(t){if(!t)return 0;switch(t){case 0:return 0;case 1:return 1;case 2:return 2}}},{key:"openPlatformLink",value:function(t){return"desktop"===t?this.openNewTab(l.DOWNLOADLINKS.DESKTOP):"android"===t?this.openNewTab(l.DOWNLOADLINKS.ANDROID):void 0}},{key:"createUniqueId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}},{key:"setIID",value:function(){var t=this;chrome.storage.local.get([l.STORAGEKEYS.IID],(function(e){if(!e[l.STORAGEKEYS.IID]){var r=t.createUniqueId(),n=new Date/1;chrome.storage.local.set(D(D({},l.STORAGEKEYS.IID,r),l.STORAGEKEYS.TIID,n))}}))}},{key:"isInt",value:function(t){return!isNaN(t)&&(0|(e=parseFloat(t)))===e;var e}},{key:"hex_encode",value:function(t){t=unescape(encodeURIComponent(t));for(var e="",r=0;r<t.length;r++)e+=t.charCodeAt(r).toString(16);return e}},{key:"xor_string",value:function(t,e){t=t.split(""),e=e.split("");for(var r=t.length,n=e.length,o=String.fromCharCode,i=0;i<r;i++)t[i]=o(t[i].charCodeAt(0)^e[i%n].charCodeAt(0));return t.join("")}},{key:"randomString",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}},{key:"toqs",value:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}},{key:"getTimeoutSettings",value:function(t){var e={mainbase_search_timeout:h,tierbase_search_timeout:p,mainbase_api_timeout:y,tierbase_api_timeout:d,proxy_search_timeout:g};try{t&&void 0!==t.settings&&(t.settings.hasOwnProperty("mainbase_search_timeout")&&this.isInt(t.settings.mainbase_search_timeout)&&t.settings.mainbase_search_timeout>=1e4&&t.settings.mainbase_search_timeout<4e4&&(e.mainbase_search_timeout=parseInt(t.settings.mainbase_search_timeout)),t.settings.hasOwnProperty("tierbase_search_timeout")&&this.isInt(t.settings.tierbase_search_timeout)&&t.settings.tierbase_search_timeout>=1e4&&t.settings.tierbase_search_timeout<4e4&&(e.tierbase_search_timeout=parseInt(t.settings.tierbase_search_timeout)),t.settings.hasOwnProperty("mainbase_api_timeout")&&this.isInt(t.settings.mainbase_api_timeout)&&t.settings.mainbase_api_timeout>=1e4&&t.settings.mainbase_api_timeout<4e4&&(e.mainbase_api_timeout=parseInt(t.settings.mainbase_api_timeout)),t.settings.hasOwnProperty("tierbase_api_timeout")&&this.isInt(t.settings.tierbase_api_timeout)&&t.settings.tierbase_api_timeout>=1e4&&t.settings.tierbase_api_timeout<4e4&&(e.tierbase_api_timeout=parseInt(t.settings.tierbase_api_timeout)),t.settings.hasOwnProperty("proxy_search_timeout")&&this.isInt(t.settings.proxy_search_timeout)&&t.settings.proxy_search_timeout>=1e4&&t.settings.proxy_search_timeout<4e4&&(e.proxy_search_timeout=parseInt(t.settings.proxy_search_timeout)))}catch(t){return e}return e}},{key:"isTimeoutSettingValid",value:function(t){return!!(t&&this.isInt(t)&&t>=1e4&&t<6e4)}},{key:"isTrialAvailable",value:function(t){return!!(t&&t.hasOwnProperty("trial")&&this.isInt(t.trial)&&t.trial>0)&&t.trial}},{key:"getUpdateHtml",value:function(t,e){return'\n\t\t\t\t<div class="update-available" id="update-app">\n\t\t\t\t\t<div class="update-available__title"><span class="update-available__notification">1</span> NEW UPDATE AVAILABLE</div>\n\t\t\t\t\t<div class="update-available__content">\n\t\t\t\t\t\t<div class="update-available__content__app">\n\t\t\t\t\t\t\t<div class="update-available__content__app__icon">\n\t\t\t\t\t\t\t\t<img src="images/symbol25.png">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="update-available__content__app__version-info">\n\t\t\t\t\t\t\t\t<div style="color: red;">Your version: '.concat(t,'</div>\n\t\t\t\t\t\t\t\t<div style="color: #007aff;">New version: ').concat(e,'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="update-available__content__app__update">\n\t\t\t\t\t\t\t\t<div class="btn--update">UPDATE</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t')}},{key:"isValidResponse",value:function(t){return t&&"object"===B(t)&&null!==t&&t.hasOwnProperty("retcode")}},{key:"isResponseMinus20",value:function(t){return this.isValidResponse(t)&&-20===t.retcode}},{key:"isResponse200",value:function(t){return this.isValidResponse(t)&&200===t.retcode}},{key:"isResponseMinusOne",value:function(t){return this.isValidResponse(t)&&-1===t.retcode}},{key:"isResponseAuthError",value:function(t){return this.isValidResponse(t)&&-4===t.retcode}},{key:"isMaintenanceMode",value:function(t){return this.isValidResponse(t)&&-500===t.retcode}},{key:"showMinusOneError",value:function(t){this.isFunction(t)&&t("Something went wrong. Please try later again.")}},{key:"isFunction",value:function(t){return t&&"[object Function]"==={}.toString.call(t)}},{key:"getOS",value:function(){return new Promise((function(t){try{chrome&&chrome.runtime&&chrome.runtime.getPlatformInfo?chrome.runtime.getPlatformInfo((function(e){var r="-";e&&e.os&&"string"==typeof e.os&&(r=e.os.toLowerCase()),t(r)})):t("-")}catch(e){t("-")}}))}},{key:"b64_to_utf8",value:function(t){return decodeURIComponent(escape(atob(t)))}},{key:"getLoading",value:function(){return'<div id="response-loading" role="progressbar" style="display: block;" class="mdc-linear-progress mdc-linear-progress--indeterminate" aria-label="Loading Bar" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0">\n\t\t\t<div class="mdc-linear-progress__buffer">\n\t\t\t  <div class="mdc-linear-progress__buffer-bar"></div>\n\t\t\t  <div class="mdc-linear-progress__buffer-dots"></div>\n\t\t\t</div>\n\t\t\t<div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">\n\t\t\t  <span class="mdc-linear-progress__bar-inner"></span>\n\t\t\t</div>\n\t\t\t<div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">\n\t\t\t  <span class="mdc-linear-progress__bar-inner"></span>\n\t\t\t</div>\n\t\t\t</div>'}},{key:"loadLocaleFromServer",value:function(t,e,r,n,o,i){var a=this;t.append(a.getLoading()),new G(document.querySelector(".mdc-linear-progress")),n.request("api","getLocale",{}).then((function(t){function r(t){var r="<p style='text-align:center; padding: 10px 10xp;'>"+t+" / "+o+"</p>";e.css("display","block"),e.html(r)}return i("#response-loading").css({display:"none"}),a.isResponse200(t)&&window.location.reload(!0),a.isResponseMinus20(t)?r(t.message):a.isResponseMinusOne(t)?a.showMinusOneError(r):void(a.isMaintenanceMode(t)&&(e.html('<div style="display: block;" id="maintenance-mode" class="maintenance-mode"><i class="material-icons maintenance-mode__close" id="maintenance-mode-close-icon">close</i><div class="maintenance-mode__container"><div class="maintenance-mode__icon"><i class="material-icons">build</i></div><div id="maintenance-msg" class="maintenance-mode__message"></div></div></div>'),i("#maintenance-msg").text(t.message),i("#maintenance-mode-close-icon").click((function(){location.reload()})),i("#upgrade-mode").css("display","none"),i("#dashboard-view-mode").css("display","block"),i("#header-container").css("display","none")))}))}},{key:"loadCountryLocale",value:function(t){var e=this;return new Promise((function(r,n){chrome.storage.local.get([l.STORAGEKEYS.COUNTRYLOCALE,l.STORAGEKEYS.LANGUAGE],(function(n){var o=n[l.STORAGEKEYS.COUNTRYLOCALE];if(o&&e.isObject(o))r(o);else{var i=n[l.STORAGEKEYS.LANGUAGE];t.request("api","getCountryLocale",{langCode:i}).then((function(t){t&&e.isObject(t)?r(t):r({})}))}}))}))}},{key:"isUrlLocal",value:function(t){try{var e=new URL(t);return!(!["localhost","127.0.0.1","intranet"].includes(e.hostname)&&!e.hostname.match(/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/))}catch(t){return!0}}},{key:"genBypassList",value:function(t){try{if(t&&this.isObject(t)&&t.hasOwnProperty("mainbase")&&Array.isArray(t.mainbase)){var e=[];return t.mainbase.forEach((function(t){var r=!1;try{var n=new URL(t);n&&n.hostname&&(r=n.hostname)}catch(t){}r&&(e.includes(r)||e.push(r))})),e}return[]}catch(t){return[]}}},{key:"isValidExtenionObj",value:function(t){return t&&this.isObject(t)&&t.hasOwnProperty("enabled")&&t.hasOwnProperty("id")}},{key:"getProxyExtData",value:(o=Y().mark((function t(e){var r,n,o,i,a,s;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,n={allProxyExt:[],enabledProxyExt:[]},t.prev=2,t.next=5,e.getProxyExtensions();case 5:return o=t.sent,i=o.filter((function(t){return r.isValidExtenionObj(t)})),a=i.filter((function(t){return t.enabled})),s=i.map((function(t,e){var r=t&&t.hasOwnProperty("icons")&&Array.isArray(t.icons)&&t.icons.length>0?t.icons[t.icons.length-1].url:"",n='<li class="mdc-list-item" style="padding-left: 0px; padding-right: 0px;" '.concat(0==e?'tabindex="0"':"",' >\n\t\t\t\t\t\t\t<span class="mdc-list-item__graphic"><img width="40" height="40" src="').concat(r,'"></span>\n\t\t\t\t\t\t\t<span class="mdc-list-item__text">\n\t\t\t\t\t\t\t\t<span class="mdc-list-item__primary-text">').concat(t.name,'</span>\n\t\t\t\t\t\t\t\t<span class="mdc-list-item__secondary-text">\n\t\t\t\t\t\t\t\t\t').concat(t.enabled?"<span style='color: red;'>Enabled</span>":"<span style='color: green;'>Disabled</span>",'\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="mdc-list-item__meta">\n\t\t\t\t\t\t\t\t').concat(function(t,e){return e?"FIREFOX"==l.PLATFORM.toUpperCase()?'<div id="ext-switch-'.concat(t,'" class="mdc-switch mdc-switch--checked">\n\t\t\t\t\t\t\t\t\t\tGo to about:addons to disable\n\t\t\t\t\t\t\t\t\t</div>'):'<div id="ext-switch-'.concat(t,'" class="mdc-switch mdc-switch--checked">\n\t\t\t\t\t\t\t\t\t<div class="mdc-switch__track"></div>\n\t\t\t\t\t\t\t\t\t<div class="mdc-switch__thumb-underlay">\n\t\t\t\t\t\t\t\t\t<div class="mdc-switch__thumb"></div>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="mdc-switch__native-control" role="switch" checked>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>'):'<span class="material-icons" style="color:green">done</span>'}(e,t.enabled),"\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>");return Object.assign({},t,{html:n})})),t.abrupt("return",{allProxyExt:s,enabledProxyExt:a});case 12:return t.prev=12,t.t0=t.catch(2),t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,this,[[2,12]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){K(i,r,n,a,s,"next",t)}function s(t){K(i,r,n,a,s,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"getServersJsonTime",value:function(t){return t&&""!=t&&t.hasOwnProperty("t")&&!isNaN(parseInt(t.t))?parseInt(t.t):0}},{key:"promiseTimeout",value:function(t){return new Promise((function(e){setTimeout((function(){e("TIMEOUT")}),t)}))}},{key:"promiseRace",value:function(t){return new Promise((function(e,r){Promise.race(t).then((function(t){e(t)}))}))}},{key:"setStorage",value:function(t){return new Promise((function(e,r){chrome.storage.local.set(t,e)}))}},{key:"getStorage",value:function(t){return new Promise((function(e,r){chrome.storage.local.get(t,e)}))}},{key:"removeStorage",value:function(t){return new Promise((function(e,r){chrome.storage.local.remove(t,e)}))}},{key:"addClickEvent",value:function(t,e){try{if(!e)return t;var r=new URL(t);return r.searchParams.append("c",e),r.href}catch(e){return t}}},{key:"fixMacScroll",value:function(t){chrome.runtime.getPlatformInfo((function(e){if(e&&e.os&&"mac"==e.os){var r=t("<style>\n\t\t\t\t\t::-webkit-scrollbar {\n\t\t\t\t\t\t-webkit-appearance: none;\n\t\t\t\t\t\twidth: 7px;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t::-webkit-scrollbar-thumb {\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tbackground-color: rgba(0, 0, 0, .5);\n\t\t\t\t\t\tbox-shadow: 0 0 1px rgba(255, 255, 255, .5);\n\t\t\t\t\t}\n\t\t\t\t\t</style>");t("html > head").append(r)}}))}},{key:"delConfig",value:function(){return new Promise((function(t,e){chrome.storage.local.remove(l.STORAGEKEYS.CONFIGDATA,t)}))}}],r&&U(e.prototype,r),n&&U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const F=new M;function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function H(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */H=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:R(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",g={};function v(){}function m(){}function E(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(I([])));A&&A!==r&&n.call(A,a)&&(S=A);var w=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==q(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function R(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?d:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(q(e)+" is not iterable")}return m.prototype=E,o(w,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:m,configurable:!0}),m.displayName=c(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function V(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function X(t,e,r,n){var o=new XMLHttpRequest,i=new Promise((function(i,a){var s=t+f.PING,u=F.randomString(Math.round(3+61*Math.random()));function c(e){n({url:s,baselink:t,isWorking:e}),i({url:s,baselink:t,isWorking:e})}o.open("POST",s,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.setRequestHeader("Authorization","Basic "+btoa(u+":"+F.randomString(Math.round(3+5*Math.random())))),o.timeout=e?r.tierbase_search_timeout:r.mainbase_search_timeout,o.ontimeout=function(){},o.onreadystatechange=function(){if(4==o.readyState){if(200!=o.status)return c(!1);var t="";try{var e=F.xor_string(atob(o.responseText),u);return(t=JSON.parse(e))&&200===t.retcode?c(!0):c(!1)}catch(t){return c(!1)}}},chrome.storage.local.get([l.STORAGEKEYS.USERDATA],(function(t){var e=t[l.STORAGEKEYS.USERDATA];F.getOS().then(function(){var t,r=(t=H().mark((function t(r){var n,i,a;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={cv:l.VERSION,platform:l.PLATFORM.toLowerCase(),brand:l.SHORTNAME.toLowerCase(),os:r},e&&F.isObject(e)&&e.uid&&(n.uid=e.uid),i="EXCEP",t.prev=3,t.next=6,F.promiseRace([Kt.genE(f.PING,n),F.promiseTimeout(2e3)]);case 6:i=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:n.e1=i,a=btoa(F.xor_string(F.toqs(n),u)),o.send(a);case 16:case"end":return t.stop()}}),t,null,[[3,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){V(i,n,o,a,s,"next",t)}function s(t){V(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}())}))}));return{xhr:o,promise:i}}function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function J(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$(n.key),n)}}function $(t){var e=function(t,e){if("object"!=W(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==W(e)?e:String(e)}const Z=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setUninstallLink(),this.setIID(),this.permissionChangeSubscribers=[],this.permissionController=!1,chrome.runtime.onStartup.addListener(this.onStartup.bind(this)),chrome.runtime.onInstalled.addListener(this.onInstalled.bind(this)),"firefox"!==l.PLATFORM.toLowerCase()&&(chrome.permissions.onAdded.addListener(this.onPermissionAdded.bind(this)),chrome.permissions.onRemoved.addListener(this.onPermissionRemoved.bind(this)))}var e,r,n;return e=t,(r=[{key:"subscribePermissionChange",value:function(t){this.permissionChangeSubscribers.push(t)}},{key:"registerController",value:function(t){this.permissionController=t}},{key:"isPermissionValid",value:function(){return new Promise((function(t,e){chrome.permissions.getAll((function(e){if(e&&e.origins&&e.origins.indexOf("<all_urls>")>-1)return t(!0);t(!1)}))}))}},{key:"isVersionStop",value:function(){return new Promise((function(t,e){chrome.storage.local.get([l.STORAGEKEYS.VERSIONSTATUS],(function(e){var r=e[l.STORAGEKEYS.VERSIONSTATUS];return r&&r.hasOwnProperty("action")&&"stop"==r.action&&r.hasOwnProperty("sources")&&Array.isArray(r.sources)&&r.sources.length>0&&r.hasOwnProperty("curversion")&&r.hasOwnProperty("minversion")?t(!0):t(!1)}))}))}},{key:"onPermissionAdded",value:function(t){var e=this;t&&t.origins&&t.origins.indexOf("<all_urls>")>-1&&(e.permissionChangeSubscribers.forEach((function(t){t(!0)})),e.permissionController&&e.permissionController(!0))}},{key:"onPermissionRemoved",value:function(t){var e=this;t&&t.origins&&t.origins.indexOf("<all_urls>")>-1&&(e.permissionChangeSubscribers.forEach((function(t){t(!1)})),e.permissionController&&e.permissionController(!1))}},{key:"setUninstallLink",value:function(){try{chrome.runtime.setUninstallURL&&chrome.storage.local.get([l.STORAGEKEYS.CONFIGDATA,l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.IID,l.STORAGEKEYS.TIID],(function(t){null!=t[l.STORAGEKEYS.BASELINK]&&chrome.runtime.getPlatformInfo((function(e){var r=t[l.STORAGEKEYS.CONFIGDATA],n=r&&r.uid?r.uid:"-",o=e&&e.os?e.os:"-",i=t[l.STORAGEKEYS.IID]?t[l.STORAGEKEYS.IID]:"-",a=t[l.STORAGEKEYS.TIID]?t[l.STORAGEKEYS.TIID]:"-",s="?cv="+l.VERSION+"&platform="+l.PLATFORM+"&os="+o+"&iid="+i+"&iidt="+a+"&uid="+n,u=t[l.STORAGEKEYS.BASELINK]+l.UNINSTALLPATH+s;chrome.runtime.setUninstallURL(u)}))}))}catch(t){}}},{key:"setIID",value:function(){F.setIID()}},{key:"updateVersionHistory",value:function(t){var e=l.VERSION;if(F.isObject(t)&&t.hasOwnProperty("previousVersion")&&e!==t.previousVersion){var r={t:Math.round(new Date/1),o:t.previousVersion,n:e};chrome.storage.local.get([l.STORAGEKEYS.VERSIONUPDATE],(function(t){var e,n,o,i=t[l.STORAGEKEYS.VERSIONUPDATE];Array.isArray(i)||(i=[]),i.length>9&&i.pop(),i=[r].concat(J(i)),chrome.storage.local.set((e={},n=l.STORAGEKEYS.VERSIONUPDATE,o=i,(n=$(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e))}))}}},{key:"onStartup",value:function(){chrome.storage.local.remove([l.STORAGEKEYS.ECACHE,l.STORAGEKEYS.DCACHE,l.STORAGEKEYS.ERRCACHE,l.STORAGEKEYS.HASHCACHE])}},{key:"onInstalled",value:function(t){t&&t.reason&&("install"==t.reason&&this.setIID(),"update"==t.reason&&(chrome.storage.local.remove([l.STORAGEKEYS.DCACHE,l.STORAGEKEYS.ECACHE,l.STORAGEKEYS.ERRCACHE,l.STORAGEKEYS.HASHCACHE,l.STORAGEKEYS.VERSIONSTATUS,l.STORAGEKEYS.VERSIONSTATUSNEXTUPDATE,l.STORAGEKEYS.CONFIGDATA]),this.updateVersionHistory(t)))}}])&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e,r){return(e=at(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */rt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:R(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",g={};function v(){}function m(){}function E(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(I([])));A&&A!==r&&n.call(A,a)&&(S=A);var w=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==tt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function R(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?d:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(tt(e)+" is not iterable")}return m.prototype=E,o(w,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:m,configurable:!0}),m.displayName=c(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function nt(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function ot(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nt(i,n,o,a,s,"next",t)}function s(t){nt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,at(n.key),n)}}function at(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tt(e)?e:String(e)}const st=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),chrome.runtime.onInstalled.addListener(this.onInstalled.bind(this)),this.currentRequests=[],this.serversJson=!1,this.countOfMain=0,this.abortFlag=!1,this.turn=0,this.currentTier=!1,this.searchPort=!1,this.getMirror=this.getMirror.bind(this),this.fetchAnyMirror=this.fetchAnyMirror.bind(this),this.getWorkingURL=this.getWorkingURL.bind(this),this.getWorkingTier=this.getWorkingTier.bind(this),this.currentMirror=!1,this.searchPort||this.connectPort()}var e,r,n,o,i,a,s,u,c,f,h,p;return e=t,r=[{key:"init",value:(p=ot(rt().mark((function t(){var e,r,n,o,i,a;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e.getStorageServersJson();case 3:if(!(r=t.sent)){t.next=8;break}n=r,t.next=11;break;case 8:return t.next=10,e.loadJsonFile();case 10:n=t.sent;case 11:return e.serversJson&&(e.isMainRunning||e.isSecondRunning)||(e.serversJson=n),t.next=14,e.getStorageData();case 14:if(o=t.sent,i=o.baselinkNotFound,o.baselink,a=o.debugVal,!e.isSecondRunning){t.next=21;break}return e.onProgress(e),t.abrupt("return",0);case 21:if(!i){t.next=24;break}return e.searchPort&&e.searchPort.postMessage({action:"failed"}),t.abrupt("return",0);case 24:if(e.isMainRunning){t.next=29;break}if(!a||"tier"!=a.action&&"main"!=a.action){t.next=28;break}return chrome.storage.local.remove(l.STORAGEKEYS.DEBUGVAL,(function(){"tier"==a.action?e.startTierSearch():e.startMainSearch()})),t.abrupt("return");case 28:e.startMainSearch();case 29:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"getStorageServersJson",value:function(){return new Promise((function(t,e){chrome.storage.local.get(l.STORAGEKEYS.SERVERSJSON,(function(e){e&&e[l.STORAGEKEYS.SERVERSJSON]?t(e[l.STORAGEKEYS.SERVERSJSON]):t(!1)}))}))}},{key:"getStorageData",value:function(){return new Promise((function(t,e){chrome.storage.local.get([l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.LASTBASELINK,l.STORAGEKEYS.BASELINKNOTFOUND,l.STORAGEKEYS.DEBUGVAL,l.STORAGEKEYS.LASTBASELINKTTL],(function(e){t({baselink:e[l.STORAGEKEYS.BASELINK],lastBaselink:e[l.STORAGEKEYS.LASTBASELINK],lastBaselinkTTL:e[l.STORAGEKEYS.LASTBASELINKTTL],baselinkNotFound:e[l.STORAGEKEYS.BASELINKNOTFOUND],debugVal:e[l.STORAGEKEYS.DEBUGVAL]})}))}))}},{key:"connectPort",value:function(){chrome.runtime.onConnect.addListener(this.onConnect.bind(this))}},{key:"onConnect",value:function(t){"basesearch-port"==t.name&&(this.searchPort=t,this.searchPort.onMessage.addListener(this.onMessage.bind(this)),this.searchPort.onDisconnect.addListener(this.onDisconnect.bind(this)))}},{key:"onMessage",value:function(){}},{key:"onDisconnect",value:function(){this.searchPort=!1}},{key:"startMainSearch",value:(h=ot(rt().mark((function t(){var e,r,n;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).abortFlag=!1,e.baseLinks=F.shuffleArray(e.serversJson.mainbase),e.currentRequests=[],e.isMainRunning=!0,e.isSecondRunning=!1,e.fetchAnyMirror(e.serversJson),t.prev=9,n=F.getTimeoutSettings(e.serversJson),t.next=13,e.getWorkingURL(e.baseLinks,n,e.currentRequests);case 13:r=t.sent,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(9);case 19:if(e.isMainRunning=!1,!(r&&F.isObject(r)&&r.hasOwnProperty("baselink"))){t.next=27;break}return t.next=24,e.saveBaselink(r.baselink,"main");case 24:e.onFound(),t.next=28;break;case 27:e.startTierSearch();case 28:case"end":return t.stop()}}),t,this,[[9,16]])}))),function(){return h.apply(this,arguments)})},{key:"getCurrentFound",value:(f=ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){chrome.storage.local.get([l.STORAGEKEYS.LASTBASELINK,l.STORAGEKEYS.LASTBASELINKTTL],(function(e){var r=parseInt(e[l.STORAGEKEYS.LASTBASELINKTTL]);t({lastbaselink:e[l.STORAGEKEYS.LASTBASELINK],lastbaselinkTTL:r&&!isNaN(r)?r:0})}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"getTimeout",value:(c=ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){chrome.storage.local.get([l.STORAGEKEYS.TIMEOUTSETTINGS],(function(e){var r=e[l.STORAGEKEYS.TIMEOUTSETTINGS],n=r&&F.isTimeoutSettingValid(r.mainbase_api_timeout)?r.mainbase_api_timeout:y;t(n)}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"getWorkingURL",value:(u=ot(rt().mark((function t(e,r,n){var o,i,a,s,u,c,l,f,h,p,y;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(t,e){t.forEach((function(t){try{if(e&&e.baselink==t.baselink)return;t.xhr.abort()}catch(t){}}))},a=function(t){i.push(t)},o=this,i=[],(u=e.map((function(t){var e=X(t,!1,r,a);return{xhr:e.xhr,promise:e.promise,baselink:t}}))).forEach((function(t){n.push(t)})),t.next=8,o.getTimeout();case 8:c=t.sent,l=Math.round(c/1e3),f=l>10&&l<100?l:32,h=0,p=rt().mark((function t(){var r,n,a,c,l,f;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t,1e3)}));case 2:return t.next=4,o.getCurrentFound();case 4:if(r=t.sent,n=r.lastbaselink,a=r.lastbaselinkTTL,!((c=i.filter((function(t){return t.isWorking&&!(t.baselink==n&&a>F.getDateNow())}))).length>0)){t.next=14;break}return l=Math.floor(Math.random()*c.length),f=c[l],s(u,f),t.abrupt("return",{v:f});case 14:if(i.length!=e.length){t.next=17;break}return s(u,!1),t.abrupt("return",{v:null});case 17:h++;case 19:case"end":return t.stop()}}),t)}));case 14:if(!(h<f)){t.next=21;break}return t.delegateYield(p(),"t0",16);case 16:if(!(y=t.t0)){t.next=19;break}return t.abrupt("return",y.v);case 19:t.next=14;break;case 21:return s(u,!1),t.abrupt("return",null);case 23:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return u.apply(this,arguments)})},{key:"startTierSearch",value:(s=ot(rt().mark((function t(){var e,r;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this).abortFlag){t.next=3;break}return t.abrupt("return");case 3:return e.isMainRunning=!1,e.isSecondRunning=!0,t.prev=5,t.next=8,e.getWorkingTier();case 8:r=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5);case 14:if(!(r&&F.isObject(r)&&r.hasOwnProperty("baselink"))){t.next=20;break}return t.next=17,e.saveBaselink(r.baselink,"tier");case 17:e.onFound(!0),t.next=23;break;case 20:if(!r||"restart"!=r){t.next=22;break}return t.abrupt("return");case 22:e.onNotFound(!0);case 23:case"end":return t.stop()}}),t,this,[[5,11]])}))),function(){return s.apply(this,arguments)})},{key:"getWorkingTier",value:(a=ot(rt().mark((function t(){var e,r,n,o,i,a,s,u,c,l;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=this).tierbase=e.serversJson.tierbase.slice(),r=F.getTimeoutSettings(e.serversJson),e.progressCurrent=0,e.progressEnd=e.tierbase.length,e.onProgress(e);case 6:if(!(Array.isArray(e.tierbase)&&e.tierbase.length>0)){t.next=39;break}return e.onProgress(e),t.next=10,e.getStorageServersJson();case 10:if(n=t.sent,o=F.getServersJsonTime(n),i=F.getServersJsonTime(e.serversJson),!(o&&i&&i<o)){t.next=20;break}return e.isSecondRunning=!1,e.init(),t.abrupt("return","restart");case 20:return a=e.tierbase.pop(),s=X(a,!0,r,(function(){})),u=s.xhr,c=s.promise,e.currentTier=u,l=void 0,t.prev=24,t.next=27,c;case 27:l=t.sent,t.next=33;break;case 30:t.prev=30,t.t0=t.catch(24);case 33:if(!(l&&l.isWorking&&l.baselink)){t.next=36;break}return t.abrupt("return",l);case 36:e.progressCurrent++,t.next=6;break;case 39:return t.abrupt("return",null);case 40:case"end":return t.stop()}}),t,this,[[24,30]])}))),function(){return a.apply(this,arguments)})},{key:"saveBaselink",value:function(t,e){return new Promise((function(r,n){var o={};o[l.STORAGEKEYS.BASELINK]=t,o[l.STORAGEKEYS.BASELINKTYPE]=e,o[l.STORAGEKEYS.LASTBASELINK]=t,o[l.STORAGEKEYS.LASTBASELINKTTL]=F.getDateNow()+900,chrome.storage.local.set(o,r)}))}},{key:"abortAll",value:function(){var t=this;t.abortFlag=!0,t.tierbase=[],t.cancelMainWorkers(),t.currentTier&&t.currentTier.abort(),t.currentMirror&&t.cancelCurrentMirrorFetch(),t.onNotFound(!0)}},{key:"cancelMainWorkers",value:function(){var t=this;t.currentRequests&&Array.isArray(t.currentRequests)&&t.currentRequests.forEach((function(t){try{t.xhr.abort()}catch(t){}}))}},{key:"delConfig",value:function(){return new Promise((function(t,e){chrome.storage.local.remove(l.STORAGEKEYS.CONFIGDATA,t)}))}},{key:"onFound",value:(i=ot(rt().mark((function t(e){var r;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,t.next=3,this.delConfig();case 3:Kt.openWelcomePage(),Kt.getTier(),Kt.getClientVersionStatus(),r.searchPort&&r.searchPort.postMessage({action:"success"}),e&&(r.isSecondRunning=!1),r.serversJson=!1,r.isMainRunning=!1,Z.setUninstallLink();case 12:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"onNotFound",value:function(t){var e=this;chrome.storage.local.set(et({},l.STORAGEKEYS.BASELINKNOTFOUND,!0)),e.searchPort&&e.searchPort.postMessage({action:"failed"}),t&&(e.isSecondRunning=!1)}},{key:"onProgress",value:function(t){var e=t,r="Progress "+e.progressCurrent+" / "+e.progressEnd;e.searchPort&&e.isSecondRunning&&e.searchPort.postMessage({action:"progress",data:r})}},{key:"loadJsonFile",value:function(){var t=this;return new Promise((function(e,r){var n=new XMLHttpRequest;n.open("GET",l.SERVERSJSONFILE,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==n.readyState){var r=n.responseText,o=!1;try{o=JSON.parse(r)}catch(t){}if(o){var i=F.genBypassList(o),a=F.getTimeoutSettings(t.serversJson);chrome.storage.local.set(et(et(et({},l.STORAGEKEYS.TIMEOUTSETTINGS,a),l.STORAGEKEYS.SERVERSJSON,o),l.STORAGEKEYS.BYPASSINGHOSTS,i))}e(o)}},n.send()}))}},{key:"popupMessageHandler",value:function(t,e,r,n){switch(r){case"init":this.init(),t.postMessage({response:r,requestId:e,data:"init"});break;case"abortAll":this.abortAll(),t.postMessage({response:r,requestId:e,data:"abortAll"})}}},{key:"cacheBypass",value:function(){}},{key:"isEndpointChangeVersion",value:function(t){return!(!t||!/^(2\.|3\.[0-6]\.|3\.7\.0)/.test(t))}},{key:"validateCurrentBaselink",value:function(){var t=this;chrome.storage.local.remove(l.STORAGEKEYS.SERVERSJSON,(function(){chrome.storage.local.get([l.STORAGEKEYS.BASELINK],(function(e){var r=e[l.STORAGEKEYS.BASELINK];r&&t.loadJsonFile().then((function(e){-1===e.mainbase.indexOf(r)&&-1===e.tierbase.indexOf(r)&&chrome.storage.local.remove(l.STORAGEKEYS.BASELINK,(function(){t.init()}))}))}))}))}},{key:"onInstalled",value:function(t){var e=this;t&&t.reason&&"update"==t.reason&&(e.isEndpointChangeVersion(t.previousVersion)?this.validateCurrentBaselink():chrome.storage.local.remove(l.STORAGEKEYS.SERVERSJSON)),t&&t.reason&&"install"==t.reason&&chrome.storage.local.set(et({},l.STORAGEKEYS.SHOWWELCOME,"installed"),(function(){e.init()}))}},{key:"cancelCurrentMirrorFetch",value:function(){try{this.currentMirror&&this.currentMirror.abort()}catch(t){}}},{key:"fetchAnyMirror",value:(o=ot(rt().mark((function t(e){var r,n,o;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this,!(e&&""!=e&&e.hasOwnProperty("mirrors")&&Array.isArray(e.mirrors))){t.next=19;break}n=0;case 3:if(!(n<e.mirrors.length)){t.next=19;break}if(!r.abortFlag){t.next=6;break}return t.abrupt("break",19);case 6:return o=e.mirrors[n],t.prev=7,t.next=10,r.getMirror(o);case 10:return t.abrupt("break",19);case 13:t.prev=13,t.t0=t.catch(7);case 16:n++,t.next=3;break;case 19:case"end":return t.stop()}}),t,this,[[7,13]])}))),function(t){return o.apply(this,arguments)})},{key:"getMirror",value:function(t){var e=this;return new Promise((function(r,n){chrome.storage.local.get([l.STORAGEKEYS.TIMEOUTSETTINGS],(function(o){var i,a=o[l.STORAGEKEYS.TIMEOUTSETTINGS];i=a&&F.isTimeoutSettingValid(a.mirror_timeout)?a.mirror_timeout:v;var s=new XMLHttpRequest;e.currentMirror=s,s.open("GET",t,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.timeout=i,s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status){var t=s.responseText,e=!1;try{e=JSON.parse(t)}catch(t){return void n()}if(e&&""!=e&&200===e.retcode&&e.data&&e.data.hasOwnProperty("mainbase")&&Array.isArray(e.data.mainbase)&&e.data.mainbase.length>2&&e.data.hasOwnProperty("tierbase")&&Array.isArray(e.data.tierbase)&&e.data.tierbase.length>2){var o=F.genBypassList(e),i=F.getTimeoutSettings(e);chrome.storage.local.set(et(et(et({},l.STORAGEKEYS.TIMEOUTSETTINGS,i),l.STORAGEKEYS.SERVERSJSON,e.data),l.STORAGEKEYS.BYPASSINGHOSTS,o),(function(){r()}))}else n()}else n()},s.send()}))}))}}],r&&it(e.prototype,r),n&&it(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()),ut=["localhost","127.0.0.1","local","intra","intranet","onion"],ct=["checkout.stripe.com"].concat(ut);function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ht(n.key),n)}}function ht(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lt(e)?e:String(e)}const pt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handleProxyRequest=this.handleProxyRequest.bind(this),this.handleTestRequest=this.handleTestRequest.bind(this),this.proxyConfig=!1,this.testHost=!1,this.byPassList=[]}var e,r,n;return e=t,(r=[{key:"set",value:function(t){var e=this;return new Promise((function(r,n){browser.proxy.onRequest.hasListener(e.handleTestRequest)&&browser.proxy.onRequest.removeListener(e.handleTestRequest),browser.proxy.onRequest.hasListener(e.handleProxyRequest)&&browser.proxy.onRequest.removeListener(e.handleProxyRequest),e.proxyConfig=t.proxy,e.byPassList=t.byPassList,browser.proxy.onRequest.addListener(e.handleProxyRequest,{urls:["<all_urls>"]}),r(e.proxyConfig)}))}},{key:"setTest",value:function(t,e){var r=this;return new Promise((function(n,o){browser.proxy.onRequest.hasListener(r.handleTestRequest)&&browser.proxy.onRequest.removeListener(r.handleTestRequest),browser.proxy.onRequest.hasListener(r.handleProxyRequest)&&browser.proxy.onRequest.removeListener(r.handleProxyRequest),r.proxyConfig=t,r.testHost=e,browser.proxy.onRequest.addListener(r.handleTestRequest,{urls:["<all_urls>"]}),n(t)}))}},{key:"unset",value:function(){var t=this;return new Promise((function(e,r){t.proxyConfig=!1,t.testHost=!1,t.byPassList=[],browser.proxy.onRequest.removeListener(t.handleTestRequest),browser.proxy.onRequest.removeListener(t.handleProxyRequest),e()}))}},{key:"handleTestRequest",value:function(t){return this.proxyConfig?new URL(t.url).hostname!==this.testHost?{type:"direct"}:{type:"http"===this.proxyConfig.Scheme?"http":"https",host:this.proxyConfig.Host,port:this.proxyConfig.Port}:{type:"direct"}}},{key:"handleProxyRequest",value:function(t){if(this.proxyConfig){var e=new URL(t.url);return this.byPassList.indexOf(e.hostname)>-1?{type:"direct"}:{type:"http"===this.proxyConfig.Scheme?"http":"https",host:this.proxyConfig.Host,port:this.proxyConfig.Port}}return{type:"direct"}}}])&&ft(e.prototype,r),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gt(n.key),n)}}function gt(t){var e=function(t,e){if("object"!=yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yt(e)?e:String(e)}const vt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"set",value:function(t,e){var r=this;return new Promise((function(e,n){o.set("current_proxy",t),r.getPacData(t,(function(t){pt.set(t).then(e)}))}))}},{key:"setTest",value:function(t){return new Promise((function(e,r){o.set("current_proxy",t.proxy),pt.setTest(t.proxy,t.testHost).then(e)}))}},{key:"unset",value:function(){return new Promise((function(t,e){pt.unset().then(t)}))}},{key:"getPacData",value:function(t,e){chrome.storage.local.get([l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.BYPASSLIST,l.STORAGEKEYS.CONFIGDATA,l.STORAGEKEYS.BYPASSINGHOSTS],(function(r){var n=r[l.STORAGEKEYS.CONFIGDATA],o=n&&n.uid?n.uid:"",i=r[l.STORAGEKEYS.BYPASSLIST],a=r[l.STORAGEKEYS.BYPASSINGHOSTS],s=r[l.STORAGEKEYS.BASELINK].replace("http://","").replace("https://","").replace("/client/","").replace("/"+l.SHORTNAME,"");s=(s=F.removePort(s)).toLowerCase();var u=[];u.push(s);var c=[];F.isUserPremium(n)&&(c=i&&i[o]?i[o]:[]),u=u.concat(ct,c),a&&Array.isArray(a)&&(u=u.concat(a)),e({proxy:t,byPassList:u})}))}}])&&dt(e.prototype,r),n&&dt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,St(n.key),n)}}function St(t){var e=function(t,e){if("object"!=mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mt(e)?e:String(e)}const bt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"set",value:function(t){return new Promise((function(e,r){vt.set(t).then((function(t){e(t)}))}))}},{key:"setTest",value:function(t){return new Promise((function(e,r){vt.setTest(t).then((function(t){e(t)}))}))}},{key:"unset",value:function(){return new Promise((function(t,e){vt.unset().then((function(){t()}))}))}}])&&Et(e.prototype,r),n&&Et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function wt(t,e,r){return(e=Tt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tt(n.key),n)}}function Tt(t){var e=function(t,e){if("object"!=At(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==At(e)?e:String(e)}const Rt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;this.init(),e.onBeforeSendHeaders=this.onBeforeSendHeaders.bind(this),e.onPermissionChange=this.onPermissionChange.bind(this),Z.subscribePermissionChange(e.onPermissionChange),Z.isPermissionValid().then((function(t){t&&e.registerListeners()}))}var e,r,n;return e=t,(r=[{key:"onPermissionChange",value:function(t){t?this.registerListeners():this.removeListeners()}},{key:"registerListeners",value:function(){chrome.webRequest.onBeforeSendHeaders.hasListener(this.onBeforeSendHeaders)||chrome.webRequest.onBeforeSendHeaders.addListener(this.onBeforeSendHeaders,{urls:["<all_urls>"]})}},{key:"removeListeners",value:function(){chrome.webRequest.onBeforeSendHeaders.removeListener(this.onBeforeSendHeaders)}},{key:"init",value:function(){this.pendingRequest=[],this.currentRequest={},this.running=!1,this.cacheUsed=!1,this.identifyRunning=!1,this.identifyId=0,this.identifyLink="",this.nextEnteringKill=!1}},{key:"generateIdentifier",value:function(t){var e=this;e.identifierDomain=t.Host,e.identifierLink="https://"+t.Host+"/"+F.generateIdentifierDomain()+"/",e.uid&&(e.identifierLink=e.identifierLink+e.uid)}},{key:"startIdentifyRequest",value:function(){var t=this;chrome.storage.local.get([l.STORAGEKEYS.CURRENTPROXY],(function(e){var r=e[l.STORAGEKEYS.CURRENTPROXY];r&&F.isObject(r)&&r.Host||t.closeAllCallbacks();var n="https://"+r.Host+"/"+F.generateIdentifierDomain()+"/",o=new XMLHttpRequest;o.open("GET",n,!0),o.timeout=1e4,o.onreadystatechange=function(){if(4==o.readyState){var e=o.responseText;e&&-1!=e.indexOf("ERR_INVALID_URL")?t.tokenSuccess():t.closeAllCallbacks()}},t.identifyLink=n,t.identifyRunning=!0,o.send()}))}},{key:"useCache",value:function(t){var e=this;chrome.storage.local.get([l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.CONFIGDATA],(function(r){e.setCacheUsed(!0),t({authCredentials:{username:r[l.STORAGEKEYS.CONFIGDATA].p_login?r[l.STORAGEKEYS.CONFIGDATA].p_login:"",password:r[l.STORAGEKEYS.CONFIGDATA].p_token?r[l.STORAGEKEYS.CONFIGDATA].p_token:""}})}))}},{key:"freshToken",value:function(t){var e=this;chrome.storage.local.get([l.STORAGEKEYS.USERDATA],(function(r){var n={hitReason:"getToken",userData:r[l.STORAGEKEYS.USERDATA]};Kt.login((function(r){F.isResponse200(r)?t({authCredentials:{username:r.config.p_login?r.config.p_login:"",password:r.config.p_token?r.config.p_token:""}}):F.isResponseMinus20(r)?chrome.storage.local.set(wt({},l.STORAGEKEYS.LASTLOGOUTREASON,r.message),(function(){chrome.storage.local.remove([l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.CONFIGDATA,l.STORAGEKEYS.CONFIGDATATTL,l.STORAGEKEYS.CONFIGHARDTTL],(function(){t({cancel:!0}),e.closeAllCallbacks()}))})):(t({cancel:!0}),e.closeAllCallbacks())}),n)}))}},{key:"tokenSuccess",value:function(){var t=this;chrome.storage.local.get([l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.CONFIGDATA],(function(e){for(var r=0;r<t.pendingRequest.length;r++)t.pendingRequest[r]({authCredentials:{username:e[l.STORAGEKEYS.CONFIGDATA].p_login?e[l.STORAGEKEYS.CONFIGDATA].p_login:"",password:e[l.STORAGEKEYS.CONFIGDATA].p_token?e[l.STORAGEKEYS.CONFIGDATA].p_token:""}});t.init()}))}},{key:"closeAllCallbacks",value:function(){for(var t=this,e=0;e<t.pendingRequest.length;e++)t.pendingRequest[e]({cancel:!0});t.init(),bt.unset().then((function(t){chrome.storage.local.get([l.STORAGEKEYS.ISPROXYON,l.STORAGEKEYS.LOCALE],(function(t){t[l.STORAGEKEYS.ISPROXYON]&&t[l.STORAGEKEYS.LOCALE]&&F.showConnectionNotification(t[l.STORAGEKEYS.LOCALE].NotifyVPNDisconnectTitle,t[l.STORAGEKEYS.LOCALE].NotifyVPNDisconnectMsg);var e=wt(wt({},l.STORAGEKEYS.ISPROXYON,!1),l.STORAGEKEYS.CURRENTPROXY,!1);chrome.storage.local.set(e)}))}))}},{key:"clearTokenWatcher",value:function(){var t=this;if(t.pendingRequest.length>0){for(var e=0;e<t.pendingRequest.length;e++)t.pendingRequest[e]({cancel:!0});t.init()}}},{key:"setIdentifyId",value:function(t){this.identifyId=t}},{key:"setCurrentRequest",value:function(t){this.currentRequest=t}},{key:"setRunning",value:function(){this.running=!0}},{key:"setPendingRequest",value:function(t){this.pendingRequest.push(t)}},{key:"setNextEnteringKill",value:function(t){this.nextEnteringKill=t}},{key:"setCacheUsed",value:function(t){this.cacheUsed=t}},{key:"getNextEnteringKill",value:function(){return this.nextEnteringKill}},{key:"getIdentifyId",value:function(){return this.identifyId}},{key:"getIdentifyLink",value:function(){return this.identifyLink}},{key:"getCurrentRequest",value:function(){return this.currentRequest}},{key:"isRunning",value:function(){return this.running}},{key:"isIdentifyRunning",value:function(){return this.identifyRunning}},{key:"isCachedUsed",value:function(){return this.cacheUsed}},{key:"onBeforeSendHeaders",value:function(t){var e=this;e.isRunning()&&-1!=t.url.indexOf(e.getIdentifyLink())&&e.isIdentifyRunning()&&e.setIdentifyId(t.requestId)}}])&&Ot(e.prototype,r),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());var Lt=r(627);r(436);const xt=(0,Lt.A)(fetch("js/main.wasm").then((t=>t.arrayBuffer())));function _t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_t=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:R(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",g={};function v(){}function m(){}function E(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(I([])));A&&A!==r&&n.call(A,a)&&(S=A);var w=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ct(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function R(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?d:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ct(e)+" is not iterable")}return m.prototype=E,o(w,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:m,configurable:!0}),m.displayName=c(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function kt(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function It(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){kt(i,n,o,a,s,"next",t)}function s(t){kt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Pt(t,e,r){return(e=Gt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gt(n.key),n)}}function Gt(t){var e=function(t,e){if("object"!=Ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ct(e)?e:String(e)}var Yt=r(802);const Kt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,o,i,a;return e=t,r=[{key:"getLanguage",value:function(t){var e=this;chrome.runtime.getPlatformInfo((function(r){var n=Object.assign({os:r&&r.os?r.os:"-"},e.metaData());e.request(f.LANGUAGELIST,"POST",n,(function(r){F.isResponse200(r)?t(r):F.isResponse200(r)||F.isResponseMinusOne(r)||F.isMaintenanceMode(r)||F.isResponseMinus20(r)?t&&t(r):chrome.storage.local.get((function(t){var r=t[l.STORAGEKEYS.BASELINK];e.findNewBase(r)}))}),!1,!0)}))}},{key:"getLocale",value:function(t,e){var r=this;chrome.storage.local.get(l.STORAGEKEYS.LANGUAGE,(function(n){chrome.runtime.getPlatformInfo((function(o){var i=n[l.STORAGEKEYS.LANGUAGE],a=Object.assign({os:o&&o.os?o.os:"-",lang:i},r.metaData());r.request(f.GETLOCALE,"POST",a,(function(n){if(F.isResponse200(n)&&"object"===Ct(n.translation)&&null!==n.translation)chrome.storage.local.set(Pt(Pt({},l.STORAGEKEYS.LOCALE,n.translation),l.STORAGEKEYS.LSER,Number.isInteger(n.serial)?n.serial:0),(function(){})),r.getCountryLocale({langCode:i},(function(){t(n)}));else if(F.isResponseMinusOne(n)||F.isMaintenanceMode(n)||F.isResponseMinus20(n))t&&t(n);else{if(e&&!0===e.ignoreFail)return t();chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];r.findNewBase(e)}))}}),!1,!0)}))}))}},{key:"getCountryLocale",value:function(t,e){var r=this;r.loadCountryLocaleJsonFile(t.langCode).then((function(t){t?chrome.storage.local.set(Pt({},l.STORAGEKEYS.COUNTRYLOCALE,t),(function(){e&&e(t)})):r.loadCountryLocaleJsonFile("en").then((function(t){chrome.storage.local.set(Pt({},l.STORAGEKEYS.COUNTRYLOCALE,t),(function(){e&&e(t)}))}))}))}},{key:"loadCountryLocaleJsonFile",value:function(t){return new Promise((function(e,r){var n=new XMLHttpRequest,o=s+"/"+t+".json";n.open("GET",o,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.timeout=5e3,n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){var t=n.responseText,r=!1;try{r=JSON.parse(t)}catch(t){}e(r)}else e(!1)},n.send()}))}},{key:"prepareLoginData",value:function(t){var e,r,n;return t&&t.authcode&&(e=t.authcode),t&&t.email&&(r=t.email,t.password&&(n=Yt("sha512").update(t.password).digest("hex")),t.hpassword&&(n=t.hpassword)),r&&n?{login:r,hpassword:n}:!!e&&{authcode:e}}},{key:"getUserLoginData",value:(a=It(_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){chrome.storage.local.get([l.STORAGEKEYS.USERDATA],(function(e){t(e[l.STORAGEKEYS.USERDATA])}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"promiseLogin",value:function(t){var e=this;return new Promise(function(){var r=It(_t().mark((function r(n,o){var i,a;return _t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={isIgnoreFail:t},r.next=3,e.getUserLoginData();case 3:if(a=r.sent){r.next=6;break}return r.abrupt("return",{retcode:-4});case 6:i.userData=a,e.login(n,i);case 8:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}())}},{key:"login",value:(i=It(_t().mark((function t(e,r){var n,o,i,a,s,u,c,f,h,p,y,d,g;return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,o=!(!r||!0!==r.isIgnoreFail),i=n.prepareLoginData(r.userData)){t.next=5;break}return t.abrupt("return",e({retcode:-4}));case 5:if(a=i.authcode,s=i.login,u=i.hpassword,a||s&&u){t.next=8;break}return t.abrupt("return",e({retcode:-4}));case 8:if(c="",t.prev=9,!a){t.next=16;break}return t.next=13,xt.getC3Auth(a.toLowerCase());case 13:c=t.sent,t.next=19;break;case 16:return t.next=18,xt.getC3(s.toLowerCase(),u.toLowerCase());case 18:c=t.sent;case 19:t.next=25;break;case 21:return t.prev=21,t.t0=t.catch(9),t.abrupt("return",e({retcode:-4}));case 25:if(!F.isResponse200(c)||!c.config){t.next=40;break}f=!!F.isObject(c.config.config_intervals)&&c.config.config_intervals.soft,h=!!F.isObject(c.config.config_intervals)&&c.config.config_intervals.hard,p=F.getConfigTTL(f,5),y=F.getConfigTTL(h,60),d={},s&&u&&(d.email=s,d.hpassword=u),a&&(d.authcode=a),c.config.uid&&(d.uid=c.config.uid),g=Pt(Pt(Pt(Pt(Pt(Pt(Pt({},l.STORAGEKEYS.USERDATA,d),l.STORAGEKEYS.CONFIGDATA,c.config),l.STORAGEKEYS.CONFIGDATATTL,p),l.STORAGEKEYS.CONFIGHARDTTL,y),l.STORAGEKEYS.LOGINTYPE,r.loginType),l.STORAGEKEYS.COUNTRYSESSIONSTATE,{}),l.STORAGEKEYS.LASTSESSION,[]),c.config.ipcheck_url&&(g[l.STORAGEKEYS.IPLOOKUPURL]=c.config.ipcheck_url),chrome.storage.local.set(g,(function(){return Z.setUninstallLink(),e(c)})),t.next=47;break;case 40:if(!(F.isResponseAuthError(c)||F.isResponseMinusOne(c)||F.isMaintenanceMode(c)||F.isResponseMinus20(c))){t.next=45;break}return e&&e(c),t.abrupt("return");case 45:o||chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];n.findNewBase(e)}));case 46:return t.abrupt("return",e(c));case 47:case"end":return t.stop()}}),t,this,[[9,21]])}))),function(t,e){return i.apply(this,arguments)})},{key:"createAccount",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.LANGUAGE,l.STORAGEKEYS.LOCALE],(function(n){var o=n[l.STORAGEKEYS.BASELINK],i=n[l.STORAGEKEYS.LANGUAGE];o?r.getOS().then((function(n){var o=Yt("sha512").update(e.password).digest("hex"),a=Object.assign({os:n,lang:i,email:e.email,hpassword:o},r.metaData());r.request(f.CREATEACCOUNT,"POST",a,(function(n){if(F.isResponse200(n)){var i={email:e.email,hpassword:o};chrome.storage.local.set(Pt({},l.STORAGEKEYS.USERDATA,i),(function(){t&&t(n)}))}else F.isResponse200(n)||F.isResponseMinus20(n)||F.isResponseMinusOne(n)||F.isMaintenanceMode(n)?t&&t(n):chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];r.findNewBase(e)}))}),!1,!0)})):t&&t(!1)}))}},{key:"forgotPass",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.LANGUAGE],(function(n){var o=n[l.STORAGEKEYS.LANGUAGE];chrome.runtime.getPlatformInfo((function(n){var i=Object.assign({os:n&&n.os?n.os:"-",lang:o||"-"},r.metaData(),e);r.request(f.FORGOTPASS,"POST",i,(function(e){F.isResponse200(e)?chrome.storage.local.remove([l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.CONFIGDATA,l.STORAGEKEYS.CONFIGDATATTL],(function(){t(e)})):F.isResponse200(e)||F.isResponseMinus20(e)||F.isResponseMinusOne(e)||F.isResponseAuthError(e)||F.isMaintenanceMode(e)?t&&t(e):chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];r.findNewBase(e)}))}),!1,!0)}))}))}},{key:"getProducts",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.LANGUAGE],(function(n){var o=n[l.STORAGEKEYS.LANGUAGE];chrome.runtime.getPlatformInfo((function(n){var i=r.prepareLoginData(e);if(!i)return t({retcode:-4});var a=Object.assign({os:n&&n.os?n.os:"-",lang:o||"-"},r.metaData(),i);r.request(f.PRODUCTS,"POST",a,(function(e){F.isResponse200(e)?t(e):F.isResponse200(e)||F.isResponseMinusOne(e)||F.isResponseAuthError(e)||F.isMaintenanceMode(e)||F.isResponseMinus20(e)?t&&t(e):chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];r.findNewBase(e)}))}),!1,!0)}))}))}},{key:"getPaymentLink",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.LANGUAGE,l.STORAGEKEYS.USERDATA],(function(n){chrome.runtime.getPlatformInfo((function(o){var i=n[l.STORAGEKEYS.LANGUAGE],a=n[l.STORAGEKEYS.USERDATA],s=r.prepareLoginData(a);if(!s)return t({retcode:-4});var u=Object.assign({productid:e.productid,os:o&&o.os?o.os:"-",lang:i||"-"},r.metaData(),s),c=f.REST2+e.endpoint;r.request(c,"POST",u,(function(e){F.isResponse200(e)?t(e):F.isResponse200(e)||F.isResponseMinusOne(e)||F.isResponseAuthError(e)||F.isMaintenanceMode(e)||F.isResponseMinus20(e)?t&&t(e):chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];r.findNewBase(e)}))}),!1,!0)}))}))}},{key:"verifyProxy",value:function(t,e){var r=this;chrome.runtime.getPlatformInfo((function(n){var o=Object.assign({os:n&&n.os?n.os:"-"},r.metaData(),e);r.request(f.AUTOPROXY,"POST",o,(function(e){t(e)}),!0,!0)}))}},{key:"changeProfile",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.LANGUAGE,l.STORAGEKEYS.USERDATA],(function(n){chrome.runtime.getPlatformInfo((function(o){var i=n[l.STORAGEKEYS.USERDATA],a=e.newhpassword,s=Object.assign({email:n[l.STORAGEKEYS.USERDATA].email,hpassword:n[l.STORAGEKEYS.USERDATA].password,newhpassword:a,uid:i&&i.uid?i.uid:"",lang:n[l.STORAGEKEYS.LANGUAGE],os:o&&o.os?o.os:"-"},r.metaData());r.request(f.PROFILE,"POST",s,(function(e){if(a&&e&&200==e.Retcode){var r={email:n[l.STORAGEKEYS.USERDATA].email,password:a};chrome.storage.local.set(Pt({},l.STORAGEKEYS.USERDATA,r),(function(){return t(e)}))}return t(e)}))}))}))}},{key:"getTier",value:function(t){var e=this;chrome.storage.local.get([l.STORAGEKEYS.SERVERSJSON,l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.TIERNEXTUPDATE],(function(r){var n=r[l.STORAGEKEYS.BASELINK],o=(r[l.STORAGEKEYS.SERVERSJSON],r[l.STORAGEKEYS.TIERNEXTUPDATE]?r[l.STORAGEKEYS.TIERNEXTUPDATE]:0);n&&o<F.getDateNow()?e.getOS().then((function(r){var n=Object.assign({os:r},e.metaData());e.request(f.TIER,"POST",n,(function(e){var r=l.TIERUPDATETTL;if(e&&""!=e&&200===e.retcode&&e.data&&e.data.hasOwnProperty("mainbase")&&Array.isArray(e.data.mainbase)&&e.data.mainbase.length>2&&e.data.hasOwnProperty("tierbase")&&Array.isArray(e.data.tierbase)){e.hasOwnProperty("update_interval_hours")&&Number.isInteger(e.update_interval_hours)&&e.update_interval_hours>1&&e.update_interval_hours<168&&(r=60*e.update_interval_hours*60);var n=F.getDateNow()+r,o=F.genBypassList(e.data);chrome.storage.local.set(Pt(Pt(Pt({},l.STORAGEKEYS.SERVERSJSON,e.data),l.STORAGEKEYS.TIERNEXTUPDATE,n),l.STORAGEKEYS.BYPASSINGHOSTS,o));var i=F.getTimeoutSettings(e.data);chrome.storage.local.set(Pt({},l.STORAGEKEYS.TIMEOUTSETTINGS,i))}else{var a=F.getDateNow()+r;chrome.storage.local.set(Pt({},l.STORAGEKEYS.TIERNEXTUPDATE,a))}t&&t(e)}),!0)})):t&&t(!1)}))}},{key:"getClientVersionStatus",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.VERSIONSTATUSNEXTUPDATE,l.STORAGEKEYS.USERDATA],(function(n){n[l.STORAGEKEYS.BASELINK]&&((n[l.STORAGEKEYS.VERSIONSTATUSNEXTUPDATE]?n[l.STORAGEKEYS.VERSIONSTATUSNEXTUPDATE]:0)<F.getDateNow()||e&&!0===e.ignoreTTL)?r.getOS().then((function(e){var o=Object.assign({os:e},r.metaData()),i=n[l.STORAGEKEYS.USERDATA];i&&i.uid&&(o.uid=i.uid),r.request(f.CLIENTUPDATES,"POST",o,(function(e){var r=l.VERSIONSTATUSTTL;if(e&&""!=e&&200===e.retcode&&e.data&&e.data.hasOwnProperty("action")&&("update"===e.data.action||"stop"===e.data.action)&&e.data.hasOwnProperty("curversion")&&e.data.hasOwnProperty("minversion")&&e.data.hasOwnProperty("sources")&&Array.isArray(e.data.sources)&&e.data.sources.length>0){e.hasOwnProperty("update_interval_hours")&&Number.isInteger(e.update_interval_hours)&&e.update_interval_hours>6&&e.update_interval_hours<720&&(r=60*e.update_interval_hours*60);var n=F.getDateNow()+r;chrome.storage.local.set(Pt(Pt({},l.STORAGEKEYS.VERSIONSTATUS,e.data),l.STORAGEKEYS.VERSIONSTATUSNEXTUPDATE,n))}else chrome.storage.local.remove([l.STORAGEKEYS.VERSIONSTATUS,l.STORAGEKEYS.VERSIONSTATUSNEXTUPDATE],(function(){var t=F.getDateNow()+r;chrome.storage.local.set(Pt({},l.STORAGEKEYS.VERSIONSTATUSNEXTUPDATE,t))}));t&&t(e)}),!0)})):t&&t(!1)}))}},{key:"sendFeedback",value:function(t,e){var r=this;chrome.runtime.getPlatformInfo((function(n){var o=Object.assign({os:n&&n.os?n.os:"-"},r.metaData(),e);r.request(f.FEEDBACK,"POST",o,(function(e){t(e)}),!0,!0)}))}},{key:"openWelcomePage",value:function(){var t=this;chrome.storage.local.get([l.STORAGEKEYS.LANGUAGE,l.STORAGEKEYS.SHOWWELCOME],(function(e){if("installed"===e[l.STORAGEKEYS.SHOWWELCOME]){var r=e[l.STORAGEKEYS.LANGUAGE];chrome.runtime.getPlatformInfo((function(e){var n=Object.assign({os:e&&e.os?e.os:"-",lang:r||"-"},t.metaData());t.request(f.WELCOMEPAGE,"POST",n,(function(t){F.isResponse200(t)&&t.hasOwnProperty("wp")&&chrome.storage.local.set(Pt({},l.STORAGEKEYS.SHOWWELCOME,"done"),(function(){F.openNewTab(t.wp)}))}),!0,!0)}))}}))}},{key:"createTicket",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.LANGUAGE],(function(n){var o=n[l.STORAGEKEYS.LANGUAGE];chrome.runtime.getPlatformInfo((function(n){var i=Object.assign({os:n&&n.os?n.os:"-",lang:o||"-",from:e.email,subject:e.subject,body:e.message},r.metaData());r.request(f.CREATETICKET,"POST",i,(function(e){F.isResponse200(e)||F.isResponseMinus20(e)||F.isResponseMinusOne(e)||F.isResponseAuthError(e)||F.isMaintenanceMode(e)?t&&t(e):chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];r.findNewBase(e)}))}),!1,!0)}))}))}},{key:"closeAccount",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.LANGUAGE,l.STORAGEKEYS.USERDATA],(function(e){var n=e[l.STORAGEKEYS.LANGUAGE];chrome.runtime.getPlatformInfo((function(o){var i=e[l.STORAGEKEYS.USERDATA],a=r.prepareLoginData(i);if(!a)return t({retcode:-4});var s=Object.assign({os:o&&o.os?o.os:"-",lang:n||"-"},r.metaData(),a);r.request(f.CLOSEACCOUNT,"POST",s,(function(e){F.isResponse200(e)?chrome.storage.local.remove([l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.CONFIGDATA,l.STORAGEKEYS.CONFIGDATATTL],(function(){t(e)})):F.isResponse200(e)||F.isResponseMinus20(e)||F.isResponseMinusOne(e)||F.isResponseAuthError(e)||F.isMaintenanceMode(e)?t&&t(e):chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];r.findNewBase(e)}))}),!1,!0)}))}))}},{key:"getTrial",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.LANGUAGE],(function(n){var o=n[l.STORAGEKEYS.LANGUAGE];chrome.runtime.getPlatformInfo((function(n){var i=Object.assign({os:n&&n.os?n.os:"-",lang:o||"-"},r.metaData(),e);r.request(f.TRIAL,"POST",i,(function(e){F.isResponse200(e)?chrome.storage.local.remove(l.STORAGEKEYS.CONFIGDATA,(function(){t(e)})):F.isResponse200(e)||F.isResponseMinus20(e)||F.isResponseMinusOne(e)||F.isResponseAuthError(e)||F.isMaintenanceMode(e)?t&&t(e):chrome.storage.local.get((function(t){var e=t[l.STORAGEKEYS.BASELINK];r.findNewBase(e)}))}),!1,!0)}))}))}},{key:"request",value:function(t,e,r,n,o,i){var a=this;chrome.storage.local.get([l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.BASELINKTYPE,l.STORAGEKEYS.TIMEOUTSETTINGS,l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.IID],function(){var s=It(_t().mark((function s(u){var c,h,p,g,v,m,E,S,b,A;return _t().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(c=u[l.STORAGEKEYS.USERDATA],h="tier"===u[l.STORAGEKEYS.BASELINKTYPE],p=u[l.STORAGEKEYS.TIMEOUTSETTINGS],g=y,u[l.STORAGEKEYS.IID],g=h?p&&F.isTimeoutSettingValid(p.tierbase_api_timeout)?p.tierbase_api_timeout:d:p&&F.isTimeoutSettingValid(p.mainbase_api_timeout)?p.mainbase_api_timeout:y,v=u[l.STORAGEKEYS.BASELINK],m=new XMLHttpRequest,E=v+t,"GET"==e&&(E=E+"?"+r),"POST"==e&&r&&!i&&(r.base=v),c&&F.isObject(c)&&c.hasOwnProperty("uid")&&"POST"==e&&(r.uid=c.uid),"POST"!=e){s.next=24;break}return S="EXCEP",s.prev=14,s.next=17,F.promiseRace([a.genE(t,r),F.promiseTimeout(2e3)]);case 17:S=s.sent,s.next=23;break;case 20:s.prev=20,s.t0=s.catch(14);case 23:r.e1=S;case 24:b=F.randomString(Math.round(3+61*Math.random())),m.open(e,E,!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m.setRequestHeader("Authorization","Basic "+btoa(b+":"+F.randomString(Math.round(3+5*Math.random())))),m.timeout=g,A=btoa(F.xor_string(F.toqs(r),b)),m.onreadystatechange=function(){if(4==m.readyState){if(200==m.status){var e="";try{var r=F.xor_string(F.b64_to_utf8(m.responseText),b);e=JSON.parse(r)}catch(t){e=""}return o||t==f.CONFIG||(""==e||F.isEmpty(e)||i&&!e.hasOwnProperty("retcode")||!i&&!e.hasOwnProperty("Retcode"))&&a.findNewBase(v),o||t!=f.CONFIG||""!=e&&e.hasOwnProperty("errorcode")&&!F.isEmpty(e)||a.findNewBase(v),n(e)}return o||a.findNewBase(v),n(0)}},m.send(A);case 36:case"end":return s.stop()}}),s,null,[[14,20]])})));return function(t){return s.apply(this,arguments)}}())}},{key:"findNewBase",value:function(t){chrome.storage.local.get(l.STORAGEKEYS.BASELINK,(function(e){null!=e[l.STORAGEKEYS.BASELINK]&&t==e[l.STORAGEKEYS.BASELINK]&&chrome.storage.local.remove(l.STORAGEKEYS.BASELINK,(function(){st.init()}))}))}},{key:"popupCallback",value:function(t,e,r){return function(n){t.postMessage({response:r,requestId:e,data:n})}}},{key:"popupMessageHandler",value:function(t,e,r,n){switch(r){case"getLanguage":this.getLanguage(this.popupCallback(t,e,r));break;case"getLocale":this.getLocale(this.popupCallback(t,e,r));break;case"getCountryLocale":this.getCountryLocale(n,this.popupCallback(t,e,r));break;case"login":this.login(this.popupCallback(t,e,r),n);break;case"forgotPass":this.forgotPass(this.popupCallback(t,e,r),n);break;case"contactSupport":this.contactSupport(this.popupCallback(t,e,r),n);break;case"getProducts":this.getProducts(this.popupCallback(t,e,r),n);break;case"getPaymentLink":this.getPaymentLink(this.popupCallback(t,e,r),n);break;case"changeProfile":this.changeProfile(this.popupCallback(t,e,r),n);break;case"setNotificationState":this.setNotificationState(this.popupCallback(t,e,r),n);break;case"getTicketToken":this.getTicketToken(this.popupCallback(t,e,r),n);break;case"resendActivationLink":this.resendActivationLink(this.popupCallback(t,e,r),n);break;case"closeAccount":this.closeAccount(this.popupCallback(t,e,r),n);break;case"getTrial":this.getTrial(this.popupCallback(t,e,r),n);break;case"getClientVersionStatus":this.getClientVersionStatus(this.popupCallback(t,e,r),n);break;case"createAccount":this.createAccount(this.popupCallback(t,e,r),n);break;case"createTicket":this.createTicket(this.popupCallback(t,e,r),n);break;default:this.popupCallback(t,e,r)("")}}},{key:"genE",value:(o=It(_t().mark((function t(e,r){var n;return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="EXCEP",t.prev=1,t.next=4,xt.genE(e,r);case 4:n=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,null,[[1,7]])}))),function(t,e){return o.apply(this,arguments)})},{key:"findBase",value:function(){}},{key:"getOS",value:function(){return new Promise((function(t){try{chrome&&chrome.runtime&&F.isFunction(chrome.runtime.getPlatformInfo)?chrome.runtime.getPlatformInfo((function(e){var r="-";e&&e.os&&"string"==typeof e.os&&(r=e.os.toLowerCase()),t(r)})):t("-")}catch(e){t("-")}}))}},{key:"getUidParam",value:function(t){return t&&t.uid?"&uid="+t.uid:""}},{key:"getInstallId",value:function(t,e){return t?"&"+e+"="+t:""}},{key:"addMetaData",value:function(t){return t+"&cv="+l.VERSION+"&platform="+l.PLATFORM.toLowerCase()}},{key:"metaData",value:function(){return{cv:l.VERSION,platform:l.PLATFORM.toLowerCase(),brand:l.SHORTNAME.toLowerCase()}}}],r&&Nt(e.prototype,r),n&&Nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ut(n.key),n)}}function Ut(t){var e=function(t,e){if("object"!=Dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dt(e)?e:String(e)}const jt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;this.init(),e.onRequestCompleted=this.onRequestCompleted.bind(this),e.onRequestError=this.onRequestError.bind(this),e.onPermissionChange=this.onPermissionChange.bind(this),Z.subscribePermissionChange(e.onPermissionChange),Z.isPermissionValid().then((function(t){t&&e.registerListeners()}))}var e,r,n;return e=t,(r=[{key:"onPermissionChange",value:function(t){t?this.registerListeners():this.removeListeners()}},{key:"registerListeners",value:function(){var t=this;chrome.webRequest.onCompleted.hasListener(t.onRequestCompleted)||chrome.webRequest.onCompleted.addListener(t.onRequestCompleted,{urls:["<all_urls>"]},["responseHeaders"]),chrome.webRequest.onErrorOccurred.hasListener(t.onRequestError)||chrome.webRequest.onErrorOccurred.addListener(t.onRequestError,{urls:["<all_urls>"]})}},{key:"removeListeners",value:function(){chrome.webRequest.onCompleted.removeListener(this.onRequestCompleted),chrome.webRequest.onErrorOccurred.removeListener(this.onRequestError)}},{key:"init",value:function(){this.isRunning=!1,this.startTime=0,this.onSuccess=0,this.proxyServer="",this.lastError=0,this.lastSuccess=0,this.isPendingUnset=!1,this.nRequest=[],this.nRequestCount=0,this.numberOfAllowedFails=10,this.numberOfCurrentFails=0,this.rescueURL=[]}},{key:"startSession",value:function(t){var e=this;e.init(),e.isRunning=!0,e.startTime=Date.now(),e.proxyServer=t}},{key:"stopSession",value:function(){this.abortRemainingRequests(),this.init()}},{key:"addFailedRescueRequest",value:function(t){var e=this;++e.numberOfCurrentFails,e.numberOfAllowedFails==e.numberOfCurrentFails&&Vt.clearSettings()}},{key:"generateRescueURL",value:function(t){for(var e=0;e<this.numberOfAllowedFails;e++)this.rescueURL[e]="https://"+t.Host+"/"+F.generateIdentifierDomain()+"/"}},{key:"request",value:function(t,e,r){var n=this;n.nRequest[t]=new XMLHttpRequest,n.nRequest[t].open("GET",t,!0),n.nRequest[t].onreadystatechange=function(o){if(4===n.nRequest[t].readyState){var i=n.nRequest[t].responseText;i&&-1!=i.indexOf("ERR_INVALID_URL")?(window.clearInterval(e),n.abortRemainingRequests(),n.lastError=0,n.lastSuccess=0,n.isPendingUnset=!1):n.addFailedRescueRequest(r)}},++n.nRequestCount,n.nRequest[t].send(null)}},{key:"startRescueRequest",value:function(t){var e=this;chrome.storage.local.get([l.STORAGEKEYS.CURRENTPROXY],(function(t){var r=t[l.STORAGEKEYS.CURRENTPROXY];if(r&&F.isObject(r)&&r.Host){e.numberOfCurrentFails=0,e.rescueURL=[],e.nRequest=[],e.generateRescueURL(r);var n=setInterval(function(){if(e.rescueURL.length>0){var t=e.rescueURL.pop();e.request(t,n,r)}else window.clearInterval(n)}.bind(this),1e3)}}))}},{key:"setPendingUnset",value:function(t){var e=this;e.isPendingUnset=!0,setTimeout((function(){if(e.lastError,e.lastSuccess,e.isRunning&&e.lastError>e.lastSuccess){if(e.nRequestCount<100)return e.startRescueRequest(t);Vt.clearSettings()}else e.lastError=0,e.lastSuccess=0,e.isPendingUnset=!1}),2e3)}},{key:"abortRemainingRequests",value:function(){var t=this;for(var e in t.nRequest)t.nRequest.hasOwnProperty(e)&&t.nRequest[e].abort()}},{key:"onRequestError",value:function(t){var e=this;(t.error==l.ERRORCODES.CONNECTIONERROR||void 0!==l.ERRORCODES.CONNECTIONERROR2&&t.error==l.ERRORCODES.CONNECTIONERROR2)&&chrome.storage.local.get([l.STORAGEKEYS.ISPROXYON,l.STORAGEKEYS.CURRENTPROXY],(function(t){t[l.STORAGEKEYS.ISPROXYON]&&e.onProxyErrorHappened(t[l.STORAGEKEYS.CURRENTPROXY])}))}},{key:"onRequestCompleted",value:function(t){t.hasOwnProperty("ip")&&this.onSuccessfulRequest()}},{key:"onSuccessfulRequest",value:function(){this.isRunning&&(this.lastSuccess=Date.now())}},{key:"onProxyErrorHappened",value:function(t){var e=this;e.isRunning&&!e.isPendingUnset&&(e.lastError=Date.now(),e.setPendingUnset(t))}}])&&Bt(e.prototype,r),n&&Bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Ft(t,e,r){return(e=Ht(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ht(n.key),n)}}function Ht(t){var e=function(t,e){if("object"!=Mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mt(e)?e:String(e)}const Vt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),chrome.storage.onChanged.addListener(this.onSettingsChanged.bind(this)),this.clearSettings()}var e,r,n;return e=t,(r=[{key:"clearSettings",value:function(t){jt.stopSession(),Rt.clearTokenWatcher(),bt.unset().then((function(){chrome.storage.local.get([l.STORAGEKEYS.ISPROXYON,l.STORAGEKEYS.LOCALE],(function(e){e[l.STORAGEKEYS.ISPROXYON]&&e[l.STORAGEKEYS.LOCALE]&&F.showConnectionNotification(e[l.STORAGEKEYS.LOCALE].NotifyVPNDisconnectTitle,e[l.STORAGEKEYS.LOCALE].NotifyVPNDisconnectMsg);var r=Ft(Ft(Ft({},l.STORAGEKEYS.ISPROXYON,!1),l.STORAGEKEYS.CURRENTPROXY,!1),l.STORAGEKEYS.TIMEEXPIRED,!1);chrome.storage.local.set(r,(function(){t&&t()}))}))}))}},{key:"onSettingsChanged",value:function(t,e){if(-1!==Object.keys(t).indexOf(l.STORAGEKEYS.ISPROXYON)){var r=t[l.STORAGEKEYS.ISPROXYON].newValue;F.setProxyStatusIcon(r),r?jt.startSession():jt.stopSession()}}},{key:"popupCallback",value:function(t,e,r){return function(n){try{t.postMessage({response:r,requestId:e,data:n})}catch(t){}}}},{key:"popupMessageHandler",value:function(t,e,r,n){"clearSettings"===r?this.clearSettings(this.popupCallback(t,e,r)):this.popupCallback(t,e,r)("")}}])&&qt(e.prototype,r),n&&qt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Wt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Wt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:R(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",g={};function v(){}function m(){}function E(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(I([])));A&&A!==r&&n.call(A,a)&&(S=A);var w=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Xt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function R(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?d:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xt(e)+" is not iterable")}return m.prototype=E,o(w,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:m,configurable:!0}),m.displayName=c(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function Jt(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qt(n.key),n)}}function Qt(t){var e=function(t,e){if("object"!=Xt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xt(e)?e:String(e)}const $t=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,o,i;return e=t,r=[{key:"isExtInstalled",value:function(t){var e=this;return new Promise((function(r,n){e.getAllExt().then((function(e){for(var o=0;o<e.length;o++)if(e[o].id==t)return r(!0);n({reason:"not_installed"})}))}))}},{key:"isExtActive",value:function(t){var e=this;return new Promise((function(r,n){e.getAllExt().then((function(e){for(var o=0;o<e.length;o++)if(!0===e[o].enabled&&e[o].id==t)return r(!0);n({reason:"not_active"})}))}))}},{key:"cacheExtWithProxyPerm",value:function(t){this.getAllProxyExt().then(this.saveInStorage.bind(this)).then((function(e){t&&t(e)}))}},{key:"saveInStorage",value:function(t){return new Promise((function(e,r){var n,o,i;chrome.storage.local.set((n={},o=l.STORAGEKEYS.PROXYEXTENSIONS,i=t,(o=Qt(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n),(function(){e(t)}))}))}},{key:"getAllExt",value:function(){return new Promise((function(t,e){return"FIREFOX"==l.PLATFORM.toUpperCase()?browser.management.getAll().then(t):chrome.management.getAll(t)}))}},{key:"setEnabled",value:function(t,e){return new Promise((function(r,n){"FIREFOX"==l.PLATFORM.toUpperCase()?browser.management.setEnabled(t,e).then(r):chrome.management.setEnabled(t,e,(function(){r()}))}))}},{key:"getAllProxyExt",value:function(t){var e=this;return new Promise((function(r,n){e.getAllExt().then((function(n){for(var o=[],i=0;i<n.length;i++)e.hasExtensionProxyPermission(n[i])&&chrome.runtime.id!==n[i].id&&-1===l.PROXYADDONS.indexOf(n[i].id)&&-1===l.EXCEPTIONADDONS.indexOf(n[i].id)&&n[i].enabled&&o.push(n[i]);if(t)return t(o);r(o)}))}))}},{key:"getProxyExtensions",value:(o=Wt().mark((function t(){var e,r,n;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,e.getAllExt();case 4:return r=t.sent,n=r.filter((function(t){return e.hasExtensionProxyPermission(t)&&-1===l.PROXYADDONS.indexOf(t.id)&&-1===l.EXCEPTIONADDONS.indexOf(t.id)&&chrome.runtime.id!==t.id})),t.abrupt("return",n);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){Jt(i,r,n,a,s,"next",t)}function s(t){Jt(i,r,n,a,s,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"popupCallback",value:function(t,e,r){return function(n){t.postMessage({response:r,requestId:e,data:n})}}},{key:"popupMessageHandler",value:function(t,e,r,n){"cacheExtWithProxyPerm"===r&&this.cacheExtWithProxyPerm(this.popupCallback(t,e,r))}},{key:"hasExtensionProxyPermission",value:function(t){return!!(t&&t.permissions&&t.permissions.indexOf("proxy")>-1)}}],r&&zt(e.prototype,r),n&&zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ee(n.key),n)}}function ee(t){var e=function(t,e){if("object"!=Zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zt(e)?e:String(e)}const re=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"isIpv4",value:function(t){var e=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/.exec(t);return null!==e&&!(e[1]>255||e[2]>255||e[3]>255||e[4]>255)}},{key:"isHostname",value:function(t){return t.match("^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]).)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$")}}])&&te(e.prototype,r),n&&te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ie(n.key),n)}}function ie(t){var e=function(t,e){if("object"!=ne(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ne(e)?e:String(e)}const ae=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"validate",value:function(t,e){var r=this;chrome.storage.local.get([l.STORAGEKEYS.CONFIGDATA],(function(n){var o=n[l.STORAGEKEYS.CONFIGDATA],i=o&&o.ipcheck_url?o.ipcheck_url:"undefined";i=F.stripProtocol(i);for(var a=e.newData,s=(e.currentData,r.readByNewLine(a)),u=[],c=[],f=0;f<s.length;f++){var h=r.removeUrlComponents(s[f].toLowerCase()).replace(" ","");!re.isIpv4(h)&&null==re.isHostname(h)||i==h?""!=s[f]&&c.push(s[f]):-1==u.indexOf(h)&&-1==ut.indexOf(h)&&u.push(h)}var p={bypassList:u,errorLines:c,valid:u.length,invalid:c.length};return p.bypassList.length>0?r.saveBypassList(p).then(t):r.saveBypassList({bypassList:[]}).then(t)}))}},{key:"saveBypassList",value:function(t){return new Promise((function(e,r){chrome.storage.local.get([l.STORAGEKEYS.BYPASSLIST,l.STORAGEKEYS.CONFIGDATA],(function(r){var n,o,i,a=r[l.STORAGEKEYS.CONFIGDATA],s=r[l.STORAGEKEYS.BYPASSLIST];s||(s={}),s[a&&a.uid?a.uid:""]=t.bypassList,chrome.storage.local.set((n={},o=l.STORAGEKEYS.BYPASSLIST,i=s,(o=ie(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n),(function(){e(t)}))}))}))}},{key:"removeUrlComponents",value:function(t){var e=F.stripProtocol(t);return e.includes("/")?e.split("/")[0]:e}},{key:"readByNewLine",value:function(t){return t.split("\n")}},{key:"popupCallback",value:function(t,e,r){return function(n){t.postMessage({response:r,requestId:e,data:n})}}},{key:"popupMessageHandler",value:function(t,e,r,n){"validate"===r&&this.validate(this.popupCallback(t,e,r),n)}}])&&oe(e.prototype,r),n&&oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function se(t){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(t)}function ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ce(n.key),n)}}function ce(t){var e=function(t,e){if("object"!=se(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==se(e)?e:String(e)}const le=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;e.registeredView=!1,e.onPermissionChanged=this.onPermissionChanged.bind(this),Z.isPermissionValid().then((function(t){t||F.setPermissionIcon(t)})),Z.registerController(e.onPermissionChanged)}var e,r,n;return e=t,(r=[{key:"onPermissionChanged",value:function(t){this.registeredView&&this.registeredView(t),F.setPermissionIcon(t),t||Vt.clearSettings((function(){F.setPermissionIcon(t)}))}},{key:"registerView",value:function(t,e){var r=this;r.registeredView=t,e.onDisconnect.addListener(r.onViewDisconnect.bind(r))}},{key:"onViewDisconnect",value:function(){this.registeredView=!1}},{key:"popupCallback",value:function(t,e,r,n,o){return function(i){t.postMessage({response:r,requestId:e,data:i,targetMethod:r,targetApi:n,isEvent:o})}}},{key:"popupMessageHandler",value:function(t,e,r,n,o,i){"registerView"===r?this.registerView(this.popupCallback(t,e,r,o,i),t):this.popupCallback(t,e,r)("")}}])&&ue(e.prototype,r),n&&ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()),fe={ActivationVerifyEmail:"Verify your email address",ActivationTitle:"Yay! You're Almost There.",ActivationTitle2:"Activate your account to finish your signing up.",ActivationText:"We've sent you a welcome email with an activation link. Simply click that link and afterwards login to your account.",ActivationWarning:"It can take up to 5 minutes to receive the email with an activation link. Please don't forget to check your spam and junk folder.",ActivationResendError:"You have requested this function too many times in a short amount of time. Please try again in 5 minutes.",ActivationResendSuccess:"New Activation Link Sent",AuthLoginSignTo:"Sign in to",AuthLoginAuthcodeDesc:"Enter your Auth-Code to sign in:",AuthLoginSignEmailPassword:"Sign in with Email & Password",AuthLoginSignAuthcode:"Sign in with Auth-Code",AuthLoginChangeLanguage:"Change Language",AuthCreateAuthcodeDesc:"Sign-up for free and start connecting to over 2000 servers around the globe.",AuthCreateSuccessTitle:"Yay! Your account is ready!",AuthcodeConTitle:"This is your Auth-Code",AuthcodeConClipboardCopied:"Auth-Code copied to clipboard",AuthcodeConClipboardClickCopy:"* Click on it to copy on clipboard *",AuthcodeConKeepSafe:"Keep it somewhere safe!",AuthcodeConClickShow:"Click here to show Auth-Code",AuthCreateSuccessDesc1:"This is your Auth-Code. Think of it as your key to your account. Please keep it somewhere safe!",AuthCreateSuccessDesc2:"You will need it to login to your account on other devices or when you logout.",AuthCreateLetsStart:"Let's start!",AuthFailed:"Authentication failed",EmailWarningTitle:"We're discontinuing support for Email & Password-Login",EmailWarningDesc:"You logged in with your email & password. Starting from next version, we are discontinuing support for Email&Password-Login. Therefore please copy your Auth-Code and keep it safe."};function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function pe(t,e,r){return(e=de(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,de(n.key),n)}}function de(t){var e=function(t,e){if("object"!=he(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==he(e)?e:String(e)}const ge=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.isRefreshing=!1,this.isLocaleRefreshing=!1,this.popupMessageHandler=this.popupMessageHandler.bind(this),chrome.storage.onChanged.addListener(this.onSettingsChanged.bind(this))}var e,r,n;return e=t,(r=[{key:"setRefreshList",value:function(t,e){var r=this;if(r.isRefreshing&&t)return t();r.isRefreshing=!0,setTimeout((function(){chrome.storage.local.get([l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.LSER],(function(t){var e=t[l.STORAGEKEYS.LSER],n={isIgnoreFail:!0,userData:t[l.STORAGEKEYS.USERDATA]};Kt.login((function(t){r.isRefreshing=!1,(F.isResponseMinus20(t)||F.isResponseAuthError(t))&&chrome.storage.local.get([l.STORAGEKEYS.LOCALE],(function(e){var r=F.getFallbackLocale("AuthFailed",e[l.STORAGEKEYS.LOCALE],fe),n=F.isResponseMinus20(t)?t.message:r;chrome.storage.local.set(pe({},l.STORAGEKEYS.LASTLOGOUTREASON,n),(function(){chrome.storage.local.remove([l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.CONFIGDATA,l.STORAGEKEYS.CONFIGDATATTL,l.STORAGEKEYS.CONFIGHARDTTL])}))})),(F.isResponseMinusOne(t)||F.isMaintenanceMode(t)||0===t)&&chrome.storage.local.get([l.STORAGEKEYS.CONFIGDATA],(function(t){var e=t[l.STORAGEKEYS.CONFIGDATA],r=!(!e||!e.config_intervals)&&e.config_intervals,n=!!F.isObject(r)&&r.soft,o=F.getConfigTTL(n,5);chrome.storage.local.set(pe({},l.STORAGEKEYS.CONFIGDATATTL,o))})),(void 0===e||F.isResponse200(t)&&t.config&&t.config.l1ser>e)&&r.setLocaleRefresh()}),n)}))}),1e3),t()}},{key:"setLocaleRefresh",value:function(){var t=this;this.isLocaleRefreshing=!0,Kt.getLocale((function(){t.isLocaleRefreshing=!1}),{ignoreFail:!0})}},{key:"popupCallback",value:function(t,e,r){return function(n){t.postMessage({response:r,requestId:e,data:n})}}},{key:"popupMessageHandler",value:function(t,e,r,n){"setRefreshList"===r?this.setRefreshList(this.popupCallback(t,e,r),n):this.popupCallback(t,e,r)("")}},{key:"onSettingsChanged",value:function(t,e){var r=Object.keys(t);if(r.indexOf(l.STORAGEKEYS.CONFIGDATA)>-1&&r.indexOf(l.STORAGEKEYS.USERDATA)>-1){var n=void 0===t[l.STORAGEKEYS.USERDATA].newValue,o=void 0===t[l.STORAGEKEYS.CONFIGDATA].newValue;if(n&&o)return void Vt.clearSettings()}if(r.indexOf(l.STORAGEKEYS.CONFIGDATA)>-1){var i=t[l.STORAGEKEYS.CONFIGDATA].newValue;i&&F.isObject(i)&&i.hasOwnProperty("user_status")&&i.user_status==l.STATUS.BLOCKED&&Vt.clearSettings()}}}])&&ye(e.prototype,r),n&&ye(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ee(n.key),n)}}function Ee(t){var e=function(t,e){if("object"!=ve(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ve(e)?e:String(e)}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.port=null,chrome.runtime.onConnect.addListener(this.onConnect.bind(this))}var e,r,n;return e=t,(r=[{key:"onConnect",value:function(t){"background-page-port"==t.name&&(this.port=t,this.port.onMessage.addListener(this.onMessage.bind(this)))}},{key:"onMessage",value:function(t){switch(t.request){case"api":Kt.popupMessageHandler(this.port,t.requestId,t.method,t.data);break;case"baseFinder":st.popupMessageHandler(this.port,t.requestId,t.method,t.data);break;case"ProxySetting":Vt.popupMessageHandler(this.port,t.requestId,t.method,t.data);break;case"Management":$t.popupMessageHandler(this.port,t.requestId,t.method,t.data);break;case"Bypasslist":ae.popupMessageHandler(this.port,t.requestId,t.method,t.data);break;case"PermissionController":le.popupMessageHandler(this.port,t.requestId,t.method,t.data,t.request,t.isEvent);break;case"ConfigUpdater":ge.popupMessageHandler(this.port,t.requestId,t.method,t.data,t.request,t.isEvent)}}}])&&me(e.prototype,r),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Se(t){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(t)}function be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ae(n.key),n)}}function Ae(t){var e=function(t,e){if("object"!=Se(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Se(e)?e:String(e)}const we=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timer=!1,this.func=e,this.interval=r}var e,r,n;return e=t,(r=[{key:"start",value:function(){this.isRunning()||(this.timer=setInterval(this.func,this.interval))}},{key:"stop",value:function(){clearInterval(this.timer),this.timer=!1}},{key:"isRunning",value:function(){return!1!==this.timer}},{key:"update",value:function(t){this.interval=t,this.isRunning()&&(this.stop(),this.start())}}])&&be(e.prototype,r),n&&be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Te(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Te=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:R(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",g={};function v(){}function m(){}function E(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(I([])));A&&A!==r&&n.call(A,a)&&(S=A);var w=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Oe(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function R(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?d:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Oe(e)+" is not iterable")}return m.prototype=E,o(w,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:m,configurable:!0}),m.displayName=c(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function Re(t,e,r){return(e=ke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Le(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function xe(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Le(i,n,o,a,s,"next",t)}function s(t){Le(i,n,o,a,s,"throw",t)}a(void 0)}))}}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ke(n.key),n)}}function ke(t){var e=function(t,e){if("object"!=Oe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oe(e)?e:String(e)}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;e.init(),this.errorCodes=["net::ERR_PROXY_CONNECTION_FAILED","NS_ERROR_PROXY_CONNECTION_REFUSED"],this.onProxyStatusChanged=this.onProxyStatusChanged.bind(this),this.onRequestError=this.onRequestError.bind(this),this.closeDisconnectedTab=this.closeDisconnectedTab.bind(this),chrome.runtime.onConnect.addListener(this.onConnect.bind(this)),chrome.storage.onChanged.addListener(e.onSettingsChanged.bind(e)),chrome.webRequest.onErrorOccurred.addListener(e.onRequestError,{urls:["<all_urls>"]}),this.timeLeft=0,this.lastTimeLeft=60,this.opening=!1,this.updateIntervalTime=6e4,this.updateInterval=!1,this.updateInterval=new we(this.countDown.bind(this),this.updateIntervalTime),this.lastMinuteInterval=new we(this.lastMinuteCountDown.bind(this),500)}var e,r,n,o,i,a,s,u,c,f;return e=t,r=[{key:"init",value:function(){}},{key:"connectPort",value:function(t){var e=this;e.Port=t,e.Port.onMessage.addListener(e.onPortMessage.bind(this)),e.Port.onDisconnect.addListener(e.onPortDisconnect.bind(this))}},{key:"startSearch",value:(f=xe(Te().mark((function t(e){var r;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this,chrome.storage.local.set(Re(Re({},l.STORAGEKEYS.PROXYSEARCHLOCK,!0),l.STORAGEKEYS.PROXYSEARCH,{}),xe(Te().mark((function t(){var n,o;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.abortController=new AbortController,n=r.abortController.signal,t.prev=3,t.next=6,xt.findProxy(e,n);case 6:o=t.sent,t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(3),"CANCELED"!=t.t0){t.next=14;break}return t.abrupt("return");case 14:o?r.searchSuccess():r.searchFailed(e.countryCode);case 16:case"end":return t.stop()}}),t,null,[[3,9]])}))));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"searchSuccess",value:function(t){var e=this;e.init(),e.Port&&e.Port.postMessage({action:"success"})}},{key:"searchFailed",value:function(t){var e=this;chrome.storage.local.set(Re(Re(Re({},l.STORAGEKEYS.PROXYSEARCHFAILED,!0),l.STORAGEKEYS.PROXYSEARCHFAILEDCOUNTRY,t),l.STORAGEKEYS.PROXYSEARCHLOCK,!0),(function(){Vt.clearSettings(),e.init(),e.Port&&e.Port.postMessage({action:"failed",data:t})}))}},{key:"abortSearch",value:function(){this.abortController&&this.abortController.abort("CANCLED")}},{key:"onPortMessage",value:function(t){switch(t.action){case"search":this.startSearch(t.data);break;case"cancel":this.abortSearch()}}},{key:"onPortDisconnect",value:function(){this.Port=!1}},{key:"onConnect",value:function(t){"proxysearch-port"==t.name&&this.connectPort(t)}},{key:"onSettingsChanged",value:function(t,e){var r=Object.keys(t);if(r.indexOf(l.STORAGEKEYS.CONFIGDATA)>-1&&r.indexOf(l.STORAGEKEYS.USERDATA)>-1){var n=void 0===t[l.STORAGEKEYS.USERDATA].newValue,o=void 0===t[l.STORAGEKEYS.CONFIGDATA].newValue;n&&o&&this.abortSearch()}"local"==e&&r.indexOf(l.STORAGEKEYS.ISPROXYON)>-1&&this.onProxyStatusChanged(t)}},{key:"getLeftTime",value:function(t){if(!(t&&F.isObject(t)&&t.hasOwnProperty("tinterval")&&t.tinterval.hasOwnProperty("every")&&t.tinterval.hasOwnProperty("page"))||F.isUserPremium(t))return 0;try{var e=parseInt(t.tinterval.every);return Number.isInteger(e)&&e>0?e:0}catch(t){return 0}}},{key:"lastMinuteCountDown",value:(c=xe(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.lastTimeLeft=this.lastTimeLeft-1,0!=this.lastTimeLeft){t.next=8;break}return this.setBadge(" X ","#ED213A"),this.lastMinuteInterval.stop(),t.next=6,F.setStorage(Re({},l.STORAGEKEYS.TIMEEXPIRED,!0));case 6:return bt.set({Host:"127.0.0.1",Port:65534}),t.abrupt("return");case 8:this.lastTimeLeft%2==1?this.setBadge(this.lastTimeLeft+"","#ED213A"):this.setBadge("","#ED213A");case 9:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"countDown",value:(u=xe(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.timeLeft=this.timeLeft-1,!(this.timeLeft<2)){t.next=7;break}return this.updateInterval.stop(),this.lastTimeLeft=60,this.lastMinuteInterval.start(),t.abrupt("return");case 7:this.setBadge(this.timeLeft+" min","#0072ff");case 8:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"setBadgeColor",value:function(t){return new Promise((function(e,r){chrome.browserAction.setBadgeBackgroundColor({color:t},e)}))}},{key:"setBadge",value:(s=xe(Te().mark((function t(e,r){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}return t.next=4,this.setBadgeColor(r);case 4:if(""===e){t.next=7;break}return t.next=7,F.setStorage(Re({},l.STORAGEKEYS.TLEFT,e));case 7:chrome.browserAction.setBadgeText({text:e+""});case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"closeDisconnectedTab",value:(a=xe(Te().mark((function t(){var e,r;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,F.getStorage([l.STORAGEKEYS.CONFIGDATA]);case 3:if(e=t.sent,r=e[l.STORAGEKEYS.CONFIGDATA],F.isObject(r)&&r.hasOwnProperty("tinterval")&&r.tinterval.hasOwnProperty("page")&&!F.isUserPremium(r))try{chrome.tabs.query({url:r.tinterval.page},(function(t){t.length>0&&chrome.tabs.remove(t[0].id)}))}catch(t){}case 6:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"onProxyStatusChanged",value:(i=xe(Te().mark((function t(e){var r,n,o,i,a;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this,!e.hasOwnProperty(l.STORAGEKEYS.ISPROXYON)){t.next=20;break}if(!1!==(n=e[l.STORAGEKEYS.ISPROXYON]).oldValue||!0!==n.newValue){t.next=12;break}return t.next=6,F.removeStorage(l.STORAGEKEYS.TLEFT);case 6:return t.next=8,F.getStorage([l.STORAGEKEYS.CONFIGDATA]);case 8:o=t.sent,i=o[l.STORAGEKEYS.CONFIGDATA],(a=r.getLeftTime(i))>0&&(r.timeLeft=a,this.setBadge(r.timeLeft+" min","#0072ff"),a<2?this.lastMinuteInterval.start():this.updateInterval.start());case 12:if(!0!==n.oldValue||!1!==n.newValue){t.next=20;break}return this.updateInterval.stop(),this.lastMinuteInterval.stop(),this.setBadge(""),t.next=18,F.removeStorage(l.STORAGEKEYS.TLEFT);case 18:return t.next=20,r.closeDisconnectedTab();case 20:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"onRequestError",value:(o=xe(Te().mark((function t(e){var r,n,o,i,a;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=this).opening){t.next=4;break}return t.abrupt("return");case 4:return r.opening=!0,setTimeout((function(){r.opening=!1}),1500),t.next=8,F.getStorage([l.STORAGEKEYS.CONFIGDATA,l.STORAGEKEYS.TIMEEXPIRED,l.STORAGEKEYS.ISPROXYON]);case 8:n=t.sent,o=n[l.STORAGEKEYS.ISPROXYON],i=n[l.STORAGEKEYS.TIMEEXPIRED],a=n[l.STORAGEKEYS.CONFIGDATA],!0===o&&!0===i&&F.isObject(a)&&a.hasOwnProperty("tinterval")&&!F.isUserPremium(a)&&e&&e.error&&r.errorCodes.includes(e.error)&&"main_frame"==e.type&&chrome.tabs.query({url:a.tinterval.page},(function(t){t.length>0?chrome.tabs.update(t[0].id,{active:!0}):F.openNewTab(a.tinterval.page)}));case 13:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],r&&_e(e.prototype,r),n&&_e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Pe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Pe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:R(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",g={};function v(){}function m(){}function E(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(I([])));A&&A!==r&&n.call(A,a)&&(S=A);var w=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ie(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function R(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?d:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ie(e)+" is not iterable")}return m.prototype=E,o(w,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:m,configurable:!0}),m.displayName=c(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function Ce(t,e,r){return(e=Ke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ne(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Ge(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ne(i,n,o,a,s,"next",t)}function s(t){Ne(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ke(n.key),n)}}function Ke(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ie(e)?e:String(e)}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;e.onAuthFirefoxHandler=this.onAuthFirefoxHandler.bind(this),e.onAuthChromeHandler=this.onAuthChromeHandler.bind(this),e.onPermissionChange=this.onPermissionChange.bind(this),Z.subscribePermissionChange(e.onPermissionChange),Z.isPermissionValid().then((function(t){t&&e.registerListeners()})),e.authPromise=this.authPromise.bind(this),e.asyncFirefoxHandle=this.asyncFirefoxHandle.bind(this),e.pending=[],e.onAuths=[],e.testReqRunning=!1,e.abortController=!1,e.testToken=""}var e,r,n,o,i,a,s,u,c;return e=t,r=[{key:"onPermissionChange",value:function(t){t?this.registerListeners():this.removeListeners()}},{key:"registerListeners",value:function(){var t=this;"FIREFOX"===l.PLATFORM.toUpperCase()?chrome.webRequest.onAuthRequired.hasListener(t.onAuthFirefoxHandler)||chrome.webRequest.onAuthRequired.addListener(t.onAuthFirefoxHandler,{urls:["<all_urls>"]},["blocking"]):chrome.webRequest.onAuthRequired.hasListener(t.onAuthChromeHandler)||chrome.webRequest.onAuthRequired.addListener(t.onAuthChromeHandler,{urls:["<all_urls>"]},["asyncBlocking"])}},{key:"removeListeners",value:function(){"FIREFOX"===l.PLATFORM.toUpperCase()?chrome.webRequest.onAuthRequired.removeListener(this.onAuthFirefoxHandler):chrome.webRequest.onAuthRequired.removeListener(this.onAuthChromeHandler)}},{key:"getCachedToken",value:function(t){var e=this;return new Promise((function(r,n){chrome.storage.local.get(l.STORAGEKEYS.CONFIGDATA,(function(n){var o=n[l.STORAGEKEYS.CONFIGDATA];if(o&&o.hasOwnProperty("p_login")&&o.hasOwnProperty("p_token")){var i=o.p_login,a=o.p_token,s={authCredentials:{username:i,password:t?e.testToken:a}};return r(s)}return r({cancel:!0})}))}))}},{key:"freshToken",value:(c=Ge(Pe().mark((function t(e){var r,n,o,i,a;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,t.next=3,F.getStorage(l.STORAGEKEYS.CONFIGDATATTL);case 3:if(n=t.sent,(o=n[l.STORAGEKEYS.CONFIGDATATTL])&&!(o>F.getDateNow())){t.next=11;break}return t.next=8,F.setStorage(Ce({},l.STORAGEKEYS.MARKEDCONFIG,!0));case 8:return t.next=10,this.getCachedToken(e);case 10:return t.abrupt("return",t.sent);case 11:return t.next=13,Kt.promiseLogin(!0);case 13:if(i=t.sent,!F.isResponse200(i)||!i.config){t.next=19;break}return a=i.config,t.abrupt("return",{authCredentials:{username:a.p_login,password:e?r.testToken:a.p_token}});case 19:return t.next=21,F.setStorage(Ce({},l.STORAGEKEYS.MARKEDCONFIG,!0));case 21:return t.abrupt("return",{cancel:!0});case 22:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"letsWait",value:(u=Ge(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout(t,15e3)})));case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"startTestReq",value:(s=Ge(Pe().mark((function t(){var e,r,n,o,i,a;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this).testReqRunning){t.next=22;break}return e.abortController=new AbortController,r=e.abortController.signal,e.testReqRunning=!0,t.next=7,xt.testReq(r);case 7:(n=t.sent)||e.disconnectProxy(),o=0;case 11:if(!(o<e.pending.length)){t.next=20;break}return i=e.pending[o],t.next=15,e.getCachedToken();case 15:a=t.sent,i(n?a:{cancel:!0});case 17:o++,t.next=11;break;case 20:e.pending=[],e.testReqRunning=!1;case 22:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"disconnectProxy",value:(a=Ge(Pe().mark((function t(){var e,r,n,o;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.unset();case 2:return t.next=4,F.getStorage([l.STORAGEKEYS.ISPROXYON,l.STORAGEKEYS.LOCALE]);case 4:return e=t.sent,r=e[l.STORAGEKEYS.ISPROXYON],n=e[l.STORAGEKEYS.LOCALE],r&&n&&F.showConnectionNotification(n.NotifyVPNDisconnectTitle,n.NotifyVPNDisconnectMsg),o=Ce(Ce({},l.STORAGEKEYS.ISPROXYON,!1),l.STORAGEKEYS.CURRENTPROXY,!1),t.next=11,F.setStorage(o);case 11:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"onAuthChromeHandler",value:(i=Ge(Pe().mark((function t(e,r){var n,o,i,a,s,u,c,l,f,h;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,e.isProxy){t.next=5;break}return t.abrupt("return",r());case 5:return t.next=7,xt.challenge(e);case 7:if(o=t.sent,i=o.isOur,a=o.isTest,s=o.mode,u=o.testIdCount,!i){t.next=45;break}if("pac"!=s){t.next=23;break}if(!a||0!=u){t.next=17;break}return t.next=15,this.getCachedToken();case 15:return c=t.sent,t.abrupt("return",r(c));case 17:if(!a||1!=u){t.next=22;break}return t.next=20,this.freshToken();case 20:return l=t.sent,t.abrupt("return",r(l));case 22:return t.abrupt("return",r({cancel:!0}));case 23:if("fixed"!=s){t.next=43;break}if(!a||0!=u){t.next=29;break}return t.next=27,this.getCachedToken();case 27:return f=t.sent,t.abrupt("return",r(f));case 29:if(!a||1!=u){t.next=34;break}return t.next=32,this.freshToken();case 32:return h=t.sent,t.abrupt("return",r(h));case 34:if(!(a&&u>1)){t.next=39;break}return t.next=37,n.disconnectProxy();case 37:return n.pending.forEach((function(t){t({cancel:!0})})),t.abrupt("return",r({cancel:!0}));case 39:return n.pending.push(r),n.testReqRunning||n.startTestReq(),t.abrupt("return",!0);case 43:t.next=46;break;case 45:return t.abrupt("return",r());case 46:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"asyncFirefoxHandle",value:function(t){var e=this,r=this;return new Promise(function(){var n=Ge(Pe().mark((function n(o,i){var a,s,u,c,l,f,h,p,y;return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,xt.challenge(t);case 3:if(a=n.sent,s=a.isOur,u=a.isTest,c=a.mode,l=a.testIdCount,!s){n.next=41;break}if("pac"!=c){n.next=20;break}if(!u||0!=l){n.next=14;break}return n.next=12,e.getCachedToken();case 12:return f=n.sent,n.abrupt("return",o(f));case 14:if(!u||1!=l){n.next=19;break}return n.next=17,e.freshToken();case 17:return h=n.sent,n.abrupt("return",o(h));case 19:return n.abrupt("return",o({cancel:!0}));case 20:if("fixed"!=c){n.next=39;break}if(!u||0!=l){n.next=26;break}return n.next=24,e.getCachedToken();case 24:return p=n.sent,n.abrupt("return",o(p));case 26:if(!u||1!=l){n.next=31;break}return n.next=29,e.freshToken();case 29:return y=n.sent,n.abrupt("return",o(y));case 31:if(!(u&&l>1)){n.next=36;break}return n.next=34,r.disconnectProxy();case 34:return r.pending.forEach((function(t){t({cancel:!0})})),n.abrupt("return",o({cancel:!0}));case 36:r.testReqRunning||r.startTestReq(),r.pending.push(o);case 39:n.next=42;break;case 41:o();case 42:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}},{key:"onAuthFirefoxHandler",value:(o=Ge(Pe().mark((function t(e){var r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this,e.isProxy){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",r.asyncFirefoxHandle(e));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"authPromise",value:function(){var t=this;return new Promise((function(e,r){t.pending.push(e)}))}}],r&&Ye(e.prototype,r),n&&Ye(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());var De=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3];r=Ue(r,n,o,i,e[0],7,-680876936),i=Ue(i,r,n,o,e[1],12,-389564586),o=Ue(o,i,r,n,e[2],17,606105819),n=Ue(n,o,i,r,e[3],22,-1044525330),r=Ue(r,n,o,i,e[4],7,-176418897),i=Ue(i,r,n,o,e[5],12,1200080426),o=Ue(o,i,r,n,e[6],17,-1473231341),n=Ue(n,o,i,r,e[7],22,-45705983),r=Ue(r,n,o,i,e[8],7,1770035416),i=Ue(i,r,n,o,e[9],12,-1958414417),o=Ue(o,i,r,n,e[10],17,-42063),n=Ue(n,o,i,r,e[11],22,-1990404162),r=Ue(r,n,o,i,e[12],7,1804603682),i=Ue(i,r,n,o,e[13],12,-40341101),o=Ue(o,i,r,n,e[14],17,-1502002290),n=Ue(n,o,i,r,e[15],22,1236535329),r=je(r,n,o,i,e[1],5,-165796510),i=je(i,r,n,o,e[6],9,-1069501632),o=je(o,i,r,n,e[11],14,643717713),n=je(n,o,i,r,e[0],20,-373897302),r=je(r,n,o,i,e[5],5,-701558691),i=je(i,r,n,o,e[10],9,38016083),o=je(o,i,r,n,e[15],14,-660478335),n=je(n,o,i,r,e[4],20,-405537848),r=je(r,n,o,i,e[9],5,568446438),i=je(i,r,n,o,e[14],9,-1019803690),o=je(o,i,r,n,e[3],14,-187363961),n=je(n,o,i,r,e[8],20,1163531501),r=je(r,n,o,i,e[13],5,-1444681467),i=je(i,r,n,o,e[2],9,-51403784),o=je(o,i,r,n,e[7],14,1735328473),n=je(n,o,i,r,e[12],20,-1926607734),r=Me(r,n,o,i,e[5],4,-378558),i=Me(i,r,n,o,e[8],11,-2022574463),o=Me(o,i,r,n,e[11],16,1839030562),n=Me(n,o,i,r,e[14],23,-35309556),r=Me(r,n,o,i,e[1],4,-1530992060),i=Me(i,r,n,o,e[4],11,1272893353),o=Me(o,i,r,n,e[7],16,-155497632),n=Me(n,o,i,r,e[10],23,-1094730640),r=Me(r,n,o,i,e[13],4,681279174),i=Me(i,r,n,o,e[0],11,-358537222),o=Me(o,i,r,n,e[3],16,-722521979),n=Me(n,o,i,r,e[6],23,76029189),r=Me(r,n,o,i,e[9],4,-640364487),i=Me(i,r,n,o,e[12],11,-421815835),o=Me(o,i,r,n,e[15],16,530742520),n=Me(n,o,i,r,e[2],23,-995338651),r=Fe(r,n,o,i,e[0],6,-198630844),i=Fe(i,r,n,o,e[7],10,1126891415),o=Fe(o,i,r,n,e[14],15,-1416354905),n=Fe(n,o,i,r,e[5],21,-57434055),r=Fe(r,n,o,i,e[12],6,1700485571),i=Fe(i,r,n,o,e[3],10,-1894986606),o=Fe(o,i,r,n,e[10],15,-1051523),n=Fe(n,o,i,r,e[1],21,-2054922799),r=Fe(r,n,o,i,e[8],6,1873313359),i=Fe(i,r,n,o,e[15],10,-30611744),o=Fe(o,i,r,n,e[6],15,-1560198380),n=Fe(n,o,i,r,e[13],21,1309151649),r=Fe(r,n,o,i,e[4],6,-145523070),i=Fe(i,r,n,o,e[11],10,-1120210379),o=Fe(o,i,r,n,e[2],15,718787259),n=Fe(n,o,i,r,e[9],21,-343485551),t[0]=We(r,t[0]),t[1]=We(n,t[1]),t[2]=We(o,t[2]),t[3]=We(i,t[3])},Be=function(t,e,r,n,o,i){return e=We(We(e,t),We(n,i)),We(e<<o|e>>>32-o,r)},Ue=function(t,e,r,n,o,i,a){return Be(e&r|~e&n,t,e,o,i,a)},je=function(t,e,r,n,o,i,a){return Be(e&n|r&~n,t,e,o,i,a)},Me=function(t,e,r,n,o,i,a){return Be(e^r^n,t,e,o,i,a)},Fe=function(t,e,r,n,o,i,a){return Be(r^(e|~n),t,e,o,i,a)},qe=function(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r},He="0123456789abcdef".split(""),Ve=function(t){for(var e="",r=0;r<4;r++)e+=He[t>>8*r+4&15]+He[t>>8*r&15];return e},Xe=function(t){return function(t){for(var e=0;e<t.length;e++)t[e]=Ve(t[e]);return t.join("")}(function(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)De(n,qe(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(De(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,De(n,o),n}(t))},We=function(t,e){return t+e&4294967295};if("5d41402abc4b2a76b9719d911017c592"!=Xe("hello"))We=function(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r};const Je=Xe;function ze(t){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(t)}function Qe(t,e,r){return(e=Ze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ze(n.key),n)}}function Ze(t){var e=function(t,e){if("object"!=ze(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ze(e)?e:String(e)}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;this.init(),this.qSize=10,this.batchSize=100,this.entryMaxLength=1e5,this.batchMaxLength=7e5,this.qMaxSize=2e6,this.sendInterval=9e5,this.batchInterval=new we(e.sendCache.bind(this),this.sendInterval),this.batchInterval.start(),this.autoProxy=[],this.returnedBatches=[],this.isCaching=!1,this.isSending=!1,this.checkProxyTimeout=!1,this.sendCacheTimeout=!1,this.recacheBatchesTimeout=!1,e.onRequestError=this.onRequestError.bind(this),e.onPermissionChange=this.onPermissionChange.bind(this),e.checkProxy=this.checkProxy.bind(this),Z.subscribePermissionChange(e.onPermissionChange),Z.isPermissionValid().then((function(t){t&&e.registerListeners()}))}var e,r,n;return e=t,(r=[{key:"onPermissionChange",value:function(t){t?this.registerListeners():this.removeListeners()}},{key:"registerListeners",value:function(){chrome.webRequest.onErrorOccurred.hasListener(this.onRequestError)||chrome.webRequest.onErrorOccurred.addListener(this.onRequestError,{urls:["<all_urls>"]})}},{key:"removeListeners",value:function(){chrome.webRequest.onErrorOccurred.removeListener(this.onRequestError)}},{key:"init",value:function(){var t=this;t.autoProxy=[],t.isRunning=!1,t.current=""}},{key:"check",value:function(t){var e=this;t&&e.getOriginUrl(t).then((function(r){e.getUserTag().then((function(n){t.referer=r,t.errorSource=n,t.s=e.getEntrySize(t),e.autoProxy.length>1e3&&(e.autoProxy=[]),e.isEntrySizeValid(t.s)&&(e.autoProxy.push(t),e.checkProxy())}))}))}},{key:"getEntrySize",value:function(t){try{var e=JSON.stringify(t).length;return e||-1}catch(t){return-1}}},{key:"isEntrySizeValid",value:function(t){return t<this.entryMaxLength}},{key:"addItemToQ",value:function(t,e,r){var n=this;if(t&&Array.isArray(t)||(t=[]),0===t.length){var o={s:e.s,b:[e]};t.push(o)}else{(t.length>=n.qSize||r>n.qMaxSize)&&t.shift();var i=t[t.length-1];i.b.length>=n.batchSize||i.s+e.s>n.batchMaxLength?(o={s:e.s,b:[e]},t.push(o)):(i.s+=e.s,i.b.push(e))}return t}},{key:"addBatchToQ",value:function(t,e,r){var n=this;if(e&&Array.isArray(e))return e.forEach((function(e){t=n.addItemToQ(t,e,r)})),t}},{key:"pushToCache",value:function(t){var e=this;return new Promise((function(r,n){e.getBytesInUse(l.STORAGEKEYS.RCACHE).then((function(o){chrome.storage.local.get(l.STORAGEKEYS.RCACHE,(function(i){try{var a=i[l.STORAGEKEYS.RCACHE];if(Array.isArray(t))a=e.addBatchToQ(a,t,o);else{var s=Object.assign({},t);s.cv=l.VERSION,a=e.addItemToQ(a,s,o)}chrome.storage.local.set(Qe({},l.STORAGEKEYS.RCACHE,a),(function(){r(t)}))}catch(t){n(t)}}))}))}))}},{key:"getBytesInUse",value:function(t){var e=this;return"firefox"==l.PLATFORM.toLowerCase()?new Promise((function(r,n){chrome.storage.local.get(t,(function(n){r(e.getEntrySize(n[t]))}))})):new Promise((function(e,r){try{chrome.storage.local.getBytesInUse(t,(function(t){e(t)}))}catch(t){e(0)}}))}},{key:"getOriginUrl",value:function(t){var e=this;return new Promise((function(r,n){return t?t&&t.hasOwnProperty("originUrl")&&t.originUrl?r(F.escapeParamsOfUrl(t.originUrl)):chrome&&chrome.tabs&&chrome.tabs.get&&t.hasOwnProperty("tabId")&&e.isInt(t.tabId)&&t.tabId>0?void chrome.tabs.get(t.tabId,(function(t){return r(F.escapeParamsOfUrl(t.url))})):r(""):r("")}))}},{key:"getUserTag",value:function(){return new Promise((function(t,e){chrome.storage.local.get(l.STORAGEKEYS.CONFIGDATA,(function(e){return e&&e[l.STORAGEKEYS.CONFIGDATA]?t(e[l.STORAGEKEYS.CONFIGDATA].uid):t("")}))}))}},{key:"doneCaching",value:function(){this.isCaching=!1,this.checkProxy()}},{key:"checkProxy",value:function(){var t=this;if(0!=t.autoProxy.length)if(t.isCaching)clearTimeout(t.checkProxyTimeout),t.checkProxyTimeout=setTimeout(t.checkProxy.bind(t),500);else{var e=t.autoProxy.pop();e.url=F.escapeParamsOfUrl(e.url),t.isCaching=!0,t.checkIsCached(e.url).then((function(r){if(r)t.doneCaching();else try{e.cacheTime=F.getDateNow(),t.pushToCache(e).then((function(){t.doneCaching()})).catch((function(e){t.doneCaching()}))}catch(e){t.doneCaching()}})).catch((function(e){t.doneCaching()}))}}},{key:"isInt",value:function(t){var e;return!isNaN(t)&&(0|(e=parseFloat(t)))===e}},{key:"checkIsCached",value:function(t){return new Promise((function(e,r){chrome.storage.local.get([l.STORAGEKEYS.HASHCACHE,l.STORAGEKEYS.BYPASSINGHOSTS],(function(n){var o=n[l.STORAGEKEYS.BYPASSINGHOSTS];try{var i=Je(t),a=new URL(t);if(null!=t.match(l.TESTREQUESTREGEX)||o&&Array.isArray(o)&&o.includes(a.hostname))return e(!0);var s=n[l.STORAGEKEYS.HASHCACHE],u=F.getDateMid();if(null!=s&&void 0!==s[u]&&void 0!==s[u][i]&&s[u][i]>=F.getDateNow())return e(!0);var c=null!=s?s:{};Object.keys(c).length>=10&&(c={});var f=F.getDateNow()-172800;Object.keys(c).forEach((function(t,e){if(c.hasOwnProperty(t)){var r=parseInt(t);(!F.isInt(r)||r<f)&&delete c[t]}})),void 0===c[u]&&(c[u]={}),void 0===c[u].length&&(c[u].length=0),c[u].length>1e3&&(c[u]={}),c[u].length+=1,c[u][i]=F.getDateNow()+3600,chrome.storage.local.set(Qe({},l.STORAGEKEYS.HASHCACHE,c),(function(){e(!1)}))}catch(t){r(t)}}))}))}},{key:"recacheBatches",value:function(){var t=this;if(0!==t.returnedBatches.length){if(t.isCaching)return clearTimeout(t.recacheBatchesTimeout),void(t.recacheBatchesTimeout=setTimeout(t.recacheBatches.bind(this),500));t.isCaching=!0;var e=t.returnedBatches.pop();t.pushToCache(e).then((function(){t.isCaching=!1})).catch((function(e){t.isCaching=!1,t.recacheBatches()}))}}},{key:"isResponseValid",value:function(t){return!!t&&!!(t.hasOwnProperty("saved")&&t.hasOwnProperty("received")&&t.hasOwnProperty("retcode"))&&200===t.retcode&&!(!F.isInt(t.saved)||!F.isInt(t.received))}},{key:"getAllNotSaved",value:function(t,e){return t.saved===t.received?[]:t.saved<e.length?e.slice(t.saved):[]}},{key:"sendCache",value:function(){var t=this;t.isSending||(t.isCaching&&(clearTimeout(t.sendCacheTimeout),t.sendCacheTimeout=setTimeout(t.sendCache.bind(t),500)),t.isSending=!0,t.isCaching=!0,t.popCurrentBatch().then((function(e){t.verifyProxy(e).then((function(r){if(t.isCaching=!1,t.isSending=!1,t.isResponseValid(r)){var n=t.getAllNotSaved(r,e);n.length>0?(t.returnedBatches.push(n),t.recacheBatches()):t.sendCache()}else{if(r&&201===r.retcode)return;t.returnedBatches.push(e),t.recacheBatches()}})).catch((function(e){t.isSending=!1,t.isCaching=!1}))})).catch((function(e){t.isSending=!1,t.isCaching=!1})))}},{key:"popCurrentBatch",value:function(){return new Promise((function(t,e){chrome.storage.local.get([l.STORAGEKEYS.RCACHE,l.STORAGEKEYS.BASELINK,l.STORAGEKEYS.BASELINKTYPE],(function(r){try{var n=r[l.STORAGEKEYS.BASELINK],o=r[l.STORAGEKEYS.BASELINKTYPE];if(void 0===n)return e();if(void 0===o&&n.indexOf(l.SHORTNAME+"/client/")>-1)return e();var i=r[l.STORAGEKEYS.RCACHE];if(!i||!Array.isArray(i)||Array.isArray(i)&&0===i.length)return e();var a=i.pop().b;chrome.storage.local.set(Qe({},l.STORAGEKEYS.RCACHE,i),(function(){try{a.forEach((function(t,e){a[e].cacheTime&&a[e].cacheTime<F.getDateNow()?a[e].timedelta=F.getDateNow()-a[e].cacheTime:a[e].timedelta=0})),t(a)}catch(t){e(t)}}))}catch(t){e(t)}}))}))}},{key:"verifyProxy",value:function(t){return new Promise((function(e,r){try{var n={batch:JSON.stringify(t)};Kt.verifyProxy((function(t){e(t)}),n)}catch(t){r(t)}}))}},{key:"onRequestError",value:function(t){t&&(t.error==l.ERRORCODES.VERIFYERROR||void 0!==l.ERRORCODES.VERIFYERROR2&&t.error==l.ERRORCODES.VERIFYERROR2)&&this.check(t)}}])&&$e(e.prototype,r),n&&$e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function tr(t){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tr(t)}function er(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return rr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function rr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,or(n.key),n)}}function or(t){var e=function(t,e){if("object"!=tr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tr(e)?e:String(e)}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.setOriginStripListener(),this.updateIntervalTime=36e5,this.updateInterval=!1,this.updateInterval=new we(this.getTiers.bind(this),this.updateIntervalTime),this.updateInterval.start(),this.getTiers()}var e,r,n;return e=t,(r=[{key:"getTiers",value:function(){Kt.getTier()}},{key:"setOriginStripListener",value:function(){var t=this;"firefox"!==l.PLATFORM.toLowerCase()&&(chrome.webRequest.onBeforeSendHeaders.hasListener(t.stripOrigin)&&chrome.webRequest.onBeforeSendHeaders.removeListener(t.stripOrigin),chrome.webRequest.onBeforeSendHeaders.addListener(t.stripOrigin,{urls:["*://*/*"]},["blocking","requestHeaders","extraHeaders"]))}},{key:"stripOrigin",value:function(t){var e,r=[],n="chrome-extension://"+chrome.runtime.id,o=er(t.requestHeaders);try{for(o.s();!(e=o.n()).done;){var i=e.value;i&&i.name&&"origin"===i.name.toLowerCase()&&i.value&&i.value.toLowerCase()===n||r.push(i)}}catch(t){o.e(t)}finally{o.f()}return{requestHeaders:r}}}])&&nr(e.prototype,r),n&&nr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sr(n.key),n)}}function sr(t){var e=function(t,e){if("object"!=ir(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ir(e)?e:String(e)}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.updateIntervalTime=36e5,this.updateInterval=!1,this.updateInterval=new we(this.getClientVersionStatus.bind(this),this.updateIntervalTime),this.updateInterval.start(),this.getClientVersionStatus()}var e,r,n;return e=t,(r=[{key:"getClientVersionStatus",value:function(){Kt.getClientVersionStatus()}}])&&ar(e.prototype,r),n&&ar(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function cr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */cr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:R(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",g={};function v(){}function m(){}function E(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(I([])));A&&A!==r&&n.call(A,a)&&(S=A);var w=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==ur(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function R(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?d:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ur(e)+" is not iterable")}return m.prototype=E,o(w,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:m,configurable:!0}),m.displayName=c(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function lr(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function fr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){lr(i,n,o,a,s,"next",t)}function s(t){lr(i,n,o,a,s,"throw",t)}a(void 0)}))}}function hr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pr(n.key),n)}}function pr(t){var e=function(t,e){if("object"!=ur(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ur(e)?e:String(e)}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isRunning=!1,this.intervalMin=5,this.isDev=60,this.updateInterval=new we(this.update.bind(this),this.intervalMin*this.isDev*1e3),chrome.storage.onChanged.addListener(this.onStorageChanged.bind(this))}var e,r,n,o,i;return e=t,r=[{key:"update",value:(i=fr(cr().mark((function t(){var e,r,n,o;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isRunning){t.next=2;break}return t.abrupt("return");case 2:return this.isRunning=!0,t.next=5,this.fetchToken();case 5:if(e=t.sent,!F.isResponseMinus20(e)){t.next=10;break}return t.next=9,F.removeStorage([l.STORAGEKEYS.USERDATA,l.STORAGEKEYS.CONFIGDATA]);case 9:Vt.clearSettings();case 10:if(!(F.isResponse200(e)&&e.hasOwnProperty("config")&&F.isObject(e.config))){t.next=19;break}return t.next=13,F.getStorage([l.STORAGEKEYS.CONFIGDATA]);case 13:if(r=t.sent,!(n=r[l.STORAGEKEYS.CONFIGDATA])||!F.isObject(n)){t.next=19;break}return o=Object.assign({},n,e.config),t.next=19,F.setStorage((i={},a=l.STORAGEKEYS.CONFIGDATA,s=o,(a=pr(a))in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i));case 19:this.isRunning=!1;case 20:case"end":return t.stop()}var i,a,s}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"fetchToken",value:(o=fr(cr().mark((function t(){var e,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new AbortController,t.prev=1,t.next=4,xt.getToken(e);case 4:r=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1);case 10:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,null,[[1,7]])}))),function(){return o.apply(this,arguments)})},{key:"getRefreshValue",value:function(t){if(!t||"object"!==ur(t)||!t.config_intervals)return 5;var e=t.config_intervals;if("object"!==ur(e)||void 0===e.refresh)return 5;var r=e.refresh;return"number"!=typeof r||r<5||r>100?5:r}},{key:"onStorageChanged",value:function(t,e){if("local"==e&&(t.hasOwnProperty(l.STORAGEKEYS.ISPROXYON)&&(t[l.STORAGEKEYS.ISPROXYON].newValue?this.updateInterval.start():this.updateInterval.stop()),t.hasOwnProperty(l.STORAGEKEYS.CONFIGDATA))){var r=t[l.STORAGEKEYS.CONFIGDATA].newValue,n=this.getRefreshValue(r);n!==this.intervalMin&&(this.intervalMin=n,this.updateInterval.update(this.intervalMin*this.isDev*1e3))}}}],r&&hr(e.prototype,r),n&&hr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());document.Endpoints=f,document.ClientMeta=l,document.ProxyApi=bt,document.parseJson=function(t){try{return JSON.parse(t)}catch(t){return!1}},document.isTestRequest=function(t,e){if(!t||!e)return!1;if("string"!=typeof t||"string"!=typeof e)return!1;var r=t.toLowerCase(),n=e.toLowerCase();return r.includes(n)&&r.includes("servicetest")}})()})();