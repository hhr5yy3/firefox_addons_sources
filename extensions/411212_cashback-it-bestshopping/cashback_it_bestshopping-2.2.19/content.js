var data,cssStyle=".bestshopping-serp-2P1FQv { display: block; align-items: center; height: 15px; line-height: 15px; padding: 0 20px 0 20px; text-decoration: none !important; background-size: contain; background-position: 0px center; background-repeat: no-repeat; background-image: url(data:image/png;base64,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); top: 0px; } .bestshopping-serp__text-g1W4YD { font-family: Arial !important; color: #7dbe25; font-size: 13px !important; display: block; line-height: 15px; vertical-align: middle; text-decoration: none!important; }",isSERPon=!0,messages_label="",isItalian=!1,userAgent=navigator.userAgent,browserAgent="";function DownloadJSONlist(){var t=["188","1240","306","3667"];browser.storage.local.get(["jsonResponse"],function(e){if(""!=e.jsonResponse&&null!=e.jsonResponse){data=JSON.parse(e.jsonResponse);var s,n=!1;for(s of t)if(data.forEach(function(e){e.merchant_id==s&&""!=e.serp_css&&null!=e.serp_css&&(n=!0,browser.storage.local.set({jsonSerpStyle:JSON.parse(e.serp_css)},function(){}))}),1==n)break;ParseAndFillList()}else{var a=new XMLHttpRequest;a.open("GET","https://rapi.bestshopping.com/api/v1/cashback/new?fields=merchant_id%2Cname%2Clabel%2Ccashback_label%2Caffiliate_url%2Clogo_url%2Ctoolbar_url_v2%2Cis_supercashback%2Cserp_css%2Ctoolbar_disabled&sort=-popularity&AccessKeyId=7b57608020a2b70c2812b77325b6eb90",!0),a.onload=function(){if(200<=a.status&&a.status<400){data=JSON.parse(a.responseText),browser.storage.local.set({jsonResponse:a.responseText},function(){});var s,n=!1;for(s of t)if(data.forEach(function(e){e.merchant_id==s&&""!=e.serp_css&&null!=e.serp_css&&(n=!0,browser.storage.local.set({jsonSerpStyle:JSON.parse(e.serp_css)},function(){}))}),1==n)break;ParseAndFillList()}},a.send()}})}function ParseAndFillList(){var h,S=window.location.hostname,f=new Array;const E=[];browser.storage.local.get(["jsonSerpStyle"],function(s){if(null!=s.jsonSerpStyle&&null!=s.jsonSerpStyle){h=s.jsonSerpStyle;var n,a,t="Mac";if(String(window.navigator.userAgent).includes("Windows")&&(t="Windows"),S.includes(".bing")&&document.getElementsByClassName("b_title"),S.includes(".yahoo")&&document.querySelectorAll("ol.searchCenterMiddle")[0]){let e=0;for(n of document.querySelectorAll("ol.searchCenterMiddle")[0].childNodes)n.querySelectorAll(".fc-obsidian span")[0]&&(a=n.querySelectorAll(".fc-obsidian span:not(.fc-pewter)"),f.push(a[0])),e++}var l,r,i=JSON.parse(h),o=(0==f.length&&(f=document.getElementsByTagName(i.SERP[t][browserAgent][".bing"].anchor)),[]);let e=0;if(S.includes(".google")){for(l of document.getElementsByTagName(i.SERP[t][browserAgent][".google"].anchor))l.classList&&0<l.classList.length&&"A"==l.parentElement.tagName&&(o.push(l),E.push(l.parentElement));f=E}for(r of f){var c,g="";if(S.includes(".google")){if(""==(c=r.getAttribute("href"))||null==c)continue}else c=S.includes(".bing")?r.innerText.split(" ")[0]:r.innerHTML;if(data.forEach(function(e){let s=e.toolbar_url_v2;var n,a=e.toolbar_url_v2;"."!=s.charAt(0)&&(s="."+e.toolbar_url_v2),!c.includes(s)&&!c.includes(a)||"."==s||"http://pointer.it/"==c&&"inter.it"==a||(""==g||(a=g.cashback_label.includes("%")?"% Cashback":"€ Cashback",n=e.cashback_label.includes("%")?"% Cashback":"€ Cashback",parseFloat(g.cashback_label.replace(a,""))<parseFloat(e.cashback_label.replace(n,""))))&&(g=e)}),g){if("ebay"==g.name.toLowerCase())return;var A=document.createElement("span"),b=(A.classList.add("bestshopping-serp-2P1FQv"),document.createElement("span")),p=(b.classList.add("bestshopping-serp__text-g1W4YD"),g.cashback_label.replace("Cashback",""));if(p=(p=p.replace(",",messages_label.message.POINTER)).replace(".",messages_label.message.POINTER),1==isItalian){let e="il ";if(0==g.cashback_label.includes("€"))switch("8"===g.cashback_label.charAt(0)||"1"===g.cashback_label.charAt(0)&&("1"===g.cashback_label.charAt(1)||","===g.cashback_label.charAt(1)||"."===g.cashback_label.charAt(1))?e="l'":"0"===g.cashback_label.charAt(0)&&(e="lo "),e){case"il ":e="fino al ";break;case"lo ":e="fino allo ";break;default:e="fino all'"}else e="di ";b.innerHTML=messages_label.message.OPTIONS_CASHBACK+e+p}else b.innerHTML=messages_label.message.OPTIONS_CASHBACK+p;if(A.appendChild(b),S.includes(".bing")){for(var u=f[e],d=0;d<parseInt(i.SERP[t][browserAgent][".bing"].parent_element);d++)u=u.parentElement;p=u.children[2];u.insertBefore(A,p),siteEngine=".bing"}else if(S.includes(".google")){for(u=f[e],d=0;d<parseInt(i.SERP[t][browserAgent][".google"].parent_element);d++)u=u.parentElement;b=u.children[1];u.insertBefore(A,b),siteEngine=".google"}else{for(u=f[e],d=0;d<parseInt(i.SERP[t][browserAgent][".yahoo"].parent_element);d++)u=u.parentElement;p=u.children[1];u.insertBefore(A,p),siteEngine=".yahoo"}b=i.SERP[t].Chrome[siteEngine].style;""!=b&&null!=b&&b.split(";").forEach(function(e){var e=e.split(":"),s=e[0],e=e[1];A.style.setProperty(s,e)}),g=""}e++}}})}-1!==userAgent.indexOf("Chrome")?browserAgent="Chrome":-1!==userAgent.indexOf("Firefox")?browserAgent="Firefox":-1!==userAgent.indexOf("Safari")?browserAgent="Safari":-1!==userAgent.indexOf("Edge")&&(browserAgent="Edge"),browser.storage.sync.get("language",function(e){var s;null==e.language?(s=navigator.language||navigator.userLanguage,"IT"==(userL=s.split("-")[1])&&"EN"==userL||(userL="IT"),browser.storage.sync.set({language:userL},function(){}),messages_label_box=MESSAGES.IT,isItalian=!0):"IT"==e.language?(messages_label=MESSAGES.IT,isItalian=!0):"EN"==e.language?(messages_label=MESSAGES.EN,isItalian=!1):"LA"==e.language&&(messages_label=MESSAGES.LA,isItalian=!1)}),browser.storage.sync.get("serpOption",function(e){1==(isSERPon=0==e.serpOption?!1:isSERPon)&&DownloadJSONlist()});