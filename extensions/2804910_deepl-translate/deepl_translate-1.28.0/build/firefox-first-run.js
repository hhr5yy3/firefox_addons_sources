!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function l(){return e=" ",document.createTextNode(e);var e}function d(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function h(e,t,n){e.classList.toggle(t,!!n)}let f;function m(e){f=e}function g(){if(!f)throw new Error("Function called outside component initialization");return f}function y(){const e=g();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const s=function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(t,n,{cancelable:r});return o.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}const _=[],v=[];let b=[];const S=[],w=Promise.resolve();let k=!1;function E(e){b.push(e)}const x=new Set;let T=0;function I(){if(0!==T)return;const e=f;do{try{for(;T<_.length;){const e=_[T];T++,m(e),C(e.$$)}}catch(e){throw _.length=0,T=0,e}for(m(null),_.length=0,T=0;v.length;)v.pop()();for(let e=0;e<b.length;e+=1){const t=b[e];x.has(t)||(x.add(t),t())}b.length=0}while(_.length);for(;S.length;)S.pop()();k=!1,x.clear(),m(e)}function C(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(E)}}const R=new Set;let A;function O(e,t){e&&e.i&&(R.delete(e),e.i(t))}function M(e,t,n,r){if(e&&e.o){if(R.has(e))return;R.add(e),A.c.push((()=>{R.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}function N(e){e&&e.c()}function D(e,n,s){const{fragment:i,after_update:a}=e.$$;i&&i.m(n,s),E((()=>{const n=e.$$.on_mount.map(t).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...n):r(n),e.$$.on_mount=[]})),a.forEach(E)}function L(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];b.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),b=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function P(e,t){-1===e.$$.dirty[0]&&(_.push(e),k||(k=!0,w.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $(t,o,s,i,a,u,l=null,d=[-1]){const p=f;m(t);const h=t.$$={fragment:null,ctx:[],props:u,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||p.$$.root};l&&l(h.root);let g=!1;if(h.ctx=s?s(t,o.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=o)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](o),g&&P(t,e)),n})):[],h.update(),g=!0,r(h.before_update),h.fragment=!!i&&i(h.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);h.fragment&&h.fragment.l(e),e.forEach(c)}else h.fragment&&h.fragment.c();o.intro&&O(t.$$.fragment),D(t,o.target,o.anchor),I()}m(p)}class F{$$=void 0;$$set=void 0;$destroy(){L(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function j(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&n(e),t(e)}))}))}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const B={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function U(e,t){let n;try{switch(e){case B.chrome:case B.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case B.edge:n=t.split("Edg/")[1].split(" ")[0];break;case B.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case B.opera:n=t.split("OPR/")[1].split(" ")[0];break;case B.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===B.chrome||e===B.edge||e===B.brave||e===B.opera}(e)&&(n=q(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function q(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function z(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.28.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.28.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!1}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.28.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.28.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365"},APP_VERSION:"1.28.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,REVIEW_UI_WITH_ITA:!1,BATCH_TRANSLATE_HTML_REQUEST:!1}}.browserBuild.toLowerCase()===B.firefox.toLowerCase();const e=chrome.runtime.getURL("");return function(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",r="unknown_browser_version";const o=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),o=e.match(/edg/i)||q(B.edge),s=e.match(/firefox|fxios/i),i=e.match(/opr\//i)||q(B.opera),a=e.match(/safari/i),c=q(B.brave);t?(n=B.chrome,o&&(n=B.edge),i&&(n=B.opera),c&&(n=B.brave)):o?n=B.edge:s?n=B.firefox:i?n=B.opera:a&&(n=B.safari),r=U(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:r,browserLang:o}}().browser===B.firefox||/moz-extension:\/\//gm.test(e)}const H="CREATE_ACCOUNT",W="FIREFOX_PRIVACY_POLICY",G={origins:["<all_urls>"]},V={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},Y="free",J="pro",K=e=>{const t=e||chrome.i18n.getUILanguage();return["ar","he","fa","ur"].includes(t.toLowerCase().substr(0,2))?"rtl":"ltr"},X=[];function Q(t,n=e){let r;const o=new Set;function i(e){if(s(t,e)&&(t=e,r)){const e=!X.length;for(const e of o)e[1](),X.push(e,t);if(e){for(let e=0;e<X.length;e+=2)X[e][0](X[e+1]);X.length=0}}}function a(e){i(e(t))}return{set:i,update:a,subscribe:function(s,c=e){const u=[s,c];return o.add(u),1===o.size&&(r=n(i,a)||e),s(t),()=>{o.delete(u),0===o.size&&r&&(r(),r=null)}}}}const Z="production",ee="development";function te(){return Z}function ne(){return te()===ee}function re(){return te()===Z}const oe=function(){const{subscribe:e,set:t,update:n}=Q({});return chrome.storage.sync.get(null,(e=>{t(e),chrome.storage.local.get(["isLoggedIn","isProUser","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","browserInstanceId","featureSet","hasTermbaseService"],(e=>{n((t=>({...t,...e})))}))})),chrome.storage.onChanged.addListener((e=>{const t=["a_t","r_t","i_t","accountId"];let r={};for(const[n,o]of Object.entries(e))!1===t.includes(n)&&(r[n]=o.newValue);if(ne()){const e="background-color: #324054;padding: 3px; font-size:12px;color:#e1e8c3; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE USER SETTINGS`,e,r)}return n((e=>({...e,...r}))),!0})),{subscribe:e,set:e=>chrome.storage.sync.set(e)}}(),se=function(){const{subscribe:e,update:t}=Q({});return chrome.runtime.onMessage.addListener((function(e,n){switch(e.action){case"newWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...t[n.tab.id],...e.payload,error:e.payload.error?e.payload.error:void 0}})));break;case"resetWebsiteState":e.payload&&t((t=>({...t,[n.tab.id]:{...e.payload}})))}return!0})),{subscribe:e,fetchCurrentWebsiteSettings:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlGetWebsiteData"},(function(n){t((t=>({...t,[e[0].id]:{...t[e[0].id],...n}})))}))}))}}}();function ie(t){let n,r,o,s;return{c(){n=u("button"),r=u("span"),p(r,"class","svelte-19tdlik"),p(n,"aria-label",t[3]?chrome.i18n.getMessage("toggle_off"):chrome.i18n.getMessage("toggle_on")),p(n,"class","switch svelte-19tdlik"),p(n,"data-testid","deepl-switch"),p(n,"data-qa",t[2]),h(n,"checked",t[0]),h(n,"disabled",t[1])},m(e,c){a(e,n,c),i(n,r),o||(s=d(n,"click",t[3]),o=!0)},p(e,[t]){4&t&&p(n,"data-qa",e[2]),1&t&&h(n,"checked",e[0]),2&t&&h(n,"disabled",e[1])},i:e,o:e,d(e){e&&c(n),o=!1,s()}}}function ae(e,t,n){let{checked:r=!1}=t,{disabled:o=!1}=t,{qaRoot:s="dl-switch"}=t;const i=y();return e.$$set=e=>{"checked"in e&&n(0,r=e.checked),"disabled"in e&&n(1,o=e.disabled),"qaRoot"in e&&n(2,s=e.qaRoot)},[r,o,s,function(){o||i("change",{checked:!r})}]}!function(t,n,s){const i=!Array.isArray(t),a=i?[t]:t;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=n.length<2;return u=(t,s)=>{let u=!1;const l=[];let d=0,p=e;const h=()=>{if(d)return;p();const r=n(i?l[0]:l,t,s);c?t(r):p=o(r)?r:e},f=a.map(((t,n)=>function(t,...n){if(null==t){for(const e of n)e(void 0);return e}const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(t,(e=>{l[n]=e,d&=~(1<<n),u&&h()}),(()=>{d|=1<<n}))));return u=!0,h(),function(){r(f),p(),u=!1}},{subscribe:Q(s,u).subscribe};var u}(se,(async(e,t)=>{if(!chrome.tabs)return;t(e[(await chrome.tabs.query({active:!0,currentWindow:!0}))[0].id])})),function(){const{subscribe:e,set:t}=Q([]);j({action:"dlGetExperiments",payload:{forceFetch:!1}}).then((e=>t(e))),chrome.runtime.onMessage.addListener((function(e){if("dlExperimentsUpdated"===e.action)e.payload&&t(e.payload.experiments);return!0}))}();class ce extends F{constructor(e){super(),$(this,e,ae,ie,s,{checked:0,disabled:1,qaRoot:2})}}function ue(e){let t,n,o,s,h,f,m,g,y,_,v,b,S,w,k,E,x,T,I,C,R,A,P,$,F,j;return g=new ce({props:{checked:e[1]}}),g.$on("change",e[10]),w=new ce({props:{checked:e[2]}}),w.$on("change",e[11]),{c(){t=u("div"),t.innerHTML='<div class="dl-title"><p class="svelte-2gkz3k">DeepL for Firefox needs your permission</p></div> <p class="svelte-2gkz3k">In order to provide our services, ensure a smooth experience, and\n          detect and prevent fraud, we need:</p> <ul><li>Access to the text you want to translate or improve</li> <li>Access to full-page content (for full-page translation only)</li> <li>The ability to process certain technical data (e.g., browser type\n            and language, device, operating system)</li></ul> <p class="svelte-2gkz3k">Help us improve our user experience and services by also sharing data\n          with us about your use of DeepL for Firefox. We&#39;ll be collecting usage\n          information, such as login status, onboarding interaction, languages\n          selected, features used, and domains visited.</p>',n=l(),o=u("div"),s=u("div"),h=u("div"),h.innerHTML='<p class="switch-header svelte-2gkz3k">Share usage data that personally identifies you</p> <p class="svelte-2gkz3k">This includes:</p> <ul><li>Domain names of websites you visit</li> <li>Your DeepL account identifier</li></ul> <p class="svelte-2gkz3k">If you choose not to share this data, it may be more difficult for\n              us to ensure that the extension works well on the websites where\n              our users need it and for all types of logged-in users.</p>',f=l(),m=u("div"),N(g.$$.fragment),y=l(),_=u("div"),v=u("div"),v.innerHTML='<p class="switch-header svelte-2gkz3k">Share anonymous usage data</p> <p class="svelte-2gkz3k">This includes:</p> <ul><li>Login status, onboarding information, information about the\n                languages you translate into and from, features you use, and\n                extension error information</li></ul> <p class="svelte-2gkz3k">If you choose not to share this data, it may be more difficult for\n              us to ensure that the extension is working properly and to plan\n              new features based on usage data.</p>',b=l(),S=u("div"),N(w.$$.fragment),k=l(),E=u("div"),x=u("p"),T=u("span"),T.textContent="Read our privacy policy in the Firefox Add-ons store",I=l(),C=u("div"),R=u("button"),R.textContent="Don't allow and uninstall",A=l(),P=u("button"),P.textContent="Give permission",p(t,"class","main-content"),p(h,"class","switch-content svelte-2gkz3k"),p(m,"class","switch svelte-2gkz3k"),p(s,"class","switch-container svelte-2gkz3k"),p(v,"class","switch-content svelte-2gkz3k"),p(S,"class","switch svelte-2gkz3k"),p(_,"class","switch-container svelte-2gkz3k"),p(o,"class","switches svelte-2gkz3k"),p(T,"class","dl-link svelte-2gkz3k"),p(x,"class","svelte-2gkz3k"),p(R,"class","svelte-2gkz3k"),p(P,"class","svelte-2gkz3k"),p(C,"class","footer svelte-2gkz3k")},m(r,c){a(r,t,c),a(r,n,c),a(r,o,c),i(o,s),i(s,h),i(s,f),i(s,m),D(g,m,null),i(o,y),i(o,_),i(_,v),i(_,b),i(_,S),D(w,S,null),a(r,k,c),a(r,E,c),i(E,x),i(x,T),a(r,I,c),a(r,C,c),i(C,R),i(C,A),i(C,P),$=!0,F||(j=[d(T,"click",e[8]),d(R,"click",e[5]),d(P,"click",e[4])],F=!0)},p(e,t){const n={};2&t&&(n.checked=e[1]),g.$set(n);const r={};4&t&&(r.checked=e[2]),w.$set(r)},i(e){$||(O(g.$$.fragment,e),O(w.$$.fragment,e),$=!0)},o(e){M(g.$$.fragment,e),M(w.$$.fragment,e),$=!1},d(e){e&&(c(t),c(n),c(o),c(k),c(E),c(I),c(C)),L(g),L(w),F=!1,r(j)}}}function le(t){let n,r,o,s,h,f,m,g,y,_,v=chrome.i18n.getMessage("permission_request_widget_description")+"";return{c(){n=u("div"),r=u("div"),o=u("p"),o.textContent=`${chrome.i18n.getMessage("permission_request_widget_title")}`,s=l(),h=u("p"),f=l(),m=u("div"),g=u("button"),g.textContent=`${chrome.i18n.getMessage("permission_request_widget_button")}`,p(o,"class","svelte-2gkz3k"),p(r,"class","dl-title"),p(h,"class","svelte-2gkz3k"),p(n,"class","scrollable"),p(g,"class","svelte-2gkz3k"),p(m,"class","footer svelte-2gkz3k")},m(e,c){a(e,n,c),i(n,r),i(r,o),i(n,s),i(n,h),h.innerHTML=v,a(e,f,c),a(e,m,c),i(m,g),y||(_=d(g,"click",t[9]),y=!0)},p:e,d(e){e&&(c(n),c(f),c(m)),y=!1,_()}}}function de(e){let t,n,o,s,d,f,m=e[0]===e[3].legal_disclaimer&&ue(e),g=e[0]===e[3].browser_permissions&&le(e);return{c(){t=u("div"),t.innerHTML='<div class="dl-logo svelte-2gkz3k"></div>',n=l(),o=u("div"),s=u("div"),m&&m.c(),d=l(),g&&g.c(),p(t,"class","dl-logo-container svelte-2gkz3k"),p(t,"dir",K()),h(t,"isFirefoxExtension",z),p(s,"class","dl-notice-container svelte-2gkz3k"),p(o,"class","dl-firefox-first-run-page svelte-2gkz3k"),p(o,"dir",K())},m(e,r){a(e,t,r),a(e,n,r),a(e,o,r),i(o,s),m&&m.m(s,null),i(s,d),g&&g.m(s,null),f=!0},p(e,[t]){e[0]===e[3].legal_disclaimer?m?(m.p(e,t),1&t&&O(m,1)):(m=ue(e),m.c(),O(m,1),m.m(s,d)):m&&(A={r:0,c:[],p:A},M(m,1,1,(()=>{m=null})),A.r||r(A.c),A=A.p),e[0]===e[3].browser_permissions?g?g.p(e,t):(g=le(e),g.c(),g.m(s,null)):g&&(g.d(1),g=null)},i(e){f||(O(m),f=!0)},o(e){M(m),f=!1},d(e){e&&(c(t),c(n),c(o)),m&&m.d(),g&&g.d()}}}function pe(e,t,n){var r,o;r="text_direction",o=K(),g().$$.context.set(r,o);let s={legal_disclaimer:"LEGAL_DISCLAIMER",browser_permissions:"BROWSER_PERMISSIONS"},i=s.legal_disclaimer,a=!1,c=!0;const u=e=>{!1===e?(n(2,c=!1),n(1,a=!1)):n(2,c=!0)},l=e=>{n(1,a=e)},d=()=>{j({action:"dlOpenInternalPage",payload:{destination:H,openInSameTab:!0}})};return[i,a,c,s,async()=>{oe.set({firefoxAnonPermissionGranted:c,firefoxPersonalPermissionGranted:a});await chrome.permissions.contains(G)?d():n(0,i=s.browser_permissions)},()=>{browser.management.uninstallSelf()},u,l,()=>{j({action:"dlExternalURLRedirect",payload:{destination:W}})},async()=>{await browser.permissions.request(G)&&d()},e=>l(e.detail.checked),e=>u(e.detail.checked)]}const he=Object.prototype.toString;function fe(e){switch(he.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Te(e,Error)}}function me(e,t){return he.call(e)===`[object ${t}]`}function ge(e){return me(e,"ErrorEvent")}function ye(e){return me(e,"DOMError")}function _e(e){return me(e,"String")}function ve(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function be(e){return null===e||ve(e)||"object"!=typeof e&&"function"!=typeof e}function Se(e){return me(e,"Object")}function we(e){return"undefined"!=typeof Event&&Te(e,Event)}function ke(e){return me(e,"RegExp")}function Ee(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function xe(e){return"number"==typeof e&&e!=e}function Te(e,t){try{return e instanceof t}catch(e){return!1}}function Ie(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Ce(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Re(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function Ae(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{Ie(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function Oe(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!_e(e)&&(ke(t)?t.test(e):!!_e(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function Me(e,t,n=250,r,o,s,i){if(!(s.exception&&s.exception.values&&i&&Te(i.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,u;a&&(s.exception.values=(c=Ne(e,t,o,i.originalException,r,s.exception.values,a,0),u=n,c.map((e=>(e.value&&(e.value=Ce(e.value,u)),e)))))}function Ne(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(Te(r[o],Error)){De(i,a);const s=e(t,r[o]),u=c.length;Le(s,o,u,a),c=Ne(e,t,n,r[o],o,[s,...c],s,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(Te(r,Error)){De(i,a);const u=e(t,r),l=c.length;Le(u,`errors[${s}]`,l,a),c=Ne(e,t,n,r,o,[u,...c],u,l)}})),c}function De(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Le(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Pe(e){return e&&e.Math==Math?e:void 0}const $e="object"==typeof globalThis&&Pe(globalThis)||"object"==typeof window&&Pe(window)||"object"==typeof self&&Pe(self)||"object"==typeof global&&Pe(global)||function(){return this}()||{};function Fe(){return $e}function je(e,t,n){const r=n||$e,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const Be=Fe();function Ue(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&s++<r&&(u=qe(n,l),!("html"===u||s>1&&i+o.length*c+u.length>=d));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function qe(e,t){const n=e,r=[];let o,s,i,a,c;if(!n||!n.tagName)return"";if(Be.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&_e(o))for(s=o.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)i=l[c],a=n.getAttribute(i),a&&r.push(`[${i}="${a}"]`);return r.join("")}function ze(){try{return Be.document.location.href}catch(e){return""}}function He(e){return Be.document&&Be.document.querySelector?Be.document.querySelector(e):null}function We(e){if(!Be.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const Ge="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ve=["debug","info","warn","error","log","assert","trace"],Ye={};function Je(e){if(!("console"in $e))return e();const t=$e.console,n={},r=Object.keys(Ye);r.forEach((e=>{const r=Ye[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const Ke=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Ge?Ve.forEach((n=>{t[n]=(...t)=>{e&&Je((()=>{$e.console[n](`Sentry Logger [${n}]:`,...t)}))}})):Ve.forEach((e=>{t[e]=()=>{}})),t}(),Xe=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Qe(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}function Ze(e){const t=Xe.exec(e);if(!t)return void Je((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",s,i="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return et({host:s,pass:o,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function et(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function tt(e){const t="string"==typeof e?Ze(e):et(e);if(t&&function(e){if(!Ge)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(Ke.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(Ke.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Ke.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(Ke.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class nt extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function rt(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&st(o,r),e[t]=o}function ot(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){Ge&&Ke.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function st(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ot(e,"__sentry_original__",t)}catch(e){}}function it(e){return e.__sentry_original__}function at(e){if(fe(e))return{message:e.message,name:e.name,stack:e.stack,...ut(e)};if(we(e)){const t={type:e.type,target:ct(e.target),currentTarget:ct(e.currentTarget),...ut(e)};return"undefined"!=typeof CustomEvent&&Te(e,CustomEvent)&&(t.detail=e.detail),t}return e}function ct(e){try{return t=e,"undefined"!=typeof Element&&Te(t,Element)?Ue(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function ut(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function lt(e){return dt(e,new Map)}function dt(e,t){if(function(e){if(!Se(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=dt(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(dt(e,t))})),r}return e}const pt=/\(error: (.*)\)/,ht=/captureMessage|captureException/;function ft(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const s=pt.test(n)?n.replace(pt,"$1"):n;if(!s.match(/\S*Error: /)){for(const e of t){const t=e(s);if(t){r.push(t);break}}if(r.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),ht.test(t[t.length-1].function||"")&&(t.pop(),ht.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const mt="<anonymous>";function gt(e){try{return e&&"function"==typeof e&&e.name||mt}catch(e){return mt}}const yt={},_t={};function vt(e,t){yt[e]=yt[e]||[],yt[e].push(t)}function bt(e,t){_t[e]||(t(),_t[e]=!0)}function St(e,t){const n=e&&yt[e];if(n)for(const r of n)try{r(t)}catch(t){Ge&&Ke.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${gt(r)}\nError:`,t)}}function wt(e){const t="console";vt(t,e),bt(t,kt)}function kt(){"console"in $e&&Ve.forEach((function(e){e in $e.console&&rt($e.console,e,(function(t){return Ye[e]=t,function(...t){St("console",{args:t,level:e});const n=Ye[e];n&&n.apply($e.console,t)}}))}))}function Et(){const e=$e,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function xt(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Tt(e){const{message:t,event_id:n}=e;if(t)return t;const r=xt(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function It(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function Ct(e,t){const n=xt(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function Rt(e){if(e&&e.__sentry_captured__)return!0;try{ot(e,"__sentry_captured__",!0)}catch(e){}return!1}function At(e){return Array.isArray(e)?e:[e]}const Ot=$e;let Mt,Nt,Dt;function Lt(e){vt("dom",e),bt("dom",Pt)}function Pt(){if(!Ot.document)return;const e=St.bind(null,"dom"),t=$t(e,!0);Ot.document.addEventListener("click",t,!1),Ot.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=Ot[t]&&Ot[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(rt(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=s[n]=s[n]||{refCount:0};if(!i.handler){const r=$t(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(e){}return t.call(this,n,r,o)}})),rt(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},s=o[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function $t(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;ot(n,"_sentryCaptured",!0),r&&!r._sentryId&&ot(r,"_sentryId",Et());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Nt)return!1;try{if(!e.target||e.target._sentryId!==Dt)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),Nt=n.type,Dt=r?r._sentryId:void 0}clearTimeout(Mt),Mt=Ot.setTimeout((()=>{Dt=void 0,Nt=void 0}),1e3)}}const Ft=Fe();function jt(){if(!("fetch"in Ft))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Bt(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ut(){if("string"==typeof EdgeRuntime)return!0;if(!jt())return!1;if(Bt(Ft.fetch))return!0;let e=!1;const t=Ft.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Bt(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){Ge&&Ke.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function qt(e){const t="fetch";vt(t,e),bt(t,zt)}function zt(){Ut()&&rt($e,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Wt(t),method:Ht(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Wt(t),method:Ht(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return St("fetch",{...o}),e.apply($e,t).then((e=>(St("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw St("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function Ht(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Wt(e){return"string"==typeof e?e:e?Ht(e,"url")?e.url:e.toString?e.toString():"":""}let Gt=null;function Vt(e){const t="error";vt(t,e),bt(t,Yt)}function Yt(){Gt=$e.onerror,$e.onerror=function(e,t,n,r,o){return St("error",{column:r,error:o,line:n,msg:e,url:t}),!(!Gt||Gt.__SENTRY_LOADER__)&&Gt.apply(this,arguments)},$e.onerror.__SENTRY_INSTRUMENTED__=!0}let Jt=null;function Kt(e){const t="unhandledrejection";vt(t,e),bt(t,Xt)}function Xt(){Jt=$e.onunhandledrejection,$e.onunhandledrejection=function(e){return St("unhandledrejection",e),!(Jt&&!Jt.__SENTRY_LOADER__)||Jt.apply(this,arguments)},$e.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Qt=Fe();const Zt=$e;let en;function tn(e){const t="history";vt(t,e),bt(t,nn)}function nn(){if(!function(){const e=Qt.chrome,t=e&&e.app&&e.app.runtime,n="history"in Qt&&!!Qt.history.pushState&&!!Qt.history.replaceState;return!t&&n}())return;const e=Zt.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=en,t=String(n);en=t;St("history",{from:e,to:t})}return e.apply(this,t)}}Zt.onpopstate=function(...t){const n=Zt.location.href,r=en;en=n;if(St("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},rt(Zt.history,"pushState",t),rt(Zt.history,"replaceState",t)}const rn=$e,on="__sentry_xhr_v3__";function sn(e){vt("xhr",e),bt("xhr",an)}function an(){if(!rn.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;rt(e,"open",(function(e){return function(...t){const n=Date.now(),r=_e(t[0])?t[0].toUpperCase():void 0,o=function(e){if(_e(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[on]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const s=()=>{const e=this[on];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}St("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?rt(this,"onreadystatechange",(function(e){return function(...t){return s(),e.apply(this,t)}})):this.addEventListener("readystatechange",s),rt(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[on];return o&&_e(n)&&_e(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),rt(e,"send",(function(e){return function(...t){const n=this[on];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return St("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function cn(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function un(e,t){return e.require(t)}function ln(e){let t;try{t=un(module,e)}catch(e){}try{const{cwd:n}=un(module,"process");t=un(module,`${n()}/node_modules/${e}`)}catch(e){}return t}function dn(){return"undefined"!=typeof window&&(!cn()||void 0!==$e.process&&"renderer"===$e.process.type)}function pn(e,t=100,n=1/0){try{return fn("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function hn(e,t=3,n=102400){const r=pn(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?hn(e,t-1,n):r;var o}function fn(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,i]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!xe(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(Ie(t))return"[VueViewModel]";if(Se(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${gt(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return fn("",u.toJSON(),c-1,r,o)}catch(e){}const l=Array.isArray(t)?[]:{};let d=0;const p=at(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){l[e]="[MaxProperties ~]";break}const t=p[e];l[e]=fn(e,t,c-1,r,o),d++}return i(t),l}const mn=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function gn(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function yn(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function _n(e,t){let n=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=mn.exec(t);return n?n.slice(1):[]}(e)[2];return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}var vn;function bn(e){return new wn((t=>{t(e)}))}function Sn(e){return new wn(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(vn||(vn={}));class wn{constructor(e){wn.prototype.__init.call(this),wn.prototype.__init2.call(this),wn.prototype.__init3.call(this),wn.prototype.__init4.call(this),this._state=vn.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new wn(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new wn(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(vn.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(vn.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===vn.PENDING&&(Ee(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===vn.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===vn.RESOLVED&&e[1](this._value),this._state===vn.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function kn(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Sn(new nt("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new wn(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{bn(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}function En(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function xn(e){return e.split(/[\?#]/,1)[0]}function Tn(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}const In={ip:!1,request:!0,transaction:!0,user:!0},Cn=["cookies","data","headers","method","query_string","url"],Rn=["id","username","email"];function An(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",o="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,o="route"):(e.originalUrl||e.url)&&(r=xn(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,o]}function On(e,t){const{include:n=Cn,deps:r}=t||{},o={},s=e.headers||{},i=e.method,a=s.host||e.hostname||e.host||"<no host>",c="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",u=e.originalUrl||e.url||"",l=u.startsWith(c)?u:`${c}://${a}${u}`;return n.forEach((t=>{switch(t){case"headers":o.headers=s,n.includes("cookies")||delete o.headers.cookie;break;case"method":o.method=i;break;case"url":o.url=l;break;case"cookies":o.cookies=e.cookies||s.cookie&&function(e){const t={};let n=0;for(;n<e.length;){const r=e.indexOf("=",n);if(-1===r)break;let o=e.indexOf(";",n);if(-1===o)o=e.length;else if(o<r){n=e.lastIndexOf(";",r-1)+1;continue}const s=e.slice(n,r).trim();if(void 0===t[s]){let n=e.slice(r+1,o).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[s]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[s]=n}}n=o+1}return t}(s.cookie)||{};break;case"query_string":o.query_string=function(e,t){let n=e.originalUrl||e.url||"";if(!n)return;n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{return e.query||"undefined"!=typeof URL&&new URL(n).search.slice(1)||t&&t.url&&t.url.parse(n).query||void 0}catch(e){return}}(e,r);break;case"data":if("GET"===i||"HEAD"===i)break;void 0!==e.body&&(o.data=_e(e.body)?e.body:JSON.stringify(pn(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(o[t]=e[t])}})),o}function Mn(e,t,n){const r={...In,...n&&n.include};if(r.request){const o=Array.isArray(r.request)?On(t,{include:r.request,deps:n&&n.deps}):On(t,{deps:n&&n.deps});e.request={...e.request,...o}}if(r.user){const n=t.user&&Se(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:Rn).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,r.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(r.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return r.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return An(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return An(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,r.transaction)),e}const Nn=["fatal","error","warning","log","info","debug"];function Dn(e){return"warn"===e?"warning":Nn.includes(e)?e:"log"}function Ln(){return Date.now()/1e3}const Pn=function(){const{performance:e}=$e;if(!e||!e.now)return Ln;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),$n=(()=>{const{performance:e}=$e;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,i=e.timing&&e.timing.navigationStart,a="number"==typeof i?Math.abs(i+n-r):t;return s||a<t?o<=a?e.timeOrigin:i:r})(),Fn="baggage",jn="sentry-",Bn=/^sentry-/;function Un(e){if(!_e(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=zn(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=zn(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Bn)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function qn(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?o:`${e},${o}`;return s.length>8192?(Ge&&Ke.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${jn}${t}`]=n),e)),{}))}function zn(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const Hn=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Wn(e){if(!e)return;const t=e.match(Hn);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Gn(e,t){const n=Wn(e),r=Un(t),{traceId:o,parentSpanId:s,parentSampled:i}=n||{};return n?{traceId:o||Et(),parentSpanId:s||Et().substring(16),spanId:Et().substring(16),sampled:i,dsc:r||{}}:{traceId:o||Et(),spanId:Et().substring(16)}}function Vn(e=Et(),t=Et().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Yn(e,t=[]){return[e,t]}function Jn(e,t){const[n,r]=e;return[n,[...r,t]]}function Kn(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Xn(e,t){return(t||new TextEncoder).encode(e)}function Qn(e,t){const[n,r]=e;let o=JSON.stringify(n);function s(e){"string"==typeof o?o="string"==typeof e?o+e:[Xn(o,t),e]:o.push("string"==typeof e?Xn(e,t):e)}for(const e of r){const[t,n]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(pn(n))}s(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function Zn(e,t){const n="string"==typeof e.data?Xn(e.data,t):e.data;return[lt({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const er={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function tr(e){return er[e]}function nr(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function rr(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Qe(r)},...o&&{trace:lt({...o})}}}function or(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function sr(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function ir(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,s]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(o[e]=r+a);else o.all=r+a}else i?o.all=r+or(i,r):429===t&&(o.all=r+6e4);return o}function ar(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function cr(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const ur="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,lr="production";function dr(){return je("globalEventProcessors",(()=>[]))}function pr(e){dr().push(e)}function hr(e,t,n,r=0){return new wn(((o,s)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const a=i({...t},n);ur&&i.id&&null===a&&Ke.log(`Event processor "${i.id}" dropped event`),Ee(a)?a.then((t=>hr(e,t,n,r+1).then(o))).then(null,s):hr(e,a,n,r+1).then(o).then(null,s)}}))}function fr(e){const t=Pn(),n={sid:Et(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return lt({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&mr(n,e),n}function mr(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Pn(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Et()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function gr(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),mr(e,n)}function yr(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,tags:a,origin:c}=Sr(e);return lt({data:r,op:o,parent_span_id:s,span_id:t,status:i,tags:a,trace_id:n,origin:c})}function _r(e){const{traceId:t,spanId:n}=e.spanContext();return Vn(t,n,wr(e))}function vr(e){return"number"==typeof e?br(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?br(e.getTime()):Pn()}function br(e){return e>9999999999?e/1e3:e}function Sr(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function wr(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function kr(e,t,n,r,o,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Et(),timestamp:t.timestamp||Ln()},u=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:lr);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=Ce(e.message,s));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=Ce(i.value,s));const a=e.request;a&&a.url&&(a.url=Ce(a.url,s))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),void 0===t.type&&function(e,t){const n=$e._sentryDebugIds;if(!n)return;let r;const o=Er.get(t);o?r=o:(r=new Map,Er.set(t,r));const s=Object.keys(n).reduce(((e,o)=>{let s;const i=r.get(o);i?s=i:(s=t(o),r.set(o,s));for(let t=s.length-1;t>=0;t--){const r=s[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(e){}}(c,e.stackParser);const l=function(e,t){if(!t)return e;const n=e?e.clone():new Gr;return n.update(t),n}(r,n.captureContext);n.mechanism&&Ct(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function(){Wr||(Wr=new Gr);return Wr}().getScopeData();if(s){zr(p,s.getScopeData())}if(l){zr(p,l.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),qr(c,p);return hr([...d,...dr(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:pn(e.data,t,n)}})))},...e.user&&{user:pn(e.user,t,n)},...e.contexts&&{contexts:pn(e.contexts,t,n)},...e.extra&&{extra:pn(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=pn(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=Sr(e).data;return r&&(e.data=pn(r,t,n)),e})));return r}(e,i,a):e)))}const Er=new WeakMap;function xr(e){if(e)return function(e){return e instanceof Gr||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Tr.includes(e)))}(e)?{captureContext:e}:e}const Tr=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Ir(e,t){return eo().captureException(e,xr(t))}function Cr(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return eo().captureMessage(e,n,r)}function Rr(e,t){return eo().captureEvent(e,t)}function Ar(e,t){eo().addBreadcrumb(e,t)}function Or(e,t){eo().setContext(e,t)}function Mr(...e){const t=eo();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function Nr(){return eo().getClient()}function Dr(){return eo().getScope()}function Lr(e){const t=Nr(),n=to(),r=Dr(),{release:o,environment:s=lr}=t&&t.getOptions()||{},{userAgent:i}=$e.navigator||{},a=fr({release:o,environment:s,user:r.getUser()||n.getUser(),...i&&{userAgent:i},...e}),c=n.getSession();return c&&"ok"===c.status&&mr(c,{status:"exited"}),Pr(),n.setSession(a),r.setSession(a),a}function Pr(){const e=to(),t=Dr(),n=t.getSession()||e.getSession();n&&gr(n),$r(),e.setSession(),t.setSession()}function $r(){const e=to(),t=Dr(),n=Nr(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Fr(e=!1){e?Pr():$r()}function jr(e){return e.transaction}function Br(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},i=lt({environment:r.environment||lr,release:r.release,user_segment:s,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",i),i}function Ur(e){const t=Nr();if(!t)return{};const n=Br(Sr(e).trace_id||"",t,Dr()),r=jr(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:s,source:i}=r.metadata;null!=s&&(n.sample_rate=`${s}`);const a=Sr(r);return i&&"url"!==i&&(n.transaction=a.description),n.sampled=String(wr(r)),t.emit&&t.emit("createDsc",n),n}function qr(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t,c=lt(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=lt(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=lt(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=lt(s);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});i&&(e.level=i);a&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:yr(t),...e.contexts};const n=jr(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Ur(t),...e.sdkProcessingMetadata};const r=Sr(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?At(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function zr(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:h,span:f}=t;Hr(e,"extra",n),Hr(e,"tags",r),Hr(e,"user",o),Hr(e,"contexts",s),Hr(e,"sdkProcessingMetadata",a),i&&(e.level=i),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function Hr(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let Wr;class Gr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Vr()}static clone(e){return e?e.clone():new Gr}clone(){const e=new Gr;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&mr(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof Gr){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(Se(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Vr(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Ln(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:s,_level:i,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:s,level:i,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){qr(e,this.getScopeData());return hr([...n,...dr(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Et();if(!this._client)return Ke.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Et();if(!this._client)return Ke.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Et();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Ke.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function Vr(){return{traceId:Et(),spanId:Et().substring(16)}}const Yr="7.119.2",Jr=parseFloat(Yr),Kr=100;class Xr{constructor(e,t,n,r=Jr){let o,s;this._version=r,t?o=t:(o=new Gr,o.setClient(e)),n?s=n:(s=new Gr,s.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=s}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return Ee(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Et(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Et(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Et();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=Kr}=r.getOptions&&r.getOptions()||{};if(s<=0)return;const i={timestamp:Ln(),...e},a=o?Je((()=>o(i,t))):i;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,s))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Zr(this);try{e(this)}finally{Zr(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return ur&&Ke.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(ur&&!n){this.getClient()?Ke.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):Ke.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&gr(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=lr}=n&&n.getOptions()||{},{userAgent:s}=$e.navigator||{},i=fr({release:r,environment:o,user:t.getUser(),...s&&{userAgent:s},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&mr(a,{status:"exited"}),this.endSession(),t.setSession(i),i}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=Qr().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);ur&&Ke.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Qr(){return $e.__SENTRY__=$e.__SENTRY__||{extensions:{},hub:void 0},$e}function Zr(e){const t=Qr(),n=ro(t);return oo(t,e),n}function eo(){const e=Qr();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Qr()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!ro(e).isOlderThan(Jr)||oo(e,new Xr);var t;return ro(e)}(e)}function to(){return eo().getIsolationScope()}function no(e,t={}){const n=Qr();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function ro(e){return je("hub",(()=>new Xr),e)}function oo(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function so(e){return(e||eo()).getScope().getTransaction()}const io=Wn;let ao=!1;function co(){const e=so();if(e){const t="internal_error";ur&&Ke.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var uo;function lo(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}co.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(uo||(uo={}));const po=lo;function ho(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=lo(t);"unknown_error"!==n&&e.setStatus(n)}function fo(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(Ee(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function mo(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Nr(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function go(e,t){const n=bo(e);return no((()=>Mr(e.scope,(r=>{const o=eo(),s=r.getSpan(),i=e.onlyIfParent&&!s?void 0:vo(o,{parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return fo((()=>t(i)),(()=>{if(i){const{status:e}=Sr(i);e&&"ok"!==e||i.setStatus("internal_error")}}),(()=>i&&i.end()))}))))}function yo(e){if(!mo())return;const t=bo(e),n=eo(),r=e.scope?e.scope.getSpan():_o();if(e.onlyIfParent&&!r)return;const o=(e.scope||Dr()).clone();return vo(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function _o(){return Dr().getSpan()}function vo(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!mo())return;const s=to();let i;if(t&&!r)i=t.startChild(n);else if(t){const r=Ur(t),{traceId:o,spanId:s}=t.spanContext(),a=wr(t);i=e.startTransaction({traceId:o,parentSpanId:s,parentSampled:a,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:a,sampled:c}={...s.getPropagationContext(),...o.getPropagationContext()};i=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(i),function(e,t,n){e&&(ot(e,wo,n),ot(e,So,t))}(i,o,s),i}function bo(e){if(e.startTime){const t={...e};return t.startTimestamp=vr(e.startTime),delete t.startTime,t}return e}const So="_sentryScope",wo="_sentryIsolationScope";let ko;function Eo(e){return ko?ko.get(e):void 0}function xo(e){const t=Eo(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(lt(r));return n}const To="sentry.source",Io="sentry.sample_rate",Co="sentry.op",Ro="sentry.origin";class Ao{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Oo{constructor(e={}){this._traceId=e.traceId||Et(),this._spanId=e.spanId||Et().substring(16),this._startTime=e.startTimestamp||Pn(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Ro]:e.origin||"manual",[Co]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Co]}set op(e){this.setAttribute(Co,e)}get origin(){return this._attributes[Ro]}set origin(e){this.setAttribute(Ro,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new Oo({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=jr(this);if(t.transaction=n,ur&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${Sr(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;Ke.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return ho(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=jr(this);if(ur&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&Ke.log(e.replace("Starting","Finishing"))}this._endTime=vr(e)}toTraceparent(){return _r(this)}toContext(){return lt({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return yr(this)}getSpanJSON(){return lt({data:this._getData(),description:this._name,op:this._attributes[Co],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ro],_metrics_summary:xo(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class Mo extends Oo{constructor(e,t){super(e),this._contexts={},this._hub=t||eo(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[To]&&{source:this._attributes[To]},...this._attributes[Io]&&{sampleRate:this._attributes[Io]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(To,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Ao(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=vr(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return lt({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return Ur(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(ur&&Ke.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return ur&&Ke.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&Sr(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>Sr(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(s=this)[So],isolationScope:s[wo]};var s;const{metadata:i}=this,{source:a}=i,c={contexts:{...this._contexts,trace:yr(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...i,capturedSpanScope:r,capturedSpanIsolationScope:o,...lt({dynamicSamplingContext:Ur(this)})},_metrics_summary:xo(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(ur&&Ke.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),ur&&Ke.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const No={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Do=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Lo extends Ao{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===Sr(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class Po extends Mo{constructor(e,t,n=No.idleTimeout,r=No.finalTimeout,o=No.heartbeatInterval,s=!1,i=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=s,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Do[4],this._autoFinishAllowed=!i,s&&(ur&&Ke.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),i||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Do[3],this.end())}),this._finalTimeout)}end(e){const t=vr(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){ur&&Ke.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;Sr(e).timestamp||(e.setStatus("cancelled"),e.end(t),ur&&Ke.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=Sr(e),o=n&&n<t,s=(this._finalTimeout+this._idleTimeout)/1e3,i=r&&n&&r-n<s;if(ur){const t=JSON.stringify(e,void 0,2);o?i||Ke.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):Ke.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&i})),ur&&Ke.log("[Tracing] flushing IdleTransaction")}else ur&&Ke.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new Lo(t,n,this.spanContext().spanId,e),ur&&Ke.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Do[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(ur&&Ke.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=Do[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),ur&&Ke.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,ur&&Ke.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(ur&&Ke.log(`[Tracing] popActivity ${e}`),delete this.activities[e],ur&&Ke.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Pn();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Do[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(ur&&Ke.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Do[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){ur&&Ke.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function $o(e,t,n){if(!mo(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Io,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Io,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Io,Number(r))):(r=1,e.setAttribute(Io,r)),Fo(r)?r?(e.sampled=Math.random()<r,e.sampled?(ur&&Ke.log(`[Tracing] starting ${e.op} transaction - ${Sr(e).description}`),e):(ur&&Ke.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(ur&&Ke.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(ur&&Ke.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Fo(e){return xe(e)||"number"!=typeof e&&"boolean"!=typeof e?(ur&&Ke.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(ur&&Ke.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function jo(){const e=this.getScope().getSpan();return e?{"sentry-trace":_r(e)}:{}}function Bo(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",s=e.instrumenter||"sentry";o!==s&&(ur&&Ke.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let i=new Mo(e,this);return i=$o(i,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),i.isRecording()&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",i),i}function Uo(e,t,n,r,o,s,i,a=!1){const c=e.getClient(),u=c&&c.getOptions()||{};let l=new Po(t,e,n,r,i,o,a);return l=$o(l,u,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...s}),l.isRecording()&&l.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",l),l}function qo(){const e=Qr();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Bo),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=jo),ao||(ao=!0,Vt(co),Kt(co)))}function zo(e,t,n){const r=so();r&&r.setMeasurement(e,t,n)}function Ho(e,t,n,r){const o=nr(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=rr(e,o,r,t);delete e.sdkProcessingMetadata;return Yn(i,[[{type:s},e]])}function Wo(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Go(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function Vo(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${Wo(e)}${e.projectId}/envelope/`}(e)}?${Go(e,r)}`}const Yo=[];function Jo(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?At(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),s=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==s){const[e]=o.splice(s,1);o.push(e)}return o}function Ko(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Xo(e,t,n){if(n[t.name])ur&&Ke.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Yo.indexOf(t.name)&&(t.setupOnce(pr,eo),Yo.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}ur&&Ke.log(`Integration installed: ${t.name}`)}}function Qo(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function Zo(e){return e.replace(/[^\w\-./]+/gi,"")}const es=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function ts(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of es)if(e===t)return n;return e}(t)),"")}function ns(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=Qe(t));const s=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Yn(o,[s])}const rs="Not capturing exception because it's already been captured.";class os{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=tt(e.dsn):ur&&Ke.warn("No DSN provided, client will not send events."),this._dsn){const t=Vo(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(Rt(e))return void(ur&&Ke.log(rs));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const s=ve(e)?e:String(e),i=be(e)?this.eventFromMessage(s,t,n):this.eventFromException(e,n);return this._process(i.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&Rt(t.originalException))return void(ur&&Ke.log(rs));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?ur&&Ke.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),mr(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):bn(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return ur&&Ke.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];Xo(this,e,this._integrations),t||Ko(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Ho(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Jn(n,Zn(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=nr(n);return Yn({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Qe(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${e}:${t}`;ur&&Ke.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}captureAggregateMetrics(e){ur&&Ke.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=ns(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&Xo(e,t,n)})),n}(this,e),Ko(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(mr(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new wn((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=to()){const o=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s.length>0&&(t.integrations=s),this.emit("preprocessEvent",e,t),kr(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:s,dsc:i}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:s},...e.contexts};const a=i||Br(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(ur){const t=e;"log"===t.logLevel?Ke.log(t.message):Ke.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,s=is(e),i=ss(e),a=e.type||"error",c=`before send for type \`${a}\``;if(i&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),Sn(new nt(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const u="replay_event"===a?"replay":a,l=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,l).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new nt("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(ss(t)&&r)return r(t,n);if(is(t)&&o){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(t,n)}return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Ee(e))return e.then((e=>{if(!Se(e)&&null!==e)throw new nt(n);return e}),(e=>{throw new nt(`${t} rejected with ${e}`)}));if(!Se(e)&&null!==e)throw new nt(n);return e}(o,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",u,e),s){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new nt(`${c} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!s&&o&&this._updateSessionFromEvent(o,r),s){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const i=r.transaction_info;if(s&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof nt)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new nt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{ur&&Ke.error("Error while sending event:",e)}));ur&&Ke.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function ss(e){return void 0===e.type}function is(e){return"transaction"===e.type}function as(e){const t=Nr();t&&t.addEventProcessor&&t.addEventProcessor(e)}const cs="c",us="g",ls="s",ds="d";const ps={[cs]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[us]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[ds]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[ls]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function hs(e){const t=eo().getStackTop();t.client=e,t.scope.setClient(e)}function fs(e,t,n=kn(e.bufferSize||30)){let r={};function o(o){const s=[];if(Kn(o,((t,n)=>{const o=tr(n);if(sr(r,o)){const r=ms(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else s.push(t)})),0===s.length)return bn();const i=Yn(o[0],s),a=t=>{Kn(i,((n,r)=>{const o=ms(n,r);e.recordDroppedEvent(t,tr(r),o)}))};return n.add((()=>t({body:Qn(i,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&ur&&Ke.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=ir(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof nt)return ur&&Ke.error("Skipped sending event because buffer is full."),a("queue_overflow"),bn();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function ms(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function gs(e,t){ur&&Ke.info(`[Offline]: ${e}`,t)}function ys(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,s=5e3;function i(e,n,r){return o=["replay_event","replay_recording","client_report"],!Kn(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function a(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(gs("Attempting to send previously queued event"),u(e).catch((e=>{gs("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function c(){o||(a(s),s=Math.min(2*s,36e5))}async function u(e){try{const t=await n.send(e);let r=100;if(t)if(t.headers&&t.headers["retry-after"])r=or(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return a(r),s=5e3,t}catch(t){if(r&&await i(e,t,s))return await r.insert(e),c(),gs("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:u,flush:e=>n.flush(e)}}}function _s(e,t){let n;return Kn(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function vs(e){return[{type:"span"},e]}function bs(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return Ss(e)===Ss(t)}(e,o)}function Ss(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const ws=new Map,ks=new Set;function Es(e,t){return function(e){if($e._sentryModuleMetadata)for(const t of Object.keys($e._sentryModuleMetadata)){const n=$e._sentryModuleMetadata[t];if(ks.has(t))continue;ks.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){ws.set(e.filename,n);break}}}(e),ws.get(t)}const xs="ModuleMetadata",Ts=()=>({name:xs,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{Kn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=Es(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),Is=Qo(xs,Ts),Cs={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},Rs="RequestData";Qo(Rs,((e={})=>{const t=Mn,n={...Cs,...e,include:{method:!0,...Cs.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...Cs.include.user,...(e.include||{}).user}}};return{name:Rs,setupOnce(){},processEvent(e,r,o){const{transactionNamingScheme:s}=n,{sdkProcessingMetadata:i={}}=e,a=i.request;if(!a)return e;const c=i.requestDataOptionsFromExpressHandler||i.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...o}}=e,s=[];for(const[e,t]of Object.entries(o))t&&s.push(e);let i;if(void 0===r)i=!0;else if("boolean"==typeof r)i=r;else{const e=[];for(const[t,n]of Object.entries(r))n&&e.push(t);i=e}return{include:{ip:n,user:i,request:0!==s.length?s:void 0,transaction:t}}}(n),u=t(e,a,c);if("transaction"===e.type||"handler"===s)return u;const l=a._sentryTransaction;if(l){const e=Sr(l).description||"",t="sentry.javascript.nextjs"===function(e){try{return e.getOptions()._metadata.sdk.name}catch(e){return}}(o)?e.startsWith("/api"):"path"!==s,[n]=An(a,{path:!0,method:t,customRoute:e});u.transaction=n}return u}}}));const As=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Os=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Ms="InboundFilters",Ns=(e={})=>({name:Ms,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:As],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Os],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return ur&&Ke.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Tt(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));ur&&0===t.length&&Ke.error(`Could not extract message for event ${Tt(e)}`);return t}(e).some((e=>Oe(e,t)))}(e,t.ignoreErrors))return ur&&Ke.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Tt(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&Oe(n,t)}(e,t.ignoreTransactions))return ur&&Ke.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Tt(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Ls(e);return!!n&&Oe(n,t)}(e,t.denyUrls))return ur&&Ke.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Tt(e)}.\nUrl: ${Ls(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Ls(e);return!n||Oe(n,t)}(e,t.allowUrls))return ur&&Ke.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Tt(e)}.\nUrl: ${Ls(e)}`),!0;return!1}(t,s)?null:t}}),Ds=Qo(Ms,Ns);function Ls(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return ur&&Ke.error(`Cannot extract url for event ${Tt(e)}`),null}}let Ps;const $s="FunctionToString",Fs=new WeakMap,js=()=>({name:$s,setupOnce(){Ps=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=it(this),n=Fs.has(Nr())&&void 0!==t?t:this;return Ps.apply(n,e)}}catch(e){}},setup(e){Fs.set(e,!0)}}),Bs=Qo($s,js),Us="LinkedErrors",qs=Qo(Us,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Us,setupOnce(){},preprocessEvent(e,r,o){const s=o.getOptions();Me(ar,s.stackParser,s.maxValueLength,n,t,e,r)}}}));var zs=Object.freeze({__proto__:null,FunctionToString:Bs,InboundFilters:Ds,LinkedErrors:qs});class Hs{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},s=Pn()){const i=Math.floor(s),a=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[Zo(n)]=ts(String(e[n])));return t}(o),u=function(e){return e.replace(/[^\w]+/gi,"_")}(r),l=function(e,t,n,r){return`${e}${t}${n}${Object.entries(lt(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,a,u,c);let d=this._buckets.get(l);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new ps[e](n),timestamp:i,metricType:e,name:a,unit:u,tags:c},this._buckets.set(l,d));!function(e,t,n,r,o,s){const i=_o();if(i){const a=Eo(i)||new Map,c=`${e}:${t}@${r}`,u=a.get(s);if(u){const[,e]=u;a.set(s,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else a.set(s,[c,{min:n,max:n,count:1,sum:n,tags:o}]);ko||(ko=new WeakMap),ko.set(i,a)}}(e,a,"string"==typeof n?d.metric.weight-p:n,u,o,l)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Ws="MetricsAggregator",Gs=()=>({name:Ws,setupOnce(){},setup(e){e.metricsAggregator=new Hs(e)}});function Vs(e,t,n,r={}){const o=Nr(),s=Dr();if(o){if(!o.metricsAggregator)return void(ur&&Ke.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:i,tags:a,timestamp:c}=r,{release:u,environment:l}=o.getOptions(),d=s.getTransaction(),p={};u&&(p.release=u),l&&(p.environment=l),d&&(p.transaction=Sr(d).description||""),ur&&Ke.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,i,{...p,...a},c)}}const Ys={increment:function(e,t=1,n){Vs("c",e,t,n)},distribution:function(e,t,n){Vs("d",e,t,n)},set:function(e,t,n){Vs("s",e,t,n)},gauge:function(e,t,n){Vs("g",e,t,n)},MetricsAggregator:Qo(Ws,Gs),metricsAggregatorIntegration:Gs},Js=zs,Ks="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Xs(e){const t=cr([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(cr([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class Qs{static __initStatic(){this.id="Express"}constructor(e={}){this.name=Qs.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?Xs(t)?Ks&&Ke.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"==typeof e?Zs(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?Zs(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return Ks&&Ke.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(Ks&&Ke.debug("Routing instrumentation is currently only supported in Express 4."));const r=Object.getPrototypeOf(n),o=r.process_params;r.process_params=function(e,t,n,r,s){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:i,isRegex:a,isArray:c,numExtraSegments:u}=function(e){let t=cr([e,"access",e=>e.route,"optionalAccess",e=>e.path]);const n=ke(t),r=Array.isArray(t);if(!t){const[n]=$e.process.versions.node.split(".").map(Number);n>=16&&(t=ei(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:r,numExtraSegments:0};const o=r?Math.max((i=t,i.reduce(((e,t)=>e+Tn(t.toString())),0)-Tn(e.path||"")),0):0,s=function(e,t){if(e)return t.map((e=>e.toString())).join(",");return t&&t.toString()}(r,t);var i;return{layerRoutePath:s,isRegex:n,isArray:r,numExtraSegments:o}}(e);let l;(i||a||c)&&(n._hasParameters=!0),l=i||(function(e,t,n){const r=cr([xn(e||""),"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e))]);let o=0;const s=cr([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e)),"access",e=>e.length])||0;return cr([n,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>cr([r,"optionalAccess",e=>e[s+o]])===e&&(o+=1,!0))),"access",e=>e.join,"call",e=>e("/")])}(n.originalUrl,n._reconstructedRoute,e.path)||"");const d=l.split("/").filter((e=>e.length>0&&(a||c||!e.includes("*")))).join("/");d&&d.length>0&&(n._reconstructedRoute+=`/${d}${a?"/":""}`);if(Tn(xn(n.originalUrl||""))+u===Tn(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl?xn(n.originalUrl):n.originalUrl);const e=r.__sentry_transaction,t=e&&Sr(e).data||{};if(e&&"custom"!==t[To]){const t=n._reconstructedRoute||"/",[r,o]=An(n,{path:!0,method:!0,customRoute:t});e.updateName(r),e.setAttribute(To,o)}}return o.call(this,e,t,n,r,s)}}(this._router)):Ks&&Ke.error("ExpressIntegration is missing an Express instance")}}function Zs(e,t){const n=e.length;switch(n){case 2:return function(n,r){const o=r.__sentry_transaction;if(o){const n=o.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});r.once("finish",(()=>{n.end()}))}return e.call(this,n,r)};case 3:return function(n,r,o){const s=cr([r.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,r,(function(...e){cr([s,"optionalAccess",e=>e.end,"call",e=>e()]),o.call(this,...e)}))};case 4:return function(n,r,o,s){const i=cr([o.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,r,o,(function(...e){cr([i,"optionalAccess",e=>e.end,"call",e=>e()]),s.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}Qs.__initStatic();const ei=(e,t,n)=>{if(!(e&&t&&n&&0!==Object.keys(n).length&&cr([n,"access",e=>e[0],"optionalAccess",e=>e.offset])))return;const r=n.sort(((e,t)=>e.offset-t.offset)),o=new RegExp(t,`${t.flags}d`).exec(e);if(!o||!o.indices)return;const[,...s]=o.indices;if(s.length!==r.length)return;let i=e,a=0;return s.forEach(((e,t)=>{if(e){const[n,o]=e,s=i.substring(0,n-a),c=`:${r[t].name}`,u=i.substring(o-a);i=s+c+u,a+=o-n-c.length}})),i};class ti{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=ti.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||ln("pg")}setupOnce(e,t){if(Xs(t))return void(Ks&&Ke.log("Postgres Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(Ks&&Ke.error("Postgres Integration was unable to require `pg` package."));const r=this._usePgNative?cr([n,"access",e=>e.native,"optionalAccess",e=>e.Client]):n.Client;r?rt(r.prototype,"query",(function(e){return function(n,r,o){const s=t().getScope().getSpan(),i={"db.system":"postgresql"};try{this.database&&(i["db.name"]=this.database),this.host&&(i["server.address"]=this.host),this.port&&(i["server.port"]=this.port),this.user&&(i["db.user"]=this.user)}catch(e){}const a=cr([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",origin:"auto.db.postgres",data:i})]);if("function"==typeof o)return e.call(this,n,r,(function(e,t){cr([a,"optionalAccess",e=>e.end,"call",e=>e()]),o(e,t)}));if("function"==typeof r)return e.call(this,n,(function(e,t){cr([a,"optionalAccess",e=>e.end,"call",e=>e()]),r(e,t)}));const c=void 0!==r?e.call(this,n,r):e.call(this,n);return Ee(c)?c.then((e=>(cr([a,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(cr([a,"optionalAccess",e=>e.end,"call",e=>e()]),c)}})):Ks&&Ke.error("Postgres Integration was unable to access 'pg-native' bindings.")}}ti.__initStatic();class ni{static __initStatic(){this.id="Mysql"}constructor(){this.name=ni.id}loadDependency(){return this._module=this._module||ln("mysql/lib/Connection.js")}setupOnce(e,t){if(Xs(t))return void(Ks&&Ke.log("Mysql Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(Ks&&Ke.error("Mysql Integration was unable to require `mysql` package."));let r;try{n.prototype.connect=new Proxy(n.prototype.connect,{apply:(e,t,n)=>(r||(r=t.config),e.apply(t,n))})}catch(e){Ks&&Ke.error("Mysql Integration was unable to instrument `mysql` config.")}function o(e){if(!e)return;const t=r?{"server.address":r.host,"server.port":r.port,"db.user":r.user}:{};Object.keys(t).forEach((n=>{e.setAttribute(n,t[n])})),e.end()}rt(n,"createQuery",(function(e){return function(n,r,s){const i=cr([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"==typeof s)return e.call(this,n,r,(function(e,t,n){o(i),s(e,t,n)}));if("function"==typeof r)return e.call(this,n,(function(e,t,n){o(i),r(e,t,n)}));const a=e.call(this,n,r);return a.on("end",(()=>{o(i)})),a}}))}}ni.__initStatic();const ri=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],oi={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class si{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=si.id,this._operations=Array.isArray(e.operations)?e.operations:ri,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||ln(e)}setupOnce(e,t){if(Xs(t))return void(Ks&&Ke.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(n)this._instrumentOperations(n.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";Ks&&Ke.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const r=this._getSpanContextFromOperationArguments.bind(this);rt(e.prototype,t,(function(e){return function(...o){const s=o[o.length-1],i=n(),a=i.getScope(),c=i.getClient(),u=a.getSpan(),l=cr([c,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!=typeof s||"mapReduce"===t&&2===o.length){const n=cr([u,"optionalAccess",e=>e.startChild,"call",e=>e(r(this,t,o,l))]),s=e.call(this,...o);if(Ee(s))return s.then((e=>(cr([n,"optionalAccess",e=>e.end,"call",e=>e()]),e)));if((d=s)&&"object"==typeof d&&d.once&&"function"==typeof d.once){const e=s;try{e.once("close",(()=>{cr([n,"optionalAccess",e=>e.end,"call",e=>e()])}))}catch(e){cr([n,"optionalAccess",e=>e.end,"call",e=>e()])}return e}return cr([n,"optionalAccess",e=>e.end,"call",e=>e()]),s}var d;const p=cr([u,"optionalAccess",e=>e.startChild,"call",e=>e(r(this,t,o.slice(0,-1)))]);return e.call(this,...o.slice(0,-1),(function(e,t){cr([p,"optionalAccess",e=>e.end,"call",e=>e()]),s(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n,r=!1){const o={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},s={op:"db",origin:"auto.db.mongo",description:t,data:o},i=oi[t],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!i||!a||!r)return s;try{if("mapReduce"===t){const[e,t]=n;o[i[0]]="string"==typeof e?e:e.name||"<anonymous>",o[i[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<i.length;e++)o[`db.mongodb.${i[e]}`]=JSON.stringify(n[e])}catch(e){}return s}}si.__initStatic();class ii{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=ii.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){ot(e.client,"_sentryInstrumented",!0);const t={};try{const n=e.client._engineConfig;if(n){const{activeProvider:e,clientVersion:r}=n;e&&(t["db.system"]=e),r&&(t["db.prisma.version"]=r)}}catch(e){}e.client.$use(((e,n)=>{if(Xs(eo))return n(e);const r=e.action,o=e.model;return go({name:o?`${o} ${r}`:r,onlyIfParent:!0,op:"db.prisma",attributes:{[Ro]:"auto.db.prisma"},data:{...t,"db.operation":r}},(()=>n(e)))}))}else Ks&&Ke.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}ii.__initStatic();class ai{static __initStatic(){this.id="GraphQL"}constructor(){this.name=ai.id}loadDependency(){return this._module=this._module||ln("graphql/execution/execute.js")}setupOnce(e,t){if(Xs(t))return void(Ks&&Ke.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?rt(n,"execute",(function(e){return function(...n){const r=t().getScope(),o=r.getSpan(),s=cr([o,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);cr([r,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]);const i=e.call(this,...n);return Ee(i)?i.then((e=>(cr([s,"optionalAccess",e=>e.end,"call",e=>e()]),cr([r,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]),e))):(cr([s,"optionalAccess",e=>e.end,"call",e=>e()]),cr([r,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]),i)}})):Ks&&Ke.error("GraphQL Integration was unable to require graphql/execution package.")}}ai.__initStatic();class ci{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=ci.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||ln("@nestjs/graphql"):this._module=this._module||ln("apollo-server-core"),this._module}setupOnce(e,t){if(Xs(t))Ks&&Ke.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(Ks&&Ke.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));rt(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...n){return rt(this.resolversExplorerService,"explore",(function(e){return function(){return ui(At(e.call(this)),t)}})),e.call(this,...n)}}))}else{const e=this.loadDependency();if(!e)return void(Ks&&Ke.error("Apollo Integration was unable to require apollo-server-core package."));rt(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return Ks&&(this.config.schema?(Ke.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),Ke.warn()):this.config.modules&&Ke.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),Ke.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=At(this.config.resolvers);return this.config.resolvers=ui(n,t),e.call(this)}}))}}}function ui(e,t){return e.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((r=>{"function"==typeof e[n][r]&&function(e,t,n,r){rt(e[t],n,(function(e){return function(...o){const s=cr([r().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),i=e.call(this,...o);return Ee(i)?i.then((e=>(cr([s,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(cr([s,"optionalAccess",e=>e.end,"call",e=>e()]),i)}}))}(e,n,r,t)}))})),e)))}ci.__initStatic();const li=$e;function di(){li.document?li.document.addEventListener("visibilitychange",(()=>{const e=so();if(li.document.hidden&&e){const t="cancelled",{op:n,status:r}=Sr(e);Ks&&Ke.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):Ks&&Ke.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const pi=(e,t,n)=>{let r,o;return s=>{t.value>=0&&(s||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},hi=()=>li.__WEB_VITALS_POLYFILL__?li.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=li.performance.timing,t=li.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):li.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],fi=()=>{const e=hi();return e&&e.activationStart||0},mi=(e,t)=>{const n=hi();let r="navigate";return n&&(r=li.document&&li.document.prerendering||fi()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},gi=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},yi=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==li.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};li.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let _i=-1;const vi=()=>(_i<0&&(li.document&&li.document.visibilityState&&(_i="hidden"!==li.document.visibilityState||li.document.prerendering?1/0:0),yi((({timeStamp:e})=>{_i=e}),!0)),{get firstHiddenTime(){return _i}});let bi=0,Si=1/0,wi=0;const ki=e=>{e.forEach((e=>{e.interactionId&&(Si=Math.min(Si,e.interactionId),wi=Math.max(wi,e.interactionId),bi=wi?(wi-Si)/7+1:0)}))};let Ei;const xi=()=>{"interactionCount"in performance||Ei||(Ei=gi("event",ki,{type:"event",buffered:!0,durationThreshold:0}))},Ti=()=>Ei?bi:performance.interactionCount||0,Ii=[],Ci={},Ri=e=>{const t=Ii[Ii.length-1],n=Ci[e.interactionId];if(n||Ii.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};Ci[t.id]=t,Ii.push(t)}Ii.sort(((e,t)=>t.latency-e.latency)),Ii.splice(10).forEach((e=>{delete Ci[e.id]}))}},Ai=(e,t)=>{t=t||{},xi();const n=mi("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&Ri(e),"first-input"===e.entryType){!Ii.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&Ri(e)}}));const t=(()=>{const e=Math.min(Ii.length-1,Math.floor(Ti()/50));return Ii[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},s=gi("event",o,{durationThreshold:t.durationThreshold||40});r=pi(e,n,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),yi((()=>{o(s.takeRecords()),n.value<0&&Ti()>0&&(n.value=0,n.entries=[]),r(!0)})))},Oi={},Mi=e=>{li.document&&(li.document.prerendering?addEventListener("prerenderingchange",(()=>Mi(e)),!0):"complete"!==li.document.readyState?addEventListener("load",(()=>Mi(e)),!0):setTimeout(e,0))},Ni={},Di={};let Li,Pi,$i,Fi,ji;function Bi(e,t=!1){return Yi("lcp",e,Wi,$i,t)}function Ui(e,t){return Ji(e,t),Di[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);gi(e,(t=>{qi(e,{entries:t})}),t)}(e),Di[e]=!0),Ki(e,t)}function qi(e,t){const n=Ni[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){Ks&&Ke.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${gt(r)}\nError:`,t)}}function zi(){return((e,t={})=>{const n=mi("CLS",0);let r,o=0,s=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=s[0],i=s[s.length-1];o&&0!==s.length&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e]),o>n.value&&(n.value=o,n.entries=s,r&&r())}}))},a=gi("layout-shift",i);if(a){r=pi(e,n,t.reportAllChanges);const o=()=>{i(a.takeRecords()),r(!0)};return yi(o),o}})((e=>{qi("cls",{metric:e}),Li=e}),{reportAllChanges:!0})}function Hi(){return(e=>{const t=vi(),n=mi("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},s=e=>{e.forEach(o)},i=gi("first-input",s);r=pi(e,n),i&&yi((()=>{s(i.takeRecords()),i.disconnect()}),!0)})((e=>{qi("fid",{metric:e}),Pi=e}))}function Wi(){return(e=>{const t=vi(),n=mi("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-fi(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},s=gi("largest-contentful-paint",o);if(s){r=pi(e,n);const t=()=>{Oi[n.id]||(o(s.takeRecords()),s.disconnect(),Oi[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{li.document&&addEventListener(e,t,{once:!0,capture:!0})})),yi(t,!0),t}})((e=>{qi("lcp",{metric:e}),$i=e}))}function Gi(){return((e,t)=>{t=t||{};const n=mi("TTFB"),r=pi(e,n,t.reportAllChanges);Mi((()=>{const e=hi();if(e){if(n.value=Math.max(e.responseStart-fi(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))})((e=>{qi("ttfb",{metric:e}),Fi=e}))}function Vi(){return Ai((e=>{qi("inp",{metric:e}),ji=e}))}function Yi(e,t,n,r,o=!1){let s;return Ji(e,t),Di[e]||(s=n(),Di[e]=!0),r&&t({metric:r}),Ki(e,t,o?s:void 0)}function Ji(e,t){Ni[e]=Ni[e]||[],Ni[e].push(t)}function Ki(e,t,n){return()=>{n&&n();const r=Ni[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function Xi(e){return"number"==typeof e&&isFinite(e)}function Qi(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function Zi(e){return e/1e3}function ea(){return li&&li.addEventListener&&li.performance}let ta,na,ra=0,oa={};function sa(){const e=ea();if(e&&$n){e.mark&&li.performance.mark("sentry-tracing-init");const t=Yi("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Zi($n),r=Zi(t.startTime);Ks&&Ke.log("[Measurements] Adding FID"),oa.fid={value:e.value,unit:"millisecond"},oa["mark.fid"]={value:n+r,unit:"second"}}),Hi,Pi),n=function(e,t=!1){return Yi("cls",e,zi,Li,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Ks&&Ke.log("[Measurements] Adding CLS"),oa.cls={value:e.value,unit:""},na=t)}),!0),r=Bi((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Ks&&Ke.log("[Measurements] Adding LCP"),oa.lcp={value:e.value,unit:"millisecond"},ta=t)}),!0),o=function(e){return Yi("ttfb",e,Gi,Fi)}((({metric:e})=>{e.entries[e.entries.length-1]&&(Ks&&Ke.log("[Measurements] Adding TTFB"),oa.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function ia(){Ui("longtask",(({entries:e})=>{for(const t of e){const e=so();if(!e)return;const n=Zi($n+t.startTime),r=Zi(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function aa(){Ui("event",(({entries:e})=>{for(const t of e){const e=so();if(!e)return;if("click"===t.name){const n=Zi($n+t.startTime),r=Zi(t.duration),o={description:Ue(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},s=We(t.target);s&&(o.attributes={"ui.component_name":s}),e.startChild(o)}}}))}function ca(e,t){if(ea()&&$n){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==ua[e.name])),o=Nr();if(!r||!o)return;const s=ua[r.name],i=o.getOptions(),a=Zi($n+r.startTime),c=Zi(n.value),u=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===u)return;const{routeName:l,parentContext:d,activeTransaction:p,user:h,replayId:f}=u,m=void 0!==h?h.email||h.id||h.ip_address:void 0,g=void 0!==p?p.getProfileId():void 0,y=new Oo({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${s}`,name:Ue(r.target),attributes:{release:i.release,environment:i.environment,transaction:l,...void 0!==m&&""!==m?{user:m}:{},...void 0!==g?{profile_id:g}:{},...void 0!==f?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),_=function(e,t,n){if(!mo(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:li.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,Fo(r)?!0===r?n:!1===r?0:r*n:(Ks&&Ke.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,i,t);if(_&&Math.random()<_){const e=y?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=Qe(t)),Yn(n,e.map(vs))}([y],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{Ks&&Ke.error("Error while sending interaction:",e)}))}},Yi("inp",n,Vi,ji);var n}(e,t);return()=>{n()}}return()=>{}}const ua={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function la(e){const t=ea();if(!t||!li.performance.getEntries||!$n)return;Ks&&Ke.log("[Tracing] Adding & adjusting spans using Performance API");const n=Zi($n),r=t.getEntries(),{op:o,start_timestamp:s}=Sr(e);if(r.slice(ra).forEach((t=>{const r=Zi(t.startTime),o=Zi(t.duration);if(!("navigation"===e.op&&s&&n+r<s))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{da(e,t,r,n)})),da(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),da(e,t,"fetch",n,"cache","domainLookupStart"),da(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(Qi(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Zi(t.requestStart),endTimestamp:n+Zi(t.responseEnd)}),Qi(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Zi(t.responseStart),endTimestamp:n+Zi(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const s=o+n,i=s+r;Qi(e,{description:t.name,endTimestamp:i,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s})}(e,t,r,o,n);const s=vi(),i=t.startTime<s.firstHiddenTime;"first-paint"===t.name&&i&&(Ks&&Ke.log("[Measurements] Adding FP"),oa.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(Ks&&Ke.log("[Measurements] Adding FCP"),oa.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=En(n),a={};pa(a,t,"transferSize","http.response_transfer_size"),pa(a,t,"encodedBodySize","http.response_content_length"),pa(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(li.location.origin);const c=s+r,u=c+o;Qi(e,{description:n.replace(li.location.origin,""),endTimestamp:u,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(e,t,t.name,r,o,n)}})),ra=Math.max(r.length-1,0),function(e){const t=li.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Xi(n.rtt)&&(oa["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Xi(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);Xi(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=hi();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(Ks&&Ke.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(oa),["fcp","fp","lcp"].forEach((e=>{if(!oa[e]||!s||n>=s)return;const t=oa[e].value,r=n+Zi(t),o=Math.abs(1e3*(r-s)),i=o-t;Ks&&Ke.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${i})`),oa[e].value=o}));const t=oa["mark.fid"];t&&oa.fid&&(Qi(e,{description:"first input delay",endTimestamp:t.value+Zi(oa.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete oa["mark.fid"]),"fcp"in oa||delete oa.cls,Object.keys(oa).forEach((e=>{zo(e,oa[e].value,oa[e].unit)})),function(e){ta&&(Ks&&Ke.log("[Measurements] Adding LCP Data"),ta.element&&e.setTag("lcp.element",Ue(ta.element)),ta.id&&e.setTag("lcp.id",ta.id),ta.url&&e.setTag("lcp.url",ta.url.trim().slice(0,200)),e.setTag("lcp.size",ta.size));na&&na.sources&&(Ks&&Ke.log("[Measurements] Adding CLS Data"),na.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,Ue(t.node)))))}(e)}ta=void 0,na=void 0,oa={}}function da(e,t,n,r,o,s){const i=s?t[s]:t[`${n}End`],a=t[`${n}Start`];a&&i&&Qi(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+Zi(a),endTimestamp:r+Zi(i)})}function pa(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}function ha(e,t,n,r,o="auto.http.browser"){if(!mo()||!e.fetchData)return;const s=t(e.fetchData.url);if(e.endTimestamp&&s){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){ho(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const i=Dr(),a=Nr(),{method:c,url:u}=e.fetchData,l=function(e){try{return new URL(e).href}catch(e){return}}(u),d=l?En(l).host:void 0,p=s?yo({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,"http.url":l,"server.address":d,[Ro]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const s=o||n.getSpan(),i=to(),{traceId:a,spanId:c,sampled:u,dsc:l}={...i.getPropagationContext(),...n.getPropagationContext()},d=s?_r(s):Vn(a,c,u),p=qn(l||(s?Ur(s):Br(a,t,n))),h=r.headers||("undefined"!=typeof Request&&Te(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&Te(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",d),p&&e.append(Fn,p),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",d]];return p&&e.push([Fn,p]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...h,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,a,i,n,p)}return p}const fa=["localhost",/^\/(?!\/)/],ma={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:fa,tracePropagationTargets:fa};function ga(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i}={traceFetch:ma.traceFetch,traceXHR:ma.traceXHR,...e},a="function"==typeof s?s:e=>!0,c=e=>function(e,t){return Oe(e,t||fa)}(e,r||o),u={};t&&qt((e=>{const t=ha(e,a,c,u);if(t){const n=va(e.fetchData.url),r=n?En(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}i&&t&&ya(t)})),n&&sn((e=>{const t=function(e,t,n,r){const o=e.xhr,s=o&&o[on];if(!mo()||!o||o.__sentry_own_request__||!s)return;const i=t(s.url);if(e.endTimestamp&&i){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==s.status_code&&(ho(t,s.status_code),t.end(),delete r[e]))}const a=Dr(),c=to(),u=va(s.url),l=u?En(u).host:void 0,d=i?yo({name:`${s.method} ${s.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":s.method,"http.url":u,url:s.url,"server.address":l,[Ro]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=Nr();if(o.setRequestHeader&&n(s.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...a.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Fn,n)}catch(e){}}(o,d?_r(d):Vn(e,t,n),qn(r||(d?Ur(d):Br(e,p,a))))}return d}(e,a,c,u);i&&t&&ya(t)}))}function ya(e){const{url:t}=Sr(e).data||{};if(!t||"string"!=typeof t)return;const n=Ui("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!$n)return r;return[...r,["http.request.redirect_start",_a(e.redirectStart)],["http.request.fetch_start",_a(e.fetchStart)],["http.request.domain_lookup_start",_a(e.domainLookupStart)],["http.request.domain_lookup_end",_a(e.domainLookupEnd)],["http.request.connect_start",_a(e.connectStart)],["http.request.secure_connection_start",_a(e.secureConnectionStart)],["http.request.connection_end",_a(e.connectEnd)],["http.request.request_start",_a(e.requestStart)],["http.request.response_start",_a(e.responseStart)],["http.request.response_end",_a(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function _a(e=0){return(($n||performance.timeOrigin)+e)/1e3}function va(e){try{return new URL(e,li.location.origin).href}catch(e){return}}const ba={...No,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!li||!li.location)return void(Ks&&Ke.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=li.location.href;t&&(r=e({name:li.location.pathname,startTimestamp:$n?$n/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&tn((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(Ks&&Ke.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:li.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...ma};function Sa(e){const t=He(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function wa(e){const t=e.attributes&&e.attributes[To],n=e.data&&e.data[To],r=e.metadata&&e.metadata.source;return t||n||r}const ka={...No,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...ma};function Ea(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=_o();return"pageload"===(n&&Sr(n).op)?n:void 0}function xa(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=_o();return"navigation"===(n&&Sr(n).op)?n:void 0}function Ta(e){const t=He(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const Ia=10;function Ca(e){const t=e.attributes&&e.attributes[To],n=e.data&&e.data[To],r=e.metadata&&e.metadata.source;return t||n||r}const Ra=$e;let Aa=0;function Oa(){return Aa>0}function Ma(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(it(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((e=>Ma(e,t)));return e.apply(this,o)}catch(e){throw Aa++,setTimeout((()=>{Aa--})),Mr((n=>{n.addEventProcessor((e=>(t.mechanism&&(It(e,void 0,void 0),Ct(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),Ir(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}st(r,e),ot(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const Na="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Da(e,t){const n=Pa(e,t),r={type:t&&t.name,value:Fa(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function La(e,t){return{exception:{values:[Da(e,t)]}}}function Pa(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if($a.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const $a=/Minified React error #\d+;/i;function Fa(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function ja(e,t,n,r){const o=Ua(e,t,n&&n.syntheticException||void 0,r);return Ct(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),bn(o)}function Ba(e,t,n="info",r,o){const s=qa(e,t,r&&r.syntheticException||void 0,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),bn(s)}function Ua(e,t,n,r,o){let s;if(ge(t)&&t.error){return La(e,t.error)}if(ye(t)||me(t,"DOMException")){const o=t;if("stack"in t)s=La(e,t);else{const t=o.name||(ye(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;s=qa(e,i,n,r),It(s,i)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}if(fe(t))return La(e,t);if(Se(t)||we(t)){return s=function(e,t,n,r){const o=Nr(),s=o&&o.getOptions().normalizeDepth,i={exception:{values:[{type:we(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:za(t,{isUnhandledRejection:r})}]},extra:{__serialized__:hn(t,s)}};if(n){const t=Pa(e,n);t.length&&(i.exception.values[0].stacktrace={frames:t})}return i}(e,t,n,o),Ct(s,{synthetic:!0}),s}return s=qa(e,t,n,r),It(s,`${t}`,void 0),Ct(s,{synthetic:!0}),s}function qa(e,t,n,r){const o={};if(r&&n){const r=Pa(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(ve(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function za(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(at(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ce(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:Ce(r,t)}return""}(e),r=t?"promise rejection":"exception";if(ge(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(we(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Ha(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Qe(r)}},s=function(e){return[{type:"user_report"},e]}(e);return Yn(o,[s])}class Wa extends os{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:Yr}))),version:Yr}),e._metadata=o}(e,"browser",["browser"],Ra.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Ra.document&&Ra.document.addEventListener("visibilitychange",(()=>{"hidden"===Ra.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return ja(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return Ba(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Na&&Ke.warn("SDK not enabled, will not capture user feedback."));const t=Ha(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Na&&Ke.log("No outcomes to send"));if(!this._dsn)return void(Na&&Ke.log("No dsn provided, will not send outcomes"));Na&&Ke.log("Sending outcomes:",e);const t=(n=e,Yn((r=this._options.tunnel&&Qe(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||Ln(),discarded_events:n}]]));var n,r,o;this._sendEnvelope(t)}}let Ga;function Va(e,t=function(){if(Ga)return Ga;if(Bt(Ra.fetch))return Ga=Ra.fetch.bind(Ra);const e=Ra.document;let t=Ra.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){Na&&Ke.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Ga=t.bind(Ra)}()){let n=0,r=0;return fs(e,(function(o){const s=o.body.length;n+=s,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,i).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Ga=void 0,n-=s,r--,Sn(e)}}))}function Ya(e){return fs(e,(function(t){return new wn(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{4===o.readyState&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const Ja="?";function Ka(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Xa=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Qa=/\((\S*)(?::(\d+))(?::(\d+))\)/,Za=[30,e=>{const t=Xa.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Qa.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=dc(t[1]||Ja,t[2]);return Ka(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],ec=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,tc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,nc=[50,e=>{const t=ec.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=tc.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Ja;return[n,e]=dc(n,e),Ka(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],rc=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,oc=[40,e=>{const t=rc.exec(e);return t?Ka(t[2],t[1]||Ja,+t[3],t[4]?+t[4]:void 0):void 0}],sc=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ic=[10,e=>{const t=sc.exec(e);return t?Ka(t[2],t[3]||Ja,+t[1]):void 0}],ac=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,cc=[20,e=>{const t=ac.exec(e);return t?Ka(t[5],t[3]||t[4]||Ja,+t[1],+t[2]):void 0}],uc=[Za,nc,oc],lc=ft(...uc),dc=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Ja,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},pc=1024,hc="Breadcrumbs",fc=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:hc,setupOnce(){},setup(e){t.console&&wt(function(e){return function(t){if(Nr()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Dn(t.level),message:Ae(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Ae(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Ar(n,{input:t.args,level:t.level})}}(e)),t.dom&&Lt(function(e,t){return function(n){if(Nr()!==e)return;let r,o,s="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>pc&&(Na&&Ke.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=pc),"string"==typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Ue(t,{keyAttrs:s,maxStringLength:i}),o=We(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),Ar(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&sn(function(e){return function(t){if(Nr()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[on];if(!n||!r||!o)return;const{method:s,url:i,status_code:a,body:c}=o;Ar({category:"xhr",data:{method:s,url:i,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&qt(function(e){return function(t){if(Nr()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Ar({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;Ar({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&tn(function(e){return function(t){if(Nr()!==e)return;let n=t.from,r=t.to;const o=En(Ra.location.href);let s=n?En(n):void 0;const i=En(r);s&&s.path||(s=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),Ar({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Nr()===e&&Ar({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Tt(t)},{event:t})}}(e))}}},mc=Qo(hc,fc);const gc="Dedupe",yc=()=>{let e;return{name:gc,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!bc(e,t))return!1;if(!vc(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Sc(t),r=Sc(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!bc(e,t))return!1;if(!vc(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Na&&Ke.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},_c=Qo(gc,yc);function vc(e,t){let n=wc(e),r=wc(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function bc(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Sc(e){return e.exception&&e.exception.values&&e.exception.values[0]}function wc(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const kc="GlobalHandlers",Ec=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:kc,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Vt((t=>{const{stackParser:n,attachStacktrace:r}=Cc();if(Nr()!==e||Oa())return;const{msg:o,url:s,line:i,column:a,error:c}=t,u=void 0===c&&_e(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=ge(e)?e.message:e,i="Error";const a=s.match(o);a&&(i=a[1],s=a[2]);const c={exception:{values:[{type:i,value:s}]}};return Tc(c,t,n,r)}(o,s,i,a):Tc(Ua(n,c||o,void 0,r,!1),s,i,a);u.level="error",Rr(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),Ic("onerror")),t.onunhandledrejection&&(!function(e){Kt((t=>{const{stackParser:n,attachStacktrace:r}=Cc();if(Nr()!==e||Oa())return;const o=function(e){if(be(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),s=be(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Ua(n,o,void 0,r,!0);s.level="error",Rr(s,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Ic("onunhandledrejection"))}}},xc=Qo(kc,Ec);function Tc(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=_e(t)&&t.length>0?t:ze();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function Ic(e){Na&&Ke.log(`Global Handler attached: ${e}`)}function Cc(){const e=Nr();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Rc="HttpContext",Ac=()=>({name:Rc,setupOnce(){},preprocessEvent(e){if(!Ra.navigator&&!Ra.location&&!Ra.document)return;const t=e.request&&e.request.url||Ra.location&&Ra.location.href,{referrer:n}=Ra.document||{},{userAgent:r}=Ra.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};e.request=s}}),Oc=Qo(Rc,Ac),Mc="LinkedErrors",Nc=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Mc,setupOnce(){},preprocessEvent(e,r,o){const s=o.getOptions();Me(Da,s.stackParser,s.maxValueLength,n,t,e,r)}}},Dc=Qo(Mc,Nc),Lc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Pc="TryCatch",$c=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Pc,setupOnce(){t.setTimeout&&rt(Ra,"setTimeout",jc),t.setInterval&&rt(Ra,"setInterval",jc),t.requestAnimationFrame&&rt(Ra,"requestAnimationFrame",Bc),t.XMLHttpRequest&&"XMLHttpRequest"in Ra&&rt(XMLHttpRequest.prototype,"send",Uc);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Lc).forEach(qc)}}}},Fc=Qo(Pc,$c);function jc(e){return function(...t){const n=t[0];return t[0]=Ma(n,{mechanism:{data:{function:gt(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Bc(e){return function(t){return e.apply(this,[Ma(t,{mechanism:{data:{function:"requestAnimationFrame",handler:gt(e)},handled:!1,type:"instrument"}})])}}function Uc(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&rt(n,e,(function(t){const n={mechanism:{data:{function:e,handler:gt(t)},handled:!1,type:"instrument"}},r=it(t);return r&&(n.mechanism.data.handler=gt(r)),Ma(t,n)}))})),e.apply(this,t)}}function qc(e){const t=Ra,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(rt(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Ma(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:gt(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Ma(r,{mechanism:{data:{function:"addEventListener",handler:gt(r),target:e},handled:!1,type:"instrument"}}),o])}})),rt(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const zc=[Ns(),js(),$c(),fc(),Ec(),Nc(),yc(),Ac()];function Hc(e){return[...zc]}function Wc(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=Hc()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Ra.SENTRY_RELEASE&&Ra.SENTRY_RELEASE.id&&(e.release=Ra.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||lc,Array.isArray(n)?ft(...n):n),integrations:Jo(e),transport:e.transport||(jt()?Va:Ya)};var n;!function(e,t){!0===t.debug&&(ur?Ke.enable():Je((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Dr().update(t.initialScope);const n=new e(t);hs(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(Wa,t),e.autoSessionTracking&&function(){if(void 0===Ra.document)return void(Na&&Ke.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Lr({ignoreDuration:!0}),Fr(),tn((({from:e,to:t})=>{void 0!==e&&e!==t&&(Lr({ignoreDuration:!0}),Fr())}))}()}var Gc=Object.freeze({__proto__:null,GlobalHandlers:xc,TryCatch:Fc,Breadcrumbs:mc,LinkedErrors:Dc,HttpContext:Oc,Dedupe:_c});const Vc=$e,Yc="sentryReplaySession",Jc="Unable to send Replay",Kc=15e4,Xc=5e3,Qc=2e7,Zc=36e5;function eu(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}var tu;function nu(e){const t=eu([e,"optionalAccess",e=>e.host]);return Boolean(eu([t,"optionalAccess",e=>e.shadowRoot])===e)}function ru(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function ou(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,su).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function su(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=ou(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(tu||(tu={}));class iu{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=eu([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function au({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function cu({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function uu(e){return e.toLowerCase()}function lu(e){return e.toUpperCase()}const du="__rrweb_original__";function pu(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?uu(t):null}function hu(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let fu=1;const mu=new RegExp("[^a-z0-9-_:]");function gu(){return fu++}let yu,_u;const vu=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,bu=/^(?:[a-z+]+:)?\/\//i,Su=/^www\..*/i,wu=/^(data:)([^,]*),(.*)/i;function ku(e,t){return(e||"").replace(vu,((e,n,r,o,s,i)=>{const a=r||s||i,c=n||o||"";if(!a)return e;if(bu.test(a)||Su.test(a))return`url(${c}${a}${c})`;if(wu.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const e of l)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${c}${u.join("/")}${c})`}))}const Eu=/^[^ \t\n\r\u000c]+/,xu=/^[, \t\n\r\u000c]+/;function Tu(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Iu(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Cu(){const e=document.createElement("a");return e.href="",e.href}function Ru(e,t,n,r,o,s){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Tu(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(xu),!(n>=t.length);){let s=r(Eu);if(","===s.slice(-1))s=Tu(e,s.substring(0,s.length-1)),o.push(s);else{let r="";s=Tu(e,s);let i=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((s+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,o.push((s+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?ku(r,Cu()):"object"===t&&"data"===n?Tu(e,r):"function"==typeof s?s(n,r,o):r:Tu(e,r):r}function Au(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Ou(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Ou(e.parentNode,t,n,r+1):-1}function Mu(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Nu(e,t,n,r,o,s){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(s){if(c=Ou(i,Mu(r,o)),c<0)return!0;a=Ou(i,Mu(t,n),c>=0?c:1/0)}else{if(a=Ou(i,Mu(t,n)),a<0)return!1;c=Ou(i,Mu(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!s}catch(e){}return!!s}function Du(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:tu.Document,childNodes:[],compatMode:e.compatMode}:{type:tu.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:tu.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:y,unmaskTextClass:_,maskTextSelector:v,unmaskTextSelector:b}=t,S=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,s),w=function(e){if(e instanceof HTMLFormElement)return"form";const t=uu(e.tagName);return mu.test(t)?"div":t}(e);let k={};const E=e.attributes.length;for(let t=0;t<E;t++){const r=e.attributes[t];r.name&&!Au(w,r.name,r.value)&&(k[r.name]=Ru(n,w,uu(r.name),r.value,e,c))}if("link"===w&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=ou(t)),r&&(delete k.rel,delete k.href,k._cssText=ku(r,t.href))}if("style"===w&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=ou(e.sheet);t&&(k._cssText=ku(t,Cu()))}if("input"===w||"textarea"===w||"select"===w||"option"===w){const t=e,n=pu(t),r=hu(t,lu(w),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Nu(t,y,v,_,b,au({type:n,tagName:lu(w),maskInputOptions:a}));k.value=cu({isMasked:e,element:t,value:r,maskInputFn:u})}o&&(k.checked=o)}"option"===w&&(e.selected&&!a.select?k.selected=!0:delete k.selected);if("canvas"===w&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,s=du in o?o[du]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(l.type,l.quality)&&(k.rr_dataURL=t)}if("img"===w&&d){yu||(yu=n.createElement("canvas"),_u=yu.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{yu.width=t.naturalWidth,yu.height=t.naturalHeight,_u.drawImage(t,0,0),k.rr_dataURL=yu.toDataURL(l.type,l.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?k.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==w&&"video"!==w||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop));if(S){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==w||h(k.src)||(e.contentDocument||(k.rr_src=k.src),delete k.src);let x;try{customElements.get(w)&&(x=!0)}catch(e){}return{type:tu.Element,tagName:w,attributes:k,childNodes:[],isSVG:Iu(e)||void 0,needBlock:S,rootId:m,isCustom:x}}(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:w,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{e.nextSibling||e.previousSibling||eu([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=ou(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=ku(p,Cu())}f&&(p="SCRIPT_PLACEHOLDER");const g=Nu(e,r,s,o,i,n);h||f||m||!p||!g||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=cu({isMasked:Nu(e,r,s,o,i,au({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:u})}return{type:tu.Text,textContent:p||"",isStyle:h,rootId:l}}(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:tu.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:tu.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function Lu(e){return null==e?"":e.toLowerCase()}function Pu(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:I=()=>!1,newlyAddedElement:C=!1}=t;let{preserveWhiteSpace:R=!0}=t;const A=Du(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:I,newlyAddedElement:C});if(!A)return console.warn(e,"not serialized"),null;let O;O=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===tu.Comment)return!0;if(e.type===tu.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Lu(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Lu(e.attributes.name)||"icon"===Lu(e.attributes.rel)||"apple-touch-icon"===Lu(e.attributes.rel)||"shortcut icon"===Lu(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Lu(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Lu(e.attributes.property).match(/^(og|twitter|fb):/)||Lu(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Lu(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Lu(e.attributes.name)||"googlebot"===Lu(e.attributes.name)||"bingbot"===Lu(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Lu(e.attributes.name)||"generator"===Lu(e.attributes.name)||"framework"===Lu(e.attributes.name)||"publisher"===Lu(e.attributes.name)||"progid"===Lu(e.attributes.name)||Lu(e.attributes.property).match(/^article:/)||Lu(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Lu(e.attributes.name)||"yandex-verification"===Lu(e.attributes.name)||"csrf-token"===Lu(e.attributes.name)||"p:domain_verify"===Lu(e.attributes.name)||"verify-v1"===Lu(e.attributes.name)||"verification"===Lu(e.attributes.name)||"shopify-checkout-api-token"===Lu(e.attributes.name)))return!0}}return!1}(A,_)&&(R||A.type!==tu.Text||A.isStyle||A.textContent.replace(/^\s+|\s+$/gm,"").length)?gu():-2;const M=Object.assign(A,{id:O});if(r.add(e,M),-2===O)return null;w&&w(e);let N=!p;if(M.type===tu.Element){N=N&&!M.needBlock,delete M.needBlock;const t=e.shadowRoot;t&&ru(t)&&(M.isShadowHost=!0)}if((M.type===tu.Document||M.type===tu.Element)&&N){_.headWhitespace&&M.type===tu.Element&&"head"===M.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:I};for(const n of Array.from(e.childNodes)){const e=Pu(n,t);e&&M.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Pu(n,t);r&&(ru(e.shadowRoot)&&(r.isShadow=!0),M.childNodes.push(r))}}return e.parentNode&&nu(e.parentNode)&&ru(e.parentNode)&&(M.isShadow=!0),M.type===tu.Element&&"iframe"===M.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,s=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{s||(t(),s=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),s=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&k){const n=Pu(t,{doc:t,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:I});n&&k(e,n)}}),E),M.type===tu.Element&&"link"===M.tagName&&"stylesheet"===M.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const s=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(s),o=!0,t()}))}(e,(()=>{if(x){const t=Pu(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:I});t&&x(e,t)}}),T),M}function $u(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Fu(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const ju="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Bu={map:{},getId:()=>(console.error(ju),-1),getNode:()=>(console.error(ju),null),removeNodeFromMap(){console.error(ju)},has:()=>(console.error(ju),!1),reset(){console.error(ju)}};function Uu(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();o||!1!==n.leading||(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(!function(...e){al("clearTimeout")(...e)}(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=cl((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)}),a))}}function qu(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){cl((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>qu(e,t,s||{},!0)}function zu(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Bu=new Proxy(Bu,{get:(e,t,n)=>("map"===t&&console.error(ju),Reflect.get(e,t,n))}));let Hu=Date.now;function Wu(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:$u([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||$u([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||$u([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:$u([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||$u([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||$u([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function Gu(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Vu(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Yu(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function Ju(e,t,n,r,o){if(!e)return!1;const s=Yu(e);if(!s)return!1;const i=Mu(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=Ou(s,i);let c=-1;return!(a<0)&&(r&&(c=Ou(s,Mu(null,r))),a>-1&&c<0||a<c)}function Ku(e,t){return-2===t.getId(e)}function Xu(e,t){if(nu(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Xu(e.parentNode,t))}function Qu(e){return Boolean(e.changedTouches)}function Zu(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function el(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function tl(e){return Boolean($u([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Hu=()=>(new Date).getTime());class nl{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function rl(e){let t=null;return $u([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function ol(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=rl(n);)n=t;return n}(e);return t.contains(n)}function sl(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||ol(e))}const il={};function al(e){const t=il[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return il[e]=r.bind(window)}function cl(...e){return al("setTimeout")(...e)}var ul=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(ul||{}),ll=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ll||{}),dl=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(dl||{}),pl=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(pl||{});function hl(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function fl(e){return"__ln"in e}class ml{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=hl([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&fl(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&fl(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const gl=(e,t)=>`${e}@${t}`;class yl{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new ml,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!sl(o))return;const s=nu(o.parentNode)?this.mirror.getId(rl(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===s||-1===i)return n.addNode(o);const a=Pu(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Zu(e,this.mirror)&&this.iframeManager.addIframe(e),el(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),tl(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:s,nextId:i,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)vl(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Sl(this.droppedSet,e)||vl(this.removes,e,this.mirror)?Sl(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let s=null;for(;n.length;){let e=null;if(s){const t=this.mirror.getId(s.value.parentNode),n=r(s.value);-1!==t&&-1!==n&&(e=s)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}s=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!Ku(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Ju(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Nu(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Yu(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=pu(t),o=t.tagName;r=hu(t,o,n);const s=au({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=cu({isMasked:Nu(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,s),element:t,value:r,maskInputFn:this.maskInputFn})}if(Ju(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Au(t.tagName,n)&&(o.attributes[n]=Ru(this.doc,uu(t.tagName),uu(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||s!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===s?r:[r,s]:o._unchangedStyles[e]=[r,s]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Ju(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=nu(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Ju(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Ku(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(_l(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Xu(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[gl(n,r)]?_l(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!nu(e.target)||!ru(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Ku(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[gl(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Ju(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),tl(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function _l(e,t){e.delete(t),t.childNodes.forEach((t=>_l(e,t)))}function vl(e,t,n){return 0!==e.length&&bl(e,t,n)}function bl(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||bl(e,r,n)}function Sl(e,t){return 0!==e.size&&wl(e,t)}function wl(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||wl(e,n))}let kl;const El=e=>{if(!kl)return e;return(...t)=>{try{return e(...t)}catch(e){if(kl&&!0===kl(e))return()=>{};throw e}}};function xl(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const Tl=[];function Il(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Cl(e,t){const n=new yl;Tl.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=xl([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const s=new r(El((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Rl({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let u=null;return Object.keys(dl).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=uu(i);const l=(t=>i=>{const a=Il(i);if(Ju(a,r,o,s,!0))return;let c=null,l=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=pl.Mouse;break;case"touch":c=pl.Touch;break;case"pen":c=pl.Pen}c===pl.Touch?dl[t]===dl.MouseDown?l="TouchStart":dl[t]===dl.MouseUp&&(l="TouchEnd"):pl.Pen}else Qu(i)&&(c=pl.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===pl.Touch||l.startsWith("Mouse")&&c===pl.Mouse)&&(c=null)):dl[t]===dl.Click&&(c=u,u=null);const d=Qu(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;El(e)({type:dl[l],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(dl[i]){case dl.MouseDown:case dl.MouseUp:a=a.replace("mouse","pointer");break;case dl.TouchStart:case dl.TouchEnd:return}c.push(Fu(a,l,t))})),El((()=>{c.forEach((e=>e()))}))}function Al({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){return Fu("scroll",El(Uu(El((i=>{const a=Il(i);if(!a||Ju(a,r,o,s,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=Wu(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const Ol=["INPUT","TEXTAREA","SELECT"],Ml=new WeakMap;function Nl({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=Il(e);const l=e.isTrusted,g=n&&lu(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||Ol.indexOf(g)<0||Ju(n,r,o,s,!0))return;const _=n;if(_.classList.contains(i)||a&&_.matches(a))return;const v=pu(n);let b=hu(_,g,v),S=!1;const w=au({maskInputOptions:c,tagName:g,type:v}),k=Nu(n,p,f,h,m,w);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=cu({isMasked:k,element:n,value:b,maskInputFn:u}),y(n,d?{text:b,isChecked:S,userTriggered:l}:{text:b,isChecked:S});const E=n.name;"radio"===v&&E&&S&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=cu({isMasked:k,element:e,value:hu(e,g,v),maskInputFn:u});y(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function y(t,r){const o=Ml.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Ml.set(t,r);const o=n.getId(t);El(e)({...r,id:o})}}const _=("last"===l.input?["change"]:["input","change"]).map((e=>Fu(e,El(g),t))),v=t.defaultView;if(!v)return()=>{_.forEach((e=>e()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&_.push(...S.map((e=>qu(e[0],e[1],{set(){El(g)({target:this,isTrusted:!1})}},!1,v)))),El((()=>{_.forEach((e=>e()))}))}function Dl(e){return function(e,t){if(Fl("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Fl("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Fl("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Fl("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Ll(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Pl({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?xl([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):xl([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),s=xl([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(xl([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&s?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return xl([s,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=xl([s,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),El((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function $l(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Cl(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const c=Uu(El((t=>{const n=Date.now()-i;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],i=null})),s),u=El(Uu(El((e=>{const t=Il(e),{clientX:n,clientY:o}=Qu(e)?e.changedTouches[0]:e;i||(i=Hu()),a.push({x:n,y:o,id:r.getId(t),timeOffset:Hu()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?ll.Drag:e instanceof MouseEvent?ll.MouseMove:ll.TouchMove)})),o,{trailing:!1})),l=[Fu("mousemove",u,n),Fu("touchmove",u,n),Fu("drag",u,n)];return El((()=>{l.forEach((e=>e()))}))}(e),s=Rl(e),i=Al(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Fu("resize",El(Uu(El((()=>{const t=Gu(),o=Vu();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=Nl(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:i}){const a=El((i=>Uu(El((s=>{const a=Il(s);if(!a||Ju(a,t,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;e({type:i,id:o.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),s.media||500))),c=[Fu("play",a(0),i),Fu("pause",a(1),i),Fu("seeked",a(2),i),Fu("volumechange",a(3),i),Fu("ratechange",a(4),i)];return El((()=>{c.forEach((e=>e()))}))}(e),l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:El(((r,o,s)=>{const[i,a]=s,{id:c,styleId:u}=Ll(o,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:i,index:a}]}),r.apply(o,s)}))});const s=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:El(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Ll(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:i}]}),r.apply(o,s)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:El(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Ll(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:i}),r.apply(o,s)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:El(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Ll(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:i}),r.apply(o,s)}))}));const c={};jl("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(jl("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),jl("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),jl("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(u[r].insertRule,{apply:El(((r,o,s)=>{const[i,a]=s,{id:c,styleId:u}=Ll(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:i,index:[...Dl(o),a||0]}]}),r.apply(o,s)}))}),o.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:El(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Ll(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...Dl(o),i]}]}),r.apply(o,s)}))})})),El((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:n}),d=Pl(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:El(((o,i,a)=>{const[c,u,l]=a;if(n.has(c))return s.apply(i,[c,u,l]);const{id:d,styleId:p}=Ll(xl([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:u,priority:l},index:Dl(i.parentRule)}),o.apply(i,a)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:El(((o,s,a)=>{const[c]=a;if(n.has(c))return i.apply(s,[c]);const{id:u,styleId:l}=Ll(xl([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,remove:{property:c},index:Dl(s.parentRule)}),o.apply(s,a)}))}),El((()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),h=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const r=new s(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=zu(t.fonts,"add",(function(t){return function(n){return cl(El((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=s})),r.push(i),El((()=>{r.forEach((e=>e()))}))}(e):()=>{},f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:i}=e;let a=!0;const c=El((()=>{const e=t.getSelection();if(!e||a&&xl([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=i;Ju(a,r,o,s,!0)||Ju(l,r,o,s,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}i({ranges:c})}));return c(),Fu("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?zu(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return El((()=>{Tl.forEach((e=>e.reset())),r.disconnect(),o(),s(),i(),a(),c(),u(),l(),d(),p(),h(),f(),m(),g.forEach((e=>e()))}))}function Fl(e){return void 0!==window[e]}function jl(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Bl{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),s.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Ul(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}class ql{constructor(){this.crossOriginIframeMirror=new Bl(gu),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class zl{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Bl(gu),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Bl(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Ul([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case ul.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:ul.IncrementalSnapshot,data:{source:ll.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case ul.Meta:case ul.Load:case ul.DomContentLoaded:return!1;case ul.Plugin:return t;case ul.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case ul.IncrementalSnapshot:switch(t.data.source){case ll.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case ll.Drag:case ll.TouchMove:case ll.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case ll.ViewportResize:return!1;case ll.MediaInteraction:case ll.MouseInteraction:case ll.Scroll:case ll.CanvasMutation:case ll.Input:return this.replaceIds(t.data,e,["id"]),t;case ll.StyleSheetRule:case ll.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case ll.Font:return t;case ll.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case ll.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Ul([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===tu.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Hl{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Wl{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!ru(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Cl({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Al({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),cl((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Pl({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(zu(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&sl(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Gl{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Vl{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new nl,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:su(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Yl{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){al("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Jl,Kl;const Xl=new iu;function Ql(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:E={},mousemoveWait:x,recordCanvas:T=!1,recordCrossOriginIframes:I=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:A=!1,inlineImages:O=!1,plugins:M,keepIframeSrcFn:N=()=>!1,ignoreCSSAttributes:D=new Set([]),errorHandler:L,onMutation:P,getCanvasManager:$}=e;kl=L;const F=!I||window.parent===window;let j=!1;if(!F)try{window.parent.document&&(j=!1)}catch(e){j=!0}if(F&&!t)throw new Error("emit function is required");void 0!==x&&void 0===k.mousemove&&(k.mousemove=x),Xl.reset();const B=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},U=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let q;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let z=0;const H=e=>{for(const t of M||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!j&&(e=w(e)),e};Jl=(e,o)=>{const s=e;if(s.timestamp=Hu(),!cr([Tl,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||s.type===ul.FullSnapshot||s.type===ul.IncrementalSnapshot&&s.data.source===ll.Mutation||Tl.forEach((e=>e.unfreeze())),F)cr([t,"optionalCall",e=>e(H(s),o)]);else if(j){const e={type:"rrweb",event:H(s),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(s.type===ul.FullSnapshot)q=s,z=0;else if(s.type===ul.IncrementalSnapshot){if(s.data.source===ll.Mutation&&s.data.isAttachIframe)return;z++;const e=r&&z>=r,t=n&&q&&s.timestamp-q.timestamp>n;(e||t)&&Z(!0)}};const W=e=>{Jl({type:ul.IncrementalSnapshot,data:{source:ll.Mutation,...e}})},G=e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.Scroll,...e}}),V=e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.CanvasMutation,...e}}),Y=new Vl({mutationCb:W,adoptedStyleSheetCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.AdoptedStyleSheet,...e}})}),J="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new ql:new zl({mirror:Xl,mutationCb:W,stylesheetManager:Y,recordCrossOriginIframes:I,wrappedEmit:Jl});for(const e of M||[])e.getMirror&&e.getMirror({nodeMirror:Xl,crossOriginIframeMirror:J.crossOriginIframeMirror,crossOriginIframeStyleMirror:J.crossOriginIframeStyleMirror});const K=new Yl,X=function(e,t){try{return e?e(t):new Gl}catch(e){return console.warn("Unable to initialize CanvasManager"),new Gl}}($,{mirror:Xl,win:window,mutationCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.CanvasMutation,...e}}),recordCanvas:T,blockClass:o,blockSelector:s,unblockSelector:i,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:E,errorHandler:L}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Hl:new Wl({mutationCb:W,scrollCb:G,bypassOptions:{onMutation:P,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:B,dataURLOptions:E,maskAttributeFn:_,maskTextFn:b,maskInputFn:v,recordCanvas:T,inlineImages:O,sampling:k,slimDOMOptions:U,iframeManager:J,stylesheetManager:Y,canvasManager:X,keepIframeSrcFn:N,processedNodeManager:K},mirror:Xl}),Z=(e=!1)=>{Jl({type:ul.Meta,data:{href:window.location.href,width:Vu(),height:Gu()}},e),Y.reset(),Q.init(),Tl.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new iu,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:T=()=>!1}=t||{};return Pu(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:T,newlyAddedElement:!1})}(document,{mirror:Xl,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:B,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,slimDOM:U,dataURLOptions:E,recordCanvas:T,inlineImages:O,onSerialize:e=>{Zu(e,Xl)&&J.addIframe(e),el(e,Xl)&&Y.trackLinkElement(e),tl(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{J.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:N});if(!t)return console.warn("Failed to snapshot the document");Jl({type:ul.FullSnapshot,data:{node:t,initialOffset:Wu(window)}}),Tl.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,Xl.getId(document))};Kl=Z;try{const e=[],t=e=>El($l)({onMutation:P,mutationCb:W,mousemoveCb:(e,t)=>Jl({type:ul.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.ViewportResize,...e}}),inputCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.Input,...e}}),mediaInteractionCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.MediaInteraction,...e}}),styleSheetRuleCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.StyleSheetRule,...e}}),styleDeclarationCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.StyleDeclaration,...e}}),canvasMutationCb:V,fontCb:e=>Jl({type:ul.IncrementalSnapshot,data:{source:ll.Font,...e}}),selectionCb:e=>{Jl({type:ul.IncrementalSnapshot,data:{source:ll.Selection,...e}})},customElementCb:e=>{Jl({type:ul.IncrementalSnapshot,data:{source:ll.CustomElement,...e}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:B,inlineStylesheet:f,sampling:k,recordCanvas:T,inlineImages:O,userTriggeredOnInput:R,collectFonts:A,doc:e,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:N,blockSelector:s,unblockSelector:i,slimDOMOptions:U,dataURLOptions:E,mirror:Xl,iframeManager:J,stylesheetManager:Y,shadowDomManager:Q,processedNodeManager:K,canvasManager:X,ignoreCSSAttributes:D,plugins:cr([M,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Jl({type:ul.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});J.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Z(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Fu("DOMContentLoaded",(()=>{Jl({type:ul.DomContentLoaded,data:{}}),"DOMContentLoaded"===C&&n()}))),e.push(Fu("load",(()=>{Jl({type:ul.Load,data:{}}),"load"===C&&n()}),window))),()=>{e.forEach((e=>e())),K.destroy(),Kl=void 0,kl=void 0}}catch(e){console.warn(e)}}Ql.mirror=Xl,Ql.takeFullSnapshot=function(e){if(!Kl)throw new Error("please take full snapshot after start recording");Kl(e)};function Zl(e){return e>9999999999?e:1e3*e}function ed(e){return e>9999999999?e/1e3:e}function td(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:ul.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:pn(t,10,1e3)}}),"console"===t.category))))}function nd(e){return e.closest("button,a")||e}function rd(e){const t=od(e);return t&&t instanceof Element?nd(t):t}function od(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let sd;function id(e){return sd||(sd=[],rt(Vc,"open",(function(e){return function(...t){if(sd)try{sd.forEach((e=>e()))}catch(e){}return e.apply(Vc,t)}}))),sd.push(e),()=>{const t=sd?sd.indexOf(e):-1;t>-1&&sd.splice(t,1)}}class ad{constructor(e,t,n=td){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=id((()=>{this._lastMutation=ud()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!cd.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:ed(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=ed(e)}registerScroll(e=Date.now()){this._lastScroll=ed(e)}registerClick(e){const t=nd(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=ud();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:s,clickBreadcrumb:i}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:Vc.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:s||1}};this._addBreadcrumbEvent(t,o)}else if(s>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:Vc.location.href,route:t.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const cd=["A","BUTTON","INPUT"];function ud(){return Date.now()/1e3}function ld(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(n===ll.Mutation&&e.registerMutation(t.timestamp),n===ll.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===ll.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=Ql.mirror.getNode(r);o instanceof HTMLElement&&n===dl.Click&&e.registerClick(o)}}catch(e){}}function dd(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var pd;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(pd||(pd={}));const hd=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function fd(e){const t={};for(const n in e)if(hd.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const md=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?rd(e.event):od(e.event),n=Ue(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return dd({category:`ui.${e.name}`,...gd(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var s,i,a;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(s=e.clickDetector,i=n,a=rd(t.event),s.handleClick(i,a)),td(e,n)};function gd(e,t){const n=Ql.mirror.getId(e),r=n&&Ql.mirror.getNode(n),o=r&&Ql.mirror.getMeta(r),s=o&&function(e){return e.type===pd.Element}(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map((e=>e.type===pd.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:fd(s.attributes)}}:{}}}function yd(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!s)return null;const a=t||r||o,c=1===s.length;if(!a&&c)return null;const u=Ue(i,{maxStringLength:200})||"<unknown>",l=gd(i,u);return dd({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}(t);n&&td(e,n)}const _d={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:bd(s),end:bd(o),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=bd(o);return{type:n,name:r,start:s,end:s+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:bd(h),end:bd(s),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:s,redirectCount:p}}}};function vd(e){return _d[e.entryType]?_d[e.entryType](e):null}function bd(e){return(($n||Vc.performance.timeOrigin)+e)/1e3}function Sd(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(Ui(e,n))})),r.push(Bi((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,s=bd(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:s,end:s,data:{value:o,size:o,nodeId:r?Ql.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const wd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function kd(e,t){wd&&(Ke.info(e),t&&xd(e))}function Ed(e,t){wd&&(Ke.info(e),t&&setTimeout((()=>{xd(e)}),0))}function xd(e){Ar({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Td extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Id{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Qc)throw new Td;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Zl(e):null}}class Cd{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){kd("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const s=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",s),!i.success)return wd&&Ke.error("[Replay]",i.response),void o(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Rd{constructor(e){this._worker=new Cd(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Zl(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Qc?Promise.reject(new Td):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{wd&&Ke.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Ad{constructor(e){this._fallback=new Id,this._compression=new Rd(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void kd("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){wd&&Ke.warn("[Replay] Failed to add events when switching buffers.",e)}}}function Od({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;kd("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Ad(n)}catch(e){kd("[Replay] Failed to create compression worker")}}(t);if(e)return e}return kd("[Replay] Using simple buffer"),new Id}function Md(){try{return"sessionStorage"in Vc&&!!Vc.sessionStorage}catch(e){return!1}}function Nd(e){!function(){if(!Md())return;try{Vc.sessionStorage.removeItem(Yc)}catch(e){}}(),e.session=void 0}function Dd(e){return void 0!==e&&Math.random()<e}function Ld(e){const t=Date.now();return{id:e.id||Et(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Pd(e){if(Md())try{Vc.sessionStorage.setItem(Yc,JSON.stringify(e))}catch(e){}}function $d({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return Dd(e)?"session":!!t&&"buffer"}(e,t),s=Ld({sampled:o,previousSessionId:r});return n&&Pd(s),s}function Fd(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function jd(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Fd(e.started,t,r)||Fd(e.lastActivity,n,r)}function Bd(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!jd(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Ud({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const s=o.stickySession&&function(e){if(!Md())return null;try{const t=Vc.sessionStorage.getItem(Yc);if(!t)return null;const n=JSON.parse(t);return Ed("[Replay] Loading existing session",e),Ld(n)}catch(e){return null}}(e);return s?Bd(s,{sessionIdleExpire:t,maxReplayDuration:n})?(Ed("[Replay] Session in sessionStorage is expired, creating new one..."),$d(o,{previousSessionId:s.id})):s:(Ed("[Replay] Creating new session",e),$d(o,{previousSessionId:r}))}function qd(e,t,n){return!!Hd(e,t)&&(zd(e,t,n),!0)}async function zd(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===ul.Custom}(e))return t(e)}catch(e){return wd&&Ke.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Td?"addEventSizeExceeded":"addEvent";wd&&Ke.error(t),await e.stop({reason:n});const r=Nr();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function Hd(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Zl(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(kd(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function Wd(e){return!e.type}function Gd(e){return"transaction"===e.type}function Vd(e){return"feedback"===e.type}function Yd(e){const t=function(){const e=Nr();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!Wd(n)&&!Gd(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(Gd(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function Jd(e){return t=>{e.isEnabled()&&Wd(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){td(e,dd({category:"replay.hydrate-error"}))}}(e,t)}}function Kd(e,t=!1){const n=t?Yd(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Wd(t)&&!Gd(t)&&!Vd(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(Vd(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:ul.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return wd&&Ke.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==Jc&&!(!t.exception||t.type)&&Dd(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function Xd(e,t){return t.map((({type:t,start:n,end:r,name:o,data:s})=>{const i=e.throttledAddEvent({type:ul.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:s}}});return"string"==typeof i?Promise.resolve(null):i}))}function Qd(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Xd(e,[n]),!1))))}}function Zd(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!wd||!e.getOptions()._experiments.traceInternals)&&bs(t,Nr())}(e,t.name)||e.addUpdate((()=>(Xd(e,[t]),!0))))}function ep(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[on];if(!t||!n||!o)return null;const{method:s,url:i,status_code:a}=o;return void 0===i?null:{type:"resource.xhr",name:i,start:t/1e3,end:n/1e3,data:{method:s,statusCode:a}}}(t);Zd(e,n)}}function tp(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=up(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function np(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function rp(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[up(e)];if(!e)return[void 0]}catch(t){return wd&&Ke.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return wd&&Ke.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function op(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function sp(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:lt({method:s,statusCode:i,request:a,response:c})}}function ip(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function ap(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Kc,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Kc);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,s&&s.length>0&&(r._meta={warnings:s}),r}function cp(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function up(e){return new URLSearchParams(e).toString()}function lp(e,t){const n=function(e,t=Vc.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Vc.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return Oe(n,t)}async function dp(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=lp(i,n.networkDetailAllowUrls)&&!lp(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return fp(e[0],t);if(2===e.length)return fp(e[1],t);return{}}(n,t):{};if(!e)return ap(o,r,void 0);const s=pp(n),[i,a]=rp(s),c=ap(o,r,i);if(a)return op(c,a);return c}(n,t.input,u):ip(u),h=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,s){if(!e&&void 0!==s)return ip(s);const i=o?hp(o.headers,r):{};if(!o||!t&&void 0!==s)return ap(i,s,void 0);const[a,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){wd&&Ke.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return wd&&Ke.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),u=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:s}){try{const i=e&&e.length&&void 0===r?tp(e,n):r;return o?ap(s,i,t?e:void 0):ip(i)}catch(e){return wd&&Ke.warn("[Replay] Failed to serialize response body",e),ap(s,r,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:s,captureDetails:e,headers:i});if(c)return op(u,c);return u}(d,n,t.response,l);return{startTimestamp:o,endTimestamp:s,url:i,method:a,statusCode:c,request:p,response:h}}(e,t,n),o=sp("resource.fetch",r);Zd(n.replay,o)}catch(e){wd&&Ke.error("[Replay] Failed to capture fetch breadcrumb",e)}}function pp(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function hp(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function fp(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?hp(n,t):Array.isArray(n)?{}:cp(n,t):{}}async function mp(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:i,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!lp(c,n.networkDetailAllowUrls)||lp(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:l,request:ip(d),response:ip(p)}}const h=a[on],f=h?cp(h.request_headers,n.networkRequestHeaders):{},m=cp(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?rp(i):[void 0],[_,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return wd&&Ke.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return wd&&Ke.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return wd&&Ke.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=ap(f,d,g),S=ap(m,p,_);return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:l,request:y?op(b,y):b,response:v?op(S,v):S}}(e,t,n),o=sp("resource.xhr",r);Zd(n.replay,o)}catch(e){wd&&Ke.error("[Replay] Failed to capture xhr breadcrumb",e)}}function gp(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const s=tp(o,n.textEncoder),i=r.getResponseHeader("content-length")?np(r.getResponseHeader("content-length")):function(e,t,n){try{return tp("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==s&&(e.data.request_body_size=s),void 0!==i&&(e.data.response_body_size=i)}function yp(e){const t=Nr();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(gp(t,n,e),mp(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,s=tp(r?pp(r):void 0,n.textEncoder),i=o?np(o.headers.get("content-length")):void 0;void 0!==s&&(e.data.request_body_size=s),void 0!==i&&(e.data.response_body_size=i)}(t,n,e),dp(t,n,e))}catch(e){wd&&Ke.warn("Error when enriching network breadcrumb")}}(c,e,t))):(qt(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:s,url:i}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:i,data:{method:s,statusCode:o?o.status:void 0}}}(t);Zd(e,n)}}(e)),sn(ep(e)))}catch(e){}}let _p=null;const vp=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(_p===t||!t)return null;if(_p=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return dd(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>Xc?(n=!0,`${e.slice(0,Xc)}`):e;if("object"==typeof e)try{const t=pn(e,7);return JSON.stringify(t).length>Xc?(n=!0,`${JSON.stringify(t,null,2).slice(0,Xc)}`):t}catch(e){}return e}));return dd({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return dd(t)}(t);n&&td(e,n)};function bp(e){return!(!e||!e.on)}function Sp(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function wp(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(wd&&Ke.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&ld(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!qd(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;qd(e,function(e){const t=e.getOptions();return{type:ul.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(kd(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Pd(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function kp({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=Nr(),p=Dr(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&s.sampled))return;const m={type:"replay_event",replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const s=await kr(e.getOptions(),r,o,t,e,to());if(!s)return null;s.platform=s.platform||"javascript";const i=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:c}=i&&i.sdk||{};return s.sdk={...s.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},s}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void kd("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const y=function(e,t,n,r){return Yn(rr(e,nr(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,i,f,d.getOptions().tunnel);let _;try{_=await h.send(y)}catch(e){const t=new Error(Jc);try{t.cause=e}catch(e){}throw t}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new Ep(_.statusCode);const v=ir({},_);if(sr(v,"replay"))throw new xp(v);return _}class Ep extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class xp extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Tp(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await kp(e),!0}catch(n){if(n instanceof Ep||n instanceof xp)throw n;if(Or("Replays",{_retryCount:t.count}),wd&&r._experiments&&r._experiments.captureExceptions&&Ir(n),t.count>=3){const e=new Error(`${Jc} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await Tp(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Ip="__THROTTLED";function Cp(e,t,n){const r=new Map;let o=!1;return(...s)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":Ip}o=!1;const a=r.get(i)||0;return r.set(i,a+1),e(...s)}}class Rp{constructor({options:e,recordingOptions:t}){Rp.prototype.__init.call(this),Rp.prototype.__init2.call(this),Rp.prototype.__init3.call(this),Rp.prototype.__init4.call(this),Rp.prototype.__init5.call(this),Rp.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,s;const i=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==s&&clearTimeout(s),o=s=void 0}function u(){return o&&clearTimeout(o),o=setTimeout(a,t),i&&void 0===s&&(s=setTimeout(a,i)),r}return u.cancel=c,u.flush=function(){return void 0!==o||void 0!==s?a():r},u}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Cp(((e,t)=>function(e,t,n){return Hd(e,t)?zd(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new ad(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Ed(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Ed("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=Ud({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Ed("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Ud({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Ql({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:wp(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{kd("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Nd(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),kd("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),kd("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();kd("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Fd(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Vc.location.pathname}${Vc.location.hash}${Vc.location.search}`,t=`${Vc.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Ip){const e=dd({category:"replay.throttled"});this.addUpdate((()=>!qd(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||Dr().getTransaction(),t=(e&&Sr(e).data||{})[To];if(e&&t&&["route","custom"].includes(t))return Sr(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Od({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){wd&&Ke.error("[Replay]",e),wd&&this._options._experiments&&this._options._experiments.captureExceptions&&Ir(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Ud({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Bd(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Vc.document.addEventListener("visibilitychange",this._handleVisibilityChange),Vc.addEventListener("blur",this._handleWindowBlur),Vc.addEventListener("focus",this._handleWindowFocus),Vc.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=Dr(),n=Nr();t.addScopeListener(vp(e)),Lt(md(e)),tn(Qd(e)),yp(e);const r=Kd(e,!bp(n));n&&n.addEventProcessor?n.addEventProcessor(r):as(r),bp(n)&&(n.on("beforeSendEvent",Jd(e)),n.on("afterSendEvent",Yd(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=Sd(this)}_removeListeners(){try{Vc.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Vc.removeEventListener("blur",this._handleWindowBlur),Vc.removeEventListener("focus",this._handleWindowFocus),Vc.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Vc.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=dd({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=dd({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{yd(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;jd(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):kd("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:ul.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(vd).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Xd(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Xd(e,[Sp(Vc.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Tp({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=Nr();t&&t.recordDroppedEvent("send_error","replay")}}else wd&&Ke.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(wd&&Ke.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return kd(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const s=this.eventBuffer;if(s&&0===this.session.segmentId&&!s.hasCheckout&&kd("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){wd&&Ke.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Pd(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=dd({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Ap(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),Je((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const Op='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Mp=["content-length","content-type","accept"];let Np=!1;class Dp{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:s=!0,workerUrl:i,_experiments:a={},sessionSampleRate:c,errorSampleRate:u,maskAllText:l=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:b=[],networkResponseHeaders:S=[],mask:w=[],maskAttributes:k=["title","placeholder"],unmask:E=[],block:x=[],unblock:T=[],ignore:I=[],maskFn:C,beforeAddRecordingEvent:R,beforeErrorSampling:A,blockClass:O,blockSelector:M,maskInputOptions:N,maskTextClass:D,maskTextSelector:L,ignoreClass:P}={}){this.name=Dp.id;const $=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:s,blockSelector:i,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const l={maskTextSelector:Ap(e,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:Ap(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:Ap(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],s,i),unblockSelector:Ap(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Ap(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return s instanceof RegExp&&(l.blockClass=s),a instanceof RegExp&&(l.maskTextClass=a),l}({mask:w,unmask:E,block:x,unblock:T,ignore:I,blockClass:O,blockSelector:M,maskTextClass:D,maskTextSelector:L,ignoreClass:P});if(this._recordingOptions={maskAllInputs:d,maskAllText:l,maskInputOptions:{...N||{},password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:k,maskAllText:l,privacyOptions:$,key:e,value:t,el:n}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Zc),stickySession:o,sessionSampleRate:c,errorSampleRate:u,useCompression:s,workerUrl:i,blockAllMedia:p,maskAllInputs:d,maskAllText:l,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:Lp(b),networkResponseHeaders:Lp(S),beforeAddRecordingEvent:R,beforeErrorSampling:A,_experiments:a},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof u&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${u} })`),this._initialOptions.errorSampleRate=u),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Op}`:Op),this._isInitialized&&dn())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Np}set _isInitialized(e){Np=e}setupOnce(){dn()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=Nr(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...lt(e)};if(!n)return Je((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&Je((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new Rp({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=Nr().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function Lp(e){return[...Mp,...e.map((e=>e.toLowerCase()))]}var Pp;function $p(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:$p(e.parentNode,t,n,r+1):-1}function Fp(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}Dp.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Pp||(Pp={}));const jp="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Bp={map:{},getId:()=>(console.error(jp),-1),getNode:()=>(console.error(jp),null),removeNodeFromMap(){console.error(jp)},has:()=>(console.error(jp),!1),reset(){console.error(jp)}};function Up(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Vp((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>Up(e,t,s||{},!0)}function qp(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function zp(e,t,n,r,o){if(!e)return!1;const s=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!s)return!1;const i=Fp(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=$p(s,i);let c=-1;return!(a<0)&&(r&&(c=$p(s,Fp(null,r))),a>-1&&c<0||a<c)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Bp=new Proxy(Bp,{get:(e,t,n)=>("map"===t&&console.error(jp),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const Hp={};function Wp(e){const t=Hp[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Hp[e]=r.bind(window)}function Gp(...e){return Wp("requestAnimationFrame")(...e)}function Vp(...e){return Wp("setTimeout")(...e)}var Yp=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Yp||{});let Jp;function Kp(e){Jp=e}const Xp=e=>{if(!Jp)return e;return(...t)=>{try{return e(...t)}catch(e){if(Jp&&!0===Jp(e))return()=>{};throw e}}};for(var Qp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zp="undefined"==typeof Uint8Array?[]:new Uint8Array(256),eh=0;eh<64;eh++)Zp[Qp.charCodeAt(eh)]=eh;const th=new Map;const nh=(e,t,n)=>{if(!e||!sh(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=th.get(e);return n||(n=new Map,th.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function rh(e,t,n){if(e instanceof Array)return e.map((e=>rh(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=Qp[n[t]>>2],o+=Qp[(3&n[t])<<4|n[t+1]>>4],o+=Qp[(15&n[t+1])<<2|n[t+2]>>6],o+=Qp[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[rh(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[rh(e.data,t,n),e.width,e.height]}}if(sh(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:nh(e,t,n)}}return e}const oh=(e,t,n)=>e.map((e=>rh(e,t,n))),sh=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function ih(e,t,n,r,o){const s=[];try{const i=qp(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(s,...i){if(!zp(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(s);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[s,...i])}}));s.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach((e=>e()))}}function ah(e,t,n,r,o,s,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const i of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const u=qp(e,i,(function(e){return function(...c){const u=e.apply(this,c);if(nh(u,a,this),"tagName"in this.canvas&&!zp(this.canvas,r,o,s,!0)){const e=oh(c,a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return u}}));c.push(u)}catch(r){const o=Up(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(o)}return c}class ch{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:s,maxCanvasSize:i,recordCanvas:a,dataURLOptions:c,errorHandler:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,u&&Kp(u),e.enableManualSnapshot||Xp((()=>{a&&"all"===t&&this.initCanvasMutationObserver(n,r,o,s),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,s,i,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,o,s,i){const a=ih(t,n,r,o,!0),c=this.takeSnapshot(!1,e,t,n,r,o,s,i.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=ih(e,t,n,r,!1),s=function(e,t,n,r,o){const s=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=qp(t.CanvasRenderingContext2D.prototype,a,(function(s){return function(...i){return zp(this.canvas,n,r,o,!0)||Vp((()=>{const n=oh(i,t,this);e(this.canvas,{type:Yp["2D"],property:a,args:n})}),0),s.apply(this,i)}}));s.push(i)}catch(n){const r=Up(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:Yp["2D"],property:a,args:[t],setter:!0})}});s.push(r)}return()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,o){const s=[];return s.push(...ah(t.WebGLRenderingContext.prototype,Yp.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&s.push(...ah(t.WebGL2RenderingContext.prototype,Yp.WebGL2,e,n,r,o,0,t)),()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),s(),i()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,s,i,a,c){const u=new Map,l=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());l.onmessage=e=>{const t=e.data,{id:n}=t;if(u.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:s,height:i}=t;this.mutationCb({id:n,type:Yp["2D"],commands:[{property:"clearRect",args:[0,0,s,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,s,i]}]})};const d=1e3/t;let p,h=0;const f=t=>{h&&t-h<d||(h=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{zp(e,r,o,s,!0)||t.push(e)})),t})(c).forEach((t=>{const n=this.mirror.getId(t);if(!u.get(n)&&t.width&&t.height){if(u.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===cr([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{l.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:i},[e])})).catch((e=>{Xp((()=>{throw e}))()}))}}))),p=Gp(f)};return p=Gp(f),p}startPendingCanvasMutationFlusher(){Gp((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,Gp(e)};Gp(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),Gp((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const uh={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},lh="ReplayCanvas",dh=1280,ph=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,dh):dh,n?Math.min(n,dh):dh]};let o;const s=new Promise((e=>o=e));return{name:lh,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new ch({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...uh[e||"medium"]||uh.medium}},async snapshot(e){(await s).snapshot(e)}}},hh=Qo(lh,ph),fh=$e,mh="#ffffff",gh="inherit",yh="rgba(108, 95, 199, 1)",_h={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:mh,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:yh,submitBorder:yh,submitOutlineFocus:"#29232f",submitForeground:mh,submitForegroundHover:mh,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:gh,inputForeground:gh,inputBorder:"var(--border)",inputOutlineFocus:yh,formBorderRadius:"20px",formContentBorderRadius:"6px"},vh=_h,bh={..._h,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Sh="widget",wh="api";async function kh({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:s=!0}={}){const i=Nr(),a=i&&i.getTransport(),c=i&&i.getDsn();if(!i||!a||!c)return;const u={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return Mr((async e=>{e.clearBreadcrumbs(),[wh,Sh].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await kr(e.getOptions(),n,r,t,e,to());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:i,event:u});if(!t)return;i.emit&&i.emit("beforeSendFeedback",t,{includeReplay:Boolean(s)});const n=Ho(t,c,i.getOptions()._metadata,i.getOptions().tunnel);let o;try{o=await a.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function Eh({name:e,email:t,message:n,source:r=wh,url:o=ze()},s={}){if(!n)throw new Error("Unable to submit feedback with empty message");return kh({feedback:{name:e,email:t,message:n,url:o,source:r}},s)}const xh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Th(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Ih(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Ch({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=fh.document,s=o.createElement("div");s.id=e;const i=s.attachShadow({mode:"open"});return i.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Ih("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Ih(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),i.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:i,host:s}}catch(e){throw Ke.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Rh(e,t,n){if(!e)return;e.hideError();try{return await Eh({...t,source:Sh},n)}catch(t){xh&&Ke.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function Ah(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}function Oh(e,t,...n){const r=fh.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)Mh(r,e);return r}function Mh(e,t){const n=fh.document;if(null!=t)if(Array.isArray(t))for(const n of t)Mh(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function Nh({buttonLabel:e,onClick:t}){const n=Oh("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>fh.document.createElementNS("http://www.w3.org/2000/svg",e),t=Ah(e("svg"),{class:"feedback-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"}),n=Ah(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Ah(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=Ah(e("clipPath"),{id:"clip0_57_80"}),i=Ah(e("rect"),{width:"20",height:"20",fill:"white"});return s.appendChild(i),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(i),{get el(){return t}}}().el,e?Oh("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function Dh(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Lh({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:s,isRequiredLabel:i,cancelButtonLabel:a,submitButtonLabel:c,showName:u,showEmail:l,isNameRequired:d,isEmailRequired:p,defaultName:h,defaultEmail:f,onCancel:m,onSubmit:g}){const{el:y}=function({label:e}){return{el:Oh("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:c});const _=Oh("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const v=Oh("input",{id:"name",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:h}),b=Oh("input",{id:"email",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:f}),S=Oh("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:s}),w=Oh("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:e=>{m&&m(e)}},a),k=Oh("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(g){const t=new FormData(e.target),n={name:Dh(t,"name"),email:Dh(t,"email"),message:Dh(t,"message")};g(n)}}catch(e){}}},[_,u&&Oh("label",{htmlFor:"name",className:"form__label"},[Oh("span",{className:"form__label__text"},e,d&&Oh("span",{className:"form__label__text--required"},` ${i}`)),v]),!u&&v,l&&Oh("label",{htmlFor:"email",className:"form__label"},[Oh("span",{className:"form__label__text"},n,p&&Oh("span",{className:"form__label__text--required"},` ${i}`)),b]),!l&&b,Oh("label",{htmlFor:"message",className:"form__label"},[Oh("span",{className:"form__label__text"},o,Oh("span",{className:"form__label__text--required"},` ${i}`)),S]),Oh("div",{className:"btn-group"},[y,w])]);return{get el(){return k},showError:function(e){_.textContent=e,_.classList.remove("form__error-container--hidden"),_.setAttribute("aria-hidden","false")},hideError:function(){_.textContent="",_.classList.add("form__error-container--hidden"),_.setAttribute("aria-hidden","true")}}}function Ph({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:s,colorScheme:i,defaultName:a,defaultEmail:c,onClosed:u,onCancel:l,onSubmit:d,...p}){let h=null;function f(){h&&(h.open=!1)}const{el:m,showError:g,hideError:y}=Lh({showEmail:r,showName:n,isEmailRequired:s,isNameRequired:o,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:l,...p});return h=Oh("dialog",{className:"dialog",open:!0,onClick:function(){f(),u&&u()}},Oh("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},Oh("h2",{className:"dialog__header"},e,t&&Oh("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>fh.document.createElementNS("http://www.w3.org/2000/svg",e),n=Ah(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=Ah(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),s=t("style");return s.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(s.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(s),n.append(o),{get el(){return n}}}({colorScheme:i}).el)),m)),{get el(){return h},showError:g,hideError:y,open:function(){h&&(h.open=!0)},close:f,checkIsOpen:function(){return h&&!0===h.open||!1}}}function $h({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=Oh("div",{className:"success-message",onClick:n},function(){const e=e=>fh.document.createElementNS("http://www.w3.org/2000/svg",e),t=Ah(e("svg"),{class:"success-icon",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"}),n=Ah(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Ah(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Ah(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),i=Ah(e("clipPath"),{id:"clip0_57_156"}),a=Ah(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(a),{get el(){return t}}}().el,e);return{el:r,remove:n}}function Fh({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,s,i=!1;async function a(t){if(!s)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void s.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Rh(s,t)?(h(),function(){if(e)try{const t=$h({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),u()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){Ke.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=Nr(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{xh&&Ke.error(e)}))}function u(){o&&o.show()}function l(){o&&o.hide()}function d(){try{if(s)return s.open(),i=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=Dr(),o=r&&r.getUser();if(s=Ph({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{u(),i=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),u()},onSubmit:a}),!s.el)throw new Error("Unable to open Feedback dialog");e.appendChild(s.el),l(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){Ke.error(e)}}function p(){s&&(s.close(),i=!1,n.onFormClose&&n.onFormClose())}function h(){if(s){p();const e=s.el;e&&e.remove(),s=void 0}}function f(){i||d(),l()}return r?r.addEventListener("click",f):t&&(o=Nh({buttonLabel:n.buttonLabel,onClick:f}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return s},showActor:u,hideActor:l,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:h}}const jh=fh.document;class Bh{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:s=!0,showName:i=!0,useSentryUser:a={email:"email",name:"username"},themeDark:c,themeLight:u,colorScheme:l="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:f="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:g="Email",messagePlaceholder:y="What's the bug? What did you expect?",messageLabel:_="Description",namePlaceholder:v="Your Name",nameLabel:b="Name",isRequiredLabel:S="(required)",successMessageText:w="Thank you for your report!",onFormClose:k,onFormOpen:E,onSubmitError:x,onSubmitSuccess:T}={}){this.name=Bh.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:s,showName:i,useSentryUser:a,colorScheme:l,themeDark:{...bh,...c},themeLight:{...vh,...u},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:f,emailLabel:g,emailPlaceholder:m,messageLabel:_,messagePlaceholder:y,nameLabel:b,namePlaceholder:v,isRequiredLabel:S,successMessageText:w,onFormClose:k,onFormOpen:E,onSubmitError:x,onSubmitSuccess:T}}setupOnce(){if(dn())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){xh&&Ke.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Th(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?jh.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return xh&&Ke.error("[Feedback] Unable to attach to target element"),null;const o=Fh({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return xh&&Ke.error(e),null}}createWidget(e){try{return this._createWidget(Th(this.options,e||{}))}catch(e){return xh&&Ke.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){xh&&Ke.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=jh.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=Fh({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(jh)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:s}=e,{shadow:i,host:a}=Ch({id:t,colorScheme:r,themeLight:o,themeDark:s});this._shadow=i,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&jh.body.appendChild(this._host),r}}Bh.__initStatic();const Uh="CaptureConsole",qh=(e={})=>{const t=e.levels||Ve;return{name:Uh,setupOnce(){},setup(e){"console"in $e&&wt((({args:n,level:r})=>{Nr()===e&&t.includes(r)&&function(e,t){const n={level:Dn(t),extra:{arguments:e}};Mr((r=>{if(r.addEventProcessor((e=>(e.logger="console",Ct(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${Ae(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void Cr(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void Ir(o,n);Cr(Ae(e," "),n)}))}(n,r)}))}}};Qo(Uh,qh);const zh="Debug",Hh=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:zh,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,Je((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};Qo(zh,Hh);const Wh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Gh="Dedupe",Vh=()=>{let e;return{name:Gh,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Jh(e,t))return!1;if(!Yh(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Kh(t),r=Kh(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Jh(e,t))return!1;if(!Yh(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Wh&&Ke.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function Yh(e,t){let n=Xh(e),r=Xh(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Jh(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Kh(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Xh(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Qo(Gh,Vh);const Qh="ExtraErrorData",Zh=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:Qh,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!fe(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,s=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=fe(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=fe(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=fe(n)?n.toString():n}}return r}catch(e){Wh&&Ke.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(s){const t={...e.contexts},r=pn(s,n);return Se(r)&&(ot(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}};Qo(Qh,Zh);var ef="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function tf(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nf={exports:{}};
/*!
	    localForage -- Offline Storage, Improved
	    Version 1.10.0
	    https://localforage.github.io/localForage
	    (c) 2013-2017 Mozilla, Apache License 2.0
	*/!function(e){e.exports=function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){if(!a&&tf)return tf(i);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[i]={exports:{}};t[i][0].call(u.exports,(function(e){var n=t[i][1][e];return o(n||e)}),u,u.exports,e,t,n,r)}return n[i].exports}for(var s=tf,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var s=0,i=new o(l),a=e.document.createTextNode("");i.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}function d(e){1!==u.push(e)||r||n()}t.exports=d}).call(this,void 0!==ef?ef:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var s={},i=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return s.reject(e,t)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function o(t){n||(n=!0,s.resolve(e,t))}function i(){t(o,r)}var a=f(i);"error"===a.status&&r(a.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function m(e){return e instanceof this?e:s.resolve(new this(o),e)}function g(e){var t=new this(o);return s.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),a=0,c=-1,u=new this(o);++c<n;)l(e[c],c);return u;function l(e,o){function c(e){i[o]=e,++a!==n||r||(r=!0,s.resolve(u,i))}t.resolve(e).then(c,(function(e){r||(r=!0,s.reject(u,e))}))}}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,a=new this(o);++i<n;)c(e[i]);return a;function c(e){t.resolve(e).then((function(e){r||(r=!0,s.resolve(a,e))}),(function(e){r||(r=!0,s.reject(a,e))}))}}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){s.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(p,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=a,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=m,u.reject=g,u.all=y,u.race=_},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==ef?ef:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var i=s();function a(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var u=Promise;function l(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",m=void 0,g={},y=Object.prototype.toString,_="readonly",v="readwrite";function b(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function S(e){return new u((function(t){var n=e.transaction(f,v),r=c([""]);n.objectStore(f).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function w(e){return"boolean"==typeof m?u.resolve(m):S(e).then((function(e){return m=e}))}function k(e){var t=g[e.name],n={};n.promise=new u((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function E(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function x(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function T(e,t){return new u((function(n,r){if(g[e.name]=g[e.name]||P(),e.db){if(!t)return n(e.db);k(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=i.open.apply(i,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),E(e)}}))}function I(e){return T(e,!1)}function C(e){return T(e,!0)}function R(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function A(e){return new u((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function O(e){return c([b(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function N(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function D(e){k(e);for(var t=g[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,I(e).then((function(t){return e.db=t,R(e)?C(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw x(e,t),t}))}function L(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return u.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((function(){return D(e).then((function(){L(e,t,n,r-1)}))})).catch(n);n(o)}}function P(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function $(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=g[n.name];o||(o=P(),g[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=N);var s=[];function i(){return u.resolve()}for(var a=0;a<o.forages.length;a++){var c=o.forages[a];c!==t&&s.push(c._initReady().catch(i))}var l=o.forages.slice(0);return u.all(s).then((function(){return n.db=o.db,I(n)})).then((function(e){return n.db=e,R(n,t._defaultConfig.version)?C(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var s=l[r];s!==t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}}))}function F(e,t){var n=this;e=p(e);var r=new u((function(t,r){n.ready().then((function(){L(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),M(e)&&(e=O(e)),t(e)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function j(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){L(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).openCursor(),a=1;i.onsuccess=function(){var n=i.result;if(n){var r=n.value;M(r)&&(r=O(r));var o=e(r,n.key,a++);void 0!==o?t(o):n.continue()}else t()},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function B(e,t,n){var r=this;e=p(e);var o=new u((function(n,o){var s;r.ready().then((function(){return s=r._dbInfo,"[object Blob]"===y.call(t)?w(s.db).then((function(e){return e?t:A(t)})):t})).then((function(t){L(r._dbInfo,v,(function(s,i){if(s)return o(s);try{var a=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),n(t)},i.onabort=i.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return l(o,n),o}function U(e,t){var n=this;e=p(e);var r=new u((function(t,r){n.ready().then((function(){L(n._dbInfo,v,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){r(i.error)},s.onabort=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function q(e){var t=this,n=new u((function(e,n){t.ready().then((function(){L(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function z(e){var t=this,n=new u((function(e,n){t.ready().then((function(){L(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function H(e,t){var n=this,r=new u((function(t,r){e<0?t(null):n.ready().then((function(){L(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var i=s.objectStore(n._dbInfo.storeName),a=!1,c=i.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function W(e){var t=this,n=new u((function(e,n){t.ready().then((function(){L(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];s.onsuccess=function(){var t=s.result;t?(i.push(t.key),t.continue()):e(i)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function G(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var s=e.name===n.name&&o._dbInfo.db?u.resolve(o._dbInfo.db):I(e).then((function(t){var n=g[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;k(e);var r=g[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var a=o[s];a._dbInfo.db=null,a._dbInfo.version=n}var c=new u((function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return c.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,E(n._dbInfo)}})).catch((function(t){throw(x(e,t)||u.resolve()).catch((function(){})),t}))}})):s.then((function(t){k(e);var n=g[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var s=new u((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return s.then((function(e){n.db=e;for(var t=0;t<r.length;t++)E(r[t]._dbInfo)})).catch((function(t){throw(x(e,t)||u.resolve()).catch((function(){})),t}))}))}else r=u.reject("Invalid arguments");return l(r,t),r}var V={_driver:"asyncStorage",_initStorage:$,_support:a(),iterate:j,getItem:F,setItem:B,removeItem:U,clear:q,length:z,key:H,keys:W,dropInstance:G};function Y(){return"function"==typeof openDatabase}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",X=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",Z=Q.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",se="si16",ie="si32",ae="ur16",ce="ui32",ue="fl32",le="fl64",de=Z+ee.length,pe=Object.prototype.toString;function he(e){var t,n,r,o,s,i=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var u=new ArrayBuffer(i),l=new Uint8Array(u);for(t=0;t<a;t+=4)n=J.indexOf(e[t]),r=J.indexOf(e[t+1]),o=J.indexOf(e[t+2]),s=J.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&s;return u}function fe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=J[n[t]>>2],r+=J[(3&n[t])<<4|n[t+1]>>4],r+=J[(15&n[t+1])<<2|n[t+2]>>6],r+=J[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function me(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var r,o=Q;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=se:"[object Uint16Array]"===n?o+=ae:"[object Int32Array]"===n?o+=ie:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=ue:"[object Float64Array]"===n?o+=le:t(new Error("Failed to get type for BinaryArray"))),t(o+fe(r))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=K+e.type+"~"+fe(this.result);t(Q+te+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function ge(e){if(e.substring(0,Z)!==Q)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Z,de);if(r===te&&X.test(n)){var o=n.match(X);t=o[1],n=n.substring(o[0].length)}var s=he(n);switch(r){case ee:return s;case te:return c([s],{type:t});case ne:return new Int8Array(s);case re:return new Uint8Array(s);case oe:return new Uint8ClampedArray(s);case se:return new Int16Array(s);case ae:return new Uint16Array(s);case ie:return new Int32Array(s);case ce:return new Uint32Array(s);case ue:return new Float32Array(s);case le:return new Float64Array(s);default:throw new Error("Unkown type: "+r)}}var ye={serialize:me,deserialize:ge,stringToBuffer:he,bufferToString:fe};function _e(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ve(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new u((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){_e(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ye,o}function be(e,t,n,r,o,s){e.executeSql(n,r,o,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,i):_e(e,t,(function(){e.executeSql(n,r,o,s)}),s)}),s):s(e,i)}),s)}function Se(e,t){var n=this;e=p(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function we(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var s=r.rows,i=s.length,a=0;a<i;a++){var c=s.item(a),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,a+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function ke(e,t,n,r){var o=this;e=p(e);var s=new u((function(s,i){o.ready().then((function(){void 0===t&&(t=null);var a=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?i(u):c.db.transaction((function(n){be(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){i(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void s(ke.apply(o,[e,a,n,r-1]));i(t)}}))}))})).catch(i)}));return l(s,n),s}function Ee(e,t,n){return ke.apply(this,[e,t,n,1])}function xe(e,t){var n=this;e=p(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Te(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Ie(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Ce(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Re(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Ae(e){return new u((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],s=0;s<r.rows.length;s++)o.push(r.rows.item(s).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Oe(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return r=e.name?new u((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ae(r))})).then((function(e){return new u((function(t,n){e.db.transaction((function(r){function o(e){return new u((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var s=[],i=0,a=e.storeNames.length;i<a;i++)s.push(o(e.storeNames[i]));u.all(s).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):u.reject("Invalid arguments"),l(r,t),r}var Me={_driver:"webSQLStorage",_initStorage:ve,_support:Y(),iterate:we,getItem:Se,setItem:Ee,removeItem:xe,clear:Te,length:Ie,key:Ce,keys:Re,dropInstance:Oe};function Ne(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function De(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Le(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Pe(){return!Le()||localStorage.length>0}function $e(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=De(e,t._defaultConfig),Pe()?(t._dbInfo=n,n.serializer=ye,u.resolve()):u.reject()}function Fe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return l(n,e),n}function je(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return l(r,t),r}function Be(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,s=localStorage.length,i=1,a=0;a<s;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),i++)))return u}}}));return l(r,t),r}function Ue(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return l(r,t),r}function qe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var s=localStorage.key(o);0===s.indexOf(e.keyPrefix)&&r.push(s.substring(e.keyPrefix.length))}return r}));return l(n,e),n}function ze(e){var t=this.keys().then((function(e){return e.length}));return l(t,e),t}function He(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return l(r,t),r}function We(e,t,n){var r=this;e=p(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new u((function(o,s){var i=r._dbInfo;i.serializer.serialize(t,(function(t,r){if(r)s(r);else try{localStorage.setItem(i.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||s(e),s(e)}}))}))}));return l(o,n),o}function Ge(e,t){if(t=h.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new u((function(t){e.storeName?t(De(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):u.reject("Invalid arguments"),l(r,t),r}var Ve={_driver:"localStorageWrapper",_initStorage:$e,_support:Ne(),iterate:Be,getItem:je,setItem:We,removeItem:He,clear:Fe,length:ze,key:Ue,keys:qe,dropInstance:Ge},Ye=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Je=function(e,t){for(var n=e.length,r=0;r<n;){if(Ye(e[r],t))return!0;r++}return!1},Ke=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Xe={},Qe={},Ze={INDEXEDDB:V,WEBSQL:Me,LOCALSTORAGE:Ve},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function st(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ke(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var it=function(){function e(t){for(var n in o(this,e),Ze)if(Ze.hasOwnProperty(n)){var r=Ze[n],s=r._driver;this[n]=s,Xe[s]||this.defineDriver(r)}this._defaultConfig=st({},rt),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new u((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var s=nt.concat("_initStorage"),i=0,a=s.length;i<a;i++){var c=s[i];if((!Je(tt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=u.reject(t);return l(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var p=function(n){Xe[r]&&console.info("Redefining LocalForage driver: "+r),Xe[r]=e,Qe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Xe[e]?u.resolve(Xe[e]):u.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=u.resolve(ye);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ke(e)||(e=[e]);var o=this._getSupportedDrivers(e);function s(){r._config.driver=r.driver()}function i(e){return r._extend(e),s(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(i).catch(n)}s();var a=new Error("No available storage method found.");return r._driverSet=u.reject(a),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return u.resolve()})):u.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,s(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(o)}))})).catch((function(){s();var e=new Error("No available storage method found.");return r._driverSet=u.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){st(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new it;t.exports=at},{3:3}]},{},[4])(4)}(nf);const rf=$e;class of{static __initStatic(){this.id="Offline"}constructor(e={}){this.name=of.id,this.maxStoredEvents=e.maxStoredEvents||30,this.offlineEventStore=nf.exports.createInstance({name:"sentry/offlineEventStore"})}setupOnce(e,t){this.hub=t(),"addEventListener"in rf&&rf.addEventListener("online",(()=>{this._sendEvents().catch((()=>{Wh&&Ke.warn("could not send cached events")}))}));const n=e=>this.hub&&this.hub.getIntegration(of)&&"navigator"in rf&&"onLine"in rf.navigator&&!rf.navigator.onLine?(Wh&&Ke.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(e).then((e=>this._enforceMaxEvents())).catch((e=>{Wh&&Ke.warn("could not cache event while offline")})),null):e;n.id=this.name,e(n),"navigator"in rf&&"onLine"in rf.navigator&&rf.navigator.onLine&&this._sendEvents().catch((()=>{Wh&&Ke.warn("could not send cached events")}))}async _cacheEvent(e){return this.offlineEventStore.setItem(Et(),pn(e))}async _enforceMaxEvents(){const e=[];return this.offlineEventStore.iterate(((t,n,r)=>{e.push({cacheKey:n,event:t})})).then((()=>this._purgeEvents(e.sort(((e,t)=>(t.event.timestamp||0)-(e.event.timestamp||0))).slice(this.maxStoredEvents<e.length?this.maxStoredEvents:e.length).map((e=>e.cacheKey))))).catch((e=>{Wh&&Ke.warn("could not enforce max events")}))}async _purgeEvent(e){return this.offlineEventStore.removeItem(e)}async _purgeEvents(e){return Promise.all(e.map((e=>this._purgeEvent(e)))).then()}async _sendEvents(){return this.offlineEventStore.iterate(((e,t,n)=>{this.hub?(this.hub.captureEvent(e),this._purgeEvent(t).catch((e=>{Wh&&Ke.warn("could not purge event from cache")}))):Wh&&Ke.warn("no hub found - could not send cached event")}))}}of.__initStatic();const sf=$e,af="ReportingObserver",cf=new WeakMap,uf=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(cf.has(Nr()))for(const t of e)Mr((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Cr(`${n}: ${r}`)}))}return{name:af,setupOnce(){if(!("ReportingObserver"in Ft))return;new sf.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){cf.set(e,!0)}}};Qo(af,uf);const lf="RewriteFrames",df=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,s=t?function(e,t){e=gn(e).slice(1),t=gn(t).slice(1);const n=yn(e.split("/")),r=yn(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){s=e;break}let i=[];for(let e=s;e<n.length;e++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")}(t,o):_n(o);e.filename=`${n}${s}`}return e});return{name:lf,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};Qo(lf,df);const pf="SessionTiming",hf=()=>{const e=Date.now();return{name:pf,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};Qo(pf,hf);const ff="Transaction";function mf(e){return e.module||e.function?`${e.module||"?"}/${e.function||"?"}`:"<unknown>"}Qo(ff,(()=>({name:ff,setupOnce(){},processEvent(e){const t=function(e){const t=e.exception&&e.exception.values&&e.exception.values[0];return t&&t.stacktrace&&t.stacktrace.frames||[]}(e);for(let n=t.length-1;n>=0;n--){const r=t[n];if(!0===r.in_app){e.transaction=mf(r);break}}return e}})));const gf="HttpClient",yf=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:gf,setupOnce(){},setup(e){!function(e,t){if(!Ut())return;qt((n=>{if(Nr()!==e)return;const{response:r,args:o}=n,[s,i]=o;r&&function(e,t,n,r){if(bf(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,s,i,a;wf()&&([{headers:o,cookies:i},{headers:s,cookies:a}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=vf(t))}catch(t){Wh&&Ke.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));Rr(Sf({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:s,requestCookies:i,responseCookies:a}))}}(t,s,r,i)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in $e))return;sn((n=>{if(Nr()!==e)return;const r=n.xhr,o=r[on];if(!o)return;const{method:s,request_headers:i}=o;try{!function(e,t,n,r){if(bf(e,t.status,t.responseURL)){let e,o,s;if(wf()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=vf(e))}catch(e){Wh&&Ke.log("Could not extract cookies from response headers")}try{s=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){Wh&&Ke.log("Could not extract headers from response")}e=r}Rr(Sf({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:s,responseCookies:o}))}}(t,r,s,i)}catch(e){Wh&&Ke.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function _f(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function vf(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function bf(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!bs(n,Nr());var r,o}function Sf(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:_f(e.responseHeaders)}}};return Ct(n,{type:"http.client",handled:!1}),n}function wf(){const e=Nr();return!!e&&Boolean(e.getOptions().sendDefaultPii)}Qo(gf,yf);const kf=$e,Ef="ContextLines",xf=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:Ef,setupOnce(){},processEvent:e=>function(e,t){const n=kf.document,r=kf.location&&xn(kf.location.href);if(!n||!r)return e;const o=e.exception&&e.exception.values;if(!o||!o.length)return e;const s=n.documentElement.innerHTML;if(!s)return e;const i=["<!DOCTYPE html>","<html>",...s.split("\n"),"</html>"];return o.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>Re(e,0))),t.context_line=Re(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>Re(e,0)))}(t,e,r),e}(e,i,r,t))))})),e}(e,t)}};function Tf(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function If(e){return Tf(e.getAllKeys())}function Cf(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Tf(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await Qn(t,e.textEncoder);await function(e,t,n){return e((e=>If(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),Tf(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>If(e).then((t=>{if(0!==t.length)return Tf(e.get(t[0])).then((n=>(e.delete(t[0]),Tf(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function s(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const i=s(),a=[];for(;r.length;){const e=s(),t="number"==typeof e.length?e.length:void 0;a.push([e,t?o(t):s()])}return[i,a]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}Qo(Ef,xf);const Rf=1e6,Af=String(0),Of="main";let Mf="",Nf="",Df="",Lf=Ra.navigator&&Ra.navigator.userAgent||"",Pf="";const $f=Ra.navigator&&Ra.navigator.language||Ra.navigator&&Ra.navigator.languages&&Ra.navigator.languages[0]||"";const Ff=Ra.navigator&&Ra.navigator.userAgentData;var jf;function Bf(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Af]:{name:Of}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,s="number"==typeof performance.timeOrigin?performance.timeOrigin:$n||0,i=s-($n||s);for(let s=0;s<e.samples.length;s++){const a=e.samples[s];if(void 0===a.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[s]={elapsed_since_start_ns:((a.timestamp+i-o)*Rf).toFixed(0),stack_id:t,thread_id:Af};continue}let c=e.stacks[a.stackId];const u=[];for(;c;){u.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const l={elapsed_since_start_ns:((a.timestamp+i-o)*Rf).toFixed(0),stack_id:n,thread_id:Af};r.stacks[n]=u,r.samples[s]=l,n++}return r}(e):e}function Uf(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Na&&Ke.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),s=Bf(n),i=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),a="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||lr,runtime:{name:"javascript",version:Ra.navigator.userAgent},os:{name:Mf,version:Nf,build_number:Lf},device:{locale:$f,model:Pf,manufacturer:Lf,architecture:Df,is_emulator:!1},debug_meta:{images:Hf(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||Et(),trace_id:o,active_thread_id:Af,relative_start_ns:"0",relative_end_ns:(1e6*(a-i)).toFixed(0)}]}}function qf(e){return"pageload"===e.op}"object"==typeof(jf=Ff)&&null!==jf&&"getHighEntropyValues"in jf&&Ff.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(Mf=e.platform||"",Df=e.architecture||"",Pf=e.model||"",Nf=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];Lf=`${t.brand} ${t.version}`}})).catch((e=>{}));const zf=new WeakMap;function Hf(e){const t=$e._sentryDebugIds;if(!t)return[];const n=Nr(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let s;const i=zf.get(o);i?s=i:(s=new Map,zf.set(o,s));const a=Object.keys(t).reduce(((e,n)=>{let r;const i=s.get(n);i?r=i:(r=o(n),s.set(n,r));for(let o=r.length-1;o>=0;o--){const s=r[o],i=s&&s.filename;if(s&&i){e[i]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&a[t]&&c.push({type:"sourcemap",code_file:t,debug_id:a[t]});return c}let Wf=!1;function Gf(e){if(Wf)return Na&&Ke.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Na&&Ke.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Nr(),n=t&&t.getOptions();if(!n)return Na&&Ke.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Na&&Ke.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Na&&Ke.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Na&&Ke.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Na&&Ke.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Na&&Ke.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function Vf(e,t,n,r){return function(e){return e.samples.length<2?(Na&&Ke.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Na&&Ke.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?Uf(e,t,n,r):null}const Yf=new Map;function Jf(e){const t=Yf.get(e);return t&&Yf.delete(e),t}function Kf(e){let t;qf(e)&&(t=1e3*Pn());const n=function(){const e=Ra.Profiler;if("function"!=typeof e)return void(Na&&Ke.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Na&&(Ke.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),Ke.log("[Profiling] Disabling profiling for current user session.")),Wf=!0}}();if(!n)return e;Na&&Ke.log(`[Profiling] started profiling transaction: ${Sr(e).description}`);const r=Et();async function o(){return e&&n?n.stop().then((t=>(s&&(Ra.clearTimeout(s),s=void 0),Na&&Ke.log(`[Profiling] stopped profiling of transaction: ${Sr(e).description}`),t?(function(e,t){if(Yf.set(e,t),Yf.size>30){const e=Yf.keys().next().value;Yf.delete(e)}}(r,t),null):(Na&&Ke.log(`[Profiling] profiler returned null profile for: ${Sr(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(Na&&Ke.log("[Profiling] error while stopping profiler:",e),null))):null}let s=Ra.setTimeout((()=>{Na&&Ke.log("[Profiling] max profile duration elapsed, stopping profiling for:",Sr(e).description),o()}),3e4);const i=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),i()}),(()=>{i()})),e):i()},e}const Xf="BrowserProfiling",Qf=()=>({name:Xf,setupOnce(){},setup(e){const t=Dr().getTransaction();t&&qf(t)&&Gf(t)&&Kf(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{Gf(e)&&Kf(e)})),e.on("beforeEnvelope",(e=>{if(!Yf.size)return;const t=function(e){const t=[];return Kn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Na&&Ke.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){Na&&Ke.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const s=Jf(r);if(!s){Na&&Ke.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const i=Vf(r,o,s,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):Ke.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Zf=Qo(Xf,Qf);let em={};Ra.Sentry&&Ra.Sentry.Integrations&&(em=Ra.Sentry.Integrations);const tm={...em,...Js,...Gc};var nm=Object.freeze({__proto__:null,Integrations:tm,FunctionToString:Bs,Hub:Xr,InboundFilters:Ds,ModuleMetadata:Is,SDK_VERSION:Yr,SEMANTIC_ATTRIBUTE_SENTRY_OP:Co,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Ro,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Io,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:To,Scope:Gr,addBreadcrumb:Ar,addEventProcessor:as,addGlobalEventProcessor:pr,addIntegration:function(e){const t=Nr();t&&t.addIntegration?t.addIntegration(e):ur&&Ke.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:qo,captureEvent:Rr,captureException:Ir,captureMessage:Cr,captureSession:Fr,close:async function(e){const t=Nr();return t?t.close(e):(ur&&Ke.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){eo().configureScope(e)},continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=Dr(),{traceparentData:o,dynamicSamplingContext:s,propagationContext:i}=function(e,t){const n=Wn(e),r=Un(t),{traceId:o,parentSpanId:s,parentSampled:i}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||Et(),parentSpanId:s||Et().substring(16),spanId:Et().substring(16),sampled:i,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||Et(),spanId:Et().substring(16)}}}(e,t);r.setPropagationContext(i),ur&&o&&Ke.log(`[Tracing] Continuing trace ${o.traceId}.`);const a={...o,metadata:lt({dynamicSamplingContext:s})};return n?no((()=>n(a))):a},createTransport:fs,endSession:Pr,extractTraceparentData:io,flush:async function(e){const t=Nr();return t?t.flush(e):(ur&&Ke.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},functionToStringIntegration:js,getActiveSpan:_o,getActiveTransaction:so,getClient:Nr,getCurrentHub:eo,getCurrentScope:Dr,getHubFromCarrier:ro,getSpanStatusFromHttpCode:lo,inboundFiltersIntegration:Ns,isInitialized:function(){return!!Nr()},lastEventId:function(){return eo().lastEventId()},makeMain:Zr,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),o=new Map;function s(t,r){const s=r?`${t}:${r}`:t;let i=o.get(s);if(!i){const a=Ze(t);if(!a)return;const c=Vo(a,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=_s(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(s,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return _s(e,n)}}).map((e=>"string"==typeof e?s(e,void 0):s(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return Yn(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of o)t.push(await n.flush(e));return t.every((e=>e))}}}},metrics:Ys,moduleMetadataIntegration:Ts,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},setContext:Or,setCurrentClient:hs,setExtra:function(e,t){eo().setExtra(e,t)},setExtras:function(e){eo().setExtras(e)},setHttpStatus:ho,setMeasurement:zo,setTag:function(e,t){eo().setTag(e,t)},setTags:function(e){eo().setTags(e)},setUser:function(e){eo().setUser(e)},spanStatusfromHttpCode:po,startInactiveSpan:yo,startSession:Lr,startSpan:go,startSpanManual:function(e,t){const n=bo(e);return no((()=>Mr(e.scope,(r=>{const o=eo(),s=r.getSpan(),i=e.onlyIfParent&&!s?void 0:vo(o,{parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function a(){i&&i.end()}return fo((()=>t(i,a)),(()=>{if(i&&i.isRecording()){const{status:e}=Sr(i);e&&"ok"!==e||i.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return eo().startTransaction({...e},t)},trace:function(e,t,n=()=>{},r=()=>{}){const o=eo(),s=Dr(),i=s.getSpan(),a=bo(e),c=vo(o,{parentSpan:i,spanContext:a,forceTransaction:!1,scope:s});return s.setSpan(c),fo((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),s.setSpan(i),r()}))},withActiveSpan:function(e,t){return Mr((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return no((()=>e(to())))},withScope:Mr,WINDOW:Ra,BrowserClient:Wa,makeFetchTransport:Va,makeXHRTransport:Ya,chromeStackLineParser:Za,defaultStackLineParsers:uc,defaultStackParser:lc,geckoStackLineParser:nc,opera10StackLineParser:ic,opera11StackLineParser:cc,winjsStackLineParser:oc,eventFromException:ja,eventFromMessage:Ba,exceptionFromError:Da,createUserFeedbackEnvelope:Ha,captureUserFeedback:function(e){const t=Nr();t&&t.captureUserFeedback(e)},defaultIntegrations:zc,forceLoad:function(){},getDefaultIntegrations:Hc,init:Wc,onLoad:function(e){e()},showReportDialog:(e={},t=eo())=>{if(!Ra.document)return void(Na&&Ke.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(Na&&Ke.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const s=Ra.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=function(e,t){const n=tt(e);if(!n)return"";const r=`${Wo(n)}embed/error-page/`;let o=`dsn=${Qe(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:i}=e;if(i){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{i()}finally{Ra.removeEventListener("message",e)}};Ra.addEventListener("message",e)}const a=Ra.document.head||Ra.document.body;a?a.appendChild(s):Na&&Ke.error("Not injecting report dialog. No injection point found in HTML")},wrap:function(e){return Ma(e)()},Breadcrumbs:mc,breadcrumbsIntegration:fc,Dedupe:_c,GlobalHandlers:xc,globalHandlersIntegration:Ec,HttpContext:Oc,httpContextIntegration:Ac,LinkedErrors:Dc,linkedErrorsIntegration:Nc,TryCatch:Fc,browserApiErrorsIntegration:$c,Replay:Dp,getReplay:function(){const e=Nr();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},replayIntegration:e=>new Dp(e),ReplayCanvas:hh,replayCanvasIntegration:ph,Feedback:Bh,feedbackIntegration:e=>new Bh(e),sendFeedback:Eh,captureConsoleIntegration:qh,contextLinesIntegration:xf,debugIntegration:Hh,dedupeIntegration:Vh,extraErrorDataIntegration:Zh,httpClientIntegration:yf,reportingObserverIntegration:uf,rewriteFramesIntegration:df,sessionTimingIntegration:hf,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,qo(),Ks&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...ba,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=sa(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&ca(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&ia(),this.options._experiments.enableInteractions&&aa(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:s,startTransactionOnPageLoad:i,markBackgroundTransactions:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,f=h||this.options.tracePropagationTargets;Ks&&this._hasSetTracePropagationTargets&&h&&Ke.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),i,s),a&&di(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),ga({traceFetch:c,traceXHR:u,tracePropagationTargets:f,shouldCreateSpanForRequest:l,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(Ks&&Ke.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:s}=this.options,i="pageload"===e.op;let a;if(i){const t=i?Sa("sentry-trace"):"",n=i?Sa("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:s,sampled:c}=Gn(t,n);a={traceId:r,parentSpanId:s,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else a={trimEnd:!0,...e};const c="function"==typeof n?n(a):a,u=void 0===c?{...a,sampled:!1}:c;u.metadata=u.name!==a.name?{...u.metadata,source:"custom"}:u.metadata,this._latestRoute.name=u.name,this._latestRoute.context=u,!1===u.sampled&&Ks&&Ke.log(`[Tracing] Will not send ${u.op} transaction because of beforeNavigate.`),Ks&&Ke.log(`[Tracing] Starting ${u.op} transaction on scope`);const{location:l}=li,d=Uo(t,u,r,o,!0,{location:l},s,i);return i&&li.document&&(li.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(li.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(li.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),la(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",s=so();if(s&&s.op&&["navigation","pageload"].includes(s.op))return void(Ks&&Ke.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(Ks&&Ke.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(Ks&&Ke.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const i=this._getCurrentHub(),{location:a}=li,c={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[To]:this._latestRoute.context?wa(this._latestRoute.context):"url"}};e=Uo(i,c,t,n,!0,{location:a},r)};["click"].forEach((e=>{li.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Nr(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=so(),s=Dr(),i=void 0!==s?s.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],s=e.duration,a=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),u=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===s&&e.startTime===a)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,s);else if(c.length<10||void 0===u||s>this._interactionIdToRouteNameMapping[u].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(u&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[u],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:s,parentContext:n,user:i,activeTransaction:o,replayId:r,startTime:a})}}}))};Ui("event",e),Ui("first-input",e)}},browserTracingIntegration:(e={})=>{const t=!!Ks&&!(!e.tracePropagationTargets&&!e.tracingOrigins);qo(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...ka,...e},r=sa(),o={};n.enableInp&&ca(o,n.interactionsSampleRate),n.enableLongTask&&ia(),n._experiments.enableInteractions&&aa();const s={name:void 0,context:void 0};function i(e){const t=eo(),{beforeStartSpan:o,idleTimeout:i,finalTimeout:a,heartbeatInterval:c}=n,u="pageload"===e.op;let l;if(u){const t=u?Ta("sentry-trace"):"",n=u?Ta("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:s,sampled:i}=Gn(t,n);l={traceId:r,parentSpanId:s,parentSampled:i,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else l={trimEnd:!0,...e};const d=o?o(l):l;d.metadata=d.name!==l.name?{...d.metadata,source:"custom"}:d.metadata,s.name=d.name,s.context=d,!1===d.sampled&&Ks&&Ke.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),Ks&&Ke.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=li,h=Uo(t,d,i,a,!0,{location:p},c,u);return u&&li.document&&(li.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(li.document.readyState)&&h.sendAutoFinishSignal()})),["interactive","complete"].includes(li.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback((e=>{r(),la(e)})),h}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=n,h=r&&r.tracePropagationTargets,f=h||n.tracePropagationTargets;let m;Ks&&t&&h&&Ke.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let g=li.location&&li.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{m&&(Ks&&Ke.log(`[Tracing] Finishing current transaction with op: ${Sr(m).op}`),m.end()),m=i({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{m&&(Ks&&Ke.log(`[Tracing] Finishing current transaction with op: ${Sr(m).op}`),m.end()),m=i({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&li.location){const t={name:li.location.pathname,startTimestamp:$n?$n/1e3:void 0,origin:"auto.pageload.browser",attributes:{[To]:"url"}};Ea(e,t)}n.instrumentNavigation&&e.emit&&li.location&&tn((({to:t,from:n})=>{if(void 0===n&&g&&-1!==g.indexOf(t))g=void 0;else if(n!==t){g=void 0;const t={name:li.location.pathname,origin:"auto.navigation.browser",attributes:{[To]:"url"}};xa(e,t)}})),a&&di(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:s}=e,i="ui.action.click",a=so();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(Ks&&Ke.warn(`[Tracing] Did not create ${i} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(Ks&&Ke.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`));const{location:c}=li,u={name:t.name,op:i,trimEnd:!0,data:{[To]:t.context?Ca(t.context):"url"}};n=Uo(eo(),u,r,o,!0,{location:c},s)};["click"].forEach((e=>{li.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,s),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=Nr(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,s=void 0!==o?o.getReplayId():void 0,i=so(),a=Dr(),c=void 0!==a?a.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],a=n.duration,u=n.startTime,l=Object.keys(e),d=l.length>0?l.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(l.map((t=>e[t])).some((e=>e.duration===a&&e.startTime===u)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,a);else if(l.length<Ia||void 0===d||a>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=Ia&&delete e[d],e[r]={routeName:n,duration:a,parentContext:o,user:c,activeTransaction:i,replayId:s,startTime:u})}}}))};Ui("event",n),Ui("first-input",n)}(o,s),ga({traceFetch:c,traceXHR:u,tracePropagationTargets:f,shouldCreateSpanForRequest:l,enableHTTPTimings:d})},options:n}},defaultRequestInstrumentationOptions:ma,instrumentOutgoingRequests:ga,startBrowserTracingNavigationSpan:xa,startBrowserTracingPageLoadSpan:Ea,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:Cf})}(ys(e))},onProfilingStartRouteTransaction:function(e){return e?Gf(e)?Kf(e):e:(Na&&Ke.log("[Profiling] Transaction is undefined, skipping profiling"),e)},BrowserProfilingIntegration:Zf,browserProfilingIntegration:Qf});const rm=(e,t)=>((e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!Object.keys(V).includes(t))throw new Error("Unidentified service name supplied to getServiceType");if(!e.isLoggedIn)return Y;switch(t){case V.TRANSLATOR:return e.translatorServiceType;case V.WRITE:return e.writeServiceType;case V.API:return e.apiServiceType;case V.DOC_TRANSLATOR:return e.docTranslatorServiceType}})(e,t)===J,om=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((t=>t.test(e))),sm={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.28.0",environment:te(),tracesSampleRate:re()?.1:1,sampleRate:re()?.1:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return om(t)?null:e}};const im=e=>{chrome.storage.sync.get(["installationId","session","isLoggedIn","translatorServiceType","writeServiceType"],(function(t){e.setTag("internal_session_id",t.session.id),e.setTag("is_translator_pro",rm(t,V.TRANSLATOR)),e.setTag("is_write_pro",rm(t,V.WRITE)),e.setTag("is_logged_in",t.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(t){e.setTag("browser_instance_id",t.browserInstanceId)})),chrome.storage.onChanged.addListener((t=>(t?.session?.newValue&&e.setTag("internal_session_id",t.session.newValue.id),t?.installationId&&e.setUser({id:t.installationId}),t?.browser_instance_id&&e.setTag("browser_instance_id",oe.browserInstanceId.newValue),!0!==t.isLoggedIn?.newValue&&!1!==t.isLoggedIn?.newValue||e.setTag("is_logged_in",t.isLoggedIn.newValue),t.translatorServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_translator_pro",rm({...oe,translatorServiceType:t.translatorServiceType.newValue},V.TRANSLATOR))),t.writeServiceType&&chrome.storage.sync.get(["isLoggedIn"],e.setTag("is_write_pro",rm({...oe,writeServiceType:t.writeServiceType.newValue},V.WRITE))),!0)))};(ne()||(window.addEventListener("error",(function(e){const t=e.message||e.error&&e.error.message||"";om(t)&&e.preventDefault()})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";om(t)&&e.preventDefault()}))),Wc({...sm}),im(nm),nm).setContext("appContext",{location:"firefoxFirstRun"}),new class extends F{constructor(e){super(),$(this,e,pe,de,s,{})}}({target:document.body})}();
