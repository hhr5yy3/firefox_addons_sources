const browserName=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?"firefox":"chrome";function restoreOptions(){getOptions((function(e){document.getElementById("navigationData").checked=e.navigationData,document.getElementById("privacy").checked=e.privacy,document.getElementById("amazonExtra").checked=e.amazonExtra,document.getElementById("bookingExtra").checked=e.bookingExtra}))}function activatePrivacySettings(){"chrome"==browserName&&chrome.privacy.websites.thirdPartyCookiesAllowed.set({value:!0}),"firefox"==browserName&&(chrome.privacy.websites.cookieConfig.set({value:{behavior:"allow_all"}}),chrome.privacy.websites.trackingProtectionMode.set({value:"never"}),chrome.privacy.websites.resistFingerprinting.set({value:!1}))}function clearPrivacySettings(){"chrome"==browserName&&chrome.privacy.websites.thirdPartyCookiesAllowed.clear({}),"firefox"==browserName&&(chrome.privacy.websites.cookieConfig.clear({}),chrome.privacy.websites.trackingProtectionMode.clear({}),chrome.privacy.websites.resistFingerprinting.clear({}))}function getOptions(e){chrome.storage.local.get({navigationData:!0,privacy:!1,amazonExtra:!0,bookingExtra:!0},(function(t){chrome.permissions.contains({permissions:["privacy"]},(function(o){t.privacy=o,e(t)}))}))}document.addEventListener("DOMContentLoaded",restoreOptions),document.getElementById("navigationData").addEventListener("click",(function(){chrome.storage.local.set({navigationData:this.checked})})),document.getElementById("amazonExtra").addEventListener("click",(function(){chrome.storage.local.set({amazonExtra:this.checked})})),document.getElementById("bookingExtra").addEventListener("click",(function(){chrome.storage.local.set({bookingExtra:this.checked})})),document.getElementById("privacy").addEventListener("click",(function(){var e=this;this.checked?chrome.permissions.request({permissions:["privacy"]},(function(t){t?activatePrivacySettings(navigator.userAgent.toLowerCase().indexOf("firefox")>-1?"firefox":"chrome"):e.checked=!1})):(clearPrivacySettings(navigator.userAgent.toLowerCase().indexOf("firefox")>-1?"firefox":"chrome"),chrome.permissions.remove({permissions:["privacy"]},(function(t){t||(e.checked=!0)})))}));