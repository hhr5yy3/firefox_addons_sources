"use strict";(self.webpackChunkvk_music_saver=self.webpackChunkvk_music_saver||[]).push([[941],{1941:(t,e,n)=>{n.d(e,{downloadZip:()=>x}),"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(t,e,n){const i=Number(0xffffffffn&e),r=Number(e>>32n);this.setUint32(t+(n?0:4),i,n),this.setUint32(t+(n?4:0),r,n)}});var i=t=>new DataView(new ArrayBuffer(t)),r=t=>new Uint8Array(t.buffer||t),o=t=>(new TextEncoder).encode(String(t)),s=t=>Math.min(4294967295,Number(t)),f=t=>Math.min(65535,Number(t));function a(t,e){if(void 0===e||e instanceof Date||(e=new Date(e)),t instanceof File)return{isFile:1,t:e||new Date(t.lastModified),i:t.stream()};if(t instanceof Response)return{isFile:1,t:e||new Date(t.headers.get("Last-Modified")||Date.now()),i:t.body};if(void 0===e)e=new Date;else if(isNaN(e))throw new Error("Invalid modification date.");if(void 0===t)return{isFile:0,t:e};if("string"==typeof t)return{isFile:1,t:e,i:o(t)};if(t instanceof Blob)return{isFile:1,t:e,i:t.stream()};if(t instanceof Uint8Array||t instanceof ReadableStream)return{isFile:1,t:e,i:t};if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return{isFile:1,t:e,i:r(t)};if(Symbol.asyncIterator in t)return{isFile:1,t:e,i:u(t[Symbol.asyncIterator]())};throw new TypeError("Unsupported input format.")}function u(t,e=t){return new ReadableStream({async pull(e){let n=0;for(;e.desiredSize>n;){const i=await t.next();if(!i.value){e.close();break}{const t=l(i.value);e.enqueue(t),n+=t.byteLength}}},cancel(t){e.throw?.(t)}})}function l(t){return"string"==typeof t?o(t):t instanceof Uint8Array?t:r(t)}function c(t,e,n){let[i,s]=function(t){return t?t instanceof Uint8Array?[t,1]:ArrayBuffer.isView(t)||t instanceof ArrayBuffer?[r(t),1]:[o(t),0]:[void 0,0]}(e);if(t instanceof File)return{o:d(i||o(t.name)),u:BigInt(t.size),l:s};if(t instanceof Response){const e=t.headers.get("content-disposition"),r=e&&e.match(/;\s*filename\*?=["']?(.*?)["']?$/i),f=r&&r[1]||t.url&&new URL(t.url).pathname.split("/").findLast(Boolean),a=f&&decodeURIComponent(f),u=n||+t.headers.get("content-length");return{o:d(i||o(a)),u:BigInt(u),l:s}}return i=d(i,void 0!==t||void 0!==n),"string"==typeof t?{o:i,u:BigInt(o(t).length),l:s}:t instanceof Blob?{o:i,u:BigInt(t.size),l:s}:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?{o:i,u:BigInt(t.byteLength),l:s}:{o:i,u:g(t,n),l:s}}function g(t,e){return e>-1?BigInt(e):t?void 0:0n}function d(t,e=1){if(!t||t.every((t=>47===t)))throw new Error("The file must have a name.");if(e)for(;47===t[t.length-1];)t=t.subarray(0,-1);else 47!==t[t.length-1]&&(t=new Uint8Array([...t,47]));return t}var y=new Uint32Array(256);for(let t=0;t<256;++t){let e=t;for(let t=0;t<8;++t)e=e>>>1^(1&e&&3988292384);y[t]=e}function U(t,e=0){e^=-1;for(var n=0,i=t.length;n<i;n++)e=e>>>8^y[255&e^t[n]];return~e>>>0}function h(t,e,n=0){const i=t.getSeconds()>>1|t.getMinutes()<<5|t.getHours()<<11,r=t.getDate()|t.getMonth()+1<<5|t.getFullYear()-1980<<9;e.setUint16(n,i,1),e.setUint16(n+2,r,1)}function w({o:t,l:e},n){return 8*(!e||(n??function(t){try{p.decode(t)}catch{return 0}return 1}(t)))}var p=new TextDecoder("utf8",{fatal:1});function m(t,e=0){const n=i(30);return n.setUint32(0,1347093252),n.setUint32(4,754976768|e),h(t.t,n,10),n.setUint16(26,t.o.length,1),r(n)}async function*B(t){let{i:e}=t;if("then"in e&&(e=await e),e instanceof Uint8Array)yield e,t.m=U(e,0),t.u=BigInt(e.length);else{t.u=0n;const n=e.getReader();for(;;){const{value:e,done:i}=await n.read();if(i)break;t.m=U(e,t.m),t.u+=BigInt(e.length),yield e}}}function b(t,e){const n=i(16+(e?8:0));return n.setUint32(0,1347094280),n.setUint32(4,t.isFile?t.m:0,1),e?(n.setBigUint64(8,t.u,1),n.setBigUint64(16,t.u,1)):(n.setUint32(8,s(t.u),1),n.setUint32(12,s(t.u),1)),r(n)}function v(t,e,n=0,o=0){const f=i(46);return f.setUint32(0,1347092738),f.setUint32(4,755182848),f.setUint16(8,2048|n),h(t.t,f,12),f.setUint32(16,t.isFile?t.m:0,1),f.setUint32(20,s(t.u),1),f.setUint32(24,s(t.u),1),f.setUint16(28,t.o.length,1),f.setUint16(30,o,1),f.setUint16(40,t.isFile?33204:16893,1),f.setUint32(42,s(e),1),r(f)}function I(t,e,n){const o=i(n);return o.setUint16(0,1,1),o.setUint16(2,n-4,1),16&n&&(o.setBigUint64(4,t.u,1),o.setBigUint64(12,t.u,1)),o.setBigUint64(n-8,e,1),r(o)}function F(t){return t instanceof File||t instanceof Response?[[t],[t]]:[[t.input,t.name,t.size],[t.input,t.lastModified]]}var A=t=>function(t){let e=BigInt(22),n=0n,i=0;for(const r of t){if(!r.o)throw new Error("Every file must have a non-empty name.");if(void 0===r.u)throw new Error(`Missing size for file "${(new TextDecoder).decode(r.o)}".`);const t=r.u>=0xffffffffn,o=n>=0xffffffffn;n+=BigInt(46+r.o.length+(t&&8))+r.u,e+=BigInt(r.o.length+46+(12*o|28*t)),i||(i=t)}return(i||n>=0xffffffffn)&&(e+=BigInt(76)),e+n}(function*(t){for(const e of t)yield c(...F(e)[0])}(t));function x(t,e={}){const n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof e.length||Number.isInteger(e.length))&&e.length>0&&(n["Content-Length"]=String(e.length)),e.metadata&&(n["Content-Length"]=String(A(e.metadata))),new Response(D(t,e),{headers:n})}function D(t,e={}){const n=function(t){const e=t[Symbol.iterator in t?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const t=await e.next();if(t.done)return t;const[n,i]=F(t.value);return{done:0,value:Object.assign(a(...i),c(...n))}},throw:e.throw?.bind(e),[Symbol.asyncIterator](){return this}}}(t);return u(async function*(t,e){const n=[];let o=0n,a=0n,u=0;for await(const i of t){const t=w(i,e.buffersAreUTF8);yield m(i,t),yield new Uint8Array(i.o),i.isFile&&(yield*B(i));const r=i.u>=0xffffffffn,s=12*(o>=0xffffffffn)|28*r;yield b(i,r),n.push(v(i,o,t,s)),n.push(i.o),s&&n.push(I(i,o,s)),r&&(o+=8n),a++,o+=BigInt(46+i.o.length)+i.u,u||(u=r)}let l=0n;for(const t of n)yield t,l+=BigInt(t.length);if(u||o>=0xffffffffn){const t=i(76);t.setUint32(0,1347094022),t.setBigUint64(4,BigInt(44),1),t.setUint32(12,755182848),t.setBigUint64(24,a,1),t.setBigUint64(32,a,1),t.setBigUint64(40,l,1),t.setBigUint64(48,o,1),t.setUint32(56,1347094023),t.setBigUint64(64,o+l,1),t.setUint32(72,1,1),yield r(t)}const c=i(22);c.setUint32(0,1347093766),c.setUint16(8,f(a),1),c.setUint16(10,f(a),1),c.setUint32(12,s(l),1),c.setUint32(16,s(o),1),yield r(c)}(n,e),n)}}}]);