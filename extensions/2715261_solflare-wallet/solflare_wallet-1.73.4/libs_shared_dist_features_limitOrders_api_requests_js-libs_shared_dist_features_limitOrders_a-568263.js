(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["libs_shared_dist_features_limitOrders_api_requests_js-libs_shared_dist_features_limitOrders_a-568263"],{"../../libs/shared/dist/features/limitOrders/api/requests.js":(e,t,s)=>{"use strict";s.d(t,{FS:()=>a,ht:()=>o,x0:()=>n});var i=s("../../libs/shared/dist/api/index.js"),r=s("../../libs/shared/dist/constants/index.js");const n=async(e,t="USD")=>{const s={wallet:e,currency:t},{body:n}=await(0,i.U2)(`${r.JF}/v2/trade/limit-orders/list?${new URLSearchParams(s).toString()}`);return n},a=async(e,t="USD")=>{const s={wallet:e,currency:t},{body:n}=await(0,i.U2)(`${r.JF}/v2/trade/limit-orders/list-history?${new URLSearchParams(s).toString()}`);return n},o=async({inMint:e,outMint:t,inAmount:s,price:n,feeBps:a})=>{const{body:o}=await(0,i.U2)(`${r.JF}/v2/trade/limit-orders/quote?inMint=${e}&outMint=${t}&inAmount=${s}&price=${n}&feeBps=${a}`);return o}},"../../libs/shared/dist/features/limitOrders/api/transactions.js":(e,t,s)=>{"use strict";s.d(t,{L:()=>l,s:()=>o});var i=s("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=s("../../../node_modules/base64-js/index.js"),n=s("../../libs/shared/dist/api/index.js"),a=s("../../libs/shared/dist/constants/index.js");const o=async({publicKey:e,orders:t,setComputeBudget:s})=>{const o={wallet:e,orders:t,setComputeBudget:s},{body:l}=await(0,n.v_)(`${a.JF}/v2/trade/limit-orders/orders-delete`,o);return{transaction:i.VersionedTransaction.deserialize(r.toByteArray(l.txs[0])),data:{...l}}},l=async({publicKey:e,inAmount:t,outAmount:s,inMint:o,outMint:l,expiredAt:d,setComputeBudget:c})=>{const u={wallet:e,inAmount:t,outAmount:s,inMint:o,outMint:l,setComputeBudget:c};void 0!==d&&(u.expiredAt=d);const{body:m}=await(0,n.v_)(`${a.JF}/v2/trade/limit-orders/order-create`,u);return{transaction:i.VersionedTransaction.deserialize(r.toByteArray(m.txs[0])),data:{...m}}}},"../../libs/shared/dist/features/limitOrders/components/index.js":(e,t,s)=>{"use strict";s.d(t,{E:()=>J.E,W:()=>H});var i=s("../../../node_modules/react/jsx-runtime.js"),r=s("../../../node_modules/react/index.js"),n=s("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),a=s("../../libs/foundation-ui/dist/index.js"),o=s("../../libs/rise-ui/dist/index.js"),l=s("../../libs/shared/dist/utils/extension.js"),d=s("../../libs/shared/dist/features/trading/context/index.js"),c=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),u=s("../../../node_modules/lodash/lodash.js"),m=s("../../../node_modules/@mui/material/Box/Box.js"),p=s("../../../node_modules/@mui/material/TableHead/TableHead.js"),x=s("../../../node_modules/@mui/material/TableRow/TableRow.js"),h=s("../../../node_modules/@mui/material/TableCell/TableCell.js"),j=s("../../../node_modules/@mui/material/TableBody/TableBody.js"),g=s("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),b=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),_=s("../../libs/shared/dist/features/pfp/components/index.js"),f=s("../../libs/shared/dist/utils/displayPrice.js"),v=s("../../libs/shared/dist/utils/truncateMiddle.js"),y=s("../../libs/shared/dist/components/TokenAvatar/index.js");const w=({amount:e,tokenImage:t,tokenSymbol:s,tokenVerified:r=!0,toPubkey:n,toName:o})=>(0,i.jsx)(a.ConfirmTransaction,{avatar:(0,i.jsx)(a.IconAvatar,{size:"xl",icon:b.CC9}),transactionFromItem:(0,i.jsx)(a.TXListItem,{title:(0,f.ED)({amount:e,displayType:"solana",suffix:s?` ${s}`:void 0}),avatar:(0,i.jsx)(y.y,{src:t,verified:r})}),transactionToItem:(0,i.jsx)(a.TXListItem,{title:o||(0,v.r)(n),subtitle:o?(0,v.r)(n):void 0,avatar:(0,i.jsx)(_.y,{publicKey:n})})});var k=s("../../libs/shared/dist/utils/units.js"),T=s("../../libs/shared/dist/features/transactionFlow/context/index.js"),S=s("../../libs/shared/dist/features/walletData/hooks/index.js"),C=s("../../libs/shared/dist/features/limitOrders/api/index.js");const I=()=>{const{t:e}=(0,c.$)(),{transactionInit:t}=(0,T.p)(),{publicKey:s,accountName:n}=(0,S.rT)(),a=(0,g.NL)();return{cancel:(0,r.useCallback)((async(r,o)=>{await t({txBuilder:C.sl,builderParams:{publicKey:s,orders:[r.orderKey],setComputeBudget:!0},commitment:"confirmed",title:e("limit_orders_cancel_order_confirmation_title"),onConfirm:async()=>{a.resetQueries(["openOrders"])},confirmDialog:(0,i.jsx)(w,{amount:(0,k.d)(r.amountInputLeft,o.decimals),tokenImage:o.logoUrl||void 0,tokenSymbol:o.symbol||void 0,tokenVerified:o.verified,toPubkey:s,toName:n})})}),[s,n,a,t,e])}};var O=s("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),E=s("../../libs/shared/dist/features/currencies/hooks/index.js"),F=s("../../libs/shared/dist/components/index.js");const A=({order:e,mints:t,showOrderDetails:s})=>{const{t:r}=(0,c.$)(),{cancel:n}=I(),l=t[e.mintOutput],d=(0,k.d)(e.amountOutput,l?.decimals),u=(0,k.d)(e.amountInput-e.amountInputLeft,l?.decimals),m=t[e.mintInput],p=(0,k.d)(e.amountInput,m?.decimals),j=t[e.mintFrom],g=t[e.mintDenomination],b=`${+u?(0,f.ED)({amount:u,displayType:"value"}):0}/${(0,f.ED)({amount:d,displayType:"value"})} ${l?.symbol}`,_=+e.price;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsxs)(a.OrderCard,{onClick:()=>s({order:e,sellToken:m,buyToken:l,fromMint:j,denominationMint:g}),header:(0,i.jsx)(a.OrderCardHeader,{label:r("buy_label"),value:(0,f.ED)({amount:d,displayType:"value"}),avatar:(0,i.jsx)(F.yY,{size:"s",src:l?.logoUrl||void 0,alt:"Order value",verified:l?.verified}),right:(0,i.jsx)(a.Button,{size:"s",variant:"secondary",onClick:t=>{t.stopPropagation(),n(e,m)},children:r("action_cancel")})}),progress:(0,i.jsx)(a.OrderProgressLine,{value:(e.amountOutput-e.amountOutputLeft)*BigInt(100)/e.amountOutput+"%"}),children:[(0,i.jsx)(a.OrderCardFooterLeft,{label:r("sell_label"),value:(0,f.ED)({amount:p,displayType:"value"}),avatar:(0,i.jsx)(F.yY,{size:"xs",src:m?.logoUrl||void 0,alt:"Order value",verified:m?.verified})}),"buy"===e.direction?(0,i.jsx)(a.OrderCardFooterRight,{label:r("buy_at_price_label",{token:j?.symbol}),value:(0,f.ED)({amount:_,displayType:"value"}),avatar:(0,i.jsx)(F.yY,{size:"xs",src:g?.logoUrl||void 0,alt:"Order value",verified:g?.verified})}):(0,i.jsx)(a.OrderCardFooterRight,{label:r("sell_at_price_label",{token:j?.symbol}),value:(0,f.ED)({amount:_,displayType:"value"}),avatar:(0,i.jsx)(F.yY,{size:"xs",src:g?.logoUrl||void 0,alt:"Order value",verified:g?.verified})})]},`open-order-${e.orderKey}`)}),(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsxs)(x.Z,{hover:!0,onClick:()=>s({order:e,sellToken:m,buyToken:l,fromMint:j,denominationMint:g}),children:[(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,i.jsx)(F.yY,{size:"xs",src:l?.logoUrl||void 0,alt:"Order value",verified:l?.verified})," ",(0,f.ED)({amount:d,displayType:"value"})]})}),(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,i.jsx)(F.yY,{size:"xs",src:m?.logoUrl||void 0,alt:"Order value",verified:m?.verified})," ",(0,f.ED)({amount:p,displayType:"value"})]})}),(0,i.jsx)(h.Z,{scope:"row",children:(e.direction,(0,i.jsxs)(i.Fragment,{children:[(0,f.ED)({amount:_,displayType:"value"})," ",g?.symbol," per ",j?.symbol]}))}),(0,i.jsx)(h.Z,{scope:"row",children:b}),(0,i.jsx)(h.Z,{children:(0,i.jsx)(a.Button,{size:"s",variant:"secondary",onClick:t=>{t.stopPropagation(),n(e,m)},children:r("action_cancel")})})]})})]})};var D=s("../../libs/shared/dist/modals/index.js"),U=s("../../libs/shared/dist/utils/humanDate.js");const L=({order:e,buyToken:t,sellToken:s,fromMint:r,denominationMint:n,onClose:o,onCancelOrder:l})=>{const{t:d}=(0,c.$)(),u=(0,k.d)(e.amountOutput,t?.decimals),m=(0,k.d)(e.amountInput,s?.decimals),p=(0,k.d)((e.amountOutput-e.amountOutputLeft)/e.amountOutput,t?.decimals),x=`${+p?(0,f.ED)({amount:p,displayType:"value"}):0}/${u}`,h=(e.amountOutput-e.amountOutputLeft)*BigInt(100)/e.amountOutput+"%";return(0,i.jsx)(D.V,{title:d("limit_orders_open_order_details_title"),textAlign:"left",onClose:o,footer:(0,i.jsx)(a.Button,{variant:"destructive",onClick:l,children:d("limit_orders_open_order_details_cta")}),children:(0,i.jsxs)(a.DetailsSection,{children:[(0,i.jsx)(a.DetailsSectionRow,{title:d("buy_label"),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.yY,{size:"s",src:t?.logoUrl||void 0,verified:t?.verified}),u," ",t?.symbol]})}),(0,i.jsx)(a.Divider,{fullWidthNegativeMargin:!0}),(0,i.jsx)(a.DetailsSectionRow,{title:d("sell_label"),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.yY,{size:"s",src:s?.logoUrl||void 0,verified:s?.verified}),m," ",s?.symbol]})}),(0,i.jsx)(a.Divider,{fullWidthNegativeMargin:!0}),(0,i.jsx)(a.DetailsSectionRow,{title:d("buy_at_price_label",{token:r?.symbol}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.yY,{size:"s",src:n?.logoUrl||void 0,verified:n?.verified}),+e.price," ",n?.symbol]})}),(0,i.jsx)(a.Divider,{fullWidthNegativeMargin:!0}),(0,i.jsx)(a.DetailsSectionRow,{title:d("limit_orders_open_order_details_filled_size"),content:(0,i.jsxs)(i.Fragment,{children:[x,(0,i.jsx)(a.TextXS,{children:h})]})}),(0,i.jsx)(a.Divider,{fullWidthNegativeMargin:!0}),(0,i.jsx)(a.DetailsSectionRow,{title:d("limit_orders_open_order_details_expiry"),content:e.expiredAt?(0,U.pz)(e.expiredAt):d("limit_orders_open_order_details_expiry_never")})]})})},M=(0,n.Z)((()=>({emptyStateContainer:{padding:"50px 0px 74px 0px"}}))),$=({children:e})=>{const{t}=(0,c.$)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsx)(m.Z,{p:2,children:(0,i.jsxs)(o.iA,{children:[(0,i.jsx)(p.Z,{children:(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(h.Z,{align:"left",children:t("buy_label")}),(0,i.jsx)(h.Z,{align:"left",children:t("sell_label")}),(0,i.jsx)(h.Z,{align:"left",children:t("limit_price_label")}),(0,i.jsx)(h.Z,{align:"left",children:t("limit_orders_open_order_details_filled_size")}),(0,i.jsx)(h.Z,{sx:{width:[50,110,110,110,110]}})]})}),(0,i.jsx)(j.Z,{children:e})]})})}),(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsx)(a.List,{gapSize:"gapM",children:e})})]})},Z=()=>{const{t:e}=(0,c.$)(),{orders:t,mints:s,isLoading:n}=(()=>{const{publicKey:e}=(0,S.rT)(),t=(0,E.Af)(),{data:{orders:s,mints:i}={},isLoading:r,isFetching:n}=(0,O.a)({queryKey:["openOrders",e,t.ticker],queryFn:()=>(0,C.x0)(e,t.ticker),refetchInterval:5e3});return{orders:s,mints:i,isLoading:r,isFetching:n}})(),{cancel:l}=I(),d=M(),[m,p]=(0,r.useState)();return n?(0,i.jsx)($,{children:(0,u.times)(4).map(((e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsx)(a.OrderCard,{isLoading:!0},`loading-order-card-${t}`)}),(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsx)(a.Skeleton,{width:"70px",height:"16px"})}),(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsx)(a.Skeleton,{width:"70px",height:"16px"})}),(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsx)(a.Skeleton,{width:"70px",height:"16px"})}),(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsx)(a.Skeleton,{width:"70px",height:"16px"})}),(0,i.jsx)(h.Z,{scope:"row"})]})})]})))}):(0,u.isEmpty)(t)||(0,u.isEmpty)(s)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsx)(a.EmptyState,{children:(0,i.jsxs)(a.Paragraph,{textAlign:"center",children:[" ",e("limit_orders_empty_open_orders_tab")]})})}),(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsx)("div",{className:d.emptyStateContainer,children:(0,i.jsx)(a.EmptyState,{children:(0,i.jsxs)(a.Paragraph,{textAlign:"center",children:[" ",e("limit_orders_empty_open_orders_tab")]})})})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{children:t&&s&&t.map((e=>(0,i.jsx)(A,{order:e,mints:s,showOrderDetails:p},`open-order-${e.orderKey}`)))}),m&&(0,i.jsx)(L,{...m,onClose:()=>p(void 0),onCancelOrder:()=>{l(m.order,m.sellToken),p(void 0)}})]})};var R=s("../../../node_modules/dayjs/dayjs.min.js"),B=s.n(R);const P=({order:e,buyToken:t,sellToken:s,fromMint:r,denominationMint:n,onClose:o})=>{const{t:l}=(0,c.$)(),d=(0,k.d)(e.amountOutput,t.decimals),u=(0,k.d)(e.amountInput,s.decimals);return(0,i.jsx)(D.V,{title:l("limit_orders_completed_order_details_title"),textAlign:"left",onClose:o,children:(0,i.jsxs)(a.DetailsSection,{children:[(0,i.jsx)(a.DetailsSectionRow,{title:l("limit_orders_completed_order_details_date_completed"),content:`${B()(e.updatedAt).format("YYYY MMMM D")} ${l("at_time")} ${B()(e.updatedAt).format("HH:mm:ss")}`}),(0,i.jsx)(a.Divider,{fullWidthNegativeMargin:!0}),(0,i.jsx)(a.DetailsSectionRow,{title:l("bought_label"),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.yY,{size:"s",src:t.logoUrl||void 0,verified:t.verified}),d," ",t.symbol]})}),(0,i.jsx)(a.Divider,{fullWidthNegativeMargin:!0}),(0,i.jsx)(a.DetailsSectionRow,{title:l("sold_label"),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.yY,{size:"s",src:s.logoUrl||void 0,verified:s.verified}),u," ",s.symbol]})}),(0,i.jsx)(a.Divider,{fullWidthNegativeMargin:!0}),(0,i.jsx)(a.DetailsSectionRow,{title:l("bought_at_price_label",{token:r.symbol}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.yY,{size:"s",src:n.logoUrl||void 0,verified:n.verified}),+e.price," ",n.symbol]})})]})})},N=({order:e,mints:t,showOrderDetails:s})=>{const{t:r}=(0,c.$)(),n=t[e.mintOutput],l=(0,k.d)(e.amountOutput,n?.decimals),d=t[e.mintInput],u=(0,k.d)(e.amountInput,d?.decimals),m=t[e.mintFrom],p=t[e.mintDenomination],j=+e.price;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsxs)(a.OrderCard,{onClick:()=>s({order:e,sellToken:d,buyToken:n,fromMint:m,denominationMint:p}),header:(0,i.jsx)(a.OrderCardHeader,{label:r("bought_label"),value:(0,f.ED)({amount:l,displayType:"value"}),avatar:(0,i.jsx)(F.yY,{size:"s",src:n?.logoUrl||void 0,alt:"Order value",verified:n?.verified}),right:e.updatedAt?(0,U.rN)(e.updatedAt,!1,!1):"",state:"success"}),progress:(0,i.jsx)(a.OrderProgressLine,{value:(e.amountOutput-e.amountOutputLeft)*BigInt(100)/e.amountOutput+"%"}),children:[(0,i.jsx)(a.OrderCardFooterLeft,{label:r("sold_label"),value:(0,f.ED)({amount:u,displayType:"value"}),avatar:(0,i.jsx)(F.yY,{size:"xs",src:d?.logoUrl||void 0,alt:"Order value",verified:d?.verified})}),"buy"===e.direction?(0,i.jsx)(a.OrderCardFooterRight,{label:r("bought_at_price_label",{token:m?.symbol}),value:(0,f.ED)({amount:j,displayType:"value"}),avatar:(0,i.jsx)(F.yY,{size:"xs",src:p?.logoUrl||void 0,alt:"Order value",verified:p?.verified})}):(0,i.jsx)(a.OrderCardFooterRight,{label:r("sold_at_price_label",{token:m?.symbol}),value:(0,f.ED)({amount:j,displayType:"value"}),avatar:(0,i.jsx)(F.yY,{size:"xs",src:p?.logoUrl||void 0,alt:"Order value",verified:p?.verified})})]},`OderHistory-${e.orderKey}`)}),(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsxs)(x.Z,{hover:!0,onClick:()=>s({order:e,sellToken:d,buyToken:n,fromMint:m,denominationMint:p}),children:[(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,i.jsx)(F.yY,{size:"xs",src:n?.logoUrl||void 0,alt:"Order value",verified:n?.verified})," ",(0,f.ED)({amount:l,displayType:"value"})]})}),(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,i.jsx)(F.yY,{size:"xs",src:d?.logoUrl||void 0,alt:"Order value",verified:d?.verified})," ",(0,f.ED)({amount:u,displayType:"value"})]})}),(0,i.jsx)(h.Z,{scope:"row",children:(e.direction,(0,i.jsxs)(i.Fragment,{children:[(0,f.ED)({amount:j,displayType:"value"})," ",p?.symbol," per ",m?.symbol]}))}),(0,i.jsx)(h.Z,{scope:"row",children:e.updatedAt?(0,U.rN)(e.updatedAt,!1,!1):""}),(0,i.jsx)(h.Z,{scope:"row"})]})})]})},z=(0,n.Z)((()=>({emptyStateContainer:{padding:"50px 0px 74px 0px"}}))),Y=({children:e})=>{const{t}=(0,c.$)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsx)(m.Z,{p:2,children:(0,i.jsxs)(o.iA,{children:[(0,i.jsx)(p.Z,{children:(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(h.Z,{align:"left",children:t("bought_label")}),(0,i.jsx)(h.Z,{align:"left",children:t("sold_label")}),(0,i.jsx)(h.Z,{align:"left",children:t("limit_price_label")}),(0,i.jsx)(h.Z,{align:"left",children:t("time_completed_label")}),(0,i.jsx)(h.Z,{sx:{width:[50,110,110,110,110]}})]})}),(0,i.jsx)(j.Z,{children:e})]})})}),(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsx)(a.List,{gapSize:"gapM",children:e})})]})},K=()=>{const{t:e}=(0,c.$)(),{orders:t,mints:s,isLoading:n}=(()=>{const{publicKey:e}=(0,S.rT)(),t=(0,E.Af)(),{data:{orders:s,mints:i}={},isLoading:r}=(0,O.a)({queryKey:["orders-history",e,t.ticker],queryFn:()=>(0,C.FS)(e,t.ticker)});return{orders:s,mints:i,isLoading:r}})(),l=z(),[d,m]=(0,r.useState)();return n?(0,i.jsx)(Y,{children:(0,u.times)(4).map(((e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsx)(a.OrderCard,{isLoading:!0},`loading-order-card-${t}`)}),(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsx)(a.Skeleton,{width:"70px",height:"16px"})}),(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsx)(a.Skeleton,{width:"70px",height:"16px"})}),(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsx)(a.Skeleton,{width:"70px",height:"16px"})}),(0,i.jsx)(h.Z,{scope:"row",children:(0,i.jsx)(a.Skeleton,{width:"70px",height:"16px"})}),(0,i.jsx)(h.Z,{scope:"row"})]})})]})))}):(0,u.isEmpty)(t)||(0,u.isEmpty)(s)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsx)(a.EmptyState,{children:(0,i.jsx)(a.Paragraph,{textAlign:"center",children:e("limit_orders_empty_order_history_tab")})})}),(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsx)("div",{className:l.emptyStateContainer,children:(0,i.jsx)(a.EmptyState,{children:(0,i.jsx)(a.Paragraph,{textAlign:"center",children:e("limit_orders_empty_order_history_tab")})})})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y,{children:t&&s&&t.map((e=>(0,i.jsx)(N,{order:e,mints:s,showOrderDetails:m},`order-history-${e.orderKey}`)))}),d&&(0,i.jsx)(P,{...d,onClose:()=>m(void 0)})]})},q=(0,n.Z)((()=>({ordersWebContainer:{display:"flex",flexDirection:"column",width:"420px",padding:"0px 16px",borderRadius:"10px"}}))),V=({children:e})=>{const t=q();return l.UJ?(0,i.jsx)(i.Fragment,{children:e}):(0,i.jsx)("div",{className:t.ordersWebContainer,children:e})},H=()=>{const{activeTab:e}=(0,d.s)(),[t,s]=(0,r.useState)("open-orders");return"swap"===e?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Uo,{bp:"lg",match:"down",children:(0,i.jsx)(V,{children:(0,i.jsx)(a.TabsContainer,{activeTab:t,onChange:s,tabs:[{value:"open-orders",label:"Open orders",content:(0,i.jsx)(Z,{})},{value:"order-history",label:"Order history",content:(0,i.jsx)(K,{})}]})})}),(0,i.jsx)(o.Uo,{bp:"lg",match:"up",children:(0,i.jsx)(o.xf,{defaultActiveTab:"openOrders",tabOrder:["openOrders","orderHistory"],tabs:{openOrders:{tabName:"Open orders",render:(0,i.jsx)(Z,{})},orderHistory:{tabName:"Order history",render:(0,i.jsx)(K,{})}}})})]})};var J=s("../../libs/shared/dist/features/limitOrders/components/LimitOrders/index.js")},"../../libs/shared/dist/features/limitOrders/constants.js":(e,t,s)=>{"use strict";s.d(t,{U:()=>i});const i=.05},"../../libs/shared/dist/features/swap/api/requests.js":(e,t,s)=>{"use strict";s.d(t,{m:()=>a});var i=s("../../libs/shared/dist/api/index.js"),r=s("../../libs/shared/dist/constants/index.js"),n=s("../../libs/shared/dist/utils/extension.js");const a=async({publicKey:e,inputMint:t,outputMint:s,amount:a,slippageBps:o,feeBps:l})=>{try{const d=n.p1?"extension":"web",{body:c}=await(0,i.U2)(`${r.JF}/v2/swap/quote?address=${e}&fromMint=${t}&toMint=${s}&amount=${a}&slippageBps=${o}&feeBps=${l}&deviceType=${d}`);return c}catch(e){return{}}}},"../../libs/shared/dist/features/swap/components/index.js":(e,t,s)=>{"use strict";s.d(t,{H:()=>o,B:()=>l.B});var i=s("../../../node_modules/react/jsx-runtime.js"),r=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),n=s("../../libs/foundation-ui/dist/index.js");const a=()=>{},o=()=>{const{t:e}=(0,r.$)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.PageTitle,{center:e("header_swap"),textAlign:"left"}),(0,i.jsx)(n.PageContent,{overflow:!0,children:(0,i.jsx)(n.Swap,{children:(0,i.jsxs)(n.SwapAssets,{children:[(0,i.jsx)(n.SwapInput,{isLoading:!0,placeholder:"0.00",id:"fromDefault",selectedToken:{},onSelectedTokenChange:a,label:(0,i.jsx)(n.Label,{htmlFor:"fromDefault",children:e("from_swap")}),right:(0,i.jsx)(n.RightLabel,{children:e("swap_max")}),tokens:[]}),(0,i.jsx)(n.SwapDivider,{onClick:a,disabled:!0}),(0,i.jsx)(n.SwapInput,{isLoading:!0,placeholder:"0.00",id:"fromDefault",selectedToken:{},onSelectedTokenChange:a,label:(0,i.jsx)(n.Label,{htmlFor:"fromDefault",children:e("to_swap")}),right:(0,i.jsx)(n.RightLabel,{children:e("table_balance")}),tokens:[]})]})})}),(0,i.jsxs)(n.FooterActions,{children:[(0,i.jsx)(n.Alert,{message:e("swap_mainnet_alert_description"),title:e("swap_mainnet_alert_header"),variant:"info"}),(0,i.jsx)(n.Button,{disabled:!0,children:e("action_swap")})]})]})};var l=s("../../libs/shared/dist/features/swap/components/SwapForm/index.js")},"../../libs/shared/dist/features/swap/constants.js":(e,t,s)=>{"use strict";s.d(t,{P:()=>i,R:()=>r});const i=22,r=80},"../../libs/shared/dist/features/trading/constants.js":(e,t,s)=>{"use strict";s.d(t,{EM:()=>r,JB:()=>u,Kc:()=>c,PY:()=>l,RK:()=>o,j2:()=>m,k4:()=>i,tB:()=>n,yR:()=>d,zI:()=>a});const i={tokenId:"",amount:"",value:"",isAta:!1,isUnknown:!1,verified:!0,decimals:0,price:"0",usdPrice:0,rawAmount:"",rawValue:"",name:"",symbol:"",logoURI:""},r={FIFTEEN_MINUTES:15,ONE_HOUR:60,ONE_DAY:1440,THREE_DAYS:4320,SEVER_DAYS:10080,THIRTY_DAYS:43200,NINETY_DAYS:129600,NEVER:99999999},n=r.NEVER,a=.5,o=.005,l="SOL",d=2,c=10,u=0,m=50},"../../libs/shared/dist/features/trading/context/index.js":(e,t,s)=>{"use strict";s.d(t,{g:()=>b,s:()=>_});var i=s("../../../node_modules/react/jsx-runtime.js"),r=s("../../../node_modules/react/index.js"),n=s("../../../node_modules/react-router/dist/index.js"),a=s("../../../node_modules/bignumber.js/bignumber.mjs"),o=s("../../../node_modules/lodash/lodash.js"),l=s("../../../node_modules/qs/lib/index.js"),d=s.n(l),c=s("../../libs/shared/dist/constants/mints.js"),u=s("../../libs/shared/dist/storage/solflareService.js");const m=(e,t,s)=>{if("string"!=typeof t)return e;const i=t.trim();if(i===s)return[];const r=e.find((e=>e.tokenId===i));return r?[r]:e.filter((e=>e.name?.toLowerCase().includes(i.toLowerCase())||e.symbol?.toLowerCase().includes(i.toLowerCase())))},p=e=>{const t=e.filter((e=>{const t=e.tokenId===c.Jb,s=e.tokenId===c.BH,i=!!+e.rawAmount,r=e.swapable;return t||!s&&i&&r}));return(0,o.orderBy)(t,[e=>+e.rawValue,e=>e.name.toLowerCase()],["desc","asc"])},x=e=>(0,o.orderBy)(e,[e=>e.volume24h??0,e=>e.name.toLowerCase()],["desc","asc"]);var h=s("../../libs/shared/dist/features/trading/constants.js"),j=s("../../libs/shared/dist/features/trading/hooks/index.js");const g=(0,r.createContext)(null),b=({children:e})=>{const t=(0,n.s0)(),[s,l]=(0,r.useState)("swap"),{id:b}=(0,n.UO)(),_=(0,n.TH)(),{queryFromToken:f,queryToToken:v}=(0,r.useMemo)((()=>{let e=null,t=null;const s=d().parse(_.search?.substring(1)||"");return s.from&&"string"==typeof s.from&&(e=s.from),s.to&&"string"==typeof s.to&&(t=s.to),{queryFromToken:e,queryToToken:t}}),[_]),y=b||null,w=(0,r.useRef)(!0),[k,T]=(0,r.useState)([]),[S,C]=(0,r.useState)([]),[I,O]=(0,r.useState)([]),[E,F]=(0,r.useState)(h.k4),[A,D]=(0,r.useState)(h.k4),[U,L]=(0,r.useState)(!1),[M,$]=(0,r.useState)(),[Z,R]=(0,r.useState)({value:0,label:"0"}),[B,P]=(0,r.useState)(h.EM.NEVER),[N,z]=(0,r.useState)(""),[Y,K]=(0,r.useState)(null),[q,V]=(0,r.useState)(null),{result:{portfolioTokens:H,isTokensLoading:J},tokensQuery:W}=(0,j.x)(Y||"",[y,f,v].filter(Boolean)),{result:{tokens:Q,isTokensLoading:X}}=(0,j.x)(q||"",[y,f,v].filter(Boolean)),G=(0,r.useMemo)((()=>{if(E.tokenId===c.Jb){const e=new a.Z(E.rawAmount).minus(h.RK).toString();return Math.max(+e,0)}return E.rawAmount}),[E.rawAmount,E.tokenId]);(0,r.useEffect)((()=>{Q.length&&O((e=>{const t=[...Q,...e];return(0,o.uniqBy)(t,"tokenId")}))}),[Q]),(0,r.useEffect)((()=>{if(I.length&&w.current){if(y){const e=I.find((e=>e.tokenId===y))||h.k4,t=I.find((e=>e.tokenId===c.Xz))||h.k4,s=I.find((e=>e.tokenId===c.Jb))||h.k4;return w.current=!1,y===c.BH?0==+s.amount&&+t.amount>0?(F(t),void D(s)):(F(s),void D(t)):y===c.Xz?+t.amount>0?(F(t),void D(s)):(F(s),void D(t)):0==+e.amount?(F(s),void D(e)):(F(e),void D(s))}if(f&&v){const e=H.find((e=>e.tokenId===f))||h.k4,t=I.find((e=>e.tokenId===v))||h.k4;return F(e),D(t),void(w.current=!1)}const e=p(H),t=x(I);return T(e),C(t),F(t[0]),D(t[1]),void(w.current=!1)}if(!w.current&&H.length&&E?.tokenId&&I.length&&A?.tokenId){const e=H.find((e=>e.tokenId===E.tokenId)),t=I.find((e=>e.tokenId===A.tokenId));e&&e.rawAmount!==E.rawAmount&&F(e),t&&t.rawAmount!==A.rawAmount&&D(t)}}),[H,I]),(0,r.useEffect)((()=>{if(H.length){const e=p(H);T(m(e,Y||""))}}),[Y,H]),(0,r.useEffect)((()=>{if(I.length){const e=x(I);C(m(e,q||""))}}),[q,I]);const ee=(0,r.useCallback)((async({refetch:e,slippage:t,expiry:s})=>{L(!1),$({refetch:e,slippage:t,expiry:s})}),[]),te=(0,r.useCallback)((e=>{l(e);const s=y?`/portfolio/${y}`:"/trade";t("swap"!==e?`${s}/limit`:s)}),[t,y]);(0,r.useEffect)((()=>{(async()=>{const e=await u.Z.swapSlippage.get();null===e&&await u.Z.swapSlippage.set(h.zI),R({value:Math.round(100*(e??h.zI)),label:String(e??h.zI)});const t=await u.Z.limitOrderExpiry.get();null!==t&&await u.Z.limitOrderExpiry.set(h.tB),P(t??h.tB)})()}),[]);const se=(0,r.useMemo)((()=>({activeTab:s,setActiveTab:te,selectedFromCoin:E,setSelectedFromCoin:F,selectedToCoin:A,setSelectedToCoin:D,fromCoins:k,toCoins:S,fromAmount:N,setFromAmount:z,maxFromBalance:G,fromSearchParam:Y,setFromSearchParam:K,toSearchParam:q,setToSearchParam:V,portfolioTokenId:y,queryFromToken:f,queryToToken:v,fromTokens:H,toTokens:I,tokensQuery:W,openSettings:U,setOpenSettings:L,settingsData:M,setSettingsData:$,slippage:Z,setSlippage:R,expiry:B,setExpiry:P,closeSettings:ee,isFromTokensLoading:J,isToTokensLoading:X})),[s,te,E,A,k,S,N,G,Y,q,y,f,v,H,I,W,U,M,Z,B,ee,J,X]);return(0,i.jsx)(g.Provider,{value:se,children:e})},_=()=>{const e=(0,r.useContext)(g);if(!e)throw new Error("useSharedTradingStateContext must be used within a SharedTradingStateProvider");return e}},"../../libs/shared/dist/features/trading/hooks/index.js":(e,t,s)=>{"use strict";s.d(t,{x:()=>c,v:()=>x});var i=s("../../../node_modules/react/index.js"),r=s("../../../node_modules/bignumber.js/bignumber.mjs"),n=s("../../libs/shared/dist/constants/mints.js"),a=s("../../libs/shared/dist/utils/displayPrice.js"),o=s("../../libs/shared/dist/utils/truncateMiddle.js"),l=s("../../libs/shared/dist/features/currencies/hooks/index.js"),d=s("../../libs/shared/dist/features/trading/queries/index.js");const c=(e="",t=null)=>{const s=(0,l.Af)(),c=(0,d.Kc)((e||"").trim()),u=(0,d.tT)();return{result:(0,i.useMemo)((()=>{if(u?.data?.length&&c?.data?.tokens?.length){const e=u.data.reduce(((e,t)=>(e[t.tokenId]=t,e)),{}),i=e[n.Jb],l=e[n.BH];let d=l.rawValue,m=l.rawAmount;i&&(m=new r.Z(i.rawAmount).plus(l.rawAmount).toString(),d=new r.Z(i.rawValue).plus(l.rawValue).toString()),e[n.Jb]={...l,tokenId:n.Jb,amount:(0,a.ED)({amount:m,displayType:"amount"}),rawAmount:m,value:+d?(0,a.ED)({prefix:s.symbol,amount:d,displayType:"value",pricePerCoin:l.usdPrice}):"",rawValue:d};const p={},x=c.data.tokens.map((s=>{t?.length&&t.includes(s.mint)&&(p[s.mint]=!0),e[s.mint]&&(e[s.mint].pinned=s.pinned);const i=e[s.mint];return i?{...i,volume24h:s.volume24h?.total}:{tokenId:s.mint,name:s.name||(0,o.r)(s.mint),symbol:s.symbol,logoURI:s.imageUri,isUnknown:!s.name,isAta:!1,decimals:s.decimals,verified:s.verified,pinned:s.pinned,value:"",rawAmount:"",rawValue:"",amount:"",price:String(s.price?.price??0),usdPrice:s.price?.usdPrice??0,volume24h:s.volume24h?.total}})),h=u.data.map((s=>{t?.length&&t.includes(s.tokenId)&&(p[s.tokenId]=!0),e[s.tokenId]&&(e[s.tokenId].pinned=s.pinned);const i=e[s.tokenId];return i?{...i,volume24h:s.volume24h}:{tokenId:s.tokenId,name:s.name||(0,o.r)(s.tokenId),symbol:s.symbol,logoURI:s.logoURI,isUnknown:!s.name,isAta:!1,decimals:s.decimals,verified:s.verified,pinned:s.pinned,value:"",rawAmount:"",rawValue:"",amount:"",price:String(s.price??0),usdPrice:s.usdPrice??0,volume24h:s.volume24h,swapable:s.swapable}}));if(t?.length)for(const s of t)e[s]&&p[s]&&x.push({...e[s],volume24h:0});if(!h.some((e=>e.tokenId===n.Jb))){const t=e[n.Jb];t&&h.push(t)}return{portfolioTokens:h,tokens:x,isTokensLoading:u.isLoading||c.isLoading}}return{portfolioTokens:[],tokens:[],isTokensLoading:u.isLoading||c.isLoading}}),[u.dataUpdatedAt,u.status,c.dataUpdatedAt,c.status]),tokensQuery:u,swapQuery:c}};var u=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),m=s("../../libs/shared/dist/features/trading/constants.js");const p={INSUFFICIENT_SOL:{title:"insufficient_ticker",message:"swap_alert_ensure_minimum"},INSUFFICIENT_TICKER:{swap:{title:"insufficient_ticker",message:"swap_alert_no_sufficient_balance"},limit:{title:"insufficient_ticker",message:"swap_alert_no_sufficient_balance"}},NO_QUOTES:{swap:{title:"swap_qoutes_not_available_title",message:"swap_qoutes_not_available_description"},limit:{title:"swap_qoutes_not_available_title",message:"swap_qoutes_not_available_description"}},PRICE_IMPACT:{title:"swap_unfavorable_trade_price_impact_warning_title",message:"swap_unfavorable_trade_warning_description2"},LOW_PRICE_RATE:{title:"swap_unfavorable_trade_low_rate_warning_title",message:"swap_unfavorable_trade_warning_description"}},x=({variant:e,solBalance:t,selectedFromCoin:s,fromAmount:r,priceImpact:n,maxFromBalance:o,hasQuoteData:l,isQuoteLoading:d,dataUpdatedAt:c,isError:x=!1,rateDifference:h})=>{const{t:j}=(0,u.$)();return{alertProps:(0,i.useMemo)((()=>t<m.RK&&+r>0?{variant:"error",title:j(p.INSUFFICIENT_SOL.title,{ticker:m.PY}),message:j(p.INSUFFICIENT_SOL.message,{amountWithSuffix:`${m.RK} ${m.PY}`})}:Math.abs(Date.now()-c)<100&&r&&!d&&(x||!l)?{variant:"error",title:j(p.NO_QUOTES[e].title),message:j(p.NO_QUOTES[e].message)}:+r>+o?{variant:"error",title:j(p.INSUFFICIENT_TICKER[e].title,{ticker:s.symbol}),message:j(p.INSUFFICIENT_TICKER[e].message)}:h&&+h>=m.Kc?{variant:"warning",title:j(p.LOW_PRICE_RATE.title,{rate:(0,a.ED)({amount:h,suffix:"%",displayType:"medium"}),exchange:"CoinGecko"}),message:j(p.LOW_PRICE_RATE.message)}:n&&n>m.yR?{variant:"warning",title:j(p.PRICE_IMPACT.title,{impact:(0,a.ED)({amount:n,suffix:"%",displayType:"medium"})}),message:j(p.PRICE_IMPACT.message)}:null),[t,r,c,d,x,l,o,h,n,j,e,s.symbol])}}},"../../libs/shared/dist/features/trading/modals/index.js":(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var i=s("../../../node_modules/react/jsx-runtime.js"),r=s("../../../node_modules/react/index.js"),n=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),a=s("../../../node_modules/lodash/lodash.js"),o=s("../../libs/foundation-ui/dist/index.js"),l=s("../../libs/shared/dist/modals/index.js"),d=s("../../libs/shared/dist/utils/common.js"),c=s("../../libs/shared/dist/components/UniversalDrawer/index.js");const u=({onClose:e,onDiscard:t})=>{const{t:s}=(0,n.$)();return(0,i.jsx)(c.Z,{open:!0,title:s("discard_changes_title"),footer:(0,i.jsxs)(o.ButtonGroup,{children:[(0,i.jsx)(o.Button,{variant:"secondary",onClick:e,children:s("action_keep_editing")}),(0,i.jsx)(o.Button,{variant:"destructive",onClick:t,children:s("action_confirm")})]}),children:(0,i.jsx)(o.Paragraph,{children:s("discard_changes_content")})})};var m=s("../../../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),p=s("../../libs/shared/dist/components/index.js");const x=(0,m.Z)("div")((()=>({display:"flex",flexDirection:"column",flex:1}))),h=({onBlur:e,onChange:t,onFocus:s,slippage:r})=>{const{t:a}=(0,n.$)();return(0,i.jsx)(x,{children:(0,i.jsx)(o.TextField,{onFocus:s,onBlur:e,value:r,onChange:t,placeholder:a("swap_slippage_placeholder"),label:(0,i.jsxs)(o.Label,{children:[a("swap_slippage_tolerance"),(0,i.jsx)(p.sW,{tooltip:a("swap_slippage_tooltip")})]})})})};var j=s("../../libs/shared/dist/features/trading/constants.js");const g=({onClose:e,slippageValue:t,expiryValue:s})=>{const[c,m]=(0,r.useState)(`${t}%`),[p,x]=(0,r.useState)(s||j.EM.NEVER),[g,b]=(0,r.useState)(!1),_=(0,r.useMemo)((()=>c!==`${t}%`&&c!==t),[c,t]),{t:f}=(0,n.$)(),v=(0,r.useCallback)((async e=>{const{value:t}=e.target,s=(0,d.T4)(t);"."!==t?(0,d.w9)(t,2)&&s&&+t>=j.JB&&+t<=j.j2&&m(t):m("0.")}),[]),y=(0,r.useCallback)((()=>{e({refetch:!1,slippage:+t,expiry:p})}),[e,t,p]),w=(0,r.useCallback)((()=>{const t=c.split("%")[0];e({refetch:!0,slippage:+t,expiry:p})}),[e,c,p]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.V,{onClose:()=>{_?b(!0):y()},title:f("trading_settings_modal_title"),textAlign:"left",footer:(0,i.jsx)(o.Button,{disabled:!_||(0,a.isEmpty)(c),onClick:w,children:f("action_save")}),children:(0,i.jsx)(h,{onBlur:()=>{m((e=>e?e.endsWith("%")?e:`${Math.abs(+e)}%`:"0%"))},onFocus:()=>{m((e=>e.endsWith("%")?e.slice(0,-1):e))},onChange:v,slippage:c})}),g&&(0,i.jsx)(u,{onClose:()=>b(!1),onDiscard:y})]})}},"?4860":()=>{}}]);