var edropper=function(){"use strict";var Dt=Object.defineProperty;var It=(re,B,se)=>B in re?Dt(re,B,{enumerable:!0,configurable:!0,writable:!0,value:se}):re[B]=se;var S=(re,B,se)=>It(re,typeof B!="symbol"?B+"":B,se);var Ke,Je;function re(e){return e==null||typeof e=="function"?{main:e}:e}var B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function se(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ee={exports:{}};(function(e,t){(function(r,s){s(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:B,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const s="The message port closed before a response was received.",n=o=>{const a={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(a).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(h,l=void 0){super(l),this.createItem=h}get(h){return this.has(h)||this.set(h,this.createItem(h)),super.get(h)}}const p=u=>u&&typeof u=="object"&&typeof u.then=="function",f=(u,h)=>(...l)=>{o.runtime.lastError?u.reject(new Error(o.runtime.lastError.message)):h.singleCallbackArg||l.length<=1&&h.singleCallbackArg!==!1?u.resolve(l[0]):u.resolve(l)},b=u=>u==1?"argument":"arguments",E=(u,h)=>function(g,...d){if(d.length<h.minArgs)throw new Error(`Expected at least ${h.minArgs} ${b(h.minArgs)} for ${u}(), got ${d.length}`);if(d.length>h.maxArgs)throw new Error(`Expected at most ${h.maxArgs} ${b(h.maxArgs)} for ${u}(), got ${d.length}`);return new Promise((x,y)=>{if(h.fallbackToNoCallback)try{g[u](...d,f({resolve:x,reject:y},h))}catch(A){console.warn(`${u} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,A),g[u](...d),h.fallbackToNoCallback=!1,h.noCallback=!0,x()}else h.noCallback?(g[u](...d),x()):g[u](...d,f({resolve:x,reject:y},h))})},H=(u,h,l)=>new Proxy(h,{apply(g,d,x){return l.call(d,u,...x)}});let I=Function.call.bind(Object.prototype.hasOwnProperty);const N=(u,h={},l={})=>{let g=Object.create(null),d={has(y,A){return A in u||A in g},get(y,A,w){if(A in g)return g[A];if(!(A in u))return;let m=u[A];if(typeof m=="function")if(typeof h[A]=="function")m=H(u,u[A],h[A]);else if(I(l,A)){let R=E(A,l[A]);m=H(u,u[A],R)}else m=m.bind(u);else if(typeof m=="object"&&m!==null&&(I(h,A)||I(l,A)))m=N(m,h[A],l[A]);else if(I(l,"*"))m=N(m,h[A],l["*"]);else return Object.defineProperty(g,A,{configurable:!0,enumerable:!0,get(){return u[A]},set(R){u[A]=R}}),m;return g[A]=m,m},set(y,A,w,m){return A in g?g[A]=w:u[A]=w,!0},defineProperty(y,A,w){return Reflect.defineProperty(g,A,w)},deleteProperty(y,A){return Reflect.deleteProperty(g,A)}},x=Object.create(u);return new Proxy(x,d)},L=u=>({addListener(h,l,...g){h.addListener(u.get(l),...g)},hasListener(h,l){return h.hasListener(u.get(l))},removeListener(h,l){h.removeListener(u.get(l))}}),T=new c(u=>typeof u!="function"?u:function(l){const g=N(l,{},{getContent:{minArgs:0,maxArgs:0}});u(g)}),$=new c(u=>typeof u!="function"?u:function(l,g,d){let x=!1,y,A=new Promise(M=>{y=function(O){x=!0,M(O)}}),w;try{w=u(l,g,y)}catch(M){w=Promise.reject(M)}const m=w!==!0&&p(w);if(w!==!0&&!m&&!x)return!1;const R=M=>{M.then(O=>{d(O)},O=>{let K;O&&(O instanceof Error||typeof O.message=="string")?K=O.message:K="An unexpected error occurred",d({__mozWebExtensionPolyfillReject__:!0,message:K})}).catch(O=>{console.error("Failed to send onMessage rejected reply",O)})};return R(m?w:A),!0}),oe=({reject:u,resolve:h},l)=>{o.runtime.lastError?o.runtime.lastError.message===s?h():u(new Error(o.runtime.lastError.message)):l&&l.__mozWebExtensionPolyfillReject__?u(new Error(l.message)):h(l)},ge=(u,h,l,...g)=>{if(g.length<h.minArgs)throw new Error(`Expected at least ${h.minArgs} ${b(h.minArgs)} for ${u}(), got ${g.length}`);if(g.length>h.maxArgs)throw new Error(`Expected at most ${h.maxArgs} ${b(h.maxArgs)} for ${u}(), got ${g.length}`);return new Promise((d,x)=>{const y=oe.bind(null,{resolve:d,reject:x});g.push(y),l.sendMessage(...g)})},Se={devtools:{network:{onRequestFinished:L(T)}},runtime:{onMessage:L($),onMessageExternal:L($),sendMessage:ge.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:ge.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},ie={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return a.privacy={network:{"*":ie},services:{"*":ie},websites:{"*":ie}},N(o,Se,a)};r.exports=n(chrome)}})})(Ee);var Xe=Ee.exports;const Te=se(Xe);/*!
 * Modified scrollStop.js from https://vanillajstoolkit.com/helpers/scrollstop/
 * Original author: (c) 2017 Chris Ferdinandi, MIT License, https://gomakethings.com
 *
 */const $e=function(e,t="start"){if(!e||typeof e!="function")return;let r,s=function(){window.clearTimeout(r),r=setTimeout(function(){e()},250)};t=="start"?window.addEventListener("scroll",s,!1):window.removeEventListener("scroll",s,!1)};((Je=(Ke=globalThis.browser)==null?void 0:Ke.runtime)==null?void 0:Je.id)==null?globalThis.chrome:globalThis.browser;const z=Symbol.for("@ts-pattern/matcher"),Ye=Symbol.for("@ts-pattern/isVariadic"),Re="@ts-pattern/anonymous-select-key",pe=e=>!!(e&&typeof e=="object"),ce=e=>e&&!!e[z],V=(e,t,r)=>{if(ce(e)){const s=e[z](),{matched:n,selections:o}=s.match(t);return n&&o&&Object.keys(o).forEach(a=>r(a,o[a])),n}if(pe(e)){if(!pe(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let s=[],n=[],o=[];for(const a of e.keys()){const c=e[a];ce(c)&&c[Ye]?o.push(c):o.length?n.push(c):s.push(c)}if(o.length){if(o.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(t.length<s.length+n.length)return!1;const a=t.slice(0,s.length),c=n.length===0?[]:t.slice(-n.length),p=t.slice(s.length,n.length===0?1/0:-n.length);return s.every((f,b)=>V(f,a[b],r))&&n.every((f,b)=>V(f,c[b],r))&&(o.length===0||V(o[0],p,r))}return e.length===t.length&&e.every((a,c)=>V(a,t[c],r))}return Reflect.ownKeys(e).every(s=>{const n=e[s];return(s in t||ce(o=n)&&o[z]().matcherType==="optional")&&V(n,t[s],r);var o})}return Object.is(t,e)},J=e=>{var t,r,s;return pe(e)?ce(e)?(t=(r=(s=e[z]()).getSelectionKeys)==null?void 0:r.call(s))!=null?t:[]:Array.isArray(e)?ae(e,J):ae(Object.values(e),J):[]},ae=(e,t)=>e.reduce((r,s)=>r.concat(t(s)),[]);function F(e){return Object.assign(e,{optional:()=>Qe(e),and:t=>k(e,t),or:t=>et(e,t),select:t=>t===void 0?Pe(e):Pe(t,e)})}function Qe(e){return F({[z]:()=>({match:t=>{let r={};const s=(n,o)=>{r[n]=o};return t===void 0?(J(e).forEach(n=>s(n,void 0)),{matched:!0,selections:r}):{matched:V(e,t,s),selections:r}},getSelectionKeys:()=>J(e),matcherType:"optional"})})}function k(...e){return F({[z]:()=>({match:t=>{let r={};const s=(n,o)=>{r[n]=o};return{matched:e.every(n=>V(n,t,s)),selections:r}},getSelectionKeys:()=>ae(e,J),matcherType:"and"})})}function et(...e){return F({[z]:()=>({match:t=>{let r={};const s=(n,o)=>{r[n]=o};return ae(e,J).forEach(n=>s(n,void 0)),{matched:e.some(n=>V(n,t,s)),selections:r}},getSelectionKeys:()=>ae(e,J),matcherType:"or"})})}function v(e){return{[z]:()=>({match:t=>({matched:!!e(t)})})}}function Pe(...e){const t=typeof e[0]=="string"?e[0]:void 0,r=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return F({[z]:()=>({match:s=>{let n={[t??Re]:s};return{matched:r===void 0||V(r,s,(o,a)=>{n[o]=a}),selections:n}},getSelectionKeys:()=>[t??Re].concat(r===void 0?[]:J(r))})})}function W(e){return typeof e=="number"}function X(e){return typeof e=="string"}function Y(e){return typeof e=="bigint"}F(v(function(e){return!0}));const Q=e=>Object.assign(F(e),{startsWith:t=>{return Q(k(e,(r=t,v(s=>X(s)&&s.startsWith(r)))));var r},endsWith:t=>{return Q(k(e,(r=t,v(s=>X(s)&&s.endsWith(r)))));var r},minLength:t=>Q(k(e,(r=>v(s=>X(s)&&s.length>=r))(t))),length:t=>Q(k(e,(r=>v(s=>X(s)&&s.length===r))(t))),maxLength:t=>Q(k(e,(r=>v(s=>X(s)&&s.length<=r))(t))),includes:t=>{return Q(k(e,(r=t,v(s=>X(s)&&s.includes(r)))));var r},regex:t=>{return Q(k(e,(r=t,v(s=>X(s)&&!!s.match(r)))));var r}});Q(v(X));const q=e=>Object.assign(F(e),{between:(t,r)=>q(k(e,((s,n)=>v(o=>W(o)&&s<=o&&n>=o))(t,r))),lt:t=>q(k(e,(r=>v(s=>W(s)&&s<r))(t))),gt:t=>q(k(e,(r=>v(s=>W(s)&&s>r))(t))),lte:t=>q(k(e,(r=>v(s=>W(s)&&s<=r))(t))),gte:t=>q(k(e,(r=>v(s=>W(s)&&s>=r))(t))),int:()=>q(k(e,v(t=>W(t)&&Number.isInteger(t)))),finite:()=>q(k(e,v(t=>W(t)&&Number.isFinite(t)))),positive:()=>q(k(e,v(t=>W(t)&&t>0))),negative:()=>q(k(e,v(t=>W(t)&&t<0)))});q(v(W));const ee=e=>Object.assign(F(e),{between:(t,r)=>ee(k(e,((s,n)=>v(o=>Y(o)&&s<=o&&n>=o))(t,r))),lt:t=>ee(k(e,(r=>v(s=>Y(s)&&s<r))(t))),gt:t=>ee(k(e,(r=>v(s=>Y(s)&&s>r))(t))),lte:t=>ee(k(e,(r=>v(s=>Y(s)&&s<=r))(t))),gte:t=>ee(k(e,(r=>v(s=>Y(s)&&s>=r))(t))),positive:()=>ee(k(e,v(t=>Y(t)&&t>0))),negative:()=>ee(k(e,v(t=>Y(t)&&t<0)))});ee(v(Y)),F(v(function(e){return typeof e=="boolean"})),F(v(function(e){return typeof e=="symbol"})),F(v(function(e){return e==null})),F(v(function(e){return e!=null}));function G(e,t){const r=document.createElement(e);for(let s in t)r.setAttribute(s,t[s]);return r}class tt{constructor(t){S(this,"el");S(this,"cursor");S(this,"_toolbox",{});S(this,"_tooltip",{});S(this,"tools",[]);S(this,"mouseMoved",!1);S(this,"elMoveMouseTip");console.log(`overlay: Enabling overlay ${t.width}x${t.height} with cursor ${t.cursor}`),this.cursor=t.cursor,t.enableToolbox&&(this._toolbox=new st,this.tools.push(this._toolbox)),t.enableTooltip&&(this._tooltip=new rt,this.tools.push(this._tooltip)),this.el=G("div",{id:"eye-dropper-overlay",style:["position: absolute",`width: ${t.width}px`,`height: ${t.height}px`,"opacity: 1","background: none","border: none","z-index: 1000001"].join(";")}),this.elMoveMouseTip=G("div",{id:"move-mouse",style:["position: absolute","top: 40px","left: 80%","transform: translate(-50%, -50%)","background-color: rgba(255, 255, 255, 0.9)","color: #1a1a1a","text-align: center","padding: 20px","border-radius: 10px"].join(";")});const r=G("span",{style:"background-color: #2f2f2f; padding: 2px 1px; border-radius: 4px;"});r.append("ðŸ–±ï¸"),this.elMoveMouseTip.append("Move your "),this.elMoveMouseTip.append(r),this.elMoveMouseTip.append(" to pick a color"),this.el.append(this.elMoveMouseTip);for(let s of this.tools)this.el.append(s.el);document.body.prepend(this.el)}hook(t,r){for(let s of this.tools)s[t](r)}hide(){this.hook("hookHide",{}),this.el.style.cursor="progress"}show(){this.mouseMoved&&(this.hook("hookShow",{}),this.el.style.cursor=this.cursor)}screenshoting(t){t?(console.log("overlay: screenshoting on. Hiding tools."),this.hide()):(console.log("overlay: screenshoting off. Showing tools."),this.show())}resized(t){console.log(`overlay: Resizing overlay ${t.width}x${t.height}`),this.el.style.width=`${t.width}px`,this.el.style.height=`${t.height}px`}deactivate(){this.hook("hookDeactivate",{}),this.el.remove()}tooltip(t){this.mouseMoved||(this.elMoveMouseTip.style.display="none",this.mouseMoved=!0,this.show()),this.hook("hookColor",t)}}class Oe{constructor(){S(this,"el");S(this,"color");S(this,"x");S(this,"y")}hookColor(t){this.color=t.color,this.x=t.x,this.y=t.y}hookDeactivate(t){this.el.remove()}hookShow(t){this.el.style.display=""}hookHide(t){this.el.style.display="none"}}class rt extends Oe{constructor(){super(),this.el=G("div",{id:"color-tooltip",style:["z-index: 1000001","color: black","position: absolute","display: none","font-size: 15px","border: 1px solid black","width: 10px","height: 10px"].join(";")})}hookColor(t){super.hookColor(t);const r=Math.round(document.documentElement.scrollTop),s=Math.round(document.documentElement.scrollLeft);let n=t.y-r>t.screenHeight/2?-15:20,o=t.x-s<t.screenWidth/2?15:-30;this.el.style.backgroundColor=`#${t.color.rgbhex}`,this.el.style.borderColor=`#${t.color.opposite}`,this.el.style.top=`${t.y+n}px`,this.el.style.left=`${t.x+o}px`}}class st extends Oe{constructor(){super();S(this,"elColor");S(this,"elText");S(this,"elTextHex");S(this,"elTextRgb");this.el=G("div",{id:"color-toolbox",style:["z-index: 1000001","color: black","position: absolute","display: none","font-size: 15px","border: 1px solid black","width: 160px","height: 42px","bottom: 4px","right: 4px","border-radius: 2px","-webkit-box-shadow: 2px 2px 0px rgba(0,0,128,0.25)","background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0f0f0f), to(#3f3f3f))","color: white","font-family: monospace","border: 1px solid transparent","position: fixed"].join(";")}),this.elColor=G("div",{id:"color-toolbox-color",style:["width: 32px","height: 32px","margin: 4px","margin-right: 8px","float: left","border: 1px solid white","background-color: #ffbbca"].join(";")}),this.elText=G("div",{id:"color-toolbox-text",style:["font-size: 11px","padding: 5px 0px","overflow: hidden","text-align: center","color: white"].join(";")}),this.el.append(this.elColor),this.el.append(this.elText),this.elTextHex=G("div",{id:"color-toolbox-text-hex"}),this.elTextRgb=G("div",{id:"color-toolbox-text-rgb"}),this.elText.append(this.elTextHex),this.elText.append(this.elTextRgb)}hookColor(r){super.hookColor(r),this.elTextHex.textContent=`#${this.color.rgbhex}`,this.elTextRgb.textContent=`rgb(${this.color.r},${this.color.g},${this.color.b})`,this.elColor.style.backgroundColor=`#${this.color.rgbhex}`}}class me{constructor(t,r,s,n){S(this,"left");S(this,"top");S(this,"right");S(this,"bottom");S(this,"width");S(this,"height");this.left=t,this.top=r,this.right=t+s,this.bottom=r+n,this.width=s,this.height=n}transposed(){return new this.constructor(this.top,this.left,this.height,this.width)}contains(t){return t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom}horizontalMerge(t){const r=this.transposed(),s=t.transposed(),n=r.verticalMerge(s);return n===null?null:n.transposed()}verticalMerge(t){let r=this,s=t;return this.top>t.top&&([r,s]=[s,r]),r.bottom>=s.top&&r.bottom<=s.bottom?new me(r.left,r.top,r.right-r.left,s.bottom-r.top):null}merge(t){return this.left==t.left&&this.right==t.right?this.verticalMerge(t):this.top==t.top&&this.bottom==t.bottom?this.horizontalMerge(t):null}toString(){return`Rect(${this.width}x${this.height})@${this.left},${this.top}`}}var Ne={exports:{}};(function(e,t){(function(r,s){s(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:B,function(r){var s,n;if(!((n=(s=globalThis.chrome)==null?void 0:s.runtime)!=null&&n.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const o="The message port closed before a response was received.",a=c=>{const p={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(p).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class f extends WeakMap{constructor(g,d=void 0){super(d),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}const b=l=>l&&typeof l=="object"&&typeof l.then=="function",E=(l,g)=>(...d)=>{c.runtime.lastError?l.reject(new Error(c.runtime.lastError.message)):g.singleCallbackArg||d.length<=1&&g.singleCallbackArg!==!1?l.resolve(d[0]):l.resolve(d)},H=l=>l==1?"argument":"arguments",I=(l,g)=>function(x,...y){if(y.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${H(g.minArgs)} for ${l}(), got ${y.length}`);if(y.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${H(g.maxArgs)} for ${l}(), got ${y.length}`);return new Promise((A,w)=>{if(g.fallbackToNoCallback)try{x[l](...y,E({resolve:A,reject:w},g))}catch(m){console.warn(`${l} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),x[l](...y),g.fallbackToNoCallback=!1,g.noCallback=!0,A()}else g.noCallback?(x[l](...y),A()):x[l](...y,E({resolve:A,reject:w},g))})},N=(l,g,d)=>new Proxy(g,{apply(x,y,A){return d.call(y,l,...A)}});let L=Function.call.bind(Object.prototype.hasOwnProperty);const T=(l,g={},d={})=>{let x=Object.create(null),y={has(w,m){return m in l||m in x},get(w,m,R){if(m in x)return x[m];if(!(m in l))return;let M=l[m];if(typeof M=="function")if(typeof g[m]=="function")M=N(l,l[m],g[m]);else if(L(d,m)){let O=I(m,d[m]);M=N(l,l[m],O)}else M=M.bind(l);else if(typeof M=="object"&&M!==null&&(L(g,m)||L(d,m)))M=T(M,g[m],d[m]);else if(L(d,"*"))M=T(M,g[m],d["*"]);else return Object.defineProperty(x,m,{configurable:!0,enumerable:!0,get(){return l[m]},set(O){l[m]=O}}),M;return x[m]=M,M},set(w,m,R,M){return m in x?x[m]=R:l[m]=R,!0},defineProperty(w,m,R){return Reflect.defineProperty(x,m,R)},deleteProperty(w,m){return Reflect.deleteProperty(x,m)}},A=Object.create(l);return new Proxy(A,y)},$=l=>({addListener(g,d,...x){g.addListener(l.get(d),...x)},hasListener(g,d){return g.hasListener(l.get(d))},removeListener(g,d){g.removeListener(l.get(d))}}),oe=new f(l=>typeof l!="function"?l:function(d){const x=T(d,{},{getContent:{minArgs:0,maxArgs:0}});l(x)}),ge=new f(l=>typeof l!="function"?l:function(d,x,y){let A=!1,w,m=new Promise(K=>{w=function(U){A=!0,K(U)}}),R;try{R=l(d,x,w)}catch(K){R=Promise.reject(K)}const M=R!==!0&&b(R);if(R!==!0&&!M&&!A)return!1;const O=K=>{K.then(U=>{y(U)},U=>{let Ce;U&&(U instanceof Error||typeof U.message=="string")?Ce=U.message:Ce="An unexpected error occurred",y({__mozWebExtensionPolyfillReject__:!0,message:Ce})}).catch(U=>{console.error("Failed to send onMessage rejected reply",U)})};return O(M?R:m),!0}),Se=({reject:l,resolve:g},d)=>{c.runtime.lastError?c.runtime.lastError.message===o?g():l(new Error(c.runtime.lastError.message)):d&&d.__mozWebExtensionPolyfillReject__?l(new Error(d.message)):g(d)},ie=(l,g,d,...x)=>{if(x.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${H(g.minArgs)} for ${l}(), got ${x.length}`);if(x.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${H(g.maxArgs)} for ${l}(), got ${x.length}`);return new Promise((y,A)=>{const w=Se.bind(null,{resolve:y,reject:A});x.push(w),d.sendMessage(...x)})},u={devtools:{network:{onRequestFinished:$(oe)}},runtime:{onMessage:$(ge),onMessageExternal:$(ge),sendMessage:ie.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:ie.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return p.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},T(c,u,p)};r.exports=a(chrome)}else r.exports=globalThis.browser})})(Ne);var nt=Ne.exports;const Z=se(nt);var ot=(e,t,r)=>new Promise((s,n)=>{var o=p=>{try{c(r.next(p))}catch(f){n(f)}},a=p=>{try{c(r.throw(p))}catch(f){n(f)}},c=p=>p.done?s(p.value):Promise.resolve(p.value).then(o,a);c((r=r.apply(e,t)).next())});function le(e){const t=o=>ot(this,null,function*(){const a=r.map(({key:c,cb:p})=>{if(!(c in o))return;const{newValue:f,oldValue:b}=o[c];if(f!==b)return p(f,b)});yield Promise.all(a)});let r=[];function s(o){r.length===0&&e.onChanged.addListener(t),r.push(o)}function n(o){const a=r.indexOf(o);a>=0&&r.splice(a,1),r.length===0&&Z.storage.onChanged.removeListener(t)}return{clear(){return e.clear()},getItem(o){return e.get(o).then(a=>{var c;return(c=a[o])!=null?c:null})},setItem(o,a){return e.set({[o]:a??null})},removeItem(o){return e.remove(o)},onChange(o,a){const c={key:o,cb:a};return s(c),()=>n(c)}}}le(Z.storage.local),le(Z.storage.session),le(Z.storage.sync),le(Z.storage.managed);const it={autoClipboard:!0,autoClipboardType:"hex6",enableColorToolbox:!0,enableColorTooltip:!0,enableRightClickDeactivate:!0,dropperCursor:"default",enablePromoOnUpdate:!0,enableErrorReportingTab:!0},_e=async e=>await at.getItem(e)??it[e],at=le(Te.storage.sync),lt=async e=>{try{await navigator.clipboard.writeText(e)}catch{console.log("Can't copy as document isn't focused")}};function P(e,t){gt(e)&&(e="100%");const r=ct(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function ue(e){return Math.min(1,Math.max(0,e))}function gt(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function ct(e){return typeof e=="string"&&e.indexOf("%")!==-1}function je(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function he(e){return Number(e)<=1?`${Number(e)*100}%`:e}function ne(e){return e.length===1?"0"+e:String(e)}function mt(e,t,r){return{r:P(e,255)*255,g:P(t,255)*255,b:P(r,255)*255}}function He(e,t,r){e=P(e,255),t=P(t,255),r=P(r,255);const s=Math.max(e,t,r),n=Math.min(e,t,r);let o=0,a=0;const c=(s+n)/2;if(s===n)a=0,o=0;else{const p=s-n;switch(a=c>.5?p/(2-s-n):p/(s+n),s){case e:o=(t-r)/p+(t<r?6:0);break;case t:o=(r-e)/p+2;break;case r:o=(e-t)/p+4;break}o/=6}return{h:o,s:a,l:c}}function xe(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+(t-e)*(6*r):r<.5?t:r<.6666666666666666?e+(t-e)*(.6666666666666666-r)*6:e}function ut(e,t,r){let s,n,o;if(e=P(e,360),t=P(t,100),r=P(r,100),t===0)n=r,o=r,s=r;else{const a=r<.5?r*(1+t):r+t-r*t,c=2*r-a;s=xe(c,a,e+.3333333333333333),n=xe(c,a,e),o=xe(c,a,e-.3333333333333333)}return{r:s*255,g:n*255,b:o*255}}function Le(e,t,r){e=P(e,255),t=P(t,255),r=P(r,255);const s=Math.max(e,t,r),n=Math.min(e,t,r);let o=0;const a=s,c=s-n,p=s===0?0:c/s;if(s===n)o=0;else{switch(s){case e:o=(t-r)/c+(t<r?6:0);break;case t:o=(r-e)/c+2;break;case r:o=(e-t)/c+4;break}o/=6}return{h:o,s:p,v:a}}function ht(e,t,r){e=P(e,360)*6,t=P(t,100),r=P(r,100);const s=Math.floor(e),n=e-s,o=r*(1-t),a=r*(1-n*t),c=r*(1-(1-n)*t),p=s%6,f=[r,a,o,o,c,r][p],b=[c,r,r,a,o,o][p],E=[o,o,c,r,r,a][p];return{r:f*255,g:b*255,b:E*255}}function Fe(e,t,r,s){const n=[ne(Math.round(e).toString(16)),ne(Math.round(t).toString(16)),ne(Math.round(r).toString(16))];return s&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function dt(e,t,r,s,n){const o=[ne(Math.round(e).toString(16)),ne(Math.round(t).toString(16)),ne(Math.round(r).toString(16)),ne(At(s))];return n&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function ft(e,t,r,s){const n=e/100,o=t/100,a=r/100,c=s/100,p=255*(1-n)*(1-c),f=255*(1-o)*(1-c),b=255*(1-a)*(1-c);return{r:p,g:f,b}}function De(e,t,r){let s=1-e/255,n=1-t/255,o=1-r/255,a=Math.min(s,n,o);return a===1?(s=0,n=0,o=0):(s=(s-a)/(1-a)*100,n=(n-a)/(1-a)*100,o=(o-a)/(1-a)*100),a*=100,{c:Math.round(s),m:Math.round(n),y:Math.round(o),k:Math.round(a)}}function At(e){return Math.round(parseFloat(e)*255).toString(16)}function Ie(e){return _(e)/255}function _(e){return parseInt(e,16)}function pt(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}const be={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function xt(e){let t={r:0,g:0,b:0},r=1,s=null,n=null,o=null,a=!1,c=!1;return typeof e=="string"&&(e=bt(e)),typeof e=="object"&&(j(e.r)&&j(e.g)&&j(e.b)?(t=mt(e.r,e.g,e.b),a=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):j(e.h)&&j(e.s)&&j(e.v)?(s=he(e.s),n=he(e.v),t=ht(e.h,s,n),a=!0,c="hsv"):j(e.h)&&j(e.s)&&j(e.l)?(s=he(e.s),o=he(e.l),t=ut(e.h,s,o),a=!0,c="hsl"):j(e.c)&&j(e.m)&&j(e.y)&&j(e.k)&&(t=ft(e.c,e.m,e.y,e.k),a=!0,c="cmyk"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=je(r),{ok:a,format:e.format||c,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}const te="(?:"+"[-\\+]?\\d*\\.\\d+%?"+")|(?:"+"[-\\+]?\\d+%?"+")",ve="[\\s|\\(]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")\\s*\\)?",de="[\\s|\\(]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")\\s*\\)?",D={CSS_UNIT:new RegExp(te),rgb:new RegExp("rgb"+ve),rgba:new RegExp("rgba"+de),hsl:new RegExp("hsl"+ve),hsla:new RegExp("hsla"+de),hsv:new RegExp("hsv"+ve),hsva:new RegExp("hsva"+de),cmyk:new RegExp("cmyk"+de),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function bt(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(be[e])e=be[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let r=D.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=D.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=D.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=D.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=D.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=D.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=D.cmyk.exec(e),r?{c:r[1],m:r[2],y:r[3],k:r[4]}:(r=D.hex8.exec(e),r?{r:_(r[1]),g:_(r[2]),b:_(r[3]),a:Ie(r[4]),format:t?"name":"hex8"}:(r=D.hex6.exec(e),r?{r:_(r[1]),g:_(r[2]),b:_(r[3]),format:t?"name":"hex"}:(r=D.hex4.exec(e),r?{r:_(r[1]+r[1]),g:_(r[2]+r[2]),b:_(r[3]+r[3]),a:Ie(r[4]+r[4]),format:t?"name":"hex8"}:(r=D.hex3.exec(e),r?{r:_(r[1]+r[1]),g:_(r[2]+r[2]),b:_(r[3]+r[3]),format:t?"name":"hex"}:!1))))))))))}function j(e){return typeof e=="number"?!Number.isNaN(e):D.CSS_UNIT.test(e)}class C{constructor(t="",r={}){if(t instanceof C)return t;typeof t=="number"&&(t=pt(t)),this.originalInput=t;const s=xt(t);this.originalInput=t,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=r.format??s.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){const t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3}getLuminance(){const t=this.toRgb();let r,s,n;const o=t.r/255,a=t.g/255,c=t.b/255;return o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),c<=.03928?n=c/12.92:n=Math.pow((c+.055)/1.055,2.4),.2126*r+.7152*s+.0722*n}getAlpha(){return this.a}setAlpha(t){return this.a=je(t),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){const{s:t}=this.toHsl();return t===0}toHsv(){const t=Le(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=Le(this.r,this.g,this.b),r=Math.round(t.h*360),s=Math.round(t.s*100),n=Math.round(t.v*100);return this.a===1?`hsv(${r}, ${s}%, ${n}%)`:`hsva(${r}, ${s}%, ${n}%, ${this.roundA})`}toHsl(){const t=He(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=He(this.r,this.g,this.b),r=Math.round(t.h*360),s=Math.round(t.s*100),n=Math.round(t.l*100);return this.a===1?`hsl(${r}, ${s}%, ${n}%)`:`hsla(${r}, ${s}%, ${n}%, ${this.roundA})`}toHex(t=!1){return Fe(this.r,this.g,this.b,t)}toHexString(t=!1){return"#"+this.toHex(t)}toHex8(t=!1){return dt(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return"#"+this.toHex8(t)}toHexShortString(t=!1){return this.a===1?this.toHexString(t):this.toHex8String(t)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){const t=Math.round(this.r),r=Math.round(this.g),s=Math.round(this.b);return this.a===1?`rgb(${t}, ${r}, ${s})`:`rgba(${t}, ${r}, ${s}, ${this.roundA})`}toPercentageRgb(){const t=r=>`${Math.round(P(r,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=r=>Math.round(P(r,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toCmyk(){return{...De(this.r,this.g,this.b)}}toCmykString(){const{c:t,m:r,y:s,k:n}=De(this.r,this.g,this.b);return`cmyk(${t}, ${r}, ${s}, ${n})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const t="#"+Fe(this.r,this.g,this.b,!1);for(const[r,s]of Object.entries(be))if(t===s)return r;return!1}toString(t){const r=!!t;t=t??this.format;let s=!1;const n=this.a<1&&this.a>=0;return!r&&n&&(t.startsWith("hex")||t==="name")?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(s=this.toRgbString()),t==="prgb"&&(s=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(s=this.toHexString()),t==="hex3"&&(s=this.toHexString(!0)),t==="hex4"&&(s=this.toHex8String(!0)),t==="hex8"&&(s=this.toHex8String()),t==="name"&&(s=this.toName()),t==="hsl"&&(s=this.toHslString()),t==="hsv"&&(s=this.toHsvString()),t==="cmyk"&&(s=this.toCmykString()),s||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new C(this.toString())}lighten(t=10){const r=this.toHsl();return r.l+=t/100,r.l=ue(r.l),new C(r)}brighten(t=10){const r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new C(r)}darken(t=10){const r=this.toHsl();return r.l-=t/100,r.l=ue(r.l),new C(r)}tint(t=10){return this.mix("white",t)}shade(t=10){return this.mix("black",t)}desaturate(t=10){const r=this.toHsl();return r.s-=t/100,r.s=ue(r.s),new C(r)}saturate(t=10){const r=this.toHsl();return r.s+=t/100,r.s=ue(r.s),new C(r)}greyscale(){return this.desaturate(100)}spin(t){const r=this.toHsl(),s=(r.h+t)%360;return r.h=s<0?360+s:s,new C(r)}mix(t,r=50){const s=this.toRgb(),n=new C(t).toRgb(),o=r/100,a={r:(n.r-s.r)*o+s.r,g:(n.g-s.g)*o+s.g,b:(n.b-s.b)*o+s.b,a:(n.a-s.a)*o+s.a};return new C(a)}analogous(t=6,r=30){const s=this.toHsl(),n=360/r,o=[this];for(s.h=(s.h-(n*t>>1)+720)%360;--t;)s.h=(s.h+n)%360,o.push(new C(s));return o}complement(){const t=this.toHsl();return t.h=(t.h+180)%360,new C(t)}monochromatic(t=6){const r=this.toHsv(),{h:s}=r,{s:n}=r;let{v:o}=r;const a=[],c=1/t;for(;t--;)a.push(new C({h:s,s:n,v:o})),o=(o+c)%1;return a}splitcomplement(){const t=this.toHsl(),{h:r}=t;return[this,new C({h:(r+72)%360,s:t.s,l:t.l}),new C({h:(r+216)%360,s:t.s,l:t.l})]}onBackground(t){const r=this.toRgb(),s=new C(t).toRgb(),n=r.a+s.a*(1-r.a);return new C({r:(r.r*r.a+s.r*s.a*(1-r.a))/n,g:(r.g*r.a+s.g*s.a*(1-r.a))/n,b:(r.b*r.a+s.b*s.a*(1-r.a))/n,a:n})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(t){const r=this.toHsl(),{h:s}=r,n=[this],o=360/t;for(let a=1;a<t;a++)n.push(new C({h:(s+a*o)%360,s:r.s,l:r.l}));return n}equals(t){const r=new C(t);return this.format==="cmyk"||r.format==="cmyk"?this.toCmykString()===r.toCmykString():this.toRgbString()===r.toRgbString()}}const vt=(e,t)=>{const r=t.match(/^nh/);r&&(t=t.substring(1));const n=new C(e).toString(t);return r?n.substring(1):n},yt=async e=>{await _e("autoClipboard")&&(console.log("copying to clipboard"),lt(vt(e,await _e("autoClipboardType"))))},wt=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),kt=new Map(wt);class ye extends Error{constructor(r){super(ye._prepareSuperMessage(r));S(this,"name","NonError")}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const Mt=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],we=new WeakSet,St=e=>{we.add(e);const t=e.toJSON();return we.delete(e),t},Be=e=>kt.get(e)??Error,ke=({from:e,seen:t,to:r,forceEnumerable:s,maxDepth:n,depth:o,useToJSON:a,serialize:c})=>{if(!r)if(Array.isArray(e))r=[];else if(!c&&We(e)){const f=Be(e.name);r=new f}else r={};if(t.push(e),o>=n)return r;if(a&&typeof e.toJSON=="function"&&!we.has(e))return St(e);const p=f=>ke({from:f,seen:[...t],forceEnumerable:s,maxDepth:n,depth:o,useToJSON:a,serialize:c});for(const[f,b]of Object.entries(e)){if(b&&b instanceof Uint8Array&&b.constructor.name==="Buffer"){r[f]="[object Buffer]";continue}if(b!==null&&typeof b=="object"&&typeof b.pipe=="function"){r[f]="[object Stream]";continue}if(typeof b!="function"){if(!b||typeof b!="object"){try{r[f]=b}catch{}continue}if(!t.includes(e[f])){o++,r[f]=p(e[f]);continue}r[f]="[Circular]"}}for(const{property:f,enumerable:b}of Mt)typeof e[f]<"u"&&e[f]!==null&&Object.defineProperty(r,f,{value:We(e[f])?p(e[f]):e[f],enumerable:s?!0:b,configurable:!0,writable:!0});return r};function Ct(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:s=!0}=t;return typeof e=="object"&&e!==null?ke({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:s,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function Et(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if(e instanceof Error)return e;if(Tt(e)){const s=Be(e.name);return ke({from:e,seen:[],to:new s,maxDepth:r,depth:0,serialize:!1})}return new ye(e)}function We(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function Tt(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var $t=Object.defineProperty,Rt=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,Ot=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Ue=(e,t,r)=>t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ze=(e,t)=>{for(var r in t||(t={}))Ot.call(t,r)&&Ue(e,r,t[r]);if(qe)for(var r of qe(t))Nt.call(t,r)&&Ue(e,r,t[r]);return e},Ve=(e,t)=>Rt(e,Pt(t)),_t=(e,t,r)=>new Promise((s,n)=>{var o=p=>{try{c(r.next(p))}catch(f){n(f)}},a=p=>{try{c(r.throw(p))}catch(f){n(f)}},c=p=>p.done?s(p.value):Promise.resolve(p.value).then(o,a);c((r=r.apply(e,t)).next())});function jt(e){let t,r={};function s(){Object.entries(r).length===0&&(t==null||t(),t=void 0)}let n=Math.floor(Math.random()*1e4);function o(){return n++}return{sendMessage(a,c,...p){return _t(this,null,function*(){var f,b,E,H;const I={id:o(),type:a,data:c,timestamp:Date.now()},N=(b=yield(f=e.verifyMessageData)==null?void 0:f.call(e,I))!=null?b:I;(E=e.logger)==null||E.debug(`[messaging] sendMessage {id=${N.id}} â”€á…`,N,...p);const L=yield e.sendMessage(N,...p),{res:T,err:$}=L??{err:new Error("No response")};if((H=e.logger)==null||H.debug(`[messaging] sendMessage {id=${N.id}} áŠâ”€`,{res:T,err:$}),$!=null)throw Et($);return T})},onMessage(a,c){var p,f,b;if(t==null&&((p=e.logger)==null||p.debug(`[messaging] "${a}" initialized the message listener for this context`),t=e.addRootListener(E=>{var H,I;if(typeof E.type!="string"||typeof E.timestamp!="number"){if(e.breakError)return;const T=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(E)}`);throw(H=e.logger)==null||H.error(T),T}(I=e==null?void 0:e.logger)==null||I.debug("[messaging] Received message",E);const N=r[E.type];if(N==null)return;const L=N(E);return Promise.resolve(L).then(T=>{var $,oe;return(oe=($=e.verifyMessageData)==null?void 0:$.call(e,T))!=null?oe:T}).then(T=>{var $;return($=e==null?void 0:e.logger)==null||$.debug(`[messaging] onMessage {id=${E.id}} â”€á…`,{res:T}),{res:T}}).catch(T=>{var $;return($=e==null?void 0:e.logger)==null||$.debug(`[messaging] onMessage {id=${E.id}} â”€á…`,{err:T}),{err:Ct(T)}})})),r[a]!=null){const E=Error(`[messaging] In this JS context, only one listener can be setup for ${a}`);throw(f=e.logger)==null||f.error(E),E}return r[a]=c,(b=e.logger)==null||b.log(`[messaging] Added listener for ${a}`),()=>{delete r[a],s()}},removeAllListeners(){Object.keys(r).forEach(a=>{delete r[a]}),s()}}}function Ht(e){return jt(Ve(ze({},e),{sendMessage(t,r){return r==null?Z.runtime.sendMessage(t):Z.tabs.sendMessage(r,t)},addRootListener(t){const r=(s,n)=>t(typeof s=="object"?Ve(ze({},s),{sender:n}):s);return Z.runtime.onMessage.addListener(r),()=>Z.runtime.onMessage.removeListener(r)}}))}const{sendMessage:Ge,onMessage:Me}=Ht();var Ze=14,fe=32747,i={width:0,height:0,screenWidth:0,screenHeight:0,xOffset:0,yOffset:0,overlay:{},options:{cursor:"default",enableColorToolbox:!0,enableColorTooltip:!0,enableRightClickDeactivate:!0},canvas:{},canvasData:{},canvasContext:{},canvasBorders:20,imageData:null,resetCanvas:!0,rects:[],screenshoting:!1,dropperActivated:!1,shortcutsUnsubscribe:()=>{},defaults:function(){i.screenWidth=window.innerWidth,i.screenHeight=window.innerHeight,i.canvas=document.createElement("canvas"),i.resetCanvas=!0,i.rects=[],i.screenshoting=!1,i.width=Math.round(document.documentElement.scrollWidth),i.height=Math.round(document.documentElement.scrollHeight),i.width>fe&&(i.width=fe,console.warn("Page width is larger then maximum Canvas width.")),i.height>fe&&(i.height=fe,console.warn("Page height is larger then maximum Canvas height."))},messageListener:function(){Me("getVersion",()=>Ze),Me("pickupActivate",e=>{if(i.options=e.data,document.readyState==="loading")document.addEventListener("DOMContentLoaded",i.dropperActivate);else return i.dropperActivate();return{status:"ok"}}),Me("pickupDeactivate",()=>{i.dropperDeactivate()})},dropperActivate:function(){var e;return i.dropperActivated?{status:"ok"}:document.body===null?((e=document.documentElement)==null?void 0:e.tagName)==="svg"?{status:"svgRoot"}:{status:"noBody"}:(console.log("dropper: activating page dropper"),console.log(`dropper: debug page at ${Te.runtime.getURL("debug-tab.html")}`),i.defaults(),i.overlay=new tt({width:i.width,height:i.height,enableToolbox:i.options.enableColorToolbox,enableTooltip:i.options.enableColorTooltip,cursor:i.options.cursor}),i.dropperActivated=!0,i.screenChanged(),$e(i.onScrollStop),document.addEventListener("mousemove",i.onMouseMove,!1),document.addEventListener("click",i.onMouseClick,!1),i.options.enableRightClickDeactivate===!0&&document.addEventListener("contextmenu",i.onContextMenu,!1),i.shortcuts(!0),{status:"ok"})},dropperDeactivate:function(){i.dropperActivated&&(i.shortcuts(!1),i.dropperActivated=!1,console.log("dropper: deactivating page dropper"),document.removeEventListener("mousemove",i.onMouseMove,!1),document.removeEventListener("click",i.onMouseClick,!1),i.options.enableRightClickDeactivate===!0&&document.removeEventListener("contextmenu",i.onContextMenu,!1),$e(i.onScrollStop,"stop"),i.overlay.deactivate())},onMouseMove:function(e){i.dropperActivated&&i.tooltip(e)},onMouseClick:function(e){if(console.log("dropper: mouse click"),console.dir(e),!i.dropperActivated)return;e.preventDefault(),i.dropperDeactivate();const t=e.pageX,r=e.pageY,s=i.pickColor(t,r);if(!s){console.log(`picking color at ${t}, ${r} failed`);return}console.log(`dropper: click: ${t},${r}. Color: ${s.rgbhex}`);const n=`#${s.rgbhex}`;Ge("setColor",n),yt(n)},onScrollStop:function(){i.dropperActivated&&(console.log("dropper: scroll stopped"),i.screenChanged())},onScrollStart:function(){i.dropperActivated},shortcutsHandler:function(e){e.code==="Escape"?i.dropperDeactivate():e.code==="KeyU"&&i.screenChanged(!0)},shortcuts:function(e){e==!0?addEventListener("keyup",i.shortcutsHandler):removeEventListener("keyup",i.shortcutsHandler)},onContextMenu:function(e){i.dropperActivated&&(e.preventDefault(),i.dropperDeactivate())},onWindowResize:function(){i.dropperActivated&&(console.log("dropper: window resized or pixelRatio changed"),i.defaults(),i.screenChanged(),i.overlay.resized({width:i.width,height:i.height}))},tooltip:function(e){if(!i.dropperActivated||i.screenshoting)return;const t=e.pageX,r=e.pageY,s=i.pickColor(t,r);s&&(console.log(`dropper: move: ${t},${r}. Color: ${s.rgbhex}`),i.overlay.tooltip({screenWidth:i.screenWidth,screenHeight:i.screenHeight,x:t,y:r,color:s}))},pickColor:function(e,t){const r=Math.round(e),s=Math.round(t);if(i.canvasData===null)return;const n=s*i.canvas.width*4+r*4;let o={r:i.canvasData[n],g:i.canvasData[n+1],b:i.canvasData[n+2],alpha:i.canvasData[n+3]};return o.rgbhex=i.rgbToHex(o.r,o.g,o.b),o.opposite=i.rgbToHex(255-o.r,255-o.g,255-o.b),o},toHex:function(e){if(e===void 0)return console.error(`Wrong color channel value: ${e}. Can't convert to hex.`),"ff";for(var t=e.toString(16);t.length<2;)t="0"+t;return t},rgbToHex:function(e,t,r){return`${i.toHex(e)}${i.toHex(t)}${i.toHex(r)}`},checkCanvas:function(){var t;const e=window.devicePixelRatio;(i.resetCanvas||i.canvas.width!=i.width||i.canvas.height!=i.height)&&(i.canvas=document.createElement("canvas"),i.canvas.width=i.width,i.canvas.height=i.height,console.log(`dropper: creating new canvas ${i.canvas.width}x${i.canvas.height}. Pixel Ratio: ${window.devicePixelRatio}. Page dimension: ${i.width}x${i.height}`),i.canvasContext=i.canvas.getContext("2d"),(t=i.canvasContext)==null||t.scale(1/e,1/e),i.rects=[],i.resetCanvas=!1)},setScreenshoting:function(e){i.screenshoting&&e||(i.screenshoting=e,i.overlay.screenshoting(e))},screenChanged:function(e=!1){if(!i.dropperActivated)return;console.log("dropper: screenChanged"),i.yOffset=Math.round(document.documentElement.scrollTop),i.xOffset=Math.round(document.documentElement.scrollLeft);const t=new me(i.xOffset,i.yOffset,i.screenWidth,i.screenHeight);if(console.group(`comparing rect ${t} with [ ${i.rects.join(", ")} ]`),!e&&i.rects.length>0){for(let r of i.rects)if(r.contains(t)){console.log("dropper: already shoted, skipping"),console.groupEnd();return}}console.groupEnd(),i.setScreenshoting(!0),setTimeout(async()=>{const r=await Ge("capture",void 0);r&&(console.log("got data"),i.imageData=r,i.capture())},50)},updateRects:function(e){if(console.group("updateRects"),i.rects.length===0){i.rects.push(e),console.log("no rects yet, pushing first"),console.groupEnd();return}let t=!1;i.rects.forEach((r,s)=>{console.group(`Trying merge ${e} with ${r}`);let n=e.merge(r);n!==null&&(console.log("merged"),t=!0,i.rects.splice(s,1),i.updateRects(n)),console.groupEnd()}),t||(console.log("dropper: pushing merged to rects"),i.rects.push(e)),console.groupEnd()},capture:function(){console.group("capture"),i.checkCanvas(),console.log("dropper: creating image element and waiting on load");var e=document.createElement("img");e.onload=function(){if(!i.canvas||!i.canvasContext){console.error("Page canvas should be initialized but it isn't.");return}console.log(`dropper: got new screenshot ${e.width}x${e.height}`);const t=new me(i.xOffset,i.yOffset,Math.round(e.width/window.devicePixelRatio),Math.round(e.height/window.devicePixelRatio));i.updateRects(t);const r=window.devicePixelRatio,s=i.xOffset*r,n=i.yOffset*r;console.log(`dropper: drawing image at ${i.xOffset},${i.yOffset} and internally at ${s},${n}`),i.canvasContext.drawImage(e,s,n),i.canvasData=i.canvasContext.getImageData(0,0,i.canvas.width,i.canvas.height).data,i.setScreenshoting(!1)},i.imageData?e.src=i.imageData:console.error("ed: no imageData"),console.groupEnd()},init:function(){console.log(`edropper ${Ze} init`),i.messageListener(),window.onresize=function(){i.onWindowResize()};const e=`(resolution: ${window.devicePixelRatio}dppx)`;matchMedia(e).addEventListener("change",i.onWindowResize)}};const Lt=re(()=>{i.init()});function qt(){}function Ae(e,...t){}const Ft={debug:(...e)=>Ae(console.debug,...e),log:(...e)=>Ae(console.log,...e),warn:(...e)=>Ae(console.warn,...e),error:(...e)=>Ae(console.error,...e)};return(async()=>{try{return await Lt.main()}catch(e){throw Ft.error('The unlisted script "edropper" crashed on startup!',e),e}})()}();
edropper;
