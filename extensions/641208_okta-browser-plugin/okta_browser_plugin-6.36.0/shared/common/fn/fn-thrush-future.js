!function(){const u=Okta.fn.thrushFuture={},r=Okta.Q,a=_okta.groupBy;u.thrushFutureGuard=function({onEnabled:e,onDisabled:r}){const n=t=>{if(void 0!==t)return t()};return"undefined"!=typeof ThrushFuture&&ThrushFuture.Preload?ThrushFuture.Preload.isThrushFutureEnabled().then(function(t){return t?ThrushFuture.Preload.waitForThrushFutureReady().then(function(){return n(e)}):n(r)}):(console.warn('An attempt to call into "thrush-future" was made before "ThrushFuture.Preload" could load.'),Promise.resolve(n(r)))},u.Autofill={isAutofillEnabled(e){return u.thrushFutureGuard({onEnabled:async function(){var t=await ThrushFuture.Glue.Store.get("PLUGIN_SETTINGS"),t=!(!t||!t.orgSettings)&&!!t.orgSettings.pluginIsEnhancedAutofillEnabled;return e?t&&Okta.fn.url.isOktaPersonalAccount(e):t},onDisabled:function(){return!1}})},findAutofillableForms(){return u.thrushFutureGuard({onEnabled:function(){return ThrushFuture.Glue.Autofill.findAutofillableForms()}})},getHighestPriorityLoginForm(){return u.thrushFutureGuard({onEnabled:function(){return ThrushFuture.Glue.Autofill.getHighestPriorityLoginForm()},onDisabled:function(){return null}})},getTOTP(t){return u.thrushFutureGuard({onEnabled:function(){return ThrushFuture.Glue.useAction("thrush-compat/get-totp-from-key-uri")(t)},onDisabled:function(){return null}})}},u.OnTheFly={addApp:function(t){return u.thrushFutureGuard({onEnabled:function(){return ThrushFuture.Glue.useAction("vault/on-the-fly/add-app")({data:t})}})},updateAppPassword:function(e,r){return u.thrushFutureGuard({onEnabled:async function(){var t=await ThrushFuture.Glue.useAction("vault/artifacts/get-by-id")({artifactId:e});return ThrushFuture.Glue.useAction("vault/on-the-fly/update-app-password")({artifact:t,newPassword:r})}})}},u.populateThrushFutureArtifacts=function(){return u.thrushFutureGuard({onEnabled:async function(){const t=ThrushFuture.Glue.useAction("vault/artifacts/populate"),e=ThrushFuture.Glue.useAction("vault/metadata/populate");await r.all([t(),e()])}})},u.searchArtifacts=function(e){return u.thrushFutureGuard({onEnabled:function(){const t=ThrushFuture.Glue.useAction("vault/artifacts/search");return t({query:e}).catch(()=>[])},onDisabled:function(){return[]}})},u.ArtifactType={Payment:"artifact::payment",Address:"artifact::address",Note:"artifact::note",Login:"artifact::login",isArtifactType:function(t){return!(!t||"string"!=typeof t||!t.startsWith("artifact::"))},getAmplitudeArtifactType:function(t){switch(t){case this.Payment:return"creditcard";case this.Address:return"address";case this.Note:return"note";case this.Login:return"login";default:return t}}},u.getArtifactTabs=function(t){return[u.areArtifactCollectionsEnabled(t)&&{id:u.ArtifactType.Login,label:"Apps",sortOrder:0},t&&t.includes("pokta_credit_card_artifact")&&{id:u.ArtifactType.Payment,label:"Payments",sortOrder:0},{id:u.ArtifactType.Address,label:"Addresses",sortOrder:0},{id:u.ArtifactType.Note,label:"Notes",sortOrder:0}].filter(Boolean)},u.areArtifactCollectionsEnabled=function(t){return!!t?.includes("pokta_collections")},u.isArtifactCollectionsMigrationRequired=function(t){return u.thrushFutureGuard({onEnabled:function(){return ThrushFuture.Glue.useAction("vault/metadata/current-user/does-require-tabs-to-artifacts-migration")(t)},onDisabled:function(){return!1}})},u.getArtifactCollections=function(){return u.thrushFutureGuard({onEnabled:function(){return ThrushFuture.Glue.useAction("vault/artifacts/collections/get")().catch(()=>[])},onDisabled:function(){return[]}})},u.getArtifactCollectionsAsLegacyTabs=function(){return u.thrushFutureGuard({onEnabled:function(){return u.getArtifactCollections().then(function(t){return ThrushFuture.Glue.useAction("thrush-compat/legacy-tabs/transform-artifact-collections-to-normalized-tabs")(t).catch(()=>({tabs:[],quickAccessTabs:[],appLinks:[],__is_derived_from_okta_personal_artifact_collections__:!0}))})},onDisabled:function(){return{tabs:[],quickAccessTabs:[],appLinks:[],__is_derived_from_okta_personal_artifact_collections__:!0}}})},u.getNonLoginArtifactLinks=function(t){return r.all([u.getPaymentLinks(t),u.getAddressLinks(t),u.getNoteLinks(t)]).spread(function(...t){return t.flat()})},u.getPaymentLinks=function(t){return u.thrushFutureGuard({onEnabled:function(){return r.all([ThrushFuture.Glue.Store.get("OKTA_DOMAIN"),u.searchArtifacts({$and:[{"data.sections.key":'="widget.creditcard"'},t].filter(Boolean)})]).spread(function(n,t){return t.flatMap(function(r){return r.data.sections.flatMap(function(t){var e=a(t.fields,"key");return{isArtifact:!0,key:r.__artifact_id__+":"+t.id,tabId:r.__collection_ids__??"",artifactId:r.__artifact_id__,artifactUrl:`${n}/enduser/payment/${r.__artifact_id__}/view`,artifactType:u.ArtifactType.Payment,artifactTitle:r.data.title,name:e["field.creditcard.name"]?.[0],number:e["field.creditcard.number"]?.[0],expiration:e["field.creditcard.expiration"]?.[0],securityCode:e["field.creditcard.security-code"]?.[0],postalCode:e["field.creditcard.postal-code"]?.[0],pin:e["field.creditcard.pin"]?.[0]}})})})},onDisabled:function(){return[]}})},u.getAddressLinks=function(t){return u.thrushFutureGuard({onEnabled:function(){return r.all([ThrushFuture.Glue.Store.get("OKTA_DOMAIN"),u.searchArtifacts({$and:[{"data.sections.key":'="widget.address"'},t].filter(Boolean)})]).spread(function(n,t){return t.flatMap(function(r){return r.data.sections.flatMap(function(t){var e=a(t.fields,"key");return{isArtifact:!0,key:r.__artifact_id__+":"+t.id,tabId:r.__collection_ids__??"",artifactId:r.__artifact_id__,artifactUrl:`${n}/enduser/address/${r.__artifact_id__}/view`,artifactType:u.ArtifactType.Address,artifactTitle:r.data.title,line1:e["field.address.line1"]?.[0],line2:e["field.address.line2"]?.[0],line3:e["field.address.line3"]?.[0],city:e["field.address.city"]?.[0],state:e["field.address.state"]?.[0],postalCode:e["field.address.postal-code"]?.[0],country:e["field.address.country"]?.[0]}})})})},onDisabled:function(){return[]}})},u.getNoteLinks=function(t){return u.thrushFutureGuard({onEnabled:function(){return r.all([ThrushFuture.Glue.Store.get("OKTA_DOMAIN"),u.searchArtifacts({$and:[{"data.sections.key":'="widget.note"'},t].filter(Boolean)})]).spread(function(n,t){return t.flatMap(function(r){return r.data.sections.flatMap(function(t){var e=a(t.fields,"key");return{isArtifact:!0,key:r.__artifact_id__+":"+t.id,tabId:r.__collection_ids__??"",artifactId:r.__artifact_id__,artifactUrl:`${n}/enduser/note/${r.__artifact_id__}/view`,artifactType:u.ArtifactType.Note,artifactTitle:r.data.title,body:e["field.note.body"]?.[0]}})})})},onDisabled:function(){return[]}})},u.sendAmplitudeEvent=function(e,r,n){return u.thrushFutureGuard({onEnabled:function(){const t=ThrushFuture.Glue.useAction("amplitude/send-event");return t({eventName:e,properties:r,userPropertyOperations:n})}})},u.generatePassword=function(t){return u.thrushFutureGuard({onEnabled:function(){return ThrushFuture.Glue.useAction("generate-password")(t)},onDisabled:function(){return null}})},u.AmplitudeUserPropertyOperationType={Add:"add"}}();