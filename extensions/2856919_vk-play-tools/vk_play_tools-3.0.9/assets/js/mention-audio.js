const A={OK:1,KeepServiceWorkerAlive:100,OnPageStatusComplete:101,SetSubscriptions:102,OpenOptionPageEvent:104,UpdateChannelEmotesEvent:105,UpdateChannelAndGlobalEmotesEvent:106,ShowNotificationEvent:107,UpdateSubscribedChannels:108,SentEmoteCodes:110,WhenClaimBonusFromMessage:111,SetMessageBonusTimecode:112,GetValueFromStorage:113,GetSubscribedChannelCount:114,GetNotifyAudioParams:115,GetValueArrayFromStorage:116};function b(o){return new Promise((e,s)=>{let t=new FileReader;t.readAsDataURL(o),t.onload=()=>e({data:t.result,name:o.name,type:o.type}),t.onerror=s})}function f(o){return new Promise((e,s)=>{let t=atob(o.data.split(",")[1]),i=new Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);let r=new Uint8Array(i),n=new Blob([r],{type:o.type});e(new File([n],o.name,{type:o.type}))})}function g(o,e){const s=JSON.stringify(e),t=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=o,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)}const m=function(){let o="",e;try{e=new Audio}catch{}return{play:s};async function s(n,a){(n==null?void 0:n.length)>0&&(t(),await i(n),e.volume=a/100,e.play())}function t(){e.paused||(e.pause(),e.currentTime=0)}async function i(n){if(o!=n){if(r(n))e.setAttribute("src",n);else{let a=await y.getAudio();e.src=URL.createObjectURL(a)}o=n}}function r(n){try{return new URL(n),!0}catch{return!1}}}(),y=function(){const o="vkt-audio.db",e="audio",s="mention-audio";let t;return{setAudio:r,getAudio:n};function i(){return new Promise((a,c)=>{let u=indexedDB.open(o,1);u.onerror=c,u.onsuccess=function(){t=u.result,a()},u.onupgradeneeded=function(){t=u.result,t.objectStoreNames.contains(e)||t.createObjectStore(e)}})}async function r(a){return new Promise(async(c,u)=>{let p=await b(a);!t&&await i();let d=t.transaction(e,"readwrite").objectStore(e).put(p,s);d.onsuccess=c,d.onerror=function(){u("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u0430 \u0432 indexdb",d.error)}})}function n(){return new Promise(async(a,c)=>{!t&&await i();let l=t.transaction(e,"readonly").objectStore(e).get(s);l.onsuccess=async function(){a(await f(l.result))},l.onerror=function(){c("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u0430 \u0438\u0437 indexdb",l.error)}})}}();var h={Player:m,Database:y};export{h as M,A as R,f as d,b as f,g as s};
