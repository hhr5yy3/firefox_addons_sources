import{j as a,c as b}from"./cplx-DEt7CUyc.js";import{r as u,R as x}from"./cplx-M4JPizzD.js";import{a as w,s as S,u as R,P as D,b as M}from"./cplx-DSnlyBAv.js";import{c as V,m as E,b as f,d as A,q as _,s as j,B as G,C as $,t as F,u as B,j as C,D as Y,E as z,v as K,F as q,G as H,w as J,x as Q,y as U,z as W,A as X}from"./cplx-CXGk_GMP.js";import{t as Z,i as ee}from"./cplx-CCS6eJc0.js";import{g as te,a as m}from"./cplx-B19A3gYQ.js";const[oe,v]=V({name:"TooltipContext",hookName:"useTooltipContext",providerName:"<TooltipProvider />"}),y=u.forwardRef((t,o)=>{const e=v(),n=w(),r=E(e.getContentProps(),n.getPresenceProps(),t);return n.unmounted?null:a.jsx(f.div,{...r,ref:A(n.ref,o)})});y.displayName="TooltipContent";const ne=t=>t.children(v()),h=u.forwardRef((t,o)=>{const e=v(),n=E(e.getPositionerProps(),t);return w().unmounted?null:a.jsx(f.div,{...n,ref:o})});h.displayName="TooltipPositioner";var re=_("tooltip").parts("trigger","arrow","arrowTip","positioner","content"),O=re.build(),s=j({getTriggerId:t=>{var o;return((o=t.ids)==null?void 0:o.trigger)??`tooltip:${t.id}:trigger`},getContentId:t=>{var o;return((o=t.ids)==null?void 0:o.content)??`tooltip:${t.id}:content`},getArrowId:t=>{var o;return((o=t.ids)==null?void 0:o.arrow)??`tooltip:${t.id}:arrow`},getPositionerId:t=>{var o;return((o=t.ids)==null?void 0:o.positioner)??`tooltip:${t.id}:popper`},getTriggerEl:t=>s.getById(t,s.getTriggerId(t)),getContentEl:t=>s.getById(t,s.getContentId(t)),getPositionerEl:t=>s.getById(t,s.getPositionerId(t)),getArrowEl:t=>s.getById(t,s.getArrowId(t))}),p=G({id:null,prevId:null,setId(t){this.prevId=this.id,this.id=t}});function ie(t,o,e){const n=t.context.id,r=t.context.hasAriaLabel,i=t.hasTag("open"),d=s.getTriggerId(t.context),g=s.getContentId(t.context),c=t.context.disabled,P=te({...t.context.positioning,placement:t.context.currentPlacement});return{open:i,setOpen(l){l!==i&&o(l?"OPEN":"CLOSE")},reposition(l={}){o({type:"POSITIONING.SET",options:l})},getTriggerProps(){return e.button({...O.trigger.attrs,id:d,dir:t.context.dir,"data-expanded":$(i),"data-state":i?"open":"closed","aria-describedby":i?g:void 0,onClick(l){l.defaultPrevented||c||t.context.closeOnClick&&o({type:"CLOSE",src:"trigger.click"})},onFocus(l){l.defaultPrevented||c||t.event.src!=="trigger.pointerdown"&&ee()&&o({type:"OPEN",src:"trigger.focus"})},onBlur(l){l.defaultPrevented||c||n===p.id&&o({type:"CLOSE",src:"trigger.blur"})},onPointerDown(l){l.defaultPrevented||c||t.context.closeOnPointerDown&&n===p.id&&o({type:"CLOSE",src:"trigger.pointerdown"})},onPointerMove(l){l.defaultPrevented||c||l.pointerType!=="touch"&&o("POINTER_MOVE")},onPointerLeave(){c||o("POINTER_LEAVE")},onPointerCancel(){c||o("POINTER_LEAVE")}})},getArrowProps(){return e.element({id:s.getArrowId(t.context),...O.arrow.attrs,dir:t.context.dir,style:P.arrow})},getArrowTipProps(){return e.element({...O.arrowTip.attrs,dir:t.context.dir,style:P.arrowTip})},getPositionerProps(){return e.element({id:s.getPositionerId(t.context),...O.positioner.attrs,dir:t.context.dir,style:P.floating})},getContentProps(){return e.element({...O.content.attrs,dir:t.context.dir,hidden:!i,"data-state":i?"open":"closed",role:r?void 0:"tooltip",id:r?void 0:g,"data-placement":t.context.currentPlacement,onPointerEnter(){o("CONTENT.POINTER_MOVE")},onPointerLeave(){o("CONTENT.POINTER_LEAVE")},style:{pointerEvents:t.context.interactive?"auto":"none"}})}}}var{and:se,not:T}=q;function ae(t){const o=F(t);return B({id:"tooltip",initial:o.open?"open":"closed",activities:["trackFocusVisible"],context:{openDelay:1e3,closeDelay:500,closeOnPointerDown:!0,closeOnEscape:!0,interactive:!1,closeOnScroll:!0,closeOnClick:!0,disabled:!1,...o,currentPlacement:void 0,hasPointerMoveOpened:!1,positioning:{placement:"bottom",...o.positioning}},computed:{hasAriaLabel:e=>!!e["aria-label"]},watch:{disabled:["closeIfDisabled"],open:["toggleVisibility"]},states:{closed:{tags:["closed"],entry:["clearGlobalId"],on:{"CONTROLLED.OPEN":"open",OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],POINTER_LEAVE:{actions:["clearPointerMoveOpened"]},POINTER_MOVE:[{guard:se("noVisibleTooltip",T("hasPointerMoveOpened")),target:"opening"},{guard:T("hasPointerMoveOpened"),target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}]}},opening:{tags:["closed"],activities:["trackScroll","trackPointerlockChange"],after:{OPEN_DELAY:[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],POINTER_LEAVE:[{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose","toggleVisibility"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose","toggleVisibility"]},{target:"closed",actions:["invokeOnClose"]}]}},open:{tags:["open"],activities:["trackEscapeKey","trackScroll","trackPointerlockChange","trackPositioning"],entry:["setGlobalId"],on:{"CONTROLLED.CLOSE":"closed",CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],POINTER_LEAVE:[{guard:"isVisible",target:"closing",actions:["clearPointerMoveOpened"]},{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],"CONTENT.POINTER_LEAVE":{guard:"isInteractive",target:"closing"},"POSITIONING.SET":{actions:"reposition"}}},closing:{tags:["open"],activities:["trackStore","trackPositioning"],after:{CLOSE_DELAY:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]},on:{"CONTROLLED.CLOSE":"closed","CONTROLLED.OPEN":"open",CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],POINTER_MOVE:[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen","toggleVisibility"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}],"CONTENT.POINTER_MOVE":{guard:"isInteractive",target:"open"},"POSITIONING.SET":{actions:"reposition"}}}}},{activities:{trackFocusVisible(e){return Z({root:s.getRootNode(e)})},trackPositioning(e){e.currentPlacement=e.positioning.placement;const n=()=>s.getPositionerEl(e);return m(s.getTriggerEl(e),n,{...e.positioning,defer:!0,onComplete(r){e.currentPlacement=r.placement}})},trackPointerlockChange(e,n,{send:r}){const i=()=>r({type:"CLOSE",src:"pointerlock:change"});return C(s.getDoc(e),"pointerlockchange",i,!1)},trackScroll(e,n,{send:r}){if(!e.closeOnScroll)return;const i=s.getTriggerEl(e);if(!i)return;const g=Y(i).map(c=>C(c,"scroll",()=>{r({type:"CLOSE",src:"scroll"})},{passive:!0,capture:!0}));return()=>{g.forEach(c=>c==null?void 0:c())}},trackStore(e,n,{send:r}){return z(p,()=>{p.id!==e.id&&r({type:"CLOSE",src:"id.change"})})},trackEscapeKey(e,n,{send:r}){if(!e.closeOnEscape)return;const i=d=>{H(d)||d.key==="Escape"&&(d.stopPropagation(),r({type:"CLOSE",src:"keydown.escape"}))};return C(s.getDoc(e),"keydown",i,!0)}},actions:{setGlobalId(e){p.setId(e.id)},clearGlobalId(e){e.id===p.id&&p.setId(null)},invokeOnOpen(e){var n;(n=e.onOpenChange)==null||n.call(e,{open:!0})},invokeOnClose(e){var n;(n=e.onOpenChange)==null||n.call(e,{open:!1})},closeIfDisabled(e,n,{send:r}){e.disabled&&r({type:"CLOSE",src:"disabled.change"})},reposition(e,n){const r=()=>s.getPositionerEl(e);m(s.getTriggerEl(e),r,{...e.positioning,...n.options,defer:!0,listeners:!1,onComplete(i){e.currentPlacement=i.placement}})},toggleVisibility(e,n,{send:r}){queueMicrotask(()=>{r({type:e.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})})},setPointerMoveOpened(e){e.hasPointerMoveOpened=!0},clearPointerMoveOpened(e){e.hasPointerMoveOpened=!1}},guards:{noVisibleTooltip:()=>p.id===null,isVisible:e=>e.id===p.id,isInteractive:e=>e.interactive,hasPointerMoveOpened:e=>!!e.hasPointerMoveOpened,isOpenControlled:e=>!!e["open.controlled"]},delays:{OPEN_DELAY:e=>e.openDelay,CLOSE_DELAY:e=>e.closeDelay}})}K()(["aria-label","closeDelay","closeOnEscape","closeOnPointerDown","closeOnScroll","closeOnClick","dir","disabled","getRootNode","id","ids","interactive","onOpenChange","open.controlled","open","openDelay","positioning"]);const le=(t={})=>{const{getRootNode:o}=J(),{dir:e}=Q(),n={id:u.useId(),dir:e,getRootNode:o,open:t.defaultOpen,"open.controlled":t.open!==void 0,...t},r={...n,onOpenChange:U(t.onOpenChange,{sync:!0})},[i,d]=W(ae(n),{context:r});return ie(i,d,X)},ce=t=>{const[o,{children:e,...n}]=S(t),r=le(n),i=R(E({present:r.open},o));return a.jsx(oe,{value:r,children:a.jsx(D,{value:i,children:e})})},k=u.forwardRef((t,o)=>{const e=v(),n=E(e.getTriggerProps(),t);return a.jsx(f.button,{...n,ref:o})});k.displayName="TooltipTrigger";const N=u.createContext({positioning:{placement:"top"}}),de=N.Provider,pe=({positioning:t,...o})=>a.jsx(de,{value:{positioning:t},children:a.jsx(ce,{unmountOnExit:!1,lazyMount:!0,positioning:t,...o})}),I=({...t})=>a.jsx(ne,{children:({setOpen:o})=>a.jsx(k,{onTouchStart:()=>o(!0),...t})});I.displayName="TooltipTrigger";const L=({className:t,portal:o,...e})=>{const{positioning:n}=u.use(N);if(!n)throw new Error("TooltipContent must be used within a TooltipContext");const r=o?M:x.Fragment;return a.jsx(r,{children:a.jsx(h,{children:a.jsx(y,{className:b("tw-z-50 tw-max-w-[400px] tw-overflow-hidden tw-whitespace-pre-line tw-rounded-md tw-bg-foreground tw-px-2 tw-py-1 tw-font-sans tw-text-xs tw-text-popover tw-shadow-md tw-duration-150 dark:tw-bg-primary-foreground dark:tw-text-popover-foreground","data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out","data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0","data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95","data-[side=bottom]:tw-slide-in-from-top-1 data-[side=left]:tw-slide-in-from-right-1","data-[side=right]:tw-slide-in-from-left-1 data-[side=top]:tw-slide-in-from-bottom-1",t),"data-side":n.placement,...e})})})};L.displayName="TooltipContent";function Ce({children:t,disabled:o,content:e,className:n,positioning:r,defaultOpen:i,portal:d=!0,ref:g}){return a.jsxs(pe,{unmountOnExit:!0,lazyMount:!0,openDelay:0,closeDelay:0,positioning:{placement:"top",...r},disabled:o,defaultOpen:i,children:[a.jsx(I,{asChild:!0,children:a.jsx("span",{ref:g,className:n,children:t})}),!(typeof e=="string"&&e.length===0)&&a.jsx(L,{asChild:!0,portal:d,children:a.jsx("div",{className:"tw-font-medium",children:e})})]})}export{Ce as T};
