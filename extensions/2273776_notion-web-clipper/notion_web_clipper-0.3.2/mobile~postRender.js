(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1140:function(e,t,r){"use strict";var s=r(0),n=r.n(s),a=r(586),i=r(173),o=r(3);class l extends o.a{static renderDivider(){return n.a.createElement(a.a,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:r}=this.props,s=()=>e.isMobile?18:60,a=()=>e.isMobile?18:36;return n.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.contentBackground}},n.a.createElement(i.b,{type:i.a.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:s(),paddingRight:s(),paddingTop:a(),paddingBottom:a()}},t),r&&n.a.createElement("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:s(),paddingRight:s(),paddingTop:16,paddingBottom:16,boxShadow:"0 -1px 0 ".concat(this.theme.regularDividerColor)}},r))}}t.a=l},1145:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(3);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends a.a{renderComponent(){return n.a.createElement("div",{style:this.getStyle(),onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,className:this.props.className},this.props.left&&n.a.createElement("div",{style:this.getLeftStyle()},this.props.left),this.props.icon&&n.a.createElement("div",{style:this.getIconStyle()},this.props.icon),this.renderChildren(),this.props.right&&n.a.createElement("div",{style:this.getRightStyle()},this.props.right))}renderChildren(){return n.a.createElement("div",{style:o({},c.childrenStyle,{overflow:"hidden",textOverflow:this.props.right&&!this.props.isMobile?"clip":"ellipsis"},this.props.childrenStyle)},this.props.children)}getStyle(){const{WindowSizeStore:e}=this.environment,t=o({},this.props.isMobile?c.wrapMobileStyle:c.wrapStyle);if(this.props.isMobile){this.props.disableMobileBorder||(t.boxShadow="0 1px 0 ".concat(this.theme.regularDividerColor)),t.marginBottom=this.props.shouldShowMobileMarginBotton?12:1;const r=this.props.style&&"number"==typeof this.props.style.paddingLeft?this.props.style.paddingLeft:"number"==typeof t.paddingLeft?t.paddingLeft:0;t.paddingLeft=e.getSafePaddingLeftCSS(r)}else this.props.style&&this.props.style.paddingLeft&&(t.paddingLeft=this.props.style&&this.props.style.paddingLeft);return o({},t,{paddingLeft:t.paddingLeft},this.props.style)}getLeftStyle(){return{flexShrink:0,flexGrow:0,borderRadius:3,color:this.theme.mediumTextColor,width:this.props.isMobile?26:22,height:this.props.isMobile?24:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:this.props.icon?0:8}}getIconStyle(){return{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:this.props.isMobile?28:22,height:this.props.isMobile?24:18,marginRight:4}}getRightStyle(){return{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%"}}}c.wrapStyle={display:"flex",alignItems:"center",minHeight:27,fontSize:14,paddingTop:2,paddingBottom:2,paddingLeft:14,paddingRight:14,width:"100%"},c.wrapMobileStyle={display:"flex",alignItems:"center",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,width:"100%",userSelect:"none",WebkitUserSelect:"none"},c.childrenStyle={flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0},t.a=c},1150:function(e,t,r){"use strict";var s=r(0),n=r.n(s),a=r(3),i=r(184),o=r(8),l=r(14),c=r(76);class d extends a.a{renderComponent(){return n.a.createElement(i.a,{style:{display:"flex",marginLeft:-6},className:"notion-print-ignore",href:this.props.href,external:!0,onClick:()=>l.B(this.environment,{from:this.props.analyticsFrom})},n.a.createElement(c.a,{icon:o.a.help,isSmall:!0,isLightGray:!0},this.props.title))}}t.a=d},1220:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(24),i=r(3);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}class p extends i.a{constructor(){super(...arguments),this.styles={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}}}renderComponent(){const e=this.props,{title:t,marginAfter:r,desktopStyle:s,desktopTitleStyle:i}=e,o=d(e,["title","marginAfter","desktopStyle","desktopTitleStyle"]),c=this.styles,p=(r||s)&&l({},r&&c.marginAfter,{},s),u=i?l({},c.desktopTitleStyle,{},i):c.desktopTitleStyle;return n.a.createElement(a.a,Object.assign({isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:p,desktopTitleStyle:u,shouldShowBottomDivider:!1,title:t},o))}}t.a=p},1241:function(e,t,r){"use strict";var s=r(0),n=r.n(s),a=r(60),i=r.n(a),o=r(230),l=r(174),c=r(757),d=r(3),p=r(1455),u=r(619),m=r(768),h=r(775),g=r(491),b=r(1456),f=r(773),y=r(838),S=r(8),v=r(221),w=r(552),E=r(43),P=r(127),O=r(40),M=r(407),k=r(1248),C=r(265),j=r(151),T=r(68),x=r(1);class I extends d.a{constructor(){super(...arguments),this.handlePlusIconMouseEnter=e=>{Object(E.d)({event:e,context:E.a.SidebarMouseMove,callback:()=>{v.d()}})}}renderComponent(){return n.a.createElement("div",{style:this.getStyle(),onMouseEnter:this.handlePlusIconMouseEnter,onMouseMove:this.handlePlusIconMouseEnter},n.a.createElement("div",{style:{position:"relative"}},this.renderMenuButton(),this.renderExpandButton()))}renderMenuButton(){const e=w.a.getTotalUnreadMentionsCount();return n.a.createElement(P.a,{isVisible:!0,animationStyle:{opacity:C.b.state?0:1},render:()=>n.a.createElement("div",{style:I.buttonWrapStyle},n.a.createElement("div",{style:I.buttonStyle},S.a.hamburgerMenu(this.getSvgStyle()),n.a.createElement(k.a,{color:k.a.Color.Red,count:e,style:{position:"absolute",top:-1,right:-4}})))})}renderExpandButton(){return n.a.createElement(P.a,{isVisible:!0,animationStyle:{opacity:C.b.state?1:0},render:()=>n.a.createElement("div",{style:I.buttonWrapStyle},n.a.createElement(O.a,{renderTooltip:()=>n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(x.a,{defaultMessage:"Lock sidebar open",id:"sidebarExpandButton.tooltip"})),n.a.createElement(M.a,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleSidebar"})),placement:O.a.Placement.Right,alignment:O.a.Alignment.Start,delayThreshold:0,originGap:6,render:e=>n.a.createElement(j.a,Object.assign({icon:S.a.doubleChevronRight,style:{position:"relative"},isDarkIconColor:!0,onClick:()=>v.g({environment:this.environment,isExpanded:!0}),className:T.F},e))}))})}getStyle(){return{flexShrink:0,width:48,height:48,margin:-12,padding:12,marginRight:-6}}getSvgStyle(){return{width:16,height:16,fill:this.theme.regularIconColor}}}I.buttonStyle={position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:3},I.buttonWrapStyle={position:"absolute",top:0,left:0,willChange:"opacity"};var B=I,D=r(836),L=r(854),R=r(120),A=r(17),U=r(848),G=r(638),F=r(507),N=r(16);class _ extends N.a{constructor(){super(),this.updateFromElectronState=()=>{const e=R.f.get();void 0!==e&&this.setState({isFullScreen:e})},R.f.addListener(this.updateFromElectronState),this.updateFromElectronState()}getInitialState(){return{isFullScreen:!1}}}var W=new _,V=r(83),z=r(161),H=r(76),q=r(693),Y=r(422),X=r(128),J=r(41),K=r(79),Q=r(91),Z=r(32),$=r(391),ee=r(259),te=r(54),re=r(299),se=r(80),ne=r(14),ae=r(769),ie=r(192),oe=r(37),le=r(1457);class ce extends d.a{constructor(){super(...arguments),this.handleDoubleClickTopbar=e=>{e.target===e.currentTarget&&Object(E.d)({event:e,context:E.a.EditorDoubleClick,callback:R.t})},this.handleStartPublicEdit=()=>{this.environment.currentUser.isLoggedIn()?Object(te.c)({showCancel:!0,keepFocus:!1,message:n.a.createElement(x.a,{defaultMessage:"When you start editing, your name, email and photo will be visible to the page owners.",id:"topbar.startPublicEditDialog.message"}),items:[{label:n.a.createElement(x.a,{defaultMessage:"Continue",id:"topbar.startPublicEditDialog.continueLabel"}),color:"blue",onAccept(){ee.a.setState({editing:!0})}}]}):(Object(se.B)({currentUserId:this.environment.currentUser.id,blockId:this.props.store.id}),J.f({environment:this.environment,url:K.d.login}))},this.handleAttemptPublicComment=()=>{Object(se.B)({currentUserId:this.environment.currentUser.id,blockId:this.props.store.id}),J.f({environment:this.environment,url:K.d.login})},this.forkPageRef=null,this.handleForkPageRef=e=>{this.forkPageRef=e},this.handleOpenQuickFind=()=>{q.b({environment:this.environment,analyticsFrom:"public-page-topbar"})},this.handleOpenForkPage=()=>{Y.d({environment:this.environment,store:this.props.store,originRect:this.getDuplicateClientRect()})},this.handleClickNotion=()=>{const{currentUserRootStore:e,currentUserSettingsStore:t}=A.a.state;ne.nc(this.environment),e&&t?X.n({environment:this.environment,userRootStore:e,userSettingsStore:t}):J.f({environment:this.environment,url:K.d.login})},this.appRenderState=this.createComputedStore(()=>V.a(this.environment))}renderComponent(){return Object(o.a)(e=>n.a.createElement("div",Object.assign({style:this.getWrapStyle()},e),n.a.createElement("div",{style:this.getStyle(),className:T.sb},this.isReady()&&(this.shouldRenderPublicPageTopbar()?this.renderPublicPageTopbar():this.renderDefaultTopbar())),n.a.createElement(m.a,{banners:this.props.banners,isMobile:!1})))}renderPublicPageTopbar(){const{device:e}=this.environment,{store:t,isInvalidPage:r,isElectron:s}=this.props;return n.a.createElement("div",{style:this.getContainerStyle(),onDoubleClick:this.handleDoubleClickTopbar},s&&n.a.createElement(b.a,null),!r&&n.a.createElement(c.a,{store:t,style:ce.breadcrumbStyle,maxAncestorCount:2,ancestorMaxWidth:160,currentPageMaxWidth:240,showCurrentPageControls:!0,isMobile:!1}),n.a.createElement("div",{style:{flexGrow:1,flexShrink:1}}),t.canEdit()&&!ee.a.state.editing&&n.a.createElement(re.a,{onClick:this.handleStartPublicEdit,style:{marginRight:8,padding:"0 8px"}},S.a.pencil(ce.topbarIconStyle),n.a.createElement(x.a,{id:"topbar.publicPage.edit",defaultMessage:"Edit"})),!this.environment.currentUser.isLoggedIn()&&t.canComment()&&!t.canEdit()&&n.a.createElement(re.a,{onClick:this.handleAttemptPublicComment,style:{marginRight:8,padding:"0 8px"}},S.a.speechBubbleThin(ce.topbarIconStyle),n.a.createElement(x.a,{id:"topbar.publicPage.comment",defaultMessage:"Comment"})),n.a.createElement(H.a,{onClick:this.handleOpenQuickFind},S.a.searchThick(ce.topbarIconStyle),n.a.createElement(x.a,{defaultMessage:"Search",id:"topbar.publicPage.searchButton.label"})),Object(z.a)(this.props.store)&&n.a.createElement(H.a,{onClick:this.handleOpenForkPage,ref:this.handleForkPageRef},n.a.createElement(x.a,{defaultMessage:"Duplicate",id:"topbar.publicPage.duplicateButton.label"})),!e.isMobile&&!r&&n.a.createElement(le.a,{store:t,buttonPopupStore:F.a}),n.a.createElement("div",{style:this.getPublicPageTopbarDividerStyle()}),n.a.createElement(H.a,{onClick:this.handleClickNotion},S.a.notionLogo(ce.notionLogoStyle),"Notion"))}renderDefaultTopbar(){const{store:e,isInvalidPage:t,isElectron:r,showSidebarButton:s}=this.props;return n.a.createElement(g.a,{store:e,disableRectangularSelection:!0,disableEditNearestBlock:!0,render:()=>n.a.createElement("div",{style:this.getContainerStyle(),onDoubleClick:this.handleDoubleClickTopbar},s&&n.a.createElement(B,null),r&&n.a.createElement(b.a,null),!t&&n.a.createElement(c.a,{store:e,style:ce.breadcrumbStyle,maxAncestorCount:2,ancestorMaxWidth:160,currentPageMaxWidth:240,showCurrentPageControls:!0,isMobile:!1}),e.canEdit()&&n.a.createElement(u.a,{store:e,isMobile:!1,key:e.id}),!t&&n.a.createElement(p.a,null),n.a.createElement("div",{style:{flexGrow:1,flexShrink:1}}),!t&&this.renderActionButtons())})}renderActionButtons(){const{device:e}=this.environment,{store:t,spaceStore:r,pageVisitStore:s,presenceStore:a,collectionViewStore:i}=this.props,{currentSpaceViewStore:o}=A.a.state;return n.a.createElement("div",{style:ce.actionButtonsWrapStyle},t.isRestricted()&&n.a.createElement(ae.a,{style:{marginRight:10},onClick:()=>{U.a.setState({open:!0})}}),t.canEdit()&&s&&a&&n.a.createElement(h.a,{rootStore:t,pageVisitStore:s,presenceStore:a}),n.a.createElement(y.a,{store:t,buttonPopupStore:U.a}),!e.isMobile&&n.a.createElement(L.a,{blockStore:t,spaceStore:r,buttonPopupStore:G.a}),n.a.createElement(D.a,{store:t,spaceViewStore:o}),!e.isMobile&&n.a.createElement(f.a,{store:t,collectionViewStore:i,buttonPopupStore:F.a}))}getDuplicateClientRect(){if(this.forkPageRef){const e=i.a.findDOMNode(this.forkPageRef);if(e instanceof Element)return e.getBoundingClientRect()}}isReady(){const e=Object(Q.a)(this.props.store),{id:t}=this.environment.currentUser,r=t?ie.a.createChildStore(this.props.store,{table:oe.a,id:t}):void 0,s=!r||r.isReady();return e&&s}shouldRenderPublicPageTopbar(){return!Z.a.isAdminMode&&Object(z.g)(this.environment,this.props.store)}getWrapStyle(){return{width:"100%",maxWidth:"100vw",zIndex:l.p}}getTopbarHeight(){const{device:e}=this.environment;return e.isElectronMac?ce.desktopMacHeight:ce.defaultHeight}getStyle(){return{width:"100%",maxWidth:"100vw",height:this.getTopbarHeight(),opacity:V.p.state?0:1,transition:"\n\t\t\t\topacity ".concat(ce.transitionDuration,"ms,\n\t\t\t\tcolor ").concat(ce.transitionDuration,"ms\n\t\t\t"),position:"relative"}}getContainerStyle(){const{device:e}=this.environment,t=e.isElectronMac&&(!this.appRenderState.state.shouldShowSidebar||!Object($.f)(this.environment))&&!W.state.isFullScreen;return{display:"flex",justifyContent:"space-between",alignItems:"center",position:"absolute",overflow:"hidden",height:this.getTopbarHeight(),left:0,right:0,bottom:0,paddingLeft:t?ce.paddingLeftWhenDesktopSidebarClose:e.isMobile?4:12,paddingRight:e.isMobile?4:10}}getPublicPageTopbarDividerStyle(){return{flex:"none",width:1,height:16,marginLeft:8,marginRight:8,background:this.theme.darkDividerColor}}}ce.defaultHeight=45,ce.desktopMacHeight=37,ce.paddingLeftWhenDesktopSidebarClose=73,ce.transitionDuration=700,ce.actionButtonsWrapStyle={flexGrow:0,flexShrink:0,display:"flex",alignItems:"stretch"},ce.breadcrumbStyle={height:"100%",flexGrow:0,marginRight:8,fontSize:14,minWidth:0},ce.topbarIconStyle={width:14,height:14,marginRight:6},ce.notionLogoStyle={width:18,height:18,marginRight:6};t.a=ce},1244:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(3),i=r(22),o=r(76);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends a.a{renderComponent(){const{device:e}=this.environment;return n.a.createElement("div",{style:c({},this.environment.device.isMobile?this.getMobileStyle():this.getDesktopStyle(),{},this.props.style)},this.props.tabs.map((t,r,s)=>{const a=r===this.props.selectedIndex;return n.a.createElement(n.a.Fragment,{key:r},n.a.createElement("div",{key:r,style:c({},a?this.getSelectedTabStyle():this.getTabStyle())},n.a.createElement(o.a,{style:this.props.tabStyle,onClick:()=>this.props.onChange(r),disabled:this.props.readOnly,mobileFeedback:e.isMobile},t),a&&n.a.createElement("div",{style:this.getBorderStyle()})),this.props.separatorIndexes&&this.props.separatorIndexes.includes(r)&&n.a.createElement("div",{key:"".concat(r,"-separator"),style:this.getSeparatorStyle(),className:"notranslate"},"|"))}),n.a.createElement("div",{style:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:this.theme.mediumTextColor}},this.props.right))}getDesktopStyle(){return{display:"flex",fontSize:14,width:"100%",paddingLeft:8,paddingRight:8,boxShadow:"0 1px 0 ".concat(this.theme.regularDividerColor),position:"relative",zIndex:1}}getSeparatorStyle(){return{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:this.theme.regularDividerColor}}getMobileStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",fontSize:16,width:"100%",paddingTop:2,paddingLeft:this.context.menuType!==i.a.Popup?e.getSafePaddingLeftCSS(16):16,paddingRight:this.context.menuType!==i.a.Popup?e.getSafePaddingRightCSS(16):16,boxShadow:"0 1px 0 ".concat(this.theme.regularDividerColor),position:"relative",zIndex:2,height:44,background:this.theme.popoverBackground}}getTabStyle(){return{paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:this.theme.mediumTextColor}}getSelectedTabStyle(){return c({},this.getTabStyle(),{position:"relative",color:this.theme.regularTextColor})}getBorderStyle(){return{borderBottom:"2px solid ".concat(this.theme.regularTextColor),position:"absolute",bottom:-1,left:8,right:8}}}p.contextTypes=c({},i.c),t.a=p},1245:function(e,t,r){"use strict";var s=r(16);class n extends s.a{getInitialState(){return{open:!1}}}t.a=new n},1248:function(e,t,r){"use strict";r(15),r(11);var s,n=r(0),a=r.n(n),i=r(3),o=r(23),l=r(19);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e[e.Red=0]="Red",e[e.Gray=1]="Gray"}(s||(s={}));class u extends i.a{renderComponent(){const{count:e}=this.props,t=this.props.color===s.Red;if(e&&!(e<=0))return a.a.createElement("div",{style:d({},u.style,{},this.props.style,{},e>99&&{width:void 0,padding:2},{background:t?l.f.red:this.theme.lightIconColor})},this.renderNumber())}renderNumber(){const{count:e}=this.props;if(e)return 1===e?a.a.createElement("span",{style:d({marginBottom:1,marginLeft:-.5,letterSpacing:void 0},this.props.numberStyle)},"1"):e>99?a.a.createElement("span",{style:d({marginBottom:1,letterSpacing:-.5},this.props.numberStyle)},"99+"):e>9?a.a.createElement("span",{style:d({marginBottom:1,letterSpacing:-.5,marginLeft:-.5},this.props.numberStyle)},e):a.a.createElement("span",{style:d({marginBottom:1},this.props.numberStyle)},e)}}u.Color=s,u.style={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:o.a.fontWeight.semibold,borderRadius:3,color:l.f.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"},t.a=u},1278:function(e,t,r){"use strict";var s=r(16);class n extends s.a{getInitialState(){return{contacts:!1}}}t.a=n},1353:function(e,t,r){"use strict";var s=r(0),n=r.n(s),a=r(1),i=r(3),o=r(744),l=r(256),c=r(86);class d extends i.a{renderComponent(){const{device:e}=this.environment;return n.a.createElement("div",{style:this.getSettingsOptionStyle()},n.a.createElement(o.a,null,n.a.createElement(a.a,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"})),n.a.createElement("div",{onClick:this.props.onClick,style:{display:"flex",alignItems:"flex-start",marginBottom:12,cursor:"pointer",width:"100%"}},n.a.createElement("div",{style:{flex:1}},n.a.createElement(c.a,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},n.a.createElement(a.a,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}))),n.a.createElement("div",{style:{marginTop:5}},n.a.createElement(l.a,{on:1===this.props.startDayOfWeek,isAndroid:e.isAndroid}))))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=d},1363:function(e,t,r){"use strict";var s=r(3);class n extends s.a{constructor(){super(...arguments),this.handleTouchStart=e=>{this.touchX=e.touches[0].clientX},this.handleTouchMove=e=>{if(void 0===this.touchX)return;const t=this.props.threshold||120,r=this.touchX-e.touches[0].clientX;r>t&&this.props.onSwipeLeft&&(this.props.onSwipeLeft(),this.touchX=void 0),r<-1*t&&this.props.onSwipeRight&&(this.props.onSwipeRight(),this.touchX=void 0)},this.handleTouchEnd=()=>{this.touchX=void 0},this.handleTouchCancel=()=>{this.touchX=void 0}}renderComponent(){return this.props.render({onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchCancel})}}t.a=n},1444:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(1),i=r(3),o=r(86),l=r(255),c=r(31),d=r(183),p=r(588),u=r(17),m=r(39),h=r(69),g=r(299),b=r(744);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class S extends i.a{constructor(){super(...arguments),this.storeTypes={requestStore:l.a},this.renderResult=(e,t,r)=>n.a.createElement(p.a,{loaded:r,spinnerSize:16,showSpinnerTimeout:600},e||!t?n.a.createElement("div",null,"something went wrong"):this.renderOutput(t)),this.renderOutput=e=>{const t=Boolean(e.expiryTime&&Number(e.expiryTime)>Date.now()),r=t?this.revokeDataAccess:this.grantDataAccess;return n.a.createElement("div",{style:this.getSettingsOptionStyle()},n.a.createElement("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:12,width:"100%"}},n.a.createElement("div",{style:{flex:1}},n.a.createElement(b.a,null,n.a.createElement(a.a,{id:"userDataConsentSettings.header.label",defaultMessage:"Support access"})),n.a.createElement(o.a,{isSmall:!0,isMultiline:!0,style:{marginTop:4,width:"80%"}},t&&e.expiryTime?n.a.createElement(a.a,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:h.a.unix(e.expiryTime/1e3).locale(this.props.intl.locale).format("lll")}}):n.a.createElement(a.a,{id:"userDataConsentSettings.accessNotGranted.label",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."})),n.a.createElement(g.a,{onClick:r,isLarge:!0,style:{marginTop:12,marginBottom:4}},t?n.a.createElement(a.a,{id:"userDataConsentSettings.revokeSupportAccess.button",defaultMessage:"Revoke access"}):n.a.createElement(a.a,{id:"userDataConsentSettings.allowSupportAccess.button",defaultMessage:"Allow support access"})))))},this.fetchUserDataConsentSettings=async e=>{const t=await m.L(this.environment,{});if("failed"===t.type)throw t.error;return t.data},this.grantDataAccess=async()=>{await this.setDataAccessExpiryTime({expiryTime:Date.now()+14*c.a})},this.revokeDataAccess=async()=>{await this.setDataAccessExpiryTime({})},this.setDataAccessExpiryTime=async e=>{const t=await m.bc(this.environment,e);if("success"===t.type&&t.data){const e=this.stores.requestStore.state;this.stores.requestStore.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{result:t.data}))}}}renderComponent(){const{currentUserStore:e}=u.a.state;return e&&n.a.createElement(d.a,{requestStore:this.stores.requestStore,request:{userId:e.id,expiryTime:Date.now()+14*c.a},performRequest:this.fetchUserDataConsentSettings,render:this.renderResult})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=Object(a.g)(S)},1445:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(3),i=r(285),o=r(299),l=r(133),c=r(14),d=r(360),p=r(41),u=r(23),m=r(1);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class b extends a.a{constructor(){super(...arguments),this.handleUpgradeClick=e=>{const{from:t,for:r,onUpgradeClick:s}=this.props;d.a(this.environment,{from:t,for:r}),s&&s(e)},this.handleLearnMoreClick=()=>{const{from:e,learnMoreRoute:t}=this.props;Object(p.i)({environment:this.environment,url:Object(l.a)(t)}),c.B(this.environment,{from:e})}}renderComponent(){return n.a.createElement("section",{style:this.getWrapStyle()},this.renderIcon(),this.renderTitle(),this.renderCaption(),this.renderActions())}renderIcon(){const{icon:e}=this.props;return e(this.getIconStyle())}renderTitle(){const{title:e}=this.props;return n.a.createElement("header",{style:this.getTitleStyle()},e)}renderCaption(){const{caption:e}=this.props;return n.a.createElement("p",{style:this.getCaptionStyle()},e)}renderActions(){return n.a.createElement("footer",null,this.renderUpgradeButton(),this.renderLearnMoreButton())}renderUpgradeButton(){const{upgradeMessage:e}=this.props;return n.a.createElement(i.a,{onClick:this.handleUpgradeClick,isLarge:!0},e||n.a.createElement(m.a,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"}))}renderLearnMoreButton(){return n.a.createElement(o.a,{onClick:this.handleLearnMoreClick,style:this.getLearnMoreButtonStyle()},n.a.createElement(m.a,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"}))}getWrapStyle(){const{device:e}=this.environment;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({fontSize:14},!e.isMobile&&{maxWidth:340})}getIconStyle(){return{width:32,height:"auto",fill:this.theme.mediumIconColor,marginBottom:8}}getTitleStyle(){return{fontWeight:u.a.fontWeight.semibold}}getCaptionStyle(){return{color:this.theme.mediumTextColor,marginTop:4,marginBottom:16}}getLearnMoreButtonStyle(){return{marginLeft:12}}}t.a=b},1446:function(e,t,r){"use strict";var s=r(0),n=r.n(s),a=r(3),i=r(586),o=r(256),l=r(28),c=r(12),d=r(14),p=r(17),u=r(1150),m=r(86),h=r(1),g=r(133),b=r(744);class f extends a.a{renderComponent(){const{device:e}=this.environment,{intl:t}=this.props;return n.a.createElement("div",null,this.renderNotificationHeader(),n.a.createElement("div",{style:this.getSettingsOptionStyle(),className:"notifications-settings"},this.renderSettingsOption(t.formatMessage({id:"notificationSettings.mobilePushNotificationSettings.title",defaultMessage:"Mobile push notifications"}),t.formatMessage({id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app."}),"notify_mobile"),e.isElectron&&n.a.createElement(s.Fragment,null,n.a.createElement(i.a,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"}),t.formatMessage({id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately via your desktop app."}),"notify_desktop")),n.a.createElement(i.a,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.emailNotificationSettings.title",defaultMessage:"Email notifications"}),t.formatMessage({id:"notificationSettings.emailNotificationSettings.description",defaultMessage:"Receive email updates on mentions, comments, and edit digests for all the pages you have followed."}),"notify_email"),this.getSwitchValue("notify_email")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"}),t.formatMessage({id:"notificationSettings.emailAlwaysNotificationSettings.description",defaultMessage:"Receive updates by email, even when you’re active on the app."}),"notify_email_always")),n.a.createElement(i.a,{size:24}),n.a.createElement("div",{style:{marginTop:4}},n.a.createElement(u.a,{title:t.formatMessage({id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about mobile and desktop notifications"}),href:Object(g.a)("guides.notificationSettings"),analyticsFrom:"notifications_settings"}))))}renderNotificationHeader(){const{device:e}=this.environment;return n.a.createElement(b.a,{large:!e.isMobile||void 0,divider:"full"},n.a.createElement(h.a,{id:"notificationSettings.notificationSection.title",defaultMessage:"Notifications"}))}renderSettingsOption(e,t,r){const{device:s}=this.environment,a=this.getSwitchValue(r);return n.a.createElement("div",{onClick:()=>{this.handleToggle(r),"notify_mobile"===r?d.Sd(this.environment,{is_on:!a}):"notify_desktop"===r?d.Qd(this.environment,{is_on:!a}):"notify_email"===r?d.Rd(this.environment,{is_on:!a}):"notify_email_always"===r&&d.Rd(this.environment,{is_on:!a})},style:{display:"flex",width:"100%",alignItems:"center",cursor:"pointer"}},n.a.createElement("div",{style:{flex:1}},n.a.createElement("div",{style:{fontSize:14}},e),n.a.createElement(m.a,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginTop:4}},t)),n.a.createElement(o.a,{on:Boolean(a),disabled:void 0===a,isAndroid:s.isAndroid}))}getSwitchValue(e){const{currentSpaceViewStore:t}=p.a.state;if(t){const r=t.getValue();if(r)return r[e]}}handleToggle(e){const{currentSpaceViewStore:t}=p.a.state;if(t){const r=t.getValue();if(r){const s=r[e];c.d(this.environment,r=>{l.d({store:t,data:{[e]:!s},transaction:r})})}}}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=Object(h.g)(f)},1450:function(e,t,r){"use strict";var s=r(0),n=r.n(s),a=r(1),i=r(8),o=r(47),l=r(53),c=r(3),d=r(22),p=r(55),u=r(299),m=r(24),h=r(744),g=r(86),b=r(827),f=r(828);const y=["system","light","dark"],S=Object(a.f)({systemLabel:{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"},lightLabel:{id:"appearanceSetting.light.label",defaultMessage:"Light"},darkLabel:{id:"appearanceSetting.dark.label",defaultMessage:"Dark"}});class v extends c.a{constructor(){super(...arguments),this.storeTypes={appearanceStore:f.a},this.handleChangeAppearance=e=>{Object(b.b)(this.environment,e),this.stores.appearanceStore.setState({appearanceSetting:e})}}componentDidMount(){const e=Object(b.a)(this.environment);this.stores.appearanceStore.setState({appearanceSetting:e})}renderComponent(){return n.a.createElement("div",null,this.renderHeader(),n.a.createElement("div",{style:this.getSettingsOptionStyle()},n.a.createElement(g.a,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},n.a.createElement(a.a,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."})),this.renderAppearanceButton()))}renderHeader(){const{device:e}=this.environment;return n.a.createElement(h.a,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},n.a.createElement(a.a,{id:"appearanceSettings.title",defaultMessage:"Appearance"}))}renderAppearanceButton(){const{device:e}=this.environment;return n.a.createElement(o.a,{popupType:e.isMobile?o.a.PopupType.SlideUp:o.a.PopupType.Popup,placementToOrigin:o.a.Placement.Right,renderOrigin:e=>n.a.createElement(u.a,Object.assign({},e,{isLarge:!0,style:{marginTop:12,marginBottom:4}}),v.getAppearanceLabel(this.stores.appearanceStore.state.appearanceSetting),i.a.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})),render:t=>{let r;r=e.isMobile?{menuType:d.b.MenuType.Modal,title:n.a.createElement(a.a,{defaultMessage:"Appearance",id:"appearanceSettings.modal.title"}),right:n.a.createElement(a.a,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:t.close}:{menuType:d.b.MenuType.Popup,width:250};const s=y.map(e=>({key:e,action:r=>{this.handleChangeAppearance(e),t.close()},render:(t,r)=>n.a.createElement(l.a,Object.assign({},t,{title:v.getAppearanceLabel(e)}))}));return n.a.createElement(d.b,Object.assign({},r),n.a.createElement(p.a,{type:p.a.Type.Vertical,sections:[{key:"appearance section",render:e=>n.a.createElement(m.a,Object.assign({},e)),items:s}],initialFocus:void 0}))}})}static getAppearanceLabel(e){switch(e){case"light":return n.a.createElement(a.a,Object.assign({},S.lightLabel));case"dark":return n.a.createElement(a.a,Object.assign({},S.darkLabel));case"system":return n.a.createElement(a.a,Object.assign({},S.systemLabel))}}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=v},1451:function(e,t,r){"use strict";var s=r(0),n=r.n(s),a=r(1),i=r(3),o=r(299),l=r(744),c=r(86),d=r(184);class p extends i.a{renderComponent(){return n.a.createElement("div",null,this.renderHeader(),n.a.createElement("div",{style:this.getSettingsOptionStyle()},n.a.createElement(c.a,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},this.renderMessage()),this.renderManageSubscriptionButton()))}renderHeader(){const{device:e}=this.environment;return n.a.createElement(l.a,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},n.a.createElement(a.a,{id:"subscriptionSettings.title",defaultMessage:"Subscription"}))}renderMessage(){const{device:e}=this.environment;return e.isMobile?n.a.createElement(a.a,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your Personal Pro subscription though the App Store.",description:"Description for a button that will take users to Apple's App Store app to edit their subscription."}):n.a.createElement(a.a,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings.",description:"Description for a button that will take users to Apple's App Store app to edit their subscription."})}renderManageSubscriptionButton(){return n.a.createElement(d.a,{href:"https://apps.apple.com/account/subscriptions"},n.a.createElement(o.a,{isLarge:!0,style:{marginTop:12,marginBottom:4}},n.a.createElement(a.a,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"})))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=p},1452:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(611),i=r(3),o=r(40),l=r(14),c=r(30),d=r(34),p=r(19),u=r(140);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends i.a{constructor(){super(...arguments),this.handleClick=e=>{a.a({environment:this.environment,annotation:[this.props.type]}),this.props.onClick&&this.props.onClick(),l.Ld(this.environment,{action:this.props.type})},this.isDisabledStore=this.createComputedStore(()=>this.props.disabled||"editing"!==c.a.state.mode)}renderComponent(){return n.a.createElement(o.a,{renderTooltip:()=>this.props.tooltipLabel,render:e=>n.a.createElement(d.a,Object.assign({style:this.getButtonStyle(),disabled:this.isDisabledStore.state,disabledFeedback:this.isDisabledStore.state,onClick:this.handleClick},e),this.props.children)})}getButtonStyle(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({display:"flex",alignItems:"center",padding:"0 8px",color:Object(u.b)(this.props.type)?p.f.blue:this.theme.regularTextColor},this.props.style)}}t.a=g},1453:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(561),i=r(3),o=r(40),l=r(407),c=r(14),d=r(34),p=r(30),u=r(418),m=r(140),h=r(1),g=r(4);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class S extends i.a{constructor(){super(...arguments),this.handleButtonPopupClick=()=>{a.c({focus:!0}),c.Ld(this.environment,{action:g.b.Link})}}renderComponent(){const e=Object(m.b)(g.b.Link),t=this.isDisabled();return n.a.createElement(o.a,{renderTooltip:()=>n.a.createElement(s.Fragment,null,n.a.createElement("div",null,n.a.createElement(h.a,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip",description:"Prompt for the user to add a URL to link to from the selected text."})),n.a.createElement("div",null,n.a.createElement(l.a,{style:{color:this.theme.mediumInvertedTextColor},name:"openLinkMenu"}))),render:r=>n.a.createElement(d.a,Object.assign({style:f({display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8},e&&{color:this.theme.blueColor},{whiteSpace:"nowrap"},this.props.style),disabled:t,disabledFeedback:t},r,{onClick:this.handleButtonPopupClick}),this.props.children)})}isDisabled(){return!!this.props.disabled||("editing"!==p.a.state.mode&&!u.a.state.open||!!(Object(m.o)(g.b.User)||Object(m.o)(g.b.Bot)||Object(m.o)(g.b.Date)||Object(m.o)(g.b.Page)))}}t.a=Object(h.g)(S)},1454:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(4),i=r(34),o=r(396),l=r(268),c=r(140),d=r(1),p=r(407),u=r(3),m=r(40),h=r(30);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y extends u.a{constructor(){super(...arguments),this.renderMenuTooltip=()=>{const e=this.getThemeColors();return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(d.a,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Create equation"})),n.a.createElement("div",null,n.a.createElement(p.a,{style:e.keyboardShortcut,name:"openEquationMenu"})))},this.handleButtonPopupClick=e=>{const{onClick:t}=this.props;o.b({environment:this.environment,analyticsFrom:"rich_text_menu"}),t&&t(e)},this.isSelected=()=>Object(c.b)(a.b.Equation),this.isDisabled=()=>{const{disabled:e}=this.props;if(e)return!0;if("editing"!==h.a.state.mode&&!l.b.isOpen())return!0;const t={[a.b.User]:a.b.User,[a.b.Page]:a.b.Page,[a.b.Bot]:a.b.Bot,[a.b.Date]:a.b.Date,[a.b.TemporaryPage]:a.b.TemporaryPage};for(const r of Object.values(t))if(Object(c.o)(r))return!0;return!1},this.styles={equationButton:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8}}}renderComponent(){const{style:e,children:t}=this.props,r=this.getThemeColors(),s=this.isDisabled();return n.a.createElement(m.a,{renderTooltip:this.renderMenuTooltip,render:a=>n.a.createElement(i.a,Object.assign({style:b({},this.styles.equationButton,{},r.equationButton,{},e),disabled:s,disabledFeedback:s,onClick:this.handleButtonPopupClick},a),t)})}getThemeColors(){return{equationButton:{color:this.isSelected()?this.theme.blueColor:this.theme.regularTextColor},keyboardShortcut:{color:this.theme.mediumInvertedTextColor}}}}t.a=Object(d.g)(y)},1455:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(2),i=r.n(a),o=r(3),l=r(102),c=r(40),d=r(560),p=r(81),u=r(213),m=r(47),h=r(76),g=r(22),b=r(117),f=r(8),y=r(80),S=r(1);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class P extends o.a{constructor(){super(...arguments),this.fakeSync=!1,this.realSync=!1,this.handleKeyDown=e=>{if(Object(d.a)(this.environment,e,"command+s")){e.preventDefault(),!p.a.state.online||this.fakeSync||u.b.state||(this.fakeSync=!0,this.enqueueForceUpdate(),setTimeout(()=>{this.fakeSync=!1,this.enqueueForceUpdate()},500))}},this.handleStartSync=()=>{p.a.state.syncing&&!this.realSync&&(this.realSync=!0,this.enqueueForceUpdate())},this.handleStartSyncDebounced=i.a.debounce(this.handleStartSync,8e3),this.handleStopSync=()=>{this.realSync&&!p.a.state.syncing&&(this.realSync=!1,this.enqueueForceUpdate())},this.handleStopSyncDebounced=i.a.debounce(this.handleStopSync,200),this.isOnline=this.createComputedStore(()=>p.a.state.online),this.shouldShowLoadingSpinner=()=>(this.fakeSync||this.realSync)&&!u.b.state}willMount(){this.listenForSave(),p.a.addListener(this.handleStartSyncDebounced),p.a.addListener(this.handleStopSyncDebounced)}willUnmount(){this.unlistenForSave(),p.a.removeListener(this.handleStartSyncDebounced),p.a.removeListener(this.handleStopSyncDebounced)}renderComponent(){const{device:e}=this.environment;return n.a.createElement(s.Fragment,null,!e.isMobile&&this.renderDesktopIndicators(),e.isMobile&&this.renderMobileLoadingSpinner(),this.renderErrors())}renderDesktopIndicators(){const{intl:e}=this.props;return this.isOnline.state?this.shouldShowLoadingSpinner()?n.a.createElement(c.a,{renderTooltip:()=>n.a.createElement(S.a,{defaultMessage:"{percent} complete.",id:"connectionState.savePercentangeIndicator.tooltip",values:{percent:u.a.percentComplete(e)}}),render:e=>n.a.createElement("div",Object.assign({style:this.getLoadingStateStyle()},e),n.a.createElement(l.a,{style:{margin:4,marginRight:8}}),n.a.createElement(S.a,{defaultMessage:"Saving…",id:"connectionState.saving.message"}))}):void 0:n.a.createElement(c.a,{renderTooltip:()=>n.a.createElement("div",{style:{width:200}},n.a.createElement(S.a,{defaultMessage:"{numberOfEdits, plural, one {You have {numberOfEdits} edit that will be synced next time you are online.} other {You have {numberOfEdits} edits that will be synced next time you are online.}}",id:"connectionState.offlineBadge.tooltip",values:{numberOfEdits:u.a.state.totalPending}})),textWrap:!0,render:e=>n.a.createElement("div",Object.assign({style:this.getOfflineBadgeStyle()},e),n.a.createElement(S.a,{defaultMessage:"Offline",id:"connectionState.offlineBadge.label"}))})}renderMobileLoadingSpinner(){return n.a.createElement("div",{style:{display:"flex",alignItems:"center",height:"100%",marginLeft:"auto",paddingLeft:4,paddingRight:8,visibility:this.shouldShowLoadingSpinner()?"visible":"hidden"}},n.a.createElement(l.a,{style:{height:18,width:18}}))}renderErrors(){const{device:e}=this.environment;if(u.a.state.transactionQueueError){const e=n.a.createElement(S.a,{defaultMessage:"Cannot save changes",id:"connectionState.errorIndicator.cannotSaveChanges.message"}),t=n.a.createElement(S.a,{defaultMessage:"You can no longer make edits: {errorMessage} Contact support if that doesn’t fix the issue. {usageInfoMessage}",id:"connectionState.errorIndicator.cannotMakeEdits.detailedMessage",values:{errorMessage:u.a.state.transactionQueueError.message,usageInfoMessage:this.renderUsageInfo()}});return this.renderErrorIndicator(e,t)}const t=u.a.state.storageUsageEstimate;if(void 0!==t&&!Object(y.v)(t)){const t=e.isBrowser?n.a.createElement(S.a,{defaultMessage:"Low browser storage",id:"connectionState.errorIndicator.lowStorageOnWebApp.message"}):e.isReactNative?n.a.createElement(S.a,{defaultMessage:"Low app storage",id:"connectionState.errorIndicator.lowStorageOnMobileApp.message"}):n.a.createElement(S.a,{defaultMessage:"Low disk space",id:"connectionState.errorIndicator.lowStorageOnDesktopApp.message"});return this.renderErrorIndicator(t,n.a.createElement(s.Fragment,null,this.renderUsageInfo()," ",n.a.createElement(S.a,{id:"connectionState.errorIndicator.possibleLostEdits.detailedMessagePart2",defaultMessage:"You may lose changes made while offline. Try closing and re-opening your app, and contact support if that doesn’t fix the issue."})))}}renderUsageInfo(){const e=u.a.state.storageUsageEstimate,{intl:t}=this.props;if(e){const r=e.usage/e.quota;return n.a.createElement(S.a,{defaultMessage:"Notion is using {percentageOfStorageBytesUsed} of its available storage on your device ({usedNumberOfBytes} of {totalNumberOfBytes}).",id:"connectionState.errorIndicator.possibleLostEdits.detailedMessagePart1",values:{usedNumberOfBytes:Object(b.c)(e.usage,"bytes",t),totalNumberOfBytes:Object(b.c)(e.quota,"bytes",t),percentageOfStorageBytesUsed:t.formatNumber(r,{style:"percent",maximumFractionDigits:2})}})}}renderErrorIndicator(e,t){const{device:r}=this.environment,s=f.a.collectionDescriptionSmall({marginLeft:6,width:14,height:14,fill:this.getErrorStateStyle().color});return r.isMobile?n.a.createElement(m.a,{popupType:m.a.PopupType.SlideUp,renderOrigin:t=>n.a.createElement(h.a,Object.assign({style:this.getErrorStateStyle()},t),e||s),render:e=>{let{close:r}=e;return n.a.createElement(g.b,{menuType:g.b.MenuType.ActionSheet},n.a.createElement("div",{style:{padding:15,background:this.theme.errorText,color:"white"},onClick:r},t))}}):n.a.createElement(c.a,{renderTooltip:()=>n.a.createElement("div",{style:{width:320,whiteSpace:"normal"}},t),render:t=>n.a.createElement("div",Object.assign({style:this.getErrorStateStyle()},t),e,s)})}listenForSave(){window.addEventListener("keydown",this.handleKeyDown)}unlistenForSave(){window.removeEventListener("keydown",this.handleKeyDown)}getTextStyle(){const{device:e}=this.environment,t=e.isMobile;return{display:"flex",alignItems:"center",marginRight:t?0:18,fontSize:t?12:14}}getOfflineBadgeStyle(){const{device:e}=this.environment,t=e.isMobile;return{display:"flex",alignItems:"center",padding:"0px 6px",height:t?20:24,borderRadius:3,marginRight:t?4:18,whiteSpace:"nowrap",fontSize:t?12:14,color:this.theme.mediumTextColor,border:"1px solid ".concat(this.theme.darkDividerColor)}}getLoadingStateStyle(){return w({},this.getTextStyle(),{color:this.theme.lightTextColor})}getErrorStateStyle(){return w({},this.getTextStyle(),{whiteSpace:"nowrap",color:this.theme.errorText})}}t.a=Object(S.g)(P)},1456:function(e,t,r){"use strict";var s=r(0),n=r.n(s),a=r(8),i=r(41),o=r(3),l=r(407),c=r(40),d=r(331),p=r(14),u=r(151),m=r(1),h=r(34),g=r(45),b=r(71);class f extends o.a{constructor(){super(...arguments),this.renderDesktopButtons=()=>n.a.createElement(d.a,{capture:!0,render:e=>n.a.createElement("div",Object.assign({style:{display:"flex",flexShrink:0}},e),this.renderBackButton(),this.renderForwardButton())}),this.handleBackClick=()=>{p.y(this.environment,{type:"back"}),i.a()},this.handleForwardClick=()=>{p.y(this.environment,{type:"forward"}),i.e()}}renderComponent(){return this.environment.device.isMobile?this.renderMobile():this.renderDesktop()}renderDesktop(){return n.a.createElement(g.c,{style:{background:"transparent",borderRadius:0,boxShadow:"none"},origin:this.renderDesktopButtons(),render:this.renderDesktopButtons,placementToOrigin:g.c.Placement.Center,alignmentToOrigin:g.c.Alignment.Center,open:b.c.state.open,disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:g.c.PopupType.Popup})}renderBackButton(){const{RouterStore:e}=this.environment;return n.a.createElement(c.a,{renderTooltip:()=>n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(m.a,{id:"topbarBrowserHistoryButtons.goBackButton.label",defaultMessage:"Go back"}),n.a.createElement(l.a,{name:"goBack",style:{opacity:.5,marginLeft:4}})),placement:c.a.Placement.Bottom,alignment:c.a.Alignment.Center,originGap:6,render:t=>n.a.createElement(u.a,Object.assign({icon:a.a.historyBack,isDarkIconColor:!0,className:"notion-history-back-button",disabled:!e.canGoBack(),style:{position:"relative"},onClick:this.handleBackClick},t))})}renderForwardButton(){const{RouterStore:e}=this.environment;return n.a.createElement(c.a,{renderTooltip:()=>n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(m.a,{id:"topbarBrowserHistoryButton.goForwardButton.label",defaultMessage:"Go forward"}),n.a.createElement(l.a,{name:"goForward",style:{opacity:.5,marginLeft:4}})),placement:c.a.Placement.Bottom,alignment:c.a.Alignment.Center,originGap:6,render:t=>n.a.createElement(u.a,Object.assign({icon:a.a.historyForward,isDarkIconColor:!0,className:"notion-history-forward-button",disabled:!e.canGoForward(),style:{position:"relative"},onClick:this.handleForwardClick},t))})}renderMobile(){return n.a.createElement(d.a,{capture:!0,render:e=>n.a.createElement("div",Object.assign({style:{display:"flex",flexShrink:0,height:"100%",paddingLeft:4,paddingRight:4}},e),this.renderMobileBackButton(),this.renderMobileForwardButton())})}renderMobileBackButton(){const{RouterStore:e}=this.environment,t=!e.canGoBack();return n.a.createElement(h.a,{onClick:this.handleBackClick,className:"notion-history-back-button",disabled:t,disabledFeedback:!0,mobileFeedback:!0,style:f.mobileButtonStyle},a.a.historyBack({width:16,height:16}))}renderMobileForwardButton(){const{RouterStore:e}=this.environment,t=!e.canGoForward();return n.a.createElement(h.a,{onClick:this.handleForwardClick,className:"notion-history-forward-button",disabled:t,mobileFeedback:!0,disabledFeedback:!0,style:f.mobileButtonStyle},a.a.historyForward({width:16,height:16}))}}f.mobileButtonStyle={position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:32},t.a=f},1457:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(8),i=r(14),o=r(47),l=r(3),c=r(344),d=r(22),p=r(17),u=r(34),m=r(25),h=r(175),g=r(815);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y extends l.a{constructor(){super(...arguments),this.renderOrigin=e=>{const{device:t}=this.environment;return n.a.createElement(u.a,Object.assign({style:this.getButtonStyle(),mobileFeedback:t.isMobile},e),a.a.dots({width:18,height:18}))},this.renderPopup=()=>{const{device:e}=this.environment,{store:t}=this.props,r={environment:this.environment,blocks:[t]};let s;return s=e.isMobile?{menuType:d.b.MenuType.ActionSheet}:{menuType:d.b.MenuType.Popup,width:210,maxHeight:"80vh"},n.a.createElement(d.b,Object.assign({},s),n.a.createElement(c.a,{sections:h.m,onAccept:this.handleAccept,context:r}))},this.handleClick=()=>{m.e(this.environment),i.Sc(this.environment)},this.handleDismiss=()=>{this.props.buttonPopupStore.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props.buttonPopupStore.state,{open:!1}))},this.handleAccept=e=>{const{currentBlockStore:t}=p.a.state;if(t){const r=t.getType();r&&i.p(this.environment,{analyticsName:e.analyticsName,from:"public_topbar_more_menu",block_type:r})}e.closeParentMenu&&this.handleDismiss()}}renderComponent(){const{device:e}=this.environment;return Object(g.a)(this.environment)||e.isMobile?n.a.createElement(o.a,{popupType:e.isMobile?o.a.PopupType.SlideUp:o.a.PopupType.Popup,buttonPopupStore:this.props.buttonPopupStore,renderOrigin:this.renderOrigin,onClick:this.handleClick,render:this.renderPopup,originGap:8}):null}getButtonStyle(){const{device:e}=this.environment;return e.isMobile?{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",marginLeft:8,marginRight:8}:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:3}}}t.a=y},1458:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(394),i=r(3),o=r(40),l=r(407),c=r(8),d=r(14),p=r(30),u=r(34),m=r(1);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f extends i.a{constructor(){super(...arguments),this.handleClick=e=>{const t=p.a.state;if("editing"===t.mode){const e=t.store;a.e({environment:this.environment,textStore:e,blockStore:this.props.blockStore,selection:t.selection})}d.Ld(this.environment,{action:"comment"})}}renderComponent(){const{device:e}=this.environment,t=e.isMobile;return n.a.createElement(o.a,{renderTooltip:()=>n.a.createElement(s.Fragment,null,n.a.createElement("div",null,n.a.createElement(m.a,{defaultMessage:"Comment on selected text",id:"inlineCommentButton.tooltip"})),n.a.createElement("div",null,n.a.createElement(l.a,{style:{color:this.theme.mediumInvertedTextColor},name:"comment"}))),render:e=>n.a.createElement(u.a,Object.assign({style:g({display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"},this.props.style),disabled:this.props.disabled,disabledFeedback:this.props.disabled,onClick:this.handleClick},e),c.a.speechBubbleThin({width:t?18:16,height:t?18:16,marginTop:t?0:1,marginRight:4}),!t&&n.a.createElement(m.a,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"}))})}}t.a=f},1460:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(47),i=r(3),o=r(40),l=r(95),c=r(14),d=r(34),p=r(30),u=r(8),m=r(55),h=r(22),g=r(24),b=r(611),f=r(19),y=r(726),S=r(23),v=r(436),w=r(749),E=r(590),P=r(4),O=r(407),M=r(140),k=r(1),C=r(94);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const I=n.a.Fragment;class B extends i.a{constructor(){super(...arguments),this.storeTypes={ignoreSelectionAreaStore:E.a},this.renderHighlightColorMenuItem=(e,t,r,s)=>({key:t||e,action:()=>{r(),this.menuItemAction(e),s.close()},render:r=>n.a.createElement(y.a,Object.assign({},r,{color:e,overrideDisplayName:t}))}),this.handleToggleHighlightAnnotation=()=>{b.a({environment:this.environment,annotation:["h",v.a.state.color]}),c.Ld(this.environment,{action:"h",color:v.a.state.color})},this.handleButtonPopupClick=e=>{c.Ld(this.environment,{action:"h"})},this.handleClose=()=>{p.a.emit()},this.menuItemAction=e=>{b.b({environment:this.environment,annotationType:"h"}),"default"!==e&&(v.a.setHighlightColor(e),this.handleToggleHighlightAnnotation())}}renderComponent(){const{device:e}=this.environment,{intl:t}=this.props;return n.a.createElement(a.a,{popupType:e.isMobile?a.a.PopupType.SlideUp:a.a.PopupType.Popup,originGap:4,onClose:this.handleClose,onClick:this.handleButtonPopupClick,renderOrigin:t=>n.a.createElement(o.a,{renderTooltip:()=>n.a.createElement(I,null,n.a.createElement("div",null,n.a.createElement(k.a,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})),n.a.createElement("div",null,n.a.createElement(O.a,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleHighlight"}))),render:r=>n.a.createElement(d.a,Object.assign({style:T({display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap"},this.props.style),disabled:this.props.disabled,disabledFeedback:this.props.disabled},Object(l.a)(t,r)),n.a.createElement("div",{style:this.getColorIconStyle()},e.isMobile?n.a.createElement(k.a,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"}):"A"),u.a.chevronDown({width:10,marginLeft:e.isMobile?4:3,fill:"dark"===this.theme.mode?f.f.white:this.theme.lightIconColor}))}),render:r=>{let s;return s=e.isMobile?{menuType:h.b.MenuType.Modal,title:n.a.createElement(k.a,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:n.a.createElement(C.CancelMenuText,null),onClickRight:()=>{r.close()}}:{menuType:h.b.MenuType.Popup},n.a.createElement(h.b,Object.assign({},s),n.a.createElement(w.a,{capture:e.isMobile,store:this.stores.ignoreSelectionAreaStore,ignoreBlockSelection:!1,restoreSelection:!0,focusOffscreenInput:!1,render:e=>{const s=f.b.map(t=>this.renderHighlightColorMenuItem(t,void 0,e,r)),a=[this.renderHighlightColorMenuItem("default",t.formatMessage({defaultMessage:"Default background",id:"highlightSelectionButton.defaultBackground.label"}),e,r),...f.a.map(t=>this.renderHighlightColorMenuItem(t,void 0,e,r))],i=v.a.state.color;return n.a.createElement(m.a,{type:m.a.Type.Vertical,sections:[{key:0,items:[{key:0,action:()=>{e(),this.menuItemAction(i),r.close()},render:e=>n.a.createElement(y.a,Object.assign({},e,{color:i,shortcuts:["toggleHighlight"]}))}],render:e=>n.a.createElement(g.a,Object.assign({},e,{title:n.a.createElement(k.a,{defaultMessage:"Last used",id:"highlightSelectionButton.lastUsedSection.label"}),isTitleUppercase:!0}))},{key:1,items:s,render:e=>n.a.createElement(g.a,Object.assign({},e,{title:n.a.createElement(k.a,{defaultMessage:"Color",id:"highlightSelectionButton.colorSection.label"}),isTitleUppercase:!0}))},{key:2,items:a,render:e=>n.a.createElement(g.a,Object.assign({},e,{title:n.a.createElement(k.a,{defaultMessage:"Background",id:"highlightSelectionButton.backgroundSection.label"}),isTitleUppercase:!0}))}],initialFocus:void 0})}}))}})}getTextSelectionColor(){const e=Object(M.b)("h");return e?P.Q(e):"default"}getColorIconStyle(){const{device:e}=this.environment;return T({display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2},!e.isMobile&&{width:18,fontWeight:S.a.fontWeight.medium,marginBottom:2},{},Object(f.k)(this.getTextSelectionColor(),this.theme))}}t.a=Object(k.g)(B)},1462:function(e,t,r){"use strict";var s=r(16);class n extends s.a{getInitialState(){return{open:!1}}}t.a=new n},1465:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(159),i=r(53),o=r(19),l=r(8),c=r(1220),d=r(1632),p=r(23),u=r(1),m=r(486),h=r(690);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=function(e){const t=n.a.useRef(),r=Object(m.a)(),{isMobile:s}=r,{activeOption:f,items:y}=n.a.useMemo(()=>function(e){const{currentSortBy:t,setSortBy:r,sortOptions:s,selectButton:a}=e;let c=s[0];const d=s.map(e=>{const s=e.key===t;return s&&(c=e),{key:e.key,action:()=>{r(e.key),a&&a.current&&a.current.closeMenu()},render:t=>n.a.createElement(i.a,Object.assign({},t,{title:e.formattedName,right:s&&l.a.check({fill:o.f.blue,width:12,height:12})}))}});return{activeOption:c,items:d}}(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{selectButton:t})),[e,t]),S=Object(h.a)(e=>({selectedTitle:{color:e.mediumTextColor},label:{marginRight:2,fontSize:s?p.a.fontSize.UISmall.mobile:p.a.fontSize.UISmall.desktop,transform:"translateY(0.5px)"},innerButton:{color:e.mediumTextColor,fontWeight:p.a.fontWeight.medium,fontSize:s?p.a.fontSize.UISmall.mobile:p.a.fontSize.UISmall.desktop,height:20,padding:"2px 4px",marginRight:1,transform:"translateY(0.5px)"},menu:{minWidth:200}}),[s]),v=s?n.a.createElement(u.a,{id:"search.sort.sortMenuTitle",defaultMessage:"Sort By"}):void 0;return n.a.createElement(d.a,{ref:e=>{e&&(t.current=e)},alignmentToOrigin:a.a.Start,selectedTitle:n.a.createElement("div",{style:S.selectedTitle},f.formattedName),label:n.a.createElement(u.a,{id:"search.sort.sortButtonPrefixLabel",defaultMessage:"Sort:",description:"Will be displayed next to a sortOrder"}),renderMenuSections:()=>[{key:"searchSortOrder",render:e=>n.a.createElement(c.a,Object.assign({},e,{title:v,desktopStyle:S.menu,disableDesktopPadding:!1})),items:y}],labelStyle:S.label,innerButtonStyle:S.innerButton})}},1631:function(e,t,r){"use strict";r(15),r(11);var s,n=r(2),a=r.n(n),i=r(0),o=r.n(i),l=r(849),c=r(37),d=r(288),p=r(128),u=r(271),m=r(16);!function(e){e[e.Members=0]="Members",e[e.Groups=1]="Groups",e[e.Guests=2]="Guests"}(s||(s={}));class h extends m.a{getInitialState(){return{currentTab:s.Members,limitMembers:!0,limitGuests:!0,membersFilter:"",guestsFilter:"",groupsFilter:"",groupNameInputValue:"",upsellModalOpen:!1}}}var g=h,b=r(192),f=r(3),y=r(586),S=r(41),v=r(27),w=r(82),E=r(47),P=r(55),O=r(22),M=r(287),k=r(24),C=r(155),j=r(54),T=r(39),x=r(84),I=r(67),B=r(12),D=r(40),L=r(154),R=r(14),A=r(114),U=r(299),G=r(76),F=r(8),N=r(89),_=r(119),W=r(1),V=r(10);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Y=Object(W.f)({removingGuest:{id:"guestPagesPopup.removeGuest.updatingMessage",defaultMessage:"Updating…"},addingMember:{id:"guestPagesPopup.addMemberPermission.updatingMessage",defaultMessage:"Updating…"}});class X extends f.a{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:w.a},this.renderPopup=()=>{const{device:e}=this.environment,{store:t,guest:r}=this.props,s=t.canAdmin(),n=r.guestPageIds.map(e=>{const r=v.a.createChildStore(t,{table:V.a,id:e});return{key:e,render:e=>o.a.createElement(M.a,Object.assign({},e,{store:r,placeholder:o.a.createElement(W.a,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})})),action:()=>{const r=v.a.createChildStore(t,{table:V.a,id:e}),s=Object(I.a)({store:r,fullyQualified:!1});S.f({environment:this.environment,url:s,metaClick:!0})}}});let a,i;return a=e.isMobile?{menuType:O.b.MenuType.ActionSheet}:{menuType:O.b.MenuType.Popup,width:300},Object(N.J)(this.environment)&&(i=o.a.createElement(D.a,{renderTooltip:()=>this.isSubscribed()?o.a.createElement(W.a,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):o.a.createElement(W.a,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>o.a.createElement(U.a,Object.assign({isLarge:!0,onClick:this.handleConvertToMemberClick},e),this.isSubscribed()?o.a.createElement(W.a,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):o.a.createElement(W.a,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"}))})),o.a.createElement(O.b,Object.assign({},a),s&&o.a.createElement(L.a,{title:o.a.createElement("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"}},i,o.a.createElement(D.a,{renderTooltip:()=>o.a.createElement(W.a,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>o.a.createElement(U.a,Object.assign({isLarge:!0,isRed:!0,style:{marginLeft:i?8:0},onClick:this.handleRemoveClick},e),o.a.createElement(W.a,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"}))}))}),s&&o.a.createElement(C.a,{title:o.a.createElement(W.a,{id:"guestPagesPopup.guestAccessiblePagesCaption",defaultMessage:"This guest can access these pages"})}),o.a.createElement(P.a,{type:P.a.Type.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>o.a.createElement(k.a,Object.assign({},e)),items:n}]}))},this.handleRemoveClick=()=>{j.c({showCancel:!0,keepFocus:!1,message:o.a.createElement(W.a,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:o.a.createElement(W.a,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{const{guest:e,store:t}=this.props;this.stores.buttonPopupStore.setState(H({},this.stores.buttonPopupStore.state,{open:!1})),A.b({message:Y.removingGuest}),"success"===(await T.Ob(this.environment,{userIds:[e.userId],spaceId:t.id,removePagePermissions:!0,revokeUserTokens:!1})).type&&(await x.e(this.environment),R.Ad(this.environment)),A.a()}}]})},this.handleConvertToMemberClick=async()=>{const e=B.c(this.environment),{store:t,guest:r,isSubscribed:s}=this.props,n=d.f({environment:this.environment,store:t,permissionItems:[{type:"user_permission",role:s?"read_and_write":"editor",user_id:r.userId}],transaction:e});B.b({environment:this.environment,transaction:e}),this.stores.buttonPopupStore.setState(H({},this.stores.buttonPopupStore.state,{open:!1})),A.b({message:Y.addingMember});try{await n,await x.e(this.environment),R.X(this.environment,{member_user_id:r.userId})}finally{A.a()}}}renderComponent(){const{device:e}=this.environment,{buttonPopupStore:t}=this.stores,{store:r,guest:s}=this.props;return s.guestPageIds.map(e=>{v.a.createChildStore(r,{table:V.a,id:e}).getValue()}),o.a.createElement(E.a,{popupType:e.isMobile?E.a.PopupType.SlideUp:E.a.PopupType.Popup,renderOrigin:e=>o.a.createElement(G.a,Object.assign({},e),o.a.createElement(W.a,{id:"guestPagesButton.label",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:s.guestPageIds.length}}),F.a.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})),buttonPopupStore:t,render:this.renderPopup})}isSubscribed(){const{data:e}=_.a.state;return Boolean(e&&Object(N.D)(e))}}var J=Object(W.g)(X),K=r(153),Q=r(696),Z=r(1140),$=r(86),ee=r(23);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ne extends f.a{renderComponent(){const{columns:e,rows:t}=this.props;return o.a.createElement("table",{style:this.getStyle()},o.a.createElement("thead",null,o.a.createElement("tr",{style:ne.headerRowStyle},e.map(e=>o.a.createElement("th",{key:e.key,style:re({},ne.tableHeaderStyle,{},e.style)},o.a.createElement($.a,{isSmall:!0},e.header))))),o.a.createElement("tbody",null,t.map(t=>o.a.createElement("tr",{key:t.key,style:this.getRowStyle()},t.columns.map((t,r)=>{const s=e[r];return o.a.createElement("td",{key:s.key,style:ne.cellStyle},t)})))))}getStyle(){return{width:"100%",fontSize:13,borderTop:"1px solid ".concat(this.theme.regularDividerColor),borderBottom:"1px solid ".concat(this.theme.regularDividerColor)}}getRowStyle(){return{width:"100%",borderTop:"1px solid ".concat(this.theme.regularDividerColor)}}}ne.cellPaddingTopBottom=8,ne.headerRowStyle={height:32,width:"100%"},ne.tableHeaderStyle={fontWeight:ee.a.fontWeight.regular,textAlign:"left",paddingTop:ne.cellPaddingTopBottom,paddingBottom:ne.cellPaddingTopBottom},ne.cellStyle={paddingTop:ne.cellPaddingTopBottom,paddingBottom:ne.cellPaddingTopBottom};var ae=ne,ie=r(1244),oe=r(58),le=r(505),ce=r(90);class de extends m.a{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}var pe=de,ue=r(45),me=r(131),he=r(515),ge=r(183),be=r(171),fe=r(589),ye=r(506),Se=r(127),ve=r(110),we=r(451),Ee=r(43),Pe=r(180),Oe=r(103),Me=r(857),ke=r(306),Ce=r(113),je=r(285),Te=r(151),xe=r(695),Ie=r(17),Be=r(208),De=r(747);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ue extends f.a{constructor(){super(...arguments),this.storeTypes={spacePermissionGroupStore:pe,actionMenuButtonPopupStore:w.a,addMemberButtonPopupStore:w.a,autocompleteStore:he.a,mouseStore:ve.a},this.renderUser=e=>{const{store:t,group:r,disabled:s}=this.props;return o.a.createElement("div",{key:e.id,style:{display:"flex",alignItems:"center"}},o.a.createElement(le.a,{userValue:e,style:{paddingRight:6,minHeight:34,lineHeight:1.2,width:"100%"},avatarSize:24}),!s&&o.a.createElement(G.a,{onClick:async()=>{if(await j.a({message:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})})){const s=(r.user_ids||[]).filter(t=>t!==e.id),n=Re({},r,{user_ids:s});B.d(this.environment,e=>{p.v({spaceStore:t,group:n,transaction:e})}),R.ld(this.environment)}}},o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})))},this.renderActionMenu=()=>{const e={key:"action_menu",render:e=>o.a.createElement(k.a,Object.assign({},e)),items:[{key:"rename",render:e=>o.a.createElement(me.a,Object.assign({},e,{title:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})})),action:this.handleRename},{key:"delete",render:e=>o.a.createElement(me.a,Object.assign({},e,{title:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})),action:this.handleDelete}]};return o.a.createElement(O.b,{menuType:O.b.MenuType.Popup},o.a.createElement(P.a,{type:P.a.Type.Vertical,initialFocus:0,sections:[e],onAccept:()=>{this.stores.actionMenuButtonPopupStore.reset()}}))},this.renderAddMemberMenu=()=>{const{store:e}=this.props,{userInputValue:t,temporaryUserIds:r}=this.stores.spacePermissionGroupStore.state,s={request:{query:t,temporaryUserIds:this.stores.spacePermissionGroupStore.state.temporaryUserIds},performRequest:async e=>{let{query:t,temporaryUserIds:r}=e;const{group:s}=this.props,n=s.user_ids||[];return(await be.l({environment:this.environment,query:t,membersOnly:!0})).filter(e=>n.indexOf(e.id)<0&&r.indexOf(e.id)<0).slice(0,20)},render:this.renderAddMemberResults},n=r.map(t=>{const s=e.getRecordValue({table:c.a,id:t});return o.a.createElement(Be.b,{key:t,userValue:s,format:Be.b.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const e=r.filter(e=>e!==t);this.stores.spacePermissionGroupStore.setState(Re({},this.stores.spacePermissionGroupStore.state,{temporaryUserIds:e}))},shouldShrink:!0,isSingle:!1})});return o.a.createElement(O.b,{menuType:O.b.MenuType.Popup,tokenInputHeader:!0,header:o.a.createElement(ye.a,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:ye.a.Format.Group,tokens:n,placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:this.handleTokenInputMenuItemRemoveLastToken,value:t,onChange:this.handleTokenInputMenuItemChange,right:o.a.createElement(je.a,{isLarge:!0,onClick:this.handleAddDoneClick},o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"}))})},o.a.createElement(ge.a,Object.assign({},s)))},this.renderAddMemberResults=(e,t)=>{const{store:r}=this.props,s=t||[],{temporaryUserIds:n}=this.stores.spacePermissionGroupStore.state,a=s.map(e=>{let{id:t}=e;return t});if(0===a.length)return o.a.createElement(k.a,null,o.a.createElement(C.a,{title:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})}));{const e={key:"user_menu",render:e=>o.a.createElement(k.a,Object.assign({},e)),items:a.map(e=>{const t=b.a.createChildStore(r,{table:c.a,id:e}).getValue();return{key:e,render:e=>o.a.createElement(fe.a,Object.assign({},e,{user:t})),action:()=>{const t=[...n,e];this.stores.spacePermissionGroupStore.setState(Re({},this.stores.spacePermissionGroupStore.state,{temporaryUserIds:t,userInputValue:""}))}}})};return o.a.createElement(P.a,{type:P.a.Type.Vertical,initialFocus:0,sections:[e]})}},this.handleMouseEnter=e=>{this.stores.mouseStore.setState(Re({},this.stores.mouseStore.state,{mouseEntered:!0}))},this.handleMouseLeave=e=>{this.stores.mouseStore.setState(Re({},this.stores.mouseStore.state,{mouseEntered:!1}))},this.handleMouseDown=e=>{Object(Pe.a)(e.target,e=>e&&e.classList&&e.classList.contains(Ue.dragHandleClass))||Object(Ee.c)(e)},this.handleIconChange=e=>{const{store:t,group:r}=this.props,s=Re({},r,{icon:e});B.d(this.environment,e=>{p.v({spaceStore:t,group:s,transaction:e})}),R.od(this.environment,{is_emoji:Object(ke.a)(e)})},this.handleRename=()=>{const{group:e,spacePermissionsSettingsStore:t}=this.props;t.setState(Re({},t.state,{editingNameGroupId:e.id,groupNameInputValue:e.name||""})),this.stores.actionMenuButtonPopupStore.setState(Re({},this.stores.actionMenuButtonPopupStore.state,{open:!1})),R.md(this.environment)},this.handleDelete=async()=>{const{store:e,group:t}=this.props;if(this.stores.actionMenuButtonPopupStore.setState(Re({},this.stores.actionMenuButtonPopupStore.state,{open:!1})),await j.a({message:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})})){const r=B.c(this.environment);await p.g({environment:this.environment,spaceStore:e,group:t,transaction:r}),B.b({environment:this.environment,transaction:r}),R.kd(this.environment)}},this.handleNameChange=e=>{this.props.spacePermissionsSettingsStore.setState(Re({},this.props.spacePermissionsSettingsStore.state,{groupNameInputValue:e}))},this.handleNameCancel=()=>{const{spacePermissionsSettingsStore:e}=this.props;e.setState(Re({},e.state,{editingNameGroupId:void 0,groupNameInputValue:""}))},this.handleNameAccept=()=>{const{store:e,group:t,spacePermissionsSettingsStore:r}=this.props,{editingNameGroupId:s,groupNameInputValue:n}=r.state;if(s===t.id){if(n!==t.name){const r=Re({},t,{name:n});B.d(this.environment,t=>{p.v({spaceStore:e,group:r,transaction:t})})}r.setState(Re({},r.state,{editingNameGroupId:void 0,groupNameInputValue:""}))}},this.handleTokenInputMenuItemRemoveLastToken=()=>{const{temporaryUserIds:e}=this.stores.spacePermissionGroupStore.state,t=e.slice(0,e.length-1);this.stores.spacePermissionGroupStore.setState(Re({},this.stores.spacePermissionGroupStore.state,{temporaryUserIds:t}))},this.handleTokenInputMenuItemChange=e=>{const t=e.target.value,{spacePermissionGroupStore:r}=this.stores,{extractedEmails:s,newInputValue:n}=Object(xe.a)(t),{currentSpaceStore:i}=Ie.a.state,{data:o}=_.a.state;if(!o||!i)return;const l=Object(N.v)(o).map(e=>e.userId),d=a.a.compact(l.map(e=>b.a.createChildStore(i,{table:c.a,id:e}).getValue())).filter(e=>s.includes(e.email)&&!r.state.temporaryUserIds.includes(e.id));r.setState(Re({},r.state,{temporaryUserIds:[...r.state.temporaryUserIds,...d.map(e=>e.id)],userInputValue:n}))},this.handleAddDoneClick=()=>{const{store:e,group:t}=this.props,{temporaryUserIds:r}=this.stores.spacePermissionGroupStore.state,s=t.user_ids||[],n=Re({},t,{user_ids:a.a.union(s,r)});B.d(this.environment,t=>{p.v({spaceStore:e,group:n,transaction:t})}),this.stores.spacePermissionGroupStore.reset(),this.stores.addMemberButtonPopupStore.setState(Re({},this.stores.addMemberButtonPopupStore.state,{open:!1})),R.id(this.environment,{add_member_count:r.length})},this.handleAddMemberButtonPopupClose=()=>{this.stores.spacePermissionGroupStore.reset()},this.handleShowMoreClick=()=>{this.stores.spacePermissionGroupStore.setState(Re({},this.stores.spacePermissionGroupStore.state,{limitUsers:!1}))}}renderComponent(){const{store:e,group:t,spacePermissionsSettingsStore:r,disabled:s}=this.props,{groupsFilter:n}=r.state,{limitUsers:i}=this.stores.spacePermissionGroupStore.state,l=De.a({intl:this.props.intl,group:t}),{countRemainingUsers:d,totalNumberMembers:p,limitedUserValues:m}=De.b({group:t,spaceStore:e,limit:i&&!n?Ue.defaultLimit:void 0}),h=a.a.sortBy(m,e=>Object(c.e)(e)),g=n?Object(u.b)(n,h,e=>Object(c.e)(e)):h,{mouseEntered:b}=this.stores.mouseStore.state,f=b&&!Ce.a.state.isKeyboardMode&&!s,{editingNameGroupId:S,groupNameInputValue:v}=r.state;return o.a.createElement("div",{style:{marginBottom:36,fontSize:14,width:"100%"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown},o.a.createElement("div",{style:{display:"flex"}},!s&&o.a.createElement(Se.a,{isVisible:!0,animationStyle:{opacity:f?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>o.a.createElement("div",{style:{marginLeft:-24,marginRight:4},className:Ue.dragHandleClass},o.a.createElement(we.a,{hideClickMessage:!0}))}),s?o.a.createElement(ce.a,{disabled:!0,icon:t.icon?{table:e.table,id:e.id,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:l,style:{marginLeft:3,marginRight:3}}):o.a.createElement(ce.a,{disabled:!1,bucket:"public",icon:t.icon?{table:e.table,id:e.id,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:l,onChange:this.handleIconChange,style:{marginLeft:3,marginRight:3}}),S===t.id?o.a.createElement(Oe.a,{capture:!0,onEsc:this.handleNameCancel},o.a.createElement(Me.a,{disabled:s,textarea:!1,style:{marginLeft:4,cursor:"text",fontWeight:ee.a.fontWeight.semibold},placeholderStyle:{marginLeft:4,cursor:"text",color:this.theme.lightTextColor,fontWeight:ee.a.fontWeight.semibold},placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:v,onChange:this.handleNameChange,onBlur:this.handleNameAccept,onSubmit:this.handleNameAccept})):o.a.createElement(G.a,{isSmall:!0,style:{fontWeight:ee.a.fontWeight.semibold,marginLeft:-2,marginTop:-1},onClick:this.handleRename,disabled:s,className:"notranslate"},l),p>0&&o.a.createElement("div",{style:{alignItems:"center",marginLeft:8,color:this.theme.mediumTextColor},className:"notranslate"},o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:p}})),o.a.createElement("div",{style:{flexGrow:1}}),!s&&o.a.createElement(E.a,{popupType:ue.b.Popup,render:this.renderActionMenu,buttonPopupStore:this.stores.actionMenuButtonPopupStore,renderOrigin:e=>o.a.createElement(Te.a,Object.assign({icon:F.a.dots},e))})),o.a.createElement(y.a,{size:12}),g.map(this.renderUser),d>0&&o.a.createElement("div",null,o.a.createElement(G.a,{isGray:!0,style:{marginTop:4},onClick:this.handleShowMoreClick},o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:d}}))),!s&&o.a.createElement(E.a,{popupType:ue.b.Popup,render:this.renderAddMemberMenu,buttonPopupStore:this.stores.addMemberButtonPopupStore,onClose:this.handleAddMemberButtonPopupClose,style:{width:400},renderOrigin:e=>o.a.createElement("div",null,o.a.createElement(G.a,Object.assign({isGray:!0,icon:F.a.plus,style:{marginTop:4}},e),o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})))}))}}Ue.dragHandleClass="drag_handle",Ue.defaultLimit=10;var Ge=Object(W.g)(Ue),Fe=r(157),Ne=r(81),_e=r(300),We=r(487),Ve=r(257),ze=r(1150),He=r(210),qe=r(256),Ye=r(251),Xe=r(102),Je=r(133),Ke=r(744),Qe=r(1445),Ze=r(29),$e=r(170),et=r(116);function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class nt extends f.a{constructor(){super(...arguments),this.storeTypes={spacePermissionsSettingsStore:g},this.renderSpaceGroup=e=>{const{store:t}=this.props,{spacePermissionsSettingsStore:r}=this.stores;return o.a.createElement(Ge,{key:e.id,store:t,group:e,spacePermissionsSettingsStore:r,disabled:!this.canEditGroups()})},this.handleUpdateClick=()=>{const e=Object(W.f)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});A.b({message:e.updatingPermissions})},this.handleUpdateComplete=()=>{A.a()},this.handleTabClick=e=>{const t=e;switch(t){case s.Members:R.pd(this.environment,{tab:"members"});break;case s.Groups:R.pd(this.environment,{tab:"groups"});break;case s.Guests:R.pd(this.environment,{tab:"guests"});break;default:Object(Ze.e)(t)}this.stores.spacePermissionsSettingsStore.setState(rt({},this.stores.spacePermissionsSettingsStore.state,{currentTab:e}))},this.handleCreateGroupClick=()=>{B.d(this.environment,e=>{const t=p.d({spaceStore:this.props.store,transaction:e});t&&this.stores.spacePermissionsSettingsStore.setState(rt({},this.stores.spacePermissionsSettingsStore.state,{editingNameGroupId:t.id,groupNameInputValue:""}))}),R.jd(this.environment)},this.handleGroupReorder=e=>{const t=this.props.store.getValue();if(t){const r=t.permission_groups||[],s=a.a.compact(e.map(e=>r.find(t=>t.id===e)));B.d(this.environment,e=>{p.w({spaceStore:this.props.store,groups:s,transaction:e})})}R.nd(this.environment)},this.handleFilterChange=e=>{this.stores.spacePermissionsSettingsStore.setState(rt({},this.stores.spacePermissionsSettingsStore.state,{groupsFilter:e.target.value}))},this.handleMembersShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState(rt({},this.stores.spacePermissionsSettingsStore.state,{limitMembers:!1}))},this.handleGuestsShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState(rt({},this.stores.spacePermissionsSettingsStore.state,{limitGuests:!1}))},this.handleInviteLinkClick=()=>{const e=!this.getInviteLinkEnabled();R.Zb(this.environment,{enabled:e}),B.d(this.environment,t=>{p.t({transaction:t,spaceStore:this.props.store,inviteLinkEnabled:Boolean(e)})})},this.handleMemberPermissionRoleChange=async(e,t,r)=>{const{store:s}=this.props,n=this.environment.currentUser.id;if(e.userId===n&&"none"===t){await p.l({environment:this.environment,spaceId:s.id,userSettingsStore:r})&&_e.a.setState(rt({},_e.a.state,{open:!1}))}else this.handleUpdateClick(),"none"===t?(await T.Ob(this.environment,{userIds:[e.userId],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!0}),await x.e(this.environment)):await B.d(this.environment,r=>d.f({environment:this.environment,store:s,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:r})),this.handleUpdateComplete()}}renderComponent(){const{store:e,isMobile:t}=this.props;if(!Ne.a.state.online)return this.renderOfflineMessage();const{data:r}=_.a.state;if(!r)return this.renderLoadingSpinner();const s=N.v(r);if(!a.a.every(s.map(t=>b.a.createChildStore(e,{table:c.a,id:t.userId}).isReady())))return this.renderLoadingSpinner();const n=s.filter(l.c),d=s.filter(l.b),{currentTab:p}=this.stores.spacePermissionsSettingsStore.state;if(t)return o.a.createElement(i.Fragment,null,this.canAdmin()&&o.a.createElement(k.a,{shouldShowBottomDivider:!0},this.renderMobileInviteButton(),o.a.createElement("div",{style:this.mobileMenuItemStyle()},this.renderInviteLink())),o.a.createElement(k.a,null,this.renderSpaceMembers(n)));const u=[o.a.createElement(W.a,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members ({numberOfMembers})",values:{numberOfMembers:n.length}}),o.a.createElement(W.a,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"})];return d.length>0&&u.push(o.a.createElement(W.a,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests ({numberOfGuests})",values:{numberOfGuests:d.length}})),o.a.createElement(Z.a,null,o.a.createElement(ie.a,{tabs:u,selectedIndex:p,onChange:this.handleTabClick,style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabStyle:{fontSize:16}}),this.renderTab(p,n,d))}renderLoadingSpinner(){return o.a.createElement(Xe.a,{style:{margin:"calc(50% - 1em) auto"}})}renderOfflineMessage(){return o.a.createElement($.a,{isSmall:!0,style:{textAlign:"center"}},o.a.createElement(W.a,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."}))}renderHelp(){return o.a.createElement("div",{style:{marginTop:24,marginBottom:24}},o.a.createElement(ze.a,{title:o.a.createElement(W.a,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:Object(Je.a)("guides.members"),analyticsFrom:"members_settings"}))}renderTab(e,t,r){return e===s.Members?o.a.createElement(i.Fragment,null,this.renderSpaceMembers(t)):e===s.Guests?o.a.createElement(i.Fragment,null,this.renderSpaceGuests(r)):this.renderGroupsTab()}renderGroupsTab(){const{store:e}=this.props,{groupsFilter:t}=this.stores.spacePermissionsSettingsStore.state,r=e.getValue(),s=this.canUseGroups(),n=this.canEditGroups();if(r){const e=r.permission_groups||[];return o.a.createElement("div",null,s?o.a.createElement($.a,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})):o.a.createElement(Qe.a,{for:"team",from:"permission_groups",icon:F.a.group,title:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.upgradeCaption",defaultMessage:"Upgrade to the Team Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),o.a.createElement(y.a,{size:24,isHidden:!0}),o.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},s&&o.a.createElement(D.a,{renderTooltip:()=>this.canAdmin()?o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.upgradeMessage",defaultMessage:"Upgrade to Team or Enterprise to use permission groups."}):o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.adminsOnly",defaultMessage:"Only admins can add a permission group."}),render:e=>o.a.createElement(je.a,Object.assign({isLarge:!0,onClick:this.handleCreateGroupClick,disabled:!n},n?void 0:e),o.a.createElement(W.a,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"}))}),e.length>0&&o.a.createElement(K.b,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:F.a.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:K.b.Format.Small,value:t,style:rt({},nt.filterStyle,{marginRight:0}),onChange:this.handleFilterChange})),e.length>0&&o.a.createElement(y.a,{size:24,style:{marginBottom:24}}),n?o.a.createElement(Fe.b,{direction:Fe.a.Vertical,keys:e.map(e=>e.id),renderKey:(t,r)=>this.renderSpaceGroup(e[r]),isFullWidth:!0,onDrop:this.handleGroupReorder}):o.a.createElement("div",null,e.map(this.renderSpaceGroup)))}}renderSpaceMembers(e){return this.props.isMobile?this.renderMobileMemberList(e):o.a.createElement("div",null,!this.shouldRenderUpsell()&&this.renderHelp(),this.shouldRenderUpsell()&&this.renderUpsell(),this.renderInviteLink(),this.renderDesktopMemberList(e))}renderInviteLink(){if(!this.canUseInviteLink())return;const e=this.getInviteLink(),t=this.getInviteLinkEnabled();if(!e)return;const{spacePermissionsSettingsStore:r}=this.stores;return o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"}},o.a.createElement("div",{style:{marginRight:8,flexGrow:1}},o.a.createElement(Ke.a,null,o.a.createElement(W.a,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})),o.a.createElement($.a,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"}},o.a.createElement(W.a,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only admins can see this."})," ",!this.props.isMobile&&this.renderInviteLinkReset())),o.a.createElement("div",{style:{marginTop:5}},o.a.createElement(qe.a,{on:t,onClick:this.handleInviteLinkClick}))),r&&t&&e&&this.renderInviteLinkUrl(e),o.a.createElement(y.a,{size:40}))}renderInviteLinkReset(){var e=this;return o.a.createElement(W.a,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> to generate a new invite link.",values:{resetlink:function(){const{store:t}=e.props,r=t.getValue();if(r){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return o.a.createElement(We.a,{onClick:()=>{j.c({message:o.a.createElement(W.a,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset your invite link? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:j.b,items:[{label:o.a.createElement(W.a,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await T.Nb(e.environment,{spaceId:r.id}),x.e(e.environment)}}]})}},n)}}}})}renderInviteLinkUrl(e){const{reactNative:t}=this.environment,r=o.a.createElement(W.a,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),s=()=>{Ye.c({environment:this.environment,stringValue:e}),R.Je(this.environment)},n=()=>{t&&t.share(e),R.Je(this.environment)};return this.props.isMobile?o.a.createElement("div",null,o.a.createElement(K.b,{type:"text",format:K.a.Default,value:e,disabled:!0}),t?o.a.createElement(U.a,{onClick:n,style:{marginTop:10,width:"100%"}},o.a.createElement(W.a,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})):o.a.createElement(U.a,{onClick:s,style:{marginTop:10,width:"100%"}},r)):o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12}},o.a.createElement(K.b,{type:"text",format:K.a.Default,value:e,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),o.a.createElement(je.a,{onClick:s,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,width:90},isLarge:!0},r)))}renderMobileMemberList(e){const{store:t}=this.props;return o.a.createElement(i.Fragment,null,e.map(e=>{const r=b.a.createChildStore(t,{table:c.a,id:e.userId}).getValue();return o.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:10,borderBottom:"1px solid ".concat(this.theme.lightDividerColor),background:this.theme.contentBackground}},this.renderMember(r),o.a.createElement("div",{style:{textAlign:"center",marginLeft:"auto"}},this.renderUserPermission(e)))}))}renderUpsell(){const{data:e}=_.a.state,t=e&&!N.A(this.environment,e)&&"subscribed_admin"!==e.type?"team_free":"team";return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{for:t,from:"members_settings",icon:F.a.membersFilled,title:o.a.createElement(W.a,{id:"spacePermissionSettings.memberUpsell.title",defaultMessage:"Share with unlimited members"}),caption:o.a.createElement(W.a,{id:"spacePermissionSettings.memberUpsell.caption",defaultMessage:"Try Notion for Teams for a collaborative workspace, unlimited team members, and advanced permissions."}),learnMoreRoute:"guides.members",upgradeMessage:"team_free"===t?o.a.createElement(W.a,{id:"spacePermissionSettings.memberUpsell.alternativeTrialLabel",defaultMessage:"Try it free"}):o.a.createElement(W.a,{id:"spacePermissionSettings.memberUpsell.alternativeUpgradeLabel",defaultMessage:"Upgrade to Team Plan"})}),o.a.createElement(y.a,{size:48}))}renderDesktopMemberList(e){const{spacePermissionsSettingsStore:t}=this.stores,{membersFilter:r,limitMembers:s}=t.state,n=this.getFilteredMembers(e,r),a=s?n.slice(0,nt.defaultLimit):n;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginRight:8,flexGrow:1}},o.a.createElement(Ke.a,null,o.a.createElement(W.a,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"}))),this.renderInviteViaDomainCaption(),o.a.createElement(y.a,{size:16,isHidden:!0}),o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},this.renderInviteButton(),o.a.createElement(K.b,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:F.a.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:K.b.Format.Small,value:r,style:nt.filterStyle,onChange:e=>{t.setState(rt({},t.state,{membersFilter:e.target.value,limitMembers:!0}))}})),this.renderUserTable(a),n.length>nt.defaultLimit&&s&&o.a.createElement(Ve.a,{style:nt.showMoreButtonStyle,onClick:this.handleMembersShowMoreClick},o.a.createElement(W.a,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:n.length-nt.defaultLimit}}))))}renderSpaceGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{guestsFilter:r,limitGuests:s}=t.state,n=this.getFilteredMembers(e,r),a=s?n.slice(0,nt.defaultLimit):n;return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},o.a.createElement(K.b,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:F.a.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:K.b.Format.Small,value:r,style:nt.filterStyle,onChange:e=>{t.setState(rt({},t.state,{guestsFilter:e.target.value,limitGuests:!0}))}})),this.renderUserTable(a),n.length>nt.defaultLimit&&s&&o.a.createElement(Ve.a,{style:nt.showMoreButtonStyle,onClick:this.handleGuestsShowMoreClick},o.a.createElement(W.a,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:n.length-nt.defaultLimit}}))))}renderMobileInviteButton(){return o.a.createElement(i.Fragment,null,o.a.createElement("div",{style:this.mobileMenuItemStyle()},this.renderInviteButton({flex:1})),o.a.createElement("div",{style:{borderBottom:"1px solid ".concat(this.theme.regularDividerColor)}}))}renderInviteButton(e){const{store:t}=this.props;return o.a.createElement($e.i,{disabled:!this.canAdmin(),store:t,onInviteClick:this.handleUpdateClick,onInviteComplete:this.handleUpdateComplete,isSubscribed:this.isSubscribed(),membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e})}renderInviteViaDomainCaption(){const{store:e}=this.props;return p.j(e)?o.a.createElement($.a,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},o.a.createElement(W.a,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})):o.a.createElement($.a,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},o.a.createElement(W.a,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.a.createElement(We.a,{onClick:()=>{_e.a.setState(rt({},_e.a.state,{currentTab:"settings"}))}},t)}}}))}getFilteredMembers(e,t){const{store:r}=this.props;return t&&t.length>0?Object(u.b)(t,e,e=>{const t=b.a.createChildStore(r,{table:c.a,id:e.userId}).getValue();return t?Object(c.e)(t):""}):e}renderUserTable(e){const{store:t}=this.props;return o.a.createElement(ae,{columns:[{key:"user",header:o.a.createElement(W.a,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"75%"}},{key:"access_level",header:o.a.createElement(W.a,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),style:{width:"25%",textAlign:"center"}}],rows:e.map(e=>{const r=b.a.createChildStore(t,{table:c.a,id:e.userId}).getValue();return{key:e.userId,columns:[this.renderMember(r),o.a.createElement("div",{style:{textAlign:"center"}},this.renderUserPermission(e))]}})})}renderMember(e){if(e)return o.a.createElement("div",{style:{display:"flex",alignItems:"center",maxWidth:300}},o.a.createElement(He.a,{userValue:e,size:28}),o.a.createElement("div",{style:{minWidth:0,marginLeft:6,marginRight:6}},o.a.createElement($.a,{className:"notranslate"},Object(c.d)(e)),o.a.createElement($.a,{isSmall:!0},e.email)))}renderUserPermission(e){return"none"===e.role?o.a.createElement(J,{store:this.props.store,guest:e,isSubscribed:this.isSubscribed()}):this.renderMemberRoleSelect(e)}renderMemberRoleSelect(e){const t=this.environment.currentUser.id,{currentUserSettingsStore:r}=Ie.a.state;if(r)return o.a.createElement(Q.a,{role:e.role,table:oe.a,type:"user_permission",disabled:!this.canAdmin(),isUserPermission:e.userId===t,isSubscribed:this.isSubscribed(),upgradeButtonName:"space_permission_item",onChange:t=>this.handleMemberPermissionRoleChange(e,t,r)})}isSubscribed(){const{data:e}=_.a.state;return Boolean(e&&N.D(e))}canAdmin(){return this.props.store.canAdmin()}canUseGroups(){return N.J(this.environment)&&this.isSubscribed()}canEditGroups(){return this.canUseGroups()&&this.canAdmin()}canUseInviteLink(){return this.canAdmin()&&N.J(this.environment)}shouldRenderUpsell(){const e=this.props.store.getValue();return Boolean(e&&"personal"===e.plan_type&&this.canAdmin())}getInviteLinkEnabled(){const e=this.props.store.getValue();return Boolean(e&&e.invite_link_enabled)}getInviteLink(){const e=_.a.state.data,t=this.props.store.getValue(),r=!e||"subscribed_admin"!==e.type&&"unsubscribed_admin"!==e.type?void 0:e.inviteLinkCode;if(t&&r)return Object(et.getSpaceInviteLinkUrl)(this.environment,t,r)}getSearchIconStyle(){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:this.theme.mediumIconColor}}mobileMenuItemStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:e.getSafePaddingRightCSS(14),background:this.theme.contentBackground}}}nt.defaultLimit=50,nt.filterStyle={width:180,borderRadius:30},nt.showMoreButtonStyle={marginTop:8};t.a=Object(W.g)(nt)},1632:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(3),i=r(55),o=r(47),l=r(16);class c extends l.a{getInitialState(){return{}}}var d=c,p=r(22),u=r(82),m=r(76),h=r(8),g=r(635);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class S extends a.a{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:u.a,SelectButtonStore:d},this.renderMenuItemOrigin=e=>{const{style:t}=this.props;if(this.props.isMenuItem){const r=this.props.label?{title:this.props.label,right:this.props.selectedTitle}:{title:this.props.selectedTitle};return n.a.createElement(g.a,Object.assign({},e,{focused:!!this.props.focused,disabled:this.props.disabled,style:t},r))}},this.renderButtonOrigin=e=>{const{innerButtonStyle:t}=this.props;return n.a.createElement(m.a,Object.assign({disabled:this.props.disabled,disabledFeedback:!0,style:f({marginRight:-6},t)},e),this.props.selectedTitle,this.chevronDownIcon())},this.handleSelection=e=>{this.stores.SelectButtonStore.setState({selectedKey:e})},this.closeMenu=()=>{const{buttonPopupStore:e}=this.stores;e.setState(f({},e.state,{open:!1}))},this.chevronDownIcon=()=>{const{device:e}=this.environment;return h.a.chevronDown({width:e.isMobile?14:10,marginLeft:4,fill:this.theme.lightIconColor})}}renderComponent(){const{isMenuItem:e,style:t,labelStyle:r}=this.props;return e?this.renderButtonPopup(this.renderMenuItemOrigin):n.a.createElement("div",{style:f({display:"flex",alignItems:"center",height:32},t)},this.props.label&&n.a.createElement("div",{style:f({marginRight:"auto",color:this.theme.lightTextColor,fontSize:14},r)},this.props.label),this.renderButtonPopup(this.renderButtonOrigin))}renderButtonPopup(e){const{device:t}=this.environment,{alignmentToOrigin:r}=this.props;return n.a.createElement(o.a,{popupType:t.isMobile?o.a.PopupType.SlideUp:o.a.PopupType.Popup,buttonPopupStore:this.stores.buttonPopupStore,alignmentToOrigin:void 0!==r?r:o.a.Alignment.End,renderOrigin:e,placementToOrigin:this.props.isMenuItem?o.a.Placement.Right:o.a.Placement.Bottom,render:e=>{let r;r=t.isMobile?{menuType:p.b.MenuType.ActionSheet}:{menuType:p.b.MenuType.Popup};const{focusedIndex:s,menuSections:a}=this.getMenuSections(e);return n.a.createElement(p.b,Object.assign({},r),n.a.createElement(i.a,{type:i.a.Type.Vertical,initialFocus:s,sections:a}))}})}getMenuSections(e){let t=void 0,r=0;return{menuSections:this.props.renderMenuSections(e).map(e=>f({},e,{items:e.items.map(e=>(e.key===this.stores.SelectButtonStore.state.selectedKey&&(t=r),r++,f({},e,{action:t=>{e.action(t),this.handleSelection(e.key)}})))})),focusedIndex:t}}}t.a=S},1634:function(e,t,r){"use strict";r(15),r(11);var s=r(0),n=r.n(s),a=r(1),i=r(183),o=r(3),l=r(61),c=r(17),d=r(800),p=r(39),u=r(54),m=r(68),h=r(743),g=r(153),b=r(299),f=r(285),y=r(750),S=r(19),v=r(86),w=r(257),E=r(220),P=(r(302),r(2)),O=r.n(P);function M(e){return e.match(/\d/)}var k=r(744),C=r(224);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class I extends o.a{constructor(){super(...arguments),this.storeTypes={hasPasswordStore:l.a.of(!1),emailStore:l.a.of("")},this.handleChangePasswordClick=()=>{d.a.setState({open:!0,setNewPassword:!0,password:"",repeatPassword:""})},this.handleOldPasswordChange=e=>{(d.a.isSetNewPasswordModal()||d.a.isRemovePasswordModal())&&d.a.setState(T({},d.a.state,{oldPassword:e.target.value,alert:void 0}))},this.handleClearOldPassword=()=>{(d.a.isSetNewPasswordModal()||d.a.isRemovePasswordModal())&&d.a.setState(T({},d.a.state,{oldPassword:"",alert:void 0}))},this.handlePasswordChange=e=>{d.a.isSetNewPasswordModal()&&d.a.setState(T({},d.a.state,{password:e.target.value,alert:void 0}))},this.handleCancelChangePassword=()=>{const{onCancel:e}=d.a.state;d.a.reset(),e&&e()},this.handleClearPassword=()=>{d.a.isSetNewPasswordModal()&&d.a.setState(T({},d.a.state,{password:"",repeatPassword:"",alert:void 0}))},this.handleRepeatPasswordChange=e=>{d.a.isSetNewPasswordModal()&&d.a.setState(T({},d.a.state,{repeatPassword:e.target.value,alert:void 0}))},this.handleClearRepeatPassword=()=>{d.a.isSetNewPasswordModal()&&d.a.setState(T({},d.a.state,{repeatPassword:"",alert:void 0}))},this.handlePasswordBlur=()=>{if(d.a.isSetNewPasswordModal()){const{password:e,repeatPassword:t}=d.a.state;e&&t&&e!==t&&d.a.setState(T({},d.a.state,{alert:this.props.intl.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})}))}},this.handleSubmit=async()=>{if(!d.a.isSetNewPasswordModal())return;const{oldPassword:e,password:t,repeatPassword:r}=d.a.state,s=this.stores.hasPasswordStore.get(),{intl:n}=this.props;let a;if(s&&!e)a=n.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(t){const e=function(e){return O.a.uniq(e).length<=3?{success:!1,reason:{type:"password_too_consistent"}}:e.length>=15?{success:!0}:e.length<10?{success:!1,reason:{type:"password_too_short"}}:function(e){return e.match(/[a-z]/i)}(e)?M(e)?{success:!0}:{success:!1,reason:{type:"password_missing_number"}}:M(e)?{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}(t);e.success?r?t!==r&&(a=n.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):a=n.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):a=this.getPasswordErrorMessage(e.reason)}else a=n.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(a)return void d.a.setState(T({},d.a.state,{alert:a}));const i=await p.fc(this.environment,{oldPassword:e,newPassword:t});if("success"===i.type)this.props.requestStore.refresh(),void 0===e?this.saveNewPasswordSuccess():this.changePasswordSuccess();else{const e=Object(C.b)(this.props.intl,i);d.a.setState(T({},d.a.state,{alert:e}))}},this.handleShowRemovePasswordModalClick=()=>{d.a.setState({open:!0,removePassword:!0,oldPassword:""})},this.handleRemovePasswordClick=async()=>{if(!d.a.isRemovePasswordModal())return;const{oldPassword:e}=d.a.state;if(!e)return void d.a.setState(T({},d.a.state,{alert:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password.",description:"We require users to enter their password in a text box before they can delete it. This error message appears if the user attempts to delete their password but hasn't entered it into the text box."})}));const t=await p.fc(this.environment,{oldPassword:e,clearPassword:!0});if("success"===t.type)this.props.requestStore.refresh(),this.removePasswordSuccess();else{const e=Object(C.b)(this.props.intl,t);d.a.setState(T({},d.a.state,{alert:e||this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})}))}},this.defaultErrorMessage=this.props.intl.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}willMount(e){super.willMount(e);const{currentUserStore:t}=c.a.state;if(t){const e=t.getValue();e&&this.stores.emailStore.set(e.email)}}renderComponent(){const e=this.stores.emailStore.get();if(!e)return;const{requestStore:t}=this.props;return n.a.createElement("div",{style:this.getSettingsOptionStyle()},n.a.createElement(k.a,{smallMarginBottom:!0},n.a.createElement(a.a,{id:"passwordSettings.title",defaultMessage:"Password"})),n.a.createElement(i.a,{request:{},requestStore:t,performRequest:async()=>{const t=await p.m(this.environment,{email:e,allowAdminBypass:!0});if("success"===t.type){const{samlRedirect:e,hasPassword:r}=t.data;return{samlEnforced:e&&e.enforced,hasPassword:r}}throw t.error},render:(e,t)=>{if(e)return I.renderLabel(n.a.createElement(a.a,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}));if(t){const{samlEnforced:e,hasPassword:r}=t;return e?I.renderLabel(n.a.createElement(a.a,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML Single Sign-on Provider.",description:"Message letting users know that their password is managed through a 3rd-party provider, which is why they can't set their password on Notion's password settings page."})):(this.stores.hasPasswordStore.set(Boolean(r)),this.renderPasswordActions())}}}))}renderPasswordActions(){const{isEducationPlan:e}=this.props,t=this.stores.hasPasswordStore.get();return n.a.createElement(s.Fragment,null,I.renderLabel(n.a.createElement(a.a,{id:"passwordSettings.passwordSetInstructions",defaultMessage:"You can set a permanent password if you don't want to use temporary login codes."})),e&&I.renderLabel(this.renderEducationPlanInfo()),n.a.createElement("div",{style:{display:"flex",alignItems:"center"}},n.a.createElement(b.a,{isLarge:!0,onClick:this.handleChangePasswordClick,style:{marginTop:12,marginBottom:4}},t?n.a.createElement(a.a,{id:"passwordSettings.changePasswordButton.label",defaultMessage:"Change password"}):n.a.createElement(a.a,{id:"passwordSettings.setPasswordButton.label",defaultMessage:"Set a password"})),this.canRemovePassword()&&n.a.createElement(w.a,{onClick:this.handleShowRemovePasswordModalClick,style:{marginLeft:5,marginTop:12,marginBottom:4}},n.a.createElement(a.a,{id:"passwordSettings.removePasswordButton.label",defaultMessage:"Remove password"}))),this.renderPasswordModal())}static renderLabel(e){return n.a.createElement(v.a,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},e)}renderPasswordModal(){const{device:e}=this.environment,{open:t}=d.a.state;return n.a.createElement(h.a,{open:t,onDismiss:this.handleCancelChangePassword,innerStyle:{width:e.isPhone?"90%":460,minHeight:270,padding:24},className:m.U,preventHideChildrenWhileOpening:!0,render:()=>n.a.createElement(E.a,{capture:!0,allowEsc:!0,render:()=>n.a.createElement(s.Fragment,null,this.renderSaveNewPassword(),this.renderRemovePassword())})})}renderSaveNewPassword(){const{isEducationPlan:e}=this.props;if(!d.a.isSetNewPasswordModal())return;const{password:t,repeatPassword:r,oldPassword:i,alert:o}=d.a.state,l=this.stores.hasPasswordStore.get(),c=this.stores.emailStore.get();return n.a.createElement(s.Fragment,null,n.a.createElement(g.b,{style:{display:"none"},type:"text",value:c,autoComplete:"username",disabled:!0}),l&&n.a.createElement(s.Fragment,null,n.a.createElement(y.a,null,n.a.createElement(a.a,{id:"passwordSettings.changePasswordModal.oldPasswordInput.label",defaultMessage:"Old Password"})),n.a.createElement(g.b,{type:"password",value:i,onChange:this.handleOldPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.oldPasswordInput.placeholder",defaultMessage:"Enter old password..."}),style:{padding:"4px 8px"},focusInitial:!0,autoComplete:"current-password"})),l?n.a.createElement(y.a,{hasMarginTop:!0},n.a.createElement(a.a,{id:"passwordSettings.newPasswordInput.label",defaultMessage:"New password"})):n.a.createElement(y.a,null,n.a.createElement(a.a,{id:"passwordSettings.passwordInput.label",defaultMessage:"Password"})),n.a.createElement(g.b,{type:"password",value:t,onChange:this.handlePasswordChange,onSubmit:this.handleSubmit,showClearButton:!0,onClearButtonClick:this.handleClearPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.newPasswordInput.placeholder",defaultMessage:"Enter new password..."}),style:{padding:"4px 8px"},focusInitial:!l,onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),n.a.createElement(y.a,{hasMarginTop:!0},n.a.createElement(a.a,{id:"passwordSettings.repeatPasswordInput.label",defaultMessage:"Repeat password"})),n.a.createElement(g.b,{type:"password",value:r,onChange:this.handleRepeatPasswordChange,onSubmit:this.handleSubmit,showClearButton:!0,onClearButtonClick:this.handleClearRepeatPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.repeatPasswordInput.placeholder",defaultMessage:"Repeat new password..."}),style:{padding:"4px 8px"},onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),n.a.createElement(v.a,{isMultiline:!0,isSecondaryColor:!0,style:{marginTop:14}},n.a.createElement(a.a,{id:"passwordSettings.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."})),e&&n.a.createElement(v.a,{isMultiline:!0,isSecondaryColor:!0,style:{marginTop:14}},this.renderEducationPlanInfo()),this.renderAlert(o),n.a.createElement(f.a,{isLarge:!0,style:{marginTop:14},onClick:this.handleSubmit},l?n.a.createElement(a.a,{id:"passwordSettings.changePasswordButton.label",defaultMessage:"Change password"}):n.a.createElement(a.a,{id:"passwordSettings.setPasswordButton.label",defaultMessage:"Set a password"})))}renderRemovePassword(){const{isEducationPlan:e}=this.props;if(!d.a.isRemovePasswordModal())return;const{oldPassword:t,alert:r}=d.a.state;return n.a.createElement(s.Fragment,null,n.a.createElement("div",{style:{fontSize:14,width:"100%"}},n.a.createElement(a.a,{id:"passwordSettings.removePasswordModal.text",defaultMessage:"You're about to remove your password. We'll email you temporary login codes to access Notion going forward.",description:"Message warning the user that they're about to delete their password, and telling them how to log in after their password has been deleted."}),e&&n.a.createElement(a.a,{id:"passwordSettings.removePasswordModal.educationPlanWarning",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion.",description:"Warning for users on the Education Plan that if they lose access to their school email, they won't be able to log into Notion without a password."})),n.a.createElement(y.a,{hasMarginTop:!0},n.a.createElement(a.a,{id:"passwordSettings.deletePasswordModal.passwordInput.label",defaultMessage:"Password"})),n.a.createElement(g.b,{type:"password",value:t,onChange:this.handleOldPasswordChange,onSubmit:this.handleRemovePasswordClick,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.passwordInput.placeholder",defaultMessage:"Enter your password..."}),style:{padding:"4px 8px"},focusInitial:!0,autoComplete:"current-password"}),this.renderAlert(r),n.a.createElement(f.a,{isLarge:!0,style:{marginTop:14},onClick:this.handleRemovePasswordClick},n.a.createElement(a.a,{id:"passwordSettings.removePasswordModal.removePasswordButton.label",defaultMessage:"Remove password"})))}renderAlert(e){if(e)return n.a.createElement(v.a,{isMultiline:!0,style:{marginTop:8,color:S.f.red}},e)}renderEducationPlanInfo(){return n.a.createElement(a.a,{id:"passwordSettings.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}saveNewPasswordSuccess(){const{intl:e,isEducationPlan:t}=this.props,{onSubmit:r}=d.a.state;d.a.reset();const s=t?e.formatMessage({id:"passwordSettings.setPasswordSuccess.educationMessage",defaultMessage:"Your password is all set! You'll be able to log in, even if you lose access to your school email address."}):e.formatMessage({id:"passwordSettings.setPasswordSuccess.message",defaultMessage:"Your password is all set!"});u.f({message:s,onAccept:r})}changePasswordSuccess(){const{onSubmit:e}=d.a.state;d.a.reset(),u.f({message:this.props.intl.formatMessage({id:"passwordSettings.changePasswordSuccess.message",defaultMessage:"Your new password has been saved."}),onAccept:e})}removePasswordSuccess(){d.a.reset(),u.f({message:this.props.intl.formatMessage({id:"passwordSettings.removePasswordSuccess.message",defaultMessage:"Your password has been removed."})})}getPasswordErrorMessage(e){const t=C.d[e.type];return t?this.props.intl.formatMessage(t):this.defaultErrorMessage}canRemovePassword(){const{isEducationPlan:e}=this.props,t=this.stores.hasPasswordStore.get();return!e&&t}}t.a=Object(a.g)(I)}}]);