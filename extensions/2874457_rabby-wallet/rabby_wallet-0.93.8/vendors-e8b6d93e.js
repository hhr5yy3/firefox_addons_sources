(self.webpackChunkrabby=self.webpackChunkrabby||[]).push([[3420],{1364:(e,t,i)=>{"use strict";var r=i(348764).Buffer;var s=i(481249),n=i(520161),a=i(409669),o=i(634779),d=i(669020),p=i(98089),u=i(698137),l=i(301805),c=i(823061),y=i(255733),h=i(496486),g=i(785426),m=i(529140),f=i(413803),_=i(348764);function v(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var T=v(s),b=v(a),S=v(o),E=v(d),R=v(y);const M=e=>({getLogs:()=>e({method:"getLogs"}),searchDevices:()=>e({method:"searchDevices"}),getFeatures:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"getFeatures"})),checkFirmwareRelease:t=>e({connectId:t,method:"checkFirmwareRelease"}),checkBLEFirmwareRelease:t=>e({connectId:t,method:"checkBLEFirmwareRelease"}),checkTransportRelease:()=>e({method:"checkTransportRelease"}),checkBridgeStatus:()=>e({method:"checkBridgeStatus"}),checkBridgeRelease:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"checkBridgeRelease"})),checkBootloaderRelease:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"checkBootloaderRelease"})),cipherKeyValue:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"cipherKeyValue"})),deviceBackup:t=>e({connectId:t,method:"deviceBackup"}),deviceChangePin:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceChangePin"})),deviceFlags:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceFlags"})),deviceRebootToBoardloader:t=>e({connectId:t,method:"deviceRebootToBoardloader"}),deviceRebootToBootloader:t=>e({connectId:t,method:"deviceRebootToBootloader"}),deviceRecovery:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceRecovery"})),deviceReset:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceReset"})),deviceSettings:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceSettings"})),deviceUpdateReboot:t=>e({connectId:t,method:"deviceUpdateReboot"}),deviceUploadResource:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceUploadResource"})),deviceSupportFeatures:t=>e({connectId:t,method:"deviceSupportFeatures"}),deviceVerify:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceVerify"})),deviceWipe:t=>e({connectId:t,method:"deviceWipe"}),deviceFullyUploadResource:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceFullyUploadResource"})),deviceUpdateBootloader:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"deviceUpdateBootloader"})),getPassphraseState:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"getPassphraseState"})),evmGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"evmGetAddress"})),evmGetPublicKey:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"evmGetPublicKey"})),evmSignMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"evmSignMessage"})),evmSignMessageEIP712:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"evmSignMessageEIP712"})),evmSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"evmSignTransaction"})),evmSignTypedData:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"evmSignTypedData"})),evmVerifyMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"evmVerifyMessage"})),btcGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"btcGetAddress"})),btcGetPublicKey:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"btcGetPublicKey"})),btcSignMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"btcSignMessage"})),btcSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"btcSignTransaction"})),btcVerifyMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"btcVerifyMessage"})),starcoinGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"starcoinGetAddress"})),starcoinGetPublicKey:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"starcoinGetPublicKey"})),starcoinSignMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"starcoinSignMessage"})),starcoinSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"starcoinSignTransaction"})),starcoinVerifyMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"starcoinVerifyMessage"})),nemGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nemGetAddress"})),nemSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nemSignTransaction"})),solGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"solGetAddress"})),solSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"solSignTransaction"})),stellarGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"stellarGetAddress"})),stellarSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"stellarSignTransaction"})),firmwareUpdate:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"firmwareUpdate"})),firmwareUpdateV2:(t,i)=>e(Object.assign(Object.assign({},i),{connectId:t,method:"firmwareUpdateV2"})),requestWebUsbDevice:()=>e({method:"requestWebUsbDevice"}),tronGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"tronGetAddress"})),tronSignMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"tronSignMessage"})),tronSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"tronSignTransaction"})),confluxGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"confluxGetAddress"})),confluxSignMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"confluxSignMessage"})),confluxSignMessageCIP23:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"confluxSignMessageCIP23"})),confluxSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"confluxSignTransaction"})),nearGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nearGetAddress"})),nearSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nearSignTransaction"})),aptosGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"aptosGetAddress"})),aptosGetPublicKey:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"aptosGetPublicKey"})),aptosSignMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"aptosSignMessage"})),aptosSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"aptosSignTransaction"})),algoGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"algoGetAddress"})),algoSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"algoSignTransaction"})),cosmosGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"cosmosGetAddress"})),cosmosGetPublicKey:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"cosmosGetPublicKey"})),cosmosSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"cosmosSignTransaction"})),xrpGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"xrpGetAddress"})),xrpSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"xrpSignTransaction"})),suiGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"suiGetAddress"})),suiGetPublicKey:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"suiGetPublicKey"})),suiSignMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"suiSignMessage"})),suiSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"suiSignTransaction"})),cardanoGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"cardanoGetAddress"})),cardanoGetPublicKey:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"cardanoGetPublicKey"})),cardanoSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"cardanoSignTransaction"})),cardanoSignMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"cardanoSignMessage"})),filecoinGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"filecoinGetAddress"})),filecoinSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"filecoinSignTransaction"})),polkadotGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"polkadotGetAddress"})),polkadotSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"polkadotSignTransaction"})),kaspaGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"kaspaGetAddress"})),kaspaSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"kaspaSignTransaction"})),nexaGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nexaGetAddress"})),nexaSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nexaSignTransaction"})),nostrGetPublicKey:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nostrGetPublicKey"})),nostrSignEvent:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nostrSignEvent"})),nostrEncryptMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nostrEncryptMessage"})),nostrDecryptMessage:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nostrDecryptMessage"})),nostrSignSchnorr:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nostrSignSchnorr"})),lnurlAuth:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"lnurlAuth"})),nervosGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nervosGetAddress"})),nervosSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"nervosSignTransaction"})),dnxGetAddress:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"dnxGetAddress"})),dnxSignTransaction:(t,i,r)=>e(Object.assign(Object.assign({},r),{connectId:t,deviceId:i,method:"dnxSignTransaction"}))});var x,w={exports:{}},A="object"==typeof Reflect?Reflect:null,O=A&&"function"==typeof A.apply?A.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};x=A&&"function"==typeof A.ownKeys?A.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var C=Number.isNaN||function(e){return e!=e};function k(){k.init.call(this)}w.exports=k,w.exports.once=function(e,t){return new Promise((function(i,r){function s(i){e.removeListener(t,n),r(i)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",s),i([].slice.call(arguments))}U(e,t,n,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&U(e,"error",t,i)}(e,s,{once:!0})}))},k.EventEmitter=k,k.prototype._events=void 0,k.prototype._eventsCount=0,k.prototype._maxListeners=void 0;var q=10;function I(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function D(e){return void 0===e._maxListeners?k.defaultMaxListeners:e._maxListeners}function P(e,t,i,r){var s,n,a,o;if(I(i),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),a=n[t]),void 0===a)a=n[t]=i,++e._eventsCount;else if("function"==typeof a?a=n[t]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),(s=D(e))>0&&a.length>s&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,o=d,console&&console.warn&&console.warn(o)}return e}function N(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},s=N.bind(r);return s.listener=i,r.wrapFn=s,s}function L(e,t,i){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(s):j(s,s.length)}function F(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function j(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function U(e,t,i,r){if("function"==typeof e.on)r.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function s(n){r.once&&e.removeEventListener(t,s),i(n)}))}}Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return q},set:function(e){if("number"!=typeof e||e<0||C(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");q=e}}),k.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},k.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||C(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},k.prototype.getMaxListeners=function(){return D(this)},k.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var n;if(t.length>0&&(n=t[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var o=s[e];if(void 0===o)return!1;if("function"==typeof o)O(o,this,t);else{var d=o.length,p=j(o,d);for(i=0;i<d;++i)O(p[i],this,t)}return!0},k.prototype.addListener=function(e,t){return P(this,e,t,!1)},k.prototype.on=k.prototype.addListener,k.prototype.prependListener=function(e,t){return P(this,e,t,!0)},k.prototype.once=function(e,t){return I(t),this.on(e,B(this,e,t)),this},k.prototype.prependOnceListener=function(e,t){return I(t),this.prependListener(e,B(this,e,t)),this},k.prototype.removeListener=function(e,t){var i,r,s,n,a;if(I(t),void 0===(r=this._events))return this;if(void 0===(i=r[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(s=-1,n=i.length-1;n>=0;n--)if(i[n]===t||i[n].listener===t){a=i[n].listener,s=n;break}if(s<0)return this;0===s?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,s),1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},k.prototype.off=k.prototype.removeListener,k.prototype.removeAllListeners=function(e){var t,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var s,n=Object.keys(i);for(r=0;r<n.length;++r)"removeListener"!==(s=n[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},k.prototype.listeners=function(e){return L(this,e,!0)},k.prototype.rawListeners=function(e){return L(this,e,!1)},k.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):F.call(e,t)},k.prototype.listenerCount=F,k.prototype.eventNames=function(){return this._eventsCount>0?x(this._events):[]};const H=new w.exports;function K(e,t,i,r){return new(i||(i=Promise))((function(s,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function o(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}d((r=r.apply(e,t||[])).next())}))}function G(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function z(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=G(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,s){(function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)})(r,s,(t=e[i](t)).done,t.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;const W=2147483648,V=e=>(e|W)>>>0,Y=e=>(2147483647&e)>>>0,$=n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Not a valid path"),X=n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Path cannot contain negative values"),J=e=>{const t=e.toLowerCase().split("/");if("m"!==t[0])throw $;return t.filter((e=>"m"!==e&&""!==e)).map((e=>{let t=!1;"'"===e.substr(e.length-1)&&(t=!0,e=e.substr(0,e.length-1));let i=parseInt(e);if(Number.isNaN(i))throw $;if(i<0)throw X;return t&&(i=V(i)),i}))},Z=e=>{if(!Array.isArray(e)||e.length<1)return"SPENDADDRESS";switch(Y(e[0])){case 48:return"SPENDMULTISIG";case 49:return"SPENDP2SHWITNESS";case 84:return"SPENDWITNESS";case 86:case 10025:return"SPENDTAPROOT";default:return"SPENDADDRESS"}},Q=e=>{if(!Array.isArray(e)||e.length<1)return"PAYTOADDRESS";if(49===e[0])return"PAYTOP2SHWITNESS";switch(Y(e[0])){case 48:return"PAYTOMULTISIG";case 49:return"PAYTOP2SHWITNESS";case 84:return"PAYTOWITNESS";case 86:case 10025:return"PAYTOTAPROOT";default:return"PAYTOADDRESS"}},ee=e=>`m/${e.map((e=>e&W?(2147483647&e)+"'":e)).join("/")}`,te=(e,t=0,i=!1)=>{let r;if(r="string"==typeof e?J(e):Array.isArray(e)?e.map((e=>{const t=parseInt(e);if(Number.isNaN(t))throw $;if(t<0)throw X;return t})):void 0,!r)throw $;if(t>0&&r.length<t)throw $;return i?r.splice(0,3):r},ie={model_mini:["classic","classic1s","mini"],model_touch:["touch","pro"],model_classic:["classic","classic1s"]},re={classic:["model_classic","model_mini"],classic1s:["model_classic","model_mini"],mini:["model_mini"],touch:["model_touch"],pro:["model_touch"]};var se={nested:{AlgorandGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:3}}},AlgorandAddress:{fields:{address:{type:"string",id:1}}},AlgorandSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},AlgorandSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},AptosGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},AptosAddress:{fields:{address:{type:"string",id:1}}},AptosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},AptosSignedTx:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},AptosSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},payload:{rule:"required",type:"AptosMessagePayload",id:2}},nested:{AptosMessagePayload:{fields:{address:{type:"string",id:2},chain_id:{type:"string",id:3},application:{type:"string",id:4},nonce:{rule:"required",type:"string",id:5},message:{rule:"required",type:"string",id:6}}}}},AptosMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:1},address:{rule:"required",type:"string",id:2}}},BinanceGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},BinanceAddress:{fields:{address:{rule:"required",type:"string",id:1}}},BinanceGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},BinancePublicKey:{fields:{public_key:{rule:"required",type:"bytes",id:1}}},BinanceSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},msg_count:{type:"uint32",id:2},account_number:{type:"sint64",id:3},chain_id:{type:"string",id:4},memo:{type:"string",id:5},sequence:{type:"sint64",id:6},source:{type:"sint64",id:7}}},BinanceTxRequest:{fields:{}},BinanceTransferMsg:{fields:{inputs:{rule:"repeated",type:"BinanceInputOutput",id:1},outputs:{rule:"repeated",type:"BinanceInputOutput",id:2}},nested:{BinanceInputOutput:{fields:{address:{type:"string",id:1},coins:{rule:"repeated",type:"BinanceCoin",id:2}}},BinanceCoin:{fields:{amount:{type:"sint64",id:1},denom:{type:"string",id:2}}}}},BinanceOrderMsg:{fields:{id:{type:"string",id:1},ordertype:{type:"BinanceOrderType",id:2},price:{type:"sint64",id:3},quantity:{type:"sint64",id:4},sender:{type:"string",id:5},side:{type:"BinanceOrderSide",id:6},symbol:{type:"string",id:7},timeinforce:{type:"BinanceTimeInForce",id:8}},nested:{BinanceOrderType:{values:{OT_UNKNOWN:0,MARKET:1,LIMIT:2,OT_RESERVED:3}},BinanceOrderSide:{values:{SIDE_UNKNOWN:0,BUY:1,SELL:2}},BinanceTimeInForce:{values:{TIF_UNKNOWN:0,GTE:1,TIF_RESERVED:2,IOC:3}}}},BinanceCancelMsg:{fields:{refid:{type:"string",id:1},sender:{type:"string",id:2},symbol:{type:"string",id:3}}},BinanceSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1},public_key:{rule:"required",type:"bytes",id:2}}},InputScriptType:{values:{SPENDADDRESS:0,SPENDMULTISIG:1,EXTERNAL:2,SPENDWITNESS:3,SPENDP2SHWITNESS:4,SPENDTAPROOT:5}},OutputScriptType:{values:{PAYTOADDRESS:0,PAYTOSCRIPTHASH:1,PAYTOMULTISIG:2,PAYTOOPRETURN:3,PAYTOWITNESS:4,PAYTOP2SHWITNESS:5,PAYTOTAPROOT:6}},DecredStakingSpendType:{values:{SSGen:0,SSRTX:1}},AmountUnit:{values:{BITCOIN:0,MILLIBITCOIN:1,MICROBITCOIN:2,SATOSHI:3}},MultisigRedeemScriptType:{fields:{pubkeys:{rule:"repeated",type:"HDNodePathType",id:1},signatures:{rule:"repeated",type:"bytes",id:2},m:{rule:"required",type:"uint32",id:3},nodes:{rule:"repeated",type:"HDNodeType",id:4},address_n:{rule:"repeated",type:"uint32",id:5,options:{packed:!1}}},nested:{HDNodePathType:{fields:{node:{rule:"required",type:"HDNodeType",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}}}}}},GetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},ecdsa_curve_name:{type:"string",id:2},show_display:{type:"bool",id:3},coin_name:{type:"string",id:4,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:5,options:{default:"SPENDADDRESS"}},ignore_xpub_magic:{type:"bool",id:6}}},PublicKey:{fields:{node:{rule:"required",type:"HDNodeType",id:1},xpub:{rule:"required",type:"string",id:2},root_fingerprint:{type:"uint32",id:3}}},GetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},coin_name:{type:"string",id:2,options:{default:"Bitcoin"}},show_display:{type:"bool",id:3},multisig:{type:"MultisigRedeemScriptType",id:4},script_type:{type:"InputScriptType",id:5,options:{default:"SPENDADDRESS"}},ignore_xpub_magic:{type:"bool",id:6}}},Address:{fields:{address:{rule:"required",type:"string",id:1}}},GetOwnershipId:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},coin_name:{type:"string",id:2,options:{default:"Bitcoin"}},multisig:{type:"MultisigRedeemScriptType",id:3},script_type:{type:"InputScriptType",id:4,options:{default:"SPENDADDRESS"}}}},OwnershipId:{fields:{ownership_id:{rule:"required",type:"bytes",id:1}}},SignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2},coin_name:{type:"string",id:3,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:4,options:{default:"SPENDADDRESS"}},no_script_type:{type:"bool",id:5}}},MessageSignature:{fields:{address:{rule:"required",type:"string",id:1},signature:{rule:"required",type:"bytes",id:2}}},VerifyMessage:{fields:{address:{rule:"required",type:"string",id:1},signature:{rule:"required",type:"bytes",id:2},message:{rule:"required",type:"bytes",id:3},coin_name:{type:"string",id:4,options:{default:"Bitcoin"}}}},SignTx:{fields:{outputs_count:{rule:"required",type:"uint32",id:1},inputs_count:{rule:"required",type:"uint32",id:2},coin_name:{type:"string",id:3,options:{default:"Bitcoin"}},version:{type:"uint32",id:4,options:{default:1}},lock_time:{type:"uint32",id:5,options:{default:0}},expiry:{type:"uint32",id:6},overwintered:{type:"bool",id:7,options:{deprecated:!0}},version_group_id:{type:"uint32",id:8},timestamp:{type:"uint32",id:9},branch_id:{type:"uint32",id:10},amount_unit:{type:"AmountUnit",id:11,options:{default:"BITCOIN"}},decred_staking_ticket:{type:"bool",id:12,options:{default:!1}}}},TxRequest:{fields:{request_type:{type:"RequestType",id:1},details:{type:"TxRequestDetailsType",id:2},serialized:{type:"TxRequestSerializedType",id:3}},nested:{RequestType:{values:{TXINPUT:0,TXOUTPUT:1,TXMETA:2,TXFINISHED:3,TXEXTRADATA:4,TXORIGINPUT:5,TXORIGOUTPUT:6}},TxRequestDetailsType:{fields:{request_index:{type:"uint32",id:1},tx_hash:{type:"bytes",id:2},extra_data_len:{type:"uint32",id:3},extra_data_offset:{type:"uint32",id:4}}},TxRequestSerializedType:{fields:{signature_index:{type:"uint32",id:1},signature:{type:"bytes",id:2},serialized_tx:{type:"bytes",id:3}}}}},TxAck:{options:{deprecated:!0},fields:{tx:{type:"TransactionType",id:1}},nested:{TransactionType:{fields:{version:{type:"uint32",id:1},inputs:{rule:"repeated",type:"TxInputType",id:2},bin_outputs:{rule:"repeated",type:"TxOutputBinType",id:3},lock_time:{type:"uint32",id:4},outputs:{rule:"repeated",type:"TxOutputType",id:5},inputs_cnt:{type:"uint32",id:6},outputs_cnt:{type:"uint32",id:7},extra_data:{type:"bytes",id:8},extra_data_len:{type:"uint32",id:9},expiry:{type:"uint32",id:10},overwintered:{type:"bool",id:11,options:{deprecated:!0}},version_group_id:{type:"uint32",id:12},timestamp:{type:"uint32",id:13},branch_id:{type:"uint32",id:14}},nested:{TxInputType:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},prev_hash:{rule:"required",type:"bytes",id:2},prev_index:{rule:"required",type:"uint32",id:3},script_sig:{type:"bytes",id:4},sequence:{type:"uint32",id:5,options:{default:4294967295}},script_type:{type:"InputScriptType",id:6,options:{default:"SPENDADDRESS"}},multisig:{type:"MultisigRedeemScriptType",id:7},amount:{type:"uint64",id:8},decred_tree:{type:"uint32",id:9},witness:{type:"bytes",id:13},ownership_proof:{type:"bytes",id:14},commitment_data:{type:"bytes",id:15},orig_hash:{type:"bytes",id:16},orig_index:{type:"uint32",id:17},decred_staking_spend:{type:"DecredStakingSpendType",id:18},script_pubkey:{type:"bytes",id:19}}},TxOutputBinType:{fields:{amount:{rule:"required",type:"uint64",id:1},script_pubkey:{rule:"required",type:"bytes",id:2},decred_script_version:{type:"uint32",id:3}}},TxOutputType:{fields:{address:{type:"string",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},amount:{rule:"required",type:"uint64",id:3},script_type:{type:"OutputScriptType",id:4,options:{default:"PAYTOADDRESS"}},multisig:{type:"MultisigRedeemScriptType",id:5},op_return_data:{type:"bytes",id:6},orig_hash:{type:"bytes",id:10},orig_index:{type:"uint32",id:11}}}}}}},TxInput:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},prev_hash:{rule:"required",type:"bytes",id:2},prev_index:{rule:"required",type:"uint32",id:3},script_sig:{type:"bytes",id:4},sequence:{type:"uint32",id:5,options:{default:4294967295}},script_type:{type:"InputScriptType",id:6,options:{default:"SPENDADDRESS"}},multisig:{type:"MultisigRedeemScriptType",id:7},amount:{rule:"required",type:"uint64",id:8},decred_tree:{type:"uint32",id:9},witness:{type:"bytes",id:13},ownership_proof:{type:"bytes",id:14},commitment_data:{type:"bytes",id:15},orig_hash:{type:"bytes",id:16},orig_index:{type:"uint32",id:17},decred_staking_spend:{type:"DecredStakingSpendType",id:18},script_pubkey:{type:"bytes",id:19}}},TxOutput:{fields:{address:{type:"string",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},amount:{rule:"required",type:"uint64",id:3},script_type:{type:"OutputScriptType",id:4,options:{default:"PAYTOADDRESS"}},multisig:{type:"MultisigRedeemScriptType",id:5},op_return_data:{type:"bytes",id:6},orig_hash:{type:"bytes",id:10},orig_index:{type:"uint32",id:11}}},PrevTx:{fields:{version:{rule:"required",type:"uint32",id:1},lock_time:{rule:"required",type:"uint32",id:4},inputs_count:{rule:"required",type:"uint32",id:6},outputs_count:{rule:"required",type:"uint32",id:7},extra_data_len:{type:"uint32",id:9,options:{default:0}},expiry:{type:"uint32",id:10},version_group_id:{type:"uint32",id:12},timestamp:{type:"uint32",id:13},branch_id:{type:"uint32",id:14}}},PrevInput:{fields:{prev_hash:{rule:"required",type:"bytes",id:2},prev_index:{rule:"required",type:"uint32",id:3},script_sig:{rule:"required",type:"bytes",id:4},sequence:{rule:"required",type:"uint32",id:5},decred_tree:{type:"uint32",id:9}}},PrevOutput:{fields:{amount:{rule:"required",type:"uint64",id:1},script_pubkey:{rule:"required",type:"bytes",id:2},decred_script_version:{type:"uint32",id:3}}},TxAckInput:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckInputWrapper",id:1}},nested:{TxAckInputWrapper:{fields:{input:{rule:"required",type:"TxInput",id:2}}}}},TxAckOutput:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckOutputWrapper",id:1}},nested:{TxAckOutputWrapper:{fields:{output:{rule:"required",type:"TxOutput",id:5}}}}},TxAckPrevMeta:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"PrevTx",id:1}}},TxAckPrevInput:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckPrevInputWrapper",id:1}},nested:{TxAckPrevInputWrapper:{fields:{input:{rule:"required",type:"PrevInput",id:2}}}}},TxAckPrevOutput:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckPrevOutputWrapper",id:1}},nested:{TxAckPrevOutputWrapper:{fields:{output:{rule:"required",type:"PrevOutput",id:3}}}}},TxAckPrevExtraData:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckPrevExtraDataWrapper",id:1}},nested:{TxAckPrevExtraDataWrapper:{fields:{extra_data_chunk:{rule:"required",type:"bytes",id:8}}}}},GetOwnershipProof:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},coin_name:{type:"string",id:2,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:3,options:{default:"SPENDWITNESS"}},multisig:{type:"MultisigRedeemScriptType",id:4},user_confirmation:{type:"bool",id:5,options:{default:!1}},ownership_ids:{rule:"repeated",type:"bytes",id:6},commitment_data:{type:"bytes",id:7,options:{default:""}}}},OwnershipProof:{fields:{ownership_proof:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},AuthorizeCoinJoin:{options:{"(unstable)":!0},fields:{coordinator:{rule:"required",type:"string",id:1},max_total_fee:{rule:"required",type:"uint64",id:2},fee_per_anonymity:{type:"uint32",id:3,options:{default:0}},address_n:{rule:"repeated",type:"uint32",id:4,options:{packed:!1}},coin_name:{type:"string",id:5,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:6,options:{default:"SPENDADDRESS"}},amount_unit:{type:"AmountUnit",id:11,options:{default:"BITCOIN"}}}},GetPublicKeyMultiple:{fields:{addresses:{rule:"repeated",type:"BIP32Address",id:1},ecdsa_curve_name:{type:"string",id:2},show_display:{type:"bool",id:3},coin_name:{type:"string",id:4,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:5,options:{default:"SPENDADDRESS"}},ignore_xpub_magic:{type:"bool",id:6}},nested:{BIP32Address:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}}}},PublicKeyMultiple:{fields:{xpubs:{rule:"repeated",type:"string",id:1}}},FirmwareErase:{fields:{length:{type:"uint32",id:1}}},FirmwareRequest:{fields:{offset:{type:"uint32",id:1},length:{type:"uint32",id:2}}},FirmwareUpload:{fields:{payload:{rule:"required",type:"bytes",id:1},hash:{type:"bytes",id:2}}},SelfTest:{fields:{payload:{type:"bytes",id:1}}},FirmwareErase_ex:{fields:{length:{type:"uint32",id:1}}},RebootType:{values:{Normal:0,Boardloader:1,BootLoader:2}},Reboot:{fields:{reboot_type:{rule:"required",type:"RebootType",id:1}}},FirmwareUpdateEmmc:{fields:{path:{rule:"required",type:"string",id:1},reboot_on_success:{type:"bool",id:2}}},CardanoDerivationType:{values:{LEDGER:0,ICARUS:1,ICARUS_TREZOR:2}},CardanoAddressType:{values:{BASE:0,BASE_SCRIPT_KEY:1,BASE_KEY_SCRIPT:2,BASE_SCRIPT_SCRIPT:3,POINTER:4,POINTER_SCRIPT:5,ENTERPRISE:6,ENTERPRISE_SCRIPT:7,BYRON:8,REWARD:14,REWARD_SCRIPT:15}},CardanoNativeScriptType:{values:{PUB_KEY:0,ALL:1,ANY:2,N_OF_K:3,INVALID_BEFORE:4,INVALID_HEREAFTER:5}},CardanoNativeScriptHashDisplayFormat:{values:{HIDE:0,BECH32:1,POLICY_ID:2}},CardanoTxOutputSerializationFormat:{values:{ARRAY_LEGACY:0,MAP_BABBAGE:1}},CardanoCertificateType:{values:{STAKE_REGISTRATION:0,STAKE_DEREGISTRATION:1,STAKE_DELEGATION:2,STAKE_POOL_REGISTRATION:3}},CardanoPoolRelayType:{values:{SINGLE_HOST_IP:0,SINGLE_HOST_NAME:1,MULTIPLE_HOST_NAME:2}},CardanoTxAuxiliaryDataSupplementType:{values:{NONE:0,GOVERNANCE_REGISTRATION_SIGNATURE:1}},CardanoGovernanceRegistrationFormat:{values:{CIP15:0,CIP36:1}},CardanoTxSigningMode:{values:{ORDINARY_TRANSACTION:0,POOL_REGISTRATION_AS_OWNER:1,MULTISIG_TRANSACTION:2,PLUTUS_TRANSACTION:3}},CardanoTxWitnessType:{values:{BYRON_WITNESS:0,SHELLEY_WITNESS:1}},CardanoBlockchainPointerType:{fields:{block_index:{rule:"required",type:"uint32",id:1},tx_index:{rule:"required",type:"uint32",id:2},certificate_index:{rule:"required",type:"uint32",id:3}}},CardanoNativeScript:{fields:{type:{rule:"required",type:"CardanoNativeScriptType",id:1},scripts:{rule:"repeated",type:"CardanoNativeScript",id:2},key_hash:{type:"bytes",id:3},key_path:{rule:"repeated",type:"uint32",id:4,options:{packed:!1}},required_signatures_count:{type:"uint32",id:5},invalid_before:{type:"uint64",id:6},invalid_hereafter:{type:"uint64",id:7}}},CardanoGetNativeScriptHash:{fields:{script:{rule:"required",type:"CardanoNativeScript",id:1},display_format:{rule:"required",type:"CardanoNativeScriptHashDisplayFormat",id:2},derivation_type:{rule:"required",type:"CardanoDerivationType",id:3}}},CardanoNativeScriptHash:{fields:{script_hash:{rule:"required",type:"bytes",id:1}}},CardanoAddressParametersType:{fields:{address_type:{rule:"required",type:"CardanoAddressType",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},address_n_staking:{rule:"repeated",type:"uint32",id:3,options:{packed:!1}},staking_key_hash:{type:"bytes",id:4},certificate_pointer:{type:"CardanoBlockchainPointerType",id:5},script_payment_hash:{type:"bytes",id:6},script_staking_hash:{type:"bytes",id:7}}},CardanoGetAddress:{fields:{show_display:{type:"bool",id:2,options:{default:!1}},protocol_magic:{rule:"required",type:"uint32",id:3},network_id:{rule:"required",type:"uint32",id:4},address_parameters:{rule:"required",type:"CardanoAddressParametersType",id:5},derivation_type:{rule:"required",type:"CardanoDerivationType",id:6}}},CardanoAddress:{fields:{address:{rule:"required",type:"string",id:1}}},CardanoGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},derivation_type:{rule:"required",type:"CardanoDerivationType",id:3}}},CardanoPublicKey:{fields:{xpub:{rule:"required",type:"string",id:1},node:{rule:"required",type:"HDNodeType",id:2}}},CardanoSignTxInit:{fields:{signing_mode:{rule:"required",type:"CardanoTxSigningMode",id:1},protocol_magic:{rule:"required",type:"uint32",id:2},network_id:{rule:"required",type:"uint32",id:3},inputs_count:{rule:"required",type:"uint32",id:4},outputs_count:{rule:"required",type:"uint32",id:5},fee:{rule:"required",type:"uint64",id:6},ttl:{type:"uint64",id:7},certificates_count:{rule:"required",type:"uint32",id:8},withdrawals_count:{rule:"required",type:"uint32",id:9},has_auxiliary_data:{rule:"required",type:"bool",id:10},validity_interval_start:{type:"uint64",id:11},witness_requests_count:{rule:"required",type:"uint32",id:12},minting_asset_groups_count:{rule:"required",type:"uint32",id:13},derivation_type:{rule:"required",type:"CardanoDerivationType",id:14},include_network_id:{type:"bool",id:15,options:{default:!1}},script_data_hash:{type:"bytes",id:16},collateral_inputs_count:{rule:"required",type:"uint32",id:17},required_signers_count:{rule:"required",type:"uint32",id:18},has_collateral_return:{type:"bool",id:19,options:{default:!1}},total_collateral:{type:"uint64",id:20},reference_inputs_count:{type:"uint32",id:21,options:{default:0}}}},CardanoTxInput:{fields:{prev_hash:{rule:"required",type:"bytes",id:1},prev_index:{rule:"required",type:"uint32",id:2}}},CardanoTxOutput:{fields:{address:{type:"string",id:1},address_parameters:{type:"CardanoAddressParametersType",id:2},amount:{rule:"required",type:"uint64",id:3},asset_groups_count:{rule:"required",type:"uint32",id:4},datum_hash:{type:"bytes",id:5},format:{type:"CardanoTxOutputSerializationFormat",id:6,options:{default:"ARRAY_LEGACY"}},inline_datum_size:{type:"uint32",id:7,options:{default:0}},reference_script_size:{type:"uint32",id:8,options:{default:0}}}},CardanoAssetGroup:{fields:{policy_id:{rule:"required",type:"bytes",id:1},tokens_count:{rule:"required",type:"uint32",id:2}}},CardanoToken:{fields:{asset_name_bytes:{rule:"required",type:"bytes",id:1},amount:{type:"uint64",id:2},mint_amount:{type:"sint64",id:3}}},CardanoTxInlineDatumChunk:{fields:{data:{rule:"required",type:"bytes",id:1}}},CardanoTxReferenceScriptChunk:{fields:{data:{rule:"required",type:"bytes",id:1}}},CardanoPoolOwner:{fields:{staking_key_path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},staking_key_hash:{type:"bytes",id:2}}},CardanoPoolRelayParameters:{fields:{type:{rule:"required",type:"CardanoPoolRelayType",id:1},ipv4_address:{type:"bytes",id:2},ipv6_address:{type:"bytes",id:3},host_name:{type:"string",id:4},port:{type:"uint32",id:5}}},CardanoPoolMetadataType:{fields:{url:{rule:"required",type:"string",id:1},hash:{rule:"required",type:"bytes",id:2}}},CardanoPoolParametersType:{fields:{pool_id:{rule:"required",type:"bytes",id:1},vrf_key_hash:{rule:"required",type:"bytes",id:2},pledge:{rule:"required",type:"uint64",id:3},cost:{rule:"required",type:"uint64",id:4},margin_numerator:{rule:"required",type:"uint64",id:5},margin_denominator:{rule:"required",type:"uint64",id:6},reward_account:{rule:"required",type:"string",id:7},metadata:{type:"CardanoPoolMetadataType",id:10},owners_count:{rule:"required",type:"uint32",id:11},relays_count:{rule:"required",type:"uint32",id:12}}},CardanoTxCertificate:{fields:{type:{rule:"required",type:"CardanoCertificateType",id:1},path:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},pool:{type:"bytes",id:3},pool_parameters:{type:"CardanoPoolParametersType",id:4},script_hash:{type:"bytes",id:5},key_hash:{type:"bytes",id:6}}},CardanoTxWithdrawal:{fields:{path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},amount:{rule:"required",type:"uint64",id:2},script_hash:{type:"bytes",id:3},key_hash:{type:"bytes",id:4}}},CardanoGovernanceRegistrationDelegation:{fields:{voting_public_key:{rule:"required",type:"bytes",id:1},weight:{rule:"required",type:"uint32",id:2}}},CardanoGovernanceRegistrationParametersType:{fields:{voting_public_key:{type:"bytes",id:1},staking_path:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},reward_address_parameters:{rule:"required",type:"CardanoAddressParametersType",id:3},nonce:{rule:"required",type:"uint64",id:4},format:{type:"CardanoGovernanceRegistrationFormat",id:5,options:{default:"CIP15"}},delegations:{rule:"repeated",type:"CardanoGovernanceRegistrationDelegation",id:6},voting_purpose:{type:"uint64",id:7}}},CardanoTxAuxiliaryData:{fields:{governance_registration_parameters:{type:"CardanoGovernanceRegistrationParametersType",id:1},hash:{type:"bytes",id:2}}},CardanoTxMint:{fields:{asset_groups_count:{rule:"required",type:"uint32",id:1}}},CardanoTxCollateralInput:{fields:{prev_hash:{rule:"required",type:"bytes",id:1},prev_index:{rule:"required",type:"uint32",id:2}}},CardanoTxRequiredSigner:{fields:{key_hash:{type:"bytes",id:1},key_path:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}}}},CardanoTxReferenceInput:{fields:{prev_hash:{rule:"required",type:"bytes",id:1},prev_index:{rule:"required",type:"uint32",id:2}}},CardanoTxItemAck:{fields:{}},CardanoTxAuxiliaryDataSupplement:{fields:{type:{rule:"required",type:"CardanoTxAuxiliaryDataSupplementType",id:1},auxiliary_data_hash:{type:"bytes",id:2},governance_signature:{type:"bytes",id:3}}},CardanoTxWitnessRequest:{fields:{path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}},CardanoTxWitnessResponse:{fields:{type:{rule:"required",type:"CardanoTxWitnessType",id:1},pub_key:{rule:"required",type:"bytes",id:2},signature:{rule:"required",type:"bytes",id:3},chain_code:{type:"bytes",id:4}}},CardanoTxHostAck:{fields:{}},CardanoTxBodyHash:{fields:{tx_hash:{rule:"required",type:"bytes",id:1}}},CardanoSignTxFinished:{fields:{}},CardanoSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2},derivation_type:{rule:"required",type:"CardanoDerivationType",id:3},network_id:{rule:"required",type:"uint32",id:4}}},CardanoMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:1},key:{rule:"required",type:"bytes",id:2}}},Success:{fields:{message:{type:"string",id:1,options:{default:""}}}},Failure:{fields:{code:{type:"FailureType",id:1},message:{type:"string",id:2}},nested:{FailureType:{values:{Failure_UnexpectedMessage:1,Failure_ButtonExpected:2,Failure_DataError:3,Failure_ActionCancelled:4,Failure_PinExpected:5,Failure_PinCancelled:6,Failure_PinInvalid:7,Failure_InvalidSignature:8,Failure_ProcessError:9,Failure_NotEnoughFunds:10,Failure_NotInitialized:11,Failure_PinMismatch:12,Failure_WipeCodeMismatch:13,Failure_InvalidSession:14,Failure_FirmwareError:99}}}},ButtonRequest:{fields:{code:{type:"ButtonRequestType",id:1},pages:{type:"uint32",id:2}},nested:{ButtonRequestType:{values:{ButtonRequest_Other:1,ButtonRequest_FeeOverThreshold:2,ButtonRequest_ConfirmOutput:3,ButtonRequest_ResetDevice:4,ButtonRequest_ConfirmWord:5,ButtonRequest_WipeDevice:6,ButtonRequest_ProtectCall:7,ButtonRequest_SignTx:8,ButtonRequest_FirmwareCheck:9,ButtonRequest_Address:10,ButtonRequest_PublicKey:11,ButtonRequest_MnemonicWordCount:12,ButtonRequest_MnemonicInput:13,_Deprecated_ButtonRequest_PassphraseType:14,ButtonRequest_UnknownDerivationPath:15,ButtonRequest_RecoveryHomepage:16,ButtonRequest_Success:17,ButtonRequest_Warning:18,ButtonRequest_PassphraseEntry:19,ButtonRequest_PinEntry:20}}}},ButtonAck:{fields:{}},PinMatrixRequest:{fields:{type:{type:"PinMatrixRequestType",id:1}},nested:{PinMatrixRequestType:{values:{PinMatrixRequestType_Current:1,PinMatrixRequestType_NewFirst:2,PinMatrixRequestType_NewSecond:3,PinMatrixRequestType_WipeCodeFirst:4,PinMatrixRequestType_WipeCodeSecond:5,PinMatrixRequestType_BackupFirst:6,PinMatrixRequestType_BackupSecond:7}}}},PinMatrixAck:{fields:{pin:{rule:"required",type:"string",id:1},new_pin:{type:"string",id:2}}},PassphraseRequest:{fields:{_on_device:{type:"bool",id:1,options:{deprecated:!0}}}},PassphraseAck:{fields:{passphrase:{type:"string",id:1},_state:{type:"bytes",id:2,options:{deprecated:!0}},on_device:{type:"bool",id:3}}},Deprecated_PassphraseStateRequest:{options:{deprecated:!0},fields:{state:{type:"bytes",id:1}}},Deprecated_PassphraseStateAck:{options:{deprecated:!0},fields:{}},HDNodeType:{fields:{depth:{rule:"required",type:"uint32",id:1},fingerprint:{rule:"required",type:"uint32",id:2},child_num:{rule:"required",type:"uint32",id:3},chain_code:{rule:"required",type:"bytes",id:4},private_key:{type:"bytes",id:5},public_key:{rule:"required",type:"bytes",id:6}}},BixinPinInputOnDevice:{fields:{}},ConfluxGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},chain_id:{type:"uint32",id:3}}},ConfluxAddress:{fields:{address:{type:"string",id:1}}},ConfluxSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},nonce:{type:"bytes",id:2},gas_price:{type:"bytes",id:3},gas_limit:{type:"bytes",id:4},to:{type:"string",id:5},value:{type:"bytes",id:6},epoch_height:{type:"bytes",id:7},storage_limit:{type:"bytes",id:8},data_initial_chunk:{type:"bytes",id:9},data_length:{type:"uint32",id:10},chain_id:{type:"uint32",id:11}}},ConfluxTxRequest:{fields:{data_length:{type:"uint32",id:1},signature_v:{type:"uint32",id:2},signature_r:{type:"bytes",id:3},signature_s:{type:"bytes",id:4}}},ConfluxTxAck:{fields:{data_chunk:{type:"bytes",id:1}}},ConfluxSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{type:"bytes",id:2}}},ConfluxMessageSignature:{fields:{signature:{type:"bytes",id:2},address:{type:"string",id:3}}},ConfluxSignMessageCIP23:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},domain_hash:{type:"bytes",id:2},message_hash:{type:"bytes",id:3}}},CosmosGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},hrp:{type:"string",id:2},show_display:{type:"bool",id:3}}},CosmosAddress:{fields:{address:{type:"string",id:1}}},CosmosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},CosmosSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},CipherKeyValue:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},key:{rule:"required",type:"string",id:2},value:{rule:"required",type:"bytes",id:3},encrypt:{type:"bool",id:4},ask_on_encrypt:{type:"bool",id:5},ask_on_decrypt:{type:"bool",id:6},iv:{type:"bytes",id:7}}},CipheredKeyValue:{fields:{value:{rule:"required",type:"bytes",id:1}}},IdentityType:{fields:{proto:{type:"string",id:1},user:{type:"string",id:2},host:{type:"string",id:3},port:{type:"string",id:4},path:{type:"string",id:5},index:{type:"uint32",id:6,options:{default:0}}}},SignIdentity:{fields:{identity:{rule:"required",type:"IdentityType",id:1},challenge_hidden:{type:"bytes",id:2,options:{default:""}},challenge_visual:{type:"string",id:3,options:{default:""}},ecdsa_curve_name:{type:"string",id:4}}},SignedIdentity:{fields:{address:{type:"string",id:1},public_key:{rule:"required",type:"bytes",id:2},signature:{rule:"required",type:"bytes",id:3}}},GetECDHSessionKey:{fields:{identity:{rule:"required",type:"IdentityType",id:1},peer_public_key:{rule:"required",type:"bytes",id:2},ecdsa_curve_name:{type:"string",id:3}}},ECDHSessionKey:{fields:{session_key:{rule:"required",type:"bytes",id:1},public_key:{type:"bytes",id:2}}},CosiCommit:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},data:{type:"bytes",id:2}}},CosiCommitment:{fields:{commitment:{type:"bytes",id:1},pubkey:{type:"bytes",id:2}}},CosiSign:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},data:{type:"bytes",id:2},global_commitment:{type:"bytes",id:3},global_pubkey:{type:"bytes",id:4}}},CosiSignature:{fields:{signature:{rule:"required",type:"bytes",id:1}}},BatchGetPublickeys:{fields:{ecdsa_curve_name:{type:"string",id:1,options:{default:"ed25519"}},paths:{rule:"repeated",type:"Path",id:2}},nested:{Path:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}}}},EcdsaPublicKeys:{fields:{public_keys:{rule:"repeated",type:"bytes",id:1}}},DebugLinkDecision:{fields:{yes_no:{type:"bool",id:1},swipe:{type:"DebugSwipeDirection",id:2},input:{type:"string",id:3},x:{type:"uint32",id:4},y:{type:"uint32",id:5},wait:{type:"bool",id:6},hold_ms:{type:"uint32",id:7}},nested:{DebugSwipeDirection:{values:{UP:0,DOWN:1,LEFT:2,RIGHT:3}}}},DebugLinkLayout:{fields:{lines:{rule:"repeated",type:"string",id:1}}},DebugLinkReseedRandom:{fields:{value:{type:"uint32",id:1}}},DebugLinkRecordScreen:{fields:{target_directory:{type:"string",id:1}}},DebugLinkGetState:{fields:{wait_word_list:{type:"bool",id:1},wait_word_pos:{type:"bool",id:2},wait_layout:{type:"bool",id:3}}},DebugLinkState:{fields:{layout:{type:"bytes",id:1},pin:{type:"string",id:2},matrix:{type:"string",id:3},mnemonic_secret:{type:"bytes",id:4},node:{type:"HDNodeType",id:5},passphrase_protection:{type:"bool",id:6},reset_word:{type:"string",id:7},reset_entropy:{type:"bytes",id:8},recovery_fake_word:{type:"string",id:9},recovery_word_pos:{type:"uint32",id:10},reset_word_pos:{type:"uint32",id:11},mnemonic_type:{type:"BackupType",id:12},layout_lines:{rule:"repeated",type:"string",id:13}}},DebugLinkStop:{fields:{}},DebugLinkLog:{fields:{level:{type:"uint32",id:1},bucket:{type:"string",id:2},text:{type:"string",id:3}}},DebugLinkMemoryRead:{fields:{address:{type:"uint32",id:1},length:{type:"uint32",id:2}}},DebugLinkMemory:{fields:{memory:{type:"bytes",id:1}}},DebugLinkMemoryWrite:{fields:{address:{type:"uint32",id:1},memory:{type:"bytes",id:2},flash:{type:"bool",id:3}}},DebugLinkFlashErase:{fields:{sector:{type:"uint32",id:1}}},DebugLinkEraseSdCard:{fields:{format:{type:"bool",id:1}}},DebugLinkWatchLayout:{fields:{watch:{type:"bool",id:1}}},DnxGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},DnxAddress:{fields:{address:{type:"string",id:1}}},DnxSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},inputs_count:{rule:"required",type:"uint32",id:2},to_address:{rule:"required",type:"string",id:3},amount:{rule:"required",type:"uint64",id:4},fee:{rule:"required",type:"uint64",id:5},payment_id:{type:"bytes",id:6}}},DnxInputRequest:{fields:{request_index:{type:"uint32",id:1},tx_key:{type:"DnxTxKey",id:2},computed_key_image:{type:"DnxComputedKeyImage",id:3}},nested:{DnxTxKey:{fields:{ephemeral_tx_sec_key:{type:"bytes",id:1},ephemeral_tx_pub_key:{type:"bytes",id:2}}},DnxComputedKeyImage:{fields:{key_image:{type:"bytes",id:1}}}}},DnxInputAck:{fields:{prev_index:{rule:"required",type:"uint32",id:1},global_index:{rule:"required",type:"uint32",id:2},tx_pubkey:{rule:"required",type:"bytes",id:3},prev_out_pubkey:{rule:"required",type:"bytes",id:4},amount:{rule:"required",type:"uint64",id:5}}},DnxRTSigsRequest:{fields:{}},DnxSignedTx:{fields:{signatures:{rule:"repeated",type:"bytes",id:1},output_keys:{rule:"repeated",type:"bytes",id:2}}},EmmcFixPermission:{fields:{}},EmmcPath:{fields:{exist:{rule:"required",type:"bool",id:1},size:{rule:"required",type:"uint64",id:2},year:{rule:"required",type:"uint32",id:3},month:{rule:"required",type:"uint32",id:4},day:{rule:"required",type:"uint32",id:5},hour:{rule:"required",type:"uint32",id:6},minute:{rule:"required",type:"uint32",id:7},second:{rule:"required",type:"uint32",id:8},readonly:{rule:"required",type:"bool",id:9},hidden:{rule:"required",type:"bool",id:10},system:{rule:"required",type:"bool",id:11},archive:{rule:"required",type:"bool",id:12},directory:{rule:"required",type:"bool",id:13}}},EmmcPathInfo:{fields:{path:{rule:"required",type:"string",id:1}}},EmmcFile:{fields:{path:{rule:"required",type:"string",id:1},offset:{rule:"required",type:"uint32",id:2},len:{rule:"required",type:"uint32",id:3},data:{type:"bytes",id:4},data_hash:{type:"uint32",id:5},processed_byte:{type:"uint32",id:6}}},EmmcFileRead:{fields:{file:{rule:"required",type:"EmmcFile",id:1},ui_percentage:{type:"uint32",id:2}}},EmmcFileWrite:{fields:{file:{rule:"required",type:"EmmcFile",id:1},overwrite:{rule:"required",type:"bool",id:2},append:{rule:"required",type:"bool",id:3},ui_percentage:{type:"uint32",id:4}}},EmmcFileDelete:{fields:{path:{rule:"required",type:"string",id:1}}},EmmcDir:{fields:{path:{rule:"required",type:"string",id:1},child_dirs:{type:"string",id:2},child_files:{type:"string",id:3}}},EmmcDirList:{fields:{path:{rule:"required",type:"string",id:1}}},EmmcDirMake:{fields:{path:{rule:"required",type:"string",id:1}}},EmmcDirRemove:{fields:{path:{rule:"required",type:"string",id:1}}},EosGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},EosPublicKey:{fields:{wif_public_key:{rule:"required",type:"string",id:1},raw_public_key:{rule:"required",type:"bytes",id:2}}},EosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},chain_id:{type:"bytes",id:2},header:{type:"EosTxHeader",id:3},num_actions:{type:"uint32",id:4}},nested:{EosTxHeader:{fields:{expiration:{rule:"required",type:"uint32",id:1},ref_block_num:{rule:"required",type:"uint32",id:2},ref_block_prefix:{rule:"required",type:"uint32",id:3},max_net_usage_words:{rule:"required",type:"uint32",id:4},max_cpu_usage_ms:{rule:"required",type:"uint32",id:5},delay_sec:{rule:"required",type:"uint32",id:6}}}}},EosTxActionRequest:{fields:{data_size:{type:"uint32",id:1}}},EosTxActionAck:{fields:{common:{type:"EosActionCommon",id:1},transfer:{type:"EosActionTransfer",id:2},delegate:{type:"EosActionDelegate",id:3},undelegate:{type:"EosActionUndelegate",id:4},refund:{type:"EosActionRefund",id:5},buy_ram:{type:"EosActionBuyRam",id:6},buy_ram_bytes:{type:"EosActionBuyRamBytes",id:7},sell_ram:{type:"EosActionSellRam",id:8},vote_producer:{type:"EosActionVoteProducer",id:9},update_auth:{type:"EosActionUpdateAuth",id:10},delete_auth:{type:"EosActionDeleteAuth",id:11},link_auth:{type:"EosActionLinkAuth",id:12},unlink_auth:{type:"EosActionUnlinkAuth",id:13},new_account:{type:"EosActionNewAccount",id:14},unknown:{type:"EosActionUnknown",id:15}},nested:{EosAsset:{fields:{amount:{type:"sint64",id:1},symbol:{type:"uint64",id:2}}},EosPermissionLevel:{fields:{actor:{type:"uint64",id:1},permission:{type:"uint64",id:2}}},EosAuthorizationKey:{fields:{type:{rule:"required",type:"uint32",id:1},key:{type:"bytes",id:2},address_n:{rule:"repeated",type:"uint32",id:3,options:{packed:!1}},weight:{rule:"required",type:"uint32",id:4}}},EosAuthorizationAccount:{fields:{account:{type:"EosPermissionLevel",id:1},weight:{type:"uint32",id:2}}},EosAuthorizationWait:{fields:{wait_sec:{type:"uint32",id:1},weight:{type:"uint32",id:2}}},EosAuthorization:{fields:{threshold:{type:"uint32",id:1},keys:{rule:"repeated",type:"EosAuthorizationKey",id:2},accounts:{rule:"repeated",type:"EosAuthorizationAccount",id:3},waits:{rule:"repeated",type:"EosAuthorizationWait",id:4}}},EosActionCommon:{fields:{account:{type:"uint64",id:1},name:{type:"uint64",id:2},authorization:{rule:"repeated",type:"EosPermissionLevel",id:3}}},EosActionTransfer:{fields:{sender:{type:"uint64",id:1},receiver:{type:"uint64",id:2},quantity:{type:"EosAsset",id:3},memo:{type:"string",id:4}}},EosActionDelegate:{fields:{sender:{type:"uint64",id:1},receiver:{type:"uint64",id:2},net_quantity:{type:"EosAsset",id:3},cpu_quantity:{type:"EosAsset",id:4},transfer:{type:"bool",id:5}}},EosActionUndelegate:{fields:{sender:{type:"uint64",id:1},receiver:{type:"uint64",id:2},net_quantity:{type:"EosAsset",id:3},cpu_quantity:{type:"EosAsset",id:4}}},EosActionRefund:{fields:{owner:{type:"uint64",id:1}}},EosActionBuyRam:{fields:{payer:{type:"uint64",id:1},receiver:{type:"uint64",id:2},quantity:{type:"EosAsset",id:3}}},EosActionBuyRamBytes:{fields:{payer:{type:"uint64",id:1},receiver:{type:"uint64",id:2},bytes:{type:"uint32",id:3}}},EosActionSellRam:{fields:{account:{type:"uint64",id:1},bytes:{type:"uint64",id:2}}},EosActionVoteProducer:{fields:{voter:{type:"uint64",id:1},proxy:{type:"uint64",id:2},producers:{rule:"repeated",type:"uint64",id:3,options:{packed:!1}}}},EosActionUpdateAuth:{fields:{account:{type:"uint64",id:1},permission:{type:"uint64",id:2},parent:{type:"uint64",id:3},auth:{type:"EosAuthorization",id:4}}},EosActionDeleteAuth:{fields:{account:{type:"uint64",id:1},permission:{type:"uint64",id:2}}},EosActionLinkAuth:{fields:{account:{type:"uint64",id:1},code:{type:"uint64",id:2},type:{type:"uint64",id:3},requirement:{type:"uint64",id:4}}},EosActionUnlinkAuth:{fields:{account:{type:"uint64",id:1},code:{type:"uint64",id:2},type:{type:"uint64",id:3}}},EosActionNewAccount:{fields:{creator:{type:"uint64",id:1},name:{type:"uint64",id:2},owner:{type:"EosAuthorization",id:3},active:{type:"EosAuthorization",id:4}}},EosActionUnknown:{fields:{data_size:{rule:"required",type:"uint32",id:1},data_chunk:{type:"bytes",id:2}}}}},EosSignedTx:{fields:{signature:{rule:"required",type:"string",id:1}}},EthereumDefinitionType:{values:{NETWORK:0,TOKEN:1}},EthereumNetworkInfo:{fields:{chain_id:{rule:"required",type:"uint64",id:1},symbol:{rule:"required",type:"string",id:2},slip44:{rule:"required",type:"uint32",id:3},name:{rule:"required",type:"string",id:4},icon:{type:"string",id:101},primary_color:{type:"uint64",id:102}}},EthereumTokenInfo:{fields:{address:{rule:"required",type:"bytes",id:1},chain_id:{rule:"required",type:"uint64",id:2},symbol:{rule:"required",type:"string",id:3},decimals:{rule:"required",type:"uint32",id:4},name:{rule:"required",type:"string",id:5}}},EthereumDefinitions:{fields:{encoded_network:{type:"bytes",id:1},encoded_token:{type:"bytes",id:2}}},EthereumSignTypedDataOneKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},primary_type:{rule:"required",type:"string",id:2},metamask_v4_compat:{type:"bool",id:3,options:{default:!0}},chain_id:{type:"uint64",id:4}}},EthereumTypedDataStructRequestOneKey:{fields:{name:{rule:"required",type:"string",id:1}}},EthereumTypedDataStructAckOneKey:{fields:{members:{rule:"repeated",type:"EthereumStructMemberOneKey",id:1}},nested:{EthereumStructMemberOneKey:{fields:{type:{rule:"required",type:"EthereumFieldTypeOneKey",id:1},name:{rule:"required",type:"string",id:2}}},EthereumFieldTypeOneKey:{fields:{data_type:{rule:"required",type:"EthereumDataTypeOneKey",id:1},size:{type:"uint32",id:2},entry_type:{type:"EthereumFieldTypeOneKey",id:3},struct_name:{type:"string",id:4}}},EthereumDataTypeOneKey:{values:{UINT:1,INT:2,BYTES:3,STRING:4,BOOL:5,ADDRESS:6,ARRAY:7,STRUCT:8}}}},EthereumTypedDataValueRequestOneKey:{fields:{member_path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}},EthereumTypedDataValueAckOneKey:{fields:{value:{rule:"required",type:"bytes",id:1}}},EthereumSignTypedData:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},primary_type:{rule:"required",type:"string",id:2},metamask_v4_compat:{type:"bool",id:3,options:{default:!0}},definitions:{type:"EthereumDefinitions",id:4}}},EthereumTypedDataStructRequest:{fields:{name:{rule:"required",type:"string",id:1}}},EthereumTypedDataStructAck:{fields:{members:{rule:"repeated",type:"EthereumStructMember",id:1}},nested:{EthereumStructMember:{fields:{type:{rule:"required",type:"EthereumFieldType",id:1},name:{rule:"required",type:"string",id:2}}},EthereumFieldType:{fields:{data_type:{rule:"required",type:"EthereumDataType",id:1},size:{type:"uint32",id:2},entry_type:{type:"EthereumFieldType",id:3},struct_name:{type:"string",id:4}}},EthereumDataType:{values:{UINT:1,INT:2,BYTES:3,STRING:4,BOOL:5,ADDRESS:6,ARRAY:7,STRUCT:8}}}},EthereumTypedDataValueRequest:{fields:{member_path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}},EthereumTypedDataValueAck:{fields:{value:{rule:"required",type:"bytes",id:1}}},EthereumGetPublicKeyOneKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},chain_id:{type:"uint64",id:3}}},EthereumPublicKeyOneKey:{fields:{node:{rule:"required",type:"HDNodeType",id:1},xpub:{rule:"required",type:"string",id:2}}},EthereumGetAddressOneKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},chain_id:{type:"uint64",id:3}}},EthereumAddressOneKey:{fields:{_old_address:{type:"bytes",id:1,options:{deprecated:!0}},address:{type:"string",id:2}}},EthereumSignTxOneKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},nonce:{type:"bytes",id:2,options:{default:""}},gas_price:{rule:"required",type:"bytes",id:3},gas_limit:{rule:"required",type:"bytes",id:4},to:{type:"string",id:11,options:{default:""}},value:{type:"bytes",id:6,options:{default:""}},data_initial_chunk:{type:"bytes",id:7,options:{default:""}},data_length:{type:"uint32",id:8,options:{default:0}},chain_id:{rule:"required",type:"uint64",id:9},tx_type:{type:"uint32",id:10}}},EthereumSignTxEIP1559OneKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},nonce:{rule:"required",type:"bytes",id:2},max_gas_fee:{rule:"required",type:"bytes",id:3},max_priority_fee:{rule:"required",type:"bytes",id:4},gas_limit:{rule:"required",type:"bytes",id:5},to:{type:"string",id:6,options:{default:""}},value:{rule:"required",type:"bytes",id:7},data_initial_chunk:{type:"bytes",id:8,options:{default:""}},data_length:{rule:"required",type:"uint32",id:9},chain_id:{rule:"required",type:"uint64",id:10},access_list:{rule:"repeated",type:"EthereumAccessListOneKey",id:11}},nested:{EthereumAccessListOneKey:{fields:{address:{rule:"required",type:"string",id:1},storage_keys:{rule:"repeated",type:"bytes",id:2}}}}},EthereumTxRequestOneKey:{fields:{data_length:{type:"uint32",id:1},signature_v:{type:"uint32",id:2},signature_r:{type:"bytes",id:3},signature_s:{type:"bytes",id:4}}},EthereumTxAckOneKey:{fields:{data_chunk:{rule:"required",type:"bytes",id:1}}},EthereumSignMessageOneKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2},chain_id:{type:"uint64",id:3}}},EthereumMessageSignatureOneKey:{fields:{signature:{rule:"required",type:"bytes",id:2},address:{rule:"required",type:"string",id:3}}},EthereumVerifyMessageOneKey:{fields:{signature:{rule:"required",type:"bytes",id:2},message:{rule:"required",type:"bytes",id:3},address:{rule:"required",type:"string",id:4},chain_id:{type:"uint64",id:5}}},EthereumSignTypedHashOneKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},domain_separator_hash:{rule:"required",type:"bytes",id:2},message_hash:{type:"bytes",id:3},chain_id:{type:"uint64",id:4}}},EthereumTypedDataSignatureOneKey:{fields:{signature:{rule:"required",type:"bytes",id:1},address:{rule:"required",type:"string",id:2}}},EthereumSignMessageEIP712:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},domain_hash:{type:"bytes",id:2},message_hash:{type:"bytes",id:3}}},EthereumGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},EthereumPublicKey:{fields:{node:{rule:"required",type:"HDNodeType",id:1},xpub:{rule:"required",type:"string",id:2}}},EthereumGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},encoded_network:{type:"bytes",id:3}}},EthereumAddress:{fields:{_old_address:{type:"bytes",id:1,options:{deprecated:!0}},address:{type:"string",id:2}}},EthereumSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},nonce:{type:"bytes",id:2,options:{default:""}},gas_price:{rule:"required",type:"bytes",id:3},gas_limit:{rule:"required",type:"bytes",id:4},to:{type:"string",id:11,options:{default:""}},value:{type:"bytes",id:6,options:{default:""}},data_initial_chunk:{type:"bytes",id:7,options:{default:""}},data_length:{type:"uint32",id:8,options:{default:0}},chain_id:{rule:"required",type:"uint64",id:9},tx_type:{type:"uint32",id:10},definitions:{type:"EthereumDefinitions",id:12}}},EthereumSignTxEIP1559:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},nonce:{rule:"required",type:"bytes",id:2},max_gas_fee:{rule:"required",type:"bytes",id:3},max_priority_fee:{rule:"required",type:"bytes",id:4},gas_limit:{rule:"required",type:"bytes",id:5},to:{type:"string",id:6,options:{default:""}},value:{rule:"required",type:"bytes",id:7},data_initial_chunk:{type:"bytes",id:8,options:{default:""}},data_length:{rule:"required",type:"uint32",id:9},chain_id:{rule:"required",type:"uint64",id:10},access_list:{rule:"repeated",type:"EthereumAccessList",id:11},definitions:{type:"EthereumDefinitions",id:12}},nested:{EthereumAccessList:{fields:{address:{rule:"required",type:"string",id:1},storage_keys:{rule:"repeated",type:"bytes",id:2}}}}},EthereumTxRequest:{fields:{data_length:{type:"uint32",id:1},signature_v:{type:"uint32",id:2},signature_r:{type:"bytes",id:3},signature_s:{type:"bytes",id:4}}},EthereumTxAck:{fields:{data_chunk:{rule:"required",type:"bytes",id:1}}},EthereumSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2},encoded_network:{type:"bytes",id:3}}},EthereumMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:2},address:{rule:"required",type:"string",id:3}}},EthereumVerifyMessage:{fields:{signature:{rule:"required",type:"bytes",id:2},message:{rule:"required",type:"bytes",id:3},address:{rule:"required",type:"string",id:4}}},EthereumSignTypedHash:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},domain_separator_hash:{rule:"required",type:"bytes",id:2},message_hash:{type:"bytes",id:3},encoded_network:{type:"bytes",id:4}}},EthereumTypedDataSignature:{fields:{signature:{rule:"required",type:"bytes",id:1},address:{rule:"required",type:"string",id:2}}},FilecoinGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},testnet:{type:"bool",id:3}}},FilecoinAddress:{fields:{address:{type:"string",id:1}}},FilecoinSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2},testnet:{type:"bool",id:3}}},FilecoinSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},KaspaGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},prefix:{type:"string",id:3,options:{default:"kaspa"}},scheme:{type:"string",id:4,options:{default:"schnorr"}}}},KaspaAddress:{fields:{address:{rule:"required",type:"string",id:1}}},KaspaSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_message:{rule:"required",type:"bytes",id:2},scheme:{type:"string",id:3,options:{default:"schnorr"}},prefix:{type:"string",id:4,options:{default:"kaspa"}},input_count:{type:"uint32",id:5,options:{default:1}}}},KaspaTxInputRequest:{fields:{request_index:{rule:"required",type:"uint32",id:1},signature:{type:"bytes",id:2}}},KaspaTxInputAck:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_message:{rule:"required",type:"bytes",id:2}}},KaspaSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:2}}},LnurlAuth:{fields:{domain:{rule:"required",type:"bytes",id:2},data:{rule:"required",type:"bytes",id:3}}},LnurlAuthResp:{fields:{publickey:{type:"string",id:1},path:{type:"string",id:2},signature:{type:"bytes",id:3}}},BackupType:{values:{Bip39:0,Slip39_Basic:1,Slip39_Advanced:2}},SafetyCheckLevel:{values:{Strict:0,PromptAlways:1,PromptTemporarily:2}},Initialize:{fields:{session_id:{type:"bytes",id:1},_skip_passphrase:{type:"bool",id:2,options:{deprecated:!0}},derive_cardano:{type:"bool",id:3}}},GetFeatures:{fields:{}},Features:{fields:{vendor:{type:"string",id:1},major_version:{rule:"required",type:"uint32",id:2},minor_version:{rule:"required",type:"uint32",id:3},patch_version:{rule:"required",type:"uint32",id:4},bootloader_mode:{type:"bool",id:5},device_id:{type:"string",id:6},pin_protection:{type:"bool",id:7},passphrase_protection:{type:"bool",id:8},language:{type:"string",id:9},label:{type:"string",id:10},initialized:{type:"bool",id:12},revision:{type:"bytes",id:13},bootloader_hash:{type:"bytes",id:14},imported:{type:"bool",id:15},unlocked:{type:"bool",id:16},_passphrase_cached:{type:"bool",id:17,options:{deprecated:!0}},firmware_present:{type:"bool",id:18},needs_backup:{type:"bool",id:19},flags:{type:"uint32",id:20},model:{type:"string",id:21},fw_major:{type:"uint32",id:22},fw_minor:{type:"uint32",id:23},fw_patch:{type:"uint32",id:24},fw_vendor:{type:"string",id:25},fw_vendor_keys:{type:"bytes",id:26},unfinished_backup:{type:"bool",id:27},no_backup:{type:"bool",id:28},recovery_mode:{type:"bool",id:29},capabilities:{rule:"repeated",type:"Capability",id:30,options:{packed:!1}},backup_type:{type:"BackupType",id:31},sd_card_present:{type:"bool",id:32},sd_protection:{type:"bool",id:33},wipe_code_protection:{type:"bool",id:34},session_id:{type:"bytes",id:35},passphrase_always_on_device:{type:"bool",id:36},safety_checks:{type:"SafetyCheckLevel",id:37},auto_lock_delay_ms:{type:"uint32",id:38},display_rotation:{type:"uint32",id:39},experimental_features:{type:"bool",id:40},offset:{type:"uint32",id:500},ble_name:{type:"string",id:501},ble_ver:{type:"string",id:502},ble_enable:{type:"bool",id:503},se_enable:{type:"bool",id:504},se_ver:{type:"string",id:506},backup_only:{type:"bool",id:507},onekey_version:{type:"string",id:508},onekey_serial:{type:"string",id:509},bootloader_version:{type:"string",id:510},serial_no:{type:"string",id:511},spi_flash:{type:"string",id:512},initstates:{type:"uint32",id:513},NFT_voucher:{type:"bytes",id:514},cpu_info:{type:"string",id:515},pre_firmware:{type:"string",id:516},coin_switch:{type:"uint32",id:517},build_id:{type:"string",id:518},battery_level:{type:"uint32",id:520},onekey_device_type:{type:"OneKeyDeviceType",id:600},onekey_se_type:{type:"OneKeySeType",id:601},onekey_board_version:{type:"string",id:602},onekey_board_hash:{type:"bytes",id:603},onekey_boot_version:{type:"string",id:604},onekey_boot_hash:{type:"bytes",id:605},onekey_se_version:{type:"string",id:606},onekey_se_hash:{type:"bytes",id:607},onekey_se_build_id:{type:"string",id:608},onekey_firmware_version:{type:"string",id:609},onekey_firmware_hash:{type:"bytes",id:610},onekey_firmware_build_id:{type:"string",id:611},onekey_serial_no:{type:"string",id:612},onekey_boot_build_id:{type:"string",id:613},onekey_ble_name:{type:"string",id:614},onekey_ble_version:{type:"string",id:615},onekey_ble_build_id:{type:"string",id:616},onekey_ble_hash:{type:"bytes",id:617}},nested:{Capability:{options:{"(has_bitcoin_only_values)":!0},values:{Capability_Bitcoin:1,Capability_Bitcoin_like:2,Capability_Binance:3,Capability_Cardano:4,Capability_Crypto:5,Capability_EOS:6,Capability_Ethereum:7,Capability_Lisk:8,Capability_Monero:9,Capability_NEM:10,Capability_Ripple:11,Capability_Stellar:12,Capability_Tezos:13,Capability_U2F:14,Capability_Shamir:15,Capability_ShamirGroups:16,Capability_PassphraseEntry:17}},OneKeyDeviceType:{values:{CLASSIC:0,CLASSIC1S:1,MINI:2,TOUCH:3,PRO:5}},OneKeySeType:{values:{THD89:0,SE608A:1}}}},LockDevice:{fields:{}},EndSession:{fields:{}},ApplySettings:{fields:{language:{type:"string",id:1},label:{type:"string",id:2},use_passphrase:{type:"bool",id:3},homescreen:{type:"bytes",id:4},_passphrase_source:{type:"uint32",id:5,options:{deprecated:!0}},auto_lock_delay_ms:{type:"uint32",id:6},display_rotation:{type:"uint32",id:7},passphrase_always_on_device:{type:"bool",id:8},safety_checks:{type:"SafetyCheckLevel",id:9},experimental_features:{type:"bool",id:10},use_ble:{type:"bool",id:100},use_se:{type:"bool",id:101},is_bixinapp:{type:"bool",id:102},fastpay_pin:{type:"bool",id:103},fastpay_confirm:{type:"bool",id:104},fastpay_money_limit:{type:"uint64",id:105},fastpay_times:{type:"uint32",id:106}},nested:{ExportType:{values:{SeedEncExportType_NO:0,SeedEncExportType_YES:1,MnemonicPlainExportType_YES:2}}}},ApplyFlags:{fields:{flags:{rule:"required",type:"uint32",id:1}}},ChangePin:{fields:{remove:{type:"bool",id:1}}},ChangeWipeCode:{fields:{remove:{type:"bool",id:1}}},SdProtect:{fields:{operation:{rule:"required",type:"SdProtectOperationType",id:1}},nested:{SdProtectOperationType:{values:{DISABLE:0,ENABLE:1,REFRESH:2}}}},Ping:{fields:{message:{type:"string",id:1,options:{default:""}},button_protection:{type:"bool",id:2}}},Cancel:{fields:{}},GetEntropy:{fields:{size:{rule:"required",type:"uint32",id:1}}},Entropy:{fields:{entropy:{rule:"required",type:"bytes",id:1}}},WipeDevice:{fields:{}},LoadDevice:{fields:{mnemonics:{rule:"repeated",type:"string",id:1},pin:{type:"string",id:3},passphrase_protection:{type:"bool",id:4},language:{type:"string",id:5,options:{default:"en-US"}},label:{type:"string",id:6},skip_checksum:{type:"bool",id:7},u2f_counter:{type:"uint32",id:8},needs_backup:{type:"bool",id:9},no_backup:{type:"bool",id:10}}},ResetDevice:{fields:{display_random:{type:"bool",id:1},strength:{type:"uint32",id:2,options:{default:256}},passphrase_protection:{type:"bool",id:3},pin_protection:{type:"bool",id:4},language:{type:"string",id:5,options:{default:"en-US"}},label:{type:"string",id:6},u2f_counter:{type:"uint32",id:7},skip_backup:{type:"bool",id:8},no_backup:{type:"bool",id:9},backup_type:{type:"BackupType",id:10,options:{default:"Bip39"}}}},BackupDevice:{fields:{}},EntropyRequest:{fields:{}},EntropyAck:{fields:{entropy:{rule:"required",type:"bytes",id:1}}},RecoveryDevice:{fields:{word_count:{type:"uint32",id:1},passphrase_protection:{type:"bool",id:2},pin_protection:{type:"bool",id:3},language:{type:"string",id:4},label:{type:"string",id:5},enforce_wordlist:{type:"bool",id:6},type:{type:"RecoveryDeviceType",id:8},u2f_counter:{type:"uint32",id:9},dry_run:{type:"bool",id:10}},nested:{RecoveryDeviceType:{values:{RecoveryDeviceType_ScrambledWords:0,RecoveryDeviceType_Matrix:1}}}},WordRequest:{fields:{type:{rule:"required",type:"WordRequestType",id:1}},nested:{WordRequestType:{values:{WordRequestType_Plain:0,WordRequestType_Matrix9:1,WordRequestType_Matrix6:2}}}},WordAck:{fields:{word:{rule:"required",type:"string",id:1}}},SetU2FCounter:{fields:{u2f_counter:{rule:"required",type:"uint32",id:1}}},GetNextU2FCounter:{fields:{}},NextU2FCounter:{fields:{u2f_counter:{rule:"required",type:"uint32",id:1}}},DoPreauthorized:{fields:{}},PreauthorizedRequest:{fields:{}},CancelAuthorization:{fields:{}},BixinSeedOperate:{fields:{type:{rule:"required",type:"SeedRequestType",id:1},seed_importData:{type:"bytes",id:2}},nested:{SeedRequestType:{values:{SeedRequestType_Gen:0,SeedRequestType_EncExport:1,SeedRequestType_EncImport:2}}}},BixinMessageSE:{fields:{inputmessage:{rule:"required",type:"bytes",id:1}}},BixinOutMessageSE:{fields:{outmessage:{type:"bytes",id:1}}},DeviceBackToBoot:{fields:{}},BixinBackupRequest:{fields:{}},BixinBackupAck:{fields:{data:{rule:"required",type:"bytes",id:1}}},BixinRestoreRequest:{fields:{data:{rule:"required",type:"bytes",id:1},language:{type:"string",id:2},label:{type:"string",id:3},passphrase_protection:{type:"bool",id:4}}},BixinRestoreAck:{fields:{data:{rule:"required",type:"bytes",id:1}}},BixinVerifyDeviceRequest:{fields:{data:{rule:"required",type:"bytes",id:1}}},BixinVerifyDeviceAck:{fields:{cert:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},BixinWhiteListRequest:{fields:{type:{rule:"required",type:"WL_OperationType",id:1},addr_in:{type:"string",id:2}},nested:{WL_OperationType:{values:{WL_OperationType_Add:0,WL_OperationType_Delete:1,WL_OperationType_Inquire:2}}}},BixinWhiteListAck:{fields:{address:{rule:"repeated",type:"string",id:1}}},BixinLoadDevice:{fields:{mnemonics:{rule:"required",type:"string",id:1},language:{type:"string",id:5,options:{default:"en-US"}},label:{type:"string",id:6},skip_checksum:{type:"bool",id:7}}},BixinBackupDevice:{fields:{}},BixinBackupDeviceAck:{fields:{mnemonics:{rule:"required",type:"string",id:1}}},DeviceInfoSettings:{fields:{serial_no:{type:"string",id:1},cpu_info:{type:"string",id:2},pre_firmware:{type:"string",id:3}}},GetDeviceInfo:{fields:{}},DeviceInfo:{fields:{serial_no:{type:"string",id:1},spiFlash_info:{type:"string",id:2},SE_info:{type:"string",id:3},NFT_voucher:{type:"bytes",id:4},cpu_info:{type:"string",id:5},pre_firmware:{type:"string",id:6}}},ReadSEPublicKey:{fields:{}},SEPublicKey:{fields:{public_key:{rule:"required",type:"bytes",id:1}}},WriteSEPublicCert:{fields:{public_cert:{rule:"required",type:"bytes",id:1}}},ReadSEPublicCert:{fields:{}},SEPublicCert:{fields:{public_cert:{rule:"required",type:"bytes",id:1}}},SpiFlashWrite:{fields:{address:{rule:"required",type:"uint32",id:1},data:{rule:"required",type:"bytes",id:2}}},SpiFlashRead:{fields:{address:{rule:"required",type:"uint32",id:1},len:{rule:"required",type:"uint32",id:2}}},SpiFlashData:{fields:{data:{rule:"required",type:"bytes",id:1}}},SESignMessage:{fields:{message:{rule:"required",type:"bytes",id:1}}},SEMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:1}}},ResourceUpload:{fields:{extension:{rule:"required",type:"string",id:1},data_length:{rule:"required",type:"uint32",id:2},res_type:{rule:"required",type:"ResourceType",id:3},nft_meta_data:{type:"bytes",id:4},zoom_data_length:{rule:"required",type:"uint32",id:5},file_name_no_ext:{type:"string",id:6}},nested:{ResourceType:{values:{WallPaper:0,Nft:1}}}},ZoomRequest:{fields:{offset:{type:"uint32",id:1},data_length:{rule:"required",type:"uint32",id:2}}},ResourceRequest:{fields:{offset:{type:"uint32",id:1},data_length:{rule:"required",type:"uint32",id:2}}},ResourceAck:{fields:{data_chunk:{rule:"required",type:"bytes",id:1},hash:{type:"bytes",id:2}}},ResourceUpdate:{fields:{file_name:{rule:"required",type:"string",id:1},data_length:{rule:"required",type:"uint32",id:2},initial_data_chunk:{rule:"required",type:"bytes",id:3},hash:{type:"bytes",id:4}}},NFTWriteInfo:{fields:{index:{rule:"required",type:"uint32",id:1},width:{rule:"required",type:"uint32",id:2},height:{rule:"required",type:"uint32",id:3},name_zh:{type:"string",id:4},name_en:{type:"string",id:5}}},NFTWriteData:{fields:{index:{rule:"required",type:"uint32",id:1},data:{rule:"required",type:"bytes",id:2},offset:{rule:"required",type:"uint32",id:3}}},RebootToBootloader:{fields:{}},RebootToBoardloader:{fields:{}},ListResDir:{fields:{path:{rule:"required",type:"string",id:1}}},FileInfoList:{fields:{files:{rule:"repeated",type:"FileInfo",id:1}},nested:{FileInfo:{fields:{name:{rule:"required",type:"string",id:1},size:{rule:"required",type:"uint64",id:2}}}}},DeviceEraseSector:{fields:{sector:{rule:"required",type:"uint32",id:1}}},MoneroTransactionSourceEntry:{fields:{outputs:{rule:"repeated",type:"MoneroOutputEntry",id:1},real_output:{type:"uint64",id:2},real_out_tx_key:{type:"bytes",id:3},real_out_additional_tx_keys:{rule:"repeated",type:"bytes",id:4},real_output_in_tx_index:{type:"uint64",id:5},amount:{type:"uint64",id:6},rct:{type:"bool",id:7},mask:{type:"bytes",id:8},multisig_kLRki:{type:"MoneroMultisigKLRki",id:9},subaddr_minor:{type:"uint32",id:10}},nested:{MoneroOutputEntry:{fields:{idx:{type:"uint64",id:1},key:{type:"MoneroRctKeyPublic",id:2}},nested:{MoneroRctKeyPublic:{fields:{dest:{type:"bytes",id:1},commitment:{type:"bytes",id:2}}}}},MoneroMultisigKLRki:{fields:{K:{type:"bytes",id:1},L:{type:"bytes",id:2},R:{type:"bytes",id:3},ki:{type:"bytes",id:4}}}}},MoneroTransactionDestinationEntry:{fields:{amount:{type:"uint64",id:1},addr:{type:"MoneroAccountPublicAddress",id:2},is_subaddress:{type:"bool",id:3},original:{type:"bytes",id:4},is_integrated:{type:"bool",id:5}},nested:{MoneroAccountPublicAddress:{fields:{spend_public_key:{type:"bytes",id:1},view_public_key:{type:"bytes",id:2}}}}},MoneroTransactionRsigData:{fields:{rsig_type:{type:"uint32",id:1},offload_type:{type:"uint32",id:2},grouping:{rule:"repeated",type:"uint64",id:3,options:{packed:!1}},mask:{type:"bytes",id:4},rsig:{type:"bytes",id:5},rsig_parts:{rule:"repeated",type:"bytes",id:6},bp_version:{type:"uint32",id:7}}},MoneroGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},network_type:{type:"uint32",id:3},account:{type:"uint32",id:4},minor:{type:"uint32",id:5},payment_id:{type:"bytes",id:6}}},MoneroAddress:{fields:{address:{type:"bytes",id:1}}},MoneroGetWatchKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network_type:{type:"uint32",id:2}}},MoneroWatchKey:{fields:{watch_key:{type:"bytes",id:1},address:{type:"bytes",id:2}}},MoneroTransactionInitRequest:{fields:{version:{type:"uint32",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},network_type:{type:"uint32",id:3},tsx_data:{type:"MoneroTransactionData",id:4}},nested:{MoneroTransactionData:{fields:{version:{type:"uint32",id:1},payment_id:{type:"bytes",id:2},unlock_time:{type:"uint64",id:3},outputs:{rule:"repeated",type:"MoneroTransactionDestinationEntry",id:4},change_dts:{type:"MoneroTransactionDestinationEntry",id:5},num_inputs:{type:"uint32",id:6},mixin:{type:"uint32",id:7},fee:{type:"uint64",id:8},account:{type:"uint32",id:9},minor_indices:{rule:"repeated",type:"uint32",id:10,options:{packed:!1}},rsig_data:{type:"MoneroTransactionRsigData",id:11},integrated_indices:{rule:"repeated",type:"uint32",id:12,options:{packed:!1}},client_version:{type:"uint32",id:13},hard_fork:{type:"uint32",id:14},monero_version:{type:"bytes",id:15}}}}},MoneroTransactionInitAck:{fields:{hmacs:{rule:"repeated",type:"bytes",id:1},rsig_data:{type:"MoneroTransactionRsigData",id:2}}},MoneroTransactionSetInputRequest:{fields:{src_entr:{type:"MoneroTransactionSourceEntry",id:1}}},MoneroTransactionSetInputAck:{fields:{vini:{type:"bytes",id:1},vini_hmac:{type:"bytes",id:2},pseudo_out:{type:"bytes",id:3},pseudo_out_hmac:{type:"bytes",id:4},pseudo_out_alpha:{type:"bytes",id:5},spend_key:{type:"bytes",id:6}}},MoneroTransactionInputsPermutationRequest:{fields:{perm:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}},MoneroTransactionInputsPermutationAck:{fields:{}},MoneroTransactionInputViniRequest:{fields:{src_entr:{type:"MoneroTransactionSourceEntry",id:1},vini:{type:"bytes",id:2},vini_hmac:{type:"bytes",id:3},pseudo_out:{type:"bytes",id:4},pseudo_out_hmac:{type:"bytes",id:5},orig_idx:{type:"uint32",id:6}}},MoneroTransactionInputViniAck:{fields:{}},MoneroTransactionAllInputsSetRequest:{fields:{}},MoneroTransactionAllInputsSetAck:{fields:{rsig_data:{type:"MoneroTransactionRsigData",id:1}}},MoneroTransactionSetOutputRequest:{fields:{dst_entr:{type:"MoneroTransactionDestinationEntry",id:1},dst_entr_hmac:{type:"bytes",id:2},rsig_data:{type:"MoneroTransactionRsigData",id:3},is_offloaded_bp:{type:"bool",id:4}}},MoneroTransactionSetOutputAck:{fields:{tx_out:{type:"bytes",id:1},vouti_hmac:{type:"bytes",id:2},rsig_data:{type:"MoneroTransactionRsigData",id:3},out_pk:{type:"bytes",id:4},ecdh_info:{type:"bytes",id:5}}},MoneroTransactionAllOutSetRequest:{fields:{rsig_data:{type:"MoneroTransactionRsigData",id:1}}},MoneroTransactionAllOutSetAck:{fields:{extra:{type:"bytes",id:1},tx_prefix_hash:{type:"bytes",id:2},rv:{type:"MoneroRingCtSig",id:4},full_message_hash:{type:"bytes",id:5}},nested:{MoneroRingCtSig:{fields:{txn_fee:{type:"uint64",id:1},message:{type:"bytes",id:2},rv_type:{type:"uint32",id:3}}}}},MoneroTransactionSignInputRequest:{fields:{src_entr:{type:"MoneroTransactionSourceEntry",id:1},vini:{type:"bytes",id:2},vini_hmac:{type:"bytes",id:3},pseudo_out:{type:"bytes",id:4},pseudo_out_hmac:{type:"bytes",id:5},pseudo_out_alpha:{type:"bytes",id:6},spend_key:{type:"bytes",id:7},orig_idx:{type:"uint32",id:8}}},MoneroTransactionSignInputAck:{fields:{signature:{type:"bytes",id:1},pseudo_out:{type:"bytes",id:2}}},MoneroTransactionFinalRequest:{fields:{}},MoneroTransactionFinalAck:{fields:{cout_key:{type:"bytes",id:1},salt:{type:"bytes",id:2},rand_mult:{type:"bytes",id:3},tx_enc_keys:{type:"bytes",id:4},opening_key:{type:"bytes",id:5}}},MoneroKeyImageExportInitRequest:{fields:{num:{type:"uint64",id:1},hash:{type:"bytes",id:2},address_n:{rule:"repeated",type:"uint32",id:3,options:{packed:!1}},network_type:{type:"uint32",id:4},subs:{rule:"repeated",type:"MoneroSubAddressIndicesList",id:5}},nested:{MoneroSubAddressIndicesList:{fields:{account:{type:"uint32",id:1},minor_indices:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}}}}}},MoneroKeyImageExportInitAck:{fields:{}},MoneroKeyImageSyncStepRequest:{fields:{tdis:{rule:"repeated",type:"MoneroTransferDetails",id:1}},nested:{MoneroTransferDetails:{fields:{out_key:{type:"bytes",id:1},tx_pub_key:{type:"bytes",id:2},additional_tx_pub_keys:{rule:"repeated",type:"bytes",id:3},internal_output_index:{type:"uint64",id:4},sub_addr_major:{type:"uint32",id:5},sub_addr_minor:{type:"uint32",id:6}}}}},MoneroKeyImageSyncStepAck:{fields:{kis:{rule:"repeated",type:"MoneroExportedKeyImage",id:1}},nested:{MoneroExportedKeyImage:{fields:{iv:{type:"bytes",id:1},blob:{type:"bytes",id:3}}}}},MoneroKeyImageSyncFinalRequest:{fields:{}},MoneroKeyImageSyncFinalAck:{fields:{enc_key:{type:"bytes",id:1}}},MoneroGetTxKeyRequest:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network_type:{type:"uint32",id:2},salt1:{type:"bytes",id:3},salt2:{type:"bytes",id:4},tx_enc_keys:{type:"bytes",id:5},tx_prefix_hash:{type:"bytes",id:6},reason:{type:"uint32",id:7},view_public_key:{type:"bytes",id:8}}},MoneroGetTxKeyAck:{fields:{salt:{type:"bytes",id:1},tx_keys:{type:"bytes",id:2},tx_derivations:{type:"bytes",id:3}}},MoneroLiveRefreshStartRequest:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network_type:{type:"uint32",id:2}}},MoneroLiveRefreshStartAck:{fields:{}},MoneroLiveRefreshStepRequest:{fields:{out_key:{type:"bytes",id:1},recv_deriv:{type:"bytes",id:2},real_out_idx:{type:"uint64",id:3},sub_addr_major:{type:"uint32",id:4},sub_addr_minor:{type:"uint32",id:5}}},MoneroLiveRefreshStepAck:{fields:{salt:{type:"bytes",id:1},key_image:{type:"bytes",id:2}}},MoneroLiveRefreshFinalRequest:{fields:{}},MoneroLiveRefreshFinalAck:{fields:{}},DebugMoneroDiagRequest:{fields:{ins:{type:"uint64",id:1},p1:{type:"uint64",id:2},p2:{type:"uint64",id:3},pd:{rule:"repeated",type:"uint64",id:4,options:{packed:!1}},data1:{type:"bytes",id:5},data2:{type:"bytes",id:6}}},DebugMoneroDiagAck:{fields:{ins:{type:"uint64",id:1},p1:{type:"uint64",id:2},p2:{type:"uint64",id:3},pd:{rule:"repeated",type:"uint64",id:4,options:{packed:!1}},data1:{type:"bytes",id:5},data2:{type:"bytes",id:6}}},NearGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},NearAddress:{fields:{address:{type:"string",id:1}}},NearSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},NearSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},NEMGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network:{type:"uint32",id:2},show_display:{type:"bool",id:3}}},NEMAddress:{fields:{address:{rule:"required",type:"string",id:1}}},NEMSignTx:{fields:{transaction:{type:"NEMTransactionCommon",id:1},multisig:{type:"NEMTransactionCommon",id:2},transfer:{type:"NEMTransfer",id:3},cosigning:{type:"bool",id:4},provision_namespace:{type:"NEMProvisionNamespace",id:5},mosaic_creation:{type:"NEMMosaicCreation",id:6},supply_change:{type:"NEMMosaicSupplyChange",id:7},aggregate_modification:{type:"NEMAggregateModification",id:8},importance_transfer:{type:"NEMImportanceTransfer",id:9}},nested:{NEMTransactionCommon:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network:{type:"uint32",id:2},timestamp:{type:"uint32",id:3},fee:{type:"uint64",id:4},deadline:{type:"uint32",id:5},signer:{type:"bytes",id:6}}},NEMTransfer:{fields:{recipient:{type:"string",id:1},amount:{type:"uint64",id:2},payload:{type:"bytes",id:3},public_key:{type:"bytes",id:4},mosaics:{rule:"repeated",type:"NEMMosaic",id:5}},nested:{NEMMosaic:{fields:{namespace:{type:"string",id:1},mosaic:{type:"string",id:2},quantity:{type:"uint64",id:3}}}}},NEMProvisionNamespace:{fields:{namespace:{type:"string",id:1},parent:{type:"string",id:2},sink:{type:"string",id:3},fee:{type:"uint64",id:4}}},NEMMosaicCreation:{fields:{definition:{type:"NEMMosaicDefinition",id:1},sink:{type:"string",id:2},fee:{type:"uint64",id:3}},nested:{NEMMosaicDefinition:{fields:{name:{type:"string",id:1},ticker:{type:"string",id:2},namespace:{type:"string",id:3},mosaic:{type:"string",id:4},divisibility:{type:"uint32",id:5},levy:{type:"NEMMosaicLevy",id:6},fee:{type:"uint64",id:7},levy_address:{type:"string",id:8},levy_namespace:{type:"string",id:9},levy_mosaic:{type:"string",id:10},supply:{type:"uint64",id:11},mutable_supply:{type:"bool",id:12},transferable:{type:"bool",id:13},description:{type:"string",id:14},networks:{rule:"repeated",type:"uint32",id:15,options:{packed:!1}}},nested:{NEMMosaicLevy:{values:{MosaicLevy_Absolute:1,MosaicLevy_Percentile:2}}}}}},NEMMosaicSupplyChange:{fields:{namespace:{type:"string",id:1},mosaic:{type:"string",id:2},type:{type:"NEMSupplyChangeType",id:3},delta:{type:"uint64",id:4}},nested:{NEMSupplyChangeType:{values:{SupplyChange_Increase:1,SupplyChange_Decrease:2}}}},NEMAggregateModification:{fields:{modifications:{rule:"repeated",type:"NEMCosignatoryModification",id:1},relative_change:{type:"sint32",id:2}},nested:{NEMCosignatoryModification:{fields:{type:{type:"NEMModificationType",id:1},public_key:{type:"bytes",id:2}},nested:{NEMModificationType:{values:{CosignatoryModification_Add:1,CosignatoryModification_Delete:2}}}}}},NEMImportanceTransfer:{fields:{mode:{type:"NEMImportanceTransferMode",id:1},public_key:{type:"bytes",id:2}},nested:{NEMImportanceTransferMode:{values:{ImportanceTransfer_Activate:1,ImportanceTransfer_Deactivate:2}}}}}},NEMSignedTx:{fields:{data:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},NEMDecryptMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network:{type:"uint32",id:2},public_key:{type:"bytes",id:3},payload:{type:"bytes",id:4}}},NEMDecryptedMessage:{fields:{payload:{rule:"required",type:"bytes",id:1}}},NervosGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network:{rule:"required",type:"string",id:2},show_display:{type:"bool",id:3}}},NervosAddress:{fields:{address:{rule:"required",type:"string",id:1}}},NervosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},data_initial_chunk:{rule:"required",type:"bytes",id:2},witness_buffer:{rule:"required",type:"bytes",id:3},network:{rule:"required",type:"string",id:4},data_length:{type:"uint32",id:5}}},NervosSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1},address:{rule:"required",type:"string",id:2}}},NervosTxRequest:{fields:{data_length:{type:"uint32",id:1},public_key:{type:"bytes",id:2},signature:{type:"bytes",id:3}}},NervosTxAck:{fields:{data_chunk:{rule:"required",type:"bytes",id:1}}},NexaGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},prefix:{type:"string",id:3,options:{default:"nexa"}}}},NexaAddress:{fields:{address:{rule:"required",type:"string",id:1},public_key:{rule:"required",type:"bytes",id:2}}},NexaSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_message:{rule:"required",type:"bytes",id:2},prefix:{type:"string",id:3,options:{default:"nexa"}},input_count:{type:"uint32",id:4,options:{default:1}}}},NexaTxInputRequest:{fields:{request_index:{rule:"required",type:"uint32",id:1},signature:{type:"bytes",id:2}}},NexaTxInputAck:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_message:{rule:"required",type:"bytes",id:2}}},NexaSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},NostrGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},NostrPublicKey:{fields:{publickey:{type:"string",id:1},npub:{type:"string",id:2}}},NostrSignEvent:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},event:{rule:"required",type:"bytes",id:2}}},NostrSignedEvent:{fields:{event:{rule:"required",type:"bytes",id:1}}},NostrSignSchnorr:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},hash:{rule:"required",type:"string",id:2}}},NostrSignedSchnorr:{fields:{signature:{rule:"required",type:"bytes",id:1}}},NostrEncryptMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},pubkey:{rule:"required",type:"string",id:2},msg:{rule:"required",type:"string",id:3},show_display:{type:"bool",id:4}}},NostrEncryptedMessage:{fields:{msg:{rule:"required",type:"string",id:1}}},NostrDecryptMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},pubkey:{rule:"required",type:"string",id:2},msg:{rule:"required",type:"string",id:3},show_display:{type:"bool",id:4}}},NostrDecryptedMessage:{fields:{msg:{rule:"required",type:"string",id:1}}},PolkadotGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},prefix:{rule:"required",type:"uint32",id:2},network:{rule:"required",type:"string",id:3},show_display:{type:"bool",id:4}}},PolkadotAddress:{fields:{address:{type:"string",id:1},public_key:{type:"string",id:2}}},PolkadotSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2},network:{rule:"required",type:"string",id:3}}},PolkadotSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},RippleGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},RippleAddress:{fields:{address:{rule:"required",type:"string",id:1}}},RippleSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},fee:{type:"uint64",id:2},flags:{type:"uint32",id:3},sequence:{type:"uint32",id:4},last_ledger_sequence:{type:"uint32",id:5},payment:{type:"RipplePayment",id:6}},nested:{RipplePayment:{fields:{amount:{rule:"required",type:"uint64",id:1},destination:{rule:"required",type:"string",id:2},destination_tag:{type:"uint32",id:3}}}}},RippleSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1},serialized_tx:{rule:"required",type:"bytes",id:2}}},SolanaGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},SolanaAddress:{fields:{address:{type:"string",id:1}}},SolanaSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},SolanaSignedTx:{fields:{signature:{type:"bytes",id:1}}},StarcoinGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},StarcoinAddress:{fields:{address:{type:"string",id:1}}},StarcoinGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},StarcoinPublicKey:{fields:{public_key:{rule:"required",type:"bytes",id:1}}},StarcoinSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{type:"bytes",id:2}}},StarcoinSignedTx:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},StarcoinSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{type:"bytes",id:2}}},StarcoinMessageSignature:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},StarcoinVerifyMessage:{fields:{public_key:{type:"bytes",id:1},signature:{type:"bytes",id:2},message:{type:"bytes",id:3}}},StellarAssetType:{values:{NATIVE:0,ALPHANUM4:1,ALPHANUM12:2}},StellarAsset:{fields:{type:{rule:"required",type:"StellarAssetType",id:1},code:{type:"string",id:2},issuer:{type:"string",id:3}}},StellarGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},StellarAddress:{fields:{address:{rule:"required",type:"string",id:1}}},StellarSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},network_passphrase:{rule:"required",type:"string",id:3},source_account:{rule:"required",type:"string",id:4},fee:{rule:"required",type:"uint32",id:5},sequence_number:{rule:"required",type:"uint64",id:6},timebounds_start:{rule:"required",type:"uint32",id:8},timebounds_end:{rule:"required",type:"uint32",id:9},memo_type:{rule:"required",type:"StellarMemoType",id:10},memo_text:{type:"string",id:11},memo_id:{type:"uint64",id:12},memo_hash:{type:"bytes",id:13},num_operations:{rule:"required",type:"uint32",id:14}},nested:{StellarMemoType:{values:{NONE:0,TEXT:1,ID:2,HASH:3,RETURN:4}}}},StellarTxOpRequest:{fields:{}},StellarPaymentOp:{fields:{source_account:{type:"string",id:1},destination_account:{rule:"required",type:"string",id:2},asset:{rule:"required",type:"StellarAsset",id:3},amount:{rule:"required",type:"sint64",id:4}}},StellarCreateAccountOp:{fields:{source_account:{type:"string",id:1},new_account:{rule:"required",type:"string",id:2},starting_balance:{rule:"required",type:"sint64",id:3}}},StellarPathPaymentStrictReceiveOp:{fields:{source_account:{type:"string",id:1},send_asset:{rule:"required",type:"StellarAsset",id:2},send_max:{rule:"required",type:"sint64",id:3},destination_account:{rule:"required",type:"string",id:4},destination_asset:{rule:"required",type:"StellarAsset",id:5},destination_amount:{rule:"required",type:"sint64",id:6},paths:{rule:"repeated",type:"StellarAsset",id:7}}},StellarPathPaymentStrictSendOp:{fields:{source_account:{type:"string",id:1},send_asset:{rule:"required",type:"StellarAsset",id:2},send_amount:{rule:"required",type:"sint64",id:3},destination_account:{rule:"required",type:"string",id:4},destination_asset:{rule:"required",type:"StellarAsset",id:5},destination_min:{rule:"required",type:"sint64",id:6},paths:{rule:"repeated",type:"StellarAsset",id:7}}},StellarManageSellOfferOp:{fields:{source_account:{type:"string",id:1},selling_asset:{rule:"required",type:"StellarAsset",id:2},buying_asset:{rule:"required",type:"StellarAsset",id:3},amount:{rule:"required",type:"sint64",id:4},price_n:{rule:"required",type:"uint32",id:5},price_d:{rule:"required",type:"uint32",id:6},offer_id:{rule:"required",type:"uint64",id:7}}},StellarManageBuyOfferOp:{fields:{source_account:{type:"string",id:1},selling_asset:{rule:"required",type:"StellarAsset",id:2},buying_asset:{rule:"required",type:"StellarAsset",id:3},amount:{rule:"required",type:"sint64",id:4},price_n:{rule:"required",type:"uint32",id:5},price_d:{rule:"required",type:"uint32",id:6},offer_id:{rule:"required",type:"uint64",id:7}}},StellarCreatePassiveSellOfferOp:{fields:{source_account:{type:"string",id:1},selling_asset:{rule:"required",type:"StellarAsset",id:2},buying_asset:{rule:"required",type:"StellarAsset",id:3},amount:{rule:"required",type:"sint64",id:4},price_n:{rule:"required",type:"uint32",id:5},price_d:{rule:"required",type:"uint32",id:6}}},StellarSetOptionsOp:{fields:{source_account:{type:"string",id:1},inflation_destination_account:{type:"string",id:2},clear_flags:{type:"uint32",id:3},set_flags:{type:"uint32",id:4},master_weight:{type:"uint32",id:5},low_threshold:{type:"uint32",id:6},medium_threshold:{type:"uint32",id:7},high_threshold:{type:"uint32",id:8},home_domain:{type:"string",id:9},signer_type:{type:"StellarSignerType",id:10},signer_key:{type:"bytes",id:11},signer_weight:{type:"uint32",id:12}},nested:{StellarSignerType:{values:{ACCOUNT:0,PRE_AUTH:1,HASH:2}}}},StellarChangeTrustOp:{fields:{source_account:{type:"string",id:1},asset:{rule:"required",type:"StellarAsset",id:2},limit:{rule:"required",type:"uint64",id:3}}},StellarAllowTrustOp:{fields:{source_account:{type:"string",id:1},trusted_account:{rule:"required",type:"string",id:2},asset_type:{rule:"required",type:"StellarAssetType",id:3},asset_code:{type:"string",id:4},is_authorized:{rule:"required",type:"bool",id:5}}},StellarAccountMergeOp:{fields:{source_account:{type:"string",id:1},destination_account:{rule:"required",type:"string",id:2}}},StellarManageDataOp:{fields:{source_account:{type:"string",id:1},key:{rule:"required",type:"string",id:2},value:{type:"bytes",id:3}}},StellarBumpSequenceOp:{fields:{source_account:{type:"string",id:1},bump_to:{rule:"required",type:"uint64",id:2}}},StellarSignedTx:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},SuiGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},SuiAddress:{fields:{address:{type:"string",id:1}}},SuiSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2},data_initial_chunk:{type:"bytes",id:3,options:{default:""}},data_length:{type:"uint32",id:4}}},SuiSignedTx:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},SuiTxRequest:{fields:{data_length:{type:"uint32",id:1},public_key:{type:"bytes",id:2},signature:{type:"bytes",id:3}}},SuiTxAck:{fields:{data_chunk:{rule:"required",type:"bytes",id:1}}},SuiSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2}}},SuiMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:1},address:{rule:"required",type:"string",id:2}}},TezosGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},TezosAddress:{fields:{address:{rule:"required",type:"string",id:1}}},TezosGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},TezosPublicKey:{fields:{public_key:{rule:"required",type:"string",id:1}}},TezosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},branch:{rule:"required",type:"bytes",id:2},reveal:{type:"TezosRevealOp",id:3},transaction:{type:"TezosTransactionOp",id:4},origination:{type:"TezosOriginationOp",id:5},delegation:{type:"TezosDelegationOp",id:6},proposal:{type:"TezosProposalOp",id:7},ballot:{type:"TezosBallotOp",id:8}},nested:{TezosContractID:{fields:{tag:{rule:"required",type:"TezosContractType",id:1},hash:{rule:"required",type:"bytes",id:2}},nested:{TezosContractType:{values:{Implicit:0,Originated:1}}}},TezosRevealOp:{fields:{source:{rule:"required",type:"bytes",id:7},fee:{rule:"required",type:"uint64",id:2},counter:{rule:"required",type:"uint64",id:3},gas_limit:{rule:"required",type:"uint64",id:4},storage_limit:{rule:"required",type:"uint64",id:5},public_key:{rule:"required",type:"bytes",id:6}}},TezosTransactionOp:{fields:{source:{rule:"required",type:"bytes",id:9},fee:{rule:"required",type:"uint64",id:2},counter:{rule:"required",type:"uint64",id:3},gas_limit:{rule:"required",type:"uint64",id:4},storage_limit:{rule:"required",type:"uint64",id:5},amount:{rule:"required",type:"uint64",id:6},destination:{rule:"required",type:"TezosContractID",id:7},parameters:{type:"bytes",id:8},parameters_manager:{type:"TezosParametersManager",id:10}},nested:{TezosParametersManager:{fields:{set_delegate:{type:"bytes",id:1},cancel_delegate:{type:"bool",id:2},transfer:{type:"TezosManagerTransfer",id:3}},nested:{TezosManagerTransfer:{fields:{destination:{type:"TezosContractID",id:1},amount:{type:"uint64",id:2}}}}}}},TezosOriginationOp:{fields:{source:{rule:"required",type:"bytes",id:12},fee:{rule:"required",type:"uint64",id:2},counter:{rule:"required",type:"uint64",id:3},gas_limit:{rule:"required",type:"uint64",id:4},storage_limit:{rule:"required",type:"uint64",id:5},manager_pubkey:{type:"bytes",id:6},balance:{rule:"required",type:"uint64",id:7},spendable:{type:"bool",id:8},delegatable:{type:"bool",id:9},delegate:{type:"bytes",id:10},script:{rule:"required",type:"bytes",id:11}}},TezosDelegationOp:{fields:{source:{rule:"required",type:"bytes",id:7},fee:{rule:"required",type:"uint64",id:2},counter:{rule:"required",type:"uint64",id:3},gas_limit:{rule:"required",type:"uint64",id:4},storage_limit:{rule:"required",type:"uint64",id:5},delegate:{rule:"required",type:"bytes",id:6}}},TezosProposalOp:{fields:{source:{type:"bytes",id:1},period:{type:"uint64",id:2},proposals:{rule:"repeated",type:"bytes",id:4}}},TezosBallotOp:{fields:{source:{type:"bytes",id:1},period:{type:"uint64",id:2},proposal:{type:"bytes",id:3},ballot:{type:"TezosBallotType",id:4}},nested:{TezosBallotType:{values:{Yay:0,Nay:1,Pass:2}}}}}},TezosSignedTx:{fields:{signature:{rule:"required",type:"string",id:1},sig_op_contents:{rule:"required",type:"bytes",id:2},operation_hash:{rule:"required",type:"string",id:3}}},TronGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},TronAddress:{fields:{address:{type:"string",id:1}}},TronSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},ref_block_bytes:{rule:"required",type:"bytes",id:2},ref_block_hash:{rule:"required",type:"bytes",id:3},expiration:{rule:"required",type:"uint64",id:4},data:{type:"string",id:5},contract:{rule:"required",type:"TronContract",id:6},timestamp:{rule:"required",type:"uint64",id:7},fee_limit:{type:"uint64",id:8}},nested:{TronContract:{fields:{transfer_contract:{type:"TronTransferContract",id:2},freeze_balance_contract:{type:"TronFreezeBalanceContract",id:11},unfreeze_balance_contract:{type:"TronUnfreezeBalanceContract",id:12},withdraw_balance_contract:{type:"TronWithdrawBalanceContract",id:13},trigger_smart_contract:{type:"TronTriggerSmartContract",id:31},freeze_balance_v2_contract:{type:"TronFreezeBalanceV2Contract",id:54},unfreeze_balance_v2_contract:{type:"TronUnfreezeBalanceV2Contract",id:55},withdraw_expire_unfreeze_contract:{type:"TronWithdrawExpireUnfreezeContract",id:56},delegate_resource_contract:{type:"TronDelegateResourceContract",id:57},undelegate_resource_contract:{type:"TronUnDelegateResourceContract",id:58}},nested:{TronTransferContract:{fields:{to_address:{type:"string",id:2},amount:{type:"uint64",id:3}}},TronTriggerSmartContract:{fields:{contract_address:{type:"string",id:2},call_value:{type:"uint64",id:3},data:{type:"bytes",id:4},call_token_value:{type:"uint64",id:5},asset_id:{type:"uint64",id:6}}},TronResourceCode:{values:{BANDWIDTH:0,ENERGY:1}},TronFreezeBalanceContract:{fields:{frozen_balance:{type:"uint64",id:1},frozen_duration:{type:"uint64",id:2},resource:{type:"TronResourceCode",id:3},receiver_address:{type:"string",id:4}}},TronUnfreezeBalanceContract:{fields:{resource:{type:"TronResourceCode",id:1},receiver_address:{type:"string",id:2}}},TronWithdrawBalanceContract:{fields:{owner_address:{type:"bytes",id:1}}},TronFreezeBalanceV2Contract:{fields:{frozen_balance:{type:"uint64",id:2},resource:{type:"TronResourceCode",id:3}}},TronUnfreezeBalanceV2Contract:{fields:{unfreeze_balance:{type:"uint64",id:2},resource:{type:"TronResourceCode",id:3}}},TronWithdrawExpireUnfreezeContract:{fields:{}},TronDelegateResourceContract:{fields:{resource:{type:"TronResourceCode",id:2},balance:{type:"uint64",id:3},receiver_address:{type:"string",id:4},lock:{type:"bool",id:5}}},TronUnDelegateResourceContract:{fields:{resource:{type:"TronResourceCode",id:2},balance:{type:"uint64",id:3},receiver_address:{type:"string",id:4}}}}}}},TronSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1},serialized_tx:{type:"bytes",id:2}}},TronSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2}}},TronMessageSignature:{fields:{address:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},WebAuthnListResidentCredentials:{fields:{}},WebAuthnAddResidentCredential:{fields:{credential_id:{type:"bytes",id:1}}},WebAuthnRemoveResidentCredential:{fields:{index:{type:"uint32",id:1}}},WebAuthnCredentials:{fields:{credentials:{rule:"repeated",type:"WebAuthnCredential",id:1}},nested:{WebAuthnCredential:{fields:{index:{type:"uint32",id:1},id:{type:"bytes",id:2},rp_id:{type:"string",id:3},rp_name:{type:"string",id:4},user_id:{type:"bytes",id:5},user_name:{type:"string",id:6},user_display_name:{type:"string",id:7},creation_time:{type:"uint32",id:8},hmac_secret:{type:"bool",id:9},use_sign_count:{type:"bool",id:10},algorithm:{type:"sint32",id:11},curve:{type:"sint32",id:12}}}}},wire_in:{type:"bool",id:50002,extend:"google.protobuf.EnumValueOptions"},wire_out:{type:"bool",id:50003,extend:"google.protobuf.EnumValueOptions"},wire_debug_in:{type:"bool",id:50004,extend:"google.protobuf.EnumValueOptions"},wire_debug_out:{type:"bool",id:50005,extend:"google.protobuf.EnumValueOptions"},wire_tiny:{type:"bool",id:50006,extend:"google.protobuf.EnumValueOptions"},wire_bootloader:{type:"bool",id:50007,extend:"google.protobuf.EnumValueOptions"},wire_no_fsm:{type:"bool",id:50008,extend:"google.protobuf.EnumValueOptions"},facotry:{type:"bool",id:50501,extend:"google.protobuf.EnumValueOptions"},bitcoin_only:{type:"bool",id:6e4,extend:"google.protobuf.EnumValueOptions"},has_bitcoin_only_values:{type:"bool",id:51001,extend:"google.protobuf.EnumOptions"},unstable:{type:"bool",id:52001,extend:"google.protobuf.MessageOptions"},wire_type:{type:"uint32",id:52002,extend:"google.protobuf.MessageOptions"},experimental:{type:"bool",id:53001,extend:"google.protobuf.FieldOptions"},include_in_bitcoin_only:{type:"bool",id:6e4,extend:"google.protobuf.FileOptions"},CommandFlags:{values:{Default:0,Factory_Only:1}},MessageType:{options:{"(has_bitcoin_only_values)":!0},values:{MessageType_Initialize:0,MessageType_Ping:1,MessageType_Success:2,MessageType_Failure:3,MessageType_ChangePin:4,MessageType_WipeDevice:5,MessageType_GetEntropy:9,MessageType_Entropy:10,MessageType_LoadDevice:13,MessageType_ResetDevice:14,MessageType_Features:17,MessageType_PinMatrixRequest:18,MessageType_PinMatrixAck:19,MessageType_Cancel:20,MessageType_LockDevice:24,MessageType_ApplySettings:25,MessageType_ButtonRequest:26,MessageType_ButtonAck:27,MessageType_ApplyFlags:28,MessageType_BackupDevice:34,MessageType_EntropyRequest:35,MessageType_EntropyAck:36,MessageType_PassphraseRequest:41,MessageType_PassphraseAck:42,MessageType_RecoveryDevice:45,MessageType_WordRequest:46,MessageType_WordAck:47,MessageType_GetFeatures:55,MessageType_SdProtect:79,MessageType_ChangeWipeCode:82,MessageType_EndSession:83,MessageType_DoPreauthorized:84,MessageType_PreauthorizedRequest:85,MessageType_CancelAuthorization:86,MessageType_RebootToBootloader:87,MessageType_SetU2FCounter:63,MessageType_GetNextU2FCounter:80,MessageType_NextU2FCounter:81,MessageType_Deprecated_PassphraseStateRequest:77,MessageType_Deprecated_PassphraseStateAck:78,MessageType_FirmwareErase:6,MessageType_FirmwareErase_ex:16,MessageType_FirmwareUpload:7,MessageType_FirmwareRequest:8,MessageType_SelfTest:32,MessageType_Reboot:3e4,MessageType_FirmwareUpdateEmmc:30001,MessageType_GetPublicKey:11,MessageType_PublicKey:12,MessageType_SignTx:15,MessageType_TxRequest:21,MessageType_TxAck:22,MessageType_GetAddress:29,MessageType_Address:30,MessageType_SignMessage:38,MessageType_VerifyMessage:39,MessageType_MessageSignature:40,MessageType_GetOwnershipId:43,MessageType_OwnershipId:44,MessageType_GetOwnershipProof:49,MessageType_OwnershipProof:50,MessageType_AuthorizeCoinJoin:51,MessageType_CipherKeyValue:23,MessageType_CipheredKeyValue:48,MessageType_SignIdentity:53,MessageType_SignedIdentity:54,MessageType_GetECDHSessionKey:61,MessageType_ECDHSessionKey:62,MessageType_CosiCommit:71,MessageType_CosiCommitment:72,MessageType_CosiSign:73,MessageType_CosiSignature:74,MessageType_BatchGetPublickeys:10016,MessageType_EcdsaPublicKeys:10017,MessageType_DebugLinkDecision:100,MessageType_DebugLinkGetState:101,MessageType_DebugLinkState:102,MessageType_DebugLinkStop:103,MessageType_DebugLinkLog:104,MessageType_DebugLinkMemoryRead:110,MessageType_DebugLinkMemory:111,MessageType_DebugLinkMemoryWrite:112,MessageType_DebugLinkFlashErase:113,MessageType_DebugLinkLayout:9001,MessageType_DebugLinkReseedRandom:9002,MessageType_DebugLinkRecordScreen:9003,MessageType_DebugLinkEraseSdCard:9005,MessageType_DebugLinkWatchLayout:9006,MessageType_EmmcFixPermission:30100,MessageType_EmmcPath:30101,MessageType_EmmcPathInfo:30102,MessageType_EmmcFile:30103,MessageType_EmmcFileRead:30104,MessageType_EmmcFileWrite:30105,MessageType_EmmcFileDelete:30106,MessageType_EmmcDir:30107,MessageType_EmmcDirList:30108,MessageType_EmmcDirMake:30109,MessageType_EmmcDirRemove:30110,MessageType_EthereumGetPublicKey:450,MessageType_EthereumPublicKey:451,MessageType_EthereumGetAddress:56,MessageType_EthereumAddress:57,MessageType_EthereumSignTx:58,MessageType_EthereumSignTxEIP1559:452,MessageType_EthereumTxRequest:59,MessageType_EthereumTxAck:60,MessageType_EthereumSignMessage:64,MessageType_EthereumVerifyMessage:65,MessageType_EthereumMessageSignature:66,MessageType_EthereumSignTypedData:464,MessageType_EthereumTypedDataStructRequest:465,MessageType_EthereumTypedDataStructAck:466,MessageType_EthereumTypedDataValueRequest:467,MessageType_EthereumTypedDataValueAck:468,MessageType_EthereumTypedDataSignature:469,MessageType_EthereumSignTypedHash:470,MessageType_EthereumGetPublicKeyOneKey:20100,MessageType_EthereumPublicKeyOneKey:20101,MessageType_EthereumGetAddressOneKey:20102,MessageType_EthereumAddressOneKey:20103,MessageType_EthereumSignTxOneKey:20104,MessageType_EthereumSignTxEIP1559OneKey:20105,MessageType_EthereumTxRequestOneKey:20106,MessageType_EthereumTxAckOneKey:20107,MessageType_EthereumSignMessageOneKey:20108,MessageType_EthereumVerifyMessageOneKey:20109,MessageType_EthereumMessageSignatureOneKey:20110,MessageType_EthereumSignTypedDataOneKey:20111,MessageType_EthereumTypedDataStructRequestOneKey:20112,MessageType_EthereumTypedDataStructAckOneKey:20113,MessageType_EthereumTypedDataValueRequestOneKey:20114,MessageType_EthereumTypedDataValueAckOneKey:20115,MessageType_EthereumTypedDataSignatureOneKey:20116,MessageType_EthereumSignTypedHashOneKey:20117,MessageType_NEMGetAddress:67,MessageType_NEMAddress:68,MessageType_NEMSignTx:69,MessageType_NEMSignedTx:70,MessageType_NEMDecryptMessage:75,MessageType_NEMDecryptedMessage:76,MessageType_TezosGetAddress:150,MessageType_TezosAddress:151,MessageType_TezosSignTx:152,MessageType_TezosSignedTx:153,MessageType_TezosGetPublicKey:154,MessageType_TezosPublicKey:155,MessageType_StellarSignTx:202,MessageType_StellarTxOpRequest:203,MessageType_StellarGetAddress:207,MessageType_StellarAddress:208,MessageType_StellarCreateAccountOp:210,MessageType_StellarPaymentOp:211,MessageType_StellarPathPaymentStrictReceiveOp:212,MessageType_StellarManageSellOfferOp:213,MessageType_StellarCreatePassiveSellOfferOp:214,MessageType_StellarSetOptionsOp:215,MessageType_StellarChangeTrustOp:216,MessageType_StellarAllowTrustOp:217,MessageType_StellarAccountMergeOp:218,MessageType_StellarManageDataOp:220,MessageType_StellarBumpSequenceOp:221,MessageType_StellarManageBuyOfferOp:222,MessageType_StellarPathPaymentStrictSendOp:223,MessageType_StellarSignedTx:230,MessageType_CardanoGetPublicKey:305,MessageType_CardanoPublicKey:306,MessageType_CardanoGetAddress:307,MessageType_CardanoAddress:308,MessageType_CardanoTxItemAck:313,MessageType_CardanoTxAuxiliaryDataSupplement:314,MessageType_CardanoTxWitnessRequest:315,MessageType_CardanoTxWitnessResponse:316,MessageType_CardanoTxHostAck:317,MessageType_CardanoTxBodyHash:318,MessageType_CardanoSignTxFinished:319,MessageType_CardanoSignTxInit:320,MessageType_CardanoTxInput:321,MessageType_CardanoTxOutput:322,MessageType_CardanoAssetGroup:323,MessageType_CardanoToken:324,MessageType_CardanoTxCertificate:325,MessageType_CardanoTxWithdrawal:326,MessageType_CardanoTxAuxiliaryData:327,MessageType_CardanoPoolOwner:328,MessageType_CardanoPoolRelayParameters:329,MessageType_CardanoGetNativeScriptHash:330,MessageType_CardanoNativeScriptHash:331,MessageType_CardanoTxMint:332,MessageType_CardanoTxCollateralInput:333,MessageType_CardanoTxRequiredSigner:334,MessageType_CardanoTxInlineDatumChunk:335,MessageType_CardanoTxReferenceScriptChunk:336,MessageType_CardanoTxReferenceInput:337,MessageType_CardanoSignMessage:350,MessageType_CardanoMessageSignature:351,MessageType_RippleGetAddress:400,MessageType_RippleAddress:401,MessageType_RippleSignTx:402,MessageType_RippleSignedTx:403,MessageType_MoneroTransactionInitRequest:501,MessageType_MoneroTransactionInitAck:502,MessageType_MoneroTransactionSetInputRequest:503,MessageType_MoneroTransactionSetInputAck:504,MessageType_MoneroTransactionInputsPermutationRequest:505,MessageType_MoneroTransactionInputsPermutationAck:506,MessageType_MoneroTransactionInputViniRequest:507,MessageType_MoneroTransactionInputViniAck:508,MessageType_MoneroTransactionAllInputsSetRequest:509,MessageType_MoneroTransactionAllInputsSetAck:510,MessageType_MoneroTransactionSetOutputRequest:511,MessageType_MoneroTransactionSetOutputAck:512,MessageType_MoneroTransactionAllOutSetRequest:513,MessageType_MoneroTransactionAllOutSetAck:514,MessageType_MoneroTransactionSignInputRequest:515,MessageType_MoneroTransactionSignInputAck:516,MessageType_MoneroTransactionFinalRequest:517,MessageType_MoneroTransactionFinalAck:518,MessageType_MoneroKeyImageExportInitRequest:530,MessageType_MoneroKeyImageExportInitAck:531,MessageType_MoneroKeyImageSyncStepRequest:532,MessageType_MoneroKeyImageSyncStepAck:533,MessageType_MoneroKeyImageSyncFinalRequest:534,MessageType_MoneroKeyImageSyncFinalAck:535,MessageType_MoneroGetAddress:540,MessageType_MoneroAddress:541,MessageType_MoneroGetWatchKey:542,MessageType_MoneroWatchKey:543,MessageType_DebugMoneroDiagRequest:546,MessageType_DebugMoneroDiagAck:547,MessageType_MoneroGetTxKeyRequest:550,MessageType_MoneroGetTxKeyAck:551,MessageType_MoneroLiveRefreshStartRequest:552,MessageType_MoneroLiveRefreshStartAck:553,MessageType_MoneroLiveRefreshStepRequest:554,MessageType_MoneroLiveRefreshStepAck:555,MessageType_MoneroLiveRefreshFinalRequest:556,MessageType_MoneroLiveRefreshFinalAck:557,MessageType_EosGetPublicKey:600,MessageType_EosPublicKey:601,MessageType_EosSignTx:602,MessageType_EosTxActionRequest:603,MessageType_EosTxActionAck:604,MessageType_EosSignedTx:605,MessageType_BinanceGetAddress:700,MessageType_BinanceAddress:701,MessageType_BinanceGetPublicKey:702,MessageType_BinancePublicKey:703,MessageType_BinanceSignTx:704,MessageType_BinanceTxRequest:705,MessageType_BinanceTransferMsg:706,MessageType_BinanceOrderMsg:707,MessageType_BinanceCancelMsg:708,MessageType_BinanceSignedTx:709,MessageType_SolanaGetAddress:10100,MessageType_SolanaAddress:10101,MessageType_SolanaSignTx:10102,MessageType_SolanaSignedTx:10103,MessageType_StarcoinGetAddress:10300,MessageType_StarcoinAddress:10301,MessageType_StarcoinGetPublicKey:10302,MessageType_StarcoinPublicKey:10303,MessageType_StarcoinSignTx:10304,MessageType_StarcoinSignedTx:10305,MessageType_StarcoinSignMessage:10306,MessageType_StarcoinMessageSignature:10307,MessageType_StarcoinVerifyMessage:10308,MessageType_AptosGetAddress:10600,MessageType_AptosAddress:10601,MessageType_AptosSignTx:10602,MessageType_AptosSignedTx:10603,MessageType_AptosSignMessage:10604,MessageType_AptosMessageSignature:10605,MessageType_WebAuthnListResidentCredentials:800,MessageType_WebAuthnCredentials:801,MessageType_WebAuthnAddResidentCredential:802,MessageType_WebAuthnRemoveResidentCredential:803,MessageType_BixinSeedOperate:901,MessageType_BixinMessageSE:902,MessageType_BixinOutMessageSE:904,MessageType_BixinBackupRequest:905,MessageType_BixinBackupAck:906,MessageType_BixinRestoreRequest:907,MessageType_BixinRestoreAck:908,MessageType_BixinVerifyDeviceRequest:909,MessageType_BixinVerifyDeviceAck:910,MessageType_BixinWhiteListRequest:911,MessageType_BixinWhiteListAck:912,MessageType_BixinLoadDevice:913,MessageType_BixinBackupDevice:914,MessageType_BixinBackupDeviceAck:915,MessageType_BixinPinInputOnDevice:1e4,MessageType_EthereumSignMessageEIP712:10200,MessageType_GetPublicKeyMultiple:10210,MessageType_PublicKeyMultiple:10211,MessageType_ConfluxGetAddress:10112,MessageType_ConfluxAddress:10113,MessageType_ConfluxSignTx:10114,MessageType_ConfluxTxRequest:10115,MessageType_ConfluxTxAck:10116,MessageType_ConfluxSignMessage:10117,MessageType_ConfluxSignMessageCIP23:10118,MessageType_ConfluxMessageSignature:10119,MessageType_TronGetAddress:10501,MessageType_TronAddress:10502,MessageType_TronSignTx:10503,MessageType_TronSignedTx:10504,MessageType_TronSignMessage:10505,MessageType_TronMessageSignature:10506,MessageType_NearGetAddress:10701,MessageType_NearAddress:10702,MessageType_NearSignTx:10703,MessageType_NearSignedTx:10704,MessageType_CosmosGetAddress:10800,MessageType_CosmosAddress:10801,MessageType_CosmosSignTx:10802,MessageType_CosmosSignedTx:10803,MessageType_AlgorandGetAddress:10900,MessageType_AlgorandAddress:10901,MessageType_AlgorandSignTx:10902,MessageType_AlgorandSignedTx:10903,MessageType_PolkadotGetAddress:11e3,MessageType_PolkadotAddress:11001,MessageType_PolkadotSignTx:11002,MessageType_PolkadotSignedTx:11003,MessageType_SuiGetAddress:11100,MessageType_SuiAddress:11101,MessageType_SuiSignTx:11102,MessageType_SuiSignedTx:11103,MessageType_SuiSignMessage:11104,MessageType_SuiMessageSignature:11105,MessageType_SuiTxRequest:11106,MessageType_SuiTxAck:11107,MessageType_FilecoinGetAddress:11200,MessageType_FilecoinAddress:11201,MessageType_FilecoinSignTx:11202,MessageType_FilecoinSignedTx:11203,MessageType_KaspaGetAddress:11300,MessageType_KaspaAddress:11301,MessageType_KaspaSignTx:11302,MessageType_KaspaSignedTx:11303,MessageType_KaspaTxInputRequest:11304,MessageType_KaspaTxInputAck:11305,MessageType_NexaGetAddress:11400,MessageType_NexaAddress:11401,MessageType_NexaSignTx:11402,MessageType_NexaSignedTx:11403,MessageType_NexaTxInputRequest:11404,MessageType_NexaTxInputAck:11405,MessageType_NostrGetPublicKey:11500,MessageType_NostrPublicKey:11501,MessageType_NostrSignEvent:11502,MessageType_NostrSignedEvent:11503,MessageType_NostrEncryptMessage:11504,MessageType_NostrEncryptedMessage:11505,MessageType_NostrDecryptMessage:11506,MessageType_NostrDecryptedMessage:11507,MessageType_NostrSignSchnorr:11508,MessageType_NostrSignedSchnorr:11509,MessageType_LnurlAuth:11600,MessageType_LnurlAuthResp:11601,MessageType_NervosGetAddress:11701,MessageType_NervosAddress:11702,MessageType_NervosSignTx:11703,MessageType_NervosSignedTx:11704,MessageType_NervosTxRequest:11705,MessageType_NervosTxAck:11706,MessageType_DnxGetAddress:11800,MessageType_DnxAddress:11801,MessageType_DnxSignTx:11802,MessageType_DnxInputRequest:11803,MessageType_DnxInputAck:11804,MessageType_DnxRTSigsRequest:11805,MessageType_DnxSignedTx:11806,MessageType_DeviceBackToBoot:903,MessageType_DeviceInfoSettings:10001,MessageType_GetDeviceInfo:10002,MessageType_DeviceInfo:10003,MessageType_ReadSEPublicKey:10004,MessageType_SEPublicKey:10005,MessageType_WriteSEPublicCert:10006,MessageType_ReadSEPublicCert:10007,MessageType_SEPublicCert:10008,MessageType_SpiFlashWrite:10009,MessageType_SpiFlashRead:10010,MessageType_SpiFlashData:10011,MessageType_SESignMessage:10012,MessageType_SEMessageSignature:10013,MessageType_NFTWriteInfo:10014,MessageType_NFTWriteData:10015,MessageType_ResourceUpload:10018,MessageType_ZoomRequest:10019,MessageType_ResourceRequest:10020,MessageType_ResourceAck:10021,MessageType_ResourceUpdate:10022,MessageType_ListResDir:10023,MessageType_FileInfoList:10024,MessageType_RebootToBoardloader:10025,MessageType_DeviceEraseSector:10026}},google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},public_dependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weak_dependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},message_type:{rule:"repeated",type:"DescriptorProto",id:4},enum_type:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},source_code_info:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nested_type:{rule:"repeated",type:"DescriptorProto",id:3},enum_type:{rule:"repeated",type:"EnumDescriptorProto",id:4},extension_range:{rule:"repeated",type:"ExtensionRange",id:5},oneof_decl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reserved_range:{rule:"repeated",type:"ReservedRange",id:9},reserved_name:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},type_name:{type:"string",id:6},extendee:{type:"string",id:2},default_value:{type:"string",id:7},oneof_index:{type:"int32",id:9},json_name:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},input_type:{type:"string",id:2},output_type:{type:"string",id:3},options:{type:"MethodOptions",id:4},client_streaming:{type:"bool",id:5},server_streaming:{type:"bool",id:6}}},FileOptions:{fields:{java_package:{type:"string",id:1},java_outer_classname:{type:"string",id:8},java_multiple_files:{type:"bool",id:10},java_generate_equals_and_hash:{type:"bool",id:20,options:{deprecated:!0}},java_string_check_utf8:{type:"bool",id:27},optimize_for:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},go_package:{type:"string",id:11},cc_generic_services:{type:"bool",id:16},java_generic_services:{type:"bool",id:17},py_generic_services:{type:"bool",id:18},deprecated:{type:"bool",id:23},cc_enable_arenas:{type:"bool",id:31},objc_class_prefix:{type:"string",id:36},csharp_namespace:{type:"string",id:37},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{message_set_wire_format:{type:"bool",id:1},no_standard_descriptor_accessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},map_entry:{type:"bool",id:7},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allow_alias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifier_value:{type:"string",id:3},positive_int_value:{type:"uint64",id:4},negative_int_value:{type:"int64",id:5},double_value:{type:"double",id:6},string_value:{type:"bytes",id:7},aggregate_value:{type:"string",id:8}},nested:{NamePart:{fields:{name_part:{rule:"required",type:"string",id:1},is_extension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leading_comments:{type:"string",id:3},trailing_comments:{type:"string",id:4},leading_detached_comments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},source_file:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}}},ne={nested:{AlgorandGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:3}}},AlgorandAddress:{fields:{address:{type:"string",id:1}}},AlgorandSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},AlgorandSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},AptosGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},AptosAddress:{fields:{address:{type:"string",id:1}}},AptosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},AptosSignedTx:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},AptosSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},payload:{rule:"required",type:"AptosMessagePayload",id:2}},nested:{AptosMessagePayload:{fields:{address:{type:"string",id:2},chain_id:{type:"string",id:3},application:{type:"string",id:4},nonce:{rule:"required",type:"string",id:5},message:{rule:"required",type:"string",id:6}}}}},AptosMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:1},address:{rule:"required",type:"string",id:2}}},BinanceGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},BinanceAddress:{fields:{address:{rule:"required",type:"string",id:1}}},BinanceGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},BinancePublicKey:{fields:{public_key:{rule:"required",type:"bytes",id:1}}},BinanceSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},msg_count:{type:"uint32",id:2},account_number:{type:"sint64",id:3},chain_id:{type:"string",id:4},memo:{type:"string",id:5},sequence:{type:"sint64",id:6},source:{type:"sint64",id:7}}},BinanceTxRequest:{fields:{}},BinanceTransferMsg:{fields:{inputs:{rule:"repeated",type:"BinanceInputOutput",id:1},outputs:{rule:"repeated",type:"BinanceInputOutput",id:2}},nested:{BinanceInputOutput:{fields:{address:{type:"string",id:1},coins:{rule:"repeated",type:"BinanceCoin",id:2}}},BinanceCoin:{fields:{amount:{type:"sint64",id:1},denom:{type:"string",id:2}}}}},BinanceOrderMsg:{fields:{id:{type:"string",id:1},ordertype:{type:"BinanceOrderType",id:2},price:{type:"sint64",id:3},quantity:{type:"sint64",id:4},sender:{type:"string",id:5},side:{type:"BinanceOrderSide",id:6},symbol:{type:"string",id:7},timeinforce:{type:"BinanceTimeInForce",id:8}},nested:{BinanceOrderType:{values:{OT_UNKNOWN:0,MARKET:1,LIMIT:2,OT_RESERVED:3}},BinanceOrderSide:{values:{SIDE_UNKNOWN:0,BUY:1,SELL:2}},BinanceTimeInForce:{values:{TIF_UNKNOWN:0,GTE:1,TIF_RESERVED:2,IOC:3}}}},BinanceCancelMsg:{fields:{refid:{type:"string",id:1},sender:{type:"string",id:2},symbol:{type:"string",id:3}}},BinanceSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1},public_key:{rule:"required",type:"bytes",id:2}}},InputScriptType:{values:{SPENDADDRESS:0,SPENDMULTISIG:1,EXTERNAL:2,SPENDWITNESS:3,SPENDP2SHWITNESS:4,SPENDTAPROOT:5}},OutputScriptType:{values:{PAYTOADDRESS:0,PAYTOSCRIPTHASH:1,PAYTOMULTISIG:2,PAYTOOPRETURN:3,PAYTOWITNESS:4,PAYTOP2SHWITNESS:5,PAYTOTAPROOT:6}},DecredStakingSpendType:{values:{SSGen:0,SSRTX:1}},AmountUnit:{values:{BITCOIN:0,MILLIBITCOIN:1,MICROBITCOIN:2,SATOSHI:3}},MultisigRedeemScriptType:{fields:{pubkeys:{rule:"repeated",type:"HDNodePathType",id:1},signatures:{rule:"repeated",type:"bytes",id:2},m:{rule:"required",type:"uint32",id:3},nodes:{rule:"repeated",type:"HDNodeType",id:4},address_n:{rule:"repeated",type:"uint32",id:5,options:{packed:!1}}},nested:{HDNodePathType:{fields:{node:{rule:"required",type:"HDNodeType",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}}}}}},GetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},ecdsa_curve_name:{type:"string",id:2},show_display:{type:"bool",id:3},coin_name:{type:"string",id:4,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:5,options:{default:"SPENDADDRESS"}},ignore_xpub_magic:{type:"bool",id:6}}},PublicKey:{fields:{node:{rule:"required",type:"HDNodeType",id:1},xpub:{rule:"required",type:"string",id:2},root_fingerprint:{type:"uint32",id:3}}},GetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},coin_name:{type:"string",id:2,options:{default:"Bitcoin"}},show_display:{type:"bool",id:3},multisig:{type:"MultisigRedeemScriptType",id:4},script_type:{type:"InputScriptType",id:5,options:{default:"SPENDADDRESS"}},ignore_xpub_magic:{type:"bool",id:6}}},Address:{fields:{address:{rule:"required",type:"string",id:1}}},GetOwnershipId:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},coin_name:{type:"string",id:2,options:{default:"Bitcoin"}},multisig:{type:"MultisigRedeemScriptType",id:3},script_type:{type:"InputScriptType",id:4,options:{default:"SPENDADDRESS"}}}},OwnershipId:{fields:{ownership_id:{rule:"required",type:"bytes",id:1}}},SignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2},coin_name:{type:"string",id:3,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:4,options:{default:"SPENDADDRESS"}},no_script_type:{type:"bool",id:5}}},MessageSignature:{fields:{address:{rule:"required",type:"string",id:1},signature:{rule:"required",type:"bytes",id:2}}},VerifyMessage:{fields:{address:{rule:"required",type:"string",id:1},signature:{rule:"required",type:"bytes",id:2},message:{rule:"required",type:"bytes",id:3},coin_name:{type:"string",id:4,options:{default:"Bitcoin"}}}},SignTx:{fields:{outputs_count:{rule:"required",type:"uint32",id:1},inputs_count:{rule:"required",type:"uint32",id:2},coin_name:{type:"string",id:3,options:{default:"Bitcoin"}},version:{type:"uint32",id:4,options:{default:1}},lock_time:{type:"uint32",id:5,options:{default:0}},expiry:{type:"uint32",id:6},overwintered:{type:"bool",id:7,options:{deprecated:!0}},version_group_id:{type:"uint32",id:8},timestamp:{type:"uint32",id:9},branch_id:{type:"uint32",id:10},amount_unit:{type:"AmountUnit",id:11,options:{default:"BITCOIN"}},decred_staking_ticket:{type:"bool",id:12,options:{default:!1}}}},TxRequest:{fields:{request_type:{type:"RequestType",id:1},details:{type:"TxRequestDetailsType",id:2},serialized:{type:"TxRequestSerializedType",id:3}},nested:{RequestType:{values:{TXINPUT:0,TXOUTPUT:1,TXMETA:2,TXFINISHED:3,TXEXTRADATA:4,TXORIGINPUT:5,TXORIGOUTPUT:6}},TxRequestDetailsType:{fields:{request_index:{type:"uint32",id:1},tx_hash:{type:"bytes",id:2},extra_data_len:{type:"uint32",id:3},extra_data_offset:{type:"uint32",id:4}}},TxRequestSerializedType:{fields:{signature_index:{type:"uint32",id:1},signature:{type:"bytes",id:2},serialized_tx:{type:"bytes",id:3}}}}},TxAck:{options:{deprecated:!0},fields:{tx:{type:"TransactionType",id:1}},nested:{TransactionType:{fields:{version:{type:"uint32",id:1},inputs:{rule:"repeated",type:"TxInputType",id:2},bin_outputs:{rule:"repeated",type:"TxOutputBinType",id:3},lock_time:{type:"uint32",id:4},outputs:{rule:"repeated",type:"TxOutputType",id:5},inputs_cnt:{type:"uint32",id:6},outputs_cnt:{type:"uint32",id:7},extra_data:{type:"bytes",id:8},extra_data_len:{type:"uint32",id:9},expiry:{type:"uint32",id:10},overwintered:{type:"bool",id:11,options:{deprecated:!0}},version_group_id:{type:"uint32",id:12},timestamp:{type:"uint32",id:13},branch_id:{type:"uint32",id:14}},nested:{TxInputType:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},prev_hash:{rule:"required",type:"bytes",id:2},prev_index:{rule:"required",type:"uint32",id:3},script_sig:{type:"bytes",id:4},sequence:{type:"uint32",id:5,options:{default:4294967295}},script_type:{type:"InputScriptType",id:6,options:{default:"SPENDADDRESS"}},multisig:{type:"MultisigRedeemScriptType",id:7},amount:{type:"uint64",id:8},decred_tree:{type:"uint32",id:9},witness:{type:"bytes",id:13},ownership_proof:{type:"bytes",id:14},commitment_data:{type:"bytes",id:15},orig_hash:{type:"bytes",id:16},orig_index:{type:"uint32",id:17},decred_staking_spend:{type:"DecredStakingSpendType",id:18},script_pubkey:{type:"bytes",id:19}}},TxOutputBinType:{fields:{amount:{rule:"required",type:"uint64",id:1},script_pubkey:{rule:"required",type:"bytes",id:2},decred_script_version:{type:"uint32",id:3}}},TxOutputType:{fields:{address:{type:"string",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},amount:{rule:"required",type:"uint64",id:3},script_type:{type:"OutputScriptType",id:4,options:{default:"PAYTOADDRESS"}},multisig:{type:"MultisigRedeemScriptType",id:5},op_return_data:{type:"bytes",id:6},orig_hash:{type:"bytes",id:10},orig_index:{type:"uint32",id:11}}}}}}},TxInput:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},prev_hash:{rule:"required",type:"bytes",id:2},prev_index:{rule:"required",type:"uint32",id:3},script_sig:{type:"bytes",id:4},sequence:{type:"uint32",id:5,options:{default:4294967295}},script_type:{type:"InputScriptType",id:6,options:{default:"SPENDADDRESS"}},multisig:{type:"MultisigRedeemScriptType",id:7},amount:{rule:"required",type:"uint64",id:8},decred_tree:{type:"uint32",id:9},witness:{type:"bytes",id:13},ownership_proof:{type:"bytes",id:14},commitment_data:{type:"bytes",id:15},orig_hash:{type:"bytes",id:16},orig_index:{type:"uint32",id:17},decred_staking_spend:{type:"DecredStakingSpendType",id:18},script_pubkey:{type:"bytes",id:19}}},TxOutput:{fields:{address:{type:"string",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},amount:{rule:"required",type:"uint64",id:3},script_type:{type:"OutputScriptType",id:4,options:{default:"PAYTOADDRESS"}},multisig:{type:"MultisigRedeemScriptType",id:5},op_return_data:{type:"bytes",id:6},orig_hash:{type:"bytes",id:10},orig_index:{type:"uint32",id:11}}},PrevTx:{fields:{version:{rule:"required",type:"uint32",id:1},lock_time:{rule:"required",type:"uint32",id:4},inputs_count:{rule:"required",type:"uint32",id:6},outputs_count:{rule:"required",type:"uint32",id:7},extra_data_len:{type:"uint32",id:9,options:{default:0}},expiry:{type:"uint32",id:10},version_group_id:{type:"uint32",id:12},timestamp:{type:"uint32",id:13},branch_id:{type:"uint32",id:14}}},PrevInput:{fields:{prev_hash:{rule:"required",type:"bytes",id:2},prev_index:{rule:"required",type:"uint32",id:3},script_sig:{rule:"required",type:"bytes",id:4},sequence:{rule:"required",type:"uint32",id:5},decred_tree:{type:"uint32",id:9}}},PrevOutput:{fields:{amount:{rule:"required",type:"uint64",id:1},script_pubkey:{rule:"required",type:"bytes",id:2},decred_script_version:{type:"uint32",id:3}}},TxAckInput:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckInputWrapper",id:1}},nested:{TxAckInputWrapper:{fields:{input:{rule:"required",type:"TxInput",id:2}}}}},TxAckOutput:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckOutputWrapper",id:1}},nested:{TxAckOutputWrapper:{fields:{output:{rule:"required",type:"TxOutput",id:5}}}}},TxAckPrevMeta:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"PrevTx",id:1}}},TxAckPrevInput:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckPrevInputWrapper",id:1}},nested:{TxAckPrevInputWrapper:{fields:{input:{rule:"required",type:"PrevInput",id:2}}}}},TxAckPrevOutput:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckPrevOutputWrapper",id:1}},nested:{TxAckPrevOutputWrapper:{fields:{output:{rule:"required",type:"PrevOutput",id:3}}}}},TxAckPrevExtraData:{options:{"(wire_type)":22},fields:{tx:{rule:"required",type:"TxAckPrevExtraDataWrapper",id:1}},nested:{TxAckPrevExtraDataWrapper:{fields:{extra_data_chunk:{rule:"required",type:"bytes",id:8}}}}},GetOwnershipProof:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},coin_name:{type:"string",id:2,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:3,options:{default:"SPENDWITNESS"}},multisig:{type:"MultisigRedeemScriptType",id:4},user_confirmation:{type:"bool",id:5,options:{default:!1}},ownership_ids:{rule:"repeated",type:"bytes",id:6},commitment_data:{type:"bytes",id:7,options:{default:""}}}},OwnershipProof:{fields:{ownership_proof:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},AuthorizeCoinJoin:{options:{"(unstable)":!0},fields:{coordinator:{rule:"required",type:"string",id:1},max_total_fee:{rule:"required",type:"uint64",id:2},fee_per_anonymity:{type:"uint32",id:3,options:{default:0}},address_n:{rule:"repeated",type:"uint32",id:4,options:{packed:!1}},coin_name:{type:"string",id:5,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:6,options:{default:"SPENDADDRESS"}},amount_unit:{type:"AmountUnit",id:11,options:{default:"BITCOIN"}}}},GetPublicKeyMultiple:{fields:{addresses:{rule:"repeated",type:"BIP32Address",id:1},ecdsa_curve_name:{type:"string",id:2},show_display:{type:"bool",id:3},coin_name:{type:"string",id:4,options:{default:"Bitcoin"}},script_type:{type:"InputScriptType",id:5,options:{default:"SPENDADDRESS"}},ignore_xpub_magic:{type:"bool",id:6}},nested:{BIP32Address:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}}}},PublicKeyMultiple:{fields:{xpubs:{rule:"repeated",type:"string",id:1}}},FirmwareErase:{fields:{length:{type:"uint32",id:1}}},FirmwareRequest:{fields:{offset:{type:"uint32",id:1},length:{type:"uint32",id:2}}},FirmwareUpload:{fields:{payload:{rule:"required",type:"bytes",id:1},hash:{type:"bytes",id:2}}},SelfTest:{fields:{payload:{type:"bytes",id:1}}},FirmwareErase_ex:{fields:{length:{type:"uint32",id:1}}},RebootType:{values:{Normal:0,Boardloader:1,BootLoader:2}},Reboot:{fields:{reboot_type:{rule:"required",type:"RebootType",id:1}}},FirmwareUpdateEmmc:{fields:{path:{rule:"required",type:"string",id:1},reboot_on_success:{type:"bool",id:2}}},CardanoDerivationType:{values:{LEDGER:0,ICARUS:1,ICARUS_TREZOR:2}},CardanoAddressType:{values:{BASE:0,BASE_SCRIPT_KEY:1,BASE_KEY_SCRIPT:2,BASE_SCRIPT_SCRIPT:3,POINTER:4,POINTER_SCRIPT:5,ENTERPRISE:6,ENTERPRISE_SCRIPT:7,BYRON:8,REWARD:14,REWARD_SCRIPT:15}},CardanoNativeScriptType:{values:{PUB_KEY:0,ALL:1,ANY:2,N_OF_K:3,INVALID_BEFORE:4,INVALID_HEREAFTER:5}},CardanoNativeScriptHashDisplayFormat:{values:{HIDE:0,BECH32:1,POLICY_ID:2}},CardanoTxOutputSerializationFormat:{values:{ARRAY_LEGACY:0,MAP_BABBAGE:1}},CardanoCertificateType:{values:{STAKE_REGISTRATION:0,STAKE_DEREGISTRATION:1,STAKE_DELEGATION:2,STAKE_POOL_REGISTRATION:3}},CardanoPoolRelayType:{values:{SINGLE_HOST_IP:0,SINGLE_HOST_NAME:1,MULTIPLE_HOST_NAME:2}},CardanoTxAuxiliaryDataSupplementType:{values:{NONE:0,GOVERNANCE_REGISTRATION_SIGNATURE:1}},CardanoGovernanceRegistrationFormat:{values:{CIP15:0,CIP36:1}},CardanoTxSigningMode:{values:{ORDINARY_TRANSACTION:0,POOL_REGISTRATION_AS_OWNER:1,MULTISIG_TRANSACTION:2,PLUTUS_TRANSACTION:3}},CardanoTxWitnessType:{values:{BYRON_WITNESS:0,SHELLEY_WITNESS:1}},CardanoBlockchainPointerType:{fields:{block_index:{rule:"required",type:"uint32",id:1},tx_index:{rule:"required",type:"uint32",id:2},certificate_index:{rule:"required",type:"uint32",id:3}}},CardanoNativeScript:{fields:{type:{rule:"required",type:"CardanoNativeScriptType",id:1},scripts:{rule:"repeated",type:"CardanoNativeScript",id:2},key_hash:{type:"bytes",id:3},key_path:{rule:"repeated",type:"uint32",id:4,options:{packed:!1}},required_signatures_count:{type:"uint32",id:5},invalid_before:{type:"uint64",id:6},invalid_hereafter:{type:"uint64",id:7}}},CardanoGetNativeScriptHash:{fields:{script:{rule:"required",type:"CardanoNativeScript",id:1},display_format:{rule:"required",type:"CardanoNativeScriptHashDisplayFormat",id:2},derivation_type:{rule:"required",type:"CardanoDerivationType",id:3}}},CardanoNativeScriptHash:{fields:{script_hash:{rule:"required",type:"bytes",id:1}}},CardanoAddressParametersType:{fields:{address_type:{rule:"required",type:"CardanoAddressType",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},address_n_staking:{rule:"repeated",type:"uint32",id:3,options:{packed:!1}},staking_key_hash:{type:"bytes",id:4},certificate_pointer:{type:"CardanoBlockchainPointerType",id:5},script_payment_hash:{type:"bytes",id:6},script_staking_hash:{type:"bytes",id:7}}},CardanoGetAddress:{fields:{show_display:{type:"bool",id:2,options:{default:!1}},protocol_magic:{rule:"required",type:"uint32",id:3},network_id:{rule:"required",type:"uint32",id:4},address_parameters:{rule:"required",type:"CardanoAddressParametersType",id:5},derivation_type:{rule:"required",type:"CardanoDerivationType",id:6}}},CardanoAddress:{fields:{address:{rule:"required",type:"string",id:1}}},CardanoGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},derivation_type:{rule:"required",type:"CardanoDerivationType",id:3}}},CardanoPublicKey:{fields:{xpub:{rule:"required",type:"string",id:1},node:{rule:"required",type:"HDNodeType",id:2}}},CardanoSignTxInit:{fields:{signing_mode:{rule:"required",type:"CardanoTxSigningMode",id:1},protocol_magic:{rule:"required",type:"uint32",id:2},network_id:{rule:"required",type:"uint32",id:3},inputs_count:{rule:"required",type:"uint32",id:4},outputs_count:{rule:"required",type:"uint32",id:5},fee:{rule:"required",type:"uint64",id:6},ttl:{type:"uint64",id:7},certificates_count:{rule:"required",type:"uint32",id:8},withdrawals_count:{rule:"required",type:"uint32",id:9},has_auxiliary_data:{rule:"required",type:"bool",id:10},validity_interval_start:{type:"uint64",id:11},witness_requests_count:{rule:"required",type:"uint32",id:12},minting_asset_groups_count:{rule:"required",type:"uint32",id:13},derivation_type:{rule:"required",type:"CardanoDerivationType",id:14},include_network_id:{type:"bool",id:15,options:{default:!1}},script_data_hash:{type:"bytes",id:16},collateral_inputs_count:{rule:"required",type:"uint32",id:17},required_signers_count:{rule:"required",type:"uint32",id:18},has_collateral_return:{type:"bool",id:19,options:{default:!1}},total_collateral:{type:"uint64",id:20},reference_inputs_count:{type:"uint32",id:21,options:{default:0}}}},CardanoTxInput:{fields:{prev_hash:{rule:"required",type:"bytes",id:1},prev_index:{rule:"required",type:"uint32",id:2}}},CardanoTxOutput:{fields:{address:{type:"string",id:1},address_parameters:{type:"CardanoAddressParametersType",id:2},amount:{rule:"required",type:"uint64",id:3},asset_groups_count:{rule:"required",type:"uint32",id:4},datum_hash:{type:"bytes",id:5},format:{type:"CardanoTxOutputSerializationFormat",id:6,options:{default:"ARRAY_LEGACY"}},inline_datum_size:{type:"uint32",id:7,options:{default:0}},reference_script_size:{type:"uint32",id:8,options:{default:0}}}},CardanoAssetGroup:{fields:{policy_id:{rule:"required",type:"bytes",id:1},tokens_count:{rule:"required",type:"uint32",id:2}}},CardanoToken:{fields:{asset_name_bytes:{rule:"required",type:"bytes",id:1},amount:{type:"uint64",id:2},mint_amount:{type:"sint64",id:3}}},CardanoTxInlineDatumChunk:{fields:{data:{rule:"required",type:"bytes",id:1}}},CardanoTxReferenceScriptChunk:{fields:{data:{rule:"required",type:"bytes",id:1}}},CardanoPoolOwner:{fields:{staking_key_path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},staking_key_hash:{type:"bytes",id:2}}},CardanoPoolRelayParameters:{fields:{type:{rule:"required",type:"CardanoPoolRelayType",id:1},ipv4_address:{type:"bytes",id:2},ipv6_address:{type:"bytes",id:3},host_name:{type:"string",id:4},port:{type:"uint32",id:5}}},CardanoPoolMetadataType:{fields:{url:{rule:"required",type:"string",id:1},hash:{rule:"required",type:"bytes",id:2}}},CardanoPoolParametersType:{fields:{pool_id:{rule:"required",type:"bytes",id:1},vrf_key_hash:{rule:"required",type:"bytes",id:2},pledge:{rule:"required",type:"uint64",id:3},cost:{rule:"required",type:"uint64",id:4},margin_numerator:{rule:"required",type:"uint64",id:5},margin_denominator:{rule:"required",type:"uint64",id:6},reward_account:{rule:"required",type:"string",id:7},metadata:{type:"CardanoPoolMetadataType",id:10},owners_count:{rule:"required",type:"uint32",id:11},relays_count:{rule:"required",type:"uint32",id:12}}},CardanoTxCertificate:{fields:{type:{rule:"required",type:"CardanoCertificateType",id:1},path:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},pool:{type:"bytes",id:3},pool_parameters:{type:"CardanoPoolParametersType",id:4},script_hash:{type:"bytes",id:5},key_hash:{type:"bytes",id:6}}},CardanoTxWithdrawal:{fields:{path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},amount:{rule:"required",type:"uint64",id:2},script_hash:{type:"bytes",id:3},key_hash:{type:"bytes",id:4}}},CardanoGovernanceRegistrationDelegation:{fields:{voting_public_key:{rule:"required",type:"bytes",id:1},weight:{rule:"required",type:"uint32",id:2}}},CardanoGovernanceRegistrationParametersType:{fields:{voting_public_key:{type:"bytes",id:1},staking_path:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},reward_address_parameters:{rule:"required",type:"CardanoAddressParametersType",id:3},nonce:{rule:"required",type:"uint64",id:4},format:{type:"CardanoGovernanceRegistrationFormat",id:5,options:{default:"CIP15"}},delegations:{rule:"repeated",type:"CardanoGovernanceRegistrationDelegation",id:6},voting_purpose:{type:"uint64",id:7}}},CardanoTxAuxiliaryData:{fields:{governance_registration_parameters:{type:"CardanoGovernanceRegistrationParametersType",id:1},hash:{type:"bytes",id:2}}},CardanoTxMint:{fields:{asset_groups_count:{rule:"required",type:"uint32",id:1}}},CardanoTxCollateralInput:{fields:{prev_hash:{rule:"required",type:"bytes",id:1},prev_index:{rule:"required",type:"uint32",id:2}}},CardanoTxRequiredSigner:{fields:{key_hash:{type:"bytes",id:1},key_path:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}}}},CardanoTxReferenceInput:{fields:{prev_hash:{rule:"required",type:"bytes",id:1},prev_index:{rule:"required",type:"uint32",id:2}}},CardanoTxItemAck:{fields:{}},CardanoTxAuxiliaryDataSupplement:{fields:{type:{rule:"required",type:"CardanoTxAuxiliaryDataSupplementType",id:1},auxiliary_data_hash:{type:"bytes",id:2},governance_signature:{type:"bytes",id:3}}},CardanoTxWitnessRequest:{fields:{path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}},CardanoTxWitnessResponse:{fields:{type:{rule:"required",type:"CardanoTxWitnessType",id:1},pub_key:{rule:"required",type:"bytes",id:2},signature:{rule:"required",type:"bytes",id:3},chain_code:{type:"bytes",id:4}}},CardanoTxHostAck:{fields:{}},CardanoTxBodyHash:{fields:{tx_hash:{rule:"required",type:"bytes",id:1}}},CardanoSignTxFinished:{fields:{}},CardanoSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2},derivation_type:{rule:"required",type:"CardanoDerivationType",id:3},network_id:{rule:"required",type:"uint32",id:4}}},CardanoMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:1},key:{rule:"required",type:"bytes",id:2}}},Success:{fields:{message:{type:"string",id:1,options:{default:""}}}},Failure:{fields:{code:{type:"FailureType",id:1},message:{type:"string",id:2}},nested:{FailureType:{values:{Failure_UnexpectedMessage:1,Failure_ButtonExpected:2,Failure_DataError:3,Failure_ActionCancelled:4,Failure_PinExpected:5,Failure_PinCancelled:6,Failure_PinInvalid:7,Failure_InvalidSignature:8,Failure_ProcessError:9,Failure_NotEnoughFunds:10,Failure_NotInitialized:11,Failure_PinMismatch:12,Failure_WipeCodeMismatch:13,Failure_InvalidSession:14,Failure_FirmwareError:99}}}},ButtonRequest:{fields:{code:{type:"ButtonRequestType",id:1},pages:{type:"uint32",id:2}},nested:{ButtonRequestType:{values:{ButtonRequest_Other:1,ButtonRequest_FeeOverThreshold:2,ButtonRequest_ConfirmOutput:3,ButtonRequest_ResetDevice:4,ButtonRequest_ConfirmWord:5,ButtonRequest_WipeDevice:6,ButtonRequest_ProtectCall:7,ButtonRequest_SignTx:8,ButtonRequest_FirmwareCheck:9,ButtonRequest_Address:10,ButtonRequest_PublicKey:11,ButtonRequest_MnemonicWordCount:12,ButtonRequest_MnemonicInput:13,_Deprecated_ButtonRequest_PassphraseType:14,ButtonRequest_UnknownDerivationPath:15,ButtonRequest_RecoveryHomepage:16,ButtonRequest_Success:17,ButtonRequest_Warning:18,ButtonRequest_PassphraseEntry:19,ButtonRequest_PinEntry:20}}}},ButtonAck:{fields:{}},PinMatrixRequest:{fields:{type:{type:"PinMatrixRequestType",id:1}},nested:{PinMatrixRequestType:{values:{PinMatrixRequestType_Current:1,PinMatrixRequestType_NewFirst:2,PinMatrixRequestType_NewSecond:3,PinMatrixRequestType_WipeCodeFirst:4,PinMatrixRequestType_WipeCodeSecond:5,PinMatrixRequestType_BackupFirst:6,PinMatrixRequestType_BackupSecond:7}}}},PinMatrixAck:{fields:{pin:{rule:"required",type:"string",id:1},new_pin:{type:"string",id:2}}},PassphraseRequest:{fields:{_on_device:{type:"bool",id:1,options:{deprecated:!0}}}},PassphraseAck:{fields:{passphrase:{type:"string",id:1},_state:{type:"bytes",id:2,options:{deprecated:!0}},on_device:{type:"bool",id:3}}},Deprecated_PassphraseStateRequest:{options:{deprecated:!0},fields:{state:{type:"bytes",id:1}}},Deprecated_PassphraseStateAck:{options:{deprecated:!0},fields:{}},HDNodeType:{fields:{depth:{rule:"required",type:"uint32",id:1},fingerprint:{rule:"required",type:"uint32",id:2},child_num:{rule:"required",type:"uint32",id:3},chain_code:{rule:"required",type:"bytes",id:4},private_key:{type:"bytes",id:5},public_key:{rule:"required",type:"bytes",id:6}}},BixinPinInputOnDevice:{fields:{}},ConfluxGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},chain_id:{type:"uint32",id:3}}},ConfluxAddress:{fields:{address:{type:"string",id:1}}},ConfluxSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},nonce:{type:"bytes",id:2},gas_price:{type:"bytes",id:3},gas_limit:{type:"bytes",id:4},to:{type:"string",id:5},value:{type:"bytes",id:6},epoch_height:{type:"bytes",id:7},storage_limit:{type:"bytes",id:8},data_initial_chunk:{type:"bytes",id:9},data_length:{type:"uint32",id:10},chain_id:{type:"uint32",id:11}}},ConfluxTxRequest:{fields:{data_length:{type:"uint32",id:1},signature_v:{type:"uint32",id:2},signature_r:{type:"bytes",id:3},signature_s:{type:"bytes",id:4}}},ConfluxTxAck:{fields:{data_chunk:{type:"bytes",id:1}}},ConfluxSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{type:"bytes",id:2}}},ConfluxMessageSignature:{fields:{signature:{type:"bytes",id:2},address:{type:"string",id:3}}},ConfluxSignMessageCIP23:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},domain_hash:{type:"bytes",id:2},message_hash:{type:"bytes",id:3}}},CosmosGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},hrp:{type:"string",id:2},show_display:{type:"bool",id:3}}},CosmosAddress:{fields:{address:{type:"string",id:1}}},CosmosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},CosmosSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},CipherKeyValue:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},key:{rule:"required",type:"string",id:2},value:{rule:"required",type:"bytes",id:3},encrypt:{type:"bool",id:4},ask_on_encrypt:{type:"bool",id:5},ask_on_decrypt:{type:"bool",id:6},iv:{type:"bytes",id:7}}},CipheredKeyValue:{fields:{value:{rule:"required",type:"bytes",id:1}}},IdentityType:{fields:{proto:{type:"string",id:1},user:{type:"string",id:2},host:{type:"string",id:3},port:{type:"string",id:4},path:{type:"string",id:5},index:{type:"uint32",id:6,options:{default:0}}}},SignIdentity:{fields:{identity:{rule:"required",type:"IdentityType",id:1},challenge_hidden:{type:"bytes",id:2,options:{default:""}},challenge_visual:{type:"string",id:3,options:{default:""}},ecdsa_curve_name:{type:"string",id:4}}},SignedIdentity:{fields:{address:{type:"string",id:1},public_key:{rule:"required",type:"bytes",id:2},signature:{rule:"required",type:"bytes",id:3}}},GetECDHSessionKey:{fields:{identity:{rule:"required",type:"IdentityType",id:1},peer_public_key:{rule:"required",type:"bytes",id:2},ecdsa_curve_name:{type:"string",id:3}}},ECDHSessionKey:{fields:{session_key:{rule:"required",type:"bytes",id:1},public_key:{type:"bytes",id:2}}},CosiCommit:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},data:{type:"bytes",id:2}}},CosiCommitment:{fields:{commitment:{type:"bytes",id:1},pubkey:{type:"bytes",id:2}}},CosiSign:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},data:{type:"bytes",id:2},global_commitment:{type:"bytes",id:3},global_pubkey:{type:"bytes",id:4}}},CosiSignature:{fields:{signature:{rule:"required",type:"bytes",id:1}}},BatchGetPublickeys:{fields:{ecdsa_curve_name:{type:"string",id:1,options:{default:"ed25519"}},paths:{rule:"repeated",type:"Path",id:2}},nested:{Path:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}}}},EcdsaPublicKeys:{fields:{public_keys:{rule:"repeated",type:"bytes",id:1}}},DebugLinkDecision:{fields:{yes_no:{type:"bool",id:1},swipe:{type:"DebugSwipeDirection",id:2},input:{type:"string",id:3},x:{type:"uint32",id:4},y:{type:"uint32",id:5},wait:{type:"bool",id:6},hold_ms:{type:"uint32",id:7}},nested:{DebugSwipeDirection:{values:{UP:0,DOWN:1,LEFT:2,RIGHT:3}}}},DebugLinkLayout:{fields:{lines:{rule:"repeated",type:"string",id:1}}},DebugLinkReseedRandom:{fields:{value:{type:"uint32",id:1}}},DebugLinkRecordScreen:{fields:{target_directory:{type:"string",id:1}}},DebugLinkGetState:{fields:{wait_word_list:{type:"bool",id:1},wait_word_pos:{type:"bool",id:2},wait_layout:{type:"bool",id:3}}},DebugLinkState:{fields:{layout:{type:"bytes",id:1},pin:{type:"string",id:2},matrix:{type:"string",id:3},mnemonic_secret:{type:"bytes",id:4},node:{type:"HDNodeType",id:5},passphrase_protection:{type:"bool",id:6},reset_word:{type:"string",id:7},reset_entropy:{type:"bytes",id:8},recovery_fake_word:{type:"string",id:9},recovery_word_pos:{type:"uint32",id:10},reset_word_pos:{type:"uint32",id:11},mnemonic_type:{type:"BackupType",id:12},layout_lines:{rule:"repeated",type:"string",id:13}}},DebugLinkStop:{fields:{}},DebugLinkLog:{fields:{level:{type:"uint32",id:1},bucket:{type:"string",id:2},text:{type:"string",id:3}}},DebugLinkMemoryRead:{fields:{address:{type:"uint32",id:1},length:{type:"uint32",id:2}}},DebugLinkMemory:{fields:{memory:{type:"bytes",id:1}}},DebugLinkMemoryWrite:{fields:{address:{type:"uint32",id:1},memory:{type:"bytes",id:2},flash:{type:"bool",id:3}}},DebugLinkFlashErase:{fields:{sector:{type:"uint32",id:1}}},DebugLinkEraseSdCard:{fields:{format:{type:"bool",id:1}}},DebugLinkWatchLayout:{fields:{watch:{type:"bool",id:1}}},EmmcFixPermission:{fields:{}},EmmcPath:{fields:{exist:{rule:"required",type:"bool",id:1},size:{rule:"required",type:"uint64",id:2},year:{rule:"required",type:"uint32",id:3},month:{rule:"required",type:"uint32",id:4},day:{rule:"required",type:"uint32",id:5},hour:{rule:"required",type:"uint32",id:6},minute:{rule:"required",type:"uint32",id:7},second:{rule:"required",type:"uint32",id:8},readonly:{rule:"required",type:"bool",id:9},hidden:{rule:"required",type:"bool",id:10},system:{rule:"required",type:"bool",id:11},archive:{rule:"required",type:"bool",id:12},directory:{rule:"required",type:"bool",id:13}}},EmmcPathInfo:{fields:{path:{rule:"required",type:"string",id:1}}},EmmcFile:{fields:{path:{rule:"required",type:"string",id:1},offset:{rule:"required",type:"uint32",id:2},len:{rule:"required",type:"uint32",id:3},data:{type:"bytes",id:4},data_hash:{type:"uint32",id:5},processed_byte:{type:"uint32",id:6}}},EmmcFileRead:{fields:{file:{rule:"required",type:"EmmcFile",id:1},ui_percentage:{type:"uint32",id:2}}},EmmcFileWrite:{fields:{file:{rule:"required",type:"EmmcFile",id:1},overwrite:{rule:"required",type:"bool",id:2},append:{rule:"required",type:"bool",id:3},ui_percentage:{type:"uint32",id:4}}},EmmcFileDelete:{fields:{path:{rule:"required",type:"string",id:1}}},EmmcDir:{fields:{path:{rule:"required",type:"string",id:1},child_dirs:{type:"string",id:2},child_files:{type:"string",id:3}}},EmmcDirList:{fields:{path:{rule:"required",type:"string",id:1}}},EmmcDirMake:{fields:{path:{rule:"required",type:"string",id:1}}},EmmcDirRemove:{fields:{path:{rule:"required",type:"string",id:1}}},EosGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},EosPublicKey:{fields:{wif_public_key:{rule:"required",type:"string",id:1},raw_public_key:{rule:"required",type:"bytes",id:2}}},EosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},chain_id:{type:"bytes",id:2},header:{type:"EosTxHeader",id:3},num_actions:{type:"uint32",id:4}},nested:{EosTxHeader:{fields:{expiration:{rule:"required",type:"uint32",id:1},ref_block_num:{rule:"required",type:"uint32",id:2},ref_block_prefix:{rule:"required",type:"uint32",id:3},max_net_usage_words:{rule:"required",type:"uint32",id:4},max_cpu_usage_ms:{rule:"required",type:"uint32",id:5},delay_sec:{rule:"required",type:"uint32",id:6}}}}},EosTxActionRequest:{fields:{data_size:{type:"uint32",id:1}}},EosTxActionAck:{fields:{common:{type:"EosActionCommon",id:1},transfer:{type:"EosActionTransfer",id:2},delegate:{type:"EosActionDelegate",id:3},undelegate:{type:"EosActionUndelegate",id:4},refund:{type:"EosActionRefund",id:5},buy_ram:{type:"EosActionBuyRam",id:6},buy_ram_bytes:{type:"EosActionBuyRamBytes",id:7},sell_ram:{type:"EosActionSellRam",id:8},vote_producer:{type:"EosActionVoteProducer",id:9},update_auth:{type:"EosActionUpdateAuth",id:10},delete_auth:{type:"EosActionDeleteAuth",id:11},link_auth:{type:"EosActionLinkAuth",id:12},unlink_auth:{type:"EosActionUnlinkAuth",id:13},new_account:{type:"EosActionNewAccount",id:14},unknown:{type:"EosActionUnknown",id:15}},nested:{EosAsset:{fields:{amount:{type:"sint64",id:1},symbol:{type:"uint64",id:2}}},EosPermissionLevel:{fields:{actor:{type:"uint64",id:1},permission:{type:"uint64",id:2}}},EosAuthorizationKey:{fields:{type:{rule:"required",type:"uint32",id:1},key:{type:"bytes",id:2},address_n:{rule:"repeated",type:"uint32",id:3,options:{packed:!1}},weight:{rule:"required",type:"uint32",id:4}}},EosAuthorizationAccount:{fields:{account:{type:"EosPermissionLevel",id:1},weight:{type:"uint32",id:2}}},EosAuthorizationWait:{fields:{wait_sec:{type:"uint32",id:1},weight:{type:"uint32",id:2}}},EosAuthorization:{fields:{threshold:{type:"uint32",id:1},keys:{rule:"repeated",type:"EosAuthorizationKey",id:2},accounts:{rule:"repeated",type:"EosAuthorizationAccount",id:3},waits:{rule:"repeated",type:"EosAuthorizationWait",id:4}}},EosActionCommon:{fields:{account:{type:"uint64",id:1},name:{type:"uint64",id:2},authorization:{rule:"repeated",type:"EosPermissionLevel",id:3}}},EosActionTransfer:{fields:{sender:{type:"uint64",id:1},receiver:{type:"uint64",id:2},quantity:{type:"EosAsset",id:3},memo:{type:"string",id:4}}},EosActionDelegate:{fields:{sender:{type:"uint64",id:1},receiver:{type:"uint64",id:2},net_quantity:{type:"EosAsset",id:3},cpu_quantity:{type:"EosAsset",id:4},transfer:{type:"bool",id:5}}},EosActionUndelegate:{fields:{sender:{type:"uint64",id:1},receiver:{type:"uint64",id:2},net_quantity:{type:"EosAsset",id:3},cpu_quantity:{type:"EosAsset",id:4}}},EosActionRefund:{fields:{owner:{type:"uint64",id:1}}},EosActionBuyRam:{fields:{payer:{type:"uint64",id:1},receiver:{type:"uint64",id:2},quantity:{type:"EosAsset",id:3}}},EosActionBuyRamBytes:{fields:{payer:{type:"uint64",id:1},receiver:{type:"uint64",id:2},bytes:{type:"uint32",id:3}}},EosActionSellRam:{fields:{account:{type:"uint64",id:1},bytes:{type:"uint64",id:2}}},EosActionVoteProducer:{fields:{voter:{type:"uint64",id:1},proxy:{type:"uint64",id:2},producers:{rule:"repeated",type:"uint64",id:3,options:{packed:!1}}}},EosActionUpdateAuth:{fields:{account:{type:"uint64",id:1},permission:{type:"uint64",id:2},parent:{type:"uint64",id:3},auth:{type:"EosAuthorization",id:4}}},EosActionDeleteAuth:{fields:{account:{type:"uint64",id:1},permission:{type:"uint64",id:2}}},EosActionLinkAuth:{fields:{account:{type:"uint64",id:1},code:{type:"uint64",id:2},type:{type:"uint64",id:3},requirement:{type:"uint64",id:4}}},EosActionUnlinkAuth:{fields:{account:{type:"uint64",id:1},code:{type:"uint64",id:2},type:{type:"uint64",id:3}}},EosActionNewAccount:{fields:{creator:{type:"uint64",id:1},name:{type:"uint64",id:2},owner:{type:"EosAuthorization",id:3},active:{type:"EosAuthorization",id:4}}},EosActionUnknown:{fields:{data_size:{rule:"required",type:"uint32",id:1},data_chunk:{type:"bytes",id:2}}}}},EosSignedTx:{fields:{signature:{rule:"required",type:"string",id:1}}},EthereumSignTypedData:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},primary_type:{rule:"required",type:"string",id:2},metamask_v4_compat:{type:"bool",id:3,options:{default:!0}},chain_id:{type:"uint64",id:4}}},EthereumTypedDataStructRequest:{fields:{name:{rule:"required",type:"string",id:1}}},EthereumTypedDataStructAck:{fields:{members:{rule:"repeated",type:"EthereumStructMember",id:1}},nested:{EthereumStructMember:{fields:{type:{rule:"required",type:"EthereumFieldType",id:1},name:{rule:"required",type:"string",id:2}}},EthereumFieldType:{fields:{data_type:{rule:"required",type:"EthereumDataType",id:1},size:{type:"uint32",id:2},entry_type:{type:"EthereumFieldType",id:3},struct_name:{type:"string",id:4}}},EthereumDataType:{values:{UINT:1,INT:2,BYTES:3,STRING:4,BOOL:5,ADDRESS:6,ARRAY:7,STRUCT:8}}}},EthereumTypedDataValueRequest:{fields:{member_path:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}},EthereumTypedDataValueAck:{fields:{value:{rule:"required",type:"bytes",id:1}}},EthereumGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},chain_id:{type:"uint64",id:3}}},EthereumPublicKey:{fields:{node:{rule:"required",type:"HDNodeType",id:1},xpub:{rule:"required",type:"string",id:2}}},EthereumGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},chain_id:{type:"uint64",id:3}}},EthereumAddress:{fields:{_old_address:{type:"bytes",id:1,options:{deprecated:!0}},address:{type:"string",id:2}}},EthereumSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},nonce:{type:"bytes",id:2,options:{default:""}},gas_price:{rule:"required",type:"bytes",id:3},gas_limit:{rule:"required",type:"bytes",id:4},to:{type:"string",id:11,options:{default:""}},value:{type:"bytes",id:6,options:{default:""}},data_initial_chunk:{type:"bytes",id:7,options:{default:""}},data_length:{type:"uint32",id:8,options:{default:0}},chain_id:{rule:"required",type:"uint64",id:9},tx_type:{type:"uint32",id:10}}},EthereumSignTxEIP1559:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},nonce:{rule:"required",type:"bytes",id:2},max_gas_fee:{rule:"required",type:"bytes",id:3},max_priority_fee:{rule:"required",type:"bytes",id:4},gas_limit:{rule:"required",type:"bytes",id:5},to:{type:"string",id:6,options:{default:""}},value:{rule:"required",type:"bytes",id:7},data_initial_chunk:{type:"bytes",id:8,options:{default:""}},data_length:{rule:"required",type:"uint32",id:9},chain_id:{rule:"required",type:"uint64",id:10},access_list:{rule:"repeated",type:"EthereumAccessList",id:11}},nested:{EthereumAccessList:{fields:{address:{rule:"required",type:"string",id:1},storage_keys:{rule:"repeated",type:"bytes",id:2}}}}},EthereumTxRequest:{fields:{data_length:{type:"uint32",id:1},signature_v:{type:"uint32",id:2},signature_r:{type:"bytes",id:3},signature_s:{type:"bytes",id:4}}},EthereumTxAck:{fields:{data_chunk:{rule:"required",type:"bytes",id:1}}},EthereumSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2},chain_id:{type:"uint64",id:3}}},EthereumMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:2},address:{rule:"required",type:"string",id:3}}},EthereumVerifyMessage:{fields:{signature:{rule:"required",type:"bytes",id:2},message:{rule:"required",type:"bytes",id:3},address:{rule:"required",type:"string",id:4},chain_id:{type:"uint64",id:5}}},EthereumSignMessageEIP712:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},domain_hash:{type:"bytes",id:2},message_hash:{type:"bytes",id:3}}},EthereumSignTypedHash:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},domain_separator_hash:{rule:"required",type:"bytes",id:2},message_hash:{type:"bytes",id:3},chain_id:{type:"uint64",id:4}}},EthereumTypedDataSignature:{fields:{signature:{rule:"required",type:"bytes",id:1},address:{rule:"required",type:"string",id:2}}},FilecoinGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},testnet:{type:"bool",id:3}}},FilecoinAddress:{fields:{address:{type:"string",id:1}}},FilecoinSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2},testnet:{type:"bool",id:3}}},FilecoinSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},KaspaGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},prefix:{type:"string",id:3,options:{default:"kaspa"}},scheme:{type:"string",id:4,options:{default:"schnorr"}}}},KaspaAddress:{fields:{address:{rule:"required",type:"string",id:1}}},KaspaSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_message:{rule:"required",type:"bytes",id:2},scheme:{type:"string",id:3,options:{default:"schnorr"}},prefix:{type:"string",id:4,options:{default:"kaspa"}},input_count:{type:"uint32",id:5,options:{default:1}}}},KaspaTxInputRequest:{fields:{request_index:{rule:"required",type:"uint32",id:1},signature:{type:"bytes",id:2}}},KaspaTxInputAck:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_message:{rule:"required",type:"bytes",id:2}}},KaspaSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:2}}},BackupType:{values:{Bip39:0,Slip39_Basic:1,Slip39_Advanced:2}},SafetyCheckLevel:{values:{Strict:0,PromptAlways:1,PromptTemporarily:2}},Initialize:{fields:{session_id:{type:"bytes",id:1},_skip_passphrase:{type:"bool",id:2,options:{deprecated:!0}},derive_cardano:{type:"bool",id:3}}},GetFeatures:{fields:{}},Features:{fields:{vendor:{type:"string",id:1},major_version:{rule:"required",type:"uint32",id:2},minor_version:{rule:"required",type:"uint32",id:3},patch_version:{rule:"required",type:"uint32",id:4},bootloader_mode:{type:"bool",id:5},device_id:{type:"string",id:6},pin_protection:{type:"bool",id:7},passphrase_protection:{type:"bool",id:8},language:{type:"string",id:9},label:{type:"string",id:10},initialized:{type:"bool",id:12},revision:{type:"bytes",id:13},bootloader_hash:{type:"bytes",id:14},imported:{type:"bool",id:15},unlocked:{type:"bool",id:16},_passphrase_cached:{type:"bool",id:17,options:{deprecated:!0}},firmware_present:{type:"bool",id:18},needs_backup:{type:"bool",id:19},flags:{type:"uint32",id:20},model:{type:"string",id:21},fw_major:{type:"uint32",id:22},fw_minor:{type:"uint32",id:23},fw_patch:{type:"uint32",id:24},fw_vendor:{type:"string",id:25},fw_vendor_keys:{type:"bytes",id:26},unfinished_backup:{type:"bool",id:27},no_backup:{type:"bool",id:28},recovery_mode:{type:"bool",id:29},capabilities:{rule:"repeated",type:"Capability",id:30,options:{packed:!1}},backup_type:{type:"BackupType",id:31},sd_card_present:{type:"bool",id:32},sd_protection:{type:"bool",id:33},wipe_code_protection:{type:"bool",id:34},session_id:{type:"bytes",id:35},passphrase_always_on_device:{type:"bool",id:36},safety_checks:{type:"SafetyCheckLevel",id:37},auto_lock_delay_ms:{type:"uint32",id:38},display_rotation:{type:"uint32",id:39},experimental_features:{type:"bool",id:40},offset:{type:"uint32",id:500},ble_name:{type:"string",id:501},ble_ver:{type:"string",id:502},ble_enable:{type:"bool",id:503},se_enable:{type:"bool",id:504},se_ver:{type:"string",id:506},backup_only:{type:"bool",id:507},onekey_version:{type:"string",id:508},onekey_serial:{type:"string",id:509},bootloader_version:{type:"string",id:510},serial_no:{type:"string",id:511},spi_flash:{type:"string",id:512},initstates:{type:"uint32",id:513},NFT_voucher:{type:"bytes",id:514},cpu_info:{type:"string",id:515},pre_firmware:{type:"string",id:516},coin_switch:{type:"uint32",id:517},build_id:{type:"string",id:518},battery_level:{type:"uint32",id:520}},nested:{Capability:{options:{"(has_bitcoin_only_values)":!0},values:{Capability_Bitcoin:1,Capability_Bitcoin_like:2,Capability_Binance:3,Capability_Cardano:4,Capability_Crypto:5,Capability_EOS:6,Capability_Ethereum:7,Capability_Lisk:8,Capability_Monero:9,Capability_NEM:10,Capability_Ripple:11,Capability_Stellar:12,Capability_Tezos:13,Capability_U2F:14,Capability_Shamir:15,Capability_ShamirGroups:16,Capability_PassphraseEntry:17}}}},LockDevice:{fields:{}},EndSession:{fields:{}},ApplySettings:{fields:{language:{type:"string",id:1},label:{type:"string",id:2},use_passphrase:{type:"bool",id:3},homescreen:{type:"bytes",id:4},_passphrase_source:{type:"uint32",id:5,options:{deprecated:!0}},auto_lock_delay_ms:{type:"uint32",id:6},display_rotation:{type:"uint32",id:7},passphrase_always_on_device:{type:"bool",id:8},safety_checks:{type:"SafetyCheckLevel",id:9},experimental_features:{type:"bool",id:10},use_ble:{type:"bool",id:100},use_se:{type:"bool",id:101},is_bixinapp:{type:"bool",id:102},fastpay_pin:{type:"bool",id:103},fastpay_confirm:{type:"bool",id:104},fastpay_money_limit:{type:"uint64",id:105},fastpay_times:{type:"uint32",id:106}},nested:{ExportType:{values:{SeedEncExportType_NO:0,SeedEncExportType_YES:1,MnemonicPlainExportType_YES:2}}}},ApplyFlags:{fields:{flags:{rule:"required",type:"uint32",id:1}}},ChangePin:{fields:{remove:{type:"bool",id:1}}},ChangeWipeCode:{fields:{remove:{type:"bool",id:1}}},SdProtect:{fields:{operation:{rule:"required",type:"SdProtectOperationType",id:1}},nested:{SdProtectOperationType:{values:{DISABLE:0,ENABLE:1,REFRESH:2}}}},Ping:{fields:{message:{type:"string",id:1,options:{default:""}},button_protection:{type:"bool",id:2}}},Cancel:{fields:{}},GetEntropy:{fields:{size:{rule:"required",type:"uint32",id:1}}},Entropy:{fields:{entropy:{rule:"required",type:"bytes",id:1}}},WipeDevice:{fields:{}},LoadDevice:{fields:{mnemonics:{rule:"repeated",type:"string",id:1},pin:{type:"string",id:3},passphrase_protection:{type:"bool",id:4},language:{type:"string",id:5,options:{default:"en-US"}},label:{type:"string",id:6},skip_checksum:{type:"bool",id:7},u2f_counter:{type:"uint32",id:8},needs_backup:{type:"bool",id:9},no_backup:{type:"bool",id:10}}},ResetDevice:{fields:{display_random:{type:"bool",id:1},strength:{type:"uint32",id:2,options:{default:256}},passphrase_protection:{type:"bool",id:3},pin_protection:{type:"bool",id:4},language:{type:"string",id:5,options:{default:"en-US"}},label:{type:"string",id:6},u2f_counter:{type:"uint32",id:7},skip_backup:{type:"bool",id:8},no_backup:{type:"bool",id:9},backup_type:{type:"BackupType",id:10,options:{default:"Bip39"}}}},BackupDevice:{fields:{}},EntropyRequest:{fields:{}},EntropyAck:{fields:{entropy:{rule:"required",type:"bytes",id:1}}},RecoveryDevice:{fields:{word_count:{type:"uint32",id:1},passphrase_protection:{type:"bool",id:2},pin_protection:{type:"bool",id:3},language:{type:"string",id:4},label:{type:"string",id:5},enforce_wordlist:{type:"bool",id:6},type:{type:"RecoveryDeviceType",id:8},u2f_counter:{type:"uint32",id:9},dry_run:{type:"bool",id:10}},nested:{RecoveryDeviceType:{values:{RecoveryDeviceType_ScrambledWords:0,RecoveryDeviceType_Matrix:1}}}},WordRequest:{fields:{type:{rule:"required",type:"WordRequestType",id:1}},nested:{WordRequestType:{values:{WordRequestType_Plain:0,WordRequestType_Matrix9:1,WordRequestType_Matrix6:2}}}},WordAck:{fields:{word:{rule:"required",type:"string",id:1}}},SetU2FCounter:{fields:{u2f_counter:{rule:"required",type:"uint32",id:1}}},GetNextU2FCounter:{fields:{}},NextU2FCounter:{fields:{u2f_counter:{rule:"required",type:"uint32",id:1}}},DoPreauthorized:{fields:{}},PreauthorizedRequest:{fields:{}},CancelAuthorization:{fields:{}},BixinSeedOperate:{fields:{type:{rule:"required",type:"SeedRequestType",id:1},seed_importData:{type:"bytes",id:2}},nested:{SeedRequestType:{values:{SeedRequestType_Gen:0,SeedRequestType_EncExport:1,SeedRequestType_EncImport:2}}}},BixinMessageSE:{fields:{inputmessage:{rule:"required",type:"bytes",id:1}}},BixinOutMessageSE:{fields:{outmessage:{type:"bytes",id:1}}},DeviceBackToBoot:{fields:{}},BixinBackupRequest:{fields:{}},BixinBackupAck:{fields:{data:{rule:"required",type:"bytes",id:1}}},BixinRestoreRequest:{fields:{data:{rule:"required",type:"bytes",id:1},language:{type:"string",id:2},label:{type:"string",id:3},passphrase_protection:{type:"bool",id:4}}},BixinRestoreAck:{fields:{data:{rule:"required",type:"bytes",id:1}}},BixinVerifyDeviceRequest:{fields:{data:{rule:"required",type:"bytes",id:1}}},BixinVerifyDeviceAck:{fields:{cert:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},BixinWhiteListRequest:{fields:{type:{rule:"required",type:"WL_OperationType",id:1},addr_in:{type:"string",id:2}},nested:{WL_OperationType:{values:{WL_OperationType_Add:0,WL_OperationType_Delete:1,WL_OperationType_Inquire:2}}}},BixinWhiteListAck:{fields:{address:{rule:"repeated",type:"string",id:1}}},BixinLoadDevice:{fields:{mnemonics:{rule:"required",type:"string",id:1},language:{type:"string",id:5,options:{default:"en-US"}},label:{type:"string",id:6},skip_checksum:{type:"bool",id:7}}},BixinBackupDevice:{fields:{}},BixinBackupDeviceAck:{fields:{mnemonics:{rule:"required",type:"string",id:1}}},DeviceInfoSettings:{fields:{serial_no:{type:"string",id:1},cpu_info:{type:"string",id:2},pre_firmware:{type:"string",id:3}}},GetDeviceInfo:{fields:{}},DeviceInfo:{fields:{serial_no:{type:"string",id:1},spiFlash_info:{type:"string",id:2},SE_info:{type:"string",id:3},NFT_voucher:{type:"bytes",id:4},cpu_info:{type:"string",id:5},pre_firmware:{type:"string",id:6}}},ReadSEPublicKey:{fields:{}},SEPublicKey:{fields:{public_key:{rule:"required",type:"bytes",id:1}}},WriteSEPublicCert:{fields:{public_cert:{rule:"required",type:"bytes",id:1}}},ReadSEPublicCert:{fields:{}},SEPublicCert:{fields:{public_cert:{rule:"required",type:"bytes",id:1}}},SpiFlashWrite:{fields:{address:{rule:"required",type:"uint32",id:1},data:{rule:"required",type:"bytes",id:2}}},SpiFlashRead:{fields:{address:{rule:"required",type:"uint32",id:1},len:{rule:"required",type:"uint32",id:2}}},SpiFlashData:{fields:{data:{rule:"required",type:"bytes",id:1}}},SESignMessage:{fields:{message:{rule:"required",type:"bytes",id:1}}},SEMessageSignature:{fields:{signature:{rule:"required",type:"bytes",id:1}}},ResourceUpload:{fields:{extension:{rule:"required",type:"string",id:1},data_length:{rule:"required",type:"uint32",id:2},res_type:{rule:"required",type:"ResourceType",id:3},nft_meta_data:{type:"bytes",id:4},zoom_data_length:{rule:"required",type:"uint32",id:5},file_name_no_ext:{type:"string",id:6}},nested:{ResourceType:{values:{WallPaper:0,Nft:1}}}},ZoomRequest:{fields:{offset:{type:"uint32",id:1},data_length:{rule:"required",type:"uint32",id:2}}},ResourceRequest:{fields:{offset:{type:"uint32",id:1},data_length:{rule:"required",type:"uint32",id:2}}},ResourceAck:{fields:{data_chunk:{rule:"required",type:"bytes",id:1},hash:{type:"bytes",id:2}}},ResourceUpdate:{fields:{file_name:{rule:"required",type:"string",id:1},data_length:{rule:"required",type:"uint32",id:2},initial_data_chunk:{rule:"required",type:"bytes",id:3},hash:{type:"bytes",id:4}}},NFTWriteInfo:{fields:{index:{rule:"required",type:"uint32",id:1},width:{rule:"required",type:"uint32",id:2},height:{rule:"required",type:"uint32",id:3},name_zh:{type:"string",id:4},name_en:{type:"string",id:5}}},NFTWriteData:{fields:{index:{rule:"required",type:"uint32",id:1},data:{rule:"required",type:"bytes",id:2},offset:{rule:"required",type:"uint32",id:3}}},RebootToBootloader:{fields:{}},RebootToBoardloader:{fields:{}},ListResDir:{fields:{path:{rule:"required",type:"string",id:1}}},FileInfoList:{fields:{files:{rule:"repeated",type:"FileInfo",id:1}},nested:{FileInfo:{fields:{name:{rule:"required",type:"string",id:1},size:{rule:"required",type:"uint64",id:2}}}}},DeviceEraseSector:{fields:{sector:{rule:"required",type:"uint32",id:1}}},MoneroTransactionSourceEntry:{fields:{outputs:{rule:"repeated",type:"MoneroOutputEntry",id:1},real_output:{type:"uint64",id:2},real_out_tx_key:{type:"bytes",id:3},real_out_additional_tx_keys:{rule:"repeated",type:"bytes",id:4},real_output_in_tx_index:{type:"uint64",id:5},amount:{type:"uint64",id:6},rct:{type:"bool",id:7},mask:{type:"bytes",id:8},multisig_kLRki:{type:"MoneroMultisigKLRki",id:9},subaddr_minor:{type:"uint32",id:10}},nested:{MoneroOutputEntry:{fields:{idx:{type:"uint64",id:1},key:{type:"MoneroRctKeyPublic",id:2}},nested:{MoneroRctKeyPublic:{fields:{dest:{type:"bytes",id:1},commitment:{type:"bytes",id:2}}}}},MoneroMultisigKLRki:{fields:{K:{type:"bytes",id:1},L:{type:"bytes",id:2},R:{type:"bytes",id:3},ki:{type:"bytes",id:4}}}}},MoneroTransactionDestinationEntry:{fields:{amount:{type:"uint64",id:1},addr:{type:"MoneroAccountPublicAddress",id:2},is_subaddress:{type:"bool",id:3},original:{type:"bytes",id:4},is_integrated:{type:"bool",id:5}},nested:{MoneroAccountPublicAddress:{fields:{spend_public_key:{type:"bytes",id:1},view_public_key:{type:"bytes",id:2}}}}},MoneroTransactionRsigData:{fields:{rsig_type:{type:"uint32",id:1},offload_type:{type:"uint32",id:2},grouping:{rule:"repeated",type:"uint64",id:3,options:{packed:!1}},mask:{type:"bytes",id:4},rsig:{type:"bytes",id:5},rsig_parts:{rule:"repeated",type:"bytes",id:6},bp_version:{type:"uint32",id:7}}},MoneroGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},network_type:{type:"uint32",id:3},account:{type:"uint32",id:4},minor:{type:"uint32",id:5},payment_id:{type:"bytes",id:6}}},MoneroAddress:{fields:{address:{type:"bytes",id:1}}},MoneroGetWatchKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network_type:{type:"uint32",id:2}}},MoneroWatchKey:{fields:{watch_key:{type:"bytes",id:1},address:{type:"bytes",id:2}}},MoneroTransactionInitRequest:{fields:{version:{type:"uint32",id:1},address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},network_type:{type:"uint32",id:3},tsx_data:{type:"MoneroTransactionData",id:4}},nested:{MoneroTransactionData:{fields:{version:{type:"uint32",id:1},payment_id:{type:"bytes",id:2},unlock_time:{type:"uint64",id:3},outputs:{rule:"repeated",type:"MoneroTransactionDestinationEntry",id:4},change_dts:{type:"MoneroTransactionDestinationEntry",id:5},num_inputs:{type:"uint32",id:6},mixin:{type:"uint32",id:7},fee:{type:"uint64",id:8},account:{type:"uint32",id:9},minor_indices:{rule:"repeated",type:"uint32",id:10,options:{packed:!1}},rsig_data:{type:"MoneroTransactionRsigData",id:11},integrated_indices:{rule:"repeated",type:"uint32",id:12,options:{packed:!1}},client_version:{type:"uint32",id:13},hard_fork:{type:"uint32",id:14},monero_version:{type:"bytes",id:15}}}}},MoneroTransactionInitAck:{fields:{hmacs:{rule:"repeated",type:"bytes",id:1},rsig_data:{type:"MoneroTransactionRsigData",id:2}}},MoneroTransactionSetInputRequest:{fields:{src_entr:{type:"MoneroTransactionSourceEntry",id:1}}},MoneroTransactionSetInputAck:{fields:{vini:{type:"bytes",id:1},vini_hmac:{type:"bytes",id:2},pseudo_out:{type:"bytes",id:3},pseudo_out_hmac:{type:"bytes",id:4},pseudo_out_alpha:{type:"bytes",id:5},spend_key:{type:"bytes",id:6}}},MoneroTransactionInputsPermutationRequest:{fields:{perm:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}}}},MoneroTransactionInputsPermutationAck:{fields:{}},MoneroTransactionInputViniRequest:{fields:{src_entr:{type:"MoneroTransactionSourceEntry",id:1},vini:{type:"bytes",id:2},vini_hmac:{type:"bytes",id:3},pseudo_out:{type:"bytes",id:4},pseudo_out_hmac:{type:"bytes",id:5},orig_idx:{type:"uint32",id:6}}},MoneroTransactionInputViniAck:{fields:{}},MoneroTransactionAllInputsSetRequest:{fields:{}},MoneroTransactionAllInputsSetAck:{fields:{rsig_data:{type:"MoneroTransactionRsigData",id:1}}},MoneroTransactionSetOutputRequest:{fields:{dst_entr:{type:"MoneroTransactionDestinationEntry",id:1},dst_entr_hmac:{type:"bytes",id:2},rsig_data:{type:"MoneroTransactionRsigData",id:3},is_offloaded_bp:{type:"bool",id:4}}},MoneroTransactionSetOutputAck:{fields:{tx_out:{type:"bytes",id:1},vouti_hmac:{type:"bytes",id:2},rsig_data:{type:"MoneroTransactionRsigData",id:3},out_pk:{type:"bytes",id:4},ecdh_info:{type:"bytes",id:5}}},MoneroTransactionAllOutSetRequest:{fields:{rsig_data:{type:"MoneroTransactionRsigData",id:1}}},MoneroTransactionAllOutSetAck:{fields:{extra:{type:"bytes",id:1},tx_prefix_hash:{type:"bytes",id:2},rv:{type:"MoneroRingCtSig",id:4},full_message_hash:{type:"bytes",id:5}},nested:{MoneroRingCtSig:{fields:{txn_fee:{type:"uint64",id:1},message:{type:"bytes",id:2},rv_type:{type:"uint32",id:3}}}}},MoneroTransactionSignInputRequest:{fields:{src_entr:{type:"MoneroTransactionSourceEntry",id:1},vini:{type:"bytes",id:2},vini_hmac:{type:"bytes",id:3},pseudo_out:{type:"bytes",id:4},pseudo_out_hmac:{type:"bytes",id:5},pseudo_out_alpha:{type:"bytes",id:6},spend_key:{type:"bytes",id:7},orig_idx:{type:"uint32",id:8}}},MoneroTransactionSignInputAck:{fields:{signature:{type:"bytes",id:1},pseudo_out:{type:"bytes",id:2}}},MoneroTransactionFinalRequest:{fields:{}},MoneroTransactionFinalAck:{fields:{cout_key:{type:"bytes",id:1},salt:{type:"bytes",id:2},rand_mult:{type:"bytes",id:3},tx_enc_keys:{type:"bytes",id:4},opening_key:{type:"bytes",id:5}}},MoneroKeyImageExportInitRequest:{fields:{num:{type:"uint64",id:1},hash:{type:"bytes",id:2},address_n:{rule:"repeated",type:"uint32",id:3,options:{packed:!1}},network_type:{type:"uint32",id:4},subs:{rule:"repeated",type:"MoneroSubAddressIndicesList",id:5}},nested:{MoneroSubAddressIndicesList:{fields:{account:{type:"uint32",id:1},minor_indices:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}}}}}},MoneroKeyImageExportInitAck:{fields:{}},MoneroKeyImageSyncStepRequest:{fields:{tdis:{rule:"repeated",type:"MoneroTransferDetails",id:1}},nested:{MoneroTransferDetails:{fields:{out_key:{type:"bytes",id:1},tx_pub_key:{type:"bytes",id:2},additional_tx_pub_keys:{rule:"repeated",type:"bytes",id:3},internal_output_index:{type:"uint64",id:4},sub_addr_major:{type:"uint32",id:5},sub_addr_minor:{type:"uint32",id:6}}}}},MoneroKeyImageSyncStepAck:{fields:{kis:{rule:"repeated",type:"MoneroExportedKeyImage",id:1}},nested:{MoneroExportedKeyImage:{fields:{iv:{type:"bytes",id:1},blob:{type:"bytes",id:3}}}}},MoneroKeyImageSyncFinalRequest:{fields:{}},MoneroKeyImageSyncFinalAck:{fields:{enc_key:{type:"bytes",id:1}}},MoneroGetTxKeyRequest:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network_type:{type:"uint32",id:2},salt1:{type:"bytes",id:3},salt2:{type:"bytes",id:4},tx_enc_keys:{type:"bytes",id:5},tx_prefix_hash:{type:"bytes",id:6},reason:{type:"uint32",id:7},view_public_key:{type:"bytes",id:8}}},MoneroGetTxKeyAck:{fields:{salt:{type:"bytes",id:1},tx_keys:{type:"bytes",id:2},tx_derivations:{type:"bytes",id:3}}},MoneroLiveRefreshStartRequest:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network_type:{type:"uint32",id:2}}},MoneroLiveRefreshStartAck:{fields:{}},MoneroLiveRefreshStepRequest:{fields:{out_key:{type:"bytes",id:1},recv_deriv:{type:"bytes",id:2},real_out_idx:{type:"uint64",id:3},sub_addr_major:{type:"uint32",id:4},sub_addr_minor:{type:"uint32",id:5}}},MoneroLiveRefreshStepAck:{fields:{salt:{type:"bytes",id:1},key_image:{type:"bytes",id:2}}},MoneroLiveRefreshFinalRequest:{fields:{}},MoneroLiveRefreshFinalAck:{fields:{}},DebugMoneroDiagRequest:{fields:{ins:{type:"uint64",id:1},p1:{type:"uint64",id:2},p2:{type:"uint64",id:3},pd:{rule:"repeated",type:"uint64",id:4,options:{packed:!1}},data1:{type:"bytes",id:5},data2:{type:"bytes",id:6}}},DebugMoneroDiagAck:{fields:{ins:{type:"uint64",id:1},p1:{type:"uint64",id:2},p2:{type:"uint64",id:3},pd:{rule:"repeated",type:"uint64",id:4,options:{packed:!1}},data1:{type:"bytes",id:5},data2:{type:"bytes",id:6}}},NearGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},NearAddress:{fields:{address:{type:"string",id:1}}},NearSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},NearSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},NEMGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network:{type:"uint32",id:2},show_display:{type:"bool",id:3}}},NEMAddress:{fields:{address:{rule:"required",type:"string",id:1}}},NEMSignTx:{fields:{transaction:{type:"NEMTransactionCommon",id:1},multisig:{type:"NEMTransactionCommon",id:2},transfer:{type:"NEMTransfer",id:3},cosigning:{type:"bool",id:4},provision_namespace:{type:"NEMProvisionNamespace",id:5},mosaic_creation:{type:"NEMMosaicCreation",id:6},supply_change:{type:"NEMMosaicSupplyChange",id:7},aggregate_modification:{type:"NEMAggregateModification",id:8},importance_transfer:{type:"NEMImportanceTransfer",id:9}},nested:{NEMTransactionCommon:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network:{type:"uint32",id:2},timestamp:{type:"uint32",id:3},fee:{type:"uint64",id:4},deadline:{type:"uint32",id:5},signer:{type:"bytes",id:6}}},NEMTransfer:{fields:{recipient:{type:"string",id:1},amount:{type:"uint64",id:2},payload:{type:"bytes",id:3},public_key:{type:"bytes",id:4},mosaics:{rule:"repeated",type:"NEMMosaic",id:5}},nested:{NEMMosaic:{fields:{namespace:{type:"string",id:1},mosaic:{type:"string",id:2},quantity:{type:"uint64",id:3}}}}},NEMProvisionNamespace:{fields:{namespace:{type:"string",id:1},parent:{type:"string",id:2},sink:{type:"string",id:3},fee:{type:"uint64",id:4}}},NEMMosaicCreation:{fields:{definition:{type:"NEMMosaicDefinition",id:1},sink:{type:"string",id:2},fee:{type:"uint64",id:3}},nested:{NEMMosaicDefinition:{fields:{name:{type:"string",id:1},ticker:{type:"string",id:2},namespace:{type:"string",id:3},mosaic:{type:"string",id:4},divisibility:{type:"uint32",id:5},levy:{type:"NEMMosaicLevy",id:6},fee:{type:"uint64",id:7},levy_address:{type:"string",id:8},levy_namespace:{type:"string",id:9},levy_mosaic:{type:"string",id:10},supply:{type:"uint64",id:11},mutable_supply:{type:"bool",id:12},transferable:{type:"bool",id:13},description:{type:"string",id:14},networks:{rule:"repeated",type:"uint32",id:15,options:{packed:!1}}},nested:{NEMMosaicLevy:{values:{MosaicLevy_Absolute:1,MosaicLevy_Percentile:2}}}}}},NEMMosaicSupplyChange:{fields:{namespace:{type:"string",id:1},mosaic:{type:"string",id:2},type:{type:"NEMSupplyChangeType",id:3},delta:{type:"uint64",id:4}},nested:{NEMSupplyChangeType:{values:{SupplyChange_Increase:1,SupplyChange_Decrease:2}}}},NEMAggregateModification:{fields:{modifications:{rule:"repeated",type:"NEMCosignatoryModification",id:1},relative_change:{type:"sint32",id:2}},nested:{NEMCosignatoryModification:{fields:{type:{type:"NEMModificationType",id:1},public_key:{type:"bytes",id:2}},nested:{NEMModificationType:{values:{CosignatoryModification_Add:1,CosignatoryModification_Delete:2}}}}}},NEMImportanceTransfer:{fields:{mode:{type:"NEMImportanceTransferMode",id:1},public_key:{type:"bytes",id:2}},nested:{NEMImportanceTransferMode:{values:{ImportanceTransfer_Activate:1,ImportanceTransfer_Deactivate:2}}}}}},NEMSignedTx:{fields:{data:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},NEMDecryptMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},network:{type:"uint32",id:2},public_key:{type:"bytes",id:3},payload:{type:"bytes",id:4}}},NEMDecryptedMessage:{fields:{payload:{rule:"required",type:"bytes",id:1}}},NexaGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2},prefix:{type:"string",id:3,options:{default:"nexa"}}}},NexaAddress:{fields:{address:{rule:"required",type:"string",id:1},public_key:{rule:"required",type:"bytes",id:2}}},NexaSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_message:{rule:"required",type:"bytes",id:2},prefix:{type:"string",id:3,options:{default:"nexa"}},input_count:{type:"uint32",id:4,options:{default:1}}}},NexaTxInputRequest:{fields:{request_index:{rule:"required",type:"uint32",id:1},signature:{type:"bytes",id:2}}},NexaTxInputAck:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_message:{rule:"required",type:"bytes",id:2}}},NexaSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},PolkadotGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},prefix:{rule:"required",type:"uint32",id:2},network:{rule:"required",type:"string",id:3},show_display:{type:"bool",id:4}}},PolkadotAddress:{fields:{address:{type:"string",id:1},public_key:{type:"string",id:2}}},PolkadotSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2},network:{rule:"required",type:"string",id:3}}},PolkadotSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1}}},RippleGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},RippleAddress:{fields:{address:{rule:"required",type:"string",id:1}}},RippleSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},fee:{type:"uint64",id:2},flags:{type:"uint32",id:3},sequence:{type:"uint32",id:4},last_ledger_sequence:{type:"uint32",id:5},payment:{type:"RipplePayment",id:6}},nested:{RipplePayment:{fields:{amount:{rule:"required",type:"uint64",id:1},destination:{rule:"required",type:"string",id:2},destination_tag:{type:"uint32",id:3}}}}},RippleSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1},serialized_tx:{rule:"required",type:"bytes",id:2}}},SolanaGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},SolanaAddress:{fields:{address:{type:"string",id:1}}},SolanaSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},SolanaSignedTx:{fields:{signature:{type:"bytes",id:1}}},StarcoinGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},StarcoinAddress:{fields:{address:{type:"string",id:1}}},StarcoinGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},StarcoinPublicKey:{fields:{public_key:{rule:"required",type:"bytes",id:1}}},StarcoinSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{type:"bytes",id:2}}},StarcoinSignedTx:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},StarcoinSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{type:"bytes",id:2}}},StarcoinMessageSignature:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},StarcoinVerifyMessage:{fields:{public_key:{type:"bytes",id:1},signature:{type:"bytes",id:2},message:{type:"bytes",id:3}}},StellarAssetType:{values:{NATIVE:0,ALPHANUM4:1,ALPHANUM12:2}},StellarAsset:{fields:{type:{rule:"required",type:"StellarAssetType",id:1},code:{type:"string",id:2},issuer:{type:"string",id:3}}},StellarGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},StellarAddress:{fields:{address:{rule:"required",type:"string",id:1}}},StellarSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:2,options:{packed:!1}},network_passphrase:{rule:"required",type:"string",id:3},source_account:{rule:"required",type:"string",id:4},fee:{rule:"required",type:"uint32",id:5},sequence_number:{rule:"required",type:"uint64",id:6},timebounds_start:{rule:"required",type:"uint32",id:8},timebounds_end:{rule:"required",type:"uint32",id:9},memo_type:{rule:"required",type:"StellarMemoType",id:10},memo_text:{type:"string",id:11},memo_id:{type:"uint64",id:12},memo_hash:{type:"bytes",id:13},num_operations:{rule:"required",type:"uint32",id:14}},nested:{StellarMemoType:{values:{NONE:0,TEXT:1,ID:2,HASH:3,RETURN:4}}}},StellarTxOpRequest:{fields:{}},StellarPaymentOp:{fields:{source_account:{type:"string",id:1},destination_account:{rule:"required",type:"string",id:2},asset:{rule:"required",type:"StellarAsset",id:3},amount:{rule:"required",type:"sint64",id:4}}},StellarCreateAccountOp:{fields:{source_account:{type:"string",id:1},new_account:{rule:"required",type:"string",id:2},starting_balance:{rule:"required",type:"sint64",id:3}}},StellarPathPaymentStrictReceiveOp:{fields:{source_account:{type:"string",id:1},send_asset:{rule:"required",type:"StellarAsset",id:2},send_max:{rule:"required",type:"sint64",id:3},destination_account:{rule:"required",type:"string",id:4},destination_asset:{rule:"required",type:"StellarAsset",id:5},destination_amount:{rule:"required",type:"sint64",id:6},paths:{rule:"repeated",type:"StellarAsset",id:7}}},StellarPathPaymentStrictSendOp:{fields:{source_account:{type:"string",id:1},send_asset:{rule:"required",type:"StellarAsset",id:2},send_amount:{rule:"required",type:"sint64",id:3},destination_account:{rule:"required",type:"string",id:4},destination_asset:{rule:"required",type:"StellarAsset",id:5},destination_min:{rule:"required",type:"sint64",id:6},paths:{rule:"repeated",type:"StellarAsset",id:7}}},StellarManageSellOfferOp:{fields:{source_account:{type:"string",id:1},selling_asset:{rule:"required",type:"StellarAsset",id:2},buying_asset:{rule:"required",type:"StellarAsset",id:3},amount:{rule:"required",type:"sint64",id:4},price_n:{rule:"required",type:"uint32",id:5},price_d:{rule:"required",type:"uint32",id:6},offer_id:{rule:"required",type:"uint64",id:7}}},StellarManageBuyOfferOp:{fields:{source_account:{type:"string",id:1},selling_asset:{rule:"required",type:"StellarAsset",id:2},buying_asset:{rule:"required",type:"StellarAsset",id:3},amount:{rule:"required",type:"sint64",id:4},price_n:{rule:"required",type:"uint32",id:5},price_d:{rule:"required",type:"uint32",id:6},offer_id:{rule:"required",type:"uint64",id:7}}},StellarCreatePassiveSellOfferOp:{fields:{source_account:{type:"string",id:1},selling_asset:{rule:"required",type:"StellarAsset",id:2},buying_asset:{rule:"required",type:"StellarAsset",id:3},amount:{rule:"required",type:"sint64",id:4},price_n:{rule:"required",type:"uint32",id:5},price_d:{rule:"required",type:"uint32",id:6}}},StellarSetOptionsOp:{fields:{source_account:{type:"string",id:1},inflation_destination_account:{type:"string",id:2},clear_flags:{type:"uint32",id:3},set_flags:{type:"uint32",id:4},master_weight:{type:"uint32",id:5},low_threshold:{type:"uint32",id:6},medium_threshold:{type:"uint32",id:7},high_threshold:{type:"uint32",id:8},home_domain:{type:"string",id:9},signer_type:{type:"StellarSignerType",id:10},signer_key:{type:"bytes",id:11},signer_weight:{type:"uint32",id:12}},nested:{StellarSignerType:{values:{ACCOUNT:0,PRE_AUTH:1,HASH:2}}}},StellarChangeTrustOp:{fields:{source_account:{type:"string",id:1},asset:{rule:"required",type:"StellarAsset",id:2},limit:{rule:"required",type:"uint64",id:3}}},StellarAllowTrustOp:{fields:{source_account:{type:"string",id:1},trusted_account:{rule:"required",type:"string",id:2},asset_type:{rule:"required",type:"StellarAssetType",id:3},asset_code:{type:"string",id:4},is_authorized:{rule:"required",type:"bool",id:5}}},StellarAccountMergeOp:{fields:{source_account:{type:"string",id:1},destination_account:{rule:"required",type:"string",id:2}}},StellarManageDataOp:{fields:{source_account:{type:"string",id:1},key:{rule:"required",type:"string",id:2},value:{type:"bytes",id:3}}},StellarBumpSequenceOp:{fields:{source_account:{type:"string",id:1},bump_to:{rule:"required",type:"uint64",id:2}}},StellarSignedTx:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},SuiGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},SuiAddress:{fields:{address:{type:"string",id:1}}},SuiSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},raw_tx:{rule:"required",type:"bytes",id:2}}},SuiSignedTx:{fields:{public_key:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},TezosGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},TezosAddress:{fields:{address:{rule:"required",type:"string",id:1}}},TezosGetPublicKey:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},TezosPublicKey:{fields:{public_key:{rule:"required",type:"string",id:1}}},TezosSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},branch:{rule:"required",type:"bytes",id:2},reveal:{type:"TezosRevealOp",id:3},transaction:{type:"TezosTransactionOp",id:4},origination:{type:"TezosOriginationOp",id:5},delegation:{type:"TezosDelegationOp",id:6},proposal:{type:"TezosProposalOp",id:7},ballot:{type:"TezosBallotOp",id:8}},nested:{TezosContractID:{fields:{tag:{rule:"required",type:"TezosContractType",id:1},hash:{rule:"required",type:"bytes",id:2}},nested:{TezosContractType:{values:{Implicit:0,Originated:1}}}},TezosRevealOp:{fields:{source:{rule:"required",type:"bytes",id:7},fee:{rule:"required",type:"uint64",id:2},counter:{rule:"required",type:"uint64",id:3},gas_limit:{rule:"required",type:"uint64",id:4},storage_limit:{rule:"required",type:"uint64",id:5},public_key:{rule:"required",type:"bytes",id:6}}},TezosTransactionOp:{fields:{source:{rule:"required",type:"bytes",id:9},fee:{rule:"required",type:"uint64",id:2},counter:{rule:"required",type:"uint64",id:3},gas_limit:{rule:"required",type:"uint64",id:4},storage_limit:{rule:"required",type:"uint64",id:5},amount:{rule:"required",type:"uint64",id:6},destination:{rule:"required",type:"TezosContractID",id:7},parameters:{type:"bytes",id:8},parameters_manager:{type:"TezosParametersManager",id:10}},nested:{TezosParametersManager:{fields:{set_delegate:{type:"bytes",id:1},cancel_delegate:{type:"bool",id:2},transfer:{type:"TezosManagerTransfer",id:3}},nested:{TezosManagerTransfer:{fields:{destination:{type:"TezosContractID",id:1},amount:{type:"uint64",id:2}}}}}}},TezosOriginationOp:{fields:{source:{rule:"required",type:"bytes",id:12},fee:{rule:"required",type:"uint64",id:2},counter:{rule:"required",type:"uint64",id:3},gas_limit:{rule:"required",type:"uint64",id:4},storage_limit:{rule:"required",type:"uint64",id:5},manager_pubkey:{type:"bytes",id:6},balance:{rule:"required",type:"uint64",id:7},spendable:{type:"bool",id:8},delegatable:{type:"bool",id:9},delegate:{type:"bytes",id:10},script:{rule:"required",type:"bytes",id:11}}},TezosDelegationOp:{fields:{source:{rule:"required",type:"bytes",id:7},fee:{rule:"required",type:"uint64",id:2},counter:{rule:"required",type:"uint64",id:3},gas_limit:{rule:"required",type:"uint64",id:4},storage_limit:{rule:"required",type:"uint64",id:5},delegate:{rule:"required",type:"bytes",id:6}}},TezosProposalOp:{fields:{source:{type:"bytes",id:1},period:{type:"uint64",id:2},proposals:{rule:"repeated",type:"bytes",id:4}}},TezosBallotOp:{fields:{source:{type:"bytes",id:1},period:{type:"uint64",id:2},proposal:{type:"bytes",id:3},ballot:{type:"TezosBallotType",id:4}},nested:{TezosBallotType:{values:{Yay:0,Nay:1,Pass:2}}}}}},TezosSignedTx:{fields:{signature:{rule:"required",type:"string",id:1},sig_op_contents:{rule:"required",type:"bytes",id:2},operation_hash:{rule:"required",type:"string",id:3}}},TronGetAddress:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},show_display:{type:"bool",id:2}}},TronAddress:{fields:{address:{type:"string",id:1}}},TronSignTx:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},ref_block_bytes:{rule:"required",type:"bytes",id:2},ref_block_hash:{rule:"required",type:"bytes",id:3},expiration:{rule:"required",type:"uint64",id:4},data:{type:"string",id:5},contract:{rule:"required",type:"TronContract",id:6},timestamp:{rule:"required",type:"uint64",id:7},fee_limit:{type:"uint64",id:8}},nested:{TronContract:{fields:{transfer_contract:{type:"TronTransferContract",id:2},freeze_balance_contract:{type:"TronFreezeBalanceContract",id:11},unfreeze_balance_contract:{type:"TronUnfreezeBalanceContract",id:12},withdraw_balance_contract:{type:"TronWithdrawBalanceContract",id:13},trigger_smart_contract:{type:"TronTriggerSmartContract",id:31},freeze_balance_v2_contract:{type:"TronFreezeBalanceV2Contract",id:54},unfreeze_balance_v2_contract:{type:"TronUnfreezeBalanceV2Contract",id:55},withdraw_expire_unfreeze_contract:{type:"TronWithdrawExpireUnfreezeContract",id:56},delegate_resource_contract:{type:"TronDelegateResourceContract",id:57},undelegate_resource_contract:{type:"TronUnDelegateResourceContract",id:58}},nested:{TronTransferContract:{fields:{to_address:{type:"string",id:2},amount:{type:"uint64",id:3}}},TronTriggerSmartContract:{fields:{contract_address:{type:"string",id:2},call_value:{type:"uint64",id:3},data:{type:"bytes",id:4},call_token_value:{type:"uint64",id:5},asset_id:{type:"uint64",id:6}}},TronResourceCode:{values:{BANDWIDTH:0,ENERGY:1}},TronFreezeBalanceContract:{fields:{frozen_balance:{type:"uint64",id:1},frozen_duration:{type:"uint64",id:2},resource:{type:"TronResourceCode",id:3},receiver_address:{type:"string",id:4}}},TronUnfreezeBalanceContract:{fields:{resource:{type:"TronResourceCode",id:1},receiver_address:{type:"string",id:2}}},TronWithdrawBalanceContract:{fields:{owner_address:{type:"bytes",id:1}}},TronFreezeBalanceV2Contract:{fields:{frozen_balance:{type:"uint64",id:2},resource:{type:"TronResourceCode",id:3}}},TronUnfreezeBalanceV2Contract:{fields:{unfreeze_balance:{type:"uint64",id:2},resource:{type:"TronResourceCode",id:3}}},TronWithdrawExpireUnfreezeContract:{fields:{}},TronDelegateResourceContract:{fields:{resource:{type:"TronResourceCode",id:2},balance:{type:"uint64",id:3},receiver_address:{type:"string",id:4},lock:{type:"bool",id:5}}},TronUnDelegateResourceContract:{fields:{resource:{type:"TronResourceCode",id:2},balance:{type:"uint64",id:3},receiver_address:{type:"string",id:4}}}}}}},TronSignedTx:{fields:{signature:{rule:"required",type:"bytes",id:1},serialized_tx:{type:"bytes",id:2}}},TronSignMessage:{fields:{address_n:{rule:"repeated",type:"uint32",id:1,options:{packed:!1}},message:{rule:"required",type:"bytes",id:2}}},TronMessageSignature:{fields:{address:{rule:"required",type:"bytes",id:1},signature:{rule:"required",type:"bytes",id:2}}},WebAuthnListResidentCredentials:{fields:{}},WebAuthnAddResidentCredential:{fields:{credential_id:{type:"bytes",id:1}}},WebAuthnRemoveResidentCredential:{fields:{index:{type:"uint32",id:1}}},WebAuthnCredentials:{fields:{credentials:{rule:"repeated",type:"WebAuthnCredential",id:1}},nested:{WebAuthnCredential:{fields:{index:{type:"uint32",id:1},id:{type:"bytes",id:2},rp_id:{type:"string",id:3},rp_name:{type:"string",id:4},user_id:{type:"bytes",id:5},user_name:{type:"string",id:6},user_display_name:{type:"string",id:7},creation_time:{type:"uint32",id:8},hmac_secret:{type:"bool",id:9},use_sign_count:{type:"bool",id:10},algorithm:{type:"sint32",id:11},curve:{type:"sint32",id:12}}}}},wire_in:{type:"bool",id:50002,extend:"google.protobuf.EnumValueOptions"},wire_out:{type:"bool",id:50003,extend:"google.protobuf.EnumValueOptions"},wire_debug_in:{type:"bool",id:50004,extend:"google.protobuf.EnumValueOptions"},wire_debug_out:{type:"bool",id:50005,extend:"google.protobuf.EnumValueOptions"},wire_tiny:{type:"bool",id:50006,extend:"google.protobuf.EnumValueOptions"},wire_bootloader:{type:"bool",id:50007,extend:"google.protobuf.EnumValueOptions"},wire_no_fsm:{type:"bool",id:50008,extend:"google.protobuf.EnumValueOptions"},facotry:{type:"bool",id:50501,extend:"google.protobuf.EnumValueOptions"},bitcoin_only:{type:"bool",id:6e4,extend:"google.protobuf.EnumValueOptions"},has_bitcoin_only_values:{type:"bool",id:51001,extend:"google.protobuf.EnumOptions"},unstable:{type:"bool",id:52001,extend:"google.protobuf.MessageOptions"},wire_type:{type:"uint32",id:52002,extend:"google.protobuf.MessageOptions"},experimental:{type:"bool",id:53001,extend:"google.protobuf.FieldOptions"},include_in_bitcoin_only:{type:"bool",id:6e4,extend:"google.protobuf.FileOptions"},CommandFlags:{values:{Default:0,Factory_Only:1}},MessageType:{options:{"(has_bitcoin_only_values)":!0},values:{MessageType_Initialize:0,MessageType_Ping:1,MessageType_Success:2,MessageType_Failure:3,MessageType_ChangePin:4,MessageType_WipeDevice:5,MessageType_GetEntropy:9,MessageType_Entropy:10,MessageType_LoadDevice:13,MessageType_ResetDevice:14,MessageType_Features:17,MessageType_PinMatrixRequest:18,MessageType_PinMatrixAck:19,MessageType_Cancel:20,MessageType_LockDevice:24,MessageType_ApplySettings:25,MessageType_ButtonRequest:26,MessageType_ButtonAck:27,MessageType_ApplyFlags:28,MessageType_BackupDevice:34,MessageType_EntropyRequest:35,MessageType_EntropyAck:36,MessageType_PassphraseRequest:41,MessageType_PassphraseAck:42,MessageType_RecoveryDevice:45,MessageType_WordRequest:46,MessageType_WordAck:47,MessageType_GetFeatures:55,MessageType_SdProtect:79,MessageType_ChangeWipeCode:82,MessageType_EndSession:83,MessageType_DoPreauthorized:84,MessageType_PreauthorizedRequest:85,MessageType_CancelAuthorization:86,MessageType_RebootToBootloader:87,MessageType_SetU2FCounter:63,MessageType_GetNextU2FCounter:80,MessageType_NextU2FCounter:81,MessageType_Deprecated_PassphraseStateRequest:77,MessageType_Deprecated_PassphraseStateAck:78,MessageType_FirmwareErase:6,MessageType_FirmwareErase_ex:16,MessageType_FirmwareUpload:7,MessageType_FirmwareRequest:8,MessageType_SelfTest:32,MessageType_Reboot:3e4,MessageType_FirmwareUpdateEmmc:30001,MessageType_GetPublicKey:11,MessageType_PublicKey:12,MessageType_SignTx:15,MessageType_TxRequest:21,MessageType_TxAck:22,MessageType_GetAddress:29,MessageType_Address:30,MessageType_SignMessage:38,MessageType_VerifyMessage:39,MessageType_MessageSignature:40,MessageType_GetOwnershipId:43,MessageType_OwnershipId:44,MessageType_GetOwnershipProof:49,MessageType_OwnershipProof:50,MessageType_AuthorizeCoinJoin:51,MessageType_CipherKeyValue:23,MessageType_CipheredKeyValue:48,MessageType_SignIdentity:53,MessageType_SignedIdentity:54,MessageType_GetECDHSessionKey:61,MessageType_ECDHSessionKey:62,MessageType_CosiCommit:71,MessageType_CosiCommitment:72,MessageType_CosiSign:73,MessageType_CosiSignature:74,MessageType_BatchGetPublickeys:10016,MessageType_EcdsaPublicKeys:10017,MessageType_DebugLinkDecision:100,MessageType_DebugLinkGetState:101,MessageType_DebugLinkState:102,MessageType_DebugLinkStop:103,MessageType_DebugLinkLog:104,MessageType_DebugLinkMemoryRead:110,MessageType_DebugLinkMemory:111,MessageType_DebugLinkMemoryWrite:112,MessageType_DebugLinkFlashErase:113,MessageType_DebugLinkLayout:9001,MessageType_DebugLinkReseedRandom:9002,MessageType_DebugLinkRecordScreen:9003,MessageType_DebugLinkEraseSdCard:9005,MessageType_DebugLinkWatchLayout:9006,MessageType_EmmcFixPermission:30100,MessageType_EmmcPath:30101,MessageType_EmmcPathInfo:30102,MessageType_EmmcFile:30103,MessageType_EmmcFileRead:30104,MessageType_EmmcFileWrite:30105,MessageType_EmmcFileDelete:30106,MessageType_EmmcDir:30107,MessageType_EmmcDirList:30108,MessageType_EmmcDirMake:30109,MessageType_EmmcDirRemove:30110,MessageType_EthereumGetPublicKey:450,MessageType_EthereumPublicKey:451,MessageType_EthereumGetAddress:56,MessageType_EthereumAddress:57,MessageType_EthereumSignTx:58,MessageType_EthereumSignTxEIP1559:452,MessageType_EthereumTxRequest:59,MessageType_EthereumTxAck:60,MessageType_EthereumSignMessage:64,MessageType_EthereumVerifyMessage:65,MessageType_EthereumMessageSignature:66,MessageType_EthereumSignTypedData:464,MessageType_EthereumTypedDataStructRequest:465,MessageType_EthereumTypedDataStructAck:466,MessageType_EthereumTypedDataValueRequest:467,MessageType_EthereumTypedDataValueAck:468,MessageType_EthereumTypedDataSignature:469,MessageType_EthereumSignTypedHash:470,MessageType_NEMGetAddress:67,MessageType_NEMAddress:68,MessageType_NEMSignTx:69,MessageType_NEMSignedTx:70,MessageType_NEMDecryptMessage:75,MessageType_NEMDecryptedMessage:76,MessageType_TezosGetAddress:150,MessageType_TezosAddress:151,MessageType_TezosSignTx:152,MessageType_TezosSignedTx:153,MessageType_TezosGetPublicKey:154,MessageType_TezosPublicKey:155,MessageType_StellarSignTx:202,MessageType_StellarTxOpRequest:203,MessageType_StellarGetAddress:207,MessageType_StellarAddress:208,MessageType_StellarCreateAccountOp:210,MessageType_StellarPaymentOp:211,MessageType_StellarPathPaymentStrictReceiveOp:212,MessageType_StellarManageSellOfferOp:213,MessageType_StellarCreatePassiveSellOfferOp:214,MessageType_StellarSetOptionsOp:215,MessageType_StellarChangeTrustOp:216,MessageType_StellarAllowTrustOp:217,MessageType_StellarAccountMergeOp:218,MessageType_StellarManageDataOp:220,MessageType_StellarBumpSequenceOp:221,MessageType_StellarManageBuyOfferOp:222,MessageType_StellarPathPaymentStrictSendOp:223,MessageType_StellarSignedTx:230,MessageType_CardanoGetPublicKey:305,MessageType_CardanoPublicKey:306,MessageType_CardanoGetAddress:307,MessageType_CardanoAddress:308,MessageType_CardanoTxItemAck:313,MessageType_CardanoTxAuxiliaryDataSupplement:314,MessageType_CardanoTxWitnessRequest:315,MessageType_CardanoTxWitnessResponse:316,MessageType_CardanoTxHostAck:317,MessageType_CardanoTxBodyHash:318,MessageType_CardanoSignTxFinished:319,MessageType_CardanoSignTxInit:320,MessageType_CardanoTxInput:321,MessageType_CardanoTxOutput:322,MessageType_CardanoAssetGroup:323,MessageType_CardanoToken:324,MessageType_CardanoTxCertificate:325,MessageType_CardanoTxWithdrawal:326,MessageType_CardanoTxAuxiliaryData:327,MessageType_CardanoPoolOwner:328,MessageType_CardanoPoolRelayParameters:329,MessageType_CardanoGetNativeScriptHash:330,MessageType_CardanoNativeScriptHash:331,MessageType_CardanoTxMint:332,MessageType_CardanoTxCollateralInput:333,MessageType_CardanoTxRequiredSigner:334,MessageType_CardanoTxInlineDatumChunk:335,MessageType_CardanoTxReferenceScriptChunk:336,MessageType_CardanoTxReferenceInput:337,MessageType_CardanoSignMessage:350,MessageType_CardanoMessageSignature:351,MessageType_RippleGetAddress:400,MessageType_RippleAddress:401,MessageType_RippleSignTx:402,MessageType_RippleSignedTx:403,MessageType_MoneroTransactionInitRequest:501,MessageType_MoneroTransactionInitAck:502,MessageType_MoneroTransactionSetInputRequest:503,MessageType_MoneroTransactionSetInputAck:504,MessageType_MoneroTransactionInputsPermutationRequest:505,MessageType_MoneroTransactionInputsPermutationAck:506,MessageType_MoneroTransactionInputViniRequest:507,MessageType_MoneroTransactionInputViniAck:508,MessageType_MoneroTransactionAllInputsSetRequest:509,MessageType_MoneroTransactionAllInputsSetAck:510,MessageType_MoneroTransactionSetOutputRequest:511,MessageType_MoneroTransactionSetOutputAck:512,MessageType_MoneroTransactionAllOutSetRequest:513,MessageType_MoneroTransactionAllOutSetAck:514,MessageType_MoneroTransactionSignInputRequest:515,MessageType_MoneroTransactionSignInputAck:516,MessageType_MoneroTransactionFinalRequest:517,MessageType_MoneroTransactionFinalAck:518,MessageType_MoneroKeyImageExportInitRequest:530,MessageType_MoneroKeyImageExportInitAck:531,MessageType_MoneroKeyImageSyncStepRequest:532,MessageType_MoneroKeyImageSyncStepAck:533,MessageType_MoneroKeyImageSyncFinalRequest:534,MessageType_MoneroKeyImageSyncFinalAck:535,MessageType_MoneroGetAddress:540,MessageType_MoneroAddress:541,MessageType_MoneroGetWatchKey:542,MessageType_MoneroWatchKey:543,MessageType_DebugMoneroDiagRequest:546,MessageType_DebugMoneroDiagAck:547,MessageType_MoneroGetTxKeyRequest:550,MessageType_MoneroGetTxKeyAck:551,MessageType_MoneroLiveRefreshStartRequest:552,MessageType_MoneroLiveRefreshStartAck:553,MessageType_MoneroLiveRefreshStepRequest:554,MessageType_MoneroLiveRefreshStepAck:555,MessageType_MoneroLiveRefreshFinalRequest:556,MessageType_MoneroLiveRefreshFinalAck:557,MessageType_EosGetPublicKey:600,MessageType_EosPublicKey:601,MessageType_EosSignTx:602,MessageType_EosTxActionRequest:603,MessageType_EosTxActionAck:604,MessageType_EosSignedTx:605,MessageType_BinanceGetAddress:700,MessageType_BinanceAddress:701,MessageType_BinanceGetPublicKey:702,MessageType_BinancePublicKey:703,MessageType_BinanceSignTx:704,MessageType_BinanceTxRequest:705,MessageType_BinanceTransferMsg:706,MessageType_BinanceOrderMsg:707,MessageType_BinanceCancelMsg:708,MessageType_BinanceSignedTx:709,MessageType_SolanaGetAddress:10100,MessageType_SolanaAddress:10101,MessageType_SolanaSignTx:10102,MessageType_SolanaSignedTx:10103,MessageType_StarcoinGetAddress:10300,MessageType_StarcoinAddress:10301,MessageType_StarcoinGetPublicKey:10302,MessageType_StarcoinPublicKey:10303,MessageType_StarcoinSignTx:10304,MessageType_StarcoinSignedTx:10305,MessageType_StarcoinSignMessage:10306,MessageType_StarcoinMessageSignature:10307,MessageType_StarcoinVerifyMessage:10308,MessageType_AptosGetAddress:10600,MessageType_AptosAddress:10601,MessageType_AptosSignTx:10602,MessageType_AptosSignedTx:10603,MessageType_AptosSignMessage:10604,MessageType_AptosMessageSignature:10605,MessageType_WebAuthnListResidentCredentials:800,MessageType_WebAuthnCredentials:801,MessageType_WebAuthnAddResidentCredential:802,MessageType_WebAuthnRemoveResidentCredential:803,MessageType_BixinSeedOperate:901,MessageType_BixinMessageSE:902,MessageType_BixinOutMessageSE:904,MessageType_BixinBackupRequest:905,MessageType_BixinBackupAck:906,MessageType_BixinRestoreRequest:907,MessageType_BixinRestoreAck:908,MessageType_BixinVerifyDeviceRequest:909,MessageType_BixinVerifyDeviceAck:910,MessageType_BixinWhiteListRequest:911,MessageType_BixinWhiteListAck:912,MessageType_BixinLoadDevice:913,MessageType_BixinBackupDevice:914,MessageType_BixinBackupDeviceAck:915,MessageType_BixinPinInputOnDevice:1e4,MessageType_EthereumSignMessageEIP712:10200,MessageType_GetPublicKeyMultiple:10210,MessageType_PublicKeyMultiple:10211,MessageType_ConfluxGetAddress:10112,MessageType_ConfluxAddress:10113,MessageType_ConfluxSignTx:10114,MessageType_ConfluxTxRequest:10115,MessageType_ConfluxTxAck:10116,MessageType_ConfluxSignMessage:10117,MessageType_ConfluxSignMessageCIP23:10118,MessageType_ConfluxMessageSignature:10119,MessageType_TronGetAddress:10501,MessageType_TronAddress:10502,MessageType_TronSignTx:10503,MessageType_TronSignedTx:10504,MessageType_TronSignMessage:10505,MessageType_TronMessageSignature:10506,MessageType_NearGetAddress:10701,MessageType_NearAddress:10702,MessageType_NearSignTx:10703,MessageType_NearSignedTx:10704,MessageType_CosmosGetAddress:10800,MessageType_CosmosAddress:10801,MessageType_CosmosSignTx:10802,MessageType_CosmosSignedTx:10803,MessageType_AlgorandGetAddress:10900,MessageType_AlgorandAddress:10901,MessageType_AlgorandSignTx:10902,MessageType_AlgorandSignedTx:10903,MessageType_PolkadotGetAddress:11e3,MessageType_PolkadotAddress:11001,MessageType_PolkadotSignTx:11002,MessageType_PolkadotSignedTx:11003,MessageType_SuiGetAddress:11100,MessageType_SuiAddress:11101,MessageType_SuiSignTx:11102,MessageType_SuiSignedTx:11103,MessageType_FilecoinGetAddress:11200,MessageType_FilecoinAddress:11201,MessageType_FilecoinSignTx:11202,MessageType_FilecoinSignedTx:11203,MessageType_KaspaGetAddress:11300,MessageType_KaspaAddress:11301,MessageType_KaspaSignTx:11302,MessageType_KaspaSignedTx:11303,MessageType_KaspaTxInputRequest:11304,MessageType_KaspaTxInputAck:11305,MessageType_NexaGetAddress:11400,MessageType_NexaAddress:11401,MessageType_NexaSignTx:11402,MessageType_NexaSignedTx:11403,MessageType_NexaTxInputRequest:11404,MessageType_NexaTxInputAck:11405,MessageType_DeviceBackToBoot:903,MessageType_DeviceInfoSettings:10001,MessageType_GetDeviceInfo:10002,MessageType_DeviceInfo:10003,MessageType_ReadSEPublicKey:10004,MessageType_SEPublicKey:10005,MessageType_WriteSEPublicCert:10006,MessageType_ReadSEPublicCert:10007,MessageType_SEPublicCert:10008,MessageType_SpiFlashWrite:10009,MessageType_SpiFlashRead:10010,MessageType_SpiFlashData:10011,MessageType_SESignMessage:10012,MessageType_SEMessageSignature:10013,MessageType_NFTWriteInfo:10014,MessageType_NFTWriteData:10015,MessageType_ResourceUpload:10018,MessageType_ZoomRequest:10019,MessageType_ResourceRequest:10020,MessageType_ResourceAck:10021,MessageType_ResourceUpdate:10022,MessageType_ListResDir:10023,MessageType_FileInfoList:10024,MessageType_RebootToBoardloader:10025,MessageType_DeviceEraseSector:10026}},google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},public_dependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weak_dependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},message_type:{rule:"repeated",type:"DescriptorProto",id:4},enum_type:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},source_code_info:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nested_type:{rule:"repeated",type:"DescriptorProto",id:3},enum_type:{rule:"repeated",type:"EnumDescriptorProto",id:4},extension_range:{rule:"repeated",type:"ExtensionRange",id:5},oneof_decl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reserved_range:{rule:"repeated",type:"ReservedRange",id:9},reserved_name:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},type_name:{type:"string",id:6},extendee:{type:"string",id:2},default_value:{type:"string",id:7},oneof_index:{type:"int32",id:9},json_name:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},input_type:{type:"string",id:2},output_type:{type:"string",id:3},options:{type:"MethodOptions",id:4},client_streaming:{type:"bool",id:5},server_streaming:{type:"bool",id:6}}},FileOptions:{fields:{java_package:{type:"string",id:1},java_outer_classname:{type:"string",id:8},java_multiple_files:{type:"bool",id:10},java_generate_equals_and_hash:{type:"bool",id:20,options:{deprecated:!0}},java_string_check_utf8:{type:"bool",id:27},optimize_for:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},go_package:{type:"string",id:11},cc_generic_services:{type:"bool",id:16},java_generic_services:{type:"bool",id:17},py_generic_services:{type:"bool",id:18},deprecated:{type:"bool",id:23},cc_enable_arenas:{type:"bool",id:31},objc_class_prefix:{type:"string",id:36},csharp_namespace:{type:"string",id:37},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{message_set_wire_format:{type:"bool",id:1},no_standard_descriptor_accessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},map_entry:{type:"bool",id:7},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allow_alias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpreted_option:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifier_value:{type:"string",id:3},positive_int_value:{type:"uint64",id:4},negative_int_value:{type:"int64",id:5},double_value:{type:"double",id:6},string_value:{type:"bytes",id:7},aggregate_value:{type:"string",id:8}},nested:{NamePart:{fields:{name_part:{rule:"required",type:"string",id:1},is_extension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leading_comments:{type:"string",id:3},trailing_comments:{type:"string",id:4},leading_detached_comments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},source_file:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}}};const ae=(e,t)=>((e,t="text")=>K(void 0,void 0,void 0,(function*(){const i={};e.indexOf("ngrok-free.app")>-1&&(i["ngrok-skip-browser-warning"]=!0);const r=yield b.default.request({url:e,withCredentials:!1,responseType:"binary"===t?"arraybuffer":"json",headers:i});if(200==+r.status)return r.data;throw new Error(`httpRequest error: ${e} ${r.statusText}`)})))(e,t),oe=()=>(new Date).getTime(),de=new RegExp(/^[0-9]{1,3}(\.[0-9]{1,3}){0,2}$/),pe=e=>de.test(e),ue=e=>{if(!Array.isArray(e))return!1;if(0===e.length||e.length>3)return!1;if(0===e[0])return!1;for(let t=0;t<e.length;t++)if("number"!=typeof e[t]||e[t]<0)return!1;return!0},le=e=>{if(3===e.length)return e;const t=[...e];for(let i=e.length;i<3;i++)t.push(0);return t},ce=e=>pe(e)?e.split(".").map((e=>Number(e))):[0,0,0];function ye(e){return"Features"!==e.type||e.message.major_version<1&&(e.message.major_version=1),e}const he=i(204147),ge=()=>he.version,me=`https://jssdk.onekey.so/${ge()}/`,fe={configSrc:"./data/config.json",version:"",debug:!1,priority:2,trustedHost:!1,connectSrc:me,iframeSrc:`${me}iframe.html`,parentOrigin:"undefined"!=typeof window&&window.location?window.location.origin:"",supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),env:"web",lazyLoad:!1,timestamp:(new Date).getTime()},_e=()=>{if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"},ve=e=>{if("string"==typeof e)return e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*onekey\.so\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//),e};function Te(e){const t=We(e);if(!ie.model_touch.includes(t))return!1;const i=Xe(e).join("."),r=Ze(e).join("."),s=Ke.getBootloaderTargetVersion(e);return!!s&&(T.default.gte(i,"3.2.0")&&T.default.gte(i,"4.1.0")&&T.default.lte(r,s.join(".")))}function be(e,t){const i=We(e);if(!ie.model_mini.includes(i))return!1;if(!t)return!1;const r=Xe(e).join("."),s=Ze(e).join("."),n=Ke.getBootloaderTargetVersion(e);if(n&&T.default.gte(s,n.join(".")))return!1;const a=Ke.getBootloaderRelatedFirmwareVersion(e);return!!a&&function({currentVersion:e,bootloaderVersion:t,willUpdateFirmware:i,targetBootloaderVersion:r,bootloaderRelatedFirmwareVersion:s}){return!(r&&T.default.gte(t,r.join("."))||!T.default.gte(i,s.join("."))&&!T.default.gte(e,s.join(".")))}({currentVersion:r,bootloaderVersion:s,willUpdateFirmware:t,targetBootloaderVersion:n,bootloaderRelatedFirmwareVersion:a})}const Se=16384;const Ee="LOG_EVENT",Re={OUTPUT:"log-output"},Me=(e,t)=>({event:Ee,type:e,payload:t});let xe;class we{constructor(e,t){this.prefix=e,this.enabled=t,this.messages=[]}addMessage(e,t,...i){this.messages.push({level:e,prefix:t,message:i,timestamp:(new Date).getTime()}),this.messages.length>500&&this.messages.shift()}log(...e){this.addMessage("log",this.prefix,...e),De(this.prefix,...e),this.enabled&&this.prefix}error(...e){this.addMessage("error",this.prefix,...e),De(this.prefix,...e),this.enabled&&console.error(this.prefix,...e)}warn(...e){this.addMessage("warn",this.prefix,...e),De(this.prefix,...e),this.enabled&&console.warn(this.prefix,...e)}debug(...e){this.addMessage("debug",this.prefix,...e),De(this.prefix,...e),this.enabled&&this.prefix}}const Ae={},Oe=(e,t)=>{const i=new we(e,!!t);return Ae[e]=i,i},Ce=e=>{Object.keys(Ae).forEach((t=>{Ae[t].enabled=!!e}))},ke=()=>{let e=[];return Object.keys(Ae).forEach((t=>{e=e.concat(Ae[t].messages)})),e.sort(((e,t)=>e.timestamp-t.timestamp)),e},qe=e=>{xe=e},Ie=()=>{const e=new WeakSet;return(t,i)=>{if("object"==typeof i&&null!==i){if(e.has(i))return;e.add(i)}return i}},De=(e,...t)=>{null==xe||xe(Me(Re.OUTPUT,((...e)=>e.map((e=>"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e?e:"object"==typeof e?JSON.stringify(e,Ie()):e)))(e,...t)))};var Pe;t.d0=void 0,(Pe=t.d0||(t.d0={})).Core="Core",Pe.Transport="Transport",Pe.Device="Device",Pe.DeviceCommands="DeviceCommands",Pe.DeviceConnector="DeviceConnector",Pe.DeviceList="DeviceList",Pe.DevicePool="DevicePool",Pe.HdCommonConnectSdk="@onekey/common-connect-sdk",Pe.HdBleSdk="@onekey/hd-ble-sdk",Pe.HdTransportHttp="@onekey/hd-transport-http",Pe.HdTransportLowLevel="@onekey/hd-transport-lowlevel",Pe.HdBleTransport="@onekey/hd-ble-transport",Pe.Connect="@onekey/connect",Pe.Iframe="IFrame",Pe.SendMessage="[SendMessage]",Pe.Method="[Method]";const Ne={[t.d0.Core]:Oe(t.d0.Core),[t.d0.Transport]:Oe(t.d0.Transport),[t.d0.Device]:Oe(t.d0.Device),[t.d0.DeviceCommands]:Oe(t.d0.DeviceCommands),[t.d0.DeviceConnector]:Oe(t.d0.DeviceConnector),[t.d0.DeviceList]:Oe(t.d0.DeviceList),[t.d0.DevicePool]:Oe(t.d0.DevicePool),[t.d0.HdBleSdk]:Oe(t.d0.HdBleSdk),[t.d0.HdTransportHttp]:Oe(t.d0.HdTransportHttp),[t.d0.HdBleTransport]:Oe(t.d0.HdBleTransport),[t.d0.HdTransportLowLevel]:Oe(t.d0.HdTransportLowLevel),[t.d0.Connect]:Oe(t.d0.Connect),[t.d0.Iframe]:Oe(t.d0.Iframe),[t.d0.SendMessage]:Oe(t.d0.SendMessage),[t.d0.Method]:Oe(t.d0.Method),[t.d0.HdCommonConnectSdk]:Oe(t.d0.Method)},Be=e=>Ne[e],Le=e=>new Promise((t=>{setTimeout(t,e)})),Fe=(e,t)=>{const i=e.filter((e=>T.default.gt(e.version.join("."),t)));return 0===i.length?"valid":i.some((e=>e.required))?"required":"outdated"},je=(e,t)=>e.filter((e=>T.default.gt(e.version.join("."),t))).map((e=>e.changelog)),Ue=e=>{let t=e[0];return e.forEach((e=>{T.default.gt(e.version.join("."),t.version.join("."))&&(t=e)})),t};var He;class Ke{static load(e){return K(this,void 0,void 0,(function*(){if(this.settings=e,e.fetchConfig)try{const t=e.preRelease?"https://data.onekey.so/pre-config.json":"https://data.onekey.so/config.json",{data:i}=yield b.default.get(`${t}?noCache=${oe()}`,{timeout:7e3});this.deviceMap={classic:i.classic,classic1s:i.classic1s,mini:i.mini,touch:i.touch,pro:i.pro},this.assets={bridge:i.bridge}}catch(e){}}))}static checkAndReloadData(){return K(this,void 0,void 0,(function*(){oe()-this.lastCheckTimestamp>108e5&&(yield this.load(this.settings).then((()=>{this.lastCheckTimestamp=oe()})))}))}static getProtobufMessages(e="latest"){return this.messages[e]}static getSettings(e){return this.settings?"string"==typeof e?this.settings[e]:this.settings:null}}He=Ke,Ke.deviceMap={classic:{firmware:[],ble:[]},classic1s:{firmware:[],ble:[]},mini:{firmware:[],ble:[]},touch:{firmware:[],ble:[]},pro:{firmware:[],ble:[]}},Ke.assets=null,Ke.messages={latest:se,v1:ne},Ke.lastCheckTimestamp=0,Ke.getFirmwareStatus=e=>{var t,i;const r=We(e),s=Xe(e);if(!1===e.firmware_present)return"none";if(ie.model_classic.includes(r)&&e.bootloader_mode)return"unknown";const n=st({features:e,updateType:"firmware"}),a=null!==(i=null===(t=He.deviceMap[r])||void 0===t?void 0:t[n])&&void 0!==i?i:[],o=s.join(".");return Fe(a,o)},Ke.getSysResourcesLatestRelease=(e,t)=>{var i,r,s;const n=We(e),a=Xe(e);if("pro"!==n&&"touch"!==n)return;const o=st({features:e,updateType:"firmware"}),d=null!==(r=null===(i=He.deviceMap[n])||void 0===i?void 0:i[o])&&void 0!==r?r:[],p=a.join("."),u=d.filter((e=>(t||T.default.gt(e.version.join("."),p))&&!!e.resource));return null===(s=Ue(u))||void 0===s?void 0:s.resource},Ke.getSysFullResource=e=>{var t,i,r;const s=We(e);if("pro"!==s&&"touch"!==s)return;const n=st({features:e,updateType:"firmware"}),a=(null!==(i=null===(t=He.deviceMap[s])||void 0===t?void 0:t[n])&&void 0!==i?i:[]).filter((e=>!!e.fullResource));return null===(r=Ue(a))||void 0===r?void 0:r.fullResource},Ke.getBootloaderResource=e=>{var t,i,r;const s=We(e);if("pro"!==s&&"touch"!==s)return;const n=st({features:e,updateType:"firmware"}),a=(null!==(i=null===(t=He.deviceMap[s])||void 0===t?void 0:t[n])&&void 0!==i?i:[]).filter((e=>!!e.bootloaderResource));return null===(r=Ue(a))||void 0===r?void 0:r.bootloaderResource},Ke.getBootloaderTargetVersion=e=>{var t,i,r,s;const n=We(e),a=st({features:e,updateType:"firmware"}),o=(null!==(i=null===(t=He.deviceMap[n])||void 0===t?void 0:t[a])&&void 0!==i?i:[]).filter((e=>!!e.bootloaderResource));return null!==(s=null===(r=null==o?void 0:o[0])||void 0===r?void 0:r.bootloaderVersion)&&void 0!==s?s:void 0},Ke.getBootloaderRelatedFirmwareVersion=e=>{var t,i,r,s;const n=We(e);if(!ie.model_mini.includes(n))return;const a=st({features:e,updateType:"firmware"}),o=(null!==(i=null===(t=He.deviceMap[n])||void 0===t?void 0:t[a])&&void 0!==i?i:[]).filter((e=>!!e.bootloaderRelatedFirmwareVersion));return null!==(s=null===(r=null==o?void 0:o[0])||void 0===r?void 0:r.bootloaderRelatedFirmwareVersion)&&void 0!==s?s:void 0},Ke.getFirmwareChangelog=e=>{var t,i;const r=We(e),s=Xe(e);if(!1===e.firmware_present||ie.model_classic.includes(r)&&e.bootloader_mode)return[];const n=st({features:e,updateType:"firmware"}),a=null!==(i=null===(t=He.deviceMap[r])||void 0===t?void 0:t[n])&&void 0!==i?i:[],o=s.join(".");return je(a,o)},Ke.getFirmwareLatestRelease=e=>{var t,i;const r=We(e),s=st({features:e,updateType:"firmware"}),n=null!==(i=null===(t=He.deviceMap[r])||void 0===t?void 0:t[s])&&void 0!==i?i:[],a=Ue(n);if(!a)return a;if(!a.resource){const t=He.getSysResourcesLatestRelease(e);return Object.assign(Object.assign({},a),{resource:t})}return a},Ke.getBLEFirmwareStatus=e=>{var t,i;const r=We(e),s=Je(e);if(!s)return"none";const n=null!==(i=null===(t=He.deviceMap[r])||void 0===t?void 0:t.ble)&&void 0!==i?i:[],a=s.join(".");return Fe(n,a)},Ke.getBleFirmwareChangelog=e=>{var t,i;const r=We(e),s=Je(e);if(!s)return[];const n=null!==(i=null===(t=He.deviceMap[r])||void 0===t?void 0:t.ble)&&void 0!==i?i:[],a=s.join(".");return je(n,a)},Ke.getBleFirmwareLatestRelease=e=>{var t,i;const r=We(e),s=null!==(i=null===(t=He.deviceMap[r])||void 0===t?void 0:t.ble)&&void 0!==i?i:[];return Ue(s)},Ke.getTransportStatus=e=>{var t,i;const r=null===(i=null===(t=He.assets)||void 0===t?void 0:t.bridge)||void 0===i?void 0:i.version;if(!r)return"valid";return T.default.gte(e,r.join("."))?"valid":"outdated"},Ke.isBleConnect=e=>"react-native"===e||"lowlevel"===e;const Ge={model_mini:[{minVersion:"3.3.0",messageVersion:"latest"},{minVersion:"0.0.0",messageVersion:"v1"}],model_touch:[{minVersion:"4.5.0",messageVersion:"latest"},{minVersion:"0.0.0",messageVersion:"v1"}]},ze=e=>e&&"object"==typeof e&&e.model?"1"===e.model?"model_mini":"model_touch":"model_mini",We=e=>{if(!e||"object"!=typeof e)return"classic";switch(e.onekey_device_type){case"CLASSIC":return"classic";case"CLASSIC1S":return"classic1s";case"MINI":return"mini";case"TOUCH":return"touch";case"PRO":return"pro"}if(!e.serial_no)return"classic";const t=e.serial_no.slice(0,2);return"mi"===t.toLowerCase()?"mini":"tc"===t.toLowerCase()?"touch":"pr"===t.toLowerCase()?"pro":"classic"},Ve=e=>e?e.startsWith("MI")?"mini":e.startsWith("T")?"touch":e.startsWith("P")?"pro":"classic":"classic",Ye=e=>{var t,i;const r=We(e);return(null==e?void 0:e.onekey_serial_no)?e.onekey_serial_no:"classic"===r?null!==(t=e.onekey_serial)&&void 0!==t?t:"":null!==(i=e.serial_no)&&void 0!==i?i:""},$e=e=>{const t=We(e);return"string"==typeof e.label?e.label:`My OneKey ${t.charAt(0).toUpperCase()+t.slice(1)}`},Xe=e=>{var t,i,r,s,n;return e?T.default.valid(e.onekey_firmware_version)?null===(t=e.onekey_firmware_version)||void 0===t?void 0:t.split("."):T.default.valid(e.onekey_version)?null===(i=e.onekey_version)||void 0===i?void 0:i.split("."):[null!==(r=e.major_version)&&void 0!==r?r:"0",null!==(s=e.minor_version)&&void 0!==s?s:"0",null!==(n=e.patch_version)&&void 0!==n?n:"0"]:[0,0,0]},Je=e=>e.ble_ver&&T.default.valid(e.ble_ver)?e.ble_ver.split("."):null,Ze=e=>{var t,i;return T.default.valid(e.onekey_boot_version)?null===(t=e.onekey_boot_version)||void 0===t?void 0:t.split("."):e.bootloader_version?T.default.valid(e.bootloader_version)?null===(i=e.bootloader_version)||void 0===i?void 0:i.split("."):[0,0,0]:e.bootloader_mode?[e.major_version,e.minor_version,e.patch_version]:[0,0,0]},Qe=e=>{if(!e)return{support:!1};const t=We(e);if("touch"===t||"pro"===t)return{support:!1};const i=Xe(e).join(".");return{support:T.default.gte(i,"2.3.0"),require:"2.3.0"}},et=e=>K(void 0,void 0,void 0,(function*(){const{features:t,commands:i}=e,r=!1===(null==t?void 0:t.unlocked),s=yield tt(t,i);return("touch"===We(t)||"pro"===We(t))&&r&&(yield e.getFeatures()),s})),tt=(e,t)=>K(void 0,void 0,void 0,(function*(){if(!e)return!1;const{message:i,type:r}=yield t.typedCall("GetAddress","Address",{address_n:[V(44),V(1),V(0),0,0],coin_name:"Testnet",script_type:"SPENDADDRESS",show_display:!1});if("CallMethodError"===r)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Get the passphrase state error");return i.address})),it=e=>{if(!e)return!1;const t=Xe(e).join("."),i=We(e);return"touch"===i||"pro"===i?T.default.gte(t,"3.1.0"):T.default.gte(t,"2.6.0")},rt=e=>{if(!e)return{support:!1};const t=Xe(e).join("."),i=We(e);return ie.model_mini.includes(i)?{support:!0}:{support:T.default.gte(t,"3.4.0")}},st=({features:e,updateType:t,targetVersion:i})=>{const r=We(e),s=Xe(e);if("ble"===t)return"ble";if(ie.model_mini.includes(r))return"firmware-v5";if("touch"===r){if(i){if(T.default.eq(i,"4.0.0"))return"firmware-v2";if(T.default.gt(i,"4.0.0"))return"firmware-v5"}return T.default.lt(s.join("."),"3.4.0")?"firmware":"firmware-v5"}return"pro"===r?"firmware-v5":"firmware"},nt="CORE_EVENT",at="UI_EVENT",ot={REQUEST_PIN:"ui-request_pin",INVALID_PIN:"ui-invalid_pin",REQUEST_BUTTON:"ui-button",REQUEST_PASSPHRASE:"ui-request_passphrase",REQUEST_PASSPHRASE_ON_DEVICE:"ui-request_passphrase_on_device",CLOSE_UI_WINDOW:"ui-close_window",BLUETOOTH_PERMISSION:"ui-bluetooth_permission",LOCATION_PERMISSION:"ui-location_permission",LOCATION_SERVICE_PERMISSION:"ui-location_service_permission",FIRMWARE_PROGRESS:"ui-firmware-progress",FIRMWARE_TIP:"ui-firmware-tip",NOT_IN_BOOTLOADER:"ui-device_not_in_bootloader_mode",PREVIOUS_ADDRESS_RESULT:"ui-previous_address_result"},dt=(e,t)=>({event:at,type:e,payload:t}),pt={INIT:"iframe-init",INIT_BRIDGE:"iframe-init-bridge",CALL:"iframe-call",CANCEL:"iframe-cancel"},ut="RESPONSE_EVENT",lt=(e,t,i)=>({event:ut,type:ut,id:e,success:t,payload:t?i:n.serializeError(i)}),ct={RECEIVE_PIN:"ui-receive_pin",RECEIVE_PASSPHRASE:"ui-receive_passphrase"},yt="DEVICE_EVENT",ht={CONNECT:"device-connect",CONNECT_UNACQUIRED:"device-connect_unacquired",DISCONNECT:"device-disconnect",CHANGED:"device-changed",ACQUIRE:"device-acquire",RELEASE:"device-release",ACQUIRED:"device-acquired",RELEASED:"device-released",USED_ELSEWHERE:"device-used_elsewhere",UNREADABLE:"unreadable-device",LOADING:"device-loading",BUTTON:"button",PIN:"pin",PASSPHRASE:"passphrase",PASSPHRASE_ON_DEVICE:"passphrase_on_device",WORD:"word",SUPPORT_FEATURES:"support_features",FEATURES:"features"},gt=(e,t)=>({event:yt,type:e,payload:t}),mt="FIRMWARE_EVENT",ft={RELEASE_INFO:"firmware-release-info",BLE_RELEASE_INFO:"ble-firmware-release-info"},_t=(e,t)=>({event:mt,type:e,payload:t}),vt=new Set([ct.RECEIVE_PIN,ct.RECEIVE_PASSPHRASE]),Tt=Be(t.d0.DevicePool);class bt extends w.exports{static setConnector(e){this.connector=e}static getDevices(e,t,i){var r,s,n,a,o,d,p;return K(this,void 0,void 0,(function*(){const u={},l=[];if(t){const r=this.devicesCache[t];if(r){const s=e.find((e=>e.path===r.originalDescriptor.path));if(s)return r.updateDescriptor(s,!0),u[t]=r,l.push(r),yield this._checkDevicePool(i),{devices:u,deviceList:l};Tt.debug("found device in cache, but path is different: ",t)}}try{for(r=!0,s=z(e);n=yield s.next(),!(a=n.done);r=!0){p=n.value,r=!1;const e=p,t=yield this._createDevice(e,i);if(t.features){const i=Ye(t.features);if(this.devicesCache[i]){this.devicesCache[i].updateDescriptor(e,!0)}this.devicesCache[i]=t,u[i]=t}l.push(t)}}catch(e){o={error:e}}finally{try{r||a||!(d=s.return)||(yield d.call(s))}finally{if(o)throw o.error}}return yield this._checkDevicePool(i),{devices:u,deviceList:l}}))}static clearDeviceCache(e){e&&delete this.devicesCache[e]}static _createDevice(e,t){return K(this,void 0,void 0,(function*(){let i=this.getDeviceByPath(e.path);return i||(i=Bt.fromDescriptor(e),i.deviceConnector=this.connector,yield i.connect(),yield i.initialize(t),yield i.release()),i}))}static _checkDevicePool(e){return K(this,void 0,void 0,(function*(){yield this._sendConnectMessage(e),this._sendDisconnectMessage()}))}static _sendConnectMessage(e){return K(this,void 0,void 0,(function*(){for(let t=this.connectedPool.length-1;t>=0;t--){const i=this.connectedPool[t],r=yield this._createDevice(i,e);Tt.debug("emit DEVICE.CONNECT: ",null==r?void 0:r.features),this.emitter.emit(ht.CONNECT,r),this.connectedPool.splice(t,1)}}))}static _sendDisconnectMessage(){for(let e=this.disconnectPool.length-1;e>=0;e--){const t=this.connectedPool[e],i=(null==t?void 0:t.path)?this.getDeviceByPath(t.path):null;i&&this.emitter.emit(ht.DISCONNECT,i),this.disconnectPool.splice(e,1)}}static reportDeviceChange(e){const t=((e,t)=>{const i=t.filter((t=>void 0===e.find((e=>e.path===t.path)))),r=e.filter((e=>void 0===t.find((t=>t.path===e.path)))),s=t.filter((t=>{const i=e.find((e=>e.path===t.path));return!!i&&i.session!==t.session})),n=s.filter((e=>"string"==typeof e.session)),a=s.filter((e=>"string"!=typeof e.session)),o=t.filter((t=>{const i=e.find((e=>e.path===t.path));return!!i&&i.debugSession!==t.debugSession})),d=s.filter((e=>"string"==typeof e.debugSession)),p=s.filter((e=>"string"!=typeof e.debugSession));return{connected:i,disconnected:r,changedSessions:s,acquired:n,released:a,changedDebugSessions:o,debugAcquired:d,debugReleased:p,didUpdate:i.length+r.length+s.length+o.length>0,descriptors:t}})(this.current||[],e);this.upcoming=e,this.current=this.upcoming,this.current,this.upcoming,t.didUpdate&&(t.connected.forEach((e=>{const t=this.getDeviceByPath(e.path);t?(Tt.debug("emit DEVICE.CONNECT: ",t.features),this.emitter.emit(ht.CONNECT,t)):this._addConnectedDeviceToPool(e)})),t.disconnected.forEach((e=>{this._removeDeviceFromConnectedPool(e.path);const t=this.getDeviceByPath(e.path);t?(Tt.debug("emit DEVICE.DISCONNECT: ",t.features),this.emitter.emit(ht.DISCONNECT,t)):this._addDisconnectedDeviceToPool(e)})))}static getDeviceByPath(e){return Object.values(this.devicesCache).find((t=>t.originalDescriptor.path===e))}static _addConnectedDeviceToPool(e){const t=this.connectedPool.findIndex((t=>t.path===e.path));t>-1?this.connectedPool.splice(t,1,e):this.connectedPool.push(e)}static _removeDeviceFromConnectedPool(e){const t=this.connectedPool.findIndex((t=>t.path===e));t>-1&&this.connectedPool.splice(t,1)}static _addDisconnectedDeviceToPool(e){const t=this.disconnectPool.findIndex((t=>t.path===e.path));t>-1?this.disconnectPool.splice(t,1,e):this.disconnectPool.push(e)}}bt.current=null,bt.upcoming=[],bt.connectedPool=[],bt.disconnectPool=[],bt.devicesCache={},bt.emitter=new w.exports;const St=Be(t.d0.Transport),Et=Be(t.d0.HdBleTransport),Rt=Be(t.d0.HdTransportHttp),Mt=Be(t.d0.HdTransportLowLevel);class xt{static load(){St.debug("transport manager load"),this.defaultMessages=Ke.getProtobufMessages(),this.currentMessages=this.defaultMessages,this.messageVersion="latest"}static configure(){return K(this,void 0,void 0,(function*(){try{const e=Ke.getSettings("env");if(St.debug("Initializing transports"),"react-native"===e)this.reactNativeInit?St.debug("React Native Do Not Initializing transports"):(yield this.transport.init(Et,bt.emitter),this.reactNativeInit=!0);else if("lowlevel"===e){if(!this.plugin)throw n.ERRORS.TypedError(n.HardwareErrorCode.TransportNotConfigured,"Lowlevel transport mast have plugin");yield this.transport.init(Mt,bt.emitter,this.plugin)}else yield this.transport.init(Rt);St.debug("Configuring transports"),yield this.transport.configure(JSON.stringify(this.defaultMessages)),St.debug("Configuring transports done")}catch(e){if(St.debug("Initializing transports error: ",e),"ECONNABORTED"===e.code)throw n.ERRORS.TypedError(n.HardwareErrorCode.BridgeTimeoutError)}}))}static reconfigure(e){return K(this,void 0,void 0,(function*(){St.debug("Begin reconfiguring transports");const{messageVersion:t,messages:i}=(e=>{var t;if(!e)return{messages:Ke.messages.latest,messageVersion:"latest"};const i=Xe(e).join("."),r=We(e),s=Ge[r]||re[r]&&re[r].map((e=>Ge[e])).find((e=>void 0!==e)),n=null!==(t=null==s?void 0:s.sort(((e,t)=>T.default.compare(t.minVersion,e.minVersion))))&&void 0!==t?t:[];for(const{minVersion:e,messageVersion:t}of n)if(T.default.gte(i,e))return{messages:Ke.messages[t],messageVersion:t};return{messages:Ke.messages.latest,messageVersion:"latest"}})(e);if(this.currentMessages!==i&&i){St.debug(`Reconfiguring transports version:${t}`);try{yield this.transport.configure(JSON.stringify(i)),this.currentMessages=i,this.messageVersion=t}catch(e){throw n.ERRORS.TypedError(n.HardwareErrorCode.TransportInvalidProtobuf,`Transport_InvalidProtobuf:  ${e.message}`)}}}))}static setTransport(e,t){const i=Ke.getSettings("env");this.transport="react-native"===i?new e({scanTimeout:3e3}):new e,t&&(this.plugin=t,St.debug("set transport plugin: ",this.plugin)),St.debug("set transport: ",this.transport)}static getTransport(){return this.transport}static getDefaultMessages(){return this.defaultMessages}static getCurrentMessages(){return this.currentMessages}static getMessageVersion(){return this.messageVersion}}xt.reactNativeInit=!1,xt.messageVersion="latest",xt.plugin=null;const wt=Be(t.d0.DeviceCommands);class At{constructor(e,t){this.device=e,this.mainId=t,this.transport=xt.getTransport(),this.disposed=!1}dispose(e){var t,i;return K(this,void 0,void 0,(function*(){this.disposed=!0,e&&this._cancelableRequest&&this._cancelableRequest(),this._cancelableRequest=void 0,yield null===(i=(t=this.transport).cancel)||void 0===i?void 0:i.call(t)}))}call(e,t={}){var i;return K(this,void 0,void 0,(function*(){wt.debug("[DeviceCommands] [call] Sending",e);try{const i=this.transport.call(this.mainId,e,t);this.callPromise=i;const r=yield i;return wt.debug("[DeviceCommands] [call] Received",r.type),r}catch(e){if(wt.debug("[DeviceCommands] [call] Received error",e),e.errorCode===n.HardwareErrorCode.BleDeviceBondError)return{type:"BleDeviceBondError",message:{error:null==e?void 0:e.message}};const t=null===(i=null==e?void 0:e.response)||void 0===i?void 0:i.data,r=null==t?void 0:t.error;if(t&&wt.debug("error response",t),"device disconnected during action"===r)return{type:"BridgeNetworkError",message:{}};if(r&&-1!==r.indexOf("Request failed with status code"))return{type:"CallMethodError",message:{error:null!=t?t:""}};throw e}}))}typedCall(e,t,i){return K(this,void 0,void 0,(function*(){if(this.disposed)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"typedCall: DeviceCommands already disposed");const r=yield this._commonCall(e,i);try{((e,t)=>{if(!(Array.isArray(t)?t:t.split("|")).includes(e.type))throw n.ERRORS.TypedError(n.HardwareErrorCode.ResponseUnexpectTypeError,`assertType: Response of unexpected type: ${e.type}. Should be ${t}`)})(r,t)}catch(e){if(wt.debug("DeviceCommands typedcall error: ",e),!(e instanceof n.HardwareError))throw e;if(e.errorCode===n.HardwareErrorCode.ResponseUnexpectTypeError){if(e.message.indexOf("BridgeNetworkError")>-1)throw n.ERRORS.TypedError(n.HardwareErrorCode.BridgeNetworkError);if(e.message.indexOf("BleDeviceBondError")>-1)throw n.ERRORS.TypedError(n.HardwareErrorCode.BleDeviceBondError)}}return r}))}_commonCall(e,t){return K(this,void 0,void 0,(function*(){const i=yield this.call(e,t);return this._filterCommonTypes(i,e)}))}_filterCommonTypes(e,t){try{"react-native"===Ke.getSettings("env")?wt.debug("_filterCommonTypes: ",JSON.stringify(e)):wt.debug("_filterCommonTypes: ",e)}catch(e){}if("Failure"===e.type){const{code:i,message:r}=e.message;let s=null;return"Failure_FirmwareError"!==i||r||(s=n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareError)),"Failure_ActionCancelled"===i&&(s=n.ERRORS.TypedError(n.HardwareErrorCode.ActionCancelled)),"Failure_PinInvalid"===i&&(s=n.ERRORS.TypedError(n.HardwareErrorCode.PinInvalid,r)),"Failure_PinCancelled"===i&&(s=n.ERRORS.TypedError(n.HardwareErrorCode.PinCancelled)),"Failure_DataError"===i&&("Please confirm the BlindSign enabled"===r&&(s=n.ERRORS.TypedError(n.HardwareErrorCode.BlindSignDisabled)),"File already exists"===r&&(s=n.ERRORS.TypedError(n.HardwareErrorCode.FileAlreadyExists)),(null==r?void 0:r.includes("bytes overflow"))&&(s=n.ERRORS.TypedError(n.HardwareErrorCode.DataOverload))),"Failure_UnexpectedMessage"===i&&("PassphraseAck"===t&&(s=n.ERRORS.TypedError(n.HardwareErrorCode.UnexpectPassphrase)),"Not in Signing mode"===r&&(s=n.ERRORS.TypedError(n.HardwareErrorCode.NotInSigningMode))),s?Promise.reject(s):Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`${i||"Failure_UnknownCode"},${r||"Failure_UnknownMessage"}`))}if("Features"===e.type)return Promise.resolve(ye(e));if("ButtonRequest"===e.type)return"ButtonRequest_PassphraseEntry"===e.message.code?this.device.emit(ht.PASSPHRASE_ON_DEVICE,this.device):this.device.emit(ht.BUTTON,this.device,e.message),this._commonCall("ButtonAck",{});e.type;const i="webusb"===Ke.getSettings("env");return"PinMatrixRequest"===e.type?i?Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Please unlock your device")):this._promptPin(e.message.type).then((e=>"@@ONEKEY_INPUT_PIN_IN_DEVICE"===e?this._commonCall("BixinPinInputOnDevice"):this._commonCall("PinMatrixAck",{pin:e})),(()=>this._commonCall("Cancel",{}))):"PassphraseRequest"===e.type?this._promptPassphrase().then((e=>{const{passphrase:t,passphraseOnDevice:i}=e;return i?this._commonCall("PassphraseAck",{on_device:!0}):this._commonCall("PassphraseAck",{passphrase:t})})):(e.type,e.type,Promise.resolve(e))}_promptPin(e){return new Promise(((t,i)=>{this.device.listenerCount(ht.PIN)>0?(this._cancelableRequest=i,this.device.emit(ht.PIN,this.device,e,((e,r)=>{this._cancelableRequest=void 0,e?i(e):t(r)}))):(console.warn("[DeviceCommands] [call] PIN callback not configured, cancelling request"),i(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"_promptPin: PIN callback not configured")))}))}_promptPassphrase(){return new Promise(((e,t)=>{this.device.listenerCount(ht.PASSPHRASE)>0?(this._cancelableRequest=t,this.device.emit(ht.PASSPHRASE,this.device,((i,r)=>{this._cancelableRequest=void 0,r?t(r):e(i)}))):(wt.error("[DeviceCommands] [call] Passphrase callback not configured, cancelling request"),t(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"_promptPassphrase: Passphrase callback not configured")))}))}}const Ot="ui-device_bootloader_mode",Ct="ui-device_not_in_bootloader_mode",kt="ui-device_not_initialized",qt="ui-device_seedless",It="ui-firmware-tip",Dt="ui-previous_address_result",Pt=Be(t.d0.Device),Nt={};class Bt extends w.exports{constructor(e){super(),this.deviceConnector=null,this.features=void 0,this.featuresNeedsReload=!1,this.externalState=[],this.unavailableCapabilities={},this.instance=0,this.internalState=[],this.needReloadDevice=!1,this.keepSession=!1,this.passphraseState=void 0,this.originalDescriptor=e}static fromDescriptor(e){const t=Object.assign({},e);return new Bt(t)}toMessageObject(){if(this.isUnacquired()||!this.features)return null;const e=Ke.getSettings("env");return{connectId:Ke.isBleConnect(e)?this.mainId||null:Ye(this.features),uuid:Ye(this.features),deviceType:this.features.bootloader_mode?(t=this.features,We(t)):We(this.features),deviceId:this.features.device_id||null,path:this.originalDescriptor.path,name:this.features.ble_name||this.features.label||`OneKey ${We(this.features).toUpperCase()}`,label:$e(this.features),mode:this.getMode(),features:this.features,firmwareVersion:this.getFirmwareVersion(),bleFirmwareVersion:this.getBLEFirmwareVersion(),unavailableCapabilities:this.unavailableCapabilities};var t}connect(){const e=Ke.getSettings("env");return new Promise((t=>K(this,void 0,void 0,(function*(){if(Ke.isBleConnect(e))try{yield this.acquire(),t(!0)}catch(e){t(e)}else if(!this.mainId||!this.isUsedHere()&&this.originalDescriptor)try{yield this.acquire(),t(!0)}catch(e){t(e)}else this.isUsedHere()?t(!0):t(!1)}))))}acquire(){var e,t,i,r;return K(this,void 0,void 0,(function*(){const s=Ke.getSettings("env"),n=Ke.isBleConnect(s)?"id":"session";try{if(Ke.isBleConnect(s)){const i=yield null===(e=this.deviceConnector)||void 0===e?void 0:e.acquire(this.originalDescriptor.id);this.mainId=null!==(t=i.uuid)&&void 0!==t?t:"",Pt.debug("Expected uuid:",this.mainId)}else this.mainId=yield null===(i=this.deviceConnector)||void 0===i?void 0:i.acquire(this.originalDescriptor.path,this.originalDescriptor.session),Pt.debug("Expected session id:",this.mainId);this.updateDescriptor({[n]:this.mainId}),this.commands&&(yield this.commands.dispose(!1)),this.commands=new At(this,null!==(r=this.mainId)&&void 0!==r?r:"")}catch(e){if(!this.runPromise)throw e;this.runPromise.reject(e),this.runPromise=null}}))}release(){var e;return K(this,void 0,void 0,(function*(){const t=Ke.getSettings("env");if(this.isUsedHere()&&!this.keepSession&&this.mainId||this.mainId&&Ke.isBleConnect(t)){if(this.commands&&(this.commands.dispose(!1),this.commands.callPromise))try{yield this.commands.callPromise}catch(e){this.commands.callPromise=void 0}try{yield null===(e=this.deviceConnector)||void 0===e?void 0:e.release(this.mainId,!1),this.updateDescriptor({session:null})}catch(e){Pt.error("[Device] release error: ",e)}finally{this.needReloadDevice=!0}}}))}getCommands(){return this.commands}generateStateKey(e,t){return t?`${e}@${t}`:e}getInternalState(e){var t,i;Pt.debug("getInternalState session param: ",`device_id: ${e}`,`features.device_id: ${null===(t=this.features)||void 0===t?void 0:t.device_id}`,`passphraseState: ${this.passphraseState}`),Pt.debug("getInternalState session cache: ",Nt);const r=e||(null===(i=this.features)||void 0===i?void 0:i.device_id);if(!r)return;if(!this.passphraseState)return;const s=this.generateStateKey(r,this.passphraseState);return Nt[s]}tryFixInternalState(e,t,i=null){Pt.debug("tryFixInternalState session param: ",`device_id: ${t}`,`passphraseState: ${e}`,`sessionId: ${i}`);const r=`${t}`,s=Nt[r];s?(Nt[this.generateStateKey(t,e)]=s,delete Nt[r]):i&&(Nt[this.generateStateKey(t,e)]=i),Pt.debug("tryFixInternalState session cache: ",Nt)}setInternalState(e,t){var i,r;if(Pt.debug("setInternalState session param: ",`state: ${e}`,`initSession: ${t}`,`device_id: ${null===(i=this.features)||void 0===i?void 0:i.device_id}`,`passphraseState: ${this.passphraseState}`),!this.features)return;if(!this.passphraseState&&!t)return;const s=null===(r=this.features)||void 0===r?void 0:r.device_id;if(!s)return;const n=this.generateStateKey(s,this.passphraseState);e&&(Nt[n]=e),Pt.debug("setInternalState done session cache: ",Nt)}clearInternalState(e){var t;Pt.debug("clearInternalState param: ",e);const i=e||(null===(t=this.features)||void 0===t?void 0:t.device_id);if(!i)return;if(delete Nt[`${i}`],this.passphraseState){const e=this.generateStateKey(i,this.passphraseState);delete Nt[e]}}initialize(e){return K(this,void 0,void 0,(function*(){Pt.debug("initialize param:",e),this.passphraseState=null==e?void 0:e.passphraseState,(null==e?void 0:e.initSession)&&this.clearInternalState(null==e?void 0:e.deviceId);const t=this.getInternalState(null==e?void 0:e.deviceId),i={};t&&(i.session_id=t),(null==e?void 0:e.deriveCardano)&&(i.derive_cardano=!0),Pt.debug("initialize payload:",i);const{message:r}=yield this.commands.typedCall("Initialize","Features",i);this._updateFeatures(r,null==e?void 0:e.initSession),yield xt.reconfigure(r)}))}getFeatures(){return K(this,void 0,void 0,(function*(){const{message:e}=yield this.commands.typedCall("GetFeatures","Features",{});this._updateFeatures(e)}))}_updateFeatures(e,t){var i;this.features&&this.features.session_id&&!e.session_id&&(e.session_id=this.features.session_id),this.features&&this.features.device_id&&e.session_id&&this.setInternalState(e.session_id,t),e.unlocked=null===(i=e.unlocked)||void 0===i||i,this.features=e,this.featuresNeedsReload=!1,this.emit(ht.FEATURES,this,e)}updateDescriptor(e,t=!1){const i=Ke.getSettings("env");if(Ke.isBleConnect(i))return;const r=this.originalDescriptor.session,s=e.session;r!==s&&(this.originalDescriptor.session=s),t&&(this.originalDescriptor=e)}updateFromCache(e){this.mainId=e.mainId,this.commands=e.commands,this.updateDescriptor(e.originalDescriptor,!0),e.features&&this._updateFeatures(e.features)}run(e,t){return K(this,void 0,void 0,(function*(){return this.runPromise&&(yield this.interruptionFromOutside(),Pt.debug("[Device] run error:","Device is running, but will cancel previous operate")),t=(e=>(e||(e={}),e))(t),this.runPromise=n.createDeferred(this._runInner.bind(this,e,t)),this.runPromise.promise}))}_runInner(e,t){return K(this,void 0,void 0,(function*(){if(!this.isUsedHere()||this.commands.disposed){if("react-native"!==Ke.getSettings("env")){yield this.acquire();try{e&&(yield this.initialize(t))}catch(e){return this.runPromise=null,e instanceof n.HardwareError?Promise.reject(e):Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceInitializeFailed,`Initialize failed: ${e.message}, code: ${e.code}`))}}}if(t.keepSession&&(this.keepSession=!0),e)try{yield e()}catch(e){return this.runPromise&&this.runPromise.reject(e),void(this.runPromise=null)}(!this.keepSession&&"boolean"!=typeof t.keepSession||!1===t.keepSession)&&(this.keepSession=!1,yield this.release(),Pt.debug("release device, mainId: ",this.mainId)),this.runPromise&&this.runPromise.resolve(),this.runPromise=null}))}interruptionFromOutside(){return K(this,void 0,void 0,(function*(){this.commands&&(yield this.commands.dispose(!1)),this.runPromise&&this.runPromise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceInterruptedFromOutside))}))}interruptionFromUser(){return K(this,void 0,void 0,(function*(){this.commands&&(yield this.commands.dispose(!0)),this.runPromise&&this.runPromise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceInterruptedFromUser))}))}getMode(){var e,t,i;return(null===(e=this.features)||void 0===e?void 0:e.bootloader_mode)?"bootloader":(null===(t=this.features)||void 0===t?void 0:t.initialized)?(null===(i=this.features)||void 0===i?void 0:i.no_backup)?"seedless":"normal":"initialize"}getFirmwareVersion(){return this.features?Xe(this.features):null}getBLEFirmwareVersion(){return this.features?Je(this.features):null}isUsed(){return"string"==typeof this.originalDescriptor.session}isUsedHere(){const e=Ke.getSettings("env");return!Ke.isBleConnect(e)&&(this.isUsed()&&this.originalDescriptor.session===this.mainId)}isUsedElsewhere(){return this.isUsed()&&!this.isUsedHere()}isBootloader(){return this.features&&!!this.features.bootloader_mode}isInitialized(){return this.features&&!!this.features.initialized}isSeedless(){return this.features&&!!this.features.no_backup}isUnacquired(){return void 0===this.features}hasUnexpectedMode(e,t){if(this.features){if(this.isBootloader()&&!e.includes(Ot))return Ot;if(!this.isInitialized()&&!e.includes(kt))return kt;if(this.isSeedless()&&!e.includes(qt))return qt;if(!this.isBootloader()&&t.includes(Ot))return Ct}return null}hasUsePassphrase(){var e;const t=("touch"===We(this.features)||"pro"===We(this.features))&&!1===(null===(e=this.features)||void 0===e?void 0:e.unlocked);return this.features&&(!!this.features.passphrase_protection||t)}checkDeviceId(e){return!!this.features&&this.features.device_id===e}checkPassphraseStateSafety(e){return K(this,void 0,void 0,(function*(){if(!this.features)return!1;const t=yield et(this);return!e||e===t||(this.clearInternalState(),!1)}))}}class Lt extends w.exports{constructor(){super(...arguments),this.devices={}}getDeviceLists(e,t){var i,r;return K(this,void 0,void 0,(function*(){const s=yield null===(i=this.connector)||void 0===i?void 0:i.enumerate(),n=null!==(r=null==s?void 0:s.descriptors)&&void 0!==r?r:[];this.devices={};const{deviceList:a,devices:o}=yield bt.getDevices(n,e,t);return this.devices=o,a}))}allDevices(){return Object.keys(this.devices).map((e=>this.devices[e]))}getDevice(e){return this.devices[e]}}const Ft=e=>({status:Ke.getFirmwareStatus(e),changelog:Ke.getFirmwareChangelog(e),release:Ke.getFirmwareLatestRelease(e)}),jt=e=>({status:Ke.getBLEFirmwareStatus(e),changelog:Ke.getBleFirmwareChangelog(e),release:Ke.getBleFirmwareLatestRelease(e)}),Ut=Be(t.d0.Method);class Ht{constructor(e){this.shouldEnsureConnected=!0,this.checkDeviceId=!1,this.useDevicePassphraseState=!0,this.skipForceUpdateCheck=!1,this.postPreviousAddressMessage=e=>{this.postMessage(dt(Dt,{device:this.device.toMessageObject(),data:e}))};const{payload:t}=e;this.name=t.method,this.payload=t,this.responseID=e.id||0,this.connectId=t.connectId||"",this.deviceId=t.deviceId||"",this.useDevice=!0,this.notAllowDeviceMode=[kt],this.requireDeviceMode=[]}getVersionRange(){return{}}setDevice(e){this.device=e,this.connectId=e.originalDescriptor.path}checkFirmwareRelease(){if(!this.device||!this.device.features)return;const e=Ft(this.device.features);this.postMessage(_t(ft.RELEASE_INFO,Object.assign(Object.assign({},e),{features:this.device.features})));const t=jt(this.device.features);this.postMessage(_t(ft.BLE_RELEASE_INFO,Object.assign(Object.assign({},t),{features:this.device.features})))}checkDeviceSupportFeature(){if(!this.device||!this.device.features)return;const e=Qe(this.device.features),t=rt(this.device.features);this.postMessage(gt(ht.SUPPORT_FEATURES,{inputPinOnSoftware:e,modifyHomescreen:t,device:this.device.toMessageObject()}))}checkSafetyLevelOnTestNet(){var e,t,i;return K(this,void 0,void 0,(function*(){let r=!1;"evmSignTransaction"===this.name&&[3,4,5,420,11155111].includes(Number(null===(t=null===(e=this.payload)||void 0===e?void 0:e.transaction)||void 0===t?void 0:t.chainId))&&(r=!0),r&&"Strict"===(null===(i=this.device.features)||void 0===i?void 0:i.safety_checks)&&(Ut.debug("will change safety_checks level"),yield this.device.commands.typedCall("ApplySettings","Success",{safety_checks:"PromptTemporarily"}))}))}dispose(){}}const Kt="2.2.0",Gt="4.3.0",zt="3.1.0";const Wt=e=>"0x"===e.slice(0,2).toLowerCase(),Vt=e=>Wt(e)?e.slice(2):e,Yt=e=>{for(;/^00/.test(e);)e=e.slice(2);return e},$t=e=>{if("string"==typeof e){let t=Vt(e);return t.length%2!=0&&(t=`0${t}`),t}return Array.isArray(e)?e.map($t):"object"==typeof e?(t=e,i=e=>$t(e),Object.fromEntries(Object.entries(t).map((([e,t])=>[e,i(t,e)])))):e;var t,i},Xt=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Jt(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let i=0;i<e.length;i++)t+=Xt[e[i]];return t}function Zt(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let i=0;i<t.length;i++){const r=2*i,s=e.slice(r,r+2),n=Number.parseInt(s,16);if(Number.isNaN(n)||n<0)throw new Error("Invalid byte sequence");t[i]=n}return t}const Qt=e=>n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,e),ei=(e,t)=>{t.forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t.name)&&t.required)throw Qt(`Missing required parameter: ${t.name}`);const i=e[t.name];if(i&&t.type)switch(t.type){case"array":if(!Array.isArray(i))throw Qt(`Parameter [${t.name}] is of type invalid and should be [${t.type}].`);if(!t.allowEmpty&&i.length<1)throw Qt(`Parameter "${t.name}" is empty.`);break;case"uint":if("string"!=typeof i&&"number"!=typeof i)throw Qt(`Parameter [${t.name}] has invalid type. "string|number" expected.`);if("number"==typeof i&&!Number.isSafeInteger(i)||!/^(?:[1-9]\d*|\d)$/.test(i.toString().replace(/^-/,t.allowNegative?"":"-")))throw Qt(`Parameter [${t.name}] has invalid value "${i}". Integer representation expected.`);break;case"bigNumber":if("string"!=typeof i)throw Qt(`Parameter [${t.name}] is of type invalid and should be [string].`);try{if(new E.default(i).toFixed(0)!==i)throw new Error("")}catch(e){throw Qt(`Parameter [${t.name}] is of type invalid and should be [${t.type}].`)}break;case"buffer":if(void 0===i||"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i))throw Qt(`Parameter [${t.name}] is of type invalid and should be [buffer].`);break;case"hexString":if("string"!=typeof i||!((e,t)=>!("string"!=typeof e||!e.match(/^(0x|0X)?[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t))((r=i,Wt(r)?r:`0x${r}`)))throw Qt(`Parameter [${t.name}] is of type invalid and should be [${t.type}].`);break;default:if(typeof i!==t.type)throw Qt(`Parameter [${t.name}] is of type invalid and should be [${t.type}].`)}var r}))};const ti=e=>{throw e instanceof n.HardwareError?e:"ERR_NETWORK"===e.code?n.ERRORS.TypedError(n.HardwareErrorCode.BridgeNotInstalled):"ECONNABORTED"===e.code?n.ERRORS.TypedError(n.HardwareErrorCode.BridgeTimeoutError):n.ERRORS.TypedError(e)};const ii=({features:e,updateType:t,version:i,isUpdateBootloader:r})=>K(void 0,void 0,void 0,(function*(){const s=si({features:e,updateType:t,targetVersion:null==i?void 0:i.join(".")});if(!s)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"no firmware found for this device");if(i&&!T.default.eq(s.version.join("."),i.join("."))){if(!("touch"===We(e)&&!e.onekey_version))throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"firmware version mismatch")}const a="ble"===t?s.webUpdate:r?s.bootloaderResource:s.url;let o;try{o=yield ae(a,"binary")}catch(e){throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Method_FirmwareUpdate_DownloadFailed")}return Object.assign(Object.assign({},s),{binary:o})})),ri=e=>K(void 0,void 0,void 0,(function*(){let t;try{t=yield ae(e,"binary")}catch(e){throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Method_FirmwareUpdate_DownloadFailed")}return{binary:t}})),si=({features:e,updateType:t,targetVersion:i})=>{var r,s;const n=We(e),{deviceMap:a}=Ke,o=st({features:e,updateType:t,targetVersion:i}),d=null!==(s=null===(r=null==a?void 0:a[n])||void 0===r?void 0:r[o])&&void 0!==s?s:[];return Ue(d)},ni="session not found",ai=e=>{var t;(null===(t=e.features)||void 0===t?void 0:t.firmware_present)&&e.emit(ht.BUTTON,e,{code:"ButtonRequest_FirmwareUpdate"})},oi=(e,t,i)=>{i(dt(ot.FIRMWARE_PROGRESS,{device:e.toMessageObject(),progress:t}))},di=(e,t,i)=>{i(dt(ot.FIRMWARE_TIP,{device:e.toMessageObject(),data:{message:t}}))},pi=e=>K(void 0,void 0,void 0,(function*(){"ble"===e&&(yield Le(1e4))})),ui=(e,t,i,r,{payload:s})=>K(void 0,void 0,void 0,(function*(){const a=ze(r.features);if("model_mini"===a){ai(r),di(r,"ConfirmOnDevice",i);const a="firmware"===e?"FirmwareErase":"FirmwareErase_ex";if("Success"!==(yield t(a,"Success",{})).type)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"erase firmware error");di(r,"FirmwareEraseSuccess",i),oi(r,0,i);const{message:o,type:d}=yield t("FirmwareUpload","Success",{payload:s});if(oi(r,100,i),yield pi(e),"Success"!==d)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"install firmware error");return o}if("model_touch"===a){if(r.features){const t=Ze(r.features);if(T.default.gte(t.join("."),"2.4.5")){return(yield li(e,i,r,{payload:s})).message}}ai(r),di(r,"ConfirmOnDevice",i);const a=s.byteLength;let o=yield t("FirmwareErase",["FirmwareRequest","Success"],{length:a});for(di(r,"FirmwareEraseSuccess",i);"Success"!==o.type;){const e=o.message.offset,d=o.message.offset+o.message.length,p=s.slice(e,d);if(e>0&&oi(r,Math.round(e/a*100),i),o=yield t("FirmwareUpload",["FirmwareRequest","Success"],{payload:p}),"CallMethodError"===o.type)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"upload firmware error")}return oi(r,100,i),yield pi(e),o.message}throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"uploadFirmware: unknown device model")})),li=(e,t,i,{payload:r})=>K(void 0,void 0,void 0,(function*(){let s=i.getCommands().typedCall.bind(i.getCommands());di(i,"StartTransferData",t);const n=`0:${"ble"===e?"ble-":""}firmware.bin`,a=Ke.getSettings("env"),o=1024*(Ke.isBleConnect(a)?16:128),d=Math.ceil(r.byteLength/o);let p=0;for(let e=0;e<d;e++){const s=e*o,a=Math.min(s+o,r.byteLength),u=a-s,l=r.slice(s,a),c=0===e,y=Math.round((e+1)/d*100);p+=(yield ci(i,n,u,p,l,c,y)).message.processed_byte,oi(i,y,t)}ai(i),di(i,"ConfirmOnDevice",t),di(i,"InstallingFirmware",t),s=i.getCommands().typedCall.bind(i.getCommands());return yield s("FirmwareUpdateEmmc","Success",{path:n,reboot_on_success:!0})})),ci=(e,t,i,r,s,a,o)=>K(void 0,void 0,void 0,(function*(){var d,p,u,l,c,y;let h=10;for(;h>0;)try{return yield K(void 0,void 0,void 0,(function*(){var d;const p=e.getCommands().typedCall.bind(e.getCommands()),u=yield p("EmmcFileWrite","EmmcFile",{file:{path:t,len:i,offset:r,data:s},overwrite:a,append:0!==r,ui_percentage:o});if("EmmcFile"!==u.type){if("CallMethodError"===u.type&&(null!==(d=u.message.error)&&void 0!==d?d:"").indexOf(ni)>-1)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,ni);throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"emmc file write chunk once error")}return u}))}catch(t){if(console.error("emmcWrite error: ",t),h--,0===h)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"emmc file write firmware error");const i=Ke.getSettings("env");if(Ke.isBleConnect(i))yield Le(3e3),yield null===(d=e.deviceConnector)||void 0===d?void 0:d.acquire(e.originalDescriptor.id,null,!0),yield e.initialize();else if(t.message.indexOf(ni)>-1){const t=yield null===(p=e.deviceConnector)||void 0===p?void 0:p.enumerate(),i=null!==(u=null==t?void 0:t.descriptors)&&void 0!==u?u:[],{deviceList:r}=yield bt.getDevices(i,void 0);1===r.length&&(null===(c=null===(l=r[0])||void 0===l?void 0:l.features)||void 0===c?void 0:c.bootloader_mode)&&(e.updateFromCache(r[0]),yield e.acquire(),e.getCommands().mainId=null!==(y=e.mainId)&&void 0!==y?y:"")}yield Le(3e3)}})),yi=(e,t,i)=>K(void 0,void 0,void 0,(function*(){if("Success"===t.type)return t.message;const{offset:r,data_length:s}=t.message;if(void 0===r)throw new Error("offset is undefined");const n=new Uint8Array(i.slice(r,Math.min(r+s,i.byteLength))),a=u.blake2s(n),o={data_chunk:Jt(n),hash:Jt(a)},d=yield e("ResourceAck",["ResourceRequest","Success"],Object.assign({},o));return yi(e,d,i)})),hi=(e,t,i)=>K(void 0,void 0,void 0,(function*(){const r=new Uint8Array(i.slice(0,Math.min(16384,i.byteLength))),s=u.blake2s(r),n=yield e("ResourceUpdate",["ResourceRequest","Success"],{file_name:t,data_length:i.byteLength,initial_data_chunk:Jt(r),hash:Jt(s)});return yi(e,n,i)})),gi=(e,t,i,r)=>K(void 0,void 0,void 0,(function*(){di(i,"UpdateSysResource",t);const s=yield R.default.loadAsync(r),n=Object.entries(s.files);let a=0;const o=100/n.length;for(const[r,s]of n){const n=r.split("/").pop();if(!s.dir&&-1===r.indexOf("__MACOSX")&&n){const t=yield s.async("arraybuffer");yield hi(e,n,t)}a+=o,oi(i,Math.floor(a),t)}return oi(i,100,t),di(i,"UpdateSysResourceSuccess",t),!0}));const mi=Be(t.d0.Method);const fi=Be(t.d0.Method);const _i=Be(t.d0.Method);var vi=[{name:"Bitcoin",label:"BTC",slip44:0},{name:"Regtest",label:"REGTEST",slip44:1},{name:"Testnet",label:"TEST",slip44:1},{name:"Actinium",label:"ACM",slip44:228},{name:"Axe",label:"AXE",slip44:4242},{name:"Bcash",label:"BCH",slip44:145},{name:"Bitcore",label:"BTX",slip44:160},{name:"Dash",label:"DASH",slip44:5},{name:"Dash Testnet",label:"tDASH",slip44:1},{name:"Decred",label:"DCR",slip44:42},{name:"Decred Testnet",label:"TDCR",slip44:1},{name:"DigiByte",label:"DGB",slip44:20},{name:"Dogecoin",label:"DOGE",slip44:3},{name:"Feathercoin",label:"FTC",slip44:8},{name:"Firo",label:"FIRO",slip44:136},{name:"Firo Testnet",label:"tFIRO",slip44:1},{name:"Fujicoin",label:"FJC",slip44:75},{name:"GameCredits",label:"GAME",slip44:101},{name:"Komodo",label:"KMD",slip44:141},{name:"Koto",label:"KOTO",slip44:510},{name:"Litecoin",label:"LTC",slip44:2},{name:"Litecoin Testnet",label:"tLTC",slip44:1},{name:"Monacoin",label:"MONA",slip44:22},{name:"MonetaryUnit",label:"MUE",slip44:31},{name:"NIX",label:"NIX",slip44:400},{name:"Namecoin",label:"NMC",slip44:7},{name:"Peercoin",label:"PPC",slip44:6},{name:"Peercoin Testnet",label:"tPPC",slip44:1},{name:"Polis",label:"POLIS",slip44:1997},{name:"Primecoin",label:"XPM",slip44:24},{name:"Ravencoin",label:"RVN",slip44:175},{name:"Ritocoin",label:"RITO",slip44:19169},{name:"Stakenet",label:"XSN",slip44:199},{name:"Syscoin",label:"SYS",slip44:57},{name:"Unobtanium",label:"UNO",slip44:92},{name:"Verge",label:"XVG",slip44:77},{name:"Vertcoin",label:"VTC",slip44:28},{name:"Viacoin",label:"VIA",slip44:14},{name:"ZCore",label:"ZCR",slip44:428},{name:"Zcash",label:"ZEC",slip44:133},{name:"Zcash Testnet",label:"TAZ",slip44:1},{name:"Neurai",label:"XNA",slip44:1900}];const Ti=(e,t)=>{let i;if(t){const e=t.toLowerCase();i=vi.find((t=>t.name.toLowerCase()===e||t.label.toLowerCase()===e))}else if(e){const t=Y(e[1]);i=vi.find((e=>e.slip44===t))}if(!i)throw t?n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,`Invalid coin name: ${t}`):e?n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,`Invalid path: ${e[0]}`):n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter);return i},bi=(e,t,i)=>{const r=Ti(e,t).name;let s=i;void 0===s&&(s=(e=>Array.isArray(e)&&e[0]===V(48))(e));let n=Z(e);return"SPENDMULTISIG"!==n||s||(n="SPENDADDRESS"),{coinName:r,scriptType:null!=n?n:"SPENDADDRESS"}};function Si(e){return function(e,t){for(let i=0;i<t.length;i++){const r=t[i];if((null==r?void 0:r.toLowerCase())===(null==e?void 0:e.toLowerCase()))return!0}return!1}("Neurai",e)?{model_mini:{min:"3.7.0"},model_touch:{min:"4.9.0"}}:{}}const Ei=e=>{const{tx_hash:t}=e.txRequest.details;return t?(({typedCall:e,txRequest:{request_type:t,details:i},refTxs:r})=>{const{tx_hash:s}=i;if(!s)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestPrevTxInfo: unknown details.tx_hash");const a=r[s.toLowerCase()];if(!a)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: Requested unknown tx: ${s}`);if("TXINPUT"===t){if(!a.bin_outputs)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: Requested unknown TXINPUT: ${s}`);return e("TxAckPrevInput","TxRequest",{tx:{input:a.inputs[i.request_index]}})}if("TXOUTPUT"===t){if(!a.bin_outputs)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: Requested unknown TXOUTPUT: ${s}`);return e("TxAckPrevOutput","TxRequest",{tx:{output:a.bin_outputs[i.request_index]}})}if("TXORIGINPUT"===t){if(!a.outputs)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: Requested unknown TXORIGINPUT: ${s}`);return e("TxAckInput","TxRequest",{tx:{input:a.inputs[i.request_index]}})}if("TXORIGOUTPUT"===t){if(!a.outputs)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: Requested unknown TXORIGOUTPUT: ${s}`);return e("TxAckOutput","TxRequest",{tx:{output:a.outputs[i.request_index]}})}if("TXEXTRADATA"===t){if("number"!=typeof i.extra_data_len)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestPrevTxInfo: Missing extra_data_len");if("number"!=typeof i.extra_data_offset)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestPrevTxInfo: Missing extra_data_offset");if("string"!=typeof a.extra_data)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: No extra data for transaction ${a.hash}`);const t=a.extra_data,r=i.extra_data_len,s=i.extra_data_offset;return e("TxAckPrevExtraData","TxRequest",{tx:{extra_data_chunk:t.substring(2*s,2*(s+r))}})}if("TXMETA"===t){const t=a.extra_data;return e("TxAckPrevMeta","TxRequest",{tx:{version:a.version,lock_time:a.lock_time,inputs_count:a.inputs.length,outputs_count:a.outputs?a.outputs.length:a.bin_outputs.length,timestamp:a.timestamp,version_group_id:a.version_group_id,expiry:a.expiry,branch_id:a.branch_id,extra_data_len:t?t.length/2:void 0}})}throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: Unknown request type: ${t}`)})(e):(({typedCall:e,txRequest:{request_type:t,details:i},inputs:r,outputs:s})=>{if("TXINPUT"===t)return e("TxAckInput","TxRequest",{tx:{input:r[i.request_index]}});if("TXOUTPUT"===t)return e("TxAckOutput","TxRequest",{tx:{output:s[i.request_index]}});if("TXMETA"===t)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestSignedTxInfo: Cannot read TXMETA from signed transaction");if("TXEXTRADATA"===t)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestSignedTxInfo: Cannot read TXEXTRADATA from signed transaction");throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestSignedTxInfo: Unknown request type: ${t}`)})(e)},Ri=e=>K(void 0,void 0,void 0,(function*(){const{typedCall:t,txRequest:i,refTxs:r,inputs:s,outputs:a,serializedTx:o,signatures:d}=e;if(((e,t,i)=>{if(!i)return;const{signature_index:r,signature:s,serialized_tx:a}=i;if(a&&e.push(a),"number"==typeof r){if(!s)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"saveTxSignatures: Unexpected null in trezor:TxRequestSerialized signature.");t[r]=s}})(o,d,i.serialized),"TXFINISHED"===i.request_type)return Promise.resolve({signatures:d,serializedTx:o.join("")});const{message:p}=yield Ei(e);return Ri({typedCall:t,txRequest:p,refTxs:r,inputs:s,outputs:a,serializedTx:o,signatures:d})}));var Mi=(e,t,i,r,s,n)=>K(void 0,void 0,void 0,(function*(){const a={};r.forEach((e=>{a[e.hash.toLowerCase()]=e}));const{message:o}=yield e("SignTx","TxRequest",Object.assign(Object.assign({},s),{inputs_count:t.length,outputs_count:i.length,coin_name:n}));return Ri({typedCall:e,txRequest:o,refTxs:a,inputs:t,outputs:i,serializedTx:[],signatures:[]})}));const xi=e=>{const{tx_hash:t}=e.txRequest.details;return t?(({txRequest:{request_type:e,details:t},refTxs:i})=>{const{tx_hash:r}=t;if(!r)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestPrevTxInfo: unknown details.tx_hash");const s=i[r.toLowerCase()];if(!s)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: Requested unknown tx: ${r}`);if(!s.bin_outputs)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: bin_outputs not set tx: ${r}`);if("TXINPUT"===e)return{inputs:[s.inputs[t.request_index]]};if("TXOUTPUT"===e)return{bin_outputs:[s.bin_outputs[t.request_index]]};if("TXEXTRADATA"===e){if("number"!=typeof t.extra_data_len)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestPrevTxInfo: Missing extra_data_len");if("number"!=typeof t.extra_data_offset)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestPrevTxInfo: Missing extra_data_offset");if("string"!=typeof s.extra_data)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: No extra data for transaction ${s.hash}`);const e=s.extra_data,i=t.extra_data_len,r=t.extra_data_offset;return{extra_data:e.substring(2*r,2*(r+i))}}if("TXMETA"===e){const e=s.extra_data,t={version:s.version,lock_time:s.lock_time,inputs_cnt:s.inputs.length,outputs_cnt:s.bin_outputs.length,timestamp:s.timestamp,version_group_id:s.version_group_id,expiry:s.expiry,branch_id:s.branch_id};return"string"==typeof e&&0!==e.length?Object.assign(Object.assign({},t),{extra_data_len:e.length/2}):t}throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestPrevTxInfo: Unknown request type: ${e}`)})(e):(({txRequest:{request_type:e,details:t},inputs:i,outputs:r})=>{if("TXINPUT"===e)return{inputs:[i[t.request_index]]};if("TXOUTPUT"===e)return{outputs:[r[t.request_index]]};if("TXMETA"===e)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestSignedTxInfo: Cannot read TXMETA from signed transaction");if("TXEXTRADATA"===e)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"requestSignedTxInfo: Cannot read TXEXTRADATA from signed transaction");throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`requestSignedTxInfo: Unknown request type: ${e}`)})(e)},wi=e=>K(void 0,void 0,void 0,(function*(){const{typedCall:t,txRequest:i,refTxs:r,inputs:s,outputs:a,serializedTx:o,signatures:d}=e;if(((e,t,i)=>{if(!i)return;const{signature_index:r,signature:s,serialized_tx:a}=i;if(a&&e.push(a),"number"==typeof r){if(!s)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"saveTxSignatures: Unexpected null in oneKey:TxRequestSerialized signature.");t[r]=s}})(o,d,i.serialized),"TXFINISHED"===i.request_type)return Promise.resolve({signatures:d,serializedTx:o.join("")});const p=xi(e),{message:u}=yield t("TxAck","TxRequest",{tx:p});return wi({typedCall:t,txRequest:u,refTxs:r,inputs:s,outputs:a,serializedTx:o,signatures:d})}));var Ai=(e,t,i,r,s,n)=>K(void 0,void 0,void 0,(function*(){const a={};r.forEach((e=>{a[e.hash.toLowerCase()]=e}));const{message:o}=yield e("SignTx","TxRequest",Object.assign(Object.assign({},s),{inputs_count:t.length,outputs_count:i.length,coin_name:n}));return wi({typedCall:e,txRequest:o,refTxs:a,inputs:t,outputs:i,serializedTx:[],signatures:[]})}));const Oi=(e,t)=>{if(!e)return["",""];return[e.slice(0,t),e.slice(t)]};const Ci=({typedCall:e,request:t,data:i,chainId:r,supportTrezor:s})=>K(void 0,void 0,void 0,(function*(){if(!t.data_length){let e=t.signature_v;const i=t.signature_r,s=t.signature_s;if(null==e||null==i||null==s)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"processTxRequest: Unexpected request");return r&&e<=1&&(e+=2*r+35),Promise.resolve({v:`0x${e.toString(16)}`,r:`0x${i}`,s:`0x${s}`})}const[a,o]=Oi(i,2*t.data_length);let d;return d=s?yield e("EthereumTxAck","EthereumTxRequest",{data_chunk:a}):yield e("EthereumTxAckOneKey","EthereumTxRequestOneKey",{data_chunk:a}),Ci({typedCall:e,request:d.message,data:o,chainId:r,supportTrezor:s})})),ki=({typedCall:e,addressN:t,tx:i,supportTrezor:r})=>K(void 0,void 0,void 0,(function*(){const{to:s,value:n,gasPrice:a,gasLimit:o,nonce:d,data:p,chainId:u,txType:l}=i,c=null==p?0:p.length/2,[y,h]=Oi(p,2048);let g,m={address_n:t,nonce:Yt(d),gas_price:Yt(a),gas_limit:Yt(o),to:s,value:Yt(n),chain_id:u};return 0!==c&&(m=Object.assign(Object.assign({},m),{data_length:c,data_initial_chunk:y})),null!==l&&(m=Object.assign(Object.assign({},m),{tx_type:l})),g=r?yield e("EthereumSignTx","EthereumTxRequest",m):yield e("EthereumSignTxOneKey","EthereumTxRequestOneKey",m),Ci({typedCall:e,request:g.message,data:h,chainId:u,supportTrezor:r})})),qi=({typedCall:e,addressN:t,tx:i,supportTrezor:r})=>K(void 0,void 0,void 0,(function*(){const{to:s,value:n,gasLimit:a,nonce:o,data:d,chainId:p,maxFeePerGas:u,maxPriorityFeePerGas:l,accessList:c}=i,y=null==d?0:d.length/2,[h,g]=Oi(d,2048),m={address_n:t,nonce:Yt(o),max_gas_fee:Yt(u),max_priority_fee:Yt(l),gas_limit:Yt(a),to:s,value:Yt(n),data_length:y,data_initial_chunk:h,chain_id:p,access_list:(c||[]).map((e=>({address:e.address,storage_keys:e.storageKeys})))};let f;return f=r?yield e("EthereumSignTxEIP1559","EthereumTxRequest",m):yield e("EthereumSignTxEIP1559OneKey","EthereumTxRequestOneKey",m),Ci({typedCall:e,request:f.message,data:g,supportTrezor:r})}));const Ii=(e,t,i)=>{let r=new E.default(e);if(i&&(r=((e,t)=>{if(t<1||t>32)throw n.ERRORS.TypedError("Runtime","Int byte size must be between 1 and 32 (8 and 256 bits)");const i=new E.default(2).exponentiatedBy(8*t-1).negated(),r=i.negated().minus(1),s=new E.default(e);if(s.isGreaterThan(r)||s.isLessThan(i))throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`Overflow when trying to convert number ${e.toString()} into ${t} bytes`);return s.isPositive()?s:s.minus(i).minus(i)})(r,t)),r.isNegative())throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`Cannot convert negative number to unsigned interger: ${e.toString()}`);const s=r.toString(16),a=2*t;if(s.length>a)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`Overflow when trying to convert number ${e.toString()} into ${t} bytes`);return s.padStart(2*t,"0")},Di=new RegExp(/^(.*)\[([0-9]*)\]$/),Pi=new RegExp(/^bytes([0-9]*)$/),Ni=new RegExp(/^(u?int)([0-9]*)$/),Bi=e=>{const t=Di.exec(e);if(null===t)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`typename ${e} could not be parsed as an EIP-712 array`);const[i,r,s]=t;return{entryTypeName:r,arraySize:parseInt(s,10)||null}},Li=(e,t)=>{if(Pi.test(e)||"address"===e)return $t(t);if("string"===e)return r.from(t,"utf-8").toString("hex");const i=Ni.exec(e);if(i){const[e,r,s]=i,n=Math.ceil(parseInt(s,10)/8);return Ii(t,n,"int"===r)}if("bool"===e)return t?"01":"00";throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`Unsupported data type for direct field encoding: ${e}`)},Fi={string:l.EthereumDataType.STRING,bool:l.EthereumDataType.BOOL,address:l.EthereumDataType.ADDRESS},ji=(e,t)=>{const i=Di.exec(e);if(i){const[e,r,s]=i,n=ji(r,t);return{data_type:l.EthereumDataType.ARRAY,size:parseInt(s,10)||void 0,entry_type:n}}const r=Ni.exec(e);if(r){const[e,t,i]=r;return{data_type:"uint"===t?l.EthereumDataType.UINT:l.EthereumDataType.INT,size:Math.floor(parseInt(i,10)/8)}}const s=Pi.exec(e);if(s){const[e,t]=s;return{data_type:l.EthereumDataType.BYTES,size:parseInt(t,10)||void 0}}const a=Fi[e];if(a)return{data_type:a};if(e in t)return{data_type:l.EthereumDataType.STRUCT,size:t[e].length,struct_name:e};throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,`No type definition specified: ${e}`)};const Ui=32,Hi=32,Ki={ED25519:0,Secp256k1:1};function Gi(e){const t=new Uint8Array(Hi+1);return t.set([Ki.ED25519]),t.set(p.hexToBytes(e),1),function(e,t=!1){let i=e.toLowerCase();return!t&&i.startsWith("0x")&&(i=i.slice(2)),`0x${i.padStart(2*Ui,"0")}`.toLowerCase()}(p.bytesToHex(f.blake2b(t,{dkLen:32})).slice(0,2*Ui))}const zi=e=>{ei(e,[{name:"addressType",type:"number",required:!0},{name:"stakingKeyHash",type:"string"},{name:"paymentScriptHash",type:"string"},{name:"stakingScriptHash",type:"string"}]),e.path&&te(e.path),e.stakingPath&&te(e.stakingPath),e.certificatePointer&&ei(e.certificatePointer,[{name:"blockIndex",type:"number",required:!0},{name:"txIndex",type:"number",required:!0},{name:"certificateIndex",type:"number",required:!0}])},Wi=e=>{let t=[];e.path&&(t=te(e.path,3));let i,r=[];return e.stakingPath&&(r=te(e.stakingPath,3)),e.certificatePointer&&(i={block_index:e.certificatePointer.blockIndex,tx_index:e.certificatePointer.txIndex,certificate_index:e.certificatePointer.certificateIndex}),{address_type:e.addressType,address_n:t,address_n_staking:r,staking_key_hash:e.stakingKeyHash,certificate_pointer:i,script_payment_hash:e.paymentScriptHash,script_staking_hash:e.stakingScriptHash}},Vi=e=>{let t;return e.certificate_pointer&&(t={blockIndex:e.certificate_pointer.block_index,txIndex:e.certificate_pointer.tx_index,certificateIndex:e.certificate_pointer.certificate_index}),{addressType:e.address_type,path:e.address_n,stakingPath:e.address_n_staking,stakingKeyHash:e.staking_key_hash,certificatePointer:t}};const Yi=e=>(ei(e,[{name:"prev_hash",type:"string",required:!0},{name:"prev_index",type:"number",required:!0}]),{input:{prev_hash:e.prev_hash,prev_index:e.prev_index},path:e.path?te(e.path,5):void 0}),$i=e=>(ei(e,[{name:"prev_hash",type:"string",required:!0},{name:"prev_index",type:"number",required:!0}]),{collateralInput:{prev_hash:e.prev_hash,prev_index:e.prev_index},path:e.path?te(e.path,5):void 0}),Xi=e=>(ei(e,[{name:"prev_hash",type:"string",required:!0},{name:"prev_index",type:"number",required:!0}]),{prev_hash:e.prev_hash,prev_index:e.prev_index}),Ji=e=>{e.forEach((e=>{ei(e,[{name:"policyId",type:"string",required:!0},{name:"tokenAmounts",type:"array",required:!0}]),e.tokenAmounts.forEach((e=>{ei(e,[{name:"assetNameBytes",type:"string",required:!0},{name:"amount",type:"uint"},{name:"mintAmount",type:"uint",allowNegative:!0}])}))}))},Zi=e=>(Ji(e),e.map((e=>({policyId:e.policyId,tokens:Qi(e.tokenAmounts)})))),Qi=e=>e.map((e=>({asset_name_bytes:e.assetNameBytes,amount:e.amount,mint_amount:e.mintAmount}))),er=e=>e.length/2,tr=(e,t,i,r)=>K(void 0,void 0,void 0,(function*(){let s=0;for(;s<t.length;){const n=t.slice(s,s+i);yield e(r,"CardanoTxItemAck",{data:n}),s+=i}})),ir=e=>{ei(e,[{name:"address",type:"string"},{name:"amount",type:"uint",required:!0},{name:"tokenBundle",type:"array",allowEmpty:!0},{name:"datumHash",type:"string"},{name:"format",type:"number"},{name:"inlineDatum",type:"string"},{name:"referenceScript",type:"string"}]);const t={output:{amount:e.amount,asset_groups_count:0,datum_hash:e.datumHash,format:e.format,inline_datum_size:e.inlineDatum?er(e.inlineDatum):void 0,reference_script_size:e.referenceScript?er(e.referenceScript):void 0},inlineDatum:e.inlineDatum,referenceScript:e.referenceScript};return e.addressParameters?(zi(e.addressParameters),t.output.address_parameters=Wi(e.addressParameters)):t.output.address=e.address,e.tokenBundle?(t.tokenBundle=Zi(e.tokenBundle),t.output.asset_groups_count=t.tokenBundle.length):t.output.asset_groups_count=0,t},rr=(e,t)=>K(void 0,void 0,void 0,(function*(){const{output:i,tokenBundle:r,inlineDatum:s,referenceScript:n}=t;if(yield e("CardanoTxOutput","CardanoTxItemAck",i),r)for(const t of r){yield e("CardanoAssetGroup","CardanoTxItemAck",{policy_id:t.policyId,tokens_count:t.tokens.length});for(const i of t.tokens)yield e("CardanoToken","CardanoTxItemAck",i)}s&&(yield tr(e,s,2048,"CardanoTxInlineDatumChunk")),n&&(yield tr(e,n,2048,"CardanoTxReferenceScriptChunk"))})),sr=e=>{if(ei(e,[{name:"type",type:"number",required:!0}]),e.type===l.Messages.CardanoPoolRelayType.SINGLE_HOST_IP){const t=[{name:"port",type:"number",required:!0}];if(e.ipv4Address&&t.push({name:"ipv4Address",type:"string",required:!1}),e.ipv6Address&&t.push({name:"ipv6Address",type:"string",required:!1}),ei(e,t),!e.ipv4Address&&!e.ipv6Address)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Either ipv4Address or ipv6Address must be supplied")}else e.type===l.Messages.CardanoPoolRelayType.SINGLE_HOST_NAME?ei(e,[{name:"hostName",type:"string",required:!0},{name:"port",type:"number",required:!0}]):e.type===l.Messages.CardanoPoolRelayType.MULTIPLE_HOST_NAME&&ei(e,[{name:"hostName",type:"string",required:!0}])},nr=e=>{var t,i;ei(e,[{name:"poolId",type:"string",required:!0},{name:"vrfKeyHash",type:"string",required:!0},{name:"pledge",type:"string",required:!0},{name:"cost",type:"string",required:!0},{name:"margin",type:"object",required:!0},{name:"rewardAccount",type:"string",required:!0},{name:"owners",type:"array",required:!0},{name:"relays",type:"array",required:!0,allowEmpty:!0},{name:"metadata",type:"object"}]),t=e.margin,ei(t,[{name:"numerator",type:"string",required:!0},{name:"denominator",type:"string",required:!0}]),(e=>{if(e.forEach((e=>{if(e.stakingKeyHash&&ei(e,[{name:"stakingKeyHash",type:"string",required:!e.stakingKeyPath}]),e.stakingKeyPath&&te(e.stakingKeyPath,5),!e.stakingKeyHash&&!e.stakingKeyPath)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Either stakingKeyHash or stakingKeyPath must be supplied")})),1!==e.filter((e=>!!e.stakingKeyPath)).length)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Exactly one pool owner must be given as a path")})(e.owners),e.relays.forEach(sr),e.metadata&&(i=e.metadata,ei(i,[{name:"url",type:"string",required:!0},{name:"hash",type:"string",required:!0}]))},ar=e=>{const t=[{name:"type",type:"number",required:!0}];e.type!==l.Messages.CardanoCertificateType.STAKE_POOL_REGISTRATION&&(t.push({name:"scriptHash",type:"string"}),t.push({name:"keyHash",type:"string"})),e.type===l.Messages.CardanoCertificateType.STAKE_DELEGATION&&t.push({name:"pool",type:"string",required:!0}),e.type===l.Messages.CardanoCertificateType.STAKE_POOL_REGISTRATION&&t.push({name:"poolParameters",type:"object",required:!0}),ei(e,t);const{poolParameters:i,poolOwners:s,poolRelays:n}=(e=>e?(nr(e),{poolParameters:{pool_id:e.poolId,vrf_key_hash:e.vrfKeyHash,pledge:e.pledge,cost:e.cost,margin_numerator:e.margin.numerator,margin_denominator:e.margin.denominator,reward_account:e.rewardAccount,metadata:e.metadata,owners_count:e.owners.length,relays_count:e.relays.length},poolOwners:e.owners.map((e=>({staking_key_hash:e.stakingKeyHash,staking_key_path:e.stakingKeyPath?te(e.stakingKeyPath,5):void 0}))),poolRelays:e.relays.map((e=>{return{type:e.type,ipv4_address:e.ipv4Address?(i=e.ipv4Address,r.from(i.split(".").map((e=>parseInt(e,10)))).toString("hex")):void 0,ipv6_address:e.ipv6Address?(t=e.ipv6Address,t.split(":").join("")):void 0,host_name:e.hostName,port:e.port};var t,i}))}):{poolParameters:void 0,poolOwners:[],poolRelays:[]})(e.poolParameters);return{certificate:{type:e.type,path:e.path?te(e.path,5):void 0,script_hash:e.scriptHash,key_hash:e.keyHash,pool:e.pool,pool_parameters:i},poolOwners:s,poolRelays:n}},or=e=>(ei(e,[{name:"votingPublicKey",type:"string",required:!0},{name:"weight",type:"uint",required:!0}]),{voting_public_key:e.votingPublicKey,weight:e.weight}),dr=e=>{let t;return ei(e,[{name:"hash",type:"string"}]),e.governanceRegistrationParameters&&(t=(e=>{ei(e,[{name:"votingPublicKey",type:"string"},{name:"stakingPath",required:!0},{name:"nonce",type:"uint",required:!0},{name:"format",type:"number"},{name:"delegations",type:"array",allowEmpty:!0},{name:"votingPurpose",type:"uint"}]),zi(e.rewardAddressParameters);const{delegations:t}=e;if(t&&t.length>32)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"At most 32 delegations are allowed in a governance registration");return{voting_public_key:e.votingPublicKey,staking_path:te(e.stakingPath,3),reward_address_parameters:Wi(e.rewardAddressParameters),nonce:e.nonce,format:e.format,delegations:null==t?void 0:t.map(or),voting_purpose:e.votingPurpose}})(e.governanceRegistrationParameters)),{hash:e.hash,governance_registration_parameters:t}},pr=e=>{const{governance_registration_parameters:t}=e;return t?(t.reward_address_parameters=(e=>{if(e.address_type===l.Messages.CardanoAddressType.REWARD){let{address_n:t,address_n_staking:i}=e;if(t.length>0&&i.length>0)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Only stakingPath is allowed for CardanoAddressType.REWARD");return t.length>0&&(i=t,t=[]),Object.assign(Object.assign({},e),{address_n:t,address_n_staking:i})}return e})(t.reward_address_parameters),Object.assign(Object.assign({},e),{governance_registration_parameters:t})):e},ur=(e,t,i,r,s,n,a)=>{const o=new Map;function d(e){const t=JSON.stringify(e);o.set(t,e)}return a!==l.Messages.CardanoTxSigningMode.MULTISIG_TRANSACTION&&(e.forEach((({path:e})=>{e&&d(e)})),t.forEach((({certificate:e,poolOwners:t})=>{!e.path||e.type!==l.Messages.CardanoCertificateType.STAKE_DELEGATION&&e.type!==l.Messages.CardanoCertificateType.STAKE_DEREGISTRATION||d(e.path),t.forEach((e=>{e.staking_key_path&&d(e.staking_key_path)}))})),i.forEach((({path:e})=>{e&&d(e)}))),a===l.Messages.CardanoTxSigningMode.PLUTUS_TRANSACTION&&r.forEach((({path:e})=>{e&&d(e)})),s.forEach((({key_path:e})=>{e&&d(e)})),n.forEach((e=>{d(e)})),Array.from(o.values())};var lr;!function(e){e.Polkadot="polkadot",e.Westend="westend",e.Kusama="kusama",e.Astar="astar",e.JoyStream="joystream",e.Manta="manta"}(lr||(lr={}));const cr={model_mini:{min:"3.0.0"},model_touch:{min:"4.3.0"}},yr={[lr.JoyStream]:{model_mini:{min:"3.6.0"},model_touch:{min:"4.7.0"}},[lr.Manta]:{model_mini:{min:"3.7.0"},model_touch:{min:"4.9.0"}}};var hr;function gr(e){return _.Buffer.isBuffer(e)||e instanceof Uint8Array}function mr(e,t){const i=e.toString(16).padStart(2*t.size,"0");return _.Buffer.from(i,"hex")}!function(e){e[e.SIGHASH_ALL=1]="SIGHASH_ALL",e[e.SIGHASH_NONE=2]="SIGHASH_NONE",e[e.SIGHASH_SINGLE=3]="SIGHASH_SINGLE",e[e.SIGHASH_FORKID=64]="SIGHASH_FORKID",e[e.SIGHASH_ANYONECANPAY=128]="SIGHASH_ANYONECANPAY"}(hr||(hr={}));class fr{constructor(e){this.bufLen=0,e?this.set(e):this.bufs=[]}set(e){return this.bufs=e.bufs||this.bufs||[],this.bufLen=this.bufs.reduce(((e,t)=>e+t.length),0),this}toBuffer(){return this.concat()}concat(){return _.Buffer.concat(this.bufs,this.bufLen)}write(e){if(!gr(e))throw new Error("BufferWriter.write: Invalid type");return this.bufs.push(e),this.bufLen+=e.length,this}writeReverse(e){if(!gr(e))throw new Error("BufferWriter.write: Invalid type");return this.bufs.push(e.reverse()),this.bufLen+=e.length,this}writeVarBytes(e){if(!gr(e))throw new Error("BufferWriter.write: Invalid type");return this.writeUInt64LE(new E.default(e.length)),this.write(e),this}writeUInt8(e){const t=_.Buffer.alloc(1);return t.writeUInt8(e,0),this.write(t),this}writeUInt16BE(e){const t=_.Buffer.alloc(2);return t.writeUInt16BE(e,0),this.write(t),this}writeUInt16LE(e){const t=_.Buffer.alloc(2);return t.writeUInt16LE(e,0),this.write(t),this}writeUInt32BE(e){const t=_.Buffer.alloc(4);return t.writeUInt32BE(e,0),this.write(t),this}writeInt32LE(e){const t=_.Buffer.alloc(4);return t.writeInt32LE(e,0),this.write(t),this}writeUInt32LE(e){const t=_.Buffer.alloc(4);return t.writeUInt32LE(e,0),this.write(t),this}writeUInt64BEBN(e){const t=mr(e,{size:8});return this.write(t),this}writeUInt64LE(e){const t=mr(e,{size:8});return this.writeReverse(t),this}writeVarintNum(e){const t=fr.varintBufNum(e);return this.write(t),this}writeVarintBN(e){const t=fr.varintBufBN(e);return this.write(t),this}static varintBufNum(e){let t;return e<253?(t=_.Buffer.alloc(1),t.writeUInt8(e,0)):e<65536?(t=_.Buffer.alloc(3),t.writeUInt8(253,0),t.writeUInt16LE(e,1)):e<4294967296?(t=_.Buffer.alloc(5),t.writeUInt8(254,0),t.writeUInt32LE(e,1)):(t=_.Buffer.alloc(9),t.writeUInt8(255,0),t.writeInt32LE(-1&e,1),t.writeUInt32LE(Math.floor(e/4294967296),5)),t}static varintBufBN(e){let t;const i=e.toNumber();if(i<253)t=_.Buffer.alloc(1),t.writeUInt8(i,0);else if(i<65536)t=_.Buffer.alloc(3),t.writeUInt8(253,0),t.writeUInt16LE(i,1);else if(i<4294967296)t=_.Buffer.alloc(5),t.writeUInt8(254,0),t.writeUInt32LE(i,1);else{const i=new fr;i.writeUInt8(255),i.writeUInt64LE(e),t=i.concat()}return t}}const _r=r.from("TransactionSigningHash");class vr{constructor(){this.bw=new fr,this.blake2b=f.blake2b.create({dkLen:32,key:_r}),this.hash={update:e=>{this.bw.write(e),this.blake2b.update(e)},digest:()=>r.from(this.blake2b.digest())}}writeUInt8(e){const t=new fr;t.writeUInt8(e),this.hash.update(t.toBuffer())}writeUInt16LE(e){const t=new fr;t.writeUInt16LE(e),this.hash.update(t.toBuffer())}writeUInt32LE(e){const t=new fr;t.writeUInt32LE(e),this.hash.update(t.toBuffer())}writeUInt64LE(e){const t=new fr;t.writeUInt64LE(new E.default(e)),this.hash.update(t.toBuffer())}writeVarBytes(e){this.writeUInt64LE(e.length),this.hash.update(e)}writeHash(e){this.hash.update(e)}finalize(){return this.hash.digest()}toBuffer(){return this.bw.toBuffer()}}function Tr(){return r.alloc(32)}function br(){return r.alloc(20)}function Sr(e){return(e&hr.SIGHASH_ANYONECANPAY)===hr.SIGHASH_ANYONECANPAY}function Er(e){return(31&e)===hr.SIGHASH_SINGLE}function Rr(e){return(31&e)===hr.SIGHASH_NONE}function Mr(e,t){e.writeHash(r.from(t.prevTxId,"hex")),e.writeUInt32LE(t.outputIndex)}function xr(e,t,i){if(Rr(i))return Tr();if(Er(i)){if(t>=e.outputs.length)return Tr();return(new vr).finalize()}const s=new vr;return e.outputs.forEach((e=>function(e,t){e.writeUInt64LE(t.satoshis),e.writeUInt16LE(0),e.writeVarBytes(r.from(t.script,"hex"))}(s,e))),s.finalize()}function wr(e,t){var i;const s=new vr;s.writeUInt16LE(e.version),s.writeHash(function(e,t){if(Sr(t))return Tr();const i=new vr;return e.inputs.forEach((e=>Mr(i,e))),i.finalize()}(e,e.sigHashType)),s.writeHash(function(e,t){if(Er(t)||Sr(t)||Rr(t))return Tr();const i=new vr;return e.inputs.forEach((e=>i.writeUInt64LE(e.sequenceNumber))),i.finalize()}(e,e.sigHashType)),s.writeHash(function(e,t){if(Sr(t))return Tr();const i=new vr;return e.inputs.forEach((e=>i.writeUInt8(e.sigOpCount))),i.finalize()}(e,e.sigHashType));const n=e.inputs[t];return Mr(s,n),s.writeUInt16LE(0),s.writeVarBytes(r.from(n.output.script,"hex")),s.writeUInt64LE(n.output.satoshis),s.writeUInt64LE(n.sequenceNumber),s.writeUInt8(null!==(i=e.sigOpCount)&&void 0!==i?i:1),s.writeHash(xr(e,t,e.sigHashType)),s.writeUInt64LE(e.lockTime),s.writeHash(br()),s.writeUInt64LE(0),s.writeHash(Tr()),s.writeUInt8(e.sigHashType),{hash:s.finalize(),raw:s.toBuffer()}}var Ar=Object.freeze({__proto__:null,searchDevices:class extends Ht{init(){this.useDevice=!1,this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){var e,t;return K(this,void 0,void 0,(function*(){yield xt.configure();const i=yield null===(e=this.connector)||void 0===e?void 0:e.enumerate(),r=null!==(t=null==i?void 0:i.descriptors)&&void 0!==t?t:[],s=Ke.getSettings("env");if(Ke.isBleConnect(s))return r.map((e=>{var t;return Object.assign(Object.assign({},e),{connectId:e.id,deviceType:Ve(null!==(t=e.name)&&void 0!==t?t:"")})}));const{deviceList:n}=yield bt.getDevices(r);return n.map((e=>e.toMessageObject()))}))}},getFeatures:class extends Ht{init(){this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt,Ot],this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){return Promise.resolve(this.device.features)}},getPassphraseState:class extends Ht{init(){this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.useDevicePassphraseState=!1}run(){return K(this,void 0,void 0,(function*(){if(!this.device.features)return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceInitializeFailed));const e=yield et(this.device),{features:t}=this.device;return t&&!0===t.passphrase_protection?(e&&t.device_id&&this.device.tryFixInternalState(e,t.device_id,t.session_id),Promise.resolve(e)):Promise.resolve(void 0)}))}},getLogs:class extends Ht{init(){this.useDevice=!1,this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){return K(this,void 0,void 0,(function*(){const e=ke();return Promise.resolve(e)}))}},checkFirmwareRelease:class extends Ht{init(){this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){if(this.device.features){const e=Ft(this.device.features);return Promise.resolve(e)}return Promise.resolve(null)}},checkBLEFirmwareRelease:class extends Ht{init(){this.notAllowDeviceMode=[...this.notAllowDeviceMode,Ot],this.checkDeviceId=!0,this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){if(this.device.features){const e=jt(this.device.features);return Promise.resolve(e)}return Promise.resolve(null)}},checkTransportRelease:class extends Ht{init(){this.useDevice=!1,this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){return K(this,void 0,void 0,(function*(){const e=xt.getTransport(),t=yield e.init(),i=Ke.getTransportStatus(t);return Promise.resolve(i)}))}},checkBridgeStatus:class extends Ht{init(){this.useDevice=!1,this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){return K(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{b.default.request({url:"http://localhost:21320",method:"POST",withCredentials:!1,timeout:3e3}).then((()=>e(!0))).catch((i=>{"ECONNABORTED"===i.code?t(n.ERRORS.TypedError(n.HardwareErrorCode.BridgeTimeoutError)):e(!1)}))}))}))}},checkBridgeRelease:class extends Ht{init(){this.notAllowDeviceMode=[...this.notAllowDeviceMode,Ot],this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){return K(this,void 0,void 0,(function*(){if(!this.device.features)return null;try{const{data:e}=yield b.default.request({url:"http://localhost:21320",method:"POST",withCredentials:!1,timeout:3e3}),{version:t="0.0.0"}=e,{willUpdateFirmwareVersion:i}=this.payload,{features:r}=this.device,s=We(r),n=Xe(r).join("."),a=T.default.lt(t,Kt);let o=!1;return ie.model_touch.includes(s)&&(T.default.gte(i,Gt)&&a&&(o=!0),T.default.gte(n,Gt)&&a&&(o=!0)),ie.model_mini.includes(s)&&(T.default.gte(i,zt)&&a&&(o=!0),T.default.gte(n,zt)&&a&&(o=!0)),{shouldUpdate:o,status:o?"outdated":"valid",releaseVersion:Kt}}catch(e){return"ECONNABORTED"===e.code?Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.BridgeTimeoutError)):Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.BridgeNotInstalled))}}))}},checkBootloaderRelease:class extends Ht{init(){this.notAllowDeviceMode=[...this.notAllowDeviceMode,Ot],this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){return K(this,void 0,void 0,(function*(){if(!this.device.features)return null;const{features:e}=this.device,t=We(e);let i=!1;ie.model_mini.includes(t)?i=!!be(e,this.payload.willUpdateFirmwareVersion):"touch"===t&&(i=Te(e));const r=Ke.getBootloaderResource(e);return Promise.resolve({shouldUpdate:i,status:i?"outdated":"valid",release:r})}))}},deviceBackup:class extends Ht{init(){this.useDevicePassphraseState=!1}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("BackupDevice","Success");return Promise.resolve(e.message)}))}},deviceChangePin:class extends Ht{init(){this.useDevicePassphraseState=!1,ei(this.payload,[{name:"remove",type:"boolean"}]),this.params={remove:this.payload.remove}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("ChangePin","Success",Object.assign({},this.params));return Promise.resolve(e.message)}))}},deviceFlags:class extends Ht{init(){this.useDevicePassphraseState=!1,ei(this.payload,[{name:"flags",type:"number"}]),this.params={flags:this.payload.flags}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("ApplyFlags","Success",Object.assign({},this.params));return Promise.resolve(e.message)}))}},deviceRebootToBootloader:class extends Ht{init(){this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}getVersionRange(){return{classic:{min:"2.1.11"},mini:{min:"2.1.11"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("RebootToBootloader","Success");return Promise.resolve(e.message)}))}},deviceRebootToBoardloader:class extends Ht{init(){this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}getVersionRange(){return{classic:{min:"2.1.11"},mini:{min:"2.1.11"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("BixinOutMessageSE","Success");return Promise.resolve(e.message)}))}},deviceRecovery:class extends Ht{init(){this.useDevicePassphraseState=!1,ei(this.payload,[{name:"wordCount",type:"number"},{name:"passphraseProtection",type:"boolean"},{name:"pinProtection",type:"boolean"},{name:"language",type:"string"},{name:"label",type:"string"},{name:"enforceWordlist",type:"boolean"},{name:"type",type:"object"},{name:"u2fCounter",type:"number"},{name:"dryRun",type:"boolean"}]),this.params={word_count:this.payload.wordCount,passphrase_protection:this.payload.passphraseProtection,pin_protection:this.payload.pinProtection,language:this.payload.language,label:this.payload.label,enforce_wordlist:this.payload.enforceWordlist,type:this.payload.type,u2f_counter:this.payload.u2fCounter||Math.floor(Date.now()/1e3),dry_run:this.payload.dryRun}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("RecoveryDevice","Success",Object.assign({},this.params));return Promise.resolve(e.message)}))}},deviceReset:class extends Ht{init(){this.useDevicePassphraseState=!1,ei(this.payload,[{name:"displayRandom",type:"boolean"},{name:"strength",type:"number"},{name:"passphraseProtection",type:"boolean"},{name:"pinProtection",type:"boolean"},{name:"language",type:"string"},{name:"label",type:"string"},{name:"u2fCounter",type:"number"},{name:"skipBackup",type:"boolean"},{name:"noBackup",type:"boolean"},{name:"backupType"}]),this.params={display_random:this.payload.displayRandom,strength:this.payload.strength||256,passphrase_protection:this.payload.passphraseProtection,pin_protection:this.payload.pinProtection,language:this.payload.language,label:this.payload.label,u2f_counter:this.payload.u2fCounter||Math.floor(Date.now()/1e3),skip_backup:this.payload.skipBackup,no_backup:this.payload.noBackup,backup_type:this.payload.backupType}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("ResetDevice","Success",Object.assign({},this.params));return Promise.resolve(e.message)}))}},deviceSettings:class extends Ht{init(){this.useDevicePassphraseState=!1,ei(this.payload,[{name:"language",type:"string"},{name:"label",type:"string"},{name:"usePassphrase",type:"boolean"},{name:"homescreen",type:"string"},{name:"passphraseSource",type:"number"},{name:"autoLockDelayMs",type:"number"},{name:"displayRotation",type:"number"},{name:"passphraseAlwaysOnDevice",type:"boolean"},{name:"safetyChecks",type:"number"},{name:"experimentalFeatures",type:"boolean"}]),this.params={language:this.payload.language,label:this.payload.label,use_passphrase:this.payload.usePassphrase,homescreen:this.payload.homescreen,_passphrase_source:this.payload.passphraseSource,auto_lock_delay_ms:this.payload.autoLockDelayMs,display_rotation:this.payload.displayRotation,passphrase_always_on_device:this.payload.passphraseAlwaysOnDevice,safety_checks:this.payload.safetyChecks,experimental_features:this.payload.experimentalFeatures}}getVersionRange(){return this.payload.usePassphrase?{model_mini:{min:"2.4.0"}}:{}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("ApplySettings","Success",Object.assign({},this.params));return Promise.resolve(e.message)}))}},deviceUpdateReboot:class extends Ht{init(){this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("DeviceBackToBoot","Success");return Promise.resolve(e.message)}))}},deviceUploadResource:class extends Ht{constructor(){super(...arguments),this.paramsData={data:new Uint8Array,thumbnailData:new Uint8Array},this.processResourceRequest=e=>K(this,void 0,void 0,(function*(){if("Success"===e.type)return e.message;const{offset:t,data_length:i}=e.message,{data:r,thumbnailData:s}=this.paramsData;if(void 0===t)throw new Error("offset is undefined");let n;n="ResourceRequest"===e.type?new Uint8Array(r.slice(t,Math.min(t+i,r.byteLength))):new Uint8Array(s.slice(t,Math.min(t+i,s.byteLength)));const a=u.blake2s(n),o={data_chunk:p.bytesToHex(n),hash:p.bytesToHex(a)},d=yield this.device.commands.typedCall("ResourceAck",["ResourceRequest","ZoomRequest","Success"],o);return this.processResourceRequest(d)}))}getVersionRange(){return{model_touch:{min:"3.2.0"}}}checkUploadNFTSupport(){const e=We(this.device.features),t=Xe(this.device.features).join(".");if(!ie.model_touch.includes(e))throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodError,"Device Not Support Upload NFT");if(T.default.lt(t,"4.1.0"))throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodNeedUpgradeFirmware,"Device firmware version is too low, please update to 4.1.0",{current:t,require:"4.1.0"})}init(){this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0,ei(this.payload,[{name:"suffix",type:"string",required:!0},{name:"dataHex",type:"string",required:!0},{name:"thumbnailDataHex",type:"string",required:!0},{name:"resType",type:"number",required:!0},{name:"nftMetaData",type:"string"},{name:"file_name_no_ext",type:"boolean"}]);const{suffix:e,dataHex:t,thumbnailDataHex:i,resType:r,nftMetaData:s}=this.payload;this.paramsData={data:Zt(t),thumbnailData:Zt(i)};const n=`${0===r?"wp":"nft"}-${p.bytesToHex(u.blake2s(this.payload.dataHex)).slice(0,8)}-${Math.floor(Date.now()/1e3)}`;this.params={extension:e,data_length:this.paramsData.data.byteLength,zoom_data_length:this.paramsData.thumbnailData.byteLength,res_type:r,nft_meta_data:s,file_name_no_ext:n}}run(){return K(this,void 0,void 0,(function*(){this.payload.resType===l.Messages.ResourceType.Nft&&this.checkUploadNFTSupport();const e=yield this.device.commands.typedCall("ResourceUpload",["ResourceRequest","ZoomRequest","Success"],this.params);return this.postMessage(dt(ot.CLOSE_UI_WINDOW)),this.processResourceRequest(e)}))}},deviceSupportFeatures:class extends Ht{init(){this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){if(!this.device.features)return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Device not initialized"));const e=Qe(this.device.features),t=rt(this.device.features);return Promise.resolve({inputPinOnSoftware:e,modifyHomescreen:t,device:this.device.toMessageObject()})}},deviceVerify:class extends Ht{init(){this.useDevicePassphraseState=!1,ei(this.payload,[{name:"dataHex",type:"hexString"}]),this.params={data:$t(this.payload.dataHex)}}run(){return K(this,void 0,void 0,(function*(){const e=We(this.device.features);let t;if(ie.model_classic.includes(e)){t=(yield this.device.commands.typedCall("BixinVerifyDeviceRequest","BixinVerifyDeviceAck",Object.assign(Object.assign({},this.params),{data:p.bytesToHex(c.sha256(this.params.data))}))).message}else{const e=yield this.device.commands.typedCall("SESignMessage","SEMessageSignature",{message:this.params.data});t={cert:(yield this.device.commands.typedCall("ReadSEPublicCert","SEPublicCert")).message.public_cert,signature:e.message.signature}}return t?Promise.resolve(t):Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Device not support verify"))}))}},deviceWipe:class extends Ht{init(){this.useDevicePassphraseState=!1}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("WipeDevice","Success");return Promise.resolve(e.message)}))}},deviceFullyUploadResource:class extends Ht{constructor(){super(...arguments),this.checkPromise=null,this.postTipMessage=e=>{this.postMessage(dt(It,{device:this.device.toMessageObject(),data:{message:e}}))}}init(){this.requireDeviceMode=[],this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}isSupportResourceUpdate(e,t){if("firmware"!==t)return!1;const i=We(e),r="touch"===i||"pro"===i,s=Xe(e).join(".");return r&&T.default.gte(s,"3.4.0")}run(){return K(this,void 0,void 0,(function*(){const{device:e}=this,{features:t}=e;if(!(null==t?void 0:t.bootloader_mode)&&t&&t){let{binary:i}=this.payload;if(!i){this.postTipMessage("CheckLatestUiResource");const e=Ke.getSysFullResource(t);if(e){this.postTipMessage("DownloadLatestUiResource");const t=yield ri(e);this.postTipMessage("DownloadLatestUiResourceSuccess"),t&&(i=t.binary)}}yield gi(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.postMessage,e,i)}}))}},deviceUpdateBootloader:class extends Ht{constructor(){super(...arguments),this.checkPromise=null,this.postTipMessage=e=>{this.postMessage(dt(It,{device:this.device.toMessageObject(),data:{message:e}}))}}init(){this.notAllowDeviceMode=[Ot,kt],this.requireDeviceMode=[],this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}updateTouchBootloader(e,t){var i;return K(this,void 0,void 0,(function*(){if(t&&!t.bootloader_mode){const r=Te(t),s=null!=(null===(i=this.payload)||void 0===i?void 0:i.binary);if(t&&(r||s)){let{binary:i}=this.payload;if(!i){this.postTipMessage("CheckLatestUiResource");const e=Ke.getBootloaderResource(t);if(e){this.postTipMessage("DownloadLatestBootloaderResource");const t=yield ri(e);this.postTipMessage("DownloadLatestBootloaderResourceSuccess"),t&&(i=t.binary)}}if(!function(e){const t=new Uint8Array(e.slice(0,Math.min(Se,e.byteLength))),i=S.default.wrap(t,void 0,void 0,!0);i.LE(),i.readByte(),i.readByte(),i.readByte(),i.readByte();const r=i.readUint32();return i.readUint32(),r+i.readUint32()===e.byteLength}(i))throw n.ERRORS.TypedError(n.HardwareErrorCode.CheckDownloadFileError);return yield((e,t,i,r)=>K(void 0,void 0,void 0,(function*(){return di(i,"UpdateBootloader",t),oi(i,Math.floor(0),t),yield hi(e,"bootloader.bin",r),oi(i,Math.floor(100),t),di(i,"UpdateBootloaderSuccess",t),!0})))(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.postMessage,e,i),Promise.resolve(!0)}}return Promise.resolve(!0)}))}run(){return K(this,void 0,void 0,(function*(){const{device:e}=this,{features:t}=e,i=We(t);return ie.model_touch.includes(i)?this.updateTouchBootloader(e,t):Promise.resolve(!0)}))}},firmwareUpdate:class extends Ht{constructor(){super(...arguments),this.postTipMessage=e=>{this.postMessage(dt(It,{device:this.device.toMessageObject(),data:{message:e}}))}}init(){this.notAllowDeviceMode=[Ot,kt],this.requireDeviceMode=[],this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0;const{payload:e}=this;if(ei(e,[{name:"version",type:"array"},{name:"binary",type:"buffer"}]),!e.updateType)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"updateType is required");this.params={updateType:e.updateType},"version"in e&&(this.params=Object.assign(Object.assign({},this.params),{version:e.version})),"binary"in e&&(this.params=Object.assign(Object.assign({},this.params),{binary:e.binary}))}checkDeviceToBootloader(e){const t=n.createDeferred(),i=Ke.getSettings("env"),r=e&&Ke.isBleConnect(i);mi.log("FirmwareUpdateV2 [checkDeviceToBootloader] isBleReconnect: ",r);const s=setInterval((()=>K(this,void 0,void 0,(function*(){var i,n,a,o,d,p;if(r)try{yield null===(i=this.device.deviceConnector)||void 0===i?void 0:i.acquire(this.device.originalDescriptor.id,null,!0),yield this.device.initialize(),(null===(n=this.device.features)||void 0===n?void 0:n.bootloader_mode)&&(clearInterval(s),null==t||t.resolve(!0))}catch(e){mi.log("catch Bluetooth error when device is restarting: ",e)}else{const i=yield null===(a=this.device.deviceConnector)||void 0===a?void 0:a.enumerate(),r=null!==(o=null==i?void 0:i.descriptors)&&void 0!==o?o:[],{deviceList:n}=yield bt.getDevices(r,e);1===n.length&&(null===(p=null===(d=n[0])||void 0===d?void 0:d.features)||void 0===p?void 0:p.bootloader_mode)&&(this.device.updateFromCache(n[0]),this.device.commands.disposed=!1,clearInterval(s),null==t||t.resolve(!0))}}))),r?3e3:2e3);return setTimeout((()=>{t&&(clearInterval(s),t.reject(new Error))}),3e4),t}run(){var e;return K(this,void 0,void 0,(function*(){const{device:t,params:i}=this,{features:r,commands:s}=t,a=We(r);if(!(null==r?void 0:r.bootloader_mode)&&r){const e=Ye(r);if(function(e,t){const i=We(e),r="mini"===i,s="firmware"===t&&"classic"===i&&"1.8.3"===e.bootloader_version;return r||s}(r,i.updateType))return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot));try{this.postTipMessage("AutoRebootToBootloader");if("CallMethodError"===(yield s.typedCall("DeviceBackToBoot","Success")).type)throw n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure);this.postTipMessage("GoToBootloaderSuccess");const t=this.checkDeviceToBootloader(this.payload.connectId);ie.model_classic.includes(a)&&bt.clearDeviceCache(e),delete bt.devicesCache[""],yield null==t?void 0:t.promise;const i=ie.model_touch.includes(a);yield Le(i?3e3:1500)}catch(e){return e instanceof n.HardwareError?Promise.reject(e):Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure))}}let o;try{if(i.binary)o=this.params.binary;else{if(!t.features)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"no features found for this device");o=(yield ii({features:t.features,version:i.version,updateType:i.updateType})).binary}}catch(t){throw n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareUpdateDownloadFailed,null!==(e=t.message)&&void 0!==e?e:t)}return ui(i.updateType,this.device.getCommands().typedCall.bind(this.device.getCommands()),this.postMessage,t,{payload:o})}))}},firmwareUpdateV2:class extends Ht{constructor(){super(...arguments),this.checkPromise=null,this.postTipMessage=e=>{this.postMessage(dt(It,{device:this.device.toMessageObject(),data:{message:e}}))}}init(){this.notAllowDeviceMode=[Ot,kt],this.requireDeviceMode=[],this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0;const{payload:e}=this;if(ei(e,[{name:"version",type:"array"},{name:"binary",type:"buffer"},{name:"forcedUpdateRes",type:"boolean"},{name:"platform",type:"string",required:!0}]),!e.updateType)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"updateType is required");this.params={updateType:e.updateType,forcedUpdateRes:e.forcedUpdateRes,isUpdateBootloader:e.isUpdateBootloader},"version"in e&&(this.params=Object.assign(Object.assign({},this.params),{version:e.version})),"binary"in e&&(this.params=Object.assign(Object.assign({},this.params),{binary:e.binary}))}checkDeviceToBootloader(e){this.checkPromise=n.createDeferred();const t=Ke.getSettings("env"),i=e&&Ke.isBleConnect(t);fi.log("FirmwareUpdateV2 [checkDeviceToBootloader] isBleReconnect: ",i);const r=setInterval((()=>K(this,void 0,void 0,(function*(){var t,s,n,a,o,d,p,u;if(i)try{yield null===(t=this.device.deviceConnector)||void 0===t?void 0:t.acquire(this.device.originalDescriptor.id,null,!0),yield this.device.initialize(),(null===(s=this.device.features)||void 0===s?void 0:s.bootloader_mode)&&(clearInterval(r),null===(n=this.checkPromise)||void 0===n||n.resolve(!0))}catch(e){fi.log("catch Bluetooth error when device is restarting: ",e)}else{const t=yield null===(a=this.device.deviceConnector)||void 0===a?void 0:a.enumerate(),i=null!==(o=null==t?void 0:t.descriptors)&&void 0!==o?o:[],{deviceList:s}=yield bt.getDevices(i,e);1===s.length&&(null===(p=null===(d=s[0])||void 0===d?void 0:d.features)||void 0===p?void 0:p.bootloader_mode)&&(this.device.updateFromCache(s[0]),this.device.commands.disposed=!1,clearInterval(r),null===(u=this.checkPromise)||void 0===u||u.resolve(!0))}}))),i?3e3:2e3);setTimeout((()=>{this.checkPromise&&(clearInterval(r),this.checkPromise.reject(new Error))}),3e4)}isEnteredManuallyBoot(e){const t=We(e),i="mini"===t,r="firmware"===this.params.updateType&&"classic"===t&&"1.8.3"===e.bootloader_version;return i||r}isSupportResourceUpdate(e,t){if("firmware"!==t)return!1;const i=We(e),r="touch"===i||"pro"===i,s=Xe(e).join(".");return r&&T.default.gte(s,"3.2.0")}checkVersionForCopyTouchResource(e){var t;if(!e)return;const i=We(e),r=Xe(e).join("."),s=null===(t=this.params.version)||void 0===t?void 0:t.join("."),{updateType:a}=this.params,o=si({features:e,updateType:a});if(!o)return;const{fullResourceRange:d}=o;if(!d)return;const[p,u]=d;if("touch"===i&&"firmware"===a&&s&&T.default.lt(r,p)&&T.default.gte(s,u)&&"desktop"!==this.payload.platform)throw n.ERRORS.TypedError(n.HardwareErrorCode.UseDesktopToUpdateFirmware)}run(){var e,t;return K(this,void 0,void 0,(function*(){const{device:i,params:r}=this,{features:s,commands:a}=i,o=We(s);if(this.checkVersionForCopyTouchResource(s),!(null==s?void 0:s.bootloader_mode)&&s){const t=Ye(s);if(this.isEnteredManuallyBoot(s))return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot));if(s&&this.isSupportResourceUpdate(s,r.updateType)){this.postTipMessage("CheckLatestUiResource");const e=Ke.getSysResourcesLatestRelease(s,r.forcedUpdateRes);if(e){this.postTipMessage("DownloadLatestUiResource");const t=yield ri(e);this.postTipMessage("DownloadLatestUiResourceSuccess"),t&&(yield gi(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.postMessage,i,t.binary))}}try{this.postTipMessage("AutoRebootToBootloader");if("CallMethodError"===(yield a.typedCall("DeviceBackToBoot","Success")).type)throw n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure);this.postTipMessage("GoToBootloaderSuccess"),this.checkDeviceToBootloader(this.payload.connectId),ie.model_classic.includes(o)&&bt.clearDeviceCache(t),delete bt.devicesCache[""],yield null===(e=this.checkPromise)||void 0===e?void 0:e.promise,this.checkPromise=null;const i=ie.model_touch.includes(o);yield Le(i?3e3:1500)}catch(e){return e instanceof n.HardwareError?Promise.reject(e):Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure))}}let d;try{if(r.binary)d=this.params.binary;else{if(!i.features)throw n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"no features found for this device");this.postTipMessage("DownloadFirmware");d=(yield ii({features:i.features,version:r.version,updateType:r.updateType,isUpdateBootloader:r.isUpdateBootloader})).binary,this.postTipMessage("DownloadFirmwareSuccess")}}catch(e){throw n.ERRORS.TypedError(n.HardwareErrorCode.FirmwareUpdateDownloadFailed,null!==(t=e.message)&&void 0!==t?t:e)}return yield this.device.acquire(),ui(r.updateType,this.device.getCommands().typedCall.bind(this.device.getCommands()),this.postMessage,i,{payload:d})}))}},requestWebUsbDevice:class extends Ht{init(){this.useDevice=!1,this.useDevicePassphraseState=!1,this.skipForceUpdateCheck=!0}run(){var e,t;return K(this,void 0,void 0,(function*(){yield xt.configure();if("webusb"!==Ke.getSettings("env"))return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Not webusb environment"));try{const i=yield null===(e=this.connector)||void 0===e?void 0:e.enumerate(),r=null!==(t=null==i?void 0:i.descriptors)&&void 0!==t?t:[],{deviceList:s}=yield bt.getDevices(r);return s.length>0?{device:s[0].toMessageObject()}:yield Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Please select the device to connect"))}catch(e){return _i.debug(e),Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"Please select the device to connect"))}}))}},cipherKeyValue:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{const t=te(e.path);ei(e,[{name:"path",required:!0},{name:"key",type:"string"},{name:"value",type:"hexString"},{name:"encrypt",type:"boolean"},{name:"askOnEncrypt",type:"boolean"},{name:"askOnDecrypt",type:"boolean"},{name:"iv",type:"hexString"}]),this.params.push({address_n:t,key:e.key,value:$t(e.value),encrypt:e.encrypt,ask_on_encrypt:e.askOnEncrypt,ask_on_decrypt:e.askOnDecrypt,iv:$t(e.iv)})}))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("CipherKeyValue","CipheredKeyValue",Object.assign({},i));e.push(Object.assign({path:ee(i.address_n)},r.message))}return Promise.resolve(this.hasBundle?e:e[0])}))}},btcGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=Object.prototype.hasOwnProperty.call(this.payload,"bundle");const e=this.hasBundle?this.payload:{bundle:[this.payload]};ei(e,[{name:"bundle",type:"array"}]),this.params=[],e.bundle.forEach((e=>{var t;const i=te(e.path,1);ei(e,[{name:"path",required:!0},{name:"coin",type:"string"},{name:"showOnOneKey",type:"boolean"},{name:"multisig",type:"object"},{name:"scriptType",type:"string"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t,{multisig:s,coin:n}=e;let{scriptType:a}=e;a||(a=Z(i),"SPENDMULTISIG"!==a||s||(a="SPENDADDRESS"));const o=Ti(i,n).name;this.params.push({address_n:i,show_display:r,coin_name:o,multisig:s,script_type:a||"SPENDADDRESS"})}))}getVersionRange(){return Si(this.params.map((e=>e.coin_name)))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("GetAddress","Address",Object.assign({},i)),s=ee(i.address_n);e.push(Object.assign({path:s},r.message)),this.postPreviousAddressMessage({address:r.message.address,path:s})}return Promise.resolve(this.hasBundle?e:e[0])}))}},btcGetPublicKey:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=Object.prototype.hasOwnProperty.call(this.payload,"bundle");const e=this.hasBundle?this.payload:{bundle:[this.payload]};ei(e,[{name:"bundle",type:"array"}]),this.params=[],e.bundle.forEach((e=>{var t;const i=te(e.path,1);ei(e,[{name:"path",required:!0},{name:"coin",type:"string"},{name:"showOnOneKey",type:"boolean"},{name:"scriptType",type:"string"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t,{multisig:s,coin:n}=e;let{scriptType:a}=e;a||(a=Z(i),"SPENDMULTISIG"!==a||s||(a="SPENDADDRESS"));const o=Ti(i,n).name;this.params.push({address_n:i,show_display:r,coin_name:o,script_type:a||"SPENDADDRESS"})}))}isBtcNetwork(e){return"Testnet"===e.coin_name||"Bitcoin"===e.coin_name}getVersionRange(){return Si(this.params.map((e=>e.coin_name)))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let i=0;i<this.params.length;i++){const r=this.params[i],s=yield this.device.commands.typedCall("GetPublicKey","PublicKey",Object.assign({},r)),n=Object.assign(Object.assign({path:ee(r.address_n)},s.message),{xpubSegwit:s.message.xpub});if(this.isBtcNetwork(r)&&(t=r.address_n,Array.isArray(t)&&(t[0]===V(86)||t[0]===V(10025)))){const e=`${Number(n.root_fingerprint||0).toString(16).padStart(8,"0")}${n.path.substring(1)}`;n.xpubSegwit=`tr([${e}]${n.xpub}/<0;1>/*)`}e.push(n)}var t;return Promise.resolve(this.hasBundle?e:e[0])}))}},btcSignMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"messageHex",type:"hexString",required:!0},{name:"coin",type:"string"},{name:"noScriptType",type:"boolean"}]);const{path:e,messageHex:t,coin:i,noScriptType:r}=this.payload,s=te(e),{coinName:n,scriptType:a}=bi(s,i,!1);this.params={address_n:s,message:$t(t),coin_name:n,script_type:r?void 0:a,no_script_type:r}}getVersionRange(){return Si([this.params.coin_name])}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("SignMessage","MessageSignature",Object.assign({},this.params));return Promise.resolve(e.message)}))}},btcSignTransaction:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"coin",type:"string",required:!0},{name:"inputs",type:"array",required:!0},{name:"outputs",type:"array",required:!0},{name:"refTxs",type:"array",required:!0,allowEmpty:!0},{name:"locktime",type:"number"},{name:"version",type:"number"},{name:"expiry",type:"number"},{name:"overwintered",type:"boolean"},{name:"versionGroupId",type:"number"},{name:"branchId",type:"number"},{name:"timestamp",type:"number"}]),this.payload.refTxs.forEach((e=>{ei(e,[{name:"hash",type:"hexString",required:!0},{name:"inputs",type:"array",required:!0},{name:"bin_outputs",type:"array",required:!Array.isArray(e.outputs)},{name:"outputs",type:"array"},{name:"version",type:"number",required:!0},{name:"lock_time",type:"number",required:!0},{name:"extra_data",type:"string"},{name:"timestamp",type:"number"},{name:"version_group_id",type:"number"}])})),this.payload.inputs.forEach((e=>{te(e.address_n);const t=(i=e.address_n,Array.isArray(i)&&i[0]===V(49));var i;ei(e,[{name:"prev_hash",type:"hexString",required:!0},{name:"prev_index",type:"number",required:!0},{name:"script_type",type:"string"},{name:"amount",type:"string",required:t},{name:"sequence",type:"number"},{name:"multisig",type:"object"}])})),this.payload.outputs.forEach((e=>{if(ei(e,[{name:"address_n",type:"array"},{name:"address",type:"string"},{name:"amount",type:"string"},{name:"op_return_data",type:"string"},{name:"multisig",type:"object"}]),Object.prototype.hasOwnProperty.call(e,"address_n")&&Object.prototype.hasOwnProperty.call(e,"address"))throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Cannot use address and address_n in one output");if(e.address_n){const t=Q(e.address_n);if(e.script_type!==t)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,`Output change script_type should be set to ${t}`)}}));const{inputs:e,outputs:t,refTxs:i,account:r,coin:s}=this.payload,a=Ti(void 0,s).name;this.params={inputs:e,outputs:t,refTxs:i,addresses:r?r.addresses:void 0,options:{lock_time:this.payload.locktime,timestamp:this.payload.timestamp,version:this.payload.version,expiry:this.payload.expiry,overwintered:this.payload.overwintered,version_group_id:this.payload.versionGroupId,branch_id:this.payload.branchId},coinName:a}}getVersionRange(){return Si([this.params.coinName])}run(){return K(this,void 0,void 0,(function*(){const{device:e,params:t}=this,i=e.unavailableCapabilities.replaceTransaction,{refTxs:r}=t,s=i?Ai:Mi;return yield s(e.commands.typedCall.bind(e.commands),t.inputs,t.outputs,r,t.options,t.coinName)}))}},btcVerifyMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"address",type:"string",required:!0},{name:"messageHex",type:"hexString",required:!0},{name:"signature",type:"hexString",required:!0},{name:"coin",type:"string",required:!0}]);const{coin:e}=this.payload,{address:t,messageHex:i,signature:r}=$t(this.payload),s=Ti(void 0,e).name;this.params={address:t,message:i,signature:r,coin_name:s}}getVersionRange(){return Si([this.params.coin_name])}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("VerifyMessage","Success",Object.assign({},this.params));return Promise.resolve(e.message)}))}},confluxGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t,i;const r=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"chainId",type:"number"},{name:"showOnOneKey",type:"boolean"}]);const s=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:r,chain_id:null!==(i=e.chainId)&&void 0!==i?i:1029,show_display:s})}))}getVersionRange(){return{model_mini:{min:"2.4.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("ConfluxGetAddress","ConfluxAddress",Object.assign({},i)),s=ee(i.address_n);e.push(Object.assign({path:s},r.message)),this.postPreviousAddressMessage({path:s,address:r.message.address})}return Promise.resolve(this.hasBundle?e:e[0])}))}},confluxSignMessage:class extends Ht{init(){this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"messageHex",type:"hexString",required:!0}]);const{path:e,messageHex:t}=this.payload,i=te(e,3);this.params={address_n:i,message:$t(t)}}getVersionRange(){return{model_mini:{min:"2.4.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("ConfluxSignMessage","ConfluxMessageSignature",Object.assign({},this.params));return Promise.resolve(e.message)}))}},confluxSignMessageCIP23:class extends Ht{init(){this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"domainHash",type:"hexString",required:!0},{name:"messageHash",type:"hexString",required:!0}]);const{path:e,domainHash:t,messageHash:i}=this.payload,r=te(e,3);this.params={address_n:r,domain_hash:$t(t),message_hash:$t(i)}}getVersionRange(){return{model_mini:{min:"2.4.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("ConfluxSignMessageCIP23","ConfluxMessageSignature",Object.assign({},this.params));return Promise.resolve(e.message)}))}},confluxSignTransaction:class extends Ht{constructor(){super(...arguments),this.addressN=[],this.processTxRequest=(e,t)=>K(this,void 0,void 0,(function*(){if(!e.data_length){const t=e.signature_v,i=e.signature_r,r=e.signature_s;if(null==t||null==i||null==r)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodError,"sign transaction failed");return Promise.resolve({v:`0x${t.toString(16)}`,r:`0x${i}`,s:`0x${r}`})}const[i,r]=Oi(t,2*e.data_length),s=yield this.device.commands.typedCall("ConfluxTxAck","ConfluxTxRequest",{data_chunk:i});return this.processTxRequest(s.message,r)})),this.evmSignTx=(e,t)=>K(this,void 0,void 0,(function*(){const{to:i,value:r,gasPrice:s,gasLimit:n,nonce:a,data:o,chainId:d,epochHeight:p,storageLimit:u}=t,l=null==o?0:o.length/2,[c,y]=Oi(o,2048);let h={address_n:e,nonce:Yt(a),gas_price:Yt(s),gas_limit:Yt(n),to:i,value:Yt(r),epoch_height:Yt(p),storage_limit:Yt(u),chain_id:d};0!==l&&(h=Object.assign(Object.assign({},h),{data_length:l,data_initial_chunk:c}));const g=yield this.device.commands.typedCall("ConfluxSignTx","ConfluxTxRequest",h);return this.processTxRequest(g.message,y)}))}init(){this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"transaction",type:"object",required:!0}]);const{path:e,transaction:t}=this.payload;this.addressN=te(e,3);const i=t;ei(i,[{name:"to",type:"hexString",required:!0},{name:"value",type:"hexString",required:!0},{name:"gasLimit",type:"hexString",required:!0},{name:"gasPrice",type:"hexString",required:!0},{name:"nonce",type:"hexString",required:!0},{name:"epochHeight",type:"hexString",required:!0},{name:"storageLimit",type:"hexString",required:!0},{name:"chainId",type:"number",required:!0},{name:"data",type:"hexString"}]),this.formattedTx=$t(i)}getVersionRange(){return{model_mini:{min:"2.4.0"}}}run(){return K(this,void 0,void 0,(function*(){const{addressN:e,formattedTx:t}=this;if(null==t)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"ConfluxSignTransaction: format tx error");const i=yield this.evmSignTx(e,t);return Promise.resolve(i)}))}},evmGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"},{name:"chainId",type:"number"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r,chain_id:e.chainId})}))}getEvmAddress(e){return K(this,void 0,void 0,(function*(){return"v1"===xt.getMessageVersion()?function({typedCall:e,param:t}){return K(this,void 0,void 0,(function*(){return e("EthereumGetAddress","EthereumAddress",{address_n:t.address_n,show_display:t.show_display,chain_id:t.chain_id})}))}({typedCall:this.device.commands.typedCall.bind(this.device.commands),param:e}):function({typedCall:e,param:t}){return K(this,void 0,void 0,(function*(){return e("EthereumGetAddressOneKey","EthereumAddressOneKey",Object.assign({},t))}))}({typedCall:this.device.commands.typedCall.bind(this.device.commands),param:e})}))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.getEvmAddress(i),{address:s}=r.message;if(!s)throw new Error("EthereumGetAddressOneKey: address is undefined");const n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},evmGetPublicKey:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1,this.useBatch=!1}init(){var e,t;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle),this.useBatch=!!(null===(t=this.payload)||void 0===t?void 0:t.useBatch);const i=this.hasBundle?this.payload:{bundle:[this.payload]};ei(i,[{name:"bundle",type:"array"}]),this.params=[],i.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"},{name:"chainId",type:"number"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r,chain_id:e.chainId})}))}getEvmPublicKey(e){return"v1"===xt.getMessageVersion()?function({typedCall:e,param:t}){return K(this,void 0,void 0,(function*(){return e("EthereumGetPublicKey","EthereumPublicKey",{address_n:t.address_n,show_display:t.show_display,chain_id:t.chain_id})}))}({typedCall:this.device.commands.typedCall.bind(this.device.commands),param:e}):function({typedCall:e,param:t}){return K(this,void 0,void 0,(function*(){return e("EthereumGetPublicKeyOneKey","EthereumPublicKeyOneKey",Object.assign({},t))}))}({typedCall:this.device.commands.typedCall.bind(this.device.commands),param:e})}run(){var e;return K(this,void 0,void 0,(function*(){const t=[];if(this.useBatch&&this.hasBundle&&it(null===(e=this.device)||void 0===e?void 0:e.features)){const e=(yield this.device.commands.typedCall("BatchGetPublickeys","EcdsaPublicKeys",{paths:this.params,ecdsa_curve_name:"secp256k1"})).message.public_keys.map(((e,t)=>({path:ee(this.params[t].address_n),publicKey:e})));return Promise.resolve(e)}for(let e=0;e<this.params.length;e++){const i=this.params[e],r=yield this.getEvmPublicKey(i);t.push(Object.assign({path:ee(i.address_n),publicKey:r.message.node.public_key},r.message))}return Promise.resolve(this.hasBundle?t:t[0])}))}},evmSignMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"messageHex",type:"hexString",required:!0},{name:"chainId",type:"number"}]);const{path:e,messageHex:t,chainId:i}=this.payload,r=te(e,3);this.params={address_n:r,message:$t(t),chain_id:i}}run(){return K(this,void 0,void 0,(function*(){return"v1"===xt.getMessageVersion()?function({typedCall:e,params:t}){return K(this,void 0,void 0,(function*(){const i=yield e("EthereumSignMessage","EthereumMessageSignature",{address_n:t.address_n,message:t.message,chain_id:t.chain_id});return Promise.resolve(i.message)}))}({typedCall:this.device.commands.typedCall.bind(this.device.commands),params:this.params}):function({typedCall:e,params:t}){return K(this,void 0,void 0,(function*(){const i=yield e("EthereumSignMessageOneKey","EthereumMessageSignatureOneKey",Object.assign({},t));return Promise.resolve(i.message)}))}({typedCall:this.device.commands.typedCall.bind(this.device.commands),params:this.params})}))}},evmSignMessageEIP712:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"domainHash",type:"hexString",required:!0},{name:"messageHash",type:"hexString",required:!0}]);const{path:e,domainHash:t,messageHash:i}=this.payload,r=te(e,3);this.params={address_n:r,domain_hash:$t(t),message_hash:$t(i)}}getVersionRange(){return{model_mini:{min:"2.1.9"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("EthereumSignMessageEIP712","EthereumMessageSignature",Object.assign({},this.params));return Promise.resolve(e.message)}))}},evmSignTransaction:class extends Ht{constructor(){super(...arguments),this.addressN=[],this.isEIP1559=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"transaction",type:"object",required:!0}]);const{path:e,transaction:t}=this.payload;this.addressN=te(e,3);const i=t;this.isEIP1559=!!i.maxFeePerGas&&!!i.maxPriorityFeePerGas;const r=[{name:"to",type:"hexString",required:!0},{name:"value",type:"hexString",required:!0},{name:"gasLimit",type:"hexString",required:!0},{name:"nonce",type:"hexString",required:!0},{name:"chainId",type:"number",required:!0},{name:"data",type:"hexString"}];this.isEIP1559?(r.push({name:"maxFeePerGas",type:"hexString",required:!0}),r.push({name:"maxPriorityFeePerGas",type:"hexString",required:!0})):(r.push({name:"gasPrice",type:"hexString",required:!0}),r.push({name:"txType",type:"number"})),ei(i,r),this.formattedTx=$t(i)}getVersionRange(){return this.isEIP1559?{model_mini:{min:"2.1.11"}}:{model_mini:{min:"1.0.0"}}}run(){return K(this,void 0,void 0,(function*(){const{addressN:e,isEIP1559:t,formattedTx:i}=this;if(null==i)throw n.ERRORS.TypedError("Runtime","formattedTx is not set");return"v1"===xt.getMessageVersion()?(({typedCall:e,isEIP1559:t,addressN:i,tx:r})=>K(void 0,void 0,void 0,(function*(){return t?qi({typedCall:e,addressN:i,tx:r,supportTrezor:!0}):ki({typedCall:e,addressN:i,tx:r,supportTrezor:!0})})))({typedCall:this.device.commands.typedCall.bind(this.device.commands),addressN:e,tx:i,isEIP1559:t}):(({typedCall:e,isEIP1559:t,addressN:i,tx:r})=>K(void 0,void 0,void 0,(function*(){return t?qi({typedCall:e,addressN:i,tx:r}):ki({typedCall:e,addressN:i,tx:r})})))({typedCall:this.device.commands.typedCall.bind(this.device.commands),addressN:e,tx:i,isEIP1559:t})}))}},evmSignTypedData:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"metamaskV4Compat",type:"boolean"},{name:"data",type:"object"},{name:"domainHash",type:"hexString"},{name:"messageHash",type:"hexString"},{name:"chainId",type:"number"}]);const{path:e,data:t,metamaskV4Compat:i,domainHash:r,messageHash:s,chainId:a}=this.payload,o=te(e,3);if(this.params={addressN:o,metamaskV4Compat:i,data:t,chainId:a},r)if(this.params.domainHash=$t(r),s)this.params.messageHash=$t(s);else if(t&&(!t.primaryType||"EIP712Domain"!==t.primaryType))throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"message_hash should only be empty when data.primaryType=EIP712Domain")}handleSignTypedData({typedCall:e,signData:t,response:i,supportTrezor:r}){return K(this,void 0,void 0,(function*(){const{types:s,primaryType:a,domain:o,message:d}=t;for(;"EthereumTypedDataStructRequest"===i.type||"EthereumTypedDataStructRequestOneKey"===i.type;){const{name:t}=i.message,a=s[t];if(void 0===a)throw n.ERRORS.TypedError("Runtime",`Type ${t} was not defined in types object`);const o={members:a.map((({name:e,type:t})=>({name:e,type:ji(t,s)})))};i=r?yield e("EthereumTypedDataStructAck",["EthereumTypedDataStructRequest","EthereumTypedDataValueRequest","EthereumTypedDataSignature"],o):yield e("EthereumTypedDataStructAckOneKey",["EthereumTypedDataStructRequestOneKey","EthereumTypedDataValueRequestOneKey","EthereumTypedDataSignatureOneKey"],o)}for(;"EthereumTypedDataValueRequest"===i.type||"EthereumTypedDataValueRequestOneKey"===i.type;){const{member_path:t}=i.message;let p,u;const[l,...c]=t;switch(l){case 0:p=o,u="EIP712Domain";break;case 1:p=d,u=a;break;default:throw n.ERRORS.TypedError("Runtime","Root index can only be 0 or 1")}for(const e of c)if(Array.isArray(p))u=Bi(u).entryTypeName,p=p[e];else if("object"==typeof p&&null!==p){const t=s[u][e];u=t.type,p=p[t.name]}let y;y=Array.isArray(p)?Li("uint16",p.length):Li(u,p),i=r?yield e("EthereumTypedDataValueAck",["EthereumTypedDataValueRequest","EthereumTypedDataSignature"],{value:y}):yield e("EthereumTypedDataValueAckOneKey",["EthereumTypedDataValueRequestOneKey","EthereumTypedDataSignatureOneKey"],{value:y})}if("EthereumTypedDataSignature"!==i.type&&"EthereumTypedDataSignatureOneKey"!==i.type)throw n.ERRORS.TypedError("Runtime","Unexpected response type");const{address:p,signature:u}=i.message;return{address:p,signature:u}}))}signTypedData(){return K(this,void 0,void 0,(function*(){const{addressN:e,data:t,metamaskV4Compat:i,chainId:r}=this.params;let s,n=!1;if("v1"===xt.getMessageVersion())n=!0,s=yield(({typedCall:e,addressN:t,data:i,metamaskV4Compat:r,chainId:s})=>K(void 0,void 0,void 0,(function*(){const{primaryType:n}=i;return yield e("EthereumSignTypedData",["EthereumTypedDataStructRequest","EthereumTypedDataValueRequest","EthereumTypedDataSignature"],{address_n:t,primary_type:n,metamask_v4_compat:r,chain_id:s})})))({typedCall:this.device.commands.typedCall.bind(this.device.commands),addressN:e,data:t,metamaskV4Compat:i,chainId:r});else n=!1,s=yield(({typedCall:e,addressN:t,data:i,metamaskV4Compat:r,chainId:s})=>K(void 0,void 0,void 0,(function*(){const{primaryType:n}=i;return e("EthereumSignTypedDataOneKey",["EthereumTypedDataStructRequestOneKey","EthereumTypedDataValueRequestOneKey","EthereumTypedDataSignatureOneKey"],{address_n:t,primary_type:n,metamask_v4_compat:r,chain_id:s})})))({typedCall:this.device.commands.typedCall.bind(this.device.commands),addressN:e,data:t,metamaskV4Compat:i,chainId:r});return this.handleSignTypedData({typedCall:this.device.commands.typedCall.bind(this.device.commands),signData:t,response:s,supportTrezor:n})}))}signTypedHash({typedCall:e,addressN:t,chainId:i,domainHash:r,messageHash:s}){if(!r)throw n.ERRORS.TypedError("Runtime","domainHash is required");return"v1"===xt.getMessageVersion()?(({typedCall:e,addressN:t,device:i,chainId:r,domainHash:s,messageHash:a})=>K(void 0,void 0,void 0,(function*(){const o=We(i.features);if("touch"===o||"pro"===o){const e=Xe(i.features).join("."),t="4.2.0";if(T.default.lt(e,t))throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodNeedUpgradeFirmware,`Device firmware version is too low, please update to ${t}`,{current:e,require:t})}return e("EthereumSignTypedHash","EthereumTypedDataSignature",{address_n:t,domain_separator_hash:null!=s?s:"",message_hash:a,chain_id:r})})))({typedCall:e,addressN:t,domainHash:r,messageHash:s,chainId:i,device:this.device}):(({typedCall:e,addressN:t,device:i,chainId:r,domainHash:s,messageHash:a})=>K(void 0,void 0,void 0,(function*(){const o=We(i.features);if("touch"===o||"pro"===o){const e=Xe(i.features).join("."),t="4.2.0";if(T.default.lt(e,t))throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodNeedUpgradeFirmware,`Device firmware version is too low, please update to ${t}`,{current:e,require:t})}return e("EthereumSignTypedHashOneKey","EthereumTypedDataSignatureOneKey",{address_n:t,domain_separator_hash:null!=s?s:"",message_hash:a,chain_id:r})})))({typedCall:e,addressN:t,domainHash:r,messageHash:s,chainId:i,device:this.device})}getVersionRange(){return{model_mini:{min:"2.1.9"}}}hasBiggerData(e){const t=h.get(e.message,"data",void 0);if(!t)return!1;let i=1024;const r=Xe(this.device.features).join(".");T.default.gte(r,"4.4.0")&&(i=1536);const s=t.startsWith("0x")?2:0;return(t.length-s)/2>i}hasNestedArrays(e){if(!e)return!1;if(Array.isArray(e))for(const t of e){if(Array.isArray(t))return!0;if("object"==typeof t&&null!==t&&this.hasNestedArrays(t))return!0}else if("object"==typeof e&&null!==e)for(const t in e)if(this.hasNestedArrays(e[t]))return!0;return!1}supportSignTyped(){const e=We(this.device.features);if(ie.model_mini.includes(e)){const e=Xe(this.device.features).join("."),t="2.2.0";if(T.default.lt(e,t))return!1}return!0}run(){return K(this,void 0,void 0,(function*(){if(!this.device.features)throw n.ERRORS.TypedError("Device_InitializeFailed","Device initialization failed. Please try again.");const{addressN:e,chainId:t}=this.params,i=We(this.device.features);if(ie.model_mini.includes(i)){ei(this.params,[{name:"domainHash",type:"hexString",required:!0},{name:"messageHash",type:"hexString",required:!0}]);const{domainHash:i,messageHash:r}=this.params;let s;return s=this.supportSignTyped()?yield this.signTypedHash({typedCall:this.device.commands.typedCall.bind(this.device.commands),addressN:e,domainHash:i,messageHash:r,chainId:t}):yield this.device.commands.typedCall("EthereumSignMessageEIP712","EthereumMessageSignature",{address_n:e,domain_hash:null!=i?i:"",message_hash:null!=r?r:""}),Promise.resolve(s.message)}if(this.hasNestedArrays(this.params.data)||this.hasBiggerData(this.params.data)){ei(this.params,[{name:"domainHash",type:"hexString",required:!0},{name:"messageHash",type:"hexString",required:!0}]);const{domainHash:i,messageHash:r}=this.params;if(!i)throw n.ERRORS.TypedError("Runtime","domainHash is required");const s=yield this.signTypedHash({typedCall:this.device.commands.typedCall.bind(this.device.commands),addressN:e,domainHash:i,messageHash:r,chainId:t});return Promise.resolve(s.message)}return this.signTypedData()}))}},evmVerifyMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"address",type:"string",required:!0},{name:"messageHex",type:"hexString",required:!0},{name:"signature",type:"hexString",required:!0},{name:"chainId",type:"number"}]);const{address:e,messageHex:t,signature:i}=$t(this.payload);this.params={address:e,message:t,signature:i,chain_id:this.payload.chainId}}run(){return K(this,void 0,void 0,(function*(){return"v1"===xt.getMessageVersion()?function({typedCall:e,params:t}){return K(this,void 0,void 0,(function*(){const i=yield e("EthereumVerifyMessage","Success",{signature:t.signature,message:t.message,address:t.address,chain_id:t.chain_id});return Promise.resolve(i.message)}))}({typedCall:this.device.commands.typedCall.bind(this.device.commands),params:this.params}):function({typedCall:e,params:t}){return K(this,void 0,void 0,(function*(){const i=yield e("EthereumVerifyMessageOneKey","Success",Object.assign({},t));return Promise.resolve(i.message)}))}({typedCall:this.device.commands.typedCall.bind(this.device.commands),params:this.params})}))}},starcoinGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("StarcoinGetAddress","StarcoinAddress",Object.assign({},i)),s=ee(i.address_n);e.push(Object.assign({path:s},r.message)),this.postPreviousAddressMessage({path:s,address:r.message.address})}return Promise.resolve(this.hasBundle?e:e[0])}))}},starcoinGetPublicKey:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("StarcoinGetPublicKey","StarcoinPublicKey",Object.assign({},i));e.push(Object.assign({path:ee(i.address_n)},r.message))}return Promise.resolve(this.hasBundle?e:e[0])}))}},starcoinSignMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"messageHex",type:"hexString",required:!0}]);const{path:e,messageHex:t}=this.payload,i=te(e,3);this.params={address_n:i,message:$t(t)}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("StarcoinSignMessage","StarcoinMessageSignature",Object.assign({},this.params));return Promise.resolve(e.message)}))}},starcoinSignTransaction:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0}]);const{path:e,rawTx:t}=this.payload,i=te(e,3);this.params={address_n:i,raw_tx:$t(t)}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("StarcoinSignTx","StarcoinSignedTx",Object.assign({},this.params));return Promise.resolve(e.message)}))}},starcoinVerifyMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"publicKey",type:"string",required:!0},{name:"messageHex",type:"hexString",required:!0},{name:"signature",type:"hexString",required:!0}]);const{publicKey:e,messageHex:t,signature:i}=$t(this.payload);this.params={public_key:e,message:t,signature:i}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("StarcoinVerifyMessage","Success",Object.assign({},this.params));return Promise.resolve(e.message)}))}},nemGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"network",type:"number"},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,network:e.network||104,show_display:r})}))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("NEMGetAddress","NEMAddress",Object.assign({},i)),s=ee(i.address_n);e.push(Object.assign({path:s},r.message)),this.postPreviousAddressMessage({path:s,address:r.message.address})}return Promise.resolve(this.hasBundle?e:e[0])}))}},nemSignTransaction:class extends Ht{constructor(){super(...arguments),this.NEM_MOSAIC_LEVY_TYPES={1:"MosaicLevy_Absolute",2:"MosaicLevy_Percentile"},this.NEM_SUPPLY_CHANGE_TYPES={1:"SupplyChange_Increase",2:"SupplyChange_Decrease"},this.NEM_AGGREGATE_MODIFICATION_TYPES={1:"CosignatoryModification_Add",2:"CosignatoryModification_Delete"},this.NEM_IMPORTANCE_TRANSFER_MODES={1:"ImportanceTransfer_Activate",2:"ImportanceTransfer_Deactivate"},this.getCommon=(e,t)=>{var i;return{address_n:t,network:e.version>>24&255,timestamp:e.timeStamp,fee:e.fee,deadline:null!==(i=e.deadline)&&void 0!==i?i:0,signer:t?void 0:e.signer}},this.transferMessage=e=>{const t=e.mosaics?e.mosaics.map((e=>({namespace:e.mosaicId.namespaceId,mosaic:e.mosaicId.name,quantity:e.quantity}))):void 0;return{recipient:e.recipient,amount:e.amount,payload:e.message?e.message.payload:void 0,public_key:e.message&&2===e.message.type?e.message.publicKey:void 0,mosaics:t}},this.importanceTransferMessage=e=>({mode:this.NEM_IMPORTANCE_TRANSFER_MODES[e.importanceTransfer.mode],public_key:e.importanceTransfer.publicKey}),this.aggregateModificationMessage=e=>({modifications:e.modifications?e.modifications.map((e=>({type:this.NEM_AGGREGATE_MODIFICATION_TYPES[e.modificationType],public_key:e.cosignatoryAccount}))):void 0,relative_change:e.minCosignatories.relativeChange}),this.provisionNamespaceMessage=e=>{var t,i,r;return{namespace:null!==(t=e.newPart)&&void 0!==t?t:"",parent:e.parent||void 0,sink:null!==(i=e.rentalFeeSink)&&void 0!==i?i:"",fee:null!==(r=e.rentalFee)&&void 0!==r?r:0}},this.mosaicCreationMessage=e=>{var t,i;const{levy:r}=e.mosaicDefinition,s={namespace:e.mosaicDefinition.id.namespaceId,mosaic:e.mosaicDefinition.id.name,levy:r&&r.type?this.NEM_MOSAIC_LEVY_TYPES[r.type]:void 0,fee:r&&r.fee,levy_address:r&&r.recipient,levy_namespace:r&&r.mosaicId&&r.mosaicId.namespaceId,levy_mosaic:r&&r.mosaicId&&r.mosaicId.name,description:e.mosaicDefinition.description},{properties:n}=e.mosaicDefinition;return Array.isArray(n)&&n.forEach((e=>{const{name:t,value:i}=e;switch(t){case"divisibility":s.divisibility=parseInt(i);break;case"initialSupply":s.supply=parseInt(i);break;case"supplyMutable":s.mutable_supply="true"===i;break;case"transferable":s.transferable="true"===i}})),{definition:s,sink:null!==(t=e.creationFeeSink)&&void 0!==t?t:"",fee:null!==(i=e.creationFee)&&void 0!==i?i:0}},this.supplyChangeMessage=e=>{var t;return{namespace:e.mosaicId.namespaceId,mosaic:e.mosaicId.name,type:this.NEM_SUPPLY_CHANGE_TYPES[e.supplyType],delta:null!==(t=e.delta)&&void 0!==t?t:0}},this.parseTx=(e,t)=>{let i=e;const r={transaction:this.getCommon(e,t),transfer:void 0,importance_transfer:void 0,aggregate_modification:void 0,provision_namespace:void 0,mosaic_creation:void 0,supply_change:void 0};switch(258!==e.type&&4100!==e.type&&4098!==e.type||(r.cosigning=258===e.type||4098===e.type,i=e.otherTrans,r.multisig=this.getCommon(i)),i.type){case 257:r.transfer=this.transferMessage(i);break;case 2049:r.importance_transfer=this.importanceTransferMessage(i);break;case 4097:r.aggregate_modification=this.aggregateModificationMessage(i);break;case 8193:r.provision_namespace=this.provisionNamespaceMessage(i);break;case 16385:r.mosaic_creation=this.mosaicCreationMessage(i);break;case 16386:r.supply_change=this.supplyChangeMessage(i);break;default:throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Unknown transaction type")}return r}}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"transaction",type:"object",required:!0}]);const{path:e,transaction:t}=this.payload,i=te(e,3);this.params=this.parseTx(t,i)}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("NEMSignTx","NEMSignedTx",Object.assign({},this.params));return Promise.resolve(e)}))}},solGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("SolanaGetAddress","SolanaAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},solSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{const t=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0}]),this.params.push({address_n:t,raw_tx:$t(e.rawTx)})}))}getVersionRange(){return this.existsVersionedTx()?{model_mini:{min:"3.1.0"},model_touch:{min:"4.3.0"}}:{classic:{min:"2.1.9"},mini:{min:"2.1.9"}}}isVersionedTx(e){if(0===e.length)return!1;try{const t=e.startsWith("0x")?e.slice(2):e;return"1"===parseInt(t[0],16).toString(2)[0]}catch(e){return!1}}existsVersionedTx(){for(let e=0;e<this.params.length;e++){const t=this.params[e],{raw_tx:i}=t;if(this.isVersionedTx(i))return!0}return!1}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("SolanaSignTx","SolanaSignedTx",Object.assign({},i)),{signature:s}=r.message;e.push({path:ee(i.address_n),signature:s})}return Promise.resolve(this.hasBundle?e:e[0])}))}},stellarGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("StellarGetAddress","StellarAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},stellarSignTransaction:class extends Ht{constructor(){super(...arguments),this.operations=[],this.parseOperation=e=>{switch(e.type){case"createAccount":return ei(e,[{name:"destination",type:"string",required:!0},{name:"startingBalance",type:"bigNumber",required:!0}]),{type:"StellarCreateAccountOp",source_account:e.source,new_account:e.destination,starting_balance:e.startingBalance};case"payment":return ei(e,[{name:"destination",type:"string",required:!0},{name:"amount",type:"bigNumber",required:!0},{name:"asset",required:!0}]),{type:"StellarPaymentOp",source_account:e.source,destination_account:e.destination,asset:e.asset,amount:e.amount};case"pathPayment":return ei(e,[{name:"destAmount",type:"bigNumber",required:!0}]),{type:"StellarPathPaymentOp",source_account:e.source,send_asset:e.sendAsset,send_max:e.sendMax,destination_account:e.destination,destination_asset:e.destAsset,destination_amount:e.destAmount,paths:e.path};case"createPassiveOffer":return ei(e,[{name:"amount",type:"bigNumber",required:!0}]),{type:"StellarCreatePassiveOfferOp",source_account:e.source,buying_asset:e.buying,selling_asset:e.selling,amount:e.amount,price_n:e.price.n,price_d:e.price.d};case"manageOffer":return ei(e,[{name:"amount",type:"bigNumber",required:!0}]),{type:"StellarManageOfferOp",source_account:e.source,buying_asset:e.buying,selling_asset:e.selling,amount:e.amount,offer_id:e.offerId,price_n:e.price.n,price_d:e.price.d};case"setOptions":{const t=e.signer?{signer_type:e.signer.type,signer_key:e.signer.key,signer_weight:e.signer.weight}:void 0;return Object.assign({type:"StellarSetOptionsOp",source_account:e.source,clear_flags:e.clearFlags,set_flags:e.setFlags,master_weight:e.masterWeight,low_threshold:e.lowThreshold,medium_threshold:e.medThreshold,high_threshold:e.highThreshold,home_domain:e.homeDomain,inflation_destination_account:e.inflationDest},t)}case"changeTrust":return ei(e,[{name:"limit",type:"bigNumber"}]),{type:"StellarChangeTrustOp",source_account:e.source,asset:e.line,limit:e.limit};case"allowTrust":return{type:"StellarAllowTrustOp",source_account:e.source,trusted_account:e.trustor,asset_type:e.assetType,asset_code:e.assetCode,is_authorized:e.authorize?1:0};case"accountMerge":return{type:"StellarAccountMergeOp",source_account:e.source,destination_account:e.destination};case"manageData":return{type:"StellarManageDataOp",source_account:e.source,key:e.name,value:e.value};case"bumpSequence":return{type:"StellarBumpSequenceOp",source_account:e.source,bump_to:e.bumpTo};default:return{}}},this.processTxRequest=(e,t)=>K(this,void 0,void 0,(function*(){const i=t+1>=e.length,r=e[t],{type:s}=r,n=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]])}return i}(r,["type"]);if(i){return(yield this.device.commands.typedCall(s,"StellarSignedTx",n)).message}return yield this.device.commands.typedCall(s,"StellarTxOpRequest",n),this.processTxRequest(e,t+1)}))}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"networkPassphrase",type:"string",required:!0},{name:"transaction",type:"object",required:!0}]);const{transaction:e,networkPassphrase:t}=this.payload;if(!e.timebounds)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"timebounds is required");const i=te(this.payload.path,3);this.params={address_n:i,network_passphrase:t,source_account:e.source,fee:e.fee,sequence_number:e.sequence,num_operations:e.operations.length,memo_type:l.StellarMemoType.NONE,timebounds_start:e.timebounds.minTime,timebounds_end:e.timebounds.maxTime},e.memo&&(this.params.memo_type=e.memo.type,this.params.memo_text=e.memo.text,this.params.memo_id=e.memo.id,this.params.memo_hash=e.memo.hash),e.operations.forEach((e=>{const t=this.parseOperation(e);t&&this.operations.push(t)})),this.params,this.operations}run(){return K(this,void 0,void 0,(function*(){return yield this.device.commands.typedCall("StellarSignTx","StellarTxOpRequest",Object.assign({},this.params)),this.processTxRequest(this.operations,0)}))}},tronGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{model_mini:{min:"2.5.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("TronGetAddress","TronAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},tronSignMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"messageHex",type:"hexString",required:!0}]);const{path:e,messageHex:t}=this.payload,i=te(e,3);this.params={address_n:i,message:Vt(t)}}getVersionRange(){return{model_mini:{min:"2.5.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("TronSignMessage","TronMessageSignature",Object.assign({},this.params));return Promise.resolve(e.message)}))}},tronSignTransaction:class extends Ht{parseTx(e,t){const i={address_n:t,data:e.data,timestamp:e.timestamp,fee_limit:e.feeLimit,ref_block_bytes:e.refBlockBytes,ref_block_hash:e.refBlockHash,expiration:e.expiration,contract:{}};return e.contract&&(e.contract.transferContract&&(i.contract={transfer_contract:{to_address:e.contract.transferContract.toAddress,amount:e.contract.transferContract.amount}}),e.contract.triggerSmartContract&&(i.contract={trigger_smart_contract:{contract_address:e.contract.triggerSmartContract.contractAddress,call_value:e.contract.triggerSmartContract.callValue,data:e.contract.triggerSmartContract.data,call_token_value:e.contract.triggerSmartContract.callTokenValue,asset_id:e.contract.triggerSmartContract.assetId}}),e.contract.freezeBalanceV2Contract&&(i.contract={freeze_balance_v2_contract:{frozen_balance:e.contract.freezeBalanceV2Contract.frozenBalance,resource:e.contract.freezeBalanceV2Contract.resource}}),e.contract.unfreezeBalanceV2Contract&&(i.contract={unfreeze_balance_v2_contract:{unfreeze_balance:e.contract.unfreezeBalanceV2Contract.unfreezeBalance,resource:e.contract.unfreezeBalanceV2Contract.resource}}),e.contract.delegateResourceContract&&(i.contract={delegate_resource_contract:{resource:e.contract.delegateResourceContract.resource,balance:e.contract.delegateResourceContract.balance,receiver_address:e.contract.delegateResourceContract.receiverAddress,lock:e.contract.delegateResourceContract.lock}}),e.contract.unDelegateResourceContract&&(i.contract={undelegate_resource_contract:{resource:e.contract.unDelegateResourceContract.resource,balance:e.contract.unDelegateResourceContract.balance,receiver_address:e.contract.unDelegateResourceContract.receiverAddress}}),e.contract.withdrawExpireUnfreezeContract&&(i.contract={withdraw_expire_unfreeze_contract:{}}),e.contract.withdrawBalanceContract&&(i.contract={withdraw_balance_contract:{owner_address:e.contract.withdrawBalanceContract.ownerAddress}})),i}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"transaction",type:"object",required:!0}]);const{path:e,transaction:t}=this.payload,i=te(e,3);ei(t,[{name:"refBlockBytes",type:"hexString",required:!0},{name:"refBlockHash",type:"hexString",required:!0},{name:"expiration",type:"number",required:!0},{name:"timestamp",type:"number",required:!0},{name:"contract",type:"object",required:!0}]),this.params=this.parseTx($t(t),i)}getVersionRange(){return{model_mini:{min:"2.5.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("TronSignTx","TronSignedTx",Object.assign({},this.params));return Promise.resolve(e.message)}))}},nearGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{model_mini:{min:"2.5.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("NearGetAddress","NearAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},nearSignTransaction:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0}]);const{path:e,rawTx:t}=this.payload,i=te(e,3);this.params={address_n:i,raw_tx:$t(t)}}getVersionRange(){return{model_mini:{min:"2.5.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("NearSignTx","NearSignedTx",Object.assign({},this.params));return Promise.resolve(e.message)}))}},aptosGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1,this.shouldConfirm=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};this.shouldConfirm=!!this.hasBundle&&this.payload.bundle.some((e=>!!e.showOnOneKey)),ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}publicKeyToAddress(e){const t=g.sha3_256.create();return t.update(Zt(e)),t.update("\0"),`0x${p.bytesToHex(t.digest())}`}getVersionRange(){return{model_mini:{min:"2.6.0"}}}run(){var e;return K(this,void 0,void 0,(function*(){if(this.hasBundle&&it(null===(e=this.device)||void 0===e?void 0:e.features)&&!this.shouldConfirm){const e=(yield this.device.commands.typedCall("BatchGetPublickeys","EcdsaPublicKeys",{paths:this.params,ecdsa_curve_name:"ed25519"})).message.public_keys.map(((e,t)=>({path:ee(this.params[t].address_n),publicKey:e,address:this.publicKeyToAddress(e)})));return Promise.resolve(e)}const t=[];for(let e=0;e<this.params.length;e++){const i=this.params[e],r=yield this.device.commands.typedCall("AptosGetAddress","AptosAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:null==s?void 0:s.toLowerCase()};t.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?t:t[0])}))}},aptosGetPublicKey:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{model_mini:{min:"2.6.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=(yield this.device.commands.typedCall("BatchGetPublickeys","EcdsaPublicKeys",{paths:this.params,ecdsa_curve_name:"ed25519"})).message.public_keys.map(((e,t)=>({path:ee(this.params[t].address_n),publicKey:e})));return Promise.resolve(this.hasBundle?e:e[0])}))}},aptosSignTransaction:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0}]);const{path:e,rawTx:t}=this.payload,i=te(e,3);this.params={address_n:i,raw_tx:$t(t)}}getVersionRange(){return{model_mini:{min:"2.6.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("AptosSignTx","AptosSignedTx",Object.assign({},this.params));return Promise.resolve(e.message)}))}},aptosSignMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"payload",type:"object",required:!0}]);const{path:e,payload:t}=this.payload,i=te(e,3);ei(t,[{name:"address",type:"string"},{name:"chainId",type:"string"},{name:"application",type:"string"},{name:"nonce",type:"string",required:!0},{name:"message",type:"string",required:!0}]),this.params={address_n:i,payload:{address:t.address,chain_id:t.chainId,application:t.application,nonce:t.nonce,message:t.message}}}getVersionRange(){return{model_mini:{min:"2.6.0"}}}run(){return K(this,void 0,void 0,(function*(){let e="APTOS\n";this.params.payload.address&&(e+=`address: ${this.params.payload.address}\n`),this.params.payload.application&&(e+=`application: ${this.params.payload.application}\n`),this.params.payload.chain_id&&(e+=`chainId: ${this.params.payload.chain_id}\n`),e+=`message: ${this.params.payload.message}\n`,e+=`nonce: ${this.params.payload.nonce}`;const t=yield this.device.commands.typedCall("AptosSignMessage","AptosMessageSignature",Object.assign({},this.params)),{address:i,signature:r}=t.message;return Promise.resolve({path:ee(this.params.address_n),address:i,signature:r,fullMessage:e})}))}},algoGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{model_mini:{min:"2.6.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("AlgorandGetAddress","AlgorandAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},algoSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode],ei(this.payload,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0}]);const{path:e,rawTx:t}=this.payload,i=te(e,3);this.params={address_n:i,raw_tx:$t(t)}}getVersionRange(){return{model_mini:{min:"2.6.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("AlgorandSignTx","AlgorandSignedTx",Object.assign({},this.params)),{signature:t}=e.message;return{path:ee(this.params.address_n),signature:t}}))}},cosmosGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"hrp",type:"string"},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t,{hrp:s}=e;this.params.push({address_n:i,hrp:s,show_display:r})}))}getVersionRange(){return{model_mini:{min:"2.10.0"},model_touch:{min:"4.0.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("CosmosGetAddress","CosmosAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},cosmosGetPublicKey:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};if(ei(t,[{name:"bundle",type:"array"}]),0===t.bundle.length)throw new Error("Bundle is empty");this.params=[],t.bundle.forEach((e=>{var t,i;const r=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"curve",type:"string"},{name:"showOnOneKey",type:"boolean"}]);const s=null===(t=e.showOnOneKey)||void 0===t||t,n=null!==(i=e.curve)&&void 0!==i?i:"secp256k1";if("secp256k1"!==n)throw new Error("Curve name is not supported");this.params.push({address_n:r,curve:n,show_display:s})}))}getVersionRange(){return{model_mini:{min:"2.10.0"},model_touch:{min:"4.0.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=(yield this.device.commands.typedCall("BatchGetPublickeys","EcdsaPublicKeys",{paths:this.params,ecdsa_curve_name:this.params[0].curve})).message.public_keys.map(((e,t)=>({path:ee(this.params[t].address_n),publicKey:e})));return Promise.resolve(this.hasBundle?e:e[0])}))}},cosmosSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode],ei(this.payload,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0}]);const{path:e,rawTx:t}=this.payload,i=te(e,3);this.params={address_n:i,raw_tx:$t(t)}}getVersionRange(){return{model_mini:{min:"2.10.0"},model_touch:{min:"4.0.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("CosmosSignTx","CosmosSignedTx",Object.assign({},this.params)),{signature:t}=e.message;return{path:ee(this.params.address_n),signature:t}}))}},xrpGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1,this.shouldConfirm=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};this.shouldConfirm=!!this.hasBundle&&this.payload.bundle.some((e=>!!e.showOnOneKey)),ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{model_mini:{min:"2.9.0"}}}run(){var e,t,i;return K(this,void 0,void 0,(function*(){if(this.hasBundle&&it(null===(e=this.device)||void 0===e?void 0:e.features)&&!this.shouldConfirm){const e=(yield this.device.commands.typedCall("BatchGetPublickeys","EcdsaPublicKeys",{paths:this.params,ecdsa_curve_name:"secp256k1"})).message.public_keys.map(((e,t)=>({path:ee(this.params[t].address_n),publicKey:e,address:m.deriveAddress(e)})));return Promise.resolve(e)}const r=[];for(let e=0;e<this.params.length;e++){const s=this.params[e],n=yield this.device.commands.typedCall("RippleGetAddress","RippleAddress",Object.assign({},s)),a=yield this.device.commands.typedCall("BatchGetPublickeys","EcdsaPublicKeys",{paths:[{address_n:s.address_n}],ecdsa_curve_name:"secp256k1"}),{address:o}=n.message,d=ee(s.address_n);r.push({path:d,address:o,publicKey:null===(i=null===(t=a.message)||void 0===t?void 0:t.public_keys)||void 0===i?void 0:i[0]}),this.postPreviousAddressMessage({path:d,address:o})}return Promise.resolve(this.hasBundle?r:r[0])}))}},xrpSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const{payload:e}=this;ei(e,[{name:"path",required:!0},{name:"transaction",required:!0}]);const t=te(e.path,5),{transaction:i}=e;ei(i,[{name:"fee",type:"string"},{name:"flags",type:"number"},{name:"sequence",type:"number"},{name:"maxLedgerVersion",type:"number"},{name:"payment",type:"object"}]),ei(i.payment,[{name:"amount",type:"number",required:!0},{name:"destination",type:"string",required:!0},{name:"destinationTag",type:"number"}]),this.params={address_n:t,fee:i.fee,flags:i.flags,sequence:i.sequence,last_ledger_sequence:i.maxLedgerVersion,payment:{amount:i.payment.amount,destination:i.payment.destination,destination_tag:i.payment.destinationTag}}}getVersionRange(){return{model_mini:{min:"2.9.0"}}}run(){return K(this,void 0,void 0,(function*(){const{message:e}=yield this.device.commands.typedCall("RippleSignTx","RippleSignedTx",this.params);return{serializedTx:e.serialized_tx,signature:e.signature}}))}},suiGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1,this.shouldConfirm=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};this.shouldConfirm=!!this.hasBundle&&this.payload.bundle.some((e=>!!e.showOnOneKey)),ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.3.0"}}}run(){var e;return K(this,void 0,void 0,(function*(){if(this.hasBundle&&it(null===(e=this.device)||void 0===e?void 0:e.features)&&!this.shouldConfirm){const e=(yield this.device.commands.typedCall("BatchGetPublickeys","EcdsaPublicKeys",{paths:this.params,ecdsa_curve_name:"ed25519"})).message.public_keys.map(((e,t)=>({path:ee(this.params[t].address_n),publicKey:e,address:Gi(e)})));return Promise.resolve(e)}const t=[];for(let e=0;e<this.params.length;e++){const i=this.params[e],r=yield this.device.commands.typedCall("SuiGetAddress","SuiAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:null==s?void 0:s.toLowerCase()};t.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?t:t[0])}))}},suiGetPublicKey:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.3.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=(yield this.device.commands.typedCall("BatchGetPublickeys","EcdsaPublicKeys",{paths:this.params,ecdsa_curve_name:"ed25519"})).message.public_keys.map(((e,t)=>({path:ee(this.params[t].address_n),publicKey:e})));return Promise.resolve(this.hasBundle?e:e[0])}))}},suiSignMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"messageHex",type:"hexString",required:!0}]);const{path:e,messageHex:t}=this.payload,i=te(e,3);this.params={address_n:i,message:Vt(t)}}getVersionRange(){return{model_mini:{min:"3.4.0"},model_touch:{min:"4.6.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("SuiSignMessage","SuiMessageSignature",Object.assign({},this.params));return Promise.resolve(e.message)}))}},suiSignTransaction:class extends Ht{constructor(){super(...arguments),this.chunkByteSize=1024,this.processTxRequest=(e,t,i,r=0)=>K(this,void 0,void 0,(function*(){if("SuiSignedTx"===t.type)return t.message;const{data_length:s}=t.message;if(!s)return t.message;const n=i.subarray(r,r+s),a=r+n.length,o={data_chunk:n.toString("hex")},d=yield e("SuiTxAck",["SuiSignedTx","SuiTxRequest"],Object.assign({},o));return this.processTxRequest(e,d,i,a)}))}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],ei(this.payload,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0}]);const{path:e,rawTx:t}=this.payload,i=te(e,3);this.params={address_n:i,raw_tx:$t(t)}}getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.3.0"}}}supportChunkTransfer(){const e=We(this.device.features),t=Xe(this.device.features).join(".");if(ie.model_mini.includes(e)){if(T.default.valid(t))return T.default.gte(t,"3.7.0")}else if(ie.model_touch.includes(e)&&T.default.valid(t))return T.default.gte(t,"4.8.0");return!1}run(){return K(this,void 0,void 0,(function*(){const e=this.device.getCommands().typedCall.bind(this.device.getCommands());let t,i=0;this.supportChunkTransfer()&&(i=this.chunkByteSize,t=r.from(this.params.raw_tx,"hex"),this.params={address_n:this.params.address_n,raw_tx:"",data_initial_chunk:t.subarray(0,this.chunkByteSize).toString("hex"),data_length:t.length});const s=yield e("SuiSignTx",["SuiSignedTx","SuiTxRequest"],Object.assign({},this.params));return this.processTxRequest(e,s,t,i)}))}},cardanoGetAddress:class extends Ht{init(){var e,t,i;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle),this.isCheck=this.hasBundle?!!(null===(t=this.payload)||void 0===t?void 0:t.bundle.every((e=>!!e.isCheck))):!!(null===(i=this.payload)||void 0===i?void 0:i.isCheck);const r=this.hasBundle?this.payload:{bundle:[this.payload]};this.params=r.bundle.map((e=>(ei(e,[{name:"addressParameters",type:"object",required:!0},{name:"networkId",type:"number",required:!0},{name:"protocolMagic",type:"number",required:!0},{name:"derivationType",type:"number"},{name:"address",type:"string"},{name:"showOnOneKey",type:"boolean"}]),zi(e.addressParameters),{address_parameters:Wi(e.addressParameters),address:e.address,protocol_magic:e.protocolMagic,network_id:e.networkId,derivation_type:void 0!==e.derivationType?e.derivationType:l.Messages.CardanoDerivationType.ICARUS,show_display:"boolean"!=typeof e.showOnOneKey||!!e.showOnOneKey})))}getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.1.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(const t of this.params){const{address_parameters:i,protocol_magic:r,network_id:s,derivation_type:n,show_display:a}=t,o=yield this.device.commands.typedCall("CardanoGetAddress","CardanoAddress",{address_parameters:i,protocol_magic:r,network_id:s,derivation_type:n,show_display:a});let d,p;if(i.address_type===l.Messages.CardanoAddressType.BASE&&!this.isCheck){d=(yield this.device.commands.typedCall("CardanoGetPublicKey","CardanoPublicKey",{address_n:i.address_n.slice(0,3),derivation_type:n,show_display:!1})).message.xpub;p=(yield this.device.commands.typedCall("CardanoGetAddress","CardanoAddress",{address_parameters:{address_type:l.Messages.CardanoAddressType.REWARD,address_n:[],address_n_staking:i.address_n_staking},protocol_magic:r,network_id:s,derivation_type:n,show_display:!1})).message.address}const u=ee(t.address_parameters.address_n);e.push({addressParameters:Vi(t.address_parameters),protocolMagic:t.protocol_magic,networkId:t.network_id,serializedPath:u,serializedStakingPath:ee(t.address_parameters.address_n_staking),address:o.message.address,xpub:d,stakeAddress:p}),this.postPreviousAddressMessage({path:u,address:o.message.address})}return this.hasBundle?e:e[0]}))}},cardanoGetPublicKey:class extends Ht{init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=t.bundle.map((e=>{ei(e,[{name:"path",required:!0},{name:"derivationType",type:"number"},{name:"showOnOneKey",type:"boolean"}]);return{address_n:te(e.path,3),derivation_type:void 0!==e.derivationType?e.derivationType:l.Messages.CardanoDerivationType.ICARUS,show_display:"boolean"==typeof e.showOnOneKey&&e.showOnOneKey}}))}getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.1.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[],t=this.device.getCommands();for(let i=0;i<this.params.length;i++){const r=this.params[i],{message:s}=yield t.typedCall("CardanoGetPublicKey","CardanoPublicKey",r);e.push({path:r.address_n,serializedPath:ee(r.address_n),publicKey:s.xpub,node:s.node})}return this.hasBundle?e:e[0]}))}},cardanoSignTransaction:class extends Ht{getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.1.0"}}}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const{payload:t}=this;ei(t,[{name:"signingMode",type:"number",required:!0},{name:"inputs",type:"array",required:!0},{name:"outputs",type:"array",required:!0,allowEmpty:!0},{name:"fee",type:"uint",required:!0},{name:"ttl",type:"uint"},{name:"certificates",type:"array",allowEmpty:!0},{name:"withdrawals",type:"array",allowEmpty:!0},{name:"mint",type:"array",allowEmpty:!0},{name:"validityIntervalStart",type:"uint"},{name:"scriptDataHash",type:"string"},{name:"collateralInputs",type:"array",allowEmpty:!0},{name:"requiredSigners",type:"array",allowEmpty:!0},{name:"totalCollateral",type:"uint"},{name:"referenceInputs",type:"array",allowEmpty:!0},{name:"protocolMagic",type:"number",required:!0},{name:"networkId",type:"number",required:!0},{name:"additionalWitnessRequests",type:"array",allowEmpty:!0},{name:"derivationType",type:"number"},{name:"includeNetworkId",type:"boolean"}]);const i=t.inputs.map(Yi),r=t.outputs.map(ir);let s=[];t.certificates&&(s=t.certificates.map(ar));let n=[];t.withdrawals&&(n=t.withdrawals.map((e=>(ei(e,[{name:"amount",type:"uint",required:!0},{name:"scriptHash",type:"string"},{name:"keyHash",type:"string"}]),{path:e.path?te(e.path,5):void 0,amount:e.amount,script_hash:e.scriptHash,key_hash:e.keyHash}))));let a,o=[];t.mint&&(o=Zi(t.mint)),t.auxiliaryData&&(a=dr(t.auxiliaryData));let d=[];t.additionalWitnessRequests&&(d=t.additionalWitnessRequests.map((e=>te(e,3))));let p=[];t.collateralInputs&&(p=t.collateralInputs.map($i));let u=[];t.requiredSigners&&(u=t.requiredSigners.map((e=>(ei(e,[{name:"keyHash",type:"string"}]),{key_path:e.keyPath?te(e.keyPath,3):void 0,key_hash:e.keyHash}))));const c=t.collateralReturn?ir(t.collateralReturn):void 0;let y=[];t.referenceInputs&&(y=t.referenceInputs.map(Xi)),this.params={signingMode:t.signingMode,inputsWithPath:i,outputsWithData:r,fee:t.fee,ttl:t.ttl,certificatesWithPoolOwnersAndRelays:s,withdrawals:n,mint:o,auxiliaryData:a,validityIntervalStart:t.validityIntervalStart,scriptDataHash:t.scriptDataHash,collateralInputsWithPath:p,requiredSigners:u,collateralReturnWithData:c,totalCollateral:t.totalCollateral,referenceInputs:y,protocolMagic:t.protocolMagic,networkId:t.networkId,witnessPaths:ur(i,s,n,p,u,d,t.signingMode),additionalWitnessRequests:d,derivationType:void 0!==t.derivationType?t.derivationType:l.Messages.CardanoDerivationType.ICARUS,includeNetworkId:t.includeNetworkId}}signTx(){return K(this,void 0,void 0,(function*(){const e=this.device.getCommands().typedCall.bind(this.device.getCommands()),t=!!this.params.auxiliaryData,i={signing_mode:this.params.signingMode,protocol_magic:this.params.protocolMagic,network_id:this.params.networkId,inputs_count:this.params.inputsWithPath.length,outputs_count:this.params.outputsWithData.length,fee:this.params.fee,ttl:this.params.ttl,certificates_count:this.params.certificatesWithPoolOwnersAndRelays.length,withdrawals_count:this.params.withdrawals.length,has_auxiliary_data:t,validity_interval_start:this.params.validityIntervalStart,witness_requests_count:this.params.witnessPaths.length,minting_asset_groups_count:this.params.mint.length,script_data_hash:this.params.scriptDataHash,collateral_inputs_count:this.params.collateralInputsWithPath.length,required_signers_count:this.params.requiredSigners.length,has_collateral_return:null!=this.params.collateralReturnWithData,total_collateral:this.params.totalCollateral,reference_inputs_count:this.params.referenceInputs.length,derivation_type:this.params.derivationType,include_network_id:this.params.includeNetworkId};yield e("CardanoSignTxInit","CardanoTxItemAck",i);for(const{input:t}of this.params.inputsWithPath)yield e("CardanoTxInput","CardanoTxItemAck",t);for(const t of this.params.outputsWithData)yield rr(e,t);for(const{certificate:t,poolOwners:i,poolRelays:r}of this.params.certificatesWithPoolOwnersAndRelays){yield e("CardanoTxCertificate","CardanoTxItemAck",t);for(const t of i)yield e("CardanoPoolOwner","CardanoTxItemAck",t);for(const t of r)yield e("CardanoPoolRelayParameters","CardanoTxItemAck",t)}for(const t of this.params.withdrawals)yield e("CardanoTxWithdrawal","CardanoTxItemAck",t);let r;if(this.params.auxiliaryData){const{catalyst_registration_parameters:t}=this.params.auxiliaryData;t&&(this.params.auxiliaryData=pr(this.params.auxiliaryData));const{message:i}=yield e("CardanoTxAuxiliaryData","CardanoTxAuxiliaryDataSupplement",this.params.auxiliaryData),s=l.Messages.CardanoTxAuxiliaryDataSupplementType[i.type];s!==l.Messages.CardanoTxAuxiliaryDataSupplementType.NONE&&(r={type:s,auxiliaryDataHash:i.auxiliary_data_hash,governanceSignature:i.governance_signature,catalystSignature:i.governance_signature}),yield e("CardanoTxHostAck","CardanoTxItemAck")}if(this.params.mint.length>0){yield e("CardanoTxMint","CardanoTxItemAck",{asset_groups_count:this.params.mint.length});for(const t of this.params.mint){yield e("CardanoAssetGroup","CardanoTxItemAck",{policy_id:t.policyId,tokens_count:t.tokens.length});for(const i of t.tokens)yield e("CardanoToken","CardanoTxItemAck",i)}}for(const{collateralInput:t}of this.params.collateralInputsWithPath)yield e("CardanoTxCollateralInput","CardanoTxItemAck",t);for(const t of this.params.requiredSigners)yield e("CardanoTxRequiredSigner","CardanoTxItemAck",t);this.params.collateralReturnWithData&&(yield rr(e,this.params.collateralReturnWithData));for(const t of this.params.referenceInputs)yield e("CardanoTxReferenceInput","CardanoTxItemAck",t);const s=[];for(const t of this.params.witnessPaths){const{message:i}=yield e("CardanoTxWitnessRequest","CardanoTxWitnessResponse",{path:t});s.push({type:l.Messages.CardanoTxWitnessType[i.type],pubKey:i.pub_key,signature:i.signature,chainCode:i.chain_code})}const{message:n}=yield e("CardanoTxHostAck","CardanoTxBodyHash");return yield e("CardanoTxHostAck","CardanoSignTxFinished"),{hash:n.tx_hash,witnesses:s,auxiliaryDataSupplement:r}}))}run(){return this.signTx()}},cardanoSignMessage:class extends Ht{init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const{payload:e}=this;ei(e,[{name:"path",type:"string",required:!0},{name:"message",type:"string",required:!0},{name:"derivationType",type:"number"},{name:"networkId",type:"number",required:!0}]);const t=te(e.path,3);this.params={address_n:t,message:e.message,derivation_type:void 0!==e.derivationType?e.derivationType:l.Messages.CardanoDerivationType.ICARUS,network_id:e.networkId}}getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.1.0"}}}run(){return K(this,void 0,void 0,(function*(){return(yield this.device.commands.typedCall("CardanoSignMessage","CardanoMessageSignature",this.params)).message}))}},filecoinGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"},{name:"isTestnet",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r,testnet:e.isTestnet})}))}getVersionRange(){return{model_mini:{min:"2.10.0"},model_touch:{min:"3.5.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("FilecoinGetAddress","FilecoinAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},filecoinSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode],ei(this.payload,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0},{name:"isTestnet",type:"boolean"}]);const{path:e,rawTx:t,isTestnet:i}=this.payload,r=te(e,3);this.params={address_n:r,raw_tx:$t(t),testnet:i}}getVersionRange(){return{model_mini:{min:"2.10.0"},model_touch:{min:"3.5.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("FilecoinSignTx","FilecoinSignedTx",Object.assign({},this.params)),{signature:t}=e.message;return{path:ee(this.params.address_n),signature:t}}))}},polkadotGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"prefix",required:!0},{name:"network",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t,{prefix:s,network:n}=e;this.params.push({address_n:i,prefix:s,network:n,show_display:r})}))}getVersionRange(){return function(e){return e.includes(lr.JoyStream)?yr[lr.JoyStream]:e.includes(lr.Manta)?yr[lr.Manta]:cr}(this.params.map((e=>e.network)))}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("PolkadotGetAddress","PolkadotAddress",Object.assign({},i)),{address:s,public_key:n}=r.message,a=ee(i.address_n);e.push({path:a,address:s,publicKey:null!=n?n:""}),this.postPreviousAddressMessage({path:a,address:s})}return Promise.resolve(this.hasBundle?e:e[0])}))}},polkadotSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode],ei(this.payload,[{name:"path",required:!0},{name:"network",required:!0},{name:"rawTx",type:"hexString",required:!0}]);const{path:e,rawTx:t,network:i}=this.payload,r=te(e,3);this.params={address_n:r,network:i,raw_tx:$t(t)}}getVersionRange(){return function(e){var t;return null!==(t=yr[e])&&void 0!==t?t:cr}(this.params.network)}run(){return K(this,void 0,void 0,(function*(){const e=yield this.device.commands.typedCall("PolkadotSignTx","PolkadotSignedTx",Object.assign({},this.params)),{signature:t}=e.message;return{path:ee(this.params.address_n),signature:t}}))}},kaspaGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"},{name:"prefix",type:"string"},{name:"scheme",type:"string"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r,prefix:e.prefix,scheme:e.scheme})}))}getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.3.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("KaspaGetAddress","KaspaAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},kaspaSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e,t,i,r,s;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const n=this.payload;ei(n,[{name:"version",type:"number"},{name:"sigHashType",type:"number",required:!0},{name:"inputs",type:"array",required:!0},{name:"outputs",type:"array",required:!0},{name:"lockTime",required:!0},{name:"sigOpCount",type:"number"},{name:"subNetworkID",type:"string"}]);const a=n.inputs.map((e=>{var t;ei(e,[{name:"path",type:"string",required:!0},{name:"prevTxId",type:"string",required:!0},{name:"outputIndex",type:"number",required:!0},{name:"sequenceNumber",required:!0}]);const i=te(e.path,3);return Object.assign(Object.assign({},e),{path:i,sigOpCount:null!==(t=e.sigOpCount)&&void 0!==t?t:1})})),o=n.outputs.map((e=>{var t;return ei(e,[{name:"satoshis",required:!0},{name:"script",type:"string",required:!0},{name:"scriptVersion",type:"number"}]),Object.assign(Object.assign({},e),{scriptVersion:null!==(t=e.scriptVersion)&&void 0!==t?t:0})}));this.params=Object.assign(Object.assign({},n),{inputs:a,outputs:o,scheme:null!==(e=n.scheme)&&void 0!==e?e:"schnorr",prefix:null!==(t=n.prefix)&&void 0!==t?t:"kaspa",sigHashType:null!==(i=n.sigHashType)&&void 0!==i?i:hr.SIGHASH_ALL|hr.SIGHASH_FORKID,sigOpCount:null!==(r=n.sigOpCount)&&void 0!==r?r:1,subNetworkID:null!==(s=n.subNetworkID)&&void 0!==s?s:p.bytesToHex(br())})}getVersionRange(){return{model_mini:{min:"3.0.0"},model_touch:{min:"4.3.0"}}}processTxRequest(e,t,i,r){var s;return K(this,void 0,void 0,(function*(){if("KaspaSignedTx"===t.type)return r.push({index:i,signature:t.message.signature}),r;if("KaspaTxInputRequest"===t.type){r.push({index:i,signature:null!==(s=t.message.signature)&&void 0!==s?s:""});const n=t.message.request_index,{raw:a}=wr(this.params,n),o=this.params.inputs[n],d=yield e("KaspaTxInputAck",["KaspaTxInputRequest","KaspaSignedTx"],{address_n:o.path,raw_message:p.bytesToHex(a)});return this.processTxRequest(e,d,n,r)}return r}))}run(){return K(this,void 0,void 0,(function*(){const{raw:e}=wr(this.params,0),t=this.params.inputs[0],{device:i,params:r}=this,s=yield i.commands.typedCall("KaspaSignTx",["KaspaTxInputRequest","KaspaSignedTx"],{address_n:t.path,raw_message:p.bytesToHex(e),scheme:r.scheme,prefix:r.prefix,input_count:r.inputs.length});return this.processTxRequest(i.commands.typedCall.bind(i.commands),s,0,[])}))}},nexaGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"},{name:"prefix",type:"string"},{name:"scheme",type:"string"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r,prefix:e.prefix,scheme:e.scheme})}))}getVersionRange(){return{model_mini:{min:"3.2.0"},model_touch:{min:"4.4.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("NexaGetAddress","NexaAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),pub:r.message.public_key,address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},nexaSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){const e=this.payload;e.inputs.forEach((e=>(ei(e,[{name:"path",type:"string",required:!0},{name:"message",type:"string",required:!0},{name:"prefix",type:"string",required:!0}]),e))),this.params=e}getVersionRange(){return{model_mini:{min:"3.2.0"},model_touch:{min:"4.4.0"}}}processTxRequest(e,t,i,r){return K(this,void 0,void 0,(function*(){const{signature:s}=t.message;if(!s)throw n.ERRORS.TypedError(n.HardwareErrorCode.ResponseUnexpectTypeError,"signature is not valid");if("NexaSignedTx"===t.type)return r.push({index:i,signature:s}),r;if("NexaTxInputRequest"===t.type){r.push({index:i,signature:s});const n=t.message.request_index,a=this.params.inputs[n],o=yield e("NexaTxInputAck",["NexaTxInputRequest","NexaSignedTx"],{address_n:a.path,raw_message:a.message});return this.processTxRequest(e,o,n,r)}return r}))}run(){return K(this,void 0,void 0,(function*(){const{device:e,params:t}=this,i=t.inputs[0],r=yield e.commands.typedCall("NexaSignTx",["NexaTxInputRequest","NexaSignedTx"],{address_n:te(i.path,3),raw_message:i.message,prefix:i.prefix,input_count:t.inputs.length});return this.processTxRequest(e.commands.typedCall.bind(e.commands),r,0,[])}))}},nostrGetPublicKey:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=Object.prototype.hasOwnProperty.call(this.payload,"bundle");const e=this.hasBundle?this.payload:{bundle:[this.payload]};ei(e,[{name:"bundle",type:"array"}]),this.params=[],e.bundle.forEach((e=>{var t;const i=te(e.path,1);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{model_mini:{min:"3.6.0"},model_touch:{min:"4.7.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("NostrGetPublicKey","NostrPublicKey",Object.assign({},i)),s=Object.assign({path:ee(i.address_n)},r.message);e.push(s)}return Promise.resolve(this.hasBundle?e:e[0])}))}},nostrSignEvent:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const{payload:e}=this;if(!function(e){if(!(e instanceof Object))return!1;if("number"!=typeof e.kind)return!1;if("string"!=typeof e.content)return!1;if("number"!=typeof e.created_at)return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t+=1){const i=e.tags[t];if(!Array.isArray(i))return!1;for(let e=0;e<i.length;e+=1)if("object"==typeof i[e])return!1}return!0}(e.event))throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Can't serialize event with wrong or missing properties");ei(e,[{name:"path",required:!0}]);const t=te(e.path,5);this.params={address_n:t,event:Jt(r.from(JSON.stringify(e.event,null,0),"utf-8"))}}getVersionRange(){return{model_mini:{min:"3.6.0"},model_touch:{min:"4.7.0"}}}run(){return K(this,void 0,void 0,(function*(){const{message:e}=yield this.device.commands.typedCall("NostrSignEvent","NostrSignedEvent",this.params);try{const t=r.from(Zt(e.event)).toString("utf-8"),i=JSON.parse(t);return{path:ee(this.params.address_n),rawTx:e.event,event:i}}catch(e){throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodError,"Failed to parse signed event",e)}}))}},nostrEncryptMessage:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const{payload:t}=this;ei(t,[{name:"path",required:!0},{name:"pubkey",required:!0,type:"string"},{name:"plaintext",required:!0,type:"string"},{name:"showOnOneKey",type:"boolean"}]);const i=te(t.path,5);this.params={address_n:i,pubkey:t.pubkey,msg:t.plaintext,show_display:null===(e=t.showOnOneKey)||void 0===e||e}}getVersionRange(){return{model_mini:{min:"3.6.0"},model_touch:{min:"4.7.0"}}}run(){return K(this,void 0,void 0,(function*(){const{message:e}=yield this.device.commands.typedCall("NostrEncryptMessage","NostrEncryptedMessage",this.params);return{path:ee(this.params.address_n),pubkey:this.params.pubkey,plaintext:this.params.msg,encryptedMessage:e.msg}}))}},nostrDecryptMessage:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const{payload:t}=this;ei(t,[{name:"path",required:!0},{name:"pubkey",required:!0,type:"string"},{name:"ciphertext",required:!0,type:"string"},{name:"showOnOneKey",type:"boolean"}]);const i=te(t.path,5);this.params={address_n:i,pubkey:t.pubkey,msg:t.ciphertext,show_display:null===(e=t.showOnOneKey)||void 0===e||e}}getVersionRange(){return{model_mini:{min:"3.6.0"},model_touch:{min:"4.7.0"}}}run(){return K(this,void 0,void 0,(function*(){const{message:e}=yield this.device.commands.typedCall("NostrDecryptMessage","NostrDecryptedMessage",this.params);return{path:ee(this.params.address_n),pubkey:this.params.pubkey,ciphertext:this.params.msg,decryptedMessage:e.msg}}))}},nostrSignSchnorr:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const{payload:e}=this;ei(e,[{name:"path",required:!0},{name:"hash",required:!0,type:"string"}]);const t=te(e.path,5);this.params={address_n:t,hash:e.hash}}getVersionRange(){return{model_mini:{min:"3.6.0"},model_touch:{min:"4.7.0"}}}run(){return K(this,void 0,void 0,(function*(){const{message:e}=yield this.device.commands.typedCall("NostrSignSchnorr","NostrSignedSchnorr",this.params);return{path:ee(this.params.address_n),rawHash:this.params.hash,signature:e.signature}}))}},lnurlAuth:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const{payload:e}=this;ei(e,[{name:"domain",type:"string",required:!0},{name:"k1",type:"string",required:!0}]),this.params={domain:Jt(r.from(e.domain,"utf-8")),data:Jt(r.from(e.k1,"hex"))}}getVersionRange(){return{model_mini:{min:"3.7.0"},model_touch:{min:"4.8.0"}}}run(){return K(this,void 0,void 0,(function*(){const{message:e}=yield this.device.commands.typedCall("LnurlAuth","LnurlAuthResp",this.params);return e}))}},nervosGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"},{name:"network",type:"string"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r,network:e.network})}))}getVersionRange(){return{model_mini:{min:"3.7.0"},model_touch:{min:"4.9.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("NervosGetAddress","NervosAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},nervosSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1,this.chunkByteSize=1024,this.processTxRequest=(e,t,i,r=0)=>K(this,void 0,void 0,(function*(){var s,n;if("NervosSignedTx"===t.type){if(!(null===(s=null==t?void 0:t.message)||void 0===s?void 0:s.signature))throw new Error("No signature returned");return Object.assign(Object.assign({},t.message),{path:ee(this.params.address_n)})}const{data_length:a}=t.message;if(!a){if(!(null===(n=null==t?void 0:t.message)||void 0===n?void 0:n.signature))throw new Error("No signature returned");return Object.assign(Object.assign({},t.message),{path:ee(this.params.address_n)})}const o=i.subarray(r,r+a),d=r+o.length,p={data_chunk:o.toString("hex")},u=yield e("NervosTxAck",["NervosSignedTx","NervosTxRequest"],Object.assign({},p));return this.processTxRequest(e,u,i,d)}))}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode],ei(this.payload,[{name:"path",required:!0},{name:"rawTx",type:"hexString",required:!0},{name:"witnessHex",type:"hexString",required:!0},{name:"network",type:"string",required:!0}]);const{path:e,rawTx:t,witnessHex:i,network:s}=this.payload,n=te(e,3);this.params={address_n:n,raw_tx:r.from($t(t),"hex"),witness_buffer:$t(i),network:s}}getVersionRange(){return{model_mini:{min:"3.7.0"},model_touch:{min:"4.9.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=this.params.raw_tx.length,t=e,i=this.params.raw_tx,r=this.device.getCommands().typedCall.bind(this.device.getCommands()),s=yield r("NervosSignTx","NervosSignedTx",{address_n:this.params.address_n,data_initial_chunk:i.subarray(0,t).toString("hex"),data_length:e,witness_buffer:this.params.witness_buffer,network:this.params.network});return this.processTxRequest(r,s,i,t)}))}},dnxGetAddress:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){var e;this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt],this.hasBundle=!!(null===(e=this.payload)||void 0===e?void 0:e.bundle);const t=this.hasBundle?this.payload:{bundle:[this.payload]};ei(t,[{name:"bundle",type:"array"}]),this.params=[],t.bundle.forEach((e=>{var t;const i=te(e.path,3);ei(e,[{name:"path",required:!0},{name:"showOnOneKey",type:"boolean"}]);const r=null===(t=e.showOnOneKey)||void 0===t||t;this.params.push({address_n:i,show_display:r})}))}getVersionRange(){return{classic:{min:"3.8.0"}}}run(){return K(this,void 0,void 0,(function*(){const e=[];for(let t=0;t<this.params.length;t++){const i=this.params[t],r=yield this.device.commands.typedCall("DnxGetAddress","DnxAddress",Object.assign({},i)),{address:s}=r.message,n={path:ee(i.address_n),address:s};e.push(n),this.postPreviousAddressMessage(n)}return Promise.resolve(this.hasBundle?e:e[0])}))}},dnxSignTransaction:class extends Ht{constructor(){super(...arguments),this.hasBundle=!1}init(){this.checkDeviceId=!0,this.notAllowDeviceMode=[...this.notAllowDeviceMode,kt];const{payload:e}=this,t=te(e.path,3);if(ei(e,[{name:"path",required:!0},{name:"inputs",type:"array",required:!0},{name:"toAddress",type:"string",required:!0},{name:"amount",required:!0},{name:"fee",required:!0},{name:"paymentIdHex",type:"string"}]),e.paymentIdHex&&64!==Vt(e.paymentIdHex).length)throw new Error("Payment ID must be 32 bytes long");this.params={address_n:t,inputs_count:e.inputs.length,to_address:e.toAddress,amount:e.amount,fee:e.fee},e.paymentIdHex&&(this.params.payment_id=Vt(e.paymentIdHex))}getVersionRange(){return{classic:{min:"3.8.0"}}}processTxRequest(e,t,i){var r,s;return K(this,void 0,void 0,(function*(){if("DnxInputRequest"===t.type){const{inputs:n}=this.payload,{request_index:a,tx_key:o,computed_key_image:d}=t.message;if((null==o?void 0:o.ephemeral_tx_sec_key)&&(null==o?void 0:o.ephemeral_tx_pub_key)&&(i=Object.assign(Object.assign({},i),{txKey:{ephemeralTxSecKey:o.ephemeral_tx_sec_key,ephemeralTxPubKey:o.ephemeral_tx_pub_key}})),(null==d?void 0:d.key_image)&&(i=Object.assign(Object.assign({},i),{computedKeyImages:[...null!==(r=i.computedKeyImages)&&void 0!==r?r:[],d.key_image]})),a){const t=n[a-1],r=yield e("DnxInputAck","DnxInputRequest",{prev_index:t.prevIndex,global_index:t.globalIndex,tx_pubkey:t.txPubkey,prev_out_pubkey:t.prevOutPubkey,amount:t.amount});return this.processTxRequest(e,r,i)}const p=yield e("DnxRTSigsRequest","DnxSignedTx",{});if(null==i.txKey||null==i.txKey.ephemeralTxSecKey||null==i.txKey.ephemeralTxPubKey)throw new Error("signatures or tx_key missing in response");return{path:ee(this.params.address_n),txKey:i.txKey,computedKeyImages:null!==(s=i.computedKeyImages)&&void 0!==s?s:[],signatures:p.message.signatures,outputKeys:p.message.output_keys}}throw new Error("Unexpected response")}))}run(){return K(this,void 0,void 0,(function*(){const e=this.device.getCommands().typedCall.bind(this.device.getCommands()),t=yield this.device.commands.typedCall("DnxSignTx","DnxInputRequest",Object.assign({},this.params));return this.processTxRequest(e,t,{})}))}}});const Or=Be(t.d0.DeviceConnector);class Cr{constructor(){this.listenTimestamp=0,this.current=null,this.upcoming=[],this.listening=!1,xt.load(),this.transport=xt.getTransport(),bt.setConnector(this)}enumerate(){return K(this,void 0,void 0,(function*(){try{const e=yield this.transport.enumerate();return this.upcoming=e,this._reportDevicesChange(),{descriptors:e}}catch(e){ti(e)}}))}listen(){return K(this,void 0,void 0,(function*(){const e=null!==this.current,t=this.current||[];let i;this.listening=!0;try{if(Or.debug("Start listening",t),this.listenTimestamp=(new Date).getTime(),i=e?yield this.transport.listen(t):yield this.transport.enumerate(),!this.listening)return;this.upcoming=i,Or.debug("Listen result",i),this._reportDevicesChange(),this.listening&&this.listen()}catch(e){const t=(new Date).getTime()-this.listenTimestamp;Or.debug("Listen error","timestamp",t,typeof e),t>1100?(yield(r=1e3,s=null,new Promise((e=>{setTimeout(e,r,s)}))),this.listening&&this.listen()):Or.warn("Transport error")}var r,s}))}stop(){this.listening=!1}acquire(e,t,i){return K(this,void 0,void 0,(function*(){Or.debug("acquire",e,t);const r=Ke.getSettings("env");try{let s;return s=Ke.isBleConnect(r)?yield this.transport.acquire({uuid:e,forceCleanRunPromise:i}):yield this.transport.acquire({path:e,previous:null!=t?t:null}),s}catch(e){Or.debug("acquire error: ",e.message),ti(e)}}))}release(e,t){return K(this,void 0,void 0,(function*(){try{return yield this.transport.release(e,t)}catch(e){ti(e)}}))}_reportDevicesChange(){bt.reportDeviceChange(this.upcoming)}}const kr=Be(t.d0.Core),qr=e=>{var t;return{initSession:null==e?void 0:e.payload.initSession,passphraseState:null==e?void 0:e.payload.passphraseState,deviceId:null==e?void 0:e.payload.deviceId,deriveCardano:(null==e?void 0:e.name.startsWith("cardano"))||(null===(t=null==e?void 0:e.payload)||void 0===t?void 0:t.deriveCardano)}};let Ir,Dr,Pr,Nr,Br=[];const Lr=[],Fr=new Map;let jr=1;const Ur={};let Hr={passphraseState:void 0};const Kr=e=>K(void 0,void 0,void 0,(function*(){var t;if(!e.id||!e.payload||e.type!==pt.CALL)return Promise.reject(n.ERRORS.TypedError("on call: message.id or message.payload is missing"));let i,r;try{i=function(e){const{method:t}=e.payload;if("string"!=typeof t)throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,"Method is not set");const i=Ar[t];if(i)return new i(e);throw n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodInvalidParameter,`Method ${t} is not set`)}(e),i.connector=Pr,i.postMessage=os,i.init()}catch(e){return Promise.reject(e)}if(bt.emitter.on(ht.CONNECT,Qr),!i.useDevice)try{const e=yield i.run();return lt(i.responseID,!0,e)}catch(e){return lt(i.responseID,!1,{error:e})}Lr.push(i),Lr.length>1&&kr.debug("should cancel the previous method execution: ",Lr.map((e=>e.name)));const s=Hr.passphraseState!==i.payload.passphraseState;let a;Hr={passphraseState:i.payload.passphraseState},(s||i.payload.initSession)&&(kr.debug("passphrase state change, clear device cache"),bt.clearDeviceCache(i.payload.connectId)),Ur[jr]&&(Ur[jr]=!1),jr+=1;try{a=yield Yr(i,jr)}catch(e){return lt(i.responseID,!1,{error:e})}kr.debug("Call API - setDevice: ",a.mainId),null===(t=i.setDevice)||void 0===t||t.call(i,a),a.on(ht.PIN,ts),a.on(ht.BUTTON,is),a.on(ht.PASSPHRASE,e.payload.useEmptyPassphrase?ns:ss),a.on(ht.PASSPHRASE_ON_DEVICE,as),a.on(ht.FEATURES,rs);try{const e=()=>K(void 0,void 0,void 0,(function*(){var e;const t=We(a.features),s=ze(a.features),o=i.getVersionRange()[t],d=i.getVersionRange()[s],p=null!=o?o:d;if(a.features){yield Ke.checkAndReloadData();const e=Ke.getFirmwareStatus(a.features),t=Ke.getBLEFirmwareStatus(a.features);if(("required"===e||"required"===t)&&!1===i.skipForceUpdateCheck)throw n.ERRORS.TypedError(n.HardwareErrorCode.NewFirmwareForceUpdate,"Device firmware version is too low, please update to the latest version",{connectId:i.connectId,deviceId:i.deviceId});if(p){const t=Xe(a.features).join(".");if(T.default.valid(p.min)&&T.default.lt(t,p.min)){if("none"===e||"valid"===e)throw n.ERRORS.TypedError(n.HardwareErrorCode.NewFirmwareUnRelease);return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodNeedUpgradeFirmware,`Device firmware version is too low, please update to ${p.min}`,{current:t,require:p.min}))}if(p.max&&T.default.valid(p.max)&&T.default.gte(t,p.max))return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodDeprecated,`Device firmware version is too high, this method has been deprecated in ${p.max}`,{current:t,deprecated:p.max}))}}const u=a.hasUnexpectedMode(i.notAllowDeviceMode,i.requireDeviceMode);if(u)return u===ot.NOT_IN_BOOTLOADER?Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceUnexpectedBootloaderMode)):Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceUnexpectedMode,u));if(i.deviceId&&i.checkDeviceId){if(!a.checkDeviceId(i.deviceId))return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceCheckDeviceIdError))}if(i.checkFirmwareRelease(),i.checkDeviceSupportFeature(),Dr&&(yield xt.reconfigure(a.features)),$r(i,a.features),a.hasUsePassphrase()&&i.useDevicePassphraseState){const t=(e=>{if(!e)return{support:!1};const t=We(e);if("touch"===t||"pro"===t)return{support:!0};const i=Xe(e).join(".");return{support:T.default.gte(i,"2.4.0"),require:"2.4.0"}})(a.features);if(!t.support)return Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceNotSupportPassphrase,`Device not support passphrase, please update to ${t.require}`,{require:t.require}));const r=yield a.checkPassphraseStateSafety(null===(e=i.payload)||void 0===e?void 0:e.passphraseState);if($r(i,a.features),!r)return bt.clearDeviceCache(i.payload.connectId),Promise.reject(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceCheckPassphraseStateError))}try{yield i.checkSafetyLevelOnTestNet()}catch(e){const t=e instanceof n.HardwareError?e:n.ERRORS.TypedError(n.HardwareErrorCode.RuntimeError,"open safety check failed.");return r=lt(i.responseID,!1,{error:t}),void(null==Nr||Nr.resolve(r))}try{const e=yield i.run();kr.debug("Call API - Inner Method Run: "),r=lt(i.responseID,!0,e),null==Nr||Nr.resolve(r)}catch(e){kr.debug("Call API - Inner Method Run Error: ",e),r=lt(i.responseID,!1,{error:e}),null==Nr||Nr.resolve(r)}}));kr.debug("Call API - Device Run: ",a.mainId);const t=Object.assign({keepSession:i.payload.keepSession},qr(i)),s=()=>a.run(e,t);Nr=n.createDeferred(s);try{return yield Nr.promise}catch(e){return kr.debug("Device Run Error: ",e),lt(i.responseID,!1,{error:e})}}catch(e){r=lt(i.responseID,!1,{error:e}),null==Nr||Nr.reject(n.ERRORS.TypedError(n.HardwareErrorCode.CallMethodError,e.message)),kr.debug("Call API - Run Error: ",e)}finally{r&&i&&i.dispose();const e=i.responseID?Lr.findIndex((e=>e.responseID===i.responseID)):-1;e>-1&&(Lr.splice(e,1),kr.debug("Remove the finished method from the queue ",Lr.map((e=>e.name)))),Zr(),Xr(),Jr(a)}}));function Gr(e){if(!Dr)throw n.ERRORS.TypedError(n.HardwareErrorCode.DeviceListNotInitialized);let t;const i=Dr.allDevices();if(e.connectId)t=Dr.getDevice(e.connectId);else if(1===i.length)[t]=i;else if(i.length>1)throw n.ERRORS.TypedError("firmwareUpdateV2"===e.name?n.HardwareErrorCode.FirmwareUpdateLimitOneDevice:n.HardwareErrorCode.SelectDevice);if(!t)throw n.ERRORS.TypedError(n.HardwareErrorCode.DeviceNotFound);return t.deviceConnector=Pr,t}function zr(e){if(!e.connectId&&!Dr)throw n.ERRORS.TypedError(n.HardwareErrorCode.DeviceListNotInitialized);if(!e.connectId)return Gr(e);let t;return Fr.has(e.connectId)?t=Fr.get(e.connectId):(t=Bt.fromDescriptor({id:e.connectId}),Fr.set(e.connectId,t)),t.deviceConnector=Pr,t}let Wr=0;function Vr(e,t){return K(this,void 0,void 0,(function*(){try{yield t.acquire(),yield t.initialize(qr(e))}catch(i){if(!(i.errorCode===n.HardwareErrorCode.BleTimeoutError&&Wr<=5))throw i;Wr+=1,kr.debug(`Bletooth connect timeout and will retry, retry count: ${Wr}`),yield Le(3e3),yield Vr(e,t)}}))}const Yr=(e,t)=>K(void 0,void 0,void 0,(function*(){let i=0;const r=e.payload&&e.payload.retryCount||5,s=e.payload&&e.payload.pollIntervalTime||1e3,a=e.payload&&e.payload.timeout||1e4;let o=null;kr.debug(`EnsureConnected function start, MAX_RETRY_COUNT=${r}, POLL_INTERVAL_TIME=${s}  `);const d=(r=s)=>K(void 0,void 0,void 0,(function*(){return new Promise(((s,p)=>K(void 0,void 0,void 0,(function*(){if(!Ur[t])return kr.debug("EnsureConnected function stop, polling id: ",t),void p(n.ERRORS.TypedError(n.HardwareErrorCode.PollingStop));o&&clearTimeout(o),o=setTimeout((()=>{p(n.ERRORS.TypedError(n.HardwareErrorCode.PollingTimeout))}),a),i+=1,kr.debug("EnsureConnected function try count: ",i," poll interval time: ",r);try{yield function(e){return K(this,void 0,void 0,(function*(){const t=Ke.getSettings("env");Ke.isBleConnect(t)&&e.connectId?yield xt.configure():(Dr||(Dr=new Lt,yield xt.configure(),Dr.connector=Pr),yield Dr.getDeviceLists(e.connectId,qr(e)))}))}(e)}catch(e){if(kr.debug("device list error: ",e),[n.HardwareErrorCode.BridgeNotInstalled,n.HardwareErrorCode.BridgeTimeoutError].includes(e.errorCode))return Dr=void 0,void p(e);e.errorCode===n.HardwareErrorCode.TransportNotConfigured&&(yield xt.configure())}const u=Ke.getSettings("env");let l;try{if(l=Ke.isBleConnect(u)?zr(e):Gr(e),l)return o&&clearTimeout(o),Ke.isBleConnect(u)&&(Wr=0,yield Vr(e,l)),void s(l)}catch(e){if(kr.debug("device error: ",e),[n.HardwareErrorCode.BlePermissionError,n.HardwareErrorCode.BleLocationError,n.HardwareErrorCode.BleLocationServicesDisabled,n.HardwareErrorCode.BleDeviceNotBonded,n.HardwareErrorCode.BleDeviceBondError,n.HardwareErrorCode.BleCharacteristicNotifyError,n.HardwareErrorCode.BleTimeoutError,n.HardwareErrorCode.BleWriteCharacteristicError,n.HardwareErrorCode.BleAlreadyConnected,n.HardwareErrorCode.FirmwareUpdateLimitOneDevice].includes(e.errorCode))return void p(e)}return i>5?(o&&clearTimeout(o),kr.debug("EnsureConnected get to max try count, will return: ",i),void p(n.ERRORS.TypedError(n.HardwareErrorCode.DeviceNotFound))):setTimeout((()=>s(d(1.5*r))),r)}))))}));return Ur[t]=!0,d()})),$r=(e,t)=>{if(e.useDevicePassphraseState){if(!0===(null==t?void 0:t.passphrase_protection)&&(null==e.payload.passphraseState||""===e.payload.passphraseState)&&!e.payload.useEmptyPassphrase)throw bt.clearDeviceCache(e.payload.connectId),n.ERRORS.TypedError(n.HardwareErrorCode.DeviceOpenedPassphrase);if(!1===(null==t?void 0:t.passphrase_protection)&&e.payload.passphraseState)throw bt.clearDeviceCache(e.payload.connectId),n.ERRORS.TypedError(n.HardwareErrorCode.DeviceNotOpenedPassphrase)}},Xr=()=>{Br=[],kr.debug("Cleanup...")},Jr=e=>{e.removeAllListeners(),bt.emitter.removeAllListeners(ht.CONNECT)},Zr=()=>{os(dt(ot.CLOSE_UI_WINDOW))},Qr=e=>{const t=Ke.getSettings("env"),i=Ke.isBleConnect(t)?e:e.toMessageObject();os(gt(ht.CONNECT,{device:i}))},es=e=>{const t=Ke.getSettings("env"),i=Ke.isBleConnect(t)?e:e.toMessageObject();os(gt(ht.DISCONNECT,{device:i}))},ts=(...[e,t,i])=>K(void 0,void 0,void 0,(function*(){kr.debug("onDevicePinHandler");const r=ds(ct.RECEIVE_PIN,e);os(dt(ot.REQUEST_PIN,{device:e.toMessageObject(),type:t}));const s=yield r.promise;i(null,s.payload)})),is=(...[e,t])=>{os(gt(ht.BUTTON,Object.assign(Object.assign({},t),{device:e.toMessageObject()}))),"ButtonRequest_PinEntry"===t.code?os(dt(ot.REQUEST_PIN,{device:e.toMessageObject(),type:"ButtonRequest_PinEntry"})):os(dt(ot.REQUEST_BUTTON,{device:e.toMessageObject()}))},rs=(...[e,t])=>{os(gt(ht.FEATURES,Object.assign({},t)))},ss=(...[e,t])=>K(void 0,void 0,void 0,(function*(){kr.debug("onDevicePassphraseHandler");const i=ds(ct.RECEIVE_PASSPHRASE,e);os(dt(ot.REQUEST_PASSPHRASE,{device:e.toMessageObject(),passphraseState:e.passphraseState}));const r=yield i.promise,{value:s,passphraseOnDevice:n,save:a}=r.payload;t({passphrase:s.normalize("NFKD"),passphraseOnDevice:n,cache:a})})),ns=(...[e,t])=>{kr.debug("onEmptyPassphraseHandler"),t({passphrase:""})},as=(...[e])=>{os(dt(ot.REQUEST_PASSPHRASE_ON_DEVICE,{device:e.toMessageObject(),passphraseState:e.passphraseState}))},os=e=>{Ir.emit(nt,e)},ds=(e,t)=>{const i=n.createDeferred(e,t);return Br.push(i),i};class ps extends w.exports{handleMessage(e){var t,i,r,s;return K(this,void 0,void 0,(function*(){switch(e.type){case ct.RECEIVE_PIN:case ct.RECEIVE_PASSPHRASE:{const t=(a=e.type,Br.find((e=>e.id===a)));t&&(t.resolve(e),n=t,Br=Br.filter((e=>e!==n)));break}case ot.BLUETOOTH_PERMISSION:case ot.LOCATION_PERMISSION:case ot.LOCATION_SERVICE_PERMISSION:os(e);break;case pt.CALL:{const n=yield Kr(e),{success:a,payload:o}=n;return a?n:Object.assign(Object.assign({},n),{payload:Object.assign(Object.assign({},o),{connectId:null!==(i=null===(t=e.payload)||void 0===t?void 0:t.connectId)&&void 0!==i?i:"",deviceId:null!==(s=null===(r=e.payload)||void 0===r?void 0:r.deviceId)&&void 0!==s?s:""})})}case pt.CANCEL:(e=>{const t=Ke.getSettings("env");try{if(e){let i;i=Ke.isBleConnect(t)?zr({connectId:e}):Gr({connectId:e}),null==i||i.interruptionFromUser()}}catch(e){kr.error("Cancel API Error: ",e)}Xr(),Zr()})(e.payload.connectId)}var n,a;return Promise.resolve(e)}))}dispose(){}}t.rF=at,t.zG=ot,t.Sy=ct},520161:(e,t)=>{"use strict";function i(e,t,i,r){return new(i||(i=Promise))((function(s,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function o(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}d((r=r.apply(e,t||[])).next())}))}Object.defineProperty(t,"__esModule",{value:!0}),"function"==typeof SuppressedError&&SuppressedError;class r extends Error{constructor(e){var t;super(),this.errorCode=s.UnknownError,this.message="",this.params={};const i=n;if(this.message=i[s.UnknownError],"string"==typeof e)this.errorCode=s.UnknownError,this.message=e;else{const s=null!==(t=e.message||i[e.errorCode])&&void 0!==t?t:"";s&&(this.message=(a=e,"string"!=typeof(r=s)?r:r.replace(/\{([^}]+)\}/g,((e,t)=>a[t]||"?")))),this.params=e.params,this.errorCode=e.errorCode}var r,a;this.name="HardwareError"}}const s={UnknownError:0,DeviceFwException:101,DeviceUnexpectedMode:102,DeviceListNotInitialized:103,SelectDevice:104,DeviceNotFound:105,DeviceInitializeFailed:106,DeviceInterruptedFromOutside:107,DeviceUnexpectedBootloaderMode:108,DeviceInterruptedFromUser:109,DeviceCheckDeviceIdError:110,DeviceNotSupportPassphrase:111,DeviceCheckPassphraseStateError:112,DeviceNotOpenedPassphrase:113,DeviceOpenedPassphrase:114,NotInitialized:200,IFrameNotInitialized:300,IFrameAleradyInitialized:301,IFrameLoadFail:302,IframeTimeout:303,IframeBlocked:304,CallMethodError:400,CallMethodNotResponse:404,CallMethodInvalidParameter:405,FirmwareUpdateDownloadFailed:406,CallMethodNeedUpgradeFirmware:407,CallMethodDeprecated:408,FirmwareUpdateLimitOneDevice:409,FirmwareUpdateManuallyEnterBoot:410,FirmwareUpdateAutoEnterBootFailure:411,NewFirmwareUnRelease:412,UseDesktopToUpdateFirmware:413,NewFirmwareForceUpdate:414,NetworkError:500,TransportNotConfigured:600,TransportCallInProgress:601,TransportNotFound:602,TransportInvalidProtobuf:603,BleScanError:700,BlePermissionError:701,BleLocationError:702,BleRequiredUUID:703,BleConnectedError:704,BleDeviceNotBonded:705,BleServiceNotFound:706,BleCharacteristicNotFound:707,BleMonitorError:708,BleCharacteristicNotifyError:709,BleWriteCharacteristicError:710,BleAlreadyConnected:711,BleLocationServicesDisabled:712,BleTimeoutError:713,BleForceCleanRunPromise:714,BleDeviceBondError:715,RuntimeError:800,PinInvalid:801,PinCancelled:802,ActionCancelled:803,FirmwareError:804,ResponseUnexpectTypeError:805,BridgeNetworkError:806,BridgeTimeoutError:807,BridgeNotInstalled:808,PollingTimeout:809,PollingStop:810,BlindSignDisabled:811,UnexpectPassphrase:812,FileAlreadyExists:813,CheckDownloadFileError:814,NotInSigningMode:815,DataOverload:816,LowlevelTrasnportConnectError:900},n={[s.UnknownError]:"Unknown error occurred. Check message property.",[s.DeviceFwException]:"Firmware version mismatch",[s.DeviceUnexpectedMode]:"Device unexpected mode",[s.DeviceListNotInitialized]:"Device list is not initialized",[s.SelectDevice]:"Please select the connected device",[s.DeviceNotFound]:"Device not found",[s.DeviceInitializeFailed]:"Device initialization failed",[s.DeviceInterruptedFromOutside]:"Device interrupted",[s.DeviceInterruptedFromUser]:"Device interrupted",[s.DeviceUnexpectedBootloaderMode]:"Device should be in bootloader mode",[s.DeviceCheckDeviceIdError]:"Device Id in the features is not same.",[s.DeviceNotSupportPassphrase]:"Device not support passphrase",[s.DeviceCheckPassphraseStateError]:"Device passphrase state error",[s.DeviceNotOpenedPassphrase]:"Device not opened passphrase",[s.DeviceOpenedPassphrase]:"Device opened passphrase",[s.NotInitialized]:"Not initialized",[s.IFrameNotInitialized]:"IFrame not initialized",[s.IFrameAleradyInitialized]:"IFrame alerady initialized",[s.IFrameLoadFail]:"IFrame load fail",[s.IframeTimeout]:"init iframe time out",[s.IframeBlocked]:"IFrame blocked",[s.CallMethodError]:"Runtime errors during method execution",[s.CallMethodNotResponse]:"Method does not responding",[s.CallMethodInvalidParameter]:"Call method invalid parameter",[s.FirmwareUpdateDownloadFailed]:"Firmware update download failed",[s.CallMethodNeedUpgradeFirmware]:"Call method need upgrade firmware",[s.CallMethodDeprecated]:"Call method is deprecated",[s.FirmwareUpdateLimitOneDevice]:"Only one device can be connected during firmware upgrade",[s.FirmwareUpdateManuallyEnterBoot]:"You need to manually enter boot",[s.FirmwareUpdateAutoEnterBootFailure]:"Description Failed to automatically enter boot",[s.NewFirmwareUnRelease]:"new firmware has not been released yet",[s.NewFirmwareForceUpdate]:"new firmware has been released, please update",[s.UseDesktopToUpdateFirmware]:"Please use OneKey desktop client to update the firmware",[s.NetworkError]:"Network request error",[s.TransportNotConfigured]:"Transport not configured",[s.TransportCallInProgress]:"Transport call in progress",[s.TransportNotFound]:"Transport not found",[s.TransportInvalidProtobuf]:"Transport invalid protobuf",[s.BleScanError]:"BLE scan error",[s.BlePermissionError]:"Bluetooth required to be turned on",[s.BleLocationError]:"Location permissions for the application are not available",[s.BleRequiredUUID]:"uuid is required",[s.BleConnectedError]:"connected error is always runtime error",[s.BleDeviceNotBonded]:"device is not bonded",[s.BleServiceNotFound]:"BLEServiceNotFound: service not found",[s.BleCharacteristicNotFound]:"BLEServiceNotFound: service not found",[s.BleMonitorError]:"Monitor Error: characteristic not found",[s.BleCharacteristicNotifyError]:"Characteristic Notify Error",[s.BleWriteCharacteristicError]:"Write Characteristic Error",[s.BleAlreadyConnected]:"Already connected to device",[s.BleLocationServicesDisabled]:"Location Services disabled",[s.BleTimeoutError]:"The connection has timed out unexpectedly.",[s.BleForceCleanRunPromise]:"Force clean Bluetooth run promise",[s.BleDeviceBondError]:"Bluetooth pairing failed",[s.RuntimeError]:"Runtime error",[s.PinInvalid]:"Pin invalid",[s.PinCancelled]:"Pin cancelled",[s.ActionCancelled]:"Action cancelled by user",[s.FirmwareError]:"Firmware installation failed",[s.ResponseUnexpectTypeError]:"Response type is not expected",[s.BridgeNetworkError]:"Bridge network error",[s.BridgeTimeoutError]:"Bridge network timeout",[s.BridgeNotInstalled]:"Bridge not installed",[s.PollingTimeout]:"Polling timeout",[s.PollingStop]:"Polling stop",[s.BlindSignDisabled]:"Please confirm the BlindSign enabled",[s.UnexpectPassphrase]:"Unexpect passphrase",[s.FileAlreadyExists]:"File already exists",[s.CheckDownloadFileError]:"Check download file error",[s.NotInSigningMode]:"not in signing mode",[s.DataOverload]:"Params data overload",[s.LowlevelTrasnportConnectError]:"Lowlevel transport connect error"},a=(e,t,i)=>new r("string"==typeof e?e:{errorCode:e,message:null!=t?t:"",params:i}),o=e=>e&&e.error instanceof r?{error:e.error.message,code:e.error.errorCode,params:e.error.params}:e&&e.error instanceof Error?{error:e.error.message,code:e.error.code}:e,d=e=>{for(const t of Object.values(s))if(n[t]===e)return a(t);return new r(e)};var p=Object.freeze({__proto__:null,HardwareError:r,HardwareErrorCode:s,HardwareErrorCodeMessage:n,TypedError:a,serializeError:o,CreateErrorByMessage:d});t.CreateErrorByMessage=d,t.ERRORS=p,t.HardwareError=r,t.HardwareErrorCode=s,t.HardwareErrorCodeMessage=n,t.TypedError=a,t.createDeferred=function(e,t){let r,s=e=>{},n=e=>{};const a=new Promise(((t,a)=>i(this,void 0,void 0,(function*(){if(s=t,n=a,"function"==typeof e)try{yield e()}catch(e){a(e)}"string"==typeof e&&(r=e)}))));return{id:r,data:t,resolve:s,reject:n,promise:a}},t.serializeError=o},301805:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(403956),s=i(343720),n=i(634779),a=i(348764);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var p=d(r),u=d(s),l=o(n);"function"==typeof SuppressedError&&SuppressedError;const c=["bool","string","bytes","int32","int64","uint32","uint64","sint32","sint64","fixed32","fixed64","sfixed32","sfixed64","double","float"],y=e=>c.includes(e),h=(e,t)=>e.optional&&void 0===t?null:"bytes"===e.type?l.default.wrap(t).toString("hex"):e.long?Number.isSafeInteger(t.toNumber())?t.toNumber():t.toString():t;function g(e,t){const i=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]])}return i}(e,[]),r={};return Object.keys(t).forEach((e=>{const s=t[e],n=i[e];if(s.repeated)if(y(s.type))r[e]=n.map((e=>h(s,e)));else if("valuesById"in s.resolvedType)r[e]=n;else{if(!("fields"in s.resolvedType))throw new Error(`case not handled for repeated key: ${e}`);r[e]=n.map((e=>g(e,s.resolvedType.fields)))}else if(y(s.type))r[e]=h(s,n);else if("valuesById"in s.resolvedType)r[e]=s.resolvedType.valuesById[n];else{if(!s.resolvedType.fields)throw new Error(`case not handled: ${e}`);r[e]=g(n,s.resolvedType.fields)}})),r}const m=(e,t)=>{const i=t.toBuffer(),r=new Uint8Array(i),s=e.decode(r);return g(s,s.$type.fields)},f=(e,t)=>{if("bytes"===e)return"string"!=typeof t||t?a.Buffer.from(t,"hex"):t;if("number"==typeof t&&!Number.isSafeInteger(t))throw new RangeError("field value is not within safe integer range");return t};function _(e,t){const i={};return e.fields?(Object.keys(e.fields).forEach((r=>{const s=e.fields[r],n=t[r];if(void 0!==n)if(y(s.type))s.repeated?i[r]=n.map((e=>f(s.type,e))):i[r]=f(s.type,n);else if(s.repeated){const t=e.lookupTypeOrEnum(s.type);i[r]=n.map((e=>_(t,e)))}else if("object"==typeof n&&null!==n){const t=e.lookupType(s.type);i[r]=_(t,n)}else if("number"==typeof n){const t=e.lookupEnum(s.type);i[r]=t.values[n]}else i[r]=n})),i):i}const v=(e,t)=>{const i=_(e,t),r=e.fromObject(i),s=e.encode(r).finish(),n=new l.default(s.byteLength);return n.append(s),n.reset(),n};const T=(e,t)=>{const i=e.lookupType(t);let r=e.lookupEnum("MessageType").values[`MessageType_${t}`];return!r&&i.options&&(r=i.options["(wire_type)"]),{Message:i,messageType:r}},b=(e,t)=>{const i=e.lookupEnum("MessageType").valuesById[t].replace("MessageType_","");return{Message:e.lookupType(i),messageName:i}},S=35,E=8,R=63,M=e=>{const{typeId:t}=(e=>({typeId:e.readUint16(),length:e.readUint32()}))(e);return{typeId:t,buffer:e}};var x=Object.freeze({__proto__:null,decode:M,decodeChunked:e=>{const t=l.default.wrap(e,void 0,void 0,!0),{sharp1:i,sharp2:r,typeId:s,length:n}=(e=>({sharp1:e.readByte(),sharp2:e.readByte(),typeId:e.readUint16(),length:e.readUint32()}))(t);if(i!==S||r!==S)throw new Error("Didn't receive expected header signature.");return{length:n,typeId:s,restBuffer:t}}});function w(e,t){const{addTrezorHeaders:i,chunked:r,messageType:s}=t,n=(i?E:E-2)+e.limit,a=new l.default(n);if(i&&(a.writeByte(S),a.writeByte(S)),a.writeUint16(s),a.writeUint32(e.limit),a.append(e.buffer),a.reset(),!1===r)return a;const o=[],d=R,p=Math.floor((a.limit-1)/d)+1||1;for(let e=0;e<p;e++){const t=e*d,i=Math.min((e+1)*d,a.limit),r=a.slice(t,i);r.compact(),o.push(r.buffer)}return o}const A=(e,t,i)=>{const{Message:r,messageType:s}=T(e,t);return w(v(r,i),{addTrezorHeaders:!0,chunked:!0,messageType:s})};const O="Wrong result type.";function C(e){if(null==e)return null;if("string"!=typeof e)throw new Error(O);return e}var k,q,I,D,P,N,B,L,F,j,U,H,K,G,z,W,V,Y,$,X,J,Z,Q,ee,te,ie,re,se,ne,ae,oe,de,pe,ue,le,ce,ye,he,ge,me,fe,_e,ve,Te,be,Se,Ee,Re,Me,xe=Object.freeze({__proto__:null,info:function(e){if("object"!=typeof e||null==e)throw new Error("Wrong result type.");const{version:t}=e;if("string"!=typeof t)throw new Error(O);return{version:t,configured:!!e.configured}},version:function(e){if("string"!=typeof e)throw new Error(O);return e.trim()},devices:function(e){if("object"!=typeof e)throw new Error(O);if(!(e instanceof Array))throw new Error(O);return e.map((e=>{if("object"!=typeof e||null==e)throw new Error(O);const{path:t}=e;if("string"!=typeof t)throw new Error(O);return{path:t.toString(),session:C(e.session),debugSession:C(e.debugSession),product:e.product,vendor:e.vendor,debug:!!e.debug}}))},acquire:function(e){if("object"!=typeof e||null==e)throw new Error(O);const{session:t}=e;if("string"!=typeof t&&"number"!=typeof t)throw new Error(O);return t.toString()},call:function(e){if("object"!=typeof e||null==e)throw new Error(O);const{type:t}=e;if("string"!=typeof t)throw new Error(O);const{message:i}=e;if("object"!=typeof i||null==i)throw new Error(O);return{type:t,message:i}}});t.BinanceOrderType=void 0,(k=t.BinanceOrderType||(t.BinanceOrderType={}))[k.OT_UNKNOWN=0]="OT_UNKNOWN",k[k.MARKET=1]="MARKET",k[k.LIMIT=2]="LIMIT",k[k.OT_RESERVED=3]="OT_RESERVED",t.BinanceOrderSide=void 0,(q=t.BinanceOrderSide||(t.BinanceOrderSide={}))[q.SIDE_UNKNOWN=0]="SIDE_UNKNOWN",q[q.BUY=1]="BUY",q[q.SELL=2]="SELL",t.BinanceTimeInForce=void 0,(I=t.BinanceTimeInForce||(t.BinanceTimeInForce={}))[I.TIF_UNKNOWN=0]="TIF_UNKNOWN",I[I.GTE=1]="GTE",I[I.TIF_RESERVED=2]="TIF_RESERVED",I[I.IOC=3]="IOC",t.Enum_InputScriptType=void 0,(D=t.Enum_InputScriptType||(t.Enum_InputScriptType={}))[D.SPENDADDRESS=0]="SPENDADDRESS",D[D.SPENDMULTISIG=1]="SPENDMULTISIG",D[D.EXTERNAL=2]="EXTERNAL",D[D.SPENDWITNESS=3]="SPENDWITNESS",D[D.SPENDP2SHWITNESS=4]="SPENDP2SHWITNESS",D[D.SPENDTAPROOT=5]="SPENDTAPROOT",t.Enum_OutputScriptType=void 0,(P=t.Enum_OutputScriptType||(t.Enum_OutputScriptType={}))[P.PAYTOADDRESS=0]="PAYTOADDRESS",P[P.PAYTOSCRIPTHASH=1]="PAYTOSCRIPTHASH",P[P.PAYTOMULTISIG=2]="PAYTOMULTISIG",P[P.PAYTOOPRETURN=3]="PAYTOOPRETURN",P[P.PAYTOWITNESS=4]="PAYTOWITNESS",P[P.PAYTOP2SHWITNESS=5]="PAYTOP2SHWITNESS",P[P.PAYTOTAPROOT=6]="PAYTOTAPROOT",t.DecredStakingSpendType=void 0,(N=t.DecredStakingSpendType||(t.DecredStakingSpendType={}))[N.SSGen=0]="SSGen",N[N.SSRTX=1]="SSRTX",t.AmountUnit=void 0,(B=t.AmountUnit||(t.AmountUnit={}))[B.BITCOIN=0]="BITCOIN",B[B.MILLIBITCOIN=1]="MILLIBITCOIN",B[B.MICROBITCOIN=2]="MICROBITCOIN",B[B.SATOSHI=3]="SATOSHI",t.Enum_RequestType=void 0,(L=t.Enum_RequestType||(t.Enum_RequestType={}))[L.TXINPUT=0]="TXINPUT",L[L.TXOUTPUT=1]="TXOUTPUT",L[L.TXMETA=2]="TXMETA",L[L.TXFINISHED=3]="TXFINISHED",L[L.TXEXTRADATA=4]="TXEXTRADATA",L[L.TXORIGINPUT=5]="TXORIGINPUT",L[L.TXORIGOUTPUT=6]="TXORIGOUTPUT",t.RebootType=void 0,(F=t.RebootType||(t.RebootType={}))[F.Normal=0]="Normal",F[F.Boardloader=1]="Boardloader",F[F.BootLoader=2]="BootLoader",t.CardanoDerivationType=void 0,(j=t.CardanoDerivationType||(t.CardanoDerivationType={}))[j.LEDGER=0]="LEDGER",j[j.ICARUS=1]="ICARUS",j[j.ICARUS_TREZOR=2]="ICARUS_TREZOR",t.CardanoAddressType=void 0,(U=t.CardanoAddressType||(t.CardanoAddressType={}))[U.BASE=0]="BASE",U[U.BASE_SCRIPT_KEY=1]="BASE_SCRIPT_KEY",U[U.BASE_KEY_SCRIPT=2]="BASE_KEY_SCRIPT",U[U.BASE_SCRIPT_SCRIPT=3]="BASE_SCRIPT_SCRIPT",U[U.POINTER=4]="POINTER",U[U.POINTER_SCRIPT=5]="POINTER_SCRIPT",U[U.ENTERPRISE=6]="ENTERPRISE",U[U.ENTERPRISE_SCRIPT=7]="ENTERPRISE_SCRIPT",U[U.BYRON=8]="BYRON",U[U.REWARD=14]="REWARD",U[U.REWARD_SCRIPT=15]="REWARD_SCRIPT",t.CardanoNativeScriptType=void 0,(H=t.CardanoNativeScriptType||(t.CardanoNativeScriptType={}))[H.PUB_KEY=0]="PUB_KEY",H[H.ALL=1]="ALL",H[H.ANY=2]="ANY",H[H.N_OF_K=3]="N_OF_K",H[H.INVALID_BEFORE=4]="INVALID_BEFORE",H[H.INVALID_HEREAFTER=5]="INVALID_HEREAFTER",t.CardanoNativeScriptHashDisplayFormat=void 0,(K=t.CardanoNativeScriptHashDisplayFormat||(t.CardanoNativeScriptHashDisplayFormat={}))[K.HIDE=0]="HIDE",K[K.BECH32=1]="BECH32",K[K.POLICY_ID=2]="POLICY_ID",t.CardanoTxOutputSerializationFormat=void 0,(G=t.CardanoTxOutputSerializationFormat||(t.CardanoTxOutputSerializationFormat={}))[G.ARRAY_LEGACY=0]="ARRAY_LEGACY",G[G.MAP_BABBAGE=1]="MAP_BABBAGE",t.CardanoCertificateType=void 0,(z=t.CardanoCertificateType||(t.CardanoCertificateType={}))[z.STAKE_REGISTRATION=0]="STAKE_REGISTRATION",z[z.STAKE_DEREGISTRATION=1]="STAKE_DEREGISTRATION",z[z.STAKE_DELEGATION=2]="STAKE_DELEGATION",z[z.STAKE_POOL_REGISTRATION=3]="STAKE_POOL_REGISTRATION",t.CardanoPoolRelayType=void 0,(W=t.CardanoPoolRelayType||(t.CardanoPoolRelayType={}))[W.SINGLE_HOST_IP=0]="SINGLE_HOST_IP",W[W.SINGLE_HOST_NAME=1]="SINGLE_HOST_NAME",W[W.MULTIPLE_HOST_NAME=2]="MULTIPLE_HOST_NAME",t.CardanoTxAuxiliaryDataSupplementType=void 0,(V=t.CardanoTxAuxiliaryDataSupplementType||(t.CardanoTxAuxiliaryDataSupplementType={}))[V.NONE=0]="NONE",V[V.GOVERNANCE_REGISTRATION_SIGNATURE=1]="GOVERNANCE_REGISTRATION_SIGNATURE",t.CardanoGovernanceRegistrationFormat=void 0,(Y=t.CardanoGovernanceRegistrationFormat||(t.CardanoGovernanceRegistrationFormat={}))[Y.CIP15=0]="CIP15",Y[Y.CIP36=1]="CIP36",t.CardanoTxSigningMode=void 0,($=t.CardanoTxSigningMode||(t.CardanoTxSigningMode={}))[$.ORDINARY_TRANSACTION=0]="ORDINARY_TRANSACTION",$[$.POOL_REGISTRATION_AS_OWNER=1]="POOL_REGISTRATION_AS_OWNER",$[$.MULTISIG_TRANSACTION=2]="MULTISIG_TRANSACTION",$[$.PLUTUS_TRANSACTION=3]="PLUTUS_TRANSACTION",t.CardanoTxWitnessType=void 0,(X=t.CardanoTxWitnessType||(t.CardanoTxWitnessType={}))[X.BYRON_WITNESS=0]="BYRON_WITNESS",X[X.SHELLEY_WITNESS=1]="SHELLEY_WITNESS",t.FailureType=void 0,(J=t.FailureType||(t.FailureType={}))[J.Failure_UnexpectedMessage=1]="Failure_UnexpectedMessage",J[J.Failure_ButtonExpected=2]="Failure_ButtonExpected",J[J.Failure_DataError=3]="Failure_DataError",J[J.Failure_ActionCancelled=4]="Failure_ActionCancelled",J[J.Failure_PinExpected=5]="Failure_PinExpected",J[J.Failure_PinCancelled=6]="Failure_PinCancelled",J[J.Failure_PinInvalid=7]="Failure_PinInvalid",J[J.Failure_InvalidSignature=8]="Failure_InvalidSignature",J[J.Failure_ProcessError=9]="Failure_ProcessError",J[J.Failure_NotEnoughFunds=10]="Failure_NotEnoughFunds",J[J.Failure_NotInitialized=11]="Failure_NotInitialized",J[J.Failure_PinMismatch=12]="Failure_PinMismatch",J[J.Failure_WipeCodeMismatch=13]="Failure_WipeCodeMismatch",J[J.Failure_InvalidSession=14]="Failure_InvalidSession",J[J.Failure_FirmwareError=99]="Failure_FirmwareError",t.Enum_ButtonRequestType=void 0,(Z=t.Enum_ButtonRequestType||(t.Enum_ButtonRequestType={}))[Z.ButtonRequest_Other=1]="ButtonRequest_Other",Z[Z.ButtonRequest_FeeOverThreshold=2]="ButtonRequest_FeeOverThreshold",Z[Z.ButtonRequest_ConfirmOutput=3]="ButtonRequest_ConfirmOutput",Z[Z.ButtonRequest_ResetDevice=4]="ButtonRequest_ResetDevice",Z[Z.ButtonRequest_ConfirmWord=5]="ButtonRequest_ConfirmWord",Z[Z.ButtonRequest_WipeDevice=6]="ButtonRequest_WipeDevice",Z[Z.ButtonRequest_ProtectCall=7]="ButtonRequest_ProtectCall",Z[Z.ButtonRequest_SignTx=8]="ButtonRequest_SignTx",Z[Z.ButtonRequest_FirmwareCheck=9]="ButtonRequest_FirmwareCheck",Z[Z.ButtonRequest_Address=10]="ButtonRequest_Address",Z[Z.ButtonRequest_PublicKey=11]="ButtonRequest_PublicKey",Z[Z.ButtonRequest_MnemonicWordCount=12]="ButtonRequest_MnemonicWordCount",Z[Z.ButtonRequest_MnemonicInput=13]="ButtonRequest_MnemonicInput",Z[Z._Deprecated_ButtonRequest_PassphraseType=14]="_Deprecated_ButtonRequest_PassphraseType",Z[Z.ButtonRequest_UnknownDerivationPath=15]="ButtonRequest_UnknownDerivationPath",Z[Z.ButtonRequest_RecoveryHomepage=16]="ButtonRequest_RecoveryHomepage",Z[Z.ButtonRequest_Success=17]="ButtonRequest_Success",Z[Z.ButtonRequest_Warning=18]="ButtonRequest_Warning",Z[Z.ButtonRequest_PassphraseEntry=19]="ButtonRequest_PassphraseEntry",Z[Z.ButtonRequest_PinEntry=20]="ButtonRequest_PinEntry",t.Enum_PinMatrixRequestType=void 0,(Q=t.Enum_PinMatrixRequestType||(t.Enum_PinMatrixRequestType={}))[Q.PinMatrixRequestType_Current=1]="PinMatrixRequestType_Current",Q[Q.PinMatrixRequestType_NewFirst=2]="PinMatrixRequestType_NewFirst",Q[Q.PinMatrixRequestType_NewSecond=3]="PinMatrixRequestType_NewSecond",Q[Q.PinMatrixRequestType_WipeCodeFirst=4]="PinMatrixRequestType_WipeCodeFirst",Q[Q.PinMatrixRequestType_WipeCodeSecond=5]="PinMatrixRequestType_WipeCodeSecond",Q[Q.PinMatrixRequestType_BackupFirst=6]="PinMatrixRequestType_BackupFirst",Q[Q.PinMatrixRequestType_BackupSecond=7]="PinMatrixRequestType_BackupSecond",t.EthereumDefinitionType=void 0,(ee=t.EthereumDefinitionType||(t.EthereumDefinitionType={}))[ee.NETWORK=0]="NETWORK",ee[ee.TOKEN=1]="TOKEN",t.EthereumDataTypeOneKey=void 0,(te=t.EthereumDataTypeOneKey||(t.EthereumDataTypeOneKey={}))[te.UINT=1]="UINT",te[te.INT=2]="INT",te[te.BYTES=3]="BYTES",te[te.STRING=4]="STRING",te[te.BOOL=5]="BOOL",te[te.ADDRESS=6]="ADDRESS",te[te.ARRAY=7]="ARRAY",te[te.STRUCT=8]="STRUCT",t.EthereumDataType=void 0,(ie=t.EthereumDataType||(t.EthereumDataType={}))[ie.UINT=1]="UINT",ie[ie.INT=2]="INT",ie[ie.BYTES=3]="BYTES",ie[ie.STRING=4]="STRING",ie[ie.BOOL=5]="BOOL",ie[ie.ADDRESS=6]="ADDRESS",ie[ie.ARRAY=7]="ARRAY",ie[ie.STRUCT=8]="STRUCT",t.Enum_BackupType=void 0,(re=t.Enum_BackupType||(t.Enum_BackupType={}))[re.Bip39=0]="Bip39",re[re.Slip39_Basic=1]="Slip39_Basic",re[re.Slip39_Advanced=2]="Slip39_Advanced",t.Enum_SafetyCheckLevel=void 0,(se=t.Enum_SafetyCheckLevel||(t.Enum_SafetyCheckLevel={}))[se.Strict=0]="Strict",se[se.PromptAlways=1]="PromptAlways",se[se.PromptTemporarily=2]="PromptTemporarily",t.Enum_Capability=void 0,(ne=t.Enum_Capability||(t.Enum_Capability={}))[ne.Capability_Bitcoin=1]="Capability_Bitcoin",ne[ne.Capability_Bitcoin_like=2]="Capability_Bitcoin_like",ne[ne.Capability_Binance=3]="Capability_Binance",ne[ne.Capability_Cardano=4]="Capability_Cardano",ne[ne.Capability_Crypto=5]="Capability_Crypto",ne[ne.Capability_EOS=6]="Capability_EOS",ne[ne.Capability_Ethereum=7]="Capability_Ethereum",ne[ne.Capability_Lisk=8]="Capability_Lisk",ne[ne.Capability_Monero=9]="Capability_Monero",ne[ne.Capability_NEM=10]="Capability_NEM",ne[ne.Capability_Ripple=11]="Capability_Ripple",ne[ne.Capability_Stellar=12]="Capability_Stellar",ne[ne.Capability_Tezos=13]="Capability_Tezos",ne[ne.Capability_U2F=14]="Capability_U2F",ne[ne.Capability_Shamir=15]="Capability_Shamir",ne[ne.Capability_ShamirGroups=16]="Capability_ShamirGroups",ne[ne.Capability_PassphraseEntry=17]="Capability_PassphraseEntry",t.OneKeyDeviceType=void 0,(ae=t.OneKeyDeviceType||(t.OneKeyDeviceType={}))[ae.CLASSIC=0]="CLASSIC",ae[ae.CLASSIC1S=1]="CLASSIC1S",ae[ae.MINI=2]="MINI",ae[ae.TOUCH=3]="TOUCH",ae[ae.PRO=5]="PRO",t.OneKeySeType=void 0,(oe=t.OneKeySeType||(t.OneKeySeType={}))[oe.THD89=0]="THD89",oe[oe.SE608A=1]="SE608A",t.ExportType=void 0,(de=t.ExportType||(t.ExportType={}))[de.SeedEncExportType_NO=0]="SeedEncExportType_NO",de[de.SeedEncExportType_YES=1]="SeedEncExportType_YES",de[de.MnemonicPlainExportType_YES=2]="MnemonicPlainExportType_YES",t.SdProtectOperationType=void 0,(pe=t.SdProtectOperationType||(t.SdProtectOperationType={}))[pe.DISABLE=0]="DISABLE",pe[pe.ENABLE=1]="ENABLE",pe[pe.REFRESH=2]="REFRESH",t.RecoveryDeviceType=void 0,(ue=t.RecoveryDeviceType||(t.RecoveryDeviceType={}))[ue.RecoveryDeviceType_ScrambledWords=0]="RecoveryDeviceType_ScrambledWords",ue[ue.RecoveryDeviceType_Matrix=1]="RecoveryDeviceType_Matrix",t.Enum_WordRequestType=void 0,(le=t.Enum_WordRequestType||(t.Enum_WordRequestType={}))[le.WordRequestType_Plain=0]="WordRequestType_Plain",le[le.WordRequestType_Matrix9=1]="WordRequestType_Matrix9",le[le.WordRequestType_Matrix6=2]="WordRequestType_Matrix6",t.SeedRequestType=void 0,(ce=t.SeedRequestType||(t.SeedRequestType={}))[ce.SeedRequestType_Gen=0]="SeedRequestType_Gen",ce[ce.SeedRequestType_EncExport=1]="SeedRequestType_EncExport",ce[ce.SeedRequestType_EncImport=2]="SeedRequestType_EncImport",t.WL_OperationType=void 0,(ye=t.WL_OperationType||(t.WL_OperationType={}))[ye.WL_OperationType_Add=0]="WL_OperationType_Add",ye[ye.WL_OperationType_Delete=1]="WL_OperationType_Delete",ye[ye.WL_OperationType_Inquire=2]="WL_OperationType_Inquire",t.ResourceType=void 0,(he=t.ResourceType||(t.ResourceType={}))[he.WallPaper=0]="WallPaper",he[he.Nft=1]="Nft",t.NEMMosaicLevy=void 0,(ge=t.NEMMosaicLevy||(t.NEMMosaicLevy={}))[ge.MosaicLevy_Absolute=1]="MosaicLevy_Absolute",ge[ge.MosaicLevy_Percentile=2]="MosaicLevy_Percentile",t.NEMSupplyChangeType=void 0,(me=t.NEMSupplyChangeType||(t.NEMSupplyChangeType={}))[me.SupplyChange_Increase=1]="SupplyChange_Increase",me[me.SupplyChange_Decrease=2]="SupplyChange_Decrease",t.NEMModificationType=void 0,(fe=t.NEMModificationType||(t.NEMModificationType={}))[fe.CosignatoryModification_Add=1]="CosignatoryModification_Add",fe[fe.CosignatoryModification_Delete=2]="CosignatoryModification_Delete",t.NEMImportanceTransferMode=void 0,(_e=t.NEMImportanceTransferMode||(t.NEMImportanceTransferMode={}))[_e.ImportanceTransfer_Activate=1]="ImportanceTransfer_Activate",_e[_e.ImportanceTransfer_Deactivate=2]="ImportanceTransfer_Deactivate",t.StellarAssetType=void 0,(ve=t.StellarAssetType||(t.StellarAssetType={}))[ve.NATIVE=0]="NATIVE",ve[ve.ALPHANUM4=1]="ALPHANUM4",ve[ve.ALPHANUM12=2]="ALPHANUM12",t.StellarMemoType=void 0,(Te=t.StellarMemoType||(t.StellarMemoType={}))[Te.NONE=0]="NONE",Te[Te.TEXT=1]="TEXT",Te[Te.ID=2]="ID",Te[Te.HASH=3]="HASH",Te[Te.RETURN=4]="RETURN",t.StellarSignerType=void 0,(be=t.StellarSignerType||(t.StellarSignerType={}))[be.ACCOUNT=0]="ACCOUNT",be[be.PRE_AUTH=1]="PRE_AUTH",be[be.HASH=2]="HASH",t.TezosContractType=void 0,(Se=t.TezosContractType||(t.TezosContractType={}))[Se.Implicit=0]="Implicit",Se[Se.Originated=1]="Originated",t.TezosBallotType=void 0,(Ee=t.TezosBallotType||(t.TezosBallotType={}))[Ee.Yay=0]="Yay",Ee[Ee.Nay=1]="Nay",Ee[Ee.Pass=2]="Pass",t.TronResourceCode=void 0,(Re=t.TronResourceCode||(t.TronResourceCode={}))[Re.BANDWIDTH=0]="BANDWIDTH",Re[Re.ENERGY=1]="ENERGY",t.CommandFlags=void 0,(Me=t.CommandFlags||(t.CommandFlags={}))[Me.Default=0]="Default",Me[Me.Factory_Only=1]="Factory_Only";var we=Object.freeze({__proto__:null,get BinanceOrderType(){return t.BinanceOrderType},get BinanceOrderSide(){return t.BinanceOrderSide},get BinanceTimeInForce(){return t.BinanceTimeInForce},get Enum_InputScriptType(){return t.Enum_InputScriptType},get Enum_OutputScriptType(){return t.Enum_OutputScriptType},get DecredStakingSpendType(){return t.DecredStakingSpendType},get AmountUnit(){return t.AmountUnit},get Enum_RequestType(){return t.Enum_RequestType},get RebootType(){return t.RebootType},get CardanoDerivationType(){return t.CardanoDerivationType},get CardanoAddressType(){return t.CardanoAddressType},get CardanoNativeScriptType(){return t.CardanoNativeScriptType},get CardanoNativeScriptHashDisplayFormat(){return t.CardanoNativeScriptHashDisplayFormat},get CardanoTxOutputSerializationFormat(){return t.CardanoTxOutputSerializationFormat},get CardanoCertificateType(){return t.CardanoCertificateType},get CardanoPoolRelayType(){return t.CardanoPoolRelayType},get CardanoTxAuxiliaryDataSupplementType(){return t.CardanoTxAuxiliaryDataSupplementType},get CardanoGovernanceRegistrationFormat(){return t.CardanoGovernanceRegistrationFormat},get CardanoTxSigningMode(){return t.CardanoTxSigningMode},get CardanoTxWitnessType(){return t.CardanoTxWitnessType},get FailureType(){return t.FailureType},get Enum_ButtonRequestType(){return t.Enum_ButtonRequestType},get Enum_PinMatrixRequestType(){return t.Enum_PinMatrixRequestType},get EthereumDefinitionType(){return t.EthereumDefinitionType},get EthereumDataTypeOneKey(){return t.EthereumDataTypeOneKey},get EthereumDataType(){return t.EthereumDataType},get Enum_BackupType(){return t.Enum_BackupType},get Enum_SafetyCheckLevel(){return t.Enum_SafetyCheckLevel},get Enum_Capability(){return t.Enum_Capability},get OneKeyDeviceType(){return t.OneKeyDeviceType},get OneKeySeType(){return t.OneKeySeType},get ExportType(){return t.ExportType},get SdProtectOperationType(){return t.SdProtectOperationType},get RecoveryDeviceType(){return t.RecoveryDeviceType},get Enum_WordRequestType(){return t.Enum_WordRequestType},get SeedRequestType(){return t.SeedRequestType},get WL_OperationType(){return t.WL_OperationType},get ResourceType(){return t.ResourceType},get NEMMosaicLevy(){return t.NEMMosaicLevy},get NEMSupplyChangeType(){return t.NEMSupplyChangeType},get NEMModificationType(){return t.NEMModificationType},get NEMImportanceTransferMode(){return t.NEMImportanceTransferMode},get StellarAssetType(){return t.StellarAssetType},get StellarMemoType(){return t.StellarMemoType},get StellarSignerType(){return t.StellarSignerType},get TezosContractType(){return t.TezosContractType},get TezosBallotType(){return t.TezosBallotType},get TronResourceCode(){return t.TronResourceCode},get CommandFlags(){return t.CommandFlags}});const Ae=new Set(["PassphraseAck","PinMatrixAck"]);p.util.Long=u,p.configure();var Oe={check:xe,buildOne:function(e,t,i){const{Message:r,messageType:s}=T(e,t);return w(v(r,i),{addTrezorHeaders:!1,chunked:!1,messageType:s})},buildBuffers:(e,t,i)=>{const r=A(e,t,i),s=[];for(const e of r){const t=new l.default(R+1);t.writeByte(63),t.append(e),t.reset(),s.push(t)}return s},buildEncodeBuffers:A,receiveOne:function(e,t){const i=l.default.wrap(t,"hex"),{typeId:r,buffer:s}=M(i),{Message:n,messageName:a}=b(e,r);return{message:m(n,s),type:a}},parseConfigure:function(e){return"string"==typeof e?p.Root.fromJSON(JSON.parse(e)):p.Root.fromJSON(e)},decodeProtocol:x};t.BUFFER_SIZE=R,t.COMMON_HEADER_SIZE=6,t.HEADER_SIZE=E,t.LogBlockCommand=Ae,t.MESSAGE_HEADER_BYTE=S,t.MESSAGE_TOP_CHAR=63,t.Messages=we,t.default=Oe},669020:function(e,t,i){var r;!function(s){"use strict";var n,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,d=Math.floor,p="[BigNumber Error] ",u=p+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,y=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,m=1e9;function f(e){var t=0|e;return e>0||e===t?t:t-1}function _(e){for(var t,i,r=1,s=e.length,n=e[0]+"";r<s;){for(t=e[r++]+"",i=c-t.length;i--;t="0"+t);n+=t}for(s=n.length;48===n.charCodeAt(--s););return n.slice(0,s+1||1)}function v(e,t){var i,r,s=e.c,n=t.c,a=e.s,o=t.s,d=e.e,p=t.e;if(!a||!o)return null;if(i=s&&!s[0],r=n&&!n[0],i||r)return i?r?0:-o:a;if(a!=o)return a;if(i=a<0,r=d==p,!s||!n)return r?0:!s^i?1:-1;if(!r)return d>p^i?1:-1;for(o=(d=s.length)<(p=n.length)?d:p,a=0;a<o;a++)if(s[a]!=n[a])return s[a]>n[a]^i?1:-1;return d==p?0:d>p^i?1:-1}function T(e,t,i,r){if(e<t||e>i||e!==d(e))throw Error(p+(r||"Argument")+("number"==typeof e?e<t||e>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function b(e){var t=e.c.length-1;return f(e.e/c)==t&&e.c[t]%2!=0}function S(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function E(e,t,i){var r,s;if(t<0){for(s=i+".";++t;s+=i);e=s+e}else if(++t>(r=e.length)){for(s=i,t-=r;--t;s+=i);e+=s}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var i,r,s,n,R,M,x,w,A,O,C=G.prototype={constructor:G,toString:null,valueOf:null},k=new G(1),q=20,I=4,D=-7,P=21,N=-1e7,B=1e7,L=!1,F=1,j=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",K=!0;function G(e,t){var i,n,o,p,l,h,g,m,f=this;if(!(f instanceof G))return new G(e,t);if(null==t){if(e&&!0===e._isBigNumber)return f.s=e.s,void(!e.c||e.e>B?f.c=f.e=null:e.e<N?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(p=0,l=e;l>=10;l/=10,p++);return void(p>B?f.c=f.e=null:(f.e=p,f.c=[e]))}m=String(e)}else{if(!a.test(m=String(e)))return s(f,m,h);f.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(p=m.indexOf("."))>-1&&(m=m.replace(".","")),(l=m.search(/e/i))>0?(p<0&&(p=l),p+=+m.slice(l+1),m=m.substring(0,l)):p<0&&(p=m.length)}else{if(T(t,2,H.length,"Base"),10==t&&K)return Y(f=new G(e),q+f.e+1,I);if(m=String(e),h="number"==typeof e){if(0*e!=0)return s(f,m,h,t);if(f.s=1/e<0?(m=m.slice(1),-1):1,G.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(u+e)}else f.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(i=H.slice(0,t),p=l=0,g=m.length;l<g;l++)if(i.indexOf(n=m.charAt(l))<0){if("."==n){if(l>p){p=g;continue}}else if(!o&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){o=!0,l=-1,p=0;continue}return s(f,String(e),h,t)}h=!1,(p=(m=r(m,t,10,f.s)).indexOf("."))>-1?m=m.replace(".",""):p=m.length}for(l=0;48===m.charCodeAt(l);l++);for(g=m.length;48===m.charCodeAt(--g););if(m=m.slice(l,++g)){if(g-=l,h&&G.DEBUG&&g>15&&(e>y||e!==d(e)))throw Error(u+f.s*e);if((p=p-l-1)>B)f.c=f.e=null;else if(p<N)f.c=[f.e=0];else{if(f.e=p,f.c=[],l=(p+1)%c,p<0&&(l+=c),l<g){for(l&&f.c.push(+m.slice(0,l)),g-=c;l<g;)f.c.push(+m.slice(l,l+=c));l=c-(m=m.slice(l)).length}else l-=g;for(;l--;m+="0");f.c.push(+m)}}else f.c=[f.e=0]}function z(e,t,i,r){var s,n,a,o,d;if(null==i?i=I:T(i,0,8),!e.c)return e.toString();if(s=e.c[0],a=e.e,null==t)d=_(e.c),d=1==r||2==r&&(a<=D||a>=P)?S(d,a):E(d,a,"0");else if(n=(e=Y(new G(e),t,i)).e,o=(d=_(e.c)).length,1==r||2==r&&(t<=n||n<=D)){for(;o<t;d+="0",o++);d=S(d,n)}else if(t-=a,d=E(d,n,"0"),n+1>o){if(--t>0)for(d+=".";t--;d+="0");}else if((t+=n-o)>0)for(n+1==o&&(d+=".");t--;d+="0");return e.s<0&&s?"-"+d:d}function W(e,t){for(var i,r=1,s=new G(e[0]);r<e.length;r++){if(!(i=new G(e[r])).s){s=i;break}t.call(s,i)&&(s=i)}return s}function V(e,t,i){for(var r=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,r++);return(i=r+i*c-1)>B?e.c=e.e=null:i<N?e.c=[e.e=0]:(e.e=i,e.c=t),e}function Y(e,t,i,r){var s,n,a,p,u,y,g,m=e.c,f=h;if(m){e:{for(s=1,p=m[0];p>=10;p/=10,s++);if((n=t-s)<0)n+=c,a=t,g=(u=m[y=0])/f[s-a-1]%10|0;else if((y=o((n+1)/c))>=m.length){if(!r)break e;for(;m.length<=y;m.push(0));u=g=0,s=1,a=(n%=c)-c+1}else{for(u=p=m[y],s=1;p>=10;p/=10,s++);g=(a=(n%=c)-c+s)<0?0:u/f[s-a-1]%10|0}if(r=r||t<0||null!=m[y+1]||(a<0?u:u%f[s-a-1]),r=i<4?(g||r)&&(0==i||i==(e.s<0?3:2)):g>5||5==g&&(4==i||r||6==i&&(n>0?a>0?u/f[s-a]:0:m[y-1])%10&1||i==(e.s<0?8:7)),t<1||!m[0])return m.length=0,r?(t-=e.e+1,m[0]=f[(c-t%c)%c],e.e=-t||0):m[0]=e.e=0,e;if(0==n?(m.length=y,p=1,y--):(m.length=y+1,p=f[c-n],m[y]=a>0?d(u/f[s-a]%f[a])*p:0),r)for(;;){if(0==y){for(n=1,a=m[0];a>=10;a/=10,n++);for(a=m[0]+=p,p=1;a>=10;a/=10,p++);n!=p&&(e.e++,m[0]==l&&(m[0]=1));break}if(m[y]+=p,m[y]!=l)break;m[y--]=0,p=1}for(n=m.length;0===m[--n];m.pop());}e.e>B?e.c=e.e=null:e.e<N&&(e.c=[e.e=0])}return e}function $(e){var t,i=e.e;return null===i?e.toString():(t=_(e.c),t=i<=D||i>=P?S(t,i):E(t,i,"0"),e.s<0?"-"+t:t)}return G.clone=e,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(e){var t,i;if(null!=e){if("object"!=typeof e)throw Error(p+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(T(i=e[t],0,m,t),q=i),e.hasOwnProperty(t="ROUNDING_MODE")&&(T(i=e[t],0,8,t),I=i),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((i=e[t])&&i.pop?(T(i[0],-m,0,t),T(i[1],0,m,t),D=i[0],P=i[1]):(T(i,-m,m,t),D=-(P=i<0?-i:i))),e.hasOwnProperty(t="RANGE"))if((i=e[t])&&i.pop)T(i[0],-m,-1,t),T(i[1],1,m,t),N=i[0],B=i[1];else{if(T(i,-m,m,t),!i)throw Error(p+t+" cannot be zero: "+i);N=-(B=i<0?-i:i)}if(e.hasOwnProperty(t="CRYPTO")){if((i=e[t])!==!!i)throw Error(p+t+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw L=!i,Error(p+"crypto unavailable");L=i}else L=i}if(e.hasOwnProperty(t="MODULO_MODE")&&(T(i=e[t],0,9,t),F=i),e.hasOwnProperty(t="POW_PRECISION")&&(T(i=e[t],0,m,t),j=i),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(i=e[t]))throw Error(p+t+" not an object: "+i);U=i}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(i=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(i))throw Error(p+t+" invalid: "+i);K="0123456789"==i.slice(0,10),H=i}}return{DECIMAL_PLACES:q,ROUNDING_MODE:I,EXPONENTIAL_AT:[D,P],RANGE:[N,B],CRYPTO:L,MODULO_MODE:F,POW_PRECISION:j,FORMAT:U,ALPHABET:H}},G.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!G.DEBUG)return!0;var t,i,r=e.c,s=e.e,n=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===n||-1===n)&&s>=-m&&s<=m&&s===d(s)){if(0===r[0]){if(0===s&&1===r.length)return!0;break e}if((t=(s+1)%c)<1&&(t+=c),String(r[0]).length==t){for(t=0;t<r.length;t++)if((i=r[t])<0||i>=l||i!==d(i))break e;if(0!==i)return!0}}}else if(null===r&&null===s&&(null===n||1===n||-1===n))return!0;throw Error(p+"Invalid BigNumber: "+e)},G.maximum=G.max=function(){return W(arguments,C.lt)},G.minimum=G.min=function(){return W(arguments,C.gt)},G.random=(n=9007199254740992,R=Math.random()*n&2097151?function(){return d(Math.random()*n)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,i,r,s,n,a=0,u=[],l=new G(k);if(null==e?e=q:T(e,0,m),s=o(e/c),L)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(s*=2));a<s;)(n=131072*t[a]+(t[a+1]>>>11))>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),t[a]=i[0],t[a+1]=i[1]):(u.push(n%1e14),a+=2);a=s/2}else{if(!crypto.randomBytes)throw L=!1,Error(p+"crypto unavailable");for(t=crypto.randomBytes(s*=7);a<s;)(n=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(u.push(n%1e14),a+=7);a=s/7}if(!L)for(;a<s;)(n=R())<9e15&&(u[a++]=n%1e14);for(s=u[--a],e%=c,s&&e&&(n=h[c-e],u[a]=d(s/n)*n);0===u[a];u.pop(),a--);if(a<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=c);for(a=1,n=u[0];n>=10;n/=10,a++);a<c&&(r-=c-a)}return l.e=r,l.c=u,l}),G.sum=function(){for(var e=1,t=arguments,i=new G(t[0]);e<t.length;)i=i.plus(t[e++]);return i},r=function(){var e="0123456789";function t(e,t,i,r){for(var s,n,a=[0],o=0,d=e.length;o<d;){for(n=a.length;n--;a[n]*=t);for(a[0]+=r.indexOf(e.charAt(o++)),s=0;s<a.length;s++)a[s]>i-1&&(null==a[s+1]&&(a[s+1]=0),a[s+1]+=a[s]/i|0,a[s]%=i)}return a.reverse()}return function(r,s,n,a,o){var d,p,u,l,c,y,h,g,m=r.indexOf("."),f=q,v=I;for(m>=0&&(l=j,j=0,r=r.replace(".",""),y=(g=new G(s)).pow(r.length-m),j=l,g.c=t(E(_(y.c),y.e,"0"),10,n,e),g.e=g.c.length),u=l=(h=t(r,s,n,o?(d=H,e):(d=e,H))).length;0==h[--l];h.pop());if(!h[0])return d.charAt(0);if(m<0?--u:(y.c=h,y.e=u,y.s=a,h=(y=i(y,g,f,v,n)).c,c=y.r,u=y.e),m=h[p=u+f+1],l=n/2,c=c||p<0||null!=h[p+1],c=v<4?(null!=m||c)&&(0==v||v==(y.s<0?3:2)):m>l||m==l&&(4==v||c||6==v&&1&h[p-1]||v==(y.s<0?8:7)),p<1||!h[0])r=c?E(d.charAt(1),-f,d.charAt(0)):d.charAt(0);else{if(h.length=p,c)for(--n;++h[--p]>n;)h[p]=0,p||(++u,h=[1].concat(h));for(l=h.length;!h[--l];);for(m=0,r="";m<=l;r+=d.charAt(h[m++]));r=E(r,u,d.charAt(0))}return r}}(),i=function(){function e(e,t,i){var r,s,n,a,o=0,d=e.length,p=t%g,u=t/g|0;for(e=e.slice();d--;)o=((s=p*(n=e[d]%g)+(r=u*n+(a=e[d]/g|0)*p)%g*g+o)/i|0)+(r/g|0)+u*a,e[d]=s%i;return o&&(e=[o].concat(e)),e}function t(e,t,i,r){var s,n;if(i!=r)n=i>r?1:-1;else for(s=n=0;s<i;s++)if(e[s]!=t[s]){n=e[s]>t[s]?1:-1;break}return n}function i(e,t,i,r){for(var s=0;i--;)e[i]-=s,s=e[i]<t[i]?1:0,e[i]=s*r+e[i]-t[i];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,s,n,a,o){var p,u,y,h,g,m,_,v,T,b,S,E,R,M,x,w,A,O=r.s==s.s?1:-1,C=r.c,k=s.c;if(!(C&&C[0]&&k&&k[0]))return new G(r.s&&s.s&&(C?!k||C[0]!=k[0]:k)?C&&0==C[0]||!k?0*O:O/0:NaN);for(T=(v=new G(O)).c=[],O=n+(u=r.e-s.e)+1,o||(o=l,u=f(r.e/c)-f(s.e/c),O=O/c|0),y=0;k[y]==(C[y]||0);y++);if(k[y]>(C[y]||0)&&u--,O<0)T.push(1),h=!0;else{for(M=C.length,w=k.length,y=0,O+=2,(g=d(o/(k[0]+1)))>1&&(k=e(k,g,o),C=e(C,g,o),w=k.length,M=C.length),R=w,S=(b=C.slice(0,w)).length;S<w;b[S++]=0);A=k.slice(),A=[0].concat(A),x=k[0],k[1]>=o/2&&x++;do{if(g=0,(p=t(k,b,w,S))<0){if(E=b[0],w!=S&&(E=E*o+(b[1]||0)),(g=d(E/x))>1)for(g>=o&&(g=o-1),_=(m=e(k,g,o)).length,S=b.length;1==t(m,b,_,S);)g--,i(m,w<_?A:k,_,o),_=m.length,p=1;else 0==g&&(p=g=1),_=(m=k.slice()).length;if(_<S&&(m=[0].concat(m)),i(b,m,S,o),S=b.length,-1==p)for(;t(k,b,w,S)<1;)g++,i(b,w<S?A:k,S,o),S=b.length}else 0===p&&(g++,b=[0]);T[y++]=g,b[0]?b[S++]=C[R]||0:(b=[C[R]],S=1)}while((R++<M||null!=b[0])&&O--);h=null!=b[0],T[0]||T.splice(0,1)}if(o==l){for(y=1,O=T[0];O>=10;O/=10,y++);Y(v,n+(v.e=y+u*c-1)+1,a,h)}else v.e=u,v.r=+h;return v}}(),M=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,w=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g,s=function(e,t,i,r){var s,n=i?t:t.replace(O,"");if(A.test(n))e.s=isNaN(n)?null:n<0?-1:1;else{if(!i&&(n=n.replace(M,(function(e,t,i){return s="x"==(i=i.toLowerCase())?16:"b"==i?2:8,r&&r!=s?e:t})),r&&(s=r,n=n.replace(x,"$1").replace(w,"0.$1")),t!=n))return new G(n,s);if(G.DEBUG)throw Error(p+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},C.absoluteValue=C.abs=function(){var e=new G(this);return e.s<0&&(e.s=1),e},C.comparedTo=function(e,t){return v(this,new G(e,t))},C.decimalPlaces=C.dp=function(e,t){var i,r,s,n=this;if(null!=e)return T(e,0,m),null==t?t=I:T(t,0,8),Y(new G(n),e+n.e+1,t);if(!(i=n.c))return null;if(r=((s=i.length-1)-f(this.e/c))*c,s=i[s])for(;s%10==0;s/=10,r--);return r<0&&(r=0),r},C.dividedBy=C.div=function(e,t){return i(this,new G(e,t),q,I)},C.dividedToIntegerBy=C.idiv=function(e,t){return i(this,new G(e,t),0,1)},C.exponentiatedBy=C.pow=function(e,t){var i,r,s,n,a,u,l,y,h=this;if((e=new G(e)).c&&!e.isInteger())throw Error(p+"Exponent not an integer: "+$(e));if(null!=t&&(t=new G(t)),a=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return y=new G(Math.pow(+$(h),a?2-b(e):+$(e))),t?y.mod(t):y;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new G(NaN);(r=!u&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||a&&h.c[1]>=24e7:h.c[0]<8e13||a&&h.c[0]<=9999975e7)))return n=h.s<0&&b(e)?-0:0,h.e>-1&&(n=1/n),new G(u?1/n:n);j&&(n=o(j/c+2))}for(a?(i=new G(.5),u&&(e.s=1),l=b(e)):l=(s=Math.abs(+$(e)))%2,y=new G(k);;){if(l){if(!(y=y.times(h)).c)break;n?y.c.length>n&&(y.c.length=n):r&&(y=y.mod(t))}if(s){if(0===(s=d(s/2)))break;l=s%2}else if(Y(e=e.times(i),e.e+1,1),e.e>14)l=b(e);else{if(0===(s=+$(e)))break;l=s%2}h=h.times(h),n?h.c&&h.c.length>n&&(h.c.length=n):r&&(h=h.mod(t))}return r?y:(u&&(y=k.div(y)),t?y.mod(t):n?Y(y,j,I,undefined):y)},C.integerValue=function(e){var t=new G(this);return null==e?e=I:T(e,0,8),Y(t,t.e+1,e)},C.isEqualTo=C.eq=function(e,t){return 0===v(this,new G(e,t))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(e,t){return v(this,new G(e,t))>0},C.isGreaterThanOrEqualTo=C.gte=function(e,t){return 1===(t=v(this,new G(e,t)))||0===t},C.isInteger=function(){return!!this.c&&f(this.e/c)>this.c.length-2},C.isLessThan=C.lt=function(e,t){return v(this,new G(e,t))<0},C.isLessThanOrEqualTo=C.lte=function(e,t){return-1===(t=v(this,new G(e,t)))||0===t},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(e,t){var i,r,s,n,a=this,o=a.s;if(t=(e=new G(e,t)).s,!o||!t)return new G(NaN);if(o!=t)return e.s=-t,a.plus(e);var d=a.e/c,p=e.e/c,u=a.c,y=e.c;if(!d||!p){if(!u||!y)return u?(e.s=-t,e):new G(y?a:NaN);if(!u[0]||!y[0])return y[0]?(e.s=-t,e):new G(u[0]?a:3==I?-0:0)}if(d=f(d),p=f(p),u=u.slice(),o=d-p){for((n=o<0)?(o=-o,s=u):(p=d,s=y),s.reverse(),t=o;t--;s.push(0));s.reverse()}else for(r=(n=(o=u.length)<(t=y.length))?o:t,o=t=0;t<r;t++)if(u[t]!=y[t]){n=u[t]<y[t];break}if(n&&(s=u,u=y,y=s,e.s=-e.s),(t=(r=y.length)-(i=u.length))>0)for(;t--;u[i++]=0);for(t=l-1;r>o;){if(u[--r]<y[r]){for(i=r;i&&!u[--i];u[i]=t);--u[i],u[r]+=l}u[r]-=y[r]}for(;0==u[0];u.splice(0,1),--p);return u[0]?V(e,u,p):(e.s=3==I?-1:1,e.c=[e.e=0],e)},C.modulo=C.mod=function(e,t){var r,s,n=this;return e=new G(e,t),!n.c||!e.s||e.c&&!e.c[0]?new G(NaN):!e.c||n.c&&!n.c[0]?new G(n):(9==F?(s=e.s,e.s=1,r=i(n,e,0,3),e.s=s,r.s*=s):r=i(n,e,0,F),(e=n.minus(r.times(e))).c[0]||1!=F||(e.s=n.s),e)},C.multipliedBy=C.times=function(e,t){var i,r,s,n,a,o,d,p,u,y,h,m,_,v,T,b=this,S=b.c,E=(e=new G(e,t)).c;if(!(S&&E&&S[0]&&E[0]))return!b.s||!e.s||S&&!S[0]&&!E||E&&!E[0]&&!S?e.c=e.e=e.s=null:(e.s*=b.s,S&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=f(b.e/c)+f(e.e/c),e.s*=b.s,(d=S.length)<(y=E.length)&&(_=S,S=E,E=_,s=d,d=y,y=s),s=d+y,_=[];s--;_.push(0));for(v=l,T=g,s=y;--s>=0;){for(i=0,h=E[s]%T,m=E[s]/T|0,n=s+(a=d);n>s;)i=((p=h*(p=S[--a]%T)+(o=m*p+(u=S[a]/T|0)*h)%T*T+_[n]+i)/v|0)+(o/T|0)+m*u,_[n--]=p%v;_[n]=i}return i?++r:_.splice(0,1),V(e,_,r)},C.negated=function(){var e=new G(this);return e.s=-e.s||null,e},C.plus=function(e,t){var i,r=this,s=r.s;if(t=(e=new G(e,t)).s,!s||!t)return new G(NaN);if(s!=t)return e.s=-t,r.minus(e);var n=r.e/c,a=e.e/c,o=r.c,d=e.c;if(!n||!a){if(!o||!d)return new G(s/0);if(!o[0]||!d[0])return d[0]?e:new G(o[0]?r:0*s)}if(n=f(n),a=f(a),o=o.slice(),s=n-a){for(s>0?(a=n,i=d):(s=-s,i=o),i.reverse();s--;i.push(0));i.reverse()}for((s=o.length)-(t=d.length)<0&&(i=d,d=o,o=i,t=s),s=0;t;)s=(o[--t]=o[t]+d[t]+s)/l|0,o[t]=l===o[t]?0:o[t]%l;return s&&(o=[s].concat(o),++a),V(e,o,a)},C.precision=C.sd=function(e,t){var i,r,s,n=this;if(null!=e&&e!==!!e)return T(e,1,m),null==t?t=I:T(t,0,8),Y(new G(n),e,t);if(!(i=n.c))return null;if(r=(s=i.length-1)*c+1,s=i[s]){for(;s%10==0;s/=10,r--);for(s=i[0];s>=10;s/=10,r++);}return e&&n.e+1>r&&(r=n.e+1),r},C.shiftedBy=function(e){return T(e,-y,y),this.times("1e"+e)},C.squareRoot=C.sqrt=function(){var e,t,r,s,n,a=this,o=a.c,d=a.s,p=a.e,u=q+4,l=new G("0.5");if(1!==d||!o||!o[0])return new G(!d||d<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(d=Math.sqrt(+$(a)))||d==1/0?(((t=_(o)).length+p)%2==0&&(t+="0"),d=Math.sqrt(+t),p=f((p+1)/2)-(p<0||p%2),r=new G(t=d==1/0?"5e"+p:(t=d.toExponential()).slice(0,t.indexOf("e")+1)+p)):r=new G(d+""),r.c[0])for((d=(p=r.e)+u)<3&&(d=0);;)if(n=r,r=l.times(n.plus(i(a,n,u,1))),_(n.c).slice(0,d)===(t=_(r.c)).slice(0,d)){if(r.e<p&&--d,"9999"!=(t=t.slice(d-3,d+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Y(r,r.e+q+2,1),e=!r.times(r).eq(a));break}if(!s&&(Y(n,n.e+q+2,0),n.times(n).eq(a))){r=n;break}u+=4,d+=4,s=1}return Y(r,r.e+q+1,I,e)},C.toExponential=function(e,t){return null!=e&&(T(e,0,m),e++),z(this,e,t,1)},C.toFixed=function(e,t){return null!=e&&(T(e,0,m),e=e+this.e+1),z(this,e,t)},C.toFormat=function(e,t,i){var r,s=this;if(null==i)null!=e&&t&&"object"==typeof t?(i=t,t=null):e&&"object"==typeof e?(i=e,e=t=null):i=U;else if("object"!=typeof i)throw Error(p+"Argument not an object: "+i);if(r=s.toFixed(e,t),s.c){var n,a=r.split("."),o=+i.groupSize,d=+i.secondaryGroupSize,u=i.groupSeparator||"",l=a[0],c=a[1],y=s.s<0,h=y?l.slice(1):l,g=h.length;if(d&&(n=o,o=d,d=n,g-=n),o>0&&g>0){for(n=g%o||o,l=h.substr(0,n);n<g;n+=o)l+=u+h.substr(n,o);d>0&&(l+=u+h.slice(n)),y&&(l="-"+l)}r=c?l+(i.decimalSeparator||"")+((d=+i.fractionGroupSize)?c.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):c):l}return(i.prefix||"")+r+(i.suffix||"")},C.toFraction=function(e){var t,r,s,n,a,o,d,u,l,y,g,m,f=this,v=f.c;if(null!=e&&(!(d=new G(e)).isInteger()&&(d.c||1!==d.s)||d.lt(k)))throw Error(p+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+$(d));if(!v)return new G(f);for(t=new G(k),l=r=new G(k),s=u=new G(k),m=_(v),a=t.e=m.length-f.e-1,t.c[0]=h[(o=a%c)<0?c+o:o],e=!e||d.comparedTo(t)>0?a>0?t:l:d,o=B,B=1/0,d=new G(m),u.c[0]=0;y=i(d,t,0,1),1!=(n=r.plus(y.times(s))).comparedTo(e);)r=s,s=n,l=u.plus(y.times(n=l)),u=n,t=d.minus(y.times(n=t)),d=n;return n=i(e.minus(r),s,0,1),u=u.plus(n.times(l)),r=r.plus(n.times(s)),u.s=l.s=f.s,g=i(l,s,a*=2,I).minus(f).abs().comparedTo(i(u,r,a,I).minus(f).abs())<1?[l,s]:[u,r],B=o,g},C.toNumber=function(){return+$(this)},C.toPrecision=function(e,t){return null!=e&&T(e,1,m),z(this,e,t,2)},C.toString=function(e){var t,i=this,s=i.s,n=i.e;return null===n?s?(t="Infinity",s<0&&(t="-"+t)):t="NaN":(null==e?t=n<=D||n>=P?S(_(i.c),n):E(_(i.c),n,"0"):10===e&&K?t=E(_((i=Y(new G(i),q+n+1,I)).c),i.e,"0"):(T(e,2,H.length,"Base"),t=r(E(_(i.c),n,"0"),10,e,s,!0)),s<0&&i.c[0]&&(t="-"+t)),t},C.valueOf=C.toJSON=function(){return $(this)},C._isBigNumber=!0,null!=t&&G.set(t),G}(),n.default=n.BigNumber=n,void 0===(r=function(){return n}.call(t,i,t,e))||(e.exports=r)}()},403956:(e,t,i)=>{"use strict";e.exports=i(320111)},165874:(e,t,i)=>{"use strict";var r=t,s=i(409469),n=i(139795);function a(e,t,i,r){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",r);for(var n=t.resolvedType.values,a=Object.keys(n),o=0;o<a.length;++o)t.repeated&&n[a[o]]===t.typeDefault&&e("default:"),e("case%j:",a[o])("case %i:",n[a[o]])("m%s=%j",r,n[a[o]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,i,r);else{var d=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":d=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,d)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,d?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function o(e,t,i,r){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,i,r,r):e("d%s=types[%i].toObject(m%s,o)",r,i,r);else{var n=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":n=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,n?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,i=n.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return i("return new this.ctor");i("var m=new this.ctor");for(var r=0;r<t.length;++r){var o=t[r].resolve(),d=n.safeProp(o.name);o.map?(i("if(d%s){",d)('if(typeof d%s!=="object")',d)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",d)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",d),a(i,o,r,d+"[ks[i]]")("}")("}")):o.repeated?(i("if(d%s){",d)("if(!Array.isArray(d%s))",d)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",d)("for(var i=0;i<d%s.length;++i){",d),a(i,o,r,d+"[i]")("}")("}")):(o.resolvedType instanceof s||i("if(d%s!=null){",d),a(i,o,r,d),o.resolvedType instanceof s||i("}"))}return i("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(n.compareFieldsById);if(!t.length)return n.codegen()("return {}");for(var i=n.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],a=[],d=[],p=0;p<t.length;++p)t[p].partOf||(t[p].resolve().repeated?r:t[p].map?a:d).push(t[p]);if(r.length){for(i("if(o.arrays||o.defaults){"),p=0;p<r.length;++p)i("d%s=[]",n.safeProp(r[p].name));i("}")}if(a.length){for(i("if(o.objects||o.defaults){"),p=0;p<a.length;++p)i("d%s={}",n.safeProp(a[p].name));i("}")}if(d.length){for(i("if(o.defaults){"),p=0;p<d.length;++p){var u=d[p],l=n.safeProp(u.name);if(u.resolvedType instanceof s)i("d%s=o.enums===String?%j:%j",l,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var c="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",l,c)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else i("d%s=%j",l,u.typeDefault)}i("}")}var y=!1;for(p=0;p<t.length;++p){u=t[p];var h=e._fieldsArray.indexOf(u);l=n.safeProp(u.name);u.map?(y||(y=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),o(i,u,h,l+"[ks2[j]]")("}")):u.repeated?(i("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),o(i,u,h,l+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",l,u.name),o(i,u,h,l),u.partOf&&i("if(o.oneofs)")("d%s=%j",n.safeProp(u.partOf.name),u.name)),i("}")}return i("return d")}},896830:(e,t,i)=>{"use strict";e.exports=function(e){var t=n.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var i=0;i<e.fieldsArray.length;++i){var o=e._fieldsArray[i].resolve(),d=o.resolvedType instanceof r?"int32":o.type,p="m"+n.safeProp(o.name);t("case %i:",o.id),o.map?(t("if(%s===util.emptyObject)",p)("%s={}",p)("var c2 = r.uint32()+r.pos"),void 0!==s.defaults[o.keyType]?t("k=%j",s.defaults[o.keyType]):t("k=null"),void 0!==s.defaults[d]?t("value=%j",s.defaults[d]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===s.basic[d]?t("value=types[%i].decode(r,r.uint32())",i):t("value=r.%s()",d),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==s.long[o.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',p):t("%s[k]=value",p)):o.repeated?(t("if(!(%s&&%s.length))",p,p)("%s=[]",p),void 0!==s.packed[d]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",p,d)("}else"),void 0===s.basic[d]?t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",p,i):t("%s.push(r.%s())",p,d)):void 0===s.basic[d]?t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",p,i):t("%s=r.%s()",p,d),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<e._fieldsArray.length;++i){var u=e._fieldsArray[i];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",a(u))}return t("return m")};var r=i(409469),s=i(721756),n=i(139795);function a(e){return"missing required '"+e.name+"'"}},592070:(e,t,i)=>{"use strict";e.exports=function(e){for(var t,i=n.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),o=e.fieldsArray.slice().sort(n.compareFieldsById),d=0;d<o.length;++d){var p=o[d].resolve(),u=e._fieldsArray.indexOf(p),l=p.resolvedType instanceof r?"int32":p.type,c=s.basic[l];t="m"+n.safeProp(p.name),p.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,p.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(p.id<<3|2)>>>0,8|s.mapKey[p.keyType],p.keyType),void 0===c?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|c,l,t),i("}")("}")):p.repeated?(i("if(%s!=null&&%s.length){",t,t),p.packed&&void 0!==s.packed[l]?i("w.uint32(%i).fork()",(p.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",l,t)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",t),void 0===c?a(i,p,u,t+"[i]"):i("w.uint32(%i).%s(%s[i])",(p.id<<3|c)>>>0,l,t)),i("}")):(p.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,p.name),void 0===c?a(i,p,u,t):i("w.uint32(%i).%s(%s)",(p.id<<3|c)>>>0,l,t))}return i("return w")};var r=i(409469),s=i(721756),n=i(139795);function a(e,t,i,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,r,(t.id<<3|2)>>>0)}},409469:(e,t,i)=>{"use strict";e.exports=a;var r=i(208177);((a.prototype=Object.create(r.prototype)).constructor=a).className="Enum";var s=i(915764),n=i(139795);function a(e,t,i,s,n){if(r.call(this,e,i),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=s,this.comments=n||{},this.reserved=void 0,t)for(var a=Object.keys(t),o=0;o<a.length;++o)"number"==typeof t[a[o]]&&(this.valuesById[this.values[a[o]]=t[a[o]]]=a[o])}a.fromJSON=function(e,t){var i=new a(e,t.values,t.options,t.comment,t.comments);return i.reserved=t.reserved,i},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,i){if(!n.isString(e))throw TypeError("name must be a string");if(!n.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=i||null,this},a.prototype.remove=function(e){if(!n.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},a.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)}},565040:(e,t,i)=>{"use strict";e.exports=p;var r=i(208177);((p.prototype=Object.create(r.prototype)).constructor=p).className="Field";var s,n=i(409469),a=i(721756),o=i(139795),d=/^required|optional|repeated$/;function p(e,t,i,s,n,p,u){if(o.isObject(s)?(u=n,p=s,s=n=void 0):o.isObject(n)&&(u=p,p=n,n=void 0),r.call(this,e,p),!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(i))throw TypeError("type must be a string");if(void 0!==s&&!d.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==n&&!o.isString(n))throw TypeError("extend must be a string");"proto3_optional"===s&&(s="optional"),this.rule=s&&"optional"!==s?s:void 0,this.type=i,this.id=t,this.extend=n||void 0,this.required="required"===s,this.optional=!this.required,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==a.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}p.fromJSON=function(e,t){return new p(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(p.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),p.prototype.setOption=function(e,t,i){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,i)},p.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},p.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof s?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof n&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof n)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof s&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},p.d=function(e,t,i,r){return"function"==typeof t?t=o.decorateType(t).name:t&&"object"==typeof t&&(t=o.decorateEnum(t).name),function(s,n){o.decorateType(s.constructor).add(new p(n,e,t,i,{default:r}))}},p._configure=function(e){s=e}},320111:(e,t,i)=>{"use strict";var r=e.exports=i(172078);r.build="light",r.load=function(e,t,i){return"function"==typeof t?(i=t,t=new r.Root):t||(t=new r.Root),t.load(e,i)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=i(592070),r.decoder=i(896830),r.verifier=i(506053),r.converter=i(165874),r.ReflectionObject=i(208177),r.Namespace=i(915764),r.Root=i(932700),r.Enum=i(409469),r.Type=i(861619),r.Field=i(565040),r.OneOf=i(295364),r.MapField=i(85133),r.Service=i(939842),r.Method=i(600073),r.Message=i(999929),r.wrappers=i(170917),r.types=i(721756),r.util=i(139795),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},172078:(e,t,i)=>{"use strict";var r=t;function s(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=i(574968),r.BufferWriter=i(974002),r.Reader=i(99458),r.BufferReader=i(256365),r.util=i(324123),r.rpc=i(158585),r.roots=i(199284),r.configure=s,s()},85133:(e,t,i)=>{"use strict";e.exports=a;var r=i(565040);((a.prototype=Object.create(r.prototype)).constructor=a).className="MapField";var s=i(721756),n=i(139795);function a(e,t,i,s,a,o){if(r.call(this,e,t,s,void 0,void 0,a,o),!n.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===s.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},a.d=function(e,t,i){return"function"==typeof i?i=n.decorateType(i).name:i&&"object"==typeof i&&(i=n.decorateEnum(i).name),function(r,s){n.decorateType(r.constructor).add(new a(s,e,t,i))}}},999929:(e,t,i)=>{"use strict";e.exports=s;var r=i(324123);function s(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)this[t[i]]=e[t[i]]}s.create=function(e){return this.$type.create(e)},s.encode=function(e,t){return this.$type.encode(e,t)},s.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},s.decode=function(e){return this.$type.decode(e)},s.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},s.verify=function(e){return this.$type.verify(e)},s.fromObject=function(e){return this.$type.fromObject(e)},s.toObject=function(e,t){return this.$type.toObject(e,t)},s.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},600073:(e,t,i)=>{"use strict";e.exports=n;var r=i(208177);((n.prototype=Object.create(r.prototype)).constructor=n).className="Method";var s=i(139795);function n(e,t,i,n,a,o,d,p,u){if(s.isObject(a)?(d=a,a=o=void 0):s.isObject(o)&&(d=o,o=void 0),void 0!==t&&!s.isString(t))throw TypeError("type must be a string");if(!s.isString(i))throw TypeError("requestType must be a string");if(!s.isString(n))throw TypeError("responseType must be a string");r.call(this,e,d),this.type=t||"rpc",this.requestType=i,this.requestStream=!!a||void 0,this.responseType=n,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=p,this.parsedOptions=u}n.fromJSON=function(e,t){return new n(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},n.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},915764:(e,t,i)=>{"use strict";e.exports=l;var r=i(208177);((l.prototype=Object.create(r.prototype)).constructor=l).className="Namespace";var s,n,a,o=i(565040),d=i(295364),p=i(139795);function u(e,t){if(e&&e.length){for(var i={},r=0;r<e.length;++r)i[e[r].name]=e[r].toJSON(t);return i}}function l(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function c(e){return e._nestedArray=null,e}l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=u,l.isReservedId=function(e,t){if(e)for(var i=0;i<e.length;++i)if("string"!=typeof e[i]&&e[i][0]<=t&&e[i][1]>t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=p.toArray(this.nested))}}),l.prototype.toJSON=function(e){return p.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,i=Object.keys(e),r=0;r<i.length;++r)t=e[i[r]],this.add((void 0!==t.fields?s.fromJSON:void 0!==t.values?a.fromJSON:void 0!==t.methods?n.fromJSON:void 0!==t.id?o.fromJSON:l.fromJSON)(i[r],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof a)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof s||e instanceof a||e instanceof n||e instanceof l||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof s||t instanceof n)throw Error("duplicate name '"+e.name+"' in "+this);for(var i=t.nestedArray,r=0;r<i.length;++r)e.add(i[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),c(this)},l.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),c(this)},l.prototype.define=function(e,t){if(p.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var i=this;e.length>0;){var r=e.shift();if(i.nested&&i.nested[r]){if(!((i=i.nested[r])instanceof l))throw Error("path conflicts with non-namespace objects")}else i.add(i=new l(r))}return t&&i.addJSON(t),i},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,i){if("boolean"==typeof t?(i=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),p.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof l&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof l&&(r=this._nestedArray[s].lookup(e,t,!0)))return r;return null===this.parent||i?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,a]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(e,t,i){s=e,n=t,a=i}},208177:(e,t,i)=>{"use strict";e.exports=n,n.className="ReflectionObject";var r,s=i(139795);function n(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(n.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),n.prototype.toJSON=function(){throw Error()},n.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},n.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},n.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},n.prototype.getOption=function(e){if(this.options)return this.options[e]},n.prototype.setOption=function(e,t,i){return i&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},n.prototype.setParsedOption=function(e,t,i){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(i){var n=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(n){var a=n[e];s.setProperty(a,i,t)}else(n={})[e]=s.setProperty({},i,t),r.push(n)}else{var o={};o[e]=t,r.push(o)}return this},n.prototype.setOptions=function(e,t){if(e)for(var i=Object.keys(e),r=0;r<i.length;++r)this.setOption(i[r],e[i[r]],t);return this},n.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},n._configure=function(e){r=e}},295364:(e,t,i)=>{"use strict";e.exports=a;var r=i(208177);((a.prototype=Object.create(r.prototype)).constructor=a).className="OneOf";var s=i(565040),n=i(139795);function a(e,t,i,s){if(Array.isArray(t)||(i=t,t=void 0),r.call(this,e,i),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=s}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},a.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var i=e.get(this.oneof[t]);i&&!i.partOf&&(i.partOf=this,this.fieldsArray.push(i))}o(this)},a.prototype.onRemove=function(e){for(var t,i=0;i<this.fieldsArray.length;++i)(t=this.fieldsArray[i]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},a.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,i){n.decorateType(t.constructor).add(new a(i,e)),Object.defineProperty(t,i,{get:n.oneOfGetter(e),set:n.oneOfSetter(e)})}}},99458:(e,t,i)=>{"use strict";e.exports=d;var r,s=i(324123),n=s.LongBits,a=s.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function d(e){this.buf=e,this.pos=0,this.len=e.length}var p,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new d(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new d(e);throw Error("illegal buffer")},l=function(){return s.Buffer?function(e){return(d.create=function(e){return s.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function c(){var e=new n(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function y(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw o(this,8);return new n(y(this.buf,this.pos+=4),y(this.buf,this.pos+=4))}d.create=l(),d.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,d.prototype.uint32=(p=4294967295,function(){if(p=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return p;if(p=(p|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return p;if(p=(p|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return p;if(p=(p|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return p;if(p=(p|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return p;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return p}),d.prototype.int32=function(){return 0|this.uint32()},d.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},d.prototype.bool=function(){return 0!==this.uint32()},d.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return y(this.buf,this.pos+=4)},d.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|y(this.buf,this.pos+=4)},d.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},d.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},d.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw o(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},d.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},d.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},d.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},d._configure=function(e){r=e,d.create=l(),r._configure();var t=s.Long?"toLong":"toNumber";s.merge(d.prototype,{int64:function(){return c.call(this)[t](!1)},uint64:function(){return c.call(this)[t](!0)},sint64:function(){return c.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},256365:(e,t,i)=>{"use strict";e.exports=n;var r=i(99458);(n.prototype=Object.create(r.prototype)).constructor=n;var s=i(324123);function n(e){r.call(this,e)}n._configure=function(){s.Buffer&&(n.prototype._slice=s.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n._configure()},932700:(e,t,i)=>{"use strict";e.exports=l;var r=i(915764);((l.prototype=Object.create(r.prototype)).constructor=l).className="Root";var s,n,a,o=i(565040),d=i(409469),p=i(295364),u=i(139795);function l(e){r.call(this,"",e),this.deferred=[],this.files=[]}function c(){}l.fromJSON=function(e,t){return t||(t=new l),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},l.prototype.resolvePath=u.path.resolve,l.prototype.fetch=u.fetch,l.prototype.load=function e(t,i,r){"function"==typeof i&&(r=i,i=void 0);var s=this;if(!r)return u.asPromise(e,s,t,i);var o=r===c;function d(e,t){if(r){var i=r;if(r=null,o)throw e;i(e,t)}}function p(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var i=e.substring(t);if(i in a)return i}return null}function l(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){n.filename=e;var r,a=n(t,s,i),l=0;if(a.imports)for(;l<a.imports.length;++l)(r=p(a.imports[l])||s.resolvePath(e,a.imports[l]))&&y(r);if(a.weakImports)for(l=0;l<a.weakImports.length;++l)(r=p(a.weakImports[l])||s.resolvePath(e,a.weakImports[l]))&&y(r,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){d(e)}o||h||d(null,s)}function y(e,t){if(!(s.files.indexOf(e)>-1))if(s.files.push(e),e in a)o?l(e,a[e]):(++h,setTimeout((function(){--h,l(e,a[e])})));else if(o){var i;try{i=u.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||d(e))}l(e,i)}else++h,s.fetch(e,(function(i,n){--h,r&&(i?t?h||d(null,s):d(i):l(e,n))}))}var h=0;u.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=s.resolvePath("",t[m]))&&y(g);if(o)return s;h||d(null,s)},l.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,c)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var y=/^[A-Z]/;function h(e,t){var i=t.parent.lookup(t.extend);if(i){var r=new o(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,i.add(r),!0}return!1}l.prototype._handleAdd=function(e){if(e instanceof o)void 0===e.extend||e.extensionField||h(0,e)||this.deferred.push(e);else if(e instanceof d)y.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof p)){if(e instanceof s)for(var t=0;t<this.deferred.length;)h(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var i=0;i<e.nestedArray.length;++i)this._handleAdd(e._nestedArray[i]);y.test(e.name)&&(e.parent[e.name]=e)}},l.prototype._handleRemove=function(e){if(e instanceof o){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof d)y.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var i=0;i<e.nestedArray.length;++i)this._handleRemove(e._nestedArray[i]);y.test(e.name)&&delete e.parent[e.name]}},l._configure=function(e,t,i){s=e,n=t,a=i}},199284:e=>{"use strict";e.exports={}},158585:(e,t,i)=>{"use strict";t.Service=i(58321)},58321:(e,t,i)=>{"use strict";e.exports=s;var r=i(324123);function s(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(s.prototype=Object.create(r.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,i,s,n,a){if(!n)throw TypeError("request must be specified");var o=this;if(!a)return r.asPromise(e,o,t,i,s,n);if(o.rpcImpl)try{return o.rpcImpl(t,i[o.requestDelimited?"encodeDelimited":"encode"](n).finish(),(function(e,i){if(e)return o.emit("error",e,t),a(e);if(null!==i){if(!(i instanceof s))try{i=s[o.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",i,t),a(null,i)}o.end(!0)}))}catch(e){return o.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},939842:(e,t,i)=>{"use strict";e.exports=o;var r=i(915764);((o.prototype=Object.create(r.prototype)).constructor=o).className="Service";var s=i(600073),n=i(139795),a=i(158585);function o(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function d(e){return e._methodsArray=null,e}o.fromJSON=function(e,t){var i=new o(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),n=0;n<r.length;++n)i.add(s.fromJSON(r[n],t.methods[r[n]]));return t.nested&&i.addJSON(t.nested),i.comment=t.comment,i},o.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return n.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=n.toArray(this.methods))}}),o.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},o.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},o.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,d(this)):r.prototype.add.call(this,e)},o.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,d(this)}return r.prototype.remove.call(this,e)},o.prototype.create=function(e,t,i){for(var r,s=new a.Service(e,t,i),o=0;o<this.methodsArray.length;++o){var d=n.lcFirst((r=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");s[d]=n.codegen(["r","c"],n.isReserved(d)?d+"_":d)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return s}},861619:(e,t,i)=>{"use strict";e.exports=_;var r=i(915764);((_.prototype=Object.create(r.prototype)).constructor=_).className="Type";var s=i(409469),n=i(295364),a=i(565040),o=i(85133),d=i(939842),p=i(999929),u=i(99458),l=i(574968),c=i(139795),y=i(592070),h=i(896830),g=i(506053),m=i(165874),f=i(170917);function _(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function v(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(_.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var i=this.fields[e[t]],r=i.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=i}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=c.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=c.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=_.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof p||((e.prototype=new p).constructor=e,c.merge(e.prototype,t)),e.$type=e.prototype.$type=this,c.merge(e,p,!0),this._ctor=e;for(var i=0;i<this.fieldsArray.length;++i)this._fieldsArray[i].resolve();var r={};for(i=0;i<this.oneofsArray.length;++i)r[this._oneofsArray[i].resolve().name]={get:c.oneOfGetter(this._oneofsArray[i].oneof),set:c.oneOfSetter(this._oneofsArray[i].oneof)};i&&Object.defineProperties(e.prototype,r)}}}),_.generateConstructor=function(e){for(var t,i=c.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?i("this%s={}",c.safeProp(t.name)):t.repeated&&i("this%s=[]",c.safeProp(t.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},_.fromJSON=function(e,t){var i=new _(e,t.options);i.extensions=t.extensions,i.reserved=t.reserved;for(var p=Object.keys(t.fields),u=0;u<p.length;++u)i.add((void 0!==t.fields[p[u]].keyType?o.fromJSON:a.fromJSON)(p[u],t.fields[p[u]]));if(t.oneofs)for(p=Object.keys(t.oneofs),u=0;u<p.length;++u)i.add(n.fromJSON(p[u],t.oneofs[p[u]]));if(t.nested)for(p=Object.keys(t.nested),u=0;u<p.length;++u){var l=t.nested[p[u]];i.add((void 0!==l.id?a.fromJSON:void 0!==l.fields?_.fromJSON:void 0!==l.values?s.fromJSON:void 0!==l.methods?d.fromJSON:r.fromJSON)(p[u],l))}return t.extensions&&t.extensions.length&&(i.extensions=t.extensions),t.reserved&&t.reserved.length&&(i.reserved=t.reserved),t.group&&(i.group=!0),t.comment&&(i.comment=t.comment),i},_.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return c.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",i?this.comment:void 0])},_.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var i=this.oneofsArray;for(t=0;t<i.length;)i[t++].resolve();return r.prototype.resolveAll.call(this)},_.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},_.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),v(this)}return e instanceof n?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),v(this)):r.prototype.add.call(this,e)},_.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),v(this)}if(e instanceof n){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),v(this)}return r.prototype.remove.call(this,e)},_.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},_.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},_.prototype.create=function(e){return new this.ctor(e)},_.prototype.setup=function(){for(var e=this.fullName,t=[],i=0;i<this.fieldsArray.length;++i)t.push(this._fieldsArray[i].resolve().resolvedType);this.encode=y(this)({Writer:l,types:t,util:c}),this.decode=h(this)({Reader:u,types:t,util:c}),this.verify=g(this)({types:t,util:c}),this.fromObject=m.fromObject(this)({types:t,util:c}),this.toObject=m.toObject(this)({types:t,util:c});var r=f[e];if(r){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(s),s.toObject=this.toObject,this.toObject=r.toObject.bind(s)}return this},_.prototype.encode=function(e,t){return this.setup().encode(e,t)},_.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},_.prototype.decode=function(e,t){return this.setup().decode(e,t)},_.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},_.prototype.verify=function(e){return this.setup().verify(e)},_.prototype.fromObject=function(e){return this.setup().fromObject(e)},_.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},_.d=function(e){return function(t){c.decorateType(t,e)}}},721756:(e,t,i)=>{"use strict";var r=t,s=i(139795),n=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var i=0,r={};for(t|=0;i<e.length;)r[n[i+t]]=e[i++];return r}r.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),r.long=a([0,0,0,1,1],7),r.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},139795:(e,t,i)=>{"use strict";var r,s,n=e.exports=i(324123),a=i(199284);n.codegen=i(75124),n.fetch=i(49054),n.path=i(318626),n.fs=n.inquire("fs"),n.toArray=function(e){if(e){for(var t=Object.keys(e),i=new Array(t.length),r=0;r<t.length;)i[r]=e[t[r++]];return i}return[]},n.toObject=function(e){for(var t={},i=0;i<e.length;){var r=e[i++],s=e[i++];void 0!==s&&(t[r]=s)}return t};var o=/\\/g,d=/"/g;n.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},n.safeProp=function(e){return!/^[$\w_]+$/.test(e)||n.isReserved(e)?'["'+e.replace(o,"\\\\").replace(d,'\\"')+'"]':"."+e},n.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var p=/_([a-z])/g;n.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(p,(function(e,t){return t.toUpperCase()}))},n.compareFieldsById=function(e,t){return e.id-t.id},n.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(n.decorateRoot.remove(e.$type),e.$type.name=t,n.decorateRoot.add(e.$type)),e.$type;r||(r=i(861619));var s=new r(t||e.name);return n.decorateRoot.add(s),s.ctor=e,Object.defineProperty(e,"$type",{value:s,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:s,enumerable:!1}),s};var u=0;n.decorateEnum=function(e){if(e.$type)return e.$type;s||(s=i(409469));var t=new s("Enum"+u++,e);return n.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},n.setProperty=function(e,t,i){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,i,r){var s=i.shift();if("__proto__"===s||"prototype"===s)return t;if(i.length>0)t[s]=e(t[s]||{},i,r);else{var n=t[s];n&&(r=[].concat(n).concat(r)),t[s]=r}return t}(e,t=t.split("."),i)},Object.defineProperty(n,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(i(932700)))}})},810846:(e,t,i)=>{"use strict";e.exports=s;var r=i(324123);function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=s.zero=new s(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var a=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return n;var t=e<0;t&&(e=-e);var i=e>>>0,r=(e-i)/4294967296>>>0;return t&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new s(i,r)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(r.isString(e)){if(!r.Long)return s.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):n},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;s.fromHash=function(e){return e===a?n:new s((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},324123:function(e,t,i){"use strict";var r=t;function s(e,t,i){for(var r=Object.keys(t),s=0;s<r.length;++s)void 0!==e[r[s]]&&i||(e[r[s]]=t[r[s]]);return e}function n(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&s(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=i(634537),r.base64=i(97419),r.EventEmitter=i(419211),r.float=i(210945),r.inquire=i(867199),r.utf8=i(494997),r.pool=i(376662),r.LongBits=i(810846),r.isNode=Boolean(void 0!==i.g&&i.g&&i.g.process&&i.g.process.versions&&i.g.process.versions.node),r.global=r.isNode&&i.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var i=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},r.merge=s,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=n,r.ProtocolError=n("ProtocolError"),r.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&void 0!==this[e[i]]&&null!==this[e[i]])return e[i]}},r.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},506053:(e,t,i)=>{"use strict";e.exports=function(e){var t=s.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i=e.oneofsArray,r={};i.length&&t("var p={}");for(var d=0;d<e.fieldsArray.length;++d){var p=e._fieldsArray[d].resolve(),u="m"+s.safeProp(p.name);if(p.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,p.name),p.map)t("if(!util.isObject(%s))",u)("return%j",n(p,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),o(t,p,"k[i]"),a(t,p,d,u+"[k[i]]")("}");else if(p.repeated)t("if(!Array.isArray(%s))",u)("return%j",n(p,"array"))("for(var i=0;i<%s.length;++i){",u),a(t,p,d,u+"[i]")("}");else{if(p.partOf){var l=s.safeProp(p.partOf.name);1===r[p.partOf.name]&&t("if(p%s===1)",l)("return%j",p.partOf.name+": multiple values"),r[p.partOf.name]=1,t("p%s=1",l)}a(t,p,d,u)}p.optional&&t("}")}return t("return null")};var r=i(409469),s=i(139795);function n(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,i,s){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",s)("default:")("return%j",n(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),o=0;o<a.length;++o)e("case %i:",t.resolvedType.values[a[o]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",i,s)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",s)("return%j",n(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",n(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',s)("return%j",n(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',s)("return%j",n(t,"boolean"));break;case"string":e("if(!util.isString(%s))",s)("return%j",n(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",n(t,"buffer"))}return e}function o(e,t,i){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",i)("return%j",n(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",i)("return%j",n(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",i)("return%j",n(t,"boolean key"))}return e}},170917:(e,t,i)=>{"use strict";var r=t,s=i(999929);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),i=this.lookup(t);if(i){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:i.encode(i.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var i="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var n=this.lookup(r);n&&(e=n.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof s){var a=e.$type.toObject(e,t);return""===i&&(i="type.googleapis.com/"),r=i+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),a["@type"]=r,a}return this.toObject(e,t)}}},574968:(e,t,i)=>{"use strict";e.exports=l;var r,s=i(324123),n=s.LongBits,a=s.base64,o=s.utf8;function d(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function p(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function l(){this.len=0,this.head=new d(p,0,0),this.tail=this.head,this.states=null}var c=function(){return s.Buffer?function(){return(l.create=function(){return new r})()}:function(){return new l}};function y(e,t,i){t[i]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function m(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}l.create=c(),l.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(l.alloc=s.pool(l.alloc,s.Array.prototype.subarray)),l.prototype._push=function(e,t,i){return this.tail=this.tail.next=new d(e,t,i),this.len+=t,this},h.prototype=Object.create(d.prototype),h.prototype.fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},l.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},l.prototype.int32=function(e){return e<0?this._push(g,10,n.fromNumber(e)):this.uint32(e)},l.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},l.prototype.uint64=function(e){var t=n.from(e);return this._push(g,t.length(),t)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(g,t.length(),t)},l.prototype.bool=function(e){return this._push(y,1,e?1:0)},l.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(e){var t=n.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},l.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var f=s.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var r=0;r<e.length;++r)t[i+r]=e[r]};l.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(y,1,0);if(s.isString(e)){var i=l.alloc(t=a.length(e));a.decode(e,i,0),e=i}return this.uint32(t)._push(f,t,e)},l.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(y,1,0)},l.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new d(p,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new d(p,0,0),this.len=0),this},l.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},l.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},l._configure=function(e){r=e,l.create=c(),r._configure()}},974002:(e,t,i)=>{"use strict";e.exports=n;var r=i(574968);(n.prototype=Object.create(r.prototype)).constructor=n;var s=i(324123);function n(){r.call(this)}function a(e,t,i){e.length<40?s.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}n._configure=function(){n.alloc=s._Buffer_allocUnsafe,n.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var r=0;r<e.length;)t[i++]=e[r++]}},n.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(n.writeBytesBuffer,t,e),this},n.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},n._configure()}}]);