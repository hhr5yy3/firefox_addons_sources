!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,(function(e){return o(t[s][1][e]||e)}),c,c.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PASSWORD_CATEGORY_LIST=void 0;r.PASSWORD_CATEGORY_LIST=[{strength:3,category:"WEAK"},{strength:5,category:"WEAK"},{strength:7,category:"WEAK"},{strength:8,category:"MEDIUM"},{strength:9,category:"MEDIUM"},{strength:10,category:"STRONG"}]},{}],2:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.MAX_SCORE=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("@zxcvbn-ts/core"),s=e("../constants/passwordMeasureConstants"),a=c(e("@zxcvbn-ts/language-en")),u=c(e("@zxcvbn-ts/language-common"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const p=r.MAX_SCORE=10;const h=new class{constructor(){(0,o.default)(this,"internalScore",(e=>e<15?0:e<105?1:e<1005?2:e<10005?3:e<100005?4:e<1000005?5:e<10000005?6:e<100000005?7:e<1000000005?8:e<10000000005?9:p)),(0,o.default)(this,"getPasswordCategory",(e=>{const t=s.PASSWORD_CATEGORY_LIST.find((t=>e<=t.strength));return null==t?void 0:t.category})),(0,o.default)(this,"getPasswordStrengthInfo",(e=>{if(null==e)throw new Error("Password cannot be null");const t=(0,i.zxcvbn)(e);if(null==t)return null;const{guesses:r,feedback:n}=t,{suggestions:o=[],warning:s=""}=n||{},a=this.internalScore(r);return{strength:a,category:this.getPasswordCategory(a),warning:s,suggestions:o,timeToCrack:t.crackTimesSeconds.onlineNoThrottling10PerSecond}}));const e={translations:f({},a.translations),graphs:u.adjacencyGraphs,dictionary:f(f({},u.dictionary),a.dictionary)};i.zxcvbnOptions.setOptions(e)}};r.default=h},{"../constants/passwordMeasureConstants":1,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@zxcvbn-ts/core":"@zxcvbn-ts/core","@zxcvbn-ts/language-common":"@zxcvbn-ts/language-common","@zxcvbn-ts/language-en":"@zxcvbn-ts/language-en","core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453}],3:[function(e,t,r){t.exports={FEATURE_UPDATE_VERSION:"8.2.2.0",RELEASE_BUILD:!0,SENTRY_DSN:"https://59c751ea3ddd8b2f16df416aea4c19ae@sentry-antitrack.nortonlifelock.com/14",env:"prod",isIntEnv:!1,CCT_URL:"cloudconnect2",RETURN_URI:"https://accesstoken.idsafe.norton.com/",CLIENT_ID:"VEF4GPDMZZ/accesstoken.idsafe.norton.com/symantec",TELEMETRY_TRACKING_ID:"UA-80690213-1",IDSAFE_PORTAL_URL_IDENTITY:"identitysafe",IDSAFE_PORTAL_URL_SEARCH:"search",IDSAFE_PORTAL_URL_SEARCHSAFE:"searchsafe",NGP_PORTAL_URL:"my",LAYOUTMEDIA_SKU:21378613,PARTNER_UNITID:5039,CDN_URL:"static.nortoncdn.com",AWS_REGION:"us-east-1",PROVIDER_URL:"login.norton.com/sso/oidc1/token",POOL_ID:"us-east-1:bf6139ac-7ae1-4a8f-8ef5-1e4aeeca8d06",SEAMLESS_ONBOARDING_DEEPLINK_URL:"https://identitysafe.norton.com/content/ui/seamless-onboarding-page.html",LEGACY_PRODUCT_NAME_IN_TELMETRY:"Norton Identity Safe",FIREBASE_CONFIGURATION:{apiKey:"AIzaSyB6GZuteRcGoegx-IDxK37dLpz7ekivMt4",authDomain:"ncs-spoc.firebaseapp.com",databaseURL:"https://ncs-spoc.firebaseio.com",projectId:"ncs-spoc",storageBucket:"ncs-spoc.appspot.com",messagingSenderId:"9988494302",appId:"1:9988494302:web:c838042d2dd169afde034f",measurementId:"G-L8E2R4YBJX"},NSL_DOMAIN:"login",MIXPANEL_PROJECT_TOKEN:"eac88aea8bc59a05574a3964bb81c0ba",MIXPANEL_ANONYMIZED_PROJECT_TOKEN:"4e18d018329f05750593852f303687ff",NORTON_ACCOUNT_SETTINGS_URL:"https://sitedirector.norton.com/932743328/?ssdcat=264&origin=npw&action=personalinformation&env=prod",appNodeID:"11",pbkdf2MD:"sha1",brandingName:"Norton"}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extensionContext=void 0;r.extensionContext=browser},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Z_INDEX=r.WIDTH=r.TYPES=r.STYLE=r.MESSAGES=r.MAX_WIDTH=r.IFRAME_ID=r.HTML=r.HEIGHT=r.DEFAULT_STRINGS=void 0;r.IFRAME_ID="auto-password-changer-overlay",r.HTML="html/auto-password-changer-overlay.html",r.STYLE="css/auto-password-changer-overlay.css",r.WIDTH="100%",r.HEIGHT="100%",r.Z_INDEX="2147483650",r.MAX_WIDTH="100%",r.TYPES={INTERACTIVE:"interactive",IN_PROGRESS:"inProgress",SUCCESS:"success",FAILURE:"failure",READY:"ready"},r.MESSAGES={OVERLAY_INIT:"15665A60-2320-42FC-B0F2-DF1603C91B6A",OVERLAY_HIDE:"85DFED6A-8929-45F2-B963-C3FB00A70B45"},r.DEFAULT_STRINGS={"passwordChanger.autoChange.overlay.interactive":"Please enter the information required below to change your password.","passwordChanger.autoChange.overlay.inProgress":"Norton Password Manager is changing your password.<strong> Do not close this page.</strong>","passwordChanger.autoChange.overlay.success":"Your new Norton Password Manager Login has been saved successfully.","passwordChanger.autoChange.overlay.failure":"An error occurred and your Login was not changed. We are working on this. Please try again later.","passwordChanger.autoCreate.overlay.interactive":"Please enter your information below to create your account.","passwordChanger.autoCreate.overlay.inProgress":"Norton Password Manager is creating an account for your email ID.<strong> Do not close this page.</strong>","passwordChanger.autoCreate.overlay.success":"Your new account for Norton Password Manager has been successfully created.","passwordChanger.autoCreate.overlay.failure":"An error occurred while creating your account. Please try again later."}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WIDTH=r.STYLE=r.IFRAME_ID=r.HTML=r.HEIGHT=r.DEFAULT_STRINGS=void 0;r.IFRAME_ID="compromised-password-ribbon",r.HTML="html/compromised-password-ribbon.html",r.STYLE="css/compromised-password-ribbon.css",r.WIDTH="100%",r.HEIGHT="55px",r.DEFAULT_STRINGS={"compromisedPassword.ribbon.signIn":"Sign in to your Norton account or create an account if you don't already have one.","compromisedPassword.ribbon.createVault":"Please create a vault for your logins by choosing a strong and unique password."}},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HTML=r.CREATE_VAULT_URL=void 0;r.HTML="html/onboardSetup.html#/onboard-setup/no-vault",r.CREATE_VAULT_URL="html/onboardSetup.html#/onboard-setup/create-vault"},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.frameSize=r.WIDTH=r.TYPE=r.STYLE=r.MAIN_UI=r.IFRAME_ID=r.HTML=r.HEIGHT=void 0;r.IFRAME_ID="symc-in-page-popup",r.MAIN_UI="html/popup.html",r.HTML="html/popup-in-page.html",r.STYLE="css/content-page.css",r.WIDTH=360,r.HEIGHT=400;const n=r.TYPE={FILL:1,SIGNIN:2};r.frameSize={[n.FILL]:{WIDTH:360,HEIGHT:480,HEIGHT_PER_LOGIN:54},[n.SIGNIN]:{WIDTH:360,HEIGHT:252}}},{}],9:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=f(e("./popup")),s=f(e("./compromised-password-ribbon")),a=f(e("./no-vault")),u=f(e("./vault-unlock")),l=f(e("./auto-password-changer-overlay")),c=e("./../../../vault/vaultConstants");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}const p=new class{constructor(){(0,o.default)(this,"SIGNIN_SESSION_CONTAINER","signin_session"),(0,o.default)(this,"RTL_LOCALES",["ar","he"]),(0,o.default)(this,"BROWSER_ACTION_POPUP",{TYPE:{SIGNIN:1,OPEN_VAULT:2,CLOSE_VAULT:3,MAIN_UI:4,SPINNER:5},MESSAGES:{INIT:"30C7D3F8-FECA-44AA-BAB6-6CF92644970F",SIGNIN_CLICKED:"234F1844-4991-444D-E383-E0B11DB8C5CE",OPEN_VAULT_CLICKED:"197050C0-3D60-4439-C342-524FC32D385A",SIGNOUT_CLICKED:"370D02D6-7A7A-4829-E0B3-35D9EB52CA26",CANCEL_CLICKED:"E9959AE1-C42D-450F-C44E-27109BE9AE2F",CLOSE_VAULT_CLICKED:"2AB1F432-9A5E-42F1-9242-AF1E20D48337",LOGINS_VIEW_MESSAGES:"EC56A5BF-1A5D-42EF-D3D5-46BC7A167E5C",LOGINS_VIEW_RESPONSE_MESSAGES:"B65A4737-15E5-471E-AAE2-AF8D2177E142",MISC_OPTIONS_CLICKED:"AB458FB7-D17E-4EF3-E589-3397072DA993",MISC_OPTIONS_ONLINE_VAULT_CLICKED:"E0E84332-58DE-40D2-AE0E-8762482D72F8",MISC_OPTIONS_SETTINGS_CLICKED:"1116EC9D-5356-419C-D590-ED46172E39F6",MISC_OPTIONS_IMPORT_CLICKED:"656FB868-AA38-4711-9BC3-8F86CA01FF3F",MISC_OPTIONS_DASHBOARD_CLICKED:"FB08584C-5BF1-4FC0-8A46-08A88835B53F",MISC_OPTIONS_SYNC_VAULT:"D5AF2C7B-B384-48BB-D19C-8B3568312FBA",MISC_OPTIONS_HELP_CLICKED:"98B52A50-5DB9-4BA1-81E4-760D2C93A389",MISC_OPTIONS_FEEDBACK_CLICKED:"8231F726-BFB9-4DA5-CC1D-9E0B0E8FF5ED",MISC_OPTIONS_EXPORT_CLICKED:"734A4B23-0DC0-49E4-B781-75FBE803085F",MISC_OPTIONS_CLOSE_VAULT_CLICKED:"B5931EF7-6972-4E81-900B-8642C12B43A0",MISC_OPTIONS_GENERATE_PASSWORD_CLICKED:"04E02A9C-5614-4A01-A056-3C20138F5335",MISC_OPTIONS_EULA_CLICKED:"C4EEC33C-FB3B-44A9-E4F9-4CFF29866287",MISC_OPTIONS_LEGAL_CLICKED:"d5b79ba0-924d-4e81-a1a4-86af5dd900d2",MISC_OPTIONS_PRIVACY_POLICY_CLICKED:"4D9C550C-DBB9-4793-8987-2219AE89BB54",MISC_OPTIONS_GLOBAL_PRIVACY_STATEMENT_CLICKED:"c505160a-32fd-475c-959b-a86e7abbcf50",MISC_OPTIONS_PASSWORDLESS_VAULT_UNLOCK_KB_CLICKED:"4EE9C46E-5084-47D4-AFC1-FEF7342BC459",LOGINS_VIEW_LOGIN_CLICKED:"2D7E110E-E640-413F-841B-040EFC299B8F",LOGINS_VIEW_LOGIN_SAVE_CLICKED:"FB364AC9-88EE-406A-E584-72F418152BAC",POPUP_SELECTED_LOGIN_VIEW:"4f584ab9-e130-4879-ba76-22aa3c92d8eb",POPUP_SET_LOGIN_FAVORITE:"012316fc-eb43-4b74-b851-2362a17ef630",LOGIN_ITEM_EDIT_OPTION_CLICKED:"8a0892d5-4c66-4de8-9ede-32fb40a5a293"},ICON_ON_PATH:{16:"images/ic-extension-on.png",38:"images/ic-extension-on@2x.png",54:"images/ic-extension-on@3x.png"},ICON_OFF_PATH:{16:"images/ic-extension-warn.png",38:"images/ic-extension-warn@2x.png",54:"images/ic-extension-warn@3x.png"},ALERT_ICON_PATH:{16:"images/ic-extension-warn.png",38:"images/ic-extension-warn@2x.png",54:"images/ic-extension-warn@3x.png"}}),(0,o.default)(this,"NUDGE_SCREEN",{CONTENT_PAGE_URL:"/content/ui/onboardSetup.html",MESSAGES:{UI_INIT:"F9CC44CA-4FF9-4A4E-8306-F967D045887C",NUDGE_SCREEN_SHOWN:"F5B208C9-642B-49F9-942A-4E357BDC5EEC",NUDGE_SCREEN_CLOSED:"8B647DBF-E09C-4AA1-BA73-54418221FCEC",GET_NUDGE_SCREEN_STATUS:"692D19D5-CD59-43F2-A867-7C4C1B675E57",AUTO_SIGNIN_SIGNUP:"3FB94A22-CC03-49EE-8A25-EA882EEEB7ED",CAN_AUTO_CREATE_NA:"BEA05CA9-D970-404E-AED5-451322331E60",OPEN_SIGN_IN_PAGE:"1BCAE7EA-57D6-4FFF-95E5-54D1FC7C2D05",REMOVE_NPW_CLICKED:"c4324ceb-8b56-4d5d-bc48-ec07e444d68d",GLOBAL_PRIVACY_STATEMENT_CLICKED:"822c71a4-6b52-4976-b094-82c12bfca811",CHECK_PRIVACY_PROMPT_CONSENT_STATUS:"66d44dd7-7c8e-40b9-a883-8853ed729ae6",STORE_PRIVACY_CONSENT:"7610199f-0672-4247-b2a0-bb7ed0f958c4",FF_AMO_CLICK_EVENT:"1ed5e175-3d60-42a8-aa06-6f2a89ce6bb1",EXT_PINNING_GUIDANCE_STATUS:"d791f2d1-2d5b-4652-807b-744be1c38cee",STORE_EXT_PINNING_GUIDANCE_CLOSE:"03d5e9bb-357c-4634-b4b1-9190111da020",ON_PRIVACY_CONSENT_DECLINE:"87905dc1-d046-44de-9d58-e3c4f1216011"}}),(0,o.default)(this,"NPW_NUDGE","npw_nudge"),(0,o.default)(this,"SETTINGS",{LOGIN_SAVING_TYPE:{ALWAYS:"Always",ASK:"Ask"},OFFER_AUTO_FILL:{CLICK:"Click",LOAD:"Load"}}),(0,o.default)(this,"MESSAGES",{NA_LOGGEDOUT:"49ca1b60-a49a-40bc-9b4b-c845ccb10855",VAULT_UNLOCK_ERROR:"bfb9fa0f-d041-4f28-cd1e-18689d257317",VAULT_LOGGEDIN:"a2833314-12ea-4347-be69-4a57664dae3d",VAULT_ISLOGGEDIN:"fad03dea-102e-4190-839d-7b4435abc5af",VAULT_GET_LOGINS_BY_URL:"9e577b0c-e55b-43f7-d70e-5e64f9eff681",VAULT_GET_LOGIN_BY_ID:"f075fe03-a5fc-4abd-cdce-3963dcf29dc6",VAULT_GET_CARD_BY_ID:"9433B656-9179-46E9-A9CE-F46EBC58B18C",VAULT_GET_CARD_ITEMS:"7c8c8af8-682b-4350-889c-6665a830bb5e",CHANGE_PASSWORD_SUBMISSION:"0E76BD06-F2BF-4A6D-AE5B-D45092814F00",VAULT_PROCESS_LOGIN_FORM_SUBMISSION:"015bd5bc-6181-4bc0-86dc-3e2d502f207f",GET_SANDBOX_INFORMATION:"3196f7d9-de0b-4d62-b302-5c27888cd0bb",GET_SANDBOX_INFORMATION_CS:"98528214-1f52-4d5a-a857-b905b0ea668d",VAULT_CLOSED:"F9BDF8F8-7DE2-48A5-C11C-DFC280058A19",FORCE_SYNC_STARTED:"5562D854-B9D2-4703-BACC-B4EE4A706D77",FORCE_SYNC_COMPLETED:"329126BC-FA4F-4BF7-D65A-83F656038117",CAN_SHOW_SIGNIN_POPUP:"396CA8DC-F546-474A-C7B7-FC825A15402C",IS_URL_EXCLUDED_FROM_WAX:"87e5ab76-6467-4945-f788-0c3d2efdae47",IS_URL_EXCLUDED_FROM_CAPTURE:"ae142d3b-52c3-45f9-ca28-bc44d9ef842c",IS_URL_EXCLUDED_FROM_ADDING_MUTATION_OBSERVER:"d6b5ed21-ebce-4e50-f732-adcb692cf937",LAUNCH_DELETE_VAULT_FLOW:"8c4532fe-ff73-4f38-a639-f415bc17437a",CLOSE_CURRENT_TAB:"7daee500-dcd7-4bc1-a6a3-0b6f61d90aa9",COMPROMISED_PASSWORD_CHECK:"20cfd3e4-5428-4bd3-90f9-3c212743d614",COMPROMISED_PASSWORD_CHECK_RESPONSE:"e3471b56-5d78-4a81-aa25-3b463203bc64",SHOULD_START_WAX:"0967bdb5-d052-43ae-b037-c706009e0820",PARTNER_INFO:"7ce684d3-f0ee-457d-98e4-8ac52f56db89",OPEN_VAULT_AFTER_SETUP:"f3c43d68-c9e2-4165-9f1f-3756294ef1ec"}),(0,o.default)(this,"SECURITY_DASHBOARD",{PASSWORD_CATEGORY_RANGE:{VERY_WEAK:30,WEAK:50,MEDIUM:80,STRONG:90,VERY_STRONG:100},ITEM_TYPE:{COMPROMISED:"ab6d00a8-205c-11e8-b467-0ed5f89f718b",COMMON:"75f931d3-fc82-4f91-8bd2-5991db2aeea7",WEAK:"b0bd8da3-f47d-4e87-82a4-b793fde4f811",DUPLICATE:"50fdb40a-2c74-4750-823a-298d0eac7197",OLD:"4abaca85-905c-4e33-bd7a-e9113cae6f1d",TOTAL:"eeb62c4c-1a62-4b89-89dd-ba91a8effce9",ARCHIVED:"a75fb9e7-e8b4-4c2a-9aeb-257b6a24354d"},ITEM_VIEWS:{COMPROMISED_VIEW:"Compromised",COMMON_VIEW:"Common",STRENGTH_VIEW:"Strength",DUPLICATE_VIEW:"Duplicate",AGE_VIEW:"Age"},MESSAGES:{CHANGE_LOGIN_PASSWORD:"d2086b78-286f-4409-b99d-e7e1fb693a22",CANCEL_CHANGE_LOGIN_PASSWORD:"4f2c4c83-988d-4ea0-a7a2-4a0d22a209af",TASK_STATUS:"e4a5355c-f081-4592-a37e-7f69bd9dd8c6",PAGE_ACTIONS:"d8896ef6-4315-4ff8-b1b1-08d27a326a92",REQUEST_LIST_VIEW_DATA:"7C5B2343-D348-4DDC-A21D-64F6349AF7D0",REQUEST_RIBBON_DATA:"8f98d97c-a4b1-401a-9fc8-284396663b06",REQUEST_PASSWORD_FOR_LOGIN_ITEM:"EBF57B73-60E0-4346-A777-B47197D39C71",CLEAR_GUID_STATUS_MAP:"5f47bb44-265a-4ccc-b830-44c72d27dfb7",AUTO_CHANGE_RUNNING:"2fa85339-6703-41e0-a608-d45927555e77",REQUEST_DASHBOARD_VISIT_STATUS:"35bfe4e3-9af3-4756-9bfc-5f3e739a343e",OPEN_LEARNMORE:"99ddd5f9-b219-4386-9719-3dee4875a2e8",AUTOCHANGE_BANNER_TYPE:"CE5C7927-9A50-492E-A66A-FB72452305A1",AUTOCHANGE_CS_TELEMETRY:"E43DB3F6-1D90-46FF-9070-9EB0089F0662"},TASK_STATUS:{FAILED:"failed",SUCCESS:"success",NEXT_PAGE:"nextPage",GET_PAGE:"getPage",INTERACTIVE_STEP:"interactiveStep",NEW_PASSWORD:"newPasswordTakenFromPasswordInputBox",LOGOUT:"Logout"}}),(0,o.default)(this,"VAULT_TAB",{DASHBOARD_HEALTH_CATEGORIES:[{score:this.SECURITY_DASHBOARD.PASSWORD_CATEGORY_RANGE.WEAK,category:"WEAK"},{score:this.SECURITY_DASHBOARD.PASSWORD_CATEGORY_RANGE.MEDIUM,category:"MEDIUM"},{score:this.SECURITY_DASHBOARD.PASSWORD_CATEGORY_RANGE.VERY_STRONG,category:"STRONG"}],ITEM_TYPE:{LOGIN:"9C30B050-7026-421F-9374-5764E4693B88",WALLET_CARD:"2F4F5C36-4C0F-4E92-BA03-1BF76B8C5524",WALLET_BANK:"D065EED5-249B-5195-9AE2-41C029A76BBE",ADDRESS:"C2ABD354-CB2B-4E09-A469-985E32C66A47",NOTES:"486187E7-BF58-4EA7-B655-2F5653828350"}}),(0,o.default)(this,"VERIFY_VAULT_PASSWORD",{RATE_LIMIT:10}),(0,o.default)(this,"autoPasswordChangerOverlayTypes",{INTERACTIVE:"interactive",IN_PROGRESS:"inProgress",SUCCESS:"success",FAILURE:"failure",READY:"ready"}),(0,o.default)(this,"MOT_ONBOARDING",{AUTOCHANGE_PASSWORD_SUCCESS:{URL:"/html/dashboard.html#/dashboard/password-success",URL_RETRY_FLOW:"/html/dashboard.html#/dashboard/password-success-retry",STRINGS:["Change Password","Save Password","Before you go... Save your new password","We've successfully changed your password, but it's not yet saved in your vault.","Please save it to your vault promptly. If you don't, you won't be able to access this account with {0}.","Save To Vault","Need help?","I'd rather copy and save it securely on my own","Copy","Your password's been changed successfully","Go to vault"],formatStrings:{"Please save it to your vault promptly. If you don't, you won't be able to access this account with {0}.":["__SHORT_PRODUCT_NAME__"]},MESSAGES:{UI_INIT:"EDC4932F-FC6E-4761-B5E5-CA9D54C304CF",LAUNCH_SAVE_TO_PASSWORD_MANAGER_FLOW:"0C2D3DBE-9918-4679-8C7E-FB31997F3AB6",COPY_PASSWORD_NOTIFICATION:"C85FA965-AF69-4CDC-9C41-043D0637122F",GET_NEW_PASSWORD:"606BE6F4-34E8-4B66-A542-8D976265470B"}},NA_SIGNIN_CREATE_ACCOUNT:{URL:"content/ui/na-signin-create-account.html",STRINGS:["Continue","Enter your email ID","Sign in or create your account using the email ID below","Sign In or Create Account","__SHORT_PRODUCT_NAME__"],MESSAGES:{UI_INIT:"006CB7AB-F6DC-4B24-B5A9-AB10B376E5A9",CONTINUE:"74815321-DF6C-4465-ABD9-285801A2B99C"},HTML:"content/ui/na-signin-create-account.html"},COMBINED_NA_VAULT_SETUP_COMPLETE:{URL:"content/ui/combined-na-vault-setup-complete.html",FORMAT_STRINGS:{emailID:"An account has been created for your email address, {0}.",site:"Your vault has been created. Your {0} and {1} passwords have been saved to it."},STRINGS:["Setup complete!","An account has been created for your email address, {0}.","Your vault has been created. Your {0} and {1} passwords have been saved to it.","Go to vault","__SHORT_PRODUCT_NAME__"],MESSAGES:{UI_INIT:"52CAC13E-67E6-4739-A144-2D78B7898B0F"}},SYSTEM_ERROR:{URL:"/html/dashboard.html#/dashboard/system-error",MESSAGES:{UI_INIT:"df440341-c386-45e3-bd4e-873f4681dc44",RETRY:"0ab74f44-d157-4025-a1fe-cf145e680caa"}},PASSWORD_CHANGE_ERROR:{URL:"/html/dashboard.html#/dashboard/password-change-error",MESSAGES:{UI_INIT:"dd930485-6ae2-4435-80af-f1d16ce9b002"},STRINGS:["An error has occurred and your password has not been changed.","We apologize for the inconvenience. Please try to change this password later.","__SHORT_PRODUCT_NAME__"]},NSL_PAGE:{MESSAGES:{IS_COMPROMISED_PASSWORD_FLOW_IN_PROGRESS:"0DCA6EDB-DB37-4E64-9F9F-F703AC04B9D9"}}}),(0,o.default)(this,"PARTNERS",{EE:"EE",BT:"BT",LENOVO:"LENOVO",DT:"DT"}),(0,o.default)(this,"NA_ACCOUNT","NA"),(0,o.default)(this,"PARTNER_ACCOUNT","PARTNER"),(0,o.default)(this,"NON_NORTON_ACCOUNT","NON_NORTON_ACCOUNT"),(0,o.default)(this,"ADD_CARDS_URL","/html/dashboard.html#/dashboard/wallet/card/add"),(0,o.default)(this,"EDIT_CARDS_URL","/html/dashboard.html#/dashboard/wallet/card/CARD_ITEM_ID/edit"),(0,o.default)(this,"DETAILS_CARDS_URL","/html/dashboard.html#/dashboard/wallet/card/CARD_ITEM_ID/details"),(0,o.default)(this,"ADD_BANK_ACCOUNTS_URL","/html/dashboard.html#/dashboard/wallet/account/add"),(0,o.default)(this,"EDIT_BANK_ACCOUNTS_URL","/html/dashboard.html#/dashboard/wallet/account/ACCOUNT_ITEM_ID/edit"),(0,o.default)(this,"DETAILS_BANK_ACCOUNTS_URL","/html/dashboard.html#/dashboard/wallet/account/ACCOUNT_ITEM_ID/details"),(0,o.default)(this,"EDIT_LOGIN_URL","/html/dashboard.html#/dashboard/logins/LOGIN_ITEM_ID/edit"),(0,o.default)(this,"DETAILS_LOGIN_URL","/html/dashboard.html#/dashboard/logins/LOGIN_ITEM_ID/details"),(0,o.default)(this,"ADD_LOGIN_URL","/html/dashboard.html#/dashboard/logins/add"),(0,o.default)(this,"LOGIN_URL","/html/dashboard.html#/dashboard/logins"),(0,o.default)(this,"WALLET_URL","/html/dashboard.html#/dashboard/wallet"),(0,o.default)(this,"ADD_ADDRESS_URL","/html/dashboard.html#/dashboard/addresses/add"),(0,o.default)(this,"EDIT_ADDRESS_URL","/html/dashboard.html#/dashboard/addresses/ADDRESS_ID/edit"),(0,o.default)(this,"EDIT_NOTE_URL","/html/dashboard.html#/dashboard/notes/NOTE_ITEM_ID/edit"),(0,o.default)(this,"DETAILS_NOTE_URL","/html/dashboard.html#/dashboard/notes/NOTE_ITEM_ID/details"),(0,o.default)(this,"DETAILS_ADDRESS_URL","/html/dashboard.html#/dashboard/addresses/ADDRESS_ID/details"),(0,o.default)(this,"ADD_NOTE_URL","/html/dashboard.html#/dashboard/notes/add"),(0,o.default)(this,"fieldStyling",{DIV_ID:"norton-idsafe-field-styling-divId",IMG_ID:"norton-idsafe-field-logo-imgId",IMG_PATH:"images/npw-badge-icon.svg",IMG_PATH_LOCKED:"images/npw-badge-icon-locked.svg",DIV_HEIGHT_REC:22,DIV_HEIGHT_RATIO:16,DIV_LEFT_RTL:6,DIV_LEFT_LTR:180,DIV_WIDTH_REC:186,Z_INDEX:2147483646,VISIBLE_THRES:3,WAIT_TIME:50,BADGE_COLOR:"#007644",MAX_ICON_HEIGHT_WIDTH:24,MIN_ICON_HEIGHT_WIDTH:16}),(0,o.default)(this,"popupType",{FILL:"fill",SIGNIN:"signIn",UNLOCK:"unlock",PASSWORD_GENERATOR_FILL:"passwordGeneratorFill",PASSWORD_GENERATOR:"passwordGenerator",COMPLEX_PASSWORD_GENERATOR:"complexPasswordGenerator",ALL_RELEVANT_LOGINS:"allRelevantLogins",USERNAME:"username",EMPTY_INFO:"emptyInfo",EMPTY_INFO_EXPANDED:"emptyInfoExpanded",CARD:"card",PASSWORD_PROTECTED_ITEM:"passwordProtectedItem"}),(0,o.default)(this,"popupHeight",{[this.popupType.FILL]:152,[this.popupType.SIGNIN]:252,[this.popupType.UNLOCK]:225,[this.popupType.PASSWORD_GENERATOR_FILL]:72,[this.popupType.PASSWORD_GENERATOR]:215,[this.popupType.COMPLEX_PASSWORD_GENERATOR]:363,[this.popupType.ALL_RELEVANT_LOGINS]:126,[this.popupType.USERNAME]:93,[this.popupType.EMPTY_INFO]:120,[this.popupType.EMPTY_INFO_EXPANDED]:225,[this.popupType.CARD]:95,[this.popupType.PASSWORD_PROTECTED_ITEM]:308}),(0,o.default)(this,"COMMON_SIZE_PARAMETERS",{WIDTH:360,HEIGHT_PER_LOGIN:54,THREEDOT_MENU_HEIGHT:140}),(0,o.default)(this,"popup",{IFRAME_ID:"symc-in-page-popup",MAIN_UI:"content/ui/popup.html",HTML:"html/popup-in-page.html",STYLE:"css/content-page.css",WIDTH:360,HEIGHT:400,TYPE:this.popupType}),(0,o.default)(this,"CREDITCARD",{type:{Visa:"Visa",MasterCard:"MasterCard",Discover:"Discover",AmEx:"American Express",JCB:"JCB"}}),(0,o.default)(this,"CARD",{CVC_OR_CVV:"cvc-or-cvv",CARD_PIN:"card-pin",CARD_NUMBER:"card-number",NAME_ON_CARD:"name-on-card",CARD_NAME:"card-name",VALID_THRU:"valid-thru"}),(0,o.default)(this,"BADGE",{MAX_OFFSET_WIDTH:50}),(0,o.default)(this,"BROWSER_TYPE",{CHROME:"Chrome",FIREFOX:"Firefox",EDGE:"Edge",SAFARI:"Safari",EDGE_CHROMIUM:"Edge-Chromium"}),(0,o.default)(this,"NOTIFICATION_IFRAME_HEIGHT",{WARNING_NOTIFICATION:340,QUESTION_NOTIFICATION_WAX:300,QUESTION_NOTIFICATION:205,QUESTION_NOTIFICATION_WAX_SAVE_AS_NEW_LOGIN:330}),(0,o.default)(this,"SETTINGS_URL","/html/dashboard.html#/dashboard/settings"),(0,o.default)(this,"TOPSITE_SUGGESTION",{USER_INPUT_SUGGESTION_NAME:"USER_INPUT"}),(0,o.default)(this,"COMPROMISED_PASSWORD_RIBBON",s),(0,o.default)(this,"NO_VAULT",a),(0,o.default)(this,"POPUP",i),(0,o.default)(this,"VAULT_UNLOCK",u),(0,o.default)(this,"AUTO_PASSWORD_CHANGER_OVERLAY",l),(0,o.default)(this,"VAULT_ITEM_TYPE_STRING",{LOGIN:"login",CONTACT:"address",BANK_ACCOUNT:"account",CARD:"card",NOTE:"note"}),(0,o.default)(this,"NOTIFICATION_WAX_TYPE",{SAVE:0,REPLACE:1}),(0,o.default)(this,"formTypes",{Login:"Login",PartialLogin:"PartialLogin",MultiPageLogin:"MultiPageLogin",CardsPage:"CardsPage",PartialCardsPage:"PartialCardsPage",ChangePasswordPage:"ChangePasswordPage",LimitedChangePasswordPage:"LimitedChangePasswordPage",PartialChangePasswordPage:"PartialChangePasswordPage"}),(0,o.default)(this,"NOTIFICATION_HTML","notification.html"),(0,o.default)(this,"POPOVER_LIST_ROUTE",{Favorites:"/popover/favorites",Logins:"/popover/logins",Wallet:"/popover/wallet",Addresses:"/popover/addresses",Notes:"/popover/notes"}),(0,o.default)(this,"WAX_FIELD_ELEMENT_CLICKED",{BADGE:"badge",WAX_INPUT_FIELD:"wax-input-field"}),(0,o.default)(this,"POPUP_TELEMETRY_HELPERS",{ON_SITE_LOAD:"on-site-load",ON_BADGE_CLICK:"on-badge-click",ON_WAX_INPUT_FIELD_CLICK:"on-wax-input-field-click"}),(0,o.default)(this,"TAG_EXISTS_ERROR","Item already exists in the tag"),(0,o.default)(this,"filterIdItemTypeMapWallet",{1:c.ItemType.CreditCard,2:c.ItemType.BankAccount}),(0,o.default)(this,"filterIdItemTypeMapFavorite",{1:c.ItemType.Login,2:c.ItemType.CreditCard,3:c.ItemType.BankAccount,4:c.ItemType.Identity,5:c.ItemType.Note})}};Object.freeze(p);r.default=p},{"./../../../vault/vaultConstants":758,"./auto-password-changer-overlay":5,"./compromised-password-ribbon":6,"./no-vault":7,"./popup":8,"./vault-unlock":10,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453}],10:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(r,"__esModule",{value:!0}),r.UNLOCK_VAULT_URL=r.MESSAGES=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(e("./messages"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}r.MESSAGES=n;r.UNLOCK_VAULT_URL="html/onboardSetup.html#/onboard-setup/unlock"},{"./messages":11,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UNLOCK_VAULT=r.UI_INIT=r.SIGNOUT_OF_NA=r.SHOW_VAULT_UNLOCK_PAGE=r.SET_OPEN_VAULT_UI=r.SEND_UNLOCK_VAULT_TO_MOBILE=r.OPEN_VAULT_TAB_UI=void 0;r.SEND_UNLOCK_VAULT_TO_MOBILE="f1233c51-a7cd-4262-9d79-ec6ec5a8d078",r.UNLOCK_VAULT="3c9e00d6-23b9-4785-9708-0cdab142406e",r.SIGNOUT_OF_NA="db170494-4555-4d71-bc1d-8fab6ec9ab65",r.SET_OPEN_VAULT_UI="C3806AE8-24D1-4551-8738-E7DF520E87CF",r.SHOW_VAULT_UNLOCK_PAGE="e5ab9ec0-b21a-4366-ac86-3ed9811ca95b",r.UI_INIT="74ef9d7a-c6a4-4ab1-a531-b77e6cdde993",r.OPEN_VAULT_TAB_UI="cbdf8b78-c0c9-4501-9ecb-03ef82b99327"},{}],12:[function(e,t,r){"use strict";e("./init"),e("./core/background/core"),e("./feature/nudge/nudgeController"),e("./portal/background/portalInstallFlowBG"),e("./common/notificationHandler"),e("core/background/automationHelper")},{"./common/notificationHandler":18,"./core/background/core":28,"./feature/nudge/nudgeController":94,"./init":130,"./portal/background/portalInstallFlowBG":140,"core/background/automationHelper":24}],13:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("extensionContext"),s=n(e("configuration")),a=e("./global.types");const u=new class{constructor(){(0,o.default)(this,"IDSAFE_CREATED_TAB","09C1599C-0FEC-4006-A30E-0A9328F71EE3"),(0,o.default)(this,"ONBOARDING_TAB_URL","5704298b-b1bb-466e-9c9d-95c31d1d2c72"),(0,o.default)(this,"IDSAFE_CLOSED_TAB","63A8883A-B614-428E-AC89-5ECBA18A3717"),(0,o.default)(this,"IDSAFE_GLOBAL_SETTINGS_CONTAINER","A67898F3-323E-4B75-D80E-117C4DC28279"),(0,o.default)(this,"COMPROMISED_PASSWORD_NOTIFICATION_CONTAINER","3E5BCB53-C676-4732-991A-4E26BFBD901B"),(0,o.default)(this,"CCT_URL_PARAMKEY",{USER_AGENT:"X-Symc-User-Agent",NEW_SESSION:"newSession",ACCESS_TOKEN:"x-symc-access-token"}),(0,o.default)(this,"VERSION",i.extensionContext.runtime.getManifest().version),(0,o.default)(this,"PB_VERSION","1.0"),(0,o.default)(this,"THRESHOLD_VERSION_FOR_MV3","8.2.0.0"),(0,o.default)(this,"CCT",{ACTION:"LicenseCheck",REQUESTERIDS:"https://accesstoken.idsafe.norton.com/",PARTNER_UNITID:s.default.PARTNER_UNITID,LAYOUTMEDIA_SKU:s.default.LAYOUTMEDIA_SKU,SHOW_PARTNER_SSO_LOGIN:"true"}),(0,o.default)(this,"CCT_DOMAIN",`https://${s.default.CCT_URL}.norton.com`),(0,o.default)(this,"CCT_HOST",`${s.default.CCT_URL}.norton.com`),(0,o.default)(this,"CCT_URL",`${this.CCT_DOMAIN}/cloudconnect/home`),(0,o.default)(this,"IDENTITY_JOB","IDENTITY"),(0,o.default)(this,"MACHINE_GUID","machineGuid"),(0,o.default)(this,"CGUID","guid"),(0,o.default)(this,"INSTALL_SOURCE","A16F7827-DB33-4098-9F56-72638D7EAED0"),(0,o.default)(this,"INSTALL_DOMAIN","50056C6F-09E5-47CC-B1EA-A094060A586D"),(0,o.default)(this,"REQUEST_TRACING",{ATTEMPT_COUNT_KEY:"X-NLOK-Attempt-Count",TRACE_ID_KEY:"X-NLOK-Trace-ID",GUID_PREFIX:"PWE-",ATTEMPT_COUNT_PLACEHOLDER:"ATTEMPT_COUNT"}),(0,o.default)(this,"HTTP_PROTOCOL","http"),(0,o.default)(this,"HTTPS_PROTOCOL","https"),(0,o.default)(this,"URL_TYPE","url"),(0,o.default)(this,"VAULT_UNLOCK",{AWS_ERROR_TYPE:"x-amzn-errortype",AWS_REGION:s.default.AWS_REGION,PROVIDER_URL:s.default.PROVIDER_URL,POOL_ID:s.default.POOL_ID,SETTINGS_KEY:{REGISTERED_DEVICE:"E76FD9F5-93FC-4A98-89D8-F6FC9597E785",ENCODED_PASSWORD:"91D61DDF-81AD-4713-BD1E-3C84AC9DA5FF",DERIVED_KEYS:"3DEF239E-5A28-49D2-ABA6-EBAC8CB7C070",ENCRYPTED_AES:"85844F1D-791D-4F03-B0C7-71BF25375DAB",REGISTERED_TIME:"registeredTime",DEVICE_DETAILS:"deviceDetails",ENCRYPTED_AES_KEYS:"encryptedAESKeys",UNLOCK_DERIVED_KEYS:"unlockDerivedKeys",PASSWORD_SALT:"passwordSalt",AUTO_PASSWORDLESS_VAULT_UNLOCK_REQUEST:"autoPasswordlessVaultUnlockRequest",AUTO_UNLOCK:"autoUnlock"},RESPONSE_STATUS:{INVALID_SIGNATURE_EXCEPTION:"invalidsignatureexception",UNLOCK_REQUEST_SENT:"sent",UNLOCK_REQUEST_COMPLETE:"complete",UNLOCK_REQUEST_TIMED_OUT:"timedOut",UNLOCK_REQUEST_CANCELED:"cancel",UNLOCK_REQUEST_FAILED:"fail",SOMETING_WENT_WRONG:"somethingWentWrong",UNLOCK_WELCOME:"welcome"},ANDROID:"Android",IOS:"ios",UNLOCK_REQUEST_TIMEOUT:6e4,MIGRATE_IDS_SETTINGS:"D6B5C09F-F74F-4321-81F0-6AF34BB6AD80",RESPONSE_STATUS_CODE:{INVALID_PUBLIC_KEY:1e3,KEY_PAIR_NOT_EXSISTS:1001}}),(0,o.default)(this,"HEARTBEAT",{HEARTBEAT_PING_INTERVAL_TIME:1728e5,BROWSER_EXTENSION:"extension",ACTIVE_VAULT_USERS_PING_INTERVAL:864e5,ACTIVE_VAULT_USERS:"active_vault_users",ACTIVE_USERS:"active_users",VAULT_OPEN:"vault_open",HEARTBEAT_V2_PING_INTERVAL_IN_MILLISECONDS:864e5}),(0,o.default)(this,"FINGERPRINT","fingerPrint"),(0,o.default)(this,"INSTALL_STATUS",{INSTALL:a.InstallStatusType.INSTALL,UPDATE:a.InstallStatusType.UPDATE}),(0,o.default)(this,"INSTALL_STATUS_KEY","installStatus"),(0,o.default)(this,"INSTALL_DATE","installDate"),(0,o.default)(this,"INSTALL_REFERRER","installReferrer"),(0,o.default)(this,"TOUR_UI_SHOWN_KEY","tourUIShown"),(0,o.default)(this,"OPEN_VAULT_UI","openVaultUI"),(0,o.default)(this,"TELEMETRY_TRACKING_ID",s.default.TELEMETRY_TRACKING_ID),(0,o.default)(this,"RECOVERY_PROMOTION_STEP_KEY","recoveryPromotionStep"),(0,o.default)(this,"FEATURE_PROMOTION",{RECOVERY_FEATURE:{STEPS:{DEFAULT:"recoveryPromoDefault",STARTED:"recoveryPromoStarted",COMPLETED:"recoveryPromoCompleted"}}}),(0,o.default)(this,"WAS_ONBOARDED_PRIOR_TO_RECOVERY_PROMOTION_KEY","wasOnboardedPriorToRecoveryPromotion"),(0,o.default)(this,"ONBOARDING_STEP_PRIOR_TO_RECOVERY_PROMOTION_KEY","onboardingStepPriorToRecoveryPromotion"),(0,o.default)(this,"DEFAULT_STEP_RECOVERY_PROMOTION","stepDefault#"),(0,o.default)(this,"FIREBASE_CONFIGURATION",s.default.FIREBASE_CONFIGURATION),(0,o.default)(this,"ONBOARDING_PORTAL_DOMAIN","norton.com"),(0,o.default)(this,"ONBOARDING_PORTAL_SUBDOMAIN",[s.default.IDSAFE_PORTAL_URL_IDENTITY,s.default.IDSAFE_PORTAL_URL_SEARCH,s.default.IDSAFE_PORTAL_URL_SEARCHSAFE,s.default.NGP_PORTAL_URL]),(0,o.default)(this,"WWW_SUBDOMAIN","www"),(0,o.default)(this,"STORED_VERSION","storedVersion"),(0,o.default)(this,"WELCOME_NOTIFICATION_CLICKED","notificationClicked"),(0,o.default)(this,"autochange",{AUTOCHANGE_LABEL:"autochange",AUTOCHANGE_FAILED:"failed"}),(0,o.default)(this,"NORTON_IDENTITY_SAFE",s.default.LEGACY_PRODUCT_NAME_IN_TELMETRY),(0,o.default)(this,"NUDGE_SCREEN_OPEN","nudgeScreenOpen"),(0,o.default)(this,"ON_LOGIN_SAVED","87DCBAA8-1F01-4C95-A663-D6C6864C36B1"),(0,o.default)(this,"NORTON_SIGN_IN_SESSION","5FF6EAE3-9DD4-4E0B-99F6-4D7CE64C52AF"),(0,o.default)(this,"NPW_NUDGE","npw_nudge"),(0,o.default)(this,"NPW_ISOLATION","npw_isolation"),(0,o.default)(this,"ONBOARDING_URL_DOMAIN","norton.com"),(0,o.default)(this,"telemetryOptOut",{TIMEOUT:6e4,REOFFER_TIME_WINDOW:7776e6,NOTIFICATION_LEEWAY:3e5}),(0,o.default)(this,"settings",{CONTAINER:"com.symantec.idsafe-settings",WAX_SECURE_CONTAINER:"C73549A9-C542-4399-8C13-37BB3A1AE8F5",COMPROMISED_PASSWORD_SECURE_CONTAINER:"B9B8F48D-5DB9-488D-909E-02D921953EA7",AUTO_UNLOCK_SECURE_CONTAINER:"18DD5196-CB91-49FA-9ABA-3B83D8CD242E",COMPROMISED_PASSWORD_NOTIFICATION_KEY:"FD906281-DD83-46CE-BFFB-146CE2EC5F04",MAX_NOTIFICATION_COUNT:1e3,COMPROMISED_PASSWORD_SECURE_KEY:"4101E8D0-4845-452C-A015-48578B676BF9",AUTO_FILL:"autoFill",SHOULD_SET_AUTO_FILL_TO_FALSE:"shouldSetAutoFillToFalse",OFFER_AUTO_FILL:"offerAutoFill",AUTO_SAVE:"autoSave",LOGIN_SAVING:"loginSaving",SHARE_DATA_WITH_NORTON:"shareDataWithNorton",HIDE_FAVICON:"hideFavicon",DO_NOT_ASK_AGAIN:"doNotAskAgain",REQUIRE_VAULT_PASSWORD:"requireVaultPassword",DID_RESET:"DidReset"}),(0,o.default)(this,"EVENTS",{SPOC_CALLBACK:"C3D73D73-75C4-4675-BFDD-AAB5D9C0A903",VAULT_CLOSED:"0B8B5EA5-59EF-4E56-B6C8-B53244716241",SIGN_OUT:"2544944C-6754-47BD-BD41-6713431D10CA",VAULT_SYNC:"AF7B63E0-F40E-4B5A-B59B-2B2B5CC371DB"}),(0,o.default)(this,"performanceReporter",{COMPONENT:{IDSAFE:"IDSafe"},TYPE:{FORCE_SYNC_VAULT:"forceSyncVault",OPEN_VAULT:"openVault",VAULT_TAB_UI:"checkIfTabExistElseCreate",POPUP_HTML:"getLoginsInOrder"}}),(0,o.default)(this,"vaultTab",{MESSAGES:{UI_INIT:"ccd99bc2-0173-4f2f-84a4-d7301b145e7c",SEARCH_EVENT:"15064B5E-E6FD-4B13-9D24-C273B038784A",NEXT_ITEMSET:"2E089485-A24D-4541-BB93-6751A001B071",SWITCH_ITEM:"9C3278CD-9A3A-4631-A79D-9C52F5F45F65",GET_FIELD_VALUE:"6D8CB1C9-4EE5-46AF-84F2-6E193E2BD089",COPY_FIELD_VALUE:"C645860B-AB01-4858-90B9-64598DE3FA3B",REFRESH_VIEW:"E71A56E9-CC0D-4715-BFDF-2F521C8C30EC",DELETE_ITEM:"292F1892-D6B8-4438-AD26-3091F4A4AD8A",ADD_ITEM:"DDE36BEE-EA65-4A54-936E-7CE3E74613F7",UPDATE_ITEM:"36E6481A-F105-4CB9-84B4-ACF93E3365E6",GET_ITEM:"36E6481A-F105-4CB9-84B4-ACF93E3365F4",VERIFY_VAULT_PASSWORD:"3E4075E4-1745-4F1D-A77E-B8E520274FF8",LAUNCH_CHANGE_PASSWORD:"97E5BD4A-D8A1-43CA-B2C9-7D2E149AAA6B",TAB_VIEW_TYPE:"57D8F61E-F9A2-4A07-A547-058E9E7D3639",SPLASH_SHOWN:"A12VG294-240U-1093-UJ13-1WAFE13JODCI",SHOW_SETTINGS_MODEL:"AB9574F3-C842-47A4-9FF5-D5CD5DCFB557",SET_DELAYED_SPLASH_FLAG:"4271441d-eb58-4e9d-ab23-90bde5b65c1f",GET_DELAYED_SPLASH_FLAG:"f630b967-8076-4632-af2a-cc41bd907e61"}}),(0,o.default)(this,"ISO2_ISO3_LANGUAGE",{AB:"ABK",AA:"AAR",AF:"AFR",AK:"AKA",SQ:"SQI",AM:"AMH",AR:"ARA",AN:"ARG",HY:"HYE",AS:"ASM",AV:"AVA",AE:"AVE",AY:"AYM",AZ:"AZE",BM:"BAM",BA:"BAK",EU:"EUS",BE:"BEL",BN:"BEN",BH:"BIH",BI:"BIS",BS:"BOS",BR:"BRE",BG:"BUL",MY:"MYA",CA:"CAT",CH:"CHA",CE:"CHE",NY:"NYA",ZH:"ZHO",CV:"CHV",KW:"COR",CO:"COS",CR:"CRE",HR:"HRV",CS:"CES",DA:"DAN",DV:"DIV",NL:"NLD",DZ:"DZO",EN:"ENG",EO:"EPO",ET:"EST",EE:"EWE",FO:"FAO",FJ:"FIJ",FI:"FIN",FR:"FRA",FF:"FUL",GL:"GLG",KA:"KAT",DE:"DEU",EL:"ELL",GN:"GRN",GU:"GUJ",HT:"HAT",HA:"HAU",HE:"HEB",HZ:"HER",HI:"HIN",HO:"HMO",HU:"HUN",IA:"INA",ID:"IND",IE:"ILE",GA:"GLE",IG:"IBO",IK:"IPK",IO:"IDO",IS:"ISL",IT:"ITA",IU:"IKU",JA:"JPN",JV:"JAV",KL:"KAL",KN:"KAN",KR:"KAU",KS:"KAS",KK:"KAZ",KM:"KHM",KI:"KIK",RW:"KIN",KY:"KIR",KV:"KOM",KG:"KON",KO:"KOR",KU:"KUR",KJ:"KUA",LA:"LAT",LB:"LTZ",LG:"LUG",LI:"LIM",LN:"LIN",LO:"LAO",LT:"LIT",LU:"LUB",LV:"LAV",GV:"GLV",MK:"MKD",MG:"MLG",MS:"MSA",ML:"MAL",MT:"MLT",MI:"MRI",MR:"MAR",MH:"MAH",MN:"MON",NA:"NAU",NV:"NAV",ND:"NDE",NE:"NEP",NG:"NDO",NB:"NOB",NN:"NNO",NO:"NOR",II:"III",NR:"NBL",OC:"OCI",OJ:"OJI",CU:"CHU",OM:"ORM",OR:"ORI",OS:"OSS",PA:"PAN",PI:"PLI",FA:"FAS",PL:"POL",PS:"PUS",PT:"POR",QU:"QUE",RM:"ROH",RN:"RUN",RO:"RON",RU:"RUS",SA:"SAN",SC:"SRD",SD:"SND",SE:"SME",SM:"SMO",SG:"SAG",SR:"SRP",GD:"GLA",SN:"SNA",SI:"SIN",SK:"SLK",SL:"SLV",SO:"SOM",ST:"SOT",ES:"SPA",SU:"SUN",SW:"SWA",SS:"SSW",SV:"SWE",TA:"TAM",TE:"TEL",TG:"TGK",TH:"THA",TI:"TIR",BO:"BOD",TK:"TUK",TL:"TGL",TN:"TSN",TO:"TON",TR:"TUR",TS:"TSO",TT:"TAT",TW:"TWI",TY:"TAH",UG:"UIG",UK:"UKR",UR:"URD",UZ:"UZB",VE:"VEN",VI:"VIE",VO:"VOL",WA:"WLN",CY:"CYM",WO:"WOL",FY:"FRY",XH:"XHO",YI:"YID",YO:"YOR",ZA:"ZHA",ZU:"ZUL"}),(0,o.default)(this,"ACCEPTED_SCHEMES",["http","https"]),(0,o.default)(this,"POPUP_INDEX_URL","/html/popover.html"),(0,o.default)(this,"DASHBOARD_INDEX_URL","/html/dashboard.html"),(0,o.default)(this,"FAVORITES_URL","/html/dashboard.html#/dashboard/favorites"),(0,o.default)(this,"PASSWORD_GENERATOR_URL","/html/dashboard.html#/dashboard/password-generator"),(0,o.default)(this,"LOGIN_URL","/html/dashboard.html#/dashboard/logins"),(0,o.default)(this,"LOGIN_URL_SEARCH","/html/dashboard.html#/dashboard/logins/search"),(0,o.default)(this,"SETTINGS_URL","/html/dashboard.html#/dashboard/settings"),(0,o.default)(this,"FEEDBACK_URL","https://gendigital.qualtrics.com/jfe/form/SV_eM0Jz36NWeBBkeG?Brand=Norton&Source=PWMext&"),(0,o.default)(this,"SITE_DIRECTOR_URL","https://sitedirector.norton.com/932743328?ssdcat=SSDCAT_VALUE&env=prod&origin=idsafe&displang=iso3:ISO3_LAN_CODE&displocale=iso3:ISO3_COUNTRY_CODE"),(0,o.default)(this,"ADDRESS_URL","/html/dashboard.html#/dashboard/addresses"),(0,o.default)(this,"SAFETY_DASHBOARD_URL","html/dashboard.html#/dashboard/safety-dashboard"),(0,o.default)(this,"EULA_SSDCAT",175),(0,o.default)(this,"EULA_DEST","lsa"),(0,o.default)(this,"HELP_SSDCAT",411),(0,o.default)(this,"LEGAL_SSDCAT",151),(0,o.default)(this,"LSA_SSDCAT",175),(0,o.default)(this,"LEGAL_DEST","legal"),(0,o.default)(this,"LSA_DEST","lsa"),(0,o.default)(this,"GLOBAL_PRIVACY_STMT_SSDCAT",301),(0,o.default)(this,"PASSWORDMANAGER_APPID","/11"),(0,o.default)(this,"NORTON_TENANT_ID","de527324-05e3-46eb-a2a7-43ab29c1aff7"),(0,o.default)(this,"GLOBAL_PRIVACY_DEST","gps"),(0,o.default)(this,"PRIVACY_DEST","privacy"),(0,o.default)(this,"PRIVACY_POLICY_SSDCAT",150),(0,o.default)(this,"SSDCAT_310",310),(0,o.default)(this,"ENCRYPTION_INFO_LEARN_MORE_URL","https://sitedirector.norton.com/932743328/?ssdcat=SSDCAT_VALUE&helpid=encryptionInfo&displang=iso3:ISO3_LAN_CODE&displocale=iso3:ISO3_COUNTRY_CODE"),(0,o.default)(this,"NORTON_ACCOUNT_SETTINGS_URL",s.default.NORTON_ACCOUNT_SETTINGS_URL),(0,o.default)(this,"SEAMLESS_ONBOARDING",{INIT:"8b4fab8f-a36d-4001-a373-4b4efa509f97",SEAMLESS_ONBOARDING_DEEPLINK_URL:s.default.SEAMLESS_ONBOARDING_DEEPLINK_URL,NOTIFICATION_TYPE:{SOMETING_WENT_WRONG:"somethingWentWrong"},RESPONSE_STATUS_CODE:{NA_CREATION_FAILED:1002,VAULT_CREATION_FAILED:1003,EMPTY_PAYLOAD:1004,PASSWORDLESS_VAULT_UNLOCK_REGISTRATION_FAILED:1005},QR_VALUE_EXPIRY_TIME_MILLIS:9e5,ONBOARDING_EXPECTED_TIME_MILLIS:3e5,SETTINGS_CONTAINER:"313e5513-c1db-44d6-9183-e5f2a7a86967",SETTINGS_KEY:{CONGRATULATIONS_SCREEN_SHOWN:"congratulationScreenShown",SEAMLESS_UNLOCK_SCREEN_SHOWN:"seamlessUnlockScreenShown",SEAMLESS_ONBOARDED_VIA_MOBILE:"seamlessonboardedviamobile"}}),(0,o.default)(this,"IS_VAULT_ACTIVE","839b4cb9-f187-41df-a0fa-bdeb34375e2b"),(0,o.default)(this,"IS_VAULT_DELETED","9BE8CA51-AA77-487B-9226-8869767F67B5"),(0,o.default)(this,"RECOVERY_FLOW_TYPE",{CREATE_VAULT:"Create",RESET_VAULT:"Reset",PROMOTION:"Upgrade"}),(0,o.default)(this,"ONBOARDING",{CURRENT_STEP:"cef5f249-e8ee-488e-ba97-83682311743b",IS_ONBOARDING:"cefbbb00-9fc9-428b-9792-12b49e0de030",STEPS:{STARTED:"started",CREATE_VAULT:"createVault",DOWNLOAD_RECOVERY:"downloadRecovery",SET_DEFAULT:"setDefault",PIN_EXTENSION:"pinExtension",ONBOARDED:"onboarded"},URLS:{index:"html/onboardSetup.html",createVault:"html/onboardSetup.html#/onboard-setup/create-vault",downloadRecovery:"html/onboardSetup.html#/onboard-setup/download-recovery",setDefault:"html/onboardSetup.html#/onboard-setup/set-default",pinExtension:"html/onboardSetup.html#/onboard-setup/pin-extension"}}),(0,o.default)(this,"RECOVERY",{IS_ACCOUNT_RECOVERY_COMPLETED:"366E78CB-6891-4CDA-8D00-A5771002CBA5"}),(0,o.default)(this,"SPOC_CHANNELS",{VAULT_MOBILE_REGISTRATION:35,PASSWORDLESS_VAULT_UNLOCK:36,SEAMLESS_ONBOARDING:37}),(0,o.default)(this,"AES_ALGORITHM",{GCM:"AES-GCM",CBC:"AES-CBC"}),(0,o.default)(this,"SPLASH_SCREEN_SHOWN","splashScreenShown"),(0,o.default)(this,"BYPASS_LOGIN_COUNT_FOR_SPLASH","99d84d80-417f-4583-ae11-5995cff421ec"),(0,o.default)(this,"UNLOCK_NOTIFICATION_COUNT","unlockNotificationCount"),(0,o.default)(this,"VAULT_UNLOCK_CONTAINER","41A00FCC-EB7E-42E2-B96D-798664F72AE8"),(0,o.default)(this,"ruleProfile",{AUTO_CREATE:"AutoCreate",AUTO_CHANGE:"AutoChange",CHECK_INVALID_LOGIN:"CheckWrongPassword"}),(0,o.default)(this,"ruleProfileEvent",{[this.ruleProfile.AUTO_CHANGE]:{STARTED:"37B5D82A-17DA-4FDB-A2D1-DC50B8F1BF62",FINISHED:"A8CA0068-B196-4C49-952A-6E947A3CE186"},[this.ruleProfile.AUTO_CREATE]:{STARTED:"F6A77C1A-0960-4A4B-A13A-157DE62239CD",FINISHED:"BCCB9434-BAC8-455A-AE73-74FCEE00BCDE"},[this.ruleProfile.CHECK_INVALID_LOGIN]:{STARTED:"F6A77C1A-0960-4A4B-A13A-157DE62231CD",FINISHED:"BCCB9434-BAC8-455A-AE73-74FCEE001CDE"}}),(0,o.default)(this,"Login",{SIGNIN_BUTTON:"signin_button",USERNAME:"loginUsername",PASSWORD:"loginPassword",TOGGLEBUTTON:"loginToggleButton"}),(0,o.default)(this,"Register",{SIGNUP_BUTTON:"btn-sign-up",EMAIL:"registerEmailAddress",PASSWORD:"registerPassword",TOGGLEBUTTON:"registerToggleButton",CONFIRM_EMAIL:"confirmEmailAddress",CHECKBOX:"marketing2"}),(0,o.default)(this,"NSL_DOMAIN",`https://${s.default.NSL_DOMAIN}.norton.com`),(0,o.default)(this,"COMMONLY_USED_PASSWORD","https://support.norton.com/sp/landing?entsrc=help&helpid=common_password&"),(0,o.default)(this,"GUESSABLE_PASSWORD","https://support.norton.com/sp/landing?entsrc=help&helpid=guessable_password&"),(0,o.default)(this,"COMMON","common"),(0,o.default)(this,"GUESSABLE","guessable"),(0,o.default)(this,"WRONG","wrong"),(0,o.default)(this,"RIGHT","right"),(0,o.default)(this,"TOP_1","top-1"),(0,o.default)(this,"NORTON_IDENTITY_SAFE_STRING","Norton Identity Safe"),(0,o.default)(this,"MIN_ACCEPTED_STRENGTH",8),(0,o.default)(this,"WEAK_PASSWORD_COLOR","#bd071d"),(0,o.default)(this,"STRONG_PASSWORD_COLOR","#339933"),(0,o.default)(this,"NEUTRAL_COLOR","#F3F3F3"),(0,o.default)(this,"PRIVACY_PROMPT",{REMOVE_NPW_URL:"https://addons.mozilla.org/LOCALE_LANG/firefox/addon/norton-password-manager",FF_AMO_GLOBAL_PRIVACY_STMT_URL:"https://addons.mozilla.org/en-US/firefox/addon/norton-password-manager/privacy",FF_AMO_TELEMETRY_MESSAGE:"08722a85-8ae0-46ba-bb9a-18341516d81e",SETTINGS_CONTAINER:"c425de7c-4723-4d12-b6d3-659b874d30cc",PRIVACY_CONSENT:"privacyConsent",BROWSER_RESTART_TIMES:"browserRestartTimes"}),(0,o.default)(this,"FRESH_INSTALL","freshInstall"),(0,o.default)(this,"AUTO_UNLOCK_POST_UPGRADE","a4342c05-2a7c-4ea6-9c31-b4ff7aa6239a"),(0,o.default)(this,"EXT_PINNING_GUIDANCE",{SETTINGS_CONTAINER:"b248cbcc-70d8-4559-b41f-0cb2c07e6546",EXT_PINNING_GUIDANCE_CLOSED:"extPinningGuidanceClosed"}),(0,o.default)(this,"VAULT_STATE",{INTERNET_UNAVAILABLE:0,INTERNAL_ERROR:3,NETWORK_ERROR:4,CLIENT_UNAUTHORIZED:6,VAULT_SYNCED:9,NOT_LOGGED_IN:14,VAULT_LOCKED:15,VAULT_EXISTS:16,VAULT_NOT_FOUND:17,SSO_UNAUTHORIZED:18,CREATE_VAULT_SUCCESS:19,O2_RATE_LIMITED_ERROR:20,DELETE_VAULT_SUCCESS:21,CHANGE_VAULT_PASSWORD_SUCCESS:22}),(0,o.default)(this,"NA_ACCOUNT","NA"),(0,o.default)(this,"VAULT_STATE_INFO",{INCORRECT_DECRYPT_KEY_ERROR:"decryption key is incorrect."}),(0,o.default)(this,"COMPROMISED_VAULT_PASSWORD_KB_URL","https://sitedirector.norton.com/932743328/?ssdcat=SSDCAT_VALUE&helpid=compromised_vault_password&displang=iso3:ISO3_LAN_CODE&displocale=iso3:ISO3_COUNTRY_CODE"),(0,o.default)(this,"ADD_DEVICE_KB_URL","https://sitedirector.norton.com/932743328/?ssdcat=SSDCAT_VALUE&helpid=add_mobiledevice&displang=iso3:ISO3_LAN_CODE&displocale=iso3:ISO3_COUNTRY_CODE"),(0,o.default)(this,"PASSWORDLESS_VAULT_UNLOCK_KB_URL","https://sitedirector.norton.com/932743328/?ssdcat=SSDCAT_VALUE&helpid=setup_mobile_unlock&displang=iso3:ISO3_LAN_CODE&displocale=iso3:ISO3_COUNTRY_CODE"),(0,o.default)(this,"IDSAFE_SECURITY_DASHBOARD_CONTAINER","A67898F3-323E-4B75-D80E-117C4DC28257"),(0,o.default)(this,"SECURITY_DASHBOARD_VISITED","SecurityDashboardVisited"),(0,o.default)(this,"SECURITY_DASHBOARD",{LIST_VIEW_FILTERS:{None:0,Strength:1,Duplicate:2,Age:3,Archived:4},LIST_VIEW_SORTING_COLUMN:{None:0,Strength:1,Duplicate:2,SiteName:3,Age:4,Action:5,Common:6,Compromised:7,Archived:8},SORT_ORDER:{None:0,ASCENDING_ORDER:1,DESCENDING_ORDER:2},LEARN_MORE_URL:"https://sitedirector.norton.com/932743328?ssdcat=164&env=prod&origin=idsafe&lang=SITE_DIRECTOR_LAN_CODE&service=safetydb",PASSWORD_CHANGE_SUCCESS_TEXT:"AutoChange Backup",PASSWORD_CHANGE_FAILLURE_TEXT:"AutoChange Fail",NOTIFICATIONS:{STRONG_MSG_NOTIFICATION:"StrongMsgNotification",MEDIUM_MSG_NOTIFICATION:"MediumMsgNotification",WEAK_MSG_NOTIFICATION:"WeakMsgNotification"}}),(0,o.default)(this,"SECURITY_DASHBOARD_HEALTH_STATUS_POPUP_NEXT_OCCURANCE","securityDashboardHealthStatusPopupNextOccurance"),(0,o.default)(this,"IDSAFE_SECURITY_DASHBOARD_NOTIFICATION_CONTAINER","A67898F3-323E-4B75-D80E-117C4DC28210"),(0,o.default)(this,"VAULT_HEALTH_STATUS_NEXT_PING","vaultHealthStatusNextPing"),(0,o.default)(this,"passwordChangerSiteProfile",{URL:"url",SKIP_POST_LOGOUT:"skipPostLogout",STARTING_PAGE:"startingPage",DEFAULT:"Default",NO_LOGOUT:"NoLogout"}),(0,o.default)(this,"passwordRuleRootCA","-----BEGIN CERTIFICATE-----MIIEvjCCA6agAwIBAgIQBtjZBNVYQ0b2ii+nVCJ+xDANBgkqhkiG9w0BAQsFADBhMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBDQTAeFw0yMTA0MTQwMDAwMDBaFw0zMTA0MTMyMzU5NTlaME8xCzAJBgNVBAYTAlVTMRUwEwYDVQQKEwxEaWdpQ2VydCBJbmMxKTAnBgNVBAMTIERpZ2lDZXJ0IFRMUyBSU0EgU0hBMjU2IDIwMjAgQ0ExMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwUuzZUdwvN1PWNvsnO3DZuUfMRNUrUpmRh8sCuxkB+Uu3Ny5CiDt3+PE0J6aqXodgojlEVbbHp9YwlHnLDQNLtKS4VbL8Xlfs7uHyiUDe5pSQWYQYE9XE0nw6Ddng9/n00tnTCJRpt8OmRDtV1F0JuJ9x8piLhMbfyOIJVNvwTRYAIuE//i+p1hJInuWraKImxW8oHzf6VGo1bDtN+I2tIJLYrVJmuzHZ9bjPvXj1hJeRPG/cUJ9WIQDgLGBAfr5yjK7tI4nhyfFK3TUqNaX3sNk+crOU6JWvHgXjkkDKa77SU+kFbnO8lwZV21reacroicgE7XQPUDTITAHk+qZ9QIDAQABo4IBgjCCAX4wEgYDVR0TAQH/BAgwBgEB/wIBADAdBgNVHQ4EFgQUt2ui6qiqhIx56rTaD5iyxZV2ufQwHwYDVR0jBBgwFoAUA95QNVbRTLtm8KPiGxvDl7I90VUwDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjB2BggrBgEFBQcBAQRqMGgwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBABggrBgEFBQcwAoY0aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0R2xvYmFsUm9vdENBLmNydDBCBgNVHR8EOzA5MDegNaAzhjFodHRwOi8vY3JsMy5kaWdpY2VydC5jb20vRGlnaUNlcnRHbG9iYWxSb290Q0EuY3JsMD0GA1UdIAQ2MDQwCwYJYIZIAYb9bAIBMAcGBWeBDAEBMAgGBmeBDAECATAIBgZngQwBAgIwCAYGZ4EMAQIDMA0GCSqGSIb3DQEBCwUAA4IBAQCAMs5eC91uWg0Kr+HWhMvAjvqFcO3aXbMM9yt1QP6FCvrzMXi3cEsaiVi6gL3zax3pfs8LulicWdSQ0/1s/dCYbbdxglvPbQtaCdB73sRD2Cqk3p5BJl+7j5nL3a7hqG+fh/50tx8bIKuxT8b1Z11dmzzp/2n3YWzW2fP9NsarA4h20ksudYbj/NhVfSbCEXffPgK2fPOre3qGNm+499iTcc+G33Mw+nur7SpZyEKEOxEXGlLzyQ4UfaJbcme6ce1XR2bFuAJKZTRei9AqPCCcUZlM51Ke92sRKw2Sfh3oius2FkOH6ipjv3U/697EA7sKPPcw7+uvTPyLNhBzPvOk-----END CERTIFICATE-----"),(0,o.default)(this,"CERT_INFO",{CERT_ISSUER_NAME:"DigiCert TLS RSA SHA256 2020 CA1",CERT_ISSUED:"static.nortoncdn.com"}),(0,o.default)(this,"passwordJSONURL",`https://${s.default.CDN_URL}/idsafe/passwordchangerrule/v4/password_changer_rules.json`),(0,o.default)(this,"passwordChangerState",{READY:"Ready",INPROGRESS:"inprogress",COMPLETED:"completed",SUSPENT:"suspented",FAILED:"failed",SUCCESS:"success",LOGOUT_INITIATED:"logoutInitiated",LOGOUT_COMPLETED:"logoutCompleted",INTERACTIVE:"interactive"}),(0,o.default)(this,"passwordChangerAction",{CLICK:"click",FILL:"text",OPENURL:"open",VERIFY:"verify"}),(0,o.default)(this,"JSONRule","JSONRule"),(0,o.default)(this,"NCO_CHROMETOOLBAR","#coFrameDiv"),(0,o.default)(this,"SETTINGS",{AUTO_FILL:"autoFill",REQUIRE_VAULT_PASSWORD:"requireVaultPassword"}),(0,o.default)(this,"SANDBOX","sandbox"),(0,o.default)(this,"ALLOWED_SANDBOX_VALUES",["allow-forms","allow-same-origin"]),(0,o.default)(this,"VAULT_LOGIN_ITEM_FAVICON_URL",`https://${s.default.CDN_URL}/idsafe/images/v1/favicons/`),(0,o.default)(this,"DONT_ASK_SIGN_IN_AGAIN","25528BD9-3DD0-4261-B39B-C2BF8E65D986"),(0,o.default)(this,"ASK_ME_LATER",{NEXT_TIME:0,AFTER_30_DAYS:30,AFTER_6_MONTHS:180}),(0,o.default)(this,"FORM_SUBMISSION_CLIENT",{TIMEOUT_IN_SECONDS:10}),(0,o.default)(this,"SECURITY_DASHBOARD_TASK_STATUS",{FAILED:"failed",SUCCESS:"success",NEXT_PAGE:"nextPage",GET_PAGE:"getPage",INTERACTIVE_STEP:"interactiveStep",NEW_PASSWORD:"newPasswordTakenFromPasswordInputBox",LOGOUT:"Logout"}),(0,o.default)(this,"autoPasswordChangerOverlayTypes",{INTERACTIVE:"interactive",IN_PROGRESS:"inProgress",SUCCESS:"success",FAILURE:"failure",READY:"ready"}),(0,o.default)(this,"autoPasswordChangerOverlayMessages",{OVERLAY_INIT:"15665A60-2320-42FC-B0F2-DF1603C91B6A",OVERLAY_HIDE:"85DFED6A-8929-45F2-B963-C3FB00A70B45"}),(0,o.default)(this,"autoPasswordChangerOverlay",{IFRAME_ID:"auto-password-changer-overlay",HTML:"html/auto-password-changer-overlay.html",STYLE:"css/auto-password-changer-overlay.css",WIDTH:"100%",HEIGHT:"100%",TYPES:this.autoPasswordChangerOverlayTypes,MESSAGES:this.autoPasswordChangerOverlayMessages}),(0,o.default)(this,"STORE_URL_NAME","norton-password-manager"),(0,o.default)(this,"ONBOARDING_URL_SEARCH",`https://${s.default.IDSAFE_PORTAL_URL_SEARCH}.norton.com/`),(0,o.default)(this,"DELAY_ONBOARDING_FLOW",{DELAY_ONBOARDING_COMMUNICATION_ADDED:"01c8da42-5a50-4b57-8fd7-2a1aac38876f",FALL_BACK_TIMER_FOR_OPENING_ONBOARD_PAGE:12e4,FALL_BACK_TIMER_FOR_ENABLE_ALL_COMM_WAIT:5e3,START_LISTENING_TO_OPEN_ONBOARD_PAGE:"95f3f695-aa65-4fb2-a0d3-92000aaec713",OPEN_ONBOARD_PAGE:"8bb70dae-59b1-429f-813c-7f9a6eabacfc",ENABLE_ALL_FLOW_MESSAGE_FROM_PORTAL:"49c1daa6-8b2d-4f61-8339-a2d32789c172",SETTINGS_CONTAINER:"e82e548e-8a36-48ae-b65c-cf0494890b64",DELAY_ONBOARD_FLOW:"delay_onboarding_flow",DELAY_ONBOARD_FLOW_STATUS:{START:"start",STOP:"stop"},ONBOARD_PAGE_SOURCE:{AFTER_TIMEOUT:"AfterATimeout",AFTER_PORTAL_MESSAGE:"AfterPortalMessage",AFTER_BROWSER_RESTART:"AfterBrowserRestart"},SEND_ONBOARD_PAGE_SOURCE_TELEMETRY:"76f6446a-0373-4777-9991-c090d2572491"}),(0,o.default)(this,"MAX_ACCOUNTS_FOR_GUIDE",6),(0,o.default)(this,"SCREEN_TIMEOUT",3e3),(0,o.default)(this,"CSP_UI_FLOW_URL","https://identitysafe.norton.com/csp_vaultaccess.html"),(0,o.default)(this,"CSP_UI_PROCESSING_URL","https://identitysafe.norton.com/csp_vaultaccess.html?*"),(0,o.default)(this,"COMPROMISED_PASSWORD_CONFIG",{POLL_FREQUENCY_IN_MINS:0,FEATURE_ENABLED:!0}),(0,o.default)(this,"MAX_VAULT_UNLOCK_ATTEMPTS",3),(0,o.default)(this,"MAX_VAULT_UNLOCK_ATTEMPTS_EXPORT_VAULT",10),(0,o.default)(this,"MAX_SECURE_ITEM_UNLOCK_ATTEMPS",10),(0,o.default)(this,"THRESHOLD_TO_HIDE_LOGIN_ADDITION_INSTRUCTION",6),(0,o.default)(this,"PASSWORD_CHANGER",{PASSWORD_STATUS_TIMEOUT_IN_MINUTE:15}),(0,o.default)(this,"NOTIFICATION_ICON_TYPES",{ALERT_ICON:"alert",ALERT_ICON_BLUE:"alert-blue",UNSURE_ICON:"unsure",ERROR_ICON:"error",GOOD_ICON:"good",WARNING_ICON:"warning"}),(0,o.default)(this,"NOTIFICATION_ASK_ME_LATER_DROPDOWN_OPTION_ID",{NEXT_TIME:0,AFTER_30_DAYS:1,AFTER_6_MONTHS:2}),(0,o.default)(this,"NOTIFICATION_SUB_TYPES",{QUESTION_WAX_SAVE:1,QUESTION_WAX_REPLACE:2}),(0,o.default)(this,"SESSION_STORAGE_KEYS",{INSTALL_STATUS:"52CBE020-6473-4119-B0A8-77271210B053",TELEMETRY_CONTEXT:"E3AE1526-2CE8-4625-9335-83B654864997",CAN_SEND_APP_OPEN_EVENT:"038E1803-9CE3-408F-ABE5-DE2339B99B29",CCT_WORKER:{TAB_ID:"C317D878-546C-4B30-A0BA-E23B08A2F40A",IS_SIGN_IN_TAB_ALREADY_CAPTURED:"2705CF63-AC72-422E-B25D-2B7F58EED798",IS_SIGN_IN_SESSION:"93F38125-BB7E-4173-8EE5-0149A6DFE6A8",IS_SKIP_VAULT_FLOW:"E001A3C2-E9C6-40BC-8206-8C5DA4FBDE84",NEW_TAB_ARRAY:"724678D5-1877-4B59-AE91-EA4F6A353946",IS_SIGN_IN_FLOW_IN_PROGRESS:"2400755E-1C51-4C0F-845C-B1589ECD1630"},DASHBOARD_UI_CONTROLLER:{TAB_ID:"709E8C91-FD00-45DC-B910-69B6E110EA7A",WINDOW_ID:"63F9AC56-F1EC-4BD1-B794-A1F351BB3AFB",OVERRIDE_TO_URL:"924F470A-BE07-4074-A8B0-5152682757D2",IS_EXPORT_TAB_LAUNCHED:"53522429-E9BE-4F41-B77A-0C168071345A"},NA_ACCOUNT_HANDLER:{LAST_TOKEN_REFRESH_TIME:"929AF728-ED73-4491-9C13-CC5C0018029E",NA_STATUS_MAP:"97BBC35C-22F6-499E-A902-45FB037372A8"},SIGN_IN:{TAB_ID:"B6F4FEB6-1D15-4E0A-95E7-063B2B0A14E6",WINDOW_ID:"6D21C060-4B4F-4E86-8C1A-C0AEBC3AEEDA",EMAIL_ID:"F670453F-136B-405C-8632-26077031B250",STATE:"47E015A9-E82B-472D-99B2-677B34E48126",IS_DELETE_VAULT_FLOW:"C5DFEC3E-8EC0-4618-87EA-4D3AD7D84D63",PASSWORD_HINT:"BFC9A647-4FFB-4599-A0B6-BDC270CB18FA",IS_UNLOCK_TAB_CLOSED_BY_EXTENSION:"8F4BBEE3-2C73-4E9E-BD2A-06EDCE452E3C",IS_CREATE_VAULT_TAB_CLOSED_BY_EXTENSION:"6EF04D4B-B913-4D2C-BD28-44859D4E8628"},VAULT_ACTION:{OBFUSCATION_KEY:"936A4EBC-840A-436D-B551-E11D893580B7",TAB_URL:"CA8F1295-AE30-4B2D-9E46-1C645D9DD9CA",CHANGE_PASSWORD_FLOW:"58A80375-FA11-4184-B4C5-9AF9683BFB12",RECOVERY_INFO_FOUND:"10FDE3CC-954A-4741-8EAB-13E81CE55473",RECOVERY_KEY_USED_CREATE_VAULT_FLOW:"35E490E3-4532-4ECD-A863-CF335CE519F7",AUTO_UNLOCK_RETRY_ATTEMPTED:"7FD6C870-78D0-447E-8166-BEE20396DDE6"},COMPROMISED_PASSWORD_HELPER:{CREATED_TAB:"7BDD5A42-2233-4220-91B5-0E664A69E89E",CREATED_TAB_URL:"DCBD6CEF-5AA3-4E5B-8B9D-5A16957F73E7",CLOSED_TAB:"5535E2F5-9FE6-49A4-ACEA-1E49B3CC2721",RIBBON_STATE_IS_IN_PROGRESS:"53AA1ACF-A7E5-4950-BEED-D503B3BAE976",RIBBON_STATE_IS_LOGGED_IN:"3DF7BCCE-099F-4034-B696-17689632CC90",RIBBON_STATE_DOMAIN:"5CD9F7ED-FD60-4EB2-BEAE-BBF73F8FB54D",IS_COMPROMISED_PASSWORD_FLOW_IN_PROGRESS:"FA2DB5A7-43B1-45A2-92CC-A0C340B6E548",IS_COMPROMISED_NOTIFICATION_VISIBLE:"7594EF4F-8643-4780-A1A3-7A66D3140AC5",IS_COMPROMISED_VAULT_PASSWORD_DETECTED:"ADF6AB19-64D1-4DE6-B8C9-4FF2BAED38D7",IS_MATCH_SSO_VAULT_PASSWORD_DETECTED:"80318973-CA54-4E70-9BCC-25A6B9BAE8D1"},LOGIN_INFO_MANAGER:{OBFUSCATION_KEY:"E328A798-D1DE-40C4-A5E3-7FD223327BAC"},MOT_FLOW_MANAGER:{NA_LOGIN_INFO:"04F9C8F8-8DF7-48A7-A639-862EEB44DDE6",NEW_LOGIN_INFO:"B4F6716F-20C5-4CF4-A7BF-87FA12BFFA2A",EXISTING_LOGIN_INFO:"B4FA61D0-A420-4A06-8D25-F90A2855F72B"},MOT_ONBOARDING_CONTROLLER:{OBFUSCATION_KEY:"4C03BF09-F933-49DC-8F2C-A5AA42C5C16E"},PASSWORD_CHANGER:{PASSWORD_CHANGER_RULE:"8235CD4B-984A-43C8-A763-55C6B10C9BD8",PASSWORD_CHANGER_SESSION:"151F6523-A549-4C6B-9D2D-738DBC18F804",PASSWORD_CHANGER_SUCCESS_LOGIN:"FC7B64FD-39EA-43B7-BB37-33EA41DC17F1",CACHED_TELEMETRY_DATA:"936DE6F0-6222-4E31-A49D-9BB6F57A2687"},BROWSER_IMPORT:{VAULT_DATA:"C53118D0-F5D5-425E-AF72-38FF2535B7B4",SELECTED_SOURCE:"63362F0A-3E03-4FB9-9EB3-17A7CA95A31F",CONTEXT:"11E21A7D-AC31-4897-AED0-EC5EC35C1597"},CSW_IMPORT:{VAULT_DATA:"58DD08A2-9BF5-4FDB-BD1F-0B813BA2BA5B"},DASHLANE_IMPORT:{VAULT_DATA:"1E547E6E-53A9-4F1B-86DD-812F118BAD24"},CHROME_IMPORT:{VAULT_DATA:"13202044-E7F4-4FEF-BBFE-F533C89A824E"},LASTPASS_IMPORT:{VAULT_DATA:"FA243976-5139-4EB6-A1AE-4B5BBA2C8E86"},ONEPASS_IMPORT:{VAULT_DATA:"A5DCA5E9-5BA5-4460-BF24-E038E888A85A"},SAFARI_IMPORT:{VAULT_DATA:"682E366D-A8A3-4020-9D95-62DE0F0B8C13"},FIREFOX_IMPORT:{VAULT_DATA:"B18D38DE-A283-4AAA-9DA1-BAF18CC7BE6D"},EDGE_IMPORT:{VAULT_DATA:"363E8700-5B2D-4840-9B03-E41722C03010"},TRUKEY_IMPORT:{VAULT_DATA:"B9A9E128-9A81-4C22-805C-70942440C5FA"},KASPERSKY_IMPORT:{VAULT_DATA:"B7BEE9C7-E7D0-4C76-9A59-513C8375CBC7"},IMPORT_MANAGER:{IMPORTED_FILE_NAME:"9964487C-92A2-4DB0-8699-271BE4013058",DELETE_FILE_NOTIFICATION_ID:"C1F7F786-9E0B-43BC-9B6D-9337C6E401F1",CONTINUE_IMPORT_NOTIFICATION_ID:"2A81F8C4-7162-46AF-846A-7E84079655C8",TAB:"F7B70339-653B-4B23-BA42-11603D0692BF",OPEN_MODAL_URL:"F24D24E2-7209-43FD-9BED-113098CC3130"},PASSWORD_CHANGER_TAB_SESSION:{GUID:"85FF1624-29E5-4EE7-94F7-16F79E684A35",STATE:"48A76796-9527-4E64-9CB7-76B085329CE7",PAGE_MANAGER:"0F8165E4-4FDA-4E85-8E0B-EFA0228D7A51",CURRENT_PAGE_KEY:"C5E991A8-D664-4A0F-96AB-39F4963948AF",TAB_ID:"6F159833-EFD7-4720-986F-48444672720D",NEW_PASSWORD:"9DA23BB3-8641-4DB6-91E7-7DAEFCB9793A",TIME_OUT:"B5A625D2-2082-436B-8A71-5C2E4D5B8BE5",SAVE_PASSWORD:"352B1E1D-2F77-43E0-9DF9-A25E8B53EF23",IS_PASSWORD_SAVED:"F02C7D0E-75DE-4485-9F3D-4DB7A86D6E10"},PASSWORD_CHANGER_JSON_RULE:{RULES_JSON:"FBA49319-1629-4515-95D0-1F551441A4A4",VERSION:"75E383F3-5B36-4238-ACA8-33C6CC1AA3E1"},PASSWORD_CHANGER_PAGE_MANAGER:{PAGES:"3F81B967-81F4-4B18-BFAC-8B34C8F49566",SITE_PROFILE:"E799A08B-888F-46DF-8486-481354983E17"},FILL_CAPTURE_HANDLER:{AUTO_FILLED_ITEMS:"19842A59-59D9-4AA3-8427-343FB79D8744",IS_PASSWORD_AUTO_CHANGE_IN_PROGRESS:"BDB5C22D-DDBC-4734-A552-44723FA83B57",IS_SIGNED_IN_TO_NORTON_SESSION:"359AB731-418A-4A27-9380-A5E9691AFBB6",TAB_ID:"45306267-4D9D-440D-8D95-8CB6516A1F5C",NOTIFICATION_ID_NEW_LOGIN_INFO_MAP:"6A527D90-0F1C-4366-B33E-BA58A3BFDECD",NOTIFICATION_ID_PASSWORD_UPDATE_INFO_MAP:"8E6F6E24-9513-4D89-86AB-4C8C0FA1F9FD",NOTIFICATION_ID_COMPROMISED_LOGIN_MAP:"A959D0F2-F31E-4C41-825B-F59084587562",UPDATED_USERNAME:"1FD30AA8-9DC2-4DF3-9F8E-1FAAAEFB13B6",SSO_LOGIN_INFO:"E80A3D06-6CC6-4D34-91E7-FFAD331D71CA"},WAX_ACTIONS:{MUTATION_OBSERVER_EXCLUSION_LIST:["wellsfargo.com"],CAPTURE_EXCLUSION_LIST:"BD0B9D79-14D2-410B-A863-1E86E8BA5AA5",PASSWORD_VERIFIED_FILL_CALLBACK:"AB5D7B7D-4898-47C4-A9E3-1F3A25EDA514",TAB:"4BF61908-6EF4-4D16-988B-17CC6F86D14F",SUBDOMAIN_FOUND:"B3525EAB-5BDE-472A-B6E5-B9C875B9DA22",SENDER_URL:"4e7b76e6-8273-4ce0-b178-82ef232e06a0"},TAB_CONTROLLER:{TAB_ID:"4922D151-A0ED-42BC-BE65-56F83B10DC88",TAB_URL:"CE847093-E0BB-4AFE-8EFD-DEC49E0C69F5",WINDOW_ID:"4B34EA2D-22E0-4EED-BE7E-93AB80ECE5E0"},VAULT_UNLOCK:{PASSWORDLESS_VAULT_UNLOCK_SESSIONKEY:"B209C155-82E1-497A-86C6-F9BEF43F7EB4",PASSWORDLESS_VAULT_UNLOCK_SESSIONIV:"A95A6088-2ABB-4ED9-BC1C-65E8DDBABF89",PASSWORDLESS_VAULT_UNLOCK_OSTYPE:"985D09E0-F465-4033-AADC-689E796E69F5",PASSWORDLESS_VAULT_UNLOCK_REQUEST_TIME:"22D318F6-4C52-42A4-844A-7CF81B5D9290",NAGUID:"1B4A9503-7FD6-4ED4-80ED-54DC84848C9E",SPOC_IDENTITY:"8C0FF263-D2E7-4276-9458-952E442297B3",DEVICE_LIST:"324DF9F6-F644-4DFC-B749-AD5C153E084F",AUTHORIZED_DEVICE:"4C1C9000-5AC6-4FF7-B33D-D052245B15E1",FAILED_NOTIFICATION_ID:"7AD5D9F3-3846-4701-9F29-43307885B1D5",CANCELLED_NOTIFICATION_ID:"C31ABABC-43B5-49DF-A93B-C4944413442A",WELCOME_NOTIFICATION_ID:"CF3A36B3-AC1C-41E6-B7B1-2D1F70561136",OPEN_VAULT_TAB_UI:"5CE73515-35D8-4F59-9030-B63537DFD72D",AUTOMATIC_PASSWORDLESS_VAULT_UNLOCK_REQUEST:"C159A013-976F-4CA9-B207-128A36671555",IS_PASSWORDLESS_VAULT_UNLOCK_IN_PROGRESS:"CE655328-ED40-422D-83B5-0C1AA0A1F42D",IS_BROWSER_RESTART:"0FD053A5-7885-4DBD-9523-DD246577389",USER_MANUALLY_LOCKS_VAULT:"B38717A2-C56D-4D98-A592-2D942371E5A1"},SEAMLESS_ONBOARDING:{ASYMKEYS:"F4282A50-3D3F-405C-A451-B1F3536070A1",PRIVATE_KEY:"5ED85EC5-52BD-4B43-BE03-C517E323CE0A",NA_LOGIN_INFO:"2E8BB734-B6F2-4CEC-BC4E-E631D26AD4ED",EXPIRY_TIME:"A922CC1A-7111-418A-B5A1-DD7F1321C6FE",DEEP_LINK:"A433A0E7-B557-401A-91ED-158201559CCF",SPOC_IDENTITY:"7AB30483-BB12-445A-BAFE-AAD8C0B9A472",EMAIL:"93D17733-961E-47DB-A6E9-D7389D788D7D",IS_SEAMLESS_ONBOARDING_FLOW:"3C4B8F45-191A-4A54-BA3A-F8D154A94C0B",IS_AUTO_NA_CREATION_FLOW:"974BE3BA-8A5A-456F-9215-CBAD15AA3301",STATUS_CODE:"8D28D9C8-4428-4BC7-B968-47E04659F0A0"},DELAY_ONBOARDING:{ENABLE_ALL_STATUS:"2754B754-C1B3-4495-B1E5-FC2474BF149F",ONBOARD_PAGE_SOURCE:"B433CE5C-4184-45ED-B9B7-3227EE29ED21"},PRIVACY_PROMPT:{TELEMETRY:"PrivacyPromptTelemetry"},SECURITY_DASHBOARD_NOTIFICATION_ID:"2EF04B10-294E-45A6-8954-635FD6E545EC",CACHED_TELEMETRY_EVENT_PAYLOAD:"7e645f77-b7fe-4fb6-b13b-ea10ebe90797"}),(0,o.default)(this,"AUTH_LOGIN_KEYS",["google","apple","bt.","ee.","lenovo.","lenovomm.","telekom."]),(0,o.default)(this,"WHATS_NEW_PAGE",{VERSION_HANDLED_SETTINGS_KEY:"versionHandledInWhatsNew",URL:"html/onboardSetup.html#/onboard-setup/whats-new"}),(0,o.default)(this,"IMPORT_DISCONTINUE_FLOW_EXCULSION_LIST",["LENOVO"]),(0,o.default)(this,"COMPROMISED_VAULT_PASSWORD_MODAL_SHOWN","CCCBD02C-9535-4E15-986F-0494BB38032E"),(0,o.default)(this,"ENFORCE_UNIQUE_VAULT_PASSWORD_CHECK_STATUS",{IS_COMPROMISED:"is-compromised",EXACTLY_MATCHES_VAULT_PASSWORD:"exactly-matches-vault-password",EXACTLY_MATCHES_SSO_PASSWORD:"exactly-matches-sso-password",CONTAINS_SSO_PASSWORD:"contains-sso-password",EXACTLY_MATCHES_SSO_USERNAME:"exactly-matches-sso-username",CONTAINS_SSO_USERNAME:"contains-sso-username",CHECK_PASSED:"check-passed"}),(0,o.default)(this,"MATCH_SSO_VAULT_PASSWORD_MODAL_SHOWN","14CACC0C-9713-4925-8B3E-0D4BB06A1964"),(0,o.default)(this,"DONT_GET_UNLOCKED_OUT_MODAL_SHOWN","BB4EF4D1-7A97-4034-A34A-19993A308524"),(0,o.default)(this,"OLD_KEY_NOT_VALID_MODAL_SHOWN","2A40D5D2-0836-4E09-8958-F6896667D19E"),(0,o.default)(this,"LOCAL_STORAGE","local"),(0,o.default)(this,"UNLOCK_MODE",{MOBILE:"mobile",AUTO:"auto"}),(0,o.default)(this,"AUTO_UNLOCK_DAYS",{SEVEN:7}),(0,o.default)(this,"CSP_FLOW","5aecc8ea-3834-49ec-b5c8-a8dc3d235767"),(0,o.default)(this,"UNLOCK_TAB_HTML","html/onboardSetup.html#/onboard-setup/unlock"),(0,o.default)(this,"PASSWORDLESS_VAULT_UNLOCK","html/onboardSetup.html#/onboard-setup/passwordlessVaultUnlock"),(0,o.default)(this,"RETRY_CONSTANTS",{MAX_RETRY:"c3204554-460c-4e3f-9763-17e22e1a864f",MAX_RETRY_TIME:5,MAX_RETRY_TIME_IN_MILLISECONDS:3e5,MAX_RETRY_COUNT:5,MAX_RETRY_OVERALL_COUNT:15,ALARM_ACTIVE:"15d5b053-37a2-4c29-86da-151f045163bb",MAX_RETRY_COUNT_EXCEED:"e97399cb-5698-4af2-b1f7-6b63746bb122",UNLOCK_VAULT_ATTEMPT_COUNT:"56230302-d8c6-4daf-b476-61ca1c5d8062",TOTAL_RETRY_OVERALL_COUNT:"24906f24-9448-4ea0-a066-2cbbab91bb39",ALARM_STAMP:"6d4ea8d7-0e30-4531-85d8-30d3b8c9642b"}),(0,o.default)(this,"VAULT_ITEM_PAGE",{FAVORITE_PAGE:"FovoritePage",WALLET_PAGE:"WalletPage"})}};Object.freeze(u);r.default=u},{"./global.types":16,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,configuration:3,extensionContext:4}],14:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),s=n(e("./constants")),a=p(e("node-forge")),u=n(e("create-ecdh")),l=p(e("browserify-cipher")),c=n(e("create-hash")),d=e("buffer");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}const{utils:{isNil:h,isArray:_,isString:E,isInteger:g},logger:m}=o.default,y=i.default.utils;const S=new class{encryptData(e,t,r,n){if(h(e))throw new Error("algorithm cannot be null");if(h(t))throw new Error("Key cannot be null");if(h(r))throw new Error("IV cannot be null");if(h(n))throw new Error("Crypto data cannot be null");let o=a.cipher.createCipher(e,t);o.start({iv:r});const i=a.util.createBuffer(n);o.update(i),o.finish();let u=y.createUInt8BufferFromStringBuffer(o.output.getBytes());return e===s.default.AES_ALGORITHM.CBC?u:{data:u,tag:y.createUInt8BufferFromStringBuffer(o.mode.tag.getBytes())}}decryptData(e,t,r,n,o){if(h(e))throw new Error("algorithm cannot be null");if(h(t))throw new Error("Key cannot be null");if(h(r))throw new Error("IV cannot be null");if(h(n))throw new Error("Crypto data cannot be null");if(e===s.default.AES_ALGORITHM.GCM&&h(o))throw new Error("GCM tag cannot be null");let i=a.cipher.createDecipher(e,t);if(e===s.default.AES_ALGORITHM.CBC)i.start({iv:r});else{let e=a.util.createBuffer(o);i.start({iv:r,tagLength:8*e.length(),tag:e})}const u=a.util.createBuffer(n);return i.update(u),i.finish(),y.createUInt8BufferFromStringBuffer(i.output.getBytes())}createECDHSecretKey(e,t){if(!E(e)||0===e.length)throw new Error("curve cannot be null or empty");if(h(t))throw new Error("receiverPublickey cannot be null");let r;try{const n=(0,u.default)(e);n.generateKeys();const o=n.getPublicKey();r={senderSecret:n.computeSecret(t),senderPubKey:o}}catch(e){m.error(e)}return r}createHashDigest(e,t,r){if(h(e)||0===e.length)throw new Error("digest cannot be null or empty");if(!_(t)||h(t))throw new Error("arrData should be in array format and not be null");let n;try{const o=(0,c.default)(e);for(let e of t)o.update(e);n=o.digest(),g(r)&&(n=n.slice(0,r))}catch(e){m.error(e)}return n}encryptDataWithCipher(e,t,r,n){if(!E(e)||0===e.length)throw new Error("algorithm cannot be null or empty");if(h(t))throw new Error("encryption key cannot be null");if(h(r))throw new Error("iv cannot be null");if(h(n))throw new Error("data cannot be null");let o;try{const i=l.createCipheriv(e,t,r),s=d.Buffer.from(n),a=d.Buffer.concat([i.update(s),i.final()]),u=i.getAuthTag();o=d.Buffer.concat([a,u])}catch(e){m.error(e)}return o}hybridEncryption(e,t,r,n,o,i,s){if(!E(e)||0===e.length)throw new Error("curve cannot be null or empty");if(h(t))throw new Error("receiverPublickey cannot be null");let a=new Uint8Array(t);if(!E(r)||0===r.length)throw new Error("digest cannot be null or empty");if(!g(n))throw new Error("keyLength cannot be null");if(!E(o)||0===o.length)throw new Error("algorithm cannot be null or empty");if(h(i))throw new Error("iv cannot be null");if(h(s))throw new Error("data cannot be null");const u=this.createECDHSecretKey(e,a);if(h(u))return void m.error("Secret key is null, Cannot perform encyption");let l=[null==u?void 0:u.senderSecret,d.Buffer.from("00000001","hex"),null==u?void 0:u.senderPubKey];const c=this.createHashDigest(r,l,n);if(h(c))return void m.error("Derived key is null, Cannot perform encyption");const f=this.encryptDataWithCipher(o,c,i,s);return d.Buffer.concat([null==u?void 0:u.senderPubKey,f])}asymmetricEncryption(e,t){if(h(e))throw new Error("publicKey cannot be null");if(h(t))throw new Error("data cannot be null");let r=new Uint8Array(e),n=i.default.utils.createStringBufferFromUint8Buffer(r);n=a.util.encode64(n);let o="-----BEGIN PUBLIC KEY-----"+n+"-----END PUBLIC KEY-----",s=a.pki.publicKeyFromPem(o).encrypt(t,"RSA-OAEP",{md:a.md.sha256.create(),mgf1:{md:a.md.sha1.create()}});return s=i.default.utils.createUInt8BufferFromStringBuffer(s),s}};r.default=S},{"./constants":13,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"browserify-cipher":248,buffer:251,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.typed-array.fill.js":447,"core-js/modules/es.typed-array.set.js":448,"core-js/modules/es.typed-array.sort.js":449,"core-js/modules/es.typed-array.uint8-array.js":450,"core-js/modules/web.dom-collections.iterator.js":453,"create-ecdh":"create-ecdh","create-hash":"create-hash","node-forge":"node-forge"}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={cguid:null,isFreshInstall:null}},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewType=r.TouchPoint=r.Steps=r.NotificationViewType=r.ItemViewType=r.ItemCategory=r.InstallStatusType=r.AppName=void 0;r.InstallStatusType=function(e){return e.INSTALL="newInstall",e.UPDATE="updated",e.RELAUNCH="relaunch",e}({}),r.ViewType=function(e){return e[e.dashboard=0]="dashboard",e[e.popOver=1]="popOver",e.loginsAutofill="loginsAutofill",e.usernameAutofill="usernameAutofill",e.generatePasswordAutofill="generatePasswordAutofill",e.signInPopup="signInPopup",e.unlockVaultPopup="lockedPopup",e.cardAutofill="cardAutofill",e}({}),r.Steps=function(e){return e[e.whyVault=0]="whyVault",e[e.createPassword=1]="createPassword",e[e.confirmPassword=2]="confirmPassword",e[e.success=3]="success",e}({}),r.NotificationViewType=function(e){return e.waxReplace="waxReplace",e.waxSaveAsNewLogin="waxSaveAsNewLogin",e}({}),r.TouchPoint=function(e){return e.VAULT_UI="Vault UI",e.POPOVER="Extension Popover",e.INFIELD_POPUP="Infield Popup",e.INFIELD_NOTIFICATION="Infield Notification",e.RESTART_UNLOCK="Restart Unlock",e.AUTO_UNLOCK="Auto Unlock",e}({}),r.AppName=function(e){return e.POPOVER="Popover",e.ONBOARD_SETUP="Onboard Setup",e.DASHBOARD="Dashboard",e.COMPROMISED_PASSWORD_RIBBON_APP="Compromisd Password Ribbon App",e.AUTO_PASSWORD_CHANGER_OVERLAY_APP="Auto Password Changer Overlay App",e}({}),r.ItemCategory=function(e){return e.Login="Login",e.CreditCard="Credit Card",e.BankAccount="Bank Account",e.Address="Address",e.Note="Note",e}({}),r.ItemViewType=function(e){return e.add="add",e.edit="edit",e.details="details",e}({})},{}],17:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const{isObject:i,isNil:s}=o.default.utils,{logger:a}=o.default,u="readwrite";r.default=class{constructor(e){this.featureKey=e,this.initialize(this.featureKey)}initialize(e){if(!window.indexedDB)return void a.error("IndexedDB not supported");const t=window.indexedDB.open("NPW",1);return t.onerror=()=>{a.error(`Database error :: initialize : ${t.error}`)},t.onsuccess=e=>{a.debug("IndexedDB :: OpenSuccess")},t.onupgradeneeded=t=>{t.target.result.createObjectStore(e,{autoIncrement:!0}).createIndex(e,e,{unique:!0})},t}openDatabase(){return new Promise(((e,t)=>{const r=window.indexedDB.open("NPW",1);r.onerror=e=>{a.error(`Database error :: openDatabase : ${r.error}`),t(r.error)},r.onsuccess=t=>{var r;const n=null==t||null===(r=t.target)||void 0===r?void 0:r.result;a.debug("IndexedDB :: OpenSuccess"),e(n)}}))}async setObject(e){if(!window.indexedDB)return void a.error("IndexedDB not supported");if(!i(e))return;const t=await this.openDatabase();await this.set(t,this.featureKey,e)}set(e,t,r){return new Promise(((n,o)=>{const i=e.transaction(t,u);let s=i.objectStore(t).put(r,this.featureKey);s.onsuccess=function(e){a.debug("IndexedDB :: InsertSuceess",e),n(!0)},s.onerror=function(e){var t;a.error(`IndexedDB :: InsertFailure ${null==e||null===(t=e.target)||void 0===t?void 0:t.errorCode}`),o()},i.oncomplete=function(){e.close()}}))}async getObject(e){if(!window.indexedDB)return void a.error("IndexedDB not supported");if(s(e))return;const t=await this.openDatabase();return this.get(t,this.featureKey)}get(e,t){return new Promise(((r,n)=>{const o=e.transaction(t,"readonly");let i=o.objectStore(t).get(t);i.onsuccess=e=>{a.debug("IndexedDB :: GetSuccess"),r(i.result)},i.onerror=e=>{var t;a.error(`IndexedDB :: GetFailure ${null==e||null===(t=e.target)||void 0===t?void 0:t.errorCode}`),n(e.target.errorCode)},o.oncomplete=function(){e.close()}}))}async deleteObjectStore(){const e=await this.openDatabase();this.delete(e,this.featureKey)}delete(e,t){const r=e.transaction(t,u);let n=r.objectStore(t).clear();n.onsuccess=function(e){a.debug("IndexedDB :: DeleteSuccess",e.target.errorCode)},n.onerror=function(e){var t;a.error(`IndexedDB :: DeleteFailure ${null==e||null===(t=e.target)||void 0===t?void 0:t.errorCode}`)},r.oncomplete=function(){e.close()}}}},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.promise.js":437}],18:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("feature/wax/fillCaptureHandler")),s=n(e("feature/unlockManager/vaultUnlockManager")),a=n(e("feature/security-dashboard/securityDashboardNotificationHandler")),u=n(e("feature/import/importers/importManager"));const{uiConstants:{NOTIFICATION:l}}=o.default.constants,{isntNil:c}=o.default.utils;const d=new class{handleNotificationEvent(e){const t=e.detail,r=i.default.getNotificationIDNewLoginInfoMap(),{notificationID:n,eventID:o}=t;if(n in r)return void i.default.handleLoginCaptureNotification(n,o);if(n in i.default.getNotificationIDPasswordUpdateInfoMap())return void i.default.handlePasswordUpdateNotification(n,o);if(n in i.default.getNotificationIDCompromisedLoginMap())return void i.default.handleCompromisedPasswordNotification(n,o);const l=s.default.getWelcomeNotificationId();if(c(l)&&n===l)return void s.default.handleWelcomeNotification(o);const d=s.default.getFailedNotificationID();if(c(d)&&n===d)return void s.default.handlePasswordlessVaultUnlockRequestFailedNotification(o);const f=s.default.getCancelledNotificationID();if(c(f)&&n===f)return void s.default.handlePasswordlessVaultUnlockRequestCancelledNotification(o);const p=a.default.getViewDashboardNotificationID();if(c(p)&&n===p)return void a.default.handleViewDashboardNotification(o);const h=u.default.getDeleteFileNotificationID();if(c(h)&&n===h)return void u.default.handleDeleteFileNotification(o);const _=u.default.getContinueImportNotificationID();c(_)&&n===_&&u.default.handleContinueImportNotification(o)}};window.addEventListener(l.NOTIFICATION_EVENT,d.handleNotificationEvent);r.default=d},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"feature/import/importers/importManager":83,"feature/security-dashboard/securityDashboardNotificationHandler":112,"feature/unlockManager/vaultUnlockManager":117,"feature/wax/fillCaptureHandler":119}],19:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.sort.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=n(e("common/secureSettingsContainer"));const{settings:u}=s.default,{utils:{isNil:l,isntNil:c},logger:d,extensionAdapter:f}=(u.WAX_SECURE_CONTAINER,u.COMPROMISED_PASSWORD_SECURE_CONTAINER,i.default);r.default=class{constructor(){(0,o.default)(this,"handleStorageCapacity",((e,t)=>{if(c(e)){if(Object.keys(e).length<=u.MAX_NOTIFICATION_COUNT)return;this.deleteObject(e,t)}}))}removeObject(e){this.container.removeObject(e)}deleteObject(e,t){if(l(e))return;const r=Object.entries(e).map((e=>({[e[0]]:e[1]})));r.sort(((e,t)=>Object.values(e)[0].lastUpdated-Object.values(t)[0].lastUpdated));delete e[Object.keys(r[0])[0]],this.container.setObject(t,e)}getNotificationInfo(e){if(l(this.container))return;const t=this.container.getObject(this.storageKey);return l(e)?t:(e&&void 0===t[e]&&this.updateNotificationInfoUrlToSubdomain(e,t),t[e])}updateNotificationInfoUrlToSubdomain(e,t){this.handleStorageCapacity(this.getNotificationInfo(),this.storageKey);const r=t;let n=!1;Object.keys(t).forEach((o=>{const s=t[o];i.default.utils.baseURL(o)===e&&(r[e]=s,delete r[o],n=!0)})),n&&this.container.setObject(this.storageKey,r)}updateObject(e,t,r){this.handleStorageCapacity(this.getNotificationInfo(),this.storageKey);const n={};n[e]=t;const o=Object.assign(r,n);this.container.setObject(this.storageKey,o)}canShowNotification(e){try{const t=this.getNotificationInfo(e);if(l(t))return!0;let r=(new Date).getTime()/6e4;return r=Math.round(r),void 0!==t.show?t.show:!(t.showDate>r)}catch(e){return!0}}initialize(e,t,r){a.default.initialize(e,t,((t,n,o)=>{t?(console.log(`Loaded ${e} settings container`),this.container=n,this.storageKey=r):d.error(`Could not load ${e} settings container ${o.toString()}`)}))}setNotificationInfo({url:e,remindMeLaterDays:t,show:r}){this.handleStorageCapacity(this.getNotificationInfo(),this.storageKey);const n=this.container.getObject(this.storageKey),o=i.default.utils.getNextOccurenceDate(t);if(l(n)){const t={showDate:o,lastUpdated:(new Date).getTime()/1e3,show:r},n={};n[e]=t,this.container.setObject(this.storageKey,n)}else{const t=n[e];if(l(t)){const t={showDate:o,lastUpdated:(new Date).getTime()/1e3,show:r};this.updateObject(e,t,n)}else t.showDate=o,t.lastUpdated=(new Date).getTime()/1e3,t.show=r,this.updateObject(e,t,n)}}}},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"common/secureSettingsContainer":23,"core-js/modules/es.array.sort.js":432}],20:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));const i=new class{constructor(){(0,o.default)(this,"PARTNER_PARAMS",{PID:"partnerId",PUID:"puid",LAYOUT:"layouttype"}),(0,o.default)(this,"SUPPORTED_PARTNERS",{BT:{PID:"1003610",PUID:"13149",LAYOUT:"sos"},EE:{PID:"1053960",PUID:"17523",LAYOUT:"sos"},LENOVO:{PID:"1060250",PUID:"18598",LAYOUT:"sos"},DT:{PID:"1003",PUID:"70",LAYOUT:"sos"}})}};Object.freeze(i);r.default=i},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208}],21:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.VOWELS=r.SYMBOLS=r.Mode=r.DIGITS=r.CONSONANTS=void 0,r.createMultiplePassword=function(e=12,t=!0,r=!0,n=!0,o=!0,i=1){const s=[];for(let a=0;a<i;a+=1){const i=y(e,t,r,n,o);s.push(i)}return s},r.createPassword=y,r.createRecoveryKey=function(){const e=["0","1","o","i"];return _(m(16,f.Alpha,e),e).toUpperCase()},r.generateMixedcase=g,r.generateNumeric=_,r.generatePassword=m,r.generateSymbols=E,r.getConfigAsString=void 0,r.isLetter=h,r.replaceCharAt=p;var o=n(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/web.dom-collections.iterator.js");var i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const u=r.VOWELS=["a","e","u","i","o","l"],l=r.CONSONANTS=["b","c","d","f","g","h","j","k","m","n","p","q","r","s","t","v","w","x","y","z","tr","cr","br","fr","th","dr","ch","ph","wr","st","sp","sw","pr"],c=r.SYMBOLS=["!","@","#","$","?","&","*","_","-","+","="],d=r.DIGITS=["0","1","2","3","4","5","6","7","8","9"];let f=r.Mode=function(e){return e[e.Alpha=0]="Alpha",e[e.Numeric=1]="Numeric",e}({});function p(e,t,r){return e.substr(0,t)+r+e.substr(t+1)}function h(e){return 1===e.length&&i.default.utils.isntNil(e.match(/[a-z]/i))}function _(e,t=null){let r=[...d];if(null!=t){const e=t.reduce(((e,t)=>a(a({},e),{},{[t]:!0})),{});r=d.filter((t=>!e[t]))}let n=e;const o=n.length/4;let s;s=o>1?i.default.utils.getRandomIntInRange(0,Math.floor(o-1))+1:1;for(let e=1;e<=s;e+=1){n=p(n,i.default.utils.getRandomIntInRange(0,n.length-1),r[i.default.utils.getRandomIntInRange(0,r.length-1)])}return n}function E(e,t=!1,r=null){let n=e,o=!1,s=0;const a=n.length/4;let u;u=a>1?i.default.utils.getRandomIntInRange(0,Math.floor(a-1))+1:1;let l=c;if(i.default.utils.isntNil(r)){const e=new Set(r);l=l.filter((t=>!e.has(t)))}if(0===l.length)return n;for(let e=1;e<=u;e+=1)do{const e=i.default.utils.getRandomIntInRange(0,n.length-1),r=l[i.default.utils.getRandomIntInRange(0,l.length-1)];if(t){h(n[e])?(n=p(n,e,r),o=!1):(o=!0,s>=n.length?(n=p(n,e,r),o=!1):s+=1)}else n=p(n,e,r)}while(o);return n}function g(e){let t=e,r=!1,n=0;const o=i.default.utils.getRandomIntInRange(0,Math.floor(t.length/2-1))+1;for(let e=0;e<o;e+=1)do{const e=i.default.utils.getRandomIntInRange(0,t.length-1),o=t[e];h(o)?(t=p(t,e,o.toUpperCase()),r=!1):(r=!0,n>=t.length?(t=p(t,e,o.toUpperCase()),r=!1):n+=1)}while(r);return t}function m(e,t,r=null){let n,o="",s=[...d],c=[...l],p=[...u];if(null!=r){const e=r.reduce(((e,t)=>a(a({},e),{},{[t]:!0})),{});s=d.filter((t=>!e[t])),c=l.filter((t=>!e[t])),p=u.filter((t=>!e[t]))}if(t===f.Numeric)for(n=0;n<e;n+=1)o+=s[i.default.utils.getRandomIntInRange(0,s.length-1)];else for(n=0;n<e;n+=1)o+=c[i.default.utils.getRandomIntInRange(0,c.length-1)],o+=p[i.default.utils.getRandomIntInRange(0,p.length-1)];return o.substr(0,e)}function y(e=12,t=!0,r=!0,n=!0,o=!0,i=null){let s=null;try{t?(s=m(e,f.Alpha),o&&(s=_(s))):s=m(e,f.Numeric),n&&(s=E(s,t&&o,i)),r&&(s=g(s))}catch(e){return null}return s}r.getConfigAsString=e=>{let t="";return Object.entries(e).forEach((([e,r])=>{"length"!==e&&(t+=r?"1":"0")})),t+=`-${e.length}`,t}},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.array.reduce.js":431,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/web.dom-collections.iterator.js":453}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={constants:{eventName:{EXIT:"FC74D3C2-A0A8-4CD6-B12A-6F52535C2756",SHOW:"0016619E-7611-4D49-BC67-F2D62103DCE5",HIDE:"3FBE1BA2-4A54-4057-8C3A-14630B5EC714",SHOW_PROGRESS:"33B01B42-B245-49C7-B84A-92E7E7149083",HIDE_PROGRESS:"A9A6F7CF-5C68-4E3F-80D0-9D67225FA5A3",LAUNCH_URL:"F68FEFAC-D494-4092-99C7-6D7671C8119A",LAUNCH_PURCHASE:"B82C4AF1-62DF-48CE-81E0-2E050B2E01B5",PROCESS:"05F17E96-BE75-46B0-A9DD-F64E93E0681E",GET_ELEMENTS:"509B8702-B55B-44A6-B5E7-1A85A84CE3F2",SET_ELEMENTS:"EB4BE41E-11B2-4159-B9F7-3CAA8514393C",GET_LOCALSTORAGE:"833389F0-578A-40B8-93E2-C93687BC1DA5",SET_LOCALSTORAGE:"B226C6C4-B012-4E44-AD9E-AA061670C55B"},requestEvent:"103FC480-47AB-4717-A195-45D7B60E5D84",responseEvent:"3C399BB3-8CC7-4C25-9A9A-EC6DD1CB9322",ISO2_ISO3_COUNTRY:{AX:"ALA",AF:"AFG",AL:"ALB",DZ:"DZA",AS:"ASM",AD:"AND",AO:"AGO",AI:"AIA",AQ:"ATA",AG:"ATG",AR:"ARG",AM:"ARM",AW:"ABW",AU:"AUS",AT:"AUT",AZ:"AZE",BS:"BHS",BH:"BHR",BD:"BGD",BB:"BRB",BY:"BLR",BE:"BEL",BZ:"BLZ",BJ:"BEN",BM:"BMU",BT:"BTN",BO:"BOL",BA:"BIH",BW:"BWA",BV:"BVT",BR:"BRA",IO:"IOT",BN:"BRN",BG:"BGR",BF:"BFA",BI:"BDI",KH:"KHM",CM:"CMR",CA:"CAN",CV:"CPV",KY:"CYM",CF:"CAF",TD:"TCD",CL:"CHL",CN:"CHN",CX:"CXR",CC:"CCK",CO:"COL",KM:"COM",CD:"COD",CG:"COG",CK:"COK",CR:"CRI",CI:"CIV",HR:"HRV",CU:"CUB",CY:"CYP",CZ:"CZE",DK:"DNK",DJ:"DJI",DM:"DMA",DO:"DOM",EC:"ECU",EG:"EGY",SV:"SLV",GQ:"GNQ",ER:"ERI",EE:"EST",ET:"ETH",FK:"FLK",FO:"FRO",FJ:"FJI",FI:"FIN",FR:"FRA",GF:"GUF",PF:"PYF",TF:"ATF",GA:"GAB",GM:"GMB",GE:"GEO",DE:"DEU",GH:"GHA",GI:"GIB",GR:"GRC",GL:"GRL",GD:"GRD",GP:"GLP",GU:"GUM",GT:"GTM",GN:"GIN",GW:"GNB",GY:"GUY",HT:"HTI",HM:"HMD",HN:"HND",HK:"HKG",HU:"HUN",IS:"ISL",IN:"IND",ID:"IDN",IR:"IRN",IQ:"IRQ",IE:"IRL",IL:"ISR",IT:"ITA",JM:"JAM",JP:"JPN",JO:"JOR",KZ:"KAZ",KE:"KEN",KI:"KIR",KP:"PRK",KR:"KOR",KW:"KWT",KG:"KGZ",LA:"LAO",LV:"LVA",LB:"LBN",LS:"LSO",LR:"LBR",LY:"LBY",LI:"LIE",LT:"LTU",LU:"LUX",MO:"MAC",MK:"MKD",MG:"MDG",MW:"MWI",MY:"MYS",MV:"MDV",ML:"MLI",MT:"MLT",MH:"MHL",MQ:"MTQ",MR:"MRT",MU:"MUS",YT:"MYT",MX:"MEX",FM:"FSM",MD:"MDA",MC:"MCO",MN:"MNG",MS:"MSR",MA:"MAR",MZ:"MOZ",MM:"MMR",NA:"NAM",NR:"NRU",NP:"NPL",NL:"NLD",AN:"ANT",NC:"NCL",NZ:"NZL",NI:"NIC",NE:"NER",NG:"NGA",NU:"NIU",NF:"NFK",MP:"MNP",NO:"NOR",OM:"OMN",PK:"PAK",PW:"PLW",PS:"PSE",PA:"PAN",PG:"PNG",PY:"PRY",PE:"PER",PH:"PHL",PN:"PCN",PL:"POL",PT:"PRT",PR:"PRI",QA:"QAT",RE:"REU",RO:"ROU",RU:"RUS",RW:"RWA",SH:"SHN",KN:"KNA",LC:"LCA",PM:"SPM",VC:"VCT",WS:"WSM",SM:"SMR",ST:"STP",SA:"SAU",SN:"SEN",CS:"SCG",SC:"SYC",SL:"SLE",SG:"SGP",SK:"SVK",SI:"SVN",SB:"SLB",SO:"SOM",ZA:"ZAF",GS:"SGS",ES:"ESP",LK:"LKA",SD:"SDN",SR:"SUR",SJ:"SJM",SZ:"SWZ",SE:"SWE",CH:"CHE",SY:"SYR",TW:"TWN",TJ:"TJK",TZ:"TZA",TH:"THA",TL:"TLS",TG:"TGO",TK:"TKL",TO:"TON",TT:"TTO",TN:"TUN",TR:"TUR",TM:"TKM",TC:"TCA",TV:"TUV",UG:"UGA",UA:"UKR",AE:"ARE",GB:"GBR",US:"USA",UM:"UMI",UY:"URY",UZ:"UZB",VU:"VUT",VA:"VAT",VE:"VEN",VN:"VNM",VG:"VGB",VI:"VIR",WF:"WLF",EH:"ESH",YE:"YEM",ZM:"ZMB",ZW:"ZWE"},IDENTITY_JOB:"IDENTITY"}};r.default=n},{}],23:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const{logger:i,secureSettings:s,utils:{isNil:a,isFunction:u}}=o.default;r.default=class{static initialize(e,t,r,n=!1){if(a(e))throw new Error("containerName cannot be null");if(a(t))throw new Error("secure settings cannot be initialized without encryptionKey");if(!1===u(r))throw new Error("Callback cannot be null.");a(n)&&(n=!1),a(this.didReset)&&(this.didReset=!1);const o=(n,o,s)=>{if(!1===n)return this.didReset?(i.error("Unable to create wax secure settings container, even after reseting the container"),void setTimeout((()=>{r(n,this.container,s)}),1)):(this.initialize(e,t,r,!0),void(this.didReset=!0));this.container=o,this.didReset=!1,setTimeout((()=>{r(n,this.container,null)}),1)};n?this.removeAll(e,(()=>{s.loadSecureSettingsContainer(e,t,o)})):s.loadSecureSettingsContainer(e,t,o)}static removeAll(e,t){s.deleteSecureSettingsContainer(e,t)}}},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],25:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const{settings:i,logger:s,utils:{isNil:a,isntNil:u}}=o.default;r.default=class{initSettingsContainer(e){if(u(e))return new Promise(((t,r)=>{i.loadSettingsContainer(e,!0,((n,o,i)=>{!1===n||a(o)?(s.error("failed to load "+e),this.settingsContainer=null,r(!1)):(this.settingsContainer=o,t(!0))}))}))}getValue(e){if(!a(this.settingsContainer))return this.settingsContainer.getObject(e);s.error("settings Container not initialized")}setValue(e,t,r){a(this.settingsContainer)?s.error("settings Container not initialized"):this.settingsContainer.setObject(e,t,r)}}},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.promise.js":437}],26:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=e("locale"),u=n(e("feature/compromised-password/compromisedPasswordHelper")),l=n(e("feature/partnerSupport/partnerParams")),c=e("telemetry/constants/telemetryActions"),d=n(e("telemetry/background")),f=n(e("../../common/constants")),p=n(e("./globalSettings")),h=n(e("./telemetry/telemetryWrapper")),_=n(e("./signin")),E=n(e("./session")),g=n(e("../../common/platformBridge/xidsafe")),m=n(e("./notificationIcon")),y=n(e("./pwmSessionSettings")),S=e("./commonUtilsBG"),T=e("telemetry/types/userAccountTelemetry.types");const A=(0,a.getIntlData)(),{eventName:b}=g.default.constants,{extensionAdapter:O,utils:{isNil:I,isntNil:v,isBoolean:N}}=i.default,{cct:R}=s.default,{CUSTOM_DIMENSION4:C}=i.default.telemetryConstants.parameters,{NSL_URL:D}=s.default.authSCD,{CCT_WORKER:w}=f.default.SESSION_STORAGE_KEYS;const L=new class{constructor(){(0,o.default)(this,"setSignInFlowInProgress",((e=!1)=>{y.default.set(w.IS_SIGN_IN_FLOW_IN_PROGRESS,e)})),(0,o.default)(this,"startSignInSession",(({skipVaultFlow:e}={})=>{N(e)?this.setIsSkipVaultFlow(e):this.setIsSkipVaultFlow(!1),this.setSignInFlowInProgress(!0),this.setIsSignInSession(!0),this.setIsSignInTabAlreadyCaptured(!1),O.addTabUpdatedEventListener(this.handleTabUpdated),O.addTabRemovedEventListener(this.onTabClosed);const t=`${f.default.CCT_URL}?*`;O.addOnBeforeRequestEventListener(this._onBeforeRequest,[t],[])})),(0,o.default)(this,"_onBeforeRequest",(e=>{if(!1===this.getIsSignInTabAlreadyCaptured()&&!0===this.getIsSignInSession()){let t;this.setTabID(e.tabId),this.setIsSignInTabAlreadyCaptured(!0),!0===u.default.isCompromisedPasswordFlowInProgress()&&(t={key:C,value:"motv2"}),h.default.sendCCTLaunched(t)}O.removeOnBeforeRequestEventListener(this._onBeforeRequest)})),(0,o.default)(this,"_originCheck",(e=>{var t;if(I(e))return!1;return O.getTabID(e)===this.getTabID()||!(!this.getIsSignInSession()||null===(t=e.url)||void 0===t||!t.startsWith(f.default.CCT_URL))})),(0,o.default)(this,"handleTabUpdated",((e,t,r)=>{var n,o;if(I(this.getTabID())||I(r)||I(r.url))return;if(this.getTabID()!==e)return;if(null!==(n=r.url)&&void 0!==n&&n.startsWith(f.default.CCT_URL)||null!==(o=r.url)&&void 0!==o&&o.startsWith(D))return;const s=i.default.utils.getDomain(r.url);(0,S.isDomainInAuthLoginKeys)(s)||this._resetSignInSession()})),(0,o.default)(this,"onTabClosed",(e=>{I(this.getTabID())||e===this.getTabID()&&(this.setSignInFlowInProgress(!1),this._resetSignInSession())})),(0,o.default)(this,"_resetSignInSession",(()=>{I(this.getTabID())||(this.setIsSignInSession(!1),this.setTabID(null),_.default.resetContainer(),i.default.utils.createCustomHTMLEvent(f.default.NORTON_SIGN_IN_SESSION))})),(0,o.default)(this,"handleMessage",((e,t,r)=>{if(!this._originCheck(r))return;if(I(e)||I(e.id))return;const n=O.getTabID(r),{payload:o}=e,s={};switch(s.eventID=e.id,e.id){case b.EXIT:this.setNewTabArray([]),s.response=!0,O.getAllTabs((e=>{if(1===e.length&&O.createTab("about:blank",(e=>{const t=this.getNewTabArray();t.push(e.id),this.setNewTabArray(t)})),!this.getIsSkipVaultFlow()){O.closeTab(n);const e=this.getTabID();v(e)&&n!==e&&O.closeTab(e)}this._resetSignInSession(),i.default.utils.createCustomHTMLEvent(f.default.IDSAFE_CLOSED_TAB,{tabId:n})}));break;case b.SHOW:this.getIsSkipVaultFlow()||_.default.openCCTPage(),s.response=!0;break;case b.HIDE:case b.SHOW_PROGRESS:case b.HIDE_PROGRESS:case b.LAUNCH_URL:case b.LAUNCH_PURCHASE:s.response=!0;break;case b.PROCESS:for(const e in o)this._processJobHandler(o[e],t);return;case b.GET_ELEMENTS:const e=this.getElements(o);s.code=!0,s.data=e;break;case b.SET_ELEMENTS:case b.GET_LOCALSTORAGE:case b.SET_LOCALSTORAGE:s.response=!0;break;default:return}t(s)})),(0,o.default)(this,"getElements",(e=>{const t=navigator.language,r=null==t?void 0:t.split("-");if(!r)return;const n=r[0];let o=r[1];I(o)&&"ja"===n&&(o="JP"),I(o)&&(o="US");const u={Action:f.default.CCT.ACTION,LayoutMediaSKU:f.default.CCT.LAYOUTMEDIA_SKU,LayoutProductLanguage:(0,a.getLocale)(),OSLanguage:(0,a.getLocale)(),Fingerprint:p.default.getFingerprint(),EndPointId:s.default.authSCD.getMachineGUID(),MachineName:navigator.platform,OSLocale:navigator.language,RequesterIds:f.default.CCT.REQUESTERIDS,Country:o,ForceNslShowProviderLink:f.default.CCT.SHOW_PARTNER_SSO_LOGIN};l.default.setParams();const c=l.default.getPartnerId(),d=l.default.getPuid();i.default.utils.isntNil(c)&&i.default.utils.isntNil(d)&&(u.PartnerId=c,u.PartnerUnitId=d);const h={};for(const t in e){const r=e[t];let n=u[r];I(n)&&(n=null),h[r]=n}return h})),(0,o.default)(this,"_processJobHandler",((e,t)=>{if(e.Job!==f.default.IDENTITY_JOB)return;R.storeOIDCTokensAndConnectToOxygen(e.Data,((e,t)=>{if(_.default.resetState(),!1!==e)this.setIsSignInSession(!1),this.setTabID(null),this.getIsSkipVaultFlow()||(_.default.processVaultFlow(),O.closeTab(this.getNewTabArray()));else{E.default.logoutNA(null,!1,{type:T.SignOutType.Error,cause:t.message}),_.default.removeSignInTab();const e=[A.formatMessage({id:"norton"}),A.formatMessage({id:"shortProductName"})].join(" "),r=A.formatMessage({id:"notification.vault.sync.error",defaultMessage:"Sorry, something went wrong. Please try again."}),n=new i.default.TimedNotification(r,m.default.getErrorIcon(),e);i.default.notificationCenter.addNotification(n)}}));let r={};!0===u.default.isCompromisedPasswordFlowInProgress()&&(r={key:C,value:"motv2"}),h.default.sendCCTSuccess(r),d.default.track(c.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN.SIGN_IN_COMPLETED),t({eventID:b.PROCESS,state:!0,jobName:e.Job,responseData:null})})),O.addMessageListener(this.handleMessage)}getSignInFlowInProgress(){var e;return null!==(e=y.default.get(w.IS_SIGN_IN_FLOW_IN_PROGRESS))&&void 0!==e&&e}getTabID(){var e;return null!==(e=y.default.get(w.TAB_ID))&&void 0!==e?e:null}setTabID(e){y.default.set(w.TAB_ID,e)}getIsSignInTabAlreadyCaptured(){var e;return null!==(e=y.default.get(w.IS_SIGN_IN_TAB_ALREADY_CAPTURED))&&void 0!==e&&e}setIsSignInTabAlreadyCaptured(e){y.default.set(w.IS_SIGN_IN_TAB_ALREADY_CAPTURED,e)}getIsSignInSession(){var e;return null!==(e=y.default.get(w.IS_SIGN_IN_SESSION))&&void 0!==e&&e}setIsSignInSession(e){y.default.set(w.IS_SIGN_IN_SESSION,e)}getIsSkipVaultFlow(){return y.default.get(w.IS_SKIP_VAULT_FLOW)||!1}setIsSkipVaultFlow(e){y.default.set(w.IS_SKIP_VAULT_FLOW,e)}getNewTabArray(){var e;return null!==(e=y.default.get(w.NEW_TAB_ARRAY))&&void 0!==e?e:[]}setNewTabArray(e){y.default.set(w.NEW_TAB_ARRAY,e)}};r.default=L},{"../../common/constants":13,"../../common/platformBridge/xidsafe":22,"./commonUtilsBG":27,"./globalSettings":36,"./notificationIcon":42,"./pwmSessionSettings":43,"./session":46,"./signin":47,"./telemetry/telemetryWrapper":55,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"feature/compromised-password/compromisedPasswordHelper":64,"feature/partnerSupport/partnerParams":96,locale:131,"telemetry/background":170,"telemetry/constants/telemetryActions":174,"telemetry/types/userAccountTelemetry.types":194}],27:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.IsElementPresentInArray=E,r.compareNumericStrings=y,r.getAuthLoginType=function(){const e=l.default.session.getThirdPartyInfo();if(p(e)){const e=l.default.session.getPartnerInfo();if(p(e))return u.default.AUTH_NSL;if(E(e,u.default.SUPPORTED_AUTH_PARTNERS))return e}else if(E(e,u.default.SUPPORTED_AUTH_THIRD_PARTIES))return e;return null},r.getBaseURLForAuthLogin=function(e){if(p(e))return null;if(m(e))return u.default.SUPPORTED_SSO_BASE_URLS[e];return null},r.getErrorReportingServiceContext=function(){const e=f.default.getParser(navigator.userAgent),t=o.default.utils.isExtnRunningInNSB()?o.default.constants.BROWSER_TYPE.NSB:e.getBrowser().name;return{user:{id:d.default.getClientID()},tags:{browserName:t}}},r.getLowerCase=function(e){return null==e?void 0:e.toLocaleLowerCase()},r.getUserStatus=function(e=u.default.THRESHOLD_USER_VERSION){const t=y(d.default.getVersion(),e);return t>0?u.default.USERS.NEW_USER:u.default.USERS.EXISTING_USER},r.getUsernameForValidation=function(e){return null==e?void 0:e.replace(/@.*$/,"").toLocaleLowerCase()},r.hasValue=g,r.isAuthLoginInSupportedSSOList=m,r.isDomainInAuthLoginKeys=function(e){if(i.default.AUTH_LOGIN_KEYS.some((t=>e.startsWith(t))))return!0;return!1},r.isFromSameRouter=function(e,t){return o.default.utils.urlWithoutQueryParameters(e).split("html")[1]===o.default.utils.urlWithoutQueryParameters(t).split("html")[1]},r.isPartnerInImportDiscontinueExclusionList=function(){return i.default.IMPORT_DISCONTINUE_FLOW_EXCULSION_LIST.some((e=>{var t;return e.toLowerCase()===(null===(t=a.default.retrievePartnerInfo())||void 0===t?void 0:t.toLowerCase())}))},r.isURLInSupportedSSOList=function(e){return Object.values(u.default.SUPPORTED_SSO_BASE_URLS).some((t=>o.default.utils.baseURL(e)===t))},r.shouldShowWhatsNewFeatureTab=function(){return g(s.default.FEATURE_UPDATE_VERSION)&&s.default.FEATURE_UPDATE_VERSION!==c.default.getVersionHandledInWhatsNew()},e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("common/constants")),s=n(e("configuration")),a=n(e("feature/partnerSupport/partnerParams")),u=n(e("feature/wax/waxConstants")),l=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),c=n(e("./globalSettings")),d=n(e("./extension/extensionInfo")),f=n(e("bowser"));const{utils:{isNil:p},logger:h}=o.default,{SUPPORTED_SSO_BASE_URLS:_}=u.default;function E(e,t){if(p(e)||p(t))throw new Error("element or array cannot be null");return t.some((t=>e===t))}function g(e,t=!0){return o.default.utils.isntNil(e)&&(t?e.trim().length>0:e.length>0)}function m(e){return Object.keys(u.default.SUPPORTED_SSO_BASE_URLS).some((t=>t===e))}function y(e,t){try{return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}catch(e){return h.error(e),null}}},{"./extension/extensionInfo":32,"./globalSettings":36,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,bowser:229,"common/constants":13,configuration:3,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"feature/partnerSupport/partnerParams":96,"feature/wax/waxConstants":124}],28:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Core=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("configuration")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=oe(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),l=e("locale"),c=n(e("feature/privacyPrompt/privacyPromptSettings")),d=n(e("feature/privacyPrompt/privacyPrompt")),f=n(e("feature/extPinningGuidance/extPinningGuidanceSettings")),p=n(e("feature/wax/fillCaptureHandler")),h=n(e("feature/security-dashboard/securityDashboardNotificationHandler")),_=n(e("feature/seamlessOnboarding/seamlessOnboardingSettings")),E=n(e("portal/background/delayOnboardingSettings")),g=n(e("feature/unlockManager/vaultUnlockManager")),m=n(e("feature/unlockManager/vuSettings")),y=n(e("@browser-services/wax/dist/release/Firefox/prod/SymWax.js")),S=n(e("portal/background/cspUIFlow")),T=n(e("feature/compromised-password/compromisedPasswordHelper")),A=e("common/global.types"),b=n(e("portal/background/delayOnboarding")),O=e("./../../../redux-core/features/userInfo/userInfoSlice"),I=n(e("feature/compromised-password/loginInfoManager")),v=n(e("telemetry/background")),N=e("telemetry/constants/telemetryActions"),R=n(e("feature/wax/waxStorageSettings")),C=n(e("feature/wax/waxConstants")),D=n(e("../../common/constants")),w=n(e("./extension/extensionInfo")),L=n(e("./extension/extension")),P=e("../../message-adapter/background"),M=n(e("./signin")),U=n(e("../../portal/background/portalScripts")),j=n(e("./telemetry/telemetryController")),k=n(e("./uiService")),x=n(e("./telemetry/telemetryWrapper")),F=n(e("./telemetry/heartBeatWrapper"));e("feature/compromised-password/motOnboardingController");var B=n(e("./session")),G=n(e("./store/userInfoStore")),V=n(e("./store/vaultActionsStore")),H=n(e("./globalSettings")),W=n(e("./pwmSessionSettings")),Y=n(e("feature/nudge/nudgeController")),K=n(e("./extension/extensionSettings")),z=n(e("./pwmVaultPersistenceSettings")),q=n(e("feature/compromised-password/compromisedNotificationSettings")),$=n(e("./dashboardUIController")),X=n(e("./vaultActions")),J=e("telemetry/background/helper/TelemetryHelper"),Z=e("telemetry/types/lifecycleTelemetry.types"),Q=n(e("./store/telemetryInfoStore")),ee=n(e("feature/wax/waxMLTelemetryStorageSettings")),te=n(e("feature/autoUnlock/autoUnlock")),re=n(e("./errorReportingService")),ne=e("./commonUtilsBG");function oe(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(oe=function(e){return e?r:t})(e)}const{settings:ie}=D.default,{utils:{createNewGuid:se,isNil:ae,isntNil:ue},logger:le,extensionAdapter:ce}=i.default;class de{constructor(){(0,o.default)(this,"isInitialized",!1),(0,o.default)(this,"isBrowserRestart",!1),(0,o.default)(this,"browserRestartListener",(()=>{this.isBrowserRestart=!0})),(0,o.default)(this,"initBaseSettingContainers",(async function(){i.default.globals.BROWSER===i.default.constants.BROWSER_TYPE.CHROME&&await f.default.initialize(),i.default.globals.BROWSER===i.default.constants.BROWSER_TYPE.FIREFOX&&await c.default.initializeSettingsContainer(),i.default.globals.BROWSER===i.default.constants.BROWSER_TYPE.EDGE&&await E.default.initialize(),i.default.globals.BROWSER===i.default.constants.BROWSER_TYPE.FIREFOX&&(await c.default.initialize(),!1===c.default.getPrivacyConsent()&&(k.default.setBrowserActionAlertIcon(),d.default.isRestartTimesToShowReached()||L.default.loadNudgeUI()))})),ce.addStartupListener(this.browserRestartListener)}initExtensionInformation(){const e=a.default.RETURN_URI,t=a.default.CLIENT_ID;s.default.session.initialize(["idsc_read","idsc_write","email"],e,t)}async initTelemetry(){return new Promise(((e,t)=>{const{telemetryConstants:r}=i.default,n=`Norton Identity Safe_${i.default.extensionAdapter.getExtensionId()}`;let o=i.default.utils.isExtnRunningInNSB()?i.default.constants.BROWSER_TYPE.NSB:i.default.globals.BROWSER;const s={APPLICATION_NAME:n,APPLICATION_VERSION:w.default.getVersion(),CLIENT_ID:w.default.getClientID(),DATA_SOURCE:r.dataSource.BROWSER_EXTENSION,TRACKING_ID:D.default.TELEMETRY_TRACKING_ID,USER_LANGUAGE:navigator.language,ANONYMIZE_IP:1,GOOGLE_ANALYTICS_PROTOCOL_VERSION:1,BROWSER_NAME:o};try{i.default.telemetry.init(s,(r=>{!0===r?e("Telemetry initialized"):t("Failed to initialize telemetry")}))}catch(e){t(`Failed to initialize telemetry. Error: ${e}`)}}))}initMessengerSubscription(e){P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.DASHBOARD_SHOWN,((e,t,r)=>{null==t||t("hello")})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.DEFAULT_PASSWORD_SAVING,((e,t)=>{ce.setPasswordSavingEnabled(e);const r=X.default.getRecoveryVaultFlowType();v.default.track(N.TELEMETRY_ACTIONS.ONBOARDING.SET_DEFAULT_ALLOWED,{flow:r}),null==t||t(!0)})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.SET_ONBOARDING_STEP,(async(e,t)=>{if(i.default.utils.isExtnRunningInNSB()){if(e===D.default.ONBOARDING.STEPS.SET_DEFAULT)return void X.default.postOnboardingSuccess()}else if((H.default.getIsVaultDeleted()||H.default.getPromoteRecoveryStep()===D.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.STARTED)&&e===D.default.ONBOARDING.STEPS.SET_DEFAULT&&await(0,J.isPWMSetAsDefault)())return H.default.setOnboardingStep(D.default.ONBOARDING.STEPS.PIN_EXTENSION),void $.default.openDashboardUI(D.default.ONBOARDING.URLS[D.default.ONBOARDING.STEPS.PIN_EXTENSION]);H.default.setOnboardingStep(e),$.default.openDashboardUI(D.default.ONBOARDING.URLS[e])})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.GET_IS_ONBOARDING,((e,t,r)=>{null==t||t(X.default.canShowOnboardingScreens())})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.REFRESH_STORE,((e,t,r)=>{G.default.setUserInfo(),null==t||t(!0)})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.OPEN_SIGN_IN_PAGE,((e,t,r)=>{var n;const o=Q.default.getAppContext(A.AppName.ONBOARD_SETUP);ae(o)&&Q.default.setTelemetryInfo({appName:A.AppName.ONBOARD_SETUP,contextScreen:Z.AppOpenContextScreen.OnboardSetup,contextAction:Z.AppOpenContextActionExtensionInstall.SigninButton,canSendAppOpenEvent:!1}),g.default.setAutomaticPasswordlessVaultUnlockRequest(!1),M.default.navigateToCCTPage(null==r||null===(n=r.tab)||void 0===n?void 0:n.id),M.default.setIsDeleteVaultFlow(!1),null==t||t(!0)})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.SET_TOUR_SHOWN,((e,t)=>{H.default.setTourShownStatus(!0)})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.TOUR_FINISHED,((e,t,r)=>{this.restartPasswordManagerInNewTab(null==r?void 0:r.tab)})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.SPLASH_SHOWN,((e,t)=>{let r="";switch(e){case D.default.SEAMLESS_ONBOARDING.SETTINGS_KEY.SEAMLESS_UNLOCK_SCREEN_SHOWN:m.default.splashScreenShown(!0),r=g.default.getWelcomeNotificationId(),r&&(i.default.notificationCenter.removeNotification(r),g.default.setWelcomeNotificationId(null));break;case D.default.SEAMLESS_ONBOARDING.SETTINGS_KEY.CONGRATULATIONS_SCREEN_SHOWN:_.default.setCongratulationSplashScreenShown(!0);break;case D.default.COMPROMISED_VAULT_PASSWORD_MODAL_SHOWN:T.default.setCompromisedVaultPasswordDetected(!1);break;case D.default.MATCH_SSO_VAULT_PASSWORD_MODAL_SHOWN:T.default.setMatchSSOVaultPasswordFlowDetected(!1);break;case D.default.DONT_GET_UNLOCKED_OUT_MODAL_SHOWN:X.default.setChangePasswordFlow(!1),X.default.setRecoveryInfoFound(!1);break;case D.default.OLD_KEY_NOT_VALID_MODAL_SHOWN:X.default.setChangePasswordFlow(!1),X.default.setRecoveryInfoFound(!1),X.default.setRecoveryKeyUsedForCreateVault(!1)}G.default.setUserInfo(),null==t||t()})),P.messenger.subscribe(P.MESSAGES.CRASH_REPORT,((e,t,r)=>{le.error(`Crash Report: ${e.error} at ${e.url}`)})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.SET_NSL_CREDENTIALS,(async({username:t,password:r,loginURL:n,siteName:o})=>{const s=I.default.getObfuscationKey();if("string"!=typeof s||""===s)return;const a=i.default.utils.obfuscatePassword(r,s);null==e||e.dispatch((0,O.setInfo)({id:"nslLogin",value:{username:t,password:a,loginURL:n,siteName:o}}))})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.SET_WHATSNEW_VERSION,((e,t)=>{H.default.setVersionHandledInWhatsNew(a.default.FEATURE_UPDATE_VERSION)})),P.messenger.subscribe(P.MESSAGES.DASHBOARD_MESSAGES.WHATSNEW_FLOW_COMPLETED,((e,t,r)=>{Q.default.setTelemetryInfo({appName:A.AppName.ONBOARD_SETUP,contextScreen:Z.AppOpenContextScreen.VaultUI,contextAction:Z.AppOpenContextActionVaultUI.WhatsNewFeaturePopup,canSendAppOpenEvent:!0}),this.restartPasswordManagerInNewTab(null==r?void 0:r.tab)}))}restartPasswordManagerInNewTab(e){M.default.openLoginFlow({isDeleteVaultFlow:!1,useNudgePageForLogin:!0}),ae(e)||setTimeout((()=>{ce.closeTab(null==e?void 0:e.id)}),1)}initGlobalSettings(){return new Promise(((e,t)=>{H.default.initialize((r=>{r?e("Global settings initialized"):t("Failed to initialize global settings")}))}))}async handleInstall(){return L.default.getInstallType()!==A.InstallStatusType.INSTALL||await U.default.onInstall(),!0}async initVaultSDK(){await z.default.initialize();const e={sdk_spoc:!i.default.extensionAdapter.isManifestV3Extension(),appNodeID:a.default.appNodeID,pbkdf2MD:a.default.pbkdf2MD,keyStore:W.default},t={sdk_spoc:!i.default.extensionAdapter.isManifestV3Extension()},r=await u.vaultManager.initialize(e);return await u.recoveryManager.initialize(t),B.default.getAndPopulateStoreWithRecoveryInfo(),r}async initCompromisePasswords(){T.default.isCompromisedPasswordFlowEnabled()&&await T.default.initialize()}async extensionInit(){return L.default.extensionStatusHandler(),S.default.init(),!0}initializeWAXTelemetry(){const e=x.default.getDefaultParametersForWaxTelemetry();y.default.telemetryWrapperBG.setDefaultParameter(e)}initializeWAX(){const e=(0,l.getLocale)();return y.default.init.initializeWaxFormDataLoaderSettings(e)}getRequestHeaderParams(){return{REQUEST_HEADER_PARAMS_GETTER:()=>{const e=se();return{[D.default.REQUEST_TRACING.TRACE_ID_KEY]:`${[D.default.REQUEST_TRACING.GUID_PREFIX]}${e}`,[D.default.REQUEST_TRACING.ATTEMPT_COUNT_KEY]:`${[D.default.REQUEST_TRACING.ATTEMPT_COUNT_PLACEHOLDER]}`}}}}initializeTelemetryServiceManager(){v.default.init()}async init(e){b.default.addStartUpListenerIfNeeded();try{if(this.isInitialized)return this.isInitialized;i.default.extensionAdapter.init();const t=this.getRequestHeaderParams();return await s.default.init.ready(t),this.initExtensionInformation(),await this.initGlobalSettings(),q.default.initialize(ie.COMPROMISED_PASSWORD_SECURE_CONTAINER,ie.COMPROMISED_PASSWORD_SECURE_KEY,ie.COMPROMISED_PASSWORD_NOTIFICATION_KEY),this.initMessengerSubscription(e),Y.default.initNudgeTabController(),await this.initVaultSDK(),await Promise.all([this.initTelemetry(),this.initializeWAX(),this.initializeWAXTelemetry(),this.initCompromisePasswords(),p.default.initialize(e)]),this.initializeTelemetryServiceManager(),await ee.default.initialize(),await this.handleInstall(),await this.extensionInit(),u.vaultKeys.isLocked()||(await B.default.migrateExtensionSettingsAfterServiceWorkerRestart(),e.dispatch((0,O.setInfo)({id:"extensionSettings",value:K.default.getSettings()}))),u.vaultKeys.isLocked()&&k.default.setBrowserActionIcon(!1),j.default.init(),i.default.telemetrySettings.isTelemetryEnabled()&&re.default.start((0,ne.getErrorReportingServiceContext)()),F.default.isAllowHbPing()&&await F.default.initHeartBeat(),await this.initBaseSettingContainers(),h.default.initialize(e),this.isInitialized=!0,u.vaultKeys.isLocked()||(V.default.loadVaultData(),R.default.initialize(D.default.settings.WAX_SECURE_CONTAINER,s.default.utils.createStringBufferFromUint8Buffer(u.vaultKeys.getEncryptionKey()),C.default.SETTINGS_NOTIFICATION_KEY)),await te.default.initializeSecureSettings(ie.AUTO_UNLOCK_SECURE_CONTAINER),G.default.setUserInfo(),(this.isBrowserRestart||!0===B.default.getIsBrowserRestart())&&(B.default.setIsBrowserRestart(!0),B.default.addTabUpdatedEventListener(),ce.removeStartupListener(this.browserRestartListener),this.isBrowserRestart=!1),le.info("Core Module :: Initialization is done successfully"),this.isInitialized}catch(e){const t=`ERROR :: Initialising Core Modules: ${e}`;throw le.error(t),new Error(t)}}}r.Core=de;const fe=new de;r.default=fe},{"../../common/constants":13,"../../message-adapter/background":134,"../../portal/background/portalScripts":141,"./../../../redux-core/features/userInfo/userInfoSlice":741,"./commonUtilsBG":27,"./dashboardUIController":29,"./errorReportingService":30,"./extension/extension":31,"./extension/extensionInfo":32,"./extension/extensionSettings":33,"./globalSettings":36,"./pwmSessionSettings":43,"./pwmVaultPersistenceSettings":44,"./session":46,"./signin":47,"./store/telemetryInfoStore":50,"./store/userInfoStore":51,"./store/vaultActionsStore":52,"./telemetry/heartBeatWrapper":53,"./telemetry/telemetryController":54,"./telemetry/telemetryWrapper":55,"./uiService":56,"./vaultActions":57,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"@browser-services/wax/dist/release/Firefox/prod/SymWax.js":216,"common/global.types":16,configuration:3,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"feature/autoUnlock/autoUnlock":60,"feature/compromised-password/compromisedNotificationSettings":62,"feature/compromised-password/compromisedPasswordHelper":64,"feature/compromised-password/loginInfoManager":65,"feature/compromised-password/motOnboardingController":67,"feature/extPinningGuidance/extPinningGuidanceSettings":70,"feature/nudge/nudgeController":94,"feature/privacyPrompt/privacyPrompt":105,"feature/privacyPrompt/privacyPromptSettings":106,"feature/seamlessOnboarding/seamlessOnboardingSettings":109,"feature/security-dashboard/securityDashboardNotificationHandler":112,"feature/unlockManager/vaultUnlockManager":117,"feature/unlockManager/vuSettings":118,"feature/wax/fillCaptureHandler":119,"feature/wax/waxConstants":124,"feature/wax/waxMLTelemetryStorageSettings":127,"feature/wax/waxStorageSettings":129,locale:131,"portal/background/cspUIFlow":136,"portal/background/delayOnboarding":137,"portal/background/delayOnboardingSettings":138,"telemetry/background":170,"telemetry/background/helper/TelemetryHelper":169,"telemetry/constants/telemetryActions":174,"telemetry/types/lifecycleTelemetry.types":188}],29:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),a=n(e("urijs")),u=n(e("common/constants")),l=e("./../../../redux-core/features/userInfo/userInfoSlice"),c=n(e("./pwmSessionSettings")),d=e("core/background/commonUtilsBG");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}const{utils:{isNil:p,isntNil:h},logger:_,extensionAdapter:E}=o.default,{DASHBOARD_UI_CONTROLLER:g}=u.default.SESSION_STORAGE_KEYS;const m=new class{init(e){this.store=e}getTabID(){var e;return null!==(e=c.default.get(g.TAB_ID))&&void 0!==e?e:null}setTabID(e){c.default.set(g.TAB_ID,e)}getWindowId(){var e;return null!==(e=c.default.get(g.WINDOW_ID))&&void 0!==e?e:null}setWindowId(e){c.default.set(g.WINDOW_ID,e)}getOverrideToUrl(){var e;return null!==(e=c.default.get(g.OVERRIDE_TO_URL))&&void 0!==e?e:null}setOverrideToUrl(e){c.default.set(g.OVERRIDE_TO_URL,e)}getIsExportTabLaunched(){var e;return null!==(e=c.default.get(g.IS_EXPORT_TAB_LAUNCHED))&&void 0!==e&&e}setIsExportTabLaunched(e){c.default.set(g.IS_EXPORT_TAB_LAUNCHED,e)}checkIfTabExistElseCreate(e,t,r){h(e)?E.getTab(e,(e=>{if(h(E.getLastError())||p(e)||(0,a.default)(e.url).domain()!==(0,a.default)(t).domain())E.createTab(t,(e=>{this.setTabID(E.getTabID(e)),this.setWindowId(E.getWindowIDForTab(e)),this.addEventListeners()}));else{E.activateTab(E.getTabID(e)),E.focusWindow(E.getWindowIDForTab(e));const n=(0,d.isFromSameRouter)(null==e?void 0:e.url,t);e.url!==t&&r&&n?E.sendMessageToTab(e,{shouldNavigate:!0,urlPath:t}):n||E.createTab(t,(t=>{E.closeTab(E.getTabID(e)),this.setTabID(E.getTabID(t)),this.setWindowId(E.getWindowIDForTab(t))}))}})):E.createTab(t,(e=>{this.setTabID(E.getTabID(e)),this.setWindowId(E.getWindowIDForTab(e))}))}addEventListeners(){}canOpenDashboardUI(){let e=!0;return p(i.default.session.getNAGUID())&&(_.error("Trying to open vault tab UI when user hasn't signed in. Seems like a bug."),e=!1),s.vaultKeys.isLocked()&&(_.error("Trying to open vault tab UI when vault is locked. Seems like a bug."),e=!1),e}openDashboardUI(e,t=!0,r=!0){var n;this.canOpenDashboardUI()&&(this.checkIfTabExistElseCreate(this.getTabID(),E.getExtensionURL(e),t),r&&(null===(n=this.store)||void 0===n||n.dispatch((0,l.setInfo)({id:"waxInfo",value:{isPasswordRequiredFormFill:!1}}))))}validateUiTab(e){const t=E.getTabID(e);h(e)&&t===this.getTabID()||E.closeTab(t)}validateAndExtractCurrentURL(e,t){E.getActiveTab((r=>{const n=new a.default(r.url);if(!u.default.ACCEPTED_SCHEMES.includes(n.scheme()))return void t(null);if(e)return void t(o.default.utils.baseURL(n.href()));const i=n.domain();t(i)}))}isFavoritesAvailable(){var e;const t=null===(e=this.store)||void 0===e?void 0:e.getState();return["logins","notes","contacts","bankAccounts","creditCards"].some((e=>{const r=t[e].entities;return Object.keys(r).some((t=>{var n;return"contacts"===e?!(null===(n=r[t].identityNode)||void 0===n||!n.favorite):!!r[t].favorite}))}))}};r.default=m},{"./../../../redux-core/features/userInfo/userInfoSlice":741,"./pwmSessionSettings":43,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/commonUtilsBG":27,urijs:718}],30:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.exec.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("configuration")),s=n(e("common/constants"));const{env:a,RELEASE_BUILD:u,SENTRY_DSN:l}=i.default,{VERSION:c}=s.default,d="(?:103|5005|5006|5007|5008|5009|5011|5012|5013|5015)",f=new RegExp(`^Key Name:${d} - Schema not available.$`),p=new RegExp(`^Invalid data value: ${d}$`),h=new RegExp("^Failed to load the file from cloud:"),_=new RegExp("^Crash Report: A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received at .*"),E=new o.default.ErrorReportingService({dsn:l,environment:a,release:c,dist:`${o.default.globals.BROWSER}_${a}`,debug:!u,ignoreErrors:[f,p,h,_]});r.default=E},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,configuration:3,"core-js/modules/es.regexp.constructor.js":441,"core-js/modules/es.regexp.exec.js":442}],31:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants/uiConstants")),a=n(e("feature/nudge/nudgeController")),u=n(e("configuration")),l=n(e("telemetry/background")),c=e("telemetry/constants"),d=n(e("../../../common/constants")),f=e("../../../common/global.types"),p=n(e("../globalSettings")),h=n(e("../telemetry/telemetryWrapper")),_=n(e("../../../portal/background/portalScripts")),E=n(e("../../../common/global")),g=n(e("../store/userInfoStore")),m=e("../commonUtilsBG"),y=n(e("../session"));const{utils:S,extensionAdapter:T}=i.default;const A=new class{constructor(){(0,o.default)(this,"launchOrScheduleTourPage",(()=>{this.launchURLInNewTabOnCondition("html/onboardSetup.html#/onboard-setup/tour",(()=>!p.default.getTourShownStatus()))})),(0,o.default)(this,"resetFeaturePromotionSettings",(()=>{p.default.setPromoteRecoveryStep(d.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.COMPLETED),p.default.setWasOnboardedPriorToRecoveryPromo(!1)})),(0,o.default)(this,"launchOrScheduleWhatsNewPage",(()=>{i.default.utils.isExtnRunningInNSB()||this.launchURLInNewTabOnCondition(d.default.WHATS_NEW_PAGE.URL,(()=>(0,m.shouldShowWhatsNewFeatureTab)()))})),(0,o.default)(this,"launchURLInNewTabOnCondition",((e,t)=>{function r(){T.removeTabUpdatedEventListener(r),t()&&T.createTab(e)}(0,m.hasValue)(e)&&S.isntNil(t)&&!t()||T.createTab(e,(e=>{const t=T.getLastError();e&&!t||T.addTabUpdatedEventListener(r)}))}))}getIconOnPath(){return s.default.BROWSER_ACTION_POPUP.ICON_ON_PATH}getIconOffPath(){return s.default.BROWSER_ACTION_POPUP.ICON_OFF_PATH}getAlertIconPath(){return s.default.BROWSER_ACTION_POPUP.ALERT_ICON_PATH}getInstallType(){const e=p.default.getValue(d.default.STORED_VERSION);return S.isNil(e)?f.InstallStatusType.INSTALL:e!==d.default.VERSION?f.InstallStatusType.UPDATE:f.InstallStatusType.RELAUNCH}extensionStatusHandler(){const e=this.getInstallType();return e===f.InstallStatusType.INSTALL?this.onInstall():(E.default.isFreshInstall=!1,e===f.InstallStatusType.UPDATE?this.onUpdate():void 0)}onUpdate(){p.default.setValue(d.default.FRESH_INSTALL,!1);const e=p.default.getValue(d.default.STORED_VERSION);S.isNewVersionUpdated(e,d.default.VERSION)&&(p.default.setValue(d.default.WELCOME_NOTIFICATION_CLICKED,!0),p.default.setInstallStatus(d.default.INSTALL_STATUS.UPDATE)),l.default.track(c.TELEMETRY_ACTIONS.LIFECYCLE.UPDATE,{existingVersion:e}),h.default.sendExtensionUpdate(),p.default.setValue(d.default.STORED_VERSION,d.default.VERSION),this.resetFeaturePromotionSettings(),this.launchOrScheduleWhatsNewPage(),y.default.checkAndSendPasswordlessVaultUnlockNotificationOnStartup(),p.default.setValue(d.default.AUTO_UNLOCK_POST_UPGRADE,!0)}loadNudgeUI(){a.default.openNudgeTab()}async onInstall(){E.default.isFreshInstall=!0,p.default.setIsOnboarding(!0),p.default.setValue(d.default.FRESH_INSTALL,!0),p.default.setInstallStatus(d.default.INSTALL_STATUS.INSTALL),p.default.setInstallDate(),l.default.track(c.TELEMETRY_ACTIONS.LIFECYCLE.INSTALL),h.default.sendExtensionInstall(),p.default.setValue(d.default.STORED_VERSION,d.default.VERSION),g.default.setUserInfo(),_.default.checkAndOpenOnboardingPage(),p.default.setTourShownStatus(!0),p.default.setVersionHandledInWhatsNew(u.default.FEATURE_UPDATE_VERSION)}};r.default=A},{"../../../common/constants":13,"../../../common/global":15,"../../../common/global.types":16,"../../../portal/background/portalScripts":141,"../commonUtilsBG":27,"../globalSettings":36,"../session":46,"../store/userInfoStore":51,"../telemetry/telemetryWrapper":55,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants/uiConstants":9,configuration:3,"core-js/modules/es.promise.js":437,"feature/nudge/nudgeController":94,"telemetry/background":170,"telemetry/constants":173}],32:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("../../../common/constants")),u=n(e("../globalSettings")),l=n(e("../../../common/global")),c=e("extensionContext");const{utils:{isNil:d,isntNil:f}}=i.default;const p=new class{constructor(){(0,o.default)(this,"manifestDict",c.extensionContext.runtime.getManifest()),(0,o.default)(this,"productName",this.manifestDict.name),(0,o.default)(this,"version",this.manifestDict.version)}getVersion(){return this.version}getProductName(){return this.productName}getManifestDict(){return this.manifestDict}getClientID(){const e=u.default.getValue(a.default.CGUID);return f(e)?e:d(l.default.cguid)?s.default.authSCD.getMachineGUID():(u.default.setValue(a.default.CGUID,l.default.cguid),l.default.cguid)}};r.default=p},{"../../../common/constants":13,"../../../common/global":15,"../globalSettings":36,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,extensionContext:4}],33:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ExtensionSettings=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants/uiConstants")),a=e("message-adapter/background"),u=n(e("feature/wax/waxConstants")),l=n(e("telemetry/background")),c=e("../../../../redux-core/features/userInfo/userInfoSlice"),d=n(e("../../../common/constants")),f=n(e("../telemetry/telemetryWrapper")),p=n(e("../pwmSessionSettings")),h=e("../commonUtilsBG"),_=e("telemetry/constants/telemetryActions"),E=n(e("../errorReportingService"));const{logger:g,secureSettings:m,telemetrySettings:y,utils:S}=i.default,{isNil:T}=S;class A{constructor(){(0,o.default)(this,"defaultPolicy",{[d.default.settings.REQUIRE_VAULT_PASSWORD]:!1,[d.default.settings.LOGIN_SAVING]:s.default.SETTINGS.LOGIN_SAVING_TYPE.ASK,[d.default.settings.DO_NOT_ASK_AGAIN]:!1,[d.default.settings.AUTO_FILL]:!1,[d.default.settings.OFFER_AUTO_FILL]:(0,h.getUserStatus)()===u.default.USERS.EXISTING_USER?s.default.SETTINGS.OFFER_AUTO_FILL.LOAD:s.default.SETTINGS.OFFER_AUTO_FILL.CLICK,[d.default.settings.AUTO_SAVE]:!1,[d.default.settings.HIDE_FAVICON]:!1,[d.default.settings.SHARE_DATA_WITH_NORTON]:!0})}init(e){this.store=e,this.initListeners()}initListeners(){a.messenger.subscribe(a.MESSAGES.SETTINGS_MESSAGES.SET_SETTINGS,(e=>{this.setSettings(e)})),a.messenger.subscribe(a.MESSAGES.SETTINGS_MESSAGES.RESTORE_DEFAULT_SETTINGS,(()=>{this.resetSettings()}))}initialize(e,t,r=!1){if(T(e))throw new Error("Settings cannot be initialized without vault password");if(!1===S.isFunction(t))throw new Error("Callback cannot be null.");T(r)&&(r=!1);const n=(r,n,o)=>{if(!1===r)return this.getDidReset()?(g.error("Unable to create settings container, even after reseting the container"),void setTimeout((()=>{t(r,o)}),1)):(this.initialize(e,t,!0),void this.setDidReset(!0));this.container=n;const i={[d.default.settings.REQUIRE_VAULT_PASSWORD]:this.getRequireVaultPassword(),[d.default.settings.LOGIN_SAVING]:this.getLoginsSaving(),[d.default.settings.DO_NOT_ASK_AGAIN]:this.getDoNotAskAgain(),[d.default.settings.AUTO_FILL]:this.getAutoFill(),[d.default.settings.OFFER_AUTO_FILL]:this.getOfferAutoFill()};this.getShouldSetAutoFillToFalse()||(i[d.default.settings.AUTO_FILL]=!1,this.setShouldSetAutoFillToFalse(!0),this.setAutoFill(!1)),i[d.default.settings.AUTO_SAVE]=this.getAutoSave(),i[d.default.settings.HIDE_FAVICON]=this.getHideFavicon(),this.setSettings(i),this.setDidReset(!1),setTimeout((()=>{t(r,null)}),1)};r?this.removeAll(((t,r)=>{m.loadSecureSettingsContainer(d.default.settings.CONTAINER,e,n)})):m.loadSecureSettingsContainer(d.default.settings.CONTAINER,e,n)}removeAll(e){m.deleteSecureSettingsContainer(d.default.settings.CONTAINER,e)}getSettings(){return{requireVaultPassword:this.getRequireVaultPassword(),loginSaving:this.getLoginsSaving(),shareDataWithNorton:this.getShareDataEnabled(),doNotAskAgain:this.getDoNotAskAgain(),autoFill:this.getAutoFill(),autoSave:this.getAutoSave(),hideFavicon:this.getHideFavicon(),offerAutoFill:this.getOfferAutoFill()}}setSettings(e){var t;for(const t in e){const r=e[t];switch(t){case d.default.settings.REQUIRE_VAULT_PASSWORD:this.setRequireVaultPassword(r);break;case d.default.settings.LOGIN_SAVING:this.setLoginsSaving(r);break;case d.default.settings.SHARE_DATA_WITH_NORTON:!1===r&&(f.default.sendSettingsPageTelemetryDisable(),l.default.track(_.TELEMETRY_ACTIONS.SETTINGS_ACTION.TELEMETRY_SETTINGS_CHANGED,{shareUsage:!1})),this.setShareDataEnabled(r),!0===r&&l.default.track(_.TELEMETRY_ACTIONS.SETTINGS_ACTION.TELEMETRY_SETTINGS_CHANGED,{shareUsage:!0});break;case d.default.settings.DO_NOT_ASK_AGAIN:this.setDoNotAskAgain(r);break;case d.default.settings.AUTO_FILL:this.setAutoFill(r);break;case d.default.settings.AUTO_SAVE:this.setAutoSave(r);break;case d.default.settings.OFFER_AUTO_FILL:this.setOfferAutoFill(r);break;case d.default.settings.HIDE_FAVICON:this.setHideFavicon(r)}}null===(t=this.store)||void 0===t||t.dispatch((0,c.setInfo)({id:"extensionSettings",value:this.getSettings()}))}resetSettings(){this.setSettings(this.defaultPolicy)}getShouldSetAutoFillToFalse(){var e,t;return null!==(e=null===(t=this.container)||void 0===t?void 0:t.getObject(d.default.settings.SHOULD_SET_AUTO_FILL_TO_FALSE))&&void 0!==e&&e}setShouldSetAutoFillToFalse(e){var t;null===(t=this.container)||void 0===t||t.setObject(d.default.settings.SHOULD_SET_AUTO_FILL_TO_FALSE,e)}setRequireVaultPassword(e){var t;null===(t=this.container)||void 0===t||t.setObject(d.default.settings.REQUIRE_VAULT_PASSWORD,e)}getRequireVaultPassword(){var e,t;return null!==(e=null===(t=this.container)||void 0===t?void 0:t.getObject(d.default.settings.REQUIRE_VAULT_PASSWORD))&&void 0!==e?e:this.defaultPolicy[d.default.settings.REQUIRE_VAULT_PASSWORD]}getHideFavicon(){var e,t;return null!==(e=null===(t=this.container)||void 0===t?void 0:t.getObject(d.default.settings.HIDE_FAVICON))&&void 0!==e?e:this.defaultPolicy[d.default.settings.HIDE_FAVICON]}setHideFavicon(e){var t;null===(t=this.container)||void 0===t||t.setObject(d.default.settings.HIDE_FAVICON,e)}setLoginsSaving(e){var t;null===(t=this.container)||void 0===t||t.setObject(d.default.settings.LOGIN_SAVING,e)}getLoginsSaving(){var e,t;return null!==(e=null===(t=this.container)||void 0===t?void 0:t.getObject(d.default.settings.LOGIN_SAVING))&&void 0!==e?e:this.defaultPolicy[d.default.settings.LOGIN_SAVING]}setShareDataEnabled(e){y.setTelemetryEnabled(e),e?(y.setUserRespondedInOptOutPage(!0),E.default.start((0,h.getErrorReportingServiceContext)())):E.default.stop(),l.default.handleTelemetryPreferenceChange()}getShareDataEnabled(){return y.isTelemetryEnabled()}setDoNotAskAgain(e){var t;null===(t=this.container)||void 0===t||t.setObject(d.default.settings.DO_NOT_ASK_AGAIN,e)}getDoNotAskAgain(){var e,t;return null!==(e=null===(t=this.container)||void 0===t?void 0:t.getObject(d.default.settings.DO_NOT_ASK_AGAIN))&&void 0!==e?e:this.defaultPolicy[d.default.settings.DO_NOT_ASK_AGAIN]}setAutoFill(e){var t;null===(t=this.container)||void 0===t||t.setObject(d.default.settings.AUTO_FILL,e)}getAutoFill(){var e,t;return null!==(e=null===(t=this.container)||void 0===t?void 0:t.getObject(d.default.settings.AUTO_FILL))&&void 0!==e?e:this.defaultPolicy[d.default.settings.AUTO_FILL]}setAutoSave(e){var t;null===(t=this.container)||void 0===t||t.setObject(d.default.settings.AUTO_SAVE,e)}getAutoSave(){var e,t;return null!==(e=null===(t=this.container)||void 0===t?void 0:t.getObject(d.default.settings.AUTO_SAVE))&&void 0!==e?e:this.defaultPolicy[d.default.settings.AUTO_SAVE]}setOfferAutoFill(e){var t;null===(t=this.container)||void 0===t||t.setObject(d.default.settings.OFFER_AUTO_FILL,e)}getOfferAutoFill(){var e,t;return null!==(e=null===(t=this.container)||void 0===t?void 0:t.getObject(d.default.settings.OFFER_AUTO_FILL))&&void 0!==e?e:this.defaultPolicy[d.default.settings.OFFER_AUTO_FILL]}getDidReset(){var e;return null!==(e=p.default.get(d.default.settings.DID_RESET))&&void 0!==e&&e}setDidReset(e){p.default.set(d.default.settings.DID_RESET,e)}}r.ExtensionSettings=A;const b=new A;r.default=b},{"../../../../redux-core/features/userInfo/userInfoSlice":741,"../../../common/constants":13,"../commonUtilsBG":27,"../errorReportingService":30,"../pwmSessionSettings":43,"../telemetry/telemetryWrapper":55,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants/uiConstants":9,"feature/wax/waxConstants":124,"message-adapter/background":134,"telemetry/background":170,"telemetry/constants/telemetryActions":174}],34:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("../../common/constants")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),a=n(e("./dashboardUIController")),u=n(e("./globalSettings")),l=n(e("./vaultActions"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}const{isNil:d}=o.default.utils;const f=new class{async shouldPromoteRecoveryFeature(){if(u.default.getValue(i.default.FRESH_INSTALL))return!1;if(l.default.getChangePasswordFlow())return!1;if(u.default.getPromoteRecoveryStep()!==i.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.DEFAULT)return!1;return null==(await s.recoveryManager.fetchRecoveryInfo()).getModifiedAt()}async promoteRecoveryAction(e=!1){if(u.default.getPromoteRecoveryStep()!==i.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.DEFAULT)return;u.default.setPromoteRecoveryStep(i.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.STARTED);u.default.getOnboardingStep()===i.default.ONBOARDING.STEPS.ONBOARDED&&u.default.setWasOnboardedPriorToRecoveryPromo(!0),u.default.setIsOnboarding(!0),u.default.setOnboardingStep(i.default.ONBOARDING.STEPS.DOWNLOAD_RECOVERY),e&&a.default.openDashboardUI(i.default.ONBOARDING.URLS[i.default.ONBOARDING.STEPS.DOWNLOAD_RECOVERY],!0)}};r.default=f},{"../../common/constants":13,"./dashboardUIController":29,"./globalSettings":36,"./vaultActions":57,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453}],35:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=e("firebase/app"),s=e("firebase/messaging"),a=e("firebase/messaging/sw"),u=n(e("./spocObserver")),l=n(e("../../common/constants")),c=e("./store/pwmStore"),d=n(e("./core")),f=n(e("bowser"));const{logger:p,utils:{isntNil:h}}=o.default;let _,E;try{if(o.default.extensionAdapter.isManifestV3Extension()){const e=window.document;window.document=void 0,_=(0,i.initializeApp)(l.default.FIREBASE_CONFIGURATION),E=(0,a.getMessaging)(_),(0,a.onBackgroundMessage)(E,(async e=>{const t=(0,c.getPwmStore)();return await d.default.init(t),u.default.handleSPOCCallbacks(e),!0})),window.document=e}}catch(e){p.error(e)}const g=new class{registerPushManagerSubscription(){try{const e=self.registration.pushManager.subscribe;self.registration.pushManager.subscribe=async t=>{t.userVisibleOnly=!1;return e.apply(self.registration.pushManager,[t])}}catch(e){p.error(e)}}async initialize(){try{this.messaging=E;const e=f.default.getParser(window.navigator.userAgent);if(e.getBrowserName()===o.default.constants.BROWSER_TYPE.CHROME){const t=e.getBrowserVersion();if(h(t)){parseInt(t.split(".")[0],10)>=121&&this.registerPushManagerSubscription()}}this.firebaseToken=await(0,s.getToken)(this.messaging,{serviceWorkerRegistration:self.registration})}catch(e){p.error(` Firebase exception ${e.toString()}`)}}async unsubscribe(){try{!0===await(0,s.deleteToken)(this.messaging)?p.log("Unsubscription from Firebase notifications is success"):p.log("Unsubscription from Firebase notifications is failed")}catch(e){p.error(e)}}};r.default=g},{"../../common/constants":13,"./core":28,"./spocObserver":48,"./store/pwmStore":49,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,bowser:229,"core-js/modules/es.promise.js":437,"firebase/app":465,"firebase/messaging":466,"firebase/messaging/sw":467}],36:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("../../common/constants")),a=n(e("../../common/global"));const{constants:u}=i.default,{settings:l,utils:c,logger:d}=i.default,{isNil:f}=c,p=s.default.VAULT_UNLOCK,h=s.default.RETRY_CONSTANTS;const _=new class{constructor(){(0,o.default)(this,"settingsContainer",null)}initialize(e){if(!c.isFunction(e))throw new Error("callback must be a function");l.loadSettingsContainer(s.default.IDSAFE_GLOBAL_SETTINGS_CONTAINER,!0,((t,r,n)=>{if(!1===t||f(r))return d.error("failed to load IDSAFE_GLOBAL_SETTINGS_CONTAINER"),void e(!1);this.settingsContainer=r,e(!0)}))}getValue(e){if(!f(this.settingsContainer))return this.settingsContainer.getObject(e);d.error("settings not initialized")}setValue(e,t){f(this.settingsContainer)?d.error("settings not initialized"):this.settingsContainer.setObject(e,t)}clearValue(e){f(this.settingsContainer)?d.error("settings not initialized"):this.settingsContainer.removeObject(e)}getOpenVaultUI(){const e=this.getValue(s.default.OPEN_VAULT_UI);return!f(e)&&e}setOpenVaultUI(e){c.isBoolean(e)&&this.setValue(s.default.OPEN_VAULT_UI,e)}getMigrateIDSSettings(){const e=this.getValue(p.MIGRATE_IDS_SETTINGS);return!f(e)&&e}setMigrateIDSSettings(e){f(e)||this.setValue(p.MIGRATE_IDS_SETTINGS,e)}getFingerprint(){let e=this.getValue(s.default.FINGERPRINT);if(f(e)){let t=(new Date).getTime();e="xxxxxxxxxyxxxxxx".replace(/[xy]/g,(e=>{const r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:7&r|8).toString(16)})),this.setValue(s.default.FINGERPRINT,e)}return e}setInstallSource(e){this.setValue(s.default.INSTALL_SOURCE,e)}getInstallSource(){return _.getValue(s.default.INSTALL_SOURCE)}setInstallDomain(e){this.setValue(s.default.INSTALL_DOMAIN,e)}getInstallDomain(){return _.getValue(s.default.INSTALL_DOMAIN)}setInstallStatus(e){f(e)||this.setValue(s.default.INSTALL_STATUS_KEY,e)}getInstallStatus(){const e=this.getValue(s.default.INSTALL_STATUS_KEY);return f(e)?s.default.INSTALL_STATUS.INSTALL:e}setTourShownStatus(e){f(e)||this.setValue(s.default.TOUR_UI_SHOWN_KEY,e)}getTourShownStatus(){const e=this.getValue(s.default.TOUR_UI_SHOWN_KEY);return!f(e)&&e}setWasOnboardedPriorToRecoveryPromo(e){f(e)||this.setValue(s.default.WAS_ONBOARDED_PRIOR_TO_RECOVERY_PROMOTION_KEY,e)}getWasOnboardedPriorToRecoveryPromo(){const e=this.getValue(s.default.WAS_ONBOARDED_PRIOR_TO_RECOVERY_PROMOTION_KEY);return!f(e)&&e}setPromoteRecoveryStep(e){f(e)||this.setValue(s.default.RECOVERY_PROMOTION_STEP_KEY,e)}getPromoteRecoveryStep(){const e=this.getValue(s.default.RECOVERY_PROMOTION_STEP_KEY);return f(e)?s.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.DEFAULT:e}setOnboardingStep(e){f(e)||this.setValue(s.default.ONBOARDING.CURRENT_STEP,e)}getOnboardingStep(){return this.getValue(s.default.ONBOARDING.CURRENT_STEP)}setIsOnboarding(e){f(e)||this.setValue(s.default.ONBOARDING.IS_ONBOARDING,e)}setIsVaultActive(e){this.setValue(s.default.IS_VAULT_ACTIVE,e)}getIsVaultActive(){var e;return null!==(e=this.getValue(s.default.IS_VAULT_ACTIVE))&&void 0!==e&&e}setIsVaultDeleted(e){f(e)||this.setValue(s.default.IS_VAULT_DELETED,e)}getIsVaultDeleted(){return this.getValue(s.default.IS_VAULT_DELETED)}getIsOnboarding(){return this.getValue(s.default.ONBOARDING.IS_ONBOARDING)}setVersionHandledInWhatsNew(e){f(e)||this.setValue(s.default.WHATS_NEW_PAGE.VERSION_HANDLED_SETTINGS_KEY,e)}getVersionHandledInWhatsNew(){return this.getValue(s.default.WHATS_NEW_PAGE.VERSION_HANDLED_SETTINGS_KEY)}setInstallDate(){const e=this.getValue(s.default.INSTALL_DATE);a.default.isFreshInstall&&!e&&this.setValue(s.default.INSTALL_DATE,Date.now())}getInstallDate(){const e=this.getValue(s.default.INSTALL_DATE);return f(e)||!1===c.isNumber(e)?null:new Date(e)}setInstallReferrer(e){this.getValue(s.default.INSTALL_REFERRER)||this.setValue(s.default.INSTALL_REFERRER,e)}setAccountRecoveryCompleted(e){this.setValue(s.default.RECOVERY.IS_ACCOUNT_RECOVERY_COMPLETED,e)}getAccountRecoveryCompleted(){var e;return null!==(e=this.getValue(s.default.RECOVERY.IS_ACCOUNT_RECOVERY_COMPLETED))&&void 0!==e&&e}getInstallReferrer(){return this.getValue(s.default.INSTALL_REFERRER)}setMaxRetryCountExceed(e){f(e)||this.setValue(h.MAX_RETRY_COUNT_EXCEED,e)}setAlarmActive(e){f(e)||this.setValue(h.ALARM_ACTIVE,e)}setUnlockVaultAttemptCount(e){f(e)||this.setValue(h.UNLOCK_VAULT_ATTEMPT_COUNT,e)}setTotalRetryOverallCount(e){f(e)||this.setValue(h.TOTAL_RETRY_OVERALL_COUNT,e)}getMaxRetryCountExceed(){var e;return null!==(e=this.getValue(h.MAX_RETRY_COUNT_EXCEED))&&void 0!==e&&e}getAlarmActive(){var e;return null!==(e=this.getValue(h.ALARM_ACTIVE))&&void 0!==e&&e}getUnlockVaultAttemptCount(){var e;return null!==(e=this.getValue(h.UNLOCK_VAULT_ATTEMPT_COUNT))&&void 0!==e?e:0}getTotalRetryOverallCount(){var e;return null!==(e=this.getValue(h.TOTAL_RETRY_OVERALL_COUNT))&&void 0!==e?e:0}getAlarmTimestamp(){var e;return null!==(e=this.getValue(h.ALARM_STAMP))&&void 0!==e?e:null}setAlarmTimestamp(e){f(e)||this.setValue(h.ALARM_STAMP,e)}};r.default=_},{"../../common/constants":13,"../../common/global":15,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445}],37:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/platformBridge/xidsafe")),a=n(e("common/constants")),u=n(e("core/background/session")),l=n(e("core/background/uiService")),c=e("locale"),d=e("message-adapter/background"),f=n(e("feature/partnerSupport/partnerParams")),p=n(e("common/constants/uiConstants")),h=n(e("common/secureSettingsContainer")),_=n(e("./extension/extensionInfo")),E=n(e("./telemetry/telemetryWrapper")),g=n(e("./store/vaultActionsStore")),m=n(e("./dashboardUIController")),y=n(e("configuration")),S=e("telemetry/types/vaultUnlockAndLockTelemetry.types"),T=e("common/global.types"),A=e("telemetry/types/userAccountTelemetry.types"),b=n(e("./store/telemetryInfoStore")),O=e("telemetry/types/lifecycleTelemetry.types"),I=n(e("feature/autoUnlock/autoUnlock")),v=n(e("./pwmSessionSettings"));function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{VAULT_UNLOCK:C}=a.default.SESSION_STORAGE_KEYS,{extensionAdapter:D,utils:{isNil:w,isntNil:L},logger:P}=i.default;const M=new class{constructor(){(0,o.default)(this,"isInitialized",!1)}initMessengerSubscription(){d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.FEEDBACK_CLICKED,((e,t,r)=>{this.openFeedback(),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.EULA_CLICKED,((e,t,r)=>{this.openSiteDirector(a.default.EULA_SSDCAT,a.default.EULA_DEST),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.HELP_CLICKED,((e,t,r)=>{this.openSiteDirector(a.default.HELP_SSDCAT),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.LOCK_VAULT_CLICKED,(async(e,t,r)=>{await this.closeVault(e),I.default.removeAutoUnlockKeys(),this.setUserManuallyLocksVault(!0),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.SIGN_OUT_CLICKED,(async(e,t,r)=>{await u.default.postSignout(e.touchPoint,A.SignOutType.Manual),g.default.resetVaultData(),i.default.extensionAdapter.setPopupHandler(""),u.default.removePasswordlessVaultUnlockFailNotificationsIfAny(),h.default.removeAll(a.default.settings.COMPROMISED_PASSWORD_SECURE_CONTAINER,(()=>{})),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.LEGAL_CLICKED,((e,t,r)=>{this.openSiteDirector(a.default.LEGAL_SSDCAT,a.default.LEGAL_DEST),t(!0)})),d.messenger.subscribe(d.MESSAGES.WAX_MESSAGES.EULA_CLICKED,((e,t,r)=>{this.openSiteDirector(a.default.LSA_SSDCAT,a.default.LSA_DEST),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.COMPROMISED_VAULT_PASSWORD_KB_CLICKED,((e,t,r)=>{this.openSiteDirector(a.default.SSDCAT_310,void 0,a.default.COMPROMISED_VAULT_PASSWORD_KB_URL),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.SETUP_PASSWORDLESS_VAULT_UNLOCK_KB_CLICKED,((e,t,r)=>{this.openSiteDirector(a.default.SSDCAT_310,void 0,a.default.PASSWORDLESS_VAULT_UNLOCK_KB_URL),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.OPEN_ADD_DEVICE_KB_LINK,((e,t)=>{this.openSiteDirector(a.default.SSDCAT_310,void 0,a.default.ADD_DEVICE_KB_URL),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.PRIVACY_CLICKED,((e,t,r)=>{this.openSiteDirector(a.default.PRIVACY_POLICY_SSDCAT,a.default.PRIVACY_DEST),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.PASSWORD_METER_LEARN_MORE_COMMON,((e,t,r)=>{this.openPasswordMeterKB(a.default.COMMON),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.PASSWORD_METER_LEARN_MORE_GUESSABLE,((e,t,r)=>{this.openPasswordMeterKB(a.default.GUESSABLE),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.OPEN_URL_CREATE_TAB,((e,t,r)=>{D.createTab(e),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.GO_TO_VAULT,((e,t,r)=>{var n;b.default.setTelemetryInfo({appName:T.AppName.DASHBOARD,contextScreen:O.AppOpenContextScreen.InfieldNotification,contextAction:O.AppOpenContextActionInfieldNotification.CompromisedPasswordFixNow,canSendAppOpenEvent:!0}),D.closeTab(null==r||null===(n=r.tab)||void 0===n?void 0:n.id),m.default.openDashboardUI(a.default.DASHBOARD_INDEX_URL),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.OPEN_CREATE_VAULT,((e,t,r)=>{D.updateTabUrl(D.getTabID(null==r?void 0:r.tab),D.getExtensionURL(p.default.NO_VAULT.CREATE_VAULT_URL)),t(!0)})),d.messenger.subscribe(d.MESSAGES.POPUP_MESSAGES.SEND_TELEMETRY_FROM_BG,((e,t,r)=>{i.default.telemetry.send(e),t(!0)})),d.messenger.subscribe(d.MESSAGES.DASHBOARD_MESSAGES.ENCRYPTION_INFO_LEARN_MORE_CLICKED,((e,t,r)=>{this.openSiteDirector(a.default.SSDCAT_310,void 0,a.default.ENCRYPTION_INFO_LEARN_MORE_URL),t(!0)}))}openFeedback(){const e=_.default.getVersion(),t=_.default.getClientID(),r=(0,c.getLocale)().split("_")[0].toUpperCase();D.getActiveTab((n=>{let o;w(n)?P.log("Tab is not available"):o=n.url;const s=[`version=${e}`,`MID=${t}`,`Q_Language=${r}`];if(L(o)){let e=o;const t=D.getExtensionURL("");e.startsWith(t)||(e=i.default.utils.urlWithoutQueryParameters(e,!0)),s.push(`url=${e}`)}y.default.isIntEnv&&s.push("UAT=Yes");const u=encodeURI(a.default.FEEDBACK_URL+s.join("&"));D.createTab(u)}))}openSiteDirector(e,t,r=a.default.SITE_DIRECTOR_URL){let n=r;const o=(0,c.getLocale)().split("_"),i=o[0];let u=o[1];w(u)&&"ja"===i&&(u="JP"),w(u)&&(u="US");const l=s.default.constants.ISO2_ISO3_COUNTRY[u.toUpperCase()],d=a.default.ISO2_ISO3_LANGUAGE[i.toUpperCase()];n=n.replace("ISO3_COUNTRY_CODE",l),n=n.replace("ISO3_LAN_CODE",d),n=n.replace("SSDCAT_VALUE",e),L(t)&&(n+=`&dest=${t}`);const p=f.default.getPartnerParamString();L(p)&&(n+=p),D.createTab(n)}openPasswordMeterKB(e){const t=e===a.default.COMMON?a.default.COMMONLY_USED_PASSWORD:a.default.GUESSABLE_PASSWORD,r=(0,c.getLocale)().split("_"),n=r[0];let o=r[1];w(o)&&"ja"===n&&(o="JP"),w(o)&&(o="US");const i=[`product=${a.default.NORTON_IDENTITY_SAFE_STRING}`,`version=${_.default.getVersion()}`,`language=${n}`,`country=${o}`];let s=encodeURI(t+i.join("&"));const u=f.default.getPartnerParamString();L(u)&&(s+=u),D.createTab(s)}async closeVault(e){E.default.sendCloseVaultStatus(E.default.actionType.CLOSE_VAULT_FLOW.CLOSE_VAULT,E.default.CLOSE_VAULT_LABELS.VAULT_CLOSE_BEGIN),await u.default.closeVault(!1,R(R({},e),{},{type:S.VaultLockType.Manual})),l.default.setBrowserActionIcon(!1)}setUserManuallyLocksVault(e){v.default.set(C.USER_MANUALLY_LOCKS_VAULT,e)}getUserManuallyLocksVault(){var e;return null!==(e=v.default.get(C.USER_MANUALLY_LOCKS_VAULT))&&void 0!==e&&e}async init(){try{return this.isInitialized||(this.initMessengerSubscription(),this.isInitialized=!0,P.info("mainUIActions :: Initialization is done successfully")),this.isInitialized}catch(e){const t=`ERROR :: Initialising mainUIAction Modules: ${e}`;throw P.error(t),new Error(t)}}};r.default=M},{"./dashboardUIController":29,"./extension/extensionInfo":32,"./pwmSessionSettings":43,"./store/telemetryInfoStore":50,"./store/vaultActionsStore":52,"./telemetry/telemetryWrapper":55,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"common/constants/uiConstants":9,"common/global.types":16,"common/platformBridge/xidsafe":22,"common/secureSettingsContainer":23,configuration:3,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core/background/session":46,"core/background/uiService":56,"feature/autoUnlock/autoUnlock":60,"feature/partnerSupport/partnerParams":96,locale:131,"message-adapter/background":134,"telemetry/types/lifecycleTelemetry.types":188,"telemetry/types/userAccountTelemetry.types":194,"telemetry/types/vaultUnlockAndLockTelemetry.types":195}],38:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const{settings:s,utils:a,logger:u}=i.default,{isNil:l}=a,c="78b4fb76-d63c-426b-9a85-3e68c7c66bc5";const d=new class{constructor(){(0,o.default)(this,"mixpanelSettingsContainer",null)}async initialize(){return new Promise((e=>{s.loadSettingsContainer(c,!0,((t,r)=>{if(!1===t||l(r))return u.error("failed to load MIXPANEL_STORAGE_CONTAINER"),void e(!1);this.mixpanelSettingsContainer=r,e(!0)}))}))}get(e){if(!l(this.mixpanelSettingsContainer))return this.mixpanelSettingsContainer.getObject(e);u.error("settings not initialized")}set(e,t){l(this.mixpanelSettingsContainer)?u.error("settings not initialized"):this.mixpanelSettingsContainer.setObject(e,t)}remove(e){l(this.mixpanelSettingsContainer)?u.error("settings not initialized"):this.mixpanelSettingsContainer.removeObject(e)}async reset(){const e=new Promise((e=>{s.resetSettingsCollection(c,e)}));await e}};r.default=d},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.promise.js":437}],39:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("common/constants"));const s=new class{constructor(){(0,o.default)(this,"STATUS_MESSAGE",{SUCCESS:"Successfully created account",ACCOUNT_EXISTS:"Account exists!",FAILURE:"Error Occurred while creating account.",INVALID_INPUT:"Unsupported input type for signUp",NA_CREATION_FAILURE:"Failed during auto creation flow",GET_NORTON_ACCOUNT_STATUS_FAILURE:"Failed to get norton account status for given credential"}),(0,o.default)(this,"NA_RESPONSE_CODE",{ACCOUNT_EXISTS:200,ACCOUNT_DOES_NOT_EXIST:204}),(0,o.default)(this,"SSO_URL",`${i.default.NSL_DOMAIN}/sso/api/account/`),(0,o.default)(this,"MILLI_SEC_PER_DAY",864e5),(0,o.default)(this,"TOKEN_REFRESH_DURATION_DAYS",15)}};Object.freeze(s);r.default=s},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"common/constants":13}],40:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("common/constants")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("feature/seamlessOnboarding/seamlessOnboardingKeys")),u=n(e("./naAccountConstants")),l=n(e("./signin")),c=n(e("./session")),d=n(e("./telemetry/telemetryWrapper")),f=n(e("./pwmSessionSettings"));const{utils:{isFunction:p,isNil:h,isString:_,getDomain:E,isntNil:g},logger:m}=i.default,{ruleProfileEvent:y,ruleProfile:S}=o.default,{NA_ACCOUNT_HANDLER:T}=o.default.SESSION_STORAGE_KEYS,A=Object.values(u.default.NA_RESPONSE_CODE),b=e=>_(e)&&e.length>0;const O=new class{getLastTokenRefreshTime(){var e;return null!==(e=f.default.get(T.LAST_TOKEN_REFRESH_TIME))&&void 0!==e?e:null}setLastTokenRefreshTime(e){f.default.set(T.LAST_TOKEN_REFRESH_TIME,e)}getNAStatusMap(){var e;return null!==(e=f.default.get(T.NA_STATUS_MAP))&&void 0!==e?e:new Map}setNAStatusMap(e,t){const r=this.getNAStatusMap();r.set(e,t),f.default.set(T.NA_STATUS_MAP,r)}clearCachedNAStatusMap(){f.default.set(T.NA_STATUS_MAP,new Map)}_getFailureResultObject(e=u.default.STATUS_MESSAGE.FAILURE){return{statusCode:!1,message:e}}_startAutoCreateNA(e,t=!1){return new Promise((async function(e,t){await l.default.openCCTPage({skipVaultFlow:!0}),i.default.utils.createNewGuid(),o.default.NSL_DOMAIN;this._registerOnAutoCreateFinishedListener((r=>{if(h(r))return t();const n=r.detail;try{return"success"===(n&&n.status)?e(n.credentials.password):t()}catch(e){m.log(`OnAutoCreateFinishedListener: ${e}`),t()}}))})).catch((e=>{m.error(`OnAutoCreateFinishedListener: ${e}`)}))}_registerOnAutoCreateFinishedListener(e){if(!p(e))throw new Error("TypeError: finishedCallbackFunction has to be of type Function");window.addEventListener(y[S.AUTO_CREATE].FINISHED,e,{once:!0})}isLoggedIn(){return new Promise((e=>{s.default.session.isLoggedIn(((t,r)=>{g(r)&&m.error(r),e(t)}))}))}async refreshToken(e=null){if(h(this.getLastTokenRefreshTime())||Date.now()-this.getLastTokenRefreshTime()>u.default.TOKEN_REFRESH_DURATION_DAYS*u.default.MILLI_SEC_PER_DAY){!0===await c.default.refreshToken(e)&&this.setLastTokenRefreshTime(Date.now())}}async signUp(e,t=!1){if(!b(e))return this._getFailureResultObject(u.default.STATUS_MESSAGE.INVALID_INPUT);try{const t=await this._getNortonAccountStatusCode(e);if(t===u.default.NA_RESPONSE_CODE.ACCOUNT_EXISTS)return this._getFailureResultObject(u.default.STATUS_MESSAGE.ACCOUNT_EXISTS);if(t!==u.default.NA_RESPONSE_CODE.ACCOUNT_DOES_NOT_EXIST)return this._getFailureResultObject(u.default.STATUS_MESSAGE.GET_NORTON_ACCOUNT_STATUS_FAILURE)}catch(e){return m.log(e),this._getFailureResultObject(u.default.STATUS_MESSAGE.GET_NORTON_ACCOUNT_STATUS_FAILURE)}try{const r=await this._startAutoCreateNA(e,t);return h(r)?this._getFailureResultObject(u.default.STATUS_MESSAGE.FAILURE):(this.setNAStatusMap(e,u.default.NA_RESPONSE_CODE.ACCOUNT_EXISTS),{statusCode:!0,message:u.default.STATUS_MESSAGE.SUCCESS,credentials:{username:e,password:r,loginURL:o.default.NSL_DOMAIN,siteName:E(o.default.NSL_DOMAIN)}})}catch(e){return m.log(e),this._getFailureResultObject(u.default.STATUS_MESSAGE.NA_CREATION_FAILURE)}}async _getNortonAccountStatusCode(e){if(this.getNAStatusMap().has(e))return this.getNAStatusMap().get(e);const t=u.default.SSO_URL+e,r=(await fetch(t,{method:"head"})).status;return this.setNAStatusMap(e,r),A.includes(r)||(!0===a.default.getIsSeamlessOnboardingFlow()?d.default.sendSeamlessOnboardTelemetry(d.default.actionType.SEAMLESS_ONBOARDING.SOAUTONACREATION,d.default.SEAMLESS_ONBOARDING_CONSTANTS.SOAUTONACREATIONFAILED,r):d.default.sendAutoNACreateFailureMOTFlow(r)),r}async doesNortonAccountExist(e){if(!b(e))throw Error("username has to be valid string");return await this._getNortonAccountStatusCode(e)===u.default.NA_RESPONSE_CODE.ACCOUNT_EXISTS}async canAutoCreateNortonAccount(e){if(!b(e))throw Error("username has to be valid string");if("ja"===navigator.language.slice(0,2))return!1;return await this._getNortonAccountStatusCode(e)===u.default.NA_RESPONSE_CODE.ACCOUNT_DOES_NOT_EXIST}};r.default=O},{"./naAccountConstants":39,"./pwmSessionSettings":43,"./session":46,"./signin":47,"./telemetry/telemetryWrapper":55,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"common/constants":13,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"feature/seamlessOnboarding/seamlessOnboardingKeys":107}],41:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js"));const{settings:s,logger:a}=o.default,{utils:{isNil:u,isntNil:l}}=o.default,{session:c}=i.default;r.default=class{constructor(e){s.loadSettingsContainer(e,!0,((t,r,n)=>{if(!1===t||u(r))return a.error("failed to load "+e),void(this.settingsContainer=null);this.settingsContainer=r}))}resetContainer(e){if(!u(this.settingsContainer))try{s.resetSettingsCollection(e,(function(t,r){t||a.error(`Couldn't reset ${e} container. Error : ${r}`)}))}catch(e){a.error("Couldn't reset container. Error : "+e)}}setValue(e,t){u(this.settingsContainer)?a.error("settings not initialized"):this.settingsContainer.setObject(e,t)}getValue(e){if(!u(this.settingsContainer))return this.settingsContainer.getObject(e);a.error("settings not initialized")}removeValue(e){u(this.settingsContainer)?a.error("settings not initialized"):this.settingsContainer.removeObject(e)}setNAGuidSettings(e){let t=c.getNAGUID();l(t)&&l(e)&&this.setValue(t,e)}getNAGuidSettings(){let e=c.getNAGUID();if(l(e)){const t=this.getValue(e);if(l(t))return t}return this.defaultSettingsStructure()}defaultSettingsStructure(){return{}}removeNAGuidSettings(){let e=c.getNAGUID();l(e)&&this.removeValue(e)}}},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n=new class{getInfoIcon(){return"../images/ic-logo-info.png"}getErrorIcon(){return"../images/ic-logo-error.png"}getGoodIcon(){return"../images/ic-logo-good.png"}getAlertIcon(){return"../images/ic-logo-alert.png"}getWhiteAlertIcon(){return"../images/modal-white-warning-icon.png"}getCloseWhiteIcon(){return"../images/ic-close-white.png"}getUnsureIcon(){return"../images/ic-logo-unsure.png"}};r.default=n},{}],43:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const{sessionSettings:s,utils:a,logger:u}=i.default,{isNil:l}=a;const c=new class{constructor(){(0,o.default)(this,"settingsContainer",null)}initialize(e){if(!a.isFunction(e))throw new Error("callback must be a function");s.loadSettingsContainer("SessionSettingsContainer",!0,((t,r,n)=>{if(!1===t||l(r))return u.error("failed to load SessionSettingsContainer"),void e(!1);this.settingsContainer=r,e(!0)}))}get(e){if(!l(this.settingsContainer))return this.settingsContainer.getObject(e);u.error("settings not initialized")}set(e,t){l(this.settingsContainer)?u.error("settings not initialized"):this.settingsContainer.setObject(e,t)}};r.default=c},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211}],44:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js"));const{settings:a,sessionSettings:u,utils:l,logger:c}=i.default,{isNil:d,isntNil:f}=l,p=s.default.proto.com.symantec.oxygen.datastore.v2.messages,{NodeList:h}=p,_="03a7d544-a6a5-428f-8fd6-40fd8b880937",E="2d59885c-d953-4787-bb56-45a6b4d969fb";const g=new class{constructor(){(0,o.default)(this,"persistentSettingsContainer",null),(0,o.default)(this,"sessionSettingsContainer",null)}async initialize(){const e=new Promise((e=>{a.loadSettingsContainer(_,!0,((t,r)=>{if(!1===t||d(r))return c.error("failed to load PWM Persistent Settings"),void e(!1);this.persistentSettingsContainer=r,e(!0)}))})),t=new Promise((e=>{u.loadSettingsContainer(E,!0,((t,r)=>{if(!1===t||d(r))return c.error("failed to load PWM Vault Session Settings"),void e(!1);this.sessionSettingsContainer=r,e(!0)}))}));return(await Promise.all([e,t])).every((e=>e))}get(e){if(d(this.persistentSettingsContainer)||d(this.sessionSettingsContainer))return c.error("settings not initialized"),null;let t=this.sessionSettingsContainer.getObject(e);if(f(t))return t;if(t=this.persistentSettingsContainer.getObject(e),d(t))return t;return h.decode64(t).toArrayBuffer()}set(e,t){d(this.persistentSettingsContainer)||d(this.sessionSettingsContainer)?c.error("settings not initialized"):this.sessionSettingsContainer.setObject(e,t,(r=>{if(!r){this.sessionSettingsContainer.setObject(e,null);const r=h.decode(t);this.persistentSettingsContainer.setObject(e,r.encode64())}}))}async reset(){const e=new Promise((e=>{a.resetSettingsCollection(_,e)})),t=new Promise((e=>{u.resetSettingsCollection(E,e)}));await Promise.all([e,t])}};r.default=g},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453}],45:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty"));e("exportGlobals");var i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("common/constants")),u=e("locale"),l=n(e("./session")),c=n(e("./notificationIcon")),d=e("telemetry/types/vaultUnlockAndLockTelemetry.types"),f=e("telemetry/types"),p=e("telemetry/types/userAccountTelemetry.types");const{isNil:h,isntNil:_,isSuccessCode:E}=i.default.utils,{notificationCenter:g,constants:{httpStatusCodes:m}}=i.default,{sso:y}=s.default,S="You've been signed out. Sign in again to continue.",T="Sorry, something went wrong. Please try again.",A="Your new login has been successfully saved.",b="Your login has been successfully updated.",O="Please unlock your vault and try again.",I="Vault locked for safety. Simply unlock to continue.",v="Vault is synced and ready!",N="Sorry, something went wrong. Please try again.",R="Too many failed unlock attempts. Try again later.",C=(0,u.getIntlData)();const D=new class{constructor(){(0,o.default)(this,"defaultStrings",{DEFAULT_SESSION_EXPIRY_STRING:S,DEFAULT_MANUAL_SIGN_OUT_STRING:"You've signed out!",DEFAULT_ERROR_STRING:T,DEFAULT_LOGIN_ADD_STRING:A,DEFAULT_LOGIN_UPDATE_STRING:b,DEFAULT_VAULT_UNLOCK_STRING:O,DEFAULT_VAULT_LOCKED_STRING:I,DEFAULT_VAULT_SYNC_STRING:v,DEFAULT_GENERIC_ERROR_STRING:N,DEFAULT_VAULT_UNLOCK_ATTEMPTS_EXCEEDED_STRING:R,DEFAULT_VAULT_PASSWORD_CHANGED_STRING:"You've changed your vault password. Unlock your vault again."}),(0,o.default)(this,"context",{LOGIN_ADD:"Login_Add",LOGIN_UPDATE:"Login_Update",MERGE:"Merge"}),(0,o.default)(this,"reportHttpStatusCode",((e,t,r)=>{if(h(e))throw new Error("Http code cannot be null");let n="";if(E(e)){switch(t){case this.context.LOGIN_ADD:n=A;break;case this.context.LOGIN_UPDATE:n=b;break;case this.context.MERGE:n=v}this.addNotification(c.default.getGoodIcon(),n,r)}else e!==i.default.constants.httpStatusCodes.UNAUTHORIZED&&e!==i.default.constants.httpStatusCodes.BAD_REQUEST?this.addNotification(c.default.getErrorIcon(),n,C.formatMessage({id:"notification.session.expiry.error",defaultMessage:n})):this.logoutCheckBasedOnSSOToken()})),(0,o.default)(this,"reportVaultState",(e=>{if(h(e))throw new Error("Vault State cannot be null");let t="",r="",n="";switch(e){case a.default.VAULT_STATE.SSO_UNAUTHORIZED:r=S,t="notification.session.expiry.error",n=c.default.getAlertIcon();break;case a.default.VAULT_STATE.CLIENT_UNAUTHORIZED:r=O,t="notification.vault.unlock.error",n=c.default.getAlertIcon(),l.default.closeVault(!1,{context:f.LockContext.ExpiredSSOToken,type:d.VaultLockType.Error,cause:d.ErrorCausingVaultLock.ExpiredSSOToken,error:m.UNAUTHORIZED.toString()});break;case a.default.VAULT_STATE.VAULT_LOCKED:r=I,t="notification.vault.sync.locked",n=c.default.getAlertIcon();break;case a.default.VAULT_STATE.VAULT_SYNCED:r=v,t="notification.vault.sync.success",n=c.default.getGoodIcon();break;case a.default.VAULT_STATE.NETWORK_ERROR:case a.default.VAULT_STATE.O2_RATE_LIMITED_ERROR:default:r=T,t="notification.vault.sync.error",n=c.default.getErrorIcon()}this.addNotification(n,r,C.formatMessage({id:t,defaultMessage:r}))})),(0,o.default)(this,"logoutCheckBasedOnSSOToken",(()=>new Promise((e=>{y.getTokensFromRefreshToken((t=>{E(t)?(l.default.closeVault(!1,{type:d.VaultLockType.Error,cause:d.ErrorCausingVaultLock.ExpiredSSOToken,error:m.BAD_REQUEST.toString()}),this.reportVaultState(a.default.VAULT_STATE.VAULT_LOCKED)):l.default.logoutNA((()=>{i.default.extensionAdapter.setPopupHandler(""),this.reportVaultState(a.default.VAULT_STATE.SSO_UNAUTHORIZED)}),!1,{type:p.SignOutType.Error,cause:p.ErrorCausingSignOut.ExpiredSSOToken,error:m.BAD_REQUEST.toString()}),e(null)}))})))),(0,o.default)(this,"notificationTitle",(()=>[C.formatMessage({id:"norton"}),C.formatMessage({id:"shortProductName"})].join(" "))),(0,o.default)(this,"addNotification",((e,t,r)=>{let n=null;if(h(e))throw new Error("Notification image cannot be null");if(h(t)&&h(r))throw new Error("No default string or localized string provided");const o=this.notificationTitle();do{if(_(r)){n=new i.default.TimedNotification(r,e,o);break}}while(0);g.addNotification(n)})),(0,o.default)(this,"showGenericErrorNotification",(()=>{const e=C.formatMessage({id:"notification.vault.sync.error",defaultMessage:T});this.addNotification(c.default.getErrorIcon(),N,e)})),(0,o.default)(this,"showLoginAttemptsExceededNotification",(()=>{const e=C.formatMessage({id:"notification.vault.unlock.attemps.exceeded.error",defaultMessage:R});this.addNotification(c.default.getErrorIcon(),R,e)}))}};r.default=D},{"./notificationIcon":42,"./session":46,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"common/constants":13,"core-js/modules/es.promise.js":437,exportGlobals:59,locale:131,"telemetry/types":186,"telemetry/types/userAccountTelemetry.types":194,"telemetry/types/vaultUnlockAndLockTelemetry.types":195}],46:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("common/constants/uiConstants")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=Q(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),l=n(e("urijs")),c=e("locale"),d=e("message-adapter/messageID"),f=n(e("feature/compromised-password/compromisedPasswordHelper")),p=n(e("feature/compromised-password/motFlowManager")),h=n(e("feature/unlockManager/vaultUnlockManager")),_=n(e("feature/unlockManager/vuSettings")),E=e("telemetry/constants/telemetryActions"),g=n(e("telemetry/background")),m=n(e("feature/wax/waxStorageSettings")),y=n(e("common/secureSettingsContainer")),S=n(e("feature/wax/waxConstants")),T=e("./../../../redux-core/action-types/loginActionTypes"),A=e("./../../../redux-core/features/userInfo/userInfoSlice"),b=n(e("feature/compromised-password/loginInfoManager")),O=n(e("feature/security-dashboard/securityDashboardNotificationHandler")),I=n(e("feature/wax/fillCaptureHandler")),v=e("feature/compromised-password/motOnboardingControllerClass"),N=n(e("../../common/constants")),R=n(e("./globalSettings")),C=n(e("./telemetry/telemetryWrapper")),D=n(e("./extension/extensionSettings")),w=n(e("./uiService")),L=n(e("./cctWorker")),P=n(e("./telemetry/heartBeatWrapper")),M=n(e("../../feature/seamlessOnboarding/seamlessOnboardingKeys")),U=n(e("./notificationIcon")),j=n(e("./store/vaultActionsStore")),k=n(e("./store/userInfoStore")),x=n(e("./reporter")),F=n(e("./firebaseServiceWorker")),B=n(e("./pwmVaultPersistenceSettings")),G=e("./store/pwmStore"),V=n(e("./signin")),H=n(e("./vaultItemCountHelper")),W=e("telemetry/types/vaultUnlockAndLockTelemetry.types"),Y=e("telemetry/types"),K=e("telemetry/types/userAccountTelemetry.types"),z=e("common/global.types"),q=n(e("./store/telemetryInfoStore")),$=e("telemetry/types/lifecycleTelemetry.types"),X=n(e("./pwmSessionSettings")),J=n(e("feature/autoUnlock/autoUnlock")),Z=n(e("./mainUIActions"));function Q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Q=function(e){return e?r:t})(e)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{spocManager:re}=s.default,{constants:{httpStatusCodes:ne},extensionAdapter:oe}=i.default,{FILL_CAPTURE_HANDLER:ie}=N.default.SESSION_STORAGE_KEYS,se=(0,c.getIntlData)(),ae=s.default.session,{cookieManager:ue}=s.default,{vaultManager:le,recoveryManager:ce,vaultKeys:de,appNode:fe,idscNode:pe,recoveryNode:he,recoveryIdscNode:_e}=u,{isNil:Ee}=i.default.utils,{isntNil:ge}=i.default.utils,{isFunction:me}=i.default.utils,{isString:ye}=i.default.utils,{logger:Se}=i.default,Te=a.default.MESSAGES,{oxygen:Ae}=s.default,be=s.default.sso,{CUSTOM_DIMENSION4:Oe}=i.default.telemetryConstants.parameters,{isSuccessCode:Ie}=i.default.utils;let ve=0;const Ne=N.default.RETRY_CONSTANTS,{VAULT_UNLOCK:Re}=N.default.SESSION_STORAGE_KEYS;const Ce=new class{constructor(){(0,o.default)(this,"migrateSettings",(e=>{if(!1===R.default.getMigrateIDSSettings()){const t=ae.getNAGUID();D.default.initialize(t+e,((e,t)=>{if(e){const e=D.default.getSettings(),t=de.getEncryptionKey();D.default.initialize(s.default.utils.createStringBufferFromUint8Buffer(t),((t,r)=>{t?(D.default.setSettings(e),R.default.setMigrateIDSSettings(!0),Se.info("Settings migrated successfully.")):Se.error(`Could not load extension settings ${r.toString()}`)}))}else Se.error(`Could not load extension settings ${t.toString()}`)}))}else{const e=de.getEncryptionKey();D.default.initialize(s.default.utils.createStringBufferFromUint8Buffer(e),((e,t)=>{e||Se.error(`Could not load extension settings ${t.toString()}`)}))}})),(0,o.default)(this,"handleSpocFailure",(()=>{x.default.reportHttpStatusCode(i.default.constants.httpStatusCodes.UNAUTHORIZED)})),(0,o.default)(this,"createVault",(async(e,t)=>(h.default.setVaultSdkSalt(),le.createVault(e,t)))),(0,o.default)(this,"createRecovery",(async e=>u.recoveryManager.createRecovery(e,"web"))),(0,o.default)(this,"openRecovery",(e=>u.recoveryManager.openRecovery(e))),(0,o.default)(this,"closeRecovery",(async()=>{await u.recoveryManager.closeRecovery(),s.default.cookieManager.remove(`${i.default.utils.baseURL(s.default.authSCD.DS_URL)}/33`)})),(0,o.default)(this,"initVaultSDKListeners",(()=>{le.onUpdated.addListener(this.populateStoreWithVault),le.onClosed.addListener(this.handleVaultPasswordChange),le.onDeleted.addListener(this.handleVaultDelete),le.onUpdateFailed.addListener(this.handleSpocFailure),ce.onUpdated.addListener(this.getAndPopulateStoreWithRecoveryInfo),ce.onClosed.addListener(this.fetchAndPopulateStoreWithRecoveryInfo),ce.onDeleted.addListener(this.fetchAndPopulateStoreWithRecoveryInfo),ce.onUpdateFailed.addListener(this.fetchAndPopulateStoreWithRecoveryInfo)})),(0,o.default)(this,"changeVaultPassword",(async(e,t,r)=>{h.default.setVaultSdkSalt();const n=await le.changeVaultPassword(e,t,r);return n.state===le.state.VAULT_PASSWORD_CHANGED&&(h.default.getDeviceInfo().deviceId&&_.default.removeNAGuidSettings(),await this.deleteRecovery()),n})),(0,o.default)(this,"resetVaultPassword",(async(...e)=>{h.default.setVaultSdkSalt();return await le.resetVaultPassword(...e)})),(0,o.default)(this,"handleUnlockVaultSuccess",(e=>{this.resetRetryParameters(),this.initVaultSDKListeners(),H.default.initItemsCountListener(),this.removePasswordlessVaultUnlockFailNotificationsIfAny(),this.populateStoreWithVault(),this.fetchAndPopulateStoreWithRecoveryInfo(),this.addDefaultLogin(),i.default.extensionAdapter.isManifestV3Extension()&&h.default.setTimeoutFallback(!1),!0===Z.default.getUserManuallyLocksVault()&&!0===_.default.getAutoUnlockSettings().enabled&&(_.default.setAutoUnlockSettings({enabled:!0,days:N.default.AUTO_UNLOCK_DAYS.SEVEN}),Z.default.setUserManuallyLocksVault(!1)),setTimeout((()=>{I.default.handleLoginCaptureAfterCreateORUnlockFlow()}),1e3),O.default.displaySafetyDashboardPopup(),f.default.isCompromisedPasswordFlowInProgress()&&p.default.handleUnlockVaultSuccess().then((()=>{p.default.resetCompromisedPasswordFlowState()})),this.migrateSettings(e),m.default.initialize(N.default.settings.WAX_SECURE_CONTAINER,s.default.utils.createStringBufferFromUint8Buffer(u.vaultKeys.getEncryptionKey()),S.default.SETTINGS_NOTIFICATION_KEY),w.default.setBrowserActionIcon(!0),oe.getAllTabs((e=>{e.forEach((e=>{const t=oe.getTabID(e);oe.sendMessageToTab(e,{id:d.MESSAGES.WAX_MESSAGES.VAULT_LOGGEDIN,payload:{tabId:t}})}))}))})),(0,o.default)(this,"populateStoreWithVault",(()=>{j.default.loadVaultData(),H.default.sendVaultSyncEventTelemetry();const e=[se.formatMessage({id:"norton"}),se.formatMessage({id:"shortProductName"})].join(" "),t=se.formatMessage({id:"notification.vault.sync.success",defaultMessage:x.default.defaultStrings.DEFAULT_VAULT_SYNC_STRING}),r=new i.default.TimedNotification(t,U.default.getGoodIcon(),e);setTimeout((()=>{i.default.notificationCenter.addNotification(r)}),2e3)})),(0,o.default)(this,"deleteVault",(()=>le.deleteVault())),(0,o.default)(this,"deleteRecovery",(async()=>{const e=await ce.deleteRecovery();return he.reset(),_e.reset(),await this.fetchAndPopulateStoreWithRecoveryInfo(),e})),(0,o.default)(this,"getVaultState",(async()=>(await le.fetchVaultInfo()).getVaultState())),(0,o.default)(this,"fetchAndPopulateStoreWithRecoveryInfo",(async()=>{const e=await ce.fetchRecoveryInfo();return this.populateStoreWithRecoveryInfo(e),e})),(0,o.default)(this,"getAndPopulateStoreWithRecoveryInfo",(()=>{const e=ce.getRecoveryInfo();return this.populateStoreWithRecoveryInfo(e),e})),(0,o.default)(this,"_postNALogout",((e,t,r,n,o)=>{let s=null,a=null;if(e){R.default.getOnboardingStep()!==N.default.ONBOARDING.STEPS.ONBOARDED&&R.default.setOnboardingStep(""),fe.reset(),he.reset(),L.default.setSignInFlowInProgress(!1),v.motOnboardingController.resetObfuscationKey(),M.default.resetValues(),J.default.removeAutoLockSettings(),s=U.default.getGoodIcon(),a=se.formatMessage({id:"notification.vault.logout.success",defaultMessage:x.default.defaultStrings.DEFAULT_MANUAL_SIGN_OUT_STRING}),k.default.setUserInfo(),I.default.clearLoginInfo(ie.SSO_LOGIN_INFO),g.default.track(E.TELEMETRY_ACTIONS.USER_ACCOUNT.SIGN_OUT,o)}else i.default.extensionAdapter.setPopupHandler(""),s=U.default.getErrorIcon(),a=se.formatMessage({id:"notification.vault.sync.error",defaultMessage:x.default.defaultStrings.DEFAULT_SESSION_EXPIRY_STRING});if(!0===r){const e=`${se.formatMessage({id:"norton",defaultMessage:"Norton"})} ${se.formatMessage({id:"shortProductName",defaultMessage:"Password Manager"})}`,t=new i.default.TimedNotification(a,s,e);i.default.notificationCenter.addNotification(t)}me(n)&&n(e,t),i.default.notificationCenter.clearNotification(),ge(I.default.getNotificationIDCompromisedLoginMap())&&!f.default.isCompromisedPasswordFlowInProgress()&&p.default.resetCompromisedPasswordFlowState()})),(0,o.default)(this,"refreshToken",(async(e=null)=>new Promise((t=>{s.default.sso.getTokensFromRefreshToken((r=>{Ie(r)||Ce.logoutNA(e,!0,{type:K.SignOutType.Error,cause:K.ErrorCausingSignOut.ExpiredSSOToken,error:ne.BAD_REQUEST.toString()}),t(!0)}))})))),(0,o.default)(this,"logoutNA",(async(e,t,r={type:K.SignOutType.Manual})=>{Ee(t)&&(t=!0),this.resetRetryParameters(),i.default.utils.createCustomHTMLEvent(N.default.EVENTS.SIGN_OUT),await this.closeVault(!1,{context:Y.LockContext.SignOut,type:W.VaultLockType.Manual}),ae.logout(((n,o)=>{"Safari"===i.default.globals.BROWSER?i.default.extensionAdapter.createTab(s.default.authSCD.SSO_LOGOUT_URL,(s=>{s.addEventListener("navigate",(()=>{const a=i.default.extensionAdapter.getTabID(s);i.default.extensionAdapter.closeTabAndEnsureBrowserIsAlive(a),Ce._postNALogout(n,o,t,e,r)}))})):Ce._postNALogout(n,o,t,e,r)}))})),(0,o.default)(this,"unsubscribeFCM",(async()=>{if(oe.isManifestV3Extension()){const e=ae.getUserID();Ee(e)&&Se.error("unsubscribeFCM :: entityID is nil"),await F.default.initialize();const t=F.default.firebaseToken,r=e.toString(),n=2,o=0,i=await re.disableNotification(r,n,t,N.default.PASSWORDMANAGER_APPID,N.default.NORTON_TENANT_ID,o);ge(i)&&Se.error(`fcm register Token failed with error ${i.toString()}`),await F.default.unsubscribe()}})),(0,o.default)(this,"removeVaultSDKListeners",(()=>{le.onUpdated.removeListener(this.populateStoreWithVault),le.onClosed.removeListener(this.handleVaultPasswordChange),le.onDeleted.removeListener(this.handleVaultDelete),le.onUpdateFailed.removeListener(this.handleSpocFailure),ce.onUpdated.removeListener(this.getAndPopulateStoreWithRecoveryInfo),ce.onClosed.removeListener(this.fetchAndPopulateStoreWithRecoveryInfo),ce.onDeleted.removeListener(this.fetchAndPopulateStoreWithRecoveryInfo),ce.onUpdateFailed.removeListener(this.fetchAndPopulateStoreWithRecoveryInfo)})),(0,o.default)(this,"loginWithRefreshToken",((e,t)=>{if(!ye(e))return Se.error("Refresh token should be string"),void t(!1);ae.setLLT(e);const r=e=>{Ie(e)?t(!0):(ae.logout((()=>{})),Se.error("SSO response status is not success"),t(!1))};be.getTokensFromRefreshToken(((e,n)=>{Ie(e)?Ae.getUserID(r,n):(ae.logout((()=>{})),Se.error("Oxygen response status is not success"),t(!1))}))})),(0,o.default)(this,"handleVaultDelete",(()=>{R.default.setIsVaultDeleted(!0),this.handleVaultDeleteOrPasswordChange(!1)})),(0,o.default)(this,"handleVaultPasswordChange",(()=>{this.handleVaultDeleteOrPasswordChange(!0);const e=se.formatMessage({id:"vault.passwordchange.alert",defaultMessage:x.default.defaultStrings.DEFAULT_VAULT_PASSWORD_CHANGED_STRING}),t=`${se.formatMessage({id:"norton",defaultMessage:"Norton"})} ${se.formatMessage({id:"shortProductName",defaultMessage:"Password Manager"})}`,r=new i.default.TimedNotification(e,U.default.getAlertIcon(),t);i.default.notificationCenter.addNotification(r)})),(0,o.default)(this,"handleVaultDeleteOrPasswordChange",(e=>{this.closeVault(!1,{context:Y.LockContext.SPOCTriggered,type:e?W.VaultLockType.ChangeVaultPassword:W.VaultLockType.DeleteVault,touchPoint:z.TouchPoint.VAULT_UI}),D.default.removeAll((()=>{})),y.default.removeAll(N.default.settings.WAX_SECURE_CONTAINER,(()=>{})),J.default.removeAutoUnlockKeys(),i.default.utils.isntNil(_.default.getRegisteredDevice())&&_.default.removeNAGuidSettings()})),(0,o.default)(this,"checkAndSendPasswordlessVaultUnlockNotificationOnStartup",(async()=>{oe.removeTabUpdatedEventListener(this.checkAndSendPasswordlessVaultUnlockNotificationOnStartup),this.setIsBrowserRestart(!1);if(!0!==_.default.getAutoUnlockSettings().enabled)if(_.default.isAutoPasswordlessVaultUnlockRequestEnabled()){if(u.vaultKeys.isLocked()&&ge(_.default.getRegisteredDevice())){h.default.setAutomaticPasswordlessVaultUnlockRequest(!0);(await this.getVaultState()).state===u.vaultManager.state.VAULT_FOUND&&(h.default.showPasswordlessVaultUnlockNotification(N.default.VAULT_UNLOCK.RESPONSE_STATUS.UNLOCK_REQUEST_SENT),q.default.setTelemetryInfo({appName:z.AppName.ONBOARD_SETUP,contextScreen:$.AppOpenContextScreen.RestartUnlock,canSendAppOpenEvent:!1}),h.default.unlockVaultWithMobile(h.default.unlockVaultNotificationCallback,{context:Y.UnlockContext.RestartUnlock,touchPoint:z.TouchPoint.RESTART_UNLOCK}))}}else Se.info("Auto Unlock Request not sent to mobile since it is disabled")}))}migrateExtensionSettingsAfterServiceWorkerRestart(){return new Promise(((e,t)=>{const r=de.getEncryptionKey();D.default.initialize(s.default.utils.createStringBufferFromUint8Buffer(r),((r,n)=>{r?e("Extension Settings initialized"):t(new Error(`Failed to initialize Extension Settings ${n.toString()}`))}))}))}resetPasswordRetryCount(){ve=0}registerForDatastoreUpdates(){const e=F.default.firebaseToken,t=ae.getUserID(),r=t.toString();Ee(t)&&Se.error("registerForDatastoreUpdates :: entityID is nil"),re.registerToken(r,2,e,N.default.PASSWORDMANAGER_APPID,N.default.NORTON_TENANT_ID,0)}async openVault(e){if(!ye(e))throw new Error("Either a password or passwordlessVaultUnlockFlow/seamlessOnboarding flag should be set");this.checkAndResetIfAlarmStale();const t=R.default.getMaxRetryCountExceed(),r=R.default.getAlarmActive(),n=R.default.getUnlockVaultAttemptCount(),o=R.default.getTotalRetryOverallCount();if(r)return{status:!1,state:{state:N.default.VAULT_STATE.CLIENT_UNAUTHORIZED},maxRetryCountExceed:t,unlockVaultAttemptCount:n,maxRetryOverallCount:o};h.default.setVaultSdkSalt();const{state:s}=await le.openVault(e);if(s.state===N.default.VAULT_STATE.VAULT_SYNCED)return i.default.extensionAdapter.isManifestV3Extension()&&(await F.default.initialize(),this.registerForDatastoreUpdates()),f.default.isCompromisedPasswordFlowInProgress()&&C.default.sendVaultOpenFromCP({key:Oe,value:"motv2"}),this.handleUnlockVaultSuccess(e),{status:!0,state:s};if(s.state===N.default.VAULT_STATE.CLIENT_UNAUTHORIZED&&!r){const e=n+1,t=o+1;R.default.setUnlockVaultAttemptCount(e),R.default.setTotalRetryOverallCount(t);const r=e>=Ne.MAX_RETRY_COUNT,s=t<Ne.MAX_RETRY_OVERALL_COUNT;r&&s&&(R.default.setUnlockVaultAttemptCount(0),R.default.setMaxRetryCountExceed(!0),R.default.setAlarmActive(!0),R.default.setAlarmTimestamp(Date.now()+Ne.MAX_RETRY_TIME_IN_MILLISECONDS),await i.default.alarmHelper.setAndRegisterAlarmListener(Ne.MAX_RETRY,{delayInMinutes:Ne.MAX_RETRY_TIME},this.handleVaultUnlockAlarm.bind(this)),g.default.track(E.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED,{touchPoint:z.TouchPoint.VAULT_UI,method:W.VaultUnlockMethod.MaxRetryLimit,cause:W.VaultUnlockFailureCause.VaultUnlockMaxAttempt,error:W.ErrorCausingVaultLock.VaultUnlockMaxAttempt})),t>=Ne.MAX_RETRY_OVERALL_COUNT&&await this.postSignout(z.TouchPoint.VAULT_UI,K.SignOutType.ExceededAttempt)}return{status:!1,state:s,maxRetryCountExceed:R.default.getMaxRetryCountExceed()||!1,unlockVaultAttemptCount:R.default.getUnlockVaultAttemptCount()||0,maxRetryOverallCount:R.default.getTotalRetryOverallCount()||0}}resetRetryParameters(){try{R.default.setMaxRetryCountExceed(!1),R.default.setAlarmActive(!1),R.default.setUnlockVaultAttemptCount(0),R.default.setTotalRetryOverallCount(0),i.default.alarmHelper.clearAlarm(Ne.MAX_RETRY),R.default.setAlarmTimestamp(0)}catch(e){Se.error("An error occurred while resetting retry parameters : ",e)}}async checkAndResetIfAlarmStale(){const e=R.default.getAlarmTimestamp(),t=Date.now();e&&t>e&&this.handleVaultUnlockAlarm({name:Ne.MAX_RETRY})}handleVaultUnlockAlarm(e){e.name===Ne.MAX_RETRY&&(R.default.setMaxRetryCountExceed(!1),R.default.setAlarmActive(!1))}async postSignout(e,t){await this.logoutNA(void 0,void 0,{touchPoint:e,type:t}),j.default.resetVaultData(),i.default.extensionAdapter.setPopupHandler(""),this.removePasswordlessVaultUnlockFailNotificationsIfAny(),y.default.removeAll(N.default.settings.COMPROMISED_PASSWORD_SECURE_CONTAINER,(()=>{}))}addDefaultLogin(){const e=(0,G.getPwmStore)(),t=null==e?void 0:e.getState().logins.ids;if(0===(null==t?void 0:t.length)){const{nslLogin:t}=(0,A.selectUserInfo)(null==e?void 0:e.getState()),r=b.default.getObfuscationKey();if("string"!=typeof r||""===r)return;const n=null==t?void 0:t.password;if("string"!=typeof n||""===n)return;const o=i.default.utils.obfuscatePassword(n,r);if(t&&t.username){const r=te(te({},t),{},{favorite:!1,notes:"",secure:!1,password:o});null==e||e.dispatch({type:T.LoginActionTypes.ADD_LOGINS,payload:{entityPayload:r}}),null==e||e.dispatch((0,A.setInfo)({id:"nslLogin",value:void 0}))}}}removePasswordlessVaultUnlockFailNotificationsIfAny(){const e=h.default.getFailedNotificationID();ge(e)&&(i.default.notificationCenter.removeNotification(e),h.default.setFailedNotificationID(null));const t=h.default.getCancelledNotificationID();t&&(i.default.notificationCenter.removeNotification(t),h.default.setCancelledNotificationID(null))}async doesVaultExist(){return null!=(await le.fetchVaultInfo()).passwordHint}populateStoreWithRecoveryInfo(e){let t;i.default.utils.isntNil(e.getModifiedAt())&&(t={downloadDate:1e3*e.getModifiedAt(),sourceType:e.getSourceType(),sourceID:e.getSourceID()});const r=(0,G.getPwmStore)();null==r||r.dispatch((0,A.setInfo)({id:"recoveryInfo",value:t})),g.default.isInitializedSuccessfully()&&g.default.track(E.TELEMETRY_ACTIONS.RECOVERY.RECOVERY_INFO_UPDATED,{recoveryKeyEnabled:ge(t)})}closePasswordlessVaultUnlockUI(){i.default.extensionAdapter.getAllTabs((e=>{e.forEach((e=>{const t=i.default.extensionAdapter.getTabID(e);e.url!==i.default.extensionAdapter.getExtensionURL("html/onboardSetup.html#/onboard-setup/progress")&&e.url!==i.default.extensionAdapter.getExtensionURL("html/onboardSetup.html#/onboard-setup/passwordlessVaultUnlock")&&e.url!==i.default.extensionAdapter.getExtensionURL("html/onboardSetup.html#/onboard-setup")&&e.url!==i.default.extensionAdapter.getExtensionURL("html/onboardSetup.html#/onboard-setup/qr-onboard")&&e.url!==i.default.extensionAdapter.getExtensionURL("html/onboardSetup.html#/onboard-setup/unlock")||i.default.extensionAdapter.closeTabAndEnsureBrowserIsAlive(t,(()=>{V.default.setIsUnlockTabClosedByExtension(!0)}))}))}))}async closeVault(e=!1,t){i.default.utils.createCustomHTMLEvent(N.default.EVENTS.VAULT_CLOSED),ue.unload();try{await le.closeVault()}catch(e){Se.error(e)}await ce.closeRecovery(),await B.default.reset(),V.default.resetPasswordHint(),pe.reset(),C.default.sendCloseVaultStatus(C.default.actionType.CLOSE_VAULT_FLOW.CLOSE_VAULT,C.default.CLOSE_VAULT_LABELS.VAULT_CLOSE_SUCCEEDED);const{context:r}=t;ge(r)&&r!==Y.LockContext.SignOut&&g.default.track(E.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.LOCKED,t);const n=(0,l.default)(i.default.extensionAdapter.getExtensionURL(""));i.default.extensionAdapter.setPopupHandler(N.default.POPUP_INDEX_URL),e||(i.default.extensionAdapter.getAllTabs((e=>{e.forEach((e=>{const t=i.default.extensionAdapter.getTabID(e);if((0,l.default)(e.url).origin()===n.origin()){const r=()=>i.default.extensionAdapter.closeTabAndEnsureBrowserIsAlive(t),n=setTimeout(r,100);i.default.extensionAdapter.sendMessageToTab(e,{id:Te.VAULT_CLOSED},(()=>{clearTimeout(n),r()}))}else i.default.extensionAdapter.sendMessageToTab(e,{id:Te.VAULT_CLOSED},(()=>{}))}))})),i.default.notificationCenter.clearNotification(),ge(I.default.getNotificationIDCompromisedLoginMap())&&!f.default.isCompromisedPasswordFlowInProgress()&&p.default.resetCompromisedPasswordFlowState()),setTimeout((()=>{j.default.resetVaultData(),k.default.setUserInfo();const e=(0,G.getPwmStore)();null==e||e.dispatch((0,A.setInfo)({id:"recoveryInfo",value:void 0}))}),100),C.default.sendCloseVaultStatus(C.default.actionType.CLOSE_VAULT_FLOW.CLOSE_VAULT,C.default.CLOSE_VAULT_LABELS.BROADCAST_TO_TABS),this.removeVaultSDKListeners(),H.default.clearItemCountMiddlewareListener(),w.default.setBrowserActionIcon(!1),P.default.stopActiveUserHeartBeat(),this.unsubscribeFCM()}addTabUpdatedEventListener(){oe.addTabUpdatedEventListener(this.checkAndSendPasswordlessVaultUnlockNotificationOnStartup)}setIsBrowserRestart(e){X.default.set(Re.IS_BROWSER_RESTART,e)}getIsBrowserRestart(){var e;return null!==(e=X.default.get(Re.IS_BROWSER_RESTART))&&void 0!==e&&e}};Ce.initVaultSDKListeners();r.default=Ce},{"../../common/constants":13,"../../feature/seamlessOnboarding/seamlessOnboardingKeys":107,"./../../../redux-core/action-types/loginActionTypes":727,"./../../../redux-core/features/userInfo/userInfoSlice":741,"./cctWorker":26,"./extension/extensionSettings":33,"./firebaseServiceWorker":35,"./globalSettings":36,"./mainUIActions":37,"./notificationIcon":42,"./pwmSessionSettings":43,"./pwmVaultPersistenceSettings":44,"./reporter":45,"./signin":47,"./store/pwmStore":49,"./store/telemetryInfoStore":50,"./store/userInfoStore":51,"./store/vaultActionsStore":52,"./telemetry/heartBeatWrapper":53,"./telemetry/telemetryWrapper":55,"./uiService":56,"./vaultItemCountHelper":58,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants/uiConstants":9,"common/global.types":16,"common/secureSettingsContainer":23,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"feature/autoUnlock/autoUnlock":60,"feature/compromised-password/compromisedPasswordHelper":64,"feature/compromised-password/loginInfoManager":65,"feature/compromised-password/motFlowManager":66,"feature/compromised-password/motOnboardingControllerClass":68,"feature/security-dashboard/securityDashboardNotificationHandler":112,"feature/unlockManager/vaultUnlockManager":117,"feature/unlockManager/vuSettings":118,"feature/wax/fillCaptureHandler":119,"feature/wax/waxConstants":124,"feature/wax/waxStorageSettings":129,locale:131,"message-adapter/messageID":135,"telemetry/background":170,"telemetry/constants/telemetryActions":174,"telemetry/types":186,"telemetry/types/lifecycleTelemetry.types":188,"telemetry/types/userAccountTelemetry.types":194,"telemetry/types/vaultUnlockAndLockTelemetry.types":195,urijs:718}],47:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),u=n(e("feature/nudge/nudgeController")),l=n(e("feature/unlockManager/vuSettings")),c=n(e("common/constants/uiConstants")),d=n(e("core/background/reporter")),f=n(e("feature/seamlessOnboarding/seamlessOnboardingManager")),p=n(e("telemetry/background")),h=e("telemetry/constants/telemetryActions"),_=n(e("../../common/constants")),E=n(e("./cctWorker")),g=n(e("./session")),m=n(e("./store/userInfoStore")),y=n(e("./telemetry/telemetryWrapper")),S=n(e("./pwmSessionSettings")),T=e("../../message-adapter/background"),A=n(e("./globalSettings")),b=n(e("./vaultActions"));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}const{vaultKeys:I,vaultManager:v}=a,{isNil:N}=i.default.utils,{isntNil:R}=i.default.utils,{logger:C}=i.default,{extensionAdapter:D}=i.default,{SIGN_IN:w}=_.default.SESSION_STORAGE_KEYS,{VAULT_STATE:L}=_.default,P=[L.NETWORK_ERROR,L.NOT_LOGGED_IN,L.O2_RATE_LIMITED_ERROR,L.INTERNET_UNAVAILABLE];const M=new class{constructor(){(0,o.default)(this,"onTabClosed",((e,t)=>{if(!N(this.getTabID())&&e===this.getTabID()){const e=this.getIsCreateVaultTabClosedByExtension();t!==D.getExtensionURL(_.default.ONBOARDING.URLS.createVault)||e||p.default.track(h.TELEMETRY_ACTIONS.ONBOARDING.CREATE_VAULT_CLOSED),this.resetContainer(),this.setIsCreateVaultTabClosedByExtension(!1),this.getIsDeleteVaultFlow()&&y.default.resetVaultSSOPageClosed()}}))}resetContainer(){this.setTabID(null),this.setWindowID(null),this.setEmailId(void 0),this.setState(null)}resetPasswordHint(){this.setPasswordHint(void 0)}changeTabFocus(e,t){D.getTab(e,(e=>{if(R(D.getLastError())||N(e))return this.resetContainer(),void this.checkIfTabExistElseCreate(t);const r=D.getTabID(e);D.activateTab(r),D.focusWindow(D.getWindowIDForTab(e))}))}validateOnboardingTab(e,t){const r=D.getTabID(e);R(e)&&r===this.getTabID()&&t===(null==e?void 0:e.url)||D.closeTab(r)}updateTabUrlIfExistsElseCreate(e){R(this.getTabID())?this.updateTabURL(e):this.checkIfTabExistElseCreate(e)}checkIfTabExistElseCreate(e){return R(this.getTabID())?(this.changeTabFocus(this.getTabID(),e),Promise.resolve()):R(this.getTabID())?(this.changeTabFocus(this.getTabID(),e),i.default.utils.createCustomHTMLEvent(_.default.IDSAFE_CREATED_TAB,{tabId:this.getTabID(),tabUrl:D.getTab(this.getTabID()).url}),Promise.resolve()):new Promise((t=>{D.createTab(e,(r=>{try{const t=D.getLastError();R(t)&&C.error(`lastError:createTab: ${t.message}`),this.setTabID(D.getTabID(r)),this.setWindowID(D.getWindowIDForTab(r));let n=null==r?void 0:r.pendingUrl;this.getIsDeleteVaultFlow()&&(n=e),i.default.utils.createCustomHTMLEvent(_.default.IDSAFE_CREATED_TAB,{tabId:this.getTabID(),tabUrl:n})}catch(e){C.error(e)}finally{setTimeout((()=>{t(this.getTabID())}),1)}}))}))}updateTabURL(e){D.getTab(this.getTabID(),(t=>{if(i.default.utils.createCustomHTMLEvent(_.default.IDSAFE_CREATED_TAB,{tabId:this.getTabID(),tabUrl:e}),t.url.startsWith(e))return void this.changeTabFocus(D.getTabID(t),e);const r=D.getTabID(t);D.updateTabUrl(r,e,(()=>{this.changeTabFocus(r,e)}))}))}constructCCTPageURL(){const e=`IDSafe/${_.default.VERSION}/XBrowser/${_.default.VERSION}/CC/${_.default.PB_VERSION}`;return`${_.default.CCT_URL}?${_.default.CCT_URL_PARAMKEY.USER_AGENT}=${e}&${_.default.CCT_URL_PARAMKEY.NEW_SESSION}=true`}getTabID(){var e;return null!==(e=S.default.get(w.TAB_ID))&&void 0!==e?e:null}setTabID(e){S.default.set(w.TAB_ID,e)}getWindowID(){var e;return null!==(e=S.default.get(w.WINDOW_ID))&&void 0!==e?e:null}setWindowID(e){S.default.set(w.WINDOW_ID,e)}setEmailId(e){S.default.set(w.EMAIL_ID,e)}getEmailId(){var e;return null!==(e=S.default.get(w.EMAIL_ID))&&void 0!==e?e:void 0}setPasswordHint(e){S.default.set(w.PASSWORD_HINT,e)}getPasswordHint(){var e;return null!==(e=S.default.get(w.PASSWORD_HINT))&&void 0!==e?e:void 0}setIsUnlockTabClosedByExtension(e){S.default.set(w.IS_UNLOCK_TAB_CLOSED_BY_EXTENSION,e)}getIsUnlockTabClosedByExtension(){var e;return null!==(e=S.default.get(w.IS_UNLOCK_TAB_CLOSED_BY_EXTENSION))&&void 0!==e&&e}setIsCreateVaultTabClosedByExtension(e){S.default.set(w.IS_CREATE_VAULT_TAB_CLOSED_BY_EXTENSION,e)}getIsCreateVaultTabClosedByExtension(){var e;return null!==(e=S.default.get(w.IS_CREATE_VAULT_TAB_CLOSED_BY_EXTENSION))&&void 0!==e&&e}navigateToCCTPage(e,t){if(N(e))throw new Error("senderTabId cannot be null");const r=this.constructCCTPageURL();return E.default.startSignInSession(t),setTimeout((()=>{f.default.stopOnBoarding()}),5e3),D.closeTabAndEnsureBrowserIsAlive(e),this.checkIfTabExistElseCreate(r)}openCCTPage(e,t){const r=this.constructCCTPageURL();return M.setEmailId(t),E.default.startSignInSession(e),this.checkIfTabExistElseCreate(r)}_openDeleteVaultPage(){const e=this;v.fetchVaultInfo().then((t=>{let r="";t.state.state===L.VAULT_EXISTS?(r="onboardSetup.html#/onboard-setup/delete-vault",D.setPopupHandler(_.default.POPUP_INDEX_URL)):r="onboardSetup.html#/onboard-setup/no-vault";const n=D.getExtensionURL(`html/${r}`);R(this.getTabID())?e.updateTabURL(n):e.checkIfTabExistElseCreate(n)}))}openNoVaultPage(e=!1){g.default.getVaultState().then((t=>{if(t===a.vaultManager.state.VAULT_FOUND)return;const r=D.getExtensionURL("/html/onboardSetup.html#/unlock");e&&R(this.getTabID())&&(D.closeTab(this.getTabID()),this.setTabID(null)),R(this.getTabID())?this.updateTabURL(r):this.checkIfTabExistElseCreate(r)}))}openLoginFlow({isDeleteVaultFlow:e,useNudgePageForLogin:t}={isDeleteVaultFlow:!1,useNudgePageForLogin:!1}){this.setIsDeleteVaultFlow(e),s.default.session.isLoggedIn(((e,r)=>{e?this.openVaultLoginPage():t?u.default.openNudgeTab():this.openCCTPage()}))}closeExistingIDSTabs(){const e=[D.getExtensionURL("html/onboardSetup.html#/onboard-setup/unlock"),D.getExtensionURL("html/onboardSetup.html#/onboard-setup/delete-vault"),D.getExtensionURL("html/dashboard.html#/dashboard/logins"),D.getExtensionURL("html/dashboard.html#/dashboard/settings")];D.getAllTabs((t=>{t.forEach((t=>{let r=!1;for(let n=0;n<e.length;n++)if(t.url===e[n]){r=!0;break}const n=D.getTabID(t);!0===r&&D.closeTabAndEnsureBrowserIsAlive(n)}))}))}async openVaultLoginPage(e=!0){if(m.default.setUserInfo(),!I.isLocked())return;const t=this,r=D.getExtensionURL("html/onboardSetup.html#/onboard-setup/progress");let n=null;R(this.getTabID())?(t.updateTabURL(r),n=Promise.resolve()):n=t.checkIfTabExistElseCreate(r),n.then((async()=>{const{state:r,passwordHint:n}=await v.fetchVaultInfo(),o=b.default.canShowOnboardingScreens();this.setPasswordHint(n);let i="";if(r.getState()===L.VAULT_EXISTS){const t=l.default.getRegisteredDevice();if(o){const e=await a.recoveryManager.fetchRecoveryInfo(),t=A.default.getOnboardingStep();t&&t!==_.default.ONBOARDING.STEPS.STARTED&&!A.default.getIsVaultDeleted()||(null!=e.getModifiedAt()?A.default.setOnboardingStep(_.default.ONBOARDING.STEPS.SET_DEFAULT):A.default.setOnboardingStep(_.default.ONBOARDING.STEPS.DOWNLOAD_RECOVERY))}i=e&&R(t)?"onboardSetup.html#/onboard-setup/passwordlessVaultUnlock":"onboardSetup.html#/onboard-setup/unlock"}else P.includes(r.getState())?d.default.showGenericErrorNotification():r.getState()===L.SSO_UNAUTHORIZED?await d.default.logoutCheckBasedOnSSOToken():(i="onboardSetup.html#/onboard-setup/create-vault",o&&(D.setPopupHandler(""),A.default.setOnboardingStep(_.default.ONBOARDING.STEPS.CREATE_VAULT)));if(R(i)&&""!==i){const e=D.getExtensionURL(`html/${i}`);if(R(this.getTabID()))return void t.updateTabURL(e);t.checkIfTabExistElseCreate(e)}else t.closeSignInTab()}))}init(){T.messenger.subscribe(T.MESSAGES.DASHBOARD_MESSAGES.IS_ONBOARDING_FLOW,((e,t,r)=>{null==t||t(""!==A.default.getOnboardingStep())}))}isSignInTab(e){return this.getTabID()===e}getIsDeleteVaultFlow(){var e;return null!==(e=S.default.get(w.IS_DELETE_VAULT_FLOW))&&void 0!==e&&e}setIsDeleteVaultFlow(e=!1){S.default.set(w.IS_DELETE_VAULT_FLOW,e)}getState(){var e;return null!==(e=S.default.get(w.STATE))&&void 0!==e?e:i.default.utils.createNewGuid()}setState(e){S.default.set(w.STATE,e)}resetState(){S.default.set(w.STATE,null)}onTabReplaced(e,t){N(this.getTabID())||t===this.getTabID()&&this.setTabID(e)}closeSignInTab(e){var t;t=this.getTabID(),D.getAllWindows((r=>{1===r.length?D.getAllTabs((e=>{1===e.length&&D.createTab(),D.closeTab(t)})):D.closeTab(t),e!==c.default.VAULT_UNLOCK.MESSAGES.SIGNOUT_OF_NA&&i.default.utils.createCustomHTMLEvent(_.default.IDSAFE_CLOSED_TAB,{tabId:t})}))}removeSignInTab(e){N(this.getTabID())||(e===T.MESSAGES.DASHBOARD_MESSAGES.UNLOCK_VAULT&&this.setIsUnlockTabClosedByExtension(!0),this.closeSignInTab(e),this.resetContainer())}onWindowClosed(e){N(this.getWindowID())||e===this.getWindowID()&&this.resetContainer()}processVaultFlow(){m.default.setUserInfo(),!1===this.getIsDeleteVaultFlow()?(D.setPopupHandler(_.default.POPUP_INDEX_URL),M.openVaultLoginPage()):(y.default.resetVaultSSOLoginSuccess(),M._openDeleteVaultPage())}isNASignedIn(){return new Promise((e=>{s.default.session.isLoggedIn((t=>{e(t)}))}))}};r.default=M},{"../../common/constants":13,"../../message-adapter/background":134,"./cctWorker":26,"./globalSettings":36,"./pwmSessionSettings":43,"./session":46,"./store/userInfoStore":51,"./telemetry/telemetryWrapper":55,"./vaultActions":57,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants/uiConstants":9,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/reporter":45,"feature/nudge/nudgeController":94,"feature/seamlessOnboarding/seamlessOnboardingManager":108,"feature/unlockManager/vuSettings":118,"telemetry/background":170,"telemetry/constants/telemetryActions":174}],48:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("common/constants")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js"),u=n(e("feature/unlockManager/vaultUnlockManager")),l=n(e("feature/seamlessOnboarding/seamlessOnboardingManager"));const{DataStoreSpocPayloadV2:c}=s.default.proto.com.symantec.oxygen.datastore.v2.messages,{isntNil:d,isNil:f}=o.default.utils,p=s.default.session;const h=new class{handleSPOCCallbacks(e){var t;const r=null==e||null===(t=e.data)||void 0===t?void 0:t.channel;switch(parseInt(r,10)){case 2:return this.handleDatastoreUpdates(e);case i.default.SPOC_CHANNELS.VAULT_MOBILE_REGISTRATION:return this.handleDeviceRegistration(e);case i.default.SPOC_CHANNELS.PASSWORDLESS_VAULT_UNLOCK:return this.handlePasswordlessVaultUnlock(e);case i.default.SPOC_CHANNELS.SEAMLESS_ONBOARDING:return this.handleSeamlessOnboarding(e)}}handleDatastoreUpdates(e){var t,r,n,i,u,l;const h=null===(t=e.data)||void 0===t?void 0:t.entity,_=parseInt(h,10);f(_)&&o.default.logger.error("handleDatastoreUpdates :: entityID is nil");const E=p.getUserID();if(f(E)&&o.default.logger.error("handleDatastoreUpdates :: currentEntityID is nil"),_!==E)return;let g=null;if(d(null===(r=e.data)||void 0===r?void 0:r.payload)){var m;const t=s.default.authSCD.getMachineGUID();if(g=s.default.utils.encodedStringToProtobuf(null===(m=e.data)||void 0===m?void 0:m.payload,c),g.getOrigin()===t)return}const y=null===(n=g)||void 0===n?void 0:n.getToRevision(),S=null===(i=g)||void 0===i?void 0:i.get_app_id();a.vaultManager.spocCallbackFirebase(null!=y?y:null===(u=e.data)||void 0===u?void 0:u.revision,S),a.recoveryManager.spocCallbackFirebase(null!=y?y:null===(l=e.data)||void 0===l?void 0:l.revision,S)}handleDeviceRegistration(e){return u.default._spocDeviceRegistrationCallback(e)}handlePasswordlessVaultUnlock(e){return u.default._passwordlessVaultUnlockSpocCallback(e)}handleSeamlessOnboarding(e){return l.default._processFirebaseSPOCPayload(e)}};r.default=h},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"feature/seamlessOnboarding/seamlessOnboardingManager":108,"feature/unlockManager/vaultUnlockManager":117}],49:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getPwmStore=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("./../../../../redux-core/store/configureStore")),a=n(e("./../../../../vault/vaultHelper")),u=n(e("configuration")),l=n(e("./vaultActionsStore")),c=n(e("./userInfoStore")),d=n(e("./telemetryInfoStore")),f=n(e("./../../../../vault/tagHelper"));r.getPwmStore=(new class{constructor(){(0,o.default)(this,"getStore",(()=>this.store)),this.store=(0,s.default)({devTools:u.default.isIntEnv,thunkExtraArgument:{apiService:a.default,tagService:f.default},portName:i.default.extensionAdapter.getExtensionURL("port")}),l.default.init(this.store),c.default.init(this.store),d.default.init(this.store)}}).getStore},{"./../../../../redux-core/store/configureStore":743,"./../../../../vault/tagHelper":757,"./../../../../vault/vaultHelper":759,"./telemetryInfoStore":50,"./userInfoStore":51,"./vaultActionsStore":52,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,configuration:3}],50:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=e("./../../../../redux-core/features/telemetryInfo/telemetryInfoSlice");const{isNil:s,isntNil:a}=o.default.utils;const u=new class{init(e){this.store=e}getAppContext(e){let t;if(s(this.store))return t;const{telemetryContext:r}=(0,i.selectTelemetryInfo)(this.store.getState());var n,o,u,l;a(e)&&a(r[e])&&(t=null===(n=r[e])||void 0===n?void 0:n.screen,a(null===(o=r[e])||void 0===o?void 0:o.action)&&(t=`${null===(u=r[e])||void 0===u?void 0:u.screen} ${null===(l=r[e])||void 0===l?void 0:l.action}`));return t}setTelemetryInfo(e){var t;null===(t=this.store)||void 0===t||t.dispatch((0,i.setTelemetryInfo)(e))}};r.default=u},{"./../../../../redux-core/features/telemetryInfo/telemetryInfoSlice":740,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211}],51:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),i=n(e("feature/partnerSupport/partnerParams")),s=n(e("feature/seamlessOnboarding/seamlessOnboardingKeys")),a=n(e("feature/seamlessOnboarding/seamlessOnboardingSettings")),u=n(e("feature/security-dashboard/securityDashboard")),l=n(e("feature/unlockManager/vaultUnlockManager")),c=n(e("feature/unlockManager/vuSettings")),d=e("./../../../../redux-core/features/userInfo/userInfoSlice"),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),p=n(e("feature/compromised-password/compromisedPasswordHelper")),h=n(e("common/constants")),_=n(e("../globalSettings")),E=n(e("../vaultActions"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}const m=new class{init(e){this.store=e}setUserInfo(){var e;const t=this.getEmail(),r=f.vaultKeys.isLocked(),{deviceName:n,deviceId:o}=l.default.getDeviceInfo(),a={email:t,isVaultLocked:r,deviceName:n,deviceId:o,registeredDate:c.default.getRegisteredTime(),autoPasswordlessVaultUnlockRequest:c.default.isAutoPasswordlessVaultUnlockRequestEnabled(),safetyRibbonData:f.vaultKeys.isLocked()?void 0:u.default.fetchRibbonData(),splashToShow:this.findSplashToShow(),isPartnerFlow:"NA"!==i.default.retrievePartnerInfo(),isSeamlesslyOnboardedUser:s.default.getIsSeamlesslyOnboardedViaMobile(),partner:i.default.retrievePartnerInfo(),isCompromisedPasswordFlowInProgress:p.default.isCompromisedPasswordFlowInProgress()};null===(e=this.store)||void 0===e||e.dispatch((0,d.setInfo)({id:"userInfo",value:a}))}getEmail(){return i.default.retrievePartnerInfo()!==h.default.NA_ACCOUNT?null:o.default.session.getEmail()}findSplashToShow(){var e,t;const r=null!==(e=null===(t=this.store)||void 0===t?void 0:t.getState().logins.ids)&&void 0!==e?e:[];return _.default.getIsOnboarding()?null:p.default.isCompromisedVaultPasswordDetected()?"compromised-vault-password-modal":p.default.isMatchSSOVaultPasswordFlowDetected()?"compromised-sso-vault-password-modal":E.default.getChangePasswordFlow()&&!E.default.getRecoveryInfoFound()?"dont-get-locked-out-modal":E.default.getChangePasswordFlow()&&E.default.getRecoveryInfoFound()||E.default.getRecoveryKeyUsedForCreateVault()?"old-key-not-valid-modal":!a.default.getCongratulationSplashScreenShown()&&(s.default.getIsAutoNaCreationFlow()||s.default.getIsSeamlessOnboardingFlow()&&s.default.getIsSeamlesslyOnboardedViaMobile())?"seamless-mobile-congrats":!c.default.getIsSplashScreenShown()&&((null==r?void 0:r.length)>=h.default.MAX_ACCOUNTS_FOR_GUIDE||c.default.getBypassLoginCountForSplash())?"seamless-passwordless-vault-unlock-splash":null}};r.default=m},{"../globalSettings":36,"../vaultActions":57,"./../../../../redux-core/features/userInfo/userInfoSlice":741,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,"feature/compromised-password/compromisedPasswordHelper":64,"feature/partnerSupport/partnerParams":96,"feature/seamlessOnboarding/seamlessOnboardingKeys":107,"feature/seamlessOnboarding/seamlessOnboardingSettings":109,"feature/security-dashboard/securityDashboard":110,"feature/unlockManager/vaultUnlockManager":117,"feature/unlockManager/vuSettings":118}],52:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=e("./../../../../redux-core/action-types/commonActionTypes"),i=e("./../../../../redux-core/features/bankAccounts/bankAccountsSlice"),s=e("./../../../../redux-core/features/contacts/contactsSlice"),a=e("./../../../../redux-core/features/creditCards/creditCardsSlice"),u=e("./../../../../redux-core/features/logins/loginsSlice"),l=e("./../../../../redux-core/features/notes/notesSlice"),c=n(e("./userInfoStore")),d=e("./../../../../redux-core/features/tags/tagSlice");const f=new class{init(e){this.store=e}loadVaultData(){var e,t,r,n,o,f;null===(e=this.store)||void 0===e||e.dispatch((0,u.getAllLogins)()),null===(t=this.store)||void 0===t||t.dispatch((0,a.getAllCreditCards)()),null===(r=this.store)||void 0===r||r.dispatch((0,i.getAllBankAccounts)()),null===(n=this.store)||void 0===n||n.dispatch((0,l.getAllNotes)()),null===(o=this.store)||void 0===o||o.dispatch((0,s.getAllContacts)()),null===(f=this.store)||void 0===f||f.dispatch((0,d.getAllTags)()),c.default.setUserInfo()}resetVaultData(){var e;null===(e=this.store)||void 0===e||e.dispatch((0,o.resetAllItems)())}};window.store=f;r.default=f},{"./../../../../redux-core/action-types/commonActionTypes":723,"./../../../../redux-core/features/bankAccounts/bankAccountsSlice":731,"./../../../../redux-core/features/contacts/contactsSlice":732,"./../../../../redux-core/features/creditCards/creditCardsSlice":733,"./../../../../redux-core/features/logins/loginsSlice":736,"./../../../../redux-core/features/notes/notesSlice":737,"./../../../../redux-core/features/tags/tagSlice":739,"./userInfoStore":51,"@babel/runtime/helpers/interopRequireDefault":208}],53:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.promise.js");var i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("@browser-services/heartbeat-sdk/dist/release/HeartBeatSDK.min.js")),u=n(e("common/constants")),l=n(e("feature/privacyPrompt/privacyPromptSettings")),c=e("common/global.types"),d=e("telemetry/constants"),f=n(e("telemetry/background")),p=n(e("feature/partnerSupport/partnerParams")),h=n(e("../extension/extensionInfo")),_=n(e("../signin")),E=n(e("../extension/extensionSettings")),g=n(e("../globalSettings"));function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const S=new class{isTelemetryEnabled(){return i.default.telemetrySettings.isTelemetryEnabled()}isAllowHbPing(){const e=g.default.getInstallStatus()===c.InstallStatusType.INSTALL;return"Firefox"!==i.default.globals.BROWSER||!(e&&!this.isTelemetryEnabled())}async initHeartBeat(){const e=`Norton Identity Safe_${i.default.extensionAdapter.getExtensionId()}`,t=new a.default.HBConfig;t.prodName=e,t.prodVersion=h.default.getVersion(),t.machineId=h.default.getClientID(),t.dataSource=u.default.HEARTBEAT.BROWSER_EXTENSION,t.apiKey=u.default.TELEMETRY_TRACKING_ID,t.userLanguage=navigator.language,t.isInstallPingEnabled=!0,t.isFreshInstall=g.default.getInstallStatus()===c.InstallStatusType.INSTALL,t.isHeartBeatPingEnabled=!0,t.heartBeatIntervalInMilliSec=u.default.HEARTBEAT.HEARTBEAT_PING_INTERVAL_TIME,t.browserName=i.default.utils.isExtnRunningInNSB()?i.default.constants.BROWSER_TYPE.NSB:i.default.globals.BROWSER,t.additionalInstallPingParams={[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION13]:()=>p.default.retrievePartnerInfo()},t.additionalHeartBeatPingParams={[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION3]:this.isTelemetryEnabled,[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION8]:_.default.isNASignedIn,[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION10]:()=>s.default.session.getNAGUID(),[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION11]:()=>E.default.getLoginsSaving(),[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION13]:()=>p.default.retrievePartnerInfo()},i.default.globals.BROWSER===i.default.constants.BROWSER_TYPE.FIREFOX&&(t.additionalHeartBeatPingParams=y(y({},t.additionalHeartBeatPingParams),{},{[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION9]:l.default.getPrivacyConsent})),await a.default.hbManager.init(t),this.startHeartBeatV2()}async startHeartBeatV2(){const e=new a.default.HBRecurrentPingConfig;e.pingName=d.TELEMETRY_ACTIONS.LIFECYCLE.HEARTBEAT,e.pingIntervalInMillis=u.default.HEARTBEAT.HEARTBEAT_V2_PING_INTERVAL_IN_MILLISECONDS,e.pingData={},e.sendPingMethod=f.default.track,await a.default.hbRecurrentPingManager.createPing(e),a.default.hbRecurrentPingManager.start(d.TELEMETRY_ACTIONS.LIFECYCLE.HEARTBEAT)}async initializeActiveVaultUserPingObj(){const e=`Norton Identity Safe_${i.default.extensionAdapter.getExtensionId()}`,t=new a.default.HBRecurrentPingConfig;t.prodName=e,t.prodVersion=h.default.getVersion(),t.machineId=h.default.getClientID(),t.apiKey=u.default.TELEMETRY_TRACKING_ID,t.dataSource=u.default.HEARTBEAT.BROWSER_EXTENSION,t.userLanguage=navigator.language,t.pingIntervalInMillis=u.default.HEARTBEAT.ACTIVE_VAULT_USERS_PING_INTERVAL,t.pingName=u.default.HEARTBEAT.ACTIVE_VAULT_USERS,t.pingData=this.getActiveVaultUserPingData(),t.browserName=i.default.utils.isExtnRunningInNSB()?i.default.constants.BROWSER_TYPE.NSB:i.default.globals.BROWSER,t.additionalRecurrentPingParams={[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION12]:()=>s.default.session.getNAGUID(),[i.default.telemetryConstants.parameters.CUSTOM_DIMENSION13]:()=>p.default.retrievePartnerInfo()},await a.default.hbRecurrentPingManager.createPing(t)}getActiveVaultUserPingData(){return{[i.default.telemetryConstants.parameters.ACTION]:u.default.HEARTBEAT.VAULT_OPEN,[i.default.telemetryConstants.parameters.CATEGORY]:u.default.HEARTBEAT.ACTIVE_USERS}}async startActiveUserHeartBeat(){try{this.isAllowHbPing()&&(await this.initializeActiveVaultUserPingObj(),a.default.hbRecurrentPingManager.start(u.default.HEARTBEAT.ACTIVE_VAULT_USERS))}catch(e){i.default.logger.error(e)}}stopActiveUserHeartBeat(){try{this.isAllowHbPing()&&a.default.hbRecurrentPingManager.stop(u.default.HEARTBEAT.ACTIVE_VAULT_USERS)}catch(e){i.default.logger.error(e)}}};r.default=S},{"../extension/extensionInfo":32,"../extension/extensionSettings":33,"../globalSettings":36,"../signin":47,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/heartbeat-sdk/dist/release/HeartBeatSDK.min.js":213,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"common/constants":13,"common/global.types":16,"core-js/modules/es.promise.js":437,"feature/partnerSupport/partnerParams":96,"feature/privacyPrompt/privacyPromptSettings":106,"telemetry/background":170,"telemetry/constants":173}],54:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("../extension/extensionSettings")),a=n(e("../../../common/global")),u=n(e("../../../common/constants"));const{isNil:l}=i.default.utils;const c=new class{constructor(){(0,o.default)(this,"ALL_BROWSERS",[i.default.constants.BROWSER_TYPE.SAFARI,i.default.constants.BROWSER_TYPE.CHROME,i.default.constants.BROWSER_TYPE.EDGE,i.default.constants.BROWSER_TYPE.FIREFOX]),(0,o.default)(this,"OPT_OUT_TELEMETRY_BROWSERS",[i.default.constants.BROWSER_TYPE.CHROME,i.default.constants.BROWSER_TYPE.EDGE]),(0,o.default)(this,"DELAY_TELEMETRY_NOTIFICATION_BROWSERS",[i.default.constants.BROWSER_TYPE.FIREFOX])}startTelemetryFlow(){const{OPT_OUT_TELEMETRY_BROWSERS:e}=this;this.isOptInSupported()&&this.handleTelemetryOptOut();e.includes(i.default.globals.BROWSER)&&(a.default.isFreshInstall?s.default.setShareDataEnabled(!0):s.default.getShareDataEnabled()||this.handleTelemetryOptOut())}handleTelemetryOptOut(){if(i.default.telemetrySettings.isTelemetryEnabled())return;const e=i.default.telemetrySettings.getLastOfferDate();let t=!1;do{if(l(e)){t=!0;break}if(i.default.globals.BROWSER===i.default.constants.BROWSER_TYPE.FIREFOX)break;if(new Date-e>u.default.telemetryOptOut.REOFFER_TIME_WINDOW){t=!0;break}}while(0)}isOptInSupported(){const{ALL_BROWSERS:e,OPT_OUT_TELEMETRY_BROWSERS:t,DELAY_TELEMETRY_NOTIFICATION_BROWSERS:r}=this;return e.filter((e=>!t.includes(e)&&!r.includes(e))).includes(i.default.globals.BROWSER)}init(){this.startTelemetryFlow()}};r.default=c},{"../../../common/constants":13,"../../../common/global":15,"../extension/extensionSettings":33,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.array.includes.js":429}],55:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants/uiConstants")),a=n(e("feature/partnerSupport/partnerParams")),u=n(e("../../../common/constants")),l=n(e("../extension/extensionInfo")),c=n(e("../globalSettings"));const{logger:d,extensionAdapter:f,utils:p,telemetryConstants:h}=i.default,{isNil:_,isntNil:E}=p,{AUTOCHANGE_LABEL:g,AUTOCHANGE_FAILED:m}=u.default.autochange,{CUSTOM_DIMENSION4:y,CUSTOM_DIMENSION13:S}=i.default.telemetryConstants.parameters;const T=new class{constructor(){(0,o.default)(this,"LOGIN_TYPE_SPOC","SPOC"),(0,o.default)(this,"LOGIN_TYPE_LOCAL","LOCAL"),(0,o.default)(this,"MOT_V2","motv2"),(0,o.default)(this,"ERROR","_errorcode_"),(0,o.default)(this,"SESSION","_session_"),(0,o.default)(this,"TELEMETRY_CATEGORY",{IDSCRYPTO:"IDSCrypto",BROWSER:"Browser",IDSAFE:"IDSafe",LOGIN:"Login",WAX:"Wax",OPENID:"OpenID",CCT:"cct",IDSVAULT:"IDSVault",PASSWORDCHANGER:"PasswordChanger",WELCOME_NOTIFICATION:"Welcome_Notification",PASSWORDLESS_VAULT_UNLOCK:"passwordless_vault_unlock",COMPROMISED_PASSWORDS:"Compromised_Passwords",MOT_ONBOARDING_FLOW:"mot_onboarding_flow",SEAMLESS_ONBOARDING:"seamless_onboarding",IMPORT_PASSWORD:"import_password",RESEARCH:"Research",CLOSE_VAULT_FLOW:"close_vault_flow",DELAY_ONBOARDING_FLOW:"delay_onboarding_flow",UI_TELEMETRY:"UITelemetry",ONBOARDING_RECOVERY:"onboarding_recovery",RECOVERY:"recovery",RESET:"reset",FEATURE_PROMOTION:"feature_promotion"}),(0,o.default)(this,"IDS_CRYPTO_ERROR_CONSTANTS",{DIGEST_COMPARISON_FAILURE:"Digest Comparison failure",TYPE_COMPARISON_FAILURE:"Type comparison failure",CHECKSUM_COMPARISON_FAILURE:"Checksum comparison failure",UNABLE_TO_ANSWER_CHALLENGE:"Unable to answer challenge",UNABLE_TO_CALCULATE_CHECKSUM:"Unable to calculate checksum",UNABLE_TO_DECRYPT_ITEM:"Unable to decrypt item",UNABLE_TO_ENCRYPT_ITEM:"Unable to encrypt item",UNABLE_TO_OBFUSCATE_ITEM:"Unable to obfuscate item"}),(0,o.default)(this,"SHARE_DATA_CONSTANTS",{SETTINGS_SHARE_DATA:"share-data",SHARE_DATA_DOC_TITLE:"settings-page"}),(0,o.default)(this,"actionType",{BROWSER:{LAUNCH:"launch",UPDATE:"update"},CCT:{LAUNCH:"launch",SUCCESS:"success"},IDSAFE:{UPDATE:"update"},WELCOME_NOTIFICATION:{LEARN_MORE:"Learn_More",CLOSE:"Close"},LOGIN:{ADD:"add",MODIFY:"modify",DELETE:"delete",SEARCH:"search",SIGNIN:"signin",ADDFAILED:"add-failed",MODIFYFAILED:"modify-failed"},WAX:{FORMSUBMIT:"formsubmit",FILLFAILURE:"fillfailure",HTTPSNOTFOUND:"httpsnotfound"},OPENID:{LAUNCH:"launch",LOGINSUCCESS:"loginsuccess",PAGECLOSED:"pageclosed"},PASSWORDCHANGER:{AUTOCHANGEPASSWORD:"autochangepassword"},IDSVAULT:{MERGE:"merge",VAULTSTATISTICS:"vaultstatistics",LOGINURLCOUNT:"loginurlcount",UPDATE:"update",CREATEVAULT:"createvault",RESETVAULT:"resetvault",CHANGEVAULTPASSWORD:"changevaultpassword",OPENVAULT:"openvault"},SHAREDATA:{DISABLE:"click-unchecked"},PASSWORDLESS_VAULT_UNLOCK:{MOBILERESPONSE:"mobileresponse",PASSWORDLESSVAULTUNLOCKSUCCESS:"passwordlessvaultunlocksuccess",REMOVE_DEVICE:"remove_device"},COMPROMISED_PASSWORDS:{REPLACEPASSWORDSINMOT:"replacepasswordsinmot",NOTIFICATIONDISMISSED:"notificationdismissed",LEARNMORECLICKED:"learnmoreclicked",SITENOTSUPPORTED:"sitenotsupported",OPENVAULTFROMCP:"openvaultfromcp",CPEVENTS:"cpevents"},MOT_ONBOARDING_FLOW:{NACREATOR:"nacreator",TABCLOSED:"tabclosed",CLICK:"click",LOGOUTTOKENREFRESH:"logouttokenrefresh"},SEAMLESS_ONBOARDING:{SOAUTONACREATION:"soautonacreation",SODESKTOPMOBILERESPONSE:"sodesktopmobileresponse",SODESKTOPMOBILENALOGIN:"sodesktopmobilenalogin",SODESKTOPPASSWORDLESSVAULTUNLOCK:"sodesktoppasswordlessvaultunlock",SODESKTOPMOBILEMUREGISTRATION:"sodesktopmobilemuregistration"},FEATURE_PROMOTION:{RECOVERY_FEATURE_PROMOTION_STARTED:"recoverypromostarted",RECOVERY_FEATURE_PROMOTION_COMPLETED:"recoverypromocompleted"},IMPORT_PASSWORD:{ERROR:"error"},RESEARCH:{AUTHENTICATOR_AVAILABILITY:"authenticator_availability"},CLOSE_VAULT_FLOW:{CLOSE_VAULT:"CLOSE_VAULT"},DELAY_ONBOARDING_FLOW:{ONBOARD_PAGE_SHOWN:"onboard_page_shown"},RECOVERY:{KEY_CREATION:"keycreation",KEY_USED:"keyused"},ACTION:{SHOW:"SHOW",CLICK:"CLICK"}}),(0,o.default)(this,"COMPROMISED_PASSWORD_PAYLOAD_CONSTANTS",{AUTOCHANGE_LAUNCHED:"autochangelaunched",VAULT_CREATED_SUCCESS:"vaultcreatedsuccess",VAULT_OPEN_SUCCCESS:"vaultopensuccess",PASSWORD_REPLACED_SUCCESS:"passwordreplacesuccesss",LERAN_MORE_CLICKED:"learnmoreclicked",NOTIFICATION_DISMISSED:"notificadtiondismissed",NOTIFICATION_SHOWN:"notificationshown",COMPROMISED_PASSWORD_DETECTED:"compromisedpassworddetected",AUTOCHANGE_SUCCESS:"autochangesuccess",NOTIFICATION_CLICKED:"notificationclicked"}),(0,o.default)(this,"MOT_ONBOARDING_FLOW_CONSTANTS",{AUTO_CREATE_SUCCESS:"autonasuccess",AUTO_CREATE_FAILED:"autonafailed",NA_EXISTS:"naexists",LEARN_MORE:"learnmore"}),(0,o.default)(this,"SEAMLESS_ONBOARDING_CONSTANTS",{SOAUTONACREATIONSUCCEEDED:"soautonacreationsucceeded",SOAUTONACREATIONFAILED:"soautonacreationfailed",SODESKTOPMOBILERESPONSERECEIVED:"sodesktopmobileresponsereceived",SODESKTOPMOBILEFAILEDRESPONSERECEIVED:"sodesktopmobilefailedresponsereceived",SODESKTOPMOBILENALOGINSUCCEEDED:"sodesktopmobilenaloginsucceeded",SODESKTOPMOBILENALOGINFAILED:"sodesktopmobilenaloginfailed",SODESKTOPPASSWORDLESSVAULTUNLOCKSUCCEEDED:"sodesktoppasswordlessvaultunlocksucceeded",SODESKTOPPASSWORDLESSVAULTUNLOCKFAILED:"sodesktoppasswordlessvaultunlockfailed",SODESKTOPMOBILEMUREGISTRATIONSUCCEEDED:"sodesktopmobilemuregistrationsucceeded",SODESKTOPMOBILEMUREGISTRATIONFAILED:"sodesktopmobilemuregistrationfailed"}),(0,o.default)(this,"TELEMETRY_NAME_CONSTANTS",{AUTH_AVAILABILITY:"3fb4560c-c79f-4d00-9187-c5045bc317f1",EDGE_ONBOARD_SOURCE:"632370bb-20ec-40d8-b850-a193d010a026"}),(0,o.default)(this,"FEATURE_PROMOTION_LABEL",{RECOVERYFEATURE_PASSWORDLESS_VAULT_UNLOCK:"passwordlessunlock",RECOVERYFEATURE_VAULT_UNLOCK:"webunlock",RECOVERYFEATURE_ONBOARDED_BEFORE:"onboardedbefore",RECOVERYFEATURE_ONBOARDED_FIRST_TIME:"onboardedfirstime"}),(0,o.default)(this,"OPENID_LABEL",{RESETVAULT:"resetvault"}),(0,o.default)(this,"CCT_LABEL",{CCTLAUNCH:"cctLaunch",CCTSUCCESS:"cctSuccess"}),(0,o.default)(this,"IDSVAULT_LABEL",{SIZE:"size",AVAILABILITY:"availability",PASSWORD:"password",PASSWORDHINT:"passwordhint",CREATEVAULTSUCCESS:"createvaultsuccess",FAILEDTOCREATE:"failedtocreate",RESETVAULTSUCCESS:"resetvaultsuccess",FAILEDTORESET:"failedtoreset",CHANGEVAULTPASSWORDFAILED:"changevaultpasswordfailed",CHANGEVAULTPASSWORDSUCCESS:"changevaultpasswordsuccess"}),(0,o.default)(this,"WAX_FORMSUBMIT_VALUE",{MANUAL:2,AUTOSUBMIT:1}),(0,o.default)(this,"WAX_FILLFAILURE_VALUE",{LOGINFORM:1}),(0,o.default)(this,"CLOSE_VAULT_LABELS",{VAULT_CLOSE_BEGIN:"vaultCloseBegin",VAULT_CLOSE_SUCCEEDED:"vaultCloseSucceeded",VAULT_CLOSE_FAILED:"vaultCloseFailed",BROADCAST_TO_TABS:"broadcastToTabs"}),(0,o.default)(this,"REMOVE_DEVICE_LABELS",{REMOVE_DEVICE_SUCCESS:"remove_device_success",REMOVE_DEVICE_FAILED:"remove_device_failed"}),(0,o.default)(this,"PASSWORDLESS_VAULT_UNLOCK_LABELS",{VU_UNLOCK_SUCCESS_UI:"vu-unlock-success-through-ui",VU_UNLOCK_REQUEST_SENT:"vu-unlock-request-sent-notification",VU_NOTIFICATION_RESEND:"vu-notification-resend-button",VU_NOTIFICATION_ENTER_VAULT_PASSWORD:"vu-notification-enter-vault-password-link",VU_WELCOME_NOTIFICATION_CLOSE:"vu-welcome-notification-close-icon",VU_WELCOME_NOTIFICATION_REMIND_ME_LATER:"vu-welcome-notification-remind-me-later-link",VU_WELCOME_NOTIFICATION_OK:"vu-welcome-notification-ok-button",VU_UNLOCK_REQUEST_NOT_SENT:"vu-unlock-request-not-sent-notification",VU_UNLOCK_REQUEST_CANCELED:"vu-unlock-request-canceled-notification",VU_UNLOCK_REQUEST_TIMEOUT:"vu-unlock-request-timeout-notification"}),(0,o.default)(this,"IMPORT_NOTIFICATION",{LABELS:{IMPORT_BUTTON:"import-button",NO_THANKS_BUTTON:"import-login-no-thanks",NOTIFICATION_CLOSE:"import-close"},DOCUMENT_TITLE:"import-login-notification"}),(0,o.default)(this,"LABELS",{SAVE_NEW_LOGIN:"save-new-login",SAVE_NEW_LOGIN_NO_THANKS:"save-new-login-no-thanks",SECURITY_ALERT_POPUP_CLOSE:"security-alert-popup-close",SECURITY_ALERT_POPUP_VIEW_DASHBOARD:"security-alert-popup-view-dashboard",UPDATE_LOGIN:"update-login",UPDATE_LOGIN_NO_THANKS:"update-login-no-thanks",SAVE_LOGIN_NOTIFICATION:"wax-save-notification-shown",REPLACE_NOTIFICATION:"wax-update-notification-shown",CP_NOTIFICATION:"cp-notification-shown"}),(0,o.default)(this,"NORTON_IMPORT_FLOW",{ACTION:"importsuccess",LABEL_CSW_CSV:"import-valid-csw-csv-file",LABEL_NPW_CSV:"import-valid-npw-csv-file",DOCUMENT_TITLE:"csw-import-manager"}),(0,o.default)(this,"DOCUMENT",{PATH:{HTML:"global.html"},TITLE:{SAVE_LOGIN_NOTIFICATION:"save-login-notification",UPDATE_LOGIN_NOTIFICATION:"update-login-notification",CP_NOTIFICATION:"compromised-password-notification"}}),(0,o.default)(this,"RECOVERY_CONSTANTS",{KEY_CREATION_SUCCESS:"key-creation-success",KEY_USED_SUCCESS:"key-used-success",KEY_USED_ERROR:"key-used-error"}),(0,o.default)(this,"sendAuthenticatorStatus",(e=>{if(!p.isString(e))return;const t=h.parameters,r={[t.HIT_TYPE]:h.HIT_TYPE.EVENT,[t.CATEGORY]:this.TELEMETRY_CATEGORY.RESEARCH,[t.ACTION]:this.actionType.RESEARCH.AUTHENTICATOR_AVAILABILITY,[t.LABEL]:e},n=a.default.retrievePartnerInfo();E(n)&&(r[S]=n),i.default.telemetry.sendOneTimeTelemetry(this.TELEMETRY_NAME_CONSTANTS.AUTH_AVAILABILITY,r)}))}sendPasswordlessVaultUnlockResponseTime(e){try{const t=this.TELEMETRY_CATEGORY.PASSWORDLESS_VAULT_UNLOCK,r=this.actionType.PASSWORDLESS_VAULT_UNLOCK.MOBILERESPONSE;this.checkStringIsValid(e),this.send(t,r,e)}catch(e){d.debug(e)}}sendPasswordlessVaultUnlockSuccessTime(e){try{const t=this.TELEMETRY_CATEGORY.PASSWORDLESS_VAULT_UNLOCK,r=this.actionType.PASSWORDLESS_VAULT_UNLOCK.PASSWORDLESSVAULTUNLOCKSUCCESS;this.checkStringIsValid(e),this.send(t,r,e)}catch(e){d.debug(e)}}sendRemoveDeviceStatus(e){const t=this.TELEMETRY_CATEGORY.PASSWORDLESS_VAULT_UNLOCK,r=this.actionType.PASSWORDLESS_VAULT_UNLOCK.REMOVE_DEVICE;this.send(t,r,e)}sendIDSCryptoError(e,t){const r=this.TELEMETRY_CATEGORY.IDSCRYPTO;this.checkStringIsValid(e),this.checkStringIsValid(t),this.send(r,t,e)}sendSettingsPageTelemetryDisable(){const e=this.TELEMETRY_CATEGORY.UI_TELEMETRY,t=this.SHARE_DATA_CONSTANTS.SETTINGS_SHARE_DATA,r=this.actionType.SHAREDATA.DISABLE,n=this.SHARE_DATA_CONSTANTS.SHARE_DATA_DOC_TITLE;this.sendEventTelemetry(e,r,t,n)}sendVaultHealthStatus(e){const t=this.TELEMETRY_CATEGORY.IDSVAULT,r=this.actionType.IDSVAULT.OPENVAULT,n=JSON.stringify(e);this.send(t,r,n)}createVaultFailure(e,t){const r=this.TELEMETRY_CATEGORY.IDSVAULT,n=this.actionType.IDSVAULT.CREATEVAULT,o=`${this.IDSVAULT_LABEL.FAILEDTOCREATE}(additionalInfo-${t},state-${e})`;this.send(r,n,o)}createVaultSuccess(e=null){const t=this.TELEMETRY_CATEGORY.IDSVAULT,r=this.actionType.IDSVAULT.CREATEVAULT,n=this.IDSVAULT_LABEL.CREATEVAULTSUCCESS;p.isObject(e)&&E(null==e?void 0:e.key)&&E(null==e?void 0:e.value)?this.send(t,r,n,e):this.sendTelemetry(t,r,n)}resetVaultSuccess(){const e=this.TELEMETRY_CATEGORY.IDSVAULT,t=this.actionType.IDSVAULT.RESETVAULT,r=this.IDSVAULT_LABEL.RESETVAULTSUCCESS;this.send(e,t,r)}resetVaultSSOLoginSuccess(){const e=this.TELEMETRY_CATEGORY.OPENID,t=this.actionType.OPENID.LOGINSUCCESS,r=this.OPENID_LABEL.RESETVAULT;this.send(e,t,r)}resetVaultSSOPageClosed(){const e=this.TELEMETRY_CATEGORY.OPENID,t=this.actionType.OPENID.PAGECLOSED,r=this.OPENID_LABEL.RESETVAULT;this.send(e,t,r)}resetVaultFailure(e,t){const r=this.TELEMETRY_CATEGORY.IDSVAULT,n=this.actionType.IDSVAULT.RESETVAULT,o=`${this.IDSVAULT_LABEL.FAILEDTORESET}(additionalInfo-${t},state-${e})`;this.send(r,n,o)}autoPasswordChanger(e,t=null){const r=this.TELEMETRY_CATEGORY.PASSWORDCHANGER,n=this.actionType.PASSWORDCHANGER.AUTOCHANGEPASSWORD,o=e;p.isObject(t)&&E(null==t?void 0:t.key)&&E(null==t?void 0:t.value)?this.send(r,n,o,t):this.send(r,n,o)}changeVaultPasswordFailure(e,t){const r=this.TELEMETRY_CATEGORY.IDSVAULT,n=this.actionType.IDSVAULT.CHANGEVAULTPASSWORD,o=`${this.IDSVAULT_LABEL.CHANGEVAULTPASSWORDFAILED}(additionalInfo-${t},state-${e})`;this.send(r,n,o)}changeVaultPasswordSuccess(){const e=this.TELEMETRY_CATEGORY.IDSVAULT,t=this.actionType.IDSVAULT.CHANGEVAULTPASSWORD,r=this.IDSVAULT_LABEL.CHANGEVAULTPASSWORDSUCCESS;this.send(e,t,r)}sendBrowserSignin(e){const t=this.TELEMETRY_CATEGORY.LOGIN,r=this.actionType.LOGIN.SIGNIN;this.checkStringIsValid(e),this.sendTelemetry(t,r,e)}sendBrowserUpdate(e){const t=this.TELEMETRY_CATEGORY.BROWSER,r=this.actionType.BROWSER.UPDATE;this.checkStringIsValid(e),this.send(t,r,e)}sendExtensionInstall(){const e=h.TELEMETRY_CATEGORY.EXTENSION,t=h.actionType.EXTENSION.INSTALL,r=`${f.getExtensionId()}-${l.default.getVersion()}`;this.send(e,t,r)}sendExtensionUpdate(){const e=h.TELEMETRY_CATEGORY.EXTENSION,t=h.actionType.EXTENSION.UPDATE,r=`${f.getExtensionId()}-${l.default.getVersion()}`;this.send(e,t,r)}sendLearnMoreClicked(){const e=this.TELEMETRY_CATEGORY.WELCOME_NOTIFICATION,t=this.actionType.WELCOME_NOTIFICATION.LEARN_MORE,r=`${i.default.extensionAdapter.getExtensionId()}-${l.default.getVersion()}`;this.send(e,t,r)}sendCloseClicked(){const e=this.TELEMETRY_CATEGORY.WELCOME_NOTIFICATION,t=this.actionType.WELCOME_NOTIFICATION.CLOSE,r=`${i.default.extensionAdapter.getExtensionId()}-${l.default.getVersion()}`;this.send(e,t,r)}sendCCTLaunched(e=null){const t=this.TELEMETRY_CATEGORY.CCT,r=this.actionType.CCT.LAUNCH,n=this.CCT_LABEL.CCTLAUNCH;p.isObject(e)&&E(null==e?void 0:e.key)&&E(null==e?void 0:e.value)?this.send(t,r,n,e):this.sendTelemetry(t,r,n)}sendCCTSuccess(e=null){const t=this.TELEMETRY_CATEGORY.CCT,r=this.actionType.CCT.SUCCESS,n=this.CCT_LABEL.CCTSUCCESS;p.isObject(e)&&E(null==e?void 0:e.key)&&E(null==e?void 0:e.value)?this.send(t,r,n,e):this.send(t,r,n)}sendLoginAdd(e,t){const r=this.TELEMETRY_CATEGORY.LOGIN;if(e!==this.LOGIN_TYPE_SPOC&&e!==this.LOGIN_TYPE_LOCAL)throw new Error("type must be either SPOC or LOCAL");const n=`${this.actionType.LOGIN.ADD}-${e}`,o=!1===p.isInteger(t)?1:t;this.send(r,n,`${o}`)}sendLoginAddMOTFlow(e){const t=this.TELEMETRY_CATEGORY.LOGIN;if(e!==this.LOGIN_TYPE_SPOC&&e!==this.LOGIN_TYPE_LOCAL)throw new Error("type must be either SPOC or LOCAL");const r=`${this.actionType.LOGIN.ADD}-${e}`,n=this.MOT_V2;this.send(t,r,n)}sendLoginAddFailedMOTFlow(e){const t=this.TELEMETRY_CATEGORY.LOGIN;if(e!==this.LOGIN_TYPE_SPOC&&e!==this.LOGIN_TYPE_LOCAL)throw new Error("type must be either SPOC or LOCAL");const r=`${this.actionType.LOGIN.ADDFAILED}-${e}`,n=this.MOT_V2;this.send(t,r,n)}sendLoginModify(e,t){const r=this.TELEMETRY_CATEGORY.LOGIN;if(e!==this.LOGIN_TYPE_SPOC&&e!==this.LOGIN_TYPE_LOCAL)throw new Error("type must be either SPOC or LOCAL");const n=`${this.actionType.LOGIN.MODIFY}-${e}`,o=!1===p.isInteger(t)?1:t;this.send(r,n,`${o}`)}sendLoginModifyMOTFlow(e){const t=this.TELEMETRY_CATEGORY.LOGIN;if(e!==this.LOGIN_TYPE_SPOC&&e!==this.LOGIN_TYPE_LOCAL)throw new Error("type must be either SPOC or LOCAL");const r=`${this.actionType.LOGIN.MODIFY}-${e}`,n=this.MOT_V2;this.send(t,r,n)}sendLoginModifyFailedMOTFlow(e){const t=this.TELEMETRY_CATEGORY.LOGIN;if(e!==this.LOGIN_TYPE_SPOC&&e!==this.LOGIN_TYPE_LOCAL)throw new Error("type must be either SPOC or LOCAL");const r=`${this.actionType.LOGIN.MODIFYFAILED}-${e}`,n=this.MOT_V2;this.send(t,r,n)}sendLogoutNAForTokenRefreshForMOTFlow(){const e=this.TELEMETRY_CATEGORY.MOT_ONBOARDING_FLOW,t=this.actionType.MOT_ONBOARDING_FLOW.LOGOUTTOKENREFRESH,r=this.MOT_V2;this.send(e,t,r)}sendLoginDelete(e,t){const r=this.TELEMETRY_CATEGORY.LOGIN;if(e!==this.LOGIN_TYPE_SPOC&&e!==this.LOGIN_TYPE_LOCAL)throw new Error("type must be either SPOC or LOCAL");const n=`${this.actionType.LOGIN.DELETE}-${e}`,o=!1===p.isInteger(t)?1:t;this.send(r,n,`${o}`)}sendWaxFormSubmit(e,t,r,n=null){const o=this.TELEMETRY_CATEGORY.WAX;this.checkStringIsValid(e),this.checkValueInRange(t,1,2);let i=`${this.actionType.WAX.FORMSUBMIT}-${e}`;p.isBoolean(r)&&r&&(i=`${i}-${u.default.NPW_ISOLATION}`),p.isObject(n)&&E(null==n?void 0:n.key)&&E(null==n?void 0:n.value)?this.send(o,i,`${t}`,n):this.send(o,i,`${t}`)}sendWaxFillFailure(e){const t=this.TELEMETRY_CATEGORY.WAX,r=this.actionType.WAX.FILLFAILURE;this.checkStringIsValid(e),this.send(t,r,e)}sendWaxFillHttpsNotFoundFailure(e){const t=this.TELEMETRY_CATEGORY.WAX,r=this.actionType.WAX.HTTPSNOTFOUND;this.checkStringIsValid(e),this.send(t,r,e)}sendIDSVaultMerge(e){const t=this.TELEMETRY_CATEGORY.IDSVAULT,r=this.actionType.IDSVAULT.MERGE;this.checkStringIsValid(e),this.send(t,r,e)}sendIDSVaultStatistics(e,t){const r=this.TELEMETRY_CATEGORY.IDSVAULT;switch(e){case this.IDSVAULT_LABEL.SIZE:this.checkValueInRange(t);break;case this.IDSVAULT_LABEL.AVAILABILITY:this.checkValueInRange(t,0,1);break;default:throw new Error("label must be either 'size' or 'availability'")}const n=`${this.actionType.IDSVAULT.VAULTSTATISTICS}-${e}`;this.sendTelemetry(r,n,`${t}`)}sendIDSVaultUpdate(e){const t=this.TELEMETRY_CATEGORY.IDSVAULT,r=this.actionType.IDSVAULT.UPDATE,n=this.IDSVAULT_LABEL.PASSWORD,o=this.IDSVAULT_LABEL.PASSWORDHINT;if(e!==n&&e!==o)throw new Error("label must be either 'password' or 'passwordhint'");this.send(t,r,e)}sendEventTelemetry(e,t,r,n,o=null,s=null){this.checkStringIsValid(e),this.checkStringIsValid(t),this.checkStringIsValid(r),this.checkStringIsValid(n);const u={};u[h.parameters.HIT_TYPE]=h.HIT_TYPE.EVENT,u[h.parameters.CATEGORY]=e,u[h.parameters.ACTION]=t,u[h.parameters.LABEL]=r,u[h.parameters.DOCUMENT_TITLE]=n,E(o)&&o&&o.length>0&&(u[h.parameters.DOCUMENT_PATH]=o),s&&Object.entries(s).forEach((([e,t])=>{t&&(u[t.key]=t.value)}));const l=a.default.retrievePartnerInfo();E(l)&&(u[S]=l),i.default.telemetry.send(u)}sendTelemetry(e,t,r){const n=c.default.getValue(u.default.NUDGE_SCREEN_OPEN)?{key:h.parameters.CUSTOM_DIMENSION5,value:u.default.NPW_NUDGE}:null;t===this.actionType.LOGIN.SIGNIN?i.default.extensionAdapter.getActiveTab((o=>{o.url===i.default.extensionAdapter.getExtensionURL(s.default.NUDGE_SCREEN.CONTENT_PAGE_URL)?this.send(e,t,r,n):this.send(e,t,r)})):this.send(e,t,r,n)}send(e,t,r,n=null){if(this.checkStringIsValid(e),this.checkStringIsValid(t),this.checkStringIsValid(r),E(n)&&(!1===p.isString(null==n?void 0:n.key)||!1===p.isString(null==n?void 0:n.value)))throw new Error("customDimension.value or customDimension.key should be a string");const o={};o[h.parameters.HIT_TYPE]=h.HIT_TYPE.EVENT,o[h.parameters.CATEGORY]=e,o[h.parameters.ACTION]=t,o[h.parameters.LABEL]=r,E(n)&&(o[null==n?void 0:n.key]=null==n?void 0:n.value);const s=a.default.retrievePartnerInfo();E(s)&&(o[S]=s),i.default.telemetry.send(o)}sendAutochangeErrorTelemetry(e){d.debug(`Autochange telemetry data is: ${e.length} bytes long.`),this.sendSocialTelemetry(g,m,e)}sendSocialTelemetry(e,t,r){const n=h.parameters,o={[n.HIT_TYPE]:h.HIT_TYPE.SOCIAL,[n.SOCIAL_NETWORK]:e,[n.SOCIAL_ACTION]:t,[n.SOCIAL_TARGET]:r};i.default.telemetry.send(o)}checkValueInRange(e,t,r){const n=t||0;if(!p.isInteger(e))throw new Error("value must be an integer");if(e<n)throw new Error(`value must be greater than or equal to ${n}`);if(E(r)&&e>r)throw new Error(`value must be less than or equal to ${r}`)}checkStringIsValid(e){if(!p.isString(e))throw new Error(`${e} must be of type string`)}actionExists(e,t){if(e===this.TELEMETRY_CATEGORY.IDSCRYPTO){const e=this.IDS_CRYPTO_ERROR_CONSTANTS;for(const r in e)if(e[r]===t)return!0;return!1}if(_(this.actionType[e.toUpperCase()])&&_(h.actionType[e.toUpperCase()]))return!1;const r=t.indexOf("-");let n=t;return r>-1&&(n=t.substring(0,r)),!(!E(this.actionType[e.toUpperCase()])||!E(this.actionType[e.toUpperCase()][n.toUpperCase()]))||!(!E(h.actionType[e.toUpperCase()])||!E(h.actionType[e.toUpperCase()][n.toUpperCase()]))}sendLoginTelemetryFromSPOC(e){if(_(e))throw new Error("nodeStatusList is nil");if("object"!=typeof e)throw new Error("nodeStatusList must be of type object");const{added:t}=e,{updated:r}=e,{deleted:n}=e;if(!p.isInteger(t)||!p.isInteger(r)||!p.isInteger(n))throw new Error("nodeStatusList addedNodes/updatedNodes/deleteNodes must be integers");t>0&&this.sendLoginAdd(this.LOGIN_TYPE_SPOC,t),r>0&&this.sendLoginModify(this.LOGIN_TYPE_SPOC,r),n>0&&this.sendLoginDelete(this.LOGIN_TYPE_SPOC,n)}getDefaultParametersForWaxTelemetry(){return{APPLICATION_NAME:`${u.default.NORTON_IDENTITY_SAFE}_${i.default.extensionAdapter.getExtensionId()}`,APPLICATION_VERSION:l.default.getVersion(),CLIENT_ID:l.default.getClientID(),DATA_SOURCE:h.dataSource.BROWSER_EXTENSION,USER_LANGUAGE:navigator.language,ANONYMIZE_IP:1,GOOGLE_ANALYTICS_PROTOCOL_VERSION:1}}sendAutochangeNotSupportedCP(e){try{this.checkStringIsValid(e);const t=this.TELEMETRY_CATEGORY.COMPROMISED_PASSWORDS,r=this.actionType.COMPROMISED_PASSWORDS.SITENOTSUPPORTED,n=e,o={key:y,value:this.MOT_V2};this.send(t,r,n,o)}catch(e){d.debug(e.message)}}sendCompromisedPasswordNotificationClicked(e){const t=this.TELEMETRY_CATEGORY.COMPROMISED_PASSWORDS,r=this.actionType.COMPROMISED_PASSWORDS.CPEVENTS,n=this.COMPROMISED_PASSWORD_PAYLOAD_CONSTANTS.NOTIFICATION_CLICKED,o={key:y,value:`${this.MOT_V2}_${e}`};this.send(t,r,n,o)}sendCompromisedPasswordNotificationShown(e){const t=this.TELEMETRY_CATEGORY.COMPROMISED_PASSWORDS,r=this.actionType.COMPROMISED_PASSWORDS.CPEVENTS,n=this.COMPROMISED_PASSWORD_PAYLOAD_CONSTANTS.NOTIFICATION_SHOWN,o={key:y,value:`${this.MOT_V2}_${e}`};this.send(t,r,n,o)}sendCompromisedPasswordDetected(){const e=this.TELEMETRY_CATEGORY.COMPROMISED_PASSWORDS,t=this.actionType.COMPROMISED_PASSWORDS.CPEVENTS,r=this.COMPROMISED_PASSWORD_PAYLOAD_CONSTANTS.COMPROMISED_PASSWORD_DETECTED,n={key:y,value:this.MOT_V2};this.send(e,t,r,n)}sendVaultOpenFromCP(e=null){const t=this.TELEMETRY_CATEGORY.COMPROMISED_PASSWORDS,r=this.actionType.COMPROMISED_PASSWORDS.OPENVAULTFROMCP,n=this.COMPROMISED_PASSWORD_PAYLOAD_CONSTANTS.VAULT_OPEN_SUCCCESS;p.isObject(e)&&E(null==e?void 0:e.key)&&E(null==e?void 0:e.value)?this.send(t,r,n,e):this.send(t,r,n)}sendPasswordReplacedMOT(){const e=this.TELEMETRY_CATEGORY.COMPROMISED_PASSWORDS,t=this.actionType.COMPROMISED_PASSWORDS.REPLACEPASSWORDSINMOT,r=this.COMPROMISED_PASSWORD_PAYLOAD_CONSTANTS.PASSWORD_REPLACED_SUCCESS,n={key:y,value:this.MOT_V2};this.send(e,t,r,n)}sendHaveIBeenPwnedlickedCP(){const e=this.TELEMETRY_CATEGORY.COMPROMISED_PASSWORDS,t=this.actionType.COMPROMISED_PASSWORDS.LEARNMORECLICKED,r=this.COMPROMISED_PASSWORD_PAYLOAD_CONSTANTS.LERAN_MORE_CLICKED,n={key:y,value:this.MOT_V2};this.send(e,t,r,n)}sendNotificationDismissedCp(){const e=this.TELEMETRY_CATEGORY.COMPROMISED_PASSWORDS,t=this.actionType.COMPROMISED_PASSWORDS.NOTIFICATIONDISMISSED,r=this.COMPROMISED_PASSWORD_PAYLOAD_CONSTANTS.NOTIFICATION_DISMISSED,n={key:y,value:this.MOT_V2};this.send(e,t,r,n)}sendAutoNACreateSuccessMOTFlow(){const e=this.TELEMETRY_CATEGORY.MOT_ONBOARDING_FLOW,t=this.actionType.MOT_ONBOARDING_FLOW.NACREATOR,r=this.MOT_ONBOARDING_FLOW_CONSTANTS.AUTO_CREATE_SUCCESS;this.send(e,t,r)}sendAutoNACreateFailureMOTFlow(e){const t=this.TELEMETRY_CATEGORY.MOT_ONBOARDING_FLOW,r=this.actionType.MOT_ONBOARDING_FLOW.NACREATOR,n=`${this.MOT_ONBOARDING_FLOW_CONSTANTS.AUTO_CREATE_FAILED}_errorcode_${e}`;this.send(t,r,n)}sendNAExistsMOTFlow(){const e=this.TELEMETRY_CATEGORY.MOT_ONBOARDING_FLOW,t=this.actionType.MOT_ONBOARDING_FLOW.NACREATOR,r=this.MOT_ONBOARDING_FLOW_CONSTANTS.NA_EXISTS;this.send(e,t,r)}sendCloseTabMOTFlow(e){const t=this.TELEMETRY_CATEGORY.MOT_ONBOARDING_FLOW,r=this.actionType.MOT_ONBOARDING_FLOW.TABCLOSED,n=e;this.send(t,r,n)}sendLearnMoreClickMOTFlow(){const e=this.TELEMETRY_CATEGORY.MOT_ONBOARDING_FLOW,t=this.actionType.MOT_ONBOARDING_FLOW.CLICK,r=this.MOT_ONBOARDING_FLOW_CONSTANTS.LEARN_MORE;this.send(e,t,r)}sendSeamlessOnboardTelemetry(e,t,r=null,n=null){const o=this.TELEMETRY_CATEGORY.SEAMLESS_ONBOARDING;let i=t;E(r)&&(i=i+this.ERROR+r),E(n)&&(i=i+this.SESSION+n),this.send(o,e,i)}sendImportToolFailure(e,t,r){if(!p.isString(r)||!p.isString(e)||!p.isString(t))return;const n=this.TELEMETRY_CATEGORY.IMPORT_PASSWORD,o=this.actionType.IMPORT_PASSWORD.ERROR,i=`${e}-${t}-${r}`;this.send(n,o,i)}sendCloseVaultStatus(e,t){if(!e||!t)return;const r=this.TELEMETRY_CATEGORY.CLOSE_VAULT_FLOW;this.send(r,e,t)}sendOnboardPageSource(e){if(_(e))return;const t=h.parameters,r={[t.HIT_TYPE]:h.HIT_TYPE.EVENT,[t.CATEGORY]:this.TELEMETRY_CATEGORY.DELAY_ONBOARDING_FLOW,[t.ACTION]:this.actionType.DELAY_ONBOARDING_FLOW.ONBOARD_PAGE_SHOWN,[t.LABEL]:e};i.default.telemetry.sendOneTimeTelemetry(this.TELEMETRY_NAME_CONSTANTS.EDGE_ONBOARD_SOURCE,r)}sendRecoveryKeyCreationSuccess(e){const t="onboarding"===e?this.TELEMETRY_CATEGORY.ONBOARDING_RECOVERY:"recovery"===e?this.TELEMETRY_CATEGORY.RECOVERY:this.TELEMETRY_CATEGORY.RESET,r=this.actionType.RECOVERY.KEY_CREATION,n=this.RECOVERY_CONSTANTS.KEY_CREATION_SUCCESS;this.send(t,r,n)}sendUseRecoveryKeySuccess(){const e=this.TELEMETRY_CATEGORY.RECOVERY,t=this.actionType.RECOVERY.KEY_USED,r=this.RECOVERY_CONSTANTS.KEY_USED_SUCCESS;this.send(e,t,r)}sendUseRecoveryKeyError(e){const t=this.TELEMETRY_CATEGORY.RECOVERY,r=this.actionType.RECOVERY.KEY_USED,n=`${this.RECOVERY_CONSTANTS.KEY_USED_ERROR}_errorcode_${e}`;this.send(t,r,n)}resetRecoveryFailure(e,t){const r=this.TELEMETRY_CATEGORY.RECOVERY,n=this.actionType.IDSVAULT.RESETVAULT,o=`${this.IDSVAULT_LABEL.FAILEDTORESET}(additionalInfo-${t},state-${e})`;this.send(r,n,o)}};r.default=T},{"../../../common/constants":13,"../extension/extensionInfo":32,"../globalSettings":36,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants/uiConstants":9,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,"feature/partnerSupport/partnerParams":96}],56:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("feature/wax/fillCaptureHandler")),a=n(e("./extension/extension")),u=e("../../message-adapter/background"),l=n(e("common/constants/uiConstants"));const c=[u.MESSAGES.POPUP_MESSAGES.POPUP_INIT,u.MESSAGES.POPUP_MESSAGES.POPUP_LOGIN_ITEM_SELECTED,u.MESSAGES.POPUP_MESSAGES.POPUP_CARD_ITEM_SELECTED,u.MESSAGES.POPUP_MESSAGES.POPUP_GENERATE_PASSWORD_CLICKED,u.MESSAGES.POPUP_MESSAGES.POPUP_LOGIN_USERNAME_SELECTED,u.MESSAGES.POPUP_MESSAGES.POPUP_CLOSE,u.MESSAGES.POPUP_MESSAGES.POPUP_GENERATE_PASSWORD_USE_SELECTED,l.default.AUTO_PASSWORD_CHANGER_OVERLAY.MESSAGES.OVERLAY_INIT,l.default.AUTO_PASSWORD_CHANGER_OVERLAY.MESSAGES.OVERLAY_HIDE,u.MESSAGES.COMPROMISED_PASSWORD_RIBBON.RIBBON_HIDE,u.MESSAGES.COMPROMISED_PASSWORD_RIBBON.RIBBON_SHOW,u.MESSAGES.POPUP_MESSAGES.UPDATE_POPUP_SIZE];const d=new class{constructor(){(0,o.default)(this,"setBrowserActionIcon",(e=>{let t;t=e?a.default.getIconOnPath():a.default.getIconOffPath(),i.default.extensionAdapter.setBrowserIcon({path:t})})),(0,o.default)(this,"setBrowserActionAlertIcon",(()=>{const e=a.default.getAlertIconPath();i.default.extensionAdapter.setBrowserIcon({path:e})})),(0,o.default)(this,"handleMessage",((e,t,r)=>{if(c.indexOf(e.id)>-1)return e.id===u.MESSAGES.POPUP_MESSAGES.POPUP_LOGIN_ITEM_SELECTED&&s.default.addAutFilledItemGuid(r.id,e.payload.itemID),i.default.extensionAdapter.sendMessageToTab(r,e,(e=>{t(e)})),!0})),(0,o.default)(this,"init",(()=>{i.default.extensionAdapter.addMessageListener(this.handleMessage)}))}};r.default=d},{"../../message-adapter/background":134,"./extension/extension":31,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants/uiConstants":9,"feature/wax/fillCaptureHandler":119}],57:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=z(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),a=n(e("common/constants")),u=n(e("feature/security-dashboard/securityDashboard")),l=n(e("feature/nudge/nudgeController")),c=n(e("feature/unlockManager/vuSettings")),d=n(e("feature/unlockManager/vaultUnlockManager")),f=n(e("feature/compromised-password/compromisedPasswordHelper")),p=e("./../../../redux-core/features/userInfo/userInfoSlice"),h=n(e("feature/compromised-password/loginInfoManager")),_=n(e("feature/compromised-password/motFlowManager")),E=e("common/passwordGenerator"),g=n(e("feature/wax/fillCaptureHandler")),m=e("core/background/commonUtilsBG"),y=e("./../../../redux-core/features/logins/loginsSlice"),S=e("common/global.types"),T=n(e("telemetry/background")),A=e("telemetry/constants"),b=n(e("feature/wax/waxConstants")),O=e("../../message-adapter/background"),I=n(e("./session")),v=n(e("./dashboardUIController")),N=n(e("./signin")),R=n(e("./uiService")),C=n(e("./telemetry/heartBeatWrapper")),D=n(e("./globalSettings")),w=n(e("./reporter")),L=n(e("./store/vaultActionsStore")),P=n(e("./telemetry/telemetryWrapper")),M=n(e("./store/userInfoStore")),U=n(e("./store/telemetryInfoStore")),j=n(e("./pwmSessionSettings")),k=n(e("./vaultItemCountHelper")),x=n(e("./featurePromotion")),F=e("telemetry/background/helper/TelemetryHelper"),B=e("telemetry/types/vaultUnlockAndLockTelemetry.types"),G=e("telemetry/types"),V=e("telemetry/types/lifecycleTelemetry.types"),H=e("telemetry/types/userAccountTelemetry.types"),W=n(e("./firebaseServiceWorker")),Y=n(e("feature/autoUnlock/autoUnlock")),K=n(e("./../../../vault/tagHelper"));function z(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(z=function(e){return e?r:t})(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{WAX_ACTIONS:X,FILL_CAPTURE_HANDLER:J}=a.default.SESSION_STORAGE_KEYS,{VAULT_STATE:Z,ENFORCE_UNIQUE_VAULT_PASSWORD_CHECK_STATUS:{IS_COMPROMISED:Q,EXACTLY_MATCHES_VAULT_PASSWORD:ee,EXACTLY_MATCHES_SSO_PASSWORD:te,CONTAINS_SSO_PASSWORD:re,EXACTLY_MATCHES_SSO_USERNAME:ne,CONTAINS_SSO_USERNAME:oe,CHECK_PASSED:ie}}=a.default,{constants:{httpStatusCodes:se},logger:ae,extensionAdapter:ue,utils:{isNil:le,isntNil:ce}}=i.default,{VAULT_ACTION:de}=a.default.SESSION_STORAGE_KEYS;const fe=new class{getObfuscationKey(){var e;return null!==(e=j.default.get(de.OBFUSCATION_KEY))&&void 0!==e?e:""}setObfuscationKey(e){j.default.set(de.OBFUSCATION_KEY,e)}getTabURL(){var e;return null!==(e=j.default.get(de.TAB_URL))&&void 0!==e?e:""}setTabURL(e){j.default.set(de.TAB_URL,e)}setChangePasswordFlow(e){j.default.set(de.CHANGE_PASSWORD_FLOW,e)}getChangePasswordFlow(){var e;return null!==(e=j.default.get(de.CHANGE_PASSWORD_FLOW))&&void 0!==e&&e}setRecoveryKeyUsedForCreateVault(e){j.default.set(de.RECOVERY_KEY_USED_CREATE_VAULT_FLOW,e)}getRecoveryKeyUsedForCreateVault(){var e;return null!==(e=j.default.get(de.RECOVERY_KEY_USED_CREATE_VAULT_FLOW))&&void 0!==e&&e}setRecoveryInfoFound(e){j.default.set(de.RECOVERY_INFO_FOUND,e)}getRecoveryInfoFound(){var e;return null!==(e=j.default.get(de.RECOVERY_INFO_FOUND))&&void 0!==e&&e}constructor(){(0,o.default)(this,"browserActionOnClickListener",(async()=>{U.default.setTelemetryInfo({appName:S.AppName.ONBOARD_SETUP,contextScreen:V.AppOpenContextScreen.ExtensionIcon,contextAction:V.AppOpenContextActionExtensionIcon.ExtensionIconClick,canSendAppOpenEvent:!0});if(await this.handlePopupIfSignedIn()){const{onboardingStep:e}=this.getOnboardingStatus();e===a.default.ONBOARDING.STEPS.CREATE_VAULT?N.default.openLoginFlow({useNudgePageForLogin:!0,isDeleteVaultFlow:!1}):v.default.openDashboardUI(a.default.ONBOARDING.URLS[e])}else l.default.openNudgeTab()})),(0,o.default)(this,"onTabClosed",(e=>{var t;N.default.onTabClosed(e,this.getTabURL()),null===(t=this.store)||void 0===t||t.dispatch((0,p.setInfo)({id:"waxInfo",value:{isPasswordRequiredFormFill:!1}}))})),(0,o.default)(this,"getRecoveryVaultFlowType",(()=>!0===D.default.getIsVaultDeleted()?a.default.RECOVERY_FLOW_TYPE.RESET_VAULT:D.default.getPromoteRecoveryStep()!==a.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.DEFAULT?a.default.RECOVERY_FLOW_TYPE.PROMOTION:a.default.RECOVERY_FLOW_TYPE.CREATE_VAULT)),window.addEventListener(a.default.IDSAFE_CREATED_TAB,(({detail:{tabUrl:e,tabId:t}})=>{this.setTabURL(e)}))}canShowOnboardingScreens(){return D.default.getIsOnboarding()||D.default.getIsVaultDeleted()}async getVaultPasswordMatchStatusString(e){let t;return await new Promise((r=>{s.vaultKeys.compareWithVaultPassword(e,(e=>{e&&(t=ee),r(!0)}))})),t}getSSOMatchStatusString(e,t,r){const n=(0,m.getLowerCase)(e),o=(0,m.getLowerCase)(t),i=(0,m.getUsernameForValidation)(r);let s=ie;return n.includes(o)?s=n===o?te:re:n.includes(i)&&(s=n===i?ne:oe),s}isLoginInVaultMatchedWithSSO(e,t,r=!1){const{userInfo:n}=(0,p.selectUserInfo)(this.store.getState());if(n.isVaultLocked)return null;const o=(0,y.selectAllLogins)(this.store.getState());let i=!1,s=ie;for(let r=0;r<o.length;r++){const n=o[r].username,a=o[r].password;if(o[r].loginURL.includes(e)&&ce(n)&&ce(a)&&(s=this.getSSOMatchStatusString(t,a,n),s!==ie)){i=!0;break}}return r?s:i}handleMatchSSOVaultPasswordFlow(e){e||v.default.openDashboardUI(a.default.DASHBOARD_INDEX_URL),f.default.setMatchSSOVaultPasswordFlowDetected(!0),e||M.default.setUserInfo()}getOnboardingStatus(){return{isOnboarding:D.default.getIsOnboarding(),onboardingStep:D.default.getOnboardingStep()}}async handlePopupIfSignedIn(){const e=await N.default.isNASignedIn();if(e){var t;M.default.setUserInfo();const{userInfo:e}=(0,p.selectUserInfo)(null===(t=this.store)||void 0===t?void 0:t.getState()),{isOnboarding:r,onboardingStep:n}=this.getOnboardingStatus(),o=n===a.default.ONBOARDING.STEPS.CREATE_VAULT;(!r&&!D.default.getIsVaultDeleted()||!o&&e.isVaultLocked&&!D.default.getIsVaultDeleted())&&ue.setPopupHandler(a.default.POPUP_INDEX_URL)}return e}async shouldOpenSettingsOnUnlock(){if(D.default.getAccountRecoveryCompleted()){const e=await s.recoveryManager.fetchRecoveryInfo(),t=i.default.utils.isntNil(e.getModifiedAt());return D.default.setAccountRecoveryCompleted(!1),!t}return!1}handlePostRecoveryPromotion(){D.default.setOnboardingStep(a.default.ONBOARDING.STEPS.ONBOARDED),D.default.getWasOnboardedPriorToRecoveryPromo()?P.default.sendTelemetry(P.default.TELEMETRY_CATEGORY.FEATURE_PROMOTION,P.default.actionType.FEATURE_PROMOTION.RECOVERY_FEATURE_PROMOTION_COMPLETED,P.default.FEATURE_PROMOTION_LABEL.RECOVERYFEATURE_ONBOARDED_BEFORE):(P.default.sendTelemetry(P.default.TELEMETRY_CATEGORY.FEATURE_PROMOTION,P.default.actionType.FEATURE_PROMOTION.RECOVERY_FEATURE_PROMOTION_COMPLETED,P.default.FEATURE_PROMOTION_LABEL.RECOVERYFEATURE_ONBOARDED_FIRST_TIME),T.default.track(A.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_COMPLETED))}postOnboardingSuccess(){ue.setPopupHandler(a.default.POPUP_INDEX_URL),D.default.setIsVaultDeleted(!1),ue.getActiveTab((e=>{const t=ue.getTabID(e);D.default.setIsOnboarding(!1),D.default.getPromoteRecoveryStep()===a.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.STARTED?this.handlePostRecoveryPromotion():(D.default.setOnboardingStep(a.default.ONBOARDING.STEPS.ONBOARDED),T.default.track(A.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_COMPLETED)),D.default.setPromoteRecoveryStep(a.default.FEATURE_PROMOTION.RECOVERY_FEATURE.STEPS.COMPLETED),ue.updateTabUrl(t,a.default.DASHBOARD_INDEX_URL),M.default.setUserInfo(),this.showPasswordlessVaultUnlockNotification()}))}async matchesWithSSOLoginInfo(e){const t=g.default.getLoginInfo(J.SSO_LOGIN_INFO),{userInfo:{isVaultLocked:r},nslLogin:n}=(0,p.selectUserInfo)(this.store.getState()),o=h.default.getObfuscationKey();let s=ie;if(ce(t)&&ce(t.username)&&ce(t.password))s=this.getSSOMatchStatusString(e,t.password,t.username);else if(r){if(n&&(0,m.hasValue)(n.password)&&(0,m.hasValue)(n.username)&&"string"==typeof o){const t=i.default.utils.obfuscatePassword(n.password,o);s=this.getSSOMatchStatusString(e,t,n.username)}}else{const t=(0,m.getAuthLoginType)(),r=(0,m.getBaseURLForAuthLogin)(t);ce(r)&&(s=this.isLoginInVaultMatchedWithSSO(r,e,!0))}var a;r||(s=null!==(a=await this.getVaultPasswordMatchStatusString(e))&&void 0!==a?a:s);return s}validateOpenVaultErrorCode(e,t=!0){var r;let n,o;const i=e=>{_.default.showSystemErrorScreen(),w.default.showGenericErrorNotification(),N.default.removeSignInTab(),ae.error(`Failed to unlock the vault error code: ${null==e?void 0:e.getAdditionalInfo()}`)};try{switch(null==e?void 0:e.getState()){case Z.NOT_LOGGED_IN:case Z.INTERNAL_ERROR:i(e);break;case Z.O2_RATE_LIMITED_ERROR:o=se.DATASTORE_RATE_LIMITED,i(e);break;case Z.VAULT_NOT_FOUND:o=se.NOT_FOUND,i(e);break;case Z.NETWORK_ERROR:w.default.showGenericErrorNotification(),N.default.removeSignInTab(),_.default.showSystemErrorScreen();break;case Z.SSO_UNAUTHORIZED:o=se.UNAUTHORIZED,w.default.logoutCheckBasedOnSSOToken().then((()=>{_.default.showSystemErrorScreen()}));break;case Z.INTERNET_UNAVAILABLE:o=Z.INTERNET_UNAVAILABLE,t&&(w.default.showGenericErrorNotification(),N.default.removeSignInTab(),_.default.showSystemErrorScreen());break;case Z.CLIENT_UNAUTHORIZED:o=se.UNAUTHORIZED;break;default:ae.error(`Unhandled error code Info ${null==e?void 0:e.getAdditionalInfo()}`)}n=null==e?void 0:e.getAdditionalInfo()}catch(e){ae.error(`Error while validating the error code ${e}`)}return[n,null===(r=o)||void 0===r?void 0:r.toString()]}initPopupHandler(){this.handlePopupIfSignedIn(),i.default.extensionAdapter.addBrowserActionOnClickListener(this.browserActionOnClickListener)}showPasswordlessVaultUnlockNotification(){!1===D.default.getOpenVaultUI()&&c.default.getUnlockNotificationCount()>0&&!1===c.default.getIsSplashScreenShown()&&!D.default.getIsOnboarding()&&d.default.showPasswordlessVaultUnlockNotification(a.default.VAULT_UNLOCK.RESPONSE_STATUS.UNLOCK_WELCOME)}initMessengerSubscription(){i.default.extensionAdapter.addTabRemovedEventListener(this.onTabClosed),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.UNLOCK_VAULT,(async({password:e,openVaultUI:t},r,n)=>{const o=i.default.utils.obfuscatePassword(e,this.getObfuscationKey()),s=await I.default.openVault(o);if(s.status){D.default.setOpenVaultUI(t),setTimeout((async()=>{const e=this.canShowOnboardingScreens();if(v.default.getOverrideToUrl())v.default.openDashboardUI(v.default.getOverrideToUrl()),v.default.setOverrideToUrl(null);else if(e){ue.setPopupHandler("");const e=D.default.getOnboardingStep(),t=null==n?void 0:n.tab,r=ue.getTabID(t);ce(r)?(v.default.setTabID(r),v.default.openDashboardUI(a.default.ONBOARDING.URLS[e])):ue.getActiveTab((t=>{v.default.setTabID(ue.getTabID(t)),v.default.openDashboardUI(a.default.ONBOARDING.URLS[e])}))}else(t||this.getChangePasswordFlow()||this.getRecoveryKeyUsedForCreateVault())&&v.default.openDashboardUI(a.default.DASHBOARD_INDEX_URL);e||N.default.removeSignInTab(O.MESSAGES.DASHBOARD_MESSAGES.UNLOCK_VAULT)}),1e3);const e=D.default.getIsOnboarding();if(!0===await f.default.isPasswordCompromised(o))e||v.default.openDashboardUI(a.default.DASHBOARD_INDEX_URL),f.default.setCompromisedVaultPasswordDetected(!0),e||M.default.setUserInfo();else{const t=g.default.getLoginInfo(a.default.SESSION_STORAGE_KEYS.FILL_CAPTURE_HANDLER.SSO_LOGIN_INFO),r=(0,m.getLowerCase)(o);if(le(t)||ce(t.username)&&le(t.password)){const t=(0,m.getAuthLoginType)(),n=(0,m.getBaseURLForAuthLogin)(t);ce(n)&&this.isLoginInVaultMatchedWithSSO(n,r)&&this.handleMatchSSOVaultPasswordFlow(e)}else ce(t.username)&&ce(t.password)&&(r.includes((0,m.getUsernameForValidation)(t.username))||r.includes((0,m.getLowerCase)(t.password)))&&this.handleMatchSSOVaultPasswordFlow(e);if(!1===f.default.isMatchSSOVaultPasswordFlowDetected()){!0===await x.default.shouldPromoteRecoveryFeature()&&(P.default.sendTelemetry(P.default.TELEMETRY_CATEGORY.FEATURE_PROMOTION,P.default.actionType.FEATURE_PROMOTION.RECOVERY_FEATURE_PROMOTION_STARTED,P.default.FEATURE_PROMOTION_LABEL.RECOVERYFEATURE_VAULT_UNLOCK),await x.default.promoteRecoveryAction())}}T.default.track(A.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_COMPLETED,{unlockCompleted:!0,touchPoint:S.TouchPoint.VAULT_UI,method:B.VaultUnlockMethod.VaultPassword},S.AppName.ONBOARD_SETUP),this.showPasswordlessVaultUnlockNotification(),C.default.startActiveUserHeartBeat(),u.default.checkAndSendVaultStatusPing(),await Y.default.setAutoUnlockKeys()}else if(!1===s.maxRetryCountExceed){const[e,t]=this.validateOpenVaultErrorCode(s.state);T.default.track(A.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED,{touchPoint:S.TouchPoint.VAULT_UI,method:B.VaultUnlockMethod.VaultPassword,cause:e,error:t})}r&&r(s)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.VAULT_DATA,((e,t)=>{this.setObfuscationKey(i.default.utils.createNewGuid());const r={obfuscationKey:this.getObfuscationKey(),passwordHint:N.default.getPasswordHint(),openVaultUI:D.default.getOpenVaultUI(),isCompromisedPasswordFlowInProgress:f.default.isCompromisedPasswordFlowInProgress()};t&&t(r)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.OPEN_RECOVERY,(async(e,t)=>{const r=await I.default.openRecovery(e);r.state.state===a.default.VAULT_STATE.VAULT_SYNCED?(this.setRecoveryKeyUsedForCreateVault(!0),P.default.sendUseRecoveryKeySuccess(),T.default.track(A.TELEMETRY_ACTIONS.RECOVERY.RECOVERY_KEY_SUCCESS,{touchPoint:S.TouchPoint.VAULT_UI}),Y.default.removeAutoUnlockKeys()):(P.default.sendUseRecoveryKeyError(r.state.additionalInfo),T.default.track(A.TELEMETRY_ACTIONS.RECOVERY.RECOVERY_KEY_ERROR,{cause:r.state.additionalInfo,touchPoint:S.TouchPoint.VAULT_UI})),null==t||t(r.state)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.CANCEL_RECOVERY_FLOW,(async()=>{await I.default.closeRecovery()})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.ENFORCE_VAULT_PASSWORD_UNIQUENESS_CHECK,(async(e,t)=>{if(t){const r=i.default.utils.obfuscatePassword(e,this.getObfuscationKey());if(await f.default.isPasswordCompromised(r))return void t(Q);t(await this.matchesWithSSOLoginInfo(r))}})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.CREATE_VAULT_SCREEN_INIT,((e,t)=>{this.setObfuscationKey(i.default.utils.createNewGuid());const r=(0,m.getAuthLoginType)()!==b.default.AUTH_NSL,n={obfuscationKey:this.getObfuscationKey(),isNonNAFlow:r};t&&t(n)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.GET_NSL_CREDENTIALS,(async(e,t)=>{var r;const{nslLogin:n}=(0,p.selectUserInfo)(null===(r=this.store)||void 0===r?void 0:r.getState());if(t){const e=h.default.getObfuscationKey();if("string"!=typeof e||""===e)return;const r=null==n?void 0:n.password;if("string"!=typeof r||""===r)return;const o=i.default.utils.obfuscatePassword(r,e);t($($({},n),{},{password:o}))}})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.GET_PASSWORD_HINT,(async(e,t)=>{if(le(N.default.getPasswordHint())){const{passwordHint:e}=await s.vaultManager.fetchVaultInfo();N.default.setPasswordHint(e)}null==t||t(N.default.getPasswordHint())})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.FETCH_RECOVERY_INFO,(async(e,t)=>{const r=s.recoveryManager.vaultKeys.isLocked();await I.default.closeRecovery();const n=await s.recoveryManager.fetchRecoveryInfo();let o=null;i.default.utils.isntNil(n.getModifiedAt())&&(o={downloadDate:1e3*n.getModifiedAt(),sourceType:n.getSourceType(),sourceID:n.getSourceID()}),r&&await I.default.closeRecovery(),null==t||t(o)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.IS_USER_SIGNED_IN,(async(e,t)=>{t&&t(await N.default.isNASignedIn())})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.GENERATE_RECOVERY,(async(e,t)=>{const r=(0,E.createRecoveryKey)();(await s.recoveryManager.fetchRecoveryInfo()).state.getState()===a.default.VAULT_STATE.VAULT_EXISTS&&await I.default.deleteRecovery();const n=await I.default.createRecovery(r);if(n.state!==a.default.VAULT_STATE.CREATE_VAULT_SUCCESS)return void(null==t||t({state:n,recovery:null}));const o=await I.default.fetchAndPopulateStoreWithRecoveryInfo();P.default.sendRecoveryKeyCreationSuccess(e.source);const i={downloadDate:1e3*o.getModifiedAt(),sourceType:o.getSourceType(),sourceID:o.getSourceID()};ce(o.getModifiedAt())&&this.setRecoveryInfoFound(!0),await I.default.closeRecovery(),null==t||t({state:n,recovery:{info:i,key:r}})})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.RECOVERY_RESET_PASSWORD,(async(e,t)=>{const r=s.recoveryManager.getKeysForSeamlessUnlock();if(null==r)return;const{state:n}=await s.vaultManager.seamlessOpenVault(r);if(n.state!==a.default.VAULT_STATE.VAULT_SYNCED)return void(null==t||t(n));const o=await I.default.resetVaultPassword(r,e.newPassword,e.newHint);if(o.state===a.default.VAULT_STATE.CHANGE_VAULT_PASSWORD_SUCCESS){try{await s.vaultManager.closeVault()}catch(e){ae.error(e)}await s.recoveryManager.deleteRecovery(),await s.recoveryManager.closeRecovery(),s.appNode.reset(),s.idscNode.reset(),s.recoveryNode.reset(),s.recoveryIdscNode.reset(),D.default.setAccountRecoveryCompleted(!0),null==t||t(o)}else null==t||t(o)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.VERIFY_PASSWORD,((e,t)=>{e||null==t||t(!1);const r=i.default.utils.obfuscatePassword(e,this.getObfuscationKey());s.vaultKeys.compareWithVaultPassword(r,(e=>{t&&t(e)}))})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.OPEN_DASHBOARD_UI,(e=>{U.default.setTelemetryInfo({appName:S.AppName.DASHBOARD,contextScreen:e.contextScreen,contextAction:e.contextAction,canSendAppOpenEvent:!0}),v.default.openDashboardUI(e.extensionUrl)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.SET_AUTO_UNLOCK,(e=>{c.default.setAutoUnlockSettings({enabled:e.enabled,days:e.days}),e.enabled?Y.default.setAutoUnlockKeys():Y.default.removeAutoUnlockKeys()})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.GET_AUTO_UNLOCK_SETTING,((e,t)=>{t&&t(c.default.getAutoUnlockSettings())})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.OPEN_WEB_APP,(e=>{U.default.setTelemetryInfo({appName:S.AppName.DASHBOARD,contextScreen:e.contextScreen,contextAction:e.contextAction,canSendAppOpenEvent:!0}),v.default.openDashboardUI(e.extensionUrl,!0)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.RESET_PASSWORD_ATTEMPT,(()=>{I.default.resetPasswordRetryCount()})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.PREVENT_DIRECT_NAVIGATION,((e,t,r)=>{r&&v.default.validateUiTab(r.tab)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.PREVENT_DIRECT_NAVIGATION_ONBOARDING_TAB,((e,t,r)=>{r&&N.default.validateOnboardingTab(r.tab,this.getTabURL())})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.UPDATE_ONBOARDING_TAB_URL,(e=>{if(e){const t=ue.getExtensionURL(e.url);N.default.updateTabUrlIfExistsElseCreate(t)}})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.GET_ACTIVE_TAB_DOMAIN,((e,t)=>{var r;return!!t&&(v.default.validateAndExtractCurrentURL(!!e&&(null!==(r=e.getSubdomain)&&void 0!==r&&r),t),!0)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.GET_ACTIVE_TAB_URL,((e,t)=>{t&&t(j.default.get(X.SENDER_URL))})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.IS_TAG_UPDATE,((e,t)=>{if(t){const{tagGuid:r}=e;K.default.isTagUpdate(r).then((e=>{t(e)}))}})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.OPEN_VAULT_CLICKED,((e,t,r)=>{var n;!0===(null==e?void 0:e.closeTab)&&(ue.closeTab(null==r||null===(n=r.tab)||void 0===n?void 0:n.id),N.default.setIsUnlockTabClosedByExtension(!0));!0===(null==e?void 0:e.fromPopover)&&U.default.setTelemetryInfo({appName:S.AppName.ONBOARD_SETUP,contextScreen:V.AppOpenContextScreen.ExtensionPopover,contextAction:V.AppOpenContextActionExtensionPopover.UnlockButton,canSendAppOpenEvent:!0}),N.default.setIsDeleteVaultFlow(!1),d.default.setAutomaticPasswordlessVaultUnlockRequest(!1),N.default.openLoginFlow({useNudgePageForLogin:!0,isDeleteVaultFlow:!1}),t&&t(!0)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.CLOSE_VAULT_POST_RECOVERY,(async(e,t)=>{I.default.closeVault(!0,{context:G.LockContext.WebApp,type:B.VaultLockType.PostRecovery,touchPoint:S.TouchPoint.VAULT_UI}),null==t||t(!0)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.FORCE_SYNC,(async(e,t)=>{const r=await s.vaultManager.forceSync();L.default.loadVaultData(),w.default.reportVaultState(r.state),t&&t(r)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.CALL_CHANGE_VAULT_PASSWORD_API,(async(e,t,r)=>{const n=await s.recoveryManager.fetchRecoveryInfo();ce(n.getModifiedAt())?this.setRecoveryInfoFound(!0):this.setRecoveryInfoFound(!1);const o=await I.default.changeVaultPassword(e.currentPassword,e.newPassword,e.newHint);var i;(u.default.checkAndSendVaultStatusPing(),o.state!==Z.CHANGE_VAULT_PASSWORD_SUCCESS)?(w.default.showGenericErrorNotification(),P.default.changeVaultPasswordFailure(o.state,o.additionalInfo),ue.closeTab(null==r||null===(i=r.tab)||void 0===i?void 0:i.id),N.default.setIsUnlockTabClosedByExtension(!0),this.setChangePasswordFlow(!1)):(P.default.changeVaultPasswordSuccess(),N.default.setPasswordHint(e.newHint),I.default.closeVault(!0,{context:G.LockContext.WebApp,type:B.VaultLockType.ChangeVaultPassword,touchPoint:S.TouchPoint.VAULT_UI}),this.setChangePasswordFlow(!0),Y.default.removeAutoUnlockKeys());null==t||t(o)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.CALL_CREATE_VAULT_API,(async(e,t,r)=>{const n=await I.default.createVault(e.password,e.hint);if(n.getState()===a.default.VAULT_STATE.CREATE_VAULT_SUCCESS){if(this.canShowOnboardingScreens()){const e=await s.recoveryManager.fetchRecoveryInfo();i.default.utils.isntNil(e.getModifiedAt())?D.default.getIsVaultDeleted()&&await(0,F.isPWMSetAsDefault)()?D.default.setOnboardingStep(a.default.ONBOARDING.STEPS.PIN_EXTENSION):D.default.setOnboardingStep(a.default.ONBOARDING.STEPS.SET_DEFAULT):D.default.setOnboardingStep(a.default.ONBOARDING.STEPS.DOWNLOAD_RECOVERY)}i.default.extensionAdapter.isManifestV3Extension()&&(await W.default.initialize(),I.default.registerForDatastoreUpdates()),C.default.startActiveUserHeartBeat(),u.default.checkAndSendVaultStatusPing(),I.default.handleUnlockVaultSuccess(),T.default.track(A.TELEMETRY_ACTIONS.ONBOARDING.CREATE_VAULT_COMPLETED,{touchPoint:S.TouchPoint.VAULT_UI}),U.default.setTelemetryInfo({appName:S.AppName.DASHBOARD,contextScreen:V.AppOpenContextScreen.VaultCreated,canSendAppOpenEvent:!1}),P.default.createVaultSuccess(),N.default.setPasswordHint(e.hint),await Y.default.setAutoUnlockKeys()}else{var o;w.default.showGenericErrorNotification(),ue.closeTab(null==r||null===(o=r.tab)||void 0===o?void 0:o.id),T.default.track(A.TELEMETRY_ACTIONS.ONBOARDING.CREATE_VAULT_FAILED),P.default.createVaultFailure(n.getState(),n.getAdditionalInfo())}return null==t||t(n),!0})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.CALL_DELETE_VAULT_API,(async(e,t)=>{const r=await I.default.deleteVault();if(N.default.setIsDeleteVaultFlow(!1),r.getState()===Z.DELETE_VAULT_SUCCESS){L.default.resetVaultData(),P.default.resetVaultSuccess(),D.default.setIsVaultDeleted(!0);const e=await s.recoveryManager.deleteRecovery();e.getState()!==Z.DELETE_VAULT_SUCCESS&&P.default.resetRecoveryFailure(`${e.getState()}`,e.getAdditionalInfo()),i.default.utils.isntNil(c.default.getRegisteredDevice())&&c.default.removeNAGuidSettings(),C.default.stopActiveUserHeartBeat(),Y.default.removeAutoUnlockKeys()}else w.default.showGenericErrorNotification(),r.state===Z.NETWORK_ERROR&&ue.getActiveTab((e=>{const t=ue.getTabID(e);ue.closeTab(t)}));null==t||t(r)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.LAUNCH_DELETE_VAULT_FLOW,((e,t,r)=>{I.default.logoutNA((t=>{t?(C.default.stopActiveUserHeartBeat(),R.default.setBrowserActionIcon(!1),N.default.resetContainer(),N.default.closeExistingIDSTabs(),i.default.extensionAdapter.setPopupHandler(""),N.default.openLoginFlow({isDeleteVaultFlow:!0}),U.default.setTelemetryInfo({appName:S.AppName.ONBOARD_SETUP,contextScreen:e.context,canSendAppOpenEvent:!1})):i.default.extensionAdapter.closeTab(null==r?void 0:r.tabID)}),!0,{type:H.SignOutType.VaultDeletion}),t(!0)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.VAULT_CREATION,((e,t,r)=>(ue.getActiveTab((e=>{var t;f.default.isCompromisedPasswordFlowInProgress()&&P.default.createVaultSuccess({key:"cd4",value:"motv2"});const n=ue.getTabID(e),o=le(n)?null==r||null===(t=r.tab)||void 0===t?void 0:t.id:n;if(ue.closeTab(o),N.default.setIsCreateVaultTabClosedByExtension(!0),v.default.getOverrideToUrl())v.default.openDashboardUI(v.default.getOverrideToUrl());else if(this.canShowOnboardingScreens()){const e=D.default.getOnboardingStep();v.default.openDashboardUI(a.default.ONBOARDING.URLS[e])}else v.default.openDashboardUI(a.default.LOGIN_URL);v.default.setOverrideToUrl(null)})),null==t||t(!0),!0))),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.ONBOARDING_FINISHED,((e,t,r)=>{this.postOnboardingSuccess(),null==t||t(!0)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.GET_RECOVERY_VAULT_FLOW_TYPE,((e,t,r)=>{null==t||t(this.getRecoveryVaultFlowType())})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.CHANGE_VAULT_PASSWORD,((e,t,r)=>{v.default.openDashboardUI(a.default.SETTINGS_URL),t(!0)})),O.messenger.subscribe(O.MESSAGES.DASHBOARD_MESSAGES.SHOW_LOGIN_ATTEMPT_EXCEEDED_NOTIFICATION,(()=>{w.default.showLoginAttemptsExceededNotification()}))}async init(e){this.store=e;try{return this.initMessengerSubscription(),this.initPopupHandler(),k.default.init(e),ae.info("VaultInfo :: Initialization is done successfully"),!0}catch(e){const t=`ERROR :: Initialising vault Info Modules: ${e}`;throw ae.error(t),new Error(t)}}};r.default=fe},{"../../message-adapter/background":134,"./../../../redux-core/features/logins/loginsSlice":736,"./../../../redux-core/features/userInfo/userInfoSlice":741,"./../../../vault/tagHelper":757,"./dashboardUIController":29,"./featurePromotion":34,"./firebaseServiceWorker":35,"./globalSettings":36,"./pwmSessionSettings":43,"./reporter":45,"./session":46,"./signin":47,"./store/telemetryInfoStore":50,"./store/userInfoStore":51,"./store/vaultActionsStore":52,"./telemetry/heartBeatWrapper":53,"./telemetry/telemetryWrapper":55,"./uiService":56,"./vaultItemCountHelper":58,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"common/global.types":16,"common/passwordGenerator":21,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/commonUtilsBG":27,"feature/autoUnlock/autoUnlock":60,"feature/compromised-password/compromisedPasswordHelper":64,"feature/compromised-password/loginInfoManager":65,"feature/compromised-password/motFlowManager":66,"feature/nudge/nudgeController":94,"feature/security-dashboard/securityDashboard":110,"feature/unlockManager/vaultUnlockManager":117,"feature/unlockManager/vuSettings":118,"feature/wax/fillCaptureHandler":119,"feature/wax/waxConstants":124,"telemetry/background":170,"telemetry/background/helper/TelemetryHelper":169,"telemetry/constants":173,"telemetry/types":186,"telemetry/types/lifecycleTelemetry.types":188,"telemetry/types/userAccountTelemetry.types":194,"telemetry/types/vaultUnlockAndLockTelemetry.types":195}],58:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=e("./../../../redux-core/features/userInfo/userInfoSlice"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=e("./../../../redux-core/features/logins/loginsSlice"),u=e("./../../../redux-core/features/contacts/contactsSlice"),l=e("./../../../redux-core/features/creditCards/creditCardsSlice"),c=e("./../../../redux-core/features/bankAccounts/bankAccountsSlice"),d=e("./../../../redux-core/features/notes/notesSlice"),f=e("./../../../redux-core/features/import/importSlice"),p=e("@reduxjs/toolkit"),h=e("./../../../redux-core/store/configureStore"),_=e("telemetry/constants/telemetryActions"),E=n(e("telemetry/background")),g=e("./commonUtilsBG");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}const{logger:y}=s.default;const S=new class{init(e){this.store=e,y.info("VaultItemCountHelper :: Initialization is done successfully")}sendVaultSyncEventTelemetry(){E.default.track(_.TELEMETRY_ACTIONS.ENTRIES_RELATED.VAULT_SYNC,this.getVaultItemCount())}getDistinctPasswordCount(e){return new Set(e.reduce(((e,t)=>((0,g.hasValue)(t.password,!1)&&e.push(t.password),e)),[])).size}getVaultItemCount(){var e;const{userInfo:t}=(0,o.selectUserInfo)(null===(e=this.store)||void 0===e?void 0:e.getState());if(null!=t&&t.isVaultLocked)return;const r=(0,a.selectAllLogins)(this.store.getState()),n=(0,u.selectContactsCount)(this.store.getState()),s=(0,l.selectCreditCardsCount)(this.store.getState()),f=(0,c.selectBankAccountsCount)(this.store.getState()),p=(0,d.selectNotesCount)(this.store.getState()),h=this.getDistinctPasswordCount(r),_=i.vaultManager.loginManager.getUsernamesOrderedByFrequency().length;return{totalLogins:r.length,totalAddresses:n,totalCreditCards:s,totalBankAccounts:f,totalNotes:p,distinctPasswords:h,distinctUsernames:_}}startItemCountMiddlewareListener(){h.itemCountMiddlewareListener.startListening({matcher:(0,p.isAnyOf)(f.importAllItems.fulfilled,a.addItem.fulfilled,a.deleteItem.fulfilled,u.addItem.fulfilled,u.deleteItem.fulfilled,l.addItem.fulfilled,l.deleteItem.fulfilled,c.addItem.fulfilled,c.deleteItem.fulfilled,d.addItem.fulfilled,d.deleteItem.fulfilled),effect:async(e,t)=>{(0,p.isFulfilled)(e)&&this.sendVaultSyncEventTelemetry()}})}clearItemCountMiddlewareListener(){h.itemCountMiddlewareListener.clearListeners()}initItemsCountListener(){this.startItemCountMiddlewareListener(),this.sendVaultSyncEventTelemetry()}};r.default=S},{"./../../../redux-core/features/bankAccounts/bankAccountsSlice":731,"./../../../redux-core/features/contacts/contactsSlice":732,"./../../../redux-core/features/creditCards/creditCardsSlice":733,"./../../../redux-core/features/import/importSlice":735,"./../../../redux-core/features/logins/loginsSlice":736,"./../../../redux-core/features/notes/notesSlice":737,"./../../../redux-core/features/userInfo/userInfoSlice":741,"./../../../redux-core/store/configureStore":743,"./commonUtilsBG":27,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"@reduxjs/toolkit":224,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.array.reduce.js":431,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"telemetry/background":170,"telemetry/constants/telemetryActions":174}],59:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=l(e("node-forge")),s=l(e("jsrsasign")),a=n(e("avl"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}window.SymBfw=o.default,window.forge=i,window.KEYUTIL=s.KEYUTIL,window.KJUR=s.KJUR,window.b64utoutf8=s.b64utoutf8,window.b64utos=s.b64utos,window.AVLTree=a.default},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,avl:227,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,jsrsasign:"jsrsasign","node-forge":"node-forge"}],60:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("core/background/globalSettings")),a=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),u=N(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),l=N(e("node-forge")),c=n(e("common/secureSettingsContainer")),d=n(e("core/background/session")),f=n(e("common/indexedDB")),p=n(e("common/constants")),h=n(e("feature/unlockManager/vaultUnlockManager")),_=n(e("common/cryptoUtils")),E=n(e("feature/unlockManager/vuSettings")),g=n(e("core/background/signin")),m=e("telemetry/types"),y=e("telemetry/constants"),S=e("common/global.types"),T=e("telemetry/types/vaultUnlockAndLockTelemetry.types"),A=n(e("telemetry/background")),b=n(e("core/background/vaultActions")),O=n(e("core/background/pwmSessionSettings")),I=n(e("core/background/dashboardUIController"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}const{isNil:R,isntNil:C,isEmptyObject:D}=i.default.utils,{logger:w,extensionAdapter:L}=i.default,{settings:P,VAULT_STATE:M}=p.default,{vaultKeys:U,vaultManager:j}=u,{utils:k}=a.default,x="AutoUnlock",F="iv",B="AES-GCM",G="bc44e8ab-6cc1-447b-b7fd-1155cb36e9c6",V="1968dc5f-c9f7-4f50-80b7-9205fefd7d1b",H="9f03de10-7b2c-4a2c-992d-99e0c0d30eb0",W=30,Y="First attempt 30secs delay",K="Second attempt 30secs delay",z=.5,q="bd8eef69-d8e1-4832-b446-1957758ef999",$="8c158cf1-88b7-4dbe-9253-fa456adce8ae",X="cebb6f5e-5da8-4b12-8090-3b3afbcca358";const J=new class{constructor(){(0,o.default)(this,"isInitialized",!1),(0,o.default)(this,"isBrowserLaunch",!1),(0,o.default)(this,"isWindowLaunch",!1),(0,o.default)(this,"isStorageInitialized",(()=>this.isInitialized||!0===(null===O.default||void 0===O.default?void 0:O.default.get(X)))),(0,o.default)(this,"startupListener",(async()=>{this.isBrowserLaunch=!0,this.isStorageInitialized()&&(await J.openVault(),L.removeStartupListener(this.startupListener))})),(0,o.default)(this,"windowCreatedListener",(async()=>{this.isWindowLaunch=!0,this.isStorageInitialized()&&!this.isBrowserLaunch&&(await J.openVault(),L.removeWindowCreatedEventListener(this.windowCreatedListener))})),(0,o.default)(this,"checkAndClearKeys",(async()=>{const e=await this.indexedDB.getObject(x);R(e)||this.indexedDB.deleteObjectStore(),R(this.container.getObject(V))||this.container.removeObject(V),R(this.container.getObject(F))||this.container.removeObject(F),R(await L.getAlarm(H))||i.default.alarmHelper.clearAlarm(H)})),(0,o.default)(this,"getAutoUnlockKeys",(async()=>{const e=await this.indexedDB.getObject(x);if(R(e)&&R(null==e?void 0:e.keys))throw new Error("Unable to get keys from IndexedDB");const{keys:t}=e,r=this.container.getObject(V),n=this.container.getObject(F);return _.default.decryptData(B,r,n,t.data,t.tag)})),(0,o.default)(this,"sendTelemetryUponCompletion",(()=>{A.default.track(y.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_COMPLETED,{unlockCompleted:!0,touchPoint:S.TouchPoint.AUTO_UNLOCK,method:T.VaultUnlockMethod.AutoUnlock},S.AppName.ONBOARD_SETUP)})),(0,o.default)(this,"sendTelemetryUponFailure",((e,t=null)=>{let[r,n]=b.default.validateOpenVaultErrorCode(e,!1);i.default.utils.isntNil(t)&&(r=`${r} ${t}`),A.default.track(y.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED,{touchPoint:S.TouchPoint.AUTO_UNLOCK,method:T.VaultUnlockMethod.AutoUnlock,cause:r,error:n})})),(0,o.default)(this,"handlePostUnlockSuccess",(()=>{d.default.handleUnlockVaultSuccess(),this.sendTelemetryUponCompletion(),this.handleCSPFlow()})),(0,o.default)(this,"processOpenVaultStatusCode",(async e=>{if((null==e?void 0:e.getState())===M.VAULT_SYNCED)this.handlePostUnlockSuccess();else{if((null==e?void 0:e.getState())===M.INTERNET_UNAVAILABLE)return w.error("Failed to auto unlock vault due to unavailablity of Internet"),void i.default.alarmHelper.setAndRegisterAlarmListener(q,{periodInMinutes:z},this.retryFirstAttempt);setTimeout((async()=>{const{state:e}=await this.autoUnlock();(null==e?void 0:e.getState())===M.VAULT_SYNCED?this.handlePostUnlockSuccess():(this.indexedDB.deleteObjectStore(),this.container.removeObject(V),this.container.removeObject(F),this.sendTelemetryUponFailure(e),w.error(`Failed to auto unlock vault ${null==e?void 0:e.getState()}`))}),5e3)}})),(0,o.default)(this,"openVault",(async()=>{try{const e=await this.autoUnlock();if(R(e))return;await this.processOpenVaultStatusCode(e)}catch(e){w.error(`Failed to auto unlock vault ${e}`)}})),(0,o.default)(this,"handleCSPFlow",(()=>{if(!1===O.default.get(p.default.CSP_FLOW))return;const e=[L.getExtensionURL(p.default.UNLOCK_TAB_HTML),L.getExtensionURL(p.default.PASSWORDLESS_VAULT_UNLOCK)];L.getAllTabs(((t=[])=>{if(!t.length)return;const r=t.find((t=>e.some((e=>{var r;return null===(r=t.url)||void 0===r?void 0:r.startsWith(e)}))));r&&(I.default.openDashboardUI(p.default.DASHBOARD_INDEX_URL),L.closeTab(r.id),O.default.set(p.default.CSP_FLOW,!1))}))})),(0,o.default)(this,"autoUnlock",(async()=>{if(!await this.canAutoUnlock()){if(this.isPeriodExpired()){!0===E.default.getAutoUnlockSettings().enabled&&await this.closeVault()}return}const e=await this.getAutoUnlockKeys(),t=k.createStringBufferFromUint8Buffer(e),r=JSON.parse(t);U.storeEncodedVaultPassword(r.passwordHash),U.setSeamlessVaultUnlockState(!0),h.default.setVaultSdkSalt();const n={};i.default.utils.isntNil(r.challengeKey)&&(n.challengeKey=l.util.encode64(r.challengeKey)),i.default.utils.isntNil(r.challengePrivateKey)&&(n.challengePrivateKey=l.util.encode64(r.challengePrivateKey)),n.encryptionKey=l.util.encode64(r.vaultKey);const{state:o}=await j.seamlessOpenVault(n);return o})),(0,o.default)(this,"retryFirstAttempt",(async()=>{try{const e=await this.autoUnlock();if(R(e))return;(null==e?void 0:e.getState())!==M.VAULT_SYNCED?(i.default.alarmHelper.setAndRegisterAlarmListener($,{periodInMinutes:z},this.retrySecondAttempt),this.sendTelemetryUponFailure(e,Y)):this.handlePostUnlockSuccess()}catch(e){w.error(`Internet failure first autounlock attempt ${e}`)}finally{i.default.alarmHelper.clearAlarm(q)}})),(0,o.default)(this,"retrySecondAttempt",(async()=>{try{const e=await this.autoUnlock();if(R(e))return;(null==e?void 0:e.getState())!==M.VAULT_SYNCED?(this.indexedDB.deleteObjectStore(),this.container.removeObject(V),this.container.removeObject(F),this.sendTelemetryUponFailure(e,K)):this.handlePostUnlockSuccess()}catch(e){w.error(`Internet failure second autounlock attempt ${e}`)}finally{i.default.alarmHelper.clearAlarm($)}})),(0,o.default)(this,"canAutoUnlock",(async()=>{if(!await g.default.isNASignedIn())return!1;if(!U.isLocked())return!1;const e=E.default.getAutoUnlockSettings();return!(D(e)||!e.enabled)&&(!!await this.doesAutoUnlockKeysExist()&&!this.isPeriodExpired())})),(0,o.default)(this,"canTriggerAlarm",(async()=>{if(!await g.default.isNASignedIn())return!1;const e=E.default.getAutoUnlockSettings();return!(D(e)||!e.enabled)&&(!J.isPeriodExpired()||!(!await J.doesAutoUnlockKeysExist()&&U.isLocked()))})),(0,o.default)(this,"isPeriodExpired",(()=>{const e=E.default.getAutoUnlockSettings(),t=null==e?void 0:e.days;if(R(t))return!0;let r=(new Date).getTime()/6e4;return r=Math.round(r),!(t>r)})),(0,o.default)(this,"closeVault",(async()=>{J.checkAndClearKeys(),U.isLocked()||await d.default.closeVault(!1,{context:m.LockContext.WebApp,type:T.VaultLockType.AUTO_UNLOCK,touchPoint:S.TouchPoint.VAULT_UI})})),(0,o.default)(this,"handleSchedulerEvent",(async e=>{if(!e||!e.name)return;if(e.name!==H)return;if(!J.isPeriodExpired())return;!0===E.default.getAutoUnlockSettings().enabled&&await J.closeVault()})),(0,o.default)(this,"doesAutoUnlockKeysExist",(async()=>{try{return!(D(await this.indexedDB.getObject(x))||R(this.container.getObject(V))||R(this.container.getObject(F)))}catch(e){return!1}})),(0,o.default)(this,"removeAutoUnlockKeys",(()=>{this.indexedDB.deleteObjectStore(),this.container.removeObject(V),this.container.removeObject(F),i.default.alarmHelper.clearAlarm(H)})),(0,o.default)(this,"setAutoUnlockTimeout",(()=>{i.default.alarmHelper.setAndRegisterAlarmListener(H,{periodInMinutes:W},this.handleSchedulerEvent)})),this.indexedDB=new f.default(x),this.closeVault=this.closeVault.bind(this),this.removeAutoUnlockKeys=this.removeAutoUnlockKeys.bind(this),this.autoUnlock=this.autoUnlock.bind(this),this.sendTelemetryUponFailure=this.sendTelemetryUponFailure.bind(this),this.sendTelemetryUponCompletion=this.sendTelemetryUponCompletion.bind(this),this.processOpenVaultStatusCode=this.processOpenVaultStatusCode.bind(this),this.isPeriodExpired=this.isPeriodExpired.bind(this),L.addStartupListener(this.startupListener),L.addWindowCreatedEventListener(this.windowCreatedListener)}async setAutoUnlockKeys(){if(!E.default.getAutoUnlockSettings().enabled)return;this.isPeriodExpired()&&E.default.setAutoUnlockSettings({enabled:!0,days:p.default.AUTO_UNLOCK_DAYS.SEVEN});const{encryptedDerivedKeys:e,aesKey:t,iv:r}=h.default._encryptVaultKeys(p.default.UNLOCK_MODE.AUTO);this.container.setObject(V,t),this.container.setObject(F,r),await this.indexedDB.setObject({keys:e}),this.setAutoUnlockTimeout()}removeAutoLockSettings(e=!1){if(this.removeAutoUnlockKeys(),!0===e)return void E.default.setAutoUnlockSettings({enabled:!1,days:null});const t=E.default.getAutoUnlockSettings();D(t)||!0!==t.enabled||E.default.setAutoUnlockSettings({enabled:!0,days:p.default.AUTO_UNLOCK_DAYS.SEVEN})}async initializeSecureSettings(e){const t=await this.getEncryptionKey();c.default.initialize(e,t,(async(t,r,n)=>{t?(console.log(`Loaded ${e} settings container :: autoUnlock`),this.container=r,O.default.set(X,!0),this.isInitialized=!0,this.isBrowserLaunch?(await this.openVault(),L.removeStartupListener(this.startupListener),this.isBrowserLaunch=!1):this.isWindowLaunch?(await this.openVault(),L.removeWindowCreatedEventListener(this.windowCreatedListener),this.isWindowLaunch=!1):!1===s.default.getValue(p.default.FRESH_INSTALL)&&!0===s.default.getValue(p.default.AUTO_UNLOCK_POST_UPGRADE)&&(await this.openVault(),s.default.setValue(p.default.AUTO_UNLOCK_POST_UPGRADE,!1)),await this.canTriggerAlarm()&&this.setAutoUnlockTimeout()):i.default.logger.error(`Could not load ${e} settings container :: autoUnlock ${n.toString()}`)}))}async getEncryptionKey(){let e=null===s.default||void 0===s.default?void 0:s.default.getValue(G);if(R(e)){const t=await new Promise((e=>{c.default.removeAll(P.AUTO_UNLOCK_SECURE_CONTAINER,(t=>{e(t)}))}));i.default.logger.info(`Deleted ${P.AUTO_UNLOCK_SECURE_CONTAINER} as Encryption key is not available. deletion status: ${t}`),e=i.default.utils.createNewGuid(),null===s.default||void 0===s.default||s.default.setValue(G,e)}return e}};r.default=J},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"common/cryptoUtils":14,"common/global.types":16,"common/indexedDB":17,"common/secureSettingsContainer":23,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/dashboardUIController":29,"core/background/globalSettings":36,"core/background/pwmSessionSettings":43,"core/background/session":46,"core/background/signin":47,"core/background/vaultActions":57,"feature/unlockManager/vaultUnlockManager":117,"feature/unlockManager/vuSettings":118,"node-forge":"node-forge","telemetry/background":170,"telemetry/constants":173,"telemetry/types":186,"telemetry/types/vaultUnlockAndLockTelemetry.types":195}],61:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("feature/compromised-password/loginInfoManager"));function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{utils:{isString:l,isNil:c,isObject:d},logger:f,utils:p}=i.default;r.default=class{constructor(){(0,o.default)(this,"loginURL",null),(0,o.default)(this,"siteName",null),(0,o.default)(this,"username",null),(0,o.default)(this,"password",null),(0,o.default)(this,"path",null),(0,o.default)(this,"lastUpdate",null),(0,o.default)(this,"siteLoginStatus",null),this.set=this.set.bind(this),this.get=this.get.bind(this),this.clear=this.clear.bind(this),this.getUsername=this.getUsername.bind(this),this.getSiteName=this.getSiteName.bind(this),this.getLoginURL=this.getLoginURL.bind(this),this.getPath=this.getPath.bind(this),this.getLastUpdate=this.getLastUpdate.bind(this),this.getPassword=this.getPassword.bind(this),this.getSiteLoginStatus=this.getSiteLoginStatus.bind(this),this.serialize=this.serialize.bind(this)}set(e){if(c(e)||!d(e))throw"loginInfo is empty or invalid object";const t=s.default.getObfuscationKey();if(!l(t)||""===t)throw"Invalid obfuscationKey";l(e.password)&&""===e.password||c(e.password)?(f.debug("empty password can not be obfuscated, storing as it is"),this.password=e.password):this.password=p.obfuscatePassword(e.password,t),this.loginURL=e.loginURL,this.siteName=e.siteName,this.username=e.username,this.path=e.path,this.lastUpdate=e.lastUpdate,this.siteLoginStatus=e.siteLoginStatus}get(){return u(u({},this.serialize()),{},{siteLoginStatus:this.siteLoginStatus})}serialize(){return{username:this.username,password:this.getPassword(),siteName:this.siteName,loginURL:this.loginURL,path:this.path,lastUpdate:this.lastUpdate}}getUsername(){return this.username}getSiteName(){return this.siteName}getLoginURL(){return this.loginURL}getPath(){return this.path}getLastUpdate(){return this.lastUpdate}getSiteLoginStatus(){return this.siteLoginStatus}getPassword(){const e=s.default.getObfuscationKey();if(!l(e)||""===e)throw"Invalid obfuscationKey";return l(this.password)&&""===this.password||c(this.password)?(f.debug("empty password can not be deobfuscated"),this.password):p.obfuscatePassword(this.password,e)}encryptPassword(){this.password=this.getPassword()}clear(){this.loginURL=null,this.siteName=null,this.username=null,this.password=null,this.path=null,this.lastUpdate=null,this.siteLoginStatus=null}}},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"feature/compromised-password/loginInfoManager":65}],62:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/notificationSettings/notificationSettingsManager"));class i extends o.default{}const s=new i;r.default=s},{"@babel/runtime/helpers/interopRequireDefault":208,"common/notificationSettings/notificationSettingsManager":19}],63:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=e("@browser-services/compromised-password-sdk/dist/release/CompromisedPasswordBG.js"),i=n(e("./compromisedPasswordHelper"));class s extends o.ICompromisedPasswordClient{getConfig(){return i.default.getConfig()}async getAllLoginAccounts(){var e;return null!==(e=i.default.getAllLoginAccounts())&&void 0!==e?e:[]}onSchedulerCompleted(e){i.default.onSchedulerCompleted(e)}onSchedulerStarted(){i.default.onSchedulerStarted()}handleCompromisedPasswordResult(e){i.default.handleCompromisedPasswordResult(e)}}r.default=s},{"./compromisedPasswordHelper":64,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/compromised-password-sdk/dist/release/CompromisedPasswordBG.js":212,"core-js/modules/es.promise.js":437}],64:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/compromised-password-sdk/dist/release/CompromisedPasswordBG.js")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),u=n(e("common/constants/uiConstants")),l=n(e("common/constants")),c=n(e("core/background/session")),d=n(e("core/background/signin")),f=e("message-adapter/messageID"),p=n(e("core/background/core")),h=e("./../../../redux-core/features/logins/loginsSlice"),_=e("./../../../redux-core/features/userInfo/userInfoSlice"),E=n(e("core/background/telemetry/telemetryWrapper")),g=n(e("core/background/store/userInfoStore")),m=n(e("core/background/pwmSessionSettings")),y=n(e("./motFlowManager")),S=n(e("./compromisedPasswordClient")),T=e("core/background/commonUtilsBG");const{alarmHelper:A,extensionAdapter:b,logger:O,utils:{createNewGuid:I,isntNil:v,isNil:N}}=s.default,R=u.default.MESSAGES,C="6DC1123D-2EB8-46F3-B66C-F9EFDE2D9D0E",{COMPROMISED_PASSWORD_HELPER:D}=l.default.SESSION_STORAGE_KEYS;const w=new class{constructor(){(0,o.default)(this,"CCTURL",{HTTPS:"https://",PATH:"/sso/idp"}),(0,o.default)(this,"onIDSafeClosedTab",(({detail:{tabId:e}})=>{this.isCompromisedPasswordFlowInProgress()&&this.setClosedTab(e)})),(0,o.default)(this,"onTabCreated",(({detail:{tabUrl:e,tabId:t}})=>{this.isCompromisedPasswordFlowInProgress()&&this.setCreatedTab(t)})),(0,o.default)(this,"onTabClosed",(e=>{this.isCompromisedPasswordFlowInProgress()&&this.getCreatedTab()===e&&this.getClosedTab()!==e&&(this.sendTelemetryOnTabClose(),y.default.resetCompromisedPasswordFlowState())})),(0,o.default)(this,"onTabUpdated",((e,t)=>{const{status:r,url:n}=t;if(N(n)||N(r)||!this.isCompromisedPasswordFlowInProgress()||this.getCreatedTab()!==e)return;if(n.startsWith(l.default.CCT_DOMAIN)||n.startsWith(a.default.authSCD.NSL_URL)||n.startsWith(b.getExtensionURL("html/")))return void("complete"!==r&&this.setCreatedTabURL(n));const o=s.default.utils.getDomain(n);(0,T.isDomainInAuthLoginKeys)(o)?"complete"!==r&&this.setCreatedTabURL(n):(this.sendTelemetryOnTabClose(),y.default.resetCompromisedPasswordFlowState())})),(0,o.default)(this,"handleMessage",((e,t,r)=>{const n=e.id,{payload:o}=e;switch(n){case R.COMPROMISED_PASSWORD_CHECK:i.default.startPasswordCheck(o.fetchFromServer,o.accountLogin,(e=>{b.sendMessageToTab(r,{id:R.COMPROMISED_PASSWORD_CHECK_RESPONSE,payload:{compromisedPasswordResult:e}},void 0)})).catch((e=>O.error(e)));break;case f.MESSAGES.COMPROMISED_PASSWORD_RIBBON.RIBBON_INIT:t(this.getRibbonState())}}))}async initialize(){await i.default.init(new S.default),b.addMessageListener(this.handleMessage),b.addTabRemovedEventListener(this.onTabClosed),b.addTabUpdatedEventListener(this.onTabUpdated),window.addEventListener(l.default.IDSAFE_CREATED_TAB,this.onTabCreated),window.addEventListener(l.default.IDSAFE_CLOSED_TAB,this.onIDSafeClosedTab)}sendTelemetryOnTabClose(){const e=this.getCreatedTabURL();let t=null;null!=e&&e.includes("/content/ui/")?t=s.default.utils.pathName(e):e&&(t=s.default.utils.urlWithoutQueryParameters(e)),v(t)&&E.default.sendCloseTabMOTFlow(t)}getConfig(){return{POLL_FREQUENCY_IN_MINS:l.default.COMPROMISED_PASSWORD_CONFIG.POLL_FREQUENCY_IN_MINS}}getAllLoginAccounts(){const{userInfo:e}=(0,_.selectUserInfo)(p.default.store.getState());return e.isVaultLocked?null:(0,h.selectAllLogins)(p.default.store.getState())}onSchedulerStarted(){O.log("[IDSAFE] Compromised passwords scheduler has started")}onSchedulerCompleted(e){O.log(`[IDSAFE] Scheduler completed result: ${JSON.stringify(e)}`)}handleCompromisedPasswordResult(e){O.log(`[IDSAFE] Scheduler checked result: ${JSON.stringify(e)}`)}getRibbonState(){var e,t,r;return{isInProgress:null!==(e=m.default.get(D.RIBBON_STATE_IS_IN_PROGRESS))&&void 0!==e&&e,isLoggedIn:null!==(t=m.default.get(D.RIBBON_STATE_IS_LOGGED_IN))&&void 0!==t?t:null,domain:null!==(r=m.default.get(D.RIBBON_STATE_DOMAIN))&&void 0!==r?r:null}}setRibbonState(e){m.default.set(D.RIBBON_STATE_IS_IN_PROGRESS,e.isInProgress),m.default.set(D.RIBBON_STATE_IS_LOGGED_IN,e.isLoggedIn),m.default.set(D.RIBBON_STATE_DOMAIN,e.domain)}doesVaultExists(){return c.default.doesVaultExist()}isUserLoggedIn(){return new Promise((e=>{a.default.session.isLoggedIn(((t,r)=>{v(r)&&O.error(r),e(t)}))}))}promptToLoginToNortonAccount(e,t){d.default.openLoginFlow(),this.setRibbonState({isInProgress:!0,isLoggedIn:e,domain:t})}promptToCreateVault(e,t,r){d.default.updateTabURL(b.getExtensionURL(u.default.NO_VAULT.CREATE_VAULT_URL)),this.setRibbonState({isInProgress:!0,isLoggedIn:e,domain:t})}promptToOpenVault(e,t){d.default.openVaultLoginPage(),this.setRibbonState({isInProgress:!0,isLoggedIn:e,domain:t})}checkCompromisedPassword(e){const{password:t,path:r}=e,n=[{password:t,guid:r}];return new Promise(((e,t)=>{i.default.startPasswordCheck(true,n,e).catch((e=>{t(e)}))}))}async isPasswordCompromised(e){const t={password:e,path:`{${I()}}`};try{const{error:e,data:r}=await this.checkCompromisedPassword(t);return e?(O.error(e),null):r.isLeaked}catch(e){return O.error(e),null}}setCompromisedPasswordTimeout(){A.setAndRegisterAlarmListener(C,{periodInMinutes:15},this.handleCompromisedPasswordTimeoutAction)}async handleCompromisedPasswordTimeoutAction(e){e&&e.name&&e.name===C&&(N(this)&&await w.initialize(),v(this.getCreatedTab())&&b.closeTab(this.getCreatedTab()),y.default.resetCompromisedPasswordFlowState(),A.clearAlarm(C))}getCreatedTabURL(){return m.default.get(D.CREATED_TAB_URL)}setCreatedTabURL(e){m.default.set(D.CREATED_TAB_URL,e)}getCreatedTab(){return m.default.get(D.CREATED_TAB)}setCreatedTab(e){m.default.set(D.CREATED_TAB,e)}getClosedTab(){return m.default.get(D.CLOSED_TAB)}setClosedTab(e){m.default.set(D.CLOSED_TAB,e)}isCompromisedVaultPasswordDetected(){var e;return null!==(e=m.default.get(D.IS_COMPROMISED_VAULT_PASSWORD_DETECTED))&&void 0!==e&&e}isMatchSSOVaultPasswordFlowDetected(){var e;return null!==(e=m.default.get(D.IS_MATCH_SSO_VAULT_PASSWORD_DETECTED))&&void 0!==e&&e}setCompromisedVaultPasswordDetected(e){m.default.set(D.IS_COMPROMISED_VAULT_PASSWORD_DETECTED,e)}setMatchSSOVaultPasswordFlowDetected(e){m.default.set(D.IS_MATCH_SSO_VAULT_PASSWORD_DETECTED,e)}setCompromisedPasswordFlowInProgress(e){m.default.set(D.IS_COMPROMISED_PASSWORD_FLOW_IN_PROGRESS,e),A.clearAlarm(C),e&&this.setCompromisedPasswordTimeout(),g.default.setUserInfo()}isCompromisedPasswordFlowInProgress(){var e;return null!==(e=m.default.get(D.IS_COMPROMISED_PASSWORD_FLOW_IN_PROGRESS))&&void 0!==e&&e}setCompromisedNotificationVisible(e){m.default.set(D.IS_COMPROMISED_NOTIFICATION_VISIBLE,e)}isCompromisedNotificationVisible(){var e;return null!==(e=m.default.get(D.IS_COMPROMISED_NOTIFICATION_VISIBLE))&&void 0!==e&&e}isCompromisedPasswordFlowEnabled(){return l.default.COMPROMISED_PASSWORD_CONFIG.FEATURE_ENABLED}getCompromisedPasswordFlowTab(){var e;return null!==(e=m.default.get(D.CREATED_TAB))&&void 0!==e?e:null}setCompromisedPasswordFlowTab(e){m.default.set(D.CREATED_TAB,e)}};r.default=w},{"./../../../redux-core/features/logins/loginsSlice":736,"./../../../redux-core/features/userInfo/userInfoSlice":741,"./compromisedPasswordClient":63,"./motFlowManager":66,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/compromised-password-sdk/dist/release/CompromisedPasswordBG.js":212,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"common/constants":13,"common/constants/uiConstants":9,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.promise.js":437,"core/background/commonUtilsBG":27,"core/background/core":28,"core/background/pwmSessionSettings":43,"core/background/session":46,"core/background/signin":47,"core/background/store/userInfoStore":51,"core/background/telemetry/telemetryWrapper":55,"message-adapter/messageID":135}],65:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("core/background/pwmSessionSettings")),s=n(e("common/constants"));const{utils:a}=o.default,{utils:{isNil:u}}=o.default,{LOGIN_INFO_MANAGER:l}=s.default.SESSION_STORAGE_KEYS;const c=new class{constructor(){this.initialize=this.initialize.bind(this),this.getObfuscationKey=this.getObfuscationKey.bind(this),this.clearObfuscationKey=this.clearObfuscationKey.bind(this),this.generateObfuscationKey=this.generateObfuscationKey.bind(this)}initialize(){u(i.default.get(l.OBFUSCATION_KEY))&&i.default.set(l.OBFUSCATION_KEY,a.createNewGuid())}getObfuscationKey(){var e;return null!==(e=i.default.get(l.OBFUSCATION_KEY))&&void 0!==e?e:null}clearObfuscationKey(){i.default.set(l.OBFUSCATION_KEY,null)}generateObfuscationKey(){i.default.set(l.OBFUSCATION_KEY,a.createNewGuid())}};r.default=c},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/pwmSessionSettings":43}],66:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.promise.js");var i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=n(e("common/constants/uiConstants")),u=n(e("core/background/naAccountHandler")),l=n(e("core/background/telemetry/telemetryWrapper")),c=n(e("feature/wax/fillCaptureHandler")),d=e("./../../../redux-core/features/logins/loginsSlice"),f=e("./../../../redux-core/features/userInfo/userInfoSlice"),p=n(e("core/background/pwmSessionSettings")),h=e("locale"),_=n(e("core/background/store/telemetryInfoStore")),E=e("common/global.types"),g=e("telemetry/types/lifecycleTelemetry.types"),m=n(e("telemetry/background")),y=e("telemetry/constants"),S=e("telemetry/types"),T=n(e("./loginInfoManager")),A=n(e("./LoginInfo")),b=n(e("./compromisedPasswordHelper"));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{extensionAdapter:v,logger:N,utils:R}=i.default,C=((0,h.getIntlData)(),"fulfilled"),D="rejected",{MOT_FLOW_MANAGER:w}=s.default.SESSION_STORAGE_KEYS,{isNil:L}=R;const P=new class{constructor(){this.initialize=this.initialize.bind(this),this.setExistingLoginInfo=this.setExistingLoginInfo.bind(this),this.getExistingLoginInfo=this.getExistingLoginInfo.bind(this),this.clearExistingLoginInfo=this.clearExistingLoginInfo.bind(this),this.setNewLoginInfo=this.setNewLoginInfo.bind(this),this.getNewLoginInfo=this.getNewLoginInfo.bind(this),this.clearNewLoginInfo=this.clearNewLoginInfo.bind(this),this.clearLoginInfoItems=this.clearLoginInfoItems.bind(this),this.startMotFlow=this.startMotFlow.bind(this),this.startNACreationFlow=this.startNACreationFlow.bind(this),this.onSavedLoginListenerCallback=this.onSavedLoginListenerCallback.bind(this),this.findLoginItemsInVault=this.findLoginItemsInVault.bind(this),this.handleUnlockVaultSuccess=this.handleUnlockVaultSuccess.bind(this),this.showMotFlowScreen=this.showMotFlowScreen.bind(this),this.doesLoginContainPassword=this.doesLoginContainPassword.bind(this)}async initialize(e){this.store=e,T.default.initialize()}setExistingLoginInfo(e){if(!i.default.utils.isObject(e))return void N.debug("loginInfo is nil");const t=new A.default;t.set(e),p.default.set(w.EXISTING_LOGIN_INFO,t)}setAutoCreatedNALoginInfo(e){if(!i.default.utils.isObject(e))return void N.debug("loginInfo is nil");const t=new A.default;t.set(e),p.default.set(w.NA_LOGIN_INFO,t)}setNewLoginInfo(e){if(!i.default.utils.isObject(e))return void N.debug("loginInfo is nil");const t=new A.default;t.set(e),p.default.set(w.NEW_LOGIN_INFO,t)}constructLoginInfo(e){if(L(e))return null;if("function"==typeof e.get)return e;const t=new A.default;return t.set(e),t.encryptPassword(),t}getExistingLoginInfo(){return this.constructLoginInfo(p.default.get(w.EXISTING_LOGIN_INFO))}getAutoCreatedNALoginInfo(){return this.constructLoginInfo(p.default.get(w.NA_LOGIN_INFO))}getNewLoginInfo(){return this.constructLoginInfo(p.default.get(w.NEW_LOGIN_INFO))}clearExistingLoginInfo(){p.default.set(w.EXISTING_LOGIN_INFO,null)}clearAutoCreatedNALoginInfo(){p.default.set(w.NA_LOGIN_INFO,null)}doesLoginContainUsername(e){return e instanceof A.default&&i.default.utils.isntNil(e.getUsername())}doesLoginContainPassword(e){return e instanceof A.default&&i.default.utils.isntNil(e.getPassword())}clearNewLoginInfo(){p.default.set(w.NEW_LOGIN_INFO,null)}clearLoginInfoItems(){this.clearExistingLoginInfo(),this.clearAutoCreatedNALoginInfo(),this.clearNewLoginInfo()}_registerOnSaveLoginEventListener(){window.addEventListener(s.default.ON_LOGIN_SAVED,this.onSavedLoginListenerCallback)}_doesLoginInfoMatchesSavedLoginItem(e,t){if(!(e instanceof A.default))return!1;const r=t.getLoginURL();return t.getUsername()===e.getUsername()&&i.default.utils.baseURL(r)===i.default.utils.baseURL(e.getLoginURL())}onSavedLoginListenerCallback({detail:{error:e,item:t}}){if(window.removeEventListener(s.default.ON_LOGIN_SAVED,this.onSavedLoginListenerCallback),i.default.utils.isntNil(e))return void N.debug("Error while saving vault item in MOT Vault open state");const r=this.getNewLoginInfo();this._doesLoginInfoMatchesSavedLoginItem(r,t)&&this.resetCompromisedPasswordFlowState()}async _saveLoginInfoIntoVault(e){var t;i.default.utils.isNil(e)||N.error("logininfo is nil while saving into vault");const{meta:r}=await(null===(t=this.store)||void 0===t?void 0:t.dispatch((0,d.addItem)(e.serialize()))),n=i.default.utils.getDomain(r.arg.loginURL);r.requestStatus===C?(c.default.showNotification(n,"wax.autosave.notification","New login saved!",!0),l.default.sendLoginAddMOTFlow(l.default.LOGIN_TYPE_LOCAL),m.default.track(y.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVED,{context:S.ItemSaveContext.MOTCompromisedNotification,touchPoint:E.TouchPoint.INFIELD_NOTIFICATION})):r.requestStatus===D&&(l.default.sendLoginAddFailedMOTFlow(l.default.LOGIN_TYPE_LOCAL),c.default.showNotification(n,"wax.autosave.failure.notification","We couldn't save your login. Let's try again?",!1))}async _updateLoginsIntoVault(e){var t,r;const{meta:n}=await(null===(t=this.store)||void 0===t?void 0:t.dispatch((0,d.updateItems)(e))),o=i.default.utils.getDomain(null===(r=e[0])||void 0===r?void 0:r.loginURL);n.requestStatus===C?(c.default.showNotification(o,"wax.autosave.update.notification","Password updated!",!0),l.default.sendLoginModifyMOTFlow(l.default.LOGIN_TYPE_LOCAL),this.resetCompromisedPasswordFlowState()):n.requestStatus===D&&(l.default.sendLoginModifyFailedMOTFlow(l.default.LOGIN_TYPE_LOCAL),c.default.showNotification(o,"wax.autosave.update.failure.notification","We couldn't update your login. Let's try again?",!1))}async _updateOrSaveLoginInVault(e){let t=await this.findLoginItemsInVault(e);if(t.length>0){const r=e.getPassword();t=t.map((e=>I(I({},e),{},{password:null!=r?r:void 0}))),await this._updateLoginsIntoVault(t)}else await this._saveLoginInfoIntoVault(e)}async findLoginItemsInVault(e){try{if(null==this.store)return[];const t=(0,d.selectAllLogins)(this.store.getState()),r=i.default.utils.baseURL(e.getLoginURL()),n=e.getUsername();return t.filter((e=>{var t;return i.default.utils.baseURL(null!==(t=e.loginURL)&&void 0!==t?t:"")===r&&e.username===n}))}catch(e){return N.error(e),[]}}resetCompromisedPasswordFlowState(){u.default.clearCachedNAStatusMap(),c.default.resetCompromisedPasswordFlowState()}showMotFlowScreen(e){v.createTab(e,(e=>{i.default.utils.createCustomHTMLEvent(s.default.IDSAFE_CREATED_TAB,{tabId:e.id,tabUrl:e.pendingUrl})}))}showSystemErrorScreen(){if(b.default.isCompromisedPasswordFlowInProgress()){const e=v.getExtensionURL(a.default.MOT_ONBOARDING.SYSTEM_ERROR.URL);v.createTab(e)}}async startMotFlow(e){if(i.default.utils.isObject(e)){if(null!=this.store){try{this.setNewLoginInfo(e);const{userInfo:t}=(0,f.selectUserInfo)(this.store.getState());if(!t.isVaultLocked){const e=this.getNewLoginInfo();e&&await this._updateOrSaveLoginInVault(e)}this.showMotFlowScreen(a.default.MOT_ONBOARDING.AUTOCHANGE_PASSWORD_SUCCESS.URL)}catch(e){N.error(e),this.showMotFlowScreen(a.default.MOT_ONBOARDING.SYSTEM_ERROR.URL)}_.default.setTelemetryInfo({appName:E.AppName.COMPROMISED_PASSWORD_RIBBON_APP,contextScreen:g.AppOpenContextScreen.InfieldNotification,contextAction:g.AppOpenContextActionInfieldNotification.CompromisedPasswordFixNow,canSendAppOpenEvent:!0})}}else N.debug("logininfo is nil can't start mot flow")}async startNACreationFlow(e){const t=await u.default.signUp(e);return!0===t.statusCode?(this.setAutoCreatedNALoginInfo(t.credentials),l.default.sendAutoNACreateSuccessMOTFlow(),this.showMotFlowScreen(a.default.NO_VAULT.CREATE_VAULT_URL),b.default.setRibbonState({isInProgress:!0,isLoggedIn:!0,domain:null}),!0):(this.showMotFlowScreen(a.default.MOT_ONBOARDING.SYSTEM_ERROR.URL),!1)}async handleUnlockVaultSuccess(){if(!b.default.isCompromisedPasswordFlowInProgress())return;const e=this.getNewLoginInfo();if(i.default.utils.isNil(e))return;await this._updateOrSaveLoginInVault(e);const t=this.getAutoCreatedNALoginInfo();!i.default.utils.isNil(t)&&this.doesLoginContainPassword(t)&&await this._updateOrSaveLoginInVault(t)}};r.default=P},{"./../../../redux-core/features/logins/loginsSlice":736,"./../../../redux-core/features/userInfo/userInfoSlice":741,"./LoginInfo":61,"./compromisedPasswordHelper":64,"./loginInfoManager":65,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"common/constants/uiConstants":9,"common/global.types":16,"core-js/modules/es.promise.js":437,"core/background/naAccountHandler":40,"core/background/pwmSessionSettings":43,"core/background/store/telemetryInfoStore":50,"core/background/telemetry/telemetryWrapper":55,"feature/wax/fillCaptureHandler":119,locale:131,"telemetry/background":170,"telemetry/constants":173,"telemetry/types":186,"telemetry/types/lifecycleTelemetry.types":188}],67:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.handleMessage=r.doesNortonAccountExist=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),s=n(e("common/constants/uiConstants")),a=e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js"),u=n(e("common/constants")),l=n(e("core/background/naAccountHandler")),c=n(e("core/background/session")),d=n(e("core/background/signin")),f=n(e("core/background/notificationIcon")),p=n(e("./compromisedPasswordHelper")),h=n(e("./motFlowManager")),_=n(e("./LoginInfo")),E=e("telemetry/types/lifecycleTelemetry.types"),g=n(e("core/background/store/telemetryInfoStore")),m=e("common/global.types"),y=e("./motOnboardingControllerClass");const{utils:S,extensionAdapter:T,logger:A}=o.default,{session:b}=i.default,{MOT_ONBOARDING:{COMBINED_NA_VAULT_SETUP_COMPLETE:O,NA_SIGNIN_CREATE_ACCOUNT:I,SYSTEM_ERROR:v,PASSWORD_CHANGE_ERROR:N,AUTOCHANGE_PASSWORD_SUCCESS:R,NSL_PAGE:C}}=s.default,D=async e=>{try{return await l.default.doesNortonAccountExist(e)}catch(e){return T.updateTabUrl(p.default.getCompromisedPasswordFlowTab(),s.default.MOT_ONBOARDING.SYSTEM_ERROR.URL),A.error(e),!1}};r.doesNortonAccountExist=D;const w=(e,t,r,n)=>{var i,l;const{id:w,payload:L}=e;let P=null;switch(w){case O.MESSAGES.UI_INIT:P={emailID:null===(i=h.default.getAutoCreatedNALoginInfo())||void 0===i?void 0:i.getUsername(),site:null===(l=h.default.getNewLoginInfo())||void 0===l?void 0:l.getSiteName(),isCompromisedPasswordFlowInProgress:p.default.isCompromisedPasswordFlowInProgress()},t(P);break;case I.MESSAGES.UI_INIT:{const e=h.default.getExistingLoginInfo(),r=null==e?void 0:e.getUsername();return D(r).then((e=>{P={emailID:e?r:null,isCompromisedPasswordFlowInProgress:p.default.isCompromisedPasswordFlowInProgress()},t(P)})),!0}case C.MESSAGES.IS_COMPROMISED_PASSWORD_FLOW_IN_PROGRESS:t({isCompromisedPasswordFlowInProgress:p.default.isCompromisedPasswordFlowInProgress()});break;case v.MESSAGES.UI_INIT:P={isCompromisedPasswordFlowInProgress:p.default.isCompromisedPasswordFlowInProgress()},t(P);break;case v.MESSAGES.RETRY:T.updateTabUrl(T.getTabID(r),s.default.MOT_ONBOARDING.AUTOCHANGE_PASSWORD_SUCCESS.URL_RETRY_FLOW);break;case N.MESSAGES.UI_INIT:P={isCompromisedPasswordFlowInProgress:p.default.isCompromisedPasswordFlowInProgress()},t(P);break;case R.MESSAGES.UI_INIT:return P={isCompromisedPasswordFlowInProgress:p.default.isCompromisedPasswordFlowInProgress(),isUserLoggedIn:!1,obfuscationKey:y.motOnboardingController.getObfuscationKey()},b.isLoggedIn((e=>{e&&!a.vaultKeys.isLocked()&&(P.isUserLoggedIn=!0),t(P)})),!0;case R.MESSAGES.LAUNCH_SAVE_TO_PASSWORD_MANAGER_FLOW:g.default.setTelemetryInfo({appName:m.AppName.ONBOARD_SETUP,contextScreen:E.AppOpenContextScreen.InfieldNotification,contextAction:E.AppOpenContextActionInfieldNotification.CompromisedPasswordFixNow,canSendAppOpenEvent:!0}),b.isLoggedIn((e=>{const t=T.getTabID(r);e?c.default.doesVaultExist().then((n=>{d.default.setTabID(t),n?d.default.openVaultLoginPage():p.default.promptToCreateVault(e,"",r)})):(T.closeTab(t),o.default.utils.createCustomHTMLEvent(u.default.IDSAFE_CLOSED_TAB,{tabId:t}),p.default.promptToLoginToNortonAccount(e,""))}));break;case R.MESSAGES.GET_NEW_PASSWORD:(e=>{var t;const r=y.motOnboardingController.getObfuscationKey(),n=null===(t=h.default.getNewLoginInfo())||void 0===t?void 0:t.get().password;if(null==n)return;e(S.obfuscatePassword(n,r))})(t);break;case R.MESSAGES.COPY_PASSWORD_NOTIFICATION:try{const e="Norton Password Manager",t=new o.default.TimedNotification("Password copied to the clipboard.",f.default.getGoodIcon(),e);o.default.notificationCenter.addNotification(t)}catch(e){A.error(e)}break;case I.MESSAGES.CONTINUE:return h.default.naLoginInfo=new _.default,h.default.naLoginInfo.set({username:L.emailID}),d.default.openLoginFlow(),!1}};r.handleMessage=w,T.addMessageListener(w)},{"./LoginInfo":61,"./compromisedPasswordHelper":64,"./motFlowManager":66,"./motOnboardingControllerClass":68,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"common/constants/uiConstants":9,"common/global.types":16,"core-js/modules/es.promise.js":437,"core/background/naAccountHandler":40,"core/background/notificationIcon":42,"core/background/session":46,"core/background/signin":47,"core/background/store/telemetryInfoStore":50,"telemetry/types/lifecycleTelemetry.types":188}],68:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.motOnboardingController=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("core/background/pwmSessionSettings")),s=n(e("common/constants")),a=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const{MOT_ONBOARDING_CONTROLLER:u}=s.default.SESSION_STORAGE_KEYS;r.motOnboardingController=new class{constructor(){(0,o.default)(this,"setObfuscationKey",(()=>{i.default.set(u.OBFUSCATION_KEY,a.default.utils.createNewGuid())}))}getObfuscationKey(){var e;const t=null!==(e=i.default.get(u.OBFUSCATION_KEY))&&void 0!==e&&e;return t||(this.setObfuscationKey(),i.default.get(u.OBFUSCATION_KEY))}resetObfuscationKey(){i.default.set(u.OBFUSCATION_KEY,null)}}},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/pwmSessionSettings":43}],69:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("./extPinningGuidanceSettings")),s=e("../../message-adapter/background");const{utils:{isntNil:a,isFunction:u}}=o.default;const l=new class{init(){s.messenger.subscribe(s.MESSAGES.DASHBOARD_MESSAGES.EXT_PINNING_GUIDANCE_STATUS,((e,t,r)=>{this._checkExtPinningGuidanceStatus(t)})),s.messenger.subscribe(s.MESSAGES.DASHBOARD_MESSAGES.STORE_EXT_PINNING_GUIDANCE_CLOSE,((e,t,r)=>{this._storeExtPinningGuidanceClose(e),t(!0)}))}_checkExtPinningGuidanceStatus(e){if(u(e)){e(!i.default.getExtPinningGuidanceStatus())}}_storeExtPinningGuidanceClose(e){a(e)&&i.default.setExtPinningGuidanceStatus(e)}};r.default=l},{"../../message-adapter/background":134,"./extPinningGuidanceSettings":70,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211}],70:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("common/constants")),s=n(e("core/background/baseSettings"));const{SETTINGS_CONTAINER:a,EXT_PINNING_GUIDANCE_CLOSED:u}=i.default.EXT_PINNING_GUIDANCE;class l extends s.default{constructor(e){super(),this.containerGUID=e}async initialize(){await this.initSettingsContainer(this.containerGUID)}getExtPinningGuidanceStatus(){return this.getValue(u)}setExtPinningGuidanceStatus(e,t){o.default.utils.isntNil(e)&&this.setValue(u,e,t)}}const c=new l(a);r.default=c},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.promise.js":437,"core/background/baseSettings":25}],71:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.regexp.exec.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("../utils/competitorUtils")),s=e("../utils/importConstants"),a=n(e("../utils/importUtils"));const{utils:u}=o.default,l="EXACT_HEADER",c="REGEX_HEADER",d="NON_EMPTY_VALUE_HEADERS",f=[[{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_URL,type:c,value:/URL/gi},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_NAME,type:c,value:/Title/gi},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.USERNAME,type:c,value:/Username/gi},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.PASSWORD,type:c,value:/Password/gi}],[{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_URL,type:l,value:"URL"},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_NAME,type:l,value:"URL"},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.USERNAME,type:c,value:/(.*)\(smtp_username\)/},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.PASSWORD,type:c,value:/(.*)\(password\)/}],[{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_URL,type:l,value:"urls"},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_NAME,type:l,value:"title"},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.USERNAME,type:l,value:"ainfo"},{field:s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.PASSWORD,type:d,ignoredHeaders:["urls","title","ainfo","autosubmit","email","Modified","notesPlain","scope","tags","uuid","httpRealm","formActionOrigin","guid","timeCreated","timeLastUsed","timePasswordChanged",/section:.*/],ignoredFieldValue:"ainfo"}]],{getEmptyVaultData:p}=a.default;r.default=class{getIndexOfPrefixColumn(e,t){const r=[];for(const n in e){const o=t.exec(e[n]);u.isNil(o)||(1===o.length&&r.push(o[0]),2===o.length&&r.push(o[1]))}for(const t in r){const n=e.indexOf(r[t]);if(-1!==n)return n}return-1}isHeaderInIgnoredList(e,t){for(const r in t){if(u.isString(t[r])){if(t[r]===e)return!0;continue}const n=t[r].exec(e);if(!u.isNil(n))return!0}return!1}getPossibleHeaderIndices(e,t){const r=[];for(const n in e){!1===this.isHeaderInIgnoredList(e[n],t)&&r.push(n)}return 0===r.length?null:r}getSchema(e){for(const t in f){let r={},n=!1;const o=f[t];for(const t in o){const i=o[t];let s=-1;if(i.type===l)s=e.indexOf(i.value);else if(i.type===c)s=this.getIndexOfPrefixColumn(e,i.value);else if(i.type===d){const t=this.getPossibleHeaderIndices(e,i.ignoredHeaders);if(u.isNil(t)){n=!0,r={};break}r[i.field]=t;continue}if(-1===s){n=!0,r={};break}r[i.field]=s}if(!1===n)return r}return null}convertToVaultFormat(e){const t={[s.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:i.default.convertToVaultLoginFormat(e)};return this.setVaultData(t),t}processLogins(e){if(u.isEmptyObject(e))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});let t=null;try{t=JSON.parse(e.data)}catch(e){return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}if(u.isEmptyObject(t))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});const r=[];let n=null;for(const e in t){if(0===parseInt(e,10)){if(n=this.getSchema(t[e]),u.isNil(n))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});continue}const o=this.createLoginItem(t[e],n);u.isntNil(o)&&r.push(o)}return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.SUCCESS,r)}createLoginItem(e,t){const r={};for(const n in t){if(!Array.isArray(t[n])){if(u.isNil(e[t[n]]))return null;r[n]=e[t[n]];continue}const o=t[n];let i=!1;for(const t in o)if(!(u.isNil(e[o[t]])||e[o[t]].length<1)){if(-1===Object.values(r).indexOf(e[o[t]])){r[n]=e[o[t]],i=!0;break}r[n]=e[o[t]],i=!0}if(!1===i)return null}return r[s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_NAME]===r[s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_URL]&&(r[s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_NAME]=i.default.getDomainFromUrl(r[s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_URL])),r}cleanupSettings(){this.setVaultData(p())}processItems(e){throw new Error("Method not applicable for commonImport module 2. Call processLogins")}}},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.regexp.exec.js":442}],72:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("../utils/competitorUtils")),s=e("../utils/importConstants"),a=n(e("../utils/importUtils"));const{utils:u}=o.default,l={siteName:0,url:1,username:2,password:3},c={siteName:0,url:1,username:2,password:4},d={siteName:0,url:1,username:2,password:5},f={username:0,siteName:3,password:4,url:6},p=[5,6,7,9];r.default=class{processItems(e){throw new Error("Method not applicable for Common Import module 1. Call processLogins")}processLogins(e){if(u.isEmptyObject(e))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});let t=null;try{if(t=JSON.parse(e.data),u.isNil(this.getSchemaForColumn(t[0].length)))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}catch(e){return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}if(u.isEmptyObject(t))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});const r=[];for(const e in t){const n=this.createLoginItem(t[e]);u.isntNil(n)&&r.push(n)}return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.SUCCESS,r)}getSchemaForColumn(e){let t=null;switch(e){case 5:t=l;break;case 6:t=c;break;case 7:t=d;break;case 9:t=f}return t}createLoginItem(e){if(!this.isValidLogin(e))return null;const t=this.getSchemaForColumn(e.length),r={};return r.username=e[t.username],r.password=e[t.password],r.siteUrl=e[t.url],u.isntNil(e[t.siteName])&&(r.siteName=e[t.siteName]),r}isValidLogin(e){if(!Array.isArray(e))return!1;if(p.indexOf(e.length)<0)return!1;const t=this.getSchemaForColumn(e.length);return!u.isNil(t)&&(!u.isEmptyObject(e[t.url])&&!u.isEmptyObject(e[t.siteName])&&(e[t.url]===e[t.siteName]||a.default.isURL(e[t.url])))}convertToVaultFormat(e){throw new Error("Implemented by child class")}cleanupSettings(){throw new Error("Implemented by child class")}}},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211}],73:[function(e,t,r){"use strict";e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.sort.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),s=n(e("common/constants")),a=n(e("core/background/pwmSessionSettings")),u=n(e("common/cryptoUtils")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("node-forge")),c=n(e("core/background/telemetry/telemetryWrapper")),d=e("../utils/importConstants"),f=n(e("../utils/importUtils"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}const{isntNil:h,isNil:_}=o.default.utils,E=i.default.utils,{getEmptyVaultData:g}=f.default,{BROWSER_IMPORT:m}=s.default.SESSION_STORAGE_KEYS;const y=new class{getVaultData(){var e;return null!==(e=a.default.get(m.VAULT_DATA))&&void 0!==e?e:g()}setVaultData(e){a.default.set(m.VAULT_DATA,e)}getSelectedSource(){var e;return null!==(e=a.default.get(m.SELECTED_SOURCE))&&void 0!==e?e:null}setSelectedSource(e){a.default.set(m.SELECTED_SOURCE,e)}initialize(e,t){this.setSelectedSource(e),this.importSettings=t}convertToVaultFormat(e){if(!Array.isArray(e.data))return null;const t=this.getVaultData();return e.data.forEach((e=>{const r=this.createLoginItemDict(e);h(r)&&t[d.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS].push(r)})),this.setVaultData(t),t}processLogins(e){if(!this.getSelectedSource()||!this.importSettings)throw new Error("Call initialize before processLogins() for browser import");if(_(e))return this.createDecryptResponse(d.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});let t=this.importSettings.getImportMgrKey(),r=this.importSettings.getImportMgrIV(),n=this.importSettings.getImportMgrTag();try{const o=JSON.parse(e.data);if(_(r)||_(t)||_(n)||!o.hasOwnProperty(d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.DATA))return this.createDecryptResponse(d.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});if(!this.check_data_integrity(o))return this.createDecryptResponse(d.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});t=atob(t),r=atob(r),n=atob(n);const i=u.default.decryptData(d.IMPORT_CONSTANTS.AES_ALGORITHM.GCM,t,r,atob(o[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.DATA]),n);return this.processDecryptedData(i)}catch(e){return this.createDecryptResponse(d.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}}cleanupSettings(){this.importSettings&&this.importSettings.resetContainer(),this.setVaultData(g())}processItems(e){throw new Error("Method not applicable for browser import. Use processLogins() instead")}createLoginItemDict(e){if(_(e))return null;if(_(e[d.IMPORT_CONSTANTS.BROWSER_IMPORT_JSON_SCHEMA.USERNAME]))return null;if(_(e[d.IMPORT_CONSTANTS.BROWSER_IMPORT_JSON_SCHEMA.PASSWORD]))return null;if(_(e[d.IMPORT_CONSTANTS.BROWSER_IMPORT_JSON_SCHEMA.SITE_NAME]))return null;if(_(e[d.IMPORT_CONSTANTS.BROWSER_IMPORT_JSON_SCHEMA.SITE_URL]))return null;const t={};return t.username=e[d.IMPORT_CONSTANTS.BROWSER_IMPORT_JSON_SCHEMA.USERNAME],t.password=e[d.IMPORT_CONSTANTS.BROWSER_IMPORT_JSON_SCHEMA.PASSWORD],t.siteName=e[d.IMPORT_CONSTANTS.BROWSER_IMPORT_JSON_SCHEMA.SITE_NAME],t.loginURL=e[d.IMPORT_CONSTANTS.BROWSER_IMPORT_JSON_SCHEMA.SITE_URL],t}check_data_integrity(e){var t;const r=null===(t=this.importSettings)||void 0===t?void 0:t.getImportMgrHashKey();if(_(r)||!e.hasOwnProperty(d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CODE))return!1;const n=l.hmac.create();n.start("sha256",atob(r)),n.update(atob(e[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.DATA]));return btoa(n.digest().getBytes())===e[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CODE]}processDecryptedData(e){let t=e;return(t instanceof ArrayBuffer||t instanceof Uint8Array)&&(t=E.createStringBufferFromUint8Buffer(t)),this.getLoginsData(t)}getLoginsData(e){let t=d.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR;try{const r=JSON.parse(e);let n=0,o=0;if(r.allLogins.hasOwnProperty(d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS)&&r.allLogins[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]===d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.FAILURE)return this.createDecryptResponse(t,{});for(const e in d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BROWSERS)if(o++,r.allLogins[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BROWSERS[e]].status===d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.FAILURE){n++;const{statusMessage:o}=r.allLogins[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BROWSERS[e]];let i=this.getSelectedSource().match(/\d/g);i=_(i)?"mac":i.join(""),c.default.sendImportToolFailure(e,i,o),o===d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ERROR_MASTER_PWD&&(t=d.IMPORT_CONSTANTS.RESPONSE_CODE.MASTER_PWD_USED)}else r.allLogins[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BROWSERS[e]].status===d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.SUCCESS||n++;return n===o?this.createDecryptResponse(t,r):this.createDecryptResponse(d.IMPORT_CONSTANTS.RESPONSE_CODE.SUCCESS,r)}catch(e){return this.createDecryptResponse(t,{})}}createDecryptResponse(e,t){return{[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:e,[d.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:t}}};r.default=y},{"../utils/importConstants":92,"../utils/importUtils":93,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"common/constants":13,"common/cryptoUtils":14,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.typed-array.fill.js":447,"core-js/modules/es.typed-array.set.js":448,"core-js/modules/es.typed-array.sort.js":449,"core-js/modules/es.typed-array.uint8-array.js":450,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/pwmSessionSettings":43,"core/background/telemetry/telemetryWrapper":55,"node-forge":"node-forge"}],74:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/constants")),i=n(e("core/background/pwmSessionSettings")),s=n(e("../utils/competitorUtils")),a=e("../utils/importConstants"),u=n(e("../utils/importUtils")),l=n(e("./baseModuleOnColumnPosition"));const{CHROME_IMPORT:c}=o.default.SESSION_STORAGE_KEYS,{getEmptyVaultData:d}=u.default;class f extends l.default{getVaultData(){var e;return null!==(e=i.default.get(c.VAULT_DATA))&&void 0!==e?e:d()}setVaultData(e){i.default.set(c.VAULT_DATA,e)}convertToVaultFormat(e){const t={[a.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:s.default.convertToVaultLoginFormat(e)};return this.setVaultData(t),this.getVaultData()}cleanupSettings(){this.setVaultData(d())}}const p=new f;r.default=p},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"./baseModuleOnColumnPosition":72,"@babel/runtime/helpers/interopRequireDefault":208,"common/constants":13,"core/background/pwmSessionSettings":43}],75:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("core/background/telemetry/telemetryWrapper")),s=n(e("../../utils/competitorUtils")),a=e("../../utils/importConstants"),u=n(e("./legacyCSWImporter")),l=n(e("./pwmImporter")),c=n(e("./schemas/pwmV1.json")),d=n(e("./schemas/pwmV2.json"));const{isString:f,isEmptyObject:p}=o.default.utils,h=[{prop:e=>JSON.stringify(["url","username","password","name","grouping","extra"])===JSON.stringify(e[0]),parser:u.default,schema:{}},{prop:e=>"BB633E3B-1DEC-47FC-9F9A-0301E80FE6C0"===e[1][0]&&"1.0"===e[1][1]&&"8.0.2.67"===e[1][3],parser:l.default,schema:d.default},{prop:e=>"BB633E3B-1DEC-47FC-9F9A-0301E80FE6C0"===e[1][0]&&"1.0"===e[1][1]&&"8.0.2.67"!==e[1][3],parser:l.default,schema:c.default},{prop:e=>"BB633E3B-1DEC-47FC-9F9A-0301E80FE6C0"===e[1][0]&&"2.0"===e[1][1],parser:l.default,schema:d.default}];const _=new class{processItems(e){if(!f(e))return s.default.createProcessCSWCSVResponse(a.IMPORT_CONSTANTS.RESPONSE_CODE.DATA_ERROR_JSON,{});let t=null;try{t=JSON.parse(e)}catch(e){return s.default.createProcessCSWCSVResponse(a.IMPORT_CONSTANTS.RESPONSE_CODE.DATA_ERROR_JSON,{})}if(p(t)||!Array.isArray(t))return s.default.createProcessCSWCSVResponse(a.IMPORT_CONSTANTS.RESPONSE_CODE.DATA_ERROR_ARRAY,{});const r=h.find((e=>e.prop(t)));if(!r)return s.default.createProcessCSWCSVResponse(a.IMPORT_CONSTANTS.RESPONSE_CODE.SCHEMA_ERROR,{});const n=r.parser===u.default?i.default.NORTON_IMPORT_FLOW.LABEL_CSW_CSV:i.default.NORTON_IMPORT_FLOW.LABEL_NPW_CSV;return i.default.sendEventTelemetry(i.default.TELEMETRY_CATEGORY.UI_TELEMETRY,i.default.NORTON_IMPORT_FLOW.ACTION,n,i.default.NORTON_IMPORT_FLOW.DOCUMENT_TITLE),s.default.createProcessCSWCSVResponse(a.IMPORT_CONSTANTS.RESPONSE_CODE.SUCCESS,r.parser.processCSVItems(t,r.schema))}convertToVaultFormat(e){throw new Error("Method not applicable for CSW.")}processLogins(e){throw new Error("Method not applicable for CSW. call processItems() instead")}cleanupSettings(){}};r.default=_},{"../../utils/competitorUtils":91,"../../utils/importConstants":92,"./legacyCSWImporter":76,"./pwmImporter":77,"./schemas/pwmV1.json":78,"./schemas/pwmV2.json":79,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core/background/telemetry/telemetryWrapper":55}],76:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=e("feature/import/utils/importConstants");const{isntNil:s,urlWithoutQueryParameters:a}=o.default.utils,u=0,l=1,c=2,d=3,f=5;const p=new class{processCSVItems(e,t){const r=[],n=[];return e.forEach(((e,t)=>{if(0===t)return;const o=this.determineItemType(e);if(o===i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA){const t=this.createCSWLoginItem(e);s(t)&&r.push(t)}else if(o===i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA){const t=this.createCSWNoteItem(e);s(t)&&n.push(t)}})),{loginData:r,noteData:n}}createCSWLoginItem(e){const t={};return t.username=e[l],t.password=e[c],t.loginURL=e[u],s(e[d])&&(t.siteName=e[d]),t}createCSWNoteItem(e){const t={};return t.title=e[d],t.information=e[f],t}determineItemType(e){const t=e[l],r=e[d],n=e[u],o=e[d],c=e[f];if(s(n)&&0!==n.length){if(a(n)===i.IMPORT_CONSTANTS.CSW_NOTES_URL&&s(o)&&0!==o.length&&s(c)&&0!==c.length)return i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA}return s(t)&&0!==t.length&&s(r)&&0!==r.length?i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA:"InvalidItem"}};r.default=p},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"feature/import/utils/importConstants":92}],77:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("feature/seamlessOnboarding/seamlessOnboardingKeys")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const a=new class{constructor(){(0,o.default)(this,"constructLoginItem",((e,t)=>{const r={};return Object.keys(t).forEach((n=>{r[n]=e[t[n]]})),this.sanitizeSecureAndFavoriteFields(r),r})),(0,o.default)(this,"constructNoteItem",((e,t)=>{const r={};return Object.keys(t).forEach((n=>{r[n]=e[t[n]]})),this.sanitizeSecureAndFavoriteFields(r),r})),(0,o.default)(this,"constructBankAccountItem",((e,t)=>{const r={};return Object.keys(t).forEach((n=>{r[n]=e[t[n]]})),this.sanitizeSecureAndFavoriteFields(r),r})),(0,o.default)(this,"constructCreditCardItem",((e,t)=>{const r={};return Object.keys(t).forEach((n=>{r[n]=e[t[n]]})),this.sanitizeSecureAndFavoriteFields(r),r})),(0,o.default)(this,"constructAddressItem",((e,t,r)=>{const n={},o={},i={identityNode:o,addressNode:n};return Object.keys(r).forEach((t=>{n[t]=e[r[t]]})),Object.keys(t).forEach((r=>{o[r]=e[t[r]]})),this.sanitizeSecureAndFavoriteFields(i.identityNode),this.sanitizeGenderField(i.identityNode),i})),(0,o.default)(this,"sanitizeGenderField",(e=>{s.default.utils.isNil(e.gender)||0===e.gender.length||(e.gender="F"!==e.gender)})),(0,o.default)(this,"sanitizeSecureAndFavoriteFields",(e=>{const t=i.default.getIsSeamlesslyOnboardedViaMobile();e.secure=!t&&"true"==e.secure,e.favorite="true"==e.favorite}))}processCSVItems(e,t){const r=[],n=[],o=[],i=[],s=[];return e.forEach((e=>{switch(e[0]){case"login":r.push(this.constructLoginItem(e,t.loginSchema));break;case"notes":n.push(this.constructNoteItem(e,t.notesSchema));break;case"bankAccount":s.push(this.constructBankAccountItem(e,t.bankAccountSchema));break;case"creditCard":o.push(this.constructCreditCardItem(e,t.creditCardSchema));break;case"address":i.push(this.constructAddressItem(e,t.identitySchema,t.addressSchema))}})),{loginData:r,noteData:n,creditCardData:o,addressData:i,bankAccountData:s}}};r.default=a},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"feature/seamlessOnboarding/seamlessOnboardingKeys":107}],78:[function(e,t,r){t.exports={loginSchema:{username:1,password:2,siteName:3,loginURL:4,notes:5,secure:6,favorite:7},notesSchema:{title:1,information:2,secure:3,favorite:4},bankAccountSchema:{accountName:1,ownerName:2,routingNumber:3,accountNumber:4,bankName:5,secure:6,favorite:7},creditCardSchema:{cardName:1,cardType:2,identityCard:3,cardNumber:4,nameOnCard:5,expMonth:6,expYear:7,startDay:8,startYear:9,issueNumber:10,countryRegion:11,cardComments:12,secure:13,favorite:14},identitySchema:{salutation:1,firstName:2,middleName:3,lastName:4,lastName2:5,firstNameAlphabet:6,lastNameAlphabet:7,firstNameRoman:8,lastNameRoman:9,dobDay:10,dobMonth:11,dobYear:12,email:13,work:14,home:15,mobile:16,extension:17,gender:18,cardName:19,region:20,secure:32,favorite:33},addressSchema:{city:21,postal:22,state:23,street:24,street2:25,street3:26,apt:27,cityAlphabet:28,streetAlphabet:29,street2Alphabet:30,addressName:31}}},{}],79:[function(e,t,r){t.exports={loginSchema:{username:1,password:2,siteName:3,loginURL:4,notes:5,secure:6,favorite:7},notesSchema:{title:1,information:2,secure:3,favorite:4},bankAccountSchema:{accountName:1,ownerName:2,routingNumber:3,accountNumber:4,bankName:5,secure:6,favorite:7,iban:8,swiftCode:9},creditCardSchema:{cardName:1,cardType:2,identityCard:3,cardNumber:4,nameOnCard:5,expMonth:6,expYear:7,startDay:8,startYear:9,issueNumber:10,countryRegion:11,cardComments:12,secure:13,favorite:14,cardPin:15,cvc:16},identitySchema:{salutation:1,firstName:2,middleName:3,lastName:4,lastName2:5,firstNameAlphabet:6,lastNameAlphabet:7,firstNameRoman:8,lastNameRoman:9,dobDay:10,dobMonth:11,dobYear:12,email:13,work:14,home:15,mobile:16,extension:17,gender:18,cardName:19,region:20,secure:34,favorite:35},addressSchema:{city:21,postal:22,state:23,street:24,street2:25,street3:26,apt:27,cityAlphabet:28,streetAlphabet:29,street2Alphabet:30,cityDistrictWardAndNumbers:31,buildingNameAndFloor:32,addressName:33}}},{}],80:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/constants")),i=n(e("core/background/pwmSessionSettings")),s=n(e("../utils/competitorUtils")),a=e("../utils/importConstants"),u=n(e("../utils/importUtils")),l=n(e("./baseModuleOnColumnPosition"));const{DASHLANE_IMPORT:c}=o.default.SESSION_STORAGE_KEYS,{getEmptyVaultData:d}=u.default;class f extends l.default{getVaultData(){var e;return null!==(e=i.default.get(c.VAULT_DATA))&&void 0!==e?e:d()}setVaultData(e){i.default.set(c.VAULT_DATA,e)}convertToVaultFormat(e){const t={[a.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:s.default.convertToVaultLoginFormat(e)};return this.setVaultData(t),this.getVaultData()}cleanupSettings(){this.setVaultData(d())}}const p=new f;r.default=p},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"./baseModuleOnColumnPosition":72,"@babel/runtime/helpers/interopRequireDefault":208,"common/constants":13,"core/background/pwmSessionSettings":43}],81:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/constants")),i=n(e("core/background/pwmSessionSettings")),s=n(e("../utils/competitorUtils")),a=e("../utils/importConstants"),u=n(e("../utils/importUtils")),l=n(e("./baseModuleOnColumnPosition"));const{EDGE_IMPORT:c}=o.default.SESSION_STORAGE_KEYS,{getEmptyVaultData:d}=u.default;class f extends l.default{getVaultData(){var e;return null!==(e=i.default.get(c.VAULT_DATA))&&void 0!==e?e:d()}setVaultData(e){i.default.set(c.VAULT_DATA,e)}convertToVaultFormat(e){const t={[a.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:s.default.convertToVaultLoginFormat(e)};return this.setVaultData(t),this.getVaultData()}cleanupSettings(){this.setVaultData(d())}}const p=new f;r.default=p},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"./baseModuleOnColumnPosition":72,"@babel/runtime/helpers/interopRequireDefault":208,"common/constants":13,"core/background/pwmSessionSettings":43}],82:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("../utils/competitorUtils")),s=e("../utils/importConstants"),a=n(e("../utils/importUtils")),u=n(e("core/background/pwmSessionSettings")),l=n(e("common/constants"));const{utils:c}=o.default,d={siteName:0,url:1,username:2,password:3},f={siteName:0,url:1,username:2,password:4},p={siteName:0,url:1,username:2,password:5},h={username:1,password:2,url:0},_=[5,6,7,9],{FIREFOX_IMPORT:E}=l.default.SESSION_STORAGE_KEYS,{getEmptyVaultData:g}=a.default;const m=new class{getVaultData(){var e;return null!==(e=u.default.get(E.VAULT_DATA))&&void 0!==e?e:g()}setVaultData(e){u.default.set(E.VAULT_DATA,e)}processItems(e){throw new Error("Method not applicable for Common Import module 1. Call processLogins")}processLogins(e){if(c.isEmptyObject(e))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});let t=null;try{if(t=JSON.parse(e.data),c.isNil(this.getSchemaForColumn(t[0].length)))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}catch(e){return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}if(c.isEmptyObject(t))return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});const r=[];for(const e in t){const n=this.createLoginItem(t[e]);c.isntNil(n)&&r.push(n)}return i.default.createProcessLoginsResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.SUCCESS,r)}getSchemaForColumn(e){let t=null;switch(e){case 5:t=d;break;case 6:t=f;break;case 7:t=p;break;case 9:t=h}return t}createLoginItem(e){if(!this.isValidLogin(e))return null;const t=this.getSchemaForColumn(e.length),r={};return r.username=e[t.username],r.password=e[t.password],r.siteUrl=e[t.url],r.siteName=o.default.utils.baseURL(r.siteUrl),r}isValidLogin(e){if(!Array.isArray(e))return!1;if(_.indexOf(e.length)<0)return!1;const t=this.getSchemaForColumn(e.length);return!c.isNil(t)&&!c.isEmptyObject(e[t.url])}convertToVaultFormat(e){const t={[s.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:i.default.convertToVaultLoginFormat(e)};return this.setVaultData(t),this.getVaultData()}cleanupSettings(){this.setVaultData(g())}};r.default=m},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/pwmSessionSettings":43}],83:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js");var i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=e("locale"),a=n(e("common/constants")),u=n(e("common/constants/uiConstants")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),c=n(e("core/background/signin")),d=n(e("core/background/dashboardUIController")),f=n(e("feature/partnerSupport/partnerParams")),p=e("./../../../../redux-core/store/configureStore"),h=e("./../../../../redux-core/features/import/importSlice"),_=e("@reduxjs/toolkit"),E=n(e("core/background/telemetry/telemetryWrapper")),g=n(e("core/background/pwmSessionSettings")),m=e("core/background/commonUtilsBG"),y=e("telemetry/types"),S=n(e("telemetry/background")),T=e("telemetry/constants"),A=e("common/global.types"),b=e("telemetry/types/lifecycleTelemetry.types"),O=n(e("core/background/store/telemetryInfoStore")),I=e("../../../../redux-core/action-types"),v=e("../../../message-adapter/background"),N=e("../utils/competitorFactoryMap"),R=n(e("../utils/importUtils")),C=e("../utils/importConstants"),D=n(e("./browserImport")),w=n(e("../utils/competitorUtils")),L=e("../utils/browserImportSettings");function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}const{uiConstants:{NOTIFICATION:M}}=i.default.constants,{extensionAdapter:U,logger:j,utils:k}=i.default,x=new Map;x.set(C.IMPORT_CONSTANTS.PARTNER.BT,C.IMPORT_CONSTANTS.PASSWORD_MANAGER.TRUEKEY),x.set(C.IMPORT_CONSTANTS.PARTNER.EE,C.IMPORT_CONSTANTS.PASSWORD_MANAGER.TRUEKEY);const F=(0,s.getIntlData)(),{IMPORT_MANAGER:B}=a.default.SESSION_STORAGE_KEYS;const G=new class{constructor(){(0,o.default)(this,"onBeforeRequest",(()=>e=>{const t=new URL(e.url);k.urlWithoutQueryParameters(e.url,!0)===C.IMPORT_CONSTANTS.PORTAL_BASE_URL&&(k.isNil(t.searchParams.get("K1"))||k.isNil(t.searchParams.get("K2"))||k.isNil(t.searchParams.get("K3"))||k.isNil(t.searchParams.get("K4"))?U.closeTab(e.tabId):(this.browserImportSettings.setImportMgrKey(t.searchParams.get("K1")),this.browserImportSettings.setImportMgrIV(t.searchParams.get("K2")),this.browserImportSettings.setImportMgrHashKey(t.searchParams.get("K3")),this.browserImportSettings.setImportMgrTag(t.searchParams.get("K4")),U.closeTabAndEnsureBrowserIsAlive(e.tabId),this.setImportDiscontinueFlow(e)))})),(0,o.default)(this,"startListeners",(e=>{p.listenerMiddleware.startListening({matcher:(0,_.isAnyOf)(h.importAllItems.fulfilled,h.importAllItems.rejected),effect:async(t,r)=>{if((0,_.isRejected)(t)){const t={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.VAULT_SYNCH_FAILED,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.REASON]:""};e({payload:t})}else S.default.track(T.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVED),this.createVaultSyncSuccessResponseAndNotification(e);r.unsubscribe()}})})),this.handleDeleteFileNotification=this.handleDeleteFileNotification.bind(this),this.handleOKButtonClick=this.handleOKButtonClick.bind(this),this.handleImportClick=this.handleImportClick.bind(this),this.handleNoThanksClick=this.handleNoThanksClick.bind(this),this.handleContinueImportNotificationClose=this.handleContinueImportNotificationClose.bind(this)}init(e){this.store=e,this.onBeforeRequest=this.onBeforeRequest.bind(this),v.messenger.subscribe(C.IMPORT_CONSTANTS.HANDLE_COMPETITOR_IMPORT,((e,t)=>{this.handleMessage(e.processID,e,t)})),v.messenger.subscribe(C.IMPORT_CONSTANTS.SET_BROWSER_DOWNLOAD_CONTEXT,((e,t)=>{this.setBrowserImportContext(e.context)})),v.messenger.subscribe(C.IMPORT_CONSTANTS.GET_BROWSER_DOWNLOAD_CONTEXT,((e,t)=>{null==t||t(this.getBrowserImportContext())})),this.browserImportSettings=new L.BrowserImportSettings,U.addOnBeforeRequestEventListener(this.onBeforeRequest(),[C.IMPORT_CONSTANTS.PORTAL_PROCESSING_URL],[])}getImportedFileName(){return g.default.get(B.IMPORTED_FILE_NAME)}setImportedFileName(e){g.default.set(B.IMPORTED_FILE_NAME,e)}getDeleteFileNotificationID(){var e;return null!==(e=g.default.get(B.DELETE_FILE_NOTIFICATION_ID))&&void 0!==e?e:null}setDeleteFileNotificationID(e){g.default.set(B.DELETE_FILE_NOTIFICATION_ID,e)}getContinueImportNotificationID(){var e;return null!==(e=g.default.get(B.CONTINUE_IMPORT_NOTIFICATION_ID))&&void 0!==e?e:null}setContinueImportNotificationID(e){return g.default.set(B.CONTINUE_IMPORT_NOTIFICATION_ID,e)}getVaultTab(){var e;return null!==(e=g.default.get(B.TAB))&&void 0!==e?e:null}setVaultTab(e){return g.default.set(B.TAB,e)}setBrowserImportContext(e){return g.default.set(a.default.SESSION_STORAGE_KEYS.BROWSER_IMPORT.CONTEXT,e)}getBrowserImportContext(){var e;return null!==(e=g.default.get(a.default.SESSION_STORAGE_KEYS.BROWSER_IMPORT.CONTEXT))&&void 0!==e?e:null}getOpenModalURL(){var e;return null!==(e=g.default.get(B.OPEN_MODAL_URL))&&void 0!==e?e:null}setOpenModalURL(e){g.default.set(B.OPEN_MODAL_URL,e)}handleMessage(e,t,r){switch(e){case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_BROWSER_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_LASTPASS_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_DASHLANE_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_CHROME_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_FIREFOX_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_SAFARI_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_EDGE_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_ONEPASS_LOGINS:return this.importLogins(N.COMPETITOR_FACTORY_MAP[e].factory,t,r),!0;case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_KASPERSKY_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_TRUE_KEY:case C.IMPORT_CONSTANTS.MESSAGES.IMPORT_CSW_LOGINS:return this.importBulkItems(N.COMPETITOR_FACTORY_MAP[e].factory,t,r),!0;case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_LASTPASS_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_DASHLANE_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_CHROME_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_SAFARI_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_FIREFOX_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_EDGE_LOGINS:case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_ONEPASS_LOGINS:return this.setImportedFileName(t.fileName),this.processCompetitorLogins(N.COMPETITOR_FACTORY_MAP[e].competitor,N.COMPETITOR_FACTORY_MAP[e].factory,t,r),!0;case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_KASPERSKY_LOGINS:return this.setImportedFileName(t.fileName),this.processKasperskyData(N.COMPETITOR_FACTORY_MAP[e].competitor,N.COMPETITOR_FACTORY_MAP[e].factory,t,r),!0;case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_BROWSER_LOGINS:return this.setImportedFileName(t.fileName),this.processCompetitorLogins(N.COMPETITOR_FACTORY_MAP[e].competitor,this.createBrowserImport(this.getImportedFileName()),t,r),!0;case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_TRUE_KEY:case C.IMPORT_CONSTANTS.MESSAGES.PROCESS_CSW_LOGINS:return this.setImportedFileName(t.fileName),this.processVaultItems(N.COMPETITOR_FACTORY_MAP[e].factory,t,r),!0;case C.IMPORT_CONSTANTS.MESSAGES.OPEN_COMPETITOR_LEARNMORE:return this.openLearnMoreLink(),!1;default:return!1}}processCompetitorLogins(e,t,r,n){let o={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:[]};try{if(o=t.processLogins(r),e!==C.IMPORT_CONSTANTS.BROWSER)return o.loginData=R.default.sanitizeLoginData(e,o.loginData),void n({payload:o});if(k.isNil(o.loginData))return void n({payload:o});const{allLogins:i}=o.loginData;if(k.isNil(i))return void n({payload:o});Object.keys(i).forEach((t=>{const r=i[t].logins;k.isNil(r)||Object.keys(r).forEach((t=>{const n=r[t];k.isNil(n.items)||(n.items=R.default.sanitizeLoginData(e,n.items))}))}))}catch(e){o={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:[]}}n({payload:o})}processKasperskyData(e,t,r,n){let o={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]:[]};try{if(o=t.processLogins(r),e!==C.IMPORT_CONSTANTS.BROWSER)return o.loginData=R.default.sanitizeKasperskyLoginData(o.loginData),o.noteData=R.default.sanitizeNoteData(o.noteData),void n({payload:o})}catch(e){o={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]:[]}}n({payload:o})}handleImportClick(){O.default.setTelemetryInfo({appName:A.AppName.ONBOARD_SETUP,contextScreen:b.AppOpenContextScreen.InfieldNotification,contextAction:b.AppOpenContextActionInfieldNotification.Import,canSendAppOpenEvent:!0}),d.default.setOverrideToUrl(this.getOpenModalURL()),c.default.openLoginFlow();new Promise((e=>{setTimeout((()=>{e()}),500)})).then((()=>U.closeTab(this.getVaultTab().tabId))),E.default.sendEventTelemetry(E.default.TELEMETRY_CATEGORY.UI_TELEMETRY,E.default.actionType.ACTION.CLICK,E.default.IMPORT_NOTIFICATION.LABELS.IMPORT_BUTTON,E.default.IMPORT_NOTIFICATION.DOCUMENT_TITLE)}handleNoThanksClick(){U.closeTab(this.getVaultTab().tabId),E.default.sendEventTelemetry(E.default.TELEMETRY_CATEGORY.UI_TELEMETRY,E.default.actionType.ACTION.CLICK,E.default.IMPORT_NOTIFICATION.LABELS.NO_THANKS_BUTTON,E.default.IMPORT_NOTIFICATION.DOCUMENT_TITLE)}handleContinueImportNotificationClose(){U.closeTab(this.getVaultTab().tabId),E.default.sendEventTelemetry(E.default.TELEMETRY_CATEGORY.UI_TELEMETRY,E.default.actionType.ACTION.CLICK,E.default.IMPORT_NOTIFICATION.LABELS.NOTIFICATION_CLOSE,E.default.IMPORT_NOTIFICATION.DOCUMENT_TITLE)}handleContinueImportNotification(e){switch(e){case M.MESSAGES.DEFAULT_BUTTON_PRESSED:this.handleImportClick();break;case M.MESSAGES.SECONDARY_LINK_PRESSED:this.handleNoThanksClick();break;case M.MESSAGES.NOTIFICATION_CLOSED:this.handleContinueImportNotificationClose();break;default:j.error("Unexpected Event from Continue Import notification")}this.setOpenModalURL(null),this.setVaultTab(null)}setImportDiscontinueFlow(e,t={},r=!0){if(!0===(0,m.isPartnerInImportDiscontinueExclusionList)())return;const{isTruekeyImport:n=!1,isCSWImport:o=!1}=t,s=`${u.default.SETTINGS_URL}?modal=import-vault-modal&isImportDiscontinueFlow=true&isCSWImport=${o}&isTruekeyImport=${n}`;if(l.vaultKeys.isLocked())if(r){this.setOpenModalURL(s),this.setVaultTab(e);const t=a.default.NOTIFICATION_ICON_TYPES.UNSURE_ICON,r=F.formatMessage({id:"import.discontinue.message",defaultMessage:"Continue importing logins into your vault?"}),n=new i.default.QuestionNotification(r,{},F.formatMessage({id:"import.discontinue.button.import",defaultMessage:"Import"}),(()=>{this.handleImportClick()}),t,void 0,void 0,M.TYPE.QUESTION,void 0,void 0,{height:172});n.addSecondaryLink(F.formatMessage({id:"not.now",defaultMessage:"Not now"}),(()=>{this.handleNoThanksClick()})),n.addCloseButtonAction((()=>{this.handleContinueImportNotificationClose()})),i.default.notificationCenter.addNotification(n),this.setContinueImportNotificationID(n.getID())}else d.default.setOverrideToUrl(s),c.default.openLoginFlow({useNudgePageForLogin:!0});else d.default.openDashboardUI(s)}openLearnMoreLink(){const e=C.IMPORT_CONSTANTS.LEARN_MORE_URL,t=F.locale;let r=e.replace("ISO3_LAN_CODE",t);const n=f.default.getPartnerParamString();k.isntNil(n)&&(r+=n),U.createTab(r)}createBrowserImport(e){const t=D.default;return D.default.initialize(e,this.browserImportSettings),t}processVaultItems(e,t,r){let n={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BANKACCOUNTDATA]:[]};try{const o=e.processItems(t.data);return k.isntNil(o.loginData)&&0!==o.loginData.length&&(n.loginData=R.default.sanitizeTrueKeyLoginData(o.loginData)),k.isntNil(o.creditCardData)&&0!==o.creditCardData.length&&(n.creditCardData=R.default.sanitizeCreditCardData(o.creditCardData)),k.isntNil(o.addressData)&&0!==o.addressData.length&&(n.addressData=R.default.sanitizeAddressData(o.addressData)),k.isntNil(o.noteData)&&0!==o.noteData.length&&(n.noteData=R.default.sanitizeNoteData(o.noteData)),k.isntNil(o.bankAccountData)&&0!==o.bankAccountData.length&&(n.bankAccountData=R.default.sanitizeBankAccountData(o.bankAccountData)),k.isntNil(o.schemaError)&&(n.schemaError=o.schemaError),n.status=o.status,void r({payload:n})}catch(e){n={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]:[],[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BANKACCOUNTDATA]:[]}}r({payload:n})}importLogins(e,t,r){const n={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.VAULT_SYNCH_FAILED};if(k.isNil(e))r({payload:n});else try{let o=null;if(o=e.convertToVaultFormat(t),e.cleanupSettings(),k.isNil(o))return void r({payload:n});this.bulkUpload(o,r)}catch(e){r({payload:n})}}importBulkItems(e,t,r){const n={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.VAULT_SYNCH_FAILED,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.REASON]:"",[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ERROR_MESSAGE]:""};try{if(k.isNil(t))return void r({payload:n});e.cleanupSettings(),this.bulkUpload(t.data,r)}catch(e){r({payload:n})}}trackItemSavedEvent(e){var t,r,n,o,i;const s={[A.ItemCategory.Login]:null!==(t=e.logins)&&void 0!==t?t:[],[A.ItemCategory.Note]:null!==(r=e.notes)&&void 0!==r?r:[],[A.ItemCategory.Address]:null!==(n=e.addressess)&&void 0!==n?n:[],[A.ItemCategory.BankAccount]:null!==(o=e.bankAccounts)&&void 0!==o?o:[],[A.ItemCategory.CreditCard]:null!==(i=e.cards)&&void 0!==i?i:[]},a=Object.keys(s).filter((e=>s[e].length>0)).join(", ");S.default.cacheActionData(T.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVE,{category:a,context:y.ItemSaveContext.Import}),S.default.cacheActionData(T.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVED,{context:y.ItemSaveContext.Import,category:a.length>0?a:void 0,touchPoint:A.TouchPoint.VAULT_UI})}async bulkUpload(e,t){try{var r;const n=w.default.convertToBulkUploadFormat(e);this.startListeners(t),null===(r=this.store)||void 0===r||r.dispatch({type:I.IMPORT_ALL_ACTION,payload:n}),this.trackItemSavedEvent(n)}catch(e){t({payload:{[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.VAULT_SYNCH_FAILED,[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.REASON]:e.message}})}}handleOKButtonClick(){this.setDeleteFileNotificationID(null)}handleDeleteFileNotification(e){switch(e){case M.MESSAGES.DEFAULT_BUTTON_PRESSED:this.handleOKButtonClick();break;case M.MESSAGES.NOTIFICATION_CLOSED:this.setDeleteFileNotificationID(null);break;default:j.error("Unexpected Event from Delete File notification")}}createVaultSyncSuccessResponseAndNotification(e){const t={[C.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:C.IMPORT_CONSTANTS.RESPONSE_CODE.VAULT_SYNCH_SUCCESS};if(k.isntNil(this.getImportedFileName()))try{const e=F.formatMessage({id:"delete.imported.file",defaultMessage:"We strongly recommend deleting this file to help protect your personal data: {fileName}"},{fileName:this.getImportedFileName()}),t=F.formatMessage({id:"consider.deleting.file",defaultMessage:"Consider deleting this file"}),r=F.formatMessage({id:"import.got.it.button",defaultMessage:"Got it"}),n=a.default.NOTIFICATION_ICON_TYPES.ALERT_ICON,o=new i.default.QuestionNotification(e,{},r,this.handleOKButtonClick,n,t,void 0,M.TYPE.QUESTION,void 0,void 0,{height:205});i.default.notificationCenter.addNotification(o),this.setDeleteFileNotificationID(o.getID())}catch(e){i.default.logger.error(`Error showing delete file notification. ${e.message}, ${e}`)}e({payload:t})}};r.default=G},{"../../../../redux-core/action-types":726,"../../../message-adapter/background":134,"../utils/browserImportSettings":89,"../utils/competitorFactoryMap":90,"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"./../../../../redux-core/features/import/importSlice":735,"./../../../../redux-core/store/configureStore":743,"./browserImport":73,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"@reduxjs/toolkit":224,"common/constants":13,"common/constants/uiConstants":9,"common/global.types":16,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core-js/modules/web.dom-collections.iterator.js":453,"core-js/modules/web.url-search-params.js":455,"core-js/modules/web.url.js":457,"core/background/commonUtilsBG":27,"core/background/dashboardUIController":29,"core/background/pwmSessionSettings":43,"core/background/signin":47,"core/background/store/telemetryInfoStore":50,"core/background/telemetry/telemetryWrapper":55,"feature/partnerSupport/partnerParams":96,locale:131,"telemetry/background":170,"telemetry/constants":173,"telemetry/types":186,"telemetry/types/lifecycleTelemetry.types":188}],84:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("../utils/competitorUtils")),s=e("../utils/importConstants"),a=n(e("../utils/importUtils")),u=n(e("../../../core/background/pwmSessionSettings")),l=n(e("../../../common/constants"));const{isObject:c}=o.default.utils,{utils:d}=o.default,f={siteName:{mappings:[{key:"Login name",priority:1},{key:"Website name",priority:2},{key:"Account name",priority:3},{key:"Application",priority:4},{key:"Login",priority:5}]},loginURL:{mappings:[{key:"Website URL",priority:1,useHTTPSProtocol:!0},{key:"Application",priority:2},{key:"Account name",priority:2}],addPrefix:!0},username:{mappings:[{key:"Login",priority:1}]},password:{mappings:[{key:"Password",priority:1}]},notes:{mappings:[{key:"Comment",priority:1}],allowMultiple:!0},title:{mappings:[{key:"Name",priority:1}],isNote:!0},information:{mappings:[{key:"Text",priority:1}],isNote:!0,allowMultiple:!0}},{KASPERSKY_IMPORT:p}=l.default.SESSION_STORAGE_KEYS,{getEmptyVaultData:h}=a.default,_={},E=()=>{for(const e of Object.keys(f))_[e]=10},g={};const m=new class{constructor(){(()=>{for(const[e,t]of Object.entries(f))t.mappings.forEach((r=>{g[r.key]||(g[r.key]=[]),g[r.key].push({schemaKey:e,priority:r.priority,isNote:t.isNote,allowMultiple:t.allowMultiple})}))})(),E()}filterInvalidEntries(e){if(!e&&c(e))return{loginData:[],noteData:[]};let{loginData:t,noteData:r}=e;return t=Array.isArray(t)?t.filter((e=>e&&e.hasOwnProperty(s.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_NAME))):[],r=Array.isArray(r)?r.filter((e=>e&&e.hasOwnProperty(s.IMPORT_CONSTANTS.NOTE_SCHEMA.TITLE))):[],{loginData:t,noteData:r}}getVaultData(){var e;return null!==(e=u.default.get(p.VAULT_DATA))&&void 0!==e?e:h()}setVaultData(e){u.default.set(p.VAULT_DATA,e)}isKasperskyArray(e){return Array.isArray(e)&&1===e.length}isDelimiter(e){return this.isKasperskyArray(e)&&"---"===e[0]}isDataValidToImport(e){if(!this.isKasperskyArray(e))return!1;const t=e[0].split(":");return f.hasOwnProperty(t[0].trim())}processLogins(e){if(d.isEmptyObject(e))return i.default.createProcessResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});let t;try{t=JSON.parse(e.data)}catch(e){return i.default.createProcessResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}if(d.isEmptyObject(t))return i.default.createProcessResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});const r=[],n=[];let o={},u={},l="",c="";const f=()=>{if(l&&c){const e=g[l];e&&e.forEach((e=>{const{schemaKey:t,priority:r,isNote:n,allowMultiple:i,useHTTPSProtocol:s}=e,l=n?u:o;if(r<_[t]||i){let e=c;s&&!a.default.isURL(c)&&(e=a.default.setHTTPSProtocol(c)),i&&l[t]?l[t]+=`\n${e}`:(l[t]=e,i||(_[t]=r))}})),l="",c=""}},p=()=>{f(),d.isEmptyObject(o)||r.push(o),d.isEmptyObject(u)||n.push(u),o={},u={},E()};E(),t.forEach((e=>{if(!this.isKasperskyArray(e))return;if(this.isDelimiter(e))return void p();const t=e[0].trim();if(""===t)return;const r=e=>{c?c+=`\n${e}`:c=e},n=t.indexOf(":");if(-1!==n){const e=t.substring(0,n).trim(),o=t.substring(n+1).trim();g[e]?(f(),l=e,c=o):r(t)}else r(t)})),p();let h={loginData:r,noteData:n};return h=this.filterInvalidEntries(h),0===h.loginData.length&&0===h.noteData.length?i.default.createProcessResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{}):i.default.createProcessResponse(s.IMPORT_CONSTANTS.RESPONSE_CODE.SUCCESS,h)}cleanupSettings(){this.setVaultData(h())}};r.default=m},{"../../../common/constants":13,"../../../core/background/pwmSessionSettings":43,"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453}],85:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("common/constants")),s=n(e("core/background/pwmSessionSettings")),a=n(e("../utils/competitorUtils")),u=e("../utils/importConstants"),l=n(e("../utils/importUtils"));const{utils:c}=o.default,d={url:0,username:1,password:2,totp:3,extra:4,name:5,grouping:6,fav:7},{getEmptyVaultData:f}=l.default,{LASTPASS_IMPORT:p}=i.default.SESSION_STORAGE_KEYS;const h=new class{getVaultData(){var e;return null!==(e=s.default.get(p.VAULT_DATA))&&void 0!==e?e:f()}setVaultData(e){s.default.set(p.VAULT_DATA,e)}convertToVaultFormat(e){const t={[u.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:a.default.convertToVaultLoginFormat(e)};return this.setVaultData(t),t}processLogins(e){if(c.isEmptyObject(e))return a.default.createProcessLoginsResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});let t=null;try{t=JSON.parse(e.data)}catch(e){return a.default.createProcessLoginsResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}if(c.isEmptyObject(t))return a.default.createProcessLoginsResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{});const r=[];for(const e in t)if(0===parseInt(e,10)){if(!this.isValidLastPassSchema(t[e]))return a.default.createProcessLoginsResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,{})}else{const n=this.createLastPassLoginItem(t[e]);c.isntNil(n)&&r.push(n)}return a.default.createProcessLoginsResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.SUCCESS,r)}cleanupSettings(){this.setVaultData(f())}isValidLastPassSchema(e){for(const t in e)if(d[e[t]]!==parseInt(t,10))return!1;return!0}createLastPassLoginItem(e){if(!this.isValidLastPassLogin(e))return null;const t={};return t.username=e[d.username],t.password=e[d.password],t.siteUrl=e[d.url],c.isntNil(e[d.name])&&(t.siteName=e[d.name]),t}isValidLastPassLogin(e){if(!c.isEmptyObject(e[d.username])&&!c.isEmptyObject(e[d.password])&&!c.isEmptyObject(e[d.url])){const t=c.urlWithoutQueryParameters(e[d.url]);if(c.isntNil(t)&&t!==u.IMPORT_CONSTANTS.LASTPASS_NOTES_URL)return!0}return!1}processItems(e){throw new Error("Method not applicable for lastpass. Call processLogins")}};r.default=h},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/pwmSessionSettings":43}],86:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/constants")),i=n(e("core/background/pwmSessionSettings")),s=n(e("../utils/competitorUtils")),a=e("../utils/importConstants"),u=n(e("../utils/importUtils")),l=n(e("./baseModuleOnColumnHeader"));const{getEmptyVaultData:c}=u.default,{ONEPASS_IMPORT:d}=o.default.SESSION_STORAGE_KEYS;class f extends l.default{getVaultData(){var e;return null!==(e=i.default.get(d.VAULT_DATA))&&void 0!==e?e:c()}setVaultData(e){i.default.set(d.VAULT_DATA,e)}convertToVaultFormat(e){const t={[a.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:s.default.convertToVaultLoginFormat(e)};return this.setVaultData(t),t}cleanupSettings(){this.setVaultData(c())}}const p=new f;r.default=p},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"./baseModuleOnColumnHeader":71,"@babel/runtime/helpers/interopRequireDefault":208,"common/constants":13,"core/background/pwmSessionSettings":43}],87:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/constants")),i=n(e("core/background/pwmSessionSettings")),s=n(e("../utils/competitorUtils")),a=e("../utils/importConstants"),u=n(e("../utils/importUtils")),l=n(e("./baseModuleOnColumnHeader"));const{getEmptyVaultData:c}=u.default,{SAFARI_IMPORT:d}=o.default.SESSION_STORAGE_KEYS;class f extends l.default{getVaultData(){var e;return null!==(e=i.default.get(d.VAULT_DATA))&&void 0!==e?e:c()}setVaultData(e){i.default.set(d.VAULT_DATA,e)}convertToVaultFormat(e){const t={[a.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:s.default.convertToVaultLoginFormat(e)};return this.setVaultData(t),t}cleanupSettings(){this.setVaultData(c())}}const p=new f;r.default=p},{"../utils/competitorUtils":91,"../utils/importConstants":92,"../utils/importUtils":93,"./baseModuleOnColumnHeader":71,"@babel/runtime/helpers/interopRequireDefault":208,"common/constants":13,"core/background/pwmSessionSettings":43}],88:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("common/constants")),s=n(e("core/background/pwmSessionSettings")),a=n(e("../utils/competitorUtils")),u=e("../utils/importConstants");const{isntNil:l,isNil:c,isString:d}=o.default.utils,{logger:f}=o.default,{TRUKEY_IMPORT:p}=i.default.SESSION_STORAGE_KEYS,h={kind:0,autologin:1,cardholder:2,city:3,company:4,country:5,dateOfBirth:6,deliveryPlace:7,content:8,email:9,expirationDate:10,expiryDate:11,favorite:12,firstName:13,gender:14,hexColor:15,issueDate:16,issuedDate:17,lastName:18,login:19,member_id:20,memberSince:21,memo:22,name:23,note:24,number:25,password:26,phoneNumber:27,protectedWithPassword:28,state:29,street:30,streetNumber:31,subdomainOnly:32,telephone:33,title:34,type:35,url:36,website:37,zipCode:38,tk_export_version:39},_="login",E="note",g="identity",m="cc",y="drivers",S="membership",T="passport",A="ssn",b={number:25,expirationDate:10,dateOfBirth:6,firstName:13,lastName:18,gender:14,issueDate:16,note:24,state:29},O={number:{text:"License number",dataType:"string"},expirationDate:{text:"Expiry Date",dataType:"date"},dateOfBirth:{text:"Date of Birth",dataType:"date"},firstName:{text:"First Name",dataType:"string"},lastName:{text:"Last Name",dataType:"string"},gender:{text:"Gender",dataType:"bool"},issueDate:{text:"Issue Date",dataType:"date"},note:{text:"Notes",dataType:"string"},state:{text:"State/Province",dataType:"string"}},I={number:25,firstName:13,lastName:18,note:24},v={number:"Number",firstName:"First Name",lastName:"Last Name",note:"Notes"},N={number:25,expirationDate:10,dateOfBirth:6,firstName:13,lastName:18,gender:14,issuedDate:17,note:24,deliveryPlace:7,country:5},R={country:{text:"Issuing country",dataType:"string"},number:{text:"Passport Number",dataType:"string"},expirationDate:{text:"Expiry Date",dataType:"date"},dateOfBirth:{text:"Date of Birth",dataType:"date"},firstName:{text:"First Name",dataType:"string"},lastName:{text:"Last Name",dataType:"string"},gender:{text:"Gender",dataType:"bool"},issuedDate:{text:"Issue Date",dataType:"date"},note:{text:"Notes",dataType:"string"},deliveryPlace:{text:"Place of Birth",dataType:"string"}},C={city:3,email:9,expiryDate:11,firstName:13,lastName:18,member_id:20,memberSince:21,note:24,phoneNumber:27,street:30,streetNumber:31,zipCode:38},D={expiryDate:{text:"Expiry Date",dataType:"date"},firstName:{text:"First Name",dataType:"string"},lastName:{text:"Last Name",dataType:"string"},member_id:{text:"Memeber ID",dataType:"string"},memberSince:{text:"Member Since",dataType:"date"},phoneNumber:{text:"Telephone",dataType:"string"},street:{text:"Street",dataType:"string"},streetNumber:{text:"Street Number",dataType:"string"},city:{text:"City",dataType:"string"},note:{text:"Notes",dataType:"string"},zipCode:{text:"Zipcode",dataType:"string"},email:{text:"Email",dataType:"string"}},w=()=>({[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:[],[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]:[],[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA]:[],[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA]:[]});const L=new class{getVaultData(){var e;return null!==(e=s.default.get(p.VAULT_DATA))&&void 0!==e?e:w()}setVaultData(e){s.default.set(p.VAULT_DATA,e)}convertToVaultFormat(e){throw new Error("Method not applicable for TRUKEY.")}processLogins(e){throw new Error("Method not applicable for TRUKEY. call processItems() instead")}cleanupSettings(){this.setVaultData(w())}processItems(e){const t={[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:{},[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]:{},[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA]:{},[u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA]:{}};if(!d(e))return a.default.createProcessResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,t);let r=null;try{r=JSON.parse(e)}catch(e){return a.default.createProcessResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,t)}if(!Array.isArray(r))return a.default.createProcessResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,t);if(!this.isValidTrueKeySchema(r[0]))return a.default.createProcessResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.UPLOAD_ERROR,t);const n=[],o=[],i=[],s=[];r.forEach(((e,t)=>{if(0===t)return;switch(this.determineItemType(e)){case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA:{const t=this.createLoginItem(e);l(t)&&n.push(t);break}case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA:{const t=this.createNoteItem(e);l(t)&&o.push(t);break}case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA:{const t=this.createAddressItem(e);l(t)&&i.push(t);break}case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA:{const t=this.createCreditCardItem(e);l(t)&&s.push(t);break}case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.DRIVERSDATA:{const t=this.convertDriversToNoteItem(e);l(t)&&o.push(t);break}case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.PASSPORTDATA:{const t=this.convertPassportToNoteItem(e);l(t)&&o.push(t);break}case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.SSNDATA:{const t=this.convertSSNToNoteItem(e);l(t)&&o.push(t);break}case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.MEMBERSHIPDATA:{const t=this.convertMembershipToNoteItem(e);l(t)&&o.push(t);break}}}));const c={loginData:n,creditCardData:s,addressData:i,noteData:o};return a.default.createProcessResponse(u.IMPORT_CONSTANTS.RESPONSE_CODE.SUCCESS,c)}isValidTrueKeySchema(e){const t=e.toString().split(",");for(const e in t)if(h[t[e]]!==parseInt(e,10))return!1;return!0}createLoginItem(e){const t={};return t.siteName=e[h.name],t.username=e[h.login],t.password=e[h.password],t.loginURL=e[h.url],t.notes=e[h.memo],t}getGender(e){return"0"===e?"Male":"Female"}createNoteItem(e){const t={};return t.title=e[h.title],t.information=e[h.content],t}getValidItem(e,t){let r=null;switch(e){case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.DRIVERSDATA:r=b;break;case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.SSNDATA:r=I;break;case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.PASSPORTDATA:r=N;break;case u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.MEMBERSHIPDATA:r=C}const n=[];if(c(r))return n;for(const[e,o]of Object.entries(r))""!==t[o]&&n.push(e);return n}convertDriversToNoteItem(e){const t={};t.title=u.IMPORT_CONSTANTS.TRUEKEY_NOTES_PREFIX.DRIVER_LICENSE+e[h.title];const r=this.getValidItem(u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.DRIVERSDATA,e);let n="",o="";return r.forEach((t=>{const{text:r}=O[t],i=O[t].dataType,s=this.getInformation(i,e[b[t]]);o=`${r} - ${s}\n`,n+=o})),t.information=n,t}getInformation(e,t){let r="";switch(e){case"date":r=this.formatDate(t);break;case"bool":r=this.getGender(t);break;case"string":r=t}return r}trimUTCTime(e){return e&&""!==e&&0!==String(e).length?e.includes("T")?new Date(e.split("T")[0]):(f.error("UTC date format is not in expected format, defaulting to local zone time"),new Date(e)):(f.error("expect date format is empty, defaulting to empty string"),"")}getUTCDateFragments(e){const t=e instanceof Date;return{year:t?`${e.getUTCFullYear()}`:"",month:t?`${e.getUTCMonth()+1}`:"",date:t?`${e.getUTCDate()}`:""}}formatDate(e){const t=this.trimUTCTime(e),{year:r,month:n,date:o}=this.getUTCDateFragments(t);return`${r}-${n}-${o}`}convertPassportToNoteItem(e){const t={};t.title=u.IMPORT_CONSTANTS.TRUEKEY_NOTES_PREFIX.PASSPORT+e[h.title];const r=this.getValidItem(u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.PASSPORTDATA,e);let n="",o="";return r.forEach((t=>{const{text:r}=R[t],i=R[t].dataType,s=this.getInformation(i,e[N[t]]);o=`${r} - ${s}\n`,n+=o})),t.information=n,t}convertSSNToNoteItem(e){const t={};t.title=u.IMPORT_CONSTANTS.TRUEKEY_NOTES_PREFIX.SSN+e[h.title];const r=this.getValidItem(u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.SSNDATA,e);let n="";return r.forEach((t=>{const r=`${v[t]} - ${e[I[t]]}\n`;n+=r})),t.information=n,t}convertMembershipToNoteItem(e){const t={};t.title=u.IMPORT_CONSTANTS.TRUEKEY_NOTES_PREFIX.MEMBERSHIP+e[h.title];const r=this.getValidItem(u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.MEMBERSHIPDATA,e);let n="",o="";return r.forEach((t=>{const{text:r}=D[t],i=D[t].dataType,s=this.getInformation(i,e[C[t]]);o=`${r} - ${s}\n`,n+=o})),t.information=n,t}createAddressItem(e){const t={},r={},n={identityNode:r,addressNode:t};t.city=e[h.city],t.postal=e[h.zipCode],t.state=e[h.state],t.street=e[h.streetNumber],t.street2=e[h.street],r.cardName=e[h.title];const o=this.trimUTCTime(e[h.dateOfBirth]),{year:i,month:s,date:a}=this.getUTCDateFragments(o);return r.dobDay=a,r.dobMonth=s,r.dobYear=i,r.email=e[h.email],r.firstName=e[h.firstName],"0"===e[h.gender]?r.gender=!0:"1"===e[h.gender]&&(r.gender=!1),r.lastName=e[h.lastName],r.mobile=e[h.telephone],r.region="",n}createCreditCardItem(e){const t={};t.cardName=e[h.title],t.cardNumber=e[h.number];const r=this.trimUTCTime(e[h.expiryDate]),{month:n,year:o}=this.getUTCDateFragments(r);switch(t.expMonth=n,t.expYear=o,t.nameOnCard=e[h.cardholder],t.cardComments=e[h.note],e[h.type]){case"0":t.cardType="Visa";break;case"1":t.cardType="MasterCard";break;case"2":t.cardType="American Express";break;case"3":t.cardType="Other"}return t}determineItemType(e){let t=null;switch(e[0]){case _:t=u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA;break;case E:t=u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA;break;case m:t=u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA;break;case g:t=u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA;break;case y:t=u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.DRIVERSDATA;break;case A:t=u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.SSNDATA;break;case T:t=u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.PASSPORTDATA;break;case S:t=u.IMPORT_CONSTANTS.JSON_DATA_CONTENT.MEMBERSHIPDATA}return t}};r.default=L},{"../utils/competitorUtils":91,"../utils/importConstants":92,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/pwmSessionSettings":43}],89:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.BrowserImportSettings=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=e("feature/import/utils/importConstants");const{settings:s,logger:a}=o.default,{isntNil:u,isNil:l}=o.default.utils;r.BrowserImportSettings=class{constructor(){const e=s.loadSettingsContainer(i.IMPORT_CONSTANTS.BROWSER_PASSWORD_IMPORT_CONTAINER,!1);if(l(e))throw a.error("failed to load BROWSER_PASSWORD_IMPORT_CONTAINER"),new Error("failed to load BROWSER_PASSWORD_IMPORT_CONTAINER");this.settingsContainer=e}resetContainer(){if(!l(this.settingsContainer))try{s.resetSettingsCollection(i.IMPORT_CONSTANTS.BROWSER_PASSWORD_IMPORT_CONTAINER,((e,t)=>{e||a.error(`Couldn't reset browser import container. Error : ${t}`)}))}catch(e){a.error(`Couldn't reset browser import container. Error : ${e}`)}}getImportMgrKey(){const e=this.getValue(i.IMPORT_CONSTANTS.IMPORT_MGR_DECRYPT_KEY);return l(e)?null:e}setImportMgrKey(e){u(e)&&this.setValue(i.IMPORT_CONSTANTS.IMPORT_MGR_DECRYPT_KEY,e)}setImportMgrIV(e){u(e)&&this.setValue(i.IMPORT_CONSTANTS.IMPORT_MGR_DECRYPT_IV,e)}getImportMgrIV(){const e=this.getValue(i.IMPORT_CONSTANTS.IMPORT_MGR_DECRYPT_IV);return l(e)?null:e}setImportMgrHashKey(e){u(e)&&this.setValue(i.IMPORT_CONSTANTS.IMPORT_MGR_HASH_KEY,e)}getImportMgrHashKey(){const e=this.getValue(i.IMPORT_CONSTANTS.IMPORT_MGR_HASH_KEY);return l(e)?null:e}setImportMgrTag(e){u(e)&&this.setValue(i.IMPORT_CONSTANTS.IMPORT_MGR_TAG,e)}getImportMgrTag(){const e=this.getValue(i.IMPORT_CONSTANTS.IMPORT_MGR_TAG);return l(e)?null:e}setValue(e,t){l(this.settingsContainer)?a.error("settings not initialized"):this.settingsContainer.setObject(e,t)}getValue(e){if(!l(this.settingsContainer))return this.settingsContainer.getObject(e);a.error("settings not initialized")}}},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"feature/import/utils/importConstants":92}],90:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.COMPETITOR_FACTORY_MAP=void 0;var o=e("feature/import/utils/importConstants"),i=n(e("../importers/browserImport")),s=n(e("../importers/cswImporters/cswImport")),a=n(e("../importers/dashlaneImport")),u=n(e("../importers/edgeImport")),l=n(e("../importers/firefoxImport")),c=n(e("../importers/chromeImport")),d=n(e("../importers/lastpassImport")),f=n(e("../importers/onepassImport")),p=n(e("../importers/safariImport")),h=n(e("../importers/trukeyImport")),_=n(e("../importers/kasperskyImport"));r.COMPETITOR_FACTORY_MAP={[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_BROWSER_LOGINS]:{factory:i.default,competitor:o.IMPORT_CONSTANTS.BROWSER},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_LASTPASS_LOGINS]:{factory:d.default,competitor:o.IMPORT_CONSTANTS.LASTPASS},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_BROWSER_LOGINS]:{factory:i.default,competitor:o.IMPORT_CONSTANTS.BROWSER},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_LASTPASS_LOGINS]:{factory:d.default,competitor:o.IMPORT_CONSTANTS.LASTPASS},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_DASHLANE_LOGINS]:{factory:a.default,competitor:o.IMPORT_CONSTANTS.DASHLANE},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_DASHLANE_LOGINS]:{factory:a.default,competitor:o.IMPORT_CONSTANTS.DASHLANE},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_CHROME_LOGINS]:{factory:c.default,competitor:o.IMPORT_CONSTANTS.CHROME},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_CHROME_LOGINS]:{factory:c.default,competitor:o.IMPORT_CONSTANTS.CHROME},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_FIREFOX_LOGINS]:{factory:l.default,competitor:o.IMPORT_CONSTANTS.FIREFOX},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_FIREFOX_LOGINS]:{factory:l.default,competitor:o.IMPORT_CONSTANTS.FIREFOX},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_ONEPASS_LOGINS]:{factory:f.default,competitor:o.IMPORT_CONSTANTS.ONEPASS},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_ONEPASS_LOGINS]:{factory:f.default,competitor:o.IMPORT_CONSTANTS.ONEPASS},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_SAFARI_LOGINS]:{factory:p.default,competitor:o.IMPORT_CONSTANTS.SAFARI},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_SAFARI_LOGINS]:{factory:p.default,competitor:o.IMPORT_CONSTANTS.SAFARI},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_EDGE_LOGINS]:{factory:u.default,competitor:o.IMPORT_CONSTANTS.EDGE},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_EDGE_LOGINS]:{factory:u.default,competitor:o.IMPORT_CONSTANTS.EDGE},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_TRUE_KEY]:{factory:h.default,competitor:o.IMPORT_CONSTANTS.TRUEKEY},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_TRUE_KEY]:{factory:h.default,competitor:o.IMPORT_CONSTANTS.TRUEKEY},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_CSW_LOGINS]:{factory:s.default,competitor:o.IMPORT_CONSTANTS.CSWCSV},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_CSW_LOGINS]:{factory:s.default,competitor:o.IMPORT_CONSTANTS.CSWCSV},[o.IMPORT_CONSTANTS.MESSAGES.IMPORT_KASPERSKY_LOGINS]:{factory:_.default,competitor:o.IMPORT_CONSTANTS.KASPERSKY},[o.IMPORT_CONSTANTS.MESSAGES.PROCESS_KASPERSKY_LOGINS]:{factory:_.default,competitor:o.IMPORT_CONSTANTS.KASPERSKY}}},{"../importers/browserImport":73,"../importers/chromeImport":74,"../importers/cswImporters/cswImport":75,"../importers/dashlaneImport":80,"../importers/edgeImport":81,"../importers/firefoxImport":82,"../importers/kasperskyImport":84,"../importers/lastpassImport":85,"../importers/onepassImport":86,"../importers/safariImport":87,"../importers/trukeyImport":88,"@babel/runtime/helpers/interopRequireDefault":208,"feature/import/utils/importConstants":92}],91:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=e("feature/import/utils/importConstants");const{utils:s}=o.default;const a=new class{createProcessLoginsResponse(e,t){return{[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:e,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:t}}convertToVaultLoginFormat(e){if(!Array.isArray(e.data))return null;const t=[];return e.data.forEach((e=>{const r=this.createLoginItemDict(e);s.isntNil(r)&&t.push(r)})),t}createLoginItemDict(e){if(s.isNil(e))return null;if(s.isNil(e[i.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.USERNAME]))return null;if(s.isNil(e[i.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.PASSWORD]))return null;if(s.isNil(e[i.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_NAME]))return null;if(s.isNil(e[i.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_URL]))return null;const t={};return t.username=e[i.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.USERNAME],t.password=e[i.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.PASSWORD],t.siteName=e[i.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_NAME],t.loginURL=e[i.IMPORT_CONSTANTS.COMPETITOR_IMPORT_JSON_SCHEMA.SITE_URL],t}createNoteItemDict(e){if(s.isNil(e))return null;if(s.isNil(e[i.IMPORT_CONSTANTS.NOTE_SCHEMA.TITLE]))return null;if(s.isNil(e[i.IMPORT_CONSTANTS.NOTE_SCHEMA.INFORMATION]))return null;const t={};return t.title=e[i.IMPORT_CONSTANTS.NOTE_SCHEMA.TITLE],t.information=e[i.IMPORT_CONSTANTS.NOTE_SCHEMA.INFORMATION],t}convertToVaultNoteFormat(e){if(!Array.isArray(e.data))return null;const t=[];return e.data.forEach((e=>{const r=this.createNoteItemDict(e);s.isntNil(r)&&t.push(r)})),t}createProcessResponse(e,t){return{[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:e,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:t.loginData,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA]:t.creditCardData,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA]:t.addressData,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]:t.noteData}}createProcessCSWCSVResponse(e,t,r){const n={[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.STATUS]:e,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]:t.loginData,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]:t.noteData,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA]:t.creditCardData,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA]:t.addressData,[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BANKACCOUNTDATA]:t.bankAccountData};return e===i.IMPORT_CONSTANTS.RESPONSE_CODE.SCHEMA_ERROR&&(n[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.SCHEMAERROR]=r),n}getDomainFromUrl(e){if(s.isNil(e))return null;const t=s.urlWithoutQueryParameters(e,!0),r=s.getDomain(t);return s.isntNil(r)?r:null}convertToBulkUploadFormat(e){const t={logins:[],cards:[],addressess:[],notes:[],bankAccounts:[]};return e.hasOwnProperty(i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA)&&(t.logins=e[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.LOGINDATA]),e.hasOwnProperty(i.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS)&&(t.logins=e[i.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]),e.hasOwnProperty(i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA)&&(t.cards=e[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.CREDITCARDDATA]),e.hasOwnProperty(i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA)&&(t.notes=e[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.NOTEDATA]),e.hasOwnProperty(i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA)&&(t.addressess=e[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.ADDRESSDATA]),e.hasOwnProperty(i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BANKACCOUNTDATA)&&(t.bankAccounts=e[i.IMPORT_CONSTANTS.JSON_DATA_CONTENT.BANKACCOUNTDATA]),t}};r.default=a},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"feature/import/utils/importConstants":92}],92:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.IMPORT_CONSTANTS=r.IMPORT_COMP_NAME=void 0;var o=n(e("configuration"));r.IMPORT_COMP_NAME={1:"Browser",2:"LastPass",3:"Dashlane",4:"OnePass",5:"CSW",6:"TrueKey",7:"LastPassBinary",8:"Browser64Bit",9:"Chrome",10:"Firefox",11:"Safari",12:"Edge",13:"Kaspersky"},r.IMPORT_CONSTANTS={BROWSER:1,LASTPASS:2,DASHLANE:3,ONEPASS:4,CSWCSV:5,TRUEKEY:6,LASTPASS_BINARY:7,BROWSER_64_BIT:8,CHROME:9,FIREFOX:10,SAFARI:11,EDGE:12,KASPERSKY:13,HANDLE_COMPETITOR_IMPORT:"e19c9a7e-6b3c-4fdf-8cbf-203937a9d561",SET_BROWSER_DOWNLOAD_CONTEXT:"caf214b9-dcf2-4150-a978-d9a9e1098348",GET_BROWSER_DOWNLOAD_CONTEXT:"6ecb8475-c000-4c23-bf56-94f78b8e127a",HTTP_PROTOCOL:"http",HTTPS_PROTOCOL:"https",MESSAGE_HANDLE_TIMEOUT:1,JSON_DATA_CONTENT:{DATA:"data",CODE:"code",SUCCESS:"SUCCESS",REASON:"REASON",ERROR_MESSAGE:"ERROR MESSAGE",ERROR_MASTER_PWD:"MASTER PASSWORD PROTECTED ERROR",STATUS:"status",LOGINDATA:"loginData",NOTEDATA:"noteData",CREDITCARDDATA:"creditCardData",ADDRESSDATA:"addressData",SSNDATA:"ssnData",PASSPORTDATA:"passportData",DRIVERSDATA:"DriversData",MEMBERSHIPDATA:"membershipData",BANKACCOUNTDATA:"bankAccountData",FAILURE:"FAILURE",BROWSERS:{CHROME:"CHROME",FIREFOX:"FIREFOX"},SCHEMAERROR:"schemaError"},RESPONSE_CODE:{SUCCESS:1,MASTER_PWD_USED:2,UPLOAD_ERROR:3,NO_DATA:4,VAULT_SYNCH_FAILED:5,VAULT_SYNCH_SUCCESS:6,DATA_ERROR_ARRAY:7,DATA_ERROR_JSON:8,SCHEMA_ERROR:9},VAULT_VALIDATION:{LOGIN_DATA:{SITE_NAME_MIN_SIZE:1,SITE_NAME_MAX_SIZE:256,SITE_URL_MIN_SIZE:5,SITE_URL_MAX_SIZE:1963,USERNAME_MIN_SIZE:1,USERNAME_MAX_SIZE:256,PASSWORD_MIN_SIZE:1,PASSWORD_MAX_SIZE:256,NOTES_MIN_SIZE:1,NOTES_MAX_SIZE:4e3},NOTE_DATA:{TITLE_MIN_SIZE:1,TITLE_MAX_SIZE:256,INFORMATION_MIN_SIZE:1,INFORMATION_MAX_SIZE:5e3},CC_DATA:{TITLE_MIN_SIZE:1,TITLE_MAX_SIZE:255,NAME_MIN_SIZE:1,NAME_MAX_SIZE:255,TYPE_MIN_SIZE:1,TYPE_MAX_SIZE:40,NUMBER_MIN_SIZE:1,NUMBER_MAX_SIZE:25,NOTE_MIN_SIZE:1,NOTE_MAX_SIZE:200,EXP_MONTH_MIN_SIZE:1,EXP_MONTH_MAX_SIZE:2,EXP_YEAR_MIN_SIZE:1,EXP_YEAR_MAX_SIZE:4},ADDRESS_DATA:{TITLE_MIN_SIZE:1,TITLE_MAX_SIZE:100,FIRST_NAME_MIN_SIZE:1,FIRST_NAME_MAX_SIZE:100,MID_NAME_MIN_SIZE:1,MID_NAME_MAX_SIZE:100,LAST_NAME_MIN_SIZE:1,LAST_NAME_MAX_SIZE:100,MOBILE_MIN_SIZE:1,MOBILE_MAX_SIZE:50,WORK_PHONE_MIN_SIZE:1,WORK_PHONE_MAX_SIZE:50,HOME_PHONE_MIN_SIZE:1,HOME_PHONE_MAX_SIZE:50,EMAIL_MIN_SIZE:5,EMAIL_MAX_SIZE:100,ADDRESS_MIN_SIZE:1,ADDRESS_MAX_SIZE:50,ADDRESS2_MIN_SIZE:1,ADDRESS2_MAX_SIZE:100,APT_MIN_SIZE:1,APT_MAX_SIZE:100,CITY_MIN_SIZE:1,CITY_MAX_SIZE:100,STATE_MIN_SIZE:1,STATE_MAX_SIZE:100,POSTAL_MIN_SIZE:1,POSTAL_MAX_SIZE:50,DOB_DAY_MIN_SIZE:1,DOB_DAY_MAX_SIZE:2,DOB_MONTH_MIN_SIZE:1,DOB_MONTH_MAX_SIZE:2,DOB_YEAR_MIN_SIZE:2,DOB_YEAR_MAX_SIZE:4,GENDER_MIN_SIZE:1,GENDER_MAX_SIZE:5,REGION_MIN_SIZE:2,REGION_MAX_SIZE:10},BANK_ACCOUNT_DATA:{accountName:{min:1,max:40},accountNumber:{min:1,max:40},routingNumber:{min:1,max:11},bankName:{min:1,max:40},ownerName:{min:1,max:100},iban:{min:1,max:255},swiftCode:{min:1,max:255}},ADDRESS_DATA_EXTENDED:{street3:{min:1,max:255},apt:{min:1,max:100},cityAlphabet:{min:1,max:255},streetAlphabet:{min:1,max:255},street2Alphabet:{min:1,max:255},cityDistrictWardAndNumbers:{min:1,max:255},buildingNameAndFloor:{min:1,max:255},addressName:{min:1,max:255}},IDENTITY_DATA_EXTENDED:{salutation:{min:1,max:5},middleName:{min:1,max:100},lastName2:{min:1,max:255},firstNameAlphabet:{min:1,max:255},lastNameAlphabet:{min:1,max:255},firstNameRoman:{min:1,max:255},lastNameRoman:{min:1,max:255},work:{min:1,max:50},home:{min:1,max:50},extension:{min:1,max:40}},CC_DATA_EXTENDED:{identityCard:{min:1,max:255},startDay:{min:1,max:2},startYear:{min:1,max:4},issueNumber:{min:1,max:50},countryRegion:{min:1,max:10},cardPin:{min:1,max:255},cvc:{min:1,max:255}}},MESSAGES:{IMPORT_BROWSER_LOGINS:"a863e682-d17d-40f3-bb91-aba3f545f6ea",PROCESS_BROWSER_LOGINS:"208e54c7-3bf2-4a0d-85c0-9adba7b2f805",DECRYPTED_LOGINS_DATA:"3da0a370-e798-4e7f-8270-0f7598e13da2",IMPORT_TO_VAULT_STATUS:"f6c3e68d-43d9-4a82-95a1-db57cdd64e30",PROCESS_LASTPASS_LOGINS:"23696727-d9b0-4aa6-8347-8aabb6d55b07",IMPORT_LASTPASS_LOGINS:"9e15fe75-8297-489c-811f-7d2c2eae245d",IMPORT_DASHLANE_LOGINS:"fd3ecc9d-6ff4-48b1-82ac-bfbbd396ad5d",IMPORT_CHROME_LOGINS:"3359b905-6b9f-43c2-b680-6d871a15c816",PROCESS_CHROME_LOGINS:"af1572c5-b315-42ac-8f7e-84be3146613a",IMPORT_FIREFOX_LOGINS:"c2ac823a-f44f-462f-b081-1e21edf04023",PROCESS_FIREFOX_LOGINS:"0bbc80a8-410f-49ad-a6ed-cc1c4b39df59",IMPORT_SAFARI_LOGINS:"2ea9c267-2eba-4277-b70f-58c31dc69cec",PROCESS_SAFARI_LOGINS:"cf22bf60-7e54-4de4-9748-b61ad6271e4b",PROCESS_DASHLANE_LOGINS:"17558272-452b-4231-9932-cb37af3912c8",IMPORT_ONEPASS_LOGINS:"68d750ae-4e3c-480d-bcf3-1b372535dce5",PROCESS_ONEPASS_LOGINS:"97896c98-a60f-44a6-9fa5-c0ccbbb017d5",OPEN_COMPETITOR_LEARNMORE:"d742c58e-4609-41e6-b585-95f946950c79",IMPORT_TRUE_KEY:"9001707a-e1e3-4945-b093-23eaf6955580",PROCESS_TRUE_KEY:"3391fb6f-a267-4900-a493-f998717c10bd",IMPORT_CSW_LOGINS:"e8dec31e-2c67-4de4-a58a-df9994133a75",PROCESS_CSW_LOGINS:"b7fabf20-8300-4a66-829c-0be62f6e5752",IMPORT_EDGE_LOGINS:"bb9326d3-cdbf-4c54-93ba-e02203fe9baf",PROCESS_EDGE_LOGINS:"6bc51433-231c-493d-a02f-ada1d61a5e77",IMPORT_KASPERSKY_LOGINS:"b033e7e1-4b64-4a43-bf76-53eb1e81f913",PROCESS_KASPERSKY_LOGINS:"4eb2b75d-a80c-4dcf-bd77-d94c1065fd91"},VENDOR:{DASHLANE:"Dashlane",CHROME:"Chrome Passwords",LASTPASS:"LastPass",ONEPASS:"1Password",LASTPASS_BINARY:"LastPass (binary version)",MCAFEE_TRUE_KEY:"McAfee True Key",CSW:"Norton Password Manager (CSV)",KASPERSKY:"Kaspersky"},CSW:{KEYS:{PASSWORDS:"PASSWORDS",NOTES:"NOTES",CREDITCARDS:"CREDITCARDS",ADDRESSES:"ADDRESSES",BANKACCOUNTS:"BANKACCOUNTS"},CATEGORY:{PASSWORDS:"Passwords",NOTES:"Notes",CREDITCARDS:"Cards",ADDRESSES:"Addresses",BANKACCOUNTS:"BankAccounts"},COLUMNS:{PASSWORDS:{LOGIN_URL:"loginURL",USERNAME:"username",PASSWORD:"password"},NOTES:{TITLE:"title",INFORMATION:"information"},ADDRESSES:{FIRSTNAME:"firstName",ADDRESS:"address"},CREDITCARDS:{CARDNAME:"cardName",CARDTYPE:"cardType",CARDNUMBER:"cardNumber"},BANKACCOUNTS:{ACCOUNTNAME:"accountName",OWNERNAME:"ownerName",ACCOUNTNUMBER:"accountNumber"}}},BROWSER_TYPE:{CHROME:"Chrome",FIREFOX:"Firefox",EDGE:"Edge",SAFARI:"Safari"},BROWSER_APP:{JSON_TERMINATE_MINS:20,UPLOAD_COMPLETE_TIMEOUT:2e3,JSON_FILE_NAME:"norton_logins.json",WINDOWS_APP_NAME:"import_password.exe",MAC_APP_NAME:"import_password",DOWNLOAD_PATH:{URLPATH_WINDOWS_CHROME:`https://${o.default.CDN_URL}/idsafe/import/V2/NortonImport_WinChrome.zip`,URLPATH_WINDOWS_FIREFOX:`https://${o.default.CDN_URL}/idsafe/import/V2/NortonImport_WinFirefox.zip`,URLPATH_WINDOWS_CHROME_32BIT:`https://${o.default.CDN_URL}/idsafe/import/V2/NortonImport_WinChrome32.zip`,URLPATH_WINDOWS_FIREFOX_32BIT:`https://${o.default.CDN_URL}/idsafe/import/V2/NortonImport_WinFirefox32.zip`,URLPATH_WINDOWS_CHROME_64BIT:`https://${o.default.CDN_URL}/idsafe/import/V2/NortonImport_WinChrome64.zip`,URLPATH_WINDOWS_FIREFOX_64BIT:`https://${o.default.CDN_URL}/idsafe/import/V2/NortonImport_WinFirefox64.zip`,URLPATH_WINDOWS_EDGE:`https://${o.default.CDN_URL}/idsafe/import/V2/NortonImport_WinEdge.zip`,URLPATH_MAC_CHROME:`https://${o.default.CDN_URL}/idsafe/import/V2/chrome/Norton_Import.zip`,URLPATH_MAC_FIREFOX:`https://${o.default.CDN_URL}/idsafe/import/V2/firefox/Norton_Import.zip`,URLPATH_MAC_SAFARI:`https://${o.default.CDN_URL}/idsafe/import/V2/safari/Norton_Import.zip`}},VAULT_FORMAT_DATA:{LOGINS:"Logins",CARDS:"Cards",NOTES:"Notes",ADDRESSES:"Addresses"},VAULT_FIELD_TYPES:{PASSWORD_FIELD:"PasswordField",USERNAME_FIELD:"UserNameField",CARDNUMBER_FIELD:"CardNumberField",ACCOUNTNUMBER_FIELD:"AccountNumberField",LOGIN_NOTES_FIELD:"LoginNotesField"},VAULT_MESSAGES:{UI_INIT:"ccd99bc2-0173-4f2f-84a4-d7301b145e7c",SEARCH_EVENT:"15064B5E-E6FD-4B13-9D24-C273B038784A",NEXT_ITEMSET:"2E089485-A24D-4541-BB93-6751A001B071",SWITCH_ITEM:"9C3278CD-9A3A-4631-A79D-9C52F5F45F65",GET_FIELD_VALUE:"6D8CB1C9-4EE5-46AF-84F2-6E193E2BD089",COPY_FIELD_VALUE:"C645860B-AB01-4858-90B9-64598DE3FA3B",REFRESH_VIEW:"E71A56E9-CC0D-4715-BFDF-2F521C8C30EC",DELETE_ITEM:"292F1892-D6B8-4438-AD26-3091F4A4AD8A",ADD_ITEM:"DDE36BEE-EA65-4A54-936E-7CE3E74613F7",UPDATE_ITEM:"36E6481A-F105-4CB9-84B4-ACF93E3365E6",GET_ITEM:"36E6481A-F105-4CB9-84B4-ACF93E3365F4",VERIFY_VAULT_PASSWORD:"3E4075E4-1745-4F1D-A77E-B8E520274FF8",LAUNCH_CHANGE_PASSWORD:"97E5BD4A-D8A1-43CA-B2C9-7D2E149AAA6B",TAB_VIEW_TYPE:"57D8F61E-F9A2-4A07-A547-058E9E7D3639",SPLASH_SHOWN:"A12VG294-240U-1093-UJ13-1WAFE13JODCI",SHOW_SETTINGS_MODEL:"AB9574F3-C842-47A4-9FF5-D5CD5DCFB557",SET_DELAYED_SPLASH_FLAG:"4271441d-eb58-4e9d-ab23-90bde5b65c1f",GET_DELAYED_SPLASH_FLAG:"f630b967-8076-4632-af2a-cc41bd907e61"},COMPETITOR_IMPORT_JSON_SCHEMA:{SITE_URL:"siteUrl",SITE_NAME:"siteName",USERNAME:"username",PASSWORD:"password",NOTES:"notes",LOGIN_URL:"loginURL"},LASTPASS_NOTES_URL:"http://sn",CSW_NOTES_URL:"http://sn",NOTE_SCHEMA:{TITLE:"title",INFORMATION:"information"},TRUEKEY_NOTES_PREFIX:{PASSPORT:"Passport - ",SSN:"SSN - ",DRIVER_LICENSE:"Drivers License - ",MEMBERSHIP:"Membership - "},BROWSER_PASSWORD_IMPORT_CONTAINER:"E22F91D0-E60E-49E6-AA60-11E2686F4C5F",IMPORT_MGR_DECRYPT_KEY:"importMgrDecKey",IMPORT_MGR_DECRYPT_IV:"importMgrDecIV",IMPORT_MGR_HASH_KEY:"importMgrHashKey",IMPORT_MGR_TAG:"importMgrTag",AES_ALGORITHM:{GCM:"AES-GCM",CBC:"AES-CBC"},LEARN_MORE_URL:"https://sitedirector.norton.com/932743328?ssdcat=135&env=prod&origin=nortontoolbar&lang=ISO3_LAN_CODE&service=logins",PASSWORD_MANAGER:{TRUEKEY:"Truekey",NOTES:"Notes"},PARTNER:{BT:"BT",EE:"EE"},PORTAL_BASE_URL:"https://identitysafe.norton.com/xidsafe-login.html",PORTAL_PROCESSING_URL:"https://identitysafe.norton.com/xidsafe-login.html?*",BROWSER_IMPORT_JSON_SCHEMA:{SITE_URL:"siteUrl",SITE_NAME:"siteName",USERNAME:"login",PASSWORD:"password"},STATUS:{COMPLETED:"completed",IMPORT:"import"}}},{"@babel/runtime/helpers/interopRequireDefault":208,configuration:3}],93:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("urijs")),s=e("./importConstants");const{utils:a}=o.default;const u=new class{isSizeWithinRange(e,t,r){return!a.isNil(e)&&!(e.length<t||e.length>r)}setHTTPSProtocol(e){if(a.isNil(e)||""===e.trim())return e;let t;try{t=a.urlProtocol(e)}catch(t){return e}return a.isNil(t)?e=s.IMPORT_CONSTANTS.HTTPS_PROTOCOL+"://"+e:t===s.IMPORT_CONSTANTS.HTTP_PROTOCOL?e=e.replace(s.IMPORT_CONSTANTS.HTTP_PROTOCOL,s.IMPORT_CONSTANTS.HTTPS_PROTOCOL):e}sanitizeLoginData(e,t){if(!Array.isArray(t))return t;let r=[];for(let n in t){if(!this.isSizeWithinRange(t[n].siteName,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_NAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_NAME_MAX_SIZE))continue;if(!this.isSizeWithinRange(t[n].siteUrl,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_URL_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_URL_MAX_SIZE))continue;t[n].siteUrl=this.setHTTPSProtocol(t[n].siteUrl);const o=e===s.IMPORT_CONSTANTS.BROWSER?t[n].login:t[n].username;if(!this.isSizeWithinRange(o,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.USERNAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.USERNAME_MAX_SIZE))continue;this.isSizeWithinRange(t[n].password,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.PASSWORD_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.PASSWORD_MAX_SIZE)&&r.push(t[n])}return r}sanitizeTrueKeyLoginData(e){if(!Array.isArray(e))return e;let t=[];for(let r in e){let n=e[r];this.isSizeWithinRange(n.siteName,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_NAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_NAME_MAX_SIZE)||(n.siteName=null),this.isSizeWithinRange(n.loginURL,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_URL_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_URL_MAX_SIZE)?n.loginURL=this.setHTTPSProtocol(n.loginURL):n.loginURL=null,this.isSizeWithinRange(n.username,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.USERNAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.USERNAME_MAX_SIZE)||(n.username=null),this.isSizeWithinRange(n.password,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.PASSWORD_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.PASSWORD_MAX_SIZE)||(n.password=null),this.isSizeWithinRange(n.notes,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.NOTES_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.NOTES_MAX_SIZE)||(n.notes=null),t.push(e[r])}return t}sanitizeKasperskyLoginData(e){if(!Array.isArray(e))return e;let t=[];for(let r in e){let n=e[r];this.isSizeWithinRange(n.siteName,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_NAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_NAME_MAX_SIZE)||(n.siteName=null),this.isSizeWithinRange(n.loginURL,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_URL_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.SITE_URL_MAX_SIZE)||(n.loginURL=null),this.isSizeWithinRange(n.username,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.USERNAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.USERNAME_MAX_SIZE)||(n.username=null),this.isSizeWithinRange(n.password,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.PASSWORD_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.PASSWORD_MAX_SIZE)||(n.password=null),this.isSizeWithinRange(n.notes,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.NOTES_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.LOGIN_DATA.NOTES_MAX_SIZE)||(n.notes=null),t.push(e[r])}return t}sanitizeNoteData(e){if(!Array.isArray(e))return e;let t=[];for(let r in e){let n=e[r];this.isSizeWithinRange(n.title,s.IMPORT_CONSTANTS.VAULT_VALIDATION.NOTE_DATA.TITLE_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.NOTE_DATA.TITLE_MAX_SIZE)||(n.title=null),this.isSizeWithinRange(n.information,s.IMPORT_CONSTANTS.VAULT_VALIDATION.NOTE_DATA.INFORMATION_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.NOTE_DATA.INFORMATION_MAX_SIZE)||(n.information=null),t.push(e[r])}return t}sanitizeCreditCardData(e){if(!Array.isArray(e))return e;let t=[];for(let r in e){let n=e[r];this.isSizeWithinRange(n.cardComments,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.NOTE_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.NOTE_MAX_SIZE)||(n.cardComments=null),this.isSizeWithinRange(n.cardName,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.TITLE_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.TITLE_MAX_SIZE)||(n.cardName=null),this.isSizeWithinRange(n.cardNumber,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.NUMBER_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.NUMBER_MAX_SIZE)||(n.cardNumber=null),this.isSizeWithinRange(n.cardType,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.TYPE_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.TYPE_MAX_SIZE)||(n.cardType=null),this.isSizeWithinRange(n.expMonth,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.EXP_MONTH_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.EXP_MONTH_MAX_SIZE)||(n.expMonth=null),this.isSizeWithinRange(n.expYear,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.EXP_YEAR_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.EXP_YEAR_MAX_SIZE)||(n.expYear=null),this.isSizeWithinRange(n.nameOnCard,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.NAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA.NAME_MAX_SIZE)||(n.nameOnCard=null);const o=s.IMPORT_CONSTANTS.VAULT_VALIDATION.CC_DATA_EXTENDED;Object.keys(o).forEach((e=>{this.isSizeWithinRange(n[e],o[e].min,o[e].max)||(n[e]=null)})),t.push(e[r])}return t}sanitizeAddressData(e){if(!Array.isArray(e))return e;let t=[];for(let r in e){let n=e[r].addressNode,o=e[r].identityNode;this.isSizeWithinRange(o.cardName,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.TITLE_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.TITLE_MAX_SIZE)||(o.cardName=null),this.isSizeWithinRange(o.dobDay,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.DOB_DAY_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.DOB_DAY_MAX_SIZE)||(o.dobDay=null),this.isSizeWithinRange(o.dobMonth,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.DOB_MONTH_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.DOB_MONTH_MAX_SIZE)||(o.dobMonth=null),this.isSizeWithinRange(o.dobYear,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.DOB_YEAR_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.DOB_YEAR_MAX_SIZE)||(o.dobYear=null),this.isSizeWithinRange(o.email,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.EMAIL_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.EMAIL_MAX_SIZE)||(o.email=null),this.isSizeWithinRange(o.firstName,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.FIRST_NAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.FIRST_NAME_MAX_SIZE)||(o.firstName=null),this.isSizeWithinRange(o.gender,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.GENDER_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.GENDER_MAX_SIZE)||(o.gender=null),this.isSizeWithinRange(o.lastName,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.LAST_NAME_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.LAST_NAME_MAX_SIZE)||(o.lastName=null),this.isSizeWithinRange(o.mobile,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.MOBILE_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.MOBILE_MAX_SIZE)||(o.mobile=null),this.isSizeWithinRange(o.region,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.REGION_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.REGION_MAX_SIZE)||(o.region=null),this.isSizeWithinRange(n.city,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.CITY_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.CITY_MAX_SIZE)||(n.city=null),this.isSizeWithinRange(n.postal,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.POSTAL_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.POSTAL_MAX_SIZE)||(n.postal=null),this.isSizeWithinRange(n.state,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.STATE_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.STATE_MAX_SIZE)||(n.state=null),this.isSizeWithinRange(n.street,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.ADDRESS_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.ADDRESS_MAX_SIZE)||(n.street=null),this.isSizeWithinRange(n.street2,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.ADDRESS2_MIN_SIZE,s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA.ADDRESS2_MAX_SIZE)||(n.street2=null);const i=s.IMPORT_CONSTANTS.VAULT_VALIDATION.ADDRESS_DATA_EXTENDED;Object.keys(i).forEach((e=>{this.isSizeWithinRange(n[e],i[e].min,i[e].max)||(n[e]=null)}));const a=s.IMPORT_CONSTANTS.VAULT_VALIDATION.IDENTITY_DATA_EXTENDED;Object.keys(a).forEach((e=>{this.isSizeWithinRange(o[e],a[e].min,a[e].max)||(o[e]=null)})),t.push(e[r])}return t}sanitizeBankAccountData(e){if(!Array.isArray(e))return e;const t=s.IMPORT_CONSTANTS.VAULT_VALIDATION.BANK_ACCOUNT_DATA;let r=[];for(let n in e){let o=e[n];Object.keys(t).forEach((e=>{this.isSizeWithinRange(o[e],t[e].min,t[e].max)||(o[e]=null)})),r.push(e[n])}return r}getEmptyVaultData(){return{[s.IMPORT_CONSTANTS.VAULT_FORMAT_DATA.LOGINS]:[]}}hasValue(e){return o.default.utils.isntNil(e)&&e.length>0}isURL(e,t=!0){if(!this.hasValue(e)||"string"!=typeof e)return!1;i.default.preventInvalidHostname=!0;try{const r=new i.default(e),n=!r.protocol()&&t?`${s.IMPORT_CONSTANTS.HTTPS_PROTOCOL}://${e}`:e,o=new i.default(n);return!(!r.protocol()&&!r.path().startsWith("/")&&"/"===o.path()&&o.tld()===o.domain())&&(new URL(n),!0)}catch(e){return!1}finally{i.default.preventInvalidHostname=!1}}};r.default=u},{"./importConstants":92,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core-js/modules/web.dom-collections.iterator.js":453,"core-js/modules/web.url-search-params.js":455,"core-js/modules/web.url.js":457,urijs:718}],94:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("core/background/telemetry/telemetryWrapper")),s=n(e("./tabController")),a=n(e("feature/seamlessOnboarding/seamlessOnboardingManager"));const u=o.default.extensionAdapter,l=o.default.utils.isNil,c=u.getExtensionURL("/html/onboardSetup.html");class d extends s.default{constructor(){super(),this.onNudgeTabClose=this.onNudgeTabClose.bind(this)}initNudgeTabController(){this.init.call(this,c)}openNudgeTab(){this.openTab.call(this)}closeNudgeTab(){this.closeTab.call(this)}onNudgeTabClose(e){l(e)||e!==this._tabID||(a.default.resetOnBoardingRequest(),i.default.sendEventTelemetry(i.default.TELEMETRY_CATEGORY.UI_TELEMETRY,i.default.actionType.ACTION.CLICK,"nudge-screen-closed",c),this.onTabClosed.call(this,e))}addEventListeners(){u.addTabRemovedEventListener(this.onNudgeTabClose)}removeEventListeners(){u.removeTabRemovedEventListener(this.onNudgeTabClose)}}const f=new d;r.default=f},{"./tabController":95,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core/background/telemetry/telemetryWrapper":55,"feature/seamlessOnboarding/seamlessOnboardingManager":108}],95:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("urijs")),s=n(e("common/constants")),a=n(e("core/background/pwmSessionSettings"));const{isNil:u,isntNil:l}=o.default.utils,{extensionAdapter:c,logger:d}=o.default,{TAB_CONTROLLER:f}=s.default.SESSION_STORAGE_KEYS;r.default=class{init(e){this.setTabURL(e)}getTabID(){var e;return null!==(e=a.default.get(f.TAB_ID))&&void 0!==e?e:null}setTabID(e){a.default.set(f.TAB_ID,e)}getTabURL(){var e;return null!==(e=a.default.get(f.TAB_URL))&&void 0!==e?e:null}setTabURL(e){a.default.set(f.TAB_URL,e)}getWindowID(){var e;return null!==(e=a.default.get(f.WINDOW_ID))&&void 0!==e?e:null}setWindowID(e){a.default.set(f.WINDOW_ID,e)}_checkIfTabExistElseCreate(){if(u(this.getTabURL()))return void d.error("Trying to open empty tab, object dont have url.");let e=this;if(l(this.getTabID())){const t=c.getExtensionURL("");c.getTab(this.getTabID(),(r=>{l(c.getLastError())||u(r)||(0,i.default)(r.url).domain()!==(0,i.default)(t).domain()?c.createTab(e.getTabURL(),(t=>{const r=c.getTabID(t);e.setTabID(r);const n=c.getWindowIDForTab(t);e.setWindowID(n),e.addEventListeners()})):(c.activateTab(c.getTabID(r)),c.focusWindow(c.getWindowIDForTab(r)))}))}else c.createTab(this.getTabURL(),(t=>{const r=c.getTabID(t);e.setTabID(r);const n=c.getWindowIDForTab(t);e.setWindowID(n),e.addEventListeners()}))}handleTabUpdated(e,t,r){if(u(this.getTabID()))return;if(this.getTabID()!==e)return;if(t.status!==o.default.constants.NAVIGATION_COMPLETE)return;const n=o.default.globals.BROWSER;if(r.url!==this.getTabURL()){if(n===o.default.constants.BROWSER_TYPE.Firefox){let e=r.title;if(e=new i.default(this.getTabURL()).protocol()+"://"+e,e===this.getTabURL())return}this.setTabID(null),this.setWindowID(null),this.removeEventListeners()}}onTabClosed(e){u(this.getTabID())||e===this.getTabID()&&(this.setTabID(null),this.setWindowID(null),this.removeEventListeners())}onWindowClosed(e){u(this.getWindowID())||e===this.getWindowID()&&(this.setWindowID(null),this.setTabID(null),this.removeEventListeners())}openTab(){this._checkIfTabExistElseCreate()}_originCheck(e){if(u(e))return!1;return c.getTabID(e)===this.getTabID()}_performInitialCheck(e){if(!1===this._originCheck(e)){let t=c.getTabID(e);return c.closeTab(t),!1}return!0}closeTab(){if(u(this.getTabID()))return;let e=this;e.removeEventListeners(),c.closeTabAndEnsureBrowserIsAlive(this.getTabID(),(function(){e.setTabID(null),e.setWindowID(null)}))}sendMessageToTab(e){c.getTab(this.getTabID(),(function(t){u(t)||c.sendMessageToTab(t,e)}))}addEventListeners(){}removeEventListeners(){}}},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/pwmSessionSettings":43,urijs:718}],96:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("core/background/globalSettings")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("common/partnerConstants")),u=e("../../message-adapter/background"),l=n(e("common/constants"));const{isNil:c,isntNil:d}=o.default.utils,{SUPPORTED_PARTNERS:f,PARTNER_PARAMS:p}=a.default,{NA_ACCOUNT:h}=l.default;const _=new class{constructor(){this._layoutType=null,this._puid=null,this._partnerId=null}setPartnerId(e){i.default.setValue(p.PID,e)}getPartnerId(){return i.default.getValue(p.PID)}setLayoutType(e){i.default.setValue(p.LAYOUT,e)}getLayoutType(){return i.default.getValue(p.LAYOUT)}setPuid(e){i.default.setValue(p.PUID,e)}getPuid(){return i.default.getValue(p.PUID)}retrievePartnerInfo(){const e=this.getPartner(),t=s.default.session.getPartnerInfo();return c(t)&&c(e)?h:c(t)?e:t}getPartner(){const e=this.getPartnerId(),t=this.getPuid(),r=Object.entries(f).filter((r=>r[1].PID==e&&r[1].PUID===t));return 0===r.length?null:r[0][0]}getPartnerData(e){const t=f[e];return c(t)?null:{pid:t.PID,puid:t.PUID,layout:t.LAYOUT}}init(){u.messenger.subscribe(u.MESSAGES.DASHBOARD_MESSAGES.GET_PARTNER_INFO,((e,t,r)=>{t(this.retrievePartnerInfo())}))}setParams(){const e=s.default.session.getPartnerInfo();if(d(e)&&c(this.getPartnerId())&&c(this.getPuid())){const t=this.getPartnerData(e);if(c(t))return;const{pid:r,puid:n,layout:o}=t;this.setPartnerId(r),this.setPuid(n),this.setLayoutType(o)}}getPartnerParamString(){this.setParams();const e=this.getPartnerId(),t=this.getLayoutType(),r=this.getPuid();return c(e)||c(t)||c(r)?null:`&puid=${r}&partnerid=${e}&layouttype=${t}`}};r.default=_},{"../../message-adapter/background":134,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"common/constants":13,"common/partnerConstants":20,"core/background/globalSettings":36}],97:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=e("message-adapter/background"),a=n(e("common/constants")),u=n(e("core/background/pwmSessionSettings")),l=n(e("./passwordChangerRuleFactory")),c=n(e("./passwordChangerSession"));const{logger:d,extensionAdapter:f,utils:{isNil:p,isntNil:h}}=i.default,{ruleProfile:_}=a.default,{PASSWORD_CHANGER:E}=a.default.SESSION_STORAGE_KEYS;const g=new class{constructor(){(0,o.default)(this,"initialize",(e=>{this.store=e,f.addTabUpdatedEventListener(this.handleTapUpdated),f.addTabRemovedEventListener(this.handleTabClose),f.addWindowRemovedEventListener(this.handleWindowClose),this._passwordChangerRule=l.default.createRuleObject(a.default.JSONRule),this._passwordChangerRule.initialize()})),(0,o.default)(this,"clearCachedTelemetryData",(()=>{this.setTelemetryData([])})),(0,o.default)(this,"addTelemetryDataItemIntoCach",(e=>{const t=this.getTelemetryData();t.push(e),this.setTelemetryData(t)})),(0,o.default)(this,"getCachedTelemetryData",(()=>{let e,t="";const r=this.getTelemetryData();for(e in r)t+=`${r[e]}\n`;return t})),(0,o.default)(this,"addRecentlyChangedSuccessLogin",(e=>{const t=this.getPasswordChangerSuccessLogin();t[e]=new Date,this.setPasswordChangerSuccessLogin(t)})),(0,o.default)(this,"isRecentlyChangedSuccessLogin",(e=>{if(!1===this.getPasswordChangerSuccessLogin().hasOwnProperty(e))return!1;const t=this.getPasswordChangerSuccessLogin()[e];if((new Date-t)/6e4>a.default.PASSWORD_CHANGER.PASSWORD_STATUS_TIMEOUT_IN_MINUTE){const t=this.getPasswordChangerSuccessLogin();return delete t[e],this.setPasswordChangerSuccessLogin(t),!1}return!0})),(0,o.default)(this,"getPasswordChangerRule",(()=>this._passwordChangerRule)),(0,o.default)(this,"getPasswordChangerRuleVersion",(()=>this._passwordChangerRule._version)),(0,o.default)(this,"handleTabClose",((e,t)=>{if(h(this._passwordChangerSession)){!!t.isWindowClosing&&t.isWindowClosing?this._passwordChangerSession.clearTab():this._passwordChangerSession.clearTab(e)}})),(0,o.default)(this,"handleWindowClose",(()=>{h(this._passwordChangerSession)&&this._passwordChangerSession.clearTab()})),(0,o.default)(this,"handleTapUpdated",((e,t,r)=>{p(this._passwordChangerSession)||(this._notifyPages(r),t.status===i.default.constants.NAVIGATION_COMPLETE&&(this._cancelForUserNavigation(r,e),d.log("Tab updated"),this._executeNextStep(e)))})),(0,o.default)(this,"_cancelForUserNavigation",((e,t)=>{p(this._passwordChangerSession)||this._passwordChangerSession.cancelForUserNavigation(e,t)})),(0,o.default)(this,"_startSession",(({loginData:e=null,isSessionManagedByVault:t=!0,siteProfile:r="Default",ruleProfile:n,flowType:o})=>{i.default.utils.isntNil(this._passwordChangerSession)&&delete this._passwordChangerSession;const{store:s}=this;this._passwordChangerSession=new c.default({loginData:e,isSessionManagedByVault:t,siteProfile:r,ruleProfile:n,flowType:o,store:s}),this._passwordChangerSession.startSession()})),(0,o.default)(this,"_executeNextStep",(e=>{p(this._passwordChangerSession)||this._passwordChangerSession.processNextStep(e)})),(0,o.default)(this,"_processTaskStatus",((e,t)=>{p(this._passwordChangerSession)||this._passwordChangerSession.processTaskStatus(e,t)})),(0,o.default)(this,"_cancelSesssion",(()=>{p(this._passwordChangerSession)||this._passwordChangerSession.cancelSession()})),(0,o.default)(this,"isAutoChangeRunning",(e=>{let t=!1;return h(this._passwordChangerSession)&&(t=this._passwordChangerSession.notifyAutoChangeRunning(f.getTabID(e),e.url)),t})),(0,o.default)(this,"_notifyPages",((e,t)=>{const r=this.isAutoChangeRunning(e);let n=!1;h(this._passwordChangerSession)&&(n=this._passwordChangerSession.canSuppressNotification(f.getTabID(e))),t?t(r):f.sendMessageToTab(e,{id:s.MESSAGES.SECURITY_DASHBOARD_MESSAGES.AUTO_CHANGE_RUNNING,isAutoChangeRunning:r,suppressNotification:n},(()=>{}))})),(0,o.default)(this,"startManagedAutoChange",((e,t,r="AutoChange")=>{this._startSession({loginData:{loginInfo:e},isSessionManagedByVault:!1,siteProfile:t,flowType:r})})),(0,o.default)(this,"startAutoCreateNA",(({loginInfo:e,tabId:t,showErrorScreen:r})=>{h(this._passwordChangerSession)&&delete this._passwordChangerSession;const{store:n}=this,o={isSessionManagedByVault:!1,loginData:{loginInfo:e},ruleProfile:_.AUTO_CREATE,showErrorScreen:r,store:n};this._passwordChangerSession=new c.default(o),this._passwordChangerSession.startSessionWithTab(t)})),this._passwordChangerRule=null,this._passwordChangerSession=null}getTelemetryData(){var e;return null!==(e=u.default.get(E.CACHED_TELEMETRY_DATA))&&void 0!==e?e:[]}setTelemetryData(e){u.default.set(E.CACHED_TELEMETRY_DATA,e)}getPasswordChangerSuccessLogin(){var e;return null!==(e=u.default.get(E.PASSWORD_CHANGER_SUCCESS_LOGIN))&&void 0!==e?e:{}}setPasswordChangerSuccessLogin(e){u.default.set(E.PASSWORD_CHANGER_SUCCESS_LOGIN,e)}};r.default=g},{"./passwordChangerRuleFactory":102,"./passwordChangerSession":103,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/pwmSessionSettings":43,"message-adapter/background":134}],98:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=e("../../message-adapter/background"),i=n(e("./passwordChanger"));function s(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var a=new WeakSet;function u(){o.messenger.subscribe(o.MESSAGES.SECURITY_DASHBOARD_MESSAGES.CHANGE_LOGIN_PASSWORD,(e=>{i.default._startSession({loginData:{guids:e.guids}})})),o.messenger.subscribe(o.MESSAGES.SECURITY_DASHBOARD_MESSAGES.CANCEL_CHANGE_LOGIN_PASSWORD,(()=>{i.default._cancelSesssion()})),o.messenger.subscribe(o.MESSAGES.SECURITY_DASHBOARD_MESSAGES.TASK_STATUS,((e,t,r)=>{var n;i.default._processTaskStatus(e,null==r||null===(n=r.tab)||void 0===n?void 0:n.id)})),o.messenger.subscribe(o.MESSAGES.SECURITY_DASHBOARD_MESSAGES.AUTO_CHANGE_RUNNING,((e,t,r)=>{i.default._notifyPages(r,t)}))}const l=new class{constructor(){s(this,a)}init(e){(function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r})(this,a,u).call(this),i.default.initialize(e)}};r.default=l},{"../../message-adapter/background":134,"./passwordChanger":97,"@babel/runtime/helpers/interopRequireDefault":208,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453}],99:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=n(e("core/background/telemetry/telemetryWrapper")),u=n(e("./passwordChangerRule"));const{ruleProfile:l,passwordJSONURL:c,passwordRuleRootCA:d,CERT_INFO:f}=s.default,{logger:p,cdnFileDownloader:h,extensionAdapter:_,utils:{isNil:E,isString:g,isntNil:m,isSuccessCodeLocalFile:y,safeFetch:S}}=i.default,T=_.getExtensionURL("password_changer_rules.json"),A=i.default.utils.urlProtocol(T),b={ENCRYPTION_METHOD:["RS256"]};b.SUPPORTED_PROTOCOLS=["https",A],b.SUPPORTED_FILEFORMAT=["json"],b.RESPONSE_STATUS={UNSUCCESSFUL_RESPONSE:"Unsuccessful response with status code",INVALID_URL:"Invalid JSON url",JSON_TAMPERED:"Passworchanged JSON has been tampered",JSON_FETCH_TELEMENTRY:"SERVER_JSON_Fetch_Failed"};class O extends u.default{constructor(){super(),(0,o.default)(this,"initialize",(()=>this._getRulesJson())),(0,o.default)(this,"_getRulesJson",(()=>new Promise(((e,t)=>{if(m(this._rulesJson))return e(this._rulesJson);this._getJSON(c,d,f,T).then((r=>{if(E(r))return t(new Error("Failed to parse rules json"));this._rulesJson=r.rules,this._version=r.version,e()}),(()=>{t(new Error("Failed to parse rules json"))}))})))),(0,o.default)(this,"_getJSON",((e,t,r,n)=>h.getPayloadFromCdnFile(e,t,r).then((e=>e)).catch((t=>(a.default.autoPasswordChanger(`${b.RESPONSE_STATUS.JSON_FETCH_TELEMENTRY}-${t}-${e}`),this._getLocalJSON(n)))).catch((e=>{throw p.error(`${e}-${n}`),e})))),(0,o.default)(this,"_getLocalJSON",(e=>this._isValidJSONUrl(e)?S(e).then((e=>{if(y(e.status)&&this._isValidJSONUrl(e.url))return e.json();throw`${b.RESPONSE_STATUS.UNSUCCESSFUL_RESPONSE} ${e.status}`})).then((e=>{const{payload:t={}}=e;return t})).catch((e=>{throw e})):Promise.reject(b.RESPONSE_STATUS.INVALID_URL))),(0,o.default)(this,"_isValidJSONUrl",((e="")=>{try{const t=i.default.utils.urlProtocol(e),r=(i.default.utils.pathName(e)||"").split(".").pop()||"";return-1!==b.SUPPORTED_PROTOCOLS.indexOf(t)&&-1!==b.SUPPORTED_FILEFORMAT.indexOf(r)}catch(e){return!1}})),(0,o.default)(this,"getPasswordChangerJSONRuleForPage",((e,t)=>{if(!g(e))return void p.error("Invalid parameters passed to getPasswordChangerJSONRuleForPage");if(E(this._rulesJson))return;var r={};let n={};return n=this._rulesJson.hasOwnProperty(t)?this._rulesJson[t]:this._rulesJson.hasOwnProperty(l.AUTO_CHANGE)?this._rulesJson[l.AUTO_CHANGE]:this._rulesJson,n.hasOwnProperty(e)?r=n[e]:r})),this._rulesJson=null,this._version=null}}r.default=O},{"./passwordChangerRule":101,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.promise.js":437,"core/background/telemetry/telemetryWrapper":55}],100:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=n(e("core/background/pwmSessionSettings"));const{utils:{isNil:u,isntNil:l}}=i.default,{passwordChangerSiteProfile:c}=s.default,{PASSWORD_CHANGER_PAGE_MANAGER:d}=s.default.SESSION_STORAGE_KEYS;r.default=class{constructor(e,t){(0,o.default)(this,"setPages",(e=>{a.default.set(d.PAGES,e)})),(0,o.default)(this,"preparePageRule",((e,t,r)=>{const n=JSON.parse(JSON.stringify(this.getPages()));if(u(n))return;const o=n.Pages;Object.keys(o).forEach((i=>{const s=o[i].Actions;for(let o=0;o<s.length;o++){switch(s[o].Data){case"__USER_NAME__":n.Pages[i].Actions[o].Data=u(e)?"":e;break;case"__OLD_PASSWORD__":n.Pages[i].Actions[o].Data=u(t)?"":t;break;case"__NEW_PASSWORD__":n.Pages[i].Actions[o].Data=u(r)?"":r}}})),this.setPages(n)})),(0,o.default)(this,"getStartingPage",(()=>{let e=this._getCurrentProfile();return l(e)&&e.hasOwnProperty(c.STARTING_PAGE)?e.startingPage:null})),(0,o.default)(this,"getExcludedSymbols",(()=>{let e=this.getPages();return u(e)||u(e.excludeSymbols)?null:e.excludeSymbols})),(0,o.default)(this,"getURL",(()=>{let e=this._getCurrentProfile();return l(e)&&e.hasOwnProperty(c.URL)?e.url:null})),(0,o.default)(this,"getSkipPostLogOut",(()=>{let e=this._getCurrentProfile();return!(!l(e)||!e.hasOwnProperty(c.SKIP_POST_LOGOUT))&&"true"===e.skipPostLogout})),(0,o.default)(this,"_getCurrentProfile",(()=>{let e=this.getPages();return u(e)?null:e.hasOwnProperty(this.getProfileName())?e[this.getProfileName()]:null})),(0,o.default)(this,"getAllowedURL",(()=>{let e=this.getPages();return u(e)||u(e.allowedUrl)?null:e.allowedUrl})),(0,o.default)(this,"getPageForKey",(e=>{let t=this.getPages();if(u(t))return null;if(!t.Pages.hasOwnProperty(e))return null;let r=t.Pages[e];return u(t.allowedUrl)?null:(r.allowedUrl=t.allowedUrl,r)})),this.setPages(e),l(t)?this.setProfileName(t):this.setProfileName(c.DEFAULT)}getPages(){return a.default.get(d.PAGES)}getProfileName(){var e;return null!==(e=a.default.get(d.SITE_PROFILE))&&void 0!==e?e:null}setProfileName(e){a.default.set(d.SITE_PROFILE,e)}}},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/pwmSessionSettings":43}],101:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=class{getPasswordChangerRuleForPage(){throw new Error("Abstract method!")}initialize(){throw new Error("initialize Abstract method!")}}},{}],102:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=n(e("./passwordChangerJsonRule"));const{utils:{isFunction:u,isntNil:l}}=i.default;const c=new class{constructor(){(0,o.default)(this,"_createPasswordChangerJSONRule",(()=>new a.default)),(0,o.default)(this,"createRuleObject",(e=>{if(u(this._ruleFactory[e])){const t=this._ruleFactory[e]();if(l(t))return t}return null})),this._ruleFactory={},this._ruleFactory[s.default.JSONRule]=this._createPasswordChangerJSONRule}};r.default=c},{"./passwordChangerJsonRule":99,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13}],103:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),u=e("message-adapter/background"),l=e("common/passwordGenerator"),c=n(e("core/background/telemetry/telemetryWrapper")),d=e("./../../../vault/vaultConstants"),f=n(e("urijs")),p=e("locale"),h=e("./../../../redux-core/features/logins/loginsSlice"),_=n(e("core/background/dashboardUIController")),E=n(e("feature/compromised-password/compromisedPasswordHelper")),g=n(e("telemetry/background")),m=e("telemetry/constants/telemetryActions"),y=e("telemetry/types/infieldExperiencesTelemetry.types"),S=e("common/global.types"),T=e("feature/wax/fillCaptureHandler"),A=n(e("../../core/background/reporter")),b=n(e("./passwordChangerTabSession")),O=n(e("./passwordChangerPageManager")),I=n(e("./passwordChanger"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{vaultManager:C}=a,D=u.MESSAGES.SECURITY_DASHBOARD_MESSAGES,{logger:w,extensionAdapter:L,utils:{isNil:P,isntNil:M,urlWithoutQueryParameters:U,createNewGuid:j}}=i.default,{passwordChangerState:k,SECURITY_DASHBOARD_TASK_STATUS:x,ruleProfile:{AUTO_CHANGE:F},ruleProfileEvent:B,autoPasswordChangerOverlay:{TYPES:G}}=s.default,V="AutoChange Backup",H="AutoChange Fail",W=5e3,Y="LAUNCHED",K="COMPLETED",z="FAILED",q="ERROR",$="INTERRUPTED",X="USER_UPDATED_PASSWORD",J="FAILURE_OVERWRITTEN_BY_SUCCESS",Z={LAUNCHED:"AutoChange_Launched",COMPLETED:"AutoChange_Completed",ERROR:"AutoChange_Error",FAILED:"AutoChange_Failed",INTERRUPTED:"AutoChange_Interrupted",USER_UPDATED_PASSWORD:"AutoChange_UserUpdatedPassword",INTERACTIVE:{COMPLETED:"AutoChange_Completed_with_Interactive",ERROR:"AutoChange_Error_with_Interactive",FAILED:"AutoChange_Failed_with_Interactive",INTERRUPTED:"AutoChange_Interrupted_with_Interactive",USER_UPDATED_PASSWORD:"AutoChange_UserUpdatedPassword_with_Interactive"}},Q="fulfilled",ee=(0,p.getIntlData)();r.default=class{constructor({loginData:e,isSessionManagedByVault:t=!0,siteProfile:r,store:n,ruleProfile:u=F,closeOnFinish:p=!0,suppressNotification:v=!0,flowType:N=F,showErrorScreen:te=!1}){(0,o.default)(this,"setStatus",(e=>{const t=e.getGuid();let r="";switch(e.getState()){case k.READY:r=G.IN_PROGRESS;break;case k.COMPLETED:r=G.SUCCESS;break;case k.FAILED:r=G.FAILURE;break;case k.INTERACTIVE:this.isSessionWithInteractiveStep=!0,r=G.INTERACTIVE}this._guidsStatus[t]=r,this._sendCurrentStatusToContentScript(e.getTabId(),r)})),(0,o.default)(this,"_sendCurrentStatusToContentScript",((e,t)=>{P(e)||(P(t)?w.debug("_sendCurrentStatusToContentScript received null status"):L.getTab(e,(e=>{L.sendMessageToTab(e,{id:D.AUTOCHANGE_BANNER_TYPE,ruleProfile:this._ruleProfile,bannerType:t},(()=>{}))})))})),(0,o.default)(this,"getStatus",(e=>this._guidsStatus[e])),(0,o.default)(this,"clearStatus",(e=>{delete this._guidsStatus[e]})),(0,o.default)(this,"_getLoginItem",(e=>{const t=C.getItemManager(d.ItemManager.LOGIN_MANAGER).getItem(e);let r=null;if(this._obfuscationKey=j(),!1===this._isManagedSession&&i.default.utils.isntNil(this._loginInfo)){const{path:e,username:t,loginURL:n,siteName:o}=this._loginInfo;r={path:e,username:t,password:i.default.utils.obfuscatePassword(this._loginInfo.password,this._obfuscationKey),loginURL:n,siteName:o}}else M(t)&&(r={path:t.getPath(),username:t.getUsername(),password:i.default.utils.obfuscatePassword(t.getPassword(),this._obfuscationKey),loginURL:t.getLoginURL(),siteName:t.getSiteName()});return r})),(0,o.default)(this,"_getMatchingIndexOfSiteNameInLocalizedText",(e=>{const t=[ee.formatMessage({id:"passwordChanger.autoChange.fail",defaultMessage:H}),ee.formatMessage({id:"passwordChanger.autoChange.success",defaultMessage:V})],r=e.indexOf(t[0]),n=e.indexOf(t[1]);return-1!==r?r:-1!==n?n:-1})),(0,o.default)(this,"_getLoginById",(e=>{var t;return(0,h.selectLoginById)(null===(t=this.store)||void 0===t?void 0:t.getState(),e)})),(0,o.default)(this,"_savePasswordIntoVaultFailedCase",(e=>{const t=e.getGuid();if(P(t))return void w.log(`Password succesfully Changed but LoginItem Guid missing, new password is ${e.getNewPassword()}`);const r=C.getItemManager(d.ItemManager.LOGIN_MANAGER),n=r.getItem(t);if(P(n))return void w.log(`Password succesfully Changed but LoginItem missing, new password is ${e.getNewPassword()}`);const o=ee.formatMessage({id:"passwordChanger.autoChange.fail",defaultMessage:H}),s=n.clone();let a=s.getSiteName();const u=this._getMatchingIndexOfSiteNameInLocalizedText(a);-1!==u&&(a=a.substring(0,u-1));const l=new Date;a=`${a} ${o} ${l.getMonth()+1}/${l.getDate()}/${l.getFullYear()}/${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}`,s.setPath(`{${i.default.utils.createNewGuid()}}`),s.setSiteName(a),s.setPassword(e.getNewPassword()),s.setLastUpdate((new Date).getTime()/1e3),r.addItem(s,!0)})),(0,o.default)(this,"_savePasswordIntoVaultSuccessCase",(e=>{var t;const r=e.getGuid();if(P(r))return void w.log(`Password succesfully Changed but LoginItem Guid missing, new password is ${e.getNewPassword()}`);const n=this._getLoginById(r);if(P(n))return void w.log(`Password succesfully Changed but LoginItem missing, new password is ${e.getNewPassword()}`);const o=R({},n);I.default.addRecentlyChangedSuccessLogin(o.path);const s=ee.formatMessage({id:"passwordChanger.autoChange.success",defaultMessage:V}),a=R({},n);let u=null==a?void 0:a.siteName;const l=this._getMatchingIndexOfSiteNameInLocalizedText(u);var c;-1!==l&&(u=null===(c=u)||void 0===c?void 0:c.substring(0,l-1));const d=new Date;u=`${u} ${s} ${d.getMonth()+1}/${d.getDate()}/${d.getFullYear()}/${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}`,o.password=e.getNewPassword(),a.siteName=u,a.path=`{${i.default.utils.createNewGuid()}}`;const f=[o,a],p=null===(t=this.store)||void 0===t?void 0:t.dispatch((0,h.addUpdateLoginItems)(f));null==p||p.then((({meta:e})=>{if((null==e?void 0:e.requestStatus)===Q){const e=ee.formatMessage({id:"passwordChanger.success",defaultMessage:"Your {site} login has been successfully updated."},{site:o.siteName});A.default.reportHttpStatusCode(200,null,e)}}))})),(0,o.default)(this,"_getPageManagerForLoginSite",(e=>{const t=I.default.getPasswordChangerRule().getPasswordChangerJSONRuleForPage(e,this._ruleProfile);return P(t)?null:new O.default(t,this._siteProfile)})),(0,o.default)(this,"_createTabSession",((e,t)=>{const r=this._getLoginItem(e);if(P(r))return;const n=new b.default,o=new f.default(null==r?void 0:r.loginURL).domain();if(P(o))return;const s=this._getPageManagerForLoginSite(o);if(P(s))return;const a=null==s?void 0:s.getStartingPage();if(P(a))return;I.default.clearCachedTelemetryData();const u=null==s?void 0:s.getExcludedSymbols(),c=(0,l.createPassword)(20,true,true,true,true,u);n.setNewPassword(c),w.log(`New Password ${c}`);const d=i.default.utils.obfuscatePassword(null==r?void 0:r.password,this._obfuscationKey);null==s||s.preparePageRule(null==r?void 0:r.username,d,c),n.setState(k.READY),n.setPageManager(s),n.setCurrentPageKey(a),n.setGuid(e),this.setStatus(n),M(t)?(n.setTabId(t),this._currentTabID=t,this._mapTapSession[t]=n,this.processNextStep(this._currentTabID)):L.createTab(null==s?void 0:s.getURL(),(e=>{let t=null;t=L.getTabID(e),n.setTabId(t),this._currentTabID=t,this._mapTapSession[t]=n}))})),(0,o.default)(this,"_isPasswordChangerFlowCompleted",(e=>e==k.COMPLETED||e==k.FAILED)),(0,o.default)(this,"_prepareAutochangeFinishedEventDetails",((e,t)=>{const r=this._mapTapSession[e],n=r.getGuid(),o=r.getNewPassword(),{path:s,username:a,password:u,loginURL:l,siteName:c}=this._getLoginItem(n);return{status:t,credentials:{path:s,password:o,oldPassword:i.default.utils.obfuscatePassword(u,this._obfuscationKey),username:a,loginURL:l,siteName:c}}})),(0,o.default)(this,"_handleAutoChangeState",((e,t)=>{P(e)?w.log("Invalid tab ID found"):setTimeout(((e,t)=>{!0===this._isManagedSession&&(L.getAllTabs((e=>{e.forEach((e=>{var r;P(e)||P(e.url)||-1!==(null===(r=e.url)||void 0===r?void 0:r.indexOf("html/dashboard.html"))&&(L.activateTab(L.getTabID(e)),this._sendMessageToDashboardUI(t))}))})),_.default.openDashboardUI(s.default.SAFETY_DASHBOARD_URL,!1)),t!==G.SUCCESS&&this._showErrorScreen||this._closeOnFinish&&L.closeTab(e);let r=null;this._isManagedSession||(r=this._prepareAutochangeFinishedEventDetails(e,t)),i.default.utils.createCustomHTMLEvent(this._ruleProfileEvent.FINISHED,r)}),W,e,t)})),(0,o.default)(this,"_sendMessageToDashboardUI",(e=>{P(e)?w.log("Empty status found. Dont any message to dashboard UI"):L.getAllTabs((t=>{t.forEach((t=>{var r;const{url:n}=t;P(n)||-1!==(null===(r=t.url)||void 0===r?void 0:r.indexOf("html/dashboard.html"))&&L.sendMessageToTab(t,{type:e},(()=>{}))}))}))})),(0,o.default)(this,"processTaskStatus",((e,t)=>{if(P(e.status))return;w.log(`processTaskStatus ${JSON.stringify(e)}`);const{status:r}=e,n=this._mapTapSession[t];if(P(n))return;if(this._isPasswordChangerFlowCompleted(e.pageIndex))return void w.debug(`The pageIndex:${e.pageIndex} has been discarded: ${JSON.stringify(e)}`);if(M(e.pageId)){if(this._processedPages.includes(e.pageId))return w.debug(`Page has already been resolved: ${JSON.stringify(e)}`),void(e.status!==x.FAILED&&this.preProcessTelemetry(J,`Page Index ${e.currentPageKey}`,`Rule Index ${e.numberOfsuccess}`));this._processedPages.push(e.pageId)}L.getTab(t,(t=>this._ruleHistory.push({pageKey:e.currentPageKey,url:U(t.url)})));const o=n.getGuid(),i=this._getLoginItem(o);let s="Empty";switch(M(i)&&(s=null==i?void 0:i.loginURL),r){case x.FAILED:if(n.getState()!==k.COMPLETED&&n.getState()!==k.FAILED){w.log("Change passsword failed");const r=n.getPageManager(),o=r.getPages(),i=this.getRuleSelectors(o.Pages);this.handleContentScriptTelemetry(t,i,this._ruleHistory);const s=n.getCurrentPageKey(),a=e.numberOfsuccess;if(n.setLogoutState(k.LOGOUT_INITIATED),n.setCurrentPageKey(x.LOGOUT),this._mapTapSession[t]=n,this.setStatus(this._mapTapSession[t]),this._handleAutoChangeState(t,G.FAILURE),r.getSkipPostLogOut()||this.processNextStep(t),n.setLogoutState(k.LOGOUT_COMPLETED),n.setState(k.FAILED),this.setStatus(this._mapTapSession[t]),!0===n.getSavePassword())return this._isManagedSession&&this._savePasswordIntoVaultFailedCase(n),void this.preProcessTelemetry(z,`Page Index ${s}`,`Rule Index ${a}`);this.preProcessTelemetry(q,`Page Index ${s}`,`Rule Index ${a}`)}break;case x.SUCCESS:if(n.getState()!==k.COMPLETED&&n.getState()!==k.FAILED){w.log("Password Changed success"),n.setLogoutState(k.LOGOUT_INITIATED),n.setCurrentPageKey(x.LOGOUT),this._mapTapSession[t]=n,this.setStatus(this._mapTapSession[t]);const e=n.getPageManager();this._handleAutoChangeState(t,G.SUCCESS),e.getSkipPostLogOut()||this.processNextStep(t),n.setLogoutState(k.LOGOUT_COMPLETED),n.setState(k.COMPLETED),this._isManagedSession&&this._savePasswordIntoVaultSuccessCase(n),this.preProcessTelemetry(K)}break;case x.NEXT_PAGE:n.setCurrentPageKey(e.pageIndex);const r=setTimeout(this.processNextStep.bind(this),W,t);n._fallbackTimerId=r,this._mapTapSession[t]=n;this.getStatus(n.getGuid())===G.INTERACTIVE&&(n.setState(k.READY),this.setStatus(this._mapTapSession[t]),this._sendMessageToDashboardUI(G.IN_PROGRESS));break;case x.GET_PAGE:n.setCurrentPageKey(e.pageIndex),this._mapTapSession[t]=n,this.processNextStep(t);break;case x.INTERACTIVE_STEP:L.activateTab(t);const o=this._mapTapSession[t];o.setState(k.INTERACTIVE),this.setStatus(o),this._sendMessageToDashboardUI(G.INTERACTIVE);break;case x.NEW_PASSWORD:if(n.getPasswordSaved())return;n.setPasswordSaved(!0);if(n.getNewPassword()!==e.password){const e=n.getGuid(),t=this._getLoginItem(e);M(t)&&(s=null==t?void 0:t.loginURL),this.preProcessTelemetry(X,`Page Index ${n.getCurrentPageKey()}`)}n.setNewPassword(e.password),n.setSavePassword(!0)}})),(0,o.default)(this,"startSession",(()=>{const e=this._guids[this._currentGuidIndex],t=this._getLoginItem(e);P(e)||(g.default.track(m.TELEMETRY_ACTIONS.GENERIC_ACTION.TOUCH_POINT_UPDATED,{touchPoint:S.TouchPoint.VAULT_UI}),g.default.track(m.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_INITIATED,{context:this._flowType===T.MOTV2?y.AutochangePasswordInitiatedContext.MOTCompromisedNotification:y.AutochangePasswordInitiatedContext.SafetyDashboard,url:null==t?void 0:t.loginURL}),this.preProcessTelemetry(Y),this._createTabSession(e,this._currentTabID),i.default.utils.createCustomHTMLEvent(this._ruleProfileEvent.STARTED))})),(0,o.default)(this,"startSessionWithTab",(e=>{const t=this._guids[this._currentGuidIndex],r=this._getLoginItem(t);P(t)||(g.default.track(m.TELEMETRY_ACTIONS.GENERIC_ACTION.TOUCH_POINT_UPDATED,{touchPoint:S.TouchPoint.VAULT_UI}),g.default.track(m.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_INITIATED,{context:this._flowType===T.MOTV2?y.AutochangePasswordInitiatedContext.MOTCompromisedNotification:y.AutochangePasswordInitiatedContext.SafetyDashboard,url:null==r?void 0:r.loginURL}),this.preProcessTelemetry(Y),this._createTabSession(t,e),i.default.utils.createCustomHTMLEvent(this._ruleProfileEvent.STARTED))})),(0,o.default)(this,"passwordChangerStoppedByUserTelemetry",(e=>{const t=e.getGuid(),r=this._getLoginItem(t);let n="Empty";M(r)&&(n=null==r?void 0:r.loginURL),this.preProcessTelemetry($,`Page Index ${e.getCurrentPageKey()}`)})),(0,o.default)(this,"clearTab",((e,t=null)=>{let r=!1;if(P(e)){r=!0;for(const e in this._mapTapSession)this.handleTabStatus(e,r,t),delete this._mapTapSession[e]}else this.handleTabStatus(e,r,t),delete this._mapTapSession[e],this._currentTabID=null,this._processedPages=[]})),(0,o.default)(this,"handleTabStatus",((e,t,r=null)=>{const n=this._mapTapSession[e];if(M(n)){const t=n.getState();if(t!==k.COMPLETED&&t!==k.FAILED){n.setState(k.FAILED),this.setStatus(n),r?(g.default.track(m.TELEMETRY_ACTIONS.GENERIC_ACTION.TOUCH_POINT_UPDATED,{touchPoint:S.TouchPoint.VAULT_UI}),this.preProcessTelemetry(q,`URL_NOT_SUPPORTED:${U(r)}`)):this.passwordChangerStoppedByUserTelemetry(n),this._sendMessageToDashboardUI(G.FAILURE),!1===E.default.isCompromisedPasswordFlowInProgress()&&_.default.openDashboardUI(s.default.SAFETY_DASHBOARD_URL,!1);let o=null;this._isManagedSession||(o=this._prepareAutochangeFinishedEventDetails(e,t)),i.default.utils.createCustomHTMLEvent(this._ruleProfileEvent.FINISHED,o)}M(window.safari)&&M(window.safari.application)&&L.getAllWindows((e=>{0===e.length||a.vaultKeys.isLocked()||!0!==this._isManagedSession||_.default.openDashboardUI(s.default.SAFETY_DASHBOARD_URL,!1)}))}})),(0,o.default)(this,"processNextStep",(e=>{const t=this._mapTapSession[e];if(P(t))return;this._sendCurrentStatusToContentScript(e,G.IN_PROGRESS),M(t._timeOut)&&(w.log("tab session time out cleared"),clearTimeout(t._timeOut)),M(t._fallbackTimerId)&&(clearTimeout(t._fallbackTimerId),t._fallbackTimerId=null);const r=t.getGuid(),n=this._getLoginItem(r);P(n)?setTimeout(L.closeTab,W,e):t._timeOut=setTimeout((t=>{if(P(t._timeOut)&&(clearTimeout(t._timeOut),t._timeOut=null),t.getLogoutState()!==k.LOGOUT_COMPLETED){const r=t.getCurrentPage();if(P(r))return;let n={};n=r,n.status=t.getState(),n.id=D.PAGE_ACTIONS,n.pageId=Date.now(),w.log(`pushing the rule for the page :${t.getCurrentPageKey()} => ${JSON.stringify(n)}`),L.getTab(e,(e=>{i.default.extensionAdapter.sendMessageToTab(e,n,(()=>{}))}))}}),500,t)})),(0,o.default)(this,"cancelForUserNavigation",((e,t)=>{const r=this._mapTapSession[t];if(P(r))return;let n=!1;n=this.isAllowedUrl(r,e.url),!1===n&&(this.clearTab(t,e.url),L.closeTab(t))})),(0,o.default)(this,"isAllowedUrl",((e,t)=>{const r=e.getPageManager().getAllowedURL(),n=new URL(t);return-1!==r.findIndex((e=>new URL(e).hostname===n.hostname))})),(0,o.default)(this,"notifyAutoChangeRunning",((e,t)=>{const r=this._mapTapSession[e];return r&&r.getTabId()===e&&this.isAllowedUrl(r,t)})),(0,o.default)(this,"canSuppressNotification",(e=>{if(P(e))return!1;const t=this._mapTapSession[e];return t&&t.getTabId()===e&&this._suppressNotification})),(0,o.default)(this,"cancelSession",(()=>{this.clearTab()})),(0,o.default)(this,"_getDomainName",(()=>{if(P(this._domainName)){const e=this._guids[this._currentGuidIndex];let t="InvalidURL";if(M(e)){const r=this._getLoginItem(e);if(M(r))try{t=new URL(null==r?void 0:r.loginURL).hostname}catch(e){t="InvalidURL"}}this._domainName=t}return this._domainName})),(0,o.default)(this,"getRuleSelectors",(e=>{if(M(e)){const t=Object.values(e).map((e=>e.Actions)).reduce(((e,t)=>e.concat(t)),[]).filter((e=>"open"!==e.Action)).map((e=>e.Xpath));return Array.from(new Set(t))}return[]})),(0,o.default)(this,"_constructFlowType",(()=>{let e=null;return e=M(this._siteProfile)?`${this._flowType}_${this._siteProfile}_${this._ruleProfile}`:`${this._flowType}_${this._ruleProfile}`,e})),(0,o.default)(this,"handleContentScriptTelemetry",((e,t=[],r=[])=>{if(P(e))return;const n=e=>Object.keys(e).filter((t=>""!=e[t])).reduce(((t,r)=>"object"==typeof e[r]?Object.assign(t,{[r]:n(e[r])}):Object.assign(t,{[r]:e[r]})),{}),o=e=>{const t=U(e.pageUrl),o=e.frameUrls.map((e=>U(e))),{selectorsFound:i}=e,s=e.inputsOnSite.map((e=>n(e))),a={urls:[t,...o],flowType:this._constructFlowType(),ruleHistory:r,selectorsFound:i,inputsOnSite:s};c.default.sendAutochangeErrorTelemetry(JSON.stringify(a))};L.getTab(e,(e=>{L.sendMessageToTab(e,{id:D.AUTOCHANGE_CS_TELEMETRY,selectors:t},o)}))})),(0,o.default)(this,"preProcessTelemetry",((e,...t)=>{const r=this.isSessionWithInteractiveStep&&e!==Y?Z.INTERACTIVE[e]:Z[e],n=this._getDomainName(),o=t.join("-"),s=I.default.getPasswordChangerRuleVersion(),a=`${r}-${o.length>0?`${n}-${o}`:n}-${s}`;if(P(r)||P(a))return void w.log("invalid telemetry data");const u=o.length>0?`${r}-${o}-${s}`:`${r}-${s}`;if(I.default.addTelemetryDataItemIntoCach(JSON.stringify(a)),this._isManagedSession)c.default.autoPasswordChanger(a);else{const e=this._constructFlowType();c.default.autoPasswordChanger(a,{key:i.default.telemetryConstants.parameters.CUSTOM_DIMENSION4,value:e})}const l=this._guids[this._currentGuidIndex],d=this._getLoginItem(l);g.default.track(m.TELEMETRY_ACTIONS.GENERIC_ACTION.TOUCH_POINT_UPDATED,{touchPoint:S.TouchPoint.VAULT_UI}),e===K?g.default.track(m.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_COMPLETED,{context:this._flowType===T.MOTV2?y.AutochangePasswordCompletedContext.MOTCompromisedNotification:y.AutochangePasswordCompletedContext.SafetyDashboard,type:y.AutochangePasswordCompletedType.Success,url:null==d?void 0:d.loginURL}):e===q||e===z?g.default.track(m.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_COMPLETED,{context:this._flowType===T.MOTV2?y.AutochangePasswordCompletedContext.MOTCompromisedNotification:y.AutochangePasswordCompletedContext.SafetyDashboard,type:y.AutochangePasswordCompletedType.Failed,error:u,url:null==d?void 0:d.loginURL}):e===$&&g.default.track(m.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_COMPLETED,{context:this._flowType===T.MOTV2?y.AutochangePasswordCompletedContext.MOTCompromisedNotification:y.AutochangePasswordCompletedContext.SafetyDashboard,type:y.AutochangePasswordCompletedType.Cancelled,error:u,url:null==d?void 0:d.loginURL})})),this._isManagedSession=t,this._closeOnFinish=p,this._suppressNotification=v,this._showErrorScreen=te,this._isManagedSession?this._guids=e.guids:(this._loginInfo=e.loginInfo,this._guids=[this._loginInfo.path]),this._siteProfile=r,this._ruleProfile=u,this._ruleProfileEvent=B[this._ruleProfile],this._guidsStatus={},this._currentGuidIndex=0,this._mapTapSession={},this._currentTabID=null,this.isSessionWithInteractiveStep=!1,this._domainName=null,this._processedPages=[],this._ruleHistory=[],this._obfuscationKey=null,this._flowType=N,this.store=n}}},{"../../core/background/reporter":45,"./../../../redux-core/features/logins/loginsSlice":736,"./../../../vault/vaultConstants":758,"./passwordChanger":97,"./passwordChangerPageManager":100,"./passwordChangerTabSession":104,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"common/global.types":16,"common/passwordGenerator":21,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.array.reduce.js":431,"core-js/modules/web.dom-collections.iterator.js":453,"core-js/modules/web.url-search-params.js":455,"core-js/modules/web.url.js":457,"core/background/dashboardUIController":29,"core/background/telemetry/telemetryWrapper":55,"feature/compromised-password/compromisedPasswordHelper":64,"feature/wax/fillCaptureHandler":119,locale:131,"message-adapter/background":134,"telemetry/background":170,"telemetry/constants/telemetryActions":174,"telemetry/types/infieldExperiencesTelemetry.types":187,urijs:718}],104:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=n(e("core/background/pwmSessionSettings"));const{utils:{isNil:u}}=i.default,{PASSWORD_CHANGER_TAB_SESSION:l}=s.default.SESSION_STORAGE_KEYS;r.default=class{constructor(){(0,o.default)(this,"setPasswordSaved",(e=>{a.default.set(l.IS_PASSWORD_SAVED,e)})),(0,o.default)(this,"getCurrentPage",(()=>{const e=this.getCurrentPageKey();if(u(e))return null;const t=this.getPageManager().getPages();if(t.Pages.hasOwnProperty(e)){const r=t.Pages[e];return r.allowedUrl=t.allowedUrl,r.currentPageKey=e,r}return null}))}getPasswordSaved(){var e;return null!==(e=a.default.get(l.IS_PASSWORD_SAVED))&&void 0!==e&&e}getSavePassword(){var e;return null!==(e=a.default.get(l.SAVE_PASSWORD))&&void 0!==e&&e}setSavePassword(e){a.default.set(l.SAVE_PASSWORD,e)}setGuid(e){a.default.set(l.GUID,e)}getGuid(){var e;return null!==(e=a.default.get(l.GUID))&&void 0!==e?e:null}getNewPassword(){var e;return null!==(e=a.default.get(l.NEW_PASSWORD))&&void 0!==e?e:null}setNewPassword(e){a.default.set(l.NEW_PASSWORD,e)}getState(){var e;return null!==(e=a.default.get(l.STATE))&&void 0!==e?e:null}setState(e){a.default.set(l.STATE,e)}getLogoutState(){var e;return null!==(e=a.default.get(l.STATE))&&void 0!==e?e:null}setLogoutState(e){a.default.set(l.STATE,e)}setTabId(e){a.default.set(l.TAB_ID,e)}getTabId(){var e;return null!==(e=a.default.get(l.TAB_ID))&&void 0!==e?e:null}setPageManager(e){a.default.set(l.PAGE_MANAGER,e)}getPageManager(){var e;return null!==(e=a.default.get(l.PAGE_MANAGER))&&void 0!==e?e:null}setCurrentPageKey(e){a.default.set(l.CURRENT_PAGE_KEY,e)}getCurrentPageKey(){var e;return null!==(e=a.default.get(l.CURRENT_PAGE_KEY))&&void 0!==e?e:null}}},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/pwmSessionSettings":43}],105:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("common/constants")),s=n(e("core/background/globalSettings")),a=n(e("core/background/uiService")),u=n(e("core/background/telemetry/heartBeatWrapper")),l=n(e("core/background/pwmSessionSettings")),c=n(e("telemetry/background")),d=e("telemetry/constants"),f=n(e("core/background/errorReportingService")),p=n(e("./privacyPromptSettings")),h=e("../../message-adapter/background"),_=e("core/background/commonUtilsBG");const{utils:{isntNil:E},extensionAdapter:g}=o.default,{REMOVE_NPW_URL:m,FF_AMO_GLOBAL_PRIVACY_STMT_URL:y}=i.default.PRIVACY_PROMPT,{PRIVACY_PROMPT:S}=i.default.SESSION_STORAGE_KEYS;const T=new class{constructor(){this._addStartUpListener()}init(){this.setTelemetry(null),h.messenger.subscribe(h.MESSAGES.DASHBOARD_MESSAGES.REMOVE_NPW_CLICKED,((e,t,r)=>{this._openRemoveNPWLink(),t(!0)})),h.messenger.subscribe(h.MESSAGES.DASHBOARD_MESSAGES.GLOBAL_PRIVACY_STATEMENT_CLICKED,((e,t,r)=>{this._openGlobalPrivacyLink(),t(!0)})),h.messenger.subscribe(h.MESSAGES.DASHBOARD_MESSAGES.CHECK_PRIVACY_PROMPT_CONSENT_STATUS,((e,t,r)=>{this._shouldShowPrivacyPrompt(t)})),h.messenger.subscribe(h.MESSAGES.DASHBOARD_MESSAGES.STORE_PRIVACY_CONSENT,((e,t,r)=>{this._storePrivacyConsent(e),t(!0)})),h.messenger.subscribe(h.MESSAGES.DASHBOARD_MESSAGES.ON_PRIVACY_CONSENT_DECLINE,((e,t,r)=>{this._declinePrivacyButton(e),t(!0)})),h.messenger.subscribe(h.MESSAGES.DASHBOARD_MESSAGES.FF_AMO_CLICK_EVENT,(()=>{})),h.messenger.subscribe(h.MESSAGES.DASHBOARD_MESSAGES.FIREFOX_RIBBON_MESSAGE,((e,t,r)=>(t(s.default.getInstallStatus()),!0)))}getTelemetry(){var e;return null!==(e=l.default.get(S.TELEMETRY))&&void 0!==e?e:null}setTelemetry(e){l.default.set(S.TELEMETRY,e)}_openRemoveNPWLink(){const e=m,t=o.default.localizer.getNavigatorLanguage(),r=e.replace("LOCALE_LANG",t);g.createTab(r)}_openGlobalPrivacyLink(){const e=y;g.createTab(e)}_shouldShowPrivacyPrompt(e){if(o.default.utils.isFunction(e)){e(!1===p.default.getPrivacyConsent())}}_isTelemetryInitialized(){return o.default.telemetry.initialized}_storePrivacyConsent(e){if(E(e)){const{consent:t,telemetryOptIn:r}=e;p.default.setPrivacyConsent(t,this._triggerNotifications.bind(this));const n=s.default.getValue(i.default.FRESH_INSTALL);r&&f.default.start((0,_.getErrorReportingServiceContext)()),this._isTelemetryInitialized()&&(o.default.telemetrySettings.setTelemetryEnabled(r),c.default.handleTelemetryPreferenceChange(),r&&n&&(c.default.track(d.TELEMETRY_ACTIONS.LIFECYCLE.INSTALL),u.default.initHeartBeat()))}}_declinePrivacyButton(e){E(e)&&g.uninstallSelf()}_triggerNotifications(){p.default.getPrivacyConsent()&&(a.default.setBrowserActionIcon(!1),this.setTelemetry(null))}_sendTelemetry(){}isRestartTimesToShowReached(){return!(p.default.getNumberOfBrowserRestart()<3)}async _updateBrowserRestartTimes(){await p.default.initializeSettingsContainer();const e=p.default.getNumberOfBrowserRestart();p.default.setNumberOfBrowserRestart(e+1)}_addStartUpListener(){chrome.runtime.onStartup.addListener(this._updateBrowserRestartTimes)}};r.default=T},{"../../message-adapter/background":134,"./privacyPromptSettings":106,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core/background/commonUtilsBG":27,"core/background/errorReportingService":30,"core/background/globalSettings":36,"core/background/pwmSessionSettings":43,"core/background/telemetry/heartBeatWrapper":53,"core/background/uiService":56,"telemetry/background":170,"telemetry/constants":173}],106:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("core/background/baseSettings")),s=n(e("core/background/globalSettings")),a=n(e("common/constants"));const{utils:{isNil:u,isntNil:l}}=o.default,{SETTINGS_CONTAINER:c,PRIVACY_CONSENT:d,BROWSER_RESTART_TIMES:f}=a.default.PRIVACY_PROMPT,{INSTALL:p,UPDATE:h}=a.default.INSTALL_STATUS;class _ extends i.default{constructor(e){super(),this.containerGUID=e,this.getPrivacyConsent=this.getPrivacyConsent.bind(this)}async initializeSettingsContainer(){await this.initSettingsContainer(this.containerGUID)}async initialize(){await this.initializeSettingsContainer();const e=s.default.getInstallStatus();if(null===this.getPrivacyConsent())return new Promise((t=>{e===p?this.setPrivacyConsent(!1,t):e===h&&this.setPrivacyConsent(!0,t)}))}getPrivacyConsent(){const e=this.getValue(d);return u(e)?null:e}setPrivacyConsent(e,t){l(e)&&this.setValue(d,e,t)}getNumberOfBrowserRestart(){let e=this.getValue(f);return u(e)&&(e=0,this.setNumberOfBrowserRestart(e)),e}setNumberOfBrowserRestart(e,t){l(e)&&this.setValue(f,e,t)}}const E=new _(c);r.default=E},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.promise.js":437,"core/background/baseSettings":25,"core/background/globalSettings":36}],107:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/constants")),i=n(e("core/background/pwmSessionSettings")),s=n(e("./seamlessOnboardingSettings"));const{SEAMLESS_ONBOARDING:a}=o.default.SESSION_STORAGE_KEYS;const u=new class{setIsAutoNaCreationFlow(e){i.default.set(a.IS_AUTO_NA_CREATION_FLOW,e)}getIsAutoNaCreationFlow(){var e;return null!==(e=i.default.get(a.IS_AUTO_NA_CREATION_FLOW))&&void 0!==e&&e}setIsSeamlessOnboardingFlow(e){i.default.set(a.IS_SEAMLESS_ONBOARDING_FLOW,e)}getIsSeamlessOnboardingFlow(){var e;return null!==(e=i.default.get(a.IS_SEAMLESS_ONBOARDING_FLOW))&&void 0!==e&&e}setIsSeamlesslyOnboardedViaMobile(e){s.default.setSeamlessOnboardedViaMobile(e)}getIsSeamlesslyOnboardedViaMobile(){return s.default.getSeamlessOnboardedViaMobile()}setSeamlessOnboardStatusCode(e){i.default.set(a.STATUS_CODE,e)}getSeamlessOnboardStatusCode(){var e;return null!==(e=i.default.get(a.STATUS_CODE))&&void 0!==e?e:""}resetValues(){this.setIsSeamlesslyOnboardedViaMobile(!1),this.setIsAutoNaCreationFlow(!1),this.setIsSeamlessOnboardingFlow(!1)}};r.default=u},{"./seamlessOnboardingSettings":109,"@babel/runtime/helpers/interopRequireDefault":208,"common/constants":13,"core/background/pwmSessionSettings":43}],108:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("common/constants")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),u=n(e("common/cryptoUtils")),l=M(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),c=n(e("core/background/session")),d=n(e("core/background/naAccountHandler")),f=n(e("feature/unlockManager/vaultUnlockManager")),p=M(e("node-forge")),h=n(e("feature/unlockManager/vuSettings")),_=n(e("core/background/globalSettings")),E=n(e("feature/partnerSupport/partnerParams")),g=n(e("core/background/reporter")),m=n(e("core/background/telemetry/telemetryWrapper")),y=n(e("core/background/pwmSessionSettings")),S=n(e("../unlockManager/proto")),T=n(e("./seamlessOnboardingKeys")),A=e("../../message-adapter/background"),b=n(e("../../core/background/dashboardUIController")),O=n(e("feature/security-dashboard/securityDashboard")),I=n(e("core/background/telemetry/heartBeatWrapper")),v=n(e("core/background/firebaseServiceWorker")),N=n(e("core/background/vaultActions")),R=n(e("telemetry/background")),C=e("telemetry/constants/telemetryActions"),D=e("telemetry/types/vaultUnlockAndLockTelemetry.types"),w=e("common/global.types"),L=n(e("feature/autoUnlock/autoUnlock"));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}const{vaultManager:U,vaultKeys:j}=l,{spocManager:k}=s.default,x=s.default.constants.spoc.internalErrors.SUCCESS,F=s.default.constants.spoc.internalErrors.UNKNOWN,B=i.default.SEAMLESS_ONBOARDING,G=B.NOTIFICATION_TYPE,V=B.RESPONSE_STATUS_CODE,{logger:H,utils:{isString:W,isFunction:Y,isNil:K,isntNil:z,isObject:q},extensionAdapter:$}=a.default,X=m.default.SEAMLESS_ONBOARDING_CONSTANTS,{SEAMLESS_ONBOARDING:J}=i.default.SESSION_STORAGE_KEYS,{CREATE_ACCOUNT_AND_SIGN_IN:Z}=C.TELEMETRY_ACTIONS;const Q=new class{constructor(){(0,o.default)(this,"isInitialized",!1),(0,o.default)(this,"_spocCallback",((e,t)=>{if(e.status.code===F)return!0===window.navigator.onLine&&m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILERESPONSE,X.SODESKTOPMOBILEFAILEDRESPONSERECEIVED,e.status.code),!0;m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILERESPONSE,X.SODESKTOPMOBILERESPONSERECEIVED,null,e.entityID),clearTimeout(this.timeoutInstance),k.cancelSPOCRequests();const r=this.getPrivateKey();if(this._resetValues(),e.status.code!==x)return m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILERESPONSE,X.SODESKTOPMOBILEFAILEDRESPONSERECEIVED,e.status.code),H.debug("Bump Status code didn't match with spocSuccessStatus"),!1;if(K(e.payload))return m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILERESPONSE,X.SODESKTOPMOBILEFAILEDRESPONSERECEIVED,V.EMPTY_PAYLOAD),H.debug("bumpInfo.payload is null"),!1;const n=e.payload.toArrayBuffer(),o=new Uint8Array(n),i=s.default.utils.createStringBufferFromUint8Buffer(o);this._processPayload(i,r)}))}getAsymKeys(){var e;return null!==(e=y.default.get(J.ASYMKEYS))&&void 0!==e?e:null}setAsymKeys(e){y.default.set(J.ASYMKEYS,e)}getPrivateKey(){var e;const t=null!==(e=y.default.get(J.PRIVATE_KEY))&&void 0!==e?e:null;return K(t)?null:this._getDecodedPrivateKey(t)}setPrivateKey(e){y.default.set(J.PRIVATE_KEY,this._getEncodedPrivateKey(e))}_getEncodedPrivateKey(e){const t=p.pki.privateKeyToPem(e),r=p.pem.decode(t)[0];return p.util.encode64(r.body)}_getDecodedPrivateKey(e){const t={type:"PRIVATE KEY",body:p.util.decode64(e)},r=p.pem.encode(t);return p.pki.privateKeyFromPem(r)}getNALoginInfo(){var e;return null!==(e=y.default.get(J.NA_LOGIN_INFO))&&void 0!==e?e:null}setNALoginInfo(e){y.default.set(J.NA_LOGIN_INFO,e)}getExpiryTime(){var e;return null!==(e=y.default.get(J.EXPIRY_TIME))&&void 0!==e?e:0}setExpiryTime(e){y.default.set(J.EXPIRY_TIME,e)}getDeepLink(){var e;return null!==(e=y.default.get(J.DEEP_LINK))&&void 0!==e?e:null}setDeepLink(e){y.default.set(J.DEEP_LINK,e)}getSPOCIdentity(){var e;return null!==(e=y.default.get(J.SPOC_IDENTITY))&&void 0!==e?e:null}setSPOCIdentity(e){y.default.set(J.SPOC_IDENTITY,e)}getEmail(){var e;return null!==(e=y.default.get(J.EMAIL))&&void 0!==e?e:null}setEmail(e){y.default.set(J.EMAIL,e)}_getEncodedKeyExchangeProto(e,t){const r=new S.default.seamlessonboarding.seamlessOnboardingRequestKeys;r.setPublicKey(t);const n=new S.default.seamlessonboarding.seamlessOnboardingRequest;return K(e)&&H.error("getEncodedKeyExchangeProto :: entityID is nil"),n.setEntityId(e),n.setPayload(new Uint8Array(r.toBuffer())),n.toBase64()}_processFirebaseSPOCPayload(e){const t=this.getPrivateKey(),r=p.util.decode64(e.data.payload),n=JSON.parse(r);this._processJSONPayload(n,t)}_processJSONPayload(e,t){const r=e.seamlessResponseEncoded,n=s.default.utils.encodedStringToProtobuf(r,S.default.seamlessonboarding.seamlessOnboardingResponse),o=n.getStatusCode();if(o===V.NA_CREATION_FAILED||o===V.VAULT_CREATION_FAILED||o===V.PASSWORDLESS_VAULT_UNLOCK_REGISTRATION_FAILED)return m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILERESPONSE,X.SODESKTOPMOBILEFAILEDRESPONSERECEIVED,o),this._showSeamlessOnboardNotification(G.SOMETING_WENT_WRONG),void H.debug("Desktop setup from mobile failed");const a=n.getIsSeamlesslyOnboarded(),u=new Uint8Array(n.getPayload().toArrayBuffer()),l=n.getDeviceId();T.default.setSeamlessOnboardStatusCode(o);const d=this._decrypt(u,t),f=s.default.utils.createStringBufferFromUint8Buffer(d),h=s.default.utils.encodedStringToProtobuf(p.util.encode64(f),S.default.seamlessonboarding.seamlessOnboardingKeys);c.default.loginWithRefreshToken(h.getRefreshToken(),(e=>{if(e){m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILENALOGIN,X.SODESKTOPMOBILENALOGINSUCCEEDED),R.default.track(Z.SIGN_IN_COMPLETED),_.default.getIsOnboarding()||$.setPopupHandler(i.default.POPUP_INDEX_URL);const e=new Uint8Array(h.getEncryptionKey().toArrayBuffer()),t=new Uint8Array(h.getChallengeKey().toArrayBuffer()),r=s.default.utils.createStringBufferFromUint8Buffer(e),n=s.default.utils.createStringBufferFromUint8Buffer(t);this.seamlessUnlockVault(r,n,(({state:e})=>{e===i.default.VAULT_STATE.VAULT_SYNCED?(T.default.setIsSeamlesslyOnboardedViaMobile(a),_.default.setOpenVaultUI(!0),a?this.seamlessPasswordlessVaultUnlockSetup(l):this.postPasswordlessVaultUnlockSuccess()):H.error("Could not unlock the vault")}))}else m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILENALOGIN,X.SODESKTOPMOBILENALOGINFAILED),R.default.track(Z.SIGN_IN_FAILED),this._showSeamlessOnboardNotification(G.SOMETING_WENT_WRONG),H.debug("NA Login Didn't happen successfully!!!")}))}_processPayload(e,t){const r=JSON.parse(e);return this._processJSONPayload(r,t)}_decrypt(e,t){const r=e.slice(0,256),n=e.slice(e.length-16,e.length),o=e.slice(256,e.length-16),s=t.decrypt(r,"RSA-OAEP",{md:p.md.sha512.create()});return u.default.decryptData(i.default.AES_ALGORITHM.GCM,s,new Uint8Array(16),o,n)}_registerSpoc(e,t=i.default.SPOC_CHANNELS.SEAMLESS_ONBOARDING){if(K(e))throw H.error("Cannot start spoc without entityID"),new Error("Cannot start spoc without entityID");return a.default.extensionAdapter.isManifestV3Extension()?k.makeSpocRequest(e,t,this._spocCallback,0,i.default.PASSWORDMANAGER_APPID,!0):k.makeSpocRequest(e,t,this._spocCallback,1)}_generateRSAKeyPair(e=2048){return new Promise(((t,r)=>{p.pki.rsa.generateKeyPair({bits:e,workers:-1},((e,n)=>e||a.default.utils.isNil(n)?(H.error("(RSA-OAEP algorithm ) Key generation failed"),r("Key generation failed")):t(n)))}))}_getEncodedPublicKey(e){const t=p.pki.publicKeyToPem(e),r=p.pem.decode(t)[0];return p.util.encode64(r.body)}async _isLoggedIn(){return new Promise((e=>{s.default.session.isLoggedIn((t=>e(t)))}))}async _generateKeys(){if(await this._isLoggedIn())return!1;const{publicKey:e,privateKey:t}=await this._generateRSAKeyPair(),r=a.default.utils.createNewGuid(),n=this._getEncodedPublicKey(e);return this.setPrivateKey(t),this.setAsymKeys({encodedPublicKey:n,publicKey:e,privateKey:t,entityId:r}),!0}_getDeepLinkParams(e,t,r=null){let n=`?payload=${e}&installStatus=${t}&email=${r}`;const o=E.default.getPartnerParamString();return z(o)&&(n+=o),n}_generateDeepLink(e){if(K(this.getAsymKeys()))return H.error("deepLink is null"),null;const{encodedPublicKey:t,entityId:r}=this.getAsymKeys(),n=this._getEncodedKeyExchangeProto(r,t),o=_.default.getInstallStatus();if(!e)return this.setDeepLink(`${B.SEAMLESS_ONBOARDING_DEEPLINK_URL}${this._getDeepLinkParams(n,o,this.getEmail())}`),this.setSPOCIdentity(this._registerSpoc(r)),this.getDeepLink();{this.setExpiryTime(Date.now()+B.QR_VALUE_EXPIRY_TIME_MILLIS);const e=this.getExpiryTime()-Date.now();if(e>1)return this.setDeepLink(`${B.SEAMLESS_ONBOARDING_DEEPLINK_URL}${this._getDeepLinkParams(n,o,this.getEmail())}`),this.setSPOCIdentity(this._registerSpoc(r)),this.timeoutInstance=setTimeout((()=>{k.cancelSPOCRequest(this.getSPOCIdentity()),this._resetValues()}),e),this.getDeepLink()}return null}async _getDeepLink(e,t,r){let n=null;const o=e.email||null,i=this.getExpiryTime()-Date.now();(this.getEmail()!==o||r&&i<B.ONBOARDING_EXPECTED_TIME_MILLIS&&i>0)&&(this.resetOnBoardingRequest(),this.setEmail(o));try{!$.isManifestV3Extension()&&z(this.getAsymKeys())&&z(this.getDeepLink())?(H.debug("Since the keys and QR value are generated, let show the QR code."),n=this.getDeepLink()):(await this._generateKeys(),n=this._generateDeepLink(r),H.debug("Generating DeepLink"))}catch(e){H.error(e)}t({deepLink:n,expiryTime:this.getExpiryTime(),isQRHasExpiry:r})}async _canAutoCreateNortonAccount(e,t){let r=!1;z(e)&&z(e.payload)&&(r=await d.default.canAutoCreateNortonAccount(e.payload)),t(r)}resetOnBoardingRequest(){z(this.getSPOCIdentity())&&(H.debug("Spoc identity is not null. Canceling SPOCRequest"),k.cancelSPOCRequest(this.getSPOCIdentity())),clearTimeout(this.timeoutInstance),this._resetValues()}stopOnBoarding(){this.resetOnBoardingRequest()}_resetValues(){this.setExpiryTime(0),this.setAsymKeys(null),this.setDeepLink(null),this.setSPOCIdentity(null),this.setEmail(null)}initMessengerSubscription(){A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.SEAMLESS_ONBOARDING_INIT,(async(e,t)=>{await this._getDeepLink(e,t)})),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.SEAMLESS_ONBOARDING_CAN_AUTO_CREATE_NA,(async(e,t)=>{await this._canAutoCreateNortonAccount(e,t)}))}seamlessUnlockVault(e,t,r){if(K(e))throw new Error("encryptionKey cannot be null");if(K(t))throw new Error("challengeKey cannot be null");if(!Y(r))throw new Error("callback should be a function");T.default.setIsSeamlessOnboardingFlow(!0),f.default.setVaultSdkSalt(),j.setSeamlessVaultUnlockState(!0);const n={challengePrivateKey:p.util.encode64(t),encryptionKey:p.util.encode64(e)};U.seamlessOpenVault(n).then((async({state:e})=>{if(e.getState()===i.default.VAULT_STATE.VAULT_SYNCED)a.default.extensionAdapter.isManifestV3Extension()&&(await v.default.initialize(),c.default.registerForDatastoreUpdates(),L.default.setAutoUnlockKeys()),I.default.startActiveUserHeartBeat(),m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPPASSWORDLESSVAULTUNLOCK,X.SODESKTOPPASSWORDLESSVAULTUNLOCKSUCCEEDED),H.info("Vault synced successfully");else{const[t,r]=N.default.validateOpenVaultErrorCode(e);R.default.track(C.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED,{touchPoint:w.TouchPoint.VAULT_UI,method:D.VaultUnlockMethod.PasswordlessVaultUnlock,cause:t,error:r}),H.debug("Vault unlock failed")}r(e)}))}_saveLoginInfoIntoVault(){}async handleUnlockVaultSuccess(){const e=this.getAutoCreatedNALoginInfo();K(e)||this._saveLoginInfoIntoVault(e)}showSeamlessFlowScreen(){}getAutoCreatedNALoginInfo(){return K(this.getNALoginInfo())?null:this.getNALoginInfo()}setAutoCreatedNALoginInfo(e){q(e)||H.debug("loginInfo is nil")}async startNACreationFlow(){}postPasswordlessVaultUnlockSuccess(){h.default.splashScreenShown(!0),R.default.track(C.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_COMPLETED,{unlockCompleted:!0,method:D.VaultUnlockMethod.SeamlessQRCode},w.AppName.ONBOARD_SETUP),c.default.handleUnlockVaultSuccess(),O.default.checkAndSendVaultStatusPing(),A.messenger.publish(A.MESSAGES.DASHBOARD_MESSAGES.SEAMLESS_ONBOARDING_SUCCESS,null,(()=>{if(c.default.closePasswordlessVaultUnlockUI(),a.default.utils.isExtnRunningInNSB())return _.default.setIsOnboarding(!1),_.default.setOnboardingStep(i.default.ONBOARDING.STEPS.ONBOARDED),void b.default.openDashboardUI(i.default.DASHBOARD_INDEX_URL);const e=i.default.ONBOARDING.STEPS.SET_DEFAULT;_.default.setOnboardingStep(e);const t=_.default.getIsOnboarding()?i.default.ONBOARDING.URLS[e]:i.default.DASHBOARD_INDEX_URL;b.default.openDashboardUI(t)})),L.default.setAutoUnlockKeys()}seamlessPasswordlessVaultUnlockSetup(e){if(!W(e))throw new Error("deviceId cannot be null");let t=h.default.getRegisteredDevice();if(z(t)){if(t=S.default.devices.Device.decode64(t),t.id===e)return this.postPasswordlessVaultUnlockSuccess(),void H.info("Already registered for passwordless vault unlock")}f.default.getDevicesForNA((t=>{0===t.length&&this.postPasswordlessVaultUnlockSuccess();for(const r of t)if(e===r.id){f.default.setupPasswordlessVaultUnlock(e,(e=>{!0===e.success?(H.info("Desktop Mobile Registration Success"),this.postPasswordlessVaultUnlockSuccess(),m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILEMUREGISTRATION,X.SODESKTOPMOBILEMUREGISTRATIONSUCCEEDED)):(H.debug("Desktop Mobile Registration Failed"),m.default.sendSeamlessOnboardTelemetry(m.default.actionType.SEAMLESS_ONBOARDING.SODESKTOPMOBILEMUREGISTRATION,X.SODESKTOPMOBILEMUREGISTRATIONFAILED))}));break}}))}_showSeamlessOnboardNotification(e){if(e===G.SOMETING_WENT_WRONG)g.default.showGenericErrorNotification()}getDeepLinkData(){const{publicKey:e,entityId:t}=this.getAsymKeys();return{publicKey:e,privateKey:this.getPrivateKey(),entityId:t,emailId:this.getEmail()}}async init(){try{return this.isInitialized||(this.initMessengerSubscription(),this.isInitialized=!0,H.info("seamlessOnboardingManager :: Initialization is done successfully")),this.isInitialized}catch(e){const t=`ERROR :: Initialising vault Info Modules: ${e}`;throw H.error(t),new Error(t)}}};r.default=Q},{"../../core/background/dashboardUIController":29,"../../message-adapter/background":134,"../unlockManager/proto":116,"./seamlessOnboardingKeys":107,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"common/cryptoUtils":14,"common/global.types":16,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/es.typed-array.fill.js":447,"core-js/modules/es.typed-array.set.js":448,"core-js/modules/es.typed-array.sort.js":449,"core-js/modules/es.typed-array.uint8-array.js":450,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/firebaseServiceWorker":35,"core/background/globalSettings":36,"core/background/naAccountHandler":40,"core/background/pwmSessionSettings":43,"core/background/reporter":45,"core/background/session":46,"core/background/telemetry/heartBeatWrapper":53,"core/background/telemetry/telemetryWrapper":55,"core/background/vaultActions":57,"feature/autoUnlock/autoUnlock":60,"feature/partnerSupport/partnerParams":96,"feature/security-dashboard/securityDashboard":110,"feature/unlockManager/vaultUnlockManager":117,"feature/unlockManager/vuSettings":118,"node-forge":"node-forge","telemetry/background":170,"telemetry/constants/telemetryActions":174,"telemetry/types/vaultUnlockAndLockTelemetry.types":195}],109:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/constants")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("core/background/naGuidSettingsManager"));const{utils:{isNil:a,isEmptyObject:u}}=i.default,l=o.default.SEAMLESS_ONBOARDING.SETTINGS_KEY;class c extends s.default{getNAGuidSettings(){const e=super.getNAGuidSettings();return u(e)?this.defaultSettingsStructure():e}defaultSettingsStructure(){let e={};return e[l.CONGRATULATIONS_SCREEN_SHOWN]=!1,e[l.SEAMLESS_ONBOARDED_VIA_MOBILE]=!1,e}setCongratulationSplashScreenShown(e){let t=this.getNAGuidSettings();t[l.CONGRATULATIONS_SCREEN_SHOWN]=e,this.setNAGuidSettings(t)}getCongratulationSplashScreenShown(){return this.getNAGuidSettings()[l.CONGRATULATIONS_SCREEN_SHOWN]}setSeamlessOnboardedViaMobile(e){let t=this.getNAGuidSettings();t[l.SEAMLESS_ONBOARDED_VIA_MOBILE]=e,this.setNAGuidSettings(t)}getSeamlessOnboardedViaMobile(){let e=this.getNAGuidSettings()[l.SEAMLESS_ONBOARDED_VIA_MOBILE];return a(e)&&(e=!1),e}}const d=new c(o.default.SEAMLESS_ONBOARDING.SETTINGS_CONTAINER);r.default=d},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/naGuidSettingsManager":41}],110:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=n(e("long")),u=n(e("core/background/telemetry/telemetryWrapper")),l=n(e("core/background/globalSettings")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("./../../../base-components/helpers/passwordMeasure")),d=e("./../../../base-components/constants/passwordMeasureConstants"),f=e("locale"),p=n(e("feature/partnerSupport/partnerParams")),h=n(e("feature/compromised-password/compromisedPasswordHelper")),_=n(e("./securityDashboardScore")),E=n(e("./securityDashboardUtils")),g=n(e("../password-changer/passwordChanger"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{utils:{isNil:T,isntNil:A,isEmptyObject:b},extensionAdapter:O,settings:I,logger:v}=i.default,N=(0,f.getIntlData)(),{LIST_VIEW_FILTERS:R,LIST_VIEW_SORTING_COLUMN:C,SORT_ORDER:D}=s.default.SECURITY_DASHBOARD,w=[N.formatMessage({id:s.default.SECURITY_DASHBOARD.PASSWORD_CHANGE_FAILLURE_TEXT,defaultMessage:"AutoChange Fail"}),N.formatMessage({id:s.default.SECURITY_DASHBOARD.PASSWORD_CHANGE_SUCCESS_TEXT,defaultMessage:"AutoChange Backup"})];const L=new class{constructor(){(0,o.default)(this,"isInitialized",!1),(0,o.default)(this,"settingsContainer",null),(0,o.default)(this,"initialize",(e=>{this.store=e,this.isInitialized||I.loadSettingsContainer(s.default.IDSAFE_SECURITY_DASHBOARD_CONTAINER,!0,((e,t)=>{!1===e||T(t)?v.error("failed to load IDSAFE_GLOBAL_SETTINGS_CONTAINER"):(this.settingsContainer=t,this.isInitialized=!0)}))})),(0,o.default)(this,"getDashboardVisited",(()=>T(this.settingsContainer)?(v.log("Cannot retrieve elements when key or settings container are null"),!0):this.settingsContainer.getObject(s.default.SECURITY_DASHBOARD_VISITED)||!1)),(0,o.default)(this,"setDashboardVisited",(()=>{T(this.settingsContainer)?v.log("settingsContainer is null"):this.settingsContainer.setObject(s.default.SECURITY_DASHBOARD_VISITED,!0)})),(0,o.default)(this,"getReusedPasswordInformation",(e=>{const t={};Object.keys(e).forEach((r=>{const n=e[r],o=null==n?void 0:n.password;T(t[o])&&(t[o]=[]),t[o].push(n.path)}));const r={};return Object.keys(t).forEach((n=>{Object.values(t[n]).forEach((o=>{const i=S(S({},e[o]),{},{passwordDuplicateCount:t[n].length});r[o]=i}))})),r})),(0,o.default)(this,"isLoginItemAged",(e=>{if(T(e))return v.log("Cannot determine the age without time argument"),!1;return(Math.round((new Date).getTime()/1e3)-e)/86400>180})),(0,o.default)(this,"dashboardStrength",(e=>{const t=Object.keys(e).length;if(0===t)return 100;let r=0;return Object.keys(e).forEach((t=>{r+=e[t].strength*c.MAX_SCORE/100})),Math.round(r/(10*t)*100)})),(0,o.default)(this,"getLastUpdatedTimeString",((e,t)=>{const r=86400,n=t-E.default.convertLongToSec(e);let o=Math.floor(n/31536e3);return o>0?o>1?N.formatMessage({id:"XYearsAgo",defaultMessage:"{0} years ago"},{0:o}):N.formatMessage({id:"OneYearAgo",defaultMessage:"1 year ago"}):(o=Math.floor(n/2592e3),o>0?o>1?N.formatMessage({id:"XMonthsAgo",defaultMessage:"{0} months ago"},{0:o}):N.formatMessage({id:"OneMonthAgo",defaultMessage:"1 month ago"}):(o=Math.floor(n/r),o>0?o>1?N.formatMessage({id:"XDaysAgo",defaultMessage:"{0} days ago"},{0:o}):N.formatMessage({id:"OneDayAgo",defaultMessage:"1 day ago"}):(o=Math.floor(n/3600),o>0?o>1?N.formatMessage({id:"XHoursAgo",defaultMessage:"{0} hours ago"},{0:o}):N.formatMessage({id:"OneHourAgo",defaultMessage:"1 hour ago"}):(o=Math.floor(n/60),o>0&&o>1?N.formatMessage({id:"XMinsAgo",defaultMessage:"{0} minutes ago"},{0:o}):N.formatMessage({id:"OneMinAgo",defaultMessage:"1 minute ago"})))))})),(0,o.default)(this,"collectAutoCreatedItem",(e=>Object.keys(e).filter((t=>!0===this.isAutoCreatedItem(e[t]))).reduce(((t,r)=>(t[r]=e[r],t)),{}))),(0,o.default)(this,"removeAutoCreatedItem",(e=>Object.keys(e).filter((t=>!0!==this.isAutoCreatedItem(e[t]))).reduce(((t,r)=>(t[r]=e[r],t)),{}))),(0,o.default)(this,"isAutoCreatedItem",(e=>-1!==e.siteName.indexOf(w[1]))),(0,o.default)(this,"prepareSecurityDashboardDataItem",((e,t,r,n,o,i)=>{const s={};s.loginURL=e.loginURL,s.path=e.path,s.siteName=e.siteName,s.username=e.username,s.lastUpdate=e.lastUpdate,s.secure=e.secure,s.passwordDuplicateCount=i,s.autoChange=E.default.autoChangeSupported(e.loginURL),s.lastUpdatedDisplayString=this.getLastUpdatedTimeString(e.lastUpdate,r),s.isRecentlyChanged=g.default.isRecentlyChangedSuccessLogin(e.path),s.guidAutoChangeStatus="ready";const a=h.default.isCompromisedPasswordFlowInProgress();if(s.blockedStatus=a,A(n)){const e=n.getStatus(o);A(e)&&e.length>0&&(s.guidAutoChangeStatus=e)}const{password:u}=e;if(A(u)){const n=c.default.getPasswordStrengthInfo(u);if(A(n)){const o=Math.round((r-E.default.convertLongToSec(e.lastUpdate))/2592e3),a=_.default.calculateScore(null==n?void 0:n.strength,o,i,t);s.category=c.default.getPasswordCategory(a),s.strength=Math.round(a/c.MAX_SCORE*100)}}else s.strength=0,s.category=d.PASSWORD_CATEGORY_LIST[0].category;return s})),(0,o.default)(this,"prepareSecurityDashboardData",(()=>{var e;const t=null===(e=this.store)||void 0===e?void 0:e.getState().logins.entities;if(!t)return null;const r=this.removeAutoCreatedItem(t),n=this.collectAutoCreatedItem(t),o={},i={};if(T(r))return v.log("prepareSecurityDashboardData - Vault is empty"),null;const s=Object.keys(r).length,a=Math.round(Date.now()/1e3),u=this.getReusedPasswordInformation(r),l=g.default._passwordChangerSession;return Object.keys(u).forEach((e=>{var t;o[e]=this.prepareSecurityDashboardDataItem(r[e],s,a,l,e,null===(t=u[e])||void 0===t?void 0:t.passwordDuplicateCount)})),Object.keys(n).forEach((e=>{i[e]=this.prepareSecurityDashboardDataItem(n[e],s,a,l,e,1)})),{loginItemsResult:o,loginAutoCreatedItemsResult:i}})),(0,o.default)(this,"filterAndSortSecurityDashboardData",((e,t,r,n,o=D.ASCENDING_ORDER)=>{if(T(e)||Object.keys(e).length<=0)return v.log("filterAndSortSecurityDashboardData - loginItems is not a valid vault login list"),null;if(T(t)||t<R.None||t>R.Archived)return v.log("filterAndSortSecurityDashboardData - filterCategory is not a valid value"),null;if(T(r)||r<C.None||r>C.Action)return v.log("filterAndSortSecurityDashboardData - sortingColumn is not a valid value"),null;if(T(o)||o<D.None||o>D.DESCENDING_ORDER)return v.log("filterAndSortSecurityDashboardData - sortingOrder is not a valid vault login list"),null;let i=[];switch(t){case R.Strength:Object.keys(e).forEach((t=>{const r=e[t];r.category!==d.PASSWORD_CATEGORY_LIST[3].category&&r.category!==d.PASSWORD_CATEGORY_LIST[4].category&&r.category!==d.PASSWORD_CATEGORY_LIST[5].category&&i.push(r)}));break;case R.Duplicate:Object.keys(e).forEach((t=>{const r=e[t];r.passwordDuplicateCount>1&&i.push(r)}));break;case R.Age:Object.keys(e).forEach((t=>{const r=e[t];!0===this.isLoginItemAged(E.default.convertLongToSec(r.lastUpdate))&&i.push(r)}));break;case R.None:Object.keys(e).forEach((t=>{i.push(e[t])}));break;case R.Archived:Object.keys(n).forEach((e=>{i.push(n[e])})),Object.keys(e).forEach((t=>{-1!==e[t].siteName.indexOf(w[0])&&i.push(e[t])}))}switch(r){case C.Strength:i.sort(((e,t)=>o===D.ASCENDING_ORDER?e.strength-t.strength:t.strength-e.strength));break;case C.Duplicate:{i.sort(((e,t)=>o===D.DESCENDING_ORDER?e.passwordDuplicateCount-t.passwordDuplicateCount:t.passwordDuplicateCount-e.passwordDuplicateCount));const e=[];for(let t=0;t<i.length;t+=1){const r=i[t];if(A(r)){var s;e.push(r);const n=null===(s=this.store)||void 0===s||null===(s=s.getState().logins.entities[r.path])||void 0===s?void 0:s.password;i[t]=null;for(let r=t+1;r<i.length;r+=1){const t=i[r];if(A(t)){var u;n===(null===(u=this.store)||void 0===u||null===(u=u.getState().logins.entities[t.path])||void 0===u?void 0:u.password)&&(e.push(t),i[r]=null)}}}}i=e}break;case C.Age:i.sort(((e,t)=>o===D.DESCENDING_ORDER?a.default.fromValue(e.lastUpdate)-a.default.fromValue(t.lastUpdate):a.default.fromValue(t.lastUpdate)-a.default.fromValue(e.lastUpdate)));break;case C.SiteName:i.sort(((e,t)=>{const r=e.siteName.toLocaleLowerCase(),n=t.siteName.toLocaleLowerCase();return o===D.DESCENDING_ORDER?r>n?-1:r<n?1:0:r>n?1:r<n?-1:0}));break;case C.Action:i.sort(((e,t)=>o===D.DESCENDING_ORDER?e.autoChange-t.autoChange:t.autoChange-e.autoChange))}return i})),(0,o.default)(this,"getDashboardData",((e,t)=>{if(T(e)||T(e.filterColumn)||T(e.sortingColumn)||T(e.sortingOrder))return v.log(`getDashboardData - invalid arguments - payload = ${JSON.stringify(e)}`),null;const r=this.prepareSecurityDashboardData();if(!r)return null;const n=r.loginItemsResult,o=r.loginAutoCreatedItemsResult,i=Object.keys(n).length+Object.keys(o).length;let s=0,a=0,u=0,l=0,c=0,f=0,p=0;const h=new Date;if(h.setDate(h.getDate()-180),Object.keys(n).forEach((e=>{const t=n[e];let r=!1;t.category!==d.PASSWORD_CATEGORY_LIST[3].category&&t.category!==d.PASSWORD_CATEGORY_LIST[4].category&&t.category!==d.PASSWORD_CATEGORY_LIST[5].category&&(s+=1,r=!0),t.passwordDuplicateCount>1&&(a+=1,r=!0);const o=new Date(1970,0,1);o.setSeconds(E.default.convertLongToSec(t.lastUpdate)),o<h&&(u+=1,r=!0),-1!==t.siteName.indexOf(w[0])&&(c+=1,r=!0),!0===r&&(p+=1)})),f=s+a+u,l=Object.keys(o).length+c,A(e.isTelemetryData)&&!0===e.isTelemetryData)return void t({weak_logins_count:s,aged_logins_count:u,reused_logins_count:a});if(e.filterColumn===R.None&&e.sortingColumn===C.None&&e.sortingOrder===D.None)return{dashboard_score:this.dashboardStrength(n),logins_count_total:Object.keys(n).length,total_issues:f,logins_with_issues:p};const _=this.filterAndSortSecurityDashboardData(n,e.filterColumn,e.sortingColumn,o,e.sortingOrder);t({dashboard_score:this.dashboardStrength(n),logins_count_total:Object.keys(n).length,total_issues:f,weak_logins_count:s,reused_logins_count:a,aged_logins_count:u,data:_,archived_logins_count:l,allItemCount:i,dashboardVisited:this.getDashboardVisited()})})),(0,o.default)(this,"passwordForLoginItem",((e,t)=>{var r;if(T(t)||T(e)||T(e.login_guid))return v.log(`passwordForLoginItem - invalid arguments - payload = ${JSON.stringify(e)}`),void t(null);let n=null;var o,i;null!==(r=this.store)&&void 0!==r&&r.getState().logins.entities[e.login_guid]&&(n=null!==(o=null===(i=this.store)||void 0===i||null===(i=i.getState().logins.entities[e.login_guid])||void 0===i?void 0:i.password)&&void 0!==o?o:"");t(n)})),(0,o.default)(this,"clearGuidStatusObject",(e=>{g.default._passwordChangerSession.clearStatus(e)})),(0,o.default)(this,"getDashboardStrengthCategory",(()=>{const e=this.prepareSecurityDashboardData(),t=this.dashboardStrength(e.loginItemsResult);return E.default.getDashboardCategory(t)})),(0,o.default)(this,"checkAndSendVaultStatusPing",(()=>{this.getDashboardData({isTelemetryData:!0,filterColumn:R.None,sortingColumn:C.None,sortingOrder:D.None},(e=>{if(T(e)||b(e))return void v.log("Resultant data cannot be null or empty");const t=l.default.getValue(s.default.VAULT_HEALTH_STATUS_NEXT_PING),r=(new Date).getTime();if(A(t)&&t>r)return void v.log("checkAndSendVaultStatusPing::Time hasnt been lapsed to display the dashboard health status again");const n=this.getDashboardStrengthCategory(),o={weakLogins:e.weak_logins_count,aged:e.aged_logins_count,reused:e.reused_logins_count,category:n};u.default.sendVaultHealthStatus(o);let i=new Date;i=i.setDate(i.getDate()+30),l.default.setValue(s.default.VAULT_HEALTH_STATUS_NEXT_PING,i)}))})),(0,o.default)(this,"fetchRibbonData",(()=>{const e={filterColumn:R.None,sortingColumn:C.None,sortingOrder:D.None};return this.getDashboardData(e)})),(0,o.default)(this,"openDashboardLearnMoreLink",(()=>{let e=s.default.SECURITY_DASHBOARD.LEARN_MORE_URL.replace("SITE_DIRECTOR_LAN_CODE",(0,f.getIntlData)().locale);const t=p.default.getPartnerParamString();A(t)&&(e+=t),O.createTab(e)}))}};r.default=L},{"../password-changer/passwordChanger":97,"./../../../base-components/constants/passwordMeasureConstants":1,"./../../../base-components/helpers/passwordMeasure":2,"./securityDashboardScore":113,"./securityDashboardUtils":114,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.array.reduce.js":431,"core-js/modules/es.array.sort.js":432,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/globalSettings":36,"core/background/telemetry/telemetryWrapper":55,"feature/compromised-password/compromisedPasswordHelper":64,"feature/partnerSupport/partnerParams":96,locale:131,long:644}],111:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=e("../../message-adapter/background"),a=n(e("./securityDashboard"));const{logger:u}=i.default;const l=new class{constructor(){(0,o.default)(this,"isInitialized",!1)}initMessengerSubscription(){s.messenger.subscribe(s.MESSAGES.SECURITY_DASHBOARD_MESSAGES.REQUEST_LIST_VIEW_DATA,((e,t)=>{a.default.getDashboardData(e,(e=>{t(e)}))})),s.messenger.subscribe(s.MESSAGES.SECURITY_DASHBOARD_MESSAGES.REQUEST_RIBBON_DATA,((e,t)=>{t(a.default.fetchRibbonData())})),s.messenger.subscribe(s.MESSAGES.SECURITY_DASHBOARD_MESSAGES.REQUEST_PASSWORD_FOR_LOGIN_ITEM,((e,t)=>{a.default.passwordForLoginItem(e,(e=>{t(e)}))})),s.messenger.subscribe(s.MESSAGES.SECURITY_DASHBOARD_MESSAGES.CLEAR_GUID_STATUS_MAP,((e,t)=>{a.default.clearGuidStatusObject(e.guid),a.default.getDashboardData(e,(e=>{t(e)}))})),s.messenger.subscribe(s.MESSAGES.SECURITY_DASHBOARD_MESSAGES.REQUEST_DASHBOARD_VISIT_STATUS,(()=>{a.default.setDashboardVisited()})),s.messenger.subscribe(s.MESSAGES.SECURITY_DASHBOARD_MESSAGES.OPEN_LEARNMORE,(()=>{a.default.openDashboardLearnMoreLink()})),this.isInitialized=!0}async init(e){try{return this.isInitialized||(a.default.initialize(e),this.initMessengerSubscription(),u.info("SecurityDashboardActions :: Initialization is done successfully")),this.isInitialized}catch(e){const t=`ERROR :: Initialising security dashboard: ${e}`;throw u.error(t),new Error(t)}}};r.default=l},{"../../message-adapter/background":134,"./securityDashboard":110,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.promise.js":437}],112:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=e("locale"),u=n(e("core/background/dashboardUIController")),l=n(e("feature/password-changer/passwordChanger")),c=n(e("core/background/telemetry/telemetryWrapper")),d=n(e("core/background/pwmSessionSettings")),f=n(e("./securityDashboard")),p=e("telemetry/types/lifecycleTelemetry.types"),h=n(e("core/background/store/telemetryInfoStore")),_=e("common/global.types");const{utils:{isNil:E,isntNil:g,isEmptyObject:m},constants:{uiConstants:y},settings:S,logger:T,extensionAdapter:A,notificationCenter:b}=i.default,{uiConstants:{NOTIFICATION:O}}=i.default.constants,{SECURITY_DASHBOARD_NOTIFICATION_ID:I}=s.default.SESSION_STORAGE_KEYS,v=[{type:s.default.SECURITY_DASHBOARD.NOTIFICATIONS.STRONG_MSG_NOTIFICATION,category:"STRONG",title:"safetydashboard.notification.strong.title",image:s.default.NOTIFICATION_ICON_TYPES.GOOD_ICON,message:"safetydashboard.notification.strong"},{type:s.default.SECURITY_DASHBOARD.NOTIFICATIONS.MEDIUM_MSG_NOTIFICATION,category:"MEDIUM",title:"safetydashboard.notification.needsimprovement.title",image:s.default.NOTIFICATION_ICON_TYPES.ALERT_ICON,message:"safetydashboard.notification.needsimprovement"},{type:s.default.SECURITY_DASHBOARD.NOTIFICATIONS.WEAK_MSG_NOTIFICATION,category:"WEAK",title:"safetydashboard.notification.risk.title",image:s.default.NOTIFICATION_ICON_TYPES.ERROR_ICON,message:"safetydashboard.notification.risk"}],N={WEAK:s.default.SECURITY_DASHBOARD.NOTIFICATIONS.WEAK_MSG_NOTIFICATION,MEDIUM:s.default.SECURITY_DASHBOARD.NOTIFICATIONS.MEDIUM_MSG_NOTIFICATION,STRONG:s.default.SECURITY_DASHBOARD.NOTIFICATIONS.STRONG_MSG_NOTIFICATION},R=c.default.TELEMETRY_CATEGORY,C=c.default.LABELS,D=c.default.actionType.ACTION,w=c.default.DOCUMENT,L=(0,a.getIntlData)();const P=new class{constructor(){(0,o.default)(this,"settingsContainer",null),(0,o.default)(this,"initialize",(e=>{this.store=e,S.loadSettingsContainer(s.default.IDSAFE_SECURITY_DASHBOARD_NOTIFICATION_CONTAINER,!0,((e,t)=>{!1===e||E(t)?T.error("failed to load IDSAFE_GLOBAL_SETTINGS_CONTAINER"):(console.log("SecurityDashboardNotificationHandler :: Initialization is done successfully"),this.settingsContainer=t)}))})),(0,o.default)(this,"viewDashboard",(()=>{this.handleViewDashboardClickOnPopup(),c.default.sendEventTelemetry(R.UI_TELEMETRY,D.CLICK,C.SECURITY_ALERT_POPUP_VIEW_DASHBOARD,this.getNotificationType(),w.PATH.HTML),this.setViewDashboardNotificationID(null)})),(0,o.default)(this,"getNotificationDetails",(e=>v.find((t=>e===t.type)))),(0,o.default)(this,"hideOnAutoChangeTab",(e=>{l.default.isAutoChangeRunning(e)&&A.sendMessageToTab(e,{id:null==y?void 0:y.NOTIFICATION.MESSAGES.DEFAULT_MESSAGE,payload:{eventID:null==y?void 0:y.NOTIFICATION.MESSAGES.HIDE_NOTIFICATIONS}},(()=>{}))})),(0,o.default)(this,"handleNotificationShow",(({payload:e={}},t,r)=>{const{eventID:n}=e;g(n)&&n===(null==y?void 0:y.NOTIFICATION.MESSAGES.NOTIFICATIONS_SHOWN)&&this.hideOnAutoChangeTab(r)})),(0,o.default)(this,"close",(()=>{this.handleNextOccurrenceOfPopup(),c.default.sendEventTelemetry(R.UI_TELEMETRY,D.CLICK,C.SECURITY_ALERT_POPUP_CLOSE,this.getNotificationType(),w.PATH.HTML),this.setViewDashboardNotificationID(null)})),(0,o.default)(this,"showSecurityDashboardNotification",(e=>{const t=this.getNotificationDetails(e);if(E(t))return;const r=null==t?void 0:t.image,n=L.formatMessage({id:null==t?void 0:t.message}),o=L.formatMessage({id:null==t?void 0:t.title}),a=L.formatMessage({id:"safetydashboard.notification.viewdashboard",defaultMessage:"Go to dashboard"}),u=[A.getExtensionURL(s.default.SAFETY_DASHBOARD_URL)],l=new i.default.QuestionNotification(n,{},a,this.viewDashboard,r,o,u,O.TYPE.QUESTION,void 0,void 0,{height:205});l.addCloseButtonAction(this.close),A.addMessageListener(this.handleNotificationShow),b.addNotification(l),this.setViewDashboardNotificationID(l.getID())})),(0,o.default)(this,"getPopupDisplaySettings",(e=>E(this.settingsContainer)||E(e)?(T.log("Cannot retrieve elements when key or settings container are null"),null):this.settingsContainer.getObject(e))),(0,o.default)(this,"setPopupDisplaySettings",((e,t)=>{E(this.settingsContainer)||E(e)?T.log("Cannot set to settings container when key or settingsContainer are null"):this.settingsContainer.setObject(e,t)})),(0,o.default)(this,"handleViewDashboardClickOnPopup",(()=>{h.default.setTelemetryInfo({appName:_.AppName.DASHBOARD,contextScreen:p.AppOpenContextScreen.InfieldNotification,contextAction:p.AppOpenContextActionInfieldNotification.GoToSafetyDashboard,canSendAppOpenEvent:!0}),u.default.openDashboardUI(s.default.SAFETY_DASHBOARD_URL),this.handleNextOccurrenceOfPopup()})),(0,o.default)(this,"handleNextOccurrenceOfPopup",(()=>{this.setPopupDisplaySettings(s.default.SECURITY_DASHBOARD_HEALTH_STATUS_POPUP_NEXT_OCCURANCE,this.getNextOccurenceDate(new Date)),this.setPopupDisplaySettings(s.default.IS_SECURITY_DASHBOARD_HEALTH_STATUS_POPUP_VISIBLE,!1)})),(0,o.default)(this,"displaySafetyDashboardPopup",(()=>{var e;const t=null===(e=this.store)||void 0===e?void 0:e.getState().logins.entities;if(m(t))return void T.log("Found an empty vault and hence exiting from display toaster");const r=this.getPopupDisplaySettings(s.default.SECURITY_DASHBOARD_HEALTH_STATUS_POPUP_NEXT_OCCURANCE);if(E(r))return void this.setPopupDisplaySettings(s.default.SECURITY_DASHBOARD_HEALTH_STATUS_POPUP_NEXT_OCCURANCE,this.getNextOccurenceDate(new Date));const n=this.getPopupDisplaySettings(s.default.IS_SECURITY_DASHBOARD_HEALTH_STATUS_POPUP_VISIBLE);if(g(n)&&!0===n)return void T.log("Dashboard health status popup already made visible. Dont prompt for another");let o=(new Date).getTime()/6e4;if(o=Math.round(o),r>o)return void T.log("displaySafetyDashboardPopup::Time hasnt been lapsed to display the dashboard health status again");const i=this.getNotificationType();this.showSecurityDashboardNotification(i),this.setPopupDisplaySettings(s.default.IS_SECURITY_DASHBOARD_HEALTH_STATUS_POPUP_VISIBLE,!0)}))}getViewDashboardNotificationID(){var e;return null!==(e=d.default.get(I))&&void 0!==e?e:null}setViewDashboardNotificationID(e){d.default.set(I,e)}getNotificationType(){const e=f.default.getDashboardStrengthCategory();return N[e]}getNextOccurenceDate(e){const t=e.setDate(e.getDate()+30)/6e4;return Math.round(t)}handleViewDashboardNotification(e){switch(e){case O.MESSAGES.DEFAULT_BUTTON_PRESSED:this.viewDashboard();break;case O.MESSAGES.NOTIFICATION_CLOSED:this.close();break;default:T.error("Unexpected Event from View Dashboard notification")}}};r.default=P},{"./securityDashboard":110,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"common/global.types":16,"core/background/dashboardUIController":29,"core/background/pwmSessionSettings":43,"core/background/store/telemetryInfoStore":50,"core/background/telemetry/telemetryWrapper":55,"feature/password-changer/passwordChanger":97,locale:131,"telemetry/types/lifecycleTelemetry.types":188}],113:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));const i=new class{constructor(){(0,o.default)(this,"getWeightageForMonth",(e=>e<=6?0:e<=8?.1:e<=10?.3:.32)),(0,o.default)(this,"calculateScore",((e,t,r,n)=>{const o=this.ageFactor(t,e);return r>1&&n>=1?this.duplicateFactor(o,r,n):o})),(0,o.default)(this,"ageFactor",((e,t)=>t*(1-this.getWeightageForMonth(e)))),(0,o.default)(this,"duplicateFactor",((e,t,r)=>{let n=1-t*(1/r);return n=n||.01,e*n}))}};r.default=i},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208}],114:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=n(e("common/constants/uiConstants")),u=n(e("urijs")),l=n(e("long")),c=n(e("../password-changer/passwordChanger"));const{utils:{isntNil:d}}=i.default,{passwordChangerSiteProfile:f}=s.default;const p=new class{constructor(){(0,o.default)(this,"convertLongToSec",(e=>l.default.fromValue(e).toNumber())),(0,o.default)(this,"getDomain",(e=>new u.default(e).domain())),(0,o.default)(this,"getDashboardCategory",((e=50)=>{const t=a.default.VAULT_TAB.DASHBOARD_HEALTH_CATEGORIES.find((t=>e<=t.score));return null==t?void 0:t.category}))}autoChangeSupported(e,t=f.DEFAULT){if(d(e)&&e.length>0){const r=this.getDomain(e);if(d(r)&&r.length>0){const e=c.default.getPasswordChangerRule();if(d(e)){const n=e.getPasswordChangerJSONRuleForPage(r);if(d(n)&&n.hasOwnProperty(t)&&n[t].hasOwnProperty(f.STARTING_PAGE))return!0}}}return!1}};r.default=p},{"../password-changer/passwordChanger":97,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"common/constants/uiConstants":9,long:644,urijs:718}],115:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("aws-sdk")),s=n(e("common/constants")),a=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),u=n(e("./proto"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}const{utils:{isNil:c,isntNil:d},logger:f}=o.default,p=s.default.CCT_URL_PARAMKEY.ACCESS_TOKEN;const h=new class{async getAPIClient(){const e=await this.getIDToken(),t=s.default.VAULT_UNLOCK.PROVIDER_URL,r=a.default.session.getNAGUID(),n={IdentityPoolId:s.default.VAULT_UNLOCK.POOL_ID,Logins:{[t]:e},LoginId:r};for(let e=0;e<3;e++){const e=await this.getAWSSDKInterface(n);if(d(e))return e}return null}async getAWSSDKInterface(e){i.config.region=s.default.VAULT_UNLOCK.AWS_REGION,i.config.credentials=new i.CognitoIdentityCredentials(e);try{await i.config.credentials.getPromise();return apigClientFactory.newClient({accessKey:i.config.credentials.accessKeyId,secretKey:i.config.credentials.secretAccessKey,sessionToken:i.config.credentials.sessionToken,region:s.default.VAULT_UNLOCK.AWS_REGION})}catch(e){return f.debug(e),null}}async getIDToken(){let e=a.default.session.getIDToken();return d(e)?e:new Promise((function(t,r){a.default.sso.getTokensFromRefreshToken((n=>{200===n?(e=a.default.session.getIDToken(),t(e)):r(null)}))}))}async getDeviceList(){const e=await this.getAPIClient();if(c(e))throw new Error("API Authorization Failed");const t={headers:{[p]:a.default.session.getAccessToken()}},r=await e.deviceGet(null,{},t);if(200!==r.status)throw r;const n=await r.text();return u.default.devices.DeviceArray.decode64(n)}async deleteDevice(e){if(c(e))throw new Error("Device canno be null");const t=await this.getAPIClient();if(c(t))throw new Error("API Authorization Failed");let r={headers:{[p]:a.default.session.getAccessToken()}};const n={device:e};return await t.deviceDelete(null,n,r)}async unlockRequest(e){if(c(e))throw new Error("request canno be null");const t=await this.getAPIClient();if(c(t))throw new Error("API Authorization Failed");let r={headers:{[p]:a.default.session.getAccessToken()}};const n={request:e};return await t.unlockRequestPost(null,n,r)}};r.default=h},{"./proto":116,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"aws-sdk":"aws-sdk","common/constants":13,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453}],116:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("protobufjs")),i=n(e("../../../protobuf/proto/protoBuild.json"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}const a=o.newBuilder({}).import(i.default).build();r.default=a},{"../../../protobuf/proto/protoBuild.json":721,"@babel/runtime/helpers/interopRequireDefault":208,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,protobufjs:"protobufjs"}],117:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=B(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),u=B(e("node-forge")),l=n(e("common/constants")),c=e("buffer"),d=n(e("feature/seamlessOnboarding/seamlessOnboardingKeys")),f=e("locale"),p=n(e("core/background/globalSettings")),h=n(e("core/background/reporter")),_=n(e("core/background/telemetry/telemetryWrapper")),E=n(e("core/background/pwmSessionSettings")),g=n(e("core/background/firebaseServiceWorker")),m=n(e("core/background/telemetry/heartBeatWrapper")),y=n(e("core/background/store/userInfoStore")),S=n(e("../../common/cryptoUtils")),T=n(e("../../core/background/session")),A=e("../../message-adapter/background"),b=n(e("./proto")),O=n(e("./APIGateWay")),I=n(e("./vuSettings")),v=n(e("../../core/background/dashboardUIController")),N=n(e("../../core/background/signin")),R=n(e("../../core/background/notificationIcon")),C=n(e("../../core/background/vaultActions")),D=n(e("telemetry/background")),w=e("telemetry/constants"),L=n(e("core/background/featurePromotion")),P=e("telemetry/types/vaultUnlockAndLockTelemetry.types"),M=e("common/global.types"),U=e("telemetry/types/lifecycleTelemetry.types"),j=n(e("core/background/store/telemetryInfoStore")),k=e("telemetry/types"),x=n(e("feature/autoUnlock/autoUnlock"));function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(F=function(e){return e?r:t})(e)}function B(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=F(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const H=(0,f.getIntlData)(),{utils:{isNil:W,isntNil:Y,isBoolean:K,isString:z,isFunction:q},extensionAdapter:$,logger:X}=i.default,{uiConstants:{NOTIFICATION:J}}=i.default.constants,Z=_.default.TELEMETRY_CATEGORY,Q=_.default.PASSWORDLESS_VAULT_UNLOCK_LABELS,ee=u.util.encode64,{spocManager:te}=s.default,re=s.default.session,ne=l.default.SPOC_CHANNELS.VAULT_MOBILE_REGISTRATION,oe=l.default.SPOC_CHANNELS.PASSWORDLESS_VAULT_UNLOCK,{vaultKeys:ie}=a,se=l.default.VAULT_UNLOCK,ae=l.default.VAULT_UNLOCK.RESPONSE_STATUS_CODE,ue=s.default.constants.spoc.internalErrors.SUCCESS,le=l.default.VAULT_UNLOCK.RESPONSE_STATUS,{VAULT_UNLOCK:ce}=l.default.SESSION_STORAGE_KEYS,de="c27aa50b-48af-4a5d-998d-74d68570eb0a";const fe=new class{constructor(){(0,o.default)(this,"isInitialized",!1),(0,o.default)(this,"_spocDeviceRegistrationCallback",(()=>(O.default.getDeviceList().then((e=>{this.setDeviceList(e.getDevice());try{A.messenger.publish(A.MESSAGES.DASHBOARD_MESSAGES.GET_DEVICES_UPON_REGISTRATION_SPOC_CALLBACK,this.getDeviceList(),(()=>{}))}catch(e){X.debug(e)}})).catch((e=>{let t;if("status"in e)if(403===e.status&&e.headers.get(se.AWS_ERROR_TYPE).toLowerCase()===le.INVALID_SIGNATURE_EXCEPTION)t=le.INVALID_SIGNATURE_EXCEPTION;else{t=le.SOMETING_WENT_WRONG;const r=e.status.toString();X.error(r)}else t=le.SOMETING_WENT_WRONG,X.error("SOMETING_WENT_WRONG");this.showPasswordlessVaultUnlockNotification(t),A.messenger.publish(A.MESSAGES.DASHBOARD_MESSAGES.GET_DEVICES_UPON_REGISTRATION_SPOC_CALLBACK,null,(()=>{}))})),!1))),(0,o.default)(this,"unlockVaultWithMobile",(async(e,t)=>{try{if(i.default.extensionAdapter.isManifestV3Extension()&&await g.default.initialize(),!ie.isLocked())return;if(W(e))throw new Error("callback is must required for unlockVaultWithMobile");if(this.getIsPasswordlessVaultUnlockInProgress())return X.debug("Should not send passwordless vault unlock request at the same time"),void(Y(e)&&e(se.RESPONSE_STATUS.UNLOCK_REQUEST_SENT,t));let r=I.default.getRegisteredDevice();if(W(r))throw new Error("No device registered for unlockVaultWithMobile");r=b.default.devices.Device.decode64(r);const n=r.getPubKey().toArrayBuffer(),o=r.os,a=r.id,c=u.random.getBytesSync(32),d=u.random.getBytesSync(16),f=ee(c+d),p=this._encryptWithPublicKey(f,n,o);if(W(p))throw new Error("Failed to encrypt session key with public key");let h=I.default.getEncryptedAESKey();if(h=s.default.utils.createUInt8BufferFromStringBuffer(h),W(h))throw new Error("Failed to get encrypted AES key");const _=i.default.utils.createNewGuid().toString(),E=Date.now(),m=new b.default.unlock.UnlockRequest;m.setEncKey(h),m.setEncSessionkey(p),m.setBumpSessionid(_),m.setDeviceID(a),m.setUTime(Date.now()),m.setDesktopinfo(new b.default.unlock.DesktopInfo),X.debug(`Sending unlock request with sessionID : ${_} and deviceId : ${a}`),this.setIsPasswordlessVaultUnlockInProgress(!0);let y,S=0;const A=r=>{window.removeEventListener(_,this),0!==S&&clearTimeout(S),Y(y)&&y(!0),e(r.detail,t)};O.default.unlockRequest(m.toBase64()).then((async({status:r})=>{if(403===r)return this.setIsPasswordlessVaultUnlockInProgress(!1),this.showPasswordlessVaultUnlockNotification(le.INVALID_SIGNATURE_EXCEPTION),void(Y(e)&&e(se.RESPONSE_STATUS.UNLOCK_REQUEST_FAILED));window.addEventListener(_,A);const n=this._startSPOC(_,c,d,o,E,null==t?void 0:t.context);$.isManifestV3Extension()&&T.default.registerForDatastoreUpdates();await this.waitUntil((async()=>new Promise((r=>{y=r,S=setTimeout((async()=>{if($.isManifestV3Extension()){await g.default.initialize();const e=g.default.firebaseToken,t=0;await te.disableNotification(_,oe,e,l.default.PASSWORDMANAGER_APPID,l.default.NORTON_TENANT_ID,t),this.setTimeoutFallback(!0)}window.removeEventListener(_,A),S=0;const o=se.RESPONSE_STATUS.UNLOCK_REQUEST_TIMED_OUT;this.setIsPasswordlessVaultUnlockInProgress(!1),te.cancelSPOCRequest(n),e(o,t),r(!0)}),se.UNLOCK_REQUEST_TIMEOUT)})))())})).catch((r=>{this.setIsPasswordlessVaultUnlockInProgress(!1),r.hasOwnProperty("status")&&(X.error(`unlockRequest to apiGateway failed with status ${r.status}`),403===r.status&&r.headers[se.AWS_ERROR_TYPE].toLowerCase()===le.INVALID_SIGNATURE_EXCEPTION&&this.showPasswordlessVaultUnlockNotification(le.INVALID_SIGNATURE_EXCEPTION)),Y(e)&&e(se.RESPONSE_STATUS.UNLOCK_REQUEST_FAILED,t)}))}catch(t){this.setIsPasswordlessVaultUnlockInProgress(!1),X.error(t.message),Y(e)&&e()}})),(0,o.default)(this,"waitUntil",(async e=>{const t=setInterval(chrome.runtime.getPlatformInfo,15e3);try{await e}finally{clearInterval(t)}})),(0,o.default)(this,"_passwordlessVaultUnlockSpocCallback",(e=>{if(!ie.isLocked())return!1;const t=u.util.decode64(e.data.payload),r=JSON.parse(t),n=r.encKey,{statusCode:o}=r,s=Date.now(),c=e.data.entity;if(W(c)&&X.error("passwordlessVaultUnlockSpocCallback :: entityID is nil"),_.default.sendPasswordlessVaultUnlockResponseTime(s.toString()),W(o)||o===ae.INVALID_PUBLIC_KEY||o===ae.KEY_PAIR_NOT_EXSISTS)return i.default.utils.createCustomHTMLEvent(c,se.RESPONSE_STATUS.UNLOCK_REQUEST_FAILED),I.default.removeRegisteredDevice(),!1;if(W(n))return i.default.utils.createCustomHTMLEvent(c,se.RESPONSE_STATUS.UNLOCK_REQUEST_CANCELED),!1;const d=E.default.get(ce.PASSWORDLESS_VAULT_UNLOCK_SESSIONKEY),f=E.default.get(ce.PASSWORDLESS_VAULT_UNLOCK_SESSIONIV),h=E.default.get(ce.PASSWORDLESS_VAULT_UNLOCK_OSTYPE),g=E.default.get(ce.PASSWORDLESS_VAULT_UNLOCK_REQUEST_TIME);return this.passwordlessVaultUnlockResponse(n,d,f,h,(e=>{if(Y(c)){let t;if(e.getState()===a.vaultManager.state.VAULT_SYNCED){const e=Date.now()-g;_.default.sendPasswordlessVaultUnlockSuccessTime(e.toString()),D.default.track(w.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_COMPLETED,{unlockCompleted:!0,method:P.VaultUnlockMethod.PasswordlessVaultUnlock},M.AppName.ONBOARD_SETUP),t=se.RESPONSE_STATUS.UNLOCK_REQUEST_COMPLETE,T.default.handleUnlockVaultSuccess(),m.default.startActiveUserHeartBeat(),T.default.closePasswordlessVaultUnlockUI(),v.default.getOverrideToUrl()?(v.default.openDashboardUI(v.default.getOverrideToUrl()),v.default.setOverrideToUrl(null)):p.default.getOpenVaultUI()&&v.default.openDashboardUI(l.default.DASHBOARD_INDEX_URL),_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.SHOW,Q.VU_UNLOCK_SUCCESS_UI),x.default.setAutoUnlockKeys()}else t=se.RESPONSE_STATUS.UNLOCK_REQUEST_FAILED;i.default.utils.createCustomHTMLEvent(c,t)}})),!1})),(0,o.default)(this,"_startSPOC",((e,t,r,n,o,u)=>{if(W(e)||W(t)||W(r))throw new Error("Cannot start spoc without entityID and sessionKeyIV");const c=oe;E.default.set(ce.PASSWORDLESS_VAULT_UNLOCK_SESSIONKEY,t),E.default.set(ce.PASSWORDLESS_VAULT_UNLOCK_SESSIONIV,r),E.default.set(ce.PASSWORDLESS_VAULT_UNLOCK_OSTYPE,n),E.default.set(ce.PASSWORDLESS_VAULT_UNLOCK_REQUEST_TIME,o);const d=(e,c)=>{if(te.cancelSPOCRequests(),!ie.isLocked())return!1;if(e.status.code!==ue)return X.log("VMU response spoc callback stopped"),!1;if(W(e.payload))return!1;const d=e.payload.toArrayBuffer(),f=new Uint8Array(d),h=s.default.utils.createStringBufferFromUint8Buffer(f),E=JSON.parse(h),g=E.encKey,{statusCode:y}=E,S=Date.now()-o;return _.default.sendPasswordlessVaultUnlockResponseTime(S.toString()),W(y)||y===ae.INVALID_PUBLIC_KEY||y===ae.KEY_PAIR_NOT_EXSISTS?(i.default.utils.createCustomHTMLEvent(e.entityID,se.RESPONSE_STATUS.UNLOCK_REQUEST_FAILED),I.default.removeRegisteredDevice(),!1):W(g)?(i.default.utils.createCustomHTMLEvent(e.entityID,se.RESPONSE_STATUS.UNLOCK_REQUEST_CANCELED),!1):(this.passwordlessVaultUnlockResponse(g,t,r,n,(t=>{if(Y(e.entityID)){let r;if(t.getState()===a.vaultManager.state.VAULT_SYNCED){const e=Date.now()-o;D.default.track(w.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_COMPLETED,{unlockCompleted:!0,method:P.VaultUnlockMethod.PasswordlessVaultUnlock},M.AppName.ONBOARD_SETUP),_.default.sendPasswordlessVaultUnlockSuccessTime(e.toString()),r=se.RESPONSE_STATUS.UNLOCK_REQUEST_COMPLETE,T.default.handleUnlockVaultSuccess(),m.default.startActiveUserHeartBeat(),T.default.closePasswordlessVaultUnlockUI(),v.default.getOverrideToUrl()?(v.default.openDashboardUI(v.default.getOverrideToUrl()),v.default.setOverrideToUrl(null)):p.default.getOpenVaultUI()&&(Y(u)&&u===k.UnlockContext.RestartUnlock&&j.default.setTelemetryInfo({appName:M.AppName.DASHBOARD,contextScreen:U.AppOpenContextScreen.RestartUnlock,canSendAppOpenEvent:!0}),v.default.openDashboardUI(l.default.DASHBOARD_INDEX_URL)),_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.SHOW,Q.VU_UNLOCK_SUCCESS_UI),x.default.setAutoUnlockKeys()}else r=se.RESPONSE_STATUS.UNLOCK_REQUEST_FAILED;i.default.utils.createCustomHTMLEvent(e.entityID,r)}})),!1)};if(!i.default.extensionAdapter.isManifestV3Extension()||!1!==this.getTimeoutFallback())return te.makeSpocRequest(e,c,d,1);{const t=g.default.firebaseToken,r=0;W(e)&&X.error("spoc registerToken :: entityID is nil"),te.registerToken(e,c,t,l.default.PASSWORDMANAGER_APPID,l.default.NORTON_TENANT_ID,r).then((t=>{if(!W(t))return te.makeSpocRequest(e,c,d,1)})).catch((t=>(X.error(`Error in registering fcm ${t}`),te.makeSpocRequest(e,c,d,1))))}})),(0,o.default)(this,"unlockVaultNotificationCallback",((e,t)=>{try{this.showPasswordlessVaultUnlockNotification(e,t),$.getAllTabs((t=>{t.forEach((t=>{$.sendMessageToTab(t,{id:A.MESSAGES.DASHBOARD_MESSAGES.PASSWORDLESS_VAULT_UNLOCK_RESPONSE,payload:{response:e}},(()=>{}))}))}))}catch(e){X.debug(e)}})),(0,o.default)(this,"showPasswordlessVaultUnlockNotification",(async(e,t)=>{if(i.default.utils.isNil(e))return;if(e!==le.UNLOCK_REQUEST_SENT&&this.setIsPasswordlessVaultUnlockInProgress(!1),!0===d.default.getIsSeamlessOnboardingFlow())return;let r=null,n=null,o=null,s=`${H.formatMessage({id:"norton",defaultMessage:"Norton"})} ${H.formatMessage({id:"shortProductName",defaultMessage:"Password Manager"})}`;switch(e){case le.INVALID_SIGNATURE_EXCEPTION:r=R.default.getErrorIcon(),n=H.formatMessage({id:"notification.vault.access.denied.adjust.time",defaultMessage:"Unable to unlock vault due to incorrect time settings. Try again?"}),o=new i.default.TimedNotification(n,r,s);break;case le.UNLOCK_REQUEST_SENT:{this.setOpenVaultTabUI(!1),r=R.default.getInfoIcon(),s=[H.formatMessage({id:"norton",defaultMessage:"Norton"}),H.formatMessage({id:"shortProductName",defaultMessage:"Password Manager"})].join(" ");const e=H.formatMessage({id:"mobile.request.sent.notification",defaultMessage:"Unlock request sent to mobile"});n=H.formatMessage({id:"mobile.approve.request.notification",defaultMessage:"Approve the request on your device to unlock your vault."}),o=new i.default.TimedNotification(n,r,s,e),_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.SHOW,Q.VU_UNLOCK_REQUEST_SENT)}break;case le.UNLOCK_REQUEST_COMPLETE:r=R.default.getGoodIcon(),n=H.formatMessage({id:"notification.vault.unlocked",defaultMessage:"You've unlocked your vault!"}),o=new i.default.TimedNotification(n,r,s);await L.default.shouldPromoteRecoveryFeature()&&(_.default.sendTelemetry(Z.FEATURE_PROMOTION,_.default.actionType.FEATURE_PROMOTION.RECOVERY_FEATURE_PROMOTION_STARTED,_.default.FEATURE_PROMOTION_LABEL.RECOVERYFEATURE_PASSWORDLESS_VAULT_UNLOCK),await L.default.promoteRecoveryAction(!0));break;case le.UNLOCK_REQUEST_TIMED_OUT:case le.UNLOCK_REQUEST_CANCELED:case le.UNLOCK_REQUEST_FAILED:{if(!ie.isLocked())return;let a=this.handleResendRequestAction;const u=this.handleEnterVaultPasswordAction;r=l.default.NOTIFICATION_ICON_TYPES.ALERT_ICON,s=H.formatMessage({id:"notification.passwordless.vault.unlock.request.resend",defaultMessage:"Resend unlock request to mobile?"});let c=H.formatMessage({id:"resend",defaultMessage:"Resend"});const d=H.formatMessage({id:"enter.vault.password.mobile",defaultMessage:"Enter Vault Password"});let f;e===le.UNLOCK_REQUEST_TIMED_OUT?(n=H.formatMessage({id:"notification.passwordless.vault.unlock.request.timedout",defaultMessage:"We didn't get your response. Make sure your network connection is active and push notifications are enabled and try again."}),_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.SHOW,Q.VU_UNLOCK_REQUEST_TIMEOUT),D.default.track(w.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED,V(V({},t),{},{method:P.VaultUnlockMethod.PasswordlessVaultUnlock,cause:P.VaultUnlockFailureCause.PasswordlessVaultUnlockRequestTimeOut})),f=205):e===le.UNLOCK_REQUEST_CANCELED?(n=H.formatMessage({id:"notification.passwordless.vault.unlock.request.rejected",defaultMessage:"You've rejected the unlock request on your mobile device. Resend again?"}),_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.SHOW,Q.VU_UNLOCK_REQUEST_CANCELED),D.default.track(w.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED,V(V({},t),{},{method:P.VaultUnlockMethod.PasswordlessVaultUnlock,cause:P.VaultUnlockFailureCause.PasswordlessVaultUnlockRequestRejected})),f=188):e===le.UNLOCK_REQUEST_FAILED&&(s=H.formatMessage({id:"notification.passwordless.vault.unlock.request.failed",defaultMessage:"Unlock request failed"}),n=H.formatMessage({id:"notification.passwordless.vault.unlock.request.not.sent",defaultMessage:"We couldn't send the request to your device. Please enter your vault password or try again."}),c=d,a=u,_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.SHOW,Q.VU_UNLOCK_REQUEST_NOT_SENT),D.default.track(w.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED,V(V({},t),{},{method:P.VaultUnlockMethod.PasswordlessVaultUnlock,cause:P.VaultUnlockFailureCause.PasswordlessVaultUnlockRequestFailed})),f=188),o=new i.default.QuestionNotification(n,{},c,a,r,s,void 0,J.TYPE.QUESTION,void 0,void 0,{height:f}),e!=le.UNLOCK_REQUEST_FAILED&&o.addSecondaryLink(d,u),T.default.removePasswordlessVaultUnlockFailNotificationsIfAny(),e===le.UNLOCK_REQUEST_FAILED?this.setFailedNotificationID(o.getID()):this.setCancelledNotificationID(o.getID())}break;case le.SOMETING_WENT_WRONG:h.default.showGenericErrorNotification();break;case le.UNLOCK_WELCOME:{r=l.default.NOTIFICATION_ICON_TYPES.ALERT_ICON_BLUE,s=H.formatMessage({id:"unlock.your.vault.faster",defaultMessage:"Use Passwordless Vault Unlock?"});const e=H.formatMessage({id:"set.up.now",defaultMessage:"Set up now"});n=H.formatMessage({id:"learn.to.use.mobile.app.to.unlock.your.vault",defaultMessage:"Set up and use the mobile app to give permission to unlock your vault even faster."}),o=new i.default.QuestionNotification(n,{},e,this.handleWelcomeNotificationDefaultAction,r,s,void 0,void 0,J.TYPE.QUESTION,void 0,void 0,{height:188}),this.setWelcomeNotificationId(o.getID()),o.addCloseButtonAction((()=>{this.handleWelcomeNotificationClose()})),I.default.decrementUnlockNotificationCount()}}(e!==le.UNLOCK_REQUEST_TIMED_OUT||ie.isLocked())&&i.default.utils.isntNil(o)&&i.default.notificationCenter.addNotification(o)})),(0,o.default)(this,"_encryptVaultKeys",((e=l.default.UNLOCK_MODE.MOBILE)=>{const t=u.random.getBytesSync(32),r=u.random.getBytesSync(16),n=s.default.utils.createStringBufferFromUint8Buffer(ie.getEncryptionKey());if(W(n))return void X.error("encryption key cannot be null");let o,i,a;if(o=i=a=null,i=s.default.utils.createStringBufferFromUint8Buffer(ie.getChallengePrivateKey()),W(i)&&(o=ie.getChallengeKey(),W(o)))return void X.error("both challengeKey and challengePrivateKey cannot be null");a=ie.getEncodedVaultPassword(),!0!==d.default.getIsSeamlessOnboardingFlow()&&W(a)&&X.error("password hash cannot be null");const c={vaultKey:n,challengeKey:o,challengePrivateKey:i,passwordHash:a};try{const n=S.default.encryptData(l.default.AES_ALGORITHM.GCM,t,r,JSON.stringify(c));if(e===l.default.UNLOCK_MODE.AUTO)return{encryptedDerivedKeys:n,aesKey:t,iv:r};if(Y(n))return n.data=s.default.utils.createStringBufferFromUint8Buffer(n.data),n.tag=s.default.utils.createStringBufferFromUint8Buffer(n.tag),I.default.setUnlockDerivedKeys(n),ee(t+r)}catch(e){X.error(e.message)}})),(0,o.default)(this,"_encryptWithPublicKey",((e,t,r)=>{let n=null;try{switch(r){case se.ANDROID:n=S.default.asymmetricEncryption(t,e);break;case se.IOS:const r=c.Buffer.from("00000000000000000000000000000000","hex");n=S.default.hybridEncryption("prime256v1",t,"sha256",16,"aes-128-gcm",r,e)}}catch(e){X.error(e.message)}return n})),(0,o.default)(this,"passwordlessVaultUnlockResponse",((e,t,r,n,o)=>{if(W(e))throw new Error("encAesWithIV cannot be null");if(W(t))throw new Error("sessionKey cannot be null");if(W(r))throw new Error("sessionIV cannot be null");if(W(n))throw new Error("osType data cannot be null");if(!i.default.utils.isFunction(o))throw new Error("callback should be a function");try{let i;const c=u.util.decode64(e),d=s.default.utils.createUInt8BufferFromStringBuffer(c);switch(n){case se.ANDROID:const e=d.slice(d.length-16,d.length),n=d.slice(0,d.length-e.length);i=S.default.decryptData(l.default.AES_ALGORITHM.GCM,t,r,n,e);break;case se.IOS:const o=d.slice(0,32),a=d.slice(32,d.length),c=u.hmac.create();c.start("sha256",t),c.update(s.default.utils.createStringBufferFromUint8Buffer(a));if(c.digest().getBytes()!==s.default.utils.createStringBufferFromUint8Buffer(o))throw new Error("Incorrect HMAC");i=S.default.decryptData(l.default.AES_ALGORITHM.CBC,t,r,a)}const f=u.util.decode64(s.default.utils.createStringBufferFromUint8Buffer(i)),p=f.slice(0,32),h=f.slice(32,f.length),_=I.default.getUnlockDerivedKeys(),E=S.default.decryptData(l.default.AES_ALGORITHM.GCM,p,h,s.default.utils.createUInt8BufferFromStringBuffer(_.data),s.default.utils.createUInt8BufferFromStringBuffer(_.tag)),g=s.default.utils.createStringBufferFromUint8Buffer(E),m=JSON.parse(g);ie.storeEncodedVaultPassword(m.passwordHash),ie.setSeamlessVaultUnlockState(!0),this.setVaultSdkSalt();const y={};Y(m.challengeKey)&&(y.challengeKey=u.util.encode64(m.challengeKey)),Y(m.challengePrivateKey)&&(y.challengePrivateKey=u.util.encode64(m.challengePrivateKey)),y.encryptionKey=u.util.encode64(m.vaultKey),a.vaultManager.seamlessOpenVault(y).then((({state:e})=>{if(e.getState()===l.default.VAULT_STATE.CLIENT_UNAUTHORIZED&&e.getAdditionalInfo()===l.default.VAULT_STATE_INFO.INCORRECT_DECRYPT_KEY_ERROR)I.default.removeNAGuidSettings(),ie.setLocked(!0);else if(e.getState()!==l.default.VAULT_STATE.VAULT_SYNCED){const[t,r]=C.default.validateOpenVaultErrorCode(e);D.default.track(w.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED,{touchPoint:M.TouchPoint.VAULT_UI,method:P.VaultUnlockMethod.PasswordlessVaultUnlock,cause:t,error:r})}o(e)}))}catch(e){o(l.default.VAULT_STATE.CLIENT_UNAUTHORIZED),X.error(e.message)}})),(0,o.default)(this,"removeWelcomeNotification",(e=>{Y(e)&&i.default.notificationCenter.removeNotification(e)})),(0,o.default)(this,"getDevicesForNA",(e=>{if(!q(e))throw new Error("callback should be a function");O.default.getDeviceList().then((t=>{this.setDeviceList(t.getDevice());try{e(this.getDeviceList())}catch(e){X.debug(e)}})).catch((t=>{let r;"status"in t?(X.error(`GET_NA_DEVICES failed with status : ${t.status}`),403===t.status&&t.headers.get(se.AWS_ERROR_TYPE).toLowerCase()===le.INVALID_SIGNATURE_EXCEPTION?(r=le.INVALID_SIGNATURE_EXCEPTION,d.default.setIsSeamlessOnboardingFlow(!1)):r=le.SOMETING_WENT_WRONG):(r=le.SOMETING_WENT_WRONG,X.error(t)),this.showPasswordlessVaultUnlockNotification(r),e([])}))})),(0,o.default)(this,"removeNADevice",(async(e,t)=>{if(W(e)||W(e.device))return;const{device:{id:r,name:n,os:o,type:i}}=e,s=new b.default.devices.Device;s.setId(r),s.setName(n),s.setOs(o),s.setType(i),s.setPubKey(new Uint8Array);try{await O.default.deleteDevice(s.toBase64()),t(!0),_.default.sendRemoveDeviceStatus(_.default.REMOVE_DEVICE_LABELS.REMOVE_DEVICE_SUCCESS)}catch(e){this.showPasswordlessVaultUnlockNotification(le.SOMETING_WENT_WRONG),t(!1),_.default.sendRemoveDeviceStatus(_.default.REMOVE_DEVICE_LABELS.REMOVE_DEVICE_FAILED),X.debug(e)}})),(0,o.default)(this,"setupPasswordlessVaultUnlock",((e,t)=>{if(!q(t))throw new Error("callback should be a function");if(!z(e))return this.showPasswordlessVaultUnlockNotification(le.SOMETING_WENT_WRONG),void t({success:!1});const r=this._encryptVaultKeys();if(W(r))return this.showPasswordlessVaultUnlockNotification(le.SOMETING_WENT_WRONG),void t({success:!1});let n=null,o=null;const i=e;let a,u;for(const e of this.getDeviceList())if(i===e.id){a=e.getPubKey(),u=a.toArrayBuffer(),o=e;break}n=this._encryptWithPublicKey(r,u,o.os);let l=!1;Y(n)?(I.default.setEncryptedAESKey(s.default.utils.createStringBufferFromUint8Buffer(n)),l=!0,I.default.setRegisteredDevice(o.toBase64()),I.default.splashScreenShown(!0)):this.showPasswordlessVaultUnlockNotification(le.SOMETING_WENT_WRONG),t({success:l})})),(0,o.default)(this,"setVaultSdkSalt",(()=>{let e=null;e=W(ie.getSalt())&&W(I.default.getPasswordHashSalt())?i.default.utils.createNewGuid():W(ie.getSalt())?I.default.getPasswordHashSalt():ie.getSalt(),I.default.setPasswordHashSalt(e),ie.setSalt(e)})),this.setWelcomeNotificationId=this.setWelcomeNotificationId.bind(this),this.handleWelcomeNotificationDefaultAction=this.handleWelcomeNotificationDefaultAction.bind(this),this.handleWelcomeNotificationClose=this.handleWelcomeNotificationClose.bind(this),this.handleResendRequestAction=this.handleResendRequestAction.bind(this),this.handleEnterVaultPasswordAction=this.handleEnterVaultPasswordAction.bind(this),this.unlockVaultWithMobile=this.unlockVaultWithMobile.bind(this)}getNAGUID(){var e;return null!==(e=E.default.get(ce.NAGUID))&&void 0!==e?e:null}setNAGUID(e){E.default.set(ce.NAGUID,e)}getSpocIdentity(){var e;return null!==(e=E.default.get(ce.SPOC_IDENTITY))&&void 0!==e?e:null}setSpocIdentity(e){E.default.set(ce.SPOC_IDENTITY,e)}setTimeoutFallback(e){E.default.set(de,e)}getTimeoutFallback(){var e;return null!==(e=E.default.get(de))&&void 0!==e&&e}getDeviceList(){let e=E.default.get(ce.DEVICE_LIST);if(W(e))return null;const t=b.default.devices.Device;return e=e.map((e=>t.decode64(e))),e}setDeviceList(e){const t=e.map((e=>e.toBase64()));E.default.set(ce.DEVICE_LIST,t)}getAuthorizedDevice(){var e;return null!==(e=E.default.get(ce.AUTHORIZED_DEVICE))&&void 0!==e?e:null}setAuthorizedDevice(e){E.default.set(ce.AUTHORIZED_DEVICE,e)}getFailedNotificationID(){var e;return null!==(e=E.default.get(ce.FAILED_NOTIFICATION_ID))&&void 0!==e?e:null}setFailedNotificationID(e){E.default.set(ce.FAILED_NOTIFICATION_ID,e)}getCancelledNotificationID(){var e;return null!==(e=E.default.get(ce.CANCELLED_NOTIFICATION_ID))&&void 0!==e?e:null}setCancelledNotificationID(e){E.default.set(ce.CANCELLED_NOTIFICATION_ID,e)}getWelcomeNotificationId(){var e;return null!==(e=E.default.get(ce.WELCOME_NOTIFICATION_ID))&&void 0!==e?e:null}setWelcomeNotificationId(e){E.default.set(ce.WELCOME_NOTIFICATION_ID,e)}getOpenVaultTabUI(){var e;return null===(e=E.default.get(ce.OPEN_VAULT_TAB_UI))||void 0===e||e}setOpenVaultTabUI(e){E.default.set(ce.OPEN_VAULT_TAB_UI,e)}getAutomaticPasswordlessVaultUnlockRequest(){var e;return null!==(e=E.default.get(ce.AUTOMATIC_PASSWORDLESS_VAULT_UNLOCK_REQUEST))&&void 0!==e&&e}setAutomaticPasswordlessVaultUnlockRequest(e){E.default.set(ce.AUTOMATIC_PASSWORDLESS_VAULT_UNLOCK_REQUEST,e)}getIsPasswordlessVaultUnlockInProgress(){var e;return null!==(e=E.default.get(ce.IS_PASSWORDLESS_VAULT_UNLOCK_IN_PROGRESS))&&void 0!==e&&e}setIsPasswordlessVaultUnlockInProgress(e){E.default.set(ce.IS_PASSWORDLESS_VAULT_UNLOCK_IN_PROGRESS,e)}initMessengerSubscription(){A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.GET_NA_DEVICES,((e,t)=>{this.getDevicesForNA(t)})),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.GET_AUTHORIZED_DEVICE,((e,t)=>{t(this.getAuthorizedDevice())})),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.SETUP_PASSWORDLESS_VAULT_UNLOCK,((e,t)=>{this.setupPasswordlessVaultUnlock(e.deviceId,t)})),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.REMOVE_REGISTERED_DEVICE,((e,t)=>{I.default.removeRegisteredDevice();try{t({success:!0})}catch(e){X.debug(e)}})),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.GET_DEVICES_UPON_REGISTRATION_SPOC,(async(e,t)=>{const r=re.getNAGUID();if(W(r)&&X.error("GET_DEVICES_UPON_REGISTRATION_SPOC :: entityID is nil"),i.default.extensionAdapter.isManifestV3Extension()){await g.default.initialize();const e=g.default.firebaseToken,t=0;return void te.registerToken(r,ne,e,l.default.PASSWORDMANAGER_APPID,l.default.NORTON_TENANT_ID,t)}const n=e=>(e.status.code===ue&&O.default.getDeviceList().then((e=>{this.setDeviceList(e.getDevice());try{t(this.getDeviceList())}catch(e){X.debug(e)}Y(this.getSpocIdentity())&&0!=this.getDeviceList().length&&(te.cancelSPOCRequest(this.getSpocIdentity()),this.setSpocIdentity(null))})).catch((e=>{let r;if("status"in e)if(403===e.status&&e.headers.get(se.AWS_ERROR_TYPE).toLowerCase()===le.INVALID_SIGNATURE_EXCEPTION)r=le.INVALID_SIGNATURE_EXCEPTION;else{r=le.SOMETING_WENT_WRONG;const t=e.status.toString();X.error(t)}else r=le.SOMETING_WENT_WRONG,X.error("SOMETING_WENT_WRONG");this.showPasswordlessVaultUnlockNotification(r),t(null)})),!1);return te.poll(r,ne,((e,t)=>{Y(t)&&X.error(t);try{Y(this.getSpocIdentity())&&Y(this.getDeviceList())&&0!==this.getDeviceList().length&&(te.cancelSPOCRequest(this.getSpocIdentity()),this.setSpocIdentity(null)),this.setSpocIdentity(te.makeSpocRequest(r,ne,n,e))}catch(e){X.error(e)}})),!0})),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.AUTO_PASSWORDLESS_VAULT_UNLOCK_REQUEST,((e,t)=>(K(e)&&I.default.setAutoPasswordlessVaultUnlockRequest(e),!1))),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.SEND_UNLOCK_VAULT_TO_MOBILE,(e=>(this.setOpenVaultTabUI(!0),this.unlockVaultWithMobile(this.unlockVaultNotificationCallback,e),!0))),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.UNLOCK_TAB_CLOSE,(e=>(!1===N.default.getIsUnlockTabClosedByExtension()?D.default.track(w.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_CLOSED,e):N.default.setIsUnlockTabClosedByExtension(!1),!0))),A.messenger.subscribe(A.MESSAGES.DASHBOARD_MESSAGES.REMOVE_DEVICE,((e,t)=>(this.removeNADevice(e,t),!0)))}handleWelcomeNotificationDefaultAction(){I.default.setBypassLoginCountForSplash(!0),y.default.setUserInfo(),j.default.setTelemetryInfo({appName:M.AppName.DASHBOARD,contextScreen:U.AppOpenContextScreen.InfieldNotification,contextAction:U.AppOpenContextActionInfieldNotification.PasswordlessVaultUnlockSetupNow,canSendAppOpenEvent:!0}),v.default.openDashboardUI(l.default.FAVORITES_URL),_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.CLICK,Q.VU_WELCOME_NOTIFICATION_OK),this.setWelcomeNotificationId(null)}handleWelcomeNotificationClose(){_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.CLICK,Q.VU_WELCOME_NOTIFICATION_CLOSE),this.setWelcomeNotificationId(null)}handleResendRequestAction(){_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.CLICK,Q.VU_NOTIFICATION_RESEND),j.default.setTelemetryInfo({appName:M.AppName.ONBOARD_SETUP,contextScreen:U.AppOpenContextScreen.InfieldNotification,contextAction:U.AppOpenContextActionInfieldNotification.PasswordlessVaultUnlockResend,canSendAppOpenEvent:!0}),this.unlockVaultWithMobile(this.unlockVaultNotificationCallback,{context:j.default.getAppContext(M.AppName.ONBOARD_SETUP),touchPoint:M.TouchPoint.INFIELD_NOTIFICATION})}handleEnterVaultPasswordAction(){_.default.sendTelemetry(Z.PASSWORDLESS_VAULT_UNLOCK,_.default.actionType.ACTION.CLICK,Q.VU_NOTIFICATION_ENTER_VAULT_PASSWORD),j.default.setTelemetryInfo({appName:M.AppName.ONBOARD_SETUP,contextScreen:U.AppOpenContextScreen.InfieldNotification,contextAction:U.AppOpenContextActionInfieldNotification.EnterVaultPassword,canSendAppOpenEvent:!0}),N.default.openVaultLoginPage(!1)}handleWelcomeNotification(e){switch(e){case J.MESSAGES.DEFAULT_BUTTON_PRESSED:this.handleWelcomeNotificationDefaultAction();break;case J.MESSAGES.NOTIFICATION_CLOSED:this.handleWelcomeNotificationClose();break;default:X.error("Unexpected Event from Vault Unlock Welcome notification")}}handlePasswordlessVaultUnlockRequestCancelledNotification(e){switch(e){case J.MESSAGES.DEFAULT_BUTTON_PRESSED:this.handleResendRequestAction();break;case J.MESSAGES.SECONDARY_LINK_PRESSED:this.handleEnterVaultPasswordAction();break;case J.MESSAGES.NOTIFICATION_CLOSED:X.info("Close button is clicked on Passwordless Vault Unlock Request rejected notification");break;default:X.error("Unexpected Event from Passwordless Vault Unlock Request rejected notification")}}handlePasswordlessVaultUnlockRequestFailedNotification(e){switch(e){case J.MESSAGES.DEFAULT_BUTTON_PRESSED:this.handleEnterVaultPasswordAction();break;case J.MESSAGES.NOTIFICATION_CLOSED:X.info("Close button is clicked on Passwordless Vault Unlock Request failed notification");break;default:X.error("Unexpected Event from Passwordless Vault Unlock Request failed notification")}}getDeviceInfo(){let e=I.default.getRegisteredDevice();const t={deviceName:null,deviceId:null};if(Y(e)){e=b.default.devices.Device.decode64(e),t.deviceName=e.name,t.deviceId=e.id}return t}async init(){try{return this.isInitialized||(this.initMessengerSubscription(),this.isInitialized=!0,X.info("vaultUnlockManager :: Initialization is done successfully")),this.isInitialized}catch(e){const t=`ERROR :: Initialising vault Info Modules: ${e}`;throw X.error(t),new Error(t)}}};r.default=fe},{"../../common/cryptoUtils":14,"../../core/background/dashboardUIController":29,"../../core/background/notificationIcon":42,"../../core/background/session":46,"../../core/background/signin":47,"../../core/background/vaultActions":57,"../../message-adapter/background":134,"./APIGateWay":115,"./proto":116,"./vuSettings":118,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,buffer:251,"common/constants":13,"common/global.types":16,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/es.typed-array.fill.js":447,"core-js/modules/es.typed-array.set.js":448,"core-js/modules/es.typed-array.sort.js":449,"core-js/modules/es.typed-array.uint8-array.js":450,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/featurePromotion":34,"core/background/firebaseServiceWorker":35,"core/background/globalSettings":36,"core/background/pwmSessionSettings":43,"core/background/reporter":45,"core/background/store/telemetryInfoStore":50,"core/background/store/userInfoStore":51,"core/background/telemetry/heartBeatWrapper":53,"core/background/telemetry/telemetryWrapper":55,"feature/autoUnlock/autoUnlock":60,"feature/seamlessOnboarding/seamlessOnboardingKeys":107,locale:131,"node-forge":"node-forge","telemetry/background":170,"telemetry/constants":173,"telemetry/types":186,"telemetry/types/lifecycleTelemetry.types":188,"telemetry/types/vaultUnlockAndLockTelemetry.types":195}],118:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("common/constants")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=n(e("core/background/naGuidSettingsManager")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),l=n(e("../../core/background/store/userInfoStore"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}const{utils:{isEmptyObject:d,isntNil:f,isBoolean:p,isInteger:h,isNil:_}}=i.default,E=s.default.session,g=o.default.VAULT_UNLOCK.SETTINGS_KEY;class m extends a.default{getNAGuidSettings(){const e=super.getNAGuidSettings();return d(e)?this.defaultSettingsStructure():e}defaultSettingsStructure(){let e={};return e[g.DERIVED_KEYS]=null,e[g.ENCRYPTED_AES]=null,e[g.REGISTERED_DEVICE]=null,e[g.REGISTERED_TIME]=null,e[o.default.SPLASH_SCREEN_SHOWN]=null,e[o.default.BYPASS_LOGIN_COUNT_FOR_SPLASH]=null,e[g.PASSWORD_SALT]=null,e[o.default.UNLOCK_NOTIFICATION_COUNT]=3,e[g.AUTO_PASSWORDLESS_VAULT_UNLOCK_REQUEST]=!0,e[g.AUTO_UNLOCK]={enabled:!1,days:null},e}removeRegisteredDevice(){const e=this.getIsSplashScreenShown(),t=this.isAutoPasswordlessVaultUnlockRequestEnabled();this.removeNAGuidSettings(),this.splashScreenShown(e),this.setAutoPasswordlessVaultUnlockRequest(t)}removeNAGuidSettings(){let e=E.getNAGUID();const t=this.getPasswordHashSalt(),r=this.getAutoUnlockSettings();f(e)&&this.removeValue(e),f(t)&&(this.setPasswordHashSalt(t),u.vaultKeys.setSalt(t)),l.default.setUserInfo(),this.setAutoUnlockSettings(r)}setUnlockDerivedKeys(e){if(f(e)){let t=this.getNAGuidSettings();t[g.DERIVED_KEYS]=e,this.setNAGuidSettings(t)}}getUnlockDerivedKeys(){const e=this.getNAGuidSettings()[g.DERIVED_KEYS];return f(e)?e:null}setEncryptedAESKey(e){if(f(e)){let t=this.getNAGuidSettings();t[g.ENCRYPTED_AES]=e,this.setNAGuidSettings(t)}}setAutoUnlockSettings({enabled:e,days:t}){if(_(e))return;let r=this.getNAGuidSettings();const n=i.default.utils.getNextOccurenceDate(t);r[g.AUTO_UNLOCK]={enabled:e,days:n},this.setNAGuidSettings(r)}getAutoUnlockSettings(){var e;return null!==(e=this.getNAGuidSettings()[g.AUTO_UNLOCK])&&void 0!==e?e:{}}getEncryptedAESKey(){const e=this.getNAGuidSettings()[g.ENCRYPTED_AES];return f(e)?e:null}setRegisteredDevice(e){if(f(e)){let t=this.getNAGuidSettings();t[g.REGISTERED_DEVICE]=e;const r=new Date;t[g.REGISTERED_TIME]=r.toString(),this.setNAGuidSettings(t)}}getRegisteredDevice(){const e=this.getNAGuidSettings()[g.REGISTERED_DEVICE];return f(e)?e:null}getRegisteredTime(){const e=this.getNAGuidSettings()[g.REGISTERED_TIME];return f(e)?e:null}getIsSplashScreenShown(){const e=this.getNAGuidSettings()[o.default.SPLASH_SCREEN_SHOWN];return!!p(e)&&e}splashScreenShown(e){const t=this.getNAGuidSettings();t[o.default.SPLASH_SCREEN_SHOWN]=e,this.setNAGuidSettings(t)}setBypassLoginCountForSplash(e){const t=this.getNAGuidSettings();t[o.default.BYPASS_LOGIN_COUNT_FOR_SPLASH]=e,this.setNAGuidSettings(t)}getBypassLoginCountForSplash(){const e=this.getNAGuidSettings()[o.default.BYPASS_LOGIN_COUNT_FOR_SPLASH];return!!p(e)&&e}getPasswordHashSalt(){const e=this.getNAGuidSettings()[g.PASSWORD_SALT];return f(e)?e:null}setPasswordHashSalt(e){let t=this.getNAGuidSettings();t[g.PASSWORD_SALT]=e,this.setNAGuidSettings(t)}getUnlockNotificationCount(){const e=this.getNAGuidSettings()[o.default.UNLOCK_NOTIFICATION_COUNT];return h(e)?e:0}decrementUnlockNotificationCount(){let e=this.getNAGuidSettings(),t=e[o.default.UNLOCK_NOTIFICATION_COUNT];t>0&&(e[o.default.UNLOCK_NOTIFICATION_COUNT]=t-1),this.setNAGuidSettings(e)}isAutoPasswordlessVaultUnlockRequestEnabled(){let e=this.getNAGuidSettings()[g.AUTO_PASSWORDLESS_VAULT_UNLOCK_REQUEST];return!p(e)||e}setAutoPasswordlessVaultUnlockRequest(e){let t=this.getNAGuidSettings();t[g.AUTO_PASSWORDLESS_VAULT_UNLOCK_REQUEST]=e,this.setNAGuidSettings(t)}}const y=new m(o.default.VAULT_UNLOCK_CONTAINER);r.default=y},{"../../core/background/store/userInfoStore":51,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/naGuidSettingsManager":41}],119:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.MOTV2=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),u=n(e("@browser-services/wax/dist/release/Firefox/prod/SymWax.js")),l=n(e("core/background/cctWorker")),c=n(e("common/constants")),d=n(e("core/background/extension/extensionSettings")),f=n(e("core/background/uiService")),p=n(e("common/constants/uiConstants")),h=n(e("feature/compromised-password/compromisedPasswordHelper")),_=n(e("feature/security-dashboard/securityDashboardUtils")),E=n(e("feature/compromised-password/motFlowManager")),g=n(e("core/background/naAccountHandler")),m=n(e("feature/password-changer/passwordChanger")),y=n(e("core/background/notificationIcon")),S=e("locale"),T=e("./../../../redux-core/features/logins/loginsSlice"),A=n(e("core/background/telemetry/telemetryWrapper")),b=n(e("core/background/pwmSessionSettings")),O=n(e("feature/compromised-password/compromisedNotificationSettings")),I=e("core/background/commonUtilsBG"),v=n(e("feature/compromised-password/loginInfoManager")),N=e("telemetry/constants"),R=e("telemetry/types"),C=e("telemetry/background/helper/TelemetryHelper"),D=e("common/global.types"),w=n(e("telemetry/background")),L=n(e("./waxStorageSettings")),P=n(e("./formSubmissionHandler")),M=n(e("../../core/background/globalSettings")),U=n(e("feature/compromised-password/LoginInfo"));function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const F="fulfilled",B="rejected",G=(0,S.getIntlData)(),{logger:V}=i.default,{uiConstants:{NOTIFICATION:H}}=i.default.constants,{NOTIFICATION_SUB_TYPES:W}=c.default,{vaultKeys:Y,vaultManager:K}=a,{waxFormSubmissionConstants:z}=u.default,q="active_user",$="inactive_user",X=r.MOTV2="motv2",{FILL_CAPTURE_HANDLER:J}=c.default.SESSION_STORAGE_KEYS,{passwordChangerSiteProfile:Z}=c.default,{NSL_URL:Q}=s.default.authSCD,ee=A.default.TELEMETRY_CATEGORY,te=A.default.LABELS,re=A.default.actionType.ACTION,ne=A.default.DOCUMENT;const oe=new class{constructor(){(0,o.default)(this,"showNotification",((e,t,r,n)=>{if(i.default.utils.isntNil(e)&&i.default.utils.isntNil(t)){const o=[G.formatMessage({id:"norton",defaultMessage:"Norton"}),G.formatMessage({id:"shortProductName",defaultMessage:"Password Manager"})].join(" "),s=G.formatMessage({id:t,defaultMessage:r});let a,u;n?(a=y.default.getGoodIcon(),u=(0,I.hasValue)(e)?i.default.utils.upperCaseFirstLetter(e):""):(a=y.default.getErrorIcon(),u="");const l=new i.default.TimedNotification(s,a,o,u);i.default.notificationCenter.addNotification(l)}})),(0,o.default)(this,"_isAutochangeSupported",(function(e){if(l.default.getSignInFlowInProgress()){if(e.startsWith(c.default.CCT_URL)||e.startsWith(Q))return!1;const t=i.default.utils.getDomain(e);if(i.default.utils.isntNil(t)&&t.length>0&&(0,I.isDomainInAuthLoginKeys)(t))return!1}return _.default.autoChangeSupported(e,Z.NO_LOGOUT)})),(0,o.default)(this,"_saveNewLogin",(e=>{var t,r;e.path=`{${i.default.utils.createNewGuid()}}`,e.lastUpdate=(new Date).getTime()/1e3;const n=this.getUsername();i.default.utils.isntNil(n)&&(e.username=n);const o=this._removeSiteLoginStatus(e),s=null===(t=this.store)||void 0===t?void 0:t.dispatch((0,T.addItem)(o));null==s||s.then((({meta:t})=>{const r=i.default.utils.getDomain(e.loginURL);t.requestStatus===F?(w.default.track(N.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVED,{category:D.ItemCategory.Login,context:R.ItemSaveContext.SaveNotification,touchPoint:D.TouchPoint.INFIELD_NOTIFICATION}),this.showNotification(r,"wax.autosave.notification","New login saved!",!0)):t.requestStatus===B&&this.showNotification(r,"wax.autosave.failure.notification","We couldn't save your login. Let's try again?",!1)}));const a=null!==(r=this._constructSiteLoginStatusDimension(e))&&void 0!==r?r:"";A.default.sendEventTelemetry(ee.UI_TELEMETRY,re.CLICK,te.SAVE_NEW_LOGIN,ne.TITLE.SAVE_LOGIN_NOTIFICATION,ne.PATH.HTML,[{key:"cd7",value:a}]),w.default.track(N.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVE,{category:D.ItemCategory.Login,context:R.ItemSaveContext.SaveNotification,touchPoint:D.TouchPoint.INFIELD_NOTIFICATION}),w.default.track(N.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.SAVE_NOTIFICATION_CLICKED,{category:R.InfieldElementCategory.Login,type:R.SaveNotificationClickedType.Save,action:R.SaveNotificationClickedAction.Save,touchPoint:D.TouchPoint.INFIELD_NOTIFICATION}),this.setUsername(void 0)})),(0,o.default)(this,"_onAutochangeFinishedListenerCallback",(e=>{if(this.setIsPasswordAutochangeInProgress(!1),!i.default.utils.isNil(e.detail))return i.default.utils.isNil(e.detail.status)||"success"!==e.detail.status||i.default.utils.isNil(e.detail.credentials)?(V.error("Mot AutoChange failed"),this.resetCompromisedPasswordFlowState(),void E.default.showMotFlowScreen(p.default.MOT_ONBOARDING.PASSWORD_CHANGE_ERROR.URL)):void E.default.startMotFlow(e.detail.credentials)})),(0,o.default)(this,"_onSignInToNortonListenerCallback",(()=>{this.setIsSignedInToNortonSession(!1),window.removeEventListener(c.default.NORTON_SIGN_IN_SESSION,this._onSignInToNortonListenerCallback),this._registerOnSignInToNortonListener()})),(0,o.default)(this,"_compromisedPasswordFlowNotificationCallback",(()=>{A.default.sendCompromisedPasswordNotificationClicked(Y.isLocked()?$:q),w.default.track(N.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.MOT_WARNING_CLICKED,{category:R.InfieldElementCategory.Login,action:R.WarningNotificationAction.ChangePassword,touchPoint:D.TouchPoint.INFIELD_NOTIFICATION}),h.default.setCompromisedNotificationVisible(!1),h.default.setCompromisedPasswordFlowInProgress(!0),Y.isLocked()?f.default.setBrowserActionIcon(!1):f.default.setBrowserActionIcon(!0),(async()=>{await g.default.isLoggedIn()&&await g.default.refreshToken(A.default.sendLogoutNAForTokenRefreshForMOTFlow);try{const e=E.default.getExistingLoginInfo();e&&this._startPasswordAutochange(e.get())}catch(e){V.error(e),this.resetCompromisedPasswordFlowState()}})()})),this._saveNewLogin=this._saveNewLogin.bind(this),this._handleNewLoginNoThanks=this._handleNewLoginNoThanks.bind(this),this.getNotificationIDNewLoginInfoMap=this.getNotificationIDNewLoginInfoMap.bind(this),this.getNotificationIDPasswordUpdateInfoMap=this.getNotificationIDPasswordUpdateInfoMap.bind(this),this.getNotificationIDCompromisedLoginMap=this.getNotificationIDCompromisedLoginMap.bind(this),this.removeNewLoginInfoNotificationIDFromMap=this.removeNewLoginInfoNotificationIDFromMap.bind(this),this._replacePassword=this._replacePassword.bind(this),this._sendReplacePasswordTelemetry=this._sendReplacePasswordTelemetry.bind(this),this._handleReplaceLoginNoThanks=this._handleReplaceLoginNoThanks.bind(this),this.removePasswordUpdateInfoNotificationIDFromMap=this.removePasswordUpdateInfoNotificationIDFromMap.bind(this),this._compromisedPasswordFlowNotificationCallback=this._compromisedPasswordFlowNotificationCallback.bind(this),this._compromisedPasswordNotificationCloseButtonAction=this._compromisedPasswordNotificationCloseButtonAction.bind(this),this.removeCompromisedLoginNotificationIDFromMap=this.removeCompromisedLoginNotificationIDFromMap.bind(this),this._onAutochangeStartedListenerCallback=this._onAutochangeStartedListenerCallback.bind(this),this.setIsPasswordAutochangeInProgress=this.setIsPasswordAutochangeInProgress.bind(this),this.sendNotificationShownTelemetry=this.sendNotificationShownTelemetry.bind(this)}sendNotificationShownTelemetry(e,t,r){const n=x(x({},r),{},{subDomain:(0,C.getUrlSubDomainForTelemetry)(t),domain:(0,C.getUrlDomainForTelemetry)(t),category:R.InfieldElementCategory.Login});w.default.track(N.TELEMETRY_ACTIONS.GENERIC_ACTION.TOUCH_POINT_UPDATED,{touchPoint:D.TouchPoint.INFIELD_NOTIFICATION}),w.default.track(e,n)}setUsername(e){b.default.set(J.UPDATED_USERNAME,e)}getUsername(){var e;return null!==(e=b.default.get(J.UPDATED_USERNAME))&&void 0!==e?e:null}getAutoFilledItems(){var e;return null!==(e=b.default.get(J.AUTO_FILLED_ITEMS))&&void 0!==e?e:{}}setAutoFilledItems(e){b.default.set(J.AUTO_FILLED_ITEMS,e)}getIsPasswordAutochangeInProgress(){var e;return null!==(e=b.default.get(J.IS_PASSWORD_AUTO_CHANGE_IN_PROGRESS))&&void 0!==e&&e}setIsPasswordAutochangeInProgress(e){b.default.set(J.IS_PASSWORD_AUTO_CHANGE_IN_PROGRESS,e)}getIsSignedInToNortonSession(){var e;return null!==(e=b.default.get(J.IS_SIGNED_IN_TO_NORTON_SESSION))&&void 0!==e&&e}setIsSignedInToNortonSession(e){b.default.set(J.IS_SIGNED_IN_TO_NORTON_SESSION,e)}getTabID(){var e;return null!==(e=b.default.get(J.TAB_ID))&&void 0!==e?e:null}setTabID(e){b.default.set(J.TAB_ID,e)}getNotificationIDNewLoginInfoMap(){var e;return null!==(e=b.default.get(J.NOTIFICATION_ID_NEW_LOGIN_INFO_MAP))&&void 0!==e?e:{}}setNotificationIDNewLoginInfoMap(e,t){const r=this.getNotificationIDNewLoginInfoMap();r[e]=t,b.default.set(J.NOTIFICATION_ID_NEW_LOGIN_INFO_MAP,r)}setLoginInfo(e,t){if(i.default.utils.isNil(e))return;const r=v.default.getObfuscationKey(),n=i.default.utils.obfuscatePassword(t.password,r);b.default.set(e,x(x({},t),{},{password:n}))}clearLoginInfo(e){b.default.set(e,void 0)}getLoginInfo(e){var t;if(i.default.utils.isNil(e))return;const r=null!==(t=b.default.get(e))&&void 0!==t?t:{};if(i.default.utils.isEmptyObject(r))return null;const n=v.default.getObfuscationKey(),o=i.default.utils.obfuscatePassword(r.password,n);return x(x({},r),{},{password:o})}removeNewLoginInfoNotificationIDFromMap(e){const t=this.getNotificationIDNewLoginInfoMap();delete t[e],b.default.set(J.NOTIFICATION_ID_NEW_LOGIN_INFO_MAP,t)}getNotificationIDPasswordUpdateInfoMap(){var e;return null!==(e=b.default.get(J.NOTIFICATION_ID_PASSWORD_UPDATE_INFO_MAP))&&void 0!==e?e:{}}setNotificationIDPasswordUpdateInfoMap(e,t){const r=this.getNotificationIDPasswordUpdateInfoMap();r[e]=t,b.default.set(J.NOTIFICATION_ID_PASSWORD_UPDATE_INFO_MAP,r)}removePasswordUpdateInfoNotificationIDFromMap(e){const t=this.getNotificationIDPasswordUpdateInfoMap();delete t[e],b.default.set(J.NOTIFICATION_ID_PASSWORD_UPDATE_INFO_MAP,t)}getNotificationIDCompromisedLoginMap(){var e;return null!==(e=b.default.get(J.NOTIFICATION_ID_COMPROMISED_LOGIN_MAP))&&void 0!==e?e:{}}setNotificationIDCompromisedLoginMap(e,t){const r=this.getNotificationIDCompromisedLoginMap();r[e]=t,b.default.set(J.NOTIFICATION_ID_COMPROMISED_LOGIN_MAP,r)}removeCompromisedLoginNotificationIDFromMap(e){const t=this.getNotificationIDCompromisedLoginMap();delete t[e],b.default.set(J.NOTIFICATION_ID_COMPROMISED_LOGIN_MAP,t)}addAutFilledItemGuid(e,t){var r;const n=this.getAutoFilledItems();n[e]=t,this.setAutoFilledItems(n);const o=(0,T.selectLoginById)(null===(r=this.store)||void 0===r?void 0:r.getState(),t);L.default.setFrequentlyUsedLoginId({url:i.default.utils.baseURL(null==o?void 0:o.loginURL),loginId:t})}getLoginsByUrl(e,t,r,n){if(!i.default.utils.isString(e))throw new Error("getLoginsByUrl: url must be a string");if(i.default.utils.isNil(t))throw new Error("getLoginsByUrl: tabId should not be Nil");if(!i.default.utils.isFunction(r))throw new Error("getLoginsByUrl: received nil or non-function callback parameter");const o=this.getAutoFilledItems();i.default.utils.isntNil(o)&&o.hasOwnProperty(t)&&(delete o[t],this.setAutoFilledItems(o));const s=[];let a=null;if(Y.isLocked())return void r(s,a);if(n&&i.default.utils.urlProtocol(e)!==c.default.HTTPS_PROTOCOL)return void r(s,a);K.getItemManager("LoginManager").searchKey(e,((e,t)=>{i.default.utils.isntNil(t)?a=t:i.default.utils.isArray(e)?(e.forEach((e=>{const t=e.getUsername(),r=e.getPassword(),n=e.getSiteName(),o=e.getPath(),i=e.getAutoFill(),a=e.getSecure(),u=e.getLoginURL(),{favorite:l}=e,{lastUpdate:c}=e;s.push({id:o,sitename:n,username:t,password:r,autofill:i,secure:a,loginURL:u,favorite:l,lastUpdate:c})})),r(s,a)):a=new Error("getLoginsByUrl: login manager search returned null or undefined collection")}))}_replacePassword(e,t){var r,n;const o=(0,T.selectLoginById)(null===(r=this.store)||void 0===r?void 0:r.getState(),e);if(i.default.utils.isNil(o))return;const s=x({},o);s.password=t,s.lastUpdate=(new Date).getTime()/1e3,h.default.isCompromisedPasswordFlowInProgress()&&A.default.sendPasswordReplacedMOT();const a=null===(n=this.store)||void 0===n?void 0:n.dispatch((0,T.updateItem)(s));null==a||a.then((({meta:e})=>{const t=i.default.utils.getDomain(null==o?void 0:o.loginURL);e.requestStatus===F?this.showNotification(t,"wax.autosave.update.notification","Password updated!",!0):e.requestStatus===B&&this.showNotification(t,"wax.autosave.update.failure.notification","We couldn't update your login. Let's try again?",!1)}))}_sendReplacePasswordTelemetry(e){var t;const r=null!==(t=this._constructSiteLoginStatusDimension(e))&&void 0!==t?t:"";A.default.sendEventTelemetry(ee.UI_TELEMETRY,re.CLICK,te.UPDATE_LOGIN,ne.TITLE.UPDATE_LOGIN_NOTIFICATION,ne.PATH.HTML,[{key:"cd7",value:r}]),w.default.track(N.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.SAVE_NOTIFICATION_CLICKED,{category:R.InfieldElementCategory.Login,type:R.SaveNotificationClickedType.Update,action:R.SaveNotificationClickedAction.Update,touchPoint:D.TouchPoint.INFIELD_NOTIFICATION})}_handleNewLoginNoThanks(e){var t;const r=null!==(t=this._constructSiteLoginStatusDimension(e))&&void 0!==t?t:"";A.default.sendEventTelemetry(ee.UI_TELEMETRY,re.CLICK,te.SAVE_NEW_LOGIN_NO_THANKS,ne.TITLE.SAVE_LOGIN_NOTIFICATION,ne.PATH.HTML,[{key:"cd7",value:r}])}getAbsoluteDomain(e,t=!0){try{const r=i.default.utils.getCompanyDomain(e,t);return i.default.utils.isntNil(r)?r[0].toUpperCase()+r.slice(1):null}catch(e){return null}}_handleSaveNewLoginFlow(e,t){if(t===p.default.SETTINGS.LOGIN_SAVING_TYPE.ALWAYS)this.setUsername(e.username),this._saveNewLogin(e);else if(t===p.default.SETTINGS.LOGIN_SAVING_TYPE.ASK){var r;const t=this.getAbsoluteDomain(e.loginURL),{username:n}=e,o=G.formatMessage({id:"wax.save.your.new.login",defaultMessage:"Save your new login?"},{url:t,username:n}),s=new i.default.QuestionNotification(o,e,G.formatMessage({id:"notification.fill.save",defaultMessage:"Save"}),this._saveNewLogin,y.default.getUnsureIcon(),void 0,void 0,H.TYPE.QUESTION,void 0,void 0,{subType:W.QUESTION_WAX_SAVE});if(!L.default.canShowNotification(i.default.utils.baseURL(e.loginURL)))return;i.default.notificationCenter.addNotification(s);const a=null!==(r=this._constructSiteLoginStatusDimension(e))&&void 0!==r?r:"";A.default.sendEventTelemetry(ee.UI_TELEMETRY,re.SHOW,te.SAVE_LOGIN_NOTIFICATION,ne.TITLE.SAVE_LOGIN_NOTIFICATION,ne.PATH.HTML,[{key:"cd7",value:a}]),this.sendNotificationShownTelemetry(N.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.SAVE_NOTIFICATION_SHOWN,null==e?void 0:e.loginURL,{type:R.LoginNotificationType.Save}),this.setNotificationIDNewLoginInfoMap(s.getID(),x(x({},e),{},{siteLoginStatusDimension:a}))}}_removeSiteLoginStatus(e){const t=x({},e);return delete t.siteLoginStatus,t.siteLoginStatusDimension&&delete t.siteLoginStatusDimension,t}_constructSiteLoginStatusDimension(e){let t=null;return i.default.utils.isNil(e)?null:(i.default.utils.isNil(e.siteLoginStatus)&&(t="login_detection_error"),t=e.siteLoginStatus===z.status.SUCCESS?"wax_valid_login":"wax_invalid_login",`${t}_${i.default.utils.urlWithoutQueryParameters(e.loginURL,!1)}`)}_handleReplaceLoginNoThanks(e){var t;const r=null!==(t=this._constructSiteLoginStatusDimension(e))&&void 0!==t?t:"";A.default.sendEventTelemetry(ee.UI_TELEMETRY,re.CLICK,te.UPDATE_LOGIN_NO_THANKS,ne.TITLE.UPDATE_LOGIN_NOTIFICATION,ne.PATH.HTML,[{key:"cd7",value:r}])}_handleReplacePasswordFlow(e,t){var r;const n=this.getAbsoluteDomain(e.getLoginURL()),o=e.getUsername(),{password:s}=t,a=e.getPath(),u=G.formatMessage({id:"wax.replace.notification",defaultMessage:"Update saved login with new password?"},{url:n,username:o}),l=y.default.getUnsureIcon(),c=new i.default.QuestionNotification(u,{id:a,password:s},G.formatMessage({id:"notification.fill.replace",defaultMessage:"Update password"}),(()=>{this._replacePassword(a,s),this._sendReplacePasswordTelemetry(t)}),l,void 0,void 0,H.TYPE.QUESTION,void 0,void 0,{subType:W.QUESTION_WAX_REPLACE});c.addCloseButtonAction((()=>{w.default.track(N.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.SAVE_NOTIFICATION_CLICKED,{category:R.InfieldElementCategory.Login,type:R.SaveNotificationClickedType.Update,action:R.SaveNotificationClickedAction.Close,touchPoint:D.TouchPoint.INFIELD_NOTIFICATION})})),i.default.notificationCenter.addNotification(c);const d=null!==(r=this._constructSiteLoginStatusDimension(t))&&void 0!==r?r:"";A.default.sendEventTelemetry(ee.UI_TELEMETRY,re.SHOW,te.REPLACE_NOTIFICATION,ne.TITLE.UPDATE_LOGIN_NOTIFICATION,ne.PATH.HTML,[{key:"cd7",value:d}]),this.sendNotificationShownTelemetry(N.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.SAVE_NOTIFICATION_SHOWN,e.getLoginURL(),{type:R.LoginNotificationType.Update}),t=x(x({},t),{},{siteLoginStatusDimension:d}),this.setNotificationIDPasswordUpdateInfoMap(c.getID(),{loginId:a,loginInfo:t})}_processChangePasswordFormSubmission(e){const t=e.vaultItemID;if(i.default.utils.isNil(t))return;const r=K.getItemManager("LoginManager").getItem(t);i.default.utils.isNil(r)?V.error("login manager search returned null or undefined collection"):this._handleReplacePasswordFlow(r,e)}handleLoginCaptureNotification(e,t){const r=this.getNotificationIDNewLoginInfoMap()[e];switch(t){case H.MESSAGES.DEFAULT_BUTTON_PRESSED:this._saveNewLogin(r);break;case H.MESSAGES.SECONDARY_LINK_PRESSED:this._handleNewLoginNoThanks(r);break;case H.MESSAGES.NOTIFICATION_CLOSED:V.log("Login Capture Notification is closed");break;default:V.error("Unexpected Event from Login Capture notification")}this.removeNewLoginInfoNotificationIDFromMap(e)}handlePasswordUpdateNotification(e,t){const r=this.getNotificationIDPasswordUpdateInfoMap(),{loginId:n,loginInfo:o}=r[e];switch(t){case H.MESSAGES.DEFAULT_BUTTON_PRESSED:this._replacePassword(n,o.password),this._sendReplacePasswordTelemetry(o);break;case H.MESSAGES.SECONDARY_LINK_PRESSED:this._handleReplaceLoginNoThanks(o);break;case H.MESSAGES.NOTIFICATION_CLOSED:V.log("Replace LoginInfo Notification is closed");break;default:V.error("Unexpected Event from Replace Login password notification")}this.removePasswordUpdateInfoNotificationIDFromMap(e)}handleCompromisedPasswordNotification(e,t){const r=this.getNotificationIDCompromisedLoginMap()[e];switch(t){case H.MESSAGES.DEFAULT_BUTTON_PRESSED:this._compromisedPasswordFlowNotificationCallback();break;case H.MESSAGES.NOTIFICATION_CLOSED:this._compromisedPasswordNotificationCloseButtonAction(r);break;default:V.error("Unexpected Event from Compromised Password notification")}this.removeCompromisedLoginNotificationIDFromMap(e)}_getLoginsForUrl(e){return new Promise(((t,r)=>{K.getItemManager("LoginManager").searchKey(e,((e,n)=>i.default.utils.isntNil(n)?r(n):i.default.utils.isArray(e)?void t(e):r(new Error("login manager search returned null or undefined collection"))))}))}async findLoginItemInVault(e){try{const t=await this._getLoginsForUrl(e.loginURL);for(const r in t){const n=t[r],o=n.getLoginURL(),s=n.getUsername(),a=n.getPath(),u=this.getAutoFilledItems()[this.getTabID()];if((i.default.utils.isNil(u)||a===u)&&s===e.username&&i.default.utils.getDomain(o)===i.default.utils.getDomain(e.loginURL))return n}return null}catch(e){V.error(e)}}async _handleLogin(e){const t=await this.findLoginItemInVault(e);if(i.default.utils.isNil(t))return void this._handleSaveNewLoginFlow(e,d.default.getLoginsSaving());const r=t.getLoginURL();t.getPassword()!==e.password?L.default.canShowNotification(i.default.utils.baseURL(e.loginURL))&&(i.default.utils.baseURL(r)!==i.default.utils.baseURL(e.loginURL)?this._handleSaveNewLoginFlow(e,d.default.getLoginsSaving()):this._handleReplacePasswordFlow(t,e)):V.debug(`[fillCaptureHandler._handleLogin] not saving due to match: ${r}`)}handleLoginCaptureAfterCreateORUnlockFlow(){const e=this.getLoginInfo(J.SSO_LOGIN_INFO);i.default.utils.isNil(e)||this.findLoginItemInVault(e).then((t=>{i.default.utils.isNil(t)?this._saveNewLogin(e):t.getPassword()!==e.password&&this._replacePassword(t.path,e.password)}))}resetCompromisedPasswordFlowState(){this.setTabID(null),E.default.clearLoginInfoItems(),h.default.setCompromisedNotificationVisible(!1),h.default.setCompromisedPasswordFlowInProgress(!1),h.default.setRibbonState({isInProgress:!1,isLoggedIn:null,domain:null}),h.default.setCreatedTab(null),h.default.setCreatedTabURL(null),h.default.setClosedTab(null)}_handleStandardFormSubmissionFlow(e){const t=Y.isLocked();(0,I.isURLInSupportedSSOList)(e.loginURL)&&l.default.getIsSignInSession()&&this.setLoginInfo(J.SSO_LOGIN_INFO,e),t||this._handleLogin(e).catch((e=>V.error(e)))}_prepareLoginInfo(e){const t=this.getAutoFilledItems()[this.getTabID()];i.default.utils.isntNil(t)?e.path=t:i.default.utils.isNil(e.path)&&(e.path=`{${i.default.utils.createNewGuid()}}`),i.default.utils.isNil(e.lastUpdate)&&(e.lastUpdate=(new Date).getTime()/1e3)}_startPasswordAutochange(e){h.default.isCompromisedPasswordFlowInProgress()&&m.default.startManagedAutoChange(e,Z.NO_LOGOUT,X)}_onAutochangeStartedListenerCallback(){this.setIsPasswordAutochangeInProgress(!0)}_registerOnAutochangeStartedListener(){window.addEventListener(c.default.ruleProfileEvent[c.default.ruleProfile.AUTO_CHANGE].STARTED,this._onAutochangeStartedListenerCallback)}_registerOnAutochangeFinishedListener(){window.addEventListener(c.default.ruleProfileEvent[c.default.ruleProfile.AUTO_CHANGE].FINISHED,this._onAutochangeFinishedListenerCallback)}_registerOnSignInToNortonListener(){window.addEventListener(c.default.NORTON_SIGN_IN_SESSION,this._onSignInToNortonListenerCallback)}_compromisedPasswordNotificationCloseButtonAction(e){var t;e instanceof U.default&&(e=null===(t=e)||void 0===t?void 0:t.get());this._handleStandardFormSubmissionFlow(e),this.resetCompromisedPasswordFlowState(),A.default.sendNotificationDismissedCp(),Y.isLocked()?f.default.setBrowserActionIcon(!1):f.default.setBrowserActionIcon(!0)}async _createCompromisedPasswordNotification(){A.default.sendCompromisedPasswordNotificationShown(Y.isLocked()?$:q),h.default.setCompromisedNotificationVisible(!0);const e=E.default.getExistingLoginInfo();if(null==e)return;const t=e.getLoginURL();if(null==t)return;const r=c.default.NOTIFICATION_ICON_TYPES.WARNING_ICON,n=G.formatMessage({id:"compromised.password.password.is.compromised"}),o=G.formatMessage({id:"compromised.password.update.your.password.now"}),s=G.formatMessage({id:"compromisedPassword.notification.cta"});f.default.setBrowserActionAlertIcon();const a=new i.default.WarningQuestionNotification(n,e.get(),s,this._compromisedPasswordFlowNotificationCallback,r,o);a.addExpandableLinkText(G.formatMessage({id:"compromised.password.show.more"}),G.formatMessage({id:"compromisedPassword.notification.expandableLinkOpened"}),(()=>{A.default.sendLearnMoreClickMOTFlow(),w.default.track(N.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.MOT_WARNING_CLICKED,{category:R.InfieldElementCategory.Login,action:R.WarningNotificationAction.LearnMore,touchPoint:D.TouchPoint.INFIELD_NOTIFICATION})})),a.addLearnMoreDescriptionFirstParagraph(G.formatMessage({id:"compromised.password.show.more.firstParagraph.line1"})),a.addCloseButtonAction(this._compromisedPasswordNotificationCloseButtonAction),i.default.notificationCenter.addNotification(a),A.default.sendEventTelemetry(ee.UI_TELEMETRY,re.SHOW,te.CP_NOTIFICATION,ne.TITLE.CP_NOTIFICATION,ne.PATH.HTML,[{key:"cd7",value:e.getLoginURL()}]),this.sendNotificationShownTelemetry(N.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.MOT_WARNING_SHOWN,t,{reason:R.WarningNotificationReason.CompromisedPassword}),this.setNotificationIDCompromisedLoginMap(a.getID(),e)}async processLoginFormSubmission(e,t,r=null){if(V.debug("[fillCaptureHandler.processLoginFormSubmission] start"),i.default.utils.isNil(e))throw new Error("Invalid loginInfo");if(i.default.utils.isNil(t))throw new Error("Invalid tabId");if(i.default.utils.isntNil(r)&&r.hasOwnProperty("status")&&(e.siteLoginStatus=r.status),this.getIsSignedInToNortonSession()&&h.default.isCompromisedPasswordFlowInProgress())V.debug("[fillCaptureHandler.processLoginFormSubmission] signed in to norton session and compromised password flow in progress, return");else if(this.getTabID()===t&&h.default.isCompromisedPasswordFlowInProgress())V.debug("[fillCaptureHandler.processLoginFormSubmission] same tab id and compromised password flow in progress, return");else{if(this.getIsPasswordAutochangeInProgress())return V.debug("[fillCaptureHandler.processLoginFormSubmission] password autochange in progress, handle form submission"),void this._handleStandardFormSubmissionFlow(e);if(e.formType===u.default.constants.groupType.CHANGE_PASSWORD_PAGE)return V.debug("[fillCaptureHandler.processLoginFormSubmission] change password form, handle change form submission"),void this._processChangePasswordFormSubmission(e,t);if(this.setTabID(t),!h.default.isCompromisedPasswordFlowEnabled())return V.debug("[fillCaptureHandler.processLoginFormSubmission] compromised password flow disabled, handle form submission"),void this._handleStandardFormSubmissionFlow(e);if(h.default.isCompromisedNotificationVisible()||h.default.isCompromisedPasswordFlowInProgress())return V.debug("[fillCaptureHandler.processLoginFormSubmission] compromised password flow in progress, handle form submission"),void this._handleStandardFormSubmissionFlow(e);this._prepareLoginInfo(e);try{const{error:t,data:n}=await h.default.checkCompromisedPassword(e);if(t)return V.error(t),void this._handleStandardFormSubmissionFlow(e);if(!n.isLeaked)return V.debug("[fillCaptureHandler.processLoginFormSubmission] password is not leaked, handle form submission"),void this._handleStandardFormSubmissionFlow(e);if(V.debug("[fillCaptureHandler.processLoginFormSubmission] password is leaked"),!this._isAutochangeSupported(e.loginURL))return V.debug("[fillCaptureHandler.processLoginFormSubmission] autochanged is not supported for website, handle form submission"),void this._handleStandardFormSubmissionFlow(e);if(i.default.utils.isExtnRunningInNSB()&&M.default.getIsOnboarding())return V.debug("[fillCaptureHandler.processLoginFormSubmission] OnBoarding is not complete in Norton Secure Browser, handle form submission"),void this._handleStandardFormSubmissionFlow(e);if(A.default.sendCompromisedPasswordDetected(),!i.default.utils.isNil(E.default.getExistingLoginInfo()))return V.debug("[fillCaptureHandler.processLoginFormSubmission] mot flow login info already set, handle form submission"),void this._handleStandardFormSubmissionFlow(e);if(O.default.canShowNotification(i.default.utils.baseURL(e.loginURL))&&E.default.setExistingLoginInfo(e),!i.default.utils.isntNil(r)||r.status!==z.status.SUCCESS||!0===r.interactionFormFound)return V.debug("[fillCaptureHandler.processLoginFormSubmission] form submission not succeeded, reset compromised password flow state and handle form submission"),this.resetCompromisedPasswordFlowState(),void this._handleStandardFormSubmissionFlow(e);if(V.debug("[fillCaptureHandler.processLoginFormSubmission] form submission succeeded, start compromised password flow"),!O.default.canShowNotification(i.default.utils.baseURL(e.loginURL)))return this.resetCompromisedPasswordFlowState(),void this._handleStandardFormSubmissionFlow(e);await this._createCompromisedPasswordNotification()}catch(t){V.error(t),V.debug("[fillCaptureHandler.processLoginFormSubmission] error in flow, handle form submission"),this._handleStandardFormSubmissionFlow(e)}}}_initListeners(){h.default.isCompromisedPasswordFlowEnabled()&&(this._registerOnAutochangeStartedListener(),this._registerOnAutochangeFinishedListener())}initialize(e){this.store=e;const t=P.default;this._initListeners(),i.default.utils.isntNil(t)&&u.default.init.initializeWaxFormSubmission(t)}getLastFourOnCard(e){if(i.default.utils.isNil(e))return"";const{length:t}=e;return t>4?e.substring(t-4,t):e}getCardItems(e,t){var r;if(!i.default.utils.isString(e))throw new Error("getCardItems: url must be a string");if(Y.isLocked())return void V.error("vault is locked");if(t&&i.default.utils.urlProtocol(e)!==c.default.HTTPS_PROTOCOL)return;const n=null===(r=this.store)||void 0===r?void 0:r.getState().creditCards.entities;return Object.values(n).map((e=>x({},e)))}};r.default=oe},{"../../core/background/globalSettings":36,"./../../../redux-core/features/logins/loginsSlice":736,"./formSubmissionHandler":120,"./waxStorageSettings":129,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"@browser-services/wax/dist/release/Firefox/prod/SymWax.js":216,"common/constants":13,"common/constants/uiConstants":9,"common/global.types":16,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/cctWorker":26,"core/background/commonUtilsBG":27,"core/background/extension/extensionSettings":33,"core/background/naAccountHandler":40,"core/background/notificationIcon":42,"core/background/pwmSessionSettings":43,"core/background/telemetry/telemetryWrapper":55,"core/background/uiService":56,"feature/compromised-password/LoginInfo":61,"feature/compromised-password/compromisedNotificationSettings":62,"feature/compromised-password/compromisedPasswordHelper":64,"feature/compromised-password/loginInfoManager":65,"feature/compromised-password/motFlowManager":66,"feature/password-changer/passwordChanger":97,"feature/security-dashboard/securityDashboardUtils":114,locale:131,"telemetry/background":170,"telemetry/background/helper/TelemetryHelper":169,"telemetry/constants":173,"telemetry/types":186}],120:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("@browser-services/wax/dist/release/Firefox/prod/SymWax.js")),s=n(e("common/constants")),a=n(e("core/background/telemetry/telemetryWrapper")),u=n(e("./fillCaptureHandler")),l=n(e("./waxActions"));const{logger:c,utils:d,extensionAdapter:f}=o.default,{isNil:p,isString:h,isObject:_,urlWithoutQueryParameters:E}=d,{waxFormSubmissionConstants:g}=i.default,m=o.default.telemetryConstants.parameters.CUSTOM_DIMENSION7,y="valid",S="invalid",T="reload",A="initial",b="interactive";class O extends i.default.IFormSubmissionClient{constructor(){super(),this.onLoginFormSubmission=this.onLoginFormSubmission.bind(this),this.getConfig=this.getConfig.bind(this)}onLoginFormSubmission(e,t){if(!_(e))return;c.debug(`login submission payload received:${JSON.stringify(e.result)}${JSON.stringify(e.submissionInfo)}`);const{result:r}=e,n=e.data;if(p(t)||p(n)||p(n.loginInfo)||p(n.submissionInfo)||!h(n.submissionInfo.senderURL)||!_(r))return;let i;const s=n.submissionInfo.skipDomainValidation;if(i=!s&&l.default.isDocumentURLSpecificToSite(n.submissionInfo.senderURL,t.url)?t.url:n.submissionInfo.senderURL,p(i))return;const d=E(i),O=u.default.getAbsoluteDomain(i),I=o.default.utils.baseURL(i),v=n.submissionInfo.pageStatus===g.pageStatus.LOADING_COMPLETED,N=n.timerExpired;r.interactionFormFound=n.submissionInfo.interactionFormFound;let R=`${r.status===g.status.SUCCESS?y:S}_${v?T:A}_${N}`;!0===r.interactionFormFound&&(R=`${R}_${b}`),a.default.sendWaxFormSubmit(I,a.default.WAX_FORMSUBMIT_VALUE.MANUAL,s,{key:m,value:R});const C=f.getTabID(t);n.loginInfo.loginURL=d,n.loginInfo.siteName=O,l.default.isUrlInList(l.default.getCaptureExclusionList(),I)||u.default.processLoginFormSubmission(n.loginInfo,C,r).catch((e=>c.error(e)))}getConfig(){return{TIMEOUT:s.default.FORM_SUBMISSION_CLIENT.TIMEOUT_IN_SECONDS}}}const I=new O;r.default=I},{"./fillCaptureHandler":119,"./waxActions":123,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/wax/dist/release/Firefox/prod/SymWax.js":216,"common/constants":13,"core/background/telemetry/telemetryWrapper":55}],121:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));r.default=class{constructor(){(0,o.default)(this,"lastUpdated",0),(0,o.default)(this,"loginInfo",[])}setLastUpdated(e){this.lastUpdated=e}getLastUpdated(){return this.lastUpdated}setLoginInfo(e){this.loginInfo.push(e)}getLoginInfo(){return this.loginInfo}}},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208}],122:[function(e,t,r){t.exports={allowedSubframeUrls:{"www.icloud.com":["https://idmsa.apple.com/appleauth/auth/authorize/signin"],"www.nationalgeographic.com":["https://cdn.registerdisney.go.com/v4/bundle/web/DTCI-NATGEO.CONSUMER.WEB/en-US"]}}},{}],123:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=M(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),u=n(e("common/constants")),l=n(e("core/background/signin")),c=n(e("core/background/globalSettings")),d=n(e("core/background/extension/extensionSettings")),f=n(e("feature/unlockManager/vaultUnlockManager")),p=n(e("feature/privacyPrompt/privacyPromptSettings")),h=n(e("feature/password-changer/passwordChanger")),_=e("./../../../vault/vaultConstants"),E=e("./../../../redux-core/features/logins/loginsSlice"),g=e("./../../../redux-core/features/creditCards/creditCardsSlice"),m=e("common/passwordGenerator"),y=n(e("./../../../base-components/helpers/passwordMeasure")),S=n(e("core/background/telemetry/telemetryWrapper")),T=e("./../../../redux-core/features/userInfo/userInfoSlice"),A=n(e("core/background/pwmSessionSettings")),b=n(e("feature/compromised-password/compromisedNotificationSettings")),O=n(e("feature/compromised-password/compromisedPasswordHelper")),I=n(e("./fillCaptureHandler")),v=e("../../message-adapter/background"),N=n(e("./waxPopupSettings")),R=n(e("./waxConstants")),C=n(e("./waxStorageSettings")),D=n(e("./urlMappingRules.json")),w=e("common/global.types"),L=n(e("core/background/store/telemetryInfoStore")),P=e("./waxMLTelemetry");function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(M=function(e){return e?r:t})(e)}const{logger:U,extensionAdapter:j,utils:{isString:k,isntNil:x,isNil:F,urlWithoutQueryParameters:B}}=i.default,{BROWSER:G}=i.default.globals,{BROWSER_TYPE:V}=i.default.constants,{WAX_ACTIONS:H}=u.default.SESSION_STORAGE_KEYS;const W=new class{constructor(){(0,o.default)(this,"signInPopupURLExclusionList",[s.default.authSCD.SSO_OPENID_CONNECT_LOGIN_URL]),(0,o.default)(this,"getVaultItemById",((e,t,r,n)=>{if(F(e))throw new Error("managerItem cannot be null");if(F(t))throw new Error("ItemID cannot be null");if(F(r))throw new Error("sender (TAB)object cannot be null");if(F(n))throw new Error("callback function cannot be null");let o="";var i;if(e===_.ItemType.Login)o=(0,E.selectLoginById)(null===(i=this.store)||void 0===i?void 0:i.getState(),t);else if(e===_.ItemType.CreditCard){var s;o=(0,g.selectCreditCardById)(null===(s=this.store)||void 0===s?void 0:s.getState(),t)}n(o)})),(0,o.default)(this,"handlePagePopupMessage",((e,t,r,n,o)=>{var i=e.payload;switch(e.id){case v.MESSAGES.POPUP_MESSAGES.ITEM_SELECTED_INPAGE_POPUP_ON_TOP_FRAME:return void j.sendMessageToTab(r,{id:v.MESSAGES.POPUP_MESSAGES.ITEM_SELECTED_INPAGE_POPUP_ON_TOP_FRAME_BG,payload:i});case v.MESSAGES.POPUP_MESSAGES.POPUP_LOGIN_USERNAME_CLICKED_INPAGE_POPUP_ON_TOP_FRAME:return void j.sendMessageToTab(r,{id:v.MESSAGES.POPUP_MESSAGES.POPUP_LOGIN_USERNAME_CLICKED_INPAGE_POPUP_ON_TOP_FRAME_BG,payload:i},(()=>{}));case v.MESSAGES.POPUP_MESSAGES.GENERATE_PWD_CLICKED_INPAGE_POPUP_ON_TOP_FRAME:return void j.sendMessageToTab(r,{id:v.MESSAGES.POPUP_MESSAGES.GENERATE_PWD_CLICKED_INPAGE_POPUP_ON_TOP_FRAME_BG,payload:i});case v.MESSAGES.POPUP_MESSAGES.SHOW_INPAGE_POPUP_ON_TOP_FRAME:return void j.sendMessageToParentFrame(r,{id:v.MESSAGES.POPUP_MESSAGES.SHOW_INPAGE_POPUP_ON_TOP_FRAME_BG,payload:i},null,r.frameId);case v.MESSAGES.POPUP_MESSAGES.POPUP_OPEN_LOGIN_FLOW:return f.default.setAutomaticPasswordlessVaultUnlockRequest(!1),L.default.setTelemetryInfo({appName:w.AppName.ONBOARD_SETUP,contextScreen:i.contextScreen,contextAction:i.contextAction,canSendAppOpenEvent:!0}),void l.default.openLoginFlow({useNudgePageForLogin:!0});case v.MESSAGES.WAX_MESSAGES.DONT_ASK_SIGN_IN_AGAIN:return c.default.setValue(u.default.DONT_ASK_SIGN_IN_AGAIN,!0),void this.closeInPagePopup(r);default:return}}))}getCaptureExclusionList(){var e;return null!==(e=A.default.get(H.CAPTURE_EXCLUSION_LIST))&&void 0!==e?e:[]}setCaptureExclusionList(e){A.default.set(H.CAPTURE_EXCLUSION_LIST,e)}getPasswordVerifiedFillCallback(){var e;return null!==(e=A.default.get(H.PASSWORD_VERIFIED_FILL_CALLBACK))&&void 0!==e?e:null}setPasswordVerifiedFillCallback(e){A.default.set(H.PASSWORD_VERIFIED_FILL_CALLBACK,e)}getTab(){var e;return null!==(e=A.default.get(H.TAB))&&void 0!==e?e:null}setTab(e){A.default.set(H.TAB,e)}isDocumentURLSpecificToSite(e,t){if(F(t)||F(e))return!1;const r=i.default.utils.getDomain(e).toLowerCase();if(i.default.utils.getDomain(t).toLowerCase()===r)return!0;const n=D.default.allowedSubframeUrls[i.default.utils.baseURL(t)],o=i.default.utils.urlWithoutQueryParameters(e);return n&&n.includes(o)}closeInPagePopup(e){j.sendMessageToTab(e,{id:v.MESSAGES.POPUP_MESSAGES.POPUP_CLOSE,payload:{clicked:!1}})}async canShowWaxPopup(e,t,r){if(!k(e))throw new Error("The URL should a string");if(F(t))throw new Error("The tabId cannot be Nil");if(!i.default.utils.isFunction(r))throw new Error("sendResponse should be a function");let n=!1;if(l.default.isSignInTab(t)&&this.isUrlExcludedForSignInPopup(e))n=!1;else{n=!!await l.default.isNASignedIn()||N.default.canShowPopup(R.default.POPUP_TYPE.SIGN_IN),x(c.default.getValue(u.default.DONT_ASK_SIGN_IN_AGAIN))&&c.default.clearValue(u.default.DONT_ASK_SIGN_IN_AGAIN)}r({canShow:n})}getLoginsByMatchingDomain(e,t){const r=i.default.utils.baseURL(e),n=[];let o=!1;return t.forEach((e=>{i.default.utils.baseURL(e.loginURL)===r?n.push(e):o||(A.default.set(H.SUBDOMAIN_FOUND,!0),o=!0)})),n}getLoginItemsByFrequentlyUsedOrder(e,t){return e.sort(((e,r)=>{let n=-1,o=-1,i=0,s=0;for(let r=0;r<t.length;r++)if(t[r][e.id]){n=r,i=t[r][e.id];break}for(let e=0;e<t.length;e++)if(t[e][r.id]){o=e,s=t[e][r.id];break}const a=n>-1?n:1/0,u=o>-1?o:1/0;return i!=s&&a!=u?a-u:e.username.toLowerCase()<r.username.toLowerCase()?-1:1}))}isUrlExcludedForSignInPopup(e){for(const t in this.signInPopupURLExclusionList)if(i.default.utils.baseURL(e)===i.default.utils.baseURL(this.signInPopupURLExclusionList[t]))return!0;return!1}isUrlInList(e,t){if(i.default.utils.isNil(t))return!1;for(const r in e){const n=e[r],o=n.length;if(t===n||t.substring(t.length-o-1)===`.${n}`)return!0}return!1}initMessengerSubscription(){v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.IS_URL_EXCLUDED_FROM_ADDING_MUTATION_OBSERVER,((e,t,r)=>{t&&t(this.isUrlInList(H.MUTATION_OBSERVER_EXCLUSION_LIST,i.default.utils.baseURL(null==r?void 0:r.url)))})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.VAULT_ISLOGGEDIN,((e,t)=>{t&&t(a.vaultKeys.isLocked())})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.SET_SHOW_SAVE_UPDATE_LOGINS_NOTIFICATION,(({subdomainURL:e,remindMeLaterDays:t,show:r})=>{C.default.setNotificationInfo({url:e,remindMeLaterDays:t,show:r})})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.GET_SHOW_SAVE_UPDATE_LOGINS_NOTIFICATION,(({url:e},t)=>{t&&t(C.default.canShowNotification(e))})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.UPDATED_USERNAME,(({username:e},t)=>{I.default.setUsername(e)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.NOTIFICATION_LOGIN_INFO_MAP,((e,t)=>{t&&t(I.default.getNotificationIDNewLoginInfoMap())})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.NOTIFICATION_REPLACE_LOGIN_INFO_MAP,((e,t)=>{t&&t(I.default.getNotificationIDPasswordUpdateInfoMap())})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.NOTIFICATION_CP_LOGIN_INFO_MAP,((e,t)=>{t&&t(I.default.getNotificationIDCompromisedLoginMap())})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.CAN_SHOW_SIGNIN_POPUP,(async(e,t,r)=>{const n=j.getTabID(r.tab);await this.canShowWaxPopup(null==r?void 0:r.url,n,t)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.GET_SANDBOX_INFORMATION,((e,t,r)=>{i.default.extensionAdapter.sendMessageToParentFrame(null==r?void 0:r.tab,{id:v.MESSAGES.WAX_MESSAGES.GET_SANDBOX_INFORMATION_CS,payload:e},null,null==r?void 0:r.frameId),t&&t(!0)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.CHANGE_PASSWORD_SUBMISSION,((e,t,r)=>{var n,o;if(F(e)||F(e.loginInfo)||F(e.senderURL))return;const{isIsolationURL:s}=e,a=this.isDocumentURLSpecificToSite(e.senderURL,null==r||null===(n=r.tab)||void 0===n?void 0:n.url)?null==r||null===(o=r.tab)||void 0===o?void 0:o.url:null;if(F(a))return;const u=B(a),l=i.default.utils.baseURL(a);if(e.loginInfo.loginURL=u,e.loginInfo.siteName=l,this.isUrlInList(this.getCaptureExclusionList(),l))U.debug(`IDSafeWAX: skipping URL: ${e.loginInfo.url}`);else{S.default.sendWaxFormSubmit(l,S.default.WAX_FORMSUBMIT_VALUE.MANUAL,s);const t=j.getTabID(r);I.default.processLoginFormSubmission(e.loginInfo,t).catch((e=>U.error(e)))}t&&t(!0)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.GENERATE_PASSWORD,((e,t)=>{const r=(0,m.createPassword)(e.length,e.includeLetters,e.includeMixedCase,e.includeSymbols,e.includeNumbers),n=y.default.getPasswordStrengthInfo(r);t&&t({password:r,strength:null==n?void 0:n.strength})})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.CAN_SHOW_RELEVANT_LOGINS_LINK,((e,t)=>{var r;null==t||t(null!==(r=A.default.get(H.SUBDOMAIN_FOUND))&&void 0!==r&&r)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.VAULT_GET_LOGINS_BY_URL,((e,t,r)=>{var n,o;const s=j.getTabID(r),{ignoreHttp:a}=e,u=this.isDocumentURLSpecificToSite(e.srcAttribute,null==r||null===(n=r.tab)||void 0===n?void 0:n.url)?null==r||null===(o=r.tab)||void 0===o?void 0:o.url:null;if(F(u))return U.info("Url is null"),void(null==t||t(null));A.default.set(H.SUBDOMAIN_FOUND,!1),A.default.set(H.SENDER_URL,u),I.default.getLoginsByUrl(u,s,((e,r)=>{x(r)&&U.error(r);const n=this.getLoginsByMatchingDomain(u,e);C.default.setSenderURL(i.default.utils.baseURL(u));let o=[];if(0===n.length){let r=[];const n=e;let o=n;if(0===n.length)return void(null==t||t(o));if(r=C.default.getLoginsBySubdomain(u),!(x(r)&&r.length>0))return null==t||t(n.sort(((e,t)=>e.username.localeCompare(t.username)))),void A.default.set(H.SUBDOMAIN_FOUND,!1);o=this.getLoginItemsByFrequentlyUsedOrder(n,r);const i=o.splice(0,r.length);return o.sort(((e,t)=>e.username.localeCompare(t.username))),A.default.set(H.SUBDOMAIN_FOUND,!1),void(null==t||t(i.concat(o)))}n.length>0&&(o=C.default.getFrequentlyUsedLoginId(C.default.getSenderURL()));let s=n;if(x(o)&&o.length>0){s=this.getLoginItemsByFrequentlyUsedOrder(n,o);const e=s.splice(0,o.length);return s.sort(((e,t)=>e.username.localeCompare(t.username))),void(null==t||t(e.concat(s)))}s.sort(((e,t)=>e.username.localeCompare(t.username))),null==t||t(s)}),a)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.VAULT_GET_LOGINS_BY_SUBDOMAIN,((e,t,r)=>{const n=j.getTabID(r),{ignoreHttp:o}=e,s=e.srcAttribute;if(F(s))return U.info("Url is null"),void(null==t||t(null));I.default.getLoginsByUrl(s,n,((e,r)=>{x(r)&&U.error(r);let n=[];const o=e;let a=o;if(C.default.setSenderURL(i.default.utils.baseURL(s)),0===o.length)return null==t||t(a),void A.default.set(H.SENDER_URL,void 0);let u=0,l=-1;for(let e=0;e<a.length;e++)if(i.default.utils.baseURL(a[e].loginURL)===i.default.utils.baseURL(s))u++,-1===l&&(l=e);else if(-1!==l)break;let c=a.slice(l,l+u);const d=C.default.getFrequentlyUsedLoginId(C.default.getSenderURL());if(x(d)&&d.length>0){c=this.getLoginItemsByFrequentlyUsedOrder(c,d);const e=c.splice(0,d.length);c.sort(((e,t)=>e.username.localeCompare(t.username))),c=e.concat(c)}else c.sort(((e,t)=>e.username.localeCompare(t.username)));if(a.splice(l,u),n=C.default.getLoginsBySubdomain(s),x(n)&&n.length>0){a=this.getLoginItemsByFrequentlyUsedOrder(a,n);const e=a.splice(0,n.length);a.sort(((e,t)=>e.username.localeCompare(t.username))),a=e.concat(a)}else a.sort(((e,t)=>e.username.localeCompare(t.username)));null==t||t(c.concat(a)),A.default.set(H.SENDER_URL,void 0)}),o)})),v.messenger.subscribe(v.MESSAGES.DASHBOARD_MESSAGES.GET_IDS_SETTING,((e,t)=>{const r=d.default.getSettings();null==t||t(r[e])})),v.messenger.subscribe(v.MESSAGES.DASHBOARD_MESSAGES.GET_ALL_IDS_SETTINGS,((e,t)=>{t(d.default.getSettings())})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.VAULT_GET_CARD_ITEMS,((e,t,r)=>{const{ignoreHttp:n}=e,o=I.default.getCardItems(null==r?void 0:r.url,n);F(o)||null==o||o.length,t(o)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.IS_URL_EXCLUDED_FROM_CAPTURE,((e,t,r)=>{t(this.isUrlInList(this.getCaptureExclusionList(),i.default.utils.baseURL(null==r?void 0:r.url)))})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.VAULT_GET_LOGIN_BY_ID,((e,t,r)=>{this.getVaultItemById(_.ItemType.Login,e.id,r,(e=>{null==t||t(e)}))})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.VAULT_GET_CARD_BY_ID,((e,t,r)=>{this.getVaultItemById(_.ItemType.CreditCard,e.id,r,(e=>{null==t||t(e)}))})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.SHOULD_START_WAX,((e,t,r)=>{let n=!h.default.isAutoChangeRunning(null==r?void 0:r.tab);if(i.default.globals.BROWSER===(null==V?void 0:V.FIREFOX)){const e=p.default.getPrivacyConsent();n=n&&Boolean(e)}null==t||t(n)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.SAVE_AS_A_NEW_LOGIN_FLOW,((e,t)=>{I.default._saveNewLogin(e),null==t||t(null)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.PASSWORD_VERIFIED,((e,t,r)=>{var n;const{waxInfo:o}=(0,T.selectUserInfo)(null===(n=this.store)||void 0===n?void 0:n.getState());if(e.passwordVerified&&o.isPasswordRequiredFormFill&&x(this.getTab())){var i;this.getPasswordVerifiedFillCallback()(),j.closeTab(null==r||null===(i=r.tab)||void 0===i?void 0:i.id)}})),v.messenger.subscribe(v.MESSAGES.POPUP_MESSAGES.GET_USERNAME_LIST_ORDERED_BY_FREQUENCY,((e,t)=>{t&&t(a.vaultManager.loginManager.getUsernamesOrderedByFrequency())})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.SET_SHOW_SIGNIN_NOTIFICATION,((e,t,r)=>{N.default.setRemindMeLaterForDays(R.default.POPUP_TYPE.SIGN_IN,e.days,e.show)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.GET_SHOW_SIGNIN_NOTIFICATION,((e,t,r)=>{t&&t(N.default.canShowPopup(R.default.POPUP_TYPE.SIGN_IN))})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.SET_SHOW_CP_NOTIFICATION,((e,t,r)=>{const n=I.default.getNotificationIDCompromisedLoginMap(),{notificationId:o,remindMeLaterDays:s,subdomainURL:a,show:u}=e,l=null!=a?a:i.default.utils.baseURL(n[o].loginURL);b.default.setNotificationInfo({url:l,remindMeLaterDays:s,show:u}),null==t||t(!0)})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.GET_SHOW_CP_NOTIFICATION,(({url:e},t,r)=>{t&&t(b.default.canShowNotification(e))})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.COMPROMISED_NOTIFICATION_VISIBLE,((e,t,r)=>{t(O.default.isCompromisedNotificationVisible())})),v.messenger.subscribe(v.MESSAGES.WAX_MESSAGES.WAX_ML_TELEMETRY,((e,t,r)=>{(0,P.sendWaxMLTelemetry)(e,r),null==t||t({})}))}async init(e){this.store=e;try{return this.isInitialized||(j.addMessageListener(this.handlePagePopupMessage),this.initMessengerSubscription(),this.isInitialized=!0,U.info("WaxActions :: Initialization is done successfully")),this.isInitialized}catch(e){const t=`ERROR :: Initialising vault Info Modules: ${e}`;throw U.error(t),new Error(t)}}};r.default=W},{"../../message-adapter/background":134,"./../../../base-components/helpers/passwordMeasure":2,"./../../../redux-core/features/creditCards/creditCardsSlice":733,"./../../../redux-core/features/logins/loginsSlice":736,"./../../../redux-core/features/userInfo/userInfoSlice":741,"./../../../vault/vaultConstants":758,"./fillCaptureHandler":119,"./urlMappingRules.json":122,"./waxConstants":124,"./waxMLTelemetry":125,"./waxPopupSettings":128,"./waxStorageSettings":129,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"common/global.types":16,"common/passwordGenerator":21,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.array.sort.js":432,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/extension/extensionSettings":33,"core/background/globalSettings":36,"core/background/pwmSessionSettings":43,"core/background/signin":47,"core/background/store/telemetryInfoStore":50,"core/background/telemetry/telemetryWrapper":55,"feature/compromised-password/compromisedNotificationSettings":62,"feature/compromised-password/compromisedPasswordHelper":64,"feature/password-changer/passwordChanger":97,"feature/privacyPrompt/privacyPromptSettings":106,"feature/unlockManager/vaultUnlockManager":117}],124:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("configuration"));const s=new class{constructor(){(0,o.default)(this,"SIGNIN_REMIND_ME_LATER","87677d76-c932-40f8-8273-2bd7616bc3da"),(0,o.default)(this,"UNLOCK_REMIND_ME_LATER","43bd4a47-7bec-4895-b714-39fac9125888"),(0,o.default)(this,"SETTINGS_NOTIFICATION_KEY","e5171466-7400-436a-949d-db678ba3f595"),(0,o.default)(this,"SETTINGS_AUTOFILL_KEY","7698f8b8-c0cb-4acb-a8c2-4a43ceb41bce"),(0,o.default)(this,"POPUP_TYPE",{SIGN_IN:"signin",UNLOCK:"unlock"}),(0,o.default)(this,"NOTIFICATIONS",{SAVE:"save",UPDATE:"update"}),(0,o.default)(this,"THRESHOLD_USER_VERSION","8.0.3.86"),(0,o.default)(this,"USERS",{NEW_USER:"newUser",EXISTING_USER:"existingUser"}),(0,o.default)(this,"SUPPORTED_SSO_BASE_URLS",{NSL:`${i.default.NSL_DOMAIN}.norton.com`,CCT_HOST:`${i.default.CCT_URL}.norton.com`,GOOGLE:"accounts.google.com",APPLE:"appleid.apple.com",BT:"strongauth.secure.bt.com",EE:"auth.ee.co.uk",LENOVO:"passport.lenovo.com",DT:"accounts.login.idm.telekom.com"}),(0,o.default)(this,"SUPPORTED_AUTH_THIRD_PARTIES",["GOOGLE","APPLE"]),(0,o.default)(this,"SUPPORTED_AUTH_PARTNERS",["BT","EE","LENOVO","DT"]),(0,o.default)(this,"AUTH_NSL","NSL")}};Object.freeze(s);r.default=s},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,configuration:3}],125:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.sendWaxMLTelemetry=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.includes.js");var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("node-forge")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=n(e("telemetry/background")),u=e("telemetry/constants/telemetryActions"),l=n(e("./waxMLTelemetryStorageSettings")),c=e("./waxMLTelemetryConstants");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const h=(e,t)=>{let r={url:e};const n=t.filter(((e,t)=>t<c.MAX_FIELDS_PER_PAGE&&!((e,t)=>{const r=c.ML_TO_WAX_TYPE_MAPPING[t];return!!r&&r.includes(e)})(e.waxType,e.mlType))).map((({waxType:e,mlType:t,mlScore:r,id:n,name:o})=>({waxType:e,mlType:t,mlScore:r,id:n,name:o})));return 0===n.length?p(p({},r),{},{matchStatus:"full"}):(r=n.length===t.length?p(p({},r),{},{matchStatus:"none"}):p(p({},r),{},{matchStatus:"partial"}),r.fields=n,r)};r.sendWaxMLTelemetry=(e,t)=>{if(0===e.length)return;const r=null==t?void 0:t.url;if(void 0===r)return;const n=l.default.get(c.PROCESSED_URLS)||[];if(n.length>=c.MAX_PROCESSED_URLS)return;const o=(e=>{const t=i.md.sha256.create();return t.update(e),t.digest().toHex()})(s.default.utils.baseURL(r));if(n.includes(o))return;const d=h(r,e);a.default.track(u.TELEMETRY_ACTIONS.WAX.WAX_ML_TELEMETRY,d),n.push(o),l.default.set(c.PROCESSED_URLS,n)}},{"./waxMLTelemetryConstants":126,"./waxMLTelemetryStorageSettings":127,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,"node-forge":"node-forge","telemetry/background":170,"telemetry/constants/telemetryActions":174}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WAX_ML_TELEMETRY_STORAGE_CONTAINER=r.PROCESSED_URLS=r.ML_TO_WAX_TYPE_MAPPING=r.MAX_PROCESSED_URLS=r.MAX_FIELDS_PER_PAGE=void 0;r.WAX_ML_TELEMETRY_STORAGE_CONTAINER="04153822-4058-4c50-975b-ccb983f441a8",r.PROCESSED_URLS="e08cb02e-20a0-4304-9278-5563dd6c4a09",r.MAX_PROCESSED_URLS=500,r.MAX_FIELDS_PER_PAGE=10,r.ML_TO_WAX_TYPE_MAPPING={username:["LoginName","Email"],password:["Password"],email:["LoginName","Email"],addressCity:["City","CityPho,netic","WorkCity"],addressCountry:["Region"],addressState:["State","WorkState"],addressStreet1:["Address","AddressPhonetic"],addressStreet2:["AddressLine2","AddressLine2Phonetic"],addressZip:["ZipCode","WorkZipCode"],birthDate:["BirthDate"],birthDay:["BirthDay"],birthMonth:["BirthMonth"],birthYear:["BirthYear"],cardCvv:["CreditCardSecurityCode"],cardExpirationDate:["CreditCardExpirationDate"],cardExpirationMonth:["CreditCardExpirationMonth"],cardExpirationYear:["CreditCardExpirationYear"],cardHolder:["CreditCardHolderName","CreditCardHolderFirstName","CreditCardHolderLastName"],cardNumber:["CreditCardNumber"],changedEmail:["VerifyEmail","AlternateEmail"],changedPassword:["VerifyPassword","NewPassword"],firstName:["FirstName","FirstNamePhonetic","FirstNameRoman"],fullName:["FullName","FullNamePhonetic","FullNameRoman"],lastName:["LastName","LastNamePhonetic","LastNameRoman"],middleName:["MiddleName","MiddleNamePhonetic","MiddleNameRoman"],nameTitle:["Prefix"],phoneLocal:["PhoneNumberCountryCode","PhoneNumberAreaCode","PhoneNumberExtension","PhoneNumber","PhoneNumberWork","PhoneNumberWorkFax","PhoneNumberHome","PhoneNumberFax","PhoneNumberCell"],search:["Search","SearchAnnotation"],ssn:["SSN"],submitButton:["LoginButton","SignUpButton","ContinueButton","ButtonAction","ChangePasswordButton","SearchButton","SubscribeButton","ApplyButton","UpdateButton"],unknown:["Unknown"]}},{}],127:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=e("./waxMLTelemetryConstants");const{settings:a,utils:u,logger:l}=i.default,{isNil:c}=u;const d=new class{constructor(){(0,o.default)(this,"waxMLTelemetrySettingsContainer",null)}async initialize(){return new Promise((e=>{a.loadSettingsContainer(s.WAX_ML_TELEMETRY_STORAGE_CONTAINER,!0,((t,r)=>{if(!1===t||c(r))return l.error("failed to load WAX_ML_TELEMETRY_STORAGE_CONTAINER"),void e(!1);this.waxMLTelemetrySettingsContainer=r,e(!0)}))}))}get(e){if(!c(this.waxMLTelemetrySettingsContainer))return this.waxMLTelemetrySettingsContainer.getObject(e);l.error("settings not initialized")}set(e,t){c(this.waxMLTelemetrySettingsContainer)?l.error("settings not initialized"):this.waxMLTelemetrySettingsContainer.setObject(e,t)}remove(e){c(this.waxMLTelemetrySettingsContainer)?l.error("settings not initialized"):this.waxMLTelemetrySettingsContainer.removeObject(e)}async reset(){return new Promise((e=>{a.resetSettingsCollection(s.WAX_ML_TELEMETRY_STORAGE_CONTAINER,e)}))}};r.default=d},{"./waxMLTelemetryConstants":126,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.promise.js":437}],128:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("./waxConstants")),s=n(e("../../core/background/globalSettings"));const{utils:{isNil:a,isNumber:u},logger:l}=o.default,{SIGNIN_REMIND_ME_LATER:c,UNLOCK_REMIND_ME_LATER:d,POPUP_TYPE:f}=i.default,p={};p[f.SIGN_IN]=c,p[f.UNLOCK]=d;const h=new class{setRemindMeLaterForDays(e,t,r){const n=this.getKey(e);a(n)||(void 0===r?u(t)&&s.default.setValue(n,{remainingDays:o.default.utils.getNextOccurenceDate(t),show:void 0}):s.default.setValue(n,{remainingDays:void 0,show:r}))}getKey(e){const t=p[e];if(!a(t))return t}getValue(e){let t=this.getKey(e);if(a(t))throw new Error("Invalid popup type");return s.default.getValue(t)}clearValue(e){let t=this.getKey(e);a(t)||s.default.clearValue(t)}canShowPopup(e){try{const t=this.getValue(e);if(a(t))return!0;const r=t.remainingDays,{show:n}=t;if(a(r))return null==n||n;let o=(new Date).getTime()/6e4;return o=Math.round(o),r>o?!1:(this.clearValue(e),!0)}catch(e){return l.debug("Error:: canShowPopup invalid popupType"),!1}}};r.default=h},{"../../core/background/globalSettings":36,"./waxConstants":124,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211}],129:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.sort.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("common/notificationSettings/notificationSettingsManager")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=n(e("common/constants")),u=n(e("./waxConstants")),l=n(e("./frequentlyUsedLoginInfo"));a.default.settings.WAX_SECURE_CONTAINER;const{utils:{isNil:c,isntNil:d}}=s.default;class f extends i.default{constructor(){super(),(0,o.default)(this,"senderURL",""),(0,o.default)(this,"handleStorageCapacityForFrequentlyUsedLoginItems",(()=>{this.handleStorageCapacity(this.getFrequentlyUsedLoginId(),u.default.SETTINGS_AUTOFILL_KEY)})),(0,o.default)(this,"sortByFrequencyCount",(e=>{try{const t=this.container.getObject(u.default.SETTINGS_AUTOFILL_KEY);if(c(t))return;const r=t[e];if(c(r))return;return this.customSortByFrequencyCount(r.loginInfo)}catch(e){s.default.logger.info(`Error occurred in sortByFrequencyCount ${e}`)}}))}createAutoFillObject({url:e,loginId:t}){const r=new l.default,n={};n[t]=1,r.setLastUpdated((new Date).getTime()/1e3),r.setLoginInfo(n);const o={};return o[e]=r,o}setFrequentlyUsedLoginId({url:e,loginId:t}){this.handleStorageCapacityForFrequentlyUsedLoginItems();const r=this.container.getObject(u.default.SETTINGS_AUTOFILL_KEY);if(c(r))return void this.container.setObject(u.default.SETTINGS_AUTOFILL_KEY,this.createAutoFillObject({url:e,loginId:t}));const n=r[e];let o=!1;if(c(n)){const n=Object.assign(r,this.createAutoFillObject({url:e,loginId:t}));return void this.container.setObject(u.default.SETTINGS_AUTOFILL_KEY,n)}const i=r[e].loginInfo;if(i.length>0&&i.find((e=>{d(e[t])&&(e[t]+=1,o=!0)})),!o){const n={};n[t]=1,i.push(n);const o=new l.default;o.setLastUpdated((new Date).getTime()/1e3),i.forEach((e=>{o.setLoginInfo(e)}));const s={};s[e]=o;const a=Object.assign(r,s);return void this.container.setObject(u.default.SETTINGS_AUTOFILL_KEY,a)}const s={};n.lastUpdated=(new Date).getTime()/1e3,s[e]=n;const a=Object.assign(r,s);this.container.setObject(u.default.SETTINGS_AUTOFILL_KEY,a)}setSenderURL(e){c(e)||(this.senderURL=e)}getSenderURL(){return this.senderURL}getFrequentlyUsedLoginId(e){if(!c(this.container))return c(e)?this.container.getObject(u.default.SETTINGS_AUTOFILL_KEY):this.sortByFrequencyCount(e)}getLoginsBySubdomain(e){const t=this.getFrequentlyUsedLoginId(),r=s.default.utils.getDomain(e),n=[];for(const o in t)o!==s.default.utils.baseURL(e)&&o.includes(r)&&t[o].loginInfo.forEach((e=>{n.push(e)}));return this.customSortByFrequencyCount(n)}customSortByFrequencyCount(e){return e.sort(((e,t)=>{const r=Object.values(e)[0],n=Object.values(t)[0];return!r||r>n?-1:!n||r<n?1:0}))}updateStorageAfterVaultSync({url:e,loginId:t}){this.handleStorageCapacityForFrequentlyUsedLoginItems();const r=s.default.utils.baseURL(e);if(c(r)||c(t))return;const n=this.container.getObject(u.default.SETTINGS_AUTOFILL_KEY);if(c(n))return;const o=n[r];if(c(o))return;const i=o.loginInfo,a=this.getFrequentlyUsedLoginId();if(1===i.length)return delete a[r],void this.container.setObject(u.default.SETTINGS_AUTOFILL_KEY,a);const d=i.filter((e=>Object.keys(e)[0]!==t)),f=new l.default;f.setLastUpdated((new Date).getTime()/1e3),d.forEach((e=>{f.setLoginInfo(e)}));const p={};p[r]=f;const h=Object.assign(n,p);this.container.setObject(u.default.SETTINGS_AUTOFILL_KEY,Object.assign(a,h))}}const p=new f;r.default=p},{"./frequentlyUsedLoginInfo":121,"./waxConstants":124,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"common/notificationSettings/notificationSettingsManager":19,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.sort.js":432}],130:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty"));e("./exportGlobals");var i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("feature/security-dashboard/securityDashboardActions")),a=n(e("feature/import/importers/importManager")),u=n(e("feature/privacyPrompt/privacyPrompt")),l=n(e("feature/unlockManager/vaultUnlockManager")),c=n(e("feature/extPinningGuidance/extPinningGuidance")),d=n(e("feature/wax/waxActions")),f=n(e("feature/password-changer/passwordChangerActions")),p=n(e("core/background/extension/extensionSettings")),h=n(e("core/background/pwmSessionSettings")),_=n(e("feature/seamlessOnboarding/seamlessOnboardingManager")),E=n(e("core/background/mainUIActions")),g=n(e("feature/partnerSupport/partnerParams")),m=n(e("core/background/uiService")),y=n(e("core/background/dashboardUIController")),S=e("core/background/store/pwmStore"),T=n(e("feature/compromised-password/motFlowManager")),A=n(e("core/background/errorReportingService")),b=n(e("core/background/signin")),O=n(e("core/background/mixpanelStorageSettings")),I=n(e("./core/background/core")),v=n(e("./core/background/vaultActions")),N=e("./message-adapter/background");const{logger:R}=i.default;let C;const D=new class{constructor(){(0,o.default)(this,"isInitialized",!1)}initMessengerSubscription(){N.messenger.subscribe(N.MESSAGES.BG_READINESS,(async(e,t)=>this.isInitialized?null==t?void 0:t(this.isInitialized):(await C,null==t?void 0:t(!0))))}async init(){try{R.init(A.default),this.initMessengerSubscription(),await this.initPWMSessionSettings(),i.default.extensionAdapter.isManifestV3Extension()&&await this.initMixpanelSettings(),_.default.init();const e=(0,S.getPwmStore)();return await I.default.init(e),d.default.init(e),T.default.initialize(e),v.default.init(e),b.default.init(),g.default.init(),l.default.init(),c.default.init(),u.default.init(),await s.default.init(e),a.default.init(e),f.default.init(e),this.initUIActionsAndControllers(e),p.default.init(e),m.default.init(),this.isInitialized=!0,R.debug("DEBUG :: Background initialised successfully!"),this.isInitialized}catch(e){return R.debug(e),!1}}initUIActionsAndControllers(e){E.default.init(),y.default.init(e)}async initMixpanelSettings(){const e=await O.default.initialize();return!0===e&&(window.localStorage={getItem:e=>O.default.get(e),setItem(e,t){O.default.set(e,t)},removeItem(e){O.default.remove(e)}}),e}initPWMSessionSettings(){return new Promise(((e,t)=>{h.default.initialize((r=>{r?e("PWM Session Settings initialized"):t(new Error("Failed to initialize PWM Session Settings"))}))}))}};i.default.extensionAdapter.isManifestV3Extension()?C=D.init():window.addEventListener("load",(()=>{C=D.init()})),window.onerror=function(e,t,r,n,o){R.error(`${e}, ${t}, ${r}, ${n}, ${o}`)};r.default=D},{"./core/background/core":28,"./core/background/vaultActions":57,"./exportGlobals":59,"./message-adapter/background":134,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.promise.js":437,"core/background/dashboardUIController":29,"core/background/errorReportingService":30,"core/background/extension/extensionSettings":33,"core/background/mainUIActions":37,"core/background/mixpanelStorageSettings":38,"core/background/pwmSessionSettings":43,"core/background/signin":47,"core/background/store/pwmStore":49,"core/background/uiService":56,"feature/compromised-password/motFlowManager":66,"feature/extPinningGuidance/extPinningGuidance":69,"feature/import/importers/importManager":83,"feature/partnerSupport/partnerParams":96,"feature/password-changer/passwordChangerActions":98,"feature/privacyPrompt/privacyPrompt":105,"feature/seamlessOnboarding/seamlessOnboardingManager":108,"feature/security-dashboard/securityDashboardActions":111,"feature/unlockManager/vaultUnlockManager":117,"feature/wax/waxActions":123}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getIntlData=function(e){return(0,n.createIntl)({locale:null!=e?e:navigator.language.toLowerCase(),messages:u(e)},s)},r.getLangCountryCodeFromBrowserLocale=function(e){const[t,r]=e.toLowerCase().split("-");return[t,r]},r.getLocale=a,r.getLocaleData=u,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("react-intl"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(e("./langData"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}const s=(0,n.createIntlCache)();function a(e){const t=null!=e?e:navigator.language.toLowerCase(),r=Object.keys(o),n=t.split("-"),[i,s]=n;return[null==s?i.toLowerCase():n.join("_"),i,s].find((e=>r.includes(e)))||"en"}function u(e){const t=a(e);return o[t]}},{"./langData":132,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,"react-intl":"react-intl"}],132:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ar",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"cs",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"da",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"de",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"el",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"en",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"es",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"fi",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"fr",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"he",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"hu",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"it",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(r,"ja",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"ko",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"nb",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"nl",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"no",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"pl",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(r,"pt",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"pt_br",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"ro",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(r,"ru",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"sv",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"tr",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"zh_cn",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"zh_tw",{enumerable:!0,get:function(){return A.default}});var o=n(e("i18n/en.json")),i=n(e("i18n/ar.json")),s=n(e("i18n/de.json")),a=n(e("i18n/es.json")),u=n(e("i18n/he.json")),l=n(e("i18n/ja.json")),c=n(e("i18n/nl.json")),d=n(e("i18n/pt.json")),f=n(e("i18n/ru.json")),p=n(e("i18n/zh_cn.json")),h=n(e("i18n/cs.json")),_=n(e("i18n/el.json")),E=n(e("i18n/fi.json")),g=n(e("i18n/hu.json")),m=n(e("i18n/ko.json")),y=n(e("i18n/no.json")),S=n(e("i18n/pt_br.json")),T=n(e("i18n/sv.json")),A=n(e("i18n/zh_tw.json")),b=n(e("i18n/da.json")),O=n(e("i18n/fr.json")),I=n(e("i18n/it.json")),v=n(e("i18n/nb.json")),N=n(e("i18n/pl.json")),R=n(e("i18n/ro.json")),C=n(e("i18n/tr.json"))},{"@babel/runtime/helpers/interopRequireDefault":208,"i18n/ar.json":"i18n/ar.json","i18n/cs.json":"i18n/cs.json","i18n/da.json":"i18n/da.json","i18n/de.json":"i18n/de.json","i18n/el.json":"i18n/el.json","i18n/en.json":"i18n/en.json","i18n/es.json":"i18n/es.json","i18n/fi.json":"i18n/fi.json","i18n/fr.json":"i18n/fr.json","i18n/he.json":"i18n/he.json","i18n/hu.json":"i18n/hu.json","i18n/it.json":"i18n/it.json","i18n/ja.json":"i18n/ja.json","i18n/ko.json":"i18n/ko.json","i18n/nb.json":"i18n/nb.json","i18n/nl.json":"i18n/nl.json","i18n/no.json":"i18n/no.json","i18n/pl.json":"i18n/pl.json","i18n/pt.json":"i18n/pt.json","i18n/pt_br.json":"i18n/pt_br.json","i18n/ro.json":"i18n/ro.json","i18n/ru.json":"i18n/ru.json","i18n/sv.json":"i18n/sv.json","i18n/tr.json":"i18n/tr.json","i18n/zh_cn.json":"i18n/zh_cn.json","i18n/zh_tw.json":"i18n/zh_tw.json"}],133:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("messenger/Background"));r.default=class{constructor(...e){this.messenger=new o.default(...e)}publish(e,t,r,n){return this.messenger.publish(e,t,r,n)}subscribe(e,t){return this.messenger.subscribe(e,t)}}},{"@babel/runtime/helpers/interopRequireDefault":208,"core-js/modules/es.array.iterator.js":430,"core-js/modules/web.dom-collections.iterator.js":453,"messenger/Background":646}],134:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0});var o={messenger:!0,createMessenger:!0};r.createMessenger=function(){return new a.default({browser:l})},r.messenger=void 0;var i,s,a=n(e("./Messenger")),u=e("../messageID");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}}))}));const l=(null===(i=window)||void 0===i?void 0:i.chrome)||(null===(s=window)||void 0===s?void 0:s.browser);r.messenger=new a.default({browser:l})},{"../messageID":135,"./Messenger":133,"@babel/runtime/helpers/interopRequireDefault":208}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MESSAGES=void 0;var n=function(e){return e.IS_USER_SIGNED_IN="44102788-db6f-4711-a5e7-3a426ace0599",e.OPEN_SIGN_IN_PAGE="972e6870-2172-4083-a5d3-9efa32e773a1",e.DASHBOARD_SHOWN="c7b35e87-99e5-45f1-9b84-82b795f8670a",e.REQUEST_PRIVACY="88e6402a-3bbe-4930-9440-f64a66ea8947",e.DEFAULT_PASSWORD_SAVING="7a0565c7-312b-485d-9feb-d63dd556bd20",e.SET_ONBOARDING_STEP="cf44b42a-2534-446d-9f67-332ebb28f5ba",e.FEEDBACK_CLICKED="10e674b7-9f3a-4b5e-8926-678e6c4d365e",e.HELP_CLICKED="2693093d-68a5-40d1-b1ef-67f30007335e",e.LOCK_VAULT_CLICKED="4d4a618a-b75f-4b64-bc91-98c3c2f8b10b",e.SIGN_OUT_CLICKED="1406c224-12b8-4c54-90e5-b641f209f93d",e.LEGAL_CLICKED="f9942077-3ca8-40de-8a7d-b0551c480dda",e.PRIVACY_CLICKED="681211bd-f1f7-438f-a993-7e8943ab29b6",e.UNLOCK_VAULT="8daa8c4a-cd0e-49ba-b7bc-a118158278a7",e.VAULT_DATA="18b1587c-3e76-4aed-bc91-c0c94caebf40",e.SET_NSL_CREDENTIALS="a91037d6-6cdd-4607-a7c2-8c9a8496e96d",e.GET_NSL_CREDENTIALS="389e9eda-d912-4402-9369-bbc84ac0d22c",e.EULA_CLICKED="36c5ad5b-fecf-4845-d2bf-6341355a9ef9",e.VERIFY_PASSWORD="a5033e09-b8d2-434a-9d74-33b0b561a540",e.FORCE_SYNC="cf1cf696-885a-4b11-bed7-603cc19cdf7a",e.REMOVE_NPW_CLICKED="eb1fd3a2-3284-4814-863b-8d370df6cad4",e.GLOBAL_PRIVACY_STATEMENT_CLICKED="35bfc103-e0c5-4f04-b072-0888c8cad170",e.CHECK_PRIVACY_PROMPT_CONSENT_STATUS="7285c6bb-a90a-4ed2-83c6-8314af9d5fc3",e.STORE_PRIVACY_CONSENT="1ea447b6-5eb7-4323-99e3-1b53bc394729",e.ON_PRIVACY_CONSENT_DECLINE="44dede82-aa13-4b22-b107-e16ceebdf8b2",e.FF_AMO_CLICK_EVENT="fdf98f45-081b-4859-b0d5-3ca4799507a6",e.EXT_PINNING_GUIDANCE_STATUS="2db2eb91-b8bd-40a0-93a1-ddab5f01cf4b",e.STORE_EXT_PINNING_GUIDANCE_CLOSE="6d561485-94bf-440e-85df-bdf0729f9d69",e.LAUNCH_DELETE_VAULT_FLOW="b01192fd-7301-4d38-9651-9a1e4071b3ed",e.CALL_DELETE_VAULT_API="0150e87d-8ce7-4ad0-89d2-8a102daf5840",e.OPEN_DASHBOARD_UI="164b986f-a77a-424d-ba00-1c9bbf510ee0",e.PREVENT_DIRECT_NAVIGATION="27a5847a-7356-4a5c-806e-70059207e688",e.GET_ACTIVE_TAB_DOMAIN="5e7b6b11-b2be-4f33-b923-5420329aeddd",e.OPEN_VAULT_CLICKED="efbb3395-ecee-4dfc-bc23-964883685a26",e.RESET_PASSWORD_ATTEMPT="2ebd97cb-1ed2-47d6-b5ef-687f542e79a0",e.SEAMLESS_ONBOARDING_INIT="761b0df0-613c-44c9-9877-6f9a1bac7932",e.SEAMLESS_ONBOARDING_SUCCESS="d324d3a8-8a4e-4c57-b549-cd7b9bf718f7",e.GET_NA_DEVICES="2a5aec16-25a4-454d-953a-321eacfefd82",e.GET_AUTHORIZED_DEVICE="ea8d18b7-9ae0-491b-87e0-550b10a5f37b",e.SETUP_PASSWORDLESS_VAULT_UNLOCK="8840352c-0aae-4236-8c10-b1c7384e1a9f",e.REMOVE_REGISTERED_DEVICE="8c411787-6df9-451a-95a8-de0865c8db36",e.GET_DEVICES_UPON_REGISTRATION_SPOC="6eb9b1c0-e0df-4f6b-ab80-a3b386a54709",e.GET_DEVICES_UPON_REGISTRATION_SPOC_CALLBACK="4907ded3-0030-4850-b95c-cffcbe23e984",e.AUTO_PASSWORDLESS_VAULT_UNLOCK_REQUEST="71feaf58-8872-4c6b-848e-2027bff7d07a",e.SEND_UNLOCK_VAULT_TO_MOBILE="cb7a36ab-7ee1-4a50-81a9-618e573a5636",e.UNLOCK_TAB_CLOSE="4a58288c-7953-428b-a874-4f55936fa238",e.REMOVE_DEVICE="0fd2b6de-281b-4719-92ba-20ce64833dba",e.COMPROMISED_VAULT_PASSWORD_KB_CLICKED="0e4b7946-4909-4175-ab43-8b3a6b72c92c",e.OPEN_ADD_DEVICE_KB_LINK="52dfc971-3b71-42ac-b2e6-7bce7f24b2a7",e.SETUP_PASSWORDLESS_VAULT_UNLOCK_KB_CLICKED="d2163c82-5c5e-4d3b-9415-9c4e4e54c0a8",e.REFRESH_STORE="a79ff6e3-861b-4be3-a03d-ca0f5712fcec",e.PASSWORD_METER_LEARN_MORE_COMMON="a424b5d9-00d7-46b9-d066-6f94f6843526",e.PASSWORD_METER_LEARN_MORE_GUESSABLE="127a1d62-f26a-4961-d5f2-248b695d2f0e",e.CALL_CHANGE_VAULT_PASSWORD_API="3f6ee35b-9cee-4532-ed3e-77ce12985de7",e.CHANGE_VAULT_PASSWORD="a8369e40-5e31-4c76-b1af-0964df4db066",e.CALL_CREATE_VAULT_API="c4adadda-0e88-4e41-e3a0-6030ebb329b0",e.GET_IDS_SETTING="b868f04a-2ae1-46fa-88be-daa73a5e96df",e.GET_ALL_IDS_SETTINGS="d2682818-769f-438b-93c8-1dc579e56300",e.SET_TOUR_SHOWN="E39DBDE1-22AB-41CB-8D6A-340E55B3F6BF",e.TOUR_FINISHED="B11160CF-B10B-4113-8CF3-2D5EE2A96999",e.VAULT_CREATION="63db3b9d-70df-4d5c-b1aa-c424d3689bf0",e.SEAMLESS_ONBOARDING_CAN_AUTO_CREATE_NA="c6ff9aed-9e83-4cf1-aa46-d2cb203b7e1f",e.SPLASH_SHOWN="A12VG294-240U-1093-UJ13-1WAFE13JODCI",e.OPEN_URL_CREATE_TAB="c010452f-c941-487f-896d-b9dc5c2e0ee7",e.VAULT_GET_CARD_ITEMS="7c8c8af8-682b-4350-889c-6665a830bb5e",e.OPEN_WEB_APP="30546944-c2c0-47e3-a9f3-67606ba64ad8",e.GET_PARTNER_INFO="91e121618f2746199d9e4b507ccb7dfe",e.GO_TO_VAULT="b5b0551b-b6a6-4f45-b4dc-7dd81e4953c8",e.OPEN_CREATE_VAULT="a8a218e4-198b-4004-9a59-d6db1440cc4e",e.SHOW_LOGIN_ATTEMPT_EXCEEDED_NOTIFICATION="c86a959a-8f83-46b1-b68a-e37b3ddee437",e.PREVENT_DIRECT_NAVIGATION_ONBOARDING_TAB="57de73df-a250-4951-b377-85f772ec0631",e.PASSWORDLESS_VAULT_UNLOCK_RESPONSE="b4bfa716-f090-4b01-86b1-5d721a93050e",e.FIREFOX_RIBBON_MESSAGE="0e5f6f1a-851f-4d3c-9396-3306297e6daf",e.ONBOARDING_FINISHED="4a3bb2a8-41ee-47a8-b189-0405197cd995",e.IS_ONBOARDING_FLOW="5dfbb915-f747-4767-81c9-aa0b5ca09b72",e.GET_IS_ONBOARDING="b90efcb5-fdd1-429f-be25-9353f48e2b59",e.UPDATE_ONBOARDING_TAB_URL="e55bff3c-6f97-48aa-8a60-a3151890d9d0",e.ENCRYPTION_INFO_LEARN_MORE_CLICKED="4a2ffd36-584f-45ff-9852-e3cb62610892",e.GENERATE_RECOVERY="30425d26-6b57-4534-bf92-2da2083e4d0a",e.FETCH_RECOVERY_INFO="f0c2ac39-bd7a-48be-aefb-f0f635f4a85d",e.GET_PASSWORD_HINT="32dd0ab0-b78a-4216-a331-cf77c6c09202",e.OPEN_RECOVERY="4c50dbbd-ff15-425f-8ba1-b134a235a003",e.RECOVERY_RESET_PASSWORD="b6e27d6c-4b44-4e35-8f31-0501673ccc37",e.CANCEL_RECOVERY_FLOW="84b35025-b4c3-4f8e-a733-1c88b94ce8c5",e.GET_ACTIVE_TAB_URL="7ac67cc6-e350-4932-93c1-178d5742eba8",e.SET_WHATSNEW_VERSION="0dd35533-82ad-421b-9657-cee6dd5b3e8b",e.WHATSNEW_FLOW_COMPLETED="db1ddb00-5bf1-4651-9678-e113650acd6d",e.CREATE_VAULT_SCREEN_INIT="c244a7a4-05cf-48e2-b52a-9c10c3bbe3f8",e.ENFORCE_VAULT_PASSWORD_UNIQUENESS_CHECK="0478ae8d-6c5a-4835-8186-5b76279cca36",e.CLOSE_VAULT_POST_RECOVERY="e2195279-a88b-4948-8e4e-7fde6c8cf8e7",e.GET_RECOVERY_VAULT_FLOW_TYPE="f335678b-1817-4422-9027-30d627605182",e.SET_AUTO_UNLOCK="ac6d5321-6cd2-4873-ad07-2cba0877b03b",e.GET_AUTO_UNLOCK_SETTING="70a1fec1-5a53-424b-9a4b-a657f648c532",e.IS_TAG_UPDATE="ac54b7aa-a363-4034-bf97-0f67b5a6f280",e}(n||{}),o=function(e){return e.SHOULD_START_WAX="2472af97-51c1-47b6-b9d4-b49807439046",e.IS_URL_EXCLUDED_FROM_ADDING_MUTATION_OBSERVER="1263e3f9-976b-43e2-a955-e4a7c32fa5e9",e.CAN_SHOW_SIGNIN_POPUP="8e9a1de3-1289-4d0f-bb91-8d67d108785e",e.GET_SANDBOX_INFORMATION="66f765b7-5cb6-41b4-90a6-ce6f78b707d4",e.CHANGE_PASSWORD_SUBMISSION="c54ee78e-3086-448b-9353-f5f771f0b971",e.VAULT_GET_LOGINS_BY_URL="92b91bf7-c99a-4ec6-8238-e94111d61f73",e.VAULT_GET_LOGIN_BY_ID="cc0e2588-8c49-4141-8e84-ce58ea2d59d9",e.VAULT_GET_CARD_ITEMS="c8d86b58-cc8c-4441-9524-c2d63144a704",e.IS_URL_EXCLUDED_FROM_CAPTURE="a817c22d-772c-440f-8018-75cd44032ddd",e.LOGIN_UNLOCKED="f57525ba-fb9b-49ae-b75e-7460079546f4",e.GET_SANDBOX_INFORMATION_CS="7ed01a61-c3e4-4239-8095-ab169a184415",e.VAULT_ISLOGGEDIN="20d0766f-63d4-4922-b857-f5f49e369587",e.GENERATE_PASSWORD="cbb8dd34-52d5-4e04-825c-bbae92ec78d7",e.VAULT_GET_CARD_BY_ID="1674ca5e-e57a-4083-95e1-759202b5f232",e.VAULT_LOGGEDIN="f769d1c8-d85d-4a47-8769-1bbb728c8e93",e.EULA_CLICKED="17a6cce2-579a-4b30-9bd0-677ff72c46f0",e.DONT_ASK_SIGN_IN_AGAIN="0cc8350d-7783-4920-8afc-56776a2c8085",e.PASSWORD_VERIFIED="ffd5b11725904d899c52c6eff330d0d6",e.PASSWORD_VERIFICATION_CANCELLED="28bcd15d-c341-47fa-b47b-ecd186675854",e.SET_SHOW_SIGNIN_NOTIFICATION="c4a2f02d-e75f-48a1-8700-533adc25e897",e.GET_SHOW_SIGNIN_NOTIFICATION="57b12f54-2a85-4acc-b28b-ab41bcc37daa",e.NOTIFICATION_LOGIN_INFO_MAP="63b0c310-cef5-4dd9-b29b-2fd8cf89101e",e.SET_SHOW_SAVE_UPDATE_LOGINS_NOTIFICATION="bd1c2a11-ce16-4ca2-b2bf-4c9df17222ee",e.GET_SHOW_SAVE_UPDATE_LOGINS_NOTIFICATION="8cd654bd-0659-4d11-b10e-16d715c472c0",e.CLEAR_NOTIFICATION_STATUS="0ae7ddfa-d3bc-47cb-b42c-b7986f64d389",e.UPDATED_USERNAME="c6c85ebb-3359-4694-82b0-fca02e6f9292",e.SET_SHOW_CP_NOTIFICATION="6244cec5-5238-49b8-a0da-45ec4bc40e08",e.GET_SHOW_CP_NOTIFICATION="fd2edfbc-8c41-446b-8916-64072329f6c8",e.VAULT_GET_LOGINS_BY_SUBDOMAIN="81d66034-4744-4b68-b4aa-57c01ecf99fb",e.CAN_SHOW_RELEVANT_LOGINS_LINK="9dbc3697-b976-45f0-8742-c946f4457b81",e.NOTIFICATION_REPLACE_LOGIN_INFO_MAP="ccab1171-d6b9-4ae7-ab49-e733e3438b39",e.COMPROMISED_NOTIFICATION_VISIBLE="c5d19094-79fd-436d-8aed-7fb56da21008",e.NOTIFICATION_CP_LOGIN_INFO_MAP="6990a9ba-55df-493a-90b0-70dbf64d8da7",e.SAVE_AS_A_NEW_LOGIN_FLOW="ba9c17c1-125a-43c3-d3d9-72762f71ed93",e.WAX_ML_TELEMETRY="508ba562-b807-498e-b758-de9770ef21a1",e}(o||{}),i=function(e){return e.CHANGE_LOGIN_PASSWORD="d2086b78-286f-4409-b99d-e7e1fb693a22",e.CANCEL_CHANGE_LOGIN_PASSWORD="4f2c4c83-988d-4ea0-a7a2-4a0d22a209af",e.TASK_STATUS="e4a5355c-f081-4592-a37e-7f69bd9dd8c6",e.PAGE_ACTIONS="d8896ef6-4315-4ff8-b1b1-08d27a326a92",e.REQUEST_LIST_VIEW_DATA="7C5B2343-D348-4DDC-A21D-64F6349AF7D0",e.REQUEST_RIBBON_DATA="8f98d97c-a4b1-401a-9fc8-284396663b06",e.REQUEST_PASSWORD_FOR_LOGIN_ITEM="EBF57B73-60E0-4346-A777-B47197D39C71",e.CLEAR_GUID_STATUS_MAP="5f47bb44-265a-4ccc-b830-44c72d27dfb7",e.AUTO_CHANGE_RUNNING="2fa85339-6703-41e0-a608-d45927555e77",e.REQUEST_DASHBOARD_VISIT_STATUS="35bfe4e3-9af3-4756-9bfc-5f3e739a343e",e.OPEN_LEARNMORE="99ddd5f9-b219-4386-9719-3dee4875a2e8",e.AUTOCHANGE_BANNER_TYPE="CE5C7927-9A50-492E-A66A-FB72452305A1",e.AUTOCHANGE_CS_TELEMETRY="E43DB3F6-1D90-46FF-9070-9EB0089F0662",e}(i||{}),s=function(e){return e.POPUP_LOGIN_ITEM_SELECTED="0fb811ad-ce91-4eb2-b897-7e8e3e3f0c1e",e.UPDATE_POPUP_SIZE="40a5772a-2431-4cee-a627-8e4cf0188f85",e.POPUP_CARD_ITEM_SELECTED="e397d4d0-2db5-4970-9f16-565c65e813b3",e.POPUP_GENERATE_PASSWORD_CLICKED="4b3185a4-9844-463d-9fd1-3450e3b1105c",e.POPUP_CLOSE="a191f316-eb9d-4599-bc3b-2685a4128163",e.VAULT_CLOSED="50465ef4-5c2f-469c-9e0d-e8f9c500315e",e.NA_LOGGEDOUT="f523d38f-c6bf-47b1-a6cf-6802807cdc97",e.POPUP_INIT="cd0341f1-27bc-4777-a534-910f5e3d8623",e.SHOW_INPAGE_POPUP_ON_TOP_FRAME_BG="04477007-3aca-48e3-9034-b45d66f0f991",e.ITEM_SELECTED_INPAGE_POPUP_ON_TOP_FRAME_BG="0e160c70-696a-4205-8be3-d16bea70b397",e.ITEM_SELECTED_INPAGE_POPUP_ON_TOP_FRAME="40d62abb-4e5e-4f99-8aae-31e63fd48ab8",e.GENERATE_PWD_CLICKED_INPAGE_POPUP_ON_TOP_FRAME="1e70e8f2-574c-44f1-b610-9431b485f99d",e.GENERATE_PWD_CLICKED_INPAGE_POPUP_ON_TOP_FRAME_BG="c1fffc7c-c990-4aa4-a108-9be422aaba4d",e.SHOW_INPAGE_POPUP_ON_TOP_FRAME="01eb393d-8c8b-4606-bcbf-f73fa29be805",e.POPUP_OPEN_LOGIN_FLOW="2b53b708-408b-4e40-98d9-50e1d110c491",e.SEND_TELEMETRY_FROM_BG="77a46ad6-76b6-475b-e1d8-734704922833",e.GET_USERNAME_LIST_ORDERED_BY_FREQUENCY="c27e72c7-cca4-4440-8cd4-9f0f36869c9c",e.POPUP_LOGIN_USERNAME_CLICKED_INPAGE_POPUP_ON_TOP_FRAME="464fb6de-ea75-4c8a-bd18-965cf2d30beb",e.POPUP_LOGIN_USERNAME_CLICKED_INPAGE_POPUP_ON_TOP_FRAME_BG="e1d3a0a3-b62d-4252-aec6-b2070aac2f60",e.POPUP_LOGIN_USERNAME_SELECTED="d97c5237-8bec-4b51-a206-3906fa82523c",e.POPUP_GENERATE_PASSWORD_USE_SELECTED="2ab79d7d-1be1-4315-9943-77346b2ded69",e}(s||{}),a=function(e){return e.RESTORE_DEFAULT_SETTINGS="cd4afa6c-ef05-4ea3-bc58-4fce2bda50c2",e.SET_SETTINGS="6d0dfaa9-90b6-42dd-b33b-9eff01ee3dfb",e}(a||{}),u=function(e){return e.RIBBON_INIT="5712086f-6bf6-4175-a61b-eb0b779266ca",e.RIBBON_SHOW="8a1b9951-6667-4dcd-9f8f-8a8daecd090f",e.RIBBON_HIDE="fca9bc81-463d-4547-9d8b-a120f009498b",e}(u||{}),l=function(e){return e.TRACK_ACTION="19d71e05-f69f-434b-841b-2a1f6d389348",e}(l||{}),c=function(e){return e.GET_INSTALL_INFO_FROM_PORTAL="8dfa5e2b-9e1d-4faad-b8bb-e3001faf3bc7",e}(c||{});r.MESSAGES=Object.freeze({DASHBOARD_MESSAGES:n,SECURITY_DASHBOARD_MESSAGES:i,WAX_MESSAGES:o,POPUP_MESSAGES:s,SETTINGS_MESSAGES:a,COMPROMISED_PASSWORD_RIBBON:u,CRASH_REPORT:"206e0e8b-50d1-49e1-9191-3931896c6be0",BG_READINESS:"d3c2e2cb-6408-4567-91ae-168ea65c4c8e",TELEMETRY:l,PORTAL_INSTALL_FLOW:c})},{}],136:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("common/constants")),s=n(e("./portalUtilsBG")),a=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),l=n(e("core/background/signin")),c=n(e("core/background/dashboardUIController")),d=n(e("feature/import/importers/importManager")),f=n(e("./portalScripts")),p=n(e("core/background/pwmSessionSettings"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}const{extensionAdapter:_,utils:E}=a.default;const g=new class{constructor(){(0,o.default)(this,"cspUIFlowHandled",!1),(0,o.default)(this,"init",(()=>{this.handleCSPUIFlowLoadedBeforeEventRegistration(),_.addOnBeforeRequestEventListener(this.handleCSPUIFlow.bind(this),[i.default.CSP_UI_PROCESSING_URL,i.default.CSP_UI_FLOW_URL],[]),this.scheduleHandleCSPUIFlow()})),(0,o.default)(this,"checkAllTabsForCSWImport",(async e=>{try{const t=(await f.default.getAllTabsPromise()).filter((e=>s.default.isLandingPageURL(e.url)));t.push(e);return s.default.checkAndGetTabWithImportParam(t)}catch(e){return}})),(0,o.default)(this,"scheduleHandleCSPUIFlow",(()=>{let e=0;for(;e<=5;){setTimeout((()=>{this.cspUIFlowHandled||this.handleCSPUIFlowLoadedBeforeEventRegistration()}),2**e*1e3),e++}})),(0,o.default)(this,"handleCSPUIFlow",(async e=>{if(E.urlWithoutQueryParameters(e.url,!0)!==i.default.CSP_UI_FLOW_URL)return;this.cspUIFlowHandled=!0,p.default.set(i.default.CSP_FLOW,!0);await this.checkAllTabsForCSWImport(e)?d.default.setImportDiscontinueFlow(e,{isCSWImport:!0},!1):u.vaultKeys.isLocked()?l.default.openLoginFlow({useNudgePageForLogin:!0}):c.default.openDashboardUI(i.default.DASHBOARD_INDEX_URL),setTimeout((()=>{_.closeTabAndEnsureBrowserIsAlive(e.tabId)}),100)})),(0,o.default)(this,"handleCSPUIFlowLoadedBeforeEventRegistration",(()=>{_.getAllTabs(((e=[])=>{var t;if(!e.length)return;const r=e.find((e=>{var t,r;return(null===(t=e.url)||void 0===t?void 0:t.startsWith(i.default.CSP_UI_FLOW_URL))||(null===(r=e.pendingUrl)||void 0===r?void 0:r.startsWith(i.default.CSP_UI_FLOW_URL))}));if(!r)return;let n="";n=null!==(t=r.url)&&void 0!==t&&t.startsWith(i.default.CSP_UI_FLOW_URL)?r.url:r.pendingUrl;const{id:o}=r;this.handleCSPUIFlow({tabId:o,url:n})}))}))}};r.default=g},{"./portalScripts":141,"./portalUtilsBG":142,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"common/constants":13,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/dashboardUIController":29,"core/background/pwmSessionSettings":43,"core/background/signin":47,"feature/import/importers/importManager":83}],137:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("common/constants")),s=n(e("core/background/telemetry/telemetryWrapper")),a=n(e("feature/nudge/nudgeController")),u=e("message-adapter/background"),l=n(e("core/background/pwmSessionSettings")),c=n(e("./delayOnboardingSettings")),d=n(e("./portalUtilsBG"));const{extensionAdapter:f,utils:p,logger:h}=o.default,{DELAY_ONBOARDING:_}=i.default.SESSION_STORAGE_KEYS;const E=new class{constructor(){this.checkForTimeoutToOpenOnboardPage=this.checkForTimeoutToOpenOnboardPage.bind(this),this.handleMessage=this.handleMessage.bind(this),u.messenger.subscribe(i.default.DELAY_ONBOARDING_FLOW.SEND_ONBOARD_PAGE_SOURCE_TELEMETRY,(()=>{this.sendOnboardPageSourceTelemetry()}))}init(){this.openOnboardPagePromise=new Promise((e=>{this.afterGettingOpenOnboardPageMessage=e})),this.enableAllStatusPromise=new Promise((e=>{this.afterGettingEnableAllStatusMessage=e})),this.eventsMap={[i.default.DELAY_ONBOARDING_FLOW.ENABLE_ALL_FLOW_MESSAGE_FROM_PORTAL]:this.handleAfterGettingEnableAllMessage.bind(this),[i.default.DELAY_ONBOARDING_FLOW.OPEN_ONBOARD_PAGE]:this.openOnboardPage.bind(this),[i.default.DELAY_ONBOARDING_FLOW.SEND_ONBOARD_PAGE_SOURCE_TELEMETRY]:this.sendOnboardPageSourceTelemetry.bind(this)},c.default.initialize(),f.addMessageListener(this.handleMessage)}async getLandingPageTabs(){return new Promise((e=>{f.getAllTabs((t=>{const r=t.filter((e=>d.default.isLandingPageURL(e.url)));return 0===r.length?e(null):e(r)}))}))}async get4PillarLandingPageTabs(){return new Promise((e=>{f.getAllTabs((t=>{const r=t.filter((e=>d.default.is4PillarPageURL(e.url)));return 0===r.length?e(null):e(r)}))}))}setEnableAllStatus(e){p.isBoolean(e)&&l.default.set(_.ENABLE_ALL_STATUS,e)}getEnableAllStatus(){var e;return null!==(e=l.default.get(_.ENABLE_ALL_STATUS))&&void 0!==e&&e}getOnboardPageSource(){var e;return null!==(e=l.default.get(_.ONBOARD_PAGE_SOURCE))&&void 0!==e?e:null}setOnboardPageSource(e){l.default.set(_.ONBOARD_PAGE_SOURCE,e)}handleMessage(e,t){if(p.isNil(e))throw new Error("request cannot be null");if(p.isNil(e.id))return;const r=this.eventsMap[e.id];p.isNil(r)||r(e,t)}async handleEnableAllComm(){return setTimeout((()=>{var e;this.setEnableAllStatus(!0),null===(e=this.afterGettingEnableAllStatusMessage)||void 0===e||e.call(this)}),i.default.DELAY_ONBOARDING_FLOW.FALL_BACK_TIMER_FOR_ENABLE_ALL_COMM_WAIT),this.enableAllStatusPromise}handleAfterGettingEnableAllMessage(e){var t;p.isntNil(e.payload)&&p.isntNil(e.payload.enableAllStatus)&&(this.setEnableAllStatus(e.payload.enableAllStatus),null===(t=this.afterGettingEnableAllStatusMessage)||void 0===t||t.call(this))}async getCorrespondingTabs(){var e;let t="";return t=o.default.globals.BROWSER!==(null===(e=o.default.constants.BROWSER_TYPE)||void 0===e?void 0:e.EDGE)?await this.getLandingPageTabs():await this.get4PillarLandingPageTabs(),t}async checkForLandingPageAndResolveEnableAllComm(){const e=await this.getCorrespondingTabs();p.isNil(e)||(this.sendDelayOnboardingCommListenerAddedMsgToTab(e),await this.handleEnableAllComm())}sendDelayOnboardingCommListenerAddedMsgToTab(e){e.forEach((e=>{f.sendMessageToTab(e,{id:i.default.DELAY_ONBOARDING_FLOW.DELAY_ONBOARDING_COMMUNICATION_ADDED},this.handleAfterGettingEnableAllMessage)}))}async handleDelayOnboardFlow(){return setTimeout((()=>{var e;null===(e=this.afterGettingOpenOnboardPageMessage)||void 0===e||e.call(this),c.default.setDelayOnboardFlowStatus(i.default.DELAY_ONBOARDING_FLOW.DELAY_ONBOARD_FLOW_STATUS.STOP),this.setOnboardPageSource(i.default.DELAY_ONBOARDING_FLOW.ONBOARD_PAGE_SOURCE.AFTER_TIMEOUT)}),i.default.DELAY_ONBOARDING_FLOW.FALL_BACK_TIMER_FOR_OPENING_ONBOARD_PAGE),this.sendStartListeningToOpenOnboardPageMessageToTab(),c.default.setDelayOnboardFlowStatus(i.default.DELAY_ONBOARDING_FLOW.DELAY_ONBOARD_FLOW_STATUS.START),this.openOnboardPagePromise}async checkForEnableAllAndResolveOpenOnboarding(){var e;!1!==this.getEnableAllStatus()?await this.handleDelayOnboardFlow():null===(e=this.afterGettingOpenOnboardPageMessage)||void 0===e||e.call(this)}async sendStartListeningToOpenOnboardPageMessageToTab(){let e=await this.getCorrespondingTabs();p.isNil(e)||e.forEach((e=>{f.sendMessageToTab(e,{id:i.default.DELAY_ONBOARDING_FLOW.START_LISTENING_TO_OPEN_ONBOARD_PAGE},(()=>{}))}))}openOnboardPage(){var e;c.default.setDelayOnboardFlowStatus(i.default.DELAY_ONBOARDING_FLOW.DELAY_ONBOARD_FLOW_STATUS.STOP),null===(e=this.afterGettingOpenOnboardPageMessage)||void 0===e||e.call(this),this.setOnboardPageSource(i.default.DELAY_ONBOARDING_FLOW.ONBOARD_PAGE_SOURCE.AFTER_PORTAL_MESSAGE)}async checkForTimeoutToOpenOnboardPage(){await c.default.initialize();const e=c.default.getDelayOnboardFlowStatus();if(p.isntNil(e)&&e===i.default.DELAY_ONBOARDING_FLOW.DELAY_ONBOARD_FLOW_STATUS.START)try{a.default.openNudgeTab(),c.default.setDelayOnboardFlowStatus(i.default.DELAY_ONBOARDING_FLOW.DELAY_ONBOARD_FLOW_STATUS.STOP),this.setOnboardPageSource(i.default.DELAY_ONBOARDING_FLOW.ONBOARD_PAGE_SOURCE.AFTER_BROWSER_RESTART)}catch(e){h.error(`Error in delay onboarding flow startup listener : ${e}`)}f.removeStartupListener(this.checkForTimeoutToOpenOnboardPage)}addStartUpListenerIfNeeded(){var e;o.default.globals.BROWSER===(null===(e=o.default.constants.BROWSER_TYPE)||void 0===e?void 0:e.EDGE)&&f.addStartupListener(this.checkForTimeoutToOpenOnboardPage)}sendOnboardPageSourceTelemetry(){const e=this.getOnboardPageSource();p.isntNil(e)&&(s.default.sendOnboardPageSource(e),this.setOnboardPageSource(null))}};r.default=E},{"./delayOnboardingSettings":138,"./portalUtilsBG":142,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.promise.js":437,"core/background/pwmSessionSettings":43,"core/background/telemetry/telemetryWrapper":55,"feature/nudge/nudgeController":94,"message-adapter/background":134}],138:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("core/background/baseSettings")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants"));const{utils:a}=i.default;class u extends o.default{async initialize(){await this.initSettingsContainer(s.default.DELAY_ONBOARDING_FLOW.SETTINGS_CONTAINER)}getDelayOnboardFlowStatus(){const e=this.getValue(s.default.DELAY_ONBOARDING_FLOW.DELAY_ONBOARD_FLOW);return a.isNil(e)?null:e}setDelayOnboardFlowStatus(e){a.isntNil(e)&&this.setValue(s.default.DELAY_ONBOARDING_FLOW.DELAY_ONBOARD_FLOW,e,(()=>{}))}}const l=new u;r.default=l},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.promise.js":437,"core/background/baseSettings":25}],139:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("feature/import/importers/importManager")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("urijs")),a=n(e("./portalUtilsBG")),u=n(e("./portalScripts")),l=n(e("core/background/globalSettings")),c=e("message-adapter/background"),d=e("core/background/commonUtilsBG"),f=e("telemetry/types");const{utils:p,logger:h,extensionAdapter:_}=i.default;const E=new class{constructor(){this.init=this.init.bind(this)}async init(){await this.checkForParamsInUrl()}setInstallQueryParams(e){const t="installsource",r="installSource",n=this.isParamPresent(e,t)?t:this.isParamPresent(e,r)?r:null;let o="";if(p.isNil(n))o=f.InstallPropertyDefaultValues.NONE;else{o=new s.default(e).query(!0)[n]}l.default.setInstallSource(o)}async setReferrerFromPortalTab(e){return new Promise((t=>{if(p.isNil(e)||p.isNil(e.url))return l.default.setInstallReferrer(f.InstallPropertyDefaultValues.NONE),void t();_.sendMessageToTab(e,{id:c.MESSAGES.PORTAL_INSTALL_FLOW.GET_INSTALL_INFO_FROM_PORTAL},(r=>{p.isNil(r)&&h.error("Failed to get referrer from portal tab.");const n=(0,d.hasValue)(null==r?void 0:r.referrer)?r.referrer:p.baseURL(e.url);l.default.setInstallReferrer(n||f.InstallPropertyDefaultValues.NONE),t()}))}))}isParamPresent(e,t){if(p.isNil(e)||p.isNil(t))return!1;try{const r=new s.default(e).query(!0);if(p.isntNil(r[t]))return!0}catch(e){}return!1}async checkForParamsInUrl(){try{const e=await u.default.getAllTabsPromise(),t=e.filter((e=>a.default.isLandingPageURL(e.url)));if(0!==t.length&&(await this.setReferrerFromPortalTab(t[0]),this.setInstallQueryParams(t[0].url),l.default.setInstallDomain(p.baseURL(t[0].url)),!0===this.isParamPresent(t[0].url,"partnerid")&&!0===a.default.setPartnerParams(t[0].url)))return;p.isNil(l.default.getInstallReferrer())&&l.default.setInstallReferrer(f.InstallPropertyDefaultValues.NONE),p.isNil(l.default.getInstallDomain())&&l.default.setInstallDomain(f.InstallPropertyDefaultValues.NONE);const r=e.filter((e=>p.isStorePageURL(e.url)&&a.default.isCurrentExtensionURL(e.url)));if(0===r.length)return;!0===this.isParamPresent(r[0].url,"partnerid")?a.default.setPartnerParams(r[0].url):!0===this.isParamPresent(r[0].url,"import")&&(r[0].tabId=r[0].id,o.default.setImportDiscontinueFlow(r[0],!0)),p.isNil(l.default.getInstallSource())&&this.setInstallQueryParams(r[0].url)}catch(e){h.debug(`Error while checking for import param in store url : ${e}`)}}};r.default=E},{"./portalScripts":141,"./portalUtilsBG":142,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.promise.js":437,"core/background/commonUtilsBG":27,"core/background/globalSettings":36,"feature/import/importers/importManager":83,"message-adapter/background":134,"telemetry/types":186,urijs:718}],140:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const{utils:{isNil:s,isntNil:a}}=i.default,{extensionAdapter:u}=i.default;const l=new class{constructor(){(0,o.default)(this,"portalInstallFlowBGConstants",{updateStoreURL:"e0681b81-a1c6-457f-9c1a-bfab5b301924",closeStoreURL:"51b7334f-2168-4ba9-a60a-104af553b98e",removeEnableAllListener:"8ea7c841-04db-46b6-8b23-24c3692a44ae"}),(0,o.default)(this,"_isCurrentExtensionsStoreURL",(e=>i.default.utils.isStorePageURL(e))),(0,o.default)(this,"_updateTabUrlFlow",((e,t)=>{if(s(e)||s(t))return;const r=u.getWindowIDForTab(e);a(r)&&u.focusWindow(r,(()=>{const r=i.default.extensionAdapter.getTabID(e);a(r)&&u.updateTabUrl(r,t,(()=>{u.activateTab(r)}))}))})),(0,o.default)(this,"_closeTabUrlFlow",(e=>{if(s(e))return;const t=i.default.extensionAdapter.getTabID(e);a(t)&&u.closeTab(t)})),(0,o.default)(this,"_updateOrCloseExtensionStoreURL",((e,t)=>{let r=this.portalInstallFlowBGConstants;e!==r.updateStoreURL&&e!==r.closeStoreURL||u.getActiveTab((n=>{this._isCurrentExtensionsStoreURL(n.url)?e===r.updateStoreURL?this._updateTabUrlFlow(n,t):this._closeTabUrlFlow(n):u.getAllTabs((n=>{n.forEach((n=>{this._isCurrentExtensionsStoreURL(n.url)&&(e===r.updateStoreURL?this._updateTabUrlFlow(n,t):this._closeTabUrlFlow(n))}))}))}))})),(0,o.default)(this,"handleMessage",((e,t,r)=>{let n=e.name,o=this.portalInstallFlowBGConstants;switch(n){case o.updateStoreURL:let t=e.message;this._updateOrCloseExtensionStoreURL(o.updateStoreURL,t);break;case o.closeStoreURL:this._updateOrCloseExtensionStoreURL(o.closeStoreURL)}})),u.addMessageListener(this.handleMessage)}};r.default=l},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211}],141:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.promise.js");var o=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),i=n(e("core/background/signin")),s=n(e("feature/nudge/nudgeController")),a=n(e("urijs")),u=n(e("../../common/constants")),l=n(e("../../common/global")),c=n(e("./delayOnboarding")),d=n(e("./portalFlowHelper"));const{extensionAdapter:f,utils:{isNil:p,isntNil:h}}=o.default;const _=new class{async doExecuteScript(e,t){return new Promise(((r,n)=>{p(e)||p(t)?n():chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:[t]}).then((e=>{const i=f.getLastError();if(p(e)||h(i))return o.default.logger.error(`Failed during execute script : ${t}`),void n();r()}))}))}async executeScripts(e){try{var t;"Chrome"!==o.default.globals.BROWSER&&"Edge"!==o.default.globals.BROWSER||(await this.doExecuteScript(e,"vendor/libs.common.js"),await this.doExecuteScript(e,"content/scripts/portalInstallFlowCS.js")),o.default.globals.BROWSER===(null===(t=o.default.constants.BROWSER_TYPE)||void 0===t?void 0:t.EDGE)&&await this.doExecuteScript(e,"content/scripts/delayOnboardingComm.js")}catch(e){o.default.logger.error(e.message)}}getAllTabsPromise(){return new Promise(((e,t)=>{try{f.getAllTabs((t=>{e(t)}))}catch(e){t(e)}}))}async onInstall(){try{const e=await this.getAllTabsPromise();let t=!1;return e.forEach((e=>{const{url:r}=e;if(p(r))return;const n=new a.default(r);if(n.domain()!==u.default.ONBOARDING_PORTAL_DOMAIN)return;const i=e&&e.id;"Chrome"!==o.default.globals.BROWSER&&"Firefox"!==o.default.globals.BROWSER&&"Edge"!==o.default.globals.BROWSER||i&&this.executeScripts(i);if(!1===u.default.ONBOARDING_PORTAL_SUBDOMAIN.includes(n.subdomain()))return;t=!0;const s=new a.default(r).query(!0);l.default.cguid=s[u.default.CGUID]})),await d.default.init(),t&&h(l.default.cguid)?await Promise.resolve(l.default.cguid):await Promise.resolve("Not a portal page")}catch(e){return Promise.reject(e)}}async checkAndOpenOnboardingPage(){var e,t;if(o.default.globals.BROWSER===(null===(e=o.default.constants.BROWSER_TYPE)||void 0===e?void 0:e.FIREFOX))return;if(o.default.utils.isExtnRunningInNSB())return;if(o.default.globals.BROWSER!==(null===(t=o.default.constants.BROWSER_TYPE)||void 0===t?void 0:t.EDGE))return void s.default.openNudgeTab();c.default.init(),await c.default.checkForLandingPageAndResolveEnableAllComm(),await c.default.checkForEnableAllAndResolveOpenOnboarding();await i.default.isNASignedIn()||s.default.openNudgeTab()}};r.default=_},{"../../common/constants":13,"../../common/global":15,"./delayOnboarding":137,"./portalFlowHelper":139,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.promise.js":437,"core/background/signin":47,"feature/nudge/nudgeController":94,urijs:718}],142:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.regexp.exec.js");var o=n(e("common/constants")),i=n(e("urijs")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=n(e("feature/partnerSupport/partnerParams")),u=n(e("common/partnerConstants"));const{utils:l}=s.default,c={"norton.com":o.default.ONBOARDING_PORTAL_SUBDOMAIN};const d=new class{getCurrentWindowLocation(){return document.location.href}isLandingPageURL(e){if(l.isNil(e)||!l.isString(e))return!1;const t=new i.default(e);return"https"===t.protocol()&&!(!c.hasOwnProperty(t.domain())||!c[t.domain()].includes(t.subdomain()))}setPartnerParams(e){const t=new i.default(e).query(!0),r=t.partnerid,n=t.puid,o=t.layout;return(!s.default.utils.isNil(r)||!s.default.utils.isNil(n))&&(!!this.isValidPartnerInfo(r,n)&&(a.default.setPartnerId(r),a.default.setPuid(n),s.default.utils.isNil(o)?a.default.setLayoutType("sos"):a.default.setLayoutType(o),!0))}isValidPartnerInfo(e,t){return 0!==Object.entries(u.default.SUPPORTED_PARTNERS).filter((r=>r[1].PID===e&&r[1].PUID===t)).length}is4PillarPageURL(e){if(l.isNil(e)||!l.isString(e))return!1;const t=new i.default(e);if("https"!==t.protocol())return!1;const r=new i.default(o.default.ONBOARDING_URL_SEARCH);return r.domain()===t.domain()&&r.subdomain()===t.subdomain()}isCurrentExtensionURL(e){const t=s.default.globals.BROWSER,r=new i.default(e),n=r.path().split("/");switch(t){case"Chrome":case"Edge":if(n.includes(s.default.extensionAdapter.getExtensionId()))return!0;break;case"Safari":{const e=r.search(!0).id,t=s.default.extensionAdapter.getExtensionId().split("-")[0];if(e&&e.startsWith(t))return!0}break;case"Firefox":if(n.includes(o.default.STORE_URL_NAME))return!0}return!1}checkAndGetTabWithImportParam(e){return e.find((e=>{const t=new i.default(e.url).query(!0);return l.isntNil(t.import)}))}};r.default=d},{"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"common/partnerConstants":20,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.regexp.exec.js":442,"feature/partnerSupport/partnerParams":96,urijs:718}],143:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.BaseGlobalEventPropertiesHandler=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("./constants"),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=n(e("configuration")),u=e("telemetry/types/globalEventProperty.types"),l=n(e("common/constants")),c=e("telemetry/constants/telemetryActions"),d=n(e("feature/partnerSupport/partnerParams"));const{COMMON:f,USER_ACCOUNT:p}=i.TELEMETRY_KEYS;r.BaseGlobalEventPropertiesHandler=class{constructor(e){(0,o.default)(this,"baseGlobalEventProperties",{[f.PROPERTIES.APP_NAME]:`${a.default.LEGACY_PRODUCT_NAME_IN_TELMETRY}_${s.default.extensionAdapter.getExtensionId()}`,[f.PROPERTIES.APP_VERSION]:l.default.VERSION,[f.PROPERTIES.BRAND_NAME]:a.default.brandingName,[f.PROPERTIES.PLATFORM]:u.Platform}),this.telemetryService=e,this.setBaseGlobalEventProperties(),this.setProperty=this.setProperty.bind(this),this.removeProperty=this.removeProperty.bind(this),this.setPartnerProperty=this.setPartnerProperty.bind(this),this.removeGlobalEventProperties=this.removeGlobalEventProperties.bind(this),this.baseSignInSuccessEventHandler=this.baseSignInSuccessEventHandler.bind(this),this.baseInstallEventHandler=this.baseInstallEventHandler.bind(this)}setProperty(e){var t;null===(t=this.telemetryService.eventTracker.globalProperties)||void 0===t||t.set(e)}removeProperty(e){var t;null===(t=this.telemetryService.eventTracker.globalProperties)||void 0===t||t.remove(e)}removeGlobalEventProperties(e){e.map((e=>this.removeProperty(e)))}setPartnerProperty(){const e=d.default.retrievePartnerInfo();this.setProperty({[p.PROPERTIES.PARTNER]:e!==l.default.NA_ACCOUNT?e:a.default.brandingName})}handleTelemetryPreferenceChange(){}setBaseGlobalEventProperties(){this.setProperty(this.baseGlobalEventProperties),this.setPartnerProperty()}baseSignInSuccessEventHandler(){this.setPartnerProperty()}baseInstallEventHandler(){this.setPartnerProperty()}getTelemetryDataKeys(e){return{}}getActionToHandlerMethodMapping(){return{[c.TELEMETRY_ACTIONS.LIFECYCLE.INSTALL]:this.baseInstallEventHandler,[c.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN.SIGN_IN_COMPLETED]:this.baseSignInSuccessEventHandler}}}},{"./constants":144,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,configuration:3,"feature/partnerSupport/partnerParams":96,"telemetry/constants/telemetryActions":174,"telemetry/types/globalEventProperty.types":185}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./telemetryKeys");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))},{"./telemetryKeys":145}],145:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TELEMETRY_KEYS=void 0;r.TELEMETRY_KEYS={LIFECYCLE:{EVENTS:{INSTALL:"Install",HEARTBEAT:"Heartbeat",APP_OPEN:"App Open"},PROPERTIES:{INSTALL_DATE:"Install Date",TELEMETRY_ENABLED:"Telemetry Enabled",ONBOARDING_COMPLETED:"Onboarding Completed",VAULT_ACTIVE:"Vault Active",CONTEXT_SCREEN:"Context Screen",CONTEXT_ACTION:"Context Action"}},IMPORT:{EVENTS:{INITIATED:"Import Initiated",DISPLAYED:"Import Shown",COMPLETED:"Import Completed",FAILED:"Import Failed",CANCELLED:"Import Cancelled"},PROPERTIES:{TYPE:"Type",ERROR:"Error"}},EXPORT:{EVENTS:{INITIATED:"Export Initiated",COMPLETED:"Export Completed",CANCELLED:"Export Cancelled",FAILED:"Export Failed"},PROPERTIES:{TYPE:"Type",ERROR:"Error"}},VAULT_UNLOCK_AND_LOCK:{EVENTS:{UNLOCK_SHOWN:"Unlock Shown",UNLOCK_COMPLETED:"Unlock Completed",UNLOCK_FAILED:"Unlock Failed",UNLOCK_CLOSED:"Unlock Closed",LOCKED:"Locked"},PROPERTIES:{METHOD:"Method",TYPE:"Type",UNLOCKED:"Unlocked",SIGNED_IN:"Signed In",LAST_USED_UNLOCK_METHOD:"Last Used Unlock Method",CAUSE:"Cause",ERROR:"Error"}},SETTINGS_CHANGE:{EVENTS:{ALWAYS_REQUIRE_VAULT_PASSWORD_CHANGED:"Always Require Vault Password Changed",DELETE_VAULT_CLICKED:"Delete Vault Clicked",ICONS_SETTINGS_CHANGED:"Icons Settings Changed",MANAGE_DEVICES_CLICKED:"Manage Devices Clicked",SETTINGS_SHOWN:"Settings Shown",TELEMETRY_SETTINGS_CHANGED:"Telemetry Settings Changed",RECOVERY_SETUP_CLICKED:"Recovery Setup Clicked",RECOVERY_OPTIONS_SHOWN:"Recovery Options Shown",CREATE_RECOVERY_KEY_CLICKED:"Create Recovery Key Clicked",RECOVERY_MOBILE_CLICKED:"Recovery Mobile Clicked",RECOVERY_MOBILE_SHOWN:"Recovery Mobile Shown",RECOVERY_KEY_CONFIRMATION_SHOWN:"Recovery Key Confirmation Shown",RECOVERY_KEY_CONFIRMATION_DOWNLOAD:"Recovery Key Confirmation Download",RECOVERY_KEY_CONFIRMATION_CANCEL:"Recovery Key Confirmation Cancel",RECOVERY_KEY_CREATION_SUCCESS:"Recovery Key Creation Success",AUTO_UNLOCK_SETTING_CHANGED:"Auto Unlock Setting Changed"},PROPERTIES:{REQUIRE_VAULT_PASSWORD_CHANGE:"Require Vault Password Change",ICON_SETTINGS_STATE:"Icon Settings State",TELEMETRY_SETTINGS_STATE:"Telemetry Settings State",CTA:"Label for CTA",DAYS:"Days",SETTING_ENABLED:"Setting Enabled"}},PASSWORDLESS_UNLOCK:{EVENTS:{INITIATED:"Passwordless Vault Unlock Setup Initiated",DISPLAYED:"Passwordless Vault Unlock Settings Displayed",DEVICE_DROPDOWN:"Passwordless Vault Unlock Device Dropdown",ENABLE:"Passwordless Vault Unlock Enable",DISABLE:"Passwordless Vault Unlock Disabled",CANCEL:"Passwordless Vault Unlock Cancel",SETUP_COMPLETE:"Passwordless Vault Unlock Setup Completed",EDIT:"Passwordless Vault Unlock Edit Options",CHANGE_DEVICE:"Passwordless Vault Unlock Change Device Clicked"},PROPERTIES:{CTA:"Label for CTA"}},ONBOARDING:{EVENTS:{CREATE_VAULT_CLOSED:"Create Vault Closed",CREATE_VAULT_COMPLETED:"Create Vault Completed",CREATE_VAULT_EXPLAINED:"Create Vault Explained",CREATE_VAULT_FAILED:"Create Vault Failed",CREATE_VAULT_INITIATED:"Create Vault Initiated",LANDING_UI_SHOWN:"Landing UI Shown",MOBILE_SIGN_IN_CLICKED:"Mobile Sign In Clicked",ONBOARDING_COMPLETED:"Onboarding Completed",PIN_SHOWN:"Pin Shown",PIN_FINISHED:"Pin Finished",SEAMLESS_VAULT_SETUP_COMPLETED:"Seamless Vault Setup Completed",SET_DEFAULT_ALLOWED:"Set Default Allowed",SET_DEFAULT_DENIED:"Set Default Denied",SET_DEFAULT_INITIATED:"Set Default Initiated",SET_DEFAULT_SHOWN:"Set Default Shown",SET_DEFAULT_SKIPPED:"Set Default Skipped",SIGN_IN_CLICKED:"Sign In Clicked",QR_CODE_SHOWN:"QR Code Shown",ONBOARDING_RECOVERY_SHOWN:"Onboarding Recovery Shown",ONBOARDING_RECOVERY_DOWNLOAD_CLICKED:"Onboarding Recovery Download Clicked",ONBOARDING_RECOVERY_DOWNLOAD_CLICKED_RESET_FLOW:"Onboarding Recovery Download Clicked Reset Flow",ONBOARDING_RECOVERY_CONFIRMATION_SHOWN:"Onboarding Recovery Confirmation Shown",ONBOARDING_RECOVERY_CONFIRMATION_DOWNLOAD:"Onboarding Recovery Confirmation Download",ONBOARDING_RECOVERY_CONFIRMATION_CANCEL:"Onboarding Recovery Confirmation Cancel",ONBOARDING_RECOVERY_KEY_CREATION_SUCCESS:"Onboarding Recovery Key Creation Success",ONBOARDING_RECOVERY_NEXT_CLICKED:"Onboarding Recovery Next Clicked",POST_ONBOARDING_CTA_CLICKED:"Post Onboarding CTA Clicked",POST_ONBOARDING_GUIDE_SHOWN:"Post Onboarding Guide Shown",POST_ONBOARDING_GUIDE_CHANGED:"Post Onboarding Guide Changed",POST_ONBOARDING_GUIDE_CLOSED:"Post Onboarding Guide Closed",IMPORT_CLICKED:"Import Clicked"},PROPERTIES:{BENEFITS_SHOWN:"Benefits Shown",DEFAULT_ENABLED:"Default Enabled",ENABLED_PERMISSIONS:"Enabled Permissions",ONBOARDING_COMPLETED:"Onboarding Completed",SKIPPED_PERMISSIONS:"Skipped Permissions",CARD_SHOWN:"Card Shown",ACTION:"Action",FLOW:"Flow"}},USER_ACCOUNT:{EVENTS:{SIGN_IN_SUCCESSFUL:"Sign In Successful",SIGN_OUT:"Sign Out"},PROPERTIES:{MID:"MID",PARTNER:"Partner",SIGNED_IN:"Signed In",CONNECTED_DEVICES:"Connected Devices",USER_CREATION_DATE:"User Creation Date",TYPE:"Type",CAUSE:"Cause",ERROR_DETAILS:"Error Details"}},ENTRIES_RELATED:{EVENTS:{VAULT_SYNC:"Vault Sync",LOGIN_GENERATED:"Login Generated",ITEM_ADD:"Item Add",ITEM_DETAILS:"Item Details",ITEM_EDIT:"Item Edit",ITEM_LIST_DISPLAYED:"Item List Displayed",ITEM_SAVE:"Item Save",ITEM_SAVED:"Item Saved",ITEM_EDITED:"Item Edited",ITEM_DELETED:"Item Deleted",ITEM_USED:"Item Used",ITEM_ERROR:"Item Error",TAG_ADDED:"Tag Added",TAG_REMOVED:"Tag Removed"},PROPERTIES:{ACTION:"Action",AUTOFILL_SUCCESS:"Autofill Success",CHANGES:"Changes",DISTINCT_PASSWORD:"Distinct Passwords",DISTINCT_USERNAME:"Distinct Usernames",DOMAIN:"Domain",ERROR:"Error",FILTERED_BY:"Filtered By",LIST:"List",PASSWORD_PROTECTED:"Password Protected",RECOMMENDATIONS_CHOSEN:"Recommendation Choosen",RECOMMENDED_DOMAIN:"Recommended Domain",SORTED_BY:"Sorted By",SUBDOMAIN:"Subdomain",TOTAL_ADDRESSES:"Total Addresses",TOTAL_BANK_ACCOUNTS:"Total Bank Accounts",TOTAL_CREDIT_CARDS:"Total Credit Cards",TOTAL_NOTES:"Total Notes",TOTAL_LOGINS:"Total Logins",TOTAL_LOGINS_GENERATED:"Total Logins Generated",USED_IN:"Used In",TYPE:"Type"}},RECOVERY:{EVENTS:{INFO_UPDATED:"Recovery Info Updated",FORGOT_VAULT_PASSWORD_CLICKED:"Forgot Vault Password Clicked",RECOVERY_SHOWN:"Recovery Shown",SHOW_HINT:"Show Hint",MOBILE_RECOVERY_CLICKED:"Mobile Recovery Clicked",MOBILE_RECOVERY_INSTRUCTIONS_SHOWN:"Mobile Recovery Instructions Shown",MOBILE_RECOVERY_INSTRUCTIONS_GO_TO_VAULT_CLICKED:"Mobile Recovery Instructions Go To Vault Clicked",MOBILE_RECOVERY_INSTRUCTIONS_BACK:"Mobile Recovery Instructions Back",USE_RECOVERY_KEY_CLICKED:"Use Recovery Key Clicked",RECOVERY_KEY_BACK:"Recovery Key Back",RECOVERY_KEY_SUCCESS:"Recovery Key Success",RECOVERY_KEY_ERROR:"Recovery Key Error",RESET_VAULT_CLICKED:"Reset Vault Clicked",RESET_VAULT_SCREEN_SHOWN:"Reset Vault Screen Shown",RESET_VAULT_CONFIRMED:"Reset Vault Confirmed",RESET_VAULT_COMPLETED:"Reset Vault Completed"},PROPERTIES:{RECOVERY_KEY_ENABLED:"Recovery Key Enabled",AVAILABLE_RECOVERY_OPTIONS:"Available Recovery Options",ACTION:"Action",CAUSE:"Cause"}},PASSWORD_RELATED_AND_INFIELD_EXPERIENCES:{EVENTS:{ITEM_FILL_DISPLAYED:"Item Fill Displayed",SAVE_NOTIFICATION_SHOWN:"Save Notification Shown",SAVE_NOTIFICATION_CLICKED:"Save Notification Clicked",MOT_WARNING_SHOWN:"MOT Warning Shown",MOT_WARNING_CLICKED:"MOT Warning Clicked",PASSWORD_GENERATOR_DISPLAYED:"Password Generator Displayed",PASSWORD_GENERATED:"Password Generated",CHANGE_PASSWORD_INITIATED:"Change Password Intitiated",AUTOCHANGE_PASSWORD_INITIATED:"Autochange Password Initiated",AUTOCHANGE_PASSWORD_COMPLETED:"Autochange Password Completed",INFIELD_SIGN_IN_DISPLAYED:"Infield Sign In Displayed",INFIELD_UNLOCK_DISPLAYED:"Infield Unlock Displayed",INFIELD_SIGN_IN_CLICKED:"Infield Sign In Clicked"},PROPERTIES:{CATEGORY:"Category",TYPE:"Type",ERROR:"Error",REASON:"Reason",DOMAIN:"Domain",SUBDOMAIN:"Subdomain",ACTION:"Action",LENGTH:"Length",SPECIAL_CHARACTERS:"Special Characters",NUMBERS:"Numbers",LETTERS:"Letters",MIXED_CASE:"Mixed Case",BUTTON:"Button",DETAIL:"Detail"}},CHANGE_VAULT_PASSWORD_EVENTS:{EVENTS:{CHANGE_VAULT_PASSWORD_INITIATED:"Change Vault Password Initiated",CHANGE_VAULT_PASSWORD_COMPLETED:"Change Vault Password Completed",CHANGE_VAULT_PASSWORD_FAILED:"Change Vault Password Failed"},PROPERTIES:{ERROR:"error"}},FEEDBACK:{EVENTS:{FEEDBACK_INITIATED:"Feedback Initiated"}},CREATE_AND_SIGN_IN_EVENTS:{EVENTS:{SIGN_IN_STARTED:"Sign In Started",SIGN_IN_COMPLETED:"Sign In Completed",SIGN_IN_FAILED:"Sign In Failed"},PROPERTIES:{ONBOARDING:"Onboarding",SIGN_IN_METHOD:"Sign In Method",SIGN_IN_PROVIDER:"Sign In Provider",USER_TYPE:"User Type",ERROR:"Error"}},WAX:{EVENTS:{WAX_ML_TELEMETRY:"Wax ML Telemetry"},PROPERTIES:{DOMAIN:"Domain",SUBDOMAIN:"Subdomain",MATCH_STATUS:"Match Status",FIELDS:"Fields"}},COMMON:{PROPERTIES:{CATEGORY:"Category",CONTEXT:"Context",APP_VERSION:"App Version",APP_NAME:"App Name",BRAND_NAME:"Brand Name",PLATFORM:"Platform",TOUCH_POINT:"Touchpoint",INSTALL_SOURCE:"Install Source",INSTALL_TYPE:"Install Type",INSTALL_REFERRER:"Install Referrer",INSTALL_DOMAIN:"Install Domain"}}}},{}],146:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultGlobalEventPropertiesHandler=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("core/background/globalSettings")),a=e("telemetry/types/globalEventProperty.types"),u=e("telemetry/constants"),l=n(e("common/constants")),c=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),d=e("./constants"),f=e("./helper/TelemetryHelper"),p=n(e("core/background/extension/extensionInfo")),h=e("./baseGlobalEventPropertiesHandler");const{isntNil:_,isNil:E}=i.default.utils,g={Chrome:"Chrome Store",Firefox:"Firefox Addon",Safari:"App Store",Edge:"Edge Store",NSB:"Secure Browser"},{ENTRIES_RELATED:{VAULT_SYNC:m}}=u.TELEMETRY_ACTIONS,{USER_ACCOUNT:y,VAULT_UNLOCK_AND_LOCK:S,ONBOARDING:T,ENTRIES_RELATED:A,RECOVERY:b}=d.TELEMETRY_KEYS;class O extends h.BaseGlobalEventPropertiesHandler{constructor(e){super(e),(0,o.default)(this,"telemetryDataKeyConfiguration",{[m]:{event:A.EVENTS.VAULT_SYNC,propertyKeys:{totalLogins:A.PROPERTIES.TOTAL_LOGINS,distinctPasswords:A.PROPERTIES.DISTINCT_PASSWORD,distinctUsernames:A.PROPERTIES.DISTINCT_USERNAME,totalAddresses:A.PROPERTIES.TOTAL_ADDRESSES,totalCreditCards:A.PROPERTIES.TOTAL_CREDIT_CARDS,totalBankAccounts:A.PROPERTIES.TOTAL_BANK_ACCOUNTS,totalNotes:A.PROPERTIES.TOTAL_NOTES}}}),(0,o.default)(this,"defaultGlobalEventProperties",{[y.PROPERTIES.SIGNED_IN]:!1,[S.PROPERTIES.UNLOCKED]:!1}),(0,o.default)(this,"propertiesForExistingUser",{[d.TELEMETRY_KEYS.COMMON.PROPERTIES.INSTALL_SOURCE]:a.InstallPropertyDefaultValues.EXISTING,[d.TELEMETRY_KEYS.COMMON.PROPERTIES.INSTALL_REFERRER]:a.InstallPropertyDefaultValues.EXISTING,[d.TELEMETRY_KEYS.COMMON.PROPERTIES.INSTALL_TYPE]:a.InstallPropertyDefaultValues.EXISTING}),this.setDefaultGlobalEventProperties(!0),this.setDefaultEnabledGlobalEventProperty=this.setDefaultEnabledGlobalEventProperty.bind(this),this.onboardingCompletedEvent=this.onboardingCompletedEvent.bind(this),this.setDefaultAllowedEvent=this.setDefaultAllowedEvent.bind(this),this.signedInSuccessfullyEvent=this.signedInSuccessfullyEvent.bind(this),this.unlockVaultCompletedEvent=this.unlockVaultCompletedEvent.bind(this),this.lockVaultEvent=this.lockVaultEvent.bind(this),this.vaultSyncEvent=this.vaultSyncEvent.bind(this),this.lockVaultEvent=this.lockVaultEvent.bind(this),this.handleInstallEvent=this.handleInstallEvent.bind(this),this.handleUpdateEvent=this.handleUpdateEvent.bind(this),this.handleExtensionTouchPointUpdatedEvent=this.handleExtensionTouchPointUpdatedEvent.bind(this),this.handleRecoveryInfoUpdatedEvent=this.handleRecoveryInfoUpdatedEvent.bind(this)}getInstallPropertiesIfAvailable(){const e=s.default.getInstallSource(),t=s.default.getInstallReferrer(),r=s.default.getInstallDate(),n=i.default.utils.isExtnRunningInNSB()?g.NSB:g[i.default.globals.BROWSER];if(!(e||t||r))return null;return{[d.TELEMETRY_KEYS.COMMON.PROPERTIES.INSTALL_SOURCE]:e||a.InstallPropertyDefaultValues.NONE,[d.TELEMETRY_KEYS.COMMON.PROPERTIES.INSTALL_REFERRER]:t||a.InstallPropertyDefaultValues.NONE,[d.TELEMETRY_KEYS.COMMON.PROPERTIES.INSTALL_TYPE]:n}}setInstallDomainProperty(){const e=s.default.getInstallDomain();if(_(e))this.setProperty({[d.TELEMETRY_KEYS.COMMON.PROPERTIES.INSTALL_DOMAIN]:e});else{const e=s.default.getValue(l.default.FRESH_INSTALL);_(e)&&!1===e&&(this.setProperty({[d.TELEMETRY_KEYS.COMMON.PROPERTIES.INSTALL_DOMAIN]:a.InstallPropertyDefaultValues.EXISTING}),s.default.setInstallDomain(a.InstallPropertyDefaultValues.EXISTING))}}async setDefaultEnabledGlobalEventProperty(){const e=await(0,f.isPWMSetAsDefault)();this.setProperty({[T.PROPERTIES.DEFAULT_ENABLED]:e})}lockVaultEvent(){this.setProperty({[S.PROPERTIES.UNLOCKED]:!1})}setDefaultGlobalEventProperties(e=!1){e||this.setBaseGlobalEventProperties(),this.setProperty(this.defaultGlobalEventProperties),this.setProperty({[y.PROPERTIES.MID]:p.default.getClientID(),[y.PROPERTIES.SIGNED_IN]:_(c.default.session.getNAGUID())}),this.setProperty({[T.PROPERTIES.ONBOARDING_COMPLETED]:s.default.getOnboardingStep()===l.default.ONBOARDING.STEPS.ONBOARDED}),this.setDefaultEnabledGlobalEventProperty();const t=s.default.getValue(l.default.FRESH_INSTALL),r=this.getInstallPropertiesIfAvailable();_(r)?this.setProperty(r):_(t)&&!1===t&&this.setProperty(this.propertiesForExistingUser),this.setInstallDomainProperty()}handleInstallEvent(){const e=s.default.getValue(l.default.FRESH_INSTALL),t=this.getInstallPropertiesIfAvailable();_(e)&&!1===e||(_(t)&&this.setProperty(t),this.setInstallDomainProperty(),this.setPartnerProperty())}handleUpdateEvent(){const e=s.default.getValue(l.default.FRESH_INSTALL),t=this.getInstallPropertiesIfAvailable();_(e)&&!0===e||(E(t)&&this.setProperty(this.propertiesForExistingUser),this.setInstallDomainProperty())}onboardingCompletedEvent(e,t){this.setProperty({[T.PROPERTIES.ONBOARDING_COMPLETED]:s.default.getOnboardingStep()===l.default.ONBOARDING.STEPS.ONBOARDED})}async setDefaultAllowedEvent(e,t){await this.setDefaultEnabledGlobalEventProperty()}signedInSuccessfullyEvent(e,t){this.setProperty({[y.PROPERTIES.SIGNED_IN]:!0}),this.setPartnerProperty()}unlockVaultCompletedEvent(e,t){this.setProperty({[S.PROPERTIES.UNLOCKED]:!0}),s.default.setIsVaultActive(!0)}vaultSyncEvent(e,t){if(E(t)||0===Object.keys(t).length)return;const r=(0,f.buildPropertiesWithDataKeys)(this.telemetryDataKeyConfiguration[m],t);this.setProperty(r)}handleRecoveryInfoUpdatedEvent(e,t){E(t)||this.setProperty({[b.PROPERTIES.RECOVERY_KEY_ENABLED]:null==t?void 0:t.recoveryKeyEnabled})}getTelemetryDataKeys(e){var t;return null!==(t=this.telemetryDataKeyConfiguration[e])&&void 0!==t?t:{}}handleExtensionTouchPointUpdatedEvent(e,t){E(t)||this.setProperty({[d.TELEMETRY_KEYS.COMMON.PROPERTIES.TOUCH_POINT]:null==t?void 0:t.touchPoint})}getActionToHandlerMethodMapping(){return{[u.TELEMETRY_ACTIONS.LIFECYCLE.INSTALL]:this.handleInstallEvent,[u.TELEMETRY_ACTIONS.LIFECYCLE.UPDATE]:this.handleUpdateEvent,[u.TELEMETRY_ACTIONS.GENERIC_ACTION.TOUCH_POINT_UPDATED]:this.handleExtensionTouchPointUpdatedEvent,[u.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_COMPLETED]:this.onboardingCompletedEvent,[u.TELEMETRY_ACTIONS.ONBOARDING.SET_DEFAULT_ALLOWED]:this.setDefaultAllowedEvent,[u.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN.SIGN_IN_COMPLETED]:this.signedInSuccessfullyEvent,[u.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_COMPLETED]:this.unlockVaultCompletedEvent,[u.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.LOCKED]:this.lockVaultEvent,[u.TELEMETRY_ACTIONS.ENTRIES_RELATED.VAULT_SYNC]:this.vaultSyncEvent,[u.TELEMETRY_ACTIONS.RECOVERY.RECOVERY_INFO_UPDATED]:this.handleRecoveryInfoUpdatedEvent}}}r.DefaultGlobalEventPropertiesHandler=O},{"./baseGlobalEventPropertiesHandler":143,"./constants":144,"./helper/TelemetryHelper":169,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"common/constants":13,"core-js/modules/es.promise.js":437,"core/background/extension/extensionInfo":32,"core/background/globalSettings":36,"telemetry/constants":173,"telemetry/types/globalEventProperty.types":185}],147:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("../constants/telemetryKeys"),a=e("./baseEventHandler");const u=i.TELEMETRY_ACTIONS.PASSWORDLESS_UNLOCK,{EVENTS:l,PROPERTIES:c}=s.TELEMETRY_KEYS.PASSWORDLESS_UNLOCK;class d extends a.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[u.INITIATED]:{event:l.INITIATED,propertyKeys:{cta:c.CTA,context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.DISPLAYED]:{event:l.DISPLAYED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.DEVICE_DROPDOWN]:{event:l.DEVICE_DROPDOWN,propertyKeys:{}},[u.ENABLE]:{event:l.ENABLE,propertyKeys:{}},[u.DISABLE]:{event:l.DISABLE,propertyKeys:{}},[u.CANCEL]:{event:l.CANCEL,propertyKeys:{}},[u.SETUP_COMPLETE]:{event:l.SETUP_COMPLETE,propertyKeys:{}},[u.EDIT]:{event:l.EDIT,propertyKeys:{}},[u.CHANGE_DEVICE]:{event:l.CHANGE_DEVICE,propertyKeys:{}}}),this.sendEvent=this.sendEvent.bind(this)}getActionToHandlerMethodMapping(){return{[u.INITIATED]:this.sendEvent,[u.DISPLAYED]:this.sendEvent,[u.DEVICE_DROPDOWN]:this.sendEvent,[u.ENABLE]:this.sendEvent,[u.DISABLE]:this.sendEvent,[u.CANCEL]:this.sendEvent,[u.SETUP_COMPLETE]:this.sendEvent,[u.EDIT]:this.sendEvent,[u.CHANGE_DEVICE]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=d},{"../constants/telemetryKeys":145,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"telemetry/constants":173}],148:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/objectWithoutProperties"));e("core-js/modules/es.promise.js");var i=n(e("@babel/runtime/helpers/defineProperty")),s=e("telemetry/constants"),a=e("telemetry/background/helper/TelemetryHelper"),u=e("../baseEventHandler"),l=e("../../constants");const c=["recommendedUrl"],d=["url"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{EVENTS:h,PROPERTIES:_}=l.TELEMETRY_KEYS.ENTRIES_RELATED,E=s.TELEMETRY_ACTIONS.ENTRIES_RELATED,g=l.TELEMETRY_KEYS.COMMON.PROPERTIES;class m extends u.BaseEventHandler{constructor(e,t){super(e,t),(0,i.default)(this,"telemetryDataKeyConfiguration",{[E.ITEM_USED]:{event:h.ITEM_USED,propertyKeys:{action:_.ACTION,autofillSuccess:_.AUTOFILL_SUCCESS,category:g.CATEGORY,context:g.CONTEXT,domain:_.DOMAIN,passwordProtected:_.PASSWORD_PROTECTED,subDomain:_.SUBDOMAIN,usedIn:_.USED_IN}},[E.ITEM_SAVE]:{event:h.ITEM_SAVE,propertyKeys:{category:g.CATEGORY,context:g.CONTEXT,recommendedDomain:_.RECOMMENDED_DOMAIN,recommendationChosen:_.RECOMMENDATIONS_CHOSEN}}}),this.sendEvent=this.sendEvent.bind(this),this.sendItemUsedTelemetry=this.sendItemUsedTelemetry.bind(this),this.sendItemSaveTelemetry=this.sendItemSaveTelemetry.bind(this)}sendItemSaveTelemetry(e,t={}){if(!t.recommendedUrl&&!t.recommendedDomain)return Promise.resolve({status:1,error:null});const r=(0,a.getUrlDomainForTelemetry)(t.recommendedUrl),{recommendedUrl:n}=t,i=(0,o.default)(t,c);return this.sendEvent(e,p(p({},i),{},{recommendedDomain:r}))}sendItemUsedTelemetry(e,t={}){if(!(t.url||t.domain&&t.subDomain))return Promise.resolve({status:1,error:null});const r=t.domain||(0,a.getUrlDomainForTelemetry)(t.url),n=t.subDomain||(0,a.getUrlSubDomainForTelemetry)(t.url),{url:i}=t,s=(0,o.default)(t,d);return this.sendEvent(e,p(p({},s),{},{domain:r,subDomain:n}))}getActionToHandlerMethodMapping(){return{[s.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVE]:this.sendItemSaveTelemetry,[s.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_USED]:this.sendItemUsedTelemetry}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=m},{"../../constants":144,"../baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@babel/runtime/helpers/objectWithoutProperties":209,"core-js/modules/es.promise.js":437,"telemetry/background/helper/TelemetryHelper":169,"telemetry/constants":173}],149:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.registeredDefaultProperties=r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("../baseEventHandler"),a=e("../../constants"),u=n(e("common/constants")),l=e("core/background/commonUtilsBG"),c=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"));const{EVENTS:d}=a.TELEMETRY_KEYS.USER_ACCOUNT,f=i.TELEMETRY_ACTIONS.USER_ACCOUNT,{COMMON:p,ENTRIES_RELATED:h,RECOVERY:_,USER_ACCOUNT:E,ONBOARDING:g,VAULT_UNLOCK_AND_LOCK:m}=a.TELEMETRY_KEYS,y=r.registeredDefaultProperties=[h.PROPERTIES.TOTAL_LOGINS,h.PROPERTIES.DISTINCT_PASSWORD,h.PROPERTIES.DISTINCT_USERNAME,h.PROPERTIES.TOTAL_ADDRESSES,h.PROPERTIES.TOTAL_CREDIT_CARDS,h.PROPERTIES.TOTAL_BANK_ACCOUNTS,h.PROPERTIES.TOTAL_NOTES,E.PROPERTIES.SIGNED_IN,m.PROPERTIES.UNLOCKED,p.PROPERTIES.INSTALL_SOURCE,p.PROPERTIES.INSTALL_REFERRER,p.PROPERTIES.INSTALL_TYPE,p.PROPERTIES.INSTALL_DOMAIN,g.PROPERTIES.DEFAULT_ENABLED,m.PROPERTIES.UNLOCKED,E.PROPERTIES.MID,E.PROPERTIES.SIGNED_IN,g.PROPERTIES.ONBOARDING_COMPLETED,_.PROPERTIES.RECOVERY_KEY_ENABLED,p.PROPERTIES.TOUCH_POINT];class S extends s.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[f.SIGN_OUT]:{event:d.SIGN_OUT,propertyKeys:{}}}),this.sendEvent=this.sendEvent.bind(this),this.signedOutEvent=this.signedOutEvent.bind(this),this.updateEvent=this.updateEvent.bind(this)}signedOutEvent(){const e=[h.PROPERTIES.TOTAL_LOGINS,h.PROPERTIES.DISTINCT_PASSWORD,h.PROPERTIES.DISTINCT_USERNAME,h.PROPERTIES.TOTAL_ADDRESSES,h.PROPERTIES.TOTAL_CREDIT_CARDS,h.PROPERTIES.TOTAL_BANK_ACCOUNTS,h.PROPERTIES.TOTAL_NOTES,_.PROPERTIES.RECOVERY_KEY_ENABLED];this.resetGlobalEventProperties(e)}updateEvent(e,t={}){const r=(0,l.compareNumericStrings)(null==t?void 0:t.existingVersion,u.default.THRESHOLD_VERSION_FOR_MV3);c.default.utils.isntNil(r)&&r>=0||c.default.utils.isNil(r)||this.globalEventPropertiesHandler.removeGlobalEventProperties(y)}getActionToHandlerMethodMapping(){return{[i.TELEMETRY_ACTIONS.USER_ACCOUNT.SIGN_OUT]:this.signedOutEvent,[i.TELEMETRY_ACTIONS.LIFECYCLE.UPDATE]:this.updateEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=S},{"../../constants":144,"../baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core/background/commonUtilsBG":27,"telemetry/constants":173}],150:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/objectWithoutProperties"));e("core-js/modules/es.promise.js");var i=n(e("@babel/runtime/helpers/defineProperty")),s=e("telemetry/constants"),a=e("telemetry/background/helper/TelemetryHelper"),u=e("../baseEventHandler"),l=e("../../constants");const c=["url"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{EVENTS:p,PROPERTIES:h}=l.TELEMETRY_KEYS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES,_=s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES;class E extends u.BaseEventHandler{sendInfieldExperiencesTelemetry(e,t={}){if(!(t.url||t.domain&&t.subDomain))return Promise.resolve({status:1,error:null});const r=t.domain||(0,a.getUrlDomainForTelemetry)(t.url),n=t.subDomain||(0,a.getUrlSubDomainForTelemetry)(t.url),{url:i}=t,s=(0,o.default)(t,c);return this.sendEvent(e,f(f({},s),{},{domain:r,subDomain:n}))}constructor(e,t){super(e,t),(0,i.default)(this,"telemetryDataKeyConfiguration",{[_.MOT_WARNING_SHOWN]:{event:p.MOT_WARNING_SHOWN,propertyKeys:{category:h.CATEGORY,reason:h.REASON,subDomain:h.SUBDOMAIN,domain:h.DOMAIN}},[_.SAVE_NOTIFICATION_SHOWN]:{event:p.SAVE_NOTIFICATION_SHOWN,propertyKeys:{category:h.CATEGORY,type:h.TYPE,subDomain:h.SUBDOMAIN,domain:h.DOMAIN}},[_.ITEM_FILL_DISPLAYED]:{event:p.ITEM_FILL_DISPLAYED,propertyKeys:{category:h.CATEGORY,context:l.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,type:h.TYPE,subDomain:h.SUBDOMAIN,domain:h.DOMAIN}},[_.PASSWORD_GENERATOR_DISPLAYED]:{event:p.PASSWORD_GENERATOR_DISPLAYED,propertyKeys:{context:l.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,subDomain:h.SUBDOMAIN,domain:h.DOMAIN}},[_.AUTOCHANGE_PASSWORD_INITIATED]:{event:p.AUTOCHANGE_PASSWORD_INITIATED,propertyKeys:{context:l.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,subDomain:h.SUBDOMAIN,domain:h.DOMAIN}},[_.AUTOCHANGE_PASSWORD_COMPLETED]:{event:p.AUTOCHANGE_PASSWORD_COMPLETED,propertyKeys:{context:l.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,type:h.TYPE,error:h.ERROR,subDomain:h.SUBDOMAIN,domain:h.DOMAIN}},[_.CHANGE_PASSWORD_INITIATED]:{event:p.CHANGE_PASSWORD_INITIATED,propertyKeys:{context:l.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,subDomain:h.SUBDOMAIN,domain:h.DOMAIN}}}),this.sendEvent=this.sendEvent.bind(this),this.sendInfieldExperiencesTelemetry=this.sendInfieldExperiencesTelemetry.bind(this)}getActionToHandlerMethodMapping(){return{[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.SAVE_NOTIFICATION_SHOWN]:this.sendInfieldExperiencesTelemetry,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.MOT_WARNING_SHOWN]:this.sendInfieldExperiencesTelemetry,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.ITEM_FILL_DISPLAYED]:this.sendInfieldExperiencesTelemetry,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.PASSWORD_GENERATOR_DISPLAYED]:this.sendInfieldExperiencesTelemetry,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_INITIATED]:this.sendInfieldExperiencesTelemetry,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_COMPLETED]:this.sendInfieldExperiencesTelemetry,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.CHANGE_PASSWORD_INITIATED]:this.sendInfieldExperiencesTelemetry}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=E},{"../../constants":144,"../baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@babel/runtime/helpers/objectWithoutProperties":209,"core-js/modules/es.promise.js":437,"telemetry/background/helper/TelemetryHelper":169,"telemetry/constants":173}],151:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/objectWithoutProperties"));e("core-js/modules/es.promise.js");var i=n(e("@babel/runtime/helpers/defineProperty")),s=e("telemetry/constants"),a=e("telemetry/background/helper/TelemetryHelper"),u=e("../baseEventHandler"),l=e("../../constants");const c=["url"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{EVENTS:p,PROPERTIES:h}=l.TELEMETRY_KEYS.WAX,_=s.TELEMETRY_ACTIONS.WAX;class E extends u.BaseEventHandler{constructor(e,t){super(e,t),(0,i.default)(this,"telemetryDataKeyConfiguration",{[_.WAX_ML_TELEMETRY]:{event:p.WAX_ML_TELEMETRY,propertyKeys:{domain:h.DOMAIN,subDomain:h.SUBDOMAIN,matchStatus:h.MATCH_STATUS,fields:h.FIELDS}}}),this.sendEvent=this.sendEvent.bind(this),this.sendWaxMLTelemetry=this.sendWaxMLTelemetry.bind(this)}sendWaxMLTelemetry(e,t={}){if(!(t.url||t.domain&&t.subDomain))return Promise.resolve({status:1,error:null});const r=t.domain||(0,a.getUrlDomainForTelemetry)(t.url),n=t.subDomain||(0,a.getUrlSubDomainForTelemetry)(t.url),{url:i}=t,s=(0,o.default)(t,c);return this.sendEvent(e,f(f({},s),{},{domain:r,subDomain:n}))}getActionToHandlerMethodMapping(){return{[_.WAX_ML_TELEMETRY]:this.sendWaxMLTelemetry}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=E},{"../../constants":144,"../baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@babel/runtime/helpers/objectWithoutProperties":209,"core-js/modules/es.promise.js":437,"telemetry/background/helper/TelemetryHelper":169,"telemetry/constants":173}],152:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AnonymizedEntriesRelatedEventsHandler",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"AnonymizedEventHandler",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"AnonymizedInfieldExperiencesEventsHandler",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"AnonymizedWaxMLEventsHandler",{enumerable:!0,get:function(){return a.default}});var o=n(e("./anonymizedEventHandler")),i=n(e("./anonymizedInfieldExperiencesEventsHandler")),s=n(e("./anonymizedEntriesRelatedEventsHandler")),a=n(e("./anonymizedWaxMLEventsHandler"))},{"./anonymizedEntriesRelatedEventsHandler":148,"./anonymizedEventHandler":149,"./anonymizedInfieldExperiencesEventsHandler":150,"./anonymizedWaxMLEventsHandler":151,"@babel/runtime/helpers/interopRequireDefault":208}],153:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.BaseEventHandler=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=e("telemetry/types"),a=e("telemetry/constants"),u=n(e("core/background/globalSettings")),l=e("../constants"),c=e("../helper/TelemetryHelper");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const p=l.TELEMETRY_KEYS.COMMON.PROPERTIES;r.BaseEventHandler=class{constructor(e,t){(0,o.default)(this,"commonEventPropertyKeys",{touchPoint:p.TOUCH_POINT}),this.telemetryService=e,this.globalEventPropertiesHandler=t}canTrackEvent(e){const t=a.REQUIRED_TELEMETRY_ACTIONS;switch((0,c.getTelemetryTrackingLevel)()){case s.TelemetryTrackingLevel.ALLOW_ALL:return!0;case s.TelemetryTrackingLevel.ALLOW_MANDATORY:return t.includes(e);default:return!1}}buildEventDataForActionPayload(e,t={}){const r=this.getTelemetryDataKeys(e);if(!r.event)throw Error("telemetryEventHandler : Invalid action identifier");const n=this.buildPropertiesWithDataKeys(r,t);return{event:r.event,properties:n}}async sendEventOnce(e,t={}){if(!this.canTrackEvent(e))return{status:1,error:null};const{event:r,properties:n}=this.buildEventDataForActionPayload(e,t);return this.telemetryService.eventTracker.trackOnce(r,n)}async sendEvent(e,t={}){var r;if(!this.canTrackEvent(e))return{status:1,error:null};const n=null!==(r=(0,c.getCachedTelemetryData)())&&void 0!==r?r:{};if(t.cacheProperties)return(0,c.cacheTelemetryData)(e,t),{status:1,error:null};let o=f({},t);e in n&&(o=f(f({},n[e]),o));const{event:i,properties:s}=this.buildEventDataForActionPayload(e,o);return this.telemetryService.eventTracker.track(i,s)}buildPropertiesWithDataKeys(e,t){const r=f(f({},this.commonEventPropertyKeys),e.propertyKeys||{});let n={};return Object.keys(r).forEach((e=>{const o=r[e],s=t[e];i.default.utils.isntNil(o)&&i.default.utils.isntNil(s)&&(n=f(f({},n),{},{[o]:s}))})),n}resetGlobalEventProperties(e){i.default.utils.isntNil(this.telemetryService.userProfile)&&this.telemetryService.reset(),this.globalEventPropertiesHandler.removeGlobalEventProperties(e),i.default.utils.isntNil(this.telemetryService.userProfile)&&this.globalEventPropertiesHandler.setDefaultGlobalEventProperties(),u.default.setIsVaultActive(!1)}}},{"../constants":144,"../helper/TelemetryHelper":169,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.promise.js":437,"core/background/globalSettings":36,"telemetry/constants":173,"telemetry/types":186}],154:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("../constants/telemetryKeys"),a=e("./baseEventHandler");const u=i.TELEMETRY_ACTIONS.CHANGE_VAULT_PASSWORD_ACTION,{EVENTS:l,PROPERTIES:c}=s.TELEMETRY_KEYS.CHANGE_VAULT_PASSWORD_EVENTS;class d extends a.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[u.CHANGE_VAULT_PASSWORD_INITIATED]:{event:l.CHANGE_VAULT_PASSWORD_INITIATED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.CHANGE_VAULT_PASSWORD_COMPLETED]:{event:l.CHANGE_VAULT_PASSWORD_COMPLETED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.CHANGE_VAULT_PASSWORD_FAILED]:{event:l.CHANGE_VAULT_PASSWORD_FAILED,propertyKeys:{error:c.ERROR,context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}}}),this.sendEvent=this.sendEvent.bind(this)}getActionToHandlerMethodMapping(){return{[u.CHANGE_VAULT_PASSWORD_INITIATED]:this.sendEvent,[u.CHANGE_VAULT_PASSWORD_COMPLETED]:this.sendEvent,[u.CHANGE_VAULT_PASSWORD_FAILED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=d},{"../constants/telemetryKeys":145,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"telemetry/constants":173}],155:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=n(e("core/background/globalSettings")),a=e("../constants"),u=e("./baseEventHandler");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{EVENTS:d,PROPERTIES:f}=a.TELEMETRY_KEYS.CREATE_AND_SIGN_IN_EVENTS,p=i.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN;class h extends u.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[p.SIGN_IN_STARTED]:{event:d.SIGN_IN_STARTED,propertyKeys:{}},[p.SIGN_IN_COMPLETED]:{event:d.SIGN_IN_COMPLETED,propertyKeys:{onboarding:f.ONBOARDING}},[p.SIGN_IN_FAILED]:{event:d.SIGN_IN_FAILED,propertyKeys:{onboarding:f.ONBOARDING,error:f.ERROR}}}),this.sendEvent=this.sendEvent.bind(this),this.signInCompletedEventHandler=this.signInCompletedEventHandler.bind(this),this.signInFailedEventHandler=this.signInFailedEventHandler.bind(this)}signInCompletedEventHandler(e,t={}){return this.sendEvent(e,c(c({},t),{},{onboarding:s.default.getIsOnboarding()}))}signInFailedEventHandler(e,t={}){return this.sendEvent(e,c(c({},t),{},{onboarding:s.default.getIsOnboarding()}))}getActionToHandlerMethodMapping(){return{[i.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN.SIGN_IN_STARTED]:this.sendEvent,[i.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN.SIGN_IN_COMPLETED]:this.signInCompletedEventHandler,[i.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN.SIGN_IN_FAILED]:this.signInFailedEventHandler}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=h},{"../constants":144,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"core/background/globalSettings":36,"telemetry/constants":173}],156:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("./baseEventHandler");class o extends n.BaseEventHandler{getActionToHandlerMethodMapping(){return{}}getTelemetryDataKeys(e){return{}}}r.default=o},{"./baseEventHandler":153}],157:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("./baseEventHandler"),a=e("../constants");const u=i.TELEMETRY_ACTIONS.ENTRIES_RELATED,{EVENTS:l,PROPERTIES:c}=a.TELEMETRY_KEYS.ENTRIES_RELATED,d=a.TELEMETRY_KEYS.COMMON.PROPERTIES;class f extends s.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[u.ITEM_ADD]:{event:l.ITEM_ADD,propertyKeys:{category:d.CATEGORY,context:d.CONTEXT}},[u.ITEM_DETAILS]:{event:l.ITEM_DETAILS,propertyKeys:{category:d.CATEGORY,context:d.CONTEXT}},[u.ITEM_EDIT]:{event:l.ITEM_EDIT,propertyKeys:{category:d.CATEGORY,context:d.CONTEXT}},[u.ITEM_LIST_DISPLAYED]:{event:l.ITEM_LIST_DISPLAYED,propertyKeys:{category:d.CATEGORY,context:d.CONTEXT,list:c.LIST,sortedBy:c.SORTED_BY,filteredBy:c.FILTERED_BY}},[u.ITEM_SAVE]:{event:l.ITEM_SAVE,propertyKeys:{category:d.CATEGORY,context:d.CONTEXT,recommendationChosen:c.RECOMMENDATIONS_CHOSEN}},[u.ITEM_USED]:{event:l.ITEM_USED,propertyKeys:{action:c.ACTION,autofillSuccess:c.AUTOFILL_SUCCESS,category:d.CATEGORY,context:d.CONTEXT,passwordProtected:c.PASSWORD_PROTECTED}},[u.ITEM_ERROR]:{event:l.ITEM_ERROR,propertyKeys:{category:d.CATEGORY,error:c.ERROR}},[u.ITEM_SAVED]:{event:l.ITEM_SAVED,propertyKeys:{category:d.CATEGORY,context:d.CONTEXT}},[u.ITEM_DELETED]:{event:l.ITEM_DELETED,propertyKeys:{category:d.CATEGORY,context:d.CONTEXT}},[u.ITEM_EDITED]:{event:l.ITEM_EDITED,propertyKeys:{category:d.CATEGORY,changes:c.CHANGES}},[u.TAG_ADDED]:{event:l.TAG_ADDED,propertyKeys:{category:d.CATEGORY,type:c.TYPE,context:d.CONTEXT}},[u.TAG_REMOVED]:{event:l.TAG_REMOVED,propertyKeys:{category:d.CATEGORY,type:c.TYPE,context:d.CONTEXT}}}),this.sendEvent=this.sendEvent.bind(this)}getActionToHandlerMethodMapping(){return{[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_ADD]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_DETAILS]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_EDIT]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_LIST_DISPLAYED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVE]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_USED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_ERROR]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_SAVED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_DELETED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.ITEM_EDITED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.TAG_ADDED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ENTRIES_RELATED.TAG_REMOVED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=f},{"../constants":144,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"telemetry/constants":173}],158:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("../constants/telemetryKeys"),a=e("./baseEventHandler");const u=i.TELEMETRY_ACTIONS.EXPORT,{EVENTS:l,PROPERTIES:c}=s.TELEMETRY_KEYS.EXPORT;class d extends a.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[u.INITIATED]:{event:l.INITIATED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.COMPLETED]:{event:l.COMPLETED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,error:c.ERROR,type:c.TYPE}},[u.CANCELLED]:{event:l.CANCELLED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}}}),this.sendEvent=this.sendEvent.bind(this)}getActionToHandlerMethodMapping(){return{[u.INITIATED]:this.sendEvent,[u.COMPLETED]:this.sendEvent,[u.CANCELLED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=d},{"../constants/telemetryKeys":145,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"telemetry/constants":173}],159:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("../constants/telemetryKeys"),a=e("./baseEventHandler");const u=i.TELEMETRY_ACTIONS.FEEDBACK,{EVENTS:l}=s.TELEMETRY_KEYS.FEEDBACK,c=s.TELEMETRY_KEYS.COMMON.PROPERTIES;class d extends a.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[u.FEEDBACK_INITIATED]:{event:l.FEEDBACK_INITIATED,propertyKeys:{context:c.CONTEXT}}}),this.sendEvent=this.sendEvent.bind(this)}getActionToHandlerMethodMapping(){return{[u.FEEDBACK_INITIATED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=d},{"../constants/telemetryKeys":145,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"telemetry/constants":173}],160:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("../constants/telemetryKeys"),a=e("./baseEventHandler");const u=i.TELEMETRY_ACTIONS.IMPORT,{EVENTS:l,PROPERTIES:c}=s.TELEMETRY_KEYS.IMPORT;class d extends a.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[u.INITIATED]:{event:l.INITIATED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,type:c.TYPE}},[u.DISPLAYED]:{event:l.DISPLAYED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.COMPLETED]:{event:l.COMPLETED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,type:c.TYPE}},[u.CANCELLED]:{event:l.CANCELLED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,type:c.TYPE}},[u.FAILED]:{event:l.FAILED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,type:c.TYPE,error:c.ERROR}}}),this.sendEvent=this.sendEvent.bind(this)}getActionToHandlerMethodMapping(){return{[u.INITIATED]:this.sendEvent,[u.DISPLAYED]:this.sendEvent,[u.COMPLETED]:this.sendEvent,[u.FAILED]:this.sendEvent,[u.CANCELLED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=d},{"../constants/telemetryKeys":145,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"telemetry/constants":173}],161:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ChangeVaultPasswordEventsHandler",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"CreateAccountAndSignInEventsHandler",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"DefaultEventsHandler",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"EntriesRelatedEventsHandler",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"ExportEventsHandler",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"FeedbackEventsHandler",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"ImportEventsHandler",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"InfieldExperiencesEventsHandler",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"LifecycleEventsHandler",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"OnboardingEventsHandler",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"PasswordlessVaultUnlockEventsHandler",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"SettingsEventsHandler",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"UserAccountEventsHandler",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"VaultAccessRecoveryEventsHandler",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"VaultUnlockAndLockEventsHandler",{enumerable:!0,get:function(){return i.default}});var o=n(e("./defaultEventsHandler")),i=n(e("./vaultUnlockAndLockEventsHandler")),s=n(e("./userAccountEventsHandler")),a=n(e("./lifecycleEventsHandler")),u=n(e("./settingsEventsHandler")),l=n(e("./onboardingEventsHandler")),c=n(e("./PasswordlessVaultUnlockEventsHandler")),d=n(e("./changeVaultPasswordEventHandler")),f=n(e("./entriesRelatedEventsHandler")),p=n(e("./importEventsHandler")),h=n(e("./exportEventsHandler")),_=n(e("./vaultAccessRecoveryEventsHandler")),E=n(e("./feedbackEventsHandler")),g=n(e("./infieldExperiencesEventsHandler")),m=n(e("./createAccountAndSignInEventsHandler"))},{"./PasswordlessVaultUnlockEventsHandler":147,"./changeVaultPasswordEventHandler":154,"./createAccountAndSignInEventsHandler":155,"./defaultEventsHandler":156,"./entriesRelatedEventsHandler":157,"./exportEventsHandler":158,"./feedbackEventsHandler":159,"./importEventsHandler":160,"./infieldExperiencesEventsHandler":162,"./lifecycleEventsHandler":163,"./onboardingEventsHandler":164,"./settingsEventsHandler":165,"./userAccountEventsHandler":166,"./vaultAccessRecoveryEventsHandler":167,"./vaultUnlockAndLockEventsHandler":168,"@babel/runtime/helpers/interopRequireDefault":208}],162:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/objectWithoutProperties")),i=n(e("@babel/runtime/helpers/defineProperty")),s=e("telemetry/constants"),a=e("../constants"),u=e("./baseEventHandler"),l=e("../helper/TelemetryHelper");const c=["elementClicked"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{EVENTS:p,PROPERTIES:h}=a.TELEMETRY_KEYS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES,_=s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES,E=a.TELEMETRY_KEYS.COMMON.PROPERTIES;class g extends u.BaseEventHandler{constructor(e,t){super(e,t),(0,i.default)(this,"telemetryDataKeyConfiguration",{[_.MOT_WARNING_SHOWN]:{event:p.MOT_WARNING_SHOWN,propertyKeys:{category:h.CATEGORY,reason:h.REASON}},[_.MOT_WARNING_CLICKED]:{event:p.MOT_WARNING_CLICKED,propertyKeys:{category:h.CATEGORY,action:h.ACTION}},[_.SAVE_NOTIFICATION_SHOWN]:{event:p.SAVE_NOTIFICATION_SHOWN,propertyKeys:{category:h.CATEGORY,type:h.TYPE}},[_.SAVE_NOTIFICATION_CLICKED]:{event:p.SAVE_NOTIFICATION_CLICKED,propertyKeys:{category:h.CATEGORY,type:h.TYPE,action:h.ACTION}},[_.INFIELD_SIGN_IN_DISPLAYED]:{event:p.INFIELD_SIGN_IN_DISPLAYED,propertyKeys:{context:E.CONTEXT}},[_.INFIELD_UNLOCK_DISPLAYED]:{event:p.INFIELD_UNLOCK_DISPLAYED,propertyKeys:{context:E.CONTEXT}},[_.INFIELD_SIGN_IN_CLICKED]:{event:p.INFIELD_SIGN_IN_CLICKED,propertyKeys:{type:h.TYPE,button:h.BUTTON,detail:h.DETAIL}},[_.ITEM_FILL_DISPLAYED]:{event:p.ITEM_FILL_DISPLAYED,propertyKeys:{category:h.CATEGORY,context:a.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,type:h.TYPE}},[_.PASSWORD_GENERATOR_DISPLAYED]:{event:p.PASSWORD_GENERATOR_DISPLAYED,propertyKeys:{context:a.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[_.PASSWORD_GENERATED]:{event:p.PASSWORD_GENERATED,propertyKeys:{context:a.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,action:h.ACTION,length:h.LENGTH,specialCharacters:h.SPECIAL_CHARACTERS,numbers:h.NUMBERS,letters:h.LETTERS,mixedCase:h.MIXED_CASE}},[_.AUTOCHANGE_PASSWORD_INITIATED]:{event:p.AUTOCHANGE_PASSWORD_INITIATED,propertyKeys:{context:a.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[_.AUTOCHANGE_PASSWORD_COMPLETED]:{event:p.AUTOCHANGE_PASSWORD_COMPLETED,propertyKeys:{context:a.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT,type:h.TYPE,error:h.ERROR}},[_.CHANGE_PASSWORD_INITIATED]:{event:p.CHANGE_PASSWORD_INITIATED,propertyKeys:{context:a.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}}}),this.sendEvent=this.sendEvent.bind(this),this.sendInfieldPopupDisplayedEvent=this.sendInfieldPopupDisplayedEvent.bind(this)}sendInfieldPopupDisplayedEvent(e,t={}){const r=t.context||(0,l.getInfieldPopupDisplayedContext)(t.elementClicked),{elementClicked:n}=t,i=(0,o.default)(t,c);return this.sendEvent(e,f(f({},i),{},{context:r}))}getActionToHandlerMethodMapping(){return{[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.SAVE_NOTIFICATION_SHOWN]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.SAVE_NOTIFICATION_CLICKED]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.MOT_WARNING_SHOWN]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.MOT_WARNING_CLICKED]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.INFIELD_SIGN_IN_DISPLAYED]:this.sendInfieldPopupDisplayedEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.INFIELD_UNLOCK_DISPLAYED]:this.sendInfieldPopupDisplayedEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.INFIELD_SIGN_IN_CLICKED]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.ITEM_FILL_DISPLAYED]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.PASSWORD_GENERATOR_DISPLAYED]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.PASSWORD_GENERATED]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_INITIATED]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.AUTOCHANGE_PASSWORD_COMPLETED]:this.sendEvent,[s.TELEMETRY_ACTIONS.PASSWORD_RELATED_AND_INFIELD_EXPERIENCES.CHANGE_PASSWORD_INITIATED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=g},{"../constants":144,"../helper/TelemetryHelper":169,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@babel/runtime/helpers/objectWithoutProperties":209,"telemetry/constants":173}],163:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),a=e("telemetry/constants"),u=n(e("core/background/globalSettings")),l=e("./baseEventHandler"),c=e("../constants");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}const{EVENTS:f,PROPERTIES:p}=c.TELEMETRY_KEYS.LIFECYCLE,h=a.TELEMETRY_ACTIONS.LIFECYCLE;class _ extends l.BaseEventHandler{constructor(e){super(e),(0,o.default)(this,"telemetryDataKeyConfiguration",{[h.HEARTBEAT]:{event:f.HEARTBEAT,propertyKeys:{telemetryEnabled:p.TELEMETRY_ENABLED,isVaultActive:p.VAULT_ACTIVE}},[h.INSTALL]:{event:f.INSTALL,propertyKeys:{installDate:p.INSTALL_DATE}},[h.APP_OPEN]:{event:f.APP_OPEN,propertyKeys:{contextScreen:p.CONTEXT_SCREEN,contextAction:p.CONTEXT_ACTION}}}),this.sendEvent=this.sendEvent.bind(this),this.handleHeartbeat=this.handleHeartbeat.bind(this),this.handleInstall=this.handleInstall.bind(this)}async handleInstall(e){const t=u.default.getInstallDate();return this.sendEventOnce(e,{installDate:null==t?void 0:t.toISOString()})}async handleHeartbeat(e){const t=await this.sendEvent(e,{telemetryEnabled:i.default.telemetrySettings.isTelemetryEnabled(),isVaultActive:u.default.getIsVaultActive()});return s.vaultKeys.isLocked()&&u.default.setIsVaultActive(!1),t}getActionToHandlerMethodMapping(){return{[a.TELEMETRY_ACTIONS.LIFECYCLE.HEARTBEAT]:this.handleHeartbeat,[a.TELEMETRY_ACTIONS.LIFECYCLE.INSTALL]:this.handleInstall,[a.TELEMETRY_ACTIONS.LIFECYCLE.APP_OPEN]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=_},{"../constants":144,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/globalSettings":36,"telemetry/constants":173}],164:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("telemetry/types/onboardingTelemetry.types"),a=e("./baseEventHandler"),u=e("../constants"),l=e("../helper/TelemetryHelper");const{EVENTS:c,PROPERTIES:d}=u.TELEMETRY_KEYS.ONBOARDING,f=i.TELEMETRY_ACTIONS.ONBOARDING;class p extends a.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[f.LANDING_UI_SHOWN]:{event:c.LANDING_UI_SHOWN,propertyKeys:{benefitsShown:d.BENEFITS_SHOWN}},[f.MOBILE_SIGN_IN_CLICKED]:{event:c.MOBILE_SIGN_IN_CLICKED,propertyKeys:{}},[f.QR_CODE_SHOWN]:{event:c.QR_CODE_SHOWN,propertyKeys:{}},[f.SEAMLESS_VAULT_SETUP_COMPLETED]:{event:c.SEAMLESS_VAULT_SETUP_COMPLETED,propertyKeys:{}},[f.CREATE_VAULT_EXPLAINED]:{event:c.CREATE_VAULT_EXPLAINED,propertyKeys:{}},[f.CREATE_VAULT_INITIATED]:{event:c.CREATE_VAULT_INITIATED,propertyKeys:{}},[f.CREATE_VAULT_FAILED]:{event:c.CREATE_VAULT_FAILED,propertyKeys:{}},[f.CREATE_VAULT_CLOSED]:{event:c.CREATE_VAULT_CLOSED,propertyKeys:{}},[f.CREATE_VAULT_COMPLETED]:{event:c.CREATE_VAULT_COMPLETED,propertyKeys:{}},[f.SET_DEFAULT_SHOWN]:{event:c.SET_DEFAULT_SHOWN,propertyKeys:{flow:d.FLOW}},[f.SET_DEFAULT_INITIATED]:{event:c.SET_DEFAULT_INITIATED,propertyKeys:{flow:d.FLOW}},[f.SET_DEFAULT_ALLOWED]:{event:c.SET_DEFAULT_ALLOWED,propertyKeys:{flow:d.FLOW}},[f.SET_DEFAULT_DENIED]:{event:c.SET_DEFAULT_DENIED,propertyKeys:{flow:d.FLOW}},[f.SET_DEFAULT_SKIPPED]:{event:c.SET_DEFAULT_SKIPPED,propertyKeys:{flow:d.FLOW}},[f.PIN_SHOWN]:{event:c.PIN_SHOWN,propertyKeys:{flow:d.FLOW}},[f.PIN_FINISHED]:{event:c.PIN_FINISHED,propertyKeys:{flow:d.FLOW}},[f.ONBOARDING_COMPLETED]:{event:c.ONBOARDING_COMPLETED,propertyKeys:{enabledPermissions:d.ENABLED_PERMISSIONS,skippedPermissions:d.SKIPPED_PERMISSIONS}},[f.ONBOARDING_RECOVERY_SHOWN]:{event:c.ONBOARDING_RECOVERY_SHOWN,propertyKeys:{flow:d.FLOW}},[f.ONBOARDING_RECOVERY_DOWNLOAD_CLICKED]:{event:c.ONBOARDING_RECOVERY_DOWNLOAD_CLICKED,propertyKeys:{flow:d.FLOW}},[f.ONBOARDING_RECOVERY_CONFIRMATION_SHOWN]:{event:c.ONBOARDING_RECOVERY_CONFIRMATION_SHOWN,propertyKeys:{flow:d.FLOW}},[f.ONBOARDING_RECOVERY_CONFIRMATION_DOWNLOAD]:{event:c.ONBOARDING_RECOVERY_CONFIRMATION_DOWNLOAD,propertyKeys:{flow:d.FLOW}},[f.ONBOARDING_RECOVERY_CONFIRMATION_CANCEL]:{event:c.ONBOARDING_RECOVERY_CONFIRMATION_CANCEL,propertyKeys:{flow:d.FLOW}},[f.ONBOARDING_RECOVERY_KEY_CREATION_SUCCESS]:{event:c.ONBOARDING_RECOVERY_KEY_CREATION_SUCCESS,propertyKeys:{flow:d.FLOW}},[f.ONBOARDING_RECOVERY_NEXT_CLICKED]:{event:c.ONBOARDING_RECOVERY_NEXT_CLICKED,propertyKeys:{flow:d.FLOW}},[f.POST_ONBOARDING_CTA_CLICKED]:{event:c.POST_ONBOARDING_CTA_CLICKED,propertyKeys:{}},[f.POST_ONBOARDING_GUIDE_SHOWN]:{event:c.POST_ONBOARDING_GUIDE_SHOWN,propertyKeys:{cardShown:d.CARD_SHOWN}},[f.POST_ONBOARDING_GUIDE_CLOSED]:{event:c.POST_ONBOARDING_GUIDE_CLOSED,propertyKeys:{}},[f.POST_ONBOARDING_GUIDE_CHANGED]:{event:c.POST_ONBOARDING_GUIDE_CHANGED,propertyKeys:{action:d.ACTION}},[f.IMPORT_CLICKED]:{event:c.IMPORT_CLICKED,propertyKeys:{}}}),this.landingUIShownEvent=this.landingUIShownEvent.bind(this),this.onboardingCompletedEvent=this.onboardingCompletedEvent.bind(this),this.sendEvent=this.sendEvent.bind(this),this.setDefaultEnabledShownEvent=this.setDefaultEnabledShownEvent.bind(this),this.pinExtensionShownEvent=this.pinExtensionShownEvent.bind(this),this.postOnboardingGuideShownEvent=this.postOnboardingGuideShownEvent.bind(this),this.qrCodeShownEvent=this.qrCodeShownEvent.bind(this)}landingUIShownEvent(e,t){return this.telemetryService.eventTracker.trackTime(c.ONBOARDING_COMPLETED),this.sendEvent(e,t)}setDefaultEnabledShownEvent(e,t){this.telemetryService.eventTracker.trackTime(c.SET_DEFAULT_SKIPPED),this.telemetryService.eventTracker.trackTime(c.SET_DEFAULT_ALLOWED),this.sendEvent(e,t)}pinExtensionShownEvent(e,t){this.telemetryService.eventTracker.trackTime(c.PIN_FINISHED),this.sendEvent(e,t)}async onboardingCompletedEvent(e,t){const r=[],n=[],o=s.PermissionsRequested.Default;await(0,l.isPWMSetAsDefault)()?r.push(o):n.push(o);const i={enabledPermissions:r,skippedPermissions:n};return this.sendEvent(e,i)}postOnboardingGuideShownEvent(e,t){return this.telemetryService.eventTracker.trackTime(c.IMPORT_CLICKED),this.telemetryService.eventTracker.trackTime(c.POST_ONBOARDING_GUIDE_CLOSED),this.sendEvent(e,t)}qrCodeShownEvent(e,t){return this.telemetryService.eventTracker.trackTime(c.SEAMLESS_VAULT_SETUP_COMPLETED),this.sendEvent(e,t)}getActionToHandlerMethodMapping(){return{[i.TELEMETRY_ACTIONS.ONBOARDING.LANDING_UI_SHOWN]:this.landingUIShownEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.MOBILE_SIGN_IN_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.QR_CODE_SHOWN]:this.qrCodeShownEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.SEAMLESS_VAULT_SETUP_COMPLETED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.CREATE_VAULT_EXPLAINED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.CREATE_VAULT_CLOSED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.CREATE_VAULT_INITIATED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.CREATE_VAULT_FAILED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.CREATE_VAULT_COMPLETED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.SET_DEFAULT_SHOWN]:this.setDefaultEnabledShownEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.SET_DEFAULT_INITIATED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.SET_DEFAULT_ALLOWED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.SET_DEFAULT_DENIED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.SET_DEFAULT_SKIPPED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.PIN_SHOWN]:this.pinExtensionShownEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.PIN_FINISHED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_COMPLETED]:this.onboardingCompletedEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_RECOVERY_SHOWN]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_RECOVERY_DOWNLOAD_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_RECOVERY_CONFIRMATION_SHOWN]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_RECOVERY_CONFIRMATION_DOWNLOAD]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_RECOVERY_CONFIRMATION_CANCEL]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_RECOVERY_KEY_CREATION_SUCCESS]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.ONBOARDING_RECOVERY_NEXT_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.POST_ONBOARDING_CTA_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.POST_ONBOARDING_GUIDE_SHOWN]:this.postOnboardingGuideShownEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.POST_ONBOARDING_GUIDE_CHANGED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.IMPORT_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.ONBOARDING.POST_ONBOARDING_GUIDE_CLOSED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=p},{"../constants":144,"../helper/TelemetryHelper":169,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"core-js/modules/es.promise.js":437,"telemetry/constants":173,"telemetry/types/onboardingTelemetry.types":189}],165:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("../constants/telemetryKeys"),a=e("./baseEventHandler");const u=i.TELEMETRY_ACTIONS.SETTINGS_ACTION,{EVENTS:l,PROPERTIES:c}=s.TELEMETRY_KEYS.SETTINGS_CHANGE;class d extends a.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[u.DELETE_VAULT_CLICKED]:{event:l.DELETE_VAULT_CLICKED,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.MANAGE_DEVICES_CLICKED]:{event:l.MANAGE_DEVICES_CLICKED,propertyKeys:{}},[u.SETTINGS_SHOWN]:{event:l.SETTINGS_SHOWN,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.ALWAYS_REQUIRE_VAULT_PASSWORD_CHANGED]:{event:l.ALWAYS_REQUIRE_VAULT_PASSWORD_CHANGED,propertyKeys:{requireVaultPasswordChange:c.REQUIRE_VAULT_PASSWORD_CHANGE}},[u.ICONS_SETTINGS_CHANGED]:{event:l.ICONS_SETTINGS_CHANGED,propertyKeys:{showThirdPartyIcon:c.ICON_SETTINGS_STATE}},[u.TELEMETRY_SETTINGS_CHANGED]:{event:l.TELEMETRY_SETTINGS_CHANGED,propertyKeys:{shareUsage:c.TELEMETRY_SETTINGS_STATE}},[u.RECOVERY_SETUP_CLICKED]:{event:l.RECOVERY_SETUP_CLICKED,propertyKeys:{cta:c.CTA,context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.RECOVERY_OPTIONS_SHOWN]:{event:l.RECOVERY_OPTIONS_SHOWN,propertyKeys:{context:s.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[u.CREATE_RECOVERY_KEY_CLICKED]:{event:l.CREATE_RECOVERY_KEY_CLICKED,propertyKeys:{cta:c.CTA}},[u.RECOVERY_MOBILE_CLICKED]:{event:l.RECOVERY_MOBILE_CLICKED,propertyKeys:{}},[u.RECOVERY_MOBILE_SHOWN]:{event:l.RECOVERY_MOBILE_SHOWN,propertyKeys:{}},[u.RECOVERY_KEY_CONFIRMATION_SHOWN]:{event:l.RECOVERY_KEY_CONFIRMATION_SHOWN,propertyKeys:{}},[u.RECOVERY_KEY_CONFIRMATION_DOWNLOAD]:{event:l.RECOVERY_KEY_CONFIRMATION_DOWNLOAD,propertyKeys:{}},[u.RECOVERY_KEY_CONFIRMATION_CANCEL]:{event:l.RECOVERY_KEY_CONFIRMATION_CANCEL,propertyKeys:{}},[u.RECOVERY_KEY_CREATION_SUCCESS]:{event:l.RECOVERY_KEY_CREATION_SUCCESS,propertyKeys:{}},[u.AUTO_UNLOCK_SETTING_CHANGED]:{event:l.AUTO_UNLOCK_SETTING_CHANGED,propertyKeys:{days:c.DAYS,settingEnabled:c.SETTING_ENABLED}}}),this.sendEvent=this.sendEvent.bind(this)}getActionToHandlerMethodMapping(){return{[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.DELETE_VAULT_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.MANAGE_DEVICES_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.SETTINGS_SHOWN]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.ALWAYS_REQUIRE_VAULT_PASSWORD_CHANGED]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.ICONS_SETTINGS_CHANGED]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.TELEMETRY_SETTINGS_CHANGED]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.RECOVERY_SETUP_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.RECOVERY_OPTIONS_SHOWN]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.CREATE_RECOVERY_KEY_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.RECOVERY_MOBILE_CLICKED]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.RECOVERY_MOBILE_SHOWN]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.RECOVERY_KEY_CONFIRMATION_SHOWN]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.RECOVERY_KEY_CONFIRMATION_DOWNLOAD]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.RECOVERY_KEY_CONFIRMATION_CANCEL]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.RECOVERY_KEY_CREATION_SUCCESS]:this.sendEvent,[i.TELEMETRY_ACTIONS.SETTINGS_ACTION.AUTO_UNLOCK_SETTING_CHANGED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=d},{"../constants/telemetryKeys":145,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"telemetry/constants":173}],166:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("./baseEventHandler"),a=e("../constants");const u=i.TELEMETRY_ACTIONS.USER_ACCOUNT,{EVENTS:l,PROPERTIES:c}=a.TELEMETRY_KEYS.USER_ACCOUNT;class d extends s.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[u.SIGN_OUT]:{event:l.SIGN_OUT,propertyKeys:{type:c.TYPE,cause:c.CAUSE,error:c.ERROR_DETAILS}}}),this.signedOutEvent=this.signedOutEvent.bind(this),this.sendEvent=this.sendEvent.bind(this)}signedOutEvent(e,t={}){return this.resetGlobalEventProperties([]),this.sendEvent(e,t)}getActionToHandlerMethodMapping(){return{[i.TELEMETRY_ACTIONS.USER_ACCOUNT.SIGN_OUT]:this.signedOutEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=d},{"../constants":144,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"telemetry/constants":173}],167:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),a=e("telemetry/types/VaultAccessRecoveryTelemetry.types"),u=e("../constants/telemetryKeys"),l=e("./baseEventHandler");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}const d=i.TELEMETRY_ACTIONS.RECOVERY,{EVENTS:f,PROPERTIES:p}=u.TELEMETRY_KEYS.RECOVERY;class h extends l.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[d.FORGOT_VAULT_PASSWORD_CLICKED]:{event:f.FORGOT_VAULT_PASSWORD_CLICKED,propertyKeys:{context:u.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[d.RECOVERY_SHOWN]:{event:f.RECOVERY_SHOWN,propertyKeys:{recoveryOptions:p.AVAILABLE_RECOVERY_OPTIONS,context:u.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[d.SHOW_HINT]:{event:f.SHOW_HINT,propertyKeys:{action:p.ACTION,context:u.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[d.MOBILE_RECOVERY_CLICKED]:{event:f.MOBILE_RECOVERY_CLICKED,propertyKeys:{context:u.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[d.MOBILE_RECOVERY_INSTRUCTIONS_SHOWN]:{event:f.MOBILE_RECOVERY_INSTRUCTIONS_SHOWN,propertyKeys:{}},[d.MOBILE_RECOVERY_INSTRUCTIONS_GO_TO_VAULT_CLICKED]:{event:f.MOBILE_RECOVERY_INSTRUCTIONS_GO_TO_VAULT_CLICKED,propertyKeys:{}},[d.MOBILE_RECOVERY_INSTRUCTIONS_BACK]:{event:f.MOBILE_RECOVERY_INSTRUCTIONS_BACK,propertyKeys:{}},[d.USE_RECOVERY_KEY_CLICKED]:{event:f.USE_RECOVERY_KEY_CLICKED,propertyKeys:{context:u.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[d.RECOVERY_KEY_BACK]:{event:f.RECOVERY_KEY_BACK,propertyKeys:{}},[d.RECOVERY_KEY_SUCCESS]:{event:f.RECOVERY_KEY_SUCCESS,propertyKeys:{}},[d.RECOVERY_KEY_ERROR]:{event:f.RECOVERY_KEY_ERROR,propertyKeys:{cause:p.CAUSE}},[d.RESET_VAULT_CLICKED]:{event:f.RESET_VAULT_CLICKED,propertyKeys:{context:u.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[d.RESET_VAULT_SCREEN_SHOWN]:{event:f.RESET_VAULT_SCREEN_SHOWN,propertyKeys:{}},[d.RESET_VAULT_CONFIRMED]:{event:f.RESET_VAULT_CONFIRMED,propertyKeys:{context:u.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}},[d.RESET_VAULT_COMPLETED]:{event:f.RESET_VAULT_COMPLETED,propertyKeys:{context:u.TELEMETRY_KEYS.COMMON.PROPERTIES.CONTEXT}}}),this.sendEvent=this.sendEvent.bind(this),this.sendRecoveryScreenShownEvent=this.sendRecoveryScreenShownEvent.bind(this)}async sendRecoveryScreenShownEvent(e,t){(await s.recoveryManager.fetchRecoveryInfo()).modifiedAt&&t.recoveryOptions.push(a.AvailableRecoveryOptions.UseRecoveryKey),this.sendEvent(e,t)}getActionToHandlerMethodMapping(){return{[d.FORGOT_VAULT_PASSWORD_CLICKED]:this.sendEvent,[d.RECOVERY_SHOWN]:this.sendRecoveryScreenShownEvent,[d.SHOW_HINT]:this.sendEvent,[d.MOBILE_RECOVERY_CLICKED]:this.sendEvent,[d.MOBILE_RECOVERY_INSTRUCTIONS_SHOWN]:this.sendEvent,[d.MOBILE_RECOVERY_INSTRUCTIONS_GO_TO_VAULT_CLICKED]:this.sendEvent,[d.MOBILE_RECOVERY_INSTRUCTIONS_BACK]:this.sendEvent,[d.USE_RECOVERY_KEY_CLICKED]:this.sendEvent,[d.RECOVERY_KEY_BACK]:this.sendEvent,[d.RECOVERY_KEY_SUCCESS]:this.sendEvent,[d.RECOVERY_KEY_ERROR]:this.sendEvent,[d.RESET_VAULT_CLICKED]:this.sendEvent,[d.RESET_VAULT_SCREEN_SHOWN]:this.sendEvent,[d.RESET_VAULT_CONFIRMED]:this.sendEvent,[d.RESET_VAULT_COMPLETED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=h},{"../constants/telemetryKeys":145,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"telemetry/constants":173,"telemetry/types/VaultAccessRecoveryTelemetry.types":177}],168:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("telemetry/constants"),s=e("./baseEventHandler"),a=e("../constants"),u=n(e("core/background/store/telemetryInfoStore")),l=e("common/global.types"),c=e("telemetry/types/lifecycleTelemetry.types");const d=i.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK,{EVENTS:f,PROPERTIES:p}=a.TELEMETRY_KEYS.VAULT_UNLOCK_AND_LOCK,h=a.TELEMETRY_KEYS.COMMON.PROPERTIES;class _ extends s.BaseEventHandler{constructor(e,t){super(e,t),(0,o.default)(this,"telemetryDataKeyConfiguration",{[d.UNLOCK_SHOWN]:{event:f.UNLOCK_SHOWN,propertyKeys:{context:h.CONTEXT,method:p.METHOD}},[d.UNLOCK_COMPLETED]:{event:f.UNLOCK_COMPLETED,propertyKeys:{context:h.CONTEXT,method:p.METHOD}},[d.UNLOCK_FAILED]:{event:f.UNLOCK_FAILED,propertyKeys:{context:h.CONTEXT,method:p.METHOD,cause:p.CAUSE,error:p.ERROR}},[d.UNLOCK_CLOSED]:{event:f.UNLOCK_CLOSED,propertyKeys:{context:h.CONTEXT,method:p.METHOD}},[d.LOCKED]:{event:f.LOCKED,propertyKeys:{type:p.TYPE,context:h.CONTEXT,cause:p.CAUSE,error:p.ERROR}}}),this.sendEvent=this.sendEvent.bind(this),this.unlockCompletedEventHandler=this.unlockCompletedEventHandler.bind(this)}unlockCompletedEventHandler(e,t={}){return u.default.setTelemetryInfo({appName:l.AppName.DASHBOARD,contextScreen:c.AppOpenContextScreen.VaultUnlocked,canSendAppOpenEvent:!1}),this.sendEvent(e,t)}getActionToHandlerMethodMapping(){return{[i.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_SHOWN]:this.sendEvent,[i.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_COMPLETED]:this.unlockCompletedEventHandler,[i.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_FAILED]:this.sendEvent,[i.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_CLOSED]:this.sendEvent,[i.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.LOCKED]:this.sendEvent}}getTelemetryDataKeys(e){return this.telemetryDataKeyConfiguration[e]||{}}}r.default=_},{"../constants":144,"./baseEventHandler":153,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"common/global.types":16,"core/background/store/telemetryInfoStore":50,"telemetry/constants":173,"telemetry/types/lifecycleTelemetry.types":188}],169:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.buildPropertiesWithDataKeys=function(e,t){if(!e.propertyKeys)return{};const r=e.propertyKeys;let n={};return Object.keys(r).forEach((e=>{const o=r[e],s=t[e];i.default.utils.isntNil(o)&&i.default.utils.isntNil(s)&&(n=E(E({},n),{},{[o]:s}))})),n},r.cacheTelemetryData=function(e,t){if(!e||!t)return;O(E(E({},b()),{},{[e]:t}))},r.getCachedTelemetryData=b,r.getConnectedDevices=function(){let e=f.ExtensionType.ChromeExtension;S===(null==T?void 0:T.FIREFOX)?e=f.ExtensionType.FirefoxExtension:S===(null==T?void 0:T.EDGE)||S===(null==T?void 0:T.EDGE_CHROMIUM)?e=f.ExtensionType.EdgeExtension:S===(null==T?void 0:T.SAFARI)&&(e=f.ExtensionType.SafariExtension);return e},r.getInfieldPopupDisplayedContext=function(e){if(!e)return d.InfieldPopupDisplayedContext.OnPageLoad;return"badge"===e?d.InfieldPopupDisplayedContext.InfieldIconClick:d.InfieldPopupDisplayedContext.InputFieldClick},r.getSignInMethod=function(){const e=(0,a.getAuthLoginType)();let t=e?d.SignInMethod.Email:void 0;e&&e!==l.default.AUTH_NSL&&(t=l.default.SUPPORTED_AUTH_PARTNERS.includes(e)?d.SignInMethod.Partner:d.SignInMethod.SSO);return t},r.getSignInProvider=function(){const e=(0,a.getAuthLoginType)();return e===l.default.AUTH_NSL?d.SignInProvider.NORTON:e},r.getTelemetryTrackingLevel=function(){const e=g.isTelemetryEnabled();if(y.isntNil(e)&&!0===e)return p.TelemetryTrackingLevel.ALLOW_ALL;return m.BROWSER===T.FIREFOX?p.TelemetryTrackingLevel.ALLOW_NONE:p.TelemetryTrackingLevel.ALLOW_MANDATORY},r.getUrlDomainForTelemetry=function(e){try{if(!(0,a.hasValue)(e))return;return new h.default(e).domain()}catch(e){return}},r.getUrlSubDomainForTelemetry=function(e){try{if(!(0,a.hasValue)(e))return;const t=new h.default(e);return t.subdomain()&&t.subdomain()!==A?t.hostname():c.default.NO_SUBDOMAIN}catch(e){return}},r.isPWMSetAsDefault=async function(){try{const{levelOfControl:e,value:t}=await i.default.extensionAdapter.getPasswordSavingEnabled();return e===f.BrowserSettingLevelOfControl.ControlledByThisExtension&&!1===t}catch(e){return!1}},r.setCachedTelemetryData=O,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=n(e("common/constants")),a=e("core/background/commonUtilsBG"),u=n(e("core/background/pwmSessionSettings")),l=n(e("feature/wax/waxConstants")),c=n(e("telemetry/constants/telemetryValues")),d=e("telemetry/types"),f=e("telemetry/types/globalEventProperty.types"),p=e("telemetry/types/telemetryServiceManager.types"),h=n(e("urijs"));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{telemetrySettings:g,globals:m,utils:y}=i.default,{BROWSER:S}=i.default.globals,{BROWSER_TYPE:T}=i.default.constants,{WWW_SUBDOMAIN:A}=s.default;function b(){return u.default.get(s.default.SESSION_STORAGE_KEYS.CACHED_TELEMETRY_EVENT_PAYLOAD)}function O(e){u.default.set(s.default.SESSION_STORAGE_KEYS.CACHED_TELEMETRY_EVENT_PAYLOAD,e)}},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"common/constants":13,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.promise.js":437,"core/background/commonUtilsBG":27,"core/background/pwmSessionSettings":43,"feature/wax/waxConstants":124,"telemetry/constants/telemetryValues":176,"telemetry/types":186,"telemetry/types/globalEventProperty.types":185,"telemetry/types/telemetryServiceManager.types":193,urijs:718}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("./telemetryServiceManagerBG");r.default=n.sharedTelemetryServiceManagerBG},{"./telemetryServiceManagerBG":171}],171:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.sharedTelemetryServiceManagerBG=r.TelemetryEventHandlers=r.TelemetryAnonymizedEventHandlers=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),s=e("message-adapter/background"),a=e("telemetry/types"),u=y(e("./../../../telemetry-service")),l=n(e("configuration")),c=e("telemetry/constants/telemetryProjects"),d=e("./defaultGlobalEventPropertiesHandler"),f=e("./baseGlobalEventPropertiesHandler"),p=e("./userProfileHandler"),h=y(e("./event-handler")),_=y(e("./event-handler/anonymized-event-handler")),E=e("./helper/TelemetryHelper"),g=n(e("core/background/store/telemetryInfoStore"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{utils:A,logger:b}=i.default,{isntNil:O}=A,{INITIAL_REFERRER:I,INITIAL_REFERRING_DOMAIN:v}=u.DEFAULT_PROPERTIES.BrowsingContext,N=r.TelemetryEventHandlers=Object.values(h).filter((e=>O(e.prototype.getActionToHandlerMethodMapping))),R=r.TelemetryAnonymizedEventHandlers=Object.values(_).filter((e=>O(e.prototype.getActionToHandlerMethodMapping)));r.sharedTelemetryServiceManagerBG=new class{constructor(){(0,o.default)(this,"isInitialized",!1),(0,o.default)(this,"telemetryServiceHandlers",[]),(0,o.default)(this,"errorPrefix","TelemetryServiceManager"),(0,o.default)(this,"errorDescription",{INITIALIZATION_ERROR:`${this.errorPrefix} :: ERROR :: sharedTelemetryServiceManager initialized failed`,ALREADY_INITIALIZED_ERROR:`${this.errorPrefix} ::  sharedTelemetryServiceManager already initialized.`,NOT_INITIALIZED_ERROR:`${this.errorPrefix} ::  sharedTelemetryServiceManager is not initialized yet.`,USER_PROPERTY_ERROR:`${this.errorPrefix} :: Failed to track user in event :: `,TRACK_EVENT_ERROR:`${this.errorPrefix} :: Failed to track event ::  `}),this.track=this.track.bind(this),this.init=this.init.bind(this),this.cacheActionData=this.cacheActionData.bind(this)}isInitializedSuccessfully(){return this.isInitialized}init(){if(!0!==this.isInitialized)try{Object.keys(c.TELEMETRY_PROJECT).forEach((e=>{const t=u.default.createServiceInstance(c.TELEMETRY_PROJECT_TOKEN_MAP[e],{debug:!l.default.RELEASE_BUILD,anonymize_user:e===c.TELEMETRY_PROJECT.ANONYMIZED,property_blacklist:[I,v],opt_out_tracking_by_default:(0,E.getTelemetryTrackingLevel)()===a.TelemetryTrackingLevel.ALLOW_NONE},e);let r,n,o={},i=[];if(e===c.TELEMETRY_PROJECT.ANONYMIZED)r=new f.BaseGlobalEventPropertiesHandler(t),i=R;else r=new d.DefaultGlobalEventPropertiesHandler(t),n=new p.UserProfileHandler(t),i=N;i.forEach((e=>{const n=new e(t,r);o=T(T({},o),n.getActionToHandlerMethodMapping())})),this.telemetryServiceHandlers.push({telemetryService:t,globalEventPropertiesHandler:r,userProfileHandler:n,eventHandlers:o})})),this.subscribeToEvents(),this.isInitialized=!0,b.info("DEBUG :: sharedTelemetryServiceManager initialized successfully!")}catch(e){const t=`${this.errorDescription.INITIALIZATION_ERROR} - ${e}`;throw b.error(t),new Error(t)}else b.error(this.errorDescription.ALREADY_INITIALIZED_ERROR)}subscribeToEvents(){s.messenger.subscribe(s.MESSAGES.TELEMETRY.TRACK_ACTION,(async(e,t)=>{const r=await this.track(e.action,e.data);null==t||t(r)}))}handleTelemetryPreferenceChange(){!1!==this.isInitialized?this.telemetryServiceHandlers.forEach((e=>{var t,r;const{telemetryService:n,globalEventPropertiesHandler:o,userProfileHandler:i}=e;(0,E.getTelemetryTrackingLevel)()!==a.TelemetryTrackingLevel.ALLOW_NONE?null==n||n.enableTracking():null==n||n.disableTracking(),null==o||null===(t=o.handleTelemetryPreferenceChange)||void 0===t||t.call(o),null==i||null===(r=i.handleTelemetryPreferenceChange)||void 0===r||r.call(i)})):b.error(this.errorDescription.NOT_INITIALIZED_ERROR)}async cacheActionData(e,t={}){const r=T(T({},t),{},{cacheProperties:!0});await this.track(e,r)}async track(e,t,r){const n=[];return!1===this.isInitialized?(b.error(this.errorDescription.NOT_INITIALIZED_ERROR),n.push({status:0,error:this.errorDescription.NOT_INITIALIZED_ERROR}),n):(await Promise.all(this.telemetryServiceHandlers.map((async o=>{const{globalEventPropertiesHandler:i,userProfileHandler:s,eventHandlers:a}=o,u=null==i?void 0:i.getActionToHandlerMethodMapping();try{var l,c;await(null==u||null===(l=u[e])||void 0===l?void 0:l.call(u,e,t));const o=null==s?void 0:s.getActionToHandlerMethodMapping(),i=a[e],d=null==o?void 0:o[e],[f,p]=await Promise.all([null==d?void 0:d(e,t),null==i?void 0:i(e,T(T({},t),{},{context:null!==(c=null==t?void 0:t.context)&&void 0!==c?c:g.default.getAppContext(r)}))]);let h=p||f;!O(f)||null!=f&&f.status||(b.error(`${this.errorDescription.USER_PROPERTY_ERROR} - ${e}`),h=f),!O(p)||null!=p&&p.status||(b.error(`${this.errorDescription.TRACK_EVENT_ERROR} - ${e} - ${null==p?void 0:p.error}`),h=p),n.push(h)}catch(t){b.error(`Mixpanel track error :: ${e} - ${t}`),n.push({status:0,error:`${t}`})}}))),n)}}},{"./../../../telemetry-service":756,"./baseGlobalEventPropertiesHandler":143,"./defaultGlobalEventPropertiesHandler":146,"./event-handler":161,"./event-handler/anonymized-event-handler":152,"./helper/TelemetryHelper":169,"./userProfileHandler":172,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,configuration:3,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"core/background/store/telemetryInfoStore":50,"message-adapter/background":134,"telemetry/constants/telemetryProjects":175,"telemetry/types":186}],172:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.UserProfileHandler=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=e("telemetry/constants/telemetryActions"),u=e("telemetry/types"),l=n(e("core/background/extension/extensionInfo")),c=n(e("common/constants")),d=n(e("core/background/globalSettings")),f=e("./constants/telemetryKeys"),p=e("./helper/TelemetryHelper");const{isNil:h}=s.default.utils,{ENTRIES_RELATED:{VAULT_SYNC:_},CREATE_ACCOUNT_AND_SIGN_IN:{SIGN_IN_COMPLETED:E}}=a.TELEMETRY_ACTIONS,{ENTRIES_RELATED:g,USER_ACCOUNT:m,VAULT_UNLOCK_AND_LOCK:y,CREATE_AND_SIGN_IN_EVENTS:S}=f.TELEMETRY_KEYS;r.UserProfileHandler=class{constructor(e){(0,o.default)(this,"telemetryDataKeyConfiguration",{[_]:{event:g.EVENTS.VAULT_SYNC,propertyKeys:{totalLogins:g.PROPERTIES.TOTAL_LOGINS,distinctPasswords:g.PROPERTIES.DISTINCT_PASSWORD,distinctUsernames:g.PROPERTIES.DISTINCT_USERNAME,totalAddresses:g.PROPERTIES.TOTAL_ADDRESSES,totalCreditCards:g.PROPERTIES.TOTAL_CREDIT_CARDS,totalBankAccounts:g.PROPERTIES.TOTAL_BANK_ACCOUNTS,totalNotes:g.PROPERTIES.TOTAL_NOTES}},[E]:{event:S.EVENTS.SIGN_IN_COMPLETED,propertyKeys:{signInProvider:S.PROPERTIES.SIGN_IN_PROVIDER,signInMethod:S.PROPERTIES.SIGN_IN_METHOD}}}),this.telemetryService=e,this.setUserProfileProperty=this.setUserProfileProperty.bind(this),this.setupUserProfile=this.setupUserProfile.bind(this),this.canTrackUserProfile=this.canTrackUserProfile.bind(this),this.handleTelemetryPreferenceChange=this.handleTelemetryPreferenceChange.bind(this),this.signedInSuccessfullyEvent=this.signedInSuccessfullyEvent.bind(this),this.unlockVaultCompletedEvent=this.unlockVaultCompletedEvent.bind(this),this.vaultSyncEvent=this.vaultSyncEvent.bind(this),this.handleLoginGeneratedEvent=this.handleLoginGeneratedEvent.bind(this),this.signInCompletedEvent=this.signInCompletedEvent.bind(this),this.setupUserProfile()}canTrackUserProfile(){return!h(i.default.session.getNAGUID())&&(0,p.getTelemetryTrackingLevel)()!==u.TelemetryTrackingLevel.ALLOW_NONE}setUserProfileProperty(e){var t;!1!==this.canTrackUserProfile()&&(null===(t=this.telemetryService.userProfile)||void 0===t||null===(t=t.properties)||void 0===t||t.set(e))}incrementUserProfileProperty(e){var t;!1!==this.canTrackUserProfile()&&(null===(t=this.telemetryService.userProfile)||void 0===t||null===(t=t.properties)||void 0===t||t.increment(e))}setupUserProfile(){var e,t;if(!1===this.canTrackUserProfile())return;null===(e=this.telemetryService.userProfile)||void 0===e||e.track(i.default.session.getNAGUID()),null===(t=this.telemetryService.userProfile)||void 0===t||null===(t=t.properties)||void 0===t||t.union({[m.PROPERTIES.CONNECTED_DEVICES]:(0,p.getConnectedDevices)()});const r=l.default.getVersion().localeCompare("8.1.2.0",void 0,{numeric:!0,sensitivity:"base"});var n,o;!d.default.getValue(c.default.FRESH_INSTALL)&&r<0?null===(n=this.telemetryService.userProfile)||void 0===n||null===(n=n.properties)||void 0===n||n.setOnce({[m.PROPERTIES.USER_CREATION_DATE]:new Date(0).toString()}):null===(o=this.telemetryService.userProfile)||void 0===o||null===(o=o.properties)||void 0===o||o.setOnce({[m.PROPERTIES.USER_CREATION_DATE]:(new Date).toString()})}setTotalLoginsGeneratedProperty(){this.incrementUserProfileProperty({[g.PROPERTIES.TOTAL_LOGINS_GENERATED]:1})}handleTelemetryPreferenceChange(){this.setupUserProfile()}signInCompletedEvent(){const e=(0,p.buildPropertiesWithDataKeys)(this.telemetryDataKeyConfiguration[E],{signInProvider:(0,p.getSignInProvider)(),signInMethod:(0,p.getSignInMethod)()});this.setUserProfileProperty(e)}signedInSuccessfullyEvent(){this.setupUserProfile(),this.signInCompletedEvent()}unlockVaultCompletedEvent(e,t){this.setUserProfileProperty({[y.PROPERTIES.LAST_USED_UNLOCK_METHOD]:t.method})}vaultSyncEvent(e,t){if(h(t)||0===Object.keys(t).length)return;const r=(0,p.buildPropertiesWithDataKeys)(this.telemetryDataKeyConfiguration[_],t);this.setUserProfileProperty(r)}handleLoginGeneratedEvent(){this.setTotalLoginsGeneratedProperty()}getTelemetryDataKeys(e){var t;return null!==(t=this.telemetryDataKeyConfiguration[e])&&void 0!==t?t:{}}getActionToHandlerMethodMapping(){return{[a.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN.SIGN_IN_COMPLETED]:this.signedInSuccessfullyEvent,[a.TELEMETRY_ACTIONS.VAULT_UNLOCK_AND_LOCK.UNLOCK_COMPLETED]:this.unlockVaultCompletedEvent,[a.TELEMETRY_ACTIONS.ENTRIES_RELATED.VAULT_SYNC]:this.vaultSyncEvent,[a.TELEMETRY_ACTIONS.ENTRIES_RELATED.LOGIN_GENERATED]:this.handleLoginGeneratedEvent,[a.TELEMETRY_ACTIONS.CREATE_ACCOUNT_AND_SIGN_IN.SIGN_IN_COMPLETED]:this.signedInSuccessfullyEvent}}}},{"./constants/telemetryKeys":145,"./helper/TelemetryHelper":169,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"common/constants":13,"core/background/extension/extensionInfo":32,"core/background/globalSettings":36,"telemetry/constants/telemetryActions":174,"telemetry/types":186}],173:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./telemetryActions");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=e("./telemetryValues");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./telemetryProjects");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}}))}))},{"./telemetryActions":174,"./telemetryProjects":175,"./telemetryValues":176}],174:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TELEMETRY_ACTIONS=r.REQUIRED_TELEMETRY_ACTIONS=void 0;var n=function(e){return e.TOUCH_POINT_UPDATED="1a4b92f4-9e0f-427c-a171-cbd5bbbceb9d",e}(n||{}),o=function(e){return e.INSTALL="7cf3dd79-f806-426d-82a5-e49bdbf9cd37",e.HEARTBEAT="e3757f40-25a8-457b-85ca-1397fbb05f3d",e.UPDATE="daa87694-56e1-44aa-a500-9c2dc1dB08bf",e.APP_OPEN="4b471cad-2e36-4cd4-9277-ee15247b64a0",e}(o||{}),i=function(e){return e.UNLOCK_SHOWN="aa96fcbb-b2ce-446a-bed0-f2c4b9fc6d8e",e.UNLOCK_COMPLETED="163c9dbd-8d36-4c4a-af4b-0d08ed431d76",e.UNLOCK_FAILED="05aca740-ded3-409d-b7a5-add3d9d40c66",e.UNLOCK_CLOSED="ac898d54-2828-4ee6-9c7e-05b069786c68",e.LOCKED="42340cf7-648d-4cc8-8a20-a78b64005795",e}(i||{}),s=function(e){return e.ALWAYS_REQUIRE_VAULT_PASSWORD_CHANGED="6a496f4c-deed-438b-9f61-e07332890891",e.DELETE_VAULT_CLICKED="7a377a94-e2de-41a0-b915-24f17693aaaa",e.ICONS_SETTINGS_CHANGED="5d024c8a-3382-4a49-8c14-7d275028152f",e.MANAGE_DEVICES_CLICKED="366fd0ee-237c-455d-bb1d-b75ca3121f8a",e.SETTINGS_SHOWN="128836a2-25f4-4a28-b383-19977c74bd09",e.TELEMETRY_SETTINGS_CHANGED="b644903f-fbd2-43a5-8cb4-1b6e3a974284",e.RECOVERY_SETUP_CLICKED="1c18994d-f086-41c7-9fab-1f85c6fec489",e.RECOVERY_OPTIONS_SHOWN="674482df-1ba1-4734-abbf-da050efafb7a",e.CREATE_RECOVERY_KEY_CLICKED="73b92f46-aaac-4ea3-8fb8-9987ab0c8053",e.RECOVERY_MOBILE_CLICKED="97db36dd-1552-481e-a196-4814a415a533",e.RECOVERY_MOBILE_SHOWN="792fc819-2e06-4f30-bff4-27dd0dcda773",e.RECOVERY_KEY_CONFIRMATION_SHOWN="186f4c5b-134e-4496-98ee-c72b03243cc2",e.RECOVERY_KEY_CONFIRMATION_DOWNLOAD="27305db4-ef93-4e94-a985-5faadda1d9ec",e.RECOVERY_KEY_CONFIRMATION_CANCEL="23451d5b-c336-4698-8d8d-66128a20cd65",e.RECOVERY_KEY_CREATION_SUCCESS="94ec2ad3-c812-4ed8-8061-93a4f91421b9",e.AUTO_UNLOCK_SETTING_CHANGED="dc345fb9-d7be-4ccb-893a-9207b122c1ce",e}(s||{}),a=function(e){return e.ONBOARDING_COMPLETED="163c9dbd-b2ce-446a-bed0-f2c4b9fc6d8e",e.CREATE_VAULT_CLOSED="3c5673ff-dd6c-4e5d-a550-4233ea71fc02",e.CREATE_VAULT_COMPLETED="0e3c75e3-6680-42e5-b727-818195322789",e.CREATE_VAULT_EXPLAINED="e38972f8-4a88-41b7-91c4-224f030b8b26",e.CREATE_VAULT_FAILED="1e72dfdb-5b96-43c1-acfa-1bbf687c8f4d",e.CREATE_VAULT_INITIATED="68146997-5f90-4b47-a506-f69463d9e083",e.LANDING_UI_SHOWN="457610d7-59a5-4698-844a-e04540a5dd65",e.MOBILE_SIGN_IN_CLICKED="3a3dd371-c945-4c88-b685-0687b0e9faf7",e.PIN_SHOWN="4bb398a0-890c-4e7a-b8b8-ce9d7283985e",e.PIN_FINISHED="263076b7-d176-416f-9c2b-2e4903771f7d",e.SEAMLESS_VAULT_SETUP_COMPLETED="194a1df5-f4dd-43c3-9601-18579d077046",e.SET_DEFAULT_ALLOWED="0fe7af9f-643c-4cb0-89bc-fc5c0a1fbe3f",e.SET_DEFAULT_DENIED="d9af6a7e-a1ff-40f7-9ece-a21c3f1fd071",e.SET_DEFAULT_INITIATED="91cf4b55-b5ed-44bd-bd58-b2acdb69ba02",e.SET_DEFAULT_SHOWN="3cd1d943-a682-4cc0-838a-fa7d5a703c6a",e.SET_DEFAULT_SKIPPED="55d5f98a-1075-4be4-9f9c-6d7811d071f9",e.SIGN_IN_CLICKED="f77e4b86-825c-426e-a82a-aad209df61c5",e.QR_CODE_SHOWN="c65308f2-77e7-43be-8510-9518850e4e42",e.ONBOARDING_RECOVERY_SHOWN="ffdcd43a-32b3-43be-9eee-6bd71509ba36",e.ONBOARDING_RECOVERY_DOWNLOAD_CLICKED="b7005ede-6612-4ac3-996f-bbdc05d395bf",e.ONBOARDING_RECOVERY_CONFIRMATION_SHOWN="9a2ff48e-c660-4f3f-94b2-45318a5fad4b",e.ONBOARDING_RECOVERY_CONFIRMATION_DOWNLOAD="5e5803ea-e56b-47ba-a520-d478f7e25a33",e.ONBOARDING_RECOVERY_CONFIRMATION_CANCEL="5751475b-8f2a-4d80-9b37-d2c429fd4867",e.ONBOARDING_RECOVERY_KEY_CREATION_SUCCESS="a22001e8-2815-4aba-a75c-55312ea042aa",e.ONBOARDING_RECOVERY_NEXT_CLICKED="9b70cb16-a99d-4775-a923-8a0f6b707e7c",e.POST_ONBOARDING_CTA_CLICKED="002a87db-65a9-4f0b-bb95-30e63ba8e5cf",e.POST_ONBOARDING_GUIDE_SHOWN="a1f75e5d-a3dd-4f0e-aec2-f9f43bb42578",e.POST_ONBOARDING_GUIDE_CLOSED="41b35828-0b0d-47b8-b555-dcf46d259d45",e.POST_ONBOARDING_GUIDE_CHANGED="b1d08e07-554b-49f8-b433-a4d4c716ad10",e.IMPORT_CLICKED="f2dedbf8-d18b-4862-bfb1-41fbb1e1d48e",e}(a||{}),u=function(e){return e.SIGN_IN_SUCCESSFUL="344f8063-1587-403d-a828-5da5093c5561",e.SIGN_OUT="466762c0-9832-4d3f-9603-970f9cd76123",e}(u||{}),l=function(e){return e.VAULT_SYNC="69ef34b6-079d-4ae0-82f3-d88916464dc7",e.LOGIN_GENERATED="1777805e-26cd-4758-9640-7553a645a0c2",e.ITEM_ADD="5e13030e-ea39-4b51-91ad-36d8a72055bd",e.ITEM_DETAILS="c3c62778-7ab7-4d16-a1de-266e15fdc090",e.ITEM_EDIT="8c1197c6-4661-407f-be7b-3e1955235500",e.ITEM_LIST_DISPLAYED="260ed203-037e-4186-b114-4b5f88cb9494",e.ITEM_SAVE="4bcd5f13-ff07-4230-96c1-8fd93565d9d3",e.ITEM_SAVED="c1d43328-e405-4392-90a3-15345a2624d8",e.ITEM_EDITED="171a89ce-43c7-437d-b515-b1142869cea8",e.ITEM_DELETED="b519c2b0-f77b-4662-a00e-996e165d2c77",e.ITEM_USED="da5b0b5f-5767-4074-b7eb-1e9349b46a42",e.ITEM_ERROR="8db31cbd-324f-424e-a1d1-accf03d806eb",e.TAG_ADDED="10baa225-fec3-4bb7-854c-c4dad9f5b7a3",e.TAG_REMOVED="6f6a5cfb-1ed4-4688-b573-b3931c5599a3",e}(l||{}),c=function(e){return e.RECOVERY_INFO_UPDATED="aa065291-a926-4a8e-9ce2-19fc0e2237c5",e.FORGOT_VAULT_PASSWORD_CLICKED="eade08e2-9c9d-4c84-cc24-ab19589e9576",e.RECOVERY_SHOWN="e1f82d78-277f-495f-eb45-5874d56ac99e",e.SHOW_HINT="90bc9206-1217-4958-8b56-5e08acb8c231",e.MOBILE_RECOVERY_CLICKED="a248423a-894c-494e-f9c6-787dfe9bb4dd",e.MOBILE_RECOVERY_INSTRUCTIONS_SHOWN="3128123b-03fe-4be8-a15d-cc7a00d4a3ed",e.MOBILE_RECOVERY_INSTRUCTIONS_GO_TO_VAULT_CLICKED="4ea275b1-f718-41aa-f521-7e54fd3fa32d",e.MOBILE_RECOVERY_INSTRUCTIONS_BACK="2585cc8a-0b6d-4c04-9fd8-d61e998f2251",e.USE_RECOVERY_KEY_CLICKED="ee01273e-a2be-41ff-8518-8c33d2de5881",e.RECOVERY_KEY_BACK="ac9feb07-f243-4a0e-e33d-6fddbe87a087",e.RECOVERY_KEY_SUCCESS="604bc73b-845b-42da-aa5c-7a5e1ad53ee7",e.RECOVERY_KEY_ERROR="86e0d46c-9df4-480c-ca72-4039d693dbf8",e.RESET_VAULT_CLICKED="97f4f061-5680-47ec-bea4-12ba71c53e8d",e.RESET_VAULT_SCREEN_SHOWN="67401bee-1ede-42ed-ee8a-cef15d44d77f",e.RESET_VAULT_CONFIRMED="ec8968d7-dfb1-4926-ef48-6f73bd0f8df5",e.RESET_VAULT_COMPLETED="b91f25cd-3543-4df6-a083-3db73d1ae9a4",e}(c||{}),d=function(e){return e.INITIATED="99eb4e23-8796-47ce-b601-499043272805",e.DISPLAYED="f7067f1e-bec4-497e-b0ef-f151aa4a1122",e.DEVICE_DROPDOWN="64cdaa6a-99b3-42c6-8626-bf8bd4d5934c",e.ENABLE="110ff7bf-4f14-4c73-9bf8-5ec1af5423b9",e.DISABLE="1f13283f-5f3d-4e79-bee6-b97290559d62",e.CANCEL="3d5f82e7-cd87-491a-8190-23db289bc695",e.SETUP_COMPLETE="116a83ea-4382-4fb6-93eb-7fd4c1af1c9f",e.EDIT="6162da11-e4c8-4e8e-8063-5a30a95ff30b",e.CHANGE_DEVICE="e4f2bcd5-a0a3-4249-8bd3-46d138c3a2dd",e}(d||{}),f=function(e){return e.ITEM_FILL_DISPLAYED="08c34ac3-3c05-4250-8513-4ac11a59b8f4",e.SAVE_NOTIFICATION_SHOWN="e1d53e7c-a90e-43a8-bc2e-b9fb6a1e8b14",e.SAVE_NOTIFICATION_CLICKED="cab9c318-86f1-4012-90af-7aec245008bb",e.MOT_WARNING_SHOWN="f5c2371e-cc0c-4953-885f-1e26cd125746",e.MOT_WARNING_CLICKED="0358fad6-6bdc-472b-86d0-e0ca487b1e59",e.PASSWORD_GENERATOR_DISPLAYED="12fffff0-cc44-4a57-b4ea-f55be93a31c7",e.PASSWORD_GENERATED="77a106c4-0a66-4862-817c-aafc60b46ec1",e.CHANGE_PASSWORD_INITIATED="0f556749-bf7a-4c22-806e-bbf116e7baac",e.AUTOCHANGE_PASSWORD_INITIATED="2f95b716-eedf-43df-b014-9fbc83168020",e.AUTOCHANGE_PASSWORD_COMPLETED="b898ff73-2841-4029-b0cb-ee267ae3914a",e.INFIELD_SIGN_IN_DISPLAYED="96c3a25e-1151-44ce-ba58-388513ecebad",e.INFIELD_UNLOCK_DISPLAYED="338bc151-da84-4acd-beb8-518c3c280198",e.INFIELD_SIGN_IN_CLICKED="9dec338b-b152-4397-a6f3-949d069fafc4",e}(f||{}),p=function(e){return e.INITIATED="9ba969fe-238e-4c92-a255-a778953b3230",e.DISPLAYED="784e9e98-9642-41fc-a8cf-7680e56d17c4",e.FAILED="f0166e9f-bf8b-41b2-8807-3cd6eff7ec17",e.COMPLETED="933f5ef1-9c26-491c-a61f-f25a00b2dbb8",e.CANCELLED="63cd9f93-b03c-4b61-9c9f-54672fb5eb70",e}(p||{}),h=function(e){return e.INITIATED="50305346-7ca4-4314-b4f3-9193c18ec7d7",e.COMPLETED="cb00c7d2-30f5-49fe-b6b9-3d409281371b",e.CANCELLED="8789d2e0-31fe-49cc-a14c-d23b8b1c5e3e",e.FAILED="0c9a8617-cc8f-41ca-80b9-74cc855f0802",e}(h||{}),_=function(e){return e.CHANGE_VAULT_PASSWORD_INITIATED="f75abe1e-c1f2-4711-f190-a0932b08137b",e.CHANGE_VAULT_PASSWORD_COMPLETED="e3966b7b-aaad-4bf8-c01a-f197351c7a34",e.CHANGE_VAULT_PASSWORD_FAILED="01d9ee88-8188-4e33-9623-998fbca83f2f",e}(_||{}),E=function(e){return e.FEEDBACK_INITIATED="26476979-4c81-4b48-bc8a-a2ff5de1a5b5",e}(E||{}),g=function(e){return e.SIGN_IN_STARTED="bfc7e109-aa0c-4912-a538-6d9710bab45c",e.SIGN_IN_COMPLETED="ebcf6fa6-0b25-484f-90ff-c027fd2d069e",e.SIGN_IN_FAILED="989acdee-09fb-4d54-a250-08106cd624d4",e}(g||{}),m=function(e){return e.WAX_ML_TELEMETRY="f69c6134-0fc4-4ecd-b03f-f401ad0fe71a",e}(m||{});const y=r.TELEMETRY_ACTIONS={GENERIC_ACTION:n,LIFECYCLE:o,VAULT_UNLOCK_AND_LOCK:i,ONBOARDING:a,USER_ACCOUNT:u,ENTRIES_RELATED:l,RECOVERY:c,SETTINGS_ACTION:s,PASSWORDLESS_UNLOCK:d,PASSWORD_RELATED_AND_INFIELD_EXPERIENCES:f,CHANGE_VAULT_PASSWORD_ACTION:_,IMPORT:p,EXPORT:h,FEEDBACK:E,CREATE_ACCOUNT_AND_SIGN_IN:g,WAX:m};r.REQUIRED_TELEMETRY_ACTIONS=[y.LIFECYCLE.HEARTBEAT,y.LIFECYCLE.INSTALL]},{}],175:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.TELEMETRY_PROJECT_TOKEN_MAP=r.TELEMETRY_PROJECT=void 0;var o=n(e("configuration"));let i=r.TELEMETRY_PROJECT=function(e){return e.GENERIC="GENERIC",e.ANONYMIZED="ANONYMIZED",e}({});const s=r.TELEMETRY_PROJECT_TOKEN_MAP={};s[i.GENERIC]=o.default.MIXPANEL_PROJECT_TOKEN,s[i.ANONYMIZED]=o.default.MIXPANEL_ANONYMIZED_PROJECT_TOKEN},{"@babel/runtime/helpers/interopRequireDefault":208,configuration:3}],176:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("common/global.types");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const u=new class{constructor(){(0,o.default)(this,"NO_SUBDOMAIN","No Subdomain"),(0,o.default)(this,"LIST_TYPE",{Favorites:"Favorites",Logins:"Logins",Cards:"Cards",Accounts:"Accounts",Addresses:"Addresses",Notes:"Notes"}),(0,o.default)(this,"CommonFormFields",{favorite:"Favorite",secure:"Vault password Enabled"}),(0,o.default)(this,"LoginFormFields",a(a({},this.CommonFormFields),{},{siteName:"Title",loginURL:"Website/App",username:"Username",password:"Password",notes:"Notes"})),(0,o.default)(this,"NoteFormFields",a(a({},this.CommonFormFields),{},{title:"Title",information:"Notes"})),(0,o.default)(this,"AddressFormFields",a(a({},this.CommonFormFields),{},{city:"City",postal:"Postal",state:"State",street:"Street",street2:"Street 2",street3:"Street 3",apt:"Apt",cityDistrictWardAndNumbers:"City District Ward Number",buildingNameAndFloor:"Building Name and Floor",cityAlphabet:"City Alphabet",streetAlphabet:"Street Alphabet",street2Alphabet:"Street2A Alphabet",addressName:"Address Name",region:"Region",salutation:"Salutation",firstName:"First Name",middleName:"Middle Name",lastName:"Last Name",lastName2:"Last Name2",firstNameAlphabet:"First Name Alphabet",lastNameAlphabet:"Last Name Alphabet",firstNameRoman:"First Name Roman",lastNameRoman:"Last Name Roman",dobDay:"DOB Day",dobMonth:"DOB Month",dobYear:"DOB Year",email:"Email",work:"Work",home:"Home",mobile:"Mobile",extension:"Extension",gender:"Gender",cardName:"Title"})),(0,o.default)(this,"AccountFormFields",a(a({},this.CommonFormFields),{},{accountName:"Account Name",ownerName:"Owner Name",routingNumber:"Routing Number",accountNumber:"Account Number",bankName:"Bank Name",iban:"IBAN",swiftCode:"Swift Code"})),(0,o.default)(this,"CardFormFields",a(a({},this.CommonFormFields),{},{cardName:"Title",cardNumber:"Card Number",nameOnCard:"Name on Card",expMonth:"Expiry Month",expYear:"Expiry Year",cardComments:"Card Notes",cardPin:"Card Pin",cvc:"CVV"})),(0,o.default)(this,"ItemFormFields",{[i.ItemCategory.Login]:this.LoginFormFields,[i.ItemCategory.Note]:this.NoteFormFields,[i.ItemCategory.Address]:this.AddressFormFields,[i.ItemCategory.BankAccount]:this.AccountFormFields,[i.ItemCategory.CreditCard]:this.CardFormFields})}};Object.freeze(u);r.default=u},{"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"common/global.types":16}],177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VaultAccessRecoveryContextType=r.ResetVaultContext=r.HintActions=r.AvailableRecoveryOptions=void 0;e("telemetry/constants");r.VaultAccessRecoveryContextType=function(e){return e.RecoveryFlow="Recovery Flow",e.ChangeVaultPasswordFlow="Change Vault Password Flow",e}({}),r.ResetVaultContext=function(e){return e.UnlockVaultUI="Unlock Vault UI",e.SettingsUI="Settings",e}({}),r.AvailableRecoveryOptions=function(e){return e.VaultPasswordHint="VaultPasswordHint",e.UseMobileApp="UseMobileApp",e.UseRecoveryKey="UseRecoveryKey",e}({}),r.HintActions=function(e){return e.Show="Show",e.Hide="Hide",e}({})},{"telemetry/constants":173}],178:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ItemUsedIn=void 0;e("telemetry/constants");r.ItemUsedIn=function(e){return e.Browser="Browser",e}({})},{"telemetry/constants":173}],179:[function(e,t,r){"use strict";e("telemetry/constants")},{"telemetry/constants":173}],180:[function(e,t,r){"use strict";e("telemetry/constants")},{"telemetry/constants":173}],181:[function(e,t,r){"use strict";e("telemetry/constants")},{"telemetry/constants":173}],182:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignInProvider=r.SignInMethod=void 0;e("telemetry/constants");r.SignInMethod=function(e){return e.Partner="Partner",e.SSO="SSO",e.Email="E-mail",e}({}),r.SignInProvider=function(e){return e.NORTON="NORTON",e}({})},{"telemetry/constants":173}],183:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VaultItemCategory=r.TagType=r.TagActionContext=r.SortedBy=r.List=r.ItemSaveContext=r.ItemListDisplayedContext=r.ItemErrorCard=r.ItemError=r.ItemEditContext=r.ItemDetailsContext=r.ItemDeletedContext=r.ItemCategoryTags=r.ItemAddContext=r.ItemAction=r.FiltersWallet=r.Filters=r.FilteredByWallet=r.FilteredBy=r.EntriesRelatedCommonContext=void 0;var n=e("common/global.types");e("telemetry/constants");r.List=function(e){return e.Logins="Logins",e.Wallet="Wallet",e.Favorites="Favorites",e.Addresses="Addresses",e.Notes="Notes",e}({}),r.SortedBy=function(e){return e.LastModified="Last Modified",e.Name="Name",e}({});let o=r.FilteredBy=function(e){return e.All="All",e.Logins="Logins",e.Cards="Cards",e.Accounts="Accounts",e.Addresses="Addresses",e.Notes="Notes",e.Tags="Tags",e}({});r.Filters=Object.values(o);let i=r.FilteredByWallet=function(e){return e.All="All",e.Cards="Credit Card",e.Accounts="Bank Account",e.Tags="Tags",e}({});r.FiltersWallet=Object.values(i);r.ItemAction=function(e){return e.Autofill="Autofill",e.CopyPassword="Copy Password",e.CopyUsername="Copy Username",e.CopyAccountNumber="Copy Account number",e.CopyIBAN="Copy IBAN",e.CopyRoutingNumber="Copy Routing Number",e.CopySWIFT="Copy SWIFT",e.CopyAccountOwner="Copy Account Owner",e.CopyNotes="Copy Notes",e.CopyName="Copy Name",e.CopyAddress="Copy Address",e.CopyCardNumber="Copy Card Number",e.CopyNameOnCard="Copy Name on Card",e}({}),r.ItemErrorCard=function(e){return e.InvalidCardNumebr="Invalid Card Number",e.ExpiredSoon="Expires Soon",e.ExpiredCard="Expired Card",e}({}),r.ItemError=function(e){return e.TitleMissing="Title Missing",e.SessionExpired="Session Expired (Something Went Wrong)",e}({});r.VaultItemCategory=Object.values(n.ItemCategory);r.TagType=function(e){return e.New="New",e.Existing="Existing",e}({}),r.ItemCategoryTags=function(e){return e.login="Login",e.creditCard="Credit Card",e.bankAccount="Bank Account",e.note="Note",e.identity="Address",e}({}),r.ItemListDisplayedContext=function(e){return e.LeftNavigation="Left Navigation",e.AddNewBack="Add New Back",e.AddNewCancel="Add New Cancel",e.DetailBack="Details Back",e.SettingsClose="Settings Close",e.Search="Search",e.Filter="Filter",e.SDClose="SD Close",e}({}),r.ItemDetailsContext=function(e){return e.AddSaved="Add Saved",e.EditSaved="Edit Saved",e.EditCancel="Edit Cancel",e.EditBack="Edit Back",e.SDListView="SD ListView",e.SecureValidationSuccess="Secure Validation Success",e}({}),r.ItemAddContext=function(e){return e.LoginsListAddButton="Logins List Add Button",e.ListAddButton="List Add Button",e}({}),r.ItemSaveContext=function(e){return e.AddItemScreen="Add Item Screen",e.SaveNotification="Save Notification",e.Import="Import",e.MOTCompromisedNotification="MOT Compromised Notification",e}({}),r.ItemDeletedContext=function(e){return e.DetailDelete="Detail Delete",e}({}),r.ItemEditContext=function(e){return e.DetailEdit="Detail Edit",e}({}),r.EntriesRelatedCommonContext=function(e){return e.Details="Details View",e.DetailsView="Details View",e.ListHover="List Hover",e.ListContext="List Context",e.FavoritesListHover="Favorites List Hover",e.FavoritesListContext="Favorites List Context",e.DeleteConfirm="Delete Confirm",e.DeleteCancel="Delete Cancel",e.SecureValidationSuccess="Secure Validation Success",e.SecureValidationCancel="Secure Validation Cancel",e.SecureValidationThresholdExceeded="Secure Validation Threshold Exceeded",e}({}),r.TagActionContext=function(e){return e.add="Add Screen",e.edit="Edit Screen",e.details="Details Screen",e}({})},{"common/global.types":16,"telemetry/constants":173}],184:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FeedbackInitiatedContext=void 0;e("telemetry/constants");r.FeedbackInitiatedContext=function(e){return e.ProfileMenu="Profile Menu",e.ExtensionPopoverMenu="Extension Popover Menu",e}({})},{"telemetry/constants":173}],185:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Platform=r.InstallPropertyDefaultValues=r.ExtensionType=r.BrowserSettingLevelOfControl=void 0;e("telemetry/constants");r.InstallPropertyDefaultValues=function(e){return e.NONE="None",e.EXISTING="Existing",e}({});r.Platform="Extension";r.BrowserSettingLevelOfControl=function(e){return e.NotControllable="not_controllable",e.ControlledByOtherExtensions="controlled_by_other_extensions",e.ControllableByThisExtension="controllable_by_this_extension",e.ControlledByThisExtension="controlled_by_this_extension",e}({}),r.ExtensionType=function(e){return e.FirefoxExtension="Firefox Extension",e.ChromeExtension="Chrome Extension",e.EdgeExtension="Edge Extension",e.SafariExtension="Safari Extension",e}({})},{"telemetry/constants":173}],186:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./telemetryServiceManager.types");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=e("./telemetryActions.types");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./telemetryHandler.types");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=e("./globalEventProperty.types");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=e("./telemetryContexts.types");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}}))}));var u=e("./entriesRelatedTelemetry.types");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=e("./feedbackTelemetry.types");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===l[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}}))}));var c=e("./infieldExperiencesTelemetry.types");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}}))}));var d=e("./createAccountAndSignInTelemetry.types");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===d[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=e("./anonymizedEntriesRelatedTelemetry.types");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===f[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=e("./anonymizedInfieldExperiencesTelemetry.types");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===p[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}}))}));var h=e("./anonymizedWaxMLTelemetry.types");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===h[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return h[e]}}))}));var _=e("./anonymizedEventHandlerTelemetry.types");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===_[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return _[e]}}))}))},{"./anonymizedEntriesRelatedTelemetry.types":178,"./anonymizedEventHandlerTelemetry.types":179,"./anonymizedInfieldExperiencesTelemetry.types":180,"./anonymizedWaxMLTelemetry.types":181,"./createAccountAndSignInTelemetry.types":182,"./entriesRelatedTelemetry.types":183,"./feedbackTelemetry.types":184,"./globalEventProperty.types":185,"./infieldExperiencesTelemetry.types":187,"./telemetryActions.types":190,"./telemetryContexts.types":191,"./telemetryHandler.types":192,"./telemetryServiceManager.types":193}],187:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WarningNotificationReason=r.WarningNotificationAction=r.SaveNotificationClickedType=r.SaveNotificationClickedAction=r.PasswordGeneratorDisplayedContextType=r.PasswordGeneratedActionProp=r.LoginNotificationType=r.ItemFillDisplayedType=r.InfieldPopupTypes=r.InfieldPopupDisplayedContext=r.InfieldPopupButton=r.InfieldElementCategory=r.AutochangePasswordInitiatedContext=r.AutochangePasswordCompletedType=r.AutochangePasswordCompletedContext=r.AskMeLaterDetails=void 0;e("telemetry/constants");r.InfieldElementCategory=function(e){return e.Login="Login",e.CreditCard="Credit Card",e.BankAccount="Bank Account",e}({}),r.LoginNotificationType=function(e){return e.Save="Save",e.Update="Update",e}({}),r.WarningNotificationReason=function(e){return e.CompromisedPassword="Compromised Password",e}({}),r.WarningNotificationAction=function(e){return e.Askmelater="Ask Me Later",e.Close="Close",e.ChangePassword="Change Password",e.LearnMore="Learn More",e}({}),r.InfieldPopupTypes=function(e){return e.SignIn="Sign In",e.Unlock="Unlock",e}({}),r.InfieldPopupButton=function(e){return e.SignIn="Sign In",e.Unlock="Unlock",e.Askmelater="Ask me later",e}({}),r.InfieldPopupDisplayedContext=function(e){return e.InfieldIconClick="Infield Icon Click",e.OnPageLoad="On Page Load",e.InputFieldClick="Input Field Click",e}({}),r.AskMeLaterDetails=function(e){return e.NextTime="Next Time",e.After30Days="After 30 Days",e.After6Months="After 6 Months",e}({}),r.SaveNotificationClickedType=function(e){return e.Save="Save",e.Update="Update",e.SuccessConfirmation="Success Confirmation",e}({}),r.SaveNotificationClickedAction=function(e){return e.Close="Close",e.Save="Save",e.Update="Update",e.Askmelater="Ask Me Later",e.ThreeDotsMenu="Three Dots Menu",e}({}),r.ItemFillDisplayedType=function(e){return e.SingleItem="Single Item",e.MultipleItems="Multiple Items",e.NoMatchingItems="No Matching Items",e}({}),r.PasswordGeneratorDisplayedContextType=function(e){return e.LeftNavigation="Left Navigation",e.InfieldFillUI="Infield Fill UI",e.WebsiteChangePassword="Website Change Password",e.AddLoginScreen="Add Login Screen",e.EditLogin="Edit Login",e}({}),r.PasswordGeneratedActionProp=function(e){return e.Copy="Copy",e.UsePassword="Use Password",e.GenerateNew="Generate New",e}({}),r.AutochangePasswordInitiatedContext=function(e){return e.SafetyDashboard="Safety Dashboard",e.MOTCompromisedNotification="MOT Compromised notification",e}({}),r.AutochangePasswordCompletedContext=function(e){return e.SafetyDashboard="Safety Dashboard",e.MOTCompromisedNotification="MOT Compromised notification",e}({}),r.AutochangePasswordCompletedType=function(e){return e.Success="Success",e.Cancelled="Cancelled",e.Failed="Failed",e}({})},{"telemetry/constants":173}],188:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CONTEXT_ACTION=r.AppOpenContextScreen=r.AppOpenContextActionVaultUI=r.AppOpenContextActionInfieldPopup=r.AppOpenContextActionInfieldNotification=r.AppOpenContextActionExtensionPopover=r.AppOpenContextActionExtensionInstall=r.AppOpenContextActionExtensionIcon=void 0;e("telemetry/constants");r.AppOpenContextScreen=function(e){return e.RestartUnlock="Restart Unlock",e.ExtensionIcon="Extension Icon",e.ExtensionPopover="Extension Popover",e.OnboardSetup="Onboard Setup",e.VaultUI="Vault UI",e.InfieldPopup="Infield Popup",e.InfieldNotification="Infield Notification",e.VaultUnlocked="Vault Unlocked",e.VaultCreated="Vault Created",e}({});let n=r.AppOpenContextActionExtensionInstall=function(e){return e.SigninButton="Sign In Button",e.SeamlessQRCode="Seamless QR Code",e}({}),o=r.AppOpenContextActionExtensionIcon=function(e){return e.ExtensionIconClick="Extension Icon Click",e}({}),i=r.AppOpenContextActionExtensionPopover=function(e){return e.OpenWebApp="Open web app",e.SignInButton="Sign In Button",e.UnlockButton="Unlock Button",e.PasswordGenerator="Password Generator",e.PasswordProtectedItem="Password Protected Item",e.SeeAllSettings="See all settings",e.ImportData="Import data",e.AddItemButton="Add Item Button",e.EditItemButton="Edit Item Button",e}({}),s=r.AppOpenContextActionVaultUI=function(e){return e.WhatsNewFeaturePopup="Whats New Feature Popup",e.UnlockSuccess="Unlock Success",e}({}),a=r.AppOpenContextActionInfieldPopup=function(e){return e.OpenWebApp="Open web app",e.SignInButton="Sign In Button",e.UnlockButton="Unlock Button",e}({}),u=r.AppOpenContextActionInfieldNotification=function(e){return e.GoToSafetyDashboard="Go to Safety Dashboard",e.CompromisedPasswordFixNow="Compromised Password Fix Now",e.PasswordlessVaultUnlockSetupNow="Passwordless Vault Unlock Setup Now",e.PasswordlessVaultUnlockResend="Passwordless Vault Unlock Resend",e.EnterVaultPassword="Enter Vault Password",e.Import="Import",e}({});r.CONTEXT_ACTION={EXTENSION_INSTALL:n,EXTENSION_ICON:o,EXTENSION_POPOVER:i,VAULT_UI:s,INFIELD_POPUP:a,INFIELD_NOTIFICATION:u}},{"telemetry/constants":173}],189:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionsRequested=r.FlowType=r.CardShown=r.CardAction=r.BenefitsShown=void 0;e("telemetry/constants");r.BenefitsShown=function(e){return e.MultiDevice="Multi-device",e.Encryption="Encryption",e.Trust="Trust",e}({}),r.PermissionsRequested=function(e){return e.Default="default",e}({}),r.CardShown=function(e){return e.Import="Import",e.Manual="Manual",e.SaveNotification="Save Notification",e}({}),r.FlowType=function(e){return e.Reset="Reset",e.Upgrade="Upgrade",e.Create="Create",e}({}),r.CardAction=function(e){return e.Expand="Expand",e.Collapse="Collapse",e}({})},{"telemetry/constants":173}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],191:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnlockContext=r.LockContext=r.CommonContext=r.AppOpenContext=void 0;r.AppOpenContext=function(e){return e.PopoverOpenWebApp="Open Web App",e.InfieldPopup="Infield Popup",e.ExtensionIcon="Extension Icon",e}({}),r.CommonContext=function(e){return e.ExtensionPopover="Extension Popover",e.ExtensionIcon="Extension Icon",e.WhatsNewFeature="Whats New feature",e.BreachPasswordSave="Breach Password Save",e}({}),r.UnlockContext=function(e){return e.InfieldUnlockUI="Infield Unlock UI",e.RestartUnlock="Restart Unlock",e.ChangeVaultPassword="Change Vault Password",e}({}),r.LockContext=function(e){return e.ExtensionPopover="Extension Popover",e.WebApp="Web App",e.SPOCTriggered="SPOC Triggered",e.ExpiredDatastoreCookie="Cookie Expired",e.ExpiredSSOToken="SSO Token Expired",e.SignOut="SignOut",e}({})},{}],192:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],193:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetryTrackingLevel=void 0;r.TelemetryTrackingLevel=function(e){return e[e.ALLOW_ALL=0]="ALLOW_ALL",e[e.ALLOW_MANDATORY=1]="ALLOW_MANDATORY",e[e.ALLOW_NONE=2]="ALLOW_NONE",e}({})},{}],194:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignOutType=r.ErrorCausingSignOut=void 0;e("telemetry/constants");r.SignOutType=function(e){return e.Manual="Manual",e.VaultDeletion="Vault Deletion",e.Error="Error",e.ExceededAttempt="Exceeded Attempt",e}({}),r.ErrorCausingSignOut=function(e){return e.ExpiredSSOToken="Expired SSO Token",e.ExceededAttempt="Exceeded Attempt",e}({})},{"telemetry/constants":173}],195:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VaultUnlockMethod=r.VaultUnlockFailureCause=r.VaultLockType=r.ErrorCausingVaultLock=void 0;e("telemetry/constants");r.VaultUnlockMethod=function(e){return e.VaultPassword="Vault password",e.PasswordlessVaultUnlock="Passwordless vault unlock",e.SeamlessQRCode="Seamless QR Unlock",e.AutoUnlock="Auto Unlock",e.MaxRetryLimit="Max Retry Limit",e}({}),r.VaultLockType=function(e){return e.Manual="Manual",e.ChangeVaultPassword="Change Vault Password",e.DeleteVault="Delete Vault",e.SignOut="Sign Out",e.PostRecovery="Post Recovery",e.Error="Error",e.AUTO_UNLOCK="Auto unlock period expires",e}({}),r.VaultUnlockFailureCause=function(e){return e.IncorrectPassword="Incorrect Vault Password",e.PasswordlessVaultUnlockRequestFailed="Communication Issue",e.PasswordlessVaultUnlockRequestRejected="User denied",e.PasswordlessVaultUnlockRequestTimeOut="Timeout",e.VaultUnlockMaxAttempt="Incorrect Vault password Max Attempt",e}({}),r.ErrorCausingVaultLock=function(e){return e.ExpiredDatastoreCookie="Cookie Expired",e.ExpiredSSOToken="SSO Token Expired",e.VaultUnlockMaxAttempt="Alarm set for 5 minutes to prevent further attempts",e}({})},{"telemetry/constants":173}],196:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(e){return function(){return function(t){return function(r){var n=e[r.type];return t(n?n(r):r)}}}}},{}],197:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATE_TYPE=r.PATCH_STATE_TYPE=r.DISPATCH_TYPE=r.DEFAULT_PORT_NAME=void 0;r.DISPATCH_TYPE="chromex.dispatch";r.STATE_TYPE="chromex.state";r.PATCH_STATE_TYPE="chromex.patch_state";r.DEFAULT_PORT_NAME="chromex.port_name"},{}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Store",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"alias",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"applyMiddleware",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"wrapStore",{enumerable:!0,get:function(){return i.default}});var n=a(e("./store/Store")),o=a(e("./store/applyMiddleware")),i=a(e("./wrap-store/wrapStore")),s=a(e("./alias/alias"));function a(e){return e&&e.__esModule?e:{default:e}}},{"./alias/alias":196,"./store/Store":200,"./store/applyMiddleware":201,"./wrap-store/wrapStore":206}],199:[function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.withSerializer=r.withDeserializer=r.noop=void 0;var s=function(e){return e};r.noop=s;var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return o(o({},e),e.payload?{payload:t(e.payload)}:{})};r.withDeserializer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return function(t){return function(r,n){return t(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2?arguments[2]:void 0;return r?function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];return r.apply(void 0,[n].concat(i))?e.apply(void 0,[a(n,t)].concat(i)):e.apply(void 0,[n].concat(i))}:function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e.apply(void 0,[a(r,t)].concat(o))}}(r,e,n))}}};r.withSerializer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];if(o.length<=r)throw new Error("Message in request could not be serialized. "+"Expected message in position ".concat(r," but only received ").concat(o.length," args."));return o[r]=a(o[r],e),t.apply(void 0,o)}}}},{}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("lodash.assignin")),o=e("../constants"),i=e("../serialization"),s=u(e("../strategies/shallowDiff/patch")),a=e("../util");function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c="\nLooks like there is an error in the background page. You might want to inspect your background page for more details.\n",d={portName:o.DEFAULT_PORT_NAME,state:{},extensionId:null,serializer:i.noop,deserializer:i.noop,patchStrategy:s.default},f=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=r.portName,o=void 0===n?d.portName:n,s=r.state,u=void 0===s?d.state:s,l=r.extensionId,c=void 0===l?d.extensionId:l,f=r.serializer,p=void 0===f?d.serializer:f,h=r.deserializer,_=void 0===h?d.deserializer:h,E=r.patchStrategy,g=void 0===E?d.patchStrategy:E,m=r.maxReconnects,y=void 0===m?d.maxReconnects:m;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!o)throw new Error("portName is required in options");if("function"!=typeof p)throw new Error("serializer must be a function");if("function"!=typeof _)throw new Error("deserializer must be a function");if("function"!=typeof g)throw new Error("patchStrategy must be one of the included patching strategies or a custom patching function");this.id="".concat(Math.random(),".").concat((new Date).getTime()),this.maxReconnects=y,this.portName=o,this.readyResolved=!1,this.readyPromise=new Promise((function(e){t.readyResolve=e})),this.browserAPI=(0,a.getBrowserAPI)(),this.extensionId=c,this.serializedMessageSender=(0,i.withSerializer)(p)((function(){var e;(e=t.browserAPI.runtime).sendMessage.apply(e,arguments)}),1),this.listeners=[],this.state=u,this.patchStrategy=g,this.safetyHandler=this.safetyHandler.bind(this),this.browserAPI.runtime.onMessage&&(this.safetyMessage=this.browserAPI.runtime.onMessage.addListener(this.safetyHandler)),this.dispatch=this.dispatch.bind(this),this.connect(_)}var t,r,s;return t=e,r=[{key:"connect",value:function(e){var t=this;this.browserAPI.runtime.lastError,this.port=this.browserAPI.runtime.connect(this.extensionId,{name:this.portName}),this.port.onDisconnect.addListener((function(){setTimeout((function(){t.browserAPI.runtime.sendMessage(t.extensionId,{type:"ping"},(function(r){t.connect(e)}))}),1)})),this.serializedPortListener=(0,i.withDeserializer)(e)((function(){var e;(e=t.port.onMessage).addListener.apply(e,arguments)})),this.serializedPortListener((function(e){switch(e.type){case o.STATE_TYPE:t.replaceState(e.payload),t.readyResolved||(t.readyResolved=!0,t.readyResolve());break;case o.PATCH_STATE_TYPE:t.patchState(e.payload)}}))}},{key:"ready",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?this.readyPromise.then(e):this.readyPromise}},{key:"subscribe",value:function(e){var t=this;return this.listeners.push(e),function(){t.listeners=t.listeners.filter((function(t){return t!==e}))}}},{key:"patchState",value:function(e){this.state=this.patchStrategy(this.state,e),this.listeners.forEach((function(e){return e()}))}},{key:"replaceState",value:function(e){this.state=e,this.listeners.forEach((function(e){return e()}))}},{key:"getState",value:function(){return this.state}},{key:"replaceReducer",value:function(){}},{key:"dispatch",value:function(e){var t=this;return new Promise((function(r,i){t.serializedMessageSender(t.extensionId,{type:o.DISPATCH_TYPE,portName:t.portName,payload:e},null,(function(e){if(e){var o=e.error,s=e.value;o?(u=new Error("".concat(c).concat(o)),i((0,n.default)(u,o))):r(s&&s.payload)}else{var a=t.browserAPI.runtime.lastError,u=new Error("".concat(c).concat(a));i((0,n.default)(u,a))}}))}))}},{key:"safetyHandler",value:function(e){"storeReady"===e.action&&e.portName===this.portName&&(this.browserAPI.runtime.onMessage.removeListener(this.safetyHandler),this.readyResolved||(this.readyResolved=!0,this.readyResolve()))}}],r&&l(t.prototype,r),s&&l(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p=f;r.default=p},{"../constants":197,"../serialization":199,"../strategies/shallowDiff/patch":204,"../util":205,"lodash.assignin":499}],201:[function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},a={getState:e.getState.bind(e),dispatch:function(){return s.apply(void 0,arguments)}};return r=(r||[]).map((function(e){return e(a)})),s=o.apply(void 0,function(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r))(e.dispatch),e.dispatch=s,e}},{}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DIFF_STATUS_UPDATED=r.DIFF_STATUS_REMOVED=r.DIFF_STATUS_KEYS_UPDATED=r.DIFF_STATUS_ARRAY_UPDATED=void 0;r.DIFF_STATUS_UPDATED="updated";r.DIFF_STATUS_REMOVED="removed";r.DIFF_STATUS_KEYS_UPDATED="updated_keys";r.DIFF_STATUS_ARRAY_UPDATED="updated_array"},{}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=[];return Object.keys(t).forEach((function(o){e[o]!==t[o]&&r.push({key:o,value:t[o],change:n.DIFF_STATUS_UPDATED})})),Object.keys(e).forEach((function(e){t.hasOwnProperty(e)||r.push({key:e,change:n.DIFF_STATUS_REMOVED})})),r};var n=e("../constants")},{"../constants":202}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=Object.assign({},e);return t.forEach((function(e){var t=e.change,o=e.key,i=e.value;switch(t){case n.DIFF_STATUS_UPDATED:r[o]=i;break;case n.DIFF_STATUS_REMOVED:Reflect.deleteProperty(r,o)}})),r};var n=e("../constants")},{"../constants":202}],205:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBrowserAPI=function(){var e;try{e=self.chrome||self.browser||browser}catch(t){e=browser}if(!e)throw new Error("Browser API is not present");return e}},{}],206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=e("../constants"),i=e("../serialization"),s=e("../util"),a=(n=e("../strategies/shallowDiff/diff"))&&n.__esModule?n:{default:n};function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c={portName:o.DEFAULT_PORT_NAME,dispatchResponder:function(e,t){Promise.resolve(e).then((function(e){t({error:null,value:e})})).catch((function(e){console.error("error dispatching result:",e),t({error:e.message,value:null})}))},serializer:i.noop,deserializer:i.noop,diffStrategy:a.default};r.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,r=t.portName,n=void 0===r?c.portName:r,a=t.dispatchResponder,l=void 0===a?c.dispatchResponder:a,d=t.serializer,f=void 0===d?c.serializer:d,p=t.deserializer,h=void 0===p?c.deserializer:p,_=t.diffStrategy,E=void 0===_?c.diffStrategy:_;if(!n)throw new Error("portName is required in options");if("function"!=typeof f)throw new Error("serializer must be a function");if("function"!=typeof h)throw new Error("deserializer must be a function");if("function"!=typeof E)throw new Error("diffStrategy must be one of the included diffing strategies or a custom diff function");var g=(0,s.getBrowserAPI)(),m=function(t,r,i){if(t.type===o.DISPATCH_TYPE&&t.portName===n){var s=Object.assign({},t.payload,{_sender:r}),a=null;try{a=e.dispatch(s)}catch(e){a=Promise.reject(e.message),console.error(e)}return l(a,i),!0}},y=function(t){if(t.name===n){var r=(0,i.withSerializer)(f)((function(){return t.postMessage.apply(t,arguments)})),s=e.getState(),a=e.subscribe((function(){var t=e.getState(),n=E(s,t);n.length&&(s=t,r({type:o.PATCH_STATE_TYPE,payload:n}))}));t.onDisconnect.addListener(a),r({type:o.STATE_TYPE,payload:s})}},S=(0,i.withDeserializer)(h),T=function(e){return e.type===o.DISPATCH_TYPE&&e.portName===n};S((function(){var e;return(e=g.runtime.onMessage).addListener.apply(e,arguments)}))(m,T),g.runtime.onMessageExternal?S((function(){var e;return(e=g.runtime.onMessageExternal).addListener.apply(e,arguments)}))(m,T):console.warn("runtime.onMessageExternal is not supported"),g.runtime.onConnect.addListener(y),g.runtime.onConnectExternal?g.runtime.onConnectExternal.addListener(y):console.warn("runtime.onConnectExternal is not supported"),g.tabs.query({},(function(e){var t,r=u(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;g.tabs.sendMessage(o.id,{action:"storeReady",portName:n},(function(){chrome.runtime.lastError}))}}catch(e){r.e(e)}finally{r.f()}}))}},{"../constants":197,"../serialization":199,"../strategies/shallowDiff/diff":203,"../util":205}],207:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{}],208:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],209:[function(e,t,r){var n=e("./objectWithoutPropertiesLoose");t.exports=function(e,t){if(null==e)return{};var r,o,i=n(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},{"./objectWithoutPropertiesLoose":210}],210:[function(e,t,r){t.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}},{}],211:[function(e,t,r){(function(n,o){(function(){(function(){var i=i||{};i.scope={},i.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},i.arrayIterator=function(e){return{next:i.arrayIteratorImpl(e)}},i.ASSUME_ES5=!1,i.ASSUME_NO_NATIVE_MAP=!1,i.ASSUME_NO_NATIVE_SET=!1,i.SIMPLE_FROUND_POLYFILL=!1,i.ISOLATE_POLYFILLS=!1,i.FORCE_POLYFILL_PROMISE=!1,i.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,i.defineProperty=i.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},i.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof o&&o];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},i.global=i.getGlobal(this),i.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),i.TRUST_ES6_POLYFILLS=!i.ISOLATE_POLYFILLS||i.IS_SYMBOL_NATIVE,i.polyfills={},i.propertyToPolyfillSymbol={},i.POLYFILL_PREFIX="$jscp$";var s,a;i.polyfill=function(e,t,r,n){t&&(i.ISOLATE_POLYFILLS?i.polyfillIsolated(e,t,r,n):i.polyfillUnisolated(e,t,r,n))},i.polyfillUnisolated=function(e,t,r,n){for(r=i.global,e=e.split("."),n=0;n<e.length-1;n++){var o=e[n];if(!(o in r))return;r=r[o]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&i.defineProperty(r,e,{configurable:!0,writable:!0,value:t})},i.polyfillIsolated=function(e,t,r,n){var o=e.split(".");e=1===o.length,n=o[0],n=!e&&n in i.polyfills?i.polyfills:i.global;for(var s=0;s<o.length-1;s++){var a=o[s];if(!(a in n))return;n=n[a]}o=o[o.length-1],null!=(t=t(r=i.IS_SYMBOL_NATIVE&&"es6"===r?n[o]:null))&&(e?i.defineProperty(i.polyfills,o,{configurable:!0,writable:!0,value:t}):t!==r&&(void 0===i.propertyToPolyfillSymbol[o]&&(r=1e9*Math.random()>>>0,i.propertyToPolyfillSymbol[o]=i.IS_SYMBOL_NATIVE?i.global.Symbol(o):i.POLYFILL_PREFIX+r+"$"+o),i.defineProperty(n,i.propertyToPolyfillSymbol[o],{configurable:!0,writable:!0,value:t})))},i.initSymbol=function(){},i.polyfill("Symbol",(function(e){if(e)return e;var t=function(e,t){this.$jscomp$symbol$id_=e,i.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};t.prototype.toString=function(){return this.$jscomp$symbol$id_};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",n=0,o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return new t(r+(e||"")+"_"+n++,e)};return o}),"es6","es3"),i.polyfill("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var n=i.global[t[r]];"function"==typeof n&&"function"!=typeof n.prototype[e]&&i.defineProperty(n.prototype,e,{configurable:!0,writable:!0,value:function(){return i.iteratorPrototype(i.arrayIteratorImpl(this))}})}return e}),"es6","es3"),i.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},i.createTemplateTagFirstArg=function(e){return e.raw=e},i.createTemplateTagFirstArgWithRaw=function(e,t){return e.raw=t,e},i.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):i.arrayIterator(e)},i.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},i.arrayFromIterable=function(e){return e instanceof Array?e:i.arrayFromIterator(i.makeIterator(e))},i.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.assign=i.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var o in n)i.owns(n,o)&&(e[o]=n[o])}return e},i.polyfill("Object.assign",(function(e){return e||i.assign}),"es6","es3"),i.objectCreate=i.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t},i.getConstructImplementation=function(){if(i.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(function(){function e(){}return new e,Reflect.construct(e,[],(function(){})),new e instanceof e}())return Reflect.construct;var e=Reflect.construct;return function(t,r,n){return t=e(t,r),n&&Reflect.setPrototypeOf(t,n.prototype),t}}return function(e,t,r){return void 0===r&&(r=e),r=i.objectCreate(r.prototype||Object.prototype),Function.prototype.apply.call(e,r,t)||r}},i.construct=i.getConstructImplementation(),i.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},i.setPrototypeOf=i.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:i.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,i.inherits=function(e,t){if(e.prototype=i.objectCreate(t.prototype),e.prototype.constructor=e,i.setPrototypeOf){var r=i.setPrototypeOf;r(e,t)}else for(r in t)if("prototype"!=r)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}else e[r]=t[r];e.superClass_=t.prototype},i.generator={},i.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},i.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},i.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},i.generator.Context.prototype.stop_=function(){this.isRunning_=!1},i.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},i.generator.Context.prototype.next_=function(e){this.yieldResult=e},i.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},i.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},i.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},i.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},i.generator.Context.prototype.yieldAll=function(e,t){var r=(e=i.makeIterator(e)).next();if(i.generator.ensureIteratorResultIsObject_(r),!r.done)return this.yieldAllIterator_=e,this.yield(r.value,t);this.yieldResult=r.value,this.nextAddress=t},i.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},i.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},i.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,null!=t&&(this.finallyAddress_=t)},i.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},i.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},i.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},i.generator.Context.prototype.enterFinallyBlock=function(e,t,r){r?this.finallyContexts_[r]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},i.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();null!=t.jumpTo&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},i.generator.Context.prototype.forIn=function(e){return new i.generator.Context.PropertyIterator(e)},i.generator.Context.PropertyIterator=function(e){for(var t in this.object_=e,this.properties_=[],e)this.properties_.push(t);this.properties_.reverse()},i.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},i.generator.Engine_=function(e){this.context_=new i.generator.Context,this.program_=e},i.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},i.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(e){return{value:e,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},i.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},i.generator.Engine_.prototype.yieldAllStep_=function(e,t,r){try{var n=e.call(this.context_.yieldAllIterator_,t);if(i.generator.ensureIteratorResultIsObject_(n),!n.done)return this.context_.stop_(),n;var o=n.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}return this.context_.yieldAllIterator_=null,r.call(this.context_,o),this.nextStep_()},i.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},i.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},i.generator.createGenerator=function(e,t){return t=new i.generator.Generator_(new i.generator.Engine_(t)),i.setPrototypeOf&&e.prototype&&i.setPrototypeOf(t,e.prototype),t},i.asyncExecutePromiseGenerator=function(e){function t(t){return e.next(t)}function r(t){return e.throw(t)}return new Promise((function(n,o){!function e(i){i.done?n(i.value):Promise.resolve(i.value).then(t,r).then(e,o)}(e.next())}))},i.asyncExecutePromiseGeneratorFunction=function(e){return i.asyncExecutePromiseGenerator(e())},i.asyncExecutePromiseGeneratorProgram=function(e){return i.asyncExecutePromiseGenerator(new i.generator.Generator_(new i.generator.Engine_(e)))},i.getRestArguments=function(){for(var e=Number(this),t=[],r=e;r<arguments.length;r++)t[r-e]=arguments[r];return t},i.polyfill("Reflect",(function(e){return e||{}}),"es6","es3"),i.polyfill("Reflect.construct",(function(e){return i.construct}),"es6","es3"),i.polyfill("Reflect.setPrototypeOf",(function(e){if(e)return e;if(i.setPrototypeOf){var t=i.setPrototypeOf;return function(e,r){try{return t(e,r),!0}catch(e){return!1}}}return null}),"es6","es5"),i.polyfill("Promise",(function(e){function t(){this.batch_=null}function r(e){return e instanceof o?e:new o((function(t,r){t(e)}))}if(e&&(!(i.FORCE_POLYFILL_PROMISE||i.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===i.global.PromiseRejectionEvent)||!i.global.Promise||-1===i.global.Promise.toString().indexOf("[native code]")))return e;t.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var t=this;this.asyncExecuteFunction((function(){t.executeBatch_()}))}this.batch_.push(e)};var n=i.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){n(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var o=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};o.prototype.createResolveAndReject_=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},o.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof o)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},o.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},o.prototype.reject_=function(e){this.settle_(2,e)},o.prototype.fulfill_=function(e){this.settle_(1,e)},o.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},o.prototype.scheduleUnhandledRejectionCheck_=function(){var e=this;n((function(){if(e.notifyUnhandledRejection_()){var t=i.global.console;void 0!==t&&t.error(e.result_)}}),1)},o.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var e=i.global.CustomEvent,t=i.global.Event,r=i.global.dispatchEvent;return void 0===r||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=i.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.result_,r(e))},o.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)s.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var s=new t;return o.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},o.prototype.settleSameAsThenable_=function(e,t){var r=this.createResolveAndReject_();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},o.prototype.then=function(e,t){function r(e,t){return"function"==typeof e?function(t){try{n(e(t))}catch(e){i(e)}}:t}var n,i,s=new o((function(e,t){n=e,i=t}));return this.callWhenSettled_(r(e,n),r(t,i)),s},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.callWhenSettled_=function(e,t){function r(){switch(n.state_){case 1:e(n.result_);break;case 2:t(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?s.asyncExecute(r):this.onSettledCallbacks_.push(r),this.isRejectionHandled_=!0},o.resolve=r,o.reject=function(e){return new o((function(t,r){r(e)}))},o.race=function(e){return new o((function(t,n){for(var o=i.makeIterator(e),s=o.next();!s.done;s=o.next())r(s.value).callWhenSettled_(t,n)}))},o.all=function(e){var t=i.makeIterator(e),n=t.next();return n.done?r([]):new o((function(e,o){function i(t){return function(r){s[t]=r,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(n.value).callWhenSettled_(i(s.length-1),o),n=t.next()}while(!n.done)}))},o}),"es6","es3"),i.polyfill("Array.prototype.fill",(function(e){return e||function(e,t,r){var n=this.length||0;for(0>t&&(t=Math.max(0,n+t)),(null==r||r>n)&&(r=n),0>(r=Number(r))&&(r=Math.max(0,n+r)),t=Number(t||0);t<r;t++)this[t]=e;return this}}),"es6","es3"),i.typedArrayFill=function(e){return e||Array.prototype.fill},i.polyfill("Int8Array.prototype.fill",i.typedArrayFill,"es6","es5"),i.polyfill("Uint8Array.prototype.fill",i.typedArrayFill,"es6","es5"),i.polyfill("Uint8ClampedArray.prototype.fill",i.typedArrayFill,"es6","es5"),i.polyfill("Int16Array.prototype.fill",i.typedArrayFill,"es6","es5"),i.polyfill("Uint16Array.prototype.fill",i.typedArrayFill,"es6","es5"),i.polyfill("Int32Array.prototype.fill",i.typedArrayFill,"es6","es5"),i.polyfill("Uint32Array.prototype.fill",i.typedArrayFill,"es6","es5"),i.polyfill("Float32Array.prototype.fill",i.typedArrayFill,"es6","es5"),i.polyfill("Float64Array.prototype.fill",i.typedArrayFill,"es6","es5"),i.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var r=0,n=!1,o={next:function(){if(!n&&r<e.length){var o=r++;return{value:t(o,e[o]),done:!1}}return n=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o},i.polyfill("Array.prototype.keys",(function(e){return e||function(){return i.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),i.polyfill("Array.prototype.entries",(function(e){return e||function(){return i.iteratorFromArray(this,(function(e,t){return[e,t]}))}}),"es6","es3"),i.polyfill("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),"es6","es3"),i.polyfill("Array.prototype.includes",(function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;for(0>(t=t||0)&&(t=Math.max(t+n,0));t<n;t++){var o=r[t];if(o===e||Object.is(o,e))return!0}return!1}}),"es7","es3"),i.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},i.polyfill("String.prototype.includes",(function(e){return e||function(e,t){return-1!==i.checkStringArgs(this,e,"includes").indexOf(e,t||0)}}),"es6","es3"),i.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,o=0;o<n;o++){var i=e[o];if(t.call(r,i,o,e))return{i:o,v:i}}return{i:-1,v:void 0}},i.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return i.findInternal(this,e,t).v}}),"es6","es3"),i.polyfill("Object.entries",(function(e){return e||function(e){var t,r=[];for(t in e)i.owns(e,t)&&r.push([t,e[t]]);return r}}),"es8","es3"),i.polyfill("Reflect.getOwnPropertyDescriptor",(function(e){return e||Object.getOwnPropertyDescriptor}),"es6","es5"),i.polyfill("Reflect.getPrototypeOf",(function(e){return e||Object.getPrototypeOf}),"es6","es5"),i.findDescriptor=function(e,t){for(;e;){var r=Reflect.getOwnPropertyDescriptor(e,t);if(r)return r;e=Reflect.getPrototypeOf(e)}},i.polyfill("Reflect.get",(function(e){return e||function(e,t,r){if(2>=arguments.length)return e[t];var n=i.findDescriptor(e,t);return n?n.get?n.get.call(r):n.value:void 0}}),"es6","es5"),i.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new i.global.Proxy(e,{get:function(r,n,o){return r==e&&"q"==n&&o==t}}));return!0===t.q}catch(e){return!1}},i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,i.ES6_CONFORMANCE=i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&i.checkEs6ConformanceViaProxy(),i.polyfill("WeakMap",(function(e){function t(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function n(e){if(!i.owns(e,s)){var r=new t;i.defineProperty(e,s,{value:r})}}function o(e){if(!i.ISOLATE_POLYFILLS){var r=Object[e];r&&(Object[e]=function(e){return e instanceof t?e:(Object.isExtensible(e)&&n(e),r(e))})}}if(i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&i.ES6_CONFORMANCE)return e}else if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),r=Object.seal({}),n=new e([[t,2],[r,3]]);return 2==n.get(t)&&3==n.get(r)&&(n.delete(t),n.set(r,4),!n.has(t)&&4==n.get(r))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var a=0,u=function(e){if(this.id_=(a+=Math.random()+1).toString(),e){e=i.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};return u.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(n(e),!i.owns(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.id_]=t,this},u.prototype.get=function(e){return r(e)&&i.owns(e,s)?e[s][this.id_]:void 0},u.prototype.has=function(e){return r(e)&&i.owns(e,s)&&i.owns(e[s],this.id_)},u.prototype.delete=function(e){return!!(r(e)&&i.owns(e,s)&&i.owns(e[s],this.id_))&&delete e[s][this.id_]},u}),"es6","es3"),i.MapEntry=function(){},i.polyfill("Map",(function(e){if(i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&i.ES6_CONFORMANCE)return e}else if(function(){if(i.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(i.makeIterator([[t,"s"]]));if("s"!=r.get(t)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var n=r.entries(),o=n.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=n.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!n.next().done)}catch(e){return!1}}())return e;var t=new WeakMap,r=function(e){if(this.data_={},this.head_=s(),this.size=0,e){e=i.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};r.prototype.set=function(e,t){var r=n(this,e=0===e?0:e);return r.list||(r.list=this.data_[r.id]=[]),r.entry?r.entry.value=t:(r.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},r.list.push(r.entry),this.head_.previous.next=r.entry,this.head_.previous=r.entry,this.size++),this},r.prototype.delete=function(e){return!(!(e=n(this,e)).entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,!0)},r.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=s(),this.size=0},r.prototype.has=function(e){return!!n(this,e).entry},r.prototype.get=function(e){return(e=n(this,e).entry)&&e.value},r.prototype.entries=function(){return o(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return o(this,(function(e){return e.key}))},r.prototype.values=function(){return o(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var r,n=this.entries();!(r=n.next()).done;)r=r.value,e.call(t,r[1],r[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var n=function(e,r){var n=r&&typeof r;"object"==n||"function"==n?t.has(r)?n=t.get(r):(n=""+ ++a,t.set(r,n)):n="p_"+r;var o=e.data_[n];if(o&&i.owns(e.data_,n))for(e=0;e<o.length;e++){var s=o[e];if(r!=r&&s.key!=s.key||r===s.key)return{id:n,list:o,index:e,entry:s}}return{id:n,list:o,index:-1,entry:void 0}},o=function(e,t){var r=e.head_;return i.iteratorPrototype((function(){if(r){for(;r.head!=e.head_;)r=r.previous;for(;r.next!=r.head;)return r=r.next,{done:!1,value:t(r)};r=null}return{done:!0,value:void 0}}))},s=function(){var e={};return e.previous=e.next=e.head=e},a=0;return r}),"es6","es3"),i.polyfill("Object.values",(function(e){return e||function(e){var t,r=[];for(t in e)i.owns(e,t)&&r.push(e[t]);return r}}),"es8","es3"),i.polyfill("Array.from",(function(e){return e||function(e,t,r){t=null!=t?t:function(e){return e};var n=[],o="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof o){e=o.call(e);for(var i=0;!(o=e.next()).done;)n.push(t.call(r,o.value,i++))}else for(o=e.length,i=0;i<o;i++)n.push(t.call(r,e[i],i));return n}}),"es6","es3"),i.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=i.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r}}),"es6","es3"),i.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var r=i.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length),t=Math.max(0,Math.min(0|t,r.length));for(var n=e.length;0<n&&0<t;)if(r[--t]!=e[--n])return!1;return 0>=n}}),"es6","es3"),i.polyfill("Set",(function(e){if(i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&i.ES6_CONFORMANCE)return e}else if(function(){if(i.ASSUME_NO_NATIVE_SET||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(i.makeIterator([t]));if(!r.has(t)||1!=r.size||r.add(t)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var n=r.entries(),o=n.next();return!o.done&&o.value[0]==t&&o.value[1]==t&&(!(o=n.next()).done&&o.value[0]!=t&&4==o.value[0].x&&o.value[1]==o.value[0]&&n.next().done)}catch(e){return!1}}())return e;var t=function(e){if(this.map_=new Map,e){e=i.makeIterator(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.map_.size};return t.prototype.add=function(e){return e=0===e?0:e,this.map_.set(e,e),this.size=this.map_.size,this},t.prototype.delete=function(e){return e=this.map_.delete(e),this.size=this.map_.size,e},t.prototype.clear=function(){this.map_.clear(),this.size=0},t.prototype.has=function(e){return this.map_.has(e)},t.prototype.entries=function(){return this.map_.entries()},t.prototype.values=function(){return this.map_.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var r=this;this.map_.forEach((function(n){return e.call(t,n,n,r)}))},t}),"es6","es3"),i.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=i.checkStringArgs(this,e,"startsWith");e+="";var n=r.length,o=e.length;t=Math.max(0,Math.min(0|t,r.length));for(var s=0;s<o&&t<n;)if(r[t++]!=e[s++])return!1;return s>=o}}),"es6","es3"),i.polyfill("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),"es6","es3"),i.polyfill("WeakSet",(function(e){if(i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&i.ES6_CONFORMANCE)return e}else if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),r=Object.seal({}),n=new e([t]);return!(!n.has(t)||n.has(r))&&(n.delete(t),n.add(r),!n.has(t)&&n.has(r))}catch(e){return!1}}())return e;var t=function(e){if(this.map_=new WeakMap,e){e=i.makeIterator(e);for(var t;!(t=e.next()).done;)this.add(t.value)}};return t.prototype.add=function(e){return this.map_.set(e,!0),this},t.prototype.has=function(e){return this.map_.has(e)},t.prototype.delete=function(e){return this.map_.delete(e)},t}),"es6","es3"),i.polyfill("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}),"es9","es3"),i.polyfill("Array.prototype.values",(function(e){return e||function(){return i.iteratorFromArray(this,(function(e,t){return t}))}}),"es8","es3"),i.polyfill("String.raw",(function(e){return e||function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=e.raw,n=r.length,o="",i=0;i<n;++i)o+=r[i],i+1<n&&i+1<arguments.length&&(o+=String(arguments[i+1]));return o}}),"es6","es3"),i.polyfill("Object.setPrototypeOf",(function(e){return e||i.setPrototypeOf}),"es6","es5"),i.polyfill("globalThis",(function(e){return e||i.global}),"es_2020","es3"),i.polyfill("Number.isFinite",(function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}}),"es6","es3"),s=self,a=function(e,t,r){return function(){function o(e){var t=a[e];return void 0!==t||(t=a[e]={id:e,loaded:!1,exports:{}},s[e](t,t.exports,o),t.loaded=!0),t.exports}var s={"./node_modules/@sentry-internal/browser-utils/cjs/debug-build.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},"./node_modules/@sentry-internal/browser-utils/cjs/getNativeImplementation.js":function(e,t,r){function n(e){var t=u[e];if(t)return t;if(t=a.WINDOW[e],o.isNativeFunction(t))return u[e]=t.bind(a.WINDOW);var r=a.WINDOW.document;if(r&&"function"==typeof r.createElement)try{var n=r.createElement("iframe");n.hidden=!0,r.head.appendChild(n);var i=n.contentWindow;i&&i[e]&&(t=i[e]),r.head.removeChild(n)}catch(t){s.DEBUG_BUILD&&o.logger.warn("Could not create sandbox iframe for "+e+" check, bailing to window."+e+": ",t)}return t?u[e]=t.bind(a.WINDOW):t}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/debug-build.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js"),u={};t.clearCachedImplementation=function(e){u[e]=void 0},t.fetch=function(){var e=i.getRestArguments.apply(0,arguments);return n("fetch").apply(null,i.arrayFromIterable(e))},t.getNativeImplementation=n,t.setTimeout=function(){var e=i.getRestArguments.apply(0,arguments);return n("setTimeout").apply(null,i.arrayFromIterable(e))}},"./node_modules/@sentry-internal/browser-utils/cjs/index.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/instrument.js");var n=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/browserMetrics.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/instrument/dom.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/instrument/history.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/getNativeImplementation.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/instrument/xhr.js");r=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/inp.js"),t.addClsInstrumentationHandler=e.addClsInstrumentationHandler,t.addFidInstrumentationHandler=e.addFidInstrumentationHandler,t.addLcpInstrumentationHandler=e.addLcpInstrumentationHandler,t.addPerformanceInstrumentationHandler=e.addPerformanceInstrumentationHandler,t.addTtfbInstrumentationHandler=e.addTtfbInstrumentationHandler,t.addPerformanceEntries=n.addPerformanceEntries,t.startTrackingInteractions=n.startTrackingInteractions,t.startTrackingLongTasks=n.startTrackingLongTasks,t.startTrackingWebVitals=n.startTrackingWebVitals,t.addClickKeypressInstrumentationHandler=o.addClickKeypressInstrumentationHandler,t.addHistoryInstrumentationHandler=i.addHistoryInstrumentationHandler,t.clearCachedImplementation=s.clearCachedImplementation,t.fetch=s.fetch,t.getNativeImplementation=s.getNativeImplementation,t.setTimeout=s.setTimeout,t.SENTRY_XHR_DATA_KEY=a.SENTRY_XHR_DATA_KEY,t.addXhrInstrumentationHandler=a.addXhrInstrumentationHandler,t.startTrackingINP=r.startTrackingINP},"./node_modules/@sentry-internal/browser-utils/cjs/instrument/dom.js":function(e,t,r){function n(){if(l.WINDOW.document){var e=u.triggerHandlers.bind(null,"dom"),t=o(e,!0);l.WINDOW.document.addEventListener("click",t,!1),l.WINDOW.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){(t=l.WINDOW[t]&&l.WINDOW[t].prototype)&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(u.fill(t,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{var s=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=s[r]=s[r]||{refCount:0};if(!a.handler){var u=o(e);a.handler=u,t.call(this,r,u,i)}a.refCount++}catch(e){}return t.call(this,r,n,i)}})),u.fill(t,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{var o=this.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount--,0>=i.refCount&&(e.call(this,t,i.handler,n),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}}function o(e,t){return t=void 0!==t&&t,function(r){if(r&&!r._sentryCaptured){try{var n=r.target}catch(e){n=null}if("keypress"!==r.type||n&&n.tagName&&("INPUT"===n.tagName||"TEXTAREA"===n.tagName||n.isContentEditable)){u.addNonEnumerableProperty(r,"_sentryCaptured",!0),n&&!n._sentryId&&u.addNonEnumerableProperty(n,"_sentryId",u.uuid4());var o="keypress"===r.type?"input":r.type;e:if(r.type!==s)var c=!1;else{try{if(!r.target||r.target._sentryId!==a){c=!1;break e}}catch(e){}c=!0}c||(e({event:r,name:o,global:t}),s=r.type,a=n?n._sentryId:void 0),clearTimeout(i),i=l.WINDOW.setTimeout((function(){s=a=void 0}),1e3)}}}}Object.defineProperty(t,"__esModule",{value:!0});var i,s,a,u=r("./node_modules/@sentry/utils/cjs/index.js"),l=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js");t.addClickKeypressInstrumentationHandler=function(e){u.addHandler("dom",e),u.maybeInstrument("dom",n)},t.instrumentDOM=n},"./node_modules/@sentry-internal/browser-utils/cjs/instrument/history.js":function(e,t,r){function n(){function e(e){return function(){var t=i.getRestArguments.apply(0,arguments),r=2<t.length?t[2]:void 0;if(r){var n=o;o=r=String(r),s.triggerHandlers("history",{from:n,to:r})}return e.apply(this,t)}}if(s.supportsHistory()){var t=a.WINDOW.onpopstate;a.WINDOW.onpopstate=function(){var e=i.getRestArguments.apply(0,arguments),r=a.WINDOW.location.href,n=o;if(o=r,s.triggerHandlers("history",{from:n,to:r}),t)try{return t.apply(this,e)}catch(e){}},s.fill(a.WINDOW.history,"pushState",e),s.fill(a.WINDOW.history,"replaceState",e)}}Object.defineProperty(t,"__esModule",{value:!0});var o,s=r("./node_modules/@sentry/utils/cjs/index.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js");t.addHistoryInstrumentationHandler=function(e){s.addHandler("history",e),s.maybeInstrument("history",n)}},"./node_modules/@sentry-internal/browser-utils/cjs/instrument/xhr.js":function(e,t,r){function n(){if(s.WINDOW.XMLHttpRequest){var e=XMLHttpRequest.prototype;o.fill(e,"open",(function(e){return function(){var t=i.getRestArguments.apply(0,arguments),r=this,n=1e3*o.timestampInSeconds(),s=o.isString(t[0])?t[0].toUpperCase():void 0,a=function(e){if(o.isString(e))return e;try{return e.toString()}catch(e){}}(t[1]);if(!s||!a)return e.apply(this,t);this.__sentry_xhr_v3__={method:s,url:a,request_headers:{}},"POST"===s&&a.match(/sentry_key/)&&(this.__sentry_own_request__=!0);var u=function(){var e=r.__sentry_xhr_v3__;if(e&&4===r.readyState){try{e.status_code=r.status}catch(e){}e={endTimestamp:1e3*o.timestampInSeconds(),startTimestamp:n,xhr:r},o.triggerHandlers("xhr",e)}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?o.fill(this,"onreadystatechange",(function(e){return function(){var t=i.getRestArguments.apply(0,arguments);return u(),e.apply(this,t)}})):this.addEventListener("readystatechange",u),o.fill(this,"setRequestHeader",(function(e){return function(){var t=i.getRestArguments.apply(0,arguments),r=i.makeIterator(t),n=r.next().value;r=r.next().value;var s=this.__sentry_xhr_v3__;return s&&o.isString(n)&&o.isString(r)&&(s.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),o.fill(e,"send",(function(e){return function(){var t=i.getRestArguments.apply(0,arguments),r=this.__sentry_xhr_v3__;return r?(void 0!==t[0]&&(r.body=t[0]),r={startTimestamp:1e3*o.timestampInSeconds(),xhr:this},o.triggerHandlers("xhr",r),e.apply(this,t)):e.apply(this,t)}}))}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js");t.SENTRY_XHR_DATA_KEY="__sentry_xhr_v3__",t.addXhrInstrumentationHandler=function(e){o.addHandler("xhr",e),o.maybeInstrument("xhr",n)},t.instrumentXHR=n},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/browserMetrics.js":function(e,t,r){function n(e,t,r,n,o){return r=o+r,o={},E.startAndEndSpan(e,r,r+n,{name:t.name,op:t.entryType,attributes:(o[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.resource.browser.metrics",o)}),r}function o(e,t,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((function(n){s(e,t,n,r)})),s(e,t,"secureConnection",r,"TLS/SSL","connectEnd"),s(e,t,"fetch",r,"cache","domainLookupStart"),s(e,t,"domainLookup",r,"DNS"),function(e,t,r){if(t.responseEnd){var n={};E.startAndEndSpan(e,r+E.msToSec(t.requestStart),r+E.msToSec(t.responseEnd),{op:"browser",name:"request",attributes:(n[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.ui.browser.metrics",n)}),n={},E.startAndEndSpan(e,r+E.msToSec(t.responseStart),r+E.msToSec(t.responseEnd),{op:"browser",name:"response",attributes:(n[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.ui.browser.metrics",n)})}}(e,t,r)}function s(e,t,r,n,o,i){if(i=i?t[i]:t[r+"End"],(t=t[r+"Start"])&&i){var s={};E.startAndEndSpan(e,n+E.msToSec(t),n+E.msToSec(i),{op:"browser",name:o||r,attributes:(s[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.ui.browser.metrics",s)})}}function a(e,t,r,n,o,i){if("xmlhttprequest"!==t.initiatorType&&"fetch"!==t.initiatorType){var s=f.parseUrl(r),a={};a[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.resource.browser.metrics",u(a,t,"transferSize","http.response_transfer_size"),u(a,t,"encodedBodySize","http.response_content_length"),u(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus),s.protocol&&(a["url.scheme"]=s.protocol.split(":").pop()),s.host&&(a["server.address"]=s.host),a["url.same_origin"]=r.includes(h.WINDOW.location.origin),n=i+n,E.startAndEndSpan(e,n,n+o,{name:r.replace(h.WINDOW.location.origin,""),op:t.initiatorType?"resource."+t.initiatorType:"resource.other",attributes:a})}}function u(e,t,r,n){null!=(t=t[r])&&2147483647>t&&(e[n]=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,c,d=r("./node_modules/@sentry/core/cjs/index.js"),f=r("./node_modules/@sentry/utils/cjs/index.js"),p=r("./node_modules/@sentry-internal/browser-utils/cjs/debug-build.js"),h=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js"),_=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/instrument.js"),E=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/utils.js"),g=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getNavigationEntry.js"),m=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getVisibilityWatcher.js"),y=0,S={};t._addMeasureSpans=n,t._addResourceSpans=a,t.addPerformanceEntries=function(e){var t=E.getBrowserPerformanceAPI();if(t&&h.WINDOW.performance.getEntries&&f.browserPerformanceTimeOrigin){p.DEBUG_BUILD&&f.logger.log("[Tracing] Adding & adjusting spans using Performance API");var r=E.msToSec(f.browserPerformanceTimeOrigin);t=t.getEntries();var i=d.spanToJSON(e),s=i.op,u=i.start_timestamp;t.slice(y).forEach((function(t){var i=E.msToSec(t.startTime),l=E.msToSec(t.duration);if(!("navigation"===s&&u&&r+i<u))switch(t.entryType){case"navigation":o(e,t,r);break;case"mark":case"paint":case"measure":n(e,t,i,l,r),i=m.getVisibilityWatcher(),i=t.startTime<i.firstHiddenTime,"first-paint"===t.name&&i&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding FP"),S.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding FCP"),S.fcp={value:t.startTime,unit:"millisecond"});break;case"resource":a(e,t,t.name,i,l,r)}})),y=Math.max(t.length-1,0),function(e){var t=h.WINDOW.navigator;if(t){var r=t.connection;r&&(r.effectiveType&&e.setAttribute("effectiveConnectionType",r.effectiveType),r.type&&e.setAttribute("connectionType",r.type),E.isMeasurementValue(r.rtt)&&(S["connection.rtt"]={value:r.rtt,unit:"millisecond"})),E.isMeasurementValue(t.deviceMemory)&&e.setAttribute("deviceMemory",t.deviceMemory+" GB"),E.isMeasurementValue(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}}(e),"pageload"===s&&(function(e){var t=g.getNavigationEntry();if(t){var r=t.responseStart;(t=t.requestStart)<=r&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:r-t,unit:"millisecond"})}}(S),["fcp","fp","lcp"].forEach((function(e){if(S[e]&&u&&!(r>=u)){var t=S[e].value,n=r+E.msToSec(t);n=Math.abs(1e3*(n-u)),p.DEBUG_BUILD&&f.logger.log("[Measurements] Normalized "+e+" from "+t+" to "+n+" ("+(n-t)+")"),S[e].value=n}})),(t=S["mark.fid"])&&S.fid&&(i={},E.startAndEndSpan(e,t.value,t.value+E.msToSec(S.fid.value),{name:"first input delay",op:"ui.action",attributes:(i[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.ui.browser.metrics",i)}),delete S["mark.fid"]),"fcp"in S||delete S.cls,Object.keys(S).forEach((function(e){d.setMeasurement(e,S[e].value,S[e].unit)})),function(e){l&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding LCP Data"),l.element&&e.setAttribute("lcp.element",f.htmlTreeAsString(l.element)),l.id&&e.setAttribute("lcp.id",l.id),l.url&&e.setAttribute("lcp.url",l.url.trim().slice(0,200)),e.setAttribute("lcp.size",l.size)),c&&c.sources&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding CLS Data"),c.sources.forEach((function(t,r){return e.setAttribute("cls.source."+(r+1),f.htmlTreeAsString(t.node))})))}(e)),c=l=void 0,S={}}},t.startTrackingInteractions=function(){_.addPerformanceInstrumentationHandler("event",(function(e){for(var t=(e=i.makeIterator(e.entries)).next();!t.done;t=e.next()){var r=t.value;if(!d.getActiveSpan())break;if("click"===r.name){t=E.msToSec(f.browserPerformanceTimeOrigin+r.startTime);var n=E.msToSec(r.duration),o={};o={name:f.htmlTreeAsString(r.target),op:"ui.interaction."+r.name,startTime:t,attributes:(o[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.ui.browser.metrics",o)},(r=f.getComponentName(r.target))&&(o.attributes["ui.component_name"]=r),(r=d.startInactiveSpan(o))&&r.end(t+n)}}}))},t.startTrackingLongTasks=function(){_.addPerformanceInstrumentationHandler("longtask",(function(e){for(var t=(e=i.makeIterator(e.entries)).next();!t.done;t=e.next()){var r=t.value;if(!d.getActiveSpan())break;t=E.msToSec(f.browserPerformanceTimeOrigin+r.startTime),r=E.msToSec(r.duration);var n={};(n=d.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:t,attributes:(n[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.ui.browser.metrics",n)}))&&n.end(t+r)}}))},t.startTrackingWebVitals=function(){var e=E.getBrowserPerformanceAPI();if(e&&f.browserPerformanceTimeOrigin){e.mark&&h.WINDOW.performance.mark("sentry-tracing-init");var t=_.addFidInstrumentationHandler((function(e){var t=(e=e.metric).entries[e.entries.length-1];if(t){var r=E.msToSec(f.browserPerformanceTimeOrigin);t=E.msToSec(t.startTime),p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding FID"),S.fid={value:e.value,unit:"millisecond"},S["mark.fid"]={value:r+t,unit:"second"}}})),r=_.addClsInstrumentationHandler((function(e){var t=(e=e.metric).entries[e.entries.length-1];t&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding CLS"),S.cls={value:e.value,unit:""},c=t)}),!0),n=_.addLcpInstrumentationHandler((function(e){var t=(e=e.metric).entries[e.entries.length-1];t&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding LCP"),S.lcp={value:e.value,unit:"millisecond"},l=t)}),!0),o=_.addTtfbInstrumentationHandler((function(e){(e=e.metric).entries[e.entries.length-1]&&(p.DEBUG_BUILD&&f.logger.log("[Measurements] Adding TTFB"),S.ttfb={value:e.value,unit:"millisecond"})}));return function(){t(),r(),n(),o()}}return function(){}}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/inp.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js"),o=r("./node_modules/@sentry/utils/cjs/index.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/instrument.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/utils.js"),a={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};t.startTrackingINP=function(){if(s.getBrowserPerformanceAPI()&&o.browserPerformanceTimeOrigin){var e=i.addInpInstrumentationHandler((function(e){var t=e.metric,r=n.getClient();if(r&&null!=t.value){var i=t.entries.find((function(e){return e.duration===t.value&&a[e.name]}));if(i){var u=a[i.name],l=r.getOptions();e=s.msToSec(o.browserPerformanceTimeOrigin+i.startTime);var c=s.msToSec(t.value),d=n.getCurrentScope(),f=n.getActiveSpan();f=(f=f?n.getRootSpan(f):void 0)?n.spanToJSON(f).description:void 0;var p=d.getUser();r=(r=r.getIntegrationByName("Replay"))&&r.getReplayId(),p=void 0!==p?p.email||p.id||p.ip_address:void 0;var h=void 0;try{h=d.getScopeData().contexts.profile.profile_id}catch(e){}i=o.htmlTreeAsString(i.target),d={},l=o.dropUndefinedKeys((d.release=l.release,d.environment=l.environment,d.transaction=f,d[n.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]=t.value,d.user=p||void 0,d.profile_id=h||void 0,d.replay_id=r||void 0,d)),u=n.startInactiveSpan({name:i,op:"ui.interaction."+u,attributes:l,startTime:e,experimental:{standalone:!0}}),l={},u.addEvent("inp",(l[n.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]="millisecond",l[n.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]=t.value,l)),u.end(e+c)}}}));return function(){e()}}return function(){}}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/instrument.js":function(e,t,r){function n(e,t){var r=I[e];if(r&&r.length)for(var n=(r=i.makeIterator(r)).next();!n.done;n=r.next()){n=n.value;try{n(t)}catch(t){m.DEBUG_BUILD&&g.logger.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+g.getFunctionName(n)+"\nError:",t)}}}function o(){return y.onCLS((function(e){n("cls",{metric:e}),f=e}),{reportAllChanges:!0})}function s(){return S.onFID((function(e){n("fid",{metric:e}),p=e}))}function a(){return A.onLCP((function(e){n("lcp",{metric:e}),h=e}))}function u(){return O.onTTFB((function(e){n("ttfb",{metric:e}),_=e}))}function l(){return T.onINP((function(e){n("inp",{metric:e}),E=e}))}function c(e,t,r,n,o){if(o=void 0!==o&&o,I[e]=I[e]||[],I[e].push(t),!v[e]){var i=r();v[e]=!0}return n&&t({metric:n}),d(e,t,o?i:void 0)}function d(e,t,r){return function(){r&&r();var n=I[e];if(n){var o=n.indexOf(t);-1!==o&&n.splice(o,1)}}}Object.defineProperty(t,"__esModule",{value:!0});var f,p,h,_,E,g=r("./node_modules/@sentry/utils/cjs/index.js"),m=r("./node_modules/@sentry-internal/browser-utils/cjs/debug-build.js"),y=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/getCLS.js"),S=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/getFID.js"),T=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/getINP.js"),A=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/getLCP.js"),b=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/observe.js"),O=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/onTTFB.js"),I={},v={};t.addClsInstrumentationHandler=function(e,t){return c("cls",e,o,f,void 0!==t&&t)},t.addFidInstrumentationHandler=function(e){return c("fid",e,s,p)},t.addInpInstrumentationHandler=function(e){return c("inp",e,l,E)},t.addLcpInstrumentationHandler=function(e,t){return c("lcp",e,a,h,void 0!==t&&t)},t.addPerformanceInstrumentationHandler=function(e,t){return I[e]=I[e]||[],I[e].push(t),v[e]||(function(e){var t={};"event"===e&&(t.durationThreshold=0),b.observe(e,(function(t){n(e,{entries:t})}),t)}(e),v[e]=!0),d(e,t)},t.addTtfbInstrumentationHandler=function(e){return c("ttfb",e,u,_)}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/utils.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js");t.getBrowserPerformanceAPI=function(){return o.WINDOW&&o.WINDOW.addEventListener&&o.WINDOW.performance},t.isMeasurementValue=function(e){return"number"==typeof e&&isFinite(e)},t.msToSec=function(e){return e/1e3},t.startAndEndSpan=function(e,t,r,o){var i=Object.assign({},o);return(o=n.spanToJSON(e).start_timestamp)&&o>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),n.withActiveSpan(e,(function(){var e=n.startInactiveSpan(Object.assign({},{startTime:t},i));return e&&e.end(r),e}))}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/getCLS.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/bindReporter.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/initMetric.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/observe.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/onHidden.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/runOnce.js"),u=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/onFCP.js"),l=[.1,.25];t.CLSThresholds=l,t.onCLS=function(e,t){t=void 0===t?{}:t,u.onFCP(a.runOnce((function(){var r=o.initMetric("CLS",0),a=0,u=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=u[0],r=u[u.length-1];a&&1e3>e.startTime-r.startTime&&5e3>e.startTime-t.startTime?(a+=e.value,u.push(e)):(a=e.value,u=[e])}})),a>r.value&&(r.value=a,r.entries=u,f())},d=i.observe("layout-shift",c);if(d){var f=n.bindReporter(e,r,l,t.reportAllChanges);s.onHidden((function(){c(d.takeRecords()),f(!0)})),setTimeout(f,0)}})))}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/getFID.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/bindReporter.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getVisibilityWatcher.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/initMetric.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/observe.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/onHidden.js"),u=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/runOnce.js"),l=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/whenActivated.js"),c=[100,300];t.FIDThresholds=c,t.onFID=function(e,t){t=void 0===t?{}:t,l.whenActivated((function(){var r=o.getVisibilityWatcher(),l=i.initMetric("FID"),d=function(e){e.startTime<r.firstHiddenTime&&(l.value=e.processingStart-e.startTime,l.entries.push(e),h(!0))},f=function(e){e.forEach(d)},p=s.observe("first-input",f),h=n.bindReporter(e,l,c,t.reportAllChanges);p&&a.onHidden(u.runOnce((function(){f(p.takeRecords()),p.disconnect()})))}))}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/getINP.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/bindReporter.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/initMetric.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/observe.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/onHidden.js"),u=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/polyfills/interactionCountPolyfill.js"),l=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/whenActivated.js"),c=[200,500],d=[],f={},p=function(e){var t=d[d.length-1],r=f[e.interactionId];(r||10>d.length||e.duration>t.latency)&&(r?(r.entries.push(e),r.latency=Math.max(r.latency,e.duration)):(e={id:e.interactionId,latency:e.duration,entries:[e]},f[e.id]=e,d.push(e)),d.sort((function(e,t){return t.latency-e.latency})),d.splice(10).forEach((function(e){delete f[e.id]})))};t.INPThresholds=c,t.onINP=function(e,t){t=void 0===t?{}:t,l.whenActivated((function(){u.initInteractionCountPolyfill();var r=i.initMetric("INP"),l=function(e){e.forEach((function(e){e.interactionId&&p(e),"first-input"===e.entryType&&(d.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))||p(e))})),(e=function(){var e=Math.min(d.length-1,Math.floor((u.getInteractionCount()-0)/50));return d[e]}())&&e.latency!==r.value&&(r.value=e.latency,r.entries=e.entries,h())},f=s.observe("event",l,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40}),h=o.bindReporter(e,r,c,t.reportAllChanges);f&&("PerformanceEventTiming"in n.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&f.observe({type:"first-input",buffered:!0}),a.onHidden((function(){l(f.takeRecords()),0>r.value&&0<u.getInteractionCount()-0&&(r.value=0,r.entries=[]),h(!0)})))}))}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/getLCP.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/bindReporter.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getActivationStart.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getVisibilityWatcher.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/initMetric.js"),u=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/observe.js"),l=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/onHidden.js"),c=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/runOnce.js"),d=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/whenActivated.js"),f=[2500,4e3],p={};t.LCPThresholds=f,t.onLCP=function(e,t){t=void 0===t?{}:t,d.whenActivated((function(){var r=s.getVisibilityWatcher(),d=a.initMetric("LCP"),h=function(e){(e=e[e.length-1])&&e.startTime<r.firstHiddenTime&&(d.value=Math.max(e.startTime-i.getActivationStart(),0),d.entries=[e],E())},_=u.observe("largest-contentful-paint",h);if(_){var E=o.bindReporter(e,d,f,t.reportAllChanges),g=c.runOnce((function(){p[d.id]||(h(_.takeRecords()),_.disconnect(),p[d.id]=!0,E(!0))}));["keydown","click"].forEach((function(e){n.WINDOW.document&&addEventListener(e,(function(){return setTimeout(g,0)}),!0)})),l.onHidden(g)}}))}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/bindReporter.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bindReporter=function(e,t,r,n){var o,i;return function(s){0<=t.value&&(s||n)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,s=(s=t.value)>r[1]?"poor":s>r[0]?"needs-improvement":"good",t.rating=s,e(t))}}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/generateUniqueID.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.generateUniqueID=function(){return"v3-"+Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12)}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getActivationStart.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getNavigationEntry.js");t.getActivationStart=function(){var e=n.getNavigationEntry();return e&&e.activationStart||0}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getNavigationEntry.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js");t.getNavigationEntry=function(){return n.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getVisibilityWatcher.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js"),o=-1,i=function(e){"hidden"===n.WINDOW.document.visibilityState&&-1<o&&(o="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("visibilitychange",i,!0),removeEventListener("prerenderingchange",i,!0))};t.getVisibilityWatcher=function(){return n.WINDOW.document&&0>o&&(o="hidden"!==n.WINDOW.document.visibilityState||n.WINDOW.document.prerendering?1/0:0,addEventListener("visibilitychange",i,!0),addEventListener("prerenderingchange",i,!0)),{get firstHiddenTime(){return o}}}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/initMetric.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/generateUniqueID.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getActivationStart.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getNavigationEntry.js");t.initMetric=function(e,t){var r=s.getNavigationEntry(),a="navigate";return r&&(n.WINDOW.document&&n.WINDOW.document.prerendering||0<i.getActivationStart()?a="prerender":n.WINDOW.document&&n.WINDOW.document.wasDiscarded?a="restore":r.type&&(a=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:o.generateUniqueID(),navigationType:a}}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/observe.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.observe=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/onHidden.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js");t.onHidden=function(e){var t=function(t){("pagehide"===t.type||n.WINDOW.document&&"hidden"===n.WINDOW.document.visibilityState)&&e(t)};n.WINDOW.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/polyfills/interactionCountPolyfill.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/observe.js"),i=0,s=1/0,a=0,u=function(e){e.forEach((function(e){e.interactionId&&(s=Math.min(s,e.interactionId),i=(a=Math.max(a,e.interactionId))?(a-s)/7+1:0)}))};t.getInteractionCount=function(){return n?i:performance.interactionCount||0},t.initInteractionCountPolyfill=function(){"interactionCount"in performance||n||(n=o.observe("event",u,{type:"event",buffered:!0,durationThreshold:0}))}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/runOnce.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.runOnce=function(e){var t=!1;return function(r){t||(e(r),t=!0)}}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/whenActivated.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js");t.whenActivated=function(e){n.WINDOW.document&&n.WINDOW.document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/onFCP.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/bindReporter.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getActivationStart.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getVisibilityWatcher.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/initMetric.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/observe.js"),u=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/whenActivated.js"),l=[1800,3e3];t.FCPThresholds=l,t.onFCP=function(e,t){t=void 0===t?{}:t,u.whenActivated((function(){var r,u=i.getVisibilityWatcher(),c=s.initMetric("FCP"),d=a.observe("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(d.disconnect(),e.startTime<u.firstHiddenTime&&(c.value=Math.max(e.startTime-o.getActivationStart(),0),c.entries.push(e),r(!0)))}))}));d&&(r=n.bindReporter(e,c,l,t.reportAllChanges))}))}},"./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/onTTFB.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/types.js"),o=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/bindReporter.js"),i=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getActivationStart.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/getNavigationEntry.js"),a=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/initMetric.js"),u=r("./node_modules/@sentry-internal/browser-utils/cjs/metrics/web-vitals/lib/whenActivated.js"),l=[800,1800],c=function(e){n.WINDOW.document&&n.WINDOW.document.prerendering?u.whenActivated((function(){return c(e)})):n.WINDOW.document&&"complete"!==n.WINDOW.document.readyState?addEventListener("load",(function(){return c(e)}),!0):setTimeout(e,0)};t.TTFBThresholds=l,t.onTTFB=function(e,t){t=void 0===t?{}:t;var r=a.initMetric("TTFB"),n=o.bindReporter(e,r,l,t.reportAllChanges);c((function(){var e=s.getNavigationEntry();if(e){var t=e.responseStart;0>=t||t>performance.now()||(r.value=Math.max(t-i.getActivationStart(),0),r.entries=[e],n(!0))}}))}},"./node_modules/@sentry-internal/browser-utils/cjs/types.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/utils/cjs/index.js").GLOBAL_OBJ,t.WINDOW=e},"./node_modules/@sentry-internal/feedback/cjs/index.js":function(e,t,r){function n(e,t){return Object.assign({},e,t,{onFormOpen:function(){t.onFormOpen&&t.onFormOpen(),e.onFormOpen&&e.onFormOpen()},onFormClose:function(){t.onFormClose&&t.onFormClose(),e.onFormClose&&e.onFormClose()},onSubmitSuccess:function(r){t.onSubmitSuccess&&t.onSubmitSuccess(r),e.onSubmitSuccess&&e.onSubmitSuccess(r)},onSubmitError:function(r){t.onSubmitError&&t.onSubmitError(r),e.onSubmitError&&e.onSubmitError(r)},onFormSubmitted:function(){t.onFormSubmitted&&t.onFormSubmitted(),e.onFormSubmitted&&e.onFormSubmitted()},themeDark:Object.assign({},e.themeDark,t.themeDark),themeLight:Object.assign({},e.themeLight,t.themeLight)})}function o(e,t){return Object.entries(t).forEach((function(t){var r=i.makeIterator(t);t=r.next().value,r=r.next().value,e.setAttributeNS(null,t,r)})),e}function s(e){var t=e.triggerLabel,r=e.shadow,n=Z.createElement("button");n.type="button",n.className="widget__actor",n.ariaHidden="false",n.ariaLabel=t,n.appendChild(function(){var e=function(e){return J.document.createElementNS("http://www.w3.org/2000/svg",e)},t=o(e("svg"),{width:"20",height:"20",viewBox:"0 0 20 20",fill:"var(--foreground)"}),r=o(e("g"),{clipPath:"url(#clip0_57_80)"}),n={};return n=o(e("path"),(n["fill-rule"]="evenodd",n["clip-rule"]="evenodd",n.d="M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z",n)),t.appendChild(r).appendChild(n),r=e("defs"),n=o(e("clipPath"),{id:"clip0_57_80"}),e=o(e("rect"),{width:"20",height:"20",fill:"white"}),n.appendChild(e),r.appendChild(n),t.appendChild(r).appendChild(n).appendChild(e),t}()),t&&((e=Z.createElement("span")).appendChild(Z.createTextNode(t)),n.appendChild(e));var i=function(){var e=Z.createElement("style");return e.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e}();return{el:n,appendToDom:function(){r.appendChild(i),r.appendChild(n)},removeFromDom:function(){r.removeChild(n),r.removeChild(i)},show:function(){n.ariaHidden="false"},hide:function(){n.ariaHidden="true"}}}function a(e){return"\n  --foreground: "+e.foreground+";\n  --background: "+e.background+";\n  --accent-foreground: "+e.accentForeground+";\n  --accent-background: "+e.accentBackground+";\n  --success-color: "+e.successColor+";\n  --error-color: "+e.errorColor+";\n  --border: "+e.border+";\n  --box-shadow: "+e.boxShadow+";\n  --outline: "+e.outline+";\n  --interactive-filter: "+e.interactiveFilter+";\n  "}function u(e,t){for(var r in t)e[r]=t[r];return e}function l(e,t,r){var n,o,i,s={};for(i in t)"key"==i?n=t[i]:"ref"==i?o=t[i]:s[i]=t[i];if(2<arguments.length&&(s.children=3<arguments.length?ue.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return c(e,s,n,o,null)}function c(e,t,r,n,o){return e={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++ce:o,__i:-1,__u:0},null==o&&null!=le.vnode&&le.vnode(e),e}function d(e){return e.children}function f(e,t){this.props=e,this.context=t}function p(e,t){if(null==t)return e.__?p(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?p(e):null}function h(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return h(e)}}function _(e){(!e.__d&&(e.__d=!0)&&de.push(e)&&!E.__r++||q!==le.debounceRendering)&&((q=le.debounceRendering)||fe)(E)}function E(){var e,t=[],r=[];for(de.sort(pe);e=de.shift();)if(e.__d){var n=de.length,o=void 0,i=e,s=t,a=r,l=i.__v,c=l.__e,d=i.__P,f=(e=d?((o=u({},l)).__v=l.__v+1,le.vnode&&le.vnode(o),b(d,o,l,i.__n,void 0!==d.ownerSVGElement,32&l.__u?[c]:null,s,null==c?p(l):c,!!(32&l.__u),a),o.__.__k[o.__i]=o,o.__d=void 0,o.__e!=c&&h(o),o):void 0)||f;0===n||de.length>n?(O(t,f,r),r.length=t.length=0,f=void 0,de.sort(pe)):f&&le.__c&&le.__c(f,ie)}f&&O(t,f,r),E.__r=0}function g(e,t,r,n,o,i,s,a,u,l,f){var h,_,E,g;n=n&&n.__k||ie;var y=t.length;r.__d=u;var S,T,A=t.length,O=n.length,N=O,R=0;for(r.__k=[],u=0;u<A;u++)if(null!=(S=r.__k[u]=null==(S=t[u])||"boolean"==typeof S||"function"==typeof S?null:"string"==typeof S||"number"==typeof S||"bigint"==typeof S||S.constructor==String?c(null,S,null,null,S):ae(S)?c(d,{children:S},null,null,null):void 0===S.constructor&&0<S.__b?c(S.type,S.props,S.key,S.ref?S.ref:null,S.__v):S)){S.__=r,S.__b=r.__b+1;e:{var C=T=u+R,D=S.key,w=S.type,L=C-1,P=C+1,M=n[C];if(!(null===M||M&&D==M.key&&w===M.type)){if(N>(null!=M&&0==(131072&M.__u)?1:0))for(;0<=L||P<n.length;){if(0<=L){if((M=n[L])&&0==(131072&M.__u)&&D==M.key&&w===M.type){C=L;break e}L--}if(P<n.length){if((M=n[P])&&0==(131072&M.__u)&&D==M.key&&w===M.type){C=P;break e}P++}}C=-1}}D=C,S.__i=D,C=null,-1!==D&&(N--,(C=n[D])&&(C.__u|=131072)),null==C||null===C.__v?(-1==D&&R--,"function"!=typeof S.type&&(S.__u|=65536)):D!==T&&(D===T+1?R++:D>T?N>A-T?R+=D-T:R--:R=D<T&&D==T-1?D-T:0,D!==u+R&&(S.__u|=65536))}else(C=n[u])&&null==C.key&&C.__e&&(C.__e==r.__d&&(r.__d=p(C)),v(C,C,!1),n[u]=null,N--);if(N)for(u=0;u<O;u++)null!=(C=n[u])&&0==(131072&C.__u)&&(C.__e==r.__d&&(r.__d=p(C)),v(C,C));for(u=r.__d,t=0;t<y;t++)null!=(_=r.__k[t])&&"boolean"!=typeof _&&"function"!=typeof _&&(h=-1===_.__i?oe:n[_.__i]||oe,_.__i=t,b(e,_,h,o,i,s,a,u,l,f),E=_.__e,_.ref&&h.ref!=_.ref&&(h.ref&&I(h.ref,null,_),f.push(_.ref,_.__c||E,_)),null==g&&null!=E&&(g=E),65536&_.__u||h.__k===_.__k?u=m(_,u,e):"function"==typeof _.type&&void 0!==_.__d?u=_.__d:E&&(u=E.nextSibling),_.__d=void 0,_.__u&=-196609);r.__d=u,r.__e=g}function m(e,t,r){var n;if("function"==typeof e.type){var o=e.__k;for(n=0;o&&n<o.length;n++)o[n]&&(o[n].__=e,t=m(o[n],t,r));return t}e.__e!=t&&(r.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function y(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||se.test(t)?r:r+"px"}function S(e,t,r,n,o){e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||y(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||y(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),(e.l[t+o]=r)?n?r.u=n.u:(r.u=Date.now(),e.addEventListener(t,o?A:T,o)):e.removeEventListener(t,o?A:T,o);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,r))}}function T(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(le.event?le.event(e):e)}}function A(e){if(this.l)return this.l[e.type+!0](le.event?le.event(e):e)}function b(e,t,r,n,o,i,s,a,l,c){var h,_,E,m,y,T,A,b,O,I,v,R,C,D,w,L=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(l=!!(32&r.__u),i=[a=t.__e=r.__e]),(h=le.__b)&&h(t);e:if("function"==typeof L)try{if(b=t.props,O=(h=L.contextType)&&n[h.__c],I=h?O?O.props.value:h.__:n,r.__c?A=(_=t.__c=r.__c).__=_.__E:("prototype"in L&&L.prototype.render?t.__c=_=new L(b,I):(t.__c=_=new f(b,I),_.constructor=L,_.render=N),O&&O.sub(_),_.props=b,_.state||(_.state={}),_.context=I,_.__n=n,E=_.__d=!0,_.__h=[],_._sb=[]),null==_.__s&&(_.__s=_.state),null!=L.getDerivedStateFromProps&&(_.__s==_.state&&(_.__s=u({},_.__s)),u(_.__s,L.getDerivedStateFromProps(b,_.__s))),m=_.props,y=_.state,_.__v=t,E)null==L.getDerivedStateFromProps&&null!=_.componentWillMount&&_.componentWillMount(),null!=_.componentDidMount&&_.__h.push(_.componentDidMount);else{if(null==L.getDerivedStateFromProps&&b!==m&&null!=_.componentWillReceiveProps&&_.componentWillReceiveProps(b,I),!_.__e&&(null!=_.shouldComponentUpdate&&!1===_.shouldComponentUpdate(b,_.__s,I)||t.__v===r.__v)){for(t.__v!==r.__v&&(_.props=b,_.state=_.__s,_.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach((function(e){e&&(e.__=t)})),v=0;v<_._sb.length;v++)_.__h.push(_._sb[v]);_._sb=[],_.__h.length&&s.push(_);break e}null!=_.componentWillUpdate&&_.componentWillUpdate(b,_.__s,I),null!=_.componentDidUpdate&&_.__h.push((function(){_.componentDidUpdate(m,y,T)}))}if(_.context=I,_.props=b,_.__P=e,_.__e=!1,R=le.__r,C=0,"prototype"in L&&L.prototype.render){for(_.state=_.__s,_.__d=!1,R&&R(t),h=_.render(_.props,_.state,_.context),D=0;D<_._sb.length;D++)_.__h.push(_._sb[D]);_._sb=[]}else do{_.__d=!1,R&&R(t),h=_.render(_.props,_.state,_.context),_.state=_.__s}while(_.__d&&25>++C);_.state=_.__s,null!=_.getChildContext&&(n=u(u({},n),_.getChildContext())),E||null==_.getSnapshotBeforeUpdate||(T=_.getSnapshotBeforeUpdate(m,y)),g(e,ae(w=null!=h&&h.type===d&&null==h.key?h.props.children:h)?w:[w],t,r,n,o,i,s,a,l,c),_.base=t.__e,t.__u&=-161,_.__h.length&&s.push(_),A&&(_.__E=_.__=null)}catch(e){t.__v=null,l||null!=i?(t.__e=a,t.__u|=l?160:32,i[i.indexOf(a)]=null):(t.__e=r.__e,t.__k=r.__k),le.__e(e,t,r)}else null==i&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,n,o,i,s,a,u){var l,c,d,f,h,_,E,m=r.props,y=t.props,T=t.type;if("svg"===T&&(o=!0),null!=i)for(l=0;l<i.length;l++)if((h=i[l])&&"setAttribute"in h==!!T&&(T?h.localName===T:3===h.nodeType)){e=h,i[l]=null;break}if(null==e){if(null===T)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",T):document.createElement(T,y.is&&y),i=null,a=!1}if(null===T)m===y||a&&e.data===y||(e.data=y);else{if(i=i&&ue.call(e.childNodes),m=r.props||oe,!a&&null!=i)for(m={},l=0;l<e.attributes.length;l++)m[(h=e.attributes[l]).name]=h.value;for(l in m)h=m[l],"children"==l||("dangerouslySetInnerHTML"==l?d=h:"key"===l||l in y||S(e,l,null,h,o));for(l in y)h=y[l],"children"==l?f=h:"dangerouslySetInnerHTML"==l?c=h:"value"==l?_=h:"checked"==l?E=h:"key"===l||a&&"function"!=typeof h||m[l]===h||S(e,l,h,m[l],o);if(c)a||d&&(c.__html===d.__html||c.__html===e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(d&&(e.innerHTML=""),g(e,ae(f)?f:[f],t,r,n,o&&"foreignObject"!==T,i,s,i?i[0]:r.__k&&p(r,0),a,u),null!=i)for(l=i.length;l--;)null!=i[l]&&(r=(t=i[l]).parentNode)&&r.removeChild(t);a||(l="value",void 0!==_&&(_!==e[l]||"progress"===T&&!_||"option"===T&&_!==m[l])&&S(e,l,_,m[l],!1),l="checked",void 0!==E&&E!==e[l]&&S(e,l,E,m[l],!1))}return e}(r.__e,t,r,n,o,i,s,l,c);(h=le.diffed)&&h(t)}function O(e,t,r){for(var n=0;n<r.length;n++)I(r[n],r[++n],r[++n]);le.__c&&le.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){le.__e(e,t.__v)}}))}function I(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){le.__e(e,r)}}function v(e,t,r){var n,o;if(le.unmount&&le.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||I(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){le.__e(e,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&v(n[o],t,r||"function"!=typeof e.type);r||null==e.__e||(r=(t=e.__e).parentNode)&&r.removeChild(t),e.__=e.__e=e.__d=void 0}function N(e,t,r){return this.constructor(e,r)}function R(e,t){return Te.__h&&Te.__h(_e,e,me||t),me=0,e>=(t=_e.__H||(_e.__H={__:[],__h:[]})).__.length&&t.__.push({__V:Se}),t.__[e]}function C(e){return me=1,function(e,t,r){var n=R(he++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):F(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0];t!==(e=n.t(t,e))&&(n.__N=[e,n.__[1]],n.__c.setState({}))}],n.__c=_e,!_e.u)){var o=function(e,t,r){if(!n.__c.__H)return!0;var o=n.__c.__H.__.filter((function(e){return!!e.__c}));if(o.every((function(e){return!e.__N})))return!i||i.call(this,e,t,r);var s=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&n.__c.props===e)&&(!i||i.call(this,e,t,r))};_e.u=!0;var i=_e.shouldComponentUpdate,s=_e.componentWillUpdate;_e.componentWillUpdate=function(e,t,r){if(this.__e){var n=i;i=void 0,o(e,t,r),i=n}s&&s.call(this,e,t,r)},_e.shouldComponentUpdate=o}return n.__N||n.__}(F,e)}function D(e,t){var r=R(he++,3);!Te.__s&&x(r.__H,t)&&(r.__=e,r.i=t,_e.__H.__h.push(r))}function w(e){return me=5,L((function(){return{current:e}}),[])}function L(e,t){var r=R(he++,7);return x(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function P(e,t){return me=8,L((function(){return e}),t)}function M(){for(var e;e=ye.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(j),e.__H.__h.forEach(k),e.__H.__h=[]}catch(t){e.__H.__h=[],Te.__e(t,e.__v)}}function U(e){var t,r=function(){clearTimeout(n),Re&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);Re&&(t=requestAnimationFrame(r))}function j(e){var t=_e,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),_e=t}function k(e){var t=_e;e.__c=e.__(),_e=t}function x(e,t){return!e||e.length!==t.length||t.some((function(t,r){return t!==e[r]}))}function F(e,t){return"function"==typeof t?t(e):t}function B(e){e=e.options;var t=L((function(){var e=o(Z.createElementNS("http://www.w3.org/2000/svg","svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),t=o(Z.createElementNS("http://www.w3.org/2000/svg","path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return e.appendChild(t),{__html:e.outerHTML}}),[]);return l("h2",{class:"dialog__header",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx",lineNumber:16}},e.formTitle,e.showBranding?l("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx",lineNumber:19}}):null)}function G(e,t){return"string"==typeof(e=e.get(t))?e.trim():""}function V(e){var t=e.defaultEmail,r=e.defaultName,n=e.onFormClose,o=e.onSubmit,s=e.onSubmitSuccess,a=e.onSubmitError,u=e.showEmail,c=e.showName,d=e.screenshotInput,f=e.options;e=f.addScreenshotButtonLabel;var p=f.removeScreenshotButtonLabel,h=f.cancelButtonLabel,_=f.emailLabel,E=f.emailPlaceholder,g=f.isEmailRequired,m=f.isNameRequired,y=f.messageLabel,S=f.messagePlaceholder,T=f.nameLabel,A=f.namePlaceholder,b=f.submitButtonLabel;f=f.isRequiredLabel;var O=i.makeIterator(C(null)),I=O.next().value,v=O.next().value,N=(O=i.makeIterator(C(!1))).next().value,R=O.next().value;O=d&&d.input;var D=i.makeIterator(C(null)),w=D.next().value,L=D.next().value;D=P((function(e){L(e),R(!1)}),[]);var M=P((function(e){var t=[];return m&&!e.name&&t.push(T),g&&!e.email&&t.push(_),e.message||t.push(y),0<t.length?v("Please enter in the following required fields: "+t.join(", ")):v(null),0===t.length}),[_,g,m,y,T]);return l("form",{class:"form",onSubmit:P((function(e){var t,r,n,u;return i.asyncExecutePromiseGeneratorProgram((function(i){switch(i.nextAddress){case 1:return i.setCatchFinallyBlocks(2),e.preventDefault(),e.target instanceof HTMLFormElement?(t=new FormData(e.target),i.yield(d&&N?d.value():void 0,4)):i.return();case 4:return r=i.yieldResult,n={name:G(t,"name"),email:G(t,"email"),message:G(t,"message"),attachments:r?[r]:void 0},M(n)?(i.setCatchFinallyBlocks(5),i.yield(o({name:n.name,email:n.email,message:n.message,source:"widget"},{attachments:n.attachments}),7)):i.return();case 7:s(n),i.leaveTryBlock(6,2);break;case 5:u=i.enterCatchBlock(2),te&&X.logger.error(u),v("There was a problem submitting feedback, please wait and try again."),a(u);case 6:i.leaveTryBlock(0);break;case 2:i.enterCatchBlock(),i.jumpToEnd()}}))}),[d&&N,s,a]),__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:142}},O&&N?l(O,{onError:D,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:144}}):null,l("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:147}},l("div",{class:"form__top",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:148}},I?l("div",{class:"form__error-container",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:149}},I):null,c?l("label",{for:"name",class:"form__label",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:152}},l(H,{label:T,isRequiredLabel:f,isRequired:m,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:153}}),l("input",{class:"form__input",defaultValue:r,id:"name",name:"name",placeholder:A,required:m,type:"text",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:154}})):l("input",{"aria-hidden":!0,value:r,name:"name",type:"hidden",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:165}}),u?l("label",{for:"email",class:"form__label",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:169}},l(H,{label:_,isRequiredLabel:f,isRequired:g,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:170}}),l("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:E,required:g,type:"email",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:171}})):l("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:182}}),l("label",{for:"message",class:"form__label",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:185}},l(H,{label:y,isRequiredLabel:f,isRequired:!0,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:186}}),l("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:S,required:!0,rows:5,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:187}})),O?l("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:199}},l("button",{class:"btn btn--default",type:"button",onClick:function(){L(null),R((function(e){return!e}))},__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:200}},N?p:e),w?l("div",{class:"form__error-container",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:210}},w.message):null):null),l("div",{class:"btn-group",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:214}},l("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:215}},b),l("button",{class:"btn btn--default",type:"button",onClick:n,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:218}},h))))}function H(e){var t=e.isRequiredLabel;return l("span",{class:"form__label__text",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:233}},e.label,e.isRequired&&l("span",{class:"form__label__text--required",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx",lineNumber:235}},t))}function W(){var e=function(e){return J.document.createElementNS("http://www.w3.org/2000/svg",e)},t=o(e("svg"),{width:"16",height:"17",viewBox:"0 0 16 17",fill:"inherit"}),r=o(e("g"),{clipPath:"url(#clip0_57_156)"}),n={};n=o(e("path"),(n["fill-rule"]="evenodd",n["clip-rule"]="evenodd",n.d="M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z",n));var i=o(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});return t.appendChild(r).append(i,n),r=e("defs"),n=o(e("clipPath"),{id:"clip0_57_156"}),e=o(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"}),n.appendChild(e),r.appendChild(n),t.appendChild(r).appendChild(n).appendChild(e),t}function Y(e){var t=Object.assign({},e),r=e.open,n=e.onFormSubmitted,o=(delete t.open,delete t.onFormSubmitted,t);e=o.options,t=L((function(){return{__html:W().outerHTML}}),[]);var s=i.makeIterator(C(null)),a=s.next().value,u=s.next().value;s=P((function(){a&&(clearTimeout(a),u(null)),n()}),[a]);var c=P((function(e){o.onSubmitSuccess(e),u(setTimeout((function(){n(),u(null)}),5e3))}),[n]);return l(d,{__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:47}},a?l("div",{class:"success__position",onClick:s,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:49}},l("div",{class:"success__content",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:50}},e.successMessageText,l("span",{class:"success__icon",dangerouslySetInnerHTML:t,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:52}}))):l("dialog",{class:"dialog",onClick:e.onFormClose,open:r,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:56}},l("div",{class:"dialog__position",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:57}},l("div",{class:"dialog__content",onClick:function(e){e.stopPropagation()},__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:58}},l(B,{options:e,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:65}}),l(V,Object.assign({},o,{onSubmitSuccess:c,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx",lineNumber:66}}))))))}function K(e){var t=e.imageBuffer,r=e.dialog,n=e.options;return function(e){function o(){var e=d.current,r=we(Le(t));e&&(e.width=r.width*De,e.height=r.height*De,e.style.width=r.width+"px",e.style.height=r.height+"px",(e=e.getContext("2d"))&&e.scale(De,De)),(e=c.current)&&(e.style.width=r.width+"px",e.style.height=r.height+"px",e.style.left=r.x+"px",e.style.top=r.y+"px"),h({startX:0,startY:0,endX:r.width,endY:r.height})}function s(e,t){E(!1);var r=g(t),n=function(){Z.removeEventListener("mousemove",r),Z.removeEventListener("mouseup",n),E(!0)};Z.addEventListener("mouseup",n),Z.addEventListener("mousemove",r)}var a=e.onError;e=L((function(){var e=Z.createElement("style");return e.textContent="\n.editor {\n  padding: 10px;\n  padding-top: 65px;\n  padding-bottom: 65px;\n  flex-grow: 1;\n\n  background-color: #1A141F;\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      #1A141F 8px,\n      #1A141F 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      #302735 15px,\n      #302735 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.editor__canvas-container canvas {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n\n.editor__crop-btn-group {\n  padding: 8px;\n  gap: 8px;\n  border-radius: var(--menu-border-radius, 6px);\n  background: var(--button-primary-background, var(--background));\n  width: 175px;\n  position: absolute;\n}\n\n.editor__crop-corner {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  background: none;\n  border: 3px solid #ffffff;\n}\n\n.editor__crop-corner--top-left {\n  cursor: nwse-resize;\n  border-right: none;\n  border-bottom: none;\n}\n.editor__crop-corner--top-right {\n  cursor: nesw-resize;\n  border-left: none;\n  border-bottom: none;\n}\n.editor__crop-corner--bottom-left {\n  cursor: nesw-resize;\n  border-right: none;\n  border-top: none;\n}\n.editor__crop-corner--bottom-right {\n  cursor: nwse-resize;\n  border-left: none;\n  border-top: none;\n}\n",{__html:e.innerText}}),[]);var u=w(null),c=w(null),d=w(null),f=i.makeIterator(C({startX:0,startY:0,endX:0,endY:0})),p=f.next().value,h=f.next().value,_=(f=i.makeIterator(C(!1))).next().value,E=f.next().value;D((function(){J.addEventListener("resize",o,!1)}),[]),D((function(){var e=d.current;if(e&&(e=e.getContext("2d"))){var r=we(Le(t)),n=we(p);e.clearRect(0,0,r.width,r.height),e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,r.width,r.height),e.clearRect(n.x,n.y,n.width,n.height),e.strokeStyle="#ffffff",e.lineWidth=3,e.strokeRect(n.x+1,n.y+1,n.width-2,n.height-2),e.strokeStyle="#000000",e.lineWidth=1,e.strokeRect(n.x+3,n.y+3,n.width-6,n.height-6)}}),[p]);var g=P((function(e){return function(t){if(d.current){var r=d.current,n=r.getBoundingClientRect(),o=t.clientX-n.x,i=t.clientY-n.y;switch(e){case"top-left":h((function(e){return Object.assign({},e,{startX:Math.min(Math.max(0,o),e.endX-33),startY:Math.min(Math.max(0,i),e.endY-33)})}));break;case"top-right":h((function(e){return Object.assign({},e,{endX:Math.max(Math.min(o,r.width/De),e.startX+33),startY:Math.min(Math.max(0,i),e.endY-33)})}));break;case"bottom-left":h((function(e){return Object.assign({},e,{startX:Math.min(Math.max(0,o),e.endX-33),endY:Math.max(Math.min(i,r.height/De),e.startY+33)})}));break;case"bottom-right":h((function(e){return Object.assign({},e,{endX:Math.max(Math.min(o,r.width/De),e.startX+33),endY:Math.max(Math.min(i,r.height/De),e.startY+33)})}))}}}}),[]);return Ce({onBeforeScreenshot:P((function(){r.el.style.display="none"}),[]),onScreenshot:P((function(e){var r=t.getContext("2d");if(!r)throw Error("Could not get canvas context");t.width=e.videoWidth,t.height=e.videoHeight,r.drawImage(e,0,0)}),[t]),onAfterScreenshot:P((function(){r.el.style.display="block";var e=u.current;e&&e.appendChild(t),o()}),[]),onError:P((function(e){r.el.style.display="block",a(e)}),[])}),l("div",{class:"editor",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:249}},l("style",{dangerouslySetInnerHTML:e,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:250}}),l("div",{class:"editor__canvas-container",ref:u,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:251}},l("div",{class:"editor__crop-container",style:{position:"absolute"},ref:c,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:252}},l("canvas",{style:{position:"absolute"},ref:d,__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:253}}),l(z,{left:p.startX-3,top:p.startY-3,onGrabButton:s,corner:"top-left",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:254}}),l(z,{left:p.endX-30+3,top:p.startY-3,onGrabButton:s,corner:"top-right",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:260}}),l(z,{left:p.startX-3,top:p.endY-30+3,onGrabButton:s,corner:"bottom-left",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:266}}),l(z,{left:p.endX-30+3,top:p.endY-30+3,onGrabButton:s,corner:"bottom-right",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:272}}),l("div",{style:{left:Math.max(0,p.endX-191),top:Math.max(0,p.endY+8),display:_?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:278}},l("button",{onClick:function(e){e.preventDefault(),d.current&&h({startX:0,startY:0,endX:d.current.width/De,endY:d.current.height/De}),E(!1)},class:"btn btn--default",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:286}},n.cancelButtonLabel),l("button",{onClick:function(e){e.preventDefault(),e=Z.createElement("canvas");var r=we(Le(t)),n=we(p);e.width=n.width,e.height=n.height;var i=e.getContext("2d");i&&t&&i.drawImage(t,n.x/r.width*t.width,n.y/r.height*t.height,n.width/r.width*t.width,n.height/r.height*t.height,0,0,n.width,n.height),(r=t.getContext("2d"))&&(r.clearRect(0,0,t.width,t.height),t.width=e.width,t.height=e.height,r.drawImage(e,0,0),o()),E(!1)},class:"btn btn--primary",__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:303}},n.confirmButtonLabel)))))}}function z(e){var t=e.corner,r=e.onGrabButton;return l("button",{class:"editor__crop-corner editor__crop-corner--"+t+" ",style:{top:e.top,left:e.left},onMouseDown:function(e){e.preventDefault(),r(e,t)},onClick:function(e){e.preventDefault()},__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",lineNumber:333}})}Object.defineProperty(t,"__esModule",{value:!0});var q,$=r("./node_modules/@sentry/core/cjs/index.js"),X=r("./node_modules/@sentry/utils/cjs/index.js"),J=X.GLOBAL_OBJ,Z=J.document,Q=J.navigator,ee=function(e,t){if(t=void 0===t?{includeReplay:!0}:t,!e.message)throw Error("Unable to submit feedback with empty message");var r=$.getClient();if(!r)throw Error("No client setup, cannot send feedback.");var n=$.captureFeedback(Object.assign({},{source:"api",url:X.getLocationHref()},e),t);return new Promise((function(e,t){var o=setTimeout((function(){return t("Unable to determine if Feedback was correctly sent.")}),5e3);r.on("afterSendEvent",(function(r,i){if(r.event_id===n){if(clearTimeout(o),i&&"number"==typeof i.statusCode&&(200>i.statusCode||300<=i.statusCode))return 0===i.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):t("Unable to send Feedback. Invalid response from server.");e(n)}}))}))},te="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,re={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:"rgba(88, 74, 192, 1)",successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},ne={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:"rgba(88, 74, 192, 1)",successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"},oe={},ie=[],se=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ae=Array.isArray,ue=ie.slice,le={__e:function(e,t,r,n){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,n||{}),s=o.__d),s)return o.__E=o}catch(t){e=t}throw e}},ce=0;f.prototype.setState=function(e,t){var r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=u({},this.state);"function"==typeof e&&(e=e(u({},r),this.props)),e&&u(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),_(this))},f.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_(this))},f.prototype.render=d;var de=[],fe="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pe=function(e,t){return e.__v.__b-t.__v.__b};E.__r=0;var he,_e,Ee,ge,me=0,ye=[],Se=[],Te=le,Ae=Te.__b,be=Te.__r,Oe=Te.diffed,Ie=Te.__c,ve=Te.unmount,Ne=Te.__;Te.__b=function(e){_e=null,Ae&&Ae(e)},Te.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ne&&Ne(e,t)},Te.__r=function(e){be&&be(e),he=0,(e=(_e=e.__c).__H)&&(Ee===_e?(e.__h=[],_e.__h=[],e.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=Se,e.__N=e.i=void 0}))):(e.__h.forEach(j),e.__h.forEach(k),e.__h=[],he=0)),Ee=_e},Te.diffed=function(e){Oe&&Oe(e),(e=e.__c)&&e.__H&&(e.__H.__h.length&&(1!==ye.push(e)&&ge===Te.requestAnimationFrame||((ge=Te.requestAnimationFrame)||U)(M)),e.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==Se&&(e.__=e.__V),e.i=void 0,e.__V=Se}))),Ee=_e=null},Te.__c=function(e,t){t.some((function(e){try{e.__h.forEach(j),e.__h=e.__h.filter((function(e){return!e.__||k(e)}))}catch(r){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Te.__e(r,e.__v)}})),Ie&&Ie(e,t)},Te.unmount=function(e){var t;ve&&ve(e),(e=e.__c)&&e.__H&&(e.__H.__.forEach((function(e){try{j(e)}catch(e){t=e}})),e.__H=void 0,t&&Te.__e(t,e.__v))};var Re="function"==typeof requestAnimationFrame,Ce=function(e){var t=e.onBeforeScreenshot,r=e.onScreenshot,n=e.onAfterScreenshot,o=e.onError;D((function(){var e,s;i.asyncExecutePromiseGeneratorProgram((function(o){return 1==o.nextAddress?(t(),o.yield(Q.mediaDevices.getDisplayMedia({video:{width:J.innerWidth*J.devicePixelRatio,height:J.innerHeight*J.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),2)):3!=o.nextAddress?(e=o.yieldResult,s=Z.createElement("video"),o.yield(new Promise((function(t,n){s.srcObject=e,s.onloadedmetadata=function(){r(s),e.getTracks().forEach((function(e){return e.stop()})),t()},s.play().catch(n)})),3)):(n(),void o.jumpToEnd())})).catch(o)}),[])},De=J.devicePixelRatio,we=function(e){return{x:Math.min(e.startX,e.endX),y:Math.min(e.startY,e.endY),width:Math.abs(e.startX-e.endX),height:Math.abs(e.startY-e.endY)}},Le=function(e){var t=e.clientHeight,r=e.clientWidth,n=e.width/e.height,o=t;return(e=t*n)>r&&(e=r,o=r/n),{startX:r=(r-e)/2,startY:t=(t-o)/2,endX:e+r,endY:o+t}};t.buildFeedbackIntegration=function(e){var t=e.lazyLoadIntegration,r=e.getModalIntegration,o=e.getScreenshotIntegration;return function(e){var u={id:void 0===(e=void 0===e?{}:e).id?"sentry-feedback":e.id,autoInject:void 0===e.autoInject||e.autoInject,showBranding:void 0===e.showBranding||e.showBranding,isEmailRequired:void 0!==e.isEmailRequired&&e.isEmailRequired,isNameRequired:void 0!==e.isNameRequired&&e.isNameRequired,showEmail:void 0===e.showEmail||e.showEmail,showName:void 0===e.showName||e.showName,enableScreenshot:void 0===e.enableScreenshot||e.enableScreenshot,useSentryUser:void 0===e.useSentryUser?{email:"email",name:"username"}:e.useSentryUser,colorScheme:void 0===e.colorScheme?"system":e.colorScheme,themeDark:void 0===e.themeDark?{}:e.themeDark,themeLight:void 0===e.themeLight?{}:e.themeLight,triggerLabel:void 0===e.triggerLabel?"Report a Bug":e.triggerLabel,cancelButtonLabel:void 0===e.cancelButtonLabel?"Cancel":e.cancelButtonLabel,submitButtonLabel:void 0===e.submitButtonLabel?"Send Bug Report":e.submitButtonLabel,confirmButtonLabel:void 0===e.confirmButtonLabel?"Confirm":e.confirmButtonLabel,formTitle:void 0===e.formTitle?"Report a Bug":e.formTitle,emailLabel:void 0===e.emailLabel?"Email":e.emailLabel,emailPlaceholder:void 0===e.emailPlaceholder?"your.email@example.org":e.emailPlaceholder,messageLabel:void 0===e.messageLabel?"Description":e.messageLabel,messagePlaceholder:void 0===e.messagePlaceholder?"What's the bug? What did you expect?":e.messagePlaceholder,nameLabel:void 0===e.nameLabel?"Name":e.nameLabel,namePlaceholder:void 0===e.namePlaceholder?"Your Name":e.namePlaceholder,successMessageText:void 0===e.successMessageText?"Thank you for your report!":e.successMessageText,isRequiredLabel:void 0===e.isRequiredLabel?"(required)":e.isRequiredLabel,addScreenshotButtonLabel:void 0===e.addScreenshotButtonLabel?"Add a screenshot":e.addScreenshotButtonLabel,removeScreenshotButtonLabel:void 0===e.removeScreenshotButtonLabel?"Remove screenshot":e.removeScreenshotButtonLabel,onFormClose:e.onFormClose,onFormOpen:e.onFormOpen,onSubmitError:e.onSubmitError,onSubmitSuccess:e.onSubmitSuccess,onFormSubmitted:e.onFormSubmitted},l=null,c=[],d=function(e){if(!l){var t=Z.createElement("div");t.id=String(e.id),Z.body.appendChild(t);var r=(t=l=t.attachShadow({mode:"open"})).appendChild,n=e.colorScheme,o=e.themeDark;e=e.themeLight;var i=Z.createElement("style");i.textContent="\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  "+("system"!==n?"color-scheme: only light;":"")+"\n\n  "+a("dark"===n?Object.assign({},ne,o):Object.assign({},re,e))+"\n}\n\n"+("system"===n?"\n@media (prefers-color-scheme: dark) {\n  :host {\n    "+a(Object.assign({},ne,o))+"\n  }\n}":"")+"\n}\n",r.call(t,i)}return l},f=function(e,r,n){var o,s,a,u;return i.asyncExecutePromiseGeneratorProgram((function(i){return 1==i.nextAddress?(s=(o=$.getClient())&&o.getIntegrationByName(e))?i.return(s):(a=r&&r())?i.jumpTo(2):i.yield(t(n),3):(2!=i.nextAddress&&(a=i.yieldResult),u=a(),o&&o.addIntegration(u),i.return(u))}))},p=function(e){var t,n,s,a,u,l;return i.asyncExecutePromiseGeneratorProgram((function(c){if(1==c.nextAddress)return t=e.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Q.userAgent)||!isSecureContext),s=(n=i).makeIterator,c.yield(Promise.all([f("FeedbackModal",r,"feedbackModalIntegration"),t?f("FeedbackScreenshot",o,"feedbackScreenshotIntegration"):void 0]),2);if(a=s.call(n,c.yieldResult),u=a.next().value,l=a.next().value,!u)throw te&&X.logger.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),Error("[Feedback] Missing feedback modal integration!");return t&&!l&&te&&X.logger.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots."),c.return(u.createDialog({options:e,screenshotIntegration:t?l:void 0,sendFeedback:ee,shadow:d(e)}))}))},h=function(e,t){var r=n(u,t=void 0===t?{}:t),o="string"==typeof e?Z.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!o)throw te&&X.logger.error("[Feedback] Unable to attach to target element"),Error("Unable to attach to target element");var s=null,a=function(){return i.asyncExecutePromiseGeneratorProgram((function(e){if(1==e.nextAddress)return s?e.jumpTo(2):e.yield(p(Object.assign({},r,{onFormClose:function(){s&&s.close(),r.onFormClose&&r.onFormClose()},onFormSubmitted:function(){s&&s.removeFromDom(),r.onFormSubmitted&&r.onFormSubmitted()}})),3);2!=e.nextAddress&&(s=e.yieldResult),s.appendToDom(),s.open(),e.jumpToEnd()}))};o.addEventListener("click",a);var l=function(){c=c.filter((function(e){return e!==l})),s&&s.removeFromDom(),s=null,o.removeEventListener("click",a)};return c.push(l),l},_=function(e){e=void 0===e?{}:e;var t=d(u),r=s({triggerLabel:u.triggerLabel,shadow:t});return e=n(u,Object.assign({},e,{onFormOpen:function(){r.hide()},onFormClose:function(){r.show()},onFormSubmitted:function(){r.show()}})),h(r.el,e),r};return{name:"Feedback",setupOnce:function(){X.isBrowser()&&u.autoInject&&_().appendToDom()},attachTo:h,createWidget:function(e){return(e=_(n(u,e=void 0===e?{}:e))).appendToDom(),e},createForm:function(e){return e=void 0===e?{}:e,i.asyncExecutePromiseGeneratorProgram((function(t){return t.return(p(n(u,e)))}))},remove:function(){l&&(l.parentElement&&l.parentElement.remove(),l=null),c.forEach((function(e){return e()})),c=[]}}}},t.feedbackModalIntegration=function(){return{name:"FeedbackModal",setupOnce:function(){},createDialog:function(e){var t=e.options,r=e.screenshotIntegration,n=e.sendFeedback,o=e.shadow,i=t.useSentryUser,s=function(){var e=$.getCurrentScope().getUser(),t=$.getIsolationScope().getUser(),r=$.getGlobalScope().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:r}(),a=Z.createElement("div"),u=function(){var e=Z.createElement("style");return e.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form__right {\n  width: var(--form-width, 272px);\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n  flex: 1 0 auto;\n}\n\n@media (max-width: 600px) {\n  .form__right {\n    width: auto;\n  }\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-foreground);\n  fill: var(--error-foreground);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n",e}(),c="";e={get el(){return a},appendToDom:function(){o.contains(u)||o.contains(a)||(o.appendChild(u),o.appendChild(a))},removeFromDom:function(){o.removeChild(a),o.removeChild(u)},open:function(){p(!0),t.onFormOpen&&t.onFormOpen(),c=Z.body.style.overflow,Z.body.style.overflow="hidden"},close:function(){p(!1),Z.body.style.overflow=c}};var f=r&&r.createInput(l,e,t),p=function(e){!function(e,t,r){var n;le.__&&le.__(e,t);var o=(n="function"==typeof r)?null:r&&r.__k||t.__k,i=[],s=[];b(t,e=(!n&&r||t).__k=l(d,null,[e]),o||oe,oe,void 0!==t.ownerSVGElement,!n&&r?[r]:o?null:t.firstChild?ue.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n,s),e.__d=void 0,O(i,e,s)}(l(Y,{options:t,screenshotInput:f,showName:t.showName||t.isNameRequired,showEmail:t.showEmail||t.isEmailRequired,defaultName:i&&s&&s[i.name]||"",defaultEmail:i&&s&&s[i.email]||"",onFormClose:function(){p(!1),t.onFormClose&&t.onFormClose()},onSubmit:n,onSubmitSuccess:function(e){p(!1),t.onSubmitSuccess&&t.onSubmitSuccess(e)},onSubmitError:function(e){t.onSubmitError&&t.onSubmitError(e)},onFormSubmitted:function(){t.onFormSubmitted&&t.onFormSubmitted()},open:e,__self:void 0,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx",lineNumber:72}}),a)};return e}}},t.feedbackScreenshotIntegration=function(){return{name:"FeedbackScreenshot",setupOnce:function(){},createInput:function(e,t,r){var n=Z.createElement("canvas");return{input:K({h:e,imageBuffer:n,dialog:t,options:r}),value:function(){var e,t,r,o;return i.asyncExecutePromiseGeneratorProgram((function(i){switch(i.nextAddress){case 1:return i.yield(new Promise((function(e){n.toBlob(e,"image/png")})),2);case 2:if(!(e=i.yieldResult)){i.jumpTo(3);break}return t=Uint8Array,i.yield(e.arrayBuffer(),4);case 4:return r=new t(i.yieldResult),o={data:r,filename:"screenshot.png",contentType:"application/png"},i.return(o);case 3:return i.return(void 0)}}))}}}}},t.getFeedback=function(){var e=$.getClient();return e&&e.getIntegrationByName("Feedback")},t.sendFeedback=ee},"./node_modules/@sentry-internal/replay-canvas/cjs/index.js":function(e,t,r){function n(e,t,r,o){return r=void 0===r?1/0:r,o=void 0===o?0:o,!e||e.nodeType!==e.ELEMENT_NODE||o>r?-1:t(e)?o:n(e.parentNode,t,r,o+1)}function o(e,t){return function(r){if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches("."+e))return!0}else{e:{for(var n=r.classList.length;n--;)if(e.test(r.classList[n])){var o=!0;break e}o=!1}if(o)return!0}return!(!t||!r.matches(t))}catch(e){return!1}}}function s(e,t,r,n,o){var i=(o=void 0===o?window:o).Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set:function(e){var t=this;d((function(){r.set.call(t,e)}),0),i&&i.set&&i.set.call(this,e)}}),function(){return s(e,t,i||{},!0)}}function a(e,t,r){try{if(!(t in e))return function(){};var n=e[t],o=r(n);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,function(){e[t]=n}}catch(e){return function(){}}}function u(e,t,r,i,s){return!!e&&!!(e=e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null)&&(t=o(t,r),s?(s=n(e,t),t=-1,!(0>s)&&(i&&(t=n(e,o(null,i))),-1<s&&0>t||s<t)):(i=i&&e.matches(i),t(e)&&!i))}function l(e){var t=y[e];if(t)return t;t=window.document;var r=window[e];if(t&&"function"==typeof t.createElement)try{var n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);var o=n.contentWindow;o&&o[e]&&(r=o[e]),t.head.removeChild(n)}catch(e){}return y[e]=r.bind(window)}function c(){var e=i.getRestArguments.apply(0,arguments);return l("requestAnimationFrame").apply(null,i.arrayFromIterable(e))}function d(){var e=i.getRestArguments.apply(0,arguments);return l("setTimeout").apply(null,i.arrayFromIterable(e))}function f(e,t,r){if(e instanceof Array)return e.map((function(e){return f(e,t,r)}));if(null!==e){if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var n=e.constructor.name;return{rr_type:n,base64:e=A(e)}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[f(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement)return{rr_type:e.constructor.name,src:e.src};if(e instanceof HTMLCanvasElement)return{rr_type:"HTMLImageElement",src:e.toDataURL()};if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[f(e.data,t,r),e.width,e.height]};if(v(e,t)||"object"==typeof e)return{rr_type:n=e.constructor.name,index:e=O(e,t,r)}}return e}function p(e,t,r,n,o){var s=[];try{var l=a(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(s){var a=i.getRestArguments.apply(1,arguments);if(!u(this,t,r,n,!0)){var l="experimental-webgl"===s?"webgl":s;"__context"in this||(this.__context=l),o&&["webgl","webgl2"].includes(l)&&(a[0]&&"object"==typeof a[0]?(l=a[0]).preserveDrawingBuffer||(l.preserveDrawingBuffer=!0):a.splice(0,1,{preserveDrawingBuffer:!0}))}return e.apply(this,[s].concat(i.arrayFromIterable(a)))}}));s.push(l)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){s.forEach((function(e){return e()}))}}function h(e,t,r,n,o,l,c,d){c=[];for(var f=Object.getOwnPropertyNames(e),p={},h=(f=i.makeIterator(f)).next();!h.done;p={$jscomp$loop$prop$prop$180:p.$jscomp$loop$prop$prop$180},h=f.next())if(p.$jscomp$loop$prop$prop$180=h.value,!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(p.$jscomp$loop$prop$prop$180))try{if("function"==typeof e[p.$jscomp$loop$prop$prop$180]){var _=a(e,p.$jscomp$loop$prop$prop$180,function(e){return function(s){return function(){var a=i.getRestArguments.apply(0,arguments),c=s.apply(this,a);return O(c,d,this),"tagName"in this.canvas&&!u(this.canvas,n,o,l,!0)&&(a=I(a,d,this),r(this.canvas,{type:t,property:e.$jscomp$loop$prop$prop$180,args:a})),c}}}(p));c.push(_)}}catch(n){h=s(e,p.$jscomp$loop$prop$prop$180,{set:function(e){return function(n){r(this.canvas,{type:t,property:e.$jscomp$loop$prop$prop$180,args:[n],setter:!0})}}(p)}),c.push(h)}return c}var _,E,g=r("./node_modules/@sentry/utils/cjs/index.js")._optionalChain;Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/core/cjs/index.js"),(E=_||(_={}))[E.Document=0]="Document",E[E.DocumentType=1]="DocumentType",E[E.Element=2]="Element",E[E.Text=3]="Text",E[E.CDATA=4]="CDATA",E[E.Comment=5]="Comment",_={map:{},getId:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),-1},getNode:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),null},removeNodeFromMap:function(){console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.")},has:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),!1},reset:function(){console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.")}},"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(_=new Proxy(_,{get:function(e,t,r){return"map"===t&&console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),Reflect.get(e,t,r)}})),/[1-9][0-9]{12}/.test(Date.now().toString());var m,y={},S=function(e){return e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e}(S||{}),T=function(e){return m?function(){var t=i.getRestArguments.apply(0,arguments);try{return e.apply(null,i.arrayFromIterable(t))}catch(e){if(m&&!0===m(e))return function(){};throw e}}:e};for(_="undefined"==typeof Uint8Array?[]:new Uint8Array(256),r=0;64>r;r++)_["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(r)]=r;var A=function(e){var t,r=(e=new Uint8Array(e)).length,n="";for(t=0;t<r;t+=3)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e[t]>>2],n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&e[t])<<4|e[t+1]>>4],n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&e[t+1])<<2|e[t+2]>>6],n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&e[t+2]];return 2==r%3?n=n.substring(0,n.length-1)+"=":1==r%3&&(n=n.substring(0,n.length-2)+"=="),n},b=new Map,O=function(e,t,r){if(e&&(v(e,t)||"object"==typeof e)){t=e.constructor.name;var n=b.get(r);return n||(n=new Map,b.set(r,n)),n.has(t)||n.set(t,[]),-1===(t=(r=n.get(t)).indexOf(e))&&(t=r.length,r.push(e)),t}},I=function(e,t,r){return e.map((function(e){return f(e,t,r)}))},v=function(e,t){return!!"WebGLActiveInfo WebGLBuffer WebGLFramebuffer WebGLProgram WebGLRenderbuffer WebGLShader WebGLShaderPrecisionFormat WebGLTexture WebGLUniformLocation WebGLVertexArrayObject WebGLVertexArrayObjectOES".split(" ").filter((function(e){return"function"==typeof t[e]})).find((function(r){return e instanceof t[r]}))},N=function(e){var t=this;this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.locked=this.frozen=!1,this.processMutation=function(e,r){(t.rafStamps.invokeId&&t.rafStamps.latestId!==t.rafStamps.invokeId||!t.rafStamps.invokeId)&&(t.rafStamps.invokeId=t.rafStamps.latestId),t.pendingCanvasMutations.has(e)||t.pendingCanvasMutations.set(e,[]),t.pendingCanvasMutations.get(e).push(r)};var r=void 0===e.sampling?"all":e.sampling,n=e.win,o=e.blockClass,i=e.blockSelector,s=e.unblockSelector,a=e.maxCanvasSize,u=e.recordCanvas,l=e.dataURLOptions,c=e.errorHandler;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,c&&(m=c),e.enableManualSnapshot||T((function(){u&&"all"===r&&t.initCanvasMutationObserver(n,o,i,s),u&&"number"==typeof r&&t.initCanvasFPSObserver(r,n,o,i,s,a,{dataURLOptions:l})}))()};N.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},N.prototype.freeze=function(){this.frozen=!0},N.prototype.unfreeze=function(){this.frozen=!1},N.prototype.lock=function(){this.locked=!0},N.prototype.unlock=function(){this.locked=!1},N.prototype.initCanvasFPSObserver=function(e,t,r,n,o,i,s){var a=p(t,r,n,o,!0),u=this.takeSnapshot(!1,e,t,r,n,o,i,s.dataURLOptions);this.resetObservers=function(){a(),cancelAnimationFrame(u)}},N.prototype.initCanvasMutationObserver=function(e,t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var o=p(e,t,r,n,!1),l=function(e,t,r,n,o){for(var l=[],c=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),f={},p=(c=i.makeIterator(c)).next();!p.done;f={$jscomp$loop$prop$prop$177:f.$jscomp$loop$prop$prop$177},p=c.next()){f.$jscomp$loop$prop$prop$177=p.value;try{if("function"==typeof t.CanvasRenderingContext2D.prototype[f.$jscomp$loop$prop$prop$177]){var h=a(t.CanvasRenderingContext2D.prototype,f.$jscomp$loop$prop$prop$177,function(s){return function(a){return function(){var l=i.getRestArguments.apply(0,arguments),c=this;return u(this.canvas,r,n,o,!0)||d((function(){var r=I(l,t,c);e(c.canvas,{type:S["2D"],property:s.$jscomp$loop$prop$prop$177,args:r})}),0),a.apply(this,l)}}}(f));l.push(h)}}catch(r){p=s(t.CanvasRenderingContext2D.prototype,f.$jscomp$loop$prop$prop$177,{set:function(t){return function(r){e(this.canvas,{type:S["2D"],property:t.$jscomp$loop$prop$prop$177,args:[r],setter:!0})}}(f)}),l.push(p)}}return function(){l.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,r,n),c=function(e,t,r,n,o,s){var a=[];return a.push.apply(a,i.arrayFromIterable(h(t.WebGLRenderingContext.prototype,S.WebGL,e,r,n,o,s,t))),void 0!==t.WebGL2RenderingContext&&a.push.apply(a,i.arrayFromIterable(h(t.WebGL2RenderingContext.prototype,S.WebGL2,e,r,n,o,s,t))),function(){a.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,r,n,this.mirror);this.resetObservers=function(){o(),l(),c()}},N.prototype.snapshot=function(e){var t=this.options,r=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=function(){cancelAnimationFrame(r)}},N.prototype.takeSnapshot=function(e,t,r,n,o,i,s,a,l){var d=this,f=new Map,p=new Worker(function(){var e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());p.onmessage=function(e){var t=(e=e.data).id;if(f.set(t,!1),"base64"in e){var r=e.width,n=e.height;d.mutationCb({id:t,type:S["2D"],commands:[{property:"clearRect",args:[0,0,r,n]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:e.base64}],type:e.type}]},0,0,r,n]}]})}};var h=1e3/t,_=0,E=function(t){_&&t-_<h||(_=t,function(e){if(e)return[e];var t=[];return r.document.querySelectorAll("canvas").forEach((function(e){u(e,n,o,i,!0)||t.push(e)})),t}(l).forEach((function(t){var r=d.mirror.getId(t);if(!f.get(r)&&t.width&&t.height){if(f.set(r,!0),!e&&["webgl","webgl2"].includes(t.__context)){var n=t.getContext(t.__context);!1===g([n,"optionalAccess",function(e){return e.getContextAttributes},"call",function(e){return e()},"optionalAccess",function(e){return e.preserveDrawingBuffer}])&&n.clear(n.COLOR_BUFFER_BIT)}createImageBitmap(t).then((function(e){p.postMessage({id:r,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:s},[e])})).catch((function(e){T((function(){throw e}))()}))}}))),c(E)};return c(E)},N.prototype.startPendingCanvasMutationFlusher=function(){var e=this;c((function(){return e.flushPendingCanvasMutations()}))},N.prototype.startRAFTimestamping=function(){var e=this,t=function(r){e.rafStamps.latestId=r,c(t)};c(t)},N.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach((function(t,r){t=e.mirror.getId(r),e.flushPendingCanvasMutationFor(r,t)})),c((function(){return e.flushPendingCanvasMutations()}))},N.prototype.flushPendingCanvasMutationFor=function(e,t){if(!this.frozen&&!this.locked){var r=this.pendingCanvasMutations.get(e);if(r&&-1!==t){var n=r.map((function(e){return delete(e=Object.assign({},e)).type,e}));this.mutationCb({id:t,type:r[0].type,commands:n}),this.pendingCanvasMutations.delete(e)}}};var R={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}};e=e.defineIntegration((function(e){e=void 0===e?{}:e;var t=i.makeIterator(e.maxCanvasSize||[]),r=t.next().value;t=t.next().value;var n,o=e.quality||"medium",s=e.enableManualSnapshot,a=[r?Math.min(r,1280):1280,t?Math.min(t,1280):1280],u=new Promise((function(e){return n=e}));return{name:"ReplayCanvas",getOptions:function(){return Object.assign({},{enableManualSnapshot:s,recordCanvas:!0,getCanvasManager:function(e){return e=new N(Object.assign({},e,{enableManualSnapshot:s,maxCanvasSize:a,errorHandler:function(e){try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}})),n(e),e}},R[o||"medium"]||R.medium)},snapshot:function(e){return i.asyncExecutePromiseGeneratorProgram((function(t){if(1==t.nextAddress)return t.yield(u,2);t.yieldResult.snapshot(e),t.jumpToEnd()}))}}})),t.replayCanvasIntegration=e},"./node_modules/@sentry-internal/replay/cjs/index.js":function(e,t,r){function n(e){for(var t=void 0,r=e[0],n=1;n<e.length;){var o=e[n],s=e[n+1];if(n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==r)return;"access"===o||"optionalAccess"===o?(t=r,r=s(r)):"call"!==o&&"optionalCall"!==o||(r=s((function(){var e=i.getRestArguments.apply(0,arguments);return r.call.apply(r,[t].concat(i.arrayFromIterable(e)))})),t=void 0)}return r}function o(e){var t=n([e,"optionalAccess",function(e){return e.host}]);return n([t,"optionalAccess",function(e){return e.shadowRoot}])===e}function s(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function a(e){try{var t=e.rules||e.cssRules;if(t){var r=Array.from(t,u).join("");r.includes(" background-clip: text;")&&!r.includes(" -webkit-background-clip: text;")&&(r=r.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;"));var n=r}else n=null;return n}catch(e){return null}}function u(e){if("styleSheet"in e)try{var t;if(!(t=a(e.styleSheet))){var r=e.cssText;if(3>r.split('"').length)t=r;else{var n=["@import","url("+JSON.stringify(e.href)+")"];""===e.layerName?n.push("layer"):e.layerName&&n.push("layer("+e.layerName+")"),e.supportsText&&n.push("supports("+e.supportsText+")"),e.media.length&&n.push(e.media.mediaText),t=n.join(" ")+";"}}var o=t}catch(e){}else if("selectorText"in e&&e.selectorText.includes(":"))return e.cssText.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2");return o||e.cssText}function l(e){var t=e.maskInputOptions,r=e.tagName;return e=e.type,"OPTION"===r&&(r="SELECT"),!!(t[r.toLowerCase()]||e&&t[e]||"password"===e||"INPUT"===r&&!e&&t.text)}function c(e){var t=e.element,r=e.maskInputFn,n=e.value||"";return e.isMasked?(r&&(n=r(n,t)),"*".repeat(n.length)):n}function d(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?t.toLowerCase():null}function f(e,t,r){return"INPUT"!==t||"radio"!==r&&"checkbox"!==r?e.value:e.getAttribute("value")||""}function p(){return yt++}function h(e,t){return(e||"").replace(Tt,(function(e,r,n,o,s,a){if(r=r||o||"",!(n=n||s||a))return e;if(At.test(n)||bt.test(n)||Ot.test(n))return"url("+r+n+r+")";if("/"===n[0])return"url("+r+((e=(e=-1<t.indexOf("//")?t.split("/").slice(0,3).join("/"):t.split("/")[0]).split("?")[0])+n)+r+")";for(e=t.split("/"),o=n.split("/"),e.pop(),n=(o=i.makeIterator(o)).next();!n.done;n=o.next())"."!==(n=n.value)&&(".."===n?e.pop():e.push(n));return"url("+r+e.join("/")+r+")"}))}function _(e,t){return t&&""!==t.trim()?((e=e.createElement("a")).href=t,e.href):t}function E(){var e=document.createElement("a");return e.href="",e.href}function g(e,t,r,n,o,i){return n?"src"===r||"href"===r&&("use"!==t||"#"!==n[0])||"xlink:href"===r&&"#"!==n[0]||"background"===r&&("table"===t||"td"===t||"th"===t)?_(e,n):"srcset"===r?function(e,t){function r(e){return(e=e.exec(t.substring(n)))?(e=e[0],n+=e.length,e):""}if(""===t.trim())return t;for(var n=0,o=[];r(vt),!(n>=t.length);){var i=r(It);if(","===i.slice(-1))i=_(e,i.substring(0,i.length-1)),o.push(i);else{var s="";i=_(e,i);for(var a=!1;;){var u=t.charAt(n);if(""===u){o.push((i+s).trim());break}if(a)")"===u&&(a=!1);else{if(","===u){n+=1,o.push((i+s).trim());break}"("===u&&(a=!0)}s+=u,n+=1}}}return o.join(", ")}(e,n):"style"===r?h(n,E()):"object"===t&&"data"===r?_(e,n):"function"==typeof i?i(r,n,o):n:n}function m(e,t,r){return("video"===e||"audio"===e)&&"autoplay"===t}function y(e,t,r,n){return r=void 0===r?1/0:r,n=void 0===n?0:n,!e||e.nodeType!==e.ELEMENT_NODE||n>r?-1:t(e)?n:y(e.parentNode,t,r,n+1)}function S(e,t){return function(r){if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches("."+e))return!0}else{e:{for(var n=r.classList.length;n--;)if(e.test(r.classList[n])){var o=!0;break e}o=!1}if(o)return!0}return!(!t||!r.matches(t))}catch(e){return!1}}}function T(e,t,r,n,o,i){try{var s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){var a=s.getAttribute("autocomplete");if("current-password new-password cc-number cc-exp cc-exp-month cc-exp-year cc-csc".split(" ").includes(a))return!0}if(a=e=-1,i){if(0>(a=y(s,S(n,o))))return!0;e=y(s,S(t,r),0<=a?a:1/0)}else{if(0>(e=y(s,S(t,r))))return!1;a=y(s,S(n,o),0<=e?e:1/0)}return 0<=e?!(0<=a)||e<=a:!(0<=a||!i)}catch(e){}return!!i}function A(e,t){var r=t.doc,o=t.mirror,i=t.blockClass,s=t.blockSelector,u=t.unblockSelector,p=t.maskAllText,_=t.maskAttributeFn,y=t.maskTextClass,S=t.unmaskTextClass,A=t.maskTextSelector,b=t.unmaskTextSelector,O=t.inlineStylesheet,I=void 0===t.maskInputOptions?{}:t.maskInputOptions,v=t.maskTextFn,N=t.maskInputFn,R=void 0===t.dataURLOptions?{}:t.dataURLOptions,C=t.inlineImages,D=t.recordCanvas,w=t.keepIframeSrcFn;switch(t=void 0!==t.newlyAddedElement&&t.newlyAddedElement,o=o.hasNode(r)?1===(o=o.getId(r))?void 0:o:void 0,e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:ct.Document,childNodes:[],compatMode:e.compatMode}:{type:ct.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ct.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:o};case e.ELEMENT_NODE:return function(e,t){var r,n=t.doc,o=t.inlineStylesheet,i=void 0===t.maskInputOptions?{}:t.maskInputOptions,s=t.maskAttributeFn,u=t.maskInputFn,p=void 0===t.dataURLOptions?{}:t.dataURLOptions,_=t.inlineImages,y=t.recordCanvas,S=t.keepIframeSrcFn,A=void 0!==t.newlyAddedElement&&t.newlyAddedElement,b=t.rootId,O=t.maskTextClass,I=t.unmaskTextClass,v=t.maskTextSelector,N=t.unmaskTextSelector;t=function(e,t,r,n){try{if(n&&e.matches(n))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var o=e.classList.length;o--;)if(t.test(e.classList[o]))return!0;if(r)return e.matches(r)}catch(e){}return!1}(e,t.blockClass,t.blockSelector,t.unblockSelector);for(var R=function(e){return e instanceof HTMLFormElement?"form":(e=e.tagName.toLowerCase(),St.test(e)?"div":e)}(e),C={},D=e.attributes.length,w=0;w<D;w++){var L=e.attributes[w];L.name&&!m(R,L.name,L.value)&&(C[L.name]=g(n,R,L.name.toLowerCase(),L.value,e,s))}if("link"===R&&o&&(o=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),s=null,o&&(s=a(o)),s&&(delete C.rel,delete C.href,C._cssText=h(s,o.href))),"style"===R&&e.sheet&&!(e.innerText||e.textContent||"").trim().length&&(o=a(e.sheet))&&(C._cssText=h(o,E())),("input"===R||"textarea"===R||"select"===R||"option"===R)&&(D=d(e),o=f(e,R.toUpperCase(),D),s=e.checked,"submit"!==D&&"button"!==D&&o&&(O=T(e,O,v,I,N,l({type:D,tagName:R.toUpperCase(),maskInputOptions:i})),C.value=c({isMasked:O,element:e,value:o,maskInputFn:u})),s&&(C.checked=s)),"option"===R&&(e.selected&&!i.select?C.selected=!0:delete C.selected),"canvas"===R&&y&&("2d"===e.__context?function(e){var t=e.getContext("2d");if(!t)return!0;for(var r=0;r<e.width;r+=50)for(var n=0;n<e.height;n+=50){var o=t.getImageData;if(new Uint32Array(("__rrweb_original__"in o?o.__rrweb_original__:o).call(t,r,n,Math.min(50,e.width-r),Math.min(50,e.height-n)).data.buffer).some((function(e){return 0!==e})))return!1}return!0}(e)||(C.rr_dataURL=e.toDataURL(p.type,p.quality)):"__context"in e||(i=e.toDataURL(p.type,p.quality),(u=document.createElement("canvas")).width=e.width,u.height=e.height,u=u.toDataURL(p.type,p.quality),i!==u&&(C.rr_dataURL=i))),"img"===R&&_){gt||(gt=n.createElement("canvas"),mt=gt.getContext("2d"));var P=e.crossOrigin;e.crossOrigin="anonymous";var M=function(){e.removeEventListener("load",M);try{gt.width=e.naturalWidth,gt.height=e.naturalHeight,mt.drawImage(e,0,0),C.rr_dataURL=gt.toDataURL(p.type,p.quality)}catch(t){console.warn("Cannot inline img src="+e.currentSrc+"! Error: "+t)}P?C.crossOrigin=P:e.removeAttribute("crossorigin")};e.complete&&0!==e.naturalWidth?M():e.addEventListener("load",M)}"audio"!==R&&"video"!==R||(C.rr_mediaState=e.paused?"paused":"played",C.rr_mediaCurrentTime=e.currentTime),A||(e.scrollLeft&&(C.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(C.rr_scrollTop=e.scrollTop)),t&&(n=e.getBoundingClientRect(),C={class:C.class,rr_width:n.width+"px",rr_height:n.height+"px"}),"iframe"!==R||S(C.src)||(e.contentDocument||(C.rr_src=C.src),delete C.src);try{customElements.get(R)&&(r=!0)}catch(e){}return{type:ct.Element,tagName:R,attributes:C,childNodes:[],isSVG:!("svg"!==e.tagName&&!e.ownerSVGElement)||void 0,needBlock:t,rootId:b,isCustom:r}}(e,{doc:r,blockClass:i,blockSelector:s,unblockSelector:u,inlineStylesheet:O,maskAttributeFn:_,maskInputOptions:I,maskInputFn:N,dataURLOptions:R,inlineImages:C,recordCanvas:D,keepIframeSrcFn:w,newlyAddedElement:t,rootId:o,maskAllText:p,maskTextClass:y,unmaskTextClass:S,maskTextSelector:A,unmaskTextSelector:b});case e.TEXT_NODE:return function(e,t){var r=t.maskAllText,o=t.maskTextClass,i=t.unmaskTextClass,s=t.maskTextSelector,u=t.unmaskTextSelector,d=t.maskTextFn,f=t.maskInputOptions,p=t.maskInputFn;t=t.rootId;var _=e.parentNode&&e.parentNode.tagName,g=e.textContent,m="STYLE"===_||void 0,y="SCRIPT"===_||void 0,S="TEXTAREA"===_||void 0;if(m&&g){try{e.nextSibling||e.previousSibling||n([e,"access",function(e){return e.parentNode},"access",function(e){return e.sheet},"optionalAccess",function(e){return e.cssRules}])&&(g=a(e.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: "+t,e)}g=h(g,E())}return y&&(g="SCRIPT_PLACEHOLDER"),r=T(e,o,s,i,u,r),m||y||S||!g||!r||(g=d?d(g,e.parentElement):g.replace(/[\S]/g,"*")),S&&g&&(f.textarea||r)&&(g=p?p(g,e.parentNode):g.replace(/[\S]/g,"*")),"OPTION"===_&&g&&(d=l({type:null,tagName:_,maskInputOptions:f}),g=c({isMasked:T(e,o,s,i,u,d),element:e,value:g,maskInputFn:p})),{type:ct.Text,textContent:g||"",isStyle:m,rootId:t}}(e,{maskAllText:p,maskTextClass:y,unmaskTextClass:S,maskTextSelector:A,unmaskTextSelector:b,maskTextFn:v,maskInputOptions:I,maskInputFn:N,rootId:o});case e.CDATA_SECTION_NODE:return{type:ct.CDATA,textContent:"",rootId:o};case e.COMMENT_NODE:return{type:ct.Comment,textContent:e.textContent||"",rootId:o};default:return!1}}function b(e){return null==e?"":e.toLowerCase()}function O(e,t){var r=t.doc,n=t.mirror,a=t.blockClass,u=t.blockSelector,l=t.unblockSelector,c=t.maskAllText,d=t.maskTextClass,f=t.unmaskTextClass,p=t.maskTextSelector,h=t.unmaskTextSelector,_=void 0!==t.skipChild&&t.skipChild,E=void 0===t.inlineStylesheet||t.inlineStylesheet,g=void 0===t.maskInputOptions?{}:t.maskInputOptions,m=t.maskAttributeFn,y=t.maskTextFn,S=t.maskInputFn,T=t.slimDOMOptions,I=void 0===t.dataURLOptions?{}:t.dataURLOptions,v=void 0!==t.inlineImages&&t.inlineImages,N=void 0!==t.recordCanvas&&t.recordCanvas,R=t.onSerialize,C=t.onIframeLoad,D=void 0===t.iframeLoadTimeout?5e3:t.iframeLoadTimeout,w=t.onStylesheetLoad,L=void 0===t.stylesheetLoadTimeout?5e3:t.stylesheetLoadTimeout,P=void 0===t.keepIframeSrcFn?function(){return!1}:t.keepIframeSrcFn,M=void 0===t.preserveWhiteSpace||t.preserveWhiteSpace;if(!(t=A(e,{doc:r,mirror:n,blockClass:a,blockSelector:u,maskAllText:c,unblockSelector:l,maskTextClass:d,unmaskTextClass:f,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:E,maskInputOptions:g,maskAttributeFn:m,maskTextFn:y,maskInputFn:S,dataURLOptions:I,inlineImages:v,recordCanvas:N,keepIframeSrcFn:P,newlyAddedElement:void 0!==t.newlyAddedElement&&t.newlyAddedElement})))return console.warn(e,"not serialized"),null;var U=n.hasNode(e)?n.getId(e):T.comment&&t.type===ct.Comment||t.type===ct.Element&&(T.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js"))||T.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(b(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===b(t.attributes.name)||"icon"===b(t.attributes.rel)||"apple-touch-icon"===b(t.attributes.rel)||"shortcut icon"===b(t.attributes.rel)))||"meta"===t.tagName&&(T.headMetaDescKeywords&&b(t.attributes.name).match(/^description|keywords$/)||T.headMetaSocial&&(b(t.attributes.property).match(/^(og|twitter|fb):/)||b(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===b(t.attributes.name))||T.headMetaRobots&&("robots"===b(t.attributes.name)||"googlebot"===b(t.attributes.name)||"bingbot"===b(t.attributes.name))||T.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"]||T.headMetaAuthorship&&("author"===b(t.attributes.name)||"generator"===b(t.attributes.name)||"framework"===b(t.attributes.name)||"publisher"===b(t.attributes.name)||"progid"===b(t.attributes.name)||b(t.attributes.property).match(/^article:/)||b(t.attributes.property).match(/^product:/))||T.headMetaVerification&&("google-site-verification"===b(t.attributes.name)||"yandex-verification"===b(t.attributes.name)||"csrf-token"===b(t.attributes.name)||"p:domain_verify"===b(t.attributes.name)||"verify-v1"===b(t.attributes.name)||"verification"===b(t.attributes.name)||"shopify-checkout-api-token"===b(t.attributes.name))))||!M&&t.type===ct.Text&&!t.isStyle&&!t.textContent.replace(/^\s+|\s+$/gm,"").length?-2:yt++;if(t=Object.assign(t,{id:U}),n.add(e,t),-2===U)return null;if(R&&R(e),U=!_,t.type===ct.Element){U=U&&!t.needBlock,delete t.needBlock;var j=e.shadowRoot;j&&s(j)&&(t.isShadowHost=!0)}if((t.type===ct.Document||t.type===ct.Element)&&U){for(T.headWhitespace&&t.type===ct.Element&&"head"===t.tagName&&(M=!1),_={doc:r,mirror:n,blockClass:a,blockSelector:u,maskAllText:c,unblockSelector:l,maskTextClass:d,unmaskTextClass:f,maskTextSelector:p,unmaskTextSelector:h,skipChild:_,inlineStylesheet:E,maskInputOptions:g,maskAttributeFn:m,maskTextFn:y,maskInputFn:S,slimDOMOptions:T,dataURLOptions:I,inlineImages:v,recordCanvas:N,preserveWhiteSpace:M,onSerialize:R,onIframeLoad:C,iframeLoadTimeout:D,onStylesheetLoad:w,stylesheetLoadTimeout:L,keepIframeSrcFn:P},j=(U=i.makeIterator(Array.from(e.childNodes))).next();!j.done;j=U.next())(j=O(j.value,_))&&t.childNodes.push(j);if(e.nodeType===e.ELEMENT_NODE&&e.shadowRoot)for(j=(U=i.makeIterator(Array.from(e.shadowRoot.childNodes))).next();!j.done;j=U.next())(j=O(j.value,_))&&(s(e.shadowRoot)&&(j.isShadow=!0),t.childNodes.push(j))}return e.parentNode&&o(e.parentNode)&&s(e.parentNode)&&(t.isShadow=!0),t.type===ct.Element&&"iframe"===t.tagName&&function(e,t,r){var n=e.contentWindow;if(n){var o=!1;try{var i=n.document.readyState}catch(e){return}if("complete"!==i){var s=setTimeout((function(){o||(t(),o=!0)}),r);e.addEventListener("load",(function(){clearTimeout(s),o=!0,t()}))}else{if("about:blank"!==n.location.href||"about:blank"===e.src||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}}(e,(function(){var t=e.contentDocument;t&&C&&(t=O(t,{doc:t,mirror:n,blockClass:a,blockSelector:u,unblockSelector:l,maskAllText:c,maskTextClass:d,unmaskTextClass:f,maskTextSelector:p,unmaskTextSelector:h,skipChild:!1,inlineStylesheet:E,maskInputOptions:g,maskAttributeFn:m,maskTextFn:y,maskInputFn:S,slimDOMOptions:T,dataURLOptions:I,inlineImages:v,recordCanvas:N,preserveWhiteSpace:M,onSerialize:R,onIframeLoad:C,iframeLoadTimeout:D,onStylesheetLoad:w,stylesheetLoadTimeout:L,keepIframeSrcFn:P}))&&C(e,t)}),D),t.type===ct.Element&&"link"===t.tagName&&"stylesheet"===t.attributes.rel&&function(e,t,r){var n=!1;try{var o=e.sheet}catch(e){return}if(!o){var i=setTimeout((function(){n||(t(),n=!0)}),r);e.addEventListener("load",(function(){clearTimeout(i),n=!0,t()}))}}(e,(function(){if(w){var t=O(e,{doc:r,mirror:n,blockClass:a,blockSelector:u,unblockSelector:l,maskAllText:c,maskTextClass:d,unmaskTextClass:f,maskTextSelector:p,unmaskTextSelector:h,skipChild:!1,inlineStylesheet:E,maskInputOptions:g,maskAttributeFn:m,maskTextFn:y,maskInputFn:S,slimDOMOptions:T,dataURLOptions:I,inlineImages:v,recordCanvas:N,preserveWhiteSpace:M,onSerialize:R,onIframeLoad:C,iframeLoadTimeout:D,onStylesheetLoad:w,stylesheetLoadTimeout:L,keepIframeSrcFn:P});t&&w(e,t)}}),L),t}function I(e){for(var t=void 0,r=e[0],n=1;n<e.length;){var o=e[n],s=e[n+1];if(n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==r)return;"access"===o||"optionalAccess"===o?(t=r,r=s(r)):"call"!==o&&"optionalCall"!==o||(r=s((function(){var e=i.getRestArguments.apply(0,arguments);return r.call.apply(r,[t].concat(i.arrayFromIterable(e)))})),t=void 0)}return r}function v(e,t,r){r=void 0===r?document:r;var n={capture:!0,passive:!0};return r.addEventListener(e,t,n),function(){return r.removeEventListener(e,t,n)}}function N(e,t,r){r=void 0===r?{}:r;var n=null,o=0;return function(){var s=i.getRestArguments.apply(0,arguments),a=Date.now();o||!1!==r.leading||(o=a);var u=t-(a-o),l=this;0>=u||u>t?(n&&(function(){var e=i.getRestArguments.apply(0,arguments);B("clearTimeout").apply(null,i.arrayFromIterable(e))}(n),n=null),o=a,e.apply(l,s)):n||!1===r.trailing||(n=G((function(){o=!1===r.leading?0:Date.now(),n=null,e.apply(l,s)}),u))}}function R(e,t,r,n,o){var i=(o=void 0===o?window:o).Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set:function(e){var t=this;G((function(){r.set.call(t,e)}),0),i&&i.set&&i.set.call(this,e)}}),function(){return R(e,t,i||{},!0)}}function C(e,t,r){try{if(!(t in e))return function(){};var n=e[t],o=r(n);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,function(){e[t]=n}}catch(e){return function(){}}}function D(e){var t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:I([t,"optionalAccess",function(e){return e.documentElement},"access",function(e){return e.scrollLeft}])||I([t,"optionalAccess",function(e){return e.body},"optionalAccess",function(e){return e.parentElement},"optionalAccess",function(e){return e.scrollLeft}])||I([t,"optionalAccess",function(e){return e.body},"optionalAccess",function(e){return e.scrollLeft}])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:I([t,"optionalAccess",function(e){return e.documentElement},"access",function(e){return e.scrollTop}])||I([t,"optionalAccess",function(e){return e.body},"optionalAccess",function(e){return e.parentElement},"optionalAccess",function(e){return e.scrollTop}])||I([t,"optionalAccess",function(e){return e.body},"optionalAccess",function(e){return e.scrollTop}])||0}}function w(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function L(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function P(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function M(e,t,r,n,o){return!!e&&!!(e=P(e))&&(t=S(t,r),o?(o=y(e,t),t=-1,!(0>o)&&(n&&(t=y(e,S(null,n))),-1<o&&0>t||o<t)):(n=n&&e.matches(n),t(e)&&!n))}function U(e,t){if(o(e))return!1;var r=t.getId(e);return!t.has(r)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||U(e.parentNode,t))}function j(e,t){return!("LINK"!==e.nodeName||e.nodeType!==e.ELEMENT_NODE||!e.getAttribute||"stylesheet"!==e.getAttribute("rel")||!t.getMeta(e))}function k(e){return!!I([e,"optionalAccess",function(e){return e.shadowRoot}])}function x(e){var t=null;return I([e,"access",function(e){return e.getRootNode},"optionalCall",function(e){return e()},"optionalAccess",function(e){return e.nodeType}])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function F(e){var t=e.ownerDocument;if(!t)return!1;if(!(t=t.contains(e)))if(t=e.ownerDocument){for(var r;r=x(e);)e=r;t=t.contains(e)}else t=!1;return t}function B(e){var t=Dt[e];if(t)return t;t=window.document;var r=window[e];if(t&&"function"==typeof t.createElement)try{var n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);var o=n.contentWindow;o&&o[e]&&(r=o[e]),t.head.removeChild(n)}catch(e){}return Dt[e]=r.bind(window)}function G(){var e=i.getRestArguments.apply(0,arguments);return B("setTimeout").apply(null,i.arrayFromIterable(e))}function V(e){for(var t=void 0,r=e[0],n=1;n<e.length;){var o=e[n],s=e[n+1];if(n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==r)return;"access"===o||"optionalAccess"===o?(t=r,r=s(r)):"call"!==o&&"optionalCall"!==o||(r=s((function(){var e=i.getRestArguments.apply(0,arguments);return r.call.apply(r,[t].concat(i.arrayFromIterable(e)))})),t=void 0)}return r}function H(e,t){e.delete(t),t.childNodes.forEach((function(t){return H(e,t)}))}function W(e,t,r){return 0!==e.length&&Y(e,t,r)}function Y(e,t,r){if(!(t=t.parentNode))return!1;var n=r.getId(t);return!!e.some((function(e){return e.id===n}))||Y(e,t,r)}function K(e,t){return 0!==e.size&&z(e,t)}function z(e,t){return!!(t=t.parentNode)&&(!!e.has(t)||z(e,t))}function q(e){for(var t=void 0,r=e[0],n=1;n<e.length;){var o=e[n],s=e[n+1];if(n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==r)return;"access"===o||"optionalAccess"===o?(t=r,r=s(r)):"call"!==o&&"optionalCall"!==o||(r=s((function(){var e=i.getRestArguments.apply(0,arguments);return r.call.apply(r,[t].concat(i.arrayFromIterable(e)))})),t=void 0)}return r}function $(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function X(e,t){var r=new jt;Ft.push(r),r.init(e);var n=window.MutationObserver||window.__rrMutationObserver,o=q([window,"optionalAccess",function(e){return e.Zone},"optionalAccess",function(e){return e.__symbol__},"optionalCall",function(e){return e("MutationObserver")}]);return o&&window[o]&&(n=window[o]),(n=new n(xt((function(t){e.onMutation&&!1===e.onMutation(t)||r.processMutations.bind(r)(t)})))).observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),n}function J(e){var t=e.mouseInteractionCb,r=e.doc,n=e.mirror,o=e.blockClass,i=e.blockSelector,s=e.unblockSelector;if(!1===(e=e.sampling).mouseInteraction)return function(){};var a=!0===e.mouseInteraction||void 0===e.mouseInteraction?{}:e.mouseInteraction,u=[],l=null;return Object.keys(Pt).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]})).forEach((function(e){var a=e.toLowerCase(),c=function(e){return function(r){var a=$(r);if(!M(a,o,i,s,!0)){var u=null,c=e;if("pointerType"in r){switch(r.pointerType){case"mouse":u=Mt.Mouse;break;case"touch":u=Mt.Touch;break;case"pen":u=Mt.Pen}u===Mt.Touch&&(Pt[e]===Pt.MouseDown?c="TouchStart":Pt[e]===Pt.MouseUp&&(c="TouchEnd"))}else r.changedTouches&&(u=Mt.Touch);if(null!==u?(l=u,(c.startsWith("Touch")&&u===Mt.Touch||c.startsWith("Mouse")&&u===Mt.Mouse)&&(u=null)):Pt[e]===Pt.Click&&(u=l,l=null),r=r.changedTouches?r.changedTouches[0]:r){a=n.getId(a);var d=r.clientX;r=r.clientY,xt(t)(Object.assign({},{type:Pt[c],id:a,x:d,y:r},null!==u&&{pointerType:u}))}}}}(e);if(window.PointerEvent)switch(Pt[e]){case Pt.MouseDown:case Pt.MouseUp:a=a.replace("mouse","pointer");break;case Pt.TouchStart:case Pt.TouchEnd:return}u.push(v(a,c,r))})),xt((function(){u.forEach((function(e){return e()}))}))}function Z(e){var t=e.scrollCb,r=e.doc,n=e.mirror,o=e.blockClass,i=e.blockSelector,s=e.unblockSelector;return e=e.sampling,v("scroll",e=xt(N(xt((function(e){var a=$(e);a&&!M(a,o,i,s,!0)&&(e=n.getId(a),a===r&&r.defaultView?(a=D(r.defaultView),t({id:e,x:a.left,y:a.top})):t({id:e,x:a.scrollLeft,y:a.scrollTop}))})),e.scroll||100)),r)}function Q(e){function t(e){var t=$(e);e=e.isTrusted;var n=t&&t.tagName.toUpperCase();if("OPTION"===n&&(t=t.parentElement),t&&n&&!(0>Bt.indexOf(n))&&!M(t,a,u,p,!0)){var i=t;if(!(i.classList.contains(h)||_&&i.matches(_))){var s=d(t);i=f(i,n,s);var O=!1,I=l({maskInputOptions:E,tagName:n,type:s}),v=T(t,y,A,S,b,I);"radio"!==s&&"checkbox"!==s||(O=t.checked),i=c({isMasked:v,element:t,value:i,maskInputFn:g}),r(t,m?{text:i,isChecked:O,userTriggered:e}:{text:i,isChecked:O}),e=t.name,"radio"===s&&e&&O&&o.querySelectorAll('input[type="radio"][name="'+e+'"]').forEach((function(e){if(e!==t){var o=c({isMasked:v,element:e,value:f(e,n,s),maskInputFn:g});r(e,m?{text:o,isChecked:!O,userTriggered:!1}:{text:o,isChecked:!O})}}))}}}function r(e,t){var r=Gt.get(e);r&&r.text===t.text&&r.isChecked===t.isChecked||(Gt.set(e,t),e=s.getId(e),xt(n)(Object.assign({},t,{id:e})))}var n=e.inputCb,o=e.doc,s=e.mirror,a=e.blockClass,u=e.blockSelector,p=e.unblockSelector,h=e.ignoreClass,_=e.ignoreSelector,E=e.maskInputOptions,g=e.maskInputFn,m=e.userTriggeredOnInput,y=e.maskTextClass,S=e.unmaskTextClass,A=e.maskTextSelector,b=e.unmaskTextSelector,O=("last"===e.sampling.input?["change"]:["input","change"]).map((function(e){return v(e,xt(t),o)})),I=o.defaultView;if(!I)return function(){O.forEach((function(e){return e()}))};e=I.Object.getOwnPropertyDescriptor(I.HTMLInputElement.prototype,"value");var N=[[I.HTMLInputElement.prototype,"value"],[I.HTMLInputElement.prototype,"checked"],[I.HTMLSelectElement.prototype,"value"],[I.HTMLTextAreaElement.prototype,"value"],[I.HTMLSelectElement.prototype,"selectedIndex"],[I.HTMLOptionElement.prototype,"selected"]];return e&&e.set&&O.push.apply(O,i.arrayFromIterable(N.map((function(e){return R(e[0],e[1],{set:function(){xt(t)({target:this,isTrusted:!1})}},!1,I)})))),xt((function(){O.forEach((function(e){return e()}))}))}function ee(e){var t=[];return oe("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||oe("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||oe("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||oe("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule?(e=Array.from(e.parentRule.cssRules).indexOf(e),t.unshift(e)):e.parentStyleSheet&&(e=Array.from(e.parentStyleSheet.cssRules).indexOf(e),t.unshift(e)),t}function te(e,t,r){var n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function re(e,t){var r,n=e.mirror,o=e.stylesheetManager;r="#document"===t.nodeName?n.getId(t):n.getId(t.host),e="#document"===t.nodeName?q([t,"access",function(e){return e.defaultView},"optionalAccess",function(e){return e.Document}]):q([t,"access",function(e){return e.ownerDocument},"optionalAccess",function(e){return e.defaultView},"optionalAccess",function(e){return e.ShadowRoot}]);var i=q([e,"optionalAccess",function(e){return e.prototype}])?Object.getOwnPropertyDescriptor(q([e,"optionalAccess",function(e){return e.prototype}]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&e&&i?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:function(){var e=this;return q([i,"access",function(e){return e.get},"optionalAccess",function(e){return e.call},"call",function(t){return t(e)}])},set:function(e){var t=this,n=q([i,"access",function(e){return e.set},"optionalAccess",function(e){return e.call},"call",function(r){return r(t,e)}]);if(null!==r&&-1!==r)try{o.adoptStyleSheets(e,r)}catch(e){}return n}}),xt((function(){Object.defineProperty(t,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))):function(){}}function ne(e,t){if(!(t=e.doc.defaultView))return function(){};for(var r=X(e,e.doc),n=function(e){var t=e.mousemoveCb,r=e.sampling,n=e.doc,o=e.mirror;if(!1===r.mousemove)return function(){};e="number"==typeof r.mousemove?r.mousemove:50,r="number"==typeof r.mousemoveCallback?r.mousemoveCallback:500;var i,s=[],a=N(xt((function(e){var r=Date.now()-i;t(s.map((function(e){return e.timeOffset-=r,e})),e),s=[],i=null})),r),u=[v("mousemove",r=xt(N(xt((function(e){var t=$(e),r=e.changedTouches?e.changedTouches[0]:e,n=r.clientX;r=r.clientY,i||(i=Rt()),s.push({x:n,y:r,id:o.getId(t),timeOffset:Rt()-i}),a("undefined"!=typeof DragEvent&&e instanceof DragEvent?Lt.Drag:e instanceof MouseEvent?Lt.MouseMove:Lt.TouchMove)})),e,{trailing:!1})),n),v("touchmove",r,n),v("drag",r,n)];return xt((function(){u.forEach((function(e){return e()}))}))}(e),o=J(e),s=Z(e),a=function(e,t){var r=e.viewportResizeCb;e=t.win;var n=-1,o=-1;return v("resize",t=xt(N(xt((function(){var e=w(),t=L();n===e&&o===t||(r({width:Number(t),height:Number(e)}),n=e,o=t)})),200)),e)}(e,{win:t}),u=Q(e),l=function(e){var t=e.mediaInteractionCb,r=e.blockClass,n=e.blockSelector,o=e.unblockSelector,i=e.mirror,s=e.sampling;e=e.doc;var a=xt((function(e){return N(xt((function(s){if((s=$(s))&&!M(s,r,n,o,!0)){var a=s.currentTime,u=s.volume,l=s.muted,c=s.playbackRate;t({type:e,id:i.getId(s),currentTime:a,volume:u,muted:l,playbackRate:c})}})),s.media||500)})),u=[v("play",a(0),e),v("pause",a(1),e),v("seeked",a(2),e),v("volumechange",a(3),e),v("ratechange",a(4),e)];return xt((function(){u.forEach((function(e){return e()}))}))}(e),c=function(e,t){var r=e.styleSheetRuleCb,n=e.mirror,o=e.stylesheetManager,s=t.win;if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return function(){};var a=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:xt((function(e,t,s){var a=i.makeIterator(s),u=a.next().value;a=a.next().value;var l=te(t,n,o.styleMirror),c=l.id;return l=l.styleId,(c&&-1!==c||l&&-1!==l)&&r({id:c,styleId:l,adds:[{rule:u,index:a}]}),e.apply(t,s)}))});var u=s.CSSStyleSheet.prototype.deleteRule;if(s.CSSStyleSheet.prototype.deleteRule=new Proxy(u,{apply:xt((function(e,t,s){var a=i.makeIterator(s).next().value,u=te(t,n,o.styleMirror),l=u.id;return u=u.styleId,(l&&-1!==l||u&&-1!==u)&&r({id:l,styleId:u,removes:[{index:a}]}),e.apply(t,s)}))}),s.CSSStyleSheet.prototype.replace){var l=s.CSSStyleSheet.prototype.replace;s.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:xt((function(e,t,s){var a=i.makeIterator(s).next().value,u=te(t,n,o.styleMirror),l=u.id;return u=u.styleId,(l&&-1!==l||u&&-1!==u)&&r({id:l,styleId:u,replace:a}),e.apply(t,s)}))})}if(s.CSSStyleSheet.prototype.replaceSync){var c=s.CSSStyleSheet.prototype.replaceSync;s.CSSStyleSheet.prototype.replaceSync=new Proxy(c,{apply:xt((function(e,t,s){var a=i.makeIterator(s).next().value,u=te(t,n,o.styleMirror),l=u.id;return u=u.styleId,(l&&-1!==l||u&&-1!==u)&&r({id:l,styleId:u,replaceSync:a}),e.apply(t,s)}))})}var d={};ie("CSSGroupingRule")?d.CSSGroupingRule=s.CSSGroupingRule:(ie("CSSMediaRule")&&(d.CSSMediaRule=s.CSSMediaRule),ie("CSSConditionRule")&&(d.CSSConditionRule=s.CSSConditionRule),ie("CSSSupportsRule")&&(d.CSSSupportsRule=s.CSSSupportsRule));var f={};return Object.entries(d).forEach((function(e){var t=i.makeIterator(e);e=t.next().value,t=t.next().value,f[e]={insertRule:t.prototype.insertRule,deleteRule:t.prototype.deleteRule},t.prototype.insertRule=new Proxy(f[e].insertRule,{apply:xt((function(e,t,s){var a=i.makeIterator(s),u=a.next().value;a=a.next().value;var l=te(t.parentStyleSheet,n,o.styleMirror),c=l.id;return l=l.styleId,(c&&-1!==c||l&&-1!==l)&&r({id:c,styleId:l,adds:[{rule:u,index:[].concat(i.arrayFromIterable(ee(t)),[a||0])}]}),e.apply(t,s)}))}),t.prototype.deleteRule=new Proxy(f[e].deleteRule,{apply:xt((function(e,t,s){var a=i.makeIterator(s).next().value,u=te(t.parentStyleSheet,n,o.styleMirror),l=u.id;return u=u.styleId,(l&&-1!==l||u&&-1!==u)&&r({id:l,styleId:u,removes:[{index:[].concat(i.arrayFromIterable(ee(t)),[a])}]}),e.apply(t,s)}))})})),xt((function(){s.CSSStyleSheet.prototype.insertRule=a,s.CSSStyleSheet.prototype.deleteRule=u,l&&(s.CSSStyleSheet.prototype.replace=l),c&&(s.CSSStyleSheet.prototype.replaceSync=c),Object.entries(d).forEach((function(e){var t=i.makeIterator(e);e=t.next().value,(t=t.next().value).prototype.insertRule=f[e].insertRule,t.prototype.deleteRule=f[e].deleteRule}))}))}(e,{win:t}),d=re(e,e.doc),f=function(e,t){var r=e.styleDeclarationCb,n=e.mirror,o=e.ignoreCSSAttributes,s=e.stylesheetManager,a=t.win,u=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(u,{apply:xt((function(e,t,a){var l=i.makeIterator(a),c=l.next().value,d=l.next().value;if(l=l.next().value,o.has(c))return u.apply(t,[c,d,l]);var f=te(q([t,"access",function(e){return e.parentRule},"optionalAccess",function(e){return e.parentStyleSheet}]),n,s.styleMirror),p=f.id;return f=f.styleId,(p&&-1!==p||f&&-1!==f)&&r({id:p,styleId:f,set:{property:c,value:d,priority:l},index:ee(t.parentRule)}),e.apply(t,a)}))});var l=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:xt((function(e,t,a){var u=i.makeIterator(a).next().value;if(o.has(u))return l.apply(t,[u]);var c=te(q([t,"access",function(e){return e.parentRule},"optionalAccess",function(e){return e.parentStyleSheet}]),n,s.styleMirror),d=c.id;return c=c.styleId,(d&&-1!==d||c&&-1!==c)&&r({id:d,styleId:c,remove:{property:u},index:ee(t.parentRule)}),e.apply(t,a)}))}),xt((function(){a.CSSStyleDeclaration.prototype.setProperty=u,a.CSSStyleDeclaration.prototype.removeProperty=l}))}(e,{win:t}),p=e.collectFonts?function(e){var t=e.fontCb,r=(e=e.doc).defaultView;if(!r)return function(){};var n=[],o=new WeakMap,i=r.FontFace;return r.FontFace=function(e,t,r){var n=new i(e,t,r);return o.set(n,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),n},e=C(e.fonts,"add",(function(e){return function(r){return G(xt((function(){var e=o.get(r);e&&(t(e),o.delete(r))})),0),e.apply(this,[r])}})),n.push((function(){r.FontFace=i})),n.push(e),xt((function(){n.forEach((function(e){return e()}))}))}(e):function(){},h=function(e){var t=e.doc,r=e.mirror,n=e.blockClass,o=e.blockSelector,i=e.unblockSelector,s=e.selectionCb,a=!0;return(e=xt((function(){var e=t.getSelection();if(!(!e||a&&q([e,"optionalAccess",function(e){return e.isCollapsed}]))){a=e.isCollapsed||!1;for(var u=[],l=e.rangeCount||0,c=0;c<l;c++){var d=e.getRangeAt(c),f=d.startContainer,p=d.startOffset,h=d.endContainer;d=d.endOffset,M(f,n,o,i,!0)||M(h,n,o,i,!0)||u.push({start:r.getId(f),startOffset:p,end:r.getId(h),endOffset:d})}s({ranges:u})}})))(),v("selectionchange",e)}(e),_=function(e){var t=e.customElementCb;return(e=e.doc.defaultView)&&e.customElements?C(e.customElements,"define",(function(e){return function(r,n,o){try{t({define:{name:r}})}catch(e){}return e.apply(this,[r,n,o])}})):function(){}}(e),E=[],g=(e=i.makeIterator(e.plugins)).next();!g.done;g=e.next())g=g.value,E.push(g.observer(g.callback,t,g.options));return xt((function(){Ft.forEach((function(e){return e.reset()})),r.disconnect(),n(),o(),s(),a(),u(),l(),c(),d(),f(),p(),h(),_(),E.forEach((function(e){return e()}))}))}function oe(e){return void 0!==window[e]}function ie(e){return!!(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}function se(e){for(var t=void 0,r=e[0],n=1;n<e.length;){var o=e[n],s=e[n+1];if(n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==r)return;"access"===o||"optionalAccess"===o?(t=r,r=s(r)):"call"!==o&&"optionalCall"!==o||(r=s((function(){var e=i.getRestArguments.apply(0,arguments);return r.call.apply(r,[t].concat(i.arrayFromIterable(e)))})),t=void 0)}return r}function ae(e){var t=e=void 0===e?{}:e,r=t.emit,n=t.checkoutEveryNms,o=t.checkoutEveryNth,s=void 0===t.blockClass?"rr-block":t.blockClass,a=void 0===t.blockSelector?null:t.blockSelector,u=void 0===t.unblockSelector?null:t.unblockSelector,l=void 0===t.ignoreClass?"rr-ignore":t.ignoreClass,c=void 0===t.ignoreSelector?null:t.ignoreSelector,d=void 0!==t.maskAllText&&t.maskAllText,f=void 0===t.maskTextClass?"rr-mask":t.maskTextClass,p=void 0===t.unmaskTextClass?null:t.unmaskTextClass,h=void 0===t.maskTextSelector?null:t.maskTextSelector,_=void 0===t.unmaskTextSelector?null:t.unmaskTextSelector,E=void 0===t.inlineStylesheet||t.inlineStylesheet,g=t.maskAllInputs,m=t.maskInputOptions,y=t.slimDOMOptions,S=t.maskAttributeFn,T=t.maskInputFn,A=t.maskTextFn,b=void 0===t.maxCanvasSize?null:t.maxCanvasSize,I=t.packFn,N=void 0===t.sampling?{}:t.sampling,R=void 0===t.dataURLOptions?{}:t.dataURLOptions,C=t.mousemoveWait,P=void 0!==t.recordCanvas&&t.recordCanvas,M=void 0!==t.recordCrossOriginIframes&&t.recordCrossOriginIframes,U=void 0===t.recordAfter?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":t.recordAfter,x=void 0!==t.userTriggeredOnInput&&t.userTriggeredOnInput,F=void 0!==t.collectFonts&&t.collectFonts,B=void 0!==t.inlineImages&&t.inlineImages,G=t.plugins,V=void 0===t.keepIframeSrcFn?function(){return!1}:t.keepIframeSrcFn,H=void 0===t.ignoreCSSAttributes?new Set([]):t.ignoreCSSAttributes;e=t.errorHandler;var W=t.onMutation;t=t.getCanvasManager,kt=e;var Y=!M||window.parent===window,K=!1;if(!Y)try{window.parent.document&&(K=!1)}catch(e){K=!0}if(Y&&!r)throw Error("emit function is required");void 0!==C&&void 0===N.mousemove&&(N.mousemove=C),Zt.reset();var z=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==m?m:{},q=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};!function(e){var t=this;"NodeList"in(e=void 0===e?window:e)&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(){var e=i.getRestArguments.apply(0,arguments),r=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(t===r)return!0}while(r=r&&r.parentNode);return!1})}();var $,X=0,J=function(e){for(var t=i.makeIterator(G||[]),r=t.next();!r.done;r=t.next())(r=r.value).eventProcessor&&(e=r.eventProcessor(e));return I&&!K&&(e=I(e)),e};Xt=function(e,t){if(e.timestamp=Rt(),!lt([Ft,"access",function(e){return e[0]},"optionalAccess",function(e){return e.isFrozen},"call",function(e){return e()}])||e.type===wt.FullSnapshot||e.type===wt.IncrementalSnapshot&&e.data.source===Lt.Mutation||Ft.forEach((function(e){return e.unfreeze()})),Y)lt([r,"optionalCall",function(r){return r(J(e),t)}]);else if(K){var i={type:"rrweb",event:J(e),origin:window.location.origin,isCheckout:t};window.parent.postMessage(i,"*")}e.type===wt.FullSnapshot?($=e,X=0):e.type!==wt.IncrementalSnapshot||e.data.source===Lt.Mutation&&e.data.isAttachIframe||(X++,i=n&&$&&e.timestamp-$.timestamp>n,(o&&X>=o||i)&&ae(!0))};var Z=function(e){Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.Mutation},e)})},Q=function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.Scroll},e)})},ee=function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.CanvasMutation},e)})},te=new qt({mutationCb:Z,adoptedStyleSheetCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.AdoptedStyleSheet},e)})}}),re="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Ht:new Wt({mirror:Zt,mutationCb:Z,stylesheetManager:te,recordCrossOriginIframes:M,wrappedEmit:Xt});for(m=(g=i.makeIterator(G||[])).next();!m.done;m=g.next())(m=m.value).getMirror&&m.getMirror({nodeMirror:Zt,crossOriginIframeMirror:re.crossOriginIframeMirror,crossOriginIframeStyleMirror:re.crossOriginIframeStyleMirror});var oe=new $t,ie=function(e,t){try{return e?e(t):new zt}catch(e){return console.warn("Unable to initialize CanvasManager"),new zt}}(t,{mirror:Zt,win:window,mutationCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.CanvasMutation},e)})},recordCanvas:P,blockClass:s,blockSelector:a,unblockSelector:u,maxCanvasSize:b,sampling:N.canvas,dataURLOptions:R,errorHandler:e}),se="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Yt:new Kt({mutationCb:Z,scrollCb:Q,bypassOptions:{onMutation:W,blockClass:s,blockSelector:a,unblockSelector:u,maskAllText:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:_,inlineStylesheet:E,maskInputOptions:z,dataURLOptions:R,maskAttributeFn:S,maskTextFn:A,maskInputFn:T,recordCanvas:P,inlineImages:B,sampling:N,slimDOMOptions:q,iframeManager:re,stylesheetManager:te,canvasManager:ie,keepIframeSrcFn:V,processedNodeManager:oe},mirror:Zt}),ae=function(e){if(e=void 0!==e&&e,Xt({type:wt.Meta,data:{href:window.location.href,width:L(),height:w()}},e),te.reset(),se.init(),Ft.forEach((function(e){return e.lock()})),e=function(e,t){var r=void 0===(t=t||{}).mirror?new Et:t.mirror,n=void 0!==t.maskAllInputs&&t.maskAllInputs,o=void 0!==t.slimDOM&&t.slimDOM;return O(e,{doc:e,mirror:r,blockClass:void 0===t.blockClass?"rr-block":t.blockClass,blockSelector:void 0===t.blockSelector?null:t.blockSelector,unblockSelector:void 0===t.unblockSelector?null:t.unblockSelector,maskAllText:void 0!==t.maskAllText&&t.maskAllText,maskTextClass:void 0===t.maskTextClass?"rr-mask":t.maskTextClass,unmaskTextClass:void 0===t.unmaskTextClass?null:t.unmaskTextClass,maskTextSelector:void 0===t.maskTextSelector?null:t.maskTextSelector,unmaskTextSelector:void 0===t.unmaskTextSelector?null:t.unmaskTextSelector,skipChild:!1,inlineStylesheet:void 0===t.inlineStylesheet||t.inlineStylesheet,maskInputOptions:!0===n?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===n?{}:n,maskAttributeFn:t.maskAttributeFn,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:!0===o||"all"===o?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===o,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===o?{}:o,dataURLOptions:t.dataURLOptions,inlineImages:void 0!==t.inlineImages&&t.inlineImages,recordCanvas:void 0!==t.recordCanvas&&t.recordCanvas,preserveWhiteSpace:t.preserveWhiteSpace,onSerialize:t.onSerialize,onIframeLoad:t.onIframeLoad,iframeLoadTimeout:t.iframeLoadTimeout,onStylesheetLoad:t.onStylesheetLoad,stylesheetLoadTimeout:t.stylesheetLoadTimeout,keepIframeSrcFn:void 0===t.keepIframeSrcFn?function(){return!1}:t.keepIframeSrcFn,newlyAddedElement:!1})}(document,{mirror:Zt,blockClass:s,blockSelector:a,unblockSelector:u,maskAllText:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:_,inlineStylesheet:E,maskAllInputs:z,maskAttributeFn:S,maskInputFn:T,maskTextFn:A,slimDOM:q,dataURLOptions:R,recordCanvas:P,inlineImages:B,onSerialize:function(e){"IFRAME"===e.nodeName&&Zt.getMeta(e)&&re.addIframe(e),j(e,Zt)&&te.trackLinkElement(e),k(e)&&se.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){re.attachIframe(e,t),se.observeAttachShadow(e)},onStylesheetLoad:function(e,t){te.attachLinkElement(e,t)},keepIframeSrcFn:V}),!e)return console.warn("Failed to snapshot the document");Xt({type:wt.FullSnapshot,data:{node:e,initialOffset:D(window)}}),Ft.forEach((function(e){return e.unlock()})),document.adoptedStyleSheets&&0<document.adoptedStyleSheets.length&&te.adoptStyleSheets(document.adoptedStyleSheets,Zt.getId(document))};Jt=ae;try{var ue=[],le=function(e){return xt(ne)({onMutation:W,mutationCb:Z,mousemoveCb:function(e,t){return Xt({type:wt.IncrementalSnapshot,data:{source:t,positions:e}})},mouseInteractionCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.MouseInteraction},e)})},scrollCb:Q,viewportResizeCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.ViewportResize},e)})},inputCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.Input},e)})},mediaInteractionCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.MediaInteraction},e)})},styleSheetRuleCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.StyleSheetRule},e)})},styleDeclarationCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.StyleDeclaration},e)})},canvasMutationCb:ee,fontCb:function(e){return Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.Font},e)})},selectionCb:function(e){Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.Selection},e)})},customElementCb:function(e){Xt({type:wt.IncrementalSnapshot,data:Object.assign({},{source:Lt.CustomElement},e)})},blockClass:s,ignoreClass:l,ignoreSelector:c,maskAllText:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:_,maskInputOptions:z,inlineStylesheet:E,sampling:N,recordCanvas:P,inlineImages:B,userTriggeredOnInput:x,collectFonts:F,doc:e,maskAttributeFn:S,maskInputFn:T,maskTextFn:A,keepIframeSrcFn:V,blockSelector:a,unblockSelector:u,slimDOMOptions:q,dataURLOptions:R,mirror:Zt,iframeManager:re,stylesheetManager:te,shadowDomManager:se,processedNodeManager:oe,canvasManager:ie,ignoreCSSAttributes:H,plugins:lt([G,"optionalAccess",function(e){return e.filter},"call",function(e){return e((function(e){return e.observer}))},"optionalAccess",function(e){return e.map},"call",function(e){return e((function(e){return{observer:e.observer,options:e.options,callback:function(t){return Xt({type:wt.Plugin,data:{plugin:e.name,payload:t}})}}}))}])||[]},{})};re.addLoadListener((function(e){try{ue.push(le(e.contentDocument))}catch(e){console.warn(e)}}));var ce=function(){ae(),ue.push(le(document))};return"interactive"===document.readyState||"complete"===document.readyState?ce():(ue.push(v("DOMContentLoaded",(function(){Xt({type:wt.DomContentLoaded,data:{}}),"DOMContentLoaded"===U&&ce()}))),ue.push(v("load",(function(){Xt({type:wt.Load,data:{}}),"load"===U&&ce()}),window))),function(){ue.forEach((function(e){return e()})),oe.destroy(),kt=Jt=void 0}}catch(e){console.warn(e)}}function ue(e){return 9999999999<e?e:1e3*e}function le(e){return 9999999999<e?e/1e3:e}function ce(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((function(){return e.throttledAddEvent({type:wt.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:pt.normalize(t,10,1e3)}}),"console"===t.category})))}function de(e){return(e=fe(e))&&e instanceof Element&&e.closest("button,a")||e}function fe(e){return"object"==typeof e&&e&&"target"in e?e.target:e}function pe(e){return Qt||(Qt=[],pt.fill(_t,"open",(function(e){return function(){var t=i.getRestArguments.apply(0,arguments);if(Qt)try{Qt.forEach((function(e){return e()}))}catch(e){}return e.apply(_t,t)}}))),Qt.push(e),function(){var t=Qt?Qt.indexOf(e):-1;-1<t&&Qt.splice(t,1)}}function he(e){return Object.assign({},{timestamp:Date.now()/1e3,type:"default"},e)}function _e(e){var t={};for(var r in!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]),e)if(nr.has(r)){var n=r;"data-testid"!==r&&"data-test-id"!==r||(n="testId"),t[n]=e[r]}return t}function Ee(e,t){var r=(e=ae.mirror.getId(e))&&ae.mirror.getNode(e);return{message:t,data:(r=(r=r&&ae.mirror.getMeta(r))&&r.type===tr.Element?r:null)?{nodeId:e,node:{id:e,tagName:r.tagName,textContent:Array.from(r.childNodes).map((function(e){return e.type===tr.Text&&e.textContent})).filter(Boolean).map((function(e){return e.trim()})).join(""),attributes:_e(r.attributes)}}:{}}}function ge(e){return ir[e.entryType]?ir[e.entryType](e):null}function me(e){return((pt.browserPerformanceTimeOrigin||_t.performance.timeOrigin)+e)/1e3}function ye(e,t){sr&&(pt.logger.info(e),t&&Te(e))}function Se(e,t){sr&&(pt.logger.info(e),t&&ht.setTimeout((function(){Te(e)}),0))}function Te(e){ft.addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}function Ae(){try{return"sessionStorage"in _t&&!!_t.sessionStorage}catch(e){return!1}}function be(e){return void 0!==e&&Math.random()<e}function Oe(e){var t=Date.now();return{id:e.id||pt.uuid4(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Ie(e){if(Ae())try{_t.sessionStorage.setItem("sentryReplaySession",JSON.stringify(e))}catch(e){}}function ve(e,t){var r=void 0!==e.stickySession&&e.stickySession;t=(void 0===t?{}:t).previousSessionId;var n=e.allowBuffering;return e=Oe({sampled:e=be(e.sessionSampleRate)?"session":!!n&&"buffer",previousSessionId:t}),r&&Ie(e),e}function Ne(e,t,r){return r=void 0===r?+new Date:r,null===e||void 0===t||0>t||0!==t&&e+t<=r}function Re(e,t){var r=t.maxReplayDuration,n=t.sessionIdleExpire;return t=void 0===t.targetTime?Date.now():t.targetTime,Ne(e.started,r,t)||Ne(e.lastActivity,n,t)}function Ce(e,t){return!(!Re(e,{sessionIdleExpire:t.sessionIdleExpire,maxReplayDuration:t.maxReplayDuration})||"buffer"===e.sampled&&0===e.segmentId)}function De(e,t){var r=e.traceInternals,n=e.sessionIdleExpire,o=e.maxReplayDuration;e=e.previousSessionId;var i=t.stickySession&&function(e){if(!Ae())return null;try{var t=_t.sessionStorage.getItem("sentryReplaySession");if(!t)return null;var r=JSON.parse(t);return Se("[Replay] Loading existing session",e),Oe(r)}catch(e){return null}}(r);return i?Ce(i,{sessionIdleExpire:n,maxReplayDuration:o})?(Se("[Replay] Session in sessionStorage is expired, creating new one..."),ve(t,{previousSessionId:i.id})):i:(Se("[Replay] Creating new session",r),ve(t,{previousSessionId:e}))}function we(e,t,r){return!!Pe(e,t)&&(Le(e,t,r),!0)}function Le(e,t,r){var n,o,s,a;return i.asyncExecutePromiseGeneratorProgram((function(i){switch(i.nextAddress){case 1:if(!e.eventBuffer)return i.return(null);i.setCatchFinallyBlocks(2),r&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),r&&(e.eventBuffer.hasCheckout=!0);e:{var u=e.getOptions().beforeAddRecordingEvent;try{if("function"==typeof u&&t.type===wt.Custom){var l=u(t);break e}}catch(e){sr&&pt.logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),l=null;break e}l=t}return(n=l)?i.yield(e.eventBuffer.addEvent(n),4):i.return();case 4:return i.return(i.yieldResult);case 2:return s=(o=i.enterCatchBlock())&&o instanceof ar?"addEventSizeExceeded":"addEvent",sr&&pt.logger.error(o),i.yield(e.stop({reason:s}),5);case 5:(a=ft.getClient())&&a.recordDroppedEvent("internal_sdk_error","replay"),i.jumpToEnd()}}))}function Pe(e,t){return!(!e.eventBuffer||e.isPaused()||!e.isEnabled()||(t=ue(t.timestamp))+e.timeouts.sessionIdlePause<Date.now()||t>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration&&(ye("[Replay] Skipping event with timestamp "+t+" because it is after maxReplayDuration",e.getOptions()._experiments.traceInternals),1))}function Me(e){return function(t,r){!e.isEnabled()||t.type&&"transaction"!==t.type||!(r=r&&r.statusCode)||200>r||300<=r||("transaction"===t.type?(r=e.getContext(),t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&100>r.traceIds.size&&r.traceIds.add(t.contexts.trace.trace_id)):function(e,t){var r=e.getContext();t.event_id&&100>r.errorIds.size&&r.errorIds.add(t.event_id),"buffer"===e.recordingMode&&t.tags&&t.tags.replayId&&(("function"!=typeof(r=e.getOptions().beforeErrorSampling)||r(t))&&ht.setTimeout((function(){e.sendBufferedReplayOrFlush()})))}(e,t))}}function Ue(e){var t=ft.getClient();t&&t.on("beforeAddBreadcrumb",(function(t){e.isEnabled()&&t.category&&(t=!t.category||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:"console"===t.category?function(e){var t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return he(e);var r=!1;return t=t.map((function(e){if(!e)return e;if("string"==typeof e)return 5e3<e.length?(r=!0,e.slice(0,5e3)+""):e;if("object"==typeof e)try{var t=pt.normalize(e,7);return 5e3<JSON.stringify(t).length?(r=!0,JSON.stringify(t,null,2).slice(0,5e3)+""):t}catch(e){}return e})),he(Object.assign({},e,{data:Object.assign({},e.data,{arguments:t},r?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{})}))}(t):he(t))&&ce(e,t)}))}function je(e){return Object.assign((function(t,r){return e.isEnabled()?"replay_event"===t.type?(delete t.breadcrumbs,t):t.type&&"transaction"!==t.type&&"feedback"!==t.type||!e.checkAndHandleExpiredSession()?t:"feedback"===t.type?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((function(){return!t.timestamp||(e.throttledAddEvent({type:wt.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)}))}(e,t),t):(r=!(t.type||!t.exception||!t.exception.values||!t.exception.values.length||!r.originalException||!r.originalException.__rrweb__))&&!e.getOptions()._experiments.captureExceptions?(sr&&pt.logger.log("[Replay] Ignoring error from rrweb internals",t),null):(("buffer"===e.recordingMode&&"Unable to send Replay"!==t.message&&t.exception&&!t.type&&be(e.getOptions().errorSampleRate)||"session"===e.recordingMode)&&(t.tags=Object.assign({},t.tags,{replayId:e.getSessionId()})),t):t}),{id:"Replay"})}function ke(e,t){return t.map((function(t){var r=t.start;return"string"==typeof(t=e.throttledAddEvent({type:wt.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:t.type,description:t.name,startTimestamp:r,endTimestamp:t.end,data:t.data}}}))?Promise.resolve(null):t}))}function xe(e){return function(t){if(e.isEnabled()){var r=function(e){var t=e.from;e=e.to;var r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:e,data:{previous:t}}}(t);null!==r&&(e.getContext().urls.push(r.name),e.triggerUserActivity(),e.addUpdate((function(){return ke(e,[r]),!1})))}}}function Fe(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!sr||!e.getOptions()._experiments.traceInternals)&&ft.isSentryRequestUrl(t,ft.getClient())}(e,t.name)||e.addUpdate((function(){return ke(e,[t]),!0})))}function Be(e){if(e){var t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){var r=new URLSearchParams(e).toString();return t.encode(r).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}}function Ge(e){if(e)return e=parseInt(e,10),isNaN(e)?void 0:e}function Ve(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[new URLSearchParams(e).toString()];if(!e)return[void 0]}catch(t){return sr&&pt.logger.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return sr&&pt.logger.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function He(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};var r=Object.assign({},e._meta);return r.warnings=[].concat(i.arrayFromIterable(r.warnings||[]),[t]),e._meta=r,e}function We(e,t){return t?{type:e,start:t.startTimestamp/1e3,end:t.endTimestamp/1e3,name:t.url,data:pt.dropUndefinedKeys({method:t.method,statusCode:t.statusCode,request:t.request,response:t.response})}:null}function Ye(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Ke(e,t,r){if(t||0!==Object.keys(e).length)return t?r?(e={headers:e,size:t},r=function(e){if(!e||"string"!=typeof e)return{body:e};var t=15e4<e.length,r=e[0],n=e[e.length-1];if(r="["===r&&"]"===n||"{"===r&&"}"===n,t)return e=e.slice(0,15e4),r?{body:e,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:e+"",warnings:["TEXT_TRUNCATED"]};if(r)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(r),t=r.warnings,e.body=r.body,t&&0<t.length&&(e._meta={warnings:t}),e):{headers:e,size:t}:{headers:e}}function ze(e,t){return Object.keys(e).reduce((function(r,n){var o=n.toLowerCase();return t.includes(o)&&e[n]&&(r[o]=e[n]),r}),{})}function qe(e,t){var r=void 0;if(r=void 0===r?_t.document.baseURI:r,!(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(_t.location.origin))){var n=new URL(e,r);n.origin===new URL(r).origin&&(r=n.href,e=!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r)}return pt.stringMatchesSomePattern(e,t)}function $e(e,t,r){var n,o,s;return i.asyncExecutePromiseGeneratorProgram((function(a){return 1==a.nextAddress?(a.setCatchFinallyBlocks(2),a.yield(function(e,t,r){var n,o,s,a,u,l,c,d,f,p,h,_,E;return i.asyncExecutePromiseGeneratorProgram((function(g){if(1==g.nextAddress){if(n=Date.now(),s=void 0===(o=t).startTimestamp?n:o.startTimestamp,a=void 0===o.endTimestamp?n:o.endTimestamp,u=e.data,l=u.url,c=u.method,d=void 0===u.status_code?0:u.status_code,f=u.request_body_size,p=u.response_body_size,h=qe(l,r.networkDetailAllowUrls)&&!qe(l,r.networkDetailDenyUrls)){var m=t.input,y=r.networkCaptureBodies,S=r.networkRequestHeaders;S=m?1===m.length&&"string"!=typeof m[0]?Ze(m[0],S):2===m.length?Ze(m[1],S):{}:{},y?(m=Xe(m),m=(y=i.makeIterator(Ve(m))).next().value,y=y.next().value,S=Ke(S,f,m),S=y?He(S,y):S):S=Ke(S,f,void 0)}else S=Ye(f);return _=S,g.yield(function(e,t,r,n){var o,s,a,u,l,c,d,f=t.networkCaptureBodies,p=t.networkResponseHeaders;return i.asyncExecutePromiseGeneratorProgram((function(t){if(1==t.nextAddress)return e||void 0===n?(o=r?Je(r.headers,p):{},!r||!f&&void 0!==n?t.return(Ke(o,n,void 0)):(a=(s=i).makeIterator,t.yield(function(e){var t,r,n;return i.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){e:{try{var s=e.clone();break e}catch(e){sr&&pt.logger.warn("[Replay] Failed to clone response body",e)}s=void 0}return(t=s)?(o.setCatchFinallyBlocks(2),o.yield(function(e){return new Promise((function(t,r){var n=ht.setTimeout((function(){return r(Error("Timeout while trying to read response body"))}),500);(function(e){return i.asyncExecutePromiseGeneratorProgram((function(t){return 1==t.nextAddress?t.yield(e.text(),2):t.return(t.yieldResult)}))})(e).then((function(e){return t(e)}),(function(e){return r(e)})).finally((function(){return clearTimeout(n)}))}))}(t),4)):o.return([void 0,"BODY_PARSE_ERROR"])}return 2!=o.nextAddress?(r=o.yieldResult,o.return([r])):(n=o.enterCatchBlock(),sr&&pt.logger.warn("[Replay] Failed to get text body from response",n),o.return([void 0,"BODY_PARSE_ERROR"]))}))}(r),2))):t.return(Ye(n));u=a.call(s,t.yieldResult),l=u.next().value,c=u.next().value;var h=o;try{var _=l&&l.length&&void 0===n?Be(l):n,E=e?Ke(h,_,f?l:void 0):Ye(_)}catch(e){sr&&pt.logger.warn("[Replay] Failed to serialize response body",e),E=Ke(h,n,void 0)}return d=E,c?t.return(He(d,c)):t.return(d)}))}(h,r,t.response,p),2)}return E=g.yieldResult,g.return({startTimestamp:s,endTimestamp:a,url:l,method:c,statusCode:d,request:_,response:E})}))}(e,t,r),4)):2!=a.nextAddress?(n=a.yieldResult,o=We("resource.fetch",n),Fe(r.replay,o),a.leaveTryBlock(0)):(s=a.enterCatchBlock(),sr&&pt.logger.error("[Replay] Failed to capture fetch breadcrumb",s),void a.jumpToEnd())}))}function Xe(e){if(2===(e=void 0===e?[]:e).length&&"object"==typeof e[1])return e[1].body}function Je(e,t){var r={};return t.forEach((function(t){e.get(t)&&(r[t]=e.get(t))})),r}function Ze(e,t){return e&&(e=e.headers)?e instanceof Headers?Je(e,t):Array.isArray(e)?{}:ze(e,t):{}}function Qe(e,t,r){var n;return i.asyncExecutePromiseGeneratorProgram((function(o){try{var s=Date.now(),a=void 0===t.startTimestamp?s:t.startTimestamp,u=void 0===t.endTimestamp?s:t.endTimestamp,l=t.input,c=t.xhr,d=e.data,f=d.url,p=d.method,h=void 0===d.status_code?0:d.status_code,_=d.request_body_size,E=d.response_body_size;if(f)if(c&&qe(f,r.networkDetailAllowUrls)&&!qe(f,r.networkDetailDenyUrls)){var g=c[ht.SENTRY_XHR_DATA_KEY],m=g?ze(g.request_headers,r.networkRequestHeaders):{},y=ze(function(e){return(e=e.getAllResponseHeaders())?e.split("\r\n").reduce((function(e,t){var r=i.makeIterator(t.split(": "));return t=r.next().value,r=r.next().value,e[t.toLowerCase()]=r,e}),{}):{}}(c),r.networkResponseHeaders),S=i.makeIterator(r.networkCaptureBodies?Ve(l):[void 0]),T=S.next().value,A=S.next().value,b=(s=i).makeIterator;if(r.networkCaptureBodies)e:{l=[];try{var O=[c.responseText];break e}catch(e){l.push(e)}try{O=function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return sr&&pt.logger.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return sr&&pt.logger.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(c.response,c.responseType);break e}catch(e){l.push(e)}sr&&pt.logger.warn.apply(pt.logger,["[Replay] Failed to get xhr response body"].concat(i.arrayFromIterable(l))),O=[void 0]}else O=[void 0];var I=b.call(s,O),v=I.next().value,N=I.next().value,R=Ke(m,_,T),C=Ke(y,E,v),D={startTimestamp:a,endTimestamp:u,url:f,method:p,statusCode:h,request:A?He(R,A):R,response:N?He(C,N):C}}else D={startTimestamp:a,endTimestamp:u,url:f,method:p,statusCode:h,request:Ye(_),response:Ye(E)};else D=null;n=We("resource.xhr",D),Fe(r.replay,n)}catch(e){sr&&pt.logger.error("[Replay] Failed to capture xhr breadcrumb",e)}o.jumpToEnd()}))}function et(e){var t=ft.getClient();ht.addClickKeypressInstrumentationHandler(or(e)),ht.addHistoryInstrumentationHandler(xe(e)),Ue(e),function(e){var t=ft.getClient();try{var r=e.getOptions(),n={replay:e,networkDetailAllowUrls:r.networkDetailAllowUrls,networkDetailDenyUrls:r.networkDetailDenyUrls,networkCaptureBodies:r.networkCaptureBodies,networkRequestHeaders:r.networkRequestHeaders,networkResponseHeaders:r.networkResponseHeaders};t&&t.on("beforeAddBreadcrumb",(function(e,t){if(e.data)try{if("xhr"===e.category&&t&&t.xhr){var r=t.xhr;if(r){var o=Be(t.input);if(r.getResponseHeader("content-length"))var i=Ge(r.getResponseHeader("content-length"));else e:{var s=r.response;try{i=Be("json"===r.responseType&&s&&"object"==typeof s?JSON.stringify(s):s);break e}catch(e){}i=void 0}r=i,void 0!==o&&(e.data.request_body_size=o),void 0!==r&&(e.data.response_body_size=r)}Qe(e,t,n)}if("fetch"===e.category&&t&&t.response){var a=t.input,u=t.response,l=Be(a?Xe(a):void 0),c=u?Ge(u.headers.get("content-length")):void 0;void 0!==l&&(e.data.request_body_size=l),void 0!==c&&(e.data.response_body_size=c),$e(e,t,n)}}catch(e){sr&&pt.logger.warn("Error when enriching network breadcrumb")}}))}catch(e){}}(e);var r=je(e);ft.addEventProcessor(r),t&&(t.on("beforeSendEvent",function(e){return function(t){e.isEnabled()&&!t.type&&"string"==typeof(t=t.exception&&t.exception.values&&t.exception.values[0].value)&&(t.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||t.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&(t=he({category:"replay.hydrate-error"}),ce(e,t))}}(e)),t.on("afterSendEvent",Me(e)),t.on("createDsc",(function(t){var r=e.getSessionId();r&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=r)})),t.on("spanStart",(function(t){e.lastActiveSpan=t})),t.on("spanEnd",(function(t){e.lastActiveSpan=t})),t.on("beforeSendFeedback",(function(t,r){var n=e.getSessionId();r&&r.includeReplay&&e.isEnabled()&&n&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=n)})))}function tt(e){var t=!1;return function(r,n){if(e.checkAndHandleExpiredSession()){var o=n||!t;t=!0,e.clickDetector&&function(e,t){try{if(3===t.type){var r=t.data.source;if(r===Lt.Mutation&&e.registerMutation(t.timestamp),r===Lt.Scroll&&e.registerScroll(t.timestamp),t.data.source===Lt.MouseInteraction){var n=t.data,o=n.type,i=ae.mirror.getNode(n.id);i instanceof HTMLElement&&o===Pt.Click&&e.registerClick(i)}}}catch(e){}}(e.clickDetector,r),e.addUpdate((function(){if("buffer"===e.recordingMode&&o&&e.setInitialState(),!we(e,r,o))return!0;if(!o)return!1;if(o&&e.session&&0===e.session.segmentId){var t=e.getOptions();t={type:wt.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:0<t.networkDetailAllowUrls.length,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:0<t.networkRequestHeaders.length,networkResponseHasHeaders:0<t.networkResponseHeaders.length}}},we(e,t,!1)}return e.session&&e.session.previousSessionId||("buffer"===e.recordingMode&&e.session&&e.eventBuffer&&(t=e.eventBuffer.getEarliestTimestamp())&&(ye("[Replay] Updating session start time to earliest event in buffer to "+new Date(t),e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Ie(e.session)),"session"===e.recordingMode&&e.flush()),!0}))}else sr&&pt.logger.warn("[Replay] Received replay event after session expired.")}}function rt(e){var t,r,n,o,s,a,u,l,c,d,f,p,h,_,E,g,m,y=e.recordingData,S=e.replayId,T=e.segmentId,A=e.eventContext,b=e.timestamp,O=e.session;return i.asyncExecutePromiseGeneratorProgram((function(e){switch(e.nextAddress){case 1:var I=JSON.stringify({segment_id:T})+"\n";if("string"==typeof y)I=""+I+y;else{var v=(new TextEncoder).encode(I);(I=new Uint8Array(v.length+y.length)).set(v),I.set(y,v.length)}return t=I,n=(r=A).urls,o=r.errorIds,s=r.traceIds,a=r.initialTimestamp,u=ft.getClient(),l=ft.getCurrentScope(),c=u&&u.getTransport(),d=u&&u.getDsn(),u&&c&&d&&O.sampled?(f={type:"replay_event",replay_start_timestamp:a/1e3,timestamp:b/1e3,error_ids:o,trace_ids:s,urls:n,replay_id:S,segment_id:T,replay_type:O.sampled},e.yield(function(e){var t,r,n,o,s,a,u,l=e.client,c=e.scope,d=e.replayId,f=e.event;return i.asyncExecutePromiseGeneratorProgram((function(e){return 1==e.nextAddress?(t="object"!=typeof l._integrations||null===l._integrations||Array.isArray(l._integrations)?void 0:Object.keys(l._integrations),r={event_id:d,integrations:t},l.emit("preprocessEvent",f,r),e.yield(ft.prepareEvent(l.getOptions(),f,r,c,l,ft.getIsolationScope()),2)):(n=e.yieldResult)?(n.platform=n.platform||"javascript",s=(o=l.getSdkMetadata())&&o.sdk||{},a=s.name,u=s.version,n.sdk=Object.assign({},n.sdk,{name:a||"sentry.javascript.unknown",version:u||"0.0.0"}),e.return(n)):e.return(null)}))}({scope:l,client:u,replayId:S,event:f}),2)):e.return(pt.resolvedSyncPromise({}));case 2:return(p=e.yieldResult)?(delete p.sdkProcessingMetadata,I=u.getOptions().tunnel,h=pt.createEnvelope(pt.createEventEnvelopeHeaders(p,pt.getSdkMetadataForEnvelopeHeader(p),I,d),[[{type:"replay_event"},p],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]]),e.setCatchFinallyBlocks(3),e.yield(c.send(h),5)):(u.recordDroppedEvent("event_processor","replay",f),ye("An event processor returned `null`, will not send event."),e.return(pt.resolvedSyncPromise({})));case 5:_=e.yieldResult,e.leaveTryBlock(4);break;case 3:E=e.enterCatchBlock(),g=Error("Unable to send Replay");try{g.cause=E}catch(e){}throw g;case 4:if("number"==typeof _.statusCode&&(200>_.statusCode||300<=_.statusCode))throw new fr(_.statusCode);if(m=pt.updateRateLimits({},_),pt.isRateLimited(m,"replay"))throw new pr(m);return e.return(_)}}))}function nt(e,t){var r,n,o,s,a;return t=void 0===t?{count:0,interval:5e3}:t,i.asyncExecutePromiseGeneratorProgram((function(u){if(1==u.nextAddress)return n=(r=e).recordingData,o=r.options,n.length?(u.setCatchFinallyBlocks(2),u.yield(rt(e),4)):u.return();if(2!=u.nextAddress)return u.return(!0);if((s=u.enterCatchBlock())instanceof fr||s instanceof pr)throw s;if(ft.setContext("Replays",{_retryCount:t.count}),sr&&o._experiments&&o._experiments.captureExceptions&&ft.captureException(s),3<=t.count){a=Error("Unable to send Replay - max retries exceeded");try{a.cause=s}catch(e){}throw a}return t.interval*=++t.count,u.return(new Promise((function(r,n){ht.setTimeout((function(){var o;return i.asyncExecutePromiseGeneratorProgram((function(i){return 1==i.nextAddress?(i.setCatchFinallyBlocks(2),i.yield(nt(e,t),4)):2!=i.nextAddress?(r(!0),i.leaveTryBlock(0)):(o=i.enterCatchBlock(),n(o),void i.jumpToEnd())}))}),t.interval)})))}))}function ot(e,t,r){var n=new Map,o=!1;return function(){var s=i.getRestArguments.apply(0,arguments),a=Math.floor(Date.now()/1e3);if(function(e){var t=e-r;n.forEach((function(e,r){r<t&&n.delete(r)}))}(a),[].concat(i.arrayFromIterable(n.values())).reduce((function(e,t){return e+t}),0)>=t)return s=o,o=!0,s?"__SKIPPED":"__THROTTLED";o=!1;var u=n.get(a)||0;return n.set(a,u+1),e.apply(null,i.arrayFromIterable(s))}}function it(e,t){return[].concat(i.arrayFromIterable(e),i.arrayFromIterable(t)).join(",")}function st(e){return[].concat(i.arrayFromIterable(_r),i.arrayFromIterable(e.map((function(e){return e.toLowerCase()}))))}var at=r("./node_modules/@sentry/utils/cjs/index.js"),ut=at._nullishCoalesce,lt=at._optionalChain;Object.defineProperty(t,"__esModule",{value:!0});var ct,dt,ft=r("./node_modules/@sentry/core/cjs/index.js"),pt=r("./node_modules/@sentry/utils/cjs/index.js"),ht=r("./node_modules/@sentry-internal/browser-utils/cjs/index.js"),_t=pt.GLOBAL_OBJ;(dt=ct||(ct={}))[dt.Document=0]="Document",dt[dt.DocumentType=1]="DocumentType",dt[dt.Element=2]="Element",dt[dt.Text=3]="Text",dt[dt.CDATA=4]="CDATA",dt[dt.Comment=5]="Comment";var Et=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap};Et.prototype.getId=function(e){return e?function(e,t){return null!=e?e:t()}(n([this,"access",function(e){return e.getMeta},"call",function(t){return t(e)},"optionalAccess",function(e){return e.id}]),(function(){return-1})):-1},Et.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},Et.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},Et.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},Et.prototype.removeNodeFromMap=function(e){var t=this,r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},Et.prototype.has=function(e){return this.idNodeMap.has(e)},Et.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},Et.prototype.add=function(e,t){this.idNodeMap.set(t.id,e),this.nodeMetaMap.set(e,t)},Et.prototype.replace=function(e,t){var r=this.getNode(e);r&&(r=this.nodeMetaMap.get(r))&&this.nodeMetaMap.set(t,r),this.idNodeMap.set(e,t)},Et.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap};var gt,mt,yt=1,St=RegExp("[^a-z0-9-_:]"),Tt=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,At=/^(?:[a-z+]+:)?\/\//i,bt=/^www\..*/i,Ot=/^(data:)([^,]*),(.*)/i,It=/^[^ \t\n\r\u000c]+/,vt=/^[, \t\n\r\u000c]+/,Nt={map:{},getId:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),-1},getNode:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),null},removeNodeFromMap:function(){console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.")},has:function(){return console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),!1},reset:function(){console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.")}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Nt=new Proxy(Nt,{get:function(e,t,r){return"map"===t&&console.error("Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording."),Reflect.get(e,t,r)}}));var Rt=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Rt=function(){return(new Date).getTime()});var Ct=function(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map};Ct.prototype.getId=function(e){return ut(this.styleIDMap.get(e),(function(){return-1}))},Ct.prototype.has=function(e){return this.styleIDMap.has(e)},Ct.prototype.add=function(e,t){return this.has(e)?this.getId(e):(t=void 0===t?this.id++:t,this.styleIDMap.set(e,t),this.idStyleMap.set(t,e),t)},Ct.prototype.getStyle=function(e){return this.idStyleMap.get(e)||null},Ct.prototype.reset=function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1},Ct.prototype.generateId=function(){return this.id++};var Dt={},wt=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(wt||{}),Lt=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(Lt||{}),Pt=function(e){return e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e}(Pt||{}),Mt=function(e){return e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e}(Mt||{}),Ut=function(){this.length=0,this.tail=this.head=null};Ut.prototype.get=function(e){if(e>=this.length)throw Error("Position outside of list range");for(var t=this.head,r=0;r<e;r++)t=V([t,"optionalAccess",function(e){return e.next}])||null;return t},Ut.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&"__ln"in e.previousSibling){var r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else e.nextSibling&&"__ln"in e.nextSibling&&e.nextSibling.__ln.previous?(r=e.nextSibling.__ln.previous,t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)):(this.head&&(this.head.previous=t),t.next=this.head,this.head=t);null===t.next&&(this.tail=t),this.length++},Ut.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next)?t.next.previous=t.previous:this.tail=t.previous:(this.head=t.next)?this.head.previous=null:this.tail=null,e.__ln&&delete e.__ln,this.length--)};var jt=function(){var e=this;this.locked=this.frozen=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){if(!e.frozen&&!e.locked){for(var t=[],r=new Set,n=new Ut,s=function(t){for(var r=-2;-2===r;)r=(t=t&&t.nextSibling)&&e.mirror.getId(t);return r},a=function(i){if(i.parentNode&&F(i)){var a=o(i.parentNode)?e.mirror.getId(x(i)):e.mirror.getId(i.parentNode),u=s(i);if(-1===a||-1===u)return n.addNode(i);var l=O(i,{doc:e.doc,mirror:e.mirror,blockClass:e.blockClass,blockSelector:e.blockSelector,maskAllText:e.maskAllText,unblockSelector:e.unblockSelector,maskTextClass:e.maskTextClass,unmaskTextClass:e.unmaskTextClass,maskTextSelector:e.maskTextSelector,unmaskTextSelector:e.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskAttributeFn:e.maskAttributeFn,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,dataURLOptions:e.dataURLOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(t){"IFRAME"===t.nodeName&&e.mirror.getMeta(t)&&e.iframeManager.addIframe(t),j(t,e.mirror)&&e.stylesheetManager.trackLinkElement(t),k(i)&&e.shadowDomManager.addShadowRoot(i.shadowRoot,e.doc)},onIframeLoad:function(t,r){e.iframeManager.attachIframe(t,r),e.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:function(t,r){e.stylesheetManager.attachLinkElement(t,r)}});l&&(t.push({parentId:a,nextId:u,node:l}),r.add(l.id))}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());for(var u=i.makeIterator(e.movedSet),l=u.next();!l.done;l=u.next())l=l.value,W(e.removes,l,e.mirror)&&!e.movedSet.has(l.parentNode)||a(l);for(l=(u=i.makeIterator(e.addedSet)).next();!l.done;l=u.next())l=l.value,K(e.droppedSet,l)||W(e.removes,l,e.mirror)?K(e.movedSet,l)?a(l):e.droppedSet.add(l):a(l);for(l=null;n.length;){if(u=null,l){var c=e.mirror.getId(l.value.parentNode),d=s(l.value);-1!==c&&-1!==d&&(u=l)}if(!u)for(l=n.tail;l;)if(c=l,l=l.previous,c&&(d=e.mirror.getId(c.value.parentNode),-1!==s(c.value))){if(-1!==d){u=c;break}if((d=c.value).parentNode&&d.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&-1!==e.mirror.getId(d.parentNode.host)){u=c;break}}if(!u){for(;n.head;)n.removeNode(n.head.value);break}l=u.previous,n.removeNode(u.value),a(u.value)}((a={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(e){return!r.has(e.id)})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){var r=t.attributes;if("string"==typeof r.style){var n=JSON.stringify(t.styleDiff),o=JSON.stringify(t._unchangedStyles);n.length<r.style.length&&(n+o).split("var(").length===r.style.split("var(").length&&(r.style=t.styleDiff)}return{id:e.mirror.getId(t.node),attributes:r}})).filter((function(e){return!r.has(e.id)})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:t}).texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(e.texts=[],e.attributes=[],e.attributeMap=new WeakMap,e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(a))}},this.processMutation=function(t){if(-2!==e.mirror.getId(t.target))switch(t.type){case"characterData":var r=t.target.textContent;M(t.target,e.blockClass,e.blockSelector,e.unblockSelector,!1)||r===t.oldValue||e.texts.push({value:T(t.target,e.maskTextClass,e.maskTextSelector,e.unmaskTextClass,e.unmaskTextSelector,e.maskAllText)&&r?e.maskTextFn?e.maskTextFn(r,P(t.target)):r.replace(/[\S]/g,"*"):r,node:t.target});break;case"attributes":r=t.target;var n=t.attributeName,a=t.target.getAttribute(n);if("value"===n){var u=d(r),p=r.tagName;a=f(r,p,u),u=l({maskInputOptions:e.maskInputOptions,tagName:p,type:u}),a=c({isMasked:u=T(t.target,e.maskTextClass,e.maskTextSelector,e.unmaskTextClass,e.unmaskTextSelector,u),element:r,value:a,maskInputFn:e.maskInputFn})}if(M(t.target,e.blockClass,e.blockSelector,e.unblockSelector,!1)||a===t.oldValue)break;if(u=e.attributeMap.get(t.target),"IFRAME"===r.tagName&&"src"===n&&!e.keepIframeSrcFn(a)){if(r.contentDocument)break;n="rr_src"}if(u||(u={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(u),e.attributeMap.set(t.target,u)),"type"===n&&"INPUT"===r.tagName&&"password"===(t.oldValue||"").toLowerCase()&&r.setAttribute("data-rr-is-password","true"),!m(r.tagName,n)&&(u.attributes[n]=g(e.doc,r.tagName.toLowerCase(),n.toLowerCase(),a,r,e.maskAttributeFn),"style"===n)){if(!e.unattachedDoc)try{e.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){e.unattachedDoc=e.doc}for(n=e.unattachedDoc.createElement("span"),t.oldValue&&n.setAttribute("style",t.oldValue),p=(a=i.makeIterator(Array.from(r.style))).next();!p.done;p=a.next()){p=p.value;var h=r.style.getPropertyValue(p),_=r.style.getPropertyPriority(p);h!==n.style.getPropertyValue(p)||_!==n.style.getPropertyPriority(p)?u.styleDiff[p]=""===_?h:[h,_]:u._unchangedStyles[p]=[h,_]}for(p=(n=i.makeIterator(Array.from(n.style))).next();!p.done;p=n.next())a=p.value,""===r.style.getPropertyValue(a)&&(u.styleDiff[a]=!1)}break;case"childList":M(t.target,e.blockClass,e.blockSelector,e.unblockSelector,!0)||(t.addedNodes.forEach((function(r){return e.genAdds(r,t.target)})),t.removedNodes.forEach((function(r){var n=e.mirror.getId(r),i=o(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);M(t.target,e.blockClass,e.blockSelector,e.unblockSelector,!1)||-2===e.mirror.getId(r)||-1===e.mirror.getId(r)||(e.addedSet.has(r)?(H(e.addedSet,r),e.droppedSet.add(r)):e.addedSet.has(t.target)&&-1===n||U(t.target,e.mirror)||(e.movedSet.has(r)&&e.movedMap[n+"@"+i]?H(e.movedSet,r):e.removes.push({parentId:i,id:n,isShadow:!(!o(t.target)||!s(t.target))||void 0})),e.mapRemoves.push(r))})))}},this.genAdds=function(t,r){if(!e.processedNodeManager.inOtherBuffer(t,e)&&!e.addedSet.has(t)&&!e.movedSet.has(t)){if(e.mirror.hasNode(t)){if(-2===e.mirror.getId(t))return;e.movedSet.add(t);var n=null;r&&e.mirror.hasNode(r)&&(n=e.mirror.getId(r)),n&&-1!==n&&(e.movedMap[function(e,t){return e+"@"+t}(e.mirror.getId(t),n)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);M(t,e.blockClass,e.blockSelector,e.unblockSelector,!1)||(t.childNodes.forEach((function(t){return e.genAdds(t)})),k(t)&&t.shadowRoot.childNodes.forEach((function(r){e.processedNodeManager.add(r,e),e.genAdds(r,t)})))}}};jt.prototype.init=function(e){var t=this;"mutationCb blockClass blockSelector unblockSelector maskAllText maskTextClass unmaskTextClass maskTextSelector unmaskTextSelector inlineStylesheet maskInputOptions maskAttributeFn maskTextFn maskInputFn keepIframeSrcFn recordCanvas inlineImages slimDOMOptions dataURLOptions doc mirror iframeManager stylesheetManager shadowDomManager canvasManager processedNodeManager".split(" ").forEach((function(r){t[r]=e[r]}))},jt.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},jt.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},jt.prototype.isFrozen=function(){return this.frozen},jt.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},jt.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},jt.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()};var kt,xt=function(e){return kt?function(){var t=i.getRestArguments.apply(0,arguments);try{return e.apply(null,i.arrayFromIterable(t))}catch(e){if(kt&&!0===kt(e))return function(){};throw e}}:e},Ft=[],Bt=["INPUT","TEXTAREA","SELECT"],Gt=new WeakMap,Vt=function(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap};Vt.prototype.getId=function(e,t,r,n){return r=r||this.getIdToRemoteIdMap(e),e=n||this.getRemoteIdToIdMap(e),(n=r.get(t))||(n=this.generateIdFn(),r.set(t,n),e.set(n,t)),n},Vt.prototype.getIds=function(e,t){var r=this,n=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return t.map((function(t){return r.getId(e,t,n,o)}))},Vt.prototype.getRemoteId=function(e,t,r){return e=r||this.getRemoteIdToIdMap(e),"number"!=typeof t||(t=e.get(t))?t:-1},Vt.prototype.getRemoteIds=function(e,t){var r=this,n=this.getRemoteIdToIdMap(e);return t.map((function(t){return r.getRemoteId(e,t,n)}))},Vt.prototype.reset=function(e){e?(this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)):(this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap)},Vt.prototype.getIdToRemoteIdMap=function(e){var t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t},Vt.prototype.getRemoteIdToIdMap=function(e){var t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t};var Ht=function(){this.crossOriginIframeMirror=new Vt(p),this.crossOriginIframeRootIdMap=new WeakMap};Ht.prototype.addIframe=function(){},Ht.prototype.addLoadListener=function(){},Ht.prototype.attachIframe=function(){};var Wt=function(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Vt(p),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Vt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))};Wt.prototype.addIframe=function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)},Wt.prototype.addLoadListener=function(e){this.loadListener=e},Wt.prototype.attachIframe=function(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),se([this,"access",function(e){return e.loadListener},"optionalCall",function(t){return t(e)}]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&0<e.contentDocument.adoptedStyleSheets.length&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))},Wt.prototype.handleMessage=function(e){if("rrweb"===e.data.type&&e.origin===e.data.origin&&e.source){var t=this.crossOriginIframeMap.get(e.source);t&&(t=this.transformCrossOriginEvent(t,e.data.event))&&this.wrappedEmit(t,e.data.isCheckout)}},Wt.prototype.transformCrossOriginEvent=function(e,t){var r=this;switch(t.type){case wt.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);var n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:wt.IncrementalSnapshot,data:{source:Lt.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case wt.Plugin:return t;case wt.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case wt.IncrementalSnapshot:switch(t.data.source){case Lt.Mutation:return t.data.adds.forEach((function(t){r.replaceIds(t,e,["parentId","nextId","previousId"]),r.replaceIdOnNode(t.node,e);var n=r.crossOriginIframeRootIdMap.get(e);n&&r.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((function(t){r.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((function(t){r.replaceIds(t,e,["id"])})),t.data.texts.forEach((function(t){r.replaceIds(t,e,["id"])})),t;case Lt.Drag:case Lt.TouchMove:case Lt.MouseMove:return t.data.positions.forEach((function(t){r.replaceIds(t,e,["id"])})),t;case Lt.MediaInteraction:case Lt.MouseInteraction:case Lt.Scroll:case Lt.CanvasMutation:case Lt.Input:return this.replaceIds(t.data,e,["id"]),t;case Lt.StyleSheetRule:case Lt.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Lt.Font:return t;case Lt.Selection:return t.data.ranges.forEach((function(t){r.replaceIds(t,e,["start","end"])})),t;case Lt.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),se([t,"access",function(e){return e.data},"access",function(e){return e.styles},"optionalAccess",function(e){return e.forEach},"call",function(t){return t((function(t){r.replaceStyleIds(t,e,["styleId"])}))}]),t}}return!1},Wt.prototype.replace=function(e,t,r,n){for(var o=(n=i.makeIterator(n)).next();!o.done;o=n.next())o=o.value,(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(r,t[o]):t[o]=e.getId(r,t[o]));return t},Wt.prototype.replaceIds=function(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)},Wt.prototype.replaceStyleIds=function(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)},Wt.prototype.replaceIdOnNode=function(e,t){var r=this;this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((function(e){r.replaceIdOnNode(e,t)}))},Wt.prototype.patchRootIdOnNode=function(e,t){var r=this;e.type===ct.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((function(e){r.patchRootIdOnNode(e,t)}))};var Yt=function(){};Yt.prototype.init=function(){},Yt.prototype.addShadowRoot=function(){},Yt.prototype.observeAttachShadow=function(){},Yt.prototype.reset=function(){};var Kt=function(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()};Kt.prototype.init=function(){this.reset(),this.patchAttachShadow(Element,document)},Kt.prototype.addShadowRoot=function(e,t){var r=this;if(s(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var n=X(Object.assign({},this.bypassOptions,{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((function(){return n.disconnect()})),this.restoreHandlers.push(Z(Object.assign({},this.bypassOptions,{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),G((function(){e.adoptedStyleSheets&&0<e.adoptedStyleSheets.length&&r.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,r.mirror.getId(e.host)),r.restoreHandlers.push(re({mirror:r.mirror,stylesheetManager:r.bypassOptions.stylesheetManager},e))}),0)}},Kt.prototype.observeAttachShadow=function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)},Kt.prototype.patchAttachShadow=function(e,t){var r=this;this.restoreHandlers.push(C(e.prototype,"attachShadow",(function(e){return function(n){return n=e.call(this,n),this.shadowRoot&&F(this)&&r.addShadowRoot(this.shadowRoot,t),n}})))},Kt.prototype.reset=function(){this.restoreHandlers.forEach((function(e){try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet};var zt=function(){};zt.prototype.reset=function(){},zt.prototype.freeze=function(){},zt.prototype.unfreeze=function(){},zt.prototype.lock=function(){},zt.prototype.unlock=function(){},zt.prototype.snapshot=function(){};var qt=function(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ct,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb};qt.prototype.attachLinkElement=function(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)},qt.prototype.trackLinkElement=function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))},qt.prototype.adoptStyleSheets=function(e,t){if(0!==e.length){t={id:t,styleIds:[]};for(var r=[],n=(e=i.makeIterator(e)).next();!n.done;n=e.next()){n=n.value;var o=void 0;this.styleMirror.has(n)?o=this.styleMirror.getId(n):(o=this.styleMirror.add(n),r.push({styleId:o,rules:Array.from(n.rules||CSSRule,(function(e,t){return{rule:u(e),index:t}}))})),t.styleIds.push(o)}0<r.length&&(t.styles=r),this.adoptedStyleSheetCb(t)}},qt.prototype.reset=function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet},qt.prototype.trackStylesheetInLinkElement=function(e){};var $t=function(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()};$t.prototype.periodicallyClear=function(){var e=this;!function(){var e=i.getRestArguments.apply(0,arguments);B("requestAnimationFrame").apply(null,i.arrayFromIterable(e))}((function(){e.clear(),e.loop&&e.periodicallyClear()}))},$t.prototype.inOtherBuffer=function(e,t){return(e=this.nodeMap.get(e))&&Array.from(e).some((function(e){return e!==t}))},$t.prototype.add=function(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))},$t.prototype.clear=function(){this.nodeMap=new WeakMap},$t.prototype.destroy=function(){this.loop=!1};var Xt,Jt,Zt=new Et;ae.mirror=Zt,ae.takeFullSnapshot=function(e){if(!Jt)throw Error("please take full snapshot after start recording");Jt(e)};var Qt,er=function(e,t,r){r=void 0===r?ce:r,this._lastScroll=this._lastMutation=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=r};er.prototype.addListeners=function(){var e=this,t=pe((function(){e._lastMutation=Date.now()/1e3}));this._teardown=function(){t(),e._clicks=[],e._lastMutation=0,e._lastScroll=0}},er.prototype.removeListeners=function(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)},er.prototype.handleClick=function(e,t){if(!function(e,t){return!!(!rr.includes(e.tagName)||"INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||"")||"A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target"))||t&&e.matches(t))}(t,this._ignoreSelector)&&e.data&&"number"==typeof e.data.nodeId&&e.timestamp){var r={timestamp:le(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((function(e){return e.node===r.node&&1>Math.abs(e.timestamp-r.timestamp)}))||(this._clicks.push(r),1===this._clicks.length&&this._scheduleCheckClicks())}},er.prototype.registerMutation=function(e){e=void 0===e?Date.now():e,this._lastMutation=le(e)},er.prototype.registerScroll=function(e){e=void 0===e?Date.now():e,this._lastScroll=le(e)},er.prototype.registerClick=function(e){e=e.closest("button,a")||e,this._handleMultiClick(e)},er.prototype._handleMultiClick=function(e){this._getClicks(e).forEach((function(e){e.clickCount++}))},er.prototype._getClicks=function(e){return this._clicks.filter((function(t){return t.node===e}))},er.prototype._checkClicks=function(){var e=this,t=[],r=Date.now()/1e3;this._clicks.forEach((function(n){!n.mutationAfter&&e._lastMutation&&(n.mutationAfter=n.timestamp<=e._lastMutation?e._lastMutation-n.timestamp:void 0),!n.scrollAfter&&e._lastScroll&&(n.scrollAfter=n.timestamp<=e._lastScroll?e._lastScroll-n.timestamp:void 0),n.timestamp+e._timeout<=r&&t.push(n)}));for(var n=i.makeIterator(t),o=n.next();!o.done;o=n.next()){o=o.value;var s=this._clicks.indexOf(o);-1<s&&(this._generateBreadcrumbs(o),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()},er.prototype._generateBreadcrumbs=function(e){var t=this._replay,r=e.mutationAfter&&e.mutationAfter<=this._threshold,n=e.clickCount,o=e.clickBreadcrumb;e.scrollAfter&&e.scrollAfter<=this._scollTimeout||r?1<n&&(n={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:Object.assign({},o.data,{url:_t.location.href,route:t.getCurrentRoute(),clickCount:n,metric:!0})},this._addBreadcrumbEvent(t,n)):(r=(e=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout))<1e3*this._timeout?"mutation":"timeout",n={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:Object.assign({},o.data,{url:_t.location.href,route:t.getCurrentRoute(),timeAfterClickMs:e,endReason:r,clickCount:n||1})},this._addBreadcrumbEvent(t,n))},er.prototype._scheduleCheckClicks=function(){var e=this;this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=ht.setTimeout((function(){return e._checkClicks()}),1e3)};var tr,rr=["A","BUTTON","INPUT"];!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(tr||(tr={}));var nr=new Set("id class aria-label role name alt title data-test-id data-testid disabled aria-disabled data-sentry-component".split(" ")),or=function(e){return function(t){if(e.isEnabled()){var r="click"===t.name,n=null;try{n=r?de(t.event):fe(t.event);var o=pt.htmlTreeAsString(n,{maxStringLength:200})||"<unknown>"}catch(e){o="<unknown>"}(r=he(Object.assign({},{category:"ui."+t.name},Ee(n,o))))&&(n=(o="click"===t.name)?t.event:void 0,!(o&&e.clickDetector&&n&&n.target)||n.altKey||n.metaKey||n.ctrlKey||n.shiftKey||(t=de(t.event),e.clickDetector.handleClick(r,t)),ce(e,r))}}},ir={resource:function(e){var t=e.entryType,r=e.initiatorType,n=e.name,o=e.responseEnd,i=e.startTime,s=e.decodedBodySize,a=e.encodedBodySize,u=e.responseStatus;return e=e.transferSize,["fetch","xmlhttprequest"].includes(r)?null:{type:t+"."+r,start:me(i),end:me(o),name:n,data:{size:e,statusCode:u,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){var t=e.duration;return{type:e.entryType,name:e.name,start:e=me(e.startTime),end:e+t,data:void 0}},navigation:function(e){var t=e.name,r=e.decodedBodySize,n=e.duration,o=e.domComplete,i=e.encodedBodySize,s=e.domContentLoadedEventStart,a=e.domContentLoadedEventEnd,u=e.domInteractive,l=e.loadEventStart,c=e.loadEventEnd,d=e.redirectCount,f=e.transferSize;return 0===n?null:{type:e.entryType+"."+e.type,start:me(e.startTime),end:me(o),name:t,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:n,domInteractive:u,domContentLoadedEventStart:s,domContentLoadedEventEnd:a,loadEventStart:l,loadEventEnd:c,domComplete:o,redirectCount:d}}}},sr="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ar=function(){var e=Error.call(this,"Event buffer exceeded maximum size of 20000000.");this.message=e.message,"stack"in e&&(this.stack=e.stack)};i.inherits(ar,Error);var ur=function(){this.events=[],this._totalSize=0,this.hasCheckout=!1};ur.prototype.destroy=function(){this.events=[]},ur.prototype.addEvent=function(e){var t,r=this;return i.asyncExecutePromiseGeneratorProgram((function(n){if(t=JSON.stringify(e).length,r._totalSize+=t,2e7<r._totalSize)throw new ar;r.events.push(e),n.jumpToEnd()}))},ur.prototype.finish=function(){var e=this;return new Promise((function(t){var r=e.events;e.clear(),t(JSON.stringify(r))}))},ur.prototype.clear=function(){this.events=[],this._totalSize=0,this.hasCheckout=!1},ur.prototype.getEarliestTimestamp=function(){var e=this.events.map((function(e){return e.timestamp})).sort()[0];return e?ue(e):null},i.global.Object.defineProperties(ur.prototype,{hasEvents:{configurable:!0,enumerable:!0,get:function(){return 0<this.events.length}},type:{configurable:!0,enumerable:!0,get:function(){return"sync"}}});var lr=function(e){this._worker=e,this._id=0};lr.prototype.ensureReady=function(){var e=this;return this._ensureReadyPromise?this._ensureReadyPromise:this._ensureReadyPromise=new Promise((function(t,r){e._worker.addEventListener("message",(function(e){e.data.success?t():r()}),{once:!0}),e._worker.addEventListener("error",(function(e){r(e)}),{once:!0})}))},lr.prototype.destroy=function(){ye("[Replay] Destroying compression worker"),this._worker.terminate()},lr.prototype.postMessage=function(e,t){var r=this,n=this._getAndIncrementId();return new Promise((function(o,i){var s=function(t){(t=t.data).method===e&&t.id===n&&(r._worker.removeEventListener("message",s),t.success?o(t.response):(sr&&pt.logger.error("[Replay]",t.response),i(Error("Error in compression worker"))))};r._worker.addEventListener("message",s),r._worker.postMessage({id:n,method:e,arg:t})}))},lr.prototype._getAndIncrementId=function(){return this._id++};var cr=function(e){this._worker=new lr(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1};cr.prototype.ensureReady=function(){return this._worker.ensureReady()},cr.prototype.destroy=function(){this._worker.destroy()},cr.prototype.addEvent=function(e){var t=ue(e.timestamp);return(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t),e=JSON.stringify(e),this._totalSize+=e.length,2e7<this._totalSize?Promise.reject(new ar):this._sendEventToWorker(e)},cr.prototype.finish=function(){return this._finishRequest()},cr.prototype.clear=function(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(function(e){sr&&pt.logger.warn('[Replay] Sending "clear" message to worker failed',e)}))},cr.prototype.getEarliestTimestamp=function(){return this._earliestTimestamp},cr.prototype._sendEventToWorker=function(e){return this._worker.postMessage("addEvent",e)},cr.prototype._finishRequest=function(){var e,t=this;return i.asyncExecutePromiseGeneratorProgram((function(r){return 1==r.nextAddress?r.yield(t._worker.postMessage("finish"),2):(e=r.yieldResult,t._earliestTimestamp=null,t._totalSize=0,r.return(e))}))},i.global.Object.defineProperties(cr.prototype,{hasEvents:{configurable:!0,enumerable:!0,get:function(){return!!this._earliestTimestamp}},type:{configurable:!0,enumerable:!0,get:function(){return"worker"}}});var dr=function(e){this._fallback=new ur,this._compression=new cr(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()};dr.prototype.destroy=function(){this._fallback.destroy(),this._compression.destroy()},dr.prototype.clear=function(){return this._used.clear()},dr.prototype.getEarliestTimestamp=function(){return this._used.getEarliestTimestamp()},dr.prototype.addEvent=function(e){return this._used.addEvent(e)},dr.prototype.finish=function(){var e=this;return i.asyncExecutePromiseGeneratorProgram((function(t){return 1==t.nextAddress?t.yield(e.ensureWorkerIsLoaded(),2):t.return(e._used.finish())}))},dr.prototype.ensureWorkerIsLoaded=function(){return this._ensureWorkerIsLoadedPromise},dr.prototype._ensureWorkerIsLoaded=function(){var e=this;return i.asyncExecutePromiseGeneratorProgram((function(t){switch(t.nextAddress){case 1:return t.setCatchFinallyBlocks(2),t.yield(e._compression.ensureReady(),4);case 4:t.leaveTryBlock(3);break;case 2:return t.enterCatchBlock(),ye("[Replay] Failed to load the compression worker, falling back to simple buffer"),t.return();case 3:return t.yield(e._switchToCompressionWorker(),0)}}))},dr.prototype._switchToCompressionWorker=function(){var e,t,r,n,o,s,a,u,l=this;return i.asyncExecutePromiseGeneratorProgram((function(c){if(1==c.nextAddress){for(e=l._fallback,t=e.events,r=e.hasCheckout,n=[],o=i.makeIterator(t),s=o.next();!s.done;s=o.next())a=s.value,n.push(l._compression.addEvent(a));return l._compression.hasCheckout=r,l._used=l._compression,c.setCatchFinallyBlocks(2),c.yield(Promise.all(n),4)}if(2!=c.nextAddress)return c.leaveTryBlock(0);u=c.enterCatchBlock(),sr&&pt.logger.warn("[Replay] Failed to add events when switching buffers.",u),c.jumpToEnd()}))},i.global.Object.defineProperties(dr.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return this._used.type}},hasEvents:{configurable:!0,enumerable:!0,get:function(){return this._used.hasEvents}},hasCheckout:{configurable:!0,enumerable:!0,get:function(){return this._used.hasCheckout},set:function(e){this._used.hasCheckout=e}}});var fr=function(e){e=Error.call(this,"Transport returned status code "+e),this.message=e.message,"stack"in e&&(this.stack=e.stack)};i.inherits(fr,Error);var pr=function(e){var t=Error.call(this,"Rate limit hit");this.message=t.message,"stack"in t&&(this.stack=t.stack),this.rateLimits=e};i.inherits(pr,Error);var hr=function(e){var t=this,r=e.options;e=e.recordingOptions,hr.prototype.__init.call(this),hr.prototype.__init2.call(this),hr.prototype.__init3.call(this),hr.prototype.__init4.call(this),hr.prototype.__init5.call(this),hr.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._hasInitializedCoreListeners=this._isPaused=this._isEnabled=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=e,this._options=r,this._debouncedFlush=function(e,t,r){function n(){return o(),s=e()}function o(){void 0!==a&&clearTimeout(a),void 0!==u&&clearTimeout(u),a=u=void 0}function i(){return a&&clearTimeout(a),a=ht.setTimeout(n,t),l&&void 0===u&&(u=ht.setTimeout(n,l)),s}var s,a,u,l=r&&r.maxWait?Math.max(r.maxWait,t):0;return i.cancel=o,i.flush=function(){return void 0!==a||void 0!==u?n():s},i}((function(){return t._flush()}),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=ot((function(e,r){return e=Pe(t,e)?Le(t,e,r):Promise.resolve(null)}),300,5),r=(e=this.getOptions()).slowClickTimeout,e=e.slowClickIgnoreSelectors,(r=r?{threshold:Math.min(3e3,r),timeout:r,scrollTimeout:300,ignoreSelector:e?e.join(","):""}:void 0)&&(this.clickDetector=new er(this,r))};hr.prototype.getContext=function(){return this._context},hr.prototype.isEnabled=function(){return this._isEnabled},hr.prototype.isPaused=function(){return this._isPaused},hr.prototype.isRecordingCanvas=function(){return!!this._canvas},hr.prototype.getOptions=function(){return this._options},hr.prototype.initializeSampling=function(e){var t=this._options,r=t.sessionSampleRate;0>=t.errorSampleRate&&0>=r||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Se("[Replay] Starting replay in "+this.recordingMode+" mode",this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(Error("Unable to initialize and create session")))},hr.prototype.start=function(){if(this._isEnabled&&"session"===this.recordingMode)throw Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw Error("Replay buffering is in progress, call `flush()` to save the replay");Se("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity(),this.session=De({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1}),this._initializeRecording()},hr.prototype.startBuffering=function(){if(this._isEnabled)throw Error("Replay recording is already in progress");Se("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals),this.session=De({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0}),this.recordingMode="buffer",this._initializeRecording()},hr.prototype.startRecording=function(){try{var e=this._canvas;this._stopRecording=ae(Object.assign({},this._recordingOptions,"buffer"===this.recordingMode&&{checkoutEveryNms:6e4},{emit:tt(this),onMutation:this._onMutationHandler},e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}))}catch(e){this._handleException(e)}},hr.prototype.stopRecording=function(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}},hr.prototype.stop=function(e){var t,r=void 0!==(e=void 0===e?{}:e).forceFlush&&e.forceFlush,n=e.reason,o=this;return i.asyncExecutePromiseGeneratorProgram((function(e){if(1==e.nextAddress)return o._isEnabled?(o._isEnabled=!1,e.setCatchFinallyBlocks(2),ye("[Replay] Stopping Replay"+(n?" triggered by "+n:""),o._options._experiments.traceInternals),o._removeListeners(),o.stopRecording(),o._debouncedFlush.cancel(),r?e.yield(o._flush({force:!0}),4):e.jumpTo(4)):e.return();if(2!=e.nextAddress){if(o.eventBuffer&&o.eventBuffer.destroy(),o.eventBuffer=null,Ae())try{_t.sessionStorage.removeItem("sentryReplaySession")}catch(e){}return o.session=void 0,e.leaveTryBlock(0)}t=e.enterCatchBlock(),o._handleException(t),e.jumpToEnd()}))},hr.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this.stopRecording(),ye("[Replay] Pausing replay",this._options._experiments.traceInternals))},hr.prototype.resume=function(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),ye("[Replay] Resuming replay",this._options._experiments.traceInternals))},hr.prototype.sendBufferedReplayOrFlush=function(e){var t,r,n=void 0===(e=void 0===e?{}:e).continueRecording||e.continueRecording,o=this;return i.asyncExecutePromiseGeneratorProgram((function(e){return 1==e.nextAddress?"session"===o.recordingMode?e.return(o.flushImmediate()):(t=Date.now(),ye("[Replay] Converting buffer to session",o._options._experiments.traceInternals),e.yield(o.flushImmediate(),2)):(r=o.stopRecording(),n&&r&&"session"!==o.recordingMode?(o.recordingMode="session",o.session&&(o._updateUserActivity(t),o._updateSessionActivity(t),o._maybeSaveSession()),o.startRecording(),void e.jumpToEnd()):e.return())}))},hr.prototype.addUpdate=function(e){e=e(),"buffer"!==this.recordingMode&&!0!==e&&this._debouncedFlush()},hr.prototype.triggerUserActivity=function(){this._updateUserActivity(),this._stopRecording?(this.checkAndHandleExpiredSession(),this._updateSessionActivity()):this._checkSession()&&this.resume()},hr.prototype.updateUserActivity=function(){this._updateUserActivity(),this._updateSessionActivity()},hr.prototype.conditionalFlush=function(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()},hr.prototype.flush=function(){return this._debouncedFlush()},hr.prototype.flushImmediate=function(){return this._debouncedFlush(),this._debouncedFlush.flush()},hr.prototype.cancelFlush=function(){this._debouncedFlush.cancel()},hr.prototype.getSessionId=function(){return this.session&&this.session.id},hr.prototype.checkAndHandleExpiredSession=function(){if(!(this._lastActivity&&Ne(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()},hr.prototype.setInitialState=function(){var e=_t.location.origin+""+_t.location.pathname+_t.location.hash+_t.location.search;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=e,this._context.initialTimestamp=Date.now(),this._context.urls.push(e)},hr.prototype.throttledAddEvent=function(e,t){var r=this;if("__THROTTLED"===(e=this._throttledAddEvent(e,t))){var n=he({category:"replay.throttled"});this.addUpdate((function(){return!we(r,{type:5,timestamp:n.timestamp||0,data:{tag:"breadcrumb",payload:n,metric:!0}})}))}return e},hr.prototype.getCurrentRoute=function(){var e=this.lastActiveSpan||ft.getActiveSpan(),t=((e=e&&ft.getRootSpan(e))&&ft.spanToJSON(e).data||{})[ft.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(e&&t&&["route","custom"].includes(t))return ft.spanToJSON(e).description},hr.prototype._initializeRecording=function(){this.setInitialState(),this._updateSessionActivity();e:{var e=this._options.workerUrl;if(this._options.useCompression&&window.Worker){t:{try{var t;if(!(t=e)){if("undefined"!=typeof __SENTRY_EXCLUDE_REPLAY_WORKER__&&__SENTRY_EXCLUDE_REPLAY_WORKER__)var r="";else{var n=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);r=URL.createObjectURL(n)}t=r}if(t){ye("[Replay] Using compression worker"+(e?" from "+e:""));var o=new Worker(t),i=new dr(o);break t}}catch(e){ye("[Replay] Failed to create compression worker")}i=void 0}if(e=i)break e}ye("[Replay] Using simple buffer"),e=new ur}this.eventBuffer=e,this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()},hr.prototype._handleException=function(e){sr&&pt.logger.error("[Replay]",e),sr&&this._options._experiments&&this._options._experiments.captureExceptions&&ft.captureException(e)},hr.prototype._initializeSessionForSampling=function(e){this.session=De({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:0<this._options.errorSampleRate})},hr.prototype._checkSession=function(){if(!this.session)return!1;var e=this.session;return!Ce(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)},hr.prototype._refreshSession=function(e){var t=this;return i.asyncExecutePromiseGeneratorProgram((function(r){if(1==r.nextAddress)return t._isEnabled?r.yield(t.stop({reason:"refresh session"}),2):r.return();t.initializeSampling(e.id),r.jumpToEnd()}))},hr.prototype._addListeners=function(){try{_t.document.addEventListener("visibilitychange",this._handleVisibilityChange),_t.addEventListener("blur",this._handleWindowBlur),_t.addEventListener("focus",this._handleWindowFocus),_t.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(et(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function r(e){e.entries.forEach(t)}var n=[];return["navigation","paint","resource"].forEach((function(e){n.push(ht.addPerformanceInstrumentationHandler(e,r))})),n.push(ht.addLcpInstrumentationHandler((function(t){var r=t.metric,n=(t=e.replayPerformanceEntries).push,o=r.entries;o=(o=o[o.length-1])?o.element:void 0;var i=me(r=r.value);r={type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:r,size:r,nodeId:o?ae.mirror.getId(o):void 0}},n.call(t,r)}))),function(){n.forEach((function(e){return e()}))}}(this)},hr.prototype._removeListeners=function(){try{_t.document.removeEventListener("visibilitychange",this._handleVisibilityChange),_t.removeEventListener("blur",this._handleWindowBlur),_t.removeEventListener("focus",this._handleWindowFocus),_t.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}},hr.prototype.__init=function(){var e=this;this._handleVisibilityChange=function(){"visible"===_t.document.visibilityState?e._doChangeToForegroundTasks():e._doChangeToBackgroundTasks()}},hr.prototype.__init2=function(){var e=this;this._handleWindowBlur=function(){var t=he({category:"ui.blur"});e._doChangeToBackgroundTasks(t)}},hr.prototype.__init3=function(){var e=this;this._handleWindowFocus=function(){var t=he({category:"ui.focus"});e._doChangeToForegroundTasks(t)}},hr.prototype.__init4=function(){var e=this;this._handleKeyboardEvent=function(t){if(e.isEnabled()){e.updateUserActivity();var r=t.metaKey,n=t.shiftKey,o=t.ctrlKey,i=t.altKey,s=t.key;if((t=t.target)&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable&&s){var a=1===s.length;r||o||i||!a?(t=Ee(t,a=pt.htmlTreeAsString(t,{maxStringLength:200})||"<unknown>"),r=he({category:"ui.keyDown",message:a,data:Object.assign({},t.data,{metaKey:r,shiftKey:n,ctrlKey:o,altKey:i,key:s})})):r=null}else r=null;r&&ce(e,r)}}},hr.prototype._doChangeToBackgroundTasks=function(e){this.session&&!Re(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})&&(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())},hr.prototype._doChangeToForegroundTasks=function(e){this.session&&(this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):ye("[Replay] Document has become active, but session has expired"))},hr.prototype._updateUserActivity=function(e){this._lastActivity=e=void 0===e?Date.now():e},hr.prototype._updateSessionActivity=function(e){e=void 0===e?Date.now():e,this.session&&(this.session.lastActivity=e,this._maybeSaveSession())},hr.prototype._createCustomBreadcrumb=function(e){var t=this;this.addUpdate((function(){t.throttledAddEvent({type:wt.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))},hr.prototype._addPerformanceEntries=function(){var e=this.performanceEntries.map(ge).filter(Boolean).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(ke(this,e))},hr.prototype._clearContext=function(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]},hr.prototype._updateInitialTimestampFromEventBuffer=function(){var e=this.session,t=this.eventBuffer;e&&t&&!e.segmentId&&(e=t.getEarliestTimestamp())&&e<this._context.initialTimestamp&&(this._context.initialTimestamp=e)},hr.prototype._popEventContext=function(){var e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e},hr.prototype._runFlush=function(){var e,t,r,n,o,s,a,u=this;return i.asyncExecutePromiseGeneratorProgram((function(l){switch(l.nextAddress){case 1:return e=u.getSessionId(),u.session&&u.eventBuffer&&e?l.yield(u._addPerformanceEntries(),2):(sr&&pt.logger.error("[Replay] No session or eventBuffer found to flush."),l.return());case 2:return u.eventBuffer&&u.eventBuffer.hasEvents?l.yield(function(e){return i.asyncExecutePromiseGeneratorProgram((function(t){try{var r=t.return,n=Promise,o=n.all,i=_t.performance.memory,s=i.jsHeapSizeLimit,a=i.totalJSHeapSize,u=i.usedJSHeapSize,l=Date.now()/1e3;return r.call(t,o.call(n,ke(e,[{type:"memory",name:"memory",start:l,end:l,data:{memory:{jsHeapSizeLimit:s,totalJSHeapSize:a,usedJSHeapSize:u}}}])))}catch(e){return t.return([])}}))}(u),3):l.return();case 3:if(!u.eventBuffer||e!==u.getSessionId())return l.return();if(l.setCatchFinallyBlocks(4),u._updateInitialTimestampFromEventBuffer(),(t=Date.now())-u._context.initialTimestamp>u._options.maxReplayDuration+3e4)throw Error("Session is too long, not sending replay");return r=u._popEventContext(),n=u.session.segmentId++,u._maybeSaveSession(),l.yield(u.eventBuffer.finish(),6);case 6:return o=l.yieldResult,l.yield(nt({replayId:e,recordingData:o,segmentId:n,eventContext:r,session:u.session,options:u.getOptions(),timestamp:t}),7);case 7:l.leaveTryBlock(0);break;case 4:s=l.enterCatchBlock(),u._handleException(s),u.stop({reason:"sendReplay"}),(a=ft.getClient())&&a.recordDroppedEvent("send_error","replay"),l.jumpToEnd()}}))},hr.prototype.__init5=function(){var e=this;this._flush=function(t){var r,n,o,s,a,u,l,c=void 0!==(t=void 0===t?{}:t).force&&t.force;return i.asyncExecutePromiseGeneratorProgram((function(t){switch(t.nextAddress){case 1:if(!e._isEnabled&&!c)return t.return();if(!e.checkAndHandleExpiredSession())return sr&&pt.logger.error("[Replay] Attempting to finish replay event after session expired."),t.return();if(!e.session)return t.return();if(r=e.session.started,n=Date.now(),o=n-r,e._debouncedFlush.cancel(),s=o<e._options.minReplayDuration,a=o>e._options.maxReplayDuration+5e3,s||a)return ye("[Replay] Session duration ("+Math.floor(o/1e3)+"s) is too "+(s?"short":"long")+", not sending replay.",e._options._experiments.traceInternals),s&&e._debouncedFlush(),t.return();if((u=e.eventBuffer)&&0===e.session.segmentId&&!u.hasCheckout&&ye("[Replay] Flushing initial segment without checkout.",e._options._experiments.traceInternals),e._flushLock){t.jumpTo(2);break}return e._flushLock=e._runFlush(),t.yield(e._flushLock,3);case 3:return e._flushLock=void 0,t.return();case 2:return t.setCatchFinallyBlocks(4,5),t.yield(e._flushLock,5);case 5:t.enterFinallyBlock(),e._debouncedFlush(),t.leaveFinallyBlock(0);break;case 4:l=t.enterCatchBlock(),sr&&pt.logger.error(l),t.jumpTo(5)}}))}},hr.prototype._maybeSaveSession=function(){this.session&&this._options.stickySession&&Ie(this.session)},hr.prototype.__init6=function(){var e=this;this._onMutationHandler=function(t){t=t.length;var r=e._options.mutationLimit;return r=r&&t>r,(t>e._options.mutationBreadcrumbLimit||r)&&(t=he({category:"replay.mutations",data:{count:t,limit:r}}),e._createCustomBreadcrumb(t)),!r||(e.stop({reason:"mutationLimit",forceFlush:"session"===e.recordingMode}),!1)}};var _r=["content-length","content-type","accept"],Er=!1,gr=function(e){var t=void 0===e?{}:e;e=void 0===t.flushMinDelay?5e3:t.flushMinDelay;var r=void 0===t.flushMaxDelay?5500:t.flushMaxDelay,n=void 0===t.minReplayDuration?4999:t.minReplayDuration,o=void 0===t.maxReplayDuration?36e5:t.maxReplayDuration,s=void 0===t.stickySession||t.stickySession,a=void 0===t.useCompression||t.useCompression,u=t.workerUrl,l=void 0===t._experiments?{}:t._experiments,c=void 0===t.maskAllText||t.maskAllText,d=void 0===t.maskAllInputs||t.maskAllInputs,f=void 0===t.blockAllMedia||t.blockAllMedia,p=void 0===t.mutationBreadcrumbLimit?750:t.mutationBreadcrumbLimit,h=void 0===t.mutationLimit?1e4:t.mutationLimit,_=void 0===t.slowClickTimeout?7e3:t.slowClickTimeout,E=void 0===t.slowClickIgnoreSelectors?[]:t.slowClickIgnoreSelectors,g=void 0===t.networkDetailAllowUrls?[]:t.networkDetailAllowUrls,m=void 0===t.networkDetailDenyUrls?[]:t.networkDetailDenyUrls,y=void 0===t.networkCaptureBodies||t.networkCaptureBodies,S=void 0===t.networkRequestHeaders?[]:t.networkRequestHeaders,T=void 0===t.networkResponseHeaders?[]:t.networkResponseHeaders,A=void 0===t.mask?[]:t.mask,b=void 0===t.maskAttributes?["title","placeholder"]:t.maskAttributes,O=void 0===t.unmask?[]:t.unmask,I=void 0===t.block?[]:t.block,v=void 0===t.unblock?[]:t.unblock,N=void 0===t.ignore?[]:t.ignore,R=t.maskFn,C=t.beforeAddRecordingEvent;t=t.beforeErrorSampling,this.name=gr.id;var D=function(e){var t=e.unmask,r=e.block,n=e.unblock,o=e.ignore;return{maskTextSelector:e=it(e.mask,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:t=it(t,[]),blockSelector:it(r,[".sentry-block","[data-sentry-block]"].concat(i.arrayFromIterable(['base[href="/"]']))),unblockSelector:it(n,[]),ignoreSelector:it(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:A,unmask:O,block:I,unblock:v,ignore:N});if(this._recordingOptions=Object.assign({},{maskAllInputs:d,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:R,maskInputFn:R,maskAttributeFn:function(e,t,r){return!c||D.unmaskTextSelector&&r.matches(D.unmaskTextSelector)?t:b.includes(e)||"value"===e&&"INPUT"===r.tagName&&["submit","button"].includes(r.getAttribute("type")||"")?t.replace(/[\S]/g,"*"):t}},D,{slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:function(e){try{e.__rrweb__=!0}catch(e){}}}),this._initialOptions={flushMinDelay:e,flushMaxDelay:r,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(o,36e5),stickySession:s,useCompression:a,workerUrl:u,blockAllMedia:f,maskAllInputs:d,maskAllText:c,mutationBreadcrumbLimit:p,mutationLimit:h,slowClickTimeout:_,slowClickIgnoreSelectors:E,networkDetailAllowUrls:g,networkDetailDenyUrls:m,networkCaptureBodies:y,networkRequestHeaders:st(S),networkResponseHeaders:st(T),beforeAddRecordingEvent:C,beforeErrorSampling:t,_experiments:l},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?this._recordingOptions.blockSelector+',img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]':'img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]'),this._isInitialized&&pt.isBrowser())throw Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0};gr.__initStatic=function(){this.id="Replay"},gr.prototype.setupOnce=function(){var e=this;pt.isBrowser()&&(this._setup(),setTimeout((function(){return e._initialize()})))},gr.prototype.start=function(){this._replay&&this._replay.start()},gr.prototype.startBuffering=function(){this._replay&&this._replay.startBuffering()},gr.prototype.stop=function(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()},gr.prototype.flush=function(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()},gr.prototype.getReplayId=function(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()},gr.prototype._initialize=function(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())},gr.prototype._setup=function(){var e=function(e){var t=ft.getClient();if(t=t&&t.getOptions(),e=Object.assign({},{sessionSampleRate:0,errorSampleRate:0},pt.dropUndefinedKeys(e)),!t)return pt.consoleSandbox((function(){console.warn("SDK client is not available.")})),e;var r=ft.parseSampleRate(t.replaysSessionSampleRate);return t=ft.parseSampleRate(t.replaysOnErrorSampleRate),null==r&&null==t&&pt.consoleSandbox((function(){console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")})),null!=r&&(e.sessionSampleRate=r),null!=t&&(e.errorSampleRate=t),e}(this._initialOptions);this._replay=new hr({options:e,recordingOptions:this._recordingOptions})},gr.prototype._maybeLoadFromReplayCanvasIntegration=function(){try{var e=ft.getClient().getIntegrationByName("ReplayCanvas");e&&(this._replay._canvas=e.getOptions())}catch(e){}},i.global.Object.defineProperties(gr.prototype,{_isInitialized:{configurable:!0,enumerable:!0,get:function(){return Er},set:function(e){Er=e}}}),gr.__initStatic(),t.getReplay=function(){var e=ft.getClient();return e&&e.getIntegrationByName("Replay")},t.replayIntegration=function(e){return new gr(e)}},"./node_modules/@sentry/browser/cjs/client.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js"),o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/browser/cjs/debug-build.js"),a=r("./node_modules/@sentry/browser/cjs/eventbuilder.js"),u=r("./node_modules/@sentry/browser/cjs/helpers.js"),l=r("./node_modules/@sentry/browser/cjs/userfeedback.js");e=function(e){e=Object.assign({},{parentSpanIsAlwaysRootSpan:!0},e);var t=u.WINDOW.SENTRY_SDK_SOURCE||o.getSDKSource();n.applySdkMetadata(e,"browser",["browser"],t);var r=n.BaseClient.call(this,e)||this;return e.sendClientReports&&u.WINDOW.document&&u.WINDOW.document.addEventListener("visibilitychange",(function(){"hidden"===u.WINDOW.document.visibilityState&&r._flushOutcomes()})),r},i.inherits(e,n.BaseClient),e.prototype.eventFromException=function(e,t){return a.eventFromException(this._options.stackParser,e,t,this._options.attachStacktrace)},e.prototype.eventFromMessage=function(e,t,r){return a.eventFromMessage(this._options.stackParser,e,void 0===t?"info":t,r,this._options.attachStacktrace)},e.prototype.captureUserFeedback=function(e){this._isEnabled()?(e=l.createUserFeedbackEnvelope(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel}),this.sendEnvelope(e)):s.DEBUG_BUILD&&o.logger.warn("SDK not enabled, will not capture user feedback.")},e.prototype._prepareEvent=function(e,t,r){return e.platform=e.platform||"javascript",n.BaseClient.prototype._prepareEvent.call(this,e,t,r)},e.prototype._flushOutcomes=function(){var e=this._clearOutcomes();0===e.length?s.DEBUG_BUILD&&o.logger.log("No outcomes to send"):this._dsn?(s.DEBUG_BUILD&&o.logger.log("Sending outcomes:",e),e=o.createClientReportEnvelope(e,this._options.tunnel&&o.dsnToString(this._dsn)),this.sendEnvelope(e)):s.DEBUG_BUILD&&o.logger.log("No dsn provided, will not send outcomes")},t.BrowserClient=e},"./node_modules/@sentry/browser/cjs/debug-build.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},"./node_modules/@sentry/browser/cjs/eventbuilder.js":function(e,t,r){function n(e,t){e=i(e,t);var r=t&&t.name;return r={type:r,value:t=(t=t&&t.message)?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"},e.length&&(r.stacktrace={frames:e}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function o(e,t){return{exception:{values:[n(e,t)]}}}function i(e,t){var r=t.stacktrace||t.stack||"",n=t&&c.test(t.message)?1:0;t="number"==typeof t.framesToPop?t.framesToPop:0;try{return e(r,n,t)}catch(e){}return[]}function s(e,t,r,s,c){if(l.isErrorEvent(t)&&t.error)return o(e,t.error);if(l.isDOMError(t)||l.isDOMException(t)){if("stack"in t)e=o(e,t);else{var d=t.name||(l.isDOMError(t)?"DOMError":"DOMException");e=a(e,d=t.message?d+": "+t.message:d,r,s),l.addExceptionTypeValue(e,d)}return"code"in t&&(e.tags=Object.assign({},e.tags,{"DOMException.code":""+t.code})),e}if(l.isError(t))return o(e,t);if(l.isPlainObject(t)||l.isEvent(t)){s=(s=u.getClient())&&s.getOptions().normalizeDepth;e:{for(p in t)if(Object.prototype.hasOwnProperty.call(t,p)){var f=t[p];if(f instanceof Error){var p=f;break e}}p=void 0}if(s={__serialized__:l.normalizeToSize(t,s)},p)e={exception:{values:[n(e,p)]},extra:s};else{if(p=l.isEvent(t)?t.constructor.name:c?"UnhandledRejection":"Error",f=l.extractExceptionKeysForMessage(t),c=c?"promise rejection":"exception",l.isErrorEvent(t))t="Event `ErrorEvent` captured as "+c+" with message `"+t.message+"`";else if(l.isEvent(t)){e:{try{var h=Object.getPrototypeOf(t);d=h?h.constructor.name:void 0;break e}catch(e){}d=void 0}t="Event `"+d+"` (type="+t.type+") captured as "+c}else t="Object captured as "+c+" with keys: "+f;t={exception:{values:[{type:p,value:t}]},extra:s},r&&(e=i(e,r)).length&&(t.exception.values[0].stacktrace={frames:e}),e=t}return l.addExceptionMechanism(e,{synthetic:!0}),e}return e=a(e,t,r,s),l.addExceptionTypeValue(e,""+t,void 0),l.addExceptionMechanism(e,{synthetic:!0}),e}function a(e,t,r,n){var o={};return n&&r&&(e=i(e,r)).length&&(o.exception={values:[{value:t,stacktrace:{frames:e}}]}),l.isParameterizedString(t)?(o.logentry={message:t.__sentry_template_string__,params:t.__sentry_template_values__},o):(o.message=t,o)}Object.defineProperty(t,"__esModule",{value:!0});var u=r("./node_modules/@sentry/core/cjs/index.js"),l=r("./node_modules/@sentry/utils/cjs/index.js"),c=/Minified React error #\d+;/i;t.eventFromException=function(e,t,r,n){return e=s(e,t,r&&r.syntheticException||void 0,n),l.addExceptionMechanism(e),e.level="error",r&&r.event_id&&(e.event_id=r.event_id),l.resolvedSyncPromise(e)},t.eventFromMessage=function(e,t,r,n,o){return r=void 0===r?"info":r,(e=a(e,t,n&&n.syntheticException||void 0,o)).level=r,n&&n.event_id&&(e.event_id=n.event_id),l.resolvedSyncPromise(e)},t.eventFromUnknownInput=s,t.exceptionFromError=n},"./node_modules/@sentry/browser/cjs/feedbackAsync.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry-internal/feedback/cjs/index.js"),r=r("./node_modules/@sentry/browser/cjs/utils/lazyLoadIntegration.js"),r=e.buildFeedbackIntegration({lazyLoadIntegration:r.lazyLoadIntegration}),t.feedbackAsyncIntegration=r},"./node_modules/@sentry/browser/cjs/feedbackSync.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/feedback/cjs/index.js");e=r("./node_modules/@sentry/browser/cjs/utils/lazyLoadIntegration.js"),e=n.buildFeedbackIntegration({lazyLoadIntegration:e.lazyLoadIntegration,getModalIntegration:function(){return n.feedbackModalIntegration},getScreenshotIntegration:function(){return n.feedbackScreenshotIntegration}}),t.feedbackSyncIntegration=e},"./node_modules/@sentry/browser/cjs/helpers.js":function(e,t,r){function n(){s++,setTimeout((function(){s--}))}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/core/cjs/index.js"),i=r("./node_modules/@sentry/utils/cjs/index.js"),s=0;t.WINDOW=i.GLOBAL_OBJ,t.ignoreNextOnError=n,t.shouldIgnoreOnError=function(){return 0<s},t.wrap=function e(t,r,s){if(r=void 0===r?{}:r,"function"!=typeof t)return t;try{var a=t.__sentry_wrapped__;if(a)return a;if(i.getOriginalFunction(t))return t}catch(e){return t}a=function(){var a=Array.prototype.slice.call(arguments);try{s&&"function"==typeof s&&s.apply(this,arguments);var u=a.map((function(t){return e(t,r)}));return t.apply(this,u)}catch(e){throw n(),o.withScope((function(t){t.addEventProcessor((function(e){return r.mechanism&&(i.addExceptionTypeValue(e,void 0,void 0),i.addExceptionMechanism(e,r.mechanism)),e.extra=Object.assign({},e.extra,{arguments:a}),e})),o.captureException(e)})),e}};try{for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(a[u]=t[u])}catch(e){}i.markFunctionWrapped(a,t),i.addNonEnumerableProperty(t,"__sentry_wrapped__",a);try{Object.getOwnPropertyDescriptor(a,"name").configurable&&Object.defineProperty(a,"name",{get:function(){return t.name}})}catch(e){}return a}},"./node_modules/@sentry/browser/cjs/index.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/core/cjs/index.js");var n=r("./node_modules/@sentry/browser/cjs/helpers.js"),o=r("./node_modules/@sentry/browser/cjs/client.js"),i=r("./node_modules/@sentry/browser/cjs/transports/fetch.js"),s=r("./node_modules/@sentry/browser/cjs/stack-parsers.js"),a=r("./node_modules/@sentry/browser/cjs/eventbuilder.js"),u=r("./node_modules/@sentry/browser/cjs/userfeedback.js"),l=r("./node_modules/@sentry/browser/cjs/sdk.js"),c=r("./node_modules/@sentry/browser/cjs/integrations/breadcrumbs.js"),d=r("./node_modules/@sentry/browser/cjs/integrations/globalhandlers.js"),f=r("./node_modules/@sentry/browser/cjs/integrations/httpcontext.js"),p=r("./node_modules/@sentry/browser/cjs/integrations/linkederrors.js"),h=r("./node_modules/@sentry/browser/cjs/integrations/browserapierrors.js"),_=r("./node_modules/@sentry/browser/cjs/utils/lazyLoadIntegration.js"),E=r("./node_modules/@sentry/browser/cjs/integrations/reportingobserver.js"),g=r("./node_modules/@sentry/browser/cjs/integrations/httpclient.js"),m=r("./node_modules/@sentry/browser/cjs/integrations/contextlines.js"),y=r("./node_modules/@sentry-internal/replay/cjs/index.js"),S=r("./node_modules/@sentry-internal/replay-canvas/cjs/index.js"),T=r("./node_modules/@sentry/browser/cjs/feedbackAsync.js"),A=r("./node_modules/@sentry/browser/cjs/feedbackSync.js"),b=r("./node_modules/@sentry-internal/feedback/cjs/index.js"),O=r("./node_modules/@sentry/browser/cjs/metrics.js"),I=r("./node_modules/@sentry/browser/cjs/tracing/request.js"),v=r("./node_modules/@sentry/browser/cjs/tracing/browserTracingIntegration.js"),N=r("./node_modules/@sentry/browser/cjs/transports/offline.js");r=r("./node_modules/@sentry/browser/cjs/profiling/integration.js"),t.SDK_VERSION=e.SDK_VERSION,t.SEMANTIC_ATTRIBUTE_SENTRY_OP=e.SEMANTIC_ATTRIBUTE_SENTRY_OP,t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=e.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=e.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=e.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,t.Scope=e.Scope,t.addBreadcrumb=e.addBreadcrumb,t.addEventProcessor=e.addEventProcessor,t.addIntegration=e.addIntegration,t.addTracingExtensions=e.addTracingExtensions,t.captureConsoleIntegration=e.captureConsoleIntegration,t.captureEvent=e.captureEvent,t.captureException=e.captureException,t.captureFeedback=e.captureFeedback,t.captureMessage=e.captureMessage,t.captureSession=e.captureSession,t.close=e.close,t.continueTrace=e.continueTrace,t.createTransport=e.createTransport,t.debugIntegration=e.debugIntegration,t.dedupeIntegration=e.dedupeIntegration,t.endSession=e.endSession,t.extraErrorDataIntegration=e.extraErrorDataIntegration,t.flush=e.flush,t.functionToStringIntegration=e.functionToStringIntegration,t.getActiveSpan=e.getActiveSpan,t.getClient=e.getClient,t.getCurrentHub=e.getCurrentHub,t.getCurrentScope=e.getCurrentScope,t.getGlobalScope=e.getGlobalScope,t.getIsolationScope=e.getIsolationScope,t.getRootSpan=e.getRootSpan,t.getSpanDescendants=e.getSpanDescendants,t.getSpanStatusFromHttpCode=e.getSpanStatusFromHttpCode,t.inboundFiltersIntegration=e.inboundFiltersIntegration,t.isInitialized=e.isInitialized,t.lastEventId=e.lastEventId,t.makeMultiplexedTransport=e.makeMultiplexedTransport,t.moduleMetadataIntegration=e.moduleMetadataIntegration,t.parameterize=e.parameterize,t.registerSpanErrorInstrumentation=e.registerSpanErrorInstrumentation,t.rewriteFramesIntegration=e.rewriteFramesIntegration,t.sessionTimingIntegration=e.sessionTimingIntegration,t.setContext=e.setContext,t.setCurrentClient=e.setCurrentClient,t.setExtra=e.setExtra,t.setExtras=e.setExtras,t.setHttpStatus=e.setHttpStatus,t.setMeasurement=e.setMeasurement,t.setTag=e.setTag,t.setTags=e.setTags,t.setUser=e.setUser,t.spanToBaggageHeader=e.spanToBaggageHeader,t.spanToJSON=e.spanToJSON,t.spanToTraceHeader=e.spanToTraceHeader,t.startInactiveSpan=e.startInactiveSpan,t.startNewTrace=e.startNewTrace,t.startSession=e.startSession,t.startSpan=e.startSpan,t.startSpanManual=e.startSpanManual,t.withActiveSpan=e.withActiveSpan,t.withIsolationScope=e.withIsolationScope,t.withScope=e.withScope,t.zodErrorsIntegration=e.zodErrorsIntegration,t.WINDOW=n.WINDOW,t.BrowserClient=o.BrowserClient,t.makeFetchTransport=i.makeFetchTransport,t.chromeStackLineParser=s.chromeStackLineParser,t.defaultStackLineParsers=s.defaultStackLineParsers,t.defaultStackParser=s.defaultStackParser,t.geckoStackLineParser=s.geckoStackLineParser,t.opera10StackLineParser=s.opera10StackLineParser,t.opera11StackLineParser=s.opera11StackLineParser,t.winjsStackLineParser=s.winjsStackLineParser,t.eventFromException=a.eventFromException,t.eventFromMessage=a.eventFromMessage,t.exceptionFromError=a.exceptionFromError,t.createUserFeedbackEnvelope=u.createUserFeedbackEnvelope,t.captureUserFeedback=l.captureUserFeedback,t.forceLoad=l.forceLoad,t.getDefaultIntegrations=l.getDefaultIntegrations,t.init=l.init,t.onLoad=l.onLoad,t.showReportDialog=l.showReportDialog,t.breadcrumbsIntegration=c.breadcrumbsIntegration,t.globalHandlersIntegration=d.globalHandlersIntegration,t.httpContextIntegration=f.httpContextIntegration,t.linkedErrorsIntegration=p.linkedErrorsIntegration,t.browserApiErrorsIntegration=h.browserApiErrorsIntegration,t.lazyLoadIntegration=_.lazyLoadIntegration,t.reportingObserverIntegration=E.reportingObserverIntegration,t.httpClientIntegration=g.httpClientIntegration,t.contextLinesIntegration=m.contextLinesIntegration,t.getReplay=y.getReplay,t.replayIntegration=y.replayIntegration,t.replayCanvasIntegration=S.replayCanvasIntegration,t.feedbackAsyncIntegration=T.feedbackAsyncIntegration,t.feedbackIntegration=A.feedbackSyncIntegration,t.feedbackSyncIntegration=A.feedbackSyncIntegration,t.getFeedback=b.getFeedback,t.sendFeedback=b.sendFeedback,t.metrics=O.metrics,t.defaultRequestInstrumentationOptions=I.defaultRequestInstrumentationOptions,t.instrumentOutgoingRequests=I.instrumentOutgoingRequests,t.browserTracingIntegration=v.browserTracingIntegration,t.startBrowserTracingNavigationSpan=v.startBrowserTracingNavigationSpan,t.startBrowserTracingPageLoadSpan=v.startBrowserTracingPageLoadSpan,t.makeBrowserOfflineTransport=N.makeBrowserOfflineTransport,t.browserProfilingIntegration=r.browserProfilingIntegration},"./node_modules/@sentry/browser/cjs/integrations/breadcrumbs.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/index.js"),i=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/browser/cjs/debug-build.js"),a=r("./node_modules/@sentry/browser/cjs/helpers.js");e=o.defineIntegration((function(e){e=void 0===e?{}:e;var t=Object.assign({},{console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e);return{name:"Breadcrumbs",setup:function(e){t.console&&i.addConsoleInstrumentationHandler(function(e){return function(t){if(o.getClient()===e){var r={category:"console",data:{arguments:t.args,logger:"console"},level:i.severityLevelFromString(t.level),message:i.safeJoin(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;r.message="Assertion failed: "+(i.safeJoin(t.args.slice(1)," ")||"console.assert"),r.data.arguments=t.args.slice(1)}o.addBreadcrumb(r,{input:t.args,level:t.level})}}}(e)),t.dom&&n.addClickKeypressInstrumentationHandler(function(e,t){return function(r){if(o.getClient()===e){var n="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&1024<a&&(s.DEBUG_BUILD&&i.logger.warn("`dom.maxStringLength` cannot exceed 1024, but a value of "+a+" was configured. Sentry will use 1024 instead."),a=1024),"string"==typeof n&&(n=[n]);try{var u=r.event,l=u&&u.target?u.target:u,c=i.htmlTreeAsString(l,{keyAttrs:n,maxStringLength:a}),d=i.getComponentName(l)}catch(e){c="<unknown>"}0!==c.length&&(c={category:"ui."+r.name,message:c},d&&(c.data={"ui.component_name":d}),o.addBreadcrumb(c,{event:r.event,name:r.name,global:r.global}))}}}(e,t.dom)),t.xhr&&n.addXhrInstrumentationHandler(function(e){return function(t){if(o.getClient()===e){var r=t.startTimestamp,i=t.endTimestamp,s=t.xhr[n.SENTRY_XHR_DATA_KEY];r&&i&&s&&o.addBreadcrumb({category:"xhr",data:{method:s.method,url:s.url,status_code:s.status_code},type:"http"},{xhr:t.xhr,input:s.body,startTimestamp:r,endTimestamp:i})}}}(e)),t.fetch&&i.addFetchInstrumentationHandler(function(e){return function(t){if(o.getClient()===e){var r=t.startTimestamp,n=t.endTimestamp;if(n&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)o.addBreadcrumb({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:r,endTimestamp:n});else{var i=t.response,s=Object.assign({},t.fetchData,{status_code:i&&i.status});o.addBreadcrumb({category:"fetch",data:s,type:"http"},{input:t.args,response:i,startTimestamp:r,endTimestamp:n})}}}}(e)),t.history&&n.addHistoryInstrumentationHandler(function(e){return function(t){if(o.getClient()===e){var r=t.from;t=t.to;var n=i.parseUrl(a.WINDOW.location.href),s=r?i.parseUrl(r):void 0,u=i.parseUrl(t);s&&s.path||(s=n),n.protocol===u.protocol&&n.host===u.host&&(t=u.relative),n.protocol===s.protocol&&n.host===s.host&&(r=s.relative),o.addBreadcrumb({category:"navigation",data:{from:r,to:t}})}}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){o.getClient()===e&&o.addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:i.getEventDescription(t)},{event:t})}}(e))}}})),t.breadcrumbsIntegration=e},"./node_modules/@sentry/browser/cjs/integrations/browserapierrors.js":function(e,t,r){function n(e){return function(){var t=i.getRestArguments.apply(0,arguments);return t[0]=l.wrap(t[0],{mechanism:{data:{function:u.getFunctionName(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function o(e){return function(t){return e.apply(this,[l.wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:u.getFunctionName(e)},handled:!1,type:"instrument"}})])}}function s(e){return function(){var t=i.getRestArguments.apply(0,arguments),r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((function(e){e in r&&"function"==typeof r[e]&&u.fill(r,e,(function(t){var r={mechanism:{data:{function:e,handler:u.getFunctionName(t)},handled:!1,type:"instrument"}},n=u.getOriginalFunction(t);return n&&(r.mechanism.data.handler=u.getFunctionName(n)),l.wrap(t,r)}))})),e.apply(this,t)}}function a(e){var t=l.WINDOW;(t=t[e]&&t[e].prototype)&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(u.fill(t,"addEventListener",(function(t){return function(r,n,o){try{"function"==typeof n.handleEvent&&(n.handleEvent=l.wrap(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:u.getFunctionName(n),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[r,l.wrap(n,{mechanism:{data:{function:"addEventListener",handler:u.getFunctionName(n),target:e},handled:!1,type:"instrument"}}),o])}})),u.fill(t,"removeEventListener",(function(e){return function(t,r,n){try{var o=r&&r.__sentry_wrapped__;o&&e.call(this,t,o,n)}catch(e){}return e.call(this,t,r,n)}})))}Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/core/cjs/index.js");var u=r("./node_modules/@sentry/utils/cjs/index.js"),l=r("./node_modules/@sentry/browser/cjs/helpers.js"),c="EventTarget Window Node ApplicationCache AudioTrackList BroadcastChannel ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen SharedWorker TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".split(" ");r=e.defineIntegration((function(e){e=void 0===e?{}:e;var t=Object.assign({},{XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e);return{name:"BrowserApiErrors",setupOnce:function(){t.setTimeout&&u.fill(l.WINDOW,"setTimeout",n),t.setInterval&&u.fill(l.WINDOW,"setInterval",n),t.requestAnimationFrame&&u.fill(l.WINDOW,"requestAnimationFrame",o),t.XMLHttpRequest&&"XMLHttpRequest"in l.WINDOW&&u.fill(XMLHttpRequest.prototype,"send",s);var e=t.eventTarget;e&&(Array.isArray(e)?e:c).forEach(a)}}})),t.browserApiErrorsIntegration=r},"./node_modules/@sentry/browser/cjs/integrations/contextlines.js":function(e,t,r){function n(e,t,r,n){return e.filename===r&&e.lineno&&t.length?(o.addContextToFrame(t,e,n),e):e}Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/core/cjs/index.js");var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=o.GLOBAL_OBJ;r=e.defineIntegration((function(e){var t=null!=(e=void 0===e?{}:e).frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:function(e){return function(e,t){var r=s.document,a=s.location&&o.stripUrlQueryAndFragment(s.location.href);if(!r||!a)return e;var u=e.exception&&e.exception.values;if(!u||!u.length)return e;if(!(r=r.documentElement.innerHTML))return e;var l=["<!DOCTYPE html>","<html>"].concat(i.arrayFromIterable(r.split("\n")),["</html>"]);return u.forEach((function(e){(e=e.stacktrace)&&e.frames&&(e.frames=e.frames.map((function(e){return n(e,l,a,t)})))})),e}(e,t)}}})),t.applySourceContextToFrame=n,t.contextLinesIntegration=r},"./node_modules/@sentry/browser/cjs/integrations/globalhandlers.js":function(e,t,r){function n(e){a.addGlobalUnhandledRejectionInstrumentationHandler((function(t){var r=i(),n=r.stackParser;r=r.attachStacktrace,s.getClient()!==e||c.shouldIgnoreOnError()||(t=function(e){if(a.isPrimitive(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),(n=a.isPrimitive(t)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}:l.eventFromUnknownInput(n,t,void 0,r,!0)).level="error",s.captureEvent(n,{originalException:t,mechanism:{handled:!1,type:"onunhandledrejection"}}))}))}function o(e){u.DEBUG_BUILD&&a.logger.log("Global Handler attached: "+e)}function i(){var e=s.getClient();return e&&e.getOptions()||{stackParser:function(){return[]},attachStacktrace:!1}}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/core/cjs/index.js"),a=r("./node_modules/@sentry/utils/cjs/index.js"),u=r("./node_modules/@sentry/browser/cjs/debug-build.js"),l=r("./node_modules/@sentry/browser/cjs/eventbuilder.js"),c=r("./node_modules/@sentry/browser/cjs/helpers.js");e=s.defineIntegration((function(e){e=void 0===e?{}:e;var t=Object.assign({},{onerror:!0,onunhandledrejection:!0},e);return{name:"GlobalHandlers",setupOnce:function(){Error.stackTraceLimit=50},setup:function(e){t.onerror&&(function(e){a.addGlobalErrorInstrumentationHandler((function(t){var r=i(),n=r.stackParser,o=r.attachStacktrace;if(s.getClient()===e&&!c.shouldIgnoreOnError()){var u=t.msg;r=t.url;var d=t.line,f=t.column;t=t.error,o=(o=(o=(o=(o=(n=l.eventFromUnknownInput(n,t||u,void 0,o,!1)).exception=n.exception||{}).values=o.values||[])[0]=o[0]||{}).stacktrace=o.stacktrace||{}).frames=o.frames||[],f=isNaN(parseInt(f,10))?void 0:f,d=isNaN(parseInt(d,10))?void 0:d,r=a.isString(r)&&0<r.length?r:a.getLocationHref(),0===o.length&&o.push({colno:f,filename:r,function:a.UNKNOWN_FUNCTION,in_app:!0,lineno:d}),n.level="error",s.captureEvent(n,{originalException:t,mechanism:{handled:!1,type:"onerror"}})}}))}(e),o("onerror")),t.onunhandledrejection&&(n(e),o("onunhandledrejection"))}}})),t.globalHandlersIntegration=e},"./node_modules/@sentry/browser/cjs/integrations/httpclient.js":function(e,t,r){function n(e){return e.split("; ").reduce((function(e,t){var r=i.makeIterator(t.split("="));return t=r.next().value,r=r.next().value,e[t]=r,e}),{})}function o(e,t){f.supportsNativeFetch()&&f.addFetchInstrumentationHandler((function(r){if(d.getClient()===e){var o=r.response,s=i.makeIterator(r.args);r=s.next().value,s=s.next().value,o&&function(e,t,r,o){if(a(e,r.status,r.url)){if(e=!o&&t instanceof Request||t instanceof Request&&t.bodyUsed?t:new Request(t,o),l()){var s=i.makeIterator([{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:r}].map((function(e){var t,r=e.cookieHeader;e=function(e){var t={};return e.forEach((function(e,r){t[r]=e})),t}(e.obj.headers);try{var o=e[r]||e[r.toLowerCase()]||void 0;o&&(t=n(o))}catch(e){p.DEBUG_BUILD&&f.logger.log("Could not extract cookies from header "+r)}return{headers:e,cookies:t}}))),c=s.next().value,h=c.headers;c=c.cookies;var _=s.next().value;s=_.headers,_=_.cookies}r=u({url:e.url,method:e.method,status:r.status,requestHeaders:h,responseHeaders:s,requestCookies:c,responseCookies:_}),d.captureEvent(r)}}(t,r,o,s)}}))}function s(e,t){"XMLHttpRequest"in f.GLOBAL_OBJ&&c.addXhrInstrumentationHandler((function(r){if(d.getClient()===e){var o=(r=r.xhr)[c.SENTRY_XHR_DATA_KEY];if(o){var s=o.method;o=o.request_headers;try{if(a(t,r.status,r.responseURL)){var h;if(l()){try{var _=r.getResponseHeader("Set-Cookie")||r.getResponseHeader("set-cookie")||void 0;_&&(h=n(_))}catch(e){p.DEBUG_BUILD&&f.logger.log("Could not extract cookies from response headers")}try{var E=function(e){return(e=e.getAllResponseHeaders())?e.split("\r\n").reduce((function(e,t){var r=i.makeIterator(t.split(": "));return t=r.next().value,r=r.next().value,e[t]=r,e}),{}):{}}(r)}catch(e){p.DEBUG_BUILD&&f.logger.log("Could not extract headers from response")}var g=o}var m=u({url:r.responseURL,method:s,status:r.status,requestHeaders:g,responseHeaders:E,responseCookies:h});d.captureEvent(m)}}catch(e){p.DEBUG_BUILD&&f.logger.warn("Error while extracting response event form XHR response",e)}}}}))}function a(e,t,r){return function(e,t){return e.some((function(e){return"number"==typeof e?e===t:t>=e[0]&&t<=e[1]}))}(e.failedRequestStatusCodes,t)&&function(e,t){return e.some((function(e){return"string"==typeof e?t.includes(e):e.test(t)}))}(e.failedRequestTargets,r)&&!d.isSentryRequestUrl(r,d.getClient())}function u(e){var t="HTTP Client Error with status code: "+e.status;return t={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:e=(e=e.responseHeaders)&&(e=e["Content-Length"]||e["content-length"])?parseInt(e,10):void 0}}},f.addExceptionMechanism(t,{type:"http.client",handled:!1}),t}function l(){var e=d.getClient();return!!e&&!!e.getOptions().sendDefaultPii}Object.defineProperty(t,"__esModule",{value:!0});var c=r("./node_modules/@sentry-internal/browser-utils/cjs/index.js"),d=r("./node_modules/@sentry/core/cjs/index.js"),f=r("./node_modules/@sentry/utils/cjs/index.js"),p=r("./node_modules/@sentry/browser/cjs/debug-build.js");e=d.defineIntegration((function(e){e=void 0===e?{}:e;var t=Object.assign({},{failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/]},e);return{name:"HttpClient",setup:function(e){o(e,t),s(e,t)}}})),t.httpClientIntegration=e},"./node_modules/@sentry/browser/cjs/integrations/httpcontext.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/core/cjs/index.js");var n=r("./node_modules/@sentry/browser/cjs/helpers.js");r=e.defineIntegration((function(){return{name:"HttpContext",preprocessEvent:function(e){if(n.WINDOW.navigator||n.WINDOW.location||n.WINDOW.document){var t=e.request&&e.request.url||n.WINDOW.location&&n.WINDOW.location.href,r=(n.WINDOW.document||{}).referrer,o=(n.WINDOW.navigator||{}).userAgent;r=Object.assign({},e.request&&e.request.headers,r&&{Referer:r},o&&{"User-Agent":o}),t=Object.assign({},e.request,t&&{url:t},{headers:r}),e.request=t}}}})),t.httpContextIntegration=r},"./node_modules/@sentry/browser/cjs/integrations/linkederrors.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/core/cjs/index.js");var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/browser/cjs/eventbuilder.js");r=e.defineIntegration((function(e){var t=(e=void 0===e?{}:e).limit||5,r=e.key||"cause";return{name:"LinkedErrors",preprocessEvent:function(e,i,s){s=s.getOptions(),n.applyAggregateErrorsToEvent(o.exceptionFromError,s.stackParser,s.maxValueLength,r,t,e,i)}}})),t.linkedErrorsIntegration=r},"./node_modules/@sentry/browser/cjs/integrations/reportingobserver.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js"),o=r("./node_modules/@sentry/utils/cjs/index.js"),s=o.GLOBAL_OBJ,a=new WeakMap;e=n.defineIntegration((function(e){function t(e){if(a.has(n.getClient()))for(var t={},r=(e=i.makeIterator(e)).next();!r.done;t={$jscomp$loop$prop$report$182:t.$jscomp$loop$prop$report$182},r=e.next())t.$jscomp$loop$prop$report$182=r.value,n.withScope(function(e){return function(t){t.setExtra("url",e.$jscomp$loop$prop$report$182.url);var r="ReportingObserver ["+e.$jscomp$loop$prop$report$182.type+"]",o="No details available";if(e.$jscomp$loop$prop$report$182.body){var i,s={};for(i in e.$jscomp$loop$prop$report$182.body)s[i]=e.$jscomp$loop$prop$report$182.body[i];t.setExtra("body",s),o="crash"===e.$jscomp$loop$prop$report$182.type?[(t=e.$jscomp$loop$prop$report$182.body).crashId||"",t.reason||""].join(" ").trim()||o:e.$jscomp$loop$prop$report$182.body.message||o}n.captureMessage(r+": "+o)}}(t))}var r=(e=void 0===e?{}:e).types||["crash","deprecation","intervention"];return{name:"ReportingObserver",setupOnce:function(){o.supportsReportingObserver()&&new s.ReportingObserver(t,{buffered:!0,types:r}).observe()},setup:function(e){a.set(e,!0)}}})),t.reportingObserverIntegration=e},"./node_modules/@sentry/browser/cjs/metrics.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js");t.metrics={increment:function(e,t,r){n.metrics.increment(n.BrowserMetricsAggregator,e,void 0===t?1:t,r)},distribution:function(e,t,r){n.metrics.distribution(n.BrowserMetricsAggregator,e,t,r)},set:function(e,t,r){n.metrics.set(n.BrowserMetricsAggregator,e,t,r)},gauge:function(e,t,r){n.metrics.gauge(n.BrowserMetricsAggregator,e,t,r)},timing:function(e,t,r,o){return n.metrics.timing(n.BrowserMetricsAggregator,e,t,void 0===r?"second":r,o)}}},"./node_modules/@sentry/browser/cjs/profiling/integration.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js"),o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/browser/cjs/debug-build.js"),a=r("./node_modules/@sentry/browser/cjs/profiling/startProfileForSpan.js"),u=r("./node_modules/@sentry/browser/cjs/profiling/utils.js");e=n.defineIntegration((function(){return{name:"BrowserProfiling",setup:function(e){var t=n.getActiveSpan();(t=t&&n.getRootSpan(t))&&u.isAutomatedPageLoadSpan(t)&&u.shouldProfileSpan(t)&&a.startProfileForSpan(t),e.on("spanStart",(function(e){e===n.getRootSpan(e)&&u.shouldProfileSpan(e)&&a.startProfileForSpan(e)})),e.on("beforeEnvelope",(function(e){if(u.getActiveProfilesCount()){var t=u.findProfiledTransactionsFromEnvelope(e);if(t.length){for(var r=[],n=(t=i.makeIterator(t)).next();!n.done;n=t.next()){var a=(n=n.value)&&n.contexts,l=a&&a.profile&&a.profile.profile_id,c=a&&a.profile&&a.profile.start_timestamp;"string"!=typeof l?s.DEBUG_BUILD&&o.logger.log("[Profiling] cannot find profile for a span without a profile context"):l?(a&&a.profile&&delete a.profile,(a=u.takeProfileFromGlobalCache(l))?(n=u.createProfilingEvent(l,c,a,n))&&r.push(n):s.DEBUG_BUILD&&o.logger.log("[Profiling] Could not retrieve profile for span: "+l)):s.DEBUG_BUILD&&o.logger.log("[Profiling] cannot find profile for a span without a profile context")}u.addProfilesToEnvelope(e,r)}}}))}}})),t.browserProfilingIntegration=e},"./node_modules/@sentry/browser/cjs/profiling/startProfileForSpan.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js"),o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/browser/cjs/debug-build.js"),a=r("./node_modules/@sentry/browser/cjs/helpers.js"),u=r("./node_modules/@sentry/browser/cjs/profiling/utils.js");t.startProfileForSpan=function(e){function t(){return i.asyncExecutePromiseGeneratorProgram((function(t){return e&&l?t.return(l.stop().then((function(t){d&&(a.WINDOW.clearTimeout(d),d=void 0),s.DEBUG_BUILD&&o.logger.log("[Profiling] stopped profiling of span: "+n.spanToJSON(e).description),t?u.addProfileToGlobalCache(c,t):s.DEBUG_BUILD&&o.logger.log("[Profiling] profiler returned null profile for: "+n.spanToJSON(e).description,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")})).catch((function(e){s.DEBUG_BUILD&&o.logger.log("[Profiling] error while stopping profiler:",e)}))):t.return()}))}var r;u.isAutomatedPageLoadSpan(e)&&(r=1e3*o.timestampInSeconds());var l=u.startJSSelfProfile();if(l){s.DEBUG_BUILD&&o.logger.log("[Profiling] started profiling span: "+n.spanToJSON(e).description);var c=o.uuid4();n.getCurrentScope().setContext("profile",{profile_id:c,start_timestamp:r});var d=a.WINDOW.setTimeout((function(){s.DEBUG_BUILD&&o.logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",n.spanToJSON(e).description),t()}),u.MAX_PROFILE_DURATION_MS),f=e.end.bind(e);e.end=function(){return e?(t().then((function(){f()}),(function(){f()})),e):f()}}}},"./node_modules/@sentry/browser/cjs/profiling/utils.js":function(e,t,r){function n(e){return"thread_metadata"in e?e:s(e)}function o(e,t,r,o){if("transaction"!==o.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==r)throw new TypeError("Cannot construct profiling event envelope without a valid profile. Got "+r+" instead.");var i=o&&o.contexts&&o.contexts.trace&&o.contexts.trace.trace_id;"string"==typeof i&&32!==i.length&&d.DEBUG_BUILD&&c.logger.log("[Profiling] Invalid traceId: "+i+" on profiled event"),i="string"!=typeof i?"":i;var s=n(r);t=t||("number"==typeof o.start_timestamp?1e3*o.start_timestamp:1e3*c.timestampInSeconds());var u="number"==typeof o.timestamp?1e3*o.timestamp:1e3*c.timestampInSeconds();return{event_id:e,timestamp:new Date(t).toISOString(),platform:"javascript",version:"1",release:o.release||"",environment:o.environment||l.DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:f.WINDOW.navigator.userAgent},os:{name:p,version:h,build_number:E},device:{locale:m,model:g,manufacturer:E,architecture:_,is_emulator:!1},debug_meta:{images:a(r.resources)},profile:s,transactions:[{name:o.transaction||"",id:o.event_id||c.uuid4(),trace_id:i,active_thread_id:"0",relative_start_ns:"0",relative_end_ns:(1e6*(u-t)).toFixed(0)}]}}function s(e){var t=void 0,r=0,n={};if(n={samples:[],stacks:[],frames:[],thread_metadata:(n[0]={name:"main"},n)},!e.samples.length)return n;var o=e.samples[0].timestamp,i="number"==typeof performance.timeOrigin?performance.timeOrigin:c.browserPerformanceTimeOrigin||0;i-=c.browserPerformanceTimeOrigin||i;for(var s=0;s<e.samples.length;s++){var a=e.samples[s];if(void 0===a.stackId)void 0===t&&(t=r,n.stacks[t]=[],r++),n.samples[s]={elapsed_since_start_ns:(1e6*(a.timestamp+i-o)).toFixed(0),stack_id:t,thread_id:"0"};else{for(var u=e.stacks[a.stackId],l=[];u;){l.push(u.frameId);var d=e.frames[u.frameId];void 0===n.frames[u.frameId]&&(n.frames[u.frameId]={function:d.name,abs_path:"number"==typeof d.resourceId?e.resources[d.resourceId]:void 0,lineno:d.line,colno:d.column}),u=void 0===u.parentId?void 0:e.stacks[u.parentId]}a={elapsed_since_start_ns:(1e6*(a.timestamp+i-o)).toFixed(0),stack_id:r,thread_id:"0"},n.stacks[r]=l,n.samples[s]=a,r++}}return n}function a(e){var t=c.GLOBAL_OBJ._sentryDebugIds;if(!t)return[];var r=l.getClient(),n=(r=r&&r.getOptions())&&r.stackParser;if(!n)return[];if(r=y.get(n))var o=r;else o=new Map,y.set(n,o);r=Object.keys(t).reduce((function(e,r){var i=o.get(r);i||(i=n(r),o.set(r,i));for(var s=i.length-1;0<=s;s--){var a=i[s],u=a&&a.filename;if(a&&u){e[u]=t[r];break}}return e}),{});for(var s=[],a=(e=i.makeIterator(e)).next();!a.done;a=e.next())(a=a.value)&&r[a]&&s.push({type:"sourcemap",code_file:a,debug_id:r[a]});return s}function u(e){return"number"!=typeof e&&"boolean"!=typeof e||"number"==typeof e&&isNaN(e)?(d.DEBUG_BUILD&&c.logger.warn("[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(e)+" of type "+JSON.stringify(typeof e)+"."),!1):!0===e||!1===e||!(0>e||1<e)||(d.DEBUG_BUILD&&c.logger.warn("[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got "+e+"."),!1)}Object.defineProperty(t,"__esModule",{value:!0});var l=r("./node_modules/@sentry/core/cjs/index.js"),c=r("./node_modules/@sentry/utils/cjs/index.js"),d=r("./node_modules/@sentry/browser/cjs/debug-build.js"),f=r("./node_modules/@sentry/browser/cjs/helpers.js"),p="",h="",_="",E=f.WINDOW.navigator&&f.WINDOW.navigator.userAgent||"",g="",m=f.WINDOW.navigator&&f.WINDOW.navigator.language||f.WINDOW.navigator&&f.WINDOW.navigator.languages&&f.WINDOW.navigator.languages[0]||"";"object"==typeof(e=f.WINDOW.navigator&&f.WINDOW.navigator.userAgentData)&&null!==e&&"getHighEntropyValues"in e&&e.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((function(e){p=e.platform||"",_=e.architecture||"",g=e.model||"",h=e.platformVersion||"",e.fullVersionList&&0<e.fullVersionList.length&&(e=e.fullVersionList[e.fullVersionList.length-1],E=e.brand+" "+e.version)})).catch((function(e){}));var y=new WeakMap,S=!1,T=new Map;t.MAX_PROFILE_DURATION_MS=3e4,t.addProfileToGlobalCache=function(e,t){T.set(e,t),30<T.size&&(e=T.keys().next().value,T.delete(e))},t.addProfilesToEnvelope=function(e,t){if(!t.length)return e;for(var r=(t=i.makeIterator(t)).next();!r.done;r=t.next())e[1].push([{type:"profile"},r.value]);return e},t.applyDebugMetadata=a,t.convertJSSelfProfileToSampledFormat=s,t.createProfilePayload=o,t.createProfilingEvent=function(e,t,r,n){if(2>r.samples.length){d.DEBUG_BUILD&&c.logger.log("[Profiling] Discarding profile because it contains less than 2 samples");var i=!1}else r.frames.length?i=!0:(d.DEBUG_BUILD&&c.logger.log("[Profiling] Discarding profile because it contains no frames"),i=!1);return i?o(e,t,r,n):null},t.enrichWithThreadInformation=n,t.findProfiledTransactionsFromEnvelope=function(e){var t=[];return c.forEachEnvelopeItem(e,(function(e,r){if("transaction"===r)for(r=1;r<e.length;r++){var n=e[r];n&&n.contexts&&n.contexts.profile&&n.contexts.profile.profile_id&&t.push(e[r])}})),t},t.getActiveProfilesCount=function(){return T.size},t.isAutomatedPageLoadSpan=function(e){return"pageload"===l.spanToJSON(e).op},t.isValidSampleRate=u,t.shouldProfileSpan=function(e){return S?(d.DEBUG_BUILD&&c.logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1):e.isRecording()?(e=(e=l.getClient())&&e.getOptions())?u(e=e.profilesSampleRate)?e?!0===e||Math.random()<e||(d.DEBUG_BUILD&&c.logger.log("[Profiling] Discarding profile because it's not included in the random sample (sampling rate = "+Number(e)+")"),!1):(d.DEBUG_BUILD&&c.logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(d.DEBUG_BUILD&&c.logger.warn("[Profiling] Discarding profile because of invalid sample rate."),!1):(d.DEBUG_BUILD&&c.logger.log("[Profiling] Profiling disabled, no options found."),!1):(d.DEBUG_BUILD&&c.logger.log("[Profiling] Discarding profile because transaction was not sampled."),!1)},t.startJSSelfProfile=function(){var e=f.WINDOW.Profiler;if("function"!=typeof e)d.DEBUG_BUILD&&c.logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");else try{return new e({sampleInterval:10,maxBufferSize:3e3})}catch(e){d.DEBUG_BUILD&&(c.logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),c.logger.log("[Profiling] Disabling profiling for current user session.")),S=!0}},t.takeProfileFromGlobalCache=function(e){var t=T.get(e);return t&&T.delete(e),t}},"./node_modules/@sentry/browser/cjs/sdk.js":function(e,t,r){function n(e){return[o.inboundFiltersIntegration(),o.functionToStringIntegration(),d.browserApiErrorsIntegration(),c.breadcrumbsIntegration(),f.globalHandlersIntegration(),h.linkedErrorsIntegration(),o.dedupeIntegration(),p.httpContextIntegration()]}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/core/cjs/index.js"),i=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry-internal/browser-utils/cjs/index.js"),a=r("./node_modules/@sentry/browser/cjs/client.js"),u=r("./node_modules/@sentry/browser/cjs/debug-build.js"),l=r("./node_modules/@sentry/browser/cjs/helpers.js"),c=r("./node_modules/@sentry/browser/cjs/integrations/breadcrumbs.js"),d=r("./node_modules/@sentry/browser/cjs/integrations/browserapierrors.js"),f=r("./node_modules/@sentry/browser/cjs/integrations/globalhandlers.js"),p=r("./node_modules/@sentry/browser/cjs/integrations/httpcontext.js"),h=r("./node_modules/@sentry/browser/cjs/integrations/linkederrors.js"),_=r("./node_modules/@sentry/browser/cjs/stack-parsers.js"),E=r("./node_modules/@sentry/browser/cjs/transports/fetch.js");t.captureUserFeedback=function(e){var t=o.getClient();t&&t.captureUserFeedback(e)},t.forceLoad=function(){},t.getDefaultIntegrations=n,t.init=function(e){if(e=function(e){e=void 0===e?{}:e;var t={defaultIntegrations:n(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:l.WINDOW.SENTRY_RELEASE&&l.WINDOW.SENTRY_RELEASE.id?l.WINDOW.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return Object.assign({},t,e)}(e=void 0===e?{}:e),function(){var e=l.WINDOW;e=(e=e[e.chrome?"chrome":"browser"])&&e.runtime&&e.runtime.id;var t=l.WINDOW.location&&l.WINDOW.location.href||"",r=["chrome-extension:","moz-extension:","ms-browser-extension:"];return r=!!e&&l.WINDOW===l.WINDOW.top&&r.some((function(e){return t.startsWith(e+"//")})),!!e&&!r}())i.consoleSandbox((function(){console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));else{u.DEBUG_BUILD&&(i.supportsFetch()||i.logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));var t=Object.assign({},e,{stackParser:i.stackParserFromStackParserOptions(e.stackParser||_.defaultStackParser),integrations:o.getIntegrationsToSetup(e),transport:e.transport||E.makeFetchTransport});o.initAndBind(a.BrowserClient,t),e.autoSessionTracking&&(void 0===l.WINDOW.document?u.DEBUG_BUILD&&i.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported."):(o.startSession({ignoreDuration:!0}),o.captureSession(),s.addHistoryInstrumentationHandler((function(e){var t=e.from;e=e.to,void 0!==t&&t!==e&&(o.startSession({ignoreDuration:!0}),o.captureSession())}))))}},t.onLoad=function(e){e()},t.showReportDialog=function(e){if(e=void 0===e?{}:e,l.WINDOW.document){var t=o.getCurrentScope(),r=t.getClient();if(r=r&&r.getDsn()){t&&(e.user=Object.assign({},t.getUser(),e.user)),!e.eventId&&(t=o.lastEventId())&&(e.eventId=t),(t=l.WINDOW.document.createElement("script")).async=!0,t.crossOrigin="anonymous",t.src=o.getReportDialogEndpoint(r,e),e.onLoad&&(t.onload=e.onLoad);var n=e.onClose;if(n){var s=function(e){if("__sentry_reportdialog_closed__"===e.data)try{n()}finally{l.WINDOW.removeEventListener("message",s)}};l.WINDOW.addEventListener("message",s)}(e=l.WINDOW.document.head||l.WINDOW.document.body)?e.appendChild(t):u.DEBUG_BUILD&&i.logger.error("Not injecting report dialog. No injection point found in HTML")}else u.DEBUG_BUILD&&i.logger.error("DSN not configured for showReportDialog call")}else u.DEBUG_BUILD&&i.logger.error("Global document not defined in showReportDialog call")}},"./node_modules/@sentry/browser/cjs/stack-parsers.js":function(e,t,r){function n(e,t,r,n){return e={filename:e,function:"<anonymous>"===t?o.UNKNOWN_FUNCTION:t,in_app:!0},void 0!==r&&(e.lineno=r),void 0!==n&&(e.colno=n),e}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/\((\S*)(?::(\d+))(?::(\d+))\)/,u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,d=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,f=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,p=[e=[30,function(e){if(e=s.exec(e)){if(e[2]&&0===e[2].indexOf("eval")){var t=a.exec(e[2]);t&&(e[2]=t[1],e[3]=t[2],e[4]=t[3])}var r=i.makeIterator(_(e[1]||o.UNKNOWN_FUNCTION,e[2]));return t=r.next().value,n(r=r.next().value,t,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],r=[50,function(e){if(e=u.exec(e)){if(e[3]&&-1<e[3].indexOf(" > eval")){var t=l.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}var r=e[3];return t=e[1]||o.UNKNOWN_FUNCTION,t=(r=i.makeIterator(_(t,r))).next().value,n(r=r.next().value,t,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]],h=o.createStackParser.apply(o,i.arrayFromIterable(p)),_=function(e,t){var r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:o.UNKNOWN_FUNCTION,r?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]};t.chromeStackLineParser=e,t.defaultStackLineParsers=p,t.defaultStackParser=h,t.geckoStackLineParser=r,t.opera10StackLineParser=[10,function(e){return(e=d.exec(e))?n(e[2],e[3]||o.UNKNOWN_FUNCTION,+e[1]):void 0}],t.opera11StackLineParser=[20,function(e){return(e=f.exec(e))?n(e[5],e[3]||e[4]||o.UNKNOWN_FUNCTION,+e[1],+e[2]):void 0}],t.winjsStackLineParser=[40,function(e){return(e=c.exec(e))?n(e[2],e[1]||o.UNKNOWN_FUNCTION,+e[3],e[4]?+e[4]:void 0):void 0}]},"./node_modules/@sentry/browser/cjs/tracing/backgroundtab.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js"),o=r("./node_modules/@sentry/utils/cjs/index.js"),i=r("./node_modules/@sentry/browser/cjs/debug-build.js"),s=r("./node_modules/@sentry/browser/cjs/helpers.js");t.registerBackgroundTabDetection=function(){s.WINDOW&&s.WINDOW.document?s.WINDOW.document.addEventListener("visibilitychange",(function(){var e=n.getActiveSpan();if(e&&(e=n.getRootSpan(e),s.WINDOW.document.hidden&&e)){var t=n.spanToJSON(e),r=t.op;t=t.status,i.DEBUG_BUILD&&o.logger.log("[Tracing] Transaction: cancelled -> since tab moved to the background, op: "+r),t||e.setStatus({code:n.SPAN_STATUS_ERROR,message:"cancelled"}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}})):i.DEBUG_BUILD&&o.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}},"./node_modules/@sentry/browser/cjs/tracing/browserTracingIntegration.js":function(e,t,r){function n(e,t,r){return e.emit("startPageLoadSpan",t,r),a.getCurrentScope().setTransactionName(t.name),"pageload"===((e=a.getActiveSpan())&&a.spanToJSON(e).op)?e:void 0}function o(e,t){return a.getIsolationScope().setPropagationContext(u.generatePropagationContext()),a.getCurrentScope().setPropagationContext(u.generatePropagationContext()),e.emit("startNavigationSpan",t),a.getCurrentScope().setTransactionName(t.name),"navigation"===((e=a.getActiveSpan())&&a.spanToJSON(e).op)?e:void 0}function i(e){return(e=u.getDomElement("meta[name="+e+"]"))?e.getAttribute("content"):void 0}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry-internal/browser-utils/cjs/index.js"),a=r("./node_modules/@sentry/core/cjs/index.js"),u=r("./node_modules/@sentry/utils/cjs/index.js"),l=r("./node_modules/@sentry/browser/cjs/debug-build.js"),c=r("./node_modules/@sentry/browser/cjs/helpers.js"),d=r("./node_modules/@sentry/browser/cjs/tracing/backgroundtab.js"),f=r("./node_modules/@sentry/browser/cjs/tracing/request.js"),p=Object.assign({},a.TRACING_DEFAULTS,{instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{}},f.defaultRequestInstrumentationOptions);t.BROWSER_TRACING_INTEGRATION_ID="BrowserTracing",t.browserTracingIntegration=function(e){function t(e,t){function r(){["interactive","complete"].includes(c.WINDOW.document.readyState)&&e.emit("idleSpanEnableAutoFinish",u)}var n="pageload"===t.op,o=E?E(t):t,i=o.attributes||{};t.name!==o.name&&(i[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",o.attributes=i),R.name=o.name,R.source=i[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];var u=a.startIdleSpan(o,{idleTimeout:g,finalTimeout:m,childSpanTimeout:y,disableAutoFinish:n,beforeSpanEnd:function(e){N(),s.addPerformanceEntries(e)}});return n&&c.WINDOW.document&&(c.WINDOW.document.addEventListener("readystatechange",(function(){r()})),r()),u}e=void 0===e?{}:e,a.registerSpanErrorInstrumentation();var r=(e=Object.assign({},p,e)).enableInp,h=e.enableLongTask,_=e._experiments.enableInteractions,E=e.beforeStartSpan,g=e.idleTimeout,m=e.finalTimeout,y=e.childSpanTimeout,S=e.markBackgroundSpan,T=e.traceFetch,A=e.traceXHR,b=e.shouldCreateSpanForRequest,O=e.enableHTTPTimings,I=e.instrumentPageLoad,v=e.instrumentNavigation,N=s.startTrackingWebVitals();r&&s.startTrackingINP(),h&&s.startTrackingLongTasks(),_&&s.startTrackingInteractions();var R={name:void 0,source:void 0};return{name:"BrowserTracing",afterAllSetup:function(e){var r,p=c.WINDOW.location&&c.WINDOW.location.href;if(e.on("startNavigationSpan",(function(n){a.getClient()===e&&(r&&(l.DEBUG_BUILD&&u.logger.log("[Tracing] Finishing current root span with op: "+a.spanToJSON(r).op),r.end()),r=t(e,Object.assign({},{op:"navigation"},n)))})),e.on("startPageLoadSpan",(function(n,o){if(o=void 0===o?{}:o,a.getClient()===e){r&&(l.DEBUG_BUILD&&u.logger.log("[Tracing] Finishing current root span with op: "+a.spanToJSON(r).op),r.end());var s=o.sentryTrace||i("sentry-trace");o=o.baggage||i("baggage"),s=u.propagationContextFromHeaders(s,o),a.getCurrentScope().setPropagationContext(s),r=t(e,Object.assign({},{op:"pageload"},n))}})),e.on("spanEnd",(function(e){var t=a.spanToJSON(e).op;if(e===a.getRootSpan(e)&&("navigation"===t||"pageload"===t)){var r=(t=a.getCurrentScope()).getPropagationContext();t.setPropagationContext(Object.assign({},r,{sampled:void 0!==r.sampled?r.sampled:a.spanIsSampled(e),dsc:r.dsc||a.getDynamicSamplingContextFromSpan(e)}))}})),c.WINDOW.location){if(I){var h={};n(e,{name:c.WINDOW.location.pathname,startTime:u.browserPerformanceTimeOrigin?u.browserPerformanceTimeOrigin/1e3:void 0,attributes:(h[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="url",h[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.pageload.browser",h)})}v&&s.addHistoryInstrumentationHandler((function(t){var r=t.to;void 0===(t=t.from)&&p&&-1!==p.indexOf(r)?p=void 0:t!==r&&(p=void 0,r={},o(e,{name:c.WINDOW.location.pathname,attributes:(r[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="url",r[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.navigation.browser",r)}))}))}S&&d.registerBackgroundTabDetection(),_&&function(e,t,r,n){var o;c.WINDOW.document&&addEventListener("click",(function(){var i=a.getActiveSpan();(i=i&&a.getRootSpan(i))&&(i=a.spanToJSON(i).op,["navigation","pageload"].includes(i))?l.DEBUG_BUILD&&u.logger.warn("[Tracing] Did not create ui.action.click span because a pageload or navigation span is in progress."):(o&&(o.setAttribute(a.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,"interactionInterrupted"),o.end(),o=void 0),n.name?(i={},o=a.startIdleSpan({name:n.name,op:"ui.action.click",attributes:(i[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]=n.source||"url",i)},{idleTimeout:e,finalTimeout:t,childSpanTimeout:r})):l.DEBUG_BUILD&&u.logger.warn("[Tracing] Did not create ui.action.click transaction because _latestRouteName is missing."))}),{once:!1,capture:!0})}(g,m,y,R),f.instrumentOutgoingRequests({traceFetch:T,traceXHR:A,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:O})}}},t.getMetaContent=i,t.startBrowserTracingNavigationSpan=o,t.startBrowserTracingPageLoadSpan=n},"./node_modules/@sentry/browser/cjs/tracing/request.js":function(e,t,r){function n(e){var t=(d.spanToJSON(e).data||{}).url;if(t&&"string"==typeof t)var r=c.addPerformanceInstrumentationHandler("resource",(function(n){n.entries.forEach((function(n){"resource"===n.entryType&&"initiatorType"in n&&"string"==typeof n.nextHopProtocol&&("fetch"===n.initiatorType||"xmlhttprequest"===n.initiatorType)&&n.name.endsWith(t)&&(function(e){var t=o(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",t.version],["network.protocol.name",t.name]),f.browserPerformanceTimeOrigin?[].concat(i.arrayFromIterable(r),[["http.request.redirect_start",s(e.redirectStart)],["http.request.fetch_start",s(e.fetchStart)],["http.request.domain_lookup_start",s(e.domainLookupStart)],["http.request.domain_lookup_end",s(e.domainLookupEnd)],["http.request.connect_start",s(e.connectStart)],["http.request.secure_connection_start",s(e.secureConnectionStart)],["http.request.connection_end",s(e.connectEnd)],["http.request.request_start",s(e.requestStart)],["http.request.response_start",s(e.responseStart)],["http.request.response_end",s(e.responseEnd)]]):r}(n).forEach((function(t){return e.setAttribute.apply(e,i.arrayFromIterable(t))})),setTimeout(r))}))}))}function o(e){for(var t="unknown",r="unknown",n="",o=i.makeIterator(e),s=o.next();!s.done;s=o.next()){if("/"===(s=s.value)){t=(r=i.makeIterator(e.split("/"))).next().value,r=r.next().value;break}if(!isNaN(Number(s))){t="h"===n?"http":n,r=e.split(n)[1];break}n+=s}return n===e&&(t=n),{name:t,version:r}}function s(e){return((f.browserPerformanceTimeOrigin||performance.timeOrigin)+(void 0===e?0:e))/1e3}function a(e,t){var r=p.WINDOW.location&&p.WINDOW.location.href;if(r){try{var n=new URL(e,r),o=new URL(r).origin}catch(e){return!1}return e=n.origin===o,t?f.stringMatchesSomePattern(n.toString(),t)||e&&f.stringMatchesSomePattern(n.pathname,t):e}return n=!!e.match(/^\/(?!\/)/),t?f.stringMatchesSomePattern(e,t):n}function u(e,t,r,n){var o=e.xhr,i=o&&o[c.SENTRY_XHR_DATA_KEY];if(o&&!o.__sentry_own_request__&&i){if(t=d.hasTracingEnabled()&&t(i.url),!e.endTimestamp||!t){var s=l(i.url),a=s?f.parseUrl(s).host:void 0;e=!!d.getActiveSpan();var u={};if(t=t&&e?d.startInactiveSpan({name:i.method+" "+i.url,attributes:(u.type="xhr",u["http.method"]=i.method,u["http.url"]=s,u.url=i.url,u["server.address"]=a,u[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.http.browser",u[d.SEMANTIC_ATTRIBUTE_SENTRY_OP]="http.client",u)}):new d.SentryNonRecordingSpan,o.__sentry_xhr_span_id__=t.spanContext().spanId,n[o.__sentry_xhr_span_id__]=t,n=d.getClient(),o.setRequestHeader&&r(i.url)&&n){i=d.hasTracingEnabled()&&e?t:void 0,r=d.getCurrentScope(),e=d.getIsolationScope(),a=Object.assign({},e.getPropagationContext(),r.getPropagationContext()),r=a.traceId,e=a.spanId,s=a.sampled,a=a.dsc,e=i&&d.hasTracingEnabled()?d.spanToTraceHeader(i):f.generateSentryTraceHeader(r,e,s),i=f.dynamicSamplingContextToSentryBaggageHeader(a||(i?d.getDynamicSamplingContextFromSpan(i):d.getDynamicSamplingContextFromClient(r,n)));try{o.setRequestHeader("sentry-trace",e),i&&o.setRequestHeader(f.BAGGAGE_HEADER_NAME,i)}catch(e){}}return t}(o=o.__sentry_xhr_span_id__)&&(t=n[o])&&void 0!==i.status_code&&(d.setHttpStatus(t,i.status_code),t.end(),delete n[o])}}function l(e){try{return new URL(e,p.WINDOW.location.origin).href}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0});var c=r("./node_modules/@sentry-internal/browser-utils/cjs/index.js"),d=r("./node_modules/@sentry/core/cjs/index.js"),f=r("./node_modules/@sentry/utils/cjs/index.js"),p=r("./node_modules/@sentry/browser/cjs/helpers.js"),h={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};t.defaultRequestInstrumentationOptions=h,t.extractNetworkProtocol=o,t.instrumentOutgoingRequests=function(e){var t=(e=Object.assign({},{traceFetch:h.traceFetch,traceXHR:h.traceXHR},e)).traceXHR,r=e.shouldCreateSpanForRequest,o=e.enableHTTPTimings,i=e.tracePropagationTargets,s="function"==typeof r?r:function(e){return!0},p=function(e){return a(e,i)},_={};e.traceFetch&&f.addFetchInstrumentationHandler((function(e){var t=d.instrumentFetchRequest(e,s,p,_);if(t){var r=(e=l(e.fetchData.url))?f.parseUrl(e).host:void 0;t.setAttributes({"http.url":e,"server.address":r})}o&&t&&n(t)})),t&&c.addXhrInstrumentationHandler((function(e){e=u(e,s,p,_),o&&e&&n(e)}))},t.shouldAttachHeaders=a,t.xhrCallback=u},"./node_modules/@sentry/browser/cjs/transports/fetch.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry-internal/browser-utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/index.js"),i=r("./node_modules/@sentry/utils/cjs/index.js");t.makeFetchTransport=function(e,t){t=void 0===t?n.getNativeImplementation("fetch"):t;var r=0,s=0;return o.createTransport(e,(function(o){var a=o.body.length;if(r+=a,s++,o=Object.assign({},{body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:6e4>=r&&15>s},e.fetchOptions),!t)return n.clearCachedImplementation("fetch"),i.rejectedSyncPromise("No fetch implementation available");try{return t(e.url,o).then((function(e){return r-=a,s--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}}))}catch(e){return n.clearCachedImplementation("fetch"),r-=a,s--,i.rejectedSyncPromise(e)}}))}},"./node_modules/@sentry/browser/cjs/transports/offline.js":function(e,t,r){function n(e){return new Promise((function(t,r){e.oncomplete=e.onsuccess=function(){return t(e.result)},e.onabort=e.onerror=function(){return r(e.error)}}))}function o(e,t){var r=indexedDB.open(e);r.onupgradeneeded=function(){return r.result.createObjectStore(t)};var o=n(r);return function(e){return o.then((function(r){return e(r.transaction(t,"readwrite").objectStore(t))}))}}function s(e,t,r){return e((function(e){return n(e.getAllKeys()).then((function(o){if(!(o.length>=r))return e.put(t,Math.max.apply(Math,[].concat(i.arrayFromIterable(o),[0]))+1),n(e.transaction)}))}))}function a(e,t,r){return e((function(e){return n(e.getAllKeys()).then((function(o){if(!(o.length>=r))return e.put(t,Math.min.apply(Math,[].concat(i.arrayFromIterable(o),[0]))-1),n(e.transaction)}))}))}function u(e){return e((function(e){return n(e.getAllKeys()).then((function(t){if(0!==t.length)return n(e.get(t[0])).then((function(r){return e.delete(t[0]),n(e.transaction).then((function(){return r}))}))}))}))}function l(e){function t(){return null==r&&(r=o(e.dbName||"sentry-offline",e.storeName||"queue")),r}var r;return{push:function(r){var n;return i.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return o.setCatchFinallyBlocks(2),o.yield(d.serializeEnvelope(r),4);case 4:return n=o.yieldResult,o.yield(s(t(),n,e.maxQueueSize||30),5);case 5:o.leaveTryBlock(0);break;case 2:o.enterCatchBlock(),o.jumpToEnd()}}))},unshift:function(r){var n;return i.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return o.setCatchFinallyBlocks(2),o.yield(d.serializeEnvelope(r),4);case 4:return n=o.yieldResult,o.yield(a(t(),n,e.maxQueueSize||30),5);case 5:o.leaveTryBlock(0);break;case 2:o.enterCatchBlock(),o.jumpToEnd()}}))},shift:function(){var e;return i.asyncExecutePromiseGeneratorProgram((function(r){switch(r.nextAddress){case 1:return r.setCatchFinallyBlocks(2),r.yield(u(t()),4);case 4:if(e=r.yieldResult)return r.return(d.parseEnvelope(e));r.leaveTryBlock(3);break;case 2:r.enterCatchBlock();case 3:return r.return(void 0)}}))}}}Object.defineProperty(t,"__esModule",{value:!0});var c=r("./node_modules/@sentry/core/cjs/index.js"),d=r("./node_modules/@sentry/utils/cjs/index.js"),f=r("./node_modules/@sentry/browser/cjs/transports/fetch.js");t.createStore=o,t.makeBrowserOfflineTransport=function(e){return e=void 0===e?f.makeFetchTransport:e,function(e){return function(t){return e(Object.assign({},t,{createStore:l}))}}(c.makeOfflineTransport(e))},t.push=s,t.shift=u,t.unshift=a},"./node_modules/@sentry/browser/cjs/userfeedback.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");t.createUserFeedbackEnvelope=function(e,t){var r=t.metadata,o=t.tunnel;return t=t.dsn,r=Object.assign({},{event_id:e.event_id,sent_at:(new Date).toISOString()},r&&r.sdk&&{sdk:{name:r.sdk.name,version:r.sdk.version}},!!o&&!!t&&{dsn:n.dsnToString(t)}),n.createEnvelope(r,[[{type:"user_report"},e]])}},"./node_modules/@sentry/browser/cjs/utils/lazyLoadIntegration.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/index.js"),o=r("./node_modules/@sentry/browser/cjs/helpers.js"),s={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling"},a=o.WINDOW;t.lazyLoadIntegration=function(e){var t,r,u,l,c,d,f;return i.asyncExecutePromiseGeneratorProgram((function(i){switch(i.nextAddress){case 1:if(t=s[e],r=a.Sentry=a.Sentry||{},!t)throw Error("Cannot lazy load integration: "+e);return"function"==typeof(u=r[e])?i.return(u):(l=function(e){var t=n.getClient();return t=t&&t.getOptions(),new URL("/"+n.SDK_VERSION+"/"+e+".min.js",t&&t.cdnBaseUrl||"https://browser.sentry-cdn.com").toString()}(t),(c=o.WINDOW.document.createElement("script")).src=l,c.crossOrigin="anonymous",d=new Promise((function(e,t){c.addEventListener("load",(function(){return e()})),c.addEventListener("error",t)})),o.WINDOW.document.body.appendChild(c),i.setCatchFinallyBlocks(2),i.yield(d,4));case 4:i.leaveTryBlock(3);break;case 2:throw i.enterCatchBlock(),Error("Error when loading integration: "+e);case 3:if("function"!=typeof(f=r[e]))throw Error("Could not load integration: "+e);return i.return(f)}}))}},"./node_modules/@sentry/core/cjs/api.js":function(e,t,r){function n(e){return(e.protocol?e.protocol+":":"")+"//"+e.host+(e.port?":"+e.port:"")+(e.path?"/"+e.path:"")+"/api/"}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js");t.getEnvelopeEndpointWithUrlEncodedAuth=function(e,t,r){return t||""+n(e)+e.projectId+"/envelope/?"+o.urlEncode(Object.assign({},{sentry_key:e.publicKey,sentry_version:"7"},r&&{sentry_client:r.name+"/"+r.version}))},t.getReportDialogEndpoint=function(e,t){var r=o.makeDsn(e);if(!r)return"";for(var i in e=n(r)+"embed/error-page/",r="dsn="+o.dsnToString(r),t)if("dsn"!==i&&"onClose"!==i)if("user"===i){var s=t.user;s&&(s.name&&(r+="&name="+encodeURIComponent(s.name)),s.email&&(r+="&email="+encodeURIComponent(s.email)))}else r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(t[i]);return e+"?"+r}},"./node_modules/@sentry/core/cjs/asyncContext/index.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/carrier.js"),o=r("./node_modules/@sentry/core/cjs/asyncContext/stackStrategy.js");t.getAsyncContextStrategy=function(e){return(e=n.getSentryCarrier(e)).acs?e.acs:o.getStackAsyncContextStrategy()},t.setAsyncContextStrategy=function(e){var t=n.getMainCarrier();n.getSentryCarrier(t).acs=e}},"./node_modules/@sentry/core/cjs/asyncContext/stackStrategy.js":function(e,t,r){function n(){var e=c.getMainCarrier();return(e=c.getSentryCarrier(e)).stack=e.stack||new d(u.getDefaultCurrentScope(),u.getDefaultIsolationScope())}function o(e){return n().withScope(e)}function i(e,t){var r=n();return r.withScope((function(){return r.getStackTop().scope=e,t(e)}))}function s(e){return n().withScope((function(){return e(n().getIsolationScope())}))}Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/@sentry/utils/cjs/index.js"),u=r("./node_modules/@sentry/core/cjs/defaultScopes.js"),l=r("./node_modules/@sentry/core/cjs/scope.js"),c=r("./node_modules/@sentry/core/cjs/carrier.js"),d=function(e,t){e=e||new l.Scope,t=t||new l.Scope,this._stack=[{scope:e}],this._isolationScope=t};d.prototype.withScope=function(e){var t=this,r=this._pushScope();try{var n=e(r)}catch(e){throw this._popScope(),e}return a.isThenable(n)?n.then((function(e){return t._popScope(),e}),(function(e){throw t._popScope(),e})):(this._popScope(),n)},d.prototype.getClient=function(){return this.getStackTop().client},d.prototype.getScope=function(){return this.getStackTop().scope},d.prototype.getIsolationScope=function(){return this._isolationScope},d.prototype.getStack=function(){return this._stack},d.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},d.prototype._pushScope=function(){var e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e},d.prototype._popScope=function(){return!(1>=this.getStack().length||!this.getStack().pop())},t.AsyncContextStack=d,t.getStackAsyncContextStrategy=function(){return{withIsolationScope:s,withScope:o,withSetScope:i,withSetIsolationScope:function(e,t){return s(t)},getCurrentScope:function(){return n().getScope()},getIsolationScope:function(){return n().getIsolationScope()}}}},"./node_modules/@sentry/core/cjs/baseclient.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/api.js"),s=r("./node_modules/@sentry/core/cjs/currentScopes.js"),a=r("./node_modules/@sentry/core/cjs/debug-build.js"),u=r("./node_modules/@sentry/core/cjs/envelope.js"),l=r("./node_modules/@sentry/core/cjs/integration.js"),c=r("./node_modules/@sentry/core/cjs/session.js"),d=r("./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js"),f=r("./node_modules/@sentry/core/cjs/utils/parseSampleRate.js"),p=r("./node_modules/@sentry/core/cjs/utils/prepareEvent.js");(e=function(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=n.makeDsn(e.dsn):a.DEBUG_BUILD&&n.logger.warn("No DSN provided, client will not send events."),this._dsn){var t=o.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport(Object.assign({},{tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this)},e.transportOptions,{url:t}))}}).prototype.captureException=function(e,t,r){var o=this,i=n.uuid4();if(n.checkOrSetAlreadyCaught(e))return a.DEBUG_BUILD&&n.logger.log("Not capturing exception because it's already been captured."),i;var s=Object.assign({},{event_id:i},t);return this._process(this.eventFromException(e,s).then((function(e){return o._captureEvent(e,s,r)}))),s.event_id},e.prototype.captureMessage=function(e,t,r,o){var i=this,s=Object.assign({},{event_id:n.uuid4()},r);return r=n.isParameterizedString(e)?e:String(e),e=n.isPrimitive(e)?this.eventFromMessage(r,t,s):this.eventFromException(e,s),this._process(e.then((function(e){return i._captureEvent(e,s,o)}))),s.event_id},e.prototype.captureEvent=function(e,t,r){var o=n.uuid4();return t&&t.originalException&&n.checkOrSetAlreadyCaught(t.originalException)?(a.DEBUG_BUILD&&n.logger.log("Not capturing exception because it's already been captured."),o):(t=Object.assign({},{event_id:o},t),this._process(this._captureEvent(e,t,(e.sdkProcessingMetadata||{}).capturedSpanScope||r)),t.event_id)},e.prototype.captureSession=function(e){"string"!=typeof e.release?a.DEBUG_BUILD&&n.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),c.updateSession(e,{init:!1}))},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.getSdkMetadata=function(){return this._options._metadata},e.prototype.getTransport=function(){return this._transport},e.prototype.flush=function(e){var t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((function(r){return t.flush(e).then((function(e){return r&&e}))}))):n.resolvedSyncPromise(!0)},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,t.emit("close"),e}))},e.prototype.getEventProcessors=function(){return this._eventProcessors},e.prototype.addEventProcessor=function(e){this._eventProcessors.push(e)},e.prototype.init=function(){this._isEnabled()&&this._setupIntegrations()},e.prototype.getIntegrationByName=function(e){return this._integrations[e]},e.prototype.addIntegration=function(e){var t=this._integrations[e.name];l.setupIntegration(this,e,this._integrations),t||l.afterSetupIntegrations(this,[e])},e.prototype.sendEvent=function(e,t){var r=this;t=void 0===t?{}:t,this.emit("beforeSendEvent",e,t);for(var o=u.createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel),s=(t=i.makeIterator(t.attachments||[])).next();!s.done;s=t.next())o=n.addItemToEnvelope(o,n.createAttachmentEnvelopeItem(s.value));(o=this.sendEnvelope(o))&&o.then((function(t){return r.emit("afterSendEvent",e,t)}),null)},e.prototype.sendSession=function(e){e=u.createSessionEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel),this.sendEnvelope(e)},e.prototype.recordDroppedEvent=function(e,t,r){this._options.sendClientReports&&(e=e+":"+t,a.DEBUG_BUILD&&n.logger.log('Adding outcome: "'+e+'"'),this._outcomes[e]=this._outcomes[e]+1||1)},e.prototype.on=function(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)},e.prototype.emit=function(e){var t=i.getRestArguments.apply(1,arguments);this._hooks[e]&&this._hooks[e].forEach((function(e){return e.apply(null,i.arrayFromIterable(t))}))},e.prototype.sendEnvelope=function(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(function(e){return a.DEBUG_BUILD&&n.logger.error("Error while sending event:",e),e})):(a.DEBUG_BUILD&&n.logger.error("Transport disabled"),n.resolvedSyncPromise({}))},e.prototype._setupIntegrations=function(){var e=this._options.integrations;this._integrations=l.setupIntegrations(this,e),l.afterSetupIntegrations(this,e)},e.prototype._updateSessionFromEvent=function(e,t){var r=!1,n=!1;if(t=t.exception&&t.exception.values){n=!0;for(var o=(t=i.makeIterator(t)).next();!o.done;o=t.next())if((o=o.value.mechanism)&&!1===o.handled){r=!0;break}}((t="ok"===e.status)&&0===e.errors||t&&r)&&(c.updateSession(e,Object.assign({},r&&{status:"crashed"},{errors:e.errors||Number(n||r)})),this.captureSession(e))},e.prototype._isClientDoneProcessing=function(e){var t=this;return new n.SyncPromise((function(r){var n=0,o=setInterval((function(){0==t._numProcessing?(clearInterval(o),r(!0)):(n+=1,e&&n>=e&&(clearInterval(o),r(!1)))}),1)}))},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._transport},e.prototype._prepareEvent=function(e,t,r,o){var i=this;o=void 0===o?s.getIsolationScope():o;var a=this.getOptions(),u=Object.keys(this._integrations);return!t.integrations&&0<u.length&&(t.integrations=u),this.emit("preprocessEvent",e,t),e.type||o.setLastEventId(e.event_id||t.event_id),p.prepareEvent(a,e,t,r,this,o).then((function(e){if(null===e)return e;var t=Object.assign({},o.getPropagationContext(),r?r.getPropagationContext():void 0);if((!e.contexts||!e.contexts.trace)&&t){var s=t.traceId,a=t.dsc;e.contexts=Object.assign({},{trace:n.dropUndefinedKeys({trace_id:s,span_id:t.spanId,parent_span_id:t.parentSpanId})},e.contexts),t=a||d.getDynamicSamplingContextFromClient(s,i),e.sdkProcessingMetadata=Object.assign({},{dynamicSamplingContext:t},e.sdkProcessingMetadata)}return e}))},e.prototype._captureEvent=function(e,t,r){return t=void 0===t?{}:t,this._processEvent(e,t,r).then((function(e){return e.event_id}),(function(e){a.DEBUG_BUILD&&("log"===e.logLevel?n.logger.log(e.message):n.logger.warn(e))}))},e.prototype._processEvent=function(e,t,r){var o=this,s=this.getOptions(),a=s.sampleRate,u="transaction"===e.type,l=void 0===e.type,c=e.type||"error",d="before send for type `"+c+"`",p=void 0===a?void 0:f.parseSampleRate(a);if(l&&"number"==typeof p&&Math.random()>p)return this.recordDroppedEvent("sample_rate","error",e),n.rejectedSyncPromise(new n.SentryError("Discarding event because it's not included in the random sample (sampling rate = "+a+")","log"));var h="replay_event"===c?"replay":c;return this._prepareEvent(e,t,r,(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope).then((function(r){if(null===r)throw o.recordDroppedEvent("event_processor",h,e),new n.SentryError("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;var a=s.beforeSend,u=s.beforeSendTransaction,l=s.beforeSendSpan;if(void 0===r.type&&a)r=a(r,t);else if("transaction"===r.type){if(r.spans&&l){a=[];for(var c=i.makeIterator(r.spans),f=c.next();!f.done;f=c.next())(f=l(f.value))&&a.push(f);r.spans=a}u&&(r=u(r,t))}return function(e,t){var r=t+" must return `null` or a valid event.";if(n.isThenable(e))return e.then((function(e){if(!n.isPlainObject(e)&&null!==e)throw new n.SentryError(r);return e}),(function(e){throw new n.SentryError(t+" rejected with "+e)}));if(!n.isPlainObject(e)&&null!==e)throw new n.SentryError(r);return e}(r,d)})).then((function(i){if(null===i)throw o.recordDroppedEvent("before_send",h,e),new n.SentryError(d+" returned `null`, will not send event.","log");var s=r&&r.getSession();return!u&&s&&o._updateSessionFromEvent(s,i),s=i.transaction_info,u&&s&&i.transaction!==e.transaction&&(i.transaction_info=Object.assign({},s,{source:"custom"})),o.sendEvent(i,t),i})).then(null,(function(e){if(e instanceof n.SentryError)throw e;throw o.captureException(e,{data:{__sentry__:!0},originalException:e}),new n.SentryError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._numProcessing++,e.then((function(e){return t._numProcessing--,e}),(function(e){return t._numProcessing--,e}))},e.prototype._clearOutcomes=function(){var e=this._outcomes;return this._outcomes={},Object.keys(e).map((function(t){var r=i.makeIterator(t.split(":"));return{reason:r.next().value,category:r=r.next().value,quantity:e[t]}}))},t.BaseClient=e},"./node_modules/@sentry/core/cjs/breadcrumbs.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/currentScopes.js");t.addBreadcrumb=function(e,t){var r=o.getClient(),i=o.getIsolationScope();if(r){var s=r.getOptions(),a=void 0===s.beforeBreadcrumb?null:s.beforeBreadcrumb;if(!(0>=(s=void 0===s.maxBreadcrumbs?100:s.maxBreadcrumbs))){var u=n.dateTimestampInSeconds(),l=Object.assign({},{timestamp:u},e);null!==(e=a?n.consoleSandbox((function(){return a(l,t)})):l)&&(r.emit&&r.emit("beforeAddBreadcrumb",e,t),i.addBreadcrumb(e,s))}}}},"./node_modules/@sentry/core/cjs/carrier.js":function(e,t,r){function n(e){return(e=e.__SENTRY__=e.__SENTRY__||{}).version=e.version||o.SDK_VERSION,e[o.SDK_VERSION]=e[o.SDK_VERSION]||{}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js");t.getMainCarrier=function(){return n(o.GLOBAL_OBJ),o.GLOBAL_OBJ},t.getSentryCarrier=n},"./node_modules/@sentry/core/cjs/checkin.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");t.createCheckInEnvelope=function(e,t,r,o,i){var s={sent_at:(new Date).toISOString()};return r&&r.sdk&&(s.sdk={name:r.sdk.name,version:r.sdk.version}),o&&i&&(s.dsn=n.dsnToString(i)),t&&(s.trace=n.dropUndefinedKeys(t)),n.createEnvelope(s,[[{type:"check_in"},e]])}},"./node_modules/@sentry/core/cjs/constants.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ENVIRONMENT="production"},"./node_modules/@sentry/core/cjs/currentScopes.js":function(e,t,r){function n(){var e=a.getMainCarrier();return s.getAsyncContextStrategy(e).getCurrentScope()}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/core/cjs/asyncContext/index.js"),a=r("./node_modules/@sentry/core/cjs/carrier.js"),u=r("./node_modules/@sentry/core/cjs/scope.js");t.getClient=function(){return n().getClient()},t.getCurrentScope=n,t.getGlobalScope=function(){return o.getGlobalSingleton("globalScope",(function(){return new u.Scope}))},t.getIsolationScope=function(){var e=a.getMainCarrier();return s.getAsyncContextStrategy(e).getIsolationScope()},t.withIsolationScope=function(){var e=i.getRestArguments.apply(0,arguments),t=a.getMainCarrier();if(t=s.getAsyncContextStrategy(t),2===e.length){var r=i.makeIterator(e);return e=r.next().value,r=r.next().value,e?t.withSetIsolationScope(e,r):t.withIsolationScope(r)}return t.withIsolationScope(e[0])},t.withScope=function(){var e=i.getRestArguments.apply(0,arguments),t=a.getMainCarrier();if(t=s.getAsyncContextStrategy(t),2===e.length){var r=i.makeIterator(e);return e=r.next().value,r=r.next().value,e?t.withSetScope(e,r):t.withScope(r)}return t.withScope(e[0])}},"./node_modules/@sentry/core/cjs/debug-build.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},"./node_modules/@sentry/core/cjs/defaultScopes.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/scope.js");t.getDefaultCurrentScope=function(){return n.getGlobalSingleton("defaultCurrentScope",(function(){return new o.Scope}))},t.getDefaultIsolationScope=function(){return n.getGlobalSingleton("defaultIsolationScope",(function(){return new o.Scope}))}},"./node_modules/@sentry/core/cjs/envelope.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js"),s=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js");t.createEventEnvelope=function(e,t,r,o){var s=n.getSdkMetadataForEnvelopeHeader(r),a=e.type&&"replay_event"!==e.type?e.type:"event";return(r=r&&r.sdk)&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||r.name,e.sdk.version=e.sdk.version||r.version,e.sdk.integrations=[].concat(i.arrayFromIterable(e.sdk.integrations||[]),i.arrayFromIterable(r.integrations||[])),e.sdk.packages=[].concat(i.arrayFromIterable(e.sdk.packages||[]),i.arrayFromIterable(r.packages||[]))),t=n.createEventEnvelopeHeaders(e,s,o,t),delete e.sdkProcessingMetadata,n.createEnvelope(t,[[{type:a},e]])},t.createSessionEnvelope=function(e,t,r,o){return r=n.getSdkMetadataForEnvelopeHeader(r),t=Object.assign({},{sent_at:(new Date).toISOString()},r&&{sdk:r},!!o&&t&&{dsn:n.dsnToString(t)}),e="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()],n.createEnvelope(t,[e])},t.createSpanEnvelope=function(e,t){var r=o.getDynamicSamplingContextFromSpan(e[0]),a=t&&t.getDsn(),u=t&&t.getOptions().tunnel;r=Object.assign({},{sent_at:(new Date).toISOString()},!!r.trace_id&&!!r.public_key&&{trace:r},!!u&&a&&{dsn:n.dsnToString(a)});var l=t&&t.getOptions().beforeSendSpan;for(t=l?function(e){return l(s.spanToJSON(e))}:function(e){return s.spanToJSON(e)},a=[],u=(e=i.makeIterator(e)).next();!u.done;u=e.next())(u=t(u.value))&&a.push(n.createSpanEnvelopeItem(u));return n.createEnvelope(r,a)}},"./node_modules/@sentry/core/cjs/eventProcessors.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/debug-build.js");t.notifyEventProcessors=function e(t,r,i,s){return s=void 0===s?0:s,new n.SyncPromise((function(a,u){var l=t[s];if(null===r||"function"!=typeof l)a(r);else{var c=l(Object.assign({},r),i);o.DEBUG_BUILD&&l.id&&null===c&&n.logger.log('Event processor "'+l.id+'" dropped event'),n.isThenable(c)?c.then((function(r){return e(t,r,i,s+1).then(a)})).then(null,u):e(t,c,i,s+1).then(a).then(null,u)}}))}},"./node_modules/@sentry/core/cjs/exports.js":function(e,t,r){function n(e,t){var r=l.getCurrentScope(),n=l.getClient();if(n){if(n.captureCheckIn)return n.captureCheckIn(e,t,r);c.DEBUG_BUILD&&a.logger.warn("Cannot capture check-in. Client does not support sending check-ins.")}else c.DEBUG_BUILD&&a.logger.warn("Cannot capture check-in. No client defined.");return a.uuid4()}function o(){var e=l.getIsolationScope(),t=l.getCurrentScope(),r=t.getSession()||e.getSession();r&&d.closeSession(r),s(),e.setSession(),t.setSession()}function s(){var e=l.getIsolationScope(),t=l.getCurrentScope(),r=l.getClient();(e=t.getSession()||e.getSession())&&r&&r.captureSession(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/@sentry/utils/cjs/index.js"),u=r("./node_modules/@sentry/core/cjs/constants.js"),l=r("./node_modules/@sentry/core/cjs/currentScopes.js"),c=r("./node_modules/@sentry/core/cjs/debug-build.js"),d=r("./node_modules/@sentry/core/cjs/session.js"),f=r("./node_modules/@sentry/core/cjs/utils/prepareEvent.js");t.addEventProcessor=function(e){l.getIsolationScope().addEventProcessor(e)},t.captureCheckIn=n,t.captureEvent=function(e,t){return l.getCurrentScope().captureEvent(e,t)},t.captureException=function(e,t){return l.getCurrentScope().captureException(e,f.parseEventHintOrCaptureContext(t))},t.captureMessage=function(e,t){var r="string"==typeof t?t:void 0;return t="string"!=typeof t?{captureContext:t}:void 0,l.getCurrentScope().captureMessage(e,r,t)},t.captureSession=function(e){void 0!==e&&e?o():s()},t.close=function(e){var t;return i.asyncExecutePromiseGeneratorProgram((function(r){return(t=l.getClient())?r.return(t.close(e)):(c.DEBUG_BUILD&&a.logger.warn("Cannot flush events and disable SDK. No client defined."),r.return(Promise.resolve(!1)))}))},t.endSession=o,t.flush=function(e){var t;return i.asyncExecutePromiseGeneratorProgram((function(r){return(t=l.getClient())?r.return(t.flush(e)):(c.DEBUG_BUILD&&a.logger.warn("Cannot flush events. No client defined."),r.return(Promise.resolve(!1)))}))},t.isEnabled=function(){var e=l.getClient();return!!e&&!1!==e.getOptions().enabled&&!!e.getTransport()},t.isInitialized=function(){return!!l.getClient()},t.lastEventId=function(){return l.getIsolationScope().lastEventId()},t.setContext=function(e,t){l.getIsolationScope().setContext(e,t)},t.setExtra=function(e,t){l.getIsolationScope().setExtra(e,t)},t.setExtras=function(e){l.getIsolationScope().setExtras(e)},t.setTag=function(e,t){l.getIsolationScope().setTag(e,t)},t.setTags=function(e){l.getIsolationScope().setTags(e)},t.setUser=function(e){l.getIsolationScope().setUser(e)},t.startSession=function(e){var t=l.getClient(),r=l.getIsolationScope(),n=l.getCurrentScope();t=t&&t.getOptions()||{};var i=(a.GLOBAL_OBJ.navigator||{}).userAgent;return e=d.makeSession(Object.assign({},{release:t.release,environment:void 0===t.environment?u.DEFAULT_ENVIRONMENT:t.environment,user:n.getUser()||r.getUser()},i&&{userAgent:i},e)),(t=r.getSession())&&"ok"===t.status&&d.updateSession(t,{status:"exited"}),o(),r.setSession(e),n.setSession(e),e},t.withMonitor=function(e,t,r){function o(t){n({monitorSlug:e,status:t,checkInId:i,duration:a.timestampInSeconds()-s})}var i=n({monitorSlug:e,status:"in_progress"},r),s=a.timestampInSeconds();return l.withIsolationScope((function(){try{var e=t()}catch(e){throw o("error"),e}return a.isThenable(e)?Promise.resolve(e).then((function(){o("ok")}),(function(){o("error")})):o("ok"),e}))}},"./node_modules/@sentry/core/cjs/feedback.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/currentScopes.js");t.captureFeedback=function(e,t,r){t=void 0===t?{}:t,r=void 0===r?o.getCurrentScope():r,e={contexts:{feedback:n.dropUndefinedKeys({contact_email:e.email,name:e.name,message:e.message,url:e.url,source:e.source,associated_event_id:e.associatedEventId})},type:"feedback",level:"info"};var i=r&&r.getClient()||o.getClient();return i&&i.emit("beforeSendFeedback",e,t),r.captureEvent(e,t)}},"./node_modules/@sentry/core/cjs/fetch.js":function(e,t,r){function n(e,t,r,n,a){var u=s.getIsolationScope(),c=Object.assign({},u.getPropagationContext(),r.getPropagationContext());u=c.traceId,r=c.spanId;var d=c.sampled;return c=c.dsc,r=a?l.spanToTraceHeader(a):o.generateSentryTraceHeader(u,r,d),t=o.dynamicSamplingContextToSentryBaggageHeader(c||(a?p.getDynamicSamplingContextFromSpan(a):p.getDynamicSamplingContextFromClient(u,t))),(e=n.headers||("undefined"!=typeof Request&&o.isInstanceOf(e,Request)?e.headers:void 0))?"undefined"!=typeof Headers&&o.isInstanceOf(e,Headers)?((e=new Headers(e)).append("sentry-trace",r),t&&e.append(o.BAGGAGE_HEADER_NAME,t),e):Array.isArray(e)?(e=[].concat(i.arrayFromIterable(e),[["sentry-trace",r]]),t&&e.push([o.BAGGAGE_HEADER_NAME,t]),e):(n="baggage"in e?e.baggage:void 0,a=[],Array.isArray(n)?a.push.apply(a,i.arrayFromIterable(n)):n&&a.push(n),t&&a.push(t),Object.assign({},e,{"sentry-trace":r,baggage:0<a.length?a.join(","):void 0})):{"sentry-trace":r,baggage:t}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/core/cjs/currentScopes.js"),a=r("./node_modules/@sentry/core/cjs/semanticAttributes.js");r("./node_modules/@sentry/core/cjs/tracing/errors.js"),r("./node_modules/@sentry/core/cjs/debug-build.js");var u=r("./node_modules/@sentry/core/cjs/utils/hasTracingEnabled.js"),l=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),c=r("./node_modules/@sentry/core/cjs/tracing/sentryNonRecordingSpan.js"),d=r("./node_modules/@sentry/core/cjs/tracing/spanstatus.js"),f=r("./node_modules/@sentry/core/cjs/tracing/trace.js"),p=r("./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js");t.addTracingHeadersToFetchRequest=n,t.instrumentFetchRequest=function(e,t,r,i,p){if(p=void 0===p?"auto.http.browser":p,e.fetchData){var h=u.hasTracingEnabled()&&t(e.fetchData.url);if(!e.endTimestamp||!h){t=s.getCurrentScope(),T=s.getClient();var _=e.fetchData,E=_.method;_=_.url;try{var g=new URL(_).href}catch(e){g=void 0}var m=g,y=m?o.parseUrl(m).host:void 0;g=!!l.getActiveSpan();var S={};return p=h&&g?f.startInactiveSpan({name:E+" "+_,attributes:(S.url=_,S.type="fetch",S["http.method"]=E,S["http.url"]=m,S["server.address"]=y,S[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]=p,S[a.SEMANTIC_ATTRIBUTE_SENTRY_OP]="http.client",S)}):new c.SentryNonRecordingSpan,e.fetchData.__span=p.spanContext().spanId,i[p.spanContext().spanId]=p,r(e.fetchData.url)&&T&&(i=e.args[0],e.args[1]=e.args[1]||{},(e=e.args[1]).headers=n(i,T,t,e,u.hasTracingEnabled()&&g?p:void 0)),p}if(t=e.fetchData.__span){var T=i[t];T&&(e.response?(d.setHttpStatus(T,e.response.status),(e=e.response&&e.response.headers&&e.response.headers.get("content-length"))&&0<(e=parseInt(e))&&T.setAttribute("http.response_content_length",e)):e.error&&T.setStatus({code:d.SPAN_STATUS_ERROR,message:"internal_error"}),T.end(),delete i[t])}}}},"./node_modules/@sentry/core/cjs/getCurrentHubShim.js":function(e,t,r){function n(){return{bindClient:function(e){i.getCurrentScope().setClient(e)},withScope:i.withScope,getClient:function(){return i.getClient()},getScope:i.getCurrentScope,getIsolationScope:i.getIsolationScope,captureException:function(e,t){return i.getCurrentScope().captureException(e,t)},captureMessage:function(e,t,r){return i.getCurrentScope().captureMessage(e,t,r)},captureEvent:s.captureEvent,addBreadcrumb:o.addBreadcrumb,setUser:s.setUser,setTags:s.setTags,setTag:s.setTag,setExtra:s.setExtra,setExtras:s.setExtras,setContext:s.setContext,getIntegration:function(e){var t=i.getClient();return t&&t.getIntegrationByName(e.id)||null},startSession:s.startSession,endSession:s.endSession,captureSession:function(e){if(e)return s.endSession();var t=i.getCurrentScope();e=i.getClient(),t=t.getSession(),e&&t&&e.captureSession(t)}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/core/cjs/breadcrumbs.js"),i=r("./node_modules/@sentry/core/cjs/currentScopes.js"),s=r("./node_modules/@sentry/core/cjs/exports.js");t.getCurrentHub=n,t.getCurrentHubShim=n},"./node_modules/@sentry/core/cjs/index.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/core/cjs/tracing/errors.js");var n=r("./node_modules/@sentry/core/cjs/tracing/utils.js"),o=r("./node_modules/@sentry/core/cjs/tracing/hubextensions.js"),i=r("./node_modules/@sentry/core/cjs/tracing/idleSpan.js"),s=r("./node_modules/@sentry/core/cjs/tracing/sentrySpan.js"),a=r("./node_modules/@sentry/core/cjs/tracing/sentryNonRecordingSpan.js"),u=r("./node_modules/@sentry/core/cjs/tracing/spanstatus.js"),l=r("./node_modules/@sentry/core/cjs/tracing/trace.js"),c=r("./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js"),d=r("./node_modules/@sentry/core/cjs/tracing/measurement.js"),f=r("./node_modules/@sentry/core/cjs/tracing/sampling.js"),p=r("./node_modules/@sentry/core/cjs/tracing/logSpans.js"),h=r("./node_modules/@sentry/core/cjs/semanticAttributes.js"),_=r("./node_modules/@sentry/core/cjs/envelope.js"),E=r("./node_modules/@sentry/core/cjs/exports.js"),g=r("./node_modules/@sentry/core/cjs/currentScopes.js"),m=r("./node_modules/@sentry/core/cjs/defaultScopes.js"),y=r("./node_modules/@sentry/core/cjs/asyncContext/index.js"),S=r("./node_modules/@sentry/core/cjs/carrier.js"),T=r("./node_modules/@sentry/core/cjs/session.js"),A=r("./node_modules/@sentry/core/cjs/sessionflusher.js"),b=r("./node_modules/@sentry/core/cjs/scope.js"),O=r("./node_modules/@sentry/core/cjs/eventProcessors.js"),I=r("./node_modules/@sentry/core/cjs/api.js"),v=r("./node_modules/@sentry/core/cjs/baseclient.js"),N=r("./node_modules/@sentry/core/cjs/server-runtime-client.js"),R=r("./node_modules/@sentry/core/cjs/sdk.js"),C=r("./node_modules/@sentry/core/cjs/transports/base.js"),D=r("./node_modules/@sentry/core/cjs/transports/offline.js"),w=r("./node_modules/@sentry/core/cjs/transports/multiplexed.js"),L=r("./node_modules/@sentry/core/cjs/integration.js"),P=r("./node_modules/@sentry/core/cjs/utils/applyScopeDataToEvent.js"),M=r("./node_modules/@sentry/core/cjs/utils/prepareEvent.js"),U=r("./node_modules/@sentry/core/cjs/checkin.js"),j=r("./node_modules/@sentry/core/cjs/utils/hasTracingEnabled.js"),k=r("./node_modules/@sentry/core/cjs/utils/isSentryRequestUrl.js"),x=r("./node_modules/@sentry/core/cjs/utils/handleCallbackErrors.js"),F=r("./node_modules/@sentry/core/cjs/utils/parameterize.js"),B=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),G=r("./node_modules/@sentry/core/cjs/utils/parseSampleRate.js"),V=r("./node_modules/@sentry/core/cjs/utils/sdkMetadata.js"),H=r("./node_modules/@sentry/core/cjs/constants.js"),W=r("./node_modules/@sentry/core/cjs/breadcrumbs.js"),Y=r("./node_modules/@sentry/core/cjs/integrations/functiontostring.js"),K=r("./node_modules/@sentry/core/cjs/integrations/inboundfilters.js"),z=r("./node_modules/@sentry/core/cjs/integrations/linkederrors.js"),q=r("./node_modules/@sentry/core/cjs/integrations/metadata.js"),$=r("./node_modules/@sentry/core/cjs/integrations/requestdata.js"),X=r("./node_modules/@sentry/core/cjs/integrations/captureconsole.js"),J=r("./node_modules/@sentry/core/cjs/integrations/debug.js"),Z=r("./node_modules/@sentry/core/cjs/integrations/dedupe.js"),Q=r("./node_modules/@sentry/core/cjs/integrations/extraerrordata.js"),ee=r("./node_modules/@sentry/core/cjs/integrations/rewriteframes.js"),te=r("./node_modules/@sentry/core/cjs/integrations/sessiontiming.js"),re=r("./node_modules/@sentry/core/cjs/integrations/zoderrors.js"),ne=r("./node_modules/@sentry/core/cjs/metrics/exports.js"),oe=r("./node_modules/@sentry/core/cjs/metrics/exports-default.js"),ie=r("./node_modules/@sentry/core/cjs/metrics/browser-aggregator.js"),se=r("./node_modules/@sentry/core/cjs/metrics/metric-summary.js"),ae=r("./node_modules/@sentry/core/cjs/fetch.js"),ue=r("./node_modules/@sentry/core/cjs/trpc.js"),le=r("./node_modules/@sentry/core/cjs/feedback.js"),ce=r("./node_modules/@sentry/core/cjs/getCurrentHubShim.js");r=r("./node_modules/@sentry/utils/cjs/index.js"),t.registerSpanErrorInstrumentation=e.registerSpanErrorInstrumentation,t.getCapturedScopesOnSpan=n.getCapturedScopesOnSpan,t.setCapturedScopesOnSpan=n.setCapturedScopesOnSpan,t.addTracingExtensions=o.addTracingExtensions,t.TRACING_DEFAULTS=i.TRACING_DEFAULTS,t.startIdleSpan=i.startIdleSpan,t.SentrySpan=s.SentrySpan,t.SentryNonRecordingSpan=a.SentryNonRecordingSpan,t.SPAN_STATUS_ERROR=u.SPAN_STATUS_ERROR,t.SPAN_STATUS_OK=u.SPAN_STATUS_OK,t.SPAN_STATUS_UNSET=u.SPAN_STATUS_UNSET,t.getSpanStatusFromHttpCode=u.getSpanStatusFromHttpCode,t.setHttpStatus=u.setHttpStatus,t.continueTrace=l.continueTrace,t.startInactiveSpan=l.startInactiveSpan,t.startNewTrace=l.startNewTrace,t.startSpan=l.startSpan,t.startSpanManual=l.startSpanManual,t.suppressTracing=l.suppressTracing,t.withActiveSpan=l.withActiveSpan,t.getDynamicSamplingContextFromClient=c.getDynamicSamplingContextFromClient,t.getDynamicSamplingContextFromSpan=c.getDynamicSamplingContextFromSpan,t.spanToBaggageHeader=c.spanToBaggageHeader,t.setMeasurement=d.setMeasurement,t.timedEventsToMeasurements=d.timedEventsToMeasurements,t.sampleSpan=f.sampleSpan,t.logSpanEnd=p.logSpanEnd,t.logSpanStart=p.logSpanStart,t.SEMANTIC_ATTRIBUTE_CACHE_HIT=h.SEMANTIC_ATTRIBUTE_CACHE_HIT,t.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=h.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,t.SEMANTIC_ATTRIBUTE_CACHE_KEY=h.SEMANTIC_ATTRIBUTE_CACHE_KEY,t.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=h.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,t.SEMANTIC_ATTRIBUTE_PROFILE_ID=h.SEMANTIC_ATTRIBUTE_PROFILE_ID,t.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=h.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,t.SEMANTIC_ATTRIBUTE_SENTRY_OP=h.SEMANTIC_ATTRIBUTE_SENTRY_OP,t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=h.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,t.createEventEnvelope=_.createEventEnvelope,t.createSessionEnvelope=_.createSessionEnvelope,t.createSpanEnvelope=_.createSpanEnvelope,t.addEventProcessor=E.addEventProcessor,t.captureCheckIn=E.captureCheckIn,t.captureEvent=E.captureEvent,t.captureException=E.captureException,t.captureMessage=E.captureMessage,t.captureSession=E.captureSession,t.close=E.close,t.endSession=E.endSession,t.flush=E.flush,t.isEnabled=E.isEnabled,t.isInitialized=E.isInitialized,t.lastEventId=E.lastEventId,t.setContext=E.setContext,t.setExtra=E.setExtra,t.setExtras=E.setExtras,t.setTag=E.setTag,t.setTags=E.setTags,t.setUser=E.setUser,t.startSession=E.startSession,t.withMonitor=E.withMonitor,t.getClient=g.getClient,t.getCurrentScope=g.getCurrentScope,t.getGlobalScope=g.getGlobalScope,t.getIsolationScope=g.getIsolationScope,t.withIsolationScope=g.withIsolationScope,t.withScope=g.withScope,t.getDefaultCurrentScope=m.getDefaultCurrentScope,t.getDefaultIsolationScope=m.getDefaultIsolationScope,t.setAsyncContextStrategy=y.setAsyncContextStrategy,t.getMainCarrier=S.getMainCarrier,t.closeSession=T.closeSession,t.makeSession=T.makeSession,t.updateSession=T.updateSession,t.SessionFlusher=A.SessionFlusher,t.Scope=b.Scope,t.notifyEventProcessors=O.notifyEventProcessors,t.getEnvelopeEndpointWithUrlEncodedAuth=I.getEnvelopeEndpointWithUrlEncodedAuth,t.getReportDialogEndpoint=I.getReportDialogEndpoint,t.BaseClient=v.BaseClient,t.ServerRuntimeClient=N.ServerRuntimeClient,t.initAndBind=R.initAndBind,t.setCurrentClient=R.setCurrentClient,t.createTransport=C.createTransport,t.makeOfflineTransport=D.makeOfflineTransport,t.makeMultiplexedTransport=w.makeMultiplexedTransport,t.addIntegration=L.addIntegration,t.defineIntegration=L.defineIntegration,t.getIntegrationsToSetup=L.getIntegrationsToSetup,t.applyScopeDataToEvent=P.applyScopeDataToEvent,t.mergeScopeData=P.mergeScopeData,t.prepareEvent=M.prepareEvent,t.createCheckInEnvelope=U.createCheckInEnvelope,t.hasTracingEnabled=j.hasTracingEnabled,t.isSentryRequestUrl=k.isSentryRequestUrl,t.handleCallbackErrors=x.handleCallbackErrors,t.parameterize=F.parameterize,t.addChildSpanToSpan=B.addChildSpanToSpan,t.getActiveSpan=B.getActiveSpan,t.getRootSpan=B.getRootSpan,t.getSpanDescendants=B.getSpanDescendants,t.getStatusMessage=B.getStatusMessage,t.spanIsSampled=B.spanIsSampled,t.spanToJSON=B.spanToJSON,t.spanToTraceContext=B.spanToTraceContext,t.spanToTraceHeader=B.spanToTraceHeader,t.parseSampleRate=G.parseSampleRate,t.applySdkMetadata=V.applySdkMetadata,t.DEFAULT_ENVIRONMENT=H.DEFAULT_ENVIRONMENT,t.addBreadcrumb=W.addBreadcrumb,t.functionToStringIntegration=Y.functionToStringIntegration,t.inboundFiltersIntegration=K.inboundFiltersIntegration,t.linkedErrorsIntegration=z.linkedErrorsIntegration,t.moduleMetadataIntegration=q.moduleMetadataIntegration,t.requestDataIntegration=$.requestDataIntegration,t.captureConsoleIntegration=X.captureConsoleIntegration,t.debugIntegration=J.debugIntegration,t.dedupeIntegration=Z.dedupeIntegration,t.extraErrorDataIntegration=Q.extraErrorDataIntegration,t.rewriteFramesIntegration=ee.rewriteFramesIntegration,t.sessionTimingIntegration=te.sessionTimingIntegration,t.zodErrorsIntegration=re.zodErrorsIntegration,t.metrics=ne.metrics,t.metricsDefault=oe.metricsDefault,t.BrowserMetricsAggregator=ie.BrowserMetricsAggregator,t.getMetricSummaryJsonForSpan=se.getMetricSummaryJsonForSpan,t.addTracingHeadersToFetchRequest=ae.addTracingHeadersToFetchRequest,t.instrumentFetchRequest=ae.instrumentFetchRequest,t.trpcMiddleware=ue.trpcMiddleware,t.captureFeedback=le.captureFeedback,t.getCurrentHub=ce.getCurrentHub,t.getCurrentHubShim=ce.getCurrentHubShim,t.SDK_VERSION=r.SDK_VERSION},"./node_modules/@sentry/core/cjs/integration.js":function(e,t,r){function n(e,t,r){if(r[t.name])a.DEBUG_BUILD&&o.logger.log("Integration skipped because it was already installed: "+t.name);else{if(r[t.name]=t,-1===u.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),u.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){var n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(function(t,r){return n(t,r,e)}))}if("function"==typeof t.processEvent){var i=t.processEvent.bind(t);r=Object.assign((function(t,r){return i(t,r,e)}),{id:t.name}),e.addEventProcessor(r)}a.DEBUG_BUILD&&o.logger.log("Integration installed: "+t.name)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/core/cjs/currentScopes.js"),a=r("./node_modules/@sentry/core/cjs/debug-build.js"),u=[];t.addIntegration=function(e){var t=s.getClient();t?t.addIntegration(e):a.DEBUG_BUILD&&o.logger.warn('Cannot add integration "'+e.name+'" because no SDK Client is available.')},t.afterSetupIntegrations=function(e,t){for(var r=(t=i.makeIterator(t)).next();!r.done;r=t.next())(r=r.value)&&r.afterAllSetup&&r.afterAllSetup(e)},t.defineIntegration=function(e){return e},t.getIntegrationsToSetup=function(e){var t=e.defaultIntegrations||[];return e=e.integrations,t.forEach((function(e){e.isDefaultInstance=!0})),t=function(e){var t={};return e.forEach((function(e){var r=e.name,n=t[r];n&&!n.isDefaultInstance&&e.isDefaultInstance||(t[r]=e)})),Object.keys(t).map((function(e){return t[e]}))}(t=Array.isArray(e)?[].concat(i.arrayFromIterable(t),i.arrayFromIterable(e)):"function"==typeof e?o.arrayify(e(t)):t),e=function(e,t){for(var r=0;r<e.length;r++)if(!0===t(e[r]))return r;return-1}(t,(function(e){return"Debug"===e.name})),-1!==e&&(e=i.makeIterator(t.splice(e,1)).next().value,t.push(e)),t},t.installedIntegrations=u,t.setupIntegration=n,t.setupIntegrations=function(e,t){var r={};return t.forEach((function(t){t&&n(e,t,r)})),r}},"./node_modules/@sentry/core/cjs/integrations/captureconsole.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/currentScopes.js"),i=r("./node_modules/@sentry/core/cjs/exports.js");e=r("./node_modules/@sentry/core/cjs/integration.js").defineIntegration((function(e){var t=(e=void 0===e?{}:e).levels||n.CONSOLE_LEVELS;return{name:"CaptureConsole",setup:function(e){"console"in n.GLOBAL_OBJ&&n.addConsoleInstrumentationHandler((function(r){var s=r.args;r=r.level,o.getClient()===e&&t.includes(r)&&function(e,t){var r={level:n.severityLevelFromString(t),extra:{arguments:e}};o.withScope((function(o){if(o.addEventProcessor((function(e){return e.logger="console",n.addExceptionMechanism(e,{handled:!1,type:"console"}),e})),"assert"===t){if(!e[0]){var s="Assertion failed: "+(n.safeJoin(e.slice(1)," ")||"console.assert");o.setExtra("arguments",e.slice(1)),i.captureMessage(s,r)}}else(o=e.find((function(e){return e instanceof Error})))?i.captureException(o,r):(o=n.safeJoin(e," "),i.captureMessage(o,r))}))}(s,r)}))}}})),t.captureConsoleIntegration=e},"./node_modules/@sentry/core/cjs/integrations/debug.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");e=r("./node_modules/@sentry/core/cjs/integration.js").defineIntegration((function(e){e=void 0===e?{}:e;var t=Object.assign({},{debugger:!1,stringify:!1},e);return{name:"Debug",setup:function(e){e.on("beforeSendEvent",(function(e,r){t.debugger,n.consoleSandbox((function(){t.stringify?(console.log(JSON.stringify(e,null,2)),r&&Object.keys(r).length&&console.log(JSON.stringify(r,null,2))):(console.log(e),r&&Object.keys(r).length&&console.log(r))}))}))}}})),t.debugIntegration=e},"./node_modules/@sentry/core/cjs/integrations/dedupe.js":function(e,t,r){function n(e,t){if(t){var r=e.message,n=t.message;(r=!(!r&&!n||r&&!n||!r&&n||r!==n||!i(e,t)||!o(e,t)))||(r=t.exception&&t.exception.values&&t.exception.values[0],n=e.exception&&e.exception.values&&e.exception.values[0],r=!!(r&&n&&r.type===n.type&&r.value===n.value&&i(e,t)&&o(e,t))),e=!!r}else e=!1;return e}function o(e,t){if(e=s(e),t=s(t),!e&&!t)return!0;if(e&&!t||!e&&t||t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(n.filename!==o.filename||n.lineno!==o.lineno||n.colno!==o.colno||n.function!==o.function)return!1}return!0}function i(e,t){if(e=e.fingerprint,t=t.fingerprint,!e&&!t)return!0;if(e&&!t||!e&&t)return!1;try{return e.join("")===t.join("")}catch(e){return!1}}function s(e){if(e=e.exception)try{return e.values[0].stacktrace.frames}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/@sentry/utils/cjs/index.js");e=r("./node_modules/@sentry/core/cjs/integration.js");var u=r("./node_modules/@sentry/core/cjs/debug-build.js");r=e.defineIntegration((function(){var e;return{name:"Dedupe",processEvent:function(t){if(t.type)return t;try{if(n(t,e))return u.DEBUG_BUILD&&a.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}})),t._shouldDropEvent=n,t.dedupeIntegration=r},"./node_modules/@sentry/core/cjs/integrations/extraerrordata.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");e=r("./node_modules/@sentry/core/cjs/integration.js");var o=r("./node_modules/@sentry/core/cjs/debug-build.js");r=e.defineIntegration((function(e){var t=void 0===(e=void 0===e?{}:e).depth?3:e.depth,r=void 0===e.captureErrorCause||e.captureErrorCause;return{name:"ExtraErrorData",processEvent:function(e,s){var a=s;if((a=void 0===a?{}:a).originalException&&n.isError(a.originalException)){s=a.originalException.name||a.originalException.constructor.name;e:{a=a.originalException;try{for(var u="name message stack line column fileName lineNumber columnNumber toJSON".split(" "),l={},c=i.makeIterator(Object.keys(a)),d=c.next();!d.done;d=c.next()){var f=d.value;if(-1===u.indexOf(f)){var p=a[f];l[f]=n.isError(p)?p.toString():p}}if(r&&void 0!==a.cause&&(l.cause=n.isError(a.cause)?a.cause.toString():a.cause),"function"==typeof a.toJSON){var h=a.toJSON(),_=i.makeIterator(Object.keys(h));for(d=_.next();!d.done;d=_.next()){var E=d.value,g=h[E];l[E]=n.isError(g)?g.toString():g}}var m=l;break e}catch(e){o.DEBUG_BUILD&&n.logger.error("Unable to extract extra data from the Error object:",e)}m=null}(c=m)&&(m=Object.assign({},e.contexts),c=n.normalize(c,t),n.isPlainObject(c)&&(n.addNonEnumerableProperty(c,"__sentry_skip_normalization__",!0),m[s]=c),e=Object.assign({},e,{contexts:m}))}return e}}})),t.extraErrorDataIntegration=r},"./node_modules/@sentry/core/cjs/integrations/functiontostring.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/currentScopes.js");e=r("./node_modules/@sentry/core/cjs/integration.js");var s,a=new WeakMap;e=e.defineIntegration((function(){return{name:"FunctionToString",setupOnce:function(){s=Function.prototype.toString;try{Function.prototype.toString=function(){var e=i.getRestArguments.apply(0,arguments),t=n.getOriginalFunction(this);return t=a.has(o.getClient())&&void 0!==t?t:this,s.apply(t,e)}}catch(e){}},setup:function(e){a.set(e,!0)}}})),t.functionToStringIntegration=e},"./node_modules/@sentry/core/cjs/integrations/inboundfilters.js":function(e,t,r){function n(e,t){var r;if(r=t.ignoreInternal)e:{try{r="SentryError"===e.exception.values[0].type;break e}catch(e){}r=!1}if(r)return a.DEBUG_BUILD&&s.logger.warn("Event dropped due to being internal Sentry Error.\nEvent: "+s.getEventDescription(e)),!0;if(function(e,t){return!(e.type||!t||!t.length)&&function(e){var t=[];e.message&&t.push(e.message);try{var r=e.exception.values[e.exception.values.length-1]}catch(e){}return r&&r.value&&(t.push(r.value),r.type&&t.push(r.type+": "+r.value)),t}(e).some((function(e){return s.stringMatchesSomePattern(e,t)}))}(e,t.ignoreErrors))return a.DEBUG_BUILD&&s.logger.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+s.getEventDescription(e)),!0;if(r=t.ignoreTransactions,"transaction"===e.type&&r&&r.length){var n=e.transaction;r=!!n&&s.stringMatchesSomePattern(n,r)}else r=!1;return r?(a.DEBUG_BUILD&&s.logger.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: "+s.getEventDescription(e)),!0):(r=!(!(r=t.denyUrls)||!r.length)&&!!(n=o(e))&&s.stringMatchesSomePattern(n,r))?(a.DEBUG_BUILD&&s.logger.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+s.getEventDescription(e)+".\nUrl: "+o(e)),!0):!(t=!(t=t.allowUrls)||!t.length||!(r=o(e))||s.stringMatchesSomePattern(r,t))&&(a.DEBUG_BUILD&&s.logger.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+s.getEventDescription(e)+".\nUrl: "+o(e)),!0)}function o(e){try{try{var t=e.exception.values[0].stacktrace.frames}catch(e){}if(t)e:{for(var r=(t=void 0===t?[]:t).length-1;0<=r;r--){var n=t[r];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename){var o=n.filename||null;break e}}o=null}else o=null;return o}catch(t){return a.DEBUG_BUILD&&s.logger.error("Cannot extract url for event "+s.getEventDescription(e)),null}}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/index.js"),a=r("./node_modules/@sentry/core/cjs/debug-build.js"),u=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/];e=r("./node_modules/@sentry/core/cjs/integration.js").defineIntegration((function(e){return e=void 0===e?{}:e,{name:"InboundFilters",processEvent:function(t,r,o){return o=o.getOptions(),r=void 0===(r=e)?{}:r,o=void 0===o?{}:o,n(t,r={allowUrls:[].concat(i.arrayFromIterable(r.allowUrls||[]),i.arrayFromIterable(o.allowUrls||[])),denyUrls:[].concat(i.arrayFromIterable(r.denyUrls||[]),i.arrayFromIterable(o.denyUrls||[])),ignoreErrors:[].concat(i.arrayFromIterable(r.ignoreErrors||[]),i.arrayFromIterable(o.ignoreErrors||[]),i.arrayFromIterable(r.disableErrorDefaults?[]:u)),ignoreTransactions:[].concat(i.arrayFromIterable(r.ignoreTransactions||[]),i.arrayFromIterable(o.ignoreTransactions||[])),ignoreInternal:void 0===r.ignoreInternal||r.ignoreInternal})?null:t}}})),t.inboundFiltersIntegration=e},"./node_modules/@sentry/core/cjs/integrations/linkederrors.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");e=r("./node_modules/@sentry/core/cjs/integration.js").defineIntegration((function(e){var t=(e=void 0===e?{}:e).limit||5,r=e.key||"cause";return{name:"LinkedErrors",preprocessEvent:function(e,o,i){i=i.getOptions(),n.applyAggregateErrorsToEvent(n.exceptionFromError,i.stackParser,i.maxValueLength,r,t,e,o)}}})),t.linkedErrorsIntegration=e},"./node_modules/@sentry/core/cjs/integrations/metadata.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");e=r("./node_modules/@sentry/core/cjs/integration.js");var o=r("./node_modules/@sentry/core/cjs/metadata.js");r=e.defineIntegration((function(){return{name:"ModuleMetadata",setup:function(e){e.on("beforeEnvelope",(function(e){n.forEachEnvelopeItem(e,(function(e,t){"event"===t&&(t=Array.isArray(e)?e[1]:void 0)&&(o.stripMetadataFromStackFrames(t),e[1]=t)}))}))},processEvent:function(e,t,r){return t=r.getOptions().stackParser,o.addMetadataToStackFrames(t,e),e}}})),t.moduleMetadataIntegration=r},"./node_modules/@sentry/core/cjs/integrations/requestdata.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};e=r("./node_modules/@sentry/core/cjs/integration.js").defineIntegration((function(e){e=void 0===e?{}:e;var t=Object.assign({},o,e,{include:Object.assign({},o.include,e.include,{user:e.include&&"boolean"==typeof e.include.user?e.include.user:Object.assign({},o.include.user,(e.include||{}).user)})});return{name:"RequestData",processEvent:function(e){var r=(void 0===e.sdkProcessingMetadata?{}:e.sdkProcessingMetadata).request;if(!r)return e;var o=t.transactionNamingScheme,s=t.include,a=Object.assign({},s),u=s.ip;s=s.user;var l=(delete a.ip,delete a.user,a);a=["method"];for(var c=(l=i.makeIterator(Object.entries(l))).next();!c.done;c=l.next()){var d=(c=i.makeIterator(c.value)).next().value;c.next().value&&a.push(d)}if(void 0===s)s=!0;else if("boolean"!=typeof s){for(l=[],c=(s=i.makeIterator(Object.entries(s))).next();!c.done;c=s.next())d=(c=i.makeIterator(c.value)).next().value,c.next().value&&l.push(d);s=l}return n.addRequestDataToEvent(e,r,{include:{ip:u,user:s,request:0!==a.length?a:void 0,transaction:o}})}}})),t.requestDataIntegration=e},"./node_modules/@sentry/core/cjs/integrations/rewriteframes.js":function(e,t,r){function n(e){var t=e.isBrowser,r=e.root,n=e.prefix;return function(e){if(!e.filename)return e;var i=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),s=/^\//.test(e.filename);return t?r&&0===(i=e.filename).indexOf(r)&&(e.filename=i.replace(r,n)):(i||s)&&(i=i?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,i=r?o.relative(r,i):o.basename(i),e.filename=""+n+i),e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js");e=r("./node_modules/@sentry/core/cjs/integration.js").defineIntegration((function(e){function t(e){return Object.assign({},e,{frames:e&&e.frames&&e.frames.map((function(e){return a(e)}))})}var r=(e=void 0===e?{}:e).root,i=e.prefix||"app:///",s="window"in o.GLOBAL_OBJ&&void 0!==o.GLOBAL_OBJ.window,a=e.iteratee||n({isBrowser:s,root:r,prefix:i});return{name:"RewriteFrames",processEvent:function(e){var r=e;return e.exception&&Array.isArray(e.exception.values)&&(r=function(e){try{return Object.assign({},e,{exception:Object.assign({},e.exception,{values:e.exception.values.map((function(e){return Object.assign({},e,e.stacktrace&&{stacktrace:t(e.stacktrace)})}))})})}catch(t){return e}}(r)),r}}})),t.generateIteratee=n,t.rewriteFramesIntegration=e},"./node_modules/@sentry/core/cjs/integrations/sessiontiming.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");e=r("./node_modules/@sentry/core/cjs/integration.js").defineIntegration((function(){var e=1e3*n.timestampInSeconds();return{name:"SessionTiming",processEvent:function(t){var r=1e3*n.timestampInSeconds(),o={};return Object.assign({},t,{extra:Object.assign({},t.extra,(o["session:start"]=e,o["session:duration"]=r-e,o["session:end"]=r,o))})}}})),t.sessionTimingIntegration=e},"./node_modules/@sentry/core/cjs/integrations/zoderrors.js":function(e,t,r){function n(e){return Object.assign({},e,{path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0})}function o(e,t,r){var o;if((o=!(t.exception&&t.exception.values&&r&&r.originalException))||(o=r.originalException,o=!(s.isError(o)&&"ZodError"===o.name&&Array.isArray(o.errors))),o||0===r.originalException.issues.length)return t;for(var a=(o=Object).assign,u=Object,l=u.assign,c=t.exception,d=Object,f=d.assign,p=t.exception.values[0],h=r.originalException,_=new Set,E=(h=i.makeIterator(h.issues)).next();!E.done;E=h.next())(E=E.value).path&&_.add(E.path[0]);return _=Array.from(_),_="Failed to validate keys: "+s.truncate(_.join(", "),100),a.call(o,{},t,{exception:l.call(u,{},c,{values:[f.call(d,{},p,{value:_})].concat(i.arrayFromIterable(t.exception.values.slice(1)))}),extra:Object.assign({},t.extra,{"zoderror.issues":r.originalException.errors.slice(0,e).map(n)})})}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/index.js");e=r("./node_modules/@sentry/core/cjs/integration.js").defineIntegration((function(e){var t=(e=void 0===e?{}:e).limit||10;return{name:"ZodErrors",processEvent:function(e,r){return o(t,e,r)}}})),t.applyZodErrorsToEvent=o,t.zodErrorsIntegration=e},"./node_modules/@sentry/core/cjs/metadata.js":function(e,t,r){function n(e,t){if(o.GLOBAL_OBJ._sentryModuleMetadata)for(var r=i.makeIterator(Object.keys(o.GLOBAL_OBJ._sentryModuleMetadata)),n=r.next();!n.done;n=r.next()){var u=n.value;if(n=o.GLOBAL_OBJ._sentryModuleMetadata[u],!a.has(u)){a.add(u),u=e(u);for(var l=(u=i.makeIterator(u.reverse())).next();!l.done;l=u.next())if((l=l.value).filename){s.set(l.filename,n);break}}}return s.get(t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=new Map,a=new Set;t.addMetadataToStackFrames=function(e,t){try{t.exception.values.forEach((function(t){if(t.stacktrace)for(var r=(t=i.makeIterator(t.stacktrace.frames||[])).next();!r.done;r=t.next())if((r=r.value).filename){var o=n(e,r.filename);o&&(r.module_metadata=o)}}))}catch(e){}},t.getMetadataForUrl=n,t.stripMetadataFromStackFrames=function(e){try{e.exception.values.forEach((function(e){if(e.stacktrace)for(var t=(e=i.makeIterator(e.stacktrace.frames||[])).next();!t.done;t=e.next())delete t.value.module_metadata}))}catch(e){}}},"./node_modules/@sentry/core/cjs/metrics/aggregator.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),s=r("./node_modules/@sentry/core/cjs/metrics/constants.js"),a=r("./node_modules/@sentry/core/cjs/metrics/envelope.js"),u=r("./node_modules/@sentry/core/cjs/metrics/instance.js"),l=r("./node_modules/@sentry/core/cjs/metrics/utils.js");(e=function(e){var t=this;this._client=e,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval((function(){return t._flush()}),s.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*s.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}).prototype.add=function(e,t,r,i,a,c){i=void 0===i?"none":i,a=void 0===a?{}:a,c=void 0===c?n.timestampInSeconds():c,c=Math.floor(c),t=l.sanitizeMetricKey(t);var d=l.sanitizeTags(a);i=l.sanitizeUnit(i);var f=l.getBucketKey(e,t,i,d),p=this._buckets.get(f),h=p&&e===s.SET_METRIC_TYPE?p.metric.weight:0;p?(p.metric.add(r),p.timestamp<c&&(p.timestamp=c)):(p={metric:new u.METRIC_MAP[e](r),timestamp:c,metricType:e,name:t,unit:i,tags:d},this._buckets.set(f,p)),o.updateMetricSummaryOnActiveSpan(e,t,"string"==typeof r?p.metric.weight-h:r,i,a,f),this._bucketsTotalWeight+=p.metric.weight,this._bucketsTotalWeight>=s.MAX_WEIGHT&&this.flush()},e.prototype.flush=function(){this._forceFlush=!0,this._flush()},e.prototype.close=function(){this._forceFlush=!0,clearInterval(this._interval),this._flush()},e.prototype._flush=function(){if(this._forceFlush)this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),this._buckets.clear();else{for(var e=Math.floor(n.timestampInSeconds())-s.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,t=new Map,r=i.makeIterator(this._buckets),o=r.next();!o.done;o=r.next()){var a=i.makeIterator(o.value);o=a.next().value,(a=a.next().value).timestamp<=e&&(t.set(o,a),this._bucketsTotalWeight-=a.metric.weight)}for(r=(e=i.makeIterator(t)).next();!r.done;r=e.next())r=i.makeIterator(r.value).next().value,this._buckets.delete(r);this._captureMetrics(t)}},e.prototype._captureMetrics=function(e){0<e.size&&(e=Array.from(e).map((function(e){return(e=i.makeIterator(e)).next(),e.next().value})),a.captureAggregateMetrics(this._client,e))},t.MetricsAggregator=e},"./node_modules/@sentry/core/cjs/metrics/browser-aggregator.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),i=r("./node_modules/@sentry/core/cjs/metrics/constants.js"),s=r("./node_modules/@sentry/core/cjs/metrics/envelope.js"),a=r("./node_modules/@sentry/core/cjs/metrics/instance.js"),u=r("./node_modules/@sentry/core/cjs/metrics/utils.js");(e=function(e){var t=this;this._client=e,this._buckets=new Map,this._interval=setInterval((function(){return t.flush()}),i.DEFAULT_BROWSER_FLUSH_INTERVAL)}).prototype.add=function(e,t,r,s,l,c){s=void 0===s?"none":s,l=void 0===l?{}:l,c=void 0===c?n.timestampInSeconds():c,c=Math.floor(c),t=u.sanitizeMetricKey(t);var d=u.sanitizeTags(l);s=u.sanitizeUnit(s);var f=u.getBucketKey(e,t,s,d),p=this._buckets.get(f),h=p&&e===i.SET_METRIC_TYPE?p.metric.weight:0;p?(p.metric.add(r),p.timestamp<c&&(p.timestamp=c)):(p={metric:new a.METRIC_MAP[e](r),timestamp:c,metricType:e,name:t,unit:s,tags:d},this._buckets.set(f,p)),o.updateMetricSummaryOnActiveSpan(e,t,"string"==typeof r?p.metric.weight-h:r,s,l,f)},e.prototype.flush=function(){if(0!==this._buckets.size){var e=Array.from(this._buckets.values());s.captureAggregateMetrics(this._client,e),this._buckets.clear()}},e.prototype.close=function(){clearInterval(this._interval),this.flush()},t.BrowserMetricsAggregator=e},"./node_modules/@sentry/core/cjs/metrics/constants.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.COUNTER_METRIC_TYPE="c",t.DEFAULT_BROWSER_FLUSH_INTERVAL=5e3,t.DEFAULT_FLUSH_INTERVAL=1e4,t.DISTRIBUTION_METRIC_TYPE="d",t.GAUGE_METRIC_TYPE="g",t.MAX_WEIGHT=1e4,t.SET_METRIC_TYPE="s"},"./node_modules/@sentry/core/cjs/metrics/envelope.js":function(e,t,r){function n(e,t,r,n){var s={sent_at:(new Date).toISOString()};return r&&r.sdk&&(s.sdk={name:r.sdk.name,version:r.sdk.version}),n&&t&&(s.dsn=o.dsnToString(t)),e=i.serializeMetricBuckets(e),o.createEnvelope(s,[[{type:"statsd",length:e.length},e]])}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),i=r("./node_modules/@sentry/core/cjs/metrics/utils.js");t.captureAggregateMetrics=function(e,t){o.logger.log("Flushing aggregated metrics, number of metrics: "+t.length),t=n(t,e.getDsn(),e.getSdkMetadata(),e.getOptions().tunnel),e.sendEnvelope(t)},t.createMetricEnvelope=n},"./node_modules/@sentry/core/cjs/metrics/exports-default.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/metrics/aggregator.js"),o=r("./node_modules/@sentry/core/cjs/metrics/exports.js");t.metricsDefault={increment:function(e,t,r){o.metrics.increment(n.MetricsAggregator,e,void 0===t?1:t,r)},distribution:function(e,t,r){o.metrics.distribution(n.MetricsAggregator,e,t,r)},set:function(e,t,r){o.metrics.set(n.MetricsAggregator,e,t,r)},gauge:function(e,t,r){o.metrics.gauge(n.MetricsAggregator,e,t,r)},timing:function(e,t,r,i){return o.metrics.timing(n.MetricsAggregator,e,t,void 0===r?"second":r,i)},getMetricsAggregatorForClient:function(e){return o.metrics.getMetricsAggregatorForClient(e,n.MetricsAggregator)}}},"./node_modules/@sentry/core/cjs/metrics/exports.js":function(e,t,r){function n(e,t){var r=a.getGlobalSingleton("globalMetricsAggregators",(function(){return new WeakMap})),n=r.get(e);if(n)return n;var o=new t(e);return e.on("flush",(function(){return o.flush()})),e.on("close",(function(){return o.close()})),r.set(e,o),o}function o(e,t,r,o,i){var s=(i=void 0===i?{}:i).client||u.getClient();if(s){var d=c.getActiveSpan();d=(d=d?c.getRootSpan(d):void 0)&&c.spanToJSON(d).description;var f=i;i=f.unit;var p=f.tags;f=f.timestamp;var h=s.getOptions(),_=h.release;h=h.environment;var E={};_&&(E.release=_),h&&(E.environment=h),d&&(E.transaction=d),l.DEBUG_BUILD&&a.logger.log("Adding value of "+o+" to "+t+" metric "+r),n(s,e).add(t,r,o,i,Object.assign({},E,p),f)}}function i(e,t,r,n){o(e,p.DISTRIBUTION_METRIC_TYPE,t,s(r),n)}function s(e){return"string"==typeof e?parseInt(e):e}Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/@sentry/utils/cjs/index.js"),u=r("./node_modules/@sentry/core/cjs/currentScopes.js"),l=r("./node_modules/@sentry/core/cjs/debug-build.js");r("./node_modules/@sentry/core/cjs/tracing/errors.js");var c=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),d=r("./node_modules/@sentry/core/cjs/tracing/trace.js"),f=r("./node_modules/@sentry/core/cjs/utils/handleCallbackErrors.js"),p=r("./node_modules/@sentry/core/cjs/metrics/constants.js");t.metrics={increment:function(e,t,r,n){o(e,p.COUNTER_METRIC_TYPE,t,s(void 0===r?1:r),n)},distribution:i,set:function(e,t,r,n){o(e,p.SET_METRIC_TYPE,t,r,n)},gauge:function(e,t,r,n){o(e,p.GAUGE_METRIC_TYPE,t,s(r),n)},timing:function(e,t,r,n,o){if(n=void 0===n?"second":n,"function"==typeof r){var s=a.timestampInSeconds();return d.startSpanManual({op:"metrics.timing",name:t,startTime:s,onlyIfParent:!0},(function(n){return f.handleCallbackErrors((function(){return r()}),(function(){}),(function(){var r=a.timestampInSeconds();i(e,t,r-s,Object.assign({},o,{unit:"second"})),n.end(r)}))}))}i(e,t,r,Object.assign({},o,{unit:n}))},getMetricsAggregatorForClient:n}},"./node_modules/@sentry/core/cjs/metrics/instance.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/core/cjs/metrics/constants.js");var n=r("./node_modules/@sentry/core/cjs/metrics/utils.js");(r=function(e){this._value=e}).prototype.add=function(e){this._value+=e},r.prototype.toString=function(){return""+this._value},i.global.Object.defineProperties(r.prototype,{weight:{configurable:!0,enumerable:!0,get:function(){return 1}}});var o=function(e){this._sum=this._max=this._min=this._last=e,this._count=1};o.prototype.add=function(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++},o.prototype.toString=function(){return this._last+":"+this._min+":"+this._max+":"+this._sum+":"+this._count},i.global.Object.defineProperties(o.prototype,{weight:{configurable:!0,enumerable:!0,get:function(){return 5}}});var s=function(e){this._value=[e]};s.prototype.add=function(e){this._value.push(e)},s.prototype.toString=function(){return this._value.join(":")},i.global.Object.defineProperties(s.prototype,{weight:{configurable:!0,enumerable:!0,get:function(){return this._value.length}}});var a=function(e){this.first=e,this._value=new Set([e])};a.prototype.add=function(e){this._value.add(e)},a.prototype.toString=function(){return Array.from(this._value).map((function(e){return"string"==typeof e?n.simpleHash(e):e})).join(":")},i.global.Object.defineProperties(a.prototype,{weight:{configurable:!0,enumerable:!0,get:function(){return this._value.size}}});var u={};u[e.COUNTER_METRIC_TYPE]=r,u[e.GAUGE_METRIC_TYPE]=o,u[e.DISTRIBUTION_METRIC_TYPE]=s,u[e.SET_METRIC_TYPE]=a,e=u,t.CounterMetric=r,t.DistributionMetric=s,t.GaugeMetric=o,t.METRIC_MAP=e,t.SetMetric=a},"./node_modules/@sentry/core/cjs/metrics/metric-summary.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");t.getMetricSummaryJsonForSpan=function(e){var t=e._sentryMetrics;if(t){e={};for(var r=(t=i.makeIterator(t)).next();!r.done;r=t.next()){(r=i.makeIterator(r.value)).next();var o=i.makeIterator(r.next().value);r=o.next().value,o=o.next().value,e[r]||(e[r]=[]),e[r].push(n.dropUndefinedKeys(o))}return e}},t.updateMetricSummaryOnSpan=function(e,t,r,n,o,s,a){t=t+":"+r+"@"+o,(r=(e=e._sentryMetrics||(e._sentryMetrics=new Map)).get(a))?((s=i.makeIterator(r)).next(),s=s.next().value,e.set(a,[t,{min:Math.min(s.min,n),max:Math.max(s.max,n),count:s.count+=1,sum:s.sum+=n,tags:s.tags}])):e.set(a,[t,{min:n,max:n,count:1,sum:n,tags:s}])}},"./node_modules/@sentry/core/cjs/metrics/utils.js":function(e,t,r){function n(e){return[].concat(i.arrayFromIterable(e)).reduce((function(e,t){e:for(var r=i.makeIterator(s),n=r.next();!n.done;n=r.next()){var o=i.makeIterator(n.value);if(n=o.next().value,o=o.next().value,t===n){t=o;break e}}return e+t}),"")}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];t.getBucketKey=function(e,t,r,n){return""+e+t+r+(n=Object.entries(o.dropUndefinedKeys(n)).sort((function(e,t){return e[0].localeCompare(t[0])})))},t.sanitizeMetricKey=function(e){return e.replace(/[^\w\-.]+/gi,"_")},t.sanitizeTags=function(e){var t,r={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t.replace(/[^\w\-./]+/gi,"")]=n(String(e[t])));return r},t.sanitizeUnit=function(e){return e.replace(/[^\w]+/gi,"_")},t.serializeMetricBuckets=function(e){for(var t="",r=(e=i.makeIterator(e)).next();!r.done;r=e.next()){r=r.value;var n=Object.entries(r.tags);n=0<n.length?"|#"+n.map((function(e){var t=i.makeIterator(e);return(e=t.next().value)+":"+(t=t.next().value)})).join(","):"",t+=r.name+"@"+r.unit+":"+r.metric+"|"+r.metricType+n+"|T"+r.timestamp+"\n"}return t},t.simpleHash=function(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t>>>0}},"./node_modules/@sentry/core/cjs/scope.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/session.js"),s=r("./node_modules/@sentry/core/cjs/utils/spanOnScope.js"),a=function(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=n.generatePropagationContext()};a.prototype.clone=function(){var e=new a;return e._breadcrumbs=[].concat(i.arrayFromIterable(this._breadcrumbs)),e._tags=Object.assign({},this._tags),e._extra=Object.assign({},this._extra),e._contexts=Object.assign({},this._contexts),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[].concat(i.arrayFromIterable(this._eventProcessors)),e._requestSession=this._requestSession,e._attachments=[].concat(i.arrayFromIterable(this._attachments)),e._sdkProcessingMetadata=Object.assign({},this._sdkProcessingMetadata),e._propagationContext=Object.assign({},this._propagationContext),e._client=this._client,e._lastEventId=this._lastEventId,s._setSpanForScope(e,s._getSpanForScope(this)),e},a.prototype.setClient=function(e){this._client=e},a.prototype.setLastEventId=function(e){this._lastEventId=e},a.prototype.getClient=function(){return this._client},a.prototype.lastEventId=function(){return this._lastEventId},a.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},a.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},a.prototype.setUser=function(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&o.updateSession(this._session,{user:e}),this._notifyScopeListeners(),this},a.prototype.getUser=function(){return this._user},a.prototype.getRequestSession=function(){return this._requestSession},a.prototype.setRequestSession=function(e){return this._requestSession=e,this},a.prototype.setTags=function(e){return this._tags=Object.assign({},this._tags,e),this._notifyScopeListeners(),this},a.prototype.setTag=function(e,t){var r={};return this._tags=Object.assign({},this._tags,(r[e]=t,r)),this._notifyScopeListeners(),this},a.prototype.setExtras=function(e){return this._extra=Object.assign({},this._extra,e),this._notifyScopeListeners(),this},a.prototype.setExtra=function(e,t){var r={};return this._extra=Object.assign({},this._extra,(r[e]=t,r)),this._notifyScopeListeners(),this},a.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},a.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},a.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},a.prototype.setContext=function(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this},a.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},a.prototype.getSession=function(){return this._session},a.prototype.update=function(e){if(!e)return this;var t="function"==typeof e?e(this):e;e=i.makeIterator(t instanceof u?[t.getScopeData(),t.getRequestSession()]:n.isPlainObject(t)?[e,e.requestSession]:[]),t=e.next().value,e=e.next().value;var r=(t=t||{}).extra,o=t.user,s=t.contexts,a=t.level,l=void 0===t.fingerprint?[]:t.fingerprint,c=t.propagationContext;return this._tags=Object.assign({},this._tags,t.tags),this._extra=Object.assign({},this._extra,r),this._contexts=Object.assign({},this._contexts,s),o&&Object.keys(o).length&&(this._user=o),a&&(this._level=a),l.length&&(this._fingerprint=l),c&&(this._propagationContext=c),e&&(this._requestSession=e),this},a.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._session=this._requestSession=this._fingerprint=this._transactionName=this._level=void 0,s._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=n.generatePropagationContext(),this._notifyScopeListeners(),this},a.prototype.addBreadcrumb=function(e,t){if(0>=(t="number"==typeof t?t:100))return this;e=Object.assign({},{timestamp:n.dateTimestampInSeconds()},e);var r=this._breadcrumbs;return r.push(e),this._breadcrumbs=r.length>t?r.slice(-t):r,this._notifyScopeListeners(),this},a.prototype.getLastBreadcrumb=function(){return this._breadcrumbs[this._breadcrumbs.length-1]},a.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},a.prototype.addAttachment=function(e){return this._attachments.push(e),this},a.prototype.clearAttachments=function(){return this._attachments=[],this},a.prototype.getScopeData=function(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:s._getSpanForScope(this)}},a.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=Object.assign({},this._sdkProcessingMetadata,e),this},a.prototype.setPropagationContext=function(e){return this._propagationContext=e,this},a.prototype.getPropagationContext=function(){return this._propagationContext},a.prototype.captureException=function(e,t){var r=t&&t.event_id?t.event_id:n.uuid4();return this._client?(this._client.captureException(e,Object.assign({},{originalException:e,syntheticException:Error("Sentry syntheticException")},t,{event_id:r}),this),r):(n.logger.warn("No client configured on scope - will not capture exception!"),r)},a.prototype.captureMessage=function(e,t,r){var o=r&&r.event_id?r.event_id:n.uuid4();return this._client?(this._client.captureMessage(e,t,Object.assign({},{originalException:e,syntheticException:Error(e)},r,{event_id:o}),this),o):(n.logger.warn("No client configured on scope - will not capture message!"),o)},a.prototype.captureEvent=function(e,t){var r=t&&t.event_id?t.event_id:n.uuid4();return this._client?(this._client.captureEvent(e,Object.assign({},t,{event_id:r}),this),r):(n.logger.warn("No client configured on scope - will not capture event!"),r)},a.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)};var u=a;t.Scope=u},"./node_modules/@sentry/core/cjs/sdk.js":function(e,t,r){function n(e){i.getCurrentScope().setClient(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),i=r("./node_modules/@sentry/core/cjs/currentScopes.js"),s=r("./node_modules/@sentry/core/cjs/debug-build.js");t.initAndBind=function(e,t){!0===t.debug&&(s.DEBUG_BUILD?o.logger.enable():o.consoleSandbox((function(){console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),i.getCurrentScope().update(t.initialScope),n(e=new e(t)),e.init()},t.setCurrentClient=n},"./node_modules/@sentry/core/cjs/semanticAttributes.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SEMANTIC_ATTRIBUTE_CACHE_HIT="cache.hit",t.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE="cache.item_size",t.SEMANTIC_ATTRIBUTE_CACHE_KEY="cache.key",t.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME="sentry.exclusive_time",t.SEMANTIC_ATTRIBUTE_PROFILE_ID="sentry.profile_id",t.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON="sentry.idle_span_finish_reason",t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT="sentry.measurement_unit",t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE="sentry.measurement_value",t.SEMANTIC_ATTRIBUTE_SENTRY_OP="sentry.op",t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN="sentry.origin",t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE="sentry.sample_rate",t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE="sentry.source"},"./node_modules/@sentry/core/cjs/server-runtime-client.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/baseclient.js"),s=r("./node_modules/@sentry/core/cjs/checkin.js"),a=r("./node_modules/@sentry/core/cjs/currentScopes.js"),u=r("./node_modules/@sentry/core/cjs/debug-build.js"),l=r("./node_modules/@sentry/core/cjs/sessionflusher.js"),c=r("./node_modules/@sentry/core/cjs/tracing/errors.js"),d=r("./node_modules/@sentry/core/cjs/utils/spanOnScope.js"),f=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),p=r("./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js");e=function(e){return c.registerSpanErrorInstrumentation(),o.BaseClient.call(this,e)||this},i.inherits(e,o.BaseClient),e.prototype.eventFromException=function(e,t){return n.resolvedSyncPromise(n.eventFromUnknownInput(this,this._options.stackParser,e,t))},e.prototype.eventFromMessage=function(e,t,r){return n.resolvedSyncPromise(n.eventFromMessage(this._options.stackParser,e,void 0===t?"info":t,r,this._options.attachStacktrace))},e.prototype.captureException=function(e,t,r){if(this._options.autoSessionTracking&&this._sessionFlusher){var n=a.getIsolationScope().getRequestSession();n&&"ok"===n.status&&(n.status="errored")}return o.BaseClient.prototype.captureException.call(this,e,t,r)},e.prototype.captureEvent=function(e,t,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&"exception"===(e.type||"exception")&&e.exception&&e.exception.values&&0<e.exception.values.length){var n=a.getIsolationScope().getRequestSession();n&&"ok"===n.status&&(n.status="errored")}return o.BaseClient.prototype.captureEvent.call(this,e,t,r)},e.prototype.close=function(e){return this._sessionFlusher&&this._sessionFlusher.close(),o.BaseClient.prototype.close.call(this,e)},e.prototype.initSessionFlusher=function(){var e=this._options,t=e.release;e=e.environment,t?this._sessionFlusher=new l.SessionFlusher(this,{release:t,environment:e}):u.DEBUG_BUILD&&n.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")},e.prototype.captureCheckIn=function(e,t,r){var o="checkInId"in e&&e.checkInId?e.checkInId:n.uuid4();if(!this._isEnabled())return u.DEBUG_BUILD&&n.logger.warn("SDK not enabled, will not capture checkin."),o;var a=this.getOptions(),l=a.tunnel;return a={check_in_id:o,monitor_slug:e.monitorSlug,status:e.status,release:a.release,environment:a.environment},"duration"in e&&(a.duration=e.duration),t&&(a.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone,failure_issue_threshold:t.failureIssueThreshold,recovery_threshold:t.recoveryThreshold}),t=(r=i.makeIterator(this._getTraceInfoFromScope(r))).next().value,(r=r.next().value)&&(a.contexts={trace:r}),l=s.createCheckInEnvelope(a,t,this.getSdkMetadata(),l,this.getDsn()),u.DEBUG_BUILD&&n.logger.info("Sending checkin:",e.monitorSlug,e.status),this.sendEnvelope(l),o},e.prototype._captureRequestSession=function(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():u.DEBUG_BUILD&&n.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")},e.prototype._prepareEvent=function(e,t,r,n){return this._options.platform&&(e.platform=e.platform||this._options.platform),this._options.runtime&&(e.contexts=Object.assign({},e.contexts,{runtime:(e.contexts||{}).runtime||this._options.runtime})),this._options.serverName&&(e.server_name=e.server_name||this._options.serverName),o.BaseClient.prototype._prepareEvent.call(this,e,t,r,n)},e.prototype._getTraceInfoFromScope=function(e){if(!e)return[void 0,void 0];var t=d._getSpanForScope(e);if(t)return e=f.getRootSpan(t),[p.getDynamicSamplingContextFromSpan(e),f.spanToTraceContext(e)];var r=e.getPropagationContext();return e=r.traceId,t=r.dsc,r={trace_id:e,span_id:r.spanId,parent_span_id:r.parentSpanId},t?[t,r]:[p.getDynamicSamplingContextFromClient(e,this),r]},t.ServerRuntimeClient=e},"./node_modules/@sentry/core/cjs/session.js":function(e,t,r){function n(e,t){if((t=void 0===t?{}:t).user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||o.timestampInSeconds(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:o.uuid4()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=""+t.did),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{var r=e.timestamp-e.started;e.duration=0<=r?r:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js");t.closeSession=function(e,t){var r={};t?r={status:t}:"ok"===e.status&&(r={status:"exited"}),n(e,r)},t.makeSession=function(e){var t=o.timestampInSeconds(),r={sid:o.uuid4(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:function(){return o.dropUndefinedKeys({sid:""+r.sid,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:"number"==typeof r.did||"string"==typeof r.did?""+r.did:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}};return e&&n(r,e),r},t.updateSession=n},"./node_modules/@sentry/core/cjs/sessionflusher.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/currentScopes.js");(e=function(e,t){var r=this;this._client=e,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval((function(){return r.flush()}),1e3*this.flushTimeout),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=t}).prototype.flush=function(){var e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates={},this._client.sendSession(e))},e.prototype.getSessionAggregates=function(){var e=this,t=Object.keys(this._pendingAggregates).map((function(t){return e._pendingAggregates[parseInt(t)]}));return n.dropUndefinedKeys({attrs:this._sessionAttrs,aggregates:t})},e.prototype.close=function(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()},e.prototype.incrementSessionStatusCount=function(){if(this._isEnabled){var e=o.getIsolationScope(),t=e.getRequestSession();t&&t.status&&(this._incrementSessionStatusCount(t.status,new Date),e.setRequestSession(void 0))}},e.prototype._incrementSessionStatusCount=function(e,t){t=new Date(t).setSeconds(0,0),this._pendingAggregates[t]=this._pendingAggregates[t]||{};var r=this._pendingAggregates[t];switch(r.started||(r.started=new Date(t).toISOString()),e){case"errored":return r.errored=(r.errored||0)+1,r.errored;case"ok":return r.exited=(r.exited||0)+1,r.exited;default:return r.crashed=(r.crashed||0)+1,r.crashed}},t.SessionFlusher=e},"./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js":function(e,t,r){function n(e,t){var r=t.getOptions(),n=(t.getDsn()||{}).publicKey;return e=i.dropUndefinedKeys({environment:r.environment||s.DEFAULT_ENVIRONMENT,release:r.release,public_key:n,trace_id:e}),t.emit("createDsc",e),e}function o(e){var t=a.getClient();if(!t)return{};var r=n(l.spanToJSON(e).trace_id||"",t);if(!(e=l.getRootSpan(e)))return r;var o=e._frozenDsc;if(o)return o;var i=(o=l.spanToJSON(e)).data||{},s=i[u.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];return null!=s&&(r.sample_rate=""+s),(i=i[u.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE])&&"url"!==i&&(r.transaction=o.description),r.sampled=String(l.spanIsSampled(e)),t.emit("createDsc",r),r}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/core/cjs/constants.js"),a=r("./node_modules/@sentry/core/cjs/currentScopes.js"),u=r("./node_modules/@sentry/core/cjs/semanticAttributes.js"),l=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js");t.freezeDscOnSpan=function(e,t){i.addNonEnumerableProperty(e,"_frozenDsc",t)},t.getDynamicSamplingContextFromClient=n,t.getDynamicSamplingContextFromSpan=o,t.spanToBaggageHeader=function(e){return e=o(e),i.dynamicSamplingContextToSentryBaggageHeader(e)}},"./node_modules/@sentry/core/cjs/tracing/errors.js":function(e,t,r){function n(){var e=s.getActiveSpan();(e=e&&s.getRootSpan(e))&&(i.DEBUG_BUILD&&o.logger.log("[Tracing] Root span: internal_error -> Global error occured"),e.setStatus({code:a.SPAN_STATUS_ERROR,message:"internal_error"}))}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),i=r("./node_modules/@sentry/core/cjs/debug-build.js"),s=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),a=r("./node_modules/@sentry/core/cjs/tracing/spanstatus.js"),u=!1;n.tag="sentry_tracingErrorCallback",t.registerSpanErrorInstrumentation=function(){u||(u=!0,o.addGlobalErrorInstrumentationHandler(n),o.addGlobalUnhandledRejectionInstrumentationHandler(n))}},"./node_modules/@sentry/core/cjs/tracing/hubextensions.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/tracing/errors.js");t.addTracingExtensions=function(){n.registerSpanErrorInstrumentation()}},"./node_modules/@sentry/core/cjs/tracing/idleSpan.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/currentScopes.js"),s=r("./node_modules/@sentry/core/cjs/debug-build.js"),a=r("./node_modules/@sentry/core/cjs/semanticAttributes.js"),u=r("./node_modules/@sentry/core/cjs/utils/hasTracingEnabled.js"),l=r("./node_modules/@sentry/core/cjs/utils/spanOnScope.js"),c=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),d=r("./node_modules/@sentry/core/cjs/tracing/sentryNonRecordingSpan.js"),f=r("./node_modules/@sentry/core/cjs/tracing/spanstatus.js"),p=r("./node_modules/@sentry/core/cjs/tracing/trace.js"),h={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};t.TRACING_DEFAULTS=h,t.startIdleSpan=function(e,t){function r(e){e=void 0===e?n.timestampInSeconds():e;var t=c.getSpanDescendants(D).filter((function(e){return e!==D}));if(t.length){t=(t=t.map((function(e){return c.spanToJSON(e).timestamp})).filter((function(e){return!!e}))).length?Math.max.apply(Math,i.arrayFromIterable(t)):void 0,e=c.spanTimeInputToSeconds(e);var r=c.spanToJSON(D).start_timestamp;D.end(Math.min(r?r+I/1e3:1/0,Math.max(r||-1/0,Math.min(e,t||1/0))))}else D.end(e)}function _(){m&&(clearTimeout(m),m=void 0)}function E(e){_(),m=setTimeout((function(){!S&&0===y.size&&A&&(T="idleTimeout",r(e))}),O)}function g(e){m=setTimeout((function(){!S&&A&&(T="heartbeatFailed",r(e))}),v)}t=void 0===t?{}:t;var m,y=new Map,S=!1,T="externalFinish",A=!t.disableAutoFinish,b=t,O=void 0===b.idleTimeout?h.idleTimeout:b.idleTimeout,I=void 0===b.finalTimeout?h.finalTimeout:b.finalTimeout,v=void 0===b.childSpanTimeout?h.childSpanTimeout:b.childSpanTimeout,N=b.beforeSpanEnd;if(!(b=o.getClient())||!u.hasTracingEnabled())return new d.SentryNonRecordingSpan;var R=o.getCurrentScope(),C=c.getActiveSpan(),D=function(e){return e=p.startInactiveSpan(e),l._setSpanForScope(o.getCurrentScope(),e),s.DEBUG_BUILD&&n.logger.log("[Tracing] Started span is an idle span"),e}(e);return b.on("spanStart",(function(e){S||e===D||c.spanToJSON(e).timestamp||!c.getSpanDescendants(D).includes(e)||(e=e.spanContext().spanId,_(),y.set(e,!0),g((e=n.timestampInSeconds())+v/1e3))})),b.on("spanEnd",(function(e){if(!S){var t=e.spanContext().spanId;y.has(t)&&y.delete(t),0===y.size&&E((t=n.timestampInSeconds())+O/1e3),e===D&&function(){S=!0,y.clear(),N&&N(D),l._setSpanForScope(R,C);var e=c.spanToJSON(D),t=e.timestamp,r=e.start_timestamp;if(t&&r){(e.data||{})[a.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||D.setAttribute(a.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,T),n.logger.log('[Tracing] Idle span "'+e.op+'" finished');var o=0;c.getSpanDescendants(D).filter((function(e){return e!==D})).forEach((function(e){e.isRecording()&&(e.setStatus({code:f.SPAN_STATUS_ERROR,message:"cancelled"}),e.end(t),s.DEBUG_BUILD&&n.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(e,void 0,2)));var r=c.spanToJSON(e),i=void 0===r.start_timestamp?0:r.start_timestamp,a=i<=t;r=(void 0===r.timestamp?0:r.timestamp)-i<(I+O)/1e3,s.DEBUG_BUILD&&(i=JSON.stringify(e,void 0,2),a?r||n.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",i):n.logger.log("[Tracing] Discarding span since it happened after idle span was finished",i)),r&&a||(c.removeChildSpanFromSpan(D,e),o++)})),0<o&&D.setAttribute("sentry.idle_span_discarded_spans",o)}}()}})),b.on("idleSpanEnableAutoFinish",(function(e){e===D&&(A=!0,E(),y.size&&g())})),t.disableAutoFinish||E(),setTimeout((function(){S||(D.setStatus({code:f.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),T="finalTimeout",r())}),I),D}},"./node_modules/@sentry/core/cjs/tracing/logSpans.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/debug-build.js"),i=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js");t.logSpanEnd=function(e){if(o.DEBUG_BUILD){var t=i.spanToJSON(e),r=void 0===t.description?"< unknown name >":t.description;t=void 0===t.op?"< unknown op >":t.op;var s=e.spanContext().spanId,a=i.getRootSpan(e);n.logger.log('[Tracing] Finishing "'+t+'" '+(a===e?"root ":"")+'span "'+r+'" with ID '+s)}},t.logSpanStart=function(e){if(o.DEBUG_BUILD){var t=i.spanToJSON(e),r=void 0===t.description?"< unknown name >":t.description,s=void 0===t.op?"< unknown op >":t.op,a=t.parent_span_id,u=e.spanContext().spanId,l=i.spanIsSampled(e),c=(t=i.getRootSpan(e))===e;e="[Tracing] Starting "+(l?"sampled":"unsampled")+" "+(c?"root ":"")+"span",r=["op: "+s,"name: "+r,"ID: "+u],a&&r.push("parent ID: "+a),c||(s=(a=i.spanToJSON(t)).op,a=a.description,r.push("root ID: "+t.spanContext().spanId),s&&r.push("root op: "+s),a&&r.push("root description: "+a)),n.logger.log(e+"\n  "+r.join("\n  "))}}},"./node_modules/@sentry/core/cjs/tracing/measurement.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/semanticAttributes.js"),o=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js");t.setMeasurement=function(e,t,r){var i=o.getActiveSpan();if(i=i&&o.getRootSpan(i)){var s={};i.addEvent(e,(s[n.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]=t,s[n.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]=r,s))}},t.timedEventsToMeasurements=function(e){if(e&&0!==e.length){var t={};return e.forEach((function(e){var r=e.attributes||{},o=r[n.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT];r=r[n.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE],"string"==typeof o&&"number"==typeof r&&(t[e.name]={value:r,unit:o})})),t}}},"./node_modules/@sentry/core/cjs/tracing/sampling.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/debug-build.js"),i=r("./node_modules/@sentry/core/cjs/utils/hasTracingEnabled.js"),s=r("./node_modules/@sentry/core/cjs/utils/parseSampleRate.js");t.sampleSpan=function(e,t){if(!i.hasTracingEnabled(e))return[!1];t="function"==typeof e.tracesSampler?e.tracesSampler(t):void 0!==t.parentSampled?t.parentSampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1;var r=s.parseSampleRate(t);return void 0===r?(o.DEBUG_BUILD&&n.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:(o.DEBUG_BUILD&&n.logger.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(t)+")"),[!1,r]):(o.DEBUG_BUILD&&n.logger.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,r])}},"./node_modules/@sentry/core/cjs/tracing/sentryNonRecordingSpan.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js");(e=function(e){e=void 0===e?{}:e,this._traceId=e.traceId||n.uuid4(),this._spanId=e.spanId||n.uuid4().substring(16)}).prototype.spanContext=function(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:o.TRACE_FLAG_NONE}},e.prototype.end=function(e){},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.isRecording=function(){return!1},e.prototype.addEvent=function(e,t,r){return this},t.SentryNonRecordingSpan=e},"./node_modules/@sentry/core/cjs/tracing/sentrySpan.js":function(e,t,r){function n(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function o(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/core/cjs/currentScopes.js"),a=r("./node_modules/@sentry/core/cjs/debug-build.js"),u=r("./node_modules/@sentry/core/cjs/envelope.js"),l=r("./node_modules/@sentry/core/cjs/metrics/metric-summary.js"),c=r("./node_modules/@sentry/core/cjs/semanticAttributes.js"),d=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),f=r("./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js"),p=r("./node_modules/@sentry/core/cjs/tracing/logSpans.js"),h=r("./node_modules/@sentry/core/cjs/tracing/measurement.js"),_=r("./node_modules/@sentry/core/cjs/tracing/utils.js"),E=function(e){e=void 0===e?{}:e,this._traceId=e.traceId||i.uuid4(),this._spanId=e.spanId||i.uuid4().substring(16),this._startTime=e.startTimestamp||i.timestampInSeconds(),this._attributes={};var t={};this.setAttributes(Object.assign({},(t[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="manual",t[c.SEMANTIC_ATTRIBUTE_SENTRY_OP]=e.op,t),e.attributes)),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()};E.prototype.spanContext=function(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:this._sampled?d.TRACE_FLAG_SAMPLED:d.TRACE_FLAG_NONE}},E.prototype.setAttribute=function(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t},E.prototype.setAttributes=function(e){var t=this;Object.keys(e).forEach((function(r){return t.setAttribute(r,e[r])}))},E.prototype.updateStartTime=function(e){this._startTime=d.spanTimeInputToSeconds(e)},E.prototype.setStatus=function(e){return this._status=e,this},E.prototype.updateName=function(e){return this._name=e,this},E.prototype.end=function(e){this._endTime||(this._endTime=d.spanTimeInputToSeconds(e),p.logSpanEnd(this),this._onSpanEnded())},E.prototype.getSpanJSON=function(){return i.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:d.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:l.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[c.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[c.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:h.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&d.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?d.getRootSpan(this).spanContext().spanId:void 0})},E.prototype.isRecording=function(){return!this._endTime&&!!this._sampled},E.prototype.addEvent=function(e,t,r){return a.DEBUG_BUILD&&i.logger.log("[Tracing] Adding an event to span:",e),r=n(t)?t:r||i.timestampInSeconds(),t=n(t)?{}:t||{},e={name:e,time:d.spanTimeInputToSeconds(r),attributes:t},this._events.push(e),this},E.prototype.isStandaloneSpan=function(){return!!this._isStandaloneSpan},E.prototype._onSpanEnded=function(){var e=s.getClient();e&&e.emit("spanEnd",this),(this._isStandaloneSpan||this===d.getRootSpan(this))&&(this._isStandaloneSpan?function(e){var t=s.getClient();if(t){var r=e[1];r&&0!==r.length?(t=t.getTransport())&&t.send(e).then(null,(function(e){a.DEBUG_BUILD&&i.logger.error("Error while sending span:",e)})):t.recordDroppedEvent("before_send","span")}}(u.createSpanEnvelope([this],e)):(e=this._convertSpanToTransaction())&&(_.getCapturedScopesOnSpan(this).scope||s.getCurrentScope()).captureEvent(e))},E.prototype._convertSpanToTransaction=function(){var e=this;if(o(d.spanToJSON(this))){this._name||(a.DEBUG_BUILD&&i.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");var t=_.getCapturedScopesOnSpan(this),r=t.scope;t=t.isolationScope;var n=(r||s.getCurrentScope()).getClient()||s.getClient();if(!0===this._sampled){n=d.getSpanDescendants(this).filter((function(t){return t!==e&&!(t instanceof E&&t.isStandaloneSpan())})).map((function(e){return d.spanToJSON(e)})).filter(o);var u=this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];return r=Object.assign({},{contexts:{trace:d.spanToTransactionTraceContext(this)},spans:1e3<n.length?n.sort((function(e,t){return e.start_timestamp-t.start_timestamp})).slice(0,1e3):n,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:Object.assign({},{capturedSpanScope:r,capturedSpanIsolationScope:t},i.dropUndefinedKeys({dynamicSamplingContext:f.getDynamicSamplingContextFromSpan(this)})),_metrics_summary:l.getMetricSummaryJsonForSpan(this)},u&&{transaction_info:{source:u}}),(t=h.timedEventsToMeasurements(this._events))&&Object.keys(t).length&&(a.DEBUG_BUILD&&i.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(t,void 0,2)),r.measurements=t),r}a.DEBUG_BUILD&&i.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction")}},t.SentrySpan=E},"./node_modules/@sentry/core/cjs/tracing/spanstatus.js":function(e,t){function r(e){if(400>e&&100<=e)return{code:1};if(400<=e&&500>e)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(500<=e&&600>e)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}Object.defineProperty(t,"__esModule",{value:!0}),t.SPAN_STATUS_ERROR=2,t.SPAN_STATUS_OK=1,t.SPAN_STATUS_UNSET=0,t.getSpanStatusFromHttpCode=r,t.setHttpStatus=function(e,t){e.setAttribute("http.response.status_code",t),"unknown_error"!==(t=r(t)).message&&e.setStatus(t)}},"./node_modules/@sentry/core/cjs/tracing/trace.js":function(e,t,r){function n(e,t){var r=a();return r.withActiveSpan?r.withActiveSpan(e,t):f.withScope((function(r){return m._setSpanForScope(r,e||void 0),t(r)}))}function o(e){var t=e.parentSpan,r=e.spanContext,n=e.forceTransaction;if(e=e.scope,!g.hasTracingEnabled())return new b.SentryNonRecordingSpan;var o=f.getIsolationScope();if(t&&!n){var i=t.spanContext();n=i.spanId,i=i.traceId;var s=!e.getScopeData().sdkProcessingMetadata.__SENTRY_SUPPRESS_TRACING__&&y.spanIsSampled(t);n=s?new O.SentrySpan(Object.assign({},r,{parentSpanId:n,traceId:i,sampled:s})):new b.SentryNonRecordingSpan({traceId:i}),y.addChildSpanToSpan(t,n),(i=f.getClient())&&(i.emit("spanStart",n),r.endTimestamp&&i.emit("spanEnd",n)),r=n,y.addChildSpanToSpan(t,r)}else t?(n=S.getDynamicSamplingContextFromSpan(t),i=(s=t.spanContext()).traceId,s=s.spanId,t=y.spanIsSampled(t),r=u(Object.assign({},{traceId:i,parentSpanId:s},r),e,t),S.freezeDscOnSpan(r,n)):(t=(n=Object.assign({},o.getPropagationContext(),e.getPropagationContext())).dsc,i=n.sampled,r=u(Object.assign({},{traceId:n.traceId,parentSpanId:n.parentSpanId},r),e,i),t&&S.freezeDscOnSpan(r,t));return T.logSpanStart(r),v.setCapturedScopesOnSpan(r,e,o),r}function s(e){var t=Object.assign({},{isStandalone:(e.experimental||{}).standalone},e);return e.startTime?((t=Object.assign({},t)).startTimestamp=y.spanTimeInputToSeconds(e.startTime),delete t.startTime,t):t}function a(){var e=d.getMainCarrier();return p.getAsyncContextStrategy(e)}function u(e,t,r){var n=f.getClient(),o=n&&n.getOptions()||{},s=void 0===e.name?"":e.name,a=e.attributes;return r=i.makeIterator(t.getScopeData().sdkProcessingMetadata.__SENTRY_SUPPRESS_TRACING__?[!1]:A.sampleSpan(o,{name:s,parentSampled:r,attributes:a,transactionContext:{name:s,parentSampled:r}})),t=r.next().value,r=r.next().value,o={},e=new O.SentrySpan(Object.assign({},e,{attributes:Object.assign({},(o[_.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",o),e.attributes),sampled:t})),void 0!==r&&e.setAttribute(_.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,r),n&&n.emit("spanStart",e),e}function l(e){if(e=m._getSpanForScope(e)){var t=f.getClient();return(t?t.getOptions():{}).parentSpanIsAlwaysRootSpan?y.getRootSpan(e):e}}Object.defineProperty(t,"__esModule",{value:!0});var c=r("./node_modules/@sentry/utils/cjs/index.js"),d=r("./node_modules/@sentry/core/cjs/carrier.js"),f=r("./node_modules/@sentry/core/cjs/currentScopes.js"),p=r("./node_modules/@sentry/core/cjs/asyncContext/index.js"),h=r("./node_modules/@sentry/core/cjs/debug-build.js"),_=r("./node_modules/@sentry/core/cjs/semanticAttributes.js"),E=r("./node_modules/@sentry/core/cjs/utils/handleCallbackErrors.js"),g=r("./node_modules/@sentry/core/cjs/utils/hasTracingEnabled.js"),m=r("./node_modules/@sentry/core/cjs/utils/spanOnScope.js"),y=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js"),S=r("./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js"),T=r("./node_modules/@sentry/core/cjs/tracing/logSpans.js"),A=r("./node_modules/@sentry/core/cjs/tracing/sampling.js"),b=r("./node_modules/@sentry/core/cjs/tracing/sentryNonRecordingSpan.js"),O=r("./node_modules/@sentry/core/cjs/tracing/sentrySpan.js"),I=r("./node_modules/@sentry/core/cjs/tracing/spanstatus.js"),v=r("./node_modules/@sentry/core/cjs/tracing/utils.js");t.continueTrace=function(e,t){var r=e.sentryTrace,n=e.baggage;return f.withScope((function(e){var o=c.propagationContextFromHeaders(r,n);return e.setPropagationContext(o),t()}))},t.startInactiveSpan=function(e){var t=a();if(t.startInactiveSpan)return t.startInactiveSpan(e);t=s(e);var r=e.scope||f.getCurrentScope(),n=l(r);return e.onlyIfParent&&!n?new b.SentryNonRecordingSpan:o({parentSpan:n,spanContext:t,forceTransaction:e.forceTransaction,scope:r})},t.startNewTrace=function(e){return f.withScope((function(t){return t.setPropagationContext(c.generatePropagationContext()),h.DEBUG_BUILD&&c.logger.info("Starting a new trace with id "+t.getPropagationContext().traceId),n(null,e)}))},t.startSpan=function(e,t){var r=a();if(r.startSpan)return r.startSpan(e,t);var n=s(e);return f.withScope(e.scope,(function(r){var i=l(r),s=e.onlyIfParent&&!i?new b.SentryNonRecordingSpan:o({parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return m._setSpanForScope(r,s),E.handleCallbackErrors((function(){return t(s)}),(function(){var e=y.spanToJSON(s).status;!s.isRecording()||e&&"ok"!==e||s.setStatus({code:I.SPAN_STATUS_ERROR,message:"internal_error"})}),(function(){return s.end()}))}))},t.startSpanManual=function(e,t){var r=a();if(r.startSpanManual)return r.startSpanManual(e,t);var n=s(e);return f.withScope(e.scope,(function(r){function i(){a.end()}var s=l(r),a=e.onlyIfParent&&!s?new b.SentryNonRecordingSpan:o({parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return m._setSpanForScope(r,a),E.handleCallbackErrors((function(){return t(a,i)}),(function(){var e=y.spanToJSON(a).status;!a.isRecording()||e&&"ok"!==e||a.setStatus({code:I.SPAN_STATUS_ERROR,message:"internal_error"})}))}))},t.suppressTracing=function(e){var t=a();return t.suppressTracing?t.suppressTracing(e):f.withScope((function(t){var r={};return t.setSDKProcessingMetadata((r.__SENTRY_SUPPRESS_TRACING__=!0,r)),e()}))},t.withActiveSpan=n},"./node_modules/@sentry/core/cjs/tracing/utils.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");t.stripUrlQueryAndFragment=n.stripUrlQueryAndFragment,t.getCapturedScopesOnSpan=function(e){return{scope:e._sentryScope,isolationScope:e._sentryIsolationScope}},t.setCapturedScopesOnSpan=function(e,t,r){e&&(n.addNonEnumerableProperty(e,"_sentryIsolationScope",r),n.addNonEnumerableProperty(e,"_sentryScope",t))}},"./node_modules/@sentry/core/cjs/transports/base.js":function(e,t,r){function n(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),i=r("./node_modules/@sentry/core/cjs/debug-build.js");t.DEFAULT_TRANSPORT_BUFFER_SIZE=64,t.createTransport=function(e,t,r){r=void 0===r?o.makePromiseBuffer(e.bufferSize||64):r;var s={};return{send:function(a){var u=[];if(o.forEachEnvelopeItem(a,(function(t,r){var i=o.envelopeItemTypeToDataCategory(r);o.isRateLimited(s,i)?(t=n(t,r),e.recordDroppedEvent("ratelimit_backoff",i,t)):u.push(t)})),0===u.length)return o.resolvedSyncPromise({});var l=o.createEnvelope(a[0],u),c=function(t){o.forEachEnvelopeItem(l,(function(r,i){r=n(r,i),e.recordDroppedEvent(t,o.envelopeItemTypeToDataCategory(i),r)}))};return r.add((function(){return t({body:o.serializeEnvelope(l)}).then((function(e){return void 0!==e.statusCode&&(200>e.statusCode||300<=e.statusCode)&&i.DEBUG_BUILD&&o.logger.warn("Sentry responded with status code "+e.statusCode+" to sent event."),s=o.updateRateLimits(s,e),e}),(function(e){throw c("network_error"),e}))})).then((function(e){return e}),(function(e){if(e instanceof o.SentryError)return i.DEBUG_BUILD&&o.logger.error("Skipped sending event because buffer is full."),c("queue_overflow"),o.resolvedSyncPromise({});throw e}))},flush:function(e){return r.drain(e)}}}},"./node_modules/@sentry/core/cjs/transports/multiplexed.js":function(e,t,r){function n(e,t){var r;return o.forEachEnvelopeItem(e,(function(e,n){return t.includes(n)&&(r=Array.isArray(e)?e[1]:void 0),!!r})),r}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/core/cjs/api.js");t.eventFromEnvelope=n,t.makeMultiplexedTransport=function(e,t){return function(r){function a(t,a){var u=a?t+":"+a:t,c=l.get(u);if(!c){if(!(c=o.dsnFromString(t)))return;c=s.getEnvelopeEndpointWithUrlEncodedAuth(c,r.tunnel),c=a?function(e,t){return function(r){var o=e(r);return Object.assign({},o,{send:function(e){var r;return i.asyncExecutePromiseGeneratorProgram((function(i){return(r=n(e,["event","transaction","profile","replay_event"]))&&(r.release=t),i.return(o.send(e))}))}})}}(e,a)(Object.assign({},r,{url:c})):e(Object.assign({},r,{url:c})),l.set(u,c)}return[t,c]}var u=e(r),l=new Map;return{send:function(e){function r(t){return n(e,t&&t.length?t:["event"])}var s,l;return i.asyncExecutePromiseGeneratorProgram((function(n){return 1==n.nextAddress?(0===(s=t({envelope:e,getEvent:r}).map((function(e){return"string"==typeof e?a(e,void 0):a(e.dsn,e.release)})).filter((function(e){return!!e}))).length&&s.push(["",u]),n.yield(Promise.all(s.map((function(t){var r=i.makeIterator(t);t=r.next().value;var n=(r=r.next().value).send;return t=o.createEnvelope(t?Object.assign({},e[0],{dsn:t}):e[0],e[1]),n.call(r,t)}))),2)):(l=n.yieldResult,n.return(l[0]))}))},flush:function(e){var t,r;return i.asyncExecutePromiseGeneratorProgram((function(n){return 1==n.nextAddress?(t=[].concat(i.arrayFromIterable(l.values()),[u]),n.yield(Promise.all(t.map((function(t){return t.flush(e)}))),2)):(r=n.yieldResult,n.return(r.every((function(e){return e}))))}))}}}}},"./node_modules/@sentry/core/cjs/transports/offline.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/debug-build.js");t.MIN_DELAY=100,t.START_DELAY=5e3,t.makeOfflineTransport=function(e){function t(){var e=i.getRestArguments.apply(0,arguments);o.DEBUG_BUILD&&n.logger.info.apply(n.logger,["[Offline]:"].concat(i.arrayFromIterable(e)))}return function(r){function o(e){l&&clearTimeout(l),"number"!=typeof(l=setTimeout((function(){var e;return i.asyncExecutePromiseGeneratorProgram((function(r){if(1==r.nextAddress)return l=void 0,r.yield(c.shift(),2);(e=r.yieldResult)&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),a(e,!0).catch((function(e){t("Failed to retry sending",e)}))),r.jumpToEnd()}))}),e))&&l.unref&&l.unref()}function s(){l||(o(d),d=Math.min(2*d,36e5))}function a(e,a){var l,f,p;return a=void 0!==a&&a,i.asyncExecutePromiseGeneratorProgram((function(i){switch(i.nextAddress){case 1:if(a||!n.envelopeContainsItemType(e,["replay_event","replay_recording"])){i.jumpTo(2);break}return i.yield(c.push(e),3);case 3:return o(100),i.return({});case 2:return i.setCatchFinallyBlocks(4),i.yield(u.send(e),6);case 6:if(l=i.yieldResult,f=100,l)if(l.headers&&l.headers["retry-after"])f=n.parseRetryAfterHeader(l.headers["retry-after"]);else if(l.headers&&l.headers["x-sentry-rate-limits"])f=6e4;else if(400<=(l.statusCode||0))return i.return(l);return o(f),d=5e3,i.return(l);case 4:p=i.enterCatchBlock();var h=i.yield,_=p,E=d;return _=!n.envelopeContainsItemType(e,["client_report"])&&(!r.shouldStore||r.shouldStore(e,_,E)),h.call(i,_,7);case 7:if(!i.yieldResult)throw p;return a?i.yield(c.unshift(e),10):i.yield(c.push(e),10);case 10:return s(),t("Error sending. Event queued.",p),i.return({})}}))}var u=e(r);if(!r.createStore)throw Error("No `createStore` function was provided");var l,c=r.createStore(r),d=5e3;return r.flushAtStartup&&s(),{send:a,flush:function(e){return u.flush(e)}}}}},"./node_modules/@sentry/core/cjs/trpc.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/currentScopes.js"),i=r("./node_modules/@sentry/core/cjs/exports.js"),s=r("./node_modules/@sentry/core/cjs/semanticAttributes.js");r("./node_modules/@sentry/core/cjs/tracing/errors.js"),r("./node_modules/@sentry/core/cjs/debug-build.js");var a=r("./node_modules/@sentry/core/cjs/tracing/trace.js"),u={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};t.trpcMiddleware=function(e){return e=void 0===e?{}:e,function(t){function r(e){"object"==typeof e&&null!==e&&"ok"in e&&!e.ok&&"error"in e&&i.captureException(e.error,u)}var l=t.path,c=t.type,d=t.next;t=t.rawInput;var f=o.getClient();return f=f&&f.getOptions(),c={procedure_type:c},(void 0!==e.attachRpcInput?e.attachRpcInput:f&&f.sendDefaultPii)&&(c.input=n.normalize(t)),i.setContext("trpc",c),c={},a.startSpanManual({name:"trpc/"+l,op:"rpc.server",attributes:(c[s.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="route",c[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]="auto.rpc.trpc",c)},(function(e){try{var t=d()}catch(t){throw i.captureException(t,u),e.end(),t}return n.isThenable(t)?t.then((function(t){return r(t),e.end(),t}),(function(t){throw i.captureException(t,u),e.end(),t})):(r(t),e.end(),t)}))}}},"./node_modules/@sentry/core/cjs/utils/applyScopeDataToEvent.js":function(e,t,r){function n(e,t,r){if(r&&Object.keys(r).length)for(var n in e[t]=Object.assign({},e[t]),r)Object.prototype.hasOwnProperty.call(r,n)&&(e[t][n]=r[n])}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/index.js"),s=r("./node_modules/@sentry/core/cjs/tracing/dynamicSamplingContext.js"),a=r("./node_modules/@sentry/core/cjs/utils/spanUtils.js");t.applyScopeDataToEvent=function(e,t){var r=t.fingerprint,n=t.span,u=t.breadcrumbs,l=t.sdkProcessingMetadata,c=t.tags,d=t.user,f=t.contexts,p=t.level,h=t.transactionName;(t=o.dropUndefinedKeys(t.extra))&&Object.keys(t).length&&(e.extra=Object.assign({},t,e.extra)),(c=o.dropUndefinedKeys(c))&&Object.keys(c).length&&(e.tags=Object.assign({},c,e.tags)),(d=o.dropUndefinedKeys(d))&&Object.keys(d).length&&(e.user=Object.assign({},d,e.user)),(f=o.dropUndefinedKeys(f))&&Object.keys(f).length&&(e.contexts=Object.assign({},f,e.contexts)),p&&(e.level=p),h&&"transaction"!==e.type&&(e.transaction=h),n&&(e.contexts=Object.assign({},{trace:a.spanToTraceContext(n)},e.contexts),e.sdkProcessingMetadata=Object.assign({},{dynamicSamplingContext:s.getDynamicSamplingContextFromSpan(n)},e.sdkProcessingMetadata),n=a.getRootSpan(n),(n=a.spanToJSON(n).description)&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)),e.fingerprint=e.fingerprint?o.arrayify(e.fingerprint):[],r&&(e.fingerprint=e.fingerprint.concat(r)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint,r=[].concat(i.arrayFromIterable(e.breadcrumbs||[]),i.arrayFromIterable(u)),e.breadcrumbs=r.length?r:void 0,e.sdkProcessingMetadata=Object.assign({},e.sdkProcessingMetadata,l)},t.mergeAndOverwriteScopeData=n,t.mergeScopeData=function(e,t){var r=t.tags,o=t.user,s=t.contexts,a=t.level,u=t.sdkProcessingMetadata,l=t.breadcrumbs,c=t.fingerprint,d=t.eventProcessors,f=t.attachments,p=t.propagationContext,h=t.transactionName,_=t.span;n(e,"extra",t.extra),n(e,"tags",r),n(e,"user",o),n(e,"contexts",s),n(e,"sdkProcessingMetadata",u),a&&(e.level=a),h&&(e.transactionName=h),_&&(e.span=_),l.length&&(e.breadcrumbs=[].concat(i.arrayFromIterable(e.breadcrumbs),i.arrayFromIterable(l))),c.length&&(e.fingerprint=[].concat(i.arrayFromIterable(e.fingerprint),i.arrayFromIterable(c))),d.length&&(e.eventProcessors=[].concat(i.arrayFromIterable(e.eventProcessors),i.arrayFromIterable(d))),f.length&&(e.attachments=[].concat(i.arrayFromIterable(e.attachments),i.arrayFromIterable(f))),e.propagationContext=Object.assign({},e.propagationContext,p)}},"./node_modules/@sentry/core/cjs/utils/handleCallbackErrors.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");t.handleCallbackErrors=function(e,t,r){r=void 0===r?function(){}:r;try{var o=e()}catch(e){throw t(e),r(),e}return function(e,t,r){return n.isThenable(e)?e.then((function(e){return r(),e}),(function(e){throw t(e),r(),e})):(r(),e)}(o,t,r)}},"./node_modules/@sentry/core/cjs/utils/hasTracingEnabled.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/core/cjs/currentScopes.js");t.hasTracingEnabled=function(e){return!("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)&&(e||(e=(e=n.getClient())&&e.getOptions()),!!e&&(e.enableTracing||"tracesSampleRate"in e||"tracesSampler"in e))}},"./node_modules/@sentry/core/cjs/utils/isSentryRequestUrl.js":function(e,t){function r(e){return"/"===e[e.length-1]?e.slice(0,-1):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isSentryRequestUrl=function(e,t){var n=t&&t.getDsn();return t=t&&t.getOptions().tunnel,(n=!!n&&e.includes(n.host))||(n=!!t&&r(e)===r(t)),n}},"./node_modules/@sentry/core/cjs/utils/parameterize.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parameterize=function(e){var t=i.getRestArguments.apply(1,arguments),r=new String(String.raw.apply(String,[e].concat(i.arrayFromIterable(t))));return r.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),r.__sentry_template_values__=t,r}},"./node_modules/@sentry/core/cjs/utils/parseSampleRate.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js"),o=r("./node_modules/@sentry/core/cjs/debug-build.js");t.parseSampleRate=function(e){if("boolean"==typeof e)return Number(e);var t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||0>t||1<t))return t;o.DEBUG_BUILD&&n.logger.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(e)+" of type "+JSON.stringify(typeof e)+".")}},"./node_modules/@sentry/core/cjs/utils/prepareEvent.js":function(e,t,r){function n(e,t){var r=s.GLOBAL_OBJ._sentryDebugIds;if(r){var n=f.get(t);if(n)var o=n;else o=new Map,f.set(t,o);var i=Object.keys(r).reduce((function(e,n){var i=o.get(n);i||(i=t(n),o.set(n,i));for(var s=i.length-1;0<=s;s--){var a=i[s];if(a.filename){e[a.filename]=r[n];break}}return e}),{});try{e.exception.values.forEach((function(e){e.stacktrace.frames.forEach((function(e){e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}}function o(e){var t={};try{e.exception.values.forEach((function(e){e.stacktrace.frames.forEach((function(e){e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0!==Object.keys(t).length){e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];var r=e.debug_meta.images;Object.keys(t).forEach((function(e){r.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/index.js"),a=r("./node_modules/@sentry/core/cjs/constants.js"),u=r("./node_modules/@sentry/core/cjs/currentScopes.js"),l=r("./node_modules/@sentry/core/cjs/eventProcessors.js"),c=r("./node_modules/@sentry/core/cjs/scope.js"),d=r("./node_modules/@sentry/core/cjs/utils/applyScopeDataToEvent.js"),f=new WeakMap,p="user level extra contexts tags fingerprint requestSession propagationContext".split(" ");t.applyDebugIds=n,t.applyDebugMeta=o,t.parseEventHintOrCaptureContext=function(e){if(e)return e instanceof c.Scope||"function"==typeof e||function(e){return Object.keys(e).some((function(e){return p.includes(e)}))}(e)?{captureContext:e}:e},t.prepareEvent=function(e,t,r,f,p,h){var _=void 0===e.normalizeDepth?3:e.normalizeDepth,E=void 0===e.normalizeMaxBreadth?1e3:e.normalizeMaxBreadth,g=Object.assign({},t,{event_id:t.event_id||r.event_id||s.uuid4(),timestamp:t.timestamp||s.dateTimestampInSeconds()}),m=r.integrations||e.integrations.map((function(e){return e.name}));return function(e,t){var r=t.environment,n=t.release,o=t.dist,i=void 0===t.maxValueLength?250:t.maxValueLength;"environment"in e||(e.environment="environment"in t?r:a.DEFAULT_ENVIRONMENT),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==o&&(e.dist=o),e.message&&(e.message=s.truncate(e.message,i)),(t=e.exception&&e.exception.values&&e.exception.values[0])&&t.value&&(t.value=s.truncate(t.value,i)),(e=e.request)&&e.url&&(e.url=s.truncate(e.url,i))}(g,e),0<m.length&&(g.sdk=g.sdk||{},g.sdk.integrations=[].concat(i.arrayFromIterable(g.sdk.integrations||[]),i.arrayFromIterable(m))),void 0===t.type&&n(g,e.stackParser),t=function(e,t){return t?((e=e?e.clone():new c.Scope).update(t),e):e}(f,r.captureContext),r.mechanism&&s.addExceptionMechanism(g,r.mechanism),p=p?p.getEventProcessors():[],e=u.getGlobalScope().getScopeData(),h&&(h=h.getScopeData(),d.mergeScopeData(e,h)),t&&(h=t.getScopeData(),d.mergeScopeData(e,h)),(h=[].concat(i.arrayFromIterable(r.attachments||[]),i.arrayFromIterable(e.attachments))).length&&(r.attachments=h),d.applyScopeDataToEvent(g,e),h=[].concat(i.arrayFromIterable(p),i.arrayFromIterable(e.eventProcessors)),l.notifyEventProcessors(h,g,r).then((function(e){return e&&o(e),"number"==typeof _&&0<_?function(e,t,r){if(!e)return null;var n=Object.assign({},e,e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return Object.assign({},e,e.data&&{data:s.normalize(e.data,t,r)})}))},e.user&&{user:s.normalize(e.user,t,r)},e.contexts&&{contexts:s.normalize(e.contexts,t,r)},e.extra&&{extra:s.normalize(e.extra,t,r)});return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=s.normalize(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((function(e){return Object.assign({},e,e.data&&{data:s.normalize(e.data,t,r)})}))),n}(e,_,E):e}))}},"./node_modules/@sentry/core/cjs/utils/sdkMetadata.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");t.applySdkMetadata=function(e,t,r,o){r=void 0===r?[t]:r,o=void 0===o?"npm":o;var i=e._metadata||{};i.sdk||(i.sdk={name:"sentry.javascript."+t,packages:r.map((function(e){return{name:o+":@sentry/"+e,version:n.SDK_VERSION}})),version:n.SDK_VERSION}),e._metadata=i}},"./node_modules/@sentry/core/cjs/utils/spanOnScope.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/index.js");t._getSpanForScope=function(e){return e._sentrySpan},t._setSpanForScope=function(e,t){t?n.addNonEnumerableProperty(e,"_sentrySpan",t):delete e._sentrySpan}},"./node_modules/@sentry/core/cjs/utils/spanUtils.js":function(e,t,r){function n(e){return e="number"==typeof e?9999999999<e?e/1e3:e:Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?9999999999<(e=e.getTime())?e/1e3:e:l.timestampInSeconds()}function o(e){if("function"==typeof e.getSpanJSON)return e.getSpanJSON();try{var t=e.spanContext(),r=t.spanId,o=t.traceId;if(e.attributes&&e.startTime&&e.name&&e.endTime&&e.status){var i=e.attributes,s=e.endTime,u=e.status;return l.dropUndefinedKeys({span_id:r,trace_id:o,data:i,description:e.name,parent_span_id:e.parentSpanId,start_timestamp:n(e.startTime),timestamp:n(s)||void 0,status:a(u),op:i[h.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:i[h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:p.getMetricSummaryJsonForSpan(e)})}return{span_id:r,trace_id:o}}catch(e){return{}}}function s(e){return 1===e.spanContext().traceFlags}function a(e){if(e&&e.code!==_.SPAN_STATUS_UNSET)return e.code===_.SPAN_STATUS_OK?"ok":e.message||"unknown_error"}function u(){var e=d.getMainCarrier();return(e=c.getAsyncContextStrategy(e)).getActiveSpan?e.getActiveSpan():E._getSpanForScope(f.getCurrentScope())}Object.defineProperty(t,"__esModule",{value:!0});var l=r("./node_modules/@sentry/utils/cjs/index.js"),c=r("./node_modules/@sentry/core/cjs/asyncContext/index.js"),d=r("./node_modules/@sentry/core/cjs/carrier.js"),f=r("./node_modules/@sentry/core/cjs/currentScopes.js"),p=r("./node_modules/@sentry/core/cjs/metrics/metric-summary.js"),h=r("./node_modules/@sentry/core/cjs/semanticAttributes.js"),_=r("./node_modules/@sentry/core/cjs/tracing/spanstatus.js"),E=r("./node_modules/@sentry/core/cjs/utils/spanOnScope.js");t.TRACE_FLAG_NONE=0,t.TRACE_FLAG_SAMPLED=1,t.addChildSpanToSpan=function(e,t){l.addNonEnumerableProperty(t,"_sentryRootSpan",e._sentryRootSpan||e),e._sentryChildSpans?e._sentryChildSpans.add(t):l.addNonEnumerableProperty(e,"_sentryChildSpans",new Set([t]))},t.getActiveSpan=u,t.getRootSpan=function(e){return e._sentryRootSpan||e},t.getSpanDescendants=function(e){var t=new Set;return function e(r){if(!t.has(r)&&s(r)){t.add(r),r=r._sentryChildSpans?Array.from(r._sentryChildSpans):[];for(var n=(r=i.makeIterator(r)).next();!n.done;n=r.next())e(n.value)}}(e),Array.from(t)},t.getStatusMessage=a,t.removeChildSpanFromSpan=function(e,t){e._sentryChildSpans&&e._sentryChildSpans.delete(t)},t.spanIsSampled=s,t.spanTimeInputToSeconds=n,t.spanToJSON=o,t.spanToTraceContext=function(e){var t=e.spanContext(),r=t.spanId;return t=t.traceId,e=o(e).parent_span_id,l.dropUndefinedKeys({parent_span_id:e,span_id:r,trace_id:t})},t.spanToTraceHeader=function(e){var t=e.spanContext(),r=t.traceId;return t=t.spanId,e=s(e),l.generateSentryTraceHeader(r,t,e)},t.spanToTransactionTraceContext=function(e){var t=e.spanContext(),r=t.spanId;return t=t.traceId,e=o(e),l.dropUndefinedKeys({parent_span_id:e.parent_span_id,span_id:r,trace_id:t,data:e.data,op:e.op,status:e.status,origin:e.origin})},t.updateMetricSummaryOnActiveSpan=function(e,t,r,n,o,i){var s=u();s&&p.updateMetricSummaryOnSpan(s,e,t,r,n,o,i)}},"./node_modules/@sentry/utils/cjs/aggregate-errors.js":function(e,t,r){function n(e,t,r,u,l,c,d,f){if(c.length>=r+1)return c;var p=[].concat(i.arrayFromIterable(c));if(a.isInstanceOf(u[l],Error)){o(d,f),c=e(t,u[l]);var h=p.length;s(c,l,h,f),p=n(e,t,r,u[l],l,[c].concat(i.arrayFromIterable(p)),c,h)}return Array.isArray(u.errors)&&u.errors.forEach((function(u,c){if(a.isInstanceOf(u,Error)){o(d,f);var h=e(t,u),_=p.length;s(h,"errors["+c+"]",_,f),p=n(e,t,r,u,l,[h].concat(i.arrayFromIterable(p)),h,_)}})),p}function o(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism=Object.assign({},e.mechanism,"AggregateError"===e.type&&{is_exception_group:!0},{exception_id:t})}function s(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism=Object.assign({},e.mechanism,{type:"chained",source:t,exception_id:r,parent_id:n})}Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/@sentry/utils/cjs/is.js"),u=r("./node_modules/@sentry/utils/cjs/string.js");t.applyAggregateErrorsToEvent=function(e,t,r,o,i,s,l){if(r=void 0===r?250:r,s.exception&&s.exception.values&&l&&a.isInstanceOf(l.originalException,Error)){var c=0<s.exception.values.length?s.exception.values[s.exception.values.length-1]:void 0;c&&(s.exception.values=function(e,t){return e.map((function(e){return e.value&&(e.value=u.truncate(e.value,t)),e}))}(n(e,t,i,l.originalException,o,s.exception.values,c,0),r))}}},"./node_modules/@sentry/utils/cjs/anr.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/node-stack-trace.js"),o=r("./node_modules/@sentry/utils/cjs/object.js"),i=r("./node_modules/@sentry/utils/cjs/stacktrace.js");t.callFrameToStackFrame=function(e,t,r){t=t?t.replace(/^file:\/\//,""):void 0;var s=e.location.columnNumber?e.location.columnNumber+1:void 0,a=e.location.lineNumber?e.location.lineNumber+1:void 0;return o.dropUndefinedKeys({filename:t,module:r(t),function:e.functionName||i.UNKNOWN_FUNCTION,colno:s,lineno:a,in_app:t?n.filenameIsInApp(t):void 0})},t.watchdogTimer=function(e,t,r,n){var o=e(),i=!1,s=!0;return setInterval((function(){var e=o.getTimeMs();!1===i&&e>t+r&&(i=!0,s&&n()),e<t+r&&(i=!1)}),20),{poll:function(){o.reset()},enabled:function(e){s=e}}}},"./node_modules/@sentry/utils/cjs/baggage.js":function(e,t,r){function n(e){if(e&&(a.isString(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce((function(e,t){t=o(t);for(var r=i.makeIterator(Object.keys(t)),n=r.next();!n.done;n=r.next())e[n=n.value]=t[n];return e}),{}):o(e)}function o(e){return e.split(",").map((function(e){return e.split("=").map((function(e){return decodeURIComponent(e.trim())}))})).reduce((function(e,t){var r=i.makeIterator(t);return t=r.next().value,r=r.next().value,e[t]=r,e}),{})}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/debug-build.js"),a=r("./node_modules/@sentry/utils/cjs/is.js"),u=r("./node_modules/@sentry/utils/cjs/logger.js"),l=/^sentry-/;t.BAGGAGE_HEADER_NAME="baggage",t.MAX_BAGGAGE_STRING_LENGTH=8192,t.SENTRY_BAGGAGE_KEY_PREFIX="sentry-",t.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=l,t.baggageHeaderToDynamicSamplingContext=function(e){if((e=n(e))&&(e=Object.entries(e).reduce((function(e,t){var r=i.makeIterator(t);return t=r.next().value,r=r.next().value,t.match(l)&&(e[t=t.slice(7)]=r),e}),{}),0<Object.keys(e).length))return e},t.dynamicSamplingContextToSentryBaggageHeader=function(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce((function(e,t,r){var n=i.makeIterator(t);t=n.next().value,n=n.next().value;var o=encodeURIComponent(t)+"="+encodeURIComponent(n);return 8192<(r=0===r?o:e+","+o).length?(s.DEBUG_BUILD&&u.logger.warn("Not adding key: "+t+" with val: "+n+" to baggage header due to exceeding baggage size limits."),e):r}),"")}(e=Object.entries(e).reduce((function(e,t){var r=i.makeIterator(t);return t=r.next().value,(r=r.next().value)&&(e["sentry-"+t]=r),e}),{}))},t.parseBaggageHeader=n},"./node_modules/@sentry/utils/cjs/browser.js":function(e,t,r){function n(e,t){var r,n=[];if(!e||!e.tagName)return"";if(i.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}if(n.push(e.tagName.toLowerCase()),(t=t&&t.length?t.filter((function(t){return e.getAttribute(t)})).map((function(t){return[t,e.getAttribute(t)]})):null)&&t.length)t.forEach((function(e){n.push("["+e[0]+'="'+e[1]+'"]')}));else if(e.id&&n.push("#"+e.id),(t=e.className)&&o.isString(t)){var s=t.split(/\s+/);for(t=0;t<s.length;t++)n.push("."+s[t])}var a=["aria-label","type","name","title","alt"];for(t=0;t<a.length;t++)s=a[t],(r=e.getAttribute(s))&&n.push("["+s+'="'+r+'"]');return n.join("")}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/is.js"),i=r("./node_modules/@sentry/utils/cjs/worldwide.js").GLOBAL_OBJ;t.getComponentName=function(e){if(!i.HTMLElement)return null;for(var t=0;5>t&&e;t++){if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null},t.getDomElement=function(e){return i.document&&i.document.querySelector?i.document.querySelector(e):null},t.getLocationHref=function(){try{return i.document.location.href}catch(e){return""}},t.htmlTreeAsString=function(e,t){if(t=void 0===t?{}:t,!e)return"<unknown>";try{for(var r,o=[],i=0,s=0,a=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||80;e&&5>i++&&!("html"===(r=n(e,a))||1<i&&s+3*o.length+r.length>=u);)o.push(r),s+=r.length,e=e.parentNode;return o.reverse().join(" > ")}catch(e){return"<unknown>"}}},"./node_modules/@sentry/utils/cjs/buildPolyfills/_asyncNullishCoalesce.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_nullishCoalesce.js");t._asyncNullishCoalesce=function(e,t){return i.asyncExecutePromiseGeneratorProgram((function(r){return r.return(n._nullishCoalesce(e,t))}))}},"./node_modules/@sentry/utils/cjs/buildPolyfills/_asyncOptionalChain.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._asyncOptionalChain=function(e){var t,r,n,o,s;return i.asyncExecutePromiseGeneratorProgram((function(a){switch(a.nextAddress){case 1:t=void 0,r=e[0],n=1;case 2:if(!(n<e.length)){a.jumpTo(3);break}if(o=e[n],s=e[n+1],n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==r)return a.return();if("access"===o||"optionalAccess"===o)return t=r,a.yield(s(r),8);if("call"!==o&&"optionalCall"!==o){a.jumpTo(2);break}return a.yield(s((function(){var e=i.getRestArguments.apply(0,arguments);return r.call.apply(r,[t].concat(i.arrayFromIterable(e)))})),7);case 7:r=a.yieldResult,t=void 0,a.jumpTo(2);break;case 8:r=a.yieldResult,a.jumpTo(2);break;case 3:return a.return(r)}}))}},"./node_modules/@sentry/utils/cjs/buildPolyfills/_asyncOptionalChainDelete.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_asyncOptionalChain.js");t._asyncOptionalChainDelete=function(e){var t;return i.asyncExecutePromiseGeneratorProgram((function(r){return 1==r.nextAddress?r.yield(n._asyncOptionalChain(e),2):(t=r.yieldResult,r.return(null==t||t))}))}},"./node_modules/@sentry/utils/cjs/buildPolyfills/_nullishCoalesce.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._nullishCoalesce=function(e,t){return null!=e?e:t()}},"./node_modules/@sentry/utils/cjs/buildPolyfills/_optionalChain.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._optionalChain=function(e){for(var t=void 0,r=e[0],n=1;n<e.length;){var o=e[n],s=e[n+1];if(n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==r)return;"access"===o||"optionalAccess"===o?(t=r,r=s(r)):"call"!==o&&"optionalCall"!==o||(r=s((function(){var e=i.getRestArguments.apply(0,arguments);return r.call.apply(r,[t].concat(i.arrayFromIterable(e)))})),t=void 0)}return r}},"./node_modules/@sentry/utils/cjs/buildPolyfills/_optionalChainDelete.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_optionalChain.js");t._optionalChainDelete=function(e){return null==(e=n._optionalChain(e))||e}},"./node_modules/@sentry/utils/cjs/cache.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeFifoCache=function(e){var t=[],r={};return{add:function(n,o){for(;t.length>=e;){var i=t.shift();void 0!==i&&delete r[i]}r[n]&&this.delete(n),t.push(n),r[n]=o},clear:function(){r={},t=[]},get:function(e){return r[e]},size:function(){return t.length},delete:function(e){if(!r[e])return!1;delete r[e];for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}return!0}}}},"./node_modules/@sentry/utils/cjs/clientreport.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/envelope.js"),o=r("./node_modules/@sentry/utils/cjs/time.js");t.createClientReportEnvelope=function(e,t,r){return e=[{type:"client_report"},{timestamp:r||o.dateTimestampInSeconds(),discarded_events:e}],n.createEnvelope(t?{dsn:t}:{},[e])}},"./node_modules/@sentry/utils/cjs/cookie.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCookie=function(e){for(var t={},r=0;r<e.length;){var n=e.indexOf("=",r);if(-1===n)break;var o=e.indexOf(";",r);if(-1===o)o=e.length;else if(o<n){r=e.lastIndexOf(";",n-1)+1;continue}if(void 0===t[r=e.slice(r,n).trim()]){34===(n=e.slice(n+1,o).trim()).charCodeAt(0)&&(n=n.slice(1,-1));try{t[r]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[r]=n}}r=o+1}return t}},"./node_modules/@sentry/utils/cjs/debug-build.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},"./node_modules/@sentry/utils/cjs/dsn.js":function(e,t,r){function n(e){var t=u.exec(e);if(t){var r=i.makeIterator(t.slice(1));t=r.next().value;var n=r.next().value,s=r.next().value;s=void 0===s?"":s;var l=r.next().value,c=r.next().value;c=void 0===c?"":c;var d="",f=(r=r.next().value).split("/");return 1<f.length&&(d=f.slice(0,-1).join("/"),r=f.pop()),r&&(f=r.match(/^\d+/))&&(r=f[0]),o({host:l,pass:s,path:d,projectId:r,port:c,protocol:t,publicKey:n})}a.consoleSandbox((function(){console.error("Invalid Sentry Dsn: "+e)}))}function o(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/debug-build.js"),a=r("./node_modules/@sentry/utils/cjs/logger.js"),u=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;t.dsnFromString=n,t.dsnToString=function(e,t){var r=e.path,n=e.pass,o=e.port;return e.protocol+"://"+e.publicKey+(void 0!==t&&t&&n?":"+n:"")+"@"+e.host+(o?":"+o:"")+"/"+(r?r+"/":r)+e.projectId},t.makeDsn=function(e){if((e="string"==typeof e?n(e):o(e))&&function(e){if(!s.DEBUG_BUILD)return!0;var t=e.port,r=e.projectId,n=e.protocol;return!(["protocol","publicKey","host","projectId"].find((function(t){return!e[t]&&(a.logger.error("Invalid Sentry Dsn: "+t+" missing"),!0)}))||(r.match(/^\d+$/)?"http"!==n&&"https"!==n?(a.logger.error("Invalid Sentry Dsn: Invalid protocol "+n),1):t&&isNaN(parseInt(t,10))&&(a.logger.error("Invalid Sentry Dsn: Invalid port "+t),1):(a.logger.error("Invalid Sentry Dsn: Invalid projectId "+r),1)))}(e))return e}},"./node_modules/@sentry/utils/cjs/env.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSDKSource=function(){return"npm"},t.isBrowserBundle=function(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}},"./node_modules/@sentry/utils/cjs/envelope.js":function(e,t,r){function n(e,t){for(var r=(e=i.makeIterator(e[1])).next();!r.done;r=e.next())if(t(r=r.value,r[0].type))return!0;return!1}function o(e){return l.GLOBAL_OBJ.__SENTRY__&&l.GLOBAL_OBJ.__SENTRY__.encodePolyfill?l.GLOBAL_OBJ.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/dsn.js"),a=r("./node_modules/@sentry/utils/cjs/normalize.js"),u=r("./node_modules/@sentry/utils/cjs/object.js"),l=r("./node_modules/@sentry/utils/cjs/worldwide.js"),c={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};t.addItemToEnvelope=function(e,t){var r=i.makeIterator(e);return e=r.next().value,r=r.next().value,[e,[].concat(i.arrayFromIterable(r),[t])]},t.createAttachmentEnvelopeItem=function(e){var t="string"==typeof e.data?o(e.data):e.data;return[u.dropUndefinedKeys({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]},t.createEnvelope=function(e,t){return[e,t=void 0===t?[]:t]},t.createEventEnvelopeHeaders=function(e,t,r,n){var o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return Object.assign({},{event_id:e.event_id,sent_at:(new Date).toISOString()},t&&{sdk:t},!!r&&n&&{dsn:s.dsnToString(n)},o&&{trace:u.dropUndefinedKeys(Object.assign({},o))})},t.createSpanEnvelopeItem=function(e){return[{type:"span"},e]},t.envelopeContainsItemType=function(e,t){return n(e,(function(e,r){return t.includes(r)}))},t.envelopeItemTypeToDataCategory=function(e){return c[e]},t.forEachEnvelopeItem=n,t.getSdkMetadataForEnvelopeHeader=function(e){if(e&&e.sdk)return{name:(e=e.sdk).name,version:e.version}},t.parseEnvelope=function(e){function t(e){var t=n.subarray(0,e);return n=n.subarray(e+1),t}function r(){var e=n.indexOf(10);0>e&&(e=n.length);var r=JSON,o=r.parse;return e=t(e),e=l.GLOBAL_OBJ.__SENTRY__&&l.GLOBAL_OBJ.__SENTRY__.decodePolyfill?l.GLOBAL_OBJ.__SENTRY__.decodePolyfill(e):(new TextDecoder).decode(e),o.call(r,e)}var n="string"==typeof e?o(e):e;e=r();for(var i=[];n.length;){var s=r(),a="number"==typeof s.length?s.length:void 0;i.push([s,a?t(a):r()])}return[e,i]},t.serializeEnvelope=function(e){function t(e){"string"==typeof n?n="string"==typeof e?n+e:[o(n),e]:n.push("string"==typeof e?o(e):e)}var r=i.makeIterator(e);e=r.next().value,r=r.next().value;var n=JSON.stringify(e);for(r=(e=i.makeIterator(r)).next();!r.done;r=e.next()){var s=i.makeIterator(r.value);if(r=s.next().value,s=s.next().value,t("\n"+JSON.stringify(r)+"\n"),"string"==typeof s||s instanceof Uint8Array)t(s);else{r=void 0;try{r=JSON.stringify(s)}catch(e){r=JSON.stringify(a.normalize(s))}t(r)}}return"string"==typeof n?n:function(e){var t=e.reduce((function(e,t){return e+t.length}),0);t=new Uint8Array(t);for(var r=0,n=(e=i.makeIterator(e)).next();!n.done;n=e.next())n=n.value,t.set(n,r),r+=n.length;return t}(n)}},"./node_modules/@sentry/utils/cjs/error.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e,t){t=void 0===t?"warn":t;var r=Error.call(this,e);this.message=r.message,"stack"in r&&(this.stack=r.stack),this.message=e,this.name=this.constructor.prototype.constructor.name,Object.setPrototypeOf(this,this.constructor.prototype),this.logLevel=t},i.inherits(e,Error),t.SentryError=e},"./node_modules/@sentry/utils/cjs/eventbuilder.js":function(e,t,r){function n(e,t){return e(t.stack||"",1)}function o(e,t){var r={type:t.name||t.constructor.name,value:t.message};return(e=n(e,t)).length&&(r.stacktrace={frames:e}),r}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/is.js"),a=r("./node_modules/@sentry/utils/cjs/misc.js"),u=r("./node_modules/@sentry/utils/cjs/normalize.js"),l=r("./node_modules/@sentry/utils/cjs/object.js");t.eventFromMessage=function(e,t,r,o,i){return r={event_id:o&&o.event_id,level:void 0===r?"info":r},i&&o&&o.syntheticException&&(e=n(e,o.syntheticException)).length&&(r.exception={values:[{value:t,stacktrace:{frames:e}}]}),s.isParameterizedString(t)?(r.logentry={message:t.__sentry_template_string__,params:t.__sentry_template_values__},r):(r.message=t,r)},t.eventFromUnknownInput=function(e,t,r,n){var c=n&&n.data&&n.data.mechanism||{handled:!0,type:"generic"},d=i,f=d.makeIterator;if(s.isError(r))r=[r,void 0];else if(c.synthetic=!0,s.isPlainObject(r)){e=e&&e.getOptions().normalizeDepth;var p={};p.__serialized__=u.normalizeToSize(r,e),e=p;e:{for(h in r)if(Object.prototype.hasOwnProperty.call(r,h)&&(p=r[h])instanceof Error){var h=p;break e}h=void 0}h||(r=function(e){if("name"in e&&"string"==typeof e.name){var t="'"+e.name+"' captured as exception";return"message"in e&&"string"==typeof e.message&&(t+=" with message '"+e.message+"'"),t}if("message"in e&&"string"==typeof e.message)return e.message;if(t=l.extractExceptionKeysForMessage(e),s.isErrorEvent(e))return"Event `ErrorEvent` captured as exception with message `"+e.message+"`";e:{try{var r=Object.getPrototypeOf(e),n=r?r.constructor.name:void 0;break e}catch(e){}n=void 0}return((e=n)&&"Object"!==e?"'"+e+"'":"Object")+" captured as exception with keys: "+t}(r),(h=n&&n.syntheticException||Error(r)).message=r),r=[h,e]}else(e=n&&n.syntheticException||Error(r)).message=""+r,r=[e,void 0];return d=(f=f.call(d,r)).next().value,f=f.next().value,t={exception:{values:[o(t,d)]}},f&&(t.extra=f),a.addExceptionTypeValue(t,void 0,void 0),a.addExceptionMechanism(t,c),Object.assign({},t,{event_id:n&&n.event_id})},t.exceptionFromError=o,t.parseStackFrames=n},"./node_modules/@sentry/utils/cjs/index.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=r("./node_modules/@sentry/utils/cjs/aggregate-errors.js");var n=r("./node_modules/@sentry/utils/cjs/browser.js"),o=r("./node_modules/@sentry/utils/cjs/dsn.js"),i=r("./node_modules/@sentry/utils/cjs/error.js"),s=r("./node_modules/@sentry/utils/cjs/worldwide.js"),a=r("./node_modules/@sentry/utils/cjs/instrument/console.js"),u=r("./node_modules/@sentry/utils/cjs/instrument/fetch.js"),l=r("./node_modules/@sentry/utils/cjs/instrument/globalError.js"),c=r("./node_modules/@sentry/utils/cjs/instrument/globalUnhandledRejection.js"),d=r("./node_modules/@sentry/utils/cjs/instrument/handlers.js"),f=r("./node_modules/@sentry/utils/cjs/is.js"),p=r("./node_modules/@sentry/utils/cjs/isBrowser.js"),h=r("./node_modules/@sentry/utils/cjs/logger.js"),_=r("./node_modules/@sentry/utils/cjs/memo.js"),E=r("./node_modules/@sentry/utils/cjs/misc.js"),g=r("./node_modules/@sentry/utils/cjs/node.js"),m=r("./node_modules/@sentry/utils/cjs/normalize.js"),y=r("./node_modules/@sentry/utils/cjs/object.js"),S=r("./node_modules/@sentry/utils/cjs/path.js"),T=r("./node_modules/@sentry/utils/cjs/promisebuffer.js"),A=r("./node_modules/@sentry/utils/cjs/requestdata.js"),b=r("./node_modules/@sentry/utils/cjs/severity.js"),O=r("./node_modules/@sentry/utils/cjs/stacktrace.js"),I=r("./node_modules/@sentry/utils/cjs/node-stack-trace.js"),v=r("./node_modules/@sentry/utils/cjs/string.js"),N=r("./node_modules/@sentry/utils/cjs/supports.js"),R=r("./node_modules/@sentry/utils/cjs/syncpromise.js"),C=r("./node_modules/@sentry/utils/cjs/time.js"),D=r("./node_modules/@sentry/utils/cjs/tracing.js"),w=r("./node_modules/@sentry/utils/cjs/env.js"),L=r("./node_modules/@sentry/utils/cjs/envelope.js"),P=r("./node_modules/@sentry/utils/cjs/clientreport.js"),M=r("./node_modules/@sentry/utils/cjs/ratelimit.js"),U=r("./node_modules/@sentry/utils/cjs/baggage.js"),j=r("./node_modules/@sentry/utils/cjs/url.js"),k=r("./node_modules/@sentry/utils/cjs/cache.js"),x=r("./node_modules/@sentry/utils/cjs/eventbuilder.js"),F=r("./node_modules/@sentry/utils/cjs/anr.js"),B=r("./node_modules/@sentry/utils/cjs/lru.js"),G=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_asyncNullishCoalesce.js"),V=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_asyncOptionalChain.js"),H=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_asyncOptionalChainDelete.js"),W=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_nullishCoalesce.js"),Y=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_optionalChain.js"),K=r("./node_modules/@sentry/utils/cjs/buildPolyfills/_optionalChainDelete.js"),z=r("./node_modules/@sentry/utils/cjs/propagationContext.js"),q=r("./node_modules/@sentry/utils/cjs/version.js"),$=r("./node_modules/@sentry/utils/cjs/vendor/escapeStringForRegex.js");r=r("./node_modules/@sentry/utils/cjs/vendor/supportsHistory.js"),t.applyAggregateErrorsToEvent=e.applyAggregateErrorsToEvent,t.getComponentName=n.getComponentName,t.getDomElement=n.getDomElement,t.getLocationHref=n.getLocationHref,t.htmlTreeAsString=n.htmlTreeAsString,t.dsnFromString=o.dsnFromString,t.dsnToString=o.dsnToString,t.makeDsn=o.makeDsn,t.SentryError=i.SentryError,t.GLOBAL_OBJ=s.GLOBAL_OBJ,t.getGlobalSingleton=s.getGlobalSingleton,t.addConsoleInstrumentationHandler=a.addConsoleInstrumentationHandler,t.addFetchInstrumentationHandler=u.addFetchInstrumentationHandler,t.addGlobalErrorInstrumentationHandler=l.addGlobalErrorInstrumentationHandler,t.addGlobalUnhandledRejectionInstrumentationHandler=c.addGlobalUnhandledRejectionInstrumentationHandler,t.addHandler=d.addHandler,t.maybeInstrument=d.maybeInstrument,t.resetInstrumentationHandlers=d.resetInstrumentationHandlers,t.triggerHandlers=d.triggerHandlers,t.isDOMError=f.isDOMError,t.isDOMException=f.isDOMException,t.isElement=f.isElement,t.isError=f.isError,t.isErrorEvent=f.isErrorEvent,t.isEvent=f.isEvent,t.isInstanceOf=f.isInstanceOf,t.isParameterizedString=f.isParameterizedString,t.isPlainObject=f.isPlainObject,t.isPrimitive=f.isPrimitive,t.isRegExp=f.isRegExp,t.isString=f.isString,t.isSyntheticEvent=f.isSyntheticEvent,t.isThenable=f.isThenable,t.isVueViewModel=f.isVueViewModel,t.isBrowser=p.isBrowser,t.CONSOLE_LEVELS=h.CONSOLE_LEVELS,t.consoleSandbox=h.consoleSandbox,t.logger=h.logger,t.originalConsoleMethods=h.originalConsoleMethods,t.memoBuilder=_.memoBuilder,t.addContextToFrame=E.addContextToFrame,t.addExceptionMechanism=E.addExceptionMechanism,t.addExceptionTypeValue=E.addExceptionTypeValue,t.arrayify=E.arrayify,t.checkOrSetAlreadyCaught=E.checkOrSetAlreadyCaught,t.getEventDescription=E.getEventDescription,t.parseSemver=E.parseSemver,t.uuid4=E.uuid4,t.dynamicRequire=g.dynamicRequire,t.isNodeEnv=g.isNodeEnv,t.loadModule=g.loadModule,t.normalize=m.normalize,t.normalizeToSize=m.normalizeToSize,t.normalizeUrlToBase=m.normalizeUrlToBase,t.addNonEnumerableProperty=y.addNonEnumerableProperty,t.convertToPlainObject=y.convertToPlainObject,t.dropUndefinedKeys=y.dropUndefinedKeys,t.extractExceptionKeysForMessage=y.extractExceptionKeysForMessage,t.fill=y.fill,t.getOriginalFunction=y.getOriginalFunction,t.markFunctionWrapped=y.markFunctionWrapped,t.objectify=y.objectify,t.urlEncode=y.urlEncode,t.basename=S.basename,t.dirname=S.dirname,t.isAbsolute=S.isAbsolute,t.join=S.join,t.normalizePath=S.normalizePath,t.relative=S.relative,t.resolve=S.resolve,t.makePromiseBuffer=T.makePromiseBuffer,t.DEFAULT_USER_INCLUDES=A.DEFAULT_USER_INCLUDES,t.addRequestDataToEvent=A.addRequestDataToEvent,t.extractPathForTransaction=A.extractPathForTransaction,t.extractRequestData=A.extractRequestData,t.winterCGHeadersToDict=A.winterCGHeadersToDict,t.winterCGRequestToRequestData=A.winterCGRequestToRequestData,t.severityLevelFromString=b.severityLevelFromString,t.validSeverityLevels=b.validSeverityLevels,t.UNKNOWN_FUNCTION=O.UNKNOWN_FUNCTION,t.createStackParser=O.createStackParser,t.getFunctionName=O.getFunctionName,t.stackParserFromStackParserOptions=O.stackParserFromStackParserOptions,t.stripSentryFramesAndReverse=O.stripSentryFramesAndReverse,t.filenameIsInApp=I.filenameIsInApp,t.node=I.node,t.nodeStackLineParser=I.nodeStackLineParser,t.isMatchingPattern=v.isMatchingPattern,t.safeJoin=v.safeJoin,t.snipLine=v.snipLine,t.stringMatchesSomePattern=v.stringMatchesSomePattern,t.truncate=v.truncate,t.isNativeFunction=N.isNativeFunction,t.supportsDOMError=N.supportsDOMError,t.supportsDOMException=N.supportsDOMException,t.supportsErrorEvent=N.supportsErrorEvent,t.supportsFetch=N.supportsFetch,t.supportsNativeFetch=N.supportsNativeFetch,t.supportsReferrerPolicy=N.supportsReferrerPolicy,t.supportsReportingObserver=N.supportsReportingObserver,t.SyncPromise=R.SyncPromise,t.rejectedSyncPromise=R.rejectedSyncPromise,t.resolvedSyncPromise=R.resolvedSyncPromise,Object.defineProperty(t,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:function(){return C._browserPerformanceTimeOriginMode}}),t.browserPerformanceTimeOrigin=C.browserPerformanceTimeOrigin,t.dateTimestampInSeconds=C.dateTimestampInSeconds,t.timestampInSeconds=C.timestampInSeconds,t.TRACEPARENT_REGEXP=D.TRACEPARENT_REGEXP,t.extractTraceparentData=D.extractTraceparentData,t.generateSentryTraceHeader=D.generateSentryTraceHeader,t.propagationContextFromHeaders=D.propagationContextFromHeaders,t.getSDKSource=w.getSDKSource,t.isBrowserBundle=w.isBrowserBundle,t.addItemToEnvelope=L.addItemToEnvelope,t.createAttachmentEnvelopeItem=L.createAttachmentEnvelopeItem,t.createEnvelope=L.createEnvelope,t.createEventEnvelopeHeaders=L.createEventEnvelopeHeaders,t.createSpanEnvelopeItem=L.createSpanEnvelopeItem,t.envelopeContainsItemType=L.envelopeContainsItemType,t.envelopeItemTypeToDataCategory=L.envelopeItemTypeToDataCategory,t.forEachEnvelopeItem=L.forEachEnvelopeItem,t.getSdkMetadataForEnvelopeHeader=L.getSdkMetadataForEnvelopeHeader,t.parseEnvelope=L.parseEnvelope,t.serializeEnvelope=L.serializeEnvelope,t.createClientReportEnvelope=P.createClientReportEnvelope,t.DEFAULT_RETRY_AFTER=M.DEFAULT_RETRY_AFTER,t.disabledUntil=M.disabledUntil,t.isRateLimited=M.isRateLimited,t.parseRetryAfterHeader=M.parseRetryAfterHeader,t.updateRateLimits=M.updateRateLimits,t.BAGGAGE_HEADER_NAME=U.BAGGAGE_HEADER_NAME,t.MAX_BAGGAGE_STRING_LENGTH=U.MAX_BAGGAGE_STRING_LENGTH,t.SENTRY_BAGGAGE_KEY_PREFIX=U.SENTRY_BAGGAGE_KEY_PREFIX,t.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=U.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,t.baggageHeaderToDynamicSamplingContext=U.baggageHeaderToDynamicSamplingContext,t.dynamicSamplingContextToSentryBaggageHeader=U.dynamicSamplingContextToSentryBaggageHeader,t.parseBaggageHeader=U.parseBaggageHeader,t.getNumberOfUrlSegments=j.getNumberOfUrlSegments,t.getSanitizedUrlString=j.getSanitizedUrlString,t.parseUrl=j.parseUrl,t.stripUrlQueryAndFragment=j.stripUrlQueryAndFragment,t.makeFifoCache=k.makeFifoCache,t.eventFromMessage=x.eventFromMessage,t.eventFromUnknownInput=x.eventFromUnknownInput,t.exceptionFromError=x.exceptionFromError,t.parseStackFrames=x.parseStackFrames,t.callFrameToStackFrame=F.callFrameToStackFrame,t.watchdogTimer=F.watchdogTimer,t.LRUMap=B.LRUMap,t._asyncNullishCoalesce=G._asyncNullishCoalesce,t._asyncOptionalChain=V._asyncOptionalChain,t._asyncOptionalChainDelete=H._asyncOptionalChainDelete,t._nullishCoalesce=W._nullishCoalesce,t._optionalChain=Y._optionalChain,t._optionalChainDelete=K._optionalChainDelete,t.generatePropagationContext=z.generatePropagationContext,t.SDK_VERSION=q.SDK_VERSION,t.escapeStringForRegex=$.escapeStringForRegex,t.supportsHistory=r.supportsHistory},"./node_modules/@sentry/utils/cjs/instrument/console.js":function(e,t,r){function n(){"console"in a.GLOBAL_OBJ&&o.CONSOLE_LEVELS.forEach((function(e){e in a.GLOBAL_OBJ.console&&s.fill(a.GLOBAL_OBJ.console,e,(function(t){return o.originalConsoleMethods[e]=t,function(){var t=i.getRestArguments.apply(0,arguments);u.triggerHandlers("console",{args:t,level:e});var r=o.originalConsoleMethods[e];r&&r.apply(a.GLOBAL_OBJ.console,t)}}))}))}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/logger.js"),s=r("./node_modules/@sentry/utils/cjs/object.js"),a=r("./node_modules/@sentry/utils/cjs/worldwide.js"),u=r("./node_modules/@sentry/utils/cjs/instrument/handlers.js");t.addConsoleInstrumentationHandler=function(e){u.addHandler("console",e),u.maybeInstrument("console",n)}},"./node_modules/@sentry/utils/cjs/instrument/fetch.js":function(e,t,r){function n(){l.supportsNativeFetch()&&u.fill(d.GLOBAL_OBJ,"fetch",(function(e){return function(){var t=i.getRestArguments.apply(0,arguments),r=a(t),n={args:t,fetchData:{method:r.method,url:r.url},startTimestamp:1e3*c.timestampInSeconds()};return f.triggerHandlers("fetch",Object.assign({},n)),e.apply(d.GLOBAL_OBJ,t).then((function(e){var t=Object.assign({},n,{endTimestamp:1e3*c.timestampInSeconds(),response:e});return f.triggerHandlers("fetch",t),e}),(function(e){var t=Object.assign({},n,{endTimestamp:1e3*c.timestampInSeconds(),error:e});throw f.triggerHandlers("fetch",t),e}))}}))}function o(e,t){return!!e&&"object"==typeof e&&!!e[t]}function s(e){return"string"==typeof e?e:e?o(e,"url")?e.url:e.toString?e.toString():"":""}function a(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){var t=i.makeIterator(e);return e=t.next().value,t=t.next().value,{url:s(e),method:o(t,"method")?String(t.method).toUpperCase():"GET"}}return{url:s(e=e[0]),method:o(e,"method")?String(e.method).toUpperCase():"GET"}}Object.defineProperty(t,"__esModule",{value:!0});var u=r("./node_modules/@sentry/utils/cjs/object.js"),l=r("./node_modules/@sentry/utils/cjs/supports.js"),c=r("./node_modules/@sentry/utils/cjs/time.js"),d=r("./node_modules/@sentry/utils/cjs/worldwide.js"),f=r("./node_modules/@sentry/utils/cjs/instrument/handlers.js");t.addFetchInstrumentationHandler=function(e){f.addHandler("fetch",e),f.maybeInstrument("fetch",n)},t.parseFetchArgs=a},"./node_modules/@sentry/utils/cjs/instrument/globalError.js":function(e,t,r){function n(){s=o.GLOBAL_OBJ.onerror,o.GLOBAL_OBJ.onerror=function(e,t,r,n,o){return i.triggerHandlers("error",{column:n,error:o,line:r,msg:e,url:t}),!(!s||s.__SENTRY_LOADER__)&&s.apply(this,arguments)},o.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/worldwide.js"),i=r("./node_modules/@sentry/utils/cjs/instrument/handlers.js"),s=null;t.addGlobalErrorInstrumentationHandler=function(e){i.addHandler("error",e),i.maybeInstrument("error",n)}},"./node_modules/@sentry/utils/cjs/instrument/globalUnhandledRejection.js":function(e,t,r){function n(){s=o.GLOBAL_OBJ.onunhandledrejection,o.GLOBAL_OBJ.onunhandledrejection=function(e){return i.triggerHandlers("unhandledrejection",e),!(s&&!s.__SENTRY_LOADER__)||s.apply(this,arguments)},o.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/worldwide.js"),i=r("./node_modules/@sentry/utils/cjs/instrument/handlers.js"),s=null;t.addGlobalUnhandledRejectionInstrumentationHandler=function(e){i.addHandler("unhandledrejection",e),i.maybeInstrument("unhandledrejection",n)}},"./node_modules/@sentry/utils/cjs/instrument/handlers.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/debug-build.js"),o=r("./node_modules/@sentry/utils/cjs/logger.js"),s=r("./node_modules/@sentry/utils/cjs/stacktrace.js"),a={},u={};t.addHandler=function(e,t){a[e]=a[e]||[],a[e].push(t)},t.maybeInstrument=function(e,t){u[e]||(t(),u[e]=!0)},t.resetInstrumentationHandlers=function(){Object.keys(a).forEach((function(e){a[e]=void 0}))},t.triggerHandlers=function(e,t){var r=e&&a[e];if(r)for(var u=(r=i.makeIterator(r)).next();!u.done;u=r.next()){u=u.value;try{u(t)}catch(t){n.DEBUG_BUILD&&o.logger.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+s.getFunctionName(u)+"\nError:",t)}}}},"./node_modules/@sentry/utils/cjs/is.js":function(e,t){function r(e,t){return s.call(e)==="[object "+t+"]"}function n(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function o(e){return r(e,"Object")}function i(e,t){try{return e instanceof t}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.prototype.toString;t.isDOMError=function(e){return r(e,"DOMError")},t.isDOMException=function(e){return r(e,"DOMException")},t.isElement=function(e){return"undefined"!=typeof Element&&i(e,Element)},t.isError=function(e){switch(s.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return i(e,Error)}},t.isErrorEvent=function(e){return r(e,"ErrorEvent")},t.isEvent=function(e){return"undefined"!=typeof Event&&i(e,Event)},t.isInstanceOf=i,t.isParameterizedString=n,t.isPlainObject=o,t.isPrimitive=function(e){return null===e||n(e)||"object"!=typeof e&&"function"!=typeof e},t.isRegExp=function(e){return r(e,"RegExp")},t.isString=function(e){return r(e,"String")},t.isSyntheticEvent=function(e){return o(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e},t.isThenable=function(e){return!(!e||!e.then||"function"!=typeof e.then)},t.isVueViewModel=function(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}},"./node_modules/@sentry/utils/cjs/isBrowser.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/node.js"),o=r("./node_modules/@sentry/utils/cjs/worldwide.js");t.isBrowser=function(){return"undefined"!=typeof window&&(!n.isNodeEnv()||void 0!==o.GLOBAL_OBJ.process&&"renderer"===o.GLOBAL_OBJ.process.type)}},"./node_modules/@sentry/utils/cjs/logger.js":function(e,t,r){function n(e){if(!("console"in u.GLOBAL_OBJ))return e();var t=u.GLOBAL_OBJ.console,r={},n=Object.keys(c);n.forEach((function(e){var n=c[e];r[e]=t[e],t[e]=n}));try{return e()}finally{n.forEach((function(e){t[e]=r[e]}))}}Object.defineProperty(t,"__esModule",{value:!0});var o,s,a=r("./node_modules/@sentry/utils/cjs/debug-build.js"),u=r("./node_modules/@sentry/utils/cjs/worldwide.js"),l="debug info warn error log assert trace".split(" "),c={};o=!1,s={enable:function(){o=!0},disable:function(){o=!1},isEnabled:function(){return o}},a.DEBUG_BUILD?l.forEach((function(e){s[e]=function(){var t=i.getRestArguments.apply(0,arguments);o&&n((function(){u.GLOBAL_OBJ.console[e].apply(u.GLOBAL_OBJ.console,["Sentry Logger ["+e+"]:"].concat(i.arrayFromIterable(t)))}))}})):l.forEach((function(e){s[e]=function(){}})),e=s,t.CONSOLE_LEVELS=l,t.consoleSandbox=n,t.logger=e,t.originalConsoleMethods=c},"./node_modules/@sentry/utils/cjs/lru.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),(e=function(e){this._maxSize=e,this._cache=new Map}).prototype.get=function(e){var t=this._cache.get(e);if(void 0!==t)return this._cache.delete(e),this._cache.set(e,t),t},e.prototype.set=function(e,t){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(e,t)},e.prototype.remove=function(e){var t=this._cache.get(e);return t&&this._cache.delete(e),t},e.prototype.clear=function(){this._cache.clear()},e.prototype.keys=function(){return Array.from(this._cache.keys())},e.prototype.values=function(){var e=[];return this._cache.forEach((function(t){return e.push(t)})),e},i.global.Object.defineProperties(e.prototype,{size:{configurable:!0,enumerable:!0,get:function(){return this._cache.size}}}),t.LRUMap=e},"./node_modules/@sentry/utils/cjs/memo.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.memoBuilder=function(){var e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(var n=0;n<t.length;n++)if(t[n]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(var n=0;n<t.length;n++)if(t[n]===r){t.splice(n,1);break}}]}},"./node_modules/@sentry/utils/cjs/misc.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/object.js"),o=r("./node_modules/@sentry/utils/cjs/string.js"),i=r("./node_modules/@sentry/utils/cjs/worldwide.js"),s=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;t.addContextToFrame=function(e,t,r){if(r=void 0===r?5:r,void 0!==t.lineno){var n=e.length,i=Math.max(Math.min(n-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,i-r),i).map((function(e){return o.snipLine(e,0)})),t.context_line=o.snipLine(e[Math.min(n-1,i)],t.colno||0),t.post_context=e.slice(Math.min(i+1,n),i+1+r).map((function(e){return o.snipLine(e,0)}))}},t.addExceptionMechanism=function(e,t){if(e=e.exception&&e.exception.values?e.exception.values[0]:void 0){var r=e.mechanism;e.mechanism=Object.assign({},{type:"generic",handled:!0},r,t),t&&"data"in t&&(t=Object.assign({},r&&r.data,t.data),e.mechanism.data=t)}},t.addExceptionTypeValue=function(e,t,r){(e=(e=(e=e.exception=e.exception||{}).values=e.values||[])[0]=e[0]||{}).value||(e.value=t||""),e.type||(e.type=r||"Error")},t.arrayify=function(e){return Array.isArray(e)?e:[e]},t.checkOrSetAlreadyCaught=function(e){if(e&&e.__sentry_captured__)return!0;try{n.addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(e){}return!1},t.getEventDescription=function(e){var t=e.message,r=e.event_id;return t||((e=e.exception&&e.exception.values?e.exception.values[0]:void 0)?e.type&&e.value?e.type+": "+e.value:e.type||e.value||r||"<unknown>":r||"<unknown>")},t.parseSemver=function(e){e=e.match(s)||[];var t=parseInt(e[1],10),r=parseInt(e[2],10),n=parseInt(e[3],10);return{buildmetadata:e[5],major:isNaN(t)?void 0:t,minor:isNaN(r)?void 0:r,patch:isNaN(n)?void 0:n,prerelease:e[4]}},t.uuid4=function(){var e=i.GLOBAL_OBJ,t=e.crypto||e.msCrypto,r=function(){return 16*Math.random()};try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(r=function(){var e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return"10000000100040008000100000000000".replace(/[018]/g,(function(e){return(e^(15&r())>>e/4).toString(16)}))}},"./node_modules/@sentry/utils/cjs/node-stack-trace.js":function(e,t,r){function n(e,t){return!(void 0!==t&&t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//)||void 0===e||e.includes("node_modules/"))}function o(e){var t=/^\s*[-]{4,}$/,r=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return function(o){var s=o.match(r);if(s){if(s[1]){var a=s[1];if(o=a.lastIndexOf("."),"."===a[o-1]&&o--,0<o){var u=a.slice(0,o),l=a.slice(o+1);0<(o=u.indexOf(".Module"))&&(a=a.slice(o+1),u=u.slice(0,o))}var c=void 0}if(l){c=u;var d=l}return"<anonymous>"===l&&(a=d=void 0),void 0===a&&(d=d||i.UNKNOWN_FUNCTION,a=c?c+"."+d:d),u=s[2]&&s[2].startsWith("file://")?s[2].slice(7):s[2],l="native"===s[5],u&&u.match(/\/[A-Z]:/)&&(u=u.slice(1)),u||!s[5]||l||(u=s[5]),{filename:u,module:e?e(u):void 0,function:a,lineno:parseInt(s[3],10)||void 0,colno:parseInt(s[4],10)||void 0,in_app:n(u,l)}}if(o.match(t))return{filename:o}}}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/@sentry/utils/cjs/stacktrace.js");t.filenameIsInApp=n,t.node=o,t.nodeStackLineParser=function(e){return[90,o(e)]}},"./node_modules/@sentry/utils/cjs/node.js":function(e,t,r){function o(e,t){return e.require(t)}e=r.nmd(e),Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/@sentry/utils/cjs/env.js");t.dynamicRequire=o,t.isNodeEnv=function(){return!i.isBrowserBundle()&&"[object process]"===Object.prototype.toString.call(void 0!==n?n:0)},t.loadModule=function(t){try{var r=e.require(t)}catch(e){}try{var n=e.require("process").cwd;r=o(e,n()+"/node_modules/"+t)}catch(e){}return r}},"./node_modules/@sentry/utils/cjs/normalize.js":function(e,t,r){function n(e,t,r){r=void 0===r?1/0:r;try{return o("",e,void 0===t?100:t,r)}catch(e){return{ERROR:"**non-serializable** ("+e+")"}}}function o(e,t,n,c,d){n=void 0===n?1/0:n,c=void 0===c?1/0:c,d=void 0===d?a.memoBuilder():d;var f=i.makeIterator(d),p=f.next().value;if(f=f.next().value,null==t||["number","boolean","string"].includes(typeof t)&&!Number.isNaN(t))return t;if(e=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==r.g&&t===r.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(s.isVueViewModel(t))return"[VueViewModel]";if(s.isSyntheticEvent(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return"[Function: "+l.getFunctionName(t)+"]";if("symbol"==typeof t)return"["+String(t)+"]";if("bigint"==typeof t)return"[BigInt: "+String(t)+"]";var n=Object.getPrototypeOf(t),o=n?n.constructor.name:"null prototype";return/^HTML(\w*)Element$/.test(o)?"[HTMLElement: "+o+"]":"[object "+o+"]"}catch(e){return"**non-serializable** ("+e+")"}}(e,t),!e.startsWith("[object "))return e;if(t.__sentry_skip_normalization__)return t;if(0===(n="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n))return e.replace("object ","");if(p(t))return"[Circular ~]";if(t&&"function"==typeof t.toJSON)try{var h=t.toJSON();return o("",h,n-1,c,d)}catch(e){}for(var _ in p=Array.isArray(t)?[]:{},h=0,e=u.convertToPlainObject(t))if(Object.prototype.hasOwnProperty.call(e,_)){if(h>=c){p[_]="[MaxProperties ~]";break}p[_]=o(_,e[_],n-1,c,d),h++}return f(t),p}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/is.js"),a=r("./node_modules/@sentry/utils/cjs/memo.js"),u=r("./node_modules/@sentry/utils/cjs/object.js"),l=r("./node_modules/@sentry/utils/cjs/stacktrace.js");t.normalize=n,t.normalizeToSize=function e(t,r,o){o=void 0===o?102400:o;var i=n(t,r=void 0===r?3:r);return~-encodeURI(JSON.stringify(i)).split(/%..|./).length>o?e(t,r-1,o):i},t.normalizeUrlToBase=function(e,t){t=t.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");var r=e;try{r=decodeURI(e)}catch(e){}return r.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp("(file://)?/*"+t+"/*","ig"),"app:///")}},"./node_modules/@sentry/utils/cjs/object.js":function(e,t,r){function n(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){d.DEBUG_BUILD&&p.logger.log('Failed to add non-enumerable property "'+t+'" to object',e)}}function o(e,t){try{e.prototype=t.prototype=t.prototype||{},n(e,"__sentry_original__",t)}catch(e){}}function s(e){if(f.isError(e))return Object.assign({},{message:e.message,name:e.name,stack:e.stack},u(e));if(f.isEvent(e)){var t=Object.assign({},{type:e.type,target:a(e.target),currentTarget:a(e.currentTarget)},u(e));return"undefined"!=typeof CustomEvent&&f.isInstanceOf(e,CustomEvent)&&(t.detail=e.detail),t}return e}function a(e){try{return f.isElement(e)?c.htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function u(e){if("object"==typeof e&&null!==e){var t,r={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}return{}}function l(e,t){if(function(e){if(!f.isPlainObject(e))return!1;try{var t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){var r=t.get(e);if(void 0!==r)return r;r={},t.set(e,r);for(var n=i.makeIterator(Object.keys(e)),o=n.next();!o.done;o=n.next())void 0!==e[o=o.value]&&(r[o]=l(e[o],t));return r}if(Array.isArray(e)){if(void 0!==(r=t.get(e)))return r;var s=[];return t.set(e,s),e.forEach((function(e){s.push(l(e,t))})),s}return e}Object.defineProperty(t,"__esModule",{value:!0});var c=r("./node_modules/@sentry/utils/cjs/browser.js"),d=r("./node_modules/@sentry/utils/cjs/debug-build.js"),f=r("./node_modules/@sentry/utils/cjs/is.js"),p=r("./node_modules/@sentry/utils/cjs/logger.js"),h=r("./node_modules/@sentry/utils/cjs/string.js");t.addNonEnumerableProperty=n,t.convertToPlainObject=s,t.dropUndefinedKeys=function(e){return l(e,new Map)},t.extractExceptionKeysForMessage=function(e,t){if(t=void 0===t?40:t,(e=Object.keys(s(e))).sort(),!e.length)return"[object has no keys]";if(e[0].length>=t)return h.truncate(e[0],t);for(var r=e.length;0<r;r--){var n=e.slice(0,r).join(", ");if(!(n.length>t))return r===e.length?n:h.truncate(n,t)}return""},t.fill=function(e,t,r){if(t in e){var n=e[t];"function"==typeof(r=r(n))&&o(r,n),e[t]=r}},t.getOriginalFunction=function(e){return e.__sentry_original__},t.markFunctionWrapped=o,t.objectify=function(e){switch(!0){case null==e:e=new String(e);break;case"symbol"==typeof e||"bigint"==typeof e:e=Object(e);break;case f.isPrimitive(e):e=new e.constructor(e)}return e},t.urlEncode=function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}},"./node_modules/@sentry/utils/cjs/path.js":function(e,t){function r(e,t){for(var r=0,n=e.length-1;0<=n;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e){return e=1024<e.length?"<truncated>"+e.slice(-1024):e,(e=l.exec(e))?e.slice(1):[]}function o(){for(var e=i.getRestArguments.apply(0,arguments),t="",n=!1,o=e.length-1;-1<=o&&!n;o--){var s=0<=o?e[o]:"/";s&&(t=s+"/"+t,n="/"===s.charAt(0))}return(n?"/":"")+(t=r(t.split("/").filter((function(e){return!!e})),!n).join("/"))||"."}function s(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}function a(e){var t=u(e),n="/"===e.slice(-1);return(e=r(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function u(e){return"/"===e.charAt(0)}Object.defineProperty(t,"__esModule",{value:!0});var l=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;t.basename=function(e,t){return e=n(e)[2],t&&e.slice(-1*t.length)===t&&(e=e.slice(0,e.length-t.length)),e},t.dirname=function(e){var t=n(e);return e=t[0],t=t[1],e||t?(t&&(t=t.slice(0,t.length-1)),e+t):"."},t.isAbsolute=u,t.join=function(){return a(i.getRestArguments.apply(0,arguments).join("/"))},t.normalizePath=a,t.relative=function(e,t){e=o(e).slice(1),t=o(t).slice(1),e=s(e.split("/")),t=s(t.split("/"));for(var r=Math.min(e.length,t.length),n=r,i=0;i<r;i++)if(e[i]!==t[i]){n=i;break}for(r=[],i=n;i<e.length;i++)r.push("..");return(r=r.concat(t.slice(n))).join("/")},t.resolve=o},"./node_modules/@sentry/utils/cjs/promisebuffer.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/error.js"),o=r("./node_modules/@sentry/utils/cjs/syncpromise.js");t.makePromiseBuffer=function(e){var t=[];return{$:t,add:function(r){if(!(void 0===e||t.length<e))return o.rejectedSyncPromise(new n.SentryError("Not adding Promise because buffer limit was reached."));var i=r();return-1===t.indexOf(i)&&t.push(i),i.then((function(){return t.splice(t.indexOf(i),1)[0]})).then(null,(function(){return t.splice(t.indexOf(i),1)[0].then(null,(function(){}))})),i},drain:function(e){return new o.SyncPromise((function(r,n){var i=t.length;if(!i)return r(!0);var s=setTimeout((function(){e&&0<e&&r(!1)}),e);t.forEach((function(e){o.resolvedSyncPromise(e).then((function(){--i||(clearTimeout(s),r(!0))}),n)}))}))}}}},"./node_modules/@sentry/utils/cjs/propagationContext.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/misc.js");t.generatePropagationContext=function(){return{traceId:n.uuid4(),spanId:n.uuid4().substring(16)}}},"./node_modules/@sentry/utils/cjs/ratelimit.js":function(e,t){function r(e,t){t=void 0===t?Date.now():t;var r=parseInt(""+e,10);return isNaN(r)?(e=Date.parse(""+e),isNaN(e)?6e4:e-t):1e3*r}function n(e,t){return e[t]||e.all||0}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_AFTER=6e4,t.disabledUntil=n,t.isRateLimited=function(e,t,r){return r=void 0===r?Date.now():r,n(e,t)>r},t.parseRetryAfterHeader=r,t.updateRateLimits=function(e,t,n){var o=t.statusCode;t=t.headers,n=void 0===n?Date.now():n,e=Object.assign({},e);var s=t&&t["x-sentry-rate-limits"];if(t=t&&t["retry-after"],s)for(t=(o=i.makeIterator(s.trim().split(","))).next();!t.done;t=o.next()){var a=(t=i.makeIterator(t.value.split(":",5))).next().value;if(s=t.next().value,t.next(),t.next(),t=t.next().value,a=parseInt(a,10),a=1e3*(isNaN(a)?60:a),s)for(var u=(s=i.makeIterator(s.split(";"))).next();!u.done;u=s.next())"metric_bucket"===(u=u.value)&&t&&!t.split(";").includes("custom")||(e[u]=n+a);else e.all=n+a}else t?e.all=n+r(t,n):429===o&&(e.all=n+6e4);return e}},"./node_modules/@sentry/utils/cjs/requestdata.js":function(e,t,r){function n(e,t){t=void 0===t?{}:t;var r=e.method&&e.method.toUpperCase(),n="",o="url";return t.customRoute||e.route?(n=t.customRoute||""+(e.baseUrl||"")+(e.route&&e.route.path),o="route"):(e.originalUrl||e.url)&&(n=d.stripUrlQueryAndFragment(e.originalUrl||e.url||"")),e="",t.method&&r&&(e+=r),t.method&&t.path&&(e+=" "),t.path&&n&&(e+=n),[e,o]}function o(e,t){var r=void 0===(t=t||{}).include?p:t.include,n={},o=e.headers||{},i=e.method;t=o.host||e.hostname||e.host||"<no host>";var a="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",l=e.originalUrl||e.url||"",d=l.startsWith(a)?l:a+"://"+t+l;return r.forEach((function(t){switch(t){case"headers":n.headers=o,r.includes("cookies")||delete n.headers.cookie;break;case"method":n.method=i;break;case"url":n.url=d;break;case"cookies":n.cookies=e.cookies||o.cookie&&s.parseCookie(o.cookie)||{};break;case"query_string":e:{if(t=e.originalUrl||e.url||""){t.startsWith("/")&&(t="http://dogs.are.great"+t);try{var a=e.query||new URL(t).search.slice(1),l=a.length?a:void 0;break e}catch(e){l=void 0;break e}}l=void 0}n.query_string=l;break;case"data":if("GET"===i||"HEAD"===i)break;void 0!==e.body&&(n.data=u.isString(e.body)?e.body:JSON.stringify(c.normalize(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(n[t]=e[t])}})),n}function i(e){var t={};try{e.forEach((function(e,r){"string"==typeof e&&(t[r]=e)}))}catch(e){a.DEBUG_BUILD&&l.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return t}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./node_modules/@sentry/utils/cjs/cookie.js"),a=r("./node_modules/@sentry/utils/cjs/debug-build.js"),u=r("./node_modules/@sentry/utils/cjs/is.js"),l=r("./node_modules/@sentry/utils/cjs/logger.js"),c=r("./node_modules/@sentry/utils/cjs/normalize.js"),d=r("./node_modules/@sentry/utils/cjs/url.js"),f={ip:!1,request:!0,transaction:!0,user:!0},p="cookies data headers method query_string url".split(" "),h=["id","username","email"];t.DEFAULT_USER_INCLUDES=h,t.addRequestDataToEvent=function(e,t,r){if((r=Object.assign({},f,r&&r.include)).request){var i=Array.isArray(r.request)?o(t,{include:r.request}):o(t);e.request=Object.assign({},e.request,i)}if(r.user&&(i=t.user&&u.isPlainObject(t.user)?function(e,t){var r={};return(Array.isArray(t)?t:h).forEach((function(t){e&&t in e&&(r[t]=e[t])})),r}(t.user,r.user):{},Object.keys(i).length&&(e.user=Object.assign({},e.user,i))),r.ip&&(i=t.ip||t.socket&&t.socket.remoteAddress)&&(e.user=Object.assign({},e.user,{ip_address:i})),r.transaction&&!e.transaction&&"transaction"===e.type){e:switch(r.transaction){case"path":t=n(t,{path:!0})[0];break e;case"handler":t=t.route&&t.route.stack&&t.route.stack[0]&&t.route.stack[0].name||"<anonymous>";break e;default:t=n(t,{path:!0,method:!0,customRoute:t._reconstructedRoute?t._reconstructedRoute:void 0})[0]}e.transaction=t}return e},t.extractPathForTransaction=n,t.extractRequestData=o,t.winterCGHeadersToDict=i,t.winterCGRequestToRequestData=function(e){var t=i(e.headers);return{method:e.method,url:e.url,headers:t}}},"./node_modules/@sentry/utils/cjs/severity.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="fatal error warning log info debug".split(" ");t.severityLevelFromString=function(e){return"warn"===e?"warning":r.includes(e)?e:"log"},t.validSeverityLevels=r},"./node_modules/@sentry/utils/cjs/stacktrace.js":function(e,t){function r(){var e=i.getRestArguments.apply(0,arguments).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));return function(t,r,s){r=void 0===r?0:r,s=void 0===s?0:s;var a=[];for(t=t.split("\n");r<t.length;r++){var u=t[r];if(!(1024<u.length||(u=o.test(u)?u.replace(o,"$1"):u,u.match(/\S*Error: /)))){for(var l=i.makeIterator(e),c=l.next();!c.done;c=l.next())if(c=(c=c.value)(u)){a.push(c);break}if(a.length>=50+s)break}}return n(a.slice(s))}}function n(e){if(!e.length)return[];var t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),s.test(t[t.length-1].function||"")&&(t.pop(),s.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((function(e){return Object.assign({},e,{filename:e.filename||t[t.length-1].filename,function:e.function||"?"})}))}Object.defineProperty(t,"__esModule",{value:!0});var o=/\(error: (.*)\)/,s=/captureMessage|captureException/;t.UNKNOWN_FUNCTION="?",t.createStackParser=r,t.getFunctionName=function(e){try{return e&&"function"==typeof e&&e.name||"<anonymous>"}catch(e){return"<anonymous>"}},t.stackParserFromStackParserOptions=function(e){return Array.isArray(e)?r.apply(null,i.arrayFromIterable(e)):e},t.stripSentryFramesAndReverse=n},"./node_modules/@sentry/utils/cjs/string.js":function(e,t,r){function n(e,t,r){return r=void 0!==r&&r,!!o.isString(e)&&(o.isRegExp(t)?t.test(e):!!o.isString(t)&&(r?e===t:e.includes(t)))}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/is.js");t.isMatchingPattern=n,t.safeJoin=function(e,t){if(!Array.isArray(e))return"";for(var r=[],n=0;n<e.length;n++){var i=e[n];try{o.isVueViewModel(i)?r.push("[VueViewModel]"):r.push(String(i))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)},t.snipLine=function(e,t){var r=e.length;if(150>=r)return e;t>r&&(t=r),5>(t=Math.max(t-60,0))&&(t=0);var n=Math.min(t+140,r);return n>r-5&&(n=r),n===r&&(t=Math.max(n-140,0)),e=e.slice(t,n),0<t&&(e="'{snip} "+e),n<r&&(e+=" {snip}"),e},t.stringMatchesSomePattern=function(e,t,r){return r=void 0!==r&&r,(t=void 0===t?[]:t).some((function(t){return n(e,t,r)}))},t.truncate=function(e,t){return t=void 0===t?0:t,"string"!=typeof e||0===t||e.length<=t?e:e.slice(0,t)+"..."}},"./node_modules/@sentry/utils/cjs/supports.js":function(e,t,r){function n(){if(!("fetch"in a))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function o(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/@sentry/utils/cjs/debug-build.js"),s=r("./node_modules/@sentry/utils/cjs/logger.js"),a=r("./node_modules/@sentry/utils/cjs/worldwide.js").GLOBAL_OBJ;t.isNativeFunction=o,t.supportsDOMError=function(){try{return new DOMError(""),!0}catch(e){return!1}},t.supportsDOMException=function(){try{return new DOMException(""),!0}catch(e){return!1}},t.supportsErrorEvent=function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},t.supportsFetch=n,t.supportsNativeFetch=function(){if("string"==typeof EdgeRuntime)return!0;if(!n())return!1;if(o(a.fetch))return!0;var e=!1,t=a.document;if(t&&"function"==typeof t.createElement)try{var r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=o(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){i.DEBUG_BUILD&&s.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e},t.supportsReferrerPolicy=function(){if(!n())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}},t.supportsReportingObserver=function(){return"ReportingObserver"in a}},"./node_modules/@sentry/utils/cjs/syncpromise.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o,i=r("./node_modules/@sentry/utils/cjs/is.js");(o=n||(n={}))[o.PENDING=0]="PENDING",o[o.RESOLVED=1]="RESOLVED",o[o.REJECTED=2]="REJECTED";var s=function(e){s.prototype.__init.call(this),s.prototype.__init2.call(this),s.prototype.__init3.call(this),s.prototype.__init4.call(this),this._state=n.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}};s.prototype.then=function(e,t){var r=this;return new s((function(n,o){r._handlers.push([!1,function(t){if(e)try{n(e(t))}catch(e){o(e)}else n(t)},function(e){if(t)try{n(t(e))}catch(e){o(e)}else o(e)}]),r._executeHandlers()}))},s.prototype.catch=function(e){return this.then((function(e){return e}),e)},s.prototype.finally=function(e){var t=this;return new s((function(r,n){var o,i;return t.then((function(t){i=!1,o=t,e&&e()}),(function(t){i=!0,o=t,e&&e()})).then((function(){i?n(o):r(o)}))}))},s.prototype.__init=function(){var e=this;this._resolve=function(t){e._setResult(n.RESOLVED,t)}},s.prototype.__init2=function(){var e=this;this._reject=function(t){e._setResult(n.REJECTED,t)}},s.prototype.__init3=function(){var e=this;this._setResult=function(t,r){e._state===n.PENDING&&(i.isThenable(r)?r.then(e._resolve,e._reject):(e._state=t,e._value=r,e._executeHandlers()))}},s.prototype.__init4=function(){var e=this;this._executeHandlers=function(){if(e._state!==n.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t[0]||(e._state===n.RESOLVED&&t[1](e._value),e._state===n.REJECTED&&t[2](e._value),t[0]=!0)}))}}},t.SyncPromise=s,t.rejectedSyncPromise=function(e){return new s((function(t,r){r(e)}))},t.resolvedSyncPromise=function(e){return new s((function(t){t(e)}))}},"./node_modules/@sentry/utils/cjs/time.js":function(e,t,r){function n(){return Date.now()/1e3}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/worldwide.js");e=function(){var e=o.GLOBAL_OBJ.performance;if(!e||!e.now)return n;var t=Date.now()-e.now(),r=null==e.timeOrigin?t:e.timeOrigin;return function(){return(r+e.now())/1e3}}(),t._browserPerformanceTimeOriginMode=void 0,r=function(){var e=o.GLOBAL_OBJ.performance;if(e&&e.now){var r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):36e5,s=e.timing&&e.timing.navigationStart;return r="number"==typeof s?Math.abs(s+r-n):36e5,36e5>i||36e5>r?i<=r?(t._browserPerformanceTimeOriginMode="timeOrigin",e.timeOrigin):(t._browserPerformanceTimeOriginMode="navigationStart",s):(t._browserPerformanceTimeOriginMode="dateNow",n)}t._browserPerformanceTimeOriginMode="none"}(),t.browserPerformanceTimeOrigin=r,t.dateTimestampInSeconds=n,t.timestampInSeconds=e},"./node_modules/@sentry/utils/cjs/tracing.js":function(e,t,r){function n(e){var t;if(e&&(e=e.match(s)))return"1"===e[3]?t=!0:"0"===e[3]&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/@sentry/utils/cjs/baggage.js"),i=r("./node_modules/@sentry/utils/cjs/misc.js"),s=RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");t.TRACEPARENT_REGEXP=s,t.extractTraceparentData=n,t.generateSentryTraceHeader=function(e,t,r){var n="";return void 0!==r&&(n=r?"-1":"-0"),(e=void 0===e?i.uuid4():e)+"-"+(t=void 0===t?i.uuid4().substring(16):t)+n},t.propagationContextFromHeaders=function(e,t){e=n(e),t=o.baggageHeaderToDynamicSamplingContext(t);var r=e||{},s=r.traceId,a=r.parentSpanId;return r=r.parentSampled,e?{traceId:s||i.uuid4(),parentSpanId:a||i.uuid4().substring(16),spanId:i.uuid4().substring(16),sampled:r,dsc:t||{}}:{traceId:s||i.uuid4(),spanId:i.uuid4().substring(16)}}},"./node_modules/@sentry/utils/cjs/url.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getNumberOfUrlSegments=function(e){return e.split(/\\?\//).filter((function(e){return 0<e.length&&","!==e})).length},t.getSanitizedUrlString=function(e){var t=e.protocol,r=e.host;return e=e.path,(t?t+"://":"")+(r=r&&r.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"")+e},t.parseUrl=function(e){if(!e)return{};if(!(e=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/)))return{};var t=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:t,hash:r,relative:e[5]+t+r}},t.stripUrlQueryAndFragment=function(e){return e.split(/[\?#]/,1)[0]}},"./node_modules/@sentry/utils/cjs/vendor/escapeStringForRegex.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.escapeStringForRegex=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},"./node_modules/@sentry/utils/cjs/vendor/supportsHistory.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/worldwide.js").GLOBAL_OBJ;t.supportsHistory=function(){var e=n.chrome,t="history"in n&&!!n.history.pushState&&!!n.history.replaceState;return!(e&&e.app&&e.app.runtime)&&t}},"./node_modules/@sentry/utils/cjs/version.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_VERSION="8.7.0"},"./node_modules/@sentry/utils/cjs/worldwide.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/@sentry/utils/cjs/version.js"),o=globalThis;t.GLOBAL_OBJ=o,t.getGlobalSingleton=function(e,t,r){return(r=(r=(r=r||o).__SENTRY__=r.__SENTRY__||{})[n.SDK_VERSION]=r[n.SDK_VERSION]||{})[e]||(r[e]=t())}},"./source/BfwClipboard.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.clipboard=void 0;var n=r("./source/BfwLogger.js"),o=r("./source/utils/BfwUtils.js").utils.isNil;(e=function(){}).prototype.createDummyTextAreaAndSetText=function(e){var t=document.createElement("textarea");return t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select(),t},e.prototype.copyToClipboard=function(e){if(o(e)||""===e)throw Error("Value to copy to clipboard cannot be null");e=this.createDummyTextAreaAndSetText(e),document.execCommand("copy")||n.logger.error("Failed to copy to clipboard"),document.body.removeChild(e)},t.clipboard=new e},"./source/BfwConstants.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.constants={httpStatusCodes:{OK:200,PARTIAL_CONTENT:206,CREATED:201,NO_CONTENT:204,INCORRECT_URI:302,NOT_MODIFIED:304,BAD_REQUEST:400,UNAUTHORIZED:401,INVALID_SCHEMA:403,NOT_FOUND:404,HEADER_ERROR:406,GONE:410,ENTITY_TOO_LARGE:413,DATASTORE_RATE_LIMITED:429,RATE_LIMITING:503,SERVER_ERROR:500},localizer:{DEFAULT_MESSAGES_DICTIONARY:"strings",GET_LOCALIZED_STRING:"44F4D54E-AB86-454C-A494-DE3AD87E72F9",GET_LOCALIZED_STRINGS:"0D1C5EEF-749F-4EEB-AD6D-F9C26018EE91",GET_ALL_LOCALIZED_STRINGS:"33445b60-9a88-4d99-829f-564704b2a960",GET_LOCALIZED_STRING_FROM_DICTIONARY:"D15C0B4C-DC1B-403F-A3C8-8BB42137B325",GET_LOCALIZED_STRINGS_FROM_DICTIONARY:"88313974-C371-4A8D-9196-0A2CE43C8327",GET_LOCALIZED_STRING_WITH_FORMAT:"F3D7C8CE-B1A9-425A-AD24-4120C592AF86",GET_LOCALIZED_STRING_WITH_FORMAT_FROM_DICTIONARY:"9066F4CC-31A4-45F5-A07A-81DDC38E5F99",GET_CURRENT_LANGUAGE_DIRECTION:"C30B2719-DD82-41EC-E93A-8A602444F90A",GET_LOCALIZED_STRINGS_WITH_FORMAT:"E225C9A6-209A-4702-8E48-3B6EFBF67E26"},clipboard:{messages:{CLEAR_CLIPBOARD:"aa232db5-1dba-473a-ab4b-e9c378b7978b"},DEFAULT_TIMEOUT:6e4},telemetry:{TELEMETRY_ENABLED:"293E0764-AF48-4C52-B675-0161A7B6BECE",TELEMETRY_OPT_OUT_SHOWN:"FE795012-44D6-491D-A8A1-E83633892C9D",BFW_TELEMETRY_SETTINGS_CONTAINER:"233D07C0-6318-4BCE-A36A-82DFB19F3B2A",USER_RESPONDED_IN_OPT_OUT_PAGE:"8157BC1F-5ED8-4373-A18D-8CD8E0263752",LAST_OFFER_DATE:"9EA53F0C-7F18-44A5-8138-C11F27D66FC1",TELEMETRY_SENT_LIST:"C9183765-5049-46B4-9768-DC81712E2696",TELEMETRY_PARAMETERS_QUEUE:"44e993eb-1ad8-42ed-ae2e-7130e3da7086"},ERROR_REPORTING:{CAPTURE_EVENT:"e395682f-23e4-43c1-93c6-e7bd781b0ed1",LEVEL:{DEBUG:"debug",INFO:"info",WARN:"warning",ERROR:"error"},INVALID_MESSAGE_TYPE_ERROR:"payload should be an instanceof Error other than a string"},os:{WINDOWS:"Windows",MAC:"Mac",UNKNOWN:"Unknown"},CDN_FILE_DOWNLOADER:{ENCRYPTION_METHOD:"RS256",SUPPORTED_PROTOCOL:"https",SUPPORTED_FILEFORMATS:["json"],RESPONSE_STATUS:{UNSUCCESSFUL_RESPONSE:"Error in fetching the file with status code",FILE_TAMPERED:"CDN file has been tampered",PUBLIC_KEY_NOT_VERIFIED:"Public key verification has failed",INVALID_PARAMETERS:"Invalid paramaters"},CERT_ISSUER_NAME:"CERT_ISSUER_NAME",CERT_ISSUED:"CERT_ISSUED"},JSON_DOWNLOADER:{JSON_DOWNLOADER_ALARM:"json_downloader",RETRY_JSON_DOWNLOADER_ALARM:"retry_json_downloader",ROOT_CA:"\\n        -----BEGIN CERTIFICATE-----\\n        MIIEvjCFBwMBBggrBgEFBQcDAjB2BggrBgEFBQcBAQRqMGgwJAYIKwYBBQUHMAGG\\n        GGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBABggrBgEFBQcwAoY0aHR0cDovL2Nh\\n        Y2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0R2xvYmFsUm9vdENBLmNydDBCBgNV\\n        HR8EOzA5MDegNaAzhjFodHRwOi8vY3JsMy5kaWdpY2VydC5jb20vRGlnaUNlcnRH\\n        bG9iYWxSb290Q0EuY3JsMD0GA1UdIAQ2MDQwCwYJYIZIAYb9bAIBMAcGBWeBDAEB\\n        MAgGBmeBDAECATAIBgZngQwBAgIwCAYGZ4EMAQIDMA0GCSqGSIb3DQEBCwUAA4IB\\n        AQCAMs5eC91uWg0Kr+HWhMvAjvqFcO3aXbMM9yt1QP6FCvrzMXi3cEsaiVi6gL3z\\n        ax3pfs8LulicWdSQ0/1s/dCYbbdxglvPbQtaCdB73sRD2Cqk3p5BJl+7j5nL3a7h\\n        qG+fh/50tx8bIKuxT8b1Z11dmzzp/2n3YWzW2fP9NsarA4h20ksudYbj/NhVfSbC\\n        EXffPgK2fPOre3qGNm+499iTcc+G33Mw+nur7SpZyEKEOxEXGlLzyQ4UfaJbcme6\\n        ce1XR2bFuAJKZTRei9AqPCCcUZlM51Ke92sRKw2Sfh3oius2FkOH6ipjv3U/697E\\n        A7sKPPcw7+uvTPyLNhBzPvOk\\n        -----END CERTIFICATE-----\\n        ",CERT_INFO:{CERT_ISSUER_NAME:"DigiCert TLS RSA SHA256 2020 CA1",CERT_ISSUED:"static.nortoncdn.com"}},performanceReporter:{MESSAGES:{REPORT_START:"2379B4CB-E725-4818-8FCC-A9372EABBF45",REPORT_END:"1F62DD4E-56AD-4528-9A69-BFE9EC135B9F",GET_PERFORMANCE_REPORTER:"2306DE62-ACA8-40AE-9909-517474C1120B"}},utils:{IP:"ip"},DEFAULT_FETCH_TIMEOUT:6e4,CERT_COMMON_NAME:"CN",NAVIGATION_COMPLETE:"complete",HTTPS_PROTOCOL:"https://",STORE_URLS:{Chrome:"https://chromewebstore.google.com/",Firefox:"https://addons.mozilla.org/",Safari:"https://safari-extensions.apple.com/",Edge:"https://microsoftedge.microsoft.com/addons"},BROWSER_TYPE:{CHROME:"Chrome",FIREFOX:"Firefox",EDGE:"Edge",SAFARI:"Safari",EDGE_CHROMIUM:"Edge-Chromium",NSB:"Norton Secure Browser"},NORTON_BROWSER_TYPE:["Norton Secure Browser","Norton Private Browser"],RANDOM_NUMBER_LIMITS:{MIN:0,MAX:4294967295},PROTOCOLS:"http https chrome-extension extension moz-extension ms-browser-extension chrome edge about".split(" "),RESTRICTED_PROTOCOLS:["chrome:","edge:","about:"],darkMode:{BFW_DARK_MODE_SETTINGS_CONTAINER:"EFE6BD8D-BCA8-402D-B2A4-5C2DC313654D",SET_DARK_MODE_STATUS:"3F2DC5D0-94C2-4B48-9C7B-94576B21F76A",GET_DARK_MODE_STATUS:"84C4D37D-14DD-440B-9CAF-7C41AC4790C5",DARK_MODE_STATUS:"DARK_MODE_STATUS"},KEEP_BG_ALIVE:{PORT_NAME:"KEEP_ALIVE",MAX_BROWSER_CONNECTION_TIME:3e5},RTL_LOCALES:["ar","he"],uiConstants:{NOTIFICATION:{STACK_COUNT:1,DEFAULT_TIMEOUT:1e4,HEIGHT:200,WARNING_HEIGHT:370,WIDTH:460,BFW_NOTIFICATION_SETTINGS_CONTAINER:"d58fdd21-7954-438c-83fb-8412e1affd1c",NOTIFICATION_QUEUE:"4109ec9d-d6b4-4e4c-a7d4-1bfc7ad1b3bb",NOTIFICATION_EVENT:"9609e71b-3028-402b-ae7a-0e27601d475d",TYPE:{QUESTION:0,TIMED:1,WARNING_QUESTION:2},BUTTON:{DEFAULT:0,SECONDARY:1},MESSAGES:{RESIZE_IFRAME_HEIGHT:"db9de310-ecd6-4213-a3f3-7666afcd23b1",FIXED_IFRAME_HEIGHT:"992D0CB9-739C-462B-9764-A3E6C02C959C",DEFAULT_MESSAGE:"8DB8FE17-6F5E-485E-81EE-1112762F48E4",DEFAULT_BUTTON_PRESSED:"209CBB4D-6D6B-46F4-9EA7-303181937BF6",SECONDARY_LINK_PRESSED:"8881560D-E8A2-41FA-A81D-A90D41311D0D",THIRD_BUTTON_PRESSED:"196F06EB-956E-44EE-A60D-F4741C5CF4D3",NOTIFICATION_CLOSED:"EA7414A5-667F-4459-BAC2-38464F3330A3",NOTIFICATION_QUEUE_MESSAGE:"A88CCFCD-B98D-4607-B780-79A1CF7ADFAD",NOTIFICATIONS_SHOWN:"57C094C2-F0F0-44C2-9BBF-9E147135FB50",UI_INIT:"EE5B61D6-3A55-4ABB-B304-02BDAD9698FE",UI_INIT_PROXY:"0FABE0DB-1C87-475B-D89E-F4EC0EE963DE",HIDE_NOTIFICATIONS:"8211780F-93EC-4E37-8933-E60CB6052E84"}}}}},"./source/BfwCookies.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.cookies=void 0;var n=(e=r("./source/utils/BfwUtils.js").utils).isString,o=e.isArray;(e=function(){}).prototype.set=function(e,t,r){if(r=void 0!==r&&r,!n(e))throw Error("Key cannot be null");if(!n(t))throw Error("Value cannot be null");e=e+"="+t,r&&((r=new Date).setDate(r.getDate()+3650),e+=";expires="+r.toUTCString()),document.cookie=e},e.prototype.get=function(e){if(!n(e))throw Error("Key cannot be null");if(e=new RegExp(e+"\\s*=[^;]*").exec(document.cookie),o(e)&&0!==e.length)return e[0].split("=")[1].trim()},t.cookies=new e},"./source/BfwExtensionAdapter.js":function(e,t,r){function n(e,t,r){e:if("object"==typeof t&&t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:t+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.extensionAdapter=void 0;var o=r("./source/utils/BfwUtils.js"),s=r("./source/globals/BfwGlobals.js"),a=r("./source/BfwConstants.js"),u=r("./source/BfwExtensionAdapterBase.js"),l=r("./source/BfwLogger.js"),c=(e=o.utils).isBoolean,d=e.isString,f=e.isArray,p=e.isNil,h=e.isntNil,_=e.isFunction,E=e.isInteger,g=e.isObject,m=e.getValueAtPath,y=Math.pow(2,31)-1;e=function(){var e=i.getRestArguments.apply(0,arguments),t=u.ExtensionAdapterBase.apply(this,[].concat(i.arrayFromIterable(e)))||this;return n(t,"_getActionObject",(function(){return t.isManifestV3Extension()?chrome.action:chrome.browserAction})),n(t,"uninstallSelf",(function(e,t){if(e=void 0!==e&&e,t=void 0===t?null:t,p(chrome)||p(chrome.management))throw Error("chrome is null or chrome.management is null");var r={showConfirmDialog:e};return s.globals.BROWSER===a.constants.BROWSER_TYPE.FIREFOX&&(r.dialogMessage=t),new Promise((function(e){chrome.management.uninstallSelf(r,(function(){e()}))}))})),n(t,"getExtensionDetails",(function(e){if(p(e))throw Error("Invalid arguments");if(p(chrome)||p(chrome.management)||p(chrome.management.get))throw Error("Extension doesnt have enough permissions");return new Promise((function(r,n){chrome.management.get(e,(function(e){var o=t.getLastError();if(h(o)||p(e))return n("Error in getting extension details");r(e)}))}))})),n(t,"createAlarm",(function(e,t){if(p(chrome)||p(chrome.alarms))throw Error("chrome is null or chrome.alarms is null");if(!d(e)||!g(t)||o.utils.isEmptyObject(t))throw Error("createAlarm: arguments are not valid");chrome.alarms.create(e,t)})),n(t,"getAlarm",(function(e){if(p(chrome)||p(chrome.alarms))throw Error("chrome is null or chrome.alarms is null");if(!d(e))throw Error("getAlarm: invalid arguments");return new Promise((function(t){chrome.alarms.get(e,(function(e){t(e)}))}))})),n(t,"clearAlarm",(function(e){if(p(chrome)||p(chrome.alarms))throw Error("chrome is null or chrome.alarms is null");if(!d(e))throw Error("clearAlarm: invalid arguments");return new Promise((function(r,n){chrome.alarms.clear(e,(function(e){e?r():(e=t.getLastError(),n("Alarm is not cleared with error "+e))}))}))})),n(t,"addExtensionEnabledListener",(function(e){if(!_(e))throw Error("Invalid argument");if(p(chrome)||p(chrome.management)||p(chrome.management.onEnabled))throw Error("Extension doesnt have enough permissions");chrome.management.onEnabled.addListener(e)})),n(t,"removeExtensionEnabledListener",(function(e){if(!_(e))throw Error("Invalid argument");if(p(chrome)||p(chrome.management)||p(chrome.management.onEnabled))throw Error("Extension doesnt have enough permissions");chrome.management.onEnabled.removeListener(e)})),n(t,"addExtensionInstalledListener",(function(e){if(!_(e))throw Error("Invalid argument");if(p(chrome)||p(chrome.management)||p(chrome.management.onInstalled))throw Error("Extension doesnt have enough permissions");chrome.management.onInstalled.addListener(e)})),n(t,"removeExtensionInstalledListener",(function(e){if(!_(e))throw Error("Invalid argument");if(p(chrome)||p(chrome.management)||p(chrome.management.onInstalled))throw Error("Extension doesnt have enough permissions");chrome.management.onInstalled.removeListener(e)})),n(t,"updateDynamicRules",(function(e,r){return new Promise((function(n,o){if(f(e)&&0!==e.length)if(p(chrome)||p(chrome.declarativeNetRequest))o("chrome is null or chrome.declarativeNetRequest is null");else{var s=e.map((function(e){return e.id}));f(r)&&0<r.length&&(s=new Set([].concat(i.arrayFromIterable(s),i.arrayFromIterable(r))),s=[].concat(i.arrayFromIterable(s))),chrome.declarativeNetRequest.updateDynamicRules({addRules:e,removeRuleIds:s},(function(){var e=t.getLastError();h(e)?o(e):n()}))}else o("Invalid rules")}))})),n(t,"getDynamicRules",(function(){return new Promise((function(e,r){p(chrome)||p(chrome.declarativeNetRequest)?r("chrome is null or chrome.declarativeNetRequest is null"):chrome.declarativeNetRequest.getDynamicRules((function(n){var o=t.getLastError();h(o)?r(o):e(n)}))}))})),n(t,"getAllMatchedRules",(function(){return new Promise((function(e,r){p(chrome)||p(chrome.declarativeNetRequest)?r("chrome is null or chrome.declarativeNetRequest is null"):chrome.declarativeNetRequest.getMatchedRules((function(n){var o=t.getLastError();h(o)?r(o):e(n)}))}))})),n(t,"addAlarmListener",(function(e){if(p(chrome)||p(chrome.alarms))throw Error("chrome is null or chrome.alarms is null");if(!_(e))throw Error("addAlarmListener: invalid arguments");chrome.alarms.onAlarm.addListener(e)})),n(t,"executeContentScript",(function(e,r){return new Promise((function(n,o){if(p(e)||p(r))o("portalTabId or script filePath is null");else if(t.isManifestV3Extension()){if(p(chrome)||p(chrome.scripting))throw Error("chrome is null or chrome.scripting is null");chrome.scripting.executeScript({target:{tabId:e},files:[r]},(function(e){t._executeCSCallback(e,n,o,r)}))}else{if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");chrome.tabs.executeScript(e,{file:r},(function(e){t._executeCSCallback(e,n,o,r)}))}}))})),n(t,"_executeCSCallback",(function(e,r,n,o){o=t.getLastError(),p(e)||h(o)?n():r()})),n(t,"requestPermissions",(function(e){if(!f(e))throw Error("Invalid argument");if(p(chrome)||p(chrome.permissions))throw Error("chrome is null or chrome.permissions is null");return new Promise((function(t){chrome.permissions.request({permissions:e},(function(e){t(e)}))}))})),n(t,"setPasswordSavingEnabled",(function(e){if(!c(e))throw Error("Invalid argument");if(p(chrome)||p(chrome.privacy)||p(chrome.privacy.services))throw Error("chrome, chrome.privacy or chrome.privacy.services is null");chrome.privacy.services.passwordSavingEnabled.set({value:e})})),n(t,"getPasswordSavingEnabled",(function(){if(p(chrome)||p(chrome.privacy)||p(chrome.privacy.services))throw Error("chrome, chrome.privacy or chrome.privacy.services is null");return new Promise((function(e){chrome.privacy.services.passwordSavingEnabled.get({},(function(t){return e(t)}))}))})),t},i.inherits(e,u.ExtensionAdapterBase),e.prototype.getWindowIDNone=function(){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");return chrome.windows.WINDOW_ID_NONE},e.prototype.getLastError=function(){return chrome.runtime.lastError},e.prototype.getInvalidTabId=function(){return p(chrome)||p(chrome.tabs)?-1:chrome.tabs.TAB_ID_NONE},e.prototype.reloadExtension=function(){if(p(chrome)||p(chrome.runtime))throw Error("chrome is null or chrome.runtime is null");chrome.runtime.reload()},e.prototype.isPrivateModeAllowed=function(){return new Promise((function(e){chrome.extension.isAllowedIncognitoAccess((function(t){e(t)}))}))},e.prototype.getAllWindows=function(e,t){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.getAllWindows");p(t)&&(t={}),chrome.windows.getAll(t,e)},e.prototype.getCurrentWindow=function(e,t){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.getAllWindows");p(t)&&(t={}),chrome.windows.getCurrent(t,e)},e.prototype.createWindow=function(e,t,r){if(r=void 0===r||r,p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");var n={};s.globals.BROWSER!==a.constants.BROWSER_TYPE.FIREFOX&&(n.focused=r),h(e)&&(n.url=e),chrome.windows.create(n,t)},e.prototype.createAppWindow=function(e,t){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");var r={};r.type=chrome.windows.CreateType.PANEL,h(e)&&(r.url=e),chrome.windows.create(r,t)},e.prototype.createPrivateWindow=function(e,t,r){if(r=void 0===r||r,p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");r={incognito:!0,focused:r},h(e)&&(r.url=e),chrome.windows.create(r,t)},e.prototype.closeWindow=function(e,t){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");if(!E(e))throw Error("invalid arguments to extensionAdapter.closeWindow");chrome.windows.remove(e,t)},e.prototype.focusWindow=function(e,t){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");if(!E(e))throw Error("invalid arguments to extensionAdapter.focusWindow");chrome.windows.update(e,{focused:!0},t)},e.prototype.addWindowRemovedEventListener=function(e){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");if(!_(e))throw Error("extensionAdapter.addWindowRemovedEventListener needs a callback");chrome.windows.onRemoved.addListener(e)},e.prototype.removeWindowRemovedEventListener=function(e){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");if(!_(e))throw Error("extensionAdapter.removeWindowRemovedEventListener needs a callback");chrome.windows.onRemoved.hasListeners()&&chrome.windows.onRemoved.removeListener(e)},e.prototype.addWindowFocusedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.windows is null");if(!_(e))throw Error("extensionAdapter.addWindowFocusedEventListener needs a callback");chrome.windows.onFocusChanged.addListener(e)},e.prototype.getTab=function(e,t){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!E(e)||!_(t))throw Error("invalid arguments to extensionAdapter.getTab");chrome.tabs.get(e,t)},e.prototype.detectLanguageByTabId=function(e){return function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!E(e))throw Error("invalid arguments to extensionAdapter.detectLanguageByTabId");return!0}(e)&&_(chrome.tabs.detectLanguage)?new Promise((function(t,r){chrome.tabs.detectLanguage(e,(function(e){t(e)}))})):null},e.prototype.getActiveTab=function(e,t){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.getActiveTab");var r={active:!0};E(t)?r.windowId=t:r.currentWindow=!0,chrome.tabs.query(r,(function(t){e(t[0])}))},e.prototype.getAllTabs=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.getAllTabs");chrome.tabs.query({},e)},e.prototype.getTabsWithURL=function(e,t){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!d(e)||!_(t))throw Error("invalid arguments to extensionAdapter.getTabsWithURL");chrome.tabs.query({url:e},t)},e.prototype.updateTabUrl=function(e,t,r){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!E(e)||!d(t))throw Error("invalid arguments to extensionAdapter.updateTabUrl");chrome.tabs.update(e,{url:t},r)},e.prototype.activateTab=function(e,t){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(p(e)||!E(e))throw Error("invalid arguments to extensionAdapter.activateTab");chrome.tabs.update(e,{active:!0},t)},e.prototype.createTab=function(e,t,r,n){if(r=void 0===r||r,n=void 0===n?{}:n,p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");p(e)?chrome.tabs.create({},t):chrome.tabs.create(Object.assign({},{url:e,active:r},n),t)},e.prototype.closeTab=function(e,t){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!E(e)&&!f(e))throw Error("invalid arguments to extensionAdapter.closeTab");chrome.tabs.remove(e,t)},e.prototype.closeTabAndEnsureBrowserIsAlive=function(e,t){var r=this;if(!E(e)||0>=e||h(t)&&!_(t))throw Error("Invalid arguments to extensionAdapter.closeTabAndEnsureBrowserIsAlive()");this.getAllWindows((function(n){1===n.length?r.getAllTabs((function(n){1===n.length&&n[0].id===e&&r.createTab(),r.closeTab(e),h(t)&&t()})):(r.closeTab(e),h(t)&&t())}))},e.prototype.addTabRemovedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.addTabRemovedEventListener needs a callback");chrome.tabs.onRemoved.addListener(e)},e.prototype.removeTabRemovedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.removeTabRemovedEventListener needs a callback");chrome.tabs.onRemoved.hasListener(e)&&chrome.tabs.onRemoved.removeListener(e)},e.prototype.removeTabActivatedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.removeTabActivatedEventListener needs a callback");chrome.tabs.onActivated.hasListener(e)&&chrome.tabs.onActivated.removeListener(e)},e.prototype.addTabActivatedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.addTabActivatedEventListener needs a callback");chrome.tabs.onActivated.addListener(e)},e.prototype.addTabReplacedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(p(e)||!_(e))throw Error("extensionAdapter.addTabReplacedEventListener needs a callback");chrome.tabs.onReplaced.addListener(e)},e.prototype.addTabUpdatedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.addTabUpdatedEventListener needs a callback");chrome.tabs.onUpdated.addListener(e)},e.prototype.removeTabUpdatedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.removeTabUpdatedEventListener needs a callback");chrome.tabs.onUpdated.hasListener(e)&&chrome.tabs.onUpdated.removeListener(e)},e.prototype.addBeforeNavigateEventListener=function(e){if(p(chrome)||p(chrome.webNavigation))throw Error("no chrome object available");if(!_(e))throw Error("addBeforeNavigateListener needs a callback");chrome.webNavigation.onBeforeNavigate.addListener(e)},e.prototype.removeBeforeNavigateEventListener=function(e){if(p(chrome)||p(chrome.webNavigation))throw Error("no chrome object available");if(!_(e))throw Error("removeBeforeNavigateEventListener needs a callback");chrome.webNavigation.onBeforeNavigate.hasListener(e)&&chrome.webNavigation.onBeforeNavigate.removeListener(e)},e.prototype.addNavigationCommittedEventListener=function(e){if(p(chrome)||p(chrome.webNavigation))throw Error("no chrome object available");if(!_(e))throw Error("addBeforeNavigateListener needs a callback");chrome.webNavigation.onCommitted.addListener(e)},e.prototype.removeNavigationCommittedEventListener=function(e){if(p(chrome)||p(chrome.webNavigation))throw Error("no chrome object available");if(!_(e))throw Error("removeNavigationCommittedEventListener needs a callback");chrome.webNavigation.onCommitted.hasListener(e)&&chrome.webNavigation.onCommitted.removeListener(e)},e.prototype.addNavigationCompletedEventListener=function(e){if(p(chrome)||p(chrome.webNavigation))throw Error("no chrome object available");if(!_(e))throw Error("addNavigationCompletedEventListener needs a callback");chrome.webNavigation.onCompleted.addListener(e)},e.prototype.removeNavigationCompletedEventListener=function(e){if(p(chrome)||p(chrome.webNavigation))throw Error("no chrome object available");if(!_(e))throw Error("removeNavigationCompletedEventListener needs a callback");chrome.webNavigation.onCompleted.hasListener(e)&&chrome.webNavigation.onCompleted.removeListener(e)},e.prototype.addOnBeforeRequestEventListener=function(e,t,r){if(p(chrome)||p(chrome.webRequest))throw Error("chrome is null or chrome.tabs is null");if(!1===_(e))throw Error("Callback cannot be null");chrome.webRequest.onBeforeRequest.addListener(e,{urls:t},r)},e.prototype.removeOnBeforeRequestEventListener=function(e){chrome.webRequest.onBeforeRequest.removeListener(e)},e.prototype.addWebRequestErrorListener=function(e,t){window.chrome.webRequest.onErrorOccurred.addListener(e,t)},e.prototype.removeWebRequestErrorListener=function(e){window.chrome.webRequest.onErrorOccurred.removeListener(e)},e.prototype.setBrowserIcon=function(e,t){if(p(chrome))throw Error("chrome is null");var r=this._getActionObject();if(p(r))throw Error("chrome.action is null");if(p(e))throw Error("invalid arguments to extensionAdapter.setBrowserIcon");r.setIcon(e,t)},e.prototype.sendMessageExternal=function(e,t,r){if(p(chrome)||p(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(p(e))throw Error("invalid arguments to extensionAdapter.sendMessage");if(p(t))throw Error("invalid arguments to extensionAdapter.sendMessage");chrome.runtime.sendMessage(e,t,r)},e.prototype.sendMessageToTab=function(e,t,r,n){if(p(chrome)||p(chrome.tabs))throw Error("chrome or chrome.tabs is null");if(p(t)||p(e))throw Error("invalid arguments to extensionAdapter.sendMessageToTab");var o=e.url||e.pendingUrl;try{if(o){var i=new URL(o);if(a.constants.RESTRICTED_PROTOCOLS.includes(i.protocol))return}}catch(e){}chrome.tabs.sendMessage(e.id,t,n,r||function(e){chrome.runtime.lastError&&l.logger.log("Error in sendMessageToTab"+JSON.stringify(chrome.runtime.lastError))})},e.prototype.sendMessageToParentFrame=function(e,t,r,n){var o=this;if(p(t)||p(e))throw Error("invalid arguments to extensionAdapter.sendMessageToParentFrame");this.getFrame({tabId:e.id,frameId:n}).then((function(n){o.sendMessageToTab(e,t,r,{frameId:n.parentFrameId})}))},e.prototype.addMessageExternalListener=function(e){if(p(chrome)||p(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.addMessageExternalListener");chrome.runtime.onMessageExternal.addListener((function(t,r,n){return e(t,r,n)}))},e.prototype.addBrowserActionOnClickListener=function(e){if(p(chrome))throw Error("chrome is null");var t=this._getActionObject();if(p(t))throw Error("chrome.action is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.addBrowserActionOnClickListener");t.onClicked.addListener(e)},e.prototype.setPopupHandler=function(e){if(p(chrome))throw Error("chrome is null");var t=this._getActionObject();if(p(t))throw Error("chrome.action is null");d(e)||(e=""),t.setPopup({popup:e})},e.prototype.addTabCreatedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.addTabCreatedEventListener needs a callback");chrome.tabs.onCreated.addListener(e)},e.prototype.removeTabCreatedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.removeTabCreatedEventListener needs a callback");chrome.tabs.onCreated.hasListener(e)&&chrome.tabs.onCreated.removeListener(e)},e.prototype.addWindowCreatedEventListener=function(e){if(p(chrome)||p(chrome.windows))throw Error("chrome is null or chrome.windows is null");if(!_(e))throw Error("extensionAdapter.addWindowCreatedEventListener needs a callback");chrome.windows.onCreated.addListener(e)},e.prototype.removeWindowCreatedEventListener=function(e){if(p(chrome)||p(chrome.tabs))throw Error("chrome is null or chrome.tabs is null");if(!_(e))throw Error("extensionAdapter.removeWindowCreatedEventListener needs a callback");chrome.windows.onCreated.hasListener(e)&&chrome.windows.onCreated.removeListener(e)},e.prototype.getFrame=function(e){var t=null,r={errorOccured:!0,url:null,parentFrameId:null};if(p(chrome)||p(chrome.webNavigation))throw Error("no chrome object available");return e&&(t=p(e.frameId)?new Promise((function(e){e(r)})):new Promise((function(t){chrome.webNavigation.getFrame(e,(function(e){t(e)}))}))),t},e.prototype.getTabID=function(e){return p(e)?null:e.id},e.prototype.getWindowIDForTab=function(e){return p(e)?null:e.windowId},e.prototype.getWindowID=function(e){return p(e)?null:e.id},e.prototype.i18nGetMessage=function(e,t){if(p(window.chrome)||p(window.chrome.i18n))throw Error("Unsupported api");if(!d(e))throw Error("chrome.i18n.getMessage expects a string messageName argument");return chrome.i18n.getMessage(e,t)},e.prototype.setBadgeText=function(e,t){if(p(chrome))throw Error("chrome is null");var r=this._getActionObject();if(p(r))throw Error("chrome action is null");if(!d(e)||4<e.length)throw Error("invalid arguments to extensionAdapter.setBadgeText");e={text:e},h(t)&&(e.tabId=t),r.setBadgeText(e)},e.prototype.setTitle=function(e,t){if(p(chrome))throw Error("chrome or chrome.action is null");var r=this._getActionObject();if(p(r))throw Error("chrome action is null");if(!d(e))throw Error("invalid arguments to extensionAdapter.setTitle");e={title:e},h(t)&&(e.tabId=t),r.setTitle(e)},e.prototype.setBadgeBackgroundColor=function(e){if(p(chrome))throw Error("chrome is null");var t=this._getActionObject();if(p(t))throw Error("chrome action is null");if(!d(e))throw Error("invalid arguments to extensionAdapter.setBadgeBackgroundColor");t.setBadgeBackgroundColor({color:e})},e.prototype.onPopoverLoad=function(e){window.addEventListener("load",e)},e.prototype.getAllHistory=function(e){return e=void 0===e?"":e,new Promise((function(t){chrome.history.search({text:e,startTime:0,maxResults:y},(function(e){for(var r=[],n=(e=i.makeIterator(e)).next();!n.done;n=e.next())n=n.value,d(n.url)&&r.push(n.url);t(r)}))}))},e.prototype.addUrlsToHistory=function(e){if(!f(e))throw Error("urls must be an array");for(var t=[],r=(e=i.makeIterator(e)).next();!r.done;r=e.next())t.push(this.addUrlToHistory(r.value));return Promise.all(t)},e.prototype.clearHistory=function(){return new Promise((function(e){chrome.history.deleteAll((function(){e()}))}))},e.prototype.addUrlToHistory=function(e){if(!d(e))throw Error("url must be a string");return new Promise((function(t){chrome.history.addUrl({url:e},(function(){t()}))}))},e.prototype.deleteUrlFromHistory=function(e,t){if(p(chrome)||p(chrome.history))throw Error("Unsupported api");if(!d(e))throw Error("url must be a string");chrome.history.deleteUrl({url:e},t)},e.prototype.addHistoryOnVisitedListener=function(e){if(p(chrome)||p(chrome.history)||p(chrome.history.onVisited))throw Error("Unsupported api");if(!_(e))throw Error("callback must be a function");chrome.history.onVisited.addListener(e)},e.prototype.removeHistoryOnVisitedListener=function(e){if(p(chrome)||p(chrome.history)||p(chrome.history.onVisited))throw Error("Unsupported api");if(!_(e))throw Error("callback must be a function");chrome.history.onVisited.hasListeners()&&chrome.history.onVisited.removeListener(e)},e.prototype.removeBrowsingData=function(e,t,r){if(p(chrome)||p(chrome.browsingData))throw Error("Unsupported api");if(!g(e))throw Error("removalOptions must be an object");if(!g(t))throw Error("dataToRemove must be an object");chrome.browsingData.remove(e,t,r)},e.prototype.getAllCookies=function(e){return e=void 0===e?null:e,new Promise((function(t){chrome.cookies.getAll({domain:e},(function(e){t(e)}))}))},e.prototype.removeCookie=function(e){if(p(e))throw Error("cookie cannot be null");var t=(e.secure?"https://":"http://")+e.domain+e.path;return new Promise((function(r,n){chrome.cookies.remove({name:e.name,url:t},(function(e){p(e)&&n(chrome.runtime.lastError),r(e)}))}))},e.prototype.removeCookies=function(e,t){if(!f(e))throw Error("cookiesArray must be array");var r=[],n=e;for(f(t)&&(n=e.filter((function(e){return!t.some((function(t){return t.domain===e.domain&&t.path===e.path}))}))),n=(e=i.makeIterator(n)).next();!n.done;n=e.next())r.push(this.removeCookie(n.value));return Promise.all(r)},e.prototype.setCookie=function(e){if(p(e))throw Error("cookie cannot be null");var t={url:new URL((e.secure?"https://":"http://")+e.domain).toString(),httpOnly:e.httpOnly,name:e.name,sameSite:e.sameSite,secure:e.secure,storeId:e.storeId,value:e.value,path:e.path};return d(e.domain)&&"."===e.domain.charAt()&&(t.domain=e.domain),h(e.expirationDate)&&(t.expirationDate=e.expirationDate),new Promise((function(e,r){chrome.cookies.set(t,(function(t){var n=chrome.runtime.lastError;p(t)&&h(n)&&r(n),e(t)}))}))},e.prototype.setCookies=function(e){if(!f(e))throw Error("cookiesArray must be array");for(var t=[],r=(e=i.makeIterator(e)).next();!r.done;r=e.next())t.push(this.setCookie(r.value));return Promise.all(t)},e.prototype.onCookieChangedForUrl=function(e,t){if(!d(e))throw Error("url must be a string");if(!_(t))throw Error("callback must be a function");chrome.cookies.onChanged.addListener((function(r){var n=m(r,"cookie.domain");d(n)&&n.includes(e)?t(r):t()}))},e.prototype.checkCookieContentSettingsForUrl=function(e){if(p(chrome)||p(chrome.contentSettings))throw Error("Unsupported api");if(!d(e))throw Error("primaryUrl must be a string");return new Promise((function(t,r){chrome.contentSettings.cookies.get({primaryUrl:e},(function(e){e.setting===chrome.contentSettings.CookiesContentSetting.BLOCK?r(Error("Cookie was blocked")):t()}))}))},e.prototype.getManifest=function(){return chrome.runtime.getManifest()},e.prototype.getVersion=function(){return chrome.runtime.getManifest().version},e.prototype.setProxySettings=function(e){if(p(chrome)||p(chrome.proxy))throw Error("Unsupported api");if(!g(e))throw Error("details must be an object");return new Promise((function(t){chrome.proxy.settings.set(e,t)}))},e.prototype.getProxySettings=function(){if(p(chrome)||p(chrome.proxy))throw Error("Unsupported api");return new Promise((function(e){chrome.proxy.settings.get({},e)}))},e.prototype.onProxySettingsChange=function(e){if(p(chrome)||p(chrome.proxy))throw Error("Unsupported api");if(!_(e))throw Error("callback must be a function");chrome.proxy.settings.onChange.addListener(e)},e.prototype.onProxyError=function(e){if(p(chrome)||p(chrome.proxy))throw Error("Unsupported api");if(!_(e))throw Error("callback must be a function");chrome.proxy.onProxyError.addListener(e)},e.prototype.onWebRequestAuthRequired=function(e){if(p(chrome)||p(chrome.webRequest))throw Error("Unsupported api");if(!_(e))throw Error("callback must be a function");chrome.webRequest.onAuthRequired.addListener(e,{urls:["<all_urls>"]},["asyncBlocking"])},e.prototype.addStartupListener=function(e){if(p(chrome)||p(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.addStartupListener");chrome.runtime.onStartup.addListener(e)},e.prototype.removeStartupListener=function(e){if(p(chrome)||p(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.removeStartupListener");chrome.runtime.onStartup.removeListener(e)},e.prototype.setUninstallURL=function(e){if(p(chrome)||p(chrome.runtime))throw Error("chrome is null or chrome.runtime is null");if(!d(e))throw Error("Invalid URL");if(255<e.length)throw Error("URL length should not be more than 255 characters");return new Promise((function(t,r){chrome.runtime.setUninstallURL(e,(function(){var e=chrome.runtime.lastError;if(h(e))return r(e);t("Uninstall Survey URL set successfully")}))}))},e.prototype.addStorageListener=function(e){if(p(chrome)||p(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.addStorageListener");chrome.storage.onChanged.addListener(e)},e.prototype.removeStorageListener=function(e){if(p(chrome)||p(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!_(e))throw Error("invalid arguments to extensionAdapter.removeStorageListener");chrome.storage.onChanged.removeListener(e)},t.extensionAdapter=new e},"./source/BfwExtensionAdapterBase.js":function(e,t,r){function n(e,t,r){e:if("object"==typeof t&&t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:t+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionAdapterBase=void 0;var o=(e=r("./source/utils/BfwUtils.js").utils).isBoolean,i=e.isString,s=e.isNil,a=e.isFunction,u=e.isArray;(e=function(){var e=this;n(this,"requestPermissions",(function(e){if(!u(e))throw Error("Invalid argument");if(s(chrome)||s(chrome.permissions))throw Error("chrome is null or chrome.permissions is null");return new Promise((function(t){chrome.permissions.request({permissions:e},(function(e){t(e)}))}))})),n(this,"normalizeExtensionURL",(function(t){return i(t)?t.replace(e.getExtensionURL(""),"ext:///"):t})),n(this,"darkModeEnabled",(function(){return e._systemColorThemeDark.matches})),n(this,"addSystemColorThemeChangeEventListener",(function(t){e._systemColorThemeDark.addEventListener("change",t)})),n(this,"removeSystemColorThemeChangeEventListener",(function(t){e._systemColorThemeDark.removeEventListener("change",t)})),n(this,"isManifestV3Extension",(function(){return o(e._isManifestV3Extension)?e._isManifestV3Extension:s(chrome)||s(chrome.runtime)?e._isManifestV3Extension=!1:(e._isManifestV3Extension=3===chrome.runtime.getManifest().manifest_version,e._isManifestV3Extension)})),this._systemColorThemeDark=window.matchMedia("(prefers-color-scheme: dark)")}).prototype.getExtensionId=function(){return chrome.runtime.id},e.prototype.getBackgroundPage=function(){return s(chrome)||s(chrome.extension)?null:chrome.extension.getBackgroundPage()},e.prototype.getExtensionURL=function(e){if(s(chrome)||s(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!i(e))throw Error("extensionAdapter.getExtensionURL expects a string path argument");return chrome.runtime.getURL(e)},e.prototype.sendMessage=function(e,t){if(s(chrome)||s(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(s(e))throw Error("invalid arguments to extensionAdapter.sendMessage");chrome.runtime.sendMessage(e,t)},e.prototype.addMessageListener=function(e){if(s(chrome)||s(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!a(e))throw Error("invalid arguments to extensionAdapter.addMessageListener");chrome.runtime.onMessage.addListener((function(t,r,n){return e(t,n,r.tab,r.frameId,r.url)}))},e.prototype.addContentScriptMessageListener=function(e){this.addMessageListener(e)},e.prototype.removeMessageListener=function(e){if(s(chrome)||s(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!a(e))throw Error("extensionAdapter.removeListener needs the listener function to removed");chrome.runtime.onMessage.hasListener(e)&&chrome.runtime.onMessage.removeListener(e)},e.prototype.hidePopup=function(){window.open("","_self").close()},e.prototype.init=function(){},t.ExtensionAdapterBase=e},"./source/BfwExtensionAdapterCS.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.extensionAdapter=void 0;var n=r("./source/BfwExtensionAdapterBase.js");e=function(){return n.ExtensionAdapterBase.apply(this,arguments)||this},i.inherits(e,n.ExtensionAdapterBase),t.extensionAdapter=new e},"./source/BfwInternals.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./source/globals/BfwGlobals.js");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r("./source/utils/BfwUtils.js");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r("./source/utils/BfwBase64Util.js");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=r("./source/BfwConstants.js");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=r("./source/BfwLogger.js");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var u=r("./source/BfwClipboard.js");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=r("./source/BfwCookies.js");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var c=r("./source/BfwObfuscationKeyManager.js");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var d=r("./source/alarm/BfwAlarmHelper.js");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=r("./source/storage/BfwStorage.js");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=r("./source/storage/BfwSession.js");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var h=r("./source/BfwExtensionAdapter.js");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var _=r("./source/telemetry/BfwTelemetryConstants.js");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var E=r("./source/telemetry/BfwTelemetryWrapper.js");Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var g=r("./source/telemetry/BfwTelemetry.js");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var m=r("./source/telemetry/BfwTelemetrySettings.js");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var y=r("./source/telemetry/BfwTelemetryScd.js");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var S=r("./source/settings/BfwSettingsWrapper.js");Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))}));var T=r("./source/settings/BfwSecureSettingsWrapper.js");Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===T[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}}))}));var A=r("./source/settings/BfwSessionSettingsWrapper.js");Object.keys(A).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===A[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return A[e]}}))}));var b=r("./source/localizer/BfwLocalizer.js");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var O=r("./source/localizer/BfwLocalizerProxy.js");Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var I=r("./source/cdn/BfwCdnFileDownloader.js");Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===I[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}}))}));var v=r("./source/cdn/BfwCertificateHandler.js");Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var N=r("./source/xhr_proxy/BfwXhrProxy.js");Object.keys(N).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===N[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return N[e]}}))}));var R=r("./source/performance_reporter/BfwPerformanceReporterFactory.js");Object.keys(R).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===R[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}}))}));var C=r("./source/notification/BfwNotificationCenter.js");Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))}));var D=r("./source/notification/BfwTimedNotification.js");Object.keys(D).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===D[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return D[e]}}))}));var w=r("./source/notification/BfwQuestionNotification.js");Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var L=r("./source/notification/BfwWarningQuestionNotification.js");Object.keys(L).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===L[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}}))}));var P=r("./source/error_reporting/BfwErrorReportingServiceBG.js");Object.keys(P).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))}))},"./source/BfwLogger.js":function(e,t,r){function n(e,t,r){e:if("object"==typeof t&&t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:t+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var o=r("./source/telemetry/BfwTelemetryWrapper.js"),i=r("./source/BfwConstants.js");t.logger=new function(){var e=this;n(this,"errorReportingService",null),n(this,"init",(function(t){e.errorReportingService=void 0===t?null:t})),n(this,"captureLog",(function(t,r,n){e.errorReportingService&&e.errorReportingService.captureEvent({message:t,context:r,level:n})})),n(this,"debug",(function(e,t){t=void 0===t?{}:t})),n(this,"log",(function(e,t){})),n(this,"error",(function(t,r){r=void 0===r?{}:r,console.error(t),e.captureLog(t,r,i.constants.ERROR_REPORTING.LEVEL.ERROR),o.telemetryWrapper.send(o.telemetryWrapper.componentType.LOGGER,o.telemetryWrapper.actionType.ERROR,t)})),n(this,"warn",(function(t,r){r=void 0===r?{}:r,console.warn(t),e.captureLog(t,r,i.constants.ERROR_REPORTING.LEVEL.WARN),o.telemetryWrapper.send(o.telemetryWrapper.componentType.LOGGER,o.telemetryWrapper.actionType.WARN,t)})),n(this,"info",(function(e,t){console.info(e)}))}},"./source/BfwObfuscationKeyManager.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ObfuscationKeyManager=void 0;var n=r("./source/utils/BfwUtils.js");(e=function(){this._obfuscationKey=null,this.initialize=this.initialize.bind(this),this.getObfuscationKey=this.getObfuscationKey.bind(this),this.clearObfuscationKey=this.clearObfuscationKey.bind(this),this.generateObfuscationKey=this.generateObfuscationKey.bind(this),this.initialize()}).prototype.initialize=function(){this._obfuscationKey=n.utils.createNewGuid()},e.prototype.getObfuscationKey=function(){return this._obfuscationKey},e.prototype.clearObfuscationKey=function(){this._obfuscationKey=null},e.prototype.generateObfuscationKey=function(){this._obfuscationKey=n.utils.createNewGuid()},t.ObfuscationKeyManager=e},"./source/alarm/BfwAlarmHelper.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.alarmHelper=void 0;var n=r("./source/BfwExtensionAdapter.js"),o=r("./source/BfwLogger.js"),s=(e=r("./source/utils/BfwUtils.js").utils).isNil,a=e.isFunction,u=e.isEmptyObject;(e=function(){this._alarmListeners=[],this.handleAlarm=this.handleAlarm.bind(this)}).prototype.setAlarm=function(e,t){return i.asyncExecutePromiseGeneratorProgram((function(r){return 1==r.nextAddress?s(e)||s(t)?r.return():r.yield(n.extensionAdapter.getAlarm(e),2):r.yieldResult?(o.logger.debug("Alarm "+e+" is already created"),r.return()):(n.extensionAdapter.createAlarm(e,t),void r.jumpToEnd())}))},e.prototype.setAndRegisterAlarmListener=function(e,t,r,l){return l=void 0!==l&&l,i.asyncExecutePromiseGeneratorProgram((function(i){return 1==i.nextAddress?s(t)||s(e)||u(e)||!a(r)?i.return():(n.extensionAdapter.addAlarmListener(r),!0===l?i.jumpTo(2):i.yield(n.extensionAdapter.getAlarm(e),3)):2!=i.nextAddress&&i.yieldResult?(o.logger.debug("Alarm "+e+" is already created"),i.return()):(n.extensionAdapter.createAlarm(e,t),void i.jumpToEnd())}))},e.prototype.clearAlarm=function(e){var t;return i.asyncExecutePromiseGeneratorProgram((function(r){switch(r.nextAddress){case 1:return s(e)?r.return():r.yield(n.extensionAdapter.getAlarm(e),2);case 2:return t=r.yieldResult,s(t)?(o.logger.debug("Alarm "+e+" does not exists"),r.return()):(r.setCatchFinallyBlocks(3),r.yield(n.extensionAdapter.clearAlarm(e),5));case 5:r.leaveTryBlock(0);break;case 3:r.enterCatchBlock(),o.logger.debug("Failed to clear alarm "+e),r.jumpToEnd()}}))},e.prototype.registerAlarmListener=function(e){a(e)&&this._alarmListeners.push(e)},e.prototype.handleAlarm=function(e){e&&e.name&&this._alarmListeners.forEach((function(t){t(e)}))},t=t.alarmHelper=new e,n.extensionAdapter.addAlarmListener(t.handleAlarm)},"./source/cdn/BfwCdnFileDownloader.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.cdnFileDownloader=void 0;var n=r("./source/BfwConstants.js"),o=r("./source/utils/BfwUtils.js"),i=r("./source/cdn/BfwCertificateHandler.js"),s=n.constants.CDN_FILE_DOWNLOADER;(e=function(){}).prototype._downloadAndValidateCdnFile=function(e,t,r){return o.utils.safeFetch(e).then((function(e){if(o.utils.isSuccessCodeLocalFile(e.status))return e.json();throw s.RESPONSE_STATUS.UNSUCCESSFUL_RESPONSE+" "+e.status})).then((function(e){var a=void 0===e.payload?{}:e.payload,u=void 0===e.JWT?"":e.JWT;if(e=i.certHandler.validateCertAndGetPublicKey(void 0===e.CERT?"":e.CERT,t,r),o.utils.isNil(e))throw s.RESPONSE_STATUS.PUBLIC_KEY_NOT_VERIFIED;if(!o.utils.verifyJson(a,u,e,[n.constants.CDN_FILE_DOWNLOADER.ENCRYPTION_METHOD]))throw s.RESPONSE_STATUS.FILE_TAMPERED;return a})).catch((function(e){throw e}))},e.prototype.getPayloadFromCdnFile=function(e,t,r){return this._isValidUrl(e)&&!o.utils.isNil(t)&&this._isValidCertInfo(r)?this._downloadAndValidateCdnFile(e,t,r).then((function(e){return e})).catch((function(e){throw e})):Promise.reject(s.RESPONSE_STATUS.INVALID_PARAMETERS)},e.prototype._isValidCertInfo=function(e){if(o.utils.isEmptyObject(e))return!1;var t=e.hasOwnProperty(s.CERT_ISSUER_NAME);return e=e.hasOwnProperty(s.CERT_ISSUED),t&&e},e.prototype._isValidUrl=function(e){if(!o.utils.isString(e))return!1;var t=o.utils.urlProtocol(e);return e=o.utils.getFileNameExtension(e),s.SUPPORTED_PROTOCOL===t&&s.SUPPORTED_FILEFORMATS.includes(e)},t.cdnFileDownloader=new e},"./source/cdn/BfwCertificateHandler.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.certHandler=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),i=r("./source/BfwConstants.js");(e=function(){}).prototype.validateCertAndGetPublicKey=function(e,t,r){try{var n=o.pki.certificateFromPem(e);return!o.pki.certificateFromPem(t).verify(n)||this._isCertExpired(n.validity.notAfter)?null:this._verifyCertInfo(n,r)?o.pki.publicKeyToPem(n.publicKey):null}catch(e){return null}},e.prototype._verifyCertInfo=function(e,t){var r=e.issuer.getField(i.constants.CERT_COMMON_NAME).value===t.CERT_ISSUER_NAME;return e=e.subject.getField(i.constants.CERT_COMMON_NAME).value===t.CERT_ISSUED,r&&e},e.prototype._isCertExpired=function(e){return!((e=e.getTime())>(new Date).getTime())},t.certHandler=new e},"./source/error_reporting/BfwErrorReportingServiceBG.js":function(e,t,r){function n(e,t,r){e:if("object"==typeof t&&t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:t+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReportingService=void 0;var o=r("./node_modules/@sentry/browser/cjs/index.js"),s=r("./source/BfwLogger.js"),a=r("./source/BfwConstants.js");e=r("./source/utils/BfwUtils.js");var u=r("./source/BfwExtensionAdapter.js"),l=(r=e.utils).isNil,c=r.isntNil,d=r.isString;(r=function(e){var t=this;if(e=void 0===e?{}:e,n(this,"serviceInstance",null),n(this,"config",{}),n(this,"ERRORS",{INVALID_CONFIG:"[ErrorReportingService] configuration is missing. Please provide a valid DSN.",ALREADY_STARTED:"[ErrorReportingService] already started",FAILED_TO_CAPTURE:"[ErrorReportingService] failed to capture event",FAILED_TO_CLOSE:"[ErrorReportingService] failed to close",FAILED_TO_INIT:"[ErrorReportingService] failed to init",FAILED_TO_CHECK_READINESS:"[ErrorReportingService] failed to check readiness",FAILED_TO_INITIALISE_INDEXEDDB:"[ErrorReportingService] failed to initialise indexedDB"}),n(this,"start",(function(e){if(t.isReady())s.logger.info(t.ERRORS.ALREADY_STARTED);else{if(l(t.config)||l(t.config.dsn))throw Error(t.ERRORS.INVALID_CONFIG);var r=e||{};e=Object.assign({},r),r=void 0===r.offlineSupport||r.offlineSupport,delete e.offlineSupport;try{var n=["BrowserApiErrors","TryCatch","Breadcrumbs","GlobalHandlers"],i=(0,o.getDefaultIntegrations)({}).filter((function(e){return!n.includes(e.name)})),a=o.makeFetchTransport;if(r)try{a=(0,o.makeBrowserOfflineTransport)(a)}catch(e){s.logger.error(Error(t.ERRORS.FAILED_TO_INITIALISE_INDEXEDDB+" : "+e))}var c=new o.BrowserClient(Object.assign({},{transport:a,stackParser:o.defaultStackParser,integrations:i},t.config,{beforeSend:function(e,t){return e.message=u.extensionAdapter.normalizeExtensionURL(e.message),e}}));t.serviceInstance=new o.Scope,t.serviceInstance.setClient(c),t.serviceInstance.update(e),c.init(),u.extensionAdapter.addMessageListener(t.handleMessage)}catch(e){s.logger.error(Error(t.ERRORS.FAILED_TO_INIT+" : "+e))}}})),n(this,"stop",(function(){var e,r;return i.asyncExecutePromiseGeneratorProgram((function(n){switch(n.nextAddress){case 1:if(l(t.serviceInstance))return n.return();if(n.setCatchFinallyBlocks(2),!(e=t.serviceInstance.getClient())){n.jumpTo(4);break}return n.yield(e.close(),4);case 4:n.leaveTryBlock(3);break;case 2:r=n.enterCatchBlock(),s.logger.error(t.ERRORS.FAILED_TO_STOP,r);case 3:t.serviceInstance=null,u.extensionAdapter.removeMessageListener(t.handleMessage),n.jumpToEnd()}}))})),n(this,"handleMessage",(function(e){if(t.isReady()&&!l(e)){var r=e.payload;if(e.id===a.constants.ERROR_REPORTING.CAPTURE_EVENT&&!l(r)){e=r.level;var n=r.context;t.captureEvent({message:t.deserializeEventMessage(r.event),level:e,context:n})}}})),n(this,"captureEvent",(function(e){var r=e||{};e=r.message;var n=r.level;if(r=void 0===r.context?{}:r.context,t.isReady()&&!l(e))try{e instanceof Error?t.serviceInstance.captureException(e,{captureContext:Object.assign({},{level:n},r)}):d(e)?n===a.constants.ERROR_REPORTING.LEVEL.WARN||n===a.constants.ERROR_REPORTING.LEVEL.ERROR?t.serviceInstance.captureMessage(e,n,r):t.serviceInstance.addBreadcrumb(Object.assign({},r,{message:e})):t.serviceInstance.captureMessage(a.constants.ERROR_REPORTING.INVALID_MESSAGE_TYPE_ERROR,n,r)}catch(e){}})),l(e)||l(e.dsn))throw Error(this.ERRORS.INVALID_CONFIG);this.serviceInstance=null,this.config=e}).prototype.isReady=function(){try{return!!(this.serviceInstance&&this.serviceInstance.getClient()&&this.serviceInstance.getClient().getOptions().dsn)}catch(e){return!1}},r.prototype.deserializeEventMessage=function(e){if(l(e))return null;var t=e.error;return e=e.message,c(t)?((e=Error(t.message)).name=t.name,e.stack=t.stack,e):e},t.ErrorReportingService=r},"./source/globals/BfwGlobals.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.globals=void 0,t.globals=new function(){this.BROWSER="Firefox",this.PRODUCT_GUID="DC6B1B05-C7B2-43EB-81E3-CBD3896553C2"}},"./source/localizer/BfwLocalizer.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.localizer=void 0;var n=r("./source/utils/BfwUtils.js");e=r("./source/BfwConstants.js");var o=r("./source/BfwExtensionAdapter.js");r("./source/globals/BfwGlobals.js");var s=(r=n.utils).isNil,a=r.isntNil,u=r.isString,l=r.isBoolean,c=r.isArray,d=r.isFunction,f=e.constants.localizer,p="ar he arc bcc bqi ckb dv fa glk lrc mzn pnb ps sd ug ur yi".split(" ");(r=function(){this.stringsMap={},this.initialized=!1}).prototype.setNavigatorLanguageAndLocale=function(){if(s(this.supportedLocales))throw Error("Supported locales was never set");var e=navigator.language,t=e.split("-"),r=t[0];t=t[1];var n=r.toLowerCase();a(t)&&(n=n+"_"+(t=t.toLowerCase()));var o=this.supportedLocales[n];l(o)&&o||(o=this.supportedLocales[r],l(o)&&o?n=r:(o=this.supportedLocales[t],l(o)&&o?n=t:(n="en",e="en-US"))),this.locale=n,this.navigatorLanguage=e},r.prototype.getNavigatorLanguage=function(){return a(this.navigatorLanguage)||this.setNavigatorLanguageAndLocale(),this.navigatorLanguage},r.prototype.getLocale=function(){return a(this.locale)||this.setNavigatorLanguageAndLocale(),this.locale},r.prototype.getCurrentLanguageDirection=function(){var e=this.getLocale(),t="ltr";return-1<p.indexOf(e)&&(t="rtl"),t},r.prototype.loadDefaultDictionary=function(e){this.loadDictionary(f.DEFAULT_MESSAGES_DICTIONARY,e)},r.prototype.loadDictionary=function(e,t){var r,o,l,c,f,p,h=this;return i.asyncExecutePromiseGeneratorProgram((function(i){switch(i.nextAddress){case 1:if(!1===u(e))throw Error("Dictionary name cannot be null");if(!1===d(t))throw Error("Callback cannot be null");if(s(h.path))throw Error("Path to localized folder is not set. Need to call initialize before using this API");return r=h.stringsMap[e],a(r)?(setTimeout((function(){t(!0,null)}),1),i.return()):(o=h.getLocale(),l=h.path+"/"+o+"/"+e+".json",i.setCatchFinallyBlocks(2),i.yield(n.utils.safeFetch(l),4));case 4:return(c=i.yieldResult).ok?i.yield(c.json(),5):(t(!1,Error("File at path:"+l+" does not exist. Status Code:"+c.status)),i.return());case 5:if(f=i.yieldResult,s(f))return t(!1,Error("Null response fetching file at path:"+l)),i.return();h.stringsMap[e]=f,t(!0,null),h.initialized=!0,i.leaveTryBlock(0);break;case 2:p=i.enterCatchBlock(),t(!1,Error("Error while fetching file at path:"+l+" due to "+p)),i.jumpToEnd()}}))},r.prototype.getLocalizedString=function(e){return this.getLocalizedStringFromDictionary(e,f.DEFAULT_MESSAGES_DICTIONARY)},r.prototype.getLocalizedStrings=function(e){return this.getLocalizedStringsFromDictionary(e,f.DEFAULT_MESSAGES_DICTIONARY)},r.prototype.getAllLocalizedStrings=function(){return this.getAllLocalizedStringsFromDictionary(f.DEFAULT_MESSAGES_DICTIONARY)},r.prototype.getLocalizedStringFromDictionary=function(e,t){if(!1===u(e))throw Error("Unlocalized String cannot be null or is not a string");return this.getLocalizedStringsFromDictionary([e],t)[e]},r.prototype.getLocalizedStringsFromDictionary=function(e,t){if(!1===c(e))throw Error("Array of strings cannot be null.");if(0===e.length)throw Error("Array of strings cannot be empty.");if(!1===u(t))throw Error("Dictionary name cannot be null");var r=this.stringsMap[t];if(s(r))throw Error("Dictionary "+t+" is being used without being loaded");for(var n in t={},e){var o=e[n],i=r[o];s(i)?t[o]=o:(i=i.message,s(i)?t[o]=o:t[o]=i)}return t},r.prototype.getAllLocalizedStringsFromDictionary=function(e){if(!1===u(e))throw Error("Dictionary name cannot be null");var t=this.stringsMap[e];if(s(t))throw Error("Dictionary "+e+" is being used without being loaded");for(var r in e={},t)e[r]=t[r].message;return e},r.prototype.getLocalizedStringsWithFormat=function(e){var t,r={};for(t in e){for(var n=[],o=i.makeIterator(e[t]),a=o.next();!a.done;a=o.next())a=a.value,s(a)?n.push(null):n.push(this.getLocalizedString(a));n=this.getLocalizedStringWithFormat(t,n),r[t]=n}return r},r.prototype.getLocalizedStringWithFormat=function(e,t){return this.getLocalizedStringWithFormatFromDictionary(e,t,f.DEFAULT_MESSAGES_DICTIONARY)},r.prototype.getLocalizedStringWithFormatFromDictionary=function(e,t,r){if(s(t))throw Error("Format parameters cannot be null");for(var n in e=this.getLocalizedStringFromDictionary(e,r),t)r=t[n],s(r)||(e=e.replace("{"+n+"}",r));return e},r.prototype.getLocalizedStringFromNativeLocalizer=function(e,t){return o.extensionAdapter.i18nGetMessage(e,t)},r.prototype.initialize=function(e,t,r){if(s(e))throw Error("Supported locales cannot be null");s(r)&&(r=o.extensionAdapter.getExtensionURL("content/i18n")),this.path=r,this.supportedLocales=e,o.extensionAdapter.addMessageListener(this.handleMessage),this.loadDefaultDictionary(t)},r.prototype.handleMessage=function(e,t,r){if(!s(e)){r=e.id;var n=e.payload;if(!s(r)&&!s(n)){var o=null,i=!0;switch(r){case f.GET_LOCALIZED_STRING:o=this.getLocalizedString(n);break;case f.GET_LOCALIZED_STRINGS:o=this.getLocalizedStrings(n);break;case f.GET_ALL_LOCALIZED_STRINGS:o=this.getAllLocalizedStrings(n);break;case f.GET_LOCALIZED_STRING_FROM_DICTIONARY:o=this.getLocalizedStringFromDictionary(n.string,n.name);break;case f.GET_LOCALIZED_STRINGS_FROM_DICTIONARY:o=this.getLocalizedStringsFromDictionary(n.array,n.name);break;case f.GET_LOCALIZED_STRING_WITH_FORMAT:o=this.getLocalizedStringWithFormat(n.string,n.params);break;case f.GET_LOCALIZED_STRING_WITH_FORMAT_FROM_DICTIONARY:o=this.getLocalizedStringWithFormatFromDictionary(n.string,n.params,n.name);break;case f.GET_CURRENT_LANGUAGE_DIRECTION:o=this.getCurrentLanguageDirection();break;case f.GET_LOCALIZED_STRINGS_WITH_FORMAT:o=this.getLocalizedStringsWithFormat(n.formatStringDict);break;default:i=!1}i&&t({id:e.id,payload:o})}}},t.localizer=new r},"./source/localizer/BfwLocalizerProxy.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.localizerProxy=void 0;var n=r("./source/utils/BfwUtils.js");e=r("./source/BfwConstants.js");var o=r("./source/BfwExtensionAdapterCS.js"),i=(r=n.utils).isNil,s=r.isFunction,a=e.constants.localizer;(r=function(){}).prototype.getLocalizedString=function(e,t){this.sendMessage(a.GET_LOCALIZED_STRING,e,t)},r.prototype.getLocalizedStrings=function(e,t){this.sendMessage(a.GET_LOCALIZED_STRINGS,e,t)},r.prototype.getAllLocalizedStrings=function(e){this.sendMessage(a.GET_ALL_LOCALIZED_STRINGS,{},e)},r.prototype.getLocalizedStringFromDictionary=function(e,t,r){this.sendMessage(a.GET_LOCALIZED_STRING_FROM_DICTIONARY,{string:e,name:t},r)},r.prototype.getLocalizedStringsFromDictionary=function(e,t,r){this.sendMessage(a.GET_LOCALIZED_STRINGS_FROM_DICTIONARY,{array:e,name:t},r)},r.prototype.getLocalizedStringsWithFormat=function(e,t){this.sendMessage(a.GET_LOCALIZED_STRINGS_WITH_FORMAT,{formatStringDict:e},t)},r.prototype.getLocalizedStringWithFormat=function(e,t,r){this.sendMessage(a.GET_LOCALIZED_STRING_WITH_FORMAT,{string:e,params:t},r)},r.prototype.getLocalizedStringWithFormatFromDictionary=function(e,t,r,n){this.sendMessage(a.GET_LOCALIZED_STRING_WITH_FORMAT_FROM_DICTIONARY,{string:e,params:t,name:r},n)},r.prototype.getCurrentLanguageDirection=function(e){this.sendMessage(a.GET_CURRENT_LANGUAGE_DIRECTION,{},e)},r.prototype.sendMessage=function(e,t,r){if(i(e))throw Error("Message ID cannot be null");if(i(t))throw Error("Payload cannot be null");if(!1===s(r))throw Error("Callback cannot be null");o.extensionAdapter.sendMessage({id:e,payload:t},(function(e){switch(e.id){case a.GET_LOCALIZED_STRING:case a.GET_LOCALIZED_STRINGS:case a.GET_ALL_LOCALIZED_STRINGS:case a.GET_LOCALIZED_STRING_FROM_DICTIONARY:case a.GET_LOCALIZED_STRINGS_FROM_DICTIONARY:case a.GET_LOCALIZED_STRING_WITH_FORMAT:case a.GET_LOCALIZED_STRING_WITH_FORMAT_FROM_DICTIONARY:case a.GET_CURRENT_LANGUAGE_DIRECTION:case a.GET_LOCALIZED_STRINGS_WITH_FORMAT:r(e.payload)}}))},t.localizerProxy=new r},"./source/notification/BfwNotification.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Notification=void 0;var n=r("./source/BfwExtensionAdapter.js"),o=r("./source/utils/BfwUtils.js");e=r("./source/BfwConstants.js");var i=(r=o.utils).isArray,s=r.isNil,a=r.isntNil,u=e.constants.uiConstants.NOTIFICATION;(e=function(e,t,r,n,l,c,d){if(l=void 0===l?[]:l,c=void 0===c?[]:c,d=void 0===d?{}:d,s(e))throw Error("A description must be provided.");if(s(t))throw Error("A type must be provided.");if(s(r))throw Error("imageUrl must be provided");if(i(l)&&0<l.length&&i(c)&&0<c.length)throw Error("Cannot set both blockListedUrls and allowListedUrls.");switch(a(n)?this.title=n:this.title="",t){case u.TYPE.QUESTION:case u.TYPE.TIMED:case u.TYPE.WARNING_QUESTION:break;default:throw Error("The notification type passed was not recognized.")}this.description=e,this.type=t,this.guid=o.utils.createNewGuid(),this.imageUrl=r,this.blockListedUrls=l,this.allowListedUrls=c,this.options=d}).prototype.getDescription=function(){return this.description},e.prototype.setID=function(e){this.guid=e},e.prototype.getID=function(){return this.guid},e.prototype.getType=function(){return this.type},e.prototype.getTitle=function(){return this.title},e.prototype.getImage=function(){return n.extensionAdapter.getExtensionURL(this.imageUrl)},e.prototype.getRelativeImageURL=function(){return this.imageUrl},e.prototype.getBlockListedUrls=function(){return this.blockListedUrls},e.prototype.getAllowListedUrls=function(){return this.allowListedUrls},e.prototype.handleEvent=function(e){},e.prototype.getExpandableLinkAction=function(){},e.prototype.getData=function(){},e.prototype.serialize=function(){var e={description:this.description,type:this.type,notificationID:this.guid,imageUrl:this.getRelativeImageURL(),title:this.title,blockListedUrls:this.blockListedUrls,allowListedUrls:this.allowListedUrls,options:this.options};return n.extensionAdapter.isManifestV3Extension()&&(e=Object.assign({},e,{handleEvent:this.handleEvent,getExpandableLinkAction:this.getExpandableLinkAction,getData:this.getData})),e},e.prototype.onDisplayed=function(){},t.Notification=e},"./source/notification/BfwNotificationCenter.js":function(e,t,r){function n(e,t,r){e:if("object"==typeof t&&t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:t+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.notificationCenter=void 0;var o=r("./source/BfwExtensionAdapter.js"),s=r("./source/utils/BfwUtils.js"),a=r("./source/notification/BfwNotificationSettings.js"),u=r("./source/BfwConstants.js"),l=r("./source/BfwLogger.js"),c=r("./source/notification/BfwNotification.js"),d=(e=s.utils).isNil,f=e.isntNil,p=u.constants.uiConstants.NOTIFICATION;(e=function(){var e=this;n(this,"_addOnClickedListener",(function(t){try{if(!1!==e._idToNotificationMap.hasOwnProperty(t)){var r=e._idToNotificationMap[t].getOnClickedListener();!1!==s.utils.isFunction(r)&&(delete e._idToNotificationMap[t],setTimeout((function(){r()}),1))}}finally{e._clearNotificationWithId(t)}})),n(this,"_addOnClosedListener",(function(t){if(!1!==e._idToNotificationMap.hasOwnProperty(t)){var r=e._idToNotificationMap[t].getOnClosedListener();delete e._idToNotificationMap[t],!1!==s.utils.isFunction(r)&&setTimeout((function(){r()}),1)}})),this.queue=[],this._idToNotificationMap={},this._isListenersInited=!1,this.init()}).prototype.init=function(){var e=this,t=function(){e.handleActivate()};o.extensionAdapter.addWindowFocusedEventListener(t),o.extensionAdapter.addTabActivatedEventListener(t),o.extensionAdapter.addMessageListener((function(t,r,n){if(!d(t)&&!d(t.id))switch(t.id){case p.MESSAGES.UI_INIT:return t.id=p.MESSAGES.UI_INIT_PROXY,o.extensionAdapter.sendMessageToTab(n,t,(function(e){r(e)})),!0;case p.MESSAGES.DEFAULT_MESSAGE:return e.handleMessage(t.payload,n)}}))},e.prototype.isNotification=function(e){return!!(f(e)&&e instanceof c.Notification)},e.prototype.addNotification=function(e){var t=this;if(d(e))throw Error("Notification cannot be null");var r=e.getType();switch(r){case p.TYPE.TIMED:this._addListeners(),chrome.notifications.create({type:"basic",iconUrl:e.getImage(),title:e.getTitle(),contextMessage:e.options.header,message:e.getDescription()},(function(r){e.setID(r),e.onDisplayed();var n=e.getOnClickedListener();s.utils.isFunction(n)&&(t._idToNotificationMap[r]=e)}));break;case p.TYPE.QUESTION:case p.TYPE.WARNING_QUESTION:o.extensionAdapter.isManifestV3Extension()?a.notificationSettings.setNotification(e.serialize()):this.queue.push(e),this.refreshQueue();break;default:throw Error("Unsupported notification type: "+r)}},e.prototype.removeNotification=function(e){if(d(e))throw Error("NotificationID cannot be null");if(o.extensionAdapter.isManifestV3Extension())this.removeNotificationManifestV3(e);else{for(var t in this.queue)if(this.queue[t].getID()===e){this.queue.splice(t,1);break}!0===f(this._idToNotificationMap[e])&&delete this._idToNotificationMap[e];try{chrome.notifications.clear(e)}catch(e){l.logger.info(e)}finally{this.refreshQueue()}}},e.prototype.removeNotificationManifestV3=function(e){var t,r=this;return i.asyncExecutePromiseGeneratorProgram((function(n){if(1==n.nextAddress){if(d(e))throw Error("NotificationID cannot be null");return n.yield(a.notificationSettings.intializeNotificationSettings(),2)}if(t=a.notificationSettings.getNotification(),d(t))return n.return();t=t.filter((function(t){return t.notificationID!==e})),a.notificationSettings.replaceNotification(t),r.refreshQueue(),n.jumpToEnd()}))},e.prototype.clearNotification=function(){var e,t=this;return i.asyncExecutePromiseGeneratorProgram((function(r){if(1==r.nextAddress)return o.extensionAdapter.isManifestV3Extension()?r.yield(a.notificationSettings.intializeNotificationSettings(),3):(t.queue=[],r.jumpTo(2));if(2!=r.nextAddress){if(e=a.notificationSettings.getNotification(),d(e))return r.return();a.notificationSettings.replaceNotification([])}t.refreshQueue(),r.jumpToEnd()}))},e.prototype.getNotification=function(e){if(d(e))throw Error("NotificationID cannot be null");var t=this.queue;for(var r in o.extensionAdapter.isManifestV3Extension()&&(t=a.notificationSettings.getNotification()),t)if((t[r].notificationID||t[r].guid)===e)return t[r]},e.prototype.refreshQueue=function(){var e=this;o.extensionAdapter.getActiveTab((function(t){if(!d(t)){var r=[],n=e.queue;for(var i in o.extensionAdapter.isManifestV3Extension()&&(n=a.notificationSettings.getNotification()),n){var s=n[i];s=e.isNotification(s)?s.serialize():s,r.push(s)}o.extensionAdapter.sendMessageToTab(t,{id:p.MESSAGES.DEFAULT_MESSAGE,payload:{eventID:p.MESSAGES.NOTIFICATION_QUEUE_MESSAGE,notificationArray:r}},null,{frameId:0})}}))},e.prototype.handleActivate=function(){var e=this;o.extensionAdapter.getAllTabs((function(t){t.forEach((function(e){o.extensionAdapter.sendMessageToTab(e,{id:p.MESSAGES.DEFAULT_MESSAGE,payload:{eventID:p.MESSAGES.HIDE_NOTIFICATIONS}})})),e.refreshQueue()}))},e.prototype.handleMessage=function(e,t){if(!d(e)){var r=e.eventID;if(!d(r)){var n=e.notificationID;switch(r){case p.MESSAGES.DEFAULT_BUTTON_PRESSED:case p.MESSAGES.SECONDARY_LINK_PRESSED:case p.MESSAGES.THIRD_BUTTON_PRESSED:case p.MESSAGES.NOTIFICATION_CLOSED:if(d(n)){l.logger.warn("Notification ID cannot be null when eventID is "+p.MESSAGES.DEFAULT_BUTTON_PRESSED);break}if(o.extensionAdapter.isManifestV3Extension()){s.utils.createCustomHTMLEvent(u.constants.uiConstants.NOTIFICATION.NOTIFICATION_EVENT,{eventID:r,notificationID:n}),this.removeNotificationManifestV3(n);break}var i=this.getNotification(n);if(d(i))break;i.handleEvent(r),this.removeNotification(n);break;case p.MESSAGES.NOTIFICATION_QUEUE_MESSAGE:this.refreshQueue();break;case p.MESSAGES.NOTIFICATIONS_SHOWN:for(var a in e=e.notificationArray)if(n=e[a],i=this.getNotification(n),!d(i)){if(o.extensionAdapter.isManifestV3Extension()&&((n=i.type)===p.TYPE.QUESTION||n===p.TYPE.WARNING_QUESTION))continue;i.onDisplayed()}break;case p.MESSAGES.HIDE_NOTIFICATIONS:o.extensionAdapter.sendMessageToTab(t,{id:p.MESSAGES.DEFAULT_MESSAGE,payload:{eventID:p.MESSAGES.HIDE_NOTIFICATIONS}});break;case p.MESSAGES.RESIZE_IFRAME_HEIGHT:if(d(n)){l.logger.error("Notification ID cannot be null when eventID is "+p.MESSAGES.RESIZE_IFRAME_HEIGHT);break}if(i=this.getNotification(n),d(i))break;i.handleEvent(r),o.extensionAdapter.sendMessageToTab(t,{id:p.MESSAGES.DEFAULT_MESSAGE,payload:e});break;case p.MESSAGES.FIXED_IFRAME_HEIGHT:o.extensionAdapter.sendMessageToTab(t,{id:p.MESSAGES.DEFAULT_MESSAGE,payload:e})}}}},e.prototype.getSerializedNotifications=function(){var e,t=[];for(e in this.queue)t.push(this.queue[e]);return t},e.prototype._addListeners=function(){!0!==this._isListenersInited&&(chrome.notifications.onClicked.addListener(this._addOnClickedListener),chrome.notifications.onClosed.addListener(this._addOnClosedListener),this._isListenersInited=!0)},e.prototype._clearNotificationWithId=function(e){try{chrome.notifications.clear(e)}catch(e){l.logger.info(e)}},t.notificationCenter=new e},"./source/notification/BfwNotificationSettings.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.notificationSettings=void 0;var n=r("./source/BfwInternals.js"),o=r("./source/BfwLogger.js"),i=(e=r("./source/utils/BfwUtils.js").utils).isArray,s=e.isFunction,a=e.isNil;(e=function(){}).prototype.intializeNotificationSettings=function(){var e=this;return new Promise((function(t,r){try{e.init((function(e){!0===e?t("notification settings initialized"):r("Failed to initialize notification settings")}))}catch(e){r("Failed to initialize notification settings. "+e)}}))},e.prototype.init=function(e){var t=this;if(!s(e))throw Error("callback must be a function");n.sessionSettings.loadSettingsContainer(n.constants.uiConstants.NOTIFICATION.BFW_NOTIFICATION_SETTINGS_CONTAINER,!0,(function(r,n,i){!1===r||a(n)?(o.logger.error("failed to load BFW_NOTIFICATION_SETTINGS_CONTAINER"),e(!1)):(t.settingsContainer=n,e(!0))}))},e.prototype.setNotification=function(e){if(a(this.settingsContainer))o.logger.log("Settings not initialized");else{var t=this.settingsContainer.getObject(n.constants.uiConstants.NOTIFICATION.NOTIFICATION_QUEUE);a(t)&&(t=[]),t.push(e),this.settingsContainer.setObject(n.constants.uiConstants.NOTIFICATION.NOTIFICATION_QUEUE,t)}},e.prototype.replaceNotification=function(e){a(this.settingsContainer)?o.logger.log("Settings not initialized"):i(e)?this.settingsContainer.setObject(n.constants.uiConstants.NOTIFICATION.NOTIFICATION_QUEUE,e):o.logger.log("Parameter must be of type array")},e.prototype.getNotification=function(){if(!a(this.settingsContainer))return this.settingsContainer.getObject(n.constants.uiConstants.NOTIFICATION.NOTIFICATION_QUEUE);o.logger.log("Settings not initialized")},(t.notificationSettings=new e).intializeNotificationSettings()},"./source/notification/BfwQuestionNotification.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionNotification=void 0;var n=r("./source/utils/BfwUtils.js");e=r("./source/BfwConstants.js");var o=r("./source/BfwLogger.js"),s=r("./source/notification/BfwNotification.js"),a=(r=n.utils).isNil,u=r.isntNil,l=r.isFunction,c=e.constants.uiConstants.NOTIFICATION;r=function(e,t,r,n,o,i,u,d,f,p,h){if(u=void 0===u?[]:u,d=void 0===d?c.TYPE.QUESTION:d,f=void 0===f?{}:f,p=void 0===p?[]:p,h=void 0===h?{}:h,e=s.Notification.call(this,e,d,o,i,u,p,h)||this,a(d))throw Error("Notification Type cannot be null");if(0>Object.values(c.TYPE).indexOf(d))throw Error("Notification Type not supported");if(a(t))throw Error("Data cannot be null");if(a(r))throw Error("Default button text cannot be null.");if(!1===l(n))throw Error("Default button action cannot be null.");return e.data=t,e.defaultButtonText=r,e.defaultButtonAction=n,e.extraMessages=f,e},i.inherits(r,s.Notification),r.prototype.addSecondaryLink=function(e,t){if(a(e))throw Error("Secondary link text cannot be null.");if(!1===l(t))throw Error("Secondary link action cannot be null.");this.secondaryLinkText=e,this.secondaryLinkAction=t},r.prototype.addThirdButton=function(e,t){if(a(e))throw Error("Third button text cannot be null");if(!1===l(t))throw Error("Third button action cannot be null.");this._thirdButtonText=e,this._thirdButtonAction=t},r.prototype.addCloseButtonAction=function(e){if(!1===l(e))throw Error("Close button action cannot be null.");this._closeButtonAction=e},r.prototype.getDefaultButtonAction=function(){return this.defaultButtonAction},r.prototype.getSecondaryLinkAction=function(){return this.secondaryLinkAction},r.prototype.getThirdButtonAction=function(){return this._thirdButtonAction},r.prototype.getCloseButtonAction=function(){return this._closeButtonAction},r.prototype.serialize=function(){var e=s.Notification.prototype.serialize.call(this);return e.defaultButton=this.defaultButtonText,e.secondaryLink=this.secondaryLinkText,e.thirdButton=this._thirdButtonText,e.line1=this.extraMessages.line1,e.line2=this.extraMessages.line2,e},r.prototype.getData=function(){return this.data},r.prototype.handleEvent=function(e){switch(e){case c.MESSAGES.DEFAULT_BUTTON_PRESSED:e=this.getDefaultButtonAction();break;case c.MESSAGES.SECONDARY_LINK_PRESSED:e=this.getSecondaryLinkAction();break;case c.MESSAGES.THIRD_BUTTON_PRESSED:e=this.getThirdButtonAction();break;case c.MESSAGES.NOTIFICATION_CLOSED:e=a(this.getCloseButtonAction())?null:this.getCloseButtonAction();break;default:return}var t=this.getData();if(u(e))try{e(t)}catch(e){o.logger.error(e)}},t.QuestionNotification=r},"./source/notification/BfwTimedNotification.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.TimedNotification=void 0,e=r("./source/BfwConstants.js");var n=r("./source/notification/BfwNotification.js"),o=r("./source/notification/BfwNotificationCenter.js"),s=e.constants.uiConstants.NOTIFICATION;r=function(e,t,r,o){return n.Notification.call(this,e,s.TYPE.TIMED,t,r,void 0,void 0,{header:void 0===o?"":o})||this},i.inherits(r,n.Notification),r.prototype.onDisplayed=function(){var e=this.getID();setTimeout((function(){o.notificationCenter.removeNotification(e)}),this._timeout||s.DEFAULT_TIMEOUT)},r.prototype.setOnClickedListener=function(e){this._onClickedListener=e},r.prototype.setOnClosedListener=function(e){this._onClosedListener=e},r.prototype.setTimeout=function(e){this._timeout=e},r.prototype.getOnClickedListener=function(){return this._onClickedListener},r.prototype.getOnClosedListener=function(){return this._onClosedListener},r.prototype.getTimeout=function(){return this._timeout},t.TimedNotification=r},"./source/notification/BfwWarningQuestionNotification.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.WarningQuestionNotification=void 0;var n=r("./source/utils/BfwUtils.js");e=r("./source/BfwConstants.js");var o=r("./source/notification/BfwQuestionNotification.js"),s=r("./source/BfwExtensionAdapter.js"),a=(r=n.utils).isString,u=r.isFunction,l=e.constants.uiConstants.NOTIFICATION;r=function(e,t,r,n,i,s,a){return a=void 0===a?[]:a,o.QuestionNotification.call(this,e,t,r,n,i,s,a,l.TYPE.WARNING_QUESTION)||this},i.inherits(r,o.QuestionNotification),r.prototype.addPrimaryHeaderTitle=function(e){if(!a(e))throw Error("Primary Header Title cannot be null.");this.primaryHeaderTitle=e},r.prototype.addSecondaryHeaderTitle=function(e){if(!a(e))throw Error("Secondary Header Title cannot be null.");this.secondaryHeaderTitle=e},r.prototype.addFocusedTitle=function(e){if(!a(e))throw Error("Focused Title cannot be null.");this.focusedTitle=e},r.prototype.getExpandableLinkAction=function(){return this.expandableLinkAction},r.prototype.getData=function(){return this.data},r.prototype.addExpandableLinkText=function(e,t,r){if(!a(e))throw Error("beforeExpand Text Should not be null");if(!a(t))throw Error("afterExpand Text Should not be null");if(!u(r))throw Error("expandableLinkAction button action cannot be null");this.expandableLinkTextBeforeExpand=e,this.expandableLinkTextAfterExpand=t,this.expandableLinkAction=r},r.prototype.addLearnMoreDescriptionFirstParagraph=function(e){if(!a(e))throw Error("learnMoreDescriptionFirstParagraph cannot be null.");this.learnMoreDescriptionFirstParagraph=e},r.prototype.addLearnMoreDescriptionSecondParagraph=function(e){if(!a(e))throw Error("LearnMoreDescriptionSecondParagraph cannot be null.");this.learnMoreDescriptionSecondParagraph=e},r.prototype.serialize=function(){var e=o.QuestionNotification.prototype.serialize.call(this);return e.focusedTitle=this.focusedTitle,e.learnMoreDescriptionFirstParagraph=this.learnMoreDescriptionFirstParagraph,e.learnMoreDescriptionSecondParagraph=this.learnMoreDescriptionSecondParagraph,e.expandableLinkTextBeforeExpand=this.expandableLinkTextBeforeExpand,e.expandableLinkTextAfterExpand=this.expandableLinkTextAfterExpand,e.primaryHeaderTitle=this.primaryHeaderTitle,e.secondaryHeaderTitle=this.secondaryHeaderTitle,s.extensionAdapter.isManifestV3Extension()&&(e.data=this.data,e.expandableLinkAction=this.expandableLinkAction),e},r.prototype.handleEvent=function(e){if(a)switch(e){case l.MESSAGES.RESIZE_IFRAME_HEIGHT:(e=this.getExpandableLinkAction())(this.getData());break;case l.MESSAGES.DEFAULT_BUTTON_PRESSED:case l.MESSAGES.NOTIFICATION_CLOSED:o.QuestionNotification.prototype.handleEvent.call(this,e)}},t.WarningQuestionNotification=r},"./source/performance_reporter/BfwPerformanceReporter.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceReporter=void 0;var n=(e=r("./source/utils/BfwUtils.js").utils).isNil,o=e.isntNil;(e=function(e){if(n(e))throw Error("component cannot be null");this.component=e,this.start=Date.now(),this.subComponents={},this.tldReports={}}).prototype._reportStart=function(e){if(o(this.subComponents[e]))throw Error("type already exists");this.subComponents[e]={},this.subComponents[e].start=Date.now()},e.prototype._reportEnd=function(e){if(n(this.subComponents[e]))throw Error("type does NOT exists");if(o(this.subComponents[e].stop))console.warn("already reported this type");else{var t=Date.now(),r=this.subComponents[e].start;this.subComponents[e].stop=t,this.subComponents[e].timeTaken=t-r}},e.prototype._reportStartFromProxy=function(e,t,r,i){if(n(e))throw Error("type cannot be null");if(n(t))throw Error("domain cannot be null");if(n(r))throw Error("frameURL cannot be null");if(n(i))throw Error("frameGUID cannot be null");if(t=this.tldReports[t][i].subComponents,o(t[e]))throw Error("Sub-component Type already started");t[e]={},t[e].start=Date.now()},e.prototype._reportEndFromProxy=function(e,t,r,i){if(n(e))throw Error("type cannot be null");if(n(t))throw Error("domain cannot be null");if(n(r))throw Error("frameURL cannot be null");if(n(i))throw Error("frameGUID cannot be null");if(n(this.tldReports[t]))throw Error("Component for TLD not properly initialized");if(n(this.tldReports[t][i]))throw Error("Component for TLD - frameGUID, not properly initialized");if(t=this.tldReports[t][i].subComponents,n(t[e].start))throw Error("type did not start");o(t[e].stop)?console.warn("Sub-component Type already ended"):(t[e].stop=Date.now(),t[e].timeTaken=t[e].stop-t[e].start)},e.prototype._createOrGetTLDDict=function(e,t,r){if(n(e))throw Error("domain cannot be NULL");if(n(t))throw Error("frameURL cannot be NULL");if(n(r))throw Error("frameGUID cannot be NULL");n(this.tldReports[e])&&(this.tldReports[e]={}),n(this.tldReports[e][r])&&(this.tldReports[e][r]={},this.tldReports[e][r].start=Date.now(),this.tldReports[e][r].frameURL=t,this.tldReports[e][r].subComponents={})},e.prototype.serialize=function(){var e={};for(var t in e[this.component]={},e[this.component].start=this.start,e[this.component].stop=Date.now(),e[this.component].timeTaken=e[this.component].stop-this.start,e[this.component].subComponents=this.subComponents,this.tldReports)e[this.component][t]=this.tldReports[t];return e},t.PerformanceReporter=e},"./source/performance_reporter/BfwPerformanceReporterFactory.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.performanceReporterFactory=void 0;var n=r("./source/performance_reporter/BfwPerformanceReporter.js"),o=r("./source/BfwConstants.js");e=r("./source/BfwExtensionAdapter.js");var i=(r=r("./source/utils/BfwUtils.js").utils).isNil,s=r.isntNil,a=o.constants.performanceReporter.MESSAGES;(r=function(){var e=this;!function(e,t,r){e:if("object"==typeof t&&t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}(t="symbol"==typeof t?t:t+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"handleMessage",(function(t,r,n){if(!1!==e.AUTOMATION_MODE&&!i(t))switch(r=t.payload,t.id){case a.REPORT_START:var o=r.component;t=r.guid;var s=r.frameURL;o=e._getPerformanceReporterFromProxy(o,t,n.url,s),r=r.type,o._reportStartFromProxy(r,n.url,s,t);break;case a.REPORT_END:o=r.component,t=r.guid,s=r.frameURL,o=e._getPerformanceReporter(o),r=r.type,o._reportEndFromProxy(r,n.url,s,t)}})),this._reporters={},this.AUTOMATION_MODE=!1}).prototype.serialize=function(){var e,t=[];for(e in this._reporters){var r=this._reporters[e].serialize();t.push(r)}return t},r.prototype._getPerformanceReporter=function(e){var t=this._reporters[e];return s(t)?t:(t=new n.PerformanceReporter(e),this._reporters[e]=t)},r.prototype.reportStartForComponent=function(e,t){if(!1!==this.AUTOMATION_MODE){if(i(e))throw Error("component cannot be NULL");if(i(t))throw Error("type cannot be NULL");this._getPerformanceReporter(e)._reportStart(t)}},r.prototype.reportStopForComponent=function(e,t){if(!1!==this.AUTOMATION_MODE){if(i(e))throw Error("component cannot be NULL");if(i(t))throw Error("type cannot be NULL");this._getPerformanceReporter(e)._reportEnd(t)}},r.prototype._getPerformanceReporterFromProxy=function(e,t,r,n){if(i(r))throw Error("domain cannot be null");if(i(n))throw Error("frameURL cannot be null");if(i(t))throw Error("frameGUID cannot be null");return(e=this._getPerformanceReporter(e))._createOrGetTLDDict(r,n,t),e},t=t.performanceReporterFactory=new r,e.extensionAdapter.addMessageListener(t.handleMessage),t.PerformanceReporter=n.PerformanceReporter},"./source/settings/BfwSecureSettings.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SecureSettings=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),s=r("./source/settings/BfwSettingsWrapper.js");e=r("./source/utils/BfwUtils.js");var a=r("./source/BfwLogger.js"),u=r("./source/settings/BfwSecureSettingsWrapper.js"),l=(r=e.utils).isntNil,c=r.isNil,d=r.isString,f=function(e){var t=o.md.sha256.create();return t.update(e),t.digest().toHex()},p=function(e,t){var r=o.hmac.create();return r.start("sha256",t),r.update(e),r.digest().toHex()},h=function(e,t,r,n,i){return t=o.util.createBuffer(t),(e=e?o.cipher.createCipher(i,r):o.cipher.createDecipher(i,r)).start({iv:n}),e.update(t),e.finish(),e.output.getBytes()};(r=function(e,t){this.initialized=!1}).prototype.initialize=function(e,t,r){var n=this;s.settings.loadSettingsContainer(e,!0,(function(i,u,d){if(!1===i)r(!1,null,d);else{d=u.getObject("iv");var f=u.getObject("salt");if(i=null,c(d)||c(f))i=new Promise((function(t,r){s.settings.resetSettingsCollection(e,(function(e,i){if(!e)return r(Error("Failed to reset OCL container"));n.iv=o.random.getBytesSync(128),n.salt=o.random.getBytesSync(128),u.setObject("iv",JSON.stringify(n.iv)),u.setObject("salt",JSON.stringify(n.salt)),t()}))}));else try{n.iv=JSON.parse(d),n.salt=JSON.parse(f)}catch(e){return void setTimeout((function(){var t="Failed to intialize: "+e.toString();a.logger.error(e),r(!1,null,t)}),1)}d=function(){n.derivedKey=o.pkcs5.pbkdf2(t,n.salt,1e3,32);var e=u.getObject("hmac"),i=p(n.salt,n.derivedKey);if(l(e)){if(e!==i)return void setTimeout((function(){r(!1,null,"Passwords does not match")}),1)}else u.setObject("hmac",i);n.container=u,n.initialized=!0,setTimeout((function(){r(!0,n,null)}),1)},c(i)?d():i.then(d,(function(e){a.logger.error(e),r(!1,null,e)}))}}))},r.prototype.setObject=function(e,t,r,n){if(n=void 0!==n&&n,!d(e))throw Error("Key must be a string");if(c(t))throw Error("Value cannot be null");if(!this.initialized)throw Error("SecureSettings not initialized");e=n?e:f(e),t=JSON.stringify(t),t=h(!0,t,this.derivedKey,this.iv,"AES-CBC"),t=o.util.encode64(t),n=p(t,this.derivedKey),this.container.setObject(e,{data:t,hmac:n},r)},r.prototype.getObject=function(e,t){if(t=void 0!==t&&t,!d(e))throw Error("Key must be a string");if(!this.initialized)throw Error("SecureSettings not initialized");if(e=t?e:f(e),e=this.container.getObject(e),c(e))return null;if(t=e.data,p(t,this.derivedKey)!==e.hmac)throw Error("The data is corrupted");e=o.util.decode64(t),e=h(!1,e,this.derivedKey,this.iv,"AES-CBC");try{var r=JSON.parse(e)}catch(e){throw r="Failed to parse data: "+e.toString(),a.logger.error(e),Error(r)}return r},r.prototype.removeObject=function(e,t){if(!d(e))throw Error("Key must be a string");if(!1===this.initialized)throw Error("SecureSettings not initialized");e=f(e),this.container.removeObject(e,t)},r.prototype.copySecureSettings=function(e,t,r){var n,o,a=this;return i.asyncExecutePromiseGeneratorProgram((function(i){return 1==i.nextAddress?(n=a,i.yield(s.settings.doesContainerExists(e),2)):i.yieldResult?(o=function(e,t){if(!1===e||c(t))setTimeout((function(){r(!1)}),1);else{e=t.getCollection();var o,i=[],s={};for(o in e)s.$jscomp$loop$prop$key$184=o,u.secureSettings.isEncryptedKey(s.$jscomp$loop$prop$key$184)&&i.push(new Promise(function(e){return function(r){var o=t.getObject(e.$jscomp$loop$prop$key$184,!0);n.setObject(e.$jscomp$loop$prop$key$184,o,r,!0)}}(s))),s={$jscomp$loop$prop$key$184:s.$jscomp$loop$prop$key$184};Promise.all(i).then((function(){})).finally((function(){setTimeout((function(){r(!0)}),1)}))}},u.secureSettings.loadSecureSettingsContainer(e,t,o),void i.jumpToEnd()):(r(!0),i.return())}))},r.prototype.getCollection=function(){return this.container.getCollection()},t.SecureSettings=r},"./source/settings/BfwSecureSettingsWrapper.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.secureSettings=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),i=r("./source/settings/BfwSettingsWrapper.js");e=r("./source/utils/BfwUtils.js");var s=r("./source/settings/BfwSecureSettings.js"),a=(r=e.utils).isNil,u=r.isFunction,l=r.isString;(r=function(){}).prototype.loadSecureSettingsContainer=function(e,t,r){if(!l(e))throw Error("name must be a string");if(!l(t))throw Error("password must be a string");if(!u(r))throw Error("callback must be a function");var n=o.md.sha256.create();n.update(t),t=n.digest().toHex(),(new s.SecureSettings).initialize(e,t,r)},r.prototype.deleteSecureSettingsContainer=function(e,t){i.settings.deleteSettingsContainer(e,t)},r.prototype.resetSecureSettingsCollection=function(e,t){if(a(e))throw Error("secureSettings container name is null");i.settings.loadSettingsContainer(e,!0,(function(e,r,n){if(!1===e)u(t)&&t(!1,n);else{for(var o in e=r.collection)"salt"!==o&&"iv"!==o&&r.removeObject(o);u(t)&&t(!0,null)}}))},r.prototype.isEncryptedKey=function(e){return"hmac"!==e&&"iv"!==e&&"salt"!==e},(t.secureSettings=new r).SecureSettings=s.SecureSettings},"./source/settings/BfwSessionSettings.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SessionSettings=void 0;var n=r("./source/storage/BfwSession.js");e=r("./source/utils/BfwUtils.js");var o=r("./source/settings/BfwSessionSettingsWrapper.js"),i=(r=e.utils).isntNil,s=r.isNil,a=r.isFunction,u=r.isObject;(r=function(e,t){if(i(o.sessionSettings.containers[e]))throw Error("Container name is not unique");this.name=e,this.persist=t,this.collection={},this.initialized=!1}).prototype.initialize=function(e){var t=this.name,r=this;if(this.initialized=!0,!1===this.persist)o.sessionSettings.containers[t]=this,setTimeout((function(){e(!0,r,null)}),1);else{var i=function(n,i){n?(o.sessionSettings.containers[t]=r,setTimeout((function(){e(!0,r,null)}),1)):setTimeout((function(){e(!1,null,i)}),1)};n.session.get(t,(function(s,a,l){s&&u(a)?(r.setCollection(a),o.sessionSettings.containers[t]=r,setTimeout((function(){e(!0,r,null)}),1)):n.session.set(t,r.getCollection(),i)}))}},r.prototype.setCollection=function(e){this.collection=e},r.prototype.getCollection=function(){return this.collection},r.prototype.setObject=function(e,t,r){if(s(e))throw Error("Key cannot be null");if(!1===this.initialized)throw Error("Settings not initialized");this.collection[e]=t,!1===this.persist?a(r)&&setTimeout((function(){r(!0,null)}),1):n.session.set(this.name,this.collection,r)},r.prototype.getObject=function(e){if(s(e))throw Error("Key cannot be null");if(!1===this.initialized)throw Error("Settings not initialized");return e=this.collection[e],s(e)&&(e=null),e},r.prototype.removeObject=function(e,t){if(s(e))throw Error("Key cannot be null");if(!1===this.initialized)throw Error("Settings not initialized");delete this.collection[e],!1===this.persist?a(t)&&setTimeout((function(){t(!0,null)}),1):n.session.set(this.name,this.collection,t)},r.prototype.serialize=function(){return JSON.stringify(this.collection)},r.prototype.shouldPersist=function(){return this.persist},t.SessionSettings=r},"./source/settings/BfwSessionSettingsWrapper.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.sessionSettings=void 0;var n=r("./source/storage/BfwSession.js");e=r("./source/utils/BfwUtils.js");var o=r("./source/BfwLogger.js"),s=r("./source/settings/BfwSessionSettings.js"),a=r("./source/BfwExtensionAdapter.js"),u=(r=e.utils).isntNil,l=r.isNil,c=r.isFunction;(r=function(){this.containers={}}).prototype.loadSettingsContainer=function(e,t,r){if(l(e))throw Error("Name cannot be null");if(t=!(!u(t)||!a.extensionAdapter.isManifestV3Extension())&&t,!c(r))throw Error("Callback cannot be null or is not a function");var n=this.containers[e];u(n)?setTimeout((function(){r(!0,n,null)}),1):new s.SessionSettings(e,t).initialize(r)},r.prototype.doesContainerExists=function(e){var t,r,o=this;return i.asyncExecutePromiseGeneratorProgram((function(i){if(1==i.nextAddress){if(l(e))throw Error("Name cannot be null");return t=o.containers,u(t[e])?i.return(!0):i.yield(new Promise((function(t){n.session.get(e,(function(e,r,n){t(e)}))})),2)}return r=i.yieldResult,i.return(r)}))},r.prototype.deleteSettingsContainer=function(e,t){if(l(e))throw Error("Name cannot be null");var r=this.containers[e];u(r)&&(this.containers[e]=null),l(r)||!1===r.shouldPersist()?c(t)&&setTimeout((function(){t(!0,null)}),1):n.session.remove(e,t)},r.prototype.resetSettingsCollection=function(e,t){if(l(e))throw Error("Name cannot be null");if(e=this.containers[e],l(e))throw Error("Container was never previously loaded");var r=e.getCollection();if(l(r))o.logger.info("Collection is empty"),c(t)&&setTimeout((function(){t(!1,Error("Collection is empty"))}),1);else{for(var i in r)delete r[i];!1===e.shouldPersist()?c(t)&&setTimeout((function(){t(!0,null)}),1):n.session.set(e.name,e.collection,t)}},(t.sessionSettings=new r).SessionSettings=s.SessionSettings},"./source/settings/BfwSettings.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var n=r("./source/storage/BfwStorage.js");e=r("./source/utils/BfwUtils.js");var o=r("./source/settings/BfwSettingsWrapper.js"),i=(r=e.utils).isntNil,s=r.isNil,a=r.isFunction,u=r.isObject;(r=function(e,t){if(i(o.settings.containers[e]))throw Error("Container name is not unique");this.name=e,this.persist=t,this.collection={},this.initialized=!1}).prototype.initialize=function(e){var t=this.name,r=this;if(this.initialized=!0,!1===this.persist)o.settings.containers[t]=this;else{var i=function(n,i){n?(o.settings.containers[t]=r,setTimeout((function(){e(!0,r,null)}),1)):setTimeout((function(){e(!1,null,i)}),1)};n.storage.get(t,(function(s,a,l){s&&u(a)?(r.setCollection(a),o.settings.containers[t]=r,setTimeout((function(){e(!0,r,null)}),1)):n.storage.set(t,r.getCollection(),i)}))}},r.prototype.setCollection=function(e){this.collection=e},r.prototype.getCollection=function(){return this.collection},r.prototype.setObject=function(e,t,r){if(s(e))throw Error("Key cannot be null");if(s(t))throw Error("Value cannot be null");if(!1===this.initialized)throw Error("Settings not initialized");this.collection[e]=t,!1===this.persist?a(r)&&setTimeout((function(){r(!0,null)}),1):n.storage.set(this.name,this.collection,r)},r.prototype.getObject=function(e){if(s(e))throw Error("Key cannot be null");if(!1===this.initialized)throw Error("Settings not initialized");return e=this.collection[e],s(e)&&(e=null),e},r.prototype.removeObject=function(e,t){if(s(e))throw Error("Key cannot be null");if(!1===this.initialized)throw Error("Settings not initialized");delete this.collection[e],!1===this.persist?a(t)&&setTimeout((function(){t(!0,null)}),1):n.storage.set(this.name,this.collection,t)},r.prototype.serialize=function(){return JSON.stringify(this.collection)},r.prototype.shouldPersist=function(){return this.persist},t.Settings=r},"./source/settings/BfwSettingsWrapper.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.settings=void 0;var n=r("./source/storage/BfwStorage.js");e=r("./source/utils/BfwUtils.js");var o=r("./source/BfwLogger.js"),s=r("./source/settings/BfwSettings.js"),a=(r=e.utils).isntNil,u=r.isNil,l=r.isFunction;(r=function(){this.containers={}}).prototype.loadSettingsContainer=function(e,t,r){if(u(e))throw Error("Name cannot be null");if(u(t)&&(t=!1),t&&!l(r))throw Error("Callback cannot be null or is not a function");var n=this.containers[e];if(a(n)){if(!t)return n;setTimeout((function(){r(!0,n,null)}),1)}else if((e=new s.Settings(e,t)).initialize(r),!t)return e},r.prototype.doesContainerExists=function(e){var t,r,o=this;return i.asyncExecutePromiseGeneratorProgram((function(i){if(1==i.nextAddress){if(u(e))throw Error("Name cannot be null");return t=o.containers,a(t[e])?i.return(!0):i.yield(new Promise((function(t){n.storage.get(e,(function(e,r,n){t(e)}))})),2)}return r=i.yieldResult,i.return(r)}))},r.prototype.deleteSettingsContainer=function(e,t){if(u(e))throw Error("Name cannot be null");var r=this.containers[e];if(a(r)&&(this.containers[e]=null,!1===r.shouldPersist())){if(!l(t))return;setTimeout((function(){t(!0,null)}),1)}else n.storage.remove(e,t)},r.prototype.resetSettingsCollection=function(e,t){if(u(e))throw Error("Name cannot be null");if(e=this.containers[e],u(e))throw Error("Container was never previously loaded");var r=e.getCollection();if(u(r))o.logger.info("Collection is empty"),l(t)&&setTimeout((function(){t(!1,Error("Collection is empty"))}),1);else{for(var i in r)delete r[i];!1===e.shouldPersist()?l(t)&&setTimeout((function(){t(!0,null)}),1):n.storage.set(e.name,e.collection,t)}},(t.settings=new r).Settings=s.Settings},"./source/storage/BfwSession.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.session=void 0;var n=r("./source/BfwLogger.js");e=r("./source/utils/BfwUtils.js");var o=r("./source/storage/BfwSessionException.js"),i=(r=e.utils).isNil,s=r.isntNil,a=r.isFunction;(r=function(){}).prototype.set=function(e,t,r){if(i(e))throw Error("Key cannot be null");if(i(t))throw Error("Value cannot be null");var s={};s[e]=t,chrome.storage.session.set(s,(function(){var s=chrome.runtime.lastError,u=!1,l=null;i(s)?u=!0:(n.logger.log("Storing{"+e+":"+t+"} caused an error:"+s),l=new o.SessionException("Browser Exception",s)),a(r)&&setTimeout((function(){r(u,l)}),1)}))},r.prototype.get=function(e,t){if(i(e))throw Error("Key cannot be null");if(!a(t))throw Error("Callback cannot be null or is not a function");chrome.storage.session.get(e,(function(r){var a,u=chrome.runtime.lastError,l=!1,c=null;a=r[e],i(u)&&s(a)?l=!0:(n.logger.log("Getting value for "+e+" caused an error:"+u),c=new o.SessionException("Browser Exception",u)),setTimeout((function(){t(l,a,c)}),1)}))},r.prototype.clear=function(e){chrome.storage.session.clear((function(){var t=chrome.runtime.lastError,r=null,n=!1;i(t)?n=!0:r=new o.SessionException("Browser Exception",t),a(e)&&setTimeout((function(){e(n,r)}),1)}))},r.prototype.remove=function(e,t){if(i(e))throw Error("Key cannot be null");chrome.storage.session.remove(e,(function(){var e=chrome.runtime.lastError,r=null,n=!1;i(e)?n=!0:r=new o.SessionException("Browser Exception",e),a(t)&&setTimeout((function(){t(n,r)}),1)}))},t.session=new r},"./source/storage/BfwSessionException.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SessionException=void 0,(e=function(e,t){this.name=e,this.error=t}).prototype.toString=function(){return"Name:"+this.name+":Error:"+this.error},t.SessionException=e},"./source/storage/BfwStorage.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.storage=void 0;var n=r("./source/BfwLogger.js");e=r("./source/utils/BfwUtils.js");var o=r("./source/storage/BfwStorageException.js"),i=(r=e.utils).isNil,s=r.isntNil,a=r.isFunction;(r=function(){this.StorageException=o.StorageException}).prototype.set=function(e,t,r){if(i(e))throw Error("Key cannot be null");if(i(t))throw Error("Value cannot be null");var s={};s[e]=t,chrome.storage.local.set(s,(function(){var s=chrome.runtime.lastError,u=!1,l=null;i(s)?u=!0:(n.logger.log("Storing{"+e+":"+t+"} caused an error:"+s),l=new o.StorageException("Browser Exception",s)),a(r)&&setTimeout((function(){r(u,l)}),1)}))},r.prototype.get=function(e,t){if(i(e))throw Error("Key cannot be null");if(!a(t))throw Error("Callback cannot be null or is not a function");chrome.storage.local.get(e,(function(r){var a,u=chrome.runtime.lastError,l=!1,c=null;a=r[e],i(u)&&s(a)?l=!0:(n.logger.log("Getting value for "+e+" caused an error:"+u),c=new o.StorageException("Browser Exception",u)),setTimeout((function(){t(l,a,c)}),1)}))},r.prototype.clear=function(e){chrome.storage.local.clear((function(){var t=chrome.runtime.lastError,r=null,n=!1;i(t)?n=!0:r=new o.StorageException("Browser Exception",t),a(e)&&setTimeout((function(){e(n,r)}),1)}))},r.prototype.remove=function(e,t){if(i(e))throw Error("Key cannot be null");chrome.storage.local.remove(e,(function(){var e=chrome.runtime.lastError,r=null,n=!1;i(e)?n=!0:r=new o.StorageException("Browser Exception",e),a(t)&&setTimeout((function(){t(n,r)}),1)}))},t.storage=new r},"./source/storage/BfwStorageException.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StorageException=void 0,(e=function(e,t){this.name=e,this.error=t}).prototype.toString=function(){return"Name:"+this.name+":Error:"+this.error},t.StorageException=e},"./source/telemetry/BfwTelemetry.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetry=t.Telemetry=void 0;var n=r("./source/BfwLogger.js");e=r("./source/utils/BfwUtils.js");var o=r("./source/telemetry/BfwTelemetryConstants.js");r("./source/telemetry/BfwTelemetryScd.js");var s=r("./source/telemetry/BfwTelemetrySettings.js"),a=r("./source/BfwExtensionAdapter.js"),u=(r=e.utils).isArray,l=r.isBoolean,c=r.isGuid,d=r.isFunction,f=r.isNil,p=r.isntNil;(r=function(e,t){this.defaultParameters=null,this.initialized=!1,this._telemetryParamsQueue=[],p(e)?this.message=e:this.message=o.telemetryConstants.MESSAGES.SEND_TELEMETRY_TO_BGPROXY,this.ignoreTelemetryEnableSettings=!1,l(t)&&!0===t&&(this.ignoreTelemetryEnableSettings=!0),this.clientID=null}).prototype.constructMessageBody=function(e){if(f(e))throw Error("parameters cannot be null");if(0===Object.keys(e).length)throw Error("parameters object is empty. Need at-least one property");var t,r="";for(t in e)r+=t+"="+e[t]+"&";return r.substring(0,r.length-1)},r.prototype.init=function(e,t){var r=this;if(!0!==this.initialized){if(f(e))throw Error("defaultParameters cannot be null");if(!d(t))throw Error("callback is not defined or is not a function");o.telemetryConstants.defaultParametersList.forEach((function(t){if(f(e[t]))throw Error("could not find mandatory parameter "+t+" in parameters list")})),this.clientID=e.CLIENT_ID;var i={};for(l in e){var u=o.telemetryConstants.defaultParameters[l];f(u)||f(u.key)||(i[u.key]=e[l])}var l=o.telemetryConstants.defaultParameters[o.telemetryConstants.USER_LANGUAGE];f(i[l.key])&&(i[l.key]=navigator.language);var c=this.constructMessageBody(i);if(f(c)||0===c.length)throw Error("constructMessageBody returned an empty string");s.telemetrySettings.initialize((function(e){!1===e?(n.logger.error("failed to initialize BfwTelemetry"),t(!1)):(a.extensionAdapter.addMessageListener(r.handleMessage.bind(r)),window.addEventListener(r.message,r.handleEvent.bind(r)),r.defaultParameters=c,r.initialized=!0,t(!0))}))}},r.prototype.sendOneTimeTelemetry=function(e,t){if(!c(e))throw Error("Mandatory Telemetry Name is missing or in wrong format");return s.telemetrySettings.isTelemetrySent(e)?(n.logger.debug("Telemetry already sent once, ignoring sending again"),!0):((t=this.send(t))&&s.telemetrySettings.telemetrySent(e),t)},r.prototype._canSendTelemetry=function(e){var t=o.telemetryConstants.parameters;return"error"!==e[t.ACTION]||!o.telemetryConstants.TELEMETRY_FILTER.includes(e[t.CATEGORY]+"|"+e[t.ACTION]+"|"+e[t.LABEL])},r.prototype.send=function(e){var t,r=this;return i.asyncExecutePromiseGeneratorProgram((function(n){if(!1===r.ignoreTelemetryEnableSettings&&!1===s.telemetrySettings.isTelemetryEnabled())return!1===s.telemetrySettings.hasUserRespondedInOptOutPage()&&(a.extensionAdapter.isManifestV3Extension()?s.telemetrySettings.setTelemetryParamsQueue(e):p(r._telemetryParamsQueue)&&r._telemetryParamsQueue.push(e)),n.return(!1);if(f(r.defaultParameters)||!1===r.initialized)return n.return(!1);if(f(e))throw Error("parameters are required for sending telemetry events");return r._canSendTelemetry(e)?(t=r.constructMessageBody(e),f(t)||0===t.length?n.return(!1):(p(r.clientID)&&(t+="&"+o.telemetryConstants.parameters.CLIENT_ID+"="+r.clientID),t+="&"+r.defaultParameters,a.extensionAdapter.isManifestV3Extension()?r.flushQueueManifestV3():u(r._telemetryParamsQueue)&&0<r._telemetryParamsQueue.length&&r.flushQueue(),n.return(!0))):n.return(!1)}))},r.prototype.flushQueueManifestV3=function(){var e=this;setTimeout((function(){var t=s.telemetrySettings.getTelemetryParamsQueue();!u(t)||0>=t.length||(t.forEach((function(t){e.send(t)})),s.telemetrySettings.clearTelemetryParamsQueue())}),2e3)},r.prototype.handleMessage=function(e,t,r){var n=this;if(e.id===this.message&&(t=e.payload,!f(t)&&!f(t.parameters)))return setTimeout((function(){n.send(e.payload.parameters)})),!0},r.prototype.handleEvent=function(e){var t=this;f(e.detail)||f(e.detail.parameters)||setTimeout((function(){t.send(e.detail.parameters)}))},r.prototype.flushQueue=function(){var e=this;setTimeout((function(){for(var t in e._telemetryParamsQueue)e.send(e._telemetryParamsQueue[t]);e._telemetryParamsQueue=[]}),2e3)},t.Telemetry=r,t.telemetry=new r},"./source/telemetry/BfwTelemetryConstants.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryConstants=void 0,(e=function(){this.dataSource={},this.HIT_TYPE={},this.MESSAGES={},this.parameters={},this.TELEMETRY_CATEGORY={},this.actionType={},this.defaultParameters={},this.defaultParametersList=[],this.TELEMETRY_FILTER=[],this.init()}).prototype.init=function(){this.initConstants(),this.initDataSourceConstants(),this.initHitTypeConstants(),this.initMessagesConstants(),this.initParameterConstants(),this.initTelemetryConstants(),this.initActionTypeConstants(),this.initDefaultParametersConstants(),this.buildLists()},e.prototype.initConstants=function(){this.APPLICATION_NAME="APPLICATION_NAME",this.APPLICATION_VERSION="APPLICATION_VERSION",this.CLIENT_ID="CLIENT_ID",this.DATA_SOURCE="DATA_SOURCE",this.TRACKING_ID="TRACKING_ID",this.USER_AGENT="USER_AGENT",this.USER_LANGUAGE="USER_LANGUAGE",this.GOOGLE_ANALYTICS_PROTOCOL_VERSION="GOOGLE_ANALYTICS_PROTOCOL_VERSION",this.ANONYMIZE_IP="ANONYMIZE_IP",this.BROWSER_NAME="BROWSER_NAME"},e.prototype.initDataSourceConstants=function(){this.dataSource.BROWSER_EXTENSION="web",this.dataSource.MOBILE_APP="app"},e.prototype.initHitTypeConstants=function(){this.HIT_TYPE.PAGE_VIEW="pageview",this.HIT_TYPE.SCREEN_VIEW="screenview",this.HIT_TYPE.EVENT="event",this.HIT_TYPE.EXCEPTION="exception",this.HIT_TYPE.SOCIAL="social"},e.prototype.initMessagesConstants=function(){this.MESSAGES.SEND_TELEMETRY_TO_BGPROXY="b021e29a-4fe3-4a60-865f-0cf783318187"},e.prototype.initParameterConstants=function(){this.parameters.NON_INTERACTION_HIT="ni",this.parameters.HIT_TYPE="t",this.parameters.CATEGORY="ec",this.parameters.ACTION="ea",this.parameters.LABEL="el",this.parameters.SOCIAL_NETWORK="sn",this.parameters.SOCIAL_ACTION="sa",this.parameters.SOCIAL_TARGET="st",this.parameters.DOCUMENT_PATH="dp",this.parameters.DOCUMENT_TITLE="dt",this.parameters.SCREEN_RESOLUTION="sr",this.parameters.CUSTOM_DIMENSION1="cd1",this.parameters.CUSTOM_DIMENSION2="cd2",this.parameters.CUSTOM_DIMENSION3="cd3",this.parameters.CUSTOM_DIMENSION4="cd4",this.parameters.CUSTOM_DIMENSION5="cd5",this.parameters.CUSTOM_DIMENSION6="cd6",this.parameters.CUSTOM_DIMENSION7="cd7",this.parameters.CUSTOM_DIMENSION8="cd8",this.parameters.CUSTOM_DIMENSION9="cd9",this.parameters.CUSTOM_DIMENSION10="cd10",this.parameters.CUSTOM_DIMENSION11="cd11",this.parameters.CUSTOM_DIMENSION12="cd12",this.parameters.CUSTOM_DIMENSION13="cd13",this.parameters.CUSTOM_DIMENSION14="cd14",this.parameters.CUSTOM_DIMENSION15="cd15",this.parameters.CUSTOM_DIMENSION16="cd16",this.parameters.CUSTOM_DIMENSION17="cd17",this.parameters.CUSTOM_DIMENSION18="cd18",this.parameters.CUSTOM_DIMENSION19="cd19",this.parameters.CUSTOM_DIMENSION20="cd20",this.parameters.CUSTOM_DIMENSION21="cd21",this.parameters.CUSTOM_DIMENSION22="cd22",this.parameters.CUSTOM_DIMENSION23="cd23",this.parameters.PRODUCT_IMPRESSION_BRAND1="il1pi1br",this.parameters.ITEM_CATEGORY="iv",this.parameters.CAMPAIGN_SOURCE="cs",this.parameters.CAMPAIGN_MEDIUM="cm",this.parameters.CLIENT_ID="cd2"},e.prototype.initTelemetryConstants=function(){this.TELEMETRY_CATEGORY.BROWSER="Browser",this.TELEMETRY_CATEGORY.EXTENSION="Extension"},e.prototype.initActionTypeConstants=function(){this.actionType.BROWSER={LAUNCH:"launch",UPDATE:"update"},this.actionType.EXTENSION={INSTALL:"install",UPDATE:"update"}},e.prototype.initDefaultParametersConstants=function(){this.defaultParameters.APPLICATION_NAME={maxLength:100,key:"an"},this.defaultParameters.APPLICATION_VERSION={maxLength:100,key:"av"},this.defaultParameters.CLIENT_ID={maxLength:100,key:"cid"},this.defaultParameters.DATA_SOURCE={maxLength:50,key:"ds",value:this.dataSource.BROWSER_EXTENSION},this.defaultParameters.TRACKING_ID={maxLength:100,key:"tid"},this.defaultParameters.USER_AGENT={maxLength:1e3,key:"ua"},this.defaultParameters.USER_LANGUAGE={maxLength:20,key:"ul"},this.defaultParameters.GOOGLE_ANALYTICS_PROTOCOL_VERSION={maxLength:100,key:"v",value:1},this.defaultParameters.ANONYMIZE_IP={maxLength:1,key:"aip",value:1},this.defaultParameters.BROWSER_NAME={maxLength:20,key:"cd6"}},e.prototype.buildLists=function(){this.defaultParametersList=[this.APPLICATION_NAME,this.APPLICATION_VERSION,this.CLIENT_ID,this.DATA_SOURCE,this.TRACKING_ID,this.GOOGLE_ANALYTICS_PROTOCOL_VERSION,this.ANONYMIZE_IP,this.BROWSER_NAME],this.TELEMETRY_FILTER=["bfw-logger|error|[xNDC.Web Error]: A soft dependency (seq: 0) failed to initialize: Exception while querying storage: Error: xneStorage::ManagedStorage Error: Browser 'Edge-Chromium' is not supported."]},t.telemetryConstants=new e},"./source/telemetry/BfwTelemetryProxy.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryProxy=void 0;var n=r("./source/utils/BfwUtils.js"),o=r("./source/telemetry/BfwTelemetryConstants.js"),i=r("./source/BfwExtensionAdapterCS.js"),s=n.utils.isNil,a=!1;(e=function(){this.initExecutionLocation()}).prototype.send=function(e){if(s(e))throw Error("parameters cannot be null");a?n.utils.createCustomHTMLEvent(o.telemetryConstants.MESSAGES.SEND_TELEMETRY_TO_BGPROXY,{parameters:e}):i.extensionAdapter.sendMessage({id:o.telemetryConstants.MESSAGES.SEND_TELEMETRY_TO_BGPROXY,payload:{parameters:e}})},e.prototype.initExecutionLocation=function(){var e=i.extensionAdapter.isManifestV3Extension();window.chrome&&chrome.runtime&&(e||chrome.runtime.getBackgroundPage)?e?a=!!(chrome.runtime.getManifest()||chrome.runtime.getManifest().background||chrome.runtime.getManifest().background.service_worker)&&window.location.href===i.extensionAdapter.getExtensionURL(chrome.runtime.getManifest().background.service_worker):chrome.runtime.getBackgroundPage((function(e){a=e===window})):a=!1},t.telemetryProxy=new e},"./source/telemetry/BfwTelemetryScd.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetrySCD=void 0,(e=function(){this.GOOGLE_ANALYTICS_URL="https://www.google-analytics.com/collect",this.REQUEST_TYPE="POST",this.COLLECTION_STATE=!0}).prototype.serialize=function(){return{ga_url:this.GOOGLE_ANALYTICS_URL,request_type:this.REQUEST_TYPE,collection_state:this.COLLECTION_STATE}},t.telemetrySCD=new e},"./source/telemetry/BfwTelemetrySettings.js":function(e,t,r){function n(e,t,r){e:if("object"==typeof t&&t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:t+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.telemetrySettings=void 0;var o=r("./source/BfwLogger.js"),i=r("./source/utils/BfwUtils.js"),s=r("./source/settings/BfwSettingsWrapper.js"),a=r("./source/BfwConstants.js"),u=r("./source/telemetry/BfwTelemetry.js"),l=(e=i.utils).isBoolean,c=e.isFunction,d=e.isGuid,f=e.isNil;(e=function(){var e=this;n(this,"isTelemetrySent",(function(t){if(!d(t))throw Error("Invalid Telemetry Name passed");var r=e.settingsContainer.getObject(a.constants.telemetry.TELEMETRY_SENT_LIST);return!(f(r)||0>=r.length)&&r.includes(t)})),n(this,"telemetrySent",(function(t){if(!d(t))throw Error("Invalid Telemetry Name passed");var r=e.settingsContainer.getObject(a.constants.telemetry.TELEMETRY_SENT_LIST);f(r)&&(r=[]),r.push(t),e.settingsContainer.setObject(a.constants.telemetry.TELEMETRY_SENT_LIST,r)})),this.settingsContainer=null}).prototype.initialize=function(e){var t=this;if(!c(e))throw Error("callback must be a function");s.settings.loadSettingsContainer(a.constants.telemetry.BFW_TELEMETRY_SETTINGS_CONTAINER,!0,(function(r,n,i){!1===r||f(n)?(o.logger.error("failed to load BFW_TELEMETRY_SETTINGS_CONTAINER"),e(!1)):(t.settingsContainer=n,e(!0))}))},e.prototype.isTelemetryEnabled=function(){if(f(this.settingsContainer))return o.logger.log("Settings not initialized"),!1;var e=this.settingsContainer.getObject(a.constants.telemetry.TELEMETRY_ENABLED);return!f(e)&&e},e.prototype.setTelemetryEnabled=function(e){if(f(this.settingsContainer))throw Error("Settings not initialized");if(!l(e))throw Error("Parameter must be a boolean");i.utils.setDoNotTrack(!e),this.settingsContainer.setObject(a.constants.telemetry.TELEMETRY_ENABLED,e)},e.prototype.setTelemetryParamsQueue=function(e){if(f(this.settingsContainer))o.logger.log("Settings not initialized");else{if(!i.utils.isObject(e))throw Error("Parameter must be an object");var t=this.settingsContainer.getObject(a.constants.telemetry.TELEMETRY_PARAMETERS_QUEUE);f(t)&&(t=[]),t.push(e),this.settingsContainer.setObject(a.constants.telemetry.TELEMETRY_PARAMETERS_QUEUE,t)}},e.prototype.clearTelemetryParamsQueue=function(){if(f(this.settingsContainer))throw Error("Settings not initialized");this.settingsContainer.setObject(a.constants.telemetry.TELEMETRY_PARAMETERS_QUEUE,[])},e.prototype.getTelemetryParamsQueue=function(){if(f(this.settingsContainer))throw Error("Settings not initialized");return this.settingsContainer.getObject(a.constants.telemetry.TELEMETRY_PARAMETERS_QUEUE)},e.prototype.isTelemetryOptOutShown=function(){if(f(this.settingsContainer))throw Error("Settings not initialized");var e=this.settingsContainer.getObject(a.constants.telemetry.TELEMETRY_OPT_OUT_SHOWN);return!f(e)&&e},e.prototype.setTelemetryOptOutShown=function(e){if(f(this.settingsContainer))throw Error("Settings not initialized");if(!l(e))throw Error("Parameter must be a boolean");this.settingsContainer.setObject(a.constants.telemetry.TELEMETRY_OPT_OUT_SHOWN,e)},e.prototype.hasUserRespondedInOptOutPage=function(){if(f(this.settingsContainer))return o.logger.log("Settings not initialized"),!1;var e=this.settingsContainer.getObject(a.constants.telemetry.USER_RESPONDED_IN_OPT_OUT_PAGE);return!f(e)&&e},e.prototype.setUserRespondedInOptOutPage=function(e){if(f(this.settingsContainer))throw Error("Settings not initialized");if(!l(e))throw Error("Parameter must be a boolean");this.settingsContainer.setObject(a.constants.telemetry.USER_RESPONDED_IN_OPT_OUT_PAGE,e,(function(){return u.telemetry.flushQueue()}))},e.prototype.setLastOfferDate=function(e){if(f(e))throw Error("Date cannot be null.");this.settingsContainer.setObject(a.constants.telemetry.LAST_OFFER_DATE,e.getTime())},e.prototype.getLastOfferDate=function(){var e=this.settingsContainer.getObject(a.constants.telemetry.LAST_OFFER_DATE);return f(e)||!1===i.utils.isInteger(e)?null:new Date(e)},t.telemetrySettings=new e},"./source/telemetry/BfwTelemetryWrapper.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryWrapper=void 0,e=r("./source/utils/BfwUtils.js");var n=r("./source/telemetry/BfwTelemetryProxy.js"),o=r("./source/BfwConstants.js"),i=(r=e.utils).isNil,s=r.isString;(r=function(){this.TELEMETRY_CATEGORY="bfw",this.TELEMETRY_TYPE="event",this.componentType={LOGGER:"logger",LOCALIZER:"localizer",STORAGE:"storage",SETTINGS:"settings",SECURE_SETTINGS:"secureSettings",NOTIFICATION:"notification"},this.actionType={WARN:"warn",ERROR:"error"},this.parameters={EVENT:"t",CATEGORY:"ec",ACTION:"ea",PAYLOAD:"el"}}).prototype.send=function(e,t,r){if(!s(e))throw Error("componentType should be a string");if(!s(t))throw Error("actionType should be a string");if(i(r))throw Error("payload should not be Nil");if(!s(r)){if(!(r instanceof Error))throw Error(o.constants.ERROR_REPORTING.INVALID_MESSAGE_TYPE_ERROR);r=r.toString()}var a={};return a[this.parameters.EVENT]=this.TELEMETRY_TYPE,a[this.parameters.CATEGORY]=this.TELEMETRY_CATEGORY+"-"+e,a[this.parameters.ACTION]=t,a[this.parameters.PAYLOAD]=r,n.telemetryProxy.send(a)},t.telemetryWrapper=new r},"./source/utils/BfwBase64Util.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.base64=void 0,(e=function(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}).prototype._utf8Encode=function(e){var t="";e=e.replace(/\r\n/g,"\n");for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);128>n?t+=String.fromCharCode(n):(127<n&&2048>n?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},e.prototype._utf8Decode=function(e){for(var t,r,n,o="",i=0;i<e.length;)128>(t=e.charCodeAt(i))?(o+=String.fromCharCode(t),i++):191<t&&224>t?(r=e.charCodeAt(i+1),o+=String.fromCharCode((31&t)<<6|63&r),i+=2):(r=e.charCodeAt(i+1),n=e.charCodeAt(i+2),o+=String.fromCharCode((15&t)<<12|(63&r)<<6|63&n),i+=3);return o},e.prototype.encode=function(e){var t="",r=0;for(e=this._utf8Encode(e);r<e.length;){var n=e.charCodeAt(r++),o=e.charCodeAt(r++),i=e.charCodeAt(r++),s=n>>2;n=(3&n)<<4|o>>4;var a=(15&o)<<2|i>>6,u=63&i;Number.isNaN(o)?u=a=64:Number.isNaN(i)&&(u=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(n)+this._keyStr.charAt(a)+this._keyStr.charAt(u)}return t},e.prototype.decode=function(e){var t="",r=0;for(e=e.replace(/[^A-Za-z0-9+/=]\./g,"");r<e.length;){var n=this._keyStr.indexOf(e.charAt(r++)),o=this._keyStr.indexOf(e.charAt(r++)),i=this._keyStr.indexOf(e.charAt(r++)),s=this._keyStr.indexOf(e.charAt(r++));n=n<<2|o>>4,o=(15&o)<<4|i>>2;var a=(3&i)<<6|s;t+=String.fromCharCode(n),64!==i&&(t+=String.fromCharCode(o)),64!==s&&(t+=String.fromCharCode(a))}return(t=this._utf8Decode(t)).replace(/\0.*$/g,"")},t.base64=new e},"./source/utils/BfwUtils.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t,r){e:if("object"==typeof t&&t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:t+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.utils=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),s=r("urijs"),a=r("jsrsasign"),u=r("./source/BfwConstants.js"),l=r("./source/globals/BfwGlobals.js"),c={ac:{com:!0,gov:!0,mil:!0,net:!0,org:!0,edu:!0},ad:{nom:!0},ae:{ac:!0,co:!0,gov:!0,mil:!0,name:!0,net:!0,org:!0,pro:!0,sch:!0},af:{com:!0,edu:!0,gov:!0,net:!0,org:!0},ai:{off:!0,com:!0,net:!0,org:!0},al:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0,uniti:!0,tirana:!0,soros:!0,upt:!0,inima:!0},an:{com:!0,net:!0,org:!0,edu:!0},ag:{com:!0,org:!0,net:!0,co:!0,nom:!0},ao:{co:!0,ed:!0,gv:!0,it:!0,og:!0,pb:!0},ar:{com:!0,edu:!0,gob:!0,gov:!0,int:!0,mil:!0,net:!0,org:!0,tur:!0},arpa:{e164:!0,"in-addr":!0,iris:!0,ip6:!0,uri:!0,urn:!0},at:{ac:!0,co:!0,gv:!0,or:!0,priv:!0},au:{asn:!0,com:!0,net:!0,id:!0,org:!0,csiro:!0,oz:!0,info:!0,conf:!0,act:!0,nsw:!0,nt:!0,qld:!0,sa:!0,tas:!0,vic:!0,wa:!0},aw:{com:!0},az:{com:!0,net:!0,int:!0,gov:!0,biz:!0,org:!0,edu:!0,mil:!0,pp:!0,name:!0,info:!0},ba:{co:!0,com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0,rs:!0,unbi:!0,unmo:!0,unsa:!0,untz:!0,unze:!0},bb:{biz:!0,co:!0,com:!0,edu:!0,gov:!0,info:!0,net:!0,org:!0,store:!0,tv:!0},bd:{com:!0,edu:!0,net:!0,gov:!0,org:!0,mil:!0},be:{ac:!0},bf:{gov:!0},bh:{biz:!0,cc:!0,com:!0,edu:!0,gov:!0,info:!0,net:!0,org:!0},bm:{com:!0,edu:!0,org:!0,gov:!0,net:!0},bn:{com:!0,edu:!0,gov:!0,net:!0,org:!0},bo:{com:!0,edu:!0,gob:!0,gov:!0,int:!0,mil:!0,net:!0,org:!0,tv:!0},br:{adm:!0,adv:!0,agr:!0,am:!0,arq:!0,art:!0,ato:!0,b:!0,bio:!0,blog:!0,bmd:!0,cim:!0,cng:!0,cnt:!0,com:!0,coop:!0,ecn:!0,edu:!0,eng:!0,esp:!0,etc:!0,eti:!0,far:!0,flog:!0,fm:!0,fnd:!0,fot:!0,fst:!0,g12:!0,ggf:!0,gov:!0,imb:!0,ind:!0,inf:!0,jor:!0,jus:!0,lel:!0,mat:!0,med:!0,mil:!0,mus:!0,net:!0,nom:!0,not:!0,ntr:!0,odo:!0,org:!0,ppg:!0,pro:!0,psc:!0,psi:!0,qsl:!0,rec:!0,slg:!0,srv:!0,tmp:!0,trd:!0,tur:!0,tv:!0,vet:!0,vlog:!0,wiki:!0,zlg:!0},bs:{com:!0,edu:!0,gov:!0,net:!0,org:!0},bt:{com:!0,edu:!0,gov:!0,net:!0,org:!0},bw:{co:!0,org:!0},by:{gov:!0,mil:!0},bz:{du:!0,et:!0,om:!0,ov:!0,rg:!0},ca:{ab:!0,bc:!0,mb:!0,nb:!0,nf:!0,nl:!0,ns:!0,nt:!0,nu:!0,on:!0,pe:!0,qc:!0,sk:!0,yk:!0},cc:{co:!0},ck:{biz:!0,co:!0,edu:!0,gen:!0,gov:!0,info:!0,net:!0,org:!0},cn:{ac:!0,ah:!0,bj:!0,com:!0,cq:!0,edu:!0,fj:!0,gd:!0,gov:!0,gs:!0,gx:!0,gz:!0,ha:!0,hb:!0,he:!0,hi:!0,hl:!0,hn:!0,jl:!0,js:!0,jx:!0,ln:!0,mil:!0,net:!0,nm:!0,nx:!0,org:!0,qh:!0,sc:!0,sd:!0,sh:!0,sn:!0,sx:!0,tj:!0,tw:!0,xj:!0,xz:!0,yn:!0,zj:!0},co:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,nom:!0,org:!0},cr:{ac:!0,c:!0,co:!0,ed:!0,fi:!0,go:!0,or:!0,sa:!0},cx:{gov:!0},cy:{ac:!0,biz:!0,com:!0,ekloges:!0,gov:!0,ltd:!0,name:!0,net:!0,org:!0,parliament:!0,press:!0,pro:!0,tm:!0},cu:{com:!0,edu:!0,org:!0,net:!0,gov:!0,inf:!0},dm:{com:!0,net:!0,org:!0,edu:!0,gov:!0},do:{art:!0,com:!0,edu:!0,gob:!0,gov:!0,mil:!0,net:!0,org:!0,sld:!0,web:!0},dz:{art:!0,asso:!0,com:!0,edu:!0,gov:!0,net:!0,org:!0,pol:!0},ec:{com:!0,edu:!0,fin:!0,gov:!0,info:!0,med:!0,mil:!0,net:!0,org:!0,pro:!0},ee:{com:!0,org:!0,fie:!0,pri:!0},eg:{com:!0,edu:!0,eun:!0,gov:!0,mil:!0,name:!0,net:!0,org:!0,sci:!0},er:{com:!0,edu:!0,gov:!0,ind:!0,mil:!0,net:!0,org:!0,rochest:!0,w:!0},es:{com:!0,edu:!0,gob:!0,nom:!0,org:!0},et:{biz:!0,com:!0,edu:!0,gov:!0,info:!0,name:!0,net:!0,org:!0},fi:{aland:!0},fj:{ac:!0,biz:!0,com:!0,info:!0,mil:!0,name:!0,net:!0,org:!0,pro:!0},fk:{ac:!0,co:!0,gov:!0,net:!0,nom:!0,org:!0},fr:{asso:!0,com:!0,f:!0,gouv:!0,nom:!0,prd:!0,presse:!0,tm:!0},ge:{com:!0,edu:!0,gov:!0,org:!0,mil:!0,net:!0,pvt:!0},gg:{co:!0,net:!0,org:!0},gh:{com:!0,edu:!0,gov:!0,mil:!0,org:!0},gi:{com:!0,ltd:!0,gov:!0,mod:!0,edu:!0,org:!0},gn:{ac:!0,com:!0,gov:!0,net:!0,org:!0},gp:{com:!0,net:!0,edu:!0,asso:!0,org:!0},gr:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},gt:{com:!0,edu:!0,gob:!0,ind:!0,mil:!0,net:!0,org:!0},gu:{com:!0,edu:!0,gov:!0,net:!0,org:!0},hk:{com:!0,edu:!0,gov:!0,idv:!0,net:!0,org:!0},ht:{com:!0,net:!0,firm:!0,shop:!0,info:!0,pro:!0,adult:!0,org:!0,art:!0,pol:!0,rel:!0,asso:!0,perso:!0,coop:!0,med:!0,edu:!0,gouv:!0},hu:{2e3:!0,agrar:!0,bolt:!0,casino:!0,city:!0,co:!0,erotica:!0,erotika:!0,film:!0,forum:!0,games:!0,hotel:!0,info:!0,ingatlan:!0,jogasz:!0,konyvelo:!0,lakas:!0,media:!0,news:!0,org:!0,priv:!0,reklam:!0,sex:!0,shop:!0,sport:!0,suli:!0,szex:!0,tm:!0,tozsde:!0,utazas:!0,video:!0},id:{ac:!0,co:!0,go:!0,mil:!0,net:!0,or:!0,sch:!0,web:!0},il:{ac:!0,co:!0,gov:!0,idf:!0,k12:!0,muni:!0,net:!0,org:!0},im:{co:!0,"ltd.co":!0,"plc.co":!0,net:!0,gov:!0,org:!0,nic:!0,ac:!0},in:{ac:!0,co:!0,edu:!0,ernet:!0,firm:!0,gen:!0,gov:!0,i:!0,ind:!0,mil:!0,net:!0,nic:!0,org:!0,res:!0},iq:{com:!0,edu:!0,gov:!0,i:!0,mil:!0,net:!0,org:!0},ir:{ac:!0,co:!0,dnssec:!0,gov:!0,i:!0,id:!0,net:!0,org:!0,sch:!0},it:{edu:!0,gov:!0},je:{co:!0,net:!0,org:!0},jo:{com:!0,edu:!0,gov:!0,mil:!0,name:!0,net:!0,org:!0,sch:!0},jp:{ac:!0,ad:!0,co:!0,ed:!0,go:!0,gr:!0,lg:!0,ne:!0,or:!0},ke:{ac:!0,co:!0,go:!0,info:!0,me:!0,mobi:!0,ne:!0,or:!0,sc:!0},kh:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0,per:!0},ki:{biz:!0,com:!0,de:!0,edu:!0,gov:!0,info:!0,mob:!0,net:!0,org:!0,tel:!0},km:{asso:!0,com:!0,coop:!0,edu:!0,gouv:!0,k:!0,medecin:!0,mil:!0,nom:!0,notaires:!0,pharmaciens:!0,presse:!0,tm:!0,veterinaire:!0},kn:{edu:!0,gov:!0,net:!0,org:!0},kr:{ac:!0,busan:!0,chungbuk:!0,chungnam:!0,co:!0,daegu:!0,daejeon:!0,es:!0,gangwon:!0,go:!0,gwangju:!0,gyeongbuk:!0,gyeonggi:!0,gyeongnam:!0,hs:!0,incheon:!0,jeju:!0,jeonbuk:!0,jeonnam:!0,k:!0,kg:!0,mil:!0,ms:!0,ne:!0,or:!0,pe:!0,re:!0,sc:!0,seoul:!0,ulsan:!0},kw:{com:!0,edu:!0,gov:!0,net:!0,org:!0},ky:{com:!0,edu:!0,gov:!0,net:!0,org:!0},kz:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},lb:{com:!0,edu:!0,gov:!0,net:!0,org:!0},lc:{com:!0,org:!0,edu:!0,gov:!0},li:{com:!0,net:!0,org:!0,gov:!0},lk:{assn:!0,com:!0,edu:!0,gov:!0,grp:!0,hotel:!0,int:!0,ltd:!0,net:!0,ngo:!0,org:!0,sch:!0,soc:!0,web:!0},lr:{com:!0,edu:!0,gov:!0,net:!0,org:!0},ls:{org:!0,co:!0},lt:{gov:!0,mil:!0},lu:{gov:!0,mil:!0,org:!0,net:!0},lv:{asn:!0,com:!0,conf:!0,edu:!0,gov:!0,id:!0,mil:!0,net:!0,org:!0},ly:{com:!0,edu:!0,gov:!0,id:!0,med:!0,net:!0,org:!0,plc:!0,sch:!0},ma:{ac:!0,co:!0,gov:!0,m:!0,net:!0,org:!0,press:!0},mc:{asso:!0,tm:!0},me:{ac:!0,co:!0,edu:!0,gov:!0,its:!0,net:!0,org:!0,priv:!0},mg:{com:!0,edu:!0,gov:!0,mil:!0,nom:!0,org:!0,prd:!0,tm:!0},mk:{com:!0,edu:!0,gov:!0,inf:!0,name:!0,net:!0,org:!0,pro:!0},ml:{com:!0,edu:!0,gov:!0,net:!0,org:!0,presse:!0},mn:{edu:!0,gov:!0,org:!0},mo:{com:!0,edu:!0,gov:!0,net:!0,org:!0},mt:{com:!0,edu:!0,gov:!0,net:!0,org:!0},mv:{aero:!0,biz:!0,com:!0,coop:!0,edu:!0,gov:!0,info:!0,int:!0,mil:!0,museum:!0,name:!0,net:!0,org:!0,pro:!0},mw:{ac:!0,co:!0,com:!0,coop:!0,edu:!0,gov:!0,int:!0,museum:!0,net:!0,org:!0},mx:{com:!0,edu:!0,gob:!0,net:!0,org:!0},my:{com:!0,edu:!0,gov:!0,mil:!0,name:!0,net:!0,org:!0,sch:!0},nf:{arts:!0,com:!0,firm:!0,info:!0,net:!0,other:!0,per:!0,rec:!0,store:!0,web:!0},ng:{biz:!0,com:!0,edu:!0,gov:!0,mil:!0,mobi:!0,name:!0,net:!0,org:!0,sch:!0},ni:{ac:!0,co:!0,com:!0,edu:!0,gob:!0,mil:!0,net:!0,nom:!0,org:!0},no:{mil:!0,stat:!0,kommune:!0,herad:!0,priv:!0,vgs:!0,fhs:!0,museum:!0,fylkesbibl:!0,folkebibl:!0,idrett:!0},np:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},nr:{biz:!0,com:!0,edu:!0,gov:!0,info:!0,net:!0,org:!0},om:{ac:!0,biz:!0,co:!0,com:!0,edu:!0,gov:!0,med:!0,mil:!0,museum:!0,net:!0,org:!0,pro:!0,sch:!0},pe:{com:!0,edu:!0,gob:!0,mil:!0,net:!0,nom:!0,org:!0,sld:!0},pf:{com:!0,org:!0,edu:!0},pg:{"com.pg":!0,net:!0},ph:{com:!0,edu:!0,gov:!0,i:!0,mil:!0,net:!0,ngo:!0,org:!0},pk:{biz:!0,com:!0,edu:!0,fam:!0,gob:!0,gok:!0,gon:!0,gop:!0,gos:!0,gov:!0,net:!0,org:!0,web:!0},pl:{art:!0,bialystok:!0,biz:!0,com:!0,edu:!0,gda:!0,gdansk:!0,gorzow:!0,gov:!0,info:!0,katowice:!0,krakow:!0,lodz:!0,lublin:!0,mil:!0,net:!0,ngo:!0,olsztyn:!0,org:!0,poznan:!0,pwr:!0,radom:!0,slupsk:!0,szczecin:!0,torun:!0,warszawa:!0,waw:!0,wroc:!0,wroclaw:!0,zgora:!0},pr:{ac:!0,biz:!0,com:!0,edu:!0,est:!0,gov:!0,info:!0,isla:!0,name:!0,net:!0,org:!0,pro:!0,prof:!0},pro:{law:!0,med:!0,cpa:!0},ps:{com:!0,edu:!0,gov:!0,net:!0,org:!0,plo:!0,sec:!0},pt:{com:!0,edu:!0,gov:!0,int:!0,net:!0,nome:!0,org:!0,publ:!0},pw:{belau:!0,co:!0,ed:!0,go:!0,ne:!0,or:!0},ro:{arts:!0,com:!0,firm:!0,info:!0,nom:!0,nt:!0,org:!0,rec:!0,store:!0,tm:!0,www:!0},rs:{ac:!0,co:!0,edu:!0,gov:!0,in:!0,org:!0},sb:{com:!0,edu:!0,gov:!0,net:!0,org:!0},sc:{com:!0,edu:!0,gov:!0,net:!0,org:!0},sh:{co:!0,com:!0,edu:!0,gov:!0,net:!0,nom:!0,org:!0},sl:{com:!0,edu:!0,gov:!0,net:!0,org:!0},st:{co:!0,com:!0,consulado:!0,edu:!0,embaixada:!0,gov:!0,mil:!0,net:!0,org:!0,principe:!0,saotome:!0,store:!0},sv:{com:!0,edu:!0,gob:!0,org:!0,red:!0},sz:{ac:!0,co:!0,org:!0},tr:{av:!0,bbs:!0,bel:!0,biz:!0,com:!0,dr:!0,edu:!0,gen:!0,gov:!0,info:!0,k12:!0,name:!0,net:!0,org:!0,pol:!0,tel:!0,tsk:!0,tv:!0,web:!0},tt:{aero:!0,biz:!0,cat:!0,co:!0,com:!0,coop:!0,edu:!0,gov:!0,info:!0,int:!0,jobs:!0,mil:!0,mobi:!0,museum:!0,name:!0,net:!0,org:!0,pro:!0,tel:!0,travel:!0},tw:{club:!0,com:!0,ebiz:!0,edu:!0,game:!0,gov:!0,idv:!0,mil:!0,net:!0,org:!0},mu:{ac:!0,co:!0,com:!0,gov:!0,net:!0,or:!0,org:!0},mz:{ac:!0,co:!0,edu:!0,gov:!0,org:!0},na:{co:!0,com:!0},nz:{ac:!0,co:!0,cri:!0,geek:!0,gen:!0,govt:!0,health:!0,iwi:!0,maori:!0,mil:!0,net:!0,org:!0,parliament:!0,school:!0},pa:{abo:!0,ac:!0,com:!0,edu:!0,gob:!0,ing:!0,med:!0,net:!0,nom:!0,org:!0,sld:!0},py:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},qa:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},re:{asso:!0,com:!0,nom:!0},ru:{ac:!0,adygeya:!0,altai:!0,amur:!0,arkhangelsk:!0,astrakhan:!0,bashkiria:!0,belgorod:!0,bir:!0,bryansk:!0,buryatia:!0,cbg:!0,chel:!0,chelyabinsk:!0,chita:!0,chukotka:!0,chuvashia:!0,com:!0,dagestan:!0,"e-burg":!0,edu:!0,gov:!0,grozny:!0,int:!0,irkutsk:!0,ivanovo:!0,izhevsk:!0,jar:!0,"joshkar-ola":!0,kalmykia:!0,kaluga:!0,kamchatka:!0,karelia:!0,kazan:!0,kchr:!0,kemerovo:!0,khabarovsk:!0,khakassia:!0,khv:!0,kirov:!0,koenig:!0,komi:!0,kostroma:!0,kranoyarsk:!0,kuban:!0,kurgan:!0,kursk:!0,lipetsk:!0,magadan:!0,mari:!0,"mari-el":!0,marine:!0,mil:!0,mordovia:!0,mosreg:!0,msk:!0,murmansk:!0,nalchik:!0,net:!0,nnov:!0,nov:!0,novosibirsk:!0,nsk:!0,omsk:!0,orenburg:!0,org:!0,oryol:!0,penza:!0,perm:!0,pp:!0,pskov:!0,ptz:!0,rnd:!0,ryazan:!0,sakhalin:!0,samara:!0,saratov:!0,simbirsk:!0,smolensk:!0,spb:!0,stavropol:!0,stv:!0,surgut:!0,tambov:!0,tatarstan:!0,tom:!0,tomsk:!0,tsaritsyn:!0,tsk:!0,tula:!0,tuva:!0,tver:!0,tyumen:!0,udm:!0,udmurtia:!0,"ulan-ude":!0,vladikavkaz:!0,vladimir:!0,vladivostok:!0,volgograd:!0,vologda:!0,voronezh:!0,vrn:!0,vyatka:!0,yakutia:!0,yamal:!0,yekaterinburg:!0,"yuzhno-sakhalinsk":!0},rw:{ac:!0,co:!0,com:!0,edu:!0,gouv:!0,gov:!0,int:!0,mil:!0,net:!0},sa:{com:!0,edu:!0,gov:!0,med:!0,net:!0,org:!0,pub:!0,sch:!0},sd:{com:!0,edu:!0,gov:!0,info:!0,med:!0,net:!0,org:!0,tv:!0},se:{a:!0,ac:!0,b:!0,bd:!0,c:!0,d:!0,e:!0,f:!0,g:!0,h:!0,i:!0,k:!0,l:!0,m:!0,n:!0,o:!0,org:!0,p:!0,parti:!0,pp:!0,press:!0,r:!0,s:!0,t:!0,tm:!0,u:!0,w:!0,x:!0,y:!0,z:!0},sg:{com:!0,edu:!0,gov:!0,idn:!0,net:!0,org:!0,per:!0},sn:{art:!0,com:!0,edu:!0,gouv:!0,org:!0,perso:!0,univ:!0},sy:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,news:!0,org:!0},th:{ac:!0,co:!0,go:!0,in:!0,mi:!0,net:!0,or:!0},tj:{ac:!0,biz:!0,co:!0,com:!0,edu:!0,go:!0,gov:!0,info:!0,int:!0,mil:!0,name:!0,net:!0,nic:!0,org:!0,test:!0,web:!0},tn:{agrinet:!0,com:!0,defense:!0,edunet:!0,ens:!0,fin:!0,gov:!0,ind:!0,info:!0,intl:!0,mincom:!0,nat:!0,net:!0,org:!0,perso:!0,rnrt:!0,rns:!0,rnu:!0,tourism:!0},tz:{ac:!0,co:!0,go:!0,ne:!0,or:!0},ua:{biz:!0,cherkassy:!0,chernigov:!0,chernovtsy:!0,ck:!0,cn:!0,co:!0,com:!0,crimea:!0,cv:!0,dn:!0,dnepropetrovsk:!0,donetsk:!0,dp:!0,edu:!0,gov:!0,if:!0,in:!0,"ivano-frankivsk":!0,kh:!0,kharkov:!0,kherson:!0,khmelnitskiy:!0,kiev:!0,kirovograd:!0,km:!0,kr:!0,ks:!0,kv:!0,lg:!0,lugansk:!0,lutsk:!0,lviv:!0,me:!0,mk:!0,net:!0,nikolaev:!0,od:!0,odessa:!0,org:!0,pl:!0,poltava:!0,pp:!0,rovno:!0,rv:!0,sebastopol:!0,sumy:!0,te:!0,ternopil:!0,uzhgorod:!0,vinnica:!0,vn:!0,zaporizhzhe:!0,zhitomir:!0,zp:!0,zt:!0},ug:{ac:!0,co:!0,go:!0,ne:!0,or:!0,org:!0,sc:!0},uk:{ac:!0,bl:!0,"british-library":!0,co:!0,cym:!0,gov:!0,govt:!0,icnet:!0,jet:!0,lea:!0,ltd:!0,me:!0,mil:!0,mod:!0,"national-library-scotland":!0,nel:!0,net:!0,nhs:!0,nic:!0,nls:!0,org:!0,orgn:!0,parliament:!0,plc:!0,police:!0,sch:!0,scot:!0,soc:!0},us:{dni:!0,fed:!0,isa:!0,kids:!0,nsn:!0},uy:{com:!0,edu:!0,gub:!0,mil:!0,net:!0,org:!0},ve:{co:!0,com:!0,edu:!0,gob:!0,info:!0,mil:!0,net:!0,org:!0,web:!0},vi:{co:!0,com:!0,k12:!0,net:!0,org:!0},vn:{ac:!0,biz:!0,com:!0,edu:!0,gov:!0,health:!0,info:!0,int:!0,name:!0,net:!0,org:!0,pro:!0},ye:{co:!0,com:!0,gov:!0,ltd:!0,me:!0,net:!0,org:!0,plc:!0},yu:{ac:!0,co:!0,edu:!0,gov:!0,org:!0},za:{ac:!0,agric:!0,alt:!0,bourse:!0,city:!0,co:!0,cybernet:!0,db:!0,edu:!0,gov:!0,grondar:!0,iaccess:!0,imt:!0,inca:!0,landesign:!0,law:!0,mil:!0,net:!0,ngo:!0,nis:!0,nom:!0,olivetti:!0,org:!0,pix:!0,school:!0,tm:!0,web:!0},zm:{ac:!0,co:!0,com:!0,edu:!0,gov:!0,net:!0,org:!0,sch:!0}};(e=function(){var e=this;o(this,"isGuid",(function(t){return!!e.isString(t)&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t.toLowerCase())})),o(this,"byteArrayToStringUTF16LE",(function(t){if(!1===e.isArray(t))throw Error("Byte array cannot be null or is not an array");if(2>t.length)throw Error("Byte array needs to contain at least two bytes");if(0!=t.length%2)throw Error("Byte array needs to contain even number of bytes");for(var r="",n=0;n<t.length-1;n+=2){var o=t[n];if(255<o)throw Error("Encoding error: Input contains element larger than a byte.");o&=255;var i=t[n+1];if(255<i)throw Error("Encoding error: Input contains element larger than a byte.");i=i<<8&65280,r+=String.fromCharCode(o+i)}return r})),o(this,"obfuscatePassword",(function(t,r){if(!1===e.isString(t))throw Error("password  cannot be null and has to be a string");if(!1===e.isString(r))throw Error("obfuscationKey  cannot be null and has to be a string");return t=new Uint8Array(e.stringUTF16LEToByteArray(t)),r=new Uint8Array(e.stringUTF16LEToByteArray(r)),r=e._obfuscateData(t,r),e.arrayBufferToStringUTF16LE(r)})),o(this,"isEmptyObject",(function(t){return!(!e.isNil(t)&&0!==Object.keys(t).length)})),o(this,"objectHas",(function(t,r){return!(!e.isObject(t)||!e.isString(r))&&Object.prototype.hasOwnProperty.call(t,r)})),o(this,"isString",(function(t){return!(!e.isntNil(t)||"string"!=typeof t)})),o(this,"isFunction",(function(t){return!(!e.isntNil(t)||"function"!=typeof t)})),o(this,"isArray",(function(e){return Array.isArray(e)})),o(this,"isObject",(function(t){return!(!e.isntNil(t)||"object"!=typeof t||t.constructor!==Object)})),o(this,"isBoolean",(function(t){return!(!e.isntNil(t)||"boolean"!=typeof t)})),o(this,"getSLD",(function(t){if(e.isNil(t))return null;var r=t.split("."),n=r.length-2;return 0>n?null:(t=r[n],r=r[n+1],n=c[r],e.isNil(n)||e.isNil(n[t])?null:t+"."+r)})),o(this,"depthOfTLDorSLD",(function(t){return e.isNil(t)?null:(t=e.getSLD(t),e.isntNil(t)?2:1)})),o(this,"isInteger",(function(t){return!e.isNil(t)&&"number"==typeof t&&Number.isFinite(t)&&Math.floor(t)===t})),o(this,"isNumber",(function(t){return!e.isNil(t)&&"number"==typeof t&&Number.isFinite(t)})),o(this,"isSuccessCode",(function(t){return!e.isNil(t)&&(t===u.constants.httpStatusCodes.OK||t===u.constants.httpStatusCodes.PARTIAL_CONTENT||t===u.constants.httpStatusCodes.CREATED||t===u.constants.httpStatusCodes.NO_CONTENT)})),o(this,"isSuccessCodeLocalFile",(function(t){return!!e.isInteger(t)&&("Safari"===l.globals.BROWSER&&0===t||t===u.constants.httpStatusCodes.OK)})),o(this,"urlWithoutQueryParameters",(function(t,r){if(e.isNil(r)&&(r=!0),e.isNil(t))return null;var n=new s(t),o=n.protocol(),i=t.includes("://")?"://":":";return!e.isNil(o)&&""!==o&&u.constants.PROTOCOLS.includes(o)||(n=new s((o="http")+(i="://")+t)),t=n.hostname(),n=n.path(),(e.isNil(n)||"/"===n)&&(n=""),r?""+o+i+t+n:t+n})),o(this,"getFileNameExtension",(function(t){return e.isString(t)?""===(t=new s(t).suffix())?null:t:null})),o(this,"appendToObject",(function(t,r){if(e.isNil(t)||e.isNil(r))throw Error("invalid arguments to appendToObject");Object.keys(r).forEach((function(e){t[e]=r[e]}))})),o(this,"createCustomHTMLEvent",(function(t,r){if(!1===e.isString(t))throw Error("Event name cannot be null and has to be a string");t=new CustomEvent(t,{detail:r}),window.dispatchEvent(t)})),o(this,"getValueAtPath",(function(t,r,n){return r=e.isString(r)?r.split(/[.[\]]/g).filter(Boolean):r,e.isArray(r)||(r=[r]),r.reduce((function(t,r){return e.objectHas(t,r)?t[r]:n}),t||{})})),o(this,"setDoNotTrack",(function(t){if(t=void 0!==t&&t,!e.isBoolean(t))throw Error("Parameter to setDoNotTrack should be a boolean");try{Object.defineProperty(navigator,"doNotTrack",{value:t?"1":"0",writable:!1,configurable:!0})}catch(e){}}))}).prototype.createNewGuid=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:7&r|8).toString(16)}))},e.prototype.stringUTF16LEToByteArray=function(e){if(!1===this.isString(e))throw Error("Input string cannot be null or is not a string");for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r),o=(65280&n)>>8;t.push(255&n),t.push(o)}return t},e.prototype.arrayBufferToStringUTF16LE=function(e){if(this.isNil(e))return null;e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var t=[],r=0;r<e.byteLength;r++)t.push(e[r]);return this.byteArrayToStringUTF16LE(t)},e.prototype.downloadFileFromUrl=function(e){var t=document.createElement("iframe");t.style.display="none",t.src=e,t.width="1",t.height="1",t.frameborder="0",document.body.appendChild(t),setTimeout((function(){document.body.removeChild(t)}),5e3)},e.prototype._obfuscateData=function(e,t){if(this.isNil(e)||this.isNil(t))return null;e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t instanceof ArrayBuffer&&(t=new Uint8Array(t));for(var r=e.byteLength,n=new Uint8Array(r),o=0;o<r;o++)n[o]=e[o]^t[o%r];return n},e.prototype.getOSType=function(){var e=u.constants.os.UNKNOWN;return-1!=navigator.appVersion.toLowerCase().indexOf("win")?e=u.constants.os.WINDOWS:-1!=navigator.appVersion.toLowerCase().indexOf("mac")&&(e=u.constants.os.MAC),e},e.prototype.isWin10OS=function(){return this.getOSType()===u.constants.os.WINDOWS&&navigator.userAgent.includes("Windows NT 10.0")},e.prototype.getNextOccurenceDate=function(e){if(!this.isNil(e)){var t=new Date;return e=t.setDate(t.getDate()+e)/6e4,Math.round(e)}},e.prototype.isNil=function(e){return null==e},e.prototype.isntNil=function(e){return null!=e},e.prototype.fetch=function(e,t){return t=void 0===t?{}:t,new Promise((function(r,n){fetch(e,t).then((function(e){r(e)})).catch((function(e){n(e)}))}))},e.prototype.safeFetch=function(e,t,r){return t=void 0===t?{}:t,r=void 0===r?u.constants.DEFAULT_FETCH_TIMEOUT:r,new Promise((function(n,o){var i=setTimeout((function(){o(Error("Request timed out "+e))}),r);fetch(e,t).then((function(e){clearTimeout(i),n(e)})).catch((function(e){clearTimeout(i),o(e)}))}))},e.prototype.baseURL=function(e){return this.isNil(e)?null:new s(e).hostname()},e.prototype.pathName=function(e){return this.isNil(e)?null:new s(e).pathname()},e.prototype.urlProtocol=function(e){return this.isNil(e)||""===(e=new s(e).protocol())?null:e},e.prototype.getUrlTLD=function(e){return this.isNil(e)||""===(e=new s(e).tld())?null:e},e.prototype.getCompanyDomain=function(e,t){if(t=void 0!==t&&t,this.isNil(e))return null;var r=new s(e),n=e;return!t||r.protocol()&&""!==r.protocol()||(n=""+u.constants.HTTPS_PROTOCOL+e,r=new s(n)),e=r.hostname(),n=this.getUrlTLD(n),""===e?null:this.isntNil(n)&&0<e.indexOf(n)?(n=e.substring(0,e.lastIndexOf(n)-1).split("."))[n.length-1]:e},e.prototype.getDomain=function(e){return this.isNil(e)||""===(e=new s(e).domain())?null:e},e.prototype.isUrlAnIp=function(e){return this.isNil(e)?null:new s(e).is(u.constants.utils.IP)},e.prototype.isTopLevelWindow=function(){return"Edge"===l.globals.BROWSER?window.top.location==window.self.location:window.top==window.self},e.prototype.getActiveElement=function(){return document.activeElement},e.prototype.verifyJson=function(e,t,r,n){try{var o=i.md.sha256.create();o.update(JSON.stringify(e));var s=o.digest().toHex(),u=a.KEYUTIL.getKey(r);if(!0===a.KJUR.jws.JWS.verify(t,u,n)){var l=(0,a.b64utoutf8)(t.split(".")[1]);return a.KJUR.jws.JWS.readSafeJSONString(l).hash===s}return!1}catch(e){return!1}},e.prototype.isNewVersionUpdated=function(e,t){t=t.split("."),e=e.split(".");var r=t[1]!==e[1];return!(t[0]===e[0]&&!r)},e.prototype.isStorePageURL=function(e){return!(!this.isString(e)||!e.startsWith(u.constants.STORE_URLS[l.globals.BROWSER]))},e.prototype.upperCaseFirstLetter=function(e){return this.isString(e)?e.charAt(0).toUpperCase()+e.slice(1):e},e.prototype.setTimeout=function(e){return new Promise((function(t,r){return this.isInteger(e)?window.setTimeout(t,e):r(Error("Delay must be an integer"))}))},e.prototype.getRandomIntInRange=function(e,t){if(!this.isInteger(e)||!this.isInteger(t)||e>t||e<u.constants.RANDOM_NUMBER_LIMITS.MIN||t>u.constants.RANDOM_NUMBER_LIMITS.MAX)throw Error("Invalid min or max value");var r=new Uint32Array(1);return window.crypto.getRandomValues(r),Math.floor(r[0]/4294967296*(t-e+1))+e},e.prototype.isTrustedEvent=function(e){if(this.isNil(e))throw Error("event should not be null");return e.isTrusted},e.prototype.isExtnRunningInNSB=function(){var e=navigator.userAgentData;return!this.isNil(e)&&(e=e.brands,!this.isNil(e)&&e.some((function(e){return!!e.brand&&u.constants.NORTON_BROWSER_TYPE.some((function(t){return t.toLowerCase()===e.brand.toLowerCase()}))})))},t.utils=new e},"./source/xhr_proxy/BfwXhr.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BfwXMLHttpRequest=void 0;var n=r("./source/BfwLogger.js");e=r("./source/utils/BfwUtils.js");var o=r("./source/xhr_proxy/BfwXhrProxy.js"),i=e.utils.isntNil,s=window.XMLHttpRequest;(r=function(){this.object=new s,this.eventListner={},this.headers={},this.password=this.user=this.async=this.url=this.method=null}).prototype.open=function(e,t,r,o,s){i(this.object)?(console.log("BfwXMLHttpRequest open"),this.method=e,this.url=t,this.async=r,this.user=o,this.password=s,this.object.open(e,t,r,o,s)):n.logger.error("XMLHttpRequest object is null")},r.prototype.addEventListener=function(e,t){if(i(this.object)){console.log("BfwXMLHttpRequest addEventListener"),this.eventListner[e]=t;var r=this;this.object.addEventListener(e,(function(e){console.log("BfwXMLHttpRequest event response"),o.xhr.event(e),i(e.type)?r.eventListner[e.type](e):n.logger.warn("event has no type.Client callback not called")}))}else n.logger.error("XMLHttpRequest object is null")},r.prototype.setRequestHeader=function(e,t){i(this.object)?(console.log("BfwXMLHttpRequest setRequestHeader"),this.headers[e]=t,this.object.setRequestHeader(e,t)):n.logger.error("XMLHttpRequest object is null")},r.prototype.send=function(e){i(this.object)?(console.log("BfwXMLHttpRequest send"),o.xhr.send(this,e),this.responseType&&(this.object.responseType=this.responseType),this.object.send(e)):n.logger.error("XMLHttpRequest object is null")},r.prototype.abort=function(){i(this.object)?this.object.abort():n.logger.error("XMLHttpRequest object is invalid")},t.BfwXMLHttpRequest=r},"./source/xhr_proxy/BfwXhrProxy.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.xhr=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),i=r("./source/BfwLogger.js"),s=r("./source/utils/BfwUtils.js"),a=r("./source/xhr_proxy/BfwXhr.js"),u=s.utils.isntNil,l=window.XMLHttpRequest;(e=function(){this.eventCallback=this.sendCallback=null}).prototype.install=function(){window.XMLHttpRequest=a.BfwXMLHttpRequest},e.prototype.uninstall=function(){window.XMLHttpRequest=l},e.prototype.registerEvent=function(e){this.eventCallback=e},e.prototype.registerSend=function(e){this.sendCallback=e},e.prototype.send=function(e,t){var r=this;if(u(e)){var n={};n.method=e.method,n.url=e.url,n.async=e.async,n.user=e.user,n.password=e.password,n.headers=e.headers,u(t)&&"{}"!==t?n.body=o.util.encode64(t):n.body=null,u(this.sendCallback)?setTimeout((function(){r.sendCallback(n)}),1):i.logger.warn("Send is not registered")}else i.logger.error("Request is null")},e.prototype.event=function(e){var t=this;if(u(e)&&u(e.target)){var r={};r.status=e.target.status,s.utils.isntNil(e.target.response)?r.response=o.util.encode64(e.target.response):r.response=null,""!==e.target.responseType&&"text"!==e.target.responseType||(r.responseText=e.target.responseText);var n=e.target.getAllResponseHeaders();s.utils.isntNil(n)&&(r.responseHeader=n),r.responseURL=e.target.responseURL,r.statusText=e.target.statusText,s.utils.isntNil(this.eventCallback)?setTimeout((function(){t.eventCallback(r)}),1):i.logger.warn("Event is not registered")}else i.logger.error("event/event.target is null")},t.xhr=new e},jsrsasign:function(e){e.exports=r},"node-forge":function(t){t.exports=e},urijs:function(e){e.exports=t}},a={};o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var u={};return function(){function e(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(e=function(e){return e?n:r})(t)}var t=u;t.default=void 0;var r=function(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};if((r=e(r))&&r.has(t))return r.get(t);var n,o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)if("default"!==n&&{}.hasOwnProperty.call(t,n)){var s=i?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(o,n,s):o[n]=t[n]}return o.default=t,r&&r.set(t,o),o}(o("./source/BfwInternals.js"),!0);o.g.SymBfw=r,t.default=r}(),u.default}()},"object"==typeof r&&"object"==typeof t?t.exports=a(e("node-forge"),e("urijs"),e("jsrsasign")):"function"==typeof define&&define.amd?define(["node-forge","urijs","jsrsasign"],a):"object"==typeof r?r.Bfw=a(e("node-forge"),e("urijs"),e("jsrsasign")):s.Bfw=a(s.forge,s.URI,s.self)}).call(this||window)}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:653,jsrsasign:"jsrsasign","node-forge":"node-forge",urijs:718}],212:[function(e,t,r){var n,o;n=window,o=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=164)}([function(e,t,r){e.exports=r(122)},function(e,t){var r=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(30);function o(e,t,r,o,i,s,a){try{var u=e[s](a),l=u.value}catch(e){return void r(e)}u.done?t(l):n.resolve(l).then(o,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new n((function(n,i){var s=e.apply(t,r);function a(e){o(s,n,i,a,u,"next",e)}function u(e){o(s,n,i,a,u,"throw",e)}a(void 0)}))}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){var n=r(6),o=r(1),i=r(13),s=r(14),a=r(17),u=function(e,t,r){var l,c,d,f=e&u.F,p=e&u.G,h=e&u.S,_=e&u.P,E=e&u.B,g=e&u.W,m=p?o:o[t]||(o[t]={}),y=m.prototype,S=p?n:h?n[t]:(n[t]||{}).prototype;for(l in p&&(r=t),r)(c=!f&&S&&void 0!==S[l])&&a(m,l)||(d=c?S[l]:r[l],m[l]=p&&"function"!=typeof S[l]?r[l]:E&&c?i(d,n):g&&S[l]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):_&&"function"==typeof d?i(Function.call,d):d,_&&((m.virtual||(m.virtual={}))[l]=d,e&u.R&&y&&!y[l]&&s(y,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(79);function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),n(e,o.key,o)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(48)("wks"),o=r(34),i=r(6).Symbol,s="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=s&&i[e]||(s?i:o)("Symbol."+e))}).store=n},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(10),o=r(63),i=r(45),s=Object.defineProperty;t.f=r(11)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(8);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){e.exports=!r(15)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){e.exports=r(120)},function(e,t,r){var n=r(16);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(9),o=r(23);e.exports=r(11)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(42);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";var n=r(89)(!0);r(43)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t){e.exports={}},function(e,t,r){var n=r(46),o=r(42);e.exports=function(e){return n(o(e))}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(10),o=r(91),i=r(49),s=r(47)("IE_PROTO"),a=function(){},u=function(){var e,t=r(44)("iframe"),n=i.length;for(t.style.display="none",r(66).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[i[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(a.prototype=n(e),r=new a,a.prototype=null,r[s]=e):r=u(),void 0===t?r:o(r,t)}},function(e,t,r){var n=r(65),o=r(49);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(9).f,o=r(17),i=r(7)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){r(94);for(var n=r(6),o=r(14),i=r(20),s=r(7)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=n[l],d=c&&c.prototype;d&&!d[s]&&o(d,s,l),i[l]=i.Array}},function(e,t,r){var n=r(13),o=r(69),i=r(70),s=r(10),a=r(33),u=r(51),l={},c={};(t=e.exports=function(e,t,r,d,f){var p,h,_,E,g=f?function(){return e}:u(e),m=n(r,d,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(p=a(e.length);p>y;y++)if((E=t?m(s(h=e[y])[0],h[1]):m(e[y]))===l||E===c)return E}else for(_=g.call(e);!(h=_.next()).done;)if((E=o(_,m,h.value,t))===l||E===c)return E}).BREAK=l,t.RETURN=c},function(e,t,r){e.exports=r(88)},function(e,t,r){var n=r(135),o=r(83);function i(t){return e.exports=i=o?n:function(e){return e.__proto__||n(e)},i(t)}e.exports=i},function(e,t,r){var n=r(79);e.exports=function(e,t,r){return t in e?n(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){var n=r(41),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(26),o=r(7)("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){e.exports=r(106)},function(e,t,r){var n=r(125),o=r(60);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t,r){var n=r(84),o=r(59);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=n(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},function(e,t){},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){"use strict";var n=r(22),o=r(4),i=r(64),s=r(14),a=r(20),u=r(90),l=r(27),c=r(67),d=r(7)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,h,_,E,g){u(r,t,h);var m,y,S,T=function(e){if(!f&&e in I)return I[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},A=t+" Iterator",b="values"==_,O=!1,I=e.prototype,v=I[d]||I["@@iterator"]||_&&I[_],N=v||T(_),R=_?b?T("entries"):N:void 0,C="Array"==t&&I.entries||v;if(C&&(S=c(C.call(new e)))!==Object.prototype&&S.next&&(l(S,A,!0),n||"function"==typeof S[d]||s(S,d,p)),b&&v&&"values"!==v.name&&(O=!0,N=function(){return v.call(this)}),n&&!g||!f&&!O&&I[d]||s(I,d,N),a[t]=N,a[A]=p,_)if(m={values:b?N:T("values"),keys:E?N:T("keys"),entries:R},g)for(y in m)y in I||i(I,y,m[y]);else o(o.P+o.F*(f||O),t,m);return m}},function(e,t,r){var n=r(8),o=r(6).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,r){var n=r(8);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(26);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(48)("keys"),o=r(34);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,r){var n=r(1),o=r(6),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(22)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(35),o=r(7)("iterator"),i=r(20);e.exports=r(1).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[n(e)]}},function(e,t,r){"use strict";var n=r(16);function o(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new o(e)}},function(e,t,r){var n=r(14);e.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(34)("meta"),o=r(8),i=r(17),s=r(9).f,a=0,u=Object.isExtensible||function(){return!0},l=!r(15)((function(){return u(Object.preventExtensions({}))})),c=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},getWeak:function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},onFreeze:function(e){return l&&d.NEED&&u(e)&&!i(e,n)&&c(e),e}}},function(e,t,r){var n=r(26);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){t.f=r(7)},function(e,t,r){var n=r(6),o=r(1),i=r(22),s=r(57),a=r(9).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,r){var n=r(83);function o(t,r){return e.exports=o=n||function(e,t){return e.__proto__=t,e},o(t,r)}e.exports=o},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){e.exports=r(101)},function(e,t,r){e.exports=r(104)},function(e,t,r){e.exports=!r(11)&&!r(15)((function(){return 7!=Object.defineProperty(r(44)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){e.exports=r(14)},function(e,t,r){var n=r(17),o=r(21),i=r(92)(!1),s=r(47)("IE_PROTO");e.exports=function(e,t){var r,a=o(e),u=0,l=[];for(r in a)r!=s&&n(a,r)&&l.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~i(l,r)||l.push(r));return l}},function(e,t,r){var n=r(6).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(17),o=r(18),i=r(47)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(10);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){var n=r(20),o=r(7)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t,r){var n=r(10),o=r(16),i=r(7)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||null==(r=n(s)[i])?t:o(r)}},function(e,t,r){var n,o,i,s=r(13),a=r(73),u=r(66),l=r(44),c=r(6),d=c.process,f=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,_=c.Dispatch,E=0,g={},m=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},y=function(e){m.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++E]=function(){a("function"==typeof e?e:Function(e),t)},n(E),E},p=function(e){delete g[e]},"process"==r(26)(d)?n=function(e){d.nextTick(s(m,e,1))}:_&&_.now?n=function(e){_.now(s(m,e,1))}:h?(i=(o=new h).port2,o.port1.onmessage=y,n=s(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):n="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(s(m,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(10),o=r(8),i=r(52);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(6),o=r(1),i=r(9),s=r(11),a=r(7)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];s&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(7)("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],s=i[n]();s.next=function(){return{done:r=!0}},i[n]=function(){return s},e(i)}catch(e){}return r}},function(e,t,r){var n=r(8);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){e.exports=r(123)},function(e,t,r){var n=r(65),o=r(49).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,r){var n=r(36),o=r(23),i=r(21),s=r(45),a=r(17),u=r(63),l=Object.getOwnPropertyDescriptor;t.f=r(11)?l:function(e,t){if(e=i(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(a(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(4),o=r(1),i=r(15);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*i((function(){r(1)})),"Object",s)}},function(e,t,r){e.exports=r(138)},function(e,t,r){e.exports=r(141)},function(e,t,r){var n=r(84),o=r(37),i=r(31),s=r(59),a=r(143),u=r(144);function l(t){var r="function"==typeof o?new o:void 0;return e.exports=l=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return u(e,arguments,i(this).constructor)}return t.prototype=n(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s(t,e)},l(t)}e.exports=l},function(e,t,r){var n=r(149),o=r(153),i=r(161);e.exports=function(e){return n(e)||o(e)||i()}},function(e,t,r){e.exports=r(162)},function(e,t,r){r(40),r(19),r(28),r(96),r(99),r(100),e.exports=r(1).Promise},function(e,t,r){var n=r(41),o=r(42);e.exports=function(e){return function(t,r){var i,s,a=String(o(t)),u=n(r),l=a.length;return u<0||u>=l?e?"":void 0:(i=a.charCodeAt(u))<55296||i>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):s-56320+(i-55296<<10)+65536}}},function(e,t,r){"use strict";var n=r(24),o=r(23),i=r(27),s={};r(14)(s,r(7)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(s,{next:o(1,r)}),i(e,t+" Iterator")}},function(e,t,r){var n=r(9),o=r(10),i=r(25);e.exports=r(11)?Object.defineProperties:function(e,t){o(e);for(var r,s=i(t),a=s.length,u=0;a>u;)n.f(e,r=s[u++],t[r]);return e}},function(e,t,r){var n=r(21),o=r(33),i=r(93);e.exports=function(e){return function(t,r,s){var a,u=n(t),l=o(u.length),c=i(s,l);if(e&&r!=r){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(41),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=n(e))<0?o(e+t,0):i(e,t)}},function(e,t,r){"use strict";var n=r(95),o=r(68),i=r(20),s=r(21);e.exports=r(43)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t,r){"use strict";var n,o,i,s,a=r(22),u=r(6),l=r(13),c=r(35),d=r(4),f=r(8),p=r(16),h=r(50),_=r(29),E=r(71),g=r(72).set,m=r(97)(),y=r(52),S=r(74),T=r(98),A=r(75),b=u.TypeError,O=u.process,I=O&&O.versions,v=I&&I.v8||"",N=u.Promise,R="process"==c(O),C=function(){},D=o=y.f,w=!!function(){try{var e=N.resolve(1),t=(e.constructor={})[r(7)("species")]=function(e){e(C,C)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(C)instanceof t&&0!==v.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(e){}}(),L=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var r=e._c;m((function(){for(var n=e._v,o=1==e._s,i=0,s=function(t){var r,i,s,a=o?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{a?(o||(2==e._h&&j(e),e._h=1),!0===a?r=n:(c&&c.enter(),r=a(n),c&&(c.exit(),s=!0)),r===t.promise?l(b("Promise-chain cycle")):(i=L(r))?i.call(r,u,l):u(r)):l(n)}catch(e){c&&!s&&c.exit(),l(e)}};r.length>i;)s(r[i++]);e._c=[],e._n=!1,t&&!e._h&&M(e)}))}},M=function(e){g.call(u,(function(){var t,r,n,o=e._v,i=U(e);if(i&&(t=S((function(){R?O.emit("unhandledRejection",o,e):(r=u.onunhandledrejection)?r({promise:e,reason:o}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",o)})),e._h=R||U(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},U=function(e){return 1!==e._h&&0===(e._a||e._c).length},j=function(e){g.call(u,(function(){var t;R?O.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},k=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},x=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw b("Promise can't be resolved itself");(t=L(e))?m((function(){var n={_w:r,_d:!1};try{t.call(e,l(x,n,1),l(k,n,1))}catch(e){k.call(n,e)}})):(r._v=e,r._s=1,P(r,!1))}catch(e){k.call({_w:r,_d:!1},e)}}};w||(N=function(e){h(this,N,"Promise","_h"),p(e),n.call(this);try{e(l(x,this,1),l(k,this,1))}catch(e){k.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(53)(N.prototype,{then:function(e,t){var r=D(E(this,N));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=R?O.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&P(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=l(x,e,1),this.reject=l(k,e,1)},y.f=D=function(e){return e===N||e===s?new i(e):o(e)}),d(d.G+d.W+d.F*!w,{Promise:N}),r(27)(N,"Promise"),r(76)("Promise"),s=r(1).Promise,d(d.S+d.F*!w,"Promise",{reject:function(e){var t=D(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!w),"Promise",{resolve:function(e){return A(a&&this===s?N:this,e)}}),d(d.S+d.F*!(w&&r(77)((function(e){N.all(e).catch(C)}))),"Promise",{all:function(e){var t=this,r=D(t),n=r.resolve,o=r.reject,i=S((function(){var r=[],i=0,s=1;_(e,!1,(function(e){var a=i++,u=!1;r.push(void 0),s++,t.resolve(e).then((function(e){u||(u=!0,r[a]=e,--s||n(r))}),o)})),--s||n(r)}));return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=D(t),n=r.reject,o=S((function(){_(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return o.e&&n(o.v),r.promise}})},function(e,t,r){var n=r(6),o=r(72).set,i=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,u="process"==r(26)(s);e.exports=function(){var e,t,r,l=function(){var n,o;for(u&&(n=s.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){s.nextTick(l)};else if(!i||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);r=function(){c.then(l)}}else r=function(){o.call(n,l)};else{var d=!0,f=document.createTextNode("");new i(l).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){var n=r(6).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){"use strict";var n=r(4),o=r(1),i=r(6),s=r(71),a=r(75);n(n.P+n.R,"Promise",{finally:function(e){var t=s(this,o.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return a(t,e()).then((function(){return r}))}:e,r?function(r){return a(t,e()).then((function(){throw r}))}:e)}})},function(e,t,r){"use strict";var n=r(4),o=r(52),i=r(74);n(n.S,"Promise",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){r(102),e.exports=r(1).Object.assign},function(e,t,r){var n=r(4);n(n.S+n.F,"Object",{assign:r(103)})},function(e,t,r){"use strict";var n=r(11),o=r(25),i=r(54),s=r(36),a=r(18),u=r(46),l=Object.assign;e.exports=!l||r(15)((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=n}))?function(e,t){for(var r=a(e),l=arguments.length,c=1,d=i.f,f=s.f;l>c;)for(var p,h=u(arguments[c++]),_=d?o(h).concat(d(h)):o(h),E=_.length,g=0;E>g;)p=_[g++],n&&!f.call(h,p)||(r[p]=h[p]);return r}:l},function(e,t,r){r(28),r(19),e.exports=r(105)},function(e,t,r){var n=r(10),o=r(51);e.exports=r(1).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){r(40),r(19),r(28),r(107),r(113),r(116),r(118),e.exports=r(1).Map},function(e,t,r){"use strict";var n=r(108),o=r(78);e.exports=r(109)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(9).f,o=r(24),i=r(53),s=r(13),a=r(50),u=r(29),l=r(43),c=r(68),d=r(76),f=r(11),p=r(55).fastKey,h=r(78),_=f?"_s":"size",E=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var c=e((function(e,n){a(e,c,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[_]=0,null!=n&&u(n,r,e[l],e)}));return i(c.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var r=h(this,t),n=E(r,e);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[_]--}return!!n},forEach:function(e){h(this,t);for(var r,n=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!E(h(this,t),e)}}),f&&n(c.prototype,"size",{get:function(){return h(this,t)[_]}}),c},def:function(e,t,r){var n,o,i=E(e,t);return i?i.v=r:(e._l=i={i:o=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[_]++,"F"!==o&&(e._i[o]=i)),e},getEntry:E,setStrong:function(e,t,r){l(e,t,(function(e,r){this._t=h(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))}),r?"entries":"values",!r,!0),d(t)}}},function(e,t,r){"use strict";var n=r(6),o=r(4),i=r(55),s=r(15),a=r(14),u=r(53),l=r(29),c=r(50),d=r(8),f=r(27),p=r(9).f,h=r(110)(0),_=r(11);e.exports=function(e,t,r,E,g,m){var y=n[e],S=y,T=g?"set":"add",A=S&&S.prototype,b={};return _&&"function"==typeof S&&(m||A.forEach&&!s((function(){(new S).entries().next()})))?(S=t((function(t,r){c(t,S,e,"_c"),t._c=new y,null!=r&&l(r,g,t[T],t)})),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;e in A&&(!m||"clear"!=e)&&a(S.prototype,e,(function(r,n){if(c(this,S,e),!t&&m&&!d(r))return"get"==e&&void 0;var o=this._c[e](0===r?0:r,n);return t?this:o}))})),m||p(S.prototype,"size",{get:function(){return this._c.size}})):(S=E.getConstructor(t,e,g,T),u(S.prototype,r),i.NEED=!0),f(S,e),b[e]=S,o(o.G+o.W+o.F,b),m||E.setStrong(S,e,g),S}},function(e,t,r){var n=r(13),o=r(46),i=r(18),s=r(33),a=r(111);e.exports=function(e,t){var r=1==e,u=2==e,l=3==e,c=4==e,d=6==e,f=5==e||d,p=t||a;return function(t,a,h){for(var _,E,g=i(t),m=o(g),y=n(a,h,3),S=s(m.length),T=0,A=r?p(t,S):u?p(t,0):void 0;S>T;T++)if((f||T in m)&&(E=y(_=m[T],T,g),e))if(r)A[T]=E;else if(E)switch(e){case 3:return!0;case 5:return _;case 6:return T;case 2:A.push(_)}else if(c)return!1;return d?-1:l||c?c:A}}},function(e,t,r){var n=r(112);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(8),o=r(56),i=r(7)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(4);n(n.P+n.R,"Map",{toJSON:r(114)("Map")})},function(e,t,r){var n=r(35),o=r(115);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,r){var n=r(29);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){r(117)("Map")},function(e,t,r){"use strict";var n=r(4);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){r(119)("Map")},function(e,t,r){"use strict";var n=r(4),o=r(16),i=r(13),s=r(29);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,a,u=arguments[1];return o(this),(t=void 0!==u)&&o(u),null==e?new this:(r=[],t?(n=0,a=i(u,arguments[2],2),s(e,!1,(function(e){r.push(a(e,n++))}))):s(e,!1,r.push,r),new this(r))}})}},function(e,t,r){r(121),e.exports=r(1).Date.now},function(e,t,r){var n=r(4);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,i=Object.create(o.prototype),s=new N(n||[]);return i._invoke=function(e,t,r){var n=c;return function(o,i){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=O(s,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===c)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var u=l(e,t,r);if("normal"===u.type){if(n=r.done?p:d,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(e,r,s),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c="suspendedStart",d="suspendedYield",f="executing",p="completed",h={};function _(){}function E(){}function g(){}var m={};m[i]=function(){return this};var y=Object.getPrototypeOf,S=y&&y(y(R([])));S&&S!==r&&n.call(S,i)&&(m=S);var T=g.prototype=_.prototype=Object.create(m);function A(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function b(e){var t;this._invoke=function(r,o){function i(){return new Promise((function(t,i){!function t(r,o,i,s){var a=l(e[r],e,o);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,i,s)}),(function(e){t("throw",e,i,s)})):Promise.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return t("throw",e,i,s)}))}s(a.arg)}(r,o,t,i)}))}return t=t?t.then(i,i):i()}}function O(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:C}}function C(){return{value:t,done:!0}}return E.prototype=T.constructor=g,g.constructor=E,g[a]=E.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},A(b.prototype),b.prototype[s]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,o){var i=new b(u(t,r,n,o));return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(T),T[a]="Generator",T[i]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(v),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;v(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){r(124);var n=r(1).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(4);n(n.S+n.F*!r(11),"Object",{defineProperty:r(9).f})},function(e,t,r){var n=r(126),o=r(128);function i(e){return(i="function"==typeof o&&"symbol"==typeof n?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function s(t){return"function"==typeof o&&"symbol"===i(n)?e.exports=s=function(e){return i(e)}:e.exports=s=function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":i(e)},s(t)}e.exports=s},function(e,t,r){e.exports=r(127)},function(e,t,r){r(19),r(28),e.exports=r(57).f("iterator")},function(e,t,r){e.exports=r(129)},function(e,t,r){r(130),r(40),r(133),r(134),e.exports=r(1).Symbol},function(e,t,r){"use strict";var n=r(6),o=r(17),i=r(11),s=r(4),a=r(64),u=r(55).KEY,l=r(15),c=r(48),d=r(27),f=r(34),p=r(7),h=r(57),_=r(58),E=r(131),g=r(56),m=r(10),y=r(8),S=r(18),T=r(21),A=r(45),b=r(23),O=r(24),I=r(132),v=r(81),N=r(54),R=r(9),C=r(25),D=v.f,w=R.f,L=I.f,P=n.Symbol,M=n.JSON,U=M&&M.stringify,j=p("_hidden"),k=p("toPrimitive"),x={}.propertyIsEnumerable,F=c("symbol-registry"),B=c("symbols"),G=c("op-symbols"),V=Object.prototype,H="function"==typeof P&&!!N.f,W=n.QObject,Y=!W||!W.prototype||!W.prototype.findChild,K=i&&l((function(){return 7!=O(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=D(V,t);n&&delete V[t],w(e,t,r),n&&e!==V&&w(V,t,n)}:w,z=function(e){var t=B[e]=O(P.prototype);return t._k=e,t},q=H&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},$=function(e,t,r){return e===V&&$(G,t,r),m(e),t=A(t,!0),m(r),o(B,t)?(r.enumerable?(o(e,j)&&e[j][t]&&(e[j][t]=!1),r=O(r,{enumerable:b(0,!1)})):(o(e,j)||w(e,j,b(1,{})),e[j][t]=!0),K(e,t,r)):w(e,t,r)},X=function(e,t){m(e);for(var r,n=E(t=T(t)),o=0,i=n.length;i>o;)$(e,r=n[o++],t[r]);return e},J=function(e){var t=x.call(this,e=A(e,!0));return!(this===V&&o(B,e)&&!o(G,e))&&(!(t||!o(this,e)||!o(B,e)||o(this,j)&&this[j][e])||t)},Z=function(e,t){if(e=T(e),t=A(t,!0),e!==V||!o(B,t)||o(G,t)){var r=D(e,t);return!r||!o(B,t)||o(e,j)&&e[j][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=L(T(e)),n=[],i=0;r.length>i;)o(B,t=r[i++])||t==j||t==u||n.push(t);return n},ee=function(e){for(var t,r=e===V,n=L(r?G:T(e)),i=[],s=0;n.length>s;)!o(B,t=n[s++])||r&&!o(V,t)||i.push(B[t]);return i};H||(a((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===V&&t.call(G,r),o(this,j)&&o(this[j],e)&&(this[j][e]=!1),K(this,e,b(1,r))};return i&&Y&&K(V,e,{configurable:!0,set:t}),z(e)}).prototype,"toString",(function(){return this._k})),v.f=Z,R.f=$,r(80).f=I.f=Q,r(36).f=J,N.f=ee,i&&!r(22)&&a(V,"propertyIsEnumerable",J,!0),h.f=function(e){return z(p(e))}),s(s.G+s.W+s.F*!H,{Symbol:P});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var ne=C(p.store),oe=0;ne.length>oe;)_(ne[oe++]);s(s.S+s.F*!H,"Symbol",{for:function(e){return o(F,e+="")?F[e]:F[e]=P(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s(s.S+s.F*!H,"Object",{create:function(e,t){return void 0===t?O(e):X(O(e),t)},defineProperty:$,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var ie=l((function(){N.f(1)}));s(s.S+s.F*ie,"Object",{getOwnPropertySymbols:function(e){return N.f(S(e))}}),M&&s(s.S+s.F*(!H||l((function(){var e=P();return"[null]"!=U([e])||"{}"!=U({a:e})||"{}"!=U(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(y(t)||void 0!==e)&&!q(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!q(t))return t}),n[1]=t,U.apply(M,n)}}),P.prototype[k]||r(14)(P.prototype,k,P.prototype.valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,r){var n=r(25),o=r(54),i=r(36);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var s,a=r(e),u=i.f,l=0;a.length>l;)u.call(e,s=a[l++])&&t.push(s);return t}},function(e,t,r){var n=r(21),o=r(80).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return s.slice()}}(e):o(n(e))}},function(e,t,r){r(58)("asyncIterator")},function(e,t,r){r(58)("observable")},function(e,t,r){e.exports=r(136)},function(e,t,r){r(137),e.exports=r(1).Object.getPrototypeOf},function(e,t,r){var n=r(18),o=r(67);r(82)("getPrototypeOf",(function(){return function(e){return o(n(e))}}))},function(e,t,r){r(139),e.exports=r(1).Object.setPrototypeOf},function(e,t,r){var n=r(4);n(n.S,"Object",{setPrototypeOf:r(140).set})},function(e,t,r){var n=r(8),o=r(10),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(13)(Function.call,r(81).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},function(e,t,r){r(142);var n=r(1).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(4);n(n.S,"Object",{create:r(24)})},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,r){var n=r(145),o=r(59);function i(t,r,s){return function(){if("undefined"==typeof Reflect||!n)return!1;if(n.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(n(Date,[],(function(){}))),!0}catch(e){return!1}}()?e.exports=i=n:e.exports=i=function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&o(i,r.prototype),i},i.apply(null,arguments)}e.exports=i},function(e,t,r){e.exports=r(146)},function(e,t,r){r(147),e.exports=r(1).Reflect.construct},function(e,t,r){var n=r(4),o=r(24),i=r(16),s=r(10),a=r(8),u=r(15),l=r(148),c=(r(6).Reflect||{}).construct,d=u((function(){function e(){}return!(c((function(){}),[],e)instanceof e)})),f=!u((function(){c((function(){}))}));n(n.S+n.F*(d||f),"Reflect",{construct:function(e,t){i(e),s(t);var r=arguments.length<3?e:i(arguments[2]);if(f&&!d)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(l.apply(e,n))}var u=r.prototype,p=o(a(u)?u:Object.prototype),h=Function.apply.call(e,p,t);return a(h)?h:p}})},function(e,t,r){"use strict";var n=r(16),o=r(8),i=r(73),s=[].slice,a={},u=function(e,t,r){if(!(t in a)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";a[t]=Function("F,a","return new F("+n.join(",")+")")}return a[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=s.call(arguments,1),a=function(){var n=r.concat(s.call(arguments));return this instanceof a?u(t,n.length,n):i(t,n,e)};return o(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t,r){var n=r(150);e.exports=function(e){if(n(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},function(e,t,r){e.exports=r(151)},function(e,t,r){r(152),e.exports=r(1).Array.isArray},function(e,t,r){var n=r(4);n(n.S,"Array",{isArray:r(56)})},function(e,t,r){var n=r(154),o=r(158);e.exports=function(e){if(o(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return n(e)}},function(e,t,r){e.exports=r(155)},function(e,t,r){r(19),r(156),e.exports=r(1).Array.from},function(e,t,r){"use strict";var n=r(13),o=r(4),i=r(18),s=r(69),a=r(70),u=r(33),l=r(157),c=r(51);o(o.S+o.F*!r(77)((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,o,d,f=i(e),p="function"==typeof this?this:Array,h=arguments.length,_=h>1?arguments[1]:void 0,E=void 0!==_,g=0,m=c(f);if(E&&(_=n(_,h>2?arguments[2]:void 0,2)),null==m||p==Array&&a(m))for(r=new p(t=u(f.length));t>g;g++)l(r,g,E?_(f[g],g):f[g]);else for(d=m.call(f),r=new p;!(o=d.next()).done;g++)l(r,g,E?s(d,_,[o.value,g],!0):o.value);return r.length=g,r}})},function(e,t,r){"use strict";var n=r(9),o=r(23);e.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},function(e,t,r){e.exports=r(159)},function(e,t,r){r(28),r(19),e.exports=r(160)},function(e,t,r){var n=r(35),o=r(7)("iterator"),i=r(20);e.exports=r(1).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(n(t))}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,r){r(163),e.exports=r(1).Object.keys},function(e,t,r){var n=r(18),o=r(25);r(82)("keys",(function(){return function(e){return o(n(e))}}))},function(e,t,r){"use strict";r.r(t);var n=r(30),o=r.n(n),i=r(61),s=r.n(i),a=r(62),u=r.n(a),l=r(37),c=r.n(l),d=r(12),f=r.n(d),p=r(0),h=r.n(p),_=r(2),E=r.n(_),g=r(3),m=r.n(g),y=r(5),S=r.n(y),T=r(38),A=r.n(T),b=r(31),O=r.n(b),I=r(60),v=r.n(I),N=r(39),R=r.n(N),C=r(85),D=function(e){function t(e){var r,n=e.message,o=e.code;return m()(this,t),r=A()(this,O()(t).call(this,n)),Error.captureStackTrace&&Error.captureStackTrace(v()(r),t),r.code=o||"missing_error_code",r}return R()(t,e),t}(r.n(C)()(Error)),w={API_SERVER_ERROR:{code:"api_server_error",message:"API server error."},ENTRY_NOT_FOUND_IN_CACHE:{code:"entry_not_found_in_cache",message:"Entry not found in cache."},STORAGE_LOAD_FAILED:{code:"storage_load_failed",message:"Failed to load settings container."},INVALID_ARGUMENT:{code:"invalid_argument",message:"Argument provided to the function is not valid."},CLIENT_NOT_DEFINED:{code:"client_not_defined",message:"CompromisedPasswordClient is not defined."},SCHEDULER_INSTANCE_ERROR:{code:"scheduler_instance_arguments",message:"Scheduler is missing required arguments."},SCHEDULER_LOAD_CONTAINER_FAILED:{code:"scheduler_load_container_failed",message:"Scheduler load settings container has failed."},SCHEDULER_INVALID_TIMEOUT:{code:"scheduler_invalid_timeout",message:"Invalid timeout value to calculate remaining time to execute scheduler job"},MISSING_REQUIRED_POLL_FREQUENCY_IN_MINS:{code:"missing_scheduler_frequency",message:"Scheduler cannot be instantied without providing POLL_FREQUENCY_IN_MINS"},INVALID_LOGIN_ACCOUNTS:{code:"invalid_login_accounts",message:"Invalid login accounts passed."},NO_LOGIN_ACCOUNT:{code:"no_login_account",message:"No login accounts passed."},ACCOUNT_WITH_INVALID_PROPERTY_PASSWORD:{code:"account_with_invalid_property_password",message:"Account has invalid property `password`."},ACCOUNT_WITH_INVALID_PROPERTY_GUID:{code:"account_with_invalid_property_guid",message:"Account has invalid property `guid`."},TELEMETRY_PAYLOAD_SHOULD_BE_STRING:{code:"telemetry_payload",message:"Telemetry payload should be string."}},L=SymBfw,P=L.utils,M=P.isNil,U=P.isInteger,j=L.logger;function k(e){if(M(e)||!U(e))throw j.error(new D(w.INVALID_ARGUMENT)),new D(w.INVALID_ARGUMENT);return 6e4*e}var x=SymBfw.logger;function F(e){throw x.error(e),e}var B=SymBfw.utils.isNil;function G(e,t){return new o.a((function(r,n){(B(e)||B(t))&&n(new D(w.INVALID_ARGUMENT)),SymBfw.settings.loadSettingsContainer(e,t,(function(e,t,o){o?n(new Error(o)):!e||B(t)?n(new D(w.STORAGE_LOAD_FAILED)):r(t)}))}))}var V=SymBfw.utils,H=V.isInteger,W=V.isFunction,Y=function(){function e(t,r){m()(this,e),H(t)&&W(r)||F(new D(w.SCHEDULER_INSTANCE_ERROR)),this._frequencyInMins=t,this._handleSchedulerTimeout=r,this._clearSchedulerTimeout=null,this.schedulerContainer=null}var t,r,n;return S()(e,[{key:"init",value:(n=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("83BCB9F9-B495-47F4-ABE4-BA02281530B4",!0);case 2:this.schedulerContainer=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_getDefaultFrequencyInMillis",value:function(){return k(this._frequencyInMins)}},{key:"fetchLastExecTime",value:function(){return this.schedulerContainer.getObject("CAA0391F-20B8-43B2-A6A8-977D84353838")}},{key:"_getRemainingTimeToExecInMillis",value:function(){var e=f()(),t=this.fetchLastExecTime(),r=this._getDefaultFrequencyInMillis();if(!H(t))return 0;(!H(r)||t<0||t>e)&&F(new D(w.SCHEDULER_INVALID_TIMEOUT));var n=r-(e-t);return n<=0?0:n}},{key:"_setSchedulerTimeout",value:function(){var e=this._getRemainingTimeToExecInMillis();if(0===e)return this._handleSchedulerTimeout(),void this._stopSchedulerTimeout();this._clearSchedulerTimeout=setTimeout(this._handleSchedulerTimeout,e)}},{key:"_stopSchedulerTimeout",value:function(){clearTimeout(this._clearSchedulerTimeout),this._clearSchedulerTimeout=null}},{key:"start",value:(r=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._setSchedulerTimeout();case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"stop",value:(t=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._stopSchedulerTimeout();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function K(e){return KJUR.crypto.Util.sha1(e)}var z="server",q="scheduler",$="cache_storage_clearing",X="manual_trigger",J="info",Z="cancelled",Q="failure",ee="accounts_processing_time",te="missed_scheduler_execution",re="clear_cache",ne={url:"https://api.pwnedpasswords.com/range"},oe=r(86),ie=r.n(oe),se=r(87),ae=r.n(se),ue=SymBfw,le=ue.utils,ce=le.isNil,de=le.isString,fe=le.isObject,pe=le.isArray,he=ue.logger,_e=new(function(){function e(){m()(this,e),this.cachedRecords=null}var t;return S()(e,[{key:"init",value:(t=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("A2AF891A-FE1D-40C1-AB87-C625E37D2579",!0);case 2:this.cachedRecords=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"get",value:function(e){de(e)||F(new D(w.INVALID_ARGUMENT));var t=this.cachedRecords.getObject(e);return ce(t)?{guid:e,timestamp:null,error:w.ENTRY_NOT_FOUND_IN_CACHE}:t}},{key:"set",value:function(e,t){de(e)&&fe(t)||F(new D(w.INVALID_ARGUMENT)),this.cachedRecords.setObject(e,t)}},{key:"remove",value:function(e){de(e)||F(new D(w.INVALID_ARGUMENT)),this.cachedRecords.removeObject(e)}},{key:"getAll",value:function(){return this.cachedRecords.getCollection()}},{key:"removeAll",value:function(){try{SymBfw.settings.resetSettingsCollection("A2AF891A-FE1D-40C1-AB87-C625E37D2579",(function(e,t){if(!e)throw new Error(t)}))}catch(e){F(new Error(e))}}},{key:"pruneCache",value:function(e){var t=this;pe(e)||F(new D(w.INVALID_ARGUMENT));var r=[],n=this.getAll();ae()(n).forEach((function(n){e.includes(n)||(t.cachedRecords.removeObject(n),r=[].concat(ie()(r),[n]))})),he.info("".concat(r.length," guids was removed from the cacheStorage: [").concat(r,"]"))}}]),e}()),Ee=function(){function e(){if(m()(this,e),this.constructor===e)throw new Error("Abstract classes cannot be instantiated")}var t;return S()(e,[{key:"init",value:function(e){throw new Error("API not implemented")}},{key:"getLeakedDetails",value:(t=E()(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("API not implemented");case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),ge=r(32),me=r.n(ge),ye=SymBfw,Se=ye.utils.isString,Te=ye.logger,Ae=new(function(){function e(){m()(this,e),this.parameters={CATEGORY:SymBfw.telemetryConstants.parameters.CATEGORY,ACTION:SymBfw.telemetryConstants.parameters.ACTION,PAYLOAD:SymBfw.telemetryConstants.parameters.LABEL,HIT_TYPE:SymBfw.telemetryConstants.parameters.HIT_TYPE}}return S()(e,[{key:"send",value:function(e,t,r){var n;if(!Se(e)||!Se(t))throw Te.error(new D(w.INVALID_ARGUMENT)),new D(w.INVALID_ARGUMENT);if(!Se(r))throw Te.error(w.TELEMETRY_PAYLOAD_SHOULD_BE_STRING),new D(w.TELEMETRY_PAYLOAD_SHOULD_BE_STRING);var o=(n={},me()(n,this.parameters.CATEGORY,e),me()(n,this.parameters.ACTION,t),me()(n,this.parameters.PAYLOAD,r),me()(n,this.parameters.HIT_TYPE,SymBfw.telemetryConstants.HIT_TYPE.EVENT),n);return(SymBfw.telemetry||SymBfw.telemetryProxy).send(o)}},{key:"sendSchedulerMissedTelemetry",value:function(e,t,r){var n=(e-t)/k(r)-1;n>0&&this.send(q,te,"".concat(Math.floor(n)))}}]),e}()),be=SymBfw,Oe=be.utils.objectHas,Ie=be.logger,ve=function(e){function t(){var e;return m()(this,t),(e=A()(this,O()(t).call(this)))._url="",e}var r,n;return R()(t,e),S()(t,[{key:"init",value:function(e){Oe(e,"url")||F(new D(w.INVALID_ARGUMENT));var t=e.url;this._url=t}},{key:"_normalizeResponse",value:function(e,t,r){var n={guid:e,timestamp:f()()},o=r.split("\n").find((function(e){return e.includes(t)}));if(o){var i=Number(o.split(":")[1]);n.data={leakCount:i,isLeaked:i>0}}else n.data={leakCount:0,isLeaked:!1};return n}},{key:"_handleError",value:function(e,t){var r=t.code,n=t.message;return{guid:e,timestamp:f()(),error:{code:r,message:n}}}},{key:"_queryServer",value:(n=E()(h.a.mark((function e(t,r){var n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.cacheBuster,e.next=3,fetch("".concat(this._url,"/").concat(t,"?").concat(n));case 3:return(o=e.sent).ok||(Ae.send(z,Q,"".concat(o.status)),F(new D(w.API_SERVER_ERROR))),e.abrupt("return",o.text());case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"getLeakedDetails",value:(r=E()(h.a.mark((function e(t,r){var n,o,i,s,a,u,l,c,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oe(r,"cacheBuster")||F(new D(w.INVALID_ARGUMENT)),Oe(t,"guid")){e.next=4;break}return n=new D(w.ACCOUNT_WITH_INVALID_PROPERTY_GUID),e.abrupt("return",this._handleError(t.guid,n));case 4:if(t.password){e.next=7;break}return o=new D(w.ACCOUNT_WITH_INVALID_PROPERTY_PASSWORD),e.abrupt("return",this._handleError(t.guid,o));case 7:return s=t.guid,a=t.password,u=K(a).toUpperCase(),l=u.substring(0,5),c=u.substring(5),e.prev=11,e.next=14,this._queryServer(l,r);case 14:d=e.sent,i=this._normalizeResponse(s,c,d),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(11),i=this._handleError(s,e.t0),Ie.error(e.t0);case 22:return e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,this,[[11,18]])}))),function(e,t){return r.apply(this,arguments)})}]),t}(Ee),Ne=new(function(){function e(){m()(this,e),this._requestManagerInstance=null}return S()(e,[{key:"getInstance",value:function(e){return this._requestManagerInstance=new ve,this._requestManagerInstance.init(e),this._requestManagerInstance}}]),e}()),Re=SymBfw,Ce=Re.utils,De=Re.logger,we=Re.sessionSettings,Le=Ce.isNil,Pe=new(function(){function e(){m()(this,e),this.settingsContainer=null}return S()(e,[{key:"initialize",value:function(e){var t=this;if(this.settingsContainer=null,!Ce.isFunction(e))throw new Error("callback must be a function");we.loadSettingsContainer("CPSessionSettingsContainer",!0,(function(r,n){if(!1===r||Le(n))return De.error("Failed to load CompromisedPassword Session Settings Container"),void e(!1);t.settingsContainer=n,e(!0)}))}},{key:"get",value:function(e){if(!Le(this.settingsContainer))return this.settingsContainer.getObject(e);De.error("settings not initialized")}},{key:"set",value:function(e,t){Le(this.settingsContainer)?De.error("settings not initialized"):this.settingsContainer.setObject(e,t)}}]),e}()),Me=SymBfw,Ue=Me.logger,je=Me.utils,ke=je.isNil,xe=je.isBoolean,Fe=je.isFunction,Be=je.isArray,Ge=je.isInteger,Ve={SCHEDULER_STARTED:"[CompromisedPassword]: Scheduler started and called onSchedulerStarted method",SCHEDULER_FINISHED:"[CompromisedPassword]: Scheduler finished and called onSchedulerCompleted method with results payload",SCHEDULER_FINISHED_WITH_ERROR:"[CompromisedPassword]: Scheduler had an error and called onSchedulerCompleted method with error payload"},He=Ve.SCHEDULER_STARTED,We=Ve.SCHEDULER_FINISHED,Ye=Ve.SCHEDULER_FINISHED_WITH_ERROR,Ke=new(function(){function e(){m()(this,e),this._compromisedPasswordClient=null,this._config=null,this._cacheStorage=null,this._requestManager=null,this._scheduler=null}var t,r,n,i,a,l,d,p;return S()(e,[{key:"init",value:(p=E()(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke(t)&&F(new D(w.CLIENT_NOT_DEFINED)),this._compromisedPasswordClient=t,this._config=this._compromisedPasswordClient.getConfig(),!ke(this._config)&&Ge(this._config.POLL_FREQUENCY_IN_MINS)||F(new D(w.MISSING_REQUIRED_POLL_FREQUENCY_IN_MINS)),this._cacheStorage=_e,this.initCompromisedPasswordSDKSessionSettings(),this._requestManager=Ne.getInstance(ne),this._scheduler=new Y(this._config.POLL_FREQUENCY_IN_MINS,this._handleSchedulerTimeout.bind(this)),e.next=10,this._scheduler.init();case 10:return e.next=12,this._cacheStorage.init();case 12:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"_getAllLoginAccounts",value:(d=E()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._compromisedPasswordClient.getAllLoginAccounts();case 2:return t=e.sent,Be(t)||F(new D(w.INVALID_LOGIN_ACCOUNTS)),t.length||F(new D(w.NO_LOGIN_ACCOUNT)),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"_pruneCachedAccounts",value:function(e){var t=e.map((function(e){return e.guid}));this._cacheStorage.pruneCache(t)}},{key:"_handleSchedulerTimeout",value:(l=E()(h.a.mark((function e(){var t,r,n,o,i,a,l,d,p,_,E,g,m,y,S,T,A,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f()(),r=new c.a,e.prev=2,this._compromisedPasswordClient.onSchedulerStarted(),Ue.info(He),e.next=7,this._getAllLoginAccounts();case 7:n=e.sent,this._pruneCachedAccounts(n),o=[],i={cacheBuster:t},a=0,l=!0,d=!1,p=void 0,e.prev=15,_=u()(n);case 17:if(l=(E=_.next()).done){e.next=41;break}if(g=E.value,m=g.password,y=K(m),S=r.get(y),T=void 0,!S){e.next=27;break}T=s()({},S,{guid:g.guid}),e.next=35;break;case 27:return A=f()(),e.next=30,this._requestManager.getLeakedDetails(g,i);case 30:T=e.sent,b=f()(),r.set(y,T),a+=b-A;case 35:o.push(T),this._cacheStorage.set(T.guid,T),this._compromisedPasswordClient.handleCompromisedPasswordResult(T);case 38:l=!0,e.next=17;break;case 41:e.next=47;break;case 43:e.prev=43,e.t0=e.catch(15),d=!0,p=e.t0;case 47:e.prev=47,e.prev=48,l||null==_.return||_.return();case 50:if(e.prev=50,!d){e.next=53;break}throw p;case 53:return e.finish(50);case 54:return e.finish(47);case 55:r.clear(),this._compromisedPasswordClient.onSchedulerCompleted(o),Ue.info(We),Ae.send(q,ee,"".concat(a)),e.next=67;break;case 61:e.prev=61,e.t1=e.catch(2),Ue.error(e.t1),r.clear(),this._compromisedPasswordClient.onSchedulerCompleted(e.t1),Ue.info(Ye);case 67:this._scheduler.schedulerContainer.setObject("CAA0391F-20B8-43B2-A6A8-977D84353838",t);case 68:case"end":return e.stop()}}),e,this,[[2,61],[15,43,47,55],[48,,50,54]])}))),function(){return l.apply(this,arguments)})},{key:"startScheduler",value:(a=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._scheduler.start();case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"stopScheduler",value:(i=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._scheduler.stop();case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"startPasswordCheck",value:(n=E()(h.a.mark((function e(){var t,r,n,o,i,a,l,d,p,_,E,g,m,y,S,T,A,b,O,I=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=I.length>1?I[1]:void 0,n=I.length>2?I[2]:void 0,xe(t=I.length>0&&void 0!==I[0]&&I[0])&&Fe(n)||F(new D(w.INVALID_ARGUMENT)),o=f()(),i=new c.a,e.prev=6,a=Be(r)&&r.length>0?r.slice():r,!ke(a)){e.next=13;break}return e.next=11,this._getAllLoginAccounts();case 11:a=e.sent,this._pruneCachedAccounts(a);case 13:l={cacheBuster:o},d=!0,p=!1,_=void 0,e.prev=18,E=u()(a);case 20:if(d=(g=E.next()).done){e.next=51;break}if(m=g.value,!Pe.get("IsCancelled")){e.next=28;break}return Pe.set("IsCancelled",!1),y=f()()-o,Ue.info("[CompromisedPassword]: Start password check was cancelled"),Ae.send(X,Z,"".concat(y)),e.abrupt("break",51);case 28:if(S=void 0,!t){e.next=45;break}if(T=m.password,A=K(T),!(b=i.get(A))){e.next=37;break}S=s()({},b,{guid:m.guid}),e.next=42;break;case 37:return e.next=39,this._requestManager.getLeakedDetails(m,l);case 39:S=e.sent,i.set(A,S);case 42:this._cacheStorage.set(S.guid,S),e.next=47;break;case 45:O=m.guid,S=this._cacheStorage.get(O);case 47:n(S);case 48:d=!0,e.next=20;break;case 51:e.next=57;break;case 53:e.prev=53,e.t0=e.catch(18),p=!0,_=e.t0;case 57:e.prev=57,e.prev=58,d||null==E.return||E.return();case 60:if(e.prev=60,!p){e.next=63;break}throw _;case 63:return e.finish(60);case 64:return e.finish(57);case 65:i.clear(),t||Ae.sendSchedulerMissedTelemetry(o,this._scheduler.fetchLastExecTime(),this._config.POLL_FREQUENCY_IN_MINS),e.next=73;break;case 69:e.prev=69,e.t1=e.catch(6),i.clear(),F(e.t1);case 73:case"end":return e.stop()}}),e,this,[[6,69],[18,53,57,65],[58,,60,64]])}))),function(){return n.apply(this,arguments)})},{key:"cancelPasswordCheck",value:(r=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Pe.set("IsCancelled",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"clearCache",value:(t=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._cacheStorage.removeAll(),Ae.send($,J,re);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"initCompromisedPasswordSDKSessionSettings",value:function(){return new o.a((function(e,t){Pe.initialize((function(r){r?e("CompromisedPasswordSDK Session Settings initialized"):t(new Error("Failed to initialize CompromisedPasswordSDK Session Settings"))}))}))}}]),e}()),ze=function(){function e(){if(m()(this,e),this.constructor===e)throw new Error("Abstract classes cannot be instantiated")}var t;return S()(e,[{key:"getConfig",value:function(){throw new Error("API not implemented")}},{key:"getAllLoginAccounts",value:(t=E()(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("API not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"onSchedulerCompleted",value:function(e){throw new Error("API not implemented")}},{key:"onSchedulerStarted",value:function(){throw new Error("API not implemented")}},{key:"handleCompromisedPasswordResult",value:function(e){throw new Error("API not implemented")}}]),e}();r.d(t,"ICompromisedPasswordClient",(function(){return ze})),console.log("SDK compromissed password BG"),t.default=Ke}])},"object"==typeof r&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof r?r.CompromisedPasswordBG=o():n.CompromisedPasswordBG=o()},{}],213:[function(e,t,r){(function(e){(function(){var n,o=o||{};o.scope={},o.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},o.arrayIterator=function(e){return{next:o.arrayIteratorImpl(e)}},o.ASSUME_ES5=!1,o.ASSUME_NO_NATIVE_MAP=!1,o.ASSUME_NO_NATIVE_SET=!1,o.SIMPLE_FROUND_POLYFILL=!1,o.defineProperty=o.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},o.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==e&&null!=e?e:t},o.global=o.getGlobal(this),o.SYMBOL_PREFIX="jscomp_symbol_",o.initSymbol=function(){o.initSymbol=function(){},o.global.Symbol||(o.global.Symbol=o.Symbol)},o.SymbolClass=function(e,t){this.$jscomp$symbol$id_=e,o.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})},o.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_},o.Symbol=(n=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new o.SymbolClass(o.SYMBOL_PREFIX+(t||"")+"_"+n++,t)}),o.initSymbolIterator=function(){o.initSymbol();var e=o.global.Symbol.iterator;e||(e=o.global.Symbol.iterator=o.global.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&o.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return o.iteratorPrototype(o.arrayIteratorImpl(this))}}),o.initSymbolIterator=function(){}},o.initSymbolAsyncIterator=function(){o.initSymbol();var e=o.global.Symbol.asyncIterator;e||(e=o.global.Symbol.asyncIterator=o.global.Symbol("Symbol.asyncIterator")),o.initSymbolAsyncIterator=function(){}},o.iteratorPrototype=function(e){return o.initSymbolIterator(),(e={next:e})[o.global.Symbol.iterator]=function(){return this},e},o.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):o.arrayIterator(e)},o.objectCreate=o.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t},o.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},o.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:o.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,o.inherits=function(e,t){if(e.prototype=o.objectCreate(t.prototype),e.prototype.constructor=e,o.setPrototypeOf){var r=o.setPrototypeOf;r(e,t)}else for(r in t)if("prototype"!=r)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}else e[r]=t[r];e.superClass_=t.prototype},o.polyfill=function(e,t,r,n){if(t){for(r=o.global,e=e.split("."),n=0;n<e.length-1;n++){var i=e[n];i in r||(r[i]={}),r=r[i]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&o.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},o.FORCE_POLYFILL_PROMISE=!1,o.polyfill("Promise",(function(e){function t(){this.batch_=null}function r(e){return e instanceof i?e:new i((function(t,r){t(e)}))}if(e&&!o.FORCE_POLYFILL_PROMISE)return e;t.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var t=this;this.asyncExecuteFunction((function(){t.executeBatch_()}))}this.batch_.push(e)};var n=o.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){n(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var i=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[];var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};i.prototype.createResolveAndReject_=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},i.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof i)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},i.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},i.prototype.reject_=function(e){this.settle_(2,e)},i.prototype.fulfill_=function(e){this.settle_(1,e)},i.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,this.executeOnSettledCallbacks_()},i.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)s.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var s=new t;return i.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},i.prototype.settleSameAsThenable_=function(e,t){var r=this.createResolveAndReject_();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},i.prototype.then=function(e,t){function r(e,t){return"function"==typeof e?function(t){try{n(e(t))}catch(e){o(e)}}:t}var n,o,s=new i((function(e,t){n=e,o=t}));return this.callWhenSettled_(r(e,n),r(t,o)),s},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.callWhenSettled_=function(e,t){function r(){switch(n.state_){case 1:e(n.result_);break;case 2:t(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?s.asyncExecute(r):this.onSettledCallbacks_.push(r)},i.resolve=r,i.reject=function(e){return new i((function(t,r){r(e)}))},i.race=function(e){return new i((function(t,n){for(var i=o.makeIterator(e),s=i.next();!s.done;s=i.next())r(s.value).callWhenSettled_(t,n)}))},i.all=function(e){var t=o.makeIterator(e),n=t.next();return n.done?r([]):new i((function(e,o){function i(t){return function(r){s[t]=r,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(n.value).callWhenSettled_(i(s.length-1),o),n=t.next()}while(!n.done)}))},i}),"es6","es3"),o.generator={},o.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},o.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},o.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},o.generator.Context.prototype.stop_=function(){this.isRunning_=!1},o.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},o.generator.Context.prototype.next_=function(e){this.yieldResult=e},o.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},o.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},o.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},o.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},o.generator.Context.prototype.yieldAll=function(e,t){var r=(e=o.makeIterator(e)).next();if(o.generator.ensureIteratorResultIsObject_(r),!r.done)return this.yieldAllIterator_=e,this.yield(r.value,t);this.yieldResult=r.value,this.nextAddress=t},o.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},o.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},o.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,null!=t&&(this.finallyAddress_=t)},o.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},o.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},o.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},o.generator.Context.prototype.enterFinallyBlock=function(e,t,r){r?this.finallyContexts_[r]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},o.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();null!=t.jumpTo&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},o.generator.Context.prototype.forIn=function(e){return new o.generator.Context.PropertyIterator(e)},o.generator.Context.PropertyIterator=function(e){for(var t in this.object_=e,this.properties_=[],e)this.properties_.push(t);this.properties_.reverse()},o.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},o.generator.Engine_=function(e){this.context_=new o.generator.Context,this.program_=e},o.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},o.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(e){return{value:e,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},o.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},o.generator.Engine_.prototype.yieldAllStep_=function(e,t,r){try{var n=e.call(this.context_.yieldAllIterator_,t);if(o.generator.ensureIteratorResultIsObject_(n),!n.done)return this.context_.stop_(),n;var i=n.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}return this.context_.yieldAllIterator_=null,r.call(this.context_,i),this.nextStep_()},o.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},o.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},o.initSymbolIterator(),this[Symbol.iterator]=function(){return this}},o.generator.createGenerator=function(e,t){return t=new o.generator.Generator_(new o.generator.Engine_(t)),o.setPrototypeOf&&o.setPrototypeOf(t,e.prototype),t},o.asyncExecutePromiseGenerator=function(e){function t(t){return e.next(t)}function r(t){return e.throw(t)}return new Promise((function(n,o){!function e(i){i.done?n(i.value):Promise.resolve(i.value).then(t,r).then(e,o)}(e.next())}))},o.asyncExecutePromiseGeneratorFunction=function(e){return o.asyncExecutePromiseGenerator(e())},o.asyncExecutePromiseGeneratorProgram=function(e){return o.asyncExecutePromiseGenerator(new o.generator.Generator_(new o.generator.Engine_(e)))},o.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.polyfill("Object.entries",(function(e){return e||function(e){var t,r=[];for(t in e)o.owns(e,t)&&r.push([t,e[t]]);return r}}),"es8","es3"),o.iteratorFromArray=function(e,t){o.initSymbolIterator(),e instanceof String&&(e+="");var r=0,n={next:function(){if(r<e.length){var o=r++;return{value:t(o,e[o]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n},o.polyfill("Array.prototype.keys",(function(e){return e||function(){return o.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),o.polyfill("Object.values",(function(e){return e||function(e){var t,r=[];for(t in e)o.owns(e,t)&&r.push(e[t]);return r}}),"es8","es3"),function(e,n){"object"==typeof r&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof r?r.HeartbeatSDK=n():e.HeartbeatSDK=n()}(window,(function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){o.initSymbol(),o.initSymbol(),o.initSymbol(),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r||4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}({"./source/HBIndex.js":function(e,t,r){r.r(t);var n={portal:"WEB_APPLICATION",mobile:"MOBILE_APPLICATION",extension:"BROWSER_EXTENSION"},i=SymBfw.telemetryConstants.parameters.CUSTOM_DIMENSION2,s=SymBfw.telemetryConstants.parameters.CUSTOM_DIMENSION6,a=(e=SymBfw.utils).isObject,u=e.isFunction,l=e.isString,c=SymBfw.logger.error,d=function(){this._userLang=this._apiKey=this._dataSource=this._machineId=this._prodVersion=this._prodName=null,this._retryIntervalMillis=864e5,this.install={},this.install.isInstallPingEnabled=!0,this.install.isFreshInstall=null,this.heartBeat={},this.heartBeat.isHeartBeatPingEnabled=!0,this.heartBeat.heartBeatIntervalInMilliSec=null,this._isLocalStorageNeeded=!1,this._browserName=null};o.global.Object.defineProperties(d.prototype,{prodName:{configurable:!0,enumerable:!0,set:function(e){this._prodName=e},get:function(){return this._prodName}},browserName:{configurable:!0,enumerable:!0,set:function(e){this._browserName=e},get:function(){return this._browserName}},prodVersion:{configurable:!0,enumerable:!0,set:function(e){this._prodVersion=e},get:function(){return this._prodVersion}},machineId:{configurable:!0,enumerable:!0,set:function(e){this._machineId=e},get:function(){return this._machineId}},apiKey:{configurable:!0,enumerable:!0,set:function(e){this._apiKey=e},get:function(){return this._apiKey}},dataSource:{configurable:!0,enumerable:!0,set:function(e){this._dataSource=n[e]},get:function(){return this._dataSource}},userLanguage:{configurable:!0,enumerable:!0,set:function(e){this._userLang=e},get:function(){return this._userLang}},retryIntervalMillis:{configurable:!0,enumerable:!0,set:function(e){this._retryIntervalMillis=e},get:function(){return this._retryIntervalMillis}},isInstallPingEnabled:{configurable:!0,enumerable:!0,set:function(e){this.install.isInstallPingEnabled=e},get:function(){return this.install.isInstallPingEnabled}},isFreshInstall:{configurable:!0,enumerable:!0,set:function(e){this.install.isFreshInstall=e},get:function(){return this.install.isFreshInstall}},isHeartBeatPingEnabled:{configurable:!0,enumerable:!0,set:function(e){this.heartBeat.isHeartBeatPingEnabled=e},get:function(){return this.heartBeat.isHeartBeatPingEnabled}},heartBeatIntervalInMilliSec:{configurable:!0,enumerable:!0,set:function(e){this.heartBeat.heartBeatIntervalInMilliSec=e},get:function(){return this.heartBeat.heartBeatIntervalInMilliSec}},isLocalStorageNeeded:{configurable:!0,enumerable:!0,set:function(e){this._isLocalStorageNeeded=e},get:function(){return this._isLocalStorageNeeded}},additionalInstallPingParams:{configurable:!0,enumerable:!0,set:function(e){if(a(e)){for(var t=o.makeIterator(Object.entries(e)),r=t.next();!r.done;r=t.next()){var n=o.makeIterator(r.value);r=n.next().value,n=n.next().value,l(r)||c("custom dimension value should be a string"),u(n)||c(n+" is not a function")}this._additionalInstallPingParams=e}},get:function(){return this._additionalInstallPingParams}},additionalHeartBeatPingParams:{configurable:!0,enumerable:!0,set:function(e){if(a(e)){for(var t=o.makeIterator(Object.entries(e)),r=t.next();!r.done;r=t.next()){var n=o.makeIterator(r.value);r=n.next().value,n=n.next().value,l(r)||c("custom dimension value should be a string"),u(n)||c(n+" is not a function")}this._additionalHeartBeatPingParams=e}},get:function(){return this._additionalHeartBeatPingParams}}}),(e=function(){}).prototype.perform=function(){return o.asyncExecutePromiseGeneratorProgram((function(e){throw Error("Derived class needs to implement this function")}))},(r=function(){this._container={}}).prototype.loadContainer=function(e){var t=this;return new Promise((function(r,n){t.isLocalStorageNeeded=e,t.isLocalStorageNeeded?(t.container=window.localStorage,r(!0)):SymBfw.settings.loadSettingsContainer("HEARTBEAT_SDK_CONTAINER",!0,(function(e,o,i){(!1===e||SymBfw.utils.isNil(o))&&n(i),t.container=o,r(!0)}))}))},r.prototype.getContainerByName=function(e){if(SymBfw.utils.isNil(e)||SymBfw.utils.isNil(this.container))throw Error("Unable to retrieve the container value");return this.isLocalStorageNeeded?this.container.getItem(e):this.container.getObject(e)},r.prototype.setContainerByName=function(e,t){if(SymBfw.utils.isNil(e)||SymBfw.utils.isNil(this.container))throw Error("Unable to set the container value");this.isLocalStorageNeeded?this.container.setItem(e,t):this.container.setObject(e,t)},r.prototype.removeContainerByName=function(e){if(SymBfw.utils.isNil(e)||SymBfw.utils.isNil(this.container))throw Error("Unable to remove the container value");this.container.removeObject(e)},o.global.Object.defineProperties(r.prototype,{container:{configurable:!0,enumerable:!0,get:function(){return this._container.storage},set:function(e){this._container.storage=e}},isLocalStorageNeeded:{configurable:!0,enumerable:!0,get:function(){return this._container.isLocalStorageNeeded},set:function(e){this._container.isLocalStorageNeeded=e}}});var f=Object.freeze(new r),p=SymBfw.utils.isNil;(r=function(){this.defaultParameters={},this.userLang=this.apiKey=this.dataSource=this.machineId=this.prodVersion=this.browserName=this.prodName=null}).prototype.init=function(e){if(p(e)||0===Object.keys(e).length)throw Error("configObj cannot be null");this.prodName=e.prodName,this.prodVersion=e.prodVersion,this.machineId=e.machineId,this.dataSource=e.dataSource,this.apiKey=e.apiKey,this.userLang=e.userLanguage,this.browserName=p(e.browserName)?SymBfw.globals.BROWSER:e.browserName},r.prototype._constructQueryParams=function(e){for(var t="",r=(e=o.makeIterator(Object.entries(e))).next();!r.done;r=e.next()){var n=o.makeIterator(r.value);t+=(r=n.next().value)+"="+(n=n.next().value)+"&"}return t=t.substring(0,t.length-1)},r.prototype._constructDefaultParams=function(){var e={};return this.defaultParameters=(e.an=this.prodName,e.av=this.prodVersion,e.cid=this.machineId,e.ds=this.dataSource,e.tid=this.apiKey,e.ul=this.userLang,e.v=1,e.aip=1,e.t="event",e[i]=this.machineId,e[s]=this.browserName,e),this._constructQueryParams(this.defaultParameters)},r.prototype.send=function(e){return o.asyncExecutePromiseGeneratorProgram((function(t){return t.return(p(e)?Promise.reject("parameters are required for sending telemetry events"):Promise.resolve("telemetry sent successfully"))}))};var h=new r,_=(r=SymBfw).alarmHelper,E=r.utils.isntNil,g=function(){return this._additionalHeartBeatPingParams=this._updateInterval=this._hbPingRetryInterval=this._hbPingInterval=this._containerKeyName=null,this};o.inherits(g,e),g.prototype._getCurrentUTCTimestamp=function(){return Math.floor((new Date).getTime())},g.prototype._checkPingTimeArrived=function(){var e=JSON.parse(f.getContainerByName(this._containerKeyName));return!!SymBfw.utils.isNil(e)||e+this._hbPingInterval<this._getCurrentUTCTimestamp()},g.prototype._constructHeartBeatPing=function(){var e,t,r,n,i,s,a,u,l,c,d=this;return o.asyncExecutePromiseGeneratorProgram((function(f){switch(f.nextAddress){case 1:if((e={}).ec="UserBase",e.ea="HeartBeat",t=e,!E(d._additionalHeartBeatPingParams)){f.jumpTo(2);break}r=o.makeIterator(Object.entries(d._additionalHeartBeatPingParams)),n=r.next();case 3:if(n.done){f.jumpTo(2);break}return i=n.value,s=o.makeIterator(i),a=s.next().value,u=s.next().value,l=t,c=a,f.yield(u(),6);case 6:l[c]=f.yieldResult,n=r.next(),f.jumpTo(3);break;case 2:return f.return(t)}}))},g.prototype.perform=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){if(1==r.nextAddress){if(SymBfw.utils.isEmptyObject(e))throw Error("HeartBeat ping configuration is empty");return t._containerKeyName="hbLastUpdateTimeKey",t._hbPingInterval=e.heartBeatIntervalInMilliSec,t._hbPingRetryInterval=e.retryIntervalMillis,t._updateInterval=e.heartBeatIntervalInMilliSec,t._additionalHeartBeatPingParams=e._additionalHeartBeatPingParams||null,e.isHeartBeatPingEnabled?(r.setCatchFinallyBlocks(3),r.yield(t._sendHeartBeatPing(),5)):r.jumpTo(0)}if(3!=r.nextAddress)return r.leaveTryBlock(0);r.enterCatchBlock(),SymBfw.logger.error("Failed to send the Telemetry"),r.jumpToEnd()}))},g.prototype._registerScheduler=function(){return o.asyncExecutePromiseGeneratorProgram((function(e){return e.yield(_.setAlarm("b5c1d0df-513c-4592-aad4-71cb3c603c16",{periodInMinutes:30}),0)}))},g.prototype._sendHeartBeatPing=function(){var e,t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){switch(r.nextAddress){case 1:if(!t._checkPingTimeArrived()){r.jumpTo(2);break}return r.yield(t._constructHeartBeatPing(),3);case 3:return e=r.yieldResult,r.setCatchFinallyBlocks(4),r.yield(h.send(e),6);case 6:f.setContainerByName(t._containerKeyName,t._getCurrentUTCTimestamp()),r.leaveTryBlock(2);break;case 4:r.enterCatchBlock(),SymBfw.logger.debug("Failed to send the Telementry and retry interval set");case 2:t._registerScheduler(),r.jumpToEnd()}}))};var m=SymBfw.utils,y=function(){return this._additionalInstallPingParams=this._container=null,this};o.inherits(y,e),y.prototype.perform=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){if(1==r.nextAddress){if(m.isEmptyObject(e))throw Error("Install Ping configuration is missing");return e.isInstallPingEnabled?(t.container=f,t._canTriggerInstallPing(e)?(t._additionalInstallPingParams=e._additionalInstallPingParams,r.yield(t._sendInstallPing(),3)):r.jumpTo(2)):r.return(!1)}return r.return(!0)}))},y.prototype._canTriggerInstallPing=function(e){e=e.isFreshInstall;var t=!1,r=this.container.getContainerByName("installPingStatusKey");if(m.isNil(r)){if(e)return!0;this.container.setContainerByName("installPingStatusKey","0")}else"2"===r&&(t=!0);return t},y.prototype._sendInstallPing=function(){var e,t,r=this;return o.asyncExecutePromiseGeneratorProgram((function(n){switch(n.nextAddress){case 1:return n.yield(r._constructInstallPing(),2);case 2:return e=n.yieldResult,t=null,n.setCatchFinallyBlocks(3,4),n.yield(h.send(e),6);case 6:t="1";case 4:n.enterFinallyBlock(),r.container.setContainerByName("installPingStatusKey",t),n.leaveFinallyBlock(0);break;case 3:n.enterCatchBlock(),t="2",n.jumpTo(4)}}))},y.prototype._constructInstallPing=function(){var e,t,r,n,i,s,a,u,l,c,d=this;return o.asyncExecutePromiseGeneratorProgram((function(f){switch(f.nextAddress){case 1:if((e={}).ec="UserBase",e.ea="Install",t=e,!m.isntNil(d._additionalInstallPingParams)){f.jumpTo(2);break}r=o.makeIterator(Object.entries(d._additionalInstallPingParams)),n=r.next();case 3:if(n.done){f.jumpTo(2);break}return i=n.value,s=o.makeIterator(i),a=s.next().value,u=s.next().value,l=t,c=a,f.yield(u(),6);case 6:l[c]=f.yieldResult,n=r.next(),f.jumpTo(3);break;case 2:return f.return(t)}}))},o.global.Object.defineProperties(y.prototype,{container:{configurable:!0,enumerable:!0,get:function(){return this._container},set:function(e){this._container=e}}});var S=(r=SymBfw).utils,T=r.alarmHelper;(r=function(){this.hbConfigs=null,this.handleSchedulerEvent=this.handleSchedulerEvent.bind(this)}).prototype.init=function(e){var t,r,n=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(!(e instanceof d&&n._isValidConfigObj(e)))throw new TypeError("HeartBeat SDK initialization Failed - Invalid Configuration Object");return o.setCatchFinallyBlocks(2),t=e.isLocalStorageNeeded,o.yield(f.loadContainer(t),4)}if(2!=o.nextAddress)return h.init(e),(new y).perform(e),(new g).perform(e),n._storeHBConfig(e),o.leaveTryBlock(0);r=o.enterCatchBlock(),SymBfw.logger.error("HB initialization Failed :",r.message),o.jumpToEnd()}))},r.prototype._storeHBConfig=function(e){e.isHeartBeatPingEnabled&&(this.hbConfigs=e)},r.prototype._isValidConfigObj=function(e){for(var t in e=Object.values(e))if(e[t]instanceof Object){if(!this._isValidConfigObj(e[t]))return!1}else if(S.isNil(e[t]))return!1;return!0},r.prototype.handleSchedulerEvent=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){switch(r.nextAddress){case 1:if(!e||!e.name||"b5c1d0df-513c-4592-aad4-71cb3c603c16"!==e.name){r.jumpTo(2);break}if(S.isNil(t.hbConfigs)){r.jumpTo(3);break}return r.yield(t.init(t.hbConfigs),4);case 4:case 3:case 2:r.jumpToEnd()}}))},r=new r,T.setAndRegisterAlarmListener("b5c1d0df-513c-4592-aad4-71cb3c603c16",{periodInMinutes:30},r.handleSchedulerEvent);var A=(T=SymBfw.utils).isObject,b=T.isFunction,O=T.isString,I=T.isntNil,v=SymBfw.logger.error,N=function(){this._userLanguage=this._apiKey=this._dataSource=this._machineId=this._prodVersion=this._prodName=null,this._isLocalStorageNeeded=!1,this._sendPingMethod=this._pingData=this._pingName=this._isMOTEnabled=this._pingIntervalInMillis=null};o.global.Object.defineProperties(N.prototype,{prodName:{configurable:!0,enumerable:!0,set:function(e){this._prodName=e},get:function(){return this._prodName}},prodVersion:{configurable:!0,enumerable:!0,set:function(e){this._prodVersion=e},get:function(){return this._prodVersion}},machineId:{configurable:!0,enumerable:!0,set:function(e){this._machineId=e},get:function(){return this._machineId}},apiKey:{configurable:!0,enumerable:!0,set:function(e){this._apiKey=e},get:function(){return this._apiKey}},dataSource:{configurable:!0,enumerable:!0,set:function(e){this._dataSource=n[e]},get:function(){return this._dataSource}},userLanguage:{configurable:!0,enumerable:!0,set:function(e){this._userLanguage=e},get:function(){return this._userLanguage}},isLocalStorageNeeded:{configurable:!0,enumerable:!0,set:function(e){this._isLocalStorageNeeded=e},get:function(){return this._isLocalStorageNeeded}},pingIntervalInMillis:{configurable:!0,enumerable:!0,set:function(e){this._pingIntervalInMillis=e},get:function(){return this._pingIntervalInMillis}},isMOTEnabled:{configurable:!0,enumerable:!0,set:function(e){this._isMOTEnabled=e},get:function(){return this._isMOTEnabled}},pingName:{configurable:!0,enumerable:!0,set:function(e){this._pingName=e},get:function(){return this._pingName}},pingData:{configurable:!0,enumerable:!0,set:function(e){this._pingData=e},get:function(){return this._pingData}},additionalRecurrentPingParams:{configurable:!0,enumerable:!0,set:function(e){if(A(e)){for(var t=o.makeIterator(Object.entries(e)),r=t.next();!r.done;r=t.next()){var n=o.makeIterator(r.value);r=n.next().value,n=n.next().value,O(r)||v("custom dimension value should be a string"),b(n)||v(n+" is not a function")}this._additionalRecurrentPingParams=e}},get:function(){return this._additionalRecurrentPingParams}},sendPingMethod:{configurable:!0,enumerable:!0,set:function(e){if(I(e)&&!b(e))throw Error("sendPingMethod is not a function");this._sendPingMethod=e},get:function(){return this._sendPingMethod}}});var R=(T=SymBfw).utils,C=T.logger,D=T.sessionSettings,w=R.isNil;(T=function(){this.settingsContainer=null}).prototype.initialize=function(e){var t=this;if(this.settingsContainer=null,!R.isFunction(e))throw Error("callback must be a function");D.loadSettingsContainer("HEARTBEAT_SDK_SESSION_CONTAINER",!0,(function(r,n){if(!1===r||w(n))return C.error("Failed to load Heart beat Session Settings Container"),void e(!1);t.settingsContainer=n,e(!0)}))},T.prototype.get=function(e){if(!w(this.settingsContainer))return this.settingsContainer.getObject(e);C.error("settings not initialized")},T.prototype.set=function(e,t){w(this.settingsContainer)?C.error("settings not initialized"):this.settingsContainer.setObject(e,t)},T.prototype.remove=function(e){if(w(e)||w(this.settingsContainer))throw Error("Unable to remove the container value");this.settingsContainer.removeObject(e)};var L=new T,P=SymBfw.alarmHelper,M=(T=SymBfw.utils).isNil,U=T.isntNil,j=T.isInteger,k=T.isString,x=T.isObject,F=T.isEmptyObject,B=T.isFunction,G=function(){return this._pingAlarmName=this._additionalRecurrentPingParams=this._pingData=this._hbRecurrentPingInterval=this._containerKeyName=null,this._sessionStorageInitialized=!1,this._sendPingMethod=null,this.handleSchedulerEvent=this.handleSchedulerEvent.bind(this),this};o.inherits(G,e),G.prototype.init=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){if(1==r.nextAddress){if(F(e))throw Error("recurrentPingConfig cannot be null");if(!j(e._pingIntervalInMillis))throw Error("ping interval should be an integer");if(!k(e._pingName))throw Error("invalid ping name");if(!x(e._pingData))throw Error("invalid ping data");return t._hbRecurrentPingInterval=e._pingIntervalInMillis,t._pingData=e._pingData,t._containerKeyName=e._pingName+"_lastupdatetime",t._pingAlarmName=""+e._pingName,t._additionalRecurrentPingParams=e._additionalRecurrentPingParams,t._sendPingMethod=e._sendPingMethod,r.yield(t.initHeartBeatSDKSessionSettings(),2)}r.jumpToEnd()}))},G.prototype._constructPingData=function(){var e,t,r,n,i,s,a,u,l,c=this;return o.asyncExecutePromiseGeneratorProgram((function(d){switch(d.nextAddress){case 1:if(e=c._pingData,!U(c._additionalRecurrentPingParams)){d.jumpTo(2);break}t=o.makeIterator(Object.entries(c._additionalRecurrentPingParams)),r=t.next();case 3:if(r.done){d.jumpTo(2);break}return n=r.value,i=o.makeIterator(n),s=i.next().value,a=i.next().value,u=e,l=s,d.yield(a(),6);case 6:u[l]=d.yieldResult,r=t.next(),d.jumpTo(3);break;case 2:return d.return(e)}}))},G.prototype._checkPingTimeReached=function(){var e,t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){return e=JSON.parse(f.getContainerByName(t._containerKeyName)),M(e)?r.return(!0):r.return(e+t._hbRecurrentPingInterval<t._getCurrentUTCTimestamp())}))},G.prototype.handleSchedulerEvent=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){switch(r.nextAddress){case 1:if(!e||!e.name){r.jumpTo(2);break}if(U(t._pingAlarmName)&&e.name!==t._pingAlarmName){r.jumpTo(3);break}if(!M(t._sessionStorageInitialized)&&!1!==t._sessionStorageInitialized){r.jumpTo(4);break}return r.yield(t.initHeartBeatSDKSessionSettings(),5);case 5:case 4:M(t._pingData)&&(t._pingData=L.get(e.name)),M(t._pingData)?P.clearAlarm(e.name):t.perform(e.name);case 3:case 2:r.jumpToEnd()}}))},G.prototype.perform=function(e,t){t=void 0!==t&&t;var r,n,i=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(!0!==t){o.jumpTo(2);break}if(!M(i._sessionStorageInitialized)&&!1!==i._sessionStorageInitialized){o.jumpTo(3);break}return o.yield(i.initHeartBeatSDKSessionSettings(),4);case 4:case 3:return r=i,o.yield(i._constructPingData(),5);case 5:r._pingData=o.yieldResult,L.set(i._pingAlarmName,i._pingData);case 2:return o.yield(i._checkPingTimeReached(),6);case 6:if(!o.yieldResult){o.jumpTo(0);break}return n=L.get(e),U(n)&&(i._pingData=n),o.yield(i._sendTelemetry(),8);case 8:o.jumpToEnd()}}))},G.prototype.scheduleAlarm=function(e){var t,r=this;return o.asyncExecutePromiseGeneratorProgram((function(n){t=L.get(e),M(t)||P.setAndRegisterAlarmListener(e,{periodInMinutes:30},r.handleSchedulerEvent),n.jumpToEnd()}))},G.prototype._sendTelemetry=function(){var e=this;return o.asyncExecutePromiseGeneratorProgram((function(t){switch(t.nextAddress){case 1:return t.setCatchFinallyBlocks(2),B(e._sendPingMethod)?t.yield(e._sendPingMethod(e._pingAlarmName,e._pingData),7):t.yield(h.send(e._pingData),6);case 6:t.jumpTo(5);break;case 7:case 5:f.setContainerByName(e._containerKeyName,e._getCurrentUTCTimestamp()),t.leaveTryBlock(0);break;case 2:t.enterCatchBlock(),SymBfw.logger.error("Failed to send the recurrent ping and retry interval set"),t.jumpToEnd()}}))},G.prototype.stop=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){if(1==r.nextAddress)return P.clearAlarm(e),t._pingData=null,M(t._sessionStorageInitialized)||!1===t._sessionStorageInitialized?r.yield(t.initHeartBeatSDKSessionSettings(),3):r.jumpTo(2);L.remove(e),r.jumpToEnd()}))},G.prototype._getCurrentUTCTimestamp=function(){return Math.floor((new Date).getTime())},G.prototype.initHeartBeatSDKSessionSettings=function(){var e=this;return new Promise((function(t,r){L.initialize((function(n){n?(e._sessionStorageInitialized=!0,t("HeartBeat SDK Session Settings initialized")):r(Error("Failed to initialize HeartBeat SDK Session Settings"))}))}))};var V=(e=SymBfw.utils).isString,H=e.isNil,W=e.isEmptyObject,Y=e.isFunction;(e=function(){this._pingObjMap={}}).prototype.init=function(){return o.asyncExecutePromiseGeneratorProgram((function(e){e.jumpToEnd()}))},e.prototype.createPing=function(e){var t,r,n,i=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(!(e instanceof N))throw new TypeError("Active vault user ping initialization failed - Invalid Configuration Object");if(H(e._isLocalStorageNeeded)||H(e._pingName))throw Error("config object values cannot be empty");return o.setCatchFinallyBlocks(2),t=e.isLocalStorageNeeded,o.yield(f.loadContainer(t),4);case 4:if(!W(i._pingObjMap[e._pingName]))throw Error(e._pingName+" already exists");return r=new G,o.yield(r.init(e),5);case 5:return i._pingObjMap[e._pingName]=r,Y(e._sendPingMethod)||h.init(e),o.yield(r.scheduleAlarm(e._pingName),6);case 6:o.leaveTryBlock(0);break;case 2:n=o.enterCatchBlock(),SymBfw.logger.error("Recurrent Ping Creation Failed :",n.message),o.jumpToEnd()}}))},e.prototype.start=function(e){var t,r=this;return o.asyncExecutePromiseGeneratorProgram((function(n){if(1==n.nextAddress){if(!V(e))throw Error("Invalid ping name");if(t=r._pingObjMap[e],W(t))throw Error("Invalid ping object");return n.yield(t.perform(e,!0),2)}if(3!=n.nextAddress)return n.yield(t.scheduleAlarm(e),3);n.jumpToEnd()}))},e.prototype.stop=function(e){if(!V(e))throw Error("Invalid ping name");var t=this._pingObjMap[e];W(t)?SymBfw.logger.log("Invalid ping object"):(t.stop(e),this._pingObjMap[e]=null)},e=new e,t.default={hbManager:r,HBConfig:d,HBRecurrentPingConfig:N,hbRecurrentPingManager:e}},0:function(e,t,r){e.exports=r("./source/HBIndex.js")}}).default}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],214:[function(e,t,r){(function(n){(function(){var o=o||{};o.scope={},o.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},o.arrayIterator=function(e){return{next:o.arrayIteratorImpl(e)}},o.ASSUME_ES5=!1,o.ASSUME_NO_NATIVE_MAP=!1,o.ASSUME_NO_NATIVE_SET=!1,o.SIMPLE_FROUND_POLYFILL=!1,o.ISOLATE_POLYFILLS=!1,o.FORCE_POLYFILL_PROMISE=!1,o.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,o.defineProperty=o.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},o.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n&&n];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},o.global=o.getGlobal(this),o.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),o.TRUST_ES6_POLYFILLS=!o.ISOLATE_POLYFILLS||o.IS_SYMBOL_NATIVE,o.polyfills={},o.propertyToPolyfillSymbol={},o.POLYFILL_PREFIX="$jscp$";var i,s;o.polyfill=function(e,t,r,n){t&&(o.ISOLATE_POLYFILLS?o.polyfillIsolated(e,t,r,n):o.polyfillUnisolated(e,t,r,n))},o.polyfillUnisolated=function(e,t,r,n){for(r=o.global,e=e.split("."),n=0;n<e.length-1;n++){var i=e[n];if(!(i in r))return;r=r[i]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&o.defineProperty(r,e,{configurable:!0,writable:!0,value:t})},o.polyfillIsolated=function(e,t,r,n){var i=e.split(".");e=1===i.length,n=i[0],n=!e&&n in o.polyfills?o.polyfills:o.global;for(var s=0;s<i.length-1;s++){var a=i[s];if(!(a in n))return;n=n[a]}i=i[i.length-1],null!=(t=t(r=o.IS_SYMBOL_NATIVE&&"es6"===r?n[i]:null))&&(e?o.defineProperty(o.polyfills,i,{configurable:!0,writable:!0,value:t}):t!==r&&(void 0===o.propertyToPolyfillSymbol[i]&&(r=1e9*Math.random()>>>0,o.propertyToPolyfillSymbol[i]=o.IS_SYMBOL_NATIVE?o.global.Symbol(i):o.POLYFILL_PREFIX+r+"$"+i),o.defineProperty(n,o.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:t})))},o.initSymbol=function(){},o.polyfill("Symbol",(function(e){if(e)return e;var t=function(e,t){this.$jscomp$symbol$id_=e,o.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};t.prototype.toString=function(){return this.$jscomp$symbol$id_};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",n=0,i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new t(r+(e||"")+"_"+n++,e)};return i}),"es6","es3"),o.polyfill("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var n=o.global[t[r]];"function"==typeof n&&"function"!=typeof n.prototype[e]&&o.defineProperty(n.prototype,e,{configurable:!0,writable:!0,value:function(){return o.iteratorPrototype(o.arrayIteratorImpl(this))}})}return e}),"es6","es3"),o.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},o.createTemplateTagFirstArg=function(e){return e.raw=e},o.createTemplateTagFirstArgWithRaw=function(e,t){return e.raw=t,e},o.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):o.arrayIterator(e)},o.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},o.arrayFromIterable=function(e){return e instanceof Array?e:o.arrayFromIterator(o.makeIterator(e))},o.objectCreate=o.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t},o.getConstructImplementation=function(){if(o.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(function(){function e(){}return new e,Reflect.construct(e,[],(function(){})),new e instanceof e}())return Reflect.construct;var e=Reflect.construct;return function(t,r,n){return t=e(t,r),n&&Reflect.setPrototypeOf(t,n.prototype),t}}return function(e,t,r){return void 0===r&&(r=e),r=o.objectCreate(r.prototype||Object.prototype),Function.prototype.apply.call(e,r,t)||r}},o.construct=o.getConstructImplementation(),o.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},o.setPrototypeOf=o.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:o.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,o.inherits=function(e,t){if(e.prototype=o.objectCreate(t.prototype),e.prototype.constructor=e,o.setPrototypeOf){var r=o.setPrototypeOf;r(e,t)}else for(r in t)if("prototype"!=r)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}else e[r]=t[r];e.superClass_=t.prototype},o.generator={},o.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},o.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},o.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},o.generator.Context.prototype.stop_=function(){this.isRunning_=!1},o.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},o.generator.Context.prototype.next_=function(e){this.yieldResult=e},o.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},o.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},o.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},o.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},o.generator.Context.prototype.yieldAll=function(e,t){var r=(e=o.makeIterator(e)).next();if(o.generator.ensureIteratorResultIsObject_(r),!r.done)return this.yieldAllIterator_=e,this.yield(r.value,t);this.yieldResult=r.value,this.nextAddress=t},o.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},o.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},o.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,null!=t&&(this.finallyAddress_=t)},o.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},o.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},o.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},o.generator.Context.prototype.enterFinallyBlock=function(e,t,r){r?this.finallyContexts_[r]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},o.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();null!=t.jumpTo&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},o.generator.Context.prototype.forIn=function(e){return new o.generator.Context.PropertyIterator(e)},o.generator.Context.PropertyIterator=function(e){for(var t in this.object_=e,this.properties_=[],e)this.properties_.push(t);this.properties_.reverse()},o.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},o.generator.Engine_=function(e){this.context_=new o.generator.Context,this.program_=e},o.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},o.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(e){return{value:e,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},o.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},o.generator.Engine_.prototype.yieldAllStep_=function(e,t,r){try{var n=e.call(this.context_.yieldAllIterator_,t);if(o.generator.ensureIteratorResultIsObject_(n),!n.done)return this.context_.stop_(),n;var i=n.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}return this.context_.yieldAllIterator_=null,r.call(this.context_,i),this.nextStep_()},o.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},o.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},o.generator.createGenerator=function(e,t){return t=new o.generator.Generator_(new o.generator.Engine_(t)),o.setPrototypeOf&&e.prototype&&o.setPrototypeOf(t,e.prototype),t},o.asyncExecutePromiseGenerator=function(e){function t(t){return e.next(t)}function r(t){return e.throw(t)}return new Promise((function(n,o){!function e(i){i.done?n(i.value):Promise.resolve(i.value).then(t,r).then(e,o)}(e.next())}))},o.asyncExecutePromiseGeneratorFunction=function(e){return o.asyncExecutePromiseGenerator(e())},o.asyncExecutePromiseGeneratorProgram=function(e){return o.asyncExecutePromiseGenerator(new o.generator.Generator_(new o.generator.Engine_(e)))},o.polyfill("Reflect",(function(e){return e||{}}),"es6","es3"),o.polyfill("Reflect.construct",(function(e){return o.construct}),"es6","es3"),o.polyfill("Reflect.setPrototypeOf",(function(e){if(e)return e;if(o.setPrototypeOf){var t=o.setPrototypeOf;return function(e,r){try{return t(e,r),!0}catch(e){return!1}}}return null}),"es6","es5"),o.polyfill("Promise",(function(e){function t(){this.batch_=null}function r(e){return e instanceof i?e:new i((function(t,r){t(e)}))}if(e&&(!(o.FORCE_POLYFILL_PROMISE||o.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===o.global.PromiseRejectionEvent)||!o.global.Promise||-1===o.global.Promise.toString().indexOf("[native code]")))return e;t.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var t=this;this.asyncExecuteFunction((function(){t.executeBatch_()}))}this.batch_.push(e)};var n=o.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){n(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var i=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};i.prototype.createResolveAndReject_=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},i.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof i)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},i.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},i.prototype.reject_=function(e){this.settle_(2,e)},i.prototype.fulfill_=function(e){this.settle_(1,e)},i.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},i.prototype.scheduleUnhandledRejectionCheck_=function(){var e=this;n((function(){if(e.notifyUnhandledRejection_()){var t=o.global.console;void 0!==t&&t.error(e.result_)}}),1)},i.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var e=o.global.CustomEvent,t=o.global.Event,r=o.global.dispatchEvent;return void 0===r||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.result_,r(e))},i.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)s.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var s=new t;return i.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},i.prototype.settleSameAsThenable_=function(e,t){var r=this.createResolveAndReject_();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},i.prototype.then=function(e,t){function r(e,t){return"function"==typeof e?function(t){try{n(e(t))}catch(e){o(e)}}:t}var n,o,s=new i((function(e,t){n=e,o=t}));return this.callWhenSettled_(r(e,n),r(t,o)),s},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.callWhenSettled_=function(e,t){function r(){switch(n.state_){case 1:e(n.result_);break;case 2:t(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?s.asyncExecute(r):this.onSettledCallbacks_.push(r),this.isRejectionHandled_=!0},i.resolve=r,i.reject=function(e){return new i((function(t,r){r(e)}))},i.race=function(e){return new i((function(t,n){for(var i=o.makeIterator(e),s=i.next();!s.done;s=i.next())r(s.value).callWhenSettled_(t,n)}))},i.all=function(e){var t=o.makeIterator(e),n=t.next();return n.done?r([]):new i((function(e,o){function i(t){return function(r){s[t]=r,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(n.value).callWhenSettled_(i(s.length-1),o),n=t.next()}while(!n.done)}))},i}),"es6","es3"),o.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var r=0,n=!1,o={next:function(){if(!n&&r<e.length){var o=r++;return{value:t(o,e[o]),done:!1}}return n=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o},o.polyfill("Array.prototype.keys",(function(e){return e||function(){return o.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),o.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},o.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=o.checkStringArgs(this,e,"startsWith");e+="";var n=r.length,i=e.length;t=Math.max(0,Math.min(0|t,r.length));for(var s=0;s<i&&t<n;)if(r[t++]!=e[s++])return!1;return s>=i}}),"es6","es3"),i=window,s=function(e,t,r,n){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r||4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}({"./proto/protoBuild.json":function(e){e.exports=JSON.parse('{"package":null,"syntax":"proto2","messages":[{"name":"com","fields":[],"syntax":"proto2","messages":[{"name":"symantec","fields":[],"syntax":"proto2","messages":[{"name":"oxygen","fields":[],"syntax":"proto2","messages":[{"name":"datastore","fields":[],"syntax":"proto2","messages":[{"name":"db","fields":[],"syntax":"proto2","messages":[{"name":"messages","fields":[],"syntax":"proto2","options":{"optimize_for":"SPEED"},"messages":[{"name":"DatastoreV1CallbackMessage","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"callbackUrl","id":1},{"rule":"optional","type":"string","name":"mimeType","id":2},{"rule":"optional","type":"string","name":"rulePattern","id":3},{"rule":"optional","type":"string","name":"userId","id":4},{"rule":"optional","type":"QueueMessageDSv1Operation","name":"dsOperation","id":5},{"rule":"optional","type":"uint32","name":"appId","id":6},{"rule":"optional","type":"bytes","name":"dsRequest","id":7},{"rule":"optional","type":"string","name":"node_path","id":8}]}],"enums":[{"name":"QueueMessageDSv1Operation","syntax":"proto2","values":[{"name":"OP_CREATE","id":1},{"name":"OP_UPDATE","id":2},{"name":"OP_DELETE","id":3}]}],"isNamespace":true}],"isNamespace":true},{"name":"v2","fields":[],"syntax":"proto2","messages":[{"name":"messages","fields":[],"syntax":"proto2","options":{"java_package":"com.symantec.oxygen.datastore.v2.messages","optimize_for":"SPEED"},"messages":[{"name":"Value","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"name","id":1},{"rule":"required","type":"DataTypeID","name":"type","id":2},{"rule":"optional","type":"uint32","name":"data_bool","id":3},{"rule":"optional","type":"string","name":"data_string","id":4},{"rule":"optional","type":"uint32","name":"data_uint32","id":5},{"rule":"optional","type":"uint64","name":"data_uint64","id":6},{"rule":"optional","type":"uint64","name":"data_timestamp","id":7},{"rule":"optional","type":"bytes","name":"data_binary","id":8},{"rule":"optional","type":"string","name":"data_stream","id":9},{"rule":"repeated","type":"SetValue","name":"data_set","id":10},{"rule":"optional","type":"bool","name":"overwrite","id":11}],"enums":[{"name":"DataTypeID","syntax":"proto2","values":[{"name":"TID_NIL","id":0},{"name":"TID_BOOL","id":1},{"name":"TID_STRING","id":2},{"name":"TID_UINT32","id":3},{"name":"TID_UINT64","id":4},{"name":"TID_TIMESTAMP","id":5},{"name":"TID_BINARY","id":6},{"name":"TID_SET","id":7}]}]},{"name":"SetValue","syntax":"proto2","fields":[{"rule":"required","type":"SetValueDataTypeID","name":"type","id":1},{"rule":"optional","type":"string","name":"data_string","id":2},{"rule":"optional","type":"uint32","name":"data_uint32","id":3},{"rule":"optional","type":"uint64","name":"data_uint64","id":4},{"rule":"optional","type":"bytes","name":"data_binary","id":5},{"rule":"optional","type":"uint64","name":"modified_time","id":6}],"enums":[{"name":"SetValueDataTypeID","syntax":"proto2","values":[{"name":"TID_STRING","id":0},{"name":"TID_UINT32","id":1},{"name":"TID_UINT64","id":2},{"name":"TID_BINARY","id":3}]}]},{"name":"Node","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"path","id":1},{"rule":"optional","type":"bool","name":"deleted","id":2},{"rule":"repeated","type":"Value","name":"values","id":3},{"rule":"optional","type":"uint64","name":"node_modified","id":5},{"rule":"repeated","type":"ChildNodeMeta","name":"child_nodes","id":6}]},{"name":"ChildNodeMeta","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"node_name","id":1},{"rule":"required","type":"string","name":"node_url","id":2}]},{"name":"NodeList","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"entity_id","id":1},{"rule":"repeated","type":"Node","name":"nodes","id":2}]},{"name":"MultiEntityNodeList","syntax":"proto2","fields":[{"rule":"repeated","type":"NodeList","name":"nodeLists","id":1}]},{"name":"DatastoreRangeQuery","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"from_revision","id":1},{"rule":"repeated","type":"string","name":"to_revision","id":2}]},{"name":"ErrorResultList","syntax":"proto2","fields":[{"rule":"repeated","type":"ErrorResult","name":"entityError","id":1}]},{"name":"ErrorResult","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"entity_id","id":1},{"rule":"optional","type":"uint32","name":"status_code","id":2}]},{"name":"Challenge","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"entity_id","id":1},{"rule":"required","type":"uint32","name":"app_id","id":2},{"rule":"required","type":"uint64","name":"session_id","id":3},{"rule":"optional","type":"bytes","name":"salt","id":4},{"rule":"optional","type":"bytes","name":"client_data","id":5},{"rule":"optional","type":"bytes","name":"decrypted_challenge","id":6},{"rule":"optional","type":"bytes","name":"privateKey","id":7},{"rule":"optional","type":"bytes","name":"publicKey","id":8}]},{"name":"ChallengeList","syntax":"proto2","fields":[{"rule":"repeated","type":"Challenge","name":"challenges","id":1}]},{"name":"DataStoreSpocPayloadV2","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"origin","id":1},{"rule":"repeated","type":"string","name":"to_revision","id":2},{"rule":"repeated","type":"uint32","name":"app_id","id":3}]},{"name":"DsCallbackRequestV2","syntax":"proto2","fields":[{"rule":"repeated","type":"NodeChange","name":"changed_nodes","id":1},{"rule":"optional","type":"string","name":"entity_id","id":2},{"rule":"optional","type":"string","name":"source_user_agent","id":3},{"rule":"optional","type":"string","name":"request_id","id":4}]},{"name":"NodeChange","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"path","id":1},{"rule":"repeated","type":"Value","name":"values","id":2},{"rule":"required","type":"DsOperation","name":"ds_operation","id":3},{"rule":"optional","type":"string","name":"callbackUrl","id":4},{"rule":"optional","type":"string","name":"mimeType","id":5},{"rule":"optional","type":"string","name":"rulePattern","id":6}]},{"name":"InvalidNode","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"path","id":1},{"rule":"required","type":"uint32","name":"reason","id":3}]},{"name":"InvalidNodeList","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"entity_id","id":1},{"rule":"repeated","type":"InvalidNode","name":"nodes","id":2}]},{"name":"InvalidMultiEntityNodeList","syntax":"proto2","fields":[{"rule":"repeated","type":"InvalidNodeList","name":"nodeLists","id":1}]}],"enums":[{"name":"DsOperation","syntax":"proto2","values":[{"name":"OP_READ","id":1},{"name":"OP_WRITE","id":2},{"name":"OP_DELETE","id":3}]}],"isNamespace":true}],"isNamespace":true}],"isNamespace":true},{"name":"rest","fields":[],"syntax":"proto2","messages":[{"name":"accounts","fields":[],"syntax":"proto2","messages":[{"name":"messages","fields":[],"syntax":"proto2","options":{"optimize_for":"SPEED","java_package":"com.symantec.oxygen.rest.accounts.messages"},"messages":[{"name":"Group","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"href","id":1},{"rule":"optional","type":"uint64","name":"id","id":2},{"rule":"optional","type":"string","name":"name","id":3},{"rule":"repeated","type":"GroupOwner","name":"owners","id":4},{"rule":"repeated","type":"GroupMember","name":"members","id":5}]},{"name":"GroupOwner","syntax":"proto2","fields":[{"rule":"required","type":"User","name":"owner","id":1},{"rule":"optional","type":"Acl","name":"groupAcl","id":2}]},{"name":"GroupMember","syntax":"proto2","fields":[{"rule":"required","type":"User","name":"member","id":1},{"rule":"optional","type":"bool","name":"create_if_not_exist","id":3}]},{"name":"User","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"href","id":1},{"rule":"optional","type":"uint64","name":"id","id":2},{"rule":"optional","type":"string","name":"username","id":3},{"rule":"optional","type":"string","name":"password","id":4},{"rule":"optional","type":"string","name":"display_name","id":5},{"rule":"optional","type":"string","name":"avatar","id":6},{"rule":"optional","type":"string","name":"country","id":7},{"rule":"optional","type":"string","name":"language","id":8},{"rule":"optional","type":"bool","name":"email_security_alerts","id":9},{"rule":"optional","type":"bool","name":"email_product_updates","id":10},{"rule":"optional","type":"string","name":"norton_account_guid","id":13},{"rule":"optional","type":"string","name":"firstname","id":14,"options":{"default":""}},{"rule":"optional","type":"string","name":"lastname","id":15,"options":{"default":""}},{"rule":"optional","type":"MachineListV2","name":"machines","id":16},{"rule":"repeated","type":"Group","name":"groups","id":17},{"rule":"optional","type":"string","name":"ebe_language","id":18},{"rule":"optional","type":"string","name":"birthday","id":19},{"rule":"optional","type":"Gender","name":"gender","id":20},{"rule":"optional","type":"uint64","name":"oxygen_id","id":21},{"rule":"optional","type":"uint64","name":"legacy_id","id":22}],"enums":[{"name":"MaxValues","syntax":"proto2","values":[{"name":"USERNAME_LENGTH","id":256},{"name":"PASSWORD_LENGTH","id":128}]},{"name":"Gender","syntax":"proto2","values":[{"name":"M","id":0},{"name":"F","id":1}]}]},{"name":"UserList","syntax":"proto2","fields":[{"rule":"repeated","type":"User","name":"owners","id":1},{"rule":"repeated","type":"User","name":"members","id":2}]},{"name":"EncryptionKey","syntax":"proto2","fields":[{"rule":"required","type":"bytes","name":"client_key","id":1},{"rule":"required","type":"uint64","name":"entity_id","id":2}],"enums":[{"name":"MaxValues","syntax":"proto2","values":[{"name":"CLIENTKEY_LENGTH","id":32}]}]},{"name":"MachineUserAccount","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"name","id":1},{"rule":"optional","type":"string","name":"id","id":2},{"rule":"optional","type":"string","name":"comment","id":3}],"enums":[{"name":"MaxValues","syntax":"proto2","values":[{"name":"USER_NAME_LENGTH","id":128},{"name":"USER_ID_LENGTH","id":100},{"name":"COMMENT_LENGTH","id":255}]}]},{"name":"MachineTypeConst","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"Desktop","id":1,"options":{"default":"Desktop"}},{"rule":"optional","type":"string","name":"Laptop","id":2,"options":{"default":"Laptop"}},{"rule":"optional","type":"string","name":"Netbook","id":3,"options":{"default":"Netbook"}},{"rule":"optional","type":"string","name":"Tablet","id":4,"options":{"default":"Tablet"}},{"rule":"optional","type":"string","name":"Phone","id":5,"options":{"default":"Phone"}}]},{"name":"Machine","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"href","id":1},{"rule":"optional","type":"uint64","name":"id","id":2,"options":{"default":0}},{"rule":"optional","type":"string","name":"name","id":3},{"rule":"optional","type":"string","name":"os_name","id":4,"options":{"default":"unknown"}},{"rule":"optional","type":"string","name":"os_version","id":5,"options":{"default":"unknown"}},{"rule":"optional","type":"string","name":"machine_type","id":6,"options":{"default":"unknown"}},{"rule":"repeated","type":"MachineUserAccount","name":"users","id":7},{"rule":"optional","type":"string","name":"heartbeat_guid","id":8},{"rule":"optional","type":"string","name":"license_key","id":9},{"rule":"optional","type":"bytes","name":"machine_key","id":10},{"rule":"optional","type":"string","name":"machine_guid","id":11},{"rule":"optional","type":"string","name":"silo_guid","id":12},{"rule":"optional","type":"string","name":"silo_version","id":13},{"rule":"optional","type":"string","name":"silo_internal_key","id":14}],"enums":[{"name":"MaxValues","syntax":"proto2","values":[{"name":"MACHINE_NAME_LENGTH","id":200},{"name":"OS_NAME_LENGTH","id":50},{"name":"OS_VERSION_LENGTH","id":45}],"options":{"allow_alias":true}}]},{"name":"MachineInfo","syntax":"proto2","fields":[{"rule":"optional","type":"uint64","name":"id","id":1,"options":{"default":0}},{"rule":"optional","type":"string","name":"name","id":2},{"rule":"optional","type":"string","name":"os_name","id":3,"options":{"default":"unknown"}},{"rule":"optional","type":"string","name":"os_version","id":4,"options":{"default":"unknown"}},{"rule":"optional","type":"string","name":"machine_type","id":5,"options":{"default":"unknown"}},{"rule":"repeated","type":"MachineUserAccount","name":"users","id":6},{"rule":"optional","type":"string","name":"machine_guid","id":7},{"rule":"optional","type":"string","name":"claim_key","id":8},{"rule":"optional","type":"uint64","name":"creation_time","id":9}],"enums":[{"name":"MaxValues","syntax":"proto2","values":[{"name":"MACHINE_NAME_LENGTH","id":50},{"name":"OS_NAME_LENGTH","id":50},{"name":"OS_VERSION_LENGTH","id":50}],"options":{"allow_alias":true}}]},{"name":"Notification","syntax":"proto2","fields":[{"rule":"optional","type":"uint64","name":"id","id":1},{"rule":"optional","type":"string","name":"uri","id":2},{"rule":"optional","type":"uint64","name":"ttl","id":3},{"rule":"optional","type":"string","name":"application","id":4},{"rule":"optional","type":"string","name":"device_type","id":5},{"rule":"optional","type":"uint64","name":"user","id":6},{"rule":"optional","type":"string","name":"machine","id":7},{"rule":"optional","type":"uint64","name":"flags","id":8},{"rule":"optional","type":"string","name":"language","id":9},{"rule":"optional","type":"uint64","name":"creation_time","id":10}]},{"name":"NotificationList","syntax":"proto2","fields":[{"rule":"repeated","type":"Notification","name":"notifications","id":1}]},{"name":"GroupInviteToken","syntax":"proto2","fields":[{"rule":"optional","type":"uint64","name":"id","id":1},{"rule":"optional","type":"string","name":"token_guid","id":2},{"rule":"optional","type":"uint64","name":"group_id","id":3},{"rule":"optional","type":"uint64","name":"application_id","id":4},{"rule":"optional","type":"string","name":"email","id":5},{"rule":"optional","type":"uint64","name":"creation_time","id":6}]},{"name":"SiloInfo","syntax":"proto2","fields":[{"rule":"optional","type":"uint64","name":"id","id":1},{"rule":"optional","type":"string","name":"guid","id":2},{"rule":"optional","type":"string","name":"version","id":3},{"rule":"optional","type":"string","name":"name","id":4},{"rule":"optional","type":"bytes","name":"silo_key","id":5},{"rule":"optional","type":"uint64","name":"creation_time","id":6}]},{"name":"MachineV2","syntax":"proto2","fields":[{"rule":"required","type":"MachineInfo","name":"machine_info","id":1},{"rule":"repeated","type":"SiloInfo","name":"silo_infos","id":2},{"rule":"optional","type":"string","name":"href","id":3}]},{"name":"Silo","syntax":"proto2","fields":[{"rule":"required","type":"MachineInfo","name":"machine_info","id":1},{"rule":"required","type":"SiloInfo","name":"silo_Info","id":2}]},{"name":"MachineList","syntax":"proto2","fields":[{"rule":"repeated","type":"Machine","name":"machines","id":1}]},{"name":"MachineListV2","syntax":"proto2","fields":[{"rule":"repeated","type":"MachineV2","name":"machines","id":1}]},{"name":"MachineComponent","syntax":"proto2","fields":[{"rule":"required","type":"uint32","name":"app_id","id":1},{"rule":"required","type":"string","name":"version","id":2}]},{"name":"MachineInventory","syntax":"proto2","fields":[{"rule":"repeated","type":"MachineComponent","name":"components","id":1}]},{"name":"AccountStatus","syntax":"proto2","fields":[{"rule":"required","type":"UserAccountStatus","name":"status","id":1}],"enums":[{"name":"UserAccountStatus","syntax":"proto2","values":[{"name":"UAS_NONE","id":0},{"name":"UAS_NORTON_ONLY","id":1}]}]},{"name":"SSOToken","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"token","id":1}],"enums":[{"name":"MaxValues","syntax":"proto2","values":[{"name":"TOKEN_LENGTH","id":1024}]}]},{"name":"MachineOwnerInfo","syntax":"proto2","fields":[{"rule":"required","type":"User","name":"user","id":1},{"rule":"required","type":"MachineInfo","name":"machine","id":2}]},{"name":"SessionTokenHeader","syntax":"proto2","fields":[{"rule":"required","type":"uint32","name":"version","id":1},{"rule":"required","type":"uint32","name":"key_index","id":2},{"rule":"required","type":"uint32","name":"signature_index","id":3},{"rule":"required","type":"bytes","name":"iv","id":4},{"rule":"required","type":"bytes","name":"signature","id":5}]},{"name":"SessionToken","syntax":"proto2","fields":[{"rule":"required","type":"SessionTokenHeader","name":"header","id":1},{"rule":"required","type":"bytes","name":"cipher_text","id":2}]},{"name":"ExtendedSessionAccess","syntax":"proto2","fields":[{"rule":"optional","type":"int32","name":"app_id","id":1},{"rule":"optional","type":"uint64","name":"ttlDataStoreRead","id":2},{"rule":"optional","type":"uint64","name":"ttlDataStoreWrite","id":3},{"rule":"optional","type":"uint64","name":"ttlRegisterMachine","id":4},{"rule":"repeated","type":"int32","name":"app_list","id":5}]},{"name":"Acl","syntax":"proto2","fields":[{"rule":"required","type":"uint64","name":"principal","id":1},{"rule":"required","type":"uint64","name":"target","id":2},{"rule":"optional","type":"uint32","name":"application","id":3},{"rule":"optional","type":"bytes","name":"permission","id":4},{"rule":"optional","type":"EntityType","name":"principalType","id":5},{"rule":"optional","type":"EntityType","name":"targetType","id":6},{"rule":"repeated","type":"string","name":"accessGuids","id":7},{"rule":"optional","type":"bool","name":"trusted","id":8}]},{"name":"AclList","syntax":"proto2","fields":[{"rule":"repeated","type":"Acl","name":"acl_list","id":1}]},{"name":"Delegation","syntax":"proto2","fields":[{"rule":"required","type":"uint64","name":"machine_id","id":1},{"rule":"repeated","type":"string","name":"permission","id":2}]},{"name":"DelegationList","syntax":"proto2","fields":[{"rule":"repeated","type":"Delegation","name":"delegation","id":1}]},{"name":"Delegator","syntax":"proto2","fields":[{"rule":"required","type":"User","name":"user","id":1},{"rule":"optional","type":"string","name":"category","id":2},{"rule":"repeated","type":"Delegation","name":"delegations","id":3}]},{"name":"DelegatorList","syntax":"proto2","fields":[{"rule":"repeated","type":"Delegator","name":"delegators","id":1}]},{"name":"Entity","syntax":"proto2","fields":[{"rule":"optional","type":"uint64","name":"id","id":1,"options":{"default":0}},{"rule":"optional","type":"string","name":"name","id":2,"options":{"default":"unknown"}},{"rule":"optional","type":"string","name":"application","id":3,"options":{"default":"unknown"}}],"enums":[{"name":"MaxValues","syntax":"proto2","values":[{"name":"ENTITY_NAME_LENGTH","id":50},{"name":"ENTITY_APPLICATION_LENGTH","id":50}],"options":{"allow_alias":true}}]},{"name":"EntityList","syntax":"proto2","fields":[{"rule":"repeated","type":"Entity","name":"entities","id":1}]},{"name":"TrustedServiceToken","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"token","id":1},{"rule":"optional","type":"uint32","name":"ttlInMinute","id":2}]},{"name":"UserAttributes","syntax":"proto2","fields":[{"rule":"optional","type":"bool","name":"use_upper_machine_limit","id":1}]},{"name":"SiloCache","syntax":"proto2","fields":[]},{"name":"MBApiRequest","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"request","id":1},{"rule":"optional","type":"uint64","name":"id","id":2},{"rule":"optional","type":"string","name":"authentication","id":3}]},{"name":"ChallengeData","syntax":"proto2","fields":[{"rule":"required","type":"bytes","name":"privateKey","id":1},{"rule":"required","type":"bytes","name":"publicKey","id":2},{"rule":"required","type":"bytes","name":"salt","id":3},{"rule":"optional","type":"bool","name":"force","id":4},{"rule":"optional","type":"bytes","name":"challengeData","id":5},{"rule":"optional","type":"bytes","name":"challengeDecrypted","id":6},{"rule":"optional","type":"uint64","name":"user_id","id":7},{"rule":"optional","type":"uint64","name":"session_id","id":8}]},{"name":"SymcRSCookieHeader","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"name","id":1},{"rule":"required","type":"string","name":"value","id":2},{"rule":"optional","type":"string","name":"expires","id":3}]},{"name":"SymcRSCookieHeaderList","syntax":"proto2","fields":[{"rule":"repeated","type":"SymcRSCookieHeader","name":"cookies","id":1}]},{"name":"id","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"OXYGEN_ACL_GUID","id":1,"options":{"default":"F8852F19-F8C5-46a1-99C3-4209748693F3"}},{"rule":"optional","type":"string","name":"OXYGEN_SERVICE_ID","id":2,"options":{"default":"o2api.norton.com"}},{"rule":"optional","type":"int32","name":"ACL_FULL_ACCESS","id":3,"options":{"default":-1}}]},{"name":"AclGuidV2","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"ACL_GUID_REGISTER_MACHINE","id":1,"options":{"default":"0D8F0C65-5BAA-4bb9-834C-808A8CC3325D"}},{"rule":"optional","type":"string","name":"ACL_GUID_DATASTORE_READ","id":2,"options":{"default":"4B05419E-9878-464e-B55D-F208B07F6AA7"}},{"rule":"optional","type":"string","name":"ACL_GUID_DATASTORE_WRITE","id":3,"options":{"default":"5C40FD9F-3373-4a1b-BEAB-DA9E409A7B62"}},{"rule":"optional","type":"string","name":"ACL_GUID_MACHINE_OWNER_INFO","id":4,"options":{"default":"44396799-3A63-4385-8E0F-648723094FE3"}},{"rule":"optional","type":"string","name":"ACL_GUID_FULL_ACCESS","id":5,"options":{"default":"42305456-406C-4D7C-8DB8-942D7B48993A"}}]}],"enums":[{"name":"AclPermissionBits","syntax":"proto2","values":[{"name":"ACCESS_ACL_WRITE","id":1},{"name":"ACCESS_READ","id":2},{"name":"ACCESS_WRITE","id":4}]},{"name":"EntityType","syntax":"proto2","values":[{"name":"USER","id":0},{"name":"SILO","id":1},{"name":"GROUP","id":2},{"name":"OXYGEN_ENTITY","id":3}]},{"name":"AclBit","syntax":"proto2","values":[{"name":"ACL_REGISTER_MACHINE","id":16},{"name":"ACL_DATASTORE_READ","id":1},{"name":"ACL_DATASTORE_WRITE","id":2},{"name":"ACL_MACHINE_OWNER_INFO","id":3}]}],"isNamespace":true}],"isNamespace":true},{"name":"error","fields":[],"syntax":"proto2","messages":[{"name":"messages","fields":[],"syntax":"proto2","options":{"optimize_for":"SPEED"},"messages":[{"name":"Error","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"error_type","id":1},{"rule":"required","type":"Code","name":"error_code","id":2},{"rule":"optional","type":"string","name":"error_desc","id":3}],"enums":[{"name":"Code","syntax":"proto2","values":[{"name":"AUTH_INVALID_TOKEN","id":1},{"name":"AUTH_BAD_CREDENTIALS","id":2},{"name":"AUTH_GENERIC_ERROR","id":3}]}]}],"isNamespace":true}],"isNamespace":true}],"isNamespace":true}],"isNamespace":true}],"isNamespace":true}],"isNamespace":true},{"name":"spoc","fields":[],"syntax":"proto2","options":{"java_package":"com.symantec.spoc.messages","optimize_for":"SPEED"},"messages":[{"name":"SpocRegistrationArray","syntax":"proto2","fields":[{"rule":"repeated","type":"SpocRegistration","name":"registration","id":1}]},{"name":"SpocRegistration","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"entity","id":1},{"rule":"required","type":"int32","name":"channel","id":2},{"rule":"required","type":"int32","name":"revision","id":3},{"rule":"optional","type":"bytes","name":"payload","id":4},{"rule":"repeated","type":"NotificationService","name":"NotificationService","id":5},{"rule":"optional","type":"string","name":"ApplicationID","id":6}]},{"name":"NotificationService","syntax":"proto2","fields":[{"rule":"required","type":"NotificationServiceType","name":"ServiceType","id":1},{"rule":"required","type":"string","name":"RegistrationID","id":2},{"rule":"optional","type":"string","name":"CertID","id":3},{"rule":"optional","type":"MessagePriority","name":"Priority","id":4,"options":{"default":"NORMAL"}},{"rule":"optional","type":"int64","name":"modified_time","id":5}]},{"name":"SpocBumpArray","syntax":"proto2","fields":[{"rule":"repeated","type":"SpocBump","name":"bump","id":1}]},{"name":"SpocBump","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"entity","id":1},{"rule":"required","type":"int32","name":"channel","id":2},{"rule":"optional","type":"bytes","name":"payload","id":3},{"rule":"optional","type":"string","name":"ApplicationID","id":4},{"rule":"optional","type":"ServiceData","name":"serviceData","id":5}]},{"name":"ServiceData","syntax":"proto2","fields":[{"rule":"optional","type":"string","name":"apsJson","id":1}]},{"name":"SpocPollArray","syntax":"proto2","fields":[{"rule":"repeated","type":"SpocPoll","name":"poll","id":1}]},{"name":"SpocPoll","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"entity","id":1},{"rule":"required","type":"int32","name":"channel","id":2},{"rule":"optional","type":"int32","name":"revision","id":3}]},{"name":"SpocStateArray","syntax":"proto2","fields":[{"rule":"repeated","type":"SpocState","name":"state","id":1}]},{"name":"SpocState","syntax":"proto2","fields":[{"rule":"required","type":"string","name":"entity","id":1},{"rule":"required","type":"int32","name":"channel","id":2},{"rule":"optional","type":"int64","name":"timestamp","id":3},{"rule":"optional","type":"int32","name":"online","id":4},{"rule":"optional","type":"int64","name":"timeout","id":5}]}],"enums":[{"name":"SPOCChannel","syntax":"proto2","values":[{"name":"SC_NOREV","id":0},{"name":"SC_STATE","id":1},{"name":"SC_DATASTORE_UPDATE","id":2},{"name":"SC_REGISTRATION_UPDATE","id":3},{"name":"SC_DATA_REQUEST","id":4},{"name":"SC_REMOTE_MANAGEMENT_REQUEST","id":5},{"name":"SC_ENTITLEMENT_UPDATE","id":6},{"name":"SC_EVENT_LOG_UPDATE","id":7},{"name":"SC_INCENTIVES_UPDATE","id":8},{"name":"SC_REGISTRATION_DELETE","id":9},{"name":"SC_EVENT_LOG_LOCATION","id":10},{"name":"SC_EVENT_LOG_NMS_MSWS","id":11},{"name":"SC_PRODUCT_ENTITLEMENT_UPDATE","id":12},{"name":"SC_SUBSCRIPTION_UPDATE","id":13},{"name":"SC_NORTON_HOME_UPDATE","id":20},{"name":"SC_SE_PROXY","id":30},{"name":"SC_NMS_COMMAND","id":31},{"name":"SC_PDM_POLICY","id":40},{"name":"SC_PDM_COMMAND","id":41},{"name":"SC_DCS_COMMAND","id":50},{"name":"SC_MTS_MESSAGE","id":100},{"name":"SC_MAX","id":500}]},{"name":"NotificationServiceType","syntax":"proto2","values":[{"name":"NS_GCM","id":1},{"name":"NS_APNS","id":2},{"name":"NS_WNS","id":3},{"name":"NS_RMQ","id":4},{"name":"NS_FCM","id":5}]},{"name":"MessagePriority","syntax":"proto2","values":[{"name":"HIGH","id":1},{"name":"NORMAL","id":2}]}],"isNamespace":true}],"isNamespace":true}')},"./source/O2AuthScd.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.authSCD=void 0,(e=function(){this.SSO_DOMAIN_NAME="login",this.SSO_LOGOUT_URL="https://"+this.SSO_DOMAIN_NAME+".norton.com/sso/logout",this.NSL_URL="https://"+this.SSO_DOMAIN_NAME+".norton.com",this.SSO_LOGIN_URL=this.NSL_URL+"/sso/idp",this.GOOGLE_LOGIN_KEY="google",this.APPLE_LOGIN_KEY="apple",this.BT_PARTNER_LOGIN_KEY="bt",this.EE_PARTNER_LOGIN_KEY="ee",this.SSO_OPEN_ID_URL="https://"+this.SSO_DOMAIN_NAME+".norton.com/sso/idp/OPENID",this.SSO_OPENID_CONNECT_LOGIN_URL="https://"+this.SSO_DOMAIN_NAME+".norton.com/sso/idp/OIDC",this.SSO_OPENID_CONNECT_TOKEN_URL="https://"+this.SSO_DOMAIN_NAME+".norton.com/sso/oidc1/tokens",this.SSO_OPENID_CONNECT_DISCOVER_URL="https://"+this.SSO_DOMAIN_NAME+".norton.com/sso/oidc1/token/jwks",this.IDSAFE_PORTAL_URL="https://identitysafe.norton.com",this.O2_URL="https://o2.norton.com/api/1",this.DS_URL="https://o2-ds.norton.com/api/datastore/v2",this.SPOC_URL="https://spoc-pool-gtm.norton.com",this.SPOC_V2_URL="https://spocnotify.norton.com",this.SPOC_V2_PUSH_HOST="spocpush.norton.com",this.SPOC_V2_PUSH_URL="https://"+this.SPOC_V2_PUSH_HOST,this.USER_AGENT="XBP/7.1.0-tags-release.4/Firefox/Oxygen",this.SPOC_USER_AGENT="XBP/OCL",this.SPOC_DEFAULT_TIMEOUT=3600,this.SPOC_RETRY_COUNT=5,this.RETRY_TIMEOUT=3600,this.DEFAULT_TTL=1814400,this.DEFAULT_ACL_TTL=15552e3}).prototype.setMachineGUID=function(e){null!=e&&(this.machineGUID=e)},e.prototype.getMachineGUID=function(){if(null==this.machineGUID)throw Error("machineGUID is not set. SymO2.ready is not called");return this.machineGUID},e.prototype.serialize=function(){return{sso:this.NSL_URL,portal_interstitial_url:this.IDSAFE_PORTAL_URL,o2:this.O2_URL,"o2-ds":this.DS_URL,spoc:this.SPOC_URL,machineGUID:this.getMachineGUID(),userAgent:this.USER_AGENT,spocUserAgent:this.SPOC_USER_AGENT,ssoOpenIDConnectLoginURL:this.SSO_OPENID_CONNECT_LOGIN_URL,ssoOpenIDConnectTokenURL:this.SSO_OPENID_CONNECT_TOKEN_URL}},e=new e,t.authSCD=e},"./source/O2Constants.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.constants={requestType:{POST_METHOD:"POST",GET_METHOD:"GET",PUT_METHOD:"PUT",DELETE_METHOD:"DELETE",HEAD_METHOD:"HEAD"},header:{AUTHORIZATION:"Authorization",REQUEST_ID:"X-Symc-Request-Id",BASIC_AUTHENTICATION:"WWW-Authenticate",SYMC_MACHINE_ID:"X-Symc-Machine-ID",CHALLENGES:"X-Symc-Challenges",ORIGIN_HEADER:"X-Symc-Origin",ETAG:"ETag",IF_MATCH:"if-match",RANGE:"Range",ACCEPT:"Accept",CONTENT_TYPE:"Content-Type",CORS:"Access-Control-Allow-Origin",USER_AGENT:"X-Symc-User-Agent",SYMC_AUTH:"X-Symc-Auth",SYMC_COOKIE:"X-Symc-Cookie",CONNECTION:"Connection",KEEP_ALIVE:"Keep-Alive",NOT_MODIFIED:"304 Not Modified",SYMC_EXPECT:"X-Symc-Expect",SYMC_HOST:"host",SCHEMA_ERROR:"X-Symc-SchemaErrors"},contentType:{PROTOBUF:"application/x-protobuf",JSON:"application/json",FORM_URL_ENCODED:"application/x-www-form-urlencoded"},responseType:{ARRAY_BUFFER:"arraybuffer"},domain:{COOKIES:"com.symantec.cookies"},oxygen:{ETAG:"ETag"},session:{LLT:"llt",ST:"st",EMAIL:"email",NA_GUID:"naguid",USER_ID:"userid",FIRST_NAME:"firstname",LAST_NAME:"lastname",ACCESS_TOKEN:"accessToken",ACCESS_TOKEN_TTL:"accessToken_ttl",DEFAULT_ACCESS_TOKEN_TTL:15e5,ID_TOKEN:"idToken",ID_TOKEN_TTL:"idToken_ttl",DEFAULT_ID_TOKEN_TTL:15e5,PARTNER_INFO:"partnerInfo",THIRD_PARTY_INFO:"thirdPartyInfo"},spoc:{internalErrors:{SUCCESS:0,STOPPED:1,CANCELLED:2,UNRECOVERABLE:3,UNKNOWN:4},INTERNAL_DOMAIN:"internal",HTTP_DOMAIN:"http"},sso:{httpErrorResponse:{primaryStatus:{SUCCESS:"0000",EBE_ERROR:"0001",SSO_ERROR:"0002"},detailedStatus:{ssoError:{TOKEN_EXPIRED:"0001",TOKEN_INVALID:"0002",INVALID_CLIENT_ID:"0003",UNAUTHORIZED_SERVICE:"0004",ACL_LACKS_PRIVILEGE:"0005",RATE_LIMITED:"0010",NULL_ACL:"0020",NULL_CONTEXT:"0021",CONTENT_LENGTH_MAXED:"0022",MALFORMED_REQUEST:"0023",INVALID_SIGNATURE:"0024",TIMESTAMP_EXPIRED:"0025",TIMESTAMP_REQUIRED:"0026",TIMESTAMP_DUPLICATE:"0027",MACHINE_ID_REQUIRED:"0028",AUTHORIZATION_MAXED_OUT:"0029",INVALID_CERTIFICATE:"0040",INVALID_DATE_HEADER:"0041",INVALID_TEMPLATE_GUID:"0050",MISSING_EMAIL_ADDRESS:"0051",MISSING_ISSUER:"0052",INVALID_EMAIL_LENGTH:"0053",INVALID_EMAIL:"0054",INVALID_PHONE_NUMBER:"0055",USER_DOES_NOT_EXIST:"2104",INVALID_ACCOUNT_LOGIN:"2106"}}}},sessionstorage:{session:{SCOPES_KEY:"E5F18A7B-DE18-46C0-A981-388882EBD8A5",RETURNURL_KEY:"55141737-0D35-46C0-AFAD-5C3E6D753CF4",CLIENTID_KEY:"CD752812-2E90-4363-B60C-D84DC1E2EB0A",CLIENTSECRET_KEY:"A4335462-47A4-40A7-A694-2092B5FF9394"},naloginmanager:{PREVAUTH_TABID_KEY:"A01608BC-554E-4EB5-9588-6939A544235F"}},httpStatusCode:{OK:200,REQUEST_TIMEOUT:408,INTERNAL_SERVER_ERROR:500,NOT_FOUND:404},MACHINE_GUID:"machineGUID",SSO_SETUP_URL:"content/ui/ssosetup.html",SEAMLESS_ONBOARD_URL:"content/ui/onboardSetup.html",OCL_CONTAINER:"oclv2",OCL_CONTAINER_OLD:"ocl",OCL_ENCRYPTION_KEY:"oclSecureContainerKey",GLOBAL_CONTAINER:"global",DEFAULT_XHR_TIMEOUT:6e4,openIDConnect:{ALG:"RS256"},TENANTID_KEY:"X-NLOK-Tenant-ID",REQUEST_TRACING:{TRACEID_KEY:"X-NLOK-Trace-ID",ATTEMPT_COUNT_PLACEHOLDER:"ATTEMPT_COUNT"}}},"./source/O2HeaderUtils.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderUtils=void 0,e=r("@browser-services/bfw");var n=r("./source/O2InitExtension.js"),o=r("./source/O2InternalsCS.js"),i=(r=e.utils).isNil,s=r.isFunction,a=r.isObject,u=r.isntNil,l=e.logger;t.HeaderUtils=function(){},t.HeaderUtils.addAdditionalHeadersToRequest=function(e,t){var r;if(i(e)||!a(t))return l.debug("Invalid arguments"),r;if(!a(n.init.config)||!s(n.init.config.REQUEST_HEADER_PARAMS_GETTER))return l.debug("Please set configs before calling this function"),r;var c=n.init.config.REQUEST_HEADER_PARAMS_GETTER();if(!a(c))return l.debug("request params from client should be a object"),r;var d=Object.keys(c),f=0;return u(t.attemptCount)&&0<parseInt(t.attemptCount,10)&&(f=parseInt(t.attemptCount,10)),d.forEach((function(n){c[n]===o.constants.REQUEST_TRACING.ATTEMPT_COUNT_PLACEHOLDER&&u(t.attemptCount)?e.append(n,t.attemptCount):n===o.constants.REQUEST_TRACING.TRACEID_KEY?1<f&&u(t.traceID)?(e.append(n,t.traceID),r=t.traceID):(e.append(n,c[n]),r=c[n]):e.append(n,c[n])})),r}},"./source/O2Index.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("./source/O2Internals.js"),!0),t.default=e},"./source/O2Init.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Init=void 0;var n=r("@browser-services/bfw"),i=r("./source/O2Internals.js"),s=n.settings,a=n.cookies,u=n.secureSettings,l=n.extensionAdapter,c=n.logger,d=(e=n.utils).isNil,f=e.isntNil,p=e.isObject;t.Init=function(){},t.Init.prototype._getEncryptionKey=function(){var e,t,r;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return e=a.get(i.constants.OCL_ENCRYPTION_KEY),o.yield(new Promise((function(t,r){s.loadSettingsContainer(i.constants.GLOBAL_CONTAINER,!0,(function(n,o){n&&!d(o)||(f(e)&&i.telemetryWrapper.sendOIDCTokenEncryptionKeyMigrationFailure(),r("Unable to load Global container")),t(o)}))})),2);case 2:if(t=o.yieldResult,f(e))return o.return((t.setObject(i.constants.OCL_ENCRYPTION_KEY,e),i.telemetryWrapper.sendOIDCTokenEncryptionKeyMigrationSuccess(),a.set(i.constants.OCL_ENCRYPTION_KEY,e),e));if(e=t.getObject(i.constants.OCL_ENCRYPTION_KEY),!d(e)){o.jumpTo(3);break}return o.yield(new Promise((function(e){u.deleteSecureSettingsContainer(i.constants.OCL_CONTAINER,(function(t){e(t)}))})),4);case 4:r=o.yieldResult,c.info("Deleted "+i.constants.OCL_CONTAINER+" as Encryption key is not available. deletion status: "+r),e=n.utils.createNewGuid(),t.setObject(i.constants.OCL_ENCRYPTION_KEY,e);case 3:return o.return(e)}}))},t.Init.prototype._setContainer=function(e){i.oxygen.setContainer(e),i.session.setContainer(e)},t.Init.prototype.loadOCLContainer=function(){var e=this;return f(this.oclPromise)||(this.oclPromise=new Promise((function(t,r){var s;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress)return o.yield(e._getEncryptionKey(),2);s=o.yieldResult,u.loadSecureSettingsContainer(i.constants.OCL_CONTAINER,s,(function(o,s,a){if(!1===o||d(s))return r("Unable to load OCL container:"+a);var c=function(){e._setContainer(s),u.deleteSecureSettingsContainer(i.constants.OCL_CONTAINER_OLD),t("OCL container loaded successfully")},f=l.getExtensionId();s.copySecureSettings(i.constants.OCL_CONTAINER_OLD,f,(function(e){if(!e&&n.globals.BROWSER===n.constants.BROWSER_TYPE.EDGE_CHROMIUM)return d(e={lcccdlklhahfmobgpnilndimkankpnkg:"EdgeExtension_SymantecCorporation5478111E43ACF_v68kp9n051hdp",bdaafgjhhjkdplpffldcncdignokfkbo:"EdgeExtension_SymantecCorporationNortonSafeWeb_v68kp9n051hdp"}[f])?c():void s.copySecureSettings(i.constants.OCL_CONTAINER_OLD,e,(function(){c()}));c()}))})),o.jumpToEnd()}))}))),this.oclPromise},t.Init.prototype.loadOCLSessionSettings=function(){return new Promise((function(e,t){i.o2SessionSettings.initialize((function(r){r?e("OCL Session Settings initialized"):t(Error("Failed to initialize OCL Session Settings"))}))}))},t.Init.prototype.setMachineGUID=function(){return f(this.globalPromise)||(this.globalPromise=new Promise((function(e,t){s.loadSettingsContainer(i.constants.GLOBAL_CONTAINER,!0,(function(r,o,s){if(!1===r)t("Unable to load GLOBAL container:"+s);else{var a=o.getObject(i.constants.MACHINE_GUID);d(a)?(a=n.utils.createNewGuid(),o.setObject(i.constants.MACHINE_GUID,a,(function(r,n){r?(i.authSCD.setMachineGUID(a),e("GLOBAL container loaded successfully")):t("Could not set machineGUID : "+n)}))):(i.authSCD.setMachineGUID(a),e("GLOBAL container loaded successfully"))}}))}))),this.globalPromise},t.Init.prototype.loadCookieContainer=function(){return f(this.cookieContainerPromise)||(this.cookieContainerPromise=new Promise((function(e,t){i.cookieManager.load((function(r,n){return r?e("Cookie Container loaded"):t("Cookie Container failed to load with error: "+n)}))}))),this.cookieContainerPromise},t.Init.prototype._setConfigs=function(e){p(e)&&(this.config=e)},t.Init.prototype.ready=function(e){var t=this;return f(this.readyPromise)||(this.readyPromise=new Promise((function(r,n){t._setConfigs(e),Promise.all([t.loadOCLContainer(),t.setMachineGUID(),t.loadCookieContainer(),t.loadOCLSessionSettings(),i.ssoSetup.init()]).then((function(e){r(e)}),(function(e){n(e)}))}))),this.readyPromise}},"./source/O2InitExtension.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,e=r("@browser-services/bfw");var n=r("./source/O2Init.js"),i=r("./source/O2Internals.js"),s=e.utils,a=e.settings,u=e.secureSettings,l=e.logger,c=(r=e.utils).isNil,d=r.isntNil;r=function(){return n.Init.apply(this,arguments)||this},o.inherits(r,n.Init),r.prototype._getEncryptionKey=function(){var e,t,r;return o.asyncExecutePromiseGeneratorProgram((function(n){return 1==n.nextAddress?n.yield(new Promise((function(e,t){a.loadSettingsContainer(i.constants.GLOBAL_CONTAINER,!0,(function(r,n){r&&!c(n)||t("Unable to load Global container"),e(n)}))})),2):3!=n.nextAddress?(e=n.yieldResult,t=e.getObject(i.constants.OCL_ENCRYPTION_KEY),d(t)?n.return(t):n.yield(new Promise((function(e){u.deleteSecureSettingsContainer(i.constants.OCL_CONTAINER,(function(t){e(t)}))})),3)):(r=n.yieldResult,n.return((l.info("Deleted "+i.constants.OCL_CONTAINER+" as key unavailable. deletion status: "+r),t=s.createNewGuid(),e.setObject(i.constants.OCL_ENCRYPTION_KEY,t),t)))}))},r=new r,t.init=r},"./source/O2Internals.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./source/proto/O2Proto.js");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r("./source/O2Constants.js");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r("./source/O2AuthScd.js");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=r("./source/O2SessionSettings.js");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=r("./source/utils/O2Utils.js");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var u=r("./source/telemetry/O2TelemetryWrapper.js");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=r("./source/sso/O2Sso.js");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var c=r("./source/session/O2Session.js");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var d=r("./source/cookies/O2CookieManager.js");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=r("./source/oxygen/O2Oxygen.js");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=r("./source/O2NALoginManager.js");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var h=r("./source/cct/O2CCT.js");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var _=r("./source/spoc/O2SpocRequest.js");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var E=r("./source/spoc/O2SpocRegistration.js");Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var g=r("./source/spoc/O2SpocManager.js");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var m=r("./source/sso/O2SSOSetup.js");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var y=r("./source/O2InitExtension.js");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}))},"./source/O2InternalsCS.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./source/O2Constants.js");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r("./source/O2AuthScd.js");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},"./source/O2NALoginManager.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.naLoginManager=void 0,e=r("@browser-services/bfw");var n=r("urijs"),o=r("./source/O2Internals.js"),i=o.constants.sessionstorage.naloginmanager.PREVAUTH_TABID_KEY,s=e.extensionAdapter,a=e.utils,u=e.serviceWorkerKeepAlive,l=(r=e.utils).isNil,c=r.isntNil,d=r.isFunction;(r=function(){}).prototype.loginToNA=function(){this._launchSSO()},r.prototype._launchSSO=function(){var e=this,t=o.sso.getOpenIDConnectLoginURL("142b5c23-5ba5-4cc9-baef-3cc1c45c595b");this._focusExistingLoginTab(t,(function(r){r||s.createTab(t,(function(t){s.addOnBeforeRequestEventListener(e._onAuthReturnUrl,[o.session.getReturnURL()+"?*"]),s.isManifestV3Extension()&&(t=s.getTabID(t),e._startKeepAliveConnection(t))}))}))},r.prototype._startKeepAliveConnection=function(e){u.startKeepAliveConnection(e,18e4)},r.prototype._focusExistingLoginTab=function(e,t){if(!d(t))throw Error("No callback function defined");s.getTabsWithURL(e,(function(r){c(s.getLastError())||l(r)||l(r[0])||l(r[0].url)?t(!1):(r=r[0]).url===e?(s.activateTab(r.id),s.focusWindow(s.getWindowIDForTab(r)),t(!0)):t(!1)}))},r.prototype._onAuthReturnUrl=function(e){var t=this;if(l(e)||(s.removeOnBeforeRequestEventListener(this._onAuthReturnUrl),l(e.tabId)||l(e.url)))this._publishAuthEvent("LOGIN_FAILURE");else if(o.o2SessionSettings.get(i)!==e.tabId){if(o.o2SessionSettings.set(i,e.tabId),a.urlWithoutQueryParameters(e.url,!0)!==o.session.getReturnURL())return void this._publishAuthEvent("LOGIN_FAILURE");s.closeTab(e.tabId);var r=new n(e.url).query(!0);if(l(r.code)||l(r.state))this._publishAuthEvent("LOGIN_FAILURE");else if("142b5c23-5ba5-4cc9-baef-3cc1c45c595b"===r.state){r=Object.keys(r).map((function(e){return e+"="+r[e]}));try{o.sso.parseAuthCodeAndGetTokens(r,(function(e){200===e?t._publishAuthEvent("LOGIN_SUCCESS"):t._publishAuthEvent("LOGIN_FAILURE")}))}catch(e){this._publishAuthEvent("LOGIN_FAILURE")}}else this._publishAuthEvent("LOGIN_FAILURE")}},r.prototype._publishAuthEvent=function(e){a.createCustomHTMLEvent("NA_LOGIN_STATUS",e)},r=new r,t.naLoginManager=r},"./source/O2SessionSettings.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.o2SessionSettings=void 0;var n=(e=r("@browser-services/bfw")).sessionSettings,o=e.utils,i=e.logger,s=o.isNil;(e=function(){this.settingsContainer=null}).prototype.initialize=function(e){var t=this;if(this.settingsContainer=null,!o.isFunction(e))throw Error("callback must be a function");n.loadSettingsContainer("SessionSettingsContainer",!0,(function(r,n){if(!1===r||s(n))return i.error("failed to load IDSAFE_GLOBAL_SETTINGS_CONTAINER"),void e(!1);t.settingsContainer=n,e(!0)}))},e.prototype.get=function(e){if(!s(this.settingsContainer))return this.settingsContainer.getObject(e);i.error("settings not initialized")},e.prototype.set=function(e,t){s(this.settingsContainer)?i.error("settings not initialized"):this.settingsContainer.setObject(e,t)},e=new e,t.o2SessionSettings=e},"./source/cct/O2CCT.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.cct=void 0,e=r("@browser-services/bfw");var n=r("./source/O2Internals.js"),o=(r=e.utils).isNil,i=r.isSuccessCode,s=r.isFunction,a=r.isEmptyObject,u=e.logger;(r=function(){}).prototype.storeOIDCTokensAndConnectToOxygen=function(e,t){if(!s(t))throw Error("Callback has to be a function");if(a(e.oidctokens))return u.error("OidcTokens cannot be null"),void t(!1,Error("OidcTokens cannot be null"));var r=e.oidctokens;e=r.access_token;var l=r.refresh_token;if(r=r.id_token,o(e)||o(l)||o(r))return u.error("Tokens cannot be null"),void t(!1,Error("Tokens cannot be null"));n.sso.parseAndValidateJWT(r)?(n.session.setLLT(l),n.session.setIDToken(r),n.session.setAccessToken(e),n.oxygen.getUserID((function(e,r){if(!1===i(e))return n.session.logout(),void setTimeout((function(){t(!1,r)}),1);setTimeout((function(){t(!0,null)}),1)}),e)):setTimeout((function(){t(!1,Error("Token could not be verified"))}),1)},r=new r,t.cct=r},"./source/cookies/O2CookieManager.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.cookieManager=void 0;var o=r("@browser-services/bfw"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),s=r("./source/O2Internals.js"),a=o.logger,u=(e=o.utils).isNil,l=e.isntNil,c=e.isFunction,d=e.isString,f=s.proto.com.symantec.oxygen.rest.accounts.messages.SymcRSCookieHeaderList;(e=function(){this.cookieSettingsContainer=null}).prototype.load=function(e){var t=this;if(!c(e))throw Error("Callback should be a non-null function");o.sessionSettings.loadSettingsContainer(s.constants.domain.COOKIES,!0,(function(r,n,o){t.cookieSettingsContainer=n,e(r,o)}))},e.prototype.unload=function(){this.cookieSettingsContainer=null},e.prototype.get=function(e){if(!u(this.cookieSettingsContainer)){if(!d(e))throw Error("url should be a string");var t=this.cookieSettingsContainer.getObject(e);return u(t)||u(t.expires)?(a.info("Did not find any cookie stored for url : "+e),null):(new Date).getTime()>=t.expires?(this.remove(e),null):t.cookie}a.info("CookieManager is not loaded ")},e.prototype.add=function(e,t){if(u(this.cookieSettingsContainer))return a.info("CookieManager is not loaded "),!1;if(!d(e))throw Error("url should be a string");if(u(t))throw Error("Value cannot be null");var r=decodeURIComponent(t);r=i.util.decode64(r),r=s.utils.createUInt8BufferFromStringBuffer(r);var n=f.decode(r);return r=new Date,l(n.cookies)&&l(n.cookies[0].expires)?r.setSeconds(r.getSeconds()+parseInt(n.cookies[0].expires)):r.setSeconds(r.getSeconds()+86399),n={},(new Date).getTime()>=r.getTime()?(a.error("Cookie expired "+s.constants.header.SYMC_COOKIE+" for domain: "+e),!1):(n.expires=r.getTime(),n.cookie=t,this.cookieSettingsContainer.setObject(e,n),!0)},e.prototype.remove=function(e){if(u(this.cookieSettingsContainer))return a.info("CookieManager is not loaded "),!1;if(!d(e))throw Error("url should be a string");return this.cookieSettingsContainer.removeObject(e),!0},e.prototype.removeAll=function(e){return this.cookieSettingsContainer=null,o.sessionSettings.deleteSettingsContainer(s.constants.domain.COOKIES,e),!0},e=new e,t.cookieManager=e},"./source/oxygen/O2Oxygen.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.oxygen=void 0;var i=r("@browser-services/bfw"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),a=r("./source/O2Internals.js"),u=r("./source/O2HeaderUtils.js"),l=i.logger,c=(e=i.utils).isNil,d=e.isntNil,f=e.isFunction,p=e.isString,h=e.isArray,_=e.isSuccessCode,E=(e=a.proto.com.symantec.oxygen.rest.accounts.messages).EncryptionKey,g=e.ExtendedSessionAccess,m=(e=a.proto.com.symantec.oxygen.datastore.v2.messages).NodeList,y=e.InvalidNodeList,S=e.DatastoreRangeQuery,T=i.constants.httpStatusCodes;(e=function(){this.oclContainer=null}).prototype.setContainer=function(e){if(c(e))throw Error("container cannot be null");this.oclContainer=e},e.prototype.getUserID=function(e,t){if(!1===f(e))throw Error("Callback cannot be nil/undefined and must be of type function");var r=a.authSCD.O2_URL+"/users/key";this.oxygenConnection(r,a.constants.requestType.GET_METHOD,t,(function(t,n){var s,u,c;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(!_(t)){setTimeout((function(){a.telemetryWrapper.sendOxygenErrorCodeWithFullUrl(t,r+"-"+a.constants.requestType.GET_METHOD),e(t,n)}),1),o.jumpTo(0);break}return s=null,o.setCatchFinallyBlocks(3),o.yield(n.arrayBuffer(),5);case 5:u=o.yieldResult,s=E.decode(u),a.session.setUserID(s.getEntityId().toNumber()),i.utils.isNil(s.getEntityId().toNumber())&&l.error("getUserID :: EntityID is nil"),a.session.setClientKey(s.getClientKey()),o.leaveTryBlock(4);break;case 3:return c=o.enterCatchBlock(),o.return((l.error(c),void setTimeout((function(){e(null,c.message)}),1)));case 4:setTimeout((function(){e(t,null)}),1),o.jumpToEnd()}}))}))},e.prototype.putNodes=function(e,t,r,n){if(c(e))throw Error("putNodes :: EntityID cannot be null");if(c(t))throw Error("Node list cannot be null");if(0==t instanceof m)throw Error("nodeList is not an instance of NodeList class");if(0===t.getNodes().length)throw Error("Cannot upload empty node list without any nodes");if(!1===f(r))throw Error("Callback cannot be null or is not a function");var i=null;i=c(n)?{}:n,n=this.oclContainer.getObject(a.constants.oxygen.ETAG),d(n)&&(i[a.constants.header.IF_MATCH]=n),this.oxygenConnection(a.authSCD.DS_URL+"/"+e,a.constants.requestType.PUT_METHOD,null,(function(e,t){var n,i,s,u,c;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(i=n=null,s=t.headers.get(a.constants.header.CHALLENGES),d(s)&&((i={})[a.constants.header.CHALLENGES]=s),!1===_(e)){setTimeout((function(){a.telemetryWrapper.sendOxygenErrorCodeWithFullUrl(e,a.authSCD.DS_URL+"-"+a.constants.requestType.PUT_METHOD),r(e,null,t,i)}),1),o.jumpTo(0);break}return o.setCatchFinallyBlocks(3),o.yield(t.arrayBuffer(),5);case 5:u=o.yieldResult,n=m.decode(u),o.leaveTryBlock(4);break;case 3:return c=o.enterCatchBlock(),o.return((l.error(c),void setTimeout((function(){r(null,null,c,i)}),1)));case 4:setTimeout((function(){r(e,n,null,i)}),1),o.jumpToEnd()}}))}),t,i)},e.prototype.getDatastorePaths=function(e,t,r,n,i,u,p){if(!h(e)||0===e.length)throw Error("Datastore paths cannot be nil or empty");if(c(t))throw Error("getDatastorePaths :: EntityID cannot be nil");if(!f(r)||4<r.length||3>r.length)throw Error("outCallback cannot be nil/undefined and has to be of type function or the argument list of the callback does not match Datastore callback");c(n)&&(n=!0),c(p)&&(p=!1),c(i)&&(i={});var E=this.oclContainer.getObject(a.constants.oxygen.ETAG),g=null;for(p||c(E)||((g=new S).setFromRevision(E),!1!==h(u)&&g.setToRevision(u)),d(g)&&(u=a.utils.createStringBufferFromUint8Buffer(g.toArrayBuffer()),u=s.util.encode64(u),i[a.constants.header.RANGE]=u),t=a.authSCD.DS_URL+"/"+t,p=(u=o.makeIterator(e)).next();!p.done;p=u.next())t=""+t+p.value+",";t=t.substring(0,t.length-1),this.oxygenConnection(t+"?include_sub_nodes="+n,a.constants.requestType.GET_METHOD,null,(function(e,t){var n,s,u,c,f,p,h;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(s=n=null,u=t.headers.get(a.constants.header.CHALLENGES),d(u)&&((s={})[a.constants.header.CHALLENGES]=u),_(e))return o.setCatchFinallyBlocks(8),o.yield(t.arrayBuffer(),10);if(e!==T.UNAUTHORIZED){setTimeout((function(){a.telemetryWrapper.sendOxygenErrorCodeWithFullUrl(e,a.authSCD.DS_URL+"-"+a.constants.requestType.GET_METHOD),r(e,n,i,t)}),1),o.jumpTo(0);break}return o.setCatchFinallyBlocks(5),o.yield(t.arrayBuffer(),7);case 7:c=o.yieldResult,n=m.decode(c),o.leaveTryBlock(6);break;case 5:return f=o.enterCatchBlock(),o.return((l.error(f),void setTimeout((function(){r(e,n,s,f)}),1)));case 6:setTimeout((function(){a.telemetryWrapper.sendOxygenErrorCodeWithFullUrl(e,a.authSCD.DS_URL+"-"+a.constants.requestType.GET_METHOD),r(e,n,s,t)}),1),o.jumpTo(0);break;case 10:p=o.yieldResult,n=m.decode(p),o.leaveTryBlock(9);break;case 8:return h=o.enterCatchBlock(),o.return((l.error(h),void setTimeout((function(){r(e,n,s,h)}),1)));case 9:setTimeout((function(){r(e,n,s,null)}),1),o.jumpToEnd()}}))}),null,i,void 0,e.join("/"))},e.prototype.addACLs=function(e){if(c(e))throw Error("Callback function cannot be null");var t=new g;t.setTtlDataStoreRead(a.authSCD.DEFAULT_ACL_TTL),t.setTtlDataStoreWrite(a.authSCD.DEFAULT_ACL_TTL);var r=a.authSCD.O2_URL+"/users/"+a.session.getUserID()+"/session/access";this.oxygenConnection(r,a.constants.requestType.POST_METHOD,null,e,t)},e.prototype.handleSchemaError=function(e){try{var t,r=decodeURIComponent(e),n=s.util.decode64(r),o=a.utils.createUInt8BufferFromStringBuffer(n),i=y.decode(o).getNodes();for(t in i){var u=i[t],c=u.getPath(),d=u.getReason();a.telemetryWrapper.sendOxygenDataStoreSchemaError(d,c)}}catch(e){l.error(e)}},e.prototype.oxygenConnection=function(e,t,r,n,o,s,h,E){var g=this;if(h=void 0===h?1:h,!1===p(e))throw Error("API URL cannot be nil/undefined and has to be of type string");if(!1===p(t))throw Error("method cannot be nil/undefined and has to be of type string");if(!1===f(n))throw Error("outCallback cannot be nil/undefined and has to be of type function");c(r)&&(r=a.session.getAccessToken());var m=i.utils.baseURL(e),y=d(E)?""+m+E:m,S=a.cookieManager.get(y);if(c(S)&&c(r))a.sso.getTokensFromRefreshToken((function(r,i){_(r)?setTimeout((function(){g.oxygenConnection(e,t,i,n,o,s)}),1):setTimeout((function(){n(r,new Response)}),1)}));else{if(E=new Headers,u.HeaderUtils.addAdditionalHeadersToRequest(E,{attemptCount:h}),d(s))for(var b in s)E.append(b,s[b]);d(S)?E.append(a.constants.header.SYMC_COOKIE,S):E.append(a.constants.header.SYMC_AUTH,"Bearer "+r),E.append(a.constants.header.ORIGIN_HEADER,a.authSCD.getMachineGUID()),E.append(a.constants.header.SYMC_MACHINE_ID,a.authSCD.getMachineGUID()),E.append(a.constants.header.ACCEPT,a.constants.contentType.PROTOBUF),E.append(a.constants.header.CONTENT_TYPE,a.constants.contentType.PROTOBUF),E.append(a.constants.header.USER_AGENT,a.authSCD.USER_AGENT),r="bfw-o2-"+i.utils.createNewGuid().toLowerCase().replace(/-/g,""),E.append(a.constants.header.REQUEST_ID,r),r=null,d(o)&&(r=o.toArrayBuffer()),E=new Request(e,{method:t,headers:E,body:r});var O=new AbortController,I=setTimeout((function(){O.abort(),n(null,new Response)}),a.constants.DEFAULT_XHR_TIMEOUT);fetch(E,{signal:O.signal}).then((function(e){if(clearTimeout(I),i.utils.baseURL(a.authSCD.DS_URL)===m){var t=e.headers.get(a.constants.header.ETAG);d(t)&&A.oclContainer.setObject(a.constants.oxygen.ETAG,t),e.status===T.INVALID_SCHEMA&&(t=e.headers.get(a.constants.header.SCHEMA_ERROR),d(t)&&A.handleSchemaError(t))}t=e.headers.get(a.constants.header.SYMC_COOKIE),d(t)&&!1===a.cookieManager.add(y,t)&&l.debug("Failed to add cookie "+a.constants.header.SYMC_COOKIE+" for "+y),n(e.status,e)})).catch((function(){return n(0,new Response)}))}};var A=new e;t.oxygen=A},"./source/proto/O2Proto.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.proto=void 0,e=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("protobufjs"),!0),r=r("./proto/protoBuild.json"),r=e.newBuilder({}).import(r).build(),t.proto=r},"./source/session/O2Session.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.session=void 0,e=r("@browser-services/bfw");var n=r("./source/O2Internals.js"),o=e.logger,i=e.secureSettings,s=(r=e.utils).isNil,a=r.isntNil,u=r.isFunction,l=r.isArray,c=r.isSuccessCode,d=(r=n.constants.sessionstorage.session).SCOPES_KEY,f=r.RETURNURL_KEY,p=r.CLIENTID_KEY,h=r.CLIENTSECRET_KEY;(r=function(){this.session={llt:null,naGUID:null,userID:null,email:null,firstName:null,lastName:null,clientKey:null,password:null,sessionContainer:null,partnerInfo:null,thirdPartyInfo:null}}).prototype.setContainer=function(e){if(s(e))throw Error("container cannot be null");this.sessionContainer=e,e=this.sessionContainer.getObject(n.constants.session.LLT);var t=this.sessionContainer.getObject(n.constants.session.NA_GUID),r=this.sessionContainer.getObject(n.constants.session.EMAIL),o=this.sessionContainer.getObject(n.constants.session.USER_ID),i=this.sessionContainer.getObject(n.constants.session.ACCESS_TOKEN),a=this.sessionContainer.getObject(n.constants.session.ID_TOKEN),u=this.sessionContainer.getObject(n.constants.session.PARTNER_INFO),l=this.sessionContainer.getObject(n.constants.session.THIRD_PARTY_INFO);this.setLLT(e,!1),this.setNAGUID(t,!1),this.setUserID(o,!1),this.setEmail(r,!1),this.setAccessToken(i,!1),this.setIDToken(a,!1),this.setPartnerInfo(u,!1),this.setThirdPartyInfo(l,!1)},r.prototype.initialize=function(e,t,r,n){if(s(e))throw Error("Scopes cannot be null");if(s(t))throw Error("Return URL cannot be null");if(s(r))throw Error("Client ID cannot be null");this.setScopes(e),this.setReturnURL(t),this.setClientID(r),this.setClientSecret(n)},r.prototype.getScopes=function(){var e=n.o2SessionSettings.get(d);if(s(e))throw Error("Scopes cannot be null. OCL has not be initialized");return e},r.prototype.setScopes=function(e){n.o2SessionSettings.set(d,e)},r.prototype.getReturnURL=function(){var e=n.o2SessionSettings.get(f);if(s(e))throw Error("Return URL cannot be null. OCL has not been initialized.");return e},r.prototype.setReturnURL=function(e){n.o2SessionSettings.set(f,e)},r.prototype.getClientID=function(){var e=n.o2SessionSettings.get(p);if(s(e))throw Error("Client ID cannot be null. OCL has not been initialized");return e},r.prototype.setClientID=function(e){n.o2SessionSettings.set(p,e)},r.prototype.getClientSecret=function(){return n.o2SessionSettings.get(h)},r.prototype.setClientSecret=function(e){n.o2SessionSettings.set(h,e)},r.prototype.isLoggedIn=function(e){if(!1===u(e))throw Error("Callback cannot be null or is not a function");if(s(this.sessionContainer))setTimeout((function(){e(!1,Error("sessionContainer is not loaded"))}),1);else{var t=this.sessionContainer.getObject(n.constants.session.LLT);s(t)?setTimeout((function(){e(!1,Error("LLT unavailable"))}),1):setTimeout((function(){e(!0,null)}),1)}},r.prototype.login=function(e,t){var r=this;if(!l(e))throw Error("URL parameters cannot be null or is not an Array");if(!u(t))throw Error("Callback cannot be null or is not a function");n.sso.parseAuthCodeAndGetTokens(e,(function(e,o){!1===c(e)&&(r.logout(),setTimeout((function(){n.telemetryWrapper.sendSessionLoginErrorCode(e),t(!1,o)}),1)),n.oxygen.getUserID((function(e,n){if(!1===c(e))return r.logout(),void setTimeout((function(){t(!1,n)}),1);setTimeout((function(){t(!0,null)}),1)}),o)}))},r.prototype.logout=function(e){this.thirdPartyInfo=this.password=this.email=this.naGUID=this.llt=this.clientKey=this.userID=this.lastName=this.firstName=null,i.resetSecureSettingsCollection(n.constants.OCL_CONTAINER,(function(t){t||o.error("OCL resetSecureSettingsCollection returned failure"),n.sso.logout((function(t){t?e(!0,null):(e(!1,Error("SSO returned failure")),o.error("SSO logout returned failure")),n.telemetryWrapper.sendSessionLogoutCode(!0===t?1:0)}))}))},r.prototype.setPassword=function(e){this.password=e},r.prototype.getPassword=function(){return this.password},r.prototype.getFirstName=function(){return this.firstName},r.prototype.setFirstName=function(e,t,r){this.firstName=e,(s(t)||t)&&this.openSettingsAndSetObject(n.constants.session.FIRST_NAME,e,r)},r.prototype.getLastName=function(){return this.lastName},r.prototype.setLastName=function(e,t,r){this.lastName=e,(s(t)||t)&&this.openSettingsAndSetObject(n.constants.session.LAST_NAME,e,r)},r.prototype.getEmail=function(){return this.email},r.prototype.setEmail=function(e,t,r){this.email=e,(s(t)||t)&&this.openSettingsAndSetObject(n.constants.session.EMAIL,e,r)},r.prototype.setAccessToken=function(e,t,r){this.accessToken=e,(s(t)||t)&&(t=(new Date).getTime()+n.constants.session.DEFAULT_ACCESS_TOKEN_TTL,this.openSettingsAndSetObject(n.constants.session.ACCESS_TOKEN,e,r),this.openSettingsAndSetObject(n.constants.session.ACCESS_TOKEN_TTL,t,r))},r.prototype.getAccessToken=function(){return s(this.accessToken)?null:0>=this.sessionContainer.getObject(n.constants.session.ACCESS_TOKEN_TTL)-(new Date).getTime()?(this.accessToken=null,this.sessionContainer.removeObject(n.constants.session.ACCESS_TOKEN_TTL),this.sessionContainer.removeObject(n.constants.session.ACCESS_TOKEN),null):this.accessToken},r.prototype.setIDToken=function(e,t,r){this._idToken=e,(s(t)||t)&&(t=(new Date).getTime()+n.constants.session.DEFAULT_ID_TOKEN_TTL,this.openSettingsAndSetObject(n.constants.session.ID_TOKEN,e,r),this.openSettingsAndSetObject(n.constants.session.ID_TOKEN_TTL,t,r))},r.prototype.getIDToken=function(){return s(this._idToken)?null:0>=this.sessionContainer.getObject(n.constants.session.ID_TOKEN_TTL)-(new Date).getTime()?(this._idToken=null,this.sessionContainer.removeObject(n.constants.session.ID_TOKEN_TTL),this.sessionContainer.removeObject(n.constants.session.ID_TOKEN),null):this._idToken},r.prototype.getRefreshedIDToken=function(){var e=this;return new Promise((function(t){var r=e.getIDToken();if(a(r))return t(r);n.sso.getTokensFromRefreshToken((function(n){return r=200===n?e.getIDToken():null,t(r)}))}))},r.prototype.getLLT=function(){return this.llt},r.prototype.setLLT=function(e,t,r){this.llt=e,(s(t)||t)&&this.openSettingsAndSetObject(n.constants.session.LLT,e,r)},r.prototype.getNAGUID=function(){return this.naGUID},r.prototype.setNAGUID=function(e,t,r){this.naGUID=e,(s(t)||t)&&this.openSettingsAndSetObject(n.constants.session.NA_GUID,e,r)},r.prototype.getUserID=function(){return this.userID},r.prototype.setUserID=function(e,t,r){this.userID=e,(s(t)||t)&&this.openSettingsAndSetObject(n.constants.session.USER_ID,e,r)},r.prototype.setClientKey=function(e){this.clientKey=e},r.prototype.getClientKey=function(){return this.clientKey},r.prototype.getPartnerInfo=function(){return this.partnerInfo},r.prototype.setPartnerInfo=function(e,t,r){this.partnerInfo=e,(s(t)||t)&&this.openSettingsAndSetObject(n.constants.session.PARTNER_INFO,e,r)},r.prototype.setThirdPartyInfo=function(e,t,r){this.thirdPartyInfo=e,(s(t)||t)&&this.openSettingsAndSetObject(n.constants.session.THIRD_PARTY_INFO,e,r)},r.prototype.getThirdPartyInfo=function(){return this.thirdPartyInfo},r.prototype.openSettingsAndSetObject=function(e,t,r){if(s(this.sessionContainer))!1!==u(r)&&setTimeout((function(){r(!1,Error("sessionContainer is not loaded"))}),1);else try{this.sessionContainer.setObject(e,t,r)}catch(e){!1!==u(r)&&r(!1,e)}},r.prototype.serialize=function(){return{llt:this.llt,naGUID:this.naGUID,userID:this.userID,email:this.email,accessToken:this.accessToken,idToken:this._idToken}},r=new r,t.session=r},"./source/spoc/O2SpocBumpInfo.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpocBumpInfo=void 0,e=r("@browser-services/bfw");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),i=r("./source/O2Internals.js"),s=(r=e.utils).isNil,a=r.isntNil,u=r.isString;t.SpocBumpInfo=function(e,t,r,n,o,i){if(s(e))throw Error("Status cannot be null");if(!1===u(t))throw Error("O2 Spoc :: EntityID cannot be null");if(s(r))throw Error("Channel cannot be null");if(s(n))throw Error("Revision cannot be null");this.status=e,this.entityID=t,this.channel=r,this.revisionNumber=n,this.payload=o,this.appID=s(i)?null:i},t.SpocBumpInfo.prototype.getEntity=function(){return this.entityID},t.SpocBumpInfo.prototype.getApplicationID=function(){return this.appID},t.SpocBumpInfo.prototype.getRevision=function(){return this.revisionNumber},t.SpocBumpInfo.prototype.getChannel=function(){return this.channel},t.SpocBumpInfo.prototype.getPayload=function(){return this.payload},t.SpocBumpInfo.prototype.getStatus=function(){return this.status},t.SpocBumpInfo.prototype.toString=function(){var e={};e.status=this.getStatus(),e.entityID=this.getEntity(),e.channel=this.getChannel(),e.revision=this.getRevision();var t=null,r=this.getPayload();if(a(r)){if(t=i.utils.createStringBufferFromUint8Buffer(r),s(t))throw Error("Could not convert BumpInfo to string");t=o.util.encode64(t)}return e.payLoad=t,e.appID=this.getApplicationID(),JSON.stringify(e)}},"./source/spoc/O2SpocManager.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.spocManager=void 0,e=r("@browser-services/bfw");var n=r("./source/O2Internals.js"),i=r("./source/O2HeaderUtils.js"),s=(r=e.utils).isNil,a=r.isString,u=r.isFunction,l=r.isSuccessCode,c=e.logger,d=(r=n.proto.spoc).NotificationService,f=r.SpocRegistrationArray,p=r.SpocPollArray,h=r.SpocPoll,_=n.proto.spoc.SpocRegistration;(r=function(){this.connections={}}).prototype.makeSpocRequest=function(e,t,r,o,i,a){if((e=new n.SpocRegistration(e,t,r,o,i,void 0!==a&&a)).addRegistration(),t=e.getIdentity(),s(t))throw Error("Unable to return the identity for SpocRegistration");return this.connections[t]=e,t},r.prototype.cancelSPOCRequest=function(e){return s(e)?(c.error("identity cannot be null"),!1):this.connections.hasOwnProperty(e)?(this.connections[e].removeRegistration(),delete this.connections[e],!0):(c.warn("identity not found in SpocManager"),!1)},r.prototype.cancelSPOCRequests=function(){n.spocRequest.stopSPOCConnection(),this.connections={}},r.prototype.getConnections=function(){return this.connections},r.prototype.fcmregister=function(e,t,r,o,i,p){if(p=void 0===p?1:p,!a(e))throw Error("entityID must be a string");if(s(t))throw Error("channel cannot be Nil");if(s(r))throw Error("fcmtoken cannot be Nil");if(s(o))throw Error("appID cannot be Nil");if(!u(i))throw Error("callback must be a function");var h=new _;s(e)&&c.error("fcmregister :: EntityID is nil"),h.setEntity(e),h.setChannel(t),h.setRevision(p),h.setApplicationID(o),(e=new d).setRegistrationID(r),e.setServiceType(n.proto.spoc.NotificationServiceType.NS_FCM),h.setNotificationService(e),r=new f,(e=[]).push(h),r.setRegistration(e),h=n.authSCD.SPOC_URL+"/register",(e=new Headers).append(n.constants.header.CONTENT_TYPE,n.constants.contentType.PROTOBUF),e.append(n.constants.header.USER_AGENT,n.authSCD.SPOC_USER_AGENT),r=r.toArrayBuffer(),h=new Request(h,{method:n.constants.requestType.POST_METHOD,headers:e,body:r}),fetch(h).then((function(e){s(e)?i(-1,Error("SPOC fcmregistration response is Nil")):l(e.status)?i(e.status,null):i(e.status,Error("SPOC fcmregistration failed with response "+e.status))})).catch((function(e){i(-1,e)}))},r.prototype.fcmCommonFetch=function(e,t,r,u,p,h,E,g){var m,y,S,T,A,b,O,I,v,N,R;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return m=null,a(e)?s(t)?o.return(m=Error("channel cannot be Nil")):s(r)?o.return(m=Error("fcmtoken cannot be Nil")):s(u)?o.return(m=Error("appID cannot be Nil")):s(p)?o.return(m=Error("tenantID cannot be Nil")):(y=new _,s(e)&&c.error("fcmCommonFetch :: EntityID is nil"),y.setEntity(e),y.setChannel(t),y.setRevision(E),y.setApplicationID(u),(S=new d).setRegistrationID(r),S.setServiceType(n.proto.spoc.NotificationServiceType.NS_FCM),y.setNotificationService(S),T=new f,(A=[]).push(y),T.setRegistration(A),(b=new Headers).append(n.constants.header.CONTENT_TYPE,n.constants.contentType.PROTOBUF),b.append(n.constants.header.USER_AGENT,n.authSCD.SPOC_USER_AGENT),b.append(n.constants.TENANTID_KEY,p),i.HeaderUtils.addAdditionalHeadersToRequest(b,g),O=T.toArrayBuffer(),I={method:n.constants.requestType.POST_METHOD,headers:b,body:O},v=new Request(h,I),o.setCatchFinallyBlocks(2),o.yield(fetch(v),4)):o.return(m=Error("entityID must be a string"));case 4:if(N=o.yieldResult,s(N))throw Error("SPOC "+h+" response is Nil");if(!l(N.status))throw Error("SPOC "+h+" failed with response "+N.status);o.leaveTryBlock(3);break;case 2:m=R=o.enterCatchBlock(),c.error("SPOC "+h+" failed with error "+R.toString());case 3:return o.return(m)}}))},r.prototype.registerToken=function(e,t,r,i,s,a,u){a=void 0===a?0:a,u=void 0===u?{attemptCount:1,traceID:void 0}:u;var l=this;return o.asyncExecutePromiseGeneratorProgram((function(o){return o.return(l.fcmCommonFetch(e,t,r,i,s,n.authSCD.SPOC_V2_URL+"/api/v1/token",a,u))}))},r.prototype.disableNotification=function(e,t,r,i,s,a,u){a=void 0===a?0:a,u=void 0===u?{attemptCount:1,traceID:void 0}:u;var l=this;return o.asyncExecutePromiseGeneratorProgram((function(o){return o.return(l.fcmCommonFetch(e,t,r,i,s,n.authSCD.SPOC_V2_URL+"/api/v1/disableNotification",a,u))}))},r.prototype.poll=function(e,t,r,d){if(d=void 0===d?{attemptCount:1,traceID:void 0}:d,!a(e)||s(e))throw c.error("poll :: EntityID is nil"),Error("entityID must be a string");if(s(t))throw Error("channel cannot be Nil");if(!u(r))throw Error("callback must be a function");var f=new h;f.setEntity(e),f.setChannel(t),(e=[]).push(f),(f=new p).setPoll(e),e=n.authSCD.SPOC_URL+"/poll",(t=new Headers).append(n.constants.header.CONTENT_TYPE,n.constants.contentType.PROTOBUF),t.append(n.constants.header.USER_AGENT,n.authSCD.SPOC_USER_AGENT),i.HeaderUtils.addAdditionalHeadersToRequest(t,d),d=f.toArrayBuffer(),d=new Request(e,{method:n.constants.requestType.POST_METHOD,headers:t,body:d}),fetch(d).then((function(e){var t,n,i,a;return o.asyncExecutePromiseGeneratorProgram((function(o){return 1==o.nextAddress?s(e)?(r(1,Error("SPOC Poll response is Nil")),o.jumpTo(0)):l(e.status)?o.yield(e.arrayBuffer(),4):(r(1,Error("SPOC Poll failed, status: "+e.status)),o.jumpTo(0)):(t=o.yieldResult,n=p.decode(t),s(n)?o.return(void r(1,Error("SPOC Poll response decode failed"))):0===(i=n.getPoll()).length?o.return(void r(1,Error("SPOC Poll retured empty revision"))):(a=i[0].getRevision(),r(a,null),void o.jumpToEnd()))}))})).catch((function(){r(1,Error("SPOC Poll failed"))}))},r=new r,t.spocManager=r},"./source/spoc/O2SpocRegistration.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SpocRegistration=void 0;var n=r("@browser-services/bfw"),o=r("./source/O2Internals.js"),i=(e=n.utils).isNil,s=e.isString,a=e.isFunction,u=n.logger,l=o.proto.spoc.SpocRegistration,c=o.proto.com.symantec.oxygen.datastore.v2.messages.DataStoreSpocPayloadV2;t.SpocRegistration=function(e,t,r,o,u,l){if(l=void 0!==l&&l,!s(e))throw Error("Entity ID must be a string");if(i(t))throw Error("Channel cannot be Nil");if(!a(r))throw Error("The callback must be of type function");if(i(o))throw Error("Revision Number cannot be Nil");if(i(u))u=null;else if(!s(u))throw Error("The application ID must be a string");this.entityID=e,this.channel=t,this.callback=r,this.revisionNumber=o,this.appID=u,this.guid=n.utils.createNewGuid(),this.isSpocV2=l},t.SpocRegistration.prototype.getIdentity=function(){return this.guid},t.SpocRegistration.prototype.getEntityID=function(){return this.entityID},t.SpocRegistration.prototype.getChannel=function(){return this.channel},t.SpocRegistration.prototype.getRevision=function(){return this.revisionNumber},t.SpocRegistration.prototype.getAppID=function(){return this.appID},t.SpocRegistration.prototype.handlePayloadForChannelTwo=function(e){if(i(e)||0===e.byteLength)return{sameMachine:!1};var t=o.authSCD.getMachineGUID(),r=null,n=null;try{var s=c.decode(e);if(s.getOrigin()===t)return{sameMachine:!0};r=s.getToRevision(),0<(n=s.get_app_id()).length&&(n=n[0])}catch(e){u.error(e)}return{sameMachine:!1,toRevisions:r,appId:n}},t.SpocRegistration.prototype.internalCallback=function(e){var t=null,r=e.getStatus();this.revisionNumber=e.getRevision();var n=!1,i=null;if(r.getDomain()===o.constants.spoc.INTERNAL_DOMAIN)switch(r.getCode()){case o.constants.spoc.internalErrors.STOPPED:n=this.callback(e);break;case o.constants.spoc.internalErrors.UNRECOVERABLE:this.callback(e);break;case o.constants.spoc.internalErrors.SUCCESS:if(this.channel===o.proto.spoc.SPOCChannel.SC_DATASTORE_UPDATE&&(t=(r=this.handlePayloadForChannelTwo(e.getPayload())).toRevisions,i=r.appId,r.sameMachine)){n=!0;break}n=this.callback(e,t,i);break;default:n=this.callback(e)}n&&this.addRegistration()},t.SpocRegistration.prototype.addRegistration=function(){var e=new l;i(this.entityID)&&u.error("addRegistration :: EntityID is nil"),e.setEntity(this.entityID),e.setChannel(this.channel),e.setRevision(this.revisionNumber),e.setApplicationID(this.appID),o.spocRequest.startSPOCConnection(e,this.internalCallback,this),this.spocReg=e},t.SpocRegistration.prototype.removeRegistration=function(){if(i(this.spocReg))throw Error("Unexpected: the spoc registration is invalid");o.spocRequest.stopSPOCConnection(this.spocReg),this.spocReg=null}},"./source/spoc/O2SpocRequest.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.spocRequest=void 0,e=r("@browser-services/bfw");var n=r("./source/spoc/O2SpocStatus.js"),i=r("./source/spoc/O2SpocBumpInfo.js"),s=r("./source/O2Internals.js"),a=r("./source/O2HeaderUtils.js"),u=(r=e.utils).isNil,l=r.isntNil,c=r.isSuccessCode,d=e.logger,f=e.constants.httpStatusCodes,p=s.proto.spoc.SpocRegistrationArray;(r=function(){this.BumpInfo=i.SpocBumpInfo,this.Status=n.SpocStatus,this.registrationCallbacks={},this.coalescingTimer=this.startDate=this.xhr=null,this.spocRegistrationMap={},this.retryCount=s.authSCD.SPOC_RETRY_COUNT,this.currentTimeout=1,this.DEFAULT_COALESCE_TIME=5e3,this.isSpocV2=!1}).prototype.performCallback=function(e,t){var r=this.registrationCallbacks[e],n=r.callbackObj,o=r.callback;delete this.registrationCallbacks[e],delete this.spocRegistrationMap[e],setTimeout((function(){u(n)?o(t):o.apply(n,[t])}),1)},r.prototype.callbackKey=function(e,t){return e+":"+t},r.prototype.stopSPOCConnection=function(e){var t=null,r=null,o=null;if(l(e))return t=e.getEntity(),o=e.getChannel(),r=this.callbackKey(t,o),delete this.registrationCallbacks[r],delete this.spocRegistrationMap[r],void this.startSPOCConnection();for(var a in l(this.xhr)&&this.xhr.abort(),this.spocRegistrationMap){t=(e=this.spocRegistrationMap[a]).getEntity(),o=e.getChannel(),r=e.getRevision(),e=e.getApplicationID();var u=new n.SpocStatus(s.constants.spoc.INTERNAL_DOMAIN,s.constants.spoc.internalErrors.STOPPED);t=new i.SpocBumpInfo(u,t,o,r,null,e),this.performCallback(a,t)}},r.prototype.startSPOCConnection=function(e,t,r){var n=this;if(this.retryCount=s.authSCD.SPOC_RETRY_COUNT,this.retryTimeout=1,l(this.coalescingTimer)&&clearTimeout(this.coalescingTimer),l(e)&&l(t)){var o=this.callbackKey(e.getEntity(),e.getChannel());this.registrationCallbacks[o]={callback:t,callbackObj:r},this.spocRegistrationMap[o]=e}l(r)&&l(r.isSpocV2)&&(this.isSpocV2=r.isSpocV2),this.coalescingTimer=setTimeout((function(){l(n.xhr)&&n.xhr.abort(),0!==n.getRegistrationArray().length?n.performRetry(n.getRegistrationArray()):d.log("No registrations available. Spoc Connection will not be created.")}),this.DEFAULT_COALESCE_TIME)},r.prototype.getRegistrationArray=function(){var e,t=[];for(e in this.spocRegistrationMap)t.push(this.spocRegistrationMap[e]);return t},r.prototype.notifyClientsOnError=function(e){switch(e){case f.BAD_REQUEST:case f.ENTITY_TOO_LARGE:case f.RATE_LIMITING:e=new n.SpocStatus(s.constants.spoc.INTERNAL_DOMAIN,s.constants.spoc.internalErrors.UNRECOVERABLE);break;default:e=new n.SpocStatus(s.constants.spoc.INTERNAL_DOMAIN,s.constants.spoc.internalErrors.UNKNOWN)}for(var t in this.spocRegistrationMap){var r=this.spocRegistrationMap[t],o=r.getEntity(),a=r.getChannel(),u=r.getRevision();r=r.getApplicationID(),o=new i.SpocBumpInfo(e,o,a,u,null,r),this.performCallback(t,o)}},r.prototype.notifyClientsOnSuccess=function(e){e=e.getRegistration();for(var t=0;t<e.length;t++){var r=e[t],o=r.getEntity(),a=r.getChannel(),u=r.getRevision(),l=r.getApplicationID(),c=this.callbackKey(o,a),d=new n.SpocStatus(s.constants.spoc.INTERNAL_DOMAIN,s.constants.spoc.internalErrors.SUCCESS);r=new i.SpocBumpInfo(d,o,a,u,r.getPayload(),l),this.performCallback(c,r)}this.startSPOCConnection()},r.prototype.performRetry=function(e,t,r){var n=this;r=void 0===r?{attemptCount:1,traceID:void 0}:r,0!==this.retryCount?(this.retryTimeout=this.nextRetryTimeout(this.retryTimeout),this.retryCount--,setTimeout((function(){n.connection(e,t,r)}),1e3*this.retryTimeout)):this.notifyClientsOnError(f.RATE_LIMITING)},r.prototype.nextRetryTimeout=function(e){var t=s.authSCD.SPOC_RETRY_COUNT-this.retryCount;return 0===t?e:e+t*s.authSCD.RETRY_TIMEOUT+Math.floor(60*Math.random()+1)},r.prototype.connection=function(e,t,r){var n=this;if(r=void 0===r?{attemptCount:1,traceID:void 0}:r,u(e)||0===e.length)throw Error("Registration array cannot be null or empty");t=u(t)?s.authSCD.SPOC_DEFAULT_TIMEOUT:t;var i=new p;i.setRegistration(e);var l=new Headers;l.append(s.constants.header.SYMC_EXPECT,s.constants.header.NOT_MODIFIED),l.append(s.constants.header.CONTENT_TYPE,s.constants.contentType.PROTOBUF),l.append(s.constants.header.USER_AGENT,s.authSCD.SPOC_USER_AGENT),this.isSpocV2&&l.append(s.constants.header.SYMC_HOST,s.authSCD.SPOC_V2_PUSH_HOST);var d=a.HeaderUtils.addAdditionalHeadersToRequest(l,r),h=r;h.traceID=d,i=i.toArrayBuffer(),l=new Request(this.isSpocV2?s.authSCD.SPOC_V2_PUSH_URL+"/api/v2/register?t="+t:s.authSCD.SPOC_URL+"/register?t="+t,{method:s.constants.requestType.POST_METHOD,headers:l,body:i});var _=new AbortController,E=setTimeout((function(){_.abort(),n.startSPOCConnection()}),1e3*t);fetch(l,{signal:_.signal}).then((function(i){var a,u,l,d,_;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress)return u=(a=i).status,l=a.statusText,u===f.NOT_MODIFIED?o.return((clearTimeout(E),void n.startSPOCConnection())):c(u)?(clearTimeout(E),o.yield(i.arrayBuffer(),3)):u===f.RATE_LIMITING?o.return((h.attemptCount=r.attemptCount+1,void n.performRetry(e,t,h))):(s.telemetryWrapper.sendSpocErrorCodeWithFullUrl(u+"-"+l,s.authSCD.SPOC_URL+"-"+s.constants.requestType.POST_METHOD),n.notifyClientsOnError(u),o.jumpTo(0));d=o.yieldResult,_=p.decode(d),n.notifyClientsOnSuccess(_),o.jumpToEnd()}))})).catch((function(){return n.notifyClientsOnError(0)}))},r=new r,t.spocRequest=r},"./source/spoc/O2SpocStatus.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SpocStatus=void 0;var n=r("@browser-services/bfw").utils.isNil;t.SpocStatus=function(e,t){if(n(e))throw Error("Domain cannot be null");if(n(t))throw Error("Status code cannot be null");this.domain=e,this.code=t},t.SpocStatus.prototype.getDomain=function(){return this.domain},t.SpocStatus.prototype.getCode=function(){return this.code}},"./source/sso/O2SSOSetup.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ssoSetup=void 0;var n=r("@browser-services/bfw"),i=r("urijs"),s=r("./source/O2Internals.js"),a=n.extensionAdapter,u=n.logger,l=(e=n.utils).isString,c=e.isSuccessCode,d=e.urlWithoutQueryParameters,f=e.isFunction;(e=function(){this._ssoSetUrl=null,this._handleSSOSetupPage=this._handleSSOSetupPage.bind(this)}).prototype._handleSSOSetupPageLoadedBeforeEventRegistration=function(){var e=this;a.getAllTabs((function(t){if((t=void 0===t?[]:t).length){var r=a.getExtensionURL(s.constants.SSO_SETUP_URL);(t=t.filter((function(e){return e.url.startsWith(r)}))).length&&(t=t[0],e._handleSSOSetupPage({tabId:t.id,url:t.url}))}}))},e.prototype.init=function(){var e=this;return o.asyncExecutePromiseGeneratorProgram((function(t){n.globals.BROWSER!==n.constants.BROWSER_TYPE.EDGE&&n.globals.BROWSER!==n.constants.BROWSER_TYPE.FIREFOX&&(e._ssoSetUrl=a.getExtensionURL(s.constants.SSO_SETUP_URL),e._handleSSOSetupPageLoadedBeforeEventRegistration(),a.addOnBeforeRequestEventListener(e._handleSSOSetupPage,[e._ssoSetUrl+"?*"])),t.jumpToEnd()}))},e.prototype._canIgnoreSSOSetup=function(e){if(!1===f(e))throw Error("Callback cannot be null or is not a function");a.getAllTabs((function(t){if((t=void 0===t?[]:t).length){var r=a.getExtensionURL(s.constants.SEAMLESS_ONBOARD_URL);t.some((function(e){return e.url.startsWith(r)}))?e(!0):e(!1)}else e(!1)}))},e.prototype._handleSSOSetupPage=function(e){this._canIgnoreSSOSetup((function(t){if(s.telemetryWrapper.sendExtensionURLLaunched(d(e.url),t?0:1),t)return a.closeTabAndEnsureBrowserIsAlive(e.tabId),void u.debug("Ignoring the SSOSetup with ST because Seamless onboard page is active");s.session.isLoggedIn((function(t){if(t)return a.closeTabAndEnsureBrowserIsAlive(e.tabId),s.telemetryWrapper.sendNASignedInAlready(),void u.debug("NA already signed-in when the ST is received");if(t=new i(e.url).query(!0)[s.constants.session.ST],l(t)){var r=function(e){c(e)?(s.telemetryWrapper.sendNASignedFromST(e),u.debug("NA signed-in using ST")):(s.session.logout((function(){})),s.telemetryWrapper.sendNASIgnInFailureFromST(e))};a.closeTabAndEnsureBrowserIsAlive(e.tabId),s.sso.getTokensFromST(t,(function(e,t){c(e)?(s.telemetryWrapper.sendOIDCCallSuccess(e),u.debug("Retrieved OIDC using ST"),s.oxygen.getUserID(r,t)):(s.session.logout((function(){})),s.telemetryWrapper.sendOIDCCallFailure(e))}))}else u.error("ST token should be string")}))}))},e=new e,t.ssoSetup=e},"./source/sso/O2Sso.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.sso=void 0,e=r("@browser-services/bfw");var n=r("./source/O2Internals.js"),i=r("./source/O2HeaderUtils.js"),s=(r=e.utils).isNil,a=r.isntNil,u=r.isFunction,l=r.isString,c=r.isSuccessCode,d=e.base64;(r=function(){}).prototype.getPublicKey=function(){if(s(this.publicKey))throw Error("Public Key not available. OCL was not properly initialized.");return this.publicKey},r.prototype.getPublicKeyIdentifier=function(){if(s(this.pubKeyID))throw Error("Public Key ID not available. OCL was not properly initialized.");return this.pubKeyID},r.prototype.generateScopeParam=function(e){var t,r="openid";for(t in e)r=r+"+"+e[t];return r},r.prototype.getOpenIDConnectLoginURL=function(e){if(s(e))throw Error("State cannot be null.");return n.authSCD.SSO_OPENID_CONNECT_LOGIN_URL+"?"+["response_type=code","scope="+this.generateScopeParam(n.session.getScopes()),"client_id="+encodeURIComponent(n.session.getClientID()),"state="+encodeURIComponent(e),"redirect_uri="+encodeURIComponent(n.session.getReturnURL())].join("&")},r.prototype.parseAuthCodeAndGetTokens=function(e,t){if(s(e))throw Error("Params cannot be null");if(!1===u(t))throw Error("Callback cannot be null");var r,n=null;for(r in e){var i=o.makeIterator(e[r].split("=")),a=i.next().value;i=i.next().value,"code"===a&&(n=i)}s(n)?setTimeout((function(){t(null,"Invalid Parameters")}),1):this.getTokensFromAuthorizationCode(n,t)},r.prototype.generateToken=function(e,t){var r=this;if(s(e))throw Error("Params cannot be null");if(s(t))throw Error("Callback cannot be null");var o=this.generateScopeParam(n.session.getScopes());e.push("redirect_uri="+encodeURIComponent(n.session.getReturnURL())),e.push("scope="+o),e=e.join("&");var i=n.authSCD.SSO_OPENID_CONNECT_TOKEN_URL;o={};var u=n.session.getClientID(),l=n.session.getClientSecret();a(l)&&(u="Basic "+btoa(u+":"+l),o[n.constants.header.AUTHORIZATION]=u),this.ssoConnection(i,n.constants.requestType.POST_METHOD,(function(e){var o=e.status;if(c(o)){var s=e.response,a=s.access_token,u=s.refresh_token;return s=s.id_token,r.parseAndValidateJWT(s)?(n.session.setLLT(u),n.session.setAccessToken(a),n.session.setIDToken(s),void setTimeout((function(){t(o,a)}),1)):void setTimeout((function(){t(null,Error("Token could not be verified"))}),1)}setTimeout((function(){n.telemetryWrapper.sendSSOErrorCodeWithFullUrl(o,i+"-"+n.constants.requestType.POST_METHOD),t(o,e)}),1)}),o,e)},r.prototype.parseAndValidateJWT=function(e){if(s(e))throw Error("JWT cannot be null.");e=e.split(".");var t=(e=JSON.parse(d.decode(e[1]))).sub;return n.session.setEmail(e.email),n.session.setNAGUID(t),a(e.IdP)&&n.session.setPartnerInfo(e.IdP),a(e.remote_login_idp)&&n.session.setThirdPartyInfo(e.remote_login_idp),!0},r.prototype.getTokensFromAuthorizationCode=function(e,t){this.generateToken(["grant_type=authorization_code","code="+e],t)},r.prototype.getTokensFromRefreshToken=function(e){var t=["grant_type=refresh_token","refresh_token="+n.session.getLLT()];this.generateToken(t,e)},r.prototype.getTokensFromST=function(e,t){e=["grant_type=access_token","access_token="+e,"client_id="+n.session.getClientID(),"client_secret=dummy_secret","claims={challenge:true}"],this.generateToken(e,t)},r.prototype.ssoConnection=function(e,t,r,o,a,c){if(c=void 0===c?1:c,!l(e))throw Error("API URL should be a string");if(s(t))throw Error("Http method cannot be nil");if(!u(r))throw Error("Output callback should be a function");var d=new Headers;for(var f in i.HeaderUtils.addAdditionalHeadersToRequest(d,{attemptCount:c}),o)d.append(f,o[f]);d.append(n.constants.header.ACCEPT,n.constants.contentType.JSON),d.append(n.constants.header.CONTENT_TYPE,n.constants.contentType.FORM_URL_ENCODED),e=new Request(e,{method:t,headers:d,body:a});var p=new AbortController,h=setTimeout((function(){p.abort(),r({status:n.constants.httpStatusCode.REQUEST_TIMEOUT})}),n.constants.DEFAULT_XHR_TIMEOUT);fetch(e,{signal:p.signal}).then((function(e){clearTimeout(h),e.json().then((function(t){r({status:e.status,response:t})}))})).catch((function(){return r({status:n.constants.httpStatusCode.INTERNAL_SERVER_ERROR})}))},r.prototype.logout=function(e,t){t=void 0===t?1:t;var r=new Headers;i.HeaderUtils.addAdditionalHeadersToRequest(r,{attemptCount:t}),t=new Request(n.authSCD.SSO_LOGOUT_URL,{method:"GET",headers:r,body:null}),fetch(t).then((function(t){u(e)&&setTimeout((function(){e(!0)}),1),t.ok||n.telemetryWrapper.sendSSOErrorCodeWithFullUrl(t.status,n.authSCD.SSO_LOGOUT_URL+"-"+n.constants.requestType.GET_METHOD)})).catch((function(){n.telemetryWrapper.sendSSOErrorCodeWithFullUrl(-1,n.authSCD.SSO_LOGOUT_URL+"-"+n.constants.requestType.GET_METHOD),u(e)&&setTimeout((function(){e(!1)}),1)}))},r.prototype.signIntoNA=function(){n.naLoginManager.loginToNA()},r=new r,t.sso=r},"./source/telemetry/O2TelemetryWrapper.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryWrapper=void 0,e=r("@browser-services/bfw");var n=(r=e.utils).isNil,o=r.isString,i=e.telemetry,s=e.telemetryConstants,a=e.logger;(e=function(){this.TELEMETRY_CATEGORY="OCL",this.NON_INTERACTION=1,this.actionType={SESSION:"Session",SSO:"SSO",OXYGEN:"Oxygen",OXYGEN_SCHEMA:"Oxygen-Schema",SPOC:"Spoc",ENCRYPTION_KEY_MIGRATION:"Encryption-Key-Migration"},this.O2_SESSION={LOGIN:"login",LOGOUT:"logout"},this.SSO_SETUP={ST_IGNORED:"STIgnored",OIDC_CALL_SUCCESS:"OIDCCallSuccess",OIDC_CALL_FAILURE:"OIDCCallFailure",NA_SIGNIN_SUCCESS:"NASignInSuccess",EXTENSION_URL_LAUNCHED:"ExtensionURLLaunched",NA_SIGNIN_FAILURE:"NASIgnInFailure"},this.OIDC_TOKEN_ENCRYPTION_KEY_MIGRATION={SUCCESS:"success",FAILURE:"failure"}}).prototype.send=function(e,t,r){if(o(e)&&o(t)){if(n(r))return void a.error("ocl telemetry:value is null for action:"+e+" label:"+t);var u={};u[s.parameters.NON_INTERACTION_HIT]=this.NON_INTERACTION,u[s.parameters.HIT_TYPE]=s.HIT_TYPE.EVENT,u[s.parameters.CATEGORY]=this.TELEMETRY_CATEGORY,u[s.parameters.ACTION]=e+"-"+r,u[s.parameters.LABEL]=t,i.send(u)}},e.prototype.sendSessionLoginErrorCode=function(e){this.send(this.actionType.SESSION,this.O2_SESSION.LOGIN,e)},e.prototype.sendSessionLogoutCode=function(e){this.send(this.actionType.SESSION,this.O2_SESSION.LOGOUT,e)},e.prototype.sendSSOErrorCodeWithFullUrl=function(e,t){n(t)?a.error("sendSSOErrorCodeWithFullUrl : fullUrl is nil"):this.send(this.actionType.SSO,t,e)},e.prototype.sendOxygenErrorCodeWithFullUrl=function(e,t){n(t)?a.error("sendOxygenErrorCodeWithFullUrl : fullUrl is nil"):this.send(this.actionType.OXYGEN,t,e)},e.prototype.sendSpocErrorCodeWithFullUrl=function(e,t){n(t)?a.error("sendSpocErrorCodeWithFullUrl : fullUrl is nil"):this.send(this.actionType.SPOC,t,e)},e.prototype.sendOxygenDataStoreSchemaError=function(e,t){n(t)?a.error("sendOxygenDataStoreSchemaError : path is nil"):this.send(this.actionType.OXYGEN_SCHEMA,t,e)},e.prototype.sendNASignedInAlready=function(){this.send(this.SSO_SETUP.ST_IGNORED,this.O2_SESSION.LOGIN,200)},e.prototype.sendOIDCCallSuccess=function(e){this.send(this.SSO_SETUP.OIDC_CALL_SUCCESS,this.O2_SESSION.LOGIN,e)},e.prototype.sendOIDCCallFailure=function(e){this.send(this.SSO_SETUP.OIDC_CALL_FAILURE,this.O2_SESSION.LOGIN,e)},e.prototype.sendNASignedFromST=function(e){this.send(this.SSO_SETUP.NA_SIGNIN_SUCCESS,this.O2_SESSION.LOGIN,e)},e.prototype.sendExtensionURLLaunched=function(e){this.send(this.SSO_SETUP.EXTENSION_URL_LAUNCHED,e,1)},e.prototype.sendNASIgnInFailureFromST=function(e){this.send(this.SSO_SETUP.NA_SIGNIN_FAILURE,this.O2_SESSION.LOGIN,e)},e.prototype.sendOIDCTokenEncryptionKeyMigrationSuccess=function(){this.send(this.actionType.ENCRYPTION_KEY_MIGRATION,this.OIDC_TOKEN_ENCRYPTION_KEY_MIGRATION.SUCCESS,1)},e.prototype.sendOIDCTokenEncryptionKeyMigrationFailure=function(){this.send(this.actionType.ENCRYPTION_KEY_MIGRATION,this.OIDC_TOKEN_ENCRYPTION_KEY_MIGRATION.FAILURE,0)},e=new e,t.telemetryWrapper=e},"./source/utils/O2Utils.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.utils=void 0,e=r("@browser-services/bfw");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}(r("node-forge"),!0),i=r("./source/O2Internals.js"),s=e.logger,a=(r=e.utils).isNil,u=r.isString,l=r.isArray;(r=function(){}).prototype.arrayBufferToStringUTF16LE=function(e){if(a(e))return null;e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var t=[],r=0;r<e.byteLength;r++)t.push(e[r]);return this.byteArrayToStringUTF16LE(t)},r.prototype.stringUTF16LEToByteArray=function(e){if(!1===u(e))throw Error("Input string cannot be null or is not a string");for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r),o=(65280&n)>>8;t.push(255&n),t.push(o)}return t},r.prototype.byteArrayToStringUTF16LE=function(e){if(!1===l(e))throw Error("Byte array cannot be null or is not an array");if(2>e.length)throw Error("Byte array needs to contain at least two bytes");if(0!=e.length%2)throw Error("Byte array needs to contain even number of bytes");for(var t="",r=0;r<e.length-1;r+=2){var n=e[r];if(255<n)throw Error("Encoding error: Input contains element larger than a byte.");n&=255;var o=e[r+1];if(255<o)throw Error("Encoding error: Input contains element larger than a byte.");o=o<<8&65280,t+=String.fromCharCode(n+o)}return t},r.prototype.createUInt8BufferFromStringBuffer=function(e,t){if(a(e))return null;a(t)&&(t=e.length),t<e.length&&(t=e.length),t=new Uint8Array(t);for(var r=0,n=e.length;r<n;r++){var o=e.charCodeAt(r);if(255<o)throw Error("Encoding error: Input contains element larger than a byte.");t[r]=o}return t},r.prototype.createStringBufferFromUint8Buffer=function(e){return a(e)?null:String.fromCharCode.apply(null,new Uint8Array(e))},r.prototype.encode64AndPrint=function(e,t){var r=null;a(e)||("string"==typeof e&&(r=e),e instanceof Uint8Array&&(r=this.createStringBufferFromUint8Buffer(e)),e=o.util.encode64(r),s.log(t+":"+e))},r.prototype.challengeListToString=function(e){return a(e)?null:(e=this.createStringBufferFromUint8Buffer(e.toArrayBuffer()),e=o.util.encode64(e),encodeURIComponent(e))},r.prototype.stringToChallengeList=function(e){if(a(e))return null;var t=i.proto.com.symantec.oxygen.datastore.v2.messages.ChallengeList,r=null;e=decodeURIComponent(e),e=o.util.decode64(e),e=this.createUInt8BufferFromStringBuffer(e);try{r=t.decode(e)}catch(e){s.error(e)}return r},r.prototype.protobufToEncodedString=function(e){if(a(e))return null;var t=null;try{var r=this.createStringBufferFromUint8Buffer(e.toArrayBuffer());t=o.util.encode64(r)}catch(e){t=null}return t},r.prototype.encodedStringToProtobuf=function(e,t){if(a(e)||a(t))return null;var r=null;try{var n=this.createUInt8BufferFromStringBuffer(o.util.decode64(e));r=t.decode(n)}catch(e){s.error(e),r=null}return r},r=new r,t.utils=r},0:function(e,t,r){e.exports=r("./source/O2Index.js")},"@browser-services/bfw":function(t,r){t.exports=e},"node-forge":function(e,r){e.exports=t},protobufjs:function(e,t){e.exports=r},urijs:function(e,t){e.exports=n}}).default},"object"==typeof r&&"object"==typeof t?t.exports=s(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"),e("node-forge"),e("protobufjs"),e("urijs")):"function"==typeof define&&define.amd?define(["@browser-services/bfw","node-forge","protobufjs","urijs"],s):"object"==typeof r?r.SymO2=s(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"),e("node-forge"),e("protobufjs"),e("urijs")):i.SymO2=s(i.Bfw,i.forge,i.dcodeIO.ProtoBuf,i.URI)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"node-forge":"node-forge",protobufjs:"protobufjs",urijs:718}],215:[function(e,t,r){(function(n){(function(){"use strict";e("core-js/modules/es.symbol.description.js"),e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array.sort.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/esnext.global-this.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=o||{};o.scope={},o.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},o.arrayIterator=function(e){return{next:o.arrayIteratorImpl(e)}},o.ASSUME_ES5=!1,o.ASSUME_NO_NATIVE_MAP=!1,o.ASSUME_NO_NATIVE_SET=!1,o.SIMPLE_FROUND_POLYFILL=!1,o.ISOLATE_POLYFILLS=!1,o.FORCE_POLYFILL_PROMISE=!1,o.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,o.defineProperty=o.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},o.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n&&n];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},o.global=o.getGlobal(void 0),o.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),o.TRUST_ES6_POLYFILLS=!o.ISOLATE_POLYFILLS||o.IS_SYMBOL_NATIVE,o.polyfills={},o.propertyToPolyfillSymbol={},o.POLYFILL_PREFIX="$jscp$";var i,s;o.polyfill=function(e,t,r,n){t&&(o.ISOLATE_POLYFILLS?o.polyfillIsolated(e,t,r,n):o.polyfillUnisolated(e,t,r,n))},o.polyfillUnisolated=function(e,t,r,n){for(r=o.global,e=e.split("."),n=0;n<e.length-1;n++){var i=e[n];if(!(i in r))return;r=r[i]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&o.defineProperty(r,e,{configurable:!0,writable:!0,value:t})},o.polyfillIsolated=function(e,t,r,n){var i=e.split(".");e=1===i.length,n=i[0],n=!e&&n in o.polyfills?o.polyfills:o.global;for(var s=0;s<i.length-1;s++){var a=i[s];if(!(a in n))return;n=n[a]}i=i[i.length-1],null!=(t=t(r=o.IS_SYMBOL_NATIVE&&"es6"===r?n[i]:null))&&(e?o.defineProperty(o.polyfills,i,{configurable:!0,writable:!0,value:t}):t!==r&&(void 0===o.propertyToPolyfillSymbol[i]&&(r=1e9*Math.random()>>>0,o.propertyToPolyfillSymbol[i]=o.IS_SYMBOL_NATIVE?o.global.Symbol(i):o.POLYFILL_PREFIX+r+"$"+i),o.defineProperty(n,o.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:t})))},o.initSymbol=function(){},o.polyfill("Symbol",(function(e){if(e)return e;var t=function(e,t){this.$jscomp$symbol$id_=e,o.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};t.prototype.toString=function(){return this.$jscomp$symbol$id_};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",n=0,i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new t(r+(e||"")+"_"+n++,e)};return i}),"es6","es3"),o.polyfill("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var n=o.global[t[r]];"function"==typeof n&&"function"!=typeof n.prototype[e]&&o.defineProperty(n.prototype,e,{configurable:!0,writable:!0,value:function(){return o.iteratorPrototype(o.arrayIteratorImpl(this))}})}return e}),"es6","es3"),o.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},o.createTemplateTagFirstArg=function(e){return e.raw=e},o.createTemplateTagFirstArgWithRaw=function(e,t){return e.raw=t,e},o.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):o.arrayIterator(e)},o.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},o.arrayFromIterable=function(e){return e instanceof Array?e:o.arrayFromIterator(o.makeIterator(e))},o.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.assign=o.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)o.owns(n,i)&&(e[i]=n[i])}return e},o.polyfill("Object.assign",(function(e){return e||o.assign}),"es6","es3"),o.objectCreate=o.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t},o.getConstructImplementation=function(){if(o.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(function(){function e(){}return new e,Reflect.construct(e,[],(function(){})),new e instanceof e}())return Reflect.construct;var e=Reflect.construct;return function(t,r,n){return t=e(t,r),n&&Reflect.setPrototypeOf(t,n.prototype),t}}return function(e,t,r){return void 0===r&&(r=e),r=o.objectCreate(r.prototype||Object.prototype),Function.prototype.apply.call(e,r,t)||r}},o.construct=o.getConstructImplementation(),o.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},o.setPrototypeOf=o.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:o.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,o.inherits=function(e,t){if(e.prototype=o.objectCreate(t.prototype),e.prototype.constructor=e,o.setPrototypeOf){var r=o.setPrototypeOf;r(e,t)}else for(r in t)if("prototype"!=r)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}else e[r]=t[r];e.superClass_=t.prototype},o.generator={},o.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},o.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},o.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},o.generator.Context.prototype.stop_=function(){this.isRunning_=!1},o.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},o.generator.Context.prototype.next_=function(e){this.yieldResult=e},o.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},o.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},o.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},o.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},o.generator.Context.prototype.yieldAll=function(e,t){var r=(e=o.makeIterator(e)).next();if(o.generator.ensureIteratorResultIsObject_(r),!r.done)return this.yieldAllIterator_=e,this.yield(r.value,t);this.yieldResult=r.value,this.nextAddress=t},o.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},o.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},o.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,null!=t&&(this.finallyAddress_=t)},o.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},o.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},o.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},o.generator.Context.prototype.enterFinallyBlock=function(e,t,r){r?this.finallyContexts_[r]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},o.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();null!=t.jumpTo&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},o.generator.Context.prototype.forIn=function(e){return new o.generator.Context.PropertyIterator(e)},o.generator.Context.PropertyIterator=function(e){for(var t in this.object_=e,this.properties_=[],e)this.properties_.push(t);this.properties_.reverse()},o.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},o.generator.Engine_=function(e){this.context_=new o.generator.Context,this.program_=e},o.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},o.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(e){return{value:e,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},o.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},o.generator.Engine_.prototype.yieldAllStep_=function(e,t,r){try{var n=e.call(this.context_.yieldAllIterator_,t);if(o.generator.ensureIteratorResultIsObject_(n),!n.done)return this.context_.stop_(),n;var i=n.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}return this.context_.yieldAllIterator_=null,r.call(this.context_,i),this.nextStep_()},o.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},o.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},o.generator.createGenerator=function(e,t){return t=new o.generator.Generator_(new o.generator.Engine_(t)),o.setPrototypeOf&&e.prototype&&o.setPrototypeOf(t,e.prototype),t},o.asyncExecutePromiseGenerator=function(e){function t(t){return e.next(t)}function r(t){return e.throw(t)}return new Promise((function(n,o){!function e(i){i.done?n(i.value):Promise.resolve(i.value).then(t,r).then(e,o)}(e.next())}))},o.asyncExecutePromiseGeneratorFunction=function(e){return o.asyncExecutePromiseGenerator(e())},o.asyncExecutePromiseGeneratorProgram=function(e){return o.asyncExecutePromiseGenerator(new o.generator.Generator_(new o.generator.Engine_(e)))},o.polyfill("Reflect",(function(e){return e||{}}),"es6","es3"),o.polyfill("Reflect.construct",(function(e){return o.construct}),"es6","es3"),o.polyfill("Reflect.setPrototypeOf",(function(e){if(e)return e;if(o.setPrototypeOf){var t=o.setPrototypeOf;return function(e,r){try{return t(e,r),!0}catch(e){return!1}}}return null}),"es6","es5"),o.polyfill("Promise",(function(e){function t(){this.batch_=null}function r(e){return e instanceof i?e:new i((function(t,r){t(e)}))}if(e&&(!(o.FORCE_POLYFILL_PROMISE||o.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===o.global.PromiseRejectionEvent)||!o.global.Promise||-1===o.global.Promise.toString().indexOf("[native code]")))return e;t.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var t=this;this.asyncExecuteFunction((function(){t.executeBatch_()}))}this.batch_.push(e)};var n=o.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){n(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var i=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};i.prototype.createResolveAndReject_=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},i.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof i)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},i.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},i.prototype.reject_=function(e){this.settle_(2,e)},i.prototype.fulfill_=function(e){this.settle_(1,e)},i.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},i.prototype.scheduleUnhandledRejectionCheck_=function(){var e=this;n((function(){if(e.notifyUnhandledRejection_()){var t=o.global.console;void 0!==t&&t.error(e.result_)}}),1)},i.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var e=o.global.CustomEvent,t=o.global.Event,r=o.global.dispatchEvent;return void 0===r||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.result_,r(e))},i.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)s.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var s=new t;return i.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},i.prototype.settleSameAsThenable_=function(e,t){var r=this.createResolveAndReject_();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},i.prototype.then=function(e,t){function r(e,t){return"function"==typeof e?function(t){try{n(e(t))}catch(e){o(e)}}:t}var n,o,s=new i((function(e,t){n=e,o=t}));return this.callWhenSettled_(r(e,n),r(t,o)),s},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.callWhenSettled_=function(e,t){function r(){switch(n.state_){case 1:e(n.result_);break;case 2:t(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?s.asyncExecute(r):this.onSettledCallbacks_.push(r),this.isRejectionHandled_=!0},i.resolve=r,i.reject=function(e){return new i((function(t,r){r(e)}))},i.race=function(e){return new i((function(t,n){for(var i=o.makeIterator(e),s=i.next();!s.done;s=i.next())r(s.value).callWhenSettled_(t,n)}))},i.all=function(e){var t=o.makeIterator(e),n=t.next();return n.done?r([]):new i((function(e,o){function i(t){return function(r){s[t]=r,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(n.value).callWhenSettled_(i(s.length-1),o),n=t.next()}while(!n.done)}))},i}),"es6","es3"),o.polyfill("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),"es6","es3"),o.polyfill("Array.prototype.includes",(function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;for(0>(t=t||0)&&(t=Math.max(t+n,0));t<n;t++){var o=r[t];if(o===e||Object.is(o,e))return!0}return!1}}),"es7","es3"),o.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},o.polyfill("String.prototype.includes",(function(e){return e||function(e,t){return-1!==o.checkStringArgs(this,e,"includes").indexOf(e,t||0)}}),"es6","es3"),o.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var r=0,n=!1,o={next:function(){if(!n&&r<e.length){var o=r++;return{value:t(o,e[o]),done:!1}}return n=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o},o.polyfill("Array.prototype.keys",(function(e){return e||function(){return o.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),o.polyfill("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991}),"es6","es3"),o.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new o.global.Proxy(e,{get:function(r,n,o){return r==e&&"q"==n&&o==t}}));return!0===t.q}catch(e){return!1}},o.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,o.ES6_CONFORMANCE=o.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&o.checkEs6ConformanceViaProxy(),o.polyfill("WeakMap",(function(e){function t(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function n(e){if(!o.owns(e,s)){var r=new t;o.defineProperty(e,s,{value:r})}}function i(e){if(!o.ISOLATE_POLYFILLS){var r=Object[e];r&&(Object[e]=function(e){return e instanceof t?e:(Object.isExtensible(e)&&n(e),r(e))})}}if(o.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&o.ES6_CONFORMANCE)return e}else if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),r=Object.seal({}),n=new e([[t,2],[r,3]]);return 2==n.get(t)&&3==n.get(r)&&(n.delete(t),n.set(r,4),!n.has(t)&&4==n.get(r))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var a=0,u=function(e){if(this.id_=(a+=Math.random()+1).toString(),e){e=o.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};return u.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(n(e),!o.owns(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.id_]=t,this},u.prototype.get=function(e){return r(e)&&o.owns(e,s)?e[s][this.id_]:void 0},u.prototype.has=function(e){return r(e)&&o.owns(e,s)&&o.owns(e[s],this.id_)},u.prototype.delete=function(e){return!!(r(e)&&o.owns(e,s)&&o.owns(e[s],this.id_))&&delete e[s][this.id_]},u}),"es6","es3"),o.MapEntry=function(){},o.polyfill("Map",(function(e){if(o.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&o.ES6_CONFORMANCE)return e}else if(function(){if(o.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(o.makeIterator([[t,"s"]]));if("s"!=r.get(t)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=n.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!n.next().done)}catch(e){return!1}}())return e;var t=new WeakMap,r=function(e){if(this.data_={},this.head_=s(),this.size=0,e){e=o.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};r.prototype.set=function(e,t){var r=n(this,e=0===e?0:e);return r.list||(r.list=this.data_[r.id]=[]),r.entry?r.entry.value=t:(r.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},r.list.push(r.entry),this.head_.previous.next=r.entry,this.head_.previous=r.entry,this.size++),this},r.prototype.delete=function(e){return!(!(e=n(this,e)).entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,!0)},r.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=s(),this.size=0},r.prototype.has=function(e){return!!n(this,e).entry},r.prototype.get=function(e){return(e=n(this,e).entry)&&e.value},r.prototype.entries=function(){return i(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return i(this,(function(e){return e.key}))},r.prototype.values=function(){return i(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var r,n=this.entries();!(r=n.next()).done;)r=r.value,e.call(t,r[1],r[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var n=function(e,r){var n=r&&typeof r;"object"==n||"function"==n?t.has(r)?n=t.get(r):(n=""+ ++a,t.set(r,n)):n="p_"+r;var i=e.data_[n];if(i&&o.owns(e.data_,n))for(e=0;e<i.length;e++){var s=i[e];if(r!=r&&s.key!=s.key||r===s.key)return{id:n,list:i,index:e,entry:s}}return{id:n,list:i,index:-1,entry:void 0}},i=function(e,t){var r=e.head_;return o.iteratorPrototype((function(){if(r){for(;r.head!=e.head_;)r=r.previous;for(;r.next!=r.head;)return r=r.next,{done:!1,value:t(r)};r=null}return{done:!0,value:void 0}}))},s=function(){var e={};return e.previous=e.next=e.head=e},a=0;return r}),"es6","es3"),o.polyfill("Object.values",(function(e){return e||function(e){var t,r=[];for(t in e)o.owns(e,t)&&r.push(e[t]);return r}}),"es8","es3"),o.polyfill("Array.prototype.values",(function(e){return e||function(){return o.iteratorFromArray(this,(function(e,t){return t}))}}),"es8","es3"),o.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,o=0;o<n;o++){var i=e[o];if(t.call(r,i,o,e))return{i:o,v:i}}return{i:-1,v:void 0}},o.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return o.findInternal(this,e,t).v}}),"es6","es3"),o.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return o.findInternal(this,e,t).i}}),"es6","es3"),o.polyfill("Array.prototype.entries",(function(e){return e||function(){return o.iteratorFromArray(this,(function(e,t){return[e,t]}))}}),"es6","es3"),i=window,s=function(e,t,r,n){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r||4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}({"./node_modules/webpack/buildin/global.js":function(e,t){t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},"./source/VTIndex.js":function(e,t,r){if(e=r("./node_modules/webpack/buildin/global.js"),r=r("./source/VTInternals.js"),e.IDSafe){var n=Object.assign({},r);delete n.constants,e.IDSafe=Object.assign({},e.IDSafe,n)}t.a=r},"./source/VTIndexWebpack.js":function(e,t,r){function n(){return new Worker(r.p+"VaultSDK.worker.js")}r.r(t),(e=r("./source/VTIndex.js")).a.Utils.setWorkerFactory((function(){return new n})),t.default=e.a},"./source/VTInternals.js":function(e,t,r){r.r(t),r.d(t,"constants",(function(){return n})),r.d(t,"ItemManager",(function(){return h})),r.d(t,"CryptoParams",(function(){return g})),r.d(t,"cryptoParams",(function(){return m})),r.d(t,"Utils",(function(){return ye})),r.d(t,"vaultUtils",(function(){return Se})),r.d(t,"Keys",(function(){return x})),r.d(t,"vaultKeys",(function(){return F})),r.d(t,"Item",(function(){return Pe})),r.d(t,"Event",(function(){return Me})),r.d(t,"BankAccount",(function(){return Be})),r.d(t,"BankAccountManager",(function(){return qe})),r.d(t,"CreditCard",(function(){return it})),r.d(t,"CreditCardManager",(function(){return pt})),r.d(t,"Contact",(function(){return gt})),r.d(t,"Login",(function(){return It})),r.d(t,"Note",(function(){return Dt})),r.d(t,"NoteManager",(function(){return xt})),r.d(t,"Identity",(function(){return Wt})),r.d(t,"Address",(function(){return Zt})),r.d(t,"LoginManager",(function(){return cr})),r.d(t,"nodeParser",(function(){return yr})),r.d(t,"appNode",(function(){return L})),r.d(t,"IDSCNode",(function(){return oe})),r.d(t,"idscNode",(function(){return ie})),r.d(t,"nodeSync",(function(){return Cr})),r.d(t,"nodeStore",(function(){return jr})),r.d(t,"AddressManager",(function(){return xr})),r.d(t,"loginSearchManager",(function(){return Wr})),r.d(t,"vaultManager",(function(){return Bn})),r.d(t,"IdentityManager",(function(){return Vn})),r.d(t,"TelemetryWrapper",(function(){return $})),r.d(t,"telemetryWrapper",(function(){return X})),r.d(t,"ContactManager",(function(){return Xn})),r.d(t,"AssociatedUrl",(function(){return ro})),r.d(t,"AssociatedUrlManager",(function(){return no})),r.d(t,"LoginHistory",(function(){return lo})),r.d(t,"LoginHistoryManager",(function(){return co})),r.d(t,"Authenticator",(function(){return go})),r.d(t,"AuthenticatorManager",(function(){return mo})),r.d(t,"File",(function(){return Oo})),r.d(t,"FileManager",(function(){return Io})),r.d(t,"DeletedUnknownBreach",(function(){return wo})),r.d(t,"DeletedUnknownBreachManager",(function(){return Lo})),r.d(t,"PasswordBreaches",(function(){return xo})),r.d(t,"PasswordBreachesManager",(function(){return Fo})),r.d(t,"LoginIgnoredBreaches",(function(){return Yo})),r.d(t,"LoginIgnoredBreachesManager",(function(){return Ko})),r.d(t,"BulkUploadManager",(function(){return zo})),r.d(t,"Tag",(function(){return ri})),r.d(t,"TagManager",(function(){return mi})),r.d(t,"TagItemManager",(function(){return Ri})),r.d(t,"TagItem",(function(){return Fi})),r.d(t,"RecoveryIDSCNode",(function(){return Ki})),r.d(t,"recoveryIdscNode",(function(){return zi})),r.d(t,"recoveryManager",(function(){return hs})),r.d(t,"recoveryNode",(function(){return ts}));var n={DEFAULT_APPID_NODE:"/32",get DEFAULT_RECOVERY_NODE(){return this.RECOVERY_33},get DEFAULT_APPID_IDSC_NODE(){return this.DEFAULT_APPID_NODE+"/IDSC"},get DEFAULT_RECOVERY_IDSC_NODE(){return this.DEFAULT_RECOVERY_NODE+"/IDSC-RK"},get DEFAULT_LOGIN_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/1"},get DEFAULT_IDENTITY_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/2"},get DEFAULT_ADDRESS_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/3"},get DEFAULT_CREDIT_CARD_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/4"},get DEFAULT_NOTE_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/6"},get DEFAULT_BANK_ACCOUNT_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/13"},get DEFAULT_ASSOCIATED_URL_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/16"},get DEFAULT_LOGIN_HISTORY_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/17"},get DEFAULT_AUTHENTICATOR_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/18"},get DEFAULT_FILE_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/19"},get DEFAULT_DELETED_UNKNOWN_BREACH_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/20"},get DEFAULT_PASSWORD_BREACHES_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/21"},get DEFAULT_LOGIN_IGNORED_BREACHES_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/22"},get DEFAULT_TAG_NODE(){return this.DEFAULT_APPID_IDSC_NODE+"/15"},DEFAULT_IDSC_PATH_CRC:"/SPS/User",SERIALIZE_DATA_TYPE:{BINARY:0,BOOL:1,UINT32:2,STRING:3,LONG:4},BANK_ACCOUNTS:{OWNERNAME:"100",ROUTINGNUMBER:"101",ACCOUNTNUMBER:"102",ACCOUNTNAME:"2000",SECURE:"2001",BANKNAME:"2002",SWIFT_CODE:"5029",IBAN:"5030"},IDENTITY:{FIRSTNAME:"100",MIDDLENAME:"101",LASTNAME:"102",LASTNAME2:"103",FIRSTNAME_ALPHABET:"104",LASTNAME_ALPHABET:"105",FIRSTNAME_ROMAN:"106",LASTNAME_ROMAN:"107",DOB_DAY:"108",DOB_MONTH:"109",DOB_YEAR:"110",EMAIL:"111",PHONE_WORK:"112",PHONE_HOME:"113",PHONE_MOBILE:"114",SALUTATION:"118",PHONE_EXTENSION:"120",CARDNAME:"2000",SECURE:"2001",GENDER:"2002",CREDITCARD_GUID:"4000",ADDRESS_GUID:"4001",COUNTRY_REGION:"4002"},CREDIT_CARDS:{CARD_TYPE:"100",CARD_NUMBER:"101",NAME_ON_CARD:"102",CVC:"103",CVC_V1:"5031",EXPIRATION_MONTH:"104",EXPIRATION_YEAR:"105",START_DAY:"106",START_MONTH:"107",START_YEAR:"108",ISSUE_NUMBER:"109",SECURE:"2000",CARD_NAME:"2001",COUNTRY_REGION:"4000",IDENTITY_CARD:"4001",CARD_COMMENTS:"110",BANK_NAME:"bankName",CARD_PIN:"5030",CREATED_AT:"createdAt",LAST_USED_AT:"lastUsedAt",DEFAULT_SORT_KEY:"2001"},ASSOCIATED_URL:{ASSOCIATED_LOGIN_ID:"associatedLoginId",ASSOCIATED_DOMAIN:"associatedDomain",LOGIN_URL:"loginUrl",VISIBLE:"visible",LAST_USED_AT:"lastUsedAt"},LOGIN_HISTORY:{ASSOCIATED_LOGIN_ID:"associatedLoginId",EMAIL:"email",USERNAME:"username",PASSWORD:"password",CREATED_AT:"createdAt"},AUTHENTICATOR:{SERVICE:"service",USERNAME:"username",KEY:"key",CREATED_AT:"createdAt",LAST_USED_AT:"lastUsedAt"},FILE:{NAME:"name",TYPE:"type",ASSOCIATED_ENTITY_ID:"associatedEntityId",ENTITY_TYPE:"entityType",CREATED_AT:"createdAt",LAST_USED_AT:"lastUsedAt"},DELETED_UNKNOWN_BREACH:{BREACH_KEY:"breachKey",CREATED_AT:"createdAt",LAST_USED_AT:"lastUsedAt"},PASSWORD_BREACHES:{PASSWORD:"password",TYPE:"type",DOMAIN:"domain",BREACH_ID:"breachId",DATE:"date",CREATED_AT:"createdAt",LAST_USED_AT:"lastUsedAt"},LOGIN_IGNORED_BREACHES:{ASSOCIATED_LOGIN_ID:"associatedLoginId",BREACH_ID:"breachId",BREACH_IGNORE_TYPE:"breachIgnoreType",CREATED_AT:"createdAt",LAST_USED_AT:"lastUsedAt"},DEFAULT_NODE_ID:"0",DEFAULT_LASTUPDATE:"1",DEFAULT_FAVORITE:"3",DEFAULT_DERIVED_AES_KEY_SIZE:32,STARTING_CHECKSUM:1130461520,DEFAULT_CHALLENGE_SALT_SIZE:256,DEFAULT_AES_INIT_VECTOR_SIZE:16,DEFAULT_SHA_DIGEST:32,DEFAULT_HMAC_SIZE:23,DEFAULT_SHA1_DIGEST:20,DEFAULT_HMAC_SHA_ALGORITHM:"sha256",APPID_11:"/11",APPID_32:"/32",RECOVERY_33:"/33",DEFAULT_SHA1:"sha1",DEFAULT_OBFUSCATION_KEY_SIZE:128,ITEM_INTERNAL_CONTEXT:"internal",GET_DERIVED_KEY:"985fe59f-a8ba-459d-a01b-c9c1889338cc",LOCAL_VERIFY_VAULT_PASSWORD_ITERATION_COUNT:5e3,DEFAULT_CHALLENGE_ITERATION_COUNT:2e4,DEFAULT_VAULT_PBDK_SALT:"{E2DDC45B-1125-498d-9D8A-A16EF91E6BA2}",DEFAULT_CRC_SIZE:4,DEFAULT_PROFILE_ID:"0",DEFAULT_LOGIN_ID:"1",DEFAULT_VAULT_VERSION:"Version",DEFAULT_CHALLENGE_IV:"challengeIV",DEFAULT_PASSWORD_HINT:"{8CFB92F1-A13C-41b6-95D3-8C08390160C9}",DEFAULT_CRYPTO_ALGORITHM:"{791EB356-C2C2-4668-8A71-7F2F01F3CF6D}",DEFAULT_PBKDF2_MD:"sha256",PBKDF2:"pbkdf2",DEFAULT_CHALLENGE_SALT:"challengeSalt",GET_DERIVED_KEY_RESPONSE:"2d4e43f1-40a2-4387-8806-03ccaf277fc4",DEFAULT_VAULT_ENCRYPTION_KEY:"{204DC88E-7D86-4565-AE26-889634D5DC34}",DEFAULT_VAULT_OBFUSCATION_KEY:"{D835F5EF-C3E4-4e46-90D2-32BF15B925F0}",DEFAULT_RECOVERY_SOURCE_TYPE:"2",DEFAULT_RECOVERY_SOURCE_ID:"3",DEFAULT_RECOVERY_VAULT_VERSION:"Version",DEFAULT_RECOVERY_CHALLENGE_SALT:"challengeSalt",DEFAULT_RECOVERY_CHALLENGE_IV:"challengeIV",DEFAULT_RECOVERY_CRYPTO_ALGORITHM:"{791EB356-C2C2-4668-8A71-7F2F01F3CF6D}",DEFAULT_RECOVERY_RANDOM_KEY:"{B70D49F7-409E-4EC5-83D0-BA53209EAE86}",DEFAULT_RECOVERY_PDK_SALT:"{E2DDC45B-1125-498d-9D8A-A16EF91E6BA2}",DEFAULT_RECOVERY_VAULT_CHALLENGE_PRIVATE_KEY:"{5AE43CF8-2B01-4BEB-95BE-B5798EFAB9D5}",DEFAULT_RECOVERY_VAULT_DERIVED_KEY:"{A639CAA0-7B9D-428E-A4F6-1C7C823CC1B3}",DEFAULT_USERNAME:"100",DEFAULT_PASSWORD:"101",DEFAULT_LOGIN_NOTES:"102",DEFAULT_LOGIN_URL:"2000",DEFAULT_DOMAIN:"domain",DEFAULT_LEGACY_EMAIL:"legacyEmail",DEFAULT_FORM_HOST:"formHost",DEFAULT_PAGE_HOST:"pageHost",DEFAULT_PROTOCOL:"protocol",DEFAULT_CREATED_AT:"createdAt",DEFAULT_LAST_USED_AT:"lastUsedAt",DEFAULT_PWD_AUTO_GENERATED:"passwordAutoGenerated",DEFAULT_IS_DEMO_ACCOUNT:"isDemoAccount",DEFAULT_IGNORE_AUC:"ignoreAUC",DEFAULT_IGNORE_HIBP_BREACHED_PWD:"ignoreHibpBreachedPassword",DEFAULT_IGNORE_INSECURE_PROTOCOL:"ignoreInsecureProtocol",DEFAULT_IGNORE_PWD_STRENGTH:"ignorePasswordStrength",DEFAULT_IGNORE_REUSED:"ignoreReused",DEFAULT_ASSOCIATED_AUTH_ID:"associatedAuthenticatorId",DEFAULT_PASSWORD_TIMESTAMP:"passwordTimestamp",DEFAULT_SECURE:"2001",DEFAULT_FAV_ICON_URL:"2002",DEFAULT_SITE_NAME:"2003",DEFAULT_SIGN_ON_DESTINATION:"2004",DEFAULT_CRED_0:"3000",DEFAULT_CRED_1:"3001",DEFAULT_CRED_2:"3002",DEFAULT_FOLDER:"4000",DEFAULT_AUTO_FILL:"4001",DEFAULT_AUTO_SUBMIT:"4002",DEFAULT_PROMINENT_COLOR:"4003",DEFAULT_TAG_NAME:"2000",DEFAULT_TAG_ID:"2",DEFAULT_TAG_ITEM:"2",NOTE:{TITLE:"100",INFORMATION:"101",SECURE:"2000",TITLE_PROPERTY_NAME:"title",INFORMATION_PROPERTY_NAME:"information",COLOR:"color",CREATED_AT:"createdAt",LAST_USED_AT:"lastUsedAt"},TAG_NODE:{LOGIN:"1",IDENTITY:"2",ADDRESS:"3",CREDIT_CARD:"4",BANK_ACCOUNT:"13",NOTE:"6"},TAG:{LOGIN:"login",IDENTITY:"identity",ADDRESS:"address",CREDIT_CARD:"creditCard",BANK_ACCOUNT:"bankAccount",NOTE:"note"},LOGIN_TYPE_SPOC:"SPOC",LOGIN_TYPE_LOCAL:"LOCAL",NORTON_IDENTITY_SAFE:"Norton Identity Safe",DEFAULT_AES_INIT_VECTORY_SIZE:16,DEFAULT_VAULT_SCHEMA_ITERATION_COUNT:1e5,CURRENT_VAULT_SDK_VERSION:327680,ADDRESS:{ADDR_CITY:"100",ADDR_POSTAL:"101",ADDR_STATE:"102",ADDR_STREET:"103",ADDR_STREET2:"104",ADDR_STREET3:"105",APTSTREETHOUSENUM:"106",ADDR_CITY_ALPHABET:"107",ADDR_STREET_ALPHABET:"108",ADDR_STREET2_ALPHABET:"109",ADDR_CITY_DISTRICT_WARD_AND_NUMBERS:"110",ADDR_BUILDING_NAME_AND_FLOOR:"111",ADDRESSNAME:"2000",SECURE:"2001",COUNTRY_REGION:"4000"},EVENTS:{VAULT_SYNC:"AF7B63E0-F40E-4B5A-B59B-2B2B5CC371DB"},vaultManager:{state:{INTERNET_UNAVILABLE:0,LOAD_FROM_CLOUD:1,LOADED:2,INTERNAL_ERROR:3,NETWORK_ERROR:4,HANDLING_CHALLENGE:5,CLIENT_UNAUTHORIZED:6,READING_NODES:7,DECRYPTING_NODES:8,VAULT_SYNCED:9,GETTING_LOCAL_CHANGES:10,ENCRYPTING_NODES:11,UPLOADING_TO_CLOUD:12,MERGE_NODES:13,NOT_LOGGED_IN:14,VAULT_LOCKED:15,VAULT_FOUND:16,VAULT_NOT_FOUND:17,SSO_UNAUTHORIZED:18,VAULT_CREATED:19,O2_RATE_LIMITED_ERROR:20,VAULT_DELETED:21,VAULT_PASSWORD_CHANGED:22},stateInfo:{UNAUTHORIZED:"User is unauthorized",NETWORK_ERROR:"Server returned an error",READING_NODES:"Reading your vault",DECRYPTING_NODES:"Decrypting your vault",VAULT_SYNCED:"Successfully synced your vault",VAULT_SYNCED_DECRYPTED:"Successfully synced and decrypted your vault",LOAD_FROM_CLOUD:"Downloading your vault",VAULT_CREATED:"Vault created successfully",VAULT_DELETED:"Vault deleted successfully",VAULT_CLOSED:"Vault closed successfully",VAULT_PASSWORD_CHANGED:"Vault password changed successfully",VAULT_CLOSE_FAILED:"Unable to close the vault",HANDLE_CHALLENGE_FAILED:"Unable to handle challenge",VAULT_NOT_FOUND:"Vault does not exist for this user",VAULT_FOUND:"Vault exists for this user",LOADED:"Successfully downloaded your vault",GENERATE_DECRYPT_KEY_ERROR:"Unable to generate decryption key",DECRYPT_VAULT_KEY_ERROR:"Unable to decrypt the vault key. Very likely that vault has been corrupted",DECRYPT_OBFUSCATION_KEY_ERROR:"Unable to decrypt the obfuscation key. Very likely that vault has been corrupted",SSO_UNAUTHORIZED:"Unable to setup an sso connection",O2_RATE_LIMITED_ERROR:"Too many failure attempts to answer the challenge",VAULT_LOCKED_CANNOT_SYNC:"Vault is locked and cannot be synced",INTERNET_UNAVAILABLE:"Internet connection not available"}},performanceReporter:{COMPONENT:{VAULTSDK:"VaultSDK"},TYPE:{FORCE_SYNC_VAULT:"forceSyncVault",OPEN_VAULT:"openVault"}},HTTP_PROTOCOL:"http",HTTPS_PROTOCOL:"https",NODE_LIST_STORAGE_KEY:"8466c57e-c039-465d-afc8-bb82b9d5ec0e"},i=r("@browser-services/bfw"),s=r.n(i),a=s.a,u=a.logger,l=a.utils,c=l.isNil,d=l.isntNil,f=l.isArray,p=l.isSuccessCode,h=function(e){this.name=e};h.prototype.getName=function(){return this.name},h.prototype.addItem=function(e,t){if(t=void 0===t||t,c(e))throw Error("Item cannot be null");c(t)&&(t=!1);var r=e.getPath();if(!c(r)){if(d(this.items[r]))throw Error("Item is already added. If you are updating an item please use the updateItem API");return this.items[r]=e,t?Cr.uploadNodes(e.clone().serializeNode(),null):void 0}u.error("GUID is not found. Item has not been created correctly")},h.prototype.addItems=function(e,t){t=void 0===t||t;var r,n,i,s,a,l,h,_,E=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(!f(e))throw Error("Items must be an array");for(n in c(t)&&(t=!1),r=[],e)if(Object.prototype.hasOwnProperty.call(e,n)){if(i=e[n],s=i.getPath(),c(s))throw u.error("GUID is not found. Item has not been created correctly"),Error("GUID is not found. Item has not been created correctly");if(a=E.items[s],d(a))throw Error("Item is already added. If you are updating an item please use the updateItem API");E.items[s]=i,r.push(i.clone().serializeNode())}return!0!==t?o.jumpTo(0):o.yield(Cr.uploadNodes(r,null),3)}if(l=o.yieldResult,h=l.status,_=l.error,!p(h))throw{status:h,error:_};o.jumpToEnd()}))},h.prototype.search=function(e,t){return o.asyncExecutePromiseGeneratorProgram((function(e){throw Error("This method has to be implemented in derived class")}))},h.prototype.addTag=function(e,t){throw Error("This method has to be implemented in derived class")},h.prototype.getTag=function(e){throw Error("This method has to be implemented in derived class")},h.prototype.addItemToTag=function(e,t,r,n){throw Error("This method has to be implemented in derived class")},h.prototype.getTagsByItemId=function(e,t){throw Error("This method has to be implemented in derived class")},h.prototype.getItemsByTagId=function(e,t){throw Error("This method has to be implemented in derived class")},h.prototype.deleteTagItem=function(e,t,r,n){throw Error("This method has to be implemented in derived class")},h.prototype.getItem=function(e){if(c(e))throw Error("GUID cannot be null");return this.items[e]},h.prototype.getAllItems=function(){return this.items},h.prototype.updateItem=function(e,t){if(t=void 0===t||t,c(e))throw Error("Item cannot be null");c(t)&&(t=!1);var r=e.getPath();if(c(this.items[r]))throw Error("New item is being added. Please use the addItem interface");if(this.items[r]=e,t)return Cr.uploadNodes(e.clone().serializeNode(),null)},h.prototype.updateItems=function(e,t){t=void 0===t||t;var r,n,i,s,a,u,l,d,h=this;return o.asyncExecutePromiseGeneratorProgram((function(_){if(1==_.nextAddress){if(!f(e))throw Error("Item must be an array.");for(c(t)&&(t=!1),r=[],n=o.makeIterator(e),i=n.next();!i.done;i=n.next()){if(s=i.value,a=s.getPath(),c(a))throw Error("GUID is not found. Item has not been created correctly");h.items[a]=s,r.push(s.clone().serializeNode())}return!0!==t?_.jumpTo(0):_.yield(Cr.uploadNodes(r,null),3)}if(u=_.yieldResult,l=u.status,d=u.error,!p(l))throw{status:l,error:d};_.jumpToEnd()}))},h.prototype.postSyncSetup=function(){for(var e in this.items)if({}.hasOwnProperty.call(this.items,e)){var t=this.items[e];t.encrypted&&t.decrypt()}},h.prototype.deleteItem=function(e,t){t=void 0===t||t;var r,n,i,s,a,l=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(c(e))return o.return();if(r=l.items[e],c(r))return o.return(void u.info("No item found to delete"));if(n=r.serializeNode(!0),delete l.items[e],c(t))return o.return();if(i=[],!t){o.jumpTo(2);break}return o.yield(Cr.uploadNodes(n,null),3);case 3:s=o.yieldResult,i.push(s);case 2:return o.yield(l.removeTagItems([e],t),4);case 4:return a=o.yieldResult,o.return((i.push(a),i))}}))},h.prototype.deleteAllItems=function(e){e=void 0===e||e;var t,r,n,i,s,a,u,l=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){for(n in t=[],r=[],l.items)Object.prototype.hasOwnProperty.call(l.items,n)&&(i=l.items[n].serializeNode(!0),r.push(n),delete l.items[n],t.push(i));return 0===t.length||c(e)?o.jumpTo(0):e?o.yield(Cr.uploadNodes(t,null),4):o.jumpTo(3)}if(3!=o.nextAddress&&(s=o.yieldResult,a=s.status,u=s.error,!p(a)))throw{status:a,error:u};return o.yield(l.removeTagItems(r,e),0)}))},h.prototype.deleteItems=function(e,t){t=void 0===t||t;var r,n,i,s,a,l,d,h=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(!f(e))throw Error("guids must be an array.");for(n in c(t)&&(t=!1),r=[],e)if(Object.prototype.hasOwnProperty.call(e,n)){if(i=h.items[e[n]],c(i))throw u.error("GUID is not found. No item found to delete"),Error("GUID is not found. No item found to delete");s=i.serializeNode(!0),delete h.items[e[n]],r.push(s)}if(0===r.length)throw u.error("No item found to delete"),Error("No item found to delete");return!0!==t?o.jumpTo(2):o.yield(Cr.uploadNodes(r,null),3)}if(2!=o.nextAddress&&(a=o.yieldResult,l=a.status,d=a.error,!p(l)))throw{status:l,error:d};return o.yield(h.removeTagItems(e,t),0)}))},h.prototype.removeTagItems=function(e,t){var r,n,i,s=this;return o.asyncExecutePromiseGeneratorProgram((function(a){if(1==a.nextAddress){if(c(s.tagType)||!f(e))return a.jumpTo(0);r=o.makeIterator(e),n=r.next()}return 4!=a.nextAddress?n.done?a.jumpTo(0):(i=n.value,a.yield(s._removeItemFromTag(i,s.tagType,t),4)):(n=r.next(),a.jumpTo(3))}))},h.prototype.getAllTags=function(){for(var e=Bn.getItemManager(Bn.TAG_MANAGER).getAllItems(),t={},r=o.makeIterator(Object.getOwnPropertyNames(e)),n=r.next();!n.done;n=r.next())0!==e[n=n.value][this.tagType].length&&(t[n]=e[n]);return t},h.prototype._removeItemFromTag=function(e,t,r){var n,i,s,a,u;return r=void 0===r||r,o.asyncExecutePromiseGeneratorProgram((function(l){if(1==l.nextAddress){if(c(e)&&c(t))return l.return();if(n=Bn.getItemManager(Bn.TAG_MANAGER),i=n.getTagsByItemId(e,t),c(i))return l.jumpTo(0);s=o.makeIterator(Object.getOwnPropertyNames(i)),a=s.next()}return 4!=l.nextAddress?a.done?l.jumpTo(0):(u=a.value,l.yield(n.deleteTagItem(u,t,e,r),4)):(a=s.next(),l.jumpTo(3))}))};var _=s.a.utils.isNil,E=[n.DEFAULT_SHA1,n.DEFAULT_PBKDF2_MD],g=function(){this._pbdkf2MD=n.DEFAULT_PBKDF2_MD,this._hmacShaAlgorithm=n.DEFAULT_HMAC_SHA_ALGORITHM,this._shaDigestSize=n.DEFAULT_SHA_DIGEST};g.prototype.setPBDKF2MD=function(e){this._pbdkf2MD=e},g.prototype.getPBDKF2MD=function(){return this._pbdkf2MD},g.prototype.setHmacSha=function(e){this._hmacShaAlgorithm=e},g.prototype.getHmacSha=function(){return this._hmacShaAlgorithm},g.prototype.setShaDigestSize=function(e){this._shaDigestSize=e},g.prototype.getShaDigestSize=function(){return this._shaDigestSize},g.prototype.setCryptoParams=function(e,t,r){if(_(e)||_(t)||_(r))throw Error("not enough params for setCryptoParams");if(!E.includes(e))throw Error("Unsupported pbdkf2MD");this.setPBDKF2MD(e),this.setHmacSha(t),this.setShaDigestSize(r)};var m=new g,y=r("@browser-services/ocl"),S=r.n(y),T=r("node-forge"),A=r("protobufjs"),b=s.a.utils,O=b.isNil,I=b.isFunction,v=function(){this._isAvailable=!1};v.prototype.getNodeId=function(){throw Error("not implemented")},v.prototype.getChallengeSaltName=function(){throw Error("not implemented")},v.prototype.setCryptoAlgorithm=function(e){this.cryptoAlgorithm=e},v.prototype.getCryptoAlgorithm=function(){return this.cryptoAlgorithm},v.prototype.setChallengeIV=function(e){this.iv=e},v.prototype.getChallengeIV=function(){return O(this.iv)?null:this.iv.slice(0,this.iv.byteLength-n.DEFAULT_CRC_SIZE)},v.prototype.setChallengeSalt=function(e){this.challengeSalt=e},v.prototype.getChallengeSalt=function(){return O(this.challengeSalt)?null:this.challengeSalt.slice(0,this.challengeSalt.byteLength-n.DEFAULT_CRC_SIZE)},v.prototype.setVaultVersion=function(e){this.valutVersion=e},v.prototype.getVaultVersion=function(){return this.valutVersion},v.prototype.setNodeModified=function(e){this.nodeModified=e},v.prototype.getNodeModified=function(){return this.nodeModified},v.prototype.setAvailability=function(e){this._isAvailable=e},v.prototype.isEmpty=function(){return!1===this._isAvailable},v.prototype.serialize=function(e){throw Error("not implemented")},v.prototype.reset=function(){for(var e in this)I(this[e])||(this[e]=null);this._isAvailable=!1};var N=s.a.utils.isntNil,R=S.a.proto.com.symantec.oxygen.datastore.v2.messages,C=R.Value,D=R.Node,w=function(){return v.apply(this,arguments)||this};o.inherits(w,v),w.prototype.getNodeId=function(){return n.DEFAULT_APPID_NODE},w.prototype.getChallengeSaltName=function(){return n.DEFAULT_CHALLENGE_SALT},w.prototype.setPasswordHint=function(e){this.hint=e},w.prototype.getPasswordHint=function(){return this.hint},w.prototype.setProfileID=function(e){this.profileID=e},w.prototype.getProfileID=function(){return this.profileID},w.prototype.setLoginID=function(e){this.loginID=e},w.prototype.getLoginID=function(){return this.loginID},w.prototype.serialize=function(e){var t=new D,r=t.getValues(),o=this.getCryptoAlgorithm();t.setPath(this.getNodeId());var i=new C;return i.setType(C.DataTypeID.TID_STRING),i.setDataString(this.getProfileID()),i.setName(n.DEFAULT_PROFILE_ID),r.push(i),(i=new C).setType(C.DataTypeID.TID_UINT64),i.setDataUint64(this.getLoginID()),i.setName(n.DEFAULT_LOGIN_ID),r.push(i),(i=new C).setType(C.DataTypeID.TID_UINT32),i.setDataUint32(this.getVaultVersion()),i.setName(n.DEFAULT_VAULT_VERSION),r.push(i),(i=new C).setType(C.DataTypeID.TID_BINARY),i.setDataBinary(this.iv),i.setName(n.DEFAULT_CHALLENGE_IV),r.push(i),(i=new C).setType(C.DataTypeID.TID_STRING),i.setDataString(this.getPasswordHint()),i.setName(n.DEFAULT_PASSWORD_HINT),r.push(i),N(o)&&((i=new C).setType(C.DataTypeID.TID_STRING),i.setDataString(o),i.setName(n.DEFAULT_CRYPTO_ALGORITHM),r.push(i)),(o=new C).setType(C.DataTypeID.TID_BINARY),o.setDataBinary(this.challengeSalt),o.setName(n.DEFAULT_CHALLENGE_SALT),r.push(o),t.setValues(r),N(e)&&t.setChildNodes(e),t};var L=new w,P=s.a.utils,M=P.isNil,U=P.isntNil,j=P.isBoolean,k=S.a.utils,x=function(){this._locked=!0,this._seamlessVaultUnlockEnabled=!1,this.storage=null};x.prototype.initialize=function(e){this.storage=e},x.prototype.setEncryptionKey=function(e){this.encryptionKey=e,this.storage&&this.storage.set("encryptionKey",e)},x.prototype.setObfuscationKey=function(e){this.obfuscationKey=e,this.storage&&this.storage.set("obfuscationKey",e)},x.prototype.getEncryptionKey=function(){return this.encryptionKey||this.storage&&this.storage.get("encryptionKey")},x.prototype.storeEncodedVaultPassword=function(e){this.encodedPassword=e,this.storage&&this.storage.set("encodedPassword",e)},x.prototype.getObfuscationKey=function(){return this.obfuscationKey||this.storage&&this.storage.get("obfuscationKey")},x.prototype.isLocked=function(){return this.storage&&U(this.storage.get("isLocked"))?this.storage.get("isLocked"):this._locked},x.prototype.setLocked=function(e){!0===e&&(this.setObfuscationKey(null),this.setEncryptionKey(null),this.setEncodedVaultPassword(null),this.setChallengeKey(null),this.setChallengePrivateKey(null)),this._locked=e,this.storage&&this.storage.set("isLocked",e)},x.prototype.setEncodedVaultPassword=function(e){var t=this;if(M(e))return this.setSalt(null),void this.setEncodedPassword(null);var r={};r.id=n.GET_DERIVED_KEY,r.byteArray=e,r.salt=this.getSalt(),r.iterationCount=n.LOCAL_VERIFY_VAULT_PASSWORD_ITERATION_COUNT,r.keyLength=n.DEFAULT_DERIVED_AES_KEY_SIZE+n.DEFAULT_HMAC_SIZE,r.md=Se.getDerivedKeyMessageDigestAlgorithm(),Se.generateDerivedKey(r,(function(e){t.setEncodedPassword(e)}))},x.prototype.setEncodedPassword=function(e){this.encodedPassword=e,this.storage&&this.storage.set("encodedPassword",e)},x.prototype.getEncodedVaultPassword=function(){return this.encodedPassword||this.storage&&this.storage.get("encodedPassword")},x.prototype.isSeamlessVaultUnlockEnabled=function(){return this._seamlessVaultUnlockEnabled||!(!this.storage||!this.storage.get("seamlessVaultUnlockEnabled"))},x.prototype.setSeamlessVaultUnlockState=function(e){if(!j(e))throw Error("Seamless unlock state needs to be a Boolean value");this._seamlessVaultUnlockEnabled=e,this.storage&&this.storage.set("seamlessVaultUnlockEnabled",e)},x.prototype.setChallengeKey=function(e){this.challengeKey=e,this.storage&&this.storage.set("challengeKey",e)},x.prototype.getChallengeKey=function(){return this.challengeKey||this.storage&&this.storage.get("challengeKey")},x.prototype.getChallengePrivateKey=function(){return this.challengePrivateKey||this.storage&&this.storage.get("challengePrivateKey")},x.prototype.setChallengePrivateKey=function(e){this.challengePrivateKey=e,this.storage&&this.storage.set("challengePrivateKey",e)},x.prototype.getSalt=function(){return this.salt||this.storage&&this.storage.get("salt")},x.prototype.setSalt=function(e){this.salt=e,this.storage&&this.storage.set("salt",e)},x.prototype.updateVaultKeyStore=function(e,t,r,n){U(t)&&!this.isSeamlessVaultUnlockEnabled()&&(this.setEncryptionKey(e),this.setEncodedVaultPassword(t)),this.setObfuscationKey(r),this.setLocked(n)},x.prototype.compareWithVaultPassword=function(e,t){var r=this;if(M(e)||this.isLocked())return!1;if(!1===s.a.utils.isFunction(t))throw Error("callback cannot be null");if(M(this.getEncodedVaultPassword()))Se.compareWithEncryptionKey(e).then((function(n){!0===n&&r.setEncodedVaultPassword(e),t(n)}));else{var o={};o.id=n.GET_DERIVED_KEY,o.byteArray=e,o.salt=this.getSalt(),o.iterationCount=n.LOCAL_VERIFY_VAULT_PASSWORD_ITERATION_COUNT,o.keyLength=n.DEFAULT_DERIVED_AES_KEY_SIZE+n.DEFAULT_HMAC_SIZE,o.md=Se.getDerivedKeyMessageDigestAlgorithm(),Se.generateDerivedKey(o,(function(e){t(e===r.getEncodedVaultPassword())}))}},x.prototype.serialize=function(){var e=k.createStringBufferFromUint8Buffer(this.obfuscationKey);e=T.util.encode64(e);var t=k.createStringBufferFromUint8Buffer(this.encryptionKey);return t=T.util.encode64(t),JSON.stringify({isLocked:this._locked,obfuscationKey:e,encryptionKey:t,passwordHash:this.getEncodedVaultPassword()})};var F=new x,B=s.a.utils,G=B.isNil,V=B.isntNil,H=B.isString,W=B.isInteger,Y=s.a.telemetryConstants,K=n,z=K.LOGIN_TYPE_SPOC,q=K.LOGIN_TYPE_LOCAL,$=function(){this.IDS_CRYPTO_ERROR_CONSTANTS={DIGEST_COMPARISON_FAILURE:"Digest Comparison failure",TYPE_COMPARISON_FAILURE:"Type comparison failure",CHECKSUM_COMPARISON_FAILURE:"Checksum comparison failure",UNABLE_TO_ANSWER_CHALLENGE:"Unable to answer challenge",UNABLE_TO_CALCULATE_CHECKSUM:"Unable to calculate checksum",UNABLE_TO_DECRYPT_ITEM:"Unable to decrypt item",UNABLE_TO_ENCRYPT_ITEM:"Unable to encrypt item",UNABLE_TO_OBFUSCATE_ITEM:"Unable to obfuscate item"},this.TELEMETRY_CATEGORY={IDSCRYPTO:"IDSCrypto",BROWSER:"Browser",IDSAFE:"IDSafe",LOGIN:"Login",WAX:"Wax",OPENID:"OpenID",CCT:"cct",IDSVAULT:"IDSVault",PASSWORDCHANGER:"PasswordChanger",WELCOME_NOTIFICATION:"Welcome_Notification"},this.LOGIN_TYPE_SPOC="SPOC",this.LOGIN_TYPE_LOCAL="LOCAL",this.ACTION_TYPE={BROWSER:{LAUNCH:"launch",UPDATE:"update"},CCT:{LAUNCH:"launch",SUCCESS:"success"},IDSAFE:{UPDATE:"update"},LOGIN:{ADD:"add",MODIFY:"modify",DELETE:"delete",SEARCH:"search",SIGNIN:"signin"},OPENID:{LAUNCH:"launch",LOGINSUCCESS:"loginsuccess",PAGECLOSED:"pageclosed"},PASSWORDCHANGER:{AUTOCHANGEPASSWORD:"autochangepassword"},IDSVAULT:{MERGE:"merge",VAULTSTATISTICS:"vaultstatistics",LOGINURLCOUNT:"loginurlcount",UPDATE:"update",CREATEVAULT:"createvault",DELETEVAULT:"deletevault",CHANGEVAULTPASSWORD:"changevaultpassword",OPENVAULT:"openvault"}},this.OPENID_LABEL={DELETEVAULT:"deletevault"},this.CCT_LABEL={CCTLAUNCH:"cctLaunch",CCTSUCCESS:"cctSuccess"},this.IDSVAULT_LABEL={SIZE:"size",AVAILABILITY:"availability",PASSWORD:"password",PASSWORDHINT:"passwordhint",CREATEVAULTSUCCESS:"createvaultsuccess",FAILEDTOCREATE:"failedtocreate",DELETEVAULTSUCCESS:"deletevaultsuccess",FAILEDTODELETE:"failedtodelete",CHANGEVAULTPASSWORDFAILED:"changevaultpasswordfailed",CHANGEVAULTPASSWORDSUCCESS:"changevaultpasswordsuccess"},this.MIN_VALUE=0,this.MAX_VALUE=1};$.prototype.sendIDSCryptoError=function(e,t){var r=this.TELEMETRY_CATEGORY.IDSCRYPTO;this.checkStringIsValid(e),this.checkStringIsValid(t),this.send(r,t,e)},$.prototype.createVaultFailure=function(e,t){this.send(this.TELEMETRY_CATEGORY.IDSVAULT,this.ACTION_TYPE.IDSVAULT.CREATEVAULT,this.IDSVAULT_LABEL.FAILEDTOCREATE+"(additionalInfo-"+t+",state-"+e+")")},$.prototype.createVaultSuccess=function(){this.send(this.TELEMETRY_CATEGORY.IDSVAULT,this.ACTION_TYPE.IDSVAULT.CREATEVAULT,this.IDSVAULT_LABEL.CREATEVAULTSUCCESS)},$.prototype.deleteVaultSuccess=function(){this.send(this.TELEMETRY_CATEGORY.IDSVAULT,this.ACTION_TYPE.IDSVAULT.DELETEVAULT,this.IDSVAULT_LABEL.DELETEVAULTSUCCESS)},$.prototype.deleteVaultFailure=function(e,t){this.send(this.TELEMETRY_CATEGORY.IDSVAULT,this.ACTION_TYPE.IDSVAULT.DELETEVAULT,this.IDSVAULT_LABEL.FAILEDTODELETE+"(additionalInfo-"+t+",state-"+e+")")},$.prototype.changeVaultPasswordFailure=function(e,t){this.send(this.TELEMETRY_CATEGORY.IDSVAULT,this.ACTION_TYPE.IDSVAULT.CHANGEVAULTPASSWORD,this.IDSVAULT_LABEL.CHANGEVAULTPASSWORDFAILED+"(additionalInfo-"+t+",state-"+e+")")},$.prototype.changeVaultPasswordSuccess=function(){this.send(this.TELEMETRY_CATEGORY.IDSVAULT,this.ACTION_TYPE.IDSVAULT.CHANGEVAULTPASSWORD,this.IDSVAULT_LABEL.CHANGEVAULTPASSWORDSUCCESS)},$.prototype.sendLoginAdd=function(e,t){var r=this.TELEMETRY_CATEGORY.LOGIN;if(e!==z&&e!==q)throw Error("type must be either SPOC or LOCAL");this.send(r,this.ACTION_TYPE.LOGIN.ADD+"-"+e,""+(void 0===t?1:t))},$.prototype.sendLoginModify=function(e,t){var r=this.TELEMETRY_CATEGORY.LOGIN;if(e!==z&&e!==q)throw Error("type must be either SPOC or LOCAL");this.send(r,this.ACTION_TYPE.LOGIN.MODIFY+"-"+e,""+(void 0===t?1:t))},$.prototype.sendLoginDelete=function(e,t){var r=this.TELEMETRY_CATEGORY.LOGIN;if(e!==z&&e!==q)throw Error("type must be either SPOC or LOCAL");this.send(r,this.ACTION_TYPE.LOGIN.DELETE+"-"+e,""+(void 0===t?1:t))},$.prototype.sendIDSVaultMerge=function(e){var t=this.TELEMETRY_CATEGORY.IDSVAULT,r=this.ACTION_TYPE.IDSVAULT.MERGE;this.checkStringIsValid(e),this.send(t,r,e)},$.prototype.sendIDSVaultStatistics=function(e,t){var r=this.TELEMETRY_CATEGORY.IDSVAULT;switch(e){case this.IDSVAULT_LABEL.SIZE:this.checkValueInRange(t);break;case this.IDSVAULT_LABEL.AVAILABILITY:this.checkValueInRange(t,this.MIN_VALUE,this.MAX_VALUE);break;default:throw Error("label must be either 'size' or 'availability'")}this.send(r,this.ACTION_TYPE.IDSVAULT.VAULTSTATISTICS+"-"+e,""+t)},$.prototype.sendIDSVaultLoginURLCount=function(e,t){var r=this.TELEMETRY_CATEGORY.IDSVAULT;this.checkStringIsValid(e),this.checkValueInRange(t),this.send(r,this.ACTION_TYPE.IDSVAULT.LOGINURLCOUNT+"-"+e,""+t)},$.prototype.sendIDSVaultUpdate=function(e){var t=this.TELEMETRY_CATEGORY.IDSVAULT,r=this.ACTION_TYPE.IDSVAULT.UPDATE,n=this.IDSVAULT_LABEL.PASSWORDHINT;if(e!==this.IDSVAULT_LABEL.PASSWORD&&e!==n)throw Error("label must be either 'password' or 'passwordhint'");this.send(t,r,e)},$.prototype.send=function(e,t,r){if(this.checkStringIsValid(e),this.checkStringIsValid(t),this.checkStringIsValid(r),!this.actionExists(e,t))throw Error(e+" does not have action "+t+".");var n={};n[Y.parameters.HIT_TYPE]=Y.HIT_TYPE.EVENT,n[Y.parameters.CATEGORY]=e,n[Y.parameters.ACTION]=t,n[Y.parameters.LABEL]=r,(s.a.telemetry||s.a.telemetryProxy).send(n)},$.prototype.checkValueInRange=function(e,t,r){if(t=void 0===t?0:t,!s.a.utils.isInteger(e))throw Error("value must be an integer");if(e<t)throw Error("value must be greater than or equal to "+t);if(V(r)&&e>r)throw Error("value must be less than or equal to "+r);return this},$.prototype.checkStringIsValid=function(e){if(!H(e))throw Error(e+" must be of type string");return this},$.prototype.actionExists=function(e,t){if(e===this.TELEMETRY_CATEGORY.IDSCRYPTO){for(var r in e=this.IDS_CRYPTO_ERROR_CONSTANTS)if(e[r]===t)return!0;return!1}if(G(this.ACTION_TYPE[e.toUpperCase()])&&G(Y.actionType[e.toUpperCase()]))return!1;r=t.indexOf("-");var n=t;return-1<r&&(n=t.substring(0,r)),!(!V(this.ACTION_TYPE[e.toUpperCase()])||!V(this.ACTION_TYPE[e.toUpperCase()][n.toUpperCase()]))||!(!V(Y.actionType[e.toUpperCase()])||!V(Y.actionType[e.toUpperCase()][n.toUpperCase()]))},$.prototype.sendLoginTelemetryFromSPOC=function(e){if(G(e))throw Error("nodeStatusList is nil");if("object"!=typeof e)throw Error("nodeStatusList must be of type object");var t=e.added,r=e.updated;if(e=e.deleted,!W(t)||!W(r)||!W(e))throw Error("nodeStatusList addedNodes/updatedNodes/deleteNodes must be integers");0<t&&this.sendLoginAdd(z,t),0<r&&this.sendLoginModify(z,r),0<e&&this.sendLoginDelete(z,e)};var X=new $,J=S.a.proto.com.symantec.oxygen.datastore.v2.messages,Z=J.Value,Q=J.Node,ee=s.a.utils,te=ee.isNil,re=ee.isntNil,ne=ee.isFunction,oe=function(){};oe.prototype.setEncryptionKey=function(e){this.encryptionKey=e},oe.prototype.setObfuscationKey=function(e){this.obfuscationKey=e},oe.prototype.setPBDKSalt=function(e){this.salt=e},oe.prototype.setLoginID=function(e){this.loginID=e},oe.prototype.getLoginID=function(){return this.loginID},oe.prototype.getEncryptionKey=function(){return this.encryptionKey},oe.prototype.getObfuscationKey=function(){return this.obfuscationKey},oe.prototype.getPBDKSalt=function(){return te(this.salt)?null:this.salt.slice(0,this.salt.byteLength-n.DEFAULT_CRC_SIZE)},oe.prototype.setNodeModified=function(e){this.nodeModified=e},oe.prototype.getNodeModified=function(){return this.nodeModified},oe.prototype.serialize=function(e){var t=new Q,r=t.getValues();t.setPath(n.DEFAULT_APPID_IDSC_NODE);var o=new Z;return o.setType(Z.DataTypeID.TID_BINARY),o.setDataBinary(this.getEncryptionKey()),o.setName(n.DEFAULT_VAULT_ENCRYPTION_KEY),r.push(o),(o=new Z).setType(Z.DataTypeID.TID_UINT64),o.setDataUint64(this.getLoginID()),o.setName(n.DEFAULT_LOGIN_ID),r.push(o),(o=new Z).setType(Z.DataTypeID.TID_BINARY),o.setDataBinary(this.salt),o.setName(n.DEFAULT_VAULT_PBDK_SALT),r.push(o),(o=new Z).setType(Z.DataTypeID.TID_BINARY),o.setDataBinary(this.getObfuscationKey()),o.setName(n.DEFAULT_VAULT_OBFUSCATION_KEY),r.push(o),t.setValues(r),re(e)&&t.setChildNodes(e),t},oe.prototype.reset=function(){for(var e in this)ne(this[e])||(this[e]=null)};var ie=new oe,se=s.a,ae=se.utils,ue=ae.isNil,le=ae.isString,ce=ae.isFunction,de=se.logger,fe=S.a,pe=fe.utils,he=fe.session,_e=S.a.proto.com.symantec.oxygen.datastore.v2.messages,Ee=_e.ChallengeList,ge=_e.Challenge,me=A.Long,ye=function(e,t,r,n,o){for(var i in e=void 0===e?L:e,t=void 0===t?F:t,r=void 0===r?X:r,n=void 0===n?m:n,o=void 0===o?ie:o,this.appNode=e,this.vaultKeys=t,this.telemetryWrapper=r,this.cryptoParams=n,this.idscNode=o,this.workerFactory=ye.workerFactory,this)ce(this[i])&&(this[i]=this[i].bind(this))};ye.setWorkerFactory=function(e){this.workerFactory=e},ye.prototype.dataToBufferWithSerializedType=function(e,t){if(ue(e))return null;var r=null;switch(t){case n.SERIALIZE_DATA_TYPE.BINARY:return e;case n.SERIALIZE_DATA_TYPE.BOOL:return(r=new Uint8Array(1))[0]=!1===e?0:1,r;case n.SERIALIZE_DATA_TYPE.UINT32:return this.numberToUint8Buffer(e);case n.SERIALIZE_DATA_TYPE.STRING:return r=new Uint8Array(pe.stringUTF16LEToByteArray(e));default:throw de.error("dataToBufferWithSerializedType called with unsupported type: "+t),Error("dataToBufferWithSerializedType called with unsupported type "+t)}},ye.prototype.obfuscateData=function(e,t){if(ue(e)||ue(t))return null;e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t instanceof ArrayBuffer&&(t=new Uint8Array(t));for(var r=e.byteLength,n=t.byteLength,o=new Uint8Array(r),i=0;i<r;i+=1)o[i]=e[i]^t[i%n];return o},ye.prototype.numberToUint8Buffer=function(e){var t=new Uint8Array(4);return t[0]=255&e,t[1]=(65280&e)>>8,t[2]=(16711680&e)>>16,t[3]=(4278190080&e)>>24,t},ye.prototype.uint8BufferToNumber=function(e){if(ue(e))return null;if(!(e instanceof Uint8Array))throw Error("Buffer is not of type Uint8Array");if(4<e.byteLength)throw Error("Buffer does not contain a number.");var t=0;return t+=255&e[0],t+=e[1]<<8&65280,t+=e[2]<<16&16711680,t+=e[3]<<24&4278190080},ye.prototype._bytesToLongNumber=function(e,t){var r=new me(0,null,!0);if(ue(e))throw Error("Data cannot be null");if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),ue(t)&&(t=0),0===e.byteLength||e.byteLength<t+4)return r;var n=new me(e[t],null,!0),o=new me(e[t+1]<<8,null,!0),i=new me(e[t+2]<<16,null,!0);return e=new me(e[t+3]<<24,null,!0),r=(r=(r=(r=r.add(n)).add(o)).add(i)).add(e)},ye.prototype.calculateChecksum=function(e,t,r,n){if(ue(t))throw Error("Data cannot be null");ue(r)&&(r=0),ue(n)&&(n=t.byteLength-r);var o=new me(302325776,null,!0);if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e=new me(e,null,!0),0===n)return e.xor(o).toNumber();for(o=r;o<=r+n-4;o+=4){var i=this._bytesToLongNumber(t,o);e=e.xor(i)}if(o<r+n){for(i=[16,32,5,18],r=r+n-o,n=0;n<r;n+=1)i[n]=t[o],o+=1;e=e.xor(this._bytesToLongNumber(new Uint8Array(i),0))}return e.toNumber()},ye.prototype._generateVaultDigest=function(e,t){if(ue(e))throw Error("Key to HMAC cannot be null");if(ue(t))return null;((e=e.slice(n.DEFAULT_DERIVED_AES_KEY_SIZE,n.DEFAULT_DERIVED_AES_KEY_SIZE+n.DEFAULT_HMAC_SIZE))instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=pe.createStringBufferFromUint8Buffer(e)),(t instanceof ArrayBuffer||t instanceof Uint8Array)&&(t=pe.createStringBufferFromUint8Buffer(t));var r=T.hmac.create();return r.start(this.cryptoParams.getHmacSha(),e),r.update(t),pe.createUInt8BufferFromStringBuffer(r.digest().getBytes())},ye.prototype._decryptEncryptData=function(e,t,r,n,o,i,s){if(!1===le(t))throw Error("Algorithm cannot be null");if(ue(r))throw Error("Key cannot be null");if(ue(o))throw Error("Crypto data cannot be null");ue(s)&&(s=!0),ue(i)&&(i=!0),(n instanceof ArrayBuffer||n instanceof Uint8Array)&&(n=pe.createStringBufferFromUint8Buffer(n)),(r instanceof ArrayBuffer||r instanceof Uint8Array)&&(r=pe.createStringBufferFromUint8Buffer(r));var a=T.util.createBuffer(o);return(e=!0===e?T.cipher.createCipher(t,r):T.cipher.createDecipher(t,r)).start({iv:n}),e.update(a),!0===i?e.finish():e.finish(this._doNotPad),n=e.output.getBytes(),i=null,i=s?pe.createUInt8BufferFromStringBuffer(n,o.byteLength):pe.createUInt8BufferFromStringBuffer(n)},ye.prototype._doNotPad=function(){return!0},ye.prototype._encryptData=function(e,t,r,n,o,i){return this._decryptEncryptData(!0,e,t,r,n,o,i)},ye.prototype.createEnvelopeAndEncryptData=function(e,t,r,o,i,s){if(s=void 0===s||s,ue(e))throw Error("Encryption Key cannot be null");if(ue(t))throw Error("Data cannot be null");if(ue(r))throw Error("Serialized Type cannot be null");if(ue(o))throw Error("Path cannot be null");if(ue(i))throw Error("Name cannot be null");var a=this.dataToBufferWithSerializedType(t,r);t=e.slice(0,n.DEFAULT_DERIVED_AES_KEY_SIZE),o=new Uint8Array(pe.stringUTF16LEToByteArray(o));var u=new Uint8Array(pe.stringUTF16LEToByteArray(i));i=this.numberToUint8Buffer(a.byteLength);var l=this.calculateChecksum(n.STARTING_CHECKSUM,o,0,o.byteLength);return l=this.calculateChecksum(l,u,0,u.byteLength),(o=new Uint8Array(1))[0]=r,l=this.calculateChecksum(l,o,0,o.byteLength),l=this.calculateChecksum(l,i,0,i.byteLength),l=this.calculateChecksum(l,a,0,a.byteLength),l=this.numberToUint8Buffer(l),r=0,(u=new Uint8Array(a.byteLength+9)).set(l,r),r+=l.byteLength,u.set(o,r),r+=o.byteLength,u.set(i,r),r+=i.byteLength,u.set(a,r),a=pe.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_AES_INIT_VECTOR_SIZE)),t=this._encryptData("AES-CBC",t,a,u,s),r=0,(s=new Uint8Array(t.byteLength+a.byteLength)).set(a,r),r+=a.byteLength,s.set(t,r),e=this._generateVaultDigest(e,s),(t=new Uint8Array(s.byteLength+this.cryptoParams.getShaDigestSize())).set(e,0),t.set(s,e.byteLength),t},ye.prototype._deriveChallengePrivateKey=function(e,t,r){var n,i,s,a,u,l,c=this;return o.asyncExecutePromiseGeneratorProgram((function(o){return 1==o.nextAddress?(n=c.appNode.getChallengeIV(),i=c.appNode.getChallengeSalt(),s=pe.createStringBufferFromUint8Buffer(n),a=pe.createStringBufferFromUint8Buffer(i),ue(e)?(l=c.vaultKeys.getChallengeKey(),o.jumpTo(2)):o.yield(c.generateChallengeDecryptionKey(e,a),3)):(2!=o.nextAddress&&(l=o.yieldResult),ue(u=l)?o.return((de.error("generation of challenge decryption key failed"),null)):(r&&c.vaultKeys.setChallengeKey(u),o.return(c._decryptData("AES-CBC",u,s,t,!1,!1))))}))},ye.prototype.decryptEnvelopeData=function(e,t,r,o,i,s){if(ue(t))throw Error("Derived Key cannot be null");if(ue(r))throw Error("Path cannot be null");if(ue(o))throw Error("Name cannot be null");if(ue(i))throw Error("Expected Type cannot be null");var a=this._openEnvelopeData(e),u=a.digest;if(e=e.slice(this.cryptoParams.getShaDigestSize(),e.byteLength),t instanceof Uint8Array&&(t=t.buffer),!1===this._verifyVaultDigest(u,t,e))return de.error("Data has been corrupted at path "+r+" name:"+o),null;t instanceof ArrayBuffer&&(t=pe.createStringBufferFromUint8Buffer(t)),t=t.slice(0,n.DEFAULT_DERIVED_AES_KEY_SIZE),u=pe.createStringBufferFromUint8Buffer(a.iv),s=this._decryptData("AES-CBC",t,u,a.data,s,!1).buffer,a=this._bytesToLongNumber(s,0).toNumber(),e=new Uint8Array(pe.stringUTF16LEToByteArray(r)),t=new Uint8Array(pe.stringUTF16LEToByteArray(o)),u=this._bytesToLongNumber(s,5).toNumber();var l=new Uint8Array(s.slice(4,5));return i!==l[0]?(this.telemetryWrapper.sendIDSCryptoError("Type comparison failure,\n      Path: "+r+", Name: "+o+",\n      Expected type: "+i+", Actual type: "+l[0],this.telemetryWrapper.IDS_CRYPTO_ERROR_CONSTANTS.TYPE_COMPARISON_FAILURE),null):(i=this.calculateChecksum(n.STARTING_CHECKSUM,e,0,e.byteLength),i=this.calculateChecksum(i,t,0,t.byteLength),i=this.calculateChecksum(i,s,4,1),i=this.calculateChecksum(i,s,5,4),(i=this.calculateChecksum(i,s,9,u))!==a?(this.telemetryWrapper.sendIDSCryptoError("Checksum Comparison Failure, Path: "+r+", Name: "+o,this.telemetryWrapper.IDS_CRYPTO_ERROR_CONSTANTS.CHECKSUM_COMPARISON_FAILURE),null):(r=s.slice(9,s.byteLength),new Uint8Array(r)))},ye.prototype._openEnvelopeData=function(e){if(ue(e))throw Error("Data cannot be nil");if(!(e instanceof ArrayBuffer||e instanceof Uint8Array))throw Error("Envelope Data has to be an ArrayBuffer");var t=this.cryptoParams.getShaDigestSize();if(e.byteLength<=t+n.DEFAULT_AES_INIT_VECTOR_SIZE)throw Error("Data is too small.");return{digest:e.slice(0,t),iv:e.slice(t,t+n.DEFAULT_AES_INIT_VECTOR_SIZE),data:e.slice(t+n.DEFAULT_AES_INIT_VECTOR_SIZE,e.byteLength)}},ye.prototype._verifyVaultDigest=function(e,t,r){return t=this._generateVaultDigest(t,r),t=pe.createStringBufferFromUint8Buffer(t),r=null,(r=e instanceof ArrayBuffer||e instanceof Uint8Array?pe.createStringBufferFromUint8Buffer(e):e)===t||(this.telemetryWrapper.sendIDSCryptoError("Digest comparison failure",this.telemetryWrapper.IDS_CRYPTO_ERROR_CONSTANTS.DIGEST_COMPARISON_FAILURE),!1)},ye.prototype._decryptData=function(e,t,r,n,o,i){return this._decryptEncryptData(!1,e,t,r,n,o,i)},ye.prototype.generateDerivedKey=function(e,t){if(ue(e)||!s.a.utils.isFunction(t))throw Error("Invalid arguments to generateDerivedKey");if(!(Object.prototype.hasOwnProperty.call(e,"id")&&Object.prototype.hasOwnProperty.call(e,"byteArray")&&Object.prototype.hasOwnProperty.call(e,"salt")&&Object.prototype.hasOwnProperty.call(e,"iterationCount")&&Object.prototype.hasOwnProperty.call(e,"keyLength")&&Object.prototype.hasOwnProperty.call(e,"md")))throw Error("Invalid arguments to generateDerivedKey");var r=T.pkcs5.pbkdf2(e.byteArray,e.salt,e.iterationCount,e.keyLength,e.md);setTimeout((function(){t(r)}))},ye.prototype.getRandomChallengeIV=function(e){if(!(e instanceof ArrayBuffer))throw Error("Client data can only be an array buffer");return e.slice(0,n.DEFAULT_AES_INIT_VECTOR_SIZE)},ye.prototype.getRandomChallenge=function(e){if(!(e instanceof ArrayBuffer))throw Error("Client data can only be an array buffer");return e.slice(n.DEFAULT_AES_INIT_VECTOR_SIZE,e.byteLength)},ye.prototype.getDerivedKeyMessageDigestAlgorithm=function(){if(this.appNode.isEmpty()||ue(this.appNode.getCryptoAlgorithm()))return this.cryptoParams.getPBDKF2MD();try{var e=JSON.parse(this.appNode.getCryptoAlgorithm())}catch(t){e=JSON.parse(this.configureCryptoAlgorithm())}if(e.keyGeneration.algorithm===n.PBKDF2)return e.keyGeneration.md;throw Error("keyGeneration algorithm has changed")},ye.prototype.isNode11=function(){return n.DEFAULT_APPID_NODE===n.APPID_11},ye.prototype.isNode32=function(){return n.DEFAULT_APPID_NODE===n.APPID_32},ye.prototype.configureCryptoAlgorithm=function(){var e={keyGeneration:{algorithm:n.PBKDF2,md:this.cryptoParams.getPBDKF2MD()}};return JSON.stringify(e)},ye.prototype.generateVaultDecryptionKey=function(e,t){var r=this;return o.asyncExecutePromiseGeneratorProgram((function(o){return o.return(new Promise((function(o,i){if(ue(e))o(null);else{(t instanceof ArrayBuffer||t instanceof Uint8Array)&&(t=pe.createStringBufferFromUint8Buffer(t));var s=pe.stringUTF16LEToByteArray(e),a={};a.id=n.GET_DERIVED_KEY,a.byteArray=s,a.salt=t,a.iterationCount=n.DEFAULT_VAULT_SCHEMA_ITERATION_COUNT,a.keyLength=n.DEFAULT_DERIVED_AES_KEY_SIZE+n.DEFAULT_HMAC_SIZE,a.md=r.getDerivedKeyMessageDigestAlgorithm();try{r.generateDerivedKey(a,(function(e){o(e)}))}catch(e){i(e)}}})))}))},ye.prototype.generateChallengeDecryptionKey=function(e,t){var r,i,s,a,u=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(ue(e))return o.return(u.vaultKeys.isSeamlessVaultUnlockEnabled()?u.vaultKeys.getChallengeKey():null);if(r=he.getNAGUID(),ue(r))throw Error("Norton account GUID cannot be null");return i=r.toLowerCase()+"lk;jasdf57D,SF89"+e+"9834Jfd.dfk",s=pe.stringUTF16LEToByteArray(i),a={},o.return((a.id=n.GET_DERIVED_KEY,a.byteArray=s,a.salt=t,a.iterationCount=n.DEFAULT_CHALLENGE_ITERATION_COUNT,a.keyLength=n.DEFAULT_DERIVED_AES_KEY_SIZE,a.md=u.getDerivedKeyMessageDigestAlgorithm(),new Promise((function(e){u.generateDerivedKey(a,(function(t){return e(t)}))}))))}))},ye.prototype.handleChallenge=function(e,t,r){r=void 0===r||r;var n,i,s,a,u,l,c,d,f,p,h,_,E=this;return o.asyncExecutePromiseGeneratorProgram((function(o){return 1==o.nextAddress?(n=new Ee,i=t.getChallenges(),ue(i)||1>i.length?o.return((de.error("challenges is empty"),null)):(s=i[0],a=s.getClientData().toArrayBuffer(),u=s.getPrivateKey().toArrayBuffer(),l=pe.createStringBufferFromUint8Buffer(E.getRandomChallengeIV(a)),c=E.getRandomChallenge(a),ue(E.vaultKeys.getChallengePrivateKey())?o.yield(E._deriveChallengePrivateKey(e,u,r),3):(f=E.vaultKeys.getChallengePrivateKey(),o.jumpTo(2)))):(2!=o.nextAddress&&(f=o.yieldResult),ue(d=f)?o.return((de.error("generation of challenge decryption key failed"),null)):(p=pe.createStringBufferFromUint8Buffer(d),E.vaultKeys.setChallengePrivateKey(d),h=E._decryptData("AES-CBC",p,l,c,!1,!1),_=new ge,o.return((_.setAppId(s.getAppId()),ue(s.getEntityId())&&de.error("handleChallenge :: entityID is nil"),_.setEntityId(s.getEntityId()),_.setSessionId(s.getSessionId()),_.setDecryptedChallenge(h),n.setChallenges(_),n))))}))},ye.prototype.createChallenge=function(e,t){t=void 0===t?n.DEFAULT_APPID_NODE:t;var r,i,s,a,u,l,c,d,f,p,h,_,E,g,m=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(ue(e))throw Error("Vault password cannot be null");if(r=he.getNAGUID(),ue(r))throw Error("NAGUID is not available");if(i=pe.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_DERIVED_AES_KEY_SIZE)),s=pe.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_CHALLENGE_SALT_SIZE)),a=pe.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_AES_INIT_VECTOR_SIZE)),u=m.calculateChecksum(0,s),u=m.numberToUint8Buffer(u),(l=new Uint8Array(s.byteLength+u.byteLength)).set(s,0),l.set(u,s.byteLength),0!==m.calculateChecksum(0,l))throw m.telemetryWrapper.sendIDSCryptoError("Unable to calculate checksum",m.telemetryWrapper.IDS_CRYPTO_ERROR_CONSTANTS.UNABLE_TO_CALCULATE_CHECKSUM),de.error("Checksum was not calculated correctly for Salt"),Error("Checksum was not calculated correctly for Salt");if(c=m.calculateChecksum(0,a),c=m.numberToUint8Buffer(c),(d=new Uint8Array(a.byteLength+c.byteLength)).set(a,0),d.set(c,a.byteLength),0!==m.calculateChecksum(0,d))throw m.telemetryWrapper.sendIDSCryptoError("Unable to calculate checksum",m.telemetryWrapper.IDS_CRYPTO_ERROR_CONSTANTS.UNABLE_TO_CALCULATE_CHECKSUM),de.error("Checksum was not calculated correctly for IV"),Error("Checksum was not calculated correctly for IV");return f=parseInt(t.substring(1)),p=pe.createStringBufferFromUint8Buffer(s),h=pe.createStringBufferFromUint8Buffer(a),o.yield(m.generateChallengeDecryptionKey(e,p),2)}return _=o.yieldResult,ue(_)?o.return(null):(m.vaultKeys.setChallengeKey(_),E=m._decryptData("AES-CBC",_,h,i,!1,!1),g=new ge,o.return((ue(he.getUserID())&&de.error("createChallenge :: entityID is nil"),g.setEntityId(""+he.getUserID()),g.setAppId(f),g.setSessionId((new Date).getTime()),g.setPrivateKey(i),g.setSalt(l),g.setPublicKey(E),{challenge:g,crcSalt:l,crcIV:d})))}))},ye.prototype.getStringHash=function(e){var t=T.md.sha256.create();return t.update(e),t.digest().toHex()},ye.prototype.setWorkerFactory=function(e){this.workerFactory=e},ye.prototype.compareWithEncryptionKey=function(e){var t,r,i,s,a,u,l,c=this;return o.asyncExecutePromiseGeneratorProgram((function(o){return 1==o.nextAddress?(t=!1,le(e)?(r=c.idscNode.getEncryptionKey(),i=c.idscNode.getPBDKSalt(),s=pe.createStringBufferFromUint8Buffer(i),a=n.DEFAULT_IDSC_PATH_CRC+n.DEFAULT_APPID_IDSC_NODE,o.yield(c.generateVaultDecryptionKey(e,s),2)):o.return(t)):(u=o.yieldResult,ue(u)?o.return(t):(l=c.decryptEnvelopeData(r,u,a,n.DEFAULT_VAULT_ENCRYPTION_KEY,n.SERIALIZE_DATA_TYPE.BINARY,!1),ue(l)?o.return(t):o.return((pe.createStringBufferFromUint8Buffer(l)===pe.createStringBufferFromUint8Buffer(c.vaultKeys.getEncryptionKey())&&(t=!0),t))))}))},o.global.Object.defineProperties(ye.prototype,{workerFactory:{configurable:!0,enumerable:!0,get:function(){return null==this._workerFactory?ye.workerFactory:this._workerFactory},set:function(e){this._workerFactory=e}}});var Se=new ye(L,F,X,m,ie),Te=A.Long,Ae=S.a.utils,be=S.a.proto.com.symantec.oxygen.datastore.v2.messages,Oe=be.Node,Ie=be.Value,ve=Ie.DataTypeID,Ne=s.a,Re=Ne.utils,Ce=Re.isNil,De=Re.isntNil,we=Re.isString,Le=Ne.logger,Pe=function(){if(this.constructor===Pe)throw Error("Abstract classes can't be instantiated.")};Pe.prototype.parseNode=function(e){for(var t in e=e.values)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t],o=void 0,i=this.schemaForKey(r.name);if(De(i)){var s=i.setter;if(i.serializedType===r.type){switch(r.type){case ve.TID_STRING:o=r.data_string;break;case ve.TID_UINT64:o=r.data_uint64;break;case ve.TID_BINARY:o=r.data_binary.toArrayBuffer();break;default:Le.error("Unsupported data type: "+r.type)}s.apply(this,[o,n.ITEM_INTERNAL_CONTEXT])}}else Le.error("Key Name:"+r.name+" - Schema not available.")}},Pe.prototype.getPath=function(){return this.path},Pe.prototype.getNodePath=function(){throw Error("Super class should not be called directly for this method")},Pe.prototype.updateFromDictionary=function(e){if(Ce(e))throw Error("Item dict cannot be null.");if(!0===this.encrypted)return!1;var t,r=!1;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=null;try{n=this.propertyToSchemaKey(t)}catch(e){Le.error("Error: "+e+"\nKey does not have a matching Schema:"+t)}var o=this.schemaForKey(n);if(De(o)){n=e[t];var i=o.setter;n!==o.getter.apply(this)&&(r=!0,i.apply(this,[n]))}}return r&&this.setLastUpdate((new Date).getTime()/1e3),r},Pe.prototype.initFromDictionary=function(e){if(Ce(e))throw Error("Item dict cannot be null.");for(var t in Ce(e.path)&&(e.path="{"+s.a.utils.createNewGuid()+"}"),Ce(e.lastUpdate)&&(e.lastUpdate=(new Date).getTime()/1e3),this.encrypted=!1,e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=null;try{r=this.propertyToSchemaKey(t)}catch(e){Le.error("Error: "+e+"\nKey does not have a matching Schema:"+t)}r=this.schemaForKey(r),De(r)&&r.setter.apply(this,[e[t]])}},Pe.prototype.propertyToSchemaKey=function(e){if(!1===s.a.utils.isString(e))throw Error("Input property cannot be null");if(e=this.propertyToSchemaKeyMap[e],Ce(e))throw Error("Property does not have a mapping.");return e},Pe.prototype.schemaForKey=function(e){throw Error("Super class should not be called directly for this method")},Pe.prototype.isValidSchemaKey=function(e){return we(e)&&this.keys.includes(e)},Pe.prototype.serializeNode=function(e,t){if(e=void 0!==e&&e,void 0!==t&&!t){for(var r in this.encrypted&&this.decrypt(),e={},this.propertyToSchemaKeyMap)Object.prototype.hasOwnProperty.call(this.propertyToSchemaKeyMap,r)&&(t=this.schemaForKey(this.propertyToSchemaKeyMap[r]),De(t)&&(e[r]=t.getter.apply(this)));return JSON.stringify(e)}this.encrypted||this.encrypt(),t=(r=new Oe).getValues(),r.setPath(this.getNodePath());for(var o=this.keys,i=0;i<o.length;i+=1){var s=o[i],a=this.schemaForKey(s),u=a.getter.apply(this,[n.ITEM_INTERNAL_CONTEXT]);if(De(u)){var l=new Ie;switch(l.setType(a.serializedType),l.setName(s),a.serializedType){case ve.TID_BINARY:l.setDataBinary(u);break;case ve.TID_STRING:l.setDataString(u);break;case ve.TID_UINT64:l.setDataUint64(u);break;case ve.TID_UINT32:l.setDataUint32(u)}t.push(l)}}return r.setValues(t),e&&r.setDeleted(!0),r},Pe.prototype.setPath=function(e){this.path=e},Pe.prototype.getSecure=function(){return this.secure},Pe.prototype.setSecure=function(e){this.secure=e},Pe.prototype.getLastUpdate=function(){return Ce(this.lastUpdate)&&(this.lastUpdate=(new Date).getTime()/1e3),this.lastUpdate},Pe.prototype.setLastUpdate=function(e){this.lastUpdate=e},Pe.prototype.getFavorite=function(){return this.favorite},Pe.prototype.setFavorite=function(e){this.favorite=e},Pe.prototype.clone=function(){var e=this.serializeNode(!1,!1);e=JSON.parse(e);var t=new this.constructor;return t.initFromDictionary(e),t},Pe.prototype.encrypt=function(){if(!0!==this.encrypted){for(var e=this.keys,t=0;t<e.length;t+=1){var r=e[t],o=this.schemaForKey(r),i=o.deserializedType,s=o.serializedType,a=o.encrypted,u=o.obfuscated,l=o.setter,c=o.getter.apply(this,[n.ITEM_INTERNAL_CONTEXT]);s===i&&!1===a&&!1===u||(o=c,De(c)&&(c=this.dataTypeIDToVaultSerializeType(i),!1===u&&!1===a&&(s===ve.TID_BINARY&&i===ve.TID_BOOL&&(o=this._boolToBinary(o)),s===ve.TID_BINARY&&i===ve.TID_STRING)&&(o=Ae.stringUTF16LEToByteArray(o),o=new Uint8Array(o)),!0===u&&(o=Se.dataToBufferWithSerializedType(o,c),o=Se.obfuscateData(o,F.getObfuscationKey()),c=n.SERIALIZE_DATA_TYPE.BINARY),!0===a&&(a=n.DEFAULT_IDSC_PATH_CRC+this.getNodePath(),o=Se.createEnvelopeAndEncryptData(F.getEncryptionKey(),o,c,a,r,!0)),l.apply(this,[o,n.ITEM_INTERNAL_CONTEXT])))}this.encrypted=!0}},Pe.prototype.decrypt=function(){if(!1!==this.encrypted){for(var e=this.keys,t=0;t<e.length;t+=1){var r=e[t],o=this.schemaForKey(r),i=o.deserializedType,s=o.serializedType,a=o.encrypted,u=o.obfuscated,l=o.setter,c=o.getter.apply(this,[n.ITEM_INTERNAL_CONTEXT]);if((s!==i||!1!==a||!1!==u)&&(o=c,!Ce(c))){c=this.dataTypeIDToVaultSerializeType(i),!0===u&&(c=n.SERIALIZE_DATA_TYPE.BINARY);var d=n.DEFAULT_IDSC_PATH_CRC+this.getNodePath();!0===a&&(o=Se.decryptEnvelopeData(o,F.getEncryptionKey(),d,r,c)),Ce(o)?(Le.error("Unable to decrypt value at path:"+d+" name:"+r),l.apply(this,[null,n.ITEM_INTERNAL_CONTEXT])):(!0===u&&(o=Se.obfuscateData(o,F.getObfuscationKey())),Ce(o)?(X.sendIDSCryptoError("Unable to obfuscate value at path: "+d+" name: "+r,X.IDS_CRYPTO_ERROR_CONSTANTS.UNABLE_TO_OBFUSCATE_ITEM),l.apply(this,[null,n.ITEM_INTERNAL_CONTEXT])):s!==ve.TID_BINARY||i!==ve.TID_BOOL?s!==ve.TID_BINARY||i!==ve.TID_STRING?s===ve.TID_BINARY&&i===ve.TID_BINARY&&l.apply(this,[o,n.ITEM_INTERNAL_CONTEXT]):(i=0===o.byteLength?"":Ae.arrayBufferToStringUTF16LE(o),l.apply(this,[i,n.ITEM_INTERNAL_CONTEXT])):(i=this._binaryToBool(o),l.apply(this,[i,n.ITEM_INTERNAL_CONTEXT])))}}this.encrypted=!1}},Pe.prototype._binaryToBool=function(e){var t=e;return t instanceof ArrayBuffer&&(t=new Uint8Array(e)),0!==t.byteLength&&0!==t[0]},Pe.prototype._boolToBinary=function(e){var t=new Uint8Array(1);return t[0]=!1===e?0:1,t},Pe.prototype.dataTypeIDToVaultSerializeType=function(e){if(Ce(e))throw Error("DeserializedType cannot be null");switch(e){case ve.TID_BOOL:e=n.SERIALIZE_DATA_TYPE.BOOL;break;case ve.TID_STRING:e=n.SERIALIZE_DATA_TYPE.STRING;break;case ve.TID_UINT32:e=n.SERIALIZE_DATA_TYPE.UINT32;break;case ve.TID_UINT64:case ve.TID_TIMESTAMP:e=n.SERIALIZE_DATA_TYPE.LONG;break;case ve.TID_BINARY:e=n.SERIALIZE_DATA_TYPE.BINARY;break;default:throw Error("Unknown deserializedType passed: "+e)}return e},Pe.prototype.verifyJSObjectWithDeserializedType=function(e,t){var r=!1;if(Ce(e))throw Error("DeserializedType cannot be null");if(Ce(t))throw Error("JSObject cannot be null");switch(e){case ve.TID_BOOL:r=s.a.utils.isBoolean(t);break;case ve.TID_STRING:r=s.a.utils.isString(t);break;case ve.TID_UINT32:r="number"==typeof t;break;case ve.TID_UINT64:case ve.TID_TIMESTAMP:r=t instanceof Te||"number"==typeof t;break;case ve.TID_BINARY:r=t instanceof ArrayBuffer||t instanceof Uint8Array}return r},Pe.prototype.setNodeModified=function(e){this.nodeModified=e},Pe.prototype.getNodeModified=function(){return this.nodeModified},Pe.prototype.getDeobfuscatedStringProperty=function(e,t){return t===n.ITEM_INTERNAL_CONTEXT?e:Ce(e)?null:(e=Se.obfuscateData(e,F.getObfuscationKey()),Ce(e)||0===e.byteLength?null:Ae.arrayBufferToStringUTF16LE(e))},Pe.prototype.setClearOrObfuscatedStringProperty=function(e,t,r){Ce(t)?this[e]=null:r!==n.ITEM_INTERNAL_CONTEXT?(t=Ae.stringUTF16LEToByteArray(t),t=new Uint8Array(t),this[e]=Se.obfuscateData(t,F.getObfuscationKey())):this[e]=t};var Me=function(){this._listeners=[]};Me.prototype.addListener=function(e){var t=this;return this._listeners.includes(e)||(this._listeners=[].concat(o.arrayFromIterable(this._listeners),[e])),function(){t.removeListener(e)}},Me.prototype.removeListener=function(e){this._listeners=this._listeners.filter((function(t){return t!==e}))},Me.prototype.removeAllListeners=function(){this._listeners=[]},Me.prototype.trigger=function(e){this._listeners.forEach((function(t){t(e)}))};var Ue=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,je=s.a.logger,ke=s.a.utils.isNil,xe=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,n.DEFAULT_FAVORITE,n.BANK_ACCOUNTS.OWNERNAME,n.BANK_ACCOUNTS.ROUTINGNUMBER,n.BANK_ACCOUNTS.ACCOUNTNUMBER,n.BANK_ACCOUNTS.ACCOUNTNAME,n.BANK_ACCOUNTS.SECURE,n.BANK_ACCOUNTS.BANKNAME,n.BANK_ACCOUNTS.SWIFT_CODE,n.BANK_ACCOUNTS.IBAN],Fe={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,accountName:n.BANK_ACCOUNTS.ACCOUNTNAME,secure:n.BANK_ACCOUNTS.SECURE,ownerName:n.BANK_ACCOUNTS.OWNERNAME,routingNumber:n.BANK_ACCOUNTS.ROUTINGNUMBER,accountNumber:n.BANK_ACCOUNTS.ACCOUNTNUMBER,bankName:n.BANK_ACCOUNTS.BANKNAME,favorite:n.DEFAULT_FAVORITE,swiftCode:n.BANK_ACCOUNTS.SWIFT_CODE,iban:n.BANK_ACCOUNTS.IBAN},Be=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=Fe,e.keys=xe,e};o.inherits(Be,Pe),Be.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:Ue.TID_STRING,deserializedType:Ue.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:Ue.TID_UINT64,deserializedType:Ue.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.DEFAULT_FAVORITE:return{encrypted:!1,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_BOOL,setter:this.setFavorite,getter:this.getFavorite};case n.BANK_ACCOUNTS.ACCOUNTNUMBER:return{encrypted:!0,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_BINARY,setter:this.setAccountNumber,getter:this.getAccountNumber};case n.BANK_ACCOUNTS.ROUTINGNUMBER:return{encrypted:!0,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_BINARY,setter:this.setRoutingNumber,getter:this.getRoutingNumber};case n.BANK_ACCOUNTS.OWNERNAME:return{encrypted:!0,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_BINARY,setter:this.setOwnerName,getter:this.getOwnerName};case n.BANK_ACCOUNTS.ACCOUNTNAME:return{encrypted:!0,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_STRING,setter:this.setAccountName,getter:this.getAccountName};case n.BANK_ACCOUNTS.BANKNAME:return{encrypted:!0,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_STRING,setter:this.setBankName,getter:this.getBankName};case n.BANK_ACCOUNTS.SECURE:return{encrypted:!0,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_BOOL,setter:this.setSecure,getter:this.getSecure};case n.BANK_ACCOUNTS.SWIFT_CODE:return{encrypted:!0,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_BINARY,setter:this.setSwiftCode,getter:this.getSwiftCode};case n.BANK_ACCOUNTS.IBAN:return{encrypted:!0,obfuscated:!1,serializedType:Ue.TID_BINARY,deserializedType:Ue.TID_BINARY,setter:this.setIBAN,getter:this.getIBAN};default:je.error("Invalid data value: "+e)}return null},Be.prototype.setRoutingNumber=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"routingNumber",e,t)},Be.prototype.getRoutingNumber=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.routingNumber,e)},Be.prototype.setAccountNumber=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"accountNumber",e,t)},Be.prototype.getAccountNumber=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.accountNumber,e)},Be.prototype.setSwiftCode=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"swiftCode",e,t)},Be.prototype.getSwiftCode=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.swiftCode,e)},Be.prototype.setIBAN=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"iban",e,t)},Be.prototype.getIBAN=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.iban,e)},Be.prototype.setOwnerName=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"ownerName",e,t)},Be.prototype.getOwnerName=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.ownerName,e)},Be.prototype.setBankName=function(e){this.bankName=e},Be.prototype.getBankName=function(){return this.bankName},Be.prototype.setAccountName=function(e){this.accountName=e},Be.prototype.getAccountName=function(){return this.accountName},Be.prototype.getNodePath=function(){return n.DEFAULT_BANK_ACCOUNT_NODE+"/"+this.getPath()},Be.prototype.getLastFourOnCard=function(){var e=this.getAccountNumber();if(ke(e))return"";var t=e.length;return 4<t?e.substring(t-4,t):e},Be.prototype.setLastUpdate=function(e){this.lastUpdate=e};var Ge=s.a,Ve=Ge.logger,He=Ge.utils,We=He.isNil,Ye=He.isEmptyObject,Ke=He.isString,ze=n.TAG,qe=function(){return this.name="BankAccountManager",this.items={},this.tagType=ze.BANK_ACCOUNT,this};o.inherits(qe,h),qe.prototype.search=function(e,t){var r,n,i,s,a,u,l,c,d=this;return o.asyncExecutePromiseGeneratorProgram((function(f){if(r=[],Ye(d.items))return f.return((Ve.info("Empty vault"),r));if(!Ke(e))throw Error("Search key cannot be null");for(n=o.makeIterator(Object.keys(d.items)),i=n.next();!i.done;i=n.next())s=i.value,a=d.items[s],!0===t&&(u=a.getFavorite(),We(u)||!1===u)||(l=a.getAccountName(),l=Ke(l)?l:"",c=a.getBankName(),c=Ke(c)?c:"",e=e.toLowerCase(),(-1<l.toLowerCase().indexOf(e)||-1<c.toLowerCase().indexOf(e))&&r.push(s));return f.return(r)}))};var $e=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,Xe=s.a.logger,Je=s.a.utils.isNil,Ze=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,n.DEFAULT_FAVORITE,n.CREDIT_CARDS.CARD_TYPE,n.CREDIT_CARDS.CARD_NUMBER,n.CREDIT_CARDS.NAME_ON_CARD,n.CREDIT_CARDS.EXPIRATION_MONTH,n.CREDIT_CARDS.EXPIRATION_YEAR,n.CREDIT_CARDS.START_DAY,n.CREDIT_CARDS.START_MONTH,n.CREDIT_CARDS.START_YEAR,n.CREDIT_CARDS.ISSUE_NUMBER,n.CREDIT_CARDS.SECURE,n.CREDIT_CARDS.CARD_NAME,n.CREDIT_CARDS.COUNTRY_REGION,n.CREDIT_CARDS.IDENTITY_CARD,n.CREDIT_CARDS.CARD_COMMENTS,n.CREDIT_CARDS.BANK_NAME,n.CREDIT_CARDS.CARD_PIN,n.CREDIT_CARDS.CREATED_AT,n.CREDIT_CARDS.LAST_USED_AT],Qe={},et=(Qe[n.APPID_32]=[].concat(o.arrayFromIterable(Ze),[n.CREDIT_CARDS.CVC]),Qe.default=[].concat(o.arrayFromIterable(Ze),[n.CREDIT_CARDS.CVC_V1]),Qe),tt={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,countryRegion:n.CREDIT_CARDS.COUNTRY_REGION,cardName:n.CREDIT_CARDS.CARD_NAME,secure:n.CREDIT_CARDS.SECURE,cardType:n.CREDIT_CARDS.CARD_TYPE,identityCard:n.CREDIT_CARDS.IDENTITY_CARD,cardNumber:n.CREDIT_CARDS.CARD_NUMBER,nameOnCard:n.CREDIT_CARDS.NAME_ON_CARD,cvc:n.CREDIT_CARDS.CVC,expMonth:n.CREDIT_CARDS.EXPIRATION_MONTH,expYear:n.CREDIT_CARDS.EXPIRATION_YEAR,startDay:n.CREDIT_CARDS.START_DAY,startMonth:n.CREDIT_CARDS.START_MONTH,startYear:n.CREDIT_CARDS.START_YEAR,issueNumber:n.CREDIT_CARDS.ISSUE_NUMBER,cardComments:n.CREDIT_CARDS.CARD_COMMENTS,favorite:n.DEFAULT_FAVORITE,bankName:n.CREDIT_CARDS.BANK_NAME,cardPin:n.CREDIT_CARDS.CARD_PIN,createdAt:n.CREDIT_CARDS.CREATED_AT,lastUsedAt:n.CREDIT_CARDS.LAST_USED_AT},rt=Object.assign({},tt,{cvc:n.CREDIT_CARDS.CVC_V1}),nt={},ot=(nt[n.APPID_32]=tt,nt.default=rt,nt),it=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=ot[n.DEFAULT_APPID_NODE]?ot[n.DEFAULT_APPID_NODE]:ot.default,e.keys=et[n.DEFAULT_APPID_NODE]?et[n.DEFAULT_APPID_NODE]:et.default,e};o.inherits(it,Pe),it.prototype.schemaForKey=function(e){if(!this.isValidSchemaKey(e))return null;switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:$e.TID_STRING,deserializedType:$e.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:$e.TID_UINT64,deserializedType:$e.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.DEFAULT_FAVORITE:return{encrypted:!1,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BOOL,setter:this.setFavorite,getter:this.getFavorite};case n.CREDIT_CARDS.CARD_TYPE:return{encrypted:!0,obfuscated:!0,serializedType:$e.TID_BINARY,deserializedType:$e.TID_STRING,setter:this.setCardType,getter:this.getCardType};case n.CREDIT_CARDS.CARD_NUMBER:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setCardNumber,getter:this.getCardNumber};case n.CREDIT_CARDS.NAME_ON_CARD:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setNameOnCard,getter:this.getNameOnCard};case n.CREDIT_CARDS.CVC:case n.CREDIT_CARDS.CVC_V1:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setCVC,getter:this.getCVC};case n.CREDIT_CARDS.EXPIRATION_MONTH:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setExpMonth,getter:this.getExpMonth};case n.CREDIT_CARDS.EXPIRATION_YEAR:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setExpYear,getter:this.getExpYear};case n.CREDIT_CARDS.START_DAY:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setStartDay,getter:this.getStartDay};case n.CREDIT_CARDS.START_MONTH:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setStartMonth,getter:this.getStartMonth};case n.CREDIT_CARDS.START_YEAR:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setStartYear,getter:this.getStartYear};case n.CREDIT_CARDS.ISSUE_NUMBER:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setIssueNumber,getter:this.getIssueNumber};case n.CREDIT_CARDS.SECURE:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BOOL,setter:this.setSecure,getter:this.getSecure};case n.CREDIT_CARDS.CARD_NAME:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_STRING,setter:this.setCardName,getter:this.getCardName};case n.CREDIT_CARDS.COUNTRY_REGION:return{encrypted:!1,obfuscated:!1,serializedType:$e.TID_STRING,deserializedType:$e.TID_STRING,setter:this.setCountryRegion,getter:this.getCountryRegion};case n.CREDIT_CARDS.CARD_COMMENTS:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setCardComments,getter:this.getCardComments};case n.CREDIT_CARDS.IDENTITY_CARD:return{encrypted:!1,obfuscated:!1,serializedType:$e.TID_STRING,deserializedType:$e.TID_STRING,setter:this.setIdentityCard,getter:this.getIdentityCard};case n.CREDIT_CARDS.BANK_NAME:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_STRING,setter:this.setBankName,getter:this.getBankName};case n.CREDIT_CARDS.CARD_PIN:return{encrypted:!0,obfuscated:!1,serializedType:$e.TID_BINARY,deserializedType:$e.TID_BINARY,setter:this.setCardPin,getter:this.getCardPin};case n.CREDIT_CARDS.CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:$e.TID_UINT64,deserializedType:$e.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};case n.CREDIT_CARDS.LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:$e.TID_UINT64,deserializedType:$e.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};default:Xe.error("Invalid data value: "+e)}return null},it.prototype.getLastFourOnCard=function(){var e=this.getCardNumber();if(Je(e))return"";var t=e.length;return 4<t?e.substring(t-4,t):e},it.prototype.setIdentityCard=function(e){this.identityCard=e},it.prototype.getIdentityCard=function(){return this.identityCard},it.prototype.setBankName=function(e){this.bankName=e},it.prototype.getBankName=function(){return this.bankName},it.prototype.setCreatedAt=function(e){this.createdAt=e},it.prototype.getCreatedAt=function(){return this.createdAt},it.prototype.setLastUsedAt=function(e){this.lastUsedAt=e},it.prototype.getLastUsedAt=function(){return this.lastUsedAt},it.prototype.setCardType=function(e){this.cardType=e},it.prototype.getCardType=function(){return this.cardType},it.prototype.setCardPin=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"cardPin",e,t)},it.prototype.getCardPin=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.cardPin,e)},it.prototype.setCardNumber=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"cardNumber",e,t)},it.prototype.getCardNumber=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.cardNumber,e)},it.prototype.setCVC=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"cvc",e,t)},it.prototype.getCVC=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.cvc,e)},it.prototype.setNameOnCard=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"nameOnCard",e,t)},it.prototype.getNameOnCard=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.nameOnCard,e)},it.prototype.setExpMonth=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"expMonth",e,t)},it.prototype.getExpMonth=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.expMonth,e)},it.prototype.setExpYear=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"expYear",e,t)},it.prototype.getExpYear=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.expYear,e)},it.prototype.setStartDay=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"startDay",e,t)},it.prototype.getStartDay=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.startDay,e)},it.prototype.setStartMonth=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"startMonth",e,t)},it.prototype.getStartMonth=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.startMonth,e)},it.prototype.setStartYear=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"startYear",e,t)},it.prototype.getStartYear=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.startYear,e)},it.prototype.setIssueNumber=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"issueNumber",e,t)},it.prototype.getIssueNumber=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.issueNumber,e)},it.prototype.setCardName=function(e){this.cardName=e},it.prototype.getCardName=function(){return this.cardName},it.prototype.setCountryRegion=function(e){this.countryRegion=e},it.prototype.getCountryRegion=function(){return this.countryRegion},it.prototype.setCardComments=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"cardComments",e,t)},it.prototype.getCardComments=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.cardComments,e)},it.prototype.getNodePath=function(){return n.DEFAULT_CREDIT_CARD_NODE+"/"+this.getPath()};var st=s.a,at=st.logger,ut=st.utils,lt=ut.isNil,ct=ut.isEmptyObject,dt=ut.isString,ft=n.TAG,pt=function(){return this.name="CreditCardManager",this.items={},this.tagType=ft.CREDIT_CARD,this};o.inherits(pt,h),pt.prototype.search=function(e,t){var r,n,i,s,a,u,l,c,d,f,p=this;return o.asyncExecutePromiseGeneratorProgram((function(h){if(r=[],ct(p.items))return h.return((at.info("Empty vault"),r));if(!dt(e))throw Error("Search key cannot be null");for(n=o.makeIterator(Object.keys(p.items)),i=n.next();!i.done;i=n.next())s=i.value,a=p.items[s],!0===t&&(u=a.getFavorite(),lt(u)||!1===u)||(l=a.getCardType(),l=dt(l)?l:"",c=a.getNameOnCard(),c=dt(c)?c:"",d=a.getCardName(),d=dt(d)?d:"",f=a.getLastFourOnCard(),f=dt(f)?f:"",e=e.toLowerCase(),(-1<l.toLowerCase().indexOf(e)||-1<c.toLowerCase().indexOf(e)||-1<d.toLowerCase().indexOf(e))&&r.push(s));return h.return(r)}))};var ht=s.a.utils,_t=ht.isNil,Et=ht.isntNil,gt=function(){var e=Pe.call(this)||this;return e.identityItem=new Wt,e.addressItem=new Zt,e};o.inherits(gt,Pe),gt.prototype.createItemFromKey=function(e){var t=Bn.getItemManager(Bn.IDENTITY_MANAGER),r=Bn.getItemManager(Bn.ADDRESS_MANAGER);this.identityItem=t.getItem(e),e=this.identityItem.getAddressGuid(),Et(e)&&(this.addressItem=r.getItem(e)),_t(this.addressItem)&&(this.addressItem=new Zt)},gt.prototype.initFromDictionary=function(e){if(_t(e))throw Error("Item dict cannot be null.");var t=e.identityNode||{};if(e=e.addressNode||{},_t(t.addressGuid)||_t(e.path)||t.addressGuid!==e.path){var r="{"+ht.createNewGuid()+"}";t.addressGuid=r,e.path=r}this.identityItem.initFromDictionary(t),this.addressItem.initFromDictionary(e)},gt.prototype.updateFromDictionary=function(e){var t=e.identityNode;if(e=e.addressNode,_t(t.addressGuid)||_t(e.path)||t.addressGuid!==e.path)throw Error("Invalid arguments to Contact.updateFromDictionary");return t=this.identityItem.updateFromDictionary(t),e=this.addressItem.updateFromDictionary(e),t||e},gt.prototype.schemaForKey=function(e){return this.identityItem.schemaForKey(e)||this.addressItem.schemaForKey(e)},gt.prototype.serializeNode=function(){var e=this.addressItem.serializeNode(!1,!1),t=JSON.parse(e);e=this.identityItem.serializeNode(!1,!1),e=JSON.parse(e);var r={};return r.addressNode=t,r.identityNode=e,JSON.stringify(r)};var mt=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,yt=s.a.logger,St=s.a.utils.isNil,Tt=S.a.utils,At=n.ITEM_INTERNAL_CONTEXT,bt=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,n.DEFAULT_FAVORITE,n.DEFAULT_USERNAME,n.DEFAULT_PASSWORD,n.DEFAULT_LOGIN_NOTES,n.DEFAULT_LOGIN_URL,n.DEFAULT_SECURE,n.DEFAULT_FAV_ICON_URL,n.DEFAULT_SITE_NAME,n.DEFAULT_SIGN_ON_DESTINATION,n.DEFAULT_CRED_0,n.DEFAULT_CRED_1,n.DEFAULT_CRED_2,n.DEFAULT_FOLDER,n.DEFAULT_AUTO_FILL,n.DEFAULT_AUTO_SUBMIT,n.DEFAULT_PROMINENT_COLOR,n.DEFAULT_DOMAIN,n.DEFAULT_LEGACY_EMAIL,n.DEFAULT_FORM_HOST,n.DEFAULT_PAGE_HOST,n.DEFAULT_PROTOCOL,n.DEFAULT_CREATED_AT,n.DEFAULT_LAST_USED_AT,n.DEFAULT_PWD_AUTO_GENERATED,n.DEFAULT_IS_DEMO_ACCOUNT,n.DEFAULT_IGNORE_AUC,n.DEFAULT_IGNORE_HIBP_BREACHED_PWD,n.DEFAULT_IGNORE_INSECURE_PROTOCOL,n.DEFAULT_IGNORE_PWD_STRENGTH,n.DEFAULT_IGNORE_REUSED,n.DEFAULT_ASSOCIATED_AUTH_ID],Ot={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,username:n.DEFAULT_USERNAME,password:n.DEFAULT_PASSWORD,favorite:n.DEFAULT_FAVORITE,autoFill:n.DEFAULT_AUTO_FILL,siteName:n.DEFAULT_SITE_NAME,autoSubmit:n.DEFAULT_AUTO_SUBMIT,favIconURL:n.DEFAULT_FAV_ICON_URL,secure:n.DEFAULT_SECURE,loginURL:n.DEFAULT_LOGIN_URL,notes:n.DEFAULT_LOGIN_NOTES,loginDomain:n.DEFAULT_DOMAIN,legacyEmail:n.DEFAULT_LEGACY_EMAIL,formHost:n.DEFAULT_FORM_HOST,pageHost:n.DEFAULT_PAGE_HOST,protocol:n.DEFAULT_PROTOCOL,createdAt:n.DEFAULT_CREATED_AT,lastUsedAt:n.DEFAULT_LAST_USED_AT,pwdAutoGenerated:n.DEFAULT_PWD_AUTO_GENERATED,isDemoAccount:n.DEFAULT_IS_DEMO_ACCOUNT,ignoreAUC:n.DEFAULT_IGNORE_AUC,ignoreHibpBreachedPwd:n.DEFAULT_IGNORE_HIBP_BREACHED_PWD,ignoreInsecureProtocol:n.DEFAULT_IGNORE_INSECURE_PROTOCOL,ignorePwdStrength:n.DEFAULT_IGNORE_PWD_STRENGTH,ignoreReused:n.DEFAULT_IGNORE_REUSED,associatedAuthID:n.DEFAULT_ASSOCIATED_AUTH_ID},It=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=Ot,e.keys=bt,e};o.inherits(It,Pe),It.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_STRING,deserializedType:mt.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_UINT64,deserializedType:mt.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.DEFAULT_FAVORITE:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setFavorite,getter:this.getFavorite};case n.DEFAULT_USERNAME:return{encrypted:!0,obfuscated:!0,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setUsername,getter:this.getUsername};case n.DEFAULT_PASSWORD:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BINARY,setter:this.setPassword,getter:this.getPassword};case n.DEFAULT_LOGIN_NOTES:return{encrypted:!0,obfuscated:!0,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setNotes,getter:this.getNotes};case n.DEFAULT_LOGIN_URL:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setLoginURL,getter:this.getLoginURL};case n.DEFAULT_SECURE:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setSecure,getter:this.getSecure};case n.DEFAULT_FAV_ICON_URL:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setFavIconURL,getter:this.getFavIconURL};case n.DEFAULT_SITE_NAME:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setSiteName,getter:this.getSiteName};case n.DEFAULT_SIGN_ON_DESTINATION:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setSignOnDestination,getter:this.getSignOnDestination};case n.DEFAULT_CRED_0:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setCred0,getter:this.getCred0};case n.DEFAULT_CRED_1:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setCred1,getter:this.getCred1};case n.DEFAULT_CRED_2:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setCred2,getter:this.getCred2};case n.DEFAULT_FOLDER:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_STRING,deserializedType:mt.TID_STRING,setter:this.setDefaultFolder,getter:this.getDefaultFolder};case n.DEFAULT_AUTO_FILL:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setAutoFill,getter:this.getAutoFill};case n.DEFAULT_AUTO_SUBMIT:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setAutoSubmit,getter:this.getAutoSubmit};case n.DEFAULT_PROMINENT_COLOR:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BINARY,setter:this.setProminentColor,getter:this.getProminentColor};case n.DEFAULT_DOMAIN:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setDomain,getter:this.getDomain};case n.DEFAULT_LEGACY_EMAIL:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setLegacyEmail,getter:this.getLegacyEmail};case n.DEFAULT_FORM_HOST:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setFormHost,getter:this.getFormHost};case n.DEFAULT_PAGE_HOST:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setPageHost,getter:this.getPageHost};case n.DEFAULT_PROTOCOL:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setProtocol,getter:this.getProtocol};case n.DEFAULT_CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_UINT64,deserializedType:mt.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};case n.DEFAULT_LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_UINT64,deserializedType:mt.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};case n.DEFAULT_PWD_AUTO_GENERATED:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setPwdAutoGenerated,getter:this.getPwdAutoGenerated};case n.DEFAULT_IS_DEMO_ACCOUNT:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setIsDemoAccount,getter:this.getIsDemoAccount};case n.DEFAULT_IGNORE_AUC:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setIgnoreAUC,getter:this.getIgnoreAUC};case n.DEFAULT_IGNORE_HIBP_BREACHED_PWD:return{encrypted:!0,obfuscated:!0,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setIgnoreHibpBreachedPwd,getter:this.getIgnoreHibpBreachedPwd};case n.DEFAULT_IGNORE_INSECURE_PROTOCOL:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setIgnoreInsecureProtocol,getter:this.getIgnoreInsecureProtocol};case n.DEFAULT_IGNORE_PWD_STRENGTH:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_STRING,setter:this.setIgnorePwdStrength,getter:this.getIgnorePwdStrength};case n.DEFAULT_IGNORE_REUSED:return{encrypted:!0,obfuscated:!1,serializedType:mt.TID_BINARY,deserializedType:mt.TID_BOOL,setter:this.setIgnoreReused,getter:this.getIgnoreReused};case n.DEFAULT_ASSOCIATED_AUTH_ID:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_STRING,deserializedType:mt.TID_STRING,setter:this.setAssociatedAuthID,getter:this.getAssociatedAuthID};case n.DEFAULT_PASSWORD_TIMESTAMP:return{encrypted:!1,obfuscated:!1,serializedType:mt.TID_UINT64,deserializedType:mt.TID_UINT64,setter:this.setPasswordTimestamp,getter:this.getPasswordTimestamp};default:yt.error("Invalid data value: "+e)}return null},It.prototype.getNodePath=function(){return n.DEFAULT_LOGIN_NODE+"/"+this.getPath()},It.prototype.getUsername=function(e){return e===At?this.username:this.username||""},It.prototype.setUsername=function(e){this.username=e},It.prototype.getPassword=function(e){return e===At?this.password:St(this.password)?null:(e=Se.obfuscateData(this.password,F.getObfuscationKey()),St(e)||0===e.byteLength?null:Tt.arrayBufferToStringUTF16LE(e))},It.prototype.setPassword=function(e,t){St(e)?this.password=null:t!==At?(e=Tt.stringUTF16LEToByteArray(e),e=new Uint8Array(e),this.password=Se.obfuscateData(e,F.getObfuscationKey())):this.password=e},It.prototype.getNotes=function(){return this.notes},It.prototype.setNotes=function(e){this.notes=e},It.prototype.getLoginURL=function(e){return e===At?this.loginURL:this.loginURL||""},It.prototype.getDomain=function(){return this.loginDomain},It.prototype.getLegacyEmail=function(){return this.legacyEmail},It.prototype.getFormHost=function(){return this.formHost},It.prototype.getPageHost=function(){return this.pageHost},It.prototype.getProtocol=function(){return this.protocol},It.prototype.getCreatedAt=function(){return this.createdAt},It.prototype.getLastUsedAt=function(){return this.lastUsedAt},It.prototype.getPwdAutoGenerated=function(){return this.pwdAutoGenerated},It.prototype.getIsDemoAccount=function(){return this.isDemoAccount},It.prototype.getIgnoreAUC=function(){return this.ignoreAUC},It.prototype.getIgnoreHibpBreachedPwd=function(){return this.ignoreHibpBreachedPwd},It.prototype.getIgnoreInsecureProtocol=function(){return this.ignoreInsecureProtocol},It.prototype.getIgnorePwdStrength=function(){return this.ignorePwdStrength},It.prototype.getIgnoreReused=function(){return this.ignoreReused},It.prototype.getAssociatedAuthID=function(){return this.associatedAuthID},It.prototype.setLoginURL=function(e){this.loginURL=e},It.prototype.setDomain=function(e){this.loginDomain=e},It.prototype.setLegacyEmail=function(e){this.legacyEmail=e},It.prototype.setFormHost=function(e){this.formHost=e},It.prototype.setPageHost=function(e){this.pageHost=e},It.prototype.setProtocol=function(e){this.protocol=e},It.prototype.setCreatedAt=function(e){this.createdAt=e},It.prototype.setLastUsedAt=function(e){this.lastUsedAt=e},It.prototype.setPwdAutoGenerated=function(e){this.pwdAutoGenerated=e},It.prototype.setIsDemoAccount=function(e){this.isDemoAccount=e},It.prototype.setIgnoreAUC=function(e){this.ignoreAUC=e},It.prototype.setIgnoreHibpBreachedPwd=function(e){this.ignoreHibpBreachedPwd=e},It.prototype.setIgnoreInsecureProtocol=function(e){this.ignoreInsecureProtocol=e},It.prototype.setIgnorePwdStrength=function(e){this.ignorePwdStrength=e},It.prototype.setIgnoreReused=function(e){this.ignoreReused=e},It.prototype.setAssociatedAuthID=function(e){this.associatedAuthID=e},It.prototype.getFavIconURL=function(){return this.favIconURL},It.prototype.setFavIconURL=function(e){this.favIconURL=e},It.prototype.getSiteName=function(e){return e===At?this.siteName:this.siteName||""},It.prototype.setSiteName=function(e){this.siteName=e},It.prototype.getSignOnDestination=function(){return this.signOnDestination},It.prototype.setSignOnDestination=function(e){this.signOnDestination=e},It.prototype.getCred0=function(){return this.cred0},It.prototype.setCred0=function(e){this.cred0=e},It.prototype.getCred1=function(){return this.cred1},It.prototype.setCred1=function(e){this.cred1=e},It.prototype.getCred2=function(){return this.cred2},It.prototype.setCred2=function(e){this.cred2=e},It.prototype.getDefaultFolder=function(){return this.defaultFolder},It.prototype.setDefaultFolder=function(e){this.defaultFolder=e},It.prototype.getAutoSubmit=function(){return this.autoSubmit},It.prototype.setAutoSubmit=function(e){this.autoSubmit=e},It.prototype.getAutoFill=function(){return this.autoFill},It.prototype.setAutoFill=function(e){this.autoFill=e},It.prototype.getProminentColor=function(){return this.prominentColor},It.prototype.setProminentColor=function(e){this.prominentColor=e},It.prototype.getPasswordTimestamp=function(){return this.passwordTimestamp},It.prototype.setPasswordTimestamp=function(e){this.passwordTimestamp=e};var vt=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,Nt=s.a.logger,Rt=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,n.DEFAULT_FAVORITE,n.NOTE.TITLE,n.NOTE.INFORMATION,n.NOTE.SECURE,n.NOTE.COLOR,n.NOTE.CREATED_AT,n.NOTE.LAST_USED_AT],Ct={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,favorite:n.DEFAULT_FAVORITE,title:n.NOTE.TITLE,information:n.NOTE.INFORMATION,secure:n.NOTE.SECURE,color:n.NOTE.COLOR,createdAt:n.NOTE.CREATED_AT,lastUsedAt:n.NOTE.LAST_USED_AT},Dt=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=Ct,e.keys=Rt,e};o.inherits(Dt,Pe),Dt.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:vt.TID_STRING,deserializedType:vt.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:vt.TID_UINT64,deserializedType:vt.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.DEFAULT_FAVORITE:return{encrypted:!1,obfuscated:!1,serializedType:vt.TID_BINARY,deserializedType:vt.TID_BOOL,setter:this.setFavorite,getter:this.getFavorite};case n.NOTE.TITLE:return{encrypted:!0,obfuscated:!1,serializedType:vt.TID_BINARY,deserializedType:vt.TID_BINARY,setter:this.setTitle,getter:this.getTitle};case n.NOTE.INFORMATION:return{encrypted:!0,obfuscated:!1,serializedType:vt.TID_BINARY,deserializedType:vt.TID_BINARY,setter:this.setInformation,getter:this.getInformation};case n.NOTE.SECURE:return{encrypted:!0,obfuscated:!1,serializedType:vt.TID_BINARY,deserializedType:vt.TID_BOOL,setter:this.setSecure,getter:this.getSecure};case n.NOTE.COLOR:return{encrypted:!0,obfuscated:!1,serializedType:vt.TID_BINARY,deserializedType:vt.TID_STRING,setter:this.setColor,getter:this.getColor};case n.NOTE.CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:vt.TID_UINT64,deserializedType:vt.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};case n.NOTE.LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:vt.TID_UINT64,deserializedType:vt.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};default:Nt.error("Invalid data value: "+e)}return null},Dt.prototype.getNodePath=function(){return n.DEFAULT_NOTE_NODE+"/"+this.getPath()},Dt.prototype.getTitle=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.title,e)},Dt.prototype.setTitle=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,n.NOTE.TITLE_PROPERTY_NAME,e,t)},Dt.prototype.getInformation=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.information,e)},Dt.prototype.setInformation=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,n.NOTE.INFORMATION_PROPERTY_NAME,e,t)},Dt.prototype.getColor=function(){return this.color},Dt.prototype.setColor=function(e){this.color=e},Dt.prototype.setCreatedAt=function(e){this.createdAt=e},Dt.prototype.setLastUsedAt=function(e){this.lastUsedAt=e},Dt.prototype.getLastUsedAt=function(){return this.lastUsedAt},Dt.prototype.getCreatedAt=function(){return this.createdAt};var wt=s.a,Lt=wt.utils,Pt=Lt.isNil,Mt=Lt.isEmptyObject,Ut=Lt.isString,jt=wt.logger,kt=n.TAG,xt=function(){return this.name="NoteManager",this.items={},this.tagType=kt.NOTE,this};o.inherits(xt,h),xt.prototype.search=function(e,t){var r,n,i,s,a,u,l,c=this;return o.asyncExecutePromiseGeneratorProgram((function(d){if(r=[],Mt(c.items))return d.return((jt.info("Empty vault"),r));if(!Ut(e))throw Error("Search key cannot be null");for(n=o.makeIterator(Object.keys(c.items)),i=n.next();!i.done;i=n.next())s=i.value,a=c.items[s],t&&(u=a.getFavorite(),Pt(u)||!1===u)||(l=a.getTitle(),e=e.toLowerCase(),-1<l.toLowerCase().indexOf(e)&&r.push(s));return d.return(r)}))};var Ft=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,Bt=s.a.logger,Gt=s.a.utils.isNil,Vt=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,n.DEFAULT_FAVORITE,n.IDENTITY.SALUTATION,n.IDENTITY.FIRSTNAME,n.IDENTITY.MIDDLENAME,n.IDENTITY.LASTNAME,n.IDENTITY.LASTNAME2,n.IDENTITY.FIRSTNAME_ALPHABET,n.IDENTITY.LASTNAME_ALPHABET,n.IDENTITY.FIRSTNAME_ROMAN,n.IDENTITY.LASTNAME_ROMAN,n.IDENTITY.DOB_DAY,n.IDENTITY.DOB_MONTH,n.IDENTITY.DOB_YEAR,n.IDENTITY.EMAIL,n.IDENTITY.PHONE_WORK,n.IDENTITY.PHONE_HOME,n.IDENTITY.PHONE_MOBILE,n.IDENTITY.PHONE_EXTENSION,n.IDENTITY.CARDNAME,n.IDENTITY.SECURE,n.IDENTITY.GENDER,n.IDENTITY.ADDRESS_GUID,n.IDENTITY.CREDITCARD_GUID,n.IDENTITY.COUNTRY_REGION],Ht={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,favorite:n.DEFAULT_FAVORITE,salutation:n.IDENTITY.SALUTATION,firstName:n.IDENTITY.FIRSTNAME,middleName:n.IDENTITY.MIDDLENAME,lastName:n.IDENTITY.LASTNAME,lastName2:n.IDENTITY.LASTNAME2,firstNameAlphabet:n.IDENTITY.FIRSTNAME_ALPHABET,lastNameAlphabet:n.IDENTITY.LASTNAME_ALPHABET,firstNameRoman:n.IDENTITY.FIRSTNAME_ROMAN,lastNameRoman:n.IDENTITY.LASTNAME_ROMAN,dobDay:n.IDENTITY.DOB_DAY,dobMonth:n.IDENTITY.DOB_MONTH,dobYear:n.IDENTITY.DOB_YEAR,email:n.IDENTITY.EMAIL,work:n.IDENTITY.PHONE_WORK,home:n.IDENTITY.PHONE_HOME,mobile:n.IDENTITY.PHONE_MOBILE,extension:n.IDENTITY.PHONE_EXTENSION,secure:n.IDENTITY.SECURE,gender:n.IDENTITY.GENDER,cardName:n.IDENTITY.CARDNAME,creditCardGuid:n.IDENTITY.CREDITCARD_GUID,addressGuid:n.IDENTITY.ADDRESS_GUID,region:n.IDENTITY.COUNTRY_REGION},Wt=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=Ht,e.keys=Vt,e};o.inherits(Wt,Pe),Wt.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:Ft.TID_STRING,deserializedType:Ft.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:Ft.TID_UINT64,deserializedType:Ft.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.DEFAULT_FAVORITE:return{encrypted:!1,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BOOL,setter:this.setFavorite,getter:this.getFavorite};case n.IDENTITY.SALUTATION:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setSalutation,getter:this.getSalutation};case n.IDENTITY.FIRSTNAME:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setFirstName,getter:this.getFirstName};case n.IDENTITY.MIDDLENAME:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setMiddleName,getter:this.getMiddleName};case n.IDENTITY.LASTNAME:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setLastName,getter:this.getLastName};case n.IDENTITY.LASTNAME2:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setLastName2,getter:this.getLastName2};case n.IDENTITY.FIRSTNAME_ALPHABET:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setFirstNameAlphabet,getter:this.getFirstNameAlphabet};case n.IDENTITY.LASTNAME_ALPHABET:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setLastNameAlphabet,getter:this.getLastNameAlphabet};case n.IDENTITY.FIRSTNAME_ROMAN:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setFirstNameRoman,getter:this.getFirstNameRoman};case n.IDENTITY.LASTNAME_ROMAN:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setLastNameRoman,getter:this.getLastNameRoman};case n.IDENTITY.DOB_DAY:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setDobDay,getter:this.getDobDay};case n.IDENTITY.DOB_MONTH:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setDobMonth,getter:this.getDobMonth};case n.IDENTITY.DOB_YEAR:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setDobYear,getter:this.getDobYear};case n.IDENTITY.EMAIL:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setEmail,getter:this.getEmail};case n.IDENTITY.PHONE_WORK:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setPhoneWork,getter:this.getPhoneWork};case n.IDENTITY.PHONE_HOME:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setPhoneHome,getter:this.getPhoneHome};case n.IDENTITY.PHONE_MOBILE:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setMobile,getter:this.getMobile};case n.IDENTITY.PHONE_EXTENSION:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BINARY,setter:this.setPhoneExtension,getter:this.getPhoneExtension};case n.IDENTITY.CARDNAME:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_STRING,setter:this.setCardName,getter:this.getCardName};case n.IDENTITY.SECURE:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BOOL,setter:this.setSecure,getter:this.getSecure};case n.IDENTITY.GENDER:return{encrypted:!0,obfuscated:!1,serializedType:Ft.TID_BINARY,deserializedType:Ft.TID_BOOL,setter:this.setGender,getter:this.getGender};case n.IDENTITY.CREDITCARD_GUID:return{encrypted:!1,obfuscated:!1,serializedType:Ft.TID_STRING,deserializedType:Ft.TID_STRING,setter:this.setCreditCardGuid,getter:this.getCreditCardGuid};case n.IDENTITY.ADDRESS_GUID:return{encrypted:!1,obfuscated:!1,serializedType:Ft.TID_STRING,deserializedType:Ft.TID_STRING,setter:this.setAddressGuid,getter:this.getAddressGuid};case n.IDENTITY.COUNTRY_REGION:return{encrypted:!1,obfuscated:!1,serializedType:Ft.TID_STRING,deserializedType:Ft.TID_STRING,setter:this.setRegion,getter:this.getRegion};default:Bt.error("Invalid data value: "+e)}return null},Wt.prototype.getNodePath=function(){return n.DEFAULT_IDENTITY_NODE+"/"+this.getPath()},Wt.prototype.getSalutation=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.salutation,e)},Wt.prototype.setSalutation=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"salutation",e,t)},Wt.prototype.getFirstName=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.firstName,e)},Wt.prototype.setFirstName=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"firstName",e,t)},Wt.prototype.getMiddleName=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.middleName,e)},Wt.prototype.setMiddleName=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"middleName",e,t)},Wt.prototype.getLastName=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.lastName,e)},Wt.prototype.setLastName=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"lastName",e,t)},Wt.prototype.getLastName2=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.lastName2,e)},Wt.prototype.setLastName2=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"lastName2",e,t)},Wt.prototype.getFirstNameAlphabet=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.firstNameAlphabet,e)},Wt.prototype.setFirstNameAlphabet=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"firstNameAlphabet",e,t)},Wt.prototype.getLastNameAlphabet=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.lastNameAlphabet,e)},Wt.prototype.setLastNameAlphabet=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"lastNameAlphabet",e,t)},Wt.prototype.getFirstNameRoman=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.firstNameRoman,e)},Wt.prototype.setFirstNameRoman=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"firstNameRoman",e,t)},Wt.prototype.getLastNameRoman=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.lastNameRoman,e)},Wt.prototype.setLastNameRoman=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"lastNameRoman",e,t)},Wt.prototype.getDobDay=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.dobDay,e)},Wt.prototype.setDobDay=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"dobDay",e,t)},Wt.prototype.getDobMonth=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.dobMonth,e)},Wt.prototype.setDobMonth=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"dobMonth",e,t)},Wt.prototype.getDobYear=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.dobYear,e)},Wt.prototype.setDobYear=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"dobYear",e,t)},Wt.prototype.getEmail=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.email,e)},Wt.prototype.setEmail=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"email",e,t)},Wt.prototype.getPhoneWork=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.work,e)},Wt.prototype.setPhoneWork=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"work",e,t)},Wt.prototype.getPhoneHome=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.home,e)},Wt.prototype.setPhoneHome=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"home",e,t)},Wt.prototype.getMobile=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.mobile,e)},Wt.prototype.setMobile=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"mobile",e,t)},Wt.prototype.getPhoneExtension=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.extension,e)},Wt.prototype.setPhoneExtension=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"extension",e,t)},Wt.prototype.getCardName=function(){return this.cardName},Wt.prototype.setCardName=function(e){this.cardName=e},Wt.prototype.getGender=function(){return this.gender},Wt.prototype.setGender=function(e){this.gender=e},Wt.prototype.getCreditCardGuid=function(){return this.creditCardGuid},Wt.prototype.setCreditCardGuid=function(e){this.creditCardGuid=e},Wt.prototype.getAddressGuid=function(){return this.addressGuid},Wt.prototype.setAddressGuid=function(e){this.addressGuid=e},Wt.prototype.getRegion=function(e){return"internal"===e?this.region:Gt(this.region)?"":this.region.toLowerCase()},Wt.prototype.setRegion=function(e){this.region=e};var Yt=s.a,Kt=Yt.logger,zt=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,qt=Yt.utils.isNil,$t=n.ITEM_INTERNAL_CONTEXT,Xt=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,n.DEFAULT_FAVORITE,n.ADDRESS.ADDR_CITY,n.ADDRESS.ADDR_POSTAL,n.ADDRESS.ADDR_STATE,n.ADDRESS.ADDR_STREET,n.ADDRESS.ADDR_STREET2,n.ADDRESS.ADDR_STREET3,n.ADDRESS.APTSTREETHOUSENUM,n.ADDRESS.ADDR_CITY_DISTRICT_WARD_AND_NUMBERS,n.ADDRESS.ADDR_BUILDING_NAME_AND_FLOOR,n.ADDRESS.ADDR_CITY_ALPHABET,n.ADDRESS.ADDR_STREET_ALPHABET,n.ADDRESS.ADDR_STREET2_ALPHABET,n.ADDRESS.ADDRESSNAME,n.ADDRESS.SECURE,n.ADDRESS.COUNTRY_REGION],Jt={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,favorite:n.DEFAULT_FAVORITE,city:n.ADDRESS.ADDR_CITY,postal:n.ADDRESS.ADDR_POSTAL,state:n.ADDRESS.ADDR_STATE,street:n.ADDRESS.ADDR_STREET,street2:n.ADDRESS.ADDR_STREET2,street3:n.ADDRESS.ADDR_STREET3,apt:n.ADDRESS.APTSTREETHOUSENUM,cityDistrictWardAndNumbers:n.ADDRESS.ADDR_CITY_DISTRICT_WARD_AND_NUMBERS,buildingNameAndFloor:n.ADDRESS.ADDR_BUILDING_NAME_AND_FLOOR,cityAlphabet:n.ADDRESS.ADDR_CITY_ALPHABET,streetAlphabet:n.ADDRESS.ADDR_STREET_ALPHABET,street2Alphabet:n.ADDRESS.ADDR_STREET2_ALPHABET,addressName:n.ADDRESS.ADDRESSNAME,secure:n.ADDRESS.SECURE,region:n.ADDRESS.COUNTRY_REGION},Zt=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=Jt,e.keys=Xt,e};o.inherits(Zt,Pe),Zt.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:zt.TID_STRING,deserializedType:zt.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:zt.TID_UINT64,deserializedType:zt.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.DEFAULT_FAVORITE:return{encrypted:!1,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BOOL,setter:this.setFavorite,getter:this.getFavorite};case n.ADDRESS.ADDR_CITY:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setCity,getter:this.getCity};case n.ADDRESS.ADDR_POSTAL:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setPostal,getter:this.getPostal};case n.ADDRESS.ADDR_STATE:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setState,getter:this.getState};case n.ADDRESS.ADDR_STREET:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setStreet,getter:this.getStreet};case n.ADDRESS.ADDR_STREET2:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setStreet2,getter:this.getStreet2};case n.ADDRESS.ADDR_STREET3:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setStreet3,getter:this.getStreet3};case n.ADDRESS.ADDR_CITY_DISTRICT_WARD_AND_NUMBERS:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setCityDistrictWardAndNumbers,getter:this.getCityDistrictWardAndNumbers};case n.ADDRESS.ADDR_BUILDING_NAME_AND_FLOOR:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setBuildingNameAndFloor,getter:this.getBuildingNameAndFloor};case n.ADDRESS.ADDR_CITY_ALPHABET:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setCityAlphabet,getter:this.getCityAlphabet};case n.ADDRESS.ADDR_STREET_ALPHABET:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setStreetAlphabet,getter:this.getStreetAlphabet};case n.ADDRESS.ADDR_STREET2_ALPHABET:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setStreet2Alphabet,getter:this.getStreet2Alphabet};case n.ADDRESS.APTSTREETHOUSENUM:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BINARY,setter:this.setApt,getter:this.getApt};case n.ADDRESS.ADDRESSNAME:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_STRING,setter:this.setAddressName,getter:this.getAddressName};case n.ADDRESS.SECURE:return{encrypted:!0,obfuscated:!1,serializedType:zt.TID_BINARY,deserializedType:zt.TID_BOOL,setter:this.setSecure,getter:this.getSecure};case n.ADDRESS.COUNTRY_REGION:return{encrypted:!1,obfuscated:!1,serializedType:zt.TID_STRING,deserializedType:zt.TID_STRING,setter:this.setRegion,getter:this.getRegion};default:Kt.error("Invalid data value: "+e)}return null},Zt.prototype.getNodePath=function(){return n.DEFAULT_ADDRESS_NODE+"/"+this.getPath()},Zt.prototype.getCity=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.city,e)},Zt.prototype.setCity=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"city",e,t)},Zt.prototype.getPostal=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.postal,e)},Zt.prototype.setPostal=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"postal",e,t)},Zt.prototype.getState=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.state,e)},Zt.prototype.setState=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"state",e,t)},Zt.prototype.getStreet=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.street,e)},Zt.prototype.setStreet=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"street",e,t)},Zt.prototype.getStreet2=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.street2,e)},Zt.prototype.setStreet2=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"street2",e,t)},Zt.prototype.getStreet3=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.street3,e)},Zt.prototype.setStreet3=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"street3",e,t)},Zt.prototype.getApt=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.apt,e)},Zt.prototype.setApt=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"apt",e,t)},Zt.prototype.getCityDistrictWardAndNumbers=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.cityDistrictWardAndNumbers,e)},Zt.prototype.setCityDistrictWardAndNumbers=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"cityDistrictWardAndNumbers",e,t)},Zt.prototype.getBuildingNameAndFloor=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.buildingNameAndFloor,e)},Zt.prototype.setBuildingNameAndFloor=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"buildingNameAndFloor",e,t)},Zt.prototype.getCityAlphabet=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.cityAlphabet,e)},Zt.prototype.setCityAlphabet=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"cityAlphabet",e,t)},Zt.prototype.getStreetAlphabet=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.streetAlphabet,e)},Zt.prototype.setStreetAlphabet=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"streetAlphabet",e,t)},Zt.prototype.getStreet2Alphabet=function(e){return Pe.prototype.getDeobfuscatedStringProperty.call(this,this.street2Alphabet,e)},Zt.prototype.setStreet2Alphabet=function(e,t){Pe.prototype.setClearOrObfuscatedStringProperty.call(this,"street2Alphabet",e,t)},Zt.prototype.getAddressName=function(){return this.addressName},Zt.prototype.setAddressName=function(e){this.addressName=e},Zt.prototype.getRegion=function(e){return e===$t?this.region:qt(this.region)?"":this.region.toLowerCase()},Zt.prototype.setRegion=function(e){this.region=e};var Qt=s.a,er=Qt.logger,tr=Qt.utils,rr=tr.isNil,nr=tr.isntNil,or=tr.isEmptyObject,ir=tr.isString,sr=tr.isFunction,ar=tr.isArray,ur=tr.isSuccessCode,lr=n.TAG,cr=function(){return this.name="LoginManager",this.items={},this.tagType=lr.LOGIN,this};o.inherits(cr,h),cr.prototype.addItem=function(e,t){return t=void 0===t||t,e=h.prototype.addItem.call(this,e,t),!0===t&&X.sendLoginAdd(X.LOGIN_TYPE_LOCAL),e},cr.prototype.addItems=function(e,t){t=void 0===t||t;var r,n=this;return o.asyncExecutePromiseGeneratorProgram((function(o){return 1==o.nextAddress?o.yield(h.prototype.addItems.call(n,e,t),2):(r=o.yieldResult,o.return((t&&X.sendLoginAdd(X.LOGIN_TYPE_LOCAL),r)))}))},cr.prototype.addUpdateItems=function(e,t){t=void 0===t||t;var r,n,i,s,a=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(!ar(e))throw Error("Item must be an array of logins");return rr(t)&&(t=!1),r=[],n=a,i=[],e.forEach((function(e){var t=e.getPath(),o=n.items[t];e.setLastUpdate((new Date).getTime()/1e3),nr(o)?n.updateItem(e,!1):n.addItem(e,!1),i.push(t),r.push(e.clone().serializeNode())})),!0!==t?o.jumpTo(0):o.yield(Cr.uploadNodes(r,null),3)}if(s=o.yieldResult,!ur(s.status))throw s;return o.return((X.sendLoginModify(X.LOGIN_TYPE_LOCAL),s))}))},cr.prototype.searchKey=function(e,t){if(!1===sr(t))throw Error("Need a valid callback function");if(0===Object.keys(this.items).length)return er.info("Empty vault"),void setTimeout((function(){t([],null)}),1);if(rr(e))setTimeout((function(){t(null,Error("Search key cannot be null"))}),1);else{var r=s.a.utils.baseURL(e);e=Wr.rawSearch(e);var n=[],o=Number.MAX_SAFE_INTEGER,i=this;rr(e)||0===e.size?setTimeout((function(){t([],null)}),1):(e.forEach((function(e,t){if(e=i.getItem(t),(t=r.indexOf(s.a.utils.baseURL(e.getLoginURL())))<=o&&-1<t)return n.unshift(e),void(o=Math.min(o,t));n.push(e)})),setTimeout((function(){t(n,null)}),1))}},cr.prototype.search=function(e,t){var r,n,i,s,a,u,l,c,d,f,p,h,_,E=this;return o.asyncExecutePromiseGeneratorProgram((function(g){if(r={},or(E.items))return g.return((er.info("Empty vault"),r));if(!ir(e))throw Error("Search key cannot be null");for(n=["siteName","loginURL","username"],i=o.makeIterator(n),s=i.next();!s.done;s=i.next())a=s.value,r[a]=[];for(u=o.makeIterator(Object.keys(E.items)),l=u.next();!l.done;l=u.next())c=l.value,d=E.items[c],!0===t&&(f=d.getFavorite(),rr(f)||!1===f)||(e=e.toLowerCase(),p=d.getSiteName(),p=ir(p)?p:"",h=d.getLoginURL(),h=ir(h)?h:"",_=d.getUsername(),_=ir(_)?_:"",-1<p.toLowerCase().indexOf(e)?r[n[0]].push(c):-1<h.toLowerCase().indexOf(e)?r[n[1]].push(c):-1<_.toLowerCase().indexOf(e)&&r[n[2]].push(c));return g.return(r)}))},cr.prototype.updateItem=function(e,t){if(t=void 0===t||t,rr(e))throw Error("Item cannot be null");rr(t)&&(t=!1);var r=e.getPath(),n=this.items[r];if(rr(n))throw Error("New item is being added. Please use the addItem interface");if(Wr.removeItemFromMap(n),this.items[r]=e,t)return X.sendLoginModify(X.LOGIN_TYPE_LOCAL),Cr.uploadNodes(e.clone().serializeNode(),null)},cr.prototype.postSyncSetup=function(){for(var e in this.items)if(Object.prototype.hasOwnProperty.call(this.items,e)){var t=this.items[e];if(t.encrypted)try{t.decrypt(),Wr.addItemToMap(t)}catch(t){er.error(t),delete this.items[e]}}},cr.prototype.deleteItem=function(e,t){t=void 0===t||t;var r,n,i=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(rr(e))return o.return();if(r=i.items[e],rr(r))return o.return(void er.info("No item found to delete"));if(Wr.removeItemFromMap(r),n=r.serializeNode(!0),delete i.items[e],rr(t)){o.jumpTo(2);break}if(!t){o.jumpTo(3);break}return o.yield(Cr.uploadNodes(n,null),4);case 4:case 3:return o.yield(i.removeTagItems([e],t),5);case 5:case 2:o.jumpToEnd()}}))},cr.prototype.deleteAllItems=function(e){e=void 0===e||e;var t,r,n,i,s=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:for(n in t=[],r=[],s.items)Object.prototype.hasOwnProperty.call(s.items,n)&&(i=s.items[n].serializeNode(!0),r.push(n),delete s.items[n],t.push(i));if(Wr.clearMaps(),0===t.length){o.jumpTo(2);break}if(rr(e)){o.jumpTo(3);break}if(!e){o.jumpTo(4);break}return o.yield(Cr.uploadNodes(t,null),5);case 5:X.sendLoginDelete(X.LOGIN_TYPE_LOCAL,t.length);case 4:return o.yield(s.removeTagItems(r,e),6);case 6:case 3:case 2:o.jumpToEnd()}}))},cr.prototype.getUsernamesOrderedByFrequency=function(){var e=new Map;return Object.values(this.items).forEach((function(t){if(""!==(t=t.getUsername().toLowerCase().trim())){var r=e.get(t)||0;e.set(t,r+1)}})),[].concat(o.arrayFromIterable(new Map([].concat(o.arrayFromIterable(e)).sort((function(e,t){var r=t[1]-e[1];return 0!==r?r:e[0]<t[0]?-1:1}))).keys()))};var dr=s.a.logger,fr=s.a.utils,pr=fr.isNil,hr=fr.isInteger,_r=fr.isntNil,Er=n.TAG_NODE,gr=[Er.LOGIN,Er.IDENTITY,Er.ADDRESS,Er.CREDIT_CARD,Er.BANK_ACCOUNT,Er.NOTE],mr=function(){};mr.prototype.parseNodeList=function(e,t){t=void 0===t||t;var r,o=e.getNodes(),i={deleted:0,updated:0,added:0};for(r in o)if(Object.prototype.hasOwnProperty.call(o,r)){var s=o[r];switch(s.path){case n.DEFAULT_APPID_NODE:this.handleAppIDNode(s);break;case n.DEFAULT_APPID_IDSC_NODE:this.handleIDSCNode(s);break;case n.DEFAULT_RECOVERY_NODE:this.handleRecoveryNode(s);break;case n.DEFAULT_RECOVERY_IDSC_NODE:this.handleRecoveryIDSCNode(s);break;case n.DEFAULT_LOGIN_NODE:case n.DEFAULT_CREDIT_CARD_NODE:case n.DEFAULT_BANK_ACCOUNT_NODE:case n.DEFAULT_IDENTITY_NODE:case n.DEFAULT_ADDRESS_NODE:case n.DEFAULT_NOTE_NODE:case n.DEFAULT_ASSOCIATED_URL_NODE:case n.DEFAULT_LOGIN_HISTORY_NODE:case n.DEFAULT_AUTHENTICATOR_NODE:case n.DEFAULT_FILE_NODE:case n.DEFAULT_DELETED_UNKNOWN_BREACH_NODE:case n.DEFAULT_PASSWORD_BREACHES_NODE:case n.DEFAULT_LOGIN_IGNORED_BREACHES_NODE:case n.DEFAULT_TAG_NODE:i.deleted+=this.handleItemManagerUpdate(s);break;default:s=this.handleVaultNode(s),pr(s)||(hr(s.addedNodes)&&(i.added+=s.addedNodes),hr(s.updatedNodes)&&(i.updated+=s.updatedNodes),hr(s.deletedNodes)&&(i.deleted+=s.deletedNodes))}}return t&&jr.setNodeList(e),i},mr.prototype.handleItemManagerUpdate=function(e){var t=null;switch(e.path){case n.DEFAULT_LOGIN_NODE:t=Bn.LOGIN_MANAGER;break;case n.DEFAULT_CREDIT_CARD_NODE:t=Bn.CREDIT_CARD_MANAGER;break;case n.DEFAULT_BANK_ACCOUNT_NODE:t=Bn.BANK_ACCOUNT_MANAGER;break;case n.DEFAULT_ADDRESS_NODE:t=Bn.ADDRESS_MANAGER;break;case n.DEFAULT_IDENTITY_NODE:t=Bn.IDENTITY_MANAGER;break;case n.DEFAULT_NOTE_NODE:t=Bn.NOTE_MANAGER;break;case n.DEFAULT_ASSOCIATED_URL_NODE:t=Bn.ASSOCIATED_URL_MANAGER;break;case n.DEFAULT_LOGIN_HISTORY_NODE:t=Bn.LOGIN_HISTORY_MANAGER;break;case n.DEFAULT_AUTHENTICATOR_NODE:t=Bn.AUTHENTICATOR_MANAGER;break;case n.DEFAULT_FILE_NODE:t=Bn.FILE_MANAGER;break;case n.DEFAULT_DELETED_UNKNOWN_BREACH_NODE:t=Bn.DELETED_UNKNOWN_BREACH_MANAGER;break;case n.DEFAULT_PASSWORD_BREACHES_NODE:t=Bn.PASSWORD_BREACHES_MANAGER;break;case n.DEFAULT_LOGIN_IGNORED_BREACHES_NODE:t=Bn.LOGIN_IGNORED_BREACHES_MANAGER;break;case n.DEFAULT_TAG_NODE:t=Bn.TAG_MANAGER}if(pr(t))return dr.info("Do not support update to vault at path:"+e.path),0;var r=(t=Bn.getItemManager(t)).getAllItems(),o={};try{for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(o[i]=!0);var s,a=e.getChildNodes();for(s in a)if(Object.prototype.hasOwnProperty.call(a,s)){var u=a[s].getNodeName();pr(r[u])||delete o[u]}for(var l in e=0,o)Object.prototype.hasOwnProperty.call(o,l)&&(e+=1,t.deleteItem(l,!1));return e}catch(e){return dr.error(e),0}},mr.prototype.shouldUpdateItem=function(e,t){e=e.getNodeModified(),t=t.getNodeModified();var r=!0;return pr(e)||0<=e.compare(t)&&(r=!1),r},mr.prototype.handleVaultNode=function(e){var t=null,r=null,o=null,i={addedNodes:0,updatedNodes:0};if(0===e.getValues().length)return dr.log("Item got deleted"),i;if(e.path.includes(n.DEFAULT_LOGIN_NODE+"/"))t=new It,o=Bn.LOGIN_MANAGER;else if(e.path.includes(n.DEFAULT_CREDIT_CARD_NODE+"/"))t=new it,o=Bn.CREDIT_CARD_MANAGER;else if(e.path.includes(n.DEFAULT_BANK_ACCOUNT_NODE+"/"))t=new Be,o=Bn.BANK_ACCOUNT_MANAGER;else if(e.path.includes(n.DEFAULT_ADDRESS_NODE+"/"))t=new Zt,o=Bn.ADDRESS_MANAGER;else if(e.path.includes(n.DEFAULT_IDENTITY_NODE+"/"))t=new Wt,o=Bn.IDENTITY_MANAGER;else if(e.path.includes(n.DEFAULT_NOTE_NODE+"/"))t=new Dt,o=Bn.NOTE_MANAGER;else if(e.path.includes(n.DEFAULT_ASSOCIATED_URL_NODE+"/"))t=new ro,o=Bn.ASSOCIATED_URL_MANAGER;else if(e.path.includes(n.DEFAULT_LOGIN_HISTORY_NODE+"/"))t=new lo,o=Bn.LOGIN_HISTORY_MANAGER;else if(e.path.includes(n.DEFAULT_AUTHENTICATOR_NODE+"/"))t=new go,o=Bn.AUTHENTICATOR_MANAGER;else if(e.path.includes(n.DEFAULT_FILE_NODE+"/"))t=new Oo,o=Bn.FILE_MANAGER;else if(e.path.includes(n.DEFAULT_DELETED_UNKNOWN_BREACH_NODE+"/"))t=new wo,o=Bn.DELETED_UNKNOWN_BREACH_MANAGER;else if(e.path.includes(n.DEFAULT_PASSWORD_BREACHES_NODE+"/"))t=new xo,o=Bn.PASSWORD_BREACHES_MANAGER;else if(e.path.includes(n.DEFAULT_LOGIN_IGNORED_BREACHES_NODE+"/"))t=new Yo,o=Bn.LOGIN_IGNORED_BREACHES_MANAGER;else{if(!e.path.includes(n.DEFAULT_TAG_NODE+"/"))return i;var s=this.getTagItemNode(e.path);_r(s)?((t=new Fi).setItemNode(s),o=Bn.TAG_ITEM_MANAGER):(t=new ri,o=Bn.TAG_MANAGER)}try{if(t instanceof ri)return this.parseTagNode(e,t,o);if(t instanceof Fi)return this.parseTagItemNode(e,t,o);t.parseNode(e),r=Bn.getItemManager(o);var a=t.getPath(),u=r.getItem(a);if(pr(u))i.addedNodes+=1,r.addItem(t,!1);else{if(!this.shouldUpdateItem(u,e))return i;i.updatedNodes+=1,t.setNodeModified(e.getNodeModified()),r.updateItem(t,!1)}return i}catch(e){return dr.error(e),i}},mr.prototype.parseTagNode=function(e,t,r){var n={addedNodes:0,updatedNodes:0,deletedNodes:0};try{t.parseNode(e);var o=Bn.getItemManager(r),i=t.getPath(),s=o.getItem(i);return pr(s)?(o.addItem(t,!1),n.addedNodes+=1):(t.setNodeModified(e.getNodeModified()),o.updateItem(t,!1),n.updatedNodes+=1),n.deletedNodes+=this.handleTagWithChildNodes(e),n}catch(e){return dr.error("Error in parsing tagNode",e),n}},mr.prototype.parseTagItemNode=function(e,t,r){var n={addedNodes:0,updatedNodes:0,deletedNodes:0};try{var o,i=[];for(o in e.values){var s=Object.assign({},e,{values:[e.values[o]]});i.push(s)}var a=[];s=o="";var u,l=!1;for(u in i){t.parseNode(i[u]);var c=Bn.getItemManager(r),d=this.getTagItemNode(e.path),f=t.getPath(),p=c.getItem(f),h=null;_r(p)&&(h=c.isItemExists(f,t.getTagItem(),d),a.push(t.getTagItem()),o=f,s=d),_r(d)&&(pr(p)&&(pr(h)||!1===h)?(n.addedNodes+=1,c.addItem(t,d),l=!0):_r(p)&&(pr(h)||!1===h)&&(c.updateItem(t,d),n.updatedNodes+=1)),(t=new Fi).setItemNode(d)}if(0===a.length||pr(o)||pr(s)||l)return n;var _=Bn.getItemManager(Bn.TAG_MANAGER),E=_.getItemType(s);return _.getItemsByTagId(o,E).filter((function(e){return!a.includes(e.getTagItem())})).forEach((function(e){var t=e.getPath();e=e.getTagItem(),_.deleteTagItem(t,E,e,!1),n.deletedNodes+=1})),n}catch(e){return dr.error("Error in parsing parseTagItemNode"),n}},mr.prototype.handleTagWithChildNodes=function(e){if(pr(e)||pr(e.path))return 0;var t=[],r=Bn.getItemManager(Bn.TAG_MANAGER),n=e.getChildNodes();return pr(n)||0===n.length?0:(n.forEach((function(e){t.push(r.getItemType(e.getNodeName()))})),e=e.path.split("/")[4],pr(e)?0:r.updateItemsBasedOnChildNodes(e,t))},mr.prototype.getTagItemNode=function(e){return e=(e=e.split("/"))[e.length-1],gr.includes(e)?e:null},mr.prototype.handleAppIDNode=function(e){var t=e.getValues();if(0!==t.length){if(this.shouldUpdateItem(L,e)){for(var r in L.setNodeModified(e.getNodeModified()),t)if(Object.prototype.hasOwnProperty.call(t,r))switch(e=t[r],e.name){case n.DEFAULT_PASSWORD_HINT:L.setPasswordHint(e.data_string);break;case n.DEFAULT_CRYPTO_ALGORITHM:L.setCryptoAlgorithm(e.data_string);break;case n.DEFAULT_CHALLENGE_IV:e=e.data_binary.toArrayBuffer(),L.setChallengeIV(e);break;case n.DEFAULT_LOGIN_ID:L.setLoginID(e.data_uint64);break;case n.DEFAULT_PROFILE_ID:L.setProfileID(e.data_string);break;case n.DEFAULT_CHALLENGE_SALT:e=e.data_binary.toArrayBuffer(),L.setChallengeSalt(e);break;case n.DEFAULT_VAULT_VERSION:L.setVaultVersion(e.data_uint64)}L.setAvailability(!0)}}else L.reset()},mr.prototype.handleIDSCNode=function(e){var t=e.getValues();if(this.shouldUpdateItem(ie,e))for(var r in ie.setNodeModified(e.getNodeModified()),t)if(Object.prototype.hasOwnProperty.call(t,r))switch(e=t[r],e.name){case n.DEFAULT_VAULT_ENCRYPTION_KEY:e=e.data_binary.toArrayBuffer(),ie.setEncryptionKey(e);break;case n.DEFAULT_VAULT_OBFUSCATION_KEY:e=e.data_binary.toArrayBuffer(),ie.setObfuscationKey(e);break;case n.DEFAULT_LOGIN_ID:ie.setLoginID(e.data_uint64);break;case n.DEFAULT_VAULT_PBDK_SALT:e=e.data_binary.toArrayBuffer(),ie.setPBDKSalt(e)}},mr.prototype.handleRecoveryNode=function(e){var t=e.getValues();if(0!==t.length){if(this.shouldUpdateItem(ts,e)){for(var r in ts.setNodeModified(e.getNodeModified()),t)if(Object.prototype.hasOwnProperty.call(t,r))switch(e=t[r],e.name){case n.DEFAULT_LASTUPDATE:ts.setLastUpdate(e.data_uint64.toNumber());break;case n.DEFAULT_RECOVERY_SOURCE_ID:ts.setSourceID(e.data_string);break;case n.DEFAULT_RECOVERY_SOURCE_TYPE:ts.setSourceType(e.data_string);break;case n.DEFAULT_RECOVERY_CRYPTO_ALGORITHM:ts.setCryptoAlgorithm(e.data_string);break;case n.DEFAULT_RECOVERY_CHALLENGE_IV:e=e.data_binary.toArrayBuffer(),ts.setChallengeIV(e);break;case n.DEFAULT_RECOVERY_CHALLENGE_SALT:e=e.data_binary.toArrayBuffer(),ts.setChallengeSalt(e);break;case n.DEFAULT_RECOVERY_VAULT_VERSION:ts.setVaultVersion(e.data_uint64)}ts.setAvailability(!0)}}else ts.reset()},mr.prototype.handleRecoveryIDSCNode=function(e){var t=e.getValues();if(this.shouldUpdateItem(zi,e))for(var r in zi.setNodeModified(e.getNodeModified()),t)if(Object.prototype.hasOwnProperty.call(t,r))switch(e=t[r],e.name){case n.DEFAULT_RECOVERY_RANDOM_KEY:e=e.data_binary.toArrayBuffer(),zi.setRecoveryRandomKey(e);break;case n.DEFAULT_RECOVERY_VAULT_CHALLENGE_PRIVATE_KEY:e=e.data_binary.toArrayBuffer(),zi.setVaultChallengePrivateKey(e);break;case n.DEFAULT_RECOVERY_VAULT_DERIVED_KEY:e=e.data_binary.toArrayBuffer(),zi.setVaultDerivedKey(e);break;case n.DEFAULT_RECOVERY_PDK_SALT:e=e.data_binary.toArrayBuffer(),zi.setPBDKSalt(e)}};var yr=new mr,Sr=S.a,Tr=Sr.oxygen,Ar=Sr.session,br=S.a.proto.com.symantec.oxygen.datastore.v2.messages.NodeList,Or=s.a.utils,Ir=Or.isSuccessCode,vr=Or.isNil,Nr=s.a.logger,Rr=function(){};Rr.prototype.uploadNodes=function(e,t,r,n){return r=void 0===r||r,n=void 0===n?"vaultItem":n,o.asyncExecutePromiseGeneratorProgram((function(o){return o.return(new Promise((function(o,i){var a=new br;a.setNodes(e);var u=Ar.getUserID();vr(u)&&Nr.error("uploadNodes :: entityID is nil"),Tr.putNodes(u,a,(function(e,t,u,l){if(r&&(!Ir(e)||u))return s.a.logger.error("Failed to uploadNode:"+n+" errorCode: "+e),void i({status:e,error:u});Ir(e)&&(yr.parseNodeList(t),Bn.postSyncSetup()),o({status:e,nodeList:a,error:u,responseHeaders:l})}),t)})))}))};var Cr=new Rr,Dr=S.a.proto.com.symantec.oxygen.datastore.v2.messages.NodeList,wr=s.a.utils,Lr=wr.isNil,Pr=wr.isntNil,Mr=wr.isString,Ur=function(){this.isInitialized=!1,this.nodeList=this.store=null};Ur.prototype.initialize=function(e){var t,r=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(Lr(e))throw Error("store cannot be null");return r.store=e,o.yield(r.store.get(n.NODE_LIST_STORAGE_KEY),2)}if(t=o.yieldResult,Lr(t))return o.return((r.nodeList=null,r.isInitialized=!0,!0));if(!(t instanceof ArrayBuffer))throw Error("NodeList entry in storage is expected to be an ArrayBuffer");return o.return((r.nodeList=Dr.decode(t),r.isInitialized=!0,!0))}))},Ur.prototype.hasNodeList=function(){return Pr(this.nodeList)},Ur.prototype.removeNodeList=function(){this.store.set(n.NODE_LIST_STORAGE_KEY,void 0)},Ur.prototype.getNodeList=function(){return this.nodeList},Ur.prototype.getMatchingNode=function(e){return[n.DEFAULT_LOGIN_NODE,n.DEFAULT_CREDIT_CARD_NODE,n.DEFAULT_BANK_ACCOUNT_NODE,n.DEFAULT_ADDRESS_NODE,n.DEFAULT_IDENTITY_NODE,n.DEFAULT_NOTE_NODE,n.DEFAULT_ASSOCIATED_URL_NODE,n.DEFAULT_LOGIN_HISTORY_NODE,n.DEFAULT_AUTHENTICATOR_NODE,n.DEFAULT_FILE_NODE,n.DEFAULT_DELETED_UNKNOWN_BREACH_NODE,n.DEFAULT_PASSWORD_BREACHES_NODE,n.DEFAULT_LOGIN_IGNORED_BREACHES_NODE].find((function(t){return t===e}))||null},Ur.prototype.handleNodeDelete=function(e,t){var r=e.getChildNodes(),o=e.getValues(),i=this.getMatchingNode(e.path),s=e.path===n.DEFAULT_TAG_NODE,a=e.path.includes(n.DEFAULT_TAG_NODE+"/");o=Lr(r)&&Lr(o);var u=Pr(r);if(o)this.removeNodeByPath(t,i);else if(u){if(s&&0!==r.length)return void this.filterNodesByChild(t,r);if(a&&0!==r.length)return void this.handleChildTagNodeDelete(e,t,r);for(e={},s=t.length-1;0<=s;e={$jscomp$loop$prop$a$216$397:e.$jscomp$loop$prop$a$216$397},s--){e.$jscomp$loop$prop$a$216$397=t[s],a=r.some(function(e){return function(t){return e.$jscomp$loop$prop$a$216$397.path.includes(t.getNodeName())}}(e)),o=this.extractNodePath(e.$jscomp$loop$prop$a$216$397.path),o=Pr(o)&&o===i,u=e.$jscomp$loop$prop$a$216$397.path.includes(n.DEFAULT_TAG_NODE);var l=e.$jscomp$loop$prop$a$216$397.path.includes(n.DEFAULT_TAG_NODE+"/");a||!o||u||l||t.splice(s,1)}}},Ur.prototype.extractNodePath=function(e){if(!Mr(e))return null;try{return e.match(/^(.+?)(\/\{.*)?$/)[1]}catch(e){return null}},Ur.prototype.removeNodeByPath=function(e,t){var r=e.findIndex((function(e){return e.path===t}));-1!==r&&e.splice(r,1)},Ur.prototype.filterNodesByChild=function(e,t){for(var r={},o=e.length-1;0<=o;r={$jscomp$loop$prop$a$224$399:r.$jscomp$loop$prop$a$224$399},o--){r.$jscomp$loop$prop$a$224$399=e[o];var i=t.some(function(e){return function(t){return e.$jscomp$loop$prop$a$224$399.path.includes(t.getNodeName())}}(r)),s=r.$jscomp$loop$prop$a$224$399.path.includes(n.DEFAULT_TAG_NODE);!i&&s&&e.splice(o,1)}},Ur.prototype.handleChildTagNodeDelete=function(e,t,r){if(e=e.path.split("/")[4],!Lr(e)){e=n.DEFAULT_TAG_NODE+"/"+e;for(var o={},i=t.length-1;0<=i;o={$jscomp$loop$prop$a$229$401:o.$jscomp$loop$prop$a$229$401},i--){var s=t[i];s.path.includes(e)&&(o.$jscomp$loop$prop$a$229$401=s.path.split("/")[5],Pr(o.$jscomp$loop$prop$a$229$401)&&r.every(function(e){return function(t){return t.getNodeName()!==e.$jscomp$loop$prop$a$229$401}}(o))&&t.splice(i,1))}}},Ur.prototype.setNodeList=function(e){var t=this;if(!this.isInitialized)throw Error("Store not initialized");if(!Lr(e)){var r=this.store.get(n.NODE_LIST_STORAGE_KEY);if(Lr(r))return void this.store.set(n.NODE_LIST_STORAGE_KEY,e.toArrayBuffer());var o=(r=Dr.decode(this.store.get(n.NODE_LIST_STORAGE_KEY))).getNodes();e.getNodes().forEach((function(e){var r=o.findIndex((function(t){return t.path===e.path})),i=e.path===n.DEFAULT_TAG_NODE,s=e.path.includes(n.DEFAULT_TAG_NODE+"/");if(0>r){if(o.push(e),i||s)return}else o.splice(r,1,e);e.deleted?o.splice(r,1):t.handleNodeDelete(e,o)})),this.store.set(n.NODE_LIST_STORAGE_KEY,r.toArrayBuffer())}};var jr=new Ur,kr=n.TAG,xr=function(){return this.name="AddressManager",this.items={},this.tagType=kr.ADDRESS,this};o.inherits(xr,h);var Fr=s.a.logger,Br=s.a.utils,Gr=Br.isNil,Vr=Br.isntNil,Hr=function(){this._httpMap=new Map,this._httpsMap=new Map};Hr.prototype.clearMaps=function(){this._httpMap.clear(),this._httpsMap.clear()},Hr.prototype._getProtocolMap=function(e){switch(e){case n.HTTP_PROTOCOL:case null:var t=this._httpMap;break;case n.HTTPS_PROTOCOL:t=this._httpsMap}return t},Hr.prototype._getSubmapForKey=function(e,t){var r=e.get(t);return Gr(r)&&(r=new Map,e.set(t,r)),r},Hr.prototype._addLoginIntoMap=function(e,t){e=e.getPath(),Vr(t.get(e))?Fr.error("Item to be added exists in the map"):t.set(e,!0)},Hr.prototype.addItemToMap=function(e){if(Gr(e))throw Error("addItemToMap did not get the right parameters");var t=e.getLoginURL(),r=this._getProtocolMap(s.a.utils.urlProtocol(t));if(!Gr(r)){var n=s.a.utils.getUrlTLD(t);if(t=s.a.utils.getCompanyDomain(t),!Gr(n)||!Gr(t)){if(Gr(n))return r=this._getSubmapForKey(r,t),void this._addLoginIntoMap(e,r);r=this._getSubmapForKey(r,n),r=this._getSubmapForKey(r,t),this._addLoginIntoMap(e,r)}}},Hr.prototype._removePathFromProtocolMap=function(e,t,r){try{var n=s.a.utils.getCompanyDomain(r),o=!1;return e.forEach((function(e){e.forEach((function(e,i){e.has(t)&&((Gr(r)||""===r||i!==n)&&e.delete(t),o=!0)}))})),o}catch(e){return Fr.debug("Error:: deleting path from protocolMap",e),!1}},Hr.prototype._processURLUpdateOrDelete=function(e,t){this._removePathFromProtocolMap(this._httpsMap,e,t)||this._removePathFromProtocolMap(this._httpMap,e,t)},Hr.prototype.removeItemFromMap=function(e){if(Gr(e))throw Error("removeItemFromMap did not get the right parameters");var t=e.getLoginURL();e=e.getPath(),this._processURLUpdateOrDelete(t,e);var r=this._getProtocolMap(s.a.utils.urlProtocol(t));if(!Gr(r)){var n=s.a.utils.getUrlTLD(t);if(t=s.a.utils.getCompanyDomain(t),!r.has(n))return void Fr.info("Item not found");var o=r.get(n);if(!o.has(t))return void Fr.info("Item not found");var i=o.get(t);i.has(e)?(i.delete(e),0===i.size&&(o.delete(t),0===o.size&&r.delete(n))):Fr.info("Item not found")}},Hr.prototype.rawSearch=function(e){var t=s.a.utils.getUrlTLD(e),r=s.a.utils.getCompanyDomain(e);return Gr(t)||Gr(r)?(Fr.info("Item not found"),null):(e=this._getProtocolMap(s.a.utils.urlProtocol(e)),Gr(e)?null:e.has(t)&&(t=e.get(t)).has(r)?t.get(r):(Fr.info("Item not found"),null))};var Wr=new Hr,Yr=s.a.utils.isNil,Kr=function(e,t){if(Yr(e))throw Error("State cannot be null");this.state=e,this.additionalInfo=t};Kr.prototype.getState=function(){return this.state},Kr.prototype.getAdditionalInfo=function(){return this.additionalInfo};var zr=s.a.utils.isNil,qr=function(e,t){if(zr(e))throw Error("State cannot be null");this.state=e,this.passwordHint=t};qr.prototype.getVaultState=function(){return this.state},qr.prototype.getPasswordHint=function(){return this.passwordHint};var $r=s.a.logger,Xr=s.a.utils,Jr=Xr.isntNil,Zr=Xr.isNil,Qr=S.a,en=Qr.session,tn=Qr.spocManager,rn=function(){this.onRevisionUpdated=new Me};rn.prototype.startSPOC=function(){var e=this,t=en.getUserID();Zr(t)&&$r.error("startSPOC :: entityID is nil");var r=t.toString(),n=S.a.proto.spoc.SPOCChannel.SC_DATASTORE_UPDATE;tn.poll(r,n,(function(t,o){Jr(o)&&$r.error(o),e.revisionNumber=t,e.spocIdentity=tn.makeSpocRequest(r,n,(function(t,r,n){return e.bumpSpocRevisionNumber(t.revisionNumber)&&e.onRevisionUpdated.trigger({revisionNumber:t.revisionNumber,toRevision:r,appId:n}),!0}),e.revisionNumber)}))},rn.prototype.stopSPOC=function(){if(!this.isStarted())return $r.error("The spoc connection is not registered"),!1;var e=tn.cancelSPOCRequest(this.spocIdentity);return e&&(this.spocIdentity=null),e},rn.prototype.isStarted=function(){return Jr(this.spocIdentity)},rn.prototype.bumpSpocRevisionNumber=function(e){return this.revisionNumber!==e&&(this.revisionNumber=e,!0)},rn.prototype.resetRevisionNumber=function(){this.revisionNumber=null};var nn=new rn,on=s.a.logger,sn=s.a.utils,an=sn.isNil,un=sn.isntNil,ln=sn.isSuccessCode,cn=sn.isObject,dn=S.a,fn=dn.oxygen,pn=dn.session,hn=dn.utils,_n=dn.constants,En=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Node,gn=s.a.constants.httpStatusCodes,mn=n.vaultManager,yn=mn.stateInfo,Sn=mn.state,Tn=function(e){var t=e.vaultKeys,r=e.vaultUtils,n=e.telemetryWrapper;this.appNode=e.appNode,this.vaultKeys=t,this.vaultUtils=r,this.telemetryWrapper=n,this.state={LOAD_FROM_CLOUD:1,LOADED:2,INTERNAL_ERROR:3,NETWORK_ERROR:4,HANDLING_CHALLENGE:5,CLIENT_UNAUTHORIZED:6,READING_NODES:7,DECRYPTING_NODES:8,VAULT_SYNCED:9,GETTING_LOCAL_CHANGES:10,ENCRYPTING_NODES:11,UPLOADING_TO_CLOUD:12,MERGE_NODES:13,NOT_LOGGED_IN:14,VAULT_LOCKED:15,VAULT_FOUND:16,VAULT_NOT_FOUND:17,SSO_UNAUTHORIZED:18,VAULT_CREATED:19,O2_RATE_LIMITED_ERROR:20,VAULT_DELETED:21,VAULT_PASSWORD_CHANGED:22},this.reasonCloseVault={NOT_NEEDED:0,VAULT_PASSWORD_CHANGED:1,VAULT_DELETED:2},this.onUpdated=new Me,this.onClosed=new Me,this.onDeleted=new Me,this.onUpdateFailed=new Me,this.internalSpoc=!0};Tn.prototype.initialize=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){if(void 0===s.a||null===s.a)throw on.log("Bfw is not available"),Error("Bfw is not available");if(void 0===S.a||null===S.a)throw on.log("SymO2 is not available"),Error("SymO2 is not available");if(null==T)throw on.log("forge is not available"),Error("forge is not available");if(!cn(e))throw Error("options must be an object");return r.return((un(e.sdk_spoc)&&!1===e.sdk_spoc?(on.log("internal spoc disabled"),t.internalSpoc=!1):nn.onRevisionUpdated.addListener((function(e){t._spocDatastoreCallback(e.toRevision,e.appId)})),!0))}))},Tn.prototype.postSyncSetup=function(){throw Error("not implemented")},Tn.prototype.getMainNodeId=function(){throw Error("not implemented")},Tn.prototype.isNALoggedIn=function(){return o.asyncExecutePromiseGeneratorProgram((function(e){return e.return(new Promise((function(e){pn.isLoggedIn((function(t){return e(t)}))})))}))},Tn.prototype._checkVault=function(e,t,r,n){var i,s,a=this;return o.asyncExecutePromiseGeneratorProgram((function(u){i=[a.getMainNodeId()],a.maxRetryCount=2,s=a,pn.isLoggedIn((function(u){var l=null;if(!1!==u){var c=function(u,d,f){var p,h,_,E,g;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress)return u===Sn.INTERNET_UNAVILABLE?(setTimeout((function(){l=new Kr(Sn.INTERNET_UNAVILABLE,yn.INTERNET_UNAVAILABLE),n({state:l,error:yn.INTERNET_UNAVAILABLE})}),1),o.jumpTo(0)):u===gn.UNAUTHORIZED&&an(f)||u===gn.BAD_REQUEST?(setTimeout((function(){l=new Kr(Sn.SSO_UNAUTHORIZED,yn.SSO_UNAUTHORIZED),n({state:l,error:null})}),1),o.jumpTo(0)):u===gn.DATASTORE_RATE_LIMITED?(setTimeout((function(){l=new Kr(Sn.O2_RATE_LIMITED_ERROR,yn.O2_RATE_LIMITED_ERROR),n({state:l,error:null})}),1),o.jumpTo(0)):u===gn.UNAUTHORIZED&&t?0===s.maxRetryCount?o.return(void setTimeout((function(){l=new Kr(Sn.CLIENT_UNAUTHORIZED,yn.HANDLE_CHALLENGE_FAILED),n({state:l,error:null})}),1)):(yr.parseNodeList(d,!1),p=f[_n.header.CHALLENGES],h=hn.stringToChallengeList(p),o.yield(a.vaultUtils.handleChallenge(e,h),6)):o.jumpTo(5);if(5!=o.nextAddress)return _=o.yieldResult,an(_)?o.return((l=new Kr(Sn.INTERNAL_ERROR,yn.GENERATE_DECRYPT_KEY_ERROR),void n({state:l,error:null}))):(E=hn.challengeListToString(_),g={},o.return((g[_n.header.CHALLENGES]=E,--s.maxRetryCount,void fn.getDatastorePaths(i,pn.getUserID(),c,!0,g,null,!0))));if(u===gn.GONE||u===gn.NOT_FOUND)return o.return((l=new Kr(Sn.VAULT_NOT_FOUND,yn.VAULT_NOT_FOUND),void n({state:l,error:null})));if(ln(u)){s.maxRetryCount=2,l=new Kr(Sn.READING_NODES,yn.READING_NODES);try{yr.parseNodeList(d)}catch(e){on.error(e)}return o.return(a.appNode.isEmpty()?(l=new Kr(Sn.VAULT_NOT_FOUND,yn.VAULT_NOT_FOUND),void n({state:l,error:null})):void r())}l=new Kr(Sn.NETWORK_ERROR,yn.NETWORK_ERROR),n({state:l,error:null}),o.jumpToEnd()}))};l=new Kr(Sn.LOAD_FROM_CLOUD,yn.LOAD_FROM_CLOUD),fn.getDatastorePaths(i,pn.getUserID(),c,t,null,null,!0)}else setTimeout((function(){l=new Kr(Sn.SSO_UNAUTHORIZED,yn.SSO_UNAUTHORIZED),n({state:l,error:null})}),1)})),u.jumpToEnd()}))},Tn.prototype._getVaultEncryptionBuffer=function(e,t,r,i,s){var a,u,l=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(an(e)){if(l.vaultKeys.isSeamlessVaultUnlockEnabled())return o.return(l.vaultKeys.getEncryptionKey());throw Error("Enable seamless vault unlock to unlock without vault password")}return o.yield(l.vaultUtils.generateVaultDecryptionKey(e,t),2)}if(a=o.yieldResult,an(a))throw Error(yn.GENERATE_DECRYPT_KEY_ERROR);if(u=l.vaultUtils.decryptEnvelopeData(r,a,i,s,n.SERIALIZE_DATA_TYPE.BINARY,!1),an(u)&&null!=l.telemetryWrapper)throw l.telemetryWrapper.sendIDSCryptoError("Unable to decrypt vault key",l.telemetryWrapper.IDS_CRYPTO_ERROR_CONSTANTS.UNABLE_TO_DECRYPT_ITEM),Error(yn.DECRYPT_VAULT_KEY_ERROR);return o.return(u)}))},Tn.prototype._handleServerErrors=function(e){return e===gn.UNAUTHORIZED?new Kr(Sn.CLIENT_UNAUTHORIZED,yn.UNAUTHORIZED):new Kr(Sn.NETWORK_ERROR,yn.NETWORK_ERROR)},Tn.prototype.deleteVault=function(){var e,t,r,n=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress)return o.yield(n.isNALoggedIn(),2);if(3!=o.nextAddress){if(!o.yieldResult)throw Error(yn.SSO_UNAUTHORIZED);return(e=new En).setPath(n.getMainNodeId()),e.setDeleted(!0),o.yield(Cr.uploadNodes([e],null,!1),3)}return t=o.yieldResult,r=t.status,o.return(ln(r)?new Kr(Sn.VAULT_DELETED,yn.VAULT_DELETED):n._handleServerErrors(r))}))},Tn.prototype._checkCloseVaultNeeded=function(e){for(var t in e=e.getNodes())if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(r.path===this.getMainNodeId()){if(0===(r=r.getValues()).length)return this.reasonCloseVault.VAULT_DELETED;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var o=r[n];if(o.name===this.appNode.getChallengeSaltName())return hn.createStringBufferFromUint8Buffer(o.data_binary.toArrayBuffer())!==hn.createStringBufferFromUint8Buffer(this.appNode.challengeSalt)?this.reasonCloseVault.VAULT_PASSWORD_CHANGED:this.reasonCloseVault.NOT_NEEDED}}}return this.reasonCloseVault.NOT_NEEDED},Tn.prototype._canCallDataStore=function(e){if(an(e))return!0;var t=this.getMainNodeId();return e.toString()===t.slice(1)},Tn.prototype.getDatastorePaths=function(e,t){var r=this,n=pn.getUserID();an(n)&&on.error("getDatastorePaths :: entityID is nil");var i=!this.vaultKeys.isLocked();fn.getDatastorePaths(t,n,(function(e,t,n,i){var s,a,u,l;return o.asyncExecutePromiseGeneratorProgram((function(n){if(e!==gn.NOT_MODIFIED&&e!==gn.NOT_FOUND&&e!==gn.GONE)if(ln(e)){if(s=r._checkCloseVaultNeeded(t),a=s===r.reasonCloseVault.VAULT_DELETED,u=s===r.reasonCloseVault.VAULT_PASSWORD_CHANGED,!0===a||!0===u)return n.return(void(a?(on.log("Vault has been deleted. Logging out of Vault"),r.onDeleted.trigger()):(on.log("Vault password has been changed. Logging out of Vault"),r.onClosed.trigger())));l=yr.parseNodeList(t),r.postSyncSetup(),r.onUpdated.trigger(l)}else on.error("SPOCBump:getDatastorePaths failed, status: "+e),r.onUpdateFailed.trigger();n.jumpToEnd()}))}),i,null,e)},Tn.prototype.checkIfVaultLocked=function(){throw Error("not implemented")},Tn.prototype._spocDatastoreCallback=function(e,t){return this._canCallDataStore(t)&&(t=[this.getMainNodeId()],this.getDatastorePaths(e,t)),!0},Tn.prototype.ProcessSpoc=function(e,t,r){if(this.checkIfVaultLocked(),this.internalSpoc)throw Error("External Spoc disabled, use initialize API to enable");nn.bumpSpocRevisionNumber(e.revisionNumber)&&this.getDatastorePaths(e.revisionNumber,r)},Tn.prototype.spocCallbackFirebase=function(e,t){if(an(t))return this.ProcessSpoc({revisionNumber:e},null,[this.getMainNodeId()]),void nn.resetRevisionNumber();(t=t.map((function(e){return"/"+e}))).includes(this.getMainNodeId())&&this.ProcessSpoc({revisionNumber:e},null,t)};var An=s.a.logger,bn=s.a.utils,On=bn.isNil,In=bn.isntNil,vn=bn.isSuccessCode,Nn=bn.isString,Rn=bn.objectHas,Cn=S.a,Dn=Cn.oxygen,wn=Cn.session,Ln=Cn.utils,Pn=Cn.constants,Mn=Cn.cookieManager,Un=s.a.constants.httpStatusCodes,jn=n.vaultManager,kn=jn.stateInfo,xn=jn.state,Fn=function(){var e=Tn.call(this,{appNode:L,vaultUtils:Se,vaultKeys:F,telemetryWrapper:X})||this;return e.vaultBeingCreated=!1,e.LOGIN_MANAGER="LoginManager",e.ADDRESS_MANAGER="AddressManager",e.IDENTITY_MANAGER="IdentityManager",e.CREDIT_CARD_MANAGER="CreditCardManager",e.BANK_ACCOUNT_MANAGER="BankAccountManager",e.NOTE_MANAGER="NoteManager",e.CONTACT_MANAGER="ContactManager",e.ASSOCIATED_URL_MANAGER="AssociatedUrlManager",e.LOGIN_HISTORY_MANAGER="LoginHistoryManager",e.AUTHENTICATOR_MANAGER="AuthenticatorManager",e.FILE_MANAGER="FileManager",e.DELETED_UNKNOWN_BREACH_MANAGER="DeletedUnknownBreachManager",e.PASSWORD_BREACHES_MANAGER="PasswordBreachesManager",e.LOGIN_IGNORED_BREACHES_MANAGER="LoginIgnoredBreachesManager",e.BULK_UPLOAD_MANAGER="BulkUploadManager",e.TAG_MANAGER="TagManager",e.TAG_ITEM_MANAGER="TagItemManager",e};o.inherits(Fn,Tn),Fn.prototype.getMainNodeId=function(){return n.DEFAULT_APPID_NODE},Fn.prototype.initialize=function(e){var t,r=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return o.yield(Tn.prototype.initialize.call(r,e),2);case 2:if(In(e.appNodeID)&&(n.DEFAULT_APPID_NODE="/"+e.appNodeID,r.initCryptoParams(e.pbkdf2MD)),!In(e.keyStore))throw Error("Key Store option is mandatory");return F.initialize(e.keyStore),In(e.persistentStore)?o.yield(jr.initialize(e.persistentStore),6):o.yield(jr.initialize(e.keyStore),5);case 5:o.jumpTo(4);break;case 6:case 4:return jr.hasNodeList()&&!F.isLocked()&&(t=jr.getNodeList(),yr.parseNodeList(t,!1),r.postSyncSetup()),o.return(!0)}}))},Fn.prototype.initCryptoParams=function(e){e=In(e)?e:Se.isNode11()?n.DEFAULT_SHA1:n.DEFAULT_PBKDF2_MD;var t={};t=(t[n.DEFAULT_PBKDF2_MD]={SHA:n.DEFAULT_HMAC_SHA_ALGORITHM,SHA_DIGEST_SIZE:n.DEFAULT_SHA_DIGEST},t[n.DEFAULT_SHA1]={SHA:n.DEFAULT_SHA1,SHA_DIGEST_SIZE:n.DEFAULT_SHA1_DIGEST},t)[e]||{},m.setCryptoParams(e,t.SHA,t.SHA_DIGEST_SIZE)},Fn.prototype.loadCookieManager=function(){return o.asyncExecutePromiseGeneratorProgram((function(e){return e.return(new Promise((function(e,t){S.a.cookieManager.load((function(r,n){if(!r)return An.error("Could not load cookie manager "+n.toString()),void t("Could not load cookie manager "+n.toString());e("Cookie Manager loaded successully")}))})))}))},Fn.prototype.seamlessOpenVault=function(e){var t,r=this;return o.asyncExecutePromiseGeneratorProgram((function(n){return 1==n.nextAddress?(r._prepareForSeamless(e),n.yield(r.loadCookieManager(),2)):3!=n.nextAddress?n.yield(r._checkAndConstructVault(null,!0),3):(t=n.yieldResult,n.return((F.setSeamlessVaultUnlockState(!1),t)))}))},Fn.prototype.openVault=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){if(1==r.nextAddress){if(On(e))throw Error("Vault password cannot be null");return r.yield(t.loadCookieManager(),2)}return r.return(t._checkAndConstructVault(e,!0))}))},Fn.prototype._checkAndConstructVault=function(e,t){var r=this;return o.asyncExecutePromiseGeneratorProgram((function(i){return i.return(new Promise((function(i,s){var a=function(e){e.state.getState()===xn.CLIENT_UNAUTHORIZED&&(F.setLocked(!0),setTimeout((function(){X.sendIDSCryptoError("Unable to answer a challenge",X.IDS_CRYPTO_ERROR_CONSTANTS.UNABLE_TO_ANSWER_CHALLENGE)}))),i(e)};r._checkVault(e,t,(function(){var s,u,l,c,d,f,p,h,_,E,g,m;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(!t)return s=new Kr(xn.VAULT_FOUND,kn.VAULT_FOUND),o.return(void i({state:s,error:null}));if(u=new Kr(xn.LOADED,kn.LOADED),l=ie.getEncryptionKey(),c=ie.getObfuscationKey(),d=ie.getPBDKSalt(),f=Ln.createStringBufferFromUint8Buffer(d),p=n.DEFAULT_IDSC_PATH_CRC+n.DEFAULT_APPID_IDSC_NODE,h=null,F.isSeamlessVaultUnlockEnabled()){h=F.getEncryptionKey(),o.jumpTo(2);break}return o.setCatchFinallyBlocks(3),o.yield(r._getVaultEncryptionBuffer(e,f,l,p,n.DEFAULT_VAULT_ENCRYPTION_KEY),5);case 5:h=o.yieldResult,o.leaveTryBlock(2);break;case 3:return _=o.enterCatchBlock(),o.return(void a({state:new Kr(xn.INTERNAL_ERROR,_.message),error:null}));case 2:if(On(h))throw Error("Encryption key cannot be null");if(On(h.buffer))return E=new Kr(h.state,h.additionalInfo),o.return(void a({state:E,error:null}));if(g=Se.decryptEnvelopeData(c,h,p,n.DEFAULT_VAULT_OBFUSCATION_KEY,n.SERIALIZE_DATA_TYPE.BINARY),On(g))return o.return((X.sendIDSCryptoError("Unable to decrypt obfuscationKey",X.IDS_CRYPTO_ERROR_CONSTANTS.UNABLE_TO_OBFUSCATE_ITEM),u=new Kr(xn.INTERNAL_ERROR,kn.DECRYPT_OBFUSCATION_KEY_ERROR),void a({state:u,error:null})));g=g.buffer,F.updateVaultKeyStore(h,e,g,!1),u=new Kr(xn.DECRYPTING_NODES,kn.DECRYPTING_NODES);try{r.postSyncSetup()}catch(e){An.error(e)}m=r.getItemManager(r.LOGIN_MANAGER),X.sendIDSVaultStatistics(X.IDSVAULT_LABEL.SIZE,Object.keys(m.items).length),u=new Kr(xn.VAULT_SYNCED,kn.VAULT_SYNCED_DECRYPTED),r.addListeners(),r.internalSpoc&&r.startSPOC(),i({state:u,error:null}),o.jumpToEnd()}}))}),a)})))}))},Fn.prototype.forceSync=function(){var e=this;return o.asyncExecutePromiseGeneratorProgram((function(t){return t.return(new Promise((function(t,r){var i=n.performanceReporter.TYPE.FORCE_SYNC_VAULT+":"+Date.now();if(s.a.performanceReporterFactory.reportStartForComponent(n.performanceReporter.COMPONENT.VAULTSDK,i),F.isLocked())return r(new Kr(xn.VAULT_LOCKED,kn.VAULT_LOCKED_CANNOT_SYNC));Dn.getDatastorePaths([n.DEFAULT_APPID_NODE],wn.getUserID(),(function(r,a,u,l){var c,d;return o.asyncExecutePromiseGeneratorProgram((function(o){return 1==o.nextAddress?(c=null,!1===vn(r)?(c=r===Un.UNAUTHORIZED?new Kr(xn.CLIENT_UNAUTHORIZED,kn.UNAUTHORIZED):new Kr(xn.NETWORK_ERROR,kn.NETWORK_ERROR),d=JSON.stringify(c),o.return((X.sendIDSVaultMerge(d),t(c)))):o.yield(e.clearItems(),2)):o.return((yr.parseNodeList(a),e.postSyncSetup(),c=new Kr(xn.VAULT_SYNCED,kn.VAULT_SYNCED),s.a.performanceReporterFactory.reportStopForComponent(n.performanceReporter.COMPONENT.VAULTSDK,i),t(c)))}))}),!0,null,null,!0)})))}))},Fn.prototype.getItemManager=function(e){switch(e){case this.LOGIN_MANAGER:return On(this.loginManager)&&(this.loginManager=new cr),this.loginManager;case this.CREDIT_CARD_MANAGER:return On(this.creditCardManager)&&(this.creditCardManager=new pt),this.creditCardManager;case this.BANK_ACCOUNT_MANAGER:return On(this.bankAccountManager)&&(this.bankAccountManager=new qe),this.bankAccountManager;case this.ADDRESS_MANAGER:return On(this.addressManager)&&(this.addressManager=new xr),this.addressManager;case this.IDENTITY_MANAGER:return On(this.identityManager)&&(this.identityManager=new Vn),this.identityManager;case this.NOTE_MANAGER:return On(this.noteManager)&&(this.noteManager=new xt),this.noteManager;case this.CONTACT_MANAGER:return On(this.contactManager)&&(this.contactManager=new Xn),this.contactManager;case this.ASSOCIATED_URL_MANAGER:return On(this.associatedUrlManager)&&(this.associatedUrlManager=new no),this.associatedUrlManager;case this.LOGIN_HISTORY_MANAGER:return On(this.loginHistoryManager)&&(this.loginHistoryManager=new co),this.loginHistoryManager;case this.AUTHENTICATOR_MANAGER:return On(this.authenticatorManager)&&(this.authenticatorManager=new mo),this.authenticatorManager;case this.FILE_MANAGER:return On(this.fileManager)&&(this.fileManager=new Io),this.fileManager;case this.DELETED_UNKNOWN_BREACH_MANAGER:return On(this.deletedUnknownBreachManager)&&(this.deletedUnknownBreachManager=new Lo),this.deletedUnknownBreachManager;case this.PASSWORD_BREACHES_MANAGER:return On(this.passwordBreachesManager)&&(this.passwordBreachesManager=new Fo),this.passwordBreachesManager;case this.LOGIN_IGNORED_BREACHES_MANAGER:return On(this.loginIgnoredBreachesManager)&&(this.loginIgnoredBreachesManager=new Ko),this.loginIgnoredBreachesManager;case this.BULK_UPLOAD_MANAGER:return On(this.bulkUploadManager)&&(this.bulkUploadManager=new zo),this.bulkUploadManager;case this.TAG_MANAGER:return On(this.tagManager)&&(this.tagManager=new mi),this.tagManager;case this.TAG_ITEM_MANAGER:return On(this.tagItemManager)&&(this.tagItemManager=new Ri),this.tagItemManager;default:An.info("Do not support the item manager: "+e)}return null},Fn.prototype.clearItems=function(){var e=this;return o.asyncExecutePromiseGeneratorProgram((function(t){switch(t.nextAddress){case 1:return t.yield(e.getItemManager(e.LOGIN_MANAGER).deleteAllItems(!1),2);case 2:return t.yield(e.getItemManager(e.CREDIT_CARD_MANAGER).deleteAllItems(!1),3);case 3:return t.yield(e.getItemManager(e.BANK_ACCOUNT_MANAGER).deleteAllItems(!1),4);case 4:return t.yield(e.getItemManager(e.ADDRESS_MANAGER).deleteAllItems(!1),5);case 5:return t.yield(e.getItemManager(e.IDENTITY_MANAGER).deleteAllItems(!1),6);case 6:return t.yield(e.getItemManager(e.NOTE_MANAGER).deleteAllItems(!1),7);case 7:return t.yield(e.getItemManager(e.ASSOCIATED_URL_MANAGER).deleteAllItems(!1),8);case 8:return t.yield(e.getItemManager(e.LOGIN_HISTORY_MANAGER).deleteAllItems(!1),9);case 9:return t.yield(e.getItemManager(e.AUTHENTICATOR_MANAGER).deleteAllItems(!1),10);case 10:return t.yield(e.getItemManager(e.FILE_MANAGER).deleteAllItems(!1),11);case 11:return t.yield(e.getItemManager(e.DELETED_UNKNOWN_BREACH_MANAGER).deleteAllItems(!1),12);case 12:return t.yield(e.getItemManager(e.PASSWORD_BREACHES_MANAGER).deleteAllItems(!1),13);case 13:return t.yield(e.getItemManager(e.LOGIN_IGNORED_BREACHES_MANAGER).deleteAllItems(!1),14);case 14:return t.yield(e.getItemManager(e.TAG_MANAGER).deleteAllItems(!1),15);case 15:return t.yield(e.getItemManager(e.TAG_ITEM_MANAGER).deleteAllItems(!1),16);case 16:jr.removeNodeList(),t.jumpToEnd()}}))},Fn.prototype.resetVaultPassword=function(e,t,r){var n,i=this;return o.asyncExecutePromiseGeneratorProgram((function(o){return 1==o.nextAddress?(i._prepareForSeamless(e),o.yield(i.changeVaultPassword(null,t,r),2)):(n=o.yieldResult,o.return((F.setSeamlessVaultUnlockState(!1),n)))}))},Fn.prototype.changeVaultPassword=function(e,t,r){var i,s,a,u,l,c,d,f,p,h,_,E,g,m,y,S,A,b,O,I,v,N,R,C,D,w=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return o.yield(w.isNALoggedIn(),2);case 2:if(!o.yieldResult)throw Error(kn.SSO_UNAUTHORIZED);if(!0!==F.isSeamlessVaultUnlockEnabled()&&!1===Nn(e))throw Error("current Vault password cannot be null");if(!1===Nn(t))throw Error("new Vault password cannot be null");if(!1===Nn(r))throw Error("Password hint cannot be null");return o.yield(Se.createChallenge(t),3);case 3:return i=o.yieldResult,s=i.challenge,a=i.crcSalt,u=i.crcIV,l=Ln.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_CHALLENGE_SALT_SIZE)),c=Ln.createStringBufferFromUint8Buffer(F.getEncryptionKey()),d=Ln.createUInt8BufferFromStringBuffer(c),f=Ln.createStringBufferFromUint8Buffer(F.getObfuscationKey()),p=Ln.createUInt8BufferFromStringBuffer(f),o.yield(Se.generateVaultDecryptionKey(t,l),4);case 4:return h=o.yieldResult,_=n.DEFAULT_IDSC_PATH_CRC+n.DEFAULT_APPID_IDSC_NODE,E=Se.createEnvelopeAndEncryptData(d,p,n.SERIALIZE_DATA_TYPE.BINARY,_,n.DEFAULT_VAULT_OBFUSCATION_KEY),g=Se.createEnvelopeAndEncryptData(h,d,n.SERIALIZE_DATA_TYPE.BINARY,_,n.DEFAULT_VAULT_ENCRYPTION_KEY,!1),m=Se.calculateChecksum(0,l),y=Se.numberToUint8Buffer(m),(S=new Uint8Array(l.byteLength+y.byteLength)).set(l,0),S.set(y,l.byteLength),L.setPasswordHint(r),L.setLoginID((new Date).getTime()),L.setVaultVersion(n.CURRENT_VAULT_SDK_VERSION),ie.setEncryptionKey(g),ie.setObfuscationKey(E),ie.setPBDKSalt(S),ie.setLoginID((new Date).getTime()),o.yield(Cr.uploadNodes([L.serialize(),ie.serialize()],{"X-Symc-Challenge-Update":Ln.challengeListToString(s)},!1),5);case 5:if(A=o.yieldResult,b=A.status,O=A.responseHeaders,b!==Un.UNAUTHORIZED){o.jumpTo(6);break}try{Mn.removeAll()}catch(e){An.log("cookieManager.removeAll thrown exception as "+e.message)}return o.yield(w.loadCookieManager(),7);case 7:return I=O[Pn.header.CHALLENGES],v=Ln.stringToChallengeList(I),o.yield(Se.handleChallenge(e,v),8);case 8:return N=o.yieldResult,On(N)?o.return(new Kr(w.state.INTERNAL_ERROR,kn.GENERATE_DECRYPT_KEY_ERROR)):(R=N.getChallenges(),On(R)||1>R.length?o.return(new Kr(w.state.INTERNAL_ERROR,kn.GENERATE_DECRYPT_KEY_ERROR)):(C=R[0],s.setDecryptedChallenge(C.getDecryptedChallenge()),s.setSessionId(C.getSessionId()),L.setChallengeIV(u),L.setChallengeSalt(a),o.yield(Cr.uploadNodes([L.serialize(),ie.serialize()],{"X-Symc-Challenge-Update":Ln.challengeListToString(s)},!1),9)));case 9:var P=o.yieldResult;if(b=P.status,O=P.responseHeaders,!vn(b)){o.jumpTo(10);break}return F.setLocked(!1),F.setEncodedVaultPassword(t),F.setChallengePrivateKey(null),D=new Kr(w.state.VAULT_PASSWORD_CHANGED,kn.VAULT_PASSWORD_CHANGED),o.yield(w._checkAndConstructVault(t,!0),11);case 11:return o.return(D);case 10:case 6:return o.return(w._handleServerErrors(b))}}))},Fn.prototype.createVault=function(e,t){var r,i,a,u,l,c,d,f,p,h,_,E,g,m,y,S,A,b,O,I,v,N=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return o.yield(N.isNALoggedIn(),2);case 2:if(!o.yieldResult)throw Error(kn.SSO_UNAUTHORIZED);if(!1===Nn(e))throw Error("Vault password cannot be null");if(!1===Nn(t))throw Error("Password hint cannot be null");if(o.setCatchFinallyBlocks(3),!0===N.vaultBeingCreated)throw Error("Vault is already being created");return N.vaultBeingCreated=!0,o.yield(N.loadCookieManager(),5);case 5:return o.yield(Se.createChallenge(e),6);case 6:return r=o.yieldResult,i=r.challenge,a=r.crcSalt,u=r.crcIV,l=Ln.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_CHALLENGE_SALT_SIZE)),c=Ln.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_DERIVED_AES_KEY_SIZE+n.DEFAULT_HMAC_SIZE)),d=Ln.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_OBFUSCATION_KEY_SIZE)),o.yield(Se.generateVaultDecryptionKey(e,l),7);case 7:return f=o.yieldResult,p=n.DEFAULT_IDSC_PATH_CRC+n.DEFAULT_APPID_IDSC_NODE,h=Se.createEnvelopeAndEncryptData(c,d,n.SERIALIZE_DATA_TYPE.BINARY,p,n.DEFAULT_VAULT_OBFUSCATION_KEY),_=Se.createEnvelopeAndEncryptData(f,c,n.SERIALIZE_DATA_TYPE.BINARY,p,n.DEFAULT_VAULT_ENCRYPTION_KEY,!1),E=Se.calculateChecksum(0,l),g=Se.numberToUint8Buffer(E),(m=new Uint8Array(l.byteLength+g.byteLength)).set(l,0),m.set(g,l.byteLength),y=Se.configureCryptoAlgorithm(),L.setPasswordHint(t),L.setCryptoAlgorithm(y),L.setChallengeIV(u),L.setChallengeSalt(a),L.setProfileID("{"+s.a.utils.createNewGuid()+"}"),L.setLoginID((new Date).getTime()),L.setVaultVersion(n.CURRENT_VAULT_SDK_VERSION),ie.setEncryptionKey(_),ie.setObfuscationKey(h),ie.setPBDKSalt(m),ie.setLoginID((new Date).getTime()),S={"X-Symc-Challenge-Update":Ln.challengeListToString(i)},o.yield(Cr.uploadNodes([L.serialize(),ie.serialize()],S,!1),8);case 8:if(A=o.yieldResult,b=A.status,N.vaultBeingCreated=!1,!vn(b)){o.jumpTo(9);break}return F.setEncryptionKey(c),F.setObfuscationKey(d),F.setLocked(!1),F.setEncodedVaultPassword(e),O=new Kr(xn.VAULT_CREATED,kn.VAULT_CREATED),o.yield(N._checkAndConstructVault(e,!0),10);case 10:return I=o.yieldResult,o.return(I.state.getState()===xn.VAULT_SYNCED?O:I.state);case 9:return o.return(N._handleServerErrors(b));case 3:throw v=o.enterCatchBlock(),N.vaultBeingCreated=!1,v}}))},Fn.prototype.closeVault=function(){var e,t,r=this;return o.asyncExecutePromiseGeneratorProgram((function(n){switch(n.nextAddress){case 1:return n.yield(r.isNALoggedIn(),2);case 2:if(!n.yieldResult)throw Error(kn.SSO_UNAUTHORIZED);n.setCatchFinallyBlocks(3);try{S.a.cookieManager.removeAll()}catch(e){An.error(e)}if(e=new Kr(xn.VAULT_LOCKED,kn.VAULT_CLOSED),F.isLocked()){n.jumpTo(5);break}return n.yield(r.clearItems(),6);case 6:F.setLocked(!0),r.stopSPOC();case 5:return n.return(e);case 3:return t=n.enterCatchBlock(),n.return((An.log(t),new Kr(xn.INTERNAL_ERROR,kn.VAULT_CLOSE_FAILED)))}}))},Fn.prototype.fetchVaultInfo=function(){var e,t,r,n,i,s=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress)return o.yield(s._checkAndConstructVault(null,!1),2);switch(e=o.yieldResult,t=e.state,n=null,t.getState()){case xn.VAULT_FOUND:r=!0;break;case xn.VAULT_NOT_FOUND:r=!1;break;case xn.NETWORK_ERROR:case xn.NOT_LOGGED_IN:case xn.O2_RATE_LIMITED_ERROR:case xn.SSO_UNAUTHORIZED:n=Error(t.getAdditionalInfo()),An.error(n),r=!1;break;default:return o.return((An.log(t.getAdditionalInfo()),new qr(t,null)))}return i=null,o.return((!0===r&&(i=L.getPasswordHint()),X.sendIDSVaultStatistics(X.IDSVAULT_LABEL.AVAILABILITY,!0===r?1:0),new qr(t,i)))}))},Fn.prototype.checkIfVaultLocked=function(){if(this.vaultKeys.isLocked())throw Error(kn.VAULT_LOCKED_CANNOT_SYNC)},Fn.prototype._prepareForSeamless=function(e){if(!Rn(e,"encryptionKey"))throw Error("encryption key needs to be wrapped in an object");var t=Rn(e,"challengeKey"),r=Rn(e,"challengePrivateKey");if(!t&&!r)throw Error("Either challengePrivateKey or challengeKey key needs to be wrapped in an object");if(t=e.encryptionKey,!Nn(t))throw Error("Encryption key needs to be passed as base64 string");if(t=Ln.createUInt8BufferFromStringBuffer(T.util.decode64(t)),F.setEncryptionKey(t),In(e.challengeKey)){if(t=e.challengeKey,!Nn(t))throw Error("Challenege key needs to be passed as base64 string");t=T.util.decode64(t),F.setChallengeKey(t)}if(In(e.challengePrivateKey)){if(e=e.challengePrivateKey,!Nn(e))throw Error("Challenege private key needs to be passed as base64 string");e=Ln.createUInt8BufferFromStringBuffer(T.util.decode64(e)),F.setChallengePrivateKey(e)}F.isSeamlessVaultUnlockEnabled()||F.setSeamlessVaultUnlockState(!0)},Fn.prototype.startSPOC=function(){if(F.isLocked())throw Error(kn.VAULT_LOCKED_CANNOT_SYNC);nn.startSPOC()},Fn.prototype.addListeners=function(){this.onUpdated.addListener(this.sendUpdatedTelemetry),this.onClosed.addListener(this.onClosedOrDeleted),this.onDeleted.addListener(this.onClosedOrDeleted)},Fn.prototype.postSyncSetup=function(){this.getItemManager(this.LOGIN_MANAGER).postSyncSetup(),this.getItemManager(this.CREDIT_CARD_MANAGER).postSyncSetup(),this.getItemManager(this.BANK_ACCOUNT_MANAGER).postSyncSetup(),this.getItemManager(this.ADDRESS_MANAGER).postSyncSetup(),this.getItemManager(this.IDENTITY_MANAGER).postSyncSetup(),this.getItemManager(this.NOTE_MANAGER).postSyncSetup(),this.getItemManager(this.ASSOCIATED_URL_MANAGER).postSyncSetup(),this.getItemManager(this.LOGIN_HISTORY_MANAGER).postSyncSetup(),this.getItemManager(this.AUTHENTICATOR_MANAGER).postSyncSetup(),this.getItemManager(this.FILE_MANAGER).postSyncSetup(),this.getItemManager(this.DELETED_UNKNOWN_BREACH_MANAGER).postSyncSetup(),this.getItemManager(this.PASSWORD_BREACHES_MANAGER).postSyncSetup(),this.getItemManager(this.LOGIN_IGNORED_BREACHES_MANAGER).postSyncSetup(),this.getItemManager(this.TAG_MANAGER).postSyncSetup(),this.getItemManager(this.TAG_ITEM_MANAGER).postSyncSetup()},Fn.prototype.stopSPOC=function(){return this.onUpdated.removeListener(this.sendUpdatedTelemetry),this.onClosed.removeListener(this.onClosedOrDeleted),this.onDeleted.removeListener(this.onClosedOrDeleted),nn.stopSPOC()},Fn.prototype.sendUpdatedTelemetry=function(e){X.sendLoginTelemetryFromSPOC(e)},Fn.prototype.onClosedOrDeleted=function(){Mn.removeAll()};var Bn=new Fn,Gn=n.TAG,Vn=function(){return this.name="IdentityManager",this.items={},this.tagType=Gn.IDENTITY,this};o.inherits(Vn,h);var Hn=s.a.logger,Wn=s.a.utils,Yn=Wn.isNil,Kn=Wn.isntNil,zn=Wn.isEmptyObject,qn=Wn.isSuccessCode,$n=Wn.isArray,Xn=function(){return this.name="ContactManager",this.items={},this};o.inherits(Xn,h),Xn.prototype.addItem=function(e,t){if(t=void 0===t||t,Bn.getItemManager(Bn.IDENTITY_MANAGER).addItem(e.identityItem,!1),Bn.getItemManager(Bn.ADDRESS_MANAGER).addItem(e.addressItem,!1),t)return Cr.uploadNodes([e.identityItem.clone().serializeNode(),e.addressItem.clone().serializeNode()],null)},Xn.prototype.addItems=function(e,t){var r,n,i,s,a,u,l,c,d,f,p;return t=void 0===t||t,o.asyncExecutePromiseGeneratorProgram((function(h){if(1==h.nextAddress){if(!$n(e))throw Error("Items must be an Array.");for(Yn(t)&&(t=!1),r=Bn.getItemManager(Bn.IDENTITY_MANAGER),n=Bn.getItemManager(Bn.ADDRESS_MANAGER),i=[],s=o.makeIterator(e),a=s.next();!a.done;a=s.next())u=a.value,l=u.identityItem,c=u.addressItem,r.addItem(l,!1),n.addItem(c,!1),i.push(l.clone().serializeNode(),c.clone().serializeNode());return!0!==t?h.jumpTo(0):h.yield(Cr.uploadNodes(i,null),3)}if(d=h.yieldResult,f=d.status,p=d.error,!qn(f))throw{status:f,error:p};h.jumpToEnd()}))},Xn.prototype.updateItems=function(e,t){var r,n,i,s,a,u,l,c,d,f,p;return t=void 0===t||t,o.asyncExecutePromiseGeneratorProgram((function(h){if(1==h.nextAddress){if(!$n(e))throw Error("Items must be an Array.");for(Yn(t)&&(t=!1),r=Bn.getItemManager(Bn.IDENTITY_MANAGER),n=Bn.getItemManager(Bn.ADDRESS_MANAGER),i=[],s=o.makeIterator(e),a=s.next();!a.done;a=s.next())u=a.value,l=u.identityItem,c=u.addressItem,r.updateItem(l,!1),n.updateItem(c,!1),i.push(l.clone().serializeNode(),c.clone().serializeNode());return!0!==t?h.jumpTo(0):h.yield(Cr.uploadNodes(i,null),3)}if(d=h.yieldResult,f=d.status,p=d.error,!qn(f))throw{status:f,error:p};h.jumpToEnd()}))},Xn.prototype.deleteItems=function(e,t){var r,n,i,s,a,u,l,c,d,f,p,h,_;return t=void 0===t||t,o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(!$n(e))throw Error("guids must be an array.");Yn(t)&&(t=!1),r=Bn.getItemManager(Bn.IDENTITY_MANAGER),n=Bn.getItemManager(Bn.ADDRESS_MANAGER),i=[],a=o.forIn(e);case 2:if(null==(s=a.getNext())){if(0===i.length)throw Hn.error("No item found to delete"),Error("No item found to delete");if(!0!==t){o.jumpTo(0);break}return o.yield(Cr.uploadNodes(i,null),9)}if(!Object.prototype.hasOwnProperty.call(e,s)){o.jumpTo(2);break}if(u=r.getItem(e[s]),l=u.getAddressGuid(),c=n.getItem(l),Yn(c)||Yn(u))throw Error("Invalid argument key to contactManager.deleteItems");return o.yield(r.removeTagItems([e[s]],t),6);case 6:return o.yield(n.removeTagItems([l],t),7);case 7:r.deleteItem(e[s],!1),n.deleteItem(l,!1),d=u.serializeNode(!0),f=c.serializeNode(!0),i.push(d),i.push(f),o.jumpTo(2);break;case 9:if(p=o.yieldResult,h=p.status,_=p.error,!qn(h))throw{status:h,error:_};o.jumpToEnd()}}))},Xn.prototype.deleteAllItems=function(e){e=void 0===e||e;var t,r=this;return o.asyncExecutePromiseGeneratorProgram((function(n){return Yn(e)&&(e=!1),t=Object.keys(r.getAllItems()),n.yield(r.deleteItems(t,e),0)}))},Xn.prototype.updateItem=function(e,t){if(t=void 0===t||t,Bn.getItemManager(Bn.IDENTITY_MANAGER).updateItem(e.identityItem,!1),Bn.getItemManager(Bn.ADDRESS_MANAGER).updateItem(e.addressItem,!1),t)return Cr.uploadNodes([e.identityItem.clone().serializeNode(),e.addressItem.clone().serializeNode()],null)},Xn.prototype.deleteItem=function(e,t){var r,n,i,s,a,u,l;return t=void 0===t||t,o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:if(r=Bn.getItemManager(Bn.IDENTITY_MANAGER),n=Bn.getItemManager(Bn.ADDRESS_MANAGER),i=r.getItem(e),s=i.getAddressGuid(),a=n.getItem(s),Yn(a)||Yn(i))throw Error("Invalid argument key to contactManager.deleteItem");return o.yield(r.removeTagItems([e],t),2);case 2:return o.yield(n.removeTagItems([s],t),3);case 3:if(r.deleteItem(e,!1),n.deleteItem(s,!1),u=i.serializeNode(!0),l=a.serializeNode(!0),!t){o.jumpTo(4);break}return o.yield(Cr.uploadNodes([u,l],null),5);case 5:case 4:o.jumpToEnd()}}))},Xn.prototype.search=function(e,t){var r,n,i,s,a,u,l,c,d,f,p,h;return o.asyncExecutePromiseGeneratorProgram((function(o){if(r=Bn.getItemManager(Bn.IDENTITY_MANAGER).getAllItems(),zn(r))return o.return((Hn.info("Empty identityItems"),null));if(n=Bn.getItemManager(Bn.ADDRESS_MANAGER),i=n.getAllItems(),zn(i))return o.return((Hn.info("Empty addressItems"),null));for(a in s=[],r)if(Object.prototype.hasOwnProperty.call(r,a)){if(u=r[a],!0===t&&(l=u.getFavorite(),Yn(l)||!1===l))continue;c=u.getAddressGuid(),d=n.getItem(c),Kn(d)&&(e=e.toLowerCase(),f=u.getCardName(),p=d.getCity(),h=u.getFirstName(),p=p||"",h=h||"",((f=f||"").toLowerCase().includes(e)||p.toLowerCase().includes(e)||h.toLowerCase().includes(e))&&s.push(a))}return o.return(s)}))},Xn.prototype.getItem=function(e){var t=new gt;return t.createItemFromKey(e),t},Xn.prototype.getAllItems=function(){this.items={};var e,t=Bn.getItemManager(Bn.IDENTITY_MANAGER).getAllItems();for(e in t)({}).hasOwnProperty.call(t,e)&&(this.items[e]=this.getItem(e));return this.items};var Jn=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,Zn=s.a.logger,Qn=n.ASSOCIATED_URL,eo=[n.DEFAULT_NODE_ID,Qn.ASSOCIATED_LOGIN_ID,Qn.ASSOCIATED_DOMAIN,Qn.LOGIN_URL,Qn.VISIBLE,Qn.LAST_USED_AT,n.DEFAULT_LASTUPDATE],to={path:n.DEFAULT_NODE_ID,associatedLoginId:Qn.ASSOCIATED_LOGIN_ID,associatedDomain:Qn.ASSOCIATED_DOMAIN,loginUrl:Qn.LOGIN_URL,visible:Qn.VISIBLE,lastUsedAt:Qn.LAST_USED_AT,lastUpdate:n.DEFAULT_LASTUPDATE},ro=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=to,e.keys=eo,e};o.inherits(ro,Pe),ro.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:Jn.TID_STRING,deserializedType:Jn.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:Jn.TID_UINT64,deserializedType:Jn.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.ASSOCIATED_URL.ASSOCIATED_LOGIN_ID:return{encrypted:!1,obfuscated:!1,serializedType:Jn.TID_STRING,deserializedType:Jn.TID_STRING,setter:this.setAssociatedLoginId,getter:this.getAssociatedLoginId};case n.ASSOCIATED_URL.ASSOCIATED_DOMAIN:return{encrypted:!0,obfuscated:!1,serializedType:Jn.TID_BINARY,deserializedType:Jn.TID_STRING,setter:this.setAssociatedDomain,getter:this.getAssociatedDomain};case n.ASSOCIATED_URL.LOGIN_URL:return{encrypted:!0,obfuscated:!1,serializedType:Jn.TID_BINARY,deserializedType:Jn.TID_STRING,setter:this.setLoginUrl,getter:this.getLoginUrl};case n.ASSOCIATED_URL.VISIBLE:return{encrypted:!0,obfuscated:!1,serializedType:Jn.TID_BINARY,deserializedType:Jn.TID_BOOL,setter:this.setVisible,getter:this.getVisible};case n.ASSOCIATED_URL.LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:Jn.TID_UINT64,deserializedType:Jn.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};default:Zn.error("Invalid data value: "+e)}return null},ro.prototype.getNodePath=function(){return n.DEFAULT_ASSOCIATED_URL_NODE+"/"+this.getPath()},ro.prototype.getAssociatedLoginId=function(){return this.associatedLoginId},ro.prototype.getLoginUrl=function(){return this.loginUrl},ro.prototype.getAssociatedDomain=function(){return this.associatedDomain},ro.prototype.getVisible=function(){return this.visible},ro.prototype.getLastUsedAt=function(){return this.lastUsedAt},ro.prototype.setAssociatedLoginId=function(e){this.associatedLoginId=e},ro.prototype.setAssociatedDomain=function(e){this.associatedDomain=e},ro.prototype.setLoginUrl=function(e){this.loginUrl=e},ro.prototype.setVisible=function(e){this.visible=e},ro.prototype.setLastUsedAt=function(e){this.lastUsedAt=e};var no=function(){return this.name="AssociatedUrlManager",this.items={},this};o.inherits(no,h);var oo=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,io=s.a.logger,so=n.LOGIN_HISTORY,ao=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,so.ASSOCIATED_LOGIN_ID,so.EMAIL,so.USERNAME,so.PASSWORD,so.CREATED_AT],uo={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,associatedLoginId:so.ASSOCIATED_LOGIN_ID,email:so.EMAIL,username:so.USERNAME,password:so.PASSWORD,createdAt:so.CREATED_AT},lo=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=uo,e.keys=ao,e};o.inherits(lo,Pe),lo.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:oo.TID_STRING,deserializedType:oo.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:oo.TID_UINT64,deserializedType:oo.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.LOGIN_HISTORY.ASSOCIATED_LOGIN_ID:return{encrypted:!1,obfuscated:!1,serializedType:oo.TID_STRING,deserializedType:oo.TID_STRING,setter:this.setAssociatedLoginId,getter:this.getAssociatedLoginId};case n.LOGIN_HISTORY.EMAIL:return{encrypted:!0,obfuscated:!0,serializedType:oo.TID_BINARY,deserializedType:oo.TID_STRING,setter:this.setEmail,getter:this.getEmail};case n.LOGIN_HISTORY.USERNAME:return{encrypted:!0,obfuscated:!0,serializedType:oo.TID_BINARY,deserializedType:oo.TID_STRING,setter:this.setUsername,getter:this.getUsername};case n.LOGIN_HISTORY.PASSWORD:return{encrypted:!0,obfuscated:!0,serializedType:oo.TID_BINARY,deserializedType:oo.TID_STRING,setter:this.setPassword,getter:this.getPassword};case n.LOGIN_HISTORY.CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:oo.TID_UINT64,deserializedType:oo.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};default:io.error("Invalid data value: "+e)}return null},lo.prototype.getNodePath=function(){return n.DEFAULT_LOGIN_HISTORY_NODE+"/"+this.getPath()},lo.prototype.getAssociatedLoginId=function(){return this.associatedLoginId},lo.prototype.getEmail=function(){return this.email},lo.prototype.getUsername=function(){return this.username},lo.prototype.getPassword=function(){return this.password},lo.prototype.getCreatedAt=function(){return this.createdAt},lo.prototype.setAssociatedLoginId=function(e){this.associatedLoginId=e},lo.prototype.setEmail=function(e){this.email=e},lo.prototype.setUsername=function(e){this.username=e},lo.prototype.setPassword=function(e){this.password=e},lo.prototype.setCreatedAt=function(e){this.createdAt=e};var co=function(){return this.name="LoginHistoryManager",this.items={},this};o.inherits(co,h);var fo=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,po=s.a.logger,ho=n.AUTHENTICATOR,_o=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,ho.SERVICE,ho.USERNAME,ho.KEY,ho.CREATED_AT,ho.LAST_USED_AT],Eo={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,service:ho.SERVICE,username:ho.USERNAME,key:ho.KEY,createdAt:ho.CREATED_AT,lastUsedAt:ho.LAST_USED_AT},go=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=Eo,e.keys=_o,e};o.inherits(go,Pe),go.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:fo.TID_STRING,deserializedType:fo.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:fo.TID_UINT64,deserializedType:fo.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case ho.SERVICE:return{encrypted:!0,obfuscated:!1,serializedType:fo.TID_BINARY,deserializedType:fo.TID_STRING,setter:this.setService,getter:this.getService};case ho.USERNAME:return{encrypted:!0,obfuscated:!0,serializedType:fo.TID_BINARY,deserializedType:fo.TID_STRING,setter:this.setUsername,getter:this.getUsername};case ho.KEY:return{encrypted:!0,obfuscated:!0,serializedType:fo.TID_BINARY,deserializedType:fo.TID_STRING,setter:this.setKey,getter:this.getKey};case ho.CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:fo.TID_UINT64,deserializedType:fo.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};case ho.LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:fo.TID_UINT64,deserializedType:fo.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};default:po.error("Invalid data value: "+e)}return null},go.prototype.getNodePath=function(){return n.DEFAULT_AUTHENTICATOR_NODE+"/"+this.getPath()},go.prototype.getService=function(){return this.service},go.prototype.getKey=function(){return this.key},go.prototype.getUsername=function(){return this.username},go.prototype.getLastUsedAt=function(){return this.lastUsedAt},go.prototype.getCreatedAt=function(){return this.createdAt},go.prototype.setService=function(e){this.service=e},go.prototype.setKey=function(e){this.key=e},go.prototype.setUsername=function(e){this.username=e},go.prototype.setLastUsedAt=function(e){this.lastUsedAt=e},go.prototype.setCreatedAt=function(e){this.createdAt=e};var mo=function(){return this.name="AuthenticatorManager",this.items={},this};o.inherits(mo,h);var yo=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,So=s.a.logger,To=n.FILE,Ao=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,To.NAME,To.TYPE,To.ASSOCIATED_ENTITY_ID,To.ENTITY_TYPE,To.CREATED_AT,To.LAST_USED_AT],bo={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,name:To.NAME,type:To.TYPE,associatedEntityID:To.ASSOCIATED_ENTITY_ID,entityType:To.ENTITY_TYPE,createdAt:To.CREATED_AT,lastUsedAt:To.LAST_USED_AT},Oo=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=bo,e.keys=Ao,e};o.inherits(Oo,Pe),Oo.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:yo.TID_STRING,deserializedType:yo.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:yo.TID_UINT64,deserializedType:yo.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case To.NAME:return{encrypted:!0,obfuscated:!1,serializedType:yo.TID_BINARY,deserializedType:yo.TID_STRING,setter:this.setName,getter:this.getName};case To.TYPE:return{encrypted:!0,obfuscated:!1,serializedType:yo.TID_BINARY,deserializedType:yo.TID_STRING,setter:this.setType,getter:this.getType};case To.ASSOCIATED_ENTITY_ID:return{encrypted:!1,obfuscated:!1,serializedType:yo.TID_STRING,deserializedType:yo.TID_STRING,setter:this.setAssociatedEntityID,getter:this.getAssociatedEntityID};case To.ENTITY_TYPE:return{encrypted:!1,obfuscated:!1,serializedType:yo.TID_BINARY,deserializedType:yo.TID_STRING,setter:this.setEntityType,getter:this.getEntityType};case To.CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:yo.TID_UINT64,deserializedType:yo.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};case To.LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:yo.TID_UINT64,deserializedType:yo.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};default:So.error("Invalid data value: "+e)}return null},Oo.prototype.getNodePath=function(){return n.DEFAULT_FILE_NODE+"/"+this.getPath()},Oo.prototype.getName=function(){return this.name},Oo.prototype.getType=function(){return this.type},Oo.prototype.getAssociatedEntityID=function(){return this.associatedEntityID},Oo.prototype.getEntityType=function(){return this.entityType},Oo.prototype.getLastUsedAt=function(){return this.lastUsedAt},Oo.prototype.getCreatedAt=function(){return this.createdAt},Oo.prototype.setName=function(e){this.name=e},Oo.prototype.setType=function(e){this.type=e},Oo.prototype.setAssociatedEntityID=function(e){this.associatedEntityID=e},Oo.prototype.setEntityType=function(e){this.entityType=e},Oo.prototype.setLastUsedAt=function(e){this.lastUsedAt=e},Oo.prototype.setCreatedAt=function(e){this.createdAt=e};var Io=function(){return this.name="FileManager",this.items={},this};o.inherits(Io,h);var vo=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,No=s.a.logger,Ro=n.DELETED_UNKNOWN_BREACH,Co=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,Ro.BREACH_KEY,Ro.CREATED_AT,Ro.LAST_USED_AT],Do={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,breachKey:Ro.BREACH_KEY,createdAt:Ro.CREATED_AT,lastUsedAt:Ro.LAST_USED_AT},wo=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=Do,e.keys=Co,e};o.inherits(wo,Pe),wo.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:vo.TID_STRING,deserializedType:vo.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:vo.TID_UINT64,deserializedType:vo.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case Ro.BREACH_KEY:return{encrypted:!0,obfuscated:!0,serializedType:vo.TID_BINARY,deserializedType:vo.TID_STRING,setter:this.setBreachKey,getter:this.getBreachKey};case Ro.CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:vo.TID_UINT64,deserializedType:vo.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};case Ro.LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:vo.TID_UINT64,deserializedType:vo.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};default:No.error("Invalid data value: "+e)}return null},wo.prototype.getNodePath=function(){return n.DEFAULT_DELETED_UNKNOWN_BREACH_NODE+"/"+this.getPath()},wo.prototype.getBreachKey=function(){return this.breachKey},wo.prototype.getLastUsedAt=function(){return this.lastUsedAt},wo.prototype.getCreatedAt=function(){return this.createdAt},wo.prototype.setBreachKey=function(e){this.breachKey=e},wo.prototype.setLastUsedAt=function(e){this.lastUsedAt=e},wo.prototype.setCreatedAt=function(e){this.createdAt=e};var Lo=function(){return this.name="DeletedUnknownBreachManager",this.items={},this};o.inherits(Lo,h);var Po=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,Mo=s.a.logger,Uo=n.PASSWORD_BREACHES,jo=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,Uo.PASSWORD,Uo.TYPE,Uo.DOMAIN,Uo.BREACH_ID,Uo.DATE,Uo.CREATED_AT,Uo.LAST_USED_AT],ko={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,password:Uo.PASSWORD,type:Uo.TYPE,domain:Uo.DOMAIN,breachId:Uo.BREACH_ID,date:Uo.DATE,createdAt:Uo.CREATED_AT,lastUsedAt:Uo.LAST_USED_AT},xo=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=ko,e.keys=jo,e};o.inherits(xo,Pe),xo.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:Po.TID_STRING,deserializedType:Po.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:Po.TID_UINT64,deserializedType:Po.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case Uo.PASSWORD:return{encrypted:!0,obfuscated:!0,serializedType:Po.TID_BINARY,deserializedType:Po.TID_STRING,setter:this.setPassword,getter:this.getPassword};case Uo.TYPE:return{encrypted:!0,obfuscated:!1,serializedType:Po.TID_BINARY,deserializedType:Po.TID_STRING,setter:this.setType,getter:this.getType};case Uo.DOMAIN:return{encrypted:!0,obfuscated:!1,serializedType:Po.TID_BINARY,deserializedType:Po.TID_STRING,setter:this.setDomain,getter:this.getDomain};case Uo.BREACH_ID:return{encrypted:!0,obfuscated:!1,serializedType:Po.TID_BINARY,deserializedType:Po.TID_STRING,setter:this.setBreachId,getter:this.getBreachId};case Uo.DATE:return{encrypted:!1,obfuscated:!1,serializedType:Po.TID_UINT64,deserializedType:Po.TID_UINT64,setter:this.setDate,getter:this.getDate};case Uo.CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:Po.TID_UINT64,deserializedType:Po.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};case Uo.LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:Po.TID_UINT64,deserializedType:Po.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};default:Mo.error("Invalid data value: "+e)}return null},xo.prototype.getNodePath=function(){return n.DEFAULT_PASSWORD_BREACHES_NODE+"/"+this.getPath()},xo.prototype.getPassword=function(){return this.password},xo.prototype.getType=function(){return this.type},xo.prototype.getBreachId=function(){return this.breachId},xo.prototype.getDomain=function(){return this.domain},xo.prototype.getDate=function(){return this.date},xo.prototype.getLastUsedAt=function(){return this.lastUsedAt},xo.prototype.getCreatedAt=function(){return this.createdAt},xo.prototype.setPassword=function(e){this.password=e},xo.prototype.setType=function(e){this.type=e},xo.prototype.setBreachId=function(e){this.breachId=e},xo.prototype.setDomain=function(e){this.domain=e},xo.prototype.setDate=function(e){this.date=e},xo.prototype.setLastUsedAt=function(e){this.lastUsedAt=e},xo.prototype.setCreatedAt=function(e){this.createdAt=e};var Fo=function(){return this.name="PasswordBreachesManager",this.items={},this};o.inherits(Fo,h);var Bo=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,Go=s.a.logger,Vo=n.LOGIN_IGNORED_BREACHES,Ho=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,Vo.ASSOCIATED_LOGIN_ID,Vo.BREACH_ID,Vo.BREACH_IGNORE_TYPE,Vo.CREATED_AT,Vo.LAST_USED_AT],Wo={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,associatedLoginId:Vo.ASSOCIATED_LOGIN_ID,breachId:Vo.BREACH_ID,breachIgnoreType:Vo.BREACH_IGNORE_TYPE,createdAt:Vo.CREATED_AT,lastUsedAt:Vo.LAST_USED_AT},Yo=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=Wo,e.keys=Ho,e};o.inherits(Yo,Pe),Yo.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:Bo.TID_STRING,deserializedType:Bo.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:Bo.TID_UINT64,deserializedType:Bo.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case Vo.ASSOCIATED_LOGIN_ID:return{encrypted:!1,obfuscated:!1,serializedType:Bo.TID_STRING,deserializedType:Bo.TID_STRING,setter:this.setAssociatedLoginId,getter:this.getAssociatedLoginId};case Vo.BREACH_ID:return{encrypted:!0,obfuscated:!1,serializedType:Bo.TID_BINARY,deserializedType:Bo.TID_STRING,setter:this.setBreachId,getter:this.getBreachId};case Vo.BREACH_IGNORE_TYPE:return{encrypted:!0,obfuscated:!1,serializedType:Bo.TID_BINARY,deserializedType:Bo.TID_STRING,setter:this.setBreachIgnoreType,getter:this.getBreachIgnoreType};case Vo.CREATED_AT:return{encrypted:!1,obfuscated:!1,serializedType:Bo.TID_UINT64,deserializedType:Bo.TID_UINT64,setter:this.setCreatedAt,getter:this.getCreatedAt};case Vo.LAST_USED_AT:return{encrypted:!1,obfuscated:!1,serializedType:Bo.TID_UINT64,deserializedType:Bo.TID_UINT64,setter:this.setLastUsedAt,getter:this.getLastUsedAt};default:Go.error("Invalid data value: "+e)}return null},Yo.prototype.getNodePath=function(){return n.DEFAULT_LOGIN_IGNORED_BREACHES_NODE+"/"+this.getPath()},Yo.prototype.getAssociatedLoginId=function(){return this.associatedLoginId},Yo.prototype.getBreachId=function(){return this.breachId},Yo.prototype.getBreachIgnoreType=function(){return this.breachIgnoreType},Yo.prototype.getLastUsedAt=function(){return this.lastUsedAt},Yo.prototype.getCreatedAt=function(){return this.createdAt},Yo.prototype.setAssociatedLoginId=function(e){this.associatedLoginId=e},Yo.prototype.setBreachId=function(e){this.breachId=e},Yo.prototype.setBreachIgnoreType=function(e){this.breachIgnoreType=e},Yo.prototype.setLastUsedAt=function(e){this.lastUsedAt=e},Yo.prototype.setCreatedAt=function(e){this.createdAt=e};var Ko=function(){return this.name="LoginIgnoredBreachesManager",this.items={},this};o.inherits(Ko,h);var zo=function(){return this.name="BulkUploadManager",this.items={},this};o.inherits(zo,h),zo.prototype.addItem=function(e,t){throw Error("addItem not supported")},zo.prototype.deleteItem=function(e,t){throw Error("deleteItem not supported")},zo.prototype.updateItem=function(e,t){throw Error("updateItem not supported")};var qo=n,$o=qo.TAG_NODE,Xo=qo.TAG,Jo=S.a.proto.com.symantec.oxygen.datastore.v2.messages.Value.DataTypeID,Zo=s.a.logger,Qo=n.ITEM_INTERNAL_CONTEXT,ei=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,n.DEFAULT_TAG_NAME],ti={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,tagName:n.DEFAULT_TAG_NAME},ri=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=ti,e.keys=ei,e.login=[],e.identity=[],e.address=[],e.bankAccount=[],e.creditCard=[],e.note=[],e};o.inherits(ri,Pe),ri.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:Jo.TID_STRING,deserializedType:Jo.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:Jo.TID_UINT64,deserializedType:Jo.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.DEFAULT_TAG_NAME:return{encrypted:!0,obfuscated:!1,serializedType:Jo.TID_BINARY,deserializedType:Jo.TID_STRING,setter:this.setTagName,getter:this.getTagName};default:Zo.error("Invalid data value: "+e)}return null},ri.prototype.getNodePath=function(){return n.DEFAULT_TAG_NODE+"/"+this.getPath()},ri.prototype.getTagName=function(e){return e===Qo?this.tagName:this.tagName||""},ri.prototype.setTagName=function(e){this.tagName=e},ri.prototype.createTagItem=function(e,t){var r={},n=new Fi;return r.path=this.path,n.setItemNode(e),n.initFromDictionary(r),n.setTagItem(t),n},ri.prototype.addItem=function(e,t,r){switch(t){case Xo.LOGIN:this.validatAndAddItem(e.login,$o.LOGIN,r);break;case Xo.IDENTITY:this.validatAndAddItem(e.identity,$o.IDENTITY,r);break;case Xo.ADDRESS:this.validatAndAddItem(e.address,$o.ADDRESS,r);break;case Xo.CREDIT_CARD:this.validatAndAddItem(e.creditCard,$o.CREDIT_CARD,r);break;case Xo.BANK_ACCOUNT:this.validatAndAddItem(e.bankAccount,$o.BANK_ACCOUNT,r);break;case Xo.NOTE:this.validatAndAddItem(e.note,$o.NOTE,r);break;default:throw Error("Type not supported")}},ri.prototype.validatAndAddItem=function(e,t,r){0!==e.length&&this.isItemExists(e,r)||e.push(this.createTagItem(t,r))},ri.prototype.isItemExists=function(e,t){for(var r in e)if(e[r].getTagItem()===t)throw Error("Item already exists in the tag");return!1};var ni=s.a,oi=ni.utils,ii=oi.isNil,si=oi.isntNil,ai=oi.isEmptyObject,ui=oi.isSuccessCode,li=oi.isArray,ci=ni.logger,di=n,fi=di.TAG,pi=di.TAG_NODE,hi={},_i=(hi[fi.LOGIN]=pi.LOGIN,hi[fi.IDENTITY]=pi.IDENTITY,hi[fi.ADDRESS]=pi.ADDRESS,hi[fi.CREDIT_CARD]=pi.CREDIT_CARD,hi[fi.BANK_ACCOUNT]=pi.BANK_ACCOUNT,hi[fi.NOTE]=pi.NOTE,hi),Ei={},gi=(Ei[pi.LOGIN]=fi.LOGIN,Ei[pi.IDENTITY]=fi.IDENTITY,Ei[pi.ADDRESS]=fi.ADDRESS,Ei[pi.CREDIT_CARD]=fi.CREDIT_CARD,Ei[pi.BANK_ACCOUNT]=fi.BANK_ACCOUNT,Ei[pi.NOTE]=fi.NOTE,Ei),mi=function(){return this.name="TagManager",this.items={},this};o.inherits(mi,h),mi.prototype.addTag=function(e,t){var r,n,i,s,a,u=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(ai(e))throw Error("tag must be an Object");if(ii(t)&&(t=!1),r=[],n=e.getPath(),ii(n))throw ci.error("GUID is not found. Item has not been created correctly"),Error("GUID is not found. Item has not been created correctly");return u.items[n]=e,!0!==t?o.jumpTo(0):(r.push(e.clone().serializeNode()),o.yield(Cr.uploadNodes(r,null,!0,"addTag"),3))}if(i=o.yieldResult,s=i.status,a=i.error,!ui(s))throw{status:s,error:a};o.jumpToEnd()}))},mi.prototype.addItem=function(e,t){var r=this;return o.asyncExecutePromiseGeneratorProgram((function(n){return n.return(r.addTag(e,t))}))},mi.prototype.updateItem=function(e,t){t=void 0===t||t;var r,n,i,s,a,u,l=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(ai(e))throw Error("tag must be an Object");if(ii(t)&&(t=!1),r=[],n=e.getPath(),i=l.items[n],ii(i))throw Error("New item is being added. Please use the addItem interface");return l.items[n]=e,!0!==t?o.jumpTo(0):(r.push(e.clone().serializeNode()),o.yield(Cr.uploadNodes(r,null,!0,"updateTag"),3))}if(s=o.yieldResult,a=s.status,u=s.error,!ui(a))throw{status:a,error:u};o.jumpToEnd()}))},mi.prototype.addItemToTag=function(e,t,r,n){var i,s,a,u,l,c,d,f,p,h,_,E=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(ii(e))throw ci.error("tag guid cannot be null"),Error("tag guid cannot be null");if(ii(t))throw ci.error("itemType cannot be null"),Error("itemType cannot be null");if(ii(r))throw ci.error("item guid cannot be null"),Error("item guid cannot be null");if(ii(n)&&(n=!1),i=E.items[e],ii(i))throw ci.error("tag is not found. tag has not been created correctly"),Error("tag is not found. tag has not been created correctly");switch(i.addItem(i,t,r),s=[],t){case fi.LOGIN:0!==i.login.length&&(a=E.createItemNode(i.login,pi.LOGIN),s.push(a));break;case fi.IDENTITY:0!==i.identity.length&&(u=E.createItemNode(i.identity,pi.IDENTITY),s.push(u));break;case fi.ADDRESS:0!==i.address.length&&(l=E.createItemNode(i.address,pi.ADDRESS),s.push(l));break;case fi.CREDIT_CARD:0!==i.creditCard.length&&(c=E.createItemNode(i.creditCard,pi.CREDIT_CARD),s.push(c));break;case fi.BANK_ACCOUNT:0!==i.bankAccount.length&&(d=E.createItemNode(i.bankAccount,pi.BANK_ACCOUNT),s.push(d));break;case fi.NOTE:0!==i.note.length&&(f=E.createItemNode(i.note,pi.NOTE),s.push(f))}return ii(s)||!0!==n?o.jumpTo(0):o.yield(Cr.uploadNodes(s,null,!0,"associateTag"),3)}if(p=o.yieldResult,h=p.status,_=p.error,!ui(h))throw{status:h,error:_};o.jumpToEnd()}))},mi.prototype.deleteItem=function(e,t){delete this.items[e]},mi.prototype.createItemNode=function(e,t){if(0===e.length)throw ci.error("Item Array cannot be null"),Error("Item Array cannot be null");if(0!==(e=e.map((function(e){var r=e.getPath();if(ii(r))throw ci.error("GUID is not found. Item has not been created correctly"),Error("GUID is not found. Item has not been created correctly");return e.setItemNode(t),e.clone().serializeNode()}))).length)for(var r in e)0!=r&&e[0].values.push(e[r].values[0]);return e[0]},mi.prototype.getAllItems=function(){for(var e=Bn.getItemManager(Bn.TAG_ITEM_MANAGER).getAllItems(),t=(e=o.makeIterator(e.entries())).next();!t.done;t=e.next()){var r=o.makeIterator(t.value);t=r.next().value,r=r.next().value;var n=this.items[t];si(n)&&si(n.path)&&(this.items[t].login=r.login,this.items[t].identity=r.identity,this.items[t].address=r.address,this.items[t].creditCard=r.creditCard,this.items[t].bankAccount=r.bankAccount,this.items[t].note=r.note)}return this.sanitizeItems(),this.items},mi.prototype.sanitizeItems=function(){for(var e in this.items)ii(this.items[e].path)&&delete this.items[e]},mi.prototype.getAllTags=function(){return this.getAllItems()},mi.prototype._findAndRemoveTagItem=function(e,t,r){var n=null;if(1<t.length)for(var o in t)t[o].getTagItem()===e&&(t.splice(o,1),n=this.createItemNode(t,r));else t[0].getTagItem()===e&&(t[0].setItemNode(r),(n=t[0].serializeNode(!0)).values=[],t.splice(0,1));return n},mi.prototype._removeEmptyTag=function(e){var t=this.items[e],r=Bn.getItemManager(Bn.TAG_ITEM_MANAGER).getAllItems();if(si(t)&&0===t.login.length&&0===t.identity.length&&0===t.address.length&&0===t.creditCard.length&&0===t.bankAccount.length&&0===t.note.length){for(var n=(t=o.makeIterator(r.entries())).next();!n.done;n=t.next())(n=o.makeIterator(n.value).next().value)===e&&r.delete(n);return delete this.items[e],!0}return!1},mi.prototype.deleteTagItem=function(e,t,r,n){n=void 0===n||n;var i,s,a,u,l,c,d,f=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress){if(ii(e))throw ci.error("tag guid cannot be null"),Error("tag guid cannot be null");if(ii(t))throw ci.error("itemType cannot be null"),Error("itemType cannot be null");if(ii(r))throw ci.error("item guid cannot be null"),Error("item guid cannot be null");if(ii(n)&&(n=!1),i=[],s=f.items[e],ii(s))return o.return(void ci.info("No tag item found to delete"));switch(a=null,t){case fi.LOGIN:0!==s.login.length&&(a=f._findAndRemoveTagItem(r,s.login,pi.LOGIN));break;case fi.IDENTITY:0!==s.identity.length&&(a=f._findAndRemoveTagItem(r,s.identity,pi.IDENTITY));break;case fi.ADDRESS:0!==s.address.length&&(a=f._findAndRemoveTagItem(r,s.address,pi.ADDRESS));break;case fi.CREDIT_CARD:0!==s.creditCard.length&&(a=f._findAndRemoveTagItem(r,s.creditCard,pi.CREDIT_CARD));break;case fi.BANK_ACCOUNT:0!==s.bankAccount.length&&(a=f._findAndRemoveTagItem(r,s.bankAccount,pi.BANK_ACCOUNT));break;case fi.NOTE:0!==s.note.length&&(a=f._findAndRemoveTagItem(r,s.note,pi.NOTE));break;default:throw Error("Not supported type")}if(((u=f._removeEmptyTag(e))||si(a))&&n&&i.push(u?s.serializeNode(!0):a),!n)return o.jumpTo(0);if(0===i.length)throw Error("Item guid not found");return o.yield(Cr.uploadNodes(i,null,!0,"deleteTag"),3)}if(l=o.yieldResult,c=l.status,d=l.error,!ui(c))throw{status:c,error:d};o.jumpToEnd()}))},mi.prototype.getItemType=function(e){return gi[e]},mi.prototype.getTag=function(e){var t=Bn.getItemManager(Bn.TAG_ITEM_MANAGER).getItem(e);return this.items[e]||(this.items[e]={}),si(t)&&(this.items[e].login=t.login,this.items[e].identity=t.identity,this.items[e].address=t.address,this.items[e].creditCard=t.creditCard,this.items[e].bankAccount=t.bankAccount,this.items[e].note=t.note),this.items[e]},mi.prototype.updateItemsBasedOnChildNodes=function(e,t){var r=this,o=this.getTag(e),i=0;return ii(o)||Object.values(n.TAG).filter((function(e){return!t.includes(e)})).forEach((function(t){si(o[t][0])&&(r.deleteTagItem(e,t,o[t][0].getTagItem(),!1),i++)})),i},mi.prototype.getItemsByTagId=function(e,t){if(e=this.getTag(e),!ii(e))for(var r in e)if({}.hasOwnProperty.call(e,r))return e[t]},mi.prototype.getTagsByItemId=function(e,t){var r=this.getAllItems(),n={};if(!ii(r)){for(var o in r)for(var i in r[o][t])if(r[o][t][i].getTagItem()===e){var s=r[o][t][i].getPath();n[s]=this.getTag(s)}return n}},mi.prototype.bulkUpload=function(e,t){t=void 0===t||t;var r,n,i,s,a,u,l,c,d,f=this;return o.asyncExecutePromiseGeneratorProgram((function(p){if(1==p.nextAddress){if(!li(e))throw Error("must be an array");for(r=[],n=Object.keys(_i),i={},s=o.makeIterator(e),a=s.next();!a.done;i={$jscomp$loop$prop$t$347$403:i.$jscomp$loop$prop$t$347$403},a=s.next()){if(i.$jscomp$loop$prop$t$347$403=a.value,u=i.$jscomp$loop$prop$t$347$403.getPath(),ii(u))throw ci.error("GUID is not found. Item has not been created correctly"),Error("GUID is not found. Item has not been created correctly");f.items[u]=i.$jscomp$loop$prop$t$347$403,r.push(i.$jscomp$loop$prop$t$347$403.clone().serializeNode()),n.forEach(function(e){return function(t){0!==e.$jscomp$loop$prop$t$347$403[t].length&&(t=f.createItemNode(e.$jscomp$loop$prop$t$347$403[t],_i[t]),r.push(t))}}(i))}return!0!==t?p.jumpTo(0):p.yield(Cr.uploadNodes(r,null),3)}if(l=p.yieldResult,c=l.status,d=l.error,!ui(c))throw{status:c,error:d};p.jumpToEnd()}))};var yi=s.a,Si=yi.utils,Ti=Si.isNil,Ai=Si.isntNil,bi=yi.logger,Oi=n,Ii=Oi.TAG_NODE,vi=Oi.TAG,Ni=[Ii.LOGIN,Ii.IDENTITY,Ii.ADDRESS,Ii.CREDIT_CARD,Ii.BANK_ACCOUNT,Ii.NOTE],Ri=function(){return this.name="TagItemManager",this.items=new Map,this};o.inherits(Ri,h),Ri.prototype.isItemExists=function(e,t,r){e=this.getItem(e);var n=null;if(Ti(e))return!1;if(Ni.includes(r)){switch(r){case Ii.LOGIN:n=vi.LOGIN;break;case Ii.IDENTITY:n=vi.IDENTITY;break;case Ii.ADDRESS:n=vi.ADDRESS;break;case Ii.CREDIT_CARD:n=vi.CREDIT_CARD;break;case Ii.BANK_ACCOUNT:n=vi.BANK_ACCOUNT;break;case Ii.NOTE:n=vi.NOTE}Ai(n)&&(r=n)}for(var o in e)for(var i in e[r])if(e[r][i].getTagItem()===t)return!0;return!1},Ri.prototype.getItem=function(e){for(var t=o.makeIterator(this.items.entries()),r=t.next();!r.done;r=t.next())if((r=o.makeIterator(r.value).next().value)===e)return this.items.get(r)},Ri.prototype.addItem=function(e,t){if(Ti(e))throw Error("Item cannot be null");var r=e.getPath();if(Ti(r))bi.error("GUID is not found. Item has not been created correctly");else{var n={login:[],identity:[],address:[],creditCard:[],bankAccount:[],note:[]};switch(t){case Ii.LOGIN:n.login.push(e);break;case Ii.IDENTITY:n.identity.push(e);break;case Ii.ADDRESS:n.address.push(e);break;case Ii.CREDIT_CARD:n.creditCard.push(e);break;case Ii.BANK_ACCOUNT:n.bankAccount.push(e);break;case Ii.NOTE:n.note.push(e)}this.items.set(r,n)}},Ri.prototype.updateItem=function(e,t){if(Ti(e))throw Error("Item cannot be null");var r=e.getPath();if(Ti(r))bi.error("GUID is not found. Item has not been created correctly");else switch(t){case Ii.LOGIN:this.items.get(r).login.push(e);break;case Ii.IDENTITY:this.items.get(r).identity.push(e);break;case Ii.ADDRESS:this.items.get(r).address.push(e);break;case Ii.CREDIT_CARD:this.items.get(r).creditCard.push(e);break;case Ii.BANK_ACCOUNT:this.items.get(r).bankAccount.push(e);break;case Ii.NOTE:this.items.get(r).note.push(e)}};var Ci=S.a.proto.com.symantec.oxygen.datastore.v2.messages,Di=Ci.Node,wi=Ci.Value,Li=wi.DataTypeID,Pi=s.a,Mi=Pi.utils.isntNil,Ui=Pi.logger,ji=null,ki=[n.DEFAULT_NODE_ID,n.DEFAULT_LASTUPDATE,n.DEFAULT_TAG_ITEM],xi={path:n.DEFAULT_NODE_ID,lastUpdate:n.DEFAULT_LASTUPDATE,tagItem:n.DEFAULT_TAG_ITEM},Fi=function(){var e=Pe.call(this)||this;return e.encrypted=!0,e.propertyToSchemaKeyMap=xi,e.keys=ki,e};o.inherits(Fi,Pe),Fi.prototype.schemaForKey=function(e){switch(e){case n.DEFAULT_NODE_ID:return{encrypted:!1,obfuscated:!1,serializedType:Li.TID_STRING,deserializedType:Li.TID_STRING,setter:this.setPath,getter:this.getPath};case n.DEFAULT_LASTUPDATE:return{encrypted:!1,obfuscated:!1,serializedType:Li.TID_UINT64,deserializedType:Li.TID_UINT64,setter:this.setLastUpdate,getter:this.getLastUpdate};case n.DEFAULT_TAG_ITEM:return{encrypted:!1,obfuscated:!1,serializedType:Li.TID_UINT32,deserializedType:Li.TID_UINT32,setter:this.setTagItem,getter:this.getTagItem};default:Ui.error("Invalid data value: "+e)}return null},Fi.prototype.getNodePath=function(){return n.DEFAULT_TAG_NODE+"/"+this.getPath()+"/"+ji},Fi.prototype.serializeNode=function(e,t){if(e=void 0!==e&&e,void 0!==t&&!t){for(var r in this.encrypted&&this.decrypt(),e={},this.propertyToSchemaKeyMap)Object.prototype.hasOwnProperty.call(this.propertyToSchemaKeyMap,r)&&(t=this.schemaForKey(this.propertyToSchemaKeyMap[r]),Mi(t)&&(e[r]=t.getter.apply(this)));return JSON.stringify(e)}this.encrypted||this.encrypt(),t=(r=new Di).getValues(),r.setPath(this.getNodePath());for(var o=this.keys,i=0;i<o.length;i+=1)if(2===i){var s=this.schemaForKey(o[i]),a=s.getter.apply(this,[n.ITEM_INTERNAL_CONTEXT]);if(Mi(a)){var u=new wi;u.setType(s.serializedType),2===i&&(u.setName(a),u.setType(3),u.setDataUint32(0)),t.push(u)}}return r.setValues(t),e&&r.setDeleted(!0),r},Fi.prototype.parseNode=function(e){var t=e.values;for(var r in e=e.path.split("/"),t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=t[r];Mi(n)?(this.setTagItem(n.name),this.setPath(e[4])):Ui.error("Name:"+n.name+":WrongType\nExpectedType:null\nActual Type:"+n.type)}},Fi.prototype.setItemNode=function(e){ji=e},Fi.prototype.getTagItem=function(){return this.tagItem},Fi.prototype.setTagItem=function(e){this.tagItem=e};var Bi=S.a.proto.com.symantec.oxygen.datastore.v2.messages,Gi=Bi.Value,Vi=Bi.Node,Hi=s.a.utils,Wi=Hi.isNil,Yi=Hi.isFunction,Ki=function(){};Ki.prototype.setRecoveryRandomKey=function(e){this.recoveryRandomKey=e},Ki.prototype.getRecoveryRandomKey=function(){return this.recoveryRandomKey},Ki.prototype.getEncryptionKey=function(){return this.getRecoveryRandomKey()},Ki.prototype.setPBDKSalt=function(e){this.salt=e},Ki.prototype.getPBDKSalt=function(){return Wi(this.salt)?null:this.salt.slice(0,this.salt.byteLength-n.DEFAULT_CRC_SIZE)},Ki.prototype.setVaultChallengePrivateKey=function(e){this.vaultChallengePrivateKey=e},Ki.prototype.getVaultChallengePrivateKey=function(){return this.vaultChallengePrivateKey},Ki.prototype.setVaultDerivedKey=function(e){this.vaultDerivedKey=e},Ki.prototype.getVaultDerivedKey=function(){return this.vaultDerivedKey},Ki.prototype.setNodeModified=function(e){this.nodeModified=e},Ki.prototype.getNodeModified=function(){return this.nodeModified},Ki.prototype.serialize=function(){var e=new Vi,t=e.getValues();e.setPath(n.DEFAULT_RECOVERY_IDSC_NODE);var r=new Gi;return r.setType(Gi.DataTypeID.TID_BINARY),r.setDataBinary(this.getRecoveryRandomKey()),r.setName(n.DEFAULT_RECOVERY_RANDOM_KEY),t.push(r),(r=new Gi).setType(Gi.DataTypeID.TID_BINARY),r.setDataBinary(this.salt),r.setName(n.DEFAULT_RECOVERY_PDK_SALT),t.push(r),(r=new Gi).setType(Gi.DataTypeID.TID_BINARY),r.setDataBinary(this.getVaultChallengePrivateKey()),r.setName(n.DEFAULT_RECOVERY_VAULT_CHALLENGE_PRIVATE_KEY),t.push(r),(r=new Gi).setType(Gi.DataTypeID.TID_BINARY),r.setDataBinary(this.getVaultDerivedKey()),r.setName(n.DEFAULT_RECOVERY_VAULT_DERIVED_KEY),t.push(r),e.setValues(t),e},Ki.prototype.reset=function(){for(var e in this)Yi(this[e])||(this[e]=null)};var zi=new Ki,qi=s.a.utils,$i=qi.isFunction,Xi=qi.isntNil,Ji=S.a.proto.com.symantec.oxygen.datastore.v2.messages,Zi=Ji.Value,Qi=Ji.Node,es=function(){return v.apply(this,arguments)||this};o.inherits(es,v),es.prototype.getNodeId=function(){return n.RECOVERY_33},es.prototype.getChallengeSaltName=function(){return n.DEFAULT_RECOVERY_CHALLENGE_SALT},es.prototype.getLastUpdate=function(){return this.lastUpdate},es.prototype.setLastUpdate=function(e){this.lastUpdate=e},es.prototype.setSourceType=function(e){this.sourceType=e},es.prototype.getSourceType=function(){return this.sourceType},es.prototype.setSourceID=function(e){this.sourceID=e},es.prototype.getSourceID=function(){return this.sourceID},es.prototype.serialize=function(){var e=new Qi,t=e.getValues();e.setPath(this.getNodeId());var r=new Zi;if(r.setType(Zi.DataTypeID.TID_UINT64),r.setDataUint64(this.getLastUpdate()),r.setName(n.DEFAULT_LASTUPDATE),t.push(r),(r=new Zi).setType(Zi.DataTypeID.TID_STRING),r.setDataString(this.getSourceType()),r.setName(n.DEFAULT_RECOVERY_SOURCE_TYPE),t.push(r),(r=new Zi).setType(Zi.DataTypeID.TID_STRING),r.setDataString(this.getSourceID()),r.setName(n.DEFAULT_RECOVERY_SOURCE_ID),t.push(r),(r=new Zi).setType(Zi.DataTypeID.TID_UINT32),r.setDataUint32(this.getVaultVersion()),r.setName(n.DEFAULT_RECOVERY_VAULT_VERSION),t.push(r),(r=new Zi).setType(Zi.DataTypeID.TID_BINARY),r.setDataBinary(this.challengeSalt),r.setName(n.DEFAULT_RECOVERY_CHALLENGE_SALT),t.push(r),(r=new Zi).setType(Zi.DataTypeID.TID_BINARY),r.setDataBinary(this.iv),r.setName(n.DEFAULT_RECOVERY_CHALLENGE_IV),t.push(r),r=this.getCryptoAlgorithm(),Xi(r)){var o=new Zi;o.setType(Zi.DataTypeID.TID_STRING),o.setDataString(r),o.setName(n.DEFAULT_CRYPTO_ALGORITHM),t.push(o)}return e.setValues(t),e},es.prototype.reset=function(){for(var e in this)$i(this[e])||(this[e]=null);this._isAvailable=!1};var ts=new es,rs=s.a.utils.isNil,ns=function(e,t,r,n){if(rs(e))throw Error("State cannot be null");this.state=e,this.modifiedAt=t,this.sourceID=r,this.sourceType=n};ns.prototype.getVaultState=function(){return this.state},ns.prototype.getModifiedAt=function(){return this.modifiedAt},ns.prototype.getSourceID=function(){return this.sourceID},ns.prototype.getSourceType=function(){return this.sourceType};var os=s.a.logger,is=s.a.utils,ss=is.isNil,as=is.isSuccessCode,us=is.isString,ls=S.a.utils,cs=n.vaultManager,ds=cs.stateInfo,fs=cs.state,ps=function(){var e=new x,t=new g;return t.setCryptoParams(n.DEFAULT_PBKDF2_MD,n.DEFAULT_HMAC_SHA_ALGORITHM,n.DEFAULT_SHA_DIGEST),t=new ye(ts,e,void 0,t,zi),(e=Tn.call(this,{appNode:ts,vaultUtils:t,vaultKeys:e,telemetryWrapper:void 0})||this).recoveryBeingCreated=!1,e};o.inherits(ps,Tn),ps.prototype.getMainNodeId=function(){return n.RECOVERY_33},ps.prototype.openRecovery=function(e){var t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){if(ss(e))throw Error("Vault password cannot be null");return r.return(t._checkAndConstructVault(e,!0))}))},ps.prototype._checkAndConstructVault=function(e,t){var r=this;return o.asyncExecutePromiseGeneratorProgram((function(i){return i.return(new Promise((function(i,s){r._checkVault(e,t,(function(){var s,a,u,l,c,d,f,p,h,_,E,g,m;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return t?(a=new Kr(fs.LOADED,ds.LOADED),u=zi.getRecoveryRandomKey(),l=zi.getVaultDerivedKey(),c=zi.getVaultChallengePrivateKey(),d=zi.getPBDKSalt(),f=ls.createStringBufferFromUint8Buffer(d),p=n.DEFAULT_IDSC_PATH_CRC+n.DEFAULT_RECOVERY_IDSC_NODE,h=null,o.setCatchFinallyBlocks(2),o.yield(r._getVaultEncryptionBuffer(e,f,u,p,n.DEFAULT_RECOVERY_RANDOM_KEY),4)):(s=new Kr(fs.VAULT_FOUND,ds.VAULT_FOUND),o.return(void i({state:s,error:null})));case 4:h=o.yieldResult,o.leaveTryBlock(3);break;case 2:return _=o.enterCatchBlock(),o.return(void i({state:fs.INTERNAL_ERROR,additionalInfo:_.message}));case 3:if(ss(h))throw Error("Encryption key cannot be null");if(ss(h.buffer))return E=new Kr(h.state,h.additionalInfo),o.return(void i({state:E,error:null}));r.vaultKeys.setEncryptionKey(h),a=new Kr(fs.DECRYPTING_NODES,ds.DECRYPTING_NODES),g=r.vaultUtils.decryptEnvelopeData(l,h,p,n.DEFAULT_RECOVERY_VAULT_DERIVED_KEY,n.SERIALIZE_DATA_TYPE.BINARY,!0),m=r.vaultUtils.decryptEnvelopeData(c,h,p,n.DEFAULT_RECOVERY_VAULT_CHALLENGE_PRIVATE_KEY,n.SERIALIZE_DATA_TYPE.BINARY,!0),r.vaultKeys.setEncryptionKey(g),r.vaultKeys.setChallengePrivateKey(m),r.vaultKeys.setLocked(!1),a=new Kr(fs.VAULT_SYNCED,ds.VAULT_SYNCED_DECRYPTED),i({state:a,error:null}),o.jumpToEnd()}}))}),(function(e){r.vaultKeys.setLocked(!0),i(e)}))})))}))},ps.prototype.fetchRecoveryInfo=function(){var e,t,r,n,i,s,a,u,l=this;return o.asyncExecutePromiseGeneratorProgram((function(o){if(1==o.nextAddress)return o.yield(l._checkAndConstructVault(null,!1),2);switch(e=o.yieldResult,t=e.state,n=null,t.getState()){case fs.VAULT_FOUND:r=!0;break;case fs.VAULT_NOT_FOUND:r=!1;break;case fs.NETWORK_ERROR:case fs.NOT_LOGGED_IN:case fs.O2_RATE_LIMITED_ERROR:case fs.SSO_UNAUTHORIZED:n=Error(t.getAdditionalInfo()),os.error(n),r=!1;break;default:os.log(t.getAdditionalInfo())}return a=s=i=null,!0===r&&(u=ts.getLastUpdate())&&(i=u,s=ts.getSourceID(),a=ts.getSourceType()),o.return(new ns(t,i,s,a))}))},ps.prototype.getRecoveryInfo=function(){var e=null,t=null,r=null,n=ts.getLastUpdate(),o=new Kr(fs.VAULT_FOUND,ds.VAULT_FOUND);return n&&(e=n,t=ts.getSourceID(),r=ts.getSourceType(),o=new Kr(fs.VAULT_SYNCED,ds.VAULT_SYNCED_DECRYPTED)),new ns(o,e,t,r)},ps.prototype.createRecovery=function(e,t,r){t=void 0===t?"":t,r=void 0===r?"":r;var i,s,a,u,l,c,d,f,p,h,_,E,g,m,y,S,A,b,O,I,v,N,R=this;return o.asyncExecutePromiseGeneratorProgram((function(o){switch(o.nextAddress){case 1:return o.yield(R.isNALoggedIn(),2);case 2:if(!o.yieldResult)throw Error(ds.SSO_UNAUTHORIZED);if(!1===us(e))throw Error("Vault password cannot be null");if(F.isLocked())throw Error("Vault should be unlocked");if(i=F.getChallengePrivateKey(),s=F.getEncryptionKey(),o.setFinallyBlock(3),!0===R.recoveryBeingCreated)throw Error("Vault is already being created");return R.recoveryBeingCreated=!0,Bn.loadCookieManager(),o.yield(R.vaultUtils.createChallenge(e,n.DEFAULT_RECOVERY_NODE),5);case 5:return a=o.yieldResult,u=a.challenge,l=a.crcSalt,c=a.crcIV,d=ls.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_CHALLENGE_SALT_SIZE)),o.yield(R.vaultUtils.generateVaultDecryptionKey(e,d),6);case 6:return f=o.yieldResult,p=ls.createUInt8BufferFromStringBuffer(T.random.getBytesSync(n.DEFAULT_DERIVED_AES_KEY_SIZE+n.DEFAULT_HMAC_SIZE)),h=n.DEFAULT_IDSC_PATH_CRC+n.DEFAULT_RECOVERY_IDSC_NODE,_=R.vaultUtils.createEnvelopeAndEncryptData(p,i,n.SERIALIZE_DATA_TYPE.BINARY,h,n.DEFAULT_RECOVERY_VAULT_CHALLENGE_PRIVATE_KEY,!0),E=R.vaultUtils.createEnvelopeAndEncryptData(p,s,n.SERIALIZE_DATA_TYPE.BINARY,h,n.DEFAULT_RECOVERY_VAULT_DERIVED_KEY,!0),g=R.vaultUtils.createEnvelopeAndEncryptData(f,p,n.SERIALIZE_DATA_TYPE.BINARY,h,n.DEFAULT_RECOVERY_RANDOM_KEY,!1),m=R.vaultUtils.calculateChecksum(0,d),y=R.vaultUtils.numberToUint8Buffer(m),(S=new Uint8Array(d.byteLength+y.byteLength)).set(d,0),S.set(y,d.byteLength),A=R.vaultUtils.configureCryptoAlgorithm(),ts.setLastUpdate(Math.floor(Date.now()/1e3)),ts.setSourceID(r),ts.setSourceType(t),ts.setChallengeSalt(l),ts.setChallengeIV(c),ts.setCryptoAlgorithm(A),ts.setVaultVersion(n.CURRENT_VAULT_SDK_VERSION),zi.setRecoveryRandomKey(g),zi.setPBDKSalt(S),zi.setVaultChallengePrivateKey(_),zi.setVaultDerivedKey(E),b={"X-Symc-Challenge-Update":ls.challengeListToString(u)},o.yield(Cr.uploadNodes([ts.serialize(),zi.serialize()],b,!1),7);case 7:if(O=o.yieldResult,I=O.status,!as(I)){o.jumpTo(8);break}return v=new Kr(fs.VAULT_CREATED,ds.VAULT_CREATED),o.yield(R._checkAndConstructVault(e,!0),9);case 9:return N=o.yieldResult,o.return(N.state.getState()===fs.VAULT_SYNCED?v:N.state);case 8:return o.return(R._handleServerErrors(I));case 3:o.enterFinallyBlock(),R.recoveryBeingCreated=!1,o.leaveFinallyBlock(0)}}))},ps.prototype.closeRecovery=function(){var e,t=this;return o.asyncExecutePromiseGeneratorProgram((function(r){try{return e=new Kr(fs.VAULT_LOCKED,ds.VAULT_CLOSED),r.return((t.vaultKeys.isLocked()||t.vaultKeys.setLocked(!0),e))}catch(e){return r.return((os.log(e),new Kr(fs.INTERNAL_ERROR,ds.VAULT_CLOSE_FAILED)))}}))},ps.prototype.deleteRecovery=function(){var e=this;return o.asyncExecutePromiseGeneratorProgram((function(t){return t.return(e.deleteVault())}))},ps.prototype.getEncryptionKey=function(){var e=this.vaultKeys.getEncryptionKey();return null==e?null:T.util.encode64(S.a.utils.createStringBufferFromUint8Buffer(e))},ps.prototype.getChallengePrivateKey=function(){var e=this.vaultKeys.getChallengePrivateKey();return null==e?null:T.util.encode64(S.a.utils.createStringBufferFromUint8Buffer(e))},ps.prototype.checkIfVaultLocked=function(){if(!this.vaultKeys.isLocked())throw Error(ds.VAULT_LOCKED_CANNOT_SYNC)},ps.prototype.getKeysForSeamlessUnlock=function(){return this.vaultKeys.isLocked()?null:{encryptionKey:this.getEncryptionKey(),challengePrivateKey:this.getChallengePrivateKey()}},ps.prototype.postSyncSetup=function(){};var hs=new ps},0:function(e,t,r){e.exports=r("./source/VTIndexWebpack.js")},"@browser-services/bfw":function(t,r){t.exports=e},"@browser-services/ocl":function(e,r){e.exports=t},"node-forge":function(e,t){e.exports=r},protobufjs:function(e,t){e.exports=n}}).default},"object"==typeof r&&"object"==typeof t?t.exports=s(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"),e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js"),e("node-forge"),e("protobufjs")):"function"==typeof define&&define.amd?define(["@browser-services/bfw","@browser-services/ocl","node-forge","protobufjs"],s):"object"==typeof r?r.VaultSDK=s(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js"),e("@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js"),e("node-forge"),e("protobufjs")):i.VaultSDK=s(i.Bfw,i.SymO2,i.forge,i.dcodeIO)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/ocl/dist/release/Firefox/prod/SymO2.min.js":214,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.array.sort.js":432,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.constructor.js":441,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.symbol.description.js":446,"core-js/modules/es.typed-array.fill.js":447,"core-js/modules/es.typed-array.set.js":448,"core-js/modules/es.typed-array.sort.js":449,"core-js/modules/es.typed-array.uint8-array.js":450,"core-js/modules/esnext.global-this.js":451,"core-js/modules/web.dom-collections.iterator.js":453,"node-forge":"node-forge",protobufjs:"protobufjs"}],216:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.array.reduce.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.constructor.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/web.dom-collections.iterator.js"),function(e){(e.SymWax=e.SymWax||{}).constants=function(e){var t={requestType:{},header:{},contentType:{},IN_PAGE_POPUP:"symc-in-page-popup",DEFAULT_XHR_TIMEOUT:6e4};t.requestType.GET_METHOD="GET",t.contentType.JSON="application/json",t.header.CONTENT_TYPE="Content-Type",t.DEFAULT_PARSINGPREFERENCES="DefaultParsingPreferences",t.DOMAIN_RULES="DomainRules",t.URL_RULES="UrlRules",t.COUNTRIES="Countries",t.COUNTRY_DATA="CountryData",t.DATA="data",t.DATA_TYPE="datatype",t.COUNTRY_ATTRIBUTE="CountryAttribute",t.DOMAIN="Domain",t.LANGUAGES="Languages",t.DOMAIN_MATCH="/",t.FIELD_TYPE="fieldType",t.RULES="rules",t.FORM_SUBMIT_TIMEOUT=100,t.EVENT_OBJECT_SUBMIT_TIMEOUT=100,t.PATTERN="pattern",t.REGEX="regEx",t.MAX_STRING_LENGTH_FOR_REGEX=200,t.NORMALIZE_URL="normalizeUrl",t.ORIGINAL_URL="org",t.NORMALIZED_URL="nor",t.PROXIMITY_THRESHOLD_X=70,t.PROXIMITY_THRESHOLD_Y=50,t.rules={PRE_PARSE:"preparse",POST_PARSE:"postparse",SCRIPTS:"scripts",ON_FILL:"onfill",FETCH_CREDENTIALS:"fetchcredentials",ON_FIELD_FOUND:"onfieldfound",AFTER_FILL:"afterfill",BEFORE_FILL:"beforefill",OPERATION:"Operation",PROPERTY:"Property",DOM_METHOD:"DomMethod",EXECUTION_CONTEXT:"ExecutionContext",DELAY:"Delay",EVENT_NAME:"EventName",SET_TIMEOUT:"setTimeout",SET_INTERVAL:"setInterval",RETRY_ITERATION:"RetryIteration",operation:{CALL_JAVA_SCRIPT:"calljavascript",FILL_EX:"fillex",FIELD_MAPPING:"FieldMapping",GROUP_MAPPING:"GroupMapping",UPDATE_ATTRIBUTE:"updateAttribute",FETCH_DATA:"fetchData",SPLIT_FILL:"splitFill",CLICK:"Click",CUSTOM_FILL:"CustomFill",ADD_EVENT_LISTENER:"addEventListener"},property:{NAME:"name",ATTRIBUTES:"attributes",FIELD_TYPE:"FieldType",INPUT_TYPE:"InputType",LOGIN_TYPE:"LoginType",GROUP_TYPE:"GroupType"},domMethod:{GET_ELEMENT_BY_ID:"getElementById",GET_ELEMENT_BY_NAME:"getElementsByName",QUERY_SELECTOR_ALL:"querySelectorAll",QUERY_SELECTOR:"querySelector"},SUBMIT_EVENTS:"SubmitEvents"},t.PREFERENCES="preferences",t.URL_BASED_DATA="urlBasedData",t.GLOBAL_DATA="globalData",t.messages={GET_URL_DATA:"F1F837B8-DC04-478A-C9EB-45F87DD3B88F",TRIGGER_AJAX_PARSE_RETRY:"BEE46703-475E-411B-C6CD-6331AC68CB18",TRIGGER_AJAX_PARSE_RETRY_RESPONSE:"30220307-AB5C-45DA-F586-37894089452E",TRIGGER_FORCED_WAX_ANALYSIS:"577408EC-2807-49D8-B479-E91120B89183",CHECK_ANALYSIS_REQUIRED:"11A574D4-6B97-45D1-BFFE-F23A3036C829",TOP_FRAME_UNLOAD_EVENT:"282955FF-C442-4AD4-A28F-1FA4F6183400",SEND_WAX_TELEMETRY_TO_BG:"319e4246-a421-4a7b-bfa7-faaa7681e45b",SEND_WAX_TELEMETRY_TO_BFW:"0e72ba18-d35c-43e5-a025-91afb1132866",DOES_FORM_EXIST:"4479A99F-4C87-4568-A855-2B133E24A442"},t.NO_THRESHOLD_CHECK_VALUE=-1,t.htmlTagName={A:"A",BODY:"BODY",BUTTON:"BUTTON",DIV:"DIV",FIELDSET:"FIELDSET",HEAD:"HEAD",IFRAME:"IFRAME",IMG:"IMG",FORM:"FORM",INPUT:"INPUT",LABEL:"LABEL",META:"META",NOSCRIPT:"NOSCRIPT",OPTION:"OPTION",P:"P",SCRIPT:"SCRIPT",SELECT:"SELECT",SPAN:"SPAN",TABLE:"TABLE",TD:"TD",TEXTAREA:"TEXTAREA",TH:"TH",THEAD:"THEAD",TITLE:"TITLE",TR:"TR",B:"B",I:"I",U:"U",LI:"LI",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",FONT:"FONT",STRONG:"STRONG",EM:"EM"},t.htmlElementAttributes={ACTION:"action",ALT:"alt",CLASS:"class",CHECKED:"checked",FOR:"for",FORM:"form",FORMACTION:"formaction",ID:"id",MAXLENGTH:"maxlength",NAME:"name",PATTERN:"pattern",PLACEHOLDER:"placeholder",READONLY:"readonly",SRC:"src",TYPE:"type",TITLE:"title",VALUE:"value"},t.inputType={UNKNOWN:"Unknown",TEXT:"Text",TEXTAREA:"Textarea",PASSWORD:"Password",SUBMIT:"Submit",IMAGE:"Image",BUTTON:"Button",CHECKBOX:"Checkbox",RADIO:"Radio",RESET:"Reset",FILE:"File",HIDDEN:"Hidden",SELECT:"Select",EVENT_OBJECT:"EventObject",TELEPHONE:"tel",NUMBER:"number",CUSTOM_FILL:"CustomFill"},t.patternTokens={DAY:"dd",MONTH:"mmm",YEAR:"yyyy",PREFIX:"p",SUFFIX:"s",FIRST_NAME:"fn",MIDDLE_NAME:"mn",LAST_NAME:"ln",CARD_NUMBER:"cc",UNKNOWN:"x",IGNORE:"xx"},t.fieldType={ALL:"All",UNKNOWN:"Unknown",LOGIN_NAME:"LoginName",PASSWORD:"Password",PASSWORD_PLACEHOLDER:"PasswordPlaceHolder",VERIFY_PASSWORD:"VerifyPassword",PASSWORD_HINT:"PasswordHint",LOGIN_BUTTON:"LoginButton",SIGNUP_BUTTON:"SignUpButton",CONTINUE_BUTTON:"ContinueButton",SIGNON_DESTINATION:"SignonDestination",EMAIL:"Email",VERIFY_EMAIL:"VerifyEmail",ALTERNATE_EMAIL:"AlternateEmail",FULL_NAME:"FullName",FIRST_NAME:"FirstName",LAST_NAME:"LastName",MIDDLE_NAME:"MiddleName",PREFIX:"Prefix",SUFFIX:"Suffix",FULL_NAME_PHONETIC:"FullNamePhonetic",FIRST_NAME_PHONETIC:"FirstNamePhonetic",LAST_NAME_PHONETIC:"LastNamePhonetic",MIDDLE_NAME_PHONETIC:"MiddleNamePhonetic",FULL_NAME_ROMAN:"FullNameRoman",FIRST_NAME_ROMAN:"FirstNameRoman",LAST_NAME_ROMAN:"LastNameRoman",MIDDLE_NAME_ROMAN:"MiddleNameRoman",SSN:"SSN",ADDRESS:"Address",ADDRESS_LINE2:"AddressLine2",ADDRESS_LINE3:"AddressLine3",ADDRESS_PHONETIC:"AddressPhonetic",ADDRESS_LINE2_PHONETIC:"AddressLine2Phonetic",ADDRESS_LINE3_PHONETIC:"AddressLine3Phonetic",CITY:"City",CITY_PHONETIC:"CityPhonetic",ZIP_CODE:"ZipCode",STATE:"State",REGION:"Region",HOUSE_NUMBER:"HouseNumber",HOUSE_NAME:"HouseName",VILLAGE:"Village",SUB_AREA:"SubArea",BLOCK_NUMBER:"BlockNumber",DISTRICT:"District",APARTMENT_NUMBER:"ApartmentNumber",APARTMENT_FLOOR:"ApartmentFloor",SUITE_NUMBER:"SuiteNumber",BIRTH_DATE:"BirthDate",BIRTH_DAY:"BirthDay",BIRTH_MONTH:"BirthMonth",BIRTH_YEAR:"BirthYear",DATE:"Date",DAY:"Day",MONTH:"Month",YEAR:"Year",ACCOUNT_NUMBER:"AccountNumber",PIN:"Pin",ROUTING_NUMBER:"RoutingNumber",PHONE_NUMBER_COUNTRY_CODE:"PhoneNumberCountryCode",PHONE_NUMBER_AREA_CODE:"PhoneNumberAreaCode",PHONE_NUMBER_EXTENSION:"PhoneNumberExtension",PHONE_NUMBER:"PhoneNumber",PHONE_NUMBER_WORK:"PhoneNumberWork",PHONE_NUMBER_WORK_FAX:"PhoneNumberWorkFax",PHONE_NUMBER_HOME:"PhoneNumberHome",PHONE_NUMBER_FAX:"PhoneNumberFax",PHONE_NUMBER_CELL:"PhoneNumberCell",SECURITY_QUESTION:"SecurityQuestion",ANSWER:"Answer",GENDER:"Gender",CREDIT_CARD_HOLDER_NAME:"CreditCardHolderName",CREDIT_CARD_HOLDER_FIRST_NAME:"CreditCardHolderFirstName",CREDIT_CARD_HOLDER_LAST_NAME:"CreditCardHolderLastName",CREDIT_CARD_TYPE:"CreditCardType",CREDIT_CARD_NUMBER:"CreditCardNumber",CREDIT_CARD_EXPIRATION_DATE:"CreditCardExpirationDate",CREDIT_CARD_EXPIRATION_MONTH:"CreditCardExpirationMonth",CREDIT_CARD_EXPIRATION_YEAR:"CreditCardExpirationYear",CREDIT_CARD_SECURITY_CODE:"CreditCardSecurityCode",CREDIT_CARD_START_DATE:"CreditCardStartDate",CREDIT_CARD_START_MONTH:"CreditCardStartMonth",CREDIT_CARD_START_YEAR:"CreditCardStartYear",CREDIT_CARD_ISSUE_NUMBER:"CreditCardIssueNumber",ADD_CARD_DETAILS:"AddCard",COMPANY:"Company",DEPARTMENT:"Department",WORK_ID:"WorkId",WORK_JOB_TITLE:"WorkJobTitle",WORK_EMAIL:"WorkEmail",WORK_ADDRESS:"WorkAddress",WORK_CITY:"WorkCity",WORK_ZIP_CODE:"WorkZipCode",WORK_STATE:"WorkState",WORK_REGION:"WorkRegion",WORK_WEBSITE:"WorkWebSite",SEARCH:"Search",LANGUAGE:"Language",OPEN_ID:"OpenID",VERIFICATION_CODE:"VerificationCode",WEBSITE:"WebSite",MOTHERS_MAIDEN_NAME:"MothersMaidenName",TIMEZONE:"TimeZone",DOMAIN:"Domain",AJAX_ACTION:"AjaxAction",BUTTON_ACTION:"ButtonAction",SKIP_FIELD:"SkipField",CHANGE_PASSWORD_BUTTON:"ChangePasswordButton",SUBSCRIBE:"Subscribe",PASSPORT_NUMBER:"PassportNumber",DRIVER_LICENSE:"DriversLicense",SEARCH_ANNOTATION:"SearchAnnotation",APPLY:"Apply",UPDATE:"Update",COMMENT:"Comment",BANK_NAME:"BankName",BANK_ACCOUNT_HOLDER_NAME:"BankAccountHolderName",MAILING_ADDRESS:"MailingAddress",NEW_PASSWORD:"NewPassword",IGNORE_FIELD:"IgnoreField",GENDER_MALE:"GenderMale",GENDER_FEMALE:"GenderFemale",SEARCH_BUTTON:"SearchButton",MUTLI_SPAN_USERNAME:"MultiSpanUsername",SUBSCRIBE_BUTTON:"SubscribeButton",APPLY_BUTTON:"ApplyButton",UPDATE_BUTTON:"UpdateButton",OTP:"OTP"},t.emailFieldTypes=[t.fieldType.EMAIL,t.fieldType.VERIFY_EMAIL,t.fieldType.ALTERNATE_EMAIL,t.fieldType.WORK_EMAIL],t.matchProperties={INVALID:"Invalid",NAME:"Name",VALUE:"Value",CLASS:"Class",ATTACHED_TEXT:"AttachedText",ALTERNATIVE_TEXT:"Alt",ID:"ID",IMAGE_SRC:"Src",TITLE:"Title",INNER_TEXT:"InnerText",HREF:"HREF",CONTENT:"Content",FIRST_LIST_ITEM:"FirstListItem",PLACE_HOLDER:"Placeholder",TYPE:"Type",ARIA_LABEL:"aria-label",NODE_TYPE:"node-type",ACTION_DATA:"action-data",AUTOCOMPLETE:"autocomplete",INPUTMODE:"inputmode"},t.eventType={ON_CLICK:"onclick",ON_SUBMIT:"onsubmit",ON_MOUSE_DOWN:"onmousedown",ON_MOUSE_UP:"onmouseup",FORM_ACTION:"formaction",COMMAND:"command",HREF:"href",ROLE:"role",CHANGE:"change",INPUT:"input",HTML_EVENTS:"HTMLEvents",EVENTS:"Events",CLICK:"click",KEYDOWN:"keydown",MOUSEDOWN:"mousedown",KEYUP:"keyup",SUBMIT:"submit",MOUSE_OVER:"mouseover",ONFOCUS:"focus"},t.groupType={UNKNOWN:"Unknown",LOGIN:"Login",MULTI_PAGE_LOGIN:"MultiPageLogin",PARTIAL_LOGIN:"PartialLogin",PARTIAL_CARDS_PAGE:"PartialCardsPage",CARDS_PAGE:"CardsPage",PERSONAL_INFO_PAGE:"PersonalInfoPage",CHANGE_PASSWORD_PAGE:"ChangePasswordPage",REGISTRATION_PAGE:"RegistrationPage",PARTIAL_REGISTRATION_PAGE:"PartialRegistrationPage",PARTIAL_CHANGE_PASSWORD_PAGE:"PartialChangePasswordPage",LIMITED_CHANGE_PASSWORD_PAGE:"LimitedChangePasswordPage",ADDRESS_PAGE:"AddressPage",INTERACTION_PAGE:"InteractionPage"},t.groupTypeRank=[t.groupType.INTERACTION_PAGE,t.groupType.REGISTRATION_PAGE,t.groupType.ADDRESS_PAGE,t.groupType.LOGIN,t.groupType.PARTIAL_LOGIN,t.groupType.MULTI_PAGE_LOGIN,t.groupType.CARDS_PAGE,t.groupType.PARTIAL_CARDS_PAGE,t.groupType.PERSONAL_INFO_PAGE,t.groupType.CHANGE_PASSWORD_PAGE,t.groupType.PARTIAL_REGISTRATION_PAGE,t.groupType.PARTIAL_CHANGE_PASSWORD_PAGE,t.groupType.LIMITED_CHANGE_PASSWORD_PAGE],t.anyFieldTypes={ANY_LOGIN_FIELD:"AnyLoginField",ANY_LOGIN_FIELD_EX:"AnyLoginFieldEx",ANY_LOGIN_BUTTON:"AnyLoginButton",ANY_CHANGE_PASSWORD_BUTTON:"AnyChangePasswordButton",ANY_LOGIN_PASSWORD_FIELD:"AnyLoginPasswordField",ANY_CHANGE_PASSWORD_FIELD:"AnyChangePasswordField"},t.loginType={USERNAME:"Username",PASSWORD:"Password",LOGIN_BUTTON:"LoginButton"},t.anyInputTypes={ANY_INPUT_BUTTON_TYPE:"AnyInputButtonType"},t.groupCategorization={MAPPING_FIELDS:"MappingFields",INPUT_FIELDS:"InputFields",GROUP_TYPE:"GroupType",FIELD_TYPE:"FieldType",INPUT_TYPE:"InputType",LOGIN_TYPE:"LoginType",PARTIAL:"Partial",LOGIN_CATEGORIZATIONS:"LoginCategorizations",PAGE_CATEGORIZATIONS:"PageCategorizations"},t.telemetry={CATEGORY:"wax",VALIDATION_TIMEOUT:300,ANALYSIS_THRESHOLD:2500,TRACKING_ID:"UA-80690213-3"},t.telemetry.config={ENABLE_TELEMETRY:"false",ENABLE_DETECTION_FAILURE_TELEMETRY:"false",ENABLE_ADDRESS_DETECTION_TELEMETRY:"false"},t.telemetry.type={FILL_FAILURE:"fillfailure",FIELD_CHANGED:"fieldchanged",FILL_SUCCESS:"fillsuccess",DETECTION_FAILURE:"detectionfailure",REG_ADDRESS_DETECTION:"regaddressdetection"},t.telemetry.parameters={TAG_NAME:"cd4",INPUT_TYPE:"cd5",ID:"cd6",NAME:"cd7",PLACE_HOLDER:"cd8",CLASS_NAME:"cd9",FIELD_INNER_TEXT:"cd10",FORM_ID:"cd11",FORM_NAME:"cd12",URL:"cd13",FORM_TYPES:"cd14"},t.parsePreferences={PARSE_CRITERIAS:"ParseCriterias",REGEX_ENABLED_FIELDS:"RegexEnabledFields"},t.fieldsCombinationMapping={[t.groupType.REGISTRATION_PAGE]:[[t.fieldType.EMAIL,t.fieldType.FIRST_NAME],[t.fieldType.FIRST_NAME,t.fieldType.LAST_NAME],[t.fieldType.EMAIL,t.fieldType.FULL_NAME],[t.fieldType.EMAIL,t.fieldType.VERIFY_EMAIL],[t.fieldType.EMAIL,t.fieldType.LOGIN_NAME],[t.fieldType.FULL_NAME,t.fieldType.LOGIN_NAME]],[t.groupType.ADDRESS_PAGE]:[[t.fieldType.ADDRESS,t.fieldType.ZIP_CODE],[t.fieldType.ADDRESS_LINE2,t.fieldType.ZIP_CODE],[t.fieldType.CITY,t.fieldType.ZIP_CODE],[t.fieldType.STATE,t.fieldType.ZIP_CODE],[t.fieldType.REGION,t.fieldType.ZIP_CODE]]},t.parseCriterias={EVENT_OBECTS:"EventObjects",IGNORE_FIELD_SETS:"IgnoreFieldSets",VERIFY_ATTRIBUTE_BY_ATTACHED_TEXT:"VerifyAttributeByAttachedText",ENABLE_SORTING:"EnableSorting",CHECK_IF_OUT_OF_BOUNDS:"CheckIfOutOfBounds",USE_PATTERN_MATCHING:"UsePatternMatching",IGNORE_HIDDEN_INPUTS:"IgnoreHiddenInputs",ALLOW_PAGE_PORT_VIEW:"AllowPagePortView",ENABLE_AJAX_SUPPORT:"EnableAjaxSupport",USE_GLOBAL_LOOKUP_CACHE:"UseGlobalLookupCache",LOGIN_EVENT_REPLAY:"LoginEventReplay",USE_GROUP_PATTERN_MATCHING:"UseGroupPatternMatching",LOGIN_THREAD_CALLBACK_REPLAY:"LoginThreadCallbackReplay",ATTACHED_TEXT_LENGTH:"AttachedTextLength",ATTACHED_TEXT_PIXEL_SIZE:"AttachedTextPixelSize",USE_REG_EX_ON_EVENT_OBJECTS:"UseRegExOnEventObjects",USE_REG_EX_ON_IMAGES:"UseRegExOnImages",IGNORE_IMAGES:"IgnoreImages",DETERMINISTIC_EVENT_REPLAY:"DeterministicEventReplay",DONT_VALIDATE_FIELD_TYPE:"DontValidateFieldType",DONT_CATEGORIZE_AS_MULTIPLE_PAGE_LOGIN:"DontCategorizeAsMultiPageLogin",VERIFY_DOCUMENT_WIDTH_AND_HEIGHT:"VerifyDocumentWidthAndHeight",INPUTS_ONLY:"InputsOnly",IGNORE_FORMS:"IgnoreForms",ADD_SHADOW_DOM_FIELDS:"AddShadowDomFields",DONT_PERFORM_GROUP_CATEGORIZE:"DontPerformGroupCategorize",DONT_PERFORM_FIELD_MAPPING:"DontPerformFieldMapping",CHROME_DONT_USE_JAVA_SCRIPT:"ChromeDontUseJavaScript",DONT_PARSE:"DontParse",CARDS_EVENT_REPLAY:"CardsEventReplay",IGNORE_FRAMEWORK_SUBMIT:"IgnoreFrameworkSubmit",SKIP_DOCS_WITH_FEW_ELEMENTS:"SkipDocsWithFewElements",ENABLE_FORM_EXIST_VALIDATION:"EnableFormExistValidation",DONT_USE_CUSTOM_SUBMIT_HOOK:"DontUseCustomSubmitHook",DONT_USE_PASSWORD_FIELD_CORRECTION:"DontUsePasswordFieldCorrection"},t.keyCode={ENTER:13},t.performanceReporter={COMPONENT:{WAX:"wax"},TYPE:{DO_PARSE:"doParse",INIT:"init",FIELD_MAPPING_PROCESS_PAGE:"fieldMappingProcessPage",FIELD_GROUP_MAPPING_PROCESS_PAGE:"fieldGroupMappingProcessPage",GROUP_CATEGORIZATION_PROCESS_PAGE:"groupCategorizationProcessPage",PROCESS_GROUP_CATEGORIZATION_RESULTS:"processGroupCategorizationResults",INIT_WITH_THRESHOLD:"waxInitWithThreshold"}},t.formDataPublicKey="-----BEGIN PUBLIC KEY----- MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA55eUNAVhz6OhVq4mWyX3 PUtVSidog8NA0k+kzYzHkc1V8wEAqIjz8ELFmeW1UcczR8gQgrCP66XuSl3D/LV6 qzY6ATCbLrvc8VPR6MG5gKEw8D6DFp2lCAeeMZncCu9jlYohjTIH6pJtN7yfLibJ 5aKlcHpE+IG5ktl9jDKEjICdA7WpcN0HXIB/7j/mSxy32GJ7tVWdGylLk6Wlf+qz YUZ3DrwxkJzMVxOm6EmROD0nVhv6gN728o0Mtl1scPgqKP4LG039eHyNV9fvDARU gWpEkzb5V+Fh/Mspz9NOQaIBEBTyxZ59wsCotRx2zNSatDlxgVOZsXvVFVC2IGEm maTyfpmwxatIBlFGQOewgX30NjVCkXSP3iQdIa7QxaAz0drvEOhNxIHCYz4SdJtt ajGipjsYKg9Sh2bDOfmWCttP2AQ7l32NtJdi9NG1dEbq2D7z4u1SH51Xy2Vm2qgb QMUXdGJGivtul32y1oNJuDMEVfJ2+St8YDEXFbFP36wxrsmXYFm0XUwk1ulREBjI HUoPEAnVONHDxFtYvo2PFDYkxctnksr+SyatlIZcVx03lG68gUOea9s6d5CDN+T/ hqMetpYpdDOwAIk5g417JMRluod7CgIK+CzZ3kdSAPjEKWH4ImP+xbpKBF2JV6Jt 6vopZeo/hiZEbsXLtDLweIECAwEAAQ== -----END PUBLIC KEY-----";const r={CDN_FORMDATA_BASE_URL:"https://static.nortoncdn.com/idsafe/waxFormdata/v1/"};return r.CDN_L10N_JSON_URL=r.CDN_FORMDATA_BASE_URL+"l10n/",r.L10N_US_CODE="us",r.MASKED_PASSWORD_CHAR=8226,t.cloudFormData=r,t.textPosition={Invalid:0,Center:1,Left:2,FarLeft:4,Top:8,Bottom:32,Right:64,FarRight:128,CenterTop:9,LeftTop:10,FarLeftTop:12,RightTop:72,FarRightTop:136,LeftCenter:3,FarLeftCenter:5,RightCenter:65,FarRightCenter:129,CenterBottom:33,LeftBottom:34,FarLeftBottom:36,RightBottom:96,FarRightBottom:160},t.elementType={Unknown:0,Label:1,TableCell:2,Header:3,Table:4,TableBody:5,TableRow:6,Input:7,TextArea:8,Button:9,Image:10,Select:11,Link:12,Container:13,SelectOption:14,Generic:15,Form:16,Comments:17,FieldSet:18},t.languageQueryParameterKeys=["lang",".lang","hl"],t.fieldTypeToPIIIdentifiers={[t.fieldType.SSN]:27,[t.fieldType.CREDIT_CARD_HOLDER_NAME]:71,[t.fieldType.CREDIT_CARD_HOLDER_FIRST_NAME]:72,[t.fieldType.CREDIT_CARD_HOLDER_LAST_NAME]:73,[t.fieldType.CREDIT_CARD_TYPE]:74,[t.fieldType.CREDIT_CARD_NUMBER]:75,[t.fieldType.CREDIT_CARD_EXPIRATION_DATE]:76,[t.fieldType.CREDIT_CARD_EXPIRATION_MONTH]:77,[t.fieldType.CREDIT_CARD_EXPIRATION_YEAR]:78,[t.fieldType.CREDIT_CARD_SECURITY_CODE]:79,[t.fieldType.CREDIT_CARD_START_DATE]:80,[t.fieldType.CREDIT_CARD_START_MONTH]:81,[t.fieldType.CREDIT_CARD_START_YEAR]:82,[t.fieldType.CREDIT_CARD_ISSUE_NUMBER]:83,[t.fieldType.LOGIN_NAME]:1,[t.fieldType.PASSWORD]:2,[t.fieldType.PASSWORD_PLACEHOLDER]:3,[t.fieldType.VERIFY_PASSWORD]:4,[t.fieldType.PASSWORD_HINT]:5,[t.fieldType.LOGIN_BUTTON]:6,[t.fieldType.SIGNUP_BUTTON]:7,[t.fieldType.CONTINUE_BUTTON]:8,[t.fieldType.SIGNON_DESTINATION]:9,[t.fieldType.EMAIL]:10,[t.fieldType.VERIFY_EMAIL]:11,[t.fieldType.ALTERNATE_EMAIL]:12,[t.fieldType.FULL_NAME]:13,[t.fieldType.FIRST_NAME]:14,[t.fieldType.LAST_NAME]:15,[t.fieldType.MIDDLE_NAME]:16,[t.fieldType.PREFIX]:17,[t.fieldType.SUFFIX]:18,[t.fieldType.FULL_NAME_PHONETIC]:19,[t.fieldType.FIRST_NAME_PHONETIC]:20,[t.fieldType.LAST_NAME_PHONETIC]:21,[t.fieldType.MIDDLE_NAME_PHONETIC]:22,[t.fieldType.FULL_NAME_ROMAN]:23,[t.fieldType.FIRST_NAME_ROMAN]:24,[t.fieldType.LAST_NAME_ROMAN]:25,[t.fieldType.MIDDLE_NAME_ROMAN]:26,[t.fieldType.ADDRESS]:28,[t.fieldType.ADDRESS_LINE2]:29,[t.fieldType.ADDRESS_LINE3]:30,[t.fieldType.ADDRESS_PHONETIC]:31,[t.fieldType.ADDRESS_LINE2_PHONETIC]:32,[t.fieldType.ADDRESS_LINE3_PHONETIC]:33,[t.fieldType.CITY]:34,[t.fieldType.CITY_PHONETIC]:35,[t.fieldType.ZIP_CODE]:36,[t.fieldType.STATE]:37,[t.fieldType.REGION]:38,[t.fieldType.HOUSE_NUMBER]:39,[t.fieldType.HOUSE_NAME]:40,[t.fieldType.VILLAGE]:41,[t.fieldType.SUB_AREA]:42,[t.fieldType.BLOCK_NUMBER]:43,[t.fieldType.DISTRICT]:44,[t.fieldType.APARTMENT_NUMBER]:45,[t.fieldType.APARTMENT_FLOOR]:46,[t.fieldType.SUITE_NUMBER]:47,[t.fieldType.BIRTH_DATE]:48,[t.fieldType.BIRTH_DAY]:49,[t.fieldType.BIRTH_MONTH]:50,[t.fieldType.BIRTH_YEAR]:51,[t.fieldType.DATE]:52,[t.fieldType.DAY]:53,[t.fieldType.MONTH]:54,[t.fieldType.YEAR]:55,[t.fieldType.ACCOUNT_NUMBER]:56,[t.fieldType.PIN]:57,[t.fieldType.ROUTING_NUMBER]:58,[t.fieldType.PHONE_NUMBER_COUNTRY_CODE]:59,[t.fieldType.PHONE_NUMBER_AREA_CODE]:60,[t.fieldType.PHONE_NUMBER_EXTENSION]:61,[t.fieldType.PHONE_NUMBER]:62,[t.fieldType.PHONE_NUMBER_WORK]:63,[t.fieldType.PHONE_NUMBER_WORK_FAX]:64,[t.fieldType.PHONE_NUMBER_HOME]:65,[t.fieldType.PHONE_NUMBER_FAX]:66,[t.fieldType.PHONE_NUMBER_CELL]:67,[t.fieldType.SECURITY_QUESTION]:68,[t.fieldType.ANSWER]:69,[t.fieldType.GENDER]:70,[t.fieldType.COMPANY]:84,[t.fieldType.DEPARTMENT]:85,[t.fieldType.WORK_ID]:86,[t.fieldType.WORK_JOB_TITLE]:87,[t.fieldType.WORK_EMAIL]:88,[t.fieldType.WORK_ADDRESS]:89,[t.fieldType.WORK_CITY]:90,[t.fieldType.WORK_ZIP_CODE]:91,[t.fieldType.WORK_STATE]:92,[t.fieldType.WORK_REGION]:93,[t.fieldType.WORK_WEBSITE]:94,[t.fieldType.SEARCH]:95,[t.fieldType.LANGUAGE]:96,[t.fieldType.OPEN_ID]:97,[t.fieldType.VERIFICATION_CODE]:98,[t.fieldType.WEBSITE]:99,[t.fieldType.MOTHERS_MAIDEN_NAME]:100,[t.fieldType.TIMEZONE]:101,[t.fieldType.DOMAIN]:102,[t.fieldType.AJAX_ACTION]:103,[t.fieldType.SKIP_FIELD]:104,[t.fieldType.IGNORE_FIELD]:124,[t.fieldType.GENDER_MALE]:155,[t.fieldType.GENDER_FEMALE]:156,[t.fieldType.SEARCH_BUTTON]:157,[t.fieldType.MUTLI_SPAN_USERNAME]:158},t.fieldFilter={},t.fieldFilter.type={ALL:"ALL",CATEGORIZED_INPUT_FIELDS:"CATEGORIZED_INPUT_FIELDS",CATEGORIZED_INPUT_AND_NONINPUT_FIELDS:"CATEGORIZED_INPUT_AND_NONINPUT_FIELDS",CATEGORIZED_EMAIL_FIELDS:"CATEGORIZED_EMAIL_FIELDS"},t.fieldCategory={EMAIL:"email"},t.FIELD_STYLING={DIV_HEIGHT_REC:22,DIV_HEIGHT_RATIO:16,DIV_LEFT_RTL:6,DIV_LEFT_LTR:180,DIV_WIDTH_REC:186,MAX_ICON_HEIGHT_WIDTH:24,MIN_ICON_HEIGHT_WIDTH:16},t.NORTON_PASSWORD_MANAGER_DIV_ID="norton-idsafe-field-styling-divId",t.LEFT_POSITION_SPACING_DECREMENT_VALUE=10,t.tabStatus={COMPLETE:"complete",LOADING:"loading"},t.formEvents={FORMS_FOUND:"4AF4F7BD-9AB6-4308-9C68-420FAAE6177C",FORM_SUBMIT:"F5B47B7B-C96E-48F1-AC71-C71F31435965",ALL_FORM_ELEMENTS_REMOVED:"415DA29C-3871-45AF-8321-D08B644B0809"},t.DATA_NLOCK_REF_GUID="data-nlok-ref-guid",t.WAX_JSON_DOWNLOAD="wax-json-download",t.WAX_JSON_DOWNLOAD_RETRY="wax-json-download-retry",t.WAX_RULES_DOWNLOAD_INTERVAL=864e5,t.WAX_RULES_RETRY_INTERVAL=18e5,t.WAX_STORAGE_CONTAINER="10a259c2-f812-4c39-9516-2a513734e1d5",t.MILLISECONDS_MINUTES_CONVERSION=6e4,t.WAX_STORAGE={WAX_STORAGE_CONTAINER:"10a259c2-f812-4c39-9516-2a513734e1d5",WAX_RULES_DOWNLOAD_TIMESTAMP:"wax_rules_download_timestamp",PARSE_PREFERENCE_JSON:"parse_preference_json",RULES_JSON:"rules_json",DOMAINS_DATA:"domains_data",GLOBAL_JSON:"global_json",URL_BASED_DATA:"url_based_data"},t}(e.SymWax)}(window),function(e){const{settings:t,utils:{isntNil:r}}=SymBfw,{constants:n}=SymWax;e.SymWax.storageContainer=new class{constructor(){this._container=null}initialize(){return new Promise(((e,o)=>{if(r(this._container))return e(!0);t.loadSettingsContainer(n.WAX_STORAGE.WAX_STORAGE_CONTAINER,!0,((t,r,n)=>{!1!==t&&r?(this._container=r,e(!0)):o(n)}))}))}_isStorageInitialized(){return!!this._container}getValue(e){if(this._isStorageInitialized())return this._container.getObject(e)}setValue(e,t){this._isStorageInitialized()&&this._container.setObject(e,t)}},SymWax.storageContainer.initialize()}(window),function(e){const{settings:t,logger:r,utils:{isNumber:n,isObject:o}}=SymBfw,{constants:i,storageContainer:s}=SymWax;e.SymWax.storageUtils=new class{setRulesDownloadedTimeStamp(e){n(e)&&s.setValue(i.WAX_STORAGE.WAX_RULES_DOWNLOAD_TIMESTAMP,e)}getRulesDownloadedTimeStamp(){return s.getValue(i.WAX_STORAGE.WAX_RULES_DOWNLOAD_TIMESTAMP)}getParsePreferenceJson(){return s.getValue(i.WAX_STORAGE.PARSE_PREFERENCE_JSON)}setParsePreferenceJson(e){o(e)?s.setValue(i.WAX_STORAGE.PARSE_PREFERENCE_JSON,e):r.debug("Parse Preferences are not in valid format")}getRulesJson(){return s.getValue(i.WAX_STORAGE.RULES_JSON)}setRulesJson(e){o(e)?s.setValue(i.WAX_STORAGE.RULES_JSON,e):r.debug("Rules are not in valid format")}getDomainsData(){return s.getValue(i.WAX_STORAGE.DOMAINS_DATA)}setDomainsData(e){o(e)?s.setValue(i.WAX_STORAGE.DOMAINS_DATA,e):r.debug("Domains data are not in valid format")}getGlobalJson(){return s.getValue(i.WAX_STORAGE.GLOBAL_JSON)}setGlobalJson(e){o(e)?s.setValue(i.WAX_STORAGE.GLOBAL_JSON,e):r.debug("Global Json are not in valid format")}getUrlBasedData(){return s.getValue(i.WAX_STORAGE.URL_BASED_DATA)}setUrlBasedData(e){o(e)?s.setValue(i.WAX_STORAGE.URL_BASED_DATA,e):r.debug("url based Data not in valid format")}}}(window),function(e){e.SymWax.ParsePreference=function(e,t){var r=e.utils.isNil,n=(e.utils.isntNil,e.utils.isArray,function(e){if(r(e))throw new Error("jsonParsePreference object cannot be null");this._languages=e.Languages,this._overwriteRule=e.OverwriteRule,this._matchFullURLPath=e.MatchFullURLPath,this._parseCriterias=e.ParseCriterias,this._parseCriteriasEx=e.ParseCriteriasEx,this._eventTypes=e.EventTypes,this._matchingProperties=e.MatchingProperties,this._initialParseDelay=e.InitialParseDelay,this._parseRetryInfo=e.ParseRetryInfo,this._ajaxParseRetryInfo=e.AjaxParseRetryInfo,this._signonDestinations=e.SignonDestinations,this._stringPixelSize=e.StringPixelSize,this._regexEnabledFields=e.RegexEnabledFields,this._browsers=e.Browsers,this._groupSeperatorWidth=e.GroupSeperatorWidth,this._mutationObserverTargetElement=e.MutationObserverTarget,this._customEventsAfterFill=e.CustomEventsAfterFill,this._shadowDomTargetElements=e.ShadowDomTargets});return n.prototype.isOverwriteRuleAvailable=function(){return this._overwriteRule},n.prototype.isMatchFullURLPathPresent=function(){return this._matchFullURLPath},n.prototype.getMutationObserverTargetElement=function(){return this._mutationObserverTargetElement},n.prototype.getShadowDomTargetElements=function(){return this._shadowDomTargetElements},n.prototype.getParseCriterias=function(){return this._parseCriterias},n.prototype.getParseCriteriasEx=function(){return this._parseCriteriasEx},n.prototype.getEventTypes=function(){return this._eventTypes},n.prototype.getLanguages=function(){return this._languages},n.prototype.getMatchingProperties=function(){return this._matchingProperties},n.prototype.getInitialParseDelay=function(){return this._initialParseDelay},n.prototype.getParseRetryInfo=function(){return this._parseRetryInfo},n.prototype.getAjaxParseRetryInfo=function(){return this._ajaxParseRetryInfo},n.prototype.getSignonDestinations=function(){return this._signonDestinations},n.prototype.getStringPixelSize=function(){return this._stringPixelSize},n.prototype.getBrowsers=function(){return this._browsers},n.prototype.getRegexEnabledFields=function(){return this._regexEnabledFields},n.prototype.getGroupSeperatorWidth=function(){return this._groupSeperatorWidth},n.prototype.getCustomEventsAfterFill=function(){return this._customEventsAfterFill},n.prototype.serialize=function(){return{OverwriteRule:this.isOverwriteRuleAvailable(),MatchingProperties:this.getMatchingProperties(),ParseCriterias:this.getParseCriterias(),EventTypes:this.getEventTypes(),SignonDestinations:this.getSignonDestinations(),ParseCriteriasEx:this.getParseCriteriasEx(),InitialParseDelay:this.getInitialParseDelay(),ParseRetryInfo:this.getParseRetryInfo(),Languages:this.getLanguages(),MatchFullURLPath:this.isMatchFullURLPathPresent(),AjaxParseRetryInfo:this.getAjaxParseRetryInfo(),StringPixelSize:this.getStringPixelSize(),Browsers:this.getBrowsers(),RegexEnabledFields:this.getRegexEnabledFields(),GroupSeperatorWidth:this.getGroupSeperatorWidth(),MutationObserverTarget:this.getMutationObserverTargetElement(),CustomEventsAfterFill:this.getCustomEventsAfterFill(),ShadowDomTargets:this.getShadowDomTargetElements()}},n}(e.SymBfw,e.SymWax)}(window),function(e){e.SymWax.formDataFactory=function(e,t){var r=e.utils.isNil;const n=e.utils.isEmptyObject;var o=e.utils.isntNil,i=e.utils.isArray;const s=t.constants;var a={},u=function(){this._parsePreference={},this._rule={},this._global={},this._urlBasedData={},this._l10n={countries:[],attributes:[]}};return u.prototype.getParsePreference=function(){return this._parsePreference},u.prototype.getRule=function(){return this._rule},u.prototype.getGlobal=function(){return this._global},u.prototype.getUrlBasedData=function(){return this._urlBasedData},u.prototype.getL10nCountries=function(){return this._l10n.countries},u.prototype.getValidL10nCountries=function(){const e=this.getL10nCountries();return this._getValidFormData(e)},u.prototype.getL10nAttributes=function(){return this._l10n.attributes},u.prototype.getValidL10nAttributes=function(){const e=this.getL10nAttributes();return this._getValidFormData(e)},u.prototype._getValidFormData=function(e){return e.filter((e=>!n(e[s.DATA])&&!n(e[s.FIELD_TYPE])))},u.prototype.serialize=function(){return{parsePreference:this.getParsePreference().serialize(),rule:this.getRule(),global:this.getGlobal(),urlBasedData:this.getUrlBasedData(),l10n:{countries:this.getL10nCountries(),attributes:this.getL10nAttributes()}}},u.prototype.setParsePreference=function(e){if(r(e))throw new Error("parsePreference cannot be nil");this._parsePreference=new t.ParsePreference(e)},u.prototype.setRule=function(e){if(r(e))throw new Error("rule cannot be nil");this._rule=e},u.prototype.setGlobal=function(e){if(r(e))throw new Error("global cannot be nil");this._global=e},u.prototype.setUrlBasedData=function(e){if(r(e))throw new Error("urlBasedData cannot be nil");this._urlBasedData=e},u.prototype.setL10nCountries=function(e){if(!i(e))throw new Error("countries must be an array");this._l10n.countries=e},u.prototype.setL10nAttributes=function(e){if(!i(e))throw new Error("attributes must be an array");this._l10n.attributes=e},u.prototype.appendL10nCountries=function(e){if(!i(e))throw new Error("countries must be an array");this._l10n.countries=this._l10n.countries.concat(e)},u.prototype.appendL10nAttributes=function(e){if(!i(e))throw new Error("attributes must be an array");this._l10n.attributes=this._l10n.attributes.concat(e)},u.prototype.prependL10nCountries=function(e){if(!i(e))throw new Error("countries must be an array");this._l10n.countries=e.concat(this._l10n.countries)},u.prototype.prependL10nAttributes=function(e){if(!i(e))throw new Error("attributes must be an array");this._l10n.attributes=e.concat(this._l10n.attributes)},a.filterRegexInCountryData=function(e,r){const n=t.constants,o=r||[];return o.length>0?o.includes(n.fieldType.ALL)?e:e.map((e=>{const t=e[n.FIELD_TYPE];let r=[];o.forEach((e=>{let n=t.indexOf(e);n>-1&&r.push(n)}));let i=e[n.REGEX];return r.length>0?Object.keys(i).forEach((t=>{let o=i[t];r.includes(o)||delete e[n.REGEX][t]})):e[n.REGEX]={},e})):(e.map((e=>(e[n.REGEX]={},e))),e)},a.create=function(e){var t=new u;if(o(e)&&(o(e.parsePreference)&&t.setParsePreference(e.parsePreference),o(e.rule)&&t.setRule(e.rule),o(e.global)&&t.setGlobal(e.global),o(e.urlBasedData)&&t.setUrlBasedData(e.urlBasedData),o(e.l10n))){if(i(e.l10n.countries)){const r=t.getParsePreference().getRegexEnabledFields()||[];let n=e.l10n.countries;r.length>0&&(n=a.filterRegexInCountryData(e.l10n.countries,r)),t.setL10nCountries(n)}i(e.l10n.attributes)&&t.setL10nAttributes(e.l10n.attributes)}return t},t.FormData=u,a}(e.SymBfw,e.SymWax)}(window),function(e){e.SymWax.formDataLoader=function(e,t){var r=e.utils.isNil,n=e.utils.isArray,o=e.utils.isString,i=e.utils.isFunction,s=e.utils.appendToObject,a=e.utils.isntNil,u=e.logger,l=e.extensionAdapter,c=t.constants,d=(e.utils.isSuccessCode,e.utils.isSuccessCodeLocalFile),f={};const p=e.alarmHelper,h=t.storageUtils,_=t.storageContainer;return f._parsePreferencesData=null,f._domainsData=null,f._urlBasedData=null,f._globalData=null,f._countryMap=new Map,f._rulesJson=null,f._browserLanguage=null,f._overwriteParsePreference=null,f.initialize=function(e,t){return a(e)&&(f._browserLanguage=e),a(t)&&t instanceof Object&&(f._overwriteParsePreference=t),new Promise((function(e,t){f._downloadWaxJson().then((function(){return e()}),(function(e){return t(new Error("Failed to load one or more JSON files"))}))}))},f._downloadWaxJson=function(){return new Promise(((e,t)=>{if(!f._canDownloadRules())return f.setJsonInMemory(),e();f._downloadJsonFiles().then((function(){return h.setRulesDownloadedTimeStamp(Date.now()),f._registerScheduler(),e()}),(function(e){f._registerRetryScheduler(),u.log("Failed to load json, registering retry scheduler"),t(new Error(`Failed to load files with error ${e}`))}))}))},f.setJsonInMemory=function(){f._rulesJson=h.getRulesJson(),f._parsePreferencesData=h.getParsePreferenceJson(),f._domainsData=h.getDomainsData(),f._urlBasedData=h.getUrlBasedData(),f._globalData=h.getGlobalJson()},f._canDownloadRules=function(){const e=h.getRulesDownloadedTimeStamp();return!!r(e)||e+c.WAX_RULES_DOWNLOAD_INTERVAL<=Date.now()},f._downloadJsonFiles=function(){const e=[];return e.push(f._downloadRulesJson()),e.push(f._downloadParsePreferenceJson()),e.push(f._downloadUrlBasedDataJson()),e.push(f._downloadDomainsJson()),e.push(f._downloadGlobalJson()),Promise.all(e)},f._registerScheduler=async function(){await p.setAlarm(c.WAX_JSON_DOWNLOAD,{periodInMinutes:c.WAX_RULES_DOWNLOAD_INTERVAL/c.MILLISECONDS_MINUTES_CONVERSION})},f._registerRetryScheduler=async function(){await p.setAlarm(c.WAX_JSON_DOWNLOAD_RETRY,{delayInMinutes:c.WAX_RULES_RETRY_INTERVAL/c.MILLISECONDS_MINUTES_CONVERSION})},f.handleScheduler=async function(e){e.name!==c.WAX_JSON_DOWNLOAD&&e.name!==c.WAX_JSON_DOWNLOAD_RETRY||(await _.initialize(),f._downloadWaxJson())},f._getJSON=function(e,t,r){return new Promise((function(n,o){f._FetchJSON(e).then((function(e){n(e)}),(function(i){let s="Failed to load the file from cloud:"+e;a(i)&&(s+=" Error: "+i.message),u.error(s),f._FetchJSON(r).then((function(e){n(e)}),(function(e){t?n():o(e)}))}))}))},f._FetchJSON=function(t){if(r(t))throw new Error("invalid arguments to _FetchJSON");return new Promise((function(r,n){e.utils.safeFetch(t).then((function(e){d(e.status)?e.json().then((function(e){f._validateJSON(e)?r(JSON.stringify(e.payload)):n(new Error("could not validate json file "+t))})).catch((e=>{n(new Error(`could be syntax error ${e.message}`))})):n(new Error("Fetch "+t+" returned status : "+e.status))}),(function(e){n(e)}))}))},f._mergeParsePreference=function(t){if(r(t))throw new Error("DefaultPreference cannot be nil");const o=f._overwriteParsePreference,i={[c.parsePreferences.PARSE_CRITERIAS]:()=>{const r=c.parseCriterias,n=t[c.DEFAULT_PARSINGPREFERENCES][c.parsePreferences.PARSE_CRITERIAS]||[],i=o[c.parsePreferences.PARSE_CRITERIAS];if(!(i instanceof Object))return{};let s=Array.from(n);return Object.keys(i).forEach((t=>{let n=Object.values(r).includes(t),o=e.utils.isBoolean;if(n&&o(i[t]))if(i[t])s.includes(t)||s.push(t);else{s.indexOf(t)>-1&&s.splice(s.indexOf(t),1)}else u.debug(n?"Expected Boolean but got unsupported value type for "+t:"Unknown ParseCriteria: "+t);return{}})),{[c.parsePreferences.PARSE_CRITERIAS]:s}},[c.parsePreferences.REGEX_ENABLED_FIELDS]:()=>{const e=Object.values(c.fieldType),t=o[c.parsePreferences.REGEX_ENABLED_FIELDS];if(!n(t))return{};let r=[];return t.includes(c.fieldType.ALL)?r.push(c.fieldType.ALL):t.forEach((t=>{Object.values(e).includes(t)&&r.push(t)})),{[c.parsePreferences.REGEX_ENABLED_FIELDS]:r}}},s=Object.keys(o).map((e=>{if(i[e])return i[e]();{let r=Object.keys(t[c.DEFAULT_PARSINGPREFERENCES]).includes(e);u.debug(r?e+" can't be overwritten":"Unknown ParsePreference: "+e)}})).reduce(((e,t)=>Object.assign({},e,t)),t[c.DEFAULT_PARSINGPREFERENCES]);return Object.assign({},t,{DefaultParsingPreferences:s})},f._validateJSON=e=>!r(e.payload)&&!r(e.JWT)&&!!f._verifyJson(e.payload,e.JWT),f._verifyJson=function(e,t){try{let r=forge.md.sha256.create();r.update(JSON.stringify(e));const n=r.digest().toHex(),o=KEYUTIL.getKey(c.formDataPublicKey);if(!0===KJUR.jws.JWS.verify(t,o,["RS256"])){let e=b64utoutf8(t.split(".")[1]);return KJUR.jws.JWS.readSafeJSONString(e).hash===n}return!1}catch(e){return u.error(e),!1}},f._getParsePreferencesRulesJSON=function(){return new Promise((function(e,t){if(a(f._parsePreferencesData))return e();const r=h.getParsePreferenceJson();if(a(r))return f._parsePreferencesData=r,e();f._downloadParsePreferenceJson().then((()=>e())).catch((e=>t(e)))}))},f._downloadParsePreferenceJson=function(){return new Promise(((e,t)=>{f._getJSON(c.cloudFormData.CDN_FORMDATA_BASE_URL+"parsepreferences.json",!1,l.getExtensionURL("content/formdata/parsepreferences.json")).then((function(n){if(r(n))return u.error("could not load parsepreferences.json"),t(new Error("could not parse preference "));let o=JSON.parse(n);return a(f._overwriteParsePreference)?f._parsePreferencesData=f._mergeParsePreference(o):f._parsePreferencesData=o,h.setParsePreferenceJson(f._parsePreferencesData),e(f._parsePreferencesData)}),(function(e){t(e)}))}))},f.getParsePreferenceForURL=function(e){return f._getParsePreferencesRulesForURL(e)},f._getParsePreferencesRulesForURL=function(t){if(!o(t))throw new Error("invalid arguments to _getParsePreferencesRulesForURL");return new Promise((function(n,o){f._getParsePreferencesRulesJSON().then((function(){if(r(f._parsePreferencesData))return o(new Error("could not parse preference "));var i;f._parsePreferencesData.hasOwnProperty(c.DEFAULT_PARSINGPREFERENCES)&&(i=JSON.parse(JSON.stringify(f._parsePreferencesData[c.DEFAULT_PARSINGPREFERENCES])));var u=e.utils.getDomain(t);a(u)&&f._parsePreferencesData.hasOwnProperty(c.DOMAIN_RULES)&&f._parsePreferencesData[c.DOMAIN_RULES].hasOwnProperty(u)&&s(i,f._parsePreferencesData[c.DOMAIN_RULES][u]);var l=e.utils.urlWithoutQueryParameters(t,!1);return a(l)&&f._parsePreferencesData.hasOwnProperty(c.URL_RULES)&&f._parsePreferencesData[c.URL_RULES].hasOwnProperty(l)&&s(i,f._parsePreferencesData[c.URL_RULES][l]),n(i)}),(function(e){return o(new Error("could not parse preference "+e))}))}))},f._getRules=function(e){if(!o(e))throw new Error("Invalid arguments passed to _getRules");return new Promise((function(t,n){f._getRulesJson().then((function(){if(r(f._rulesJson))return u.error("unable to load rules.json file"),n(new Error("Failed to parse rules json"));var o=f._processRulesJson(e);if(r(o))return n(new Error("Failed to parse rules json"));t(o)}),(function(e){n(new Error("Failed to parse rules json"))}))}))},f._getRulesJson=function(){return new Promise((function(e,t){if(a(f._rulesJson))return e(f._rulesJson);const r=h.getRulesJson();if(a(r))return f._rulesJson=r,e(f._rulesJson);f._downloadRulesJson().then((()=>{e()})).catch((e=>{t(e)}))}))},f._downloadRulesJson=function(){return new Promise(((e,t)=>{f._getJSON(c.cloudFormData.CDN_FORMDATA_BASE_URL+"rules.json",!1,l.getExtensionURL("content/formdata/rules.json")).then((function(n){if(r(n))return t(new Error("Failed to parse rules json"));f._rulesJson=JSON.parse(n),h.setRulesJson(f._rulesJson),e()}),(function(e){t(e)}))}))},f._processRulesJson=function(t){if(o(t)){if(!r(f._rulesJson)){var n={},i=e.utils.baseURL(t);if(!r(i)){var a=e.utils.pathName(t);if(f._rulesJson.hasOwnProperty(i)){if(f._rulesJson[i].hasOwnProperty(c.NORMALIZE_URL)){const e=f._rulesJson[i][c.NORMALIZE_URL];if(e)for(let t of e){const e=t[c.ORIGINAL_URL].replace(/\//g,"\\/"),r=new RegExp(e);if(-1!==a.search(r)){a=a.replace(r,t[c.NORMALIZED_URL]);break}}}f._rulesJson[i].hasOwnProperty(a)&&s(n,f._rulesJson[i][a][c.RULES])}return n}}}else u.error("Invalid parameters passed to _processRulesJson")},f._getCountryJSONSForGivenCodes=function(e,t,i){if(!n(e)||!n(t)||!o(i))throw new Error("invalid arguments to _getCountryJSONSForGivenCodes");return new Promise((function(n,o){for(var s=[],u=[],d=0;d<e.length;d++){let n=c.cloudFormData.CDN_L10N_JSON_URL+t[e[d]],p="/content/formdata/l10n/"+t[e[d]];if(i===c.COUNTRY_DATA)n+=".json",p+=".json";else{if(i!==c.COUNTRY_ATTRIBUTE)return o("Invalid type");n+=".att.json",p+=".att.json"}const h=f._countryMap.get(n);if(r(h)){let e=f._getJSON(n,!0,l.getExtensionURL(p));e.then((function(e){a(e)&&(f._countryMap.set(n,JSON.parse(e)),s.push(JSON.parse(e)))}),(function(e){o(e)})),u.push(e)}else s.push(h)}Promise.all(u).then((function(){return n(s)})).catch((function(){return o(new Error("Could not load all country json for given URL"))}))}))},f._getDomainsJSON=function(){return new Promise((function(e,t){if(a(f._domainsData))return e();const r=h.getDomainsData();if(a(r))return f._domainsData=r,e();f._downloadDomainsJson().then((()=>e())).catch((e=>t(e)))}))},f._downloadDomainsJson=function(){return new Promise(((e,t)=>{f._getJSON(c.cloudFormData.CDN_FORMDATA_BASE_URL+"domains.json",!1,l.getExtensionURL("content/formdata/domains.json")).then((function(n){return r(n)?(u.error("could not load domains.json"),t(new Error("could not domains"))):(f._domainsData=JSON.parse(n),h.setDomainsData(f._domainsData),e())}),(function(e){t(e)}))}))},f._getGlobalJSON=function(){return new Promise((function(e,t){if(a(f._globalData))return e(f._globalData);const r=h.getGlobalJson();if(a(r))return f._globalData=r,e(f._globalData);f._downloadGlobalJson().then((function(){return e(f._globalData)})).catch((e=>t(e)))}))},f._downloadGlobalJson=function(){return new Promise(((e,t)=>{f._getJSON(c.cloudFormData.CDN_FORMDATA_BASE_URL+"global.json",!1,l.getExtensionURL("content/formdata/global.json")).then((function(n){return r(n)?(u.error("could not load global.json"),t(new Error("could not get global data"))):(f._globalData=JSON.parse(n),h.setGlobalJson(f._globalData),e(f._globalData))}),(function(e){t(e)}))}))},f._getCountryData=function(t,i,s,u){if(!o(t))throw new Error("invalid arguments to _getCountryData");if(!(i instanceof Promise))throw new Error("Type Error: preferencePromise has to be of type Promise");if(r(s)||!n(s))throw new Error("Type Error: languagesFromHTML has to be of type Array<Languages>");if(r(u))throw new Error("invalid arguments to _getCountryData");return new Promise((function(r,n){var o=f._getDomainsJSON();let l=[i,o],d=e.extensionAdapter.detectLanguageByTabId(u.id);a(d)&&l.push(d),Promise.all(l).then((function(o){var i=[],u=[],l=e.utils.getUrlTLD(t),d=f._domainsData[c.COUNTRIES],p=f._domainsData[c.DOMAIN],h=p[l]||[],_=o[0],E=o[2],g=[],m=function(e){if(a(e)&&e.length>0){let t=[];e.forEach((e=>{p[e]&&t.push(...p[e])})),h=Array.from(new Set(h.concat(t)))}};if(a(_)&&a(_[c.LANGUAGES])&&m(_[c.LANGUAGES]),a(E)){let e=e=>{let t=e.split("-");if(1==t.length)return t;{let r=t.map((e=>e.trim())).map((e=>e.toLowerCase()));return r.unshift(e),r}};s=s.concat(e(E))}m(s);let y=d.indexOf(c.cloudFormData.L10N_US_CODE);if(-1===h.indexOf(y)&&h.push(y),a(h)&&h.length>0){var S=f._getCountryJSONSForGivenCodes(h,d,c.COUNTRY_DATA);S.then((function(e){e.length>0&&(i=i.concat(e))}),(function(e){return n(e)})),g.push(S);var T=f._getCountryJSONSForGivenCodes(h,d,c.COUNTRY_ATTRIBUTE);T.then((function(e){e.length>0&&(u=u.concat(e))}),(function(e){return n(e)})),g.push(T)}if(a(f._browserLanguage)&&a(p[f._browserLanguage])){var A=f._getCountryJSONSForGivenCodes(p[f._browserLanguage],d,c.COUNTRY_DATA);A.then((function(e){e.length>0&&(i=i.concat(e))}),(function(e){return n(e)})),g.push(A);var b=f._getCountryJSONSForGivenCodes(p[f._browserLanguage],d,c.COUNTRY_ATTRIBUTE);b.then((function(e){e.length>0&&(u=u.concat(e))}),(function(e){return n(e)})),g.push(b)}Promise.all(g).then((function(){return r({countries:i,attributes:u})}))}),(function(e){return n(e)}))}))},f._getURLBasedDataJSON=function(){return new Promise((function(e,t){if(a(f._urlBasedData))return e();const r=h.getUrlBasedData();if(a(r))return f._urlBasedData=r,e();f._downloadUrlBasedDataJson().then((function(){return e()})).catch((e=>t(e)))}))},f._downloadUrlBasedDataJson=function(){return new Promise(((e,t)=>{f._getJSON(c.cloudFormData.CDN_FORMDATA_BASE_URL+"urlbaseddata.json",!1,l.getExtensionURL("content/formdata/urlbaseddata.json")).then((function(n){return r(n)?(u.error("could not load parse urlbaseddata.json"),t(new Error("could not url based data"))):(f._urlBasedData=JSON.parse(n),h.setUrlBasedData(f._urlBasedData),e())}),(function(e){t(e)}))}))},f._getURLBasedDataForURL=function(t){if(!o(t))throw new Error("invalid arguments to _getURLBasedDataForURL");return new Promise((function(n,o){f._getURLBasedDataJSON().then((function(){if(r(f._urlBasedData))return o(new Error("could not load urlbaseddata.json "));var i={},u=e.utils.baseURL(t);if(a(u)&&f._urlBasedData[c.DATA].hasOwnProperty(u)){var l={};l[f._urlBasedData[c.DATA_TYPE][f._urlBasedData[c.DATA][u]]]=!0,s(i,l)}return n(i)}),(function(e){return o(new Error("could not urlbaseddata "+e))}))}))},f._getDataForURL=function(e,r,n){if(!o(e))throw new Error("Invalid parameter passed to _getDataForURL");return new Promise((function(o,i){var s={};s[c.RULES]=f._getRules(e),s[c.PREFERENCES]=f._getParsePreferencesRulesForURL(e),s[c.COUNTRY_DATA]=f._getCountryData(e,s[c.PREFERENCES],r,n),s[c.URL_BASED_DATA]=f._getURLBasedDataForURL(e),s[c.GLOBAL_DATA]=f._getGlobalJSON(),Promise.all(Object.values(s)).then((function(e){var r=Object.keys(s),n=t.formDataFactory.create();return n.setRule(e[r.indexOf(c.RULES)]),n.setParsePreference(e[r.indexOf(c.PREFERENCES)]),n.setL10nCountries(e[r.indexOf(c.COUNTRY_DATA)].countries),n.setL10nAttributes(e[r.indexOf(c.COUNTRY_DATA)].attributes),n.setUrlBasedData(e[r.indexOf(c.URL_BASED_DATA)]),n.setGlobal(e[r.indexOf(c.GLOBAL_DATA)]),o(n.serialize())}),(function(e){return i(new Error("unable to fetch all the JSON contents for the URL. "+e))}))}))},f.handleMessage=function(e,t,n){if(!r(e)&&i(t)&&(!r(e.payload)&&!r(e.payload.url)&&e.id===c.messages.GET_URL_DATA))return f._getDataForURL(e.payload.url,e.payload.lang,n).then((function(e){t(e)}),(function(e){u.info("Invalid promise return for _getDataForURL, with error:"+e),t(null)})),!0},f}(e.SymBfw,e.SymWax),SymBfw.extensionAdapter.addMessageListener(SymWax.formDataLoader.handleMessage),SymBfw.alarmHelper.registerAlarmListener(SymWax.formDataLoader.handleScheduler)}(window),function(e){e.SymWax.messageHandler=function(e,t){var r={},n=e.utils.isNil,o=e.extensionAdapter,i=t.constants.messages;return r._handleMessage=function(e,t,r){if(!n(e)&&e.id===i.TRIGGER_AJAX_PARSE_RETRY)o.sendMessageToTab(r,{id:i.TRIGGER_AJAX_PARSE_RETRY_RESPONSE})},o.addMessageListener(r._handleMessage),o.addTabUpdatedEventListener((function(e,t,r){o.sendMessageToTab(r,{id:i.TRIGGER_FORCED_WAX_ANALYSIS})})),r}(e.SymBfw,e.SymWax)}(window),function(e){e.SymWax.waxFormSubmissionConstants=function(e){let t={status:{SUCCESS:"SUCCESS",FAILURE:"FAILURE",SUCCESS_TIMEOUT:"SUCCESS_TIMEOUT",FAILURE_TIMEOUT:"FAILURE_TIMEOUT"},message:{SUCCESS_MESSAGE:"Form submission succeed",FAILURE_MESSAGE:"Form submission failed",SUCCESS_TIMEOUT_MESSAGE:"Form submission succeed due to timeout",FAILURE_TIMEOUT_MESSAGE:"Form submission failed due to timeout"},timerStatus:{TIMER_EXPIRED:"timerExpired",TIMER_PENDING:"timerPending"},pageStatus:{INITIAL:"Initial",LOADING_COMPLETED:"LoadingCompleted",LOADING_IN_PROGRESS:"LoadingInProgress",FORM_REMOVED:"FormRemoved"}};return t}(e.SymWax)}(window),function(e){e.SymWax.IFormSubmissionClient=(e.SymBfw,e.SymWax,class{onLoginFormSubmission(e,t){throw new Error("Should be implemented by derived object")}async processSubmissionPayload(e){throw new Error("Should be implemented by derived object")}getConfig(){throw new Error("Should be implemented by derived object")}})}(window),(({SymBfw:e,SymWax:t})=>{!function(e,t){const{extensionAdapter:r,utils:n,logger:o}=e,{isNil:i,isntNil:s,isNumber:a,isObject:u,isInteger:l,isString:c,isArray:d,getDomain:f}=n,{IFormSubmissionClient:p,constants:h,waxFormSubmissionConstants:_,formDataLoader:E}=t,{messages:g,groupType:m,formEvents:{FORMS_FOUND:y,FORM_SUBMIT:S,ALL_FORM_ELEMENTS_REMOVED:T}}=h,{LOGIN:A,PARTIAL_LOGIN:b,INTERACTION_PAGE:O}=m,I=[_.pageStatus.LOADING_COMPLETED,_.pageStatus.FORM_REMOVED];t.waxFormSubmissionHandler=new class{constructor(){this._formSubmissionClient=null,this.initialize=this.initialize.bind(this),this._loginInfoMap=new Map,this._onTabRemoved=this._onTabRemoved.bind(this),this._onTabLoading=this._onTabLoading.bind(this),this._onTabLoadingComplete=this._onTabLoadingComplete.bind(this),this._onTabReplaced=this._onTabReplaced.bind(this),this._handleMessage=this._handleMessage.bind(this),this._loginSubmissionInfo=new Map}initialize(e){if(o.debug("WaxSLD:: WaxFormSubmissionHandler - initialize"),!(e instanceof p))throw new Error("formSubmissionClient has to be of type IFormSubmissionClient");const t=e.getConfig();if(i(t)||!l(t.TIMEOUT))throw new Error("SubmissionClient configuration is null");this._formSubmissionClient=e,this._initListeners()}_addLoginInfo(e,r){if(!a(e))throw new Error("TypeError: tabId has to be of type Number");if(!u(r))throw new Error("TypeError: loginInfo has to be of type Object");const n=new t.LoginInfo;n.set(r),this._loginInfoMap.set(e,n)}_getLoginInfo(e){if(!a(e))throw new Error("TypeError: tabId has to be of type Number");return this._loginInfoMap.get(e)}_deleteLoginInfo(e){if(!a(e))throw new Error("TypeError: tabId has to be of type Number");this._loginInfoMap.delete(e)}_onTabRemoved(e){this._deleteLoginInfo(e),this._deleteLoginSubmissionInfo(e)}_onTabReplaced(e,t){if(!a(e)||!a(t))return void o.error("TypeError: addedTabId and removedTabId has to be of type Number");const r=this._getLoginInfo(t),n=this._getLoginSubmissionInfo(t);i(r)||(this._deleteLoginInfo(t),this._deleteLoginSubmissionInfo(t),this._addLoginInfo(e,r),this._addLoginSubmissionInfo(e,n))}_onTabLoading({tabId:e,url:t}){const r=this._getLoginSubmissionInfo(e);if(i(r))return;if(r.pageStatus===_.pageStatus.LOADING_IN_PROGRESS)return void o.debug(`WaxSLD:: Already set Loading in Progress: ${e}${JSON.stringify(r)}`);if(r.pageStatus===_.pageStatus.LOADING_COMPLETED)return void o.debug(`WaxSLD:: Loading for top frame completed: ${e}${JSON.stringify(r)}`);if(t&&t.startsWith("chrome-extension://"))return;clearTimeout(r.timerId);const n=Object.assign({},r,{pageStatus:_.pageStatus.LOADING_IN_PROGRESS});this._addLoginSubmissionInfo(e,n),o.debug(`WaxSLD:: Loading in Progress: ${e}${JSON.stringify(r)}`)}async _onTabLoadingComplete({tabId:e,changeInfo:t,frameId:n}){if(0!==n)return;const s=await(e=>new Promise(((t,n)=>{try{r.getTab(e,t)}catch(e){n(e)}})))(e),a=this._getLoginSubmissionInfo(e);if(i(a))return;const u=this._createNewLoginSubmissionTimer(s,a.senderURL,1e3),l=Object.assign({},u,{pageStatus:_.pageStatus.LOADING_COMPLETED});this._addLoginSubmissionInfo(e,l),o.debug(`WaxSLD:: Loading Completed: ${e}${JSON.stringify(l)}${JSON.stringify(t)}`)}_initListeners(){r.addTabRemovedEventListener(this._onTabRemoved),r.addBeforeNavigateEventListener(this._onTabLoading),r.addNavigationCommittedEventListener(this._onTabLoading),r.addNavigationCompletedEventListener(this._onTabLoadingComplete),r.addTabReplacedEventListener(this._onTabReplaced),r.addMessageListener(this._handleMessage)}_addLoginSubmissionInfo(e,t){this._loginSubmissionInfo.set(e,t)}_getLoginSubmissionInfo(e){return this._loginSubmissionInfo.get(e)}_deleteLoginSubmissionInfo(e){const t=this._getLoginSubmissionInfo(e);i(t)||(clearTimeout(t.timerId),this._loginSubmissionInfo.delete(e))}_sendLoginSubmission(e,t,n){const o=r.getTabID(e),i=this._getLoginInfo(o).get(),s=this._getLoginSubmissionInfo(o),a=t===_.status.SUCCESS?{message:_.message.SUCCESS_MESSAGE}:{message:_.message.FAILURE_MESSAGE};a.status=t;const u={data:{loginInfo:i,tabId:o,submissionInfo:s,timerExpired:n},result:a};this._formSubmissionClient.onLoginFormSubmission(u,e),t===_.status.SUCCESS&&this._deleteLoginInfo(o),this._deleteLoginSubmissionInfo(o)}async _loginSubmissionTimerHandler(e){const t=r.getTabID(e),n=this._getLoginSubmissionInfo(t);try{const t=await E.getParsePreferenceForURL(e.url);if(t.ParseCriterias.includes(h.parseCriterias.ENABLE_FORM_EXIST_VALIDATION)){const t={id:g.DOES_FORM_EXIST,payload:{formType:A}},i=t=>{o.debug(`WaxSLD:: DOES_FORM_EXIST response: ${t}`);const r=t?_.status.FAILURE:_.status.SUCCESS;this._sendLoginSubmission(e,r,_.timerStatus.TIMER_EXPIRED)},s={frameId:n.frameId};return o.debug("WaxSLD:: DOES_FORM_EXIST request sent"),void r.sendMessageToTab(e,t,i,s)}if(I.includes(n.pageStatus))return void this._sendLoginSubmission(e,_.status.SUCCESS,_.timerStatus.TIMER_EXPIRED);this._sendLoginSubmission(e,_.status.FAILURE,_.timerStatus.TIMER_EXPIRED)}catch(t){this._sendLoginSubmission(e,_.status.FAILURE,_.timerStatus.TIMER_EXPIRED)}}_deleteNilKeys(e){for(const t in e)i(e[t])&&delete e[t];return e}_mergeAndAddLoginInfo(e,r){const n=this._getLoginInfo(e);let o;s(n)&&i(r.password)&&n.setPassword(null),o=n instanceof t.LoginInfo?Object.assign({},n.get(),this._deleteNilKeys(r)):r,this._addLoginInfo(e,o)}_isLoginInfoComplete(e){const t=this._getLoginInfo(e),r=s(t.getUsername()),n=s(t.getPassword());return r&&n}_createNewLoginSubmissionTimer(e,t,n){const i=r.getTabID(e),a=this._getLoginSubmissionInfo(i),u=setTimeout(this._loginSubmissionTimerHandler.bind(this,e),n),l=Object.assign({},a||{pageStatus:_.pageStatus.INITIAL,skipDomainValidation:!1,interactionFormFound:!1},{timerId:u,senderURL:t});return s(a)&&this._deleteLoginSubmissionInfo(i),o.debug(`WaxSLD:: Created New Submission: ${JSON.stringify(l)}`),l}async _loginFormSubmitEventHandler(e,t,n){const o=e.payload,i=r.getTabID(t);if(this._mergeAndAddLoginInfo(i,o.loginInfo),!this._isLoginInfoComplete(i))return;const s=this._formSubmissionClient.getConfig(),a=this._createNewLoginSubmissionTimer(t,o.senderURL,1e3*s.TIMEOUT);a.skipDomainValidation=!!o.skipDomainValidation,a.frameId=n,this._addLoginSubmissionInfo(i,a)}_loginFormFoundEventHandler({payload:t},n){if(e.utils.getDomain(t.senderURL)!==e.utils.getDomain(n.url))return;const o=r.getTabID(n),i=this._getLoginSubmissionInfo(o);e.utils.isNil(i)||i.pageStatus!==_.pageStatus.INITIAL&&(this._deleteLoginSubmissionInfo(n),this._sendLoginSubmission(n,_.status.FAILURE,_.timerStatus.TIMER_PENDING))}_loginFormRemovedEventHandler({payload:t},n){if(e.utils.getDomain(t.senderURL)!==e.utils.getDomain(n.url))return;const o=r.getTabID(n),s=this._getLoginSubmissionInfo(o);if(i(s))return;if(s.pageStatus!==_.pageStatus.INITIAL)return;const a=this._formSubmissionClient.getConfig();clearTimeout(s.timerId);const u=setTimeout(this._loginSubmissionTimerHandler.bind(this,n),1e3*a.TIMEOUT),l=Object.assign({},s,{timerId:u,pageStatus:_.pageStatus.FORM_REMOVED});this._addLoginSubmissionInfo(o,l)}_interactionFormFoundEventHandler({payload:t},n){if(e.utils.getDomain(t.senderURL)!==e.utils.getDomain(n.url))return;const o=r.getTabID(n),s=this._getLoginSubmissionInfo(o);if(i(s))return;const a=Object.assign({},s,{interactionFormFound:!0});this._addLoginSubmissionInfo(o,a)}_handleFormSubmitEvent(e,t,r){c(e.payload.formType)&&e.payload.formType.includes(A)&&this._loginFormSubmitEventHandler(e,t,r)}_handleFormFoundEvent(e,t){d(e.payload.formTypes)&&((e.payload.formTypes.includes(A)||e.payload.formTypes.includes(b))&&this._loginFormFoundEventHandler(e,t),e.payload.formTypes.includes(O)&&this._interactionFormFoundEventHandler(e,t))}_handleFormRemovedEvent(e,t){c(e.payload.formType)&&e.payload.formType.includes(A)&&this._loginFormRemovedEventHandler(e,t)}_handleMessage(e,t,r,n){if(!i(e)&&!i(e.id)&&!i(r)&&u(e.payload))switch(e.id){case y:o.debug("WaxSLD:: FORMS_FOUND event received"),this._handleFormFoundEvent(e,r);break;case S:o.debug("WaxSLD:: FORM_SUBMIT event received"),this._handleFormSubmitEvent(e,r,n);break;case T:this._handleFormRemovedEvent(e,r),o.debug("WaxSLD:: ALL_FORM_ELEMENTS_REMOVED event received")}}}}(e,t)})(window),function(e){e.SymWax.init=function(e){var t={};const{logger:r,utils:{isntNil:n}}=SymBfw;return t.initializeWaxFormDataLoaderSettings=function(t,n=null,o=null){return new Promise((function(i,s){e.formDataLoader.initialize(t,o).then((function(t){i("Form data loader settings initialized"),e.manager.initialize(n)}),(function(e){r.error("Failed to completely initialize Form data loader settings, with error: "+e),s("Failed to initialize Form data loader settings")}))}))},t.initializeWaxFormSubmission=function(t){n(e.waxFormSubmissionHandler)&&e.waxFormSubmissionHandler.initialize(t)},t}(e.SymWax)}(window),function(e){e.SymWax.telemetryWrapperBG=function(e,t){const{extensionAdapter:r,telemetryConstants:n,logger:o,utils:i}=e,{constants:s}=t,{messages:a}=s,{isNil:u,isString:l,isObject:c,urlWithoutQueryParameters:d}=i;let f={_defaultParameters:null,_ignoreTelemetryEnableSettings:"false",_waxTelemetryInitailzed:!1,_waxTelemetry:null,setDefaultParameter:function(e){u(e)&&o.error("telemetry param is null"),f._defaultParameters=e},_handleMessage:function(e,t,r){if(u(e))return;if(u(e.payload))return;if(e.id===a.SEND_WAX_TELEMETRY_TO_BG){const t=r.url;if(r.status===s.tabStatus.LOADING){const r=e.payload.customDimensions;if(!c(r))return;const n=e.payload.customDimensions.cd13;if(!l(n))return;if(i.getDomain(t)!==i.getDomain(n))return}f.sendDetectionTelemetry(t,e.payload)}},sendDetectionTelemetry:function(t,r){if(u(f._defaultParameters))return!1;if(u(r.eventType))return!1;let o=f._defaultParameters;if(o[n.TRACKING_ID]=s.telemetry.TRACKING_ID,"true"===f._ignoreTelemetryEnableSettings){o[n.CLIENT_ID]=i.createNewGuid();let s=new e.Telemetry(a.SEND_WAX_TELEMETRY_TO_BFW,f._ignoreTelemetryEnableSettings);s.init(o,(function(e){return!0===e&&(f._constructParamAndSend(s,t,r),!0)}))}else{if(!u(f._waxTelemetry))return!!f._waxTelemetryInitailzed&&(f._constructParamAndSend(f._waxTelemetry,t,r),!0);f._waxTelemetry=new e.Telemetry(a.SEND_WAX_TELEMETRY_TO_BFW,f._ignoreTelemetryEnableSettings),f._waxTelemetry.init(o,(function(e){return!0===e&&(f._waxTelemetryInitailzed=!0,f._constructParamAndSend(f._waxTelemetry,t,r),!0)}))}},_constructParamAndSend:function(e,t,r){let o={};o[n.parameters.HIT_TYPE]=n.HIT_TYPE.EVENT,o[n.parameters.CATEGORY]=s.telemetry.CATEGORY,o[n.parameters.ACTION]=r.eventType,o[n.parameters.LABEL]=d(t),o=Object.assign({},o,r.customDimensions),e.send(o)}};return r.addMessageListener(f._handleMessage),f}(e.SymBfw,e.SymWax)}(window),function(e){e.SymWax.manager=function(e,t){const r=t.extensionAdapter,n=e.constants.messages,o=t.utils.isNil,i=t.utils.isntNil,s=t.utils.isInteger,a=t.utils.isEmptyObject,u=e.constants;let l={};return l._maxThreshold=u.NO_THRESHOLD_CHECK_VALUE,l._processedTabInfos=new Map,l.initialize=function(e){r.addMessageListener(l._handleMessage),i(e)&&s(e)&&(l._maxThreshold=e)},l._getThresholdInfo=function(e){let t=l._processedTabInfos.get(e);return a(t)&&(t={processedFramesCount:0,maxThreshold:l._maxThreshold},l._processedTabInfos.set(e,t)),t},l._handleMessage=function(e,t,i){if(o(e)||o(e.id))return;let s=r.getTabID(i);switch(e.id){case n.CHECK_ANALYSIS_REQUIRED:let e=l._getThresholdInfo(s),r=l._isAnalysisNeeded(e,s);!0===r&&(e.processedFramesCount+=1,l._processedTabInfos.set(s,e)),t(r);break;case n.TOP_FRAME_UNLOAD_EVENT:l._processedTabInfos.delete(s)}},l._isAnalysisNeeded=function(e,t){let r=e.processedFramesCount,n=e.maxThreshold;return n===u.NO_THRESHOLD_CHECK_VALUE||(o(r)&&(r=0),!(r>=n)&&(l._processedTabInfos.set(t,e),!0))},l}(e.SymWax,e.SymBfw)}(window),function(e){const{utils:{isString:t,isNil:r,isObject:n},logger:o,utils:i}=SymBfw;e.SymWax.LoginInfo=class{constructor(){this._username=null,this._password=null,this.set=this.set.bind(this),this.get=this.get.bind(this),this.clear=this.clear.bind(this),this.getUsername=this.getUsername.bind(this),this.getPassword=this.getPassword.bind(this),this.serialize=this.serialize.bind(this)}set(e){if(!n(e))throw"loginInfo is empty or invalid object";this.setUsername(e.username),this.setPassword(e.password)}setPassword(e){let n=SymWax.obfuscationKeyManager.getObfuscationKey();if(!t(n)||""===n)throw"Invalid obfuscationKey";t(e)&&""===e||r(e)?(o.debug("empty password can not be obfuscated, storing as it is"),this._password=e):this._password=i.obfuscatePassword(e,n)}setUsername(e){this._username=e}getUsername(){return this._username}getPassword(){let e=SymWax.obfuscationKeyManager.getObfuscationKey();if(!t(e)||""===e)throw"Invalid obfuscationKey";return t(this._password)&&""===this._password||r(this._password)?(o.debug("empty password can not be deobfuscated"),this._password):i.obfuscatePassword(this._password,e)}get(){return this.serialize()}serialize(){return{username:this.getUsername(),password:this.getPassword()}}clear(){this._username=null,this._password=null}}}(window),function(e){e.SymWax.obfuscationKeyManager=(e.SymWax,new SymBfw.ObfuscationKeyManager)}(window),function(e){e.SymWax.telemetryWrapperBG=function(e,t){const{extensionAdapter:r,telemetryConstants:n,logger:o,utils:i}=e,{constants:s}=t,{messages:a}=s,{isNil:u,isString:l,isObject:c,urlWithoutQueryParameters:d}=i;let f={_defaultParameters:null,_ignoreTelemetryEnableSettings:"false",_waxTelemetryInitailzed:!1,_waxTelemetry:null,setDefaultParameter:function(e){u(e)&&o.error("telemetry param is null"),f._defaultParameters=e},_handleMessage:function(e,t,r){if(u(e))return;if(u(e.payload))return;if(e.id===a.SEND_WAX_TELEMETRY_TO_BG){const t=r.url;if(r.status===s.tabStatus.LOADING){const r=e.payload.customDimensions;if(!c(r))return;const n=e.payload.customDimensions.cd13;if(!l(n))return;if(i.getDomain(t)!==i.getDomain(n))return}f.sendDetectionTelemetry(t,e.payload)}},sendDetectionTelemetry:function(t,r){if(u(f._defaultParameters))return!1;if(u(r.eventType))return!1;let o=f._defaultParameters;if(o[n.TRACKING_ID]=s.telemetry.TRACKING_ID,"true"===f._ignoreTelemetryEnableSettings){o[n.CLIENT_ID]=i.createNewGuid();let s=new e.Telemetry(a.SEND_WAX_TELEMETRY_TO_BFW,f._ignoreTelemetryEnableSettings);s.init(o,(function(e){return!0===e&&(f._constructParamAndSend(s,t,r),!0)}))}else{if(!u(f._waxTelemetry))return!!f._waxTelemetryInitailzed&&(f._constructParamAndSend(f._waxTelemetry,t,r),!0);f._waxTelemetry=new e.Telemetry(a.SEND_WAX_TELEMETRY_TO_BFW,f._ignoreTelemetryEnableSettings),f._waxTelemetry.init(o,(function(e){return!0===e&&(f._waxTelemetryInitailzed=!0,f._constructParamAndSend(f._waxTelemetry,t,r),!0)}))}},_constructParamAndSend:function(e,t,r){let o={};o[n.parameters.HIT_TYPE]=n.HIT_TYPE.EVENT,o[n.parameters.CATEGORY]=s.telemetry.CATEGORY,o[n.parameters.ACTION]=r.eventType,o[n.parameters.LABEL]=d(t),o=Object.assign({},o,r.customDimensions),e.send(o)}};return r.addMessageListener(f._handleMessage),f}(e.SymBfw,e.SymWax)}(window);r.default=SymWax},{"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.array.reduce.js":431,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.constructor.js":441,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core-js/modules/web.dom-collections.iterator.js":453}],217:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"FirebaseError",{enumerable:!0,get:function(){return i.FirebaseError}}),r._DEFAULT_ENTRY_NAME=r.SDK_VERSION=void 0,r._addComponent=_,r._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},r._apps=void 0,r._clearComponents=function(){h.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r._components=void 0,r._getProvider=g,r._registerComponent=E,r._removeServiceInstance=function(e,t,r=d){g(e,t).clearInstance(r)},r.deleteApp=async function(e){const t=e.name;p.has(t)&&(p.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)},r.getApp=function(e=d){const t=p.get(e);if(!t&&e===d&&(0,i.getDefaultAppConfig)())return T();if(!t)throw y.create("no-app",{appName:e});return t},r.getApps=function(){return Array.from(p.values())},r.initializeApp=T,r.onLog=function(e,t){if(null!==e&&"function"!=typeof e)throw y.create("invalid-log-argument");(0,o.setUserLogHandler)(e,t)},r.registerVersion=A,r.setLogLevel=function(e){(0,o.setLogLevel)(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@firebase/component"),o=e("@firebase/logger"),i=e("@firebase/util"),s=e("idb");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const u="@firebase/app",l="0.9.27",c=new o.Logger("@firebase/app"),d=r._DEFAULT_ENTRY_NAME="[DEFAULT]",f={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},p=r._apps=new Map,h=r._components=new Map;function _(e,t){try{e.container.addComponent(t)}catch(r){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function E(e){const t=e.name;if(h.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;h.set(t,e);for(const t of p.values())_(t,e);return!0}function g(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}const m={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},y=new i.ErrorFactory("app","Firebase",m);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class S{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new n.Component("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw y.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.SDK_VERSION="10.8.0";function T(e,t={}){let r=e;if("object"!=typeof t){t={name:t}}const o=Object.assign({name:d,automaticDataCollectionEnabled:!1},t),s=o.name;if("string"!=typeof s||!s)throw y.create("bad-app-name",{appName:String(s)});if(r||(r=(0,i.getDefaultAppConfig)()),!r)throw y.create("no-options");const a=p.get(s);if(a){if((0,i.deepEqual)(r,a.options)&&(0,i.deepEqual)(o,a.config))return a;throw y.create("duplicate-app",{appName:s})}const u=new n.ComponentContainer(s);for(const e of h.values())u.addComponent(e);const l=new S(r,o,u);return p.set(s,l),l}function A(e,t,r){var o;let i=null!==(o=f[e])&&void 0!==o?o:e;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}E(new n.Component(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const b="firebase-heartbeat-database",O=1,I="firebase-heartbeat-store";let v=null;function N(){return v||(v=(0,s.openDB)(b,O,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(I)}catch(e){console.warn(e)}}}).catch((e=>{throw y.create("idb-open",{originalErrorMessage:e.message})}))),v}async function R(e,t){try{const r=(await N()).transaction(I,"readwrite"),n=r.objectStore(I);await n.put(t,C(e)),await r.done}catch(e){if(e instanceof i.FirebaseError)c.warn(e.message);else{const t=y.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});c.warn(t.message)}}}function C(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new L(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=w();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=w(),{heartbeatsToSend:r,unsentEntries:n}=function(e,t=1024){const r=[];let n=e.slice();for(const o of e){const e=r.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),P(r)>t){e.dates.pop();break}}else if(r.push({agent:o.agent,dates:[o.date]}),P(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),o=(0,i.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function w(){return(new Date).toISOString().substring(0,10)}class L{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.isIndexedDBAvailable)()&&(0,i.validateIndexedDBOpenable)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await N()).transaction(I),r=await t.objectStore(I).get(C(e));return await t.done,r}catch(e){if(e instanceof i.FirebaseError)c.warn(e.message);else{const t=y.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});c.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return R(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return R(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function P(e){return(0,i.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M;M="",E(new n.Component("platform-logger",(e=>new a(e)),"PRIVATE")),E(new n.Component("heartbeat",(e=>new D(e)),"PRIVATE")),A(u,l,M),A(u,l,"esm2017"),A("fire-js","")},{"@firebase/component":218,"@firebase/logger":220,"@firebase/util":223,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/web.dom-collections.iterator.js":453,idb:485}],218:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Provider=r.ComponentContainer=r.Component=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@firebase/util");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.Component=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const o="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new n.Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=o){return this.instances.has(e)}getOptions(e=o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[e,t]of this.instancesDeferred.entries()){r===this.normalizeInstanceIdentifier(e)&&t.resolve(n)}return n}onInit(e,t){var r;const n=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(n,o);const i=this.instances.get(n);return i&&e(i,n),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===o?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}var n;return r||null}normalizeInstanceIdentifier(e=o){return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}r.Provider=i;r.ComponentContainer=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new i(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},{"@firebase/util":223,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453}],219:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteInstallations=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e){const{appConfig:t}=e,r=await G(t,(e=>{if(!e||0!==e.registrationStatus)return e}));if(r){if(1===r.registrationStatus)throw _.create("delete-pending-registration");if(2===r.registrationStatus){if(!navigator.onLine)throw _.create("app-offline");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
await async function(e,t){const r=function(e,{fid:t}){return`${g(e)}/${t}`}(e,t),n=T(e,t),o={method:"DELETE",headers:n},i=await A((()=>fetch(r,o)));if(!i.ok)throw await y("Delete Installation",i)}(t,r),await B(t)}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.getId=X,r.getInstallations=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e=(0,n.getApp)()){return(0,n._getProvider)(e,"installations").getImmediate()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.getToken=J,r.onIdChange=function(e,t){const{appConfig:r}=e;return function(e,t){L();const r=N(e);let n=R.get(r);n||(n=new Set,R.set(r,n));n.add(t)}(r,t),()=>{!function(e,t){const r=N(e),n=R.get(r);if(!n)return;n.delete(t),0===n.size&&R.delete(r);P()}(r,t)}},e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/web.dom-collections.iterator.js");var n=e("@firebase/app"),o=e("@firebase/component"),i=e("@firebase/util"),s=e("idb");const a="@firebase/installations",u="0.6.5",l=1e4,c=`w:${u}`,d="FIS_v2",f="https://firebaseinstallations.googleapis.com/v1",p=36e5,h={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_=new i.ErrorFactory("installations","Installations",h);function E(e){return e instanceof i.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g({projectId:e}){return`${f}/projects/${e}/installations`}function m(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function y(e,t){const r=(await t.json()).error;return _.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function S({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function T(e,{refreshToken:t}){const r=S(e);return r.append("Authorization",function(e){return`${d} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),r}async function A(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function b(e){return new Promise((t=>{setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const O=/^[cdef][\w-]{21}$/,I="";function v(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(r=e,btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_"));var r;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return O.test(t)?t:I}catch(e){return I}}function N(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R=new Map;function C(e,t){const r=N(e);D(r,t),function(e,t){const r=L();r&&r.postMessage({key:e,fid:t});P()}(r,t)}function D(e,t){const r=R.get(e);if(r)for(const e of r)e(t)}let w=null;function L(){return!w&&"BroadcastChannel"in self&&(w=new BroadcastChannel("[Firebase] FID Change"),w.onmessage=e=>{D(e.data.key,e.data.fid)}),w}function P(){0===R.size&&w&&(w.close(),w=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M="firebase-installations-database",U=1,j="firebase-installations-store";let k=null;function x(){return k||(k=(0,s.openDB)(M,U,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(j)}})),k}async function F(e,t){const r=N(e),n=(await x()).transaction(j,"readwrite"),o=n.objectStore(j),i=await o.get(r);return await o.put(t,r),await n.done,i&&i.fid===t.fid||C(e,t.fid),t}async function B(e){const t=N(e),r=(await x()).transaction(j,"readwrite");await r.objectStore(j).delete(t),await r.done}async function G(e,t){const r=N(e),n=(await x()).transaction(j,"readwrite"),o=n.objectStore(j),i=await o.get(r),s=t(i);return void 0===s?await o.delete(r):await o.put(s,r),await n.done,!s||i&&i.fid===s.fid||C(e,s.fid),s}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V(e){let t;const r=await G(e.appConfig,(r=>{const n=function(e){const t=e||{fid:v(),registrationStatus:0};return Y(t)}(r),o=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(_.create("app-offline"))}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=async function(e,t){try{const r=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:r}){const n=g(e),o=S(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={fid:r,authVersion:d,appId:e.appId,sdkVersion:c},a={method:"POST",headers:o,body:JSON.stringify(s)},u=await A((()=>fetch(n,a)));if(u.ok){const e=await u.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:m(e.authToken)}}throw await y("Create Installation",u)}(e,t);return F(e.appConfig,r)}catch(r){throw E(r)&&409===r.customData.serverCode?await B(e.appConfig):await F(e.appConfig,{fid:t.fid,registrationStatus:0}),r}}(e,r);return{installationEntry:r,registrationPromise:n}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:H(e)}:{installationEntry:t}}(e,n);return t=o.registrationPromise,o.installationEntry}));return r.fid===I?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}async function H(e){let t=await W(e.appConfig);for(;1===t.registrationStatus;)await b(100),t=await W(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:r}=await V(e);return r||t}return t}function W(e){return G(e,(e=>{if(!e)throw _.create("installation-not-found");return Y(e)}))}function Y(e){return 1===(t=e).registrationStatus&&t.registrationTime+l<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function K({appConfig:e,heartbeatServiceProvider:t},r){const n=function(e,{fid:t}){return`${g(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,r),o=T(e,r),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:c,appId:e.appId}},a={method:"POST",headers:o,body:JSON.stringify(s)},u=await A((()=>fetch(n,a)));if(u.ok){return m(await u.json())}throw await y("Generate Auth Token",u)}async function z(e,t=!1){let r;const n=await G(e.appConfig,(n=>{if(!$(n))throw _.create("not-registered");const o=n.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+p}(e)}(o))return n;if(1===o.requestStatus)return r=async function(e,t){let r=await q(e.appConfig);for(;1===r.authToken.requestStatus;)await b(100),r=await q(e.appConfig);const n=r.authToken;return 0===n.requestStatus?z(e,t):n}(e,t),n;{if(!navigator.onLine)throw _.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(n);return r=async function(e,t){try{const r=await K(e,t),n=Object.assign(Object.assign({},t),{authToken:r});return await F(e.appConfig,n),r}catch(r){if(!E(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode){const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await F(e.appConfig,r)}else await B(e.appConfig);throw r}}(e,t),t}}));return r?await r:n.authToken}function q(e){return G(e,(e=>{if(!$(e))throw _.create("not-registered");const t=e.authToken;return 1===(r=t).requestStatus&&r.requestTime+l<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var r;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function $(e){return void 0!==e&&2===e.registrationStatus}async function X(e){const t=e,{installationEntry:r,registrationPromise:n}=await V(t);return n?n.catch(console.error):z(t).catch(console.error),r.fid}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J(e,t=!1){const r=e;await async function(e){const{registrationPromise:t}=await V(e);t&&await t}(r);return(await z(r,t)).token}function Z(e){return _.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q="installations",ee=e=>{const t=e.getProvider("app").getImmediate(),r=function(e){if(!e||!e.options)throw Z("App Configuration");if(!e.name)throw Z("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!e.options[r])throw Z(r);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:r,heartbeatServiceProvider:(0,n._getProvider)(t,"heartbeat"),_delete:()=>Promise.resolve()}},te=e=>{const t=e.getProvider("app").getImmediate(),r=(0,n._getProvider)(t,Q).getImmediate();return{getId:()=>X(r),getToken:e=>J(r,e)}};(0,n._registerComponent)(new o.Component(Q,ee,"PUBLIC")),(0,n._registerComponent)(new o.Component("installations-internal",te,"PRIVATE")),(0,n.registerVersion)(a,u),(0,n.registerVersion)(a,u,"esm2017")},{"@firebase/app":217,"@firebase/component":218,"@firebase/util":223,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core-js/modules/es.typed-array.fill.js":447,"core-js/modules/es.typed-array.set.js":448,"core-js/modules/es.typed-array.sort.js":449,"core-js/modules/es.typed-array.uint8-array.js":450,"core-js/modules/web.dom-collections.iterator.js":453,idb:485}],220:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,i=e("tslib"),s=[];
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.LogLevel=void 0,(o=r.LogLevel||(r.LogLevel={}))[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var a={debug:r.LogLevel.DEBUG,verbose:r.LogLevel.VERBOSE,info:r.LogLevel.INFO,warn:r.LogLevel.WARN,error:r.LogLevel.ERROR,silent:r.LogLevel.SILENT},u=r.LogLevel.INFO,l=((n={})[r.LogLevel.DEBUG]="log",n[r.LogLevel.VERBOSE]="log",n[r.LogLevel.INFO]="info",n[r.LogLevel.WARN]="warn",n[r.LogLevel.ERROR]="error",n),c=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!(t<e.logLevel)){var o=(new Date).toISOString(),s=l[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));console[s].apply(console,i.__spreadArray(["[".concat(o,"]  ").concat(e.name,":")],r,!1))}},d=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=c,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in r.LogLevel))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,r.LogLevel.DEBUG],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,r.LogLevel.DEBUG],e,!1))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,r.LogLevel.VERBOSE],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,r.LogLevel.VERBOSE],e,!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,r.LogLevel.INFO],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,r.LogLevel.INFO],e,!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,r.LogLevel.WARN],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,r.LogLevel.WARN],e,!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,r.LogLevel.ERROR],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,r.LogLevel.ERROR],e,!1))},e}();r.Logger=d,r.setLogLevel=function(e){s.forEach((function(t){t.setLogLevel(e)}))},r.setUserLogHandler=function(e,t){for(var n=function(n){var o=null;t&&t.level&&(o=a[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=o?o:t.logLevel)&&e({level:r.LogLevel[n].toLowerCase(),message:a,args:i,type:t.name})}},o=0,i=s;o<i.length;o++){n(i[o])}}},{tslib:715}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteToken=function(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e){if(!navigator)throw D.create("only-available-in-window");e.swRegistration||await H(e);return k(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e=(0,i.getModularInstance)(e))},r.getMessaging=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e=(0,s.getApp)()){return J().then((e=>{if(!e)throw D.create("unsupported-browser")}),(e=>{throw D.create("indexed-db-unsupported")})),(0,s._getProvider)((0,i.getModularInstance)(e),"messaging").getImmediate()},r.getToken=async function(e,t){return W(e=(0,i.getModularInstance)(e),t)},r.isSupported=J,r.onMessage=function(e,t){return function(e,t){if(!navigator)throw D.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=(0,i.getModularInstance)(e),t)},e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("@firebase/installations");var n=e("@firebase/component"),o=e("idb"),i=e("@firebase/util"),s=e("@firebase/app");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const a="/firebase-messaging-sw.js",u="/firebase-cloud-messaging-push-scope",l="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",c="https://fcmregistrations.googleapis.com/v1",d="google.c.a.c_id",f="google.c.a.c_l",p="google.c.a.ts";var h,_;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),n=new Uint8Array(r.length);for(let e=0;e<r.length;++e)n[e]=r.charCodeAt(e);return n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(h||(h={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(_||(_={}));const m="fcm_token_details_db",y=5,S="fcm_token_object_Store";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const T="firebase-messaging-database",A=1,b="firebase-messaging-store";let O=null;function I(){return O||(O=(0,o.openDB)(T,A,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(b)}})),O}async function v(e){const t=R(e),r=await I(),n=await r.transaction(b).objectStore(b).get(t);if(n)return n;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(m))return null}let t=null;return(await(0,o.openDB)(m,y,{upgrade:async(r,n,o,i)=>{var s;if(n<2)return;if(!r.objectStoreNames.contains(S))return;const a=i.objectStore(S),u=await a.index("fcmSenderId").get(e);if(await a.clear(),u)if(2===n){const e=u;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(s=e.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:E(e.vapidKey)}}}else if(3===n){const e=u;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:E(e.auth),p256dh:E(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:E(e.vapidKey)}}}else if(4===n){const e=u;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:E(e.auth),p256dh:E(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:E(e.vapidKey)}}}}})).close(),await(0,o.deleteDB)(m),await(0,o.deleteDB)("fcm_vapid_details_db"),await(0,o.deleteDB)("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await N(e,t),t}}async function N(e,t){const r=R(e),n=(await I()).transaction(b,"readwrite");return await n.objectStore(b).put(t,r),await n.done,t}function R({appConfig:e}){return e.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},D=new i.ErrorFactory("messaging","Messaging",C);async function w(e,t){const r={method:"DELETE",headers:await P(e)};try{const n=await fetch(`${L(e.appConfig)}/${t}`,r),o=await n.json();if(o.error){const e=o.error.message;throw D.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw D.create("token-unsubscribe-failed",{errorInfo:null==e?void 0:e.toString()})}}function L({projectId:e}){return`${c}/projects/${e}/registrations`}async function P({appConfig:e,installations:t}){const r=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function M({p256dh:e,auth:t,endpoint:r,vapidKey:n}){const o={web:{endpoint:r,auth:t,p256dh:e}};return n!==l&&(o.web.applicationPubKey=n),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=6048e5;async function j(e){const t=await async function(e,t){const r=await e.pushManager.getSubscription();if(r)return r;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:g(t)})}(e.swRegistration,e.vapidKey),r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:E(t.getKey("auth")),p256dh:E(t.getKey("p256dh"))},n=await v(e.firebaseDependencies);if(n){if(function(e,t){const r=t.vapidKey===e.vapidKey,n=t.endpoint===e.endpoint,o=t.auth===e.auth,i=t.p256dh===e.p256dh;return r&&n&&o&&i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n.subscriptionOptions,r))return Date.now()>=n.createTime+U?async function(e,t){try{const r=await async function(e,t){const r=await P(e),n=M(t.subscriptionOptions),o={method:"PATCH",headers:r,body:JSON.stringify(n)};let i;try{const r=await fetch(`${L(e.appConfig)}/${t.token}`,o);i=await r.json()}catch(e){throw D.create("token-update-failed",{errorInfo:null==e?void 0:e.toString()})}if(i.error){const e=i.error.message;throw D.create("token-update-failed",{errorInfo:e})}if(!i.token)throw D.create("token-update-no-token");return i.token}(e.firebaseDependencies,t),n=Object.assign(Object.assign({},t),{token:r,createTime:Date.now()});return await N(e.firebaseDependencies,n),r}catch(t){throw await k(e),t}}(e,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await w(e.firebaseDependencies,n.token)}catch(e){console.warn(e)}return x(e.firebaseDependencies,r)}return x(e.firebaseDependencies,r)}async function k(e){const t=await v(e.firebaseDependencies);t&&(await w(e.firebaseDependencies,t.token),await async function(e){const t=R(e),r=(await I()).transaction(b,"readwrite");await r.objectStore(b).delete(t),await r.done}(e.firebaseDependencies));const r=await e.swRegistration.pushManager.getSubscription();return!r||r.unsubscribe()}async function x(e,t){const r=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){const r=await P(e),n=M(t),o={method:"POST",headers:r,body:JSON.stringify(n)};let i;try{const t=await fetch(L(e.appConfig),o);i=await t.json()}catch(e){throw D.create("token-subscribe-failed",{errorInfo:null==e?void 0:e.toString()})}if(i.error){const e=i.error.message;throw D.create("token-subscribe-failed",{errorInfo:e})}if(!i.token)throw D.create("token-subscribe-no-token");return i.token}(e,t),n={token:r,createTime:Date.now(),subscriptionOptions:t};return await N(e,n),n.token}function F(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const r=t.notification.title;r&&(e.notification.title=r);const n=t.notification.body;n&&(e.notification.body=n);const o=t.notification.image;o&&(e.notification.image=o);const i=t.notification.icon;i&&(e.notification.icon=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var r,n,o,i,s;if(!t.fcmOptions&&!(null===(r=t.notification)||void 0===r?void 0:r.click_action))return;e.fcmOptions={};const a=null!==(o=null===(n=t.fcmOptions)||void 0===n?void 0:n.link)&&void 0!==o?o:null===(i=t.notification)||void 0===i?void 0:i.click_action;a&&(e.fcmOptions.link=a);const u=null===(s=t.fcmOptions)||void 0===s?void 0:s.analytics_label;u&&(e.fcmOptions.analyticsLabel=u)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),t}function B(e,t){const r=[];for(let n=0;n<e.length;n++)r.push(e.charAt(n)),n<t.length&&r.push(t.charAt(n));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e){return D.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
B("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),B("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class V{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const n=function(e){if(!e||!e.options)throw G("App Configuration Object");if(!e.name)throw G("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:r}=e;for(const e of t)if(!r[e])throw G(e);return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:n,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H(e){try{e.swRegistration=await navigator.serviceWorker.register(a,{scope:u}),e.swRegistration.update().catch((()=>{}))}catch(e){throw D.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function W(e,t){if(!navigator)throw D.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw D.create("permission-blocked");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=l)}(e,null==t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await H(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw D.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),j(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y(e,t,r){const n=function(e){switch(e){case _.NOTIFICATION_CLICKED:return"notification_open";case _.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:r[d],message_name:r[f],message_time:r[p],message_device_time:Math.floor(Date.now()/1e3)})}async function K(e,t){const r=t.data;if(!r.isFirebaseMessaging)return;e.onMessageHandler&&r.messageType===_.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(F(r)):e.onMessageHandler.next(F(r)));const n=r.data;var o;"object"==typeof(o=n)&&o&&d in o&&"1"===n["google.c.a.e"]&&await Y(e,r.messageType,n)}const z="@firebase/messaging",q="0.12.6",$=e=>{const t=new V(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>K(t,e))),t},X=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>W(t,e)}};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function J(){try{await(0,i.validateIndexedDBOpenable)()}catch(e){return!1}return"undefined"!=typeof window&&(0,i.isIndexedDBAvailable)()&&(0,i.areCookiesEnabled)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}(0,s._registerComponent)(new n.Component("messaging",$,"PUBLIC")),(0,s._registerComponent)(new n.Component("messaging-internal",X,"PRIVATE")),(0,s.registerVersion)(z,q),(0,s.registerVersion)(z,q,"esm2017")},{"@firebase/app":217,"@firebase/component":218,"@firebase/installations":219,"@firebase/util":223,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core-js/modules/es.typed-array.fill.js":447,"core-js/modules/es.typed-array.set.js":448,"core-js/modules/es.typed-array.sort.js":449,"core-js/modules/es.typed-array.uint8-array.js":450,"core-js/modules/web.dom-collections.iterator.js":453,idb:485}],222:[function(e,t,r){"use strict";e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/es.typed-array.uint8-array.js"),e("core-js/modules/es.typed-array.fill.js"),e("core-js/modules/es.typed-array.set.js"),e("core-js/modules/es.typed-array.sort.js"),e("core-js/modules/esnext.string.match-all.js"),e("core-js/modules/web.dom-collections.iterator.js"),e("core-js/modules/web.url.js"),e("core-js/modules/web.url-search-params.js"),Object.defineProperty(r,"__esModule",{value:!0}),e("@firebase/installations");var n,o,i=e("@firebase/component"),s=e("tslib"),a=e("idb"),u=e("@firebase/util"),l=e("@firebase/app"),c="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",d="https://fcmregistrations.googleapis.com/v1",f="FCM_MSG",p="google.c.a.c_id",h=3,_=1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,s.__spreadArray([],s.__read(t),!1))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),n=new Uint8Array(r.length),o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(n||(n={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(o||(o={}));var m="fcm_token_details_db",y=5,S="fcm_token_object_Store";function T(e){return s.__awaiter(this,void 0,void 0,(function(){var t,r,n,o=this;return s.__generator(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),r=t.map((function(e){return e.name})),!r.includes(m))return[2,null];i.label=2;case 2:return n=null,[4,a.openDB(m,y,{upgrade:function(t,r,i,a){return s.__awaiter(o,void 0,void 0,(function(){var o,i,u,l;return s.__generator(this,(function(s){switch(s.label){case 0:return r<2?[2]:t.objectStoreNames.contains(S)?[4,(o=a.objectStore(S)).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,o.clear()];case 2:if(s.sent(),!i)return[2];if(2===r){if(!(u=i).auth||!u.p256dh||!u.endpoint)return[2];n={token:u.fcmToken,createTime:null!==(l=u.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:"string"==typeof u.vapidKey?u.vapidKey:E(u.vapidKey)}}}else(3===r||4===r)&&(n={token:(u=i).fcmToken,createTime:u.createTime,subscriptionOptions:{auth:E(u.auth),p256dh:E(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:E(u.vapidKey)}});return[2]}}))}))}})];case 3:return i.sent().close(),[4,a.deleteDB(m)];case 4:return i.sent(),[4,a.deleteDB("fcm_vapid_details_db")];case 5:return i.sent(),[4,a.deleteDB("undefined")];case 6:return i.sent(),[2,A(n)?n:null]}}))}))}function A(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b,O="firebase-messaging-database",I=1,v="firebase-messaging-store",N=null;function R(){return N||(N=a.openDB(O,I,{upgrade:function(e,t){if(0===t)e.createObjectStore(v)}})),N}function C(e){return s.__awaiter(this,void 0,void 0,(function(){var t,r,n;return s.__generator(this,(function(o){switch(o.label){case 0:return t=L(e),[4,R()];case 1:return[4,o.sent().transaction(v).objectStore(v).get(t)];case 2:return(r=o.sent())?[2,r]:[3,3];case 3:return[4,T(e.appConfig.senderId)];case 4:return(n=o.sent())?[4,D(e,n)]:[3,6];case 5:return o.sent(),[2,n];case 6:return[2]}}))}))}function D(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r,n,o;return s.__generator(this,(function(i){switch(i.label){case 0:return r=L(e),[4,R()];case 1:return n=i.sent(),[4,(o=n.transaction(v,"readwrite")).objectStore(v).put(t,r)];case 2:return i.sent(),[4,o.done];case 3:return i.sent(),[2,t]}}))}))}function w(e){return s.__awaiter(this,void 0,void 0,(function(){var t,r,n;return s.__generator(this,(function(o){switch(o.label){case 0:return t=L(e),[4,R()];case 1:return r=o.sent(),[4,(n=r.transaction(v,"readwrite")).objectStore(v).delete(t)];case 2:return o.sent(),[4,n.done];case 3:return o.sent(),[2]}}))}))}function L(e){return e.appConfig.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P=((b={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',b["only-available-in-window"]="This method is available in a Window context.",b["only-available-in-sw"]="This method is available in a service worker context.",b["permission-default"]="The notification permission was not granted and dismissed instead.",b["permission-blocked"]="The notification permission was not granted and blocked instead.",b["unsupported-browser"]="This browser doesn't support the API's required to use the Firebase SDK.",b["indexed-db-unsupported"]="This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",b["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",b["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",b["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",b["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",b["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",b["token-update-no-token"]="FCM returned no token when updating the user to push.",b["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",b["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",b["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",b["invalid-vapid-key"]="The public VAPID key must be a string.",b["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",b),M=new u.ErrorFactory("messaging","Messaging",P);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function U(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r,n,o,i,a,u;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,F(e)];case 1:r=s.sent(),n=B(t),o={method:"POST",headers:r,body:JSON.stringify(n)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(x(e.appConfig),o)];case 3:return[4,s.sent().json()];case 4:return i=s.sent(),[3,6];case 5:throw a=s.sent(),M.create("token-subscribe-failed",{errorInfo:null==a?void 0:a.toString()});case 6:if(i.error)throw u=i.error.message,M.create("token-subscribe-failed",{errorInfo:u});if(!i.token)throw M.create("token-subscribe-no-token");return[2,i.token]}}))}))}function j(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r,n,o,i,a,u;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,F(e)];case 1:r=s.sent(),n=B(t.subscriptionOptions),o={method:"PATCH",headers:r,body:JSON.stringify(n)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch("".concat(x(e.appConfig),"/").concat(t.token),o)];case 3:return[4,s.sent().json()];case 4:return i=s.sent(),[3,6];case 5:throw a=s.sent(),M.create("token-update-failed",{errorInfo:null==a?void 0:a.toString()});case 6:if(i.error)throw u=i.error.message,M.create("token-update-failed",{errorInfo:u});if(!i.token)throw M.create("token-update-no-token");return[2,i.token]}}))}))}function k(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r,n,o,i,a;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,F(e)];case 1:r=s.sent(),n={method:"DELETE",headers:r},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch("".concat(x(e.appConfig),"/").concat(t),n)];case 3:return[4,s.sent().json()];case 4:if((o=s.sent()).error)throw i=o.error.message,M.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw a=s.sent(),M.create("token-unsubscribe-failed",{errorInfo:null==a?void 0:a.toString()});case 6:return[2]}}))}))}function x(e){var t=e.projectId;return"".concat(d,"/projects/").concat(t,"/registrations")}function F(e){var t=e.appConfig,r=e.installations;return s.__awaiter(this,void 0,void 0,(function(){var e;return s.__generator(this,(function(n){switch(n.label){case 0:return[4,r.getToken()];case 1:return e=n.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(e)})]}}))}))}function B(e){var t=e.p256dh,r=e.auth,n=e.endpoint,o=e.vapidKey,i={web:{endpoint:n,auth:r,p256dh:t}};return o!==c&&(i.web.applicationPubKey=o),i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=6048e5;function V(e){return s.__awaiter(this,void 0,void 0,(function(){var t,r,n,o;return s.__generator(this,(function(i){switch(i.label){case 0:return[4,K(e.swRegistration,e.vapidKey)];case 1:return t=i.sent(),r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:E(t.getKey("auth")),p256dh:E(t.getKey("p256dh"))},[4,C(e.firebaseDependencies)];case 2:return(n=i.sent())?[3,3]:[2,Y(e.firebaseDependencies,r)];case 3:if(s=n.subscriptionOptions,u=(a=r).vapidKey===s.vapidKey,l=a.endpoint===s.endpoint,c=a.auth===s.auth,d=a.p256dh===s.p256dh,u&&l&&c&&d)return[3,8];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,k(e.firebaseDependencies,n.token)];case 5:return i.sent(),[3,7];case 6:return o=i.sent(),console.warn(o),[3,7];case 7:return[2,Y(e.firebaseDependencies,r)];case 8:return Date.now()>=n.createTime+G?[2,W(e,{token:n.token,createTime:Date.now(),subscriptionOptions:r})]:[2,n.token];case 9:return[2]}var s,a,u,l,c,d;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function H(e){return s.__awaiter(this,void 0,void 0,(function(){var t,r;return s.__generator(this,(function(n){switch(n.label){case 0:return[4,C(e.firebaseDependencies)];case 1:return(t=n.sent())?[4,k(e.firebaseDependencies,t.token)]:[3,4];case 2:return n.sent(),[4,w(e.firebaseDependencies)];case 3:n.sent(),n.label=4;case 4:return[4,e.swRegistration.pushManager.getSubscription()];case 5:return(r=n.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function W(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r,n,o;return s.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,5]),[4,j(e.firebaseDependencies,t)];case 1:return r=i.sent(),n=s.__assign(s.__assign({},t),{token:r,createTime:Date.now()}),[4,D(e.firebaseDependencies,n)];case 2:return i.sent(),[2,r];case 3:return o=i.sent(),[4,H(e)];case 4:throw i.sent(),o;case 5:return[2]}}))}))}function Y(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r,n;return s.__generator(this,(function(o){switch(o.label){case 0:return[4,U(e,t)];case 1:return r=o.sent(),n={token:r,createTime:Date.now(),subscriptionOptions:t},[4,D(e,n)];case 2:return o.sent(),[2,n.token]}}))}))}function K(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r;return s.__generator(this,(function(n){switch(n.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(r=n.sent())?[2,r]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:g(t)})]}}))}))}function z(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r,n,o;return s.__generator(this,(function(i){switch(i.label){case 0:return n=q,o=[t],[4,e.firebaseDependencies.installations.getId()];case 1:return r=n.apply(void 0,o.concat([i.sent()])),function(e,t,r){var n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(t),!r||(n.compliance_data=function(e){var t={privacy_context:{prequest:{origin_associated_product_id:e}}};return t}(r));e.logEvents.push(n)}(e,r,t.productId),[2]}}))}))}function q(e,t){var r,o,i={};return e.from&&(i.project_number=e.from),e.fcmMessageId&&(i.message_id=e.fcmMessageId),i.instance_id=t,e.notification?i.message_type=n.DISPLAY_NOTIFICATION.toString():i.message_type=n.DATA_MESSAGE.toString(),i.sdk_platform=h.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),e.collapse_key&&(i.collapse_key=e.collapse_key),i.event=_.toString(),(null===(r=e.fcmOptions)||void 0===r?void 0:r.analytics_label)&&(i.analytics_label=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label),i}function $(e,t){for(var r=[],n=0;n<e.length;n++)r.push(e.charAt(n)),n<t.length&&r.push(t.charAt(n));return r.join("")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(e){var t,r;return s.__awaiter(this,void 0,void 0,(function(){var n,i,a,u,l;return s.__generator(this,(function(s){switch(s.label){case 0:return(n=null===(r=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===r?void 0:r[f])?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),i=function(e){var t,r,n,o=null!==(r=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==r?r:null===(n=e.notification)||void 0===n?void 0:n.click_action;if(o)return o;return i=e.data,"object"==typeof i&&i&&p in i?self.location.origin:null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n),i?(a=new URL(i,self.location.href),u=new URL(self.location.origin),a.host!==u.host?[2]:[4,Z(a)]):[2]):[2];case 1:return(l=s.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return l=s.sent(),[4,(c=3e3,new Promise((function(e){setTimeout(e,c)})))];case 3:return s.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=s.sent(),s.label=6;case 6:return l?(n.messageType=o.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,[2,l.postMessage(n)]):[2]}var c;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function J(e){var t,r=s.__assign({},e.notification);return r.data=((t={})[f]=e,t),r}function Z(e){return s.__awaiter(this,void 0,void 0,(function(){var t,r,n,o,i,a,u;return s.__generator(this,(function(l){switch(l.label){case 0:return[4,ee()];case 1:t=l.sent();try{for(r=s.__values(t),n=r.next();!n.done;n=r.next())if(o=n.value,i=new URL(o.url,self.location.href),e.host===i.host)return[2,o]}catch(e){a={error:e}}finally{try{n&&!n.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}}return[2,null]}}))}))}function Q(e,t){var r,n;t.isFirebaseMessaging=!0,t.messageType=o.PUSH_RECEIVED;try{for(var i=s.__values(e),a=i.next();!a.done;a=i.next()){a.value.postMessage(t)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}function ee(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function te(e){var t,r=e.actions,n=Notification.maxActions;return r&&n&&r.length>n&&console.warn("This browser only supports ".concat(n," actions. The remaining actions will not be displayed.")),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}function re(e){return M.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var ne=function(){function e(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var n=function(e){var t,r;if(!e||!e.options)throw re("App Configuration Object");if(!e.name)throw re("App Name");var n=e.options;try{for(var o=s.__values(["projectId","apiKey","appId","messagingSenderId"]),i=o.next();!i.done;i=o.next()){var a=i.value;if(!n[a])throw re(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:n,installations:t,analyticsProvider:r}}return e.prototype._delete=function(){return Promise.resolve()},e}(),oe=function(e){var t=new ne(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",(function(e){e.waitUntil(function(e,t){return s.__awaiter(this,void 0,void 0,(function(){var r,n,o;return s.__generator(this,(function(i){switch(i.label){case 0:return r=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(e){return null}}(e),r?t.deliveryMetricsExportedToBigQueryEnabled?[4,z(t,r)]:[3,2]:[2];case 1:i.sent(),i.label=2;case 2:return[4,ee()];case 3:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=i.sent())?[2,Q(n,r)]:r.notification?[4,te(J(r))]:[3,5];case 4:i.sent(),i.label=5;case 5:return t?t.onBackgroundMessageHandler?(o=function(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(t.notification){e.notification={};var r=t.notification.title;r&&(e.notification.title=r);var n=t.notification.body;n&&(e.notification.body=n);var o=t.notification.image;o&&(e.notification.image=o);var i=t.notification.icon;i&&(e.notification.icon=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){var r,n,o,i,s;if(t.fcmOptions||(null===(r=t.notification)||void 0===r?void 0:r.click_action)){e.fcmOptions={};var a=null!==(o=null===(n=t.fcmOptions)||void 0===n?void 0:n.link)&&void 0!==o?o:null===(i=t.notification)||void 0===i?void 0:i.click_action;a&&(e.fcmOptions.link=a);var u=null===(s=t.fcmOptions)||void 0===s?void 0:s.analytics_label;u&&(e.fcmOptions.analyticsLabel=u)}}(t,e),t}(r),"function"!=typeof t.onBackgroundMessageHandler?[3,7]:[4,t.onBackgroundMessageHandler(o)]):[3,8]:[2];case 6:return i.sent(),[3,8];case 7:t.onBackgroundMessageHandler.next(o),i.label=8;case 8:return[2]}}))}))}(e,t))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(function(e,t){var r,n;return s.__awaiter(this,void 0,void 0,(function(){var o;return s.__generator(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,H(t)];case 1:case 5:return i.sent(),[2];case 2:return[4,C(t.firebaseDependencies)];case 3:return o=i.sent(),[4,H(t)];case 4:return i.sent(),t.vapidKey=null!==(n=null===(r=null==o?void 0:o.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==n?n:c,[4,V(t)]}}))}))}(e,t))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(X(e))})),t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ie(){return s.__awaiter(this,void 0,void 0,(function(){var e;return s.__generator(this,(function(t){switch(t.label){case 0:return(e=u.isIndexedDBAvailable())?[4,u.validateIndexedDBOpenable()]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return[2,e&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */l._registerComponent(new i.Component("messaging-sw",oe,"PUBLIC")),r.experimentalSetDeliveryMetricsExportedToBigQueryEnabled=function(e,t){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e,t){e.deliveryMetricsExportedToBigQueryEnabled=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e=u.getModularInstance(e),t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.getMessaging=function(e){return void 0===e&&(e=l.getApp()),ie().then((function(e){if(!e)throw M.create("unsupported-browser")}),(function(e){throw M.create("indexed-db-unsupported")})),l._getProvider(u.getModularInstance(e),"messaging-sw").getImmediate()},r.isSupported=ie,r.onBackgroundMessage=function(e,t){return function(e,t){if(void 0!==self.document)throw M.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,function(){e.onBackgroundMessageHandler=null}}(e=u.getModularInstance(e),t)}},{"@firebase/app":217,"@firebase/component":218,"@firebase/installations":219,"@firebase/util":223,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core-js/modules/es.typed-array.fill.js":447,"core-js/modules/es.typed-array.set.js":448,"core-js/modules/es.typed-array.sort.js":449,"core-js/modules/es.typed-array.uint8-array.js":450,"core-js/modules/esnext.string.match-all.js":452,"core-js/modules/web.dom-collections.iterator.js":453,"core-js/modules/web.url-search-params.js":455,"core-js/modules/web.url.js":457,idb:485,tslib:715}],223:[function(e,t,r){(function(t,n){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Sha1=r.RANDOM_FACTOR=r.MAX_VALUE_MILLIS=r.FirebaseError=r.ErrorFactory=r.Deferred=r.DecodeBase64StringError=r.CONSTANTS=void 0,r.areCookiesEnabled=function(){if("undefined"==typeof navigator||!navigator.cookieEnabled)return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.assertionError=r.assert=void 0,r.async=function(e,t){return(...r)=>{Promise.resolve(!0).then((()=>{e(...r)})).catch((e=>{t&&t(e)}))}},r.base64urlEncodeWithoutPadding=r.base64Encode=r.base64Decode=r.base64=void 0,r.calculateBackoffMillis=function(e,t=C,r=D){const n=t*Math.pow(r,e),o=Math.round(L*n*(Math.random()-.5)*2);return Math.min(w,n+o)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=t||"demo-project",n=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(i)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.createSubscribe=function(e,t){const r=new v(e,t);return r.subscribe.bind(r)},r.decode=void 0,r.deepCopy=function(e){return p(void 0,e)},r.deepEqual=function e(t,r){if(t===r)return!0;const n=Object.keys(t),o=Object.keys(r);for(const i of n){if(!o.includes(i))return!1;const n=t[i],s=r[i];if(I(n)&&I(s)){if(!e(n,s))return!1}else if(n!==s)return!1}for(const e of o)if(!n.includes(e))return!1;return!0},r.deepExtend=p,r.errorPrefix=R,r.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.getExperimentalSetting=r.getDefaults=r.getDefaultEmulatorHostnameAndPort=r.getDefaultEmulatorHost=r.getDefaultAppConfig=void 0,r.getGlobal=h,r.getModularInstance=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return e&&e._delegate?e._delegate:e},r.getUA=m,r.isAdmin=void 0,r.isBrowser=function(){return"object"==typeof self&&self.self===self},r.isBrowserExtension=function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},r.isElectron=function(){return m().indexOf("Electron/")>=0},r.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},r.isIE=function(){const e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},r.isIndexedDBAvailable=function(){try{return"object"==typeof indexedDB}catch(e){return!1}},r.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())},r.isNode=y,r.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},r.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},r.isSafari=function(){return!y()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},r.isUWP=function(){return m().indexOf("MSAppHost/")>=0},r.issuedAtTime=r.isValidTimestamp=r.isValidFormat=void 0,r.jsonEval=b,r.map=function(e,t,r){const n={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=t.call(r,e[o],o,e));return n},r.ordinal=function(e){if(!Number.isFinite(e))return`${e}`;return e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const r=e%10;if(1===r)return"st";if(2===r)return"nd";if(3===r)return"rd";return"th"}(e)},r.promiseWithTimeout=
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t=2e3){const r=new g;return setTimeout((()=>r.reject("timeout!")),t),e.then(r.resolve,r.reject),r.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.querystring=function(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach((e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""},r.querystringDecode=function(e){const t={},r=e.replace(/^\?/,"").split("&");return r.forEach((e=>{if(e){const[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}})),t},r.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},r.stringToByteArray=r.stringLength=void 0,r.stringify=function(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.validateArgCount=r.uuidv4=void 0,r.validateCallback=function(e,t,r,n){if(n&&!r)return;if("function"!=typeof r)throw new Error(R(e,t)+"must be a valid function.")},r.validateContextObject=function(e,t,r,n){if(n&&!r)return;if("object"!=typeof r||null===r)throw new Error(R(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.validateIndexedDBOpenable=function(){return new Promise(((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},o.onupgradeneeded=()=>{r=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))},r.validateNamespace=function(e,t,r){if(r&&!t)return;if("string"!=typeof t)throw new Error(R(e,"namespace")+"must be a valid firebase namespace.")},e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/es.regexp.exec.js"),e("core-js/modules/es.string.replace.js"),e("core-js/modules/web.dom-collections.iterator.js");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const o=r.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(e,t){if(!e)throw s(t)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.assert=i;const s=function(e){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.assertionError=s;const a=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t},u=r.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){const o=e[t],i=t+1<e.length,s=i?e[t+1]:0,a=t+2<e.length,u=a?e[t+2]:0,l=o>>2,c=(3&o)<<4|s>>4;let d=(15&s)<<2|u>>6,f=63&u;a||(f=64,i||(d=64)),n.push(r[l],r[c],r[d],r[f])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let r=0,n=0;for(;r<e.length;){const o=e[r++];if(o<128)t[n++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[r++];t[n++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(i>>10)),t[n++]=String.fromCharCode(56320+(1023&i))}else{const i=e[r++],s=e[r++];t[n++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){const o=r[e.charAt(t++)],i=t<e.length?r[e.charAt(t)]:0;++t;const s=t<e.length?r[e.charAt(t)]:64;++t;const a=t<e.length?r[e.charAt(t)]:64;if(++t,null==o||null==i||null==s||null==a)throw new l;const u=o<<2|i>>4;if(n.push(u),64!==s){const e=i<<4&240|s>>2;if(n.push(e),64!==a){const e=s<<6&192|a;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}r.DecodeBase64StringError=l;const c=function(e){const t=a(e);return u.encodeByteArray(t,!0)};r.base64Encode=c;const d=function(e){return c(e).replace(/\./g,"")};r.base64urlEncodeWithoutPadding=d;const f=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const r in t)t.hasOwnProperty(r)&&"__proto__"!==r&&(e[r]=p(e[r],t[r]));return e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function h(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.base64Decode=f;const _=()=>{try{return h().__FIREBASE_DEFAULTS__||(()=>{if(void 0===t||void 0===t.env)return;const e=t.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&f(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};r.getDefaults=_;const E=e=>{var t,r;return null===(r=null===(t=_())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]};r.getDefaultEmulatorHost=E;r.getDefaultEmulatorHostnameAndPort=e=>{const t=E(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]};r.getDefaultAppConfig=()=>{var e;return null===(e=_())||void 0===e?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.getExperimentalSetting=e=>{var t;return null===(t=_())||void 0===t?void 0:t[`_${e}`]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,r))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){var e;const t=null===(e=_())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.process)}catch(e){return!1}}r.Deferred=g;class S extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}r.FirebaseError=S;class T{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},n=`${this.service}/${e}`,o=this.errors[e],i=o?function(e,t){return e.replace(A,((e,r)=>{const n=t[r];return null!=n?String(n):`<${r}?>`}))}(o,r):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new S(n,s,r)}}r.ErrorFactory=T;const A=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(e){return JSON.parse(e)}const O=function(e){let t={},r={},n={},o="";try{const i=e.split(".");t=b(f(i[0])||""),r=b(f(i[1])||""),o=i[2],n=r.d||{},delete r.d}catch(e){}return{header:t,claims:r,data:n,signature:o}};r.decode=O;r.isValidTimestamp=function(e){const t=O(e).claims,r=Math.floor((new Date).getTime()/1e3);let n=0,o=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?n=t.nbf:t.hasOwnProperty("iat")&&(n=t.iat),o=t.hasOwnProperty("exp")?t.exp:n+86400),!!r&&!!n&&!!o&&r>=n&&r<=o};r.issuedAtTime=function(e){const t=O(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null};r.isValidFormat=function(e){const t=O(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")};function I(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.isAdmin=function(e){const t=O(e).claims;return"object"==typeof t&&!0===t.admin};r.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)r[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)r[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=4294967295&(t<<1|t>>>31)}let n,o,i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],u=this.chain_[3],l=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=u^s&(a^u),o=1518500249):(n=s^a^u,o=1859775393):e<60?(n=s&a|u&(s|a),o=2400959708):(n=s^a^u,o=3395469782);const t=(i<<5|i>>>27)+n+l+o+r[e]&4294967295;l=u,u=a,a=4294967295&(s<<30|s>>>2),s=i,i=t}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let n=0;const o=this.buf_;let i=this.inbuf_;for(;n<t;){if(0===i)for(;n<=r;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(o[i]=e.charCodeAt(n),++i,++n,i===this.blockSize){this.compress_(o),i=0;break}}else for(;n<t;)if(o[i]=e[n],++i,++n,i===this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let t=0;t<5;t++)for(let n=24;n>=0;n-=8)e[r]=this.chain_[t]>>n&255,++r;return e}};class v{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");n=function(e,t){if("object"!=typeof e||null===e)return!1;for(const r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===n.next&&(n.next=N),void 0===n.error&&(n.error=N),void 0===n.complete&&(n.complete=N);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}})),this.observers.push(n),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function N(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(e,t){return`${e} failed: ${t} argument `}r.validateArgCount=function(e,t,r,n){let o;if(n<t?o="at least "+t:n>r&&(o=0===r?"none":"no more than "+r),o){throw new Error(e+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+o+".")}};r.stringToByteArray=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);if(o>=55296&&o<=56319){const t=o-55296;n++,i(n<e.length,"Surrogate pair missing trail surrogate.");o=65536+(t<<10)+(e.charCodeAt(n)-56320)}o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):o<65536?(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.stringLength=function(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,r++):t+=3}return t};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))};const C=1e3,D=2,w=r.MAX_VALUE_MILLIS=144e5,L=r.RANDOM_FACTOR=.5}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:653,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/es.regexp.exec.js":442,"core-js/modules/es.string.replace.js":445,"core-js/modules/web.dom-collections.iterator.js":453}],224:[function(e,t,r){"use strict";t.exports=e("./redux-toolkit.cjs.production.min.js")},{"./redux-toolkit.cjs.development.js":225,"./redux-toolkit.cjs.production.min.js":226}],225:[function(e,t,r){(function(t,n){(function(){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},u=Object.create,l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,_=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,m=function(e,t,r){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},y=function(e,t){for(var r in t||(t={}))E.call(t,r)&&m(e,r,t[r]);if(h)for(var n=0,o=h(t);n<o.length;n++){r=o[n];g.call(t,r)&&m(e,r,t[r])}return e},S=function(e,t){return c(e,f(t))},T=function(e){return l(e,"__esModule",{value:!0})},A=function(e,t,r){if(t&&"object"==typeof t||"function"==typeof t)for(var n=function(n){E.call(e,n)||"default"===n||l(e,n,{get:function(){return t[n]},enumerable:!(r=d(t,n))||r.enumerable})},o=0,i=p(t);o<i.length;o++){n(i[o])}return e},b=function(e){return A(T(l(null!=e?u(_(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},O=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{a(r.next(e))}catch(e){o(e)}},s=function(e){try{a(r.throw(e))}catch(e){o(e)}},a=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};a((r=r.apply(e,t)).next())}))};T(r),function(e,t){for(var r in t)l(e,r,{get:t[r],enumerable:!0})}(r,{EnhancerArray:function(){return z},MiddlewareArray:function(){return K},SHOULD_AUTOBATCH:function(){return Tt},TaskAbortError:function(){return et},addListener:function(){return _t},autoBatchEnhancer:function(){return vt},clearAllListeners:function(){return Et},configureStore:function(){return de},createAction:function(){return k},createActionCreatorInvariantMiddleware:function(){return H},createAsyncThunk:function(){return De},createDraftSafeSelector:function(){return D},createEntityAdapter:function(){return Oe},createImmutableStateInvariantMiddleware:function(){return ne},createListenerMiddleware:function(){return yt},createNextState:function(){return v.default},createReducer:function(){return _e},createSelector:function(){return N.createSelector},createSerializableStateInvariantMiddleware:function(){return ae},createSlice:function(){return ge},current:function(){return v.current},findNonSerializableValue:function(){return ie},freeze:function(){return v.freeze},getDefaultMiddleware:function(){return le},getType:function(){return V},isAction:function(){return x},isActionCreator:function(){return F},isAllOf:function(){return Me},isAnyOf:function(){return Pe},isAsyncThunkAction:function(){return Ge},isDraft:function(){return v.isDraft},isFluxStandardAction:function(){return B},isFulfilled:function(){return Be},isImmutableDefault:function(){return Q},isPending:function(){return ke},isPlain:function(){return oe},isPlainObject:function(){return M},isRejected:function(){return xe},isRejectedWithValue:function(){return Fe},miniSerializeError:function(){return Ce},nanoid:function(){return Ie},original:function(){return v.original},prepareAutoBatched:function(){return At},removeListener:function(){return gt},unwrapResult:function(){return we}});var I=b(e("immer"));A(r,b(e("redux")));var v=b(e("immer")),N=b(e("reselect")),R=b(e("immer")),C=b(e("reselect")),D=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=C.createSelector.apply(void 0,e);return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,a([(0,R.isDraft)(e)?(0,R.current)(e):e],t))}},w=b(e("redux")),L=b(e("redux")),P="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?L.compose:L.compose.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function M(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}var U=b(e("redux-thunk")),j=function(e){return e&&"function"==typeof e.match};function k(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return y(y({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function x(e){return M(e)&&"type"in e}function F(e){return"function"==typeof e&&"type"in e&&j(e)}function B(e){return x(e)&&"string"==typeof e.type&&Object.keys(e).every(G)}function G(e){return["type","payload","error","meta"].indexOf(e)>-1}function V(e){return""+e}function H(e){void 0===e&&(e={});var t=e.isActionCreator,r=void 0===t?F:t;return function(){return function(e){return function(t){var n,o,i;return r(t)&&console.warn((n=t.type,o=n?(""+n).split("/"):[],i=o[o.length-1]||"actionCreator",'Detected an action creator with type "'+(n||"unknown")+"\" being dispatched. \nMake sure you're calling the action creator before dispatching, i.e. `dispatch("+i+"())` instead of `dispatch("+i+")`. This is necessary even if the action has no payload.")),e(t)}}}}var W=b(e("immer"));function Y(e,t){var r=0;return{measureTime:function(e){var t=Date.now();try{return e()}finally{var n=Date.now();r+=n-t}},warnIfExceeded:function(){r>e&&console.warn(t+" took "+r+"ms, which is more than the warning threshold of "+e+"ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.")}}}var K=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return i(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,a([void 0],e[0].concat(this)))):new(t.bind.apply(t,a([void 0],e.concat(this))))},t}(Array),z=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return i(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,a([void 0],e[0].concat(this)))):new(t.bind.apply(t,a([void 0],e.concat(this))))},t}(Array);function q(e){return(0,W.isDraftable)(e)?(0,W.default)(e,(function(){})):e}var $=!1,X="Invariant failed";function J(e,t){if(!e){if($)throw new Error(X);throw new Error(X+": "+(t||""))}}function Z(e,t,r,n){return JSON.stringify(e,function(e,t){var r=[],n=[];t||(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"});return function(o,i){if(r.length>0){var s=r.indexOf(this);~s?r.splice(s+1):r.push(this),~s?n.splice(s,1/0,o):n.push(o),~r.indexOf(i)&&(i=t.call(this,o,i))}else r.push(i);return null==e?i:e.call(this,o,i)}}(t,n),r)}function Q(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function ee(e,t,r){var n=te(e,t,r);return{detectMutations:function(){return re(e,t,n,r)}}}function te(e,t,r,n,o){void 0===t&&(t=[]),void 0===n&&(n=""),void 0===o&&(o=new Set);var i={value:r};if(!e(r)&&!o.has(r))for(var s in o.add(r),i.children={},r){var a=n?n+"."+s:s;t.length&&-1!==t.indexOf(a)||(i.children[s]=te(e,t,r[s],a))}return i}function re(e,t,r,n,o,i){void 0===t&&(t=[]),void 0===o&&(o=!1),void 0===i&&(i="");var s=r?r.value:void 0,a=s===n;if(o&&!a&&!Number.isNaN(n))return{wasMutated:!0,path:i};if(e(s)||e(n))return{wasMutated:!1};var u={};for(var l in r.children)u[l]=!0;for(var l in n)u[l]=!0;var c=t.length>0,d=function(o){var s=i?i+"."+o:o;if(c&&t.some((function(e){return e instanceof RegExp?e.test(s):s===e})))return"continue";var u=re(e,t,r.children[o],n[o],a,s);if(u.wasMutated)return{value:u}};for(var l in u){var f=d(l);if("object"==typeof f)return f.value}return{wasMutated:!1}}function ne(e){void 0===e&&(e={});var t=e.isImmutable,r=void 0===t?Q:t,n=e.ignoredPaths,o=e.warnAfter,i=void 0===o?32:o,s=e.ignore;n=n||s;var a=ee.bind(null,r,n);return function(e){var t,r=e.getState,n=r(),o=a(n);return function(e){return function(s){var u=Y(i,"ImmutableStateInvariantMiddleware");u.measureTime((function(){n=r(),t=o.detectMutations(),o=a(n),J(!t.wasMutated,"A state mutation was detected between dispatches, in the path '"+(t.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}));var l=e(s);return u.measureTime((function(){n=r(),t=o.detectMutations(),o=a(n),t.wasMutated&&J(!t.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(t.path||"")+". Take a look at the reducer(s) handling the action "+Z(s)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")})),u.warnIfExceeded(),l}}}}function oe(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||M(e)}function ie(e,t,r,n,o,i){var s;if(void 0===t&&(t=""),void 0===r&&(r=oe),void 0===o&&(o=[]),!r(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e)return!1;if(null==i?void 0:i.has(e))return!1;for(var a=null!=n?n(e):Object.entries(e),u=o.length>0,l=function(e,a){var l=t?t+"."+e:e;if(u&&o.some((function(e){return e instanceof RegExp?e.test(l):l===e})))return"continue";return r(a)?"object"==typeof a&&(s=ie(a,l,r,n,o,i))?{value:s}:void 0:{value:{keyPath:l,value:a}}},c=0,d=a;c<d.length;c++){var f=d[c],p=l(f[0],f[1]);if("object"==typeof p)return p.value}return i&&se(e)&&i.add(e),!1}function se(e){if(!Object.isFrozen(e))return!1;for(var t=0,r=Object.values(e);t<r.length;t++){var n=r[t];if("object"==typeof n&&null!==n&&!se(n))return!1}return!0}function ae(e){void 0===e&&(e={});var t=e.isSerializable,r=void 0===t?oe:t,n=e.getEntries,o=e.ignoredActions,i=void 0===o?[]:o,s=e.ignoredActionPaths,a=void 0===s?["meta.arg","meta.baseQueryMeta"]:s,u=e.ignoredPaths,l=void 0===u?[]:u,c=e.warnAfter,d=void 0===c?32:c,f=e.ignoreState,p=void 0!==f&&f,h=e.ignoreActions,_=void 0!==h&&h,E=e.disableCache,g=!(void 0!==E&&E)&&WeakSet?new WeakSet:void 0;return function(e){return function(t){return function(o){var s=t(o),u=Y(d,"SerializableStateInvariantMiddleware");return _||i.length&&-1!==i.indexOf(o.type)||u.measureTime((function(){var e=ie(o,"",r,n,a,g);if(e){var t=e.keyPath,i=e.value;console.error("A non-serializable value was detected in an action, in the path: `"+t+"`. Value:",i,"\nTake a look at the logic that dispatched this action: ",o,"\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)","\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)")}})),p||(u.measureTime((function(){var t=ie(e.getState(),"",r,n,l,g);if(t){var i=t.keyPath,s=t.value;console.error("A non-serializable value was detected in the state, in the path: `"+i+"`. Value:",s,"\nTake a look at the reducer(s) handling this action type: "+o.type+".\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)")}})),u.warnIfExceeded()),s}}}}function ue(e){return"boolean"==typeof e}function le(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=e.immutableCheck,o=void 0===n||n,i=e.serializableCheck,s=void 0===i||i,a=e.actionCreatorCheck,u=void 0===a||a,l=new K;if(r&&(ue(r)?l.push(U.default):l.push(U.default.withExtraArgument(r.extraArgument))),o){var c={};ue(o)||(c=o),l.unshift(ne(c))}if(s){var d={};ue(s)||(d=s),l.push(ae(d))}if(u){var f={};ue(u)||(f=u),l.unshift(H(f))}return l}var ce=!1;function de(e){var t,r=function(e){return le(e)},n=e||{},o=n.reducer,i=void 0===o?void 0:o,s=n.middleware,u=void 0===s?r():s,l=n.devTools,c=void 0===l||l,d=n.preloadedState,f=void 0===d?void 0:d,p=n.enhancers,h=void 0===p?void 0:p;if("function"==typeof i)t=i;else{if(!M(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,w.combineReducers)(i)}var _=u;if("function"==typeof _&&(_=_(r),!ce&&!Array.isArray(_)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!ce&&_.some((function(e){return"function"!=typeof e})))throw new Error("each middleware provided to configureStore must be a function");var E=w.applyMiddleware.apply(void 0,_),g=w.compose;c&&(g=P(y({trace:!ce},"object"==typeof c&&c)));var m=new z(E),S=m;Array.isArray(h)?S=a([E],h):"function"==typeof h&&(S=h(m));var T=g.apply(void 0,S);return(0,w.createStore)(t,f,T)}var fe=b(e("immer"));function pe(e){var t,r={},n=[],o={addCase:function(e,i){if(n.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(t)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`");var s="string"==typeof e?e:e.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in r)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return r[s]=i,o},addMatcher:function(e,r){if(t)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return n.push({matcher:e,reducer:r}),o},addDefaultCase:function(e){if(t)throw new Error("`builder.addDefaultCase` can only be called once");return t=e,o}};return e(o),[r,n,t]}var he=!1;function _e(e,t,r,n){void 0===r&&(r=[]),"object"==typeof t&&(he||(he=!0,console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer")));var o,i="function"==typeof t?pe(t):[t,r,n],s=i[0],u=i[1],l=i[2];if("function"==typeof e)o=function(){return q(e())};else{var c=q(e);o=function(){return c}}function d(e,t){void 0===e&&(e=o());var r=a([s[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[l]),r.reduce((function(e,r){if(r){var n;if((0,fe.isDraft)(e))return void 0===(n=r(e,t))?e:n;if((0,fe.isDraftable)(e))return(0,fe.default)(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return d.getInitialState=o,d}var Ee=!1;function ge(e){var r=e.name;if(!r)throw new Error("`name` is a required option for createSlice");void 0!==t&&void 0===e.initialState&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");var n,o="function"==typeof e.initialState?e.initialState:q(e.initialState),i=e.reducers||{},s=Object.keys(i),a={},u={},l={};function c(){"object"==typeof e.extraReducers&&(Ee||(Ee=!0,console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice")));var t="function"==typeof e.extraReducers?pe(e.extraReducers):[e.extraReducers],r=t[0],n=void 0===r?{}:r,i=t[1],s=void 0===i?[]:i,a=t[2],l=void 0===a?void 0:a,c=y(y({},n),u);return _e(o,(function(e){for(var t in c)e.addCase(t,c[t]);for(var r=0,n=s;r<n.length;r++){var o=n[r];e.addMatcher(o.matcher,o.reducer)}l&&e.addDefaultCase(l)}))}return s.forEach((function(e){var t,n,o=i[e],s=r+"/"+e;"reducer"in o?(t=o.reducer,n=o.prepare):t=o,a[e]=t,u[s]=t,l[e]=n?k(s,n):k(s)})),{name:r,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:l,caseReducers:a,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var me=b(e("immer"));function ye(e){return function(t,r){var n=function(t){B(r)?e(r.payload,t):e(r,t)};return(0,me.isDraft)(t)?(n(t),t):(0,me.default)(t,n)}}function Se(e,t){var r=t(e);return void 0===r&&console.warn("The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),r}function Te(e){return Array.isArray(e)||(e=Object.values(e)),e}function Ae(e,t,r){for(var n=[],o=[],i=0,s=e=Te(e);i<s.length;i++){var a=s[i],u=Se(a,t);u in r.entities?o.push({id:u,changes:a}):n.push(a)}return[n,o]}function be(e){function t(t,r){var n=Se(t,e);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function r(e,r){for(var n=0,o=e=Te(e);n<o.length;n++){t(o[n],r)}}function n(t,r){var n=Se(t,e);n in r.entities||r.ids.push(n),r.entities[n]=t}function o(e,t){var r=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],r=!0)})),r&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function i(t,r){var n={},o={};if(t.forEach((function(e){e.id in r.entities&&(o[e.id]={id:e.id,changes:y(y({},o[e.id]?o[e.id].changes:null),e.changes)})})),(t=Object.values(o)).length>0){var i=t.filter((function(t){return function(t,r,n){var o=n.entities[r.id],i=Object.assign({},o,r.changes),s=Se(i,e),a=s!==r.id;return a&&(t[r.id]=s,delete n.entities[r.id]),n.entities[s]=i,a}(n,t,r)})).length>0;i&&(r.ids=Object.keys(r.entities))}}function s(t,n){var o=Ae(t,e,n),s=o[0];i(o[1],n),r(s,n)}return{removeAll:(a=function(e){Object.assign(e,{ids:[],entities:{}})},u=ye((function(e,t){return a(t)})),function(e){return u(e,void 0)}),addOne:ye(t),addMany:ye(r),setOne:ye(n),setMany:ye((function(e,t){for(var r=0,o=e=Te(e);r<o.length;r++){n(o[r],t)}})),setAll:ye((function(e,t){e=Te(e),t.ids=[],t.entities={},r(e,t)})),updateOne:ye((function(e,t){return i([e],t)})),updateMany:ye(i),upsertOne:ye((function(e,t){return s([e],t)})),upsertMany:ye(s),removeOne:ye((function(e,t){return o([e],t)})),removeMany:ye(o)};var a,u}function Oe(e){void 0===e&&(e={});var t=y({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer,o={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},i={getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=D(t,r,(function(e,t){return e.map((function(e){return t[e]}))})),o=function(e,t){return t},i=function(e,t){return e[t]},s=D(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:s,selectById:D(r,o,i)};var a=D(e,r);return{selectIds:D(e,t),selectEntities:a,selectAll:D(e,n),selectTotal:D(e,s),selectById:D(a,o,i)}}},s=n?function(e,t){var r=be(e);function n(t,r){var n=(t=Te(t)).filter((function(t){return!(Se(t,e)in r.entities)}));0!==n.length&&a(n,r)}function o(e,t){0!==(e=Te(e)).length&&a(e,t)}function i(t,r){for(var n=!1,o=0,i=t;o<i.length;o++){var s=i[o],a=r.entities[s.id];if(a){n=!0,Object.assign(a,s.changes);var l=e(a);s.id!==l&&(delete r.entities[s.id],r.entities[l]=a)}}n&&u(r)}function s(t,r){var o=Ae(t,e,r),s=o[0];i(o[1],r),n(s,r)}function a(t,r){t.forEach((function(t){r.entities[e(t)]=t})),u(r)}function u(r){var n=Object.values(r.entities);n.sort(t);var o=n.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0})(r.ids,o)||(r.ids=o)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:ye((function(e,t){return n([e],t)})),updateOne:ye((function(e,t){return i([e],t)})),upsertOne:ye((function(e,t){return s([e],t)})),setOne:ye((function(e,t){return o([e],t)})),setMany:ye(o),setAll:ye((function(e,t){e=Te(e),t.entities={},t.ids=[],n(e,t)})),addMany:ye(n),updateMany:ye(i),upsertMany:ye(s)}}(r,n):be(r);return y(y(y({selectId:r,sortComparer:n},o),i),s)}var Ie=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ve=["name","message","stack","code"],Ne=function(e,t){this.payload=e,this.meta=t},Re=function(e,t){this.payload=e,this.meta=t},Ce=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=ve;r<n.length;r++){var o=n[r];"string"==typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}},De=function(){function e(e,t,r){var n=k(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:S(y({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),o=k(e+"/pending",(function(e,t,r){return{payload:void 0,meta:S(y({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=k(e+"/rejected",(function(e,t,n,o,i){return{payload:o,error:(r&&r.serializeError||Ce)(e||"Rejected"),meta:S(y({},i||{}),{arg:n,requestId:t,rejectedWithValue:!!o,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a=!1,u="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){a||(a=!0,console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'."))},e}();return Object.assign((function(e){return function(a,l,c){var d,f=(null==r?void 0:r.idGenerator)?r.idGenerator(e):Ie(),p=new u;function h(e){d=e,p.abort()}var _=function(){return O(this,null,(function(){var u,_,E,g,m,y;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),g=null==(u=null==r?void 0:r.condition)?void 0:u.call(r,e,{getState:l,extra:c}),null===(S=g)||"object"!=typeof S||"function"!=typeof S.then?[3,2]:[4,g];case 1:g=s.sent(),s.label=2;case 2:if(!1===g||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,m=new Promise((function(e,t){return p.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:d||"Aborted"})}))})),a(o(f,e,null==(_=null==r?void 0:r.getPendingMeta)?void 0:_.call(r,{requestId:f,arg:e},{getState:l,extra:c}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:a,getState:l,extra:c,requestId:f,signal:p.signal,abort:h,rejectWithValue:function(e,t){return new Ne(e,t)},fulfillWithValue:function(e,t){return new Re(e,t)}})).then((function(t){if(t instanceof Ne)throw t;return t instanceof Re?n(t.payload,f,e,t.meta):n(t,f,e)}))])];case 3:return E=s.sent(),[3,5];case 4:return y=s.sent(),E=y instanceof Ne?i(null,f,e,y.payload,y.meta):i(y,f,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&i.match(E)&&E.meta.condition||a(E),[2,E]}var S}))}))}();return Object.assign(_,{abort:h,requestId:f,arg:e,unwrap:function(){return _.then(we)}})}}),{pending:o,rejected:i,fulfilled:n,typePrefix:e})}return e.withTypes=function(){return e},e}();function we(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Le=function(e,t){return j(e)?e.match(t):e(t)};function Pe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return Le(e,t)}))}}function Me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return Le(e,t)}))}}function Ue(e,t){if(!e||!e.meta)return!1;var r="string"==typeof e.meta.requestId,n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function je(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ue(e,["pending"])}:je(e)?function(t){var r=e.map((function(e){return e.pending}));return Pe.apply(void 0,r)(t)}:ke()(e[0])}function xe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ue(e,["rejected"])}:je(e)?function(t){var r=e.map((function(e){return e.rejected}));return Pe.apply(void 0,r)(t)}:xe()(e[0])}function Fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||je(e)?function(t){return Me(xe.apply(void 0,e),r)(t)}:Fe()(e[0])}function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ue(e,["fulfilled"])}:je(e)?function(t){var r=e.map((function(e){return e.fulfilled}));return Pe.apply(void 0,r)(t)}:Be()(e[0])}function Ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ue(e,["pending","fulfilled","rejected"])}:je(e)?function(t){for(var r=[],n=0,o=e;n<o.length;n++){var i=o[n];r.push(i.pending,i.rejected,i.fulfilled)}return Pe.apply(void 0,r)(t)}:Ge()(e[0])}var Ve=function(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function")},He=function(){},We=function(e,t){return void 0===t&&(t=He),e.catch(t),e},Ye=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Ke=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ze="listener",qe="completed",$e="cancelled",Xe="task-"+$e,Je="task-"+qe,Ze=ze+"-"+$e,Qe=ze+"-"+qe,et=function(e){this.code=e,this.name="TaskAbortError",this.message="task "+$e+" (reason: "+e+")"},tt=function(e){if(e.aborted)throw new et(e.reason)};function rt(e,t){var r=He;return new Promise((function(n,o){var i=function(){return o(new et(e.reason))};e.aborted?i():(r=Ye(e,i),t.finally((function(){return r()})).then(n,o))})).finally((function(){r=He}))}var nt=function(e){return function(t){return We(rt(e,t).then((function(t){return tt(e),t})))}},ot=function(e){var t=nt(e);return function(e){return t(new Promise((function(t){return setTimeout(t,e)})))}},it=Object.assign,st={},at="listenerMiddleware",ut=function(e,t){return function(r,n){Ve(r,"taskExecutor");var o,i=new AbortController;o=i,Ye(e,(function(){return Ke(o,e.reason)}));var a,u,l=(a=function(){return O(void 0,null,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return tt(e),tt(i.signal),[4,r({pause:nt(i.signal),delay:ot(i.signal),signal:i.signal})];case 1:return t=n.sent(),tt(i.signal),[2,t]}}))}))},u=function(){return Ke(i,Je)},O(void 0,null,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return t.sent(),[4,a()];case 2:return[2,{status:"ok",value:t.sent()}];case 3:return[2,{status:(e=t.sent())instanceof et?"cancelled":"rejected",error:e}];case 4:return null==u||u(),[7];case 5:return[2]}}))})));return(null==n?void 0:n.autoJoin)&&t.push(l),{result:nt(e)(l),cancel:function(){Ke(i,Xe)}}}},lt=function(e,t){return function(r,n){return We(function(r,n){return O(void 0,null,(function(){var o,i,a,u;return s(this,(function(s){switch(s.label){case 0:tt(t),o=function(){},i=new Promise((function(t,n){var i=e({predicate:r,effect:function(e,r){r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});o=function(){i(),n()}})),a=[i],null!=n&&a.push(new Promise((function(e){return setTimeout(e,n,null)}))),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,rt(t,Promise.race(a))];case 2:return u=s.sent(),tt(t),[2,u];case 3:return o(),[7];case 4:return[2]}}))}))}(r,n))}},ct=function(e){var t=e.type,r=e.actionCreator,n=e.matcher,o=e.predicate,i=e.effect;if(t)o=k(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(!o)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Ve(i,"options.listener"),{predicate:o,type:t,effect:i}},dt=function(e){var t=ct(e),r=t.type,n=t.predicate,o=t.effect;return{id:Ie(),effect:o,type:r,predicate:n,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}}},ft=function(e){e.pending.forEach((function(e){Ke(e,Ze)}))},pt=function(e){return function(){e.forEach(ft),e.clear()}},ht=function(e,t,r){try{e(t,r)}catch(e){setTimeout((function(){throw e}),0)}},_t=k(at+"/add"),Et=k(at+"/removeAll"),gt=k(at+"/remove"),mt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,a([at+"/error"],e))};function yt(e){var t=this;void 0===e&&(e={});var r=new Map,n=e.extra,o=e.onError,i=void 0===o?mt:o;Ve(i,"onError");var a=function(e){for(var t=0,n=Array.from(r.values());t<n.length;t++){var o=n[t];if(e(o))return o}},u=function(e){var t=a((function(t){return t.effect===e.effect}));return t||(t=dt(e)),function(e){return e.unsubscribe=function(){return r.delete(e.id)},r.set(e.id,e),function(t){e.unsubscribe(),(null==t?void 0:t.cancelActive)&&ft(e)}}(t)},l=function(e){var t=ct(e),r=t.type,n=t.effect,o=t.predicate,i=a((function(e){return("string"==typeof r?e.type===r:e.predicate===o)&&e.effect===n}));return i&&(i.unsubscribe(),e.cancelActive&&ft(i)),!!i},c=function(e,o,a,l){return O(t,null,(function(){var t,c,d,f;return s(this,(function(s){switch(s.label){case 0:t=new AbortController,c=lt(u,t.signal),d=[],s.label=1;case 1:return s.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(o,it({},a,{getOriginalState:l,condition:function(e,t){return c(e,t).then(Boolean)},take:c,delay:ot(t.signal),pause:nt(t.signal),extra:n,signal:t.signal,fork:ut(t.signal,d),unsubscribe:e.unsubscribe,subscribe:function(){r.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach((function(e,r,n){e!==t&&(Ke(e,Ze),n.delete(e))}))}})))];case 2:return s.sent(),[3,6];case 3:return(f=s.sent())instanceof et||ht(i,f,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(d)];case 5:return s.sent(),Ke(t,Qe),e.pending.delete(t),[7];case 6:return[2]}}))}))},d=pt(r);return{middleware:function(e){return function(t){return function(n){if(!x(n))return t(n);if(_t.match(n))return u(n.payload);if(!Et.match(n)){if(gt.match(n))return l(n.payload);var o,s=e.getState(),a=function(){if(s===st)throw new Error(at+": getOriginalState can only be called synchronously");return s};try{if(o=t(n),r.size>0)for(var f=e.getState(),p=Array.from(r.values()),h=0,_=p;h<_.length;h++){var E=_[h],g=!1;try{g=E.predicate(n,f,s)}catch(e){g=!1,ht(i,e,{raisedBy:"predicate"})}g&&c(E,n,e,a)}}finally{s=st}return o}d()}}},startListening:u,stopListening:l,clearListeners:d}}var St,Tt="RTK_autoBatch",At=function(){return function(e){var t;return{payload:e,meta:(t={},t[Tt]=!0,t)}}},bt="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:void 0!==n?n:globalThis):function(e){return(St||(St=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))},Ot=function(e){return function(t){setTimeout(t,e)}},It="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ot(10),vt=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=t.apply(void 0,r),i=!0,s=!1,a=!1,u=new Set,l="tick"===e.type?bt:"raf"===e.type?It:"callback"===e.type?e.queueNotification:Ot(e.timeout),c=function(){a=!1,s&&(s=!1,u.forEach((function(e){return e()})))};return Object.assign({},o,{subscribe:function(e){var t=o.subscribe((function(){return i&&e()}));return u.add(e),function(){t(),u.delete(e)}},dispatch:function(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t[Tt]),(s=!i)&&(a||(a=!0,l(c))),o.dispatch(e)}finally{i=!0}}})}}};(0,I.enableES5)()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:653,immer:490,redux:663,"redux-thunk":662,reselect:677}],226:[function(e,t,r){(function(t){(function(){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},a=Object.create,u=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,h=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,g=function(e,t,r){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},m=function(e,t){for(var r in t||(t={}))_.call(t,r)&&g(e,r,t[r]);if(p)for(var n=0,o=p(t);n<o.length;n++)E.call(t,r=o[n])&&g(e,r,t[r]);return e},y=function(e,t){return l(e,d(t))},S=function(e){return u(e,"__esModule",{value:!0})},T=function(e,t,r){if(t&&"object"==typeof t||"function"==typeof t)for(var n=function(n){_.call(e,n)||"default"===n||u(e,n,{get:function(){return t[n]},enumerable:!(r=c(t,n))||r.enumerable})},o=0,i=f(t);o<i.length;o++)n(i[o]);return e},A=function(e){return T(S(u(null!=e?a(h(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},b=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{a(r.next(e))}catch(e){o(e)}},s=function(e){try{a(r.throw(e))}catch(e){o(e)}},a=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};a((r=r.apply(e,t)).next())}))};S(r),function(e,t){for(var r in t)u(e,r,{get:t[r],enumerable:!0})}(r,{EnhancerArray:function(){return Y},MiddlewareArray:function(){return W},SHOULD_AUTOBATCH:function(){return Je},TaskAbortError:function(){return Me},addListener:function(){return Ye},autoBatchEnhancer:function(){return rt},clearAllListeners:function(){return Ke},configureStore:function(){return ee},createAction:function(){return j},createActionCreatorInvariantMiddleware:function(){return V},createAsyncThunk:function(){return ge},createDraftSafeSelector:function(){return C},createEntityAdapter:function(){return de},createImmutableStateInvariantMiddleware:function(){return q},createListenerMiddleware:function(){return $e},createNextState:function(){return I.default},createReducer:function(){return ne},createSelector:function(){return v.createSelector},createSerializableStateInvariantMiddleware:function(){return Z},createSlice:function(){return oe},current:function(){return I.current},findNonSerializableValue:function(){return X},freeze:function(){return I.freeze},getDefaultMiddleware:function(){return Q},getType:function(){return G},isAction:function(){return k},isActionCreator:function(){return x},isAllOf:function(){return Te},isAnyOf:function(){return Se},isAsyncThunkAction:function(){return Re},isDraft:function(){return I.isDraft},isFluxStandardAction:function(){return F},isFulfilled:function(){return Ne},isImmutableDefault:function(){return z},isPending:function(){return Oe},isPlain:function(){return $},isPlainObject:function(){return P},isRejected:function(){return Ie},isRejectedWithValue:function(){return ve},miniSerializeError:function(){return Ee},nanoid:function(){return fe},original:function(){return I.original},prepareAutoBatched:function(){return Ze},removeListener:function(){return ze},unwrapResult:function(){return me}});var O=A(e("immer"));T(r,A(e("redux")));var I=A(e("immer")),v=A(e("reselect")),N=A(e("immer")),R=A(e("reselect")),C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=R.createSelector.apply(void 0,e);return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,s([(0,N.isDraft)(e)?(0,N.current)(e):e],t))}},D=A(e("redux")),w=A(e("redux")),L="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?w.compose:w.compose.apply(null,arguments)};function P(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window;var M=A(e("redux-thunk")),U=function(e){return e&&"function"==typeof e.match};function j(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return m(m({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function k(e){return P(e)&&"type"in e}function x(e){return"function"==typeof e&&"type"in e&&U(e)}function F(e){return k(e)&&"string"==typeof e.type&&Object.keys(e).every(B)}function B(e){return["type","payload","error","meta"].indexOf(e)>-1}function G(e){return""+e}function V(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}var H=A(e("immer")),W=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return o(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,s([void 0],e[0].concat(this)))):new(t.bind.apply(t,s([void 0],e.concat(this))))},t}(Array),Y=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return o(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,s([void 0],e[0].concat(this)))):new(t.bind.apply(t,s([void 0],e.concat(this))))},t}(Array);function K(e){return(0,H.isDraftable)(e)?(0,H.default)(e,(function(){})):e}function z(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function q(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function $(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||P(e)}function X(e,t,r,n,o,i){var s;if(void 0===t&&(t=""),void 0===r&&(r=$),void 0===o&&(o=[]),!r(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e)return!1;if(null==i?void 0:i.has(e))return!1;for(var a=null!=n?n(e):Object.entries(e),u=o.length>0,l=function(e,a){var l=t?t+"."+e:e;return u&&o.some((function(e){return e instanceof RegExp?e.test(l):l===e}))?"continue":r(a)?"object"==typeof a&&(s=X(a,l,r,n,o,i))?{value:s}:void 0:{value:{keyPath:l,value:a}}},c=0,d=a;c<d.length;c++){var f=d[c],p=l(f[0],f[1]);if("object"==typeof p)return p.value}return i&&J(e)&&i.add(e),!1}function J(e){if(!Object.isFrozen(e))return!1;for(var t=0,r=Object.values(e);t<r.length;t++){var n=r[t];if("object"==typeof n&&null!==n&&!J(n))return!1}return!0}function Z(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function Q(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=new W;return r&&n.push("boolean"==typeof r?M.default:M.default.withExtraArgument(r.extraArgument)),n}function ee(e){var t,r=function(e){return Q(e)},n=e||{},o=n.reducer,i=void 0===o?void 0:o,a=n.middleware,u=void 0===a?r():a,l=n.devTools,c=void 0===l||l,d=n.preloadedState,f=void 0===d?void 0:d,p=n.enhancers,h=void 0===p?void 0:p;if("function"==typeof i)t=i;else{if(!P(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,D.combineReducers)(i)}var _=u;"function"==typeof _&&(_=_(r));var E=D.applyMiddleware.apply(void 0,_),g=D.compose;c&&(g=L(m({trace:!1},"object"==typeof c&&c)));var y=new Y(E),S=y;Array.isArray(h)?S=s([E],h):"function"==typeof h&&(S=h(y));var T=g.apply(void 0,S);return(0,D.createStore)(t,f,T)}var te=A(e("immer"));function re(e){var t,r={},n=[],o={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(!n)throw new Error("`builder.addCase` cannot be called with an empty action type");if(n in r)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return r[n]=t,o},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),o},addDefaultCase:function(e){return t=e,o}};return e(o),[r,n,t]}function ne(e,t,r,n){void 0===r&&(r=[]);var o,i="function"==typeof t?re(t):[t,r,n],a=i[0],u=i[1],l=i[2];if("function"==typeof e)o=function(){return K(e())};else{var c=K(e);o=function(){return c}}function d(e,t){void 0===e&&(e=o());var r=s([a[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[l]),r.reduce((function(e,r){if(r){var n;if((0,te.isDraft)(e))return void 0===(n=r(e,t))?e:n;if((0,te.isDraftable)(e))return(0,te.default)(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return d.getInitialState=o,d}function oe(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r,n="function"==typeof e.initialState?e.initialState:K(e.initialState),o=e.reducers||{},i=Object.keys(o),s={},a={},u={};function l(){var t="function"==typeof e.extraReducers?re(e.extraReducers):[e.extraReducers],r=t[0],o=t[1],i=void 0===o?[]:o,s=t[2],u=void 0===s?void 0:s,l=m(m({},void 0===r?{}:r),a);return ne(n,(function(e){for(var t in l)e.addCase(t,l[t]);for(var r=0,n=i;r<n.length;r++){var o=n[r];e.addMatcher(o.matcher,o.reducer)}u&&e.addDefaultCase(u)}))}return i.forEach((function(e){var r,n,i=o[e],l=t+"/"+e;"reducer"in i?(r=i.reducer,n=i.prepare):r=i,s[e]=r,a[l]=r,u[e]=n?j(l,n):j(l)})),{name:t,reducer:function(e,t){return r||(r=l()),r(e,t)},actions:u,caseReducers:s,getInitialState:function(){return r||(r=l()),r.getInitialState()}}}var ie=A(e("immer"));function se(e){return function(t,r){var n=function(t){F(r)?e(r.payload,t):e(r,t)};return(0,ie.isDraft)(t)?(n(t),t):(0,ie.default)(t,n)}}function ae(e,t){return t(e)}function ue(e){return Array.isArray(e)||(e=Object.values(e)),e}function le(e,t,r){for(var n=[],o=[],i=0,s=e=ue(e);i<s.length;i++){var a=s[i],u=ae(a,t);u in r.entities?o.push({id:u,changes:a}):n.push(a)}return[n,o]}function ce(e){function t(t,r){var n=ae(t,e);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function r(e,r){for(var n=0,o=e=ue(e);n<o.length;n++)t(o[n],r)}function n(t,r){var n=ae(t,e);n in r.entities||r.ids.push(n),r.entities[n]=t}function o(e,t){var r=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],r=!0)})),r&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function i(t,r){var n={},o={};if(t.forEach((function(e){e.id in r.entities&&(o[e.id]={id:e.id,changes:m(m({},o[e.id]?o[e.id].changes:null),e.changes)})})),(t=Object.values(o)).length>0){var i=t.filter((function(t){return function(t,r,n){var o=Object.assign({},n.entities[r.id],r.changes),i=ae(o,e),s=i!==r.id;return s&&(t[r.id]=i,delete n.entities[r.id]),n.entities[i]=o,s}(n,t,r)})).length>0;i&&(r.ids=Object.keys(r.entities))}}function s(t,n){var o=le(t,e,n),s=o[0];i(o[1],n),r(s,n)}return{removeAll:(a=function(e){Object.assign(e,{ids:[],entities:{}})},u=se((function(e,t){return a(t)})),function(e){return u(e,void 0)}),addOne:se(t),addMany:se(r),setOne:se(n),setMany:se((function(e,t){for(var r=0,o=e=ue(e);r<o.length;r++)n(o[r],t)})),setAll:se((function(e,t){e=ue(e),t.ids=[],t.entities={},r(e,t)})),updateOne:se((function(e,t){return i([e],t)})),updateMany:se(i),upsertOne:se((function(e,t){return s([e],t)})),upsertMany:se(s),removeOne:se((function(e,t){return o([e],t)})),removeMany:se(o)};var a,u}function de(e){void 0===e&&(e={});var t=m({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer,o={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},i={getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=C(t,r,(function(e,t){return e.map((function(e){return t[e]}))})),o=function(e,t){return t},i=function(e,t){return e[t]},s=C(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:s,selectById:C(r,o,i)};var a=C(e,r);return{selectIds:C(e,t),selectEntities:a,selectAll:C(e,n),selectTotal:C(e,s),selectById:C(a,o,i)}}},s=n?function(e,t){var r=ce(e);function n(t,r){var n=(t=ue(t)).filter((function(t){return!(ae(t,e)in r.entities)}));0!==n.length&&a(n,r)}function o(e,t){0!==(e=ue(e)).length&&a(e,t)}function i(t,r){for(var n=!1,o=0,i=t;o<i.length;o++){var s=i[o],a=r.entities[s.id];if(a){n=!0,Object.assign(a,s.changes);var l=e(a);s.id!==l&&(delete r.entities[s.id],r.entities[l]=a)}}n&&u(r)}function s(t,r){var o=le(t,e,r),s=o[0];i(o[1],r),n(s,r)}function a(t,r){t.forEach((function(t){r.entities[e(t)]=t})),u(r)}function u(r){var n=Object.values(r.entities);n.sort(t);var o=n.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0})(r.ids,o)||(r.ids=o)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:se((function(e,t){return n([e],t)})),updateOne:se((function(e,t){return i([e],t)})),upsertOne:se((function(e,t){return s([e],t)})),setOne:se((function(e,t){return o([e],t)})),setMany:se(o),setAll:se((function(e,t){e=ue(e),t.entities={},t.ids=[],n(e,t)})),addMany:se(n),updateMany:se(i),upsertMany:se(s)}}(r,n):ce(r);return m(m(m({selectId:r,sortComparer:n},o),i),s)}var fe=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},pe=["name","message","stack","code"],he=function(e,t){this.payload=e,this.meta=t},_e=function(e,t){this.payload=e,this.meta=t},Ee=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=pe;r<n.length;r++){var o=n[r];"string"==typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}},ge=function(){function e(e,t,r){var n=j(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:y(m({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),o=j(e+"/pending",(function(e,t,r){return{payload:void 0,meta:y(m({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),s=j(e+"/rejected",(function(e,t,n,o,i){return{payload:o,error:(r&&r.serializeError||Ee)(e||"Rejected"),meta:y(m({},i||{}),{arg:n,requestId:t,rejectedWithValue:!!o,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(u,l,c){var d,f=(null==r?void 0:r.idGenerator)?r.idGenerator(e):fe(),p=new a;function h(e){d=e,p.abort()}var _=function(){return b(this,null,(function(){var a,_,E,g,m,y;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),null===(S=g=null==(a=null==r?void 0:r.condition)?void 0:a.call(r,e,{getState:l,extra:c}))||"object"!=typeof S||"function"!=typeof S.then?[3,2]:[4,g];case 1:g=i.sent(),i.label=2;case 2:if(!1===g||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return m=new Promise((function(e,t){return p.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:d||"Aborted"})}))})),u(o(f,e,null==(_=null==r?void 0:r.getPendingMeta)?void 0:_.call(r,{requestId:f,arg:e},{getState:l,extra:c}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:u,getState:l,extra:c,requestId:f,signal:p.signal,abort:h,rejectWithValue:function(e,t){return new he(e,t)},fulfillWithValue:function(e,t){return new _e(e,t)}})).then((function(t){if(t instanceof he)throw t;return t instanceof _e?n(t.payload,f,e,t.meta):n(t,f,e)}))])];case 3:return E=i.sent(),[3,5];case 4:return y=i.sent(),E=y instanceof he?s(null,f,e,y.payload,y.meta):s(y,f,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&s.match(E)&&E.meta.condition||u(E),[2,E]}var S}))}))}();return Object.assign(_,{abort:h,requestId:f,arg:e,unwrap:function(){return _.then(me)}})}}),{pending:o,rejected:s,fulfilled:n,typePrefix:e})}return e.withTypes=function(){return e},e}();function me(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var ye=function(e,t){return U(e)?e.match(t):e(t)};function Se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return ye(e,t)}))}}function Te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return ye(e,t)}))}}function Ae(e,t){if(!e||!e.meta)return!1;var r="string"==typeof e.meta.requestId,n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function be(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ae(e,["pending"])}:be(e)?function(t){var r=e.map((function(e){return e.pending}));return Se.apply(void 0,r)(t)}:Oe()(e[0])}function Ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ae(e,["rejected"])}:be(e)?function(t){var r=e.map((function(e){return e.rejected}));return Se.apply(void 0,r)(t)}:Ie()(e[0])}function ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||be(e)?function(t){return Te(Ie.apply(void 0,e),r)(t)}:ve()(e[0])}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ae(e,["fulfilled"])}:be(e)?function(t){var r=e.map((function(e){return e.fulfilled}));return Se.apply(void 0,r)(t)}:Ne()(e[0])}function Re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ae(e,["pending","fulfilled","rejected"])}:be(e)?function(t){for(var r=[],n=0,o=e;n<o.length;n++){var i=o[n];r.push(i.pending,i.rejected,i.fulfilled)}return Se.apply(void 0,r)(t)}:Re()(e[0])}var Ce=function(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function")},De=function(){},we=function(e,t){return void 0===t&&(t=De),e.catch(t),e},Le=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Pe=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Me=function(e){this.code=e,this.name="TaskAbortError",this.message="task cancelled (reason: "+e+")"},Ue=function(e){if(e.aborted)throw new Me(e.reason)};function je(e,t){var r=De;return new Promise((function(n,o){var i=function(){return o(new Me(e.reason))};e.aborted?i():(r=Le(e,i),t.finally((function(){return r()})).then(n,o))})).finally((function(){r=De}))}var ke=function(e){return function(t){return we(je(e,t).then((function(t){return Ue(e),t})))}},xe=function(e){var t=ke(e);return function(e){return t(new Promise((function(t){return setTimeout(t,e)})))}},Fe=Object.assign,Be={},Ge="listenerMiddleware",Ve=function(e){var t=e.type,r=e.actionCreator,n=e.matcher,o=e.predicate,i=e.effect;if(t)o=j(t).match;else if(r)t=r.type,o=r.match;else if(n)o=n;else if(!o)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Ce(i,"options.listener"),{predicate:o,type:t,effect:i}},He=function(e){e.pending.forEach((function(e){Pe(e,"listener-cancelled")}))},We=function(e,t,r){try{e(t,r)}catch(e){setTimeout((function(){throw e}),0)}},Ye=j(Ge+"/add"),Ke=j(Ge+"/removeAll"),ze=j(Ge+"/remove"),qe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,s([Ge+"/error"],e))};function $e(e){var t=this;void 0===e&&(e={});var r=new Map,n=e.extra,o=e.onError,s=void 0===o?qe:o;Ce(s,"onError");var a=function(e){for(var t=0,n=Array.from(r.values());t<n.length;t++){var o=n[t];if(e(o))return o}},u=function(e){var t=a((function(t){return t.effect===e.effect}));return t||(t=function(e){var t=Ve(e),r=t.type,n=t.predicate,o=t.effect;return{id:fe(),effect:o,type:r,predicate:n,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}}}(e)),function(e){return e.unsubscribe=function(){return r.delete(e.id)},r.set(e.id,e),function(t){e.unsubscribe(),(null==t?void 0:t.cancelActive)&&He(e)}}(t)},l=function(e){var t=Ve(e),r=t.type,n=t.effect,o=t.predicate,i=a((function(e){return("string"==typeof r?e.type===r:e.predicate===o)&&e.effect===n}));return i&&(i.unsubscribe(),e.cancelActive&&He(i)),!!i},c=function(e,o,a,l){return b(t,null,(function(){var t,c,d,f;return i(this,(function(p){switch(p.label){case 0:t=new AbortController,c=function(e,t){return function(r,n){return we(function(r,n){return b(void 0,null,(function(){var o,s,a,u;return i(this,(function(i){switch(i.label){case 0:Ue(t),o=function(){},s=new Promise((function(t,n){var i=e({predicate:r,effect:function(e,r){r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});o=function(){i(),n()}})),a=[s],null!=n&&a.push(new Promise((function(e){return setTimeout(e,n,null)}))),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,je(t,Promise.race(a))];case 2:return u=i.sent(),Ue(t),[2,u];case 3:return o(),[7];case 4:return[2]}}))}))}(r,n))}}(u,t.signal),d=[],p.label=1;case 1:return p.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(o,Fe({},a,{getOriginalState:l,condition:function(e,t){return c(e,t).then(Boolean)},take:c,delay:xe(t.signal),pause:ke(t.signal),extra:n,signal:t.signal,fork:(h=t.signal,_=d,function(e,t){Ce(e,"taskExecutor");var r,n=new AbortController;r=n,Le(h,(function(){return Pe(r,h.reason)}));var o,s,a=(o=function(){return b(void 0,null,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return Ue(h),Ue(n.signal),[4,e({pause:ke(n.signal),delay:xe(n.signal),signal:n.signal})];case 1:return t=r.sent(),Ue(n.signal),[2,t]}}))}))},s=function(){return Pe(n,"task-completed")},b(void 0,null,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return t.sent(),[4,o()];case 2:return[2,{status:"ok",value:t.sent()}];case 3:return[2,{status:(e=t.sent())instanceof Me?"cancelled":"rejected",error:e}];case 4:return null==s||s(),[7];case 5:return[2]}}))})));return(null==t?void 0:t.autoJoin)&&_.push(a),{result:ke(h)(a),cancel:function(){Pe(n,"task-cancelled")}}}),unsubscribe:e.unsubscribe,subscribe:function(){r.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach((function(e,r,n){e!==t&&(Pe(e,"listener-cancelled"),n.delete(e))}))}})))];case 2:return p.sent(),[3,6];case 3:return(f=p.sent())instanceof Me||We(s,f,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(d)];case 5:return p.sent(),Pe(t,"listener-completed"),e.pending.delete(t),[7];case 6:return[2]}var h,_}))}))},d=function(e){return function(){e.forEach(He),e.clear()}}(r);return{middleware:function(e){return function(t){return function(n){if(!k(n))return t(n);if(Ye.match(n))return u(n.payload);if(!Ke.match(n)){if(ze.match(n))return l(n.payload);var o,i=e.getState(),a=function(){if(i===Be)throw new Error(Ge+": getOriginalState can only be called synchronously");return i};try{if(o=t(n),r.size>0)for(var f=e.getState(),p=Array.from(r.values()),h=0,_=p;h<_.length;h++){var E=_[h],g=!1;try{g=E.predicate(n,f,i)}catch(e){g=!1,We(s,e,{raisedBy:"predicate"})}g&&c(E,n,e,a)}}finally{i=Be}return o}d()}}},startListening:u,stopListening:l,clearListeners:d}}var Xe,Je="RTK_autoBatch",Ze=function(){return function(e){var t;return{payload:e,meta:(t={},t[Je]=!0,t)}}},Qe="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:void 0!==t?t:globalThis):function(e){return(Xe||(Xe=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))},et=function(e){return function(t){setTimeout(t,e)}},tt="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:et(10),rt=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=t.apply(void 0,r),i=!0,s=!1,a=!1,u=new Set,l="tick"===e.type?Qe:"raf"===e.type?tt:"callback"===e.type?e.queueNotification:et(e.timeout),c=function(){a=!1,s&&(s=!1,u.forEach((function(e){return e()})))};return Object.assign({},o,{subscribe:function(e){var t=o.subscribe((function(){return i&&e()}));return u.add(e),function(){t(),u.delete(e)}},dispatch:function(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t[Je]),(s=!i)&&(a||(a=!0,l(c))),o.dispatch(e)}finally{i=!0}}})}}};(0,O.enableES5)()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{immer:490,redux:663,"redux-thunk":662,reselect:677}],227:[function(e,t,r){
/**
 * avl v1.5.3
 * Fast AVL tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
!function(e,n){"object"==typeof r&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).AVLTree=n()}(this,(function(){"use strict";function e(e,r){void 0===r&&(r=function(e){return e.key});var n=[];return t(e,"",!0,(function(e){return n.push(e)}),r),n.join("")}function t(e,r,n,o,i){if(e){o(r+(n?" ":" ")+i(e)+"\n");var s=r+(n?"    ":"   ");e.left&&t(e.left,s,!1,o,i),e.right&&t(e.right,s,!0,o,i)}}function r(e){if(null===e)return!0;var t=n(e.left),o=n(e.right);return!!(Math.abs(t-o)<=1&&r(e.left)&&r(e.right))}function n(e){return e?1+Math.max(n(e.left),n(e.right)):0}function o(e,t,r,n,i){var s=i-n;if(s>0){var a=n+Math.floor(s/2),u={key:t[a],data:r[a],parent:e};return u.left=o(u,t,r,n,a),u.right=o(u,t,r,a+1,i),u}return null}function i(e){if(null===e)return 0;var t=i(e.left),r=i(e.right);return e.balanceFactor=t-r,Math.max(t,r)+1}function s(e,t,r,n,o){if(!(r>=n)){for(var i=e[r+n>>1],a=r-1,u=n+1;;){do{a++}while(o(e[a],i)<0);do{u--}while(o(e[u],i)>0);if(a>=u)break;var l=e[a];e[a]=e[u],e[u]=l,l=t[a],t[a]=t[u],t[u]=l}s(e,t,r,u,o),s(e,t,u+1,n,o)}}function a(e,t){return e>t?1:e<t?-1:0}function u(e){var t=e.right;return e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent,t.parent&&(t.parent.left===e?t.parent.left=t:t.parent.right=t),e.parent=t,t.left=e,e.balanceFactor+=1,t.balanceFactor<0&&(e.balanceFactor-=t.balanceFactor),t.balanceFactor+=1,e.balanceFactor>0&&(t.balanceFactor+=e.balanceFactor),t}function l(e){var t=e.left;return e.left=t.right,e.left&&(e.left.parent=e),t.parent=e.parent,t.parent&&(t.parent.left===e?t.parent.left=t:t.parent.right=t),e.parent=t,t.right=e,e.balanceFactor-=1,t.balanceFactor>0&&(e.balanceFactor-=t.balanceFactor),t.balanceFactor-=1,e.balanceFactor<0&&(t.balanceFactor+=e.balanceFactor),t}var c=function(e,t){void 0===t&&(t=!1),this._comparator=e||a,this._root=null,this._size=0,this._noDuplicates=!!t},d={size:{configurable:!0}};return c.prototype.destroy=function(){return this.clear()},c.prototype.clear=function(){return this._root=null,this._size=0,this},d.size.get=function(){return this._size},c.prototype.contains=function(e){if(this._root)for(var t=this._root,r=this._comparator;t;){var n=r(e,t.key);if(0===n)return!0;t=n<0?t.left:t.right}return!1},c.prototype.next=function(e){var t=e;if(t)if(t.right)for(t=t.right;t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)e=t,t=t.parent;return t},c.prototype.prev=function(e){var t=e;if(t)if(t.left)for(t=t.left;t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)e=t,t=t.parent;return t},c.prototype.forEach=function(e){for(var t=this._root,r=[],n=!1,o=0;!n;)t?(r.push(t),t=t.left):r.length>0?(e(t=r.pop(),o++),t=t.right):n=!0;return this},c.prototype.range=function(e,t,r,n){for(var o=[],i=this._comparator,s=this._root;0!==o.length||s;)if(s)o.push(s),s=s.left;else{if(i((s=o.pop()).key,t)>0)break;if(i(s.key,e)>=0&&r.call(n,s))return this;s=s.right}return this},c.prototype.keys=function(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.key),e=e.right):n=!0;return r},c.prototype.values=function(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.data),e=e.right):n=!0;return r},c.prototype.at=function(e){for(var t=this._root,r=[],n=!1,o=0;!n;)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),o===e)return t;o++,t=t.right}else n=!0;return null},c.prototype.minNode=function(){var e=this._root;if(!e)return null;for(;e.left;)e=e.left;return e},c.prototype.maxNode=function(){var e=this._root;if(!e)return null;for(;e.right;)e=e.right;return e},c.prototype.min=function(){var e=this._root;if(!e)return null;for(;e.left;)e=e.left;return e.key},c.prototype.max=function(){var e=this._root;if(!e)return null;for(;e.right;)e=e.right;return e.key},c.prototype.isEmpty=function(){return!this._root},c.prototype.pop=function(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t},c.prototype.popMax=function(){var e=this._root,t=null;if(e){for(;e.right;)e=e.right;t={key:e.key,data:e.data},this.remove(e.key)}return t},c.prototype.find=function(e){for(var t,r=this._root,n=this._comparator;r;){if(0===(t=n(e,r.key)))return r;r=t<0?r.left:r.right}return null},c.prototype.insert=function(e,t){if(!this._root)return this._root={parent:null,left:null,right:null,balanceFactor:0,key:e,data:t},this._size++,this._root;var r=this._comparator,n=this._root,o=null,i=0;if(this._noDuplicates)for(;n;){if(o=n,0===(i=r(e,n.key)))return null;n=i<0?n.left:n.right}else for(;n;)o=n,n=(i=r(e,n.key))<=0?n.left:n.right;var s,a={left:null,right:null,balanceFactor:0,parent:o,key:e,data:t};for(i<=0?o.left=a:o.right=a;o&&((i=r(o.key,e))<0?o.balanceFactor-=1:o.balanceFactor+=1,0!==o.balanceFactor);){if(o.balanceFactor<-1){1===o.right.balanceFactor&&l(o.right),s=u(o),o===this._root&&(this._root=s);break}if(o.balanceFactor>1){-1===o.left.balanceFactor&&u(o.left),s=l(o),o===this._root&&(this._root=s);break}o=o.parent}return this._size++,a},c.prototype.remove=function(e){if(!this._root)return null;for(var t=this._root,r=this._comparator,n=0;t&&0!==(n=r(e,t.key));)t=n<0?t.left:t.right;if(!t)return null;var o,i,s=t.key;if(t.left){for(o=t.left;o.left||o.right;){for(;o.right;)o=o.right;t.key=o.key,t.data=o.data,o.left&&(t=o,o=o.left)}t.key=o.key,t.data=o.data,t=o}if(t.right){for(i=t.right;i.left||i.right;){for(;i.left;)i=i.left;t.key=i.key,t.data=i.data,i.right&&(t=i,i=i.right)}t.key=i.key,t.data=i.data,t=i}for(var a,c=t.parent,d=t;c&&(c.left===d?c.balanceFactor-=1:c.balanceFactor+=1,c.balanceFactor<-1?(1===c.right.balanceFactor&&l(c.right),a=u(c),c===this._root&&(this._root=a),c=a):c.balanceFactor>1&&(-1===c.left.balanceFactor&&u(c.left),a=l(c),c===this._root&&(this._root=a),c=a),-1!==c.balanceFactor&&1!==c.balanceFactor);)d=c,c=c.parent;return t.parent&&(t.parent.left===t?t.parent.left=null:t.parent.right=null),t===this._root&&(this._root=null),this._size--,s},c.prototype.load=function(e,t,r){if(void 0===e&&(e=[]),void 0===t&&(t=[]),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=e.length;return r&&s(e,t,0,n-1,this._comparator),this._root=o(null,e,t,0,n),i(this._root),this._size=n,this},c.prototype.isBalanced=function(){return r(this._root)},c.prototype.toString=function(t){return e(this._root,t)},Object.defineProperties(c.prototype,d),c.default=c,c}))},{}],228:[function(e,t,r){"use strict";r.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),c=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,l[c++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},r.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,u=r-o;a<u;a+=s)i.push(l(e,a,a+s>u?u:a+s));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],229:[function(e,t,r){var n,o;n=this,o=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),o=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var o=e.getVersionPrecision(t),i=e.getVersionPrecision(r),s=Math.max(o,i),a=0,u=e.map([t,r],(function(t){var r=s-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(a=s-Math.min(o,i)),s-=1;s>=a;){if(u[0][s]>u[1][s])return 1;if(u[0][s]===u[1][s]){if(s===a)return 0;s-=1}else if(u[0][s]<u[1][s])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var o=e[r];if(t(o,r))return o}},e.assign=function(e){for(var t,r,n=e,o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var a=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=i.length;t<r;t+=1)a();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=o,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(91))&&n.__esModule?n:{default:n},i=r(18);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){}var t,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new o.default(e,t)},e.parse=function(e){return new o.default(e).getResult()},t=e,(r=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}])&&s(t,r),e}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=u(r(92)),o=u(r(93)),i=u(r(94)),s=u(r(95)),a=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,o={},i=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(o[t]=s,i+=1):"object"==typeof s&&(r[t]=s,n+=1)})),n>0){var s=Object.keys(r),u=a.default.find(s,(function(e){return t.isOS(e)}));if(u){var l=this.satisfies(r[u]);if(void 0!==l)return l}var c=a.default.find(s,(function(e){return t.isPlatform(e)}));if(c){var d=this.satisfies(r[c]);if(void 0!==d)return d}}if(i>0){var f=Object.keys(o),p=a.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(o[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),o=a.default.getBrowserTypeByAlias(n);return t&&o&&(n=o.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(o,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(t,e),version:o.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=o.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},r=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=o.default.getMacOSVersionName(t),n={name:i.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=o.default.getAndroidVersionName(t),n={name:i.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:i.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||o.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=o.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=o.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},r=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},r=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},r=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},r=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=s,e.exports=t.default}})},"object"==typeof r&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof r?r.bowser=o():n.bowser=o()},{}],230:[function(e,t,r){},{}],231:[function(e,t,r){var n=e("safe-buffer").Buffer;function o(e){n.isBuffer(e)||(e=n.from(e));for(var t=e.length/4|0,r=new Array(t),o=0;o<t;o++)r[o]=e.readUInt32BE(4*o);return r}function i(e){for(;0<e.length;e++)e[0]=0}function s(e,t,r,n,o){for(var i,s,a,u,l=r[0],c=r[1],d=r[2],f=r[3],p=e[0]^t[0],h=e[1]^t[1],_=e[2]^t[2],E=e[3]^t[3],g=4,m=1;m<o;m++)i=l[p>>>24]^c[h>>>16&255]^d[_>>>8&255]^f[255&E]^t[g++],s=l[h>>>24]^c[_>>>16&255]^d[E>>>8&255]^f[255&p]^t[g++],a=l[_>>>24]^c[E>>>16&255]^d[p>>>8&255]^f[255&h]^t[g++],u=l[E>>>24]^c[p>>>16&255]^d[h>>>8&255]^f[255&_]^t[g++],p=i,h=s,_=a,E=u;return i=(n[p>>>24]<<24|n[h>>>16&255]<<16|n[_>>>8&255]<<8|n[255&E])^t[g++],s=(n[h>>>24]<<24|n[_>>>16&255]<<16|n[E>>>8&255]<<8|n[255&p])^t[g++],a=(n[_>>>24]<<24|n[E>>>16&255]<<16|n[p>>>8&255]<<8|n[255&h])^t[g++],u=(n[E>>>24]<<24|n[p>>>16&255]<<16|n[h>>>8&255]<<8|n[255&_])^t[g++],[i>>>=0,s>>>=0,a>>>=0,u>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],o=[[],[],[],[]],i=[[],[],[],[]],s=0,a=0,u=0;u<256;++u){var l=a^a<<1^a<<2^a<<3^a<<4;l=l>>>8^255&l^99,r[s]=l,n[l]=s;var c=e[s],d=e[c],f=e[d],p=257*e[l]^16843008*l;o[0][s]=p<<24|p>>>8,o[1][s]=p<<16|p>>>16,o[2][s]=p<<8|p>>>24,o[3][s]=p,p=16843009*f^65537*d^257*c^16843008*s,i[0][l]=p<<24|p>>>8,i[1][l]=p<<16|p>>>16,i[2][l]=p<<8|p>>>24,i[3][l]=p,0===s?s=a=1:(s=c^e[e[e[f^c]]],a^=e[e[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:o,INV_SUB_MIX:i}}();function l(e){this._key=o(e),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),o=[],i=0;i<t;i++)o[i]=e[i];for(i=t;i<n;i++){var s=o[i-1];i%t==0?(s=s<<8|s>>>24,s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s],s^=a[i/t|0]<<24):t>6&&i%t==4&&(s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s]),o[i]=o[i-t]^s}for(var l=[],c=0;c<n;c++){var d=n-c,f=o[d-(c%4?0:4)];l[c]=c<4||d<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=r,this._keySchedule=o,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(e){return s(e=o(e),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},l.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),r=n.allocUnsafe(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r},l.prototype.decryptBlock=function(e){var t=(e=o(e))[1];e[1]=e[3],e[3]=t;var r=s(e,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),i=n.allocUnsafe(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[3],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[1],12),i},l.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},t.exports.AES=l},{"safe-buffer":679}],232:[function(e,t,r){var n=e("./aes"),o=e("safe-buffer").Buffer,i=e("cipher-base"),s=e("inherits"),a=e("./ghash"),u=e("buffer-xor"),l=e("./incr32");function c(e,t,r,s){i.call(this);var u=o.alloc(4,0);this._cipher=new n.AES(t);var c=this._cipher.encryptBlock(u);this._ghash=new a(c),r=function(e,t,r){if(12===t.length)return e._finID=o.concat([t,o.from([0,0,0,1])]),o.concat([t,o.from([0,0,0,2])]);var n=new a(r),i=t.length,s=i%16;n.update(t),s&&(s=16-s,n.update(o.alloc(s,0))),n.update(o.alloc(8,0));var u=8*i,c=o.alloc(8);c.writeUIntBE(u,0,8),n.update(c),e._finID=n.state;var d=o.from(e._finID);return l(d),d}(this,r,c),this._prev=o.from(r),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}s(c,i),c.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=o.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),o=0;o<n;++o)r+=e[o]^t[o];return r}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!o.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},c.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},t.exports=c},{"./aes":231,"./ghash":236,"./incr32":237,"buffer-xor":253,"cipher-base":255,inherits:491,"safe-buffer":679}],233:[function(e,t,r){var n=e("./encrypter"),o=e("./decrypter"),i=e("./modes/list.json");r.createCipher=r.Cipher=n.createCipher,r.createCipheriv=r.Cipheriv=n.createCipheriv,r.createDecipher=r.Decipher=o.createDecipher,r.createDecipheriv=r.Decipheriv=o.createDecipheriv,r.listCiphers=r.getCiphers=function(){return Object.keys(i)}},{"./decrypter":234,"./encrypter":235,"./modes/list.json":245}],234:[function(e,t,r){var n=e("./authCipher"),o=e("safe-buffer").Buffer,i=e("./modes"),s=e("./streamCipher"),a=e("cipher-base"),u=e("./aes"),l=e("evp_bytestokey");function c(e,t,r){a.call(this),this._cache=new d,this._last=void 0,this._cipher=new u.AES(t),this._prev=o.from(r),this._mode=e,this._autopadding=!0}function d(){this.cache=o.allocUnsafe(0)}function f(e,t,r){var a=i[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=o.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof t&&(t=o.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===a.type?new s(a.module,t,r,!0):"auth"===a.type?new n(a.module,t,r,!0):new c(a.module,t,r)}e("inherits")(c,a),c.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),n.push(r);return o.concat(n)},c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=o.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},r.createDecipher=function(e,t){var r=i[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=l(t,!1,r.key,r.iv);return f(e,n.key,n.iv)},r.createDecipheriv=f},{"./aes":231,"./authCipher":232,"./modes":244,"./streamCipher":247,"cipher-base":255,evp_bytestokey:464,inherits:491,"safe-buffer":679}],235:[function(e,t,r){var n=e("./modes"),o=e("./authCipher"),i=e("safe-buffer").Buffer,s=e("./streamCipher"),a=e("cipher-base"),u=e("./aes"),l=e("evp_bytestokey");function c(e,t,r){a.call(this),this._cache=new f,this._cipher=new u.AES(t),this._prev=i.from(r),this._mode=e,this._autopadding=!0}e("inherits")(c,a),c.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get();)r=this._mode.encrypt(this,t),n.push(r);return i.concat(n)};var d=i.alloc(16,16);function f(){this.cache=i.allocUnsafe(0)}function p(e,t,r){var a=n[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=i.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof r&&(r=i.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===a.type?new s(a.module,t,r):"auth"===a.type?new o(a.module,t,r):new c(a.module,t,r)}c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},f.prototype.add=function(e){this.cache=i.concat([this.cache,e])},f.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},f.prototype.flush=function(){for(var e=16-this.cache.length,t=i.allocUnsafe(e),r=-1;++r<e;)t.writeUInt8(e,r);return i.concat([this.cache,t])},r.createCipheriv=p,r.createCipher=function(e,t){var r=n[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var o=l(t,!1,r.key,r.iv);return p(e,o.key,o.iv)}},{"./aes":231,"./authCipher":232,"./modes":244,"./streamCipher":247,"cipher-base":255,evp_bytestokey:464,inherits:491,"safe-buffer":679}],236:[function(e,t,r){var n=e("safe-buffer").Buffer,o=n.alloc(16,0);function i(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function s(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}s.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},s.prototype._multiply=function(){for(var e,t,r,n=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],o=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(o[0]^=n[0],o[1]^=n[1],o[2]^=n[2],o[3]^=n[3]),r=0!=(1&n[3]),t=3;t>0;t--)n[t]=n[t]>>>1|(1&n[t-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=i(o)},s.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},s.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,o],16)),this.ghash(i([0,e,0,t])),this.state},t.exports=s},{"safe-buffer":679}],237:[function(e,t,r){t.exports=function(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}},{}],238:[function(e,t,r){var n=e("buffer-xor");r.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},r.decrypt=function(e,t){var r=e._prev;e._prev=t;var o=e._cipher.decryptBlock(t);return n(o,r)}},{"buffer-xor":253}],239:[function(e,t,r){var n=e("safe-buffer").Buffer,o=e("buffer-xor");function i(e,t,r){var i=t.length,s=o(t,e._cache);return e._cache=e._cache.slice(i),e._prev=n.concat([e._prev,r?t:s]),s}r.encrypt=function(e,t,r){for(var o,s=n.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=n.allocUnsafe(0)),!(e._cache.length<=t.length)){s=n.concat([s,i(e,t,r)]);break}o=e._cache.length,s=n.concat([s,i(e,t.slice(0,o),r)]),t=t.slice(o)}return s}},{"buffer-xor":253,"safe-buffer":679}],240:[function(e,t,r){var n=e("safe-buffer").Buffer;function o(e,t,r){for(var n,o,s=-1,a=0;++s<8;)n=t&1<<7-s?128:0,a+=(128&(o=e._cipher.encryptBlock(e._prev)[0]^n))>>s%8,e._prev=i(e._prev,r?n:o);return a}function i(e,t){var r=e.length,o=-1,i=n.allocUnsafe(e.length);for(e=n.concat([e,n.from([t])]);++o<r;)i[o]=e[o]<<1|e[o+1]>>7;return i}r.encrypt=function(e,t,r){for(var i=t.length,s=n.allocUnsafe(i),a=-1;++a<i;)s[a]=o(e,t[a],r);return s}},{"safe-buffer":679}],241:[function(e,t,r){var n=e("safe-buffer").Buffer;function o(e,t,r){var o=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=n.concat([e._prev.slice(1),n.from([r?t:o])]),o}r.encrypt=function(e,t,r){for(var i=t.length,s=n.allocUnsafe(i),a=-1;++a<i;)s[a]=o(e,t[a],r);return s}},{"safe-buffer":679}],242:[function(e,t,r){var n=e("buffer-xor"),o=e("safe-buffer").Buffer,i=e("../incr32");function s(e){var t=e._cipher.encryptBlockRaw(e._prev);return i(e._prev),t}r.encrypt=function(e,t){var r=Math.ceil(t.length/16),i=e._cache.length;e._cache=o.concat([e._cache,o.allocUnsafe(16*r)]);for(var a=0;a<r;a++){var u=s(e),l=i+16*a;e._cache.writeUInt32BE(u[0],l+0),e._cache.writeUInt32BE(u[1],l+4),e._cache.writeUInt32BE(u[2],l+8),e._cache.writeUInt32BE(u[3],l+12)}var c=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,c)}},{"../incr32":237,"buffer-xor":253,"safe-buffer":679}],243:[function(e,t,r){r.encrypt=function(e,t){return e._cipher.encryptBlock(t)},r.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},{}],244:[function(e,t,r){var n={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},o=e("./list.json");for(var i in o)o[i].module=n[o[i].mode];t.exports=o},{"./cbc":238,"./cfb":239,"./cfb1":240,"./cfb8":241,"./ctr":242,"./ecb":243,"./list.json":245,"./ofb":246}],245:[function(e,t,r){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],246:[function(e,t,r){(function(t){(function(){var n=e("buffer-xor");function o(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}r.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,o(e)]);var i=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),n(r,i)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:251,"buffer-xor":253}],247:[function(e,t,r){var n=e("./aes"),o=e("safe-buffer").Buffer,i=e("cipher-base");function s(e,t,r,s){i.call(this),this._cipher=new n.AES(t),this._prev=o.from(r),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=s,this._mode=e}e("inherits")(s,i),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},t.exports=s},{"./aes":231,"cipher-base":255,inherits:491,"safe-buffer":679}],248:[function(e,t,r){var n=e("browserify-des"),o=e("browserify-aes/browser"),i=e("browserify-aes/modes"),s=e("browserify-des/modes"),a=e("evp_bytestokey");function u(e,t,r){if(e=e.toLowerCase(),i[e])return o.createCipheriv(e,t,r);if(s[e])return new n({key:t,iv:r,mode:e});throw new TypeError("invalid suite type")}function l(e,t,r){if(e=e.toLowerCase(),i[e])return o.createDecipheriv(e,t,r);if(s[e])return new n({key:t,iv:r,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}r.createCipher=r.Cipher=function(e,t){var r,n;if(e=e.toLowerCase(),i[e])r=i[e].key,n=i[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");r=8*s[e].key,n=s[e].iv}var o=a(t,!1,r,n);return u(e,o.key,o.iv)},r.createCipheriv=r.Cipheriv=u,r.createDecipher=r.Decipher=function(e,t){var r,n;if(e=e.toLowerCase(),i[e])r=i[e].key,n=i[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");r=8*s[e].key,n=s[e].iv}var o=a(t,!1,r,n);return l(e,o.key,o.iv)},r.createDecipheriv=r.Decipheriv=l,r.listCiphers=r.getCiphers=function(){return Object.keys(s).concat(o.getCiphers())}},{"browserify-aes/browser":233,"browserify-aes/modes":244,"browserify-des":249,"browserify-des/modes":250,evp_bytestokey:464}],249:[function(e,t,r){var n=e("cipher-base"),o=e("des.js"),i=e("inherits"),s=e("safe-buffer").Buffer,a={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};function u(e){n.call(this);var t,r=e.mode.toLowerCase(),o=a[r];t=e.decrypt?"decrypt":"encrypt";var i=e.key;s.isBuffer(i)||(i=s.from(i)),"des-ede"!==r&&"des-ede-cbc"!==r||(i=s.concat([i,i.slice(0,8)]));var u=e.iv;s.isBuffer(u)||(u=s.from(u)),this._des=o.create({key:i,iv:u,type:t})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=u,i(u,n),u.prototype._update=function(e){return s.from(this._des.update(e))},u.prototype._final=function(){return s.from(this._des.final())}},{"cipher-base":255,"des.js":458,inherits:491,"safe-buffer":679}],250:[function(e,t,r){r["des-ecb"]={key:8,iv:0},r["des-cbc"]=r.des={key:8,iv:8},r["des-ede3-cbc"]=r.des3={key:24,iv:8},r["des-ede3"]={key:24,iv:0},r["des-ede-cbc"]={key:16,iv:8},r["des-ede"]={key:16,iv:0}},{}],251:[function(e,t,r){(function(t){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var t=e("base64-js"),n=e("ieee754");r.Buffer=s,r.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},r.INSPECT_MAX_BYTES=50;var o=2147483647;function i(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,r)}function a(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|f(e,t),n=i(r),o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return n.__proto__=s.prototype,n}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return s.from(n,t,r);var o=function(e){if(s.isBuffer(e)){var t=0|d(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||G(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),i(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),r=i(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function f(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return x(e).length;default:if(o)return n?-1:k(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return v(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return b(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function h(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,o){var i,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var c=-1;for(i=r;i<a;i++)if(l(e,i)===l(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var d=!0,f=0;f<u;f++)if(l(e,i+f)!==l(t,f)){d=!1;break}if(d)return i}return-1}function g(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(G(a))return s;e[r+s]=a}return s}function m(e,t,r,n){return F(k(t,e.length-r),e,r,n)}function y(e,t,r,n){return F(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return y(e,t,r,n)}function T(e,t,r,n){return F(x(t),e,r,n)}function A(e,t,r,n){return F(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function b(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function O(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,l=e[o],c=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=r)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&l)<<6|63&i)>127&&(c=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(u=(15&l)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=d}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}r.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,r){return a(e,t,r)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}(e,t,r)},s.allocUnsafe=function(e){return l(e)},s.allocUnsafeSlow=function(e){return l(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(B(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=s.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(B(i,Uint8Array)&&(i=s.from(i)),!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(e,t,r,n,o){if(B(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),u=Math.min(i,a),l=this.slice(n,o),c=e.slice(t,r),d=0;d<u;++d)if(l[d]!==c[d]){i=l[d],a=c[d];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function v(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=j(e[i]);return o}function C(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function w(e,t,r,n,o,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,o,i){return t=+t,r>>>=0,i||L(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function M(e,t,r,o,i){return t=+t,r>>>=0,i||L(e,0,r,8),n.write(e,t,r,o,52,8),r+8}s.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=s.prototype,n},s.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},s.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},s.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),n.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||w(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},s.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||w(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},s.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);w(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);w(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=o-1;i>=0;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},s.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=s.isBuffer(e)?e:s.from(e,n),u=a.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%u]}return this};var U=/[^+/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function k(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function x(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":228,buffer:251,ieee754:487}],252:[function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}g(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,r)}(e,o,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var o,i,s,a;if(l(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=c(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function h(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):E(o,o.length)}function _(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function E(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)i(u,this,t);else{var l=u.length,c=E(u,l);for(r=0;r<l;++r)i(c[r],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,s;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},a.prototype.listenerCount=_,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},{}],253:[function(e,t,r){(function(e){(function(){t.exports=function(t,r){for(var n=Math.min(t.length,r.length),o=new e(n),i=0;i<n;++i)o[i]=t[i]^r[i];return o}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:251}],254:[function(e,t,r){(function(t){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var t=e("base64-js"),n=e("ieee754"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},r.INSPECT_MAX_BYTES=50;var i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|h(e,t),n=s(r),o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(B(e,Uint8Array)){var t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(B(e,SharedArrayBuffer)||e&&B(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);var o=function(e){if(a.isBuffer(e)){var t=0|p(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||G(e.length)?s(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),s(e<0?0:0|p(e))}function d(e){for(var t=e.length<0?0:0|p(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,a.prototype),n}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function h(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return x(e).length;default:if(o)return n?-1:k(e).length;t=(""+t).toLowerCase(),o=!0}}function _(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return N(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function E(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,o){var i,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var c=-1;for(i=r;i<a;i++)if(l(e,i)===l(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var d=!0,f=0;f<u;f++)if(l(e,i+f)!==l(t,f)){d=!1;break}if(d)return i}return-1}function y(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(G(a))return s;e[r+s]=a}return s}function S(e,t,r,n){return F(k(t,e.length-r),e,r,n)}function T(e,t,r,n){return F(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return F(x(t),e,r,n)}function b(e,t,r,n){return F(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function O(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function I(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,l=e[o],c=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=r)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&l)<<6|63&i)>127&&(c=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(u=(15&l)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=d}return function(e){var t=e.length;if(t<=v)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=v));return r}(n)}r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(B(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(B(i,Uint8Array))o+i.length>n.length?a.from(i).copy(n,o):Uint8Array.prototype.set.call(n,i,o);else{if(!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o)}o+=i.length}return n},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,o){if(B(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),u=Math.min(i,s),l=this.slice(n,o),c=e.slice(t,r),d=0;d<u;++d)if(l[d]!==c[d]){i=l[d],s=c[d];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":case"latin1":case"binary":return T(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function N(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=V[e[i]];return o}function D(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function w(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,o,i){return t=+t,r>>>=0,i||P(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function U(e,t,r,o,i){return t=+t,r>>>=0,i||P(e,0,r,8),n.write(e,t,r,o,52,8),r+8}a.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);L(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);L(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=a.isBuffer(e)?e:a.from(e,n),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%u]}return this};var j=/[^+/0-9A-Za-z-_]/g;function k(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function x(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}var V=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)t[n+o]=e[r]+e[o];return t}()}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":228,buffer:251,ieee754:487}],255:[function(e,t,r){var n=e("safe-buffer").Buffer,o=e("stream").Transform,i=e("string_decoder").StringDecoder;function s(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(s,o),s.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var o=this._update(e);return this.hashMode?this:(r&&(o=this._toString(o,r)),o)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},t.exports=s},{inherits:491,"safe-buffer":679,stream:697,string_decoder:712}],256:[function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}void 0!==t&&(t.exports=n),n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],257:[function(e,t,r){"use strict";var n=e("../internals/is-callable"),o=e("../internals/try-to-string"),i=TypeError;t.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a function")}},{"../internals/is-callable":339,"../internals/try-to-string":418}],258:[function(e,t,r){"use strict";var n=e("../internals/is-constructor"),o=e("../internals/try-to-string"),i=TypeError;t.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a constructor")}},{"../internals/is-constructor":340,"../internals/try-to-string":418}],259:[function(e,t,r){"use strict";var n=e("../internals/is-possible-prototype"),o=String,i=TypeError;t.exports=function(e){if(n(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},{"../internals/is-possible-prototype":345}],260:[function(e,t,r){"use strict";var n=e("../internals/well-known-symbol"),o=e("../internals/object-create"),i=e("../internals/object-define-property").f,s=n("unscopables"),a=Array.prototype;void 0===a[s]&&i(a,s,{configurable:!0,value:o(null)}),t.exports=function(e){a[s][e]=!0}},{"../internals/object-create":364,"../internals/object-define-property":366,"../internals/well-known-symbol":428}],261:[function(e,t,r){"use strict";var n=e("../internals/string-multibyte").charAt;t.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},{"../internals/string-multibyte":400}],262:[function(e,t,r){"use strict";var n=e("../internals/object-is-prototype-of"),o=TypeError;t.exports=function(e,t){if(n(t,e))return e;throw new o("Incorrect invocation")}},{"../internals/object-is-prototype-of":371}],263:[function(e,t,r){"use strict";var n=e("../internals/is-object"),o=String,i=TypeError;t.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not an object")}},{"../internals/is-object":344}],264:[function(e,t,r){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],265:[function(e,t,r){"use strict";var n,o,i,s=e("../internals/array-buffer-basic-detection"),a=e("../internals/descriptors"),u=e("../internals/global"),l=e("../internals/is-callable"),c=e("../internals/is-object"),d=e("../internals/has-own-property"),f=e("../internals/classof"),p=e("../internals/try-to-string"),h=e("../internals/create-non-enumerable-property"),_=e("../internals/define-built-in"),E=e("../internals/define-built-in-accessor"),g=e("../internals/object-is-prototype-of"),m=e("../internals/object-get-prototype-of"),y=e("../internals/object-set-prototype-of"),S=e("../internals/well-known-symbol"),T=e("../internals/uid"),A=e("../internals/internal-state"),b=A.enforce,O=A.get,I=u.Int8Array,v=I&&I.prototype,N=u.Uint8ClampedArray,R=N&&N.prototype,C=I&&m(I),D=v&&m(v),w=Object.prototype,L=u.TypeError,P=S("toStringTag"),M=T("TYPED_ARRAY_TAG"),U="TypedArrayConstructor",j=s&&!!y&&"Opera"!==f(u.opera),k=!1,x={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},B=function(e){var t=m(e);if(c(t)){var r=O(t);return r&&d(r,U)?r[U]:B(t)}},G=function(e){if(!c(e))return!1;var t=f(e);return d(x,t)||d(F,t)};for(n in x)(i=(o=u[n])&&o.prototype)?b(i)[U]=o:j=!1;for(n in F)(i=(o=u[n])&&o.prototype)&&(b(i)[U]=o);if((!j||!l(C)||C===Function.prototype)&&(C=function(){throw new L("Incorrect invocation")},j))for(n in x)u[n]&&y(u[n],C);if((!j||!D||D===w)&&(D=C.prototype,j))for(n in x)u[n]&&y(u[n].prototype,D);if(j&&m(R)!==D&&y(R,D),a&&!d(D,P))for(n in k=!0,E(D,P,{configurable:!0,get:function(){return c(this)?this[M]:void 0}}),x)u[n]&&h(u[n],M,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_TAG:k&&M,aTypedArray:function(e){if(G(e))return e;throw new L("Target is not a typed array")},aTypedArrayConstructor:function(e){if(l(e)&&(!y||g(C,e)))return e;throw new L(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(a){if(r)for(var o in x){var i=u[o];if(i&&d(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(e){}}}D[e]&&!r||_(D,e,r?t:j&&v[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(a){if(y){if(r)for(n in x)if((o=u[n])&&d(o,e))try{delete o[e]}catch(e){}if(C[e]&&!r)return;try{return _(C,e,r?t:j&&C[e]||t)}catch(e){}}for(n in x)!(o=u[n])||o[e]&&!r||_(o,e,t)}},getTypedArrayConstructor:B,isView:function(e){if(!c(e))return!1;var t=f(e);return"DataView"===t||d(x,t)||d(F,t)},isTypedArray:G,TypedArray:C,TypedArrayPrototype:D}},{"../internals/array-buffer-basic-detection":264,"../internals/classof":281,"../internals/create-non-enumerable-property":285,"../internals/define-built-in":289,"../internals/define-built-in-accessor":288,"../internals/descriptors":293,"../internals/global":325,"../internals/has-own-property":326,"../internals/internal-state":335,"../internals/is-callable":339,"../internals/is-object":344,"../internals/object-get-prototype-of":370,"../internals/object-is-prototype-of":371,"../internals/object-set-prototype-of":375,"../internals/try-to-string":418,"../internals/uid":422,"../internals/well-known-symbol":428}],266:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/function-uncurry-this"),i=e("../internals/descriptors"),s=e("../internals/array-buffer-basic-detection"),a=e("../internals/function-name"),u=e("../internals/create-non-enumerable-property"),l=e("../internals/define-built-in-accessor"),c=e("../internals/define-built-ins"),d=e("../internals/fails"),f=e("../internals/an-instance"),p=e("../internals/to-integer-or-infinity"),h=e("../internals/to-length"),_=e("../internals/to-index"),E=e("../internals/math-fround"),g=e("../internals/ieee754"),m=e("../internals/object-get-prototype-of"),y=e("../internals/object-set-prototype-of"),S=e("../internals/array-fill"),T=e("../internals/array-slice"),A=e("../internals/inherit-if-required"),b=e("../internals/copy-constructor-properties"),O=e("../internals/set-to-string-tag"),I=e("../internals/internal-state"),v=a.PROPER,N=a.CONFIGURABLE,R="ArrayBuffer",C="DataView",D="prototype",w="Wrong index",L=I.getterFor(R),P=I.getterFor(C),M=I.set,U=n[R],j=U,k=j&&j[D],x=n[C],F=x&&x[D],B=Object.prototype,G=n.Array,V=n.RangeError,H=o(S),W=o([].reverse),Y=g.pack,K=g.unpack,z=function(e){return[255&e]},q=function(e){return[255&e,e>>8&255]},$=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},X=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},J=function(e){return Y(E(e),23,4)},Z=function(e){return Y(e,52,8)},Q=function(e,t,r){l(e[D],t,{configurable:!0,get:function(){return r(this)[t]}})},ee=function(e,t,r,n){var o=P(e),i=_(r),s=!!n;if(i+t>o.byteLength)throw new V(w);var a=o.bytes,u=i+o.byteOffset,l=T(a,u,u+t);return s?l:W(l)},te=function(e,t,r,n,o,i){var s=P(e),a=_(r),u=n(+o),l=!!i;if(a+t>s.byteLength)throw new V(w);for(var c=s.bytes,d=a+s.byteOffset,f=0;f<t;f++)c[d+f]=u[l?f:t-f-1]};if(s){var re=v&&U.name!==R;d((function(){U(1)}))&&d((function(){new U(-1)}))&&!d((function(){return new U,new U(1.5),new U(NaN),1!==U.length||re&&!N}))?re&&N&&u(U,"name",R):((j=function(e){return f(this,k),A(new U(_(e)),this,j)})[D]=k,k.constructor=j,b(j,U)),y&&m(F)!==B&&y(F,B);var ne=new x(new j(2)),oe=o(F.setInt8);ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||c(F,{setInt8:function(e,t){oe(this,e,t<<24>>24)},setUint8:function(e,t){oe(this,e,t<<24>>24)}},{unsafe:!0})}else k=(j=function(e){f(this,k);var t=_(e);M(this,{type:R,bytes:H(G(t),0),byteLength:t}),i||(this.byteLength=t,this.detached=!1)})[D],F=(x=function(e,t,r){f(this,F),f(e,k);var n=L(e),o=n.byteLength,s=p(t);if(s<0||s>o)throw new V("Wrong offset");if(s+(r=void 0===r?o-s:h(r))>o)throw new V("Wrong length");M(this,{type:C,buffer:e,byteLength:r,byteOffset:s,bytes:n.bytes}),i||(this.buffer=e,this.byteLength=r,this.byteOffset=s)})[D],i&&(Q(j,"byteLength",L),Q(x,"buffer",P),Q(x,"byteLength",P),Q(x,"byteOffset",P)),c(F,{getInt8:function(e){return ee(this,1,e)[0]<<24>>24},getUint8:function(e){return ee(this,1,e)[0]},getInt16:function(e){var t=ee(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=ee(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return X(ee(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return X(ee(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return K(ee(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return K(ee(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){te(this,1,e,z,t)},setUint8:function(e,t){te(this,1,e,z,t)},setInt16:function(e,t){te(this,2,e,q,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){te(this,2,e,q,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){te(this,4,e,$,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){te(this,4,e,$,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){te(this,4,e,J,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){te(this,8,e,Z,t,arguments.length>2&&arguments[2])}});O(j,R),O(x,C),t.exports={ArrayBuffer:j,DataView:x}},{"../internals/an-instance":262,"../internals/array-buffer-basic-detection":264,"../internals/array-fill":267,"../internals/array-slice":274,"../internals/copy-constructor-properties":282,"../internals/create-non-enumerable-property":285,"../internals/define-built-in-accessor":288,"../internals/define-built-ins":290,"../internals/descriptors":293,"../internals/fails":310,"../internals/function-name":316,"../internals/function-uncurry-this":319,"../internals/global":325,"../internals/ieee754":331,"../internals/inherit-if-required":333,"../internals/internal-state":335,"../internals/math-fround":358,"../internals/object-get-prototype-of":370,"../internals/object-set-prototype-of":375,"../internals/set-to-string-tag":395,"../internals/to-index":406,"../internals/to-integer-or-infinity":408,"../internals/to-length":409}],267:[function(e,t,r){"use strict";var n=e("../internals/to-object"),o=e("../internals/to-absolute-index"),i=e("../internals/length-of-array-like");t.exports=function(e){for(var t=n(this),r=i(t),s=arguments.length,a=o(s>1?arguments[1]:void 0,r),u=s>2?arguments[2]:void 0,l=void 0===u?r:o(u,r);l>a;)t[a++]=e;return t}},{"../internals/length-of-array-like":355,"../internals/to-absolute-index":404,"../internals/to-object":410}],268:[function(e,t,r){"use strict";var n=e("../internals/length-of-array-like");t.exports=function(e,t,r){for(var o=0,i=arguments.length>2?r:n(t),s=new e(i);i>o;)s[o]=t[o++];return s}},{"../internals/length-of-array-like":355}],269:[function(e,t,r){"use strict";var n=e("../internals/function-bind-context"),o=e("../internals/function-call"),i=e("../internals/to-object"),s=e("../internals/call-with-safe-iteration-closing"),a=e("../internals/is-array-iterator-method"),u=e("../internals/is-constructor"),l=e("../internals/length-of-array-like"),c=e("../internals/create-property"),d=e("../internals/get-iterator"),f=e("../internals/get-iterator-method"),p=Array;t.exports=function(e){var t=i(e),r=u(this),h=arguments.length,_=h>1?arguments[1]:void 0,E=void 0!==_;E&&(_=n(_,h>2?arguments[2]:void 0));var g,m,y,S,T,A,b=f(t),O=0;if(!b||this===p&&a(b))for(g=l(t),m=r?new this(g):p(g);g>O;O++)A=E?_(t[O],O):t[O],c(m,O,A);else for(T=(S=d(t,b)).next,m=r?new this:[];!(y=o(T,S)).done;O++)A=E?s(S,_,[y.value,O],!0):y.value,c(m,O,A);return m.length=O,m}},{"../internals/call-with-safe-iteration-closing":278,"../internals/create-property":287,"../internals/function-bind-context":313,"../internals/function-call":315,"../internals/get-iterator":322,"../internals/get-iterator-method":321,"../internals/is-array-iterator-method":336,"../internals/is-constructor":340,"../internals/length-of-array-like":355,"../internals/to-object":410}],270:[function(e,t,r){"use strict";var n=e("../internals/to-indexed-object"),o=e("../internals/to-absolute-index"),i=e("../internals/length-of-array-like"),s=function(e){return function(t,r,s){var a=n(t),u=i(a);if(0===u)return!e&&-1;var l,c=o(s,u);if(e&&r!=r){for(;u>c;)if((l=a[c++])!=l)return!0}else for(;u>c;c++)if((e||c in a)&&a[c]===r)return e||c||0;return!e&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},{"../internals/length-of-array-like":355,"../internals/to-absolute-index":404,"../internals/to-indexed-object":407}],271:[function(e,t,r){"use strict";var n=e("../internals/function-bind-context"),o=e("../internals/function-uncurry-this"),i=e("../internals/indexed-object"),s=e("../internals/to-object"),a=e("../internals/length-of-array-like"),u=e("../internals/array-species-create"),l=o([].push),c=function(e){var t=1===e,r=2===e,o=3===e,c=4===e,d=6===e,f=7===e,p=5===e||d;return function(h,_,E,g){for(var m,y,S=s(h),T=i(S),A=a(T),b=n(_,E),O=0,I=g||u,v=t?I(h,A):r||f?I(h,0):void 0;A>O;O++)if((p||O in T)&&(y=b(m=T[O],O,S),e))if(t)v[O]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return O;case 2:l(v,m)}else switch(e){case 4:return!1;case 7:l(v,m)}return d?-1:o||c?c:v}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},{"../internals/array-species-create":277,"../internals/function-bind-context":313,"../internals/function-uncurry-this":319,"../internals/indexed-object":332,"../internals/length-of-array-like":355,"../internals/to-object":410}],272:[function(e,t,r){"use strict";var n=e("../internals/fails");t.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},{"../internals/fails":310}],273:[function(e,t,r){"use strict";var n=e("../internals/a-callable"),o=e("../internals/to-object"),i=e("../internals/indexed-object"),s=e("../internals/length-of-array-like"),a=TypeError,u="Reduce of empty array with no initial value",l=function(e){return function(t,r,l,c){var d=o(t),f=i(d),p=s(d);if(n(r),0===p&&l<2)throw new a(u);var h=e?p-1:0,_=e?-1:1;if(l<2)for(;;){if(h in f){c=f[h],h+=_;break}if(h+=_,e?h<0:p<=h)throw new a(u)}for(;e?h>=0:p>h;h+=_)h in f&&(c=r(c,f[h],h,d));return c}};t.exports={left:l(!1),right:l(!0)}},{"../internals/a-callable":257,"../internals/indexed-object":332,"../internals/length-of-array-like":355,"../internals/to-object":410}],274:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this");t.exports=n([].slice)},{"../internals/function-uncurry-this":319}],275:[function(e,t,r){"use strict";var n=e("../internals/array-slice"),o=Math.floor,i=function(e,t){var r=e.length;if(r<8)for(var s,a,u=1;u<r;){for(a=u,s=e[u];a&&t(e[a-1],s)>0;)e[a]=e[--a];a!==u++&&(e[a]=s)}else for(var l=o(r/2),c=i(n(e,0,l),t),d=i(n(e,l),t),f=c.length,p=d.length,h=0,_=0;h<f||_<p;)e[h+_]=h<f&&_<p?t(c[h],d[_])<=0?c[h++]:d[_++]:h<f?c[h++]:d[_++];return e};t.exports=i},{"../internals/array-slice":274}],276:[function(e,t,r){"use strict";var n=e("../internals/is-array"),o=e("../internals/is-constructor"),i=e("../internals/is-object"),s=e("../internals/well-known-symbol")("species"),a=Array;t.exports=function(e){var t;return n(e)&&(t=e.constructor,(o(t)&&(t===a||n(t.prototype))||i(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},{"../internals/is-array":337,"../internals/is-constructor":340,"../internals/is-object":344,"../internals/well-known-symbol":428}],277:[function(e,t,r){"use strict";var n=e("../internals/array-species-constructor");t.exports=function(e,t){return new(n(e))(0===t?0:t)}},{"../internals/array-species-constructor":276}],278:[function(e,t,r){"use strict";var n=e("../internals/an-object"),o=e("../internals/iterator-close");t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){o(e,"throw",t)}}},{"../internals/an-object":263,"../internals/iterator-close":350}],279:[function(e,t,r){"use strict";var n=e("../internals/well-known-symbol")("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}t.exports=function(e,t){try{if(!t&&!o)return!1}catch(e){return!1}var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},{"../internals/well-known-symbol":428}],280:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=n({}.toString),i=n("".slice);t.exports=function(e){return i(o(e),8,-1)}},{"../internals/function-uncurry-this":319}],281:[function(e,t,r){"use strict";var n=e("../internals/to-string-tag-support"),o=e("../internals/is-callable"),i=e("../internals/classof-raw"),s=e("../internals/well-known-symbol")("toStringTag"),a=Object,u="Arguments"===i(function(){return arguments}());t.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:u?i(t):"Object"===(n=i(t))&&o(t.callee)?"Arguments":n}},{"../internals/classof-raw":280,"../internals/is-callable":339,"../internals/to-string-tag-support":415,"../internals/well-known-symbol":428}],282:[function(e,t,r){"use strict";var n=e("../internals/has-own-property"),o=e("../internals/own-keys"),i=e("../internals/object-get-own-property-descriptor"),s=e("../internals/object-define-property");t.exports=function(e,t,r){for(var a=o(t),u=s.f,l=i.f,c=0;c<a.length;c++){var d=a[c];n(e,d)||r&&n(r,d)||u(e,d,l(t,d))}}},{"../internals/has-own-property":326,"../internals/object-define-property":366,"../internals/object-get-own-property-descriptor":367,"../internals/own-keys":377}],283:[function(e,t,r){"use strict";var n=e("../internals/fails");t.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":310}],284:[function(e,t,r){"use strict";t.exports=function(e,t){return{value:e,done:t}}},{}],285:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},{"../internals/create-property-descriptor":286,"../internals/descriptors":293,"../internals/object-define-property":366}],286:[function(e,t,r){"use strict";t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],287:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=function(e,t,r){n?o.f(e,t,i(0,r)):e[t]=r}},{"../internals/create-property-descriptor":286,"../internals/descriptors":293,"../internals/object-define-property":366}],288:[function(e,t,r){"use strict";var n=e("../internals/make-built-in"),o=e("../internals/object-define-property");t.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},{"../internals/make-built-in":356,"../internals/object-define-property":366}],289:[function(e,t,r){"use strict";var n=e("../internals/is-callable"),o=e("../internals/object-define-property"),i=e("../internals/make-built-in"),s=e("../internals/define-global-property");t.exports=function(e,t,r,a){a||(a={});var u=a.enumerable,l=void 0!==a.name?a.name:t;if(n(r)&&i(r,l,a),a.global)u?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(u=!0):delete e[t]}catch(e){}u?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},{"../internals/define-global-property":291,"../internals/is-callable":339,"../internals/make-built-in":356,"../internals/object-define-property":366}],290:[function(e,t,r){"use strict";var n=e("../internals/define-built-in");t.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},{"../internals/define-built-in":289}],291:[function(e,t,r){"use strict";var n=e("../internals/global"),o=Object.defineProperty;t.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},{"../internals/global":325}],292:[function(e,t,r){"use strict";var n=e("../internals/try-to-string"),o=TypeError;t.exports=function(e,t){if(!delete e[t])throw new o("Cannot delete property "+n(t)+" of "+n(e))}},{"../internals/try-to-string":418}],293:[function(e,t,r){"use strict";var n=e("../internals/fails");t.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":310}],294:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/is-object"),i=n.document,s=o(i)&&o(i.createElement);t.exports=function(e){return s?i.createElement(e):{}}},{"../internals/global":325,"../internals/is-object":344}],295:[function(e,t,r){"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],296:[function(e,t,r){"use strict";var n=e("../internals/document-create-element")("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},{"../internals/document-create-element":294}],297:[function(e,t,r){"use strict";var n=e("../internals/engine-user-agent").match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},{"../internals/engine-user-agent":305}],298:[function(e,t,r){"use strict";var n=e("../internals/engine-is-deno"),o=e("../internals/engine-is-node");t.exports=!n&&!o&&"object"==typeof window&&"object"==typeof document},{"../internals/engine-is-deno":299,"../internals/engine-is-node":303}],299:[function(e,t,r){"use strict";t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},{}],300:[function(e,t,r){"use strict";var n=e("../internals/engine-user-agent");t.exports=/MSIE|Trident/.test(n)},{"../internals/engine-user-agent":305}],301:[function(e,t,r){"use strict";var n=e("../internals/engine-user-agent");t.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},{"../internals/engine-user-agent":305}],302:[function(e,t,r){"use strict";var n=e("../internals/engine-user-agent");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},{"../internals/engine-user-agent":305}],303:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/classof-raw");t.exports="process"===o(n.process)},{"../internals/classof-raw":280,"../internals/global":325}],304:[function(e,t,r){"use strict";var n=e("../internals/engine-user-agent");t.exports=/web0s(?!.*chrome)/i.test(n)},{"../internals/engine-user-agent":305}],305:[function(e,t,r){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},{}],306:[function(e,t,r){"use strict";var n,o,i=e("../internals/global"),s=e("../internals/engine-user-agent"),a=i.process,u=i.Deno,l=a&&a.versions||u&&u.version,c=l&&l.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},{"../internals/engine-user-agent":305,"../internals/global":325}],307:[function(e,t,r){"use strict";var n=e("../internals/engine-user-agent").match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},{"../internals/engine-user-agent":305}],308:[function(e,t,r){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],309:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/create-non-enumerable-property"),s=e("../internals/define-built-in"),a=e("../internals/define-global-property"),u=e("../internals/copy-constructor-properties"),l=e("../internals/is-forced");t.exports=function(e,t){var r,c,d,f,p,h=e.target,_=e.global,E=e.stat;if(r=_?n:E?n[h]||a(h,{}):n[h]&&n[h].prototype)for(c in t){if(f=t[c],d=e.dontCallGetSet?(p=o(r,c))&&p.value:r[c],!l(_?c:h+(E?".":"#")+c,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;u(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),s(r,c,f,e)}}},{"../internals/copy-constructor-properties":282,"../internals/create-non-enumerable-property":285,"../internals/define-built-in":289,"../internals/define-global-property":291,"../internals/global":325,"../internals/is-forced":341,"../internals/object-get-own-property-descriptor":367}],310:[function(e,t,r){"use strict";t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],311:[function(e,t,r){"use strict";e("../modules/es.regexp.exec");var n=e("../internals/function-call"),o=e("../internals/define-built-in"),i=e("../internals/regexp-exec"),s=e("../internals/fails"),a=e("../internals/well-known-symbol"),u=e("../internals/create-non-enumerable-property"),l=a("species"),c=RegExp.prototype;t.exports=function(e,t,r,d){var f=a(e),p=!s((function(){var t={};return t[f]=function(){return 7},7!==""[e](t)})),h=p&&!s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[l]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return t=!0,null},r[f](""),!t}));if(!p||!h||r){var _=/./[f],E=t(f,""[e],(function(e,t,r,o,s){var a=t.exec;return a===i||a===c.exec?p&&!s?{done:!0,value:n(_,t,r,o)}:{done:!0,value:n(e,r,t,o)}:{done:!1}}));o(String.prototype,e,E[0]),o(c,f,E[1])}d&&u(c[f],"sham",!0)}},{"../internals/create-non-enumerable-property":285,"../internals/define-built-in":289,"../internals/fails":310,"../internals/function-call":315,"../internals/regexp-exec":386,"../internals/well-known-symbol":428,"../modules/es.regexp.exec":442}],312:[function(e,t,r){"use strict";var n=e("../internals/function-bind-native"),o=Function.prototype,i=o.apply,s=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(i):function(){return s.apply(i,arguments)})},{"../internals/function-bind-native":314}],313:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this-clause"),o=e("../internals/a-callable"),i=e("../internals/function-bind-native"),s=n(n.bind);t.exports=function(e,t){return o(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},{"../internals/a-callable":257,"../internals/function-bind-native":314,"../internals/function-uncurry-this-clause":318}],314:[function(e,t,r){"use strict";var n=e("../internals/fails");t.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},{"../internals/fails":310}],315:[function(e,t,r){"use strict";var n=e("../internals/function-bind-native"),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},{"../internals/function-bind-native":314}],316:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/has-own-property"),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=o(i,"name"),u=a&&"something"===function(){}.name,l=a&&(!n||n&&s(i,"name").configurable);t.exports={EXISTS:a,PROPER:u,CONFIGURABLE:l}},{"../internals/descriptors":293,"../internals/has-own-property":326}],317:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/a-callable");t.exports=function(e,t,r){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},{"../internals/a-callable":257,"../internals/function-uncurry-this":319}],318:[function(e,t,r){"use strict";var n=e("../internals/classof-raw"),o=e("../internals/function-uncurry-this");t.exports=function(e){if("Function"===n(e))return o(e)}},{"../internals/classof-raw":280,"../internals/function-uncurry-this":319}],319:[function(e,t,r){"use strict";var n=e("../internals/function-bind-native"),o=Function.prototype,i=o.call,s=n&&o.bind.bind(i,i);t.exports=n?s:function(e){return function(){return i.apply(e,arguments)}}},{"../internals/function-bind-native":314}],320:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/is-callable");t.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},{"../internals/global":325,"../internals/is-callable":339}],321:[function(e,t,r){"use strict";var n=e("../internals/classof"),o=e("../internals/get-method"),i=e("../internals/is-null-or-undefined"),s=e("../internals/iterators"),a=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(!i(e))return o(e,a)||o(e,"@@iterator")||s[n(e)]}},{"../internals/classof":281,"../internals/get-method":323,"../internals/is-null-or-undefined":343,"../internals/iterators":354,"../internals/well-known-symbol":428}],322:[function(e,t,r){"use strict";var n=e("../internals/function-call"),o=e("../internals/a-callable"),i=e("../internals/an-object"),s=e("../internals/try-to-string"),a=e("../internals/get-iterator-method"),u=TypeError;t.exports=function(e,t){var r=arguments.length<2?a(e):t;if(o(r))return i(n(r,e));throw new u(s(e)+" is not iterable")}},{"../internals/a-callable":257,"../internals/an-object":263,"../internals/function-call":315,"../internals/get-iterator-method":321,"../internals/try-to-string":418}],323:[function(e,t,r){"use strict";var n=e("../internals/a-callable"),o=e("../internals/is-null-or-undefined");t.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},{"../internals/a-callable":257,"../internals/is-null-or-undefined":343}],324:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/to-object"),i=Math.floor,s=n("".charAt),a=n("".replace),u=n("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;t.exports=function(e,t,r,n,d,f){var p=r+e.length,h=n.length,_=c;return void 0!==d&&(d=o(d),_=l),a(f,_,(function(o,a){var l;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,r);case"'":return u(t,p);case"<":l=d[u(a,1,-1)];break;default:var c=+a;if(0===c)return o;if(c>h){var f=i(c/10);return 0===f?o:f<=h?void 0===n[f-1]?s(a,1):n[f-1]+s(a,1):o}l=n[c-1]}return void 0===l?"":l}))}},{"../internals/function-uncurry-this":319,"../internals/to-object":410}],325:[function(e,t,r){(function(e){(function(){"use strict";var r=function(e){return e&&e.Math===Math&&e};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],326:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/to-object"),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},{"../internals/function-uncurry-this":319,"../internals/to-object":410}],327:[function(e,t,r){"use strict";t.exports={}},{}],328:[function(e,t,r){"use strict";t.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}},{}],329:[function(e,t,r){"use strict";var n=e("../internals/get-built-in");t.exports=n("document","documentElement")},{"../internals/get-built-in":320}],330:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/fails"),i=e("../internals/document-create-element");t.exports=!n&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":293,"../internals/document-create-element":294,"../internals/fails":310}],331:[function(e,t,r){"use strict";var n=Array,o=Math.abs,i=Math.pow,s=Math.floor,a=Math.log,u=Math.LN2;t.exports={pack:function(e,t,r){var l,c,d,f=n(r),p=8*r-t-1,h=(1<<p)-1,_=h>>1,E=23===t?i(2,-24)-i(2,-77):0,g=e<0||0===e&&1/e<0?1:0,m=0;for((e=o(e))!=e||e===1/0?(c=e!=e?1:0,l=h):(l=s(a(e)/u),e*(d=i(2,-l))<1&&(l--,d*=2),(e+=l+_>=1?E/d:E*i(2,1-_))*d>=2&&(l++,d/=2),l+_>=h?(c=0,l=h):l+_>=1?(c=(e*d-1)*i(2,t),l+=_):(c=e*i(2,_-1)*i(2,t),l=0));t>=8;)f[m++]=255&c,c/=256,t-=8;for(l=l<<t|c,p+=t;p>0;)f[m++]=255&l,l/=256,p-=8;return f[--m]|=128*g,f},unpack:function(e,t){var r,n=e.length,o=8*n-t-1,s=(1<<o)-1,a=s>>1,u=o-7,l=n-1,c=e[l--],d=127&c;for(c>>=7;u>0;)d=256*d+e[l--],u-=8;for(r=d&(1<<-u)-1,d>>=-u,u+=t;u>0;)r=256*r+e[l--],u-=8;if(0===d)d=1-a;else{if(d===s)return r?NaN:c?-1/0:1/0;r+=i(2,t),d-=a}return(c?-1:1)*r*i(2,d-t)}}},{}],332:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/fails"),i=e("../internals/classof-raw"),s=Object,a=n("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?a(e,""):s(e)}:s},{"../internals/classof-raw":280,"../internals/fails":310,"../internals/function-uncurry-this":319}],333:[function(e,t,r){"use strict";var n=e("../internals/is-callable"),o=e("../internals/is-object"),i=e("../internals/object-set-prototype-of");t.exports=function(e,t,r){var s,a;return i&&n(s=t.constructor)&&s!==r&&o(a=s.prototype)&&a!==r.prototype&&i(e,a),e}},{"../internals/is-callable":339,"../internals/is-object":344,"../internals/object-set-prototype-of":375}],334:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/is-callable"),i=e("../internals/shared-store"),s=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),t.exports=i.inspectSource},{"../internals/function-uncurry-this":319,"../internals/is-callable":339,"../internals/shared-store":397}],335:[function(e,t,r){"use strict";var n,o,i,s=e("../internals/weak-map-basic-detection"),a=e("../internals/global"),u=e("../internals/is-object"),l=e("../internals/create-non-enumerable-property"),c=e("../internals/has-own-property"),d=e("../internals/shared-store"),f=e("../internals/shared-key"),p=e("../internals/hidden-keys"),h="Object already initialized",_=a.TypeError,E=a.WeakMap;if(s||d.state){var g=d.state||(d.state=new E);g.get=g.get,g.has=g.has,g.set=g.set,n=function(e,t){if(g.has(e))throw new _(h);return t.facade=e,g.set(e,t),t},o=function(e){return g.get(e)||{}},i=function(e){return g.has(e)}}else{var m=f("state");p[m]=!0,n=function(e,t){if(c(e,m))throw new _(h);return t.facade=e,l(e,m,t),t},o=function(e){return c(e,m)?e[m]:{}},i=function(e){return c(e,m)}}t.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=o(t)).type!==e)throw new _("Incompatible receiver, "+e+" required");return r}}}},{"../internals/create-non-enumerable-property":285,"../internals/global":325,"../internals/has-own-property":326,"../internals/hidden-keys":327,"../internals/is-object":344,"../internals/shared-key":396,"../internals/shared-store":397,"../internals/weak-map-basic-detection":427}],336:[function(e,t,r){"use strict";var n=e("../internals/well-known-symbol"),o=e("../internals/iterators"),i=n("iterator"),s=Array.prototype;t.exports=function(e){return void 0!==e&&(o.Array===e||s[i]===e)}},{"../internals/iterators":354,"../internals/well-known-symbol":428}],337:[function(e,t,r){"use strict";var n=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"===n(e)}},{"../internals/classof-raw":280}],338:[function(e,t,r){"use strict";var n=e("../internals/classof");t.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},{"../internals/classof":281}],339:[function(e,t,r){"use strict";var n="object"==typeof document&&document.all;t.exports=void 0===n&&void 0!==n?function(e){return"function"==typeof e||e===n}:function(e){return"function"==typeof e}},{}],340:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/fails"),i=e("../internals/is-callable"),s=e("../internals/classof"),a=e("../internals/get-built-in"),u=e("../internals/inspect-source"),l=function(){},c=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,f=n(d.exec),p=!d.test(l),h=function(e){if(!i(e))return!1;try{return c(l,[],e),!0}catch(e){return!1}},_=function(e){if(!i(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(d,u(e))}catch(e){return!0}};_.sham=!0,t.exports=!c||o((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?_:h},{"../internals/classof":281,"../internals/fails":310,"../internals/function-uncurry-this":319,"../internals/get-built-in":320,"../internals/inspect-source":334,"../internals/is-callable":339}],341:[function(e,t,r){"use strict";var n=e("../internals/fails"),o=e("../internals/is-callable"),i=/#|\.prototype\./,s=function(e,t){var r=u[a(e)];return r===c||r!==l&&(o(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=s.data={},l=s.NATIVE="N",c=s.POLYFILL="P";t.exports=s},{"../internals/fails":310,"../internals/is-callable":339}],342:[function(e,t,r){"use strict";var n=e("../internals/is-object"),o=Math.floor;t.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&o(e)===e}},{"../internals/is-object":344}],343:[function(e,t,r){"use strict";t.exports=function(e){return null==e}},{}],344:[function(e,t,r){"use strict";var n=e("../internals/is-callable");t.exports=function(e){return"object"==typeof e?null!==e:n(e)}},{"../internals/is-callable":339}],345:[function(e,t,r){"use strict";var n=e("../internals/is-object");t.exports=function(e){return n(e)||null===e}},{"../internals/is-object":344}],346:[function(e,t,r){"use strict";t.exports=!1},{}],347:[function(e,t,r){"use strict";var n=e("../internals/is-object"),o=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"===o(e))}},{"../internals/classof-raw":280,"../internals/is-object":344,"../internals/well-known-symbol":428}],348:[function(e,t,r){"use strict";var n=e("../internals/get-built-in"),o=e("../internals/is-callable"),i=e("../internals/object-is-prototype-of"),s=e("../internals/use-symbol-as-uid"),a=Object;t.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,a(e))}},{"../internals/get-built-in":320,"../internals/is-callable":339,"../internals/object-is-prototype-of":371,"../internals/use-symbol-as-uid":424}],349:[function(e,t,r){"use strict";var n=e("../internals/function-bind-context"),o=e("../internals/function-call"),i=e("../internals/an-object"),s=e("../internals/try-to-string"),a=e("../internals/is-array-iterator-method"),u=e("../internals/length-of-array-like"),l=e("../internals/object-is-prototype-of"),c=e("../internals/get-iterator"),d=e("../internals/get-iterator-method"),f=e("../internals/iterator-close"),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},_=h.prototype;t.exports=function(e,t,r){var E,g,m,y,S,T,A,b=r&&r.that,O=!(!r||!r.AS_ENTRIES),I=!(!r||!r.IS_RECORD),v=!(!r||!r.IS_ITERATOR),N=!(!r||!r.INTERRUPTED),R=n(t,b),C=function(e){return E&&f(E,"normal",e),new h(!0,e)},D=function(e){return O?(i(e),N?R(e[0],e[1],C):R(e[0],e[1])):N?R(e,C):R(e)};if(I)E=e.iterator;else if(v)E=e;else{if(!(g=d(e)))throw new p(s(e)+" is not iterable");if(a(g)){for(m=0,y=u(e);y>m;m++)if((S=D(e[m]))&&l(_,S))return S;return new h(!1)}E=c(e,g)}for(T=I?e.next:E.next;!(A=o(T,E)).done;){try{S=D(A.value)}catch(e){f(E,"throw",e)}if("object"==typeof S&&S&&l(_,S))return S}return new h(!1)}},{"../internals/an-object":263,"../internals/function-bind-context":313,"../internals/function-call":315,"../internals/get-iterator":322,"../internals/get-iterator-method":321,"../internals/is-array-iterator-method":336,"../internals/iterator-close":350,"../internals/length-of-array-like":355,"../internals/object-is-prototype-of":371,"../internals/try-to-string":418}],350:[function(e,t,r){"use strict";var n=e("../internals/function-call"),o=e("../internals/an-object"),i=e("../internals/get-method");t.exports=function(e,t,r){var s,a;o(e);try{if(!(s=i(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return o(s),r}},{"../internals/an-object":263,"../internals/function-call":315,"../internals/get-method":323}],351:[function(e,t,r){"use strict";var n=e("../internals/iterators-core").IteratorPrototype,o=e("../internals/object-create"),i=e("../internals/create-property-descriptor"),s=e("../internals/set-to-string-tag"),a=e("../internals/iterators"),u=function(){return this};t.exports=function(e,t,r,l){var c=t+" Iterator";return e.prototype=o(n,{next:i(+!l,r)}),s(e,c,!1,!0),a[c]=u,e}},{"../internals/create-property-descriptor":286,"../internals/iterators":354,"../internals/iterators-core":353,"../internals/object-create":364,"../internals/set-to-string-tag":395}],352:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/function-call"),i=e("../internals/is-pure"),s=e("../internals/function-name"),a=e("../internals/is-callable"),u=e("../internals/iterator-create-constructor"),l=e("../internals/object-get-prototype-of"),c=e("../internals/object-set-prototype-of"),d=e("../internals/set-to-string-tag"),f=e("../internals/create-non-enumerable-property"),p=e("../internals/define-built-in"),h=e("../internals/well-known-symbol"),_=e("../internals/iterators"),E=e("../internals/iterators-core"),g=s.PROPER,m=s.CONFIGURABLE,y=E.IteratorPrototype,S=E.BUGGY_SAFARI_ITERATORS,T=h("iterator"),A="keys",b="values",O="entries",I=function(){return this};t.exports=function(e,t,r,s,h,E,v){u(r,t,s);var N,R,C,D=function(e){if(e===h&&U)return U;if(!S&&e&&e in P)return P[e];switch(e){case A:case b:case O:return function(){return new r(this,e)}}return function(){return new r(this)}},w=t+" Iterator",L=!1,P=e.prototype,M=P[T]||P["@@iterator"]||h&&P[h],U=!S&&M||D(h),j="Array"===t&&P.entries||M;if(j&&(N=l(j.call(new e)))!==Object.prototype&&N.next&&(i||l(N)===y||(c?c(N,y):a(N[T])||p(N,T,I)),d(N,w,!0,!0),i&&(_[w]=I)),g&&h===b&&M&&M.name!==b&&(!i&&m?f(P,"name",b):(L=!0,U=function(){return o(M,this)})),h)if(R={values:D(b),keys:E?U:D(A),entries:D(O)},v)for(C in R)(S||L||!(C in P))&&p(P,C,R[C]);else n({target:t,proto:!0,forced:S||L},R);return i&&!v||P[T]===U||p(P,T,U,{name:h}),_[t]=U,R}},{"../internals/create-non-enumerable-property":285,"../internals/define-built-in":289,"../internals/export":309,"../internals/function-call":315,"../internals/function-name":316,"../internals/is-callable":339,"../internals/is-pure":346,"../internals/iterator-create-constructor":351,"../internals/iterators":354,"../internals/iterators-core":353,"../internals/object-get-prototype-of":370,"../internals/object-set-prototype-of":375,"../internals/set-to-string-tag":395,"../internals/well-known-symbol":428}],353:[function(e,t,r){"use strict";var n,o,i,s=e("../internals/fails"),a=e("../internals/is-callable"),u=e("../internals/is-object"),l=e("../internals/object-create"),c=e("../internals/object-get-prototype-of"),d=e("../internals/define-built-in"),f=e("../internals/well-known-symbol"),p=e("../internals/is-pure"),h=f("iterator"),_=!1;[].keys&&("next"in(i=[].keys())?(o=c(c(i)))!==Object.prototype&&(n=o):_=!0),!u(n)||s((function(){var e={};return n[h].call(e)!==e}))?n={}:p&&(n=l(n)),a(n[h])||d(n,h,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:_}},{"../internals/define-built-in":289,"../internals/fails":310,"../internals/is-callable":339,"../internals/is-object":344,"../internals/is-pure":346,"../internals/object-create":364,"../internals/object-get-prototype-of":370,"../internals/well-known-symbol":428}],354:[function(e,t,r){arguments[4][327][0].apply(r,arguments)},{dup:327}],355:[function(e,t,r){"use strict";var n=e("../internals/to-length");t.exports=function(e){return n(e.length)}},{"../internals/to-length":409}],356:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/fails"),i=e("../internals/is-callable"),s=e("../internals/has-own-property"),a=e("../internals/descriptors"),u=e("../internals/function-name").CONFIGURABLE,l=e("../internals/inspect-source"),c=e("../internals/internal-state"),d=c.enforce,f=c.get,p=String,h=Object.defineProperty,_=n("".slice),E=n("".replace),g=n([].join),m=a&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),y=String(String).split("String"),S=t.exports=function(e,t,r){"Symbol("===_(p(t),0,7)&&(t="["+E(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||u&&e.name!==t)&&(a?h(e,"name",{value:t,configurable:!0}):e.name=t),m&&r&&s(r,"arity")&&e.length!==r.arity&&h(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=g(y,"string"==typeof t?t:"")),e};Function.prototype.toString=S((function(){return i(this)&&f(this).source||l(this)}),"toString")},{"../internals/descriptors":293,"../internals/fails":310,"../internals/function-name":316,"../internals/function-uncurry-this":319,"../internals/has-own-property":326,"../internals/inspect-source":334,"../internals/internal-state":335,"../internals/is-callable":339}],357:[function(e,t,r){"use strict";var n=e("../internals/math-sign"),o=Math.abs,i=2220446049250313e-31,s=1/i;t.exports=function(e,t,r,a){var u=+e,l=o(u),c=n(u);if(l<a)return c*function(e){return e+s-s}(l/a/t)*a*t;var d=(1+t/i)*l,f=d-(d-l);return f>r||f!=f?c*(1/0):c*f}},{"../internals/math-sign":359}],358:[function(e,t,r){"use strict";var n=e("../internals/math-float-round");t.exports=Math.fround||function(e){return n(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},{"../internals/math-float-round":357}],359:[function(e,t,r){"use strict";t.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},{}],360:[function(e,t,r){"use strict";var n=Math.ceil,o=Math.floor;t.exports=Math.trunc||function(e){var t=+e;return(t>0?o:n)(t)}},{}],361:[function(e,t,r){"use strict";var n,o,i,s,a,u=e("../internals/global"),l=e("../internals/safe-get-built-in"),c=e("../internals/function-bind-context"),d=e("../internals/task").set,f=e("../internals/queue"),p=e("../internals/engine-is-ios"),h=e("../internals/engine-is-ios-pebble"),_=e("../internals/engine-is-webos-webkit"),E=e("../internals/engine-is-node"),g=u.MutationObserver||u.WebKitMutationObserver,m=u.document,y=u.process,S=u.Promise,T=l("queueMicrotask");if(!T){var A=new f,b=function(){var e,t;for(E&&(e=y.domain)&&e.exit();t=A.get();)try{t()}catch(e){throw A.head&&n(),e}e&&e.enter()};p||E||_||!g||!m?!h&&S&&S.resolve?((s=S.resolve(void 0)).constructor=S,a=c(s.then,s),n=function(){a(b)}):E?n=function(){y.nextTick(b)}:(d=c(d,u),n=function(){d(b)}):(o=!0,i=m.createTextNode(""),new g(b).observe(i,{characterData:!0}),n=function(){i.data=o=!o}),T=function(e){A.head||n(),A.add(e)}}t.exports=T},{"../internals/engine-is-ios":302,"../internals/engine-is-ios-pebble":301,"../internals/engine-is-node":303,"../internals/engine-is-webos-webkit":304,"../internals/function-bind-context":313,"../internals/global":325,"../internals/queue":384,"../internals/safe-get-built-in":393,"../internals/task":403}],362:[function(e,t,r){"use strict";var n=e("../internals/a-callable"),o=TypeError,i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw new o("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};t.exports.f=function(e){return new i(e)}},{"../internals/a-callable":257}],363:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/function-uncurry-this"),i=e("../internals/function-call"),s=e("../internals/fails"),a=e("../internals/object-keys"),u=e("../internals/object-get-own-property-symbols"),l=e("../internals/object-property-is-enumerable"),c=e("../internals/to-object"),d=e("../internals/indexed-object"),f=Object.assign,p=Object.defineProperty,h=o([].concat);t.exports=!f||s((function(){if(n&&1!==f({b:1},f(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach((function(e){t[e]=e})),7!==f({},e)[r]||a(f({},t)).join("")!==o}))?function(e,t){for(var r=c(e),o=arguments.length,s=1,f=u.f,p=l.f;o>s;)for(var _,E=d(arguments[s++]),g=f?h(a(E),f(E)):a(E),m=g.length,y=0;m>y;)_=g[y++],n&&!i(p,E,_)||(r[_]=E[_]);return r}:f},{"../internals/descriptors":293,"../internals/fails":310,"../internals/function-call":315,"../internals/function-uncurry-this":319,"../internals/indexed-object":332,"../internals/object-get-own-property-symbols":369,"../internals/object-keys":373,"../internals/object-property-is-enumerable":374,"../internals/to-object":410}],364:[function(e,t,r){"use strict";var n,o=e("../internals/an-object"),i=e("../internals/object-define-properties"),s=e("../internals/enum-bug-keys"),a=e("../internals/hidden-keys"),u=e("../internals/html"),l=e("../internals/document-create-element"),c=e("../internals/shared-key"),d="prototype",f="script",p=c("IE_PROTO"),h=function(){},_=function(e){return"<"+f+">"+e+"</"+f+">"},E=function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;g="undefined"!=typeof document?document.domain&&n?E(n):(t=l("iframe"),r="java"+f+":",t.style.display="none",u.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(_("document.F=Object")),e.close(),e.F):E(n);for(var o=s.length;o--;)delete g[d][s[o]];return g()};a[p]=!0,t.exports=Object.create||function(e,t){var r;return null!==e?(h[d]=o(e),r=new h,h[d]=null,r[p]=e):r=g(),void 0===t?r:i.f(r,t)}},{"../internals/an-object":263,"../internals/document-create-element":294,"../internals/enum-bug-keys":308,"../internals/hidden-keys":327,"../internals/html":329,"../internals/object-define-properties":365,"../internals/shared-key":396}],365:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/v8-prototype-define-bug"),i=e("../internals/object-define-property"),s=e("../internals/an-object"),a=e("../internals/to-indexed-object"),u=e("../internals/object-keys");r.f=n&&!o?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),o=u(t),l=o.length,c=0;l>c;)i.f(e,r=o[c++],n[r]);return e}},{"../internals/an-object":263,"../internals/descriptors":293,"../internals/object-define-property":366,"../internals/object-keys":373,"../internals/to-indexed-object":407,"../internals/v8-prototype-define-bug":425}],366:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/ie8-dom-define"),i=e("../internals/v8-prototype-define-bug"),s=e("../internals/an-object"),a=e("../internals/to-property-key"),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",p="writable";r.f=n?i?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&p in r&&!r[p]){var n=c(e,t);n&&n[p]&&(e[t]=r.value,r={configurable:f in r?r[f]:n[f],enumerable:d in r?r[d]:n[d],writable:!1})}return l(e,t,r)}:l:function(e,t,r){if(s(e),t=a(t),s(r),o)try{return l(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},{"../internals/an-object":263,"../internals/descriptors":293,"../internals/ie8-dom-define":330,"../internals/to-property-key":414,"../internals/v8-prototype-define-bug":425}],367:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/function-call"),i=e("../internals/object-property-is-enumerable"),s=e("../internals/create-property-descriptor"),a=e("../internals/to-indexed-object"),u=e("../internals/to-property-key"),l=e("../internals/has-own-property"),c=e("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;r.f=n?d:function(e,t){if(e=a(e),t=u(t),c)try{return d(e,t)}catch(e){}if(l(e,t))return s(!o(i.f,e,t),e[t])}},{"../internals/create-property-descriptor":286,"../internals/descriptors":293,"../internals/function-call":315,"../internals/has-own-property":326,"../internals/ie8-dom-define":330,"../internals/object-property-is-enumerable":374,"../internals/to-indexed-object":407,"../internals/to-property-key":414}],368:[function(e,t,r){"use strict";var n=e("../internals/object-keys-internal"),o=e("../internals/enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"../internals/enum-bug-keys":308,"../internals/object-keys-internal":372}],369:[function(e,t,r){"use strict";r.f=Object.getOwnPropertySymbols},{}],370:[function(e,t,r){"use strict";var n=e("../internals/has-own-property"),o=e("../internals/is-callable"),i=e("../internals/to-object"),s=e("../internals/shared-key"),a=e("../internals/correct-prototype-getter"),u=s("IE_PROTO"),l=Object,c=l.prototype;t.exports=a?l.getPrototypeOf:function(e){var t=i(e);if(n(t,u))return t[u];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof l?c:null}},{"../internals/correct-prototype-getter":283,"../internals/has-own-property":326,"../internals/is-callable":339,"../internals/shared-key":396,"../internals/to-object":410}],371:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this");t.exports=n({}.isPrototypeOf)},{"../internals/function-uncurry-this":319}],372:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/has-own-property"),i=e("../internals/to-indexed-object"),s=e("../internals/array-includes").indexOf,a=e("../internals/hidden-keys"),u=n([].push);t.exports=function(e,t){var r,n=i(e),l=0,c=[];for(r in n)!o(a,r)&&o(n,r)&&u(c,r);for(;t.length>l;)o(n,r=t[l++])&&(~s(c,r)||u(c,r));return c}},{"../internals/array-includes":270,"../internals/function-uncurry-this":319,"../internals/has-own-property":326,"../internals/hidden-keys":327,"../internals/to-indexed-object":407}],373:[function(e,t,r){"use strict";var n=e("../internals/object-keys-internal"),o=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"../internals/enum-bug-keys":308,"../internals/object-keys-internal":372}],374:[function(e,t,r){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);r.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},{}],375:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this-accessor"),o=e("../internals/an-object"),i=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return o(r),i(n),t?e(r,n):r.__proto__=n,r}}():void 0)},{"../internals/a-possible-prototype":259,"../internals/an-object":263,"../internals/function-uncurry-this-accessor":317}],376:[function(e,t,r){"use strict";var n=e("../internals/function-call"),o=e("../internals/is-callable"),i=e("../internals/is-object"),s=TypeError;t.exports=function(e,t){var r,a;if("string"===t&&o(r=e.toString)&&!i(a=n(r,e)))return a;if(o(r=e.valueOf)&&!i(a=n(r,e)))return a;if("string"!==t&&o(r=e.toString)&&!i(a=n(r,e)))return a;throw new s("Can't convert object to primitive value")}},{"../internals/function-call":315,"../internals/is-callable":339,"../internals/is-object":344}],377:[function(e,t,r){"use strict";var n=e("../internals/get-built-in"),o=e("../internals/function-uncurry-this"),i=e("../internals/object-get-own-property-names"),s=e("../internals/object-get-own-property-symbols"),a=e("../internals/an-object"),u=o([].concat);t.exports=n("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=s.f;return r?u(t,r(e)):t}},{"../internals/an-object":263,"../internals/function-uncurry-this":319,"../internals/get-built-in":320,"../internals/object-get-own-property-names":368,"../internals/object-get-own-property-symbols":369}],378:[function(e,t,r){"use strict";t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],379:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/promise-native-constructor"),i=e("../internals/is-callable"),s=e("../internals/is-forced"),a=e("../internals/inspect-source"),u=e("../internals/well-known-symbol"),l=e("../internals/engine-is-browser"),c=e("../internals/engine-is-deno"),d=e("../internals/is-pure"),f=e("../internals/engine-v8-version"),p=o&&o.prototype,h=u("species"),_=!1,E=i(n.PromiseRejectionEvent),g=s("Promise",(function(){var e=a(o),t=e!==String(o);if(!t&&66===f)return!0;if(d&&(!p.catch||!p.finally))return!0;if(!f||f<51||!/native code/.test(e)){var r=new o((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[h]=n,!(_=r.then((function(){}))instanceof n))return!0}return!t&&(l||c)&&!E}));t.exports={CONSTRUCTOR:g,REJECTION_EVENT:E,SUBCLASSING:_}},{"../internals/engine-is-browser":298,"../internals/engine-is-deno":299,"../internals/engine-v8-version":306,"../internals/global":325,"../internals/inspect-source":334,"../internals/is-callable":339,"../internals/is-forced":341,"../internals/is-pure":346,"../internals/promise-native-constructor":380,"../internals/well-known-symbol":428}],380:[function(e,t,r){"use strict";var n=e("../internals/global");t.exports=n.Promise},{"../internals/global":325}],381:[function(e,t,r){"use strict";var n=e("../internals/an-object"),o=e("../internals/is-object"),i=e("../internals/new-promise-capability");t.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},{"../internals/an-object":263,"../internals/is-object":344,"../internals/new-promise-capability":362}],382:[function(e,t,r){"use strict";var n=e("../internals/promise-native-constructor"),o=e("../internals/check-correctness-of-iteration"),i=e("../internals/promise-constructor-detection").CONSTRUCTOR;t.exports=i||!o((function(e){n.all(e).then(void 0,(function(){}))}))},{"../internals/check-correctness-of-iteration":279,"../internals/promise-constructor-detection":379,"../internals/promise-native-constructor":380}],383:[function(e,t,r){"use strict";var n=e("../internals/object-define-property").f;t.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},{"../internals/object-define-property":366}],384:[function(e,t,r){"use strict";var n=function(){this.head=null,this.tail=null};n.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},t.exports=n},{}],385:[function(e,t,r){"use strict";var n=e("../internals/function-call"),o=e("../internals/an-object"),i=e("../internals/is-callable"),s=e("../internals/classof-raw"),a=e("../internals/regexp-exec"),u=TypeError;t.exports=function(e,t){var r=e.exec;if(i(r)){var l=n(r,e,t);return null!==l&&o(l),l}if("RegExp"===s(e))return n(a,e,t);throw new u("RegExp#exec called on incompatible receiver")}},{"../internals/an-object":263,"../internals/classof-raw":280,"../internals/function-call":315,"../internals/is-callable":339,"../internals/regexp-exec":386}],386:[function(e,t,r){"use strict";var n,o,i=e("../internals/function-call"),s=e("../internals/function-uncurry-this"),a=e("../internals/to-string"),u=e("../internals/regexp-flags"),l=e("../internals/regexp-sticky-helpers"),c=e("../internals/shared"),d=e("../internals/object-create"),f=e("../internals/internal-state").get,p=e("../internals/regexp-unsupported-dot-all"),h=e("../internals/regexp-unsupported-ncg"),_=c("native-string-replace",String.prototype.replace),E=RegExp.prototype.exec,g=E,m=s("".charAt),y=s("".indexOf),S=s("".replace),T=s("".slice),A=(o=/b*/g,i(E,n=/a/,"a"),i(E,o,"a"),0!==n.lastIndex||0!==o.lastIndex),b=l.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(A||O||b||p||h)&&(g=function(e){var t,r,n,o,s,l,c,p=this,h=f(p),I=a(e),v=h.raw;if(v)return v.lastIndex=p.lastIndex,t=i(g,v,I),p.lastIndex=v.lastIndex,t;var N=h.groups,R=b&&p.sticky,C=i(u,p),D=p.source,w=0,L=I;if(R&&(C=S(C,"y",""),-1===y(C,"g")&&(C+="g"),L=T(I,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==m(I,p.lastIndex-1))&&(D="(?: "+D+")",L=" "+L,w++),r=new RegExp("^(?:"+D+")",C)),O&&(r=new RegExp("^"+D+"$(?!\\s)",C)),A&&(n=p.lastIndex),o=i(E,R?r:p,L),R?o?(o.input=T(o.input,w),o[0]=T(o[0],w),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:A&&o&&(p.lastIndex=p.global?o.index+o[0].length:n),O&&o&&o.length>1&&i(_,o[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)})),o&&N)for(o.groups=l=d(null),s=0;s<N.length;s++)l[(c=N[s])[0]]=o[c[1]];return o}),t.exports=g},{"../internals/function-call":315,"../internals/function-uncurry-this":319,"../internals/internal-state":335,"../internals/object-create":364,"../internals/regexp-flags":387,"../internals/regexp-sticky-helpers":389,"../internals/regexp-unsupported-dot-all":390,"../internals/regexp-unsupported-ncg":391,"../internals/shared":398,"../internals/to-string":416}],387:[function(e,t,r){"use strict";var n=e("../internals/an-object");t.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},{"../internals/an-object":263}],388:[function(e,t,r){"use strict";var n=e("../internals/function-call"),o=e("../internals/has-own-property"),i=e("../internals/object-is-prototype-of"),s=e("../internals/regexp-flags"),a=RegExp.prototype;t.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||o(e,"flags")||!i(a,e)?t:n(s,e)}},{"../internals/function-call":315,"../internals/has-own-property":326,"../internals/object-is-prototype-of":371,"../internals/regexp-flags":387}],389:[function(e,t,r){"use strict";var n=e("../internals/fails"),o=e("../internals/global").RegExp,i=n((function(){var e=o("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),s=i||n((function(){return!o("a","y").sticky})),a=i||n((function(){var e=o("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i}},{"../internals/fails":310,"../internals/global":325}],390:[function(e,t,r){"use strict";var n=e("../internals/fails"),o=e("../internals/global").RegExp;t.exports=n((function(){var e=o(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},{"../internals/fails":310,"../internals/global":325}],391:[function(e,t,r){"use strict";var n=e("../internals/fails"),o=e("../internals/global").RegExp;t.exports=n((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},{"../internals/fails":310,"../internals/global":325}],392:[function(e,t,r){"use strict";var n=e("../internals/is-null-or-undefined"),o=TypeError;t.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},{"../internals/is-null-or-undefined":343}],393:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/descriptors"),i=Object.getOwnPropertyDescriptor;t.exports=function(e){if(!o)return n[e];var t=i(n,e);return t&&t.value}},{"../internals/descriptors":293,"../internals/global":325}],394:[function(e,t,r){"use strict";var n=e("../internals/get-built-in"),o=e("../internals/define-built-in-accessor"),i=e("../internals/well-known-symbol"),s=e("../internals/descriptors"),a=i("species");t.exports=function(e){var t=n(e);s&&t&&!t[a]&&o(t,a,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":288,"../internals/descriptors":293,"../internals/get-built-in":320,"../internals/well-known-symbol":428}],395:[function(e,t,r){"use strict";var n=e("../internals/object-define-property").f,o=e("../internals/has-own-property"),i=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!o(e,i)&&n(e,i,{configurable:!0,value:t})}},{"../internals/has-own-property":326,"../internals/object-define-property":366,"../internals/well-known-symbol":428}],396:[function(e,t,r){"use strict";var n=e("../internals/shared"),o=e("../internals/uid"),i=n("keys");t.exports=function(e){return i[e]||(i[e]=o(e))}},{"../internals/shared":398,"../internals/uid":422}],397:[function(e,t,r){"use strict";var n=e("../internals/is-pure"),o=e("../internals/global"),i=e("../internals/define-global-property"),s="__core-js_shared__",a=t.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.36.0",mode:n?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/define-global-property":291,"../internals/global":325,"../internals/is-pure":346}],398:[function(e,t,r){"use strict";var n=e("../internals/shared-store");t.exports=function(e,t){return n[e]||(n[e]=t||{})}},{"../internals/shared-store":397}],399:[function(e,t,r){"use strict";var n=e("../internals/an-object"),o=e("../internals/a-constructor"),i=e("../internals/is-null-or-undefined"),s=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||i(r=n(a)[s])?t:o(r)}},{"../internals/a-constructor":258,"../internals/an-object":263,"../internals/is-null-or-undefined":343,"../internals/well-known-symbol":428}],400:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=e("../internals/to-integer-or-infinity"),i=e("../internals/to-string"),s=e("../internals/require-object-coercible"),a=n("".charAt),u=n("".charCodeAt),l=n("".slice),c=function(e){return function(t,r){var n,c,d=i(s(t)),f=o(r),p=d.length;return f<0||f>=p?e?"":void 0:(n=u(d,f))<55296||n>56319||f+1===p||(c=u(d,f+1))<56320||c>57343?e?a(d,f):n:e?l(d,f,f+2):c-56320+(n-55296<<10)+65536}};t.exports={codeAt:c(!1),charAt:c(!0)}},{"../internals/function-uncurry-this":319,"../internals/require-object-coercible":392,"../internals/to-integer-or-infinity":408,"../internals/to-string":416}],401:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=2147483647,i=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",u=RangeError,l=n(s.exec),c=Math.floor,d=String.fromCharCode,f=n("".charCodeAt),p=n([].join),h=n([].push),_=n("".replace),E=n("".split),g=n("".toLowerCase),m=function(e){return e+22+75*(e<26)},y=function(e,t,r){var n=0;for(e=r?c(e/700):e>>1,e+=c(e/t);e>455;)e=c(e/35),n+=36;return c(n+36*e/(e+38))},S=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=f(e,r++);if(o>=55296&&o<=56319&&r<n){var i=f(e,r++);56320==(64512&i)?h(t,((1023&o)<<10)+(1023&i)+65536):(h(t,o),r--)}else h(t,o)}return t}(e);var r,n,i=e.length,s=128,l=0,_=72;for(r=0;r<e.length;r++)(n=e[r])<128&&h(t,d(n));var E=t.length,g=E;for(E&&h(t,"-");g<i;){var S=o;for(r=0;r<e.length;r++)(n=e[r])>=s&&n<S&&(S=n);var T=g+1;if(S-s>c((o-l)/T))throw new u(a);for(l+=(S-s)*T,s=S,r=0;r<e.length;r++){if((n=e[r])<s&&++l>o)throw new u(a);if(n===s){for(var A=l,b=36;;){var O=b<=_?1:b>=_+26?26:b-_;if(A<O)break;var I=A-O,v=36-O;h(t,d(m(O+I%v))),A=c(I/v),b+=36}h(t,d(m(A))),_=y(l,T,g===E),l=0,g++}}l++,s++}return p(t,"")};t.exports=function(e){var t,r,n=[],o=E(_(g(e),s,"."),".");for(t=0;t<o.length;t++)r=o[t],h(n,l(i,r)?"xn--"+S(r):r);return p(n,".")}},{"../internals/function-uncurry-this":319}],402:[function(e,t,r){"use strict";var n=e("../internals/engine-v8-version"),o=e("../internals/fails"),i=e("../internals/global").String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},{"../internals/engine-v8-version":306,"../internals/fails":310,"../internals/global":325}],403:[function(e,t,r){"use strict";var n,o,i,s,a=e("../internals/global"),u=e("../internals/function-apply"),l=e("../internals/function-bind-context"),c=e("../internals/is-callable"),d=e("../internals/has-own-property"),f=e("../internals/fails"),p=e("../internals/html"),h=e("../internals/array-slice"),_=e("../internals/document-create-element"),E=e("../internals/validate-arguments-length"),g=e("../internals/engine-is-ios"),m=e("../internals/engine-is-node"),y=a.setImmediate,S=a.clearImmediate,T=a.process,A=a.Dispatch,b=a.Function,O=a.MessageChannel,I=a.String,v=0,N={},R="onreadystatechange";f((function(){n=a.location}));var C=function(e){if(d(N,e)){var t=N[e];delete N[e],t()}},D=function(e){return function(){C(e)}},w=function(e){C(e.data)},L=function(e){a.postMessage(I(e),n.protocol+"//"+n.host)};y&&S||(y=function(e){E(arguments.length,1);var t=c(e)?e:b(e),r=h(arguments,1);return N[++v]=function(){u(t,void 0,r)},o(v),v},S=function(e){delete N[e]},m?o=function(e){T.nextTick(D(e))}:A&&A.now?o=function(e){A.now(D(e))}:O&&!g?(s=(i=new O).port2,i.port1.onmessage=w,o=l(s.postMessage,s)):a.addEventListener&&c(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!f(L)?(o=L,a.addEventListener("message",w,!1)):o=R in _("script")?function(e){p.appendChild(_("script"))[R]=function(){p.removeChild(this),C(e)}}:function(e){setTimeout(D(e),0)}),t.exports={set:y,clear:S}},{"../internals/array-slice":274,"../internals/document-create-element":294,"../internals/engine-is-ios":302,"../internals/engine-is-node":303,"../internals/fails":310,"../internals/function-apply":312,"../internals/function-bind-context":313,"../internals/global":325,"../internals/has-own-property":326,"../internals/html":329,"../internals/is-callable":339,"../internals/validate-arguments-length":426}],404:[function(e,t,r){"use strict";var n=e("../internals/to-integer-or-infinity"),o=Math.max,i=Math.min;t.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},{"../internals/to-integer-or-infinity":408}],405:[function(e,t,r){"use strict";var n=e("../internals/to-primitive"),o=TypeError;t.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new o("Can't convert number to bigint");return BigInt(t)}},{"../internals/to-primitive":413}],406:[function(e,t,r){"use strict";var n=e("../internals/to-integer-or-infinity"),o=e("../internals/to-length"),i=RangeError;t.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw new i("Wrong length or index");return r}},{"../internals/to-integer-or-infinity":408,"../internals/to-length":409}],407:[function(e,t,r){"use strict";var n=e("../internals/indexed-object"),o=e("../internals/require-object-coercible");t.exports=function(e){return n(o(e))}},{"../internals/indexed-object":332,"../internals/require-object-coercible":392}],408:[function(e,t,r){"use strict";var n=e("../internals/math-trunc");t.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},{"../internals/math-trunc":360}],409:[function(e,t,r){"use strict";var n=e("../internals/to-integer-or-infinity"),o=Math.min;t.exports=function(e){var t=n(e);return t>0?o(t,9007199254740991):0}},{"../internals/to-integer-or-infinity":408}],410:[function(e,t,r){"use strict";var n=e("../internals/require-object-coercible"),o=Object;t.exports=function(e){return o(n(e))}},{"../internals/require-object-coercible":392}],411:[function(e,t,r){"use strict";var n=e("../internals/to-positive-integer"),o=RangeError;t.exports=function(e,t){var r=n(e);if(r%t)throw new o("Wrong offset");return r}},{"../internals/to-positive-integer":412}],412:[function(e,t,r){"use strict";var n=e("../internals/to-integer-or-infinity"),o=RangeError;t.exports=function(e){var t=n(e);if(t<0)throw new o("The argument can't be less than 0");return t}},{"../internals/to-integer-or-infinity":408}],413:[function(e,t,r){"use strict";var n=e("../internals/function-call"),o=e("../internals/is-object"),i=e("../internals/is-symbol"),s=e("../internals/get-method"),a=e("../internals/ordinary-to-primitive"),u=e("../internals/well-known-symbol"),l=TypeError,c=u("toPrimitive");t.exports=function(e,t){if(!o(e)||i(e))return e;var r,u=s(e,c);if(u){if(void 0===t&&(t="default"),r=n(u,e,t),!o(r)||i(r))return r;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},{"../internals/function-call":315,"../internals/get-method":323,"../internals/is-object":344,"../internals/is-symbol":348,"../internals/ordinary-to-primitive":376,"../internals/well-known-symbol":428}],414:[function(e,t,r){"use strict";var n=e("../internals/to-primitive"),o=e("../internals/is-symbol");t.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},{"../internals/is-symbol":348,"../internals/to-primitive":413}],415:[function(e,t,r){"use strict";var n={};n[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(n)},{"../internals/well-known-symbol":428}],416:[function(e,t,r){"use strict";var n=e("../internals/classof"),o=String;t.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},{"../internals/classof":281}],417:[function(e,t,r){"use strict";var n=Math.round;t.exports=function(e){var t=n(e);return t<0?0:t>255?255:255&t}},{}],418:[function(e,t,r){"use strict";var n=String;t.exports=function(e){try{return n(e)}catch(e){return"Object"}}},{}],419:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/global"),i=e("../internals/function-call"),s=e("../internals/descriptors"),a=e("../internals/typed-array-constructors-require-wrappers"),u=e("../internals/array-buffer-view-core"),l=e("../internals/array-buffer"),c=e("../internals/an-instance"),d=e("../internals/create-property-descriptor"),f=e("../internals/create-non-enumerable-property"),p=e("../internals/is-integral-number"),h=e("../internals/to-length"),_=e("../internals/to-index"),E=e("../internals/to-offset"),g=e("../internals/to-uint8-clamped"),m=e("../internals/to-property-key"),y=e("../internals/has-own-property"),S=e("../internals/classof"),T=e("../internals/is-object"),A=e("../internals/is-symbol"),b=e("../internals/object-create"),O=e("../internals/object-is-prototype-of"),I=e("../internals/object-set-prototype-of"),v=e("../internals/object-get-own-property-names").f,N=e("../internals/typed-array-from"),R=e("../internals/array-iteration").forEach,C=e("../internals/set-species"),D=e("../internals/define-built-in-accessor"),w=e("../internals/object-define-property"),L=e("../internals/object-get-own-property-descriptor"),P=e("../internals/array-from-constructor-and-list"),M=e("../internals/internal-state"),U=e("../internals/inherit-if-required"),j=M.get,k=M.set,x=M.enforce,F=w.f,B=L.f,G=o.RangeError,V=l.ArrayBuffer,H=V.prototype,W=l.DataView,Y=u.NATIVE_ARRAY_BUFFER_VIEWS,K=u.TYPED_ARRAY_TAG,z=u.TypedArray,q=u.TypedArrayPrototype,$=u.isTypedArray,X="BYTES_PER_ELEMENT",J="Wrong length",Z=function(e,t){D(e,t,{configurable:!0,get:function(){return j(this)[t]}})},Q=function(e){var t;return O(H,e)||"ArrayBuffer"===(t=S(e))||"SharedArrayBuffer"===t},ee=function(e,t){return $(e)&&!A(t)&&t in e&&p(+t)&&t>=0},te=function(e,t){return t=m(t),ee(e,t)?d(2,e[t]):B(e,t)},re=function(e,t,r){return t=m(t),!(ee(e,t)&&T(r)&&y(r,"value"))||y(r,"get")||y(r,"set")||r.configurable||y(r,"writable")&&!r.writable||y(r,"enumerable")&&!r.enumerable?F(e,t,r):(e[t]=r.value,e)};s?(Y||(L.f=te,w.f=re,Z(q,"buffer"),Z(q,"byteOffset"),Z(q,"byteLength"),Z(q,"length")),n({target:"Object",stat:!0,forced:!Y},{getOwnPropertyDescriptor:te,defineProperty:re}),t.exports=function(e,t,r){var s=e.match(/\d+/)[0]/8,u=e+(r?"Clamped":"")+"Array",l="get"+e,d="set"+e,p=o[u],m=p,y=m&&m.prototype,S={},A=function(e,t){F(e,t,{get:function(){return function(e,t){var r=j(e);return r.view[l](t*s+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=j(e);o.view[d](t*s+o.byteOffset,r?g(n):n,!0)}(this,t,e)},enumerable:!0})};Y?a&&(m=t((function(e,t,r,n){return c(e,y),U(T(t)?Q(t)?void 0!==n?new p(t,E(r,s),n):void 0!==r?new p(t,E(r,s)):new p(t):$(t)?P(m,t):i(N,m,t):new p(_(t)),e,m)})),I&&I(m,z),R(v(p),(function(e){e in m||f(m,e,p[e])})),m.prototype=y):(m=t((function(e,t,r,n){c(e,y);var o,a,u,l=0,d=0;if(T(t)){if(!Q(t))return $(t)?P(m,t):i(N,m,t);o=t,d=E(r,s);var f=t.byteLength;if(void 0===n){if(f%s)throw new G(J);if((a=f-d)<0)throw new G(J)}else if((a=h(n)*s)+d>f)throw new G(J);u=a/s}else u=_(t),o=new V(a=u*s);for(k(e,{buffer:o,byteOffset:d,byteLength:a,length:u,view:new W(o)});l<u;)A(e,l++)})),I&&I(m,z),y=m.prototype=b(q)),y.constructor!==m&&f(y,"constructor",m),x(y).TypedArrayConstructor=m,K&&f(y,K,u);var O=m!==p;S[u]=m,n({global:!0,constructor:!0,forced:O,sham:!Y},S),X in m||f(m,X,s),X in y||f(y,X,s),C(u)}):t.exports=function(){}},{"../internals/an-instance":262,"../internals/array-buffer":266,"../internals/array-buffer-view-core":265,"../internals/array-from-constructor-and-list":268,"../internals/array-iteration":271,"../internals/classof":281,"../internals/create-non-enumerable-property":285,"../internals/create-property-descriptor":286,"../internals/define-built-in-accessor":288,"../internals/descriptors":293,"../internals/export":309,"../internals/function-call":315,"../internals/global":325,"../internals/has-own-property":326,"../internals/inherit-if-required":333,"../internals/internal-state":335,"../internals/is-integral-number":342,"../internals/is-object":344,"../internals/is-symbol":348,"../internals/object-create":364,"../internals/object-define-property":366,"../internals/object-get-own-property-descriptor":367,"../internals/object-get-own-property-names":368,"../internals/object-is-prototype-of":371,"../internals/object-set-prototype-of":375,"../internals/set-species":394,"../internals/to-index":406,"../internals/to-length":409,"../internals/to-offset":411,"../internals/to-property-key":414,"../internals/to-uint8-clamped":417,"../internals/typed-array-constructors-require-wrappers":420,"../internals/typed-array-from":421}],420:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/fails"),i=e("../internals/check-correctness-of-iteration"),s=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,u=n.Int8Array;t.exports=!s||!o((function(){u(1)}))||!o((function(){new u(-1)}))||!i((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||o((function(){return 1!==new u(new a(2),1,void 0).length}))},{"../internals/array-buffer-view-core":265,"../internals/check-correctness-of-iteration":279,"../internals/fails":310,"../internals/global":325}],421:[function(e,t,r){"use strict";var n=e("../internals/function-bind-context"),o=e("../internals/function-call"),i=e("../internals/a-constructor"),s=e("../internals/to-object"),a=e("../internals/length-of-array-like"),u=e("../internals/get-iterator"),l=e("../internals/get-iterator-method"),c=e("../internals/is-array-iterator-method"),d=e("../internals/is-big-int-array"),f=e("../internals/array-buffer-view-core").aTypedArrayConstructor,p=e("../internals/to-big-int");t.exports=function(e){var t,r,h,_,E,g,m,y,S=i(this),T=s(e),A=arguments.length,b=A>1?arguments[1]:void 0,O=void 0!==b,I=l(T);if(I&&!c(I))for(y=(m=u(T,I)).next,T=[];!(g=o(y,m)).done;)T.push(g.value);for(O&&A>2&&(b=n(b,arguments[2])),r=a(T),h=new(f(S))(r),_=d(h),t=0;r>t;t++)E=O?b(T[t],t):T[t],h[t]=_?p(E):+E;return h}},{"../internals/a-constructor":258,"../internals/array-buffer-view-core":265,"../internals/function-bind-context":313,"../internals/function-call":315,"../internals/get-iterator":322,"../internals/get-iterator-method":321,"../internals/is-array-iterator-method":336,"../internals/is-big-int-array":338,"../internals/length-of-array-like":355,"../internals/to-big-int":405,"../internals/to-object":410}],422:[function(e,t,r){"use strict";var n=e("../internals/function-uncurry-this"),o=0,i=Math.random(),s=n(1..toString);t.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},{"../internals/function-uncurry-this":319}],423:[function(e,t,r){"use strict";var n=e("../internals/fails"),o=e("../internals/well-known-symbol"),i=e("../internals/descriptors"),s=e("../internals/is-pure"),a=o("iterator");t.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),r.delete("a",2),r.delete("b",void 0),s&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(s||!i)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},{"../internals/descriptors":293,"../internals/fails":310,"../internals/is-pure":346,"../internals/well-known-symbol":428}],424:[function(e,t,r){"use strict";var n=e("../internals/symbol-constructor-detection");t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/symbol-constructor-detection":402}],425:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/fails");t.exports=n&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},{"../internals/descriptors":293,"../internals/fails":310}],426:[function(e,t,r){"use strict";var n=TypeError;t.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},{}],427:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/is-callable"),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},{"../internals/global":325,"../internals/is-callable":339}],428:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/shared"),i=e("../internals/has-own-property"),s=e("../internals/uid"),a=e("../internals/symbol-constructor-detection"),u=e("../internals/use-symbol-as-uid"),l=n.Symbol,c=o("wks"),d=u?l.for||l:l&&l.withoutSetter||s;t.exports=function(e){return i(c,e)||(c[e]=a&&i(l,e)?l[e]:d("Symbol."+e)),c[e]}},{"../internals/global":325,"../internals/has-own-property":326,"../internals/shared":398,"../internals/symbol-constructor-detection":402,"../internals/uid":422,"../internals/use-symbol-as-uid":424}],429:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-includes").includes,i=e("../internals/fails"),s=e("../internals/add-to-unscopables");n({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},{"../internals/add-to-unscopables":260,"../internals/array-includes":270,"../internals/export":309,"../internals/fails":310}],430:[function(e,t,r){"use strict";var n=e("../internals/to-indexed-object"),o=e("../internals/add-to-unscopables"),i=e("../internals/iterators"),s=e("../internals/internal-state"),a=e("../internals/object-define-property").f,u=e("../internals/iterator-define"),l=e("../internals/create-iter-result-object"),c=e("../internals/is-pure"),d=e("../internals/descriptors"),f="Array Iterator",p=s.set,h=s.getterFor(f);t.exports=u(Array,"Array",(function(e,t){p(this,{type:f,target:n(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=void 0,l(void 0,!0);switch(e.kind){case"keys":return l(r,!1);case"values":return l(t[r],!1)}return l([r,t[r]],!1)}),"values");var _=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!c&&d&&"values"!==_.name)try{a(_,"name",{value:"values"})}catch(e){}},{"../internals/add-to-unscopables":260,"../internals/create-iter-result-object":284,"../internals/descriptors":293,"../internals/internal-state":335,"../internals/is-pure":346,"../internals/iterator-define":352,"../internals/iterators":354,"../internals/object-define-property":366,"../internals/to-indexed-object":407}],431:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-reduce").left,i=e("../internals/array-method-is-strict"),s=e("../internals/engine-v8-version");n({target:"Array",proto:!0,forced:!e("../internals/engine-is-node")&&s>79&&s<83||!i("reduce")},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},{"../internals/array-method-is-strict":272,"../internals/array-reduce":273,"../internals/engine-is-node":303,"../internals/engine-v8-version":306,"../internals/export":309}],432:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/function-uncurry-this"),i=e("../internals/a-callable"),s=e("../internals/to-object"),a=e("../internals/length-of-array-like"),u=e("../internals/delete-property-or-throw"),l=e("../internals/to-string"),c=e("../internals/fails"),d=e("../internals/array-sort"),f=e("../internals/array-method-is-strict"),p=e("../internals/engine-ff-version"),h=e("../internals/engine-is-ie-or-edge"),_=e("../internals/engine-v8-version"),E=e("../internals/engine-webkit-version"),g=[],m=o(g.sort),y=o(g.push),S=c((function(){g.sort(void 0)})),T=c((function(){g.sort(null)})),A=f("sort"),b=!c((function(){if(_)return _<70;if(!(p&&p>3)){if(h)return!0;if(E)return E<603;var e,t,r,n,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)g.push({k:t+n,v:r})}for(g.sort((function(e,t){return t.v-e.v})),n=0;n<g.length;n++)t=g[n].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:S||!T||!A||!b},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(b)return void 0===e?m(t):m(t,e);var r,n,o=[],c=a(t);for(n=0;n<c;n++)n in t&&y(o,t[n]);for(d(o,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:l(t)>l(r)?1:-1}}(e)),r=a(o),n=0;n<r;)t[n]=o[n++];for(;n<c;)u(t,n++);return t}})},{"../internals/a-callable":257,"../internals/array-method-is-strict":272,"../internals/array-sort":275,"../internals/delete-property-or-throw":292,"../internals/engine-ff-version":297,"../internals/engine-is-ie-or-edge":300,"../internals/engine-v8-version":306,"../internals/engine-webkit-version":307,"../internals/export":309,"../internals/fails":310,"../internals/function-uncurry-this":319,"../internals/length-of-array-like":355,"../internals/to-object":410,"../internals/to-string":416}],433:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/global");n({global:!0,forced:o.globalThis!==o},{globalThis:o})},{"../internals/export":309,"../internals/global":325}],434:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/function-call"),i=e("../internals/a-callable"),s=e("../internals/new-promise-capability"),a=e("../internals/perform"),u=e("../internals/iterate");n({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{all:function(e){var t=this,r=s.f(t),n=r.resolve,l=r.reject,c=a((function(){var r=i(t.resolve),s=[],a=0,c=1;u(e,(function(e){var i=a++,u=!1;c++,o(r,t,e).then((function(e){u||(u=!0,s[i]=e,--c||n(s))}),l)})),--c||n(s)}));return c.error&&l(c.value),r.promise}})},{"../internals/a-callable":257,"../internals/export":309,"../internals/function-call":315,"../internals/iterate":349,"../internals/new-promise-capability":362,"../internals/perform":378,"../internals/promise-statics-incorrect-iteration":382}],435:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/is-pure"),i=e("../internals/promise-constructor-detection").CONSTRUCTOR,s=e("../internals/promise-native-constructor"),a=e("../internals/get-built-in"),u=e("../internals/is-callable"),l=e("../internals/define-built-in"),c=s&&s.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(e){return this.then(void 0,e)}}),!o&&u(s)){var d=a("Promise").prototype.catch;c.catch!==d&&l(c,"catch",d,{unsafe:!0})}},{"../internals/define-built-in":289,"../internals/export":309,"../internals/get-built-in":320,"../internals/is-callable":339,"../internals/is-pure":346,"../internals/promise-constructor-detection":379,"../internals/promise-native-constructor":380}],436:[function(e,t,r){"use strict";var n,o,i,s=e("../internals/export"),a=e("../internals/is-pure"),u=e("../internals/engine-is-node"),l=e("../internals/global"),c=e("../internals/function-call"),d=e("../internals/define-built-in"),f=e("../internals/object-set-prototype-of"),p=e("../internals/set-to-string-tag"),h=e("../internals/set-species"),_=e("../internals/a-callable"),E=e("../internals/is-callable"),g=e("../internals/is-object"),m=e("../internals/an-instance"),y=e("../internals/species-constructor"),S=e("../internals/task").set,T=e("../internals/microtask"),A=e("../internals/host-report-errors"),b=e("../internals/perform"),O=e("../internals/queue"),I=e("../internals/internal-state"),v=e("../internals/promise-native-constructor"),N=e("../internals/promise-constructor-detection"),R=e("../internals/new-promise-capability"),C="Promise",D=N.CONSTRUCTOR,w=N.REJECTION_EVENT,L=N.SUBCLASSING,P=I.getterFor(C),M=I.set,U=v&&v.prototype,j=v,k=U,x=l.TypeError,F=l.document,B=l.process,G=R.f,V=G,H=!!(F&&F.createEvent&&l.dispatchEvent),W="unhandledrejection",Y=function(e){var t;return!(!g(e)||!E(t=e.then))&&t},K=function(e,t){var r,n,o,i=t.value,s=1===t.state,a=s?e.ok:e.fail,u=e.resolve,l=e.reject,d=e.domain;try{a?(s||(2===t.rejection&&J(t),t.rejection=1),!0===a?r=i:(d&&d.enter(),r=a(i),d&&(d.exit(),o=!0)),r===e.promise?l(new x("Promise-chain cycle")):(n=Y(r))?c(n,r,u,l):u(r)):l(i)}catch(e){d&&!o&&d.exit(),l(e)}},z=function(e,t){e.notified||(e.notified=!0,T((function(){for(var r,n=e.reactions;r=n.get();)K(r,e);e.notified=!1,t&&!e.rejection&&$(e)})))},q=function(e,t,r){var n,o;H?((n=F.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),l.dispatchEvent(n)):n={promise:t,reason:r},!w&&(o=l["on"+e])?o(n):e===W&&A("Unhandled promise rejection",r)},$=function(e){c(S,l,(function(){var t,r=e.facade,n=e.value;if(X(e)&&(t=b((function(){u?B.emit("unhandledRejection",n,r):q(W,r,n)})),e.rejection=u||X(e)?2:1,t.error))throw t.value}))},X=function(e){return 1!==e.rejection&&!e.parent},J=function(e){c(S,l,(function(){var t=e.facade;u?B.emit("rejectionHandled",t):q("rejectionhandled",t,e.value)}))},Z=function(e,t,r){return function(n){e(t,n,r)}},Q=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,z(e,!0))},ee=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new x("Promise can't be resolved itself");var n=Y(t);n?T((function(){var r={done:!1};try{c(n,t,Z(ee,r,e),Z(Q,r,e))}catch(t){Q(r,t,e)}})):(e.value=t,e.state=1,z(e,!1))}catch(t){Q({done:!1},t,e)}}};if(D&&(k=(j=function(e){m(this,k),_(e),c(n,this);var t=P(this);try{e(Z(ee,t),Z(Q,t))}catch(e){Q(t,e)}}).prototype,(n=function(e){M(this,{type:C,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=d(k,"then",(function(e,t){var r=P(this),n=G(y(this,j));return r.parent=!0,n.ok=!E(e)||e,n.fail=E(t)&&t,n.domain=u?B.domain:void 0,0===r.state?r.reactions.add(n):T((function(){K(n,r)})),n.promise})),o=function(){var e=new n,t=P(e);this.promise=e,this.resolve=Z(ee,t),this.reject=Z(Q,t)},R.f=G=function(e){return e===j||undefined===e?new o(e):V(e)},!a&&E(v)&&U!==Object.prototype)){i=U.then,L||d(U,"then",(function(e,t){var r=this;return new j((function(e,t){c(i,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete U.constructor}catch(e){}f&&f(U,k)}s({global:!0,constructor:!0,wrap:!0,forced:D},{Promise:j}),p(j,C,!1,!0),h(C)},{"../internals/a-callable":257,"../internals/an-instance":262,"../internals/define-built-in":289,"../internals/engine-is-node":303,"../internals/export":309,"../internals/function-call":315,"../internals/global":325,"../internals/host-report-errors":328,"../internals/internal-state":335,"../internals/is-callable":339,"../internals/is-object":344,"../internals/is-pure":346,"../internals/microtask":361,"../internals/new-promise-capability":362,"../internals/object-set-prototype-of":375,"../internals/perform":378,"../internals/promise-constructor-detection":379,"../internals/promise-native-constructor":380,"../internals/queue":384,"../internals/set-species":394,"../internals/set-to-string-tag":395,"../internals/species-constructor":399,"../internals/task":403}],437:[function(e,t,r){"use strict";e("../modules/es.promise.constructor"),e("../modules/es.promise.all"),e("../modules/es.promise.catch"),e("../modules/es.promise.race"),e("../modules/es.promise.reject"),e("../modules/es.promise.resolve")},{"../modules/es.promise.all":434,"../modules/es.promise.catch":435,"../modules/es.promise.constructor":436,"../modules/es.promise.race":438,"../modules/es.promise.reject":439,"../modules/es.promise.resolve":440}],438:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/function-call"),i=e("../internals/a-callable"),s=e("../internals/new-promise-capability"),a=e("../internals/perform"),u=e("../internals/iterate");n({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{race:function(e){var t=this,r=s.f(t),n=r.reject,l=a((function(){var s=i(t.resolve);u(e,(function(e){o(s,t,e).then(r.resolve,n)}))}));return l.error&&n(l.value),r.promise}})},{"../internals/a-callable":257,"../internals/export":309,"../internals/function-call":315,"../internals/iterate":349,"../internals/new-promise-capability":362,"../internals/perform":378,"../internals/promise-statics-incorrect-iteration":382}],439:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/new-promise-capability");n({target:"Promise",stat:!0,forced:e("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(e){var t=o.f(this);return(0,t.reject)(e),t.promise}})},{"../internals/export":309,"../internals/new-promise-capability":362,"../internals/promise-constructor-detection":379}],440:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/get-built-in"),i=e("../internals/is-pure"),s=e("../internals/promise-native-constructor"),a=e("../internals/promise-constructor-detection").CONSTRUCTOR,u=e("../internals/promise-resolve"),l=o("Promise"),c=i&&!a;n({target:"Promise",stat:!0,forced:i||a},{resolve:function(e){return u(c&&this===l?s:this,e)}})},{"../internals/export":309,"../internals/get-built-in":320,"../internals/is-pure":346,"../internals/promise-constructor-detection":379,"../internals/promise-native-constructor":380,"../internals/promise-resolve":381}],441:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/global"),i=e("../internals/function-uncurry-this"),s=e("../internals/is-forced"),a=e("../internals/inherit-if-required"),u=e("../internals/create-non-enumerable-property"),l=e("../internals/object-create"),c=e("../internals/object-get-own-property-names").f,d=e("../internals/object-is-prototype-of"),f=e("../internals/is-regexp"),p=e("../internals/to-string"),h=e("../internals/regexp-get-flags"),_=e("../internals/regexp-sticky-helpers"),E=e("../internals/proxy-accessor"),g=e("../internals/define-built-in"),m=e("../internals/fails"),y=e("../internals/has-own-property"),S=e("../internals/internal-state").enforce,T=e("../internals/set-species"),A=e("../internals/well-known-symbol"),b=e("../internals/regexp-unsupported-dot-all"),O=e("../internals/regexp-unsupported-ncg"),I=A("match"),v=o.RegExp,N=v.prototype,R=o.SyntaxError,C=i(N.exec),D=i("".charAt),w=i("".replace),L=i("".indexOf),P=i("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,U=/a/g,j=/a/g,k=new v(U)!==U,x=_.MISSED_STICKY,F=_.UNSUPPORTED_Y,B=n&&(!k||x||b||O||m((function(){return j[I]=!1,v(U)!==U||v(j)===j||"/a/i"!==String(v(U,"i"))})));if(s("RegExp",B)){for(var G=function(e,t){var r,n,o,i,s,c,_=d(N,this),E=f(e),g=void 0===t,m=[],T=e;if(!_&&E&&g&&e.constructor===G)return e;if((E||d(N,e))&&(e=e.source,g&&(t=h(T))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),T=e,b&&"dotAll"in U&&(n=!!t&&L(t,"s")>-1)&&(t=w(t,/s/g,"")),r=t,x&&"sticky"in U&&(o=!!t&&L(t,"y")>-1)&&F&&(t=w(t,/y/g,"")),O&&(i=function(e){for(var t,r=e.length,n=0,o="",i=[],s=l(null),a=!1,u=!1,c=0,d="";n<=r;n++){if("\\"===(t=D(e,n)))t+=D(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:C(M,P(e,n+1))&&(n+=2,u=!0),o+=t,c++;continue;case">"===t&&u:if(""===d||y(s,d))throw new R("Invalid capture group name");s[d]=!0,i[i.length]=[d,c],u=!1,d="";continue}u?d+=t:o+=t}return[o,i]}(e),e=i[0],m=i[1]),s=a(v(e,t),_?this:N,G),(n||o||m.length)&&(c=S(s),n&&(c.dotAll=!0,c.raw=G(function(e){for(var t,r=e.length,n=0,o="",i=!1;n<=r;n++)"\\"!==(t=D(e,n))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+D(e,++n);return o}(e),r)),o&&(c.sticky=!0),m.length&&(c.groups=m)),e!==T)try{u(s,"source",""===T?"(?:)":T)}catch(e){}return s},V=c(v),H=0;V.length>H;)E(G,v,V[H++]);N.constructor=G,G.prototype=N,g(o,"RegExp",G,{constructor:!0})}T("RegExp")},{"../internals/create-non-enumerable-property":285,"../internals/define-built-in":289,"../internals/descriptors":293,"../internals/fails":310,"../internals/function-uncurry-this":319,"../internals/global":325,"../internals/has-own-property":326,"../internals/inherit-if-required":333,"../internals/internal-state":335,"../internals/is-forced":341,"../internals/is-regexp":347,"../internals/object-create":364,"../internals/object-get-own-property-names":368,"../internals/object-is-prototype-of":371,"../internals/proxy-accessor":383,"../internals/regexp-get-flags":388,"../internals/regexp-sticky-helpers":389,"../internals/regexp-unsupported-dot-all":390,"../internals/regexp-unsupported-ncg":391,"../internals/set-species":394,"../internals/to-string":416,"../internals/well-known-symbol":428}],442:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/regexp-exec");n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},{"../internals/export":309,"../internals/regexp-exec":386}],443:[function(e,t,r){"use strict";var n=e("../internals/string-multibyte").charAt,o=e("../internals/to-string"),i=e("../internals/internal-state"),s=e("../internals/iterator-define"),a=e("../internals/create-iter-result-object"),u="String Iterator",l=i.set,c=i.getterFor(u);s(String,"String",(function(e){l(this,{type:u,string:o(e),index:0})}),(function(){var e,t=c(this),r=t.string,o=t.index;return o>=r.length?a(void 0,!0):(e=n(r,o),t.index+=e.length,a(e,!1))}))},{"../internals/create-iter-result-object":284,"../internals/internal-state":335,"../internals/iterator-define":352,"../internals/string-multibyte":400,"../internals/to-string":416}],444:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/function-call"),i=e("../internals/function-uncurry-this-clause"),s=e("../internals/iterator-create-constructor"),a=e("../internals/create-iter-result-object"),u=e("../internals/require-object-coercible"),l=e("../internals/to-length"),c=e("../internals/to-string"),d=e("../internals/an-object"),f=e("../internals/is-null-or-undefined"),p=e("../internals/classof-raw"),h=e("../internals/is-regexp"),_=e("../internals/regexp-get-flags"),E=e("../internals/get-method"),g=e("../internals/define-built-in"),m=e("../internals/fails"),y=e("../internals/well-known-symbol"),S=e("../internals/species-constructor"),T=e("../internals/advance-string-index"),A=e("../internals/regexp-exec-abstract"),b=e("../internals/internal-state"),O=e("../internals/is-pure"),I=y("matchAll"),v="RegExp String",N=v+" Iterator",R=b.set,C=b.getterFor(N),D=RegExp.prototype,w=TypeError,L=i("".indexOf),P=i("".matchAll),M=!!P&&!m((function(){P("a",/./)})),U=s((function(e,t,r,n){R(this,{type:N,regexp:e,string:t,global:r,unicode:n,done:!1})}),v,(function(){var e=C(this);if(e.done)return a(void 0,!0);var t=e.regexp,r=e.string,n=A(t,r);return null===n?(e.done=!0,a(void 0,!0)):e.global?(""===c(n[0])&&(t.lastIndex=T(r,l(t.lastIndex),e.unicode)),a(n,!1)):(e.done=!0,a(n,!1))})),j=function(e){var t,r,n,o=d(this),i=c(e),s=S(o,RegExp),a=c(_(o));return t=new s(s===RegExp?o.source:o,a),r=!!~L(a,"g"),n=!!~L(a,"u"),t.lastIndex=l(o.lastIndex),new U(t,i,r,n)};n({target:"String",proto:!0,forced:M},{matchAll:function(e){var t,r,n,i,s=u(this);if(f(e)){if(M)return P(s,e)}else{if(h(e)&&(t=c(u(_(e))),!~L(t,"g")))throw new w("`.matchAll` does not allow non-global regexes");if(M)return P(s,e);if(void 0===(n=E(e,I))&&O&&"RegExp"===p(e)&&(n=j),n)return o(n,e,s)}return r=c(s),i=new RegExp(e,"g"),O?o(j,i,r):i[I](r)}}),O||I in D||g(D,I,j)},{"../internals/advance-string-index":261,"../internals/an-object":263,"../internals/classof-raw":280,"../internals/create-iter-result-object":284,"../internals/define-built-in":289,"../internals/export":309,"../internals/fails":310,"../internals/function-call":315,"../internals/function-uncurry-this-clause":318,"../internals/get-method":323,"../internals/internal-state":335,"../internals/is-null-or-undefined":343,"../internals/is-pure":346,"../internals/is-regexp":347,"../internals/iterator-create-constructor":351,"../internals/regexp-exec-abstract":385,"../internals/regexp-get-flags":388,"../internals/require-object-coercible":392,"../internals/species-constructor":399,"../internals/to-length":409,"../internals/to-string":416,"../internals/well-known-symbol":428}],445:[function(e,t,r){"use strict";var n=e("../internals/function-apply"),o=e("../internals/function-call"),i=e("../internals/function-uncurry-this"),s=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/fails"),u=e("../internals/an-object"),l=e("../internals/is-callable"),c=e("../internals/is-null-or-undefined"),d=e("../internals/to-integer-or-infinity"),f=e("../internals/to-length"),p=e("../internals/to-string"),h=e("../internals/require-object-coercible"),_=e("../internals/advance-string-index"),E=e("../internals/get-method"),g=e("../internals/get-substitution"),m=e("../internals/regexp-exec-abstract"),y=e("../internals/well-known-symbol")("replace"),S=Math.max,T=Math.min,A=i([].concat),b=i([].push),O=i("".indexOf),I=i("".slice),v="$0"==="a".replace(/./,"$0"),N=!!/./[y]&&""===/./[y]("a","$0");s("replace",(function(e,t,r){var i=N?"$":"$0";return[function(e,r){var n=h(this),i=c(e)?void 0:E(e,y);return i?o(i,e,n,r):o(t,p(n),e,r)},function(e,o){var s=u(this),a=p(e);if("string"==typeof o&&-1===O(o,i)&&-1===O(o,"$<")){var c=r(t,s,a,o);if(c.done)return c.value}var h=l(o);h||(o=p(o));var E,y=s.global;y&&(E=s.unicode,s.lastIndex=0);for(var v,N=[];null!==(v=m(s,a))&&(b(N,v),y);){""===p(v[0])&&(s.lastIndex=_(a,f(s.lastIndex),E))}for(var R,C="",D=0,w=0;w<N.length;w++){for(var L,P=p((v=N[w])[0]),M=S(T(d(v.index),a.length),0),U=[],j=1;j<v.length;j++)b(U,void 0===(R=v[j])?R:String(R));var k=v.groups;if(h){var x=A([P],U,M,a);void 0!==k&&b(x,k),L=p(n(o,void 0,x))}else L=g(P,a,M,U,k,o);M>=D&&(C+=I(a,D,M)+L,D=M+P.length)}return C+I(a,D)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!v||N)},{"../internals/advance-string-index":261,"../internals/an-object":263,"../internals/fails":310,"../internals/fix-regexp-well-known-symbol-logic":311,"../internals/function-apply":312,"../internals/function-call":315,"../internals/function-uncurry-this":319,"../internals/get-method":323,"../internals/get-substitution":324,"../internals/is-callable":339,"../internals/is-null-or-undefined":343,"../internals/regexp-exec-abstract":385,"../internals/require-object-coercible":392,"../internals/to-integer-or-infinity":408,"../internals/to-length":409,"../internals/to-string":416,"../internals/well-known-symbol":428}],446:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/descriptors"),i=e("../internals/global"),s=e("../internals/function-uncurry-this"),a=e("../internals/has-own-property"),u=e("../internals/is-callable"),l=e("../internals/object-is-prototype-of"),c=e("../internals/to-string"),d=e("../internals/define-built-in-accessor"),f=e("../internals/copy-constructor-properties"),p=i.Symbol,h=p&&p.prototype;if(o&&u(p)&&(!("description"in h)||void 0!==p().description)){var _={},E=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=l(h,this)?new p(e):void 0===e?p():p(e);return""===e&&(_[t]=!0),t};f(E,p),E.prototype=h,h.constructor=E;var g="Symbol(description detection)"===String(p("description detection")),m=s(h.valueOf),y=s(h.toString),S=/^Symbol\((.*)\)[^)]+$/,T=s("".replace),A=s("".slice);d(h,"description",{configurable:!0,get:function(){var e=m(this);if(a(_,e))return"";var t=y(e),r=g?A(t,7,-1):T(t,S,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:E})}},{"../internals/copy-constructor-properties":282,"../internals/define-built-in-accessor":288,"../internals/descriptors":293,"../internals/export":309,"../internals/function-uncurry-this":319,"../internals/global":325,"../internals/has-own-property":326,"../internals/is-callable":339,"../internals/object-is-prototype-of":371,"../internals/to-string":416}],447:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-fill"),i=e("../internals/to-big-int"),s=e("../internals/classof"),a=e("../internals/function-call"),u=e("../internals/function-uncurry-this"),l=e("../internals/fails"),c=n.aTypedArray,d=n.exportTypedArrayMethod,f=u("".slice);d("fill",(function(e){var t=arguments.length;c(this);var r="Big"===f(s(this),0,3)?i(e):+e;return a(o,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),l((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},{"../internals/array-buffer-view-core":265,"../internals/array-fill":267,"../internals/classof":281,"../internals/fails":310,"../internals/function-call":315,"../internals/function-uncurry-this":319,"../internals/to-big-int":405}],448:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/function-call"),i=e("../internals/array-buffer-view-core"),s=e("../internals/length-of-array-like"),a=e("../internals/to-offset"),u=e("../internals/to-object"),l=e("../internals/fails"),c=n.RangeError,d=n.Int8Array,f=d&&d.prototype,p=f&&f.set,h=i.aTypedArray,_=i.exportTypedArrayMethod,E=!l((function(){var e=new Uint8ClampedArray(2);return o(p,e,{length:1,0:3},1),3!==e[1]})),g=E&&i.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));_("set",(function(e){h(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=u(e);if(E)return o(p,this,r,t);var n=this.length,i=s(r),l=0;if(i+t>n)throw new c("Wrong length");for(;l<i;)this[t+l]=r[l++]}),!E||g)},{"../internals/array-buffer-view-core":265,"../internals/fails":310,"../internals/function-call":315,"../internals/global":325,"../internals/length-of-array-like":355,"../internals/to-object":410,"../internals/to-offset":411}],449:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/function-uncurry-this-clause"),i=e("../internals/fails"),s=e("../internals/a-callable"),a=e("../internals/array-sort"),u=e("../internals/array-buffer-view-core"),l=e("../internals/engine-ff-version"),c=e("../internals/engine-is-ie-or-edge"),d=e("../internals/engine-v8-version"),f=e("../internals/engine-webkit-version"),p=u.aTypedArray,h=u.exportTypedArrayMethod,_=n.Uint16Array,E=_&&o(_.prototype.sort),g=!(!E||i((function(){E(new _(2),null)}))&&i((function(){E(new _(2),{})}))),m=!!E&&!i((function(){if(d)return d<74;if(l)return l<67;if(c)return!0;if(f)return f<602;var e,t,r=new _(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(E(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));h("sort",(function(e){return void 0!==e&&s(e),m?E(this,e):a(p(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!m||g)},{"../internals/a-callable":257,"../internals/array-buffer-view-core":265,"../internals/array-sort":275,"../internals/engine-ff-version":297,"../internals/engine-is-ie-or-edge":300,"../internals/engine-v8-version":306,"../internals/engine-webkit-version":307,"../internals/fails":310,"../internals/function-uncurry-this-clause":318,"../internals/global":325}],450:[function(e,t,r){"use strict";e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},{"../internals/typed-array-constructor":419}],451:[function(e,t,r){"use strict";e("../modules/es.global-this")},{"../modules/es.global-this":433}],452:[function(e,t,r){"use strict";e("../modules/es.string.match-all")},{"../modules/es.string.match-all":444}],453:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/dom-iterables"),i=e("../internals/dom-token-list-prototype"),s=e("../modules/es.array.iterator"),a=e("../internals/create-non-enumerable-property"),u=e("../internals/set-to-string-tag"),l=e("../internals/well-known-symbol")("iterator"),c=s.values,d=function(e,t){if(e){if(e[l]!==c)try{a(e,l,c)}catch(t){e[l]=c}if(u(e,t,!0),o[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var f in o)d(n[f]&&n[f].prototype,f);d(i,"DOMTokenList")},{"../internals/create-non-enumerable-property":285,"../internals/dom-iterables":295,"../internals/dom-token-list-prototype":296,"../internals/global":325,"../internals/set-to-string-tag":395,"../internals/well-known-symbol":428,"../modules/es.array.iterator":430}],454:[function(e,t,r){"use strict";e("../modules/es.array.iterator");var n=e("../internals/export"),o=e("../internals/global"),i=e("../internals/safe-get-built-in"),s=e("../internals/function-call"),a=e("../internals/function-uncurry-this"),u=e("../internals/descriptors"),l=e("../internals/url-constructor-detection"),c=e("../internals/define-built-in"),d=e("../internals/define-built-in-accessor"),f=e("../internals/define-built-ins"),p=e("../internals/set-to-string-tag"),h=e("../internals/iterator-create-constructor"),_=e("../internals/internal-state"),E=e("../internals/an-instance"),g=e("../internals/is-callable"),m=e("../internals/has-own-property"),y=e("../internals/function-bind-context"),S=e("../internals/classof"),T=e("../internals/an-object"),A=e("../internals/is-object"),b=e("../internals/to-string"),O=e("../internals/object-create"),I=e("../internals/create-property-descriptor"),v=e("../internals/get-iterator"),N=e("../internals/get-iterator-method"),R=e("../internals/create-iter-result-object"),C=e("../internals/validate-arguments-length"),D=e("../internals/well-known-symbol"),w=e("../internals/array-sort"),L=D("iterator"),P="URLSearchParams",M=P+"Iterator",U=_.set,j=_.getterFor(P),k=_.getterFor(M),x=i("fetch"),F=i("Request"),B=i("Headers"),G=F&&F.prototype,V=B&&B.prototype,H=o.RegExp,W=o.TypeError,Y=o.decodeURIComponent,K=o.encodeURIComponent,z=a("".charAt),q=a([].join),$=a([].push),X=a("".replace),J=a([].shift),Z=a([].splice),Q=a("".split),ee=a("".slice),te=/\+/g,re=Array(4),ne=function(e){return re[e-1]||(re[e-1]=H("((?:%[\\da-f]{2}){"+e+"})","gi"))},oe=function(e){try{return Y(e)}catch(t){return e}},ie=function(e){var t=X(e,te," "),r=4;try{return Y(t)}catch(e){for(;r;)t=X(t,ne(r--),oe);return t}},se=/[!'()~]|%20/g,ae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ue=function(e){return ae[e]},le=function(e){return X(K(e),se,ue)},ce=h((function(e,t){U(this,{type:M,target:j(e).entries,index:0,kind:t})}),P,(function(){var e=k(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=void 0,R(void 0,!0);var n=t[r];switch(e.kind){case"keys":return R(n.key,!1);case"values":return R(n.value,!1)}return R([n.key,n.value],!1)}),!0),de=function(e){this.entries=[],this.url=null,void 0!==e&&(A(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===z(e,0)?ee(e,1):e:b(e)))};de.prototype={type:P,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,o,i,a,u,l=this.entries,c=N(e);if(c)for(r=(t=v(e,c)).next;!(n=s(r,t)).done;){if(i=(o=v(T(n.value))).next,(a=s(i,o)).done||(u=s(i,o)).done||!s(i,o).done)throw new W("Expected sequence with length 2");$(l,{key:b(a.value),value:b(u.value)})}else for(var d in e)m(e,d)&&$(l,{key:d,value:b(e[d])})},parseQuery:function(e){if(e)for(var t,r,n=this.entries,o=Q(e,"&"),i=0;i<o.length;)(t=o[i++]).length&&(r=Q(t,"="),$(n,{key:ie(J(r)),value:ie(q(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],$(r,le(e.key)+"="+le(e.value));return q(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var fe=function(){E(this,pe);var e=U(this,new de(arguments.length>0?arguments[0]:void 0));u||(this.size=e.entries.length)},pe=fe.prototype;if(f(pe,{append:function(e,t){var r=j(this);C(arguments.length,2),$(r.entries,{key:b(e),value:b(t)}),u||this.length++,r.updateURL()},delete:function(e){for(var t=j(this),r=C(arguments.length,1),n=t.entries,o=b(e),i=r<2?void 0:arguments[1],s=void 0===i?i:b(i),a=0;a<n.length;){var l=n[a];if(l.key!==o||void 0!==s&&l.value!==s)a++;else if(Z(n,a,1),void 0!==s)break}u||(this.size=n.length),t.updateURL()},get:function(e){var t=j(this).entries;C(arguments.length,1);for(var r=b(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=j(this).entries;C(arguments.length,1);for(var r=b(e),n=[],o=0;o<t.length;o++)t[o].key===r&&$(n,t[o].value);return n},has:function(e){for(var t=j(this).entries,r=C(arguments.length,1),n=b(e),o=r<2?void 0:arguments[1],i=void 0===o?o:b(o),s=0;s<t.length;){var a=t[s++];if(a.key===n&&(void 0===i||a.value===i))return!0}return!1},set:function(e,t){var r=j(this);C(arguments.length,1);for(var n,o=r.entries,i=!1,s=b(e),a=b(t),l=0;l<o.length;l++)(n=o[l]).key===s&&(i?Z(o,l--,1):(i=!0,n.value=a));i||$(o,{key:s,value:a}),u||(this.size=o.length),r.updateURL()},sort:function(){var e=j(this);w(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=j(this).entries,n=y(e,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((t=r[o++]).value,t.key,this)},keys:function(){return new ce(this,"keys")},values:function(){return new ce(this,"values")},entries:function(){return new ce(this,"entries")}},{enumerable:!0}),c(pe,L,pe.entries,{name:"entries"}),c(pe,"toString",(function(){return j(this).serialize()}),{enumerable:!0}),u&&d(pe,"size",{get:function(){return j(this).entries.length},configurable:!0,enumerable:!0}),p(fe,P),n({global:!0,constructor:!0,forced:!l},{URLSearchParams:fe}),!l&&g(B)){var he=a(V.has),_e=a(V.set),Ee=function(e){if(A(e)){var t,r=e.body;if(S(r)===P)return t=e.headers?new B(e.headers):new B,he(t,"content-type")||_e(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),O(e,{body:I(0,b(r)),headers:I(0,t)})}return e};if(g(x)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return x(e,arguments.length>1?Ee(arguments[1]):{})}}),g(F)){var ge=function(e){return E(this,G),new F(e,arguments.length>1?Ee(arguments[1]):{})};G.constructor=ge,ge.prototype=G,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ge})}}t.exports={URLSearchParams:fe,getState:j}},{"../internals/an-instance":262,"../internals/an-object":263,"../internals/array-sort":275,"../internals/classof":281,"../internals/create-iter-result-object":284,"../internals/create-property-descriptor":286,"../internals/define-built-in":289,"../internals/define-built-in-accessor":288,"../internals/define-built-ins":290,"../internals/descriptors":293,"../internals/export":309,"../internals/function-bind-context":313,"../internals/function-call":315,"../internals/function-uncurry-this":319,"../internals/get-iterator":322,"../internals/get-iterator-method":321,"../internals/global":325,"../internals/has-own-property":326,"../internals/internal-state":335,"../internals/is-callable":339,"../internals/is-object":344,"../internals/iterator-create-constructor":351,"../internals/object-create":364,"../internals/safe-get-built-in":393,"../internals/set-to-string-tag":395,"../internals/to-string":416,"../internals/url-constructor-detection":423,"../internals/validate-arguments-length":426,"../internals/well-known-symbol":428,"../modules/es.array.iterator":430}],455:[function(e,t,r){"use strict";e("../modules/web.url-search-params.constructor")},{"../modules/web.url-search-params.constructor":454}],456:[function(e,t,r){"use strict";e("../modules/es.string.iterator");var n,o=e("../internals/export"),i=e("../internals/descriptors"),s=e("../internals/url-constructor-detection"),a=e("../internals/global"),u=e("../internals/function-bind-context"),l=e("../internals/function-uncurry-this"),c=e("../internals/define-built-in"),d=e("../internals/define-built-in-accessor"),f=e("../internals/an-instance"),p=e("../internals/has-own-property"),h=e("../internals/object-assign"),_=e("../internals/array-from"),E=e("../internals/array-slice"),g=e("../internals/string-multibyte").codeAt,m=e("../internals/string-punycode-to-ascii"),y=e("../internals/to-string"),S=e("../internals/set-to-string-tag"),T=e("../internals/validate-arguments-length"),A=e("../modules/web.url-search-params.constructor"),b=e("../internals/internal-state"),O=b.set,I=b.getterFor("URL"),v=A.URLSearchParams,N=A.getState,R=a.URL,C=a.TypeError,D=a.parseInt,w=Math.floor,L=Math.pow,P=l("".charAt),M=l(/./.exec),U=l([].join),j=l(1..toString),k=l([].pop),x=l([].push),F=l("".replace),B=l([].shift),G=l("".split),V=l("".slice),H=l("".toLowerCase),W=l([].unshift),Y="Invalid scheme",K="Invalid host",z="Invalid port",q=/[a-z]/i,$=/[\d+-.a-z]/i,X=/\d/,J=/^0x/i,Z=/^[0-7]+$/,Q=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,re=/[\0\t\n\r #/:<>?@[\\\]^|]/,ne=/^[\u0000-\u0020]+/,oe=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ie=/[\t\n\r]/g,se=function(e){var t,r,n,o;if("number"==typeof e){for(t=[],r=0;r<4;r++)W(t,e%256),e=w(e/256);return U(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(o>r&&(t=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r&&(t=n,r=o),t}(e),r=0;r<8;r++)o&&0===e[r]||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=j(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},ae={},ue=h({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),le=h({},ue,{"#":1,"?":1,"{":1,"}":1}),ce=h({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),de=function(e,t){var r=g(e,0);return r>32&&r<127&&!p(t,e)?e:encodeURIComponent(e)},fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pe=function(e,t){var r;return 2===e.length&&M(q,P(e,0))&&(":"===(r=P(e,1))||!t&&"|"===r)},he=function(e){var t;return e.length>1&&pe(V(e,0,2))&&(2===e.length||"/"===(t=P(e,2))||"\\"===t||"?"===t||"#"===t)},_e=function(e){return"."===e||"%2e"===H(e)},Ee={},ge={},me={},ye={},Se={},Te={},Ae={},be={},Oe={},Ie={},ve={},Ne={},Re={},Ce={},De={},we={},Le={},Pe={},Me={},Ue={},je={},ke=function(e,t,r){var n,o,i,s=y(e);if(t){if(o=this.parse(s))throw new C(o);this.searchParams=null}else{if(void 0!==r&&(n=new ke(r,!0)),o=this.parse(s,null,n))throw new C(o);(i=N(new v)).bindURL(this),this.searchParams=i}};ke.prototype={type:"URL",parse:function(e,t,r){var o,i,s,a,u,l=this,c=t||Ee,d=0,f="",h=!1,g=!1,m=!1;for(e=y(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=F(e,ne,""),e=F(e,oe,"$1")),e=F(e,ie,""),o=_(e);d<=o.length;){switch(i=o[d],c){case Ee:if(!i||!M(q,i)){if(t)return Y;c=me;continue}f+=H(i),c=ge;break;case ge:if(i&&(M($,i)||"+"===i||"-"===i||"."===i))f+=H(i);else{if(":"!==i){if(t)return Y;f="",c=me,d=0;continue}if(t&&(l.isSpecial()!==p(fe,f)||"file"===f&&(l.includesCredentials()||null!==l.port)||"file"===l.scheme&&!l.host))return;if(l.scheme=f,t)return void(l.isSpecial()&&fe[l.scheme]===l.port&&(l.port=null));f="","file"===l.scheme?c=Ce:l.isSpecial()&&r&&r.scheme===l.scheme?c=ye:l.isSpecial()?c=be:"/"===o[d+1]?(c=Se,d++):(l.cannotBeABaseURL=!0,x(l.path,""),c=Me)}break;case me:if(!r||r.cannotBeABaseURL&&"#"!==i)return Y;if(r.cannotBeABaseURL&&"#"===i){l.scheme=r.scheme,l.path=E(r.path),l.query=r.query,l.fragment="",l.cannotBeABaseURL=!0,c=je;break}c="file"===r.scheme?Ce:Te;continue;case ye:if("/"!==i||"/"!==o[d+1]){c=Te;continue}c=Oe,d++;break;case Se:if("/"===i){c=Ie;break}c=Pe;continue;case Te:if(l.scheme=r.scheme,i===n)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=E(r.path),l.query=r.query;else if("/"===i||"\\"===i&&l.isSpecial())c=Ae;else if("?"===i)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=E(r.path),l.query="",c=Ue;else{if("#"!==i){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=E(r.path),l.path.length--,c=Pe;continue}l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=E(r.path),l.query=r.query,l.fragment="",c=je}break;case Ae:if(!l.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,c=Pe;continue}c=Ie}else c=Oe;break;case be:if(c=Oe,"/"!==i||"/"!==P(f,d+1))continue;d++;break;case Oe:if("/"!==i&&"\\"!==i){c=Ie;continue}break;case Ie:if("@"===i){h&&(f="%40"+f),h=!0,s=_(f);for(var S=0;S<s.length;S++){var T=s[S];if(":"!==T||m){var A=de(T,ce);m?l.password+=A:l.username+=A}else m=!0}f=""}else if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&l.isSpecial()){if(h&&""===f)return"Invalid authority";d-=_(f).length+1,f="",c=ve}else f+=i;break;case ve:case Ne:if(t&&"file"===l.scheme){c=we;continue}if(":"!==i||g){if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&l.isSpecial()){if(l.isSpecial()&&""===f)return K;if(t&&""===f&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(f))return a;if(f="",c=Le,t)return;continue}"["===i?g=!0:"]"===i&&(g=!1),f+=i}else{if(""===f)return K;if(a=l.parseHost(f))return a;if(f="",c=Re,t===Ne)return}break;case Re:if(!M(X,i)){if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&l.isSpecial()||t){if(""!==f){var b=D(f,10);if(b>65535)return z;l.port=l.isSpecial()&&b===fe[l.scheme]?null:b,f=""}if(t)return;c=Le;continue}return z}f+=i;break;case Ce:if(l.scheme="file","/"===i||"\\"===i)c=De;else{if(!r||"file"!==r.scheme){c=Pe;continue}switch(i){case n:l.host=r.host,l.path=E(r.path),l.query=r.query;break;case"?":l.host=r.host,l.path=E(r.path),l.query="",c=Ue;break;case"#":l.host=r.host,l.path=E(r.path),l.query=r.query,l.fragment="",c=je;break;default:he(U(E(o,d),""))||(l.host=r.host,l.path=E(r.path),l.shortenPath()),c=Pe;continue}}break;case De:if("/"===i||"\\"===i){c=we;break}r&&"file"===r.scheme&&!he(U(E(o,d),""))&&(pe(r.path[0],!0)?x(l.path,r.path[0]):l.host=r.host),c=Pe;continue;case we:if(i===n||"/"===i||"\\"===i||"?"===i||"#"===i){if(!t&&pe(f))c=Pe;else if(""===f){if(l.host="",t)return;c=Le}else{if(a=l.parseHost(f))return a;if("localhost"===l.host&&(l.host=""),t)return;f="",c=Le}continue}f+=i;break;case Le:if(l.isSpecial()){if(c=Pe,"/"!==i&&"\\"!==i)continue}else if(t||"?"!==i)if(t||"#"!==i){if(i!==n&&(c=Pe,"/"!==i))continue}else l.fragment="",c=je;else l.query="",c=Ue;break;case Pe:if(i===n||"/"===i||"\\"===i&&l.isSpecial()||!t&&("?"===i||"#"===i)){if(".."===(u=H(u=f))||"%2e."===u||".%2e"===u||"%2e%2e"===u?(l.shortenPath(),"/"===i||"\\"===i&&l.isSpecial()||x(l.path,"")):_e(f)?"/"===i||"\\"===i&&l.isSpecial()||x(l.path,""):("file"===l.scheme&&!l.path.length&&pe(f)&&(l.host&&(l.host=""),f=P(f,0)+":"),x(l.path,f)),f="","file"===l.scheme&&(i===n||"?"===i||"#"===i))for(;l.path.length>1&&""===l.path[0];)B(l.path);"?"===i?(l.query="",c=Ue):"#"===i&&(l.fragment="",c=je)}else f+=de(i,le);break;case Me:"?"===i?(l.query="",c=Ue):"#"===i?(l.fragment="",c=je):i!==n&&(l.path[0]+=de(i,ae));break;case Ue:t||"#"!==i?i!==n&&("'"===i&&l.isSpecial()?l.query+="%27":l.query+="#"===i?"%23":de(i,ae)):(l.fragment="",c=je);break;case je:i!==n&&(l.fragment+=de(i,ue))}d++}},parseHost:function(e){var t,r,n;if("["===P(e,0)){if("]"!==P(e,e.length-1))return K;if(t=function(e){var t,r,n,o,i,s,a,u=[0,0,0,0,0,0,0,0],l=0,c=null,d=0,f=function(){return P(e,d)};if(":"===f()){if(":"!==P(e,1))return;d+=2,c=++l}for(;f();){if(8===l)return;if(":"!==f()){for(t=r=0;r<4&&M(ee,f());)t=16*t+D(f(),16),d++,r++;if("."===f()){if(0===r)return;if(d-=r,l>6)return;for(n=0;f();){if(o=null,n>0){if(!("."===f()&&n<4))return;d++}if(!M(X,f()))return;for(;M(X,f());){if(i=D(f(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;d++}u[l]=256*u[l]+o,2!=++n&&4!==n||l++}if(4!==n)return;break}if(":"===f()){if(d++,!f())return}else if(f())return;u[l++]=t}else{if(null!==c)return;d++,c=++l}}if(null!==c)for(s=l-c,l=7;0!==l&&s>0;)a=u[l],u[l--]=u[c+s-1],u[c+--s]=a;else if(8!==l)return;return u}(V(e,1,-1)),!t)return K;this.host=t}else if(this.isSpecial()){if(e=m(e),M(te,e))return K;if(t=function(e){var t,r,n,o,i,s,a,u=G(e,".");if(u.length&&""===u[u.length-1]&&u.length--,(t=u.length)>4)return e;for(r=[],n=0;n<t;n++){if(""===(o=u[n]))return e;if(i=10,o.length>1&&"0"===P(o,0)&&(i=M(J,o)?16:8,o=V(o,8===i?1:2)),""===o)s=0;else{if(!M(10===i?Q:8===i?Z:ee,o))return e;s=D(o,i)}x(r,s)}for(n=0;n<t;n++)if(s=r[n],n===t-1){if(s>=L(256,5-t))return null}else if(s>255)return null;for(a=k(r),n=0;n<r.length;n++)a+=r[n]*L(256,3-n);return a}(e),null===t)return K;this.host=t}else{if(M(re,e))return K;for(t="",r=_(e),n=0;n<r.length;n++)t+=de(r[n],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return p(fe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&pe(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,s=e.path,a=e.query,u=e.fragment,l=t+":";return null!==o?(l+="//",e.includesCredentials()&&(l+=r+(n?":"+n:"")+"@"),l+=se(o),null!==i&&(l+=":"+i)):"file"===t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+U(s,"/"):"",null!==a&&(l+="?"+a),null!==u&&(l+="#"+u),l},setHref:function(e){var t=this.parse(e);if(t)throw new C(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new xe(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+se(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",Ee)},getUsername:function(){return this.username},setUsername:function(e){var t=_(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=de(t[r],ce)}},getPassword:function(){return this.password},setPassword:function(e){var t=_(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=de(t[r],ce)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?se(e):se(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,ve)},getHostname:function(){var e=this.host;return null===e?"":se(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Ne)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=y(e))?this.port=null:this.parse(e,Re))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+U(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Le))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=y(e))?this.query=null:("?"===P(e,0)&&(e=V(e,1)),this.query="",this.parse(e,Ue)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=y(e))?("#"===P(e,0)&&(e=V(e,1)),this.fragment="",this.parse(e,je)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var xe=function(e){var t=f(this,Fe),r=T(arguments.length,1)>1?arguments[1]:void 0,n=O(t,new ke(e,!1,r));i||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},Fe=xe.prototype,Be=function(e,t){return{get:function(){return I(this)[e]()},set:t&&function(e){return I(this)[t](e)},configurable:!0,enumerable:!0}};if(i&&(d(Fe,"href",Be("serialize","setHref")),d(Fe,"origin",Be("getOrigin")),d(Fe,"protocol",Be("getProtocol","setProtocol")),d(Fe,"username",Be("getUsername","setUsername")),d(Fe,"password",Be("getPassword","setPassword")),d(Fe,"host",Be("getHost","setHost")),d(Fe,"hostname",Be("getHostname","setHostname")),d(Fe,"port",Be("getPort","setPort")),d(Fe,"pathname",Be("getPathname","setPathname")),d(Fe,"search",Be("getSearch","setSearch")),d(Fe,"searchParams",Be("getSearchParams")),d(Fe,"hash",Be("getHash","setHash"))),c(Fe,"toJSON",(function(){return I(this).serialize()}),{enumerable:!0}),c(Fe,"toString",(function(){return I(this).serialize()}),{enumerable:!0}),R){var Ge=R.createObjectURL,Ve=R.revokeObjectURL;Ge&&c(xe,"createObjectURL",u(Ge,R)),Ve&&c(xe,"revokeObjectURL",u(Ve,R))}S(xe,"URL"),o({global:!0,constructor:!0,forced:!s,sham:!i},{URL:xe})},{"../internals/an-instance":262,"../internals/array-from":269,"../internals/array-slice":274,"../internals/define-built-in":289,"../internals/define-built-in-accessor":288,"../internals/descriptors":293,"../internals/export":309,"../internals/function-bind-context":313,"../internals/function-uncurry-this":319,"../internals/global":325,"../internals/has-own-property":326,"../internals/internal-state":335,"../internals/object-assign":363,"../internals/set-to-string-tag":395,"../internals/string-multibyte":400,"../internals/string-punycode-to-ascii":401,"../internals/to-string":416,"../internals/url-constructor-detection":423,"../internals/validate-arguments-length":426,"../modules/es.string.iterator":443,"../modules/web.url-search-params.constructor":454}],457:[function(e,t,r){"use strict";e("../modules/web.url.constructor")},{"../modules/web.url.constructor":456}],458:[function(e,t,r){"use strict";r.utils=e("./des/utils"),r.Cipher=e("./des/cipher"),r.DES=e("./des/des"),r.CBC=e("./des/cbc"),r.EDE=e("./des/ede")},{"./des/cbc":459,"./des/cipher":460,"./des/des":461,"./des/ede":462,"./des/utils":463}],459:[function(e,t,r){"use strict";var n=e("minimalistic-assert"),o=e("inherits"),i={};function s(e){n.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}r.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}o(t,e);for(var r=Object.keys(i),n=0;n<r.length;n++){var s=r[n];t.prototype[s]=i[s]}return t.create=function(e){return new t(e)},t},i._cbcInit=function(){var e=new s(this.options.iv);this._cbcState=e},i._update=function(e,t,r,n){var o=this._cbcState,i=this.constructor.super_.prototype,s=o.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=e[t+a];i._update.call(this,s,0,r,n);for(a=0;a<this.blockSize;a++)s[a]=r[n+a]}else{i._update.call(this,e,t,r,n);for(a=0;a<this.blockSize;a++)r[n+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=e[t+a]}}},{inherits:491,"minimalistic-assert":651}],460:[function(e,t,r){"use strict";var n=e("minimalistic-assert");function o(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==e.padding}t.exports=o,o.prototype._init=function(){},o.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},o.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},o.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},o.prototype._updateEncrypt=function(e){var t=0,r=0,n=(this.bufferOff+e.length)/this.blockSize|0,o=new Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(o,r)));for(var i=e.length-(e.length-t)%this.blockSize;t<i;t+=this.blockSize)this._update(e,t,o,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return o},o.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,o=new Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(o,r);return t+=this._buffer(e,t),o},o.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},o.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},o.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},o.prototype._unpad=function(e){return e},o.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},{"minimalistic-assert":651}],461:[function(e,t,r){"use strict";var n=e("minimalistic-assert"),o=e("inherits"),i=e("./utils"),s=e("./cipher");function a(){this.tmp=new Array(2),this.keys=null}function u(e){s.call(this,e);var t=new a;this._desState=t,this.deriveKeys(t,e.key)}o(u,s),t.exports=u,u.create=function(e){return new u(e)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(e,t){e.keys=new Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var r=i.readUInt32BE(t,0),o=i.readUInt32BE(t,4);i.pc1(r,o,e.tmp,0),r=e.tmp[0],o=e.tmp[1];for(var s=0;s<e.keys.length;s+=2){var a=l[s>>>1];r=i.r28shl(r,a),o=i.r28shl(o,a),i.pc2(r,o,e.keys,s)}},u.prototype._update=function(e,t,r,n){var o=this._desState,s=i.readUInt32BE(e,t),a=i.readUInt32BE(e,t+4);i.ip(s,a,o.tmp,0),s=o.tmp[0],a=o.tmp[1],"encrypt"===this.type?this._encrypt(o,s,a,o.tmp,0):this._decrypt(o,s,a,o.tmp,0),s=o.tmp[0],a=o.tmp[1],i.writeUInt32BE(r,s,n),i.writeUInt32BE(r,a,n+4)},u.prototype._pad=function(e,t){if(!1===this.padding)return!1;for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},u.prototype._unpad=function(e){if(!1===this.padding)return e;for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)n.equal(e[r],t);return e.slice(0,e.length-t)},u.prototype._encrypt=function(e,t,r,n,o){for(var s=t,a=r,u=0;u<e.keys.length;u+=2){var l=e.keys[u],c=e.keys[u+1];i.expand(a,e.tmp,0),l^=e.tmp[0],c^=e.tmp[1];var d=i.substitute(l,c),f=a;a=(s^i.permute(d))>>>0,s=f}i.rip(a,s,n,o)},u.prototype._decrypt=function(e,t,r,n,o){for(var s=r,a=t,u=e.keys.length-2;u>=0;u-=2){var l=e.keys[u],c=e.keys[u+1];i.expand(s,e.tmp,0),l^=e.tmp[0],c^=e.tmp[1];var d=i.substitute(l,c),f=s;s=(a^i.permute(d))>>>0,a=f}i.rip(s,a,n,o)}},{"./cipher":460,"./utils":463,inherits:491,"minimalistic-assert":651}],462:[function(e,t,r){"use strict";var n=e("minimalistic-assert"),o=e("inherits"),i=e("./cipher"),s=e("./des");function a(e,t){n.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),o=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[s.create({type:"encrypt",key:r}),s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:i})]:[s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:o}),s.create({type:"decrypt",key:r})]}function u(e){i.call(this,e);var t=new a(this.type,this.options.key);this._edeState=t}o(u,i),t.exports=u,u.create=function(e){return new u(e)},u.prototype._update=function(e,t,r,n){var o=this._edeState;o.ciphers[0]._update(e,t,r,n),o.ciphers[1]._update(r,n,r,n),o.ciphers[2]._update(r,n,r,n)},u.prototype._pad=s.prototype._pad,u.prototype._unpad=s.prototype._unpad},{"./cipher":460,"./des":461,inherits:491,"minimalistic-assert":651}],463:[function(e,t,r){"use strict";r.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},r.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},r.ip=function(e,t,r,n){for(var o=0,i=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)o<<=1,o|=t>>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=e>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)i<<=1,i|=t>>>a+s&1;for(a=1;a<=25;a+=8)i<<=1,i|=e>>>a+s&1}r[n+0]=o>>>0,r[n+1]=i>>>0},r.rip=function(e,t,r,n){for(var o=0,i=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)o<<=1,o|=t>>>a+s&1,o<<=1,o|=e>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)i<<=1,i|=t>>>a+s&1,i<<=1,i|=e>>>a+s&1;r[n+0]=o>>>0,r[n+1]=i>>>0},r.pc1=function(e,t,r,n){for(var o=0,i=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;r[n+0]=o>>>0,r[n+1]=i>>>0},r.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];r.pc2=function(e,t,r,o){for(var i=0,s=0,a=n.length>>>1,u=0;u<a;u++)i<<=1,i|=e>>>n[u]&1;for(u=a;u<n.length;u++)s<<=1,s|=t>>>n[u]&1;r[o+0]=i>>>0,r[o+1]=s>>>0},r.expand=function(e,t,r){var n=0,o=0;n=(1&e)<<5|e>>>27;for(var i=23;i>=15;i-=4)n<<=6,n|=e>>>i&63;for(i=11;i>=3;i-=4)o|=e>>>i&63,o<<=6;o|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=o>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];r.substitute=function(e,t){for(var r=0,n=0;n<4;n++){r<<=4,r|=o[64*n+(e>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=o[256+64*n+(t>>>18-6*n&63)]}return r>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];r.permute=function(e){for(var t=0,r=0;r<i.length;r++)t<<=1,t|=e>>>i[r]&1;return t>>>0},r.padSplit=function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var o=[],i=0;i<t;i+=r)o.push(n.slice(i,i+r));return o.join(" ")}},{}],464:[function(e,t,r){var n=e("safe-buffer").Buffer,o=e("md5.js");t.exports=function(e,t,r,i){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=r/8,a=n.alloc(s),u=n.alloc(i||0),l=n.alloc(0);s>0||i>0;){var c=new o;c.update(l),c.update(e),t&&c.update(t),l=c.digest();var d=0;if(s>0){var f=a.length-s;d=Math.min(s,l.length),l.copy(a,f,0,d),s-=d}if(d<l.length&&i>0){var p=u.length-i,h=Math.min(i,l.length-d);l.copy(u,p,d,d+h),i-=h}}return l.fill(0),{key:a,iv:u}}},{"md5.js":645,"safe-buffer":679}],465:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("@firebase/app");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(0,n.registerVersion)("firebase","10.8.0","app")},{"@firebase/app":217}],466:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("@firebase/messaging");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))},{"@firebase/messaging":221}],467:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("@firebase/messaging/sw");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))},{"@firebase/messaging/sw":222}],468:[function(e,t,r){var n=function(e){"use strict";if("function"!=typeof e)return[];var t=e.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,""),r=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g);return null===r?[]:r};void 0!==t&&void 0!==t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.GetParams=n)},{}],469:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,o=e("readable-stream").Transform;function i(e){o.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(i,o),i.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,o=0;this._blockOffset+e.length-o>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[o++];this._update(),this._blockOffset=0}for(;o<e.length;)r[this._blockOffset++]=e[o++];for(var s=0,a=8*e.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=i},{inherits:491,"readable-stream":484,"safe-buffer":679}],470:[function(e,t,r){"use strict";var n={};function o(e,t,r){r||(r=Error);var o=function(e){var r,n;function o(r,n,o){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,o))||this}return n=e,(r=o).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,o}(r);o.prototype.name=r.name,o.prototype.code=e,n[e]=o}function i(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}o("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,o,s,a;if("string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(i(t,"type"));else{var u=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(i(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},{}],471:[function(e,t,r){(function(r){(function(){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=l;var o=e("./_stream_readable"),i=e("./_stream_writable");e("inherits")(l,o);for(var s=n(i.prototype),a=0;a<s.length;a++){var u=s[a];l.prototype[u]||(l.prototype[u]=i.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":473,"./_stream_writable":475,_process:653,inherits:491}],472:[function(e,t,r){"use strict";t.exports=o;var n=e("./_stream_transform");function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}e("inherits")(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":474,inherits:491}],473:[function(e,t,r){(function(r,n){(function(){"use strict";var o;t.exports=I,I.ReadableState=O;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,u=(void 0!==n?n:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=e("util");l=c&&c.debuglog?c.debuglog("stream"):function(){};var d,f,p,h=e("./internal/streams/buffer_list"),_=e("./internal/streams/destroy"),E=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,m=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,S=g.ERR_METHOD_NOT_IMPLEMENTED,T=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(I,s);var A=_.errorOrDestroy,b=["error","close","destroy","pause","resume"];function O(t,r,n){o=o||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=r instanceof o),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=E(this,t,"readableHighWaterMark",n),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=e("string_decoder/").StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function I(t){if(o=o||e("./_stream_duplex"),!(this instanceof I))return new I(t);var r=this instanceof o;this._readableState=new O(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function v(e,t,r,n,o){l("readableAddChunk",t);var i,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?D(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,w(e)))}(e,s);else if(o||(i=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(s,t)),i)A(e,i);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)s.endEmitted?A(e,new T):N(e,s,t,!0);else if(s.ended)A(e,new y);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?N(e,s,t,!1):L(e,s)):N(e,s,t,!1)}else n||(s.reading=!1,L(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function N(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&D(e)),L(e,t)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),I.prototype.destroy=_.destroy,I.prototype._undestroy=_.undestroy,I.prototype._destroy=function(e,t){t(e)},I.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),v(this,e,t,!1,r)},I.prototype.unshift=function(e){return v(this,e,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(t){d||(d=e("string_decoder/").StringDecoder);var r=new d(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var R=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function D(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(w,e))}function w(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,k(e)}function L(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(l("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function U(e){l("readable nexttick read 0"),e.read(0)}function j(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),k(e),t.flowing&&!t.reading&&e.read(0)}function k(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function F(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(B,t,e))}function B(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function G(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}I.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):D(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&F(this),null;var n,o=t.needReadable;return l("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",o=!0),t.ended||t.reading?l("reading or ended",o=!1):o&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(r,t))),null===(n=e>0?x(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==n&&this.emit("data",n),n},I.prototype._read=function(e){A(this,new S("_read()"))},I.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,l("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:E;function a(t,r){l("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),e.removeListener("close",h),e.removeListener("finish",_),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",E),n.removeListener("data",f),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function u(){l("onend"),e.end()}o.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,k(e))}}(n);e.on("drain",c);var d=!1;function f(t){l("ondata");var r=e.write(t);l("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==G(o.pipes,e))&&!d&&(l("false write response, pause",o.awaitDrain),o.awaitDrain++),n.pause())}function p(t){l("onerror",t),E(),e.removeListener("error",p),0===i(e,"error")&&A(e,t)}function h(){e.removeListener("finish",_),E()}function _(){l("onfinish"),e.removeListener("close",h),E()}function E(){l("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",h),e.once("finish",_),e.emit("pipe",n),o.flowing||(l("pipe resume"),n.resume()),e},I.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=G(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},I.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,l("on readable",o.length,o.reading),o.length?D(this):o.reading||r.nextTick(U,this))),n},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(M,this),n},I.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(M,this),t},I.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(j,e,t))}(this,e)),e.paused=!1,this},I.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(l("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<b.length;i++)e.on(b[i],this.emit.bind(this,b[i]));return this._read=function(t){l("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),I._fromList=x,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(t,r){return void 0===p&&(p=e("./internal/streams/from")),p(I,t,r)})}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":470,"./_stream_duplex":471,"./internal/streams/async_iterator":476,"./internal/streams/buffer_list":477,"./internal/streams/destroy":478,"./internal/streams/from":480,"./internal/streams/state":482,"./internal/streams/stream":483,_process:653,buffer:251,events:252,inherits:491,"string_decoder/":712,util:230}],474:[function(e,t,r){"use strict";t.exports=c;var n=e("../errors").codes,o=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);u.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}e("inherits")(c,u),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new o("_transform()"))},c.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":470,"./_stream_duplex":471,inherits:491}],475:[function(e,t,r){(function(r,n){(function(){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=I,I.WritableState=O;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),u=e("buffer").Buffer,l=(void 0!==n?n:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,d=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,p=e("../errors").codes,h=p.ERR_INVALID_ARG_TYPE,_=p.ERR_METHOD_NOT_IMPLEMENTED,E=p.ERR_MULTIPLE_CALLBACK,g=p.ERR_STREAM_CANNOT_PIPE,m=p.ERR_STREAM_DESTROYED,y=p.ERR_STREAM_NULL_VALUES,S=p.ERR_STREAM_WRITE_AFTER_END,T=p.ERR_UNKNOWN_ENCODING,A=d.errorOrDestroy;function b(){}function O(t,n,s){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=n instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,o=n.sync,i=n.writecb;if("function"!=typeof i)throw new E;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,o,i){--t.pendingcb,n?(r.nextTick(i,o),r.nextTick(w,e,t),e._writableState.errorEmitted=!0,A(e,o)):(i(o),e._writableState.errorEmitted=!0,A(e,o),w(e,t))}(e,n,o,t,i);else{var s=C(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||R(e,n),o?r.nextTick(N,e,n,s,i):N(e,n,s,i)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function I(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!c.call(I,this))return new I(t);this._writableState=new O(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function v(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function N(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),w(e,t)}function R(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,v(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,d=r.callback;if(v(e,t,!1,t.objectMode?1:l.length,l,c,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function D(e,t){e._final((function(r){t.pendingcb--,r&&A(e,r),t.prefinished=!0,e.emit("prefinish"),w(e,t)}))}function w(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(D,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return n}e("inherits")(I,a),O.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===I&&(e&&e._writableState instanceof O)}})):c=function(e){return e instanceof this},I.prototype.pipe=function(){A(this,new g)},I.prototype.write=function(e,t,n){var o,i=this._writableState,s=!1,a=!i.objectMode&&(o=e,u.isBuffer(o)||o instanceof l);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=b),i.ending?function(e,t){var n=new S;A(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,o){var i;return null===n?i=new y:"string"==typeof n||t.objectMode||(i=new h("chunk",["string","Buffer"],n)),!i||(A(e,i),r.nextTick(o,i),!1)}(this,i,e,n))&&(i.pendingcb++,s=function(e,t,r,n,o,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r));return t}(t,n,o);n!==s&&(r=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,a,n,o,i);return l}(this,i,a,e,t,n)),s},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||R(this,e))},I.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new T(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),I.prototype._write=function(e,t,r){r(new _("_write()"))},I.prototype._writev=null,I.prototype.end=function(e,t,n){var o=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||function(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,o,n),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),I.prototype.destroy=d.destroy,I.prototype._undestroy=d.undestroy,I.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":470,"./_stream_duplex":471,"./internal/streams/destroy":478,"./internal/streams/state":482,"./internal/streams/stream":483,_process:653,buffer:251,inherits:491,"util-deprecate":720}],476:[function(e,t,r){(function(r){(function(){"use strict";var n;function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function h(e){var t=e[s];if(null!==t){var r=e[f].read();null!==r&&(e[c]=null,e[s]=null,e[a]=null,t(p(r,!1)))}}function _(e){r.nextTick(h,e)}var E=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((o(n={get stream(){return this[f]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[u]?n(e[u]):t(p(void 0,!0))}))}));var n,o=this[c];if(o)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(p(void 0,!0)):t[d](r,n)}),n)}}(o,this));else{var i=this[f].read();if(null!==i)return Promise.resolve(p(i,!1));n=new Promise(this[d])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),E);t.exports=function(e){var t,r=Object.create(g,(o(t={},f,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,d,{value:function(e,t){var n=r[f].read();n?(r[c]=null,r[s]=null,r[a]=null,e(p(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[c]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[c]=null,r[s]=null,r[a]=null,t(e)),void(r[u]=e)}var n=r[s];null!==n&&(r[c]=null,r[s]=null,r[a]=null,n(p(void 0,!0))),r[l]=!0})),e.on("readable",_.bind(null,r)),r}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":479,_process:653}],477:[function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var u=e("buffer").Buffer,l=e("util").inspect,c=l&&l.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t,r,n,o=u.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=i.data,r=o,n=s,u.prototype.copy.call(t,r,n),s+=i.data.length,i=i.next;return o}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(i===o.length?n+=o:n+=o.slice(0,e),0==(e-=i)){i===o.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,i),0==(e-=i)){i===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(i));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return l(this,o(o({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},{buffer:251,util:230}],478:[function(e,t,r){(function(e){(function(){"use strict";function r(e,t){o(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}t.exports={destroy:function(t,i){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(o,this,t)):e.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!i&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):i?(e.nextTick(n,s),i(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:653}],479:[function(e,t,r){"use strict";var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}t.exports=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}(i||o);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||c()},l=t._writableState&&t._writableState.finished,c=function(){a=!1,l=!0,s||i.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){s=!1,d=!0,a||i.call(t)},p=function(e){i.call(t,e)},h=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},_=function(){t.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",c),t.on("abort",h),t.req?_():t.on("request",_)),t.on("end",f),t.on("finish",c),!1!==r.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",c),t.removeListener("abort",h),t.removeListener("request",_),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("end",f),t.removeListener("error",p),t.removeListener("close",h)}}},{"../../../errors":470}],480:[function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],481:[function(e,t,r){"use strict";var n;var o=e("../../../errors").codes,i=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e){e()}function l(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var c,d=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new i("streams");var f=r.map((function(t,o){var i=o<r.length-1;return function(t,r,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var a=!1;t.on("close",(function(){a=!0})),void 0===n&&(n=e("./end-of-stream")),n(t,{readable:r,writable:o},(function(e){if(e)return i(e);a=!0,i()}));var u=!1;return function(e){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void i(e||new s("pipe"))}}(t,i,o>0,(function(e){c||(c=e),e&&f.forEach(u),i||(f.forEach(u),d(c))}))}));return r.reduce(l)}},{"../../../errors":470,"./end-of-stream":479}],482:[function(e,t,r){"use strict";var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,o){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(o?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},{"../../../errors":470}],483:[function(e,t,r){t.exports=e("events").EventEmitter},{events:252}],484:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":471,"./lib/_stream_passthrough.js":472,"./lib/_stream_readable.js":473,"./lib/_stream_transform.js":474,"./lib/_stream_writable.js":475,"./lib/internal/streams/end-of-stream.js":479,"./lib/internal/streams/pipeline.js":481}],485:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./wrap-idb-value.cjs");const o=["get","getKey","getAll","getAllKeys","count"],i=["put","add","delete","clear"],s=new Map;function a(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(s.get(t))return s.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=i.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!a&&!o.includes(r))return;const u=async function(e,...t){const o=this.transaction(e,a?"readwrite":"readonly");let i=o.store;return n&&(i=i.index(t.shift())),(await Promise.all([i[r](...t),a&&o.done]))[0]};return s.set(t,u),u}n.replaceTraps((e=>({...e,get:(t,r,n)=>a(t,r)||e.get(t,r,n),has:(t,r)=>!!a(t,r)||e.has(t,r)}))),r.unwrap=n.unwrap,r.wrap=n.wrap,r.deleteDB=function(e,{blocked:t}={}){const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",(e=>t(e.oldVersion,e))),n.wrap(r).then((()=>{}))},r.openDB=function(e,t,{blocked:r,upgrade:o,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),u=n.wrap(a);return o&&a.addEventListener("upgradeneeded",(e=>{o(n.wrap(a.result),e.oldVersion,e.newVersion,n.wrap(a.transaction),e)})),r&&a.addEventListener("blocked",(e=>r(e.oldVersion,e.newVersion,e))),u.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),u}},{"./wrap-idb-value.cjs":486}],486:[function(e,t,r){"use strict";const n=(e,t)=>t.some((t=>e instanceof t));let o,i;const s=new WeakMap,a=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap;let d={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return h(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(_(this),t),h(s.get(this))}:function(...t){return h(e.apply(_(this),t))}:function(t,...r){const n=e.call(_(this),t,...r);return u.set(n,t.sort?t.sort():[t]),h(n)}}function p(e){return"function"==typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),n()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));a.set(e,t)}(e),n(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(h(e.result)),n()},i=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),c.set(t,e),t}(e);if(l.has(e))return l.get(e);const t=p(e);return t!==e&&(l.set(e,t),c.set(t,e)),t}const _=e=>c.get(e);r.instanceOfAny=n,r.replaceTraps=function(e){d=e(d)},r.reverseTransformCache=c,r.unwrap=_,r.wrap=h},{}],487:[function(e,t,r){r.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,l=u>>1,c=-7,d=r?o-1:0,f=r?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-c)-1,p>>=-c,c+=a;c>0;i=256*i+e[t+d],d+=f,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=256*s+e[t+d],d+=f,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=l}return(p?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,d=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,h=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*u-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=h,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[r+p]=255&s,p+=h,s/=256,l-=8);e[r+p-h]|=128*_}},{}],488:[function(e,t,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0});var o="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),i="undefined"!=typeof Map,s="undefined"!=typeof Set,a="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,u=o?Symbol.for("immer-nothing"):((n={})["immer-nothing"]=!0,n),l=o?Symbol.for("immer-draftable"):"__$immer_draftable",c=o?Symbol.for("immer-state"):"__$immer_state",d="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",f={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"};function p(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=f[e],i=o?"function"==typeof o?o.apply(null,r):o:"unknown error nr: "+e;throw new Error("[Immer] "+i)}function h(e){return!!e&&!!e[c]}function _(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===E}(e)||Array.isArray(e)||!!e[l]||!!(null===(t=e.constructor)||void 0===t?void 0:t[l])||I(e)||v(e))}var E=Object.prototype.constructor.toString();var g="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,m=Object.getOwnPropertyDescriptors||function(e){var t={};return g(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t};function y(e,t,r){void 0===r&&(r=!1),0===S(e)?(r?Object.keys:g)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function S(e){var t=e[c];return t?t.type_>3?t.type_-4:t.type_:Array.isArray(e)?1:I(e)?2:v(e)?3:0}function T(e,t){return 2===S(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function A(e,t){return 2===S(e)?e.get(t):e[t]}function b(e,t,r){var n=S(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function O(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function I(e){return i&&e instanceof Map}function v(e){return s&&e instanceof Set}function N(e){return e.copy_||e.base_}function R(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=m(e);delete t[c];for(var r=g(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function C(e,t){return void 0===t&&(t=!1),w(e)||h(e)||!_(e)||(S(e)>1&&(e.set=e.add=e.clear=e.delete=D),Object.freeze(e),t&&y(e,(function(e,t){return C(t,!0)}),!0)),e}function D(){p(2)}function w(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}var L,P={};function M(e){var t=P[e];return t||p(18,e),t}function U(e,t){P[e]||(P[e]=t)}function j(){return L||p(0),L}function k(e,t){t&&(M("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function x(e){F(e),e.drafts_.forEach(G),e.drafts_=null}function F(e){e===L&&(L=e.parent_)}function B(e){return L={drafts_:[],parent_:L,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function G(e){var t=e[c];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function V(e,t){t.unfinalizedDrafts_=t.drafts_.length;var r=t.drafts_[0],n=void 0!==e&&e!==r;return t.immer_.useProxies_||M("ES5").willFinalizeES5_(t,e,n),n?(r[c].modified_&&(x(t),p(4)),_(e)&&(e=H(t,e),t.parent_||Y(t,e)),t.patches_&&M("Patches").generateReplacementPatches_(r[c].base_,e,t.patches_,t.inversePatches_)):e=H(t,r,[]),x(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==u?e:void 0}function H(e,t,r){if(w(t))return t;var n=t[c];if(!n)return y(t,(function(o,i){return W(e,n,t,o,i,r)}),!0),t;if(n.scope_!==e)return t;if(!n.modified_)return Y(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;var o=4===n.type_||5===n.type_?n.copy_=R(n.draft_):n.copy_,i=o,s=!1;3===n.type_&&(i=new Set(o),o.clear(),s=!0),y(i,(function(t,i){return W(e,n,o,t,i,r,s)})),Y(e,o,!1),r&&e.patches_&&M("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function W(e,t,r,n,o,i,s){if(o===r&&p(5),h(o)){var a=H(e,o,i&&t&&3!==t.type_&&!T(t.assigned_,n)?i.concat(n):void 0);if(b(r,n,a),!h(a))return;e.canAutoFreeze_=!1}else s&&r.add(o);if(_(o)&&!w(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;H(e,o),t&&t.scope_.parent_||Y(e,o)}}function Y(e,t,r){void 0===r&&(r=!1),!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&C(t,r)}var K={get:function(e,t){if(t===c)return e;var r=N(e);if(!T(r,t))return function(e,t,r){var n,o=$(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.draft_):void 0}(e,r,t);var n=r[t];return e.finalized_||!_(n)?n:n===q(e.base_,t)?(J(e),e.copy_[t]=Q(e.scope_.immer_,n,e)):n},has:function(e,t){return t in N(e)},ownKeys:function(e){return Reflect.ownKeys(N(e))},set:function(e,t,r){var n=$(N(e),t);if(null==n?void 0:n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){var o=q(N(e),t),i=null==o?void 0:o[c];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(O(r,o)&&(void 0!==r||T(e.base_,t)))return!0;J(e),X(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:function(e,t){return void 0!==q(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,J(e),X(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor:function(e,t){var r=N(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){p(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base_)},setPrototypeOf:function(){p(12)}},z={};function q(e,t){var r=e[c];return(r?N(r):e)[t]}function $(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function X(e){e.modified_||(e.modified_=!0,e.parent_&&X(e.parent_))}function J(e){e.copy_||(e.copy_=R(e.base_))}y(K,(function(e,t){z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),z.deleteProperty=function(e,t){return isNaN(parseInt(t))&&p(13),z.set.call(this,e,t,void 0)},z.set=function(e,t,r){return"length"!==t&&isNaN(parseInt(t))&&p(14),K.set.call(this,e[0],t,r,e[0])};var Z=function(){function e(e){var t=this;this.useProxies_=a,this.autoFreeze_=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var o=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return i.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(s))}))}}var s;if("function"!=typeof r&&p(6),void 0!==n&&"function"!=typeof n&&p(7),_(e)){var a=B(t),l=Q(t,e,void 0),c=!0;try{s=r(l),c=!1}finally{c?x(a):F(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return k(a,n),V(e,a)}),(function(e){throw x(a),e})):(k(a,n),V(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===u&&(s=void 0),t.autoFreeze_&&C(s,!0),n){var d=[],f=[];M("Patches").generateReplacementPatches_(e,s,d,f),n(d,f)}return s}p(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(o))}))};var n,o,i=t.produce(e,r,(function(e,t){n=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,n,o]})):[i,n,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){_(e)||p(8),h(e)&&(e=ee(e));var t=B(this),r=Q(this,e,void 0);return r[c].isManual_=!0,F(t),r},t.finishDraft=function(e,t){var r=e&&e[c];r&&r.isManual_||p(9),r.finalized_&&p(10);var n=r.scope_;return k(n,t),V(void 0,n)},t.setAutoFreeze=function(e){this.autoFreeze_=e},t.setUseProxies=function(e){e&&!a&&p(20),this.useProxies_=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var o=M("Patches").applyPatches_;return h(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}();function Q(e,t,r){var n=I(t)?M("MapSet").proxyMap_(t,r):v(t)?M("MapSet").proxySet_(t,r):e.useProxies_?function(e,t){var r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:j(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,i=K;r&&(o=[n],i=z);var s=Proxy.revocable(o,i),a=s.revoke,u=s.proxy;return n.draft_=u,n.revoke_=a,u}(t,r):M("ES5").createES5Proxy_(t,r);return(r?r.scope_:j()).drafts_.push(n),n}function ee(e){return h(e)||p(22,e),te(e)}function te(e){if(!_(e))return e;var t,r=e[c],n=S(e);if(r){if(!r.modified_&&(r.type_<4||!M("ES5").hasChanges_(r)))return r.base_;r.finalized_=!0,t=re(e,n),r.finalized_=!1}else t=re(e,n);return y(t,(function(e,n){r&&A(r.base_,e)===n||b(t,e,te(n))})),3===n?new Set(t):t}function re(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return R(e)}function ne(){var e={};function t(t,r){var n=e[t];return n?n.enumerable=r:e[t]=n={configurable:!0,enumerable:r,get:function(){var e=this[c];return s(e),K.get(e,t)},set:function(e){var r=this[c];s(r),K.set(r,t,e)}},n}function r(e){for(var t=e.length-1;t>=0;t--){var r=e[t][c];if(!r.modified_)switch(r.type_){case 5:i(r)&&X(r);break;case 4:o(r)&&X(r)}}}function n(e){if(e&&"object"==typeof e){var t=e[c];if(t){var r=t.base_,o=t.draft_,s=t.assigned_,a=t.type_;if(4===a)y(o,(function(e){e!==c&&(void 0!==r[e]||T(r,e)?s[e]||n(o[e]):(s[e]=!0,X(t)))})),y(r,(function(e){void 0!==o[e]||T(o,e)||(s[e]=!1,X(t))}));else if(5===a){if(i(t)&&(X(t),s.length=!0),o.length<r.length)for(var u=o.length;u<r.length;u++)s[u]=!1;else for(var l=r.length;l<o.length;l++)s[l]=!0;for(var d=Math.min(o.length,r.length),f=0;f<d;f++)o.hasOwnProperty(f)||(s[f]=!0),void 0===s[f]&&n(o[f])}}}}function o(e){for(var t=e.base_,r=e.draft_,n=g(r),o=n.length-1;o>=0;o--){var i=n[o];if(i!==c){var s=t[i];if(void 0===s&&!T(t,i))return!0;var a=r[i],u=a&&a[c];if(u?u.base_!==s:!O(a,s))return!0}}var l=!!t[c];return n.length!==g(t).length+(l?0:1)}function i(e){var t=e.draft_;if(t.length!==e.base_.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}function s(e){e.revoked_&&p(3,JSON.stringify(N(e)))}U("ES5",{createES5Proxy_:function(e,r){var n=Array.isArray(e),o=function(e,r){if(e){for(var n=new Array(r.length),o=0;o<r.length;o++)Object.defineProperty(n,""+o,t(o,!0));return n}var i=m(r);delete i[c];for(var s=g(i),a=0;a<s.length;a++){var u=s[a];i[u]=t(u,e||!!i[u].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,e),i={type_:n?5:4,scope_:r?r.scope_:j(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:o,copy_:null,revoked_:!1,isManual_:!1};return Object.defineProperty(o,c,{value:i,writable:!0}),o},willFinalizeES5_:function(e,t,o){o?h(t)&&t[c].scope_===e&&r(e.drafts_):(e.patches_&&n(e.drafts_[0]),r(e.drafts_))},hasChanges_:function(e){return 4===e.type_?o(e):i(e)}})}function oe(){var e="replace",t="add",r="remove";function n(e){if(!_(e))return e;if(Array.isArray(e))return e.map(n);if(I(e))return new Map(Array.from(e.entries()).map((function(e){return[e[0],n(e[1])]})));if(v(e))return new Set(Array.from(e).map(n));var t=Object.create(Object.getPrototypeOf(e));for(var r in e)t[r]=n(e[r]);return T(e,l)&&(t[l]=e[l]),t}function o(e){return h(e)?n(e):e}U("Patches",{applyPatches_:function(o,i){return i.forEach((function(i){for(var s=i.path,a=i.op,u=o,l=0;l<s.length-1;l++){var c=S(u),d=s[l];"string"!=typeof d&&"number"!=typeof d&&(d=""+d),0!==c&&1!==c||"__proto__"!==d&&"constructor"!==d||p(24),"function"==typeof u&&"prototype"===d&&p(24),"object"!=typeof(u=A(u,d))&&p(15,s.join("/"))}var f=S(u),h=n(i.value),_=s[s.length-1];switch(a){case e:switch(f){case 2:return u.set(_,h);case 3:p(16);default:return u[_]=h}case t:switch(f){case 1:return"-"===_?u.push(h):u.splice(_,0,h);case 2:return u.set(_,h);case 3:return u.add(h);default:return u[_]=h}case r:switch(f){case 1:return u.splice(_,1);case 2:return u.delete(_);case 3:return u.delete(i.value);default:return delete u[_]}default:p(17,a)}})),o},generatePatches_:function(n,i,s,a){switch(n.type_){case 0:case 4:case 2:return function(n,i,s,a){var u=n.base_,l=n.copy_;y(n.assigned_,(function(n,c){var d=A(u,n),f=A(l,n),p=c?T(u,n)?e:t:r;if(d!==f||p!==e){var h=i.concat(n);s.push(p===r?{op:p,path:h}:{op:p,path:h,value:f}),a.push(p===t?{op:r,path:h}:p===r?{op:t,path:h,value:o(d)}:{op:e,path:h,value:o(d)})}}))}(n,i,s,a);case 5:case 1:return function(r,n,i,s){var a=r.base_,u=r.assigned_,l=r.copy_;if(l.length<a.length){var c=[l,a];a=c[0],l=c[1];var d=[s,i];i=d[0],s=d[1]}for(var f=0;f<a.length;f++)if(u[f]&&l[f]!==a[f]){var p=n.concat([f]);i.push({op:e,path:p,value:o(l[f])}),s.push({op:e,path:p,value:o(a[f])})}for(var h=a.length;h<l.length;h++){var _=n.concat([h]);i.push({op:t,path:_,value:o(l[h])})}a.length<l.length&&s.push({op:e,path:n.concat(["length"]),value:a.length})}(n,i,s,a);case 3:return function(e,n,o,i){var s=e.base_,a=e.copy_,u=0;s.forEach((function(e){if(!a.has(e)){var s=n.concat([u]);o.push({op:r,path:s,value:e}),i.unshift({op:t,path:s,value:e})}u++})),u=0,a.forEach((function(e){if(!s.has(e)){var a=n.concat([u]);o.push({op:t,path:a,value:e}),i.unshift({op:r,path:a,value:e})}u++}))}(n,i,s,a)}},generateReplacementPatches_:function(t,r,n,o){n.push({op:e,path:[],value:r===u?void 0:r}),o.push({op:e,path:[],value:t})}})}function ie(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};function t(t,r){function n(){this.constructor=t}e(t,r),t.prototype=(n.prototype=r.prototype,new n)}var r=function(e){function r(e,t){return this[c]={type_:2,parent_:t,scope_:t?t.scope_:j(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:e,draft_:this,isManual_:!1,revoked_:!1},this}t(r,Map);var o=r.prototype;return Object.defineProperty(o,"size",{get:function(){return N(this[c]).size}}),o.has=function(e){return N(this[c]).has(e)},o.set=function(e,t){var r=this[c];return s(r),N(r).has(e)&&N(r).get(e)===t||(n(r),X(r),r.assigned_.set(e,!0),r.copy_.set(e,t),r.assigned_.set(e,!0)),this},o.delete=function(e){if(!this.has(e))return!1;var t=this[c];return s(t),n(t),X(t),t.base_.has(e)?t.assigned_.set(e,!1):t.assigned_.delete(e),t.copy_.delete(e),!0},o.clear=function(){var e=this[c];s(e),N(e).size&&(n(e),X(e),e.assigned_=new Map,y(e.base_,(function(t){e.assigned_.set(t,!1)})),e.copy_.clear())},o.forEach=function(e,t){var r=this;N(this[c]).forEach((function(n,o,i){e.call(t,r.get(o),o,r)}))},o.get=function(e){var t=this[c];s(t);var r=N(t).get(e);if(t.finalized_||!_(r))return r;if(r!==t.base_.get(e))return r;var o=Q(t.scope_.immer_,r,t);return n(t),t.copy_.set(e,o),o},o.keys=function(){return N(this[c]).keys()},o.values=function(){var e,t=this,r=this.keys();return(e={})[d]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},o.entries=function(){var e,t=this,r=this.keys();return(e={})[d]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},o[d]=function(){return this.entries()},r}();function n(e){e.copy_||(e.assigned_=new Map,e.copy_=new Map(e.base_))}var o=function(e){function r(e,t){return this[c]={type_:3,parent_:t,scope_:t?t.scope_:j(),modified_:!1,finalized_:!1,copy_:void 0,base_:e,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1},this}t(r,Set);var n=r.prototype;return Object.defineProperty(n,"size",{get:function(){return N(this[c]).size}}),n.has=function(e){var t=this[c];return s(t),t.copy_?!!t.copy_.has(e)||!(!t.drafts_.has(e)||!t.copy_.has(t.drafts_.get(e))):t.base_.has(e)},n.add=function(e){var t=this[c];return s(t),this.has(e)||(i(t),X(t),t.copy_.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[c];return s(t),i(t),X(t),t.copy_.delete(e)||!!t.drafts_.has(e)&&t.copy_.delete(t.drafts_.get(e))},n.clear=function(){var e=this[c];s(e),N(e).size&&(i(e),X(e),e.copy_.clear())},n.values=function(){var e=this[c];return s(e),i(e),e.copy_.values()},n.entries=function(){var e=this[c];return s(e),i(e),e.copy_.entries()},n.keys=function(){return this.values()},n[d]=function(){return this.values()},n.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},r}();function i(e){e.copy_||(e.copy_=new Set,e.base_.forEach((function(t){if(_(t)){var r=Q(e.scope_.immer_,t,e);e.drafts_.set(t,r),e.copy_.add(r)}else e.copy_.add(t)})))}function s(e){e.revoked_&&p(3,JSON.stringify(N(e)))}U("MapSet",{proxyMap_:function(e,t){return new r(e,t)},proxySet_:function(e,t){return new o(e,t)}})}var se=new Z,ae=se.produce,ue=se.produceWithPatches.bind(se),le=se.setAutoFreeze.bind(se),ce=se.setUseProxies.bind(se),de=se.applyPatches.bind(se),fe=se.createDraft.bind(se),pe=se.finishDraft.bind(se);r.Immer=Z,r.applyPatches=de,r.castDraft=function(e){return e},r.castImmutable=function(e){return e},r.createDraft=fe,r.current=ee,r.default=ae,r.enableAllPlugins=function(){ne(),ie(),oe()},r.enableES5=ne,r.enableMapSet=ie,r.enablePatches=oe,r.finishDraft=pe,r.freeze=C,r.immerable=l,r.isDraft=h,r.isDraftable=_,r.nothing=u,r.original=function(e){return h(e)||p(23,e),e[c].base_},r.produce=ae,r.produceWithPatches=ue,r.setAutoFreeze=le,r.setUseProxies=ce},{}],489:[function(e,t,r){function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return!!e&&!!e[$]}function i(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===J}(e)||Array.isArray(e)||!!e[q]||!!(null===(t=e.constructor)||void 0===t?void 0:t[q])||f(e)||p(e))}function s(e,t,r){void 0===r&&(r=!1),0===a(e)?(r?Object.keys:Z)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function a(e){var t=e[$];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:f(e)?2:p(e)?3:0}function u(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){return 2===a(e)?e.get(t):e[t]}function c(e,t,r){var n=a(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){return W&&e instanceof Map}function p(e){return Y&&e instanceof Set}function h(e){return e.i||e.u}function _(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Q(e);delete t[$];for(var r=Z(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function E(e,t){return void 0===t&&(t=!1),m(e)||o(e)||!i(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=g),Object.freeze(e),t&&s(e,(function(e,t){return E(t,!0)}),!0)),e}function g(){n(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=ee[e];return t||n(18,e),t}function S(e,t){ee[e]||(ee[e]=t)}function T(){return V}function A(e,t){t&&(y("Patches"),e.o=[],e.v=[],e.s=t)}function b(e){O(e),e.p.forEach(v),e.p=null}function O(e){e===V&&(V=e.l)}function I(e){return V={p:[],l:V,h:e,_:!0,m:0}}function v(e){var t=e[$];0===t.t||1===t.t?t.j():t.O=!0}function N(e,t){t.m=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.S||y("ES5").P(t,e,o),o?(r[$].g&&(b(t),n(4)),i(e)&&(e=R(t,e),t.l||D(t,e)),t.o&&y("Patches").M(r[$].u,e,t.o,t.v)):e=R(t,r,[]),b(t),t.o&&t.s(t.o,t.v),e!==z?e:void 0}function R(e,t,r){if(m(t))return t;var n=t[$];if(!n)return s(t,(function(o,i){return C(e,n,t,o,i,r)}),!0),t;if(n.A!==e)return t;if(!n.g)return D(e,n.u,!0),n.u;if(!n.R){n.R=!0,n.A.m--;var o=4===n.t||5===n.t?n.i=_(n.k):n.i,i=o,a=!1;3===n.t&&(i=new Set(o),o.clear(),a=!0),s(i,(function(t,i){return C(e,n,o,t,i,r,a)})),D(e,o,!1),r&&e.o&&y("Patches").F(n,r,e.o,e.v)}return n.i}function C(e,t,r,n,s,a,l){if(o(s)){var d=R(e,s,a&&t&&3!==t.t&&!u(t.N,n)?a.concat(n):void 0);if(c(r,n,d),!o(d))return;e._=!1}else l&&r.add(s);if(i(s)&&!m(s)){if(!e.h.D&&e.m<1)return;R(e,s),t&&t.A.l||D(e,s)}}function D(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e._&&E(t,r)}function w(e,t){var r=e[$];return(r?h(r):e)[t]}function L(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function P(e){e.g||(e.g=!0,e.l&&P(e.l))}function M(e){e.i||(e.i=_(e.u))}function U(e,t,r){var n=f(t)?y("MapSet").K(t,r):p(t)?y("MapSet").$(t,r):e.S?function(e,t){var r=Array.isArray(e),n={t:r?1:0,A:t?t.A:T(),g:!1,R:!1,N:{},l:t,u:e,k:null,i:null,j:null,C:!1},o=n,i=te;r&&(o=[n],i=re);var s=Proxy.revocable(o,i),a=s.revoke,u=s.proxy;return n.k=u,n.j=a,u}(t,r):y("ES5").I(t,r);return(r?r.A:T()).p.push(n),n}function j(e){return o(e)||n(22,e),function e(t){if(!i(t))return t;var r,n=t[$],o=a(t);if(n){if(!n.g&&(n.t<4||!y("ES5").J(n)))return n.u;n.R=!0,r=k(t,o),n.R=!1}else r=k(t,o);return s(r,(function(t,o){n&&l(n.u,t)===o||c(r,t,e(o))})),3===o?new Set(r):r}(e)}function k(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return _(e)}function x(){function e(e,t){var r=i[e];return r?r.enumerable=t:i[e]=r={configurable:!0,enumerable:t,get:function(){return te.get(this[$],e)},set:function(t){te.set(this[$],e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var o=e[t][$];if(!o.g)switch(o.t){case 5:n(o)&&P(o);break;case 4:r(o)&&P(o)}}}function r(e){for(var t=e.u,r=e.k,n=Z(r),o=n.length-1;o>=0;o--){var i=n[o];if(i!==$){var s=t[i];if(void 0===s&&!u(t,i))return!0;var a=r[i],l=a&&a[$];if(l?l.u!==s:!d(a,s))return!0}}var c=!!t[$];return n.length!==Z(t).length+(c?0:1)}function n(e){var t=e.k;if(t.length!==e.u.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var i={};S("ES5",{I:function(t,r){var n=Array.isArray(t),o=function(t,r){if(t){for(var n=Array(r.length),o=0;o<r.length;o++)Object.defineProperty(n,""+o,e(o,!0));return n}var i=Q(r);delete i[$];for(var s=Z(i),a=0;a<s.length;a++){var u=s[a];i[u]=e(u,t||!!i[u].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={t:n?5:4,A:r?r.A:T(),g:!1,R:!1,N:{},l:r,u:t,k:o,i:null,O:!1,C:!1};return Object.defineProperty(o,$,{value:i,writable:!0}),o},P:function(e,r,i){i?o(r)&&r[$].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var r=t[$];if(r){var o=r.u,i=r.k,a=r.N,l=r.t;if(4===l)s(i,(function(t){t!==$&&(void 0!==o[t]||u(o,t)?a[t]||e(i[t]):(a[t]=!0,P(r)))})),s(o,(function(e){void 0!==i[e]||u(i,e)||(a[e]=!1,P(r))}));else if(5===l){if(n(r)&&(P(r),a.length=!0),i.length<o.length)for(var c=i.length;c<o.length;c++)a[c]=!1;else for(var d=o.length;d<i.length;d++)a[d]=!0;for(var f=Math.min(i.length,o.length),p=0;p<f;p++)i.hasOwnProperty(p)||(a[p]=!0),void 0===a[p]&&e(i[p])}}}}(e.p[0]),t(e.p))},J:function(e){return 4===e.t?r(e):n(e)}})}function F(){function e(t){if(!i(t))return t;if(Array.isArray(t))return t.map(e);if(f(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(p(t))return new Set(Array.from(t).map(e));var r=Object.create(Object.getPrototypeOf(t));for(var n in t)r[n]=e(t[n]);return u(t,q)&&(r[q]=t[q]),r}function t(t){return o(t)?e(t):t}var r="add";S("Patches",{W:function(t,o){return o.forEach((function(o){for(var i=o.path,s=o.op,u=t,c=0;c<i.length-1;c++){var d=a(u),f=i[c];"string"!=typeof f&&"number"!=typeof f&&(f=""+f),0!==d&&1!==d||"__proto__"!==f&&"constructor"!==f||n(24),"function"==typeof u&&"prototype"===f&&n(24),"object"!=typeof(u=l(u,f))&&n(15,i.join("/"))}var p=a(u),h=e(o.value),_=i[i.length-1];switch(s){case"replace":switch(p){case 2:return u.set(_,h);case 3:n(16);default:return u[_]=h}case r:switch(p){case 1:return"-"===_?u.push(h):u.splice(_,0,h);case 2:return u.set(_,h);case 3:return u.add(h);default:return u[_]=h}case"remove":switch(p){case 1:return u.splice(_,1);case 2:return u.delete(_);case 3:return u.delete(o.value);default:return delete u[_]}default:n(17,s)}})),t},F:function(e,n,o,i){switch(e.t){case 0:case 4:case 2:return function(e,n,o,i){var a=e.u,c=e.i;s(e.N,(function(e,s){var d=l(a,e),f=l(c,e),p=s?u(a,e)?"replace":r:"remove";if(d!==f||"replace"!==p){var h=n.concat(e);o.push("remove"===p?{op:p,path:h}:{op:p,path:h,value:f}),i.push(p===r?{op:"remove",path:h}:"remove"===p?{op:r,path:h,value:t(d)}:{op:"replace",path:h,value:t(d)})}}))}(e,n,o,i);case 5:case 1:return function(e,n,o,i){var s=e.u,a=e.N,u=e.i;if(u.length<s.length){var l=[u,s];s=l[0],u=l[1];var c=[i,o];o=c[0],i=c[1]}for(var d=0;d<s.length;d++)if(a[d]&&u[d]!==s[d]){var f=n.concat([d]);o.push({op:"replace",path:f,value:t(u[d])}),i.push({op:"replace",path:f,value:t(s[d])})}for(var p=s.length;p<u.length;p++){var h=n.concat([p]);o.push({op:r,path:h,value:t(u[p])})}s.length<u.length&&i.push({op:"replace",path:n.concat(["length"]),value:s.length})}(e,n,o,i);case 3:return function(e,t,n,o){var i=e.u,s=e.i,a=0;i.forEach((function(e){if(!s.has(e)){var i=t.concat([a]);n.push({op:"remove",path:i,value:e}),o.unshift({op:r,path:i,value:e})}a++})),a=0,s.forEach((function(e){if(!i.has(e)){var s=t.concat([a]);n.push({op:r,path:s,value:e}),o.unshift({op:"remove",path:s,value:e})}a++}))}(e,n,o,i)}},M:function(e,t,r,n){r.push({op:"replace",path:[],value:t===z?void 0:t}),n.push({op:"replace",path:[],value:e})}})}function B(){function e(e,t){function r(){this.constructor=e}a(e,t),e.prototype=(r.prototype=t.prototype,new r)}function t(e){e.i||(e.N=new Map,e.i=new Map(e.u))}function r(e){e.i||(e.i=new Set,e.u.forEach((function(t){if(i(t)){var r=U(e.A.h,t,e);e.p.set(t,r),e.i.add(r)}else e.i.add(t)})))}function o(e){e.O&&n(3,JSON.stringify(h(e)))}var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},u=function(){function r(e,t){return this[$]={t:2,l:t,A:t?t.A:T(),g:!1,R:!1,i:void 0,N:void 0,u:e,k:this,C:!1,O:!1},this}e(r,Map);var n=r.prototype;return Object.defineProperty(n,"size",{get:function(){return h(this[$]).size}}),n.has=function(e){return h(this[$]).has(e)},n.set=function(e,r){var n=this[$];return o(n),h(n).has(e)&&h(n).get(e)===r||(t(n),P(n),n.N.set(e,!0),n.i.set(e,r),n.N.set(e,!0)),this},n.delete=function(e){if(!this.has(e))return!1;var r=this[$];return o(r),t(r),P(r),r.u.has(e)?r.N.set(e,!1):r.N.delete(e),r.i.delete(e),!0},n.clear=function(){var e=this[$];o(e),h(e).size&&(t(e),P(e),e.N=new Map,s(e.u,(function(t){e.N.set(t,!1)})),e.i.clear())},n.forEach=function(e,t){var r=this;h(this[$]).forEach((function(n,o){e.call(t,r.get(o),o,r)}))},n.get=function(e){var r=this[$];o(r);var n=h(r).get(e);if(r.R||!i(n))return n;if(n!==r.u.get(e))return n;var s=U(r.A.h,n,r);return t(r),r.i.set(e,s),s},n.keys=function(){return h(this[$]).keys()},n.values=function(){var e,t=this,r=this.keys();return(e={})[X]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},n.entries=function(){var e,t=this,r=this.keys();return(e={})[X]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},n[X]=function(){return this.entries()},r}(),l=function(){function t(e,t){return this[$]={t:3,l:t,A:t?t.A:T(),g:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,C:!1},this}e(t,Set);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return h(this[$]).size}}),n.has=function(e){var t=this[$];return o(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},n.add=function(e){var t=this[$];return o(t),this.has(e)||(r(t),P(t),t.i.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[$];return o(t),r(t),P(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},n.clear=function(){var e=this[$];o(e),h(e).size&&(r(e),P(e),e.i.clear())},n.values=function(){var e=this[$];return o(e),r(e),e.i.values()},n.entries=function(){var e=this[$];return o(e),r(e),e.i.entries()},n.keys=function(){return this.values()},n[X]=function(){return this.values()},n.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},t}();S("MapSet",{K:function(e,t){return new u(e,t)},$:function(e,t){return new l(e,t)}})}var G;Object.defineProperty(r,"__esModule",{value:!0});var V,H="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),W="undefined"!=typeof Map,Y="undefined"!=typeof Set,K="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,z=H?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),q=H?Symbol.for("immer-draftable"):"__$immer_draftable",$=H?Symbol.for("immer-state"):"__$immer_state",X="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",J=""+Object.prototype.constructor,Z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Q=Object.getOwnPropertyDescriptors||function(e){var t={};return Z(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},ee={},te={get:function(e,t){if(t===$)return e;var r=h(e);if(!u(r,t))return function(e,t,r){var n,o=L(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.R||!i(n)?n:n===w(e.u,t)?(M(e),e.i[t]=U(e.A.h,n,e)):n},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,r){var n=L(h(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.g){var o=w(h(e),t),i=null==o?void 0:o[$];if(i&&i.u===r)return e.i[t]=r,e.N[t]=!1,!0;if(d(r,o)&&(void 0!==r||u(e.u,t)))return!0;M(e),P(e)}return e.i[t]===r&&(void 0!==r||t in e.i)||Number.isNaN(r)&&Number.isNaN(e.i[t])||(e.i[t]=r,e.N[t]=!0),!0},deleteProperty:function(e,t){return void 0!==w(e.u,t)||t in e.u?(e.N[t]=!1,M(e),P(e)):delete e.N[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var r=h(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){n(12)}},re={};s(te,(function(e,t){re[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),re.deleteProperty=function(e,t){return re.set.call(this,e,t,void 0)},re.set=function(e,t,r){return te.set.call(this,e[0],t,r,e[0])};var ne=function(){function e(e){var t=this;this.S=K,this.D=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var s=r;r=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return a.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var u;if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),i(e)){var l=I(t),c=U(t,e,void 0),d=!0;try{u=r(c),d=!1}finally{d?b(l):O(l)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(e){return A(l,o),N(e,l)}),(function(e){throw b(l),e})):(A(l,o),N(u,l))}if(!e||"object"!=typeof e){if(void 0===(u=r(e))&&(u=e),u===z&&(u=void 0),t.D&&E(u,!0),o){var f=[],p=[];y("Patches").M(e,u,f,p),o(f,p)}return u}n(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(o))}))};var n,o,i=t.produce(e,r,(function(e,t){n=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,n,o]})):[i,n,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||n(8),o(e)&&(e=j(e));var t=I(this),r=U(this,e,void 0);return r[$].C=!0,O(t),r},t.finishDraft=function(e,t){var r=(e&&e[$]).A;return A(r,t),N(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!K&&n(20),this.S=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var i=y("Patches").W;return o(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),oe=new ne,ie=oe.produce,se=oe.produceWithPatches.bind(oe),ae=oe.setAutoFreeze.bind(oe),ue=oe.setUseProxies.bind(oe),le=oe.applyPatches.bind(oe),ce=oe.createDraft.bind(oe),de=oe.finishDraft.bind(oe);r.Immer=ne,r.applyPatches=le,r.castDraft=function(e){return e},r.castImmutable=function(e){return e},r.createDraft=ce,r.current=j,r.default=ie,r.enableAllPlugins=function(){x(),B(),F()},r.enableES5=x,r.enableMapSet=B,r.enablePatches=F,r.finishDraft=de,r.freeze=E,r.immerable=q,r.isDraft=o,r.isDraftable=i,r.nothing=z,r.original=function(e){return o(e)||n(23,e),e[$].u},r.produce=ie,r.produceWithPatches=se,r.setAutoFreeze=ae,r.setUseProxies=ue},{}],490:[function(e,t,r){"use strict";t.exports=e("./immer.cjs.production.min.js")},{"./immer.cjs.development.js":488,"./immer.cjs.production.min.js":489}],491:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},{}],492:[function(e,t,r){t.exports=e("./lib")},{"./lib":494}],493:[function(e,t,r){e("./path-getter");var n=e("./utils"),o="undefined"!=typeof WeakMap?WeakMap:function(){var e=[],t=[];return{set:function(r,n){e.push(r),t.push(n)},get:function(r){for(var n=0;n<e.length;n++)if(e[n]===r)return t[n]}}};r.decycle=function e(t,r,i,s){"use strict";s=s||new o;var a=!Object.prototype.hasOwnProperty.call(r,"circular"),u=!1!==r.refs;return function t(o,l,c){var d,f,p,h="function"==typeof i?i(c||"",o):o;if(r.date&&h instanceof Date)return{$jsan:"d"+h.getTime()};if(r.regex&&h instanceof RegExp)return{$jsan:"r"+n.getRegexFlags(h)+","+h.source};if(r.function&&"function"==typeof h)return{$jsan:"f"+n.stringifyFunction(h,r.function)};if(r.nan&&"number"==typeof h&&isNaN(h))return{$jsan:"n"};if(r.infinity){if(Number.POSITIVE_INFINITY===h)return{$jsan:"i"};if(Number.NEGATIVE_INFINITY===h)return{$jsan:"y"}}if(r[void 0]&&void 0===h)return{$jsan:"u"};if(r.error&&h instanceof Error)return{$jsan:"e"+h.message};if(r.symbol&&"symbol"==typeof h){var _=Symbol.keyFor(h);return void 0!==_?{$jsan:"g"+_}:{$jsan:"s"+h.toString().slice(7,-1)}}if(r.map&&"function"==typeof Map&&h instanceof Map&&"function"==typeof Array.from)return{$jsan:"m"+JSON.stringify(e(Array.from(h),r,i,s))};if(r.set&&"function"==typeof Set&&h instanceof Set&&"function"==typeof Array.from)return{$jsan:"l"+JSON.stringify(e(Array.from(h),r,i,s))};if(h&&"function"==typeof h.toJSON)try{h=h.toJSON(c)}catch(e){var E=c||"$";return"toJSON failed for '"+(s.get(h)||E)+"'"}if(!("object"!=typeof h||null===h||h instanceof Boolean||h instanceof Date||h instanceof Number||h instanceof RegExp||h instanceof String||"symbol"==typeof h||h instanceof Error)){if("object"==typeof h){var g=s.get(h);if(g){if(a&&u)return{$jsan:g};if(0===l.split(".").slice(0,-1).join(".").indexOf(g))return a?{$jsan:g}:"function"==typeof r.circular?r.circular(h,l,g):r.circular;if(u)return{$jsan:g}}s.set(h,l)}if("[object Array]"===Object.prototype.toString.apply(h))for(p=[],d=0;d<h.length;d+=1)p[d]=t(h[d],l+"["+d+"]",d);else for(f in p={},h)if(Object.prototype.hasOwnProperty.call(h,f)){var m=/^\w+$/.test(f)?"."+f:"["+JSON.stringify(f)+"]";p[f]="$jsan"===f?[t(h[f],l+m)]:t(h[f],l+m,f)}return p}return h}(t,"$")},r.retrocycle=function(e){"use strict";return function t(r){var o,i,s;if(r&&"object"==typeof r)if("[object Array]"===Object.prototype.toString.apply(r))for(o=0;o<r.length;o+=1)(i=r[o])&&"object"==typeof i&&(i.$jsan?r[o]=n.restore(i.$jsan,e):t(i));else for(s in r){if("string"==typeof r[s]&&"$jsan"===s)return n.restore(r.$jsan,e);"$jsan"===s&&(r[s]=r[s][0]),"object"==typeof r[s]&&(i=r[s])&&"object"==typeof i&&(i.$jsan?r[s]=n.restore(i.$jsan,e):t(i))}return r}(e)}},{"./path-getter":495,"./utils":496}],494:[function(e,t,r){var n=e("./cycle");r.stringify=function(e,t,r,o){if(arguments.length<4)try{return 1===arguments.length?JSON.stringify(e):JSON.stringify.apply(JSON,arguments)}catch(e){}var i=o||!1;"boolean"==typeof i&&(i={date:i,function:i,regex:i,undefined:i,error:i,symbol:i,map:i,set:i,nan:i,infinity:i});var s=n.decycle(e,i,t);return 1===arguments.length?JSON.stringify(s):JSON.stringify(s,Array.isArray(t)?t:null,r)},r.parse=function(e,t){var r,o=/"\$jsan"/.test(e);return r=1===arguments.length?JSON.parse(e):JSON.parse(e,t),o&&(r=n.retrocycle(r)),r}},{"./cycle":493}],495:[function(e,t,r){t.exports=function(e,t){if("$"!==t)for(var r=function(e){var t,r=/(?:\.(\w+))|(?:\[(\d+)\])|(?:\["((?:[^\\"]|\\.)*)"\])/g,n=[];for(;t=r.exec(e);)n.push(t[1]||t[2]||t[3]);return n}(t),n=0;n<r.length;n++)void 0===e[t=r[n].toString().replace(/\\"/g,'"')]&&n!==r.length-1||(e=e[t]);return e}},{}],496:[function(e,t,r){var n=e("./path-getter"),o=e("./");r.getRegexFlags=function(e){var t="";return e.ignoreCase&&(t+="i"),e.global&&(t+="g"),e.multiline&&(t+="m"),t},r.stringifyFunction=function(e,t){if("function"==typeof t)return t(e);var r=e.toString(),n=r.match(/^[^{]*{|^[^=]*=>/),o=n?n[0]:"<function> ",i="}"===r[r.length-1]?"}":"";return o.replace(/\r\n|\n/g," ").replace(/\s+/g," ")+" /* ... */ "+i},r.restore=function(e,t){var r=e[0],i=e.slice(1);switch(r){case"$":return n(t,e);case"r":var s=i.indexOf(","),a=i.slice(0,s),u=i.slice(s+1);return RegExp(u,a);case"d":return new Date(+i);case"f":var l=function(){throw new Error("can't run jsan parsed function")};return l.toString=function(){return i},l;case"u":return;case"e":var c=new Error(i);return c.stack="Stack is unavailable for jsan parsed errors",c;case"s":return Symbol(i);case"g":return Symbol.for(i);case"m":return new Map(o.parse(i));case"l":return new Set(o.parse(i));case"n":return NaN;case"i":return 1/0;case"y":return-1/0;default:return console.warn("unknown type",e),e}}},{"./":494,"./path-getter":495}],497:[function(e,t,r){"use strict";var n,o;function i(){if(arguments.length)return i.from(arguments)}function s(){}n="An argument without append, prepend, or detach methods was given to `List",o=i.prototype,i.of=function(){return i.from.call(this,arguments)},i.from=function(e){var t,r,n,o=new this;if(e&&(t=e.length))for(r=-1;++r<t;)null!=(n=e[r])&&o.append(n);return o},o.head=null,o.tail=null,o.toArray=function(){for(var e=this.head,t=[];e;)t.push(e),e=e.next;return t},o.prepend=function(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw new Error(n+"#prepend`.");var t,r;return(r=(t=this).head)?r.prepend(e):(e.detach(),e.list=t,t.head=e,e)},o.append=function(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw new Error(n+"#append`.");var t,r,o;return(o=(t=this).tail)?o.append(e):(r=t.head)?r.append(e):(e.detach(),e.list=t,t.head=e,e)},i.Item=s;var a=s.prototype;a.next=null,a.prev=null,a.list=null,a.detach=function(){var e=this,t=e.list,r=e.prev,n=e.next;return t?(t.tail===e&&(t.tail=r),t.head===e&&(t.head=n),t.tail===t.head&&(t.tail=null),r&&(r.next=n),n&&(n.prev=r),e.prev=e.next=e.list=null,e):e},a.prepend=function(e){if(!(e&&e.append&&e.prepend&&e.detach))throw new Error(n+"Item#prepend`.");var t=this,r=t.list,o=t.prev;return!!r&&(e.detach(),o&&(e.prev=o,o.next=e),e.next=t,e.list=r,t.prev=e,t===r.head&&(r.head=e),r.tail||(r.tail=t),e)},a.append=function(e){if(!(e&&e.append&&e.prepend&&e.detach))throw new Error(n+"Item#append`.");var t=this,r=t.list,o=t.next;return!!r&&(e.detach(),o&&(e.next=o,o.prev=e),e.prev=t,e.list=r,t.next=e,t!==r.tail&&r.tail||(r.tail=e),e)},t.exports=i},{}],498:[function(e,t,r){"use strict";t.exports=e("./_source/linked-list.js")},{"./_source/linked-list.js":497}],499:[function(e,t,r){var n=9007199254740991,o="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]",a=/^(?:0|[1-9]\d*)$/;var u=Object.prototype,l=u.hasOwnProperty,c=u.toString,d=u.propertyIsEnumerable,f=Math.max;function p(e,t){var r=m(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&y(e)}(e)&&l.call(e,"callee")&&(!d.call(e,"callee")||c.call(e)==o)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var s in e)!t&&!l.call(e,s)||i&&("length"==s||E(s,n))||r.push(s);return r}function h(e,t,r){var n=e[t];l.call(e,t)&&g(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function _(e){if(!S(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,n,o=(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||u,t===n),i=[];for(var s in e)("constructor"!=s||!o&&l.call(e,s))&&i.push(s);return i}function E(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}function g(e,t){return e===t||e!=e&&t!=t}var m=Array.isArray;function y(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=S(e)?c.call(e):"";return t==i||t==s}(e)}function S(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var T,A,b,O=(T=function(e,t){!function(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var s=t[o],a=n?n(r[s],e[s],s,r,e):void 0;h(r,s,void 0===a?e[s]:a)}}(t,function(e){return y(e)?p(e,!0):_(e)}(t),e)},A=function(e,t){var r=-1,n=t.length,o=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(o=T.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(e,t,r){if(!S(r))return!1;var n=typeof t;return!!("number"==n?y(r)&&E(t,r.length):"string"==n&&t in r)&&g(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var s=t[r];s&&T(e,s,r,o)}return e},b=f(void 0===b?A.length-1:b,0),function(){for(var e=arguments,t=-1,r=f(e.length-b,0),n=Array(r);++t<r;)n[t]=e[b+t];t=-1;for(var o=Array(b+1);++t<b;)o[t]=e[t];return o[b]=n,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(A,this,o)});t.exports=O},{}],500:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"DataView");t.exports=n},{"./_getNative":564,"./_root":602}],501:[function(e,t,r){var n=e("./_hashClear"),o=e("./_hashDelete"),i=e("./_hashGet"),s=e("./_hashHas"),a=e("./_hashSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},{"./_hashClear":571,"./_hashDelete":572,"./_hashGet":573,"./_hashHas":574,"./_hashSet":575}],502:[function(e,t,r){var n=e("./_listCacheClear"),o=e("./_listCacheDelete"),i=e("./_listCacheGet"),s=e("./_listCacheHas"),a=e("./_listCacheSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},{"./_listCacheClear":583,"./_listCacheDelete":584,"./_listCacheGet":585,"./_listCacheHas":586,"./_listCacheSet":587}],503:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Map");t.exports=n},{"./_getNative":564,"./_root":602}],504:[function(e,t,r){var n=e("./_mapCacheClear"),o=e("./_mapCacheDelete"),i=e("./_mapCacheGet"),s=e("./_mapCacheHas"),a=e("./_mapCacheSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},{"./_mapCacheClear":588,"./_mapCacheDelete":589,"./_mapCacheGet":590,"./_mapCacheHas":591,"./_mapCacheSet":592}],505:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Promise");t.exports=n},{"./_getNative":564,"./_root":602}],506:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Set");t.exports=n},{"./_getNative":564,"./_root":602}],507:[function(e,t,r){var n=e("./_MapCache"),o=e("./_setCacheAdd"),i=e("./_setCacheHas");function s(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,t.exports=s},{"./_MapCache":504,"./_setCacheAdd":603,"./_setCacheHas":604}],508:[function(e,t,r){var n=e("./_ListCache"),o=e("./_stackClear"),i=e("./_stackDelete"),s=e("./_stackGet"),a=e("./_stackHas"),u=e("./_stackSet");function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=u,t.exports=l},{"./_ListCache":502,"./_stackClear":608,"./_stackDelete":609,"./_stackGet":610,"./_stackHas":611,"./_stackSet":612}],509:[function(e,t,r){var n=e("./_root").Symbol;t.exports=n},{"./_root":602}],510:[function(e,t,r){var n=e("./_root").Uint8Array;t.exports=n},{"./_root":602}],511:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"WeakMap");t.exports=n},{"./_getNative":564,"./_root":602}],512:[function(e,t,r){t.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},{}],513:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}},{}],514:[function(e,t,r){var n=e("./_baseIndexOf");t.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},{"./_baseIndexOf":531}],515:[function(e,t,r){t.exports=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}},{}],516:[function(e,t,r){var n=e("./_baseTimes"),o=e("./isArguments"),i=e("./isArray"),s=e("./isBuffer"),a=e("./_isIndex"),u=e("./isTypedArray"),l=Object.prototype.hasOwnProperty;t.exports=function(e,t){var r=i(e),c=!r&&o(e),d=!r&&!c&&s(e),f=!r&&!c&&!d&&u(e),p=r||c||d||f,h=p?n(e.length,String):[],_=h.length;for(var E in e)!t&&!l.call(e,E)||p&&("length"==E||d&&("offset"==E||"parent"==E)||f&&("buffer"==E||"byteLength"==E||"byteOffset"==E)||a(E,_))||h.push(E);return h}},{"./_baseTimes":547,"./_isIndex":577,"./isArguments":623,"./isArray":624,"./isBuffer":627,"./isTypedArray":634}],517:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},{}],518:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},{}],519:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},{}],520:[function(e,t,r){var n=e("./eq");t.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},{"./eq":619}],521:[function(e,t,r){var n=e("./_defineProperty");t.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},{"./_defineProperty":556}],522:[function(e,t,r){var n=e("./_SetCache"),o=e("./_arrayIncludes"),i=e("./_arrayIncludesWith"),s=e("./_arrayMap"),a=e("./_baseUnary"),u=e("./_cacheHas");t.exports=function(e,t,r,l){var c=-1,d=o,f=!0,p=e.length,h=[],_=t.length;if(!p)return h;r&&(t=s(t,a(r))),l?(d=i,f=!1):t.length>=200&&(d=u,f=!1,t=new n(t));e:for(;++c<p;){var E=e[c],g=null==r?E:r(E);if(E=l||0!==E?E:0,f&&g==g){for(var m=_;m--;)if(t[m]===g)continue e;h.push(E)}else d(t,g,l)||h.push(E)}return h}},{"./_SetCache":507,"./_arrayIncludes":514,"./_arrayIncludesWith":515,"./_arrayMap":517,"./_baseUnary":549,"./_cacheHas":551}],523:[function(e,t,r){t.exports=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},{}],524:[function(e,t,r){var n=e("./_arrayPush"),o=e("./_isFlattenable");t.exports=function e(t,r,i,s,a){var u=-1,l=t.length;for(i||(i=o),a||(a=[]);++u<l;){var c=t[u];r>0&&i(c)?r>1?e(c,r-1,i,s,a):n(a,c):s||(a[a.length]=c)}return a}},{"./_arrayPush":518,"./_isFlattenable":576}],525:[function(e,t,r){var n=e("./_createBaseFor")();t.exports=n},{"./_createBaseFor":554}],526:[function(e,t,r){var n=e("./_baseFor"),o=e("./keys");t.exports=function(e,t){return e&&n(e,t,o)}},{"./_baseFor":525,"./keys":635}],527:[function(e,t,r){var n=e("./_castPath"),o=e("./_toKey");t.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[o(t[r++])];return r&&r==i?e:void 0}},{"./_castPath":552,"./_toKey":615}],528:[function(e,t,r){var n=e("./_arrayPush"),o=e("./isArray");t.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},{"./_arrayPush":518,"./isArray":624}],529:[function(e,t,r){var n=e("./_Symbol"),o=e("./_getRawTag"),i=e("./_objectToString"),s=n?n.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?o(e):i(e)}},{"./_Symbol":509,"./_getRawTag":566,"./_objectToString":599}],530:[function(e,t,r){t.exports=function(e,t){return null!=e&&t in Object(e)}},{}],531:[function(e,t,r){var n=e("./_baseFindIndex"),o=e("./_baseIsNaN"),i=e("./_strictIndexOf");t.exports=function(e,t,r){return t==t?i(e,t,r):n(e,o,r)}},{"./_baseFindIndex":523,"./_baseIsNaN":536,"./_strictIndexOf":613}],532:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isObjectLike");t.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},{"./_baseGetTag":529,"./isObjectLike":631}],533:[function(e,t,r){var n=e("./_baseIsEqualDeep"),o=e("./isObjectLike");t.exports=function e(t,r,i,s,a){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,i,s,e,a))}},{"./_baseIsEqualDeep":534,"./isObjectLike":631}],534:[function(e,t,r){var n=e("./_Stack"),o=e("./_equalArrays"),i=e("./_equalByTag"),s=e("./_equalObjects"),a=e("./_getTag"),u=e("./isArray"),l=e("./isBuffer"),c=e("./isTypedArray"),d="[object Arguments]",f="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,_,E,g){var m=u(e),y=u(t),S=m?f:a(e),T=y?f:a(t),A=(S=S==d?p:S)==p,b=(T=T==d?p:T)==p,O=S==T;if(O&&l(e)){if(!l(t))return!1;m=!0,A=!1}if(O&&!A)return g||(g=new n),m||c(e)?o(e,t,r,_,E,g):i(e,t,S,r,_,E,g);if(!(1&r)){var I=A&&h.call(e,"__wrapped__"),v=b&&h.call(t,"__wrapped__");if(I||v){var N=I?e.value():e,R=v?t.value():t;return g||(g=new n),E(N,R,r,_,g)}}return!!O&&(g||(g=new n),s(e,t,r,_,E,g))}},{"./_Stack":508,"./_equalArrays":557,"./_equalByTag":558,"./_equalObjects":559,"./_getTag":568,"./isArray":624,"./isBuffer":627,"./isTypedArray":634}],535:[function(e,t,r){var n=e("./_Stack"),o=e("./_baseIsEqual");t.exports=function(e,t,r,i){var s=r.length,a=s,u=!i;if(null==e)return!a;for(e=Object(e);s--;){var l=r[s];if(u&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var c=(l=r[s])[0],d=e[c],f=l[1];if(u&&l[2]){if(void 0===d&&!(c in e))return!1}else{var p=new n;if(i)var h=i(d,f,c,e,t,p);if(!(void 0===h?o(f,d,3,i,p):h))return!1}}return!0}},{"./_Stack":508,"./_baseIsEqual":533}],536:[function(e,t,r){t.exports=function(e){return e!=e}},{}],537:[function(e,t,r){var n=e("./isFunction"),o=e("./_isMasked"),i=e("./isObject"),s=e("./_toSource"),a=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,d=l.hasOwnProperty,f=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!i(e)||o(e))&&(n(e)?f:a).test(s(e))}},{"./_isMasked":580,"./_toSource":616,"./isFunction":628,"./isObject":630}],538:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isLength"),i=e("./isObjectLike"),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(e){return i(e)&&o(e.length)&&!!s[n(e)]}},{"./_baseGetTag":529,"./isLength":629,"./isObjectLike":631}],539:[function(e,t,r){var n=e("./_baseMatches"),o=e("./_baseMatchesProperty"),i=e("./identity"),s=e("./isArray"),a=e("./property");t.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?o(e[0],e[1]):n(e):a(e)}},{"./_baseMatches":541,"./_baseMatchesProperty":542,"./identity":622,"./isArray":624,"./property":639}],540:[function(e,t,r){var n=e("./_isPrototype"),o=e("./_nativeKeys"),i=Object.prototype.hasOwnProperty;t.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},{"./_isPrototype":581,"./_nativeKeys":597}],541:[function(e,t,r){var n=e("./_baseIsMatch"),o=e("./_getMatchData"),i=e("./_matchesStrictComparable");t.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},{"./_baseIsMatch":535,"./_getMatchData":563,"./_matchesStrictComparable":594}],542:[function(e,t,r){var n=e("./_baseIsEqual"),o=e("./get"),i=e("./hasIn"),s=e("./_isKey"),a=e("./_isStrictComparable"),u=e("./_matchesStrictComparable"),l=e("./_toKey");t.exports=function(e,t){return s(e)&&a(t)?u(l(e),t):function(r){var s=o(r,e);return void 0===s&&s===t?i(r,e):n(t,s,3)}}},{"./_baseIsEqual":533,"./_isKey":578,"./_isStrictComparable":582,"./_matchesStrictComparable":594,"./_toKey":615,"./get":620,"./hasIn":621}],543:[function(e,t,r){t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},{}],544:[function(e,t,r){var n=e("./_baseGet");t.exports=function(e){return function(t){return n(t,e)}}},{"./_baseGet":527}],545:[function(e,t,r){var n=e("./identity"),o=e("./_overRest"),i=e("./_setToString");t.exports=function(e,t){return i(o(e,t,n),e+"")}},{"./_overRest":601,"./_setToString":606,"./identity":622}],546:[function(e,t,r){var n=e("./constant"),o=e("./_defineProperty"),i=e("./identity"),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;t.exports=s},{"./_defineProperty":556,"./constant":617,"./identity":622}],547:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},{}],548:[function(e,t,r){var n=e("./_Symbol"),o=e("./_arrayMap"),i=e("./isArray"),s=e("./isSymbol"),a=n?n.prototype:void 0,u=a?a.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(s(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r}},{"./_Symbol":509,"./_arrayMap":517,"./isArray":624,"./isSymbol":633}],549:[function(e,t,r){t.exports=function(e){return function(t){return e(t)}}},{}],550:[function(e,t,r){var n=e("./_SetCache"),o=e("./_arrayIncludes"),i=e("./_arrayIncludesWith"),s=e("./_cacheHas"),a=e("./_createSet"),u=e("./_setToArray");t.exports=function(e,t,r){var l=-1,c=o,d=e.length,f=!0,p=[],h=p;if(r)f=!1,c=i;else if(d>=200){var _=t?null:a(e);if(_)return u(_);f=!1,c=s,h=new n}else h=t?[]:p;e:for(;++l<d;){var E=e[l],g=t?t(E):E;if(E=r||0!==E?E:0,f&&g==g){for(var m=h.length;m--;)if(h[m]===g)continue e;t&&h.push(g),p.push(E)}else c(h,g,r)||(h!==p&&h.push(g),p.push(E))}return p}},{"./_SetCache":507,"./_arrayIncludes":514,"./_arrayIncludesWith":515,"./_cacheHas":551,"./_createSet":555,"./_setToArray":605}],551:[function(e,t,r){t.exports=function(e,t){return e.has(t)}},{}],552:[function(e,t,r){var n=e("./isArray"),o=e("./_isKey"),i=e("./_stringToPath"),s=e("./toString");t.exports=function(e,t){return n(e)?e:o(e,t)?[e]:i(s(e))}},{"./_isKey":578,"./_stringToPath":614,"./isArray":624,"./toString":642}],553:[function(e,t,r){var n=e("./_root")["__core-js_shared__"];t.exports=n},{"./_root":602}],554:[function(e,t,r){t.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var u=s[e?a:++o];if(!1===r(i[u],u,i))break}return t}}},{}],555:[function(e,t,r){var n=e("./_Set"),o=e("./noop"),i=e("./_setToArray"),s=n&&1/i(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;t.exports=s},{"./_Set":506,"./_setToArray":605,"./noop":638}],556:[function(e,t,r){var n=e("./_getNative"),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=o},{"./_getNative":564}],557:[function(e,t,r){var n=e("./_SetCache"),o=e("./_arraySome"),i=e("./_cacheHas");t.exports=function(e,t,r,s,a,u){var l=1&r,c=e.length,d=t.length;if(c!=d&&!(l&&d>c))return!1;var f=u.get(e),p=u.get(t);if(f&&p)return f==t&&p==e;var h=-1,_=!0,E=2&r?new n:void 0;for(u.set(e,t),u.set(t,e);++h<c;){var g=e[h],m=t[h];if(s)var y=l?s(m,g,h,t,e,u):s(g,m,h,e,t,u);if(void 0!==y){if(y)continue;_=!1;break}if(E){if(!o(t,(function(e,t){if(!i(E,t)&&(g===e||a(g,e,r,s,u)))return E.push(t)}))){_=!1;break}}else if(g!==m&&!a(g,m,r,s,u)){_=!1;break}}return u.delete(e),u.delete(t),_}},{"./_SetCache":507,"./_arraySome":519,"./_cacheHas":551}],558:[function(e,t,r){var n=e("./_Symbol"),o=e("./_Uint8Array"),i=e("./eq"),s=e("./_equalArrays"),a=e("./_mapToArray"),u=e("./_setToArray"),l=n?n.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(e,t,r,n,l,d,f){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var h=1&n;if(p||(p=u),e.size!=t.size&&!h)return!1;var _=f.get(e);if(_)return _==t;n|=2,f.set(e,t);var E=s(p(e),p(t),n,l,d,f);return f.delete(e),E;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},{"./_Symbol":509,"./_Uint8Array":510,"./_equalArrays":557,"./_mapToArray":593,"./_setToArray":605,"./eq":619}],559:[function(e,t,r){var n=e("./_getAllKeys"),o=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,i,s,a){var u=1&r,l=n(e),c=l.length;if(c!=n(t).length&&!u)return!1;for(var d=c;d--;){var f=l[d];if(!(u?f in t:o.call(t,f)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var _=!0;a.set(e,t),a.set(t,e);for(var E=u;++d<c;){var g=e[f=l[d]],m=t[f];if(i)var y=u?i(m,g,f,t,e,a):i(g,m,f,e,t,a);if(!(void 0===y?g===m||s(g,m,r,i,a):y)){_=!1;break}E||(E="constructor"==f)}if(_&&!E){var S=e.constructor,T=t.constructor;S==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof T&&T instanceof T||(_=!1)}return a.delete(e),a.delete(t),_}},{"./_getAllKeys":561}],560:[function(e,t,r){(function(e){(function(){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],561:[function(e,t,r){var n=e("./_baseGetAllKeys"),o=e("./_getSymbols"),i=e("./keys");t.exports=function(e){return n(e,i,o)}},{"./_baseGetAllKeys":528,"./_getSymbols":567,"./keys":635}],562:[function(e,t,r){var n=e("./_isKeyable");t.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},{"./_isKeyable":579}],563:[function(e,t,r){var n=e("./_isStrictComparable"),o=e("./keys");t.exports=function(e){for(var t=o(e),r=t.length;r--;){var i=t[r],s=e[i];t[r]=[i,s,n(s)]}return t}},{"./_isStrictComparable":582,"./keys":635}],564:[function(e,t,r){var n=e("./_baseIsNative"),o=e("./_getValue");t.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},{"./_baseIsNative":537,"./_getValue":569}],565:[function(e,t,r){var n=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=n},{"./_overArg":600}],566:[function(e,t,r){var n=e("./_Symbol"),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=n?n.toStringTag:void 0;t.exports=function(e){var t=i.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[a]=r:delete e[a]),o}},{"./_Symbol":509}],567:[function(e,t,r){var n=e("./_arrayFilter"),o=e("./stubArray"),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),n(s(e),(function(t){return i.call(e,t)})))}:o;t.exports=a},{"./_arrayFilter":513,"./stubArray":640}],568:[function(e,t,r){var n=e("./_DataView"),o=e("./_Map"),i=e("./_Promise"),s=e("./_Set"),a=e("./_WeakMap"),u=e("./_baseGetTag"),l=e("./_toSource"),c="[object Map]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",h="[object DataView]",_=l(n),E=l(o),g=l(i),m=l(s),y=l(a),S=u;(n&&S(new n(new ArrayBuffer(1)))!=h||o&&S(new o)!=c||i&&S(i.resolve())!=d||s&&S(new s)!=f||a&&S(new a)!=p)&&(S=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?l(r):"";if(n)switch(n){case _:return h;case E:return c;case g:return d;case m:return f;case y:return p}return t}),t.exports=S},{"./_DataView":500,"./_Map":503,"./_Promise":505,"./_Set":506,"./_WeakMap":511,"./_baseGetTag":529,"./_toSource":616}],569:[function(e,t,r){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],570:[function(e,t,r){var n=e("./_castPath"),o=e("./isArguments"),i=e("./isArray"),s=e("./_isIndex"),a=e("./isLength"),u=e("./_toKey");t.exports=function(e,t,r){for(var l=-1,c=(t=n(t,e)).length,d=!1;++l<c;){var f=u(t[l]);if(!(d=null!=e&&r(e,f)))break;e=e[f]}return d||++l!=c?d:!!(c=null==e?0:e.length)&&a(c)&&s(f,c)&&(i(e)||o(e))}},{"./_castPath":552,"./_isIndex":577,"./_toKey":615,"./isArguments":623,"./isArray":624,"./isLength":629}],571:[function(e,t,r){var n=e("./_nativeCreate");t.exports=function(){this.__data__=n?n(null):{},this.size=0}},{"./_nativeCreate":596}],572:[function(e,t,r){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],573:[function(e,t,r){var n=e("./_nativeCreate"),o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},{"./_nativeCreate":596}],574:[function(e,t,r){var n=e("./_nativeCreate"),o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},{"./_nativeCreate":596}],575:[function(e,t,r){var n=e("./_nativeCreate");t.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},{"./_nativeCreate":596}],576:[function(e,t,r){var n=e("./_Symbol"),o=e("./isArguments"),i=e("./isArray"),s=n?n.isConcatSpreadable:void 0;t.exports=function(e){return i(e)||o(e)||!!(s&&e&&e[s])}},{"./_Symbol":509,"./isArguments":623,"./isArray":624}],577:[function(e,t,r){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},{}],578:[function(e,t,r){var n=e("./isArray"),o=e("./isSymbol"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))}},{"./isArray":624,"./isSymbol":633}],579:[function(e,t,r){t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],580:[function(e,t,r){var n,o=e("./_coreJsData"),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(e){return!!i&&i in e}},{"./_coreJsData":553}],581:[function(e,t,r){var n=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},{}],582:[function(e,t,r){var n=e("./isObject");t.exports=function(e){return e==e&&!n(e)}},{"./isObject":630}],583:[function(e,t,r){t.exports=function(){this.__data__=[],this.size=0}},{}],584:[function(e,t,r){var n=e("./_assocIndexOf"),o=Array.prototype.splice;t.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},{"./_assocIndexOf":520}],585:[function(e,t,r){var n=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},{"./_assocIndexOf":520}],586:[function(e,t,r){var n=e("./_assocIndexOf");t.exports=function(e){return n(this.__data__,e)>-1}},{"./_assocIndexOf":520}],587:[function(e,t,r){var n=e("./_assocIndexOf");t.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},{"./_assocIndexOf":520}],588:[function(e,t,r){var n=e("./_Hash"),o=e("./_ListCache"),i=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},{"./_Hash":501,"./_ListCache":502,"./_Map":503}],589:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":562}],590:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){return n(this,e).get(e)}},{"./_getMapData":562}],591:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){return n(this,e).has(e)}},{"./_getMapData":562}],592:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},{"./_getMapData":562}],593:[function(e,t,r){t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},{}],594:[function(e,t,r){t.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},{}],595:[function(e,t,r){var n=e("./memoize");t.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},{"./memoize":637}],596:[function(e,t,r){var n=e("./_getNative")(Object,"create");t.exports=n},{"./_getNative":564}],597:[function(e,t,r){var n=e("./_overArg")(Object.keys,Object);t.exports=n},{"./_overArg":600}],598:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof r&&r&&!r.nodeType&&r,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=a},{"./_freeGlobal":560}],599:[function(e,t,r){var n=Object.prototype.toString;t.exports=function(e){return n.call(e)}},{}],600:[function(e,t,r){t.exports=function(e,t){return function(r){return e(t(r))}}},{}],601:[function(e,t,r){var n=e("./_apply"),o=Math.max;t.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=o(i.length-t,0),u=Array(a);++s<a;)u[s]=i[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=i[s];return l[t]=r(u),n(e,this,l)}}},{"./_apply":512}],602:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},{"./_freeGlobal":560}],603:[function(e,t,r){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},{}],604:[function(e,t,r){t.exports=function(e){return this.__data__.has(e)}},{}],605:[function(e,t,r){t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},{}],606:[function(e,t,r){var n=e("./_baseSetToString"),o=e("./_shortOut")(n);t.exports=o},{"./_baseSetToString":546,"./_shortOut":607}],607:[function(e,t,r){var n=Date.now;t.exports=function(e){var t=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},{}],608:[function(e,t,r){var n=e("./_ListCache");t.exports=function(){this.__data__=new n,this.size=0}},{"./_ListCache":502}],609:[function(e,t,r){t.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},{}],610:[function(e,t,r){t.exports=function(e){return this.__data__.get(e)}},{}],611:[function(e,t,r){t.exports=function(e){return this.__data__.has(e)}},{}],612:[function(e,t,r){var n=e("./_ListCache"),o=e("./_Map"),i=e("./_MapCache");t.exports=function(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!o||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(s)}return r.set(e,t),this.size=r.size,this}},{"./_ListCache":502,"./_Map":503,"./_MapCache":504}],613:[function(e,t,r){t.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},{}],614:[function(e,t,r){var n=e("./_memoizeCapped"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)})),t}));t.exports=s},{"./_memoizeCapped":595}],615:[function(e,t,r){var n=e("./isSymbol");t.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},{"./isSymbol":633}],616:[function(e,t,r){var n=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],617:[function(e,t,r){t.exports=function(e){return function(){return e}}},{}],618:[function(e,t,r){var n=e("./_baseDifference"),o=e("./_baseFlatten"),i=e("./_baseRest"),s=e("./isArrayLikeObject"),a=i((function(e,t){return s(e)?n(e,o(t,1,s,!0)):[]}));t.exports=a},{"./_baseDifference":522,"./_baseFlatten":524,"./_baseRest":545,"./isArrayLikeObject":626}],619:[function(e,t,r){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],620:[function(e,t,r){var n=e("./_baseGet");t.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},{"./_baseGet":527}],621:[function(e,t,r){var n=e("./_baseHasIn"),o=e("./_hasPath");t.exports=function(e,t){return null!=e&&o(e,t,n)}},{"./_baseHasIn":530,"./_hasPath":570}],622:[function(e,t,r){t.exports=function(e){return e}},{}],623:[function(e,t,r){var n=e("./_baseIsArguments"),o=e("./isObjectLike"),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};t.exports=u},{"./_baseIsArguments":532,"./isObjectLike":631}],624:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],625:[function(e,t,r){var n=e("./isFunction"),o=e("./isLength");t.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},{"./isFunction":628,"./isLength":629}],626:[function(e,t,r){var n=e("./isArrayLike"),o=e("./isObjectLike");t.exports=function(e){return o(e)&&n(e)}},{"./isArrayLike":625,"./isObjectLike":631}],627:[function(e,t,r){var n=e("./_root"),o=e("./stubFalse"),i="object"==typeof r&&r&&!r.nodeType&&r,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i?n.Buffer:void 0,u=(a?a.isBuffer:void 0)||o;t.exports=u},{"./_root":602,"./stubFalse":641}],628:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isObject");t.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},{"./_baseGetTag":529,"./isObject":630}],629:[function(e,t,r){t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},{}],630:[function(e,t,r){t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},{}],631:[function(e,t,r){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],632:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./_getPrototype"),i=e("./isObjectLike"),s=Function.prototype,a=Object.prototype,u=s.toString,l=a.hasOwnProperty,c=u.call(Object);t.exports=function(e){if(!i(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==c}},{"./_baseGetTag":529,"./_getPrototype":565,"./isObjectLike":631}],633:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isObjectLike");t.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},{"./_baseGetTag":529,"./isObjectLike":631}],634:[function(e,t,r){var n=e("./_baseIsTypedArray"),o=e("./_baseUnary"),i=e("./_nodeUtil"),s=i&&i.isTypedArray,a=s?o(s):n;t.exports=a},{"./_baseIsTypedArray":538,"./_baseUnary":549,"./_nodeUtil":598}],635:[function(e,t,r){var n=e("./_arrayLikeKeys"),o=e("./_baseKeys"),i=e("./isArrayLike");t.exports=function(e){return i(e)?n(e):o(e)}},{"./_arrayLikeKeys":516,"./_baseKeys":540,"./isArrayLike":625}],636:[function(e,t,r){var n=e("./_baseAssignValue"),o=e("./_baseForOwn"),i=e("./_baseIteratee");t.exports=function(e,t){var r={};return t=i(t,3),o(e,(function(e,o,i){n(r,o,t(e,o,i))})),r}},{"./_baseAssignValue":521,"./_baseForOwn":526,"./_baseIteratee":539}],637:[function(e,t,r){var n=e("./_MapCache");function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(o.Cache||n),r}o.Cache=n,t.exports=o},{"./_MapCache":504}],638:[function(e,t,r){t.exports=function(){}},{}],639:[function(e,t,r){var n=e("./_baseProperty"),o=e("./_basePropertyDeep"),i=e("./_isKey"),s=e("./_toKey");t.exports=function(e){return i(e)?n(s(e)):o(e)}},{"./_baseProperty":543,"./_basePropertyDeep":544,"./_isKey":578,"./_toKey":615}],640:[function(e,t,r){t.exports=function(){return[]}},{}],641:[function(e,t,r){t.exports=function(){return!1}},{}],642:[function(e,t,r){var n=e("./_baseToString");t.exports=function(e){return null==e?"":n(e)}},{"./_baseToString":548}],643:[function(e,t,r){var n=e("./_baseFlatten"),o=e("./_baseRest"),i=e("./_baseUniq"),s=e("./isArrayLikeObject"),a=o((function(e){return i(n(e,1,s,!0))}));t.exports=a},{"./_baseFlatten":524,"./_baseRest":545,"./_baseUniq":550,"./isArrayLikeObject":626}],644:[function(e,t,r){var n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;
/**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   */
var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var i={},s={};function a(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=l(e,0,!0),o&&(s[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(r=l(e,e<0?-1:0,!1),o&&(i[e]=r),r)}function u(e,t){if(isNaN(e))return t?m:g;if(t){if(e<0)return m;if(e>=h)return b}else{if(e<=-_)return O;if(e+1>=_)return A}return e<0?u(-e,t).neg():l(e%p|0,e/p|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=u,r.fromBits=l;var c=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?m:g;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var o=u(c(r,8)),i=g,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),r);if(a<8){var f=u(c(r,a));i=i.mul(f).add(u(l))}else i=(i=i.mul(o)).add(u(l))}return i.unsigned=t,i}function f(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?d(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=f;var p=4294967296,h=p*p,_=h/2,E=a(1<<24),g=a(0);r.ZERO=g;var m=a(0,!0);r.UZERO=m;var y=a(1);r.ONE=y;var S=a(1,!0);r.UONE=S;var T=a(-1);r.NEG_ONE=T;var A=l(-1,2147483647,!1);r.MAX_VALUE=A;var b=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=b;var O=l(0,-2147483648,!1);r.MIN_VALUE=O;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var t=u(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=u(c(e,6),this.unsigned),i=this,s="";;){var a=i.div(o),l=(i.sub(a.mul(o)).toInt()>>>0).toString(e);if((i=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return n(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(n(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(y)},I.neg=I.negate,I.add=function(e){n(e)||(e=f(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,c=0,d=0,p=0,h=0;return p+=(h+=i+(65535&e.low))>>>16,d+=(p+=o+u)>>>16,c+=(d+=r+a)>>>16,c+=t+s,l((p&=65535)<<16|(h&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return n(e)||(e=f(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=f(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?m:g;if(this.eq(O))return e.isOdd()?O:g;if(e.eq(O))return this.isOdd()?O:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(E)&&e.lt(E))return u(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,h=0,_=0,y=0,S=0;return y+=(S+=s*p)>>>16,_+=(y+=i*p)>>>16,y&=65535,_+=(y+=s*d)>>>16,h+=(_+=o*p)>>>16,_&=65535,h+=(_+=i*d)>>>16,_&=65535,h+=(_+=s*c)>>>16,h+=r*p+o*d+i*c+s*a,l((y&=65535)<<16|(S&=65535),(h&=65535)<<16|(_&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(n(e)||(e=f(e)),e.isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return S;i=m}else{if(this.eq(O))return e.eq(y)||e.eq(T)?O:e.eq(O)?y:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:T:(o=this.sub(e.mul(r)),i=r.add(o.div(e)));if(e.eq(O))return this.unsigned?m:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),a=s<=48?1:c(2,s-48),d=u(r),p=d.mul(e);p.isNegative()||p.gt(o);)p=(d=u(r-=a,this.unsigned)).mul(e);d.isZero()&&(d=y),i=i.add(d),o=o.sub(p)}return i},I.div=I.divide,I.modulo=function(e){return n(e)||(e=f(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return l(~this.low,~this.high,this.unsigned)},I.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},I.clz=I.countLeadingZeros,I.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},I.ctz=I.countTrailingZeros,I.and=function(e){return n(e)||(e=f(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return n(e)||(e=f(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return n(e)||(e=f(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):l(32===e?this.high:this.high>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?l(this.high,this.low,this.unsigned):e<32?(t=32-e,l(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),l(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},I.rotl=I.rotateLeft,I.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?l(this.high,this.low,this.unsigned):e<32?(t=32-e,l(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),l(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},I.rotr=I.rotateRight,I.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var v=r;return e.default=v,"default"in e?e.default:e}({});"function"==typeof define&&define.amd?define([],(function(){return n})):"object"==typeof t&&"object"==typeof r&&(t.exports=n)},{}],645:[function(e,t,r){"use strict";var n=e("inherits"),o=e("hash-base"),i=e("safe-buffer").Buffer,s=new Array(16);function a(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(e,t){return e<<t|e>>>32-t}function l(e,t,r,n,o,i,s){return u(e+(t&r|~t&n)+o+i|0,s)+t|0}function c(e,t,r,n,o,i,s){return u(e+(t&n|r&~n)+o+i|0,s)+t|0}function d(e,t,r,n,o,i,s){return u(e+(t^r^n)+o+i|0,s)+t|0}function f(e,t,r,n,o,i,s){return u(e+(r^(t|~n))+o+i|0,s)+t|0}n(a,o),a.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,o=this._c,i=this._d;r=l(r,n,o,i,e[0],3614090360,7),i=l(i,r,n,o,e[1],3905402710,12),o=l(o,i,r,n,e[2],606105819,17),n=l(n,o,i,r,e[3],3250441966,22),r=l(r,n,o,i,e[4],4118548399,7),i=l(i,r,n,o,e[5],1200080426,12),o=l(o,i,r,n,e[6],2821735955,17),n=l(n,o,i,r,e[7],4249261313,22),r=l(r,n,o,i,e[8],1770035416,7),i=l(i,r,n,o,e[9],2336552879,12),o=l(o,i,r,n,e[10],4294925233,17),n=l(n,o,i,r,e[11],2304563134,22),r=l(r,n,o,i,e[12],1804603682,7),i=l(i,r,n,o,e[13],4254626195,12),o=l(o,i,r,n,e[14],2792965006,17),r=c(r,n=l(n,o,i,r,e[15],1236535329,22),o,i,e[1],4129170786,5),i=c(i,r,n,o,e[6],3225465664,9),o=c(o,i,r,n,e[11],643717713,14),n=c(n,o,i,r,e[0],3921069994,20),r=c(r,n,o,i,e[5],3593408605,5),i=c(i,r,n,o,e[10],38016083,9),o=c(o,i,r,n,e[15],3634488961,14),n=c(n,o,i,r,e[4],3889429448,20),r=c(r,n,o,i,e[9],568446438,5),i=c(i,r,n,o,e[14],3275163606,9),o=c(o,i,r,n,e[3],4107603335,14),n=c(n,o,i,r,e[8],1163531501,20),r=c(r,n,o,i,e[13],2850285829,5),i=c(i,r,n,o,e[2],4243563512,9),o=c(o,i,r,n,e[7],1735328473,14),r=d(r,n=c(n,o,i,r,e[12],2368359562,20),o,i,e[5],4294588738,4),i=d(i,r,n,o,e[8],2272392833,11),o=d(o,i,r,n,e[11],1839030562,16),n=d(n,o,i,r,e[14],4259657740,23),r=d(r,n,o,i,e[1],2763975236,4),i=d(i,r,n,o,e[4],1272893353,11),o=d(o,i,r,n,e[7],4139469664,16),n=d(n,o,i,r,e[10],3200236656,23),r=d(r,n,o,i,e[13],681279174,4),i=d(i,r,n,o,e[0],3936430074,11),o=d(o,i,r,n,e[3],3572445317,16),n=d(n,o,i,r,e[6],76029189,23),r=d(r,n,o,i,e[9],3654602809,4),i=d(i,r,n,o,e[12],3873151461,11),o=d(o,i,r,n,e[15],530742520,16),r=f(r,n=d(n,o,i,r,e[2],3299628645,23),o,i,e[0],4096336452,6),i=f(i,r,n,o,e[7],1126891415,10),o=f(o,i,r,n,e[14],2878612391,15),n=f(n,o,i,r,e[5],4237533241,21),r=f(r,n,o,i,e[12],1700485571,6),i=f(i,r,n,o,e[3],2399980690,10),o=f(o,i,r,n,e[10],4293915773,15),n=f(n,o,i,r,e[1],2240044497,21),r=f(r,n,o,i,e[8],1873313359,6),i=f(i,r,n,o,e[15],4264355552,10),o=f(o,i,r,n,e[6],2734768916,15),n=f(n,o,i,r,e[13],1309151649,21),r=f(r,n,o,i,e[4],4149444226,6),i=f(i,r,n,o,e[11],3174756917,10),o=f(o,i,r,n,e[2],718787259,15),n=f(n,o,i,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+o|0,this._d=this._d+i|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},t.exports=a},{"hash-base":469,inherits:491,"safe-buffer":679}],646:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=e("./src/BackgroundMessenger");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(o).default}})},{"./src/BackgroundMessenger":647}],647:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s=i(e("./Messenger")),a=i(e("./BackgroundTopic")),u=function(e){function t(t){var r=e.call(this,t)||this;return r._topicClass=a.default,r._popupTabId=null,r._browser.runtime.onMessage.addListener(r._onMessage.bind(r)),r._browser.runtime.onConnect.addListener(r._onConnect.bind(r)),r}return o(t,e),t.prototype._onMessage=function(e,t,r){if(e.subscribe){var n=this._getTopic(e.subscribe,!0);return t.tab?null!=t.tab.id&&-1!==t.tab.id&&n.subscribeTab(t.tab.id):this._getCurrentTabId((function(e){n.subscribePopup(e)})),!0}if(e.publish){var o=this._getTopic(e.publish);return o&&o.publish(e.message,r,t),!0}return!1},t.prototype._onConnect=function(e){var t,r=this;"ContentMessenger"!==e.name||(null===(t=e.sender)||void 0===t?void 0:t.tab)||(e.onDisconnect.addListener((function(){r._unsubscribePopup(),r.publish("Popup:closed",{tabId:r._popupTabId}),r._popupTabId=null})),this._getCurrentTabId((function(e){r._popupTabId=e})))},t.prototype._unsubscribePopup=function(){for(var e in this._topics)this._topics.hasOwnProperty(e)&&this._topics[e].unsubscribePopup()},t.prototype._getCurrentTabId=function(e){this._browser.tabs.query({currentWindow:!0,active:!0},(function(t){var r,n;e(null!==(n=null===(r=null==t?void 0:t[0])||void 0===r?void 0:r.id)&&void 0!==n?n:null)}))},t.prototype.publish=function(e,t,r,n){var o=this._getTopic(e);o&&o.publish(t,r,n)},t}(s.default);r.default=u},{"./BackgroundTopic":648,"./Messenger":649}],648:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._tabIds=[],n._popupTabId=null,n._browser.tabs.onRemoved.addListener((function(e){return n._unsubscribeTab(e)})),n}return o(t,e),t.prototype.publish=function(e,t,r){var n=this._wrapCallback(t);this._listeners.forEach((function(t){return t(e,n,r)})),this._publishToTabs(e,t,r),this._publishToPopup(e,t,r)},t.prototype._publishToTabs=function(e,t,r){var n,o=this,i=function(r){o._browser.tabs.sendMessage(r,{publish:o._name,message:e},(function(e){o._browser.runtime.lastError||"function"!=typeof t||t(e)}))},s=null===(n=null==r?void 0:r.tab)||void 0===n?void 0:n.id;null!=s?-1!==this._tabIds.indexOf(s)&&i(s):this._tabIds.forEach(i)},t.prototype._publishToPopup=function(e,t,r){var n=this;this._popupTabId&&(null!=(null==r?void 0:r.tab)&&r.tab.id!==this._popupTabId||this._browser.runtime.sendMessage({publish:this._name,message:e},(function(e){n._browser.runtime.lastError||"function"!=typeof t||t(e)})))},t.prototype.subscribeTab=function(e){-1===this._tabIds.indexOf(e)&&this._tabIds.push(e)},t.prototype._unsubscribeTab=function(e){var t=this._tabIds.indexOf(e);-1!==t&&this._tabIds.splice(t,1)},t.prototype.subscribePopup=function(e){this._popupTabId=e},t.prototype.unsubscribePopup=function(){this._popupTabId=null},t}(i(e("./Topic")).default);r.default=s},{"./Topic":650}],649:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){var t=e.browser;this._topics={},this._browser=t,this._topics={}}return e.prototype._getTopic=function(e,t){void 0===t&&(t=!1);var r=this._topics[e];return!r&&t&&(r=new this._topicClass(e,{browser:this._browser}),this._topics[e]=r),r},e.prototype.subscribe=function(e,t){this._getTopic(e,!0).subscribe(t)},e}();r.default=n},{}],650:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){var r=t.browser;this._name=e,this._listeners=[],this._browser=r}return e.prototype.publish=function(e,t,r){var n=this._wrapCallback(t);this._listeners.forEach((function(t){return t(e,n)}))},e.prototype._wrapCallback=function(e){return null==e?e:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{e.apply(void 0,t)}catch(e){if("Attempting to use a disconnected port object"!==e.message)throw e}}},e.prototype.subscribe=function(e){this._listeners.push(e)},e}();r.default=n},{}],651:[function(e,t,r){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}t.exports=n,n.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},{}],652:[function(e,t,r){"use strict";var n,o={DEBUG:!1,LIB_VERSION:"2.45.0"};if("undefined"==typeof window){var i={hostname:""};n={navigator:{userAgent:""},document:{location:i,referrer:""},screen:{width:0,height:0},location:i}}else n=window;var s,a,u,l,c,d,f,p,h,_,E,g=Array.prototype,m=Function.prototype,y=Object.prototype,S=g.slice,T=y.toString,A=y.hasOwnProperty,b=n.console,O=n.navigator,I=n.document,v=n.opera,N=n.screen,R=O.userAgent,C=m.bind,D=g.forEach,w=g.indexOf,L=g.map,P=Array.isArray,M={},U={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},j={log:function(){if(o.DEBUG&&!U.isUndefined(b)&&b)try{b.log.apply(b,arguments)}catch(e){U.each(arguments,(function(e){b.log(e)}))}},warn:function(){if(o.DEBUG&&!U.isUndefined(b)&&b){var e=["Mixpanel warning:"].concat(U.toArray(arguments));try{b.warn.apply(b,e)}catch(t){U.each(e,(function(e){b.warn(e)}))}}},error:function(){if(o.DEBUG&&!U.isUndefined(b)&&b){var e=["Mixpanel error:"].concat(U.toArray(arguments));try{b.error.apply(b,e)}catch(t){U.each(e,(function(e){b.error(e)}))}}},critical:function(){if(!U.isUndefined(b)&&b){var e=["Mixpanel error:"].concat(U.toArray(arguments));try{b.error.apply(b,e)}catch(t){U.each(e,(function(e){b.error(e)}))}}}},k=function(e,t){return function(){return arguments[0]="["+t+"] "+arguments[0],e.apply(j,arguments)}},x=function(e){return{log:k(j.log,e),error:k(j.error,e),critical:k(j.critical,e)}};U.bind=function(e,t){var r,n;if(C&&e.bind===C)return C.apply(e,S.call(arguments,1));if(!U.isFunction(e))throw new TypeError;return r=S.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(S.call(arguments)));var o={};o.prototype=e.prototype;var i=new o;o.prototype=null;var s=e.apply(i,r.concat(S.call(arguments)));return Object(s)===s?s:i},n},U.each=function(e,t,r){if(null!=e)if(D&&e.forEach===D)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(n in e&&t.call(r,e[n],n,e)===M)return}else for(var i in e)if(A.call(e,i)&&t.call(r,e[i],i,e)===M)return},U.extend=function(e){return U.each(S.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])})),e},U.isArray=P||function(e){return"[object Array]"===T.call(e)},U.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},U.isArguments=function(e){return!(!e||!A.call(e,"callee"))},U.toArray=function(e){return e?e.toArray?e.toArray():U.isArray(e)||U.isArguments(e)?S.call(e):U.values(e):[]},U.map=function(e,t,r){if(L&&e.map===L)return e.map(t,r);var n=[];return U.each(e,(function(e){n.push(t.call(r,e))})),n},U.keys=function(e){var t=[];return null===e||U.each(e,(function(e,r){t[t.length]=r})),t},U.values=function(e){var t=[];return null===e||U.each(e,(function(e){t[t.length]=e})),t},U.include=function(e,t){var r=!1;return null===e?r:w&&e.indexOf===w?-1!=e.indexOf(t):(U.each(e,(function(e){if(r||(r=e===t))return M})),r)},U.includes=function(e,t){return-1!==e.indexOf(t)},U.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},U.isObject=function(e){return e===Object(e)&&!U.isArray(e)},U.isEmptyObject=function(e){if(U.isObject(e)){for(var t in e)if(A.call(e,t))return!1;return!0}return!1},U.isUndefined=function(e){return void 0===e},U.isString=function(e){return"[object String]"==T.call(e)},U.isDate=function(e){return"[object Date]"==T.call(e)},U.isNumber=function(e){return"[object Number]"==T.call(e)},U.isElement=function(e){return!(!e||1!==e.nodeType)},U.encodeDates=function(e){return U.each(e,(function(t,r){U.isDate(t)?e[r]=U.formatDate(t):U.isObject(t)&&(e[r]=U.encodeDates(t))})),e},U.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},U.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},U.strip_empty_properties=function(e){var t={};return U.each(e,(function(e,r){U.isString(e)&&e.length>0&&(t[r]=e)})),t},U.truncate=function(e,t){var r;return"string"==typeof e?r=e.slice(0,t):U.isArray(e)?(r=[],U.each(e,(function(e){r.push(U.truncate(e,t))}))):U.isObject(e)?(r={},U.each(e,(function(e,n){r[n]=U.truncate(e,t)}))):r=e,r},U.JSONEncode=function(e){var t=function(e){var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'},r=function(e,n){var o="",i=0,s="",a="",u=0,l=o,c=[],d=n[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),typeof d){case"string":return t(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(o+="    ",c=[],"[object Array]"===T.apply(d)){for(u=d.length,i=0;i<u;i+=1)c[i]=r(i,d)||"null";return a=0===c.length?"[]":o?"[\n"+o+c.join(",\n"+o)+"\n"+l+"]":"["+c.join(",")+"]",o=l,a}for(s in d)A.call(d,s)&&(a=r(s,d))&&c.push(t(s)+(o?": ":":")+a);return a=0===c.length?"{}":o?"{"+c.join(",")+l+"}":"{"+c.join(",")+"}",o=l,a}};return r("",{"":e})},U.JSONDecode=(c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},d=function(e){var t=new SyntaxError(e);throw t.at=s,t.text=u,t},f=function(e){return e&&e!==a&&d("Expected '"+e+"' instead of '"+a+"'"),a=u.charAt(s),s+=1,a},p=function(){var e,t="";for("-"===a&&(t="-",f("-"));a>="0"&&a<="9";)t+=a,f();if("."===a)for(t+=".";f()&&a>="0"&&a<="9";)t+=a;if("e"===a||"E"===a)for(t+=a,f(),"-"!==a&&"+"!==a||(t+=a,f());a>="0"&&a<="9";)t+=a,f();if(e=+t,isFinite(e))return e;d("Bad number")},h=function(){var e,t,r,n="";if('"'===a)for(;f();){if('"'===a)return f(),n;if("\\"===a)if(f(),"u"===a){for(r=0,t=0;t<4&&(e=parseInt(f(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof c[a])break;n+=c[a]}else n+=a}d("Bad string")},_=function(){for(;a&&a<=" ";)f()},l=function(){switch(_(),a){case"{":return function(){var e,t={};if("{"===a){if(f("{"),_(),"}"===a)return f("}"),t;for(;a;){if(e=h(),_(),f(":"),Object.hasOwnProperty.call(t,e)&&d('Duplicate key "'+e+'"'),t[e]=l(),_(),"}"===a)return f("}"),t;f(","),_()}}d("Bad object")}();case"[":return function(){var e=[];if("["===a){if(f("["),_(),"]"===a)return f("]"),e;for(;a;){if(e.push(l()),_(),"]"===a)return f("]"),e;f(","),_()}}d("Bad array")}();case'"':return h();case"-":return p();default:return a>="0"&&a<="9"?p():function(){switch(a){case"t":return f("t"),f("r"),f("u"),f("e"),!0;case"f":return f("f"),f("a"),f("l"),f("s"),f("e"),!1;case"n":return f("n"),f("u"),f("l"),f("l"),null}d('Unexpected "'+a+'"')}()}},function(e){var t;return u=e,s=0,a=" ",t=l(),_(),a&&d("Syntax error"),t}),U.base64Encode=function(e){var t,r,n,o,i,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,u=0,l="",c=[];if(!e)return e;e=U.utf8Encode(e);do{t=(i=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,r=i>>12&63,n=i>>6&63,o=63&i,c[u++]=s.charAt(t)+s.charAt(r)+s.charAt(n)+s.charAt(o)}while(a<e.length);switch(l=c.join(""),e.length%3){case 1:l=l.slice(0,-2)+"==";break;case 2:l=l.slice(0,-1)+"="}return l},U.utf8Encode=function(e){var t,r,n,o,i="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,o=0;o<n;o++){var s=e.charCodeAt(o),a=null;s<128?r++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==a&&(r>t&&(i+=e.substring(t,r)),i+=a,t=r=o+1)}return r>t&&(i+=e.substring(t,e.length)),i},U.UUID=(E=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=(N.height*N.width).toString(16);return E()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,r=R,n=[],o=0;function i(e,t){var r,o=0;for(r=0;r<t.length;r++)o|=n[r]<<8*r;return e^o}for(e=0;e<r.length;e++)t=r.charCodeAt(e),n.unshift(255&t),n.length>=4&&(o=i(o,n),n=[]);return n.length>0&&(o=i(o,n)),o.toString(16)}()+"-"+e+"-"+E()});var F=["ahrefsbot","baiduspider","bingbot","bingpreview","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];U.isBlockedUA=function(e){var t;for(e=e.toLowerCase(),t=0;t<F.length;t++)if(-1!==e.indexOf(F[t]))return!0;return!1},U.HTTPBuildQuery=function(e,t){var r,n,o=[];return U.isUndefined(t)&&(t="&"),U.each(e,(function(e,t){r=encodeURIComponent(e.toString()),n=encodeURIComponent(t),o[o.length]=n+"="+r})),o.join(t)},U.getQueryParam=function(e,t){t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);if(null===r||r&&"string"!=typeof r[1]&&r[1].length)return"";var n=r[1];try{n=decodeURIComponent(n)}catch(e){j.error("Skipping decoding for malformed query param: "+n)}return n.replace(/\+/g," ")},U.cookie={get:function(e){for(var t=e+"=",r=I.cookie.split(";"),n=0;n<r.length;n++){for(var o=r[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}return null},parse:function(e){var t;try{t=U.JSONDecode(U.cookie.get(e))||{}}catch(e){}return t},set_seconds:function(e,t,r,n,o,i,s){var a="",u="",l="";if(s)a="; domain="+s;else if(n){var c=K(I.location.hostname);a=c?"; domain=."+c:""}if(r){var d=new Date;d.setTime(d.getTime()+1e3*r),u="; expires="+d.toGMTString()}i&&(o=!0,l="; SameSite=None"),o&&(l+="; secure"),I.cookie=e+"="+encodeURIComponent(t)+u+"; path=/"+a+l},set:function(e,t,r,n,o,i,s){var a="",u="",l="";if(s)a="; domain="+s;else if(n){var c=K(I.location.hostname);a=c?"; domain=."+c:""}if(r){var d=new Date;d.setTime(d.getTime()+24*r*60*60*1e3),u="; expires="+d.toGMTString()}i&&(o=!0,l="; SameSite=None"),o&&(l+="; secure");var f=e+"="+encodeURIComponent(t)+u+"; path=/"+a+l;return I.cookie=f,f},remove:function(e,t,r){U.cookie.set(e,"",-1,t,!1,!1,r)}};var B=null,G=function(e,t){if(null!==B&&!t)return B;var r=!0;try{e=e||window.localStorage;var n="__mplss_"+H(8);e.setItem(n,"xyz"),"xyz"!==e.getItem(n)&&(r=!1),e.removeItem(n)}catch(e){r=!1}return B=r,r};U.localStorage={is_supported:function(e){var t=G(null,e);return t||j.error("localStorage unsupported; falling back to cookie store"),t},error:function(e){j.error("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(e){U.localStorage.error(e)}return null},parse:function(e){try{return U.JSONDecode(U.localStorage.get(e))||{}}catch(e){}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){U.localStorage.error(e)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(e){U.localStorage.error(e)}}},U.register_event=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,r,n,o,i){if(t)if(t.addEventListener&&!o)t.addEventListener(r,n,!!i);else{var s="on"+r,a=t[s];t[s]=function(t,r,n){var o=function(o){if(o=o||e(window.event)){var i,s,a=!0;return U.isFunction(n)&&(i=n(o)),s=r.call(t,o),!1!==i&&!1!==s||(a=!1),a}};return o}(t,n,a)}else j.error("No valid element provided to register_event")}}();var V=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');U.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}var t=/[\t\r\n]/g;function r(e,r){var n=" "+r+" ";return(" "+e.className+" ").replace(t," ").indexOf(n)>=0}function n(t){if(!I.getElementsByTagName)return[];var n,o,i,s,a,u,l,c,d,f,p=t.split(" "),h=[I];for(u=0;u<p.length;u++)if((n=p[u].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){i=(o=n.split("#"))[0];var _=o[1],E=I.getElementById(_);if(!E||i&&E.nodeName.toLowerCase()!=i)return[];h=[E]}else if(n.indexOf(".")>-1){i=(o=n.split("."))[0];var g=o[1];for(i||(i="*"),s=[],a=0,l=0;l<h.length;l++)for(d="*"==i?e(h[l]):h[l].getElementsByTagName(i),c=0;c<d.length;c++)s[a++]=d[c];for(h=[],f=0,l=0;l<s.length;l++)s[l].className&&U.isString(s[l].className)&&r(s[l],g)&&(h[f++]=s[l])}else{var m=n.match(V);if(m){i=m[1];var y,S=m[2],T=m[3],A=m[4];for(i||(i="*"),s=[],a=0,l=0;l<h.length;l++)for(d="*"==i?e(h[l]):h[l].getElementsByTagName(i),c=0;c<d.length;c++)s[a++]=d[c];switch(h=[],f=0,T){case"=":y=function(e){return e.getAttribute(S)==A};break;case"~":y=function(e){return e.getAttribute(S).match(new RegExp("\\b"+A+"\\b"))};break;case"|":y=function(e){return e.getAttribute(S).match(new RegExp("^"+A+"-?"))};break;case"^":y=function(e){return 0===e.getAttribute(S).indexOf(A)};break;case"$":y=function(e){return e.getAttribute(S).lastIndexOf(A)==e.getAttribute(S).length-A.length};break;case"*":y=function(e){return e.getAttribute(S).indexOf(A)>-1};break;default:y=function(e){return e.getAttribute(S)}}for(h=[],f=0,l=0;l<s.length;l++)y(s[l])&&(h[f++]=s[l])}else{for(i=n,s=[],a=0,l=0;l<h.length;l++)for(d=h[l].getElementsByTagName(i),c=0;c<d.length;c++)s[a++]=d[c];h=s}}return h}return function(e){return U.isElement(e)?[e]:U.isObject(e)&&!U.isUndefined(e.length)?e:n.call(this,e)}}(),U.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",r={};return U.each(e,(function(e){(t=U.getQueryParam(I.URL,e)).length&&(r[e]=t)})),r},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(e){var t=U.info.searchEngine(e),r="yahoo"!=t?"q":"p",n={};if(null!==t){n.$search_engine=t;var o=U.getQueryParam(e,r);o.length&&(n.mp_keyword=o)}return n},browser:function(e,t,r){return t=t||"",r||U.includes(e," OPR/")?U.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":U.includes(e,"IEMobile")||U.includes(e,"WPDesktop")?"Internet Explorer Mobile":U.includes(e,"SamsungBrowser/")?"Samsung Internet":U.includes(e,"Edge")||U.includes(e,"Edg/")?"Microsoft Edge":U.includes(e,"FBIOS")?"Facebook Mobile":U.includes(e,"Chrome")?"Chrome":U.includes(e,"CriOS")?"Chrome iOS":U.includes(e,"UCWEB")||U.includes(e,"UCBrowser")?"UC Browser":U.includes(e,"FxiOS")?"Firefox iOS":U.includes(t,"Apple")?U.includes(e,"Mobile")?"Mobile Safari":"Safari":U.includes(e,"Android")?"Android Mobile":U.includes(e,"Konqueror")?"Konqueror":U.includes(e,"Firefox")?"Firefox":U.includes(e,"MSIE")||U.includes(e,"Trident/")?"Internet Explorer":U.includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,r){var n={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[U.info.browser(e,t,r)];if(void 0===n)return null;var o=e.match(n);return o?parseFloat(o[o.length-2]):null},os:function(){var e=R;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){return U.extend(U.strip_empty_properties({$os:U.info.os(),$browser:U.info.browser(R,O.vendor,v),$referrer:I.referrer,$referring_domain:U.info.referringDomain(I.referrer),$device:U.info.device(R)}),{$current_url:n.location.href,$browser_version:U.info.browserVersion(R,O.vendor,v),$screen_height:N.height,$screen_width:N.width,mp_lib:"web",$lib_version:o.LIB_VERSION,$insert_id:H(),time:U.timestamp()/1e3})},people_properties:function(){return U.extend(U.strip_empty_properties({$os:U.info.os(),$browser:U.info.browser(R,O.vendor,v)}),{$browser_version:U.info.browserVersion(R,O.vendor,v)})},pageviewInfo:function(e){return U.strip_empty_properties({mp_page:e,mp_referrer:I.referrer,mp_browser:U.info.browser(R,O.vendor,v),mp_platform:U.info.os()})}};var H=function(e){var t=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return e?t.substring(0,e):t},W=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,Y=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,K=function(e){var t=Y,r=e.split("."),n=r[r.length-1];(n.length>4||"com"===n||"org"===n)&&(t=W);var o=e.match(t);return o?o[0]:""},z=null,q=null;"undefined"!=typeof JSON&&(z=JSON.stringify,q=JSON.parse),z=z||U.JSONEncode,q=q||U.JSONDecode,U.toArray=U.toArray,U.isObject=U.isObject,U.JSONEncode=U.JSONEncode,U.JSONDecode=U.JSONDecode,U.isBlockedUA=U.isBlockedUA,U.isEmptyObject=U.isEmptyObject,U.info=U.info,U.info.device=U.info.device,U.info.browser=U.info.browser,U.info.browserVersion=U.info.browserVersion,U.info.properties=U.info.properties;var $=function(){};$.prototype.create_properties=function(){},$.prototype.event_handler=function(){},$.prototype.after_track_handler=function(){},$.prototype.init=function(e){return this.mp=e,this},$.prototype.track=function(e,t,r,n){var o=this,i=U.dom_query(e);if(0!==i.length)return U.each(i,(function(e){U.register_event(e,this.override_event,(function(e){var i={},s=o.create_properties(r,this),a=o.mp.get_config("track_links_timeout");o.event_handler(e,this,i),window.setTimeout(o.track_callback(n,s,i,!0),a),o.mp.track(t,s,o.track_callback(n,s,i))}))}),this),!0;j.error("The DOM query ("+e+") returned 0 elements")},$.prototype.track_callback=function(e,t,r,n){n=n||!1;var o=this;return function(){r.callback_fired||(r.callback_fired=!0,e&&!1===e(n,t)||o.after_track_handler(t,r,n))}},$.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):U.extend({},e)};var X=function(){this.override_event="click"};U.inherit(X,$),X.prototype.create_properties=function(e,t){var r=X.superclass.create_properties.apply(this,arguments);return t.href&&(r.url=t.href),r},X.prototype.event_handler=function(e,t,r){r.new_tab=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target,r.href=t.href,r.new_tab||e.preventDefault()},X.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout((function(){window.location=t.href}),0)};var J=function(){this.override_event="submit"};U.inherit(J,$),J.prototype.event_handler=function(e,t,r){r.element=t,e.preventDefault()},J.prototype.after_track_handler=function(e,t){setTimeout((function(){t.element.submit()}),0)};var Z=x("lock"),Q=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.pollIntervalMS=t.pollIntervalMS||100,this.timeoutMS=t.timeoutMS||2e3};Q.prototype.withLock=function(e,t,r){r||"function"==typeof t||(r=t,t=null);var n=r||(new Date).getTime()+"|"+Math.random(),o=(new Date).getTime(),i=this.storageKey,s=this.pollIntervalMS,a=this.timeoutMS,u=this.storage,l=i+":X",c=i+":Y",d=i+":Z",f=function(e){t&&t(e)},p=function(e){if((new Date).getTime()-o>a)return Z.error("Timeout waiting for mutex on "+i+"; clearing lock. ["+n+"]"),u.removeItem(d),u.removeItem(c),void E();setTimeout((function(){try{e()}catch(e){f(e)}}),s*(Math.random()+.1))},h=function(e,t){e()?t():p((function(){h(e,t)}))},_=function(){var e=u.getItem(c);if(e&&e!==n)return!1;if(u.setItem(c,n),u.getItem(c)===n)return!0;if(!G(u,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},E=function(){u.setItem(l,n),h(_,(function(){u.getItem(l)!==n?p((function(){u.getItem(c)===n?h((function(){return!u.getItem(d)}),g):E()})):g()}))},g=function(){u.setItem(d,"1");try{e()}finally{u.removeItem(d),u.getItem(c)===n&&u.removeItem(c),u.getItem(l)===n&&u.removeItem(l)}};try{if(!G(u,!0))throw new Error("localStorage support check failed");E()}catch(e){f(e)}};var ee=x("batch"),te=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.reportError=t.errorReporter||U.bind(ee.error,ee),this.lock=new Q(e,{storage:this.storage}),this.pid=t.pid||null,this.memQueue=[]};te.prototype.enqueue=function(e,t,r){var n={id:H(),flushAfter:(new Date).getTime()+2*t,payload:e};this.lock.withLock(U.bind((function(){var t;try{var o=this.readFromStorage();o.push(n),(t=this.saveToStorage(o))&&this.memQueue.push(n)}catch(r){this.reportError("Error enqueueing item",e),t=!1}r&&r(t)}),this),U.bind((function(e){this.reportError("Error acquiring storage lock",e),r&&r(!1)}),this),this.pid)},te.prototype.fillBatch=function(e){var t=this.memQueue.slice(0,e);if(t.length<e){var r=this.readFromStorage();if(r.length){var n={};U.each(t,(function(e){n[e.id]=!0}));for(var o=0;o<r.length;o++){var i=r[o];if((new Date).getTime()>i.flushAfter&&!n[i.id]&&(i.orphaned=!0,t.push(i),t.length>=e))break}}}return t};var re=function(e,t){var r=[];return U.each(e,(function(e){e.id&&!t[e.id]&&r.push(e)})),r};te.prototype.removeItemsByID=function(e,t){var r={};U.each(e,(function(e){r[e]=!0})),this.memQueue=re(this.memQueue,r);var n=U.bind((function(){var t;try{var n=this.readFromStorage();if(n=re(n,r),t=this.saveToStorage(n)){n=this.readFromStorage();for(var o=0;o<n.length;o++){var i=n[o];if(i.id&&r[i.id])return this.reportError("Item not removed from storage"),!1}}}catch(r){this.reportError("Error removing items",e),t=!1}return t}),this);this.lock.withLock((function(){var e=n();t&&t(e)}),U.bind((function(e){var r=!1;if(this.reportError("Error acquiring storage lock",e),!G(this.storage,!0)&&!(r=n()))try{this.storage.removeItem(this.storageKey)}catch(e){this.reportError("Error clearing queue",e)}t&&t(r)}),this),this.pid)};var ne=function(e,t){var r=[];return U.each(e,(function(e){var n=e.id;if(n in t){var o=t[n];null!==o&&(e.payload=o,r.push(e))}else r.push(e)})),r};te.prototype.updatePayloads=function(e,t){this.memQueue=ne(this.memQueue,e),this.lock.withLock(U.bind((function(){var r;try{var n=this.readFromStorage();n=ne(n,e),r=this.saveToStorage(n)}catch(t){this.reportError("Error updating items",e),r=!1}t&&t(r)}),this),U.bind((function(e){this.reportError("Error acquiring storage lock",e),t&&t(!1)}),this),this.pid)},te.prototype.readFromStorage=function(){var e;try{(e=this.storage.getItem(this.storageKey))&&(e=q(e),U.isArray(e)||(this.reportError("Invalid storage entry:",e),e=null))}catch(t){this.reportError("Error retrieving queue",t),e=null}return e||[]},te.prototype.saveToStorage=function(e){try{return this.storage.setItem(this.storageKey,z(e)),!0}catch(e){return this.reportError("Error saving queue",e),!1}},te.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var oe=x("batch"),ie=function(e,t){this.errorReporter=t.errorReporter,this.queue=new te(e,{errorReporter:U.bind(this.reportError,this),storage:t.storage}),this.libConfig=t.libConfig,this.sendRequest=t.sendRequestFunc,this.beforeSendHook=t.beforeSendHook,this.stopAllBatching=t.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0};ie.prototype.enqueue=function(e,t){this.queue.enqueue(e,this.flushInterval,t)},ie.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()},ie.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},ie.prototype.clear=function(){this.queue.clear()},ie.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},ie.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},ie.prototype.scheduleFlush=function(e){this.flushInterval=e,this.stopped||(this.timeoutID=setTimeout(U.bind(this.flush,this),this.flushInterval))},ie.prototype.flush=function(e){try{if(this.requestInProgress)return void oe.log("Flush: Request already in progress");e=e||{};var t=this.libConfig.batch_request_timeout_ms,r=(new Date).getTime(),n=this.batchSize,o=this.queue.fillBatch(n),i=[],s={};if(U.each(o,(function(e){var t=e.payload;this.beforeSendHook&&!e.orphaned&&(t=this.beforeSendHook(t)),t&&i.push(t),s[e.id]=t}),this),i.length<1)return void this.resetFlush();this.requestInProgress=!0;var a=U.bind((function(i){this.requestInProgress=!1;try{var a=!1;if(e.unloading)this.queue.updatePayloads(s);else if(U.isObject(i)&&"timeout"===i.error&&(new Date).getTime()-r>=t)this.reportError("Network timeout; retrying"),this.flush();else if(U.isObject(i)&&i.xhr_req&&(i.xhr_req.status>=500||429===i.xhr_req.status||"timeout"===i.error)){var u=2*this.flushInterval,l=i.xhr_req.responseHeaders;if(l){var c=l["Retry-After"];c&&(u=1e3*parseInt(c,10)||u)}u=Math.min(6e5,u),this.reportError("Error; retry in "+u+" ms"),this.scheduleFlush(u)}else if(U.isObject(i)&&i.xhr_req&&413===i.xhr_req.status)if(o.length>1){var d=Math.max(1,Math.floor(n/2));this.batchSize=Math.min(this.batchSize,d,o.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",o),this.resetBatchSize(),a=!0;else a=!0;a&&this.queue.removeItemsByID(U.map(o,(function(e){return e.id})),U.bind((function(e){e?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())}),this))}catch(e){this.reportError("Error handling API response",e),this.resetFlush()}}),this),u={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:t};e.unloading&&(u.transport="sendBeacon"),oe.log("MIXPANEL REQUEST:",i),this.sendRequest(i,u,a)}catch(e){this.reportError("Error flushing request queue",e),this.resetFlush()}},ie.prototype.reportError=function(e,t){if(oe.error.apply(oe.error,arguments),this.errorReporter)try{t instanceof Error||(t=new Error(e)),this.errorReporter(e,t)}catch(t){oe.error(t)}};var se="__mp_opt_in_out_";function ae(e,t){me(!0,e,t)}function ue(e,t){me(!1,e,t)}function le(e,t){return"1"===ge(e,t)}function ce(e,t){if(function(e){if(e&&e.ignoreDnt)return!1;var t=e&&e.window||n,r=t.navigator||{},o=!1;return U.each([r.doNotTrack,r.msDoNotTrack,t.doNotTrack],(function(e){U.includes([!0,1,"1","yes"],e)&&(o=!0)})),o}(t))return j.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var r="0"===ge(e,t);return r&&j.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),r}function de(e){return ye(e,(function(e){return this.get_config(e)}))}function fe(e){return ye(e,(function(e){return this._get_config(e)}))}function pe(e){return ye(e,(function(e){return this._get_config(e)}))}function he(e,t){_e(t=t||{}).remove(Ee(e,t),!!t.crossSubdomainCookie,t.cookieDomain)}function _e(e){return"localStorage"===(e=e||{}).persistenceType?U.localStorage:U.cookie}function Ee(e,t){return((t=t||{}).persistencePrefix||se)+e}function ge(e,t){return _e(t).get(Ee(e,t))}function me(e,t,r){U.isString(t)&&t.length?(_e(r=r||{}).set(Ee(t,r),e?1:0,U.isNumber(r.cookieExpiration)?r.cookieExpiration:null,!!r.crossSubdomainCookie,!!r.secureCookie,!!r.crossSiteCookie,r.cookieDomain),r.track&&e&&r.track(r.trackEventName||"$opt_in",r.trackProperties,{send_immediately:!0})):j.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token")}function ye(e,t){return function(){var r=!1;try{var n=t.call(this,"token"),o=t.call(this,"ignore_dnt"),i=t.call(this,"opt_out_tracking_persistence_type"),s=t.call(this,"opt_out_tracking_cookie_prefix"),a=t.call(this,"window");n&&(r=ce(n,{ignoreDnt:o,persistenceType:i,persistencePrefix:s,window:a}))}catch(e){j.error("Unexpected error when checking tracking opt-out status: "+e)}if(!r)return e.apply(this,arguments);var u=arguments[arguments.length-1];"function"==typeof u&&u(0)}}var Se="$set",Te="$set_once",Ae="$unset",be="$add",Oe="$append",Ie="$union",ve="$remove",Ne={set_action:function(e,t){var r={},n={};return U.isObject(e)?U.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r[Se]=n,r},unset_action:function(e){var t={},r=[];return U.isArray(e)||(e=[e]),U.each(e,(function(e){this._is_reserved_property(e)||r.push(e)}),this),t[Ae]=r,t},set_once_action:function(e,t){var r={},n={};return U.isObject(e)?U.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r[Te]=n,r},union_action:function(e,t){var r={},n={};return U.isObject(e)?U.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=U.isArray(e)?e:[e])}),this):n[e]=U.isArray(t)?t:[t],r[Ie]=n,r},append_action:function(e,t){var r={},n={};return U.isObject(e)?U.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r[Oe]=n,r},remove_action:function(e,t){var r={},n={};return U.isObject(e)?U.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r[ve]=n,r},delete_action:function(){var e={$delete:""};return e}},Re=function(){};U.extend(Re.prototype,Ne),Re.prototype._init=function(e,t,r){this._mixpanel=e,this._group_key=t,this._group_id=r},Re.prototype.set=pe((function(e,t,r){var n=this.set_action(e,t);return U.isObject(e)&&(r=t),this._send_request(n,r)})),Re.prototype.set_once=pe((function(e,t,r){var n=this.set_once_action(e,t);return U.isObject(e)&&(r=t),this._send_request(n,r)})),Re.prototype.unset=pe((function(e,t){var r=this.unset_action(e);return this._send_request(r,t)})),Re.prototype.union=pe((function(e,t,r){U.isObject(e)&&(r=t);var n=this.union_action(e,t);return this._send_request(n,r)})),Re.prototype.delete=pe((function(e){var t=this.delete_action();return this._send_request(t,e)})),Re.prototype.remove=pe((function(e,t,r){var n=this.remove_action(e,t);return this._send_request(n,r)})),Re.prototype._send_request=function(e,t){e.$group_key=this._group_key,e.$group_id=this._group_id,e.$token=this._get_config("token");var r=U.encodeDates(e);return this._mixpanel._track_or_batch({type:"groups",data:r,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},t)},Re.prototype._is_reserved_property=function(e){return"$group_key"===e||"$group_id"===e},Re.prototype._get_config=function(e){return this._mixpanel.get_config(e)},Re.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},Re.prototype.remove=Re.prototype.remove,Re.prototype.set=Re.prototype.set,Re.prototype.set_once=Re.prototype.set_once,Re.prototype.union=Re.prototype.union,Re.prototype.unset=Re.prototype.unset,Re.prototype.toString=Re.prototype.toString;var Ce=function(){};U.extend(Ce.prototype,Ne),Ce.prototype._init=function(e){this._mixpanel=e},Ce.prototype.set=fe((function(e,t,r){var n=this.set_action(e,t);return U.isObject(e)&&(r=t),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(I.referrer),n[Se]=U.extend({},U.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),n[Se]),this._send_request(n,r)})),Ce.prototype.set_once=fe((function(e,t,r){var n=this.set_once_action(e,t);return U.isObject(e)&&(r=t),this._send_request(n,r)})),Ce.prototype.unset=fe((function(e,t){var r=this.unset_action(e);return this._send_request(r,t)})),Ce.prototype.increment=fe((function(e,t,r){var n={},o={};return U.isObject(e)?(U.each(e,(function(e,t){if(!this._is_reserved_property(t)){if(isNaN(parseFloat(e)))return void j.error("Invalid increment value passed to mixpanel.people.increment - must be a number");o[t]=e}}),this),r=t):(U.isUndefined(t)&&(t=1),o[e]=t),n[be]=o,this._send_request(n,r)})),Ce.prototype.append=fe((function(e,t,r){U.isObject(e)&&(r=t);var n=this.append_action(e,t);return this._send_request(n,r)})),Ce.prototype.remove=fe((function(e,t,r){U.isObject(e)&&(r=t);var n=this.remove_action(e,t);return this._send_request(n,r)})),Ce.prototype.union=fe((function(e,t,r){U.isObject(e)&&(r=t);var n=this.union_action(e,t);return this._send_request(n,r)})),Ce.prototype.track_charge=fe((function(e,t,r){if(U.isNumber(e)||(e=parseFloat(e),!isNaN(e)))return this.append("$transactions",U.extend({$amount:e},t),r);j.error("Invalid value passed to mixpanel.people.track_charge - must be a number")})),Ce.prototype.clear_charges=function(e){return this.set("$transactions",[],e)},Ce.prototype.delete_user=function(){if(this._identify_called()){var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)}j.error("mixpanel.people.delete_user() requires you to call identify() first")},Ce.prototype.toString=function(){return this._mixpanel.toString()+".people"},Ce.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var r=this._mixpanel.get_property("$device_id"),n=this._mixpanel.get_property("$user_id"),o=this._mixpanel.get_property("$had_persisted_distinct_id");r&&(e.$device_id=r),n&&(e.$user_id=n),o&&(e.$had_persisted_distinct_id=o);var i=U.encodeDates(e);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:i,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},t):(this._enqueue(e),U.isUndefined(t)||(this._get_config("verbose")?t({status:-1,error:null}):t(-1)),U.truncate(i,255))},Ce.prototype._get_config=function(e){return this._mixpanel.get_config(e)},Ce.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},Ce.prototype._enqueue=function(e){Se in e?this._mixpanel.persistence._add_to_people_queue(Se,e):Te in e?this._mixpanel.persistence._add_to_people_queue(Te,e):Ae in e?this._mixpanel.persistence._add_to_people_queue(Ae,e):be in e?this._mixpanel.persistence._add_to_people_queue(be,e):Oe in e?this._mixpanel.persistence._add_to_people_queue(Oe,e):ve in e?this._mixpanel.persistence._add_to_people_queue(ve,e):Ie in e?this._mixpanel.persistence._add_to_people_queue(Ie,e):j.error("Invalid call to _enqueue():",e)},Ce.prototype._flush_one_queue=function(e,t,r,n){var o=this,i=U.extend({},this._mixpanel.persistence._get_queue(e)),s=i;U.isUndefined(i)||!U.isObject(i)||U.isEmptyObject(i)||(o._mixpanel.persistence._pop_from_people_queue(e,i),n&&(s=n(i)),t.call(o,s,(function(t,n){0===t&&o._mixpanel.persistence._add_to_people_queue(e,i),U.isUndefined(r)||r(t,n)})))},Ce.prototype._flush=function(e,t,r,n,o,i,s){var a=this,u=this._mixpanel.persistence._get_queue(Oe),l=this._mixpanel.persistence._get_queue(ve);if(this._flush_one_queue(Se,this.set,e),this._flush_one_queue(Te,this.set_once,n),this._flush_one_queue(Ae,this.unset,i,(function(e){return U.keys(e)})),this._flush_one_queue(be,this.increment,t),this._flush_one_queue(Ie,this.union,o),!U.isUndefined(u)&&U.isArray(u)&&u.length){for(var c,d=function(e,t){0===e&&a._mixpanel.persistence._add_to_people_queue(Oe,c),U.isUndefined(r)||r(e,t)},f=u.length-1;f>=0;f--)c=u.pop(),U.isEmptyObject(c)||a.append(c,d);a._mixpanel.persistence.save()}if(!U.isUndefined(l)&&U.isArray(l)&&l.length){for(var p,h=function(e,t){0===e&&a._mixpanel.persistence._add_to_people_queue(ve,p),U.isUndefined(s)||s(e,t)},_=l.length-1;_>=0;_--)p=l.pop(),U.isEmptyObject(p)||a.remove(p,h);a._mixpanel.persistence.save()}},Ce.prototype._is_reserved_property=function(e){return"$distinct_id"===e||"$token"===e||"$device_id"===e||"$user_id"===e||"$had_persisted_distinct_id"===e},Ce.prototype.set=Ce.prototype.set,Ce.prototype.set_once=Ce.prototype.set_once,Ce.prototype.unset=Ce.prototype.unset,Ce.prototype.increment=Ce.prototype.increment,Ce.prototype.append=Ce.prototype.append,Ce.prototype.remove=Ce.prototype.remove,Ce.prototype.union=Ce.prototype.union,Ce.prototype.track_charge=Ce.prototype.track_charge,Ce.prototype.clear_charges=Ce.prototype.clear_charges,Ce.prototype.delete_user=Ce.prototype.delete_user,Ce.prototype.toString=Ce.prototype.toString;var De,we,Le="__mps",Pe="__mpso",Me="__mpus",Ue="__mpa",je="__mpap",ke="__mpr",xe="__mpu",Fe="$people_distinct_id",Be="__alias",Ge="__timers",Ve=[Le,Pe,Me,Ue,je,ke,xe,Fe,Be,Ge],He=function(e){this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_mixpanel";var t=e.persistence;"cookie"!==t&&"localStorage"!==t&&(j.critical("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie"),"localStorage"===t&&U.localStorage.is_supported()?this.storage=U.localStorage:this.storage=U.cookie,this.load(),this.update_config(e),this.upgrade(e),this.save()};He.prototype.properties=function(){var e={};return U.each(this.props,(function(t,r){U.include(Ve,r)||(e[r]=t)})),e},He.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=U.extend({},e))}},He.prototype.upgrade=function(e){var t,r,n=e.upgrade;n&&(t="mp_super_properties","string"==typeof n&&(t=n),r=this.storage.parse(t),this.storage.remove(t),this.storage.remove(t,!0),r&&(this.props=U.extend(this.props,r.all,r.events))),e.cookie_name||"mixpanel"===e.name||(t="mp_"+e.token+"_"+e.name,(r=this.storage.parse(t))&&(this.storage.remove(t),this.storage.remove(t,!0),this.register_once(r))),this.storage===U.localStorage&&(r=U.cookie.parse(this.name),U.cookie.remove(this.name),U.cookie.remove(this.name,!0),r&&this.register_once(r))},He.prototype.save=function(){this.disabled||this.storage.set(this.name,U.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)},He.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},He.prototype.clear=function(){this.remove(),this.props={}},He.prototype.register_once=function(e,t,r){return!!U.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===r?this.default_expiry:r,U.each(e,(function(e,r){this.props.hasOwnProperty(r)&&this.props[r]!==t||(this.props[r]=e)}),this),this.save(),!0)},He.prototype.register=function(e,t){return!!U.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,U.extend(this.props,e),this.save(),!0)},He.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},He.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(U.info.campaignParams()),this.campaign_params_saved=!0)},He.prototype.update_search_keyword=function(e){this.register(U.info.searchInfo(e))},He.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:U.info.referringDomain(e)||"$direct"},"")},He.prototype.get_referrer_info=function(){return U.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},He.prototype.safe_merge=function(e){return U.each(this.props,(function(t,r){r in e||(e[r]=t)})),e},He.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cookie_domain(e.cookie_domain),this.set_cross_site(e.cross_site_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)},He.prototype.set_disabled=function(e){this.disabled=e,this.disabled?this.remove():this.save()},He.prototype.set_cookie_domain=function(e){e!==this.cookie_domain&&(this.remove(),this.cookie_domain=e,this.save())},He.prototype.set_cross_site=function(e){e!==this.cross_site&&(this.cross_site=e,this.remove(),this.save())},He.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},He.prototype.get_cross_subdomain=function(){return this.cross_subdomain},He.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())},He.prototype._add_to_people_queue=function(e,t){var r=this._get_queue_key(e),n=t[e],o=this._get_or_create_queue(Se),i=this._get_or_create_queue(Te),s=this._get_or_create_queue(Ae),a=this._get_or_create_queue(be),u=this._get_or_create_queue(Ie),l=this._get_or_create_queue(ve,[]),c=this._get_or_create_queue(Oe,[]);r===Le?(U.extend(o,n),this._pop_from_people_queue(be,n),this._pop_from_people_queue(Ie,n),this._pop_from_people_queue(Ae,n)):r===Pe?(U.each(n,(function(e,t){t in i||(i[t]=e)})),this._pop_from_people_queue(Ae,n)):r===Me?U.each(n,(function(e){U.each([o,i,a,u],(function(t){e in t&&delete t[e]})),U.each(c,(function(t){e in t&&delete t[e]})),s[e]=!0})):r===Ue?(U.each(n,(function(e,t){t in o?o[t]+=e:(t in a||(a[t]=0),a[t]+=e)}),this),this._pop_from_people_queue(Ae,n)):r===xe?(U.each(n,(function(e,t){U.isArray(e)&&(t in u||(u[t]=[]),u[t]=u[t].concat(e))})),this._pop_from_people_queue(Ae,n)):r===ke?(l.push(n),this._pop_from_people_queue(Oe,n)):r===je&&(c.push(n),this._pop_from_people_queue(Ae,n)),j.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),j.log(t),this.save()},He.prototype._pop_from_people_queue=function(e,t){var r=this._get_queue(e);U.isUndefined(r)||(U.each(t,(function(t,n){e===Oe||e===ve?U.each(r,(function(e){e[n]===t&&delete e[n]})):delete r[n]}),this),this.save())},He.prototype._get_queue_key=function(e){return e===Se?Le:e===Te?Pe:e===Ae?Me:e===be?Ue:e===Oe?je:e===ve?ke:e===Ie?xe:void j.error("Invalid queue:",e)},He.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},He.prototype._get_or_create_queue=function(e,t){var r=this._get_queue_key(e);return t=U.isUndefined(t)?{}:t,this.props[r]||(this.props[r]=t)},He.prototype.set_event_timer=function(e,t){var r=this.props[Ge]||{};r[e]=t,this.props[Ge]=r,this.save()},He.prototype.remove_event_timer=function(e){var t=(this.props[Ge]||{})[e];return U.isUndefined(t)||(delete this.props[Ge][e],this.save()),t};var We=function(e){return e},Ye=function(){},Ke="mixpanel",ze="base64",qe=n.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,$e=!U.isUndefined(fetch)&&"function"==typeof fetch,Xe=!qe&&!$e&&-1===R.indexOf("MSIE")&&-1===R.indexOf("Mozilla"),Je=null;O.sendBeacon&&(Je=function(){return O.sendBeacon.apply(O,arguments)});var Ze={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",api_payload_format:ze,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:Ye,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Ye,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},Qe=!1,et=function(){},tt=function(e,t,r){var n,i=r===Ke?we:we[r];if(i&&0===De)n=i;else{if(i&&!U.isArray(i))return void j.error("You have already initialized "+r);n=new et}return n._cached_groups={},n._init(e,t,r),n.people=new Ce,n.people._init(n),o.DEBUG=o.DEBUG||n.get_config("debug"),!U.isUndefined(i)&&U.isArray(i)&&(n._execute_array.call(n.people,i.people),n._execute_array(i)),n};et.prototype.init=function(e,t,r){if(U.isUndefined(r))this.report_error("You must name your new library: init(token, config, name)");else{if(r!==Ke){var n=tt(e,t,r);return we[r]=n,n._loaded(),n}this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")}},et.prototype._init=function(e,t,r){t=t||{},this.__loaded=!0,this.config={};var o={};"api_payload_format"in t||(t.api_host||Ze.api_host).match(/\.mixpanel\.com$/)&&(o.api_payload_format="json");if(this.set_config(U.extend({},Ze,o,t,{name:r,token:e,callback_fn:(r===Ke?r:Ke+"."+r)+"._jsc"})),this._jsc=Ye,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests)if(U.localStorage.is_supported(!0)&&qe){if(this.init_batchers(),Je&&n.addEventListener){var i=U.bind((function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})}),this);n.addEventListener("pagehide",(function(e){e.persisted&&i()})),n.addEventListener("visibilitychange",(function(){"hidden"===I.visibilityState&&i()}))}}else this._batch_requests=!1,j.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support");this.persistence=this.cookie=new He(this.config),this.unpersisted_superprops={},this._gdpr_init();var s=U.UUID();this.get_distinct_id()||this.register_once({distinct_id:s,$device_id:s},"")},et.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()},et.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(I.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(I.referrer)},et.prototype._dom_loaded=function(){U.each(this.__dom_loaded_queue,(function(e){this._track_dom.apply(this,e)}),this),this.has_opted_out_tracking()||U.each(this.__request_queue,(function(e){this._send_request.apply(this,e)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},et.prototype._track_dom=function(e,t){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!Qe)return this.__dom_loaded_queue.push([e,t]),!1;var r=(new e).init(this);return r.track.apply(r,t)},et.prototype._prepare_callback=function(e,t){if(U.isUndefined(e))return null;if(qe||$e){return function(r){e(r,t)}}var r=this._jsc,n=""+Math.floor(1e8*Math.random()),o=this.get_config("callback_fn")+"["+n+"]";return r[n]=function(o){delete r[n],e(o,t)},o},et.prototype._send_request=function(e,t,r,n){var o=!0;if(Xe)return this.__request_queue.push(arguments),o;var i={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},s=null;n||!U.isFunction(r)&&"string"!=typeof r||(n=r,r=null),r=U.extend(i,r||{}),qe||$e||(r.method="GET");var a="POST"===r.method,u=Je&&a&&"sendbeacon"===r.transport.toLowerCase(),l=r.verbose;t.verbose&&(l=!0),this.get_config("test")&&(t.test=1),l&&(t.verbose=1),this.get_config("img")&&(t.img=1),qe||$e||(n?t.callback=n:(l||this.get_config("test"))&&(t.callback="(function(){})")),t.ip=this.get_config("ip")?1:0,t._=(new Date).getTime().toString(),a&&(s="data="+encodeURIComponent(t.data),delete t.data),e+="?"+U.HTTPBuildQuery(t);var c=this;if("img"in t){var d=I.createElement("img");d.src=e,I.body.appendChild(d)}else if(u){try{o=Je(e,s)}catch(e){c.report_error(e),o=!1}try{n&&n(o?1:0)}catch(e){c.report_error(e)}}else if(qe)try{var f=new XMLHttpRequest;f.open(r.method,e,!0);var p=this.get_config("xhr_headers");if(a&&(p["Content-Type"]="application/x-www-form-urlencoded"),U.each(p,(function(e,t){f.setRequestHeader(t,e)})),r.timeout_ms&&void 0!==f.timeout){f.timeout=r.timeout_ms;var h=(new Date).getTime()}f.withCredentials=!0,f.onreadystatechange=function(){var e;if(4===f.readyState)if(200===f.status){if(n)if(l){var t;try{t=U.JSONDecode(f.responseText)}catch(e){if(c.report_error(e),!r.ignore_json_errors)return;t=f.responseText}n(t)}else n(Number(f.responseText))}else e=f.timeout&&!f.status&&(new Date).getTime()-h>=f.timeout?"timeout":"Bad HTTP status: "+f.status+" "+f.statusText,c.report_error(e),n&&n(l?{status:0,error:e,xhr_req:f}:0)},f.send(s)}catch(e){c.report_error(e),o=!1}else if($e)try{p=this.get_config("xhr_headers");a&&(p["Content-Type"]="application/x-www-form-urlencoded");var _={method:r.method,mode:"cors",credentials:"include",headers:p,body:s};fetch(e,_).then((function(e){return e.text().then((function(t){return{status:e.status,statusText:e.statusText,headers:e.headers,body:t}}))})).then((function(e){if(200===e.status){if(n){var t=e.body;if(l){var o;try{o=U.JSONDecode(t)}catch(e){if(c.report_error(e),!r.ignore_json_errors)return;o=t}n(o)}else n(Number(t))}}else{var i="Bad HTTP status: "+e.status+" "+e.statusText;if(c.report_error(i),n)if(l){var s={status:e.status,responseHeaders:e.headers};n({status:0,error:i,xhr_req:s})}else n(0)}}))}catch(e){c.report_error(e),o=!1}else{var E=I.createElement("script");E.type="text/javascript",E.async=!0,E.defer=!0,E.src=e;var g=I.getElementsByTagName("script")[0];g.parentNode.insertBefore(E,g)}return o},et.prototype._execute_array=function(e){var t,r=[],n=[],o=[];U.each(e,(function(e){e&&(t=e[0],U.isArray(t)?o.push(e):"function"==typeof e?e.call(this):U.isArray(e)&&"alias"===t?r.push(e):U.isArray(e)&&-1!==t.indexOf("track")&&"function"==typeof this[t]?o.push(e):n.push(e))}),this);var i=function(e,t){U.each(e,(function(e){if(U.isArray(e[0])){var r=t;U.each(e,(function(e){r=r[e[0]].apply(r,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};i(r,this),i(n,this),i(o,this)},et.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},et.prototype.init_batchers=function(){var e=this.get_config("token");if(!this.are_batchers_initialized()){var t=U.bind((function(t){return new ie("__mpq_"+e+t.queue_suffix,{libConfig:this.config,sendRequestFunc:U.bind((function(e,r,n){this._send_request(this.get_config("api_host")+t.endpoint,this._encode_data_for_request(e),r,this._prepare_callback(n,e))}),this),beforeSendHook:U.bind((function(e){return this._run_hook("before_send_"+t.type,e)}),this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:U.bind(this.stop_batch_senders,this)})}),this);this.request_batchers={events:t({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:t({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:t({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()},et.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,U.each(this.request_batchers,(function(e){e.start()})))},et.prototype.stop_batch_senders=function(){this._batch_requests=!1,U.each(this.request_batchers,(function(e){e.stop(),e.clear()}))},et.prototype.push=function(e){this._execute_array([e])},et.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},et.prototype._encode_data_for_request=function(e){var t=U.JSONEncode(e);return this.get_config("api_payload_format")===ze&&(t=U.base64Encode(t)),{data:t}},et.prototype._track_or_batch=function(e,t){var r=U.truncate(e.data,255),n=e.endpoint,o=e.batcher,i=e.should_send_immediately,s=e.send_request_options||{};t=t||Ye;var a=!0,u=U.bind((function(){return s.skip_hooks||(r=this._run_hook("before_send_"+e.type,r)),r?(j.log("MIXPANEL REQUEST:"),j.log(r),this._send_request(n,this._encode_data_for_request(r),s,this._prepare_callback(t,r))):null}),this);return this._batch_requests&&!i?o.enqueue(r,(function(e){e?t(1,r):u()})):a=u(),a&&r},et.prototype.track=de((function(e,t,r,n){n||"function"!=typeof r||(n=r,r=null);var o=(r=r||{}).transport;o&&(r.transport=o);var i=r.send_immediately;if("function"!=typeof n&&(n=Ye),U.isUndefined(e))this.report_error("No event name provided to mixpanel.track");else{if(!this._event_is_disabled(e)){(t=t||{}).token=this.get_config("token");var s=this.persistence.remove_event_timer(e);if(!U.isUndefined(s)){var a=(new Date).getTime()-s;t.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops(),t=U.extend({},U.info.properties(),this.persistence.properties(),this.unpersisted_superprops,t);var u=this.get_config("property_blacklist");U.isArray(u)?U.each(u,(function(e){delete t[e]})):this.report_error("Invalid value for property_blacklist config: "+u);var l={event:e,properties:t};return this._track_or_batch({type:"events",data:l,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:i,send_request_options:r},n)}n(0)}})),et.prototype.set_group=de((function(e,t,r){U.isArray(t)||(t=[t]);var n={};return n[e]=t,this.register(n),this.people.set(e,t,r)})),et.prototype.add_group=de((function(e,t,r){var n=this.get_property(e);if(void 0===n){var o={};o[e]=[t],this.register(o)}else-1===n.indexOf(t)&&(n.push(t),this.register(o));return this.people.union(e,t,r)})),et.prototype.remove_group=de((function(e,t,r){var n=this.get_property(e);if(void 0!==n){var o=n.indexOf(t);o>-1&&(n.splice(o,1),this.register({group_key:n})),0===n.length&&this.unregister(e)}return this.people.remove(e,t,r)})),et.prototype.track_with_groups=de((function(e,t,r,n){var o=U.extend({},t||{});return U.each(r,(function(e,t){null!=e&&(o[t]=e)})),this.track(e,o,n)})),et.prototype._create_map_key=function(e,t){return e+"_"+JSON.stringify(t)},et.prototype._remove_group_from_cache=function(e,t){delete this._cached_groups[this._create_map_key(e,t)]},et.prototype.get_group=function(e,t){var r=this._create_map_key(e,t),n=this._cached_groups[r];return void 0!==n&&n._group_key===e&&n._group_id===t||((n=new Re)._init(this,e,t),this._cached_groups[r]=n),n},et.prototype.track_pageview=function(e){U.isUndefined(e)&&(e=I.location.href),this.track("mp_page_view",U.info.pageviewInfo(e))},et.prototype.track_links=function(){return this._track_dom.call(this,X,arguments)},et.prototype.track_forms=function(){return this._track_dom.call(this,J,arguments)},et.prototype.time_event=function(e){U.isUndefined(e)?this.report_error("No event name provided to mixpanel.time_event"):this._event_is_disabled(e)||this.persistence.set_event_timer(e,(new Date).getTime())};var rt={persistent:!0},nt=function(e){var t;return t=U.isObject(e)?e:U.isUndefined(e)?{}:{days:e},U.extend({},rt,t)};et.prototype.register=function(e,t){var r=nt(t);r.persistent?this.persistence.register(e,r.days):U.extend(this.unpersisted_superprops,e)},et.prototype.register_once=function(e,t,r){var n=nt(r);n.persistent?this.persistence.register_once(e,t,n.days):(void 0===t&&(t="None"),U.each(e,(function(e,r){this.unpersisted_superprops.hasOwnProperty(r)&&this.unpersisted_superprops[r]!==t||(this.unpersisted_superprops[r]=e)}),this))},et.prototype.unregister=function(e,t){(t=nt(t)).persistent?this.persistence.unregister(e):delete this.unpersisted_superprops[e]},et.prototype._register_single=function(e,t){var r={};r[e]=t,this.register(r)},et.prototype.identify=function(e,t,r,n,o,i,s,a){var u=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var l=u;this.register_once({$had_persisted_distinct_id:!0,$device_id:l},"")}e!==u&&e!==this.get_property(Be)&&(this.unregister(Be),this.register({distinct_id:e})),this._flags.identify_called=!0,this.people._flush(t,r,n,o,i,s,a),e!==u&&this.track("$identify",{distinct_id:e,$anon_distinct_id:u},{skip_hooks:!0})},et.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var e=U.UUID();this.register_once({distinct_id:e,$device_id:e},"")},et.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},et.prototype.alias=function(e,t){if(e===this.get_property(Fe))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var r=this;return U.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(Be,e),this.track("$create_alias",{alias:e,distinct_id:t},{skip_hooks:!0},(function(){r.identify(e)}))):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)},et.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)},et.prototype.set_config=function(e){U.isObject(e)&&(U.extend(this.config,e),e.batch_size&&U.each(this.request_batchers,(function(e){e.resetBatchSize()})),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),o.DEBUG=o.DEBUG||this.get_config("debug"))},et.prototype.get_config=function(e){return this.config[e]},et.prototype._run_hook=function(e){var t=(this.config.hooks[e]||We).apply(this,S.call(arguments,1));return void 0===t&&(this.report_error(e+" hook did not return a value"),t=null),t},et.prototype.get_property=function(e){return this.persistence.props[e]},et.prototype.toString=function(){var e=this.get_config("name");return e!==Ke&&(e=Ke+"."+e),e},et.prototype._event_is_disabled=function(e){return U.isBlockedUA(R)||this._flags.disable_all_events||U.include(this.__disabled_events,e)},et.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_tracking_persistence_type")&&U.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_tracking()||!this.get_config("opt_out_tracking_by_default")&&!U.cookie.get("mp_optout")||(U.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},et.prototype._gdpr_update_persistence=function(e){var t;if(e&&e.clear_persistence)t=!0;else{if(!e||!e.enable_persistence)return;t=!1}this.get_config("disable_persistence")||this.persistence.disabled===t||this.persistence.set_disabled(t),t&&U.each(this.request_batchers,(function(e){e.clear()}))},et.prototype._gdpr_call_func=function(e,t){return t=U.extend({track:U.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},t),U.localStorage.is_supported()||(t.persistence_type="cookie"),e(this.get_config("token"),{track:t.track,trackEventName:t.track_event_name,trackProperties:t.track_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieDomain:t.cookie_domain,cookieExpiration:t.cookie_expiration,crossSiteCookie:t.cross_site_cookie,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie,ignoreDnt:t.ignore_dnt})},et.prototype.opt_in_tracking=function(e){e=U.extend({enable_persistence:!0},e),this._gdpr_call_func(ae,e),this._gdpr_update_persistence(e)},et.prototype.opt_out_tracking=function(e){(e=U.extend({clear_persistence:!0,delete_user:!0},e)).delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(ue,e),this._gdpr_update_persistence(e)},et.prototype.has_opted_in_tracking=function(e){return this._gdpr_call_func(le,e)},et.prototype.has_opted_out_tracking=function(e){return this._gdpr_call_func(ce,e)},et.prototype.clear_opt_in_out_tracking=function(e){e=U.extend({enable_persistence:!0},e),this._gdpr_call_func(he,e),this._gdpr_update_persistence(e)},et.prototype.report_error=function(e,t){j.error.apply(j.error,arguments);try{t||e instanceof Error||(e=new Error(e)),this.get_config("error_reporter")(e,t)}catch(t){j.error(t)}},et.prototype.init=et.prototype.init,et.prototype.reset=et.prototype.reset,et.prototype.disable=et.prototype.disable,et.prototype.time_event=et.prototype.time_event,et.prototype.track=et.prototype.track,et.prototype.track_links=et.prototype.track_links,et.prototype.track_forms=et.prototype.track_forms,et.prototype.track_pageview=et.prototype.track_pageview,et.prototype.register=et.prototype.register,et.prototype.register_once=et.prototype.register_once,et.prototype.unregister=et.prototype.unregister,et.prototype.identify=et.prototype.identify,et.prototype.alias=et.prototype.alias,et.prototype.name_tag=et.prototype.name_tag,et.prototype.set_config=et.prototype.set_config,et.prototype.get_config=et.prototype.get_config,et.prototype.get_property=et.prototype.get_property,et.prototype.get_distinct_id=et.prototype.get_distinct_id,et.prototype.toString=et.prototype.toString,et.prototype.opt_out_tracking=et.prototype.opt_out_tracking,et.prototype.opt_in_tracking=et.prototype.opt_in_tracking,et.prototype.has_opted_out_tracking=et.prototype.has_opted_out_tracking,et.prototype.has_opted_in_tracking=et.prototype.has_opted_in_tracking,et.prototype.clear_opt_in_out_tracking=et.prototype.clear_opt_in_out_tracking,et.prototype.get_group=et.prototype.get_group,et.prototype.set_group=et.prototype.set_group,et.prototype.add_group=et.prototype.add_group,et.prototype.remove_group=et.prototype.remove_group,et.prototype.track_with_groups=et.prototype.track_with_groups,et.prototype.start_batch_senders=et.prototype.start_batch_senders,et.prototype.stop_batch_senders=et.prototype.stop_batch_senders,He.prototype.properties=He.prototype.properties,He.prototype.update_search_keyword=He.prototype.update_search_keyword,He.prototype.update_referrer_info=He.prototype.update_referrer_info,He.prototype.get_cross_subdomain=He.prototype.get_cross_subdomain,He.prototype.clear=He.prototype.clear;var ot={},it=function(){we.init=function(e,t,r){if(r)return we[r]||(we[r]=ot[r]=tt(e,t,r),we[r]._loaded()),we[r];var o=we;ot[Ke]?o=ot[Ke]:e&&((o=tt(e,t,Ke))._loaded(),ot[Ke]=o),we=o,1===De&&(n[Ke]=we),U.each(ot,(function(e,t){t!==Ke&&(we[t]=e)})),we._=U}};var st=(De=0,we=new et,it(),we.init(),function(){function e(){e.done||(e.done=!0,Qe=!0,Xe=!1,U.each(ot,(function(e){e._dom_loaded()})))}if(I.addEventListener)"complete"===I.readyState?e():I.addEventListener("DOMContentLoaded",e,!1);else if(I.attachEvent){I.attachEvent("onreadystatechange",e);var t=!1;try{t=null===n.frameElement}catch(e){}I.documentElement.doScroll&&t&&function t(){try{I.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}U.register_event(n,"load",e,!0)}(),we);t.exports=st},{}],653:[function(e,t,r){var n,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var l,c=[],d=!1,f=-1;function p(){d&&l&&(d=!1,l.length?c=l.concat(c):f=-1,c.length&&h())}function h(){if(!d){var e=u(p);d=!0;for(var t=c.length;t;){for(l=c,c=[];++f<t;)l&&l[f].run();f=-1,t=c.length}l=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function E(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new _(e,t)),1!==c.length||d||u(h)},_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=E,i.addListener=E,i.once=E,i.off=E,i.removeListener=E,i.removeAllListeners=E,i.emit=E,i.prependListener=E,i.prependOnceListener=E,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],654:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var d,f,p,h,_=e[c].replace(a,"%20"),E=_.indexOf(r);E>=0?(d=_.substr(0,E),f=_.substr(E+1)):(d=_,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),n(s,p)?o(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],655:[function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var a=encodeURIComponent(n(s))+r;return o(e[s])?i(e[s],(function(e){return a+encodeURIComponent(n(e))})).join(t):a+encodeURIComponent(n(e[s]))})).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],656:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":654,"./encode":655}],657:[function(e,t,r){(function(e){(function(){"use strict";r.__esModule=!0;var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.default=function(r){"object"===("undefined"==typeof window?"undefined":n(window))&&"object"===n(window.onerror)?window.onerror=function(e,t,n,i,s){var a={type:o,message:e,url:t,lineNo:n,columnNo:i};return s&&s.stack&&(a.stack=s.stack),r(a),!1}:void 0!==e&&e.ErrorUtils&&e.ErrorUtils.setGlobalHandler((function(e,t){r({type:o,error:e,isFatal:t})}));"object"!==("undefined"==typeof console?"undefined":n(console))||"function"!=typeof console.error||console.beforeRemotedev||(console.beforeRemotedev=console.error.bind(console),console.error=function(){var e={type:o},n=arguments[0];e.message=n.message?n.message:n,n.sourceURL&&(e=t({},e,{sourceURL:n.sourceURL,line:n.line,column:n.column})),n.stack&&(e.stack=n.stack),r(e),console.beforeRemotedev.apply(null,arguments)})};var o="@@remotedev/ERROR"}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],658:[function(e,t,r){"use strict";r.__esModule=!0,r.FilterState=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.arrToRegex=function(e){return"string"==typeof e?e:e.join("|")},r.getLocalFilter=function(e){if(e.actionsBlacklist||e.actionsWhitelist)return{whitelist:e.actionsWhitelist&&e.actionsWhitelist.join("|"),blacklist:e.actionsBlacklist&&e.actionsBlacklist.join("|")};return},r.isFiltered=d,r.filterStagedActions=function(e,t){if(!t)return e;var r=[],o=[];return e.stagedActionIds.forEach((function(n,i){d(e.actionsById[n],t)||(r.push(n),o.push(e.computedStates[i]))})),n({},e,{stagedActionIds:r,computedStates:o})},r.filterState=function(e,t,r,o,i,s,f){if("ACTION"===t)return o?o(e,s-1):e;if("STATE"!==t)return e;var p=c().filter;if(f||r||p&&p!==a.DO_NOT_FILTER){var h=[],_=[],E=i&&{},g=e.actionsById,m=e.computedStates;return e.stagedActionIds.forEach((function(e,t){var s=g[e],a=s.action,u=m[t],l=u.state;if(t){if(f&&!f(l,a))return;if(d(a,r))return}h.push(e),_.push(o?n({},u,{state:o(l,t)}):u),i&&(E[e]=n({},s,{action:i(a,e)}))})),n({},e,{actionsById:E||g,stagedActionIds:h,computedStates:_})}return o||i?n({},e,{actionsById:u(e.actionsById,i),computedStates:l(e.computedStates,o)}):e};var o,i=e("lodash/mapValues"),s=(o=i)&&o.__esModule?o:{default:o};var a=r.FilterState={DO_NOT_FILTER:"DO_NOT_FILTER",BLACKLIST_SPECIFIC:"BLACKLIST_SPECIFIC",WHITELIST_SPECIFIC:"WHITELIST_SPECIFIC"};function u(e,t){return t?(0,s.default)(e,(function(e,r){return n({},e,{action:t(e.action,r)})})):e}function l(e,t){return t?e.map((function(e,r){return n({},e,{state:t(e.state,r)})})):e}function c(){return"undefined"!=typeof window&&window.devToolsOptions||{}}function d(e,t){var r=(e.action||e).type,n=c();if(!t&&n.filter&&n.filter===a.DO_NOT_FILTER||r&&"function"!=typeof r.match)return!1;var o=t||n,i=o.whitelist,s=o.blacklist;return i&&!r.match(i)||s&&r.match(s)}},{"lodash/mapValues":636}],659:[function(e,t,r){"use strict";r.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.generateId=function(e){return e||(0,s.default)(7)},r.getMethods=function(e){if("object"!==(void 0===e?"undefined":n(e)))return;var t=void 0,r=void 0;e.__proto__&&(r=e.__proto__.__proto__);r||(r=e);return Object.getOwnPropertyNames(r).forEach((function(e){var n=Object.getOwnPropertyDescriptor(r,e);if(n&&!("get"in n)&&!("set"in n)){var i=r[e];"function"==typeof i&&"constructor"!==e&&(t||(t=[]),t.push({name:e||i.name||"anonymous",args:(0,o.default)(i)}))}})),t},r.getActionsArray=function(e){return Array.isArray(e)?e:l(e)},r.evalAction=function(e,t){if("string"==typeof e)return new Function("return "+e)();var r=t[e.selected].func,n=d(e.args,e.rest);return r.apply(void 0,n)},r.evalMethod=function(e,t){if("string"==typeof e)return new Function("return "+e).call(t);var r=d(e.args,e.rest);return new Function("args","return this."+e.name+"(args)").apply(t,r)},r.stringify=function(e,t){if(void 0===t)return function(e){try{return JSON.stringify(e)}catch(t){return i.default.stringify(e,null,null,{circular:"[CIRCULAR]"})}}(e);if(!0===t)return i.default.stringify(e,(function(e,t){return t&&"function"==typeof t.toJS?t.toJS():t}),null,!0);return i.default.stringify(e,t.replacer,null,t.options)},r.getSeralizeParameter=function(e,t){var r=e.serialize;if(r)return!0===r?{options:!0}:r.immutable?{replacer:(0,a.default)(r.immutable,r.refs).replacer,options:r.options||!0}:r.replacer?{replacer:r.replacer,options:r.options||!0}:{options:r.options};var n=e[t];return void 0===n?void 0:(console.warn("`"+t+"` parameter for Redux DevTools Extension is deprecated. Use `serialize` parameter instead: https://github.com/zalmoxisus/redux-devtools-extension/releases/tag/v2.12.1"),"boolean"==typeof serializeState?{options:n}:"function"==typeof serializeState?{replacer:n}:n)},r.getStackTrace=function(e,t){if(!e.trace)return;if("function"==typeof e.trace)return e.trace();var r=void 0,n=0,o=void 0,i=e.traceLimit,s=Error();Error.captureStackTrace?(Error.stackTraceLimit<i&&(o=Error.stackTraceLimit,Error.stackTraceLimit=i),Error.captureStackTrace(s,t)):n=3;r=s.stack,o&&(Error.stackTraceLimit=o);if(n||"number"!=typeof Error.stackTraceLimit||Error.stackTraceLimit>i){var a=r.split("\n");a.length>i&&(r=a.slice(0,i+n+("Error"===a[0]?1:0)).join("\n"))}return r};var o=u(e("get-params")),i=u(e("jsan")),s=u(e("nanoid/non-secure")),a=u(e("remotedev-serialize/immutable/serialize"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=[];return Object.keys(e).forEach((function(i){var s=e[i];"function"==typeof s?r.push({name:t+(i||s.name||"anonymous"),func:s,args:(0,o.default)(s)}):"object"===(void 0===s?"undefined":n(s))&&(r=r.concat(l(s,t+i+".")))})),r}var c=function(e){return new Function("return "+e)()};function d(e,t){var r=e.map(c);if(!t)return r;var n=c(t);if(Array.isArray(n))return r.concat.apply(r,n);throw new Error("rest must be an array")}},{"get-params":468,jsan:492,"nanoid/non-secure":660,"remotedev-serialize/immutable/serialize":675}],660:[function(e,t,r){for(var n="-_",o=36;o--;)n+=o.toString(36);for(o=36;o---10;)n+=o.toString(36).toUpperCase();t.exports=function(e){var t="";for(o=e||21;o--;)t+=n[64*Math.random()|0];return t}},{}],661:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.liftAction=T,r.liftReducerWith=A,r.unliftState=b,r.unliftStore=O,r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("number"==typeof t.maxAge&&t.maxAge<2)throw new Error("DevTools.instrument({ maxAge }) option, if specified, may not be less than 2.");return function(r){return function(n,o){function i(r){if("function"!=typeof r){if(r&&"function"==typeof r.default)throw new Error('Expected the reducer to be a function. Instead got an object with a "default" field. Did you pass a module instead of the default export? Try passing require(...).default instead.');throw new Error("Expected the reducer to be a function.")}return A(r,o,e,t)}var s=r(i(n));if(s.liftedStore)throw new Error("DevTools instrumentation should not be applied more than once. Check your store configuration.");return O(s,i,t)}}},r.INIT_ACTION=r.ActionCreators=r.ActionTypes=void 0;var n=a(e("lodash/difference")),o=a(e("lodash/union")),i=a(e("lodash/isPlainObject")),s=a(e("symbol-observable"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var h={PERFORM_ACTION:"PERFORM_ACTION",RESET:"RESET",ROLLBACK:"ROLLBACK",COMMIT:"COMMIT",SWEEP:"SWEEP",TOGGLE_ACTION:"TOGGLE_ACTION",SET_ACTIONS_ACTIVE:"SET_ACTIONS_ACTIVE",JUMP_TO_STATE:"JUMP_TO_STATE",JUMP_TO_ACTION:"JUMP_TO_ACTION",REORDER_ACTION:"REORDER_ACTION",IMPORT_STATE:"IMPORT_STATE",LOCK_CHANGES:"LOCK_CHANGES",PAUSE_RECORDING:"PAUSE_RECORDING"};r.ActionTypes=h;var _="object"===("undefined"==typeof window?"undefined":p(window))&&(void 0!==window.chrome||void 0!==window.process&&"renderer"===window.process.type),E=_||void 0!==t&&t.release&&"node"===t.release.name,g={performAction:function(e,t,r,n){if(!(0,i.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');var o;if(t){var s=0;if("function"==typeof t)o=t(e);else{var a,u=Error();if(Error.captureStackTrace&&E?(r&&Error.stackTraceLimit<r&&(a=Error.stackTraceLimit,Error.stackTraceLimit=r),Error.captureStackTrace(u,n)):s=3,o=u.stack,a&&(Error.stackTraceLimit=a),(s||"number"!=typeof Error.stackTraceLimit||r&&Error.stackTraceLimit>r)&&null!=o){var l=o.split("\n");r&&l.length>r&&(o=l.slice(0,r+s+(l[0].startsWith("Error")?1:0)).join("\n"))}}}return{type:h.PERFORM_ACTION,action:e,timestamp:Date.now(),stack:o}},reset:function(){return{type:h.RESET,timestamp:Date.now()}},rollback:function(){return{type:h.ROLLBACK,timestamp:Date.now()}},commit:function(){return{type:h.COMMIT,timestamp:Date.now()}},sweep:function(){return{type:h.SWEEP}},toggleAction:function(e){return{type:h.TOGGLE_ACTION,id:e}},setActionsActive:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{type:h.SET_ACTIONS_ACTIVE,start:e,end:t,active:r}},reorderAction:function(e,t){return{type:h.REORDER_ACTION,actionId:e,beforeActionId:t}},jumpToState:function(e){return{type:h.JUMP_TO_STATE,index:e}},jumpToAction:function(e){return{type:h.JUMP_TO_ACTION,actionId:e}},importState:function(e,t){return{type:h.IMPORT_STATE,nextLiftedState:e,noRecompute:t}},lockChanges:function(e){return{type:h.LOCK_CHANGES,status:e}},pauseRecording:function(e){return{type:h.PAUSE_RECORDING,status:e}}};r.ActionCreators=g;var m={type:"@@INIT"};function y(e,t,r,n){return n?function(e,t,r){var n,o=r;try{o=e(r,t)}catch(e){n=e.toString(),_?setTimeout((function(){throw e})):console.error(e)}return{state:o,error:n}}(e,t,r):{state:e(r,t)}}function S(e,t,r,n,o,i,s,a){if(!e||-1===t||t>=e.length&&e.length===i.length)return e;for(var u=e.slice(0,t),l=t;l<i.length;l++){var c=i[l],d=o[c].action,f=u[l-1],p=f?f.state:n,h=void 0;h=s.indexOf(c)>-1?f:a&&f&&f.error?{state:p,error:"Interrupted by an error up the chain"}:y(r,d,p,a),u.push(h)}return u}function T(e,t,r,n){return g.performAction(e,t,r,n)}function A(e,t,r,i){var s={monitorState:r(void 0,{}),nextActionId:1,actionsById:{0:T(m)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!0===i.shouldStartLocked,isPaused:!1===i.shouldRecordChanges};return function(a,l){var c=a||s,p=c.monitorState,_=c.actionsById,E=c.nextActionId,g=c.stagedActionIds,A=c.skippedActionIds,b=c.committedState,O=c.currentStateIndex,I=c.computedStates,v=c.isLocked,N=c.isPaused;function R(e){for(var t=e,r=g.slice(1,t+1),n=0;n<r.length;n++){if(I[n+1].error){t=n,r=g.slice(1,t+1);break}delete _[r[n]]}A=A.filter((function(e){return-1===r.indexOf(e)})),g=[0].concat(u(g.slice(t+1))),b=I[t].state,I=I.slice(t),O=O>t?O-t:0}function C(t){var n;return t?(n=I[O],p=r(p,l)):n=y(e,l.action,I[O].state,!1),i.pauseActionType&&1!==E?(t&&(O===g.length-1&&O++,g=[].concat(u(g),[E]),E++),{monitorState:p,actionsById:d(d({},_),{},f({},E-1,T({type:i.pauseActionType}))),nextActionId:E,stagedActionIds:g,skippedActionIds:A,committedState:b,currentStateIndex:O,computedStates:[].concat(u(I.slice(0,g.length-1)),[n]),isLocked:v,isPaused:!0}):{monitorState:p,actionsById:{0:T(m)},nextActionId:1,stagedActionIds:[0],skippedActionIds:[],committedState:n.state,currentStateIndex:0,computedStates:[n],isLocked:v,isPaused:!0}}a||(_=d({},_));var D,w=0,L=i.maxAge;if("function"==typeof L&&(L=L(l,a)),/^@@redux\/(INIT|REPLACE)/.test(l.type))!1===i.shouldHotReload&&(_={0:T(m)},E=1,g=[0],A=[],b=0===I.length?t:I[O].state,O=0,I=[]),w=0,L&&g.length>L&&(I=S(I,w,e,b,_,g,A,i.shouldCatchErrors),R(g.length-L),w=1/0);else switch(l.type){case h.PERFORM_ACTION:if(v)return a||s;if(N)return C();L&&g.length>=L&&R(g.length-L+1),O===g.length-1&&O++;var P=E++;_[P]=l,w=(g=[].concat(u(g),[P])).length-1;break;case h.RESET:_={0:T(m)},E=1,g=[0],A=[],b=t,O=0,I=[];break;case h.COMMIT:_={0:T(m)},E=1,g=[0],A=[],b=I[O].state,O=0,I=[];break;case h.ROLLBACK:_={0:T(m)},E=1,g=[0],A=[],O=0,I=[];break;case h.TOGGLE_ACTION:var M=l.id,U=A.indexOf(M);A=-1===U?[M].concat(u(A)):A.filter((function(e){return e!==M})),w=g.indexOf(M);break;case h.SET_ACTIONS_ACTIVE:for(var j=l.start,k=l.end,x=l.active,F=[],B=j;B<k;B++)F.push(B);A=x?(0,n.default)(A,F):(0,o.default)(A,F),w=g.indexOf(j);break;case h.JUMP_TO_STATE:O=l.index,w=1/0;break;case h.JUMP_TO_ACTION:var G=g.indexOf(l.actionId);-1!==G&&(O=G),w=1/0;break;case h.SWEEP:g=(0,n.default)(g,A),A=[],O=Math.min(O,g.length-1);break;case h.REORDER_ACTION:var V=l.actionId,H=g.indexOf(V);if(H<1)break;var W=l.beforeActionId,Y=g.indexOf(W);if(Y<1){var K=g.length;Y=W>g[K-1]?K:1}var z=H-Y;z>0?(g=[].concat(u(g.slice(0,Y)),[V],u(g.slice(Y,H)),u(g.slice(H+1))),w=Y):z<0&&(g=[].concat(u(g.slice(0,H)),u(g.slice(H+1,Y)),[V],u(g.slice(Y))),w=H);break;case h.IMPORT_STATE:if(D=l.nextLiftedState,Array.isArray(D))_={0:T(m)},E=1,g=[0],A=[],O=l.nextLiftedState.length,I=[],b=l.preloadedState,w=0,l.nextLiftedState.forEach((function(e){_[E]=T(e,i.trace||i.shouldIncludeCallstack),g.push(E),E++}));else{var q=l.nextLiftedState;p=q.monitorState,_=q.actionsById,E=q.nextActionId,g=q.stagedActionIds,A=q.skippedActionIds,b=q.committedState,O=q.currentStateIndex,I=q.computedStates,l.noRecompute&&(w=1/0)}break;case h.LOCK_CHANGES:v=l.status,w=1/0;break;case h.PAUSE_RECORDING:if(N=l.status)return C(!0);_={0:T(m)},E=1,g=[0],A=[],b=I[O].state,O=0,I=[];break;default:w=1/0}return I=S(I,w,e,b,_,g,A,i.shouldCatchErrors),{monitorState:p=r(p,l),actionsById:_,nextActionId:E,stagedActionIds:g,skippedActionIds:A,committedState:b,currentStateIndex:O,computedStates:I,isLocked:v,isPaused:N}}}function b(e){return e.computedStates[e.currentStateIndex].state}function O(e,t,r){var n,o=r.trace||r.shouldIncludeCallstack,i=r.traceLimit||10;function a(){var t=b(e.getState());return void 0!==t&&(n=t),n}return d(d({},e),{},f({liftedStore:e,dispatch:function t(r){return e.dispatch(T(r,o,i,t)),r},getState:a,replaceReducer:function(r){e.replaceReducer(t(r))}},s.default,(function(){return d(d({},e[s.default]()),{},f({subscribe:function(t){if("object"!==p(t))throw new TypeError("Expected the observer to be an object.");function r(){t.next&&t.next(a())}return r(),{unsubscribe:e.subscribe(r)}}},s.default,(function(){return this})))})))}r.INIT_ACTION=m}).call(this)}).call(this,e("_process"))},{_process:653,"lodash/difference":618,"lodash/isPlainObject":632,"lodash/union":643,"symbol-observable":713}],662:[function(e,t,r){"use strict";function n(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n();o.withExtraArgument=n;var i=o;r.default=i},{}],663:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("@babel/runtime/helpers/objectSpread2"));function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var s="function"==typeof Symbol&&Symbol.observable||"@@observable",a=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function l(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(i(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(i(1));return r(c)(e,t)}if("function"!=typeof e)throw new Error(i(2));var o=e,a=t,d=[],f=d,p=!1;function h(){f===d&&(f=d.slice())}function _(){if(p)throw new Error(i(3));return a}function E(e){if("function"!=typeof e)throw new Error(i(4));if(p)throw new Error(i(5));var t=!0;return h(),f.push(e),function(){if(t){if(p)throw new Error(i(6));t=!1,h();var r=f.indexOf(e);f.splice(r,1),d=null}}}function g(e){if(!l(e))throw new Error(i(7));if(void 0===e.type)throw new Error(i(8));if(p)throw new Error(i(9));try{p=!0,a=o(a,e)}finally{p=!1}for(var t=d=f,r=0;r<t.length;r++){(0,t[r])()}return e}return g({type:u.INIT}),(n={dispatch:g,subscribe:E,getState:_,replaceReducer:function(e){if("function"!=typeof e)throw new Error(i(10));o=e,g({type:u.REPLACE})}})[s]=function(){var e,t=E;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(i(11));function r(){e.next&&e.next(_())}return r(),{unsubscribe:t(r)}}})[s]=function(){return this},e},n}var d=c;function f(e,t){return function(){return t(e.apply(this,arguments))}}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}r.__DO_NOT_USE__ActionTypes=u,r.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(i(15))},s={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},a=t.map((function(e){return e(s)}));return n=p.apply(void 0,a)(r.dispatch),o.default(o.default({},r),{},{dispatch:n})}}},r.bindActionCreators=function(e,t){if("function"==typeof e)return f(e,t);if("object"!=typeof e||null===e)throw new Error(i(16));var r={};for(var n in e){var o=e[n];"function"==typeof o&&(r[n]=f(o,t))}return r},r.combineReducers=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(r[o]=e[o])}var s,a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:u.INIT}))throw new Error(i(12));if(void 0===r(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(r)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var n=!1,o={},u=0;u<a.length;u++){var l=a[u],c=r[l],d=e[l],f=c(d,t);if(void 0===f){t&&t.type;throw new Error(i(14))}o[l]=f,n=n||f!==d}return(n=n||a.length!==Object.keys(e).length)?o:e}},r.compose=p,r.createStore=c,r.legacy_createStore=d},{"@babel/runtime/helpers/objectSpread2":665}],664:[function(e,t,r){var n=e("./toPropertyKey.js");t.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":667}],665:[function(e,t,r){var n=e("./defineProperty.js");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./defineProperty.js":664}],666:[function(e,t,r){var n=e("./typeof.js").default;t.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":668}],667:[function(e,t,r){var n=e("./typeof.js").default,o=e("./toPrimitive.js");t.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:String(t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":666,"./typeof.js":668}],668:[function(e,t,r){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},{}],669:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t,r){return(0,i.default)(t,r)(e)};var n,o=e("redux-devtools-instrument"),i=(n=o)&&n.__esModule?n:{default:n}},{"redux-devtools-instrument":661}],670:[function(e,t,r){"use strict";r.__esModule=!0;r.defaultSocketOptions={secure:!0,hostname:"remotedev.io",port:443,autoReconnect:!0,autoReconnectOptions:{randomness:3e4}}},{}],671:[function(e,t,r){"use strict";r.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.default=$,r.preEnhancer=X,r.composeWithDevTools=function(){if(0===arguments.length)return $();if(1===arguments.length&&"object"===n(arguments.length<=0?void 0:arguments[0]))return J(arguments.length<=0?void 0:arguments[0]);return J({}).apply(void 0,arguments)};var i=e("jsan"),s=p(e("socketcluster-client")),a=p(e("./configureStore")),u=e("./constants"),l=p(e("rn-host-detect")),c=e("redux-devtools-core/lib/utils"),d=p(e("redux-devtools-core/lib/utils/catchErrors")),f=e("redux-devtools-core/lib/utils/filters");function p(e){return e&&e.__esModule?e:{default:e}}var h=void 0,_=void 0,E=void 0,g={},m=void 0,y=void 0,S=void 0,T={},A=void 0,b=void 0,O=void 0,I=void 0,v=void 0,N=void 0,R=void 0,C=void 0,D=void 0,w=void 0,L=void 0,P=void 0,M=void 0,U=void 0,j=void 0,k=void 0;function x(){return(0,f.filterStagedActions)(T.liftedStore.getState(),b)}function F(){h||(h=y&&y.id||Math.random().toString(36).substr(2));try{fetch(w,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({type:"STATE",id:h,name:_,payload:(0,i.stringify)(x())})}).catch((function(e){console.log(e)}))}catch(e){console.log(e)}}function B(e,t,r,n){var o={type:e,id:y.id,name:_};t&&(o.payload="ERROR"===e?t:(0,i.stringify)((0,f.filterState)(t,e,b,j,k,n))),"ACTION"===e?(o.action=(0,i.stringify)(k?k(r.action,n-1):r),o.isExcess=O,o.nextActionId=n):r&&(o.action=r),y.emit(y.id?"log":"log-noid",o)}function G(e){"IMPORT"===e.type||"SYNC"===e.type&&y.id&&e.id!==y.id?T.liftedStore.dispatch({type:"IMPORT_STATE",nextLiftedState:(0,i.parse)(e.state)}):"UPDATE"===e.type?B("STATE",x()):"START"===e.type?(I=!0,"function"==typeof U&&(U=U()),B("STATE",x(),U)):"STOP"===e.type||"DISCONNECTED"===e.type?(I=!1,B("STOP")):"ACTION"===e.type?function(e){try{var t=(0,c.evalAction)(e,U);T.dispatch(t)}catch(e){B("ERROR",e.message)}}(e.action):"DISPATCH"===e.type&&T.liftedStore.dispatch(e.action)}function V(e){setTimeout(e,0)}function H(e){e.message&&e.message===L||(L=e.message,V((function(){T.dispatch(e),v||F()})))}function W(e){return"string"==typeof e?[e]:e&&e.length}function Y(e){v=!1,I=!1,y&&(y.destroyChannel(S),e?y.off(S,G):(y.off(),y.disconnect()))}function K(){v||y&&y.getState()===y.CONNECTING||((y=s.default.connect(m)).on("error",(function(e){g[e.name]=g.hasOwnProperty(e.name)?g[e.name]+1:1,E?1===g[e.name]&&(console.log("remote-redux-devtools: Socket connection errors are being suppressed. \nThis can be disabled by setting suppressConnectErrors to 'false'."),console.log(e)):console.log(e)})),y.on("connect",(function(){console.log("connected to remotedev-server"),g={},y.emit("login","master",(function(e,t){e?console.log(e):(S=t,y.subscribe(t).watch(G),y.on(t,G))})),v=!0,B("START")})),y.on("disconnect",(function(){Y(!0)})))}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.liftedStore.getState();return!!e.computedStates[e.currentStateIndex].error&&(v?B("STATE",(0,f.filterStagedActions)(e,b)):F(),!0)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return A=t.type,!v&&2===D&&T.liftedStore?V(z):t.action&&(N&&!v&&-1!==N.indexOf(t.action.type)?V(K):R&&v&&-1!==R.indexOf(t.action.type)?V(Y):C&&!v&&-1!==C.indexOf(t.action.type)&&V(F)),e}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e){_=e.name;var t=e.filters||{},r=t.blacklist,n=t.whitelist;b=(0,f.getLocalFilter)({actionsBlacklist:r||e.actionsBlacklist,actionsWhitelist:n||e.actionsWhitelist}),m=e.port?{port:e.port,hostname:e.hostname||"localhost",secure:e.secure}:u.defaultSocketOptions,E=void 0===e.suppressConnectErrors||e.suppressConnectErrors,N=W(e.startOn),R=W(e.stopOn),C=W(e.sendOn),D=e.sendOnError,(C||D)&&(w=e.sendTo||(m.secure?"https":"http")+"://"+m.hostname+":"+m.port,h=e.id),1===D&&(0,d.default)(H),e.actionCreators&&(U=function(){return(0,c.getActionsArray)(e.actionCreators)}),j=e.stateSanitizer,k=e.actionSanitizer}(o({},e,{hostname:(0,l.default)(e.hostname||"localhost")}));var t=void 0!==e.realtime&&e.realtime;if(!t&&!(N||C||D))return function(e){return e};var r=e.maxAge||30;return function(n){return function(o,i){return T=(0,a.default)(n,q,{maxAge:r,trace:e.trace,traceLimit:e.traceLimit,shouldCatchErrors:!!D,shouldHotReload:e.shouldHotReload,shouldRecordChanges:e.shouldRecordChanges,shouldStartLocked:e.shouldStartLocked,pauseActionType:e.pauseActionType||"@@PAUSED"})(o,i),t&&K(),T.subscribe((function(){I&&function(e,t,r){if(!z(t))if("PERFORM_ACTION"===A){var n=t.nextActionId,o=t.actionsById[n-1];if((0,f.isFiltered)(o.action,b))return;B("ACTION",e,o,n),!O&&r&&(O=t.stagedActionIds.length>=r)}else{if("JUMP_TO_STATE"===A)return;if("PAUSE_RECORDING"===A?M=t.isPaused:"LOCK_CHANGES"===A&&(P=t.isLocked),M||P){if(!A)return;A=void 0}B("STATE",(0,f.filterStagedActions)(t,b))}}(T.getState(),T.liftedStore.getState(),r)})),T}}}function X(e){return function(t,r,n){return T=e(t,r,n),o({},T,{dispatch:function(e){return P?e:T.dispatch(e)}})}}$.updateStore=function(e){console.warn("devTools.updateStore is deprecated use composeWithDevTools instead: https://github.com/zalmoxisus/remote-redux-devtools#use-devtools-compose-helper"),T=e};var J=function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(){return[X].concat(r).reduceRight((function(e,t){return t(e)}),$(e).apply(void 0,arguments))}}}},{"./configureStore":669,"./constants":670,jsan:492,"redux-devtools-core/lib/utils":659,"redux-devtools-core/lib/utils/catchErrors":657,"redux-devtools-core/lib/utils/filters":658,"rn-host-detect":678,"socketcluster-client":682}],672:[function(e,t,r){"use strict";r.__esModule=!0,r.composeWithDevTools=r.default=void 0;var n=e("./devTools");Object.defineProperty(r,"composeWithDevTools",{enumerable:!0,get:function(){return n.composeWithDevTools}});var o,i=(o=n)&&o.__esModule?o:{default:o};r.default=i.default},{"./devTools":671}],673:[function(e,t,r){t.exports={refs:!1,date:!0,function:!0,regex:!0,undefined:!0,error:!0,symbol:!0,map:!0,set:!0,nan:!0,infinity:!0}},{}],674:[function(e,t,r){function n(e,t,r){return{data:r?e[r]():e,__serializedType__:t}}t.exports={mark:n,extract:function(e,t){return{data:Object.assign({},e),__serializedType__:t}},refer:function(e,t,r,o){var i=n(e,t,r);if(!o)return i;for(var s=0;s<o.length;s++){var a=o[s];if("function"==typeof a&&e instanceof a)return i.__serializedRef__=s,i}return i}}},{}],675:[function(e,t,r){var n=e("../helpers"),o=n.mark,i=n.extract,s=n.refer,a=e("../constants/options");t.exports=function(e,t,r,n){function u(r,n){return n instanceof e.Record?s(n,"ImmutableRecord","toObject",t):n instanceof e.Range?i(n,"ImmutableRange"):n instanceof e.Repeat?i(n,"ImmutableRepeat"):e.OrderedMap.isOrderedMap(n)?o(n,"ImmutableOrderedMap","toObject"):e.Map.isMap(n)?o(n,"ImmutableMap","toObject"):e.List.isList(n)?o(n,"ImmutableList","toArray"):e.OrderedSet.isOrderedSet(n)?o(n,"ImmutableOrderedSet","toArray"):e.Set.isSet(n)?o(n,"ImmutableSet","toArray"):e.Seq.isSeq(n)?o(n,"ImmutableSeq","toArray"):e.Stack.isStack(n)?o(n,"ImmutableStack","toArray"):n}function l(r,n){if("object"==typeof n&&null!==n&&"__serializedType__"in n){var o=n.data;switch(n.__serializedType__){case"ImmutableMap":return e.Map(o);case"ImmutableOrderedMap":return e.OrderedMap(o);case"ImmutableList":return e.List(o);case"ImmutableRange":return e.Range(o._start,o._end,o._step);case"ImmutableRepeat":return e.Repeat(o._value,o.size);case"ImmutableSet":return e.Set(o);case"ImmutableOrderedSet":return e.OrderedSet(o);case"ImmutableSeq":return e.Seq(o);case"ImmutableStack":return e.Stack(o);case"ImmutableRecord":return t&&t[n.__serializedRef__]?new t[n.__serializedRef__](o):e.Map(o);default:return o}}return n}return{replacer:r?function(e,t){return r(e,t,u)}:u,reviver:n?function(e,t){return n(e,t,l)}:l,options:a}}},{"../constants/options":673,"../helpers":674}],676:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createCacheKeyComparator=i,r.defaultEqualityCheck=void 0,r.defaultMemoize=function(e,t){var r="object"==typeof t?t:{equalityCheck:t},s=r.equalityCheck,a=void 0===s?o:s,u=r.maxSize,l=void 0===u?1:u,c=r.resultEqualityCheck,d=i(a),f=1===l?(p=d,{get:function(e){return h&&p(h.key,e)?h.value:n},put:function(e,t){h={key:e,value:t}},getEntries:function(){return h?[h]:[]},clear:function(){h=void 0}}):function(e,t){var r=[];function o(e){var o=r.findIndex((function(r){return t(e,r.key)}));if(o>-1){var i=r[o];return o>0&&(r.splice(o,1),r.unshift(i)),i.value}return n}function i(t,i){o(t)===n&&(r.unshift({key:t,value:i}),r.length>e&&r.pop())}function s(){return r}function a(){r=[]}return{get:o,put:i,getEntries:s,clear:a}}(l,d);var p,h;function _(){var t=f.get(arguments);if(t===n){if(t=e.apply(null,arguments),c){var r=f.getEntries().find((function(e){return c(e.value,t)}));r&&(t=r.value)}f.put(arguments,t)}return t}return _.clearCache=function(){return f.clear()},_};var n="NOT_FOUND";var o=function(e,t){return e===t};function i(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}}r.defaultEqualityCheck=o},{}],677:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSelector=void 0,r.createSelectorCreator=o,r.createStructuredSelector=void 0,Object.defineProperty(r,"defaultEqualityCheck",{enumerable:!0,get:function(){return n.defaultEqualityCheck}}),Object.defineProperty(r,"defaultMemoize",{enumerable:!0,get:function(){return n.defaultMemoize}});var n=e("./defaultMemoize");function o(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i,s=0,a={memoizeOptions:void 0},u=n.pop();if("object"==typeof u&&(a=u,u=n.pop()),"function"!=typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var l=a.memoizeOptions,c=void 0===l?r:l,d=Array.isArray(c)?c:[c],f=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}(n),p=e.apply(void 0,[function(){return s++,u.apply(null,arguments)}].concat(d)),h=e((function(){for(var e=[],t=f.length,r=0;r<t;r++)e.push(f[r].apply(null,arguments));return i=p.apply(null,e)}));return Object.assign(h,{resultFunc:u,memoizedResultFunc:p,dependencies:f,lastResult:function(){return i},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),h}}var i=o(n.defaultMemoize);r.createSelector=i;r.createStructuredSelector=function(e,t){if(void 0===t&&(t=i),"object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var r=Object.keys(e),n=t(r.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t,n){return e[r[n]]=t,e}),{})}));return n}},{"./defaultMemoize":676}],678:[function(e,t,r){"use strict";t.exports=function(e){if("object"!=typeof __fbBatchedBridgeConfig||"localhost"!==e&&"127.0.0.1"!==e)return e;var t=function(e){var t="undefined"!=typeof window&&window.__fbBatchedBridgeConfig&&window.__fbBatchedBridgeConfig.remoteModuleConfig;if(!Array.isArray(t)||"localhost"!==e&&"127.0.0.1"!==e)return{hostname:e,passed:!1};var r=e,n=!1;return t.some((function(e){if(!e)return!1;var t=e[0],o=e[1];return("AndroidConstants"===t||"PlatformConstants"===t)&&o&&o.ServerHost?(r=o.ServerHost.split(":")[0],n=!0,!0):!("SourceCode"!==t||!o||!o.scriptURL||(r=o.scriptURL.replace(/https?:\/\//,"").split(":")[0],n=!0,0))})),{hostname:r,passed:n}}(e);return t.passed?t.hostname:function(e){var t,r,n,o=console.warn;if("undefined"==typeof window||!window.__DEV__||"function"!=typeof window.require||"metroRequire"===window.require.name)return e;console.warn=function(){if(!(arguments[0]&&"function"==typeof arguments[0].indexOf&&arguments[0].indexOf("Requiring module 'NativeModules' by name")>-1))return o.apply(console,arguments)};try{t=window.require("NativeModules")}catch(e){}return console.warn=o,t?(r=t.PlatformConstants||t.AndroidConstants,n=t.SourceCode,r&&r.ServerHost?r.ServerHost.split(":")[0]:n&&n.scriptURL?n.scriptURL.replace(/https?:\/\//,"").split(":")[0]:e):e}(e)}},{}],679:[function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=e("buffer"),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(i(n,r),r.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:251}],680:[function(e,t,r){var n=e("component-emitter"),o=function(e,t,r){n.call(this),this.PENDING="pending",this.SUBSCRIBED="subscribed",this.UNSUBSCRIBED="unsubscribed",this.name=e,this.state=this.UNSUBSCRIBED,this.client=t,this.options=r||{},this.setOptions(this.options)};(o.prototype=Object.create(n.prototype)).setOptions=function(e){e||(e={}),this.waitForAuth=e.waitForAuth||!1,this.batch=e.batch||!1,void 0!==e.data&&(this.data=e.data)},o.prototype.getState=function(){return this.state},o.prototype.subscribe=function(e){this.client.subscribe(this.name,e)},o.prototype.unsubscribe=function(){this.client.unsubscribe(this.name)},o.prototype.isSubscribed=function(e){return this.client.isSubscribed(this.name,e)},o.prototype.publish=function(e,t){this.client.publish(this.name,e,t)},o.prototype.watch=function(e){this.client.watch(this.name,e)},o.prototype.unwatch=function(e){this.client.unwatch(this.name,e)},o.prototype.watchers=function(){return this.client.watchers(this.name)},o.prototype.destroy=function(){this.client.destroyChannel(this.name)},t.exports.SCChannel=o},{"component-emitter":256}],681:[function(e,t,r){(function(e){(function(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=/^[ \n\r\t]*[{\[]/;let o=function(e){let t=new Uint8Array(e),n=t.length,o="";for(let e=0;e<n;e+=3)o+=r[t[e]>>2],o+=r[(3&t[e])<<4|t[e+1]>>4],o+=r[(15&t[e+1])<<2|t[e+2]>>6],o+=r[63&t[e+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o},i=function(t,r){if(e.ArrayBuffer&&r instanceof e.ArrayBuffer)return{base64:!0,data:o(r)};if(e.Buffer){if(r instanceof e.Buffer)return{base64:!0,data:r.toString("base64")};if(r&&"Buffer"===r.type&&Array.isArray(r.data)){let t;return t=e.Buffer.from?e.Buffer.from(r.data):new e.Buffer(r.data),{base64:!0,data:t.toString("base64")}}}return r};t.exports.decode=function(e){if(null==e)return null;if("#1"===e||"#2"===e)return e;let t=e.toString();if(!n.test(t))return t;try{return JSON.parse(t)}catch(e){}return t},t.exports.encode=function(e){return"#1"===e||"#2"===e?e:JSON.stringify(e,i)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],682:[function(e,t,r){var n=e("./lib/scclientsocket"),o=e("./lib/factory");t.exports.factory=o,t.exports.SCClientSocket=n,t.exports.Emitter=e("component-emitter"),t.exports.create=function(e){return o.create(e)},t.exports.connect=t.exports.create,t.exports.destroy=function(e){return o.destroy(e)},t.exports.clients=o.clients,t.exports.version="14.3.1"},{"./lib/factory":684,"./lib/scclientsocket":686,"component-emitter":256}],683:[function(e,t,r){(function(e){(function(){var r=function(){this._internalStorage={},this.isLocalStorageEnabled=this._checkLocalStorageEnabled()};r.prototype._checkLocalStorageEnabled=function(){var t;try{e.localStorage,e.localStorage.setItem("__scLocalStorageTest",1),e.localStorage.removeItem("__scLocalStorageTest")}catch(e){t=e}return!t},r.prototype.saveToken=function(t,r,n,o){this.isLocalStorageEnabled&&e.localStorage?e.localStorage.setItem(t,r):this._internalStorage[t]=r,o&&o(null,r)},r.prototype.removeToken=function(t,r){var n;this.loadToken(t,(function(e,t){n=t})),this.isLocalStorageEnabled&&e.localStorage?e.localStorage.removeItem(t):delete this._internalStorage[t],r&&r(null,n)},r.prototype.loadToken=function(t,r){r(null,this.isLocalStorageEnabled&&e.localStorage?e.localStorage.getItem(t):this._internalStorage[t]||null)},t.exports.AuthEngine=r}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],684:[function(e,t,r){(function(r){(function(){var n=e("./scclientsocket"),o=e("sc-errors"),i=e("uuid"),s=o.InvalidArgumentsError,a={};function u(e,t){var n=null==e.secure?t:e.secure;return e.port||(r.location&&location.port?location.port:n?443:80)}t.exports={create:function(e){if((e=e||{}).host&&!e.host.match(/[^:]+:\d{2,5}/))throw new s('The host option should include both the hostname and the port number in the format "hostname:port"');if(e.host&&e.hostname)throw new s('The host option should already include the hostname and the port number in the format "hostname:port" - Because of this, you should never use host and hostname options together');if(e.host&&e.port)throw new s('The host option should already include the hostname and the port number in the format "hostname:port" - Because of this, you should never use host and port options together');var t=r.location&&"https:"===location.protocol,o={port:u(e,t),hostname:r.location&&location.hostname||"localhost",path:"/socketcluster/",secure:t,autoConnect:!0,autoReconnect:!0,autoSubscribeOnConnect:!0,connectTimeout:2e4,ackTimeout:1e4,timestampRequests:!1,timestampParam:"t",authEngine:null,authTokenName:"socketCluster.authToken",binaryType:"arraybuffer",multiplex:!0,pubSubBatchDuration:null,cloneData:!1};for(var l in e)e.hasOwnProperty(l)&&(o[l]=e[l]);if(o.clientMap=a,!1===o.multiplex){o.clientId=i.v4();var c=new n(o);return a[o.clientId]=c,c}return o.clientId=function(e){var t=e.secure?"https://":"http://",r="";if(e.query)if("string"==typeof e.query)r=e.query;else{var n=[],o=e.query;for(var i in o)o.hasOwnProperty(i)&&n.push(i+"="+o[i]);n.length&&(r="?"+n.join("&"))}return t+(e.host?e.host:e.hostname+":"+e.port)+e.path+r}(o),a[o.clientId]?o.autoConnect&&a[o.clientId].connect():a[o.clientId]=new n(o),a[o.clientId]},destroy:function(e){e.destroy()},clients:a}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./scclientsocket":686,"sc-errors":691,uuid:692}],685:[function(e,t,r){var n=e("sc-errors"),o=n.InvalidActionError,i=function(e,t){this.socket=e,this.id=t,this.sent=!1};i.prototype._respond=function(e){if(this.sent)throw new o("Response "+this.id+" has already been sent");this.sent=!0,this.socket.send(this.socket.encode(e))},i.prototype.end=function(e){if(this.id){var t={rid:this.id};void 0!==e&&(t.data=e),this._respond(t)}},i.prototype.error=function(e,t){if(this.id){var r=n.dehydrateError(e),o={rid:this.id,error:r};void 0!==t&&(o.data=t),this._respond(o)}},i.prototype.callback=function(e,t){e?this.error(e,t):this.end(t)},t.exports.Response=i},{"sc-errors":691}],686:[function(e,t,r){(function(r){(function(){var n=e("component-emitter"),o=e("sc-channel").SCChannel,i=(e("./response").Response,e("./auth").AuthEngine),s=e("sc-formatter"),a=e("./sctransport").SCTransport,u=e("querystring"),l=e("linked-list"),c=e("buffer/").Buffer,d=e("clone"),f=e("sc-errors"),p=f.InvalidArgumentsError,h=f.InvalidMessageError,_=f.InvalidActionError,E=f.SocketProtocolError,g=f.TimeoutError,m=f.BadConnectionError,y="undefined"!=typeof window,S=function(e){var t=this;n.call(this),this.id=null,this.state=this.CLOSED,this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null,this.pendingReconnect=!1,this.pendingReconnectTimeout=null,this.preparingPendingSubscriptions=!1,this.clientId=e.clientId,this.connectTimeout=e.connectTimeout,this.ackTimeout=e.ackTimeout,this.channelPrefix=e.channelPrefix||null,this.disconnectOnUnload=null==e.disconnectOnUnload||e.disconnectOnUnload,this.authTokenName=e.authTokenName,this.pingTimeout=this.ackTimeout,this.pingTimeoutDisabled=!!e.pingTimeoutDisabled,this.active=!0,this._clientMap=e.clientMap||{};var o=Math.pow(2,31)-1,a=function(e){if(t[e]>o)throw new p("The "+e+" value provided exceeded the maximum amount allowed")};if(a("connectTimeout"),a("ackTimeout"),this._localEvents={connect:1,connectAbort:1,close:1,disconnect:1,message:1,error:1,raw:1,kickOut:1,subscribe:1,unsubscribe:1,subscribeStateChange:1,authStateChange:1,authenticate:1,deauthenticate:1,removeAuthToken:1,subscribeRequest:1},this.connectAttempts=0,this._emitBuffer=new l,this.channels={},this.options=e,this._cid=1,this.options.callIdGenerator=function(){return t._cid++},this.options.autoReconnect){null==this.options.autoReconnectOptions&&(this.options.autoReconnectOptions={});var c=this.options.autoReconnectOptions;null==c.initialDelay&&(c.initialDelay=1e4),null==c.randomness&&(c.randomness=1e4),null==c.multiplier&&(c.multiplier=1.5),null==c.maxDelay&&(c.maxDelay=6e4)}if(null==this.options.subscriptionRetryOptions&&(this.options.subscriptionRetryOptions={}),this.options.authEngine?this.auth=this.options.authEngine:this.auth=new i,this.options.codecEngine?this.codec=this.options.codecEngine:this.codec=s,this.options.protocol){var d=new p('The "protocol" option does not affect socketcluster-client. If you want to utilize SSL/TLS - use "secure" option instead');this._onSCError(d)}this.options.path=this.options.path.replace(/\/$/,"")+"/",this.options.query=e.query||{},"string"==typeof this.options.query&&(this.options.query=u.parse(this.options.query)),this._channelEmitter=new n,this._unloadHandler=function(){t.disconnect()},y&&this.disconnectOnUnload&&r.addEventListener&&r.addEventListener("beforeunload",this._unloadHandler,!1),this._clientMap[this.clientId]=this,this.options.autoConnect&&this.connect()};S.prototype=Object.create(n.prototype),S.CONNECTING=S.prototype.CONNECTING=a.prototype.CONNECTING,S.OPEN=S.prototype.OPEN=a.prototype.OPEN,S.CLOSED=S.prototype.CLOSED=a.prototype.CLOSED,S.AUTHENTICATED=S.prototype.AUTHENTICATED="authenticated",S.UNAUTHENTICATED=S.prototype.UNAUTHENTICATED="unauthenticated",S.PENDING=S.prototype.PENDING="pending",S.ignoreStatuses=f.socketProtocolIgnoreStatuses,S.errorStatuses=f.socketProtocolErrorStatuses,S.prototype._privateEventHandlerMap={"#publish":function(e){var t=this._undecorateChannelName(e.channel);this.isSubscribed(t,!0)&&this._channelEmitter.emit(t,e.data)},"#kickOut":function(e){var t=this._undecorateChannelName(e.channel),r=this.channels[t];r&&(n.prototype.emit.call(this,"kickOut",e.message,t),r.emit("kickOut",e.message,t),this._triggerChannelUnsubscribe(r))},"#setAuthToken":function(e,t){var r=this;if(e){this.auth.saveToken(this.authTokenName,e.token,{},(function(n){n?(t.error(n),r._onSCError(n)):(r._changeToAuthenticatedState(e.token),t.end())}))}else t.error(new h("No token data provided by #setAuthToken event"))},"#removeAuthToken":function(e,t){var r=this;this.auth.removeToken(this.authTokenName,(function(e,o){e?(t.error(e),r._onSCError(e)):(n.prototype.emit.call(r,"removeAuthToken",o),r._changeToUnauthenticatedStateAndClearTokens(),t.end())}))},"#disconnect":function(e){this.transport.close(e.code,e.data)}},S.prototype.getState=function(){return this.state},S.prototype.getBytesReceived=function(){return this.transport.getBytesReceived()},S.prototype.deauthenticate=function(e){var t=this;this.auth.removeToken(this.authTokenName,(function(r,o){r?t._onSCError(r):(n.prototype.emit.call(t,"removeAuthToken",o),t.state!==t.CLOSED&&t.emit("#removeAuthToken"),t._changeToUnauthenticatedStateAndClearTokens()),e&&e(r)}))},S.prototype.connect=S.prototype.open=function(){var e=this;if(this.active)this.state===this.CLOSED&&(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this.state=this.CONNECTING,n.prototype.emit.call(this,"connecting"),this.transport&&this.transport.off(),this.transport=new a(this.auth,this.codec,this.options),this.transport.on("open",(function(t){e.state=e.OPEN,e._onSCOpen(t)})),this.transport.on("error",(function(t){e._onSCError(t)})),this.transport.on("close",(function(t,r){e.state=e.CLOSED,e._onSCClose(t,r)})),this.transport.on("openAbort",(function(t,r){e.state=e.CLOSED,e._onSCClose(t,r,!0)})),this.transport.on("event",(function(t,r,n){e._onSCEvent(t,r,n)})));else{var t=new _("Cannot connect a destroyed client");this._onSCError(t)}},S.prototype.reconnect=function(e,t){this.disconnect(e,t),this.connect()},S.prototype.disconnect=function(e,t){if("number"!=typeof(e=e||1e3))throw new p("If specified, the code argument must be a number");this.state===this.OPEN||this.state===this.CONNECTING?this.transport.close(e,t):(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef))},S.prototype.destroy=function(e,t){y&&r.removeEventListener&&r.removeEventListener("beforeunload",this._unloadHandler,!1),this.active=!1,this.disconnect(e,t),delete this._clientMap[this.clientId]},S.prototype._changeToUnauthenticatedStateAndClearTokens=function(){if(this.authState!==this.UNAUTHENTICATED){var e=this.authState,t=this.signedAuthToken;this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null;var r={oldState:e,newState:this.authState};n.prototype.emit.call(this,"authStateChange",r),n.prototype.emit.call(this,"deauthenticate",t)}},S.prototype._changeToAuthenticatedState=function(e){if(this.signedAuthToken=e,this.authToken=this._extractAuthTokenData(e),this.authState!==this.AUTHENTICATED){var t=this.authState;this.authState=this.AUTHENTICATED;var r={oldState:t,newState:this.authState,signedAuthToken:e,authToken:this.authToken};this.preparingPendingSubscriptions||this.processPendingSubscriptions(),n.prototype.emit.call(this,"authStateChange",r)}n.prototype.emit.call(this,"authenticate",e)},S.prototype.decodeBase64=function(e){return c.from(e,"base64").toString("utf8")},S.prototype.encodeBase64=function(e){return c.from(e,"utf8").toString("base64")},S.prototype._extractAuthTokenData=function(e){var t=(e||"").split(".")[1];if(null!=t){var r=t;try{return r=this.decodeBase64(r),JSON.parse(r)}catch(e){return r}}return null},S.prototype.getAuthToken=function(){return this.authToken},S.prototype.getSignedAuthToken=function(){return this.signedAuthToken},S.prototype.authenticate=function(e,t){var r=this;this.emit("#authenticate",e,(function(n,o){o&&null!=o.isAuthenticated?o.authError&&(o.authError=f.hydrateError(o.authError)):o={isAuthenticated:r.authState,authError:null},n?("BadConnectionError"!==n.name&&"TimeoutError"!==n.name&&r._changeToUnauthenticatedStateAndClearTokens(),t&&t(n,o)):r.auth.saveToken(r.authTokenName,e,{},(function(n){n&&r._onSCError(n),o.isAuthenticated?r._changeToAuthenticatedState(e):r._changeToUnauthenticatedStateAndClearTokens(),t&&t(n,o)}))}))},S.prototype._tryReconnect=function(e){var t,r=this,n=this.connectAttempts++,o=this.options.autoReconnectOptions;if(null==e||n>0){var i=Math.round(o.initialDelay+(o.randomness||0)*Math.random());t=Math.round(i*Math.pow(o.multiplier,n))}else t=e;t>o.maxDelay&&(t=o.maxDelay),clearTimeout(this._reconnectTimeoutRef),this.pendingReconnect=!0,this.pendingReconnectTimeout=t,this._reconnectTimeoutRef=setTimeout((function(){r.connect()}),t)},S.prototype._onSCOpen=function(e){var t=this;this.preparingPendingSubscriptions=!0,e?(this.id=e.id,this.pingTimeout=e.pingTimeout,this.transport.pingTimeout=this.pingTimeout,e.isAuthenticated?this._changeToAuthenticatedState(e.authToken):this._changeToUnauthenticatedStateAndClearTokens()):this._changeToUnauthenticatedStateAndClearTokens(),this.connectAttempts=0,this.options.autoSubscribeOnConnect&&this.processPendingSubscriptions(),n.prototype.emit.call(this,"connect",e,(function(){t.processPendingSubscriptions()})),this.state===this.OPEN&&this._flushEmitBuffer()},S.prototype._onSCError=function(e){var t=this;setTimeout((function(){if(t.listeners("error").length<1)throw e;n.prototype.emit.call(t,"error",e)}),0)},S.prototype._suspendSubscriptions=function(){var e,t;for(var r in this.channels)this.channels.hasOwnProperty(r)&&(t=(e=this.channels[r]).state===e.SUBSCRIBED||e.state===e.PENDING?e.PENDING:e.UNSUBSCRIBED,this._triggerChannelUnsubscribe(e,t))},S.prototype._abortAllPendingEventsDueToBadConnection=function(e){for(var t,r=this._emitBuffer.head;r;){t=r.next;var n=r.data;clearTimeout(n.timeout),delete n.timeout,r.detach(),r=t;var o=n.callback;if(o){delete n.callback;var i="Event '"+n.event+"' was aborted due to a bad connection",s=new m(i,e);o.call(n,s,n)}n.cid&&this.transport.cancelPendingResponse(n.cid)}},S.prototype._onSCClose=function(e,t,r){var o=this;if(this.id=null,this.transport&&this.transport.off(),this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this._suspendSubscriptions(),this._abortAllPendingEventsDueToBadConnection(r?"connectAbort":"disconnect"),this.options.autoReconnect&&(4e3===e||4001===e||1005===e?this._tryReconnect(0):1e3!==e&&e<4500&&this._tryReconnect()),r?n.prototype.emit.call(o,"connectAbort",e,t):n.prototype.emit.call(o,"disconnect",e,t),n.prototype.emit.call(o,"close",e,t),!S.ignoreStatuses[e]){var i;i=t?"Socket connection closed with status code "+e+" and reason: "+t:"Socket connection closed with status code "+e;var s=new E(S.errorStatuses[e]||i,e);this._onSCError(s)}},S.prototype._onSCEvent=function(e,t,r){var o=this._privateEventHandlerMap[e];o?o.call(this,t,r):n.prototype.emit.call(this,e,t,(function(){r&&r.callback.apply(r,arguments)}))},S.prototype.decode=function(e){return this.transport.decode(e)},S.prototype.encode=function(e){return this.transport.encode(e)},S.prototype._flushEmitBuffer=function(){for(var e,t=this._emitBuffer.head;t;){e=t.next;var r=t.data;t.detach(),this.transport.emitObject(r),t=e}},S.prototype._handleEventAckTimeout=function(e,t){t&&t.detach(),delete e.timeout;var r=e.callback;if(r){delete e.callback;var n=new g("Event response for '"+e.event+"' timed out");r.call(e,n,e)}e.cid&&this.transport.cancelPendingResponse(e.cid)},S.prototype._emit=function(e,t,r){var n=this;this.state===this.CLOSED&&this.connect();var o={event:e,callback:r},i=new l.Item;this.options.cloneData?o.data=d(t):o.data=t,i.data=o,o.timeout=setTimeout((function(){n._handleEventAckTimeout(o,i)}),this.ackTimeout),this._emitBuffer.append(i),this.state===this.OPEN&&this._flushEmitBuffer()},S.prototype.send=function(e){this.transport.send(e)},S.prototype.emit=function(e,t,r){if(null==this._localEvents[e])this._emit(e,t,r);else if("error"===e)n.prototype.emit.call(this,e,t);else{var o=new _('The "'+e+'" event is reserved and cannot be emitted on a client socket');this._onSCError(o)}},S.prototype.publish=function(e,t,r){var n={channel:this._decorateChannelName(e),data:t};this.emit("#publish",n,r)},S.prototype._triggerChannelSubscribe=function(e,t){var r=e.name;if(e.state!==e.SUBSCRIBED){var o=e.state;e.state=e.SUBSCRIBED;var i={channel:r,oldState:o,newState:e.state,subscriptionOptions:t};e.emit("subscribeStateChange",i),e.emit("subscribe",r,t),n.prototype.emit.call(this,"subscribeStateChange",i),n.prototype.emit.call(this,"subscribe",r,t)}},S.prototype._triggerChannelSubscribeFail=function(e,t,r){var o=t.name,i=!t.waitForAuth||this.authState===this.AUTHENTICATED;t.state!==t.UNSUBSCRIBED&&i&&(t.state=t.UNSUBSCRIBED,t.emit("subscribeFail",e,o,r),n.prototype.emit.call(this,"subscribeFail",e,o,r))},S.prototype._cancelPendingSubscribeCallback=function(e){null!=e._pendingSubscriptionCid&&(this.transport.cancelPendingResponse(e._pendingSubscriptionCid),delete e._pendingSubscriptionCid)},S.prototype._decorateChannelName=function(e){return this.channelPrefix&&(e=this.channelPrefix+e),e},S.prototype._undecorateChannelName=function(e){return this.channelPrefix&&0===e.indexOf(this.channelPrefix)?e.replace(this.channelPrefix,""):e},S.prototype._trySubscribe=function(e){var t=this,r=!e.waitForAuth||this.authState===this.AUTHENTICATED;if(this.state===this.OPEN&&!this.preparingPendingSubscriptions&&null==e._pendingSubscriptionCid&&r){var o={noTimeout:!0},i={channel:this._decorateChannelName(e.name)};e.waitForAuth&&(o.waitForAuth=!0,i.waitForAuth=o.waitForAuth),e.data&&(i.data=e.data),e.batch&&(o.batch=!0,i.batch=!0),e._pendingSubscriptionCid=this.transport.emit("#subscribe",i,o,(function(r){delete e._pendingSubscriptionCid,r?t._triggerChannelSubscribeFail(r,e,i):t._triggerChannelSubscribe(e,i)})),n.prototype.emit.call(this,"subscribeRequest",e.name,i)}},S.prototype.subscribe=function(e,t){var r=this.channels[e];return r?t&&r.setOptions(t):(r=new o(e,this,t),this.channels[e]=r),r.state===r.UNSUBSCRIBED&&(r.state=r.PENDING,this._trySubscribe(r)),r},S.prototype._triggerChannelUnsubscribe=function(e,t){var r=e.name,o=e.state;if(e.state=t||e.UNSUBSCRIBED,this._cancelPendingSubscribeCallback(e),o===e.SUBSCRIBED){var i={channel:r,oldState:o,newState:e.state};e.emit("subscribeStateChange",i),e.emit("unsubscribe",r),n.prototype.emit.call(this,"subscribeStateChange",i),n.prototype.emit.call(this,"unsubscribe",r)}},S.prototype._tryUnsubscribe=function(e){if(this.state===this.OPEN){var t={noTimeout:!0};e.batch&&(t.batch=!0),this._cancelPendingSubscribeCallback(e);var r=this._decorateChannelName(e.name);this.transport.emit("#unsubscribe",r,t)}},S.prototype.unsubscribe=function(e){var t=this.channels[e];t&&t.state!==t.UNSUBSCRIBED&&(this._triggerChannelUnsubscribe(t),this._tryUnsubscribe(t))},S.prototype.channel=function(e,t){var r=this.channels[e];return r||(r=new o(e,this,t),this.channels[e]=r),r},S.prototype.destroyChannel=function(e){var t=this.channels[e];t&&(t.unwatch(),t.unsubscribe(),delete this.channels[e])},S.prototype.subscriptions=function(e){var t,r=[];for(var n in this.channels)this.channels.hasOwnProperty(n)&&(t=this.channels[n],(e?t&&(t.state===t.SUBSCRIBED||t.state===t.PENDING):t&&t.state===t.SUBSCRIBED)&&r.push(n));return r},S.prototype.isSubscribed=function(e,t){var r=this.channels[e];return t?!!r&&(r.state===r.SUBSCRIBED||r.state===r.PENDING):!!r&&r.state===r.SUBSCRIBED},S.prototype.processPendingSubscriptions=function(){var e=this;this.preparingPendingSubscriptions=!1;var t=[];for(var r in this.channels)if(this.channels.hasOwnProperty(r)){var n=this.channels[r];n.state===n.PENDING&&t.push(n)}t.sort((function(e,t){var r=e.priority||0,n=t.priority||0;return r>n?-1:r<n?1:0})),t.forEach((function(t){e._trySubscribe(t)}))},S.prototype.watch=function(e,t){if("function"!=typeof t)throw new p("No handler function was provided");this._channelEmitter.on(e,t)},S.prototype.unwatch=function(e,t){t?this._channelEmitter.removeListener(e,t):this._channelEmitter.removeAllListeners(e)},S.prototype.watchers=function(e){return this._channelEmitter.listeners(e)},t.exports=S}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./auth":683,"./response":685,"./sctransport":687,"buffer/":254,clone:689,"component-emitter":256,"linked-list":498,querystring:656,"sc-channel":680,"sc-errors":691,"sc-formatter":681}],687:[function(e,t,r){(function(r){(function(){var n,o,i=e("component-emitter"),s=e("./response").Response,a=e("querystring");r.WebSocket?(n=r.WebSocket,o=function(e,t){return new n(e)}):(n=e("ws"),o=function(e,t){return new n(e,null,t)});var u=e("sc-errors"),l=u.TimeoutError,c=u.BadConnectionError,d=function(e,t,r){var n=this;this.state=this.CLOSED,this.auth=e,this.codec=t,this.options=r,this.connectTimeout=r.connectTimeout,this.pingTimeout=r.ackTimeout,this.pingTimeoutDisabled=!!r.pingTimeoutDisabled,this.callIdGenerator=r.callIdGenerator,this.authTokenName=r.authTokenName,this._pingTimeoutTicker=null,this._callbackMap={},this._batchSendList=[],this.state=this.CONNECTING;var i=this.uri(),s=o(i,this.options);s.binaryType=this.options.binaryType,this.socket=s,s.onopen=function(){n._onOpen()},s.onclose=function(e){var t;t=null==e.code?1005:e.code,n._onClose(t,e.reason)},s.onmessage=function(e,t){n._onMessage(e.data)},s.onerror=function(e){n.state===n.CONNECTING&&n._onClose(1006)},this._connectTimeoutRef=setTimeout((function(){n._onClose(4007),n.socket.close(4007)}),this.connectTimeout)};d.prototype=Object.create(i.prototype),d.CONNECTING=d.prototype.CONNECTING="connecting",d.OPEN=d.prototype.OPEN="open",d.CLOSED=d.prototype.CLOSED="closed",d.prototype.uri=function(){var e,t=this.options.query||{},r=this.options.secure?"wss":"ws";if(this.options.timestampRequests&&(t[this.options.timestampParam]=(new Date).getTime()),(t=a.encode(t)).length&&(t="?"+t),this.options.host)e=this.options.host;else{var n="";this.options.port&&("wss"===r&&443!==this.options.port||"ws"===r&&80!==this.options.port)&&(n=":"+this.options.port),e=this.options.hostname+n}return r+"://"+e+this.options.path+t},d.prototype._onOpen=function(){var e=this;clearTimeout(this._connectTimeoutRef),this._resetPingTimeout(),this._handshake((function(t,r){var n;t?(n=r&&r.code?r.code:4003,e._onError(t),e._onClose(n,t.toString()),e.socket.close(n)):(e.state=e.OPEN,i.prototype.emit.call(e,"open",r),e._resetPingTimeout())}))},d.prototype._handshake=function(e){var t=this;this.auth.loadToken(this.authTokenName,(function(r,n){if(r)e(r);else{t.emit("#handshake",{authToken:n},{force:!0},(function(t,r){r&&(r.authToken=n,r.authError&&(r.authError=u.hydrateError(r.authError))),e(t,r)}))}}))},d.prototype._abortAllPendingEventsDueToBadConnection=function(e){for(var t in this._callbackMap)if(this._callbackMap.hasOwnProperty(t)){var r=this._callbackMap[t];delete this._callbackMap[t],clearTimeout(r.timeout),delete r.timeout;var n="Event '"+r.event+"' was aborted due to a bad connection",o=new c(n,e),i=r.callback;delete r.callback,i.call(r,o,r)}},d.prototype._onClose=function(e,t){delete this.socket.onopen,delete this.socket.onclose,delete this.socket.onmessage,delete this.socket.onerror,clearTimeout(this._connectTimeoutRef),clearTimeout(this._pingTimeoutTicker),clearTimeout(this._batchTimeout),this.state===this.OPEN?(this.state=this.CLOSED,i.prototype.emit.call(this,"close",e,t),this._abortAllPendingEventsDueToBadConnection("disconnect")):this.state===this.CONNECTING&&(this.state=this.CLOSED,i.prototype.emit.call(this,"openAbort",e,t),this._abortAllPendingEventsDueToBadConnection("connectAbort"))},d.prototype._handleEventObject=function(e,t){if(e&&null!=e.event){var r=new s(this,e.cid);i.prototype.emit.call(this,"event",e.event,e.data,r)}else if(e&&null!=e.rid){var n=this._callbackMap[e.rid];if(n&&(clearTimeout(n.timeout),delete n.timeout,delete this._callbackMap[e.rid],n.callback)){var o=u.hydrateError(e.error);n.callback(o,e.data)}}else i.prototype.emit.call(this,"event","raw",t)},d.prototype._onMessage=function(e){i.prototype.emit.call(this,"event","message",e);var t=this.decode(e);if("#1"===t)this._resetPingTimeout(),this.socket.readyState===this.socket.OPEN&&this.sendObject("#2");else if(Array.isArray(t))for(var r=t.length,n=0;n<r;n++)this._handleEventObject(t[n],e);else this._handleEventObject(t,e)},d.prototype._onError=function(e){i.prototype.emit.call(this,"error",e)},d.prototype._resetPingTimeout=function(){if(!this.pingTimeoutDisabled){var e=this;(new Date).getTime();clearTimeout(this._pingTimeoutTicker),this._pingTimeoutTicker=setTimeout((function(){e._onClose(4e3),e.socket.close(4e3)}),this.pingTimeout)}},d.prototype.getBytesReceived=function(){return this.socket.bytesReceived},d.prototype.close=function(e,t){if(e=e||1e3,this.state===this.OPEN){var r={code:e,data:t};this.emit("#disconnect",r),this._onClose(e,t),this.socket.close(e)}else this.state===this.CONNECTING&&(this._onClose(e,t),this.socket.close(e))},d.prototype.emitObject=function(e,t){var r={event:e.event,data:e.data};return e.callback&&(r.cid=e.cid=this.callIdGenerator(),this._callbackMap[e.cid]=e),this.sendObject(r,t),e.cid||null},d.prototype._handleEventAckTimeout=function(e){e.cid&&delete this._callbackMap[e.cid],delete e.timeout;var t=e.callback;if(t){delete e.callback;var r=new l("Event response for '"+e.event+"' timed out");t.call(e,r,e)}},d.prototype.emit=function(e,t,r,n){var o,i,s=this;n?(i=r,o=n):r instanceof Function?(i={},o=r):i=r;var a={event:e,data:t,callback:o};o&&!i.noTimeout&&(a.timeout=setTimeout((function(){s._handleEventAckTimeout(a)}),this.options.ackTimeout));var u=null;return(this.state===this.OPEN||i.force)&&(u=this.emitObject(a,i)),u},d.prototype.cancelPendingResponse=function(e){delete this._callbackMap[e]},d.prototype.decode=function(e){return this.codec.decode(e)},d.prototype.encode=function(e){return this.codec.encode(e)},d.prototype.send=function(e){this.socket.readyState!==this.socket.OPEN?this._onClose(1005):this.socket.send(e)},d.prototype.serializeObject=function(e){var t,r;try{t=this.encode(e)}catch(e){r=e,this._onError(r)}return r?null:t},d.prototype.sendObjectBatch=function(e){var t=this;this._batchSendList.push(e),this._batchTimeout||(this._batchTimeout=setTimeout((function(){if(delete t._batchTimeout,t._batchSendList.length){var e=t.serializeObject(t._batchSendList);null!=e&&t.send(e),t._batchSendList=[]}}),this.options.pubSubBatchDuration||0))},d.prototype.sendObjectSingle=function(e){var t=this.serializeObject(e);null!=t&&this.send(t)},d.prototype.sendObject=function(e,t){t&&t.batch?this.sendObjectBatch(e):this.sendObjectSingle(e)},t.exports.SCTransport=d}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./response":685,"component-emitter":256,querystring:656,"sc-errors":691,ws:688}],688:[function(e,t,r){var n,o=(n="undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof window&&window||function(){return this}()).WebSocket||n.MozWebSocket;function i(e,t,r){return t?new o(e,t):new o(e)}o&&(i.prototype=o.prototype),t.exports=o?i:null},{}],689:[function(e,t,r){(function(e){(function(){var r=function(){"use strict";function t(e,t){return null!=t&&e instanceof t}var r,n,o;try{r=Map}catch(e){r=function(){}}try{n=Set}catch(e){n=function(){}}try{o=Promise}catch(e){o=function(){}}function i(s,u,l,c,d){"object"==typeof u&&(l=u.depth,c=u.prototype,d=u.includeNonEnumerable,u=u.circular);var f=[],p=[],h=void 0!==e;return void 0===u&&(u=!0),void 0===l&&(l=1/0),function s(l,_){if(null===l)return null;if(0===_)return l;var E,g;if("object"!=typeof l)return l;if(t(l,r))E=new r;else if(t(l,n))E=new n;else if(t(l,o))E=new o((function(e,t){l.then((function(t){e(s(t,_-1))}),(function(e){t(s(e,_-1))}))}));else if(i.__isArray(l))E=[];else if(i.__isRegExp(l))E=new RegExp(l.source,a(l)),l.lastIndex&&(E.lastIndex=l.lastIndex);else if(i.__isDate(l))E=new Date(l.getTime());else{if(h&&e.isBuffer(l))return E=new e(l.length),l.copy(E),E;t(l,Error)?E=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),E=Object.create(g)):(E=Object.create(c),g=c)}if(u){var m=f.indexOf(l);if(-1!=m)return p[m];f.push(l),p.push(E)}for(var y in t(l,r)&&l.forEach((function(e,t){var r=s(t,_-1),n=s(e,_-1);E.set(r,n)})),t(l,n)&&l.forEach((function(e){var t=s(e,_-1);E.add(t)})),l){var S;g&&(S=Object.getOwnPropertyDescriptor(g,y)),S&&null==S.set||(E[y]=s(l[y],_-1))}if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(l);for(y=0;y<T.length;y++){var A=T[y];(!(O=Object.getOwnPropertyDescriptor(l,A))||O.enumerable||d)&&(E[A]=s(l[A],_-1),O.enumerable||Object.defineProperty(E,A,{enumerable:!1}))}}if(d){var b=Object.getOwnPropertyNames(l);for(y=0;y<b.length;y++){var O,I=b[y];(O=Object.getOwnPropertyDescriptor(l,I))&&O.enumerable||(E[I]=s(l[I],_-1),Object.defineProperty(E,I,{enumerable:!1}))}}return E}(s,l)}function s(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=s,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===s(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===s(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===s(e)},i.__getRegExpFlags=a,i}();"object"==typeof t&&t.exports&&(t.exports=r)}).call(this)}).call(this,e("buffer").Buffer)},{buffer:251}],690:[function(e,t,r){t.exports=function(e){var t=[],r=[];return function e(n,o){var i,s,a;if(!("object"!=typeof n||null===n||n instanceof Boolean||n instanceof Date||n instanceof Number||n instanceof RegExp||n instanceof String)){for(i=0;i<t.length;i+=1)if(t[i]===n)return{$ref:r[i]};if(t.push(n),r.push(o),"[object Array]"===Object.prototype.toString.apply(n))for(a=[],i=0;i<n.length;i+=1)a[i]=e(n[i],o+"["+i+"]");else for(s in a={},n)Object.prototype.hasOwnProperty.call(n,s)&&(a[s]=e(n[s],o+"["+JSON.stringify(s)+"]"));return a}return n}(e,"$")}},{}],691:[function(e,t,r){const n=e("./decycle"),o=function(){return!this}();function i(e,t){this.name="AuthTokenExpiredError",this.message=e,this.expiry=t,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function s(e){this.name="AuthTokenInvalidError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function a(e,t){this.name="AuthTokenNotBeforeError",this.message=e,this.date=t,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function u(e){this.name="AuthTokenError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function l(e){this.name="AuthError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function c(e,t){this.name="SilentMiddlewareBlockedError",this.message=e,this.type=t,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function d(e){this.name="InvalidActionError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function f(e){this.name="InvalidArgumentsError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function p(e){this.name="InvalidOptionsError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function h(e){this.name="InvalidMessageError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function _(e,t){this.name="SocketProtocolError",this.message=e,this.code=t,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function E(e){this.name="ServerProtocolError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function g(e){this.name="HTTPServerError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function m(e){this.name="ResourceLimitError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function y(e){this.name="TimeoutError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function S(e,t){this.name="BadConnectionError",this.message=e,this.type=t,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function T(e){this.name="BrokerError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function A(e,t){this.name="ProcessExitError",this.message=e,this.code=t,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function b(e){this.name="UnknownError",this.message=e,Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}i.prototype=Object.create(Error.prototype),s.prototype=Object.create(Error.prototype),a.prototype=Object.create(Error.prototype),u.prototype=Object.create(Error.prototype),l.prototype=Object.create(Error.prototype),c.prototype=Object.create(Error.prototype),d.prototype=Object.create(Error.prototype),f.prototype=Object.create(Error.prototype),p.prototype=Object.create(Error.prototype),h.prototype=Object.create(Error.prototype),_.prototype=Object.create(Error.prototype),E.prototype=Object.create(Error.prototype),g.prototype=Object.create(Error.prototype),m.prototype=Object.create(Error.prototype),y.prototype=Object.create(Error.prototype),S.prototype=Object.create(Error.prototype),T.prototype=Object.create(Error.prototype),A.prototype=Object.create(Error.prototype),b.prototype=Object.create(Error.prototype),t.exports={AuthTokenExpiredError:i,AuthTokenInvalidError:s,AuthTokenNotBeforeError:a,AuthTokenError:u,AuthError:l,SilentMiddlewareBlockedError:c,InvalidActionError:d,InvalidArgumentsError:f,InvalidOptionsError:p,InvalidMessageError:h,SocketProtocolError:_,ServerProtocolError:E,HTTPServerError:g,ResourceLimitError:m,TimeoutError:y,BadConnectionError:S,BrokerError:T,ProcessExitError:A,UnknownError:b},t.exports.socketProtocolErrorStatuses={1001:"Socket was disconnected",1002:"A WebSocket protocol error was encountered",1003:"Server terminated socket because it received invalid data",1005:"Socket closed without status code",1006:"Socket hung up",1007:"Message format was incorrect",1008:"Encountered a policy violation",1009:"Message was too big to process",1010:"Client ended the connection because the server did not comply with extension requirements",1011:"Server encountered an unexpected fatal condition",4e3:"Server ping timed out",4001:"Client pong timed out",4002:"Server failed to sign auth token",4003:"Failed to complete handshake",4004:"Client failed to save auth token",4005:"Did not receive #handshake from client before timeout",4006:"Failed to bind socket to message broker",4007:"Client connection establishment timed out",4008:"Server rejected handshake from client",4009:"Server received a message before the client handshake"},t.exports.socketProtocolIgnoreStatuses={1e3:"Socket closed normally",1001:"Socket hung up"},t.exports.dehydrateError=function(e){let t;if(e&&"object"==typeof e){t={message:e.message};for(let r of Object.keys(e))t[r]=e[r]}else t="function"==typeof e?"[function "+("string"==typeof e.name?e.name:"anonymous")+"]":e;return n(t)},t.exports.hydrateError=function(e){let t=null;if(null!=e)if("object"==typeof e){t=new Error("string"==typeof e.message?e.message:"Invalid error message format"),"string"==typeof e.name&&(t.name=e.name);for(let r of Object.keys(e))void 0===t[r]&&(t[r]=e[r])}else t=e;return t},t.exports.decycle=n},{"./decycle":690}],692:[function(e,t,r){var n=e("./v1"),o=e("./v4"),i=o;i.v1=n,i.v4=o,t.exports=i},{"./v1":695,"./v4":696}],693:[function(e,t,r){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,o=n;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}},{}],694:[function(e,t,r){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);t.exports=function(){return n(o),o}}else{var i=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},{}],695:[function(e,t,r){var n,o,i=e("./lib/rng"),s=e("./lib/bytesToUuid"),a=0,u=0;t.exports=function(e,t,r){var l=t&&r||0,c=t||[],d=(e=e||{}).node||n,f=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==f){var p=i();null==d&&(d=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=o=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),_=void 0!==e.nsecs?e.nsecs:u+1,E=h-a+(_-u)/1e4;if(E<0&&void 0===e.clockseq&&(f=f+1&16383),(E<0||h>a)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,u=_,o=f;var g=(1e4*(268435455&(h+=122192928e5))+_)%4294967296;c[l++]=g>>>24&255,c[l++]=g>>>16&255,c[l++]=g>>>8&255,c[l++]=255&g;var m=h/4294967296*1e4&268435455;c[l++]=m>>>8&255,c[l++]=255&m,c[l++]=m>>>24&15|16,c[l++]=m>>>16&255,c[l++]=f>>>8|128,c[l++]=255&f;for(var y=0;y<6;++y)c[l+y]=d[y];return t||s(c)}},{"./lib/bytesToUuid":693,"./lib/rng":694}],696:[function(e,t,r){var n=e("./lib/rng"),o=e("./lib/bytesToUuid");t.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||o(s)}},{"./lib/bytesToUuid":693,"./lib/rng":694}],697:[function(e,t,r){t.exports=o;var n=e("events").EventEmitter;function o(){n.call(this)}e("inherits")(o,n),o.Readable=e("readable-stream/lib/_stream_readable.js"),o.Writable=e("readable-stream/lib/_stream_writable.js"),o.Duplex=e("readable-stream/lib/_stream_duplex.js"),o.Transform=e("readable-stream/lib/_stream_transform.js"),o.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),o.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),o.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),o.Stream=o,o.prototype.pipe=function(e,t){var r=this;function o(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",o),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",o),e.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",l),e.on("error",l),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},{events:252,inherits:491,"readable-stream/lib/_stream_duplex.js":699,"readable-stream/lib/_stream_passthrough.js":700,"readable-stream/lib/_stream_readable.js":701,"readable-stream/lib/_stream_transform.js":702,"readable-stream/lib/_stream_writable.js":703,"readable-stream/lib/internal/streams/end-of-stream.js":707,"readable-stream/lib/internal/streams/pipeline.js":709}],698:[function(e,t,r){arguments[4][470][0].apply(r,arguments)},{dup:470}],699:[function(e,t,r){(function(r){(function(){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=l;var o=e("./_stream_readable"),i=e("./_stream_writable");e("inherits")(l,o);for(var s=n(i.prototype),a=0;a<s.length;a++){var u=s[a];l.prototype[u]||(l.prototype[u]=i.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":701,"./_stream_writable":703,_process:653,inherits:491}],700:[function(e,t,r){arguments[4][472][0].apply(r,arguments)},{"./_stream_transform":702,dup:472,inherits:491}],701:[function(e,t,r){(function(r,n){(function(){"use strict";var o;t.exports=I,I.ReadableState=O;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,u=(void 0!==n?n:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=e("util");l=c&&c.debuglog?c.debuglog("stream"):function(){};var d,f,p,h=e("./internal/streams/buffer_list"),_=e("./internal/streams/destroy"),E=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,m=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,S=g.ERR_METHOD_NOT_IMPLEMENTED,T=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(I,s);var A=_.errorOrDestroy,b=["error","close","destroy","pause","resume"];function O(t,r,n){o=o||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=r instanceof o),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=E(this,t,"readableHighWaterMark",n),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=e("string_decoder/").StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function I(t){if(o=o||e("./_stream_duplex"),!(this instanceof I))return new I(t);var r=this instanceof o;this._readableState=new O(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function v(e,t,r,n,o){l("readableAddChunk",t);var i,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?D(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,w(e)))}(e,s);else if(o||(i=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(s,t)),i)A(e,i);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)s.endEmitted?A(e,new T):N(e,s,t,!0);else if(s.ended)A(e,new y);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?N(e,s,t,!1):L(e,s)):N(e,s,t,!1)}else n||(s.reading=!1,L(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function N(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&D(e)),L(e,t)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),I.prototype.destroy=_.destroy,I.prototype._undestroy=_.undestroy,I.prototype._destroy=function(e,t){t(e)},I.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),v(this,e,t,!1,r)},I.prototype.unshift=function(e){return v(this,e,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(t){d||(d=e("string_decoder/").StringDecoder);var r=new d(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var R=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function D(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(w,e))}function w(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,k(e)}function L(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(l("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function U(e){l("readable nexttick read 0"),e.read(0)}function j(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),k(e),t.flowing&&!t.reading&&e.read(0)}function k(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function F(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(B,t,e))}function B(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function G(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}I.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):D(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&F(this),null;var n,o=t.needReadable;return l("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",o=!0),t.ended||t.reading?l("reading or ended",o=!1):o&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(r,t))),null===(n=e>0?x(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==n&&this.emit("data",n),n},I.prototype._read=function(e){A(this,new S("_read()"))},I.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,l("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:E;function a(t,r){l("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),e.removeListener("close",h),e.removeListener("finish",_),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",E),n.removeListener("data",f),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function u(){l("onend"),e.end()}o.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,k(e))}}(n);e.on("drain",c);var d=!1;function f(t){l("ondata");var r=e.write(t);l("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==G(o.pipes,e))&&!d&&(l("false write response, pause",o.awaitDrain),o.awaitDrain++),n.pause())}function p(t){l("onerror",t),E(),e.removeListener("error",p),0===i(e,"error")&&A(e,t)}function h(){e.removeListener("finish",_),E()}function _(){l("onfinish"),e.removeListener("close",h),E()}function E(){l("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",h),e.once("finish",_),e.emit("pipe",n),o.flowing||(l("pipe resume"),n.resume()),e},I.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=G(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},I.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,l("on readable",o.length,o.reading),o.length?D(this):o.reading||r.nextTick(U,this))),n},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(M,this),n},I.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(M,this),t},I.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(j,e,t))}(this,e)),e.paused=!1,this},I.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(l("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<b.length;i++)e.on(b[i],this.emit.bind(this,b[i]));return this._read=function(t){l("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),I._fromList=x,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(t,r){return void 0===p&&(p=e("./internal/streams/from")),p(I,t,r)})}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":698,"./_stream_duplex":699,"./internal/streams/async_iterator":704,"./internal/streams/buffer_list":705,"./internal/streams/destroy":706,"./internal/streams/from":708,"./internal/streams/state":710,"./internal/streams/stream":711,_process:653,buffer:251,events:252,inherits:491,"string_decoder/":712,util:230}],702:[function(e,t,r){arguments[4][474][0].apply(r,arguments)},{"../errors":698,"./_stream_duplex":699,dup:474,inherits:491}],703:[function(e,t,r){(function(r,n){(function(){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=I,I.WritableState=O;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),u=e("buffer").Buffer,l=(void 0!==n?n:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,d=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,p=e("../errors").codes,h=p.ERR_INVALID_ARG_TYPE,_=p.ERR_METHOD_NOT_IMPLEMENTED,E=p.ERR_MULTIPLE_CALLBACK,g=p.ERR_STREAM_CANNOT_PIPE,m=p.ERR_STREAM_DESTROYED,y=p.ERR_STREAM_NULL_VALUES,S=p.ERR_STREAM_WRITE_AFTER_END,T=p.ERR_UNKNOWN_ENCODING,A=d.errorOrDestroy;function b(){}function O(t,n,s){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=n instanceof i),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,o=n.sync,i=n.writecb;if("function"!=typeof i)throw new E;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,o,i){--t.pendingcb,n?(r.nextTick(i,o),r.nextTick(w,e,t),e._writableState.errorEmitted=!0,A(e,o)):(i(o),e._writableState.errorEmitted=!0,A(e,o),w(e,t))}(e,n,o,t,i);else{var s=C(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||R(e,n),o?r.nextTick(N,e,n,s,i):N(e,n,s,i)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function I(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!c.call(I,this))return new I(t);this._writableState=new O(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function v(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function N(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),w(e,t)}function R(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,v(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,d=r.callback;if(v(e,t,!1,t.objectMode?1:l.length,l,c,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function D(e,t){e._final((function(r){t.pendingcb--,r&&A(e,r),t.prefinished=!0,e.emit("prefinish"),w(e,t)}))}function w(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(D,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return n}e("inherits")(I,a),O.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===I&&(e&&e._writableState instanceof O)}})):c=function(e){return e instanceof this},I.prototype.pipe=function(){A(this,new g)},I.prototype.write=function(e,t,n){var o,i=this._writableState,s=!1,a=!i.objectMode&&(o=e,u.isBuffer(o)||o instanceof l);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=b),i.ending?function(e,t){var n=new S;A(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,o){var i;return null===n?i=new y:"string"==typeof n||t.objectMode||(i=new h("chunk",["string","Buffer"],n)),!i||(A(e,i),r.nextTick(o,i),!1)}(this,i,e,n))&&(i.pendingcb++,s=function(e,t,r,n,o,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r));return t}(t,n,o);n!==s&&(r=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,a,n,o,i);return l}(this,i,a,e,t,n)),s},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||R(this,e))},I.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new T(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),I.prototype._write=function(e,t,r){r(new _("_write()"))},I.prototype._writev=null,I.prototype.end=function(e,t,n){var o=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||function(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,o,n),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),I.prototype.destroy=d.destroy,I.prototype._undestroy=d.undestroy,I.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":698,"./_stream_duplex":699,"./internal/streams/destroy":706,"./internal/streams/state":710,"./internal/streams/stream":711,_process:653,buffer:251,inherits:491,"util-deprecate":720}],704:[function(e,t,r){(function(r){(function(){"use strict";var n;function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function h(e){var t=e[s];if(null!==t){var r=e[f].read();null!==r&&(e[c]=null,e[s]=null,e[a]=null,t(p(r,!1)))}}function _(e){r.nextTick(h,e)}var E=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((o(n={get stream(){return this[f]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[u]?n(e[u]):t(p(void 0,!0))}))}));var n,o=this[c];if(o)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(p(void 0,!0)):t[d](r,n)}),n)}}(o,this));else{var i=this[f].read();if(null!==i)return Promise.resolve(p(i,!1));n=new Promise(this[d])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),E);t.exports=function(e){var t,r=Object.create(g,(o(t={},f,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,d,{value:function(e,t){var n=r[f].read();n?(r[c]=null,r[s]=null,r[a]=null,e(p(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[c]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[c]=null,r[s]=null,r[a]=null,t(e)),void(r[u]=e)}var n=r[s];null!==n&&(r[c]=null,r[s]=null,r[a]=null,n(p(void 0,!0))),r[l]=!0})),e.on("readable",_.bind(null,r)),r}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":707,_process:653}],705:[function(e,t,r){arguments[4][477][0].apply(r,arguments)},{buffer:251,dup:477,util:230}],706:[function(e,t,r){(function(e){(function(){"use strict";function r(e,t){o(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}t.exports={destroy:function(t,i){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(o,this,t)):e.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!i&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):i?(e.nextTick(n,s),i(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:653}],707:[function(e,t,r){arguments[4][479][0].apply(r,arguments)},{"../../../errors":698,dup:479}],708:[function(e,t,r){arguments[4][480][0].apply(r,arguments)},{dup:480}],709:[function(e,t,r){arguments[4][481][0].apply(r,arguments)},{"../../../errors":698,"./end-of-stream":707,dup:481}],710:[function(e,t,r){arguments[4][482][0].apply(r,arguments)},{"../../../errors":698,dup:482}],711:[function(e,t,r){arguments[4][483][0].apply(r,arguments)},{dup:483,events:252}],712:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}r.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=s(t[n]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if(o=s(t[n]),o>=0)return o>0&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if(o=s(t[n]),o>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":679}],713:[function(e,t,r){(function(n){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,i,s=e("./ponyfill.js"),a=(o=s)&&o.__esModule?o:{default:o};i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==t?t:Function("return this")();var u=(0,a.default)(i);r.default=u}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":714}],714:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t,r=e.Symbol;"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable";return t}},{}],715:[function(e,t,r){(function(e){(function(){var r,n,o,i,s,a,u,l,c,d,f,p,h,_,E,g,m,y,S,T,A,b,O,I,v,N,R,C,D,w,L;!function(r){var n="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:{};function o(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}"function"==typeof define&&define.amd?define("tslib",["exports"],(function(e){r(o(n,o(e)))})):"object"==typeof t&&"object"==typeof t.exports?r(o(n,o(t.exports))):r(o(n))}((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};r=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)},n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},i=function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},s=function(e,t){return function(r,n){t(r,n,e)}},a=function(e,t,r,n,o,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,u=n.kind,l="getter"===u?"get":"setter"===u?"set":"value",c=!t&&e?n.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),f=!1,p=r.length-1;p>=0;p--){var h={};for(var _ in n)h[_]="access"===_?{}:n[_];for(var _ in n.access)h.access[_]=n.access[_];h.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var E=(0,r[p])("accessor"===u?{get:d.get,set:d.set}:d[l],h);if("accessor"===u){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(a=s(E.get))&&(d.get=a),(a=s(E.set))&&(d.set=a),(a=s(E.init))&&o.unshift(a)}else(a=s(E))&&("field"===u?o.unshift(a):d[l]=a)}c&&Object.defineProperty(c,n.name,d),f=!0},u=function(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0},l=function(e){return"symbol"==typeof e?e:"".concat(e)},c=function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},h=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||D(t,e,r)},D=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},_=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},E=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},g=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(E(arguments[t]));return e},m=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n},y=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},S=function(e){return this instanceof S?(this.v=e,this):new S(e)},T=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof S?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function u(e){a("next",e)}function l(e){a("throw",e)}function c(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}},A=function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:S(e[n](t)),done:!1}:o?o(t):t}:o}},b=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=_(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}},O=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var P=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&D(t,e,r);return P(t,e),t},v=function(e){return e&&e.__esModule?e:{default:e}},N=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},R=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},C=function(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)},w=function(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t};var M="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};L=function(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var n=e.stack.pop();try{var o=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(o).then(r,(function(e){return t(e),r()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()},e("__extends",r),e("__assign",n),e("__rest",o),e("__decorate",i),e("__param",s),e("__esDecorate",a),e("__runInitializers",u),e("__propKey",l),e("__setFunctionName",c),e("__metadata",d),e("__awaiter",f),e("__generator",p),e("__exportStar",h),e("__createBinding",D),e("__values",_),e("__read",E),e("__spread",g),e("__spreadArrays",m),e("__spreadArray",y),e("__await",S),e("__asyncGenerator",T),e("__asyncDelegator",A),e("__asyncValues",b),e("__makeTemplateObject",O),e("__importStar",I),e("__importDefault",v),e("__classPrivateFieldGet",N),e("__classPrivateFieldSet",R),e("__classPrivateFieldIn",C),e("__addDisposableResource",w),e("__disposeResources",L)}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],716:[function(e,t,r){
/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(e,r){"use strict";"object"==typeof t&&t.exports?t.exports=r():"function"==typeof define&&define.amd?define(r):e.IPv6=r(e)}(this,(function(e){"use strict";var t=e&&e.IPv6;return{best:function(e){var t,r,n=e.toLowerCase().split(":"),o=n.length,i=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[o-1]&&""===n[o-2]&&n.pop(),-1!==n[(o=n.length)-1].indexOf(".")&&(i=7),t=0;t<o&&""!==n[t];t++);if(t<i)for(n.splice(t,1,"0000");n.length<i;)n.splice(t,0,"0000");for(var s=0;s<i;s++){r=n[s].split("");for(var a=0;a<3&&("0"===r[0]&&r.length>1);a++)r.splice(0,1);n[s]=r.join("")}var u=-1,l=0,c=0,d=-1,f=!1;for(s=0;s<i;s++)f?"0"===n[s]?c+=1:(f=!1,c>l&&(u=d,l=c)):"0"===n[s]&&(f=!0,d=s,c=1);c>l&&(u=d,l=c),l>1&&n.splice(u,l,""),o=n.length;var p="";for(""===n[0]&&(p=":"),s=0;s<o&&(p+=n[s],s!==o-1);s++)p+=":";return""===n[o-1]&&(p+=":"),p},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}))},{}],717:[function(e,t,r){
/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(e,r){"use strict";"object"==typeof t&&t.exports?t.exports=r():"function"==typeof define&&define.amd?define(r):e.SecondLevelDomains=r(e)}(this,(function(e){"use strict";var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return!1;var o=r.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(n+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var n=r.list[e.slice(t+1)];return!!n&&n.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return null;var o=r.list[e.slice(t+1)];return o?o.indexOf(" "+e.slice(n+1,t)+" ")<0?null:e.slice(n+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r}))},{}],718:[function(e,t,r){
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(r,n){"use strict";"object"==typeof t&&t.exports?t.exports=n(e("./punycode"),e("./IPv6"),e("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],n):r.URI=n(r.punycode,r.IPv6,r.SecondLevelDomains,r)}(this,(function(e,t,r,n){"use strict";var o=n&&n.URI;function i(e,t){var r=arguments.length>=1;if(!(this instanceof i))return r?arguments.length>=2?new i(e,t):new i(e):new i;if(void 0===e){if(r)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}i.version="1.19.11";var s=i.prototype,a=Object.prototype.hasOwnProperty;function u(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function l(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function c(e){return"Array"===l(e)}function d(e,t){var r,n,o={};if("RegExp"===l(t))o=null;else if(c(t))for(r=0,n=t.length;r<n;r++)o[t[r]]=!0;else o[t]=!0;for(r=0,n=e.length;r<n;r++){(o&&void 0!==o[e[r]]||!o&&t.test(e[r]))&&(e.splice(r,1),n--,r--)}return e}function f(e,t){var r,n;if(c(t)){for(r=0,n=t.length;r<n;r++)if(!f(e,t[r]))return!1;return!0}var o=l(t);for(r=0,n=e.length;r<n;r++)if("RegExp"===o){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function p(e,t){if(!c(e)||!c(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function h(e){return e.replace(/^\/+|\/+$/g,"")}function _(e){return escape(e)}function E(e){return encodeURIComponent(e).replace(/[!'()*]/g,_).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return i.domAttributes[t]}},i.encode=E,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=E,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(e,t){var r=i.encode(e+"");return void 0===t&&(t=i.escapeQuerySpace),t?r.replace(/%20/g,"+"):r},i.decodeQuery=function(e,t){e+="",void 0===t&&(t=i.escapeQuerySpace);try{return i.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var g,m={encode:"encode",decode:"decode"},y=function(e,t){return function(r){try{return i[t](r+"").replace(i.characters[e][t].expression,(function(r){return i.characters[e][t].map[r]}))}catch(e){return r}}};for(g in m)i[g+"PathSegment"]=y("pathname",m[g]),i[g+"UrnPathSegment"]=y("urnpath",m[g]);var S=function(e,t,r){return function(n){var o;o=r?function(e){return i[t](i[r](e))}:i[t];for(var s=(n+"").split(e),a=0,u=s.length;a<u;a++)s[a]=o(s[a]);return s.join(e)}};function T(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}}function A(e,t){return function(r,n){return void 0===r?this._parts[e]||"":(null!==r&&(r+="").charAt(0)===t&&(r=r.substring(1)),this._parts[e]=r,this.build(!n),this)}}i.decodePath=S("/","decodePathSegment"),i.decodeUrnPath=S(":","decodeUrnPathSegment"),i.recodePath=S("/","encodePathSegment","decode"),i.recodeUrnPath=S(":","encodeUrnPathSegment","decode"),i.encodeReserved=y("reserved","encode"),i.parse=function(e,t){var r;return t||(t={preventInvalidHostname:i.preventInvalidHostname}),(r=(e=(e=e.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),(r=e.indexOf("?"))>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===(e=(e=e.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(t.protocol=null,e=e.substring(2),e=i.parseAuthority(e,t)):(r=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(i.protocol_expression)?t.protocol=void 0:"//"===e.substring(r+1,r+3).replace(/\\/g,"/")?(e=e.substring(r+3),e=i.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0)),t.path=e,t},i.parseHost=function(e,t){e||(e="");var r,n,o=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,o)||null,"/"===t.port&&(t.port=null);else{var s=e.indexOf(":"),a=e.indexOf("/"),u=e.indexOf(":",s+1);-1!==u&&(-1===a||u<a)?(t.hostname=e.substring(0,o)||null,t.port=null):(n=e.substring(0,o).split(":"),t.hostname=n[0]||null,t.port=n[1]||null)}return t.hostname&&"/"!==e.substring(o).charAt(0)&&(o++,e="/"+e),t.preventInvalidHostname&&i.ensureValidHostname(t.hostname,t.protocol),t.port&&i.ensureValidPort(t.port),e.substring(o)||"/"},i.parseAuthority=function(e,t){return e=i.parseUserinfo(e,t),i.parseHost(e,t)},i.parseUserinfo=function(e,t){var r=e;-1!==e.indexOf("\\")&&(e=e.replace(/\\/g,"/"));var n,o=e.indexOf("/"),s=e.lastIndexOf("@",o>-1?o:e.length-1);return s>-1&&(-1===o||s<o)?(n=e.substring(0,s).split(":"),t.username=n[0]?i.decode(n[0]):null,n.shift(),t.password=n[0]?i.decode(n.join(":")):null,e=r.substring(s+1)):(t.username=null,t.password=null),e},i.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,o,s={},u=e.split("&"),l=u.length,c=0;c<l;c++)r=u[c].split("="),n=i.decodeQuery(r.shift(),t),o=r.length?i.decodeQuery(r.join("="),t):null,"__proto__"!==n&&(a.call(s,n)?("string"!=typeof s[n]&&null!==s[n]||(s[n]=[s[n]]),s[n].push(o)):s[n]=o);return s},i.build=function(e){var t="",r=!1;return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//",r=!0),t+=i.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&r&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},i.buildHost=function(e){var t="";return e.hostname?(i.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},i.buildAuthority=function(e){return i.buildUserinfo(e)+i.buildHost(e)},i.buildUserinfo=function(e){var t="";return e.username&&(t+=i.encode(e.username)),e.password&&(t+=":"+i.encode(e.password)),t&&(t+="@"),t},i.buildQuery=function(e,t,r){var n,o,s,u,l="";for(o in e)if("__proto__"!==o&&a.call(e,o))if(c(e[o]))for(n={},s=0,u=e[o].length;s<u;s++)void 0!==e[o][s]&&void 0===n[e[o][s]+""]&&(l+="&"+i.buildQueryParameter(o,e[o][s],r),!0!==t&&(n[e[o][s]+""]=!0));else void 0!==e[o]&&(l+="&"+i.buildQueryParameter(o,e[o],r));return l.substring(1)},i.buildQueryParameter=function(e,t,r){return i.encodeQuery(e,r)+(null!==t?"="+i.encodeQuery(t,r):"")},i.addQuery=function(e,t,r){if("object"==typeof t)for(var n in t)a.call(t,n)&&i.addQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),c(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},i.setQuery=function(e,t,r){if("object"==typeof t)for(var n in t)a.call(t,n)&&i.setQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===r?null:r}},i.removeQuery=function(e,t,r){var n,o,s;if(c(t))for(n=0,o=t.length;n<o;n++)e[t[n]]=void 0;else if("RegExp"===l(t))for(s in e)t.test(s)&&(e[s]=void 0);else if("object"==typeof t)for(s in t)a.call(t,s)&&i.removeQuery(e,s,t[s]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===l(r)?!c(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=d(e[t],r):e[t]!==String(r)||c(r)&&1!==r.length?c(e[t])&&(e[t]=d(e[t],r)):e[t]=void 0:e[t]=void 0}},i.hasQuery=function(e,t,r,n){switch(l(t)){case"String":break;case"RegExp":for(var o in e)if(a.call(e,o)&&t.test(o)&&(void 0===r||i.hasQuery(e,o,r)))return!0;return!1;case"Object":for(var s in t)if(a.call(t,s)&&!i.hasQuery(e,s,t[s]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(l(r)){case"Undefined":return t in e;case"Boolean":return r===Boolean(c(e[t])?e[t].length:e[t]);case"Function":return!!r(e[t],t,e);case"Array":return!!c(e[t])&&(n?f:p)(e[t],r);case"RegExp":return c(e[t])?!!n&&f(e[t],r):Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return c(e[t])?!!n&&f(e[t],r):e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var e=[],t=[],r=0,n=0;n<arguments.length;n++){var o=new i(arguments[n]);e.push(o);for(var s=o.segment(),a=0;a<s.length;a++)"string"==typeof s[a]&&t.push(s[a]),s[a]&&r++}if(!t.length||!r)return new i("");var u=new i("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},i.commonPath=function(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(r)&&"/"===t.charAt(r)||(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},i.withinString=function(e,t,r){r||(r={});var n=r.start||i.findUri.start,o=r.end||i.findUri.end,s=r.trim||i.findUri.trim,a=r.parens||i.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var l=n.exec(e);if(!l)break;var c=l.index;if(r.ignoreHtml){var d=e.slice(Math.max(c-3,0),c);if(d&&u.test(d))continue}for(var f=c+e.slice(c).search(o),p=e.slice(c,f),h=-1;;){var _=a.exec(p);if(!_)break;var E=_.index+_[0].length;h=Math.max(h,E)}if(!((p=h>-1?p.slice(0,h)+p.slice(h).replace(s,""):p.replace(s,"")).length<=l[0].length||r.ignore&&r.ignore.test(p))){var g=t(p,c,f=c+p.length,e);void 0!==g?(g=String(g),e=e.slice(0,c)+g+e.slice(f),n.lastIndex=c+g.length):n.lastIndex=f}}return n.lastIndex=0,e},i.ensureValidHostname=function(t,r){var n=!!t,o=!1;if(!!r&&(o=f(i.hostProtocols,r)),o&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(t&&t.match(i.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},i.noConflict=function(e){if(e){var t={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(t.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(t.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=n.SecondLevelDomains.noConflict()),t}return n.URI===this&&(n.URI=o),this},s.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new i(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=T("protocol"),s.username=T("username"),s.password=T("password"),s.hostname=T("hostname"),s.port=T("port"),s.query=A("query","?"),s.fragment=A("fragment","#"),s.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},s.hash=function(e,t){var r=this.fragment(e,t);return"string"==typeof r&&r.length?"#"+r:r},s.pathname=function(e,t){if(void 0===e||!0===e){var r=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=e?i.recodeUrnPath(e):"":this._parts.path=e?i.recodePath(e):"/",this.build(!t),this},s.path=s.pathname,s.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=i._parts();var n=e instanceof i,o="object"==typeof e&&(e.hostname||e.path||e.pathname);e.nodeName&&(e=e[i.getDomAttribute(e)]||"",o=!1);if(!n&&o&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=i.parse(String(e),this._parts);else{if(!n&&!o)throw new TypeError("invalid input");var s=n?e._parts:e;for(r in s)"query"!==r&&a.call(this._parts,r)&&(this._parts[r]=s[r]);s.query&&this.query(s.query,!1)}return this.build(!t),this},s.is=function(e){var t=!1,n=!1,o=!1,s=!1,a=!1,u=!1,l=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,n=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),a=(s=!(t=n||o))&&r&&r.has(this._parts.hostname),u=s&&i.idn_expression.test(this._parts.hostname),l=s&&i.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return a;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var b=s.protocol,O=s.port,I=s.hostname;s.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return b.call(this,e,t)},s.scheme=s.protocol,s.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),i.ensureValidPort(e))),O.call(this,e,t))},s.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(e,r))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(e,this._parts.protocol)}return I.call(this,e,t)},s.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(e);return this.protocol(n.protocol()).authority(n.authority()).build(!t),this},s.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==e[e.length-1]&&(e+="@"),i.parseUserinfo(e,this._parts),this.build(!t),this},s.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=i.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},s.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,n),s=new RegExp("^"+u(o));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&i.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(s,e),this.build(!t),this},s.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(t).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var o=new RegExp(u(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},s.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(n+1);return!0!==t&&r&&r.list[o.toLowerCase()]&&r.get(this._parts.hostname)||o}var i;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');i=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},s.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?i.decodePath(n):n}var o=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,o),a=new RegExp("^"+u(s));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=i.recodePath(e),this._parts.path=this._parts.path.replace(a,e),this.build(!t),this},s.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return e?i.decodePathSegment(n):n}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var s=new RegExp(u(this.filename())+"$");return e=i.recodePath(e),this._parts.path=this._parts.path.replace(s,e),o?this.normalizePath(t):this.build(!t),this},s.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,o=this.filename(),s=o.lastIndexOf(".");return-1===s?"":(r=o.substring(s+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",e?i.decodePathSegment(n):n)}"."===e.charAt(0)&&(e=e.substring(1));var a,l=this.suffix();if(l)a=e?new RegExp(u(l)+"$"):new RegExp(u("."+l)+"$");else{if(!e)return this;this._parts.path+="."+i.recodePath(e)}return a&&(e=i.recodePath(e),this._parts.path=this._parts.path.replace(a,e)),this.build(!t),this},s.segment=function(e,t,r){var n=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),s=o.split(n);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(i&&s.shift(),e<0&&(e=Math.max(s.length+e,0)),void 0===t)return void 0===e?s:s[e];if(null===e||void 0===s[e])if(c(t)){s=[];for(var a=0,u=t.length;a<u;a++)(t[a].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(h(t[a])))}else(t||"string"==typeof t)&&(t=h(t),""===s[s.length-1]?s[s.length-1]=t:s.push(t));else t?s[e]=h(t):s.splice(e,1);return i&&s.unshift(""),this.path(s.join(n),r)},s.segmentCoded=function(e,t,r){var n,o,s;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(c(n=this.segment(e,t,r)))for(o=0,s=n.length;o<s;o++)n[o]=i.decode(n[o]);else n=void 0!==n?i.decode(n):void 0;return n}if(c(t))for(o=0,s=t.length;o<s;o++)t[o]=i.encode(t[o]);else t="string"==typeof t||t instanceof String?i.encode(t):t;return this.segment(e,t,r)};var v=s.query;return s.query=function(e,t){if(!0===e)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=e.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=i.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):v.call(this,e,t)},s.setQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)n[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in e)a.call(e,o)&&(n[o]=e[o])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},s.addQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,e,void 0===t?null:t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},s.removeQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,e,t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},s.hasQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,e,t,r)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},s.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},s.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},s.normalizePath=function(e){var t,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var n,o,s="";for("/"!==(r=i.recodePath(r)).charAt(0)&&(t=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(s=r.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(o=r.substring(0,n).lastIndexOf("/"))&&(o=n),r=r.substring(0,o)+r.substring(n+3)):r=r.substring(3);return t&&this.is("relative")&&(r=s+r.substring(1)),this._parts.path=r,this.build(!e),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},s.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var e=i.encode,t=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},s.unicode=function(){var e=i.encode,t=i.decode;i.encode=E,i.decode=unescape;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},s.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var n="",o=0,s=t._parts.query.split("&"),a=s.length;o<a;o++){var u=(s[o]||"").split("=");n+="&"+i.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+i.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=i.decodeQuery(t.hash(),!0)},s.absoluteTo=function(e){var t,r,n,o=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof i||(e=new i(e)),o._parts.protocol)return o;if(o._parts.protocol=e._parts.protocol,this._parts.hostname)return o;for(r=0;n=s[r];r++)o._parts[n]=e._parts[n];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),o._parts.path=(t?t+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=e._parts.path,o._parts.query||(o._parts.query=e._parts.query)),o.build(),o},s.relativeTo=function(e){var t,r,n,o,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new i(e).normalize(),t=a._parts,r=e._parts,o=a.path(),s=e.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return a.build();if(null!==t.protocol||null!==t.username||null!==t.password)return a.build();if(t.hostname!==r.hostname||t.port!==r.port)return a.build();if(t.hostname=null,t.port=null,o===s)return t.path="",a.build();if(!(n=i.commonPath(o,s)))return a.build();var u=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=u+t.path.substring(n.length)||"./",a.build()},s.equals=function(e){var t,r,n,o,s,u=this.clone(),l=new i(e),d={};if(u.normalize(),l.normalize(),u.toString()===l.toString())return!0;if(n=u.query(),o=l.query(),u.query(""),l.query(""),u.toString()!==l.toString())return!1;if(n.length!==o.length)return!1;for(s in t=i.parseQuery(n,this._parts.escapeQuerySpace),r=i.parseQuery(o,this._parts.escapeQuerySpace),t)if(a.call(t,s)){if(c(t[s])){if(!p(t[s],r[s]))return!1}else if(t[s]!==r[s])return!1;d[s]=!0}for(s in r)if(a.call(r,s)&&!d[s])return!1;return!0},s.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},s.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},s.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},i}))},{"./IPv6":716,"./SecondLevelDomains":717,"./punycode":719}],719:[function(e,t,r){(function(e){(function(){!function(n){var o="object"==typeof r&&r&&!r.nodeType&&r,i="object"==typeof t&&t&&!t.nodeType&&t,s="object"==typeof e&&e;s.global!==s&&s.window!==s&&s.self!==s||(n=s);var a,u,l=2147483647,c=36,d=1,f=26,p=38,h=700,_=72,E=128,g="-",m=/^xn--/,y=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=c-d,b=Math.floor,O=String.fromCharCode;function I(e){throw new RangeError(T[e])}function v(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function N(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+v((e=e.replace(S,".")).split("."),t).join(".")}function R(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function C(e){return v(e,(function(e){var t="";return e>65535&&(t+=O((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=O(e)})).join("")}function D(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var n=0;for(e=r?b(e/h):e>>1,e+=b(e/t);e>A*f>>1;n+=c)e=b(e/A);return b(n+(A+1)*e/(e+p))}function L(e){var t,r,n,o,i,s,a,u,p,h,m,y=[],S=e.length,T=0,A=E,O=_;for((r=e.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&I("not-basic"),y.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<S;){for(i=T,s=1,a=c;o>=S&&I("invalid-input"),((u=(m=e.charCodeAt(o++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:c)>=c||u>b((l-T)/s))&&I("overflow"),T+=u*s,!(u<(p=a<=O?d:a>=O+f?f:a-O));a+=c)s>b(l/(h=c-p))&&I("overflow"),s*=h;O=w(T-i,t=y.length+1,0==i),b(T/t)>l-A&&I("overflow"),A+=b(T/t),T%=t,y.splice(T++,0,A)}return C(y)}function P(e){var t,r,n,o,i,s,a,u,p,h,m,y,S,T,A,v=[];for(y=(e=R(e)).length,t=E,r=0,i=_,s=0;s<y;++s)(m=e[s])<128&&v.push(O(m));for(n=o=v.length,o&&v.push(g);n<y;){for(a=l,s=0;s<y;++s)(m=e[s])>=t&&m<a&&(a=m);for(a-t>b((l-r)/(S=n+1))&&I("overflow"),r+=(a-t)*S,t=a,s=0;s<y;++s)if((m=e[s])<t&&++r>l&&I("overflow"),m==t){for(u=r,p=c;!(u<(h=p<=i?d:p>=i+f?f:p-i));p+=c)A=u-h,T=c-h,v.push(O(D(h+A%T,0))),u=b(A/T);v.push(O(D(u,0))),i=w(r,S,n==o),r=0,++n}++r,++t}return v.join("")}if(a={version:"1.3.2",ucs2:{decode:R,encode:C},decode:L,encode:P,toASCII:function(e){return N(e,(function(e){return y.test(e)?"xn--"+P(e):e}))},toUnicode:function(e){return N(e,(function(e){return m.test(e)?L(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return a}));else if(o&&i)if(t.exports==o)i.exports=a;else for(u in a)a.hasOwnProperty(u)&&(o[u]=a[u]);else n.punycode=a}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],720:[function(e,t,r){(function(e){(function(){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],721:[function(e,t,r){t.exports={package:null,syntax:"proto2",messages:[{name:"devices",fields:[],syntax:"proto2",options:{java_package:"com.symantec.vault.devices.messages",optimize_for:"SPEED"},messages:[{name:"DeviceArray",syntax:"proto2",fields:[{rule:"repeated",type:"Device",name:"device",id:1}]},{name:"Device",syntax:"proto2",fields:[{rule:"required",type:"string",name:"id",id:1},{rule:"required",type:"bytes",name:"pubKey",id:2},{rule:"required",type:"string",name:"name",id:3},{rule:"required",type:"string",name:"os",id:4},{rule:"optional",type:"string",name:"type",id:5}]}],isNamespace:!0},{name:"spoc",fields:[],syntax:"proto2",options:{java_package:"com.symantec.spoc.messages",optimize_for:"SPEED"},messages:[{name:"SpocBumpArray",syntax:"proto2",fields:[{rule:"repeated",type:"SpocBump",name:"bump",id:1}]},{name:"SpocBump",syntax:"proto2",fields:[{rule:"required",type:"string",name:"entity",id:1},{rule:"required",type:"int32",name:"channel",id:2},{rule:"optional",type:"bytes",name:"payload",id:3},{rule:"optional",type:"string",name:"ApplicationID",id:4},{rule:"optional",type:"ServiceData",name:"serviceData",id:5}]},{name:"ServiceData",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"apsJson",id:1}]}],enums:[{name:"SPOCChannel",syntax:"proto2",values:[{name:"SC_NOREV",id:0},{name:"SC_STATE",id:1},{name:"SC_DATASTORE_UPDATE",id:2},{name:"SC_REGISTRATION_UPDATE",id:3},{name:"SC_DATA_REQUEST",id:4},{name:"SC_REMOTE_MANAGEMENT_REQUEST",id:5},{name:"SC_ENTITLEMENT_UPDATE",id:6},{name:"SC_EVENT_LOG_UPDATE",id:7},{name:"SC_INCENTIVES_UPDATE",id:8},{name:"SC_REGISTRATION_DELETE",id:9},{name:"SC_EVENT_LOG_LOCATION",id:10},{name:"SC_EVENT_LOG_NMS_MSWS",id:11},{name:"SC_PRODUCT_ENTITLEMENT_UPDATE",id:12},{name:"SC_SUBSCRIPTION_UPDATE",id:13},{name:"SC_NORTON_HOME_UPDATE",id:20},{name:"SC_SE_PROXY",id:30},{name:"SC_NMS_COMMAND",id:31},{name:"SC_IDSAFE_MOBILE_REGISTRATION",id:35},{name:"SC_IDSAFE_MOBILE_UNLOCK",id:36},{name:"SC_PDM_POLICY",id:40},{name:"SC_PDM_COMMAND",id:41},{name:"SC_DCS_COMMAND",id:50},{name:"SC_MTS_MESSAGE",id:100},{name:"SC_MAX",id:500}]}],isNamespace:!0},{name:"unlock",fields:[],syntax:"proto2",options:{java_package:"com.symantec.vault.unlock.messages",optimize_for:"SPEED"},messages:[{name:"UnlockResponse",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"enc_key",id:1},{rule:"required",type:"string",name:"bump_sessionid",id:2},{rule:"optional",type:"int32",name:"status_code",id:3}]},{name:"UnlockRequest",syntax:"proto2",fields:[{rule:"required",type:"bytes",name:"enc_key",id:1},{rule:"required",type:"bytes",name:"enc_sessionkey",id:2},{rule:"required",type:"string",name:"bump_sessionid",id:3},{rule:"required",type:"string",name:"deviceID",id:4},{rule:"required",type:"uint64",name:"uTime",id:5},{rule:"optional",type:"DesktopInfo",name:"desktopinfo",id:6}]},{name:"DesktopInfo",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"productName",id:1},{rule:"optional",type:"string",name:"productVersion",id:2}]}],isNamespace:!0},{name:"seamlessonboarding",fields:[],syntax:"proto2",options:{java_package:"com.symantec.vault.seamlessonboarding.messages",optimize_for:"SPEED"},messages:[{name:"seamlessOnboardingRequest",syntax:"proto2",fields:[{rule:"required",type:"string",name:"entityId",id:1},{rule:"required",type:"bytes",name:"payload",id:2}]},{name:"seamlessOnboardingResponse",syntax:"proto2",fields:[{rule:"required",type:"string",name:"entityId",id:1},{rule:"required",type:"bytes",name:"payload",id:2},{rule:"required",type:"bool",name:"isSeamlesslyOnboarded",id:3},{rule:"required",type:"int32",name:"statusCode",id:4},{rule:"required",type:"string",name:"deviceId",id:5}]},{name:"seamlessOnboardingRequestKeys",syntax:"proto2",fields:[{rule:"required",type:"string",name:"publicKey",id:1}]},{name:"seamlessOnboardingKeys",syntax:"proto2",fields:[{rule:"required",type:"bytes",name:"encryptionKey",id:1},{rule:"required",type:"bytes",name:"challengeKey",id:2},{rule:"required",type:"string",name:"refreshToken",id:3}]}],isNamespace:!0}],isNamespace:!0}},{}],722:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BankAccountActionTypes=void 0;r.BankAccountActionTypes=function(e){return e.ADD_ACCOUNT="bankAccounts/add",e.UPDATE_ACCOUNT="bankAccounts/update",e.DELETE_ACCOUNT="bankAccounts/delete",e}({})},{}],723:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resetExtendedState=r.resetAllItems=void 0;var n=e("@reduxjs/toolkit");r.resetAllItems=(0,n.createAction)("reset"),r.resetExtendedState=(0,n.createAction)("resetExtendedState")},{"@reduxjs/toolkit":224}],724:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ContactsActionTypes=void 0;r.ContactsActionTypes=function(e){return e.ADD_CONTACTS="contacts/add",e.UPDATE_CONTACTS="contacts/update",e.DELETE_CONTACTS="contacts/delete",e}({})},{}],725:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CreditCardActionTypes=void 0;r.CreditCardActionTypes=function(e){return e.ADD_CREDIT_CARD="creditCards/add",e.UPDATE_CREDIT_CARD="creditCards/update",e.DELETE_CREDIT_CARD="creditCards/delete",e}({})},{}],726:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={IMPORT_ALL_ACTION:!0};r.IMPORT_ALL_ACTION=void 0;var o=e("./loginActionTypes");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./noteActionTypes");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=e("./contactActionTypes");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=e("./BankAccountActionTypes");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}}))}));var u=e("./creditCardActionTypes");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}}))}));r.IMPORT_ALL_ACTION="import/all"},{"./BankAccountActionTypes":722,"./contactActionTypes":724,"./creditCardActionTypes":725,"./loginActionTypes":727,"./noteActionTypes":728}],727:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LoginActionTypes=void 0;r.LoginActionTypes=function(e){return e.ADD_LOGINS="logins/add",e.UPDATE_LOGINS="logins/update",e.DELETE_LOGINS="logins/delete",e.UPDATE_LOGINS_ARRAY="logins/updates",e}({})},{}],728:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoteActionTypes=void 0;r.NoteActionTypes=function(e){return e.ADD_NOTE="notes/add",e.UPDATE_NOTE="notes/update",e.DELETE_NOTE="notes/delete",e}({})},{}],729:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UpdateTagActionTypes=r.TagActionTypes=void 0;r.TagActionTypes=function(e){return e.ADD_TAG="tags/addTag",e.DELETE_TAG="tags/deleteTag",e.UPDATE_TAG="tags/updateTag",e.BULK_OPERATION="tags/bulkOperation",e}({}),r.UpdateTagActionTypes=function(e){return e.delete="delete",e.add="add",e}({})},{}],730:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.updateItem=r.selectAllAddresses=r.selectAddressesCount=r.selectAddressById=r.getAllAddresses=r.deleteItem=r.default=r.addressesAlias=r.addItem=void 0;var o=e("@reduxjs/toolkit"),i=e("./../../action-types/commonActionTypes"),s=e("../../../vault/vaultConstants"),a=n(e("../entitySliceAdapter"));const u=(0,o.createEntityAdapter)({selectId:e=>e.path}),l=u.getInitialState(),c="addresses",d=(0,a.default)(c,s.ItemType.Address),{actions:{addItem:f,updateItem:p,deleteItem:h,getAllItems:_},alias:E}=d;r.getAllAddresses=_,r.deleteItem=h,r.updateItem=p,r.addItem=f,r.addressesAlias=E;const g=(0,o.createSlice)({name:c,initialState:l,reducers:{set(e,t){u.setAll(e,t.payload)}},extraReducers(e){e.addCase(f.fulfilled,((e,t)=>{u.addOne(e,t.payload)})).addCase(p.fulfilled,((e,t)=>{u.upsertOne(e,t.payload)})).addCase(h.fulfilled,((e,t)=>{u.removeOne(e,t.payload)})).addCase(i.resetAllItems,(()=>l))}}),{selectAll:m,selectById:y,selectTotal:S}=u.getSelectors((e=>e.addresses));r.selectAddressesCount=S,r.selectAddressById=y,r.selectAllAddresses=m;r.default=g.reducer},{"../../../vault/vaultConstants":758,"../entitySliceAdapter":734,"./../../action-types/commonActionTypes":723,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224}],731:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.updateItem=r.selectFavoriteBankAccountsCount=r.selectFavoriteBankAccountIds=r.selectBankAccountsCount=r.selectBankAccountIds=r.selectBankAccountEntities=r.selectBankAccountById=r.selectAllBankAccounts=r.getAllBankAccounts=r.deleteItem=r.default=r.bankAccountsAlias=r.addItem=void 0;var o=e("@reduxjs/toolkit"),i=e("./../../action-types/commonActionTypes"),s=e("../../../vault/vaultConstants"),a=n(e("../entitySliceAdapter")),u=e("../import/importSlice");const l=(0,o.createEntityAdapter)({selectId:e=>e.path}),c=l.getInitialState({status:"idle",error:null,itemPath:"",actionType:""}),d="bankAccounts",f=(0,a.default)(d,s.ItemType.BankAccount),{actions:{addItem:p,updateItem:h,deleteItem:_,getAllItems:E},alias:g}=f;r.getAllBankAccounts=E,r.deleteItem=_,r.updateItem=h,r.addItem=p,r.bankAccountsAlias=g;const m=(0,o.createSlice)({name:d,initialState:c,reducers:{set(e,t){l.setAll(e,t.payload)}},extraReducers(e){e.addCase(p.pending,(e=>{e.status="loading"})).addCase(p.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(p.fulfilled,((e,t)=>{l.addOne(e,t.payload),e.status="success",e.itemPath=t.payload.path,e.error=null})).addCase(h.pending,(e=>{e.status="loading"})).addCase(h.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(h.fulfilled,((e,t)=>{l.upsertOne(e,t.payload),e.status="success",e.error=null})).addCase(_.pending,(e=>{e.status="loading"})).addCase(_.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error",e.actionType=t.type})).addCase(_.fulfilled,((e,t)=>{l.removeOne(e,t.payload),e.status="success",e.itemPath="",e.error=null,e.actionType=t.type})).addCase(u.importAllItems.fulfilled,((e,t)=>{l.addMany(e,t.payload.bankAccounts)})).addCase(i.resetAllItems,(()=>c)).addCase(i.resetExtendedState,(e=>{e.status="idle",e.error=null,e.actionType=""}))}}),{selectAll:y,selectById:S,selectTotal:T,selectEntities:A,selectIds:b}=l.getSelectors((e=>e.bankAccounts));r.selectBankAccountIds=b,r.selectBankAccountEntities=A,r.selectBankAccountsCount=T,r.selectBankAccountById=S,r.selectAllBankAccounts=y;const O=r.selectFavoriteBankAccountIds=(0,o.createSelector)(b,A,((e,t)=>e.filter((e=>{const r=t[e];return!!r&&Boolean(r.favorite)}))));r.selectFavoriteBankAccountsCount=(0,o.createSelector)(O,(e=>e.length));r.default=m.reducer},{"../../../vault/vaultConstants":758,"../entitySliceAdapter":734,"../import/importSlice":735,"./../../action-types/commonActionTypes":723,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224}],732:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.updateItem=r.selectFavoriteContactsCount=r.selectFavoriteContactIds=r.selectContactsCount=r.selectContactIds=r.selectContactEntities=r.selectContactById=r.selectAllContacts=r.getAllContacts=r.deleteItem=r.default=r.contactsAlias=r.addItem=void 0;var o=e("@reduxjs/toolkit"),i=e("./../../action-types/commonActionTypes"),s=e("../../../vault/vaultConstants"),a=n(e("../entitySliceAdapter")),u=e("../import/importSlice");const l=(0,o.createEntityAdapter)({selectId:e=>e.identityNode.path}),c=l.getInitialState({status:"idle",error:null,itemPath:null,actionType:""}),d="contacts",f=(0,a.default)(d,s.ItemType.Contact),{actions:{addItem:p,updateItem:h,deleteItem:_,getAllItems:E},alias:g}=f;r.getAllContacts=E,r.deleteItem=_,r.updateItem=h,r.addItem=p,r.contactsAlias=g;const m=(0,o.createSlice)({name:d,initialState:c,reducers:{set(e,t){l.setAll(e,t.payload)}},extraReducers(e){e.addCase(p.pending,(e=>{e.error=null,e.status="loading"})).addCase(p.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(p.fulfilled,((e,t)=>{l.addOne(e,t.payload),e.status="success",e.error=null,e.itemPath=t.payload.identityNode.path})).addCase(h.pending,(e=>{e.error=null,e.status="loading"})).addCase(h.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(h.fulfilled,((e,t)=>{l.upsertOne(e,t.payload),e.status="success",e.error=null})).addCase(_.pending,(e=>{e.error=null,e.status="loading"})).addCase(_.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error",e.actionType=t.type})).addCase(_.fulfilled,((e,t)=>{l.removeOne(e,t.payload),e.status="success",e.error=null,e.actionType=t.type})).addCase(u.importAllItems.fulfilled,((e,t)=>{l.addMany(e,t.payload.addressess)})).addCase(i.resetAllItems,(()=>c)).addCase(i.resetExtendedState,(e=>{e.status="idle",e.error=null,e.actionType=""}))}}),{selectAll:y,selectById:S,selectTotal:T,selectEntities:A,selectIds:b}=l.getSelectors((e=>e.contacts));r.selectContactIds=b,r.selectContactEntities=A,r.selectContactsCount=T,r.selectContactById=S,r.selectAllContacts=y;const O=r.selectFavoriteContactIds=(0,o.createSelector)(b,A,((e,t)=>e.filter((e=>{const r=t[e];return!(!r||!r.identityNode)&&Boolean(r.identityNode.favorite)}))));r.selectFavoriteContactsCount=(0,o.createSelector)(O,(e=>e.length));r.default=m.reducer},{"../../../vault/vaultConstants":758,"../entitySliceAdapter":734,"../import/importSlice":735,"./../../action-types/commonActionTypes":723,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224}],733:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.updateItem=r.selectFavoriteCreditCardsCount=r.selectFavoriteCardIds=r.selectCreditCardsCount=r.selectCreditCardIds=r.selectCreditCardEntities=r.selectCreditCardById=r.selectAllCreditCards=r.getAllCreditCards=r.deleteItem=r.default=r.creditCardsAlias=r.addItem=void 0;var o=e("@reduxjs/toolkit"),i=e("./../../action-types/commonActionTypes"),s=e("../../../vault/vaultConstants"),a=n(e("../entitySliceAdapter")),u=e("../import/importSlice");const l=(0,o.createEntityAdapter)({selectId:e=>e.path}),c=l.getInitialState({status:"idle",error:null,itemPath:"",actionType:""}),d="creditCards",f=(0,a.default)(d,s.ItemType.CreditCard),{actions:{addItem:p,updateItem:h,deleteItem:_,getAllItems:E},alias:g}=f;r.getAllCreditCards=E,r.deleteItem=_,r.updateItem=h,r.addItem=p,r.creditCardsAlias=g;const m=(0,o.createSlice)({name:d,initialState:c,reducers:{set(e,t){l.setAll(e,t.payload)}},extraReducers(e){e.addCase(p.pending,(e=>{e.error=null,e.status="loading"})).addCase(p.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(p.fulfilled,((e,t)=>{l.addOne(e,t.payload),e.status="success",e.itemPath=t.payload.path,e.error=null})).addCase(h.pending,(e=>{e.error=null,e.status="loading"})).addCase(h.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(h.fulfilled,((e,t)=>{l.upsertOne(e,t.payload),e.status="success",e.error=null})).addCase(_.pending,(e=>{e.error=null,e.status="loading"})).addCase(_.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error",e.actionType=t.type})).addCase(_.fulfilled,((e,t)=>{l.removeOne(e,t.payload),e.status="success",e.error=null,e.actionType=t.type})).addCase(u.importAllItems.fulfilled,((e,t)=>{l.addMany(e,t.payload.cards)})).addCase(i.resetAllItems,(()=>c)).addCase(i.resetExtendedState,(e=>{e.status="idle",e.error=null,e.actionType=""}))}}),{selectAll:y,selectById:S,selectTotal:T,selectEntities:A,selectIds:b}=l.getSelectors((e=>e.creditCards));r.selectCreditCardIds=b,r.selectCreditCardEntities=A,r.selectCreditCardsCount=T,r.selectCreditCardById=S,r.selectAllCreditCards=y;const O=r.selectFavoriteCardIds=(0,o.createSelector)(b,A,((e,t)=>e.filter((e=>{const r=t[e];return!!r&&Boolean(r.favorite)}))));r.selectFavoriteCreditCardsCount=(0,o.createSelector)(O,(e=>e.length));r.default=m.reducer},{"../../../vault/vaultConstants":758,"../entitySliceAdapter":734,"../import/importSlice":735,"./../../action-types/commonActionTypes":723,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224}],734:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var i=e("@reduxjs/toolkit"),s=e("./../action-types/tagActionTypes"),a=e("../../vault/vaultConstants"),u=e("./tags/tagSlice");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.default=function(e,t){const r=(0,i.createAsyncThunk)(`${e}/add`,(async(e,{extra:r})=>{const{apiService:n}=r;return await n.addItem(e,t)})),n=(0,i.createAsyncThunk)(`${e}/update`,(async(e,{extra:r})=>{const{apiService:n}=r;return await n.updateItem(e,t)})),o=(0,i.createAsyncThunk)(`${e}/updates`,(async(e,{extra:r})=>{const{apiService:n}=r;return await n.updateItems(e,t)})),l=(0,i.createAsyncThunk)(`${e}/addupdates`,(async(e,{extra:r})=>{const{apiService:n}=r;return await n.addUpdateLoginItems(e,t)})),d=(0,i.createAsyncThunk)(`${e}/delete`,(async(e,{extra:r})=>{const{apiService:n}=r;return await n.deleteItem(e,t),e})),f={[`${e}/add`]:({payload:e})=>async t=>{t(r(e.entityPayload)).then((async r=>{if(!(e.tagPayload&&e.tagPayload.tagsToAdd&&e.tagPayload.tagItemType&&e.tagPayload.allTags))return;const{tagPayload:{tagsToAdd:n,tagItemType:o,allTags:i}}=e,l=o===a.ItemType.Identity?r.meta.arg.identityNode.path:r.meta.arg.path;if(n&&n.length>0)for(const e of n){const r={tagName:e,itemGuid:l,itemType:o};i.includes(e)?await t((0,u.updateTag)(c(c({},r),{},{updateActionType:s.UpdateTagActionTypes.add}))):await t((0,u.addTag)(r))}}))},[`${e}/update`]:({payload:e})=>async(t,r,{tagService:o})=>{const i=e.entityPayload||e;t(n(i)).then((n=>{if(!e.tagPayload||!e.tagPayload.tagsToDelete&&!e.tagPayload.tagsToAdd||!e.tagPayload.tagItemType)return;const i=e.tagPayload.tagItemType===a.ItemType.Identity?n.meta.arg.identityNode.path:n.meta.arg.path,s=(0,u.selectAllTags)(r());(0,u.bulkOperationTags)(t,o,c(c({},e.tagPayload),{},{itemType:e.tagPayload.tagItemType,itemGuid:i,allTagItems:s}))}))},[`${e}/delete`]:({payload:e})=>async t=>{t(d(e)).then((()=>{t((0,u.getAllTags)())}))},[`${e}/updates`]:({payload:e})=>async t=>{t(o(e))},[`${e}/addupdates`]:({payload:e})=>async t=>{t(l(e))}};return{actions:{getAllItems:()=>(r,n,o)=>{if(!o)return;const{apiService:i}=o,s=i.getItems(t);r({type:`${e}/set`,payload:s})},addItem:r,updateItem:n,deleteItem:d,updateItems:o,addUpdateLoginItems:l},alias:f}}},{"../../vault/vaultConstants":758,"./../action-types/tagActionTypes":729,"./tags/tagSlice":739,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453}],735:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.importAllItems=r.importAlias=void 0,e("core-js/modules/es.promise.js");var n=e("@reduxjs/toolkit"),o=e("./../../action-types");const i=r.importAllItems=(0,n.createAsyncThunk)(o.IMPORT_ALL_ACTION,(async(e,{extra:t})=>{const{apiService:r}=t;return await r.bulkUpload(e)}));r.importAlias={[o.IMPORT_ALL_ACTION]:({payload:e})=>async t=>{t(i(e))}}},{"./../../action-types":726,"@reduxjs/toolkit":224,"core-js/modules/es.promise.js":437}],736:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.updateItems=r.updateItem=r.set=r.selectLoginsCount=r.selectLoginIds=r.selectLoginEntities=r.selectLoginById=r.selectFavoriteLoginsCount=r.selectFavoriteLoginIds=r.selectAllLogins=r.loginsAlias=r.getAllLogins=r.deleteItem=r.default=r.addUpdateLoginItems=r.addItem=void 0;var o=e("@reduxjs/toolkit"),i=e("./../../action-types/commonActionTypes"),s=e("../../../vault/vaultConstants"),a=n(e("../entitySliceAdapter")),u=e("../import/importSlice");const l=(0,o.createEntityAdapter)({selectId:e=>e.path}),c=l.getInitialState({status:"idle",error:null,itemPath:"",actionType:""}),d="logins",f=(0,a.default)(d,s.ItemType.Login),{actions:{addItem:p,updateItem:h,deleteItem:_,updateItems:E,addUpdateLoginItems:g,getAllItems:m},alias:y}=f;r.getAllLogins=m,r.addUpdateLoginItems=g,r.updateItems=E,r.deleteItem=_,r.updateItem=h,r.addItem=p,r.loginsAlias=y;const S=(0,o.createSlice)({name:d,initialState:c,reducers:{set(e,t){l.setAll(e,t.payload)}},extraReducers(e){e.addCase(p.pending,(e=>{e.error=null,e.status="loading"})).addCase(p.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(p.fulfilled,((e,t)=>{l.addOne(e,t.payload),e.status="success",e.itemPath=t.payload.path,e.error=null})).addCase(h.pending,(e=>{e.error=null,e.status="loading"})).addCase(h.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(h.fulfilled,((e,t)=>{l.upsertOne(e,t.payload),e.status="success",e.error=null})).addCase(_.pending,(e=>{e.error=null,e.status="loading"})).addCase(_.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error",e.actionType=t.type})).addCase(_.fulfilled,((e,t)=>{l.removeOne(e,t.payload),e.status="success",e.error=null,e.actionType=t.type})).addCase(u.importAllItems.fulfilled,((e,t)=>{l.addMany(e,t.payload.logins)})).addCase(i.resetAllItems,(()=>c)).addCase(i.resetExtendedState,(e=>{e.status="idle",e.error=null,e.actionType=""})).addCase(E.pending,(e=>{e.error=null,e.status="loading"})).addCase(E.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(E.fulfilled,((e,t)=>{l.upsertMany(e,t.payload),e.status="success",e.error=null})).addCase(g.pending,(e=>{e.error=null,e.status="loading"})).addCase(g.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(g.fulfilled,((e,t)=>{l.upsertMany(e,t.payload),e.status="success",e.error=null}))}}),{selectAll:T,selectById:A,selectTotal:b,selectEntities:O,selectIds:I}=l.getSelectors((e=>e.logins));r.selectLoginIds=I,r.selectLoginEntities=O,r.selectLoginsCount=b,r.selectLoginById=A,r.selectAllLogins=T;const v=r.selectFavoriteLoginIds=(0,o.createSelector)(I,O,((e,t)=>e.filter((e=>{const r=t[e];return!!r&&Boolean(r.favorite)})))),{set:N}=(r.selectFavoriteLoginsCount=(0,o.createSelector)(v,(e=>e.length)),S.actions);r.set=N;r.default=S.reducer},{"../../../vault/vaultConstants":758,"../entitySliceAdapter":734,"../import/importSlice":735,"./../../action-types/commonActionTypes":723,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224}],737:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.updateItem=r.selectNotesCount=r.selectNoteIds=r.selectNoteEntities=r.selectNoteById=r.selectFavoriteNotesCount=r.selectFavoriteNoteIds=r.selectAllNotes=r.notesAlias=r.getAllNotes=r.deleteItem=r.default=r.addItem=void 0;var o=e("@reduxjs/toolkit"),i=e("./../../action-types/commonActionTypes"),s=e("../../../vault/vaultConstants"),a=n(e("../entitySliceAdapter")),u=e("../import/importSlice");const l=(0,o.createEntityAdapter)({selectId:e=>e.path}),c=l.getInitialState({status:"idle",error:null,itemPath:null,actionType:""}),d="notes",f=(0,a.default)(d,s.ItemType.Note),{actions:{addItem:p,updateItem:h,deleteItem:_,getAllItems:E},alias:g}=f;r.getAllNotes=E,r.deleteItem=_,r.updateItem=h,r.addItem=p,r.notesAlias=g;const m=(0,o.createSlice)({name:d,initialState:c,reducers:{set(e,t){l.setAll(e,t.payload)}},extraReducers(e){e.addCase(p.pending,(e=>{e.error=null,e.status="loading"})).addCase(p.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(p.fulfilled,((e,t)=>{l.addOne(e,t.payload),e.status="success",e.itemPath=t.payload.path,e.error=null})).addCase(h.pending,(e=>{e.error=null,e.status="loading"})).addCase(h.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(h.fulfilled,((e,t)=>{l.upsertOne(e,t.payload),e.status="success",e.error=null})).addCase(_.pending,(e=>{e.error=null,e.status="loading"})).addCase(_.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error",e.actionType=t.type})).addCase(_.fulfilled,((e,t)=>{l.removeOne(e,t.payload),e.status="success",e.error=null,e.actionType=t.type})).addCase(u.importAllItems.fulfilled,((e,t)=>{l.addMany(e,t.payload.notes)})).addCase(i.resetAllItems,(()=>c)).addCase(i.resetExtendedState,(e=>{e.status="idle",e.error=null,e.actionType=""}))}}),{selectAll:y,selectById:S,selectTotal:T,selectEntities:A,selectIds:b}=l.getSelectors((e=>e.notes));r.selectNoteIds=b,r.selectNoteEntities=A,r.selectNotesCount=T,r.selectNoteById=S,r.selectAllNotes=y;const O=r.selectFavoriteNoteIds=(0,o.createSelector)(b,A,((e,t)=>e.filter((e=>{const r=t[e];return!!r&&Boolean(r.favorite)}))));r.selectFavoriteNotesCount=(0,o.createSelector)(O,(e=>e.length));r.default=m.reducer},{"../../../vault/vaultConstants":758,"../entitySliceAdapter":734,"../import/importSlice":735,"./../../action-types/commonActionTypes":723,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224}],738:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty"));e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var i=e("@reduxjs/toolkit"),s=e("./../action-types/tagActionTypes");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.default=function(e){const t=(0,i.createAsyncThunk)(`${e}/addTag`,(async({tagName:e,itemGuid:t,itemType:r},{extra:n})=>{const{tagService:o}=n;return await o.addTag(e,t,r)})),r=(0,i.createAsyncThunk)(`${e}/deleteTag`,(async({tagGuid:e,itemGuid:t,itemType:r},{extra:n})=>{const{tagService:o}=n;return await o.deleteTag(e,r,t)})),n=(0,i.createAsyncThunk)(`${e}/updateTag`,(async({tagName:e,tagGuid:t,itemGuid:r,itemType:n,updateActionType:o},{extra:i})=>{const{tagService:a}=i;let u;return o===s.UpdateTagActionTypes.delete?(u=await a.removeTag(t,n,r),u):(u=await a.addTag(e,r,n),u)})),o=async(e,o,i)=>{if(!(i&&(i.tagsToDelete||i.tagsToAdd)&&i.itemGuid&&i.itemType&&i.allTagItems))return;const{tagsToDelete:a,tagsToAdd:l,itemGuid:c,itemType:d,allTagItems:f}=i;if(a&&a.length>0)for(const t of a){const i=await o.getTagByName(t),a=await o.isTagUpdate(i.path),l={tagGuid:i.path,itemType:d,itemGuid:c};a?await e(n(u(u({},l),{},{updateActionType:s.UpdateTagActionTypes.delete}))):await e(r(l))}if(l&&l.length>0){const r=f.map((e=>e.tagName));for(const o of l){const i={tagName:o,itemGuid:c,itemType:d};r.includes(o)?await e(n(u(u({},i),{},{updateActionType:s.UpdateTagActionTypes.add}))):await e(t(i))}}},a={[`${e}/addTag`]:({payload:e})=>async r=>{r(t(e))},[`${e}/deleteTag`]:({payload:e})=>async t=>{t(r(e))},[`${e}/updateTag`]:({payload:e})=>async t=>{t(n(e))},[`${e}/bulkOperation`]:({payload:e})=>async(t,r,{tagService:n})=>{o(t,n,e)}};return{actions:{getAllItems:()=>(t,r,n)=>{if(!n)return;const{tagService:o}=n,i=o.getAllTags();t({type:`${e}/set`,payload:i})},addTag:t,updateTag:n,deleteTag:r},alias:a,bulkOperationTags:o}}},{"./../action-types/tagActionTypes":729,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453}],739:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.updateTag=r.tagAlias=r.set=r.selectTagsByItemIds=r.selectTagsByItemId=r.selectTagName=r.selectTagIds=r.selectTagEntities=r.selectTagCounts=r.selectTagCount=r.selectTagById=r.selectItemsByTagId=r.selectFavTagCounts=r.selectFavItemsByTagId=r.selectAllTagsByItemType=r.selectAllTags=r.selectAllItemsByItemType=r.getAllTags=r.deleteTag=r.default=r.bulkOperationTags=r.addTag=void 0,e("core-js/modules/es.array.includes.js"),e("core-js/modules/es.array.reduce.js");var o=e("@reduxjs/toolkit"),i=e("./../../action-types/commonActionTypes"),s=n(e("../tagSliceAdapter"));const a=(0,o.createEntityAdapter)({selectId:e=>e.path}),u=a.getInitialState({status:"idle",error:null,itemPath:"",actionType:"",updateActionType:""}),l="tags",c=(0,s.default)(l),{actions:{addTag:d,getAllItems:f,deleteTag:p,updateTag:h},alias:_,bulkOperationTags:E}=c;r.updateTag=h,r.deleteTag=p,r.getAllTags=f,r.addTag=d,r.bulkOperationTags=E,r.tagAlias=_;const g=(0,o.createSlice)({name:l,initialState:u,reducers:{set(e,t){a.setAll(e,t.payload)}},extraReducers(e){e.addCase(d.pending,(e=>{e.error=null,e.status="loading"})).addCase(d.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(d.fulfilled,((e,t)=>{a.addOne(e,t.payload),e.status="success",e.itemPath=t.payload.path,e.error=null,e.actionType=t.type})).addCase(h.pending,(e=>{e.error=null,e.status="loading"})).addCase(h.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(h.fulfilled,((e,t)=>{a.upsertOne(e,t.payload),e.status="success",e.itemPath=t.payload.path,e.error=null,e.actionType=t.type,e.updateActionType=t.meta.arg.updateActionType})).addCase(p.pending,(e=>{e.error=null,e.status="loading"})).addCase(p.rejected,((e,t)=>{var r;e.status="failed",e.error=null!==(r=t.error.message)&&void 0!==r?r:"Unknown error"})).addCase(p.fulfilled,((e,t)=>{a.removeOne(e,t.payload),e.status="success",e.itemPath=t.payload.path,e.error=null,e.actionType=t.type})).addCase(i.resetAllItems,(()=>u)).addCase(i.resetExtendedState,(e=>{e.status="idle",e.error=null,e.actionType="",e.updateActionType=""}))}}),{selectAll:m,selectById:y,selectTotal:S,selectEntities:T,selectIds:A}=a.getSelectors((e=>e.tags));r.selectTagIds=A,r.selectTagEntities=T,r.selectTagCount=S,r.selectTagById=y,r.selectAllTags=m;const b=(e,t)=>(0,o.createSelector)((e=>T(e)),(r=>{const n=r[e];if(!n)return[];return t.reduce(((e,t)=>{const r=n[t]||[];return e.concat(r)}),[])}));r.selectItemsByTagId=b;r.selectTagsByItemId=(e,t)=>(0,o.createSelector)((e=>m(e)),(r=>r.filter((r=>!!(r[t]||[]).find((t=>t.tagItem===e))))));r.selectTagsByItemIds=(e,t)=>(0,o.createSelector)((e=>m(e)),(r=>{const n=[];return r.forEach((r=>{t.forEach((t=>{(r[t]||[]).forEach((t=>{e.includes(t.tagItem)&&!n.includes(r)&&n.push(r)}))}))})),n}));r.selectAllItemsByItemType=e=>(0,o.createSelector)((e=>m(e)),(t=>t.reduce(((t,r)=>{const n=r[e]||[];return t.concat(n)}),[])));r.selectAllTagsByItemType=e=>(0,o.createSelector)((e=>m(e)),(t=>t.filter((t=>e.some((e=>t[e]&&t[e].length>0))))));r.selectTagName=e=>(0,o.createSelector)((e=>T(e)),(t=>{const r=t[e];return r?r.tagName:null}));const O=(e,t)=>(0,o.createSelector)((e=>T(e)),(r=>{const n=r[e];if(!n)return[];return t.reduce(((e,t)=>{const r=(n[t]||[]).filter((e=>e.favourite));return e.concat(r)}),[])}));r.selectFavItemsByTagId=O;r.selectTagCounts=e=>(0,o.createSelector)((e=>m(e)),(e=>e),((t,r)=>{const n={};return t.forEach((t=>{n[t.path]=b(t.path,e)(r).length})),n}));r.selectFavTagCounts=e=>(0,o.createSelector)((e=>m(e)),(e=>e),((t,r)=>{const n={};return t.forEach((t=>{n[t.path]=O(t.path,e)(r).length})),n}));const{set:I}=g.actions;r.set=I;r.default=g.reducer},{"../tagSliceAdapter":738,"./../../action-types/commonActionTypes":723,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224,"core-js/modules/es.array.includes.js":429,"core-js/modules/es.array.reduce.js":431}],740:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.telemetryInfoSlice=r.setTelemetryInfo=r.selectTelemetryInfo=r.default=void 0;var n=e("@reduxjs/toolkit");const o=r.telemetryInfoSlice=(0,n.createSlice)({name:"telemetryInfo",initialState:{value:{telemetryContext:{}}},reducers:{setTelemetryInfo:(e,t)=>{void 0!==t.payload.appName&&(e.value.telemetryContext[t.payload.appName]={screen:t.payload.contextScreen,action:t.payload.contextAction,canSendAppOpenEvent:t.payload.canSendAppOpenEvent})}}}),{setTelemetryInfo:i}=o.actions;r.setTelemetryInfo=i;r.selectTelemetryInfo=e=>e.telemetryInfo.value;r.default=o.reducer},{"@reduxjs/toolkit":224}],741:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.userInfoSlice=r.setInfo=r.selectUserInfo=r.reset=r.default=void 0;var n=e("@reduxjs/toolkit");const o=r.userInfoSlice=(0,n.createSlice)({name:"userInfo",initialState:{value:{}},reducers:{setInfo:(e,t)=>{e.value[t.payload.id]=t.payload.value},reset:e=>{e.value={}}}}),{setInfo:i,reset:s}=o.actions;r.reset=s,r.setInfo=i;r.selectUserInfo=e=>e.userInfo.value;r.default=o.reducer},{"@reduxjs/toolkit":224}],742:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.rootReducer=void 0;var o=e("redux"),i=n(e("../features/logins/loginsSlice")),s=n(e("../features/notes/notesSlice")),a=n(e("../features/creditCards/creditCardsSlice")),u=n(e("../features/bankAccounts/bankAccountsSlice")),l=n(e("../features/addresses/addressesSlice")),c=n(e("../features/contacts/contactsSlice")),d=n(e("../features/userInfo/userInfoSlice")),f=n(e("../features/telemetryInfo/telemetryInfoSlice")),p=n(e("./../features/tags/tagSlice"));r.rootReducer=(0,o.combineReducers)({logins:i.default,notes:s.default,creditCards:a.default,bankAccounts:u.default,addresses:l.default,contacts:c.default,userInfo:d.default,telemetryInfo:f.default,tags:p.default})},{"../features/addresses/addressesSlice":730,"../features/bankAccounts/bankAccountsSlice":731,"../features/contacts/contactsSlice":732,"../features/creditCards/creditCardsSlice":733,"../features/logins/loginsSlice":736,"../features/notes/notesSlice":737,"../features/telemetryInfo/telemetryInfoSlice":740,"../features/userInfo/userInfoSlice":741,"./../features/tags/tagSlice":739,"@babel/runtime/helpers/interopRequireDefault":208,redux:663}],743:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.listenerMiddleware=r.itemCountMiddlewareListener=r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("@reduxjs/toolkit"),s=n(e("remote-redux-devtools")),a=e("@0xbigboss/webext-redux"),u=e("./../features/logins/loginsSlice"),l=e("./../features/bankAccounts/bankAccountsSlice"),c=e("./../features/creditCards/creditCardsSlice"),d=e("./../features/contacts/contactsSlice"),f=e("./../features/notes/notesSlice"),p=e("locale"),h=e("./../features/import/importSlice"),_=e("../reducers"),E=e("./../features/tags/tagSlice");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const y=r.listenerMiddleware=(0,i.createListenerMiddleware)(),S=r.itemCountMiddlewareListener=(0,i.createListenerMiddleware)();r.default=function({devTools:e=!1,initState:t={},thunkExtraArgument:r={},portName:n}){const o=m({intl:(0,p.getLocaleData)()},t),g=m(m(m(m(m(m(m({},u.loginsAlias),f.notesAlias),l.bankAccountsAlias),c.creditCardsAlias),d.contactsAlias),h.importAlias),E.tagAlias),T=(0,i.configureStore)({reducer:_.rootReducer,preloadedState:o,middleware:e=>e({thunk:{extraArgument:r}}).prepend([(0,a.alias)(g),y.middleware,S.middleware]),devTools:!1,enhancers:e?[(0,s.default)({realtime:e,suppressConnectErrors:!1,port:8e3})]:void 0});return(0,a.wrapStore)(T,{portName:n}),T}},{"../reducers":742,"./../features/bankAccounts/bankAccountsSlice":731,"./../features/contacts/contactsSlice":732,"./../features/creditCards/creditCardsSlice":733,"./../features/import/importSlice":735,"./../features/logins/loginsSlice":736,"./../features/notes/notesSlice":737,"./../features/tags/tagSlice":739,"@0xbigboss/webext-redux":198,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@reduxjs/toolkit":224,locale:131,"remote-redux-devtools":672}],744:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("./TelemetryServiceConfiguration");r.default=class{constructor(e){(0,o.default)(this,"errorPrefix","Telemetry :: GlobalEventProperties"),(0,o.default)(this,"errorDescription",{INVALID_PROPERTY:`${this.errorPrefix} - Properties cannot be set with null or undefined`}),this.mixpanel=e,this._defaultProperties={[i.DEFAULT_PROPERTIES.Platform.LANGUAGE]:navigator.language},this.setDefaultEventProperties()}set(e){if(!e)throw Error(this.errorDescription.INVALID_PROPERTY);this.mixpanel.register(e)}setOnce(e){if(!e)throw Error(this.errorDescription.INVALID_PROPERTY);this.mixpanel.register_once(e)}remove(e){if(!e)throw Error(this.errorDescription.INVALID_PROPERTY);this.mixpanel.unregister(e)}setDefaultEventProperties(){this.mixpanel.register(this._defaultProperties)}}},{"./TelemetryServiceConfiguration":747,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208}],745:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.promise.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("./GlobalEventProperties")),s=e("./common/utils");r.default=class{constructor(e){(0,o.default)(this,"errorPrefix","[Telemetry :: Event]"),(0,o.default)(this,"errorDescription",{INVALID_EVENT_NAME:`${this.errorPrefix} Event name cannot be set with null or undefined`,TRACK_EVENT_ERROR:`${this.errorPrefix} Failed to track event`}),this.mixpanel=e,this._globalProperties=new i.default(e)}track(e,t){if(!e)throw Error(this.errorDescription.INVALID_EVENT_NAME);return new Promise(((r,n)=>{try{this.mixpanel.track(e,t,(e=>r(s.TelemetryResponseUtils.formattedResponse(e))))}catch(t){n(Error(`${this.errorDescription.TRACK_EVENT_ERROR} - ${e} :: ${t}`))}}))}async trackOnce(e,t){const r=await this.track(e,t);return r.status&&this.mixpanel.disable([e]),r}trackTime(e){if(!e)throw Error(this.errorDescription.INVALID_EVENT_NAME);this.mixpanel.time_event(e)}get globalProperties(){return this._globalProperties}}},{"./GlobalEventProperties":744,"./common/utils":755,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"core-js/modules/es.promise.js":437}],746:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetryService=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=n(e("mixpanel-browser")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=n(e("./TelemetryEventTracker")),u=e("./TelemetryServiceConfiguration"),l=e("./TelemetryUserProfile");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{logger:f}=s.default;r.TelemetryService=class{constructor(e,t,r){if(!e)throw Error("Key not provided to initialize analytics SDK");const n={debug:!0,ignore_dnt:!0,secure_cookie:!0,property_blacklist:[],persistence:u.TelemetryPersistenceType.LOCAL_STORAGE,batch_flush_interval_ms:2e3,opt_out_tracking_by_default:!1};this.mixpanelInstance=i.default.init(e,d(d({},n),t),r),this._eventTracker=new a.default(this.mixpanelInstance),!1===(null==t?void 0:t.anonymize_user)&&(this._userProfile=new l.TelemetryUserProfile(this.mixpanelInstance))}get userProfile(){return this._userProfile}get eventTracker(){return this._eventTracker}enableTracking(){this.mixpanelInstance.has_opted_in_tracking()?f.debug("DEBUG :: already opted-in for tracking."):this.mixpanelInstance.opt_in_tracking()}disableTracking(){this.mixpanelInstance.has_opted_in_tracking()?this.mixpanelInstance.opt_out_tracking():f.debug("DEBUG :: already opted-out for tracking")}reset(){this.mixpanelInstance.reset(),this._eventTracker.globalProperties.setDefaultEventProperties()}}},{"./TelemetryEventTracker":745,"./TelemetryServiceConfiguration":747,"./TelemetryUserProfile":749,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"mixpanel-browser":652}],747:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetryPersistenceType=r.DEFAULT_PROPERTIES=void 0;r.TelemetryPersistenceType=function(e){return e.COOKIE="cookie",e.LOCAL_STORAGE="localStorage",e}({});var n=function(e){return e.BROWSER="$browser",e.BROWSER_VERSION="$browser_version",e.DEVICE_NAME="$device",e.SCREEN_HEIGHT="$screen_height",e.SCREEN_WIDTH="$screen_width",e.OS="$os",e.LANGUAGE="language",e}(n||{}),o=function(e){return e.CURRENT_URL="$current_url",e.INITIAL_REFERRER="$initial_referrer",e.INITIAL_REFERRING_DOMAIN="$initial_referring_domain",e.REFERRER="referrer",e.REFERRING_DOMAIN="$referring_domain",e.SEARCH_ENGINE="$search_engine",e.SEARCH_KEYWORD="mp_keyword",e}(o||{}),i=function(e){return e.UTM_SOURCE="utm_source",e.UTM_MEDIUM="utm_medium",e.UTM_CAMPAIGN="utm_campaign",e}(i||{}),s=function(e){return e.CITY="$city",e.REGION="$region",e.COUNTRY="mp_country_code",e.GEO_SOURCE="$geo_source",e.TIMEZONE="$timezone",e.LAST_SEEN="$last_seen",e}(s||{});r.DEFAULT_PROPERTIES={Platform:n,BrowsingContext:o,UserProperties:s,UTMParams:i}},{}],748:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sharedTelemetryServiceProvider=void 0;var n=e("./TelemetryService");r.sharedTelemetryServiceProvider=new class{createServiceInstance(e,t,r){return new n.TelemetryService(e,t,r)}}},{"./TelemetryService":746}],749:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetryUserProfile=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("./UserProperties");r.TelemetryUserProfile=class{constructor(e){(0,o.default)(this,"errorPrefix","Telemetry :: UserProfile"),(0,o.default)(this,"errorDescription",{INVALID_USERID:`${this.errorPrefix} - userIdentifier cannot be set with null or undefined`}),this.mixpanel=e,this._properties=new i.UserProperties(this.mixpanel)}track(e){if(!e)throw Error(this.errorDescription.INVALID_USERID);this.mixpanel.identify(e)}get properties(){return this._properties}}},{"./UserProperties":750,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208}],750:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.UserProperties=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=n(e("@babel/runtime/helpers/defineProperty")),i=e("./common/utils");r.UserProperties=class{constructor(e){(0,o.default)(this,"errorPrefix","Telemetry :: UserProperties"),(0,o.default)(this,"errorDescription",{INVALID_PROPERTIES:`${this.errorPrefix} - Properties cannot be set with null or undefined`,UPDATE_PROPERTY_ERROR:`${this.errorPrefix} - Failed to update user property`}),this.mixpanel=e}set(e){return this.updateUserProperties(this.mixpanel.people.set,e)}setOnce(e){return this.updateUserProperties(this.mixpanel.people.set_once,e)}unset(e){return this.updateUserProperties(this.mixpanel.people.unset,e)}increment(e){return this.updateUserProperties(this.mixpanel.people.increment,e)}union(e){return this.updateUserProperties(this.mixpanel.people.union,e)}remove(e){return this.updateUserProperties(this.mixpanel.people.remove,e)}updateUserProperties(e,...t){if("function"==typeof e){const r=e;if(!t[0])throw Error(this.errorDescription.INVALID_PROPERTIES);return new Promise(((e,n)=>{try{r.call(this.mixpanel.people,...t,(t=>e(i.TelemetryResponseUtils.formattedResponse(t))))}catch(e){n(Error(`${this.errorDescription.UPDATE_PROPERTY_ERROR} :: ${e}`))}}))}throw new Error(`${e} is not method in mixpanel`)}}},{"./common/utils":755,"@babel/runtime/helpers/defineProperty":207,"@babel/runtime/helpers/interopRequireDefault":208,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453}],751:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],752:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],753:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./TelemetryProperties.types");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=e("./TelemetryResponse.types");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))}))},{"./TelemetryProperties.types":751,"./TelemetryResponse.types":752}],754:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetryResponseUtils=void 0;r.TelemetryResponseUtils=class{static formattedResponse(e){return 0===e||1===e?{status:e,error:null}:e}}},{}],755:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./TelemetryResponseUtils");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))},{"./TelemetryResponseUtils":754}],756:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ITelemetryService:!0,IGlobalEventProperties:!0,ITelemetryEventTracker:!0,ITelemetryUserProfile:!0};Object.defineProperty(r,"IGlobalEventProperties",{enumerable:!0,get:function(){return s.IGlobalEventProperties}}),Object.defineProperty(r,"ITelemetryEventTracker",{enumerable:!0,get:function(){return a.ITelemetryEventTracker}}),Object.defineProperty(r,"ITelemetryService",{enumerable:!0,get:function(){return i.ITelemetryService}}),Object.defineProperty(r,"ITelemetryUserProfile",{enumerable:!0,get:function(){return u.ITelemetryUserProfile}}),r.default=void 0;var o=e("./TelemetryServiceProvider"),i=e("./TelemetryService"),s=e("./GlobalEventProperties"),a=e("./TelemetryEventTracker"),u=e("./TelemetryUserProfile"),l=e("./TelemetryServiceConfiguration");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===l[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}}))}));var c=e("./common/types");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}}))}));r.default=o.sharedTelemetryServiceProvider},{"./GlobalEventProperties":744,"./TelemetryEventTracker":745,"./TelemetryService":746,"./TelemetryServiceConfiguration":747,"./TelemetryServiceProvider":748,"./TelemetryUserProfile":749,"./common/types":753}],757:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),i=o,s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=e("./vaultConstants");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}const{isNil:l,isntNil:c,isString:d}=s.default.utils,{vaultManager:f}=i,p=[a.ItemType.Login,a.ItemType.CreditCard,a.ItemType.BankAccount,a.ItemType.Note,a.ItemType.Identity];const h=new class{async addTag(e,t,r){if(l(e)||l(t)||l(r))throw new Error("Invalid arguments to addTag");let n=await this.getTagByName(e);if(l(n)){const t=f.getItemManager(a.ItemManager.TAG_MANAGER),r=new i.Tag;r.initFromDictionary(JSON.parse(r.serializeNode(!1,!1))),r.setTagName(e),await t.addTag(r,!0)}n=await this.getTagByName(e);for(const i in n){var o;if(n.hasOwnProperty(i))if((null===(o=n)||void 0===o?void 0:o.tagName)===e){var s;const e=null===(s=n)||void 0===s?void 0:s.path;await this.addItemToTag(e,r,t);break}}const u=Object.values(n[r]).map((e=>JSON.parse(e.serializeNode(!1,!1)))),c=JSON.parse(n.serializeNode(!1,!1));return c[r]=u,c}async getTagByName(e){if(l(e)||!d(e))throw new Error("Invalid arguments to addTag");const t=f.getItemManager(a.ItemManager.TAG_MANAGER).getAllTags();for(const r in t){const n=t[r],i=null==n?void 0:n.getTagName();if(n instanceof o.Tag&&c(i)&&""!==i&&i===e)return t[r]}}async addItemToTag(e,t,r){if(l(r)||l(t)||l(e))throw new Error("Invalid arguments to addItemToTag");const n=f.getItemManager(a.ItemManager.TAG_MANAGER),o=await n.getTag(e);if(l(o))throw new Error("tagGuid doesnt exists");await n.addItemToTag(e,t,r,!0)}getTagsByItem(e,t){if(l(e)||l(t))throw new Error("Invalid arguments to getTagsByItemType");return f.getItemManager(a.ItemManager.TAG_MANAGER).getTagsByItemId(e,t)}getTag(e){return f.getItemManager(a.ItemManager.TAG_MANAGER).getTag(e)}getAllTags(){try{const e=f.getItemManager(a.ItemManager.TAG_MANAGER).getAllItems(),t=[];for(const r in e){const n=e[r],i=null==n?void 0:n.getTagName();if(n instanceof o.Tag&&c(i)&&""!==i){const e=JSON.parse(n.serializeNode(!1,!1));let r=!1;p.forEach((t=>{const o=Object.values(n[t]||{}).map((e=>JSON.parse(e.serializeNode(!1,!1))));e[t]=o,r=!0})),r&&t.push(e)}}return t}catch(e){s.default.logger.error("Error in acessing getAllTags")}}async getItemsByTagAndTypes(e,t){if(l(e)||!Array.isArray(t)||t.some(l))throw new Error("Invalid arguments to getItemsByTagAndTypes");const r=f.getItemManager(a.ItemManager.TAG_MANAGER),n=await r.getTag(e);if(l(n))throw new Error("Tag does not exist");const o={};for(const e of t){const t=n[e];t&&(o[e]=Object.values(t).map((e=>JSON.parse(e.serializeNode(!1,!1)))))}return o}getItemsByTagId(e,t){let r={};r=f.getItemManager(a.ItemManager.TAG_MANAGER).getItemsByTagId(e,t);return Object.values(r).map((e=>JSON.parse(e.serializeNode(!1,!1))))}getTagsByItemId(e,t){let r={};r=f.getItemManager(a.ItemManager.TAG_MANAGER).getTagsByItemId(e,t);return Object.values(r).map((e=>JSON.parse(e.serializeNode(!1,!1))))}async deleteTag(e,t,r){if(l(e)||l(t)||l(r))throw new Error("Invalid arguments to deleteTagItem");const n=f.getItemManager(a.ItemManager.TAG_MANAGER);return await n.deleteTagItem(e,t,r),e}async removeTag(e,t,r){if(l(e)||l(t)||l(r))throw new Error("Invalid arguments to removeTag");const n=f.getItemManager(a.ItemManager.TAG_MANAGER);await n.deleteTagItem(e,t,r);const o=this.getAllTags();return null==o?void 0:o.find((t=>t.path===e))}async isTagUpdate(e){const t=f.getItemManager(a.ItemManager.TAG_MANAGER),r=await t.getTag(e);let n=!1,o=0;if(r)return p.forEach((e=>{var t;r[e]&&r[e].length>1?n=!0:(null===(t=r[e])||void 0===t?void 0:t.length)>0&&(o+=1)})),n||o>1}};r.default=h},{"./vaultConstants":758,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453}],758:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ItemType=r.ItemManager=void 0;r.ItemType=function(e){return e.Login="login",e.CreditCard="creditCard",e.BankAccount="bankAccount",e.Note="note",e.Address="address",e.Identity="identity",e.Contact="contact",e.BulkUpload="bulkUpload",e}({}),r.ItemManager=function(e){return e.LOGIN_MANAGER="LoginManager",e.NOTE_MANAGER="NoteManager",e.CREDIT_CARD_MANAGER="CreditCardManager",e.ADDRESS_MANAGER="AddressManager",e.BANK_ACCOUNT_MANAGER="BankAccountManager",e.IDENTITY_MANAGER="IdentityManager",e.CONTACT_MANAGER="ContactManager",e.BULK_UPLOAD_MANAGER="BulkUploadManager",e.TAG_MANAGER="TagManager",e}({})},{}],759:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("core-js/modules/es.array.iterator.js"),e("core-js/modules/es.promise.js"),e("core-js/modules/web.dom-collections.iterator.js");var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("@browser-services/vault-sdk/dist/release/VaultSDK.min.js")),i=n(e("feature/wax/waxStorageSettings")),s=n(e("@browser-services/bfw/dist/release/Firefox/Bfw.min.js")),a=e("./vaultConstants");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}const{isSuccessCode:l}=s.default.utils,{vaultManager:c}=o;const d=new class{getItems(e){const t=this.getItemManager(e).getAllItems();return Object.values(t).map((e=>JSON.parse(e.serializeNode(!1,!1))))}getItemManager(e){let t=null;switch(e){case a.ItemType.Login:return t=c.getItemManager(a.ItemManager.LOGIN_MANAGER),t;case a.ItemType.CreditCard:return t=c.getItemManager(a.ItemManager.CREDIT_CARD_MANAGER),t;case a.ItemType.BankAccount:return t=c.getItemManager(a.ItemManager.BANK_ACCOUNT_MANAGER),t;case a.ItemType.Address:return t=c.getItemManager(a.ItemManager.ADDRESS_MANAGER),t;case a.ItemType.Contact:return t=c.getItemManager(a.ItemManager.CONTACT_MANAGER),t;case a.ItemType.Note:return t=c.getItemManager(a.ItemManager.NOTE_MANAGER),t;case a.ItemType.BulkUpload:return t=c.getItemManager(a.ItemManager.BULK_UPLOAD_MANAGER),t;default:throw new Error("Cannot pass a view type that isn't current supported")}}async addItem(e,t){const r=this.getItemManager(t);return await r.addItem(this.convertToVaultItem(e,t),!0),e}convertToVaultItem(e,t){let r;switch(t){case a.ItemType.Login:r=new o.Login;break;case a.ItemType.CreditCard:r=new o.CreditCard;break;case a.ItemType.BankAccount:r=new o.BankAccount;break;case a.ItemType.Address:r=new o.Address;break;case a.ItemType.Contact:r=new o.Contact;break;case a.ItemType.Note:r=new o.Note;break;default:throw new Error("Unsupported itemType")}return r.initFromDictionary(e),r}async updateItem(e,t){const r=this.getItemManager(t),n=e.path,o=r.getItem(n);let s=null;r.name===a.ItemManager.LOGIN_MANAGER&&(s=o.getLoginURL());return o.updateFromDictionary(e)&&await r.updateItem(o,!0),r.name===a.ItemManager.LOGIN_MANAGER&&s!==(null==e?void 0:e.loginURL)&&i.default.updateStorageAfterVaultSync({url:s,loginId:n}),e}async updateItems(e,t){const r=this.getItemManager(t),n=[];return e.forEach((e=>{const t=e.path,o=r.getItem(t);o.updateFromDictionary(e),n.push(o)})),n.length>0&&await r.updateItems(n,!0),e}async addUpdateLoginItems(e,t){const r=this.getItemManager(t),n=[];let o=null;if(e.forEach((e=>{const t=e.path;if(n.length>0){var i;const t=null===(i=o)||void 0===i?void 0:i.clone();t.updateFromDictionary(e),n.push(t)}else{const i=r.getItem(t);i.updateFromDictionary(e),n.push(i),o=i.clone()}})),n.length>0){const e=await r.addUpdateItems(n,!0);if(!l(e.status))return Promise.reject(n)}return e}async deleteItem(e,t){const r=this.getItemManager(t),n=r.getItem(e);r.name===a.ItemManager.LOGIN_MANAGER&&i.default.updateStorageAfterVaultSync({url:null==n?void 0:n.getLoginURL(),loginId:e}),await r.deleteItem(e,!0)}async bulkUpload(e){const t=this.getItemManager(a.ItemType.BulkUpload),r=[],n=new Map;return e.logins&&e.logins.forEach((e=>r.push(this.convertToVaultItem(e,a.ItemType.Login)))),e.bankAccounts&&e.bankAccounts.forEach((e=>r.push(this.convertToVaultItem(e,a.ItemType.BankAccount)))),e.addressess&&e.addressess.forEach((e=>{const t=this.convertToVaultItem(e,a.ItemType.Contact);r.push(t.identityItem),r.push(t.addressItem),n.set(t.identityItem.cardName,t.identityItem.getPath())})),e.cards&&e.cards.forEach((e=>{const t=this.convertToVaultItem(e,a.ItemType.CreditCard);if(e.identityCard&&e.identityCard.trim().length>0){const r=n.get(e.identityCard);r&&(t.identityCard=r)}r.push(t)})),e.notes&&e.notes.forEach((e=>r.push(this.convertToVaultItem(e,a.ItemType.Note)))),await t.addItems(r,!0),e}};r.default=d},{"./vaultConstants":758,"@babel/runtime/helpers/interopRequireDefault":208,"@browser-services/bfw/dist/release/Firefox/Bfw.min.js":211,"@browser-services/vault-sdk/dist/release/VaultSDK.min.js":215,"core-js/modules/es.array.iterator.js":430,"core-js/modules/es.promise.js":437,"core-js/modules/web.dom-collections.iterator.js":453,"feature/wax/waxStorageSettings":129}]},{},[12]);
//# sourceMappingURL=background.js.map
