{
  "version": 3,
  "sources": ["../../../../node_modules/webextension-polyfill/dist/browser-polyfill.js", "../../../../node_modules/dompurify/src/utils.js", "../../../../node_modules/dompurify/src/tags.js", "../../../../node_modules/dompurify/src/attrs.js", "../../../../node_modules/dompurify/src/regexp.js", "../../../../node_modules/dompurify/src/purify.js", "../../../../src/js/Core/GameId/GameId.ts", "../../../../src/js/Core/GameId/AppId.ts", "../../../../src/localization/compiled/_strings.ts", "../../../../src/js/Core/Info.ts", "../../../../src/js/Core/Storage/SyncedStorage.ts", "../../../../src/js/Core/Storage/Storage.ts", "../../../../src/js/Options/Data/Settings.ts", "../../../../src/js/Core/ExtensionResources.ts", "../../../../src/js/Core/Localization/Language.ts", "../../../../src/js/Core/Background.ts", "../../../../src/js/Core/Errors/ErrorParser.ts", "../../../../src/js/Content/Modules/Facades/SteamStoreApiFacade.ts", "../../../../src/js/Core/Localization/Localization.ts", "../../../../src/js/Content/Modules/Context/Feature.ts", "../../../../src/js/Core/Html/Html.ts", "../../../../src/js/Core/Storage/LocalStorage.ts", "../../../../src/js/Content/Modules/Context/ContextType.ts", "../../../../src/js/Content/Modules/DOMHelper.ts", "../../../../src/js/Content/Features/Common/FMediaExpander.ts", "../../../../node_modules/svelte/src/runtime/internal/utils.js", "../../../../node_modules/svelte/src/runtime/internal/environment.js", "../../../../node_modules/svelte/src/runtime/internal/loop.js", "../../../../node_modules/svelte/src/runtime/internal/globals.js", "../../../../node_modules/svelte/src/runtime/internal/ResizeObserverSingleton.js", "../../../../node_modules/svelte/src/runtime/internal/dom.js", "../../../../node_modules/svelte/src/runtime/internal/style_manager.js", "../../../../node_modules/svelte/src/runtime/internal/lifecycle.js", "../../../../node_modules/svelte/src/runtime/internal/scheduler.js", "../../../../node_modules/svelte/src/runtime/internal/transitions.js", "../../../../node_modules/svelte/src/runtime/internal/await_block.js", "../../../../node_modules/svelte/src/runtime/internal/each.js", "../../../../node_modules/svelte/src/shared/boolean_attributes.js", "../../../../node_modules/svelte/src/runtime/internal/Component.js", "../../../../node_modules/svelte/src/shared/version.js", "../../../../node_modules/svelte/src/runtime/internal/disclose-version/index.js", "../../../../src/js/Content/Features/Store/Common/Customizer/Customizer.svelte", "../../../../src/js/Content/Features/Store/Common/FCustomizer.ts", "../../../../src/js/Content/Features/Store/Common/FDRMWarnings.svelte", "../../../../src/js/Content/Features/Store/Common/FDRMWarnings.ts", "../../../../src/js/Core/Html/HtmlParser.ts", "../../../../src/js/Core/Currencies.ts", "../../../../src/js/Content/Modules/Facades/AugmentedSteamApiFacade.ts", "../../../../src/js/Content/Modules/Currency/CurrencyManager.ts", "../../../../src/js/Content/Modules/Currency/Price.ts", "../../../../src/js/Content/externalLink.ts", "../../../../src/js/Content/Modules/Prices/BundleOverview.svelte", "../../../../src/js/Content/Modules/Prices/PriceWithAlt.svelte", "../../../../src/js/Content/Modules/Prices/PriceOverview.svelte", "../../../../src/js/Content/Modules/Facades/ITADApiFacade.ts", "../../../../src/js/Content/Modules/Prices/Prices.ts", "../../../../src/js/Content/Features/Store/Common/FITADPrices.ts", "../../../../src/js/Icons/FlagIcon.svelte", "../../../../src/js/Content/Features/Store/Common/FRegionalPricing.svelte", "../../../../src/js/Core/Errors/Errors.ts", "../../../../src/js/Content/Modules/RequestData.ts", "../../../../src/js/Content/Features/Store/Common/FRegionalPricing.ts", "../../../../src/js/Content/Features/Store/App/FAchievementBar.svelte", "../../../../src/js/Content/Modules/SteamApi.ts", "../../../../src/js/Content/Features/Store/App/FAchievementBar.ts", "../../../../src/js/Content/Features/Store/App/FAStatsLink.ts", "../../../../src/js/Content/Features/Store/App/FBadgeProgress.svelte", "../../../../src/js/Content/Modules/Facades/SteamCommunityApiFacade.ts", "../../../../src/js/Content/Features/Store/App/FBadgeProgress.ts", "../../../../src/js/Content/Features/Store/App/FDemoAbovePurchase.ts", "../../../../src/js/Content/Features/Store/App/FDLCCheckboxes.ts", "../../../../src/js/Content/Features/Store/App/FDLCInfo.svelte", "../../../../src/js/Content/Features/Store/App/FDLCInfo.ts", "../../../../src/js/Content/Features/Store/App/FFamilySharingNotice.svelte", "../../../../src/js/Content/Features/Store/App/FFamilySharingNotice.ts", "../../../../src/js/Content/Features/Store/App/FForceMP4.ts", "../../../../src/js/Content/Features/Store/App/FFullscreenScreenshotView.ts", "../../../../src/js/Core/Utils/TimeUtils.ts", "../../../../src/js/Content/Features/Store/App/FHDPlayer.ts", "../../../../src/js/Content/Features/Store/App/FHideReportedTags.ts", "../../../../src/js/Content/Features/Store/App/FHowLongToBeat.svelte", "../../../../src/js/Content/Features/Store/App/FHowLongToBeat.ts", "../../../../src/js/Content/Features/Store/App/FMetacriticUserScore.ts", "../../../../src/js/Content/Features/Store/App/FNewQueue.ts", "../../../../src/js/Content/Features/Store/App/FOpenCritic.ts", "../../../../src/js/Content/Features/Store/App/FOwnedActionsButtons.ts", "../../../../src/js/Content/Features/Store/App/Icons/RedeemedIcon.svelte", "../../../../src/js/Content/Features/Store/App/Icons/RedeemableIcon.svelte", "../../../../src/js/Content/Features/Store/App/FOwnedElsewhere.svelte", "../../../../src/js/Content/Features/Store/App/FOwnedElsewhere.ts", "../../../../src/js/Content/Features/Store/App/FPackageInfoButton.ts", "../../../../src/js/Content/Features/Store/App/FPackBreakdown.ts", "../../../../src/js/Content/Features/Store/App/FPatchHighlightPlayer.ts", "../../../../src/js/Content/Features/Store/App/FPlayers.svelte", "../../../../src/js/Content/Features/Store/App/FPlayers.ts", "../../../../src/js/Core/Utils/StringUtils.ts", "../../../../src/js/Content/Features/Store/App/FPurchaseDate.ts", "../../../../src/js/Content/Features/Store/App/FRemoveBroadcasts.ts", "../../../../src/js/Content/Features/Store/App/FRemoveDupeScreenshots.ts", "../../../../src/js/Content/Modules/Messaging/Messenger.ts", "../../../../src/js/Content/Modules/Facades/SteamFacade.ts", "../../../../src/js/Content/Features/Store/App/FReplaceDevPubLinks.ts", "../../../../src/js/Content/Features/Store/App/FReviewToggleButton.svelte", "../../../../src/js/Content/Features/Store/App/FReviewToggleButton.ts", "../../../../src/js/Content/Features/Store/App/FSaveReviewFilters.ts", "../../../../src/js/Content/Modules/Facades/InventoryApiFacade.ts", "../../../../src/js/Content/Features/Store/App/FShowCoupon.ts", "../../../../src/js/Content/Features/Store/App/FSteamPeek.ts", "../../../../src/js/Content/Features/Store/App/FSupportInfo.ts", "../../../../src/js/Content/Modules/UserNotes/OutOfCapacityError.ts", "../../../../src/js/Content/Modules/UserNotes/CapacityInfo.ts", "../../../../src/js/Content/Modules/UserNotes/Adapters/SyncedStorageAdapter.ts", "../../../../src/js/Content/Modules/UserNotes/Adapters/IdbAdapter.ts", "../../../../src/js/Core/Asserts/AssertNever.ts", "../../../../src/js/Content/Modules/UserNotes/UserNotesAdapter.ts", "../../../../src/js/Content/Features/Store/Common/UserNotes/NotesForm.svelte", "../../../../src/js/Core/Modals/CustomModal.ts", "../../../../node_modules/svelte/src/runtime/transition/index.js", "../../../../src/js/Core/Modals/Contained/ModalButton.svelte", "../../../../src/js/Core/Modals/Contained/Modal.svelte", "../../../../src/js/Content/Modules/UserNotes/Modals/NoteEditModal.svelte", "../../../../src/js/Core/Modals/ConfirmDialog.ts", "../../../../src/js/Content/Features/Store/Common/UserNotes/UserNotes.ts", "../../../../src/js/Content/Features/Store/App/FUserNotes.ts", "../../../../src/js/Content/Features/Store/App/FWidescreenCertification.ts", "../../../../src/js/Content/Features/Store/Common/ExtraLinks/ExtraLink.svelte", "../../../../src/js/Content/Features/Common/CommonExtraLinks.svelte", "../../../../src/js/Core/Utils/UrlUtils.ts", "../../../../src/js/Content/Features/Store/Common/ExtraLinks/AppLinks.svelte", "../../../../src/js/Content/Features/Store/Common/FExtraLinksApp.ts", "../../../../src/js/Content/Features/Store/Common/FExtraLinksAppError.ts", "../../../../src/js/Content/Modules/Data/DynamicStore.ts", "../../../../src/js/Core/GameId/SubId.ts", "../../../../src/js/Core/GameId/BundleId.ts", "../../../../src/js/Core/Sync/ESyncStatus.ts", "../../../../src/js/Core/Sync/SyncIndicator.svelte", "../../../../src/js/Content/Modules/Widgets/ITADSync/ITADSyncStatus.svelte", "../../../../src/js/Content/Modules/Widgets/ITADSync/ITADSyncMenu.svelte", "../../../../src/js/Content/Modules/ITAD.ts", "../../../../src/js/Content/Modules/Highlights/HighlightsTagsUtils.ts", "../../../../src/js/Content/Features/Common/FHighlightsTags.ts", "../../../../src/js/Content/Features/Store/Common/FAlternativeLinuxIcon.ts", "../../../../src/js/Content/Features/Store/Common/FSkipGotSteamDialog.ts", "../../../../src/js/Content/Features/Store/Common/FHorizontalScrolling.ts", "../../../../src/js/Content/Features/Common/FHideTrademarks.ts", "../../../../src/js/Content/Features/Common/FDisableLinkFilter.ts", "../../../../src/js/Content/Features/Common/FKeepSSACheckboxState.ts", "../../../../src/js/Content/Features/Common/FDefaultCommunityTab.ts", "../../../../src/js/Content/Modules/Context/Context.ts", "../../../../src/js/Content/Modules/EarlyAccess/EarlyAccess.svelte", "../../../../src/js/Content/Modules/EarlyAccess/EarlyAccessUtils.ts", "../../../../src/js/Content/Features/Common/FEarlyAccess.ts", "../../../../src/js/Content/Features/Common/CBase.ts", "../../../../src/js/Content/Features/Store/Common/CStoreBase.ts", "../../../../src/js/Content/Features/Store/App/FWaitlistDropdown.ts", "../../../../src/js/Content/Features/Store/App/FHighlightTitle.ts", "../../../../src/js/Content/Features/Store/App/CApp.ts", "../../../../src/js/bootstrapDomPurify.ts", "../../../../src/js/config.ts", "../../../../src/js/Core/Environment.ts", "../../../../src/js/Core/Storage/CookieReader.ts", "../../../../src/js/Core/Localization/LanguageFactory.ts", "../../../../src/js/Core/User/LegacyUser.ts", "../../../../src/js/Core/User/ReactUser.ts", "../../../../src/js/Core/User/UserFactory.ts", "../../../../src/js/Core/AppConfig/AppConfig.ts", "../../../../src/js/Core/AppConfig/AppConfigFactory.ts", "../../../../src/js/Content/Features/Page.ts", "../../../../src/js/Content/Modules/Widgets/ProgressBar.svelte", "../../../../src/js/Content/Steam/ReactDOM.ts", "../../../../src/js/Content/Modules/Widgets/ProgressBar.ts", "../../../../src/js/Content/Modules/Facades/CacheApiFacade.ts", "../../../../src/js/Content/Modules/Widgets/AugmentedSteam/AugmentedSteamMenu.svelte", "../../../../src/js/Content/Modules/Widgets/AugmentedSteam/Components/Warning.svelte", "../../../../src/js/Content/Modules/Widgets/AugmentedSteam/Components/LoginWarning.svelte", "../../../../src/js/Content/Modules/Widgets/AugmentedSteam/Components/LanguageWarning.svelte", "../../../../src/js/Content/Modules/Widgets/AugmentedSteam/AugmentedSteamWarnings.svelte", "../../../../src/js/Content/Modules/Widgets/AugmentedSteam/BackToTop.svelte", "../../../../src/js/Content/Modules/AugmentedSteam.ts", "../../../../src/js/Core/Version.ts", "../../../../src/js/Core/Update/Changelog.svelte", "../../../../src/js/Core/Update/ChangelogHandler.ts", "../../../../src/js/Content/Features/LegacyPage.ts", "../../../../src/js/Content/Features/StorePage.ts", "../../../../src/js/Content/Features/Store/App/PApp.ts"],
  "sourcesContent": ["/* webextension-polyfill - v0.10.0 - Fri Aug 12 2022 19:42:44 */\n/* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */\n/* vim: set sts=2 sw=2 et tw=80: */\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\"use strict\";\n\nif (!globalThis.chrome?.runtime?.id) {\n  throw new Error(\"This script should only be loaded in a browser extension.\");\n}\n\nif (typeof globalThis.browser === \"undefined\" || Object.getPrototypeOf(globalThis.browser) !== Object.prototype) {\n  const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = \"The message port closed before a response was received.\";\n\n  // Wrapping the bulk of this polyfill in a one-time-use function is a minor\n  // optimization for Firefox. Since Spidermonkey does not fully parse the\n  // contents of a function until the first time it's called, and since it will\n  // never actually need to be called, this allows the polyfill to be included\n  // in Firefox nearly for free.\n  const wrapAPIs = extensionAPIs => {\n    // NOTE: apiMetadata is associated to the content of the api-metadata.json file\n    // at build time by replacing the following \"include\" with the content of the\n    // JSON file.\n    const apiMetadata = {\n      \"alarms\": {\n        \"clear\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"clearAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"get\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"bookmarks\": {\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getChildren\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getRecent\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getSubTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTree\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"browserAction\": {\n        \"disable\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"enable\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"getBadgeBackgroundColor\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getBadgeText\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"openPopup\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"setBadgeBackgroundColor\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setBadgeText\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"setPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"browsingData\": {\n        \"remove\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"removeCache\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeCookies\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeDownloads\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeFormData\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeHistory\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeLocalStorage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removePasswords\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removePluginData\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"settings\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"commands\": {\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"contextMenus\": {\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"cookies\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAllCookieStores\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"set\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"devtools\": {\n        \"inspectedWindow\": {\n          \"eval\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2,\n            \"singleCallbackArg\": false\n          }\n        },\n        \"panels\": {\n          \"create\": {\n            \"minArgs\": 3,\n            \"maxArgs\": 3,\n            \"singleCallbackArg\": true\n          },\n          \"elements\": {\n            \"createSidebarPane\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          }\n        }\n      },\n      \"downloads\": {\n        \"cancel\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"download\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"erase\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFileIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"open\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"pause\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeFile\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"resume\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"show\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"extension\": {\n        \"isAllowedFileSchemeAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"isAllowedIncognitoAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"history\": {\n        \"addUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"deleteRange\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getVisits\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"i18n\": {\n        \"detectLanguage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAcceptLanguages\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"identity\": {\n        \"launchWebAuthFlow\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"idle\": {\n        \"queryState\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"management\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"setEnabled\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"uninstallSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        }\n      },\n      \"notifications\": {\n        \"clear\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPermissionLevel\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"pageAction\": {\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"hide\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"setPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"setTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        },\n        \"show\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1,\n          \"fallbackToNoCallback\": true\n        }\n      },\n      \"permissions\": {\n        \"contains\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"request\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"runtime\": {\n        \"getBackgroundPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPlatformInfo\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"openOptionsPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"requestUpdateCheck\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"sendMessage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 3\n        },\n        \"sendNativeMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"setUninstallURL\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"sessions\": {\n        \"getDevices\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getRecentlyClosed\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"restore\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        }\n      },\n      \"storage\": {\n        \"local\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"managed\": {\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"sync\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        }\n      },\n      \"tabs\": {\n        \"captureVisibleTab\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"detectLanguage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"discard\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"duplicate\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"executeScript\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getZoom\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getZoomSettings\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"goBack\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"goForward\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"highlight\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"insertCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"query\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"reload\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"sendMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 3\n        },\n        \"setZoom\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"setZoomSettings\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"update\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        }\n      },\n      \"topSites\": {\n        \"get\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"webNavigation\": {\n        \"getAllFrames\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFrame\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"webRequest\": {\n        \"handlerBehaviorChanged\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"windows\": {\n        \"create\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getLastFocused\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      }\n    };\n\n    if (Object.keys(apiMetadata).length === 0) {\n      throw new Error(\"api-metadata.json has not been included in browser-polyfill\");\n    }\n\n    /**\n     * A WeakMap subclass which creates and stores a value for any key which does\n     * not exist when accessed, but behaves exactly as an ordinary WeakMap\n     * otherwise.\n     *\n     * @param {function} createItem\n     *        A function which will be called in order to create the value for any\n     *        key which does not exist, the first time it is accessed. The\n     *        function receives, as its only argument, the key being created.\n     */\n    class DefaultWeakMap extends WeakMap {\n      constructor(createItem, items = undefined) {\n        super(items);\n        this.createItem = createItem;\n      }\n\n      get(key) {\n        if (!this.has(key)) {\n          this.set(key, this.createItem(key));\n        }\n\n        return super.get(key);\n      }\n    }\n\n    /**\n     * Returns true if the given object is an object with a `then` method, and can\n     * therefore be assumed to behave as a Promise.\n     *\n     * @param {*} value The value to test.\n     * @returns {boolean} True if the value is thenable.\n     */\n    const isThenable = value => {\n      return value && typeof value === \"object\" && typeof value.then === \"function\";\n    };\n\n    /**\n     * Creates and returns a function which, when called, will resolve or reject\n     * the given promise based on how it is called:\n     *\n     * - If, when called, `chrome.runtime.lastError` contains a non-null object,\n     *   the promise is rejected with that value.\n     * - If the function is called with exactly one argument, the promise is\n     *   resolved to that value.\n     * - Otherwise, the promise is resolved to an array containing all of the\n     *   function's arguments.\n     *\n     * @param {object} promise\n     *        An object containing the resolution and rejection functions of a\n     *        promise.\n     * @param {function} promise.resolve\n     *        The promise's resolution function.\n     * @param {function} promise.reject\n     *        The promise's rejection function.\n     * @param {object} metadata\n     *        Metadata about the wrapped method which has created the callback.\n     * @param {boolean} metadata.singleCallbackArg\n     *        Whether or not the promise is resolved with only the first\n     *        argument of the callback, alternatively an array of all the\n     *        callback arguments is resolved. By default, if the callback\n     *        function is invoked with only a single argument, that will be\n     *        resolved to the promise, while all arguments will be resolved as\n     *        an array if multiple are given.\n     *\n     * @returns {function}\n     *        The generated callback function.\n     */\n    const makeCallback = (promise, metadata) => {\n      return (...callbackArgs) => {\n        if (extensionAPIs.runtime.lastError) {\n          promise.reject(new Error(extensionAPIs.runtime.lastError.message));\n        } else if (metadata.singleCallbackArg ||\n                   (callbackArgs.length <= 1 && metadata.singleCallbackArg !== false)) {\n          promise.resolve(callbackArgs[0]);\n        } else {\n          promise.resolve(callbackArgs);\n        }\n      };\n    };\n\n    const pluralizeArguments = (numArgs) => numArgs == 1 ? \"argument\" : \"arguments\";\n\n    /**\n     * Creates a wrapper function for a method with the given name and metadata.\n     *\n     * @param {string} name\n     *        The name of the method which is being wrapped.\n     * @param {object} metadata\n     *        Metadata about the method being wrapped.\n     * @param {integer} metadata.minArgs\n     *        The minimum number of arguments which must be passed to the\n     *        function. If called with fewer than this number of arguments, the\n     *        wrapper will raise an exception.\n     * @param {integer} metadata.maxArgs\n     *        The maximum number of arguments which may be passed to the\n     *        function. If called with more than this number of arguments, the\n     *        wrapper will raise an exception.\n     * @param {boolean} metadata.singleCallbackArg\n     *        Whether or not the promise is resolved with only the first\n     *        argument of the callback, alternatively an array of all the\n     *        callback arguments is resolved. By default, if the callback\n     *        function is invoked with only a single argument, that will be\n     *        resolved to the promise, while all arguments will be resolved as\n     *        an array if multiple are given.\n     *\n     * @returns {function(object, ...*)}\n     *       The generated wrapper function.\n     */\n    const wrapAsyncFunction = (name, metadata) => {\n      return function asyncFunctionWrapper(target, ...args) {\n        if (args.length < metadata.minArgs) {\n          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        if (args.length > metadata.maxArgs) {\n          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        return new Promise((resolve, reject) => {\n          if (metadata.fallbackToNoCallback) {\n            // This API method has currently no callback on Chrome, but it return a promise on Firefox,\n            // and so the polyfill will try to call it with a callback first, and it will fallback\n            // to not passing the callback if the first call fails.\n            try {\n              target[name](...args, makeCallback({resolve, reject}, metadata));\n            } catch (cbError) {\n              console.warn(`${name} API method doesn't seem to support the callback parameter, ` +\n                           \"falling back to call it without a callback: \", cbError);\n\n              target[name](...args);\n\n              // Update the API method metadata, so that the next API calls will not try to\n              // use the unsupported callback anymore.\n              metadata.fallbackToNoCallback = false;\n              metadata.noCallback = true;\n\n              resolve();\n            }\n          } else if (metadata.noCallback) {\n            target[name](...args);\n            resolve();\n          } else {\n            target[name](...args, makeCallback({resolve, reject}, metadata));\n          }\n        });\n      };\n    };\n\n    /**\n     * Wraps an existing method of the target object, so that calls to it are\n     * intercepted by the given wrapper function. The wrapper function receives,\n     * as its first argument, the original `target` object, followed by each of\n     * the arguments passed to the original method.\n     *\n     * @param {object} target\n     *        The original target object that the wrapped method belongs to.\n     * @param {function} method\n     *        The method being wrapped. This is used as the target of the Proxy\n     *        object which is created to wrap the method.\n     * @param {function} wrapper\n     *        The wrapper function which is called in place of a direct invocation\n     *        of the wrapped method.\n     *\n     * @returns {Proxy<function>}\n     *        A Proxy object for the given method, which invokes the given wrapper\n     *        method in its place.\n     */\n    const wrapMethod = (target, method, wrapper) => {\n      return new Proxy(method, {\n        apply(targetMethod, thisObj, args) {\n          return wrapper.call(thisObj, target, ...args);\n        },\n      });\n    };\n\n    let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n\n    /**\n     * Wraps an object in a Proxy which intercepts and wraps certain methods\n     * based on the given `wrappers` and `metadata` objects.\n     *\n     * @param {object} target\n     *        The target object to wrap.\n     *\n     * @param {object} [wrappers = {}]\n     *        An object tree containing wrapper functions for special cases. Any\n     *        function present in this object tree is called in place of the\n     *        method in the same location in the `target` object tree. These\n     *        wrapper methods are invoked as described in {@see wrapMethod}.\n     *\n     * @param {object} [metadata = {}]\n     *        An object tree containing metadata used to automatically generate\n     *        Promise-based wrapper functions for asynchronous. Any function in\n     *        the `target` object tree which has a corresponding metadata object\n     *        in the same location in the `metadata` tree is replaced with an\n     *        automatically-generated wrapper function, as described in\n     *        {@see wrapAsyncFunction}\n     *\n     * @returns {Proxy<object>}\n     */\n    const wrapObject = (target, wrappers = {}, metadata = {}) => {\n      let cache = Object.create(null);\n      let handlers = {\n        has(proxyTarget, prop) {\n          return prop in target || prop in cache;\n        },\n\n        get(proxyTarget, prop, receiver) {\n          if (prop in cache) {\n            return cache[prop];\n          }\n\n          if (!(prop in target)) {\n            return undefined;\n          }\n\n          let value = target[prop];\n\n          if (typeof value === \"function\") {\n            // This is a method on the underlying object. Check if we need to do\n            // any wrapping.\n\n            if (typeof wrappers[prop] === \"function\") {\n              // We have a special-case wrapper for this method.\n              value = wrapMethod(target, target[prop], wrappers[prop]);\n            } else if (hasOwnProperty(metadata, prop)) {\n              // This is an async method that we have metadata for. Create a\n              // Promise wrapper for it.\n              let wrapper = wrapAsyncFunction(prop, metadata[prop]);\n              value = wrapMethod(target, target[prop], wrapper);\n            } else {\n              // This is a method that we don't know or care about. Return the\n              // original method, bound to the underlying object.\n              value = value.bind(target);\n            }\n          } else if (typeof value === \"object\" && value !== null &&\n                     (hasOwnProperty(wrappers, prop) ||\n                      hasOwnProperty(metadata, prop))) {\n            // This is an object that we need to do some wrapping for the children\n            // of. Create a sub-object wrapper for it with the appropriate child\n            // metadata.\n            value = wrapObject(value, wrappers[prop], metadata[prop]);\n          } else if (hasOwnProperty(metadata, \"*\")) {\n            // Wrap all properties in * namespace.\n            value = wrapObject(value, wrappers[prop], metadata[\"*\"]);\n          } else {\n            // We don't need to do any wrapping for this property,\n            // so just forward all access to the underlying object.\n            Object.defineProperty(cache, prop, {\n              configurable: true,\n              enumerable: true,\n              get() {\n                return target[prop];\n              },\n              set(value) {\n                target[prop] = value;\n              },\n            });\n\n            return value;\n          }\n\n          cache[prop] = value;\n          return value;\n        },\n\n        set(proxyTarget, prop, value, receiver) {\n          if (prop in cache) {\n            cache[prop] = value;\n          } else {\n            target[prop] = value;\n          }\n          return true;\n        },\n\n        defineProperty(proxyTarget, prop, desc) {\n          return Reflect.defineProperty(cache, prop, desc);\n        },\n\n        deleteProperty(proxyTarget, prop) {\n          return Reflect.deleteProperty(cache, prop);\n        },\n      };\n\n      // Per contract of the Proxy API, the \"get\" proxy handler must return the\n      // original value of the target if that value is declared read-only and\n      // non-configurable. For this reason, we create an object with the\n      // prototype set to `target` instead of using `target` directly.\n      // Otherwise we cannot return a custom object for APIs that\n      // are declared read-only and non-configurable, such as `chrome.devtools`.\n      //\n      // The proxy handlers themselves will still use the original `target`\n      // instead of the `proxyTarget`, so that the methods and properties are\n      // dereferenced via the original targets.\n      let proxyTarget = Object.create(target);\n      return new Proxy(proxyTarget, handlers);\n    };\n\n    /**\n     * Creates a set of wrapper functions for an event object, which handles\n     * wrapping of listener functions that those messages are passed.\n     *\n     * A single wrapper is created for each listener function, and stored in a\n     * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`\n     * retrieve the original wrapper, so that  attempts to remove a\n     * previously-added listener work as expected.\n     *\n     * @param {DefaultWeakMap<function, function>} wrapperMap\n     *        A DefaultWeakMap object which will create the appropriate wrapper\n     *        for a given listener function when one does not exist, and retrieve\n     *        an existing one when it does.\n     *\n     * @returns {object}\n     */\n    const wrapEvent = wrapperMap => ({\n      addListener(target, listener, ...args) {\n        target.addListener(wrapperMap.get(listener), ...args);\n      },\n\n      hasListener(target, listener) {\n        return target.hasListener(wrapperMap.get(listener));\n      },\n\n      removeListener(target, listener) {\n        target.removeListener(wrapperMap.get(listener));\n      },\n    });\n\n    const onRequestFinishedWrappers = new DefaultWeakMap(listener => {\n      if (typeof listener !== \"function\") {\n        return listener;\n      }\n\n      /**\n       * Wraps an onRequestFinished listener function so that it will return a\n       * `getContent()` property which returns a `Promise` rather than using a\n       * callback API.\n       *\n       * @param {object} req\n       *        The HAR entry object representing the network request.\n       */\n      return function onRequestFinished(req) {\n        const wrappedReq = wrapObject(req, {} /* wrappers */, {\n          getContent: {\n            minArgs: 0,\n            maxArgs: 0,\n          },\n        });\n        listener(wrappedReq);\n      };\n    });\n\n    const onMessageWrappers = new DefaultWeakMap(listener => {\n      if (typeof listener !== \"function\") {\n        return listener;\n      }\n\n      /**\n       * Wraps a message listener function so that it may send responses based on\n       * its return value, rather than by returning a sentinel value and calling a\n       * callback. If the listener function returns a Promise, the response is\n       * sent when the promise either resolves or rejects.\n       *\n       * @param {*} message\n       *        The message sent by the other end of the channel.\n       * @param {object} sender\n       *        Details about the sender of the message.\n       * @param {function(*)} sendResponse\n       *        A callback which, when called with an arbitrary argument, sends\n       *        that value as a response.\n       * @returns {boolean}\n       *        True if the wrapped listener returned a Promise, which will later\n       *        yield a response. False otherwise.\n       */\n      return function onMessage(message, sender, sendResponse) {\n        let didCallSendResponse = false;\n\n        let wrappedSendResponse;\n        let sendResponsePromise = new Promise(resolve => {\n          wrappedSendResponse = function(response) {\n            didCallSendResponse = true;\n            resolve(response);\n          };\n        });\n\n        let result;\n        try {\n          result = listener(message, sender, wrappedSendResponse);\n        } catch (err) {\n          result = Promise.reject(err);\n        }\n\n        const isResultThenable = result !== true && isThenable(result);\n\n        // If the listener didn't returned true or a Promise, or called\n        // wrappedSendResponse synchronously, we can exit earlier\n        // because there will be no response sent from this listener.\n        if (result !== true && !isResultThenable && !didCallSendResponse) {\n          return false;\n        }\n\n        // A small helper to send the message if the promise resolves\n        // and an error if the promise rejects (a wrapped sendMessage has\n        // to translate the message into a resolved promise or a rejected\n        // promise).\n        const sendPromisedResult = (promise) => {\n          promise.then(msg => {\n            // send the message value.\n            sendResponse(msg);\n          }, error => {\n            // Send a JSON representation of the error if the rejected value\n            // is an instance of error, or the object itself otherwise.\n            let message;\n            if (error && (error instanceof Error ||\n                typeof error.message === \"string\")) {\n              message = error.message;\n            } else {\n              message = \"An unexpected error occurred\";\n            }\n\n            sendResponse({\n              __mozWebExtensionPolyfillReject__: true,\n              message,\n            });\n          }).catch(err => {\n            // Print an error on the console if unable to send the response.\n            console.error(\"Failed to send onMessage rejected reply\", err);\n          });\n        };\n\n        // If the listener returned a Promise, send the resolved value as a\n        // result, otherwise wait the promise related to the wrappedSendResponse\n        // callback to resolve and send it as a response.\n        if (isResultThenable) {\n          sendPromisedResult(result);\n        } else {\n          sendPromisedResult(sendResponsePromise);\n        }\n\n        // Let Chrome know that the listener is replying.\n        return true;\n      };\n    });\n\n    const wrappedSendMessageCallback = ({reject, resolve}, reply) => {\n      if (extensionAPIs.runtime.lastError) {\n        // Detect when none of the listeners replied to the sendMessage call and resolve\n        // the promise to undefined as in Firefox.\n        // See https://github.com/mozilla/webextension-polyfill/issues/130\n        if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {\n          resolve();\n        } else {\n          reject(new Error(extensionAPIs.runtime.lastError.message));\n        }\n      } else if (reply && reply.__mozWebExtensionPolyfillReject__) {\n        // Convert back the JSON representation of the error into\n        // an Error instance.\n        reject(new Error(reply.message));\n      } else {\n        resolve(reply);\n      }\n    };\n\n    const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {\n      if (args.length < metadata.minArgs) {\n        throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n      }\n\n      if (args.length > metadata.maxArgs) {\n        throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n      }\n\n      return new Promise((resolve, reject) => {\n        const wrappedCb = wrappedSendMessageCallback.bind(null, {resolve, reject});\n        args.push(wrappedCb);\n        apiNamespaceObj.sendMessage(...args);\n      });\n    };\n\n    const staticWrappers = {\n      devtools: {\n        network: {\n          onRequestFinished: wrapEvent(onRequestFinishedWrappers),\n        },\n      },\n      runtime: {\n        onMessage: wrapEvent(onMessageWrappers),\n        onMessageExternal: wrapEvent(onMessageWrappers),\n        sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {minArgs: 1, maxArgs: 3}),\n      },\n      tabs: {\n        sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {minArgs: 2, maxArgs: 3}),\n      },\n    };\n    const settingMetadata = {\n      clear: {minArgs: 1, maxArgs: 1},\n      get: {minArgs: 1, maxArgs: 1},\n      set: {minArgs: 1, maxArgs: 1},\n    };\n    apiMetadata.privacy = {\n      network: {\"*\": settingMetadata},\n      services: {\"*\": settingMetadata},\n      websites: {\"*\": settingMetadata},\n    };\n\n    return wrapObject(extensionAPIs, staticWrappers, apiMetadata);\n  };\n\n  // The build process adds a UMD wrapper around this file, which makes the\n  // `module` variable available.\n  module.exports = wrapAPIs(chrome);\n} else {\n  module.exports = globalThis.browser;\n}\n", "const {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n} = Object;\n\nlet { freeze, seal, create } = Object; // eslint-disable-line import/no-mutable-exports\nlet { apply, construct } = typeof Reflect !== 'undefined' && Reflect;\n\nif (!freeze) {\n  freeze = function (x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function (x) {\n    return x;\n  };\n}\n\nif (!apply) {\n  apply = function (fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!construct) {\n  construct = function (Func, args) {\n    return new Func(...args);\n  };\n}\n\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayIndexOf = unapply(Array.prototype.indexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySlice = unapply(Array.prototype.slice);\n\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\n\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n\nconst regExpTest = unapply(RegExp.prototype.test);\n\nconst typeErrorCreate = unconstruct(TypeError);\n\nconst numberIsNaN = unapply(Number.isNaN);\n\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param {Function} func - The function to be wrapped and called.\n * @returns {Function} A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return (thisArg, ...args) => apply(func, thisArg, args);\n}\n\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param {Function} func - The constructor function to be wrapped and called.\n * @returns {Function} A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(func) {\n  return (...args) => construct(func, args);\n}\n\n/**\n * Add properties to a lookup table\n *\n * @param {Object} set - The set to which elements will be added.\n * @param {Array} array - The array containing elements to be added to the set.\n * @param {Function} transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns {Object} The modified set with added elements.\n */\nfunction addToSet(set, array, transformCaseFunc = stringToLowerCase) {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/**\n * Clean up an array to harden against CSPP\n *\n * @param {Array} array - The array to be cleaned.\n * @returns {Array} The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n\n  return array;\n}\n\n/**\n * Shallow clone an object\n *\n * @param {Object} object - The object to be cloned.\n * @returns {Object} A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (\n        value &&\n        typeof value === 'object' &&\n        value.constructor === Object\n      ) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n\n  return newObject;\n}\n\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param {Object} object - The object to look up the getter function in its prototype chain.\n * @param {String} prop - The property name for which to find the getter function.\n * @returns {Function} The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue() {\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nexport {\n  // Array\n  arrayForEach,\n  arrayIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  // Object\n  entries,\n  freeze,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n  isFrozen,\n  setPrototypeOf,\n  seal,\n  clone,\n  create,\n  objectHasOwnProperty,\n  // RegExp\n  regExpTest,\n  // String\n  stringIndexOf,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringTrim,\n  // Number\n  numberIsNaN,\n  // Errors\n  typeErrorCreate,\n  // Other\n  lookupGetter,\n  addToSet,\n  // Reflect\n  unapply,\n  unconstruct,\n};\n", "import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'decorator',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meter',\n  'nav',\n  'nobr',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'section',\n  'select',\n  'shadow',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n]);\n\n// SVG\nexport const svg = freeze([\n  'svg',\n  'a',\n  'altglyph',\n  'altglyphdef',\n  'altglyphitem',\n  'animatecolor',\n  'animatemotion',\n  'animatetransform',\n  'circle',\n  'clippath',\n  'defs',\n  'desc',\n  'ellipse',\n  'filter',\n  'font',\n  'g',\n  'glyph',\n  'glyphref',\n  'hkern',\n  'image',\n  'line',\n  'lineargradient',\n  'marker',\n  'mask',\n  'metadata',\n  'mpath',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialgradient',\n  'rect',\n  'stop',\n  'style',\n  'switch',\n  'symbol',\n  'text',\n  'textpath',\n  'title',\n  'tref',\n  'tspan',\n  'view',\n  'vkern',\n]);\n\nexport const svgFilters = freeze([\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n]);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nexport const svgDisallowed = freeze([\n  'animate',\n  'color-profile',\n  'cursor',\n  'discard',\n  'font-face',\n  'font-face-format',\n  'font-face-name',\n  'font-face-src',\n  'font-face-uri',\n  'foreignobject',\n  'hatch',\n  'hatchpath',\n  'mesh',\n  'meshgradient',\n  'meshpatch',\n  'meshrow',\n  'missing-glyph',\n  'script',\n  'set',\n  'solidcolor',\n  'unknown',\n  'use',\n]);\n\nexport const mathMl = freeze([\n  'math',\n  'menclose',\n  'merror',\n  'mfenced',\n  'mfrac',\n  'mglyph',\n  'mi',\n  'mlabeledtr',\n  'mmultiscripts',\n  'mn',\n  'mo',\n  'mover',\n  'mpadded',\n  'mphantom',\n  'mroot',\n  'mrow',\n  'ms',\n  'mspace',\n  'msqrt',\n  'mstyle',\n  'msub',\n  'msup',\n  'msubsup',\n  'mtable',\n  'mtd',\n  'mtext',\n  'mtr',\n  'munder',\n  'munderover',\n  'mprescripts',\n]);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nexport const mathMlDisallowed = freeze([\n  'maction',\n  'maligngroup',\n  'malignmark',\n  'mlongdiv',\n  'mscarries',\n  'mscarry',\n  'msgroup',\n  'mstack',\n  'msline',\n  'msrow',\n  'semantics',\n  'annotation',\n  'annotation-xml',\n  'mprescripts',\n  'none',\n]);\n\nexport const text = freeze(['#text']);\n", "import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'accept',\n  'action',\n  'align',\n  'alt',\n  'autocapitalize',\n  'autocomplete',\n  'autopictureinpicture',\n  'autoplay',\n  'background',\n  'bgcolor',\n  'border',\n  'capture',\n  'cellpadding',\n  'cellspacing',\n  'checked',\n  'cite',\n  'class',\n  'clear',\n  'color',\n  'cols',\n  'colspan',\n  'controls',\n  'controlslist',\n  'coords',\n  'crossorigin',\n  'datetime',\n  'decoding',\n  'default',\n  'dir',\n  'disabled',\n  'disablepictureinpicture',\n  'disableremoteplayback',\n  'download',\n  'draggable',\n  'enctype',\n  'enterkeyhint',\n  'face',\n  'for',\n  'headers',\n  'height',\n  'hidden',\n  'high',\n  'href',\n  'hreflang',\n  'id',\n  'inputmode',\n  'integrity',\n  'ismap',\n  'kind',\n  'label',\n  'lang',\n  'list',\n  'loading',\n  'loop',\n  'low',\n  'max',\n  'maxlength',\n  'media',\n  'method',\n  'min',\n  'minlength',\n  'multiple',\n  'muted',\n  'name',\n  'nonce',\n  'noshade',\n  'novalidate',\n  'nowrap',\n  'open',\n  'optimum',\n  'pattern',\n  'placeholder',\n  'playsinline',\n  'poster',\n  'preload',\n  'pubdate',\n  'radiogroup',\n  'readonly',\n  'rel',\n  'required',\n  'rev',\n  'reversed',\n  'role',\n  'rows',\n  'rowspan',\n  'spellcheck',\n  'scope',\n  'selected',\n  'shape',\n  'size',\n  'sizes',\n  'span',\n  'srclang',\n  'start',\n  'src',\n  'srcset',\n  'step',\n  'style',\n  'summary',\n  'tabindex',\n  'title',\n  'translate',\n  'type',\n  'usemap',\n  'valign',\n  'value',\n  'width',\n  'wrap',\n  'xmlns',\n  'slot',\n]);\n\nexport const svg = freeze([\n  'accent-height',\n  'accumulate',\n  'additive',\n  'alignment-baseline',\n  'ascent',\n  'attributename',\n  'attributetype',\n  'azimuth',\n  'basefrequency',\n  'baseline-shift',\n  'begin',\n  'bias',\n  'by',\n  'class',\n  'clip',\n  'clippathunits',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'diffuseconstant',\n  'direction',\n  'display',\n  'divisor',\n  'dur',\n  'edgemode',\n  'elevation',\n  'end',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'filterunits',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'fx',\n  'fy',\n  'g1',\n  'g2',\n  'glyph-name',\n  'glyphref',\n  'gradientunits',\n  'gradienttransform',\n  'height',\n  'href',\n  'id',\n  'image-rendering',\n  'in',\n  'in2',\n  'k',\n  'k1',\n  'k2',\n  'k3',\n  'k4',\n  'kerning',\n  'keypoints',\n  'keysplines',\n  'keytimes',\n  'lang',\n  'lengthadjust',\n  'letter-spacing',\n  'kernelmatrix',\n  'kernelunitlength',\n  'lighting-color',\n  'local',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'markerheight',\n  'markerunits',\n  'markerwidth',\n  'maskcontentunits',\n  'maskunits',\n  'max',\n  'mask',\n  'media',\n  'method',\n  'mode',\n  'min',\n  'name',\n  'numoctaves',\n  'offset',\n  'operator',\n  'opacity',\n  'order',\n  'orient',\n  'orientation',\n  'origin',\n  'overflow',\n  'paint-order',\n  'path',\n  'pathlength',\n  'patterncontentunits',\n  'patterntransform',\n  'patternunits',\n  'points',\n  'preservealpha',\n  'preserveaspectratio',\n  'primitiveunits',\n  'r',\n  'rx',\n  'ry',\n  'radius',\n  'refx',\n  'refy',\n  'repeatcount',\n  'repeatdur',\n  'restart',\n  'result',\n  'rotate',\n  'scale',\n  'seed',\n  'shape-rendering',\n  'specularconstant',\n  'specularexponent',\n  'spreadmethod',\n  'startoffset',\n  'stddeviation',\n  'stitchtiles',\n  'stop-color',\n  'stop-opacity',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke',\n  'stroke-width',\n  'style',\n  'surfacescale',\n  'systemlanguage',\n  'tabindex',\n  'targetx',\n  'targety',\n  'transform',\n  'transform-origin',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'textlength',\n  'type',\n  'u1',\n  'u2',\n  'unicode',\n  'values',\n  'viewbox',\n  'visibility',\n  'version',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'width',\n  'word-spacing',\n  'wrap',\n  'writing-mode',\n  'xchannelselector',\n  'ychannelselector',\n  'x',\n  'x1',\n  'x2',\n  'xmlns',\n  'y',\n  'y1',\n  'y2',\n  'z',\n  'zoomandpan',\n]);\n\nexport const mathMl = freeze([\n  'accent',\n  'accentunder',\n  'align',\n  'bevelled',\n  'close',\n  'columnsalign',\n  'columnlines',\n  'columnspan',\n  'denomalign',\n  'depth',\n  'dir',\n  'display',\n  'displaystyle',\n  'encoding',\n  'fence',\n  'frame',\n  'height',\n  'href',\n  'id',\n  'largeop',\n  'length',\n  'linethickness',\n  'lspace',\n  'lquote',\n  'mathbackground',\n  'mathcolor',\n  'mathsize',\n  'mathvariant',\n  'maxsize',\n  'minsize',\n  'movablelimits',\n  'notation',\n  'numalign',\n  'open',\n  'rowalign',\n  'rowlines',\n  'rowspacing',\n  'rowspan',\n  'rspace',\n  'rquote',\n  'scriptlevel',\n  'scriptminsize',\n  'scriptsizemultiplier',\n  'selection',\n  'separator',\n  'separators',\n  'stretchy',\n  'subscriptshift',\n  'supscriptshift',\n  'symmetric',\n  'voffset',\n  'width',\n  'xmlns',\n]);\n\nexport const xml = freeze([\n  'xlink:href',\n  'xml:id',\n  'xlink:title',\n  'xml:space',\n  'xmlns:xlink',\n]);\n", "import { seal } from './utils.js';\n\n// eslint-disable-next-line unicorn/better-regex\nexport const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nexport const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nexport const TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\nexport const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nexport const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nexport const IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nexport const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nexport const ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nexport const DOCTYPE_NAME = seal(/^html$/i);\nexport const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n", "import * as TAGS from './tags.js';\nimport * as ATTRS from './attrs.js';\nimport * as EXPRESSIONS from './regexp.js';\nimport {\n  addToSet,\n  clone,\n  entries,\n  freeze,\n  arrayForEach,\n  arrayPop,\n  arrayPush,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringIndexOf,\n  stringTrim,\n  numberIsNaN,\n  regExpTest,\n  typeErrorCreate,\n  lookupGetter,\n  create,\n  objectHasOwnProperty,\n} from './utils.js';\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5, // Deprecated\n  entityNode: 6, // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12, // Deprecated\n};\n\nconst getGlobal = function () {\n  return typeof window === 'undefined' ? null : window;\n};\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return {TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function (trustedTypes, purifyHostElement) {\n  if (\n    typeof trustedTypes !== 'object' ||\n    typeof trustedTypes.createPolicy !== 'function'\n  ) {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      },\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn(\n      'TrustedTypes policy ' + policyName + ' could not be created.'\n    );\n    return null;\n  }\n};\n\nfunction createDOMPurify(window = getGlobal()) {\n  const DOMPurify = (root) => createDOMPurify(root);\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = VERSION;\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (\n    !window ||\n    !window.document ||\n    window.document.nodeType !== NODE_TYPE.document\n  ) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  let { document } = window;\n\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes,\n  } = window;\n\n  const ElementPrototype = Element.prototype;\n\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName,\n  } = document;\n  const { importNode } = originalDocument;\n\n  let hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported =\n    typeof entries === 'function' &&\n    typeof getParentNode === 'function' &&\n    implementation &&\n    implementation.createHTMLDocument !== undefined;\n\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT,\n  } = EXPRESSIONS;\n\n  let { IS_ALLOWED_URI } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n    ...TAGS.html,\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.mathMl,\n    ...TAGS.text,\n  ]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n    ...ATTRS.html,\n    ...ATTRS.svg,\n    ...ATTRS.mathMl,\n    ...ATTRS.xml,\n  ]);\n\n  /*\n   * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(\n    create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false,\n      },\n    })\n  );\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (7.3.3)\n   *   - DOM Tree Accessors (3.1.5)\n   *   - Form Element Parent-Child Relations (4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n   *   - HTMLCollection (4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, [\n    'annotation-xml',\n    'audio',\n    'colgroup',\n    'desc',\n    'foreignobject',\n    'head',\n    'iframe',\n    'math',\n    'mi',\n    'mn',\n    'mo',\n    'ms',\n    'mtext',\n    'noembed',\n    'noframes',\n    'noscript',\n    'plaintext',\n    'script',\n    'style',\n    'svg',\n    'template',\n    'thead',\n    'title',\n    'video',\n    'xmp',\n  ]);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n    'audio',\n    'video',\n    'img',\n    'source',\n    'image',\n    'track',\n  ]);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n    'alt',\n    'class',\n    'for',\n    'id',\n    'label',\n    'name',\n    'pattern',\n    'placeholder',\n    'role',\n    'summary',\n    'title',\n    'value',\n    'style',\n    'xmlns',\n  ]);\n\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet(\n    {},\n    [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE],\n    stringToString\n  );\n\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n\n  /* Specify the maximum element nesting depth to prevent mXSS */\n  const MAX_NESTING_DEPTH = 255;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n\n  const isRegexOrFunction = function (testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function (cfg = {}) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1\n        ? DEFAULT_PARSER_MEDIA_TYPE\n        : cfg.PARSER_MEDIA_TYPE;\n\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc =\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml'\n        ? stringToString\n        : stringToLowerCase;\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS')\n      ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc)\n      : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR')\n      ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc)\n      : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES')\n      ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString)\n      : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR')\n      ? addToSet(\n          clone(DEFAULT_URI_SAFE_ATTRIBUTES), // eslint-disable-line indent\n          cfg.ADD_URI_SAFE_ATTR, // eslint-disable-line indent\n          transformCaseFunc // eslint-disable-line indent\n        ) // eslint-disable-line indent\n      : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS')\n      ? addToSet(\n          clone(DEFAULT_DATA_URI_TAGS), // eslint-disable-line indent\n          cfg.ADD_DATA_URI_TAGS, // eslint-disable-line indent\n          transformCaseFunc // eslint-disable-line indent\n        ) // eslint-disable-line indent\n      : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS')\n      ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc)\n      : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS')\n      ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc)\n      : {};\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR')\n      ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc)\n      : {};\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES')\n      ? cfg.USE_PROFILES\n      : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI = cfg.ALLOWED_URI_REGEXP || EXPRESSIONS.IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements ===\n        'boolean'\n    ) {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements =\n        cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, TAGS.text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, TAGS.html);\n        addToSet(ALLOWED_ATTR, ATTRS.html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svgFilters);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, TAGS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.'\n        );\n      }\n\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.'\n        );\n      }\n\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(\n          trustedTypes,\n          currentScript\n        );\n      }\n\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n    'mi',\n    'mo',\n    'mn',\n    'ms',\n    'mtext',\n  ]);\n\n  const HTML_INTEGRATION_POINTS = addToSet({}, [\n    'foreignobject',\n    'annotation-xml',\n  ]);\n\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n    'title',\n    'style',\n    'font',\n    'a',\n    'script',\n  ]);\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.svgDisallowed,\n  ]);\n  const ALL_MATHML_TAGS = addToSet({}, [\n    ...TAGS.mathMl,\n    ...TAGS.mathMlDisallowed,\n  ]);\n\n  /**\n   * @param  {Element} element a DOM element whose namespace is being checked\n   * @returns {boolean} Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function (element) {\n    let parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template',\n      };\n    }\n\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return (\n          tagName === 'svg' &&\n          (parentTagName === 'annotation-xml' ||\n            MATHML_TEXT_INTEGRATION_POINTS[parentTagName])\n        );\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (\n        parent.namespaceURI === SVG_NAMESPACE &&\n        !HTML_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      if (\n        parent.namespaceURI === MATHML_NAMESPACE &&\n        !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return (\n        !ALL_MATHML_TAGS[tagName] &&\n        (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName])\n      );\n    }\n\n    // For XHTML and XML documents that support custom namespaces\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      ALLOWED_NAMESPACES[element.namespaceURI]\n    ) {\n      return true;\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  const _forceRemove = function (node) {\n    arrayPush(DOMPurify.removed, { element: node });\n\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      node.parentNode.removeChild(node);\n    } catch (_) {\n      node.remove();\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  const _removeAttribute = function (name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node,\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node,\n      });\n    }\n\n    node.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\"\" attributes\n    if (name === 'is' && !ALLOWED_ATTR[name]) {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(node);\n        } catch (_) {}\n      } else {\n        try {\n          node.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  const _initDocument = function (dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      NAMESPACE === HTML_NAMESPACE\n    ) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty =\n        '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' +\n        dirty +\n        '</body></html>';\n    }\n\n    const dirtyPayload = trustedTypesPolicy\n      ? trustedTypesPolicy.createHTML(dirty)\n      : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT\n          ? emptyHTML\n          : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    const body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(\n        document.createTextNode(leadingWhitespace),\n        body.childNodes[0] || null\n      );\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(\n        doc,\n        WHOLE_DOCUMENT ? 'html' : 'body'\n      )[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param  {Node} root The root element or node to start traversing on.\n   * @return {NodeIterator} The created NodeIterator\n   */\n  const _createNodeIterator = function (root) {\n    return createNodeIterator.call(\n      root.ownerDocument || root,\n      root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT |\n        NodeFilter.SHOW_COMMENT |\n        NodeFilter.SHOW_TEXT |\n        NodeFilter.SHOW_PROCESSING_INSTRUCTION |\n        NodeFilter.SHOW_CDATA_SECTION,\n      null\n    );\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  const _isClobbered = function (elm) {\n    return (\n      elm instanceof HTMLFormElement &&\n      // eslint-disable-next-line unicorn/no-typeof-undefined\n      ((typeof elm.__depth !== 'undefined' &&\n        typeof elm.__depth !== 'number') ||\n        // eslint-disable-next-line unicorn/no-typeof-undefined\n        (typeof elm.__removalCount !== 'undefined' &&\n          typeof elm.__removalCount !== 'number') ||\n        typeof elm.nodeName !== 'string' ||\n        typeof elm.textContent !== 'string' ||\n        typeof elm.removeChild !== 'function' ||\n        !(elm.attributes instanceof NamedNodeMap) ||\n        typeof elm.removeAttribute !== 'function' ||\n        typeof elm.setAttribute !== 'function' ||\n        typeof elm.namespaceURI !== 'string' ||\n        typeof elm.insertBefore !== 'function' ||\n        typeof elm.hasChildNodes !== 'function')\n    );\n  };\n\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param  {Node} object object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  const _isNode = function (object) {\n    return typeof Node === 'function' && object instanceof Node;\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  const _executeHook = function (entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    arrayForEach(hooks[entryPoint], (hook) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function (currentNode) {\n    let content = null;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS,\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (\n      currentNode.hasChildNodes() &&\n      !_isNode(currentNode.firstElementChild) &&\n      regExpTest(/<[/\\w]/g, currentNode.innerHTML) &&\n      regExpTest(/<[/\\w]/g, currentNode.textContent)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any ocurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any kind of possibly harmful comments */\n    if (\n      SAFE_FOR_XML &&\n      currentNode.nodeType === NODE_TYPE.comment &&\n      regExpTest(/<[/\\w]/g, currentNode.data)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n          regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)\n        ) {\n          return false;\n        }\n\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)\n        ) {\n          return false;\n        }\n      }\n\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if (\n      (tagName === 'noscript' ||\n        tagName === 'noembed' ||\n        tagName === 'noframes') &&\n      regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr) => {\n        content = stringReplace(content, expr, ' ');\n      });\n\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function (lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (\n      SANITIZE_DOM &&\n      (lcName === 'id' || lcName === 'name') &&\n      (value in document ||\n        value in formElement ||\n        value === '__depth' ||\n        value === '__removalCount')\n    ) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (\n      ALLOW_DATA_ATTR &&\n      !FORBID_ATTR[lcName] &&\n      regExpTest(DATA_ATTR, lcName)\n    ) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        (_isBasicCustomElement(lcTag) &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag))) &&\n          ((CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName)) ||\n            (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)))) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        (lcName === 'is' &&\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))))\n      ) {\n        // If user has supplied a regexp or function in CUSTOM_ELEMENT_HANDLING.tagNameCheck, we need to also allow derived custom elements using the same tagName test.\n        // Additionally, we need to allow attributes passing the CUSTOM_ELEMENT_HANDLING.attributeNameCheck user has configured, as custom elements can define these at their own discretion.\n      } else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (\n      regExpTest(IS_ALLOWED_URI, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if (\n      (lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') &&\n      lcTag !== 'script' &&\n      stringIndexOf(value, 'data:') === 0 &&\n      DATA_URI_TAGS[lcTag]\n    ) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (\n      ALLOW_UNKNOWN_PROTOCOLS &&\n      !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Check for binary attributes */\n    } else if (value) {\n      return false;\n    } else {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    }\n\n    return true;\n  };\n\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param {string} tagName name of the tag of the node to sanitize\n   * @returns {boolean} Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function (tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  const _sanitizeAttributes = function (currentNode) {\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    const { attributes } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes) {\n      return;\n    }\n\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n    };\n    let l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const { name, namespaceURI, value: attrValue } = attr;\n      const lcName = transformCaseFunc(name);\n\n      let value = name === 'value' ? attrValue : stringTrim(attrValue);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr) => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n\n      /* Handle attributes that require Trusted Types */\n      if (\n        trustedTypesPolicy &&\n        typeof trustedTypes === 'object' &&\n        typeof trustedTypes.getAttributeType === 'function'\n      ) {\n        if (namespaceURI) {\n          /* Namespaces are not yet supported, see https://bugs.chromium.org/p/chromium/issues/detail?id=1305293 */\n        } else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML': {\n              value = trustedTypesPolicy.createHTML(value);\n              break;\n            }\n\n            case 'TrustedScriptURL': {\n              value = trustedTypesPolicy.createScriptURL(value);\n              break;\n            }\n\n            default: {\n              break;\n            }\n          }\n        }\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n        } else {\n          arrayPop(DOMPurify.removed);\n        }\n      } catch (_) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function (fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while ((shadowNode = shadowIterator.nextNode())) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      const parentNode = getParentNode(shadowNode);\n\n      /* Set the nesting depth of an element */\n      if (shadowNode.nodeType === NODE_TYPE.element) {\n        if (parentNode && parentNode.__depth) {\n          /*\n            We want the depth of the node in the original tree, which can\n            change when it's removed from its parent.\n          */\n          shadowNode.__depth =\n            (shadowNode.__removalCount || 0) + parentNode.__depth + 1;\n        } else {\n          shadowNode.__depth = 1;\n        }\n      }\n\n      /*\n       * Remove an element if nested too deeply to avoid mXSS\n       * or if the __depth might have been tampered with\n       */\n      if (\n        shadowNode.__depth >= MAX_NESTING_DEPTH ||\n        shadowNode.__depth < 0 ||\n        numberIsNaN(shadowNode.__depth)\n      ) {\n        _forceRemove(shadowNode);\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        shadowNode.content.__depth = shadowNode.__depth;\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} cfg object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg = {}) {\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate(\n            'root node is forbidden and cannot be sanitized in-place'\n          );\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (\n        importedNode.nodeType === NODE_TYPE.element &&\n        importedNode.nodeName === 'BODY'\n      ) {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (\n        !RETURN_DOM &&\n        !SAFE_FOR_TEMPLATES &&\n        !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1\n      ) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n          ? trustedTypesPolicy.createHTML(dirty)\n          : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while ((currentNode = nodeIterator.nextNode())) {\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      const parentNode = getParentNode(currentNode);\n\n      /* Set the nesting depth of an element */\n      if (currentNode.nodeType === NODE_TYPE.element) {\n        if (parentNode && parentNode.__depth) {\n          /*\n            We want the depth of the node in the original tree, which can\n            change when it's removed from its parent.\n          */\n          currentNode.__depth =\n            (currentNode.__removalCount || 0) + parentNode.__depth + 1;\n        } else {\n          currentNode.__depth = 1;\n        }\n      }\n\n      /*\n       * Remove an element if nested too deeply to avoid mXSS\n       * or if the __depth might have been tampered with\n       */\n      if (\n        currentNode.__depth >= MAX_NESTING_DEPTH ||\n        currentNode.__depth < 0 ||\n        numberIsNaN(currentNode.__depth)\n      ) {\n        _forceRemove(currentNode);\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        currentNode.content.__depth = currentNode.__depth;\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n    }\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Serialize doctype if allowed */\n    if (\n      WHOLE_DOCUMENT &&\n      ALLOWED_TAGS['!doctype'] &&\n      body.ownerDocument &&\n      body.ownerDocument.doctype &&\n      body.ownerDocument.doctype.name &&\n      regExpTest(EXPRESSIONS.DOCTYPE_NAME, body.ownerDocument.doctype.name)\n    ) {\n      serializedHTML =\n        '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr) => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML(serializedHTML)\n      : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg = {}) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {String} tag Tag name of containing element.\n   * @param  {String} attr Attribute name.\n   * @param  {String} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   * @return {Function} removed(popped) hook\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      return arrayPop(hooks[entryPoint]);\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nexport default createDOMPurify();\n", "\r\nexport default abstract class GameId {\r\n\r\n    private readonly full: string;\r\n\r\n    protected constructor(\r\n        private type_: \"app\"|\"sub\"|\"bundle\",\r\n        private id_: number\r\n    ) {\r\n        this.full = `${this.type_}/${this.id_}`;\r\n    }\r\n\r\n    get type(): \"app\"|\"sub\"|\"bundle\" {\r\n        return this.type_;\r\n    }\r\n\r\n    get number(): number {\r\n        return this.id_;\r\n    }\r\n\r\n    get string(): string {\r\n        return this.full;\r\n    };\r\n}\r\n", "import GameId from \"@Core/GameId/GameId\";\r\n\r\n// TODO refactor to return instance\r\nexport default class AppId extends GameId {\r\n\r\n    static fromUrl(url: string) {\r\n        const m = url.match(/(?:store\\.steampowered|steamcommunity)\\.com\\/(?:app|games|market\\/listings)\\/(\\d+)\\/?/);\r\n        return m && m[1] !== undefined\r\n            ? Number(m[1])\r\n            : null;\r\n    }\r\n\r\n    static fromCDNUrl(url: string): number|null {\r\n        const CDNRegex_1 = /(?:cdn\\.(?:(?:akamai|cloudflare|fastly)\\.)?steamstatic\\.com\\/steam|steamcdn-a\\.akamaihd\\.net\\/steam|steamcommunity\\/public\\/images)\\/apps\\/(\\d+)\\//;\r\n        const CDNRegex_2 = /shared\\.(?:(?:akamai|cloudflare|fastly)\\.)?steamstatic\\.com\\/store_item_assets\\/steam\\/apps\\/(\\d+)\\//;\r\n        const m = url.match(CDNRegex_1) ?? url.match(CDNRegex_2);\r\n        return m && m[1] !== undefined\r\n            ? Number(m[1])\r\n            : null;\r\n    }\r\n\r\n    static fromGameCardUrl(url: string): number|null {\r\n        const m = url.match(/\\/gamecards\\/(\\d+)/);\r\n        return m && m[1] !== undefined\r\n            ? Number(m[1])\r\n            : null;\r\n    }\r\n\r\n    static fromElement(element: HTMLElement|null): number|null {\r\n        if (!element) {\r\n            return null;\r\n        }\r\n\r\n        const appid = element.dataset.dsAppid;\r\n        if (appid) {\r\n            return Number(appid);\r\n        }\r\n\r\n        const href = element.getAttribute(\"href\");\r\n        if (!href) {\r\n            return null;\r\n        }\r\n\r\n        return this.fromUrl(href);\r\n    }\r\n\r\n    static fromImageElement(element: HTMLImageElement|null): number|null {\r\n        if (!element) {\r\n            return null;\r\n        }\r\n\r\n        const src = element.getAttribute(\"src\");\r\n        if (src) {\r\n            return this.fromCDNUrl(src);\r\n        } else if (element.dataset.imageUrl) {\r\n            return this.fromCDNUrl(element.dataset.imageUrl);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static fromText(text: string): number[] {\r\n        const regex = /(?:store\\.steampowered|steamcommunity)\\.com\\/app\\/(\\d+)\\/?/g;\r\n        const result: number[] = [];\r\n        let m;\r\n        while ((m = regex.exec(text)) !== null) {\r\n            result.push(Number(m[1]));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    constructor(id: number) {\r\n        super(\"app\", id);\r\n    }\r\n}\r\n", "export const __deleteCommentPrompt = \"deleteCommentPrompt\";\r\nexport const __downloadDemoHeader = \"downloadDemoHeader\";\r\nexport const __featureHint_desc = \"featureHint_desc\";\r\nexport const __featureHint_reminder = \"featureHint_reminder\";\r\nexport const __thewordyes = \"thewordyes\";\r\nexport const __thewordno = \"thewordno\";\r\nexport const __theworderror = \"theworderror\";\r\nexport const __noData = \"noData\";\r\nexport const __toomanyrequests = \"toomanyrequests\";\r\nexport const __showComments = \"showComments\";\r\nexport const __hideComments = \"hideComments\";\r\nexport const __thewordunknown = \"thewordunknown\";\r\nexport const __calcWorkshopSize_fileSize = \"calcWorkshopSize_fileSize\";\r\nexport const __calcWorkshopSize_calcSize = \"calcWorkshopSize_calcSize\";\r\nexport const __calcWorkshopSize_calcLoading = \"calcWorkshopSize_calcLoading\";\r\nexport const __calcWorkshopSize_calcFinished = \"calcWorkshopSize_calcFinished\";\r\nexport const __calcWorkshopSize_totalSize = \"calcWorkshopSize_totalSize\";\r\nexport const __cart = \"cart\";\r\nexport const __inCart = \"inCart\";\r\nexport const __steamidOfUser = \"steamidOfUser\";\r\nexport const __copied = \"copied\";\r\nexport const __viewSteamid = \"viewSteamid\";\r\nexport const __moreOnSteampeek = \"moreOnSteampeek\";\r\nexport const __date = \"date\";\r\nexport const __rating = \"rating\";\r\nexport const __helpful = \"helpful\";\r\nexport const __funny = \"funny\";\r\nexport const __length = \"length\";\r\nexport const __visibility = \"visibility\";\r\nexport const __processing = \"processing\";\r\nexport const __wait = \"wait\";\r\nexport const __inviteFriends = \"inviteFriends\";\r\nexport const __inviteToGroup = \"inviteToGroup\";\r\nexport const __inverse = \"inverse\";\r\nexport const __transactionStatus = \"transactionStatus\";\r\nexport const __customTags = \"customTags\";\r\nexport const __addTag = \"addTag\";\r\nexport const __enterTag = \"enterTag\";\r\nexport const __status = \"status\";\r\nexport const __connect = \"connect\";\r\nexport const __connected = \"connected\";\r\nexport const __disconnect = \"disconnect\";\r\nexport const __disconnected = \"disconnected\";\r\nexport const __oneclickgoo = \"oneclickgoo\";\r\nexport const __viewInLibrary = \"viewInLibrary\";\r\nexport const __support = \"support\";\r\nexport const __email = \"email\";\r\nexport const __contact = \"contact\";\r\nexport const __favEmoticonsDragging = \"favEmoticonsDragging\";\r\nexport const __favEmoticonsNoAccess = \"favEmoticonsNoAccess\";\r\nexport const __postHistory = \"postHistory\";\r\nexport const __addNickname = \"addNickname\";\r\nexport const __totalSize = \"totalSize\";\r\nexport const __dlcDetails = \"dlcDetails\";\r\nexport const __badgeNotUnlocked = \"badgeNotUnlocked\";\r\nexport const __badgeLevel = \"badgeLevel\";\r\nexport const __each = \"each\";\r\nexport const __viewInMarket = \"viewInMarket\";\r\nexport const __remove = \"remove\";\r\nexport const __getHelp = \"getHelp\";\r\nexport const __addSelectedDlcToCart = \"addSelectedDlcToCart\";\r\nexport const __close = \"close\";\r\nexport const __error = \"error\";\r\nexport const __go = \"go\";\r\nexport const __activate = \"activate\";\r\nexport const __activateMultipleHeader = \"activateMultipleHeader\";\r\nexport const __activateMultiple = \"activateMultiple\";\r\nexport const __activateProducts = \"activateProducts\";\r\nexport const __couponApplicationNote = \"couponApplicationNote\";\r\nexport const __hide = \"hide\";\r\nexport const __filters = \"filters\";\r\nexport const __cardsOwned = \"cardsOwned\";\r\nexport const __libraryMenu = \"libraryMenu\";\r\nexport const __clearCache = \"clearCache\";\r\nexport const __translation = \"translation\";\r\nexport const __helpTranslate = \"helpTranslate\";\r\nexport const __lowest = \"lowest\";\r\nexport const __lowestPrice = \"lowestPrice\";\r\nexport const __viewBadgeProgress = \"viewBadgeProgress\";\r\nexport const __badgeProgress = \"badgeProgress\";\r\nexport const __salesTotal = \"salesTotal\";\r\nexport const __viewNormalBadge = \"viewNormalBadge\";\r\nexport const __apppageSections = \"apppageSections\";\r\nexport const __website = \"website\";\r\nexport const __games = \"games\";\r\nexport const __badgeCompletionCost = \"badgeCompletionCost\";\r\nexport const __loading = \"loading\";\r\nexport const __selling = \"selling\";\r\nexport const __quickSell = \"quickSell\";\r\nexport const __quickSellDesc = \"quickSellDesc\";\r\nexport const __instantSell = \"instantSell\";\r\nexport const __instantSellDesc = \"instantSellDesc\";\r\nexport const __quickSellVerify = \"quickSellVerify\";\r\nexport const __startingAt = \"startingAt\";\r\nexport const __homepageTabs = \"homepageTabs\";\r\nexport const __store = \"store\";\r\nexport const __viewInStore = \"viewInStore\";\r\nexport const __communityHub = \"communityHub\";\r\nexport const __viewOnWebsite = \"viewOnWebsite\";\r\nexport const __drmThirdParty = \"drmThirdParty\";\r\nexport const __hoursShort = \"hoursShort\";\r\nexport const __spamCommentShow = \"spamCommentShow\";\r\nexport const __addToWishlist = \"addToWishlist\";\r\nexport const __addFullgameToWishlist = \"addFullgameToWishlist\";\r\nexport const __addToWaitlist = \"addToWaitlist\";\r\nexport const __addFullgameToWaitlist = \"addFullgameToWaitlist\";\r\nexport const __removeFromWaitlistTooltip = \"removeFromWaitlistTooltip\";\r\nexport const __removeFullgameFromWaitlistTooltip = \"removeFullgameFromWaitlistTooltip\";\r\nexport const __removeFromWishlistAndWaitlistTooltip = \"removeFromWishlistAndWaitlistTooltip\";\r\nexport const __removeFullgameFromWishlistAndWaitlistTooltip = \"removeFullgameFromWishlistAndWaitlistTooltip\";\r\nexport const __language = \"language\";\r\nexport const __theworddefault = \"theworddefault\";\r\nexport const __thewordclear = \"thewordclear\";\r\nexport const __couponLearnMore_linkText = \"couponLearnMore_linkText\";\r\nexport const __couponLearnMore_fullText = \"couponLearnMore_fullText\";\r\nexport const __show = \"show\";\r\nexport const __showAll = \"showAll\";\r\nexport const __badgesAll = \"badgesAll\";\r\nexport const __esSupporter = \"esSupporter\";\r\nexport const __community = \"community\";\r\nexport const __ownedCollection = \"ownedCollection\";\r\nexport const __viewBadge = \"viewBadge\";\r\nexport const __purchaseTotal = \"purchaseTotal\";\r\nexport const __viewFoilBadge = \"viewFoilBadge\";\r\nexport const __viewAstats = \"viewAstats\";\r\nexport const __contribute = \"contribute\";\r\nexport const __reviews = \"reviews\";\r\nexport const __readReviews = \"readReviews\";\r\nexport const __readMoreReviews = \"readMoreReviews\";\r\nexport const __youtubeGameplay = \"youtubeGameplay\";\r\nexport const __youtubeReviews = \"youtubeReviews\";\r\nexport const __packageInfo = \"packageInfo\";\r\nexport const __badgeCompletionAvg = \"badgeCompletionAvg\";\r\nexport const __volumeSoldLast_24 = \"volumeSoldLast_24\";\r\nexport const __soldLast_24 = \"soldLast_24\";\r\nexport const __homepageCurators = \"homepageCurators\";\r\nexport const __homepageTopnewreleases = \"homepageTopnewreleases\";\r\nexport const __homepageSidebar = \"homepageSidebar\";\r\nexport const __dropCalc = \"dropCalc\";\r\nexport const __price = \"price\";\r\nexport const __marketTransactions = \"marketTransactions\";\r\nexport const __loadMarketStats = \"loadMarketStats\";\r\nexport const __cardDropsRemaining = \"cardDropsRemaining\";\r\nexport const __badgesDrops = \"badgesDrops\";\r\nexport const __usingLanguageReturn = \"usingLanguageReturn\";\r\nexport const __guides = \"guides\";\r\nexport const __highlight = \"highlight\";\r\nexport const __save = \"save\";\r\nexport const __view = \"view\";\r\nexport const __gameName = \"gameName\";\r\nexport const __notinterested = \"notinterested\";\r\nexport const __ignoredOwned = \"ignoredOwned\";\r\nexport const __searchFilters_reviewsScore_between = \"searchFilters_reviewsScore_between\";\r\nexport const __searchFilters_reviewsScore_any = \"searchFilters_reviewsScore_any\";\r\nexport const __searchFilters_reviewsScore_upTo = \"searchFilters_reviewsScore_upTo\";\r\nexport const __searchFilters_reviewsScore_from = \"searchFilters_reviewsScore_from\";\r\nexport const __searchFilters_reviewsCount_count = \"searchFilters_reviewsCount_count\";\r\nexport const __searchFilters_reviewsCount_minCount = \"searchFilters_reviewsCount_minCount\";\r\nexport const __searchFilters_reviewsCount_maxCount = \"searchFilters_reviewsCount_maxCount\";\r\nexport const __searchFilters_discountPercent_count = \"searchFilters_discountPercent_count\";\r\nexport const __searchFilters_discountPercent_minCount = \"searchFilters_discountPercent_minCount\";\r\nexport const __searchFilters_discountPercent_maxCount = \"searchFilters_discountPercent_maxCount\";\r\nexport const __searchFilters_hideCart = \"searchFilters_hideCart\";\r\nexport const __searchFilters_hideEa = \"searchFilters_hideEa\";\r\nexport const __searchFilters_hideMixed = \"searchFilters_hideMixed\";\r\nexport const __searchFilters_hideNegative = \"searchFilters_hideNegative\";\r\nexport const __news = \"news\";\r\nexport const __viewinclient = \"viewinclient\";\r\nexport const __customBackground = \"customBackground\";\r\nexport const __customStyle = \"customStyle\";\r\nexport const __customStyleHelp = \"customStyleHelp\";\r\nexport const __noneselected = \"noneselected\";\r\nexport const __mostDrops = \"mostDrops\";\r\nexport const __netGain = \"netGain\";\r\nexport const __apppageRecentupdates = \"apppageRecentupdates\";\r\nexport const __apppageEaheader = \"apppageEaheader\";\r\nexport const __apppageEabanner = \"apppageEabanner\";\r\nexport const __apppageWorkshop = \"apppageWorkshop\";\r\nexport const __apppageGreenlight = \"apppageGreenlight\";\r\nexport const __apppageLegal = \"apppageLegal\";\r\nexport const __apppageFranchise = \"apppageFranchise\";\r\nexport const __apppageMorefromfranchise = \"apppageMorefromfranchise\";\r\nexport const __bugFeature = \"bugFeature\";\r\nexport const __always = \"always\";\r\nexport const __ratingDetails = \"ratingDetails\";\r\nexport const __dropsWorthAvg = \"dropsWorthAvg\";\r\nexport const __familySharingNotice_notice = \"familySharingNotice_notice\";\r\nexport const __familySharingNotice_desc = \"familySharingNotice_desc\";\r\nexport const __visitStore = \"visitStore\";\r\nexport const __all = \"all\";\r\nexport const __externalFunds = \"externalFunds\";\r\nexport const __shoppingCartHistory = \"shoppingCartHistory\";\r\nexport const __manageWebapiKey = \"manageWebapiKey\";\r\nexport const __steamCloudHeader = \"steamCloudHeader\";\r\nexport const __steamCloudSaves = \"steamCloudSaves\";\r\nexport const __gamesWithDrops = \"gamesWithDrops\";\r\nexport const __binderView = \"binderView\";\r\nexport const __usingLanguage = \"usingLanguage\";\r\nexport const __loginWarning = \"loginWarning\";\r\nexport const __visitTradeForum = \"visitTradeForum\";\r\nexport const __purchaseDate = \"purchaseDate\";\r\nexport const __customBackgroundHelp = \"customBackgroundHelp\";\r\nexport const __dateUnlocked = \"dateUnlocked\";\r\nexport const __netSpent = \"netSpent\";\r\nexport const __buy = \"buy\";\r\nexport const __buyPackage = \"buyPackage\";\r\nexport const __moreInformation = \"moreInformation\";\r\nexport const __regionUnavailable = \"regionUnavailable\";\r\nexport const __avgPrice_3cards = \"avgPrice_3cards\";\r\nexport const __groups_leaveGroupsConfirm = \"groups_leaveGroupsConfirm\";\r\nexport const __groups_manageGroups = \"groups_manageGroups\";\r\nexport const __groups_actionGroups = \"groups_actionGroups\";\r\nexport const __groups_select = \"groups_select\";\r\nexport const __groups_leave = \"groups_leave\";\r\nexport const __groups_selected = \"groups_selected\";\r\nexport const __groups_leaveAdminConfirm_currentlyAdmin = \"groups_leaveAdminConfirm_currentlyAdmin\";\r\nexport const __groups_leaveAdminConfirm_wantToLeave = \"groups_leaveAdminConfirm_wantToLeave\";\r\nexport const __export_wishlist = \"export_wishlist\";\r\nexport const __export_type = \"export_type\";\r\nexport const __export_format = \"export_format\";\r\nexport const __export_text = \"export_text\";\r\nexport const __export_download = \"export_download\";\r\nexport const __export_copyClipboard = \"export_copyClipboard\";\r\nexport const __none = \"none\";\r\nexport const __emptyWishlist_title = \"emptyWishlist_title\";\r\nexport const __emptyWishlist_confirm = \"emptyWishlist_confirm\";\r\nexport const __emptyWishlist_removing = \"emptyWishlist_removing\";\r\nexport const __about = \"about\";\r\nexport const __never = \"never\";\r\nexport const __couponAvailable = \"couponAvailable\";\r\nexport const __launchRandom = \"launchRandom\";\r\nexport const __playGame = \"playGame\";\r\nexport const __dropsValue = \"dropsValue\";\r\nexport const __cardsRemain = \"cardsRemain\";\r\nexport const __wishlist = \"wishlist\";\r\nexport const __onWishlist = \"onWishlist\";\r\nexport const __onWaitlist = \"onWaitlist\";\r\nexport const __onWishlistAndWaitlist = \"onWishlistAndWaitlist\";\r\nexport const __ok = \"ok\";\r\nexport const __cancel = \"cancel\";\r\nexport const __wikiArticle = \"wikiArticle\";\r\nexport const __viewAll = \"viewAll\";\r\nexport const __gamesWithBooster = \"gamesWithBooster\";\r\nexport const __sortBy = \"sortBy\";\r\nexport const __playtime = \"playtime\";\r\nexport const __awards = \"awards\";\r\nexport const __year = \"year\";\r\nexport const __lastonline = \"lastonline\";\r\nexport const __members = \"members\";\r\nexport const __name = \"name\";\r\nexport const __drmThirdPartySub = \"drmThirdPartySub\";\r\nexport const __customize = \"customize\";\r\nexport const __bundleSavingText = \"bundleSavingText\";\r\nexport const __thewordoptions = \"thewordoptions\";\r\nexport const __discussions = \"discussions\";\r\nexport const __pricing_lowestPrice = \"pricing_lowestPrice\";\r\nexport const __pricing_historicalLow = \"pricing_historicalLow\";\r\nexport const __pricing_bundled = \"pricing_bundled\";\r\nexport const __pricing_withVoucher = \"pricing_withVoucher\";\r\nexport const __pricing_store = \"pricing_store\";\r\nexport const __pricing_bundleCount = \"pricing_bundleCount\";\r\nexport const __webBrowserChat = \"webBrowserChat\";\r\nexport const __steamClientChat = \"steamClientChat\";\r\nexport const __equipOnProfile = \"equipOnProfile\";\r\nexport const __previewBackground = \"previewBackground\";\r\nexport const __expandSlider = \"expandSlider\";\r\nexport const __contractSlider = \"contractSlider\";\r\nexport const __earlyAccess = \"earlyAccess\";\r\nexport const __tagShort = \"tagShort\";\r\nexport const __noPriceData = \"noPriceData\";\r\nexport const __userScore = \"userScore\";\r\nexport const __marketPopularItemsToggle = \"marketPopularItemsToggle\";\r\nexport const __showProgressbar = \"showProgressbar\";\r\nexport const __achievements_option = \"achievements_option\";\r\nexport const __achievements_summary = \"achievements_summary\";\r\nexport const __bundle_offerEnds = \"bundle_offerEnds\";\r\nexport const __bundle_includes = \"bundle_includes\";\r\nexport const __bundle_tierIncludes = \"bundle_tierIncludes\";\r\nexport const __bundle_tier = \"bundle_tier\";\r\nexport const __bundle_header = \"bundle_header\";\r\nexport const __bundle_info = \"bundle_info\";\r\nexport const __charts_peakall = \"charts_peakall\";\r\nexport const __charts_current = \"charts_current\";\r\nexport const __charts_playingNow = \"charts_playingNow\";\r\nexport const __charts_peaktoday = \"charts_peaktoday\";\r\nexport const __hltb_title = \"hltb_title\";\r\nexport const __hltb_mainE = \"hltb_mainE\";\r\nexport const __hltb_compl = \"hltb_compl\";\r\nexport const __hltb_main = \"hltb_main\";\r\nexport const __options_friendsAndGroups = \"options_friendsAndGroups\";\r\nexport const __options_friendsAppendNickname = \"options_friendsAppendNickname\";\r\nexport const __options_settingsMngmt_import = \"options_settingsMngmt_import\";\r\nexport const __options_settingsMngmt_importSuccess = \"options_settingsMngmt_importSuccess\";\r\nexport const __options_settingsMngmt_importFail = \"options_settingsMngmt_importFail\";\r\nexport const __options_settingsMngmt_export = \"options_settingsMngmt_export\";\r\nexport const __options_settingsMngmt_reset = \"options_settingsMngmt_reset\";\r\nexport const __options_showCustomThemes = \"options_showCustomThemes\";\r\nexport const __options_communityDefaultTab = \"options_communityDefaultTab\";\r\nexport const __options_videos = \"options_videos\";\r\nexport const __options_broadcasts = \"options_broadcasts\";\r\nexport const __options_artwork = \"options_artwork\";\r\nexport const __options_screenshots = \"options_screenshots\";\r\nexport const __options_showBacktotop = \"options_showBacktotop\";\r\nexport const __options_contextMenu = \"options_contextMenu\";\r\nexport const __options_contextSteamStore = \"options_contextSteamStore\";\r\nexport const __options_contextSteamMarket = \"options_contextSteamMarket\";\r\nexport const __options_contextItad = \"options_contextItad\";\r\nexport const __options_contextBartervg = \"options_contextBartervg\";\r\nexport const __options_contextSteamdb = \"options_contextSteamdb\";\r\nexport const __options_contextSteamdbInstant = \"options_contextSteamdbInstant\";\r\nexport const __options_contextSteamKeys = \"options_contextSteamKeys\";\r\nexport const __options_wsgf = \"options_wsgf\";\r\nexport const __options_versionShow = \"options_versionShow\";\r\nexport const __options_steamcardexchange = \"options_steamcardexchange\";\r\nexport const __options_regionalPrice = \"options_regionalPrice\";\r\nexport const __options_excludef2p = \"options_excludef2p\";\r\nexport const __options_profileLinkImagesNone = \"options_profileLinkImagesNone\";\r\nexport const __options_profileLinks = \"options_profileLinks\";\r\nexport const __options_tag = \"options_tag\";\r\nexport const __options_icon = \"options_icon\";\r\nexport const __options_name = \"options_name\";\r\nexport const __options_showAlternativeLinuxIcon = \"options_showAlternativeLinuxIcon\";\r\nexport const __options_replacecommunityhublinks = \"options_replacecommunityhublinks\";\r\nexport const __options_hideannouncementcomments = \"options_hideannouncementcomments\";\r\nexport const __options_hidetmsymbols = \"options_hidetmsymbols\";\r\nexport const __options_metacritic = \"options_metacritic\";\r\nexport const __options_opencritic = \"options_opencritic\";\r\nexport const __options_hideactivelistings = \"options_hideactivelistings\";\r\nexport const __options_showlowestmarketprice = \"options_showlowestmarketprice\";\r\nexport const __options_clear = \"options_clear\";\r\nexport const __options_coupon = \"options_coupon\";\r\nexport const __options_showPackageInfo = \"options_showPackageInfo\";\r\nexport const __options_wlbuttoncommunityapp = \"options_wlbuttoncommunityapp\";\r\nexport const __options_removeguideslanguagefilter = \"options_removeguideslanguagefilter\";\r\nexport const __options_confirmdeletecomment = \"options_confirmdeletecomment\";\r\nexport const __options_disablelinkfilter = \"options_disablelinkfilter\";\r\nexport const __options_regionalPriceOn = \"options_regionalPriceOn\";\r\nexport const __options_horizontalscrolling = \"options_horizontalscrolling\";\r\nexport const __options_supportinfo = \"options_supportinfo\";\r\nexport const __options_drm = \"options_drm\";\r\nexport const __options_profileLinkImages = \"options_profileLinkImages\";\r\nexport const __options_show1clickgoo = \"options_show1clickgoo\";\r\nexport const __options_hltb = \"options_hltb\";\r\nexport const __options_hidespamcomments = \"options_hidespamcomments\";\r\nexport const __options_gift = \"options_gift\";\r\nexport const __options_regionalPriceMouse = \"options_regionalPriceMouse\";\r\nexport const __options_lowestpriceHeader = \"options_lowestpriceHeader\";\r\nexport const __options_storesAll = \"options_storesAll\";\r\nexport const __options_viewInCurrency = \"options_viewInCurrency\";\r\nexport const __options_showEarlyAccess = \"options_showEarlyAccess\";\r\nexport const __options_profileLinkImagesGray = \"options_profileLinkImagesGray\";\r\nexport const __options_quickinv = \"options_quickinv\";\r\nexport const __options_quickinvDiff = \"options_quickinvDiff\";\r\nexport const __options_sendAgeInfo = \"options_sendAgeInfo\";\r\nexport const __options_removebroadcasts = \"options_removebroadcasts\";\r\nexport const __options_exfgls = \"options_exfgls\";\r\nexport const __options_mp4video = \"options_mp4video\";\r\nexport const __options_youtube = \"options_youtube\";\r\nexport const __options_twitch = \"options_twitch\";\r\nexport const __options_pcgw = \"options_pcgw\";\r\nexport const __options_completionistme = \"options_completionistme\";\r\nexport const __options_protondb = \"options_protondb\";\r\nexport const __options_storeSteamcards = \"options_storeSteamcards\";\r\nexport const __options_spamcommentregex = \"options_spamcommentregex\";\r\nexport const __options_regionalHideworld = \"options_regionalHideworld\";\r\nexport const __options_showAstatslink = \"options_showAstatslink\";\r\nexport const __options_showYoutubegameplay = \"options_showYoutubegameplay\";\r\nexport const __options_showYoutubereviews = \"options_showYoutubereviews\";\r\nexport const __options_openinnewtab = \"options_openinnewtab\";\r\nexport const __options_showbartervg = \"options_showbartervg\";\r\nexport const __options_guest = \"options_guest\";\r\nexport const __options_collection = \"options_collection\";\r\nexport const __options_waitlist = \"options_waitlist\";\r\nexport const __options_showPlayersInfo = \"options_showPlayersInfo\";\r\nexport const __options_showallstats = \"options_showallstats\";\r\nexport const __options_lowestpriceOnwishlist = \"options_lowestpriceOnwishlist\";\r\nexport const __options_steamrepapi = \"options_steamrepapi\";\r\nexport const __options_profileSteamid = \"options_profileSteamid\";\r\nexport const __options_profilePinnedBg = \"options_profilePinnedBg\";\r\nexport const __options_lowestprice = \"options_lowestprice\";\r\nexport const __options_owned = \"options_owned\";\r\nexport const __options_itadlinks = \"options_itadlinks\";\r\nexport const __options_steamdb = \"options_steamdb\";\r\nexport const __options_profileLinkImagesColor = \"options_profileLinkImagesColor\";\r\nexport const __options_showViewInLibrary = \"options_showViewInLibrary\";\r\nexport const __options_installSteamButton = \"options_installSteamButton\";\r\nexport const __options_replaceViewClient = \"options_replaceViewClient\";\r\nexport const __options_showEmptyWishlist = \"options_showEmptyWishlist\";\r\nexport const __options_showWishlistStats = \"options_showWishlistStats\";\r\nexport const __options_oneclickremovewl = \"options_oneclickremovewl\";\r\nexport const __options_userNotes_userNotes = \"options_userNotes_userNotes\";\r\nexport const __options_userNotes_app = \"options_userNotes_app\";\r\nexport const __options_userNotes_wishlist = \"options_userNotes_wishlist\";\r\nexport const __options_userNotes_loc = \"options_userNotes_loc\";\r\nexport const __options_userNotes_syncedStorage = \"options_userNotes_syncedStorage\";\r\nexport const __options_userNotes_local = \"options_userNotes_local\";\r\nexport const __options_inventoryNavText = \"options_inventoryNavText\";\r\nexport const __options_marketTotal = \"options_marketTotal\";\r\nexport const __options_lowestpriceCoupon = \"options_lowestpriceCoupon\";\r\nexport const __options_general = \"options_general\";\r\nexport const __options_apppage = \"options_apppage\";\r\nexport const __options_market = \"options_market\";\r\nexport const __options_inventory = \"options_inventory\";\r\nexport const __options_profile = \"options_profile\";\r\nexport const __options_group = \"options_group\";\r\nexport const __options_friendActivity = \"options_friendActivity\";\r\nexport const __options_groupLinks = \"options_groupLinks\";\r\nexport const __options_showLanguagewarning = \"options_showLanguagewarning\";\r\nexport const __options_homepage = \"options_homepage\";\r\nexport const __options_homepageDefaultTab = \"options_homepageDefaultTab\";\r\nexport const __options_homepageDefaultTabRemember = \"options_homepageDefaultTabRemember\";\r\nexport const __options_homepageDefaultTabNewreleases = \"options_homepageDefaultTabNewreleases\";\r\nexport const __options_homepageDefaultTabTopsellers = \"options_homepageDefaultTabTopsellers\";\r\nexport const __options_homepageDefaultTabUpcoming = \"options_homepageDefaultTabUpcoming\";\r\nexport const __options_homepageDefaultTabSpecials = \"options_homepageDefaultTabSpecials\";\r\nexport const __options_homepageDefaultTabFree = \"options_homepageDefaultTabFree\";\r\nexport const __options_wishlist = \"options_wishlist\";\r\nexport const __options_addAnotherRegion = \"options_addAnotherRegion\";\r\nexport const __options_skipGotSteam = \"options_skipGotSteam\";\r\nexport const __options_storeGeneralThirdparty = \"options_storeGeneralThirdparty\";\r\nexport const __options_purchaseDates = \"options_purchaseDates\";\r\nexport const __options_showBadgeProgress = \"options_showBadgeProgress\";\r\nexport const __options_showCoupon = \"options_showCoupon\";\r\nexport const __options_showWishlistLink = \"options_showWishlistLink\";\r\nexport const __options_showWishlistCount = \"options_showWishlistCount\";\r\nexport const __options_profileShowcaseTwitch = \"options_profileShowcaseTwitch\";\r\nexport const __options_profileShowcaseOwnTwitch = \"options_profileShowcaseOwnTwitch\";\r\nexport const __options_profileShowcaseTwitchProfileonly = \"options_profileShowcaseTwitchProfileonly\";\r\nexport const __options_lang_english = \"options_lang_english\";\r\nexport const __options_lang_brazilian = \"options_lang_brazilian\";\r\nexport const __options_lang_bulgarian = \"options_lang_bulgarian\";\r\nexport const __options_lang_czech = \"options_lang_czech\";\r\nexport const __options_lang_danish = \"options_lang_danish\";\r\nexport const __options_lang_dutch = \"options_lang_dutch\";\r\nexport const __options_lang_finnish = \"options_lang_finnish\";\r\nexport const __options_lang_french = \"options_lang_french\";\r\nexport const __options_lang_greek = \"options_lang_greek\";\r\nexport const __options_lang_german = \"options_lang_german\";\r\nexport const __options_lang_hungarian = \"options_lang_hungarian\";\r\nexport const __options_lang_indonesian = \"options_lang_indonesian\";\r\nexport const __options_lang_italian = \"options_lang_italian\";\r\nexport const __options_lang_japanese = \"options_lang_japanese\";\r\nexport const __options_lang_koreana = \"options_lang_koreana\";\r\nexport const __options_lang_norwegian = \"options_lang_norwegian\";\r\nexport const __options_lang_polish = \"options_lang_polish\";\r\nexport const __options_lang_portuguese = \"options_lang_portuguese\";\r\nexport const __options_lang_russian = \"options_lang_russian\";\r\nexport const __options_lang_romanian = \"options_lang_romanian\";\r\nexport const __options_lang_schinese = \"options_lang_schinese\";\r\nexport const __options_lang_spanish = \"options_lang_spanish\";\r\nexport const __options_lang_latam = \"options_lang_latam\";\r\nexport const __options_lang_swedish = \"options_lang_swedish\";\r\nexport const __options_lang_tchinese = \"options_lang_tchinese\";\r\nexport const __options_lang_thai = \"options_lang_thai\";\r\nexport const __options_lang_turkish = \"options_lang_turkish\";\r\nexport const __options_lang_ukrainian = \"options_lang_ukrainian\";\r\nexport const __options_lang_vietnamese = \"options_lang_vietnamese\";\r\nexport const __options_addCustomLink = \"options_addCustomLink\";\r\nexport const __options_autoDetect = \"options_autoDetect\";\r\nexport const __options_addToWaitlist = \"options_addToWaitlist\";\r\nexport const __options_collectionBannerNotOwned = \"options_collectionBannerNotOwned\";\r\nexport const __options_maintainers = \"options_maintainers\";\r\nexport const __options_withHelpOf = \"options_withHelpOf\";\r\nexport const __options_contributors = \"options_contributors\";\r\nexport const __options_aboutDesc = \"options_aboutDesc\";\r\nexport const __options_aboutDescLinks = \"options_aboutDescLinks\";\r\nexport const __options_footerFork = \"options_footerFork\";\r\nexport const __options_footerAuthor = \"options_footerAuthor\";\r\nexport const __ready_loading = \"ready_loading\";\r\nexport const __ready_ready = \"ready_ready\";\r\nexport const __ready_failed = \"ready_failed\";\r\nexport const __ready_serverOutage = \"ready_serverOutage\";\r\nexport const __twitch_nowStreaming = \"twitch_nowStreaming\";\r\nexport const __twitch_viewers = \"twitch_viewers\";\r\nexport const __dlcSelect_wishlistedDlc = \"dlcSelect_wishlistedDlc\";\r\nexport const __dlcSelect_none = \"dlcSelect_none\";\r\nexport const __dlcSelect_unownedDlc = \"dlcSelect_unownedDlc\";\r\nexport const __tag_wishlist = \"tag_wishlist\";\r\nexport const __tag_coupon = \"tag_coupon\";\r\nexport const __tag_invGift = \"tag_invGift\";\r\nexport const __tag_invGuestpass = \"tag_invGuestpass\";\r\nexport const __tag_owned = \"tag_owned\";\r\nexport const __tag_notinterested = \"tag_notinterested\";\r\nexport const __tag_ignoredOwned = \"tag_ignoredOwned\";\r\nexport const __tag_collection = \"tag_collection\";\r\nexport const __tag_waitlist = \"tag_waitlist\";\r\nexport const __wallet_customAmount = \"wallet_customAmount\";\r\nexport const __wallet_customAmountText = \"wallet_customAmountText\";\r\nexport const __wallet_customGiftcard = \"wallet_customGiftcard\";\r\nexport const __wsgf_incomplete = \"wsgf_incomplete\";\r\nexport const __wsgf_unsupported = \"wsgf_unsupported\";\r\nexport const __wsgf_gold = \"wsgf_gold\";\r\nexport const __wsgf_silver = \"wsgf_silver\";\r\nexport const __wsgf_limited = \"wsgf_limited\";\r\nexport const __wsgf_certifications = \"wsgf_certifications\";\r\nexport const __itad_enableSyncLibrary = \"itad_enableSyncLibrary\";\r\nexport const __itad_enableSyncWishlist = \"itad_enableSyncWishlist\";\r\nexport const __itad_import = \"itad_import\";\r\nexport const __itad_lastImport = \"itad_lastImport\";\r\nexport const __itad_from = \"itad_from\";\r\nexport const __itad_to = \"itad_to\";\r\nexport const __itad_syncNow = \"itad_syncNow\";\r\nexport const __itad_info_itadSteam = \"itad_info_itadSteam\";\r\nexport const __itad_info_steamItad = \"itad_info_steamItad\";\r\nexport const __itad_syncEvents = \"itad_syncEvents\";\r\nexport const __tradeoffer_numItem = \"tradeoffer_numItem\";\r\nexport const __tradeoffer_numItems = \"tradeoffer_numItems\";\r\nexport const __tradeoffer_back = \"tradeoffer_back\";\r\nexport const __update_dontShow = \"update_dontShow\";\r\nexport const __update_updated = \"update_updated\";\r\nexport const __update_changes = \"update_changes\";\r\nexport const __register_success = \"register_success\";\r\nexport const __register_owned = \"register_owned\";\r\nexport const __register_notavail = \"register_notavail\";\r\nexport const __register_invalid = \"register_invalid\";\r\nexport const __register_already = \"register_already\";\r\nexport const __register_dlc = \"register_dlc\";\r\nexport const __register_wallet = \"register_wallet\";\r\nexport const __register_toomany = \"register_toomany\";\r\nexport const __register_default = \"register_default\";\r\nexport const __wl_label = \"wl_label\";\r\nexport const __wl_totalPrice = \"wl_totalPrice\";\r\nexport const __wl_inWishlist = \"wl_inWishlist\";\r\nexport const __wl_onSale = \"wl_onSale\";\r\nexport const __wl_noPrice = \"wl_noPrice\";\r\nexport const __wl_hidden = \"wl_hidden\";\r\nexport const __wl_hiddenTooltip = \"wl_hiddenTooltip\";\r\nexport const __wl_removeTitle = \"wl_removeTitle\";\r\nexport const __wl_removeConfirm = \"wl_removeConfirm\";\r\nexport const __wl_removeConfirmWarn = \"wl_removeConfirmWarn\";\r\nexport const __coll_totalTime = \"coll_totalTime\";\r\nexport const __coll_inCollection = \"coll_inCollection\";\r\nexport const __coll_played = \"coll_played\";\r\nexport const __coll_neverPlayed = \"coll_neverPlayed\";\r\nexport const __userNote_add = \"userNote_add\";\r\nexport const __userNote_update = \"userNote_update\";\r\nexport const __userNote_addForGame = \"userNote_addForGame\";\r\nexport const __userNote_notEnoughSpace = \"userNote_notEnoughSpace\";\r\nexport const __userNote_notEnoughSpaceDesc = \"userNote_notEnoughSpaceDesc\";\r\nexport const __userNote_closeOnStorage = \"userNote_closeOnStorage\";\r\nexport const __userNote_closeOnStorageDesc = \"userNote_closeOnStorageDesc\";\r\nexport const __userNote_storageWarningDesc = \"userNote_storageWarningDesc\";\r\nexport const __userNote_saveSyncedStorage = \"userNote_saveSyncedStorage\";\r\nexport const __userNote_saveLocal = \"userNote_saveLocal\";\r\nexport const __userNote_syncOption = \"userNote_syncOption\";\r\nexport const __userNote_syncInfo_1 = \"userNote_syncInfo_1\";\r\nexport const __userNote_syncInfo_2 = \"userNote_syncInfo_2\";\r\nexport const __userNote_syncInfo_3 = \"userNote_syncInfo_3\";\r\nexport const __userNote_syncButtonPush = \"userNote_syncButtonPush\";\r\nexport const __userNote_syncButtonPull = \"userNote_syncButtonPull\";\r\nexport const __userNote_syncPulled = \"userNote_syncPulled\";\r\nexport const __userNote_syncPushed = \"userNote_syncPushed\";\r\nexport const __userNote_syncFailed = \"userNote_syncFailed\";\r\nexport const __userNote_syncError = \"userNote_syncError\";\r\nexport const __userNote_syncErrorEmpty = \"userNote_syncErrorEmpty\";\r\nexport const __userNote_syncErrorUnknown = \"userNote_syncErrorUnknown\";\r\nexport const __userNote_syncErrorLength = \"userNote_syncErrorLength\";\r\nexport const __queue_new = \"queue_new\";\r\nexport const __queue_newTooltip = \"queue_newTooltip\";\r\nexport const __workshop_workshop = \"workshop_workshop\";\r\nexport const __workshop_subscriptions = \"workshop_subscriptions\";\r\nexport const __workshop_subscribeAll = \"workshop_subscribeAll\";\r\nexport const __workshop_subscribeConfirm = \"workshop_subscribeConfirm\";\r\nexport const __workshop_subscribeLoading = \"workshop_subscribeLoading\";\r\nexport const __workshop_unsubscribeAll = \"workshop_unsubscribeAll\";\r\nexport const __workshop_unsubscribeConfirm = \"workshop_unsubscribeConfirm\";\r\nexport const __workshop_unsubscribeLoading = \"workshop_unsubscribeLoading\";\r\nexport const __workshop_finished = \"workshop_finished\";\r\nexport const __workshop_failed = \"workshop_failed\";\r\nexport const __originalAuthors = \"originalAuthors\";\r\nexport const __acknowledgements = \"acknowledgements\";\r\nexport const __countries_ad = \"countries_ad\";\r\nexport const __countries_ae = \"countries_ae\";\r\nexport const __countries_af = \"countries_af\";\r\nexport const __countries_ag = \"countries_ag\";\r\nexport const __countries_ai = \"countries_ai\";\r\nexport const __countries_al = \"countries_al\";\r\nexport const __countries_am = \"countries_am\";\r\nexport const __countries_an = \"countries_an\";\r\nexport const __countries_ao = \"countries_ao\";\r\nexport const __countries_ar = \"countries_ar\";\r\nexport const __countries_as = \"countries_as\";\r\nexport const __countries_at = \"countries_at\";\r\nexport const __countries_au = \"countries_au\";\r\nexport const __countries_aw = \"countries_aw\";\r\nexport const __countries_az = \"countries_az\";\r\nexport const __countries_ba = \"countries_ba\";\r\nexport const __countries_bb = \"countries_bb\";\r\nexport const __countries_bd = \"countries_bd\";\r\nexport const __countries_be = \"countries_be\";\r\nexport const __countries_bf = \"countries_bf\";\r\nexport const __countries_bg = \"countries_bg\";\r\nexport const __countries_bh = \"countries_bh\";\r\nexport const __countries_bi = \"countries_bi\";\r\nexport const __countries_bj = \"countries_bj\";\r\nexport const __countries_bm = \"countries_bm\";\r\nexport const __countries_bn = \"countries_bn\";\r\nexport const __countries_bo = \"countries_bo\";\r\nexport const __countries_br = \"countries_br\";\r\nexport const __countries_bs = \"countries_bs\";\r\nexport const __countries_bt = \"countries_bt\";\r\nexport const __countries_bv = \"countries_bv\";\r\nexport const __countries_bw = \"countries_bw\";\r\nexport const __countries_by = \"countries_by\";\r\nexport const __countries_bz = \"countries_bz\";\r\nexport const __countries_ca = \"countries_ca\";\r\nexport const __countries_cd = \"countries_cd\";\r\nexport const __countries_cf = \"countries_cf\";\r\nexport const __countries_cg = \"countries_cg\";\r\nexport const __countries_ch = \"countries_ch\";\r\nexport const __countries_ci = \"countries_ci\";\r\nexport const __countries_ck = \"countries_ck\";\r\nexport const __countries_cl = \"countries_cl\";\r\nexport const __countries_cm = \"countries_cm\";\r\nexport const __countries_cn = \"countries_cn\";\r\nexport const __countries_co = \"countries_co\";\r\nexport const __countries_cr = \"countries_cr\";\r\nexport const __countries_cu = \"countries_cu\";\r\nexport const __countries_cv = \"countries_cv\";\r\nexport const __countries_cy = \"countries_cy\";\r\nexport const __countries_cz = \"countries_cz\";\r\nexport const __countries_de = \"countries_de\";\r\nexport const __countries_dj = \"countries_dj\";\r\nexport const __countries_dk = \"countries_dk\";\r\nexport const __countries_dm = \"countries_dm\";\r\nexport const __countries_do = \"countries_do\";\r\nexport const __countries_dz = \"countries_dz\";\r\nexport const __countries_ec = \"countries_ec\";\r\nexport const __countries_ee = \"countries_ee\";\r\nexport const __countries_eg = \"countries_eg\";\r\nexport const __countries_eh = \"countries_eh\";\r\nexport const __countries_er = \"countries_er\";\r\nexport const __countries_es = \"countries_es\";\r\nexport const __countries_et = \"countries_et\";\r\nexport const __countries_fi = \"countries_fi\";\r\nexport const __countries_fj = \"countries_fj\";\r\nexport const __countries_fk = \"countries_fk\";\r\nexport const __countries_fm = \"countries_fm\";\r\nexport const __countries_fo = \"countries_fo\";\r\nexport const __countries_fr = \"countries_fr\";\r\nexport const __countries_ga = \"countries_ga\";\r\nexport const __countries_gb = \"countries_gb\";\r\nexport const __countries_gd = \"countries_gd\";\r\nexport const __countries_ge = \"countries_ge\";\r\nexport const __countries_gf = \"countries_gf\";\r\nexport const __countries_gg = \"countries_gg\";\r\nexport const __countries_gh = \"countries_gh\";\r\nexport const __countries_gi = \"countries_gi\";\r\nexport const __countries_gl = \"countries_gl\";\r\nexport const __countries_gm = \"countries_gm\";\r\nexport const __countries_gn = \"countries_gn\";\r\nexport const __countries_gp = \"countries_gp\";\r\nexport const __countries_gq = \"countries_gq\";\r\nexport const __countries_gr = \"countries_gr\";\r\nexport const __countries_gs = \"countries_gs\";\r\nexport const __countries_gt = \"countries_gt\";\r\nexport const __countries_gu = \"countries_gu\";\r\nexport const __countries_gw = \"countries_gw\";\r\nexport const __countries_gy = \"countries_gy\";\r\nexport const __countries_hk = \"countries_hk\";\r\nexport const __countries_hm = \"countries_hm\";\r\nexport const __countries_hn = \"countries_hn\";\r\nexport const __countries_hr = \"countries_hr\";\r\nexport const __countries_ht = \"countries_ht\";\r\nexport const __countries_hu = \"countries_hu\";\r\nexport const __countries_id = \"countries_id\";\r\nexport const __countries_ie = \"countries_ie\";\r\nexport const __countries_il = \"countries_il\";\r\nexport const __countries_im = \"countries_im\";\r\nexport const __countries_in = \"countries_in\";\r\nexport const __countries_io = \"countries_io\";\r\nexport const __countries_iq = \"countries_iq\";\r\nexport const __countries_ir = \"countries_ir\";\r\nexport const __countries_is = \"countries_is\";\r\nexport const __countries_it = \"countries_it\";\r\nexport const __countries_je = \"countries_je\";\r\nexport const __countries_jm = \"countries_jm\";\r\nexport const __countries_jo = \"countries_jo\";\r\nexport const __countries_jp = \"countries_jp\";\r\nexport const __countries_ke = \"countries_ke\";\r\nexport const __countries_kg = \"countries_kg\";\r\nexport const __countries_kh = \"countries_kh\";\r\nexport const __countries_ki = \"countries_ki\";\r\nexport const __countries_km = \"countries_km\";\r\nexport const __countries_kn = \"countries_kn\";\r\nexport const __countries_kp = \"countries_kp\";\r\nexport const __countries_kr = \"countries_kr\";\r\nexport const __countries_kw = \"countries_kw\";\r\nexport const __countries_ky = \"countries_ky\";\r\nexport const __countries_kz = \"countries_kz\";\r\nexport const __countries_la = \"countries_la\";\r\nexport const __countries_lb = \"countries_lb\";\r\nexport const __countries_lc = \"countries_lc\";\r\nexport const __countries_li = \"countries_li\";\r\nexport const __countries_lk = \"countries_lk\";\r\nexport const __countries_lr = \"countries_lr\";\r\nexport const __countries_ls = \"countries_ls\";\r\nexport const __countries_lt = \"countries_lt\";\r\nexport const __countries_lu = \"countries_lu\";\r\nexport const __countries_lv = \"countries_lv\";\r\nexport const __countries_ly = \"countries_ly\";\r\nexport const __countries_ma = \"countries_ma\";\r\nexport const __countries_mc = \"countries_mc\";\r\nexport const __countries_md = \"countries_md\";\r\nexport const __countries_me = \"countries_me\";\r\nexport const __countries_mg = \"countries_mg\";\r\nexport const __countries_mh = \"countries_mh\";\r\nexport const __countries_mk = \"countries_mk\";\r\nexport const __countries_ml = \"countries_ml\";\r\nexport const __countries_mm = \"countries_mm\";\r\nexport const __countries_mn = \"countries_mn\";\r\nexport const __countries_mo = \"countries_mo\";\r\nexport const __countries_mp = \"countries_mp\";\r\nexport const __countries_mq = \"countries_mq\";\r\nexport const __countries_mr = \"countries_mr\";\r\nexport const __countries_ms = \"countries_ms\";\r\nexport const __countries_mt = \"countries_mt\";\r\nexport const __countries_mu = \"countries_mu\";\r\nexport const __countries_mv = \"countries_mv\";\r\nexport const __countries_mw = \"countries_mw\";\r\nexport const __countries_mx = \"countries_mx\";\r\nexport const __countries_my = \"countries_my\";\r\nexport const __countries_mz = \"countries_mz\";\r\nexport const __countries_na = \"countries_na\";\r\nexport const __countries_nc = \"countries_nc\";\r\nexport const __countries_ne = \"countries_ne\";\r\nexport const __countries_nf = \"countries_nf\";\r\nexport const __countries_ng = \"countries_ng\";\r\nexport const __countries_ni = \"countries_ni\";\r\nexport const __countries_nl = \"countries_nl\";\r\nexport const __countries_no = \"countries_no\";\r\nexport const __countries_np = \"countries_np\";\r\nexport const __countries_nr = \"countries_nr\";\r\nexport const __countries_nu = \"countries_nu\";\r\nexport const __countries_nz = \"countries_nz\";\r\nexport const __countries_om = \"countries_om\";\r\nexport const __countries_pa = \"countries_pa\";\r\nexport const __countries_pe = \"countries_pe\";\r\nexport const __countries_pf = \"countries_pf\";\r\nexport const __countries_pg = \"countries_pg\";\r\nexport const __countries_ph = \"countries_ph\";\r\nexport const __countries_pk = \"countries_pk\";\r\nexport const __countries_pl = \"countries_pl\";\r\nexport const __countries_pm = \"countries_pm\";\r\nexport const __countries_pn = \"countries_pn\";\r\nexport const __countries_pr = \"countries_pr\";\r\nexport const __countries_ps = \"countries_ps\";\r\nexport const __countries_pt = \"countries_pt\";\r\nexport const __countries_pw = \"countries_pw\";\r\nexport const __countries_py = \"countries_py\";\r\nexport const __countries_qa = \"countries_qa\";\r\nexport const __countries_re = \"countries_re\";\r\nexport const __countries_ro = \"countries_ro\";\r\nexport const __countries_rs = \"countries_rs\";\r\nexport const __countries_ru = \"countries_ru\";\r\nexport const __countries_rw = \"countries_rw\";\r\nexport const __countries_sa = \"countries_sa\";\r\nexport const __countries_sb = \"countries_sb\";\r\nexport const __countries_sc = \"countries_sc\";\r\nexport const __countries_sd = \"countries_sd\";\r\nexport const __countries_se = \"countries_se\";\r\nexport const __countries_sg = \"countries_sg\";\r\nexport const __countries_sh = \"countries_sh\";\r\nexport const __countries_si = \"countries_si\";\r\nexport const __countries_sk = \"countries_sk\";\r\nexport const __countries_sl = \"countries_sl\";\r\nexport const __countries_sm = \"countries_sm\";\r\nexport const __countries_sn = \"countries_sn\";\r\nexport const __countries_so = \"countries_so\";\r\nexport const __countries_sr = \"countries_sr\";\r\nexport const __countries_st = \"countries_st\";\r\nexport const __countries_sv = \"countries_sv\";\r\nexport const __countries_sy = \"countries_sy\";\r\nexport const __countries_sz = \"countries_sz\";\r\nexport const __countries_tc = \"countries_tc\";\r\nexport const __countries_td = \"countries_td\";\r\nexport const __countries_tf = \"countries_tf\";\r\nexport const __countries_tg = \"countries_tg\";\r\nexport const __countries_th = \"countries_th\";\r\nexport const __countries_tj = \"countries_tj\";\r\nexport const __countries_tk = \"countries_tk\";\r\nexport const __countries_tl = \"countries_tl\";\r\nexport const __countries_tm = \"countries_tm\";\r\nexport const __countries_tn = \"countries_tn\";\r\nexport const __countries_to = \"countries_to\";\r\nexport const __countries_tr = \"countries_tr\";\r\nexport const __countries_tt = \"countries_tt\";\r\nexport const __countries_tv = \"countries_tv\";\r\nexport const __countries_tw = \"countries_tw\";\r\nexport const __countries_tz = \"countries_tz\";\r\nexport const __countries_ua = \"countries_ua\";\r\nexport const __countries_ug = \"countries_ug\";\r\nexport const __countries_um = \"countries_um\";\r\nexport const __countries_us = \"countries_us\";\r\nexport const __countries_uy = \"countries_uy\";\r\nexport const __countries_uz = \"countries_uz\";\r\nexport const __countries_va = \"countries_va\";\r\nexport const __countries_vc = \"countries_vc\";\r\nexport const __countries_ve = \"countries_ve\";\r\nexport const __countries_vg = \"countries_vg\";\r\nexport const __countries_vi = \"countries_vi\";\r\nexport const __countries_vn = \"countries_vn\";\r\nexport const __countries_vu = \"countries_vu\";\r\nexport const __countries_wf = \"countries_wf\";\r\nexport const __countries_ws = \"countries_ws\";\r\nexport const __countries_ye = \"countries_ye\";\r\nexport const __countries_yt = \"countries_yt\";\r\nexport const __countries_za = \"countries_za\";\r\nexport const __countries_zm = \"countries_zm\";\r\nexport const __countries_zw = \"countries_zw\";\r\n", "import browser from \"webextension-polyfill\";\r\n\r\nexport default {\r\n    \"version\": browser.runtime.getManifest().version,\r\n    \"db_version\": 6,\r\n} as const;\r\n", "import browser, {type Storage as ns} from \"webextension-polyfill\";\r\nimport Storage, {type StorageSchema} from \"./Storage\";\r\n\r\n// FIXME exports are confusing, figure out better export scheme\r\n\r\n/**\r\n * NOTE: Settings are stored in synced storage, but are omitted from default schema,\r\n * because they should not be accessed directly from storage\r\n */\r\ninterface SyncedStorageSchema extends StorageSchema {\r\n    user_notes: Record<string, string>,\r\n    fav_emoticons: string[],\r\n    sortfriendsby: string,\r\n    sortgroupsby: string,\r\n    sortmylistingsby: string,\r\n    sortreviewsby: string,\r\n    homepage_tab_last: string;\r\n}\r\n\r\n/*\r\n * browser.storage.sync limits\r\n * QUOTA_BYTES = 102400 // 100KB\r\n * QUOTA_BYTES_PER_ITEM = 8192 // 8KB\r\n * MAX_ITEMS = 512\r\n * MAX_WRITE_OPERATIONS_PER_HOUR = 1800\r\n * MAX_WRITE_OPERATIONS_PER_MINUTE = 120\r\n */\r\nexport class SyncedStorage<Schema extends StorageSchema> extends Storage<ns.SyncStorageAreaSync, Schema> {\r\n\r\n    constructor() {\r\n        super(browser.storage.sync);\r\n    }\r\n\r\n    get QUOTA_BYTES_PER_ITEM(): number {\r\n        // see https://github.com/DefinitelyTyped/DefinitelyTyped/discussions/66696\r\n        return browser.storage.sync.QUOTA_BYTES_PER_ITEM ?? 8192;\r\n    }\r\n}\r\n\r\nexport default new SyncedStorage<SyncedStorageSchema>();\r\n", "import {type Storage as ns} from \"webextension-polyfill\";\r\n\r\n/*\r\n * Type declarations stolen from idb, because I was too dumb to figure them out on my own\r\n * */\r\ndeclare type KeyToKeyNoIndex<T> = {\r\n    [K in keyof T]: string extends K ? never : number extends K ? never : K;\r\n};\r\nexport declare type ValuesOf<T> = T extends {\r\n    [K in keyof T]: infer U;\r\n} ? U : never;\r\ndeclare type KnownKeys<T> = ValuesOf<KeyToKeyNoIndex<T>>;\r\n\r\nexport declare type StorageSchema = Record<string, any>;\r\nexport declare type SchemaKeys<Schema extends StorageSchema | unknown> = Schema extends StorageSchema ? (KnownKeys<Schema> & string) : string;\r\nexport declare type SchemaValue<Schema extends StorageSchema | unknown, Key extends SchemaKeys<Schema>> = Schema extends StorageSchema ? Schema[Key] : any;\r\n\r\nexport interface StorageInterface<Schema extends StorageSchema> {\r\n    get<K extends SchemaKeys<Schema>>(key: K): Promise<SchemaValue<Schema, K>|undefined>;\r\n    getObject<T extends Partial<Schema>>(object: T): Promise<T>;\r\n\r\n    set<K extends SchemaKeys<Schema>>(key: K, value: SchemaValue<Schema, K>): Promise<void>;\r\n    setObject(object: Partial<Schema>): Promise<void>;\r\n\r\n    remove<K extends SchemaKeys<Schema>>(...keys: K[]): Promise<void>;\r\n}\r\n\r\nexport default class Storage<\r\n    Area extends ns.SyncStorageAreaSync|ns.LocalStorageArea,\r\n    Schema extends StorageSchema\r\n> implements StorageInterface<Schema> {\r\n\r\n    private storageArea: Area;\r\n\r\n    constructor(storageArea: Area) {\r\n        this.storageArea = storageArea;\r\n    }\r\n\r\n    get onChanged() {\r\n        return this.storageArea.onChanged;\r\n    }\r\n\r\n    async get<K extends SchemaKeys<Schema>>(key: K): Promise<SchemaValue<Schema, K> | undefined> {\r\n        let response = await this.storageArea.get(key);\r\n        return response[key] ?? undefined;\r\n    }\r\n\r\n    getObject<T extends Partial<Schema>>(object: T): Promise<T> {\r\n        return this.storageArea.get(object) as Promise<T>;\r\n    }\r\n\r\n    set<K extends SchemaKeys<Schema>>(key: K, value: SchemaValue<Schema, K>): Promise<void> {\r\n        return this.storageArea.set({[key]: value});\r\n    }\r\n\r\n    setObject(object: Partial<Schema>): Promise<void> {\r\n        return this.storageArea.set(object);\r\n    }\r\n\r\n    remove<K extends SchemaKeys<Schema>>(...keys: K[]): Promise<void> {\r\n        return this.storageArea.remove(keys);\r\n    }\r\n}\r\n", "import Info from \"@Core/Info\";\r\nimport type {SettingsSchema} from \"./_types\";\r\nimport type {SchemaKeys, SchemaValue, StorageInterface} from \"@Core/Storage/Storage\";\r\nimport {SyncedStorage} from \"@Core/Storage/SyncedStorage\";\r\n\r\nexport const DefaultSettings: Readonly<SettingsSchema> = {\r\n    language: \"english\",\r\n\r\n    version: Info.version,\r\n    version_show: true,\r\n\r\n    highlight_owned_color: \"#00ce67\",\r\n    highlight_wishlist_color: \"#0491bf\",\r\n    highlight_coupon_color: \"#a26426\",\r\n    highlight_inv_gift_color: \"#800040\",\r\n    highlight_inv_guestpass_color: \"#513c73\",\r\n    highlight_notinterested_color: \"#4f4f4f\",\r\n    highlight_ignored_owned_color: \"#4f4f4f\",\r\n    highlight_collection_color: \"#856d0e\",\r\n    highlight_waitlist_color: \"#4c7521\",\r\n\r\n    tag_owned_color: \"#00b75b\",\r\n    tag_wishlist_color: \"#0383b4\",\r\n    tag_coupon_color: \"#c27120\",\r\n    tag_inv_gift_color: \"#b10059\",\r\n    tag_inv_guestpass_color: \"#65449a\",\r\n    tag_notinterested_color: \"#4f4f4f\",\r\n    tag_ignored_owned_color: \"#4f4f4f\",\r\n    tag_collection_color: \"#856d0e\",\r\n    tag_waitlist_color: \"#4c7521\",\r\n\r\n    highlight_owned: true,\r\n    highlight_wishlist: true,\r\n    highlight_coupon: false,\r\n    highlight_inv_gift: false,\r\n    highlight_inv_guestpass: false,\r\n    highlight_notinterested: false,\r\n    highlight_ignored_owned: false,\r\n    highlight_excludef2p: false,\r\n    highlight_collection: true,\r\n    highlight_waitlist: true,\r\n\r\n    tag_owned: false,\r\n    tag_wishlist: false,\r\n    tag_coupon: false,\r\n    tag_inv_gift: false,\r\n    tag_inv_guestpass: false,\r\n    tag_notinterested: true,\r\n    tag_ignored_owned: true,\r\n    tag_collection: false,\r\n    tag_waitlist: false,\r\n    tag_short: false,\r\n\r\n    hidetmsymbols: false,\r\n\r\n    showlowestprice: true,\r\n    showlowestprice_onwishlist: true,\r\n    showlowestpricecoupon: true,\r\n    showallstores: true,\r\n    excluded_stores: [],\r\n    override_price: \"auto\",\r\n    showregionalprice: \"mouse\",\r\n    regional_countries: [\"us\", \"gb\", \"fr\", \"br\", \"au\", \"jp\"],\r\n\r\n    show_es_homepagetabs: true,\r\n    showmarkettotal: false,\r\n    showsteamrepapi: true,\r\n    showmcus: true,\r\n    showoc: true,\r\n    showhltb: true,\r\n    showyoutube: true,\r\n    showtwitch: true,\r\n    showpcgw: true,\r\n    showcompletionistme: false,\r\n    showprotondb: false,\r\n    showviewinlibrary: false,\r\n    showsteamcardexchange: false,\r\n    showitadlinks: true,\r\n    showsteamdb: true,\r\n    showbartervg: false,\r\n    showastatslink: true,\r\n    showyoutubegameplay: true,\r\n    showyoutubereviews: true,\r\n    showwsgf: true,\r\n    exfgls: true,\r\n    app_custom_link: [\r\n        {\r\n            enabled: true,\r\n            name: \"Google\",\r\n            url: \"https://www.google.com/search?q=[ID]+[NAME]\",\r\n            icon: \"https://www.google.com/images/branding/product/ico/googleg_lodp.ico\"\r\n        },\r\n    ],\r\n\r\n    customize_apppage: {},\r\n    customize_frontpage: {},\r\n\r\n    show_package_info: false,\r\n    show_players_info: true,\r\n    show_early_access: true,\r\n    show_alternative_linux_icon: false,\r\n    show_itad_button: false,\r\n    skip_got_steam: false,\r\n\r\n    installsteam: \"show\",\r\n    openinnewtab: false,\r\n    keepssachecked: false,\r\n    showemptywishlist: true,\r\n    user_notes_app: true,\r\n    user_notes_wishlist: true,\r\n    showwishliststats: true,\r\n    oneclickremovewl: false,\r\n    user_notes_adapter: \"synced_storage\",\r\n    showlanguagewarning: true,\r\n    showlanguagewarninglanguage: \"english\",\r\n    homepage_tab_selection: \"remember\",\r\n    send_age_info: true,\r\n    removebroadcasts: false,\r\n    mp4video: false,\r\n    horizontalscrolling: true,\r\n    showsupportinfo: true,\r\n    showdrm: true,\r\n    regional_hideworld: false,\r\n    showinvnav: true,\r\n    quickinv: true,\r\n    quickinv_diff: -0.01,\r\n    community_default_tab: \"\",\r\n    showallstats: true,\r\n    replacecommunityhublinks: false,\r\n    hideannouncementcomments: false,\r\n    showachinstore: true,\r\n    hideactivelistings: false,\r\n    showlowestmarketprice: true,\r\n    hidespamcomments: false,\r\n    spamcommentregex: \"[\\\\u2500-\\\\u25FF]\",\r\n    wlbuttoncommunityapp: true,\r\n    removeguideslanguagefilter: false,\r\n    confirmdeletecomment: true,\r\n    disablelinkfilter: false,\r\n    show1clickgoo: true,\r\n    show_profile_link_images: \"gray\",\r\n    show_custom_themes: true,\r\n    profile_pinned_bg: false,\r\n    friends_append_nickname: false,\r\n    profile_steamrepcn: true,\r\n    profile_steamgifts: true,\r\n    profile_steamtrades: true,\r\n    profile_bartervg: true,\r\n    profile_steamrep: true,\r\n    profile_steamdbcalc: true,\r\n    profile_astats: true,\r\n    profile_backpacktf: true,\r\n    profile_astatsnl: true,\r\n    profile_steamid: true,\r\n    profile_custom_link: [\r\n        {\r\n            enabled: true,\r\n            name: \"Google\",\r\n            url: \"https://www.google.com/search?q=[ID]\",\r\n            icon: \"https://www.google.com/images/branding/product/ico/googleg_lodp.ico\"\r\n        },\r\n    ],\r\n    group_steamgifts: true,\r\n    steamcardexchange: true,\r\n    purchase_dates: true,\r\n    show_badge_progress: true,\r\n    show_coupon: true,\r\n    show_wishlist_link: true,\r\n    show_wishlist_count: true,\r\n    show_progressbar: true,\r\n    show_backtotop: false,\r\n\r\n    profile_showcase_twitch: true,\r\n    profile_showcase_own_twitch: false,\r\n    profile_showcase_twitch_profileonly: false,\r\n\r\n    itad_sync_library: true,\r\n    itad_sync_wishlist: true,\r\n    add_to_waitlist: false,\r\n    collection_banner_notowned: false,\r\n    itad_sync_notes: false,\r\n\r\n    context_steam_store: false,\r\n    context_steam_market: false,\r\n    context_itad: false,\r\n    context_bartervg: false,\r\n    context_steamdb: false,\r\n    context_steamdb_instant: false,\r\n    context_steam_keys: false,\r\n};\r\n\r\n\r\ntype TListener = () => void;\r\n\r\nclass Event {\r\n    private listeners: Set<TListener> = new Set();\r\n\r\n    addListener(listener: TListener): void {\r\n        this.listeners.add(listener);\r\n    }\r\n\r\n    removeListener(listener: TListener): void {\r\n        this.listeners.delete(listener);\r\n    }\r\n\r\n    invoke(): void {\r\n        for (const listener of this.listeners) {\r\n            listener();\r\n        }\r\n    }\r\n}\r\n\r\nexport class SettingsStore {\r\n\r\n    private static promise: Promise<void>;\r\n\r\n    private static data: SettingsSchema;\r\n    private static storage: StorageInterface<SettingsSchema> = new SyncedStorage<SettingsSchema>();\r\n\r\n    public static readonly onSaveStart: Event = new Event();\r\n    public static readonly onSaveEnd: Event = new Event();\r\n\r\n    public static async load(): Promise<void> {\r\n        this.data = await this.storage.getObject(DefaultSettings);\r\n    }\r\n\r\n    static init(): Promise<void> {\r\n        if (!this.promise) {\r\n            this.promise = this.load();\r\n        }\r\n        return this.promise;\r\n    }\r\n\r\n    static getDefault<K extends keyof SettingsSchema>(key: K): SettingsSchema[K] {\r\n        return DefaultSettings[key];\r\n    }\r\n\r\n    static get<K extends keyof SettingsSchema>(key: K): SettingsSchema[K] {\r\n        if (!this.data) {\r\n            throw new Error(\"Settings have not been loaded\");\r\n        }\r\n\r\n        return this.data[key];\r\n    }\r\n\r\n    static async set<K extends SchemaKeys<SettingsSchema>>(key: K, value: SchemaValue<SettingsSchema, K>): Promise<void> {\r\n        this.onSaveStart.invoke();\r\n\r\n        this.data[key] = value;\r\n        await this.storage.set(key, value);\r\n\r\n        this.onSaveEnd.invoke();\r\n    }\r\n\r\n    static remove<K extends SchemaKeys<SettingsSchema>>(key: K): void {\r\n        this.storage.remove(key);\r\n        this.data[key] = structuredClone(DefaultSettings[key]);\r\n    }\r\n\r\n    static clear(): void {\r\n        this.storage.remove(...(Object.keys(this.data) as SchemaKeys<SettingsSchema>[]));\r\n        this.data = structuredClone(DefaultSettings);\r\n    }\r\n\r\n    static async import(data: Partial<SettingsSchema>): Promise<void> {\r\n        // TODO check data for valid keys and values\r\n        await this.storage.setObject(data);\r\n        await this.load();\r\n    }\r\n\r\n    static asObject(): SettingsSchema {\r\n        return structuredClone(this.data);\r\n    }\r\n}\r\n\r\nexport default (new Proxy(SettingsStore, {\r\n    get<K extends SchemaKeys<SettingsSchema>>(target: typeof SettingsStore, prop: K): SchemaValue<SettingsSchema, K> {\r\n        return target.get(prop);\r\n    },\r\n\r\n    set<K extends SchemaKeys<SettingsSchema>>(target: typeof SettingsStore, prop: K, value: SchemaValue<SettingsSchema, K>): boolean {\r\n        target.set(prop, value);\r\n        return true;\r\n    }\r\n})) as unknown as SettingsSchema;\r\n\r\n\r\n/*\r\n FIXME not settings, more like cached values\r\n\"user_notes\": {},\r\n\"homepage_tab_last\": null,\r\n\"sortfriendsby\": \"default_ASC\",\r\n\"sortreviewsby\": \"default_ASC\",\r\n\"sortgroupsby\": \"default_ASC\",\r\n\"sortmylistingsby\": \"default_ASC\",\r\n\"fav_emoticons\": [],\r\n\r\n\r\nconst PERSISTENT: (keyof typeof DEFAULTS)[] = [\r\n    \"user_notes\",\r\n    \"user_notes_adapter\",\r\n];\r\n*/\r\n", "import browser from \"webextension-polyfill\";\r\n\r\nexport default class ExtensionResources {\r\n\r\n    static getURL(pathname: string) {\r\n        return browser.runtime.getURL(pathname);\r\n    }\r\n\r\n    static get(pathname: string): Promise<Response> {\r\n        return fetch(ExtensionResources.getURL(pathname));\r\n    }\r\n\r\n    static async getJSON<T>(pathname: string): Promise<T> {\r\n        let response = await ExtensionResources.get(pathname);\r\n        return await response.json();\r\n    }\r\n\r\n    static async getText(pathname: string): Promise<string> {\r\n        let response = await ExtensionResources.get(pathname);\r\n        return await response.text();\r\n    }\r\n}\r\n", "\r\nexport default class Language {\r\n\r\n    public static readonly map: Record<string, string> ={\r\n        \"english\": \"en\",\r\n        \"bulgarian\": \"bg\",\r\n        \"czech\": \"cs\",\r\n        \"danish\": \"da\",\r\n        \"dutch\": \"nl\",\r\n        \"finnish\": \"fi\",\r\n        \"french\": \"fr\",\r\n        \"greek\": \"el\",\r\n        \"german\": \"de\",\r\n        \"hungarian\": \"hu\",\r\n        \"italian\": \"it\",\r\n        \"japanese\": \"ja\",\r\n        \"koreana\": \"ko\",\r\n        \"norwegian\": \"no\",\r\n        \"polish\": \"pl\",\r\n        \"portuguese\": \"pt-PT\",\r\n        \"brazilian\": \"pt-BR\",\r\n        \"russian\": \"ru\",\r\n        \"romanian\": \"ro\",\r\n        \"schinese\": \"zh-CN\",\r\n        \"spanish\": \"es-ES\",\r\n        \"latam\": \"es-419\",\r\n        \"swedish\": \"sv-SE\",\r\n        \"tchinese\": \"zh-TW\",\r\n        \"thai\": \"th\",\r\n        \"turkish\": \"tr\",\r\n        \"ukrainian\": \"ua\",\r\n        \"vietnamese\": \"vi\",\r\n    };\r\n\r\n    private readonly _name: string;\r\n    private readonly _code: string|null;\r\n\r\n    constructor(language: string) {\r\n        this._name = language;\r\n        this._code = Language.map[language] ?? null;\r\n        // TODO should we throw when there is unsupported language?\r\n    }\r\n\r\n    get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    get code(): string|null {\r\n        return this._code;\r\n    }\r\n\r\n    isOneOf(...languages: string[]) {\r\n        return languages.includes(this._name);\r\n    }\r\n}\r\n\r\n", "import browser from \"webextension-polyfill\";\r\nimport ErrorParser from \"@Core/Errors/ErrorParser\";\r\n\r\nexport default class Background {\r\n\r\n    static async send<Response>(action: string, params: Record<string, any>={}): Promise<Response> {\r\n        document.dispatchEvent(new CustomEvent(\"asRequestStart\"));\r\n        try {\r\n            const result = await browser.runtime.sendMessage({action, params});\r\n            document.dispatchEvent(new CustomEvent(\"asRequestDone\"));\r\n            return result;\r\n        } catch(e: any) {\r\n            const error = ErrorParser.parse(e.message ?? \"\");\r\n            document.dispatchEvent(new CustomEvent(\"asRequestError\", {detail: error}));\r\n            throw e;\r\n        }\r\n    }\r\n}\r\n", "\r\n/**\r\n * Convenience class for passing errors between contexts.\r\n * Errors thrown in the context of a message callback on the background page are\r\n * {@link https://github.com/mozilla/webextension-polyfill/blob/87bdfa844da054d189ac28423cf01b64ebfe1e5b/src/browser-polyfill.js#L418\r\n *  cut down to only send the message of the error},\r\n * losing information about the type.\r\n */\r\nexport default class ErrorParser {\r\n\r\n    /**\r\n     * Takes an Error string and parses it by splitting it into name and message\r\n     * @param {String} errStr a string created by Error.prototype.toString\r\n     * @returns {{name: String, msg: String}} an object containing information about the error name and its message\r\n     */\r\n    static parse(errStr: string): {name: string|null, message: string|null} {\r\n        const info = errStr.match(/(.*):\\s(.+)/);\r\n        return info\r\n            ? {name: info[1] ?? \"\", message: info[2] ?? \"\"}\r\n            : {name: null, message: null}\r\n    }\r\n}\r\n", "import Background from \"@Core/Background\";\r\nimport {EAction} from \"@Background/EAction\";\r\nimport type {TAppDetail, TDynamicStoreStatusResponse} from \"@Background/Modules/Store/_types\";\r\n\r\nexport default class SteamStoreApiFacade {\r\n\r\n    static wishlistAdd(appid: number): Promise<void> {\r\n        return Background.send(EAction.Wishlist_Add, {appid});\r\n    }\r\n\r\n    static wishlistRemove(appid: number): Promise<void> {\r\n        return Background.send(EAction.Wishlist_Remove, {appid});\r\n    }\r\n\r\n    static fetchAppDetails(appid: number, filter: string|undefined=undefined): Promise<TAppDetail|null> {\r\n        return Background.send(EAction.AppDetails, {appid, filter});\r\n    }\r\n\r\n    static getPurchaseDate(appName: string, lang: string): Promise<string|null> {\r\n        return Background.send(EAction.Purchases, {appName, lang});\r\n    }\r\n\r\n    static getCurrency(): Promise<string> {\r\n        return Background.send(EAction.Currency);\r\n    }\r\n\r\n    static clearPurchases(): Promise<void> {\r\n        return Background.send(EAction.Purchases_Clear);\r\n    }\r\n\r\n    static clearDynamicStore(): Promise<void> {\r\n        return Background.send(EAction.DynamicStore_Clear);\r\n    }\r\n\r\n    static getDynamicStoreStatus(ids: string[]): Promise<TDynamicStoreStatusResponse> {\r\n        return Background.send(EAction.DynamicStore_Status, {ids});\r\n    }\r\n\r\n    static getDynamicStoreRandomApp(): Promise<number|null> {\r\n        return Background.send(EAction.DynamicStore_RandomApp);\r\n    }\r\n}\r\n", "import Settings from \"@Options/Data/Settings\";\r\nimport ExtensionResources from \"@Core/ExtensionResources\";\r\nimport Language from \"@Core/Localization/Language\";\r\nimport SteamStoreApiFacade from \"@Content/Modules/Facades/SteamStoreApiFacade\";\r\n\r\nexport interface TLocale {\r\n    stats: {\r\n        strings: number,\r\n        translated: number,\r\n    },\r\n    strings: Record<string, string>\r\n}\r\n\r\nexport default class Localization {\r\n\r\n    public static locale: TLocale;\r\n\r\n    static load(code: string): Promise<TLocale> {\r\n        return ExtensionResources.getJSON(`/localization/compiled/${code}.json`);\r\n    }\r\n\r\n    static async init(current: Language|null): Promise<void> {\r\n        const stored: string = Settings.language;\r\n        if (current === null) {\r\n            current = new Language(stored);\r\n        } else if (current.name !== stored) {\r\n            Settings.language = current.name;\r\n            SteamStoreApiFacade.clearPurchases(); // TODO this is a nasty side effect, get rid of it\r\n        }\r\n\r\n        const lang = current.code ?? \"en\";\r\n\r\n        try {\r\n            this.locale = await this.load(lang);\r\n        } catch(e) {\r\n            console.error(`Failed to load ${lang}`);\r\n            this.locale = await this.load(\"en\");\r\n        }\r\n    }\r\n}\r\n\r\nexport function L(key: string, replacements: Record<string, string|number>|null = null): string {\r\n    let text = Localization.locale.strings[key] ?? \"<<missing text>>\";\r\n    if (replacements !== null) {\r\n        for (let [key, value] of Object.entries(replacements)) {\r\n            text = text.replaceAll(`__${key}__`, String(value));\r\n        }\r\n    }\r\n    return text;\r\n}\r\n", "import type Context from \"@Content/Modules/Context/Context\";\r\n\r\nexport default abstract class Feature<C extends Context> {\r\n\r\n    public constructor(\r\n        protected context: C,\r\n    ) {}\r\n\r\n    public checkPrerequisites(): boolean|Promise<boolean> {\r\n        return true;\r\n    }\r\n\r\n    public abstract apply(): void|Promise<void>;\r\n\r\n    protected logError(err: unknown, msg: unknown, ...args: unknown[]): void {\r\n        console.group(this.constructor.name);\r\n        console.error(msg, ...args);\r\n        console.error(err);\r\n        console.groupEnd();\r\n    }\r\n}\r\n", "import DOMPurify from \"dompurify\";\r\n\r\nexport default class HTML {\r\n\r\n    static formatUrl(link: string): string {\r\n        const protocolReg = /^[a-z]+:\\/\\//;\r\n        const _link = protocolReg.test(link) ? link : `//${link}`;\r\n        return encodeURI(_link);\r\n    }\r\n\r\n    static escape(str: string): string {\r\n\r\n        // @see https://stackoverflow.com/a/4835406\r\n        const map: Record<string, string> = {\r\n            \"&\": \"&amp;\",\r\n            \"<\": \"&lt;\",\r\n            \">\": \"&gt;\",\r\n            '\"': \"&quot;\",\r\n            \"'\": \"&#039;\"\r\n        };\r\n\r\n        return str.replace(/[&<>\"']/g, (m: string): string => {\r\n            if (!map[m]) {\r\n                throw new Error();\r\n            }\r\n            return map[m]!;\r\n        });\r\n    }\r\n\r\n    static toDom(html: string): DocumentFragment {\r\n        const template = document.createElement(\"template\");\r\n        template.innerHTML = DOMPurify.sanitize(html);\r\n        return template.content;\r\n    }\r\n\r\n    static toElement<T extends Element>(html: string): T|null {\r\n        // @ts-ignore\r\n        return HTML.toDom(html).firstElementChild;\r\n    }\r\n\r\n    private static _getNode(nodeOrSelector: Element|string|null): Element|null {\r\n        let node: Element|null = typeof nodeOrSelector === \"string\"\r\n            ? document.querySelector(nodeOrSelector)\r\n            : nodeOrSelector;\r\n\r\n        if (node instanceof Element) {\r\n            return node;\r\n        }\r\n\r\n        console.warn(`${node} is not an Element.`);\r\n        console.trace();\r\n        return null;\r\n    }\r\n\r\n    static inner(nodeOrSelector: Element|string, html: string): Element|null {\r\n        const node = HTML._getNode(nodeOrSelector);\r\n\r\n        if (node) {\r\n            node.innerHTML = DOMPurify.sanitize(html);\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    static replace(nodeOrSelector: Element|string, html: string): Element|null {\r\n        const node = HTML._getNode(nodeOrSelector);\r\n\r\n        if (!node) {\r\n            return null;\r\n        }\r\n\r\n        const dom = HTML.toDom(html); // Support replacing with multiple nodes\r\n        const firstElement = dom.firstElementChild; // Save reference before emptying the docFrag\r\n        node.replaceWith(dom);\r\n\r\n        return firstElement;\r\n    }\r\n\r\n    static wrap<T extends Element>(\r\n        wrapperHtml: string,\r\n        startElementOrSelector: Element|string,\r\n        endElementOrSelector: Element|string|null = startElementOrSelector\r\n    ): T|null {\r\n        const startElement = HTML._getNode(startElementOrSelector);\r\n        if (!startElement) {\r\n            return null;\r\n        }\r\n\r\n        const endElement = endElementOrSelector === null\r\n            ? (startElement.parentElement?.lastElementChild ?? null)\r\n            : HTML._getNode(endElementOrSelector);\r\n\r\n        const wrappedNodes = [startElement];\r\n        for (let cur = startElement; cur.nextElementSibling !== null && cur !== endElement; cur = cur.nextElementSibling) {\r\n            wrappedNodes.push(cur.nextElementSibling);\r\n        }\r\n\r\n        const wrapperElement = HTML.toElement<T>(wrapperHtml);\r\n        if (!wrapperElement) {\r\n            return null;\r\n        }\r\n\r\n        startElement.replaceWith(wrapperElement);\r\n        wrapperElement.append(...wrappedNodes);\r\n        return wrapperElement;\r\n    }\r\n\r\n    private static _adjacent(nodeOrSelector: Element|string, position: InsertPosition, html: string): Element|null {\r\n        const node = HTML._getNode(nodeOrSelector);\r\n        if (node) {\r\n            node.insertAdjacentHTML(position, DOMPurify.sanitize(html));\r\n        }\r\n        return node;\r\n    }\r\n\r\n    static beforeBegin(nodeOrSelector: Element|string|null, html: string): void {\r\n        if (!nodeOrSelector) { return; }\r\n        HTML._adjacent(nodeOrSelector, \"beforebegin\", html);\r\n    }\r\n\r\n    static afterBegin(nodeOrSelector: Element|string|null, html: string): void {\r\n        if (!nodeOrSelector) { return; }\r\n        HTML._adjacent(nodeOrSelector, \"afterbegin\", html);\r\n    }\r\n\r\n    static beforeEnd(nodeOrSelector: Element|string|null, html: string): void {\r\n        if (!nodeOrSelector) { return; }\r\n        HTML._adjacent(nodeOrSelector, \"beforeend\", html);\r\n    }\r\n\r\n    static afterEnd(nodeOrSelector: Element|string|null, html: string): void {\r\n        if (!nodeOrSelector) { return; }\r\n        HTML._adjacent(nodeOrSelector, \"afterend\", html);\r\n    }\r\n}\r\n", "import browser, {type Storage as ns} from \"webextension-polyfill\";\r\nimport Storage, {type StorageSchema} from \"./Storage\";\r\nimport type {TLogin} from \"@Background/Modules/Community/_types\";\r\n\r\n// FIXME exports are confusing, figure out better export scheme\r\n\r\ninterface CacheEntry<V = unknown> {\r\n    data: V,\r\n    expiry: number\r\n}\r\n\r\nexport interface LocalStorageSchema extends StorageSchema {\r\n    login: TLogin,\r\n    storeCountry: string,\r\n    currency: CacheEntry<string>,\r\n    access_token: {\r\n        token: string,\r\n        expiry: number\r\n    },\r\n    lastItadImport: {\r\n        from: null|number,\r\n        to: null|number\r\n    },\r\n    syncEvents: Array<{\r\n        section: string,\r\n        type: \"push\"|\"pull\",\r\n        timestamp: number,\r\n        count: number\r\n    }>,\r\n    db_cleanup: number,\r\n    show_review_section: boolean,\r\n    hide_login_warn_store: boolean,\r\n    hide_login_warn_community: boolean,\r\n    guide_tags: string[],\r\n    market_stats: {\r\n        startListing: string|null,\r\n        purchaseTotal: number,\r\n        saleTotal: number\r\n    },\r\n    popular_refresh: boolean,\r\n    expand_slider: boolean,\r\n    workshop_state: string,\r\n    playback_hd: boolean,\r\n    steampeek: boolean,\r\n    support_info: {\r\n        data: any, // TODO fix type\r\n        expiry: number\r\n    },\r\n    review_filters: {\r\n        context?: string,\r\n        language?: string,\r\n        minPlaytime?: string,\r\n        maxPlaytime?: string\r\n    },\r\n    cachedUser?: string\r\n}\r\n\r\nclass LocalStorage<Schema extends StorageSchema> extends Storage<ns.LocalStorageArea, Schema>{\r\n\r\n    public constructor() {\r\n        super(browser.storage.local);\r\n    }\r\n}\r\n\r\nexport default new LocalStorage<LocalStorageSchema>();\r\n\r\n/* FIXME\r\nconst DEFAULTS = {\r\n    \"access_token\": null,\r\n    \"lastItadImport\": {\"from\": null, \"to\": null},\r\n    \"login\": {\"steamId\": null, \"profilePath\": null},\r\n    \"storeCountry\": null,\r\n    \"expand_slider\": false,\r\n    \"market_stats\": {\"startListing\": null, \"purchaseTotal\": 0, \"saleTotal\": 0},\r\n    \"popular_refresh\": false,\r\n    \"workshop_state\": \"\",\r\n    \"playback_hd\": false,\r\n    \"show_review_section\": true,\r\n    \"steampeek\": false,\r\n    \"support_info\": null,\r\n    \"hide_login_warn_store\": false,\r\n    \"hide_login_warn_community\": false,\r\n    \"review_filters\": {},\r\n    \"local_storage_migration\": {\"store\": false, \"community\": false, \"extension\": false},\r\n};\r\n\r\nconst PERSISTENT: (keyof typeof DEFAULTS)[] = [];\r\n*/\r\n", "\r\nconst enum ContextType {\r\n    ACCOUNT,\r\n    APP,\r\n    BUNDLE,\r\n    STORE_DEFAULT,\r\n    FUNDS,\r\n    REGISTER_KEY,\r\n    CART,\r\n    SEARCH,\r\n    CHARTS,\r\n    STORE_FRONT,\r\n    SUB,\r\n    WISHLIST,\r\n    AGECHECK,\r\n    COMMUNITY_DEFAULT,\r\n    WORKSHOP,\r\n    PROFILE_ACTIVITY,\r\n    GAMES,\r\n    PROFILE_EDIT,\r\n    BADGES,\r\n    GAME_CARD,\r\n    FRIENDS_THAT_PLAY,\r\n    GLOBAL_STATS,\r\n    MARKET_SEARCH,\r\n    INVENTORY,\r\n    MARKET_LISTING,\r\n    MARKET_HOME,\r\n    PROFILE_HOME,\r\n    GROUP_HOME,\r\n    GUIDES,\r\n    COMMUNITY_APP,\r\n    PROFILE_STATS,\r\n    MY_WORKSHOP,\r\n    SHARED_FILES,\r\n    WORKSHOP_BROWSE,\r\n    EDIT_GUIDE,\r\n    RECOMMENDED,\r\n    BOOSTER_CREATOR,\r\n    TRADE_OFFER,\r\n    FRIENDS_AND_GROUPS,\r\n    POINTS_SHOP,\r\n    LICENSES,\r\n}\r\n\r\nexport default ContextType;\r\n", "import browser from \"webextension-polyfill\";\r\nimport ExtensionResources from \"@Core/ExtensionResources\";\r\n\r\nexport default class DOMHelper {\r\n\r\n    static selectLastNode<T extends Element=Element>(parent: HTMLElement|Document, selector: string): T|null {\r\n        const nodes = parent.querySelectorAll<T>(selector);\r\n        return nodes[nodes.length - 1] ?? null;\r\n    }\r\n\r\n    static insertRemoteStylesheet(url: string): void {\r\n        const stylesheet = document.createElement(\"link\");\r\n        stylesheet.rel = \"stylesheet\";\r\n        stylesheet.type = \"text/css\";\r\n        stylesheet.href = url;\r\n        document.head.appendChild(stylesheet);\r\n    }\r\n\r\n    static insertStylesheet(path: string): void {\r\n        const stylesheet = document.createElement(\"link\");\r\n        stylesheet.rel = \"stylesheet\";\r\n        stylesheet.type = \"text/css\";\r\n        stylesheet.href = ExtensionResources.getURL(path);\r\n        document.head.appendChild(stylesheet);\r\n    }\r\n\r\n    static insertCSS(content: string): void {\r\n        const style = document.createElement(\"style\");\r\n        style.textContent = content;\r\n        document.head.appendChild(style);\r\n    }\r\n\r\n    /**\r\n     * @see https://stackoverflow.com/a/9517879\r\n     */\r\n    static insertScript(path: string, params: Record<string, any>|undefined=undefined): void {\r\n        let s = document.createElement(\"script\");\r\n        s.src = browser.runtime.getURL(path);\r\n        // @ts-ignore\r\n        s.onload = function() { this.remove(); };\r\n\r\n        if (params) {\r\n            s.dataset.params = JSON.stringify(params);\r\n        }\r\n\r\n        // see also \"Dynamic values in the injected code\" section in this answer\r\n        (document.head || document.documentElement).appendChild(s);\r\n    }\r\n}\r\n", "import {__contractSlider, __expandSlider} from \"@Strings/_strings\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport type CSharedFiles from \"@Content/Features/Community/SharedFiles/CSharedFiles\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport LocalStorage from \"@Core/Storage/LocalStorage\";\r\nimport ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FMediaExpander extends Feature<CApp|CSharedFiles> {\r\n\r\n    private _details: HTMLElement|null = null;\r\n    private _sliderToggle: HTMLElement|null = null;\r\n\r\n    override checkPrerequisites(): boolean {\r\n        this._details = document.querySelector(\"#game_highlights .rightcol, .workshop_item_header .col_right\");\r\n        return this._details !== null;\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n        const details = this._details!;\r\n\r\n        HTML.beforeEnd(\"#highlight_player_area\",\r\n            `<div class=\"es_slider_toggle btnv6_blue_hoverfade btn_medium\">\r\n                <div data-tooltip-text=\"${L(__expandSlider)}\" class=\"es_slider_expand\"><i class=\"es_slider_toggle_icon\"></i></div>\r\n                <div data-tooltip-text=\"${L(__contractSlider)}\" class=\"es_slider_contract\"><i class=\"es_slider_toggle_icon\"></i></div>\r\n            </div>`);\r\n\r\n        details.classList.add(\"as-side-details\");\r\n\r\n        this._sliderToggle = document.querySelector(\".es_slider_toggle\");\r\n        this._sliderToggle!.addEventListener(\"click\", () => this._toggleView());\r\n\r\n        if (await LocalStorage.get(\"expand_slider\")) {\r\n            this._toggleView();\r\n        }\r\n\r\n        /*\r\n         * Prevent the slider toggle from overlapping a sketchfab model's \"X\"\r\n         * Example: https://steamcommunity.com/sharedfiles/filedetails/?id=606009216\r\n         */\r\n        const sketchfabNode = document.querySelector<HTMLElement>(\".highlight_sketchfab_model\");\r\n        if (sketchfabNode) {\r\n            const container = document.getElementById(\"highlight_player_area\")!;\r\n            container.addEventListener(\"mouseenter\", () => {\r\n                if (sketchfabNode.style.display === \"none\") { return; }\r\n                this._sliderToggle!.style.top = \"32px\";\r\n            });\r\n            container.addEventListener(\"mouseleave\", () => {\r\n                this._sliderToggle!.style.top = \"\";\r\n            });\r\n        }\r\n    }\r\n\r\n    _toggleView() {\r\n        const details = this._details!;\r\n        const sliderToggle = this._sliderToggle!;\r\n\r\n        const expand = !sliderToggle.classList.contains(\"es_expanded\");\r\n\r\n        LocalStorage.set(\"expand_slider\", expand);\r\n\r\n        for (const node of document.querySelectorAll(\r\n            \".es_slider_toggle, #game_highlights, .workshop_item_header, .as-side-details\"\r\n        )) {\r\n            node.classList.toggle(\"es_expanded\", expand);\r\n        }\r\n\r\n        this._details!.addEventListener(\"transitionend\", () => {\r\n\r\n            if (this.context.type === ContextType.APP) {\r\n                this._handleApp(expand);\r\n            } else if (this.context.type === ContextType.SHARED_FILES) {\r\n                this._handleWorkshop(expand);\r\n            }\r\n\r\n            /*\r\n             * The transitionend event might not get fired when a transition is triggered immediately after appending it to the DOM\r\n             * (which happens here).\r\n             * This mostly happens when the page is still loading, I assume there is a race condition with the rendering calls.\r\n             * https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions#javascript_examples\r\n             */\r\n            setTimeout(() => { details.style.opacity = \"\"; }, 0);\r\n        }, {\"once\": true});\r\n\r\n        this._details!.style.opacity = \"0\";\r\n    }\r\n\r\n    _handleApp(expand: boolean): void {\r\n        const details = this._details!;\r\n        const clsList = details.classList;\r\n        clsList.toggle(\"block\", expand);\r\n        clsList.toggle(\"responsive_apppage_details_left\", expand);\r\n        clsList.toggle(\"rightcol\", !expand);\r\n\r\n        if (expand) {\r\n            document.querySelector(\".rightcol.game_meta_data\")\r\n                ?.insertAdjacentElement(\"afterbegin\", details);\r\n        } else {\r\n            document.getElementById(\"game_highlights\")\r\n                ?.insertAdjacentElement(\"afterbegin\", details);\r\n        }\r\n\r\n        DOMHelper.insertScript(\"scriptlets/Common/mediaExpander_app.js\");\r\n    }\r\n\r\n    _handleWorkshop(expand: boolean) {\r\n        const details = this._details!;\r\n\r\n        details.classList.toggle(\"panel\", expand);\r\n\r\n        if (expand) {\r\n            document.querySelector(\".sidebar\")\r\n                ?.insertAdjacentElement(\"afterbegin\", details);\r\n        } else {\r\n            document.querySelector(\".highlight_ctn\")\r\n                ?.insertAdjacentElement(\"afterend\", details);\r\n        }\r\n\r\n        details.addEventListener(\"transitionend\", () => {\r\n            DOMHelper.insertScript(\"scriptlets/Common/mediaExpander_workshop.js\");\r\n        }, {\"once\": true});\r\n    }\r\n}\r\n", "/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n", "import { noop } from './utils.js';\n\nexport const is_client = typeof window !== 'undefined';\n\n/** @type {() => number} */\nexport let now = is_client ? () => window.performance.now() : () => Date.now();\n\nexport let raf = is_client ? (cb) => requestAnimationFrame(cb) : noop;\n\n// used internally for testing\n/** @returns {void} */\nexport function set_now(fn) {\n\tnow = fn;\n}\n\n/** @returns {void} */\nexport function set_raf(fn) {\n\traf = fn;\n}\n", "import { raf } from './environment.js';\n\nconst tasks = new Set();\n\n/**\n * @param {number} now\n * @returns {void}\n */\nfunction run_tasks(now) {\n\ttasks.forEach((task) => {\n\t\tif (!task.c(now)) {\n\t\t\ttasks.delete(task);\n\t\t\ttask.f();\n\t\t}\n\t});\n\tif (tasks.size !== 0) raf(run_tasks);\n}\n\n/**\n * For testing purposes only!\n * @returns {void}\n */\nexport function clear_loops() {\n\ttasks.clear();\n}\n\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n * @param {import('./private.js').TaskCallback} callback\n * @returns {import('./private.js').Task}\n */\nexport function loop(callback) {\n\t/** @type {import('./private.js').TaskEntry} */\n\tlet task;\n\tif (tasks.size === 0) raf(run_tasks);\n\treturn {\n\t\tpromise: new Promise((fulfill) => {\n\t\t\ttasks.add((task = { c: callback, f: fulfill }));\n\t\t}),\n\t\tabort() {\n\t\t\ttasks.delete(task);\n\t\t}\n\t};\n}\n", "/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n", "import { globals } from './globals.js';\n\n/**\n * Resize observer singleton.\n * One listener per element only!\n * https://groups.google.com/a/chromium.org/g/blink-dev/c/z6ienONUb5A/m/F5-VcUZtBAAJ\n */\nexport class ResizeObserverSingleton {\n\t/**\n\t * @private\n\t * @readonly\n\t * @type {WeakMap<Element, import('./private.js').Listener>}\n\t */\n\t_listeners = 'WeakMap' in globals ? new WeakMap() : undefined;\n\n\t/**\n\t * @private\n\t * @type {ResizeObserver}\n\t */\n\t_observer = undefined;\n\n\t/** @type {ResizeObserverOptions} */\n\toptions;\n\n\t/** @param {ResizeObserverOptions} options */\n\tconstructor(options) {\n\t\tthis.options = options;\n\t}\n\n\t/**\n\t * @param {Element} element\n\t * @param {import('./private.js').Listener} listener\n\t * @returns {() => void}\n\t */\n\tobserve(element, listener) {\n\t\tthis._listeners.set(element, listener);\n\t\tthis._getObserver().observe(element, this.options);\n\t\treturn () => {\n\t\t\tthis._listeners.delete(element);\n\t\t\tthis._observer.unobserve(element); // this line can probably be removed\n\t\t};\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_getObserver() {\n\t\treturn (\n\t\t\tthis._observer ??\n\t\t\t(this._observer = new ResizeObserver((entries) => {\n\t\t\t\tfor (const entry of entries) {\n\t\t\t\t\tResizeObserverSingleton.entries.set(entry.target, entry);\n\t\t\t\t\tthis._listeners.get(entry.target)?.(entry);\n\t\t\t\t}\n\t\t\t}))\n\t\t);\n\t}\n}\n\n// Needs to be written like this to pass the tree-shake-test\nResizeObserverSingleton.entries = 'WeakMap' in globals ? new WeakMap() : undefined;\n", "import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n", "import { append_empty_stylesheet, detach, get_root_for_style } from './dom.js';\nimport { raf } from './environment.js';\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\n/** @type {Map<Document | ShadowRoot, import('./private.d.ts').StyleInformation>} */\nconst managed_styles = new Map();\n\nlet active = 0;\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\n/**\n * @param {string} str\n * @returns {number}\n */\nfunction hash(str) {\n\tlet hash = 5381;\n\tlet i = str.length;\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\n/**\n * @param {Document | ShadowRoot} doc\n * @param {Element & ElementCSSInlineStyle} node\n * @returns {{ stylesheet: any; rules: {}; }}\n */\nfunction create_style_information(doc, node) {\n\tconst info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n\tmanaged_styles.set(doc, info);\n\treturn info;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {number} a\n * @param {number} b\n * @param {number} duration\n * @param {number} delay\n * @param {(t: number) => number} ease\n * @param {(t: number, u: number) => string} fn\n * @param {number} uid\n * @returns {string}\n */\nexport function create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n\tconst step = 16.666 / duration;\n\tlet keyframes = '{\\n';\n\tfor (let p = 0; p <= 1; p += step) {\n\t\tconst t = a + (b - a) * ease(p);\n\t\tkeyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n\t}\n\tconst rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n\tconst name = `__svelte_${hash(rule)}_${uid}`;\n\tconst doc = get_root_for_style(node);\n\tconst { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n\tif (!rules[name]) {\n\t\trules[name] = true;\n\t\tstylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n\t}\n\tconst animation = node.style.animation || '';\n\tnode.style.animation = `${\n\t\tanimation ? `${animation}, ` : ''\n\t}${name} ${duration}ms linear ${delay}ms 1 both`;\n\tactive += 1;\n\treturn name;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {string} [name]\n * @returns {void}\n */\nexport function delete_rule(node, name) {\n\tconst previous = (node.style.animation || '').split(', ');\n\tconst next = previous.filter(\n\t\tname\n\t\t\t? (anim) => anim.indexOf(name) < 0 // remove specific animation\n\t\t\t: (anim) => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n\t);\n\tconst deleted = previous.length - next.length;\n\tif (deleted) {\n\t\tnode.style.animation = next.join(', ');\n\t\tactive -= deleted;\n\t\tif (!active) clear_rules();\n\t}\n}\n\n/** @returns {void} */\nexport function clear_rules() {\n\traf(() => {\n\t\tif (active) return;\n\t\tmanaged_styles.forEach((info) => {\n\t\t\tconst { ownerNode } = info.stylesheet;\n\t\t\t// there is no ownerNode if it runs on jsdom.\n\t\t\tif (ownerNode) detach(ownerNode);\n\t\t});\n\t\tmanaged_styles.clear();\n\t});\n}\n", "import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n", "import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n", "import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro \u2014 restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro \u2014 we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro \u2014 needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n", "import { is_promise } from './utils.js';\nimport { check_outros, group_outros, transition_in, transition_out } from './transitions.js';\nimport { flush } from './scheduler.js';\nimport { get_current_component, set_current_component } from './lifecycle.js';\n\n/**\n * @template T\n * @param {Promise<T>} promise\n * @param {import('./private.js').PromiseInfo<T>} info\n * @returns {boolean}\n */\nexport function handle_promise(promise, info) {\n\tconst token = (info.token = {});\n\t/**\n\t * @param {import('./private.js').FragmentFactory} type\n\t * @param {0 | 1 | 2} index\n\t * @param {number} [key]\n\t * @param {any} [value]\n\t * @returns {void}\n\t */\n\tfunction update(type, index, key, value) {\n\t\tif (info.token !== token) return;\n\t\tinfo.resolved = value;\n\t\tlet child_ctx = info.ctx;\n\t\tif (key !== undefined) {\n\t\t\tchild_ctx = child_ctx.slice();\n\t\t\tchild_ctx[key] = value;\n\t\t}\n\t\tconst block = type && (info.current = type)(child_ctx);\n\t\tlet needs_flush = false;\n\t\tif (info.block) {\n\t\t\tif (info.blocks) {\n\t\t\t\tinfo.blocks.forEach((block, i) => {\n\t\t\t\t\tif (i !== index && block) {\n\t\t\t\t\t\tgroup_outros();\n\t\t\t\t\t\ttransition_out(block, 1, 1, () => {\n\t\t\t\t\t\t\tif (info.blocks[i] === block) {\n\t\t\t\t\t\t\t\tinfo.blocks[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcheck_outros();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinfo.block.d(1);\n\t\t\t}\n\t\t\tblock.c();\n\t\t\ttransition_in(block, 1);\n\t\t\tblock.m(info.mount(), info.anchor);\n\t\t\tneeds_flush = true;\n\t\t}\n\t\tinfo.block = block;\n\t\tif (info.blocks) info.blocks[index] = block;\n\t\tif (needs_flush) {\n\t\t\tflush();\n\t\t}\n\t}\n\tif (is_promise(promise)) {\n\t\tconst current_component = get_current_component();\n\t\tpromise.then(\n\t\t\t(value) => {\n\t\t\t\tset_current_component(current_component);\n\t\t\t\tupdate(info.then, 1, info.value, value);\n\t\t\t\tset_current_component(null);\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tset_current_component(current_component);\n\t\t\t\tupdate(info.catch, 2, info.error, error);\n\t\t\t\tset_current_component(null);\n\t\t\t\tif (!info.hasCatch) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t// if we previously had a then/catch block, destroy it\n\t\tif (info.current !== info.pending) {\n\t\t\tupdate(info.pending, 0);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tif (info.current !== info.then) {\n\t\t\tupdate(info.then, 1, info.value, promise);\n\t\t\treturn true;\n\t\t}\n\t\tinfo.resolved = /** @type {T} */ (promise);\n\t}\n}\n\n/** @returns {void} */\nexport function update_await_block_branch(info, ctx, dirty) {\n\tconst child_ctx = ctx.slice();\n\tconst { resolved } = info;\n\tif (info.current === info.then) {\n\t\tchild_ctx[info.value] = resolved;\n\t}\n\tif (info.current === info.catch) {\n\t\tchild_ctx[info.error] = resolved;\n\t}\n\tinfo.block.p(child_ctx, dirty);\n}\n", "import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n", "const _boolean_attributes = /** @type {const} */ ([\n\t'allowfullscreen',\n\t'allowpaymentrequest',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'defer',\n\t'disabled',\n\t'formnovalidate',\n\t'hidden',\n\t'inert',\n\t'ismap',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'selected'\n]);\n\n/**\n * List of HTML boolean attributes (e.g. `<input disabled>`).\n * Source: https://html.spec.whatwg.org/multipage/indices.html\n *\n * @type {Set<string>}\n */\nexport const boolean_attributes = new Set([..._boolean_attributes]);\n\n/** @typedef {typeof _boolean_attributes[number]} BooleanAttributes */\n", "import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n", "// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.19';\nexport const PUBLIC_VERSION = '4';\n", "import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n", "<svelte:options immutable={false} />\r\n\r\n<script lang=\"ts\">\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__apppageSections, __customize,} from \"@Strings/_strings\";\r\n    import {onMount} from \"svelte\";\r\n    import Settings from \"@Options/Data/Settings\";\r\n    import type {CustomizerSetup} from \"@Content/Features/Store/Common/Customizer/CustomizerSetup\";\r\n\r\n    export let type: \"app\"|\"frontpage\";\r\n    export let setup: CustomizerSetup = [];\r\n    export let dynamicSelector: string|undefined = undefined;\r\n\r\n    let entries: Map<string, [string, boolean]> = new Map();\r\n    let isActive: boolean = false;\r\n\r\n    function getLabel(node: HTMLElement): string {\r\n        const textNode = node.querySelector(\"h1, h2, .home_title, .home_section_title\");\r\n        if (!textNode) {\r\n            return \"\";\r\n        }\r\n        let str = \"\";\r\n        for (const node of textNode.childNodes) {\r\n            if (node.nodeType === Node.TEXT_NODE) {\r\n                str += node.textContent!.trim();\r\n            }\r\n        }\r\n        return str.toLowerCase();\r\n    }\r\n\r\n    function toggle(name: string) {\r\n        const entry = entries.get(name)!;\r\n        const enabled = !entry[1];\r\n        entry[1] = enabled;\r\n        entries.set(name, entry);\r\n\r\n        for (let element of document.querySelectorAll<HTMLElement>(`[data-as-customizer='${name}']`)) {\r\n            element.classList.toggle(\"esi-shown\", enabled);\r\n            element.classList.toggle(\"esi-hidden\", !enabled);\r\n        }\r\n\r\n        if (type === \"app\") {\r\n            Settings.customize_apppage[name] = enabled;\r\n            Settings.customize_apppage = Settings.customize_apppage;\r\n        } else if (type === \"frontpage\") {\r\n            Settings.customize_frontpage[name] = enabled;\r\n            Settings.customize_frontpage = Settings.customize_frontpage;\r\n        }\r\n        entries = entries;\r\n    }\r\n\r\n    function init(setup: CustomizerSetup) {\r\n        let settings: Record<string, boolean> = type === \"app\"\r\n            ? Settings.customize_apppage\r\n            : Settings.customize_frontpage;\r\n\r\n        for (let [name, selectorOrElement, label, forceShow] of setup) {\r\n            if (!selectorOrElement) {\r\n                continue;\r\n            }\r\n\r\n            const enabled = settings[name] ?? true;\r\n            const elements: HTMLElement[] = typeof selectorOrElement === \"string\"\r\n                ? [...document.querySelectorAll<HTMLElement>(selectorOrElement)]\r\n                : [selectorOrElement];\r\n\r\n            for (const element of elements) {\r\n                if (getComputedStyle(element).display === \"none\" && !forceShow) {\r\n                    continue;\r\n                }\r\n\r\n                if (typeof label !== \"string\" || label === \"\") {\r\n                    label = getLabel(element);\r\n                    if (label === \"\") { continue; }\r\n                }\r\n\r\n                element.classList.toggle(\"esi-shown\", enabled);\r\n                element.classList.toggle(\"esi-hidden\", !enabled);\r\n                element.dataset['asCustomizer'] = name;\r\n            }\r\n\r\n            if (label) {\r\n                entries.set(name, [label, enabled]);\r\n            }\r\n        }\r\n        entries = entries;\r\n    }\r\n\r\n    onMount(() => {\r\n        init(setup);\r\n\r\n        // we need to run dynamic separately, because it checks whether [data-as-customizer] already exists in found nodes\r\n        if (dynamicSelector) {\r\n            let dynamic: CustomizerSetup = [];\r\n            for (const node of document.querySelectorAll<HTMLElement>(dynamicSelector)) {\r\n                if (node.closest(\"[data-as-customizer]\")\r\n                 || node.querySelector(\"[data-as-customizer]\")\r\n                 || node.style.display === \"none\"\r\n                ) {\r\n                    continue;\r\n                }\r\n\r\n                const text = getLabel(node);\r\n                if (text === \"\") { return; }\r\n\r\n                dynamic.push([`dynamic_${text}`, node]);\r\n            }\r\n        }\r\n    });\r\n</script>\r\n\r\n\r\n<!-- svelte-ignore a11y-click-events-have-key-events a11y-no-static-element-interactions -->\r\n<div class=\"store_header_btn_gray store_header_btn\" class:active={isActive} id=\"es_customize_btn\"\r\n     on:click={() => isActive = !isActive}\r\n     on:mouseleave={() => isActive = false}\r\n>\r\n    <div class=\"es_customize_title\">\r\n        {L(__customize)}\r\n        <img src=\"//store.cloudflare.steamstatic.com/public/images/v6/btn_arrow_down_padded_white.png\" alt=\"\" />\r\n    </div>\r\n    <div class=\"home_viewsettings_popup\" on:click|stopPropagation>\r\n        <div class=\"home_viewsettings_instructions\">{L(__apppageSections)}</div>\r\n\r\n        {#each entries.entries() as [name, entry](name)}\r\n            {@const label = entry[0]}\r\n            {@const enabled = entry[1]}\r\n            <div class=\"home_viewsettings_checkboxrow ellipsis\" on:click={() => toggle(name)}>\r\n                <div class=\"home_viewsettings_checkbox\" class:checked={enabled}></div>\r\n                <div class=\"home_viewsettings_label\">{label}</div>\r\n            </div>\r\n        {/each}\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    /* Taken from: https://store.cloudflare.steamstatic.com/public/css/v6/home.css */\r\n    #es_customize_btn {\r\n        text-align: left;\r\n    }\r\n    #es_customize_btn .es_customize_title {\r\n        display: inline-block;\r\n        padding-right: 3px;\r\n        padding-left: 8px;\r\n        margin: 0 1px;\r\n        line-height: 20px;\r\n        text-align: center;\r\n        font-size: 11px;\r\n        cursor: pointer;\r\n        color: #ffffff;\r\n        text-transform: uppercase;\r\n    }\r\n    #es_customize_btn .es_customize_title img {\r\n        vertical-align: text-bottom;\r\n    }\r\n    #es_customize_btn:hover .es_customize_title {\r\n        text-decoration: none;\r\n        color: #111111;\r\n        border-radius: 1px;\r\n        background: linear-gradient(135deg, #ffffff 0%, #919aa3 100%);\r\n    }\r\n    #es_customize_btn .home_viewsettings_popup {\r\n        position: absolute;\r\n        color: #384959;\r\n        padding: 12px 11px;\r\n        width: 200px;\r\n        z-index: 10;\r\n        box-shadow: 0 0 12px #000000;\r\n        background: linear-gradient(to bottom, #e3eaef 5%, #c7d5e0 95%);\r\n        right: 0px;\r\n        opacity: 0;\r\n        visibility: hidden;\r\n        transition: visibility 0s 0.2s, opacity 0.2s ease-in-out;\r\n    }\r\n    #es_customize_btn.active .home_viewsettings_popup {\r\n        opacity: 1;\r\n        visibility: visible;\r\n        transition: visibility, opacity 0.2s ease-in-out;\r\n    }\r\n    #es_customize_btn .home_viewsettings_instructions {\r\n        margin-bottom: 12px;\r\n        font-size: 12px;\r\n    }\r\n    #es_customize_btn .home_viewsettings_checkboxrow {\r\n        background: rgba(0, 0, 0, 0.2);\r\n        margin-bottom: 1px;\r\n        padding: 2px;\r\n        line-height: 14px;\r\n        color: #222d3d;\r\n        font-size: 10px;\r\n        cursor: pointer;\r\n    }\r\n    #es_customize_btn .home_viewsettings_checkboxrow:hover {\r\n        color: #ffffff;\r\n        background: rgba(0, 0, 0, 0.3);\r\n    }\r\n    #es_customize_btn .home_viewsettings_checkbox {\r\n        float: left;\r\n        margin-right: 5px;\r\n        display: block;\r\n        width: 14px;\r\n        height: 14px;\r\n        background-image: url('https://store.cloudflare.steamstatic.com/public/images/v6/customize_checkboxes.png');\r\n        background-position: 0px 0px;\r\n    }\r\n    #es_customize_btn .home_viewsettings_checkbox.checked {\r\n        background-position: 0px 28px;\r\n    }\r\n    #es_customize_btn .home_viewsettings_label {\r\n        text-transform: capitalize;\r\n    }\r\n</style>\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport {\r\n    __apppageEabanner,\r\n    __apppageEaheader,\r\n    __apppageFranchise,\r\n    __apppageGreenlight,\r\n    __apppageLegal,\r\n    __apppageMorefromfranchise,\r\n    __apppageRecentupdates,\r\n    __apppageWorkshop,\r\n    __homepageCurators,\r\n    __homepageSidebar,\r\n    __homepageTabs,\r\n    __homepageTopnewreleases,\r\n} from \"@Strings/_strings\";\r\nimport type CStoreFront from \"@Content/Features/Store/Storefront/CStoreFront\";\r\nimport ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\nimport Customizer from \"@Content/Features/Store/Common/Customizer/Customizer.svelte\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport type {CustomizerSetup} from \"@Content/Features/Store/Common/Customizer/CustomizerSetup\";\r\n\r\nexport default class FCustomizer extends Feature<CApp|CStoreFront> {\r\n\r\n    override apply(): void {\r\n\r\n        const target = document.querySelector(\"#cart_status_data\");\r\n        if (!target) {\r\n            return;\r\n        }\r\n        const anchor = target.firstElementChild ?? undefined;\r\n\r\n        if (this.context.type === ContextType.APP) {\r\n            (new Customizer({\r\n                target,\r\n                anchor,\r\n                props: {\r\n                    type: \"app\",\r\n                    setup: this.getAppPageSetup()\r\n                }\r\n            }));\r\n        } else if (this.context.type === ContextType.STORE_FRONT) {\r\n            document.addEventListener(\"renderComplete\", () => {\r\n                (new Customizer({\r\n                    target,\r\n                    anchor,\r\n                    props: {\r\n                        type: \"frontpage\",\r\n                        setup: this.getFrontPageSetup(),\r\n                        dynamicSelector: \".home_page_body_ctn .home_ctn:not(.esi-customizer), .home_pagecontent_ctn\"\r\n                    }\r\n                }));\r\n            });\r\n            DOMHelper.insertScript(\"scriptlets/Store/Common/storeFrontCustomizer.js\");\r\n        }\r\n    }\r\n\r\n    private getAppPageSetup(): CustomizerSetup {\r\n\r\n        function getParentEl(selector: string): HTMLElement|null {\r\n            const el = document.querySelector(selector);\r\n            return el && el.closest(\".game_page_autocollapse_ctn\");\r\n        }\r\n\r\n        return [\r\n            [\"franchisenotice\", \".franchise_notice\", L(__apppageFranchise)],\r\n            [\"eaheader\", \".early_access_header:not(.es_coupon_info)\", L(__apppageEaheader)],\r\n            [\"eabanner\", \".early_access_banner\", L(__apppageEabanner)],\r\n            [\"recentupdates\", \"[data-featuretarget=events-row]\", L(__apppageRecentupdates)],\r\n            [\"reviews\", \"#game_area_reviews\"],\r\n            [\"about\", getParentEl(\"#game_area_description\")],\r\n            [\"contentwarning\", getParentEl(\"#game_area_content_descriptors\")],\r\n            [\"sysreq\", getParentEl(\".sys_req\")],\r\n            [\"legal\", getParentEl(\"#game_area_legal\"), L(__apppageLegal)],\r\n            [\"moredlcfrombasegame\", \"#moredlcfrombasegame_block\"],\r\n            [\"franchise\", \"#franchise_block\", L(__apppageMorefromfranchise)],\r\n            [\"morelikethis\", \"#recommended_block\"],\r\n            [\"recommendedbycurators\", \".steam_curators_block\"],\r\n            [\"customerreviews\", \"#app_reviews_hash\"],\r\n            [\"workshop\", getParentEl(\"[href^='https://steamcommunity.com/workshop/browse']\"), L(__apppageWorkshop)],\r\n            [\"greenlight\", getParentEl(\"[href^='https://steamcommunity.com/greenlight']\"), L(__apppageGreenlight)],\r\n        ];\r\n    }\r\n\r\n    private getFrontPageSetup(): CustomizerSetup {\r\n\r\n        function getParentEl(selector: string): HTMLElement|null {\r\n            const el = document.querySelector<HTMLElement>(selector);\r\n            return el && el.closest<HTMLElement>(\".home_ctn\");\r\n        }\r\n\r\n        return [\r\n            [\"featuredrecommended\", \".home_cluster_ctn\"],\r\n            [\"trendingamongfriends\", \".friends_recently_purchased\", \"\", true],\r\n            [\"discoveryqueue\", \".discovery_queue_ctn\"],\r\n            [\"curators\", \".steam_curators_ctn\", L(__homepageCurators)],\r\n            [\"morecuratorrecommendations\", \".apps_recommended_by_curators_ctn\", L(__homepageCurators)],\r\n            [\"fromdevelopersandpublishersthatyouknow\", \".recommended_creators_ctn\"],\r\n            [\"popularvrgames\", \".best_selling_vr_ctn\"],\r\n            [\"homepagetabs\", \".tab_container\", L(__homepageTabs)],\r\n            [\"gamesstreamingnow\", \".live_streams_ctn\", \"\", true],\r\n            [\"updatesandoffers\", \".marketingmessage_area\", \"\", true],\r\n            [\"topnewreleases\", \".top_new_releases\", L(__homepageTopnewreleases)],\r\n            [\"homepagesidebar\", \"body:not(.no_home_gutter) .home_page_gutter\", L(__homepageSidebar)],\r\n            [\"specialoffers\", getParentEl(\".special_offers\")],\r\n            [\"browsesteam\", getParentEl(\".big_buttons.home_page_content\")],\r\n            [\"recentlyupdated\", getParentEl(\".recently_updated_block\")],\r\n            [\"under\", getParentEl(\"[class*='specials_under']\")],\r\n        ];\r\n    }\r\n}\r\n\r\n", "<script lang=\"ts\">\r\n    export let drmString: string;\r\n</script>\r\n\r\n\r\n<div class=\"drm_warning\"><span>{drmString}</span></div>\r\n\r\n\r\n<style>\r\n    .drm_warning {\r\n        display: table;\r\n        width: 100%;\r\n        padding-top: 8px;\r\n        padding-bottom: 8px;\r\n        min-height: 38px;\r\n        background: linear-gradient(rgb(73, 22, 26) 0%, rgb(191, 48, 34) 100%);\r\n        margin-bottom: 10px;\r\n    }\r\n    .drm_warning span {\r\n        display: table-cell;\r\n        vertical-align: middle;\r\n        line-height: normal;\r\n        padding: 0 15px;\r\n    }\r\n</style>\r\n", "import self_ from \"./FDRMWarnings.svelte\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport {__drmThirdParty, __drmThirdPartySub} from \"@Strings/_strings\";\r\nimport type CBundle from \"@Content/Features/Store/Bundle/CBundle\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport type CSub from \"@Content/Features/Store/Sub/CSub\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FDRMWarnings extends Feature<CApp|CSub|CBundle> {\r\n\r\n    // Exclude false-positives\r\n    private readonly excludedAppids: number[] = [\r\n        21690 // Resident Evil 5, at Capcom's request\r\n    ];\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.showdrm && (!this.context.appid || !this.excludedAppids.includes(this.context.appid));\r\n    }\r\n\r\n    private getTextFromDRMNotices(): string[] {\r\n        const value: string[] = [];\r\n        for (const node of document.querySelectorAll<HTMLElement>(\".DRM_notice\")) {\r\n            if (node.querySelector(\"a[onclick^=ShowEULA]\")) { continue; }\r\n\r\n            let text = \"\";\r\n            for (const n of node.childNodes) {\r\n                if (n.nodeType === Node.TEXT_NODE) {\r\n                    text += n.textContent!.trim();\r\n                } else if (n.nodeName === \"BR\") {\r\n                    text += \", \";\r\n                }\r\n            }\r\n            value.push(text);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    private getTextFromGameDetails(): string {\r\n        let value = \"\";\r\n        let node: Node|null = document.querySelector(\".language_list\");\r\n        if (!node) { return \"\"; }\r\n        node = node.nextSibling;\r\n        while (node !== null) {\r\n            value += node.textContent;\r\n            node = node.nextSibling;\r\n        }\r\n        return value;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        const isAppPage = this.context.type === ContextType.APP;\r\n\r\n        let text = \"\";\r\n        for (const node of document.querySelectorAll<HTMLElement>(\".game_area_sys_req, #game_area_legal\")) {\r\n            text += node.textContent;\r\n        }\r\n\r\n        let drmNotices: string[] = [];\r\n        let gameDetails: string = \"\";\r\n        if (isAppPage) {\r\n            drmNotices = this.getTextFromDRMNotices();\r\n            text += drmNotices.join(\"\");\r\n        } else {\r\n            // Only bundle/sub pages have DRM info in game details\r\n            gameDetails = this.getTextFromGameDetails();\r\n            text += gameDetails;\r\n        }\r\n\r\n        text = text.toLowerCase();\r\n\r\n        const drmList: {name: string, enabled: boolean}[] = [\r\n            {\r\n                name: \"Games for Windows Live\",\r\n                enabled: text.includes(\"games for windows live\")\r\n                    || text.includes(\"games for windows - live\")\r\n                    || text.includes(\"online play requires log-in to games for windows\")\r\n                    || text.includes(\"installation of the games for windows live software\")\r\n                    || text.includes(\"multiplayer play and other live features included at no charge\")\r\n                    || text.includes(\"www.gamesforwindows.com/live\")\r\n            },\r\n            {\r\n                name: \"Ubisoft Connect\",\r\n                enabled: text.includes(\"uplay\")\r\n                    || text.includes(\"ubisoft account\")\r\n                    || text.includes(\"ubisoft connect\")\r\n            },\r\n            {\r\n                name: \"SecuROM\",\r\n                enabled: text.includes(\"securom\")\r\n            },\r\n            {\r\n                name: \"Tages\",\r\n                enabled: /\\b(tages|solidshield)\\b/.test(text) && !/angebote des tages/.test(text)\r\n            },\r\n            {\r\n                name: \"Stardock Account required\",\r\n                enabled: text.includes(\"stardock account\")\r\n            },\r\n            {\r\n                name: \"Rockstar Social Club\",\r\n                enabled: text.includes(\"rockstar social club\")\r\n                    || text.includes(\"rockstar games social club\")\r\n            },\r\n            {\r\n                name: \"Kalypso Launcher\",\r\n                enabled: text.includes(\"requires a kalypso account\")\r\n            },\r\n            {\r\n                name: \"Denuvo Anti-Tamper\",\r\n                enabled: text.includes(\"denuvo\")\r\n            },\r\n            {\r\n                name: \"EA app (Origin)\",\r\n                enabled: text.includes(\"origin client\")\r\n                    || text.includes(\"ea account\")\r\n                    || text.includes(\"ea app\")\r\n            },\r\n            {\r\n                name: \"Microsoft Xbox Live\",\r\n                enabled: text.includes(\"xbox live\")\r\n            },\r\n        ];\r\n\r\n        const drmNames: string[] = drmList.flatMap(({name, enabled}) => enabled ? [name] : []);\r\n\r\n        let drmString: string|undefined = undefined;\r\n        if (drmNames.length > 0) {\r\n            drmString = L(isAppPage ? __drmThirdParty : __drmThirdPartySub, {\r\n                \"drmlist\": `(${drmNames.join(\", \")})`\r\n            });\r\n        } else {\r\n            const regex = /\\b(drm|account|steam)\\b/i;\r\n\r\n            // Display the first \"DRM Notice\" or the text in game details that matches DRM/3rd party accounts\r\n            if (isAppPage) {\r\n                drmString = drmNotices.find(text => regex.test(text));\r\n            } else if (regex.test(gameDetails)) {\r\n                drmString = gameDetails;\r\n            }\r\n        }\r\n\r\n        if (drmString) {\r\n            const target = document.querySelector(\"#game_area_purchase, #game_area_purchase_top\");\r\n            if (!target) {\r\n                throw new Error(\"Node not found\");\r\n            }\r\n\r\n            (new self_({\r\n                target,\r\n                anchor: target.firstElementChild!,\r\n                props: {drmString}\r\n            }));\r\n        }\r\n    }\r\n}\r\n", "\r\nexport default class HTMLParser {\r\n\r\n    private static getVariable(source: string|Element|Document, regex: RegExp): string|null {\r\n        if (typeof source === \"string\") {\r\n            const m = source.match(regex);\r\n            return m && m[1] ? m[1] : null;\r\n        }\r\n\r\n        for (const node of source.querySelectorAll<HTMLScriptElement>(\"script\")) {\r\n            if (node.textContent) {\r\n                const m = node.textContent.match(regex)\r\n                if (m) {\r\n                    return m && m[1] ? m[1] : null;\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    static getStringVariable(nameOrRegex: string|RegExp, source: string|Element|Document = document): string|null {\r\n        const regex = typeof nameOrRegex === \"string\"\r\n            ? new RegExp(`${nameOrRegex}\\\\s*=\\\\s*['\"](.+?)['\"];`)\r\n            : nameOrRegex;\r\n        return this.getVariable(source, regex);\r\n    }\r\n\r\n    static getIntVariable(nameOrRegex: string|RegExp, source: string|Element|Document = document): number|null {\r\n        const regex = typeof nameOrRegex === \"string\"\r\n            ? new RegExp(`${nameOrRegex}\\\\s*=\\\\s*(.+?);`)\r\n            : nameOrRegex;\r\n        const v = this.getVariable(source, regex);\r\n        return v ? Number(v) : null;\r\n    }\r\n\r\n    static getArrayVariable<T>(nameOrRegex: string|RegExp, source: string|Element|Document = document): T[]|null {\r\n        const regex = typeof nameOrRegex === \"string\"\r\n            ? new RegExp(`${nameOrRegex}\\\\s*=\\\\s*(\\\\[.+?]);`)\r\n            : nameOrRegex;\r\n        const v = this.getVariable(source, regex);\r\n        return v ? JSON.parse(v) : null;\r\n    }\r\n\r\n    static getObjectVariable<T extends Record<string, any>>(nameOrRegex: string|RegExp, source: string|Element|Document = document): T|null {\r\n        const regex = typeof nameOrRegex === \"string\"\r\n            ? new RegExp(`${nameOrRegex}\\\\s*=\\\\s*(\\\\{.+?});`)\r\n            : nameOrRegex;\r\n        const v = this.getVariable(source, regex);\r\n        return v ? JSON.parse(v) : null;\r\n    }\r\n}\r\n", "\r\n/**\r\n * @see https://partner.steamgames.com/doc/store/pricing/currencies\r\n */\r\n\r\nexport interface TCurrency {\r\n    id: number,\r\n    abbr: string,\r\n    symbol: string|null,\r\n    hint: string,\r\n    multiplier: number,\r\n    unit: number,\r\n    format: {\r\n        places: number,\r\n        hidePlacesWhenZero: boolean,\r\n        symbolFormat: string,\r\n        thousand: string,\r\n        group?: number,\r\n        decimal: string,\r\n        right: boolean\r\n    }\r\n}\r\n\r\nexport default <ReadonlyArray<TCurrency>>[\r\n    { \"id\": 1, \"abbr\": \"USD\", \"symbol\": \"$\", \"hint\": \"United States Dollars\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"$\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 2, \"abbr\": \"GBP\", \"symbol\": \"\u00A3\", \"hint\": \"British Pound\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u00A3\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 3, \"abbr\": \"EUR\", \"symbol\": \"\u20AC\", \"hint\": \"European Union Euro\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u20AC\", \"thousand\": \" \", \"decimal\": \",\", \"right\": true } },\r\n    { \"id\": 4, \"abbr\": \"CHF\", \"symbol\": \"CHF\", \"hint\": \"Swiss Francs\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"CHF \", \"thousand\": \"'\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 5, \"abbr\": \"RUB\", \"symbol\": \"p\u0443\u0431\", \"hint\": \"Russian Rouble\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": true,  \"symbolFormat\": \" p\u0443\u0431.\", \"thousand\": \"\", \"decimal\": \",\", \"right\": true } },\r\n    { \"id\": 6, \"abbr\": \"PLN\", \"symbol\": \"z\u0142\", \"hint\": \"Polish Z\u0142oty\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \" z\u0142\", \"thousand\": \" \", \"decimal\": \",\", \"right\": true } },\r\n    { \"id\": 7, \"abbr\": \"BRL\", \"symbol\": \"R$\", \"hint\": \"Brazilian Reals\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"R$ \", \"thousand\": \".\", \"decimal\": \",\", \"right\": false } },\r\n    { \"id\": 8, \"abbr\": \"JPY\", \"symbol\": \"\u00A5\", \"hint\": \"Japanese Yen\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 0, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u00A5 \", \"thousand\": \" \", \"group\": 4, \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 9, \"abbr\": \"NOK\", \"symbol\": \"kr\", \"hint\": \"Norwegian Krone\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \" kr\", \"thousand\": \".\", \"decimal\": \",\", \"right\": true } },\r\n    { \"id\": 10, \"abbr\": \"IDR\", \"symbol\": \"Rp\", \"hint\": \"Indonesian Rupiah\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 0, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"Rp \", \"thousand\": \" \", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 11, \"abbr\": \"MYR\", \"symbol\": \"RM\", \"hint\": \"Malaysian Ringgit\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"RM\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 12, \"abbr\": \"PHP\", \"symbol\": \"P\", \"hint\": \"Philippine Pes\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"P\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 13, \"abbr\": \"SGD\", \"symbol\": \"S$\", \"hint\": \"Singapore Dollar\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"S$\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 14, \"abbr\": \"THB\", \"symbol\": \"\u0E3F\", \"hint\": \"Thai Baht\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u0E3F\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 15, \"abbr\": \"VND\", \"symbol\": \"\u20AB\", \"hint\": \"Vietnamese Dong\", \"multiplier\": 100, \"unit\": 50000, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u20AB\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 16, \"abbr\": \"KRW\", \"symbol\": \"\u20A9\", \"hint\": \"South Korean Won\", \"multiplier\": 100, \"unit\": 1000, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u20A9\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 17, \"abbr\": \"TRY\", \"symbol\": \"TL\", \"hint\": \"Turkish Lira\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \" TL\", \"thousand\": \"\", \"decimal\": \",\", \"right\": true } },\r\n    { \"id\": 18, \"abbr\": \"UAH\", \"symbol\": \"\u20B4\", \"hint\": \"Ukrainian Hryvnia\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u20B4\", \"thousand\": \"\", \"decimal\": \",\", \"right\": true } },\r\n    { \"id\": 19, \"abbr\": \"MXN\", \"symbol\": \"Mex$\", \"hint\": \"Mexican Peso\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"Mex$ \", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 20, \"abbr\": \"CAD\", \"symbol\": \"CDN$\", \"hint\": \"Canadian Dollars\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"CDN$ \", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 21, \"abbr\": \"AUD\", \"symbol\": \"A$\", \"hint\": \"Australian Dollars\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"A$ \", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 22, \"abbr\": \"NZD\", \"symbol\": \"NZ$\", \"hint\": \"New Zealand Dollar\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"NZ$ \", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 23, \"abbr\": \"CNY\", \"symbol\": null, \"hint\": \"Chinese Renminbi (yuan)\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u00A5 \", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 24, \"abbr\": \"INR\", \"symbol\": \"\u20B9\", \"hint\": \"Indian Rupee\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 0, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u20B9 \", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 25, \"abbr\": \"CLP\", \"symbol\": \"CLP$\", \"hint\": \"Chilean Peso\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 0, \"hidePlacesWhenZero\": true, \"symbolFormat\": \"CLP$ \", \"thousand\": \".\", \"decimal\": \",\", \"right\": false } },\r\n    { \"id\": 26, \"abbr\": \"PEN\", \"symbol\": \"S/.\", \"hint\": \"Peruvian Nuevo Sol\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"S/.\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 27, \"abbr\": \"COP\", \"symbol\": \"COL$\", \"hint\": \"Colombian Peso\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 0, \"hidePlacesWhenZero\": true, \"symbolFormat\": \"COL$ \", \"thousand\": \".\", \"decimal\": \",\", \"right\": false } },\r\n    { \"id\": 28, \"abbr\": \"ZAR\", \"symbol\": \"R \", \"hint\": \"South African Rand\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"R \", \"thousand\": \" \", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 29, \"abbr\": \"HKD\", \"symbol\": \"HK$\", \"hint\": \"Hong Kong Dollar\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"HK$ \", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 30, \"abbr\": \"TWD\", \"symbol\": \"NT$\", \"hint\": \"New Taiwan Dollar\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 0, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"NT$ \", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 31, \"abbr\": \"SAR\", \"symbol\": \"SR\", \"hint\": \"Saudi Riyal\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \" SR\", \"thousand\": \",\", \"decimal\": \".\", \"right\": true } },\r\n    { \"id\": 32, \"abbr\": \"AED\", \"symbol\": \"DH\", \"hint\": \"United Arab Emirates Dirham\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \" DH\", \"thousand\": \",\", \"decimal\": \".\", \"right\": true } },\r\n    { \"id\": 34, \"abbr\": \"ARS\", \"symbol\": \"ARS$\", \"hint\": \"Argentine Peso\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"ARS$ \", \"thousand\": \".\", \"decimal\": \",\", \"right\": false } },\r\n    { \"id\": 35, \"abbr\": \"ILS\", \"symbol\": \"\u20AA\", \"hint\": \"Israeli New Shekel\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u20AA\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 37, \"abbr\": \"KZT\", \"symbol\": \"\u20B8\", \"hint\": \"Kazakhstani Tenge\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": true, \"symbolFormat\": \"\u20B8 \", \"thousand\": \" \", \"decimal\": \".\", \"right\": false } },\r\n    { \"id\": 38, \"abbr\": \"KWD\", \"symbol\": \"KD\", \"hint\": \"Kuwaiti Dinar\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 3, \"hidePlacesWhenZero\": false, \"symbolFormat\": \" KD\", \"thousand\": \",\", \"decimal\": \".\", \"right\": true } },\r\n    { \"id\": 39, \"abbr\": \"QAR\", \"symbol\": \"QR\", \"hint\": \"Qatari Riyal\", \"multiplier\": 100, \"unit\": 1, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \" QR\", \"thousand\": \",\", \"decimal\": \".\", \"right\": true } },\r\n    { \"id\": 40, \"abbr\": \"CRC\", \"symbol\": \"\u20A1\", \"hint\": \"Costa Rican Col\u00F3n\", \"multiplier\": 100, \"unit\": 500, \"format\": { \"places\": 2, \"hidePlacesWhenZero\": false, \"symbolFormat\": \"\u20A1\", \"thousand\": \".\", \"decimal\": \",\", \"right\": false } },\r\n    { \"id\": 41, \"abbr\": \"UYU\", \"symbol\": \"$U\", \"hint\": \"Uruguayan Peso\", \"multiplier\": 100, \"unit\": 100, \"format\": { \"places\": 0, \"hidePlacesWhenZero\": true, \"symbolFormat\": \"$U\", \"thousand\": \",\", \"decimal\": \".\", \"right\": false } }\r\n];\r\n", "import Background from \"@Core/Background\";\r\nimport type {\r\n    TDlcInfo,\r\n    TFetchMarketCardAveragePricesResponse,\r\n    TFetchMarketCardPricesResponse,\r\n    TFetchPricesResponse,\r\n    TFetchProfileBackgroundsGamesResponse,\r\n    TFetchProfileBackgroundsResponse,\r\n    TFetchRatesResponse,\r\n    TStorePageData,\r\n    TFetchTwitchStreamResponse,\r\n    TIsEarlyAccessResponse, TProfileData,\r\n    TSimilarResponse\r\n} from \"@Background/Modules/AugmentedSteam/_types\";\r\nimport {EAction} from \"@Background/EAction\";\r\n\r\nexport default class AugmentedSteamApiFacade {\r\n\r\n    static fetchPrices(\r\n        country: string,\r\n        apps: number[],\r\n        subs: number[],\r\n        bundles: number[],\r\n        voucher: boolean,\r\n        shops: number[]\r\n    ): Promise<TFetchPricesResponse> {\r\n        return Background.send(EAction.Prices, {country, apps, subs, bundles, voucher, shops});\r\n    }\r\n\r\n    static fetchDlcInfo(appid: number): Promise<TDlcInfo> {\r\n        return Background.send(EAction.DlcInfo, {appid});\r\n    }\r\n\r\n    static getStorePageData(appid: number): Promise<TStorePageData> {\r\n        return Background.send(EAction.StorePageData, {appid});\r\n    }\r\n\r\n    static expireStorePageData(appid: number): Promise<void> {\r\n        return Background.send(EAction.StorePageData_Expire, {appid});\r\n    }\r\n\r\n    static getRates(to: string[]): Promise<TFetchRatesResponse> {\r\n        return Background.send(EAction.Rates, {to});\r\n    }\r\n\r\n    static clearRates(): Promise<void> {\r\n        return Background.send(EAction.Rates_Clear);\r\n    }\r\n\r\n    static isEarlyAccess(appids: number[]): Promise<TIsEarlyAccessResponse> {\r\n        return Background.send(EAction.IsEA, {appids});\r\n    }\r\n\r\n    static fetchProfileBackground(appid: number): Promise<TFetchProfileBackgroundsResponse> {\r\n        return Background.send(EAction.ProfileBackground, {appid});\r\n    }\r\n\r\n    static fetchProfileBackgroundGames(): Promise<TFetchProfileBackgroundsGamesResponse> {\r\n        return Background.send(EAction.ProfileBackgroundGames);\r\n    }\r\n\r\n    static fetchTwitchStream(channelId: string): Promise<TFetchTwitchStreamResponse> {\r\n        return Background.send(EAction.TwitchStream, {channelId});\r\n    }\r\n\r\n    static fetchMarketCardPrices(currency: string, appid: number): Promise<TFetchMarketCardPricesResponse> {\r\n        return Background.send(EAction.Market_CardPrices, {currency, appid});\r\n    }\r\n\r\n    static fetchMarketCardAveragePrices(currency: string, appids: number[]): Promise<TFetchMarketCardAveragePricesResponse> {\r\n        return Background.send(EAction.Market_AverageCardPrices, {currency, appids});\r\n    }\r\n\r\n    static fetchSteamPeek(appid: number): Promise<TSimilarResponse> {\r\n        return Background.send(EAction.SteamPeek, {appid});\r\n    }\r\n\r\n    static async getProfileData(steamId: string): Promise<TProfileData> {\r\n        return Background.send(EAction.Profile, {steamId});\r\n    }\r\n\r\n    static clearOwn(steamId: string): Promise<void> {\r\n        return Background.send(EAction.Profile_Clear, {steamId});\r\n    }\r\n}\r\n", "import HTMLParser from \"@Core/Html/HtmlParser\";\r\nimport type {TCurrency} from \"@Core/Currencies\";\r\nimport Currencies from \"@Core/Currencies\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport AugmentedSteamApiFacade from \"@Content/Modules/Facades/AugmentedSteamApiFacade\";\r\nimport SteamStoreApiFacade from \"@Content/Modules/Facades/SteamStoreApiFacade\";\r\n\r\nexport default class CurrencyManager {\r\n\r\n    private static promise: Promise<void>;\r\n    private static _rates: Record<string, Record<string, number>>;\r\n\r\n    private static readonly _defaultCurrency: string = \"USD\";\r\n    private static storeCurrencyCode: string;\r\n    private static customCurrencyCode: string;\r\n\r\n    static get storeCurrency(): string {\r\n        return this.storeCurrencyCode;\r\n    }\r\n\r\n    static get customCurrency(): string {\r\n        return this.customCurrencyCode;\r\n    }\r\n\r\n    static getRate(from: string, to: string): number|null {\r\n        if (from === to) {\r\n            return 1;\r\n        }\r\n        return this._rates?.[from]?.[to] ?? null;\r\n    }\r\n\r\n    static getCurrencyInfo(code: string): TCurrency {\r\n        for (let currency of Currencies) {\r\n            if (currency.abbr === code) {\r\n                return currency;\r\n            }\r\n        }\r\n        throw new Error(\"Unknown currency\");\r\n    }\r\n\r\n    static currencyIdToCode(id: number): string {\r\n        for (let currency of Currencies) {\r\n            if (currency.id  === id) {\r\n                return currency.abbr;\r\n            }\r\n        }\r\n        throw new Error(\"Unknown currency\");\r\n    }\r\n\r\n    private static _getCurrencyCodeFromDom(): string|null {\r\n        const currencyNode = document.querySelector(\"meta[itemprop=priceCurrency][content]\");\r\n        if (currencyNode) {\r\n            return currencyNode.getAttribute(\"content\");\r\n        }\r\n        return null\r\n    }\r\n\r\n    private static _getCurrencyCodeFromWallet(): string|null {\r\n        const walletInfo = HTMLParser.getObjectVariable(\"g_rgWalletInfo\");\r\n        if (walletInfo && walletInfo.wallet_currency) {\r\n            return this.currencyIdToCode(walletInfo.wallet_currency);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private static async _getStoreCurrency(): Promise<string> {\r\n        let currency = this._getCurrencyCodeFromDom() ?? this._getCurrencyCodeFromWallet();\r\n        if (currency) {\r\n            return currency;\r\n        }\r\n\r\n        try {\r\n            return await SteamStoreApiFacade.getCurrency();\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n        return \"USD\"; // fallback\r\n    }\r\n\r\n    private static async _loadCurrency(): Promise<void> {\r\n        const currencySetting = Settings.override_price;\r\n        this.storeCurrencyCode = await this._getStoreCurrency();\r\n        this.customCurrencyCode = (currencySetting === \"auto\")\r\n            ? this.storeCurrencyCode\r\n            : currencySetting;\r\n    }\r\n\r\n    private static async _loadRates(): Promise<void> {\r\n        const toCurrencies = [this.storeCurrencyCode];\r\n        if (this.customCurrencyCode !== this.storeCurrencyCode) {\r\n            toCurrencies.push(this.customCurrencyCode);\r\n        }\r\n        this._rates = await AugmentedSteamApiFacade.getRates(toCurrencies);\r\n    }\r\n\r\n    static init(): Promise<void> {\r\n        if (!this.promise) {\r\n            this.promise = (async () => {\r\n                try {\r\n                    await this._loadCurrency();\r\n                    await this._loadRates();\r\n                } catch (err) {\r\n                    console.error(\"Failed to initialize Currency\");\r\n                    console.error(err);\r\n                }\r\n            })();\r\n        }\r\n\r\n        return this.promise;\r\n    }\r\n}\r\n", "import CurrencyManager from \"./CurrencyManager\";\r\n\r\nexport default class Price {\r\n\r\n    public readonly value: number;\r\n    private readonly currency: string;\r\n\r\n    static parseFromString(price: string, currency: string = CurrencyManager.storeCurrency): Price|null {\r\n        const currencyInfo = CurrencyManager.getCurrencyInfo(currency);\r\n        const format = currencyInfo.format;\r\n\r\n        // remove separators\r\n        let _price = price.trim()\r\n            .replace(format.thousand, \"\");\r\n\r\n        if (format.decimal !== \".\") {\r\n            // as expected by parseFloat()\r\n            _price = _price.replace(format.decimal, \".\");\r\n        }\r\n\r\n        _price = _price.replace(/[^\\d.]/g, \"\");\r\n\r\n        const value = parseFloat(_price);\r\n        if (Number.isNaN(value)) {\r\n            return null;\r\n        }\r\n\r\n        return new Price(value, currency);\r\n    }\r\n\r\n    constructor(value: number = 0, currency: string = CurrencyManager.storeCurrency) {\r\n        this.value = value;\r\n        this.currency = currency;\r\n    }\r\n\r\n    inCurrency(desiredCurrency: string): Price {\r\n        if (this.currency === desiredCurrency) {\r\n            return this;\r\n        }\r\n        const rate = CurrencyManager.getRate(this.currency, desiredCurrency);\r\n        if (rate === null) {\r\n            throw new Error(`Could not establish conversion rate between ${this.currency} and ${desiredCurrency}`);\r\n        }\r\n        return new Price(this.value * rate, desiredCurrency);\r\n    }\r\n\r\n    formattedValue(): string {\r\n        return this.stringify(false);\r\n    }\r\n\r\n    toString(): string {\r\n        return this.stringify();\r\n    }\r\n\r\n    private stringify(withSymbol = true): string {\r\n        const currencySetup = CurrencyManager.getCurrencyInfo(this.currency);\r\n        const format = currencySetup.format;\r\n\r\n        const sign = this.value < 0 ? \"-\" : \"\";\r\n\r\n        const parts = Math.abs(this.value)\r\n            .toFixed(format.places)\r\n            .split(\".\");\r\n        const s = parts[0] ?? \"\";\r\n        const decimals = parts[1] ?? \"\";\r\n\r\n        let groupSize = format.group ?? 3;\r\n        const groups: string[] = [];\r\n        let j: number;\r\n        for (j = s.length; j > groupSize; j -= groupSize) {\r\n            groups.unshift(s.substring(j - groupSize, j));\r\n        }\r\n        groups.unshift(s.substring(0, j));\r\n\r\n        let result = [sign, groups.join(format.thousand)];\r\n        if (format.places > 0) {\r\n            if (!format.hidePlacesWhenZero || parseInt(decimals) > 0) {\r\n                result.push(format.decimal);\r\n                result.push(decimals);\r\n            }\r\n        }\r\n        if (withSymbol) {\r\n            if (format.right) {\r\n                result.push(format.symbolFormat);\r\n            } else {\r\n                result.unshift(format.symbolFormat);\r\n            }\r\n        }\r\n        return result.join(\"\");\r\n    }\r\n}\r\n", "import Settings from \"@Options/Data/Settings\";\r\n\r\nexport default function external(node: HTMLAnchorElement): void {\r\n    const OpenInNewTab = Settings.openinnewtab;\r\n    if (!OpenInNewTab) { return; }\r\n\r\n    node.target = \"_blank\";\r\n    node.rel = \"noreferrer noopener\";\r\n}\r\n", "<script lang=\"ts\">\r\n    import {onMount} from \"svelte\";\r\n    import type {TBundle, TPrice} from \"@Background/Modules/AugmentedSteam/_types\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {\r\n        __bundle_header, __bundle_includes, __bundle_info,\r\n        __bundle_offerEnds, __bundle_tier,\r\n        __bundle_tierIncludes, __buy,\r\n        __buyPackage\r\n    } from \"@Strings/_strings\";\r\n    import Price from \"@Content/Modules/Currency/Price\";\r\n    import CurrencyManager from \"@Content/Modules/Currency/CurrencyManager\";\r\n    import external from \"@Content/externalLink\";\r\n\r\n    export let data: TBundle[];\r\n\r\n    function getPrice(price: TPrice): Price {\r\n        let tierPrice = new Price(price.amount, price.currency);\r\n        try {\r\n            tierPrice = tierPrice.inCurrency(CurrencyManager.customCurrency);\r\n        } catch (err) {\r\n            console.warn(\"Could not convert currency, using country currency\");\r\n        }\r\n        return tierPrice;\r\n    }\r\n\r\n    let appName: string|null;\r\n\r\n    function getBundlePrice(bundle: TBundle): TPrice|null {\r\n        return bundle.tiers\r\n            .find(tier => tier.games.find(game => game.title === appName))\r\n            ?.price ?? null;\r\n    }\r\n\r\n    onMount(() => {\r\n        appName = document.querySelector(\".apphub_AppName\")?.textContent ?? null;\r\n    });\r\n</script>\r\n\r\n{#if data.length > 0 && data.some(v => !v.expiry || Date.parse(v.expiry) > Date.now())}\r\n    <h2 class=\"gradientbg es_external_icon\">{L(__bundle_header)}</h2>\r\n\r\n    {#each data as bundle}\r\n        {@const expiry = bundle.expiry ? new Date(bundle.expiry) : null}\r\n        {#if expiry === null || expiry.valueOf() > Date.now()}\r\n            {@const bundlePrice = getBundlePrice(bundle)}\r\n\r\n            <div class=\"game_area_purchase_game\">\r\n                <div class=\"game_area_purchase_platform\"></div>\r\n                <h1>{L(__buyPackage, {\"package\": `${bundle.page.name} ${bundle.title}`})}</h1>\r\n\r\n                {#if expiry}\r\n                    <p class=\"game_purchase_discount_countdown\">\r\n                        {L(__bundle_offerEnds)}\r\n                        {expiry.toLocaleDateString()}\r\n                    </p>\r\n                {/if}\r\n\r\n                <p class=\"package_contents\">\r\n                    {#each bundle.tiers as tier, num}\r\n                        <b class=\"as_bundle_tier_title\"> <!-- class added for compatibility with Steam Currency Converter -->\r\n                            {#if bundle.tiers.length > 1}\r\n                                {L(__bundle_tierIncludes, {\r\n                                    \"tier\": L(__bundle_tier, {\"num\": num+1}),\r\n                                    \"price\": tier.price ? getPrice(tier.price).toString() : \"\",\r\n                                    \"num\": tier.games.length\r\n                                })}:\r\n                            {:else}\r\n                                {L(__bundle_includes, {\"num\": tier.games.length})}:\r\n                            {/if}\r\n                        </b>\r\n                        {#each tier.games as game, index}<!--\r\n                            -->{#if index !== 0}, {/if}\r\n                            <span class:highlight={appName === game.title}>{game.title}</span><!--\r\n                        -->{/each}\r\n                        <br />\r\n                    {/each}\r\n                </p>\r\n\r\n                <div class=\"game_purchase_action\">\r\n                    <div class=\"game_purchase_action_bg\">\r\n                        <div class=\"btn_addtocart btn_packageinfo\">\r\n                            <a class=\"btn_blue_steamui btn_medium\" href={bundle.details} use:external>\r\n                                <span>{L(__bundle_info)}</span>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"game_purchase_action_bg\">\r\n\r\n                        {#if bundlePrice}\r\n                            <div class=\"game_purchase_price price\" itemprop=\"price\">\r\n                                {getPrice(bundlePrice).toString()}\r\n                            </div>\r\n                        {/if}\r\n\r\n                        <div class=\"btn_addtocart\">\r\n                            <a class=\"btn_green_steamui btn_medium\" href={bundle.url} use:external>\r\n                                <span>{L(__buy)}</span>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        {/if}\r\n    {/each}\r\n{/if}\r\n\r\n<style>\r\n    .highlight {\r\n        text-decoration: underline;\r\n    }\r\n</style>\r\n", "<script lang=\"ts\">\r\n    import type {TPrice} from \"@Background/Modules/AugmentedSteam/_types\";\r\n    import Price from \"@Content/Modules/Currency/Price\";\r\n    import CurrencyManager from \"@Content/Modules/Currency/CurrencyManager\";\r\n\r\n    export let price: TPrice;\r\n\r\n    function getAltPrice(price: TPrice): Price|null {\r\n        const customCurrency = CurrencyManager.customCurrency;\r\n        if (price.currency !== customCurrency) {\r\n            try {\r\n                return (new Price(price.amount, price.currency)).inCurrency(customCurrency);\r\n            } catch (err) {\r\n                console.warn(`Could not convert currency ${price.currency} to ${customCurrency}`);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    let strPrice = (new Price(price.amount, price.currency)).toString();\r\n    let strPriceAlt = getAltPrice(price)?.toString();\r\n</script>\r\n\r\n\r\n{strPrice}\r\n{#if strPriceAlt}\r\n    ({strPriceAlt})\r\n{/if}\r\n", "<svelte:options accessors />\r\n\r\n<script lang=\"ts\">\r\n    import PriceWithAlt from \"./PriceWithAlt.svelte\";\r\n    import type {TPriceOverview} from \"@Background/Modules/AugmentedSteam/_types\";\r\n    import {\r\n        __pricing_bundleCount,\r\n        __pricing_bundled,\r\n        __pricing_historicalLow,\r\n        __pricing_lowestPrice,\r\n        __pricing_store,\r\n        __pricing_withVoucher\r\n    } from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import HTML from \"@Core/Html/Html\";\r\n    import external from \"@Content/externalLink\";\r\n\r\n    export let data: TPriceOverview;\r\n    export let marginTop: string|undefined = undefined;\r\n    export let marginBottom: string|undefined = undefined;\r\n\r\n    let node: HTMLElement;\r\n    let currentDrms: string[];\r\n\r\n    if (data.current) {\r\n        currentDrms = data.current.drm\r\n            .filter(d => d.id !== 61) // 61 = Steam\r\n            .map(d => d.name);\r\n    }\r\n</script>\r\n\r\n\r\n<div class=\"itad-pricing\" bind:this={node} style:margin-top={marginTop} style:margin-bottom={marginBottom}>\r\n    {#if data.current}\r\n        <a href={data.urls.info} use:external>{L(__pricing_lowestPrice)}</a>\r\n\r\n        <span class=\"itad-pricing__price\">\r\n            <PriceWithAlt price={data.current.price} />\r\n        </span>\r\n\r\n        <a href={data.current.url} class=\"itad-pricing__main\" use:external>\r\n            {#if data.current.cut > 0}\r\n                <span class=\"itad-pricing__cut\">-{data.current.cut}%</span>\r\n            {/if}\r\n\r\n            {#if data.current.voucher}\r\n                <span class=\"itad-pricing__voucher\">{L(__pricing_withVoucher, {\"voucher\": data.current.voucher})}</span>\r\n            {/if}\r\n\r\n            {@html L(__pricing_store, {\"store\": HTML.escape(data.current.shop.name)})}\r\n            {#if currentDrms.length > 0}\r\n                <span class=\"itad-pricing__drm\">({currentDrms.join(\", \")})</span>\r\n            {/if}\r\n        </a>\r\n    {/if}\r\n\r\n    {#if data.lowest}\r\n        <a href={data.urls.history} use:external>{L(__pricing_historicalLow)}</a>\r\n\r\n        <span class=\"itad-pricing__price\">\r\n            <PriceWithAlt price={data.lowest.price} />\r\n        </span>\r\n\r\n        <div class=\"itad-pricing__main\">\r\n            {#if data.lowest.cut > 0}\r\n                <span class=\"itad-pricing__cut\">-{data.lowest.cut}%</span>\r\n            {/if}\r\n            {@html L(__pricing_store, {\"store\": HTML.escape(data.lowest.shop.name)})}\r\n            {new Date(data.lowest.timestamp).toLocaleDateString()}\r\n        </div>\r\n    {/if}\r\n\r\n    {#if data.bundled}\r\n        <a href={data.urls.info} use:external>{L(__pricing_bundled)}</a>\r\n        <div class=\"itad-pricing__bundled\">{L(__pricing_bundleCount, {\"count\": data.bundled})}</div>\r\n    {/if}\r\n</div>\r\n\r\n\r\n<style>\r\n    a {\r\n        color: white;\r\n        text-decoration: none;\r\n    }\r\n    a:hover {\r\n        color: #66c0f4;\r\n    }\r\n\r\n    /* Fix space between prices and the purchase container when an \"ADVANCED ACCESS\" banner is present */\r\n    .itad-pricing + :global(.game_area_purchase_game_wrapper .advanced_access_header_wrapper) {\r\n        margin-top: -7px;\r\n    }\r\n    .itad-pricing {\r\n        padding: 5px 5px 5px 42px;\r\n        height: auto !important;\r\n        border-bottom: 0;\r\n        font-size: 12px;\r\n        color: #a8b2ba;\r\n        background-image: url(\"extension://img/itad.png\");\r\n        background-color: rgba(0, 0, 0, 0.2);\r\n        background-repeat: no-repeat;\r\n        background-position: 9px center;\r\n        background-size: 24px;\r\n        display: grid;\r\n        grid-template-columns: min-content min-content auto;\r\n        grid-column-gap: 10px;\r\n        white-space: nowrap;\r\n        line-height: 1.5;\r\n        align-items: baseline;\r\n    }\r\n    .itad-pricing__main {\r\n        white-space: normal;\r\n    }\r\n    .itad-pricing__cut {\r\n        color: #a4d007;\r\n    }\r\n    .itad-pricing__price {\r\n        font-size: 1.1em;\r\n        color: #acdbf5;\r\n        text-align: right;\r\n    }\r\n    .itad-pricing__voucher {\r\n        font-size: 1.1em;\r\n    }\r\n    .itad-pricing__drm {\r\n        text-transform: uppercase;\r\n        color: #626366;\r\n    }\r\n    .itad-pricing__bundled {\r\n        grid-column: 2 / span 2\r\n    }\r\n</style>\r\n", "import type {\r\n    TCollectionCopy,\r\n    TGetStoreListResponse, TInCollectionResponse,\r\n    TInWaitlistResponse,\r\n    TLastImportResponse, TNotesList, TPushNotesStatus, TSyncEvent\r\n} from \"@Background/Modules/IsThereAnyDeal/_types\";\r\nimport Background from \"@Core/Background\";\r\nimport {EAction} from \"@Background/EAction\";\r\n\r\nexport default class ITADApiFacade {\r\n\r\n    static getStoreList(): Promise<TGetStoreListResponse> {\r\n        return Background.send<TGetStoreListResponse>(EAction.StoreList);\r\n    }\r\n\r\n    static authorize(): Promise<void> {\r\n        return Background.send(EAction.Authorize);\r\n    }\r\n\r\n    static disconnect(): Promise<void> {\r\n        return Background.send(EAction.Disconnect);\r\n    }\r\n\r\n    static isConnected(): Promise<boolean> {\r\n        return Background.send(EAction.IsConnected);\r\n    }\r\n\r\n    static sync(force: boolean=false): Promise<void> {\r\n        return Background.send(EAction.Sync, {force});\r\n    }\r\n\r\n    static getLastImport(): Promise<TLastImportResponse> {\r\n        return Background.send(EAction.LastImport);\r\n    }\r\n\r\n    static getSyncEvents(): Promise<TSyncEvent[]> {\r\n        return Background.send(EAction.SyncEvents);\r\n    }\r\n\r\n    static async inWaitlist(storeIds: string[]): Promise<TInWaitlistResponse> {\r\n        return Background.send(EAction.InWaitlist, {storeIds});\r\n    }\r\n\r\n    static async addToWaitlist(...appids: number[]) {\r\n        return Background.send(EAction.AddToWaitlist, {appids});\r\n    }\r\n\r\n    static async removeFromWaitlist(...appids: number[]) {\r\n        return Background.send(EAction.RemoveFromWaitlist, {appids});\r\n    }\r\n\r\n    static async inCollection(storeIds: string[]): Promise<TInCollectionResponse> {\r\n        return Background.send(EAction.InCollection, {storeIds});\r\n    }\r\n\r\n    static async getFromCollection(storeId: string): Promise<TCollectionCopy[]|null> {\r\n        return Background.send(EAction.GetFromCollection, {storeId});\r\n    }\r\n\r\n    static async pullNotes(): Promise<number> {\r\n        return Background.send(EAction.ITAD_Notes_Pull);\r\n    }\r\n\r\n    static async pushNotes(notes: TNotesList): Promise<TPushNotesStatus> {\r\n        return Background.send(EAction.ITAD_Notes_Push, {notes});\r\n    }\r\n\r\n    /**\r\n     * Just a convenience wrapper around PushNotes\r\n     */\r\n    static async pushNote(appid: number, note: string): Promise<TPushNotesStatus> {\r\n        return Background.send(EAction.ITAD_Notes_Push, {notes: [[appid, note]]});\r\n    }\r\n\r\n    static async deleteNote(appid: number): Promise<void> {\r\n        return Background.send(EAction.ITAD_Notes_Delete, {appids: [appid]});\r\n    }\r\n}\r\n", "import AugmentedSteamApiFacade from \"../Facades/AugmentedSteamApiFacade\";\r\nimport type {TBundle, TPriceOverview} from \"@Background/Modules/AugmentedSteam/_types\";\r\nimport ITADApiFacade from \"../Facades/ITADApiFacade\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\n\r\ntype TIdType = \"app\"|\"sub\"|\"bundle\";\r\n\r\ninterface TResponse {\r\n    prices: {\r\n        type: TIdType\r\n        id: number,\r\n        data: TPriceOverview\r\n    }[],\r\n    bundles: TBundle[]\r\n}\r\n\r\nexport default class Prices {\r\n\r\n    constructor(\r\n        private readonly user: UserInterface\r\n    ) {}\r\n\r\n    async _getShops(): Promise<number[]> {\r\n        const excludedStores: number[] = Settings.excluded_stores;\r\n        if (!Settings.showallstores && excludedStores.length > 0) {\r\n            const storeList = await ITADApiFacade.getStoreList().catch(err => console.error(err));\r\n            if (storeList) {\r\n                return storeList\r\n                    .map(({id}) => id)\r\n                    .filter(id => !excludedStores.includes(id));\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    async load(params: {apps?: number[], subs?: number[], bundles?: number[]}) {\r\n        const response = await AugmentedSteamApiFacade.fetchPrices(\r\n            this.user.storeCountry ?? \"US\",\r\n            params.apps ?? [],\r\n            params.subs ?? [],\r\n            params.bundles ?? [],\r\n            Settings.showlowestpricecoupon,\r\n            await this._getShops()\r\n        );\r\n\r\n        let result: TResponse = {\r\n            prices: [],\r\n            bundles: []\r\n        };\r\n        for (const [gameId, data] of Object.entries(response.prices)) {\r\n            const [type, id] = <[TIdType, string]>gameId.split(\"/\");\r\n            result.prices.push({type, id: Number(id), data});\r\n        }\r\n        result.bundles = response.bundles;\r\n        return result;\r\n    }\r\n}\r\n", "import BundleOverview from \"../../../Modules/Prices/BundleOverview.svelte\";\r\nimport PriceOverview from \"../../../Modules/Prices/PriceOverview.svelte\";\r\nimport type CBundle from \"@Content/Features/Store/Bundle/CBundle\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport Prices from \"@Content/Modules/Prices/Prices\";\r\nimport type {TBundle, TPriceOverview} from \"@Background/Modules/AugmentedSteam/_types\";\r\nimport type CSub from \"@Content/Features/Store/Sub/CSub\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FITADPrices extends Feature<CApp|CSub|CBundle> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.showlowestprice;\r\n    }\r\n\r\n    private insertPrices(type: \"app\"|\"sub\"|\"bundle\", id: number, data: TPriceOverview) {\r\n        let anchor: HTMLElement|null = null;\r\n\r\n        if (type === \"sub\") {\r\n            const inputEl = document.querySelector(`input[name=subid][value=\"${id}\"]`);\r\n            if (inputEl) {\r\n                anchor = inputEl.closest(\".game_area_purchase_game_wrapper\") // Subs on app pages\r\n                    || inputEl.closest(\".game_area_purchase_game\"); // Subs on sub pages\r\n            }\r\n        } else if (type === \"bundle\") {\r\n            anchor = document.querySelector(`.game_area_purchase_game_wrapper[data-ds-bundleid=\"${id}\"]`) // Bundles on app pages\r\n                || document.querySelector(`.game_area_purchase_game[data-ds-bundleid=\"${id}\"]`); // Bundles on bundle pages\r\n        }\r\n\r\n        if (anchor) {\r\n            new PriceOverview({\r\n                target: anchor.parentElement!,\r\n                anchor,\r\n                props: {data}\r\n            });\r\n        }\r\n    }\r\n\r\n    private insertBundles(data: TBundle[]) {\r\n        const anchor = document.querySelector(\"#game_area_purchase\")?.nextElementSibling;\r\n        if (anchor) {\r\n            new BundleOverview({\r\n                target: anchor.parentElement!,\r\n                anchor,\r\n                props: {data}\r\n            });\r\n        }\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n        const prices = new Prices(this.context.user);\r\n\r\n        let subs: number[] = this.context.getAllSubids().map(Number);\r\n        let bundles: number[] = [];\r\n        for (const node of document.querySelectorAll<HTMLElement>(\"[data-ds-bundleid]\")) {\r\n            bundles.push(Number(node.dataset.dsBundleid));\r\n        }\r\n\r\n        if (subs.length === 0 && bundles.length === 0) {\r\n            return;\r\n        }\r\n\r\n        prices\r\n            .load({\r\n                subs: subs,\r\n                bundles: bundles\r\n            })\r\n            .then(({\r\n                prices,\r\n                bundles,\r\n            }) => {\r\n                for (let {type, id, data} of prices) {\r\n                    this.insertPrices(type, id, data);\r\n                }\r\n                this.insertBundles(bundles);\r\n            });\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    export let country: string;\r\n</script>\r\n\r\n\r\n<span class=\"es-flag-{country}\"></span>\r\n\r\n\r\n<style>\r\n    span:before {\r\n        content: \"\";\r\n        position: relative;\r\n        width: 16px;\r\n        height: 11px;\r\n        margin-right: 4px;\r\n        display: inline-block;\r\n        background-repeat: no-repeat;\r\n        background-position: top left;\r\n        background-image: url(\"extension://img/flags/flags.png\");\r\n    }\r\n    .es-flag-ad:before {\r\n        background-position: -16px 0;\r\n    }\r\n    .es-flag-ae:before {\r\n        background-position: -32px 0;\r\n    }\r\n    .es-flag-af:before {\r\n        background-position: -48px 0;\r\n    }\r\n    .es-flag-ag:before {\r\n        background-position: -64px 0;\r\n    }\r\n    .es-flag-ai:before {\r\n        background-position: -80px 0;\r\n    }\r\n    .es-flag-al:before {\r\n        background-position: -96px 0;\r\n    }\r\n    .es-flag-am:before {\r\n        background-position: -112px 0;\r\n    }\r\n    .es-flag-an:before {\r\n        background-position: -128px 0;\r\n    }\r\n    .es-flag-ao:before {\r\n        background-position: -144px 0;\r\n    }\r\n    .es-flag-ar:before {\r\n        background-position: -160px 0;\r\n    }\r\n    .es-flag-as:before {\r\n        background-position: -176px 0;\r\n    }\r\n    .es-flag-at:before {\r\n        background-position: -192px 0;\r\n    }\r\n    .es-flag-au:before {\r\n        background-position: -208px 0;\r\n    }\r\n    .es-flag-aw:before {\r\n        background-position: -224px 0;\r\n    }\r\n    .es-flag-az:before {\r\n        background-position: -240px 0;\r\n    }\r\n    .es-flag-ba:before {\r\n        background-position: 0 -11px;\r\n    }\r\n    .es-flag-bb:before {\r\n        background-position: -16px -11px;\r\n    }\r\n    .es-flag-bd:before {\r\n        background-position: -32px -11px;\r\n    }\r\n    .es-flag-be:before {\r\n        background-position: -48px -11px;\r\n    }\r\n    .es-flag-bf:before {\r\n        background-position: -64px -11px;\r\n    }\r\n    .es-flag-bg:before {\r\n        background-position: -80px -11px;\r\n    }\r\n    .es-flag-bh:before {\r\n        background-position: -96px -11px;\r\n    }\r\n    .es-flag-bi:before {\r\n        background-position: -112px -11px;\r\n    }\r\n    .es-flag-bj:before {\r\n        background-position: -128px -11px;\r\n    }\r\n    .es-flag-bm:before {\r\n        background-position: -144px -11px;\r\n    }\r\n    .es-flag-bn:before {\r\n        background-position: -160px -11px;\r\n    }\r\n    .es-flag-bo:before {\r\n        background-position: -176px -11px;\r\n    }\r\n    .es-flag-br:before {\r\n        background-position: -192px -11px;\r\n    }\r\n    .es-flag-bs:before {\r\n        background-position: -208px -11px;\r\n    }\r\n    .es-flag-bt:before {\r\n        background-position: -224px -11px;\r\n    }\r\n    .es-flag-bv:before {\r\n        background-position: -240px -11px;\r\n    }\r\n    .es-flag-bw:before {\r\n        background-position: 0 -22px;\r\n    }\r\n    .es-flag-by:before {\r\n        background-position: -16px -22px;\r\n    }\r\n    .es-flag-bz:before {\r\n        background-position: -32px -22px;\r\n    }\r\n    .es-flag-ca:before {\r\n        background-position: -48px -22px;\r\n    }\r\n    .es-flag-catalonia:before {\r\n        background-position: -64px -22px;\r\n    }\r\n    .es-flag-cd:before {\r\n        background-position: -80px -22px;\r\n    }\r\n    .es-flag-cf:before {\r\n        background-position: -96px -22px;\r\n    }\r\n    .es-flag-cg:before {\r\n        background-position: -112px -22px;\r\n    }\r\n    .es-flag-ch:before {\r\n        background-position: -128px -22px;\r\n    }\r\n    .es-flag-ci:before {\r\n        background-position: -144px -22px;\r\n    }\r\n    .es-flag-ck:before {\r\n        background-position: -160px -22px;\r\n    }\r\n    .es-flag-cl:before {\r\n        background-position: -176px -22px;\r\n    }\r\n    .es-flag-cm:before {\r\n        background-position: -192px -22px;\r\n    }\r\n    .es-flag-cn:before {\r\n        background-position: -208px -22px;\r\n    }\r\n    .es-flag-co:before {\r\n        background-position: -224px -22px;\r\n    }\r\n    .es-flag-cr:before {\r\n        background-position: -240px -22px;\r\n    }\r\n    .es-flag-cu:before {\r\n        background-position: 0 -33px;\r\n    }\r\n    .es-flag-cv:before {\r\n        background-position: -16px -33px;\r\n    }\r\n    .es-flag-cw:before {\r\n        background-position: -32px -33px;\r\n    }\r\n    .es-flag-cy:before {\r\n        background-position: -48px -33px;\r\n    }\r\n    .es-flag-cz:before {\r\n        background-position: -64px -33px;\r\n    }\r\n    .es-flag-de:before {\r\n        background-position: -80px -33px;\r\n    }\r\n    .es-flag-dj:before {\r\n        background-position: -96px -33px;\r\n    }\r\n    .es-flag-dk:before {\r\n        background-position: -112px -33px;\r\n    }\r\n    .es-flag-dm:before {\r\n        background-position: -128px -33px;\r\n    }\r\n    .es-flag-do:before {\r\n        background-position: -144px -33px;\r\n    }\r\n    .es-flag-dz:before {\r\n        background-position: -160px -33px;\r\n    }\r\n    .es-flag-ec:before {\r\n        background-position: -176px -33px;\r\n    }\r\n    .es-flag-ee:before {\r\n        background-position: -192px -33px;\r\n    }\r\n    .es-flag-eg:before {\r\n        background-position: -208px -33px;\r\n    }\r\n    .es-flag-eh:before {\r\n        background-position: -224px -33px;\r\n    }\r\n    .es-flag-england:before {\r\n        background-position: -240px -33px;\r\n    }\r\n    .es-flag-er:before {\r\n        background-position: 0 -44px;\r\n    }\r\n    .es-flag-es:before {\r\n        background-position: -16px -44px;\r\n    }\r\n    .es-flag-et:before {\r\n        background-position: -32px -44px;\r\n    }\r\n    .es-flag-eu1:before {\r\n        background-position: -48px -44px;\r\n    }\r\n    .es-flag-fi:before {\r\n        background-position: -64px -44px;\r\n    }\r\n    .es-flag-fj:before {\r\n        background-position: -80px -44px;\r\n    }\r\n    .es-flag-fk:before {\r\n        background-position: -96px -44px;\r\n    }\r\n    .es-flag-fm:before {\r\n        background-position: -112px -44px;\r\n    }\r\n    .es-flag-fo:before {\r\n        background-position: -128px -44px;\r\n    }\r\n    .es-flag-fr:before {\r\n        background-position: -144px -44px;\r\n    }\r\n    .es-flag-ga:before {\r\n        background-position: -160px -44px;\r\n    }\r\n    .es-flag-gb:before {\r\n        background-position: -176px -44px;\r\n    }\r\n    .es-flag-gd:before {\r\n        background-position: -192px -44px;\r\n    }\r\n    .es-flag-ge:before {\r\n        background-position: -208px -44px;\r\n    }\r\n    .es-flag-gf:before {\r\n        background-position: -224px -44px;\r\n    }\r\n    .es-flag-gg:before {\r\n        background-position: -240px -44px;\r\n    }\r\n    .es-flag-gh:before {\r\n        background-position: 0 -55px;\r\n    }\r\n    .es-flag-gi:before {\r\n        background-position: -16px -55px;\r\n    }\r\n    .es-flag-gl:before {\r\n        background-position: -32px -55px;\r\n    }\r\n    .es-flag-gm:before {\r\n        background-position: -48px -55px;\r\n    }\r\n    .es-flag-gn:before {\r\n        background-position: -64px -55px;\r\n    }\r\n    .es-flag-gp:before {\r\n        background-position: -80px -55px;\r\n    }\r\n    .es-flag-gq:before {\r\n        background-position: -96px -55px;\r\n    }\r\n    .es-flag-gr:before {\r\n        background-position: -112px -55px;\r\n    }\r\n    .es-flag-gs:before {\r\n        background-position: -128px -55px;\r\n    }\r\n    .es-flag-gt:before {\r\n        background-position: -144px -55px;\r\n    }\r\n    .es-flag-gu:before {\r\n        background-position: -160px -55px;\r\n    }\r\n    .es-flag-gw:before {\r\n        background-position: -176px -55px;\r\n    }\r\n    .es-flag-gy:before {\r\n        background-position: -192px -55px;\r\n    }\r\n    .es-flag-hk:before {\r\n        background-position: -208px -55px;\r\n    }\r\n    .es-flag-hm:before {\r\n        background-position: -224px -55px;\r\n    }\r\n    .es-flag-hn:before {\r\n        background-position: -240px -55px;\r\n    }\r\n    .es-flag-hr:before {\r\n        background-position: 0 -66px;\r\n    }\r\n    .es-flag-ht:before {\r\n        background-position: -16px -66px;\r\n    }\r\n    .es-flag-hu:before {\r\n        background-position: -32px -66px;\r\n    }\r\n    .es-flag-ic:before {\r\n        background-position: -48px -66px;\r\n    }\r\n    .es-flag-id:before {\r\n        background-position: -64px -66px;\r\n    }\r\n    .es-flag-ie:before {\r\n        background-position: -80px -66px;\r\n    }\r\n    .es-flag-il:before {\r\n        background-position: -96px -66px;\r\n    }\r\n    .es-flag-im:before {\r\n        background-position: -112px -66px;\r\n    }\r\n    .es-flag-in:before {\r\n        background-position: -128px -66px;\r\n    }\r\n    .es-flag-io:before {\r\n        background-position: -144px -66px;\r\n    }\r\n    .es-flag-iq:before {\r\n        background-position: -160px -66px;\r\n    }\r\n    .es-flag-ir:before {\r\n        background-position: -176px -66px;\r\n    }\r\n    .es-flag-is:before {\r\n        background-position: -192px -66px;\r\n    }\r\n    .es-flag-it:before {\r\n        background-position: -208px -66px;\r\n    }\r\n    .es-flag-je:before {\r\n        background-position: -224px -66px;\r\n    }\r\n    .es-flag-jm:before {\r\n        background-position: -240px -66px;\r\n    }\r\n    .es-flag-jo:before {\r\n        background-position: 0 -77px;\r\n    }\r\n    .es-flag-jp:before {\r\n        background-position: -16px -77px;\r\n    }\r\n    .es-flag-ke:before {\r\n        background-position: -32px -77px;\r\n    }\r\n    .es-flag-kg:before {\r\n        background-position: -48px -77px;\r\n    }\r\n    .es-flag-kh:before {\r\n        background-position: -64px -77px;\r\n    }\r\n    .es-flag-ki:before {\r\n        background-position: -80px -77px;\r\n    }\r\n    .es-flag-km:before {\r\n        background-position: -96px -77px;\r\n    }\r\n    .es-flag-kn:before {\r\n        background-position: -112px -77px;\r\n    }\r\n    .es-flag-kp:before {\r\n        background-position: -128px -77px;\r\n    }\r\n    .es-flag-kr:before {\r\n        background-position: -144px -77px;\r\n    }\r\n    .es-flag-kurdistan:before {\r\n        background-position: -160px -77px;\r\n    }\r\n    .es-flag-kw:before {\r\n        background-position: -176px -77px;\r\n    }\r\n    .es-flag-ky:before {\r\n        background-position: -192px -77px;\r\n    }\r\n    .es-flag-kz:before {\r\n        background-position: -208px -77px;\r\n    }\r\n    .es-flag-la:before {\r\n        background-position: -224px -77px;\r\n    }\r\n    .es-flag-lb:before {\r\n        background-position: -240px -77px;\r\n    }\r\n    .es-flag-lc:before {\r\n        background-position: 0 -88px;\r\n    }\r\n    .es-flag-li:before {\r\n        background-position: -16px -88px;\r\n    }\r\n    .es-flag-lk:before {\r\n        background-position: -32px -88px;\r\n    }\r\n    .es-flag-lr:before {\r\n        background-position: -48px -88px;\r\n    }\r\n    .es-flag-ls:before {\r\n        background-position: -64px -88px;\r\n    }\r\n    .es-flag-lt:before {\r\n        background-position: -80px -88px;\r\n    }\r\n    .es-flag-lu:before {\r\n        background-position: -96px -88px;\r\n    }\r\n    .es-flag-lv:before {\r\n        background-position: -112px -88px;\r\n    }\r\n    .es-flag-ly:before {\r\n        background-position: -128px -88px;\r\n    }\r\n    .es-flag-ma:before {\r\n        background-position: -144px -88px;\r\n    }\r\n    .es-flag-mc:before {\r\n        background-position: -160px -88px;\r\n    }\r\n    .es-flag-md:before {\r\n        background-position: -176px -88px;\r\n    }\r\n    .es-flag-me:before {\r\n        background-position: -192px -88px;\r\n    }\r\n    .es-flag-mg:before {\r\n        background-position: -208px -88px;\r\n    }\r\n    .es-flag-mh:before {\r\n        background-position: -224px -88px;\r\n    }\r\n    .es-flag-mk:before {\r\n        background-position: -240px -88px;\r\n    }\r\n    .es-flag-ml:before {\r\n        background-position: 0 -99px;\r\n    }\r\n    .es-flag-mm:before {\r\n        background-position: -16px -99px;\r\n    }\r\n    .es-flag-mn:before {\r\n        background-position: -32px -99px;\r\n    }\r\n    .es-flag-mo:before {\r\n        background-position: -48px -99px;\r\n    }\r\n    .es-flag-mp:before {\r\n        background-position: -64px -99px;\r\n    }\r\n    .es-flag-mq:before {\r\n        background-position: -80px -99px;\r\n    }\r\n    .es-flag-mr:before {\r\n        background-position: -96px -99px;\r\n    }\r\n    .es-flag-ms:before {\r\n        background-position: -112px -99px;\r\n    }\r\n    .es-flag-mt:before {\r\n        background-position: -128px -99px;\r\n    }\r\n    .es-flag-mu:before {\r\n        background-position: -144px -99px;\r\n    }\r\n    .es-flag-mv:before {\r\n        background-position: -160px -99px;\r\n    }\r\n    .es-flag-mw:before {\r\n        background-position: -176px -99px;\r\n    }\r\n    .es-flag-mx:before {\r\n        background-position: -192px -99px;\r\n    }\r\n    .es-flag-my:before {\r\n        background-position: -208px -99px;\r\n    }\r\n    .es-flag-mz:before {\r\n        background-position: -224px -99px;\r\n    }\r\n    .es-flag-na:before {\r\n        background-position: -240px -99px;\r\n    }\r\n    .es-flag-nc:before {\r\n        background-position: 0 -110px;\r\n    }\r\n    .es-flag-ne:before {\r\n        background-position: -16px -110px;\r\n    }\r\n    .es-flag-nf:before {\r\n        background-position: -32px -110px;\r\n    }\r\n    .es-flag-ng:before {\r\n        background-position: -48px -110px;\r\n    }\r\n    .es-flag-ni:before {\r\n        background-position: -64px -110px;\r\n    }\r\n    .es-flag-nl:before {\r\n        background-position: -80px -110px;\r\n    }\r\n    .es-flag-no:before {\r\n        background-position: -96px -110px;\r\n    }\r\n    .es-flag-np:before {\r\n        background-position: -112px -110px;\r\n    }\r\n    .es-flag-nr:before {\r\n        background-position: -128px -110px;\r\n    }\r\n    .es-flag-nu:before {\r\n        background-position: -144px -110px;\r\n    }\r\n    .es-flag-nz:before {\r\n        background-position: -160px -110px;\r\n    }\r\n    .es-flag-om:before {\r\n        background-position: -176px -110px;\r\n    }\r\n    .es-flag-pa:before {\r\n        background-position: -192px -110px;\r\n    }\r\n    .es-flag-pe:before {\r\n        background-position: -208px -110px;\r\n    }\r\n    .es-flag-pf:before {\r\n        background-position: -224px -110px;\r\n    }\r\n    .es-flag-pg:before {\r\n        background-position: -240px -110px;\r\n    }\r\n    .es-flag-ph:before {\r\n        background-position: 0 -121px;\r\n    }\r\n    .es-flag-pk:before {\r\n        background-position: -16px -121px;\r\n    }\r\n    .es-flag-pl:before {\r\n        background-position: -32px -121px;\r\n    }\r\n    .es-flag-pm:before {\r\n        background-position: -48px -121px;\r\n    }\r\n    .es-flag-pn:before {\r\n        background-position: -64px -121px;\r\n    }\r\n    .es-flag-pr:before {\r\n        background-position: -80px -121px;\r\n    }\r\n    .es-flag-ps:before {\r\n        background-position: -96px -121px;\r\n    }\r\n    .es-flag-pt:before {\r\n        background-position: -112px -121px;\r\n    }\r\n    .es-flag-pw:before {\r\n        background-position: -128px -121px;\r\n    }\r\n    .es-flag-py:before {\r\n        background-position: -144px -121px;\r\n    }\r\n    .es-flag-qa:before {\r\n        background-position: -160px -121px;\r\n    }\r\n    .es-flag-re:before {\r\n        background-position: -176px -121px;\r\n    }\r\n    .es-flag-ro:before {\r\n        background-position: -192px -121px;\r\n    }\r\n    .es-flag-rs:before {\r\n        background-position: -208px -121px;\r\n    }\r\n    .es-flag-ru:before {\r\n        background-position: -224px -121px;\r\n    }\r\n    .es-flag-rw:before {\r\n        background-position: -240px -121px;\r\n    }\r\n    .es-flag-sa:before {\r\n        background-position: 0 -132px;\r\n    }\r\n    .es-flag-sb:before {\r\n        background-position: -16px -132px;\r\n    }\r\n    .es-flag-sc:before {\r\n        background-position: -32px -132px;\r\n    }\r\n    .es-flag-scotland:before {\r\n        background-position: -48px -132px;\r\n    }\r\n    .es-flag-sd:before {\r\n        background-position: -64px -132px;\r\n    }\r\n    .es-flag-se:before {\r\n        background-position: -80px -132px;\r\n    }\r\n    .es-flag-sg:before {\r\n        background-position: -96px -132px;\r\n    }\r\n    .es-flag-sh:before {\r\n        background-position: -112px -132px;\r\n    }\r\n    .es-flag-si:before {\r\n        background-position: -128px -132px;\r\n    }\r\n    .es-flag-sk:before {\r\n        background-position: -144px -132px;\r\n    }\r\n    .es-flag-sl:before {\r\n        background-position: -160px -132px;\r\n    }\r\n    .es-flag-sm:before {\r\n        background-position: -176px -132px;\r\n    }\r\n    .es-flag-sn:before {\r\n        background-position: -192px -132px;\r\n    }\r\n    .es-flag-so:before {\r\n        background-position: -208px -132px;\r\n    }\r\n    .es-flag-somaliland:before {\r\n        background-position: -224px -132px;\r\n    }\r\n    .es-flag-sr:before {\r\n        background-position: -240px -132px;\r\n    }\r\n    .es-flag-ss:before {\r\n        background-position: 0 -143px;\r\n    }\r\n    .es-flag-st:before {\r\n        background-position: -16px -143px;\r\n    }\r\n    .es-flag-sv:before {\r\n        background-position: -32px -143px;\r\n    }\r\n    .es-flag-sx:before {\r\n        background-position: -48px -143px;\r\n    }\r\n    .es-flag-sy:before {\r\n        background-position: -64px -143px;\r\n    }\r\n    .es-flag-sz:before {\r\n        background-position: -80px -143px;\r\n    }\r\n    .es-flag-tc:before {\r\n        background-position: -96px -143px;\r\n    }\r\n    .es-flag-td:before {\r\n        background-position: -112px -143px;\r\n    }\r\n    .es-flag-tf:before {\r\n        background-position: -128px -143px;\r\n    }\r\n    .es-flag-tg:before {\r\n        background-position: -144px -143px;\r\n    }\r\n    .es-flag-th:before {\r\n        background-position: -160px -143px;\r\n    }\r\n    .es-flag-tj:before {\r\n        background-position: -176px -143px;\r\n    }\r\n    .es-flag-tk:before {\r\n        background-position: -192px -143px;\r\n    }\r\n    .es-flag-tl:before {\r\n        background-position: -208px -143px;\r\n    }\r\n    .es-flag-tm:before {\r\n        background-position: -224px -143px;\r\n    }\r\n    .es-flag-tn:before {\r\n        background-position: -240px -143px;\r\n    }\r\n    .es-flag-to:before {\r\n        background-position: 0 -154px;\r\n    }\r\n    .es-flag-tr:before {\r\n        background-position: -16px -154px;\r\n    }\r\n    .es-flag-tt:before {\r\n        background-position: -32px -154px;\r\n    }\r\n    .es-flag-tv:before {\r\n        background-position: -48px -154px;\r\n    }\r\n    .es-flag-tw:before {\r\n        background-position: -64px -154px;\r\n    }\r\n    .es-flag-tz:before {\r\n        background-position: -80px -154px;\r\n    }\r\n    .es-flag-ua:before {\r\n        background-position: -96px -154px;\r\n    }\r\n    .es-flag-ug:before {\r\n        background-position: -112px -154px;\r\n    }\r\n    .es-flag-um:before {\r\n        background-position: -128px -154px;\r\n    }\r\n    .es-flag-us:before {\r\n        background-position: -144px -154px;\r\n    }\r\n    .es-flag-uy:before {\r\n        background-position: -160px -154px;\r\n    }\r\n    .es-flag-uz:before {\r\n        background-position: -176px -154px;\r\n    }\r\n    .es-flag-va:before {\r\n        background-position: -192px -154px;\r\n    }\r\n    .es-flag-vc:before {\r\n        background-position: -208px -154px;\r\n    }\r\n    .es-flag-ve:before {\r\n        background-position: -224px -154px;\r\n    }\r\n    .es-flag-vg:before {\r\n        background-position: -240px -154px;\r\n    }\r\n    .es-flag-vi:before {\r\n        background-position: 0 -165px;\r\n    }\r\n    .es-flag-vn:before {\r\n        background-position: -16px -165px;\r\n    }\r\n    .es-flag-vu:before {\r\n        background-position: -32px -165px;\r\n    }\r\n    .es-flag-wales:before {\r\n        background-position: -48px -165px;\r\n    }\r\n    .es-flag-wf:before {\r\n        background-position: -64px -165px;\r\n    }\r\n    .es-flag-ws:before {\r\n        background-position: -80px -165px;\r\n    }\r\n    .es-flag-ye:before {\r\n        background-position: -96px -165px;\r\n    }\r\n    .es-flag-yt:before {\r\n        background-position: -112px -165px;\r\n    }\r\n    .es-flag-za:before {\r\n        background-position: -128px -165px;\r\n    }\r\n    .es-flag-zanzibar:before {\r\n        background-position: -144px -165px;\r\n    }\r\n    .es-flag-zm:before {\r\n        background-position: -160px -165px;\r\n    }\r\n    .es-flag-zw:before {\r\n        background-position: -176px -165px;\r\n    }\r\n    .es-flag-eu2:before {\r\n        background-position: -192px -165px;\r\n    }\r\n</style>\r\n", "<script lang=\"ts\">\r\n    import Settings from \"@Options/Data/Settings\";\r\n    import Price from \"@Content/Modules/Currency/Price\";\r\n    import CurrencyManager from \"@Content/Modules/Currency/CurrencyManager\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__regionUnavailable} from \"@Strings/_strings\";\r\n    import type {PackageDetailsPrice} from \"./FRegionalPricing\";\r\n    import FlagIcon from \"@Icons/FlagIcon.svelte\";\r\n    import type UserInterface from \"@Core/User/UserInterface\";\r\n\r\n    export let user: UserInterface;\r\n    export let countries: string[];\r\n    export let prices: Record<string, PackageDetailsPrice>;\r\n    export let errors: Set<string>;\r\n    export let priceNode: Element|null = null;\r\n\r\n    let priceLocal: Price|null = null;\r\n    try {\r\n        const apiPrice: PackageDetailsPrice = prices[user.storeCountry.toLowerCase()]!;\r\n        priceLocal = (new Price(apiPrice.final / 100, apiPrice.currency))\r\n            .inCurrency(CurrencyManager.customCurrency);\r\n    } catch (err) {\r\n        handleError(err);\r\n    }\r\n\r\n    function getPriceUser(priceRegion: Price, country: string): Price|null {\r\n        try {\r\n            return priceRegion.inCurrency(CurrencyManager.customCurrency);\r\n        } catch (err) {\r\n            handleError(err, country);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    function handleError(e: any, country?: string): void {\r\n        const message = country\r\n            ? `Can't show converted price and relative price differences for country code ${country.toUpperCase()}`\r\n            : \"Can't show relative price differences to any other currencies\";\r\n\r\n        if (!errors.has(message)) {\r\n            errors.add(message);\r\n\r\n            console.group(\"Regional pricing\");\r\n            console.warn(message);\r\n            console.error(e);\r\n            console.groupEnd();\r\n        }\r\n    }\r\n\r\n    let container: HTMLElement;\r\n\r\n    if (Settings.showregionalprice === \"mouse\") {\r\n        priceNode!.classList.add(\"es_regional_onmouse\");\r\n\r\n        if (!Settings.regional_hideworld) {\r\n            priceNode!.classList.add(\"es_regional_icon\");\r\n        }\r\n\r\n        priceNode!.addEventListener(\"mouseenter\", () => {\r\n            const rects = priceNode!.getBoundingClientRect();\r\n            container.style.display = \"block\";\r\n            container.style.top = `${rects.top + window.scrollY - 5}px`;\r\n            container.style.left = `${rects.left - container.getBoundingClientRect().width}px`;\r\n        });\r\n\r\n        priceNode!.addEventListener(\"mouseleave\", () => {\r\n            container.style.display = \"none\";\r\n        });\r\n    }\r\n</script>\r\n\r\n\r\n<div class=\"es_regional\"\r\n     class:es_regional--always={Settings.showregionalprice === \"always\"}\r\n     class:es_regional--onmouse={Settings.showregionalprice === \"mouse\"}\r\n     bind:this={container}\r\n>\r\n    {#if Settings.showregionalprice === \"mouse\"}\r\n        <div class=\"es_regional_arrow\"></div>\r\n    {/if}\r\n    {#each countries as country}\r\n        {@const apiPrice = prices[country]}\r\n        <div class=\"es-regprice\">\r\n            <FlagIcon {country} />\r\n            {#if apiPrice}\r\n                {@const priceRegion = new Price(apiPrice.final / 100, apiPrice.currency)}\r\n                {@const priceUser = getPriceUser(priceRegion, country)}\r\n                {priceRegion.toString()}\r\n                {#if priceLocal && priceUser}\r\n                    {@const percentage = Number((((priceUser.value / priceLocal.value) * 100) - 100).toFixed(2))}\r\n                    <span class=\"es-converted\">{priceUser.toString()}</span>\r\n                    <span class=\"es-perc\"\r\n                          class:es-perc--higher={percentage > 0}\r\n                          class:es-perc--lower={percentage < 0}\r\n                          class:es-perc--equal={percentage === 0}\r\n                    >{Math.abs(percentage)}%</span>\r\n                {/if}\r\n            {:else}\r\n                <span class=\"es-none\">{L(__regionUnavailable)}</span>\r\n            {/if}\r\n        </div>\r\n    {/each}\r\n</div>\r\n\r\n\r\n<style>\r\n    /**\r\n     * Styles for parent container\r\n     */\r\n    :global(.es_regional_prices .game_purchase_action),\r\n    :global(.es_regional_prices .discount_block.game_purchase_discount) {\r\n        overflow: visible !important;\r\n    }\r\n    :global(.es_regional_onmouse) {\r\n        cursor: help;\r\n    }\r\n\r\n    :global(.es_regional_always::after) {\r\n        content: \"\";\r\n        display: block;\r\n        clear: both;\r\n    }\r\n\r\n    :global(.es_regional_icon) {\r\n        padding-left: 23px !important;\r\n        background-image: url(\"extension://img/flags/world.png\") !important;\r\n        background-repeat: no-repeat !important;\r\n        background-position: 8px 8px !important;\r\n    }\r\n    :global(.es_regional_icon.price) {\r\n        padding-left: 30px !important;\r\n    }\r\n\r\n\r\n    /**\r\n     * Local styles\r\n     */\r\n    .es_regional {\r\n        background: linear-gradient(120deg, #2c3c4a 5%, #42515f 100%);\r\n        padding: 7px 8px;\r\n        text-align: left;\r\n        border-radius: 4px;\r\n    }\r\n    .es_regional--always {\r\n        display: block;\r\n        position: relative;\r\n        float: right;\r\n        margin-top: auto;\r\n        margin-top: 5px;\r\n    }\r\n    .es_regional--onmouse {\r\n        /**\r\n         * Raise the popup's z-index so it shows on top of subsequent purchase containers.\r\n         * Set to higher than 500 (see #1969)\r\n         */\r\n        z-index: 1000;\r\n        display: none;\r\n        position: absolute;\r\n        pointer-events: none;\r\n        height: min-content;\r\n        box-shadow: 2px 2px 15px rgba(0,0,0,0.4);\r\n        border: 1px solid #16202d;\r\n    }\r\n\r\n    .es_regional_arrow {\r\n        border-top: 9px solid transparent;\r\n        border-bottom: 9px solid transparent;\r\n        border-left: 8px solid #3c4b59;\r\n        position: absolute;\r\n        top: 12px;\r\n        right: -8px;\r\n        width: 0;\r\n        height: 0;\r\n    }\r\n\r\n    .es-regprice {\r\n        display: flex;\r\n        align-items: baseline;\r\n        font-size: 14px;\r\n        white-space: nowrap;\r\n        gap: 5px;\r\n    }\r\n    .es-converted {\r\n        font-size: 12px;\r\n        text-align: right;\r\n        flex-grow: 1;\r\n        min-width: 60px;\r\n    }\r\n    .es-perc {\r\n        font-size: 12px;\r\n        width: 60px;\r\n        text-align: right;\r\n    }\r\n    .es-perc::after {\r\n        content: \"\";\r\n        width: 0;\r\n        height: 0;\r\n        margin-left: 4px;\r\n        margin-bottom: 2px;\r\n        position: relative;\r\n        display: inline-block;\r\n        border-color: transparent;\r\n        border-style: solid;\r\n    }\r\n    .es-perc--higher {\r\n        color: #ff1717;\r\n    }\r\n    .es-perc--higher::after {\r\n        border-width: 0 5px 5px 5px;\r\n        border-bottom-color: #ff1717;\r\n    }\r\n\r\n    .es-perc--equal {\r\n        color: #e5e500;\r\n    }\r\n    .es-perc--equal::after {\r\n        width: 6px;\r\n        content: \"=\";\r\n    }\r\n\r\n    .es-perc--lower {\r\n        color: #60ad0a;\r\n    }\r\n    .es-perc--lower::after {\r\n        border-width: 5px 5px 0 5px;\r\n        border-top-color: #60ad0a;\r\n    }\r\n\r\n    .es-none {\r\n        font-size: 12px;\r\n    }\r\n</style>\r\n", "\r\nclass LoginError extends Error {\r\n    constructor(type: string) {\r\n        super(type);\r\n        this.name = \"LoginError\";\r\n    }\r\n}\r\n\r\nclass ServerOutageError extends Error {\r\n    constructor(msg: string) {\r\n        super(msg);\r\n        this.name = \"ServerOutageError\";\r\n    }\r\n}\r\n\r\nclass OAuthUnauthorized extends Error {\r\n    constructor(msg?: string) {\r\n        super(msg);\r\n        this.name = \"OAuth Unauthorized\";\r\n    }\r\n}\r\n\r\nclass HTTPError extends Error {\r\n    public code: number;\r\n\r\n    constructor(code: number, message: string) {\r\n        super(message);\r\n        this.code = code;\r\n    }\r\n}\r\n\r\nclass FeatureDependencyError extends Error {\r\n    public featureName: string;\r\n\r\n    constructor(msg: string, featureName: string) {\r\n        super(msg);\r\n        this.featureName = featureName;\r\n    }\r\n}\r\n\r\nexport default {\r\n    LoginError,\r\n    ServerOutageError,\r\n    HTTPError,\r\n    FeatureDependencyError,\r\n    OAuthUnauthorized\r\n};\r\n", "import Errors from \"@Core/Errors/Errors\";\r\n\r\ndeclare global {\r\n    let content: any;\r\n}\r\n\r\nexport default class RequestData {\r\n\r\n    /**\r\n     * In Firefox, the global fetch lies in the sandbox environment, thus we have to\r\n     * access the fetch function of the content window.\r\n     * See https://bugzilla.mozilla.org/show_bug.cgi?id=1579347#c5\r\n     */\r\n    // FIXME this will not work anymore in Manifest V3\r\n    private static _fetchFn\r\n        = (typeof content !== \"undefined\" && content && content.fetch)\r\n        || fetch.bind(window);\r\n\r\n\r\n    private static async getHttp(url: URL|string, settings: RequestInit = {}): Promise<Response> {\r\n\r\n        const _settings = {\r\n            \"method\": \"GET\",\r\n            \"credentials\": \"include\",\r\n            \"headers\": {\"origin\": window.location.origin},\r\n            \"referrer\": window.location.origin + window.location.pathname,\r\n            ...settings\r\n        };\r\n\r\n        document.dispatchEvent(new CustomEvent(\"asRequestStart\"));\r\n\r\n        let response;\r\n        try {\r\n            response = await RequestData._fetchFn(url, _settings);\r\n\r\n            if (!response.ok) {\r\n                throw new Errors.HTTPError(response.status, `HTTP ${response.status} ${response.statusText} for ${response.url}`);\r\n            }\r\n        } catch (e) {\r\n            document.dispatchEvent(new CustomEvent(\"asRequestError\", {detail: e}));\r\n            throw e;\r\n        }\r\n\r\n        document.dispatchEvent(new CustomEvent(\"asRequestDone\"));\r\n        return response;\r\n    }\r\n\r\n    static async getText(url: URL|string, settings: RequestInit={}): Promise<string> {\r\n        const response = await this.getHttp(url, settings);\r\n        return response.text();\r\n    }\r\n\r\n    static async getJson<T>(url: URL|string, settings: RequestInit={}): Promise<T> {\r\n        const response = await this.getHttp(url, settings);\r\n        return response.json();\r\n    }\r\n\r\n    static async getBlob(url: URL|string, settings: RequestInit={}): Promise<Blob> {\r\n        const response = await this.getHttp(url, settings);\r\n        return response.blob();\r\n    }\r\n\r\n    static async post(\r\n        url: URL|string,\r\n        data: Record<string, string>,\r\n        settings: RequestInit = {}\r\n    ): Promise<Response> {\r\n\r\n        const _settings = {\r\n            \"method\": \"POST\",\r\n            \"body\": new URLSearchParams(data),\r\n            \"credentials\": \"include\",\r\n            \"headers\": {\"origin\": window.location.origin},\r\n            \"referrer\": window.location.origin + window.location.pathname,\r\n            ...settings\r\n        };\r\n\r\n        return await RequestData._fetchFn(url, _settings);\r\n    }\r\n}\r\n", "import self_ from \"./FRegionalPricing.svelte\";\r\nimport type CSub from \"@Content/Features/Store/Sub/CSub\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport RequestData from \"@Content/Modules/RequestData\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\nexport interface PackageDetailsPrice {\r\n    currency: string,\r\n    initial: number,\r\n    final: number,\r\n    discount_percent: number,\r\n    individual: number\r\n}\r\n\r\ninterface PackageDetails {\r\n    [K: string]: {\r\n        success: boolean,\r\n        data: {\r\n            price: PackageDetailsPrice\r\n        }\r\n    }\r\n}\r\n\r\nexport default class FRegionalPricing extends Feature<CSub> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        const countries = Settings.regional_countries;\r\n        return countries && countries.length > 0 && Settings.showregionalprice !== \"off\";\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n\r\n        const countries = Settings.regional_countries;\r\n        const localCountry = this.context.user.storeCountry.toLowerCase();\r\n\r\n        if (!countries.includes(localCountry)) {\r\n            countries.push(localCountry);\r\n        }\r\n\r\n        // Store errors to avoid duplicate console warnings\r\n        const errors = new Set<string>();\r\n\r\n        for (const subid of this.context.getAllSubids()) {\r\n            const prices: Record<string, PackageDetailsPrice> = {};\r\n\r\n            await Promise.all(countries.map(async country => {\r\n                const result = await RequestData.getJson<PackageDetails>(\r\n                    `https://store.steampowered.com/api/packagedetails/?packageids=${subid}&cc=${country}`,\r\n                    {\"credentials\": \"omit\"}\r\n                );\r\n                if (!result) { return; }\r\n\r\n                const data = result[subid];\r\n                if (!data || !data.success || !data.data.price) { return; }\r\n\r\n                prices[country] = data.data.price;\r\n            }));\r\n\r\n            // For paid titles that have F2P versions with their own subid (see #894)\r\n            if (prices[localCountry] === undefined) { continue; }\r\n\r\n            const node = document.querySelector(`input[name=subid][value=\"${subid}\"]`)!\r\n                .closest(\".game_area_purchase_game_wrapper, #game_area_purchase\")!\r\n                .querySelector(\".game_purchase_action\")!;\r\n\r\n            const purchaseArea = node.closest(\".game_area_purchase_game\")!;\r\n            purchaseArea.classList.add(\"es_regional_prices\");\r\n\r\n            if (Settings.showregionalprice === \"always\") {\r\n                purchaseArea.classList.add(\"es_regional_always\");\r\n\r\n                (new self_({\r\n                    target: node.parentElement!,\r\n                    anchor: node,\r\n                    props: {\r\n                        user: this.context.user,\r\n                        countries,\r\n                        prices,\r\n                        errors\r\n                    }\r\n                }));\r\n            } else if (Settings.showregionalprice === \"mouse\") {\r\n                const priceNode = node.querySelector(\".price, .discount_prices\")!;\r\n\r\n                (new self_({\r\n                    target: document.body,\r\n                    props: {\r\n                        user: this.context.user,\r\n                        countries,\r\n                        prices,\r\n                        errors,\r\n                        priceNode\r\n                    }\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {__achievements_summary} from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n\r\n    export let unlocked: number;\r\n    export let total: number;\r\n    export let percentage: number;\r\n\r\n    let achievementStr = L(__achievements_summary, {\r\n        \"unlocked\": unlocked,\r\n        \"total\": total,\r\n        \"percentage\": percentage\r\n    });\r\n</script>\r\n\r\n\r\n<div class=\"es_achievebar_ctn\">\r\n    <div>{achievementStr}</div>\r\n    <div class=\"es_achievebar\">\r\n        <div style:width=\"{percentage}%\" class=\"es_achievebar_progress\"></div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    .es_achievebar_ctn {\r\n        float: right;\r\n    }\r\n    .es_achievebar {\r\n        background: #3a3a3a;\r\n        padding: 1px;\r\n        border: 1px solid #aeaeae;\r\n        width: 176.9px;\r\n    }\r\n    .es_achievebar_progress {\r\n        height: 8px;\r\n        background-color: #aeaeae;\r\n    }\r\n</style>\r\n", "import RequestData from \"@Content/Modules/RequestData\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\n\r\ninterface TAchievementProgress {\r\n    appid: number,\r\n    unlocked: number,\r\n    total: number,\r\n    percentage: number,\r\n    all_unlocked: boolean,\r\n    cache_time: number\r\n}\r\n\r\nexport default class SteamApi {\r\n\r\n    static async getAchievementsProgress(user: UserInterface, appid: number): Promise<TAchievementProgress> {\r\n        let responseData: {\r\n            response?: {\r\n                achievement_progress: Array<TAchievementProgress>\r\n            }\r\n        };\r\n\r\n        try {\r\n            const token = await user.getWebApiToken();\r\n            const steamId = user.steamId;\r\n\r\n            const response = await RequestData.post(\r\n                `https://api.steampowered.com/IPlayerService/GetAchievementsProgress/v1/?access_token=${token}`,\r\n                {\"steamid\": steamId, \"appids[0]\": String(appid)},\r\n                {\"credentials\": \"omit\"}\r\n            );\r\n            responseData = await response.json();\r\n        } catch (err) {\r\n            throw new Error(\"Failed to fetch achievements\");\r\n        }\r\n\r\n        let data = responseData?.response?.achievement_progress?.[0];\r\n\r\n        if (!data) {\r\n            throw new Error(\"Failed to find achievements data\");\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n}\r\n", "import self_ from \"./FAchievementBar.svelte\";\r\nimport SteamApi from \"../../../Modules/SteamApi\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FAchievementBar extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        /**\r\n         * If you don't own the game, all values will be 0,\r\n         * just as if you own the game but have no achievements,\r\n         * so it's important to check for ownership `this.context.isOwnedAndPlayed`.\r\n         */\r\n        return Settings.showachinstore\r\n            && this.context.hasAchievements\r\n            && this.context.isOwnedAndPlayed;\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n        const {unlocked, total, percentage} = await SteamApi.getAchievementsProgress(\r\n            this.context.user,\r\n            this.context.communityAppid\r\n        );\r\n\r\n        const target = document.querySelector(\"#my_activity\")!;\r\n\r\n        (new self_({\r\n            target,\r\n            anchor: target.firstElementChild ?? undefined,\r\n            props: {\r\n                unlocked,\r\n                total,\r\n                percentage: Math.round(percentage)\r\n            }\r\n        }));\r\n    }\r\n}\r\n", "import type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport ExtensionResources from \"@Core/ExtensionResources\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport {__viewAstats} from \"@Strings/_strings\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\n// todo maybe integrate with other useful links?\r\nexport default class FAStatsLink extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.showastatslink && this.context.hasAchievements;\r\n    }\r\n\r\n    override apply(): void {\r\n        const imgUrl = ExtensionResources.getURL(\"img/ico/astatsnl.png\");\r\n        const url = `https://astats.astats.nl/astats/Steam_Game_Info.php?AppID=${this.context.communityAppid}`;\r\n\r\n        HTML.beforeEnd(\"#achievement_block\",\r\n            `<div class=\"game_area_details_specs\">\r\n                <div class=\"icon\"><img class=\"astats_icon\" src=\"${imgUrl}\"></div>\r\n                <a class=\"name es_external_icon\" href=\"${url}\" target=\"_blank\">${L(__viewAstats)}</a>\r\n            </div>`);\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import type {TBadgeData} from \"@Background/Modules/Community/_types\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {\r\n        __badgeLevel,\r\n        __badgeNotUnlocked,\r\n        __badgeProgress,\r\n        __cardsOwned, __viewBadge, __viewBadgeProgress\r\n    } from \"@Strings/_strings\";\r\n\r\n    export let data: TBadgeData;\r\n\r\n    let cardOwned = data.rgCards.filter(c => c.owned === 1).length;\r\n    let cardTotal = data.rgCards.length;\r\n</script>\r\n\r\n\r\n<div class=\"block responsive_apppage_details_right heading\">{L(__badgeProgress)}</div>\r\n<div class=\"block responsive_apppage_details_right\">\r\n    <div class=\"block_content_inner es_badges_progress_block\">\r\n        {#if data.level === 0}\r\n            <div class=\"badge_empty_circle\"></div>\r\n            <div class=\"badge_empty_right\">\r\n                <div class=\"badge_empty_name\">{data.nextlevelname}</div>\r\n                <div class=\"badge_empty_name\">{L(__badgeNotUnlocked)}</div>\r\n            </div>\r\n        {:else}\r\n            <div class=\"badge_info_image\">\r\n                <img src=\"{data.iconurl}\" class=\"badge_icon\" alt=\"Badge\">\r\n            </div>\r\n            <div class=\"badge_info_description\">\r\n                <div class=\"badge_info_title\">{data.name}</div>\r\n                <div>{L(__badgeLevel, {\"level\": data.level})}</div>\r\n            </div>\r\n        {/if}\r\n        <div class=\"es_cards_numbers\">\r\n            <div class=\"es_cards_owned\">{L(__cardsOwned, {\"owned\": cardOwned, \"possible\": cardTotal})}</div>\r\n        </div>\r\n        <div class=\"game_area_details_specs\">\r\n            <div class=\"icon\"><img src=\"//store.steampowered.com/public/images/v6/ico/ico_cards.png\" class=\"category_icon\" alt=\"Cards icon\"></div>\r\n            <a href=\"//steamcommunity.com/my/gamecards/{data.appid}/\" class=\"name\">{L(data.bMaxed ? __viewBadge : __viewBadgeProgress)}</a>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    .es_badges_progress_block {\r\n        overflow: hidden;\r\n    }\r\n    .badge_info_image {\r\n        float: left;\r\n        margin-right: 24px;\r\n        width: 80px;\r\n        height: 80px;\r\n    }\r\n    img.badge_icon {\r\n        width: 80px;\r\n        height: 80px;\r\n    }\r\n    .badge_info_description {\r\n        margin-top: 18px;\r\n    }\r\n    .badge_info_title {\r\n        color: #ffffff;\r\n    }\r\n    .badge_empty_circle {\r\n        margin: 0px 46px 14px 8px;\r\n        border-radius: 46px;\r\n        width: 46px;\r\n        height: 46px;\r\n        border: 2px dashed #656565;\r\n        float: left;\r\n    }\r\n    .badge_empty_right {\r\n        margin-top: 8px;\r\n    }\r\n    .badge_empty_name {\r\n        color: #5c5c5c;\r\n    }\r\n    .es_cards_numbers {\r\n        padding-top: 10px;\r\n        padding-bottom: 10px;\r\n        margin-left: 44px;\r\n        color: #67c1f5;\r\n        clear: both;\r\n    }\r\n    .es_cards_owned {\r\n        padding-top: 8px;\r\n    }\r\n</style>\r\n", "import Background from \"@Core/Background\";\r\nimport type {TFetchBadgeInfoResponse, TFetchReviewsResponse, TLogin} from \"@Background/Modules/Community/_types\";\r\nimport {EAction} from \"@Background/EAction\";\r\n\r\nexport default class SteamCommunityApiFacade {\r\n\r\n    static fetchBadgeInfo(steamId: string, appid: number): Promise<TFetchBadgeInfoResponse> {\r\n        return Background.send(EAction.BadgeInfo, {steamId, appid});\r\n    }\r\n\r\n    static getWorkshopFileSize(id: number, preventFetch: boolean): Promise<number|null> {\r\n        return Background.send(EAction.WorkshopFileSize, {id, preventFetch});\r\n    }\r\n\r\n    static getReviews(steamId: string, pages: number): Promise<TFetchReviewsResponse> {\r\n        return Background.send(EAction.Reviews, {steamId, pages});\r\n    }\r\n\r\n    static login(profilePath: string): Promise<TLogin> {\r\n        return Background.send(EAction.Login, {profilePath});\r\n    }\r\n\r\n    static logout(force: boolean|undefined=undefined): Promise<void> {\r\n        return Background.send(EAction.Logout, {force});\r\n    }\r\n\r\n    static setStoreCountry(newCountry: string): Promise<void> {\r\n        return Background.send(EAction.StoreCountry_Set, {newCountry});\r\n    }\r\n\r\n    static getStoreCountry(): Promise<string|null> {\r\n        return Background.send(EAction.StoreCountry_Get);\r\n    }\r\n}\r\n", "import self_ from \"./FBadgeProgress.svelte\";\r\nimport type {TFetchBadgeInfoResponse} from \"@Background/Modules/Community/_types\";\r\nimport SteamCommunityApiFacade from \"../../../Modules/Facades/SteamCommunityApiFacade\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FBadgeProgress extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return !this.context.isDlcLike\r\n            && this.context.user.isSignedIn\r\n            && Settings.show_badge_progress;\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n        let response: TFetchBadgeInfoResponse = await SteamCommunityApiFacade.fetchBadgeInfo(\r\n            this.context.user.steamId,\r\n            this.context.communityAppid\r\n        );\r\n\r\n        let data = response.badgedata;\r\n\r\n        // No badge data if game doesn't have cards or not logged in\r\n        if (!data) {\r\n            return;\r\n        }\r\n\r\n        let target = document.querySelector(\".rightcol.game_meta_data\");\r\n        if (!target) {\r\n            throw new Error(\"Node not found\");\r\n        }\r\n\r\n        (new self_({\r\n            target,\r\n            anchor: target.querySelector(\"#category_block\")?.nextElementSibling ?? undefined,\r\n            props: {data}\r\n        }));\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport {__downloadDemoHeader, __export_download} from \"@Strings/_strings\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport HTML from \"@Core/Html/Html\";\r\n\r\n/*\r\n * Try out with https://store.steampowered.com/app/220/HalfLife_2/\r\n * TODO Add \"Add to Library\" button\r\n */\r\n\r\nexport default class FDemoAbovePurchase extends Feature<CApp> {\r\n\r\n    private _demoLink: string|null = null;\r\n\r\n    override checkPrerequisites(): boolean {\r\n        // strip leading \"javascript:\"\r\n        this._demoLink = document.querySelector<HTMLAnchorElement>(\".download_demo_button a.btn_medium\")?.href.slice(11) ?? null;\r\n\r\n        // Check if there's a demo link in the right column, but no demo-above-purchase section\r\n        return Boolean(this._demoLink) && document.querySelector(\".demo_above_purchase\") === null;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        // Determine available platforms from system requirements\r\n        const winIcon = document.querySelector(\"[data-os=win]\") ? '<span class=\"platform_img win\"></span>' : \"\";\r\n        const macIcon = document.querySelector(\"[data-os=mac]\") ? '<span class=\"platform_img mac\"></span>' : \"\";\r\n        const linuxIcon = document.querySelector(\"[data-os=linux]\") ? '<span class=\"platform_img linux\"></span>' : \"\";\r\n\r\n        const html = `<div class=\"game_area_purchase_game demo_above_purchase\">\r\n            <div class=\"game_area_purchase_platform\">\r\n                ${winIcon}${macIcon}${linuxIcon}\r\n            </div>\r\n            <h1>${L(__downloadDemoHeader, {\"gamename\": this.context.appName})}</h1>\r\n            <div class=\"game_purchase_action\">\r\n                <div class=\"game_purchase_action_bg\">\r\n                    <div id=\"demoGameBtn\" class=\"btn_addtocart\">\r\n                        <span class=\"btn_green_steamui btn_medium\">\r\n                            <span>${L(__export_download)}</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>`;\r\n\r\n        const purchaseNote = document.getElementById(\"purchase_note\");\r\n        if (purchaseNote) {\r\n            HTML.afterEnd(purchaseNote, html);\r\n        } else {\r\n            HTML.afterBegin(document.getElementById(\"game_area_purchase\"), html);\r\n        }\r\n\r\n        // Prevent sanitizing inline javascript (comes from page, safe source)\r\n        document.querySelector(\"#demoGameBtn > .btn_green_steamui\")!.setAttribute(\"onclick\", this._demoLink!);\r\n    }\r\n}\r\n", "import {\r\n    __addSelectedDlcToCart,\r\n    __dlcSelect_none,\r\n    __dlcSelect_unownedDlc,\r\n    __dlcSelect_wishlistedDlc,\r\n} from \"@Strings/_strings\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport Price from \"@Content/Modules/Currency/Price\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\nimport \"./FDLCCheckboxes.css\";\r\n\r\nexport default class FDLCCheckboxes extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        // check if the page has at least one purchasable DLC available\r\n        return document.querySelector(\".game_area_dlc_section .game_area_dlc_list input[name^=subid]\") !== null;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        const dlcSection = document.querySelector(\".game_area_dlc_section\");\r\n        if (!dlcSection) {\r\n            return;\r\n        }\r\n\r\n        for (const dlcRow of dlcSection.querySelectorAll(\".game_area_dlc_row\")) {\r\n\r\n            // Only add checkboxes to purchasable dlcs\r\n            const subidNode = dlcRow.querySelector<HTMLInputElement>(\"input[name^=subid]\");\r\n            if (!subidNode) { continue; }\r\n\r\n            const label = document.createElement(\"label\");\r\n            label.classList.add(\"es_dlc_label\");\r\n\r\n            // Add dsinfo to label for use with select/unselect all\r\n            if (dlcRow.classList.contains(\"ds_wishlist\")) {\r\n                label.classList.add(\"es_dlc_wishlist\");\r\n            } else if (dlcRow.classList.contains(\"ds_owned\")) {\r\n                label.classList.add(\"es_dlc_owned\");\r\n            }\r\n\r\n            const checkbox = document.createElement(\"input\");\r\n            checkbox.type = \"checkbox\";\r\n            checkbox.dataset.esDlcSubid = subidNode.value;\r\n\r\n            // Must check \".discount_final_price\" first to get the correct price\r\n            const priceNode = dlcRow.querySelector(\".discount_final_price\")\r\n                ?? dlcRow.querySelector(\".game_area_dlc_price\");\r\n\r\n            const price = !priceNode ? null : Price.parseFromString(priceNode.textContent!);\r\n            if (price !== null) {\r\n                checkbox.dataset.esDlcPrice = String(price.value);\r\n            }\r\n\r\n            label.append(checkbox);\r\n\r\n            const node = dlcRow.querySelector<HTMLElement>(\":scope > div:first-child\");\r\n            if (!node) { continue; }\r\n\r\n            // TODO remove when min version is increased to FF 121\r\n            if (!CSS.supports(\"selector(:has(a))\")) {\r\n                if (dlcRow.classList.contains(\"dlc_highlight\")) {\r\n                    node.style.marginLeft = \"-4px\";\r\n                } else {\r\n                    node.style.display = \"flex\";\r\n                    node.style.marginLeft = \"-4px\";\r\n                    node.style.padding = \"0\";\r\n                }\r\n            }\r\n\r\n            node.prepend(label);\r\n        }\r\n\r\n        // Toggle dsinfo on label when adding/removing wishlist via ds_options dropdown\r\n        new MutationObserver(mutations => {\r\n            for (const mutation of mutations) {\r\n                const target = mutation.target as HTMLElement;\r\n                if (!target.classList.contains(\"game_area_dlc_row\")) { continue; }\r\n\r\n                // Prevent errors when there're no labels, e.g. free dlcs\r\n                const label = target.querySelector(\".es_dlc_label\");\r\n                if (!label) { continue; }\r\n\r\n                label.classList.toggle(\"es_dlc_wishlist\", target.classList.contains(\"ds_wishlist\"));\r\n            }\r\n        }).observe(\r\n            dlcSection.querySelector(\".gameDlcBlocks\")!,\r\n            {\"subtree\": true, \"attributeFilter\": [\"class\"]}\r\n        );\r\n\r\n        const html = `<div class=\"game_purchase_action game_purchase_action_bg\" id=\"es_selected_btn\">\r\n                <div class=\"game_purchase_price price\"></div>\r\n                <div class=\"btn_addtocart\">\r\n                    <a class=\"btn_green_steamui btn_medium\">\r\n                        <span>${L(__addSelectedDlcToCart)}</span>\r\n                    </a>\r\n                </div>\r\n            </div>`;\r\n\r\n        const expandedNode = dlcSection.querySelector(\"#game_area_dlc_expanded\");\r\n        if (expandedNode) {\r\n            HTML.afterEnd(expandedNode, html);\r\n            HTML.afterEnd(dlcSection, '<div style=\"clear: both;\"></div>');\r\n        } else {\r\n            HTML.afterEnd(dlcSection.querySelector(\".gameDlcBlocks\"), html);\r\n        }\r\n\r\n        const subids = new Set();\r\n        const cartBtn = dlcSection.querySelector<HTMLElement>(\"#es_selected_btn\")!;\r\n        cartBtn.addEventListener(\"click\", () => {\r\n            DOMHelper.insertScript(\"scriptlets/Store/App/addItemToCart.js\", {\r\n                subids: Array.from(subids)\r\n            });\r\n        });\r\n\r\n        HTML.afterEnd(dlcSection.querySelector(\".gradientbg\"),\r\n            `<div id=\"es_dlc_option_panel\">\r\n                <div class=\"es_dlc_option\" id=\"unowned_dlc_check\">${L(__dlcSelect_unownedDlc)}</div>\r\n                <div class=\"es_dlc_option\" id=\"wl_dlc_check\">${L(__dlcSelect_wishlistedDlc)}</div>\r\n                <div class=\"es_dlc_option\" id=\"no_dlc_check\">${L(__dlcSelect_none)}</div>\r\n            </div>`);\r\n\r\n        dlcSection.querySelector(\"#unowned_dlc_check\")!.addEventListener(\"click\", () => {\r\n            const nodes = dlcSection.querySelectorAll<HTMLInputElement>(\".es_dlc_label:not(.es_dlc_owned) > input\");\r\n            for (const node of nodes) {\r\n                node.checked = true;\r\n            }\r\n            dlcSection.dispatchEvent(new Event(\"change\"));\r\n        });\r\n\r\n        dlcSection.querySelector(\"#wl_dlc_check\")!.addEventListener(\"click\", () => {\r\n            const nodes = dlcSection.querySelectorAll<HTMLInputElement>(\".es_dlc_label.es_dlc_wishlist > input\");\r\n            for (const node of nodes) {\r\n                node.checked = true;\r\n            }\r\n            dlcSection.dispatchEvent(new Event(\"change\"));\r\n        });\r\n\r\n        dlcSection.querySelector(\"#no_dlc_check\")!.addEventListener(\"click\", () => {\r\n            const nodes = dlcSection.querySelectorAll<HTMLInputElement>(\".es_dlc_label > input:checked\");\r\n            for (const node of nodes) {\r\n                node.checked = false;\r\n            }\r\n            dlcSection.dispatchEvent(new Event(\"change\"));\r\n        });\r\n\r\n        dlcSection.addEventListener(\"change\", () => {\r\n\r\n            subids.clear();\r\n\r\n            let total = 0;\r\n            for (const node of dlcSection.querySelectorAll<HTMLInputElement>(\".es_dlc_label > input:checked\")) {\r\n\r\n                subids.add(Number(node.dataset.esDlcSubid));\r\n\r\n                if (node.dataset.esDlcPrice) {\r\n                    total += Number(node.dataset.esDlcPrice);\r\n                }\r\n            }\r\n\r\n            if (total > 0) {\r\n                cartBtn.querySelector<HTMLElement>(\".game_purchase_price\")!.textContent = (new Price(total)).toString();\r\n                cartBtn.style.display = \"block\";\r\n            } else {\r\n                cartBtn.style.display = \"none\";\r\n            }\r\n        });\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {__dlcDetails} from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import type {TDlcInfo} from \"@Background/Modules/AugmentedSteam/_types\";\r\n    import ExtensionResources from \"@Core/ExtensionResources\";\r\n\r\n    export let dlcInfo: TDlcInfo;\r\n</script>\r\n\r\n<div class=\"block responsive_apppage_details_right heading\">{L(__dlcDetails)}</div>\r\n<div class=\"block es_dlc_info\">\r\n    <div class=\"block_content\">\r\n        <div class=\"block_content_inner\">\r\n            <div class=\"details_block\">`;\r\n\r\n                {#each dlcInfo as item}\r\n                    <div class=\"game_area_details_specs\">\r\n                        <div class=\"icon\">\r\n                            <img src={ExtensionResources.getURL(`/img/dlcicons/${encodeURIComponent(item.icon)}`)} alt=\"\">\r\n                        </div>\r\n                        <!-- svelte-ignore a11y-missing-attribute -->\r\n                        <a class=\"name\" title={item.description}>{item.name}</a>\r\n                    </div>\r\n                {/each}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n", "import self_ from \"./FDLCInfo.svelte\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport AugmentedSteamApiFacade from \"@Content/Modules/Facades/AugmentedSteamApiFacade\";\r\n\r\nexport default class FDLCInfo extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return this.context.isDlc;\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n        let response;\r\n\r\n        try {\r\n            response = await AugmentedSteamApiFacade.fetchDlcInfo(this.context.appid);\r\n            // TODO remove when suggestion link is fixed\r\n            if (!response || !response.length) { return; }\r\n        } catch (err) {\r\n            console.error(err);\r\n            return;\r\n        }\r\n\r\n        const anchor = document.querySelector(\"#category_block\")!;\r\n        const target = anchor.parentElement!;\r\n\r\n        (new self_({\r\n            target,\r\n            anchor,\r\n            props: {\r\n                dlcInfo: response\r\n            }\r\n        }));\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {__familySharingNotice_desc, __familySharingNotice_notice} from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n</script>\r\n\r\n\r\n<div>\r\n    <div class=\"notice_box_top\"></div>\r\n        <div class=\"notice_box_content\"><b>{L(__familySharingNotice_notice)}</b> {L(__familySharingNotice_desc)}</div>\r\n    <div class=\"notice_box_bottom\"></div>\r\n</div>\r\n", "import self_ from \"./FFamilySharingNotice.svelte\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\nexport default class FFamilySharingNotice extends Feature<CApp> {\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        if (!Settings.exfgls) { return false; }\r\n\r\n        const result = await this.context.data;\r\n        // Apply this feature if app is NOT family shareable\r\n        return result !== null && !result.family_sharing;\r\n    }\r\n\r\n    override apply(): void {\r\n        let anchor = document.querySelector(\"#game_area_purchase\");\r\n        if (!anchor) {\r\n            throw new Error(\"Node not found\");\r\n        }\r\n\r\n        (new self_({\r\n            target: anchor.parentElement!,\r\n            anchor,\r\n        }));\r\n    }\r\n}\r\n", "import type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport LocalStorage from \"@Core/Storage/LocalStorage\";\r\n\r\nexport default class FForceMP4 extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.mp4video;\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n\r\n        const playInHD: boolean = await LocalStorage.get(\"playback_hd\") ?? false;\r\n\r\n        for (const node of document.querySelectorAll<HTMLElement>(\"[data-webm-source]\")) {\r\n            const mp4 = node.dataset.mp4Source;\r\n            const mp4hd = node.dataset.mp4HdSource;\r\n            if (!mp4 || !mp4hd) { continue; }\r\n\r\n            node.dataset.webmSource = mp4;\r\n            node.dataset.webmHdSource = mp4hd;\r\n\r\n            const videoEl = node.querySelector(\"video\");\r\n            if (!videoEl) { continue; }\r\n\r\n            videoEl.dataset.hdSrc = mp4hd;\r\n            this.context.toggleVideoDefinition(videoEl, playInHD, true);\r\n        }\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport HTML from \"@Core/Html/Html\";\r\n\r\nexport default class FFullscreenScreenshotView extends Feature<CApp> {\r\n\r\n    override apply(): void {\r\n\r\n        function toggleFullscreen(e: Event): void {\r\n            if (document.fullscreenElement) {\r\n                document.exitFullscreen();\r\n            } else {\r\n                (<HTMLElement>e.target)\r\n                    .closest(\".screenshot_popup_modal_content\")!\r\n                    .requestFullscreen();\r\n            }\r\n        }\r\n\r\n        function initFSVButtons(): void {\r\n            const modalFooter = document.querySelector(\".screenshot_popup_modal_footer\")!;\r\n            const nextButton = modalFooter.querySelector<HTMLElement>(\".next\")!;\r\n            let nextButtonOffsetWidth = nextButton.offsetWidth;\r\n            if (nextButton.style.display === \"none\") {\r\n                nextButton.style.display = \"\";\r\n                nextButtonOffsetWidth = nextButton.offsetWidth;\r\n                nextButton.style.display = \"none\";\r\n            }\r\n            HTML.beforeEnd(modalFooter,\r\n                `<div class=\"btnv6_blue_hoverfade btn_medium es_screenshot_fullscreen_toggle\" style=\"right: calc(${nextButtonOffsetWidth}px + 0.5em)\"><i></i></div>`);\r\n            const fsvButton = modalFooter.querySelector<HTMLElement>(\".es_screenshot_fullscreen_toggle\")!;\r\n            fsvButton.addEventListener(\"click\", toggleFullscreen);\r\n\r\n            const modalTitleLink = modalFooter.parentNode!.querySelector<HTMLAnchorElement>(\".screenshot_popup_modal_title > a\")!;\r\n            HTML.beforeEnd(modalFooter,\r\n                `<div class=\"btnv6_blue_hoverfade btn_medium es_screenshot_open_btn\" style=\"right: calc(${nextButtonOffsetWidth + fsvButton.offsetWidth}px + 1em)\"><i></i></div>`);\r\n            const openButton = modalFooter.querySelector(\".es_screenshot_open_btn\")!;\r\n            openButton.addEventListener(\"click\", () => {\r\n                window.open(modalTitleLink.href, \"_blank\");\r\n            });\r\n        }\r\n\r\n        new MutationObserver(mutations => {\r\n            for (const {addedNodes} of mutations) {\r\n                for (const node of addedNodes) {\r\n                    if ((<HTMLElement>node).classList.contains(\"screenshot_popup_modal\")) {\r\n                        initFSVButtons();\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }).observe(document.body, {\"childList\": true});\r\n    }\r\n}\r\n", "\r\nclass Timer {\r\n\r\n    private promise: Promise<void>;\r\n\r\n    constructor(duration: number) {\r\n        this.promise = new Promise(resolve => setTimeout(resolve, duration));\r\n    }\r\n\r\n    then(onDone: (value: void) => void|Promise<void>) {\r\n        return this.promise.then(onDone);\r\n    }\r\n}\r\n\r\nexport interface IResettableTimer {\r\n    readonly running: boolean,\r\n    reset: () => void,\r\n    stop: () => void,\r\n}\r\n\r\nclass ResettableTimer implements IResettableTimer {\r\n\r\n    private id: number|undefined;\r\n    private _running: boolean = false;\r\n\r\n    private readonly onDone: () => void|Promise<void>;\r\n    private readonly duration: number;\r\n\r\n    constructor(onDone: () => void|Promise<void>, duration: number) {\r\n        this.onDone = onDone;\r\n        this.duration = duration;\r\n\r\n        this.reset();\r\n    }\r\n\r\n    get running(): boolean {\r\n        return this._running;\r\n    }\r\n\r\n    reset(): void {\r\n        if (typeof this.id !== \"undefined\") {\r\n            clearTimeout(this.id);\r\n        }\r\n\r\n        this.id = window.setTimeout(async() => {\r\n            await this.onDone();\r\n            this._running = false;\r\n        }, this.duration);\r\n\r\n        this._running = true;\r\n    }\r\n\r\n    stop(): void {\r\n        if (typeof this.id !== \"undefined\") {\r\n            clearTimeout(this.id);\r\n            this.id = undefined;\r\n        }\r\n\r\n        this._running = false;\r\n    }\r\n}\r\n\r\n\r\nexport default class TimeUtils {\r\n\r\n    static timer(duration: number): Timer {\r\n        return new Timer(duration);\r\n    }\r\n\r\n    static resettableTimer(onDone: () => void|Promise<void>, duration: number): IResettableTimer {\r\n        return new ResettableTimer(onDone, duration);\r\n    }\r\n\r\n    static now(): number {\r\n        return Math.trunc(Date.now() / 1000);\r\n    }\r\n\r\n    static isInPast(timestamp: number): boolean {\r\n        return timestamp <= this.now();\r\n    }\r\n\r\n    static isInFuture(timestamp: number): boolean {\r\n        return timestamp > this.now();\r\n    }\r\n}\r\n", "import LocalStorage from \"@Core/Storage/LocalStorage\";\r\nimport TimeUtils from \"@Core/Utils/TimeUtils\";\r\nimport type {IResettableTimer} from \"@Core/Utils/TimeUtils\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FHDPlayer extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return document.querySelector(\"div.highlight_movie\") !== null;\r\n    }\r\n\r\n    override apply(): void {\r\n        for (const container of document.querySelectorAll<HTMLDivElement>(\"div.highlight_movie\")) {\r\n\r\n            // Check if the video has already loaded\r\n            if (container.children[0] instanceof HTMLVideoElement) {\r\n                this._addHDControl(container);\r\n                this._addMouseMoveHandler(container);\r\n                continue;\r\n            }\r\n\r\n            // Apply features to each video as it's added to the DOM\r\n            new MutationObserver((_, observer) => {\r\n                // The video may fail to load, but just disconnect for now\r\n                observer.disconnect();\r\n\r\n                if (container.children[0] instanceof HTMLVideoElement) {\r\n                    this._addHDControl(container);\r\n                    this._addMouseMoveHandler(container);\r\n                }\r\n            }).observe(container, {\"childList\": true});\r\n        }\r\n    }\r\n\r\n    private async _clickHDControl(): Promise<void> {\r\n        const playInHD = await LocalStorage.get(\"playback_hd\") ?? false;\r\n\r\n        // When the \"HD\" button is clicked change the definition for all videos accordingly\r\n        for (const node of document.querySelectorAll<HTMLVideoElement>(\"video.highlight_movie\")) {\r\n            this.context.toggleVideoDefinition(node, !playInHD);\r\n        }\r\n\r\n        await LocalStorage.set(\"playback_hd\", !playInHD);\r\n    }\r\n\r\n    private async _addHDControl(container: HTMLElement): Promise<void> {\r\n        const video = container.children[0] as HTMLVideoElement;\r\n\r\n        const btn = document.createElement(\"div\");\r\n        btn.classList.add(\"es_hd_toggle\");\r\n        btn.textContent = \"HD\";\r\n        btn.addEventListener(\"click\", () => { this._clickHDControl(); });\r\n        container.querySelector(\".time\")!.after(btn);\r\n\r\n        // Toggle fullscreen on double click\r\n        video.addEventListener(\"dblclick\", () => {\r\n            container.querySelector<HTMLButtonElement>(\".fullscreen_button\")!.click();\r\n        });\r\n\r\n        this.context.toggleVideoDefinition(video, (await LocalStorage.get(\"playback_hd\")) ?? false);\r\n    }\r\n\r\n    private _addMouseMoveHandler(container: HTMLElement): void {\r\n        // There may be a 3rd element - the titlebar, but Steam hides it after playing the video for 5s\r\n        const children = container.children;\r\n        const video: HTMLVideoElement = children[0] as HTMLVideoElement;\r\n        const overlay: HTMLElement = children[1] as HTMLElement;\r\n\r\n        let timer: IResettableTimer|null = null;\r\n\r\n        video.addEventListener(\"mousemove\", () => {\r\n            if (timer) {\r\n                timer.reset();\r\n                video.style.cursor = \"\";\r\n                overlay.style.bottom = \"0px\";\r\n            } else {\r\n                timer = TimeUtils.resettableTimer(() => {\r\n                    video.style.cursor = \"none\";\r\n                    overlay.style.bottom = \"-35px\";\r\n                }, 2000);\r\n            }\r\n        });\r\n\r\n        video.addEventListener(\"mouseleave\", () => {\r\n            // Avoid hiding the overlay when moving the cursor from video to overlay\r\n            timer?.stop();\r\n        });\r\n    }\r\n}\r\n", "import HTMLParser from \"@Core/Html/HtmlParser\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\n\r\nexport default class FHideReportedTags extends Feature<CApp> {\r\n\r\n    // @ts-ignore\r\n    private _yourTags: NodeListOf<HTMLElement>;\r\n\r\n    override checkPrerequisites(): boolean {\r\n        // This feature intends to remove reported tags mistakenly shown as user-defined, see #1423\r\n        this._yourTags = document.querySelectorAll<HTMLElement>(\".app_tag.user_defined\");\r\n        return this._yourTags.length > 0;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        /**\r\n         * The second argument passed to `InitAppTagModal()` is an array of user tags\r\n         * https://github.com/SteamDatabase/SteamTracking/blob/590b40f75e2ed3a1a314f64448d466a812b6a686/store.steampowered.com/public/javascript/app_tagging.js#L63\r\n         */\r\n        const userTags = HTMLParser.getArrayVariable<{\r\n            is_reported: boolean,\r\n            name: string\r\n        }>(/\\[{\"tagid\".+}\\],\\s*(\\[{\"tagid\".+}\\])/);\r\n        if (!userTags) { return; }\r\n\r\n        const reportedTagNames = new Set();\r\n\r\n        for (const tag of userTags) {\r\n            if (tag.is_reported) {\r\n                reportedTagNames.add(tag.name);\r\n            }\r\n        }\r\n\r\n        if (reportedTagNames.size === 0) { return; }\r\n\r\n        for (const tagNode of this._yourTags) {\r\n            if (reportedTagNames.has(tagNode.textContent!.trim())) {\r\n                tagNode.remove();\r\n            }\r\n        }\r\n\r\n        // trigger displaying additional popular tags\r\n        DOMHelper.insertScript(\"scriptlets/Store/App/triggerResize.js\");\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {\r\n        __hltb_compl,\r\n        __hltb_main,\r\n        __hltb_mainE,\r\n        __hltb_title,\r\n        __hoursShort,\r\n        __moreInformation\r\n    } from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import external from \"@Content/externalLink\";\r\n\r\n    function hrs(minutes: number): string {\r\n        return L(__hoursShort, {\"hours\": (minutes / 60).toFixed(1).toString()});\r\n    }\r\n\r\n    export let story: number|null;\r\n    export let extras: number|null;\r\n    export let complete: number|null;\r\n    export let url: string;\r\n</script>\r\n\r\n<div class=\"block responsive_apppage_details_right heading\">{L(__hltb_title)}</div>\r\n<div class=\"block underlined_links es_hltb\">\r\n    <div class=\"block_content\">\r\n        <div class=\"block_content_inner\">\r\n            {#if story || extras || complete}\r\n                <div class=\"details_block\">\r\n                    {#if story}\r\n                        <b>{L(__hltb_main)}:</b><span>{hrs(story)}</span><br>\r\n                    {/if}\r\n                    {#if extras}\r\n                        <b>{L(__hltb_mainE)}:</b><span>{hrs(extras)}</span><br>\r\n                    {/if}\r\n                    {#if complete}\r\n                        <b>{L(__hltb_compl)}:</b><span>{hrs(complete)}</span><br>\r\n                    {/if}\r\n                </div>\r\n                <br>\r\n            {/if}\r\n            <a class=\"linkbar es_external_icon\" href={url} use:external>{L(__moreInformation)}</a>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    .es_hltb {\r\n        color: #8f98a0;\r\n        line-height: 20px;\r\n    }\r\n\r\n    .es_hltb b {\r\n        font-family: Arial, Helvetica, sans-serif;\r\n        color: #556772;\r\n        font-weight: normal;\r\n        text-transform: uppercase;\r\n        font-size: 10px;\r\n    }\r\n\r\n    .es_hltb span {\r\n        float: right;\r\n    }\r\n</style>\r\n", "import self_ from \"./FHowLongToBeat.svelte\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type {TStorePageData} from \"@Background/Modules/AugmentedSteam/_types\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\nexport default class FHowLongToBeat extends Feature<CApp> {\r\n\r\n    private hltb: TStorePageData['hltb']|null = null;\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        if (!Settings.showhltb || this.context.isDlcLike || this.context.isVideoOrHardware) {\r\n            return false;\r\n        }\r\n\r\n        const result = await this.context.data;\r\n        if (!result || !result.hltb) {\r\n            return false;\r\n        }\r\n\r\n        this.hltb = result.hltb;\r\n        return true;\r\n    }\r\n\r\n    apply() {\r\n        if (!this.hltb) { return }\r\n\r\n        const anchor = document.querySelector(\"div.game_details\")!.nextElementSibling!;\r\n        new self_({\r\n            target: anchor.parentElement!,\r\n            anchor,\r\n            props: {\r\n                story: this.hltb.story,\r\n                extras: this.hltb.extras,\r\n                complete: this.hltb.complete,\r\n                url: this.hltb.url\r\n            }\r\n        })\r\n    }\r\n}\r\n", "import type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport type {TStorePageData} from \"@Background/Modules/AugmentedSteam/_types\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport {__userScore} from \"@Strings/_strings\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\n\r\nexport default class FMetacriticUserScore extends Feature<CApp> {\r\n\r\n    private _review: TStorePageData['reviews']['metauser']|null = null;\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        if (!Settings.showmcus || !document.querySelector(\"#game_area_metascore\")) {\r\n            return false;\r\n        }\r\n\r\n        const result = await this.context.data;\r\n        if (!result || !result.reviews || !result.reviews.metauser) {\r\n            return false;\r\n        }\r\n\r\n        this._review = result.reviews.metauser;\r\n        return true;\r\n    }\r\n\r\n    override apply(): void {\r\n        if (!this._review) {\r\n            return;\r\n        }\r\n\r\n        const metauserscore = this._review.score;\r\n        if (metauserscore === null) {\r\n            return;\r\n        }\r\n\r\n        let rating;\r\n        if (metauserscore >= 75) {\r\n            rating = \"high\";\r\n        } else if (metauserscore >= 50) {\r\n            rating = \"medium\";\r\n        } else {\r\n            rating = \"low\";\r\n        }\r\n\r\n        HTML.afterEnd(\"#game_area_metascore\",\r\n            `<div id=\"game_area_userscore\">\r\n                <div class=\"score ${rating}\">${metauserscore}</div>\r\n                <div class=\"logo\"></div>\r\n                <div class=\"wordmark\">\r\n                    <div class=\"metacritic\">${L(__userScore)}</div>\r\n                </div>\r\n            </div>`);\r\n    }\r\n}\r\n", "import type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport {__queue_new, __queue_newTooltip} from \"@Strings/_strings\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\n\r\nexport default class FNewQueue extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return document.querySelector(\".finish_queue_text\") !== null;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        HTML.afterEnd(\".btn_next_in_queue\",\r\n            `<div id=\"es_new_queue\" class=\"btn_next_in_queue btn_next_in_queue_trigger\" data-tooltip-text=\"${L(__queue_newTooltip)}\">\r\n                <div class=\"next_in_queue_content\">\r\n                    <span class=\"finish_queue_text\">${L(__queue_new)}</span>\r\n                </div>\r\n            </div>`);\r\n\r\n        DOMHelper.insertScript(\"scriptlets/Store/App/newQueue.js\");\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport ExtensionResources from \"@Core/ExtensionResources\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport {__readReviews} from \"@Strings/_strings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport type {TStorePageData} from \"@Background/Modules/AugmentedSteam/_types\";\r\n\r\n\r\nexport default class FOpenCritic extends Feature<CApp> {\r\n\r\n    private _review: TStorePageData['reviews']['opencritic']|null = null;\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        if (!Settings.showoc) {\r\n            return false;\r\n        }\r\n\r\n        const result = await this.context.data;\r\n        if (!result || !result.reviews || !result.reviews.opencritic) {\r\n            return false;\r\n        }\r\n\r\n        this._review = result.reviews.opencritic;\r\n        return true;\r\n    }\r\n\r\n    override apply(): void {\r\n        if (!this._review) {\r\n            return;\r\n        }\r\n\r\n        const review = this._review;\r\n        const ocImg = ExtensionResources.getURL(\"img/opencritic.png\");\r\n        const award = review.verdict ?? \"NA\";\r\n\r\n        let node = document.querySelector<HTMLElement>(\"#game_area_metascore\");\r\n        if (node) {\r\n            node = node.parentNode as HTMLElement;\r\n        } else {\r\n            node = document.querySelector(\".game_details\");\r\n        }\r\n\r\n        HTML.afterEnd(node,\r\n            `<div class=\"block responsive_apppage_reviewblock\">\r\n                <div id=\"game_area_opencritic\">\r\n                    <div class=\"score ${award.toLowerCase()}\">${review.score ? review.score : \"--\"}</div>\r\n                    <div class=\"logo\"><img src=\"${ocImg}\"></div>\r\n                    <div class=\"wordmark\">\r\n                        <div class=\"metacritic\">OpenCritic</div>\r\n                        <div id=\"game_area_metalink\">${award} - <a href=\"${review.url}?utm_source=enhanced-steam-itad&utm_medium=average\" target=\"_blank\">${L(__readReviews)}</a>\r\n                            <img src=\"//store.cloudflare.steamstatic.com/public/images/ico/iconExternalLink.gif\" border=\"0\" align=\"bottom\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style=\"clear: both;\"></div>\r\n            </div>`);\r\n\r\n        /*\r\n         TODO missing data source, improve tracking\r\n        let reviews = \"\";\r\n        for (const review of data.reviews) {\r\n            const date = new Date(review.date).toLocaleDateString();\r\n            reviews += `<p>\"${review.snippet}\"<br>${review.dScore} - <a href=\"${review.rUrl}\" target=\"_blank\" data-tooltip-text=\"${review.author}, ${date}\">${review.name}</a></p>`;\r\n        }\r\n\r\n        if (reviews) {\r\n            const html = `<div id=\"es_opencritic_reviews\">\r\n                ${reviews}\r\n                <div class=\"chart-footer\">\r\n                    ${L(__readMoreReviews)}\r\n                    <a href=\"${data.url}?utm_source=enhanced-steam-itad&utm_medium=reviews\" target=\"_blank\">OpenCritic.com</a>\r\n                </div>\r\n            </div>`;\r\n\r\n            // Add data to the review section in the left column, or create one if that block doesn't exist\r\n            const reviewsNode = document.getElementById(\"game_area_reviews\");\r\n            if (reviewsNode) {\r\n                HTML.beforeEnd(reviewsNode, html);\r\n            } else {\r\n                HTML.beforeBegin(document.getElementById(\"game_area_description\").parentElement.parentElement,\r\n                    `<div id=\"game_area_reviews\" class=\"game_area_description\">\r\n                        <h2>${L(__reviews)}</h2>\r\n                        ${html}\r\n                    </div>`);\r\n            }\r\n        }\r\n         */\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport {__getHelp, __viewinclient, __viewInLibrary} from \"@Strings/_strings\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\n\r\nexport default class FOwnedActionsButtons extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return this.context.user.isSignedIn\r\n            && document.querySelector(\".game_area_play_stats .already_owned_actions\") !== null;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        const node = document.querySelector(\".game_area_play_stats .already_owned_actions\")!;\r\n        const appid = this.context.appid;\r\n\r\n        // handle Install Steam button\r\n        const btn = node.querySelector<HTMLAnchorElement>(\"a[href^='https://store.steampowered.com/about/']\")!;\r\n        const option = Settings.installsteam;\r\n        if (option === \"hide\") {\r\n            btn.remove();\r\n        } else if (option === \"replace\") {\r\n            btn.querySelector(\"span\")!.textContent = L(__viewinclient);\r\n            btn.href = `steam://store/${appid}`;\r\n        }\r\n\r\n        // add view in library button\r\n        if (Settings.showviewinlibrary) {\r\n            HTML.afterBegin(node,\r\n                `<div class=\"game_area_already_owned_btn\">\r\n                    <a class=\"btnv6_lightblue_blue btnv6_border_2px btn_medium\" href=\"steam://nav/games/details/${appid}\">\r\n                        <span>${L(__viewInLibrary)}</span>\r\n                    </a>\r\n                </div>`);\r\n        }\r\n\r\n        // add help button\r\n        HTML.afterEnd(node,\r\n            `<div class=\"game_area_already_owned_btn\">\r\n                <a class=\"btnv6_lightblue_blue btnv6_border_2px btn_medium\" href=\"//help.steampowered.com/wizard/HelpWithGame/?appid=${appid}\">\r\n                    <span>${L(__getHelp)}</span>\r\n                </a>\r\n            </div>`);\r\n    }\r\n}\r\n", "\r\n\r\n<i>\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d=\"M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z\"/></svg>\r\n</i>\r\n\r\n\r\n<style>\r\n    i {\r\n        display: inline-block;\r\n        line-height: 1;\r\n        width: 1.2em;\r\n        vertical-align: bottom;\r\n    }\r\n\r\n    svg {\r\n        vertical-align: bottom;\r\n    }\r\n</style>\r\n", "\r\n\r\n<i>\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d=\"M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17l0 80c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24l0-40 40 0c13.3 0 24-10.7 24-24l0-40 40 0c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z\"/></svg>\r\n</i>\r\n\r\n\r\n<style>\r\n    i {\r\n        display: inline-block;\r\n        line-height: 1;\r\n        width: 1.2em;\r\n        vertical-align: bottom;\r\n    }\r\n\r\n    svg {\r\n        vertical-align: bottom;\r\n    }\r\n</style>\r\n", "<script lang=\"ts\">\r\n    import {__coll_inCollection, __ownedCollection} from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import type {TCollectionCopy} from \"@Background/Modules/IsThereAnyDeal/_types\";\r\n    import RedeemedIcon from \"@Content/Features/Store/App/Icons/RedeemedIcon.svelte\";\r\n    import RedeemableIcon from \"@Content/Features/Store/App/Icons/RedeemableIcon.svelte\";\r\n\r\n    export let appName: string;\r\n    export let copies: TCollectionCopy[];\r\n</script>\r\n\r\n\r\n<div class=\"game_area_already_owned page_content\">\r\n    <div class=\"ds_owned_flag ds_flag\">{L(__coll_inCollection).toUpperCase()}&nbsp;&nbsp;</div>\r\n    <div class=\"already_in_library\">\r\n        {L(__ownedCollection, {\"gametitle\": appName})}\r\n\r\n        {#each copies as copy}\r\n            <div class=\"copy\">\r\n                <div class=\"icon\">\r\n                    {#if copy.redeemed}\r\n                        <RedeemedIcon />\r\n                    {:else}\r\n                        <RedeemableIcon />\r\n                    {/if}\r\n                </div>\r\n\r\n                <div class=\"shop\">\r\n                    <div>\r\n                        {#if copy.shop}\r\n                            {copy.shop}\r\n                        {/if}\r\n                    </div>\r\n                    <div class=\"label\">{copy.redeemed ? \"redeemed\" : \"redeemable\"}</div>\r\n                </div>\r\n\r\n                <div>\r\n                    {#each copy.tags ?? [] as tag}\r\n                        <span class=\"tag\">{tag}</span>\r\n                    {/each}\r\n                    {#if copy.note}\r\n                        <div class=\"note\">{copy.note}</div>\r\n                    {/if}\r\n                </div>\r\n            </div>\r\n        {/each}\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    .game_area_already_owned.page_content {\r\n        min-height: 40px;\r\n        height: auto !important;\r\n        background-image: linear-gradient(to right, #bd9d1b 0%, #856d0e 100%) !important\r\n    }\r\n    .ds_owned_flag {\r\n        background-color: #ffe000 !important;\r\n    }\r\n    .already_in_library {\r\n        color: #ffe000;\r\n    }\r\n\r\n    .copy {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n        border-top: 1px dashed #856d0e;\r\n        font-size: 14px;\r\n        line-height: 1;\r\n        padding: 5px;\r\n        color: #1b2838;\r\n        fill: #1b2838;\r\n    }\r\n    .copy:last-child {\r\n        margin-bottom: 5px;\r\n        border-bottom: 1px dashed #856d0e;\r\n    }\r\n\r\n    .shop {\r\n        min-width: 100px;\r\n    }\r\n\r\n    .icon {\r\n        width: 17px;\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    .label {\r\n        font-size: 11px;\r\n    }\r\n\r\n    .tag {\r\n        font-size: 12px;\r\n        margin-right: 15px;\r\n    }\r\n    .note {\r\n        font-size: 12px;\r\n    }\r\n</style>", "import self_ from \"./FOwnedElsewhere.svelte\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport ITADApiFacade from \"@Content/Modules/Facades/ITADApiFacade\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\nexport default class FOwnedElsewhere extends Feature<CApp> {\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        return (!this.context.isOwned || !Settings.collection_banner_notowned)\r\n            && await ITADApiFacade.isConnected();\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n        const response = await ITADApiFacade.getFromCollection(this.context.storeid);\r\n        if (response === null) {\r\n            return;\r\n        }\r\n\r\n        const node = document.querySelector<HTMLElement>(\".queue_overflow_ctn\")!;\r\n\r\n        new self_({\r\n            target: node.parentElement!,\r\n            anchor: node.nextElementSibling!,\r\n            props: {\r\n                appName: this.context.appName,\r\n                copies:  response\r\n            }\r\n        });\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport {__packageInfo} from \"@Strings/_strings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\n\r\nexport default class FPackageInfoButton extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.show_package_info;\r\n    }\r\n\r\n    override apply(): void {\r\n        const excluded = [\r\n            \".bundle_hidden_by_preferences\", // Bundles that are filtered due to preferences (e.g. no nudity)\r\n            \".game_purchase_sub_dropdown\", // Subscriptions (no subid)\r\n            \".dynamic_bundle_description\", // Bundles\r\n        ].join(\",\");\r\n\r\n        // Free items do not have the game_area_purchase_game_wrapper class\r\n        for (const node of document.querySelectorAll(`.game_area_purchase_game_wrapper:not(${excluded})`)) {\r\n            // Exclude entries that already have a \"Package info\" button\r\n            if (node.querySelector(\".btn_packageinfo\")) { return; }\r\n\r\n            const subid = node.querySelector<HTMLInputElement>(\"input[name=subid]\");\r\n            if (!subid) { continue; } // This should never happen; non-applicable items should ideally be excluded by the selector\r\n\r\n            HTML.afterBegin(node.querySelector(\".game_purchase_action\"),\r\n                `<div class=\"game_purchase_action_bg\">\r\n                    <div class=\"btn_addtocart btn_packageinfo\">\r\n                        <a class=\"btn_blue_steamui btn_medium\" href=\"//store.steampowered.com/sub/${subid.value}/\">\r\n                            <span>${L(__packageInfo)}</span>\r\n                        </a>\r\n                    </div>\r\n                </div>`);\r\n        }\r\n    }\r\n}\r\n", "import {__each} from \"@Strings/_strings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport CurrencyManager from \"@Content/Modules/Currency/CurrencyManager\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport Price from \"@Content/Modules/Currency/Price\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\n\r\nexport default class FPackBreakdown extends Feature<CApp> {\r\n\r\n    override apply(): void {\r\n\r\n        for (const node of document.querySelectorAll(\".game_area_purchase_game_wrapper:not(.bundle_hidden_by_preferences)\")) {\r\n\r\n            // prevent false positives on packages e.g. Doom 3\r\n            if (node.querySelector(\".btn_packageinfo\")) { continue; }\r\n\r\n            let title = node.querySelector(\"h1\")!.textContent!;\r\n            title = title.toLowerCase().replace(/-/g, \" \");\r\n\r\n            let text = \"\";\r\n            if (node.querySelector(\"p\")) {\r\n                text = node.querySelector(\"p\")!.textContent!;\r\n            }\r\n\r\n            if (title.includes(\"2 pack\")\r\n                || title.includes(\"two pack\")\r\n                || title.includes(\"tower wars friend pack\")\r\n                || text.includes(\"gift copy\")\r\n                || text.includes(\"extra copy\")) {\r\n\r\n                this._splitPack(node, 2);\r\n\r\n            } else if (title.includes(\"3 pack\")\r\n                || title.includes(\"three pack\")\r\n                || title.includes(\"tower wars team pack\")) {\r\n\r\n                this._splitPack(node, 3);\r\n\r\n            } else if (title.includes(\"4 pack\")\r\n                || title.includes(\"four pack\")\r\n                || title.includes(\"clan pack\")) {\r\n\r\n                this._splitPack(node, 4);\r\n\r\n            } else if (title.includes(\"5 pack\")\r\n                || title.includes(\"five pack\")) {\r\n\r\n                this._splitPack(node, 5);\r\n\r\n            } else if (title.includes(\"6 pack\")\r\n                || title.includes(\"six pack\")) {\r\n\r\n                this._splitPack(node, 6);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _splitPack(node: Element, ways: number): void {\r\n        const priceNode = node.querySelector<HTMLElement>(\"[data-price-final]\");\r\n        if (!priceNode) { return; }\r\n\r\n        const currency = CurrencyManager.getCurrencyInfo(CurrencyManager.storeCurrency);\r\n        const scaleFactor = 10 ** currency.format.places;\r\n\r\n        let unitPrice = Number(priceNode.dataset.priceFinal) / 100 / ways;\r\n        unitPrice = Math.ceil(unitPrice * scaleFactor) / scaleFactor;\r\n\r\n        HTML.afterBegin(node.querySelector(\".game_purchase_action_bg\"),\r\n            `<div class=\"es_each_box\">\r\n                <div class=\"es_each_price\">${new Price(unitPrice)}</div>\r\n                <div class=\"es_each\">${L(__each)}</div>\r\n            </div>`);\r\n    }\r\n}\r\n", "import DOMHelper from \"@Content/Modules/DOMHelper\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FPatchHighlightPlayer extends Feature<CApp> {\r\n\r\n    apply() {\r\n        // This aims to fix volume issues with the highlight player, see #1492\r\n        DOMHelper.insertScript(\"scriptlets/Store/App/patchHighlightPlayer.js\");\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {__charts_current, __charts_peakall, __charts_peaktoday, __charts_playingNow} from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n\r\n    export let recent: number\r\n    export let peakToday: number;\r\n    export let peakAll: number;\r\n\r\n    const formatter = new Intl.NumberFormat(document.documentElement.lang || navigator.language);\r\n</script>\r\n\r\n\r\n<div class=\"block responsive_apppage_details_right heading\">{L(__charts_current)}</div>\r\n<div class=\"block responsive_apppage_details_right\">\r\n    <div class=\"block_content_inner as_players\">\r\n        <div class=\"as_stat\">\r\n            <span>{L(__charts_playingNow)}</span>\r\n            {formatter.format(recent)}\r\n        </div>\r\n        <div class=\"as_stat\">\r\n            <span>{L(__charts_peaktoday)}</span>\r\n            {formatter.format(peakToday)}\r\n        </div>\r\n        <div class=\"as_stat\">\r\n            <span>{L(__charts_peakall)}</span>\r\n            {formatter.format(peakAll)}\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    .as_players {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        flex-wrap: wrap;\r\n    }\r\n    .as_stat {\r\n        display: flex;\r\n        flex-direction: column-reverse;\r\n        align-items: center;\r\n        color: #67c1f5;\r\n        font-size: 15px;\r\n    }\r\n\r\n    span {\r\n        font-family: Arial, Helvetica, sans-serif;\r\n        color: #556772;\r\n        font-weight: normal;\r\n        text-transform: uppercase;\r\n        font-size: 10px;\r\n    }\r\n</style>\r\n", "import self_ from \"./FPlayers.svelte\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FPlayers extends Feature<CApp> {\r\n    private _data: any;\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        if (this.context.isDlcLike\r\n            || this.context.isVideoOrHardware\r\n            || !Settings.show_players_info) {\r\n            return false;\r\n        }\r\n\r\n        const result = await this.context.data;\r\n        if (!result || !result.players) {\r\n            return false;\r\n        }\r\n\r\n        this._data = result.players;\r\n        return true;\r\n    }\r\n\r\n    override apply(): void {\r\n        let target = document.querySelector(\".rightcol.game_meta_data\");\r\n        if (!target) {\r\n            throw new Error(\"Node not found\");\r\n        }\r\n\r\n        (new self_({\r\n            target,\r\n            anchor: target.firstElementChild ?? undefined,\r\n            props: {\r\n                recent: Number(this._data.recent),\r\n                peakToday: Number(this._data.peak_today),\r\n                peakAll: Number(this._data.peak_all)\r\n            }\r\n        }));\r\n    }\r\n}\r\n", "\r\nexport default class StringUtils {\r\n\r\n    // https://stackoverflow.com/a/6969486/7162651\r\n    static escapeRegExp(str: string): string {\r\n        return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\r\n    }\r\n\r\n    static clearSpecialSymbols(str: string): string {\r\n        return str.replace(/[\\u00AE\\u00A9\\u2122]/g, \"\");\r\n    }\r\n\r\n    // https://github.com/SteamDatabase/SteamTracking/blob/6db3e47a120c5c938a0ab37186d39b02b14d27d9/steamcommunity.com/public/javascript/global.js#L2479\r\n    static levenshtein(a: string, b: string): number {\r\n        const alen = a.length;\r\n        const blen = b.length;\r\n        if (alen === 0) { return blen; }\r\n        if (blen === 0) { return alen; }\r\n        let tmp, i, j, prev, val, row, ma, mb, mc, md, bprev;\r\n\r\n        if (alen > blen) {\r\n            tmp = a;\r\n            a = b;\r\n            b = tmp;\r\n        }\r\n\r\n        row = new Int8Array(alen + 1);\r\n        // init the row\r\n        for (i = 0; i <= alen; i++) {\r\n            row[i] = i;\r\n        }\r\n\r\n        // fill in the rest\r\n        for (i = 1; i <= blen; i++) {\r\n            prev = i;\r\n            bprev = b[i - 1]\r\n            for (j = 1; j <= alen; j++) {\r\n                if (bprev === a[j - 1]) {\r\n                    val = row[j - 1]!;\r\n                } else {\r\n                    ma = prev + 1;\r\n                    mb = row[j]! + 1;\r\n                    mc = ma - ((ma - mb) & ((mb - ma) >> 7));\r\n                    md = row[j - 1]! + 1;\r\n                    val = mc - ((mc - md) & ((md - mc) >> 7));\r\n                }\r\n                row[j - 1] = prev;\r\n                prev = val;\r\n            }\r\n            row[alen] = prev;\r\n        }\r\n        return row[alen]!;\r\n    }\r\n}\r\n", "import {L} from \"@Core/Localization/Localization\";\r\nimport {__purchaseDate} from \"@Strings/_strings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport StringUtils from \"@Core/Utils/StringUtils\";\r\nimport SteamStoreApiFacade from \"@Content/Modules/Facades/SteamStoreApiFacade\";\r\n\r\nexport default class FPurchaseDate extends Feature<CApp> {\r\n\r\n    private _node: HTMLElement|null = null\r\n\r\n    override checkPrerequisites(): boolean {\r\n        if (this.context.user.isSignedIn && Settings.purchase_dates) {\r\n            this._node = document.querySelector(\".game_area_already_owned .already_in_library\");\r\n        }\r\n        return this._node !== null;\r\n    }\r\n\r\n    async apply() {\r\n        const lang = this.context.language?.name;\r\n        if (!lang) {\r\n            console.warn(\"Unknown language\");\r\n            return;\r\n        }\r\n\r\n        const appname = StringUtils.clearSpecialSymbols(\r\n            this.context.appName.replace(/:/g, \"\").trim()\r\n        );\r\n\r\n        const date = await SteamStoreApiFacade.getPurchaseDate(appname, lang);\r\n        if (!date) {\r\n            console.warn(\"Failed to retrieve purchase date\");\r\n            return;\r\n        }\r\n\r\n        this._node!.textContent += ` ${L(__purchaseDate, {date})}`;\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\n\r\nexport default class FRemoveBroadcasts extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.removebroadcasts\r\n            && document.querySelector(\"[data-featuretarget=broadcast-embed]\") !== null;\r\n    }\r\n\r\n    override apply(): void {\r\n        document.querySelector(\"[data-featuretarget=broadcast-embed]\")?.remove();\r\n        DOMHelper.insertScript(\"scriptlets/Store/App/stopBroadcast.js\");\r\n    }\r\n}\r\n", "import type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\n\r\nexport default class FRemoveDupeScreenshots extends Feature<CApp> {\r\n\r\n    // @ts-ignore\r\n    private _screenshots: NodeListOf<HTMLElement>\r\n\r\n    override checkPrerequisites(): boolean {\r\n        this._screenshots = document.querySelectorAll(\".highlight_screenshot\");\r\n        return this._screenshots.length > 1;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        // Remove duplicate screenshots otherwise the highlight player will always scroll to the first one\r\n        const ids: Set<string> = new Set();\r\n\r\n        for (const node of this._screenshots) {\r\n            const id = CSS.escape(node.id); // ends with file extension\r\n\r\n            if (ids.has(id)) {\r\n                node.remove();\r\n                document.querySelectorAll(`#${id.replace(\"highlight_\", \"thumb_\")}`)[1]!.remove();\r\n            } else {\r\n                ids.add(id);\r\n            }\r\n        }\r\n    }\r\n}\r\n", "import type {MessageHandler} from \"@Content/Modules/Messaging/MessageHandler\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\n\r\nexport default class Messenger {\r\n\r\n    private static id: number = 0;\r\n\r\n    private static dispatchEvent(handler: MessageHandler, action: string, params: any[]=[], id: string|undefined=undefined): void {\r\n\r\n        DOMHelper.insertScript(\"scriptlets/event.js\", {handler, detail: {\r\n            action, params, id\r\n        }});\r\n    }\r\n\r\n    static call(handler: MessageHandler, action: string, params: any[]=[]): void {\r\n        this.dispatchEvent(handler, action, params);\r\n    }\r\n\r\n    static get<T>(handler: MessageHandler, action: string, params: any[]=[]): Promise<T> {\r\n        return new Promise(resolve => {\r\n            const id = `as_msg_${this.id++}`;\r\n\r\n            // @ts-ignore\r\n            document.addEventListener(id, (e) => resolve(e.detail), {once: true});\r\n            this.dispatchEvent(handler, action, params, id);\r\n        });\r\n    }\r\n}\r\n", "import Messenger from \"@Content/Modules/Messaging/Messenger\";\r\nimport {MessageHandler} from \"@Content/Modules/Messaging/MessageHandler\";\r\n\r\nexport default class SteamFacade {\r\n\r\n    // variables\r\n\r\n    static global<T=any>(name: string): Promise<T> {\r\n        return Messenger.get(MessageHandler.SteamFacade, \"global\", [name]);\r\n    }\r\n\r\n    static globalExists(name: string): Promise<boolean> {\r\n        return Messenger.get(MessageHandler.SteamFacade, \"globalExists\", [name]);\r\n    }\r\n\r\n    static globalSet(name: string, value: any): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"globalSet\", [name, value]);\r\n    }\r\n\r\n    // dialogs\r\n\r\n    static showDialog(strTitle: string, strDescription: string, rgModalParams?: any): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"showDialog\", [strTitle, strDescription, rgModalParams]);\r\n    }\r\n\r\n    static showConfirmDialog(\r\n        title: string,\r\n        description: string,\r\n        options: {\r\n            okButton?: string, // Default \"OK\"\r\n            cancelButton?: string,  // Default \"Cancel\"\r\n            secondaryActionButton?: string, // Needs a value else won't get rendered\r\n            explicitConfirm?: boolean, // Avoids releasing Enter from auto-confirming\r\n            explicitDismissal?: boolean // Avoids dismissal on clicking on background\r\n        } = {}\r\n    ): Promise<\"OK\"|\"SECONDARY\"|\"CANCEL\"> {\r\n        return Messenger.get(MessageHandler.SteamFacade, \"showConfirmDialog\", [\r\n            title,\r\n            description,\r\n            options.okButton ?? null,\r\n            options.cancelButton ?? null,\r\n            options.secondaryActionButton ?? null,\r\n            options.explicitConfirm ?? false,\r\n            options.explicitDismissal ?? false\r\n        ]);\r\n    }\r\n\r\n    static showAlertDialog(\r\n        strTitle: string,\r\n        strDescription: string,\r\n        strOKButton?: string\r\n    ): Promise<void> {\r\n        return Messenger.get(MessageHandler.SteamFacade, \"showAlertDialog\", [\r\n            strTitle, strDescription, strOKButton\r\n        ]);\r\n    }\r\n\r\n    static showBlockingWaitDialog(strTitle: string, strDescription: string): Promise<void> {\r\n        return Messenger.get(MessageHandler.SteamFacade, \"showBlockingWaitDialog\", [\r\n            strTitle, strDescription\r\n        ]);\r\n    }\r\n\r\n    static dismissActiveModal(id?: string): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"dismissActiveModal\", [id]);\r\n    }\r\n\r\n    // menu\r\n\r\n    static showMenu(elemLink: string, elemPopup: string, align?: string, valign?: string, bLinkHasBorder?: boolean): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"showMenu\", [elemLink, elemPopup, align, valign, bLinkHasBorder]);\r\n    }\r\n\r\n    static hideMenu(elemLink: string, elemPopup: string): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"hideMenu\", [elemLink, elemPopup]);\r\n    }\r\n\r\n    static changeLanguage(strTargetLanguage: string, bStayOnPage: boolean): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"changeLanguage\", [strTargetLanguage, bStayOnPage]);\r\n    }\r\n\r\n    // app pages\r\n\r\n    static collapseLongStrings(selector: string): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"collapseLongStrings\", [selector]);\r\n    }\r\n\r\n    static removeFromWishlist(\r\n        appid: number,\r\n        divToHide: string,\r\n        divToShowSuccess: string,\r\n        divToShowError: string,\r\n        navref?: string,\r\n        divToHide2?: string,\r\n    ): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"removeFromWishlist\", [\r\n            appid, divToHide, divToShowSuccess, divToShowError, navref, divToHide2\r\n        ]);\r\n    }\r\n\r\n    static addToWishlist(\r\n        appid: number,\r\n        divToHide: string,\r\n        divToShowSuccess: string,\r\n        divToShowError: string,\r\n        navref?: string,\r\n        divToHide2?: string,\r\n    ): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"addToWishlist\", [\r\n            appid, divToHide, divToShowSuccess, divToShowError, navref, divToHide2\r\n        ]);\r\n    }\r\n\r\n    // events\r\n\r\n    static bindAutoFlyoutEvents(): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"bindAutoFlyoutEvents\");\r\n    }\r\n\r\n    // tooltips\r\n\r\n    static vTooltip(selector: string, isHtml: boolean = false): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"vTooltip\", [selector, isHtml]);\r\n    }\r\n\r\n    // market\r\n\r\n    static calculateFeeAmount(amount: number, publisherFee: number): Promise<{\r\n        amount: number,\r\n        fees: number\r\n    }> {\r\n        return Messenger.get(MessageHandler.SteamFacade, \"calculateFeeAmount\", [amount, publisherFee]);\r\n    }\r\n\r\n    static vCurrencyFormat(amount: number, currencyCode: string): Promise<string> {\r\n        return Messenger.get(MessageHandler.SteamFacade, \"vCurrencyFormat\", [amount, currencyCode])\r\n    }\r\n\r\n    // profile home\r\n\r\n    static openFriendChatInWebChat(steamid: string, accountid: number): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"openFriendChatInWebChat\", [steamid, accountid]);\r\n    }\r\n\r\n    // edit guide\r\n\r\n    static submitGuide(): void {\r\n        Messenger.call(MessageHandler.SteamFacade, \"submitGuide\");\r\n    }\r\n}\r\n", "import {L} from \"@Core/Localization/Localization\";\r\nimport {__options_homepage} from \"@Strings/_strings\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport SteamFacade from \"@Content/Modules/Facades/SteamFacade\";\r\n\r\nexport default class FReplaceDevPubLinks extends Feature<CApp> {\r\n\r\n    override apply(): void {\r\n\r\n        const devs = [...document.querySelectorAll<HTMLAnchorElement>(\"#genresAndManufacturer > .dev_row:first-of-type > a\")];\r\n\r\n        // We need to use this element to locate the row that contains developer info, see #1346\r\n        const glanceDevRow = document.getElementById(\"developers_list\")?.parentElement;\r\n        if (glanceDevRow) {\r\n            devs.push(...glanceDevRow.querySelectorAll(\"a\"));\r\n        }\r\n\r\n        const pubs = [...document.querySelectorAll<HTMLAnchorElement>(\"#genresAndManufacturer > .dev_row:nth-of-type(2) > a\")];\r\n\r\n        const glancePubRow = glanceDevRow?.nextElementSibling;\r\n        if (glancePubRow) {\r\n            pubs.push(...glancePubRow.querySelectorAll(\"a\"));\r\n        }\r\n\r\n        let franchiseRow = document.querySelector<HTMLAnchorElement>(\".details_block > .dev_row:nth-of-type(3) > a\");\r\n        let franchise = franchiseRow ? [franchiseRow] : [];\r\n\r\n        for (const node of [...devs, ...pubs, ...franchise]) {\r\n            const homepageLink = new URL(node.href);\r\n            if (homepageLink.pathname.startsWith(\"/search/\")) { continue; }\r\n\r\n            let type;\r\n            if (devs.includes(node)) {\r\n                type = \"developer\";\r\n            } else if (pubs.includes(node)) {\r\n                type = \"publisher\";\r\n            } else if (franchiseRow === node) {\r\n                type = \"franchise\";\r\n            }\r\n            if (!type) { continue; }\r\n\r\n            node.href = `https://store.steampowered.com/search/?${type}=${encodeURIComponent(node.textContent!)}`;\r\n            HTML.afterEnd(node, ` (<a href=\"${homepageLink.href}\">${L(__options_homepage)}</a>)`);\r\n        }\r\n\r\n        for (const moreBtn of document.querySelectorAll(\".dev_row > .more_btn\")) {\r\n            moreBtn.remove();\r\n        }\r\n\r\n        SteamFacade.collapseLongStrings(\".dev_row .summary.column\");\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {onMount} from \"svelte\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__contractSlider, __expandSlider} from \"@Strings/_strings\";\r\n    import LocalStorage from \"@Core/Storage/LocalStorage\";\r\n\r\n    export let reviewSection: HTMLElement;\r\n\r\n    let show: boolean = true;\r\n\r\n    async function toggleReviews(event?: MouseEvent) {\r\n        if (event) {\r\n            show = !show;\r\n            LocalStorage.set(\"show_review_section\", show);\r\n        } else {\r\n            show = await LocalStorage.get(\"show_review_section\") ?? true;\r\n        }\r\n\r\n        reviewSection.style.maxHeight = show ? \"\" : \"0\";\r\n    }\r\n\r\n    onMount(() => {\r\n        toggleReviews();\r\n    });\r\n</script>\r\n\r\n\r\n<!--\r\n Intentionally using 2 elements because tooltips are stored internally by jQuery,\r\n and changing the attribute will not change the tooltip. Removing the elements will also not remove the hover tooltips,\r\n and will cause weird overlaps, plus having to wrap these elements in an extra div to trigger Steam's mutation\r\n observer for tooltips.\r\n-->\r\n<button class=\"btnv6_lightblue_blue btn_medium es_review_toggle\" on:click={toggleReviews}>\r\n    <div data-tooltip-text=\"{L(__expandSlider)}\" class:inactive={show}></div>\r\n    <div data-tooltip-text=\"{L(__contractSlider)}\" class:inactive={!show}></div>\r\n</button>\r\n\r\n\r\n<style>\r\n    :global(.es_review_section) {\r\n        overflow: hidden;\r\n    }\r\n    .es_review_toggle {\r\n        float: right;\r\n        font-size: 18px;\r\n    }\r\n    .inactive {\r\n        display: none;\r\n    }\r\n</style>\r\n", "import self_ from \"./FReviewToggleButton.svelte\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\n\r\n/**\r\n * Adds button that shows/hides \"Write a review\" form on app pages,\r\n * last state of the form is remembered across app pages\r\n */\r\nexport default class FReviewToggleButton extends Feature<CApp> {\r\n    private node: HTMLElement|null = null;\r\n\r\n    override checkPrerequisites(): boolean {\r\n        this.node = document.getElementById(\"review_create\");\r\n        return this.node !== null;\r\n    }\r\n\r\n    override apply(): void {\r\n        const target = this.node!.querySelector(\"h1\");\r\n        if (!target) {\r\n            throw new Error(\"Node not found\");\r\n        }\r\n\r\n        // Reparent review section nodes\r\n        const reviewSection = document.createElement(\"div\");\r\n        reviewSection.classList.add(\"es_review_section\");\r\n        reviewSection.append(\r\n            ...this.node!.querySelectorAll(\"p, .avatar_block, .content\")\r\n        );\r\n\r\n        target.after(reviewSection);\r\n\r\n        (new self_({\r\n            target,\r\n            props: {\r\n                reviewSection\r\n            }\r\n        }));\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport LocalStorage, {type LocalStorageSchema} from \"@Core/Storage/LocalStorage\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\n\r\nexport default class FSaveReviewFilters extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return !document.querySelector(\"#noReviewsWriteOne\");\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n\r\n        document.addEventListener(\"as_filtersChanged\", async () => {\r\n            const context = document.querySelector<HTMLInputElement>(\"input[name=review_context]:checked\")?.id;\r\n            const language = document.querySelector<HTMLInputElement>(\"input[name=review_language]:checked\")?.id;\r\n            const minPlaytime = document.querySelector<HTMLInputElement>(\"#app_reviews_playtime_range_min\")?.value;\r\n            const maxPlaytime = document.querySelector<HTMLInputElement>(\"#app_reviews_playtime_range_max\")?.value;\r\n\r\n            const value: LocalStorageSchema[\"review_filters\"] = (await LocalStorage.get(\"review_filters\")) ?? {};\r\n            if (context) { value.context = context; }\r\n            if (language) { value.language = language; }\r\n            if (minPlaytime) { value.minPlaytime = minPlaytime; }\r\n            if (maxPlaytime) { value.maxPlaytime = maxPlaytime; }\r\n\r\n            LocalStorage.set(\"review_filters\", value);\r\n        });\r\n\r\n        DOMHelper.insertScript(\"scriptlets/Store/App/saveReviewFilters.js\",\r\n            (await LocalStorage.get(\"review_filters\")) ?? {}\r\n        );\r\n    }\r\n}\r\n", "import Background from \"@Core/Background\";\r\nimport {EAction} from \"@Background/EAction\";\r\nimport type {HasItemResponse} from \"@Background/Modules/Inventory/_types\";\r\nimport type {TCoupon} from \"@Background/Modules/Community/_types\";\r\n\r\nexport default class InventoryApiFacade {\r\n\r\n    static getCoupon(appid: number): Promise<TCoupon|undefined> {\r\n        return Background.send(EAction.Inventory_GetCoupon, {appid});\r\n    }\r\n\r\n    static async getCouponsAppids(appids: number[]): Promise<Set<string>> {\r\n        return new Set<string>(\r\n            await Background.send(EAction.Inventory_GetCouponsAppids, {appids})\r\n        );\r\n    }\r\n\r\n    static async getGiftsAppids(appids: number[]): Promise<Set<string>> {\r\n        return new Set<string>(\r\n            await Background.send(EAction.Inventory_GetGiftsAppids, {appids})\r\n        );\r\n    }\r\n\r\n    static async getPassesAppids(appids: number[]): Promise<Set<string>> {\r\n        return new Set<string>(\r\n            await Background.send(EAction.Inventory_GetPassesAppids, {appids})\r\n        );\r\n    }\r\n\r\n    static hasItem(hashes: string[]): Promise<HasItemResponse> {\r\n        return Background.send(EAction.Inventory_HasItem, {hashes});\r\n    }\r\n}\r\n", "import {L} from \"@Core/Localization/Localization\";\r\nimport {\r\n    __couponApplicationNote,\r\n    __couponAvailable,\r\n    __couponLearnMore_fullText,\r\n    __couponLearnMore_linkText,\r\n} from \"@Strings/_strings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport CurrencyManager from \"@Content/Modules/Currency/CurrencyManager\";\r\nimport Price from \"@Content/Modules/Currency/Price\";\r\nimport InventoryApiFacade from \"@Content/Modules/Facades/InventoryApiFacade\";\r\n\r\nexport default class FShowCoupon extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.show_coupon;\r\n    }\r\n\r\n    async apply(): Promise<void> {\r\n        const coupon = await InventoryApiFacade.getCoupon(this.context.appid);\r\n        if (!coupon) { return; }\r\n\r\n        const couponDate = coupon.valid && coupon.valid.replace(\r\n            /\\[date](.+)\\[\\/date]/,\r\n            (_m0, m1) => {\r\n                return new Date(m1 * 1000).toLocaleString();\r\n            });\r\n\r\n        HTML.beforeBegin(\"#game_area_purchase\",\r\n            `<div class=\"early_access_header es_coupon_info\">\r\n                <div class=\"heading\">\r\n                    <h1 class=\"inset\">${L(__couponAvailable)}</h1>\r\n                    <h2 class=\"inset\">${L(__couponApplicationNote)}</h2>\r\n                    <p>${L(__couponLearnMore_fullText, {\r\n                        \"linkdesc\": `<a href=\"https://support.steampowered.com/kb_article.php?ref=4210-YIPC-0275\">${L(__couponLearnMore_linkText)}</a>`\r\n                    })}</p>\r\n                </div>\r\n                <div class=\"devnotes\">\r\n                    <div style=\"display:flex;padding-top:10px\">\r\n                        <img src=\"//community.cloudflare.steamstatic.com/economy/image/${coupon.image_url}\" style=\"width:96px;height:64px;\">\r\n                        <div style=\"display:flex;flex-direction:column;margin-left:10px\">\r\n                            <h1 style=\"margin-top:2px\">${coupon.title}</h1>\r\n                            <div>${coupon.discount_note || \"\"}</div>\r\n                            <div style=\"color:#a75124\">${couponDate}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>`);\r\n\r\n        // Update the purchase box with the discounted price\r\n        const purchaseDiv = document.querySelector(\".game_area_purchase_game_wrapper .game_purchase_action\");\r\n        if (!purchaseDiv) { return; }\r\n\r\n        if (purchaseDiv.querySelector(\".game_purchase_discount\") && coupon.discount_doesnt_stack) {\r\n            return;\r\n        }\r\n\r\n        const priceNode = purchaseDiv.querySelector<HTMLElement>(\"[data-price-final]\");\r\n        if (!priceNode) { return; }\r\n\r\n        const currency = CurrencyManager.getCurrencyInfo(CurrencyManager.storeCurrency);\r\n        const scaleFactor = 10 ** currency.format.places;\r\n\r\n        const originalPrice = Number(priceNode.dataset.priceFinal) / 100;\r\n        const discountPrice = Math.floor(originalPrice * (coupon.discount / 100) * scaleFactor) / scaleFactor;\r\n        const newFinalPrice = originalPrice - discountPrice;\r\n\r\n        HTML.replace(priceNode,\r\n            `<div class=\"discount_block game_purchase_discount\">\r\n                <div class=\"discount_pct\">-${coupon.discount}%</div>\r\n                <div class=\"discount_prices\">\r\n                    <div class=\"discount_original_price\">${new Price(originalPrice)}</div>\r\n                    <div class=\"discount_final_price\">${new Price(newFinalPrice)}</div>\r\n                </div>\r\n            </div>`);\r\n    }\r\n}\r\n", "import {L} from \"@Core/Localization/Localization\";\r\nimport {__moreOnSteampeek} from \"@Strings/_strings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport LocalStorage from \"@Core/Storage/LocalStorage\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\nimport AugmentedSteamApiFacade from \"@Content/Modules/Facades/AugmentedSteamApiFacade\";\r\nimport \"./FSteamPeek.css\";\r\n\r\nexport default class FSteamPeek extends Feature<CApp> {\r\n\r\n    private _moreLikeThis: HTMLElement|null = null;\r\n\r\n    override checkPrerequisites(): boolean {\r\n        this._moreLikeThis = document.querySelector(\"#recommended_block\");\r\n        return this._moreLikeThis !== null;\r\n    }\r\n\r\n    async apply(): Promise<void> {\r\n        if (!this._moreLikeThis) {\r\n            return;\r\n        }\r\n\r\n        HTML.afterEnd(this._moreLikeThis.querySelector(\".block_header\"),\r\n            `<div class=\"es_tabs\">\r\n                <div class=\"home_tabs_row\">\r\n                    <div id=\"es_tab_steamsimilar\" class=\"es_tab home_tab active\">\r\n                        <div class=\"tab_content\">Steam</div>\r\n                    </div>\r\n                    <div id=\"es_tab_steampeek\" class=\"es_tab home_tab\">\r\n                        <div class=\"tab_content\">SteamPeek</div>\r\n                    </div>\r\n                </div>\r\n            </div>`);\r\n\r\n        const steamTab = this._moreLikeThis.querySelector(\"#es_tab_steamsimilar\")!;\r\n        const steamPeekTab = this._moreLikeThis.querySelector<HTMLElement>(\"#es_tab_steampeek\")!;\r\n        const content = this._moreLikeThis.querySelector(\"#recommended_block_content\")!;\r\n\r\n        steamTab.addEventListener(\"click\", () => {\r\n            steamPeekTab.classList.remove(\"active\");\r\n            steamTab.classList.add(\"active\");\r\n            content.classList.remove(\"es_sp_active\");\r\n            content.classList.add(\"es_steam_active\");\r\n\r\n            LocalStorage.set(\"steampeek\", false);\r\n\r\n            this._adjustScroller();\r\n        });\r\n\r\n        let spLoaded = false;\r\n        steamPeekTab.addEventListener(\"click\", async() => {\r\n            steamPeekTab.classList.add(\"active\");\r\n            steamTab.classList.remove(\"active\");\r\n            content.classList.add(\"es_sp_active\");\r\n            content.classList.remove(\"es_steam_active\");\r\n\r\n            LocalStorage.set(\"steampeek\", true);\r\n\r\n            if (!spLoaded) {\r\n                spLoaded = true;\r\n\r\n                for (const node of content.querySelectorAll(\":scope > a\")) {\r\n                    node.classList.add(\"es_steam_similar\");\r\n                }\r\n\r\n                const data = await AugmentedSteamApiFacade.fetchSteamPeek(this.context.appid);\r\n                if (!data) { return; }\r\n\r\n                const lastChild = content.querySelector(\":scope > :last-child\");\r\n\r\n                for (const {title, appid} of data) {\r\n                    HTML.beforeBegin(lastChild,\r\n                        `<a class=\"small_cap es_sp_similar\" data-ds-appid=\"${appid}\" href=\"https://store.steampowered.com/app/${appid}/\">\r\n                            <img src=\"//cdn.cloudflare.steamstatic.com/steam/apps/${appid}/capsule_184x69.jpg\" class=\"small_cap_img\">\r\n                            <h4>${title}</h4>\r\n                        </a>`);\r\n                }\r\n\r\n                DOMHelper.insertScript(\"scriptlets/Store/App/SteamPeek/decorateItems.js\", {appids: data.map(({appid}) => appid)});\r\n                this.context.decorateStoreCapsules(content.querySelectorAll<HTMLAnchorElement>(\"a.es_sp_similar\"));\r\n\r\n                HTML.beforeBegin(lastChild,\r\n                    `<a class=\"small_cap es_sp_similar\" href=\"http://steampeek.hu/?appid=${this.context.appid}\" target=\"_blank\">\r\n                        <div class=\"es_sp_similar__link\">${L(__moreOnSteampeek)}</div>\r\n                    </a>`);\r\n            }\r\n\r\n            this._adjustScroller();\r\n        });\r\n\r\n        if (await LocalStorage.get(\"steampeek\")) {\r\n            steamPeekTab.click();\r\n        }\r\n    }\r\n\r\n    private _adjustScroller() {\r\n        DOMHelper.insertScript(\"scriptlets/Store/App/SteamPeek/adjustScroller.js\");\r\n    }\r\n}\r\n", "import AppId from \"@Core/GameId/AppId\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport {__contact, __email, __support, __website} from \"@Strings/_strings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport LocalStorage from \"@Core/Storage/LocalStorage\";\r\nimport SteamStoreApiFacade from \"@Content/Modules/Facades/SteamStoreApiFacade\";\r\nimport type {TAppDetail} from \"@Background/Modules/Store/_types\";\r\n\r\nexport default class FSupportInfo extends Feature<CApp> {\r\n\r\n    private _supportInfo: any = null; // TODO fix type\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        if (!Settings.showsupportinfo) { return false; }\r\n\r\n        let cache = (await LocalStorage.get(\"support_info\")) ?? null;\r\n\r\n        // todo IDB\r\n        if (!cache || !cache.expiry || cache.expiry < Date.now()) {\r\n            cache = {\r\n                data: {},\r\n                expiry: Date.now() + (31 * 86400 * 1000) // 31 days\r\n            };\r\n        }\r\n\r\n        // Attempt to get appid of parent app first for DLCs and Soundtracks\r\n        const appid = AppId.fromElement(document.querySelector(\".glance_details a\")) || this.context.appid;\r\n        this._supportInfo = cache.data[appid];\r\n\r\n        if (!this._supportInfo) {\r\n            const response: TAppDetail|null = await SteamStoreApiFacade.fetchAppDetails(appid, \"support_info\");\r\n            if (!response) {\r\n                console.warn(\"Failed to retrieve support info\");\r\n                return false;\r\n            }\r\n\r\n            this._supportInfo = response.support_info;\r\n\r\n            cache.data[appid] = this._supportInfo;\r\n            LocalStorage.set(\"support_info\", cache);\r\n        }\r\n\r\n        return Boolean(this._supportInfo.url || this._supportInfo.email);\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        let {url, email} = this._supportInfo;\r\n        const links = [];\r\n\r\n        if (url) {\r\n            url = HTML.formatUrl(url);\r\n            links.push(`<a href=\"${url}\">${L(__website)}</a>`);\r\n        }\r\n\r\n        if (email) {\r\n\r\n            // From https://emailregex.com/\r\n            const emailRegex\r\n                = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n            if (emailRegex.test(email)) {\r\n                links.push(`<a href=\"mailto:${email}\">${L(__email)}</a>`);\r\n            } else {\r\n                links.push(`<a href=\"${email}\">${L(__contact)}</a>`);\r\n            }\r\n        }\r\n\r\n        HTML.beforeEnd(\".glance_ctn_responsive_left\",\r\n            `<div class=\"release_date\" style=\"padding-bottom: 0;\">\r\n                <div class=\"subtitle column\">${L(__support)}:</div>\r\n                <div class=\"summary column\">${links.join(\", \")}</div>\r\n            </div>`);\r\n    }\r\n}\r\n", "\r\nexport default class OutOfCapacityError extends Error {\r\n\r\n    public ratio: number;\r\n\r\n    constructor(ratio: number, message: string|undefined = undefined) {\r\n        super(message);\r\n\r\n        this.name = \"OutOfCapacityError\";\r\n        this.ratio = ratio;\r\n    }\r\n}\r\n", "\r\nexport default class CapacityInfo {\r\n\r\n    public closeToFull: boolean;\r\n    public utilization: number;\r\n\r\n    constructor(closeToFull: boolean = false, utilization: number) {\r\n        this.closeToFull = closeToFull;\r\n        this.utilization = utilization;\r\n    }\r\n}\r\n", "import type AdapterInterface from \"@Content/Modules/UserNotes/Adapters/AdapterInterface\";\r\nimport OutOfCapacityError from \"@Content/Modules/UserNotes/OutOfCapacityError\";\r\nimport CapacityInfo from \"@Content/Modules/UserNotes/CapacityInfo\";\r\nimport SyncedStorage from \"@Core/Storage/SyncedStorage\";\r\n\r\nexport default class SyncedStorageAdapter implements AdapterInterface{\r\n\r\n    private async getNotesMap(): Promise<Map<number, string>> {\r\n        return new Map<number, string>(\r\n            Object.entries((await SyncedStorage.get(\"user_notes\")) ?? {})\r\n                .map(([appid, note]) => [Number(appid), note])\r\n        );\r\n    }\r\n\r\n    async get(...appids: number[]): Promise<Map<number, string|null>> {\r\n\r\n        const result = new Map<number, string|null>(\r\n            appids.map(appid => [appid, null])\r\n        );\r\n\r\n        const notes = await SyncedStorage.get(\"user_notes\");\r\n        if (notes) {\r\n            for (let [appidStr, note] of Object.entries(notes)) {\r\n                const appid = Number(appidStr);\r\n                if (!result.has(appid)) {\r\n                    continue;\r\n                }\r\n                result.set(appid, note);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    async set(appid: number, note: string): Promise<CapacityInfo> {\r\n        const notes = await this.getNotesMap();\r\n        notes.set(appid, note);\r\n\r\n        const notesObj = Object.fromEntries(notes.entries());\r\n\r\n        const storageUsage = this.getNotesSize(notesObj) / SyncedStorage.QUOTA_BYTES_PER_ITEM;\r\n        if (storageUsage > 1) {\r\n            throw new OutOfCapacityError(storageUsage, \"Can't set this user note, out of capacity\");\r\n        }\r\n\r\n        await SyncedStorage.set(\"user_notes\", notesObj);\r\n        return new CapacityInfo(storageUsage > 0.85, storageUsage);\r\n    }\r\n\r\n    async delete(appid: number): Promise<void> {\r\n        const notes = await this.getNotesMap();\r\n        notes.delete(appid);\r\n\r\n        return notes.size > 0\r\n            ? SyncedStorage.set(\"user_notes\", Object.fromEntries(notes.entries()))\r\n            : SyncedStorage.remove(\"user_notes\");\r\n    }\r\n\r\n    async export(): Promise<Record<string, string>> {\r\n        const map = await this.getNotesMap();\r\n        return Object.fromEntries(map.entries());\r\n    }\r\n\r\n    async import(notes: Record<string, string>): Promise<void> {\r\n        const storageUsage = this.getNotesSize(notes) / SyncedStorage.QUOTA_BYTES_PER_ITEM;\r\n        if (storageUsage > 1) {\r\n            throw new OutOfCapacityError(storageUsage, \"Import to synced storage failed, too much data for this adapter\");\r\n        }\r\n        return SyncedStorage.set(\"user_notes\", notes);\r\n    }\r\n\r\n    clear(): Promise<void> {\r\n        return SyncedStorage.remove(\"user_notes\");\r\n    }\r\n\r\n    private getNotesSize(notes: Record<number, string>): number {\r\n        return \"user_notes\".length + JSON.stringify(notes).length;\r\n    }\r\n}\r\n", "import type AdapterInterface from \"@Content/Modules/UserNotes/Adapters/AdapterInterface\";\r\nimport Background from \"@Core/Background\";\r\nimport {EAction} from \"@Background/EAction\";\r\n\r\nexport default class IdbAdapter implements AdapterInterface {\r\n\r\n    async get(...appids: number[]): Promise<Map<number, string|null>> {\r\n        const notes = await Background.send<Record<number, string|undefined>>(EAction.Notes_Get, {appids});\r\n        return new Map(\r\n            Object.entries(notes)\r\n                .map(([appidStr, note]) => [Number(appidStr), note ?? null]));\r\n    }\r\n\r\n    async set(appid: number, note: string): Promise<null> {\r\n        await Background.send(EAction.Notes_Set, {appid, note});\r\n        return null;\r\n    }\r\n\r\n    delete(appid: number): Promise<void> {\r\n        return Background.send(EAction.Notes_Delete, {appid});\r\n    }\r\n\r\n    export(): Promise<Record<string, string>> {\r\n        return Background.send(EAction.Notes_GetAll);\r\n    }\r\n\r\n    import(notes: Record<string, string>): Promise<void> {\r\n        return Background.send(EAction.Notes_SetAll, {notes});\r\n    }\r\n\r\n    clear(): Promise<void> {\r\n        return Background.send(EAction.Notes_Clear);\r\n    }\r\n}\r\n", "\r\nexport default function assertNever(_value: never): never {\r\n    throw new Error();\r\n}\r\n", "import Settings from \"@Options/Data/Settings\";\r\nimport type AdapterInterface from \"@Content/Modules/UserNotes/Adapters/AdapterInterface\";\r\nimport SyncedStorageAdapter from \"@Content/Modules/UserNotes/Adapters/SyncedStorageAdapter\";\r\nimport IdbAdapter from \"@Content/Modules/UserNotes/Adapters/IdbAdapter\";\r\nimport type {SettingsSchema} from \"@Options/Data/_types\";\r\nimport assertNever from \"@Core/Asserts/AssertNever\";\r\n\r\n// TODO merge with UserNotes class?\r\n\r\nexport default class UserNotesAdapter {\r\n\r\n    private static adapter: AdapterInterface;\r\n\r\n    private static createAdapter(type: SettingsSchema[\"user_notes_adapter\"]) {\r\n        switch (type) {\r\n            case \"synced_storage\":\r\n                return new SyncedStorageAdapter();\r\n\r\n            case \"idb\":\r\n                return new IdbAdapter();\r\n\r\n            default:\r\n                assertNever(type);\r\n        }\r\n    }\r\n\r\n    static getAdapter(): AdapterInterface {\r\n        if (this.adapter === undefined) {\r\n            this.adapter = this.createAdapter(Settings.user_notes_adapter);\r\n        }\r\n        return this.adapter;\r\n    }\r\n\r\n    static async changeAdapter(newType: SettingsSchema[\"user_notes_adapter\"]): Promise<AdapterInterface> {\r\n        const currentAdapter = this.getAdapter();\r\n        if (newType === Settings.user_notes_adapter) {\r\n            return currentAdapter;\r\n        }\r\n\r\n        const newAdapter = this.createAdapter(newType);\r\n\r\n        await newAdapter.import(await currentAdapter.export());\r\n        await currentAdapter.clear();\r\n\r\n        Settings.user_notes_adapter = newType;\r\n\r\n        this.adapter = newAdapter;\r\n        return this.adapter;\r\n    }\r\n}\r\n", "<svelte:options accessors />\r\n\r\n<script lang=\"ts\">\r\n    import {onMount} from \"svelte\";\r\n\r\n    export let note: string;\r\n\r\n    let input: HTMLTextAreaElement;\r\n\r\n    onMount(() => {\r\n        input.focus();\r\n        input.setSelectionRange(0, input.textLength);\r\n\r\n        /**\r\n         * Native keyup handler ignores events on <textarea>s\r\n         * https://github.com/SteamDatabase/SteamTracking/blob/6aabc1d81478c9a3f33598cd0968b5fdaf14f8b8/steamcommunity.com/public/shared/javascript/shared_global.js#L477\r\n         */\r\n        input.addEventListener(\"keydown\", e => {\r\n            if (e.key === \"Enter\" && !e.shiftKey) {\r\n                input.dispatchEvent(new Event(\"change\")); // Workaround for FF\r\n                document.querySelector<HTMLElement>(\".newmodal_buttons > .btn_medium\")?.click();\r\n            }\r\n        });\r\n    });\r\n</script>\r\n\r\n\r\n<div class=\"newmodal_prompt_with_textarea gray_bevel fullwidth\">\r\n    <textarea rows=\"6\" cols=\"12\" bind:this={input} bind:value={note} on:change></textarea>\r\n</div>\r\n", "import SteamFacade from \"@Content/Modules/Facades/SteamFacade\";\r\nimport type {SvelteComponent} from \"svelte\";\r\n\r\nlet counter = 0;\r\n\r\nexport default async function(options: {\r\n    modalFn: (target: HTMLElement) => SvelteComponent,\r\n    title: string,\r\n    options?: {\r\n        okButton?: string, // Default \"OK\"\r\n        cancelButton?: string,  // Default \"Cancel\"\r\n        secondaryActionButton?: string, // Needs a value else won't get rendered\r\n        explicitConfirm?: boolean, // Avoids releasing Enter from auto-confirming\r\n        explicitDismissal?: boolean // Avoids dismissal on clicking on background\r\n    }\r\n}): Promise<\"OK\"|\"SECONDARY\"|\"CANCEL\"> {\r\n\r\n    ++counter;\r\n    const modalId = `as_modal-${counter}`;\r\n    let modalComponent: SvelteComponent | undefined;\r\n\r\n    const observer = new MutationObserver(() => {\r\n        const modal = document.querySelector<HTMLDivElement>(\"#\"+modalId);\r\n        if (modal) {\r\n            modalComponent = options.modalFn(modal);\r\n            observer.disconnect();\r\n        }\r\n    });\r\n    observer.observe(document.body, {\r\n        childList: true\r\n    });\r\n\r\n    const response = await SteamFacade.showConfirmDialog(\r\n        options.title,\r\n        `<div id=\"${modalId}\"></div>`,\r\n        options.options\r\n    );\r\n\r\n    modalComponent?.$destroy();\r\n    return response;\r\n}", "import { cubicOut, cubicInOut, linear } from '../easing/index.js';\nimport { assign, split_css_unit, is_function } from '../internal/index.js';\n\n/**\n * Animates a `blur` filter alongside an element's opacity.\n *\n * https://svelte.dev/docs/svelte-transition#blur\n * @param {Element} node\n * @param {import('./public').BlurParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function blur(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst f = style.filter === 'none' ? '' : style.filter;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [value, unit] = split_css_unit(amount);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `opacity: ${target_opacity - od * u}; filter: ${f} blur(${u * value}${unit});`\n\t};\n}\n\n/**\n * Animates the opacity of an element from 0 to the current opacity for `in` transitions and from the current opacity to 0 for `out` transitions.\n *\n * https://svelte.dev/docs/svelte-transition#fade\n * @param {Element} node\n * @param {import('./public').FadeParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n\tconst o = +getComputedStyle(node).opacity;\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) => `opacity: ${t * o}`\n\t};\n}\n\n/**\n * Animates the x and y positions and the opacity of an element. `in` transitions animate from the provided values, passed as parameters to the element's default values. `out` transitions animate from the element's default values to the provided values.\n *\n * https://svelte.dev/docs/svelte-transition#fly\n * @param {Element} node\n * @param {import('./public').FlyParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function fly(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [xValue, xUnit] = split_css_unit(x);\n\tconst [yValue, yUnit] = split_css_unit(y);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * xValue}${xUnit}, ${(1 - t) * yValue}${yUnit});\n\t\t\topacity: ${target_opacity - od * u}`\n\t};\n}\n\n/**\n * Slides an element in and out.\n *\n * https://svelte.dev/docs/svelte-transition#slide\n * @param {Element} node\n * @param {import('./public').SlideParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function slide(node, { delay = 0, duration = 400, easing = cubicOut, axis = 'y' } = {}) {\n\tconst style = getComputedStyle(node);\n\tconst opacity = +style.opacity;\n\tconst primary_property = axis === 'y' ? 'height' : 'width';\n\tconst primary_property_value = parseFloat(style[primary_property]);\n\tconst secondary_properties = axis === 'y' ? ['top', 'bottom'] : ['left', 'right'];\n\tconst capitalized_secondary_properties = secondary_properties.map(\n\t\t(e) => `${e[0].toUpperCase()}${e.slice(1)}`\n\t);\n\tconst padding_start_value = parseFloat(style[`padding${capitalized_secondary_properties[0]}`]);\n\tconst padding_end_value = parseFloat(style[`padding${capitalized_secondary_properties[1]}`]);\n\tconst margin_start_value = parseFloat(style[`margin${capitalized_secondary_properties[0]}`]);\n\tconst margin_end_value = parseFloat(style[`margin${capitalized_secondary_properties[1]}`]);\n\tconst border_width_start_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[0]}Width`]\n\t);\n\tconst border_width_end_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[1]}Width`]\n\t);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) =>\n\t\t\t'overflow: hidden;' +\n\t\t\t`opacity: ${Math.min(t * 20, 1) * opacity};` +\n\t\t\t`${primary_property}: ${t * primary_property_value}px;` +\n\t\t\t`padding-${secondary_properties[0]}: ${t * padding_start_value}px;` +\n\t\t\t`padding-${secondary_properties[1]}: ${t * padding_end_value}px;` +\n\t\t\t`margin-${secondary_properties[0]}: ${t * margin_start_value}px;` +\n\t\t\t`margin-${secondary_properties[1]}: ${t * margin_end_value}px;` +\n\t\t\t`border-${secondary_properties[0]}-width: ${t * border_width_start_value}px;` +\n\t\t\t`border-${secondary_properties[1]}-width: ${t * border_width_end_value}px;`\n\t};\n}\n\n/**\n * Animates the opacity and scale of an element. `in` transitions animate from an element's current (default) values to the provided values, passed as parameters. `out` transitions animate from the provided values to an element's default values.\n *\n * https://svelte.dev/docs/svelte-transition#scale\n * @param {Element} node\n * @param {import('./public').ScaleParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function scale(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst sd = 1 - start;\n\tconst od = target_opacity * (1 - opacity);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - sd * u});\n\t\t\topacity: ${target_opacity - od * u}\n\t\t`\n\t};\n}\n\n/**\n * Animates the stroke of an SVG element, like a snake in a tube. `in` transitions begin with the path invisible and draw the path to the screen over time. `out` transitions start in a visible state and gradually erase the path. `draw` only works with elements that have a `getTotalLength` method, like `<path>` and `<polyline>`.\n *\n * https://svelte.dev/docs/svelte-transition#draw\n * @param {SVGElement & { getTotalLength(): number }} node\n * @param {import('./public').DrawParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n\tlet len = node.getTotalLength();\n\tconst style = getComputedStyle(node);\n\tif (style.strokeLinecap !== 'butt') {\n\t\tlen += parseInt(style.strokeWidth);\n\t}\n\tif (duration === undefined) {\n\t\tif (speed === undefined) {\n\t\t\tduration = 800;\n\t\t} else {\n\t\t\tduration = len / speed;\n\t\t}\n\t} else if (typeof duration === 'function') {\n\t\tduration = duration(len);\n\t}\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_, u) => `\n\t\t\tstroke-dasharray: ${len};\n\t\t\tstroke-dashoffset: ${u * len};\n\t\t`\n\t};\n}\n\n/**\n * The `crossfade` function creates a pair of [transitions](https://svelte.dev/docs#template-syntax-element-directives-transition-fn) called `send` and `receive`. When an element is 'sent', it looks for a corresponding element being 'received', and generates a transition that transforms the element to its counterpart's position and fades it out. When an element is 'received', the reverse happens. If there is no counterpart, the `fallback` transition is used.\n *\n * https://svelte.dev/docs/svelte-transition#crossfade\n * @param {import('./public').CrossfadeParams & {\n * \tfallback?: (node: Element, params: import('./public').CrossfadeParams, intro: boolean) => import('./public').TransitionConfig;\n * }} params\n * @returns {[(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig, (node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig]}\n */\nexport function crossfade({ fallback, ...defaults }) {\n\t/** @type {Map<any, Element>} */\n\tconst to_receive = new Map();\n\t/** @type {Map<any, Element>} */\n\tconst to_send = new Map();\n\t/**\n\t * @param {Element} from_node\n\t * @param {Element} node\n\t * @param {import('./public').CrossfadeParams} params\n\t * @returns {import('./public').TransitionConfig}\n\t */\n\tfunction crossfade(from_node, node, params) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = (d) => Math.sqrt(d) * 30,\n\t\t\teasing = cubicOut\n\t\t} = assign(assign({}, defaults), params);\n\t\tconst from = from_node.getBoundingClientRect();\n\t\tconst to = node.getBoundingClientRect();\n\t\tconst dx = from.left - to.left;\n\t\tconst dy = from.top - to.top;\n\t\tconst dw = from.width / to.width;\n\t\tconst dh = from.height / to.height;\n\t\tconst d = Math.sqrt(dx * dx + dy * dy);\n\t\tconst style = getComputedStyle(node);\n\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\t\tconst opacity = +style.opacity;\n\t\treturn {\n\t\t\tdelay,\n\t\t\tduration: is_function(duration) ? duration(d) : duration,\n\t\t\teasing,\n\t\t\tcss: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${\n\t\t\t\tt + (1 - t) * dh\n\t\t\t});\n\t\t\t`\n\t\t};\n\t}\n\n\t/**\n\t * @param {Map<any, Element>} items\n\t * @param {Map<any, Element>} counterparts\n\t * @param {boolean} intro\n\t * @returns {(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig}\n\t */\n\tfunction transition(items, counterparts, intro) {\n\t\treturn (node, params) => {\n\t\t\titems.set(params.key, node);\n\t\t\treturn () => {\n\t\t\t\tif (counterparts.has(params.key)) {\n\t\t\t\t\tconst other_node = counterparts.get(params.key);\n\t\t\t\t\tcounterparts.delete(params.key);\n\t\t\t\t\treturn crossfade(other_node, node, params);\n\t\t\t\t}\n\t\t\t\t// if the node is disappearing altogether\n\t\t\t\t// (i.e. wasn't claimed by the other list)\n\t\t\t\t// then we need to supply an outro\n\t\t\t\titems.delete(params.key);\n\t\t\t\treturn fallback && fallback(node, params, intro);\n\t\t\t};\n\t\t};\n\t}\n\treturn [transition(to_send, to_receive, false), transition(to_receive, to_send, true)];\n}\n", "<script lang=\"ts\">\r\n    export let type: \"primary\"|\"secondary\"|\"cancel\";\r\n</script>\r\n\r\n\r\n<button type=\"button\"\r\n        class:primary={type === \"primary\"}\r\n        class:secondary={type === \"secondary\"}\r\n        class:cancel={type === \"cancel\"}\r\n        on:click>\r\n    <span><slot></slot></span>\r\n</button>\r\n\r\n\r\n<style>\r\n    button {\r\n        margin-left: 12px;\r\n        margin-top: 12px;\r\n        border-radius: 2px;\r\n        border: none;\r\n        padding: 1px;\r\n        display: inline-block;\r\n        cursor: pointer;\r\n        text-decoration: none !important;\r\n        color: #d2efa9;\r\n        text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);\r\n        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);\r\n        background-size: 330% 100%;\r\n    }\r\n    .primary {\r\n        background-image: linear-gradient( to right, #75b022 5%, #588a1b 95%);\r\n        color: #d2efa9;\r\n    }\r\n    .primary:hover {\r\n        background-image: linear-gradient( to right, #8ed629 5%, #6aa621 95%);\r\n        color: white;\r\n    }\r\n\r\n    .secondary {\r\n        background-image: linear-gradient( to right, #47bfff 5%, #1a44c2 60%);\r\n        color: #c3e1f8;\r\n    }\r\n    .secondary:hover {\r\n        background-image: linear-gradient( to right, #47bfff 5%, #1a44c2 60%);\r\n        color: white;\r\n    }\r\n\r\n    .cancel {\r\n        background-image: linear-gradient( to right, #32363f 5%, #32363f 95%);\r\n        color: #dfe3e6;\r\n    }\r\n    .cancel:hover {\r\n        background-image: linear-gradient( to right, #464d58 5%, #464d58 95%);\r\n        color: white;\r\n    }\r\n\r\n    span {\r\n        padding: 0 15px;\r\n        font-size: 15px;\r\n        line-height: 30px;\r\n    }\r\n</style>", "<script lang=\"ts\">\r\n    import {createEventDispatcher} from \"svelte\";\r\n    import {fade} from \"svelte/transition\";\r\n    import ModalButton from \"@Core/Modals/Contained/ModalButton.svelte\";\r\n    import {EModalAction} from \"@Core/Modals/Contained/EModalAction\";\r\n\r\n    const dispatch = createEventDispatcher<{\r\n        button: EModalAction\r\n    }>();\r\n\r\n    export let title: string;\r\n    export let body: string = \"\";\r\n    export let showClose: boolean = false;\r\n    export let buttons: {\r\n        primary?: string,\r\n        secondary?: string,\r\n        cancel?: string\r\n    }|undefined = undefined;\r\n</script>\r\n\r\n<div class=\"container\">\r\n    <div class=\"bg\" in:fade={{duration: 200}}></div>\r\n    <div class=\"modal\">\r\n        <div class=\"top-bar\"></div>\r\n        <div>\r\n            <div class=\"header\">\r\n                {#if showClose}\r\n                    <button type=\"button\" on:click={() => dispatch(\"button\", EModalAction.Cancel)}></button>\r\n                {/if}\r\n                <div class=\"title\">{title}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"content\">\r\n            <slot>{@html body}</slot>\r\n\r\n            {#if buttons && (buttons?.primary || buttons?.secondary || buttons?.cancel)}\r\n                <div class=\"buttons\">\r\n                    {#if buttons?.primary}\r\n                        <ModalButton type=\"primary\" on:click={() => dispatch(\"button\", EModalAction.OK)}>{buttons.primary}</ModalButton>\r\n                    {/if}\r\n                    {#if buttons?.secondary}\r\n                        <ModalButton type=\"secondary\" on:click={() => dispatch(\"button\", EModalAction.Secondary)}>{buttons.secondary}</ModalButton>\r\n                    {/if}\r\n                    {#if buttons?.cancel}\r\n                        <ModalButton type=\"cancel\" on:click={() => dispatch(\"button\", EModalAction.Cancel)}>{buttons.cancel}</ModalButton>\r\n                    {/if}\r\n                </div>\r\n            {/if}\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    .container {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: 900;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        width: 100vw;\r\n        height: 100vh\r\n    }\r\n\r\n    .modal {\r\n        position: relative;\r\n        min-width: 500px;\r\n        max-width: calc(100vw - 100px);\r\n        margin: auto;\r\n        font-family: \"Motiva Sans\", Sans-serif;\r\n        font-weight: normal;\r\n        background: radial-gradient(circle at top left, rgba(74, 81, 92, 0.4) 0%, rgba(75, 81, 92, 0) 60%), #25282e;\r\n    }\r\n\r\n    .top-bar {\r\n        width: 100%;\r\n        height: 1px;\r\n        background: linear-gradient(to right, #00ccff, #3366ff);\r\n    }\r\n\r\n    .header {\r\n        padding: 0;\r\n        text-align: left;\r\n        font-size: 22px;\r\n        font-weight: 700;\r\n        color: #ffffff;\r\n        letter-spacing: unset;\r\n        text-transform: unset;\r\n    }\r\n\r\n    button {\r\n        border: none;\r\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVBREZBRDlBNzdCNzExRTI5ODAzRUE3MDU0Mzk5MjM5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVBREZBRDlCNzdCNzExRTI5ODAzRUE3MDU0Mzk5MjM5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUFERkFEOTg3N0I3MTFFMjk4MDNFQTcwNTQzOTkyMzkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUFERkFEOTk3N0I3MTFFMjk4MDNFQTcwNTQzOTkyMzkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4iulRzAAABPElEQVR42mI8cuQIAyWABUqbAXEylH0fiDtwqI8FYhsoewEQH4cZcBaI64DYG8p/AVWADDyAeD4QMwPxJiA+BRJkgkr+BeJoIL4D5U8DYi0kzepAvAKq+TJU7V9kA0DgIxD7Q2lOIF4NpfmBeAuUfg3EPkD8BaaJCc2Z14A4EcoGuWAC1NkqQPwLqvkRsgYmLAG1HoiboOw0IA6EshNh/iZkAAjUA/FBJP5KIF6GTSEuAwygUQsDflAxogwQAuJ10AAExcpNKHsjEIsSMoAZGl2K0EALBeIIKFsOKSpxGtACxK5Qdi4QX4DiAqiYExB34TIgBIgrkAJtFpLcdKgYCBQBcRRMghGamUBxfhKIeaB+NkFOLFAAkjsDTZXfgdgK5DpYXvBGiqYpWDQzQMVAYZKDlDcuMFKanQECDAAqw0LA+GRiqAAAAABJRU5ErkJggg==);\r\n        background-color: transparent;\r\n        background-repeat: no-repeat;\r\n        background-position: center right;\r\n        cursor: pointer;\r\n        float: right;\r\n        margin-top: 9px;\r\n        margin-right: 9px;\r\n        height: 16px;\r\n        width: 16px;\r\n        opacity: 0.7;\r\n    }\r\n    button:hover {\r\n        opacity: 1;\r\n    }\r\n\r\n    .title {\r\n        padding: 24px 24px 0 24px;\r\n        display: block;\r\n    }\r\n\r\n    .content {\r\n        width: 100%;\r\n        overflow: auto;\r\n        word-wrap: break-word;\r\n        padding: 24px 25px 25px 25px;\r\n        font-size: 16px;\r\n        line-height: 1.25;\r\n        color: #acb2b8;\r\n        position: relative;\r\n        max-height: calc(100vh - 100px);\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .buttons {\r\n        text-align: right;\r\n    }\r\n\r\n    .bg {\r\n        position: fixed;\r\n        background: #000000;\r\n        opacity: 0.8;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n    }\r\n</style>", "<script lang=\"ts\">\r\n    import Modal from \"@Core/Modals/Contained/Modal.svelte\";\r\n    import {__cancel, __save, __userNote_addForGame} from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {EModalAction} from \"@Core/Modals/Contained/EModalAction\";\r\n    import {createEventDispatcher} from \"svelte\";\r\n\r\n    const dispatch = createEventDispatcher<{\r\n        save: string,\r\n        cancel: void\r\n    }>();\r\n\r\n    export let appName: string;\r\n    export let note: string;\r\n\r\n    async function handleButton(e: CustomEvent<EModalAction>): Promise<void> {\r\n        const action = e.detail;\r\n\r\n        if (action === EModalAction.OK) {\r\n            dispatch(\"save\", note);\r\n        } else {\r\n            dispatch(\"cancel\");\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<Modal title={L(__userNote_addForGame, {\"gamename\": appName})} buttons={{\r\n    primary: L(__save),\r\n    cancel: L(__cancel)\r\n}} on:button={handleButton}>\r\n    <div>\r\n        <textarea bind:value={note} />\r\n    </div>\r\n</Modal>\r\n\r\n\r\n<style>\r\n    div {\r\n        background-color: rgba(0,0,0,0.2);\r\n        border-radius: 3px;\r\n        border: 1px solid #262627;\r\n        box-shadow: 1px 1px 0 #39393a;\r\n        color: #BFBFBF;\r\n        margin-bottom: 6px;\r\n        outline: none;\r\n        padding: 4px 6px;\r\n        width: 500px;\r\n    }\r\n\r\n    textarea {\r\n        border: none;\r\n        outline: none;\r\n        background-color: transparent;\r\n        color: #bfbfbf;\r\n        box-shadow: none;\r\n        width: 100%;\r\n        height: 112px;\r\n        font-size: 14px;\r\n    }\r\n</style>", "import {__cancel, __ok} from \"@Strings/_strings\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport Modal from \"@Core/Modals/Contained/Modal.svelte\";\r\nimport type {EModalAction} from \"@Core/Modals/Contained/EModalAction\";\r\n\r\nexport default class ConfirmDialog {\r\n\r\n    constructor(\r\n        private readonly title: string,\r\n        private readonly body: string=\"\",\r\n        private readonly buttons: {\r\n            primary?: string,\r\n            secondary?: string,\r\n            cancel?: string\r\n        } = {\r\n            primary: L(__ok),\r\n            cancel: L(__cancel)\r\n        }\r\n    ) {}\r\n\r\n    show(): Promise<EModalAction> {\r\n        return new Promise(resolve => {\r\n            const modal = new Modal({\r\n                target: document.body,\r\n                props: {\r\n                    title: this.title,\r\n                    body: this.body,\r\n                    buttons: this.buttons\r\n                }\r\n            });\r\n            modal.$on(\"button\", (e: CustomEvent<EModalAction>) => {\r\n                resolve(e.detail);\r\n                modal.$destroy();\r\n            });\r\n        });\r\n    }\r\n}\r\n", "import type CapacityInfo from \"@Content/Modules/UserNotes/CapacityInfo\";\r\nimport OutOfCapacityError from \"@Content/Modules/UserNotes/OutOfCapacityError\";\r\nimport UserNotesAdapter from \"@Content/Modules/UserNotes/UserNotesAdapter\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport {\r\n    __save,\r\n    __userNote_add,\r\n    __userNote_addForGame,\r\n    __userNote_closeOnStorage,\r\n    __userNote_closeOnStorageDesc,\r\n    __userNote_notEnoughSpace,\r\n    __userNote_notEnoughSpaceDesc,\r\n    __userNote_saveLocal,\r\n    __userNote_saveSyncedStorage,\r\n    __userNote_storageWarningDesc,\r\n    __userNote_syncError,\r\n} from \"@Strings/_strings\";\r\nimport type AdapterInterface from \"@Content/Modules/UserNotes/Adapters/AdapterInterface\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport ITADApiFacade from \"@Content/Modules/Facades/ITADApiFacade\";\r\nimport SteamFacade from \"@Content/Modules/Facades/SteamFacade\";\r\nimport NotesForm from \"./NotesForm.svelte\";\r\nimport CustomModal from \"@Core/Modals/CustomModal\";\r\nimport NoteEditModal from \"@Content/Modules/UserNotes/Modals/NoteEditModal.svelte\";\r\nimport ConfirmDialog from \"@Core/Modals/ConfirmDialog\";\r\nimport {EModalAction} from \"@Core/Modals/Contained/EModalAction\";\r\n\r\nexport default class UserNotes {\r\n\r\n    private adapter: AdapterInterface;\r\n    private cache: Map<number, string|null> = new Map();\r\n\r\n    constructor() {\r\n        this.adapter = UserNotesAdapter.getAdapter();\r\n    }\r\n\r\n    async get(...appids: number[]): Promise<Map<number, string|null>> {\r\n        const result: Map<number, string|null> = new Map();\r\n        let query: number[] = [];\r\n\r\n        for (const appid of appids) {\r\n            if (this.cache.has(appid)) {\r\n                result.set(appid, this.cache.get(appid)!);\r\n            } else {\r\n                query.push(appid);\r\n            }\r\n        }\r\n\r\n        if (query.length > 0) {\r\n            const queried = await this.adapter.get(...query);\r\n            for (let [appid, note] of queried) {\r\n                result.set(appid, note);\r\n                this.cache.set(appid, note);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    export(): Promise<Record<number, string>> {\r\n        return this.adapter.export();\r\n    }\r\n\r\n    private async set(appid: number, note: string): Promise<boolean> {\r\n        let capInfo: CapacityInfo|null;\r\n\r\n        try {\r\n            capInfo = await this.adapter.set(appid, note);\r\n            this.cache.set(appid, note);\r\n\r\n            if (Settings.itad_sync_notes && await ITADApiFacade.isConnected()) {\r\n                const status = await ITADApiFacade.pushNote(appid, note);\r\n                if (status.errors.length != 0) {\r\n                    const [, error, params] = status.errors[0]!;\r\n                    await SteamFacade.showAlertDialog(\r\n                        L(__userNote_syncError),\r\n                        L(error, params)\r\n                    );\r\n                }\r\n            }\r\n        } catch (err) {\r\n            if (err instanceof OutOfCapacityError) {\r\n                return (await this.showOutOfCapacityDialog(true, err.ratio))\r\n                    ? this.set(appid, note)\r\n                    : false;\r\n            }\r\n\r\n            throw err;\r\n        }\r\n\r\n        if (capInfo !== null && capInfo.closeToFull) {\r\n            await this.showOutOfCapacityDialog(false, capInfo.utilization);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private async delete(appid: number): Promise<void> {\r\n        await this.adapter.delete(appid);\r\n        this.cache.delete(appid);\r\n\r\n        if (Settings.itad_sync_notes && await ITADApiFacade.isConnected()) {\r\n            await ITADApiFacade.deleteNote(appid);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @deprecated\r\n     */\r\n    async showModalDialog(\r\n        appName: string,\r\n        appid: number,\r\n        noteEl: HTMLElement,\r\n        onNoteUpdate: (noteEl: HTMLElement, hasNote: boolean) => void\r\n    ): Promise<void> {\r\n\r\n        let form: NotesForm|undefined;\r\n        const savedNote: string = (await this.get(appid))?.get(appid) ?? \"\";\r\n        let note: string = savedNote;\r\n\r\n        const response = await CustomModal({\r\n            title: L(__userNote_addForGame, {\"gamename\": appName}),\r\n            options: {\r\n                okButton: L(__save),\r\n                explicitDismissal: true\r\n            },\r\n            modalFn: (target) => {\r\n                form = new NotesForm({\r\n                    target,\r\n                    props: {note}\r\n                });\r\n                form.$on(\"change\", () => {\r\n                    note = form!.note;\r\n                });\r\n                return form;\r\n            }\r\n        });\r\n\r\n        note = note.trim().replace(/\\s\\s+/g, \" \");\r\n\r\n        if (response !== \"OK\") {\r\n            return;\r\n        }\r\n\r\n        if (note === savedNote) {\r\n            return;\r\n        }\r\n\r\n        if (note === \"\") {\r\n            this.delete(appid);\r\n            noteEl.textContent = L(__userNote_add);\r\n        } else {\r\n            if (!await this.set(appid, note)) {\r\n                return;\r\n            }\r\n            noteEl.textContent = `\"${note}\"`;\r\n        }\r\n\r\n        onNoteUpdate(noteEl, note !== \"\");\r\n    }\r\n\r\n    public async showModalDialog2(\r\n        appName: string,\r\n        appid: number\r\n    ): Promise<string|null> {\r\n        const savedNote: string = (await this.get(appid))?.get(appid) ?? \"\";\r\n\r\n        return new Promise(resolve => {\r\n            const modal = new NoteEditModal({\r\n                target: document.body,\r\n                props: {\r\n                    appName,\r\n                    note: savedNote\r\n                }\r\n            });\r\n            modal.$on(\"save\", (e) => {\r\n                let note: string|null = e.detail.trim().replace(/\\s\\s+/g, \" \");\r\n                if (note === \"\") {\r\n                    note = null;\r\n                }\r\n\r\n                if (!note) {\r\n                    this.delete(appid);\r\n                } else {\r\n                    this.set(appid, note);\r\n                }\r\n\r\n                resolve(note);\r\n                modal.$destroy();\r\n            });\r\n            modal.$on(\"cancel\", () => {\r\n                resolve(savedNote);\r\n                modal.$destroy();\r\n            });\r\n        });\r\n    }\r\n\r\n    private async showOutOfCapacityDialog(exceeded: boolean, ratio: number): Promise<boolean> {\r\n\r\n        const desc\r\n            = `${L(exceeded ? __userNote_notEnoughSpaceDesc : __userNote_closeOnStorageDesc, {perc: (ratio * 100).toFixed(0)})}\r\n            <br>\r\n            ${L(__userNote_storageWarningDesc)}`;\r\n\r\n        const confirm = new ConfirmDialog(\r\n            L(exceeded ? __userNote_notEnoughSpace : __userNote_closeOnStorage),\r\n            desc,\r\n            {\r\n                primary: L(__userNote_saveLocal),\r\n                cancel: L(__userNote_saveSyncedStorage)\r\n            }\r\n        )\r\n        const response = await confirm.show();\r\n\r\n        if (response === EModalAction.OK) {\r\n            this.adapter = await UserNotesAdapter.changeAdapter(\"idb\");\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n", "import {__userNote_add, __userNote_update} from \"@Strings/_strings\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport UserNotes from \"@Content/Features/Store/Common/UserNotes/UserNotes\";\r\n\r\nexport default class FUserNotes extends Feature<CApp> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return this.context.user.isSignedIn && Settings.user_notes_app;\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n\r\n        HTML.beforeBegin(\".queue_actions_ctn > :last-child\",\r\n            `<div id=\"esi-user-note-button\" class=\"queue_control_button\">\r\n                <div class=\"esi-add-note btnv6_blue_hoverfade btn_medium\">\r\n                    <span>${L(__userNote_add)}</span>\r\n                </div>\r\n                <div class=\"esi-update-note btnv6_blue_hoverfade btn_medium\">\r\n                    <span>${L(__userNote_update)}</span>\r\n                </div>\r\n            </div>`);\r\n\r\n        HTML.beforeEnd(\".queue_actions_ctn\",\r\n            '<div id=\"esi-store-user-note\" class=\"esi-note esi-note--store ellipsis\"></div>');\r\n\r\n        const button = document.querySelector(\"#esi-user-note-button\")!;\r\n        const noteEl = document.querySelector<HTMLDivElement>(\"#esi-store-user-note\")!;\r\n\r\n        const userNotes = new UserNotes();\r\n        const note = (await userNotes.get(this.context.appid)).get(this.context.appid) ?? undefined;\r\n\r\n        if (typeof note !== \"undefined\") {\r\n            button.classList.add(\"esi-has-note\");\r\n\r\n            noteEl.textContent = `\"${note}\"`;\r\n            noteEl.classList.add(\"esi-has-note\");\r\n        }\r\n\r\n        const handler = () => {\r\n            userNotes.showModalDialog(\r\n                this.context.appName,\r\n                this.context.appid,\r\n                noteEl,\r\n                (node, active) => {\r\n                    button.classList.toggle(\"esi-has-note\", active);\r\n                    node.classList.toggle(\"esi-has-note\", active);\r\n                }\r\n            );\r\n        };\r\n\r\n        button.addEventListener(\"click\", handler);\r\n        noteEl.addEventListener(\"click\", handler);\r\n    }\r\n}\r\n", "import {L} from \"@Core/Localization/Localization\";\r\nimport {\r\n    __ratingDetails,\r\n    __wsgf_certifications,\r\n    __wsgf_gold,\r\n    __wsgf_incomplete,\r\n    __wsgf_limited,\r\n    __wsgf_silver,\r\n    __wsgf_unsupported,\r\n} from \"@Strings/_strings\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport type {TStorePageData} from \"@Background/Modules/AugmentedSteam/_types\";\r\nimport ExtensionResources from \"@Core/ExtensionResources\";\r\nimport HTML from \"@Core/Html/Html\";\r\n\r\nexport default class FWidescreenCertification extends Feature<CApp> {\r\n\r\n    private readonly _levelMap = {\r\n        \"A\": [\"gold\", __wsgf_gold],\r\n        \"B\": [\"silver\", __wsgf_silver],\r\n        \"C\": [\"limited\", __wsgf_limited],\r\n        \"Incomplete\": [\"incomplete\", __wsgf_incomplete],\r\n        \"Unsupported\": [\"unsupported\", __wsgf_unsupported]\r\n    };\r\n\r\n    private _wsgf: TStorePageData[\"wsgf\"]|null=null;\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        if (!Settings.showwsgf\r\n            || this.context.isDlcLike\r\n            || this.context.isVideoOrHardware) {\r\n            return false;\r\n        }\r\n\r\n        const result = await this.context.data;\r\n        if (!result || !result.wsgf) {\r\n            return false;\r\n        }\r\n\r\n        this._wsgf = result.wsgf;\r\n        return true;\r\n    }\r\n\r\n    _getType(value: string, imgPrefix: string, typeName: string): [string, string] {\r\n\r\n        let icon = \"\";\r\n        let text = \"\";\r\n\r\n        // @ts-ignore\r\n        const [level, string] = this._levelMap[value] ?? [undefined, undefined];\r\n        if (level) {\r\n            icon = ExtensionResources.getURL(`img/wsgf/${imgPrefix}-${level}.png`);\r\n            text = L(string, {\"type\": typeName});\r\n        }\r\n        return [icon, text];\r\n    }\r\n\r\n    override apply(): void {\r\n        if (!this._wsgf) {\r\n            return;\r\n        }\r\n\r\n        const {\r\n            \"url\": url,\r\n            \"wide\": wsg,\r\n            \"multi_monitor\": mmg,\r\n            \"4k\": fkg,\r\n            \"ultrawide\": uws,\r\n        } = this._wsgf;\r\n\r\n        const [wsgIcon, wsgText] = this._getType(wsg, \"ws\", \"Widescreen\");\r\n        const [mmgIcon, mmgText] = this._getType(mmg, \"mm\", \"Multi-Monitor\");\r\n        const [uwsIcon, uwsText] = this._getType(uws, \"uw\", \"Ultra-Widescreen\");\r\n        const [fkgIcon, fkgText] = this._getType(fkg, \"4k\", \"4k UHD\");\r\n\r\n        HTML.afterEnd(\"div.game_details\",\r\n            `<div class=\"block responsive_apppage_details_right heading\">${L(__wsgf_certifications)}</div>\r\n            <div class=\"block underlined_links es_wsgf\">\r\n                <div class=\"block_content\">\r\n                    <div class=\"block_content_inner\">\r\n                        <div class=\"details_block\">\r\n                            ${wsg ? `<img src=\"${HTML.escape(wsgIcon)}\" title=\"${HTML.escape(wsgText)}\" alt=\"\">` : \"\"}\r\n                            ${mmg ? `<img src=\"${HTML.escape(mmgIcon)}\" title=\"${HTML.escape(mmgText)}\" alt=\"\">` : \"\"}\r\n                            ${uws ? `<img src=\"${HTML.escape(uwsIcon)}\" title=\"${HTML.escape(uwsText)}\" alt=\"\">` : \"\"}\r\n                            ${fkg ? `<img src=\"${HTML.escape(fkgIcon)}\" title=\"${HTML.escape(fkgText)}\" alt=\"\">` : \"\"}\r\n                        </div>\r\n                        <br>\r\n                        <a class=\"linkbar es_external_icon\" target=\"_blank\" href=\"${HTML.escape(url)}\">${L(__ratingDetails)}</a>\r\n                    </div>\r\n                </div>\r\n            </div>`);\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import external from \"@Content/externalLink\";\r\n\r\n    export let href: string;\r\n    export let icon: string = \"\";\r\n    export let iconUrl: string|null = null;\r\n    export let isCommunity: boolean = false;\r\n</script>\r\n\r\n\r\n<a class=\"btnv6_blue_hoverfade btn_medium {icon}\"\r\n    class:es_community_btn={isCommunity}\r\n    class:es_app_btn={!isCommunity}\r\n    use:external {href}\r\n>\r\n    <span>\r\n        {#if iconUrl}\r\n            <i class=\"ico16\" style=\"background: url({iconUrl}); background-size: contain;\"></i>\r\n        {:else}\r\n            <i class=\"ico16\"></i>\r\n        {/if}\r\n        <slot></slot>\r\n    </span>\r\n</a>\r\n\r\n\r\n<style>\r\n    .es_app_btn {\r\n        display: block !important;\r\n        margin-bottom: 6px;\r\n    }\r\n    .es_app_btn .ico16 {\r\n        margin-right: 12px !important;\r\n    }\r\n\r\n    .es_community_btn .ico16 {\r\n        margin-right: 3px !important;\r\n    }\r\n\r\n    .steamdb_ico i {\r\n        background-image: url(\"extension://img/steamdb_store.png\");\r\n    }\r\n    .steamdb_ico:hover i {\r\n        background-image: url(\"extension://img/steamdb_store_black.png\");\r\n    }\r\n    .itad_ico i {\r\n        background-image: url(\"extension://img/itad_small.png\");\r\n    }\r\n    .itad_ico:hover i {\r\n        background-image: url(\"extension://img/itad_small_black.png\");\r\n    }\r\n    .bartervg_ico i {\r\n        background-image: url(\"extension://img/bartervg.png\");\r\n    }\r\n    .as_youtube_btn i {\r\n        background-image: url(\"extension://img/icon-youtube.png\");\r\n    }\r\n    .twitch_btn i {\r\n        background-image: url(\"extension://img/icon-twitch.png\");\r\n    }\r\n    .pcgw_btn i {\r\n        background-image: url(\"extension://img/pcgw.png\");\r\n    }\r\n    .completionistme_btn i {\r\n        background-image: url(\"extension://img/icon-completionistme.png\");\r\n    }\r\n    .protondb_btn i {\r\n        background-image: url(\"extension://img/icon-protondb.png\");\r\n    }\r\n    .cardexchange_btn i {\r\n        background-image: url(\"extension://img/steamcardexchange.png\");\r\n    }\r\n</style>\r\n", "<script lang=\"ts\">\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__viewOnWebsite} from \"@Strings/_strings\";\r\n    import Settings from \"@Options/Data/Settings\";\r\n    import ExtraLink from \"@Content/Features/Store/Common/ExtraLinks/ExtraLink.svelte\";\r\n\r\n    export let type: \"app\"|\"sub\"|\"bundle\";\r\n    export let gameid: number;\r\n    export let isCommunity: boolean = false;\r\n</script>\r\n\r\n\r\n{#if Settings.showitadlinks}\r\n    <ExtraLink href=\"https://isthereanydeal.com/steam/{type}/{gameid}/\" icon=\"itad_ico\" {isCommunity}>\r\n        {isCommunity ? \"ITAD\" : L(__viewOnWebsite, {\"website\": \"IsThereAnyDeal\"})}\r\n    </ExtraLink>\r\n{/if}\r\n\r\n{#if Settings.showsteamdb}\r\n    <ExtraLink href=\"https://steamdb.info/{type}/{gameid}/\" icon=\"steamdb_ico\" {isCommunity}>\r\n        {isCommunity ? \"SteamDB\" : L(__viewOnWebsite, {\"website\": \"SteamDB\"})}\r\n    </ExtraLink>\r\n{/if}\r\n\r\n{#if Settings.showbartervg}\r\n    <ExtraLink href=\"https://barter.vg/steam/{type}/{gameid}/\" icon=\"bartervg_ico\" {isCommunity}>\r\n        {isCommunity ? \"Barter.vg\" : L(__viewOnWebsite, {\"website\": \"Barter.vg\"})}\r\n    </ExtraLink>\r\n{/if}\r\n", "\r\nexport default class UrlUtils {\r\n\r\n    public static escapeUserUrl(url: string, replacements: Record<string, string>): string|null {\r\n        if (!/^[^/]+\\/\\//.test(url)) {\r\n            url = `https://${url}`;\r\n        }\r\n\r\n        for (const [pattern, replacement] of Object.entries(replacements)) {\r\n            url = url.replace(`[${pattern}]`, encodeURIComponent(replacement));\r\n        }\r\n\r\n        return URL.parse(url)?.toString() ?? null;\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import HTML from \"@Core/Html/Html\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__viewOnWebsite, __wikiArticle, __youtubeGameplay, __youtubeReviews} from \"@Strings/_strings\";\r\n    import Settings from \"@Options/Data/Settings\";\r\n    import ExtraLink from \"@Content/Features/Store/Common/ExtraLinks/ExtraLink.svelte\";\r\n    import CommonExtraLinks from \"@Content/Features/Common/CommonExtraLinks.svelte\";\r\n    import UrlUtils from \"@Core/Utils/UrlUtils\";\r\n\r\n    export let appid: number;\r\n    export let communityAppid: number;\r\n    export let appName: string = \"\";\r\n</script>\r\n\r\n\r\n<CommonExtraLinks type=\"app\" gameid={appid} />\r\n\r\n{#if Settings.showsteamcardexchange}\r\n    <ExtraLink href=\"https://www.steamcardexchange.net/index.php?gamepage-appid-{communityAppid}/\" icon=\"cardexchange_btn\">\r\n        {L(__viewOnWebsite, {\"website\": \"Steam Card Exchange\"})}\r\n    </ExtraLink>\r\n{/if}\r\n\r\n{#if Settings.showprotondb}\r\n    <ExtraLink href=\"https://www.protondb.com/app/{appid}/\" icon=\"protondb_btn\">\r\n        {L(__viewOnWebsite, {\"website\": \"ProtonDB\"})}\r\n    </ExtraLink>\r\n{/if}\r\n\r\n{#if Settings.showcompletionistme}\r\n    <ExtraLink href=\"https://completionist.me/steam/app/{appid}/\" icon=\"completionistme_btn\">\r\n        {L(__viewOnWebsite, {\"website\": \"Completionist.me\"})}\r\n    </ExtraLink>\r\n{/if}\r\n\r\n{#if Settings.showpcgw}\r\n    <ExtraLink href=\"https://pcgamingwiki.com/api/appid.php?appid={appid}\" icon=\"pcgw_btn\">\r\n        {L(__wikiArticle, {\"pcgw\": \"PCGamingWiki\"})}\r\n    </ExtraLink>\r\n{/if}\r\n\r\n{#if appName}\r\n    {#if Settings.showtwitch}\r\n        <ExtraLink href=\"https://www.twitch.tv/directory/game/{encodeURIComponent(appName)}\" icon=\"twitch_btn\">\r\n            {L(__viewOnWebsite, {\"website\": \"Twitch\"})}\r\n        </ExtraLink>\r\n    {/if}\r\n\r\n    {#if Settings.showyoutube}\r\n        <ExtraLink href=\"https://www.youtube.com/results?search_query={encodeURIComponent(appName)}\" icon=\"as_youtube_btn\">\r\n            {L(__viewOnWebsite, {\"website\": \"YouTube\"})}\r\n        </ExtraLink>\r\n    {/if}\r\n\r\n    {#if Settings.showyoutubegameplay}\r\n        <ExtraLink href=\"https://www.youtube.com/results?search_query={encodeURIComponent(`${appName} \\\"PC\\\" Gameplay`)}\" icon=\"as_youtube_btn\">\r\n            {L(__youtubeGameplay)}\r\n        </ExtraLink>\r\n    {/if}\r\n\r\n    {#if Settings.showyoutubereviews}\r\n        <ExtraLink href=\"https://www.youtube.com/results?search_query={encodeURIComponent(`${appName} \\\"PC\\\" Review`)}\" icon=\"as_youtube_btn\">\r\n            {L(__youtubeReviews)}\r\n        </ExtraLink>\r\n    {/if}\r\n{/if}\r\n\r\n{#each Settings.app_custom_link as link}\r\n    {#if link.enabled}\r\n        {@const href = UrlUtils.escapeUserUrl(link.url, {\"NAME\": appName, \"ID\": String(appid)})}\r\n        {#if href}\r\n            <ExtraLink {href}\r\n                       iconUrl={link.icon ? HTML.formatUrl(link.icon) : null}>\r\n                {L(__viewOnWebsite, {\"website\": link.name})}\r\n            </ExtraLink>\r\n        {/if}\r\n    {/if}\r\n{/each}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport StringUtils from \"@Core/Utils/StringUtils\";\r\nimport AppLinks from \"@Content/Features/Store/Common/ExtraLinks/AppLinks.svelte\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FExtraLinksApp extends Feature<CApp> {\r\n\r\n    // Even if the user disabled extra links, the position of the share/embed links is changed\r\n    override apply(): void {\r\n\r\n        const target = document.querySelector(\"#shareEmbedRow\");\r\n        if (!target) {\r\n            throw new Error(\"Node not found\");\r\n        }\r\n\r\n        // Move share/embed links to the top of the right column\r\n        const sideDetails = document.querySelector(\".es_side_details_wrap\");\r\n        if (sideDetails) {\r\n            sideDetails.insertAdjacentElement(\"afterend\", target);\r\n        } else {\r\n            document.querySelector(\"div.rightcol.game_meta_data\")!.insertAdjacentElement(\"afterbegin\", target);\r\n        }\r\n\r\n        (new AppLinks({\r\n            target,\r\n            anchor: target.firstElementChild!,\r\n            props: {\r\n                appid: this.context.appid,\r\n                communityAppid: this.context.communityAppid,\r\n                appName: StringUtils.clearSpecialSymbols(this.context.appName)\r\n            }\r\n        }));\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport {__communityHub} from \"@Strings/_strings\";\r\nimport AppLinks from \"@Content/Features/Store/Common/ExtraLinks/AppLinks.svelte\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\nexport default class FExtraLinksAppError extends Feature<CApp> {\r\n\r\n    override apply(): void {\r\n\r\n        // Add a Community Hub button to roughly where it normally is\r\n        HTML.beforeBegin(\"h2.pageheader\",\r\n            `<div class=\"es_apphub_OtherSiteInfo\">\r\n                <a class=\"btnv6_blue_hoverfade btn_medium\" href=\"//steamcommunity.com/app/${this.context.appid}/\">\r\n                    <span>${L(__communityHub)}</span>\r\n                </a>\r\n            </div>`);\r\n\r\n        if (!this.hasExtraLinksEnabled()) {\r\n            return;\r\n        }\r\n\r\n        const target = document.createElement(\"div\");\r\n        target.classList.add(\"es_extralinks_ctn\");\r\n        document.querySelector(\"#error_box\")!.insertAdjacentElement(\"afterend\", target);\r\n\r\n        (new AppLinks({\r\n            target,\r\n            props: {\r\n                appid: this.context.appid,\r\n                communityAppid: this.context.appid,\r\n            }\r\n        }));\r\n    }\r\n\r\n    private hasExtraLinksEnabled(): boolean {\r\n        return Settings.showitadlinks\r\n            || Settings.showsteamdb\r\n            || Settings.showbartervg\r\n            || Settings.showsteamcardexchange\r\n            || Settings.showprotondb\r\n            || Settings.showcompletionistme\r\n            || Settings.showpcgw\r\n            || Settings.app_custom_link.some(link => link.enabled);\r\n    }\r\n}\r\n", "import SteamStoreApiFacade from \"@Content/Modules/Facades/SteamStoreApiFacade\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\nimport {MessageHandler} from \"@Content/Modules/Messaging/MessageHandler\";\r\nimport Messenger from \"@Content/Modules/Messaging/Messenger\";\r\n\r\nexport default class DynamicStore {\r\n\r\n    private static registered: boolean = false;\r\n    private static readyPromise: Promise<void>;\r\n\r\n    private static register(): void {\r\n        if (this.registered) {\r\n            return;\r\n        }\r\n        DOMHelper.insertScript(\"scriptlets/DynamicStoreScriptlet.js\");\r\n        this.registered = true;\r\n    }\r\n\r\n    static onReady(): Promise<void> {\r\n        if (!this.readyPromise) {\r\n            this.readyPromise = new Promise(resolve => {\r\n                this.register();\r\n                window.addEventListener(\"DSReady\", () => resolve(), {once: true});\r\n                Messenger.call(MessageHandler.DynamicStore, \"onReady\");\r\n            });\r\n        }\r\n        return this.readyPromise;\r\n    }\r\n\r\n    static invalidateCacheHandler(): void {\r\n        this.register();\r\n        window.addEventListener(\"DSInvalidateCache\", () => this.clear());\r\n        Messenger.call(MessageHandler.DynamicStore, \"invalidateCache\");\r\n    }\r\n\r\n    static clear(): Promise<void> {\r\n        return SteamStoreApiFacade.clearDynamicStore();\r\n    }\r\n\r\n    static async getAppsStatus(storeIds: string[]): Promise<{\r\n        ignored: Set<string>,\r\n        ignoredOwned: Set<string>,\r\n        owned: Set<string>,\r\n        wishlisted: Set<string>\r\n    }> {\r\n        const dsStatus = await SteamStoreApiFacade.getDynamicStoreStatus(storeIds);\r\n        return {\r\n            ignored: new Set(dsStatus.ignored),\r\n            ignoredOwned: new Set(dsStatus.ignoredOwned),\r\n            owned: new Set(dsStatus.owned),\r\n            wishlisted: new Set(dsStatus.wishlisted),\r\n        }\r\n    }\r\n\r\n    static async getAppStatus(storeId: string): Promise<{\r\n        ignored: boolean,\r\n        ignoredOwned: boolean,\r\n        owned: boolean,\r\n        wishlisted: boolean\r\n    }> {\r\n        const dsStatus = await SteamStoreApiFacade.getDynamicStoreStatus([storeId]);\r\n        return {\r\n            ignored: dsStatus.ignored.length > 0,\r\n            ignoredOwned: dsStatus.ignoredOwned.length > 0,\r\n            owned: dsStatus.owned.length > 0,\r\n            wishlisted: dsStatus.wishlisted.length > 0,\r\n        }\r\n    }\r\n\r\n    static getRandomApp(): Promise<number|null> {\r\n        return SteamStoreApiFacade.getDynamicStoreRandomApp();\r\n    }\r\n}\r\n", "import GameId from \"@Core/GameId/GameId\";\r\n\r\n// TODO refactor to return instance\r\nexport default class SubId extends GameId{\r\n\r\n    static fromUrl(url: string): number|null {\r\n        const m = url.match(/(?:store\\.steampowered|steamcommunity)\\.com\\/sub\\/(\\d+)\\/?/);\r\n        return m && m[1] !== undefined\r\n            ? Number(m[1])\r\n            : null;\r\n    }\r\n\r\n    static fromElement(element: HTMLElement|null): number|null {\r\n        if (!element) {\r\n            return null;\r\n        }\r\n\r\n        const packageid = element.dataset.dsPackageid;\r\n        if (packageid) {\r\n            return Number(packageid);\r\n        }\r\n\r\n        const href = element.getAttribute(\"href\");\r\n        if (!href) {\r\n            return null\r\n        }\r\n\r\n        return this.fromUrl(href);\r\n    }\r\n\r\n    constructor(id: number) {\r\n        super(\"sub\", id);\r\n    }\r\n}\r\n", "import GameId from \"@Core/GameId/GameId\";\r\n\r\n// TODO refactor to return instance\r\nexport default class BundleId extends GameId{\r\n\r\n    static fromUrl(url: string): number|null {\r\n        const m = url.match(/(?:store\\.steampowered|steamcommunity)\\.com\\/bundle\\/(\\d+)\\/?/);\r\n        return m && m[1] !== undefined\r\n            ? Number(m[1])\r\n            : null;\r\n    }\r\n\r\n    static fromElement(element: HTMLElement|null): number|null {\r\n        if (!element) {\r\n            return null;\r\n        }\r\n\r\n        const packageid = element.dataset.dsBundleid;\r\n        if (packageid) {\r\n            return Number(packageid);\r\n        }\r\n\r\n        const href = element.getAttribute(\"href\");\r\n        if (!href) {\r\n            return null\r\n        }\r\n\r\n        return this.fromUrl(href);\r\n    }\r\n\r\n    constructor(id: number) {\r\n        super(\"bundle\", id);\r\n    }\r\n}\r\n", "\r\nconst enum ESyncStatus {\r\n    OK,\r\n    Loading,\r\n    Error\r\n}\r\nexport default ESyncStatus;", "<script lang=\"ts\">\r\n    import ESyncStatus from \"@Core/Sync/ESyncStatus\";\r\n\r\n    export let status: ESyncStatus = ESyncStatus.OK;\r\n</script>\r\n\r\n\r\n<span class:is-loading={status === ESyncStatus.Loading}\r\n      class:is-error={status === ESyncStatus.Error}></span>\r\n\r\n\r\n<style>\r\n    span {\r\n        display: inline-block;\r\n        vertical-align: middle;\r\n        align-self: center;\r\n        border: 3px solid #02ba55;\r\n        border-radius: 50%;\r\n    }\r\n    span.is-error {\r\n        border-color: #d72e2e;\r\n    }\r\n    span.is-loading {\r\n        border-color: #3090ce;\r\n        animation: pulse 600ms alternate infinite;\r\n    }\r\n    @keyframes pulse {\r\n        0% { opacity: 0; }\r\n        100% { opacity: 1; }\r\n    }\r\n</style>", "<script lang=\"ts\">\r\n    import ITADApiFacade from \"@Content/Modules/Facades/ITADApiFacade\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__itad_from, __itad_lastImport, __itad_syncNow, __itad_to, __loading, __never} from \"@Strings/_strings\";\r\n    import ESyncStatus from \"@Core/Sync/ESyncStatus\";\r\n    import SyncIndicator from \"@Core/Sync/SyncIndicator.svelte\";\r\n    import {fade} from \"svelte/transition\";\r\n    import {createEventDispatcher} from \"svelte\";\r\n\r\n    const dispatch = createEventDispatcher<{syncEvent: void}>();\r\n\r\n    export let isConnected: boolean;\r\n    export let enableSync: boolean;\r\n    export let status: ESyncStatus = ESyncStatus.OK;\r\n\r\n    let from: number|null = null;\r\n    let to: number|null = null;\r\n\r\n    export async function updateLastImport(): Promise<void> {\r\n        const last = await ITADApiFacade.getLastImport();\r\n        from = last.from;\r\n        to = last.to;\r\n    }\r\n\r\n    async function syncNow(): Promise<void> {\r\n        status = ESyncStatus.Loading;\r\n\r\n        try {\r\n            await ITADApiFacade.sync(true);\r\n            status = ESyncStatus.OK;\r\n            await updateLastImport();\r\n            dispatch(\"syncEvent\");\r\n        } catch (e) {\r\n            status = ESyncStatus.Error;\r\n\r\n            console.group(\"ITAD sync\");\r\n            console.error(\"Failed to sync with ITAD\");\r\n            console.error(e);\r\n            console.groupEnd();\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<div class=\"asi-container\">\r\n    <div class=\"asi-head\">{L(__itad_lastImport)}</div>\r\n\r\n    <div class=\"asi-status\">\r\n        <div class=\"asi-label\">{L(__itad_from)}</div>\r\n        {from ? new Date(from * 1000).toLocaleString() : L(__never)}\r\n    </div>\r\n\r\n    <div class=\"asi-status\">\r\n        <div class=\"asi-label\">{L(__itad_to)}</div>\r\n        {to ? new Date(to * 1000).toLocaleString() : L(__never)}\r\n    </div>\r\n\r\n    {#if isConnected && enableSync}\r\n        <div transition:fade={{duration: 200}}>\r\n            {#if status === ESyncStatus.Loading}\r\n                <span><SyncIndicator status={ESyncStatus.Loading} /> {L(__loading)}</span>\r\n            {:else}\r\n                <button type=\"button\" class=\"asi__sync-now\" on:click={syncNow}>{L(__itad_syncNow)}</button>\r\n            {/if}\r\n        </div>\r\n    {/if}\r\n</div>\r\n\r\n\r\n<style>\r\n    .asi-container {\r\n        line-height: 1.25;\r\n        color: #c6d4df;\r\n    }\r\n\r\n    .asi-head {\r\n        font-size: 14px;\r\n        margin-bottom: 15px;\r\n    }\r\n\r\n    .asi-status {\r\n        line-height: 1.25;\r\n        font-size: 13px;\r\n        margin: 15px 0;\r\n    }\r\n    .asi-label {\r\n        font-family: Arial, Helvetica, sans-serif;\r\n        text-transform: uppercase;\r\n        font-size: 10px;\r\n        color: #8f98a0;\r\n    }\r\n\r\n    button {\r\n        cursor: pointer;\r\n        text-decoration: underline;\r\n        background: none;\r\n        outline: 0;\r\n        border: 0;\r\n        font-size: 12px;\r\n        font-family: inherit;\r\n        color: inherit;\r\n        font-weight: inherit;\r\n        text-align: left;\r\n    }\r\n    button:hover {\r\n        color: white;\r\n    }\r\n</style>\r\n", "<script lang=\"ts\">\r\n    import ExtensionResources from \"@Core/ExtensionResources\";\r\n    import ITADSyncStatus from \"@Content/Modules/Widgets/ITADSync/ITADSyncStatus.svelte\";\r\n    import ESyncStatus from \"@Core/Sync/ESyncStatus\";\r\n    import SyncIndicator from \"@Core/Sync/SyncIndicator.svelte\";\r\n    import Settings from \"@Options/Data/Settings\";\r\n\r\n    const itadLogo = ExtensionResources.getURL(\"img/itad.png\");\r\n\r\n    let statusComponent: ITADSyncStatus;\r\n    let status: ESyncStatus|undefined = undefined;\r\n</script>\r\n\r\n\r\n<!-- svelte-ignore a11y-no-static-element-interactions -->\r\n<div class=\"asi\" on:mouseenter={() => statusComponent.updateLastImport()}>\r\n    <img class=\"asi__logo\" src={itadLogo} alt=\"ITAD logo\">\r\n    <SyncIndicator {status} />\r\n\r\n    <div class=\"asi__hover\">\r\n        <div class=\"asi__content\">\r\n            <ITADSyncStatus isConnected\r\n                            enableSync={Settings.itad_sync_library || Settings.itad_sync_wishlist}\r\n                            bind:status bind:this={statusComponent} />\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    .asi {\r\n        display: inline-flex;\r\n        align-items: center;\r\n        margin-right: 1em;\r\n    }\r\n    .asi__logo {\r\n        height: 20px;\r\n    }\r\n    img {\r\n        margin-right: 0.4em;\r\n    }\r\n\r\n    .asi__hover {\r\n        display: none;\r\n        position: absolute;\r\n        top: 0;\r\n        z-index: 1200;\r\n        left: -115px;\r\n        width: 250px;\r\n        margin-top: 13px;\r\n    }\r\n    .asi:hover .asi__hover {\r\n        display: block;\r\n    }\r\n\r\n    .asi__content {\r\n        padding: 12px;\r\n        border: 1px solid #3d4450;\r\n        position: relative;\r\n        background-color: #3d4450;\r\n        margin: 12px 12px 12px 12px;\r\n        box-shadow: 0 0 12px #000000;\r\n        white-space: nowrap;\r\n    }\r\n</style>\r\n", "import ITADApiFacade from \"@Content/Modules/Facades/ITADApiFacade\";\r\nimport ITADSyncMenu from \"@Content/Modules/Widgets/ITADSync/ITADSyncMenu.svelte\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\n\r\nexport default class ITAD {\r\n\r\n    static async init(user: UserInterface) {\r\n        if (!await ITADApiFacade.isConnected()) {\r\n            return;\r\n        }\r\n\r\n        if (user.isSignedIn) {\r\n            await ITADApiFacade.sync();\r\n        }\r\n\r\n        const menu = document.querySelector(\".as-menu\");\r\n        if (menu) {\r\n            (new ITADSyncMenu({\r\n                target: menu.parentElement!,\r\n                anchor: menu\r\n            }));\r\n        }\r\n    }\r\n\r\n    static async getInCollection(storeIds: string[]): Promise<Set<string>> {\r\n        const result = new Set<string>();\r\n        if (await ITADApiFacade.isConnected()) {\r\n            const map = await ITADApiFacade.inCollection(storeIds);\r\n            for (let [steamId, value] of Object.entries(map)) {\r\n                if (value) {\r\n                    result.add(steamId);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static async getInWaitlist(storeIds: string[]): Promise<Set<string>> {\r\n        const result = new Set<string>();\r\n        if (await ITADApiFacade.isConnected()) {\r\n            const map = await ITADApiFacade.inWaitlist(storeIds);\r\n            for (let [steamId, value] of Object.entries(map)) {\r\n                if (value) {\r\n                    result.add(steamId);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\n", "import AppId from \"@Core/GameId/AppId\";\r\nimport SubId from \"@Core/GameId/SubId\";\r\nimport BundleId from \"@Core/GameId/BundleId\";\r\nimport {L} from \"@Core/Localization/Localization\";\r\nimport {\r\n    __tag_collection,\r\n    __tag_coupon,\r\n    __tag_ignoredOwned,\r\n    __tag_invGift,\r\n    __tag_invGuestpass,\r\n    __tag_notinterested,\r\n    __tag_owned,\r\n    __tag_waitlist,\r\n    __tag_wishlist,\r\n    __thewordunknown\r\n} from \"@Strings/_strings\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport DynamicStore from \"@Content/Modules/Data/DynamicStore\";\r\nimport ITAD from \"@Content/Modules/ITAD\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport DOMHelper from \"../DOMHelper\";\r\nimport InventoryApiFacade from \"@Content/Modules/Facades/InventoryApiFacade\";\r\n\r\ntype Options = {\r\n    owned: boolean,\r\n    wishlisted: boolean,\r\n    ignored: boolean,\r\n    ignoredOwned: boolean,\r\n    collected: boolean,\r\n    waitlisted: boolean,\r\n    gift: boolean,\r\n    guestPass: boolean,\r\n    coupon: boolean,\r\n}\r\n\r\n/**\r\n * @deprecated\r\n */\r\nexport default class HighlightsTagsUtils {\r\n\r\n    private static _highlightCssLoaded: boolean = false;\r\n    private static _tagCssLoaded: boolean = false;\r\n\r\n    // Note: select the node which has DS info, and traverse later when highlighting if needed\r\n    private static readonly _selector = [\r\n        \".tab_item\", // Item rows on storefront\r\n        \".newonsteam_headercap\", // explore/new/\r\n        \".comingsoon_headercap\", // explore/upcoming/\r\n        \".store_capsule\",\r\n        \".dailydeal_ctn\",\r\n        \".special.special_img_ctn\", // explore/new, cart/\r\n        \".special > .special_img_ctn\",\r\n        \".store_main_capsule\", // Featured & Recommended\r\n        \".home_marketing_message[data-ds-appid]\", // Updates and Offers\r\n        \".home_area_spotlight\", // Special Offers, specials/\r\n        \".curator_giant_capsule\", // Curator Recommendations\r\n        \".home_content_item\", // Recommendations at the bottom of the storefront (small)\r\n        \".home_content.single > .gamelink\", // ...aforementioned (big)\r\n        \".highlighted_app_header\", // curators/\r\n        \"body.dlc_curator #curator_avatar_image\", // Header image on dlc pages\r\n        \".curator_featured .capsule\", // Featured items on curator, developer, publisher, franchise, dlc etc. pages\r\n        \".recommendation\", // Item rows on aforementioned pages (the node to highlight and the parent of .store_capsule, and will get processed first)\r\n        \".search_result_row\",\r\n        \".small_cap\", // \"recommended\" section on app pages\r\n        \".game_area_dlc_row\", // DLC on app pages\r\n        \".browse_tag_game\", // tag/browse (the node to highlight)\r\n        \".recommendation_highlight > .header_image\", // recommended/morelike, recommended/friendactivity/\r\n        \".similar_grid_item\", // recommended/morelike\r\n        \".friend_game_block > .game_capsule\", // recommended/friendactivity/\r\n        \".friendactivity_tab_row\", // recommended/friendactivity/\r\n        \".recommendation_app\", // recommended/byfriends/\r\n        \".recommendation_carousel_item\",\r\n        \".app_header\",\r\n        \".friendplaytime_appheader\",\r\n    ].join(\",\");\r\n\r\n    static highlightTitle(appid: number): Promise<void> {\r\n\r\n        const title = document.querySelector<HTMLElement>(\".apphub_AppName\");\r\n        if (!title) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        title.dataset.dsAppid = String(appid);\r\n\r\n        return this.highlightAndTag([title]);\r\n    }\r\n\r\n    /**\r\n     * Highlights and tags DOM nodes that are owned, wishlisted, ignored, collected, waitlisted\r\n     * or that the user has a gift, a guest pass or coupon for.\r\n     *\r\n     * @param {NodeList|Array} nodes - The nodes that should get highlighted\r\n     * (defaults to all known nodes that are highlightable and taggable)\r\n     * @param {Object} options - Option overrides that should be applied\r\n     * @returns {Promise} - Resolved once the highlighting and tagging completed for the nodes\r\n     */\r\n    static async highlightAndTag(\r\n        nodes: NodeListOf<HTMLElement>|Array<HTMLElement>|undefined = undefined,\r\n        options: Partial<Options> = {}): Promise<void> {\r\n\r\n        const settings = {\r\n            owned:        Settings.highlight_owned         || Settings.tag_owned,\r\n            wishlisted:   Settings.highlight_wishlist      || Settings.tag_wishlist,\r\n            ignored:      Settings.highlight_notinterested || Settings.tag_notinterested,\r\n            ignoredOwned: Settings.highlight_ignored_owned || Settings.tag_ignored_owned,\r\n            collected:    Settings.highlight_collection    || Settings.tag_collection,\r\n            waitlisted:   Settings.highlight_waitlist      || Settings.tag_waitlist,\r\n            gift:         Settings.highlight_inv_gift      || Settings.tag_inv_gift,\r\n            guestPass:    Settings.highlight_inv_guestpass || Settings.tag_inv_guestpass,\r\n            coupon:       Settings.highlight_coupon        || Settings.tag_coupon,\r\n        }\r\n        for (let [key, value] of Object.entries(options) as Array<[keyof Options, boolean]>) {\r\n            settings[key] &&= value;\r\n        }\r\n\r\n        if (!Object.values(settings).some(x => x)) { return; }\r\n\r\n        const _nodes = nodes ?? document.querySelectorAll(this._selector);\r\n        if (_nodes.length === 0) { return; }\r\n\r\n        const appids: number[] = [];\r\n        const storeIdsMap: Map<string, HTMLElement[]> = new Map();\r\n\r\n        for (const node of _nodes) {\r\n            if (node.classList.contains(\"es_highlight_checked\")) { continue; }\r\n            node.classList.add(\"es_highlight_checked\");\r\n\r\n            const aNode = node.querySelector(\"a\");\r\n\r\n            let storeId: string|null = null;\r\n\r\n            const appid = AppId.fromElement(node) ?? AppId.fromElement(aNode);\r\n            if (appid) {\r\n                storeId = `app/${appid}`;\r\n                appids.push(appid)\r\n            } else {\r\n                const subid = SubId.fromElement(node) ?? SubId.fromElement(aNode);\r\n                if (subid) {\r\n                    storeId = `sub/${subid}`;\r\n                } else {\r\n                     const bundleid = BundleId.fromElement(node) ?? BundleId.fromElement(aNode);\r\n                     if (bundleid) {\r\n                         storeId = `bundle/${bundleid}`;\r\n                     }\r\n                }\r\n            }\r\n\r\n            if (storeId) {\r\n                if (storeIdsMap.has(storeId)) {\r\n                    storeIdsMap.get(storeId)!.push(node);\r\n                } else {\r\n                    storeIdsMap.set(storeId, [node]);\r\n                }\r\n            } else {\r\n                console.warn(\"FHighlightsTags: Couldn't find storeId for node %o\", node);\r\n            }\r\n        }\r\n\r\n        const storeIds = Array.from(storeIdsMap.keys());\r\n        if (storeIds.length === 0) { return; }\r\n\r\n        const includeDsInfo = settings.owned || settings.wishlisted || settings.ignored || settings.ignoredOwned;\r\n        const dsStatus = includeDsInfo\r\n            ? await DynamicStore.getAppsStatus(storeIds)\r\n            : {\r\n                ignored: new Set<string>(),\r\n                ignoredOwned: new Set<string>(),\r\n                owned: new Set<string>(),\r\n                wishlisted: new Set<string>()\r\n            };\r\n\r\n        const [inCollection, inWaitlist] = await Promise.all([\r\n            settings.collected ?\r\n                ITAD.getInCollection(storeIds)\r\n                : Promise.resolve(new Set<string>()),\r\n            settings.waitlisted\r\n                ? ITAD.getInWaitlist(storeIds)\r\n                : Promise.resolve(new Set<string>())\r\n        ]);\r\n\r\n        const [\r\n            invGiftAppids,\r\n            invPassAppids,\r\n            invCouponAppids\r\n        ] = await Promise.all([\r\n            settings.gift\r\n                ? InventoryApiFacade.getGiftsAppids(appids)\r\n                : Promise.resolve(new Set<string>()),\r\n            settings.guestPass\r\n                ? InventoryApiFacade.getPassesAppids(appids)\r\n                : Promise.resolve(new Set<string>()),\r\n            settings.coupon\r\n                ? InventoryApiFacade.getCouponsAppids(appids)\r\n                : Promise.resolve(new Set<string>())\r\n        ]);\r\n\r\n\r\n        const actions = {\r\n            owned: <HTMLElement[]>[],\r\n            wishlist: <HTMLElement[]>[],\r\n            ignored: <HTMLElement[]>[],\r\n            ignoredOwned: <HTMLElement[]>[],\r\n            collection: <HTMLElement[]>[],\r\n            waitlist: <HTMLElement[]>[],\r\n            gifts: <HTMLElement[]>[],\r\n            passes: <HTMLElement[]>[],\r\n            coupons: <HTMLElement[]>[],\r\n        };\r\n\r\n        for (const [storeId, nodes] of storeIdsMap) {\r\n            if (settings.owned        && dsStatus.owned.has(storeId))        { actions.owned.push(...nodes); }\r\n            if (settings.wishlisted   && dsStatus.wishlisted.has(storeId))   { actions.wishlist.push(...nodes); }\r\n            if (settings.ignored      && dsStatus.ignored.has(storeId))      { actions.ignored.push(...nodes); }\r\n            if (settings.ignoredOwned && dsStatus.ignoredOwned.has(storeId)) { actions.ignoredOwned.push(...nodes); }\r\n            if (inCollection.has(storeId))    { actions.collection.push(...nodes); }\r\n            if (inWaitlist.has(storeId))      { actions.waitlist.push(...nodes); }\r\n            if (invGiftAppids.has(storeId))   { actions.gifts.push(...nodes); }\r\n            if (invPassAppids.has(storeId))   { actions.passes.push(...nodes); }\r\n            if (invCouponAppids.has(storeId)) { actions.coupons.push(...nodes); }\r\n        }\r\n\r\n        this.highlightOwned(actions.owned);\r\n        this.highlightWishlist(actions.wishlist);\r\n        this.highlightIgnored(actions.ignored);\r\n        this.highlightIgnoredOwnedElsewhere(actions.ignoredOwned);\r\n        this.highlightCollection(actions.collection);\r\n        this.highlightWaitlist(actions.waitlist);\r\n        this.highlightInvGift(actions.gifts);\r\n        this.highlightInvGuestpass(actions.passes);\r\n        this.highlightInvCoupon(actions.coupons);\r\n    }\r\n\r\n    static _addTag(node: HTMLElement, tag: string): void {\r\n\r\n        const locale = {\r\n            owned:         __tag_owned,\r\n            wishlist:      __tag_wishlist,\r\n            coupon:        __tag_coupon,\r\n            inv_gift:      __tag_invGift,\r\n            inv_guestpass: __tag_invGuestpass,\r\n            notinterested: __tag_notinterested,\r\n            ignored_owned: __tag_ignoredOwned,\r\n            waitlist:      __tag_waitlist,\r\n            collection:    __tag_collection,\r\n        }[tag] ?? __thewordunknown;\r\n\r\n        if (!this._tagCssLoaded) {\r\n            this._tagCssLoaded = true;\r\n\r\n            const tagCss = [];\r\n            const colors = {\r\n                owned:         Settings.tag_owned_color,\r\n                wishlist:      Settings.tag_wishlist_color,\r\n                coupon:        Settings.tag_coupon_color,\r\n                inv_gift:      Settings.tag_inv_gift_color,\r\n                inv_guestpass: Settings.tag_inv_guestpass_color,\r\n                notinterested: Settings.tag_notinterested_color,\r\n                ignored_owned: Settings.tag_ignored_owned_color,\r\n                waitlist:      Settings.tag_waitlist_color,\r\n                collection:    Settings.tag_collection_color,\r\n            };\r\n\r\n            for (const [name, color] of Object.entries(colors)) {\r\n                tagCss.push(`.es_tag_${name} { background-color: ${color}; }`);\r\n            }\r\n\r\n            DOMHelper.insertCSS(tagCss.join(\"\\n\"));\r\n        }\r\n\r\n        // Add the tags container if needed\r\n        let container = node.querySelector(\".es_tags\");\r\n        if (!container) {\r\n            container = document.createElement(\"div\");\r\n            container.classList.add(\"es_tags\");\r\n            if (Settings.tag_short) {\r\n                container.classList.add(\"es_tags_short\");\r\n            }\r\n\r\n            if (node.classList.contains(\"tab_item\")) {\r\n                node.querySelector(\".tab_item_details\")!.prepend(container);\r\n            } else if (node.classList.contains(\"store_main_capsule\")) {\r\n                node.querySelector(\".platforms\")!.prepend(container);\r\n            } else if (node.classList.contains(\"newonsteam_headercap\") || node.classList.contains(\"comingsoon_headercap\")) {\r\n                node.querySelector(\".discount_block\")!.before(container);\r\n            } else if (node.classList.contains(\"search_result_row\")) {\r\n                node.querySelector(\".search_name > div\")!.prepend(container);\r\n            } else if (node.classList.contains(\"browse_tag_game\")) {\r\n                node.querySelector(\".browse_tag_game_price\")!.after(container);\r\n            } else if (node.classList.contains(\"game_area_dlc_row\")) {\r\n                // Must check discount block first\r\n                const priceNode = node.querySelector(\".discount_block\") || node.querySelector(\".game_area_dlc_price\");\r\n                priceNode!.prepend(container);\r\n            } else if (node.classList.contains(\"wishlist_row\")) {\r\n                node.querySelector(\".addedon\")!.prepend(container);\r\n            } else if (node.classList.contains(\"match_app\")) {\r\n                node.querySelector(\".match_subtitle\")!.prepend(container);\r\n            } else if (node.classList.contains(\"header_image\")) {\r\n                node.parentNode!.querySelector(\".highlight_description\")!.prepend(container);\r\n            } else if (node.classList.contains(\"similar_grid_item\")) {\r\n                node.querySelector(\".regular_price, .discount_block\")!.append(container);\r\n            } else if (node.classList.contains(\"recommendation_carousel_item\")) {\r\n                node.querySelector(\".buttons\")!.before(container);\r\n            } else if (node.classList.contains(\"friendplaytime_game\")) {\r\n                node.querySelector(\".friendplaytime_buttons\")!.before(container);\r\n            }\r\n        }\r\n\r\n        HTML.beforeEnd(container, `<span class=\"es_tag_${tag}\">${L(locale)}</span>`);\r\n    }\r\n\r\n    static _highlightNode(node: HTMLElement, type: string): void {\r\n\r\n        if (Settings.highlight_excludef2p) {\r\n            let _node = node.querySelector<HTMLElement>(\"[data-ds-tagids]\") ?? node.closest<HTMLElement>(\"[data-ds-tagids]\");\r\n            // Check for the \"Free to Play\" tag\r\n            if (_node && JSON.parse(_node.dataset.dsTagids!).includes(113)) { return; }\r\n            // Check if the price is \"Free\", only works for English users\r\n            _node = node.querySelector(\".discount_final_price, .regular_price, .search_price, .game_area_dlc_price, .browse_tag_game_price\");\r\n            if (_node && /\\bFree\\b/.test(_node.textContent ?? \"\")) { return; }\r\n        }\r\n\r\n        if (!this._highlightCssLoaded) {\r\n            this._highlightCssLoaded = true;\r\n\r\n            const hlCss = [];\r\n\r\n            /*\r\n             * NOTE: the sequence of these entries determines the precendence of the highlights!\r\n             * The later it appears in the array, the higher its precedence\r\n             */\r\n            const colors = {\r\n                ignored_owned: Settings.highlight_ignored_owned_color,\r\n                notinterested: Settings.highlight_notinterested_color,\r\n                waitlist:      Settings.highlight_waitlist_color,\r\n                wishlist:      Settings.highlight_wishlist_color,\r\n                collection:    Settings.highlight_collection_color,\r\n                owned:         Settings.highlight_owned_color,\r\n                coupon:        Settings.highlight_coupon_color,\r\n                inv_guestpass: Settings.highlight_inv_guestpass_color,\r\n                inv_gift:      Settings.highlight_inv_gift_color,\r\n            };\r\n\r\n            for (const [name, color] of Object.entries(colors)) {\r\n                hlCss.push(\r\n                    `.es_highlighted_${name} {\r\n                        background: ${color} linear-gradient(135deg, rgba(0, 0, 0, 0.70) 10%, rgba(0, 0, 0, 0) 100%) !important;\r\n                    }\r\n                    .curator_giant_capsule.es_highlighted_${name},\r\n                    .blotter_userstatus_game.es_highlighted_${name},\r\n                    #curator_avatar_image.es_highlighted_${name} .curator_avatar,\r\n                    .app_header.es_highlighted_${name} {\r\n                        outline: solid ${color};\r\n                    }\r\n                    .apphub_AppName.es_highlighted_${name} {\r\n                        background: none !important; color: ${color};\r\n                    }`\r\n                );\r\n            }\r\n\r\n            DOMHelper.insertCSS(hlCss.join(\"\\n\"));\r\n        }\r\n\r\n        // Find the node to highlight if needed\r\n        let nodeToHighlight: HTMLElement|null = node;\r\n\r\n        if (node.classList.contains(\"item\")) {\r\n            nodeToHighlight = node.querySelector<HTMLElement>(\".info\");\r\n        } else if (node.classList.contains(\"home_area_spotlight\")) {\r\n            nodeToHighlight = node.querySelector(\".spotlight_content\");\r\n        } else if (node.classList.contains(\"special_img_ctn\") && node.parentElement?.classList.contains(\"special\")) {\r\n            nodeToHighlight = node.parentElement;\r\n        } else if (node.classList.contains(\"store_capsule\")) {\r\n            if (node.parentElement?.classList.contains(\"steam_curator_recommendation\")\r\n                && node.parentElement?.classList.contains(\"big\")) {\r\n                // curators/ (larger store capsule)\r\n                nodeToHighlight = node.nextElementSibling as HTMLElement;\r\n            } else if (node.parentNode?.parentElement?.classList.contains(\"curations\")) {\r\n                nodeToHighlight = node.parentElement;\r\n            }\r\n        } else if (\r\n            // Small game capsules on activity page (e.g. when posting a status about a game)\r\n            node.classList.contains(\"blotter_userstats_game\")\r\n            || node.classList.contains(\"gamelink\")\r\n            || node.classList.contains(\"recommendation_app\")\r\n            || node.classList.contains(\"header_image\")\r\n            || node.classList.contains(\"game_capsule\")\r\n            || node.classList.contains(\"highlighted_app_header\")\r\n            || node.classList.contains(\"friendplaytime_appheader\")\r\n        ) {\r\n            nodeToHighlight = node.parentNode as HTMLElement;\r\n        }\r\n\r\n        nodeToHighlight?.classList.add(\"es_highlighted\", `es_highlighted_${type}`);\r\n\r\n        // Remove DS flags\r\n        node.querySelectorAll<HTMLElement>(\".ds_flag\").forEach((node: HTMLElement) => node.remove());\r\n        node.querySelectorAll<HTMLElement>(\".ds_flagged\").forEach((node: HTMLElement) => node.classList.remove(\"ds_flagged\"));\r\n        node.classList.remove(\"ds_flagged\");\r\n    }\r\n\r\n    private static _highlightItems(nodes: Iterable<HTMLElement>, name: string, tag: boolean, highlight: boolean): void {\r\n        for (const node of nodes) {\r\n            if (highlight) {\r\n                try {\r\n                    this._highlightNode(node, name);\r\n                } catch (err) {\r\n                    console.error(\"Failed to highlight node\", err);\r\n                }\r\n            }\r\n\r\n            if (tag) {\r\n                try {\r\n                    this._addTag(node, name);\r\n                } catch (err) {\r\n                    console.error(\"Failed to tag node\", err);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static highlightOwned(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"owned\",\r\n            Settings.tag_owned,\r\n            Settings.highlight_owned\r\n        );\r\n    }\r\n\r\n    private static highlightWishlist(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"wishlist\",\r\n            Settings.tag_wishlist,\r\n            Settings.highlight_wishlist\r\n        );\r\n    }\r\n\r\n    private static highlightInvCoupon(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"coupon\",\r\n            Settings.tag_coupon,\r\n            Settings.highlight_coupon\r\n        );\r\n    }\r\n\r\n    private static highlightInvGift(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"inv_gift\",\r\n            Settings.tag_inv_gift,\r\n            Settings.highlight_inv_gift\r\n        );\r\n    }\r\n\r\n    private static highlightInvGuestpass(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"inv_guestpass\",\r\n            Settings.tag_inv_guestpass,\r\n            Settings.highlight_inv_guestpass\r\n        );\r\n    }\r\n\r\n    private static highlightIgnored(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"notinterested\",\r\n            Settings.tag_notinterested,\r\n            Settings.highlight_notinterested\r\n        );\r\n    }\r\n\r\n    private static highlightIgnoredOwnedElsewhere(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"ignored_owned\",\r\n            Settings.tag_ignored_owned,\r\n            Settings.highlight_ignored_owned\r\n        );\r\n    }\r\n\r\n    private static highlightCollection(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"collection\",\r\n            Settings.tag_collection,\r\n            Settings.highlight_collection\r\n        );\r\n    }\r\n\r\n    private static highlightWaitlist(nodes: Iterable<HTMLElement>): void {\r\n        this._highlightItems(nodes, \"waitlist\",\r\n            Settings.tag_waitlist,\r\n            Settings.highlight_waitlist\r\n        );\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport DynamicStore from \"@Content/Modules/Data/DynamicStore\";\r\nimport HighlightsTagsUtils from \"@Content/Modules/Highlights/HighlightsTagsUtils\";\r\nimport type CStoreBase from \"@Content/Features/Store/Common/CStoreBase\";\r\n\r\nexport default class FHighlightsTags extends Feature<CStoreBase> {\r\n\r\n    async apply(): Promise<void> {\r\n        await DynamicStore.onReady();\r\n        await HighlightsTagsUtils.highlightAndTag();\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CStoreBase from \"@Content/Features/Store/Common/CStoreBase\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport ExtensionResources from \"@Core/ExtensionResources\";\r\nimport ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\n\r\nexport default class FAlternativeLinuxIcon extends Feature<CStoreBase> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.show_alternative_linux_icon;\r\n    }\r\n\r\n    override apply(): void {\r\n        const url = ExtensionResources.getURL(\"img/alternative_linux_icon.png\");\r\n\r\n        let cssText = \"\";\r\n\r\n        // react page, alternatively, use react class: .wIs-huKXogw-.EdGS6nZmIig-\r\n        cssText += `\r\n            span[title*='Linux'] svg {\r\n              visibility:hidden\r\n            }\r\n            span[title*='Linux']:has(svg) {\r\n              background-image: url(${url});\r\n              background-repeat: no-repeat;\r\n              background-position: center;\r\n            }\r\n        `;\r\n\r\n        // legacy\r\n        cssText += `\r\n            span.platform_img.linux {\r\n              background-image: url(${url}) !important;\r\n            }\r\n        `;\r\n\r\n        if (this.context.type === ContextType.STORE_FRONT) {\r\n            cssText += `\r\n              .tab_item.focus .tab_item_details span.platform_img.linux {\r\n                filter: brightness(0%);\r\n              }\r\n            `;\r\n        }\r\n\r\n        DOMHelper.insertCSS(cssText);\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CStoreBase from \"@Content/Features/Store/Common/CStoreBase\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\n\r\nexport default class FSkipGotSteamDialog extends Feature<CStoreBase> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.skip_got_steam;\r\n    }\r\n\r\n    override apply(): void {\r\n        // https://github.com/SteamDatabase/SteamTracking/blob/cdf367ce61926a896fe54d710b3ed25d66d7e333/store.steampowered.com/public/javascript/game.js#L1785\r\n        DOMHelper.insertScript(\"scriptlets/Store/Common/skipGotSteamDialog.js\");\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport type CStoreBase from \"@Content/Features/Store/Common/CStoreBase\";\r\n\r\nexport default class FHorizontalScrolling extends Feature<CStoreBase> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.horizontalscrolling;\r\n    }\r\n\r\n    apply() {\r\n\r\n        for (const node of document.querySelectorAll<HTMLElement>(\".slider_ctn:not(.spotlight)\")) {\r\n            this._initHorizontalScroll(\r\n                node.parentNode!.querySelector<HTMLElement>(\"#highlight_strip, .store_horizontal_autoslider_ctn\")!,\r\n                node.querySelector<HTMLElement>(\".slider_left\")!,\r\n                node.querySelector<HTMLElement>(\".slider_right\")!,\r\n            );\r\n        }\r\n    }\r\n\r\n    private _initHorizontalScroll(\r\n        parentNode: HTMLElement,\r\n        controlLeftNode: HTMLElement,\r\n        controlRightNode: HTMLElement\r\n    ): void {\r\n\r\n        let lastScroll = 0;\r\n\r\n        parentNode.addEventListener(\"wheel\", e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            if (Date.now() - lastScroll < 200) { return; }\r\n            lastScroll = Date.now();\r\n\r\n            const isScrollDown = e.deltaY > 0;\r\n            if (isScrollDown) {\r\n                controlRightNode.click();\r\n            } else {\r\n                controlLeftNode.click();\r\n            }\r\n        });\r\n    }\r\n}\r\n", "import ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport type CBase from \"@Content/Features/Common/CBase\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\nexport default class FHideTrademarks extends Feature<CBase> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.hidetmsymbols;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        // TODO I would try to reduce number of selectors here\r\n        let selectors = \"title, .apphub_AppName, .breadcrumbs, h1, h4\";\r\n        if (this.context.type === ContextType.STORE_DEFAULT) {\r\n            selectors\r\n                += \".game_area_already_owned, .details_block, .game_description_snippet, \"\r\n                + \".game_area_description p, .glance_details, .game_area_dlc_bubble game_area_bubble, .package_contents, \"\r\n                + \".game_area_dlc_name, .tab_desc, .tab_item_name\";\r\n        } else {\r\n            selectors\r\n                += \".game_suggestion, .appHubShortcut_Title, .apphub_CardContentNewsTitle, \"\r\n                + \".apphub_CardTextContent, .apphub_CardContentAppName, .apphub_AppName\";\r\n        }\r\n\r\n        // Replaces \"R\", \"C\" and \"TM\" signs\r\n        function replaceSymbols(node: Element) {\r\n\r\n            // tfedor I don't trust this won't break any inline JS\r\n            if (!node || !node.innerHTML) { return; }\r\n            HTML.inner(node, node.innerHTML.replace(/[\\u00AE\\u00A9\\u2122]/g, \"\"));\r\n        }\r\n\r\n        for (const node of document.querySelectorAll(selectors)) {\r\n            replaceSymbols(node);\r\n        }\r\n\r\n        const observer = new MutationObserver(mutations => {\r\n            mutations.forEach(mutation => {\r\n                mutation.addedNodes.forEach(node => {\r\n                    replaceSymbols(<Element>node);\r\n                });\r\n            });\r\n        });\r\n\r\n        const nodes = document.querySelectorAll(\"#game_select_suggestions,#search_suggestion_contents,.tab_content_ctn\");\r\n        for (const node of nodes) {\r\n            observer.observe(node, {\"childList\": true, \"subtree\": true});\r\n        }\r\n    }\r\n}\r\n", "import type CBase from \"@Content/Features/Common/CBase\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\nexport default class FDisableLinkFilter extends Feature<CBase> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.disablelinkfilter;\r\n    }\r\n\r\n    override apply(): void {\r\n\r\n        document.addEventListener(\"click\", (e: MouseEvent) => {\r\n            if (!e.target) { return; }\r\n\r\n            const target = e.target as HTMLElement;\r\n            if (target.tagName !== \"A\") { return; }\r\n\r\n            const href = (<HTMLAnchorElement>target).href;\r\n            if (!/\\/linkfilter\\//.test(href)) { return; }\r\n\r\n            const params = new URL(href).searchParams;\r\n            // TODO \"url\" param was used prior to 11/2023, remove after some time\r\n            const url = params.get(\"u\") ?? params.get(\"url\");\r\n            if (!url) { return; }\r\n\r\n            // Skip censored links (has '\u2665')\r\n            if (url.includes(\"%E2%99%A5\")) { return; }\r\n\r\n            e.preventDefault();\r\n\r\n            // TODO check whether it's safe to just directly edit e.target.href\r\n            window.location.href = url;\r\n        });\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport type CBase from \"@Content/Features/Common/CBase\";\r\nimport type CRegisterKey from \"@Content/Features/Store/RegisterKey/CRegisterKey\";\r\n\r\nexport default class FKeepSSACheckboxState extends Feature<CBase|CRegisterKey> {\r\n\r\n    override apply(): void {\r\n\r\n        const selector = [\r\n            \"input#market_sell_dialog_accept_ssa\",\r\n            \"input#market_buyorder_dialog_accept_ssa\",\r\n            \"input#accept_ssa\",\r\n        ].join(\",\");\r\n\r\n        for (const node of document.querySelectorAll<HTMLInputElement>(selector)) {\r\n            node.checked = Settings.keepssachecked;\r\n\r\n            node.addEventListener(\"click\", () => {\r\n                Settings.keepssachecked = node.checked;\r\n            });\r\n        }\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CBase from \"@Content/Features/Common/CBase\";\r\nimport Settings from \"@Options/Data/Settings\";\r\n\r\nexport default class FDefaultCommunityTab extends Feature<CBase> {\r\n\r\n    override checkPrerequisites(): boolean {\r\n        return Settings.community_default_tab !== \"\"; // Default value is an empty string\r\n    }\r\n\r\n    override apply(): void {\r\n        const tab = Settings.community_default_tab;\r\n\r\n        const links = document.querySelectorAll<HTMLAnchorElement>(\"a[href^='https://steamcommunity.com/app/']\");\r\n        for (const link of links) {\r\n            if (link.classList.contains(\"apphub_sectionTab\")) { continue; }\r\n            if (!/^\\/app\\/[0-9]+\\/?$/.test(link.pathname)) { continue; }\r\n            if (!link.pathname.endsWith(\"/\")) {\r\n                link.pathname += \"/\";\r\n            }\r\n            link.pathname += `${tab}/`;\r\n        }\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport type ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport Errors from \"@Core/Errors/Errors\";\r\nimport type Language from \"@Core/Localization/Language\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\n\r\nexport interface ContextParams {\r\n    language: Language|null,\r\n    user: UserInterface\r\n}\r\n\r\nexport default class Context {\r\n\r\n    public readonly language: Language|null = null;\r\n    public readonly user: UserInterface;\r\n    public readonly type: ContextType;\r\n\r\n    private readonly featureMap: Map<Function, Feature<Context>> = new Map();\r\n    private readonly promiseMap: Map<Function, Promise<boolean>> = new Map();\r\n    private readonly dependencies: Map<Function, Map<Function, boolean>> = new Map();\r\n\r\n    private stats = {\r\n        completed: 0,\r\n        failed: 0,\r\n        dependency: 0,\r\n    };\r\n\r\n    public static async create(_params: ContextParams): Promise<Context|null> {\r\n        // left for overrides, when init requires async things to finish because we can't await constructor\r\n        // TODO we should move all instantiation to init, make constructor private, probably?\r\n        return null;\r\n    }\r\n\r\n    constructor(\r\n        params: ContextParams,\r\n        type: ContextType,\r\n        features: (typeof Feature<Context>)[]\r\n    ) {\r\n        this.language = params.language;\r\n        this.user = params.user;\r\n        this.type = type;\r\n\r\n        for (let ref of features) {\r\n            // @ts-ignore\r\n            const feature = new ref(this);\r\n            this.featureMap.set(feature.constructor, feature)\r\n        }\r\n    }\r\n\r\n    dependency(dependent: Function, ...dependencies: Array<[Function, boolean]>) {\r\n        this.dependencies.set(dependent, new Map(dependencies));\r\n    }\r\n\r\n    async applyFeatures(): Promise<void> {\r\n\r\n        let promises = [...this.featureMap.values()].map(feature => this.getFeaturePromise(feature));\r\n        await Promise.allSettled(promises);\r\n\r\n        console.log(\r\n            \"Feature loading complete, %i successfully loaded, %i failed to load, %i didn't load due to dependency errors\",\r\n            this.stats.completed,\r\n            this.stats.failed,\r\n            this.stats.dependency\r\n        );\r\n    }\r\n\r\n    private getFeaturePromise(feature: Feature<Context>): Promise<boolean> {\r\n        const func = feature.constructor;\r\n\r\n        let promise = this.promiseMap.get(func);\r\n        if (!promise) {\r\n            promise = this.applyInternal(feature);\r\n            this.promiseMap.set(func, promise);\r\n\r\n        }\r\n        return promise;\r\n    }\r\n\r\n    private async applyInternal(feature: Feature<Context>): Promise<boolean> {\r\n        const func = feature.constructor;\r\n\r\n        const dependencies = this.dependencies.get(func);\r\n        if (dependencies) {\r\n            try {\r\n                let promises = [];\r\n                for (let [dependencyFunc, weak] of dependencies) {\r\n                    promises.push((async () => {\r\n                        const dependency = this.featureMap.get(dependencyFunc);\r\n                        if (!dependency) {\r\n                            throw new Errors.FeatureDependencyError(\"Dependency feature not found\", dependencyFunc.name);\r\n                        }\r\n                        let pass = await this.getFeaturePromise(dependency);\r\n                        return weak || pass;\r\n                    })());\r\n                }\r\n\r\n                if (!(await Promise.all(promises)).every(res => res)) {\r\n                    return false;\r\n                }\r\n            } catch(e) {\r\n                console.warn(\r\n                    \"Not applying feature %s due to an error in the dependency chain\",\r\n                    func.name\r\n                );\r\n                ++this.stats.dependency;\r\n            }\r\n        }\r\n\r\n        let pass = Boolean(await feature.checkPrerequisites());\r\n        if (pass) {\r\n            try {\r\n                await feature.apply();\r\n                ++this.stats.completed;\r\n            } catch(e) {\r\n                const featureName = func.name;\r\n\r\n                console.group(featureName);\r\n                console.error(\"Error while applying feature %s\", featureName);\r\n                console.error(e);\r\n                console.groupEnd();\r\n\r\n                ++this.stats.failed;\r\n                throw new Errors.FeatureDependencyError(\"Failed to apply\", featureName);\r\n            }\r\n        }\r\n        return pass;\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {onMount} from \"svelte\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__earlyAccess} from \"@Strings/_strings\";\r\n\r\n    export let imageUrl: string;\r\n    export let imgHeader: HTMLImageElement;\r\n\r\n    let container: HTMLSpanElement;\r\n\r\n    onMount(() => {\r\n        container.append(imgHeader);\r\n    });\r\n</script>\r\n\r\n\r\n<span bind:this={container} class=\"es_overlay_container\">\r\n    <span class=\"es_overlay\">\r\n        <img title={L(__earlyAccess)} src={imageUrl} alt=\"Early Access banner\">\r\n    </span>\r\n</span>\r\n\r\n\r\n<style>\r\n    :global(.home_content_item) .es_overlay_container,\r\n    :global(.small_cap) .es_overlay_container,\r\n    :global(.special.special_img_ctn) .es_overlay_container,\r\n    :global(.game_capsule_ctn) .es_overlay_container,\r\n    :global(.review_app_actions .gameLogoHolder_default) .es_overlay_container {\r\n        position: relative;\r\n        display: inherit;\r\n    }\r\n\r\n    :global(.store_capsule) .es_overlay_container {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: auto;\r\n        vertical-align: top;\r\n    }\r\n    :global(.store_capsule) .es_overlay_container > :global(img) {\r\n        width: 100%;\r\n    }\r\n\r\n    .es_overlay,\r\n    .es_overlay img {\r\n        position: absolute;\r\n        z-index: 4; /* Should be lower than .ds_flag (currently 5) */\r\n        width: auto !important;\r\n        height: 60%;\r\n        min-height: 35px;\r\n        max-height: 120px;\r\n    }\r\n    .es_overlay img {\r\n        position: relative;\r\n        height: 100% !important;\r\n    }\r\n\r\n    :global(.home_content.single) .es_overlay {\r\n        z-index: 11;\r\n    }\r\n    :global(.gameListRowLogo) .es_overlay,\r\n    :global(.game_capsule_ctn) .es_overlay {\r\n        height: 70%;\r\n    }\r\n    :global(.gameLogo) .es_overlay {\r\n        height: 50%;\r\n    }\r\n    :global(.curator_featured) .es_overlay {\r\n        height: 25%;\r\n    }\r\n</style>\r\n", "import EarlyAccess from \"./EarlyAccess.svelte\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport AppId from \"@Core/GameId/AppId\";\r\nimport Language from \"@Core/Localization/Language\";\r\nimport ExtensionResources from \"@Core/ExtensionResources\";\r\nimport AugmentedSteamApiFacade from \"@Content/Modules/Facades/AugmentedSteamApiFacade\";\r\n\r\nexport default class EarlyAccessUtils {\r\n\r\n    // TODO support React-based sales pages, curator lists, etc.\r\n    private static readonly storeSelectors = [\r\n        \".tab_item\", // Item rows on storefront\r\n        \".newonsteam_headercap\", // explore/new\r\n        \".comingsoon_headercap\", // explore/upcoming\r\n        \".store_capsule\",\r\n        \".dailydeal_ctn\",\r\n        \".special.special_img_ctn\", // explore/new, cart/\r\n        /*\r\n         * These use CSS backgrounds instead of img elements, unsupported for now\r\n         * \".store_main_capsule\", // Featured & Recommended\r\n         * \".home_marketing_message\", // Updates and Offers\r\n         */\r\n        \".home_area_spotlight\", // Special Offers, specials/\r\n        \".curator_giant_capsule\", // Curator Recommendations\r\n        \".home_content_item\", // Recommendations at the bottom of the storefront (small)\r\n        \".home_content.single > .gamelink\", // ...aforementioned (big)\r\n        \".highlighted_app_header\", // curators/\r\n        \"body.dlc_curator #curator_avatar_image\", // Header image on dlc pages\r\n        \".curator_featured .capsule\", // Featured items on curator, developer, publisher, franchise, dlc etc. pages\r\n        \".search_result_row\",\r\n        \".small_cap\", // \"recommended\" section on app pages\r\n        \".browse_tag_game_cap\", // tag/browse\r\n        \".recommendation_highlight > .header_image\", // recommended/morelike, recommended/friendactivity/\r\n        \".similar_grid_item\", // recommended/morelike\r\n        \".friend_game_block > .game_capsule\", // recommended/friendactivity/\r\n        \".friendactivity_tab_row\", // recommended/friendactivity/\r\n        \".recommendation_app\", // recommended/byfriends/\r\n        \".recommendation_carousel_item\",\r\n        \".app_header\",\r\n        \".friendplaytime_appheader\",\r\n    ];\r\n\r\n    private static readonly communitySelectors = [\r\n        // Selectors for Profile Home are split out due to issues with running them on my/edit/showcases\r\n        \".gameLogo\", // Various game community pages e.g. global/personal achievements\r\n        \".blotter_gamepurchase_logo\", // activity home\r\n        \".gameLogoHolder_default\", // activity home, individual reviews\r\n        \".game_capsule_ctn\", // reviews list\r\n    ];\r\n\r\n    private static readonly selector = (window.location.hostname === \"store.steampowered.com\" ? this.storeSelectors : this.communitySelectors)\r\n        .join(\",\");\r\n\r\n    public static async show(language: Language|null, nodes?: NodeListOf<HTMLElement>|Array<HTMLElement>): Promise<void> {\r\n        if (!Settings.show_early_access || !language) { return; }\r\n\r\n        const _nodes: NodeListOf<HTMLElement>|Array<HTMLElement> = nodes ?? document.querySelectorAll(this.selector);\r\n        if (_nodes.length === 0) { return; }\r\n\r\n        // TODO add missing images for supported locales\r\n        let imageName = \"img/overlay/early_access_banner_english.png\";\r\n        if (language.isOneOf(\r\n            \"brazilian\",\r\n            \"french\",\r\n            \"italian\",\r\n            \"japanese\",\r\n            \"koreana\",\r\n            \"polish\",\r\n            \"portuguese\",\r\n            \"russian\",\r\n            \"schinese\",\r\n            \"spanish\",\r\n            \"latam\",\r\n            \"tchinese\",\r\n            \"thai\"\r\n        )) {\r\n            imageName = `img/overlay/early_access_banner_${language.name}.png`;\r\n        }\r\n\r\n        const imageUrl = ExtensionResources.getURL(imageName);\r\n\r\n        for (const node of await this.getEaNodes(_nodes)) {\r\n\r\n            /*\r\n             * TODO It's possible a child element has been checked already, remove when not needed\r\n             * e.g. duplicate elements on the storefront (More Curator Recommendations)\r\n             * and when called with the same arguments as highlighting (observing changes in CStoreBase)\r\n             */\r\n            if (node.querySelector(\".es_overlay_container\") !== null) { continue; }\r\n\r\n            node.classList.add(\"es_early_access\");\r\n\r\n            const imgHeader = node.querySelector(\"img\");\r\n            if (!imgHeader) { continue; }\r\n\r\n            new EarlyAccess({\r\n                target: imgHeader.parentElement!,\r\n                anchor: imgHeader, // Render the component \"before\" the original image\r\n                props: {\r\n                    imageUrl,\r\n                    imgHeader,\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    static async getEaNodes(nodes: Iterable<HTMLElement>): Promise<HTMLElement[]> {\r\n\r\n        const appidsMap: Map<number, HTMLElement[]> = new Map();\r\n\r\n        for (const node of nodes) {\r\n            if (node.classList.contains(\"es_ea_checked\")) {\r\n                continue;\r\n            }\r\n            node.classList.add(\"es_ea_checked\");\r\n\r\n            // Skip the live streams section since the thumbnail is shown on top\r\n            if (node.classList.contains(\"store_capsule\") && node.querySelector(\".capsule[id^=broadcast]\") !== null) {\r\n                continue;\r\n            }\r\n\r\n            let appid = AppId.fromElement(node)\r\n                || AppId.fromElement(node.querySelector<HTMLAnchorElement>(\"a\"))\r\n                || AppId.fromElement(node.querySelector<HTMLImageElement>(\"img\"));\r\n\r\n            if (appid) {\r\n                const nodes = (appidsMap.get(appid) ?? []);\r\n                nodes.push(node);\r\n                appidsMap.set(appid, nodes);\r\n            } else {\r\n                // console.warn(\"FEarlyAccess: Couldn't find appid for node %o\", node);\r\n            }\r\n        }\r\n\r\n        if (appidsMap.size === 0) {\r\n            return [];\r\n        }\r\n\r\n        const eaStatus = await AugmentedSteamApiFacade.isEarlyAccess([...appidsMap.keys()]);\r\n\r\n        return Array.from(appidsMap).flatMap(([appid, nodesArray]) => {\r\n            return eaStatus[appid] ? nodesArray : [];\r\n        });\r\n    }\r\n}\r\n", "import type CBase from \"@Content/Features/Common/CBase\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport EarlyAccessUtils from \"@Content/Modules/EarlyAccess/EarlyAccessUtils\";\r\n\r\nexport default class FEarlyAccess extends Feature<CBase> {\r\n\r\n    public override async apply(): Promise<void> {\r\n        await EarlyAccessUtils.show(this.context.language);\r\n    }\r\n}\r\n", "import FHideTrademarks from \"./FHideTrademarks\";\r\nimport FDisableLinkFilter from \"./FDisableLinkFilter\";\r\nimport FKeepSSACheckboxState from \"./FKeepSSACheckboxState\";\r\nimport FDefaultCommunityTab from \"./FDefaultCommunityTab\";\r\nimport Context, {type ContextParams} from \"@Content/Modules/Context/Context\";\r\nimport ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport type Feature from \"@Content/Modules/Context/Feature\";\r\nimport FEarlyAccess from \"@Content/Features/Common/FEarlyAccess\";\r\n\r\nexport default class CBase extends Context {\r\n\r\n    constructor(\r\n        params: ContextParams,\r\n        type: ContextType,\r\n        features: (typeof Feature<Context>)[] = []\r\n    ) {\r\n\r\n        features.push(\r\n            FEarlyAccess,\r\n            FHideTrademarks,\r\n            FDisableLinkFilter,\r\n            FKeepSSACheckboxState,\r\n            FDefaultCommunityTab,\r\n        );\r\n\r\n        super(params, type, features);\r\n    }\r\n}\r\n", "import FHighlightsTags from \"../../Common/FHighlightsTags\";\r\nimport FAlternativeLinuxIcon from \"./FAlternativeLinuxIcon\";\r\nimport FSkipGotSteamDialog from \"./FSkipGotSteamDialog\";\r\nimport FHorizontalScrolling from \"./FHorizontalScrolling\";\r\nimport CBase from \"@Content/Features/Common/CBase\";\r\nimport ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport HighlightsTagsUtils from \"@Content/Modules/Highlights/HighlightsTagsUtils\";\r\nimport EarlyAccessUtils from \"@Content/Modules/EarlyAccess/EarlyAccessUtils\";\r\nimport type Feature from \"@Content/Modules/Context/Feature\";\r\nimport Context, {type ContextParams} from \"@Content/Modules/Context/Context\";\r\n\r\nexport default class CStoreBase extends CBase {\r\n\r\n    constructor(\r\n        params: ContextParams,\r\n        type = ContextType.STORE_DEFAULT,\r\n        features: (typeof Feature<Context>)[] = []\r\n    ) {\r\n        features.push(\r\n            FHighlightsTags,\r\n            FAlternativeLinuxIcon,\r\n            FSkipGotSteamDialog,\r\n            FHorizontalScrolling,\r\n        );\r\n\r\n        super(params, type, features);\r\n\r\n        this._observeChanges();\r\n    }\r\n\r\n    getAllSubids(): string[] {\r\n        const result: string[] = [];\r\n        for (const node of document.querySelectorAll<HTMLInputElement>(\"input[name=subid]\")) {\r\n            if (node.value) {\r\n                result.push(node.value);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private _observeChanges(): void {\r\n\r\n        // search box on the navigation bar\r\n        const searchBox = document.querySelector(\"#search_suggestion_contents\");\r\n        if (searchBox) {\r\n            new MutationObserver(mutations => {\r\n                const nodes = Array.from(mutations[0]!.addedNodes as NodeListOf<HTMLElement>)\r\n                    .filter(el => el.classList.contains(\"match_app\"));\r\n\r\n                this.decorateStoreCapsules(nodes);\r\n            }).observe(searchBox, {\"childList\": true});\r\n        }\r\n\r\n        // genre, category, tags etc. pages\r\n        const tabContent = document.querySelector(\".tab_content_ctn\");\r\n        if (tabContent) {\r\n            new MutationObserver(mutations => {\r\n                for (const mutation of mutations) {\r\n                    const addedNodes = mutation.addedNodes as NodeListOf<HTMLElement>;\r\n                    if (addedNodes.length > 1) {\r\n                        const nodes = Array.from(addedNodes)\r\n                            .filter(el => el instanceof Element && el.classList.contains(\"tab_item\"));\r\n\r\n                        this.decorateStoreCapsules(nodes);\r\n                    }\r\n                }\r\n            }).observe(tabContent, {\"childList\": true, \"subtree\": true});\r\n\r\n            return;\r\n        }\r\n\r\n        // recommended/friendactivity\r\n        const friendactivityTab = document.querySelector(\"#friendactivity_tabarea\");\r\n        if (friendactivityTab) {\r\n            new MutationObserver(mutations => {\r\n                for (const mutation of mutations) {\r\n                    const addedNodes = mutation.addedNodes as NodeListOf<HTMLElement>;\r\n                    if (addedNodes.length > 1) {\r\n                        const nodes = Array.from(addedNodes)\r\n                            .filter(el => el instanceof Element\r\n                                && el.querySelector<HTMLElement>(\".friendactivity_game_link\") !== null);\r\n\r\n                        this.decorateStoreCapsules(nodes);\r\n                    }\r\n                }\r\n            }).observe(friendactivityTab, {\"childList\": true, \"subtree\": true});\r\n\r\n            return;\r\n        }\r\n\r\n        const container = document.querySelector([\r\n            \"#tag_browse_games_ctn\", // tag/browse\r\n            \"#RecommendationsRows\", // curator, developer, publisher, franchise, dlc etc. pages\r\n            \"#CuratorsRows\", // curators/recommendedcurators\r\n        ].join(\",\"));\r\n\r\n        if (container) {\r\n            new MutationObserver(mutations => {\r\n                for (const {addedNodes} of mutations) {\r\n                    if (addedNodes.length > 0 && addedNodes[0] instanceof Element) {\r\n                        const nodes = addedNodes[0].querySelectorAll<HTMLElement>(\".browse_tag_game, .store_capsule, .recommendation\");\r\n                        this.decorateStoreCapsules(nodes);\r\n                    }\r\n                }\r\n            }).observe(container, {\"childList\": true, \"subtree\": true});\r\n        }\r\n    }\r\n\r\n    decorateStoreCapsules(nodes: NodeListOf<HTMLElement>|Array<HTMLElement>): void {\r\n        HighlightsTagsUtils.highlightAndTag(nodes);\r\n        EarlyAccessUtils.show(this.language, nodes);\r\n    }\r\n}\r\n", "import {L} from \"@Core/Localization/Localization\";\r\nimport {\r\n    __addFullgameToWaitlist,\r\n    __addFullgameToWishlist,\r\n    __addToWaitlist,\r\n    __addToWishlist,\r\n    __onWaitlist,\r\n    __onWishlistAndWaitlist,\r\n    __removeFromWaitlistTooltip,\r\n    __removeFromWishlistAndWaitlistTooltip,\r\n    __removeFullgameFromWaitlistTooltip,\r\n    __removeFullgameFromWishlistAndWaitlistTooltip,\r\n    __theworddefault,\r\n    __wishlist,\r\n} from \"@Strings/_strings\";\r\nimport Feature from \"@Content/Modules/Context/Feature\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport ITADApiFacade from \"@Content/Modules/Facades/ITADApiFacade\";\r\nimport HTML from \"@Core/Html/Html\";\r\nimport ExtensionResources from \"@Core/ExtensionResources\";\r\nimport SteamFacade from \"@Content/Modules/Facades/SteamFacade\";\r\nimport DOMHelper from \"@Content/Modules/DOMHelper\";\r\nimport AppId from \"@Core/GameId/AppId\";\r\n\r\nexport default class FWaitlistDropdown extends Feature<CApp> {\r\n\r\n    override async checkPrerequisites(): Promise<boolean> {\r\n        return Settings.add_to_waitlist\r\n            && document.querySelector(\"#add_to_wishlist_area\") !== null\r\n            && (await ITADApiFacade.isConnected());\r\n    }\r\n\r\n    override async apply(): Promise<void> {\r\n\r\n        const parent = document.querySelector<HTMLElement>(\".queue_actions_ctn\");\r\n        if (!parent) {\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * Link a demo app's appid to its parent appid.\r\n         * Steam does so when wishlisting, but we'll use the real appid for convenience.\r\n         */\r\n        let appid: number = this.context.appid;\r\n        let storeid: string = this.context.storeid;\r\n\r\n        const isDemoApp = document.querySelector(\"img[src$='/ico_demo.gif']\") !== null;\r\n        if (isDemoApp) {\r\n            const communityBtn = document.querySelector<HTMLAnchorElement>(\"a[href^='https://steamcommunity.com/app/']\");\r\n            if (communityBtn) {\r\n                appid = AppId.fromUrl(communityBtn.href)!;\r\n                storeid = `app/${appid}`;\r\n            }\r\n        }\r\n\r\n        const wishlistArea = parent.querySelector<HTMLElement>(\"#add_to_wishlist_area\")!;\r\n        const wishlistSuccessArea = parent.querySelector<HTMLElement>(\"#add_to_wishlist_area_success\")!;\r\n\r\n        // Remove Steam's temp notice and native dropdown menu\r\n        for (const node of wishlistSuccessArea.querySelectorAll(\":scope > div\")) {\r\n            node.remove();\r\n        }\r\n\r\n        /*\r\n         * Creating a common parent for #add_to_wishlist_area and #add_to_wishlist_area_success\r\n         * makes it easier to apply the dropdown menu\r\n         */\r\n        HTML.beforeBegin(wishlistArea,\r\n            `<div style=\"position: relative; display: inline-block;\">\r\n                <div class=\"queue_control_button as_btn_wishlist\"></div>\r\n            </div>`);\r\n\r\n        const wrapper = parent.querySelector(\".as_btn_wishlist\")!;\r\n        wrapper.append(wishlistArea, wishlistSuccessArea);\r\n\r\n        HTML.afterEnd(wrapper,\r\n            `<div class=\"queue_control_button queue_btn_menu as_btn_wishlist_menu\">\r\n                <div class=\"queue_menu_arrow btn_medium\">\r\n                    <span><img src=\"//store.cloudflare.steamstatic.com/public/images/v6/btn_arrow_down_padded.png\"></span>\r\n                </div>\r\n                <div class=\"queue_menu_flyout\">\r\n                    <div class=\"queue_menu_flyout_content\">\r\n                        <div class=\"queue_menu_option\" id=\"queue_menu_option_on_wishlist\">\r\n                            <div>\r\n                                <img class=\"queue_ignore_menu_option_image selected\" src=\"//store.cloudflare.steamstatic.com/public/images/v6/ico/ico_selected_bright.png\">\r\n                                <img class=\"queue_ignore_menu_option_image unselected\" src=\"//store.cloudflare.steamstatic.com/public/images/v6/ico/ico_unselected_bright.png\">\r\n                            </div>\r\n                            <div class=\"queue_menu_option_label\">\r\n                                <div class=\"option_title\">${L(__wishlist)} (${L(__theworddefault)})</div>\r\n                                <div class=\"option_subtitle\">${isDemoApp ? L(__addFullgameToWishlist) : L(__addToWishlist)}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"queue_menu_option\" id=\"queue_menu_option_on_waitlist\">\r\n                            <div>\r\n                                <img class=\"queue_ignore_menu_option_image selected\" src=\"//store.cloudflare.steamstatic.com/public/images/v6/ico/ico_selected_bright.png\">\r\n                                <img class=\"queue_ignore_menu_option_image unselected\" src=\"//store.cloudflare.steamstatic.com/public/images/v6/ico/ico_unselected_bright.png\">\r\n                            </div>\r\n                            <div class=\"queue_menu_option_label\">\r\n                                <div class=\"option_title\">Waitlist</div>\r\n                                <div class=\"option_subtitle\">${isDemoApp ? L(__addFullgameToWaitlist) : L(__addToWaitlist)}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>`);\r\n\r\n        const removeBtn = wishlistSuccessArea.querySelector(\"a\")!;\r\n        const addBtn = wishlistArea.querySelector(\"a\")!;\r\n\r\n        // Add hover/loading images\r\n        const imgNode = removeBtn.querySelector(\"img\")!;\r\n        imgNode.classList.add(\"es-in-wl\");\r\n        HTML.beforeBegin(imgNode,\r\n            `<img class=\"es-remove-wl\" src=\"${ExtensionResources.getURL(\"img/remove.png\")}\">\r\n            <img class=\"es-loading-wl\" src=\"//community.cloudflare.steamstatic.com/public/images/login/throbber.gif\">`);\r\n\r\n        // Trailing whitespace intended to separate image and text\r\n        HTML.afterBegin(addBtn.querySelector(\"span\"), `<img class=\"es-loading-wl\" src=\"//community.cloudflare.steamstatic.com/public/images/login/throbber.gif\"> `);\r\n\r\n        // Check response of ajax calls before updating button status\r\n        DOMHelper.insertScript(\"scriptlets/Store/App/wishlistHandlers.js\");\r\n\r\n        let wishlisted: boolean = wishlistArea.style.display === \"none\";\r\n        let waitlisted: boolean = (await ITADApiFacade.inWaitlist([storeid]))[storeid] ?? false;\r\n\r\n        const menu = parent.querySelector(\".as_btn_wishlist_menu\")!;\r\n        const menuArrow = menu.querySelector(\".queue_menu_arrow\")!;\r\n        const wishlistOption = parent.querySelector(\"#queue_menu_option_on_wishlist\")!;\r\n        const waitlistOption = parent.querySelector(\"#queue_menu_option_on_waitlist\")!;\r\n\r\n        // Native localized text\r\n        const removeFromWishlistLabel = wishlistSuccessArea.querySelector(\"span\")!.lastChild!.textContent!;\r\n        const removeFromWishlistTooltip = wishlistSuccessArea.querySelector(\"a\")!.dataset.tooltipText;\r\n\r\n        function updateDiv() {\r\n            parent!.classList.remove(\"loading\");\r\n\r\n            const oneActive = wishlisted || waitlisted;\r\n\r\n            menuArrow.classList.toggle(\"queue_btn_active\", oneActive);\r\n\r\n            menu.classList.toggle(\"on_wishlist\", wishlisted);\r\n            menu.classList.toggle(\"on_waitlist\", waitlisted);\r\n\r\n            wishlistArea.style.display = oneActive ? \"none\" : \"\";\r\n            wishlistSuccessArea.style.display = oneActive ? \"\" : \"none\";\r\n\r\n            let text: string|undefined = undefined;\r\n            let tooltip: string|undefined = undefined;\r\n            if (wishlisted && !waitlisted) {\r\n                text = removeFromWishlistLabel;\r\n                tooltip = removeFromWishlistTooltip;\r\n            } else if (!wishlisted && waitlisted) {\r\n                text = L(__onWaitlist);\r\n                tooltip = isDemoApp ? L(__removeFullgameFromWaitlistTooltip) : L(__removeFromWaitlistTooltip);\r\n            } else if (wishlisted && waitlisted) {\r\n                text = L(__onWishlistAndWaitlist);\r\n                tooltip = isDemoApp ? L(__removeFullgameFromWishlistAndWaitlistTooltip) : L(__removeFromWishlistAndWaitlistTooltip);\r\n            } else {\r\n                tooltip = removeFromWishlistTooltip;\r\n            }\r\n\r\n            if (text) {\r\n                wishlistSuccessArea.querySelector(\"span\")!.lastChild!.textContent = ` ${text}`;\r\n            }\r\n\r\n            removeBtn.dataset.tooltipText = tooltip;\r\n\r\n            // Tooltips by default are stored internally by jQuery, so replace it after changing the attribute\r\n            SteamFacade.vTooltip(\"#add_to_wishlist_area_success > a\");\r\n        }\r\n\r\n        updateDiv();\r\n\r\n        // Click add-to-wishlist, only add to wishlist\r\n        addBtn.addEventListener(\"click\", async() => {\r\n            if (parent.classList.contains(\"loading\")) { return; }\r\n            parent.classList.add(\"loading\");\r\n\r\n            await new Promise<void>(resolve => {\r\n                // @ts-expect-error\r\n                document.addEventListener(\"addRemoveWishlist\", (e: CustomEvent<boolean>) => {\r\n                    if (e.detail) {\r\n                        wishlisted = !wishlisted;\r\n                        updateDiv();\r\n                    } else {\r\n                        parent.classList.remove(\"loading\");\r\n                    }\r\n                    resolve();\r\n                }, {once: true});\r\n            });\r\n        });\r\n\r\n        // Click remove-from-wishlist, remove from both wishlist and waitlist\r\n        removeBtn.addEventListener(\"click\", async(e) => {\r\n            if (!wishlisted) {\r\n                // Prevent default action if item is only waitlisted\r\n                e.preventDefault();\r\n            }\r\n\r\n            if (parent.classList.contains(\"loading\")) { return; }\r\n            parent.classList.add(\"loading\");\r\n\r\n            if (wishlisted) {\r\n                await new Promise<void>(resolve => {\r\n                    // @ts-expect-error\r\n                    document.addEventListener(\"addRemoveWishlist\", (e: CustomEvent<boolean>) => {\r\n                        if (e.detail) {\r\n                            wishlisted = !wishlisted;\r\n                        }\r\n                        resolve();\r\n                    }, {once: true});\r\n                });\r\n            }\r\n\r\n            if (waitlisted) {\r\n                await ITADApiFacade.removeFromWaitlist(appid);\r\n                waitlisted = !waitlisted;\r\n            }\r\n\r\n            updateDiv();\r\n        });\r\n\r\n        wishlistOption.addEventListener(\"click\", async() => {\r\n            if (parent.classList.contains(\"loading\")) { return; }\r\n            parent.classList.add(\"loading\");\r\n\r\n            /**\r\n             * For removing, use Steam's method so wishlist count is updated and dynamic store cache invalidated.\r\n             * For adding, dispatching a click event to execute the inline `javascript:` link in `addBtn` is a CSP violation under MV3,\r\n             * so call Steam's method directly.\r\n             */\r\n\r\n            await new Promise<void>(resolve => {\r\n                // @ts-expect-error\r\n                document.addEventListener(\"addRemoveWishlist\", (e: CustomEvent<boolean>) => {\r\n                    if (e.detail) {\r\n                        wishlisted = !wishlisted;\r\n                        updateDiv();\r\n                    } else {\r\n                        parent.classList.remove(\"loading\");\r\n                    }\r\n                    resolve();\r\n                }, {once: true});\r\n\r\n                if (wishlisted) {\r\n                    SteamFacade.removeFromWishlist(\r\n                        appid,\r\n                        \"add_to_wishlist_area_success\",\r\n                        \"add_to_wishlist_area\",\r\n                        \"add_to_wishlist_area_fail\"\r\n                    );\r\n                } else {\r\n                    SteamFacade.addToWishlist(\r\n                        appid,\r\n                        \"add_to_wishlist_area\",\r\n                        \"add_to_wishlist_area_success\",\r\n                        \"add_to_wishlist_area_fail\"\r\n                    );\r\n                }\r\n            });\r\n        });\r\n\r\n        waitlistOption.addEventListener(\"click\", async() => {\r\n            if (parent.classList.contains(\"loading\")) { return; }\r\n            parent.classList.add(\"loading\");\r\n\r\n            if (waitlisted) {\r\n                await ITADApiFacade.removeFromWaitlist(appid);\r\n            } else {\r\n                await ITADApiFacade.addToWaitlist(appid);\r\n            }\r\n\r\n            waitlisted = !waitlisted;\r\n            updateDiv();\r\n        });\r\n    }\r\n}\r\n", "import Feature from \"@Content/Modules/Context/Feature\";\r\nimport DynamicStore from \"@Content/Modules/Data/DynamicStore\";\r\nimport HighlightsTagsUtils from \"@Content/Modules/Highlights/HighlightsTagsUtils\";\r\nimport type CApp from \"@Content/Features/Store/App/CApp\";\r\n\r\nexport default class FHighlightTitle extends Feature<CApp> {\r\n\r\n    async apply(): Promise<void> {\r\n        await DynamicStore.onReady();\r\n        await HighlightsTagsUtils.highlightTitle(this.context.appid);\r\n    }\r\n}\r\n", "import AppId from \"@Core/GameId/AppId\";\r\nimport FMediaExpander from \"../../Common/FMediaExpander\";\r\nimport FCustomizer from \"../Common/FCustomizer\";\r\nimport FDRMWarnings from \"../Common/FDRMWarnings\";\r\nimport FITADPrices from \"../Common/FITADPrices\";\r\nimport FRegionalPricing from \"../Common/FRegionalPricing\";\r\nimport FAchievementBar from \"./FAchievementBar\";\r\nimport FAStatsLink from \"./FAStatsLink\";\r\nimport FBadgeProgress from \"./FBadgeProgress\";\r\nimport FDemoAbovePurchase from \"./FDemoAbovePurchase\";\r\nimport FDLCCheckboxes from \"./FDLCCheckboxes\";\r\nimport FDLCInfo from \"./FDLCInfo\";\r\nimport FFamilySharingNotice from \"./FFamilySharingNotice\";\r\nimport FForceMP4 from \"./FForceMP4\";\r\nimport FFullscreenScreenshotView from \"./FFullscreenScreenshotView\";\r\nimport FHDPlayer from \"./FHDPlayer\";\r\nimport FHideReportedTags from \"./FHideReportedTags\";\r\nimport FHowLongToBeat from \"./FHowLongToBeat\";\r\nimport FMetacriticUserScore from \"./FMetacriticUserScore\";\r\nimport FNewQueue from \"./FNewQueue\";\r\nimport FOpenCritic from \"./FOpenCritic\";\r\nimport FOwnedActionsButtons from \"./FOwnedActionsButtons\";\r\nimport FOwnedElsewhere from \"./FOwnedElsewhere\";\r\nimport FPackageInfoButton from \"./FPackageInfoButton\";\r\nimport FPackBreakdown from \"./FPackBreakdown\";\r\nimport FPatchHighlightPlayer from \"./FPatchHighlightPlayer\";\r\nimport FPlayers from \"./FPlayers\";\r\nimport FPurchaseDate from \"./FPurchaseDate\";\r\nimport FRemoveBroadcasts from \"./FRemoveBroadcasts\";\r\nimport FRemoveDupeScreenshots from \"./FRemoveDupeScreenshots\";\r\nimport FReplaceDevPubLinks from \"./FReplaceDevPubLinks\";\r\nimport FReviewToggleButton from \"./FReviewToggleButton\";\r\nimport FSaveReviewFilters from \"./FSaveReviewFilters\";\r\nimport FShowCoupon from \"./FShowCoupon\";\r\nimport FSteamPeek from \"./FSteamPeek\";\r\nimport FSupportInfo from \"./FSupportInfo\";\r\nimport FUserNotes from \"./FUserNotes\";\r\nimport FWidescreenCertification from \"./FWidescreenCertification\";\r\nimport ContextType from \"@Content/Modules/Context/ContextType\";\r\nimport FExtraLinksApp from \"@Content/Features/Store/Common/FExtraLinksApp\";\r\nimport FExtraLinksAppError from \"@Content/Features/Store/Common/FExtraLinksAppError\";\r\nimport CStoreBase from \"@Content/Features/Store/Common/CStoreBase\";\r\nimport AugmentedSteamApiFacade from \"@Content/Modules/Facades/AugmentedSteamApiFacade\";\r\nimport type {TStorePageData} from \"@Background/Modules/AugmentedSteam/_types\";\r\nimport FWaitlistDropdown from \"@Content/Features/Store/App/FWaitlistDropdown\";\r\nimport FHighlightTitle from \"@Content/Features/Store/App/FHighlightTitle\";\r\nimport type {ContextParams} from \"@Content/Modules/Context/Context\";\r\n\r\nexport default class CApp extends CStoreBase {\r\n\r\n    public readonly appid: number;\r\n    public readonly storeid: string;\r\n    public readonly communityAppid: number = 0;\r\n    public readonly appName: string = \"\";\r\n\r\n    public readonly metalink: string|null = null;\r\n    public readonly hasAchievements: boolean = false;\r\n\r\n    public readonly isOwned: boolean = false;\r\n    public readonly isOwnedAndPlayed: boolean = false;\r\n\r\n    public readonly isDlc: boolean = false;\r\n    public readonly isDlcLike: boolean = false;\r\n\r\n    public readonly isVideoOrHardware: boolean = false;\r\n\r\n    public readonly data: Promise<TStorePageData|null> = Promise.resolve(null);\r\n\r\n    constructor(params: ContextParams) {\r\n\r\n        // Check if there's an error message (e.g. region-locked, age-gated)\r\n        const isErrorPage = document.getElementById(\"error_box\") !== null;\r\n\r\n        super(params, ContextType.APP, isErrorPage\r\n            ? [\r\n                FExtraLinksAppError\r\n            ] : [\r\n                FReplaceDevPubLinks,\r\n                FForceMP4,\r\n                FHDPlayer,\r\n                FUserNotes,\r\n                FWaitlistDropdown,\r\n                FNewQueue,\r\n                FFullscreenScreenshotView,\r\n                FShowCoupon,\r\n                FITADPrices,\r\n                FDLCInfo,\r\n                FDRMWarnings,\r\n                FMetacriticUserScore,\r\n                FOpenCritic,\r\n                FOwnedElsewhere,\r\n                FPurchaseDate,\r\n                FSteamPeek,\r\n                FWidescreenCertification,\r\n                FHowLongToBeat,\r\n                FExtraLinksApp,\r\n                FFamilySharingNotice,\r\n                FPackBreakdown,\r\n                FPackageInfoButton,\r\n                FPlayers,\r\n                FCustomizer,\r\n                FDLCCheckboxes,\r\n                FBadgeProgress,\r\n                FAStatsLink,\r\n                FAchievementBar,\r\n                FRegionalPricing,\r\n                FReviewToggleButton,\r\n                FOwnedActionsButtons,\r\n                FSupportInfo,\r\n                FMediaExpander,\r\n                FRemoveBroadcasts,\r\n                FDemoAbovePurchase,\r\n                FSaveReviewFilters,\r\n                FHideReportedTags,\r\n                FPatchHighlightPlayer,\r\n                FRemoveDupeScreenshots,\r\n                FHighlightTitle\r\n            ]);\r\n\r\n        this.appid = AppId.fromUrl(window.location.host + window.location.pathname)!;\r\n        this.storeid = `app/${this.appid}`;\r\n\r\n        if (isErrorPage) {\r\n            return;\r\n        }\r\n\r\n        // Some games (e.g. 201270, 201271) have different appid in store page and community\r\n        this.communityAppid = AppId.fromCDNUrl(\r\n            document.querySelector<HTMLImageElement>(\".apphub_AppIcon img\")?.src ?? \"\"\r\n        ) ?? this.appid;\r\n\r\n        this.appName = document.querySelector(\".apphub_AppName\")?.textContent ?? \"\";\r\n\r\n        this.metalink = document.querySelector<HTMLAnchorElement>(\"#game_area_metalink a\")?.href ?? null;\r\n\r\n        // #achievement_block is also used for point shop items\r\n        this.hasAchievements = document.querySelector(\".communitylink_achievement_images\") !== null;\r\n\r\n        this.isOwned = document.querySelector(\".game_area_already_owned\") !== null;\r\n        this.isOwnedAndPlayed = this.isOwned && document.querySelector(\"#my_activity\") !== null;\r\n\r\n        this.isDlc = document.querySelector(\".game_area_dlc_bubble\") !== null;\r\n        this.isDlcLike = this.isDlc || document.querySelector(\".game_area_soundtrack_bubble\") !== null;\r\n\r\n        const category = new URLSearchParams(\r\n            document.querySelector<HTMLAnchorElement>(\".breadcrumbs a\")?.search\r\n        ).get(\"category1\");\r\n\r\n        /**\r\n         * `true` for non-application items, or if system requirements section is missing (usually hardware)\r\n         * Previous check for videos:\r\n         * document.querySelector(\".game_area_purchase_game span[class*=streaming], div.series_seasons\") !== null;\r\n         */\r\n        this.isVideoOrHardware = category === \"992\" || category === \"993\" || !document.querySelector(\".sys_req\");\r\n\r\n        this.data = AugmentedSteamApiFacade.getStorePageData(this.appid)\r\n            .catch(e => {\r\n                console.error(e);\r\n                return null;\r\n            });\r\n\r\n        // FPackBreakdown skips purchase options with a package info button to avoid false positives\r\n        this.dependency(FPackageInfoButton, [FPackBreakdown, true]);\r\n\r\n        // FHDPlayer needs to wait for mp4 sources to be set\r\n        this.dependency(FHDPlayer, [FForceMP4, true]);\r\n    }\r\n\r\n    /**\r\n     * @param videoEl - the video element\r\n     * @param {boolean} setHD - set HD or SD source\r\n     * @param {boolean} [force] - force set source, only current use is in FForceMP4, where we need to set mp4 source regardless of HD\r\n     */\r\n    toggleVideoDefinition(videoEl: HTMLVideoElement, setHD: boolean, force: boolean = false): void {\r\n        const container = videoEl.parentNode as HTMLElement;\r\n        container.classList.toggle(\"es_playback_hd\", setHD);\r\n\r\n        // Return early if there's nothing to do, i.e. setting HD while the video is already in HD, and vice versa\r\n        const isHD = videoEl.src === videoEl.dataset.hdSrc;\r\n        if (!force && (setHD === isHD)) { return; }\r\n\r\n        const useWebM = /\\.webm/.test(videoEl.dataset.hdSrc!); // `false` if browser doesn't support webm, or if \"force mp4\" feature is enabled\r\n        const isVisible = container.offsetHeight > 0 && container.offsetWidth > 0;\r\n\r\n        // https://github.com/SteamDatabase/SteamTracking/blob/4da99e29581ba6628ad5ce24c50856703aea71a2/store.steampowered.com/public/javascript/gamehighlightplayer.js#L1055-L1067\r\n        const position = videoEl.currentTime || 0;\r\n        videoEl.pause();\r\n        videoEl.preload = \"metadata\";\r\n\r\n        videoEl.addEventListener(\"loadedmetadata\", () => {\r\n            videoEl.currentTime = position;\r\n\r\n            if (isVisible) {\r\n                videoEl.play();\r\n            }\r\n        }, {\"once\": true});\r\n\r\n        if (setHD) {\r\n            videoEl.src = useWebM ? container.dataset.webmHdSource! : container.dataset.mp4HdSource!;\r\n        } else {\r\n            videoEl.src = useWebM ? container.dataset.webmSource! : container.dataset.mp4Source!;\r\n        }\r\n\r\n        videoEl.load();\r\n    }\r\n}\r\n", "import Settings, {SettingsStore} from \"@Options/Data/Settings\";\r\nimport DOMPurify, {type Config} from \"dompurify\";\r\n\r\nlet initialized = false;\r\n\r\n/**\r\n * DOMPurify setup\r\n * @see https://github.com/cure53/DOMPurify\r\n */\r\nexport default async function() {\r\n\r\n    if (initialized) { return; }\r\n    initialized = true;\r\n\r\n    await SettingsStore.init();\r\n    const allowOpenInNewTab = Settings.openinnewtab;\r\n\r\n    /*\r\n     * NOTE FOR ADDON REVIEWER:\r\n     * We are modifying default DOMPurify settings to allow other protocols in URLs\r\n     * and to allow links to safely open in new tabs.\r\n     *\r\n     * We took the original Regex and added chrome-extension://, moz-extension:// and steam://\r\n     * First two are needed for linking local resources from extension,\r\n     * steam:// protocol is used by Steam store to open their own client (e.g. when you want to launch a game).\r\n     *\r\n     * The addition of the `target` attribute to the allowed attributes is done in order to be able to open links in a new tab.\r\n     * We only allow target=\"_blank\" while adding rel=\"noreferrer noopener\" to prevent child window to access window.opener\r\n     * as described in https://www.jitbit.com/alexblog/256-targetblank---the-most-underestimated-vulnerability-ever/\r\n     */\r\n\r\n    const purifyConfig: Config = {\r\n        \"ALLOWED_URI_REGEXP\": /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|chrome-extension|moz-extension|steam):|[^a-z]|[a-z+.-]+(?:[^a-z+.\\-:]|$))/i\r\n    };\r\n\r\n    if (allowOpenInNewTab) {\r\n        purifyConfig.ADD_ATTR = [\"target\"];\r\n\r\n        DOMPurify.addHook(\"uponSanitizeAttribute\", (node, data) => {\r\n            if (data.attrName === \"target\") {\r\n                if (data.attrValue === \"_blank\") {\r\n                    node.setAttribute(\"rel\", \"noreferrer noopener\");\r\n                } else {\r\n                    data.keepAttr = false;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    DOMPurify.setConfig(purifyConfig);\r\n}\r\n", "// This is the basic configuration for the Augmented Steam extension\r\n\r\nexport default {\r\n    ApiServerHost: \"https://api.augmentedsteam.com\",\r\n    PublicHost: \"https://augmentedsteam.com\",\r\n    ITADApiServerHost: \"https://api.isthereanydeal.com\",\r\n    ITADServer: \"https://isthereanydeal.com\",\r\n    ITADClientId: \"5fe78af07889f43a\",\r\n    ITADDiscord: \"https://discord.gg/yn57q7f\",\r\n} as const;\r\n", "export enum ContextType {\r\n    Unknown,\r\n    Background,\r\n    ContentScript,\r\n    Options,\r\n    Offscreen\r\n}\r\n\r\nexport default class Environment {\r\n\r\n    private static currentContext: ContextType = ContextType.Unknown;\r\n\r\n    public static set CurrentContext(context: ContextType) {\r\n        this.currentContext = context;\r\n    }\r\n\r\n    static isBackgroundScript(): boolean {\r\n        return this.currentContext === ContextType.Background;\r\n    }\r\n\r\n    static isContentScript(): boolean {\r\n        return this.currentContext === ContextType.ContentScript;\r\n    }\r\n\r\n    static isOptions(): boolean {\r\n        return this.currentContext === ContextType.Options;\r\n    }\r\n}\r\n", "import Environment from \"@Core/Environment\";\r\n\r\nexport default class CookieReader {\r\n\r\n    private static cache: Map<string, string>|null;\r\n\r\n    private static load(): void {\r\n        this.cache = new Map<string, string>();\r\n\r\n        if (!Environment.isBackgroundScript() && typeof document !== \"undefined\") {\r\n            for (let [key, val] of <[string, string][]>document.cookie.split(\";\").map(kv => kv.split(\"=\", 2))) {\r\n                key = key.trim();\r\n                this.cache.set(key, decodeURIComponent(val));\r\n            }\r\n        }\r\n    }\r\n\r\n    static get(name: string, defaultValue: string|null = null): string|null {\r\n        if (this.cache === null) {\r\n            this.load();\r\n        }\r\n        return this.cache!.get(name.trim()) ?? defaultValue;\r\n    }\r\n}\r\n", "import Language from \"@Core/Localization/Language\";\r\nimport CookieReader from \"@Core/Storage/CookieReader\";\r\nimport type AppConfig from \"@Core/AppConfig/AppConfig\";\r\n\r\nexport default class LanguageFactory {\r\n\r\n    constructor(\r\n        private readonly config: AppConfig\r\n    ) {}\r\n\r\n    createFromLegacy(): Language|null {\r\n\r\n        if (this.config.language) {\r\n            return new Language(this.config.language);\r\n        }\r\n\r\n        for (const script of document.querySelectorAll<HTMLScriptElement>(\"script[src]\")) {\r\n            const language = new URL(script.src).searchParams.get(\"l\");\r\n            if (language) {\r\n                return new Language(language);\r\n            }\r\n        }\r\n\r\n        // last resort, try cookie\r\n        const cookie = CookieReader.get(\"Steam_Language\", null);\r\n        if (cookie) {\r\n            return new Language(cookie);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    createFromReact(): Language|null {\r\n        if (this.config.language) {\r\n            return new Language(this.config.language);\r\n        }\r\n\r\n        return null;\r\n    }\r\n}", "import HTMLParser from \"@Core/Html/HtmlParser\";\r\nimport StringUtils from \"@Core/Utils/StringUtils\";\r\nimport SteamStoreApiFacade from \"@Content/Modules/Facades/SteamStoreApiFacade\";\r\nimport RequestData from \"@Content/Modules/RequestData\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\n\r\nexport default class LegacyUser implements UserInterface {\r\n\r\n    private _signedIn: boolean = false;\r\n    private _steamId: string|undefined;\r\n    private _storeCountry: string|undefined;\r\n    private _profileUrl: string|undefined;\r\n    private _profilePath: string|undefined;\r\n\r\n    private _sessionId: string|null|undefined;\r\n    private _webApiToken: string|undefined;\r\n\r\n    set isSignedIn(value: boolean) {\r\n        this._signedIn = value;\r\n    }\r\n\r\n    get isSignedIn(): boolean {\r\n        return this._signedIn;\r\n    }\r\n\r\n    set steamId(value: string) {\r\n        this._steamId = value;\r\n    }\r\n\r\n    get steamId(): string {\r\n        return this._steamId!;\r\n    }\r\n\r\n    set storeCountry(value: string) {\r\n        this._storeCountry = value;\r\n    }\r\n\r\n    get storeCountry(): string {\r\n        let country;\r\n\r\n        const params = new URLSearchParams(window.location.search);\r\n        if (params.has(\"cc\")) {\r\n            // Support overrides, though this only works when logged out now\r\n            country = params.get(\"cc\");\r\n        } else {\r\n            country = this._storeCountry;\r\n        }\r\n\r\n        if (!country) {\r\n            console.warn(\"Failed to detect store country, falling back to US\");\r\n            country = \"US\";\r\n        }\r\n\r\n        return country;\r\n    }\r\n\r\n    set profileUrl(value: string) {\r\n        this._profileUrl = value;\r\n    }\r\n\r\n    get profileUrl(): string {\r\n        return this._profileUrl!;\r\n    }\r\n\r\n    set profilePath(value: string) {\r\n        this._profilePath = value;\r\n    }\r\n\r\n    get profilePath(): string {\r\n        return this._profilePath!;\r\n    }\r\n\r\n    get sessionId(): string|null {\r\n        if (!this._sessionId) {\r\n            this._sessionId = HTMLParser.getStringVariable(\"g_sessionID\");\r\n        }\r\n        return this._sessionId;\r\n    }\r\n\r\n    /*\r\n     * Fetch the user's web api token to use in new style WebAPI calls (Services)\r\n     * https://github.com/Revadike/UnofficialSteamWebAPI/wiki/Get-Points-Summary-Config\r\n     * Works on both store and community, but only returns the store token\r\n     */\r\n    async getWebApiToken(): Promise<string> {\r\n        if (!this._webApiToken) {\r\n            const response = await RequestData.getJson<{\r\n                success?: boolean,\r\n                data?: {\r\n                    webapi_token?: string\r\n                }\r\n            }>(`${window.location.origin}/pointssummary/ajaxgetasyncconfig`);\r\n\r\n            if (!response.success || !response.data?.webapi_token) {\r\n                throw new Error(\"Failed to get webapi token\");\r\n            }\r\n\r\n            this._webApiToken = response.data.webapi_token;\r\n        }\r\n\r\n        return this._webApiToken;\r\n    }\r\n}\r\n\r\n", "import HTMLParser from \"@Core/Html/HtmlParser\";\r\nimport StringUtils from \"@Core/Utils/StringUtils\";\r\nimport SteamStoreApiFacade from \"@Content/Modules/Facades/SteamStoreApiFacade\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\n\r\nexport default class ReactUser implements UserInterface {\r\n\r\n    private _signedIn: boolean = false;\r\n    private _steamId: string|undefined;\r\n    private _storeCountry: string|undefined;\r\n    private _profileUrl: string|undefined;\r\n    private _profilePath: string|undefined;\r\n    private _sessionId: string|null|undefined;\r\n    private _webApiToken: string|undefined;\r\n\r\n    get isSignedIn(): boolean {\r\n        return !!this._steamId;\r\n    }\r\n\r\n    set steamId(value: string) {\r\n        this._steamId = value;\r\n    }\r\n\r\n    get steamId(): string {\r\n        return this._steamId!;\r\n    }\r\n\r\n    set storeCountry(value: string) {\r\n        this._storeCountry = value;\r\n    }\r\n\r\n    get storeCountry(): string {\r\n        return this._storeCountry!;\r\n    }\r\n\r\n    get profileUrl(): string {\r\n        return `https://steamcommunity.com${this.profilePath}`\r\n    }\r\n\r\n    get profilePath(): string {\r\n        return `/profiles/${this.steamId}/`\r\n    }\r\n\r\n    get sessionId(): string|null {\r\n        throw new Error(\"Not supported\");\r\n    }\r\n\r\n    set webApiToken(value: string | undefined) {\r\n        this._webApiToken = value;\r\n    }\r\n\r\n    async getWebApiToken(): Promise<string> {\r\n        return this._webApiToken!;\r\n    }\r\n}\r\n\r\n", "import HTMLParser from \"@Core/Html/HtmlParser\";\r\nimport SteamCommunityApiFacade from \"@Content/Modules/Facades/SteamCommunityApiFacade\";\r\nimport LegacyUser from \"@Core/User/LegacyUser\";\r\nimport type AppConfig from \"@Core/AppConfig/AppConfig\";\r\nimport ReactUser from \"@Core/User/ReactUser\";\r\n\r\nexport default class UserFactory {\r\n\r\n    constructor(\r\n        private readonly appConfig: AppConfig\r\n    ) {}\r\n\r\n    async createFromLegacy(): Promise<LegacyUser> {\r\n        const user = new LegacyUser();\r\n\r\n        const avatarNode = document.querySelector<HTMLAnchorElement>(\"#global_actions > a.user_avatar\");\r\n\r\n        try {\r\n            if (avatarNode) {\r\n                user.profileUrl = avatarNode.href;\r\n                user.profilePath = avatarNode.pathname;\r\n\r\n                const login = await SteamCommunityApiFacade.login(user.profilePath);\r\n                user.isSignedIn = true;\r\n                user.steamId = login.steamId;\r\n            } else {\r\n                await SteamCommunityApiFacade.logout();\r\n            }\r\n        } catch(e) {\r\n            console.log(e);\r\n        }\r\n\r\n        try {\r\n            let country = await SteamCommunityApiFacade.getStoreCountry();\r\n            if (country) {\r\n                user.storeCountry = country;\r\n                return user;\r\n            }\r\n\r\n            let newCountry: string|null = null;\r\n\r\n            // Check config first since it's the fastest and present on most pages\r\n            const config = document.querySelector<HTMLElement>(\"#webui_config, #application_config\");\r\n            if (config) {\r\n                newCountry = config.dataset.config\r\n                    ? JSON.parse(config.dataset.config).COUNTRY\r\n                    : null;\r\n            } else if (window.location.hostname === \"steamcommunity.com\") {\r\n                // This variable is present on market-related pages\r\n                newCountry = HTMLParser.getStringVariable(\"g_strCountryCode\");\r\n            } else {\r\n                newCountry = HTMLParser.getStringVariable(/GDynamicStore\\.Init\\(.+?,\\s*'([A-Z]{2})'/);\r\n            }\r\n\r\n            if (!newCountry) {\r\n                throw new Error(\"Script with user store country not found\");\r\n            }\r\n\r\n            user.storeCountry = newCountry;\r\n            await SteamCommunityApiFacade.setStoreCountry(newCountry);\r\n        } catch(e) {\r\n            console.group(\"Store country detection\");\r\n            console.warn(\"Failed to detect store country from page\");\r\n            console.error(e);\r\n            console.groupEnd();\r\n        }\r\n\r\n        return user;\r\n    }\r\n\r\n\r\n    async createFromReact(): Promise<ReactUser> {\r\n        const user = new ReactUser();\r\n\r\n        if (this.appConfig.steamId && this.appConfig.steamId !== \"0\") {\r\n            user.steamId = this.appConfig.steamId;\r\n        }\r\n\r\n        user.storeCountry = this.appConfig.countryCode!;\r\n\r\n        if (this.appConfig.webApiToken) {\r\n            user.webApiToken = this.appConfig.webApiToken;\r\n        }\r\n\r\n        return user;\r\n    }\r\n}\r\n\r\n", "\r\nexport interface AppConfigData {\r\n    language?: string,\r\n    countryCode?: string,\r\n    webApiToken?: string,\r\n    steamId?: string\r\n}\r\n\r\nexport default class AppConfig {\r\n    public readonly language: string|undefined;\r\n    public readonly countryCode: string|undefined;\r\n    public readonly webApiToken: string|undefined;\r\n    public readonly steamId: string|undefined;\r\n\r\n    public constructor(data: AppConfigData) {\r\n        this.language = data.language;\r\n        this.countryCode = data.countryCode;\r\n        this.webApiToken = data.webApiToken;\r\n        this.steamId = data.steamId;\r\n    }\r\n}\r\n", "import SteamFacade from \"@Content/Modules/Facades/SteamFacade\";\r\nimport AppConfig, {type AppConfigData} from \"@Core/AppConfig/AppConfig\";\r\n\r\nexport default class AppConfigFactory {\r\n\r\n    public createFromLegacy(): AppConfig {\r\n        const configNode: HTMLElement|null = document.querySelector(\"#application_config\");\r\n\r\n        const data: AppConfigData = {};\r\n\r\n        if (configNode?.dataset.config) {\r\n            const config = JSON.parse(configNode.dataset.config);\r\n            data.language = config.LANGUAGE;\r\n            data.countryCode = config.COUNTRY;\r\n        }\r\n\r\n        if (configNode?.dataset.store_user_config) {\r\n            const storeUserConfig = JSON.parse(configNode.dataset.store_user_config);\r\n            data.webApiToken = storeUserConfig.webapi_token;\r\n        }\r\n\r\n        return new AppConfig(data);\r\n    }\r\n\r\n    public async createFromReact(): Promise<AppConfig> {\r\n\r\n        const [loaderData, Config, UserConfig] = await Promise.all([\r\n            SteamFacade.global(\"SSR.loaderData\"),\r\n            SteamFacade.global(\"Config\"),\r\n            SteamFacade.global(\"UserConfig\")\r\n        ]);\r\n\r\n        const data: AppConfigData = {\r\n            language: Config.LANGUAGE,\r\n            countryCode: Config.COUNTRY\r\n        }\r\n\r\n        if (Array.isArray(loaderData) && loaderData[0]) {\r\n            for (let item of loaderData) {\r\n                item = JSON.parse(item);\r\n                if (item.strWebAPIToken) {\r\n                    data.webApiToken = item.strWebAPIToken;\r\n                }\r\n\r\n                if (item.storeBrowseContext && item.steamid) { // find correct object\r\n                    data.steamId = item.steamid;\r\n                }\r\n            }\r\n        }\r\n        return new AppConfig(data);\r\n    }\r\n}", "import bootstrapDomPurify from \"../../bootstrapDomPurify\";\r\nimport Config from \"config\";\r\nimport Info from \"@Core/Info\";\r\nimport Localization from \"@Core/Localization/Localization\";\r\nimport {SettingsStore} from \"@Options/Data/Settings\";\r\nimport CurrencyManager from \"@Content/Modules/Currency/CurrencyManager\";\r\nimport Context, {type ContextParams} from \"@Content/Modules/Context/Context\";\r\nimport Environment, {ContextType} from \"@Core/Environment\";\r\nimport Language from \"@Core/Localization/Language\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\nimport type AppConfig from \"@Core/AppConfig/AppConfig\";\r\nimport LanguageFactory from \"@Core/Localization/LanguageFactory\";\r\nimport UserFactory from \"@Core/User/UserFactory\";\r\nimport AppConfigFactory from \"@Core/AppConfig/AppConfigFactory\";\r\n\r\nEnvironment.CurrentContext = ContextType.ContentScript;\r\n\r\n/**\r\n * Event handler for uncaught Background errors\r\n */\r\nfunction unhandledrejection(e: PromiseRejectionEvent) {\r\n    const err = e.reason;\r\n    if (!err || !err.error) {\r\n        return;\r\n    } // Not a background error\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    console.group(\"An error occurred in the background context.\");\r\n    console.error(err.stack);\r\n    console.groupEnd();\r\n}\r\nwindow.addEventListener(\"unhandledrejection\", unhandledrejection);\r\n\r\ninterface ContextClass {\r\n    create: (params: ContextParams) => Promise<InstanceType<typeof Context>|null>,\r\n    new(params: ContextParams, ...rest: any[]): InstanceType<typeof Context>\r\n}\r\n\r\nexport default abstract class Page {\r\n\r\n    constructor(\r\n        private readonly contextClass: ContextClass\r\n    ) {}\r\n\r\n    /**\r\n     * Run any kind of checks we might need to do, to see if the page is properly loaded\r\n     */\r\n    protected abstract check(): boolean;\r\n    protected abstract preApply(language: Language|null, user: UserInterface): Promise<void>\r\n\r\n    protected abstract getAppConfig(factory: AppConfigFactory): Promise<AppConfig>;\r\n    protected abstract getLanguage(factory: LanguageFactory): Promise<Language|null>;\r\n    protected abstract getUser(factory: UserFactory): Promise<UserInterface>;\r\n\r\n    async run(): Promise<void> {\r\n        if (!this.check()) { return; }\r\n\r\n        let language: Language|null;\r\n        let user: UserInterface;\r\n\r\n        // TODO What errors can be \"suppressed\" here?\r\n        try {\r\n            await SettingsStore.init();\r\n            await bootstrapDomPurify();\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n\r\n        try {\r\n            const appFactory = new AppConfigFactory();\r\n            const appConfig = await this.getAppConfig(appFactory);\r\n\r\n            const languageFactory = new LanguageFactory(appConfig);\r\n            language = await this.getLanguage(languageFactory);\r\n\r\n            const userFactory = new UserFactory(appConfig);\r\n            user = await this.getUser(userFactory);\r\n\r\n            await Promise.all([\r\n                Localization.init(language),\r\n                CurrencyManager.init()\r\n            ]);\r\n        } catch (err) {\r\n            console.group(\"Augmented Steam initialization\");\r\n            console.error(\"Failed to initialize Augmented Steam\");\r\n            console.error(err);\r\n            console.groupEnd();\r\n            return;\r\n        }\r\n\r\n        console.log(\r\n            `%c Augmented %cSteam v${Info.version} %c ${Config.PublicHost}`,\r\n            \"background: #000000; color: #046eb2\",\r\n            \"background: #000000; color: #ffffff\",\r\n            \"\",\r\n        );\r\n\r\n        await this.preApply(language, user);\r\n\r\n        const params = {language, user};\r\n        const context: Context = await this.contextClass.create(params)\r\n            ?? new (this.contextClass)(params);\r\n        await context.applyFeatures();\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {onMount} from \"svelte\";\r\n    import {__ready_failed, __ready_loading, __ready_ready, __ready_serverOutage} from \"@Strings/_strings\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n\r\n    export let react: boolean;\r\n\r\n    let started: number = 0;\r\n    let done: number = 0;\r\n    let failed: number = 0;\r\n\r\n    let progress: number = 0;\r\n    let isLoading: boolean = false;\r\n\r\n    let hasWarning: boolean = false;\r\n    let hasError: boolean = false;\r\n\r\n    $: if (started > 0) {\r\n        progress = Math.min(100, 100 * (done / started));\r\n\r\n        isLoading = (done + failed) < started;\r\n    }\r\n\r\n    onMount(() => {\r\n        function onStart(): void {\r\n            started += 1;\r\n        }\r\n\r\n        function onDone(): void {\r\n            done += 1;\r\n        }\r\n\r\n        function onError(e: Event) {\r\n            failed += 1;\r\n\r\n            const name = (<CustomEvent>e).detail.name ?? null;\r\n\r\n            if (name === \"ServerOutageError\") {\r\n                hasWarning = true;\r\n            } else {\r\n                hasError = true;\r\n            }\r\n        }\r\n\r\n        document.addEventListener(\"asRequestStart\", onStart);\r\n        document.addEventListener(\"asRequestDone\", onDone);\r\n        document.addEventListener(\"asRequestError\", onError);\r\n\r\n        return () => {\r\n            document.removeEventListener(\"asRequestStart\", onStart);\r\n            document.removeEventListener(\"asRequestDone\", onDone);\r\n            document.removeEventListener(\"asRequestError\", onError);\r\n        }\r\n    });\r\n</script>\r\n\r\n\r\n<div class=\"wrapper\" class:is-react={react} class:is-legacy={!react}>\r\n    <div class=\"progress\"\r\n         class:is-complete=\"{!isLoading}\"\r\n         class:is-warning=\"{hasWarning}\"\r\n         class:is-error=\"{hasError}\"\r\n         title={L(isLoading ? __ready_loading : __ready_ready)}>\r\n        <div class=\"bar\">\r\n            <div class=\"value\" style:width=\"{isLoading ? progress : 18}px\"></div>\r\n        </div>\r\n    </div>\r\n\r\n    {#if hasError}\r\n        <div class=\"error\">{L(__ready_failed, {\"amount\": failed})}</div>\r\n    {:else if hasWarning}\r\n        <div class=\"warning\">{L(__ready_serverOutage)}</div>\r\n    {/if}\r\n</div>\r\n\r\n\r\n<style>\r\n    .wrapper.is-legacy {\r\n        position: relative;\r\n        float: right;\r\n    }\r\n    .wrapper.is-react {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n    }\r\n\r\n    .progress {\r\n        position: relative;\r\n        top: 55px;\r\n        width: 100px;\r\n        min-width: 16px;\r\n        height: 16px;\r\n        box-sizing: content-box;\r\n        border-radius: 8px;\r\n        overflow: hidden;\r\n        border-bottom: 1px solid rgba(255, 255, 255, 0.20);\r\n    }\r\n    .is-error,\r\n    .is-warning,\r\n    .is-complete {\r\n        width: 16px;\r\n    }\r\n    .progress,\r\n    .value {\r\n        transition: width 1s ease-in-out;\r\n    }\r\n    .value {\r\n        width: 18px;\r\n    }\r\n    /* This prevents the black bleeding from \"es_progress__bar\" background\r\n        around the edges of \"es_progress__value\" to make it look smoother */\r\n    .is-error .value,\r\n    .is-warning .value,\r\n    .is-complete .value {\r\n        width: calc(100% + 4px) !important;\r\n    }\r\n    .is-complete {\r\n        animation: delayBoxShadowGreen linear 1s;\r\n        animation-fill-mode: forwards;\r\n    }\r\n    .is-error, .is-warning {\r\n        cursor: help;\r\n        animation: linear 1s;\r\n        animation-fill-mode: forwards;\r\n    }\r\n    .is-error {\r\n        animation-name: delayBoxShadowRed;\r\n    }\r\n    .is-warning {\r\n        animation-name: delayBoxShadowYellow;\r\n    }\r\n    .is-error::before, .is-warning::before {\r\n        display: block;\r\n        content: \"!\";\r\n        position: absolute;\r\n        top: 2px;\r\n        right: 0;\r\n        left: 0;\r\n        line-height: 12px;\r\n        text-align: center;\r\n        font-size: 14px;\r\n        font-family: Impact, Charcoal, sans-serif;\r\n        text-shadow: 0 0 1px black;\r\n    }\r\n    .is-error::before {\r\n        color: rgb(255, 149, 149);\r\n    }\r\n    .is-warning::before {\r\n        color: white;\r\n    }\r\n    .progress .bar {\r\n        background-color: black;\r\n        border-radius: 8px;\r\n    }\r\n    .value {\r\n        height: 16px;\r\n        margin-left: -2px;\r\n        background-color: #51771d;\r\n        border-radius: 8px;\r\n        background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.25) 5%, rgba(255, 255, 255, 0) 95%);\r\n    }\r\n    .is-error .value, .is-warning .value {\r\n        transition: unset;\r\n        border-radius: 8px;\r\n    }\r\n    .is-error .value {\r\n        background-color: #b31414;\r\n    }\r\n    .is-warning .value {\r\n        background-color: #d9ab05;\r\n    }\r\n    @keyframes delayBoxShadowRed {\r\n        100% {\r\n            box-shadow: 0 0 8px 1px #b31414;\r\n        }\r\n    }\r\n    @keyframes delayBoxShadowYellow {\r\n        100% {\r\n            box-shadow: 0 0 8px 1px #d9ab05;\r\n        }\r\n    }\r\n    @keyframes delayBoxShadowGreen {\r\n        100% {\r\n            box-shadow: 0 0 8px 1px #51771d;\r\n        }\r\n    }\r\n\r\n    .error, .warning {\r\n        display: none;\r\n        color: #ccc;\r\n        font-size: 11px;\r\n        background-color: #333;\r\n        border: 1px solid #444;\r\n        position: absolute;\r\n        min-width: 200px;\r\n        max-width: 250px;\r\n        padding: 5px;\r\n        top: 52px;\r\n        right: 22px;\r\n        list-style-position: inside;\r\n    }\r\n    .error::before, .warning::before {\r\n        content: \"\";\r\n        display: block;\r\n        background-color: #444;\r\n        width: 10px;\r\n        height: 10px;\r\n        position: absolute;\r\n        top: 5px;\r\n        right: -5px;\r\n        z-index: -1;\r\n        transform: rotateZ(45deg);\r\n    }\r\n    .wrapper:hover .error, .wrapper:hover .warning {\r\n        display: block !important;\r\n    }\r\n</style>\r\n", "\r\n/**\r\n * Utility class for mapping commonly used Steam elements\r\n */\r\nexport default class ReactDOM {\r\n\r\n    static globalHeader(): HTMLElement|null {\r\n        return document.querySelector<HTMLElement>(\".eGsI8rO3zfU-.bp0Pu4TVwpI-,#StoreTemplate > header\");\r\n    }\r\n\r\n    static globalActions(): HTMLElement|null {\r\n        return this.globalHeader()?.querySelector<HTMLElement>(\".h3Jy-1Il1os-,nav + div\") ?? null;\r\n    }\r\n}", "import self_ from \"./ProgressBar.svelte\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport ReactDOM from \"@Content/Steam/ReactDOM\";\r\n\r\nexport default class ProgressBar {\r\n\r\n    private static build(react: boolean, node: HTMLElement|null): void {\r\n        if (!Settings.show_progressbar || !node) {\r\n            return;\r\n        }\r\n\r\n        new self_({\r\n            target: node.parentElement!,\r\n            anchor: node.nextElementSibling ?? undefined,\r\n            props: {react}\r\n        });\r\n    }\r\n\r\n    static buildLegacy(): void {\r\n        this.build(false, document.querySelector(\"#global_actions\"));\r\n    }\r\n\r\n    static buildReact(): void {\r\n        this.build(true, ReactDOM.globalActions());\r\n    }\r\n}\r\n", "import Background from \"@Core/Background\";\r\nimport {EAction} from \"@Background/EAction\";\r\n\r\nexport default class CacheApiFacade {\r\n\r\n    static clearCache(): Promise<void> {\r\n        return Background.send<void>(EAction.CacheClear);\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import ExtensionResources from \"@Core/ExtensionResources\";\r\n    import {\r\n        __bugFeature,\r\n        __cancel,\r\n        __clearCache,\r\n        __contribute,\r\n        __launchRandom,\r\n        __ok,\r\n        __playGame,\r\n        __thewordoptions,\r\n        __visitStore,\r\n        __website\r\n    } from \"@Strings/_strings\";\r\n    import Config from \"config\";\r\n    import SteamStoreApiFacade from \"@Content/Modules/Facades/SteamStoreApiFacade\";\r\n    import DynamicStore from \"@Content/Modules/Data/DynamicStore\";\r\n    import external from \"@Content/externalLink\";\r\n    import type UserInterface from \"@Core/User/UserInterface\";\r\n    import CacheApiFacade from \"@Content/Modules/Facades/CacheApiFacade\";\r\n    import {onMount} from \"svelte\";\r\n    import {fade} from \"svelte/transition\";\r\n    import ConfirmDialog from \"@Core/Modals/ConfirmDialog\";\r\n    import {EModalAction} from \"@Core/Modals/Contained/EModalAction\";\r\n\r\n    export let user: UserInterface;\r\n\r\n    let isOpen: boolean = false;\r\n    let parentNode: HTMLElement;\r\n\r\n    function outsideClickHandler(e: MouseEvent) {\r\n        const target = e.target as HTMLElement;\r\n        if (parentNode.contains(target)) {\r\n            return;\r\n        }\r\n        closeMenu();\r\n    }\r\n\r\n    function toggleMenu(): void {\r\n        if (isOpen) {\r\n            closeMenu();\r\n        } else {\r\n            openMenu();\r\n        }\r\n    }\r\n\r\n    function openMenu(): void {\r\n        isOpen = true;\r\n        document.addEventListener(\"click\", outsideClickHandler);\r\n    }\r\n\r\n    function closeMenu(): void {\r\n        isOpen = false;\r\n        document.removeEventListener(\"click\", outsideClickHandler);\r\n    }\r\n\r\n    async function clearCache(): Promise<void> {\r\n        await CacheApiFacade.clearCache();\r\n        window.location.reload();\r\n    }\r\n\r\n    async function launchRandom(): Promise<void> {\r\n        const appid = await DynamicStore.getRandomApp();\r\n        if (!appid) { return; }\r\n\r\n        const appdetails = await SteamStoreApiFacade.fetchAppDetails(appid);\r\n        if (!appdetails) {\r\n            return;\r\n        }\r\n\r\n        const gameid = appdetails.fullgame?.appid ?? appid;\r\n        const gamename = appdetails.fullgame?.name ?? appdetails.name;\r\n\r\n        const confirm = await (new ConfirmDialog(\r\n            L(__playGame, {gamename}),\r\n            `<img src=\"https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/${gameid}/header.jpg\">`,\r\n            {\r\n                primary: L(__ok),\r\n                secondary: L(__visitStore),\r\n                cancel: L(__cancel)\r\n            }\r\n        )).show();\r\n\r\n        if (confirm === EModalAction.OK) {\r\n            window.location.assign(`steam://run/${gameid}`)\r\n        } else if (confirm === EModalAction.Secondary) {\r\n            window.location.assign(`//store.steampowered.com/app/${gameid}`)\r\n        }\r\n    }\r\n\r\n    onMount(() => {\r\n        parentNode\r\n    });\r\n</script>\r\n\r\n<div class=\"as-menu\" bind:this={parentNode}>\r\n    <button class:is-open={isOpen} on:click={toggleMenu}>Augmented Steam</button>\r\n\r\n    {#if isOpen}\r\n        <!-- svelte-ignore a11y-click-events-have-key-events a11y-no-static-element-interactions -->\r\n        <div class=\"body\" on:click={closeMenu} transition:fade={{duration: 100}}>\r\n            <div class=\"group\">\r\n                <a target=\"_blank\" href={ExtensionResources.getURL(\"html/options.html\")}>{L(__thewordoptions)}</a>\r\n                <a href=\"#clear_cache\" on:click|preventDefault={clearCache}>{L(__clearCache)}</a>\r\n            </div>\r\n            <div class=\"group\">\r\n                <a use:external href=\"https://github.com/IsThereAnyDeal/AugmentedSteam\">{L(__contribute)}</a>\r\n                <a use:external href=\"https://github.com/IsThereAnyDeal/AugmentedSteam/issues\">{L(__bugFeature)}</a>\r\n            </div>\r\n            <div class=\"group\">\r\n                <a use:external href=\"{Config.PublicHost}\">{L(__website)}</a>\r\n                <a use:external href=\"https://isthereanydeal.com/\">IsThereAnyDeal</a>\r\n                <a use:external href=\"{Config.ITADDiscord}\">Discord</a>\r\n            </div>\r\n\r\n            {#if user.isSignedIn}\r\n                <div class=\"group\">\r\n                    <a id=\"es_random_game\" class=\"popup_menu_item\" on:click={launchRandom}>{L(__launchRandom)}</a>\r\n                </div>\r\n            {/if}\r\n        </div>\r\n    {/if}\r\n</div>\r\n\r\n\r\n<style>\r\n    .as-menu {\r\n        display: inline-block;\r\n        position: relative;\r\n    }\r\n\r\n    button {\r\n        display: inline-flex;\r\n        align-items: center;\r\n        border: none;\r\n        height: 25px;\r\n        font: inherit;\r\n        line-height: 25px;\r\n        margin-right: 5px;\r\n        color: #b8b6b4;\r\n        background-color: transparent;\r\n        background-image: url(\"https://cdn.fastly.steamstatic.com/store/ssr/btn_arrow_down_padded-LIJGVCWF.png\");\r\n        background-position: right center;\r\n        background-repeat: no-repeat;\r\n        padding-right: 18px;\r\n        cursor: pointer;\r\n    }\r\n    button.is-open,\r\n    button:hover {\r\n        color: #ffffff;\r\n    }\r\n\r\n    .body {\r\n        position: absolute;\r\n        right: 0;\r\n        top: 100%;\r\n        white-space: nowrap;\r\n        font-size: 13px;\r\n        color: #b8b6b4;\r\n        padding: 0;\r\n        margin: 0;\r\n        background: #3d4450;\r\n        box-shadow: 0 0 12px #000000;\r\n        z-index: 1000;\r\n    }\r\n\r\n    .group + .group {\r\n        border-top: 1px solid #63717e;\r\n    }\r\n\r\n    a {\r\n        padding: 8px 18px;\r\n        display: block;\r\n        text-decoration: none;\r\n        color: #dcdedf;\r\n        white-space: nowrap;\r\n        cursor: pointer;\r\n        background: none;\r\n        border: none;\r\n        box-sizing: border-box;\r\n        text-align: start;\r\n        width: 100%;\r\n    }\r\n    a:hover {\r\n        background: #dcdedf;\r\n        color: #171a21;\r\n    }\r\n</style>\r\n", "<script lang=\"ts\">\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__hide, __update_dontShow} from \"@Strings/_strings\";\r\n    import {createEventDispatcher} from \"svelte\";\r\n\r\n    export let react: boolean;\r\n\r\n    const dispatch = createEventDispatcher<{\r\n        close: void,\r\n        hide: void\r\n    }>();\r\n</script>\r\n\r\n\r\n<div class=\"es_warn\" class:is-react={react}>\r\n    <div class=\"es_warn__cnt\">\r\n        <div><slot></slot></div>\r\n        <div class=\"es_warn__control\">\r\n            <button type=\"button\" class=\"es_warn__btn\" on:click={() => dispatch(\"close\")}>{L(__update_dontShow)}</button>\r\n            <button type=\"button\" class=\"es_warn__btn\" on:click={() => dispatch(\"hide\")}>{L(__hide)}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<style>\r\n    .es_warn {\r\n        font-size: 12px;\r\n        padding: 8px 0;\r\n        text-align: center;\r\n        background: #9a2820;\r\n        border-top: 1px solid #d63525;\r\n        border-bottom: 1px solid #d63525;\r\n        margin-bottom: -1px;\r\n        color: white;\r\n    }\r\n    .es_warn.is-react {\r\n        margin-left: -14px;\r\n        padding-left: 14px;\r\n    }\r\n\r\n    .es_warn__cnt {\r\n        max-width: 940px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin: auto;\r\n        line-height: 20px;\r\n    }\r\n    .es_warn__cnt button {\r\n        text-decoration: underline;\r\n    }\r\n\r\n    .es_warn__control {\r\n        white-space: nowrap;\r\n    }\r\n\r\n    button {\r\n        background: #ffaaaa;\r\n        padding: 0 10px;\r\n        color: black;\r\n        text-transform: uppercase;\r\n        font-size: 11px;\r\n        border-radius: 1px;\r\n        text-decoration: none !important;\r\n        display: inline-block;\r\n        line-height: 20px;\r\n        cursor: pointer;\r\n        white-space: nowrap;\r\n        border: 0;\r\n    }\r\n    button:hover {\r\n        background: #e89a9a;\r\n    }\r\n</style>\r\n", "<script lang=\"ts\">\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__loginWarning} from \"@Strings/_strings\";\r\n    import Warning from \"@Content/Modules/Widgets/AugmentedSteam/Components/Warning.svelte\";\r\n    import LocalStorage from \"@Core/Storage/LocalStorage\";\r\n    import {createEventDispatcher} from \"svelte\";\r\n\r\n    const dispatch = createEventDispatcher<{\r\n        close: void\r\n    }>();\r\n\r\n    export let react: boolean;\r\n    export let page: \"store\"|\"community\";\r\n\r\n    let host: string;\r\n    $: switch(page) {\r\n          case \"store\": host = \"store.steampowered.com\"; break;\r\n          case \"community\": host = \"steamcommunity.com\"; break;\r\n          default: throw new Error();\r\n      }\r\n\r\n    function handleClose(): void {\r\n        if (page === \"store\") {\r\n            LocalStorage.set(`hide_login_warn_store`, true);\r\n        } else if (page === \"community\") {\r\n            LocalStorage.set(`hide_login_warn_community`, true);\r\n        }\r\n        dispatch(\"close\");\r\n    }\r\n</script>\r\n\r\n\r\n<Warning {react} on:close={handleClose} on:hide={() => dispatch(\"close\")}>\r\n    {@html L(__loginWarning, {\"link\": `<a href=\"https://${host}/login/\">${host}</a>`})}\r\n</Warning>\r\n\r\n\r\n", "<script lang=\"ts\">\r\n    import Localization, {type TLocale} from \"@Core/Localization/Localization\";\r\n    import {__usingLanguage, __usingLanguageReturn} from \"@Strings/_strings\";\r\n    import {createEventDispatcher, onMount} from \"svelte\";\r\n    import Warning from \"@Content/Modules/Widgets/AugmentedSteam/Components/Warning.svelte\";\r\n    import SteamFacade from \"@Content/Modules/Facades/SteamFacade\";\r\n    import Settings from \"@Options/Data/Settings\";\r\n    import Language from \"@Core/Localization/Language\";\r\n\r\n    const dispatch = createEventDispatcher<{\r\n        close: void\r\n    }>();\r\n\r\n    let promise: Promise<TLocale>;\r\n\r\n    export let react: boolean;\r\n    export let currentLanguage: Language;\r\n    export let warningLanguage: Language;\r\n\r\n    function resetLanguageCode(): void {\r\n        // TODO find a way to change language for user in React pages\r\n        SteamFacade.changeLanguage(warningLanguage.name, true);\r\n    }\r\n\r\n    function handleClose(): void {\r\n        Settings.showlanguagewarning = false;\r\n        dispatch(\"close\");\r\n    }\r\n\r\n    async function handleSetLanguage(): Promise<void> {\r\n        const payload = new FormData();\r\n        payload.set(\"language\", warningLanguage.name);\r\n\r\n        await fetch(\"https://store.steampowered.com/account/setlanguage/\", {\r\n            method: \"POST\",\r\n            body: payload\r\n        });\r\n        window.location.href = `?l=${warningLanguage.name}`;\r\n    }\r\n\r\n    function str__usingLanguage(loc: TLocale): string {\r\n        return loc.strings[__usingLanguage]!\r\n            .replace(\"__current__\", loc.strings[`options_lang_${currentLanguage.name}`] ?? currentLanguage.name);\r\n    }\r\n\r\n    function str__usingLanguageReturn(loc: TLocale): string {\r\n        return loc.strings[__usingLanguageReturn]!\r\n            .replace(\"__base__\", loc.strings[`options_lang_${warningLanguage.name}`] ?? warningLanguage.name);\r\n    }\r\n\r\n    onMount(() => {\r\n        promise = Localization.load(warningLanguage.code ?? \"en\");\r\n    });\r\n</script>\r\n\r\n\r\n{#if promise}\r\n    {#await promise then locale}\r\n        <Warning {react} on:close={handleClose} on:hide={() => dispatch(\"close\")}>\r\n            {str__usingLanguage(locale)}\r\n\r\n            {#if react}\r\n                <button type=\"button\" on:click={handleSetLanguage}>\r\n                    {str__usingLanguageReturn(locale)}\r\n                </button>\r\n            {:else}\r\n                <button type=\"button\" on:click|preventDefault={resetLanguageCode}>\r\n                    {str__usingLanguageReturn(locale)}\r\n                </button>\r\n            {/if}\r\n        </Warning>\r\n    {/await}\r\n{/if}\r\n\r\n\r\n<style>\r\n    button {\r\n        background: #ffaaaa;\r\n        padding: 3px 10px;\r\n        color: black;\r\n        font-size: 12px;\r\n        border-radius: 1px;\r\n        text-decoration: none;\r\n        cursor: pointer;\r\n        white-space: nowrap;\r\n        border: 0;\r\n        margin-left: 10px;\r\n    }\r\n    button:hover {\r\n        background: #e89a9a;\r\n    }\r\n</style>", "<script lang=\"ts\">\r\n    import Settings from \"@Options/Data/Settings\";\r\n    import {onMount} from \"svelte\";\r\n    import LoginWarning from \"@Content/Modules/Widgets/AugmentedSteam/Components/LoginWarning.svelte\";\r\n    import Language from \"@Core/Localization/Language\";\r\n    import LanguageWarning from \"@Content/Modules/Widgets/AugmentedSteam/Components/LanguageWarning.svelte\";\r\n\r\n    export let language: Language;\r\n    export let react: boolean;\r\n\r\n    let languageWarning: Language|null = null;\r\n    let loginWarning: \"store\"|\"community\"|null = null;\r\n\r\n    onMount(() => {\r\n        document.addEventListener(\"asRequestError\", async (e) => {\r\n            const {detail} = e as CustomEvent;\r\n            const name = detail.name ?? null;\r\n            const message = detail.message ?? null;\r\n\r\n            if (name === \"LoginError\" && (message === \"store\" || message === \"community\")) {\r\n                loginWarning = message;\r\n            }\r\n        });\r\n\r\n        if (Settings.showlanguagewarning) {\r\n            if (!Settings.showlanguagewarninglanguage) {\r\n                Settings.showlanguagewarninglanguage = language.name;\r\n            }\r\n\r\n            const warningLanguage = Settings.showlanguagewarninglanguage;\r\n            if (language.name !== warningLanguage) {\r\n                languageWarning = new Language(warningLanguage);\r\n            }\r\n        }\r\n    });\r\n</script>\r\n\r\n\r\n{#if languageWarning}\r\n    <LanguageWarning {react}\r\n            currentLanguage={language}\r\n            warningLanguage={languageWarning}\r\n            on:close={() => languageWarning = null}\r\n    />\r\n{/if}\r\n\r\n{#if loginWarning}\r\n    <LoginWarning {react}\r\n            page={loginWarning}\r\n            on:close={() => loginWarning = null}\r\n    />\r\n{/if}\r\n", "<script lang=\"ts\">\r\n    import {onMount} from \"svelte\";\r\n\r\n    export let target: HTMLElement|undefined;\r\n\r\n    let visible: boolean = false;\r\n\r\n    function toTop(): void {\r\n        (target ?? window).scroll({\r\n            \"top\": 0,\r\n            \"left\": 0,\r\n            \"behavior\": \"smooth\"\r\n        });\r\n    }\r\n\r\n    function handleScroll(): void {\r\n        const scrollTop = target\r\n            ? target.scrollTop\r\n            : window.scrollY;\r\n\r\n        visible = scrollTop >= 400;\r\n    }\r\n\r\n    onMount(() => {\r\n        (target ?? window).addEventListener(\"scroll\", handleScroll);\r\n    });\r\n</script>\r\n\r\n\r\n<button class:is-visible={visible}\r\n     on:click={toTop}\r\n></button>\r\n\r\n\r\n<style>\r\n    button {\r\n        position: fixed;\r\n        display: flex;\r\n        width: 50px;\r\n        height: 50px;\r\n        align-items: center;\r\n        justify-content: center;\r\n        z-index: 9999;\r\n        opacity: 0;\r\n        visibility: hidden;\r\n        box-shadow: 0 0 10px 2px #000000;\r\n        left: 50%;\r\n        bottom: 20px;\r\n        top: auto;\r\n        margin-left: 500px;\r\n        font-size: 22px;\r\n        border: 0;\r\n        border-radius: 50%;\r\n        cursor: pointer;\r\n        background: linear-gradient( to bottom, rgba(33,101,138,1) 5%, rgba(23,67,92,1) 95%);\r\n        transition: visibility 0s 200ms, opacity 200ms ease-in-out;\r\n        color: white;\r\n    }\r\n    button:hover {\r\n        background: linear-gradient( to bottom, rgba(47,137,188,1) 5%, rgba(23,67,92,1) 95%);\r\n    }\r\n    button.is-visible {\r\n        opacity: 1;\r\n        visibility: visible;\r\n        transition: visibility, opacity 200ms ease-in-out;\r\n    }\r\n\r\n</style>", "import {L} from \"@Core/Localization/Localization\";\r\nimport {__activate, __viewinclient,} from \"@Strings/_strings\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport AugmentedSteamMenu from \"@Content/Modules/Widgets/AugmentedSteam/AugmentedSteamMenu.svelte\";\r\nimport CacheApiFacade from \"@Content/Modules/Facades/CacheApiFacade\";\r\nimport AugmentedSteamWarnings from \"@Content/Modules/Widgets/AugmentedSteam/AugmentedSteamWarnings.svelte\";\r\nimport Language from \"@Core/Localization/Language\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\nimport BackToTop from \"@Content/Modules/Widgets/AugmentedSteam/BackToTop.svelte\";\r\nimport DynamicStore from \"@Content/Modules/Data/DynamicStore\";\r\nimport LocalStorage from \"@Core/Storage/LocalStorage\";\r\n\r\nexport default class AugmentedSteam {\r\n\r\n    private warningComponent: AugmentedSteamWarnings|undefined;\r\n\r\n    private readonly language: Language;\r\n    private readonly user: UserInterface;\r\n    private readonly react: boolean;\r\n\r\n    constructor(\r\n        language: Language|null,\r\n        user: UserInterface,\r\n        react: boolean\r\n    ) {\r\n        this.language = language ?? new Language(\"english\");\r\n        this.user = user;\r\n        this.react = react;\r\n    }\r\n\r\n    private addMenu(): void {\r\n        const target = document.querySelector(this.react\r\n            ? \"header nav + div\"\r\n            : \"#global_action_menu\"\r\n        )!;\r\n\r\n        (new AugmentedSteamMenu({\r\n            target,\r\n            anchor: target.firstElementChild!,\r\n            props: {\r\n                user: this.user\r\n            }\r\n        }));\r\n    }\r\n\r\n    private addBackToTop(): void {\r\n        if (!Settings.show_backtotop) { return; }\r\n\r\n        const scrollTarget = this.react\r\n            ? document.querySelector<HTMLElement>(\"#StoreTemplate\")\r\n            : null;\r\n\r\n        (new BackToTop({\r\n            target: document.body,\r\n            props: {\r\n                target: scrollTarget ?? undefined\r\n            }\r\n        }))\r\n    }\r\n\r\n    private focusSearchBox() {\r\n\r\n        const node = document.querySelector<HTMLElement>(\r\n            (this.react\r\n                ? [\r\n                    \"input.Focusable\" // Wishlist\r\n                ] : [\r\n                    \"#store_nav_search_term\", // Store pages\r\n                    \"input.discussionSearchText\", // Community discussions\r\n                    \"#workshopSearchText\", // Workshop\r\n                    \"#findItemsSearchBox\", // Market\r\n                    \"input#filter_control\", // Inventory\r\n                    // TODO support dynamic pages e.g. groups/friends, Games page (React)\r\n                ]).join(\",\"));\r\n\r\n        if (!node) { return; }\r\n\r\n        function isContentEditable(el: Element): boolean {\r\n            return el.tagName === \"INPUT\"\r\n                || el.tagName === \"TEXTAREA\"\r\n                || (el instanceof HTMLElement && el.isContentEditable);\r\n        }\r\n\r\n        document.addEventListener(\"keydown\", (e: KeyboardEvent) => {\r\n            if (e.key !== \"s\" || e.ctrlKey || e.repeat) { return; }\r\n\r\n            let el = document.activeElement;\r\n            if (el && isContentEditable(el)) { return; }\r\n\r\n            // Check if active element is within a shadow root, see #1623\r\n            el = el?.shadowRoot?.activeElement ?? null;\r\n            if (el && isContentEditable(el)) { return; }\r\n\r\n            e.preventDefault();\r\n            node.focus();\r\n        });\r\n    }\r\n\r\n    private getWarningComponent(): AugmentedSteamWarnings {\r\n\r\n        if (!this.warningComponent) {\r\n            const header = document.querySelector(\"#global_header\")!;\r\n            this.warningComponent = new AugmentedSteamWarnings({\r\n                target: header.parentElement!,\r\n                anchor: header.nextElementSibling!\r\n            });\r\n        }\r\n        return this.warningComponent;\r\n    }\r\n\r\n    private addWarnings(): void {\r\n\r\n        let target: Element;\r\n        let anchor: Element|undefined;\r\n        if (this.react) {\r\n            target = document.querySelector(\"header ~ section\")!;\r\n            anchor = target.firstElementChild!;\r\n        } else {\r\n            const header = document.querySelector(\"#global_header\")!\r\n            target = header.parentElement!;\r\n            anchor = header.nextElementSibling!;\r\n        }\r\n\r\n        new AugmentedSteamWarnings({\r\n            target,\r\n            anchor,\r\n            props: {\r\n                react: this.react,\r\n                language: this.language\r\n            }\r\n        });\r\n    }\r\n\r\n    private handleInstallSteamButton(): void {\r\n        const option = Settings.installsteam;\r\n        if (option === \"show\") { return; }\r\n\r\n        const btn = document.querySelector<HTMLAnchorElement>(this.react\r\n            ? \"header nav ~ div a[href*='/about/']\"\r\n            : \"a.header_installsteam_btn\"\r\n        );\r\n        if (!btn) {\r\n            console.error(`Couldn't find \"Install Steam\" button element.`);\r\n            return;\r\n        }\r\n\r\n        if (option === \"hide\") {\r\n            btn.remove();\r\n        } else if (option === \"replace\") {\r\n\r\n            if (this.react) {\r\n                btn.textContent = L(__viewinclient);\r\n                btn.classList.add(\"is-react\");\r\n            } else {\r\n                btn.querySelector(\"div\")!.textContent = L(__viewinclient);\r\n            }\r\n\r\n            btn.href = `steam://openurl/${window.location.href}`;\r\n            btn.classList.add(\"es_steamclient_btn\");\r\n\r\n        }\r\n    }\r\n\r\n    private addRedeemLink(): void {\r\n\r\n        let node: HTMLAnchorElement|null;\r\n\r\n        node = document.querySelector(\r\n            this.react\r\n                ? \"header a[href*='/addfunds/']\"\r\n                : \"#account_dropdown a[href*='/addfunds/']\"\r\n        );\r\n        if (!node) {\r\n            console.error(\"Didn't find node to copy for adding redeem link\");\r\n            return;\r\n        }\r\n\r\n        const cloned = node.cloneNode(true) as HTMLAnchorElement;\r\n        cloned.href = \"https://store.steampowered.com/account/registerkey\";\r\n        cloned.textContent = L(__activate);\r\n\r\n        node.insertAdjacentElement(\"beforebegin\", cloned);\r\n    }\r\n\r\n    async build(): Promise<void> {\r\n\r\n        const userId = this.user.steamId ?? \"0\";\r\n        const cachedUser = await LocalStorage.get(\"cachedUser\");\r\n\r\n        if (cachedUser !== userId) {\r\n            console.log(`Clear cache, old: ${cachedUser}, new: ${userId}`);\r\n            await CacheApiFacade.clearCache();\r\n            await LocalStorage.set(\"cachedUser\", userId);\r\n        }\r\n\r\n        this.addBackToTop();\r\n        this.focusSearchBox();\r\n        this.addMenu();\r\n        this.addWarnings();\r\n        this.handleInstallSteamButton();\r\n\r\n        if (this.user.isSignedIn) {\r\n            this.addRedeemLink();\r\n\r\n            // TODO probably doesn't used on React pages?\r\n            DynamicStore.invalidateCacheHandler();\r\n        }\r\n    }\r\n}\r\n", "import Info from \"@Core/Info\";\r\n\r\ntype VersionTypes = Version|string|Array<string|number>;\r\n\r\nexport default class Version {\r\n\r\n    private readonly major: number;\r\n    private readonly minor: number;\r\n    private readonly patch:number;\r\n\r\n    constructor(major: number, minor: number = 0, patch: number = 0) {\r\n        console.assert([major, minor, patch].filter(Number.isInteger).length === 3, `${major}.${minor}.${patch} must be integers`);\r\n        this.major = major;\r\n        this.minor = minor;\r\n        this.patch = patch;\r\n    }\r\n\r\n    static from(version: VersionTypes) {\r\n        if (version instanceof Version) {\r\n            return new Version(version.major, version.minor, version.patch);\r\n        }\r\n        if (typeof version == \"string\") {\r\n            return Version.fromString(version);\r\n        }\r\n        if (Array.isArray(version)) {\r\n            return Version.fromArray(version);\r\n        }\r\n        throw new Error(`Could not construct a Version from ${version}`);\r\n    }\r\n\r\n    static fromArray(version: Array<string|number>): Version {\r\n        if (version.length === 0) {\r\n            throw new Error();\r\n        }\r\n\r\n        return new Version(\r\n            Number(version[0]),\r\n            Number(version[1] ?? 0),\r\n            Number(version[2] ?? 0)\r\n        );\r\n    }\r\n\r\n    static fromString(version: string): Version {\r\n        return Version.fromArray(version.split(\".\"));\r\n    }\r\n\r\n    static coerce(version: VersionTypes): Version {\r\n        if (version instanceof Version) {\r\n            return version;\r\n        }\r\n        return Version.from(version);\r\n    }\r\n\r\n    toString(): string {\r\n        return `${this.major}.${this.minor}.${this.patch}`;\r\n    }\r\n\r\n    toArray(): [number, number, number] {\r\n        return [this.major, this.minor, this.patch];\r\n    }\r\n\r\n    toJSON(): string {\r\n        return this.toString();\r\n    }\r\n\r\n    isCurrent(): boolean {\r\n        return this.isSameOrAfter(Info.version);\r\n    }\r\n\r\n    isSame(version: VersionTypes): boolean {\r\n        const _version = Version.coerce(version);\r\n        return this.major === _version.major\r\n            && this.minor === _version.minor\r\n            && this.patch === _version.patch;\r\n    }\r\n\r\n    isBefore(version: VersionTypes): boolean {\r\n        const _version = Version.coerce(version);\r\n        if (this.major < _version.major) { return true; }\r\n        if (this.major > _version.major) { return false; }\r\n\r\n        // this.major == _version.major\r\n        if (this.minor < _version.minor) { return true; }\r\n        if (this.minor > _version.minor) { return false; }\r\n\r\n        // this.minor == _version.minor\r\n        if (this.patch < _version.patch) { return true; }\r\n        return false;\r\n    }\r\n\r\n    isSameOrBefore(version: VersionTypes): boolean {\r\n        return this.isSame(version) || this.isBefore(version);\r\n    }\r\n\r\n    isAfter(version: VersionTypes): boolean {\r\n        const _version = Version.coerce(version);\r\n        return _version.isBefore(this);\r\n    }\r\n\r\n    isSameOrAfter(version: VersionTypes): boolean {\r\n        const _version = Version.coerce(version);\r\n        return _version.isSameOrBefore(this);\r\n    }\r\n}\r\n", "<script lang=\"ts\">\r\n    import ExtensionResources from \"@Core/ExtensionResources\";\r\n    import Info from \"@Core/Info\";\r\n    import {L} from \"@Core/Localization/Localization\";\r\n    import {__update_changes, __update_updated} from \"@Strings/_strings\";\r\n    import Modal from \"@Core/Modals/Contained/Modal.svelte\";\r\n    import {createEventDispatcher, onMount} from \"svelte\";\r\n    import type Version from \"@Core/Version\";\r\n\r\n    const dispatch = createEventDispatcher<{\r\n        close: void\r\n    }>();\r\n\r\n    export let lastVersion: Version;\r\n\r\n    let promise: Promise<string>\r\n\r\n    onMount(() => {\r\n        promise = (async () => {\r\n            const changelog = await ExtensionResources.getJSON<Record<string, string>>(\"changelog.json\");\r\n            const html = changelog[Info.version];\r\n            if (!html) {\r\n                throw new Error(`Can't find changelog for version ${Info.version}`);\r\n            }\r\n            return html;\r\n        })();\r\n    });\r\n</script>\r\n\r\n\r\n{#if promise}\r\n    {#await promise then html}\r\n        <Modal title={L(__update_updated, {\"version\": Info.version})}\r\n               showClose\r\n               buttons={{cancel: \"OK\"}}\r\n               on:button={() => dispatch(\"close\")}\r\n        >\r\n            <div class=\"changelog\">\r\n                <img src={ExtensionResources.getURL(\"img/logo/as128.png\")} alt=\"Logo\">\r\n                <div>\r\n                    {@html html}\r\n                    <p>\r\n                        <a href={`https://github.com/IsThereAnyDeal/AugmentedSteam/compare/v${lastVersion}...v${Info.version}`} target=\"_blank\">\r\n                            {L(__update_changes)}\r\n                        </a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    {/await}\r\n{/if}\r\n\r\n\r\n<style>\r\n    .changelog {\r\n        height: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items: flex-start;\r\n        max-width: 800px;\r\n        font-size: 14px;\r\n    }\r\n    .changelog :global(h1) {\r\n        font-size: 18px;\r\n        margin: 20px 0 5px 0;\r\n    }\r\n    .changelog :global(p) {\r\n        margin-bottom: 0.4em;\r\n        font-size: 14px !important;\r\n    }\r\n    .changelog :global(img) {\r\n        margin-right: 21px;\r\n    }\r\n    .changelog :global(ul) {\r\n        list-style-position: outside;\r\n        padding: 0 10px 10px 10px;\r\n        margin: 0 0 0 15px;\r\n    }\r\n    .changelog :global(li) {\r\n        margin-bottom: 3px;\r\n    }\r\n    .changelog :global(a) {\r\n        text-decoration: none;\r\n        color: #ffffff;\r\n    }\r\n    .changelog :global(a:hover) {\r\n        color: #66c0f4;\r\n    }\r\n</style>", "import Version from \"@Core/Version\";\r\nimport Info from \"@Core/Info\";\r\nimport Settings from \"@Options/Data/Settings\";\r\nimport Changelog from \"@Core/Update/Changelog.svelte\";\r\n\r\nexport default class ChangelogHandler {\r\n\r\n    static async checkVersion(): Promise<void> {\r\n        const lastVersion = Version.fromString(Settings.version);\r\n        const currentVersion = Version.fromString(Info.version);\r\n\r\n        if (currentVersion.isAfter(lastVersion) && Settings.version_show) {\r\n            const changelog = new Changelog({\r\n                target: document.body,\r\n                props: {lastVersion}\r\n            });\r\n            changelog.$on(\"close\", () => changelog.$destroy());\r\n        }\r\n\r\n        Settings.version = Info.version;\r\n    }\r\n}\r\n", "import Page from \"@Content/Features/Page\";\r\nimport LanguageFactory from \"@Core/Localization/LanguageFactory\";\r\nimport UserFactory from \"@Core/User/UserFactory\";\r\nimport AppConfigFactory from \"@Core/AppConfig/AppConfigFactory\";\r\nimport type AppConfig from \"@Core/AppConfig/AppConfig\";\r\nimport type Language from \"@Core/Localization/Language\";\r\nimport type UserInterface from \"@Core/User/UserInterface\";\r\nimport ProgressBar from \"@Content/Modules/Widgets/ProgressBar\";\r\nimport AugmentedSteam from \"@Content/Modules/AugmentedSteam\";\r\nimport ChangelogHandler from \"@Core/Update/ChangelogHandler\";\r\nimport ITAD from \"@Content/Modules/ITAD\";\r\n\r\nexport default class LegacyPage extends Page {\r\n\r\n    override check(): boolean {\r\n        return !!document.getElementById(\"global_header\");\r\n    }\r\n\r\n    protected override async getAppConfig(factory: AppConfigFactory): Promise<AppConfig> {\r\n        return factory.createFromLegacy();\r\n    }\r\n\r\n    protected override async getLanguage(factory: LanguageFactory): Promise<Language|null> {\r\n       return factory.createFromLegacy();\r\n    }\r\n\r\n    protected override getUser(factory: UserFactory): Promise<UserInterface> {\r\n        return factory.createFromLegacy();\r\n    }\r\n\r\n    protected override async preApply(language: Language|null, user: UserInterface): Promise<void> {\r\n        ProgressBar.buildLegacy();\r\n\r\n        await (new AugmentedSteam(language, user, false))\r\n            .build();\r\n\r\n        await ChangelogHandler.checkVersion();\r\n        await ITAD.init(user);\r\n    }\r\n}\r\n", "import LegacyPage from \"@Content/Features/LegacyPage\";\r\n\r\nexport default class StorePage extends LegacyPage {}\r\n", "/**\r\n * @contentScript\r\n * @match *://*.steampowered.com/app/*\r\n */\r\n\r\nimport CApp from \"@Content/Features/Store/App/CApp\";\r\nimport StorePage from \"@Content/Features/StorePage\";\r\n\r\n(new StorePage(CApp)).run();\r\n"],
  "mappings": "m0BAMA,aAEA,GAAI,CAACA,WAAWC,QAAQC,SAASC,GAC/B,MAAM,IAAIC,MAAM,2DAAV,EAGR,GAAI,OAAOJ,WAAWK,QAAY,KAAeC,OAAOC,eAAeP,WAAWK,OAAjC,IAA8CC,OAAOE,UAAW,CAC/G,IAAMC,EAAmD,0DAOnDC,EAAWC,GAAiB,CAIhC,IAAMC,EAAc,CAClB,OAAU,CACR,MAAS,CACP,QAAW,EACX,QAAW,CAFJ,EAIT,SAAY,CACV,QAAW,EACX,QAAW,CAFD,EAIZ,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,OAAU,CACR,QAAW,EACX,QAAW,CAFH,CAbF,EAkBV,UAAa,CACX,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,YAAe,CACb,QAAW,EACX,QAAW,CAFE,EAIf,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,WAAc,CACZ,QAAW,EACX,QAAW,CAFC,EAId,QAAW,CACT,QAAW,EACX,QAAW,CAFF,EAIX,KAAQ,CACN,QAAW,EACX,QAAW,CAFL,EAIR,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,WAAc,CACZ,QAAW,EACX,QAAW,CAFC,EAId,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,OAAU,CACR,QAAW,EACX,QAAW,CAFH,CAzCC,EA8Cb,cAAiB,CACf,QAAW,CACT,QAAW,EACX,QAAW,EACX,qBAAwB,EAHf,EAKX,OAAU,CACR,QAAW,EACX,QAAW,EACX,qBAAwB,EAHhB,EAKV,wBAA2B,CACzB,QAAW,EACX,QAAW,CAFc,EAI3B,aAAgB,CACd,QAAW,EACX,QAAW,CAFG,EAIhB,SAAY,CACV,QAAW,EACX,QAAW,CAFD,EAIZ,SAAY,CACV,QAAW,EACX,QAAW,CAFD,EAIZ,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,wBAA2B,CACzB,QAAW,EACX,QAAW,EACX,qBAAwB,EAHC,EAK3B,aAAgB,CACd,QAAW,EACX,QAAW,EACX,qBAAwB,EAHV,EAKhB,QAAW,CACT,QAAW,EACX,QAAW,CAFF,EAIX,SAAY,CACV,QAAW,EACX,QAAW,EACX,qBAAwB,EAHd,EAKZ,SAAY,CACV,QAAW,EACX,QAAW,EACX,qBAAwB,EAHd,CAlDG,EAwDjB,aAAgB,CACd,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,YAAe,CACb,QAAW,EACX,QAAW,CAFE,EAIf,cAAiB,CACf,QAAW,EACX,QAAW,CAFI,EAIjB,gBAAmB,CACjB,QAAW,EACX,QAAW,CAFM,EAInB,eAAkB,CAChB,QAAW,EACX,QAAW,CAFK,EAIlB,cAAiB,CACf,QAAW,EACX,QAAW,CAFI,EAIjB,mBAAsB,CACpB,QAAW,EACX,QAAW,CAFS,EAItB,gBAAmB,CACjB,QAAW,EACX,QAAW,CAFM,EAInB,iBAAoB,CAClB,QAAW,EACX,QAAW,CAFO,EAIpB,SAAY,CACV,QAAW,EACX,QAAW,CAFD,CArCE,EA0ChB,SAAY,CACV,OAAU,CACR,QAAW,EACX,QAAW,CAFH,CADA,EAMZ,aAAgB,CACd,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,OAAU,CACR,QAAW,EACX,QAAW,CAFH,CATI,EAchB,QAAW,CACT,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,mBAAsB,CACpB,QAAW,EACX,QAAW,CAFS,EAItB,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,IAAO,CACL,QAAW,EACX,QAAW,CAFN,CAjBE,EAsBX,SAAY,CACV,gBAAmB,CACjB,KAAQ,CACN,QAAW,EACX,QAAW,EACX,kBAAqB,EAHf,CADS,EAOnB,OAAU,CACR,OAAU,CACR,QAAW,EACX,QAAW,EACX,kBAAqB,EAHb,EAKV,SAAY,CACV,kBAAqB,CACnB,QAAW,EACX,QAAW,CAFQ,CADX,CANJ,CARA,EAsBZ,UAAa,CACX,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,SAAY,CACV,QAAW,EACX,QAAW,CAFD,EAIZ,MAAS,CACP,QAAW,EACX,QAAW,CAFJ,EAIT,YAAe,CACb,QAAW,EACX,QAAW,CAFE,EAIf,KAAQ,CACN,QAAW,EACX,QAAW,EACX,qBAAwB,EAHlB,EAKR,MAAS,CACP,QAAW,EACX,QAAW,CAFJ,EAIT,WAAc,CACZ,QAAW,EACX,QAAW,CAFC,EAId,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,KAAQ,CACN,QAAW,EACX,QAAW,EACX,qBAAwB,EAHlB,CAtCG,EA4Cb,UAAa,CACX,0BAA6B,CAC3B,QAAW,EACX,QAAW,CAFgB,EAI7B,yBAA4B,CAC1B,QAAW,EACX,QAAW,CAFe,CALjB,EAUb,QAAW,CACT,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,YAAe,CACb,QAAW,EACX,QAAW,CAFE,EAIf,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,OAAU,CACR,QAAW,EACX,QAAW,CAFH,CArBD,EA0BX,KAAQ,CACN,eAAkB,CAChB,QAAW,EACX,QAAW,CAFK,EAIlB,mBAAsB,CACpB,QAAW,EACX,QAAW,CAFS,CALhB,EAUR,SAAY,CACV,kBAAqB,CACnB,QAAW,EACX,QAAW,CAFQ,CADX,EAMZ,KAAQ,CACN,WAAc,CACZ,QAAW,EACX,QAAW,CAFC,CADR,EAMR,WAAc,CACZ,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,QAAW,CACT,QAAW,EACX,QAAW,CAFF,EAIX,WAAc,CACZ,QAAW,EACX,QAAW,CAFC,EAId,cAAiB,CACf,QAAW,EACX,QAAW,CAFI,CAjBL,EAsBd,cAAiB,CACf,MAAS,CACP,QAAW,EACX,QAAW,CAFJ,EAIT,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,mBAAsB,CACpB,QAAW,EACX,QAAW,CAFS,EAItB,OAAU,CACR,QAAW,EACX,QAAW,CAFH,CAjBK,EAsBjB,WAAc,CACZ,SAAY,CACV,QAAW,EACX,QAAW,CAFD,EAIZ,SAAY,CACV,QAAW,EACX,QAAW,CAFD,EAIZ,KAAQ,CACN,QAAW,EACX,QAAW,EACX,qBAAwB,EAHlB,EAKR,QAAW,CACT,QAAW,EACX,QAAW,CAFF,EAIX,SAAY,CACV,QAAW,EACX,QAAW,EACX,qBAAwB,EAHd,EAKZ,SAAY,CACV,QAAW,EACX,QAAW,EACX,qBAAwB,EAHd,EAKZ,KAAQ,CACN,QAAW,EACX,QAAW,EACX,qBAAwB,EAHlB,CA5BI,EAkCd,YAAe,CACb,SAAY,CACV,QAAW,EACX,QAAW,CAFD,EAIZ,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,QAAW,CACT,QAAW,EACX,QAAW,CAFF,CAbE,EAkBf,QAAW,CACT,kBAAqB,CACnB,QAAW,EACX,QAAW,CAFQ,EAIrB,gBAAmB,CACjB,QAAW,EACX,QAAW,CAFM,EAInB,gBAAmB,CACjB,QAAW,EACX,QAAW,CAFM,EAInB,mBAAsB,CACpB,QAAW,EACX,QAAW,CAFS,EAItB,YAAe,CACb,QAAW,EACX,QAAW,CAFE,EAIf,kBAAqB,CACnB,QAAW,EACX,QAAW,CAFQ,EAIrB,gBAAmB,CACjB,QAAW,EACX,QAAW,CAFM,CAzBV,EA8BX,SAAY,CACV,WAAc,CACZ,QAAW,EACX,QAAW,CAFC,EAId,kBAAqB,CACnB,QAAW,EACX,QAAW,CAFQ,EAIrB,QAAW,CACT,QAAW,EACX,QAAW,CAFF,CATD,EAcZ,QAAW,CACT,MAAS,CACP,MAAS,CACP,QAAW,EACX,QAAW,CAFJ,EAIT,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,cAAiB,CACf,QAAW,EACX,QAAW,CAFI,EAIjB,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,IAAO,CACL,QAAW,EACX,QAAW,CAFN,CAjBA,EAsBT,QAAW,CACT,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,cAAiB,CACf,QAAW,EACX,QAAW,CAFI,CALR,EAUX,KAAQ,CACN,MAAS,CACP,QAAW,EACX,QAAW,CAFJ,EAIT,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,cAAiB,CACf,QAAW,EACX,QAAW,CAFI,EAIjB,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,IAAO,CACL,QAAW,EACX,QAAW,CAFN,CAjBD,CAjCC,EAwDX,KAAQ,CACN,kBAAqB,CACnB,QAAW,EACX,QAAW,CAFQ,EAIrB,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,eAAkB,CAChB,QAAW,EACX,QAAW,CAFK,EAIlB,QAAW,CACT,QAAW,EACX,QAAW,CAFF,EAIX,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,cAAiB,CACf,QAAW,EACX,QAAW,CAFI,EAIjB,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,WAAc,CACZ,QAAW,EACX,QAAW,CAFC,EAId,QAAW,CACT,QAAW,EACX,QAAW,CAFF,EAIX,gBAAmB,CACjB,QAAW,EACX,QAAW,CAFM,EAInB,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,KAAQ,CACN,QAAW,EACX,QAAW,CAFL,EAIR,MAAS,CACP,QAAW,EACX,QAAW,CAFJ,EAIT,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,UAAa,CACX,QAAW,EACX,QAAW,CAFA,EAIb,YAAe,CACb,QAAW,EACX,QAAW,CAFE,EAIf,QAAW,CACT,QAAW,EACX,QAAW,CAFF,EAIX,gBAAmB,CACjB,QAAW,EACX,QAAW,CAFM,EAInB,OAAU,CACR,QAAW,EACX,QAAW,CAFH,CAzFJ,EA8FR,SAAY,CACV,IAAO,CACL,QAAW,EACX,QAAW,CAFN,CADG,EAMZ,cAAiB,CACf,aAAgB,CACd,QAAW,EACX,QAAW,CAFG,EAIhB,SAAY,CACV,QAAW,EACX,QAAW,CAFD,CALG,EAUjB,WAAc,CACZ,uBAA0B,CACxB,QAAW,EACX,QAAW,CAFa,CADd,EAMd,QAAW,CACT,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,IAAO,CACL,QAAW,EACX,QAAW,CAFN,EAIP,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,WAAc,CACZ,QAAW,EACX,QAAW,CAFC,EAId,eAAkB,CAChB,QAAW,EACX,QAAW,CAFK,EAIlB,OAAU,CACR,QAAW,EACX,QAAW,CAFH,EAIV,OAAU,CACR,QAAW,EACX,QAAW,CAFH,CAzBD,CAjoBO,EAiqBpB,GAAIN,OAAOO,KAAKD,CAAZ,EAAyBE,SAAW,EACtC,MAAM,IAAIV,MAAM,6DAAV,EAaR,MAAMW,UAAuBC,OAAQ,CACnCC,YAAYC,EAAYC,EAAQC,OAAW,CACzC,MAAMD,CAAN,EACA,KAAKD,WAAaA,CACnB,CAEDG,IAAIC,EAAK,CACP,OAAK,KAAKC,IAAID,CAAT,GACH,KAAKE,IAAIF,EAAK,KAAKJ,WAAWI,CAAhB,CAAd,EAGK,MAAMD,IAAIC,CAAV,CACR,CAZkC,CAsBrC,IAAMG,EAAaC,GACVA,GAAS,OAAOA,GAAU,UAAY,OAAOA,EAAMC,MAAS,WAkC/DC,EAAe,CAACC,EAASC,IACtB,IAAIC,IAAiB,CACtBpB,EAAcT,QAAQ8B,UACxBH,EAAQI,OAAO,IAAI7B,MAAMO,EAAcT,QAAQ8B,UAAUE,OAA1C,CAAf,EACSJ,EAASK,mBACRJ,EAAajB,QAAU,GAAKgB,EAASK,oBAAsB,GACrEN,EAAQO,QAAQL,EAAa,CAAD,CAA5B,EAEAF,EAAQO,QAAQL,CAAhB,CAEH,EAGGM,EAAsBC,GAAYA,GAAW,EAAI,WAAa,YA4B9DC,EAAoB,CAACC,EAAMV,IACxB,SAA8BW,KAAWC,EAAM,CACpD,GAAIA,EAAK5B,OAASgB,EAASa,QACzB,MAAM,IAAIvC,MAAO,qBAAoB0B,EAASa,OAAQ,IAAGN,EAAmBP,EAASa,OAAV,CAAmB,QAAOH,CAAK,WAAUE,EAAK5B,MAAO,EAA1H,EAGR,GAAI4B,EAAK5B,OAASgB,EAASc,QACzB,MAAM,IAAIxC,MAAO,oBAAmB0B,EAASc,OAAQ,IAAGP,EAAmBP,EAASc,OAAV,CAAmB,QAAOJ,CAAK,WAAUE,EAAK5B,MAAO,EAAzH,EAGR,OAAO,IAAI+B,QAAQ,CAACT,EAASH,KAAW,CACtC,GAAIH,EAASgB,qBAIX,GAAI,CACFL,EAAOD,CAAD,EAAO,GAAGE,EAAMd,EAAa,CAACQ,QAAAA,EAASH,OAAAA,EAAV,EAAmBH,CAApB,CAAlC,CACD,OAAQiB,EAAS,CAChBC,QAAQC,KAAM,GAAET,CAAK,2GACwCO,CAD7D,EAGAN,EAAOD,CAAD,EAAO,GAAGE,CAAhB,EAIAZ,EAASgB,qBAAuB,GAChChB,EAASoB,WAAa,GAEtBd,EAAO,CACR,MACQN,EAASoB,YAClBT,EAAOD,CAAD,EAAO,GAAGE,CAAhB,EACAN,EAAO,GAEPK,EAAOD,CAAD,EAAO,GAAGE,EAAMd,EAAa,CAACQ,QAAAA,EAASH,OAAAA,EAAV,EAAmBH,CAApB,CAAlC,CAEH,CA1BM,CA2BR,EAsBGqB,EAAa,CAACV,EAAQW,EAAQC,IAC3B,IAAIC,MAAMF,EAAQ,CACvBG,MAAMC,EAAcC,EAASf,EAAM,CACjC,OAAOW,EAAQK,KAAKD,EAAShB,EAAQ,GAAGC,CAAjC,CACR,CAHsB,CAAlB,EAOLiB,EAAiBC,SAASF,KAAKG,KAAKvD,OAAOE,UAAUmD,cAApC,EAyBfG,EAAa,CAACrB,EAAQsB,EAAW,CAAA,EAAIjC,EAAW,CAAA,IAAO,CAC3D,IAAIkC,EAAQ1D,OAAO2D,OAAO,IAAd,EACRC,EAAW,CACb3C,IAAI4C,GAAaC,EAAM,CACrB,OAAOA,KAAQ3B,GAAU2B,KAAQJ,CAClC,EAED3C,IAAI8C,GAAaC,EAAMC,GAAU,CAC/B,GAAID,KAAQJ,EACV,OAAOA,EAAMI,CAAD,EAGd,GAAI,EAAEA,KAAQ3B,GACZ,OAGF,IAAIf,GAAQe,EAAO2B,CAAD,EAElB,GAAI,OAAO1C,IAAU,WAInB,GAAI,OAAOqC,EAASK,CAAD,GAAW,WAE5B1C,GAAQyB,EAAWV,EAAQA,EAAO2B,CAAD,EAAQL,EAASK,CAAD,CAA/B,UACTT,EAAe7B,EAAUsC,CAAX,EAAkB,CAGzC,IAAIf,GAAUd,EAAkB6B,EAAMtC,EAASsC,CAAD,CAAf,EAC/B1C,GAAQyB,EAAWV,EAAQA,EAAO2B,CAAD,EAAQf,EAAvB,CACnB,MAGC3B,GAAQA,GAAMmC,KAAKpB,CAAX,UAED,OAAOf,IAAU,UAAYA,KAAU,OACtCiC,EAAeI,EAAUK,CAAX,GACdT,EAAe7B,EAAUsC,CAAX,GAIxB1C,GAAQoC,EAAWpC,GAAOqC,EAASK,CAAD,EAAQtC,EAASsC,CAAD,CAAhC,UACTT,EAAe7B,EAAU,GAAX,EAEvBJ,GAAQoC,EAAWpC,GAAOqC,EAASK,CAAD,EAAQtC,EAAS,GAAD,CAAhC,MAIlBxB,eAAOgE,eAAeN,EAAOI,EAAM,CACjCG,aAAc,GACdC,WAAY,GACZnD,KAAM,CACJ,OAAOoB,EAAO2B,CAAD,CACd,EACD5C,IAAIE,GAAO,CACTe,EAAO2B,CAAD,EAAS1C,EAChB,CARgC,CAAnC,EAWOA,GAGTsC,OAAAA,EAAMI,CAAD,EAAS1C,GACPA,EACR,EAEDF,IAAI2C,GAAaC,EAAM1C,GAAO2C,GAAU,CACtC,OAAID,KAAQJ,EACVA,EAAMI,CAAD,EAAS1C,GAEde,EAAO2B,CAAD,EAAS1C,GAEV,EACR,EAED4C,eAAeH,GAAaC,EAAMK,GAAM,CACtC,OAAOC,QAAQJ,eAAeN,EAAOI,EAAMK,EAApC,CACR,EAEDE,eAAeR,GAAaC,EAAM,CAChC,OAAOM,QAAQC,eAAeX,EAAOI,CAA9B,CACR,CA/EY,EA4FXD,EAAc7D,OAAO2D,OAAOxB,CAAd,EAClB,OAAO,IAAIa,MAAMa,EAAaD,CAAvB,CACR,EAkBKU,EAAYC,IAAe,CAC/BC,YAAYrC,EAAQsC,KAAarC,EAAM,CACrCD,EAAOqC,YAAYD,EAAWxD,IAAI0D,CAAf,EAA0B,GAAGrC,CAAhD,CACD,EAEDsC,YAAYvC,EAAQsC,EAAU,CAC5B,OAAOtC,EAAOuC,YAAYH,EAAWxD,IAAI0D,CAAf,CAAnB,CACR,EAEDE,eAAexC,EAAQsC,EAAU,CAC/BtC,EAAOwC,eAAeJ,EAAWxD,IAAI0D,CAAf,CAAtB,CACD,CAX8B,GAc3BG,EAA4B,IAAInE,EAAegE,GAC/C,OAAOA,GAAa,WACfA,EAWF,SAA2BI,EAAK,CACrC,IAAMC,EAAatB,EAAWqB,EAAK,CAAA,EAAmB,CACpDE,WAAY,CACV1C,QAAS,EACTC,QAAS,CAFC,CADwC,CAAzB,EAM7BmC,EAASK,CAAD,CACT,CArB+B,EAwB5BE,EAAoB,IAAIvE,EAAegE,GACvC,OAAOA,GAAa,WACfA,EAoBF,SAAmB7C,EAASqD,EAAQC,EAAc,CACvD,IAAIC,EAAsB,GAEtBC,GACAC,EAAsB,IAAI9C,QAAQT,IAAW,CAC/CsD,GAAsB,SAASE,GAAU,CACvCH,EAAsB,GACtBrD,GAAQwD,EAAD,CACR,CACF,CALyB,EAOtBC,GACJ,GAAI,CACFA,GAASd,EAAS7C,EAASqD,EAAQG,EAAlB,CAClB,OAAQI,GAAK,CACZD,GAAShD,QAAQZ,OAAO6D,EAAf,CACV,CAED,IAAMC,GAAmBF,KAAW,IAAQpE,EAAWoE,EAAD,EAKtD,GAAIA,KAAW,IAAQ,CAACE,IAAoB,CAACN,EAC3C,MAAO,GAOT,IAAMO,GAAsBnE,IAAY,CACtCA,GAAQF,KAAKsE,IAAO,CAElBT,EAAaS,EAAD,CACb,EAAEC,IAAS,CAGV,IAAIhE,GACAgE,KAAUA,cAAiB9F,OAC3B,OAAO8F,GAAMhE,SAAY,UAC3BA,GAAUgE,GAAMhE,QAEhBA,GAAU,+BAGZsD,EAAa,CACXW,kCAAmC,GACnCjE,QAAAA,EAFW,CAAD,CAIb,CAlBD,EAkBGkE,MAAMN,IAAO,CAEd9C,QAAQkD,MAAM,0CAA2CJ,EAAzD,CACD,CArBD,CAsBD,EAKD,OACEE,GADED,GACiBF,GAEAF,CAFD,EAMb,EACR,CAzFuB,EA4FpBU,EAA6B,CAAC,CAACpE,OAAAA,EAAQG,QAAAA,CAAT,EAAmBkE,IAAU,CAC3D3F,EAAcT,QAAQ8B,UAIpBrB,EAAcT,QAAQ8B,UAAUE,UAAYzB,EAC9C2B,EAAO,EAEPH,EAAO,IAAI7B,MAAMO,EAAcT,QAAQ8B,UAAUE,OAA1C,CAAD,EAECoE,GAASA,EAAMH,kCAGxBlE,EAAO,IAAI7B,MAAMkG,EAAMpE,OAAhB,CAAD,EAENE,EAAQkE,CAAD,CAEV,EAEKC,EAAqB,CAAC/D,EAAMV,EAAU0E,KAAoB9D,IAAS,CACvE,GAAIA,EAAK5B,OAASgB,EAASa,QACzB,MAAM,IAAIvC,MAAO,qBAAoB0B,EAASa,OAAQ,IAAGN,EAAmBP,EAASa,OAAV,CAAmB,QAAOH,CAAK,WAAUE,EAAK5B,MAAO,EAA1H,EAGR,GAAI4B,EAAK5B,OAASgB,EAASc,QACzB,MAAM,IAAIxC,MAAO,oBAAmB0B,EAASc,OAAQ,IAAGP,EAAmBP,EAASc,OAAV,CAAmB,QAAOJ,CAAK,WAAUE,EAAK5B,MAAO,EAAzH,EAGR,OAAO,IAAI+B,QAAQ,CAACT,EAASH,IAAW,CACtC,IAAMwE,GAAYJ,EAA2BxC,KAAK,KAAM,CAACzB,QAAAA,EAASH,OAAAA,CAAV,CAAtC,EAClBS,EAAKgE,KAAKD,EAAV,EACAD,EAAgBG,YAAY,GAAGjE,CAA/B,CACD,CAJM,CAKR,EAEKkE,EAAiB,CACrBC,SAAU,CACRC,QAAS,CACPC,kBAAmBnC,EAAUM,CAAD,CADrB,CADD,EAKVhF,QAAS,CACP8G,UAAWpC,EAAUU,CAAD,EACpB2B,kBAAmBrC,EAAUU,CAAD,EAC5BqB,YAAaJ,EAAmB1C,KAAK,KAAM,cAAe,CAAClB,QAAS,EAAGC,QAAS,CAAtB,CAA7C,CAHN,EAKTsE,KAAM,CACJP,YAAaJ,EAAmB1C,KAAK,KAAM,cAAe,CAAClB,QAAS,EAAGC,QAAS,CAAtB,CAA7C,CADT,CAXe,EAejBuE,EAAkB,CACtBC,MAAO,CAACzE,QAAS,EAAGC,QAAS,CAAtB,EACPvB,IAAK,CAACsB,QAAS,EAAGC,QAAS,CAAtB,EACLpB,IAAK,CAACmB,QAAS,EAAGC,QAAS,CAAtB,CAHiB,EAKxBhC,OAAAA,EAAYyG,QAAU,CACpBP,QAAS,CAAC,IAAKK,CAAN,EACTG,SAAU,CAAC,IAAKH,CAAN,EACVI,SAAU,CAAC,IAAKJ,CAAN,CAHU,EAMfrD,EAAWnD,EAAeiG,EAAgBhG,CAAhC,CAClB,EAID4G,EAAOC,QAAU/G,EAAST,MAAD,CAC1B,MACCuH,EAAOC,QAAUzH,WAAWK,2OC7rC9B,GAAM,CACJqH,QAAAA,EACAC,eAAAA,EACAC,SAAAA,EACAC,eAAAA,EACAC,yBAAAA,CACF,EAAIC,OAEA,CAAEC,OAAAA,EAAQC,KAAAA,EAAMC,OAAAA,CAAO,EAAIH,OAC3B,CAAEI,MAAAA,EAAOC,UAAAA,CAAU,EAAI,OAAOC,QAAY,KAAeA,QAExDL,IACHA,EAAS,SAAUM,EAAG,CACpB,OAAOA,IAINL,IACHA,EAAO,SAAUK,EAAG,CAClB,OAAOA,IAINH,IACHA,EAAQ,SAAUI,EAAKC,GAAWC,GAAM,CACtC,OAAOF,EAAIJ,MAAMK,GAAWC,EAAI,IAI/BL,IACHA,EAAY,SAAUM,EAAMD,GAAM,CAChC,OAAO,IAAIC,EAAK,GAAGD,EAAI,IAI3B,IAAME,EAAeC,EAAQC,MAAMC,UAAUC,OAAO,EAE9CC,EAAWJ,EAAQC,MAAMC,UAAUG,GAAG,EACtCC,EAAYN,EAAQC,MAAMC,UAAUK,IAAI,EAGxCC,EAAoBR,EAAQS,OAAOP,UAAUQ,WAAW,EACxDC,EAAiBX,EAAQS,OAAOP,UAAUU,QAAQ,EAClDC,EAAcb,EAAQS,OAAOP,UAAUY,KAAK,EAC5CC,EAAgBf,EAAQS,OAAOP,UAAUc,OAAO,EAChDC,EAAgBjB,EAAQS,OAAOP,UAAUgB,OAAO,EAChDC,EAAanB,EAAQS,OAAOP,UAAUkB,IAAI,EAE1CC,EAAuBrB,EAAQb,OAAOe,UAAUoB,cAAc,EAE9DC,EAAavB,EAAQwB,OAAOtB,UAAUuB,IAAI,EAE1CC,EAAkBC,EAAYC,SAAS,EAEvCC,EAAc7B,EAAQ8B,OAAOC,KAAK,EAQxC,SAAS/B,EAAQgC,GAAM,CACrB,OAAO,SAACC,EAAO,CAAA,QAAAC,GAAAC,UAAAC,OAAKvC,GAAI,IAAAI,MAAAiC,GAAAA,EAAAA,GAAA,EAAA,CAAA,EAAAG,GAAA,EAAAA,GAAAH,GAAAG,KAAJxC,GAAIwC,GAAAF,CAAAA,EAAAA,UAAAE,EAAA,EAAA,OAAK9C,EAAMyC,GAAMC,EAASpC,EAAI,CAAC,CACzD,CAQA,SAAS8B,EAAYK,GAAM,CACzB,OAAO,UAAA,CAAA,QAAAM,EAAAH,UAAAC,OAAIvC,GAAII,IAAAA,MAAAqC,CAAA,EAAAC,GAAA,EAAAA,GAAAD,EAAAC,KAAJ1C,GAAI0C,EAAA,EAAAJ,UAAAI,EAAA,EAAA,OAAK/C,EAAUwC,GAAMnC,EAAI,CAAC,CAC3C,CAUA,SAAS2C,EAASC,GAAKC,EAA8C,CAAA,IAAvCC,GAAiBR,UAAAC,OAAA,GAAAD,UAAA,CAAA,IAAAS,OAAAT,UAAA,CAAA,EAAG3B,EAC5CzB,GAIFA,EAAe0D,GAAK,IAAI,EAG1B,IAAII,GAAIH,EAAMN,OACd,KAAOS,MAAK,CACV,IAAIC,GAAUJ,EAAMG,EAAC,EACrB,GAAI,OAAOC,IAAY,SAAU,CAC/B,IAAMC,GAAYJ,GAAkBG,EAAO,EACvCC,KAAcD,KAEX9D,EAAS0D,CAAK,IACjBA,EAAMG,EAAC,EAAIE,IAGbD,GAAUC,GAEd,CAEAN,GAAIK,EAAO,EAAI,EACjB,CAEA,OAAOL,EACT,CAQA,SAASO,GAAWN,GAAO,CACzB,QAASO,EAAQ,EAAGA,EAAQP,GAAMN,OAAQa,IAChB5B,EAAqBqB,GAAOO,CAAK,IAGvDP,GAAMO,CAAK,EAAI,MAInB,OAAOP,EACT,CAQA,SAASQ,EAAMC,GAAQ,CACrB,IAAMC,EAAY9D,EAAO,IAAI,EAE7B,OAAW,CAAC+D,GAAUC,EAAK,IAAKxE,EAAQqE,EAAM,EACpB9B,EAAqB8B,GAAQE,EAAQ,IAGvDpD,MAAMsD,QAAQD,EAAK,EACrBF,EAAUC,EAAQ,EAAIL,GAAWM,EAAK,EAEtCA,IACA,OAAOA,IAAU,UACjBA,GAAME,cAAgBrE,OAEtBiE,EAAUC,EAAQ,EAAIH,EAAMI,EAAK,EAEjCF,EAAUC,EAAQ,EAAIC,IAK5B,OAAOF,CACT,CASA,SAASK,GAAaN,GAAQO,EAAM,CAClC,KAAOP,KAAW,MAAM,CACtB,IAAMQ,GAAOzE,EAAyBiE,GAAQO,CAAI,EAElD,GAAIC,GAAM,CACR,GAAIA,GAAKC,IACP,OAAO5D,EAAQ2D,GAAKC,GAAG,EAGzB,GAAI,OAAOD,GAAKL,OAAU,WACxB,OAAOtD,EAAQ2D,GAAKL,KAAK,CAE7B,CAEAH,GAASlE,EAAekE,EAAM,CAChC,CAEA,SAASU,IAAgB,CACvB,OAAO,IACT,CAEA,OAAOA,EACT,CC5LO,IAAMC,GAAO1E,EAAO,CACzB,IACA,OACA,UACA,UACA,OACA,UACA,QACA,QACA,IACA,MACA,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,KAAK,CACN,EAGY2E,GAAM3E,EAAO,CACxB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,OAAO,CACR,EAEY4E,GAAa5E,EAAO,CAC/B,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,cAAc,CACf,EAMY6E,GAAgB7E,EAAO,CAClC,UACA,gBACA,SACA,UACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,KAAK,CACN,EAEY8E,GAAS9E,EAAO,CAC3B,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,aACA,aAAa,CACd,EAIY+E,GAAmB/E,EAAO,CACrC,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,MAAM,CACP,EAEYgF,GAAOhF,EAAO,CAAC,OAAO,CAAC,ECrRvB0E,GAAO1E,EAAO,CACzB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,OACA,QACA,MAAM,CACP,EAEY2E,GAAM3E,EAAO,CACxB,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,YAAY,CACb,EAEY8E,GAAS9E,EAAO,CAC3B,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,OAAO,CACR,EAEYiF,GAAMjF,EAAO,CACxB,aACA,SACA,cACA,YACA,aAAa,CACd,ECvWYkF,GAAgBjF,EAAK,2BAA2B,EAChDkF,EAAWlF,EAAK,uBAAuB,EACvCmF,GAAcnF,EAAK,eAAe,EAClCoF,GAAYpF,EAAK,4BAA4B,EAC7CqF,GAAYrF,EAAK,gBAAgB,EACjCsF,GAAiBtF,EAC5B,2FACF,EACauF,GAAoBvF,EAAK,uBAAuB,EAChDwF,GAAkBxF,EAC7B,6DACF,EACayF,GAAezF,EAAK,SAAS,EAC7B0F,GAAi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",
  "names": ["globalThis", "chrome", "runtime", "id", "Error", "browser", "Object", "getPrototypeOf", "prototype", "CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE", "wrapAPIs", "extensionAPIs", "apiMetadata", "keys", "length", "DefaultWeakMap", "WeakMap", "constructor", "createItem", "items", "undefined", "get", "key", "has", "set", "isThenable", "value", "then", "makeCallback", "promise", "metadata", "callbackArgs", "lastError", "reject", "message", "singleCallbackArg", "resolve", "pluralizeArguments", "numArgs", "wrapAsyncFunction", "name", "target", "args", "minArgs", "maxArgs", "Promise", "fallbackToNoCallback", "cbError", "console", "warn", "noCallback", "wrapMethod", "method", "wrapper", "Proxy", "apply", "targetMethod", "thisObj", "call", "hasOwnProperty", "Function", "bind", "wrapObject", "wrappers", "cache", "create", "handlers", "proxyTarget", "prop", "receiver", "defineProperty", "configurable", "enumerable", "desc", "Reflect", "deleteProperty", "wrapEvent", "wrapperMap", "addListener", "listener", "hasListener", "removeListener", "onRequestFinishedWrappers", "req", "wrappedReq", "getContent", "onMessageWrappers", "sender", "sendResponse", "didCallSendResponse", "wrappedSendResponse", "sendResponsePromise", "response", "result", "err", "isResultThenable", "sendPromisedResult", "msg", "error", "__mozWebExtensionPolyfillReject__", "catch", "wrappedSendMessageCallback", "reply", "wrappedSendMessage", "apiNamespaceObj", "wrappedCb", "push", "sendMessage", "staticWrappers", "devtools", "network", "onRequestFinished", "onMessage", "onMessageExternal", "tabs", "settingMetadata", "clear", "privacy", "services", "websites", "module", "exports", "entries", "setPrototypeOf", "isFrozen", "getPrototypeOf", "getOwnPropertyDescriptor", "Object", "freeze", "seal", "create", "apply", "construct", "Reflect", "x", "fun", "thisValue", "args", "Func", "arrayForEach", "unapply", "Array", "prototype", "forEach", "arrayPop", "pop", "arrayPush", "push", "stringToLowerCase", "String", "toLowerCase", "stringToString", "toString", "stringMatch", "match", "stringReplace", "replace", "stringIndexOf", "indexOf", "stringTrim", "trim", "objectHasOwnProperty", "hasOwnProperty", "regExpTest", "RegExp", "test", "typeErrorCreate", "unconstruct", "TypeError", "numberIsNaN", "Number", "isNaN", "func", "thisArg", "_len", "arguments", "length", "_key", "_len2", "_key2", "addToSet", "set", "array", "transformCaseFunc", "undefined", "l", "element", "lcElement", "cleanArray", "index", "clone", "object", "newObject", "property", "value", "isArray", "constructor", "lookupGetter", "prop", "desc", "get", "fallbackValue", "html", "svg", "svgFilters", "svgDisallowed", "mathMl", "mathMlDisallowed", "text", "xml", "MUSTACHE_EXPR", "ERB_EXPR", "TMPLIT_EXPR", "DATA_ATTR", "ARIA_ATTR", "IS_ALLOWED_URI", "IS_SCRIPT_OR_DATA", "ATTR_WHITESPACE", "DOCTYPE_NAME", "CUSTOM_ELEMENT", "NODE_TYPE", "attribute", "cdataSection", "entityReference", "entityNode", "progressingInstruction", "comment", "document", "documentType", "documentFragment", "notation", "getGlobal", "window", "_createTrustedTypesPolicy", "trustedTypes", "purifyHostElement", "createPolicy", "suffix", "ATTR_NAME", "hasAttribute", "getAttribute", "policyName", "createHTML", "createScriptURL", "scriptUrl", "console", "warn", "createDOMPurify", "DOMPurify", "root", "version", "VERSION", "removed", "nodeType", "isSupported", "originalDocument", "currentScript", "DocumentFragment", "HTMLTemplateElement", "Node", "Element", "NodeFilter", "NamedNodeMap", "MozNamedAttrMap", "HTMLFormElement", "DOMParser", "ElementPrototype", "cloneNode", "getNextSibling", "getChildNodes", "getParentNode", "template", "createElement", "content", "ownerDocument", "trustedTypesPolicy", "emptyHTML", "implementation", "createNodeIterator", "createDocumentFragment", "getElementsByTagName", "importNode", "hooks", "createHTMLDocument", "EXPRESSIONS", "ALLOWED_TAGS", "DEFAULT_ALLOWED_TAGS", "TAGS", "ALLOWED_ATTR", "DEFAULT_ALLOWED_ATTR", "ATTRS", "CUSTOM_ELEMENT_HANDLING", "tagNameCheck", "writable", "configurable", "enumerable", "attributeNameCheck", "allowCustomizedBuiltInElements", "FORBID_TAGS", "FORBID_ATTR", "ALLOW_ARIA_ATTR", "ALLOW_DATA_ATTR", "ALLOW_UNKNOWN_PROTOCOLS", "ALLOW_SELF_CLOSE_IN_ATTR", "SAFE_FOR_TEMPLATES", "SAFE_FOR_XML", "WHOLE_DOCUMENT", "SET_CONFIG", "FORCE_BODY", "RETURN_DOM", "RETURN_DOM_FRAGMENT", "RETURN_TRUSTED_TYPE", "SANITIZE_DOM", "SANITIZE_NAMED_PROPS", "SANITIZE_NAMED_PROPS_PREFIX", "KEEP_CONTENT", "IN_PLACE", "USE_PROFILES", "FORBID_CONTENTS", "DEFAULT_FORBID_CONTENTS", "DATA_URI_TAGS", "DEFAULT_DATA_URI_TAGS", "URI_SAFE_ATTRIBUTES", "DEFAULT_URI_SAFE_ATTRIBUTES", "MATHML_NAMESPACE", "SVG_NAMESPACE", "HTML_NAMESPACE", "NAMESPACE", "IS_EMPTY_INPUT", "ALLOWED_NAMESPACES", "DEFAULT_ALLOWED_NAMESPACES", "PARSER_MEDIA_TYPE", "SUPPORTED_PARSER_MEDIA_TYPES", "DEFAULT_PARSER_MEDIA_TYPE", "CONFIG", "MAX_NESTING_DEPTH", "formElement", "isRegexOrFunction", "testValue", "Function", "_parseConfig", "cfg", "ADD_URI_SAFE_ATTR", "ADD_DATA_URI_TAGS", "ALLOWED_URI_REGEXP", "ADD_TAGS", "ADD_ATTR", "table", "tbody", "TRUSTED_TYPES_POLICY", "MATHML_TEXT_INTEGRATION_POINTS", "HTML_INTEGRATION_POINTS", "COMMON_SVG_AND_HTML_ELEMENTS", "ALL_SVG_TAGS", "ALL_MATHML_TAGS", "_checkValidNamespace", "parent", "tagName", "namespaceURI", "parentTagName", "Boolean", "_forceRemove", "node", "parentNode", "removeChild", "remove", "_removeAttribute", "name", "getAttributeNode", "from", "removeAttribute", "setAttribute", "_initDocument", "dirty", "doc", "leadingWhitespace", "matches", "dirtyPayload", "parseFromString", "documentElement", "createDocument", "innerHTML", "body", "insertBefore", "createTextNode", "childNodes", "call", "_createNodeIterator", "SHOW_ELEMENT", "SHOW_COMMENT", "SHOW_TEXT", "SHOW_PROCESSING_INSTRUCTION", "SHOW_CDATA_SECTION", "_isClobbered", "elm", "__depth", "__removalCount", "nodeName", "textContent", "attributes", "hasChildNodes", "_isNode", "_executeHook", "entryPoint", "currentNode", "data", "hook", "_sanitizeElements", "allowedTags", "firstElementChild", "_isBasicCustomElement", "childCount", "i", "childClone", "expr", "_isValidAttribute", "lcTag", "lcName", "_sanitizeAttributes", "hookEvent", "attrName", "attrValue", "keepAttr", "allowedAttributes", "attr", "forceKeepAttr", "getAttributeType", "setAttributeNS", "_sanitizeShadowDOM", "fragment", "shadowNode", "shadowIterator", "nextNode", "sanitize", "importedNode", "returnNode", "appendChild", "firstChild", "nodeIterator", "shadowroot", "shadowrootmode", "serializedHTML", "outerHTML", "doctype", "setConfig", "clearConfig", "isValidAttribute", "tag", "addHook", "hookFunction", "removeHook", "removeHooks", "removeAllHooks", "purify", "GameId", "type_", "id_", "AppId", "GameId", "url", "m", "CDNRegex_1", "CDNRegex_2", "element", "appid", "href", "src", "text", "regex", "result", "id", "__downloadDemoHeader", "__thewordunknown", "__moreOnSteampeek", "__viewInLibrary", "__support", "__email", "__contact", "__dlcDetails", "__badgeNotUnlocked", "__badgeLevel", "__each", "__getHelp", "__addSelectedDlcToCart", "__activate", "__couponApplicationNote", "__hide", "__cardsOwned", "__clearCache", "__viewBadgeProgress", "__badgeProgress", "__apppageSections", "__website", "__loading", "__homepageTabs", "__communityHub", "__viewOnWebsite", "__drmThirdParty", "__hoursShort", "__addToWishlist", "__addFullgameToWishlist", "__addToWaitlist", "__addFullgameToWaitlist", "__removeFromWaitlistTooltip", "__removeFullgameFromWaitlistTooltip", "__removeFromWishlistAndWaitlistTooltip", "__removeFullgameFromWishlistAndWaitlistTooltip", "__theworddefault", "__couponLearnMore_linkText", "__couponLearnMore_fullText", "__ownedCollection", "__viewBadge", "__viewAstats", "__contribute", "__readReviews", "__youtubeGameplay", "__youtubeReviews", "__packageInfo", "__homepageCurators", "__homepageTopnewreleases", "__homepageSidebar", "__usingLanguageReturn", "__save", "__viewinclient", "__apppageRecentupdates", "__apppageEaheader", "__apppageEabanner", "__apppageWorkshop", "__apppageGreenlight", "__apppageLegal", "__apppageFranchise", "__apppageMorefromfranchise", "__bugFeature", "__ratingDetails", "__familySharingNotice_notice", "__familySharingNotice_desc", "__visitStore", "__usingLanguage", "__loginWarning", "__purchaseDate", "__buy", "__buyPackage", "__moreInformation", "__regionUnavailable", "__export_download", "__never", "__couponAvailable", "__launchRandom", "__playGame", "__wishlist", "__onWaitlist", "__onWishlistAndWaitlist", "__ok", "__cancel", "__wikiArticle", "__drmThirdPartySub", "__customize", "__thewordoptions", "__pricing_lowestPrice", "__pricing_historicalLow", "__pricing_bundled", "__pricing_withVoucher", "__pricing_store", "__pricing_bundleCount", "__expandSlider", "__contractSlider", "__earlyAccess", "__userScore", "__achievements_summary", "__bundle_offerEnds", "__bundle_includes", "__bundle_tierIncludes", "__bundle_tier", "__bundle_header", "__bundle_info", "__charts_peakall", "__charts_current", "__charts_playingNow", "__charts_peaktoday", "__hltb_title", "__hltb_mainE", "__hltb_compl", "__hltb_main", "__options_homepage", "__ready_loading", "__ready_ready", "__ready_failed", "__ready_serverOutage", "__dlcSelect_wishlistedDlc", "__dlcSelect_none", "__dlcSelect_unownedDlc", "__tag_wishlist", "__tag_coupon", "__tag_invGift", "__tag_invGuestpass", "__tag_owned", "__tag_notinterested", "__tag_ignoredOwned", "__tag_collection", "__tag_waitlist", "__wsgf_incomplete", "__wsgf_unsupported", "__wsgf_gold", "__wsgf_silver", "__wsgf_limited", "__wsgf_certifications", "__itad_lastImport", "__itad_from", "__itad_to", "__itad_syncNow", "__update_dontShow", "__update_updated", "__update_changes", "__coll_inCollection", "__userNote_add", "__userNote_update", "__userNote_addForGame", "__userNote_notEnoughSpace", "__userNote_notEnoughSpaceDesc", "__userNote_closeOnStorage", "__userNote_closeOnStorageDesc", "__userNote_storageWarningDesc", "__userNote_saveSyncedStorage", "__userNote_saveLocal", "__userNote_syncError", "__queue_new", "__queue_newTooltip", "import_webextension_polyfill", "Info_default", "browser", "import_webextension_polyfill", "import_webextension_polyfill", "Storage", "storageArea", "key", "object", "value", "keys", "SyncedStorage", "Storage", "browser", "SyncedStorage_default", "DefaultSettings", "Info_default", "Event", "listener", "SettingsStore", "SyncedStorage", "key", "value", "data", "Settings_default", "target", "prop", "import_webextension_polyfill", "ExtensionResources", "_ExtensionResources", "pathname", "browser", "Language", "_Language", "language", "languages", "import_webextension_polyfill", "ErrorParser", "errStr", "info", "Background", "action", "params", "result", "browser", "e", "error", "ErrorParser", "SteamStoreApiFacade", "appid", "Background", "filter", "appName", "lang", "ids", "Localization", "code", "ExtensionResources", "current", "stored", "Settings_default", "Language", "SteamStoreApiFacade", "lang", "L", "key", "replacements", "text", "value", "Feature", "context", "err", "msg", "args", "import_dompurify", "HTML", "_HTML", "link", "_link", "str", "map", "m", "html", "template", "DOMPurify", "nodeOrSelector", "node", "dom", "firstElement", "wrapperHtml", "startElementOrSelector", "endElementOrSelector", "startElement", "endElement", "wrappedNodes", "cur", "wrapperElement", "position", "import_webextension_polyfill", "LocalStorage", "Storage", "browser", "LocalStorage_default", "ContextType", "ContextType_default", "import_webextension_polyfill", "DOMHelper", "parent", "selector", "nodes", "url", "stylesheet", "path", "ExtensionResources", "content", "style", "params", "s", "browser", "FMediaExpander", "Feature", "details", "HTML", "L", "__expandSlider", "__contractSlider", "LocalStorage_default", "sketchfabNode", "container", "expand", "node", "ContextType_default", "clsList", "DOMHelper", "noop", "identity", "x", "assign", "tar", "src", "k", "is_promise", "value", "run", "fn", "blank_object", "run_all", "fns", "is_function", "thing", "safe_not_equal", "a", "b", "src_url_equal_anchor", "src_url_equal", "element_src", "url", "is_empty", "obj", "create_slot", "definition", "ctx", "$$scope", "fn", "slot_ctx", "get_slot_context", "assign", "get_slot_changes", "dirty", "lets", "merged", "len", "i", "update_slot_base", "slot", "slot_definition", "slot_changes", "get_slot_context_fn", "slot_context", "get_all_dirty_from_scope", "$$scope", "dirty", "length", "i", "action_destroyer", "action_result", "is_function", "noop", "is_client", "now", "raf", "cb", "noop", "tasks", "run_tasks", "now", "task", "raf", "loop", "callback", "task", "tasks", "raf", "run_tasks", "fulfill", "globals", "ResizeObserverSingleton", "_ResizeObserverSingleton", "globals", "options", "element", "listener", "entries", "entry", "is_hydrating", "start_hydrating", "end_hydrating", "append", "target", "node", "get_root_for_style", "node", "root", "append_empty_stylesheet", "style_element", "element", "append_stylesheet", "style", "append", "insert", "target", "node", "anchor", "detach", "node", "destroy_each", "iterations", "detaching", "i", "element", "name", "svg_element", "name", "text", "data", "space", "empty", "listen", "node", "event", "handler", "options", "prevent_default", "fn", "stop_propagation", "attr", "node", "attribute", "value", "children", "element", "set_data", "text", "data", "set_input_value", "input", "value", "set_style", "node", "key", "value", "important", "toggle_class", "element", "name", "toggle", "custom_event", "type", "detail", "bubbles", "cancelable", "HtmlTag", "is_svg", "html", "target", "anchor", "svg_element", "element", "i", "insert", "detach", "get_custom_elements_slots", "element", "result", "node", "managed_styles", "active", "hash", "str", "i", "create_style_information", "doc", "node", "info", "append_empty_stylesheet", "create_rule", "a", "b", "duration", "delay", "ease", "fn", "uid", "step", "keyframes", "p", "t", "rule", "name", "get_root_for_style", "stylesheet", "rules", "animation", "delete_rule", "previous", "next", "anim", "deleted", "clear_rules", "raf", "ownerNode", "detach", "current_component", "set_current_component", "component", "get_current_component", "onMount", "fn", "get_current_component", "createEventDispatcher", "component", "get_current_component", "type", "detail", "cancelable", "callbacks", "event", "custom_event", "fn", "bubble", "component", "event", "callbacks", "fn", "dirty_components", "binding_callbacks", "render_callbacks", "flush_callbacks", "resolved_promise", "update_scheduled", "schedule_update", "flush", "add_render_callback", "fn", "render_callbacks", "add_flush_callback", "flush_callbacks", "seen_callbacks", "flushidx", "flush", "saved_component", "current_component", "dirty_components", "component", "set_current_component", "update", "binding_callbacks", "i", "callback", "update_scheduled", "$$", "run_all", "dirty", "flush_render_callbacks", "fns", "filtered", "targets", "c", "promise", "wait", "dispatch", "node", "direction", "kind", "custom_event", "outroing", "outros", "group_outros", "check_outros", "run_all", "transition_in", "block", "local", "transition_out", "detach", "callback", "null_transition", "create_in_transition", "fn", "params", "options", "config", "running", "animation_name", "task", "uid", "cleanup", "delete_rule", "go", "delay", "duration", "easing", "identity", "tick", "noop", "css", "create_rule", "start_time", "now", "end_time", "add_render_callback", "loop", "t", "started", "is_function", "create_bidirectional_transition", "node", "fn", "params", "intro", "config", "t", "running_program", "pending_program", "animation_name", "original_inert_value", "clear_animation", "delete_rule", "init", "program", "duration", "d", "go", "b", "delay", "easing", "identity", "tick", "noop", "css", "null_transition", "now", "outros", "create_rule", "add_render_callback", "dispatch", "loop", "run_all", "p", "is_function", "wait", "handle_promise", "promise", "info", "token", "update", "type", "index", "key", "value", "child_ctx", "block", "needs_flush", "i", "group_outros", "transition_out", "check_outros", "transition_in", "flush", "is_promise", "current_component", "get_current_component", "set_current_component", "error", "update_await_block_branch", "ctx", "dirty", "resolved", "ensure_array_like", "array_like_or_iterator", "destroy_block", "block", "lookup", "update_keyed_each", "old_blocks", "dirty", "get_key", "dynamic", "ctx", "list", "lookup", "node", "destroy", "create_each_block", "next", "get_context", "o", "n", "i", "old_indexes", "new_blocks", "new_lookup", "deltas", "updates", "child_ctx", "key", "block", "will_move", "did_move", "insert", "transition_in", "new_block", "old_block", "new_key", "old_key", "run_all", "_boolean_attributes", "boolean_attributes", "bind", "component", "name", "callback", "index", "create_component", "block", "mount_component", "component", "target", "anchor", "fragment", "after_update", "add_render_callback", "new_on_destroy", "run", "is_function", "run_all", "destroy_component", "detaching", "$$", "flush_render_callbacks", "make_dirty", "i", "dirty_components", "schedule_update", "init", "options", "instance", "create_fragment", "not_equal", "props", "append_styles", "dirty", "parent_component", "current_component", "set_current_component", "noop", "blank_object", "ready", "ret", "rest", "value", "start_hydrating", "nodes", "children", "detach", "transition_in", "end_hydrating", "flush", "SvelteElement", "$$componentCtor", "$$slots", "use_shadow_dom", "type", "listener", "unsub", "create_slot", "name", "node", "element", "attr", "insert", "existing_slots", "get_custom_elements_slots", "attribute", "get_custom_element_value", "key", "reflect_attributes", "attribute_value", "_oldValue", "newValue", "attribute_name", "prop", "props_definition", "transform", "SvelteComponent", "destroy_component", "noop", "type", "callback", "is_function", "callbacks", "index", "props", "is_empty", "PUBLIC_VERSION", "PUBLIC_VERSION", "child_ctx", "ctx", "insert", "target", "div2", "anchor", "append", "div0", "div1", "set_data", "t1", "t1_value", "L", "__customize", "i", "__apppageSections", "div3", "img", "getLabel", "node", "textNode", "str", "type", "$$props", "setup", "dynamicSelector", "entries", "isActive", "toggle", "name", "entry", "enabled", "element", "Settings_default", "init", "settings", "selectorOrElement", "label", "forceShow", "elements", "onMount", "dynamic", "text", "FCustomizer", "Feature", "target", "anchor", "ContextType_default", "Customizer_default", "DOMHelper", "getParentEl", "selector", "el", "L", "__apppageFranchise", "__apppageEaheader", "__apppageEabanner", "__apppageRecentupdates", "__apppageLegal", "__apppageMorefromfranchise", "__apppageWorkshop", "__apppageGreenlight", "__homepageCurators", "__homepageTabs", "__homepageTopnewreleases", "__homepageSidebar", "ctx", "insert", "target", "div", "anchor", "append", "span", "drmString", "$$props", "FDRMWarnings", "Feature", "Settings_default", "value", "node", "text", "n", "isAppPage", "ContextType_default", "drmNotices", "gameDetails", "drmNames", "name", "enabled", "drmString", "L", "__drmThirdParty", "__drmThirdPartySub", "regex", "target", "FDRMWarnings_default", "HTMLParser", "source", "regex", "m", "node", "nameOrRegex", "v", "Currencies_default", "AugmentedSteamApiFacade", "country", "apps", "subs", "bundles", "voucher", "shops", "Background", "appid", "to", "appids", "channelId", "currency", "steamId", "CurrencyManager", "from", "to", "code", "currency", "Currencies_default", "id", "currencyNode", "walletInfo", "HTMLParser", "SteamStoreApiFacade", "err", "currencySetting", "Settings_default", "toCurrencies", "AugmentedSteamApiFacade", "Price", "_Price", "price", "currency", "CurrencyManager", "format", "_price", "value", "desiredCurrency", "rate", "withSymbol", "sign", "parts", "s", "decimals", "groupSize", "groups", "j", "result", "external", "node", "Settings_default", "child_ctx", "ctx", "L", "__bundle_header", "insert", "target", "h2", "anchor", "i", "__buyPackage", "create_if_block_5", "create_if_block_2", "__bundle_info", "__buy", "div6", "append", "div0", "h1", "p", "div5", "div2", "div1", "a0", "span0", "div4", "div3", "a1", "span1", "__bundle_offerEnds", "set_data", "t2", "t2_value", "__bundle_includes", "t0", "t0_value", "__bundle_tierIncludes", "__bundle_tier", "create_if_block_3", "span", "t1", "t1_value", "create_if_block_4", "b", "br", "div", "t", "t_value", "data", "$$props", "getPrice", "price", "tierPrice", "Price", "CurrencyManager", "appName", "getBundlePrice", "bundle", "tier", "game", "onMount", "v", "ctx", "create_if_block", "if_block", "dirty", "price", "$$props", "getAltPrice", "customCurrency", "CurrencyManager", "Price", "strPrice", "strPriceAlt", "L", "__pricing_lowestPrice", "__pricing_store", "HTML", "ctx", "create_if_block_6", "create_if_block_5", "create_if_block_4", "insert", "target", "a0", "anchor", "span", "a1", "set_data", "t1", "t1_value", "__pricing_withVoucher", "__pricing_historicalLow", "create_if_block_2", "a", "div", "t5", "t5_value", "__pricing_bundled", "__pricing_bundleCount", "t2", "t2_value", "create_if_block_3", "create_if_block_1", "create_if_block", "data", "$$props", "marginTop", "marginBottom", "node", "currentDrms", "d", "$$value", "ITADApiFacade", "Background", "force", "storeIds", "appids", "storeId", "notes", "appid", "note", "Prices", "user", "excludedStores", "Settings_default", "storeList", "ITADApiFacade", "err", "id", "params", "response", "AugmentedSteamApiFacade", "result", "gameId", "data", "type", "FITADPrices", "Feature", "Settings_default", "type", "id", "data", "anchor", "inputEl", "PriceOverview_default", "BundleOverview_default", "prices", "Prices", "subs", "bundles", "node", "ctx", "insert", "target", "span", "anchor", "country", "$$props", "child_ctx", "Price", "insert", "target", "div", "anchor", "L", "__regionUnavailable", "span", "ctx", "create_if_block_1", "get_if_ctx", "set_data", "t0", "t0_value", "span0", "span1", "t2", "t2_value", "create_if_block", "Settings_default", "create_if_block_2", "i", "each_blocks", "user", "$$props", "countries", "prices", "errors", "priceNode", "priceLocal", "apiPrice", "CurrencyManager", "err", "handleError", "getPriceUser", "priceRegion", "country", "e", "message", "container", "rects", "$$value", "LoginError", "type", "ServerOutageError", "msg", "OAuthUnauthorized", "HTTPError", "code", "message", "FeatureDependencyError", "featureName", "Errors_default", "RequestData", "_RequestData", "url", "settings", "_settings", "response", "Errors_default", "e", "data", "FRegionalPricing", "Feature", "countries", "Settings_default", "localCountry", "errors", "subid", "prices", "country", "result", "RequestData", "data", "node", "purchaseArea", "FRegionalPricing_default", "priceNode", "ctx", "insert", "target", "div3", "anchor", "append", "div0", "div2", "div1", "unlocked", "$$props", "total", "percentage", "achievementStr", "L", "__achievements_summary", "SteamApi", "user", "appid", "responseData", "token", "steamId", "RequestData", "data", "FAchievementBar", "Feature", "Settings_default", "unlocked", "total", "percentage", "SteamApi", "target", "FAchievementBar_default", "FAStatsLink", "Feature", "Settings_default", "imgUrl", "ExtensionResources", "url", "HTML", "L", "__viewAstats", "ctx", "L", "__badgeLevel", "attr", "img", "img_src_value", "insert", "target", "div0", "anchor", "append", "div3", "div1", "div2", "set_data", "t1", "t1_value", "t3", "t3_value", "__badgeNotUnlocked", "__viewBadge", "__viewBadgeProgress", "create_if_block", "__badgeProgress", "__cardsOwned", "div6", "div5", "div4", "a", "t6", "t6_value", "data", "$$props", "cardOwned", "c", "cardTotal", "SteamCommunityApiFacade", "steamId", "appid", "Background", "id", "preventFetch", "pages", "profilePath", "force", "newCountry", "FBadgeProgress", "Feature", "Settings_default", "data", "SteamCommunityApiFacade", "target", "FBadgeProgress_default", "FDemoAbovePurchase", "Feature", "winIcon", "macIcon", "linuxIcon", "html", "L", "__downloadDemoHeader", "__export_download", "purchaseNote", "HTML", "FDLCCheckboxes", "Feature", "dlcSection", "dlcRow", "subidNode", "label", "checkbox", "priceNode", "price", "Price", "node", "mutations", "mutation", "target", "html", "L", "__addSelectedDlcToCart", "expandedNode", "HTML", "subids", "cartBtn", "DOMHelper", "__dlcSelect_unownedDlc", "__dlcSelect_wishlistedDlc", "__dlcSelect_none", "nodes", "total", "ctx", "ExtensionResources", "attr", "img", "img_src_value", "insert", "target", "div1", "anchor", "append", "div0", "a", "set_data", "t1", "t1_value", "i", "L", "__dlcDetails", "div4", "div3", "div2", "dlcInfo", "$$props", "FDLCInfo", "Feature", "response", "AugmentedSteamApiFacade", "err", "anchor", "target", "FDLCInfo_default", "L", "__familySharingNotice_desc", "__familySharingNotice_notice", "insert", "target", "div3", "anchor", "append", "div0", "div1", "b", "div2", "FFamilySharingNotice", "Feature", "Settings_default", "result", "anchor", "FFamilySharingNotice_default", "FForceMP4", "Feature", "Settings_default", "playInHD", "LocalStorage_default", "node", "mp4", "mp4hd", "videoEl", "FFullscreenScreenshotView", "Feature", "toggleFullscreen", "e", "initFSVButtons", "modalFooter", "nextButton", "nextButtonOffsetWidth", "HTML", "fsvButton", "modalTitleLink", "mutations", "addedNodes", "node", "Timer", "duration", "resolve", "onDone", "ResettableTimer", "TimeUtils", "timestamp", "FHDPlayer", "Feature", "container", "_", "observer", "playInHD", "LocalStorage_default", "node", "video", "btn", "children", "overlay", "timer", "TimeUtils", "FHideReportedTags", "Feature", "userTags", "HTMLParser", "reportedTagNames", "tag", "tagNode", "DOMHelper", "ctx", "create_if_block_3", "create_if_block_2", "create_if_block_1", "insert", "target", "div", "anchor", "br", "L", "__hltb_main", "b", "span", "set_data", "t2", "t2_value", "__hltb_mainE", "__hltb_compl", "__moreInformation", "create_if_block", "__hltb_title", "div0", "div3", "append", "div2", "div1", "hrs", "minutes", "__hoursShort", "story", "$$props", "extras", "complete", "url", "FHowLongToBeat", "Feature", "Settings_default", "result", "anchor", "FHowLongToBeat_default", "FMetacriticUserScore", "Feature", "Settings_default", "result", "metauserscore", "rating", "HTML", "L", "__userScore", "FNewQueue", "Feature", "HTML", "L", "__queue_newTooltip", "__queue_new", "DOMHelper", "FOpenCritic", "Feature", "Settings_default", "result", "review", "ocImg", "ExtensionResources", "award", "node", "HTML", "L", "__readReviews", "FOwnedActionsButtons", "Feature", "node", "appid", "btn", "option", "Settings_default", "L", "__viewinclient", "HTML", "__viewInLibrary", "__getHelp", "insert", "target", "i", "anchor", "insert", "target", "i", "anchor", "ctx", "set_data", "t_value", "insert", "target", "span", "anchor", "t", "div", "create_if_block_1", "i", "create_if_block", "div5", "append", "div0", "div3", "div1", "div2", "div4", "t2", "t2_value", "L", "__ownedCollection", "__coll_inCollection", "t3", "t3_value", "each_blocks", "appName", "$$props", "copies", "FOwnedElsewhere", "Feature", "Settings_default", "ITADApiFacade", "response", "node", "FOwnedElsewhere_default", "FPackageInfoButton", "Feature", "Settings_default", "excluded", "node", "subid", "HTML", "L", "__packageInfo", "FPackBreakdown", "Feature", "node", "title", "text", "ways", "priceNode", "scaleFactor", "CurrencyManager", "unitPrice", "HTML", "Price", "L", "__each", "FPatchHighlightPlayer", "Feature", "DOMHelper", "ctx", "L", "__charts_current", "__charts_playingNow", "__charts_peaktoday", "__charts_peakall", "insert", "target", "div0", "anchor", "div5", "append", "div4", "div1", "span0", "div2", "span1", "div3", "span2", "set_data", "t4", "t4_value", "t8", "t8_value", "t12", "t12_value", "recent", "$$props", "peakToday", "peakAll", "formatter", "FPlayers", "Feature", "Settings_default", "result", "target", "FPlayers_default", "StringUtils", "str", "a", "b", "alen", "blen", "tmp", "j", "prev", "val", "row", "ma", "mb", "mc", "md", "bprev", "FPurchaseDate", "Feature", "Settings_default", "lang", "appname", "StringUtils", "date", "SteamStoreApiFacade", "L", "__purchaseDate", "FRemoveBroadcasts", "Feature", "Settings_default", "DOMHelper", "FRemoveDupeScreenshots", "Feature", "ids", "node", "id", "Messenger", "handler", "action", "params", "id", "DOMHelper", "resolve", "e", "SteamFacade", "name", "Messenger", "value", "strTitle", "strDescription", "rgModalParams", "title", "description", "options", "strOKButton", "id", "elemLink", "elemPopup", "align", "valign", "bLinkHasBorder", "strTargetLanguage", "bStayOnPage", "selector", "appid", "divToHide", "divToShowSuccess", "divToShowError", "navref", "divToHide2", "isHtml", "amount", "publisherFee", "currencyCode", "steamid", "accountid", "FReplaceDevPubLinks", "Feature", "devs", "glanceDevRow", "pubs", "glancePubRow", "franchiseRow", "franchise", "node", "homepageLink", "type", "HTML", "L", "__options_homepage", "moreBtn", "SteamFacade", "L", "__expandSlider", "ctx", "__contractSlider", "insert", "target", "button", "anchor", "append", "div0", "div1", "reviewSection", "$$props", "show", "toggleReviews", "event", "LocalStorage_default", "onMount", "FReviewToggleButton", "Feature", "target", "reviewSection", "FReviewToggleButton_default", "FSaveReviewFilters", "Feature", "context", "language", "minPlaytime", "maxPlaytime", "value", "LocalStorage_default", "DOMHelper", "InventoryApiFacade", "appid", "Background", "appids", "hashes", "FShowCoupon", "Feature", "Settings_default", "coupon", "InventoryApiFacade", "couponDate", "_m0", "m1", "HTML", "L", "__couponAvailable", "__couponApplicationNote", "__couponLearnMore_fullText", "__couponLearnMore_linkText", "purchaseDiv", "priceNode", "scaleFactor", "CurrencyManager", "originalPrice", "discountPrice", "newFinalPrice", "Price", "FSteamPeek", "Feature", "HTML", "steamTab", "steamPeekTab", "content", "LocalStorage_default", "spLoaded", "node", "data", "AugmentedSteamApiFacade", "lastChild", "title", "appid", "DOMHelper", "L", "__moreOnSteampeek", "FSupportInfo", "Feature", "Settings_default", "cache", "LocalStorage_default", "appid", "AppId", "response", "SteamStoreApiFacade", "url", "email", "links", "HTML", "L", "__website", "__email", "__contact", "__support", "OutOfCapacityError", "ratio", "message", "CapacityInfo", "closeToFull", "utilization", "SyncedStorageAdapter", "SyncedStorage_default", "appid", "note", "appids", "result", "notes", "appidStr", "notesObj", "storageUsage", "OutOfCapacityError", "CapacityInfo", "map", "IdbAdapter", "appids", "notes", "Background", "appidStr", "note", "appid", "assertNever", "_value", "UserNotesAdapter", "type", "SyncedStorageAdapter", "IdbAdapter", "assertNever", "Settings_default", "newType", "currentAdapter", "newAdapter", "insert", "target", "div", "anchor", "append", "textarea", "ctx", "note", "$$props", "input", "onMount", "e", "$$value", "counter", "CustomModal_default", "options", "modalId", "modalComponent", "observer", "modal", "response", "SteamFacade", "fade", "node", "delay", "duration", "easing", "identity", "o", "t", "ctx", "insert", "target", "button", "anchor", "append", "span", "type", "$$props", "insert", "target", "button", "anchor", "ctx", "create_if_block_3", "create_if_block_2", "create_if_block_1", "div", "set_data", "t_value", "create_if_block_4", "create_if_block", "div7", "append", "div0", "div6", "div1", "div4", "div3", "div2", "div5", "dispatch", "createEventDispatcher", "title", "$$props", "body", "showClose", "buttons", "insert", "target", "div", "anchor", "append", "textarea", "ctx", "L", "__userNote_addForGame", "__save", "__cancel", "dispatch", "createEventDispatcher", "appName", "$$props", "note", "handleButton", "e", "ConfirmDialog", "title", "body", "buttons", "L", "__ok", "__cancel", "resolve", "modal", "Modal_default", "e", "UserNotes", "UserNotesAdapter", "appids", "result", "query", "appid", "queried", "note", "capInfo", "Settings_default", "ITADApiFacade", "status", "error", "params", "SteamFacade", "L", "__userNote_syncError", "err", "OutOfCapacityError", "appName", "noteEl", "onNoteUpdate", "form", "savedNote", "response", "CustomModal_default", "__userNote_addForGame", "__save", "target", "NotesForm_default", "__userNote_add", "resolve", "modal", "NoteEditModal_default", "e", "exceeded", "ratio", "desc", "__userNote_notEnoughSpaceDesc", "__userNote_closeOnStorageDesc", "__userNote_storageWarningDesc", "ConfirmDialog", "__userNote_notEnoughSpace", "__userNote_closeOnStorage", "__userNote_saveLocal", "__userNote_saveSyncedStorage", "FUserNotes", "Feature", "Settings_default", "HTML", "L", "__userNote_add", "__userNote_update", "button", "noteEl", "userNotes", "UserNotes", "note", "handler", "node", "active", "FWidescreenCertification", "Feature", "__wsgf_gold", "__wsgf_silver", "__wsgf_limited", "__wsgf_incomplete", "__wsgf_unsupported", "Settings_default", "result", "value", "imgPrefix", "typeName", "icon", "text", "level", "string", "ExtensionResources", "L", "url", "wsg", "mmg", "fkg", "uws", "wsgIcon", "wsgText", "mmgIcon", "mmgText", "uwsIcon", "uwsText", "fkgIcon", "fkgText", "HTML", "__wsgf_certifications", "__ratingDetails", "insert", "target", "i", "anchor", "ctx", "create_if_block", "a", "append", "span", "href", "$$props", "icon", "iconUrl", "isCommunity", "ctx", "L", "__viewOnWebsite", "set_data", "t_value", "Settings_default", "create_if_block_2", "create_if_block_1", "create_if_block", "if_block0", "dirty", "if_block1", "if_block2", "type", "$$props", "gameid", "isCommunity", "UrlUtils", "url", "replacements", "pattern", "replacement", "UrlUtils", "child_ctx", "ctx", "L", "__viewOnWebsite", "__wikiArticle", "Settings_default", "create_if_block_6", "create_if_block_5", "create_if_block_4", "create_if_block_3", "if_block0", "dirty", "if_block1", "if_block2", "if_block3", "__youtubeGameplay", "__youtubeReviews", "create_if_block_1", "HTML", "create_if_block", "get_if_ctx", "if_block", "create_if_block_10", "create_if_block_9", "create_if_block_8", "create_if_block_7", "create_if_block_2", "i", "each_blocks", "appid", "$$props", "communityAppid", "appName", "FExtraLinksApp", "Feature", "target", "sideDetails", "AppLinks_default", "StringUtils", "FExtraLinksAppError", "Feature", "HTML", "L", "__communityHub", "target", "AppLinks_default", "Settings_default", "link", "DynamicStore", "DOMHelper", "resolve", "Messenger", "SteamStoreApiFacade", "storeIds", "dsStatus", "storeId", "SubId", "GameId", "url", "m", "element", "packageid", "href", "id", "BundleId", "GameId", "url", "m", "element", "packageid", "href", "id", "ESyncStatus", "ESyncStatus_default", "ctx", "ESyncStatus_default", "insert", "target", "span", "anchor", "status", "$$props", "ctx", "ESyncStatus_default", "insert", "target", "div", "anchor", "L", "__itad_syncNow", "button", "__loading", "span", "__never", "create_if_block", "__itad_lastImport", "__itad_from", "__itad_to", "div5", "append", "div0", "div2", "div1", "div4", "div3", "set_data", "t4", "t4_value", "t8", "t8_value", "dispatch", "createEventDispatcher", "isConnected", "$$props", "enableSync", "status", "from", "to", "updateLastImport", "last", "ITADApiFacade", "syncNow", "e", "Settings_default", "ctx", "attr", "img", "img_src_value", "insert", "target", "div2", "anchor", "append", "div1", "div0", "itadLogo", "ExtensionResources", "statusComponent", "status", "$$value", "ITAD", "user", "ITADApiFacade", "menu", "ITADSyncMenu_default", "storeIds", "result", "map", "steamId", "value", "HighlightsTagsUtils", "appid", "title", "nodes", "options", "settings", "Settings_default", "key", "value", "x", "_nodes", "appids", "storeIdsMap", "node", "aNode", "storeId", "AppId", "subid", "SubId", "bundleid", "BundleId", "storeIds", "dsStatus", "DynamicStore", "inCollection", "inWaitlist", "ITAD", "invGiftAppids", "invPassAppids", "invCouponAppids", "InventoryApiFacade", "actions", "tag", "locale", "__tag_owned", "__tag_wishlist", "__tag_coupon", "__tag_invGift", "__tag_invGuestpass", "__tag_notinterested", "__tag_ignoredOwned", "__tag_waitlist", "__tag_collection", "__thewordunknown", "tagCss", "colors", "name", "color", "DOMHelper", "container", "HTML", "L", "type", "_node", "hlCss", "nodeToHighlight", "highlight", "err", "FHighlightsTags", "Feature", "DynamicStore", "HighlightsTagsUtils", "FAlternativeLinuxIcon", "Feature", "Settings_default", "url", "ExtensionResources", "cssText", "ContextType_default", "DOMHelper", "FSkipGotSteamDialog", "Feature", "Settings_default", "DOMHelper", "FHorizontalScrolling", "Feature", "Settings_default", "node", "parentNode", "controlLeftNode", "controlRightNode", "lastScroll", "e", "FHideTrademarks", "Feature", "Settings_default", "selectors", "ContextType_default", "replaceSymbols", "node", "HTML", "observer", "mutations", "mutation", "nodes", "FDisableLinkFilter", "Feature", "Settings_default", "target", "href", "params", "url", "FKeepSSACheckboxState", "Feature", "selector", "node", "Settings_default", "FDefaultCommunityTab", "Feature", "Settings_default", "tab", "links", "link", "Context", "params", "type", "features", "ref", "feature", "_params", "dependent", "dependencies", "promises", "func", "promise", "dependencyFunc", "weak", "dependency", "Errors_default", "pass", "res", "e", "featureName", "L", "__earlyAccess", "ctx", "attr", "img", "img_src_value", "insert", "target", "span1", "anchor", "append", "span0", "imageUrl", "$$props", "imgHeader", "container", "onMount", "$$value", "EarlyAccessUtils", "language", "nodes", "Settings_default", "_nodes", "imageName", "imageUrl", "ExtensionResources", "node", "imgHeader", "EarlyAccess_default", "appidsMap", "appid", "AppId", "eaStatus", "AugmentedSteamApiFacade", "nodesArray", "FEarlyAccess", "Feature", "EarlyAccessUtils", "CBase", "Context", "params", "type", "features", "FEarlyAccess", "FHideTrademarks", "FDisableLinkFilter", "FKeepSSACheckboxState", "FDefaultCommunityTab", "CStoreBase", "CBase", "params", "type", "ContextType_default", "features", "FHighlightsTags", "FAlternativeLinuxIcon", "FSkipGotSteamDialog", "FHorizontalScrolling", "result", "node", "searchBox", "mutations", "nodes", "el", "tabContent", "mutation", "addedNodes", "friendactivityTab", "container", "HighlightsTagsUtils", "EarlyAccessUtils", "FWaitlistDropdown", "Feature", "Settings_default", "ITADApiFacade", "parent", "appid", "storeid", "isDemoApp", "communityBtn", "AppId", "wishlistArea", "wishlistSuccessArea", "node", "HTML", "wrapper", "L", "__wishlist", "__theworddefault", "__addFullgameToWishlist", "__addToWishlist", "__addFullgameToWaitlist", "__addToWaitlist", "removeBtn", "addBtn", "imgNode", "ExtensionResources", "DOMHelper", "wishlisted", "waitlisted", "menu", "menuArrow", "wishlistOption", "waitlistOption", "removeFromWishlistLabel", "removeFromWishlistTooltip", "updateDiv", "oneActive", "text", "tooltip", "__onWaitlist", "__removeFullgameFromWaitlistTooltip", "__removeFromWaitlistTooltip", "__onWishlistAndWaitlist", "__removeFullgameFromWishlistAndWaitlistTooltip", "__removeFromWishlistAndWaitlistTooltip", "SteamFacade", "resolve", "e", "FHighlightTitle", "Feature", "DynamicStore", "HighlightsTagsUtils", "CApp", "CStoreBase", "params", "isErrorPage", "ContextType_default", "FExtraLinksAppError", "FReplaceDevPubLinks", "FForceMP4", "FHDPlayer", "FUserNotes", "FWaitlistDropdown", "FNewQueue", "FFullscreenScreenshotView", "FShowCoupon", "FITADPrices", "FDLCInfo", "FDRMWarnings", "FMetacriticUserScore", "FOpenCritic", "FOwnedElsewhere", "FPurchaseDate", "FSteamPeek", "FWidescreenCertification", "FHowLongToBeat", "FExtraLinksApp", "FFamilySharingNotice", "FPackBreakdown", "FPackageInfoButton", "FPlayers", "FCustomizer", "FDLCCheckboxes", "FBadgeProgress", "FAStatsLink", "FAchievementBar", "FRegionalPricing", "FReviewToggleButton", "FOwnedActionsButtons", "FSupportInfo", "FMediaExpander", "FRemoveBroadcasts", "FDemoAbovePurchase", "FSaveReviewFilters", "FHideReportedTags", "FPatchHighlightPlayer", "FRemoveDupeScreenshots", "FHighlightTitle", "AppId", "category", "AugmentedSteamApiFacade", "e", "videoEl", "setHD", "force", "container", "isHD", "useWebM", "isVisible", "position", "import_dompurify", "initialized", "bootstrapDomPurify_default", "SettingsStore", "allowOpenInNewTab", "Settings_default", "purifyConfig", "DOMPurify", "node", "data", "config_default", "Environment", "context", "CookieReader", "Environment", "key", "val", "kv", "name", "defaultValue", "LanguageFactory", "config", "Language", "script", "language", "cookie", "CookieReader", "LegacyUser", "value", "country", "params", "HTMLParser", "response", "RequestData", "ReactUser", "value", "UserFactory", "appConfig", "user", "LegacyUser", "avatarNode", "login", "SteamCommunityApiFacade", "e", "country", "newCountry", "config", "HTMLParser", "ReactUser", "AppConfig", "data", "AppConfigFactory", "configNode", "data", "config", "storeUserConfig", "AppConfig", "loaderData", "Config", "UserConfig", "SteamFacade", "item", "Environment", "unhandledrejection", "e", "err", "Page", "contextClass", "language", "user", "SettingsStore", "bootstrapDomPurify_default", "appFactory", "AppConfigFactory", "appConfig", "languageFactory", "LanguageFactory", "userFactory", "UserFactory", "Localization", "CurrencyManager", "Info_default", "config_default", "params", "L", "__ready_serverOutage", "insert", "target", "div", "anchor", "__ready_failed", "ctx", "set_data", "t", "t_value", "create_if_block", "create_if_block_1", "__ready_loading", "__ready_ready", "div3", "append", "div2", "div1", "div0", "react", "$$props", "started", "done", "failed", "progress", "isLoading", "hasWarning", "hasError", "onMount", "onStart", "onDone", "onError", "e", "ReactDOM", "ProgressBar", "react", "node", "Settings_default", "ProgressBar_default", "ReactDOM", "CacheApiFacade", "Background", "ctx", "create_if_block_1", "L", "__thewordoptions", "__clearCache", "__contribute", "__bugFeature", "__website", "ExtensionResources", "config_default", "insert", "target", "div3", "anchor", "append", "div0", "a0", "a1", "div1", "a2", "a3", "div2", "a4", "a5", "a6", "__launchRandom", "div", "a", "create_if_block", "button", "user", "$$props", "isOpen", "parentNode", "outsideClickHandler", "e", "closeMenu", "toggleMenu", "openMenu", "clearCache", "CacheApiFacade", "launchRandom", "appid", "DynamicStore", "appdetails", "SteamStoreApiFacade", "gameid", "gamename", "confirm", "ConfirmDialog", "__playGame", "__ok", "__visitStore", "__cancel", "onMount", "$$value", "L", "__update_dontShow", "__hide", "ctx", "insert", "target", "div3", "anchor", "append", "div2", "div0", "div1", "button0", "button1", "react", "$$props", "dispatch", "createEventDispatcher", "L", "__loginWarning", "ctx", "dispatch", "createEventDispatcher", "react", "$$props", "page", "host", "handleClose", "LocalStorage_default", "ctx", "info", "handle_promise", "promise_1", "insert", "target", "button", "anchor", "set_data", "t", "t_value", "create_if_block_1", "t0", "t0_value", "create_if_block", "dispatch", "createEventDispatcher", "promise", "react", "$$props", "currentLanguage", "warningLanguage", "resetLanguageCode", "SteamFacade", "handleClose", "Settings_default", "handleSetLanguage", "payload", "str__usingLanguage", "loc", "__usingLanguage", "str__usingLanguageReturn", "__usingLanguageReturn", "onMount", "Localization", "ctx", "create_if_block_1", "create_if_block", "language", "$$props", "react", "languageWarning", "loginWarning", "onMount", "e", "detail", "name", "message", "Settings_default", "warningLanguage", "Language", "ctx", "insert", "target", "button", "anchor", "$$props", "visible", "toTop", "handleScroll", "scrollTop", "onMount", "AugmentedSteam", "language", "user", "react", "Language", "target", "AugmentedSteamMenu_default", "Settings_default", "scrollTarget", "BackToTop_default", "node", "isContentEditable", "el", "e", "header", "AugmentedSteamWarnings_default", "anchor", "option", "btn", "L", "__viewinclient", "cloned", "__activate", "userId", "cachedUser", "LocalStorage_default", "CacheApiFacade", "DynamicStore", "Version", "_Version", "major", "minor", "patch", "version", "Info_default", "_version", "ctx", "info", "handle_promise", "promise_1", "L", "__update_updated", "Info_default", "__update_changes", "ExtensionResources", "attr", "img", "img_src_value", "insert", "target", "div1", "anchor", "append", "div0", "p", "a", "html_tag", "raw_value", "create_if_block", "dispatch", "createEventDispatcher", "lastVersion", "$$props", "promise", "onMount", "html", "ChangelogHandler", "lastVersion", "Version", "Settings_default", "Info_default", "changelog", "Changelog_default", "LegacyPage", "Page", "factory", "language", "user", "ProgressBar", "AugmentedSteam", "ChangelogHandler", "ITAD", "StorePage", "LegacyPage", "StorePage", "CApp"]
}
