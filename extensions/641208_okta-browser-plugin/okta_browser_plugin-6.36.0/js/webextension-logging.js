Okta.Logging=function(o,l){var n=Okta.Q;var e=Okta._okta;var c=e.isNumber;var i={};i.log=function(s,g,e){var d=e;return n.all([o.getOktaDomain(),o.getVersion(),o.getSessionCookie(),o.getAuthToken()]).spread(function(e,o,n,i){if(!e){Log.warn(d+"Failed to find Okta domain from persistent storage. Not "+"logging");return}if(!o){Log.warn(d+"Failed to find plugin version from persistent storage. Not "+"logging");return}if(!n||(!n.sid||!n.DT)&&!n.idx){Log.warn(d+"Failed to find a valid Okta session. Not logging");return}var t=i[e];if(!t||!t["access_token"]){Log.warn(d+"Failed to find an Okta access token. Not logging");return}var a=t["access_token"];if(!c(a.expiresAt)||a.expiresAt<=Math.floor(Date.now()/1e3)){Log.warn(d+"Okta access token expired. Not logging");return}var r={Accept:"application/json;charset=utf-8"};if(n.idx){r["X-Okta-Idx-Session-Jwe"]=n.idx}else{r["Plugin-Sid"]=n.sid;r["X-Session-Id"]=n.sid;r["X-Device-Token"]=n.DT}r.Authorization="Bearer "+a.accessToken;Log.info(d+"Logging message");l.ajax({url:e+"/api/plugin/2/log?plugin_version="+o.backgroundVersion+"-"+o.contentVersion,type:"POST",headers:r,data:{message:g,logLevel:s}})})};return i};