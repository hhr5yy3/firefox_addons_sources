import{r as a}from"./cplx-M4JPizzD.js";import"./cplx-DEt7CUyc.js";function P(){return P=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var u in t)({}).hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},P.apply(null,arguments)}var M=["shift","alt","meta","mod","ctrl"],F={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function v(e){return(e&&F[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function $(e){return M.includes(e)}function H(e,n){return n===void 0&&(n=","),e.split(n)}function A(e,n,t){n===void 0&&(n="+");var u=e.toLocaleLowerCase().split(n).map(function(s){return v(s)}),d={alt:u.includes("alt"),ctrl:u.includes("ctrl")||u.includes("control"),shift:u.includes("shift"),meta:u.includes("meta"),mod:u.includes("mod")},f=u.filter(function(s){return!M.includes(s)});return P({},d,{keys:f,description:t,hotkey:e})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&N([v(e.key),v(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&O([v(e.key),v(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){k.clear()})})();var k=new Set;function R(e){return Array.isArray(e)}function T(e,n){n===void 0&&(n=",");var t=R(e)?e:e.split(n);return t.every(function(u){return k.has(u.trim().toLowerCase())})}function N(e){var n=Array.isArray(e)?e:[e];k.has("meta")&&k.forEach(function(t){return!$(t)&&k.delete(t.toLowerCase())}),n.forEach(function(t){return k.add(t.toLowerCase())})}function O(e){var n=Array.isArray(e)?e:[e];e==="meta"?k.clear():n.forEach(function(t){return k.delete(t.toLowerCase())})}function z(e,n,t){(typeof t=="function"&&t(e,n)||t===!0)&&e.preventDefault()}function G(e,n,t){return typeof t=="function"?t(e,n):t===!0||t===void 0}function J(e){return I(e,["input","textarea","select"])}function I(e,n){n===void 0&&(n=!1);var t=e.target,u=e.composed,d=null;return Q(t)&&u?d=e.composedPath()[0]&&e.composedPath()[0].tagName:d=t&&t.tagName,R(n)?!!(d&&n&&n.some(function(f){var s;return f.toLowerCase()===((s=d)==null?void 0:s.toLowerCase())})):!!(d&&n&&n)}function Q(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function U(e,n){return e.length===0&&n?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):n?e.some(function(t){return n.includes(t)})||e.includes("*"):!0}var V=function(n,t,u){u===void 0&&(u=!1);var d=t.alt,f=t.meta,s=t.mod,y=t.shift,m=t.ctrl,o=t.keys,c=n.key,g=n.code,p=n.ctrlKey,r=n.metaKey,S=n.shiftKey,C=n.altKey,h=v(g),l=c.toLowerCase();if(!(o!=null&&o.includes(h))&&!(o!=null&&o.includes(l))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(h))return!1;if(!u){if(d===!C&&l!=="alt"||y===!S&&l!=="shift")return!1;if(s){if(!r&&!p)return!1}else if(f===!r&&l!=="meta"&&l!=="os"||m===!p&&l!=="ctrl"&&l!=="control")return!1}return o&&o.length===1&&(o.includes(l)||o.includes(h))?!0:o?T(o):!o},X=a.createContext(void 0),Y=function(){return a.useContext(X)};function q(e,n){return e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(e).length===Object.keys(n).length&&Object.keys(e).reduce(function(t,u){return t&&q(e[u],n[u])},!0):e===n}var Z=a.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),ee=function(){return a.useContext(Z)};function ne(e){var n=a.useRef(void 0);return q(n.current,e)||(n.current=e),n.current}var D=function(n){n.stopPropagation(),n.preventDefault(),n.stopImmediatePropagation()},te=typeof window<"u"?a.useLayoutEffect:a.useEffect;function oe(e,n,t,u){var d=a.useState(null),f=d[0],s=d[1],y=a.useRef(!1),m=t instanceof Array?u instanceof Array?void 0:u:t,o=R(e)?e.join(m==null?void 0:m.splitKey):e,c=t instanceof Array?t:u instanceof Array?u:void 0,g=a.useCallback(n,c??[]),p=a.useRef(g);c?p.current=g:p.current=n;var r=ne(m),S=ee(),C=S.enabledScopes,h=Y();return te(function(){if(!((r==null?void 0:r.enabled)===!1||!U(C,r==null?void 0:r.scopes))){var l=function(i,K){var j;if(K===void 0&&(K=!1),!(J(i)&&!I(i,r==null?void 0:r.enableOnFormTags))){if(f!==null){var L=f.getRootNode();if((L instanceof Document||L instanceof ShadowRoot)&&L.activeElement!==f&&!f.contains(L.activeElement)){D(i);return}}(j=i.target)!=null&&j.isContentEditable&&!(r!=null&&r.enableOnContentEditable)||H(o,r==null?void 0:r.splitKey).forEach(function(W){var B,E=A(W,r==null?void 0:r.combinationKey);if(V(i,E,r==null?void 0:r.ignoreModifiers)||(B=E.keys)!=null&&B.includes("*")){if(r!=null&&r.ignoreEventWhen!=null&&r.ignoreEventWhen(i)||K&&y.current)return;if(z(i,E,r==null?void 0:r.preventDefault),!G(i,E,r==null?void 0:r.enabled)){D(i);return}p.current(i,E),K||(y.current=!0)}})}},x=function(i){i.key!==void 0&&(N(v(i.code)),((r==null?void 0:r.keydown)===void 0&&(r==null?void 0:r.keyup)!==!0||r!=null&&r.keydown)&&l(i))},_=function(i){i.key!==void 0&&(O(v(i.code)),y.current=!1,r!=null&&r.keyup&&l(i,!0))},b=f||(m==null?void 0:m.document)||document;return b.addEventListener("keyup",_),b.addEventListener("keydown",x),h&&H(o,r==null?void 0:r.splitKey).forEach(function(w){return h.addHotkey(A(w,r==null?void 0:r.combinationKey,r==null?void 0:r.description))}),function(){b.removeEventListener("keyup",_),b.removeEventListener("keydown",x),h&&H(o,r==null?void 0:r.splitKey).forEach(function(w){return h.removeHotkey(A(w,r==null?void 0:r.combinationKey,r==null?void 0:r.description))})}}},[f,o,r,C]),s}function ie(){var e=a.useState(new Set),n=e[0],t=e[1],u=a.useState(!1),d=u[0],f=u[1],s=a.useCallback(function(c){c.key!==void 0&&(c.preventDefault(),c.stopPropagation(),t(function(g){var p=new Set(g);return p.add(v(c.code)),p}))},[]),y=a.useCallback(function(){typeof document<"u"&&(document.removeEventListener("keydown",s),f(!1))},[s]),m=a.useCallback(function(){t(new Set),typeof document<"u"&&(y(),document.addEventListener("keydown",s),f(!0))},[s,y]),o=a.useCallback(function(){t(new Set)},[]);return[n,{start:m,stop:y,resetKeys:o,isRecording:d}]}export{ie as a,T as i,oe as u};
