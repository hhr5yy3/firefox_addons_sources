var e={getStored:(e,t)=>{e=Array.isArray(e)?e:[e],e=chrome.storage.local.get(e,e=>{t&&t(e)});try{e.then(e=>{t&&t(e)})}catch(e){}},setStored:(e,t,n)=>{var a={};a[e]=t,chrome.storage.local.set(a),n&&n(e,t)},removeStored:e=>{chrome.storage.local.remove([e])}};const t=chrome.runtime,Mt=t.getURL("html/"),cn=t.getURL("css/"),dn=e=>t.getURL(`_locales/${e}/messages.json`),Dt="data-contrast-checker-active",Ft="active",zt="color-contrast-checker",Tt="colorContrastCheckerPanel",Ut="data-frame-id",jt="data-shadow-root",g="shadow-root-",m=250,r="frame_",$t="data-colorChecker-highlight",h="*[data-colorChecker-highlight] {box-shadow: 0 0 0 1px #F00, inset 0px 0px 0 1px rgba(255, 0, 0, 1);outline: 2px #F00;}",Wt={contrastLevelChecker:{defaultValue:"AA"},autoRefreshCheck:{defaultValue:!1},updateAnalysisOnDOMChanges:{defaultValue:!0},widgetVersion:{},position:{defaultValue:"left"},leftPosition:{defaultValue:!0},pinned:{defaultValue:!1},pinnedByDomain:{defaultValue:""},pinnedByURL:{defaultValue:""},pinnedTabs:{defaultValue:""},language:{defaultValue:"es"}},y={elements:["script","noscript","hr","br","table","tbody","thead","tfoot","tr","option","ul","ol","dl","style","link","iframe","frameset","frame","object","meta","area","img"],attributes:[{name:"type",value:"hidden"},{name:"type",value:"color"}]},un=[{code:"en",description:"english"}];let Xt={},s=0;const pn=()=>{};let Ht={},fn=!1,Jt;const{setStored:o,getStored:v}=e;function gn(e){return JSON.parse(`{${e}}`)}function Gt(e,t={},n=[],a=[]){var r,o,i=document.createElement(e);for(r in t)i.setAttribute(r,t[r]);n=Array.isArray(n)?n:[n];for(let e=0;e<n.length;e++)"string"==typeof n[e]||"number"==typeof n[e]?(o=Kt(n[e]),i.appendChild(o)):i.appendChild(n[e]);a=Array.isArray(a)?a:[a];for(let e=0;e<a.length;e++){var{name:l,callback:s}=a[e];i.addEventListener(l,s)}return i}function Kt(e){return document.createTextNode(e)}function i(){return document.URL?.split(/[?#]/)[0]}function b(e){window.location===window.parent.location&&e()}function Qt(e,t,n="document"){const a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType=n,a.onload=()=>{var e;4===a.readyState&&200===a.status&&("document"===n?(e=C(a.responseXML.documentElement.querySelector(".content")),t(w(e))):t(a.response))},a.onerror=function(e){},a.send(null)}function Yt(t){let n={};for(var e in Wt)n[e]=Wt[e]?.defaultValue;var a=Object.keys(Wt);v(a,e=>{Xt=Object.assign(n,e),t(Xt)})}function Zt(e){(async()=>{await t.sendMessage(e)})()}function C(e){return{type:"element",tagName:e.tagName,attributes:function(t){var n={};for(let e=0;e<t.length;e++)n[t[e].name]=t[e].value;return n}(e.attributes),children:Array.from(e.childNodes,A)}}function A(e){return 3!==e.nodeType?C(e):{type:"text",textContent:e.textContent}}function w(e){let t;var n=e.type,a=e.tagName,r=e.attributes,o=e.children||[],e=e.textContent;return t="element"===n?Gt(a,r,o.map(w)):Kt(e)}function L(){k(window.document),mn().forEach(e=>{k(e.shadowRoot)})}function k(e){e.querySelectorAll(`[${$t}]`).forEach(e=>{e.removeAttribute($t)})}function x(e){e._wcc||(e._wcc={});let t=e._wcc._isVisible;if(!1!==t){if("body"===e.tagName.toLowerCase())return!0;var n=e._parentNode||e.parentNode,a=(n._wcc||(n._wcc={}),n._wcc._isVisible);if(!1===a)return e._wcc._isVisible=!1,a;if((t=en(e))&&a)return e._wcc._isVisible=t;t&&"body"!==n.tagName.toLowerCase()&&(t=x(n)),e._wcc._isVisible=t}return t}function l(){return new URL(document.URL).hostname}function S(n,e){return e.split(",").map(e=>e.trim()).some(e=>{var t;return"."===e.substring(0,1)?n.classList.contains(e.substring(1)):"*["===e.substring(0,2)?(t=e.substring(2).replace("]","").split("="),n.getAttribute(t[0])&&(1===t.length||n.getAttribute(t[0])===t[1])):n.tagName.toLowerCase()===e})}function mn(){return document.querySelectorAll(`*[${jt}]`)}function P(a,t=document,r=()=>!0){{var[n=document]=[t],o;let e=0;for(const l of n.querySelectorAll("*"))l.shadowRoot&&!l.getAttribute(jt)&&(l.setAttribute(jt,""+g+e),e++,(o=document.createElement("style")).setAttribute($t,"true"),o.textContent=h,l.shadowRoot.appendChild(o))}const i=[];return t.querySelectorAll(""+a).forEach((n,e)=>{n.shadowRoot||!S(n,a)&&"*"!==a||!r(n)?n.shadowRoot&&n.shadowRoot.querySelectorAll(""+a).forEach((e,t)=>{(S(e,a)||"*"===a)&&r(n)&&(e._parentNode=11!==e.parentNode.nodeType?e.parentNode:n,i.push({element:e}))}):(n._parentNode=n.parentNode,i.push({element:n}))}),i}function en(e){if(!(t=e)||1!==t.nodeType||E(t)||E(e))return!1;var t,n,a,r;let o=!0;for(;"body"!==e.tagName.toLowerCase()&&o;){var i=document.defaultView.getComputedStyle(e,null);o=!((r=e)&&r.tagName&&r.hasAttribute("hidden")||"none"===i.getPropertyValue("display")||"hidden"===i.getPropertyValue("visibility")||(r=e,a=n=i=void 0,r=document.defaultView.getComputedStyle(r,null),i="relative"===(i=r.getPropertyValue("position"))||"absolute"===i,n=r.getPropertyValue("top").replace("px",""),a=r.getPropertyValue("left").replace("px",""),r=r.getPropertyValue("z-index"),i&&(0===n.indexOf("-")&&parseInt(n)<-1e3||0===a.indexOf("-")&&parseInt(a)<-1e3||0===r.indexOf("-")))||(n=i=void 0,i="details"===(a=e).tagName.toLowerCase()?a:a.closest("details"),n="summary"===a.tagName.toLowerCase()?a:a.closest("summary"),i&&!n&&!a.closest("details").open)),e=e._parentNode||e.parentNode}return o}function E(e){e=e.tagName.toLowerCase();return"script"===e||"style"===e||"noscript"===e}function hn(e){return""+r+e}function tn(e,t){var n;Xt[e]=t,e=e,t=t,n=O,o(e,t,n)}function O(e,t){var n=Wt;n[e]&&n[e].cssClass&&(n=n[e].cssClass,e=t,Jt)&&(e?Jt.classList.add(n):Jt.classList.remove(n))}t.onMessage.addListener(function(e,t,n){{var a,r;"getDomainInfo"===e.action?n({action:"update",params:{domain:l(),URL:i()}}):(fn&&n({isOpen:!!document.getElementById(Tt)}),a=e.action,r=e.params||{},on=""+e.tabId,Ht[a]&&"test"!==a&&Ht[a](Object.assign({tabId:on},{settings:Xt},r),n))}});const R=24,V=18.6667,yn=7,nn=4.5,an=3,_=document.defaultView;function vn(e,t){e=N(e),t=N(t);let n,a;a=t<e?(n=e,t):(n=t,e);t=(n+.05)/(a+.05);return Math.round(100*t)/100}function N(e){var{r:e,g:t,b:n}=e;return.2126*a(e/255)+.7152*a(t/255)+.0722*a(n/255)}function a(e){let t;return t=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function I(e,t){var n=_.getComputedStyle(e,null),a=function(t){var n=[];for(;t&&"body"!==t.tagName.toLowerCase();t=t._parentNode||t.parentNode){let e=t._wcc?._info;if(!e){const r=p(u(t,"background-color"));var a=parseFloat(u(t,"opacity"));e={bgColor:r,opacity:a},t._wcc={_info:e}}a=e.opacity;(0<e.bgColor.o*a||a<1)&&n.push(e)}const r=B();return n.push({bgColor:r,opacity:1}),n}(e);let r=M(a);var o=0<function(e){let t=1;return e.forEach(e=>{t*=e.opacity}),t}(a)&&x(e),i=parseInt(n.getPropertyValue("font-size").replace("px","")),n=n.getPropertyValue("font-weight"),l=700<=parseInt(n)||"bold"===n||"bolder"===n,l=i>=R||i>=V&&l?"large":"small";a=a,c=p(u(d=e,"color")),d=parseFloat(u(d,"opacity"));let s=M([{bgColor:c,opacity:d}].concat(a));t&&(s=q(s,t),r=q(r,t));var c=vn(s,r),d={element:e,fontSize:i,fontWeight:n,size:l,foregroundColor:s,backgroundColor:r,contrast:c,isVisible:o};return"small"==l?(d.isValidAA=c>=nn,d.isValidAAA=c>=yn):(d.isValidAA=c>=an,d.isValidAAA=c>=nn),d}function q(e,t){var{r:e,g:n,b:a,o:r}=e;return{r:e*t[0]+n*t[1]+a*t[2]+r*t[3]+t[4],g:e*t[5]+n*t[6]+a*t[7]+r*t[8]+t[9],b:e*t[10]+n*t[11]+a*t[12]+r*t[13]+t[14],o:e*t[15]+n*t[16]+a*t[17]+r*t[18]+t[19]}}function u(e,t){e=_.getComputedStyle(e,null).getPropertyValue(t);if(!e){if("opacity"===t)return 0;if("color"===t)return"rgba(0, 0, 0, 0)";if("background-color"===t)return"rgba(255, 255, 255, 1)"}return e}function B(){var e=p(u(document.querySelector("body"),"background-color"));return e.o?e:{r:255,g:255,b:255,o:1}}function M(t){let n=t[0].bgColor;n.o=n.o*t[0].opacity;for(let e=1;e<t.length;e++)(n=function(e,t){var n=e.o;if(1===n)return e;var a=(1-n)*t.r+n*e.r,r=(1-n)*t.g+n*e.g,n=(1-n)*t.b+n*e.b,t=e.o+t.o*(1-e.o);return{r:a,g:r,b:n,o:t}}(n,t[e].bgColor)).o=t[e].opacity;return n}function rn(e){if(e&&"string"==typeof e&&!(0<e.indexOf("#")))switch((e=e.replace("#","")).length){case 3:return/^[0-9A-F]{3}$/i.test(e);case 6:return/^[0-9A-F]{6}$/i.test(e);case 8:return/^[0-9A-F]{8}$/i.test(e);default:return}}function bn(e){return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,a){return"#"+t+t+n+n+a+a})}function p(e){let t;e=e.replace("rgb(","").replace("rgba(","").replace("(","").replace(")","").replace(/ /g,""),-1<e.indexOf(",")?t=",":-1<e.indexOf(":")?t=":":-1<e.indexOf("/")?t="/":-1<e.indexOf(".")&&(t="."),e=e.split(t);return{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2]),o:void 0===e[3]?1:parseFloat(e[3])}}function n(e){var t;return null==e||(e=parseInt(e),isNaN(e))||e<=0?"00":255<e?"FF":(e=Math.round(e),(t="0123456789ABCDEF").charAt((e-e%16)/16)+t.charAt(e%16))}function Cn(e){e=bn(e);e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function D(e){return"#"+n(e.r)+n(e.g)+n(e.b)}function An(){return"EyeDropper"in window}async function wn(e,t,n){var a;An()&&(a=await async function(){var e=new EyeDropper;try{return(await e.open()).sRGBHex}catch(e){return null}}())&&(e.value=a,n(t.value=a))}Yt(e=>{const t={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","src","style"]},a=window.document.body;let r,d={},u,p;var n={getResultsFromFrame:o,connectMutationObserver:function(n){i(),n.frameId=s;let e=e=>{o(n)};"warnOnMutation"===n.action&&(e=e=>{var t={message:"DOM updated, analyse the contrast to update results",type:"mutation"};Zt({action:"messageToPanel",params:{frameId:n.frameId,message:t}})});r=function(e,t,n){return(n=new MutationObserver(n)).observe(e,t),n}(a,t,function(a,r,o){let i;return function(){let e=this,t=arguments;var n=r&&!i;clearTimeout(i),i=setTimeout(function(){i=null,r||a.apply(e,t)},o||m),n&&a.apply(e,t)}}(e,!1))},disconnectMutationObserver:i,closeWidget:function(){d={},L(),i()},cleanHighlightedElements:function(){L()},highlightElementsInDocument:function(e){var{elementsRef:e,scrollIntoView:t}=e,e=e.split("//"),n=e[0],a=d[n],r=e[1].split(",");if(a){t&&a[r[0]]&&a[r[0]][0]&&a[r[0]][0].scrollIntoView();for(let e=0;e<r.length;e++)!function(e){e&&e.forEach(e=>{e.setAttribute($t,"true")})}(a[r[e]])}},setCurrentColorMatrix:function(e){p=e.currentColorMatrix}};function o(e){s=e.frameId;e=l(u=s);Zt({action:"showResultsFromFrame",params:{frameId:s,results:e}})}function i(){r&&r.disconnect()}function l(){let l={};var e=P("*",document.body,e=>{var t,n=e,e=y;return!(e&&({elements:e,attributes:t}=e,e=!e||-1<e.indexOf(n.tagName.toLowerCase()),t=!t||t.some(({name:e,value:t})=>{e=n.getAttribute(e);return e&&(!t||e===t)}),e||t))});Zt("getCurrentColorMatrix");let s;try{s=B()}catch(e){s={r:255,g:255,b:255,o:1}}let c=0;return e.forEach(({element:e})=>{var t,n,a,r,o,i;en(e)?(e._wcc={},0<function(e){if(f(e))return e.nodeValue.replace('"',"'").replace('"',"'").replace("<","&lt;").replace(">","&gt;");if(g(e))return e.getAttribute("alt")||"";var t=e.childNodes;let n=t.length,a="";for(let e=0;e<n;e++)a+=function(e){if(f(e))return e.nodeValue.replace('"',"'").replace('"',"'").replace("<","&lt;").replace(">","&gt;");if(g(e))return e.getAttribute("alt")||"";return""}(t[e]);return a.replace(/\n/g," ").replace(/\t/g," ").replace(/\s+/gi," ")}(e).trim().length&&!e.value&&({size:i,foregroundColor:t,backgroundColor:n,contrast:o,isValidAA:a,isValidAAA:r}=I(e,p,s),o=`"contrast":${o},"size":"${i}","foregroundColor":"${D(t)}","backgroundColor":"${D(n)}"`,l[o]||(l[o]={elements:{},validation:{},colors:{}}),i=e.tagName.toLowerCase(),l[o].elements[i]||(l[o].elements[i]=0),d[o]?d[o][i]||(d[o][i]=[]):d[o]={[i]:[]},-1===d[o][i].indexOf(e)&&d[o][i].push(e),l[o].elements[i]++,l[o].frameId=u,l[o].validation.isValidAA=a,l[o].validation.isValidAAA=r)):c++}),{results:JSON.parse(JSON.stringify(l)),hiddenCount:c}}function f(e){return 3===e.nodeType}function g(e){var t;if(8!==e.nodeType)return("img"===(t=e.tagName.toLowerCase())||"area"===t)&&e.getAttribute("alt")||"input"===t&&e.getAttribute("type")&&"image"===e.getAttribute("type").toLowerCase()}Object.assign(Ht,n),window.document.body.querySelectorAll("details").forEach(e=>{e.ontoggle=()=>{o({frameId:s})}})});const F="context-menu",f="context-menu--open";let z=0;const Ln={createMenu:(e,t,n="",a="",r=()=>{})=>{var o=F+"-"+z++,i=o+"-menuList";const l=Gt("div",{class:F+" "+n},[],[{name:"click",callback:e=>{e.stopPropagation()}}]),s=Gt("button",{class:"menu-trigger "+a,id:o,"aria-label":t,"aria-haspopup":"true","aria-expanded":"false","aria-controls":i}),c=Gt("ul",{id:i,role:"menu",tabindex:"-1","aria-labelledby":o});e.forEach(a=>{var e=Kt(a.label),t=Gt("li",{role:"presentation",class:"menu-item"+(a.disabled?" menu-item--disabled":"")});const r=e=>{"menuitemcheckbox"!==a.role&&l.close(),a.callback(e)};e=Gt("button",{id:a.id||"",role:a.role||"menuitem",tabindex:"-1",class:a.class},e,{name:"click",callback:r});"menuitemcheckbox"===a.role&&e.setAttribute("aria-checked",!!a.checked),a.disabled&&e.setAttribute("disabled","disabled"),e.addEventListener("keydown",e=>{var t=e.key,n=e.target;switch(t){case"Enter":e.preventDefault(),r(e),"menuitemcheckbox"!==a.role&&l.close();break;case" ":e.preventDefault(),r(e);break;case"ArrowDown":e.preventDefault(),d(c,n).focus();break;case"ArrowUp":e.preventDefault(),!function e(t,n){const a=n?.parentNode.previousSibling;{if(a){const r=a.querySelector("button");return u(r)?r:e(t,r)}{const o=t.querySelectorAll("button:not([disabled])");return o[o.length-1]}}}(c,n).focus();break;case"Escape":e.preventDefault(),l.close();break;case"Tab":l.close()}}),t.appendChild(e),c.appendChild(t)});n=Gt("div",{class:"arrow"});return l.appendChild(s),l.appendChild(c),l.appendChild(n),s.onclick=e=>{var t;l.isOpen?l.close():(r(s),e.stopPropagation(),l.isOpen?(c.classList.remove(Ft),s.setAttribute("aria-expanded","false"),l.classList.remove(f),l.isOpen=!1):(t=(e=s.closest(zt).getBoundingClientRect()).left,e=e.width,c.style.right="-10px",c.style.maxWidth=e-30+"px",c.classList.add(Ft),s.setAttribute("aria-expanded","true"),c.firstChild.focus(),(e=c.getBoundingClientRect().left)<t&&(c.style.right=e-t-20+"px"),l.classList.add(f),l.isOpen=!0,d(c).focus()))},l.close=()=>{l.isOpen&&(c.classList.remove(Ft),s.setAttribute("aria-expanded","false"),s.focus(),l.isOpen=!1,l.classList.remove(f))},l.isOpen=!1,l;function d(e,t){var t=t?.parentNode.nextSibling;return t?u(t=t.querySelector("button"))?t:d(e,t):e.querySelector("button:not([disabled])")}function u(e){return!e?.getAttribute("disabled")}}};let kn=!0;function xn(){const r=200,o=350,i=10,n="position-";let t,l,s,a,c,d,u,p,f,g,m,h,y,v;const b=document.body,e=b.style.marginLeft;let C,A,w,L=[];return{createResizer:function(e,t=()=>{}){var{resizingPanel:n,isLeftPosition:a}=e;return l=Gt("div",{class:"extension-panel-resizer",tabindex:"0","aria-label":"use arrow keys to increase or decrease the panel width"},[],[{name:"keydown",callback:k}]),s=l.style,h=n,f=e.pageBody,y=f.getAttribute("style"),c=window.getComputedStyle(f,null).getPropertyValue("margin-left"),d=window.getComputedStyle(f,null).getPropertyValue("margin-right"),u=window.getComputedStyle(f,null).getPropertyValue("position"),g=a?"left":"right",v=t,l.addEventListener("mousedown",S),l.addEventListener("mouseup",E),function(e){w=e,function(){y=b.getAttribute("style");var e=window.getComputedStyle(b,null);u=e.getPropertyValue("position"),A=e.getPropertyValue("width"),c=e.getPropertyValue("margin-left"),d=e.getPropertyValue("margin-right"),C=e.getPropertyValue("overflow")}(),P("*",document.body,e=>{var t=window.getComputedStyle(e,null);"fixed"===t.getPropertyValue("position")&&L.push({element:e,left:parseInt(t.getPropertyValue("left")),right:parseInt(t.getPropertyValue("right")),styleLeft:e.style.left,styleRight:e.style.right})});var e="left"===Xt.position,t=Xt.savePanelWidthOnResize&&Xt.initialPanelWidth||o;h.style.width=t+"px",e?h.style.left="0":h.style.right="0"}(h),h.appendChild(l),l},removeResizer:function(){b.style.marginLeft=e,l.removeEventListener("mousedown",S),l.removeEventListener("mouseup",E),E(),L.forEach(e=>{var{element:e,styleLeft:t,styleRight:n}=e;e.style.left=t,e.style.right=n}),L.length=0,L=[],delete l},updatePanelPosition:function(t){x(),t!==g&&L.forEach(e=>{var{element:e,styleLeft:t,styleRight:n}=e;e.style.left=t,e.style.right=n});var e="left"===(g=t);a=_(),p=i,"static"===u&&(f.style.position="relative");if(e){let e=a+i;a+i<=parseInt(c)&&(e=parseInt(c),p=parseInt(c)-(a+i)),f.style.marginLeft=e+"px",l.style.left=a-i+"px",l.style.right="initial",h.style.paddingLeft="0",h.style.paddingRight=i+"px",h.style.left="0",h.style.right="auto",h.classList.add(n+t),h.classList.remove(n+"right")}else{let e=a+i;a+i<=parseInt(d)&&(e=parseInt(d)+"px",p=parseInt(d)-(a+i)),f.style.marginRight=e+"px",l.style.left="initial",l.style.right=a-i+"px",h.style.paddingLeft=i+"px",h.style.paddingRight="0",h.style.right="0",h.style.left="auto",h.classList.add(n+t),h.classList.remove(n+"left")}V()},getCurrentWidth:_,recoverBodyStyles:x,updateFixedElementsPosition:V};function k(e){var t=e.key,n=e.ctrlKey;let a=0;switch(t){case"ArrowDown":case"ArrowRight":e.preventDefault(),a=10;break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),a=-10}0!==a&&(n&&(a*=5),"right"===g&&(a*=-1),R(_()+a))}function x(){b.style.position=u,b.style.marginLeft=c,b.style.marginRight=d,y?b.setAttribute("style",y):b.removeAttribute("style")}function S(e){m=window.innerWidth,t="left"===g?e.pageX-a:e.pageX,document.addEventListener("mousemove",O),document.addEventListener("mouseup",E),h.addEventListener("mousemove",O),h.addEventListener("mouseup",E)}function E(){document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",E),h.removeEventListener("mousemove",O),h.removeEventListener("mouseup",E),a=N(h.style.width)}function O(e){e.preventDefault(),R("left"===g?e.pageX-t:a-e.pageX+t)}function R(e){var t,n,a;m-e<=r||e<=r||(h.style.width=e+"px",s[g]=e-i+"px",s["left"===g?"right":"left"]="auto",a=e+i,n=(t="left"===g)?c:d,a=a>parseInt(n)?a:parseInt(n),t?f.style.marginLeft=a+"px":f.style.marginRight=a+"px",V(),v&&v(e))}function V(){var e="left"===g?"marginLeft":"marginRight";const n=parseInt(f.style[e]);kn?L.forEach(e=>{var t=e["element"];t.style[g]=n+e[g]+"px"}):L.forEach(e=>{var{element:e,styleLeft:t,styleRight:n}=e;e.style.left=t,e.style.right=n})}function _(){return N(h.style.width)}function N(e){return parseInt(e.replace(/\D/g,""))}}const T="pin-button",c="pin-by-domain-button",d="pin-by-URL-button",U="pin-button",j="pinned--on",$="pinned--off",W="pinned-by-domain--on",X="pinned-by-domain--off",H="pinned-by-URL--on",J="pinned-by-URL--off",Sn="menu-trigger-pin",En="pinned-indicator";let on=null,ln=null,G=null;const On=Ln["createMenu"];function Rn(e,t,n,a){G=a,on=""+e.tabId;const r=l(),o=i();return[{role:"menuitemcheckbox",id:c,label:""+t.pinPanelByDomainLabel,class:T+" "+c,callback:e=>{var t;n(),e.stopPropagation(),r.trim().length&&(e=l()).trim().length&&(-1<(t=Xt.pinnedByDomain?.split(",")||[]).indexOf(e)?t.splice(t.indexOf(e),1):t.push(e),tn("pinnedByDomain",t.join(",")),sn())},disabled:!r.trim().length,checked:!!r.trim().length&&-1<e.settings.pinnedByDomain?.split(",").indexOf(r)},{role:"menuitemcheckbox",id:d,label:""+t.pinPanelByURLLabel,class:T+" "+d,callback:e=>{var t;n(),e.stopPropagation(),o.trim().length&&(e=i()).trim().length&&(-1<(t=Xt.pinnedByURL?.split(",")||[]).indexOf(e)?t.splice(t.indexOf(e),1):t.push(e),tn("pinnedByURL",t.join(",")),sn())},disabled:!o.trim().length,checked:!!o.trim().length&&-1<e.settings.pinnedByURL?.split(",").indexOf(o)}]}function sn(){[G,ln].forEach(e=>{if(e){e.classList.remove(j),e.classList.remove($),e.classList.add(Xt.pinned?j:$),e.querySelectorAll("."+U).forEach(e=>e.setAttribute("aria-checked",Xt.pinned));var t=l();const n=!!t.trim().length&&-1<Xt.pinnedByDomain?.split(",").indexOf(t);e.classList.remove(W),e.classList.remove(X),e.classList.add(n?W:X),e.querySelectorAll("."+c).forEach(e=>e.setAttribute("aria-checked",n));t=i();const a=!!t.trim().length&&-1<Xt.pinnedByURL?.split(",").indexOf(t);e.classList.remove(H),e.classList.remove(J),e.classList.add(a?H:J),e.querySelectorAll("."+d).forEach(e=>e.setAttribute("aria-checked",a))}})}function Vn(){const l="dialog-panel",s="dialog-backdrop",c="dialog-wrapper",d="dialog-content-wrapper",u="dialog-title",p="dialog-content custom-scrollbar",f="dialog-actions",g="dialog-action",m="dialog-closer",h="dialog-action-close",y="active";let v="",b=null,C=null,A=null,w=null,L=null;return{openDialog:function(e,t,n,a={}){var r,o,i;k()||({openCallback:a,closeCallback:r}=a,b||(b=function(){const e="close dialog",t=Gt("div",{id:l,class:c,role:"dialog"}),n=Gt("div",{class:s}),a=(n.onclick=S,t.appendChild(n),Gt("div",{class:d})),r=(t.appendChild(a),w=Gt("h1",{class:u,tabindex:"-1"},void 0,[{name:"keydown",callback:e=>{"tab"===e.key.toLowerCase()&&e.shiftKey&&(e.preventDefault(),t.querySelector(`.${g}:last-child`).focus())}}]),a.appendChild(w),Gt("button",{class:m,"aria-label":e,title:e},[],[{name:"click",callback:S},{name:"keydown",callback:e=>{"tab"===e.key.toLowerCase()&&e.shiftKey&&(e.preventDefault(),o.focus())}}])),o=(a.appendChild(r),C=Gt("div",{class:p}),a.appendChild(C),A=Gt("div",{class:f}),Gt("button",{button:"button",class:g+" "+h},e,[{name:"click",callback:S},{name:"keydown",callback:e=>{"tab"!==e.key.toLowerCase()||e.shiftKey||(e.preventDefault(),r.focus())}}]));return A.appendChild(o),a.appendChild(A),t.addEventListener("keydown",e=>{var t=e.key;e.stopPropagation(),"escape"===t.toLowerCase()&&x()}),t.closeCallback=()=>{},t.close=x,t}(),n.appendChild(b)),w.replaceChildren(),o=t.querySelector("h1"),e=Kt(o?o.textContent:e),o?.parentNode.removeChild(o),w.appendChild(e),t&&C.appendChild(t),o=t.getBoundingClientRect().height,e=C.getBoundingClientRect().height,t=b.getBoundingClientRect().height,o<e&&(e=w.getBoundingClientRect().height,i=A.getBoundingClientRect().height,e=30+e+o+i,b.style.height=e+"px",e<t)&&(b.style.top=(t-e)/2+"px"),b.classList.add(y),(L=document.activeElement).tagName.toLowerCase()===zt&&(L=n?.parentNode?.activeElement),w.focus(),a&&a(b),b.closeCallback=r,v=document.body.style.overflow,document.body.style.overflow="hidden",document.removeEventListener("keydown",E),document.addEventListener("keydown",E))}};function k(){return b&&b.classList.contains(y)}function x(){b&&k()&&(b.classList.remove(y),b.closeCallback&&b.closeCallback(),C.replaceChildren(),L?.focus(),L=null,b.parentNode.removeChild(b),b=null,document.removeEventListener("keydown",E),document.body.style.overflow=v)}function S(){x()}function E(e){"escape"===e.key.toLowerCase()&&(e.stopPropagation(),x())}}b(()=>Yt(()=>{Zt({action:"update",params:{domain:l(),URL:i()}})})),b(()=>{chrome.runtime;const D="contrastCheckerWrapper",F="results-wrapper",z="example-text",p="results-group-panel",T="elements-counter",U="validAA",j="invalidAA",$="validAAA",W="invalidAAA",X="results-container",H="no elements detected",f="refresh-button",J="selector-bar",G="utilsBar",K="contrastChecker_release_notes",Q="release notes",Y="help",n="news-active",e="release_notes",Z="contrastChecker_closer",g="action-button",ee="custom-scrollbar",te="color-tools",ne="custom-analysis",ae="color-field",r="visibleElements",m="valid",re="collapser",oe="tagList",ie="expandable",a="expanded",le="check contrast",se="refresh-analysis",h="single-validation",ce="warning",de="eyeDropper",ue="spinner",pe="visibilityLegend",fe="counter",ge="hiddenElementsCounter",me="svgColorBlindSimulation",he=h+"-size",y=h+"-contrast",ye=h+"-AA-small",ve=h+"-AAA-small",be=h+"-AA-large",Ce=h+"-AAA-large",Ae="data-contrast-checker-eyedropper-active",we="WCAG Contrast checker",v=["Contrast","Size","Elements"],Le="Auto-refresh",ke="Level",xe="Filters",Se="Foreground color (hex.)",Ee="Background color (hex.)",Oe=["Size","Contrast","AA","AAA"],Re="#000000",Ve="#FFFFFF",b=document.body,C=b.parentNode,_e=b.style,Ne="info-menu",Pe="switch-position-button",A="switch-position-button--left",w="switch-position-button--right",Ie="switch position to left",qe="switch position to right",o={ENTER:"Enter",SPACE:" ",UP_ARROW:"ArrowUp",DOWN_ARROW:"ArrowDown"};const Be=350;const s={},Me={mutation:function(e){var t=L.querySelector(f);t&&(t.setAttribute("tittle",e),t.classList.add(ce))}},De={pinPanelLabel:"open automatically",pinPanelByDomainLabel:"open always for this domain",pinMenuLabel:"open automatically",pinPanelToTabLabel:"keep open while browsing",pinPanelByURLLabel:"open always for this URL"},i="expanded",l={};let Fe,ze=0,Te,L,k,Ue,c,je,$e,We,t,x,S,E,O,R,V,Xe,d=!1,u={},He=0,Je=!1,Ge,Ke,Qe,Ye,Ze,_,N={close:()=>{}},P,et,I;const tt=Ln["createMenu"],{createResizer:nt,removeResizer:at,updatePanelPosition:rt,recoverBodyStyles:ot,updateFixedElementsPosition:it}=xn(),lt=Vn()["openDialog"];var st={toggle:function(e={}){var t=document.getElementById(Tt);t?(pt(),Object.keys(l).forEach(e=>{delete l[e]})):function(e){(function(e){Wt.language.defaultValue=e})(function(t){return t.indexOf("-")&&(t=t.split("-")[0]),un.find(e=>e.code===t)?t:Wt.language.defaultValue}(e.browserLanguage)),function(a){let r="en";Yt(t=>{un.find(e=>e.code===t.language)&&(r=t.language),Qt(dn(r),e=>{let n={};Object.entries(e).forEach(([e,t])=>{n[e]=t.message}),a(n,r)},"json")})}(()=>{Te=function(e){P=function(){var e=Gt(zt,{id:Tt,dir:"rtl"}),t=(Fe=e.attachShadow({mode:"closed"}),Gt(zt,{class:"colorContrastChecker-body"}));return C.insertBefore(e,b),C.setAttribute(Dt,"true"),Fe.appendChild(t),t}();const t=Gt("div",{id:D}),n=(P.style.width=Be+"px",function(){var e=Gt("div"),t=function(e){var t=Gt("div",{class:X}),e=vt(e);return t.appendChild(e),t}({headers:[[{colspan:1},v[0]],[{},v[1]],[{colspan:4},v[2]]],class:"results AA",tbody:["visibleElements"]});return e.appendChild(t),e}()),a=(V=Gt("div",{class:ue}),Gt("div",{class:`${F} ${k} ${p} `+ee},[n,V])),r=function(){var e=Gt("div",{id:te}),t=Gt("div",{}),n=Gt("div",{id:ne}),a=d(Se,"foreground",Re),r=d(Ee,"background",Ve),o=Gt("span",{style:"font-size: 14pt"},["14pt"]),i=Gt("span",{style:"font-size: 14pt; font-weight: bold"},["14pt bold"]),l=Gt("span",{style:"font-size: 18pt"},["18pt"]),o=Gt("div",{class:z,style:"color: "+Re+"; background-color: "+Ve},[o,i,l]),i=vt({headers:Oe.map(e=>[{},e]),class:h}),l=i.querySelector("tbody"),s=q([[{class:he},"small"],[{class:y},"21"],[{class:ye+" "+m}],[{class:ve+" "+m}]]),c=q([[{class:he},"Large"],[{class:y},"21"],[{class:be+" "+m}],[{class:Ce+" "+m}]]);return e.appendChild(t),n.appendChild(a),n.appendChild(r),t.appendChild(n),l.appendChild(s),l.appendChild(c),t.appendChild(o),t.appendChild(i),e;function d(e,n,t){var a=Gt("div",{class:ae}),e=Kt(e),r=Gt("div"),e=Gt("label",{for:n},e);const o=Gt("input",{id:n,type:"text",value:t,placeholder:"ex. "+t}),i=Gt("input",{id:n+"-selector",type:"color",value:t,"aria-label":`select ${n} color`});return o.oninput=function(){rn(this.value)&&(i.value=bn(this.value),M("foreground"===n?"color":"backgroundColor",this.value))},i.oninput=function(){o.value=this.value,M("foreground"===n?"color":"backgroundColor",this.value)},a.appendChild(e),a.appendChild(r),r.appendChild(o),An()&&(t=Gt("button",{class:de},[],{name:"click",callback:function(){const t="foreground"===(je=n)?"color":"backgroundColor";wn(o,i,e=>{M(t,e)})}}),r.appendChild(t)),r.appendChild(i),a}}(),o=function(){var e=Kt(we),e=Gt("h1",{},e),t=Gt("div",{id:bt}),n=Gt("div",{id:G}),e=(t.appendChild(e),t.appendChild(n),R=function(e,t,n,a){on=""+e.tabId;var r=e.triggerMenuCLass,e=Rn(e,t,a);return ln=On(e,t.pinMenuLabel,"",`${Sn} ${En} `+r,()=>{sn(),n()}),sn(),ln}({tabId:on,container:t,settings:Xt},De,()=>{N.close(),N=R},Bt),n.appendChild(R),_=function(e,t,n){e=Gt("button",{class:e,"aria-label":t,title:t});return e.onclick=n,e}(Pe+" "+("left"===Xt.position?w:A)+" "+g,Lt(Xt.position),ut),n.appendChild(_),[{id:K,label:Q,class:g,callback:At},{id:Y,label:"help",class:g,callback:Ct}]),e=(O=tt(e,"menu",Ne,"",()=>{N.close(),N=O}),n.appendChild(O),Gt("button",{class:Z+" "+g,"aria-label":"close panel"}));return e.onclick=pt,n.appendChild(e),n.appendChild(e),t}(),i=function(){var e=Gt("div",{class:J+" "+p}),t=(x=Gt("div",{class:"level-switcher"}),Kt(ke)),t=Gt("label",{for:"levelSwitcher"},t),n=Ot([[{value:"AA"},"AA"],[{value:"AAA"},"AAA"]],k,"levelSwitcher",function(e){var t=L.querySelector("."+F);t.classList.remove("AA"),t.classList.remove("AAA"),t.classList.add(e),St("contrastLevelChecker",k=e)}),n=(t.appendChild(n),x.appendChild(t),S=Gt("div",{class:"refresh-switcher"}),Kt(Le)),t=Gt("label",{for:"refreshSwitcher"},n),n=Ot([[{value:"on"},"on"],[{value:"off"},"off"]],Ue?"on":"off","refreshSwitcher",kt);return t.appendChild(n),S.appendChild(t),E=Gt("div",{class:"colorBlind-switcher"}),e.appendChild(x),e.appendChild(E),e.appendChild(S),e}(),l=Gt("button",{id:se,class:f+" "+p},[le],[{name:"click",callback:ct}]),s=(L=P,(Jt=P).appendChild(t),Gt("span",{class:fe})),c=Gt("span",{class:ge},[s," hidden elements (not reviewed)"]),d=Gt("div",{class:pe},[c]),u="left"===Xt.position;return We=nt({resizingPanel:P,pageBody:b,isLeftPosition:u},e=>{}),rt(Xt.position),document.addEventListener("click",()=>{O.close(),N.close()}),function(e,n,a,r=Mt){const o=(e=Array.isArray(e)?e:[e]).length;let i=0;e.forEach(e=>{const t=new XMLHttpRequest;t.overrideMimeType("text/plain"),t.open("GET",""+r+e+".css",!0),t.onload=()=>{var e;4===t.readyState&&200===t.status&&(e=Gt("style",{},Kt(t.responseText.replace(/url\(/g,"url("+r))),n.appendChild(e),++i===o)&&a&&a()},t.onerror=e=>{},t.send(null)})}(["style","context-menu","resizer","scrollBars","dialog"],Jt,function(){Ge=b.getAttribute("style"),Ke=window.getComputedStyle(b,null).getPropertyValue("position"),Qe=window.getComputedStyle(b,null).getPropertyValue("width"),Ye=window.getComputedStyle(b,null).getPropertyValue("margin-left"),Ze=window.getComputedStyle(b,null).getPropertyValue("margin-right"),_e.position="relative",_e.width="auto",t.appendChild(o),t.appendChild(i),t.appendChild(a),t.appendChild(d),t.appendChild(l),t.appendChild(r),Jt.appendChild(We),I?wt():Qt(Mt+"releaseNotes.html",e=>{I=e,wt()}),e()},cn),P}(()=>{Zt("getDocumentList")}),u={};{_t();const l=Gt("div",{id:me});{var e="colorBlindSimulation.html";var n=l;var a=function(){var t=l.querySelectorAll("filter"),n=[],a=t.length;for(let e=0;e<a;e++){var r=t[e].id,o=t[e].querySelector("feColorMatrix").values.baseVal;n.push(r),s[r]=[];for(let e=0;e<o.length;e++)s[r].push(o.getItem(e).value)}var e=Gt("label",{for:"colorBlindSwitcher"},Kt(xe)),i=Ot(n.map(e=>[{value:e},e]),"none","colorBlindSwitcher",Rt);e.appendChild(i),E.appendChild(e)};let t=new XMLHttpRequest;e=Mt+e,t.open("GET",e,!0),t.responseType="document",t.onload=function(){var e;4===t.readyState&&200===t.status&&(e=t.responseXML.body.firstChild,n.appendChild(e),a)&&a(n)},t.onerror=function(e){},t.send(null)}C.appendChild(l)}var t;pn,-1<(t=Xt.pinnedTabs?.split(",")||[]).indexOf(on)||t.push(on),tn("pinnedTabs",t.join(",")),sn()})}(e)},update:ft,showResultsFromFrame:function(e){Nt();var t=e.frameId,e=e.results,t=hn(t),{results:e,hiddenCount:n}=e;!function e(t,n){if(typeof t==typeof n){for(var a in t){if(t.hasOwnProperty(a)!==n.hasOwnProperty(a))return;switch(typeof t[a]){case"object":if(e(t[a],n[a]))break;return;case"function":if(void 0===n[a]||t[a].toString()!==n[a].toString())return;break;default:if(t[a]!==n[a])return}}for(var r in n)if(void 0===t[r])return;return 1}}(e,u[t])&&(u[t]=e,He+=n);Object.values(u).map(e=>JSON.stringify(e)).some(e=>!e)||(t=function(){const a=Gt("tbody",{class:r}),e=function(){var e=[];for(var t in u)for(var n in u[t])e.push(Object.assign({resultReference:n,frames:[]},u[t][n],gn(n)));return function(e){e=[...e.map(e=>JSON.parse(JSON.stringify(e)))];if(!e.length)return[];const t=e.shift(),i=[Object.assign({},t,{frames:[t.frameId]})];return e.forEach(e=>{var t=i[i.length-1],{elements:n,contrast:a,size:r}=t;if(e.contrast===a&&e.size===r)for(var o in t.frames.push(e.frameId),e.elements)n[o]?n[o]+=e.elements[o]:n[o]=e.elements[o];else i.push(Object.assign({},e,{frames:[e.frameId]}))}),i}(e.sort(dt))}();e.forEach(e=>{e=function(e){let t,n;const a=[],{resultReference:r,isVisible:o,contrast:i,size:l,foregroundColor:s,backgroundColor:c,elements:d,frames:u,validation:p}=e,f={foregroundColor:s,backgroundColor:c};let g=0;p&&(t=p.isValidAA,n=p.isValidAAA);let m=[];var h=[],y=(h._visibilityStatus="",[]),v=[];for(var b in d){var C=b.split(".")[0],A=b.split(".")[1],w=(-1===y.indexOf(C)&&y.push(C),v.push(b),d[b]);m=m.concat(w),g+=w,h.push({elementsByTagCount:w,tag:b,nodeName:C,visible:A}),""===h._visibilityStatus?h._visibilityStatus=A:h._visibilityStatus!==A&&(h._visibilityStatus="mixed")}if(h.sort((e,t)=>e.nodeName>t.nodeName?1:e.nodeName<t.nodeName?-1:0),1<h.length){const L=Gt("ul");h.forEach(e=>{var{elementsByTagCount:e,tag:t,nodeName:n,visible:a}=e,e=Kt(e+" "+n),n=Gt("li",{tabindex:"-1","data-elements-ref":r+"//"+t,"data-frame-id":u.join(","),"data-visibility":a},e);L.appendChild(n)}),a._sublist=L}p&&(e=t?U:j,e=(e+=" ")+(n?$:W),a.push([{rowClass:e,class:"contrast-value"},i]),a.push([{class:"font-size"},l]),a.push([{class:"sample",style:"color:"+s+";background-color:"+c}]),a._rowClass=e);a.push([{class:T},g.toString()]);e=y.join(", ");1<h.length&&(a._expandable=!0);e=Gt("span",{class:oe},[1<y.length?`[${e}]`:e]);return a.push([{},e]),a._id=l+"-"+i,a._visibilityStatus=h._visibilityStatus,a._frames=u.join(","),a._colors=f,a._isVisible=o,a._elementsByValue=m,a._referenceElementsProperty=r+"//"+v.join(","),a}(e);let t=e._rowClass||"";void 0===l[e._id]?l[e._id]=!1:l[e._id]&&(t+=" "+i);var n=q(e,{tabindex:"-1",id:e._id,class:t,"data-elements-ref":e._referenceElementsProperty,"data-frame-id":e._frames,"data-visibility":e._visibilityStatus});e._sublist&&n.querySelectorAll("td:last-child")[0].appendChild(e._sublist),a.appendChild(n)}),0===e.length&&(a.appendChild(q([[],[],[],[],[]])),a.appendChild(q([[{class:"empty",colspan:100},H]])));return a}(),d||ft(t),e=He,L.querySelector(`.${ge} .`+fe).textContent=e,Pt())},updateListOfDocuments:function(r){var e=r["documents"];u={},He=0,e.forEach(e=>{var{url:e,frameId:t}=e,n=hn(t),e=window.document.body.querySelector('iframe[src="'+e+'"]'),a=(e&&e.setAttribute(Ut,t),e=t,{frame:a=window.document.querySelector("iframe["+Ut+'="'+e+'"]'),isVisible:!a||en(a),frameId:e})["isVisible"];Object.assign(r,{frameId:t}),a?(u[n]={},Xt.updateAnalysisOnDOMChanges?Zt({action:"connectMutationObserver",params:r}):Zt({action:"disconnectMutationObservers",params:r}),e=t,ze=e,Nt(),a={settings:Xt,tabId:on,frameId:ze},c||(a.action="warnOnMutation"),Zt({action:"getResultsFromFrame",params:a}),xt()):Zt({action:"disconnectMutationObservers",params:r})})},getCurrentColorMatrix:function(){var e=t&&"none"!==t?s[t]:void 0;Zt({action:"sendCurrentColorMatrix",params:{settings:Xt,tabId:on,currentColorMatrix:e}})},listenMessage:function(e){var{message:e,type:t}=e.message;Me[t](e)},updatePinnedStatus:sn};function ct(){Zt("getDocumentList")}function dt(e,t){return e.contrast===t.contrast?e.size===t.size?e.frameId<t.frameId?-1:1:e.size<t.size?1:-1:e.contrast<t.contrast?-1:1}function ut(){var e="left"===Xt.position,t=e?"right":"left";Xt.position=t,Xt.leftPosition=e,qt("position",t),rt(t),_.classList.remove(A),_.classList.remove(w),_.classList.add(e?A:w),_.setAttribute("aria-label",Lt(t)),_.setAttribute("title",Lt(t))}function pt(){pn,-1<(e=Xt.pinnedTabs?.split(",")||[]).indexOf(on)&&e.splice(e.indexOf(on),1),tn("pinnedTabs",e.join(",")),sn(),u={},Zt("closeWidget");var e=document.getElementById(Tt),t=e.parentNode;t.removeChild(e),t.removeAttribute(Dt),t.removeAttribute(Ae),b.style.marginLeft=Ye,b.style.marginRight=Ze,gt(),mn().forEach(t=>{t.shadowRoot.querySelectorAll(`style[${$t}]`).forEach(e=>{t.shadowRoot.removeChild(e)}),t.removeAttribute(jt)}),$e=void 0,at(),ot(),_t()}function ft(e){if(document.getElementById(Tt)){gt();var t=L.querySelector("."+X);if(t){var t=t.querySelector("table"),n=t.querySelector("tbody");n&&t.removeChild(n),t.appendChild(e);var a=e.querySelectorAll("[data-elements-ref]"),r=a.length;for(let e=0;e<r;e++){var o=a[e];o.onblur=gt,o.onkeydown=yt,o.onfocus=mt,o.querySelectorAll("."+re).forEach(e=>{e&&(e.onclick=ht)})}d=!1,Pt()}}}function gt(){Zt({action:"cleanHighlightedElements",params:{}}),d=!1}function mt(e){var e=e.target,t=e.getAttribute("data-elements-ref"),e=e.getAttribute("data-frame-id"),{foregroundColor:n,backgroundColor:a}=gn(n=(n=(n=t).split("//"))[0]);L.querySelector("[id=foreground]").value=n,M("color",L.querySelector("[id=foreground-selector]").value=n),L.querySelector("[id=background]").value=a,M("backgroundColor",L.querySelector("[id=background-selector]").value=a),Zt({action:"highlightElements",params:{elementsRef:t,frames:e}}),d=!0}function ht(e){e=e.target.closest("tr");e.classList.contains(i)?(e.classList.remove(i),l[e.id]=!1):(e.classList.add(i),l[e.id]=!0)}function yt(t){var e=t.key,t=(e!==o.DOWN_ARROW&&e!==o.UP_ARROW||t.preventDefault(),t.target),n="tr"===t.tagName.toLowerCase();if(e===o.DOWN_ARROW){let e=t.nextSibling;n&&t.classList.contains(a)?e=t.querySelector("li:first-child[tabindex]"):e||n||(e=t.closest("tr").nextSibling),e&&e.focus()}else if(e===o.UP_ARROW){let e=t.previousSibling;e?(e=e.classList.contains(a)?e.querySelector("li:last-child[tabindex]"):e)&&e.focus():n||(e=t.closest("tr")).focus()}else n&&(e===o.ENTER||e===o.SPACE)&&t.classList.contains(ie)&&t.classList.toggle(a)}function vt(e){const t=Gt("table",e.class?{class:e.class}:{});var n=Gt("caption",{},Kt(e.caption)),a=Gt("thead"),r=Gt("tr"),o=e.headers;for(let e=0;e<o.length;e++){var i=Gt("th",o[e][0],o[e][1]||[]);r.appendChild(i)}return e.caption&&t.appendChild(n),a.appendChild(r),t.appendChild(a),e.tbody?e.tbody.forEach(function(e){t.appendChild(Gt("tbody",{class:e}))}):t.appendChild(Gt("tbody")),t}function q(t,e,n){const a=Gt("tr",e,[],n);for(let e=0;e<t.length;e++){var r=t[e],o=Gt("td",...r);r.rowClass&&r.rowClass.split(" ").forEach(function(e){a.classList.add(e)}),a.appendChild(o)}return t._expandable&&(e=Gt("span",{class:re},[],[{}]),a.querySelector("td:last-child").insertBefore(e,a.querySelector("td:last-child *:first-child")),a.classList.add(ie)),a}fn=!0,Object.assign(Ht,st);const bt="wcag-contrast-checker-header";function Ct(){et?lt("Help",et,Jt):Qt(Mt+"help.html",e=>{et=e,Ct()})}function At(){var e;I?(e=()=>{Je&&(qt("widgetVersion",Xe),It(n,!1),Je=!1)},lt("Release notes",I,Jt,{closeCallback:e})):Qt(Mt+"releaseNotes.html",e=>{I=e,wt(),At()})}function wt(){(Xe=I.querySelector("#"+e+" dt:first-child").getAttribute("data-version"))!==Xt.widgetVersion&&(Je=!0,It(n,!0))}function Lt(e){return"left"!==e?Ie:qe}function kt(e){Ue="on"===e,St("autoRefreshCheck",c="on"===e),St("updateAnalysisOnDOMChanges",c);e={settings:Xt};Xt.autoRefreshCheck=c,(Xt.updateAnalysisOnDOMChanges=c)?ct():e.action="warnOnMutation",c?Zt({action:"connectMutationObserver",params:e}):Zt({action:"disconnectMutationObservers",params:e}),xt()}function xt(){var e=L.querySelector(f);e&&(e.removeAttribute("tittle"),e.classList.remove(ce))}function St(e,t){var n={};n[e]=t,chrome.storage.local.set(n)}function Et(){var e,t,n=L.querySelector("[id=foreground]").value,a=L.querySelector("[id=background]").value;a=a;const r=!(!rn(n=n)||!rn(a))&&(a={contrast:n=vn(Cn(n),Cn(a)),smallAA:!0,smallAAA:!0,largeAA:!0,largeAAA:!0},n<yn&&n>=nn?a.smallAAA=!1:n<nn&&n>=an?(a.smallAA=!1,a.smallAAA=!1,a.largeAAA=!1):n<an&&(a.smallAA=!1,a.smallAAA=!1,a.largeAA=!1,a.largeAAA=!1),a);r&&(n=L.querySelectorAll("."+ye)[0],a=L.querySelectorAll("."+be)[0],e=L.querySelectorAll("."+ve)[0],t=L.querySelectorAll("."+Ce)[0],L.querySelectorAll("."+y).forEach(function(e){e.textContent=r.contrast}),B(r.smallAA,n),B(r.smallAAA,e),B(r.largeAA,a),B(r.largeAAA,t))}function B(e,t){e?t.classList.add(m):t.classList.remove(m)}function Ot(t,n,e,a){var r=Gt("select",{value:n,id:e});for(let e=0;e<t.length;e++){var o=Gt("option",t[e][0],t[e][1]||[]);t[e][0].value===n&&o.setAttribute("selected","selected"),r.appendChild(o)}return r.onchange=function(e){a(e.target.value)},r}function M(e,t){e="foreground"===e?"color":e,L.querySelector("."+z).style[e]=t,Et()}function Rt(e){Vt(e),ct()}function Vt(e){b.parentNode.classList.remove(t),b.classList.remove(t),kn=!e||"none"===e||(b.parentNode.classList.add(e),b.classList.add(e),!1),it();e="none"!==(t=e||"none")?s[t]:void 0;Zt({action:"sendCurrentColorMatrix",params:{settings:Xt,tabId:on,currentColorMatrix:e}})}function _t(){Vt("none");var e=C.querySelector("#"+me);e&&e.parentNode.removeChild(e)}function Nt(){V.classList.add(Ft);var e=L.querySelector("."+r);e&&(e.style.visibility="hidden")}function Pt(){V.classList.remove(Ft);var e=L.querySelector("."+r);e&&(e.style.visibility="visible")}function It(e,t){t?P.classList.add(e):P.classList.remove(e)}function qt(e,t){var n={};Xt[e]=t,n[e]=t,chrome.storage.local.set(n),Bt(e,t)}function Bt(t,n){Yt(e=>{e[t]&&e[t].cssClass&&It(e[t].cssClass,n)})}});