import{a as x,b as O}from"./chunk-B4ALZHVJ.js";import{a as V}from"./chunk-AU5XKNPD.js";import{a as E}from"./chunk-5VY5EMKN.js";import{a as l,b as d}from"./chunk-WDPQNPC7.js";import{A as L,B as T,C as I,c as S,d as v,g as N}from"./chunk-HMFVUZXK.js";import{a as D}from"./chunk-ZN5XPMIY.js";import{a as C}from"./chunk-RIL6IOBV.js";import{e as _,h as R}from"./chunk-6BB4SG5R.js";import{b as A}from"./chunk-IJLSJJ7U.js";import{a as y}from"./chunk-W32UHEZE.js";import{c as t,d as w,r as f,w as b,x as k}from"./chunk-WRHUMLYF.js";import{G as q,q as j}from"./chunk-OEPSEZ5A.js";import{e as g}from"./chunk-3GYLW4KZ.js";var P=g(q()),n=g(j());var M=()=>k("getEnergyCashbackDomains");window.__wb_timing.cashbackRequireAt=performance.now();var c,h=!1;async function F(){await V("24_hr_throttle_all")||(await P.default.all([C(),y(),R(),D(),O(),M()]).spread((s,o,m,a,i,r)=>{E(s),t.merge({siteAPIData:o}),t.merge({cashback:m}),t.set("lifetimeSavings",a),t.set("sameTabRedirectDomains",i),t.set("energyCashbackDomains",r)}),f("ext_instant_init_notifs")||document.readyState!=="loading"?p():document.addEventListener("DOMContentLoaded",p))}async function p(e=!1){h=e;let s=t.get("siteAPIData"),o=n.default.get(s,"tld"),m=["macys.com","jcpenney.com","kohls.com","walgreens.com","groupon.com","loft.com","fanatics.com","samsung.com","ulta.com","overstock.com","wish.com"];if(f("ext_inc_v_2")&&m.includes(o))return n.default.noop;b(o);let a=t.get("cashback");t.set("cashbackVisible",!1);let i=await l("emailCreateAccount");if(i&&JSON.parse(i)?.shouldLoadNotification&&(await d("emailCreateAccount"),N(n.default.get(a,"reward",null))),(S()||v())&&!T())return L(),!1;w({active:!!a,cashback:a});let r=await l("affiliateRedirect");if(r){let u=JSON.parse(r);if(t.set("affiliateRedirect",u),await d("affiliateRedirect"),_()){let G=window.location.href,J=t.get("pageViewId");x({resolvedUrl:G,domain:o,pageViewId:J})}}let B=t.get(["deweyResult"]);U(B),z()}async function z(){A.emitter.on("result",e=>{U(e)})}async function U(e){t.get("cashbackVisible")||!e||c||H(e)}function H(e){c&&!h||(c=!0,I(e,{devRewardTest:h}).then(()=>{c=t.get("cashbackVisible")}))}F();export{p as a};
