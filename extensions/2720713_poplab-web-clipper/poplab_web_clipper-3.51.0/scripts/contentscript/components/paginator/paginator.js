(()=>{"use strict";var t={462:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PaginatorView=void 0,e.PaginatorView=class{paginatorBaseHtml(t){return`\n          <label>${chrome.i18n.getMessage("numero_element_capture",t.toString())}</label>\n          <div class="poplab-paginator">\n            <button type="button" class="poplab-paginator-button poplab-paginator-button-previous" id="poplab-paginator-previous-btn" disabled>\n              <img src="${browser.runtime.getURL("images/left-arrow.svg")}"/>\n            </button>\n            <span class="poplab-paginator-pages" id="poplab-paginator-pages"></span>\n            <button type="button" class="poplab-paginator-button poplab-paginator-button-next" id="poplab-paginator-next-btn">\n              <img src="${browser.runtime.getURL("images/right-arrow.svg")}"/>\n            </button>\n          </div>`}paginatorButtonWithNumber(t){return`<button type="button" class="poplab-paginator-page ${0===t?"poplab-paginator-page-active":""}">${t+1}</button>`}paginatorButtonWithDots(t){return`<button type="button" class="poplab-paginator-page ${0===t?"poplab-paginator-page-active":""}">...</button>`}}},4911:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromHTML=e.clearHighlight=e.smoothScrollToTargetedHtmlElement=e.hasSameFileTypeMoreThanOnce=e.getCountPerFileType=void 0;const n=i(2688);function s(t){return Object.entries(t.reduce(((t,e)=>{const i=e.type_fichier;return t[i]=(t[i]||0)+1,t}),{})).map((([t,e])=>({typeFichier:t,count:e})))}e.getCountPerFileType=s,e.hasSameFileTypeMoreThanOnce=function(t){const e=s(t);return e.filter((t=>t.count>1)).length>0||2===e.filter((t=>t.typeFichier===n.TypeFichier.IMAGE||t.typeFichier===n.TypeFichier.VIDEO)).length};e.smoothScrollToTargetedHtmlElement=function(t,e=0){const i=document.querySelector(`#${t}`);if(i){const t=function(t){let e=t.parentElement;for(;e;){const t=window.getComputedStyle(e);if("auto"===t.overflowY||"scroll"===t.overflowY)return e;e=e.parentElement}return null}(i);if(t){let n=i.getBoundingClientRect().top+t.scrollTop-e;n>t.scrollHeight-t.getBoundingClientRect().height&&(n=t.scrollHeight-t.getBoundingClientRect().height),a(Math.floor(n),t).then((()=>o(i)))}else{let t=i.getBoundingClientRect().top+window.scrollY-e;const n=function(){const t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)-window.innerHeight-40}();t>n&&(t=n),a(Math.floor(t)).then((()=>o(i)))}}};let r=null;function o(t){r&&r.classList.remove("poplab-highlighted"),r=t;let e=document.getElementById("poplab-highlight-stylesheet");e||(e=document.createElement("style"),e.id="poplab-highlight-stylesheet",e.textContent="\n        .poplab-highlighted {\n            border: solid 8px rgb(75, 198, 185);\n        }",document.head.appendChild(e)),setTimeout((()=>{t.classList.add("poplab-highlighted")}),100)}function a(t,e){return e?e.scrollTo({top:t,behavior:"smooth"}):window.scrollTo({top:t,behavior:"smooth"}),new Promise((i=>{const n=()=>{e?Math.floor(e.scrollTop)!==t&&Math.ceil(e.scrollTop)!==t||(e.removeEventListener("scroll",n),i()):Math.floor(window.scrollY)!==t&&Math.ceil(window.scrollY)!==t||(window.removeEventListener("scroll",n),i())};e?(e.removeEventListener("scroll",n),Math.floor(e.scrollTop)===t||Math.ceil(e.scrollTop)===t?i():e.addEventListener("scroll",n)):(window.removeEventListener("scroll",n),Math.floor(window.scrollY)===t||Math.ceil(window.scrollY)===t?i():window.addEventListener("scroll",n))}))}e.clearHighlight=function(){var t;const e=document.getElementById("poplab-highlight-stylesheet");e&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e))},e.fromHTML=function(t){if(!t)return null;const e=document.createElement("template");e.innerHTML=t;const i=e.content.children;return 1===i.length?i[0]:i}},2688:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentCaptureData=e.ElementCaptureData=e.CaptureData=e.FichierMediaObject=e.ExerciseurMediaObject=e.UrlMediaObject=e.AudioMediaObject=e.VideoMediaObject=e.ImageMediaObject=e.MediaObject=e.TypeFichier=e.CaptureType=void 0;const n=i(4393);var s,r;!function(t){t.BASIQUE="BASIQUE",t.UPLOAD="UPLOAD"}(s||(e.CaptureType=s={})),function(t){t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.FICHIER="FICHIER",t.LIEN="LIEN",t.EXERCISEUR="EXERCISEUR"}(r||(e.TypeFichier=r={}));class o{constructor(t,e,i,n,s,r,o){this.id=t,this.url=e,this.type_fichier=i,this.copyright=n,this.file=s,this.editeur=r,this.subTypeFichier=o}}e.MediaObject=o,e.ImageMediaObject=class extends o{constructor(t,e,i,n,s){super(t,e,r.IMAGE,i,n,s)}},e.VideoMediaObject=class extends o{constructor(t,e,i,n,s){super(t,e,r.VIDEO,i,n,s)}},e.AudioMediaObject=class extends o{constructor(t,e,i,n,s){super(t,e,r.AUDIO,i,n,s)}},e.UrlMediaObject=class extends o{constructor(t,e,i,n){super(t,e,r.LIEN,i),this.displayPreview=!1,this.bigPreview=!1,this.label=n}},e.ExerciseurMediaObject=class extends o{constructor(t,e,i){super(t,e,r.EXERCISEUR),this.typeExerciseur=i}},e.FichierMediaObject=class extends o{constructor(t,e,i,n,s){super(t,e,r.FICHIER,void 0,i,void 0,n),this.label=s}};class a{constructor(t,e,i){this.titre=t,this.description=e,this.auteurInitial=i}}e.CaptureData=a;class l extends a{constructor(t){var e,i,s,r,o,a,l;super(null==t?void 0:t.titre,null==t?void 0:t.description,null==t?void 0:t.auteurInitial),this.type=n.ElementType.ELEMENT,this.images=[],this.videos=[],this.audios=[],this.urls=[],this.exerciseurs=[],this.fichiers=[],this.credit=null==t?void 0:t.credit,this.images=null!==(e=null==t?void 0:t.images)&&void 0!==e?e:[],this.videos=null!==(i=null==t?void 0:t.videos)&&void 0!==i?i:[],this.audios=null!==(s=null==t?void 0:t.audios)&&void 0!==s?s:[],this.urls=null!==(r=null==t?void 0:t.urls)&&void 0!==r?r:[],this.exerciseurs=null!==(o=null==t?void 0:t.exerciseurs)&&void 0!==o?o:[],this.fichiers=null!==(a=null==t?void 0:t.fichiers)&&void 0!==a?a:[],this.type=null!==(l=null==t?void 0:t.type)&&void 0!==l?l:n.ElementType.ELEMENT,this.options=null==t?void 0:t.options,this.meta=null==t?void 0:t.meta}setTitre(t){return this.titre=t,this}setDescription(t){return this.description=t,this}setCredit(t){return this.credit=t,this}setImages(t){return this.images=t,this}setVideos(t){return this.videos=t,this}setAudios(t){return this.audios=t,this}setUrls(t){return this.urls=t,this}setExerciseurs(t){return this.exerciseurs=t,this}setType(t){return this.type=t,this}getMedias(){return this.images.concat(this.videos.concat(this.audios.concat(this.fichiers)))}getAllEmbeds(){return this.getMedias().concat(this.urls).concat(this.exerciseurs)}}e.ElementCaptureData=l,e.DocumentCaptureData=class extends a{constructor(t){super(null==t?void 0:t.titre,null==t?void 0:t.description,null==t?void 0:t.auteurInitial),this.elements=[],null==t||t.elements.forEach((t=>this.elements.push(new l(t)))),this.meta=null==t?void 0:t.meta}setTitre(t){return this.titre=t,this}setDescription(t){return this.description=t,this}setElements(t){return this.elements=t,this}}},4393:(t,e)=>{var i,n,s,r;Object.defineProperty(e,"__esModule",{value:!0}),e.Editeur=e.ElementType=e.ExerciseurType=e.PoplabElementCreationRequest=void 0,e.PoplabElementCreationRequest=class{constructor(t,e){var n,r,o;this.titre=null!==(n=t.titre)&&void 0!==n?n:"",this.description=null!==(r=t.description)&&void 0!==r?r:"",this.type=t.type,this.options={isnew:!0,separator:!1},this.type!==s.SECTION||this.titre||(this.options.separator=!0),this.credits=null!==(o=t.credit)&&void 0!==o?o:"",this.webAuteurInitial=t.auteurInitial,this.imageEmbed=t.images[0]?{url:t.images[0].url,type:i.IMAGE}:void 0,this.videoEmbed=t.videos[0]?{url:t.videos[0].url,type:i.VIDEO}:void 0,this.audioEmbed=t.audios[0]?{url:t.audios[0].url,type:i.AUDIO}:void 0,this.lienEmbed=t.urls[0]?{url:t.urls[0].url,label:t.urls[0].label,displayPreview:t.urls[0].displayPreview,bigPreview:t.urls[0].bigPreview,type:i.LIEN}:void 0,this.exerciseur=t.exerciseurs[0]?{url:t.exerciseurs[0].url,exerciseurType:t.exerciseurs[0].typeExerciseur,type:i.EXERCISEUR}:void 0,e&&(this.document=e),this.meta=t.meta}},function(t){t.LIEN="LIEN",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.FICHIER="FICHIER",t.EXERCISEUR="EXERCISEUR"}(i||(i={})),function(t){t.QUIZLET="QUIZLET",t.LEARNINGAPPS="LEARNINGAPPS",t.GENIALLY="GENIALLY",t.BOOKWIDGETS="BOOKWIDGETS",t.EDUPOOL="EDUPOOL",t.BELIN="BELIN"}(n||(e.ExerciseurType=n={})),function(t){t.ELEMENT="element",t.SECTION="section"}(s||(e.ElementType=s={})),function(t){t.BELIN="https://www.belin-education.com/"}(r||(e.Editeur=r={}))}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}(()=>{const t=i(462),e=i(4911);class n extends CustomEvent{constructor(t){super("page-changed",{detail:{currentPage:t},bubbles:!0,composed:!0})}}class s extends HTMLElement{constructor(){super(),this.render=()=>{this.innerHTML=`\n      <div class="element-selection" id="element-selection">\n        ${this.paginatorView.paginatorBaseHtml(this.elementsLength)}\n      </div>\n    `;const t=this.querySelector("#poplab-paginator-pages"),i=this.elementsLength-1>6?6:this.elementsLength-1;for(let n=0;n<=i;n++)6===n?t.appendChild((0,e.fromHTML)(this.paginatorView.paginatorButtonWithDots(n))):t.appendChild((0,e.fromHTML)(this.paginatorView.paginatorButtonWithNumber(n)));this.paginator=this.querySelector(".poplab-paginator"),this.prevBtn=this.paginator.querySelector("#poplab-paginator-previous-btn"),this.nextBtn=this.paginator.querySelector("#poplab-paginator-next-btn"),this.pages=this.paginator.querySelectorAll(".poplab-paginator-page"),this.updatePaginator(this.elementsLength)},this.listenToPaginatorButtons=()=>{this.pages.forEach(((t,e)=>{t.addEventListener("click",(()=>{this.currentPage=parseInt(t.textContent),"..."===t.textContent&&(this.currentPage=0===e?parseInt(this.pages[1].textContent)-1:parseInt(this.pages[5].textContent)+1),this.updatePaginator(this.elementsLength),this.sendEventPageChanged()}))})),this.prevBtn.addEventListener("click",(()=>{this.currentPage>1&&(this.currentPage--,this.updatePaginator(this.elementsLength),this.sendEventPageChanged())})),this.nextBtn.addEventListener("click",(()=>{this.currentPage<this.elementsLength&&(this.currentPage++,this.updatePaginator(this.elementsLength),this.sendEventPageChanged())}))},this.sendEventPageChanged=()=>{this.dispatchEvent(new n(this.currentPage-1))},this.updatePaginator=t=>{this.pages.forEach(((e,i)=>{this.isStartOfPaginator(t,this.currentPage)?e.textContent=i<6?(i+1).toString():"...":this.isMiddleOfPaginator(t,this.currentPage)?e.textContent=0===i||6===i?"...":(this.currentPage-6+i+3).toString():this.isEndOfPaginator(t,this.currentPage)?0===i?e.textContent="...":i<=5?e.textContent=(t-6+i).toString():6===i&&(e.textContent=t.toString()):e.textContent=(i+1).toString(),e.classList.remove("poplab-paginator-page-active"),parseInt(e.textContent||"1")===this.currentPage&&e.classList.add("poplab-paginator-page-active")})),this.prevBtn.disabled=1===this.currentPage,this.nextBtn.disabled=this.currentPage===t},this.isStartOfPaginator=(t,e)=>t>6&&e<5,this.isMiddleOfPaginator=(t,e)=>t>6&&e>=4&&e<t-3,this.isEndOfPaginator=(t,e)=>t>6&&e>=t-3,this.currentPage=1,this.elementsLength=0,this.paginatorView=new t.PaginatorView}connectedCallback(){const t=this.getAttribute("elementsLength");t&&"undefined"!==t?(this.elementsLength=parseInt(t),this.currentPage=parseInt(this.getAttribute("currentPage"))+1,this.render(),this.listenToPaginatorButtons()):this.style.display="none"}}customElements.define("paginator-component",s)})()})();