(()=>{"use strict";var e={576:function(e,t){var n,o=this&&this.__extends||(n=(e,t)=>(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&((e,t)=>{e.__proto__=t})||((e,t)=>{for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),n(e,t)),function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=()=>{};t.Option=r;var i=function(e){function n(t){var n=e.call(this)||this;return n.value=t,n}return o(n,e),n.prototype.exists=function(e){return e(this.value)},n.prototype.filter=function(e){return e(this.value)?this:t.none},n.prototype.filterNot=function(e){return e(this.value)?t.none:this},n.prototype.flatMap=function(e){return e(this.value)},n.prototype.fold=function(){var e=this;return t=>t(e.value)},n.prototype.forAll=function(e){return e(this.value)},n.prototype.forComprehension=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this,o=0;o<e.length-1;++o)n=n.flatMap(e[o]);return n.map(e[e.length-1])},n.prototype.forEach=function(e){return e(this.value)},Object.defineProperty(n.prototype,"get",{get:function(){return this.value},enumerable:!0,configurable:!0}),n.prototype.getOrElse=function(){return this.value},n.prototype.getOrElseValue=function(){return this.value},Object.defineProperty(n.prototype,"isDefined",{get:()=>!0,enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEmpty",{get:()=>!1,enumerable:!0,configurable:!0}),n.prototype.map=function(e){return a(e(this.value))},n.prototype.match=function(e){return e.some(this.value)},Object.defineProperty(n.prototype,"nonEmpty",{get:()=>!0,enumerable:!0,configurable:!0}),n.prototype.orElse=function(){return this},n.prototype.orElseValue=function(){return this},Object.defineProperty(n.prototype,"orNull",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"orUndefined",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"toArray",{get:function(){return[this.value]},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return"Some("+this.value+")"},n}(r);t.Some=i;var s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),n.prototype.exists=()=>!1,n.prototype.filter=function(){return this},n.prototype.filterNot=function(){return this},n.prototype.flatMap=()=>t.none,n.prototype.fold=e=>()=>e(),n.prototype.forAll=()=>!0,n.prototype.forComprehension=()=>t.none,n.prototype.forEach=()=>{},Object.defineProperty(n.prototype,"get",{get:()=>{throw new Error("No such element.")},enumerable:!0,configurable:!0}),n.prototype.getOrElse=e=>e(),n.prototype.getOrElseValue=e=>e,Object.defineProperty(n.prototype,"isDefined",{get:()=>!1,enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEmpty",{get:()=>!0,enumerable:!0,configurable:!0}),n.prototype.map=()=>t.none,n.prototype.match=e=>e.none(),Object.defineProperty(n.prototype,"nonEmpty",{get:()=>!1,enumerable:!0,configurable:!0}),n.prototype.orElse=e=>e(),n.prototype.orElseValue=e=>e,Object.defineProperty(n.prototype,"orNull",{get:()=>null,enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"orUndefined",{get:()=>{},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"toArray",{get:()=>[],enumerable:!0,configurable:!0}),n.prototype.toString=()=>"None",n}(r);function a(e){return new i(e)}t.None=s,t.some=a,t.none=new s,t.option=function(e){return null==e?t.none:a(e)}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(()=>{function e(e){let t,n=!1;return(...o)=>n?t:(n=!0,t=e(...o))}const t=e((()=>self.location.href===browser.runtime.getManifest().background.page));const o=(...e)=>{},r=(...e)=>{},i=e=>{throw Error(e)};function s(e,t=r){try{return e()}catch(e){return t(e)}}Object.entries;const a=e=>"string"==typeof e,l=e=>!isNaN(e-parseFloat(e)),c=e=>l(e),u=()=>Date.now(),d=e=>e,p=e=>!!e,h=e=>new Promise((t=>setTimeout(t,e))),f=()=>{const e=[];return e.splice(0,0,new Promise(((t,n)=>{e.push(t,n)}))),e};n(576);function g(e,t){const n=e.indexOf(t);return n<0?[e]:[e.substring(0,n),e.substring(n+1)]}const m=e=>Array.isArray(e)?e:[e];const[y,_]=f(),b=Promise.resolve(),w=(e,t)=>e?browser.i18n.getMessage(e,t):"",v=(e,...t)=>w(e,t.map((e=>String(e))));new Map;const E="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,S=e=>E?e:browser.runtime.getURL(e);const I="firefox",O="important",L="!important",A=e=>document.getElementById(e),D=new Set(["svg","path","circle","text"]);function T(e,t,n){const o=D.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);if(t){const e=a(t)?{textContent:t}:t;Object.entries(e).forEach((([t,n])=>{switch(t){case"text":case"textContent":o[t]=n;break;case"handlers":Object.assign(o,e.handlers);break;default:o.setAttribute(t,n)}}))}return n&&m(n).forEach((e=>{e&&o.appendChild(e)})),o}function N(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}function C(e){const[t,n,o]=e;return"string"!=typeof t?e.map((e=>e&&C(e))):T(t,n,o?C(o):null)}const R=e=>a(e)?A(e):e;const x=e=>{e.style.visibility="hidden"},M=e=>{e.style.visibility="visible"};function B(e="",{important:t=!0,allToInitial:n=!0}={}){if(!n&&!t)return e;const o=e.split(";").filter((e=>e.trim())),r=n?["all: initial","z-index: 2147483647","font-family: Verdana, system-ui, sans-serif, Helvetica","font-size: 12px",...o]:o;return(t?r.map((e=>`${e}!important;`)):r).join("")}function F(e,t){const n=t.split(";").filter((e=>e.trim())),o=e.style;n.forEach((e=>{const[t,n]=g(e,":").map((e=>e.trim())),r=n.endsWith(L),i=r?n.slice(0,L.length).trim():n;o.setProperty(t,i,r?O:"")}))}function P(e){(e=e.isCustomField?e.node:e).focus(),["text","search","url","tel","password"].includes(e.type)&&e.setSelectionRange(0,e.value.length)}const k=E?Promise.resolve():new Promise((e=>"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",(()=>e())))),$=({initialWork:e=[],canRunWithOthers:t,beforeEach:n,afterEach:o,maxConcurrentJobs:r=1}={})=>{const i=[...e],s=new Set;return{addWork:async function(e,t){return new Promise(((n,r)=>{const l={info:t,fn(){const i=e();i.finally((async()=>{s.delete(l),o&&await o(t),i.then(n,r).finally((()=>{Promise.resolve().then(a)}))}))}};i.push(l),a()}))},startWork:a,getRunningJobsCount:()=>s.size,getPendingJobsCount:()=>i.length,hasFreeSlot:()=>s.size<r};async function a(){for(;i.length>0&&s.size<r&&(0===s.size||!t||t(i[0].info,[...s].map((e=>e.info))));){const e=i.shift();s.add(e),n&&await n(e.info),e.fn()}}},j=e=>{let t=!1;return(...n)=>{t||(t=!0,e(...n))}};const{port1:U,port2:H}=new MessageChannel;class W extends class{constructor(e,t={storageArea:"local"}){this.key=e,this.options=t,this._listeners=Array(),this._listenForChangesFn=j((()=>browser.storage.onChanged.addListener(((e,t)=>{t===this.storageArea&&e[this.key]&&this._listeners.forEach((t=>t(e[this.key])))})))),this.storageArea=t.storageArea}async addOnChangeListener(e,{dummyInitValue:t}={}){var n;this._listeners.push(e),this._listenForChangesFn(),t&&e({newValue:(n=t,n instanceof Promise?await t:t)})}}{constructor(e,t,n={storageArea:"local"}){super(e,n),this.key=e,this.getDefaultValue=t,this.options=n,this._updateExecutor=$({maxConcurrentJobs:1}),this._setExecutor=$({maxConcurrentJobs:1}),this.storageArea=n.storageArea}async reset(){return this.set(await this.getDefaultValue())}async orDefault(e){return e.hasOwnProperty(this.key)?e[this.key]:await this.getDefaultValue()}async get(){const e="custom"===this.storageArea?await this.options.customDataSource.get()||await this.getDefaultValue():"remote"===this.storageArea?await(await fetch(this.options.remoteApi.url,await this.getRequestInit())).json()||await this.getDefaultValue():"localStorage"===this.storageArea?this.options.localStorageTextOnly?s((()=>self.localStorage.getItem(this.key)),(()=>""))||await this.getDefaultValue():await s((()=>JSON.parse(self.localStorage.getItem(this.key))),(()=>this.getDefaultValue())):await browser.storage[this.storageArea].get(this.key).then((e=>this.orDefault(e)));return this.options.preProcessor?await this.options.preProcessor(e):e}async remove(){return"custom"===this.storageArea?await this.options.customDataSource.remove():"remote"===this.storageArea?(await fetch(this.options.remoteApi.url,await this.getRequestInit("DELETE"))).json():"localStorage"===this.storageArea?s((()=>self.localStorage.removeItem(this.key))):browser.storage[this.storageArea].remove(this.key)}async update(e){return this._updateExecutor.addWork((()=>this.get().then(e).then((e=>this.set(e)))))}async set(e){return this._setExecutor.addWork((async()=>{this.options.onBeforeSave&&await this.options.onBeforeSave(e);return await("custom"===this.storageArea?await this.options.customDataSource.set(e):"remote"===this.storageArea?void await fetch(this.options.remoteApi.url,await this.getRequestInit("POST",JSON.stringify(e))):"localStorage"===this.storageArea?s((()=>self.localStorage.setItem(this.key,this.options.localStorageTextOnly?String(e):JSON.stringify(e)))):browser.storage[this.storageArea].set({[this.key]:e}))}))}async setWith(e,t){return"remote"===this.storageArea||"custom"===this.storageArea||"localStorage"===this.storageArea?i("missing"):browser.storage[this.storageArea].set(Object.assign({[this.key]:e},t))}async getWith(...e){const t=e.map((e=>a(e)?e:e.key)),n="remote"===this.storageArea||"custom"===this.storageArea||"localStorage"===this.storageArea?i("missing"):await browser.storage[this.storageArea].get([this.key,...t]),o=await this.orDefault(n),r=e.map((async e=>a(e)?n[e]:await e.orDefault(n)));return[o,...await Promise.all(r)]}async getRequestInit(e="GET",t){var n,o;const r=await(i=this.options.remoteApi.GET_Headers,"function"==typeof i?i():i);var i;const s=await(null===(o=(n=this.options.remoteApi).authToken)||void 0===o?void 0:o.call(n));return{method:e,body:t,...r,...s?{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",...null==r?void 0:r.headers}}:{}}}}const z=new W("_last_options_tab",(()=>""),{storageArea:"localStorage",localStorageTextOnly:!0});(async()=>{await k;const e=document.querySelector("#wrapper > .navigation");e.onclick=function(e){const t=e.target.closest("#wrapper > .navigation > .nav:not(.active)");if(!t)return;document.querySelectorAll(".active").forEach((e=>e.classList.remove("active")));const n=t.htmlFor;A(n).classList.add("active"),t.classList.add("active"),z.set(n)};const t=await z.get();t&&e.querySelector(`label[for="${t}"]`).dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))})();const G=()=>{const e=browser.runtime.getManifest();return`${e.name} ${e.version}`},V=e=>JSON.stringify(e).replace(/{"|"}/g,"").replace(/","/g,", ").replace(/":"/g,": "),q=()=>"spam_here@fastaddons.com".replace("spam_here","admin"),K=()=>J().then((e=>`${"mailto:"+q()}?subject=${encodeURIComponent(e)}`)),J=async()=>{var e;const t=browser.runtime.getBrowserInfo?await browser.runtime.getBrowserInfo():{},n=await(null===(e=browser.runtime)||void 0===e?void 0:e.getPlatformInfo())||{os:"unknown"};return`${G()}; info: ${V(n)}; ${V(t)};`},X=(e=Date.now())=>{const t=new Date(e);return`${t.toLocaleDateString()} ${t.toLocaleTimeString()}`};function Y(e,t,n={}){for(let o=0;o<e.length;o++){const r=e[o],i=String(t(r,o)),s=n[i];s?s.push(r):n[i]=[r]}return n}function Z(e,t){if(null==e||null==t)return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Function)return e===t;if(e instanceof RegExp)return e===t;if(e===t||e.valueOf()===t.valueOf())return!0;if(Array.isArray(e)&&e.length!==t.length)return!1;if(e instanceof Date)return!1;if(!(e instanceof Object&&t instanceof Object))return!1;const n=Object.keys(e);return Object.keys(t).every((e=>-1!==n.indexOf(e)))&&n.every((n=>Z(e[n],t[n])))}const Q=(()=>{let e=0;return()=>++e})();async function ee(e,t){const n=`id_file_${t?Q():e}`;if(document.getElementById(n))return;const o=document.createElement("link");return o.href=t?`data:text/css;base64,${btoa(e)}`:e,o.id=n,o.type="text/css",o.rel="stylesheet",new Promise(((e,t)=>{o.onload=e,o.onerror=t,document.head.appendChild(o)}))}const te=e=>Object.keys(e).filter((t=>"number"==typeof e[t])),ne=e=>te(e).map((t=>[t,e[t]]));var oe;(e=>{e[e.SPAM=0]="SPAM",e[e.COPYRIGHT=1]="COPYRIGHT",e[e.VIOLENT=2]="VIOLENT",e[e.UNETHICAL=3]="UNETHICAL",e[e.OTHER=4]="OTHER"})(oe||(oe={}));const re=["onmouseenter","onmouseleave"],ie=["onmousedown","onmouseup"],se=(e,t="",n={})=>({...ae(e,re,n),...ae(t,ie,n)});function ae(e,[t,n],{getNode:o,important:r=!1,restoreOriginalStyles:i=!0}={}){const s=e.split(";").filter(p).map((e=>e.trim())).map((e=>{const[t,n=""]=g(e,":");return n.endsWith(L)?[t,n,L]:[t,n,""]})),a=[];return{[t]:function(e){const t=o?o():e.currentTarget;0===a.length&&function(e){const t=window.getComputedStyle(e);a.push(...s.map((([e,n])=>[e,t.getPropertyValue(e),t.getPropertyPriority(e)])))}(t);s.forEach((([e,n])=>t.style.setProperty(e,n,r?O:void 0)))},[n]:function(e){const t=o?o():e.currentTarget;a.forEach((([e,n,o])=>i?t.style.setProperty(e,n,o?O:o):t.style.removeProperty(e)))}}}function le(e,t){e&&!function(e){if(!e)return!1;const{top:t,left:n,bottom:o,right:r}=e.getBoundingClientRect();return t>=0&&n>=0&&o<=(window.innerHeight||document.documentElement.clientHeight)&&r<=(window.innerWidth||document.documentElement.clientWidth)}(e)&&e.scrollIntoView(t)}let ce=!1;const ue=browser.runtime.getPlatformInfo?browser.runtime.getPlatformInfo().then((({os:e})=>ce="android"===e)):Promise.resolve(!1);let de=!1;ue.then((e=>de=!e));const pe=()=>browser.tabs.getCurrent().then((e=>browser.tabs.remove(e.id))),he=()=>browser.tabs.getCurrent().then((e=>browser.tabs.reload(e.id))),fe=t();async function ge(e,t={}){const n=m(e);const{cookieStoreId:o,inNewTab:r=!1,nextToCurrent:i=!1,active:s=!1,inNewWindow:a=!1,windowId:l,forceIncognitoWindow:c=!1,stopOpenerTabId:u,_directCall:d}=t;if(!fe&&!d)return function(e,t){if(t._directCall)throw Error("infinite loop???");return t._directCall=!0,browser.runtime.sendMessage(new me(e,t))}(n,t);const p=o,h=p?{cookieStoreId:o}:{},[f,...g]=n,y=await _(f,0,l);return g.forEach(((e,t)=>_(e,t+1,y.windowId))),y;async function _(e,t,n){const o=p&&!r&&!a&&0===t;if(a)return browser.windows.create({url:e,...h,...c?{incognito:!0}:{}}).then((e=>e.tabs[0]));if(r||o||t>0){const r=s&&0===t,a=await browser.tabs.query(ce?{active:!0}:{active:!0,lastFocusedWindow:!0}).then((([e])=>e))||{id:void 0,index:void 0},c=(l=a.index,Number.isFinite(l)?a.index+1:void 0),d=!(!ce&&!u),p=t=>browser.tabs.create({url:e,...h,windowId:n,active:r,...i?{index:c}:{},...t?{}:{openerTabId:a.id}}),f=d?await p(d):await p(d).catch((()=>p(!0)));return o&&a.id&&browser.tabs.remove(a.id),f}return await browser.tabs.update({url:e});var l}}class me{constructor(e,t){this.links=e,this.options=t,this.type="openURL"}}function ye(e,t=1){if(!c(e)||e<0)return"";if(0===e)return"0";const n=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,Math.floor(n))).toFixed(t)}${["B","KB","MB","GB","TB","PB"][n]}`}fe&&browser.runtime.onMessage.addListener((e=>{if("openURL"===e.type)return ge(e.links,e.options)}));function _e(e){const t=[];return{FIELDS:t,addField:e=>t.push(e),IntField:function(e,n,r,i,s="",a=o,{addPlusMinusIcon:c=!1,isFloat:u=!1}={}){const d=u?parseFloat:parseInt;isNaN(n)&&(n=0);const p=e=>l(e)&&e>=r&&e<=i,h=e=>String(p(e)?e:n),f=A(e);if(!f)throw Error(`id: "${e}" not found!`);const g=A("RANGE_"+e)||{};g.type="range",f.type="number",_(r,i),f.value=g.value=String(n),f.oninput=e=>{const t=g.value!==f.value;g.value=f.value,t&&a(y.get())},g.oninput=e=>{const t=f.value!==g.value;f.value=g.value,t&&a(y.get())};const m=!!g.id;if(c){const e=e=>y.set(y.get()+e);f.previousElementSibling&&"IMG"===f.previousElementSibling.nodeName&&f.previousElementSibling.remove(),f.insertAdjacentElement("beforebegin",T("img",{src:S("utils/svg/s_minus.svg"),style:"height: 24px; cursor: pointer; opacity: 0.5;",handlers:{onclick:()=>e(-1),...se("opacity: 1")}})),f.nextElementSibling&&"IMG"===f.nextElementSibling.nodeName&&f.nextElementSibling.remove(),f.insertAdjacentElement("afterend",T("img",{src:S("utils/svg/s_plus.svg"),style:"height: 24px; cursor: pointer; opacity: 0.5;",handlers:{onclick:()=>e(1),...se("opacity: 1")}}))}if(m){const e=T("i",{title:v("field_set_default",n),style:"cursor: pointer"},T("img",{width:20,height:20,style:"opacity: 0.5",src:S("utils/svg/undo.svg"),handlers:{onclick:()=>y.set(n)}}));g.nextElementSibling&&"i"===g.nextElementSibling.nodeName.toLowerCase()&&g.nextElementSibling.remove(),g.insertAdjacentElement("afterend",e),g.parentElement.style.whiteSpace="nowrap"}const y={isCustomField:!0,id:e,setMin:e=>_(e,i),setMax:e=>_(r,e),node:f,disable:e=>f.disabled=e,isDisabled:()=>f.disabled,validate:()=>p(f.value)?"":s,trySet:e=>{p(e)&&y.set(e)},get:()=>d(h(f.value)),set:e=>{const t=e!==d(f.value)||e!==d(g.value);f.value=g.value=h(e),t&&a(y.get())}};return t.push(y),y;function _(e,t){f.min=g.min=String(e),f.max=g.max=String(t),f.title=g.title=v("field_int_default_value",n,e,t)}},TextField:function(e,n,o,r=!1,i="text",s={},{withResetButton:l=!1}={}){n=n||"";const u=e=>(e=>r?!!e:a(e)||c(e))(e)?e:n,d=A(e);if(!d)throw Error(`id: "${e}" not found!`);Object.entries(s).forEach((([e,t])=>"handlers"===e?"":d.setAttribute(e,t))),"handlers"in s&&Object.assign(d,s.handlers);d instanceof HTMLInputElement&&d.setAttribute("type",i);if(d.required=r,d.value=n,d.maxLength=o,l){const e=T("i",{title:v("field_set_default",n),style:"cursor: pointer; margin-left: 8px;"},T("img",{width:20,height:20,style:"opacity: 0.5",src:S("utils/svg/undo.svg"),handlers:{onclick:()=>p.set(n)}}));d.nextElementSibling&&"i"===d.nextElementSibling.nodeName.toLowerCase()&&d.nextElementSibling.remove(),d.insertAdjacentElement("afterend",e),d.parentElement.style.whiteSpace="nowrap"}const p={isCustomField:!0,id:e,node:d,disable:e=>d.disabled=e,isDisabled:()=>d.disabled,get:()=>u(d.value.trim()),set:e=>d.value=u(e)};return t.push(p),p},BooleanField:function(n,r,{handlers:i={},proIcon:s="",proLink:a="",iconSize:l=20,onChange:c=o,noTitle:u=!1,label:d="",invert:p=!1}={}){const h=n+"_label_",f=A(h),g=d||w(`${e}_${n.toLowerCase()}`),m=A(f?h:n);if(!m)throw Error(`id: "${n}" not found!`);u&&!s||(m.title=`${s?`${w("msg_pro_header")}\n${w("msg_pro_support")}\n\n`:""}${u?"":w(`${e}_${n.toLowerCase()}_title`)}`.trim());m.id=h,m.htmlFor=n;const y=f?A(n):T("input",{id:n,type:"checkbox",handlers:i});if(y.checked=v(r),!f&&(y.addEventListener("input",(e=>c(v(e.target.checked),e))),m.className="inline-flex flex-space-between",m.appendChild(y),m.appendChild(T("span",g)),s)){const e=(_=s&&a?()=>ge(a,{nextToCurrent:!0,active:!0,inNewTab:!0}):o,e=>{e.preventDefault(),e.stopImmediatePropagation(),_(e)});m.addEventListener("click",e),m.style.color="gray",m.appendChild(T("img",{style:B(`height: ${l}px; width: ${l}px;`,{important:!1,allToInitial:!1}),src:S(s),handlers:{onclick:e}}))}var _;const b={isCustomField:!0,id:n,node:y,get:()=>v(s?!!r:y.checked),set:e=>(y.checked=v(e),c(v(e)))};return t.push(b),b;function v(e){return p?!e:!!e}},RadioFields:function(e,n,o,r=0,{autoDisable:i=!0,dataAlwaysEnabled:s="data-always-enabled",autoHide:a=!1,dataAlwaysVisible:l="data-always-visible"}={}){const c=n.map((e=>A(e))).map((e=>{if(!e)throw Error(`id: "${n}" not found!`);const t=((e,t)=>{for(let n=0;n<t;n++)e=e.parentElement||e;return e})(e,o);return t.onclick=r,u(!0),{id:e.id,activate:r,node:e,groupNode:t,disable:u};function r(){c.forEach((t=>t.disable(t.id!==e.id))),e.checked=!0}function u(n){const o=j(P);!function(e,t){const n=document.createTreeWalker(e);let o;for(;o=n.nextNode();)t(o)}(t,(r=>{let c=!1;if(a&&r instanceof HTMLElement)if(r.hasAttribute(l)||r.id===e.id)!function(e,t,n){let o=e;for(;(o=o.parentElement)!==t&&o;)n(o)}(r,t,(e=>e.style.display=""));else{const e=r.style.display;r.style.display=n?"none":"",c=r.style.display!==e}else if(i){if(!((u=r)instanceof HTMLButtonElement||u instanceof HTMLFieldSetElement||u instanceof HTMLInputElement||u instanceof HTMLOptGroupElement||u instanceof HTMLOptionElement||u instanceof HTMLSelectElement||u instanceof HTMLTextAreaElement))return;const t=r.disabled;r.id!==e.id&&r.hasAttribute&&!r.hasAttribute(s)&&(r.disabled=n),c=r.disabled!==t}var u;!n&&be(r)&&"radio"!==r.type&&c&&o(r)}))}}));c[r].activate();const u={id:e,isCustomField:!0,radios:c,get:()=>c.findIndex((e=>e.node.checked)),set:e=>(c[e]||c[r]).activate()};return t.push(u),u},ImageSelectField:function(e,n,r,i,{onChange:s=o,showPreview:a=o,hidePreview:l=o}={}){ee(S("utils/css/image_select_field.css"));let c=n;const u=A(e);g(c);const d={setValues:g,isCustomField:!0,id:e,node:u,get:p,set:f};return t.push(d),d;function p(){const e=u.querySelector("div[data-value].selected");return e?JSON.parse(e.dataset.value):r}function f(e){const t=p(),n=c.find((t=>Z(t.value,e)));e=n?e:r;const o=JSON.stringify(e);((e,t=document)=>Array.from(t.querySelectorAll(e)))(".image_select_field_node",u).forEach((e=>{const t=e.dataset.value===o;e.classList.toggle("selected",t),t&&h(100).then((()=>le(e,{block:"center"})))}));p()!==t&&s(n)}function g(e){c=e,N(u),u.appendChild(0===c.length?function(e,t,n={},o={}){return C(["label",{style:"display: flex; align-items: center;"},[["img",Object.assign({src:e,height:14,width:14,style:"margin-right: 5px;"},n)],["span",Object.assign({textContent:t},o)]]])}("utils/svg/meh-regular.svg",w("load_images_empty")):(e=>{const t=document.createDocumentFragment();for(let n=0;n<e.length;n++)t.appendChild(e[n]);return t})(c.some((e=>e.category))?Object.values(Y(c,(e=>e.category))).map((e=>{return t=e[0].category,n=e.map(m),T("div",{class:"image_select_field_category"},[T("b",t),...n]);var t,n})):c.map(m))),f(p())}function m(e){const t="svg"===e.ext,n=[`${w("ed_dial_title")} \t${e.name}`,`${w("downloads")} \t${e.downloads}`,`${w("image_extension")} \t${e.ext}`,...t?[]:[`${w("ed_vr_resolution")} \t${e.width} x ${e.height}`],`${w("image_file_size")} \t${ye(e.size)}`,`${w("create_date")} \t${X(new Date(e.create_date))}`].join("\n"),r=C(["div",{class:"image_select_field_node","data-value":JSON.stringify(e.value),handlers:{onclick:t=>{null==t.target.closest(".flag-image")&&f(e.value)}}},[["img",{src:e.src,loading:"lazy",class:"image_select_field_img",handlers:{onmouseover:t=>a(e,t),onmouseout:l}}],["div",0,[["label",w("ed_dial_title")],...e.downloads?[["label",w("downloads")]]:[],["label",w("image_info")]]],["div",{title:n},[["i",`${e.name}`],...e.downloads?[["i",`${e.downloads}`]]:[],["i",0,t?[["b",`${e.ext.toUpperCase()}`],["i",`, ${ye(e.size)}`]]:["i",`${e.ext.toUpperCase()}, ${ye(e.size)}, ${e.width} x ${e.height}`]]]],["img",{class:"flag-image",src:S("utils/svg/flag-regular.svg"),title:w("report_image"),handlers:{onclick:t=>async function(e,t){const n=await(async(e,t,n=o)=>{await ee(S("utils/css/report_violation.css"));const r=_e("report"),i=`report_violation_${Q()}`,s=C(["div",{class:"report_violation"},[["h3",e],["label",{textContent:w("report_type"),for:i}],["select",{id:i}],["textarea",{placeholder:w("report_details_placeholder"),maxlength:"512"}],["div",0,[["button",{class:"btn btn-red",textContent:w("report_send"),handlers:{onclick:async e=>{const n=e.target;n.disabled=!0,n.textContent=w("label_sending"),await t(a.get(),s.querySelector("textarea").value),l()}}}],["button",{class:"btn btn-err",textContent:w("label_close"),handlers:{onclick:l}}]]]]]),a=r.SelectField(s.querySelector(`#${i}`),ne(oe).map((([e,t])=>({value:t,name:w(`report_type_${e.toLowerCase()}`)}))),oe.SPAM);return s;function l(){s.remove(),n()}})(w("report_image"),((e,n)=>i(t,e,n)),(()=>r.close())),r=await(async(e,t,{alignLeft:n=!0,alignTop:o=!0}={})=>{await ee(S("utils/css/local_popup.css"));const r=T("div",{class:"local_popup"},t);document.body.appendChild(r);const{width:i,height:s}=r.getBoundingClientRect();return r.style.left=e.clientX-(n?0:i)+"px",r.style.top=e.clientY-(o?0:s)+"px",r.onclick=e=>e.stopPropagation(),h().then((()=>window.addEventListener("click",a,{once:!0}))),{close:a};function a(){r.remove()}})(e,n,{alignLeft:!1})}(t,e)}}]]]);return e.style&&F(r,e.style),r}},SelectField:function(e,n,r,i=!0,s=o){const a=R(e),l=String(r),c=n.map((({value:e})=>String(e))),u=document.createDocumentFragment();n.forEach((({value:e,name:t,style:n,title:o})=>{const r=document.createElement("option");r.value=String(e),r.textContent=t,n&&F(r,n),o&&(r.title=o),u.appendChild(r)})),N(a),a.appendChild(u),a.value=l,a.oninput=()=>s(d.get());const d={isCustomField:!0,id:a.id,node:a,disable:e=>a.disabled=e,isDisabled:()=>a.disabled,get:()=>i?parseInt(a.value):a.value,set:function(e){const t=String(e),n=d.get();a.value=c.includes(t)?t:l;const o=d.get();n!==o&&s(o)}};return t.push(d),d}}}const be=e=>e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement;function we(e,t,n,o,r,i,s=S("utils/svg/file-import-solid.svg")){ee(S("utils/css/file_reader_input.css"));const l=A(e),c=e+"_input",u=T("span",t),d=T("label",{class:"file-input-label",title:n,for:c},[T("img",{src:s,height:16}),u]),p=T("input",{type:"file",id:c,accept:o,class:"hidden"});function h(e,t){a(e)&&(u.textContent=e),t&&(u.style.whiteSpace="pre",u.style.maxWidth="none")}p.onchange=function(e){const t=e.target.files[0],n=new FileReader;n.onload=function(e){i(this.result,h,t.name,t)},r?n.readAsDataURL(t):n.readAsText(t)},function(e,t){if(N(e),!t)return;Array.isArray(t)||(t=[t]);const n=document.createDocumentFragment();t.forEach((e=>n.appendChild(e))),e.appendChild(n)}(l,[d,p])}const ve=async(e,{importCallback:t=o,importSettingsId:n="import-settings",exportSettingsId:r="export-settings"})=>{const i=`.${e}`;async function s(){!function(e,t,n,o,r="application/*"){e.download=`${t}.${n}`,e.href=URL.createObjectURL(new Blob([a(o)?o:JSON.stringify(o)],{type:r})),e.dataset.downloadurl=`${n}:${e.download}:${e.href}`}(A(r),`export_${(({date:e=new Date,separator:t="_"}={})=>[e.getFullYear(),e.getMonth()+1,e.getDate(),t,e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>e===t?e:`${e}`.padStart(2,"0"))).join(t))()}`,e,await browser.storage.local.get())}browser.storage.onChanged.addListener((()=>s())),await s(),we(n,w("import_settings_button",`"${i}"`),"",i,!1,(async(e,n)=>{n(w("label_working"));const o=JSON.parse(e);o.version=u(),await browser.storage.local.set(o),n(w("import_finished")),t()}))};var Ee,Se,Ie,Oe,Le,Ae,De,Te;(e=>{e[e.TEXT=0]="TEXT",e[e.CLICKABLE=1]="CLICKABLE",e[e.LINK=2]="LINK",e[e.OTHER=3]="OTHER"})(Ee||(Ee={})),(e=>{e[e.UNIFORM=0]="UNIFORM",e[e.EXPONENTIAL=1]="EXPONENTIAL",e[e.INFINITE=2]="INFINITE"})(Se||(Se={})),(e=>{e[e.SCROLLBAR=0]="SCROLLBAR",e[e.GRAB_AND_DRAG=1]="GRAB_AND_DRAG",e[e.DYNAMIC_MULTIPLIER=2]="DYNAMIC_MULTIPLIER"})(Ie||(Ie={})),(e=>{e[e.SINGLE_CLICK=0]="SINGLE_CLICK",e[e.DOUBLE_CLICK=1]="DOUBLE_CLICK"})(Oe||(Oe={})),(e=>{e[e.NORMAL=0]="NORMAL",e[e.THIN=1]="THIN",e[e.HIDDEN=2]="HIDDEN"})(Le||(Le={})),(e=>{e[e.IF_PRESSED=0]="IF_PRESSED",e[e.NOT_PRESSED=1]="NOT_PRESSED"})(Ae||(Ae={})),(e=>{e[e.enabled=0]="enabled",e[e.userDisabled=1]="userDisabled",e[e.browserDisabled=2]="browserDisabled"})(De||(De={})),(e=>{e[e.smart=0]="smart",e[e.strict=1]="strict",e[e.none=2]="none",e[e.y_only=3]="y_only",e[e.x_only=4]="x_only"})(Te||(Te={}));function Ne(e,t){return(e=>{const t=Object.getOwnPropertyNames(e);for(let n=0;n<t.length;n++)delete e[t[n]]})(e),Object.assign(e,t)}const Ce={},Re=async function(e){return browser.storage.onChanged.addListener((t=>{Object.entries(t).forEach((([t,{newValue:n}])=>{e[t]=n}))})),Ne(e,await browser.storage.local.get())}(Ce);let xe=!1,Me=!1,Be=Ae.IF_PRESSED;async function Fe(){var e,t;const n=await Re,o=function(e,t=!1){try{const n=new URL(e).hostname;return t&&n.startsWith("www.")?n.substring(4):n}catch(e){return""}}(location.href,!0);var r;Me=n.IS_DISABLED||(null===(e=n.DISABLED_DOMAINS)||void 0===e?void 0:e[o])||function(e={},t){const{hostname:n,pathname:o,search:r,hash:i}=new URL(t),s=(n.startsWith("www.")?n.substring(4):n)+o+r+i;return!!Object.keys(e).find((e=>e.endsWith("*")?s.startsWith(e.slice(0,-1)):s===e))}(n.DISABLED_URL,location.href)||!1,Be=n.DISABLE_TYPE||Ae.IF_PRESSED,xe=!!(null===(t=n.DISABLED_HORIZONTAL_SCROLLING_DOMAINS)||void 0===t?void 0:t[o]),await(r={type:"updateIcon",status:Me?De.userDisabled:De.enabled},browser.runtime.sendMessage(r))}"moz-extension:"!==self.location.protocol&&(Re.then(Fe),browser.storage.onChanged.addListener(Fe));const Pe="#cdcdcd",ke="#f0f0f0",$e=j((()=>{browser.storage.onChanged.addListener(We),We()})),je=t(),Ue=je?null:new class{constructor(){this._style=document.createElement("style"),this.injectToBody=e((()=>this.onDomLoaded()))}async onDomLoaded(){var e;await k,null===(e=document.head)||void 0===e||e.appendChild(this._style)}async loadRule(e){await this.injectToBody();const t=this._style.sheet;null==t||t.insertRule(e)}async unloadAll(){await this.injectToBody();const e=this._style.sheet;if(e)for(;e.cssRules.length>0;)e.deleteRule(0)}};let He=Array();async function We(){const e=await Re;if(je){0,He.forEach((e=>e.unregister()));const t=ze().join("\n");He=t?[await browser.contentScripts.register({css:[{code:t}],allFrames:!0,runAt:"document_start",matches:["<all_urls>"],excludeMatches:[[...Object.keys(e.DISABLED_DOMAINS||{}).flatMap((e=>[`*://www.${e}/*`,`*://${e}/*`])),...Object.keys(e.DISABLED_URL||{}).flatMap((e=>[`*://www.${e}`,`*://${e}`]))]].find((e=>e.length>0))})]:[]}else if(Ue){if(await Ue.unloadAll(),e.IS_DISABLED||Me)return;const t=ze();await Promise.all(t.map((e=>Ue.loadRule(e))))}}function ze(){const{SCROLLBARS_WIDTH:e,SCROLLBARS_COLOR:t,SCROLLBARS_BACKGROUND:n,IS_DISABLED:o}=Ce;if(o)return[];const r=e||Le.NORMAL,i=t||Pe,s=n||ke;return[r===Le.THIN&&"*:not(select) {scrollbar-width: thin}",r===Le.HIDDEN&&"*:not(select) {scrollbar-width: none}",(i!==Pe||s!==ke)&&`* {scrollbar-color: ${i} ${s}}`].filter(p)}new W("DISABLED_DOMAINS",(()=>({}))),new W("DISABLED_HORIZONTAL_SCROLLING_DOMAINS",(()=>({})));const Ge=new W("IS_DISABLED",(()=>!1));k.then((()=>b)).then((function(){const e=document.querySelectorAll("[data-i]");for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.dataset,r=o.i,i=o.p,s=i?w(r,i.split("|")):w(r);n.appendChild(document.createTextNode(s))}const t=document.querySelectorAll("[data-a]");for(let e=0,n=t.length;e<n;e++){const n=t[e];let[o,r]=n.dataset.a.split("|");r=w(r),o?n.setAttribute(o,r):n.appendChild(document.createTextNode(r))}}));const Ve=(e,t=!1)=>{try{const{hostname:n,pathname:o,search:r,hash:i}=new URL(e),s=n+(t?o+r+i:"");return s.startsWith("www.")?s.substring(4):s}catch(e){return""}};!async function(){await k,A("title").dataset.p=G(),document.querySelectorAll("[data-show-if]").forEach((async e=>{const t=e.getAttribute("data-show-if"),n=t.startsWith("!"),o=n?t.slice(1):t;switch(o){case"firefox":case"safari":case"chrome":(!n&&I!==o||n&&I===o)&&(e.style.display="none");break;case"mac":case"win":case"android":case"cros":case"linux":case"openbsd":const{os:t}=await browser.runtime.getPlatformInfo();(!n&&t!==o||n&&t===o)&&(e.style.display="none")}})),function(){const e=_e("o");e.SelectField("SCROLL_TYPE",ne(Ie).map((([e,t])=>({name:w(`o_scroll_type_${t}`),title:w(`o_scroll_type_title_${t}`),value:t}))),0),e.SelectField("MOMENTUM_FORMULA_TYPE",ne(Se).map((([e,t])=>({name:w(`o_momentum_formula_type_${t}`),title:w(`o_momentum_formula_type_title_${t}`),value:t}))),0),e.SelectField("SCROLL_ON_TEXT_EDIT_WITH",ne(Oe).map((([e,t])=>({name:w(`o_scroll_on_text_edit_with_${t}`),value:t}))),0),e.SelectField("SCROLLBARS_WIDTH",ne(Le).map((([e,t])=>({name:w(`o_scrollbars_width_${t}`),value:t}))),0),e.TextField("SCROLLBARS_COLOR",Pe,100,!1,"color",{},{withResetButton:!0}),e.TextField("SCROLLBARS_BACKGROUND",ke,100,!1,"color",{},{withResetButton:!0}),e.BooleanField("reverse",void 0,{noTitle:!0}),e.IntField("MAXIMUM_SPEED",0,0,32),e.IntField("simple_ratio_multiplier",1,.1,20,"",o,{isFloat:!0}),e.BooleanField("TOOLBAR_BUTTON_MAIN_SWITCH",void 0,{noTitle:!0}),e.BooleanField("DISABLE_CTRL",void 0,{noTitle:!0}),e.BooleanField("DISABLE_ALT",void 0,{noTitle:!0}),e.BooleanField("DISABLE_SHIFT",void 0,{noTitle:!0}),e.BooleanField("SCROLL_ON_LINKS"),e.BooleanField("SCROLL_ON_TEXT"),e.BooleanField("SCROLL_ON_TEXTAREA"),e.BooleanField("SCROLL_ON_EDITABLE_HTML"),e.BooleanField("MOMENTUM",void 0,{noTitle:!0}),e.IntField("MOMENTUM_MAX_SPEED",0,0,32e3),e.IntField("OUTSIDE_AREA_WIDTH",0,0,1e3),e.BooleanField("no_prevent_default",void 0,{noTitle:!0}),e.IntField("TREND_MOMENTUM_WINDOW",16,5,512),e.SelectField("AXIS_LOCK",ne(Te).map((([e,t])=>({value:t,name:w(`o_axis_lock_${t}`)}))),Te.strict),e.BooleanField("PREVENT_TEXT_SELECTION",void 0,{noTitle:!0}),e.IntField("CONTEXT_MENU_UNBLOCK_DELAY",100,1,1e3),e.IntField("MOVING_DETECTION",7,1,20),e.BooleanField("PREVENT_BIG_JUMPS",void 0,{noTitle:!0}),e.BooleanField("DISABLE_CONTEXT_MENU_ON_MOVE",void 0,{noTitle:!0}),e.BooleanField("ALLOW_OTHER_MOUSE_DOWN_HANDLERS",void 0,{noTitle:!0}),e.BooleanField("NO_LINK_BLOCK",void 0,{noTitle:!0}),e.BooleanField("NO_CSS_EDIT",void 0,{noTitle:!0}),e.SelectField("DISABLE_TYPE",[Ae.IF_PRESSED,Ae.NOT_PRESSED].map((e=>({value:e,name:w(`o_disable_type_${e}`)}))),Ae.IF_PRESSED);const t=e.BooleanField("scroll_button_left"),n=e.BooleanField("scroll_button_right",void 0,{noTitle:!0}),r=e.BooleanField("scroll_button_middle",void 0,{noTitle:!0});e.BooleanField("PASTE_WITH_MIDDLE",void 0,{noTitle:!0,onChange:(e,t)=>e&&t&&browser.permissions.request({permissions:["clipboardRead"]})}),e.IntField("DURATION_MULTIPLIER",1e3,1,1e4),e.IntField("ADDITIONAL_SPEED",0,0,2e3),e.IntField("DURATION_PLUS",0,0,1e4),e.IntField("MOMENTUM_STOP_DETECTION",50,5,1e3);const i=t=>e.SelectField(t,[{name:w("o_cursor_change_default"),value:"",style:""},{name:"grabbing",value:"grabbing",style:"cursor:-webkit-grabbing; cursor: grabbing;"},{name:"grab",value:"grab",style:"cursor:-webkit-grab; cursor: grab;"}].concat(["move","n-resize","w-resize","row-resize","col-resize","all-scroll","none","cell","crosshair","text","vertical-text","alias","copy","no-drop","not-allowed","progress","wait","context-menu","help","zoom-in","zoom-out","pointer","s-resize","e-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize"].map((e=>({name:e,value:e,style:`cursor:${e}`})))),"",!1);i("CURSOR"),i("CURSOR_Y"),i("CURSOR_X"),browser.runtime.getPlatformInfo().then((({os:e})=>{"win"!==e&&(n.node.onchange=async e=>{await browser.permissions.request({permissions:["browserSettings"]}),browser.browserSettings.contextMenuShowEvent.set({value:e.target.checked?"mouseup":"mousedown"})})}));K().then((e=>{document.querySelectorAll("a[data-email]").forEach((t=>t.setAttribute("href",e))),A("contact_link").href=e,A("contact_link").textContent=q()})),Ge.get().then((e=>e&&A("main_options").insertAdjacentElement("afterbegin",T("h2",{textContent:w("o_addon_disabled_warning"),handlers:{onclick:()=>Ge.set(!1).then(he)}})))),window.location.search;async function s(){const o={};t.get()||n.get()||r.get()||r.set(!0),e.FIELDS.forEach((e=>o[e.id]=e.get()));const i=(e,t=!1)=>A(e).value.split("\n").filter(d).map((e=>e.trim())).map((e=>Ve(e,t)||Ve(`https://${e}`,t))).reduce(((e,t)=>(e[t]=!0,e)),{});o.DISABLED_HORIZONTAL_SCROLLING_DOMAINS=i("DISABLED_HORIZONTAL_SCROLLING_DOMAINS"),o.DISABLED_DOMAINS=i("DISABLED_DOMAINS"),o.DISABLED_URL=i("DISABLED_URL",!0),await browser.storage.local.set(o),(async(e,{time:t=1500,animate:n=!1,animationTime:o=200,removeAfter:r=!1}={})=>{M(e),n?(e.style.transition=`opacity ${o}ms ease 0s`,await h(t),e.style.opacity="0",await h(o)):await h(t),r?e.remove():x(e)})(A("status_label")),a()}function a(){browser.storage.local.get().then((t=>{e.FIELDS.forEach((e=>e.set(t[e.id])));const n=t;r.set(!n.hasOwnProperty("scroll_button_middle")||n.scroll_button_middle),A("DISABLED_HORIZONTAL_SCROLLING_DOMAINS").value=Object.keys(t.DISABLED_HORIZONTAL_SCROLLING_DOMAINS||{}).join("\n"),A("DISABLED_DOMAINS").value=Object.keys(t.DISABLED_DOMAINS||{}).join("\n"),A("DISABLED_URL").value=Object.keys(t.DISABLED_URL||{}).join("\n")}))}A("save_button").onclick=()=>s(),A("save_and_close_button").onclick=()=>s().then(pe),ve("scroll_anywhere",{importCallback:a}),a()}(),$e()}()})()})();