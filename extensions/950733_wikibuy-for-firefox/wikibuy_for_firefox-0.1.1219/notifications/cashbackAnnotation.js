import{a as y}from"../chunks/chunk-4GQADNUW.js";import{a as L}from"../chunks/chunk-5VY5EMKN.js";import{b}from"../chunks/chunk-4DY7Q7SZ.js";import{C as _,a as c,c as B}from"../chunks/chunk-HMFVUZXK.js";import"../chunks/chunk-3REBBJSH.js";import"../chunks/chunk-543EMZFQ.js";import"../chunks/chunk-L4RDDWJP.js";import{a as n}from"../chunks/chunk-RIL6IOBV.js";import{h as R}from"../chunks/chunk-6BB4SG5R.js";import"../chunks/chunk-6V4PETGI.js";import"../chunks/chunk-IJLSJJ7U.js";import"../chunks/chunk-LG525BKV.js";import"../chunks/chunk-WOENBU2A.js";import{a as V}from"../chunks/chunk-W32UHEZE.js";import"../chunks/chunk-3DLX7NOK.js";import"../chunks/chunk-4GJAJKDK.js";import"../chunks/chunk-HGJD3ZUF.js";import"../chunks/chunk-JDV5FZKX.js";import{a as A}from"../chunks/chunk-5GRN66PK.js";import"../chunks/chunk-QCT7FZJD.js";import"../chunks/chunk-FVPQGETT.js";import"../chunks/chunk-KWDMUJJA.js";import"../chunks/chunk-MT4LVDUX.js";import"../chunks/chunk-WN4MFSKN.js";import"../chunks/chunk-7S3YJSN5.js";import"../chunks/chunk-QUFHRGH2.js";import"../chunks/chunk-BODFWMPN.js";import{K as C,M as v,a as h,e as g,f as i,h as k,i as w,j as S}from"../chunks/chunk-LADTODTA.js";import"../chunks/chunk-O4TFJKJQ.js";import{B as u,c as e,g as d,r as m,v as l}from"../chunks/chunk-WRHUMLYF.js";import"../chunks/chunk-AC7VHEB5.js";import"../chunks/chunk-HY2GWXPO.js";import"../chunks/chunk-XSKOAVIS.js";import{G as I}from"../chunks/chunk-OEPSEZ5A.js";import"../chunks/chunk-XERCZVWP.js";import"../chunks/chunk-AT6M4CEW.js";import{e as r}from"../chunks/chunk-3GYLW4KZ.js";var it=r(h()),x=r(I());var E=r(h());var D=w(S).attrs(({hasActivated:t})=>({backgroundColor:t?"objectFavorableEmphasisHigh":void 0,fontSize:"medium",sizeType:"large"}))`
  ${({hasActivated:t,theme:o})=>A(k`
      cursor: ${t?"default":void 0};

      &:hover {
        background-color: ${t?o.colors.objectFavorableEmphasisHigh:void 0};
      }
    `)};
`;var s=r(i()),P=({isActivating:t,hasActivated:o})=>((0,E.useEffect)(()=>{u("page","cashbackAnnotation")},[]),(0,s.jsxs)(D,{hasActivated:o,isLoading:!o&&t,onClick:!o&&!t?async()=>{if(!c()){let{session:F}=await n();e.set("session",F)}if(!c()){window.open(`${d}/sign-in`);return}e.get("cashbackVisible")?e.set(["cashbackView","autoActivate"],!0):_(e.get("deweyResult"),{autoActivate:!0})}:void 0,children:[(0,s.jsx)(y,{fill:"white",width:14,marginRight:8})," ",o?"Rewards Activated":t?"Activating Rewards...":"Activate Rewards"]})),f=g({isActivating:["cashbackView","user","activating"],hasActivated:["cashbackView","user","activated"]},P);var p=r(i()),$=()=>(0,p.jsx)(C,{children:(0,p.jsx)(f,{})});function H(){return x.default.all([n(),V(),R()]).spread((t,o,a)=>{L(t),e.merge({siteAPIData:o}),e.merge({cashbackView:a})})}var M=async(t,o)=>(await H(),(!e.get("cashbackView")||B())&&!e.get("hasActivatedCompetitor")?!1:(v({app:$(),blankSlate:!0,insertAfterElement:o}),!0));async function U(){if(!m("ext_shopify_cta"))return;let t=l(),o=m("ext_separate_domain_platform")?e.get("platform")==="Shopify":await b(t),a;if(o&&(a=document.querySelector(".order-summary__section--total-lines")||document.querySelector("[aria-labelledby=MoneyLine-Heading0]")),a)return M(t,a)}document.readyState!=="loading"?U():document.addEventListener("DOMContentLoaded",U);
