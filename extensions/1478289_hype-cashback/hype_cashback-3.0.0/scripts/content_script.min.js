function buildHypePopup(e){let t=document.createElement("div");t.id="hype-widget";let n=document.createElement("style");n.appendChild(document.createTextNode(`\n    @font-face { font-family: 'Montserrat'; src: url('${chrome.runtime.getURL("fonts/Montserrat-Regular.ttf")}') format('truetype'); font-style: normal; font-weight: 400; }\n    @font-face { font-family: 'Montserrat'; src: url('${chrome.runtime.getURL("fonts/Montserrat-Bold.ttf")}') format('truetype'); font-style: normal; font-weight: 700; }\n  `)),t.appendChild(n);let o=t.attachShadow({mode:"open"}),a=document.createElement("style");a.appendChild(document.createTextNode("\n    :host { display: block!important; box-sizing: border-box; }\n    :host * { font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif!important; font-size: 13px; line-height: normal; letter-spacing: normal; }\n    .hype-content { position: relative; width: 200px; display: flex; gap: 16px; padding: 16px; border-radius: 10px; background-color: rgba(255,255,255,.95); box-shadow: 0px 0px 5px rgba(100,100,100,.5); }\n    .hype-btn-action { flex: 1; display: block; border-radius: 3px; padding: 6px; line-height: 1.333333; text-align: center; font-weight: 400; color: #fff; background-color: #284bff; outline: 0; text-decoration: none; transition: all 0.2s linear; }\n    .hype-close { font-weight: bold; color: #000; background-color: #fff; outline: 0; text-decoration: none; transition: all 0.2s linear; display: flex; align-items: center; justify-content: center; position: absolute; top: -10px; right: -10px; width: 20px; height: 20px; border-radius: 50%; font-size: 10px; box-shadow: 0px 0px 5px rgba(100,100,100,.5); }\n  ")),o.appendChild(a);let r=document.createElement("div");r.style.position="fixed",r.style.top="16px",r.style.right="16px",r.style.zIndex="65535",r.style.opacity="0",r.style.transform="none",o.appendChild(r);let i=document.createElement("div");i.className="hype-content",r.appendChild(i);let l=document.createElement("img");l.src=chrome.runtime.getURL("images/logo-hype.svg"),l.style.width="48px",i.appendChild(l);let d=document.createElement("a");if(d.href=`https://app.hype.it/buyon?merchant=${e.merchant.id}`,e.openNewWindow&&(d.target="_blank"),d.className="hype-btn-action",e.merchant.cashback.startsWith("0,00"))d.appendChild(document.createTextNode("Scopri offerte"));else{d.appendChild(document.createTextNode("Attiva cashback")),d.appendChild(document.createElement("br"));var c=document.createElement("b");c.appendChild(document.createTextNode(e.merchant.cashback)),d.appendChild(c)}i.appendChild(d);let p=document.createElement("a");p.className="hype-close",p.href="javascript:;",p.appendChild(document.createTextNode("âœ•")),p.onclick=function(){document.getElementById("hype-widget").remove(),chrome.runtime.sendMessage({command:"close",url:document.location.href,id:e.merchant.id})},i.appendChild(p),r.style.transition="all 0.2s ease",setTimeout((()=>{r.style.opacity=1}),1),document.body.parentElement.appendChild(t)}chrome.runtime.sendMessage({command:"check",url:document.location.href,fromHype:null!=document.referrer&&-1!==document.referrer.indexOf(".hype.it")},(async function(e){e&&buildHypePopup(e)}));