"use strict";(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["src_pages_Home_index_tsx-src_pages_WalletManagement_index_tsx-libs_shared_dist_components_Ico-f59bf9"],{"./src/pages/Home/index.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-router/dist/index.js"),r=s("../../libs/shared/dist/constants/routes.js"),o=s("../../libs/shared/dist/features/walletData/hooks/index.js"),l=s("../../libs/shared/dist/features/walletData/utils/errors.js"),d=s("../../libs/shared/dist/hooks/useLogout.js"),c=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),u=s("../../../node_modules/@mui/material/styles/styled.js"),h=s("../../libs/foundation-ui/dist/index.js"),m=s("../../libs/shared/dist/features/confirmDialog/context/index.js"),p=s("../../libs/shared/dist/utils/extension.js");const x=({onCancel:e})=>{const{t}=(0,c.$)(),s=(0,d.a)(),[i,r]=(0,n.useState)(!1);return(0,a.jsxs)(h.Drawer,{onOpenChange:e,open:!0,children:[(0,a.jsx)(h.DrawerTitle,{center:t("header_settings_logout")}),(0,a.jsxs)(h.InformationSection,{children:[(0,a.jsx)(h.Section,{children:(0,a.jsx)(h.Alert,{variant:"error",title:t("unlock_and_forgot_clear_warning_card_header"),message:t("settings_security_log_out_error")})}),(0,a.jsx)(h.Section,{children:(0,a.jsx)(h.Paragraph,{children:t("settings_security_log_out_notice")})}),(0,a.jsx)(h.Section,{children:(0,a.jsx)(h.Control,{id:"logout-check",label:t("settings_security_log_out_checkbox_label"),action:(0,a.jsx)(h.Checkbox,{checked:i,onChange:e=>r(!!e.target.checked)})})})]}),(0,a.jsx)(h.DrawerActions,{children:(0,a.jsxs)(h.ButtonGroup,{children:[(0,a.jsx)(h.Button,{variant:"secondary",onClick:e,children:t("action_cancel")}),(0,a.jsx)(h.Button,{variant:"destructive",onClick:async e=>{e.preventDefault(),i&&(await s(),p.p1?window.location.reload():window.location.href="/")},disabled:!i,children:t("action_logout")})]})})]})},j=(0,u.ZP)(h.Input)({"& input:-webkit-autofill":{transition:"background-color 9999s ease-in-out 0s, color 9999s ease-in-out 0s"},"& input:-webkit-autofill:hover":{transition:"background-color 9999s ease-in-out 0s, color 9999s ease-in-out 0s"},"& input:-webkit-autofill:focus":{transition:"background-color 9999s ease-in-out 0s, color 9999s ease-in-out 0s"},"& input:-webkit-autofill:active":{transition:"background-color 9999s ease-in-out 0s, color 9999s ease-in-out 0s"}}),b=({storedData:e})=>{const t=(0,d.a)(),{t:s}=(0,c.$)(),{confirm:i}=(0,m.O)(),[r,u]=(0,n.useState)(""),[p,b]=(0,n.useState)(null),[g,y]=(0,n.useState)(!1),{unlock:_}=(0,o.uA)(),f=(0,n.useCallback)((async s=>{s.preventDefault();try{await _(e,r)}catch(e){e instanceof l.e8?(await t(),location.reload()):b(e.message||"Unable to unlock wallet")}}),[_,e,r,t]),w=(0,n.useCallback)((e=>{u(e.currentTarget.value),b(null)}),[]),v=(0,n.useCallback)((async e=>{e.preventDefault(),await i({confirmButtonText:s("action_continue"),title:s("unlock_and_forgot_caution_forgot_password"),message:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Section,{children:(0,a.jsx)(h.Alert,{variant:"warning",title:s("unlock_and_forgot_caution_warning_card_header"),message:s("unlock_and_forgot_caution_warning_card_description")})}),(0,a.jsx)(h.Section,{children:(0,a.jsx)(h.Paragraph,{children:s("unlock_and_forgot_description")})})]})})&&y(!0)}),[i,s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Unlock,{children:(0,a.jsxs)(h.PageContent,{children:[(0,a.jsx)(h.LoginContent,{illustration:(0,a.jsx)(h.Illustration,{children:(0,a.jsx)(h.SolflareBadge,{})}),children:(0,a.jsxs)(h.LoginForm,{children:[(0,a.jsx)(h.LoginFormHeader,{children:s("unlock_and_forgot_enter_password")}),(0,a.jsx)(j,{name:"password",type:"password",placeholder:s("form_password"),value:r,onChange:w,variant:p?"error":"default",hint:p&&(0,a.jsx)(h.Label,{error:!0,children:p})}),(0,a.jsx)(h.Button,{onClick:f,children:s("action_unlock")})]})}),(0,a.jsx)(h.FooterActions,{variant:"fixed",children:(0,a.jsx)(h.ButtonLink,{onClick:v,children:s("unlock_and_forgot_forgot_password_question")})})]})}),g&&(0,a.jsx)(x,{onCancel:()=>y(!1)})]})},g=()=>{const e=(0,d.a)(),t=(0,i.s0)(),{auth:s}=(0,o.aC)(),[c,u]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(async()=>{try{await s()}catch(s){s instanceof l.JM?u(s.walledData):s instanceof l.Cx?t(r.Us.MAIN,{replace:!0}):s instanceof l.e8&&(await e(),location.reload())}})()}),[s,t]),c?(0,a.jsx)(b,{storedData:c}):null}},"./src/pages/WalletManagement/index.tsx":(e,t,s)=>{s.d(t,{Z:()=>k});var a=s("../../../node_modules/react/jsx-runtime.js"),n=(s("../../../node_modules/react/index.js"),s("../../../node_modules/react-router/dist/index.js")),i=s("../../libs/shared/dist/features/walletManagement/modals/index.js");const r=()=>(0,a.jsx)(i.yW,{}),o=()=>(0,a.jsx)(i.aP,{}),l=()=>(0,a.jsx)(i.o4,{}),d=()=>(0,a.jsx)(i.BI,{}),c=()=>(0,a.jsx)(i.$V,{}),u=()=>(0,a.jsx)(i.G1,{}),h=()=>(0,a.jsx)(i.tO,{}),m=()=>(0,a.jsx)(i.an,{}),p=()=>(0,a.jsx)(i.LT,{}),x=()=>(0,a.jsx)(i.pJ,{}),j=()=>(0,a.jsx)(i.I7,{}),b=()=>(0,n.V$)([{path:"",element:(0,a.jsx)(n.j3,{}),children:[{path:"",element:(0,a.jsx)(p,{})},{path:"mnemonic",element:(0,a.jsx)(n.j3,{}),children:[{path:"derive-next",element:(0,a.jsx)(r,{})},{path:"manage-accounts",element:(0,a.jsx)(x,{})}]},{path:"burner",element:(0,a.jsx)(n.j3,{}),children:[{path:"create",element:(0,a.jsx)(d,{})},{path:"create-tutorial",element:(0,a.jsx)(c,{})},{path:"restore",element:(0,a.jsx)(j,{})}]},{path:"import",element:(0,a.jsx)(n.j3,{}),children:[{path:"keystore",element:(0,a.jsx)(u,{})},{path:"private-key",element:(0,a.jsx)(h,{})},{path:"recovery-phrase",element:(0,a.jsx)(m,{})}]},{path:"connect",element:(0,a.jsx)(n.j3,{}),children:[{path:"keystone",element:(0,a.jsx)(o,{})},{path:"ledger",element:(0,a.jsx)(l,{})}]}]}]),g=e=>(0,a.jsx)(i.Q8,{...e}),y=()=>(0,a.jsx)(i.Dg,{}),_=()=>(0,a.jsx)(i.Nr,{}),f=()=>(0,a.jsx)(i._W,{}),w=()=>(0,a.jsx)(i.iD,{}),v=()=>(0,n.V$)([{path:":pubkey",element:(0,a.jsx)(n.j3,{}),children:[{index:!0,element:(0,a.jsx)(f,{})},{path:"export-private-key",element:(0,a.jsx)(y,{})},{path:"export-mnemonic",element:(0,a.jsx)(_,{})},{path:"rename",element:(0,a.jsx)(w,{})}]}]),k=e=>(0,n.V$)([{index:!0,element:(0,a.jsx)(g,{...e})},{path:"options/*",element:(0,a.jsx)(b,{})},{path:"single-wallet-options/*",element:(0,a.jsx)(v,{})}])},"../../libs/shared/dist/components/Icons/IconClip.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js")},"../../libs/shared/dist/components/Icons/IconKeystone.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js")},"../../libs/shared/dist/components/Icons/IconLedger.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js")},"../../libs/shared/dist/components/Icons/NoApp.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js")},"../../libs/shared/dist/components/Icons/NoStake.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js")},"../../libs/shared/dist/components/UnlockForm/index.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js");var a=s("../../../node_modules/@mui/material/TextField/TextField.js");(0,s("../../../node_modules/@mui/material/styles/styled.js").ZP)(a.Z)({"& input:-webkit-autofill":{transition:"background-color 9999s ease-in-out 0s, color 9999s ease-in-out 0s"},"& input:-webkit-autofill:hover":{transition:"background-color 9999s ease-in-out 0s, color 9999s ease-in-out 0s"},"& input:-webkit-autofill:focus":{transition:"background-color 9999s ease-in-out 0s, color 9999s ease-in-out 0s"},"& input:-webkit-autofill:active":{transition:"background-color 9999s ease-in-out 0s, color 9999s ease-in-out 0s"}})},"../../libs/shared/dist/components/WebSettingsEmptyState/index.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js")},"../../libs/shared/dist/constants/derivationPaths.js":(e,t,s)=>{s.d(t,{VV:()=>a,ff:()=>i,z$:()=>n});const a="bip44Change",n={bip44Root:"m/44'/501'",bip44:"m/44'/501'/0'",bip44Change:"m/44'/501'/0'/0'"},i={bip44Ledger:"m/44'/501'/0'/X'",bip44LedgerChange:"m/44'/501'/0'/0'/X'"}},"../../libs/shared/dist/decorators/index.js":(e,t,s)=>{s.d(t,{Nr:()=>a.N}),s("../../libs/shared/dist/decorators/withRPCProxy.js"),s("../../../node_modules/react/jsx-runtime.js"),s("../../libs/shared/dist/hooks/index.js");var a=s("../../libs/shared/dist/decorators/withOpenExplorer.js")},"../../libs/shared/dist/features/currencies/components/DisplayComputedFiatValue/index.js":(e,t,s)=>{s.d(t,{s:()=>o});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../libs/shared/dist/utils/displayPrice.js"),i=s("../../libs/shared/dist/features/currencies/hooks/index.js"),r=s("../../libs/shared/dist/features/currencies/utils/index.js");const o=({value:e,displayType:t="value",showSign:s,suffix:o,hidePreffix:l})=>{const d=(0,i.Af)(),c=(0,r.MK)(d.ticker,d.symbol);return(0,a.jsxs)(a.Fragment,{children:[s&&(+e<0?"-":"+"),(0,n.ED)({amount:s?Math.abs(+e):+e,prefix:l?"":c,displayType:t,suffix:o})]})}},"../../libs/shared/dist/features/dappCommunication/components/Readonly/index.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js")},"../../libs/shared/dist/features/localization/index.js":(e,t,s)=>{s.d(t,{D:()=>n.Z,M:()=>a.M});var a=s("../../libs/shared/dist/features/localization/constants/languages.js"),n=s("../../libs/shared/dist/features/localization/utils/changeLanguage.js")},"../../libs/shared/dist/features/notifications/utils/notificationReceipt.js":(e,t,s)=>{s("../../libs/shared/dist/api/index.js")},"../../libs/shared/dist/features/settings/contexts/BreadcrumbContext.js":(e,t,s)=>{(0,s("../../../node_modules/react/index.js").createContext)(null)},"../../libs/shared/dist/features/settings/hooks/useBreadcrumb/index.js":(e,t,s)=>{s("../../../node_modules/react/index.js"),s("../../libs/shared/dist/features/settings/contexts/index.js")},"../../libs/shared/dist/features/settings/providers/BreadcrumbProvider.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js"),s("../../../node_modules/react/index.js"),s("../../libs/shared/dist/features/settings/contexts/index.js")},"../../libs/shared/dist/features/shared/snackbar/index.js":(e,t,s)=>{s.d(t,{ns:()=>h,d4:()=>Z,Ds:()=>u});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/notistack/notistack.esm.js"),r=s("../../../node_modules/@mui/material/styles/styled.js"),o=s("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),l=s("../../libs/foundation-ui/dist/index.js");(0,r.ZP)(i.wT)((({theme:e})=>({"&.notistack-MuiContent":{color:e.palette.common.white,background:"rgba(0, 0, 0, 0.9)","& button":{color:e.palette.common.white},"@supports (backdrop-filter: blur(15px))":{backdropFilter:"blur(15px)",background:"linear-gradient(89.82deg, rgba(255, 255, 255, 0.3) -0.29%, rgba(255, 255, 255, 0) 67.5%)"}},"&.notistack-MuiContent-info":{color:e.palette.common.white,background:"rgba(45, 139, 250, 0.9)","@supports (backdrop-filter: blur(15px))":{backdropFilter:"blur(15px)",background:"linear-gradient(90deg, rgba(45, 139, 250, 0.3) -0.44%, rgba(45, 139, 250, 0) 73.67%)"}},"&.notistack-MuiContent-warning":{color:e.palette.common.white,background:"rgba(237, 191, 56, 0.9)","@supports (backdrop-filter: blur(15px))":{backdropFilter:"blur(15px)",background:"linear-gradient(90deg, rgba(237, 191, 56, 0.3) -0.44%, rgba(237, 191, 56, 0) 76.92%)"}},"&.notistack-MuiContent-error":{color:e.palette.common.white,background:"rgba(218, 73, 63, 0.9)","@supports (backdrop-filter: blur(15px))":{backdropFilter:"blur(15px)",background:"linear-gradient(90deg, rgba(218, 73, 63, 0.3) -0.44%, rgba(218, 73, 63, 0) 67.06%, rgba(218, 73, 63, 0) 67.07%)"}},"&.notistack-MuiContent-success":{color:e.palette.common.white,background:"rgba(26, 188, 156, 0.9)","@supports (backdrop-filter: blur(15px))":{backdropFilter:"blur(15px)",background:"linear-gradient(89.88deg, rgba(26, 188, 156, 0.3) -0.35%, rgba(26, 188, 156, 0) 67.37%)"}}}))),(0,o.Z)((e=>({containerZIndex:{zIndex:`${l.Z_INDEX_CONFIRMATION_SNACKBAR} !important`},containerMarginBottom:{marginBottom:60},containerMarginTop:{marginTop:9},snackbar:{borderRadius:10,margin:e.spacing(.75,0),pointerEvents:"all"},iconSuccess:{marginRight:8,fill:"white","@supports (backdrop-filter: blur(15px))":{fill:"#1ABC9C"}},iconWarning:{marginRight:8,fill:"white","@supports (backdrop-filter: blur(15px))":{fill:"#EDBF38"}},iconError:{marginRight:8,fill:"white","@supports (backdrop-filter: blur(15px))":{fill:"#DA493F"}},iconInfo:{marginRight:8,fill:"white","@supports (backdrop-filter: blur(15px))":{fill:"#2D8BFA"}}})));const d=(0,n.createContext)(null),c=(0,n.createContext)(null),u=()=>{const e=(0,n.useContext)(d);if(!e)throw new Error("useSnackbar must be used within a SnackbarProvider");return e},h=({children:e})=>{const[t,s]=(0,n.useState)(!1),[i,r]=(0,n.useState)(null),[o,l]=(0,n.useState)(!1),u=(0,n.useRef)(),h=(0,n.useCallback)((()=>{l(!1)}),[]),m=(0,n.useCallback)(((e,t={})=>{const{key:a,messageShort:n,...i}=t||{},o=a||(new Date).getTime()+Math.random();if(!0===t?.loading)return s(!0),r(null),l(!1),o;r(null),s(!1),clearTimeout(u.current);const d={...i,key:o,message:n??e,messageOriginal:e,open:!0,entered:!1,requestClose:!1,variant:i.variant??"info",autoHideDuration:i.autoHideDuration??5e4,onExited:i.onExited};return i.persist&&(d.autoHideDuration=void 0),r(d),l(!0),u.current=setTimeout((()=>l(!1)),d.autoHideDuration),o}),[]),p=(0,n.useMemo)((()=>({enqueueSnackbar:m,closeSnackbar:h})),[h,m]),x=(0,n.useMemo)((()=>({loading:t,notification:i,showNotification:o,setShowNotification:l,setNotification:r})),[t,i,o]);return(0,a.jsx)(d.Provider,{value:p,children:(0,a.jsx)(c.Provider,{value:x,children:e})})};var m=s("../../../node_modules/@mui/material/Box/Box.js"),p=s("../../../node_modules/@mui/material/LinearProgress/LinearProgress.js"),x=s("../../../node_modules/@mui/material/Zoom/Zoom.js"),j=s("../../../node_modules/@mui/material/Fade/Fade.js"),b=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),g=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),y=s("../../../node_modules/@mui/material/Typography/Typography.js"),_=s("../../../node_modules/@mui/material/Divider/Divider.js"),f=s("../../../node_modules/lodash/lodash.js"),w=s("../../libs/shared/dist/hooks/index.js"),v=s("../../libs/shared/dist/modals/index.js");const k=({onClose:e,notification:t})=>{const{t:s}=(0,b.$)(),{copy:i}=(0,w.c)(),r=t.messageOriginal,{icon:o,color:d}=(0,n.useMemo)((()=>{switch(t.variant){case"error":return{icon:g.YIN,color:"error"};case"warning":return{icon:g.AE2,color:"warning"};default:return{icon:g.AE2,color:"default"}}}),[t.variant]);return(0,a.jsx)(v.V,{title:(0,f.capitalize)(t.variant),onClose:e,footer:(0,a.jsx)(l.Button,{onClick:e,children:s("action_close")}),children:(0,a.jsx)(l.ConfirmTransaction,{avatar:(0,a.jsx)(l.IconAvatar,{background:d,size:"xl",icon:o}),transactionFromItem:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{component:"div",variant:"bodyS",sx:{wordBreak:"break-word",maxHeight:64,overflowX:"auto"},children:r}),(0,a.jsx)(_.Z,{sx:{mt:1.5,mb:1,borderColor:"semantic.borderSecondary"}}),(0,a.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,a.jsx)(l.Button,{size:"s",variant:"tertiary",left:(0,a.jsx)(l.Icon,{icon:g.kZ_,size:"s"}),onClick:()=>i(r),children:s("action_copy")}),(0,a.jsx)(l.Button,{size:"s",variant:"tertiary",left:(0,a.jsx)(l.Icon,{icon:g.gJF}),onClick:()=>window.open("https://academy.solflare.com/guides/?get_help=true","_blank"),children:"Contact support"})]})]})})})},A=(0,r.ZP)(m.Z)`
  position: fixed;
  top: 63px;
  width: 100%;
  z-index: 20000;
`,C=(0,r.ZP)(m.Z)`
  display: flex;
  justify-content: center;
  position: absolute;
  cursor: pointer;
  top: 50%;
  left: 50%;
  max-width: calc(100% - 32px);
  transform: translate(-50%, -50%);
  &:before {
    content: '';
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: -1;
    border-radius: 19px;
    background: #131519;
  }
`,S=(0,r.ZP)(m.Z)`
  border: 1px solid transparent;
  border-radius: 19px;
  padding: 2px 8px;
  white-space: nowrap;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: center;
`,P=(0,r.ZP)(p.Z)`
  background: rgba(245, 252, 255, 0.1);
  height: 1px;
  & .MuiLinearProgress-bar {
    background: linear-gradient(90deg, #3dd28b 0%, rgba(61, 210, 139, 0) 88.53%);
  }
`,I={success:"success.main",error:"error.main",info:"info.main",warning:"warning.main"},D={success:"black",error:"black",info:"black",warning:"blackd"},Z=()=>{const[e,t]=(0,n.useState)(null),{loading:s,notification:i,showNotification:r,setShowNotification:o,setNotification:d}=(()=>{const e=(0,n.useContext)(c);if(!e)throw new Error("useSnackbarNotifier must be used within a SnackbarProvider");return e})();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(A,{children:[s&&(0,a.jsx)(P,{}),(0,a.jsx)(x.Z,{in:r,timeout:500,children:(0,a.jsx)(m.Z,{children:(0,a.jsx)(p.Z,{variant:"determinate",value:100,sx:{height:"1px",backgroundColor:I[i?.variant]??"transparent",variant:i?.variant,"& .MuiLinearProgress-bar":{backgroundColor:I[i?.variant]??"transparent"}}})})}),(0,a.jsx)(j.Z,{in:r,timeout:500,mountOnEnter:!0,unmountOnExit:!0,children:(0,a.jsx)(m.Z,{children:i?.message&&(0,a.jsx)(C,{onClick:()=>{i?.onClick?i.onClick():(o(!1),d(null),t(i))},children:(0,a.jsx)(S,{sx:{borderColor:I[i?.variant],backgroundColor:D[i?.variant]},children:(0,a.jsx)(l.Typography,{variant:"headingXS",children:i?.message})})})})})]}),!!e&&(0,a.jsx)(k,{notification:e,onClose:()=>t(null)})]})}},"../../libs/shared/dist/features/walletManagement/errors.js":(e,t,s)=>{s.d(t,{y:()=>a});class a extends Error{constructor(){super(...arguments),this.name="WalletAlreadyAddedError"}}},"../../libs/shared/dist/features/walletManagement/hooks/useBalances.js":(e,t,s)=>{s.d(t,{l:()=>b});var a=s("../../../node_modules/react/index.js"),n=s("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),i=s("../../../node_modules/lodash/lodash.js"),r=s("../../libs/wallet-core/dist/shared.js"),o=s("../../libs/shared/dist/utils/common.js"),l=s("../../libs/shared/dist/utils/displayPrice.js"),d=s("../../libs/shared/dist/utils/truncateMiddle.js"),c=s("../../libs/shared/dist/features/currencies/hooks/index.js"),u=s("../../libs/shared/dist/features/currencies/utils/index.js"),h=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),m=s("../../libs/shared/dist/features/walletData/hooks/index.js"),p=s("../../libs/shared/dist/features/walletManagement/api/index.js"),x=s("../../libs/shared/dist/features/walletManagement/utils/index.js");const j={[r.R7]:"header_account_recovery_phrase",[r.CO]:"header_account_burners",[r.Yg]:"Metamask",[r.pe]:"header_account_ledger",[r.x4]:"header_account_keystone",[r.vn]:"header_account_imported",[r.dr]:"header_account_read_only"},b=e=>{const t=(0,h.LN)(),{publicKey:s}=(0,m.rT)(),b=(0,m.Rg)(),g=(0,c.Af)(),y=e||(0,x.Sm)(b.wallets),_=(0,n.a)({queryKey:["balances",y,g,t.cluster],queryFn:()=>(0,p.ld)({pubkeys:y,currency:g.ticker,general:!0,network:t.cluster}),refetchOnWindowFocus:!1,retry:3,refetchInterval:3e4}),f=(0,a.useMemo)((()=>(0,i.keyBy)(_.failureCount>0?_.failureReason?.partialData?.data:_.data?.data,"publicKey")),[_]);return{result:(0,a.useMemo)((()=>(0,x.fJ)(b.accounts.map((e=>({...b.wallets[e.publicKey],name:e.name})))).reduce(((e,t)=>(e[t.type]?.push({title:t.name,subtitle:(0,d.r)(t.publicKey),address:t.publicKey,value:(0,o.T4)(f[t.publicKey]?.value)?(0,l.ED)({amount:f[t.publicKey]?.value,displayType:"amount",prefix:(0,u.MK)(g.ticker,g.symbol)}):""}),e)),{[r.R7]:[],[r.CO]:[],[r.pe]:[],[r.x4]:[],[r.Yg]:[],[r.vn]:[],[r.dr]:[]})),[g.symbol,g.ticker,f,b.accounts,b.wallets]),query:_,currency:g,valueMap:f,lookupSectionName:j,netWorth:(0,l.ED)({amount:_.data?.netWorth,displayType:"amount",prefix:(0,u.MK)(g.ticker,g.symbol)}),selectedAddress:s,netWorthChange:(0,l.ED)({amount:_.data?.netWorthChange&&100*_.data?.netWorthChange,displayType:"value",prefix:_.data?.netWorthChange&&_.data?.netWorthChange>0?"+":"",suffix:"%"})}}},"../../libs/shared/dist/features/walletManagement/hooks/useBurnerWallet/index.js":(e,t,s)=>{s.d(t,{Z:()=>l});var a=s("../../../node_modules/react/index.js"),n=s("../../libs/wallet-core/dist/burner.js"),i=s("../../libs/shared/dist/storage/solflareService.js"),r=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),o=s("../../libs/shared/dist/features/walletManagement/api/index.js");const l=()=>{const e=(0,r.LN)(),[t,s]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{const e=await i.Z.burnerTutorial.get();s(e)})()}),[]);const l=(0,a.useCallback)((async(t,s,a=0)=>{const i=new n.eV;i.init(s,a);const r=i.publicKey.toString();return t[r]||await(0,o.i9)({pubkey:r,network:e.cluster})?l(t,s,a+1):a}),[e.cluster]);return{hasBurnerWallets:t,findNextBurnerIndex:l}}},"../../libs/shared/dist/features/walletManagement/hooks/useKeystore.js":(e,t,s)=>{s.d(t,{Z:()=>i});var a=s("../../../node_modules/react/index.js"),n=s("../../libs/wallet-core/dist/privateKey.js");const i=()=>({importKeystore:(0,a.useCallback)(((e,t)=>{let s;try{s=JSON.parse(e);const t=s?.Crypto?.kdfparams;if(!(t.salt&&t.c&&t.dklen&&t.prf))return null}catch(e){return null}return n.aV.fromKeystoreJson(s,t)}),[])})},"../../libs/shared/dist/features/walletManagement/hooks/useManageMetamaskAccounts.js":(e,t,s)=>{s.d(t,{Z:()=>m});var a=s("../../../node_modules/react/index.js"),n=s("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),i=s("../../../node_modules/lodash/lodash.js"),r=s("../../libs/wallet-core/dist/metamask.js"),o=s("../../libs/wallet-core/dist/shared.js"),l=s("../../libs/shared/dist/features/currencies/hooks/index.js"),d=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),c=s("../../libs/shared/dist/features/walletData/hooks/index.js"),u=s("../../libs/shared/dist/features/walletManagement/api/index.js"),h=s("../../libs/shared/dist/features/walletManagement/utils/index.js");const m=()=>{const e=(0,l.Af)(),t=(0,d.LN)(),{accounts:s,wallets:m}=(0,c.Rg)(),[p,x]=(0,a.useState)([]),[j,b]=(0,a.useState)({}),g=(0,a.useMemo)((()=>s.filter((e=>m[e.publicKey].type===o.Yg)).map((e=>e.publicKey))),[s,m]),y=(0,a.useCallback)((e=>(async()=>{await r.c.connect();const t=await r.c.getPublicKey(o.PT.bip44Change,e);return new n.PublicKey(t)})()),[]),_=(0,a.useCallback)((async s=>{let a;try{a=await(0,u.ld)({pubkeys:s.map((e=>(0,h.z_)(e,o.oH[o.Yg]))),network:t.cluster,currency:e.ticker,general:!1})}catch(e){e.partialData&&(a=e.partialData)}b((e=>({...e,...(0,i.reduce)(a?.data,((e,t)=>({...e,[t.publicKey]:t.value})),{})})))}),[e.ticker,t.cluster]),f=(0,a.useCallback)((async e=>{const t=[];for(let s=0;s<10;s++){const a=await y(e+s+1);t.push(a.toString())}x((e=>(0,i.uniq)([...e,...t]))),_(t)}),[y,_]);return{addresses:p,accounts:g,balances:j,loadMoreAccounts:f,deriveAccount:y}}},"../../libs/shared/dist/features/walletManagement/hooks/useManageRecoveryPhraseAccounts.js":(e,t,s)=>{s.d(t,{Z:()=>p});var a=s("../../../node_modules/react/index.js"),n=s("../../../node_modules/lodash/lodash.js"),i=s("../../libs/wallet-core/dist/mnemonic.js"),r=s("../../libs/wallet-core/dist/shared.js"),o=s("../../libs/shared/dist/features/currencies/hooks/index.js"),l=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),d=s("../../libs/shared/dist/features/walletData/hooks/index.js"),c=s("../../libs/shared/dist/features/walletData/utils/types.js"),u=s("../../libs/shared/dist/features/walletManagement/api/index.js"),h=s("../../libs/shared/dist/features/walletManagement/utils/index.js"),m=s("../../libs/shared/dist/features/walletManagement/hooks/useMnemonicWallet/index.js");const p=()=>{const e=(0,m.Z)(),t=e?.publicKey||"",s=(0,o.Af)(),p=(0,l.LN)(),{accounts:x,wallets:j}=(0,d.Rg)(),[b,g]=(0,a.useState)([]),[y,_]=(0,a.useState)({}),f=(0,a.useMemo)((()=>x.filter((e=>{const s=j[e.publicKey];return(0,c.sH)(s)&&s.parent===t})).map((e=>e.publicKey))),[t,x,j]),w=(0,a.useCallback)((t=>{if(!e||!e.data)throw new Error("Mnemonic not found");return(0,i.c3)(e.data.seed,t,e.data.derivationPath).publicKey}),[e]),v=(0,a.useCallback)((async e=>{let t;try{t=await(0,u.ld)({pubkeys:e.map((e=>(0,h.z_)(e,r.oH[r.R7]))),network:p.cluster,currency:s.ticker,general:!1})}catch(e){e.partialData&&(t=e.partialData)}_((e=>({...e,...(0,n.reduce)(t?.data,((e,t)=>({...e,[t.publicKey]:t.value})),{})})))}),[s.ticker,p.cluster]);return{addresses:b,accounts:f,balances:y,loadMoreAccounts:(0,a.useCallback)((e=>{const t=new Array(10).fill({}).map(((t,s)=>w(e+s+1).toString()));g((e=>(0,n.uniq)([...e,...t]))),v(t)}),[w,v]),deriveAccount:w}}},"../../libs/shared/dist/features/walletManagement/hooks/useMnemonicWallet/index.js":(e,t,s)=>{s.d(t,{Z:()=>r});var a=s("../../../node_modules/react/index.js"),n=s("../../libs/shared/dist/features/walletData/hooks/index.js"),i=s("../../libs/shared/dist/features/walletData/utils/types.js");const r=()=>{const{accounts:e,wallets:t}=(0,n.Rg)();return(0,a.useMemo)((()=>{const s=e.find((e=>(0,i.FS)(t[e.publicKey])));if(s)return t[s.publicKey]}),[e,t])}},"../../libs/shared/dist/features/walletManagement/hooks/usePrivateKey/index.js":(e,t,s)=>{s.d(t,{Z:()=>i});var a=s("../../../node_modules/react/index.js"),n=s("../../libs/wallet-core/dist/privateKey.js");const i=()=>({importPrivateKey:(0,a.useCallback)((e=>{const t=n.aV.fromString(e),s=(new TextEncoder).encode("Test message to verify"),a=t.signMessage(s);return t.verifySignature(s,a)?t:null}),[])})},"../../libs/shared/dist/features/walletManagement/hooks/useWalletActions/index.js":(e,t,s)=>{s.d(t,{Z:()=>d});var a=s("../../../node_modules/react/index.js"),n=s("../../../node_modules/lodash/lodash.js"),i=s("../../libs/wallet-core/dist/shared.js"),r=s("../../libs/shared/dist/storage/solflareService.js"),o=s("../../libs/shared/dist/features/walletData/hooks/index.js"),l=s("../../libs/shared/dist/features/walletManagement/errors.js");const d=()=>{const{persistWalletData:e,addAccount:t,deleteAccount:s,selectAccountByIndex:d}=(0,o.bg)(),c=(0,o.AH)(),u=(0,a.useCallback)((async(e,s,{persistChange:a=!0,skipDuplicate:n=!0,throwOnDuplicate:i=!1}={})=>{const{accounts:r}=c();if(n&&r.some((e=>e.publicKey===s.publicKey))){if(i)throw new l.y}else await t(s,e,a)}),[t,c]),h=(0,a.useCallback)((async(t,{persistChange:a=!0,removeAppsData:o=!0}={})=>{const{accounts:l,wallets:u,selectedAccount:h}=c(),m=l[h]?.publicKey;let p=[t];if(u[t]&&u[t].type===i.R7&&!u[t].parent){const e=l.filter((({publicKey:e})=>u[e].parent===t)).map((({publicKey:e})=>e));e.length&&(p=[...p,...e])}if(p.includes(m)){const e=(0,n.findIndex)(l,(({publicKey:e})=>!p.includes(e)));await d(e,!1)}for(const e of p)await s(e,!1);if(o){const e=await r.Z.solflaretrustedappsperwallet.get();for(const t of p)e[t]&&delete e[t];await r.Z.solflaretrustedappsperwallet.set(e)}a&&await e()}),[s,c,e,d]),m=(0,a.useCallback)((async(t,{persistChanges:s=!0}={})=>{const{wallets:a}=c();for(const e in t){const s=t[e];s.wallet.publicKey&&!a[s.wallet.publicKey]&&await u(s.name,s.wallet,{persistChange:!1})}s&&await e()}),[c,u,e]),p=(0,a.useCallback)((async(t,{persistChange:s=!0,removeAppsData:a=!0}={})=>{const{wallets:n}=c();for(const e of t)n[e]&&await h(e,{persistChange:!1,removeAppsData:!1});if(a){const e=await r.Z.solflaretrustedappsperwallet.get();for(const s in t)e[s]&&delete e[s];await r.Z.solflaretrustedappsperwallet.set(e)}s&&await e()}),[c,e,h]);return{addWallet:u,removeWallet:h,addMultipleWallets:m,removeMultipleWallets:p}}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/AddWallet/index.js":(e,t,s)=>{s.d(t,{y:()=>x});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=s("../../../node_modules/react-router/dist/index.js"),o=s("../../libs/wallet-core/dist/shared.js"),l=s("../../libs/foundation-ui/dist/index.js"),d=s("../../libs/shared/dist/constants/index.js"),c=s("../../libs/shared/dist/constants/routes.js"),u=s("../../libs/shared/dist/features/walletManagement/hooks/index.js"),h=s("../../libs/wallet-core/dist/mnemonic.js"),m=s("../../libs/shared/dist/features/walletData/hooks/index.js");var p=s("../../libs/shared/dist/features/walletManagement/modals/WalletManagementContainer/index.js");const x=()=>{const{t:e}=(0,i.$)(),t=(0,r.s0)(),[s,x]=(0,n.useState)(""),j=(0,u.EU)(),{deriveNewSeedAccount:b}=(()=>{const{wallets:e,accounts:t}=(0,m.Rg)(),s=(0,n.useCallback)((async s=>{const a=e[s];if(!a||a.type!==o.R7)throw new Error(`Wallet with given address ${s} not found or is not a mnemonic type.`);return((e,t,s)=>{const a=t[s],n=e.filter((e=>t[e.publicKey]?.parent===s)).map((e=>t[e.publicKey]?.accountIndex)),i=new Set(n),r=new Set(e.map((e=>e.publicKey)));let o=Math.max(0,...n);for(;;){if(o++,i.has(o))continue;const e=(0,h.c3)(a.data.seed,o,a.data.derivationPath);if(!r.has(e.publicKey.toString()))return{keypair:e,accountIndex:o}}})(t,e,s)}),[e,t]);return{deriveNewSeedAccount:s}})(),{addWallet:g}=(0,u.Z)(),y=s.trim().length>0;return j&&j.data?.derivationPath!==o.PT.bip44Root?(0,a.jsx)(p.k,{onClose:()=>t(c.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),title:e("header_wallet_management_add_wallet"),footer:(0,a.jsx)(l.ButtonGroup,{children:(0,a.jsx)(l.Button,{onClick:async e=>{if(e.preventDefault(),!y||!j)return;const{keypair:a,accountIndex:n}=await b(j.publicKey);await g(s.trim(),{type:o.R7,publicKey:a.publicKey.toString(),accountIndex:n,parent:j.publicKey},{persistChange:!0}),t(c.yD.MAIN,{replace:!0})},disabled:!y,children:e("action_add")})}),children:(0,a.jsx)(l.TextField,{label:(0,a.jsx)(l.Label,{children:e("form_name")}),placeholder:e("form_wallet_name_placeholder"),value:s,onChange:e=>{x(e.currentTarget.value.substring(0,d.go))}})}):(0,a.jsx)(r.Fg,{to:c.yD.ADD_WALLET_OPTIONS.MAIN,replace:!0})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ConnectKeystone/index.js":(e,t,s)=>{s.d(t,{a:()=>z});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-router/dist/index.js"),r=s("../../libs/wallet-core/dist/keystone.js"),o=s("../../libs/rise-ui/dist/index.js"),l=s("../../libs/shared/dist/constants/routes.js"),d=s("../../libs/shared/dist/features/walletManagement/hooks/index.js"),c=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),u=s("../../../node_modules/@mui/icons-material/esm/AccountBalanceWallet.js"),h=s("../../../node_modules/@mui/icons-material/esm/Link.js"),m=s("../../../node_modules/@mui/material/Box/Box.js"),p=s("../../../node_modules/@mui/material/CircularProgress/CircularProgress.js"),x=s("../../../node_modules/@mui/material/Typography/Typography.js"),j=s("../../../node_modules/@mui/material/Button/Button.js"),b=s("../../../node_modules/@mui/material/List/List.js"),g=s("../../../node_modules/@mui/material/Divider/Divider.js"),y=s("../../../node_modules/@mui/material/ListItem/ListItem.js"),_=s("../../../node_modules/@mui/material/ListItemText/ListItemText.js"),f=s("../../../node_modules/@mui/material/ListItemSecondaryAction/ListItemSecondaryAction.js"),w=s("../../../node_modules/@mui/material/Checkbox/Checkbox.js"),v=s("../../../node_modules/lodash/lodash.js"),k=s("../../libs/wallet-core/dist/shared.js"),A=s("../../libs/shared/dist/hooks/index.js"),C=s("../../libs/shared/dist/utils/displayPrice.js"),S=s("../../libs/shared/dist/utils/truncateMiddle.js"),P=s("../../libs/shared/dist/features/currencies/hooks/index.js"),I=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),D=s("../../libs/shared/dist/features/walletManagement/api/index.js"),Z=s("../../libs/shared/dist/features/walletManagement/utils/index.js");const T=({accounts:e,onImport:t,onCancel:s})=>{const{t:i}=(0,c.$)(),r=(0,I.LN)(),o=(0,P.Af)(),{openExplorer:l}=(0,A.Vf)(),[d,T]=(0,n.useState)({}),[M,O]=(0,n.useState)(Object.keys(d)),[E,L]=(0,n.useState)([]),[R,B]=(0,n.useState)(!0),W=(0,n.useCallback)((async(e,t=3)=>{const s=async(a=0)=>{try{const{data:t}=await(0,D.ld)({pubkeys:e.map((e=>(0,Z.z_)(e.publicKey,k.oH[k.x4]))),network:r.cluster,currency:o.ticker,general:!1});return t}catch(e){if(a>t){if(e.partialData)return e.partialData;throw e}return s(a+1)}};return await s(0)}),[o.ticker,r.cluster]);(0,n.useEffect)((()=>{B(!0),W(e).then((e=>{const t=(0,v.keyBy)(e,"publicKey");T(t),O(Object.keys(t)),L(Object.keys(t))})).finally((()=>B(!1)))}),[e,W]);const N=e=>{const{name:t,checked:s}=e.target;L(s?e=>[...e,t]:e=>e.filter((e=>e!==t)))};return R?(0,a.jsxs)(m.Z,{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",children:[(0,a.jsxs)(m.Z,{mb:4,bgcolor:"primary.light",width:180,height:180,display:"inline-flex",justifyContent:"center",alignItems:"center",position:"relative",borderRadius:"50%",children:[(0,a.jsx)(u.Z,{color:"primary",style:{fontSize:50}}),(0,a.jsx)(p.Z,{sx:{position:"absolute"},size:180,thickness:1})]}),(0,a.jsx)(m.Z,{maxWidth:350,children:(0,a.jsx)(x.Z,{variant:"body1",gutterBottom:!0,children:i("onboard_detecting_existing_accounts")})})]}):(0,a.jsx)(m.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,a.jsxs)(m.Z,{maxWidth:400,textAlign:"center",children:[(0,a.jsx)(x.Z,{variant:"h2",gutterBottom:!0,children:i("onboard_active_wallet",{count:Object.keys(d)?.length||0})}),(0,a.jsx)(x.Z,{variant:"body2",color:"textSecondary",children:i("onboard_active_description")}),(0,a.jsx)(m.Z,{mt:2,textAlign:"right",children:(0,a.jsx)(j.Z,{variant:"text",color:"primary",onClick:()=>{(0,v.isEqual)(E,M)?L([]):L(M)},children:"Toggle all"})}),(0,a.jsxs)(b.Z,{sx:{height:400,overflow:"auto",padding:0},children:[(0,a.jsx)(g.Z,{light:!0}),e.map((({publicKey:e})=>(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)(y.ZP,{children:[(0,a.jsx)(_.Z,{primary:(0,a.jsxs)(m.Z,{display:"flex",alignItems:"center",mb:1,children:[(0,a.jsx)(x.Z,{variant:"caption",children:(0,S.r)(e)}),(0,a.jsx)(h.Z,{sx:{width:20,height:20,marginLeft:8,cursor:"pointer",color:"text.secondary"},onClick:()=>l({type:"account",address:e})})]}),secondary:(0,a.jsx)(x.Z,{variant:"body2",color:"textSecondary",children:(0,C.ED)({amount:d[e]?.value,displayType:"amount",prefix:o.symbol})})}),(0,a.jsx)(f.Z,{children:(0,a.jsx)(w.Z,{color:"primary",edge:"end",onChange:N,name:e,checked:-1!==E.indexOf(e)})})]}),(0,a.jsx)(g.Z,{light:!0})]},`address-${e}`)))]}),(0,a.jsxs)(m.Z,{display:"flex",justifyContent:"space-between",mt:4,mb:2,children:[(0,a.jsx)(j.Z,{variant:"text",color:"primary",onClick:s,children:i("action_back")}),(0,a.jsx)(j.Z,{disabled:R||0===E.length,type:"submit",variant:"contained",color:"primary",onClick:async s=>{s.preventDefault(),t({forImport:e.filter((({publicKey:e})=>E.includes(e)))})},children:i("action_continue")})]}),(0,a.jsx)(x.Z,{variant:"body2",children:i("onboard_you_can_import_later")})]})})};var M=s("../../../node_modules/@keystonehq/animated-qr/dist/index.js"),O=s("../../../node_modules/@keystonehq/bc-ur-registry-sol/dist/index.js"),E=s("../../../node_modules/@keystonehq/sol-keyring/dist/index.js"),L=s("../../../node_modules/@mui/material/styles/styled.js"),R=s("../../../node_modules/@mui/material/Link/Link.js"),B=s("../../libs/shared/dist/components/index.js"),W=s("../../../node_modules/buffer/index.js").Buffer;const N=(0,L.ZP)(m.Z)((({theme:e})=>({display:"flex",justifyContent:"center",marginTop:16,padding:24,border:`1px solid ${e.palette.common.white10}`,backgroundColor:e.palette.common.black20,borderRadius:8})));var K;!function(e){e.Ready="READY",e.PermissionNeeded="PERMISSION_NEEDED"}(K||(K={}));const F=({onAccountsReceived:e,onCancel:t})=>{const{t:s}=(0,c.$)(),[i,r]=(0,n.useState)(K.Ready),[o,l]=(0,n.useState)(""),d=(0,n.useCallback)((async t=>{const s=new E.BaseKeyring,a=O.CryptoMultiAccounts.fromCBOR(W.from(t.cbor,"hex"));s.syncKeyring(a);const n=s.getAccounts().map((e=>({publicKey:e.pubKey,index:e.index,path:e.hdPath,xfp:a.getMasterFingerprint().toString("hex")})));await e({accounts:n})}),[e]),u=(0,n.useCallback)((e=>{e!==M.QRCodeError.UNEXPECTED_QRCODE&&e!==M.QRCodeError.INVALID_QR_CODE||l("Please check your QR code")}),[]),h=(0,n.useCallback)((e=>{r(e?K.Ready:K.PermissionNeeded)}),[]);return(0,a.jsxs)(m.Z,{maxWidth:420,margin:"auto",children:[(0,a.jsxs)(m.Z,{display:i===K.PermissionNeeded?"block":"none",children:[(0,a.jsx)(x.Z,{variant:"h3",children:s("onboard_keystone_title_1")}),(0,a.jsx)(x.Z,{variant:"body2",color:"textSecondary",children:s("onboard_keystone_description_1")}),(0,a.jsx)(N,{height:420,children:(0,a.jsxs)(m.Z,{width:200,display:"flex",flexDirection:"column",justifyContent:"center",children:[(0,a.jsx)(B.D2,{sx:{width:196,height:157,marginBottom:10}}),(0,a.jsxs)(x.Z,{variant:"body2",color:"textSecondary",children:[s("onboard_keystone_description_2")," ",(0,a.jsx)(R.Z,{variant:"body2",underline:"always",href:"https://keyst.one/solflare",target:"_blank",color:"textPrimary",children:s("onboard_full_tutorial")})]})]})})]}),(0,a.jsxs)(m.Z,{display:i===K.Ready?"block":"none",children:[(0,a.jsx)(x.Z,{variant:"h3",gutterBottom:!0,children:s("onboard_keystone_title_2")}),(0,a.jsx)(x.Z,{variant:"body2",color:"textSecondary",children:s("onboard_keystone_description_3")}),(0,a.jsx)(N,{height:420,children:(0,a.jsxs)(m.Z,{sx:{position:"relative","& div, video":{height:370,objectFit:"cover",borderRadius:10}},children:[(0,a.jsx)(M.AnimatedQRScanner,{purpose:M.Purpose.SOL_SYNC,handleScan:d,handleError:u,videoLoaded:h,options:{width:370}}),o&&(0,a.jsx)(x.Z,{variant:"body2",sx:{position:"absolute",bottom:8,width:"100%",textAlign:"center"},children:o})]})})]}),t&&(0,a.jsx)(m.Z,{display:"flex",justifyContent:"center",mt:4,children:(0,a.jsx)(j.Z,{variant:"text",color:"primary",onClick:t,children:s("action_back")})})]})};var $,q=s("../../../node_modules/console-browserify/index.js");!function(e){e[e.Scan=0]="Scan",e[e.Accounts=1]="Accounts"}($||($={}));const z=()=>{const{search:e}=(0,i.TH)(),t=(0,i.s0)(),{addMultipleWallets:s}=(0,d.Z)(),[c,u]=(0,n.useState)($.Scan),h=(0,n.useMemo)((()=>new URLSearchParams(e)),[e]),[m,p]=(0,n.useState)([]),x=(0,n.useCallback)((async({forImport:e})=>{if(0===e.length)return void q.error("Accounts cannot be empty");const a=e.map((e=>{const t=new r.J;return t.init(e),{name:e.index?`Keystone ${e.index}`:"Main Keystone",wallet:t.toObject()}}));await s(a),"ext"!==h.get("redirect")?t(l.yD.MAIN,{replace:!0}):setTimeout(window.close,500)}),[s,t,h]),j=(0,n.useCallback)((async({accounts:e})=>{p(e),u($.Accounts)}),[]);return(0,a.jsxs)(o.u_,{open:!0,onClose:()=>t(l.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),maxWidth:"sm",children:[c===$.Scan&&(0,a.jsx)(F,{onAccountsReceived:j}),c===$.Accounts&&(0,a.jsx)(T,{accounts:m,onImport:x,onCancel:()=>u($.Scan)})]})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ConnectLedger/index.js":(e,t,s)=>{s.d(t,{o:()=>N});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-router/dist/index.js"),r=s("../../libs/wallet-core/dist/ledger.js"),o=s("../../libs/rise-ui/dist/index.js"),l=s("../../libs/shared/dist/constants/routes.js"),d=s("../../libs/shared/dist/features/walletManagement/hooks/index.js"),c=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),u=s("../../../node_modules/react-virtuoso/dist/index.m.js"),h=s("../../../node_modules/@mui/icons-material/esm/Link.js"),m=s("../../../node_modules/@mui/material/Box/Box.js"),p=s("../../../node_modules/@mui/material/Typography/Typography.js"),x=s("../../../node_modules/@mui/material/Button/Button.js"),j=s("../../../node_modules/@mui/material/List/List.js"),b=s("../../../node_modules/@mui/material/Divider/Divider.js"),g=s("../../../node_modules/@mui/material/ListItem/ListItem.js"),y=s("../../../node_modules/@mui/material/ListItemText/ListItemText.js"),_=s("../../../node_modules/@mui/material/ListItemSecondaryAction/ListItemSecondaryAction.js"),f=s("../../../node_modules/@mui/material/Checkbox/Checkbox.js"),w=s("../../../node_modules/lodash/lodash.js"),v=s("../../libs/shared/dist/components/index.js"),k=s("../../libs/shared/dist/hooks/index.js"),A=s("../../libs/shared/dist/utils/displayPrice.js"),C=s("../../libs/shared/dist/utils/truncateMiddle.js"),S=s("../../libs/shared/dist/features/currencies/hooks/index.js"),P=s("../../libs/shared/dist/features/currencies/utils/index.js"),I=s("../../../node_modules/console-browserify/index.js");const D=({derivationPath:e,allAccounts:t=[],activeAccounts:s=[],onImport:i,onCancel:r,setActiveAccounts:o,setAccounts:l,manage:D})=>{const{t:Z}=(0,c.$)(),{openExplorer:T}=(0,k.Vf)(),M=(0,S.Af)(),{fetchAddresses:O}=(0,d.c5)(),E=(0,n.useMemo)((()=>(0,w.keyBy)(s,"publicKey")),[s]),[L,R]=(0,n.useState)(Object.keys(E)),B=e=>{const{name:t,checked:s}=e.currentTarget;R(s?e=>(0,w.union)(e,[t]):e=>e.filter((e=>e!==t)))};return(0,a.jsx)(m.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,a.jsxs)(m.Z,{maxWidth:400,textAlign:"center",children:[(0,a.jsx)(p.Z,{variant:"h2",gutterBottom:!0,children:Z("onboard_active_wallet",{count:s.length||0})}),(0,a.jsx)(p.Z,{variant:"body2",color:"textSecondary",children:Z("onboard_active_description")}),(0,a.jsx)(m.Z,{mt:2,textAlign:"right",children:(0,a.jsx)(x.Z,{variant:"text",color:"primary",onClick:()=>{const e=s.map((e=>e.pubkey));(0,w.isEqual)(L,e??[])?R([]):R(e??[])},children:"Toggle all"})}),(0,a.jsxs)(j.Z,{sx:{height:400,padding:0},children:[(0,a.jsx)(b.Z,{light:!0}),(0,a.jsx)(u.OO,{data:t||[],endReached:async()=>{if(1!==t.length)try{const{accounts:s,balances:a}=await O(e,t.length,t.length+10);o(a),l(s);const n=a.map((e=>e.publicKey));R((e=>[...e,...n]))}catch(e){I.log(e)}},overscan:80,components:{Footer:1===t.length?void 0:v.b2},itemContent:(e,{publicKey:t})=>(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)(g.ZP,{children:[(0,a.jsx)(y.Z,{primary:(0,a.jsxs)(m.Z,{display:"flex",alignItems:"center",mb:1,children:[(0,a.jsx)(p.Z,{variant:"caption",children:(0,C.r)(t)}),(0,a.jsx)(h.Z,{sx:e=>({width:20,height:20,marginLeft:8,cursor:"pointer",color:e.palette.text.secondary}),onClick:()=>T({type:"account",address:t})})]}),secondary:(0,a.jsx)(p.Z,{variant:"body2",color:"textSecondary",children:(0,A.ED)({amount:E[t]?.value||0,prefix:(0,P.MK)(M.ticker,M.symbol),displayType:"amount"})})}),(0,a.jsx)(_.Z,{children:(0,a.jsx)(f.Z,{color:"primary",edge:"end",onChange:B,name:t,checked:-1!==L.indexOf(t)})})]}),(0,a.jsx)(b.Z,{light:!0})]},`address-${t}`)})]}),(0,a.jsxs)(m.Z,{display:"flex",justifyContent:"space-between",mt:4,mb:2,children:[(0,a.jsx)(x.Z,{variant:"text",color:"primary",onClick:r,children:Z("action_back")}),(0,a.jsx)(x.Z,{disabled:0===L.length,type:"submit",variant:"contained",color:"primary",onClick:()=>{const e=(0,w.keyBy)(t,"publicKey"),s=L.map((t=>({address:t,index:e[t]?.index}))).filter((({index:e})=>"number"==typeof e));i(s)},children:Z(D?"action_import":"action_continue")})]}),(0,a.jsx)(p.Z,{variant:"body2",children:Z("onboard_you_can_import_later")})]})})};var Z=s("../../../node_modules/console-browserify/index.js");const T=({derivationPath:e,onConnect:t,onCancel:s})=>{const{t:n}=(0,c.$)(),{closableNotification:i}=(0,k.hn)();return(0,a.jsxs)(m.Z,{maxWidth:360,margin:"auto",textAlign:"center",children:[(0,a.jsx)(p.Z,{variant:"h2",gutterBottom:!0,children:n("onboard_connect_ledger")}),(0,a.jsx)(p.Z,{variant:"body2",color:"textSecondary",children:n("onboard_ledger_continue_when_ready")}),(0,a.jsxs)(m.Z,{display:"flex",justifyContent:s?"space-between":"center",mt:4,children:[s&&(0,a.jsx)(x.Z,{variant:"text",color:"primary",onClick:s,children:n("action_back")}),(0,a.jsx)(x.Z,{variant:"contained",color:"primary",onClick:async()=>{try{await r.uN.getDevicePublicKey(e,0),t()}catch(e){Z.log(e),i({message:n("error_ledger_failed_to_connect"),variant:"error"})}},children:n("action_continue")})]})]})};var M=s("../../../node_modules/@mui/icons-material/esm/AccountBalanceWallet.js"),O=s("../../../node_modules/@mui/material/CircularProgress/CircularProgress.js"),E=s("../../libs/wallet-core/dist/shared.js"),L=s("../../libs/shared/dist/constants/derivationPaths.js");const R=({allAccounts:e,activeAccountsPerPath:t,onDerivationPathSelected:s,setActiveAccountsPerPath:i,setAllAccounts:r,onCancel:o})=>{const{t:l}=(0,c.$)(),[u,h]=(0,n.useState)(!0),b=(0,S.Af)(),{fetchAddresses:f}=(0,d.c5)();(0,n.useEffect)((()=>{(async()=>{const e={};e[E.PT.bip44Root]=await f(E.PT.bip44Root,0,0),e[E.PT.bip44]=await f(E.PT.bip44,0,9),e[E.PT.bip44Change]=await f(E.PT.bip44Change,0,9),e[E.PT.bip44Ledger]=await f(E.PT.bip44Ledger,1,9,!0),e[E.PT.bip44LedgerChange]=await f(E.PT.bip44LedgerChange,0,9,!0);const t=Object.keys({...L.z$,...L.ff}),s=t.reduce(((t,s)=>(e[s].balances.length&&(t[s]=e[s].balances),t)),{}),a=t.reduce(((t,s)=>({...t,[s]:e[s].accounts||[]})),{});i(s),r(a),h(!1)})().then()}),[f,i,r]);const v=(0,n.useCallback)((n=>(0,a.jsxs)(g.ZP,{button:!0,sx:e=>({background:e.palette.common.white10,borderRadius:6,marginBottom:e.spacing(2),"&:hover":{background:e.palette.common.white20}}),onClick:()=>s(n),children:[(0,a.jsx)(y.Z,{primary:(0,a.jsx)(p.Z,{variant:"h3",children:L.z$[n]||L.ff[n]}),secondary:(0,a.jsx)(p.Z,{variant:"caption",color:"textSecondary",children:(0,C.r)(e[n][0]?.publicKey)})}),(0,a.jsx)(_.Z,{children:(0,a.jsxs)(m.Z,{textAlign:"right",children:[(0,a.jsx)(p.Z,{variant:"h2",children:(0,A.ED)({amount:(0,w.sumBy)(t[n],(e=>e.value||0)),suffix:`${b.symbol}`,displayType:"amount"})}),(0,a.jsxs)(p.Z,{variant:"body2",color:"textSecondary",children:[t[n]?.length||0," accounts"]})]})})]},`path-${n}`)),[t,e,b.symbol,s]);return u?(0,a.jsxs)(m.Z,{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",children:[(0,a.jsxs)(m.Z,{mb:4,bgcolor:"primary.light",width:180,height:180,display:"inline-flex",justifyContent:"center",alignItems:"center",position:"relative",borderRadius:"50%",children:[(0,a.jsx)(M.Z,{color:"primary",style:{fontSize:50}}),(0,a.jsx)(O.Z,{sx:{position:"absolute"},size:180,thickness:1})]}),(0,a.jsx)(m.Z,{maxWidth:350,children:(0,a.jsx)(p.Z,{variant:"body1",gutterBottom:!0,children:l("onboard_detecting_existing_accounts")})})]}):(0,a.jsxs)(m.Z,{textAlign:"center",children:[(0,a.jsx)(p.Z,{variant:"h2",gutterBottom:!0,children:l("onboard_select_derivation_path")}),(0,a.jsx)(p.Z,{variant:"body2",color:"textSecondary",children:l("onboard_select_derivation_path_you_want_to_use")}),(0,a.jsxs)(j.Z,{sx:{mt:4},children:[Object.keys(L.z$).map((e=>v(e))),Object.keys(L.ff).filter((e=>t[e]?.length>0)).map((e=>v(e)))]}),o&&(0,a.jsx)(m.Z,{display:"flex",justifyContent:"space-between",mt:4,mb:2,children:(0,a.jsx)(x.Z,{variant:"text",color:"primary",onClick:o,children:l("action_back")})})]})};var B,W=s("../../../node_modules/console-browserify/index.js");!function(e){e[e.Connect=0]="Connect",e[e.DerivationPath=1]="DerivationPath",e[e.Accounts=2]="Accounts"}(B||(B={}));const N=()=>{const{search:e}=(0,i.TH)(),t=(0,i.s0)(),[s,c]=(0,n.useState)(B.Connect),[u,h]=(0,n.useState)("bip44LedgerRoot"),[m,p]=(0,n.useState)({}),[x,j]=(0,n.useState)({}),{addMultipleWallets:b}=(0,d.Z)(),g=(0,n.useMemo)((()=>new URLSearchParams(e)),[e]),y=(0,n.useCallback)((e=>{h(e),c(B.Accounts)}),[]),_=(0,n.useCallback)((async e=>{if(0===e.length)return void W.error("Accounts cannot be empty");const s=e.map((e=>{const t=new r.uN;return t.init({publicKey:e.address,accountIndex:e.index,derivationPath:u}),{name:0===e.index?"Main Ledger":`Ledger ${e.index}`,wallet:t.toObject()}}));await b(s),"ext"!==g.get("redirect")?t(l.yD.MAIN,{replace:!0}):setTimeout(window.close,500)}),[b,u,g,t]);return(0,a.jsxs)(o.u_,{open:!0,fullScreen:!1,onClose:()=>t(l.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),maxWidth:"sm",children:[s===B.Connect&&(0,a.jsx)(T,{derivationPath:u,onConnect:()=>c(B.DerivationPath)}),s===B.DerivationPath&&(0,a.jsx)(R,{derivationPath:u,allAccounts:m,activeAccountsPerPath:x,onDerivationPathSelected:y,setActiveAccountsPerPath:j,setAllAccounts:p,onCancel:()=>c(B.Connect)}),s===B.Accounts&&(0,a.jsx)(D,{manage:!0,derivationPath:u,allAccounts:m[u],activeAccounts:x[u],setAccounts:e=>p((t=>({...t,[u]:[...t[u]||[],...e]}))),setActiveAccounts:e=>j((t=>({...t,[u]:[...t[u]||[],...e]}))),onImport:_,onCancel:()=>c(B.Connect)})]})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/CreateBurnerWallet/index.js":(e,t,s)=>{s.d(t,{B:()=>j});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=s("../../../node_modules/react-router/dist/index.js"),o=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),l=s("../../libs/wallet-core/dist/burner.js"),d=s("../../libs/foundation-ui/dist/index.js"),c=s("../../libs/shared/dist/constants/index.js"),u=s("../../libs/shared/dist/constants/routes.js"),h=s("../../libs/shared/dist/storage/solflareService.js"),m=s("../../libs/shared/dist/features/walletData/hooks/index.js"),p=s("../../libs/shared/dist/features/walletManagement/hooks/index.js"),x=s("../../libs/shared/dist/features/walletManagement/modals/WalletManagementContainer/index.js");const j=()=>{const{t:e}=(0,i.$)(),t=(0,r.s0)(),[s,j]=(0,n.useState)(!0),[b,g]=(0,n.useState)(0),[y,_]=(0,n.useState)(""),f=(0,p.EU)()?.data,{findNextBurnerIndex:w}=(0,p.Kx)(),{addAccount:v}=(0,m.bg)(),{wallets:k}=(0,m.Rg)();return(0,n.useEffect)((()=>{(async()=>{const e=await w(k,f);g(e),j(!1)})()}),[]),(0,a.jsx)(x.k,{onClose:()=>t(u.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),title:e("header_settings_create_burner_title"),headerAction:(0,a.jsx)(d.ActionableIcon,{icon:o.DBf,size:"l",onClick:()=>t(u.yD.ADD_WALLET_OPTIONS.CREATE_BURNER_TUTORIAL)}),footer:(0,a.jsxs)(d.ButtonGroup,{children:[(0,a.jsx)(d.Button,{variant:"secondary",onClick:()=>t(u.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),children:e("action_cancel")}),(0,a.jsx)(d.Button,{disabled:!y.trim().length||s,onClick:async e=>{if(e?.preventDefault(),s)return;if(!f?.seed)return;if(!y.trim().length)return;const a=new l.eV;a.init(f,b),await v(a.toObject(),y.trim()),await h.Z.burnerTutorial.set(!0),t(u.yD.MAIN,{replace:!0})},children:e("action_create")})]}),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Alert,{variant:"info",title:e("header_settings_create_burner_info_name_title"),message:e("header_settings_create_burner_info_name_message")}),(0,a.jsx)(d.TextField,{placeholder:e("form_wallet_name_placeholder"),value:y,onChange:e=>{_(e.currentTarget.value.substring(0,c.go))},label:(0,a.jsx)(d.Label,{children:e("form_name")})})]})})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/CreateBurnerWalletTutorial/index.js":(e,t,s)=>{s.d(t,{$:()=>j});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=s("../../../node_modules/react-router/dist/index.js"),o=s("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),l=s("../../libs/foundation-ui/dist/index.js"),d=s("../../libs/rise-ui/dist/index.js"),c=s("../../libs/shared/dist/assets/burner-tutorial-step1.svg"),u=s("../../libs/shared/dist/assets/burner-tutorial-step2.svg"),h=s("../../libs/shared/dist/assets/burner-tutorial-step3.svg"),m=s("../../libs/shared/dist/constants/routes.js"),p=s("../../libs/shared/dist/utils/extension.js");const x=(0,o.Z)((()=>({dialogPaperClassName:{width:"400px",padding:"0px"},contentClassName:{padding:"0px 8px !important"}}))),j=()=>{const{t:e}=(0,i.$)(),t=(0,r.s0)(),s=x(),o=(0,n.useCallback)((()=>t(m.yD.ADD_WALLET_OPTIONS.CREATE_BURNER_WALLET,{replace:!0})),[t]),j=(0,a.jsx)(l.Tutorial,{title:e("header_settings_burner_tutorial_title"),onClose:o,steps:[{title:e("header_settings_burner_tutorial_step1_title"),paragraph:e("header_settings_burner_tutorial_step1_subtitle"),illustration:(0,a.jsx)(l.Illustration,{children:(0,a.jsx)("img",{src:c})})},{title:e("header_settings_burner_tutorial_step2_title"),paragraph:e("header_settings_burner_tutorial_step2_subtitle"),illustration:(0,a.jsx)(l.Illustration,{children:(0,a.jsx)("img",{src:u})})},{title:e("header_settings_burner_tutorial_step3_title"),paragraph:e("header_settings_burner_tutorial_step3_subtitle"),illustration:(0,a.jsx)(l.Illustration,{children:(0,a.jsx)("img",{src:h})})}],cta:{action:o,title:e("action_continue")}});return p.p1&&!p.Cy?(0,a.jsx)(l.PagePortal,{children:(0,a.jsx)(l.FullPageModal,{open:!0,children:j})}):(0,a.jsx)(d.u_,{open:!0,fullScreen:!1,dialogPaperClassName:s.dialogPaperClassName,contentClassName:s.contentClassName,children:j})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportKeystore/index.js":(e,t,s)=>{s.d(t,{G:()=>p});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../libs/shared/node_modules/react-dropzone/dist/es/index.js"),r=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),o=s("../../../node_modules/react-router/dist/index.js"),l=s("../../../node_modules/lodash/lodash.js"),d=s("../../libs/foundation-ui/dist/index.js"),c=s("../../libs/shared/dist/constants/routes.js"),u=s("../../libs/shared/dist/utils/files.js"),h=s("../../libs/shared/dist/features/walletManagement/hooks/index.js"),m=s("../../libs/shared/dist/features/walletManagement/modals/WalletManagementContainer/index.js");const p=()=>{const{t:e}=(0,r.$)(),t=(0,o.s0)(),[s,p]=(0,n.useState)({name:"",keystorePassword:""}),[x,j]=(0,n.useState)({name:"",json:null}),[b,g]=(0,n.useState)({}),[y,_]=(0,n.useState)(!1),{addWallet:f}=(0,h.Z)(),{importKeystore:w}=(0,h.g8)(),v=!y||s.name.length>0&&s.keystorePassword.length>0&&!!x.json&&(0,l.isEmpty)(b),k=e=>{const{name:t,value:s}=e.currentTarget;p((e=>({...e,[t]:"name"===t?s.substring(0,16):s}))),g({})},A=(0,n.useRef)(!1);return(0,a.jsxs)(m.k,{onClose:()=>t(c.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),title:e("header_settings_import_keystore_title"),footer:(0,a.jsxs)(a.Fragment,{children:[b.error&&(0,a.jsx)(d.Alert,{variant:"error",title:b.error.title,message:b.error.message}),(0,a.jsx)(d.Button,{onClick:async a=>{if(a.preventDefault(),!v||A.current)return;_(!0);const n={};if(s.name.trim()||(n.name=e("validation_name_is_required")),x.json||(n.keystoreFile=e("validation_keystore_is_required")),s.keystorePassword||(n.keystorePassword=e("validation_password_is_required")),!(0,l.isEmpty)(n))return g(n),void _(!1);g({});try{A.current=!0;const a=w(x.json,s.keystorePassword);if(null===a)return g({keystoreFile:e("error_invalid_keystore")}),_(!1),void(A.current=!1);await f(s.name.trim(),a.toObject()),t(c.yD.MAIN,{replace:!0})}catch(t){g("Invalid password"===t?.message||"provided secretKey is invalid"===t?.message?{keystorePassword:e("error_invalid_keystore_password")}:{keystorePassword:t?.message||e("error_unable_to_import_keystore")}),_(!1),A.current=!1}},disabled:!v,children:e("action_import")})]}),children:[(0,a.jsx)(d.TextField,{label:(0,a.jsx)(d.Label,{children:e("form_name")}),placeholder:e("form_wallet_name_placeholder"),name:"name",value:s.name,onChange:k,error:"name"in b,hint:b.name&&(0,a.jsx)(d.Label,{error:!0,children:b.name||" "})}),(0,a.jsx)(i.ZP,{onDrop:async e=>{if(!e.length)return;const t=e[0],s=await(0,u.u)(t);j({name:t.name,json:s}),g((e=>(0,l.omit)(e,["keystoreFile","keystorePassword"])))},multiple:!1,children:({getRootProps:t,getInputProps:s})=>(0,a.jsxs)("div",{...t(),children:[(0,a.jsx)("input",{...s()}),(0,a.jsx)(d.TextField,{readOnly:!0,label:(0,a.jsx)(d.Label,{children:e("form_keystore_file")}),placeholder:e("form_keystore_file_placeholder"),value:x.name||"",error:"keystoreFile"in b,hint:b.keystoreFile&&(0,a.jsx)(d.Label,{error:!0,children:b.keystoreFile||" "})})]})}),(0,a.jsx)(d.TextField,{label:(0,a.jsx)(d.Label,{children:e("form_keystore_password")}),placeholder:e("form_keystore_password_placeholder"),name:"keystorePassword",type:"password",value:s.keystorePassword,onChange:k,error:"keystorePassword"in b,hint:b.keystorePassword&&(0,a.jsx)(d.Label,{error:!0,children:b.keystorePassword||" "})})]})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportPrivateKey/index.js":(e,t,s)=>{s.d(t,{t:()=>u});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=s("../../../node_modules/react-router/dist/index.js"),o=s("../../libs/foundation-ui/dist/index.js"),l=s("../../libs/shared/dist/constants/routes.js"),d=s("../../libs/shared/dist/features/walletManagement/hooks/index.js"),c=s("../../libs/shared/dist/features/walletManagement/modals/WalletManagementContainer/index.js");const u=()=>{const{t:e}=(0,i.$)(),t=(0,r.s0)(),[s,u]=(0,n.useState)({name:"",privateKey:""}),[h,m]=(0,n.useState)({}),{addWallet:p}=(0,d.Z)(),{importPrivateKey:x}=(0,d.$$)(),j=s.name.trim().length>0&&s.privateKey.length>0&&!h.privateKey,b=e=>{const{name:t,value:s}=e.currentTarget;u((e=>({...e,[t]:"name"===t?s.substring(0,16):s}))),m({})};return(0,a.jsxs)(c.k,{onClose:()=>t(l.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),title:e("header_settings_import_pk"),footer:(0,a.jsxs)(a.Fragment,{children:[h.error&&(0,a.jsx)(o.Alert,{variant:"error",title:h.error.title,message:h.error.message}),(0,a.jsx)(o.ButtonGroup,{children:(0,a.jsx)(o.Button,{onClick:async a=>{if(a.preventDefault(),j)try{const a=x(s.privateKey.trim());if(null===a)return void m({privateKey:e("error_invalid_privatekey")});await p(s.name.trim(),a.toObject()),t(l.yD.MAIN,{replace:!0})}catch(t){m({privateKey:e("error_invalid_privatekey")})}},disabled:!j,children:e("action_import")})})]}),children:[(0,a.jsx)(o.FormField,{label:(0,a.jsx)(o.Label,{children:e("form_name")}),hint:h.name&&(0,a.jsx)(o.Label,{error:!0,children:h.name||" "}),children:(0,a.jsx)(o.Input,{placeholder:e("form_wallet_name_placeholder"),name:"name",value:s.name,onChange:b,variant:h.name?"error":"default"})}),(0,a.jsx)(o.FormField,{label:(0,a.jsx)(o.Label,{children:e("form_privatekey")}),hint:h.privateKey&&(0,a.jsx)(o.Label,{error:!0,children:h.privateKey||" "}),children:(0,a.jsx)(o.Input,{inputType:"textArea",name:"privateKey",placeholder:e("form_paste_privatekey_placeholder"),value:s.privateKey,onChange:b,variant:h.privateKey?"error":"default"})})]})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/index.js":(e,t,s)=>{s.d(t,{a:()=>k});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-router/dist/index.js"),r=s("../../../node_modules/bs58/index.js"),o=s.n(r),l=s("../../libs/wallet-core/dist/mnemonic.js"),d=s("../../libs/wallet-core/dist/shared.js"),c=s("../../libs/rise-ui/dist/index.js"),u=s("../../libs/shared/dist/constants/derivationPaths.js"),h=s("../../libs/shared/dist/constants/routes.js"),m=s("../../libs/shared/dist/utils/extension.js"),p=s("../../libs/shared/dist/features/walletData/hooks/index.js"),x=s("../../libs/shared/dist/features/walletManagement/errors.js"),j=s("../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/Accounts.js"),b=s("../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/Aggregate.js"),g=s("../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/DerivationPath.js"),y=s("../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/Mnemonic.js");const _="MNEMONIC",f="AGGREGATE",w="DERIVATION_PATH",v="ACCOUNTS",k=()=>{const e=(0,i.s0)(),{wallets:t}=(0,p.Rg)(),{addAccount:s,persistWalletData:r}=(0,p.bg)(),[k,A]=(0,n.useState)({step:_,count:12,mnemonic:"",seed:"",derivationPath:u.VV,activeAccountsPerPath:{},offsetPerPath:{}}),C=e=>{A((t=>({...t,...e})))},S=async(a=k.derivationPath,n)=>{const{seed:i,mnemonic:c}=k;if(n.some((e=>t[e.address])))throw new x.y;const u=o().encode((new TextEncoder).encode(c)),m=new l.Bn;m.initUnlocked({derivationPath:a,seed:i,base:u}),await s(m.toObject(),"Main Wallet",!1);for(const e of n){if(e.index<1)continue;const t=new l.Bn;t.initUnlocked(m,null,e.index);const a=`Wallet ${e.index}`,n={type:d.R7,publicKey:t.publicKey,accountIndex:t.accountIndex,parent:m.publicKey};await s(n,a,!1)}await r(),e(h.yD.MAIN,{replace:!0})};return(0,a.jsxs)(c.u_,{open:!0,fullScreen:m.p1&&!m.Cy,onClose:()=>e(h.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),maxWidth:"sm",children:[k.step===_&&(0,a.jsx)(y.Z,{manage:!0,fullScreen:!0,data:k,updateData:C,nextStep:()=>A((e=>({...e,step:f})))}),k.step===f&&(0,a.jsx)(b.Z,{manage:!0,fullScreen:!0,data:k,updateData:C,onImport:S,nextStep:()=>A((e=>({...e,step:w})))}),k.step===w&&(0,a.jsx)(g.Z,{manage:!0,fullScreen:!0,data:k,updateData:C,prevStep:()=>A((e=>({...e,step:_}))),nextStep:()=>A((e=>({...e,step:v})))}),k.step===v&&(0,a.jsx)(j.Z,{manage:!0,fullScreen:!0,data:k,updateData:C,onImport:S,prevStep:()=>A((e=>({...e,step:w}))),nextStep:()=>null})]})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/Accounts.js":(e,t,s)=>{s.d(t,{Z:()=>T,o:()=>D});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/withTranslation.js"),r=s("../../../node_modules/react-virtuoso/dist/index.m.js"),o=s("../../../node_modules/@mui/material/Box/Box.js"),l=s("../../../node_modules/@mui/material/Typography/Typography.js"),d=s("../../../node_modules/@mui/material/Button/Button.js"),c=s("../../../node_modules/@mui/material/List/List.js"),u=s("../../../node_modules/@mui/material/Divider/Divider.js"),h=s("../../../node_modules/@mui/material/ListItem/ListItem.js"),m=s("../../../node_modules/@mui/material/ListItemText/ListItemText.js"),p=s("../../../node_modules/@mui/material/ListItemSecondaryAction/ListItemSecondaryAction.js"),x=s("../../../node_modules/@mui/material/Checkbox/Checkbox.js"),j=s("../../../node_modules/@mui/styles/withStyles/withStyles.js"),b=s("../../../node_modules/clsx/dist/clsx.m.js"),g=s("../../../node_modules/immer/dist/immer.mjs"),y=s("../../../node_modules/lodash/lodash.js"),_=s("../../../node_modules/prop-types/index.js"),f=s.n(_),w=s("../../libs/wallet-core/dist/mnemonic.js"),v=s("../../libs/foundation-ui/dist/index.js"),k=s("../../libs/shared/dist/components/index.js"),A=s("../../libs/shared/dist/decorators/index.js"),C=s("../../libs/shared/dist/utils/truncateMiddle.js"),S=s("../../libs/shared/dist/features/currencies/components/index.js"),P=s("../../libs/shared/dist/features/walletManagement/decorators/getBalances.js"),I=s("../../../node_modules/console-browserify/index.js");const D=20;let Z=class extends n.Component{constructor(e){super(e),this.fetchAddresses=async(e,t,s,a=!1)=>{let n=this.generateAddresses(t,s,e);const i=await this.props.getBalances(n);return a&&(n=n.filter((e=>(0,y.find)(i,(t=>t.pubkey===e.publicKey))))),{accounts:n,activeAccountsPerPath:i}},this.generateAddresses=(e=0,t=19,s)=>{const a=[];for(let n=e;n<=t;n++){const e=(0,w.c3)(this.props.data.seed,n,s).publicKey.toString();a.push(e)}return(0,y.uniq)(a)},this.getActiveAccountsMap=e=>{const{data:{activeAccountsPerPath:t,derivationPath:s}}=this.props,a=e?.length>0?e:t[s];return(0,y.keyBy)(a,"pubkey")},this.handleChecked=e=>{const{name:t,checked:s}=e.target;s?this.setState({selected:(0,y.union)(this.state.selected,[t])}):this.setState({selected:(0,y.difference)(this.state.selected,[t])})},this.handleToggleAll=()=>{const{data:{derivationPath:e,activeAccountsPerPath:t}}=this.props,s=t[e]?.map((e=>e.pubkey));(0,y.isEqual)(this.state.selected,s??[])?this.setState({selected:[this.state.selected[0]]}):this.setState({selected:s??[]})},this.onSubmit=async()=>{const{data:{derivationPath:e},t}=this.props,s=this.state.addresses.map(((e,t)=>({address:e,index:t}))).filter((({address:e})=>this.state.selected.indexOf(e)>=0));try{await this.props.onImport(e,s)}catch(e){"WalletAlreadyAddedError"===e?.name&&this.setState({error:{title:t("account_already_imported"),message:t("account_already_imported_mnemonic")}})}},this.onInfiniteScroll=async()=>{const{data:{activeAccountsPerPath:e,derivationPath:t}}=this.props,s=this.state.addresses.length;if(1!==s)try{this.setState({loading:!0});const{accounts:a,activeAccountsPerPath:n}=await this.fetchAddresses(t,s,s+D),i=(0,g.Uy)(this.props.data,(a=>{a.offsetPerPath[t]=s+D,a.activeAccountsPerPath[t]?a.activeAccountsPerPath[t]=[...e[t],...n]:n?.length&&(a.activeAccountsPerPath[t]=[...n])}));this.props.updateData(i);const r=n.map((e=>e.pubkey));this.setState({addresses:[...this.state.addresses,...a],loading:!1,active:this.getActiveAccountsMap([...e[t]??[],...n]),selected:this.state.selected.length?[...this.state.selected,...r]:[...r]})}catch(e){I.log("error",e),this.setState({loading:!1})}},this.state={addresses:this.generateAddresses(0,e.data.offsetPerPath[e.data.derivationPath]??D,e.data.derivationPath),selected:Object.keys(this.getActiveAccountsMap()),active:this.getActiveAccountsMap(),loading:!1,error:null}}render(){const{classes:e,prevStep:t,t:s,openExplorer:i,data:{activeAccountsPerPath:j,derivationPath:g},manage:y,fullScreen:_}=this.props,{active:f,error:w}=this.state;return(0,a.jsx)(o.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,a.jsxs)(o.Z,{maxWidth:400,textAlign:"center",children:[(0,a.jsx)(l.Z,{variant:"h2",gutterBottom:!0,children:s("onboard_active_wallet",{count:j[g]?.length||0})}),(0,a.jsx)(l.Z,{variant:"body2",color:"textSecondary",children:s("onboard_active_description")}),(0,a.jsx)(o.Z,{mt:2,textAlign:"right",children:(0,a.jsx)(d.Z,{sx:{visibility:this.state.addresses.length<=1?"hidden":"visible"},variant:"text",color:"primary",onClick:this.handleToggleAll,children:s("toggle_all")})}),(0,a.jsxs)(c.Z,{className:(0,b.Z)(e.list,_&&e.fullScreenList),children:[(0,a.jsx)(u.Z,{light:!0}),(0,a.jsx)(r.OO,{data:this.state.addresses||[],endReached:this.onInfiniteScroll,overscan:80,components:{Footer:!!j[g]&&1!==this.state.addresses.length&&k.b2},itemContent:(t,s)=>(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)(h.ZP,{children:[(0,a.jsx)(m.Z,{primary:(0,a.jsxs)(o.Z,{display:"flex",alignItems:"center",mb:1,children:[(0,a.jsx)(l.Z,{variant:"caption",children:(0,C.r)(s)}),(0,a.jsx)(k.Tq,{className:e.linkIcon,onClick:()=>i({type:"account",address:s})})]}),secondary:(0,a.jsx)(l.Z,{variant:"body2",color:"textSecondary",children:(0,a.jsx)(S.sp,{value:f[s]?.value??0})})}),(0,a.jsx)(p.Z,{children:(0,a.jsx)(x.Z,{disabled:0===t,color:"primary",edge:"end",onChange:this.handleChecked,name:s,checked:0===t||-1!==this.state.selected.indexOf(s)})})]}),(0,a.jsx)(u.Z,{light:!0})]},`address-${s}`)})]}),w&&(0,a.jsx)(v.Alert,{variant:"error",title:this.state.error.title,message:this.state.error.message}),(0,a.jsxs)(o.Z,{display:"flex",justifyContent:"space-between",mt:4,mb:2,children:[(0,a.jsx)(d.Z,{variant:"text",color:"primary",onClick:t,children:s("action_back")}),(0,a.jsx)(d.Z,{type:"submit",variant:"contained",color:"primary",onClick:this.onSubmit,children:s(y?"action_import":"action_continue")})]}),(0,a.jsx)(l.Z,{variant:"body2",children:s("onboard_you_can_import_later")})]})})}};Z.propTypes={manage:f().bool,fullScreen:f().bool,prevStep:f().func,onImport:f().func,openExplorer:f().func,classes:f().object,t:f().func,data:f().object,getBalances:f().func,currency:f().object,updateData:f().func},Z=function(e,t,s,a){var n,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(i<3?n(r):i>3?n(t,s,r):n(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r}([(0,i.Z)(),A.Nr,(0,P.l)(),(0,j.Z)((e=>({list:{height:400,padding:0},fullScreenList:{height:300},linkIcon:{width:20,height:20,marginLeft:10,cursor:"pointer",opacity:.2,color:e.palette.text.primary}})))],Z);const T=Z},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/Aggregate.js":(e,t,s)=>{s.d(t,{Z:()=>f});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/@mui/icons-material/esm/AccountBalanceWallet.js"),i=s("../../../node_modules/@mui/material/Box/Box.js"),r=s("../../../node_modules/@mui/material/CircularProgress/CircularProgress.js"),o=s("../../../node_modules/@mui/material/Typography/Typography.js"),l=s("../../../node_modules/@mui/material/Button/Button.js"),d=s("../../../node_modules/@mui/styles/withStyles/withStyles.js"),c=s("../../libs/wallet-core/dist/mnemonic.js"),u=s("../../libs/foundation-ui/dist/index.js"),h=s("../../../node_modules/lodash/lodash.js"),m=s("../../../node_modules/prop-types/index.js"),p=s.n(m),x=s("../../../node_modules/react/index.js"),j=s("../../../node_modules/react-i18next/dist/es/withTranslation.js"),b=s("../../libs/shared/dist/constants/derivationPaths.js"),g=s("../../libs/shared/dist/features/walletManagement/decorators/getBalances.js"),y=s("../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/Accounts.js");let _=class extends x.Component{constructor(){super(...arguments),this.state={loading:!0,activeAccountsPerPath:null,error:null},this.checkAccountsBalances=async()=>{this.setState({loading:!0});const e=Object.keys(b.z$),t=e.map((e=>this.fetchActiveAccounts(e))),s=await Promise.all(t),a=e.reduce(((e,t,a)=>(s[a].length&&(e[t]=s[a]),e)),{});await this.props.updateData({activeAccountsPerPath:a}),this.setState({loading:!1,activeAccountsPerPath:a}),Object.keys(a).length>1&&this.props.nextStep()},this.fetchActiveAccounts=async e=>{const t=this.generateAddresses(y.o,e),s=await this.props.getBalances(t),a=(0,h.keyBy)(s,"pubkey");return 0===s.length?[]:t.map(((e,t)=>({pubkey:e,index:t,value:0,...a[e]||{}}))).filter(((e,t)=>0===t||e.value))},this.generateAddresses=(e=10,t)=>(0,h.uniq)([...Array(e)].map(((e,s)=>(0,c.c3)(this.props.data.seed,s,t).publicKey.toString()))),this.quickSetup=async()=>{const{t:e}=this.props,t=this.generateAddresses(1,b.VV);try{await this.props.onImport(b.VV,[{address:t[0],index:0}])}catch(t){"WalletAlreadyAddedError"===t?.name&&this.setState({error:{title:e("account_already_imported"),message:e("account_already_imported_mnemonic")}})}},this.chooseDerivationPath=()=>{this.props.nextStep()},this.importAllActive=async e=>{const{t}=this.props,s=this.state.activeAccountsPerPath[e].map((e=>({address:e.pubkey,index:e.index})));try{await this.props.onImport(e,s)}catch(e){"WalletAlreadyAddedError"===e?.name&&this.setState({error:{title:t("account_already_imported"),message:t("account_already_imported_mnemonic")}})}},this.renderInfo=({title:e,subtitle:t,actions:s,error:l,isLoading:d=!1})=>{const{classes:c,t:h}=this.props;return(0,a.jsxs)(i.Z,{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",children:[(0,a.jsxs)(i.Z,{mb:4,className:c.iconContainer,width:180,height:180,display:"inline-flex",justifyContent:"center",alignItems:"center",position:"relative",borderRadius:"50%",children:[(0,a.jsx)(n.Z,{color:"primary",style:{fontSize:50}}),d&&(0,a.jsx)(r.Z,{className:c.progress,size:180,thickness:1})]}),l?(0,a.jsx)(u.Alert,{variant:"error",title:this.state.error.title,message:this.state.error.message}):d?(0,a.jsx)(i.Z,{maxWidth:350,children:(0,a.jsx)(o.Z,{variant:"body1",gutterBottom:!0,children:h("onboard_detecting_existing_accounts")})}):(0,a.jsxs)(i.Z,{maxWidth:250,children:[(0,a.jsx)(o.Z,{variant:"h2",gutterBottom:!0,children:e}),(0,a.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:t}),s&&(0,a.jsx)(i.Z,{mt:4,display:"flex",flexDirection:"column",alignItems:"center",children:s})]})]})}}componentDidMount(){this.checkAccountsBalances()}render(){const{t:e}=this.props;if(this.state.loading)return this.renderInfo({isLoading:!0});if(this.state.error)return this.renderInfo({error:!0});const t=Object.keys(this.state.activeAccountsPerPath);return 0===t.length?this.renderInfo({title:e("onboard_no_active_wallets"),subtitle:e("onboard_active_description"),actions:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{variant:"contained",color:"primary",onClick:this.quickSetup,children:e("onboard_quick_setup")}),(0,a.jsx)(l.Z,{variant:"text",color:"primary",onClick:this.chooseDerivationPath,children:e("action_advanced")})]})}):1===t.length?this.renderInfo({title:e("onboard_active_wallet",{count:this.state.activeAccountsPerPath[t[0]].length}),subtitle:e("onboard_active_description"),actions:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>this.importAllActive(t[0]),children:e("action_import_all")}),(0,a.jsx)(l.Z,{variant:"text",color:"primary",onClick:this.chooseDerivationPath,children:e("action_advanced")})]})}):null}};_.propTypes={t:p().func,classes:p().object,getBalances:p().func,updateData:p().func,nextStep:p().func,onImport:p().func,data:p().object},_=function(e,t,s,a){var n,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(i<3?n(r):i>3?n(t,s,r):n(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r}([(0,j.Z)(),(0,d.Z)((e=>({iconContainer:{backgroundColor:e.palette.primary.light},progress:{position:"absolute"}}))),(0,g.l)()],_);const f=_},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/DerivationPath.js":(e,t,s)=>{s.d(t,{Z:()=>f});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/withTranslation.js"),r=s("../../../node_modules/@mui/material/Box/Box.js"),o=s("../../../node_modules/@mui/material/Typography/Typography.js"),l=s("../../../node_modules/@mui/material/List/List.js"),d=s("../../../node_modules/@mui/material/ListItem/ListItem.js"),c=s("../../../node_modules/@mui/material/ListItemText/ListItemText.js"),u=s("../../../node_modules/@mui/material/ListItemSecondaryAction/ListItemSecondaryAction.js"),h=s("../../../node_modules/@mui/styles/withStyles/withStyles.js"),m=s("../../../node_modules/lodash/lodash.js"),p=s("../../../node_modules/prop-types/index.js"),x=s.n(p),j=s("../../libs/wallet-core/dist/mnemonic.js"),b=s("../../libs/shared/dist/constants/derivationPaths.js"),g=s("../../libs/shared/dist/utils/truncateMiddle.js"),y=s("../../libs/shared/dist/features/currencies/components/index.js");let _=class extends n.Component{constructor(){super(...arguments),this.generateAddresses=(e=10,t)=>(0,m.uniq)([...Array(e)].map(((e,s)=>(0,j.c3)(this.props.data.seed,s,t).publicKey.toString()))),this.getDerivationPathAccountsBalance=e=>{const t=this.props.data.activeAccountsPerPath[e]?.reduce(((e,t)=>e+t.value),0);return(0,a.jsx)(y.sp,{value:t||0})},this.selectDerivationPath=async e=>{await this.props.updateData({derivationPath:e}),this.props.nextStep()}}render(){const{data:e,classes:t,t:s}=this.props;return(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(o.Z,{variant:"h2",gutterBottom:!0,children:s("onboard_select_derivation_path")}),(0,a.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:s("onboard_derivation_path_description")}),(0,a.jsx)(l.Z,{className:t.list,children:Object.keys(b.z$).map((n=>(0,a.jsxs)(d.ZP,{button:!0,className:t.listItem,onClick:()=>this.selectDerivationPath(n),"data-id":b.z$[n],children:[(0,a.jsx)(c.Z,{primary:(0,a.jsx)(o.Z,{variant:"h3",children:b.z$[n]}),secondary:(0,a.jsx)(o.Z,{variant:"caption",color:"textSecondary","data-id":"main_address",children:(0,g.r)(this.generateAddresses(1,n)[0])})}),(0,a.jsx)(u.Z,{children:(0,a.jsxs)(r.Z,{textAlign:"right",children:[(0,a.jsx)(o.Z,{variant:"h2","data-id":"account_balance",children:this.getDerivationPathAccountsBalance(n)}),(0,a.jsx)(o.Z,{variant:"body2",color:"textSecondary","data-id":"num_accounts",children:s("onboard_num_accounts",{count:e.activeAccountsPerPath[n]?.length||0})})]})})]},`path-${n}`)))})]})}};_.propTypes={t:x().func,updateData:x().func,classes:x().object,nextStep:x().func,data:x().object},_=function(e,t,s,a){var n,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(i<3?n(r):i>3?n(t,s,r):n(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r}([(0,i.Z)(),(0,h.Z)((e=>({list:{marginTop:e.spacing(4)},listItem:{background:e.palette.common.white10,borderRadius:6,marginBottom:e.spacing(2),"&:hover":{background:e.palette.common.white20}}})))],_);const f=_},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ImportRecoveryPhrase/steps/Mnemonic.js":(e,t,s)=>{s.d(t,{Z:()=>f});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/@mui/material/Box/Box.js"),i=s("../../../node_modules/@mui/material/Typography/Typography.js"),r=s("../../../node_modules/@mui/material/Button/Button.js"),o=s("../../../node_modules/@mui/material/Divider/Divider.js"),l=s("../../../node_modules/@mui/material/Grid/Grid.js"),d=s("../../../node_modules/@mui/material/Input/Input.js"),c=s("../../../node_modules/@mui/material/InputAdornment/InputAdornment.js"),u=s("../../../node_modules/@mui/material/FormHelperText/FormHelperText.js"),h=s("../../../node_modules/@mui/styles/withStyles/withStyles.js"),m=s("../../libs/wallet-core/dist/mnemonic.js"),p=s("../../../node_modules/lodash/lodash.js"),x=s("../../../node_modules/prop-types/index.js"),j=s.n(x),b=s("../../../node_modules/react/index.js"),g=s("../../../node_modules/react-i18next/dist/es/withTranslation.js"),y=s("../../libs/shared/dist/utils/files.js");let _=class extends b.Component{constructor(e){super(e),this.handleChangeCount=e=>{this.setState({count:e})},this.handleUpload=async e=>{if(!e.length)return;this.setState({error:null});const t=e[0],s=(await(0,y.u)(t)).trim().split(/\s+/);this.setState({count:s.length<=12?12:24,words:s})},this.uploadMnemonic=()=>{const e=document.createElement("input");e.type="file",e.onchange=e=>this.handleUpload(e.target.files),e.click()},this.handleChange=(e,t)=>{const s=e.target.value,a=s.trim().split(/\s+/);a.length>1?this.setState((e=>{const s=[...e.words];let n=0;for(;t+n<24&&n<a.length;)s[t+n]=a[n],n++;let i=e.count;return t+a.length>12&&(i=24),{count:i,words:s,error:null}})):(s.endsWith(" ")&&this.focusInput(t+1),this.setState((e=>{const a=[...e.words];return a[t]=s.trim(),{words:a,error:null}})))},this.onSubmit=async e=>{const{t}=this.props;e?.preventDefault();for(let e=0;e<this.state.count;e++)if(!(this.state.words[e]||"").trim())return void this.setState({error:t("validation_invalid_mnemonic")});const s=(0,p.slice)(this.state.words,0,this.state.count).join(" ");if(!(0,m._I)(s.trim()))return this.setState({error:t("validation_invalid_mnemonic")}),!1;const a=await(0,m.OI)(s.trim());await this.props.updateData({mnemonic:s.trim(),seed:a,count:this.state.count}),this.props.nextStep()};const t=(e.data.mnemonic||"").split(/\s+/);this.state={count:e.data.count||12,words:(0,p.assign)((0,p.fill)(new Array(24),""),t),error:null}}render(){const{t:e,classes:t,prevStep:s,manage:h}=this.props;return(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(i.Z,{variant:"h2",gutterBottom:!0,children:e("onboard_enter_recovery_phrase")}),(0,a.jsx)(i.Z,{variant:"body2",color:"textSecondary",children:e("onboard_enter_recovery_phrase_description")}),(0,a.jsxs)("form",{onSubmit:this.onSubmit,children:[(0,a.jsxs)(n.Z,{className:t.wordsContainer,children:[(0,a.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",mb:1,children:[(0,a.jsxs)(n.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)(r.Z,{variant:"text",color:"primary",onClick:()=>this.handleChangeCount(12),sx:{p:1,opacity:12===this.state.count?1:.2},children:"12"}),(0,a.jsx)(r.Z,{variant:"text",color:"primary",onClick:()=>this.handleChangeCount(24),sx:{p:1,opacity:24===this.state.count?1:.2},children:"24"})]}),(0,a.jsx)(r.Z,{variant:"text",color:"primary",onClick:this.uploadMnemonic,children:e("action_upload")})]}),(0,a.jsx)(o.Z,{light:!0}),(0,a.jsx)(l.ZP,{container:!0,spacing:2,className:t.wordsGrid,children:(0,p.range)(0,this.state.count).map((e=>(0,a.jsx)(l.ZP,{item:!0,sm:4,xs:6,children:(0,a.jsx)(d.Z,{autoComplete:"off",inputProps:{tabIndex:e+1,"data-id":"recovery_phrase_input"},error:!!this.state.error,value:this.state.words[e]||"",onChange:t=>this.handleChange(t,e),id:`mnemonic-input-${e}`,fullWidth:!0,startAdornment:(0,a.jsx)(c.Z,{position:"start",children:(0,a.jsx)(i.Z,{variant:"inherit",color:"textSecondary",children:e+1})})})},e)))}),!!this.state.error&&(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(o.Z,{light:!0}),(0,a.jsx)(n.Z,{m:2,children:(0,a.jsx)(u.Z,{"data-id":"error_message",error:!0,children:this.state.error})})]})]}),(0,a.jsxs)(n.Z,{display:"flex",justifyContent:"space-between",mt:4,children:[!h&&(0,a.jsx)(r.Z,{variant:"text",color:"primary",onClick:s,children:e("action_back")}),(0,a.jsx)(n.Z,{flexGrow:1}),(0,a.jsx)(r.Z,{type:"submit",variant:"contained",color:"primary",children:e("action_continue")})]})]})]})}};_.propTypes={t:j().func,manage:j().bool,data:j().object,classes:j().object,updateData:j().func,prevStep:j().func,nextStep:j().func},_=function(e,t,s,a){var n,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,a);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(i<3?n(r):i>3?n(t,s,r):n(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r}([(0,g.Z)(),(0,h.Z)((e=>({wordsContainer:{background:e.palette.common.black20,border:`1px solid ${e.palette.common.white10}`,marginTop:e.spacing(3),padding:e.spacing(1)},wordsGrid:{padding:e.spacing(2)}})))],_);const f=_},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/ManageRecoveryPhrase/index.js":(e,t,s)=>{s.d(t,{p:()=>y});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=s("../../../node_modules/react-router/dist/index.js"),o=s("../../../node_modules/lodash/lodash.js"),l=s("../../libs/wallet-core/dist/shared.js"),d=s("../../libs/foundation-ui/dist/index.js"),c=s("../../libs/shared/dist/constants/routes.js"),u=s("../../libs/shared/dist/hooks/useMetamask/index.js"),h=s("../../libs/shared/dist/utils/displayPrice.js"),m=s("../../libs/shared/dist/utils/truncateMiddle.js"),p=s("../../libs/shared/dist/features/currencies/hooks/index.js"),x=s("../../libs/shared/dist/features/pfp/components/index.js"),j=s("../../libs/shared/dist/features/walletData/hooks/index.js"),b=s("../../libs/shared/dist/features/walletManagement/hooks/index.js"),g=s("../../libs/shared/dist/features/walletManagement/modals/WalletManagementContainer/index.js");const y=()=>{const{isMetamask:e}=(0,u.U)(),{t}=(0,i.$)(),s=(0,r.s0)(),y=(0,b.EU)(),_=(0,p.Af)(),f=y?.publicKey||"",{addresses:w,accounts:v,loadMoreAccounts:k,balances:A,deriveAccount:C}=(0,b.SH)(),{addresses:S,accounts:P,loadMoreAccounts:I,balances:D,deriveAccount:Z}=(0,b.Pi)(),{addMultipleWallets:T,removeMultipleWallets:M}=(0,b.Z)(),{persistWalletData:O}=(0,j.bg)(),{addresses:E,accounts:L,loadMoreAccounts:R,balances:B,deriveAccount:W}=(0,n.useMemo)((()=>({addresses:e?S:w,accounts:e?P:v,loadMoreAccounts:e?I:k,balances:e?D:A,deriveAccount:e?Z:C})),[e,P,S,D,Z,I,v,w,A,C,k]),[N,K]=(0,n.useState)([f,...L].reduce(((e,t)=>({...e,[t]:!0})),{})),F=0!==(0,o.xor)(Object.keys(N).filter((e=>N[e])),[f,...L]).length&&Object.keys(N).filter((e=>N[e])).length>0;(0,n.useEffect)((()=>{(e||y&&y.data)&&R(-1)}),[R]);const $=(0,n.useCallback)(((e,t)=>{K((s=>({...s,[e]:t})))}),[]);return e||y&&y.data&&y.data.derivationPath!==l.PT.bip44Root?(0,a.jsx)(g.k,{onClose:()=>s(e?c.yD.MAIN:c.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),title:t("header_wallet_management_manage_"+(e?"wallets":"recovery_phrase")),footer:(0,a.jsx)(d.Button,{disabled:!F,onClick:async t=>{t.preventDefault();const a=Object.keys(N).filter((e=>N[e])),n=(0,o.difference)(a,[f,...L]).map((e=>E.findIndex((t=>t===e)))).filter((e=>-1!==e)).map((async t=>{const s=await W(t);return e?{name:0===t?"Solana Wallet":`Solana ${t}`,wallet:{type:l.Yg,publicKey:s.toString(),derivationPath:l.PT.bip44Change,accountIndex:t}}:{name:`Wallet ${t}`,wallet:{type:l.R7,publicKey:s.toString(),accountIndex:t,parent:f}}})),i=await Promise.all(n);0!==i.length&&await T(i,{persistChanges:!1});const r=(0,o.difference)([f,...L],a).map((e=>E.findIndex((t=>t===e)))).filter((e=>-1!==e)).map((async e=>(await W(e)).toString())),d=await Promise.all(r);0!==d.length&&await M(d,{persistChange:!1}),await O(),s(c.yD.MAIN)},children:t("action_save")}),footerProps:{variant:"fixed"},children:(0,a.jsx)(d.WalletSwitchList,{loading:0===E.length,renderTitle:m.r,onCheckedChange:$,endReached:R,data:E.map(((t,s)=>({address:t,renderAvatar:(0,a.jsx)(x.y,{publicKey:t}),subtitle:"number"==typeof B[t]?(0,h.ED)({amount:B[t],displayType:"amount",prefix:_.symbol}):null,checked:N[t],isImportant:!e&&0===s})))})}):(0,a.jsx)(r.Fg,{to:c.yD.ADD_WALLET_OPTIONS.MAIN,replace:!0})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/RestoreBurnerWallets/index.js":(e,t,s)=>{s.d(t,{I:()=>k});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=s("../../../node_modules/react-router/dist/index.js"),o=s("../../libs/wallet-core/dist/burner.js"),l=s("../../libs/foundation-ui/dist/index.js"),d=s("../../libs/shared/dist/constants/routes.js"),c=s("../../libs/shared/dist/utils/displayPrice.js"),u=s("../../libs/shared/dist/utils/truncateMiddle.js"),h=s("../../libs/shared/dist/features/pfp/components/index.js"),m=s("../../libs/shared/dist/features/walletData/hooks/index.js"),p=s("../../libs/shared/dist/features/walletManagement/hooks/useBalances.js"),x=s("../../../node_modules/lodash/lodash.js"),j=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),b=s("../../libs/shared/dist/features/walletData/utils/types.js"),g=s("../../libs/shared/dist/features/walletManagement/api/index.js"),y=s("../../../node_modules/console-browserify/index.js");var _=s("../../libs/shared/dist/features/walletManagement/utils/index.js"),f=s("../../libs/shared/dist/features/walletManagement/modals/WalletManagementContainer/index.js"),w=s("../../libs/shared/dist/components/UniversalDrawer/index.js");const v=({openDrawer:e,onCloseDrawer:t,onRestoreBurners:s})=>{const{t:n}=(0,i.$)();return(0,a.jsx)(w.Z,{open:e,title:n("settings_burner_restore_modal_title"),footer:(0,a.jsxs)(l.ButtonGroup,{children:[(0,a.jsx)(l.Button,{variant:"secondary",onClick:t,children:n("action_cancel")}),(0,a.jsx)(l.Button,{onClick:s,children:n("action_restore")})]}),children:(0,a.jsxs)(l.FrictionSection,{children:[(0,a.jsx)(l.Alert,{variant:"warning",title:n("burner_wallets_restore_title"),message:n("burner_wallets_restore_description")}),(0,a.jsx)(l.Paragraph,{children:n("settings_burner_restore_modal_description_continue")})]})})},k=()=>{const e=(0,r.s0)(),{t}=(0,i.$)(),{addAccount:s,persistWalletData:w}=(0,m.bg)(),k=(0,m.YW)(),[A,C]=(0,n.useState)(!1),[S,P]=(0,n.useState)([]),{burnersToRestore:I,indexPubkeys:D,isLoading:Z}=(()=>{const e=(0,j.LN)(),{wallets:t}=(0,m.Rg)(),s=(0,m.YW)(),[a,i]=(0,n.useState)([]),[r,l]=(0,n.useState)({}),[d,c]=(0,n.useState)(!0),u=(0,n.useCallback)((async({retry:a=0,temp:n=[],startIndex:r=0})=>{if(!s)return;const d=(({startIndex:e,batch:t=0,mnemonicData:s,wallets:a})=>{const n={};for(let i=10*t+e;i<10*(t+1)+e;i++){const e=new o.eV;e.init(s,i);const t=e.publicKey||"";a[t]||(n[i]=t)}return n})({startIndex:r,batch:a,mnemonicData:s,wallets:t});l((e=>({...e,...d})));const h=n.length?[...n]:[];if(d)try{const t=await(0,g.cA)({pubkeys:Object.values(d),network:e.cluster});if(!t||!t.length)throw c(!1),new Error("No more burners");u({retry:a+1,temp:t,startIndex:r})}catch(e){y.log(e)}i((e=>[...e,...h]))}),[s,e,t]),h=(0,n.useCallback)((()=>{if(!s)return;const e=(0,x.maxBy)((0,x.filter)(t,b.Kv),"accountIndex"),a={},n=e?.accountIndex??0;for(let e=0;e<n;e++){const n=new o.eV;n.init(s,e);const i=n.publicKey||"";t[i]||(a[e]=i)}l((e=>({...e,...a}))),u({startIndex:0===n?0:n+1,temp:Object.values(a)})}),[s,t,u]);return(0,n.useEffect)((()=>{(async()=>{await h()})()}),[h]),{burnersToRestore:a,indexPubkeys:r,isLoading:d}})(),{query:T,currency:M}=(0,p.l)((0,_.Xw)(I)),O=(0,n.useMemo)((()=>S.every((e=>!e.checked))),[S]),E=(0,n.useCallback)((()=>{const e=I.map((e=>{const t=Object.entries(D).find((t=>t.includes(e))),s=Number(t?.[0]),n=T.data?.data.find((t=>t.publicKey===e))?.value;return{pubkey:e,address:(0,u.r)(e),accountIndex:s,renderAvatar:(0,a.jsx)(h.y,{publicKey:e,isBurner:!0}),subtitle:n?.toString()?(0,c.ED)({amount:n,prefix:M.symbol||M.name,displayType:"amount"}):null,isImportant:T.isFetching,checked:!1}}));P(e)}),[I,D,T.data?.data,T.isFetching,M.symbol,M.name]),L=0===I.length&&!Z;return(0,n.useEffect)((()=>{E()}),[E]),(0,a.jsxs)(f.k,{onClose:()=>e(d.yD.ADD_WALLET_OPTIONS.MAIN,{replace:!0}),title:t("settings_burner_restore_modal_title"),footer:L?null:(0,a.jsx)(l.Button,{onClick:()=>C(!0),disabled:O,children:t("action_save")}),children:[(0,a.jsx)(l.WalletSwitchList,{renderTitle:u.r,loading:Z,data:S,onCheckedChange:(e,t)=>{const s=S.findIndex((t=>t.address===e)),a={...S[s],checked:t};P((e=>e.map(((e,t)=>t===s?a:e))))}}),L&&(0,a.jsx)(l.EmptyState,{illustration:(0,a.jsx)(l.NoApp,{}),children:(0,a.jsx)(l.Paragraph,{textAlign:"center",children:t("settings_burner_account_restore_empty_message")})}),(0,a.jsx)(v,{openDrawer:A,onCloseDrawer:()=>C(!1),onRestoreBurners:async()=>{if(!k?.seed)throw new Error("There is no seed!");for(let e=0;e<S.length;e++){const t=S[e];if(t.checked){const e=new o.eV;e.init(k,t.accountIndex),await s(e.toObject(),`Used burner ${t.accountIndex}`,!1)}}await w(),C(!1),e(d.yD.MAIN,{replace:!0})}})]})}},"../../libs/shared/dist/features/walletManagement/modals/AddWalletOptions/index.js":(e,t,s)=>{s.d(t,{L:()=>x});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),i=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=s("../../../node_modules/react-router/dist/index.js"),o=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),l=s("../../libs/wallet-core/dist/shared.js"),d=s("../../libs/foundation-ui/dist/index.js"),c=s("../../libs/shared/dist/constants/routes.js"),u=s("../../libs/shared/dist/utils/extension.js"),h=s("../../libs/shared/dist/utils/tabs.js"),m=s("../../libs/shared/dist/features/walletManagement/hooks/index.js"),p=s("../../libs/shared/dist/features/walletManagement/modals/WalletManagementContainer/index.js");const x=()=>{const{t:e}=(0,i.$)(),t=(0,r.s0)(),s=(0,m.EU)(),{hasBurnerWallets:x}=(0,m.Kx)(),j=(0,n.useMemo)((()=>{const n=[];return s?(s.data?.derivationPath!==l.PT.bip44Root&&n.push({title:e("wallet_add_account_options_wallet"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.r8p}),onClick:()=>t(c.yD.ADD_WALLET_OPTIONS.ADD_WALLET),key:"mnemonic-derivenext"},{title:e("wallet_add_account_options_manage_recovery_phrase"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.Zrf}),onClick:()=>t(c.yD.ADD_WALLET_OPTIONS.MANAGE_RECOVERY_PHRASE),key:"mnemonic-manage"}),u.p1&&n.push({title:e("wallet_add_account_options_create_burner_wallet"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.Rpv}),onClick:x?()=>t(c.yD.ADD_WALLET_OPTIONS.CREATE_BURNER_WALLET):()=>t(c.yD.ADD_WALLET_OPTIONS.CREATE_BURNER_TUTORIAL),key:"burner-create"},{title:e("wallet_add_account_options_restore_burner_wallets"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.UGH}),onClick:()=>t(c.yD.ADD_WALLET_OPTIONS.RESTORE_BURNER_WALLETS),key:"burner-restore-wallets"})):n.push({title:e("wallet_add_account_options_import_recovery_phrase"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.E0H}),onClick:()=>t(c.yD.ADD_WALLET_OPTIONS.IMPORT_RECOVERY_PHRASE),key:"mnemonic-import"}),n.push({title:e("wallet_add_account_options_connect_ledger"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.JB6}),onClick:()=>u.p1&&!u.Cy?(0,h.A)("/wallet.html#/wallet-management/options/connect/ledger?redirect=ext"):t(c.yD.ADD_WALLET_OPTIONS.CONNECT_LEDGER),key:"ledger-add"},{title:e("wallet_add_account_options_connect_keystone"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.rtB}),onClick:()=>u.p1&&!u.Cy?(0,h.A)("/wallet.html#/wallet-management/options/connect/keystone?redirect=ext"):t(c.yD.ADD_WALLET_OPTIONS.CONNECT_KEYSTONE),key:"keystone-add"},{title:e("wallet_add_account_options_import_private_key"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.E0H}),onClick:()=>t(c.yD.ADD_WALLET_OPTIONS.IMPORT_PRIVATE_KEY),key:"privateKey-add"},{title:e("wallet_add_account_options_import_keystore"),avatar:(0,a.jsx)(d.Icon,{size:"l",icon:o.nfZ}),onClick:()=>t(c.yD.ADD_WALLET_OPTIONS.IMPORT_KEYSTORE),key:"keystore-import"}),n}),[t,s,x,e]);return(0,a.jsx)(p.k,{title:e("header_wallet_management_add_account_options"),onClose:()=>t(c.yD.MAIN,{replace:!0}),children:(0,a.jsx)(d.SettingsList,{data:j})})}},"../../libs/shared/dist/modals/Tutorial/index.js":(e,t,s)=>{s("../../../node_modules/react/jsx-runtime.js")},"../../libs/shared/dist/modals/Universal/index.js":(e,t,s)=>{s.d(t,{V:()=>d});var a=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),i=s("../../libs/foundation-ui/dist/index.js"),r=s("../../libs/rise-ui/dist/index.js"),o=s("../../../node_modules/@mui/material/Box/Box.js"),l=s("../../libs/shared/dist/utils/extension.js");const d=({title:e,textAlign:t,onClose:s,children:d,footer:c,footerProps:u,backAction:h,headerAction:m,expandedOverlow:p="initial",expandedMaxWidth:x="xs",contentInlineStyle:j,contentWithOverflow:b=!1})=>l.p1&&!l.Cy?(0,a.jsxs)(i.PagePortal,{children:[(0,a.jsx)(i.PageTitle,{left:h??(0,a.jsx)(i.ActionableIcon,{icon:n.acZ,size:"l",onClick:s}),center:e,right:m??null}),(0,a.jsx)(i.PageContent,{overflow:b,children:d}),c&&(0,a.jsx)(i.FooterActions,{...u,children:c})]}):(0,a.jsx)(r.u_,{useActionDivider:Boolean(c),title:(0,a.jsxs)(r.kC,{justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(i.PageTitleTypography,{textAlign:t,children:e}),m??null]}),open:!0,maxWidth:x,fullScreen:!1,contentStyle:{overflow:p},actions:c?(0,a.jsx)(o.Z,{display:"flex",gap:"12px",marginTop:"14px",flexDirection:"column",width:"100%",children:c}):null,onClose:s,children:(0,a.jsx)(i.WebModalContent,{contentInlineStyle:j,children:d})})},"../../libs/shared/dist/utils/origin.js":(e,t,s)=>{function a(e){if(!e)return"";try{return new URL(e).host||e}catch(t){return e}}s.d(t,{m:()=>a})},"../../libs/wallet-core/dist/keystoneCore.js":(e,t,s)=>{s.d(t,{W:()=>d});var a=s("../../../node_modules/@keystonehq/bc-ur-registry-sol/dist/index.js"),n=s("../../../node_modules/@keystonehq/sol-keyring/dist/index.js"),i=s("../../../node_modules/eventemitter3/index.js"),r=s.n(i),o=s("../../../node_modules/uuid/dist/esm-browser/stringify.js"),l=s("../../../node_modules/buffer/index.js").Buffer;class d extends n.BaseKeyring{constructor(){if(super(),this.getInteraction=()=>new c,this.getEventEmitter=()=>this.getInteraction().eventEmitter,this.submitSignature=this.getInteraction().submitSignature,this.cancelSignRequest=this.getInteraction().cancelSignRequest,d.instance)return d.instance;d.instance=this}}d.type=n.BaseKeyring.type;class c{constructor(){if(this.requestSignature=async e=>{const t=e.toUR(),s=e.getRequestId(),n=o.Z(s),i={requestId:n,type:t.type,cbor:t.cbor.toString("hex")};return this.eventEmitter.emit("signRequest",i),new Promise(((e,t)=>{this.eventEmitter.once(`signed-${n}`,(t=>{const s=a.SolSignature.fromCBOR(l.from(t,"hex"));e(s)})),this.eventEmitter.once(`cancel-${n}`,(()=>{t(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))}))},this.submitSignature=(e,t)=>{this.eventEmitter.emit(`signed-${e}`,t)},this.cancelSignRequest=e=>{this.eventEmitter.emit(`cancel-${e}`)},c.instance)return c.instance;this.eventEmitter=new(r()),c.instance=this}}},"../../libs/wallet-core/dist/ledgerCore.js":(e,t,s)=>{s.d(t,{$$:()=>o,I3:()=>l,fK:()=>r,h4:()=>b,n3:()=>x,yU:()=>i});var a=s("../../../node_modules/@ledgerhq/hw-transport-u2f/lib-es/TransportU2F.js"),n=s("../../../node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js");const i=5,r=6,o=0,l=1,d=1,c=2,u=250,h=224,m=1e4,p=3e4;async function x(e,t,s,a){let n=0,i=0;if(a.length>u)for(;a.length-i>u;){const r=a.slice(i,i+u);if(i+=u,2!==(await e.send(h,t,s,n|c,r)).length)throw new Error("sendPayloadLedger: Received unexpected reply payload");n|=d}const r=a.slice(i),o=await e.send(h,t,s,n,r);return o.slice(0,o.length-2)}let j=null;async function b(){return null===j&&(j=await async function(){let e;if(await async function(){return await n.Z.isSupported()}())try{e=await n.Z.create()}catch{e=await a.Z.create(m,p),e.setScrambleKey("~SOL")}else e=await a.Z.create(m,p),e.setScrambleKey("~SOL");return e}(),j?.on("disconnect",(()=>{j=null}))),j}},"../../libs/wallet-core/dist/metamaskCore.js":(e,t,s)=>{s.d(t,{qN:()=>x,u$:()=>j});var a=s("../../../node_modules/@metamask/providers/dist/index.js"),n=s("../../../node_modules/readable-stream/readable-browser.js");class i extends n.Duplex{constructor(){super({objectMode:!0}),this._log=()=>null}_onData(e){try{this.push(e),this._log(e,!1)}catch(e){this.emit("error",e)}}_read(){}_write(e,t,s){this._log(e,!0),this._postMessage(e),s()}_setLogger(e){this._log=e}}var r=s("../../libs/wallet-core/dist/metamask/utils.js");const o=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"source")?.get,l=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"origin")?.get;class d extends i{constructor({name:e,target:t,targetOrigin:s=location.origin,targetWindow:a=window}){if(super(),"undefined"==typeof window||"function"!=typeof window.postMessage)throw new Error("window.postMessage is not a function. This class should only be instantiated in a Window.");this._name=e,this._target=t,this._targetOrigin=s,this._targetWindow=a,this._onMessage=this._onMessage.bind(this),window.addEventListener("message",this._onMessage,!1)}_postMessage(e){this._targetWindow.postMessage({target:this._target,data:e},this._targetOrigin)}_onMessage(e){const t=e.data;"*"!==this._targetOrigin&&l.call(e)!==this._targetOrigin||o.call(e)!==this._targetWindow||!(0,r.V)(t)||t.target!==this._name||this._onData(t.data)}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}var c=s("../../../node_modules/console-browserify/index.js");const u="npm:@solflare-wallet/solana-snap";let h=null,m=!1;async function p(e){const t=await async function(){if(m||(h=await async function(){try{const e=new d({name:"metamask-inpage",target:"metamask-contentscript"}),t=new a.us(e,{shouldSendMetadata:!1});return await Promise.race([t.request({method:"wallet_getSnaps"}),new Promise(((e,t)=>setTimeout((()=>t("MetaMask provider not found")),1e3)))]),t}catch(e){return c.error(e),null}}(),m=!0),!h)throw new Error("MetaMask extension not detected");return h}();return await t.request(e)}async function x(){return await p({method:"wallet_requestSnaps",params:{[u]:{version:"*"}}})}async function j(e){return await p({method:"wallet_invokeSnap",params:{snapId:u,request:e}})}},"../../libs/wallet-core/dist/mnemonic.js":(e,t,s)=>{s.d(t,{Bn:()=>j,OI:()=>p,_I:()=>x,c3:()=>m});var a=s("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),n=s("../../../node_modules/bip32/src/index.js"),i=s("../../../node_modules/bip39/src/index.js"),r=s("../../../node_modules/bs58/index.js"),o=s.n(r),l=s("../../../node_modules/ed25519-hd-key/dist/index.js"),d=s("../../../node_modules/tweetnacl/nacl-fast.js"),c=s.n(d),u=s("../../libs/wallet-core/dist/shared.js"),h=s("../../../node_modules/buffer/index.js").Buffer;function m(e,t,s=void 0,i=0){const r=function(e,t,s,a){switch(s){case u.PT.deprecated:{const s=`m/501'/${t}'/0/${a}`;return n.WC(e).derivePath(s).privateKey}case u.PT.bip44Root:{const t="m/44'/501'";return(0,l.derivePath)(t,e).key}case u.PT.bip44:{const s=`m/44'/501'/${t}'`;return(0,l.derivePath)(s,e).key}case u.PT.bip44Change:{const s=`m/44'/501'/${t}'/0'`;return(0,l.derivePath)(s,e).key}default:throw new Error(`invalid derivation path: ${s}`)}}(h.from(e,"hex"),t,s,i);return a.Keypair.fromSecretKey(c().sign.keyPair.fromSeed(r).secretKey)}async function p(e){if(!i._I(e))throw new Error("Invalid mnemonic");const t=await i.OI(e);return h.from(t).toString("hex")}function x(e){return i._I(e)}class j extends u.SE{constructor(){super(...arguments),this.type=u.R7,this.encryptedData=null,this.base=null,this.seed=null,this.accountIndex=0,this.publicKey=null,this.locked=!1,this._account=null,this.initUnlocked=({base:e,seed:t,derivationPath:s},a=null,n=0)=>{this.locked=!1,this.base=e,this.derivationPath=s,this.seed=t,this.accountIndex=n,this.publicKey=a||this.account.publicKey.toString()},this.initLocked=(e,t,s=0)=>{this.locked=!0,this.encryptedData=e,this.publicKey=t,this.accountIndex=s},this.signTransaction=e=>c().sign.detached(e,this.account?.secretKey),this.signMessage=this.signTransaction,this.signAllTransactions=e=>e.map(this.signTransaction),this.toObject=()=>{const{base:e,seed:t,derivationPath:s,encryptedData:a,locked:n,publicKey:i,accountIndex:r}=this;return{type:u.R7,locked:n,data:n?a:{base:e,seed:t,derivationPath:s},publicKey:i,accountIndex:r}},this.toJSON=()=>JSON.stringify(this.toObject()),this.unlock=async e=>{if(this.locked){const{mnemonic:t,seed:s,derivationPath:a}=await async function(e,t){const{mnemonic:s,seed:a,derivationPath:n}=await(0,u.bI)(e,t);return{mnemonic:s,seed:a,derivationPath:n}}(this.encryptedData,e),n=new j;return n.initUnlocked({base:t,seed:s,derivationPath:a},this.publicKey,this.accountIndex),n}return this}}get account(){if(this.locked)throw new Error("Wallet is locked");return this._account||(this._account=m(this.seed,this.accountIndex,this.derivationPath,0)),this._account}get mnemonic(){return this.base?(new TextDecoder).decode(o().decode(this.base)):null}static fromObject(e){const t=new j;return e.locked?t.initLocked(e.data,e.publicKey,e.accountIndex):t.initUnlocked(e.data,e.publicKey,e.accountIndex),t}}},"../../libs/wallet-core/dist/shared.js":(e,t,s)=>{s.d(t,{$4:()=>P,CO:()=>g,PT:()=>u,R7:()=>h,SD:()=>j,SE:()=>v,Yf:()=>f,Yg:()=>b,bI:()=>S,c_:()=>A,dr:()=>y,oH:()=>_,pe:()=>m,sO:()=>I,vn:()=>x,x4:()=>p,yX:()=>k});var a=s("../../../node_modules/base64-js/index.js"),n=s("../../../node_modules/bs58/index.js"),i=s.n(n),r=s("../../../node_modules/crypto-browserify/index.js"),o=s("../../../node_modules/i18next/dist/esm/i18next.js"),l=s("../../../node_modules/tweetnacl/nacl-fast.js"),d=s.n(l),c=s("../../../node_modules/buffer/index.js").Buffer;const u={deprecated:"deprecated",bip44:"bip44",bip44Change:"bip44Change",bip44Root:"bip44Root",bip44LedgerRoot:"bip44LedgerRoot",bip44Ledger:"bip44Ledger",bip44LedgerChange:"bip44LedgerChange"},h="MNEMONIC",m="LEDGER",p="KEYSTONE",x="PRIVATEKEY",j="EXCHANGE_FTX",b="METAMASK",g="BURNER",y="READ_ONLY",_={[h]:0,[x]:1,[y]:2,[m]:3,[p]:4,[g]:5,[j]:7,[b]:8},f=255,w=e=>"base64"===e.encoding;class v{constructor(){this.isWalletInstance=!0,this.type=""}}function k(e){return i().encode(d().hash(Uint8Array.from(e)))}function A(e){const t=new TextEncoder;return i().encode(d().hash(t.encode(e)))}async function C(e,t,s,a){return new Promise(((n,i)=>(0,r.pbkdf2)(e,t,s,d().secretbox.keyLength,a,((e,t)=>e?i(e):n(t)))))}async function S(e,t){const{iterations:s,digest:n}=e;let r,l,u;w(e)?(r=a.toByteArray(e.encrypted64),l=a.toByteArray(e.nonce64),u=a.toByteArray(e.salt64)):(r=i().decode(e.encrypted),l=i().decode(e.nonce),u=i().decode(e.salt));const h=await C(t,u,s,n),m=d().secretbox.open(r,l,h);if(!m)throw new Error(o.ZP.t("error_invalid_password"));const p=c.from(m).toString();return JSON.parse(p)}async function P(e,t){const s=JSON.stringify(e),n=d().randomBytes(16),i=1e5,r="sha256",o=await C(t,n,i,r),l=d().randomBytes(d().secretbox.nonceLength),u=d().secretbox(c.from(s),l,o);return{kdf:"pbkdf2",encrypted64:a.fromByteArray(u),nonce64:a.fromByteArray(l),salt64:a.fromByteArray(n),iterations:i,digest:r,encoding:"base64"}}const I=e=>{try{JSON.parse(e)}catch(e){return!1}return!0}},"../../libs/shared/dist/assets/burner-tutorial-step1.svg":(e,t,s)=>{e.exports=s.p+"assets/burner-tutorial-step1.2b80006d..svg"},"../../libs/shared/dist/assets/burner-tutorial-step2.svg":(e,t,s)=>{e.exports=s.p+"assets/burner-tutorial-step2.67ec9a5a..svg"},"../../libs/shared/dist/assets/burner-tutorial-step3.svg":(e,t,s)=>{e.exports=s.p+"assets/burner-tutorial-step3.b4b9bd65..svg"}}]);
//# sourceMappingURL=src_pages_Home_index_tsx-src_pages_WalletManagement_index_tsx-libs_shared_dist_components_Ico-f59bf9.js.map