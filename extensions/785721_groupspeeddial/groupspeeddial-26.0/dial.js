(()=>{var e,t,s={611:function(){var e=(()=>{"use strict";var t=3,s="function"==typeof setImmediate?setImmediate:setTimeout,r=4294967296,i=[4294967295,-r],n=[0,-0x8000000000000000],a=[0,0],o=[1,0];function c(e,s){postMessage({action:t,cbn:s,result:e})}function l(e){var t=[];return t[e-1]=void 0,t}function d(e,t){return p(e[0]+t[0],e[1]+t[1])}function u(e,t){return function(e,t){var s;s=t,t<0&&(s+=r);return[s,e*r]}(~~Math.max(Math.min(e[1]/r,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/r,2147483647),-2147483648),_(e)&_(t))}function h(e,t){var s,r;return e[0]==t[0]&&e[1]==t[1]?0:(s=e[1]<0,r=t[1]<0,s&&!r?-1:!s&&r?1:v(e,t)[1]<0?-1:1)}function p(e,t){var s,i;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(s=t%r)+(i=Math.floor(e/r)*r),e=e-i+s;e<0;)e+=r,t-=r;for(;e>4294967295;)e-=r,t+=r;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function m(e,t){return e[0]==t[0]&&e[1]==t[1]}function g(e){return e>=0?[e,0]:[e+r,-r]}function _(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-r,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function f(e){return e<=30?1<<e:f(30)*f(e-30)}function w(e,t){var s,i,o,c;if(t&=63,m(e,n))return t?a:e;if(e[1]<0)throw new Error("Neg");return c=f(t),i=e[1]*c%0x10000000000000000,(i+=s=(o=e[0]*c)-o%r)>=0x8000000000000000&&(i-=0x10000000000000000),[o-=s,i]}function y(e,t){var s;return s=f(t&=63),p(Math.floor(e[0]/s),e[1]/s)}function v(e,t){return p(e[0]-t[0],e[1]-t[1])}function b(e,t){return e.buf=t,e.pos=0,e.count=t.length,e}function E(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function D(e,t,s,r){return e.pos>=e.count?-1:(r=Math.min(r,e.count-e.pos),P(e.buf,e.pos,t,s,r),e.pos+=r,r)}function A(e){return e.buf=l(32),e.count=0,e}function I(e){var t=e.buf;return t.length=e.count,t}function S(e,t){e.buf[e.count++]=t<<24>>24}function k(e,t,s,r){P(t,s,e.buf,e.count,r),e.count+=r}function P(e,t,s,r,i){for(var n=0;n<i;++n)s[r+n]=e[t+n]}function R(t,s,r,n,o){var c,d;if(h(n,i)<0)throw new Error("invalid length "+n);for(t.length_0=n,c=function(e){var t;for(e._repDistances=l(4),e._optimum=[],e._rangeEncoder={},e._isMatch=l(192),e._isRep=l(12),e._isRepG0=l(12),e._isRepG1=l(12),e._isRepG2=l(12),e._isRep0Long=l(192),e._posSlotEncoder=[],e._posEncoders=l(114),e._posAlignEncoder=Ae({},4),e._lenEncoder=pe({}),e._repMatchLenEncoder=pe({}),e._literalEncoder={},e._matchDistances=[],e._posSlotPrices=[],e._distancesPrices=[],e._alignPrices=l(16),e.reps=l(4),e.repLens=l(4),e.processedInSize=[a],e.processedOutSize=[a],e.finished=[0],e.properties=l(5),e.tempPrices=l(128),e._longestMatchLength=0,e._matchFinderType=1,e._numDistancePairs=0,e._numFastBytesPrev=-1,e.backRes=0,t=0;t<4096;++t)e._optimum[t]={};for(t=0;t<4;++t)e._posSlotEncoder[t]=Ae({},6);return e}({}),function(e,t){((e,t)=>{e._dictionarySize=t;for(var s=0;t>1<<s;++s);e._distTableSize=2*s})(t,1<<e.s),t._numFastBytes=e.f,((e,t)=>{var s=e._matchFinderType;e._matchFinderType=t,e._matchFinder&&s!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null)})(t,e.m),t._numLiteralPosStateBits=0,t._numLiteralContextBits=3,t._posStateBits=2,t._posStateMask=3}(o,c),c._writeEndMark=void 0===e.disableEndMark,function(e,t){e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24;for(var s=0;s<4;++s)e.properties[1+s]=e._dictionarySize>>8*s<<24>>24;k(t,e.properties,0,5)}(c,r),d=0;d<64;d+=8)S(r,255&_(y(n,d)));t.chunker=(c._needReleaseMFStream=0,c._inStream=s,c._finished=0,function(e){var t,s;e._matchFinder||(t={},s=4,e._matchFinderType||(s=2),function(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,s),e._matchFinder=t);if(function(e,t,s){var r,i;if(null!=e.m_Coders&&e.m_NumPrevBits==s&&e.m_NumPosBits==t)return;for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=s,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=l(i),r=0;r<i;++r)e.m_Coders[r]=ye({})}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes)return;(function(e,t,s,r,i){var n,a;t<1073741567&&(e._cutValue=16+(r>>1),function(e,t,s,r){var i;e._keepSizeBefore=t,e._keepSizeAfter=s,i=t+s+r,(null==e._bufferBase||e._blockSize!=i)&&(e._bufferBase=null,e._blockSize=i,e._bufferBase=l(e._blockSize));e._pointerToLastSafePosition=e._blockSize-s}(e,t+s,r+i,256+~~((t+s+r+i)/2)),e._matchMaxLen=r,n=t+1,e._cyclicBufferSize!=n&&(e._son=l(2*(e._cyclicBufferSize=n))),a=65536,e.HASH_ARRAY&&(a=t-1,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a>>=1,(a|=65535)>16777216&&(a>>=1),e._hashMask=a,++a,a+=e.kFixHashSize),a!=e._hashSizeSum&&(e._hash=l(e._hashSizeSum=a)))})(e._matchFinder,e._dictionarySize,4096,e._numFastBytes,274),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes}(c),c._rangeEncoder.Stream=r,function(e){(function(e){e._state=0,e._previousByte=0;for(var t=0;t<4;++t)e._repDistances[t]=0})(e),function(e){e._position=a,e.Low=a,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),Ce(e._isMatch),Ce(e._isRep0Long),Ce(e._isRep),Ce(e._isRepG0),Ce(e._isRepG1),Ce(e._isRepG2),Ce(e._posEncoders),function(e){var t,s=1<<e.m_NumPrevBits+e.m_NumPosBits;for(t=0;t<s;++t)Ce(e.m_Coders[t].m_Encoders)}(e._literalEncoder);for(var t=0;t<4;++t)Ce(e._posSlotEncoder[t].Models);de(e._lenEncoder,1<<e._posStateBits),de(e._repMatchLenEncoder,1<<e._posStateBits),Ce(e._posAlignEncoder.Models),e._longestMatchWasFound=0,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(c),te(c),ee(c),c._lenEncoder._tableSize=c._numFastBytes+1-2,ge(c._lenEncoder,1<<c._posStateBits),c._repMatchLenEncoder._tableSize=c._numFastBytes+1-2,ge(c._repMatchLenEncoder,1<<c._posStateBits),c.nowPos64=a,function(e,t){return e.encoder=t,e.decoder=null,e.alive=1,e}({},c))}function L(e,t,s){return e.output=A({}),R(e,b({},t),e.output,g(t.length),s),e}function O(e,t,s){var r,n,o,c,d="",u=[];for(n=0;n<5;++n){if(-1==(o=E(t)))throw new Error("truncated input");u[n]=o<<24>>24}if(r=function(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=l(192),e.m_IsRepDecoders=l(12),e.m_IsRepG0Decoders=l(12),e.m_IsRepG1Decoders=l(12),e.m_IsRepG2Decoders=l(12),e.m_IsRep0LongDecoders=l(192),e.m_PosSlotDecoder=l(4),e.m_PosDecoders=l(114),e.m_PosAlignDecoder=Ee({},4),e.m_LenDecoder=Y({}),e.m_RepLenDecoder=Y({}),e.m_LiteralDecoder={};for(var t=0;t<4;++t)e.m_PosSlotDecoder[t]=Ee({},6);return e}({}),!function(e,t){var s,r,i,n,a,o,c;if(t.length<5)return 0;for(c=255&t[0],i=c%9,n=(o=~~(c/9))%5,a=~~(o/5),s=0,r=0;r<4;++r)s+=(255&t[1+r])<<8*r;if(s>99999999||!function(e,t,s,r){if(t>8||s>4||r>4)return 0;!function(e,t,s){var r,i;if(null!=e.m_Coders&&e.m_NumPrevBits==s&&e.m_NumPosBits==t)return;for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=s,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=l(i),r=0;r<i;++r)e.m_Coders[r]=X({})}(e.m_LiteralDecoder,s,t);var i=1<<r;return j(e.m_LenDecoder,i),j(e.m_RepLenDecoder,i),e.m_PosStateMask=i-1,1}(e,i,n,a))return 0;return function(e,t){if(t<0)return 0;e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),function(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=l(t));e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096)));return 1}(e,s)}(r,u))throw new Error("corrupted input");for(n=0;n<64;n+=8){if(-1==(o=E(t)))throw new Error("truncated input");1==(o=o.toString(16)).length&&(o="0"+o),d=o+""+d}/^0+$|^f+$/i.test(d)?e.length_0=i:(c=parseInt(d,16),e.length_0=c>4294967295?i:g(c)),e.chunker=function(e,t,s,r){return e.m_RangeDecoder.Stream=t,F(e.m_OutWindow),e.m_OutWindow._stream=s,function(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,Ce(e.m_IsMatchDecoders),Ce(e.m_IsRep0LongDecoders),Ce(e.m_IsRepDecoders),Ce(e.m_IsRepG0Decoders),Ce(e.m_IsRepG1Decoders),Ce(e.m_IsRepG2Decoders),Ce(e.m_PosDecoders),function(e){var t,s;for(s=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<s;++t)Ce(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder);for(var t=0;t<4;++t)Ce(e.m_PosSlotDecoder[t].Models);J(e.m_LenDecoder),J(e.m_RepLenDecoder),Ce(e.m_PosAlignDecoder.Models),function(e){e.Code=0,e.Range=-1;for(var t=0;t<5;++t)e.Code=e.Code<<8|E(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=r,e.nowPos64=a,e.prevByte=0,function(e,t){return e.decoder=t,e.encoder=null,e.alive=1,e}({},e)}(r,t,s,e.length_0)}function C(e,t){return e.output=A({}),O(e,b({},t),e.output),e}function T(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function x(e,t,s,r){var i,n;for(e._streamEndWasReached&&e._pos+t+r>e._streamPos&&(r=e._streamPos-(e._pos+t)),++s,n=e._bufferOffset+e._pos+t,i=0;i<r&&e._bufferBase[n+i]==e._bufferBase[n+i-s];++i);return i}function B(e){return e._streamPos-e._pos}function N(e){var t,s;if(!e._streamEndWasReached)for(;;){if(!(s=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=D(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,s)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=1);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function M(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}var U=(()=>{var e,t,s,r=[];for(e=0;e<256;++e){for(s=e,t=0;t<8;++t)0!=(1&s)?s=s>>>1^-306674912:s>>>=1;r[e]=s}return r})();function G(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&(e=>{var t,s,r;for((r=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--r,s=e._bufferOffset+e._streamPos-r,t=0;t<s;++t)e._bufferBase[t]=e._bufferBase[r+t];e._bufferOffset-=r})(e),N(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,z(e._son,2*e._cyclicBufferSize,t),z(e._hash,e._hashSizeSum,t),M(e,t))}function z(e,t,s){var r,i;for(r=0;r<t;++r)(i=e[r]||0)<=s?i=0:i-=s,e[r]=i}function $(e){var t=e._pos-e._streamPos;t&&(k(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function H(e,t){var s=e._pos-t-1;return s<0&&(s+=e._windowSize),e._buffer[s]}function F(e){$(e),e._stream=null}function W(e){return(e-=2)<4?e:3}function V(e){return e<4?0:e<10?e-3:e-6}function K(e){if(!e.alive)throw new Error("bad state");return e.encoder?function(e){(function(e,t,s,r){var i,n,c,l,u,p,f,w,y,b,E,D,A,I,S;t[0]=a,s[0]=a,r[0]=1,e._inStream&&(e._matchFinder._stream=e._inStream,function(e){e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=0,N(e),e._cyclicBufferPos=0,M(e,-1)}(e._matchFinder),e._needReleaseMFStream=1,e._inStream=null);if(e._finished)return;if(e._finished=1,I=e.nowPos64,m(e.nowPos64,a)){if(!B(e._matchFinder))return void se(e,_(e.nowPos64));oe(e),A=_(e.nowPos64)&e._posStateMask,xe(e._rangeEncoder,e._isMatch,(e._state<<4)+A,0),e._state=V(e._state),c=T(e._matchFinder,-e._additionalOffset),fe(_e(e._literalEncoder,_(e.nowPos64),e._previousByte),e._rangeEncoder,c),e._previousByte=c,--e._additionalOffset,e.nowPos64=d(e.nowPos64,o)}if(!B(e._matchFinder))return void se(e,_(e.nowPos64));for(;;){if(f=re(e,_(e.nowPos64)),b=e.backRes,A=_(e.nowPos64)&e._posStateMask,n=(e._state<<4)+A,1==f&&-1==b)xe(e._rangeEncoder,e._isMatch,n,0),c=T(e._matchFinder,-e._additionalOffset),S=_e(e._literalEncoder,_(e.nowPos64),e._previousByte),e._state<7?fe(S,e._rangeEncoder,c):(y=T(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),we(S,e._rangeEncoder,y,c)),e._previousByte=c,e._state=V(e._state);else{if(xe(e._rangeEncoder,e._isMatch,n,1),b<4){if(xe(e._rangeEncoder,e._isRep,e._state,1),b?(xe(e._rangeEncoder,e._isRepG0,e._state,1),1==b?xe(e._rangeEncoder,e._isRepG1,e._state,0):(xe(e._rangeEncoder,e._isRepG1,e._state,1),xe(e._rangeEncoder,e._isRepG2,e._state,b-2))):(xe(e._rangeEncoder,e._isRepG0,e._state,0),xe(e._rangeEncoder,e._isRep0Long,n,1==f?0:1)),1==f?e._state=e._state<7?9:11:(he(e._repMatchLenEncoder,e._rangeEncoder,f-2,A),e._state=e._state<7?8:11),l=e._repDistances[b],0!=b){for(p=b;p>=1;--p)e._repDistances[p]=e._repDistances[p-1];e._repDistances[0]=l}}else{for(xe(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,he(e._lenEncoder,e._rangeEncoder,f-2,A),D=le(b-=4),w=W(f),Ie(e._posSlotEncoder[w],e._rangeEncoder,D),D>=4&&(E=b-(i=(2|1&D)<<(u=(D>>1)-1)),D<14?Re(e._posEncoders,i-D-1,e._rangeEncoder,u,E):(Be(e._rangeEncoder,E>>4,u-4),ke(e._posAlignEncoder,e._rangeEncoder,15&E),++e._alignPriceCount)),l=b,p=3;p>=1;--p)e._repDistances[p]=e._repDistances[p-1];e._repDistances[0]=l,++e._matchPriceCount}e._previousByte=T(e._matchFinder,f-1-e._additionalOffset)}if(e._additionalOffset-=f,e.nowPos64=d(e.nowPos64,g(f)),!e._additionalOffset){if(e._matchPriceCount>=128&&te(e),e._alignPriceCount>=16&&ee(e),t[0]=e.nowPos64,s[0]=Ne(e._rangeEncoder),!B(e._matchFinder))return void se(e,_(e.nowPos64));if(h(v(e.nowPos64,I),[4096,0])>=0)return e._finished=0,void(r[0]=0)}}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(!function(e){ce(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=0)}(e):function(e){var t=function(e){var t,s,r,i,n,a;if(a=_(e.nowPos64)&e.m_PosStateMask,Oe(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+a)){if(Oe(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))r=0,Oe(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(Oe(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(Oe(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(s=e.rep3,e.rep3=e.rep2):s=e.rep2,e.rep2=e.rep1):s=e.rep1,e.rep1=e.rep0,e.rep0=s):Oe(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+a)||(e.state=e.state<7?9:11,r=1),r||(r=q(e.m_RepLenDecoder,e.m_RangeDecoder,a)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,r=2+q(e.m_LenDecoder,e.m_RangeDecoder,a),e.state=e.state<7?7:10,(n=De(e.m_PosSlotDecoder[W(r)],e.m_RangeDecoder))>=4){if(i=(n>>1)-1,e.rep0=(2|1&n)<<i,n<14)e.rep0+=function(e,t,s,r){var i,n,a=1,o=0;for(n=0;n<r;++n)i=Oe(s,e,t+a),a<<=1,a+=i,o|=i<<n;return o}(e.m_PosDecoders,e.rep0-n-1,e.m_RangeDecoder,i);else if(e.rep0+=function(e,t){var s,r,i=0;for(s=t;0!=s;--s)e.Range>>>=1,r=e.Code-e.Range>>>31,e.Code-=e.Range&r-1,i=i<<1|1-r,-16777216&e.Range||(e.Code=e.Code<<8|E(e.Stream),e.Range<<=8);return i}(e.m_RangeDecoder,i-4)<<4,e.rep0+=function(e,t){var s,r,i=1,n=0;for(r=0;r<e.NumBitLevels;++r)s=Oe(t,e.Models,i),i<<=1,i+=s,n|=s<<r;return n}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=n;if(h(g(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function(e,t,s){var r=e._pos-t-1;for(r<0&&(r+=e._windowSize);0!=s;--s)r>=e._windowSize&&(r=0),e._buffer[e._pos++]=e._buffer[r++],e._pos>=e._windowSize&&$(e)}(e.m_OutWindow,e.rep0,r),e.nowPos64=d(e.nowPos64,g(r)),e.prevByte=H(e.m_OutWindow,0)}else t=function(e,t,s){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&s)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,_(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function(e,t){var s=1;do{s=s<<1|Oe(t,e.m_Decoders,s)}while(s<256);return s<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function(e,t,s){var r,i,n=1;do{if(i=s>>7&1,s<<=1,n=n<<1|(r=Oe(t,e.m_Decoders,(1+i<<8)+n)),i!=r){for(;n<256;)n=n<<1|Oe(t,e.m_Decoders,n);break}}while(n<256);return n<<24>>24}(t,e.m_RangeDecoder,H(e.m_OutWindow,e.rep0)),function(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&$(e)}(e.m_OutWindow,e.prevByte),e.state=V(e.state),e.nowPos64=d(e.nowPos64,o);return 0}(e.decoder);if(-1==t)throw new Error("corrupted input");e.inBytesProcessed=i,e.outBytesProcessed=e.decoder.nowPos64,(t||h(e.decoder.outSize,a)>=0&&h(e.decoder.nowPos64,e.decoder.outSize)>=0)&&($(e.decoder.m_OutWindow),F(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}(e),e.alive}function j(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=Ee({},3),e.m_MidCoder[e.m_NumPosStates]=Ee({},3)}function q(e,t,s){if(!Oe(t,e.m_Choice,0))return De(e.m_LowCoder[s],t);var r=8;return Oe(t,e.m_Choice,1)?r+=8+De(e.m_HighCoder,t):r+=De(e.m_MidCoder[s],t),r}function Y(e){return e.m_Choice=l(2),e.m_LowCoder=l(16),e.m_MidCoder=l(16),e.m_HighCoder=Ee({},8),e.m_NumPosStates=0,e}function J(e){Ce(e.m_Choice);for(var t=0;t<e.m_NumPosStates;++t)Ce(e.m_LowCoder[t].Models),Ce(e.m_MidCoder[t].Models);Ce(e.m_HighCoder.Models)}function X(e){return e.m_Decoders=l(768),e}var Z=(()=>{var e,t,s,r=2,i=[0,1];for(s=2;s<22;++s)for(t=1<<(s>>1)-1,e=0;e<t;++e,++r)i[r]=s<<24>>24;return i})();function Q(e,t){var s,r,i,n;e._optimumEndIndex=t,i=e._optimum[t].PosPrev,r=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&(be(e._optimum[i]),e._optimum[i].PosPrev=i-1,e._optimum[t].Prev2&&(e._optimum[i-1].Prev1IsChar=0,e._optimum[i-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[i-1].BackPrev=e._optimum[t].BackPrev2)),n=i,s=r,r=e._optimum[n].BackPrev,i=e._optimum[n].PosPrev,e._optimum[n].BackPrev=s,e._optimum[n].PosPrev=t,t=n}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function ee(e){for(var t=0;t<16;++t)e._alignPrices[t]=Pe(e._posAlignEncoder,t);e._alignPriceCount=0}function te(e){var t,s,r,i,n,a,o,c;for(i=4;i<128;++i)t=(2|1&(a=le(i)))<<(r=(a>>1)-1),e.tempPrices[i]=Le(e._posEncoders,t-a-1,r,i-t);for(n=0;n<4;++n){for(s=e._posSlotEncoder[n],o=n<<6,a=0;a<e._distTableSize;++a)e._posSlotPrices[o+a]=Se(s,a);for(a=14;a<e._distTableSize;++a)e._posSlotPrices[o+a]+=(a>>1)-1-4<<6;for(c=128*n,i=0;i<4;++i)e._distancesPrices[c+i]=e._posSlotPrices[o+i];for(;i<128;++i)e._distancesPrices[c+i]=e._posSlotPrices[o+le(i)]+e.tempPrices[i]}e._matchPriceCount=0}function se(e,t){ce(e),function(e,t){if(!e._writeEndMark)return;xe(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),xe(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,he(e._lenEncoder,e._rangeEncoder,0,t);var s=W(2);Ie(e._posSlotEncoder[s],e._rangeEncoder,63),Be(e._rangeEncoder,67108863,26),ke(e._posAlignEncoder,e._rangeEncoder,15)}(e,t&e._posStateMask);for(var s=0;s<5;++s)Me(e._rangeEncoder)}function re(e,t){var s,r,i,n,a,o,c,l,d,u,h,p,m,g,_,f,w,y,v,b,E,D,A,I,S,k,P,R,L,O,C,N,M,U,G,z,$,H,F,W,K,j,q,Y;if(e._optimumEndIndex!=e._optimumCurrentIndex)return m=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,m;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(p=e._longestMatchLength,e._longestMatchWasFound=0):p=oe(e),k=e._numDistancePairs,(I=B(e._matchFinder)+1)<2)return e.backRes=-1,1;for(I>273&&(I=273),F=0,d=0;d<4;++d)e.reps[d]=e._repDistances[d],e.repLens[d]=x(e._matchFinder,-1,e.reps[d],273),e.repLens[d]>e.repLens[F]&&(F=d);if(e.repLens[F]>=e._numFastBytes)return e.backRes=F,ae(e,(m=e.repLens[F])-1),m;if(p>=e._numFastBytes)return e.backRes=e._matchDistances[k-1]+4,ae(e,p-1),p;if(c=T(e._matchFinder,-1),w=T(e._matchFinder,-e._repDistances[0]-1-1),p<2&&c!=w&&e.repLens[F]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,M=t&e._posStateMask,e._optimum[1].Price=Te[e._isMatch[(e._state<<4)+M]>>>2]+ve(_e(e._literalEncoder,t,e._previousByte),e._state>=7,w,c),be(e._optimum[1]),H=(y=Te[2048-e._isMatch[(e._state<<4)+M]>>>2])+Te[2048-e._isRep[e._state]>>>2],w==c&&(W=H+function(e,t,s){return Te[e._isRepG0[t]>>>2]+Te[e._isRep0Long[(t<<4)+s]>>>2]}(e,e._state,M),W<e._optimum[1].Price&&(e._optimum[1].Price=W,function(e){e.BackPrev=0,e.Prev1IsChar=0}(e._optimum[1]))),(h=p>=e.repLens[F]?p:e.repLens[F])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],u=h;do{e._optimum[u--].Price=268435455}while(u>=2);for(d=0;d<4;++d)if(!(($=e.repLens[d])<2)){G=H+ne(e,d,e._state,M);do{(n=G+me(e._repMatchLenEncoder,$-2,M))<(O=e._optimum[$]).Price&&(O.Price=n,O.PosPrev=0,O.BackPrev=d,O.Prev1IsChar=0)}while(--$>=2)}if(A=y+Te[e._isRep[e._state]>>>2],(u=e.repLens[0]>=2?e.repLens[0]+1:2)<=p){for(P=0;u>e._matchDistances[P];)P+=2;for(;(n=A+ie(e,l=e._matchDistances[P+1],u,M))<(O=e._optimum[u]).Price&&(O.Price=n,O.PosPrev=0,O.BackPrev=l+4,O.Prev1IsChar=0),u!=e._matchDistances[P]||(P+=2)!=k;++u);}for(s=0;;){if(++s==h)return Q(e,s);if(v=oe(e),k=e._numDistancePairs,v>=e._numFastBytes)return e._longestMatchLength=v,e._longestMatchWasFound=1,Q(e,s);if(++t,N=e._optimum[s].PosPrev,e._optimum[s].Prev1IsChar?(--N,e._optimum[s].Prev2?(j=e._optimum[e._optimum[s].PosPrev2].State,j=e._optimum[s].BackPrev2<4?j<7?8:11:j<7?7:10):j=e._optimum[N].State,j=V(j)):j=e._optimum[N].State,N==s-1?j=e._optimum[s].BackPrev?V(j):j<7?9:11:(e._optimum[s].Prev1IsChar&&e._optimum[s].Prev2?(N=e._optimum[s].PosPrev2,C=e._optimum[s].BackPrev2,j=j<7?8:11):j=(C=e._optimum[s].BackPrev)<4?j<7?8:11:j<7?7:10,L=e._optimum[N],C<4?C?1==C?(e.reps[0]=L.Backs1,e.reps[1]=L.Backs0,e.reps[2]=L.Backs2,e.reps[3]=L.Backs3):2==C?(e.reps[0]=L.Backs2,e.reps[1]=L.Backs0,e.reps[2]=L.Backs1,e.reps[3]=L.Backs3):(e.reps[0]=L.Backs3,e.reps[1]=L.Backs0,e.reps[2]=L.Backs1,e.reps[3]=L.Backs2):(e.reps[0]=L.Backs0,e.reps[1]=L.Backs1,e.reps[2]=L.Backs2,e.reps[3]=L.Backs3):(e.reps[0]=C-4,e.reps[1]=L.Backs0,e.reps[2]=L.Backs1,e.reps[3]=L.Backs2)),e._optimum[s].State=j,e._optimum[s].Backs0=e.reps[0],e._optimum[s].Backs1=e.reps[1],e._optimum[s].Backs2=e.reps[2],e._optimum[s].Backs3=e.reps[3],o=e._optimum[s].Price,c=T(e._matchFinder,-1),w=T(e._matchFinder,-e.reps[0]-1-1),M=t&e._posStateMask,b=0,(r=o+Te[e._isMatch[(j<<4)+M]>>>2]+ve(_e(e._literalEncoder,t,T(e._matchFinder,-2)),j>=7,w,c))<(E=e._optimum[s+1]).Price&&(E.Price=r,E.PosPrev=s,E.BackPrev=-1,E.Prev1IsChar=0,b=1),H=(y=o+Te[2048-e._isMatch[(j<<4)+M]>>>2])+Te[2048-e._isRep[j]>>>2],w!=c||E.PosPrev<s&&!E.BackPrev||(W=H+(Te[e._isRepG0[j]>>>2]+Te[e._isRep0Long[(j<<4)+M]>>>2]))<=E.Price&&(E.Price=W,E.PosPrev=s,E.BackPrev=0,E.Prev1IsChar=0,b=1),!((I=S=4095-s<(S=B(e._matchFinder)+1)?4095-s:S)<2)){if(I>e._numFastBytes&&(I=e._numFastBytes),!b&&w!=c&&(Y=Math.min(S-1,e._numFastBytes),(_=x(e._matchFinder,0,e.reps[0],Y))>=2)){for(q=V(j),U=t+1&e._posStateMask,D=r+Te[2048-e._isMatch[(q<<4)+U]>>>2]+Te[2048-e._isRep[q]>>>2],R=s+1+_;h<R;)e._optimum[++h].Price=268435455;(n=D+(me(e._repMatchLenEncoder,_-2,U)+ne(e,0,q,U)))<(O=e._optimum[R]).Price&&(O.Price=n,O.PosPrev=s+1,O.BackPrev=0,O.Prev1IsChar=1,O.Prev2=0)}for(K=2,z=0;z<4;++z)if(!((g=x(e._matchFinder,-1,e.reps[z],I))<2)){f=g;do{for(;h<s+g;)e._optimum[++h].Price=268435455;(n=H+(me(e._repMatchLenEncoder,g-2,M)+ne(e,z,j,M)))<(O=e._optimum[s+g]).Price&&(O.Price=n,O.PosPrev=s,O.BackPrev=z,O.Prev1IsChar=0)}while(--g>=2);if(g=f,z||(K=g+1),g<S&&(Y=Math.min(S-1-g,e._numFastBytes),(_=x(e._matchFinder,g,e.reps[z],Y))>=2)){for(q=j<7?8:11,U=t+g&e._posStateMask,i=H+(me(e._repMatchLenEncoder,g-2,M)+ne(e,z,j,M))+Te[e._isMatch[(q<<4)+U]>>>2]+ve(_e(e._literalEncoder,t+g,T(e._matchFinder,g-1-1)),1,T(e._matchFinder,g-1-(e.reps[z]+1)),T(e._matchFinder,g-1)),q=V(q),U=t+g+1&e._posStateMask,D=i+Te[2048-e._isMatch[(q<<4)+U]>>>2]+Te[2048-e._isRep[q]>>>2],R=g+1+_;h<s+R;)e._optimum[++h].Price=268435455;(n=D+(me(e._repMatchLenEncoder,_-2,U)+ne(e,0,q,U)))<(O=e._optimum[s+R]).Price&&(O.Price=n,O.PosPrev=s+g+1,O.BackPrev=0,O.Prev1IsChar=1,O.Prev2=1,O.PosPrev2=s,O.BackPrev2=z)}}if(v>I){for(v=I,k=0;v>e._matchDistances[k];k+=2);e._matchDistances[k]=v,k+=2}if(v>=K){for(A=y+Te[e._isRep[j]>>>2];h<s+v;)e._optimum[++h].Price=268435455;for(P=0;K>e._matchDistances[P];)P+=2;for(g=K;;++g)if((n=A+ie(e,a=e._matchDistances[P+1],g,M))<(O=e._optimum[s+g]).Price&&(O.Price=n,O.PosPrev=s,O.BackPrev=a+4,O.Prev1IsChar=0),g==e._matchDistances[P]){if(g<S&&(Y=Math.min(S-1-g,e._numFastBytes),(_=x(e._matchFinder,g,a,Y))>=2)){for(q=j<7?7:10,U=t+g&e._posStateMask,i=n+Te[e._isMatch[(q<<4)+U]>>>2]+ve(_e(e._literalEncoder,t+g,T(e._matchFinder,g-1-1)),1,T(e._matchFinder,g-(a+1)-1),T(e._matchFinder,g-1)),q=V(q),U=t+g+1&e._posStateMask,D=i+Te[2048-e._isMatch[(q<<4)+U]>>>2]+Te[2048-e._isRep[q]>>>2],R=g+1+_;h<s+R;)e._optimum[++h].Price=268435455;(n=D+(me(e._repMatchLenEncoder,_-2,U)+ne(e,0,q,U)))<(O=e._optimum[s+R]).Price&&(O.Price=n,O.PosPrev=s+g+1,O.BackPrev=0,O.Prev1IsChar=1,O.Prev2=1,O.PosPrev2=s,O.BackPrev2=a+4)}if((P+=2)==k)break}}}}}function ie(e,t,s,r){var i=W(s);return(t<128?e._distancesPrices[128*i+t]:e._posSlotPrices[(i<<6)+function(e){if(e<131072)return Z[e>>6]+12;if(e<134217728)return Z[e>>16]+32;return Z[e>>26]+52}(t)]+e._alignPrices[15&t])+me(e._lenEncoder,s-2,r)}function ne(e,t,s,r){var i;return t?(i=Te[2048-e._isRepG0[s]>>>2],1==t?i+=Te[e._isRepG1[s]>>>2]:(i+=Te[2048-e._isRepG1[s]>>>2],i+=Ue(e._isRepG2[s],t-2))):(i=Te[e._isRepG0[s]>>>2],i+=Te[2048-e._isRep0Long[(s<<4)+r]>>>2]),i}function ae(e,t){t>0&&(!function(e,t){var s,r,i,n,a,o,c,l,d,u,h,p,m,g,_,f,w;do{if(e._pos+e._matchMaxLen<=e._streamPos)p=e._matchMaxLen;else if((p=e._streamPos-e._pos)<e.kMinMatchCheck){G(e);continue}for(m=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,r=e._bufferOffset+e._pos,e.HASH_ARRAY?(o=1023&(w=U[255&e._bufferBase[r]]^255&e._bufferBase[r+1]),e._hash[o]=e._pos,c=65535&(w^=(255&e._bufferBase[r+2])<<8),e._hash[1024+c]=e._pos,l=(w^U[255&e._bufferBase[r+3]]<<5)&e._hashMask):l=255&e._bufferBase[r]^(255&e._bufferBase[r+1])<<8,i=e._hash[e.kFixHashSize+l],e._hash[e.kFixHashSize+l]=e._pos,_=1+(e._cyclicBufferPos<<1),f=e._cyclicBufferPos<<1,u=h=e.kNumHashDirectBytes,s=e._cutValue;;){if(i<=m||0==s--){e._son[_]=e._son[f]=0;break}if(n=((a=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-a:e._cyclicBufferPos-a+e._cyclicBufferSize)<<1,g=e._bufferOffset+i,d=u<h?u:h,e._bufferBase[g+d]==e._bufferBase[r+d]){for(;++d!=p&&e._bufferBase[g+d]==e._bufferBase[r+d];);if(d==p){e._son[f]=e._son[n],e._son[_]=e._son[n+1];break}}(255&e._bufferBase[g+d])<(255&e._bufferBase[r+d])?(e._son[f]=i,f=n+1,i=e._son[f],h=d):(e._son[_]=i,_=n,i=e._son[_],u=d)}G(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function oe(e){var t=0;return e._numDistancePairs=function(e,t){var s,r,i,n,a,o,c,l,d,u,h,p,m,g,_,f,w,y,v,b,E;if(e._pos+e._matchMaxLen<=e._streamPos)g=e._matchMaxLen;else if((g=e._streamPos-e._pos)<e.kMinMatchCheck)return G(e),0;for(w=0,_=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,r=e._bufferOffset+e._pos,f=1,l=0,d=0,e.HASH_ARRAY?(l=1023&(E=U[255&e._bufferBase[r]]^255&e._bufferBase[r+1]),d=65535&(E^=(255&e._bufferBase[r+2])<<8),u=(E^U[255&e._bufferBase[r+3]]<<5)&e._hashMask):u=255&e._bufferBase[r]^(255&e._bufferBase[r+1])<<8,i=e._hash[e.kFixHashSize+u]||0,e.HASH_ARRAY&&(n=e._hash[l]||0,a=e._hash[1024+d]||0,e._hash[l]=e._pos,e._hash[1024+d]=e._pos,n>_&&e._bufferBase[e._bufferOffset+n]==e._bufferBase[r]&&(t[w++]=f=2,t[w++]=e._pos-n-1),a>_&&e._bufferBase[e._bufferOffset+a]==e._bufferBase[r]&&(a==n&&(w-=2),t[w++]=f=3,t[w++]=e._pos-a-1,n=a),0!=w&&n==i&&(w-=2,f=1)),e._hash[e.kFixHashSize+u]=e._pos,v=1+(e._cyclicBufferPos<<1),b=e._cyclicBufferPos<<1,p=m=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&i>_&&e._bufferBase[e._bufferOffset+i+e.kNumHashDirectBytes]!=e._bufferBase[r+e.kNumHashDirectBytes]&&(t[w++]=f=e.kNumHashDirectBytes,t[w++]=e._pos-i-1),s=e._cutValue;;){if(i<=_||0==s--){e._son[v]=e._son[b]=0;break}if(o=((c=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-c:e._cyclicBufferPos-c+e._cyclicBufferSize)<<1,y=e._bufferOffset+i,h=p<m?p:m,e._bufferBase[y+h]==e._bufferBase[r+h]){for(;++h!=g&&e._bufferBase[y+h]==e._bufferBase[r+h];);if(f<h&&(t[w++]=f=h,t[w++]=c-1,h==g)){e._son[b]=e._son[o],e._son[v]=e._son[o+1];break}}(255&e._bufferBase[y+h])<(255&e._bufferBase[r+h])?(e._son[b]=i,b=o+1,i=e._son[b],m=h):(e._son[v]=i,v=o,i=e._son[v],p=h)}return G(e),w}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=x(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function ce(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=0)}function le(e){return e<2048?Z[e]:e<2097152?Z[e>>10]+20:Z[e>>20]+40}function de(e,t){Ce(e._choice);for(var s=0;s<t;++s)Ce(e._lowCoder[s].Models),Ce(e._midCoder[s].Models);Ce(e._highCoder.Models)}function ue(e,t,s,r,i){var n,a,o,c,l;for(n=Te[e._choice[0]>>>2],o=(a=Te[2048-e._choice[0]>>>2])+Te[e._choice[1]>>>2],c=a+Te[2048-e._choice[1]>>>2],l=0,l=0;l<8;++l){if(l>=s)return;r[i+l]=n+Se(e._lowCoder[t],l)}for(;l<16;++l){if(l>=s)return;r[i+l]=o+Se(e._midCoder[t],l-8)}for(;l<s;++l)r[i+l]=c+Se(e._highCoder,l-8-8)}function he(e,t,s,r){!function(e,t,s,r){s<8?(xe(t,e._choice,0,0),Ie(e._lowCoder[r],t,s)):(s-=8,xe(t,e._choice,0,1),s<8?(xe(t,e._choice,1,0),Ie(e._midCoder[r],t,s)):(xe(t,e._choice,1,1),Ie(e._highCoder,t,s-8)))}(e,t,s,r),0==--e._counters[r]&&(ue(e,r,e._tableSize,e._prices,272*r),e._counters[r]=e._tableSize)}function pe(e){return function(e){e._choice=l(2),e._lowCoder=l(16),e._midCoder=l(16),e._highCoder=Ae({},8);for(var t=0;t<16;++t)e._lowCoder[t]=Ae({},3),e._midCoder[t]=Ae({},3)}(e),e._prices=[],e._counters=[],e}function me(e,t,s){return e._prices[272*s+t]}function ge(e,t){for(var s=0;s<t;++s)ue(e,s,e._tableSize,e._prices,272*s),e._counters[s]=e._tableSize}function _e(e,t,s){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&s)>>>8-e.m_NumPrevBits)]}function fe(e,t,s){var r,i,n=1;for(i=7;i>=0;--i)r=s>>i&1,xe(t,e.m_Encoders,n,r),n=n<<1|r}function we(e,t,s,r){var i,n,a,o,c=1,l=1;for(n=7;n>=0;--n)i=r>>n&1,o=l,c&&(o+=1+(a=s>>n&1)<<8,c=a==i),xe(t,e.m_Encoders,o,i),l=l<<1|i}function ye(e){return e.m_Encoders=l(768),e}function ve(e,t,s,r){var i,n,a=1,o=7,c=0;if(t)for(;o>=0;--o)if(n=s>>o&1,i=r>>o&1,c+=Ue(e.m_Encoders[(1+n<<8)+a],i),a=a<<1|i,n!=i){--o;break}for(;o>=0;--o)i=r>>o&1,c+=Ue(e.m_Encoders[a],i),a=a<<1|i;return c}function be(e){e.BackPrev=-1,e.Prev1IsChar=0}function Ee(e,t){return e.NumBitLevels=t,e.Models=l(1<<t),e}function De(e,t){var s,r=1;for(s=e.NumBitLevels;0!=s;--s)r=(r<<1)+Oe(t,e.Models,r);return r-(1<<e.NumBitLevels)}function Ae(e,t){return e.NumBitLevels=t,e.Models=l(1<<t),e}function Ie(e,t,s){var r,i,n=1;for(i=e.NumBitLevels;0!=i;)r=s>>>--i&1,xe(t,e.Models,n,r),n=n<<1|r}function Se(e,t){var s,r,i=1,n=0;for(r=e.NumBitLevels;0!=r;)s=t>>>--r&1,n+=Ue(e.Models[i],s),i=(i<<1)+s;return n}function ke(e,t,s){var r,i,n=1;for(i=0;i<e.NumBitLevels;++i)r=1&s,xe(t,e.Models,n,r),n=n<<1|r,s>>=1}function Pe(e,t){var s,r,i=1,n=0;for(r=e.NumBitLevels;0!=r;--r)s=1&t,t>>>=1,n+=Ue(e.Models[i],s),i=i<<1|s;return n}function Re(e,t,s,r,i){var n,a,o=1;for(a=0;a<r;++a)xe(s,e,t+o,n=1&i),o=o<<1|n,i>>=1}function Le(e,t,s,r){var i,n,a=1,o=0;for(n=s;0!=n;--n)i=1&r,r>>>=1,o+=Te[(2047&(e[t+a]-i^-i))>>>2],a=a<<1|i;return o}function Oe(e,t,s){var r,i=t[s];return r=(e.Range>>>11)*i,(-2147483648^e.Code)<(-2147483648^r)?(e.Range=r,t[s]=i+(2048-i>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|E(e.Stream),e.Range<<=8),0):(e.Range-=r,e.Code-=r,t[s]=i-(i>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|E(e.Stream),e.Range<<=8),1)}function Ce(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}var Te=(()=>{var e,t,s,r=[];for(t=8;t>=0;--t)for(e=1<<9-t,s=1<<9-t-1;s<e;++s)r[s]=(t<<6)+(e-s<<6>>>9-t-1);return r})();function xe(e,t,s,r){var i,n=t[s];i=(e.Range>>>11)*n,r?(e.Low=d(e.Low,u(g(i),[4294967295,0])),e.Range-=i,t[s]=n-(n>>>5)<<16>>16):(e.Range=i,t[s]=n+(2048-n>>>5)<<16>>16),-16777216&e.Range||(e.Range<<=8,Me(e))}function Be(e,t,s){for(var r=s-1;r>=0;--r)e.Range>>>=1,1==(t>>>r&1)&&(e.Low=d(e.Low,g(e.Range))),-16777216&e.Range||(e.Range<<=8,Me(e))}function Ne(e){return d(d(g(e._cacheSize),e._position),[4,0])}function Me(e){var t,s,r,i,n=_((s=e.Low,r=32,i=y(s,r&=63),s[1]<0&&(i=d(i,w([2,0],63-r))),i));if(0!=n||h(e.Low,[4278190080,0])<0){e._position=d(e._position,g(e._cacheSize)),t=e._cache;do{S(e.Stream,t+n),t=255}while(0!=--e._cacheSize);e._cache=_(e.Low)>>>24}++e._cacheSize,e.Low=w(u(e.Low,[16777215,0]),8)}function Ue(e,t){return Te[(2047&(e-t^-t))>>>2]}function Ge(e){for(var t,s,r,i=0,n=0,a=e.length,o=[],c=[];i<a;++i,++n){if(128&(t=255&e[i]))if(192==(224&t)){if(i+1>=a)return e;if(128!=(192&(s=255&e[++i])))return e;c[n]=(31&t)<<6|63&s}else{if(224!=(240&t))return e;if(i+2>=a)return e;if(128!=(192&(s=255&e[++i])))return e;if(128!=(192&(r=255&e[++i])))return e;c[n]=(15&t)<<12|(63&s)<<6|63&r}else{if(!t)return e;c[n]=t}16383==n&&(o.push(String.fromCharCode.apply(String,c)),n=-1)}return n>0&&(c.length=n,o.push(String.fromCharCode.apply(String,c))),o.join("")}function ze(e){var t,s,r,i=[],n=0,a=e.length;if("object"==typeof e)return e;for(function(e,t,s,r,i){var n;for(n=t;n<s;++n)r[i++]=e.charCodeAt(n)}(e,0,a,i,0),r=0;r<a;++r)(t=i[r])>=1&&t<=127?++n:n+=!t||t>=128&&t<=2047?2:3;for(s=[],n=0,r=0;r<a;++r)(t=i[r])>=1&&t<=127?s[n++]=t<<24>>24:!t||t>=128&&t<=2047?(s[n++]=(192|t>>6&31)<<24>>24,s[n++]=(128|63&t)<<24>>24):(s[n++]=(224|t>>12&15)<<24>>24,s[n++]=(128|t>>6&63)<<24>>24,s[n++]=(128|63&t)<<24>>24);return s}function $e(e){return e[1]+e[0]}var He,Fe=(He=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}],e=>He[e-1]||He[6]);return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=t=>{t&&t.data&&(2==t.data.action?e.decompress(t.data.data,t.data.cbn):1==t.data.action&&e.compress(t.data.data,t.data.mode,t.data.cbn))}),{compress:function(e,t,r,i){var n,a,o={},l=void 0===r&&void 0===i;if("function"!=typeof r&&(a=r,r=i=0),i=i||(e=>{if(void 0!==a)return c(e,a)}),r=r||((e,t)=>{if(void 0!==a)return postMessage({action:1,cbn:a,result:e,error:t})}),l){for(o.c=L({},ze(e),Fe(t));K(o.c.chunker););return I(o.c.output)}try{o.c=L({},ze(e),Fe(t)),i(0)}catch(e){return r(null,e)}s((function e(){try{for(var t,a=(new Date).getTime();K(o.c.chunker);)if(n=$e(o.c.chunker.inBytesProcessed)/$e(o.c.length_0),(new Date).getTime()-a>200)return i(n),s(e,0),0;i(1),t=I(o.c.output),s(r.bind(null,t),0)}catch(e){r(null,e)}}),0)},decompress:function(e,t,r){var i,n,a,o,l={},d=void 0===t&&void 0===r;if("function"!=typeof t&&(n=t,t=r=0),r=r||(e=>{if(void 0!==n)return c(a?e:-1,n)}),t=t||((e,t)=>{if(void 0!==n)return postMessage({action:2,cbn:n,result:e,error:t})}),d){for(l.d=C({},e);K(l.d.chunker););return Ge(I(l.d.output))}try{l.d=C({},e),o=$e(l.d.length_0),a=o>-1,r(0)}catch(e){return t(null,e)}s((function e(){try{for(var n,c=0,d=(new Date).getTime();K(l.d.chunker);)if(++c%1e3==0&&(new Date).getTime()-d>200)return a&&(i=$e(l.d.chunker.decoder.nowPos64)/o,r(i)),s(e,0),0;r(1),n=Ge(I(l.d.output)),s(t.bind(null,n),0)}catch(e){t(null,e)}}),0)}}})();this.j=e},6304:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});let r=s(4323).lQ},4662:(e,t,s)=>{"use strict";s.d(t,{I:()=>r});const r=new(s(910).F)("_bing_data",(()=>({images:[],index:0})),{storageArea:"local"})},9830:(e,t,s)=>{"use strict";s.d(t,{J:()=>i,W:()=>n});var r=s(910);const i=new r.F("sync",(()=>({}))),n=new r.F("version",(()=>0))},7880:(e,t,s)=>{"use strict";s.d(t,{h:()=>r});const r={state:"none",message:(0,s(4590).tr)("login_login_create"),details:"With account you will be able to synchronize your dials between devices and your dials will be securely backed-up."}},4352:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});var r=s(4323),i=s(6801),n=s(6062);function a(...e){new Set(e.length?e:[void 0]).forEach(o)}async function o(e){const t={type:"data_changed",groupId:e};(0,i._z)(n.Dy?t:{type:"broadcast",message:t}).catch(r.lQ)}},6663:(e,t,s)=>{"use strict";var r;s.d(t,{P:()=>r}),(e=>{e[e.default=0]="default",e[e.background=1]="background",e[e.visit=2]="visit",e[e.hiddenVisit=3]="hiddenVisit"})(r||(r={}))},4162:(e,t,s)=>{"use strict";var r,i,n,a,o;s.d(t,{G_:()=>r}),(e=>{e[e.Home=0]="Home",e[e.Pro=1]="Pro",e[e.Enterprise=2]="Enterprise"})(r||(r={})),(e=>{e[e.gift=0]="gift",e[e.kofi=1]="kofi"})(i||(i={})),(e=>{e[e.Pro=1]="Pro",e[e.Enterprise=2]="Enterprise",e[e.Family=3]="Family"})(n||(n={})),(e=>{e[e.OneYear=12]="OneYear",e[e.ThreeYears=36]="ThreeYears",e[e.TenYears=120]="TenYears"})(a||(a={})),(e=>{e[e.Placebo=0]="Placebo",e[e.Pro=1]="Pro",e[e.Enterprise=2]="Enterprise",e[e.Gold=3]="Gold",e[e.Platinum=4]="Platinum",e[e.Diamond=5]="Diamond",e[e.Family_3=6]="Family_3",e[e.Enterprise_5=7]="Enterprise_5",e[e.Enterprise_10=8]="Enterprise_10",e[e.Enterprise_20=9]="Enterprise_20"})(o||(o={}))},4487:(e,t,s)=>{"use strict";var r,i;s.d(t,{b:()=>i,z:()=>r}),(e=>{e[e.metric=1]="metric",e[e.imperial=2]="imperial",e[e.standard=0]="standard"})(r||(r={})),(e=>{e[e.default=0]="default"})(i||(i={}))},8297:(e,t,s)=>{"use strict";s.d(t,{G0:()=>i,GU:()=>n});var r=s(4162);r.G_.Home,r.G_.Pro,r.G_.Enterprise;const i="x-access-secret",n=(e,t)=>`${e}/cloud?share=${t}`;var a,o;(e=>{e[e.public=0]="public"})(a||(a={})),(e=>{e[e.unlimited=0]="unlimited"})(o||(o={}))},2924:(e,t,s)=>{"use strict";s.d(t,{H:()=>r,J:()=>i});let r=0;const i=e=>r=e},1879:(e,t,s)=>{"use strict";s.d(t,{e:()=>A});var r=s(4323),i=s(5076),n=s(8794),a=(s(6062),s(5048)),o=s(1962),c=s(2846),l=s(6382),d=s(2221),u=s(910),h=s(9574),p=s(7865),m=s(6419),g=s(9998),_=s(744),f=s(6777),w=s(4559),y=s(8698),v=s(2924),b=s(6037),E=s(3778);const D=(0,h.m)((e=>e.REMEMBER_GROUP_RUNTIME?new u.F("lastGroup",r.s6,{storageArea:"session"}):new u.F("lastGroup",r.s6,{storageArea:"local"}))),A=new class extends l.c{_id=-1;get id(){return this._id}set id(e){this._id=c.M.groupById(e)?.id,(0,v.J)(this._id)}initPromiseResolver=(0,r.NU)();promise=this.initPromiseResolver.promise;di;activateFromEventWithDelay=this.createDelayedActivationEventHandler(600);constructor(){super()}async initialize(e){this.di=e;const t=window.location.hash;await c.M.promise,c.M.isEmpty()&&await _.b,this.id=this.extractHashGroupId(t),t||(d.lw.REMEMBER_GROUP?(0,i.J)(await D(d.lw).get().catch(r.s6),(e=>this.id=e)):(0,i.J)(await n.ne.get(),(e=>this.id=e))),window.addEventListener("hashchange",(e=>this.onHashChange(e)),!1),window.addEventListener("change_active_group",(e=>this.activate(e.detail))),await p.W;const s=(0,w.O1)();if(d.lw.SCROLL_GROUPS&&(s.onwheel=(0,w.uT)().onwheel=async e=>{if(e.buttons!==f.w.RIGHT&&e.composedPath().find((e=>e instanceof HTMLElement&&["dials-container","groups"].includes(e.id)))){const t=d.lw.SCROLL_GROUPS_REVERSE?-1:1,s=((e.deltaY||e.deltaX||e.deltaZ)>0?1:-1)*t,r=A.getCurrentGroup(),i=await r.getNeighbouringGroup(s>0?"next":"prev",d.lw.SCROLL_GROUPS_CIRCLE?"loop":"stay");i&&A.activate(i.id)}}),d.lw.ACTIVATE_GROUP_HOVER){const e=(0,y.U)(d.lw.ACTIVATE_GROUP_HOVER_DELAY);s.addEventListener("mouseover",(t=>(0,i.J)((0,a.rm)(t),(t=>e((()=>this.activate(t))))))),s.addEventListener("mouseleave",(()=>e.cancel()))}super.notifyChange(this.id),this.initPromiseResolver.resolve()}async updateActiveGroupAndRedraw(e){this.id=e,d.lw.REMEMBER_GROUP&&D(d.lw).set(e),await this.di.redrawDials(),(0,b.R)(e),super.notifyChange(e)}async onHashChange(e){const t=this.extractHashGroupId(e.newURL);t!==this.id&&await this.updateActiveGroupAndRedraw(t)}async activate(e,t=!1){await this.promise;c.M.GROUPS.find((t=>t.id===e))&&(e!==this.id||t)&&(window.location.hash=(0,a._V)(e),await this.updateActiveGroupAndRedraw(e),(0,w.O1)().dispatchEvent(new CustomEvent("change",{detail:e})))}activateFromEvent(e){0===e.button&&(0,i.J)((0,a.rm)(e),(e=>this.activate(e)))}createDelayedActivationEventHandler(e){let t,s=null,r=!1,n=Date.now();return(o,c)=>{0===o.button&&(0,i.J)(c??(0,a.rm)(o),(i=>{const a=Date.now();s!==i||a-n>e?(r=!1,s=i,clearTimeout(t),t=self.setTimeout((()=>r=!0),e)):r&&this.activate(i),n=a}))}}getCurrentGroup(){return c.M.groupById(this.id)}dialById(e){const t=this.getCurrentGroup(),s=t.dials,r=(0,a.om)(e);if(t.topSites)return new m.O(r,t.id,{name:"",url:(0,o.$H)(e).href});const i=s[r];return i}extractHashGroupId(e){e=e||"";const t=(0,a.m4)(e);let s=c.M.groupById(t);return!g.Jk&&s.topSites&&(s=c.M.GROUPS.find((e=>!e.topSites))||s),d.lw.GROUP_ICON_IN_TITLE&&(0,E.i)(s.iconId||0),s.id}}},5022:(e,t,s)=>{"use strict";s.d(t,{$:()=>i});var r=s(4823);const i=new class{_isActive=r.Y.has("add_pages");_addImageActive=r.Y.has("add_image");promise=this.init();isActive(){return this._isActive}setActive(e){this._isActive=e,Promise.all([s.e(274),s.e(181)]).then(s.bind(s,9681)),document.documentElement.classList.toggle("add_current_mode",e),e||r.Y.clearParamsWithoutReload()}isImageActive(){return this._addImageActive}setImageActive(e){this._addImageActive=e,s.e(741).then(s.bind(s,2992))}async init(){switch(!0){case this.isImageActive():return this.setImageActive(!0);case this.isActive():return this.setActive(!0)}}}},2009:(e,t,s)=>{"use strict";s.d(t,{DN:()=>n,ZQ:()=>a,mX:()=>i});var r=s(2846);let i=!1;async function n(){i=!0,(await r.M.getVisibleGroups()).find((e=>e.archived))?.activateGroup()}async function a(){i=!1,(await r.M.getVisibleGroups()).find((e=>!e.archived))?.activateGroup()}},6214:(e,t,s)=>{"use strict";s.d(t,{Lv:()=>a,RN:()=>o,r:()=>c});var r=s(5524),i=s(4323);class n{_groupsCache=[new Map];constructor(){}getBlobURL(e,t,s){const i=this._groupsCache[e]||(this._groupsCache[e]=new Map),n=i.get(t);if(n)return n;try{const e=URL.createObjectURL(s);return i.set(t,e),e}catch(i){(0,r.vV)("createObjectURL failed",i,{url:t,groupId:e,blob:s})}}clearAll(){this._groupsCache.forEach(((e,t)=>this.clearGroup(t)))}clearGroup(e){const t=this._groupsCache[e];t&&(t.forEach((async e=>{await(0,i.BK)(2e3),URL.revokeObjectURL(e)})),t.clear())}}const a=new n,o=new n;function c(e){(0,i.qS)(e)?(a.clearGroup(e),o.clearGroup(e)):(a.clearAll(),o.clearAll())}},4559:(e,t,s)=>{"use strict";s.d(t,{B:()=>i,O1:()=>n,uT:()=>a});var r=s(1962);const i=()=>(0,r.$H)("dials-container"),n=()=>(0,r.$H)("groups"),a=()=>(0,r.$H)("dials")},1184:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var r=s(179),i=s(2846),n=s(2221),a=s(9439);function o(){if(a.vt||n.lw.HIDE_TOP_BAR)return 0;const e=(0,r.ik)()&&(0,r.A$)()&&i.M.GROUPS.length>2?2:1;return n.lw.GROUPS_HEIGHT*e}},3143:(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var r=s(6683),i=s(1484);function n(e,t){const s=[];let n=!1,a=0;for(const o of t){const t=o.size||0;if(t!==r.ZU.NORMAL){if(0===a){if(n)return s;a=(0,i.Q)(t)-1,s.length=0}else a--;s.push(o),o.domId===e.domId&&(n=!0)}else{if(n)return s;s.length=0,a=0}}return s}},1038:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var r=s(1374),i=s(6683),n=s(5524),a=s(1484),o=s(9719),c=s(7526),l=s(3143);function d(e,t,s,d){const u=t.map((e=>e.clone())),h=u.find((e=>e.domId===s.domId)),p=h.size||0,m=(0,a.Q)(d),g=(0,a.Q)(p),_=Math.abs(m-g);if(p!==d){if(p===i.ZU.NORMAL);else{const e=(0,l.i)(h,u);if(e.length<g)return(0,n.vV)("bad cluster size");if(m>=g);else{if(e.filter((e=>e.isEmptyDial())).length<_)return;for(let t=u.length-1,s=0;t>=0;t--){const r=u[t];if(r.isEmptyDial()&&e.some((e=>e.domId===r.domId))&&(u.splice(t,1),++s>=_))break}}e.forEach((e=>e.size=d))}if(m>g){const t=Array(_).fill(0).map(((t,s)=>new o.I((0,c.V)(),e,{size:d}))),s=(0,r.SL)(u,(e=>e.domId===h.domId));s>=0&&u.splice(s+1,0,...t)}return h.size=d,u}}},1484:(e,t,s)=>{"use strict";s.d(t,{M:()=>n,Q:()=>i});var r=s(6683);const i=e=>Math.imul(...n(e));function n(e){switch(e){case r.ZU.V_HALF:return[2,1];case r.ZU.H_HALF:return[1,2];case r.ZU.V_THIRD:return[3,1];case r.ZU.H_THIRD:return[1,3];case r.ZU.V_FOURTH:return[4,1];case r.ZU.H_FOURTH:return[1,4];default:return[e+1,e+1]}}},5294:(e,t,s)=>{"use strict";s.d(t,{O:()=>b,J:()=>v});var r=s(179),i=s(6683),n=s(1962),a=s(9598),o=s(8847),c=s(6004),l=s(2221),d=s(4662),u=s(235),h=s(9180),p=s(4323);const m=self.caches?.open("background_image").catch(p.s6);var g=s(5574),_=s(6202),f=s(865),w=s(9439);let y=d.I.get();async function v(e){if(w.vt)document.documentElement.style.background=document.body.style.background="transparent";else switch(e.BACKGROUND){case i.cG.COLOR:document.body.setAttribute("style",`background: ${e.BACKGROUND_COLOR||"#005B9CFF"}`);break;case i.cG.GRADIENT:document.body.setAttribute("style",e.GRADIENT_CACHE||"");break;case i.cG.URL:t(e.BACKGROUND_URL,!0);break;case i.cG.FILE:t(e.BACKGROUND_DATA,!1);break;case i.cG.BING:y.then((e=>t(e?.current,!1)));break;case i.cG.PAGE:await(0,_.w)(await f.d6);const s="iframe_as_background",r=(0,n.$H)(s)||(0,a.z)("iframe",{src:e.BACKGROUND_PAGE_URL,sandbox:(0,o.jM)(e.BACKGROUND_PAGE_URL),style:"width: 100%; height: 100%; position: absolute; z-index: auto; visibility: hidden;",handlers:{onload:()=>{(0,c.Xm)(r)}}});r.remove(),document.body.insertAdjacentElement("afterbegin",r);break;default:document.body.removeAttribute("style")}async function t(e,t){e&&(t&&(e=await b(e)),document.body.setAttribute("style",`background: url("${e}") no-repeat center center fixed; background-size: cover;`))}}async function b(e){if(!e.startsWith("http"))return e;try{const t=await m;if(!t)return e;let s=await t.match(e);if(s?.ok||(s=await fetch(e,{signal:(0,u.n)((0,h.n)(30))}),t.put(e,s.clone())),await r.YG&&1===(0,g.R)(100)&&async function(){const e=await m;if(e)Promise.all(Array.from(await e.keys()).map((t=>e.delete(t))))}(),s.ok)return URL.createObjectURL(await s.blob())}catch(e){}return e}l.j_.then((e=>{e.BACKGROUND===i.cG.BING&&(v(e),d.I.addOnChangeListener((e=>{e.newValue&&(y=Promise.resolve(e.newValue)),v(l.lw)})))}))},1410:(e,t,s)=>{"use strict";s.d(t,{CL:()=>u,a5:()=>c,oV:()=>h,t3:()=>d});var r=s(2221),i=s(2447),n=s(4559);const a="no-drop";let o=!1;const c={get isTempEnabled(){return o},setTempEnable(){o=!0},get isLocked(){return r.lw.DISABLE_DRAG_AND_DROP&&!c.isTempEnabled},lockDrop(e){e.setData(a,a)},isDropLocked:e=>e.getData(a)===a},l=new i.e("locked_grid_groups",(()=>[]));function d(e){return l.get().includes(e)}function u(e,t){h(e,t);const s=new Set(l.get());t?s.add(e):s.delete(e),l.set([...s])}function h(e,t){(0,n.B)().classList.toggle("grid_locked",t??d(e))}},8198:(e,t,s)=>{"use strict";s.d(t,{B:()=>K});var r=s(5048),i=s(4323),n=s(6799);var a=s(6004),o=s(4590),c=s(7302),l=s(7813),d=s(8303),u=s(9574),h=s(1962),p=s(9598),m=s(6690),g=s(555),_=s(7865),f=s(8698),w=s(3672),y=s(1181),v=s(6830),b=s(2100),E=s(5451),D=s(1879),A=s(6278),I=s(6898),S=s(1470),k=s(1361);class P{node;index;rect;scrollX;scrollY;isLast;constructor(e,t,s,r,i,n){this.node=e,this.index=t,this.rect=s,this.scrollX=r,this.scrollY=i,this.isLast=n}moveToNeighbor(e,t){const s=e[this.index+(t?1:-1)];s&&this.moveTo(s)}moveTo(e){this.node.style.setProperty("transform",`translate(${e.rect.x-this.rect.x}px, ${e.rect.y-this.rect.y}px)`)}static resetAll(e){e.forEach((e=>e.node.style.removeProperty("transform")))}}class R{coolDownPeriodMS;callback;lastCall;_isCool;get isCool(){return this._isCool}constructor(e,t){this.coolDownPeriodMS=e,this.callback=t,this.lastCall=0,this._isCool=!0}execute(e){if(this.checkNow())return this.callback(e)}checkNow(){const e=Date.now();return this._isCool=e-this.lastCall>this.coolDownPeriodMS,!!this._isCool&&(this.lastCall=e,!0)}}var L=s(2846),O=s(5717),C=s(4559),T=s(3074);const x=new k.G;var B=s(6801),N=s(7700),M=s(3457),U=s(6683),G=s(1410);async function z(e){e.preventDefault();const t=(0,r.oR)(e),s=e.dataTransfer;if(!s||!t||G.a5.isDropLocked(s))return;const i=(0,E.l)(e);if(i)await L.M.action("swapDials",{srcGroupId:i.group.id,destGroupId:D.e.id,srcDialIndex:i.dial.index,destDialIndex:(0,r.om)(t),operation:e.shiftKey?"cut":e.ctrlKey?"copy":"swap",gridPlacement:e});else{const e=s.getData("text/uri-list");if(e)return $(t,e);const r=s.getData("text/x-moz-url");if(r){const[e,s]=r.split("\n");return $(t,e,s)}const i=s.files[0];if(i?.type.startsWith("image/")){const e=D.e.dialById(t);if(e?.url)return await(0,B._z)({type:"save_db_image",notify:!0,groupId:D.e.id,url:e.url,img:await(0,N.G)(i)}),e.thumbnail=Object.assign(e.thumbnail||{},{type:U.O8.FILE,value:i.name,background:e.thumbnail?.background,position:U.X.CENTER}),e.visual={...e.visual,padding:M.rM.get()},void await L.M.action("replaceDial",{groupId:D.e.id,dial:e})}if(i&&i.size<10240){const e=await(0,N.T)(i,"readAsText"),s=(0,w.u)(e,"URL=","\n");if(s)return $(t,s)}}}function $(e,t,s){return(0,n.t1)({id:e,dragAndDropUrl:t,dragAndDropTitle:s})}var H=s(2221),F=s(6481),W=s(6664);const V=e=>e.target.closest("a[id]"),K=(()=>{const e=()=>document.documentElement.classList.add("drag_and_drop"),t=()=>document.documentElement.classList.remove("drag_and_drop");let s,k,B,N=!1;return _.W.then((function(){const e=(0,C.O1)(),t=(0,f.U)(800,Y);e.ondragenter=()=>{j(),t.cancel()},e.ondragleave=e=>{t()}})),{onGroupMouseDown:function(o){const c=V(o);if(0!==o.button||!c)return;const l=(0,r.rm)(o)??(0,i.qb)("group not found");k=l,N=!0,s=void 0;const d=L.M.groupById(l);o.preventDefault();const{left:h,top:p}=c.getBoundingClientRect(),g=o.pageX-h,_=o.pageY-p;let f;const w=(0,u.m)((()=>{j(),e(),f=function(){const e=c.cloneNode(!0);return e.removeAttribute("id"),(0,a.LF)(c,e),Object.assign(e.style,{top:(0,m.px)(p),left:(0,m.px)(h),position:"absolute",pointerEvents:"none"}),e}(),document.body.appendChild(f),f.style.zIndex="1",c.style.opacity="0.5"}));document.addEventListener("mouseup",(e=>{if(!N)return;const t=V(e);if(!t||t.isSameNode(c))return v();const s=(0,r.rm)(e),a=(0,r.oR)(e);a?(0,n.t1)({id:a,dragAndDropUrl:(0,r._V)(l),isGroupDrop:!0,dragAndDropTitle:d.name}):(0,i.qS)(s)&&M(e,l),v()}),{capture:!0,once:!0});const y=function(e,t){const s=Date.now();let r=!1;return(...i)=>{if(r||Date.now()-s>t)return r=!0,e(...i)}}((function(e){w();const t=e.pageX-g,s=e.pageY-_;f.style.left=(0,m.px)(t),f.style.top=(0,m.px)(s)}),200);function v(){N=!1,document.removeEventListener("mousemove",y),t(),c.style.removeProperty("opacity"),f&&f.remove(),q()}document.addEventListener("mousemove",y),document.addEventListener("keydown",(e=>{"Escape"===e.key&&v()}),{once:!0})},onGroupAllowDrop:e=>e.preventDefault(),onDragGroupEnd:q,onGroupDrop:M,isGroupDrag:()=>N,onDialAllowDrop:e=>e.preventDefault(),onDragDialStart:async function(t){const i=t.dataTransfer;if(!i)return;if(k=D.e.id,G.a5.isLocked||(0,G.t3)(k)&&!G.a5.isTempEnabled)return G.a5.lockDrop(i);i.dropEffect="move";const n=(0,r.oR)(t),a=D.e.dialById(n);s=n;const c=L.M.groupById(k);if(c.topSites)return void t.preventDefault();i.setData("text/uri-list",a.url||""),i.setData("text/plain",`${n}#${D.e.id}`),b._C.register(U),U(),e(),c.grid?B.startDrag(t):c.hasDynamicLayout()&&function(e){e.dataTransfer.setDragImage(new Image,0,0);let t,s=!1;x.addListener((0,C.O1)(),"change",(e=>s=!0));const r=(0,C.B)();r.classList.remove("stopped_moving"),x.addListener(r,"drop",(e=>{s||(0,y.jo)(e)}),{capture:!0,once:!0}),x.addListener(document.documentElement,"dragend",(async e=>{if(x.clearAll(),"none"===e.dataTransfer?.dropEffect)return(0,T.$8)();if(!s&&t){const e=D.e.getCurrentGroup(),s=O.M6.dialsToClusters(e.dials),[r]=s.splice(c,1);if(r){s.splice(t.index,0,r);const n=e.dials=O.M6.clustersToDials(s);i.forEach((e=>e.node.style.setProperty("pointer-events","none"))),await L.M.action("updateGroup",{groupId:e.id,update:{dials:n}},(0,o.tr)("save_dial_moved",`${e.name} / ${r.dial?.name}`))}}}),{capture:!0,once:!0});const i=Array.from(document.querySelectorAll("#dials > a")).map(((e,t,s)=>new P(e,t,(0,A.Nf)(e),r.scrollLeft,r.scrollTop,t===s.length-1))),n=e.target.closest("#dials > a"),a=i.find((e=>e.node===n)),c=i.indexOf(a);{const e=new R(40,(e=>{if(s||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return s=!0,P.resetAll(i),void r.classList.add("stopped_moving");const n=r.scrollLeft,o=r.scrollTop;if(t=i.find((t=>(0,I.U)((0,S.FP)(t.rect,{x:n-t.scrollX,left:n-t.scrollX,right:n-t.scrollX,y:o-t.scrollY,top:o-t.scrollY,bottom:o-t.scrollY,width:0,height:0}),{left:e.x,top:e.y,right:e.x,bottom:e.y}))),!t||t.isLast)return;const l=t.index<c,d=i.slice(...l?[t.index,c]:[c+1,t.index+1]);P.resetAll(i),d.forEach((e=>e.moveToNeighbor(i,l))),a.moveTo(t)}));x.addListener((0,C.uT)(),"dragover",(t=>e.execute(t)))}}(t)},onDragDialEnd:q,onDialDrop:z,setupGridDragAndDrop:e=>B=e,onContainerDragOver:function(e){e.preventDefault();const t=D.e.getCurrentGroup(),s=t.getLastEmptyDial();if(t.grid&&B&&s){let r=!1;if(e.target===e.currentTarget||e.target.closest(".is_empty_dial")){B.placeItem(s,e)&&(r=!0)}const i=k!==t.id;W.J.showEmptyDial(r&&i)}}};async function M(e,t){e.preventDefault();const s=(0,r.U0)((0,r.nE)(e.composedPath()));if(e instanceof DragEvent){const t=(0,E.l)(e);t&&await(0,F.s)(t.dial.index,t.group.id,s)}else(0,i.Et)(t)&&(0,i.Et)(s)&&t!==s&&L.M.action("moveGroup",{groupId:t,targetGroupId:s})}function U(e=D.e.getCurrentGroup()){$();const t=e.dials.filter((e=>e.isNotEmptyDial()&&(e.domId!==s||k!==D.e.id)));t.forEach((e=>{(0,h.$H)(e.domId).querySelector(`.${g.AU.container}`).insertAdjacentElement("afterbegin",(0,p.z)("img",{class:"dial_float_label drag_drop_advanced",src:(0,c.Z)("svg/multi (1).svg"),handlers:{...(0,l.lU)("transform: scale(1.2, 1.2);",l.O$.DRAG),ondrop:async e=>{(0,y.jo)(e),(0,d.E)(e),(0,d.O)(e);const{AdvancedDropMenu:t}=await(0,v.V)();await t.show(e)}},textContent:(0,o.tr)("drag_group_hover_open")}))})),t.filter((e=>e.isGroupDial())).forEach((e=>{const t=(0,h.$H)(e.domId).querySelector(`.${g.AU.container}`),s=(0,p.z)("img",{class:"dial_float_label drag_group_hover",handlers:{...(0,l.lU)("transform: scale(1.2, 1.2);",l.O$.DRAG),ondragover:t=>{const s=(e=>e.isGroupDial()?parseInt((0,w.u)(e.url,"#","",!0)):void 0)(e);N||D.e.activateFromEventWithDelay(t,s)}},title:(0,o.tr)("drag_group_hover_open"),src:(0,c.Z)("svg/inside.svg")});t.insertAdjacentElement("afterbegin",s)}))}function $(){(0,C.uT)().querySelectorAll(".drag_group_hover,.drag_drop_advanced").forEach(h.bf)}function K(e){document.querySelectorAll("#groups > a:not([href]), #groups > a.topSites").forEach((t=>{e?t.removeAttribute("style"):t.setAttribute("style","pointer-events: none")}))}function j(){if(K(!1),!H.lw.DISABLE_AUTO_SHOW_GROUPS){const e=(0,C.O1)().style;e.height="auto",e.zIndex="1",e.backgroundColor=H.lw.TEMPLATE_COLOR||"black"}}function q(){W.J.showEmptyDial(!1),K(!0),b._C.unregister(U),$(),t(),Y()}function Y(){if(!H.lw.DISABLE_AUTO_SHOW_GROUPS){const e=(0,C.O1)().style;e.removeProperty("height"),e.removeProperty("z-index"),e.backgroundColor=""}}})()},5451:(e,t,s)=>{"use strict";s.d(t,{l:()=>a});var r=s(5048),i=s(4323),n=s(2846);function a(e){const[t,s]=e.dataTransfer?.getData("text/plain").split("#")||[],a=parseInt(s);if((0,r.Mo)(t)&&(0,i.Et)(a)){const e=n.M.groupById(a);return{dial:e.dials[(0,r.om)(t)],group:e}}}},6481:(e,t,s)=>{"use strict";s.d(t,{s:()=>a,w:()=>o});var r=s(4323),i=s(8794),n=s(2846);async function a(e,t,s){t!==s&&await n.M.action("swapDials",{srcGroupId:t,destGroupId:s,srcDialIndex:e,destDialIndex:-1,operation:"swap"})}async function o(e,t,s){const a=await i._V.get()||(0,r.qb)("source dial not found"),[{dialIndex:o,operation:c,groupId:l}]=a;"cut"!==c&&"swap"!==s||await i._V.remove(),"cut"===c&&"paste"===s?await n.M.action("moveDials",{srcGroupId:l,destGroupId:e,srcDialIndexes:a.map((e=>e.dialIndex)),destDialIndex:t,operation:"move"}):await n.M.action("swapDials",{srcGroupId:l,destGroupId:e,srcDialIndex:o,destDialIndex:t,operation:"swap"===s?"swap":"replace"===s||"paste"===s?c:(0,r.qb)("unknown op")})}},6119:(e,t,s)=>{"use strict";s.d(t,{L:()=>p,c:()=>m});var r=s(6795),i=s(6690),n=s(2016),a=s(179),o=s(9439),c=s(2221),l=s(4559),d=s(6664),u=s(1410),h=s(6683);function p({id:e,dials:t,rows:s,cols:p,ratio:m,dynamic:g,list:_,grid:f,options:w},y=(0,l.uT)()){const v=f&&new d.J(f,e,y);v&&(s=v.rows,p=v.cols);const b=(0,o.i7)(w),E=c.lw.DIAL_BORDER_TYPE===h.NO.solid?1:0,D=!!m||!!f?.position;{const e=y.parentElement,t=e.classList;t.toggle("list",!!_),t.toggle("fixed",D),t.toggle("dynamic",!(!g&&!_)),t.toggle("grid",!!f);const r=e.style,n=e=>Math.floor(1e4/e)/100;r.setProperty("--dial-width",`${n(p)}%`),r.setProperty("--dial-height",`${n(s)}%`),r.setProperty("--group-cols",`${p}`),r.setProperty("--group-rows",`${s}`);const a=b-E;r.setProperty("--dial-padding",(0,i.px)(a)),r.setProperty("--small-dials-gap",(0,i.px)(2*a*c.lw.SPLIT_DIAL_GAP/100))}const A=y.style;["grid-template-columns","grid-template-rows","grid-auto-rows","width","height","max-width","max-height","margin","columns"].forEach((e=>A.removeProperty(e)));const[I,S,k]=m||[1,1,!1],P=k||f?.position===r.Cr.scroll;P&&(A.setProperty("margin","0"),A.setProperty("max-height","none"));const R=p*I,L=s*S;if((m||f?.position)&&(A.setProperty("height",100*L/R+"vw"),P||A.setProperty("max-width",100*R/L+"vh")),g){const[e,t]=[g.width,g.height].map((e=>(n.O&&!o.vt?e/2:e)+2*E));A.setProperty("grid-template-columns",`repeat(auto-fill, ${e}px)`),A.setProperty("grid-template-rows","initial"),A.setProperty("grid-auto-rows",`${t}px`),A.setProperty("max-width",(e+2*b)*p+2*b+"px")}else _?A.setProperty("columns",`${p} ${_.width}px`):f&&(0,u.oV)(e);if(!g&&(0,a.ik)()){const e=window.innerHeight>window.innerWidth,{height:t,width:s}=y.getBoundingClientRect(),r=(0,l.O1)().getBoundingClientRect().bottom,i=Array.from(y.children).slice(0,g||_||f?-1:void 0),n=()=>i.map((e=>e.getBoundingClientRect())),a=n().reduce(((e,{width:t})=>e+t),0)/(i.length||1),o=c.lw.ANDROID_MIN_DIAL_SIZE/a;o>1&&(["max-width","width"].forEach((t=>A.setProperty(t,s*(D||e?o:Math.max(1,o/2))+"px"))),["max-height","height"].forEach((s=>A.setProperty(s,t*(D?o:e?Math.max(1,o/2):o)+"px"))),n().some((({y:e})=>e<r))&&A.setProperty("margin-top","0"))}}function m(e,t,s){s&&e.classList.forEach((t=>t.startsWith("thumbnail_position_")&&e.classList.remove(t))),e.classList.add(`thumbnail_position_${t.position}`),t.background&&(e.style.background=t.background)}},3074:(e,t,s)=>{"use strict";s.d(t,{$8:()=>i,jE:()=>n,yc:()=>r});const r=e=>{self.dispatchEvent(new CustomEvent("__drawDials",{detail:e}))},i=()=>{self.dispatchEvent(new CustomEvent("__redrawDials"))},n=()=>{self.dispatchEvent(new CustomEvent("__redrawLastDials"))}},1641:(e,t,s)=>{"use strict";s.d(t,{Wx:()=>We,Pz:()=>Ge,NW:()=>Ue});var r=s(1879),i=s(9510),n=s(4323),a=s(6683),o=s(6799),c=s(4590),l=s(1285),d=s(2100),u=s(8198),h=s(8794),p=s(9114),m=s(8671),g=s(7302),_=s(2346),f=s(7080),w=s(1471),y=s(8408),v=s(6672),b=s(2542),E=s(364),D=s(7253),A=s(4424),I=s(1484),S=s(3331),k=s(6810),P=s(6202),R=s(865),L=s(1962),O=s(9598),C=s(1181);function T(e,t){if(!e)return;const s=t.split(".");if(1===s.length)return e[t];for(let t=0;t<s.length;++t){if(!e)return;e=e[s[t]]}return e}var x=s(6004),B=s(2466),N=s(555),M=s(6777),U=s(6258),G=s(3694),z=s(6119),$=s(5048);function H(e){const t=(0,$.C9)(e.composedPath());if(t){const s=(0,$.om)(t);if("Enter"===e.key)return(0,o.t1)({id:t});const i=r.e.getCurrentGroup(),n=i.dials.length,a=function(e,t,s,r){switch(e.key){case"ArrowRight":++t===r&&(t=0);break;case"ArrowLeft":--t<0&&(t=r-1);break;case"ArrowDown":(t+=s)>=r&&(t=++t%s)===r&&(t=0);break;case"ArrowUp":t?t-=s:t=r-1,t<0&&(t+=r-1)}return t}(e,s,i.cols,n);(0,L.$H)((0,$.k6)(a)).focus()}}var F=s(5022);var W=s(2221),V=s(3074),K=s(5076),j=s(9439);const q=new Set,Y=e=>!!e&&q.has((0,$.Ty)(e));function J(){j.vt||((0,L.if)(document.getElementsByClassName(N.AU.is_online)),q.forEach((e=>{const t=Ue.get(e);if(t){(t.getElementsByClassName(N.AU.head).item(0)||t).appendChild((0,O.z)("div",{class:N.AU.is_online}))}})))}W.j_.then(Q),browser.webNavigation.onCompleted.addListener((({url:e,frameId:t})=>0===t&&e.startsWith("http")&&Z())),browser.tabs.onRemoved.addListener((()=>(0,n.BK)(100).then(Z)));let X=0;async function Z(){if(X++>100)throw"infinite loop?";await Q(),J()}async function Q(){if(W.lw.ACTIVE_PAGE_DETECTION){const e=(await browser.tabs.query({})).filter((e=>!e.hidden));q.clear(),e.forEach((e=>e.url&&q.add((0,$.Ty)(e.url))))}}var ee=s(4069);async function te(e){const t="auxclick"===e.type&&e.button===M.w.MIDDLE,s="click"===e.type,i=e.target,c=i.closest($.l8),l=i.closest(".dials-container");if("mousedown"===e.type)return void(e.button===M.w.MIDDLE&&!1===c?.classList.contains(N.oq.is_empty_dial)&&e.preventDefault());if(!l||!c)return;const d=c.classList;if(d.contains(N.oq.is_empty_dial))return void(s&&(d.contains(N.oq.is_plus)?(0,o.t1)({id:c.id}):W.lw.DISABLE_QUICK_EDIT&&!ee.m0||(d.add(N.oq.is_plus),c.addEventListener("mouseleave",(async()=>d.remove(N.oq.is_plus)),{once:!0}))));const u=[];let h=!1;const p=r.e.dialById(c.id);if(!p)return;const m=p.settings||{},g=m.OPEN_IN_CONTAINER||r.e.getCurrentGroup().container||"",_=m.OPEN_DIAL_IN;if(F.$.isActive());else if(p.isSingleLinkDial())u.push(p.url);else if(p.isMultiDial()){const e=i.closest(".list_item_a");if(e)switch(p.multi.linkAction){case a.Q0.openLink:u.push(e.href);break;case a.Q0.openAll:h=!0,u.push(...p.multi.links.map((e=>e.url)))}else switch(p.multi.titleAction){case a.C2.openAll:u.push(...p.multi.links.map((e=>e.url))),h=!0;case a.C2.nothing:}}else if(p.isTopSitesDial())(0,K.J)(i.closest(".list_item_a"),(e=>u.push(e.href)));else if(p.isSessionDial()){if(t||s){if(!t)return(0,C.jo)(e),void await(0,K.J)(i.closest("li[data-session-id]")?.dataset.sessionId,(async e=>{await p.restoreSession(e).catch(n.lQ),(0,V.jE)()}));(0,K.J)(i.closest(".list_item_a"),(e=>u.push(e.href)))}}else d.contains(N.oq.is_search_dial);W.lw.ACTIVE_PAGE_DETECTION&&1===u.length&&Y(u[0])&&s?((0,C.jo)(e),async function(e){try{const t=(0,$.Ty)(e),s=(await browser.tabs.query({})).find((e=>(0,$.Ty)(e.url)===t));await Promise.all([browser.windows.update(s.windowId,{focused:!0}),browser.tabs.update(s.id,{active:!0})]),await browser.tabs.remove(R.aU)}catch(t){browser.tabs.update({url:e})}}(u[0])):(t||s)&&u.length&&(g||h||[a.TI.NEW_TAB,a.TI.NEW_FOCUSED_TAB,a.TI.NEW_WINDOW,a.TI.NEW_PRIVATE_WINDOW].includes(_)||W.lw.OPEN_ALWAYS_NEW_WINDOW||W.lw.OPEN_ALWAYS_NEW_TAB&&(!p.isGroupDial()||W.lw.OPEN_ALWAYS_INCLUDE_GROUP_DIALS))&&((0,C.jo)(e),(0,U.y)({links:u,containerName:g,active:!t&&(_===a.TI.NEW_FOCUSED_TAB||W.lw.OPEN_ALWAYS_FOCUSED),inNewTab:t||W.lw.OPEN_ALWAYS_NEW_TAB||_===a.TI.NEW_FOCUSED_TAB||_===a.TI.NEW_TAB,nextToCurrent:!!W.lw.OPEN_ALWAYS_NEXT_TO_CURRENT,stopOpenerTabId:W.lw.OPEN_ALWAYS_STOP_OPENER_ID,inNewWindow:W.lw.OPEN_ALWAYS_NEW_WINDOW||_===a.TI.NEW_WINDOW,inIncognitoWindow:_===a.TI.NEW_PRIVATE_WINDOW}))}var se=s(8303),re=s(8847),ie=s(2846),ne=s(5524),ae=s(8641),oe=s(6317),ce=s(4252),le=s(7283),de=s(6690),ue=s(6684),he=s(8032),pe=s(489),me=s(2806),ge=s(9574),_e=s(1650),fe=s(519),we=s(8168);function ye(e="",t=""){return[t,e]=[t,e].map((e=>(0,we.WL)(e.toLowerCase()))),e.includes(t)}var ve=s(4487),be=s(5628);class Ee{weather;constructor(e){this.weather=e}buildWeatherControls(e,{backgroundColor:t,textColor:s}){const r=this,i=e[this.getWeatherUUID()],a=[function(e){if(!e||!r.weather.current)return;const{minTemp:t,maxTemp:s}=r.extractMinMaxTemp(e.forecast,1e3*e.current.dt,{min:e.current.main.temp_min,max:e.current.main.temp_max});return u(!1,e?.current,{minTemp:t,maxTemp:s})}(i),...Array.from({length:this.weather.forecastDays},((e,t)=>function(e,t){if(!e?.forecast)return;const s=new Date;s.setDate(s.getDate()+t+1);const i=e.forecast.list.filter((e=>new Date(1e3*e.dt).getDate()===s.getDate())),n=i.find((e=>new Date(1e3*e.dt).getHours()>=12))||i.at(-1);if(!n)return;return u(!0,n,r.extractMinMaxTemp(e.forecast,1e3*n.dt))}(i,t)))].filter(n.zz),o=(0,O.z)("ul",{class:N.Ki.dial_list_container,style:`background: ${t};`},a);{const e=()=>{o.scrollWidth>o.clientWidth&&(o.classList.add("small_layout"),window.removeEventListener("resize",e))};window.addEventListener("resize",e),d.RT.then(e)}return o;function l(e){const t=new Date(1e3*e);return`${(0,we.CF)(t.getHours())}:${(0,we.CF)(t.getMinutes())}`}function u(e,t,{minTemp:i,maxTemp:n}){return(0,O.z)("li",{class:"flex multi_dial_item",title:`\n${e?r.getWeekDayName(1e3*t.dt):`\n${(0,c.tr)("w_update_date")}:\t${l(t.dt)}\n${(0,c.tr)("w_current_temp")}:\t${r.printTemp(t.main.temp)}\n`}\n${(0,c.tr)("w_max_temp")}:\t${r.printTemp(n)}\n${(0,c.tr)("w_min_temp")}:\t${r.printTemp(i)}\n\n${(0,c.tr)("w_clouds")}:\t${t.clouds.all}%\n${(0,c.tr)("w_wind_speed")}:\t${r.printSpeed(t.wind.speed)}\n\n${(0,c.tr)("w_humidity")}:\t${t.main.humidity}%\n${(0,c.tr)("w_pressure")}:\t${t.main.pressure} hPa\n\n${e?"":`\n${(0,c.tr)("w_sunrise")}:\t${l(t.sys.sunrise)}\n${(0,c.tr)("w_sunset")}:\t${l(t.sys.sunset)}\n`.trim()}\n`.trim(),style:`color: ${s};`},[(0,O.z)("div",{class:"w_basic"+(e?" w_forecast":"")},[(0,O.z)("div",{class:"w_day",textContent:`${e?r.getShortWeekDayName(1e3*t.dt):""}`}),(0,O.z)("div",{class:"w_icon"},[(0,O.z)(be.C.tagName,{class:"w_clouds_progress",progress:t.clouds.all,dark:(0,ce.g)(),stroke:"2",strokeDark:"#777",strokeLight:"#aaa",strokeBackgroundDark:"#7774",strokeBackgroundLight:"#aaa4",diameter:2.7*parseFloat(getComputedStyle(document.documentElement).fontSize),style:""}),(0,O.z)("img",{class:"w_weather_icon",src:`/icons/weather/${t.weather[0].icon}@2x.png`})]),(0,O.z)("div",{class:"w_temp",textContent:r.printTemp(t.main.temp)}),(0,O.z)("div",{class:"w_detail w_temp_max"},[(0,O.z)("img",{class:"w_s_icon",src:"/icons/weather/max.svg"}),(0,O.u)("span",r.printTemp(n))]),(0,O.z)("div",{class:"w_detail w_temp_min"},[(0,O.z)("img",{class:"w_s_icon",src:"/icons/weather/min.svg"}),(0,O.u)("span",r.printTemp(i))]),(0,O.z)("div",{class:"w_detail w_wind"},[(0,O.z)("img",{class:"w_s_icon",src:"/icons/weather/wind.svg"}),(0,O.u)("span",r.printSpeed(t.wind.speed).slice(0,-4)),(0,O.z)("img",{class:"w_s_icon w_ms",src:r.weather.units===ve.z.imperial?"/icons/weather/mh.svg":"/icons/weather/ms.svg"})]),(0,O.z)("div",{class:"w_detail w_clouds"},[(0,O.z)("img",{class:"w_s_icon",src:"/icons/weather/cloud.svg"}),(0,O.u)("span",`${t.clouds.all}%`)])])])}}extractMinMaxTemp(e,t,s){const r=new Date(t),i=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1,0,0,0,0).getTime(),n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0).getTime(),a=e.list.filter((e=>1e3*e.dt>=n&&1e3*e.dt<i));return{minTemp:Math.min(...s?[s.min]:[],...a.map((e=>e.main.temp_min))),maxTemp:Math.max(...s?[s.max]:[],...a.map((e=>e.main.temp_max)))}}getShortWeekDayName(e){return new Date(e).toLocaleString(browser.i18n.getUILanguage(),{weekday:"short"}).slice(0,3)}getWeekDayName(e){return new Date(e).toLocaleString(browser.i18n.getUILanguage(),{weekday:"long"})}printTemp(e){return`${Math.round(e)}${this.getUnits()}`}printSpeed(e){return`${e.toFixed(1)} ${this.getSpeedUnits()}`}getUnits(){switch(this.weather.units){case ve.z.imperial:return"°F";case ve.z.standard:return"K";default:return"°C"}}getSpeedUnits(){return this.weather.units===ve.z.imperial?"m/h":"m/s"}getWeatherUUID(){return`${this.weather.units}_${this.weather.lat}_${this.weather.lon}`}}var De=s(2780),Ae=s(6830),Ie=s(2036),Se=s(3210),ke=s(2541),Pe=s(4559),Re=s(1481),Le=s(6664),Oe=s(539);const Ce="#F7F7F7",Te="#333333",xe=new De.v("one_by_last_one"),Be=()=>We($e);window.addEventListener("__drawDials",(e=>We(e.detail))),window.addEventListener("__redrawDials",Ge),window.addEventListener("__redrawLastDials",Be);const Ne=(0,ge.m)((()=>browser.sessions?.onChanged.addListener((()=>{r.e.getCurrentGroup().dials.find((e=>e.isSessionDial()))&&Be()})))),Me=(0,O.z)("div",{class:"empty_grid_help",textContent:`${(0,c.tr)("label_right_click")} / ${(0,c.tr)("cm_create_dial")}`}),Ue=new Map;function Ge(){return xe.addWork(ze)}async function ze(){await r.e.promise;const e=h.ci.get(),t=r.e.getCurrentGroup();if(!await t.onBeforeOpen())return await(0,l.N)(ie.M.GROUPS),void await We(t,{imagesHash:{}});W.lw.GROUP_NAME_AS_TITLE&&ke.s.set(t.name+""),(0,oe.s)(t),await(0,i.$)(t.id).then((async s=>{await(0,l.N)(ie.M.GROUPS),await We(t,{imagesHash:s,weatherData:await e})}),(async e=>{(0,ne.vV)("getImages failed",e),(0,ae.H)().then((t=>t.ErrorHandler.showCriticalErrorMessage("Error getting thumbnails:","get_images_failed",`${(0,n.Gv)(e)&&[T(e,"target.error.name"),T(e,"target.error.message")]}`))),await(0,l.N)(ie.M.GROUPS),await We(r.e.getCurrentGroup(),{noImages:!0})})),(0,d.GZ)()}let $e,He={},Fe={};async function We(e,{weatherData:t=He,imagesHash:s=Fe,noImages:r=!1,overrideImagesHash:i={}}={}){Fe=s,He=t,$e=e;const l=Object.entries(i);if(l.length){s={...s};for(const[t,r]of l){const i=s[t]||{url:t,group:e.id,version:0};s[t]=Object.assign({},i,r)}}const T=(0,K.J)(document.activeElement instanceof HTMLInputElement&&document.activeElement||null,(e=>({value:e.value,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,placeholder:e.placeholder,dialId:e.closest(".dial")?.id})));Se.lc&&((e=e.clone()).list={width:360,direction:a.PX.row},e.dynamic=void 0,e.ratio=void 0,e.rows=4);const M=e.id,U=(0,G.Sy)(),F=(0,ce.g)()?Te:Ce,V=W.lw.DIAL_HEADER_STYLE===a.xk.transparent,q=!!e.list,Y=!!e.topSites,X=e.hasDynamicLayout(),Z=!!e.grid,Q=e.colColor,ne=e.rowColor,ae=ie.M.METADATA.getUserTags(),oe=[Promise.resolve()],ge=W.lw.DIAL_NUMBERS?(0,S.d)(M):0,we=(e.rows,e.cols),[ve,be]=await Promise.all([e.getDialsToDraw(),(0,Ie.FJ)(),R.d6]);Ue.clear();const De=[],ke=e=>{De.push(e)},xe=ve.length;let Ge,ze=0,We=0;const Ke=document.createDocumentFragment();for(let i=0;i<xe;i++){const l=ve[i],d=i===xe-1,S=l.size||0,k=l.url||"",T=s[k]||{},M=l.type===a.kh.URL,H=l.type===a.kh.GROUP,J=l.thumbnail||h.fX,te=J.background||F,ie=l.settings||{},De=l.visual||{},Ie=ie.OPEN_IN_CONTAINER||"",Se=Ie||e.container||"",Pe=T.iconBlobURL||T.icon,Le=J.type===a.O8.URL?J.value:J.type===a.O8.BLANK?L.RO:T.imgBlobURL||T.img,Me=!1,$e=document.createElement("a");$e.tabIndex=0,$e.id=l.domId,$e.className="dial",Z&&$e.style.setProperty("grid-area",l.gridAreaName),M&&($e.classList.add(N.oq.is_url_dial),k&&Ue.set((0,$.Ty)(k),$e));let He=null;if(S===a.ZU.NORMAL||q||Z?He=Ke.appendChild($e):(ze?ze--:(ze=(0,I.Q)(S)-1,Ge=document.createElement("a"),Ge.className=`dial dials small_dials small_ds_${S}`,He=Ke.appendChild(Ge)),Ge.appendChild($e)),He){const e=We++;if(!X&&!Z){const t=e=>{He.classList.add("with_color");const t=He.style;t.position="relative",t.backgroundColor=e};Q&&(0,K.J)(Q[(0,A.W)(e,we)],t),ne&&(0,K.J)(ne[(0,A.q)(e,we)],t)}}const Fe=document.createElement("div");Fe.className=N.AU.container;const je=document.createElement("div");je.className=N.AU.head;const qe=document.createElement("div");if(qe.className=N.AU.body,Fe.appendChild(je),Fe.appendChild(qe),$e.appendChild(Fe),(q?Fe:V?qe:Fe).classList.add(N.oq.border_target),De.titleBackground&&(je.style.background=De.titleBackground),De.titleColor?je.style.color=De.titleColor:De.titleBackground&&(je.style.color=(0,E.U)({hexColor:De.titleBackground},{white:Ce,black:Te})),l.isEmptyDial())$e.classList.add(N.oq.is_empty_dial),X&&d&&$e.classList.add(N.oq.is_plus);else{if($e.draggable=!Y,k?$e.href=k:$e.removeAttribute("href"),(W.lw.ON_HOVER_SHOW_URL||l.note||De.noTitle)&&($e.title=[De.noTitle&&l.name,(W.lw.ON_HOVER_SHOW_URL||De.noTitle)&&l.url,l.note].filter(n.zz).join("\n")),l.distraction&&$e.classList.add("distraction"),De.noTitle&&!q)$e.classList.add("no_dial_title");else{if(je.title=l.name,!De.noIcon){const e=document.createElement("img");e.src=L.RO,l instanceof pe.z&&l.styleIcon(e,Y?l.thumbnail?.value:Pe),e.className=N.AU.icon,je.appendChild(e)}const e=document.createElement("span");if(je.appendChild(e),e.textContent=l.name||"",l.name||(e.style.margin="0"),e.className=N.AU.name,Ie&&(0,D.U6)(e,Ie),ie.TAG_ID){const e=ae.find((e=>e.id===ie.TAG_ID));if(e){const t=document.createElement("img");t.className=N.AU.tag,t.title=e.name,t.src=L.RO,t.setAttribute("style",e.getIconStyle()),je.appendChild(t)}}if(W.lw.DIAL_NUMBERS){const e=document.createElement("i");e.className=N.AU.dialNumber,e.textContent=`#${ge+i+1}`,je.appendChild(e)}}if(l.type===a.kh.LIVE&&be&&!j.vt){$e.classList.add(N.oq.is_live_dial);const{hideScrollbars:t,noInteraction:s}=l.live||{};(0,P.w)(R.aU);const r=(0,O.z)("iframe",{draggable:!1,src:k,name:`live_dial_${i}`,handlers:{onclick:e=>e.stopPropagation()}});l.settings?.NO_SCRIPT&&r.setAttribute("sandbox",""),t&&r.addEventListener("load",(()=>(0,B.K)(R.aU,H,{frameName:r.name}))),qe.appendChild(r),qe.style.setProperty("display","block"),qe.style.setProperty("overflow","hidden");const n=t=>{if(t&&!r.isConnected)return window.removeEventListener("resize",n);const{width:i,height:a}=(0,_.L)(e,l,(0,Oe.c)(),window.innerWidth,window.innerHeight,1);q&&qe.style.setProperty("height",(0,de.px)(a));const o=l.crop||(0,re.fd)(W.lw,i,a),c=o.scale*i/(1e6*window.devicePixelRatio);r.setAttribute("style",`\n${(0,re.v0)(o,i/window.devicePixelRatio)}\nmin-width: ${100/c}%;\nmin-height: ${100/c}%;\n${s?"pointer-events: none;":""}`)};n(),window.addEventListener("resize",n)}else if(l.type===a.kh.TEXT&&l.text){$e.classList.add(N.oq.is_text_dial);const e=(0,E.U)({hexColor:te}),t=document.createElement("textarea");t.className=N.AU.textDial,t.value=l.text.value,t.readOnly=!0,t.style.backgroundColor=te,t.style.color=e,l.text.CLICK_TO_CLIPBOARD&&($e.onclick=e=>{(0,m.l)(l.text.value);const t=(0,O.z)("span",{class:"dial_float_label text_dial_copied",textContent:(0,c.tr)("label_copied")});qe.appendChild(t),(0,x.mj)(t,{animate:!0,time:800,removeAfter:!0})}),qe.ondblclick=()=>(0,o.t1)({id:l.domId}),qe.appendChild(t)}else if(l.type===a.kh.SEARCH){$e.classList.add(N.oq.is_search_dial,N.oq.has_list);const e=(0,E.U)({hexColor:te},{white:Ce,black:Te}),t=(l.providers||[]).slice(...be?[]:[0,2]),r=[];let i="";const a=e=>{i=e.value,r.forEach((({input:t,arrow:s,getSearchURL:r})=>{const i=t===e,n=!t.value;s.style.removeProperty("display"),s.firstElementChild.style.opacity=i||!n?"0.7":"0.2",(i||n)&&(s.href=r(e))}))},o=(0,O.z)("ul",{class:N.Ki.dial_list_container,style:`background: ${te};`,handlers:{onclick:C.dG,onauxclick:C.dG}},t.map((e=>(0,b.Z)(e)?e:Object.assign({name:(0,c.tr)(`s_${e.type.toLowerCase()}`)},f.c3[e.type]))).map((t=>{const o=(e=u)=>{const s=e.value||i;return t.url.replace(/%s/g,t.raw?s:window.encodeURIComponent(s))},l=(0,v.bZ)(t.url);let d,u;Promise.resolve().then((()=>r.push({input:u,arrow:d,getSearchURL:o})));const h=t.icon||s[t.url]?.iconBlobURL||s[t.url]?.icon;return(0,O.z)("li",{class:"flex"},[Ve(Se,l,ie.OPEN_DIAL_IN,(0,O.z)("a",{href:l,tabindex:-1},[(0,O.z)("img",{class:"list_item_icon",src:h||L.RO,style:h?"":(0,le.H)(fe.mv)})])),u=(0,O.z)("input",{style:`color: ${e}`,tabindex:0,placeholder:t.name,draggable:!1,handlers:{oncontextmenu:C.dG,onmouseenter:()=>$e.draggable=!1,onmouseleave:()=>$e.draggable=!0,ondragstart:(0,C.do)(n.lQ),onkeydown:(0,w.MO)({stopPropagation:!0,onEnter:e=>(0,y.K)(o(),{inNewTab:e.ctrlKey,active:!e.ctrlKey,nextToCurrent:!0,cookieStoreId:(0,D.Jz)(Se)})}),oninput:()=>a(u)}}),d=Ve(Se,o,ie.OPEN_DIAL_IN,(0,O.z)("a",{href:l,tabindex:-1,style:"display: none",title:(0,c.tr)("search_provider_tip")},[(0,O.z)("img",{src:(0,g.Z)("svg/right(1).svg"),style:"opacity: 0.5",class:"open_search_icon "+(e===Ce?"invert":"")})]))])})));$e.onclick=e=>{e.composedPath().every((e=>e!==o))&&(0,x.iT)("input",o,(e=>e.focus()))},qe.appendChild(o)}else if(l.type===a.kh.MULTI&&l.multi&&l instanceof me.U){$e.classList.add(N.oq.is_multi_dial,N.oq.has_list);const e=(0,E.U)({hexColor:te},{white:Ce,black:Te}),t=l.getLinksAsDials(),r=(0,O.z)("ul",{class:N.Ki.dial_list_container,style:`background: ${te};`},t.map(((t,r)=>{const i=s[t.url]||{},n=i.iconBlobURL||i.icon;let a;const o=(0,O.z)("li",{"data-index":r,class:"flex multi_dial_item",title:`${t.name}\n${t.url}`},[a=(0,O.z)("a",{href:t.url,class:"list_item_a flex-space-between"+(ee.m0?"":"_10"),tabindex:-1},[t.styleIcon((0,O.z)("img",{class:"list_item_icon",src:L.RO}),n),(0,O.z)("span",{class:"list_item_name",textContent:t.name,style:`color: ${e}`})])]);return Ue.set((0,$.Ty)(t.url),a),o})));qe.appendChild(r)}else if(l.type===a.kh.TOP_SITES){browser.topSites||($e.onclick=()=>he.O.askForPermission().then(Be)),$e.classList.add(N.oq.is_top_sites_dial,N.oq.has_list);const e=(0,E.U)({hexColor:te},{white:Ce,black:Te});oe.push((async()=>{const t=await l.getTopSites(),s=(0,O.z)("ul",{class:N.Ki.dial_list_container,style:`background: ${te};`},t.map(((t,s)=>(0,O.z)("li",{"data-index":s,class:"flex multi_dial_item",title:`${t.name}\n${t.url}`},[(0,O.z)("a",{href:t.url,class:"list_item_a flex-space-between"+(ee.m0?"":"_10"),tabindex:-1},[(0,O.z)("img",{class:"list_item_icon",src:t.icon||fe.rH}),(0,O.z)("span",{class:"list_item_name",textContent:t.name,style:`color: ${e}`})])]))));qe.appendChild(s)})())}else if(l.type===a.kh.SESSION){_e.v&&Ne(),browser.sessions||($e.onclick=()=>ue.F.askForPermission().then(Be)),je.addEventListener("click",(e=>{const t=je.getElementsByClassName(N.AU.name).item(0);t.textContent="";const s=()=>qe.querySelectorAll("li").forEach((e=>{const t=[e.textContent,e.querySelector("a")?.href].find((e=>e&&ye(e,r.value)));return e.classList.toggle("hidden",!t)})),r=(0,O.z)("input",{type:"text",placeholder:(0,c.tr)("search_search"),style:"color: var(--text-white-theme); background: transparent; border: none; width: 100%",handlers:{onkeydown:C.dG,oncontextmenu:C.dG,onkeyup:(0,w.MO)({onEsc(){r.value="",s()},onKey:s})}});t.appendChild(r),r.focus()}),{once:!0}),$e.classList.add(N.oq.is_session_dial,N.oq.has_list);const e=(0,E.U)({hexColor:te},{white:Ce,black:Te});oe.push((async()=>{const t=await l.getRecentlyClosed(),s=(0,O.z)("ul",{class:N.Ki.dial_list_container,style:`background: ${te};`},t.map(((t,s)=>{const{tab:r,window:i,lastModified:n}=t,a=t=>{const r=t.favIconUrl?.startsWith("chrome://mozapps/skin/extensions/")?"icons/tags/tag (25).svg":t.favIconUrl?.startsWith("chrome://devtools/skin/images/")?"/svg/speed (2).svg":t.favIconUrl;return(0,O.z)("li",{"data-index":s,class:"flex multi_dial_item",title:`${t.title}\n${t.url}\n\n${(0,G.Ib)(n)}`,"data-session-id":t.sessionId},[(0,O.z)("a",{href:t.url,class:"list_item_a flex-space-between"+(ee.m0?"":"_10"),tabindex:-1},[(0,O.z)("img",{class:"list_item_icon",src:r||L.RO,style:r?"":(0,le.H)((0,Re.f)(t.url||""))}),(0,O.z)("span",{class:"list_item_name",textContent:t.title,style:`color: ${e}`})])])};return r?a(r):i?.tabs?.length?(0,O.z)("li",{class:"list_item_container","data-session-id":i.sessionId,title:(0,G.Ib)(n)},[(0,O.z)("div",{class:"list_item_container_name flex flex-space-between"},[(0,O.z)("img",{src:L.RO,height:15,width:15,style:(0,le.H)("svg/window.svg")}),(0,O.u)("span",(0,c.tr)("recently_closed_window"))]),(0,O.z)("ul",{class:N.Ki.dial_list_container,style:`background: ${te};`},i.tabs.map(a))]):void 0})).filter(n.zz));qe.appendChild(s)})())}else if(l.isTimerDial()){$e.classList.add(N.oq.is_timer_dial,N.oq.has_list);{const e=l.getTimerControls();oe.push((async()=>{const t=await Promise.all(e.map((e=>e.buildDOM(ke)))),s=(0,O.z)("ul",{class:N.Ki.dial_list_container,style:`background: ${te};`},t);qe.appendChild(s)})())}}else if(l.isWeatherDial()){$e.classList.add(N.oq.is_weather_dial,N.oq.has_list);const e=J.background||((0,ce.g)()?"#222222":"#FFFFFF"),s=(0,E.U)({hexColor:e},{white:Ce,black:Te});try{const r=new Ee(l.weather).buildWeatherControls(t,{textColor:s,backgroundColor:e});qe.appendChild(r)}catch(e){}}else if(Le||Me){const e=document.createElement("img");if(e.className=N.AU.thumbnail,e.draggable=!1,e.src=Le||Pe||L.RO,De.padding&&e.style.setProperty("padding",(0,de.KN)(De.padding)),(0,z.c)(e,Me?Object.assign({},J,{position:a.X.CENTER}):J,!1),!W.lw.NO_DIAL_REFLECTION&&J.position===a.X.FULL_WIDTH&&!Me){const t=e.cloneNode(!1);e.classList.add("reflection"),qe.appendChild(t),De.padding&&(e.style.paddingBottom=t.style.paddingBottom="0")}qe.appendChild(e)}else p.N?r||qe.appendChild((0,O.z)("img",{src:L.RO})):r||U-(l.created||0)<5&&J.type===a.O8.AUTO_GENERATED||qe.appendChild((0,O.z)("p",{class:`${N.AU.reloadButtons} flex-column flex-column-space-between`},[(0,O.z)("button",{class:"btn btn-default create-thumbnail-btn flex flex-space-between",title:(0,c.tr)("label_create_thumbnail"),handlers:{onclick:(0,C.do)((e=>{(0,se.E)(e),(0,Ae.V)().then((({ReloadMenu:t})=>{t.isVisible()?t.close():(0,n.BK)(0).then((()=>t.show(e)))}))}))}},[(0,O.z)("img",{src:L.RO,style:(0,le.H)("svg/image (2).svg"),width:20,height:20}),(0,O.u)("span",(0,c.tr)("label_create_thumbnail"))])]));H&&$e.classList.add(N.oq.is_group),$e.ondragstart=u.B.onDragDialStart,$e.ondragend=u.B.onDragDialEnd}$e.ondrop=u.B.onDialDrop,$e.ondragover=u.B.onDialAllowDrop}const je=(0,Pe.uT)();je.onclick=te,je.onauxclick=te,je.onmousedown=te,je.ondragover=u.B.onContainerDragOver,await Promise.allSettled(oe),je.replaceChildren(Ke),Z&&1===ve.length?document.body.appendChild(Me):Me.isConnected&&Me.remove(),e.grid&&u.B.setupGridDragAndDrop(new Le.J(e.grid,M,je)),J(),T?.dialId&&(0,K.J)(document.querySelector(`#${T.dialId} input[placeholder="${T.placeholder}"]`),(e=>{e.focus(),e.value=T.value,e.setSelectionRange(T.selectionStart,T.selectionEnd)})),(0,z.L)(e,je),je.onkeydown=H,d._C.notifyAll(e),(0,k.O)(e),De.forEach(n.g7)}function Ve(e,t,s,r){return e&&t&&(r.onclick=r=>{r.preventDefault(),(0,U.y)({links:(0,n.Tn)(t)?t():t,containerName:e,active:s===a.TI.NEW_FOCUSED_TAB||W.lw.OPEN_ALWAYS_FOCUSED,inNewTab:s===a.TI.NEW_FOCUSED_TAB||s===a.TI.NEW_TAB})},r.onauxclick=s=>{s.button===M.w.MIDDLE&&(s.preventDefault(),(0,U.y)({links:(0,n.Tn)(t)?t():t,containerName:e,inNewTab:!0}))}),r}},555:(e,t,s)=>{"use strict";s.d(t,{AU:()=>r,Ki:()=>n,oq:()=>i});const r=Object.freeze({container:"dial_container",head:"dial_head",body:"dial_body",icon:"dial_icon",name:"dial_name",thumbnail:"dial_thumbnail",textDial:"text_dial",dialNumber:"dial_number",tag:"dial_tag",reloadButtons:"dial_reload",is_online:"is_online"}),i=Object.freeze({is_empty_dial:"is_empty_dial",is_live_dial:"is_live_dial",is_url_dial:"is_url_dial",is_text_dial:"is_text_dial",has_list:"has_list",border_target:"border_target",is_search_dial:"is_search_dial",is_multi_dial:"is_multi_dial",is_session_dial:"is_session_dial",is_top_sites_dial:"is_top_sites_dial",is_timer_dial:"is_timer_dial",is_weather_dial:"is_weather_dial",is_group:"is_group",is_plus:"is_plus"}),n=Object.freeze({dial_list_container:"dial_list_container",dial_list_item:"multi_dial_item"})},6317:(e,t,s)=>{"use strict";s.d(t,{s:()=>a});var r=s(6683),i=s(9510),n=s(5294);function a(e){const t=e.background&&!e.background.onlyName?e.background:{type:r.sf.COLOR,value:""},s=document.getElementsByClassName("color_background").item(0).style;if(t)switch(t.type){case r.sf.GRADIENT:case r.sf.COLOR:s.background=t.value;break;case r.sf.URL:a(t.value,!0);break;case r.sf.FILE:(0,i.Q)(e.id,e.createBackgroundFileURL()).then((e=>a(e?.imgBlobURL,!1)))}async function a(e,t){e&&(t&&(e=await(0,n.O)(e)),s.background=`url(${e}) center center / cover no-repeat padding-box border-box`)}}},2100:(e,t,s)=>{"use strict";s.d(t,{GZ:()=>o,RT:()=>a,_C:()=>n});var r=s(3456),i=s(4323);const n=new r.k,[a,o]=(0,i.Mj)()},1285:(e,t,s)=>{"use strict";s.d(t,{N:()=>k});var r=s(1879),i=s(4590),n=s(2497),a=s(8198),o=s(2009),c=s(7302),l=s(1962),d=s(9598),u=s(8289),h=s(5048),p=s(2221),m=s(9998),g=s(6795),_=s(8032),f=s(3074),w=s(6683),y=s(364),v=s(4323),b=s(4252),E=s(7253),D=s(3210),A=s(6830),I=s(4559);const S=e=>new Set(e.flatMap((e=>e.dials.map((e=>e.url)).filter(u.Z).map((e=>parseInt(e.substring(1)))))));async function k(e){const t=document.createDocumentFragment(),s=!!p.lw.ROOT_GROUPS_ONLY&&S(e);if(o.mX){const e=(0,d.z)("a",{class:"groups_prefix_box"},[(0,d.z)("img",{src:(0,c.Z)("utils/svg/arrow-circle-left.svg")}),(0,d.u)("span",`${(0,i.tr)("archive")}:`)]);e.onclick=o.ZQ,e.title=(0,i.tr)("archive_close_title"),t.appendChild(e)}if(D.lc){const e=(0,d.z)("a",{id:"shared_groups_menu_btn",class:"groups_prefix_box"},[(0,d.z)("img",{src:(0,c.Z)("svg/menu(2).svg")}),(0,d.u)("span",`${(0,i.tr)("shared_groups")}:`)]);e.onclick=()=>(0,A.V)().then((e=>e.SharedGroupsMenu.toggle())),t.appendChild(e)}for(let i=0;i<e.length;i++){const n=e[i];if(s&&s.has(n.id)||!m.Jk&&n.topSites||o.mX!==!!n.archived)continue;const c=document.createElement("a");let u=n.color;if(n.background?.type===w.sf.COLOR&&n.background.value&&!u&&(u=(0,y.U)({hexColor:n.background.value},{})),(0,v.Kg)(u)&&(c.style.color=u),n.background)switch(n.background.type){case w.sf.GRADIENT:case w.sf.COLOR:c.style.background=n.background.value}n.distraction&&c.classList.add("distraction"),n.topSites&&(c.classList.add("group_icon","topSites"),browser.topSites||c.addEventListener("click",(()=>_.O.askForPermission().then(f.jE)),{once:!0}));const D=!n.lock||await n.isUnlocked();if(n.lock)if(c.classList.add("group_icon","lockedGroup"),D)c.classList.add("unlocked");else if(n.lock.visibility===g.Gj.HIDDEN)continue;if(n.iconId){const e=n.styleIcon(void 0,u||((0,b.g)()?"#ffffff":"#000000"));e.src=l.RO,e.draggable=!1,c.appendChild(e)}c.tabIndex=0,c.id=(0,h.Tf)(n.id),c.draggable=!1,c.href=(0,h._V)(n.id);const A=document.createElement("div");A.className="group_name",A.textContent=n.name,A.draggable=!1,n.container&&((0,E.U6)(A,n.container),c.classList.add("ff_c")),c.appendChild(A),p.lw.SHOW_DIALS_COUNT&&D&&c.appendChild((0,d.z)("div",{textContent:`(${n.dials.filter((e=>e.isNotEmptyDial())).length})`,class:"dials_count"})),c.onclick=e=>r.e.activateFromEvent(e),c.ondragover=e=>{r.e.activateFromEventWithDelay(e),a.B.onGroupAllowDrop(e)},c.ondragend=a.B.onDragGroupEnd,c.ondrop=a.B.onGroupDrop,t.appendChild(c)}if(!p.lw.HIDE_ADD_GROUP){const e=document.createElement("a");e.onclick=()=>(0,n.addNewGroup)({archived:o.mX,sourceGroup:r.e.getCurrentGroup()}),e.textContent="+",e.title=(0,i.tr)("cm_create_new_group"),t.appendChild(e)}const u=(0,I.O1)();u.replaceChildren(t),u.onmousedown=a.B.onGroupMouseDown;const k=(0,l.$H)("group_"+r.e.id);k&&(k.classList.add("selected"),k.scrollIntoView())}},6799:(e,t,s)=>{"use strict";s.d(t,{$u:()=>d,Np:()=>u,t1:()=>l});var r=s(2924),i=s(2100),n=s(6664),a=s(416),o=s(2846),c=s(2857);async function l(e){const{editSingleDial:t}=await Promise.all([s.e(274),s.e(432),s.e(711),s.e(356),s.e(767)]).then(s.bind(s,6126));return e.groupId??=r.H,(0,a.$)((e=>document.documentElement.classList.toggle("edit_dial",e)),(()=>t(e)))}async function d(e,t,s=t.getLastEmptyDial()?.domId){if(s){if(t.grid){const r=t=>{const r=t.dialById(s);n.J.create(t).placeItem(r,e)};return(0,a.$)((e=>{n.J.showEmptyDial(e),e&&r(t),i._C[e?"register":"unregister"](r)}),(()=>l({id:s,gridPlacement:{x:e.x,y:e.y}})))}return l({id:s})}}async function u(e,t){await(0,c.g)(t,e),await o.M.action("removeDial",{groupId:e,index:t.index})}},3457:(e,t,s)=>{"use strict";s.d(t,{Cw:()=>a,rM:()=>c,xe:()=>o});var r=s(910),i=s(4323),n=s(2447);const a=new r.F("last_dial_title_color",i.s6,{storageArea:"localStorage",localStorageTextOnly:!0}),o=new r.F("last_dial_title_background",i.s6,{storageArea:"localStorage",localStorageTextOnly:!0}),c=new n.e("last_dial_padding",(()=>8))},7743:(e,t,s)=>{"use strict";s.d(t,{O:()=>n,c:()=>a});var r=s(6683),i=s(416);const n=()=>s.e(711).then(s.bind(s,2497));async function a(e,{isNewGroup:t=!1,targetTab:n=r.tR.General}={}){const{editSingleGroup:a}=await Promise.all([s.e(274),s.e(432),s.e(711),s.e(356),s.e(178)]).then(s.bind(s,4925));return(0,i.$)((e=>document.documentElement.classList.toggle("edit_group",e)),(()=>a(e,{isNewGroup:t,targetTab:n})))}},2497:(e,t,s)=>{"use strict";s.r(t),s.d(t,{addNewGroup:()=>S,cloneGroup:()=>k,editGroupRowColColor:()=>R,removeGroup:()=>P});var r=s(1879),i=s(4590),n=s(5296),a=s(6808),o=s(4323),c=s(6004),l=s(51),d=s(1471),u=s(7302),h=s(984),p=s(303),m=s(6278),g=s(1962),_=s(9598);const f=()=>{const e=(0,l.y)((0,u.Z)("utils/css/color_picker.css")),t=[];return window.addEventListener("click",r),{promise:e,create:function(e,n,a="",l=o.lQ,u=o.lQ,h=o.lQ){let g=a;const f=e=>l(w=e);g=g||"";let w="";const y=(0,c.Zl)(e);return function(){v(g),y.onclick=e=>{r(),e.stopPropagation(),t.push((()=>f(y.style.backgroundColor=g)));const s=b(e.pageX,e.pageY);document.body.insertAdjacentElement("afterbegin",s),(0,m.$x)(s),t.push(h),u(g)}}(),{id:y.id,node:y,getHoverColor:()=>w,set:v,get:()=>g,getColor:()=>g};function v(e){g=e||a||"",setTimeout((()=>f(e)),1),y.style.backgroundColor=e,E(e)}function b(e,t){const i=(0,_.z)("div",{class:"color_picker_body",style:`top:${t}px;left:${e}px`},[s()]),n=i.querySelector("#color_rgb_preview"),a=i.querySelector("#color_rgb_input"),c=(l=y,((self.getComputedStyle(l).backgroundColor||"").match(/[0-9]+/g)||["0","0","0","0"]).slice(0,3).map((e=>parseInt(e).toString(16).padStart(2,"0"))).join(""));var l;n.style.background="#"+c,a.value=c;i.querySelector(".custom_rgb").onclick=e=>e.stopPropagation(),a.onkeydown=(0,d.ak)(o.lQ,r),a.oninput=e=>{const t=e.target;t.value=t.value.trim().replace("#","").slice(0,6),g=n.style.background="#"+t.value,f(g)};const u=e=>(0,p.H)(e.style.backgroundColor);return i.addEventListener("mouseover",(e=>f(u(e.target)))),n.onclick=i.onclick=e=>{g=u(e.target),E(g),e.stopPropagation(),r()},i}function E(e){y.className="color_picker "+("#00000000"===e?"color_picker_transparent":e?"":"color_picker_remove_color"),y.title=`${n}: ${e||(0,i.tr)("color_no_color")}`}},hide:r};function s(){const e=e=>(0,_.z)("div",{style:`background-color: ${e}`}),t=[(0,_.z)("div",{class:"color_picker_remove_color",title:(0,i.tr)("color_remove_color")}),(0,_.z)("div",{class:"color_picker_transparent",style:"background-color: #00000000",title:(0,i.tr)("color_transparent")})].concat(["#ffff00","#ffa500","#00ff00","#ff0000","#00ffff","#d3d3d3","#0000ff","#808080","#ff00ff","#000000","#ffffff"].map(e)).concat((0,_.z)("div",{class:"color_separator"}));for(let s=1;s<8;s++){const r=8-s;for(let s=0;s<12;s++){const i=(0,h.S)(Math.round(30*s),100,Math.round(12.5*r));t.push(e(i))}t.push(e((0,h.S)(0,0,Math.ceil(12.5*r)))),t.push(document.createElement("br"))}return t.push((0,c.Y6)(["div",{class:"custom_rgb"},[["label",{for:"color_rgb_input",textContent:(0,i.tr)("color_rgb")+": #"}],["input",{id:"color_rgb_input",type:"text",name:"color_custom_rgb",maxlength:"7"}],["div",{id:"color_rgb_preview"}]]])),(0,c.nl)(t)}function r(){document.querySelectorAll(".color_picker_body").forEach(g.bf),(0,o.XB)(t)}};var w=s(4424),y=s(1374);var v=s(1470),b=s(1641),E=s(2846),D=s(5717),A=s(7743),I=s(1305);async function S({position:e,archived:t,sourceGroup:s}){const r=(0,a.v3)(E.M.getNewGroupId(),{archived:t,sourceGroup:s});await E.M.action("addGroup",{position:e,newGroup:r}),await(0,A.c)(r.id,{isNewGroup:!0})}async function k(e){const t=e.getPosition()+1,s=(0,a.v3)(E.M.getNewGroupId(),{sourceGroup:e,archived:e.archived});s.dials=e.dials.map((e=>e.clone())),await E.M.action("addGroup",{position:t,newGroup:s}),await I.i.withDB((async t=>{const r=await t.getThumbnails(e.id);for(const e of Object.values(r))await t.updateDial(s.id,e.url,(t=>Object.assign(t,e,{group:s.id})))})),await(0,A.c)(s.id,{isNewGroup:!0})}function P(e){async function t(){const t=e.id;await E.M.action("deleteGroup",{groupId:t});const s=await E.M.getVisibleGroups();r.e.id===t&&r.e.activate(s.find((e=>e.id!==t))?.id||0)}e.dials.some((e=>e.isNotEmptyDial()))?n.p.show((0,i.tr)("group_delete_title",e.name),(0,i.tr)("group_delete_body"),{yesText:(0,i.tr)("group_delete_yes"),noText:(0,i.tr)("group_delete_no"),onYes:t}):t()}async function R(e,t,s){const i=f();await i.promise;const n=e.target,a=(0,_.z)("div",{style:"display: none"});n.appendChild(a);const c=(await r.e.getCurrentGroup()).clone(),l=D.M6.dialsToClusters(c.dials),d=("col"===s?w.W:w.q)((0,y.SL)(l,(e=>e.dial?.domId===t.domId||!!e.dials?.find((e=>e.domId===t.domId)))),c.cols);async function u(e,t,r){switch(s){case"row":r.rowColor=(0,v.KQ)(r.rowColor||{},t,e);break;case"col":r.colColor=(0,v.KQ)(r.colColor||{},t,e)}return(0,b.Wx)(r),r}await new Promise((t=>{const l=c["row"===s?"rowColor":"colColor"]?.[d]||"",h=i.create(a,"color",l,(e=>u(e,d,c)),o.lQ,(async function(){const e=await r.e.getCurrentGroup(),{rowColor:s,colColor:i}=await u(h.getColor(),d,e);await E.M.action("updateGroup",{groupId:e.id,update:{rowColor:s,colColor:i}}),t()}));h.node.onclick(e),function(e,{parentContainer:t=document.body,subtree:s=!0}={}){return new Promise((r=>{new MutationObserver(((t,s)=>{t.find((e=>"childList"===e.type&&e.removedNodes.length))&&(e.isConnected||(s.disconnect(),r()))})).observe(t,{childList:!0,subtree:s})}))}(n,{parentContainer:document.documentElement}).then(i.hide)}))}},841:(e,t,s)=>{"use strict";s.d(t,{v:()=>r});const r={width:300,height:225,androidWidth:240,androidHeight:195,listWidth:300,androidListWidth:228}},9:(e,t,s)=>{"use strict";s.d(t,{Ks:()=>l,QY:()=>d,yd:()=>c});var r=s(4424),i=s(1374),n=s(4323),a=s(9719),o=s(5717);function c(e,t,s,r,n,c,l,d,u){let h=o.M6.dialsToClusters(t);if(n||c||l)h=h.filter((e=>!e.isEmptyDial())).concat(new o.uP(a.I.createEmptyDial(e)));else{const t=d*u-h.length;if(t>0){const s=Array(t).fill(0).map((()=>new o.uP(a.I.createEmptyDial(e))));h.push(...s)}const n=s-d,c=r-u;if(n>=0&&c>0)for(let t=d;t>0;t--)for(let s=0;s<c;s++)h.splice(t*u,0,new o.uP(a.I.createEmptyDial(e)));if(n<=0||c<0)for(let e=d;e>0;e--)for(let t=0;t<-c;t++){const s=e*u-1-t;h[s].isEmptyDial()&&h.splice(s,1)}h.reverse(),h.length>s*r&&Array(h.length-s*r).fill(0).forEach((()=>(0,i.M$)(h,(e=>e.isEmptyDial())))),h.reverse();for(let t=h.length;t<s*r;t++)h.push(new o.uP(a.I.createEmptyDial(e)))}return o.M6.clustersToDials(h)}function l(e,t){const{rows:s,cols:r,dials:i,dynamic:n,list:a,grid:o}=e,l=s+("row"===t?1:0),d=r+("column"===t?1:0),u=c(e.id,i,l,d,n,a,o,s,r);return Object.assign(e,{rows:l,cols:d,dials:u})}function d(e,t,s){const a=o.M6.dialsToClusters(t.dials),c=(0,i.SL)(a,(e=>e.includes(s)));c<0&&(0,n.qb)("dial not found");const l="row"===e?r.q:r.W,d=l(c,t.cols);return a.filter(((e,s)=>d===l(s,t.cols)))}},8641:(e,t,s)=>{"use strict";s.d(t,{H:()=>r});const r=()=>s.e(286).then(s.bind(s,1329))},5904:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});var r=s(5953),i=s(9887),n=s(2441);class a{areas;height;width;constructor(e){this.areas=e,this.height=this.areas.length,this.width=this.areas.at(0)?.length||0}getCoordinates(e){let t=-1,s=-1;const i=this.areas.findIndex((r=>{if(t=r.indexOf(e),-1!==t)return s=r.lastIndexOf(e),!0}));if(-1===i)return;const n=this.areas.findLastIndex((s=>s.includes(e,t)));return new r.$(t,i,s,n)}getConflictsInRange(e,{left:t,top:s,right:r,bottom:i},n){const a=new Map;for(let o=s;o<=i;o++){const s=this.areas[o];if(!s)return n?a:void 0;for(let i=t;i<=r;i++){const t=s[i];if(void 0===t&&!n)return;if(t&&t!==e){const e=a.get(t);e?e.push({x:i,y:o}):a.set(t,[{x:i,y:o}])}}}return a}hasConflictsInRange(e,{left:t,top:s,right:r,bottom:i}){if(t<0||s<0||r>=this.width||i>=this.height)return!0;for(let n=s;n<=i;n++){const s=this.areas[n];for(let i=t;i<=r;i++){const t=s[i];if(t&&t!==e)return!0}}return!1}replaceCells({left:e,top:t,right:s,bottom:r},i){for(let n=t;n<=r;n++){const t=this.areas[n];for(let r=e;r<=s;r++)t[r]=i}return this}removeItems(e){for(let t=0;t<this.height;t++){const s=this.areas[t];for(let t=0;t<this.width;t++)e.has(s[t])&&(s[t]=0)}return this}insertItems(e,t,s){const r=this.clone(),i=e[Symbol.iterator]();for(let e=0;e<r.height;e++)for(let n=0;n<r.width;n++){const a=n+t-1,o=e+s-1;if(a>=r.width||o>=r.height||r.hasConflictsInRange(-1,{left:n,right:a,top:e,bottom:o}))continue;const{done:c,value:l}=i.next();if(c)return r;r.replaceCells({left:n,right:a,top:e,bottom:o},l)}if(i.next().done)return r}resize(e,t){const s=this.height+t,r=this.width+e,n=e>0?[]:this.getConflictsInRange(-1,{left:this.width+e,top:0,right:this.width-1,bottom:this.height-1},!0),o=t>0?[]:this.getConflictsInRange(-1,{left:0,top:this.height+t,right:this.width+e-1,bottom:this.height-1},!0),c=Array.from(new Map([...n,...o]),(([s,r])=>new i.o(s,this,r,e,t))).sort(i.o.getSortBySizeAndDistance(Math.floor(s/2),Math.floor(r/2))),l=this.clone();c.forEach((e=>l.replaceCells(e.coordinates,0)));return{grid:new a(Array.from({length:s},((e,t)=>{const s=l.areas[t]||[];return[...s,...Array.from({length:r-s.length},(()=>0))].slice(0,r)}))),conflicts:c}}getCommonDimension(){const e=new n._;for(let t=0;t<this.height;t++){const s=this.areas[t];for(let r=0;r<this.width;r++){const i=s[r];i&&e.push(i,{x:r,y:t})}}const t=Array.from(e,(([e,t])=>{const{x:s,y:r}=t[0],{x:i,y:n}=t.at(-1);return{width:i-s+1,height:n-r+1}})),s=new n._;return t.forEach((e=>s.push(`${e.width}x${e.height}`,e))),Array.from(s.values()).sort(((e,t)=>t.length-e.length)).at(0)?.at(0)}replaceItem(e,t){return e!==t&&this.areas.some((t=>t.includes(e)))?this.areas.map((s=>s.map((s=>s===e?t:s===t?0:s)))):this.areas}swapItems(e,t){return this.areas.map((s=>s.map((s=>s===e?t:s===t?e:s))))}getMaximumNewItemSize(e){const t=this.height*this.width,s=Math.floor(Math.min(4,this.height/2,this.width/2,Math.sqrt(t/e)))||1;return{width:s,height:Math.min(3,s)}}clone(){return new a(this.areas.map((e=>e.slice())))}getItems(){const e=new Set(this.areas.flat());return e.delete(0),e}}},9887:(e,t,s)=>{"use strict";s.d(t,{o:()=>r});class r{item;grid;overlaps;offsetX;offsetY;coordinates;itemSize;evadingVector;constructor(e,t,s,r,i){this.item=e,this.grid=t,this.overlaps=s,this.offsetX=r,this.offsetY=i,this.coordinates=this.grid.getCoordinates(this.item),this.itemSize=this.coordinates.width*this.coordinates.height,this.evadingVector=this.computeEvadingVector()}computeEvadingVector(){const{left:e,top:t,right:s,bottom:r,width:i,height:n}=this.coordinates,{offsetX:a,offsetY:o}=this;let c=0,l=0;for(let a=t;a<=r;a++)for(let r=e;r<=s;r++)if(this.overlaps.some((e=>e.x===r&&e.y===a))){const s=i/2,o=n/2;r+1>e+s&&c--,r<e+s&&c++,a+1>t+o&&l--,a<t+o&&l++}return c||l?{x:c,y:l}:{x:a,y:o}}*moveToEmptySpace(e){const t=Math.max(e.width,e.height),{x:s,y:r}=this.evadingVector,i=function*(e){const[t,s]=e.map((e=>Math.sign(e)));for(let e=1;e<1e3;e++){const r=2*e+1,i=Math.floor(r/2),n=[],a=[],o=[],c=[];for(let t=0;t<r;t++){const s=t-i;for(let t=0;t<r;t++){const r=t-i;Math.abs(s)+Math.abs(r)===e&&(s&&r?s>0&&r>0?n.push([s,r]):s<0&&r<0?a.push([s,r]):o.push([s,r]):c.push([s,r]))}}for(const e of[n,o,a,c]){e.sort((([e,t],[s,r])=>e!==s?s-e:r-t));for(const r of e){const[e,i]=r;t&&s?yield[e*t,i*s]:s&&!t?yield[i,e*s]:t&&!s?yield[i*t,e]:yield r}}}}([s,r]);for(const[s,r]of i){if(s>t)break;const i=this.coordinates.offset(s,r);e.hasConflictsInRange(this.item,i)||(yield e.clone().replaceCells(i,this.item))}}static getSortBySizeAndDistance(e,t){return(s,r)=>{const i=r.itemSize-s.itemSize;if(i)return i;const[n,a]=[s,r].map((s=>Math.abs(s.coordinates.top-e)+Math.abs(s.coordinates.left-t)));return n-a}}}},6664:(e,t,s)=>{"use strict";s.d(t,{J:()=>f});var r=s(5904),i=s(5953),n=s(9100),a=s(9887);class o{item;grid;coordinates;constructor(e,t){this.item=e,this.grid=t,this.coordinates=this.grid.getCoordinates(this.item)}offset(e,t,s){const{left:r,top:o,right:c,bottom:l,width:d,height:u}=this.coordinates,h="move"===s,p=h?(0,n.n)(0,this.grid.width-d,r+e):r,m=h?(0,n.n)(0,this.grid.height-u,o+t):o,g=h?p+d-1:(0,n.n)(r,this.grid.width-1,c+e),_=h?m+u-1:(0,n.n)(o,this.grid.height-1,l+t);if(g===c&&_===l&&p===r&&m===o)return;const f=this.grid.getConflictsInRange(this.item,new i.$(p,m,g,_));if(!f)return;const w=Array.from(f,(([s,r])=>new a.o(s,this.grid,r,e,t))).sort(a.o.getSortBySizeAndDistance(o,r));return{coordinates:new i.$(p,m,g,_),conflicts:w}}}var c=s(1282);class l{grid;clone(){return new l(this.grid.areas)}get areas(){return this.grid.areas}get width(){return this.grid.width}get height(){return this.grid.height}constructor(e){this.grid=new r.x(e)}move(e,t,s,r="move"){if(0===t&&0===s)return this.grid;const i=new o(e,this.grid);if(!i.coordinates)return;const n=i.offset(t,s,r);if(!n)return this.grid;const a=this.grid.clone();a.replaceCells(i.coordinates,0),n.conflicts.forEach((e=>a.replaceCells(e.coordinates,0))),a.replaceCells(n.coordinates,i.item);try{return this.resolveConflicts(a,n.conflicts)||this.resolveConflicts(a,n.conflicts.toReversed())}catch(e){}}placeItem(e,t,s){const r=this.grid.clone(),{width:i,height:n}=r.getCommonDimension()||r.getMaximumNewItemSize(1);for(let a=i,o=n;a>0;a--,o=Math.max(1,o-1)){const i={left:t,top:s,right:t+a-1,bottom:s+o-1};if(!r.hasConflictsInRange(-1,i))return{grid:r.replaceCells(i,e),itemWidth:a,itemHeight:o}}}resizeGrid(e,t){const{width:s,height:r}=this.grid;if(e===s&&t===r)return this;const{grid:i,conflicts:n}=this.grid.resize(e-s,t-r),a=this.resolveConflicts(i,n);return a?(this.grid=a,this):void 0}resolveConflicts(e,t,s=performance.now()+200){if(performance.now()>s)throw Error("grid_timeout");const[r,...i]=t;if(!r)return e;const n=r.moveToEmptySpace(e);for(const e of n){const t=this.resolveConflicts(e,i,s);if(t)return t}}updateGrid(e){const t=this.grid.getCommonDimension();if(!t){const t=l.fromItems(e,this.width,this.height);return t?(this.grid=t,this):void 0}const s=new Set(e),r=this.grid.getItems(),i=(0,c.tX)(r,s),n=(0,c.tX)(s,r),a=this.grid.clone();a.removeItems(i);const o=a.insertItems(n,t.width,t.height);if(o)return this.grid=o,this}static fromItems(e,t,s){const i=Array.from({length:s},(()=>Array.from({length:t},(()=>0)))),n=new r.x(i),{width:a}=n.getMaximumNewItemSize(e.length);for(const[t,s]of[[4,3],[3,3],[3,2],[2,2],[1,1]]){if(t>a)continue;const r=n.insertItems(e,t,s);if(r)return r}}}var d=s(3694),u=s(1361),h=s(4559),p=s(2780),m=s(4323),g=s(1470),_=s(2846);class f{gridData;groupId;dialsNode;handlers;_currentAreas;get rows(){return this._currentAreas.length}get cols(){return this._currentAreas[0].length||0}constructor(e,t,s=(0,h.uT)()){this.gridData=e,this.groupId=t,this.dialsNode=s,this.handlers=new u.G,this.applyGridLayout(e),this._currentAreas=e.areas}static create(e){if(!e.grid)throw new Error("Not a grid!");return new f(e.grid,e.id)}applyGridLayout(e){this._currentAreas=e.areas,this.previewGridLayout(e)}previewGridLayout(e){const t=e.areas.flatMap((e=>`"${e.map((e=>e?`d${e}`:".")).join(" ")}"`)).join("\n");this.dialsNode.style.setProperty("--grid-template-areas",t),this.dialsNode.style.setProperty("--grid-rows",`${this.rows}`),this.dialsNode.style.setProperty("--grid-cols",`${this.cols}`)}placeItem(e,{x:t,y:s}){const r=new l(this._currentAreas),i=this.dialsNode.getBoundingClientRect();t-=i.left,s-=i.top;const n=i.width/r.width,a=i.height/r.height,o=Math.floor(t/n),c=Math.floor(s/a),d=[[-1,-1],[-2,-2],[-1,-2],[-2,-1],[0,-2],[-2,0],[-1,0],[0,-1],[0,0]].map((([t,s])=>{const i=r.placeItem(e.areaNumber,o+t,c+s);return i&&{grid:i.grid,priority:(i.grid.hasConflictsInRange(-1,{left:o,right:o,top:c,bottom:c})?1e3:0)+i.itemWidth*i.itemHeight}})).filter(m.zz).sort(((e,t)=>t.priority-e.priority)).at(0);if(d)return this.previewGridLayout(d.grid),{areas:d.grid.areas}}static normalizeGrid(e,t,s,r){t=t.slice(0,-1),this.makeDialsUnique(t);const i=t.map((e=>e.created));if(0===e.areas.length){const t=l.fromItems(i,r||24,s||12);if(!t)throw new Error("Cannot create grid, dimensions are too small");return{...e,areas:t.areas}}const n=new l(e.areas);if(s&&r&&(s!==n.height||r!==n.width)){if(!n.resizeGrid(r,s))throw new Error("Cannot resize grid, dimensions are too small")}if(!n.updateGrid(i))throw new Error("Cannot update grid");return{...e,areas:n.grid.areas}}static makeDialsUnique(e){const t=new Set;for(const s of e){let e=s.created||(0,d.Sy)();for(;t.has(e);)e++;s.created=e,t.add(e)}}startDrag(e){e.dataTransfer.setDragImage(new Image,0,0);const t=new l(this.gridData.areas);let s=!1,r=!1;this.handlers.addListener((0,h.O1)(),"change",(e=>s=!0));const i=(0,h.B)();i.classList.remove("stopped_moving"),this.handlers.addListener(document.documentElement,"dragend",(async e=>{if(r=!0,this.handlers.clearAll(),s||"none"===e.dataTransfer?.dropEffect)return this.applyGridLayout(this.gridData),void i.classList.add("stopped_moving");this.gridData.areas=this._currentAreas,this.applyGridLayout(this.gridData),await _.M.action("updateGroup",{groupId:this.groupId,update:{grid:this.gridData}})}));const n={left:e.x,top:e.y},a=this.dialsNode.getBoundingClientRect(),o=a.width/t.width,c=a.height/t.height,d=e.currentTarget,u=parseInt(d.style.getPropertyValue("grid-area").slice(1));if(!u)throw Error("Cannot find grid item");const f=d.getBoundingClientRect(),w=parseFloat(window.getComputedStyle(document.documentElement).fontSize),y=e.x>f.right-w&&e.y>f.bottom-w,{scrollLeft:v,scrollTop:b}=i,E=new p.v("one_by_last_one");this.handlers.addListener(this.dialsNode,"dragover",(e=>{e.dataTransfer.dropEffect="move",E.addWork((async()=>{if(r||s)return;if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return s=!0,this.applyGridLayout(this.gridData),void i.classList.add("stopped_moving");const a={left:e.x+(i.scrollLeft-v),top:e.y+(i.scrollTop-b)},l=(0,g.FP)(a,n),d=t.move(u,Math.round(l.left/o),Math.round(l.top/c),y?"resize":"move");d&&this.applyGridLayout(d),await(0,m.BK)(50)}))}))}static showEmptyDial(e){(0,h.B)().classList.toggle("show_empty",e)}}},5953:(e,t,s)=>{"use strict";s.d(t,{$:()=>r});class r{left;top;right;bottom;width;height;constructor(e,t,s,r,i=s-e+1,n=r-t+1){this.left=e,this.top=t,this.right=s,this.bottom=r,this.width=i,this.height=n}offset(e,t){return new r(this.left+e,this.top+t,this.right+e,this.bottom+t,this.width,this.height)}}},3331:(e,t,s)=>{"use strict";s.d(t,{d:()=>n});var r=s(2846),i=s(2221);function n(e){if(i.lw.DIAL_ONLY_CURRENT_GROUP)return 0;for(let t=0,s=0;t<r.M.GROUPS.length;t++){const i=r.M.GROUPS[t];if(i.id===e)return s;s+=i.dials.length}return 0}},8654:(e,t,s)=>{"use strict";s.d(t,{j:()=>n,x:()=>i});var r=s(6795);const i=Object.freeze(["up","right","down","left"]),n=Object.freeze({up:{type:r.EM.HOME_GROUP},right:{type:r.EM.NEXT_GROUP},left:{type:r.EM.PREV_GROUP},down:{type:r.EM.NONE}})},9735:(e,t,s)=>{"use strict";s.d(t,{v:()=>a});var r=s(1879),i=s(1962),n=s(4257);async function a(e,t,{animated:s,hideOthers:a,hideOtherPermanent:o,color:c,callbackFn:l}={}){await n.re;const d=s?"dial-highlight-animated":"search-dial-highlight",u=o?"opacity-05":a?"dial-highlight-opacity":"noop";await r.e.activate(e,!0),r.e.getCurrentGroup().dials.filter((e=>e.domId)).forEach((e=>{const s=(0,i.$H)(e.domId),r=s.getAttribute("id")===t;r&&s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),s.classList.add(r?d:u),l?.(s)}))}},3254:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});const r=()=>Promise.all([s.e(711),s.e(141)]).then(s.bind(s,3011))},8847:(e,t,s)=>{"use strict";s.d(t,{Ny:()=>r,fd:()=>n,jM:()=>a,v0:()=>i});const r=1e3;function i({scale:e,vrX:t,vrY:s,posX:i,posY:n},a){const o=a/r;return`\nleft: ${i*o}px;\ntop: ${n*o}px;\nwidth: ${t}px;\nheight: ${s}px;\ntransform: scale(${e*a/1e6});`}function n(e,t,s){const r=e.VR_DEFAULT_WIDTH||1280;return{scale:Math.ceil(1e6/r),vrX:r,vrY:Math.round(r*s/t),posX:0,posY:0}}function a(e=""){return!e||["facebook.com","paypal.com","google.com","vk.com"].some((t=>e.includes(t)))?"":"allow-scripts allow-same-origin"}},9510:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,Q:()=>l});var r=s(6801),i=s(6214),n=s(1305),a=s(179),o=s(744);async function c(e){const t=await a.YG?await o.b.then((()=>(0,r._z)({type:"getImages",groupId:e})))||{}:await n.i.withDB((t=>t.getThumbnails(e)));return Object.values(t).forEach((t=>d(e,t))),t}async function l(e,t){return d(e,await a.YG?await(0,r._z)({type:"getDbDial",groupId:e,url:t}):await n.i.withDB((async s=>s.getDbDial(e,t))))}function d(e,t){return t&&(t.iconBlob&&(t.iconBlobURL=i.RN.getBlobURL(e,t.url,t.iconBlob)),t.imgBlob&&(t.imgBlobURL=i.Lv.getBlobURL(e,t.url,t.imgBlob))),t}},6830:(e,t,s)=>{"use strict";s.d(t,{V:()=>r});const r=()=>Promise.all([s.e(550),s.e(72)]).then(s.bind(s,3311))},5162:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,y:()=>i});var r=s(7865);const i=async()=>(await r.W,s.e(863).then(s.bind(s,559))),n=async()=>await Promise.all([s.e(274),s.e(288),s.e(609)]).then(s.bind(s,2529))},3322:(e,t,s)=>{"use strict";s.d(t,{_b:()=>c,gR:()=>l,zb:()=>d});var r=s(6801),i=s(744),n=s(5162),a=s(1185),o=s(9439);let c={value:"off",context:{}};const l=new a.i("productivity_on",((e,t)=>{document.documentElement.classList.toggle(e,((e=c.value)=>"active"===e||"activeManual"===e)(t))}));async function d(e,t=!1){if(o.vt)return;c.value,e.value;c=e,l.update(e.value),t&&"off"===e.value||(await(0,n.y)()).productivityMode.toggle(e)}i.b.then((async()=>{if(o.vt)return;const e=await(0,r._z)({type:"getProductivityState"});return e?(d(e,!0),e):void 0}))},8310:(e,t,s)=>{"use strict";s.d(t,{n:()=>r});const r=async()=>await s.e(267).then(s.bind(s,9684))},9343:(e,t,s)=>{"use strict";var r,i;s.d(t,{K:()=>p}),(e=>{e[e.RAW=0]="RAW",e[e.BASE_64=1]="BASE_64",e[e.BASE_93=2]="BASE_93"})(r||(r={})),(e=>{e[e.LZ=0]="LZ",e[e.LZMA=1]="LZMA"})(i||(i={}));var n=s(9254),a=s(7371),o=s(1061),c=(s(2460),s(2062));class l{passwordHashWithSecret;lzutf8;keyPromise;constructor(e,t){this.passwordHashWithSecret=e,this.lzutf8=t,this.keyPromise=new c.k(e).unwrapKey(e.options.secret)}async encrypt(e,{encoding:t,compression:s}){performance.now();const c=JSON.stringify(e);let l;switch(s){default:case i.LZ:l=await this.lzutf8.compress(c);break;case i.LZMA:l=await(0,a.v)(c)}const d=self.crypto.getRandomValues(new Uint8Array(12)),u=await self.crypto.subtle.encrypt({name:"AES-GCM",iv:d},await this.keyPromise,l);let h;switch(t){default:case r.RAW:h=(0,n.JR)(u);break;case r.BASE_64:h=btoa((0,n.JR)(u));break;case r.BASE_93:h=await(0,o.h)(new Uint8Array(u))}return{ciphertext:h,iv:[...d],en:t,cp:s}}async decrypt({ciphertext:e,iv:t,cp:s,en:c}){let l;switch(c){default:case r.RAW:l=(0,n.Al)(e);break;case r.BASE_64:l=(0,n.Al)(atob(e));break;case r.BASE_93:l=await(0,o.A)(e)}const d=await self.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(t)},await this.keyPromise,l);let u;switch(s){default:case i.LZ:u=await this.lzutf8.decompress(new Uint8Array(d));break;case i.LZMA:u=await(0,a.O)(new Uint8Array(d))}return JSON.parse(u)}}var d=s(7398),u=s(4716),h=s(4721);class p{ciphertext;cp;en;iv;pwdOptions;accessSecret;constructor(e){Object.assign(this,e)}async decrypt(e){const t=new l({hash:e,options:this.pwdOptions});return await t.decrypt(this)}static async encrypt(e,t){const s=new u.w("Encryption:"),n=await p.generateNewPassword(t,"SHA-256",5e6);s.diff("generated password hash");const a=new l(n),o=await a.encrypt(e,{encoding:r.BASE_93,compression:i.LZMA});return s.diff("encrypted + encoded"),s.stop("Total"),new p({...o,pwdOptions:n.options,accessSecret:await(0,h.d)(n.hash,"SHA-256")})}static async generateNewPassword(e,t,s){const r=await self.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return await(0,d.mA)(e,r,{iterations:s,salt:(0,n.gU)(128),hash:t})}}},7861:(e,t,s)=>{"use strict";s.d(t,{V:()=>i,X:()=>r});const r=async()=>await Promise.all([s.e(274),s.e(432),s.e(611),s.e(288),s.e(363)]).then(s.bind(s,7897)),i=async()=>await Promise.all([s.e(274),s.e(711),s.e(123)]).then(s.bind(s,298))},3210:(e,t,s)=>{"use strict";s.d(t,{NK:()=>d,k2:()=>u,lc:()=>l});s(4823);var r=s(2037),i=s(8297),n=s(6801);const a=void 0,o=a?(0,r.B8)(c?"share/:uuidBase64?x":"share/:uuidBase64",{uuidBase64:a},{headers:c?{[i.G0]:c}:void 0}):Promise.resolve();var c;let l=!1,d=!1;function u(){(0,n._z)({type:"share_re_lock",uuidBase64:a||""})}o.then((e=>{l=!!e?.data,d=!!e?.data?.encrypted}))},6810:(e,t,s)=>{"use strict";s.d(t,{O:()=>d,g:()=>u});var r=s(6801),i=s(1879),n=s(4323),a=s(4214),o=s(3700),c=s(9439);const l=new o.j;async function d(e){if(c.vt)return;const t=await(0,r._z)({type:"reload_get_running_for_group",groupId:i.e.id}).catch(n.s6)||[],s=(0,a.W)(t,"url"),o=l.get(e.id);e.dials.forEach(((e,t)=>{const r=e.url||"",i=s[r],n=i?.isVisibleSpin&&!e.isLiveDial();n&&o.delete(r),e.setSpinner(n||o.has(r))}))}function u(e){c.vt||(l.add(e.groupId,e.url),(0,n.BK)(1e3).then((()=>{l.remove(e.groupId,e.url),e.groupId===i.e.id&&d(i.e.getCurrentGroup())})),e.setSpinner())}},2901:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});var r=s(1185),i=s(3943);const n=new r.i("white",((e,t)=>{document.documentElement.classList.toggle(e,t===i.z.light)}))},4252:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var r=s(3943),i=s(2221);const n=()=>i.lw.TEMPLATE_COLOR!==r.z.light},3943:(e,t,s)=>{"use strict";s.d(t,{z:()=>r});const r={dark:"",light:"white"}},2399:(e,t,s)=>{"use strict";s.d(t,{D:()=>o});var r=s(6683),i=s(8794),n=s(2846),a=s(5048);async function o(e,t){const s=!!t&&t.type===r.kh.GROUP,o=(0,a._V)(e);await i.SR.update((t=>(n.M.GROUPS.forEach((r=>r.dials.filter((t=>t.url===o&&(!s||e>r.id))).forEach((e=>t.push([r.id,e.url]))))),t)))}},5941:(e,t,s)=>{"use strict";s.d(t,{w:()=>r});const r=()=>s.e(241).then(s.bind(s,6064)).then((e=>e.reloadService))},6037:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});var r=s(8794),i=s(5941),n=s(4069);async function a(e){if(n.m0)return;const t=(await r.SR.get()).filter((([t])=>t===e));t.length&&(await r.SR.update((t=>t.filter((([t])=>t!==e)))),await(await(0,i.w)()).parentReload(e,t.map((([,e])=>e))))}},2857:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var r=s(5524),i=s(4352),n=s(9510),a=s(1305);async function o({url:e},t){if(!e)return;const s=await(0,n.Q)(t,e);try{s?.imgBlobURL&&await fetch(s.imgBlobURL),s?.iconBlobURL&&await fetch(s.iconBlobURL)}catch(s){(0,r.vV)("Broken image detected!",s),await a.i.withDB((async s=>s.deleteDbDial(t,e))).catch((e=>(0,r.vV)("deleting broken thumbnail failed",e))),(0,i.L)(t)}}},9225:(e,t,s)=>{"use strict";s.d(t,{m:()=>r});const r=new(s(910).F)("tutorial",(()=>0))},4823:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var r=s(2036);const i=new class{searchParams=new URL(window.location.href).searchParams;isEmpty=!window.location.search;constructor(){}has(e){return this.searchParams.has(e)}get(e){return this.searchParams.get(e)}focusPageAndExecute(e,t){i.has(e)?(this.clearParamsWithoutReload(),t()):this.setWithReload(e)}setWithReload(e){window.location.search=`?${e}`}clearParamsWithoutReload(){window.history.replaceState(null,"",r.KL+location.hash)}}},7139:(e,t,s)=>{"use strict";s.d(t,{vx:()=>r});s(9074),s(4323),s(1055);let r},8154:(e,t,s)=>{"use strict";s.d(t,{K:()=>o});var r=s(4323),i=s(5772),n=s(6801),a=s(9676);async function o(){const e=(await browser.windows.getAll({populate:!0,windowTypes:["normal"]})).flatMap((e=>e.tabs.filter((e=>!e.discarded&&e.url.startsWith("http"))).slice(-2))),t=(await Promise.all(e.map((e=>{return t=e.id,(0,a.w)(900,void 0,(async()=>await browser.scripting.executeScript({target:{tabId:t,allFrames:!1},func:()=>({innerWidth:window.innerWidth,innerHeight:window.innerHeight,availWidth:window.screen.availWidth,availHeight:window.screen.availHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight,pixelRatio:window.devicePixelRatio})}).then((([e])=>e.result)).catch(r.s6)));var t})))).filter(r.zz).sort((0,i.s)(1,!1)),{availWidth:s,availHeight:o}=t[0]||{};return s&&o?{width:s,height:o}:await(0,n._z)({type:"getScreenInfo"}).then((e=>({width:e?.availWidth||1920,height:e?.availHeight||1080})))}},3778:(e,t,s)=>{"use strict";s.d(t,{i:()=>c,O:()=>o});var r=s(1962),i=s(8794),n=s(7302),a=s(1550);async function o(e="",t="image/png"){const s=(0,r.$H)("favicon");s.href=e||i.u9.get(),s.type=t}async function c(e){if(!e)return await o();const t=(0,n.Z)(`/icons/tags/tag (${e}).svg`),s=await async function(e){if(!self.matchMedia?.(a.Co).matches)return e;const t=await(await fetch(e)).text(),s=`<svg xmlns="http://www.w3.org/2000/svg">\n  <filter id="invertFilter">\n    <feColorMatrix in="SourceGraphic" type="matrix" values="-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0"/>\n  </filter>\n  <image filter="url(#invertFilter)" href="data:image/svg+xml,${encodeURIComponent(t)}" x="0" y="0" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"/>\n</svg>`;return`data:image/svg+xml,${encodeURIComponent(s)}`}(t);await o(s,"image/svg+xml")}},5048:(e,t,s)=>{"use strict";s.d(t,{$K:()=>c,b3:()=>l,O5:()=>d,hx:()=>u,l8:()=>a,Tf:()=>v,_V:()=>y,C9:()=>g,m4:()=>p,nE:()=>m,oR:()=>_,Ty:()=>A,rm:()=>D,k6:()=>h,om:()=>E,U0:()=>b,Mo:()=>f,ti:()=>w});var r=s(4323),i=s(5360);const n="dial_",a='a[id^="dial_"]',o="group_",c=31,l=7,d=13,u="#00AAFF",h=e=>`${n}${e}`,p=e=>parseInt(e.slice(e.lastIndexOf("#")+1)),m=e=>(0,r._w)("id",e.find((e=>w(e.id)))),g=e=>(0,r._w)("id",e.find((e=>f(e.id)))),_=e=>g(e.composedPath()),f=e=>!!e&&/^dial_[0-9]+$/.test(e),w=e=>!!e&&/^group_[0-9]+$/.test(e),y=e=>"#"+e,v=e=>o+e,b=e=>parseInt(e.slice(6)),E=e=>parseInt(e.slice(5));function D(e){const t=e.target.closest("a")?.id;return w(t)?b(t):void 0}const A=(0,i.M)((function(e){if(!e)return"";const t=e.toLowerCase().replace(new RegExp(String.raw`^https?://(www.)?`),"");return t.endsWith("/")?t.slice(0,-1):t}))},1792:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});s(2804);const r=!1},179:(e,t,s)=>{"use strict";s.d(t,{A$:()=>l,ik:()=>u,Jl:()=>d,YG:()=>c});var r=s(865),i=s(3941);var n=s(4069),a=s(2031),o=s(1792);(0,a.g)("non-background");const c=async function(){const e=await r.uL;return!!e&&(e.incognito||(0,i.M)(e))}(),l=()=>self.matchMedia("(orientation: portrait)").matches,d=()=>n.m0&&l(),u=()=>n.m0||o.b||!1},2346:(e,t,s)=>{"use strict";s.d(t,{I:()=>f,L:()=>w});var r=s(6795),i=s(8154),n=s(6801),a=s(6683),o=s(1484),c=s(6062),l=s(2221),d=s(8794),u=s(4069),h=s(5904),p=s(8289),m=s(9439);const g=180,_=76;async function f(e,t,s,r,o){o||={devicePixelRatio:await d.T6.get()};const[h,f]=l.lw.AR_SCREEN_RESOLUTION===a.d0.CUSTOM?[l.lw.AR_SCREEN_WIDTH||1280,l.lw.AR_SCREEN_HEIGHT||720]:await async function(){const e=c.Dy?await(0,i.K)():await(0,n._z)({type:"findBiggestScreenSize"}).catch((()=>({width:window.screen.availWidth,height:window.screen.availHeight}))),{width:t,height:s}=e||{width:1920,height:1080},r=t/s,a=m.vt||l.lw.HIDE_TOP_BAR?0:l.lw.GROUPS_HEIGHT,o=s-_-a;return r>2.7?[t,2*o]:[t,o]}(),y=w(e,t,o,h,f,r);let v=t.thumbnail&&t.thumbnail.position!==a.X.FULL_WIDTH||(0,p.Z)(t.url)||!e.isFlexibleLayout()?0:g;return s&&u.m0&&y.height>y.width&&(y.height=y.width,v=0),{...y,extraHeight:y.height+v}}function w(e,t,{devicePixelRatio:s},i,n,c){const d=i/n,u=l.lw.NO_TITLE||t.visual?.noTitle?0:1.5*l.lw.DIAL_FONT_SIZE,p=2*(0,m.i7)(e.options),g=p+u;let _=s*(i/e.cols-p),f=s*(n/e.rows-g);if(e.ratio){const[t,s,r]=e.ratio,i=t/s;t*e.cols/(s*e.rows)>d||r?f=_/i-u-1.5*(t-s):_=f*i}else if(e.grid){const a=new h.x(e.grid.areas),{width:o,height:c}=a.getCoordinates(t.created)||{width:2,height:2};if(_=s*(i*(o/a.width)-p),f=s*(n*(c/a.height)-g),e.grid.position!==r.Cr.fillSpace){a.width/a.height>d||e.grid.position===r.Cr.scroll?f=c*_/o-u:_=o*f/c}}else if(e.dynamic){const{width:t,height:s}=e.dynamic;_=t,f=s-u}else if(e.list)return{width:e.list.width,height:.8*e.list.width};const[w,y]=(0,o.M)(t.size||a.ZU.NORMAL);return{width:_*c/w,height:f*c/y}}},7253:(e,t,s)=>{"use strict";s.d(t,{BW:()=>i,CE:()=>r,Jz:()=>a,U6:()=>c});let r=[];const i=n();async function n(){return r=await(browser.contextualIdentities?.query({}))||[]}browser.contextualIdentities?.onCreated.addListener(n),browser.contextualIdentities?.onUpdated.addListener(n);const a=e=>o(e)?.cookieStoreId;function o(e){if(e)return r.find((t=>t.name===e))}function c(e,t){e.style.boxShadow=`0 2px 0 ${o(t)?.colorCode||"white"}`}},2036:(e,t,s)=>{"use strict";s.d(t,{Dg:()=>u,FJ:()=>g,KL:()=>d,Lf:()=>l,M3:()=>m,R:()=>h,Yb:()=>_,wz:()=>p});var r=s(8794),i=s(4323),n=s(7302),a=s(4162),o=(s(9074),s(9574)),c=s(6062);s(1962);const l=(0,n.Z)(""),d=(0,n.Z)("dial.html"),u=location.href.startsWith(d),h=e=>!!e&&e.license>a.G_.Home||!1,p=c.Dy?()=>r.P3.get():(0,o.m)((()=>r.P3.get())),m=()=>p().then((e=>!!e)),g=()=>p().then(h),_=(0,i.Lt)(g)},8794:(e,t,s)=>{"use strict";s.d(t,{L8:()=>y,Mz:()=>g,P3:()=>l,SR:()=>v,T6:()=>p,_V:()=>w,c9:()=>f,ci:()=>d,eX:()=>u,fX:()=>c,ne:()=>h,qA:()=>_,u9:()=>m,wd:()=>b});var r=s(910),i=s(6683),n=s(4323),a=s(7880),o=s(2447);const c=Object.freeze({type:i.O8.AUTO_GENERATED,value:0,position:i.X.FULL_WIDTH}),l=new r.F("user",(()=>null)),d=new r.F("weather_data",(()=>({})),{storageArea:"local"}),u=new r.F("last_dial_background",n.s6,{storageArea:"localStorage",localStorageTextOnly:!0}),h=new r.F("defaultGroup",n.s6,{storageArea:"localStorage"}),p=new r.F("_device_pixel_ratio",(()=>1)),m=new o.e("favicon",(()=>"128.png")),g=new r.F("_noNextOverride",(()=>!1)),_=(new r.F("lastReloads",(()=>({}))),new r.F("add_current_tabs",(()=>[]),{storageArea:"session"})),f=new r.F("add_image_to_dial",(()=>{}),{storageArea:"session"}),w=new r.F("copied_dial",(()=>null),{storageArea:"session"}),y=new r.F("cut_link",(()=>null),{storageArea:"session"}),v=new r.F("parent_reload",(()=>[]),{storageArea:"session"}),b=new r.F("sync_status",(()=>a.h),{storageArea:"session"})},6795:(e,t,s)=>{"use strict";var r,i,n,a;s.d(t,{Cr:()=>n,EM:()=>i,Gj:()=>a}),(e=>{e[e.none=0]="none",e[e.enlarge=1]="enlarge",e[e.open=2]="open",e[e.openNewTab=3]="openNewTab"})(r||(r={})),(e=>{e[e.NONE=0]="NONE",e[e.OPEN_GROUP=1]="OPEN_GROUP",e[e.NEXT_GROUP=2]="NEXT_GROUP",e[e.PREV_GROUP=3]="PREV_GROUP",e[e.HOME_GROUP=4]="HOME_GROUP"})(i||(i={})),(e=>{e[e.fillSpace=0]="fillSpace",e[e.center=1]="center",e[e.scroll=2]="scroll"})(n||(n={})),(e=>{e[e.NORMAL=0]="NORMAL",e[e.LOCK=1]="LOCK",e[e.HIDDEN=2]="HIDDEN"})(a||(a={}))},4099:(e,t,s)=>{"use strict";s.d(t,{O:()=>o});var r=s(3456),i=s(6062),n=s(6801);const a=new r.k;function o(e,t){i.Dy?a.notifyAll([e,t]):(0,n._z)({type:"updateFavicon",onlyIfMissing:!0,url:t,groupId:e})}},7552:(e,t,s)=>{"use strict";var r,i,n,a;s.d(t,{Pb:()=>i,ew:()=>n,mU:()=>a,p0:()=>r,yH:()=>o}),(e=>{e.DB_OP_READ_WRITE="readwrite",e.DB_OP_READONLY="readonly"})(r||(r={})),(e=>{e.NEXT="next",e.PREV="prev",e.NEXT_UNIQUE="nextunique",e.PREV_UNIQUE="prevunique"})(i||(i={})),(e=>{e.DB_IMAGE="image",e.DB_HISTORY="history",e.DB_ORIGINAL="original",e.DB_PREVIOUS="previous",e.DB_RUNTIME="runtime"})(n||(n={})),(e=>{e.GROUP_INDEX="group"})(a||(a={}));const o="backups_FileSystemDirectoryHandle"},1305:(e,t,s)=>{"use strict";s.d(t,{i:()=>o});var r=s(5524);var i=s(7552),n=s(4214),a=s(683);class o{name;version;static async withDB(e){const t=new o("group_speed_dial",10);try{return await e(t)}catch(t){throw(0,r.vV)("db operation failed",t,e.name),t}finally{t.close()}}promise;debugName;constructor(e,t){this.name=e,this.version=t,this.debugName=0,this.promise=this.open()}async open(){return this.promise=new Promise(((e,t)=>{const s=self.indexedDB.open(this.name,this.version);s.onupgradeneeded=e=>{(0,r.cO)("DB: onupgradeneeded");const n=s.result;n.onerror=n.onabort=t,n.objectStoreNames.contains(i.ew.DB_IMAGE)||n.createObjectStore(i.ew.DB_IMAGE,{keyPath:["url","group"]}),n.objectStoreNames.contains(i.ew.DB_ORIGINAL)||n.createObjectStore(i.ew.DB_ORIGINAL,{keyPath:["url","group"]}),n.objectStoreNames.contains(i.ew.DB_PREVIOUS)||n.createObjectStore(i.ew.DB_PREVIOUS,{keyPath:["url","group"]}),n.objectStoreNames.contains(i.ew.DB_HISTORY)||n.createObjectStore(i.ew.DB_HISTORY,{keyPath:"id",autoIncrement:!0}),n.objectStoreNames.contains(i.ew.DB_RUNTIME)||n.createObjectStore(i.ew.DB_RUNTIME,{keyPath:"key"});const a=s.transaction.objectStore(i.ew.DB_IMAGE);a.indexNames.contains(i.mU.GROUP_INDEX)||a.createIndex(i.mU.GROUP_INDEX,i.mU.GROUP_INDEX,{unique:!1})},s.onerror=t,s.onsuccess=()=>{const t=s.result;t.addEventListener("close",(()=>(0,r.cO)(`DB: closed unexpectedly ${this.debugName}`))),e(t)}}))}dbWeakTransactionStore(e,t,s){const i=e.transaction([t],s);return i.onerror=i.onabort=e=>(0,r.vV)(`DB ${t}`,e,s),i.objectStore(t)}dbTransaction(e,t,s){const i=e.transaction([t],s),n=new Promise(((e,n)=>{i.oncomplete=e,i.onerror=i.onabort=e=>{(0,r.vV)(`DB transaction ${t}`,e,s),n(e)}}));return[i,n]}async dbOperation(e,t,...s){return new Promise(((i,n)=>{const a=e[t].apply(e,s);a.onerror=e=>{(0,r.vV)(`DB op failed ${t}`,e,s),n(e)},a.onsuccess=()=>{i(a.result)}}))}async dbTransactionOperation(e,t,s,...r){const i=await this.promise;return new Promise((async(n,a)=>{const[o,c]=this.dbTransaction(i,e,t);this.dbOperation(o.objectStore(e),s,...r).then((e=>c.then((()=>n(e))))).catch(a)}))}async close(){(await this.promise).close()}async mapEachRecord(e,{map:t=((e,t)=>e),direction:s=i.Pb.NEXT,filter:n=((e,t)=>!0),filterMode:a="all"}={}){const o=(await this.promise).transaction([e],i.p0.DB_OP_READONLY);o.onerror=o.onabort=t=>(0,r.vV)(`DB mapEachRecord in ${e}`,t);const c=o.objectStore(e);return new Promise(((i,o)=>{const l=[];let d=0,u=0;const h=c.openCursor(null,s);h.onerror=t=>{(0,r.vV)(`DB ${e}`,t),o()},h.onsuccess=function(){const e=this.result;if(e){const s=n(e.value,u++);if("take_while"===a&&!s)return void i(l);s&&l.push(t(e.value,d++)),e.continue()}else i(l)}}))}async updateEachRecordAsync(e,t){const s=await this.dbTransactionOperation(e,i.p0.DB_OP_READONLY,"getAllKeys");return await(0,a.f)(s.map((s=>async()=>{const r=await this.dbTransactionOperation(e,i.p0.DB_OP_READONLY,"get",s).catch(console.error);if(!r)return!1;return await t(r)&&await this.dbTransactionOperation(e,i.p0.DB_OP_READ_WRITE,"put",r),!0})))}async getThumbnails(e){const t=await this.promise,s=this.dbWeakTransactionStore(t,i.ew.DB_IMAGE,i.p0.DB_OP_READONLY).index(i.mU.GROUP_INDEX),r=await this.dbOperation(s,"getAll",e);return(0,n.W)(r,"url")}async moveDbDial(e,t,s,r=s){const i=await this.getDbDial(e,s);return!!i&&(await this.removeDial(t,r),await this.updateDial(t,r,(e=>{const t=Object.assign(i,e);Object.assign(e,t)}),!0),!0)}async updateDial(e,t,s,n=!0,a=!0){const[o,c]=this.dbTransaction(await this.promise,i.ew.DB_IMAGE,i.p0.DB_OP_READ_WRITE),l=o.objectStore(i.ew.DB_IMAGE),d=await this.dbOperation(l,"get",[t,e]);if(!n&&!d)throw(0,r.vV)("forbidden dbDial creation",null,[t,e]),Error("forbidden dbDial creation");const u=d||{url:t,group:e};return a&&(this.backupPrevious({...u}),u.version=Date.now()),delete u.img,delete u.icon,s(u),await this.dbOperation(l,"put",u),await c,u}async backupPrevious(e){await this.dbTransactionOperation(i.ew.DB_PREVIOUS,i.p0.DB_OP_READ_WRITE,"put",e)}async getDialLikeData(e,t,s){if(!isNaN(e)&&t)return await this.dbTransactionOperation(s,i.p0.DB_OP_READONLY,"get",[t,e])}async getDbDial(e,t){return await this.getDialLikeData(e,t,i.ew.DB_IMAGE)}async removeDial(e,t){await this.dbTransactionOperation(i.ew.DB_IMAGE,i.p0.DB_OP_READ_WRITE,"delete",[t,e]),await this.dbTransactionOperation(i.ew.DB_PREVIOUS,i.p0.DB_OP_READ_WRITE,"delete",[t,e]),await this.dbTransactionOperation(i.ew.DB_ORIGINAL,i.p0.DB_OP_READ_WRITE,"delete",[t,e])}async deleteDbDial(e,t){if(isNaN(e)||!t)return;await this.dbTransactionOperation(i.ew.DB_IMAGE,i.p0.DB_OP_READ_WRITE,"delete",[t,e]);return!0}async getPrevious(e,t){return this.getDialLikeData(e,t,i.ew.DB_PREVIOUS)}async restorePreviousThumbnail(e,t){const s=await this.getPrevious(e,t);return!!s&&(await this.updateDial(e,t,(e=>{Object.assign(e,{hash:void 0},s,{version:e.version})}),!1),!0)}}},8289:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});const r=e=>/^#(\d+)$/.test(e||"")},539:(e,t,s)=>{"use strict";function r(){return{devicePixelRatio:window.devicePixelRatio}}s.d(t,{c:()=>r}),(0,s(2031).g)("non-background")},5444:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});var r=s(5229),i=s(8289),n=s(6672);function a(e){return e=(0,r.I)(e||""),(0,i.Z)(e)?"":(0,n.lX)(e,!0)}},1596:(e,t,s)=>{"use strict";function r(e,t){let s=0;for(let r=0;r<e.length;r++)for(let i=0,n=e[r];i<n.dials.length;i++)if(t(n.dials[i],n,s++,i))return n.dials[i]}s.d(t,{E:()=>r})},3683:(e,t,s)=>{"use strict";function r(e="",t=[]){if(!(e=e.trim())||t.some((t=>e.startsWith(t))))return"";try{return new URL(e).href}catch(t){try{return new URL("http://"+e).href}catch(e){return""}}}s.d(t,{d:()=>r})},4257:(e,t,s)=>{"use strict";s.d(t,{EK:()=>a,RO:()=>o,re:()=>n});var r=s(4323),i=s(744);const[n,a]=(0,r.Mj)(),o=Promise.all([n,i.b])},6683:(e,t,s)=>{"use strict";var r,i,n,a,o,c,l,d,u,h,p,m,g,_,f,w,y,v,b,E,D,A,I,S,k;s.d(t,{$C:()=>u,C2:()=>E,NO:()=>o,O8:()=>i,PX:()=>m,Px:()=>l,Q0:()=>D,Rv:()=>p,TI:()=>c,Up:()=>y,X:()=>n,ZU:()=>g,cG:()=>r,d0:()=>w,hq:()=>f,kh:()=>d,kw:()=>b,oB:()=>A,pK:()=>k,sf:()=>_,tR:()=>I,xk:()=>a}),(e=>{e.NONE="",e.COLOR="color",e.GRADIENT="gradient",e.URL="url",e.FILE="data",e.BING="bing",e.PAGE="page"})(r||(r={})),(e=>{e[e.AUTO_GENERATED=0]="AUTO_GENERATED",e[e.FILE=1]="FILE",e[e.URL=2]="URL",e[e.PUBLIC=3]="PUBLIC",e[e.MAKE_TEXT=4]="MAKE_TEXT",e[e.BLANK=5]="BLANK",e[e.CLIPBOARD=6]="CLIPBOARD"})(i||(i={})),(e=>{e[e.CENTER=0]="CENTER",e[e.FULL_WIDTH=1]="FULL_WIDTH",e[e.COVER=2]="COVER",e[e.FILL=3]="FILL"})(n||(n={})),(e=>{e[e.solid=0]="solid",e[e.transparent=1]="transparent",e[e.legacy=9]="legacy"})(a||(a={})),(e=>{e[e.solid=0]="solid",e[e.shadow=1]="shadow",e[e.none=9]="none"})(o||(o={})),(e=>{e[e.CURRENT_TAB=0]="CURRENT_TAB",e[e.NEW_FOCUSED_TAB=1]="NEW_FOCUSED_TAB",e[e.NEW_TAB=2]="NEW_TAB",e[e.NEW_WINDOW=3]="NEW_WINDOW",e[e.NEW_PRIVATE_WINDOW=4]="NEW_PRIVATE_WINDOW"})(c||(c={})),(e=>{e[e.ASK=0]="ASK",e[e.RETURN=1]="RETURN",e[e.STAY=2]="STAY"})(l||(l={})),(e=>{e[e.URL=0]="URL",e[e.GROUP=1]="GROUP",e[e.TEXT=3]="TEXT",e[e.SEARCH=4]="SEARCH",e[e.LIVE=5]="LIVE",e[e.MULTI=6]="MULTI",e[e.SESSION=7]="SESSION",e[e.TOP_SITES=8]="TOP_SITES",e[e.TIMER=9]="TIMER",e[e.WEATHER=10]="WEATHER"})(d||(d={})),(e=>{e[e.countdown=0]="countdown",e[e.alarm=1]="alarm",e[e.stopwatch=2]="stopwatch"})(u||(u={})),(e=>{e[e.FLEXIBLE=0]="FLEXIBLE",e[e.FIXED=1]="FIXED"})(h||(h={})),(e=>{e[e.FILL=0]="FILL",e[e.CENTER=1]="CENTER",e[e.SCROLL=2]="SCROLL",e[e.DYNAMIC=3]="DYNAMIC",e[e.GRID=4]="GRID",e[e.LIST=5]="LIST"})(p||(p={})),(e=>{e[e.row=0]="row",e[e.column=1]="column"})(m||(m={})),(e=>{e[e.NORMAL=0]="NORMAL",e[e.SMALL=1]="SMALL",e[e.TINY=2]="TINY",e[e.MICRO=3]="MICRO",e[e.V_HALF=4]="V_HALF",e[e.H_HALF=5]="H_HALF",e[e.V_THIRD=6]="V_THIRD",e[e.H_THIRD=7]="H_THIRD",e[e.V_FOURTH=8]="V_FOURTH",e[e.H_FOURTH=9]="H_FOURTH"})(g||(g={})),(e=>{e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e[e.FILE=2]="FILE",e[e.URL=3]="URL",e[e.NONE=4]="NONE"})(_||(_={})),(e=>{e[e.linear=0]="linear",e[e.radialEllipse=1]="radialEllipse",e[e.radialCircle=2]="radialCircle"})(f||(f={})),(e=>{e[e.AUTO=0]="AUTO",e[e.CUSTOM=1]="CUSTOM"})(w||(w={})),(e=>{e[e.REFRESH_ALL=0]="REFRESH_ALL",e[e.REFRESH_THIS_GROUP=1]="REFRESH_THIS_GROUP",e[e.REFRESH_MISSING=2]="REFRESH_MISSING",e[e.REFRESH_GROUP_DIALS=3]="REFRESH_GROUP_DIALS",e[e.REFRESH_AUTO_RELOAD=4]="REFRESH_AUTO_RELOAD"})(y||(y={})),(e=>{e[e.spinner=1]="spinner",e[e.hidden=2]="hidden"})(v||(v={})),(e=>{e[e.ReloadEvery=0]="ReloadEvery",e[e.Daily=1]="Daily",e[e.Monthly=2]="Monthly",e[e.WeekDays=3]="WeekDays",e[e.Weekends=4]="Weekends",e[e.Monday=5]="Monday",e[e.Tuesday=6]="Tuesday",e[e.Wednesday=7]="Wednesday",e[e.Thursday=8]="Thursday",e[e.Friday=9]="Friday",e[e.Saturday=10]="Saturday",e[e.Sunday=11]="Sunday"})(b||(b={})),(e=>{e[e.openAll=0]="openAll",e[e.nothing=1]="nothing"})(E||(E={})),(e=>{e[e.openLink=0]="openLink",e[e.openAll=1]="openAll"})(D||(D={})),(e=>{e[e.manual=0]="manual",e[e.createdAsc=1]="createdAsc",e[e.createdDesc=2]="createdDesc",e[e.nameAsc=3]="nameAsc",e[e.nameDesc=4]="nameDesc",e[e.urlAsc=5]="urlAsc",e[e.urlDesc=6]="urlDesc"})(A||(A={})),(e=>{e.General="general",e.Visual="visual",e.Background="background",e.Gestures="gestures",e.Settings="settings",e.TopSites="topSites"})(I||(I={})),(e=>{e[e.browserExit=0]="browserExit",e[e.tabClose=1]="tabClose"})(S||(S={})),(e=>{e[e.unlock=0]="unlock",e[e.rememberPassword=1]="rememberPassword",e[e.setupPassword=2]="setupPassword",e[e.changePassword=3]="changePassword",e[e.recoveryPassword=4]="recoveryPassword"})(k||(k={}))},2572:(e,t,s)=>{"use strict";s.d(t,{Fr:()=>i});var r=s(9074);const i=(e,t,s)=>`${r.UB}/pub/pub_img/${e}/0-${t}.${s}`},9074:(e,t,s)=>{"use strict";s.d(t,{As:()=>l,J8:()=>g,Nd:()=>m,U4:()=>h,UB:()=>r,Vd:()=>n,XO:()=>p,Y6:()=>_,au:()=>o,dD:()=>u,eX:()=>a,jO:()=>f,jg:()=>i,nR:()=>c,ve:()=>d});const r="https://group-speed-dial.fastaddons.com",i=r,n=r,a=r,o="https://addons.mozilla.org/addon/groupspeeddial",c="https://chromewebstore.google.com/detail/group-speed-dial/imfeikbeimbfpmgfkkmjekabdehiiajc",l="https://microsoftedge.microsoft.com/addons/detail/group-speed-dial/kojjikkbfcjakhlofbjbnlmibabmmcie",d="https://github.com/fastaddons/GroupSpeedDial/issues",u="https://github.com/fastaddons/GroupSpeedDial/wiki/Encryption-details",h=`${r}/shared_links`,p="https://github.com/fastaddons/GroupSpeedDial/wiki",m="https://github.com/fastaddons/GroupSpeedDial/wiki/PRO-version-features",g="https://github.com/fastaddons/GroupSpeedDial/wiki/Cloud-Dials-web-page",_="https://www.youtube.com/watch?v=wvT4w-R8hJU",f="https://www.youtube.com/watch?v=p0BMtKJGYhU"},519:(e,t,s)=>{"use strict";s.d(t,{ak:()=>o,mv:()=>n,rH:()=>a});var r=s(7302),i=s(7283);const n="svg/globe.svg",a=(0,r.Z)(n),o=(0,i.H)("icons/tags/tag (65).svg")},6202:(e,t,s)=>{"use strict";s.d(t,{w:()=>i});const r=new Set;async function i(e){if(r.has(e))return;r.add(e);const t=e;await browser.declarativeNetRequest.updateSessionRules({removeRuleIds:[t],addRules:[{id:t,condition:{tabIds:[e],resourceTypes:["sub_frame"]},action:{type:"modifyHeaders",responseHeaders:[{header:"x-frame-options",operation:"remove"},{header:"content-security-policy",operation:"remove"},{header:"permissions-policy",operation:"remove"}],requestHeaders:[{header:"sec-fetch-dest",operation:"remove"}]}}]})}},744:(e,t,s)=>{"use strict";s.d(t,{b:()=>n});var r=s(4323);var i=s(6801);(0,s(2031).g)("non-background");const n=async function({name:e="",callback:t,retryCount:s,initialDelay:i=0,repeatDelay:n=0,increasingDelay:a=!1}){let o;i&&await(0,r.BK)(i);for(let e=0;e<s;e++){o=t(e);if(await o.then(r.x2,(e=>{})))break;await(0,r.BK)(a?n*e:n)}return o}({retryCount:12,repeatDelay:200,callback:()=>(0,i._z)({type:"health_check"}).then((e=>e||Promise.reject("BS not responding")))})},6635:(e,t,s)=>{"use strict";s.d(t,{S:()=>p});var r=s(910),i=s(6062),n=s(9180),a=s(170);var o=s(8408),c=s(2036),l=s(7384),d=s(6801),u=s(4590),h=s(2846);const p=new class{storageKey;backgroundScriptCallback;storage;alarmName;constructor(e,t){this.storageKey=e,this.backgroundScriptCallback=t,this.storage=new r.F(this.storageKey,(()=>({lastEntered:Date.now(),isDisabled:!0,remindInHours:3}))),this.alarmName=`help_remember_${this.storageKey}`,i.Dy&&((0,a.Q)(),browser.alarms.onAlarm.addListener((({name:e,scheduledTime:t})=>{e===this.alarmName&&this.backgroundScriptCallback()})),this.checkAndSchedule())}async checkAndSchedule(){const{isDisabled:e,lastEntered:t,remindInHours:s}=await this.storage.get();if(e)return;const r=t+(0,n.xE)(s)-Date.now();browser.alarms.create(this.alarmName,{delayInMinutes:(0,n.$L)(r)})}async setState(e){await this.storage.update((t=>(t.isDisabled=!e,t))),e&&this.checkAndSchedule()}async restartNewCycle(e){await this.storage.reset(),await this.setState(e)}async remembered(){await this.storage.update((e=>(e.lastEntered=Date.now(),e.remindInHours=Math.min(720,2*e.remindInHours),e))),this.checkAndSchedule()}}("help_remember_pass",(async()=>{const[e]=await browser.tabs.query({title:(0,u.tr)("pwd_forget_warning")});if(e||!h.M.METADATA.hasPassword())return;const t=await(0,o.K)(c.KL,{inNewTab:!0,active:!1});await(0,l.p)(t.id),(0,d.hC)(t.id,{type:"help_remember_pwd"})}))},8204:(e,t,s)=>{"use strict";s.d(t,{e:()=>u});var r=s(910),i=s(5017),n=s(6683),a=s(6801),o=s(7398),c=s(2062),l=s(4323),d=s(4721);class u{sessionStoreKey;getHashOptions;unlockOptions;verifyCRC_GetSecret;resetPasswordAndData;helpRememberPassword;cryptoStore;constructor(e,t,s,i,n,a){this.sessionStoreKey=e,this.getHashOptions=t,this.unlockOptions=s,this.verifyCRC_GetSecret=i,this.resetPasswordAndData=n,this.helpRememberPassword=a,this.cryptoStore=new r.F(this.sessionStoreKey,(()=>null),{storageArea:"session"})}get canResetPassword(){return!!this.resetPasswordAndData}get passwordHint(){return this.getHashOptions()?.hint}async savePassword(e){await this.cryptoStore.set({hash:e})}async resetPassword(){this.canResetPassword&&(await(this.helpRememberPassword?.setState(!1)),await(this.resetPasswordAndData?.()))}async verifyPassword(e,t=!0){const s=this.getHashOptions();if(!s)return!1;const r=await(0,o.Er)(e,s),i=await this.verifyHashAndGetSecret(r.hash),n=!!await new c.k(r).unwrapKey(i||s.secret).catch(l.s6);return n&&t&&await this.savePassword(r.hash),n}async verifyHashAndGetSecret(e){if(!this.verifyCRC_GetSecret)return"";const t=await(0,d.d)(e,"SHA-256");return this.verifyCRC_GetSecret?.(t)}async lock(){await this.cryptoStore.remove()}async isUnlocked(){return!!await this.cryptoStore.get()}async unlockIfNeeded(e){{const e=await this.cryptoStore.get();if(e)return await this.verifyHashAndGetSecret(e.hash),!0}const t=await(await(0,i.C)()).pwdPrompt(this,n.pK.unlock,e);return t&&(0,a._z)({type:"broadcast",message:{type:"redraw_dials"}}),t}async decryptData(e){await this.unlockIfNeeded();const t=await this.cryptoStore.get();if(t)return await(this.verifyCRC_GetSecret?.(await(0,d.d)(t.hash,"SHA-256"))),await e.decrypt(t.hash)}lockKeyVaultEverywhere(){(0,a._z)({type:"broadcast",message:{type:"keyVault_lock"}})}}},5017:(e,t,s)=>{"use strict";s.d(t,{C:()=>r});const r=()=>Promise.all([s.e(274),s.e(353)]).then(s.bind(s,7774))},5296:(e,t,s)=>{"use strict";s.d(t,{p:()=>h});var r=s(4323),i=s(1471),n=s(6004),a=s(3091),o=s(9598),c=s(6690);var l=s(7865),d=s(6777),u=s(1962);const h=(()=>{let e=r.lQ,t=!1;const s=()=>(0,u.$H)("message-box");return l.W.then((()=>function(e,{loadPositionOnStart:t=!0}={}){if(!e||e.firstElementChild?.hasAttribute("data-draggable-top"))return;e.insertAdjacentElement("afterbegin",(0,o.z)("draggable-top",{"data-draggable-top":0,style:"cursor: move; position: absolute; width: 100%; top: 0; left: 0; height: 15px;"}));const s=(0,a.$)(e,{dontMovePredicate:t=>t.target!==e&&!t.target.hasAttribute("data-draggable-top"),onMoveStart:r=>{if(!t)return;const i=e.getBoundingClientRect();s.setPosition(i.x,i.y),e.style.right=e.style.bottom="auto"}});s.setCallback(((t,s,r)=>{(0,n.eC)(e,"top",(0,c.px)(s)),(0,n.eC)(e,"left",(0,c.px)(t))}))}(s()))),{get isVisible(){return!s().classList.contains("hidden")},show:h,showError:function(e,r,i){h(e,r,i),t=!0,s().querySelectorAll("textarea[readonly]").forEach((e=>browser.runtime.getBrowserInfo().then((t=>browser.runtime.getPlatformInfo().then((s=>e.textContent=`${e.textContent}\nVersion: ${browser.runtime.getManifest().version}; OS: ${JSON.stringify(s)}; Browser: ${JSON.stringify(t)};`.trim()))))))},hide:p};function h(n,a,{yesText:o,noText:c,elseText:l,onYes:h=r.bJ,onNo:m=r.lQ,onElse:g=r.lQ,onClose:_=r.lQ,onFinally:f=r.lQ}={}){if(t)return;const w=s(),y=w.querySelector(".close-box");e(),e=_;const v=()=>{_(),E()};w.onkeydown=(0,i.ak)(v),w.classList.toggle("hidden",!1),(0,u.$H)("message-title").textContent=n,(0,u.$H)("message-text").replaceChildren(a),(0,u.$H)("message-yes").textContent=o||"",(0,u.$H)("message-no").textContent=c||"",(0,u.$H)("message-else").textContent=l||"",(0,u.$H)("message-yes").classList[o?"remove":"add"]("hidden"),(0,u.$H)("message-no").classList[c?"remove":"add"]("hidden"),(0,u.$H)("message-else").classList[l?"remove":"add"]("hidden");const b=!o&&!c&&!l;function E(){p(),f()}return w.onmousedown=e=>{b&&e.button===d.w.LEFT&&!e.composedPath().some((e=>e instanceof HTMLAnchorElement))&&e.composedPath().every((e=>!e?.hasAttribute?.("data-draggable-top")&&!e?.hasAttribute?.("data-resize-corner")))&&E()},y.classList[b?"add":"remove"]("hidden"),(0,u.$H)("message-yes").onclick=async()=>{!0!==await h()&&E()},(0,u.$H)("message-no").onclick=()=>{m(),E()},(0,u.$H)("message-else").onclick=()=>{g(),E()},y.onclick=v,w}function p(){s().classList.toggle("hidden",!0),e=r.lQ}})()},6258:(e,t,s)=>{"use strict";s.d(t,{y:()=>o});var r=s(8408),i=s(7253),n=s(1374),a=s(2036);function o({links:e,inNewTab:t,cookieStoreId:s,containerName:o,active:c,inNewWindow:l,nextToCurrent:d,windowId:u,inIncognitoWindow:h,stopOpenerTabId:p}){const m=(0,n.BO)(e).map((e=>e.startsWith("#")&&!isNaN(parseInt(e.slice(1)))?a.KL+e:e));return(0,r.K)(m,{inNewTab:t,nextToCurrent:d,active:c,stopOpenerTabId:p,inNewWindow:l,windowId:u,forceIncognitoWindow:h,cookieStoreId:s||(0,i.Jz)(o)})}},2221:(e,t,s)=>{"use strict";s.d(t,{KY:()=>u,j_:()=>p,lw:()=>h});var r=s(3943),i=s(7548),n=s(4069),a=s(910),o=(s(2572),s(2665),s(5048)),c=s(6663),l=s(6683);const d=()=>({ICON:"/128.png",PRIMARY_COLOR:o.hx,THEME:"default",TEMPLATE_COLOR:r.z.dark,DEFAULT_RELOAD_METHOD:c.P.default,AR_SCREEN_RESOLUTION:l.d0.AUTO,VR_DEFAULT_WIDTH:1280,SIDE_BAR_SIZE:256,DIAL_PADDING:12,SPLIT_DIAL_GAP:50,DIAL_BORDER_TYPE:l.NO.solid,DIAL_SHADOW_BLUR:10,DIAL_TITLE_CENTER:!0,DIAL_BORDER_RADIUS:0,DIAL_BORDER_COLOR:"#888888",DIAL_SHADOW_COLOR:"#888888",DIAL_HEADER_STYLE:l.xk.solid,DIAL_DARK_HEAD_BACKGROUND:"#222222",DIAL_LIGHT_HEAD_BACKGROUND:"#FFFFFF",MAX_FRAME_RELOAD_TIME:10,RELOAD_PLUS_DELAY:5,NORMAL_RELOAD_DELAY:100,BY_VISIT_DELAY:800,AUTO_THUMBNAIL_PAGES:"youtube.com\nm.youtube.com\nyoutu.be\nvimeo.com",AUTO_THUMBNAIL_POSITION:l.X.FULL_WIDTH,ACTIVATE_GROUP_HOVER_DELAY:25,DIAL_FONT_SIZE:16,DIAL_FONT_FAMILY:"",KEY_DELAY:950,DISABLED_DIALS_MENU:[],DISABLED_GROUPS_MENU:[],GROUPS_SIZE:o.O5,GROUPS_HEIGHT:o.$K,GROUP_PADDING:o.b3,GROUP_NAME_AS_TITLE:!0,GROUP_ICON_IN_TITLE:!0,USER_CONSENT_GOOGLE_FAVICON:!0,ACTIVE_PAGE_DETECTION:!0,GESTURE_BTN_RIGHT:!0,BACKGROUND_URL:"https://source.unsplash.com/random?orientation=landscape&size=1920x1080",AUTO_BACKUP_DAYS_INTERVAL:14,AUTO_BACKUP_KEEP_COUNT:4,AUTO_BACKUP_FOLDER_NAME:"gsd",VISIT_JPEG_HIGH_RESOLUTION:!0,ANDROID_MIN_DIAL_SIZE:100}),u=new a.F("options",d,void 0),h=d(),p=(async()=>(Object.assign(h,{...await n.Vq?{AR_DISABLE_THIS_DEVICE:!0,DIAL_PADDING:4,DISABLE_QUICK_EDIT:!0}:{}}),(0,i.Q)(u,h)))()},1481:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var r=s(1962),i=s(519),n=s(6672);const a=[["http://localhost","svg/localhost (7).svg"],["http",i.mv],["about:","png/domains/about-blank.svg"],[`${r.$b}://extensions`,"icons/tags/tag (25).svg"],[`${r.$b}://settings`,"svg/gear.svg"]];function o(e){for(const[t,s]of a){if("http"===t&&(0,n.K9)(e))return"svg/ip.svg";if(e.startsWith(t))return s}return i.mv}},4298:(e,t,s)=>{"use strict";s.d(t,{Bq:()=>a,In:()=>n,kn:()=>o});var r=s(8282),i=s(2036);const n="/pro.png",a=r.tT,o=()=>({proIcon:(0,i.FJ)().then((e=>e?"":n)),proLink:a})},9439:(e,t,s)=>{"use strict";s.d(t,{CX:()=>l,i7:()=>u,vt:()=>d});var r=s(7302),i=s(1319),n=s(4069),a=s(2036),o=s(2221),c=s(1792);const l=(0,r.Z)("reload/reload.html"),d=(0,i.G)()&&a.Dg;function u(e){const t=e?.DIAL_PADDING??o.lw.DIAL_PADDING;return d&&n.m0?Math.max(32,5*t):c.b?t/2:t}},4424:(e,t,s)=>{"use strict";s.d(t,{W:()=>r,q:()=>i});const r=(e,t)=>e%t,i=(e,t)=>Math.floor(e/t)},6801:(e,t,s)=>{"use strict";s.d(t,{CB:()=>o,_z:()=>n,hC:()=>a});var r=s(6062),i=s(6304);const n=e=>browser.runtime.sendMessage(e),a=async(e,t,s)=>browser.tabs.sendMessage(e,t,s),o=async e=>r.Dy?(0,i.W)(e,{}):browser.runtime.sendMessage(e)},2466:(e,t,s)=>{"use strict";s.d(t,{K:()=>l});var r=s(4323),i=s(3660),n=s(6801),a=s(2462),o=s(9676),c=s(5524);function l(e,t,s={}){return(0,o.w)(2e3,(()=>(0,c.vV)(`hideScrollbars timeout: ${e}, ${t}`)),(()=>async function(e,t,{frameId:s,frameName:o,scaleDown:c}={}){const l=((0,r.Et)(s)?s:o?await(0,i.F)(o,e):void 0)||0;{const t=l?[l]:(await browser.webNavigation.getAllFrames({tabId:e}).catch((()=>[{frameId:0}]))).map((e=>e.frameId));await Promise.all(t.map((t=>browser.scripting.executeScript({injectImmediately:!0,target:{tabId:e,frameIds:[t]},files:[...(0,a.K_)(),"/content_scripts/cs_prepare_shooting.js"]}).catch(r.lQ))))}c&&await(0,n.hC)(e,{type:"cs_scale_down",scaleDown:c},{frameId:s}).catch(r.lQ)}(e,0,s)))}},7080:(e,t,s)=>{"use strict";s.d(t,{HV:()=>n,Lo:()=>a,c3:()=>o,f$:()=>r});var r,i=s(7302);(e=>{e[e.CUSTOM=0]="CUSTOM",e[e.WEB_SEARCH=1]="WEB_SEARCH",e[e.TRANSLATE=2]="TRANSLATE",e[e.VIDEO=3]="VIDEO",e[e.SOCIAL_MEDIA=4]="SOCIAL_MEDIA",e[e.MAPS=5]="MAPS",e[e.MUSIC=6]="MUSIC",e[e.MOVIES=7]="MOVIES",e[e.OTHERS=8]="OTHERS"})(r||(r={}));const n=[{id:0,icon:""},{id:1,icon:""},{id:2,icon:""},{id:3,icon:""},{id:4,icon:""},{id:5,icon:""},{id:6,icon:""},{id:7,icon:""},{id:8,icon:""}];var a;(e=>{e.DUCK_DUCK_GO="DUCK_DUCK_GO",e.GOOGLE="GOOGLE",e.GMAIL="GMAIL",e.BING="BING",e.YANDEX="YANDEX",e.BRAVE="BRAVE",e.YAHOO="YAHOO",e.BAIDU="BAIDU",e.QWANT="QWANT",e.ECOSIA="ECOSIA",e.SEZNAM="SEZNAM",e.TRANSLATE_EN="TRANSLATE_EN",e.TRANSLATE_MICROSOFT_EN="TRANSLATE_MICROSOFT_EN",e.TRANSLATE_DEEPL_EN="TRANSLATE_DEEPL_EN",e.TRANSLATE_YANDEX_EN="TRANSLATE_YANDEX_EN",e.TRANSLATE_BAIDU_EN="TRANSLATE_BAIDU_EN",e.WIKIPEDIA="WIKIPEDIA",e.YOUTUBE="YOUTUBE",e.GOOGLE_MAPS="GOOGLE_MAPS",e.TWITTER="TWITTER",e.FACEBOOK="FACEBOOK"})(a||(a={}));const o={GOOGLE:{url:"https://www.google.com/search?q=%s",icon:"google",category:1},GMAIL:{url:"https://mail.google.com/mail/u/0/#search/%s",icon:"gmail",category:8},QWANT:{url:"https://www.qwant.com/?q=%s",icon:"qwant",category:1},BRAVE:{url:"https://search.brave.com/search?q=%s",icon:"brave",category:1},BING:{url:"https://www.bing.com/search?q=%s",icon:"bing(2)",category:1},YAHOO:{url:"https://search.yahoo.com/search?p=%s",icon:"yahoo",category:1},YANDEX:{url:"https://yandex.com/search/?text=%s",icon:"yandex",category:1},BAIDU:{url:"https://www.baidu.com/s?wd=%s",icon:"baidu(1)",category:1},SEZNAM:{url:"https://search.seznam.cz/?q=%s",icon:"seznam",category:1},DUCK_DUCK_GO:{url:"https://duckduckgo.com/?q=%s",icon:"duckduckgo",category:1},TRANSLATE_EN:{url:"https://translate.google.com/#auto/en/%s",icon:"translate(1)",category:2},TRANSLATE_MICROSOFT_EN:{url:"https://www.bing.com/translator?text=%s",icon:"bing(3)",category:2},TRANSLATE_BAIDU_EN:{url:"https://fanyi.baidu.com/#auto/en/%s",icon:"baidu_translate",category:2},TRANSLATE_DEEPL_EN:{url:"https://www.deepl.com/translator#?/en/%s",icon:"deepl_v2",category:2},TRANSLATE_YANDEX_EN:{url:"https://translate.yandex.com/?text=%s",icon:"yandex",category:2},YOUTUBE:{url:"https://www.youtube.com/results?search_query=%s",icon:"youtube-symbol",category:3},GOOGLE_MAPS:{url:"https://www.google.com/maps/search/%s",icon:"google_maps",category:5},WIKIPEDIA:{url:"https://en.wikipedia.org/wiki/Special:Search?search=%s",icon:"wikipedia(1)",category:8},TWITTER:{url:"https://twitter.com/search?q=%s",icon:"twitter",category:4},FACEBOOK:{url:"https://www.facebook.com/search/top/?q=%s",icon:"facebook",category:4},ECOSIA:{url:"https://www.ecosia.org/search?q=%s",icon:"ecosia-icon",category:1}};Object.values(o).forEach((e=>{e.icon=(0,i.Z)(`svg/search_providers/${e.icon}.svg`)})),Object.freeze(o)},2542:(e,t,s)=>{"use strict";s.d(t,{S:()=>i,Z:()=>r});const r=e=>e.type===i,i="cp"},1650:(e,t,s)=>{"use strict";s.d(t,{v:()=>i});var r=s(4069);let i=!0;r.Vq.then((e=>{e&&(i=!1)}))},5717:(e,t,s)=>{"use strict";s.d(t,{M6:()=>a,uP:()=>o});var r=s(6683),i=s(1484),n=s(1374);class a{static validateAndFixClusters(e){const t=[];for(let s=0;s<e.length;s++){const a=e[s],o=a.size||r.ZU.NORMAL;if(o===r.ZU.NORMAL){t.push(a);continue}const c=(0,i.Q)(o),l=(0,n.v6)(e.slice(s),((e,t)=>(e.size||r.ZU.NORMAL)===o&&t<c));t.push(...l),s+=Math.max(0,l.length-1);const d=c-l.length;d>0&&t.push(...Array.from({length:d},(()=>({size:o}))))}return t}static dialsToClusters(e){const t=Array();for(let s=0;s<e.length;s++){const n=e[s],a=n.size||r.ZU.NORMAL;if(a!==r.ZU.NORMAL){const r=Array(),n=(0,i.Q)(a),o=s;for(let t=0;t<n;t++,s++)r.push(e[s]);t.push(new c(r)),s=o+n-1}else t.push(new o(n))}return t}static clustersToDials(e){const t=Array();for(let s=0;s<e.length;s++){const r=e[s];r.dials?t.push(...r.dials):t.push(r.dial)}return t}equalsTo(e){return this.dial===e.dial}includes(e){return this.dial===e||!!this.dials?.includes(e)}}class o extends a{dial;dials;constructor(e){super(),this.dial=e,this.dials=void 0}isEmptyDial(){return this.dial.isEmptyDial()}}class c extends a{dials;dial;constructor(e){super(),this.dials=e,this.dial=void 0}isEmptyDial(){return this.dials.every((e=>e.isEmptyDial()))}equalsTo(e){return e.dials?.length===this.dials.length&&e.dials.every(((e,t)=>e===this.dials[t]))}}},7644:(e,t,s)=>{"use strict";s.d(t,{_:()=>g});var r=s(6683),i=s(6419),n=s(2742),a=s(9501),o=s(8873),c=s(1416),l=s(2806),d=s(9719),u=s(6684),h=s(8032),p=s(7683),m=s(1360);function g(e,t,s){switch(t.type){case r.kh.URL:return new i.O(e,s,t);case r.kh.LIVE:return new n.r(e,s,t);case r.kh.GROUP:return new a.O(e,s,t);case r.kh.TEXT:return new o.i(e,s,t);case r.kh.SEARCH:return new c.t(e,s,t);case r.kh.MULTI:return new l.U(e,s,t);case r.kh.SESSION:return new u.F(e,s,t);case r.kh.TOP_SITES:return new h.O(e,s,t);case r.kh.TIMER:return new p.W(e,s,t);case r.kh.WEATHER:return new m.r(e,s,t);default:return new d.I(e,s,t)}}},4046:(e,t,s)=>{"use strict";s.d(t,{h:()=>l});var r=s(6683),i=(s(4323),s(5048)),n=s(1305),a=s(4352),o=s(5444),c=s(1962);class l{index;groupId;domId;type;url;getAbsoluteURL(){return this.url||""}name;size;note;created;get gridAreaName(){return`d${this.created}`}get areaNumber(){return this.created||this.index+1e3}thumbnail;crop;reload;visual;settings;distraction;text;providers;live;multi;session;topSites;timer;weather;constructor(e,t){this.index=e,this.groupId=t,this.domId=`dial_${this.index}`,this.size||(this.size=r.ZU.NORMAL)}isSingleLinkDial(){return!1}isLinkDial(){return!1}getLinks(){return this.isSingleLinkDial()?[this.url]:this.multi?this.multi.links.map((e=>e.url)):[]}isGroupDial(){return!1}isTextDial(){return!1}isSearchDial(){return!1}isLiveDial(){return!1}isUrlDial(){return!1}isMultiDial(){return!1}isWeatherDial(){return!1}isTimerDial(){return!1}isSessionDial(){return!1}isTopSitesDial(){return!1}isEmptyDial(){return!1}isNotEmptyDial(){return!this.isEmptyDial()}includesLinkCore(e){return this.isSingleLinkDial()&&(0,i.Ty)(this.url)===e||!!this.multi?.links.some((t=>(0,i.Ty)(t.url)===e))}hash(){return`${this.type};${this.size};${this.name};${this.note};${this.created||0};${this.getLinks().join("")};${this.text?.value||""};${JSON.stringify(this.providers)}`}compare(e){return this.index===e.index&&this.groupId===e.groupId}canHaveThumbnail(){return!1}async hasCustomThumbnail(){if(!this.thumbnail||this.thumbnail.type===r.O8.AUTO_GENERATED||!this.canHaveThumbnail())return!1;const e=await n.i.withDB((async e=>e.getDbDial(this.groupId,this.url)));return!(!e?.imgBlob&&!e?.img)}isAlmostSameDomain(e){const t=(0,o.N)(this.url||""),s=(0,o.N)(e);return t===s||t.startsWith(s.slice(0,s.lastIndexOf(".")))}setSpinner(e=!0){(0,c.$H)(this.domId)?.classList.toggle("reloading",e)}upgrade(){this.size=r.ZU.NORMAL}static updateDB(e,t,s,r){return n.i.withDB((async i=>{await i.moveDbDial(e,s,t,r),(0,a.L)(e,s)}))}}},9719:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(4046),i=s(4323);class n extends r.h{type=void 0;isEmptyDial(){return!0}size;get gridAreaName(){return`d${this.areaNumber}`}get areaNumber(){return this.index+1e3}constructor(e,t,s){super(e,t),Object.assign(this,s)}clone(){return new n(this.index,this.groupId,(0,i.WR)(this))}static createEmptyDial(e){return new n(-1,e,{})}}},7319:(e,t,s)=>{"use strict";s.d(t,{$:()=>h});var r=s(4623),i=s(2846),n=s(4323);class a extends r.Y{clone(){return new a((0,n.WR)(this))}getSavingInfo(){return"-locked-"}async onBeforeOpen(){return!this.lock||await i.M.masterKeyVault.unlockIfNeeded()}async getDials(){return await this.isUnlocked()?super.getDials():[]}async getDialsToDraw(){return await this.isUnlocked()?this.getDials():[]}async isUnlocked(){return!this.lock||await i.M.masterKeyVault.isUnlocked()}}var o=s(9998),c=(s(6672),s(6419)),l=s(6683),d=s(519);class u extends a{clone(){return new u((0,n.WR)(this))}async getAutoReloadPoweredDials(){return[]}async findDuplicates(e){return[]}async getDials(){if(this.topSites&&o.Jk&&browser.topSites){return(await browser.topSites.get({includeFavicon:!0,newtab:!0,limit:100}).catch((()=>[]))).map((({title:e,url:t,favicon:s},r)=>{const i=s||d.rH;return new c.O(r,this.id,{name:e||"",url:t,thumbnail:{type:l.O8.URL,value:i,position:l.X.CENTER}})}))}return this.dials}}function h(e){switch(!0){case!!e.topSites:return new u(e);case!!e.lock:return new a(e);default:return new r.Y(e)}}},9501:(e,t,s)=>{"use strict";s.d(t,{O:()=>h});var r=s(6683),i=s(489),n=s(5048),a=s(1589),o=s(7283),c=s(2846),l=s(519),d=s(2036),u=s(4323);class h extends i.z{type=r.kh.GROUP;isGroupDial(){return!0}url;getAbsoluteURL(){return d.KL+this.url}thumbnail;crop;reload;visual;settings;#e=[];static fromUserInput(e,t,s,r,i){const a=new h(e,t,{name:"",...i,url:(0,n._V)(s)});return r&&a.#e.push(r),a}isSingleLinkDial(){return!0}isLinkDial(){return!0}canHaveThumbnail(){return!0}constructor(e,t,s){super(e,t),Object.assign(this,s)}async preSaveAction(e){for(const e of this.#e)await e();this.#e.length=0}getTargetGroupId(){return(0,n.m4)(this.url)}clone(){return new h(this.index,this.groupId,(0,u.WR)(this))}styleIcon(e,t){const s=c.M.groupById(this.getTargetGroupId()),r=s.iconId;return e.setAttribute("style",r?new a.v(0,"",r,s.color||o.e).getIconStyle():l.ak),e}}},2742:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var r=s(489),i=s(6683),n=s(519),a=s(4323);class o extends r.z{type=i.kh.LIVE;isLiveDial(){return!0}url;live;thumbnail;crop;reload;visual;settings;constructor(e,t,s){super(e,t),Object.assign(this,s)}static fromUserInput(e,t,s,r,i){return new o(e,t,{name:"",...i,url:s,live:r})}isSingleLinkDial(){return!0}isLinkDial(){return!0}canHaveThumbnail(){return!0}clone(){return new o(this.index,this.groupId,(0,a.WR)(this))}styleIcon(e,t){return e.src=t||n.rH,e}}},2806:(e,t,s)=>{"use strict";s.d(t,{U:()=>O});var r=s(6683),i=s(489),n=s(1374),a=s(9944),o=s(6672),c=s(3683),l=s(4323),d=s(2399),u=s(4590),h=s(2846),p=s(2036),m=s(3672),g=s(8289),_=s(9719),f=s(1009),w=s(4352),y=s(4099),v=s(7283),b=s(8794),E=s(5076),D=s(1962),A=s(5048),I=s(9501),S=s(6419);class k{fn;weakMap;constructor(e){this.fn=e,this.weakMap=new WeakMap}getOrFetch(e){if(this.weakMap.has(e))return this.weakMap.get(e);{const t=this.fn(e);return this.weakMap.set(e,t),t}}}var P=s(8282),R=s(3694),L=s(9676);class O extends i.z{type=r.kh.MULTI;isMultiDial(){return!0}multi;thumbnail;visual;settings;isLinkDial(){return!0}#t=new k((e=>(0,g.Z)(e.url)?new I.O(this.index,this.groupId,e):new S.O(this.index,this.groupId,e)));constructor(e,t,s){super(e,t),Object.assign(this,s)}getLinksAsDials(){return this.multi.links.map((e=>this.#t.getOrFetch(e)))}static fromUserInput(e,t,s,r){s.links=s.links.filter((e=>e.url)).map((e=>(e.url=function(e){return e.startsWith(p.KL)?(0,m.u)(e,p.KL):(0,g.Z)(e)?e:(0,c.d)(e)}(e.url),e)));const i=new O(e,t,{name:"",...r,multi:s});return i.normalizeLinks(),i}async postSaveAction(e){this.multi.links.forEach((t=>(0,y.O)(e,t.url)));const t=(await Promise.allSettled(this.multi.links.filter((e=>!e.name)).map((async e=>({url:e.url,title:await(0,L.w)(4e3,"",(()=>(0,f.E)(e.url)))}))))).filter(a.s).map((e=>e.value));this.multi.links.forEach(((e,s)=>{e.name||=t.find((({url:t})=>t===e.url))?.title||(0,o.QV)(e.url)})),this.normalizeLinks(),await h.M.action("replaceDial",{groupId:e,dial:this},(0,u.tr)("save_dial_names_saved")),(0,w.L)(e)}normalizeLinks(){this.multi.links.forEach(((e,t)=>{e.created||=(0,R.Sy)()+t,e.name||=(0,o.QV)(e.url),e.url||=P.pf})),this.multi.links=(0,n.vC)(this.multi.links,"url"),this.multi.sortBy&&this.multi.links.sort(((e,t)=>{switch(this.multi.sortBy){case r.oB.createdAsc:return e.created-t.created;case r.oB.createdDesc:return t.created-e.created;case r.oB.nameAsc:return e.name.localeCompare(t.name);case r.oB.nameDesc:return t.name.localeCompare(e.name);case r.oB.urlAsc:return e.url.localeCompare(t.url);case r.oB.urlDesc:return t.url.localeCompare(e.url);default:return 0}}))}static async mergeDials(e,t,s,r,i=!1){const n=r.clone(),a=h.M.groupById(e),o=(await Promise.all(t.map((e=>a.dialByIndex(e).then((e=>e?.clone())))))).filter(l.zz),c=n.name,p=(n.index,o.flatMap((e=>e.isMultiDial()?(0,l.WR)(e.multi.links):[{name:e.name||"",url:e.url||P.pf}]))),m=O.convertDialToMulti(n,p);await h.M.action("replaceDials",{list:[...i?[]:o.map((t=>({groupId:e,dial:new _.I(t.index,e,{})}))),{groupId:s,dial:m}]},(0,u.tr)("save_dial_moved",`${o.map((e=>`"${e.name}"`)).join(", ")} => "${c}"`)),(0,d.D)(s),i||(0,d.D)(e)}static convertDialToMulti(e,t,s=Number.MAX_SAFE_INTEGER){return e.isMultiDial()?(e.multi.links.splice(s,0,...t),e.normalizeLinks(),e):O.fromUserInput(e.index,e.groupId,{links:[{name:e.name,url:e.url},...t],titleAction:r.C2.openAll,linkAction:r.Q0.openLink},{name:"",thumbnail:e.thumbnail,visual:e.visual,settings:e.settings})}static async pasteLink(e,t){const s=O.getItemIndex(t),r=await b.L8.get();if(r){const t=e.index===r.dialIndex&&e.groupId===r.groupId?e:(await h.M.groupById(r.groupId).dialByIndex(r.dialIndex))?.clone();if(t&&t.isMultiDial()){const[i]=t.multi.links.splice(r.linkIndex,1),n=O.convertDialToMulti(e.clone(),[i],s);await h.M.action("replaceDials",{list:[{groupId:r.groupId,dial:t},{groupId:n.groupId,dial:n}]},(0,u.tr)("save_link_moved",`"${t.name}" => "${n.name}"`)),await b.L8.reset()}return}const i=await b._V.get();if(i?.length){const t=(await Promise.all(i.map((async e=>(await h.M.groupById(e.groupId).dialByIndex(e.dialIndex))?.clone())))).filter((t=>!!t&&!t.compare(e)&&(t.isMultiDial()||t.isLinkDial()))),r=t.flatMap((e=>e?.isMultiDial()?e.multi.links:e?[{name:e.name,url:e.url,created:e.created}]:[])),n=O.convertDialToMulti(e.clone(),r,s);await h.M.action("replaceDials",{list:[...t.map((e=>({groupId:e.groupId,dial:new _.I(e.index,e.groupId,{})}))),{groupId:n.groupId,dial:n}]},(0,u.tr)("save_link_pasted",`${t.map((e=>`"${e.name}"`)).join(", ")} => "${n.name}"`)),await b._V.reset()}}async removeClickedLinkAndSave(e){await(0,E.J)(O.getItemIndex(e),(async e=>{this.multi.links.splice(e,1),await h.M.action("replaceDial",{groupId:this.groupId,dial:this},(0,u.tr)("remove_from_multi"))}))}async cutLink(e){const t=O.getItemIndex(e)||0;await b.L8.set({groupId:this.groupId,dialIndex:this.index,linkIndex:t});const s=(0,D.EW)(e)?.closest(A.l8);Array.from(s?.querySelectorAll("ul > li")||[]).at(t)?.classList.add("is_cut")}static getItemIndex(e){const t=parseInt((0,D.EW)(e)?.closest("li")?.dataset.index||"");return isNaN(t)?void 0:t}clone(){return new O(this.index,this.groupId,(0,l.WR)(this))}styleIcon(e,t){return e.setAttribute("style",(0,v.H)("svg/multi (1).svg")),e}}},489:(e,t,s)=>{"use strict";s.d(t,{z:()=>n});var r=s(4046),i=s(3694);class n extends r.h{type;name;size;note;created=(0,i.Sy)();distraction;constructor(e,t){super(e,t),this.name||(this.name="")}async preSaveAction(e){}postSaveAction(e){}}},1416:(e,t,s)=>{"use strict";s.d(t,{t:()=>u});var r=s(6683),i=s(489),n=s(2542),a=s(6672),o=s(8168),c=s(4099),l=s(7283),d=s(4323);class u extends i.z{type=r.kh.SEARCH;isSearchDial(){return!0}providers;thumbnail;visual;settings;constructor(e,t,s){super(e,t),Object.assign(this,s)}static fromUserInput(e,t,s,r){return s.filter(n.Z).forEach((e=>{e.name??=(0,o.BB)((0,a.lX)(e.url,!0))})),new u(e,t,{name:"",...r,providers:s})}async postSaveAction(e){await Promise.all(this.providers.filter(n.Z).map((t=>(0,c.O)(e,t.url))))}clone(){return new u(this.index,this.groupId,(0,d.WR)(this))}styleIcon(e,t){return e.setAttribute("style",(0,l.H)("svg/search_d (3).svg")),e}}},6684:(e,t,s)=>{"use strict";s.d(t,{F:()=>u});var r=s(6683),i=s(489),n=s(1650),a=s(2036),o=s(7283),c=s(4323),l=s(7137);const d=[a.Lf,"chrome://newtab","https://auth.tampermonkey.net/oauth"];class u extends i.z{type=r.kh.SESSION;isSessionDial(){return!0}session;thumbnail;visual;settings;isLinkDial(){return!0}constructor(e,t,s){super(e,t),Object.assign(this,s)}static fromUserInput(e,t,s,r){return new u(e,t,{name:"",...r,session:s})}async getRecentlyClosed(){if(!n.v||!browser.sessions)return[];const e=await browser.sessions.getRecentlyClosed(),t=e=>!e?.hidden&&!d.some((t=>e?.url?.startsWith(t)));return e.filter((e=>{const{window:s,tab:r}=e;return s?.tabs&&(s.tabs=s.tabs.filter(t),s.tabs.forEach((e=>e.sessionId=s.sessionId))),t(r)}))}async restoreSession(e){const{tab:t,window:s}=await browser.sessions.restore(e),r=t?await browser.windows.get(t.windowId):s;r.focused||await browser.windows.update(r.id,{focused:!0})}canHaveThumbnail(){return!1}static async askForPermission(){return(0,l.x)("sessions")}clone(){return new u(this.index,this.groupId,(0,c.WR)(this))}styleIcon(e,t){return e.setAttribute("style",(0,o.H)("svg/recent (2).svg")),e}}},8873:(e,t,s)=>{"use strict";s.d(t,{i:()=>o});var r=s(6683),i=s(489),n=s(7283),a=s(4323);class o extends i.z{type=r.kh.TEXT;isTextDial(){return!0}text;thumbnail;visual;constructor(e,t,s){super(e,t),Object.assign(this,s)}static fromUserInput(e,t,s,r){return new o(e,t,{name:"",...r,text:s})}clone(){return new o(this.index,this.groupId,(0,a.WR)(this))}styleIcon(e,t){return e.setAttribute("style",(0,n.H)("svg/note_t.svg")),e}}},7683:(e,t,s)=>{"use strict";s.d(t,{W:()=>f});var r=s(6683),i=s(489),n=s(6265),a=s(9598),o=s(4590),c=s(6004);class l extends n.w{index;id;value;type;constructor(e,t,s=""){super(e,t,r.$C.countdown,s),this.index=e,this.id=t,this.value=s,this.type=r.$C.countdown}async start(){browser.alarms.create(this.alarmName,{delayInMinutes:super.getMinutes()})}async stop(){await browser.alarms.clear(this.alarmName)}async renderHead(){return(0,c.nl)([(0,a.u)("label",`${(0,o.tr)("timer_type_0")}:`),super.formatSeconds(this.getSeconds())])}async renderBody(){const e=await this.getScheduledTime();return super.formatSeconds(e?(e-Date.now())/1e3:0)}}class d extends n.w{index;id;value;type;constructor(e,t,s=""){super(e,t,r.$C.alarm,s),this.index=e,this.id=t,this.value=s,this.type=r.$C.alarm}async start(){const{hours:e,minutes:t,seconds:s}=super.getTime(),r=new Date;r.setHours(e),r.setMinutes(t),r.setSeconds(s),r<new Date&&r.setDate(r.getDate()+1),browser.alarms.create(this.alarmName,{when:r.getTime()})}async stop(){await browser.alarms.clear(this.alarmName)}async renderHead(){return(0,c.nl)([(0,a.u)("label",`${(0,o.tr)("timer_type_1")}:`),(0,a.z)("span",{class:"timer_time",textContent:this.value})])}async renderBody(){const e=await this.getScheduledTime();return super.formatSeconds(e?(e-Date.now())/1e3:0)}}var u=s(910),h=s(2460),p=s(5524);class m extends n.w{index;id;type;store;runningIcons;pausedIcons;stoppedIcons;async getScheduledTime(){}constructor(e,t){super(e,t,r.$C.stopwatch),this.index=e,this.id=t,this.type=r.$C.stopwatch,this.store=new u.F(this.alarmName,(()=>{}),{storageArea:"localStorage"}),this.runningIcons=[1,0,1],this.pausedIcons=[1,1,0],this.stoppedIcons=[0,1,0]}async isPaused(){const e=await this.store.get(),t=e?.paused.at(-1);return Boolean(t?.start&&!t?.end)}async isRunning(){return!!await this.store.get()}async start(){await(await this.isRunning()?this.pause():this.store.set({paused:[],startTime:Date.now()}))}async stop(){return(0,p.cO)(`Stopwatch cleared: ${(await this.renderBody()).textContent}`),this.store.remove()}async pause(){let e=!1;return await this.store.update((t=>{if(t){const s=t.paused.at(-1);!s||s.end?t.paused.push({start:Date.now()}):(s.end=Date.now(),e=!0)}return t})),e}async measure(){const e=await this.store.get();if(!e)return 0;const t=Date.now(),s=(0,h.RM)(e.paused.map((e=>(e.end||t)-e.start)));return t-e.startTime-s}async renderHead(){return(0,a.u)("label",`${(0,o.tr)("timer_type_2")}:`)}async renderBody(){return super.formatSeconds(await this.measure()/1e3)}}var g=s(7283),_=s(4323);class f extends i.z{type=r.kh.TIMER;isTimerDial(){return!0}timer;thumbnail;visual;settings;isLinkDial(){return!1}canHaveThumbnail(){return!1}constructor(e,t,s){super(e,t),Object.assign(this,s)}static fromUserInput(e,t,s,r){return new f(e,t,{name:"",...r,timer:s})}getTimerControls(){return this.timer.timers.map(((e,t)=>{switch(e.type){case r.$C.countdown:return new l(t,this.created,e.value);case r.$C.alarm:return new d(t,this.created,e.value);case r.$C.stopwatch:return new m(t,this.created)}}))}clone(){return new f(this.index,this.groupId,(0,_.WR)(this))}styleIcon(e,t){return e.setAttribute("style",(0,g.H)("svg/timer (2).svg")),e}}},8032:(e,t,s)=>{"use strict";s.d(t,{O:()=>d});var r=s(6683),i=s(489),n=s(9998),a=(s(6672),s(519)),o=s(7283),c=s(4323),l=s(7137);class d extends i.z{type=r.kh.TOP_SITES;isTopSitesDial(){return!0}topSites;thumbnail;visual;settings;isLinkDial(){return!0}constructor(e,t,s){super(e,t),Object.assign(this,s)}static fromUserInput(e,t,s,r){return new d(e,t,{name:"",...r,topSites:s})}async getTopSites(){if(!n.Jk||!browser.topSites)return[];return(await browser.topSites.get({includeFavicon:!0,newtab:!0,limit:100}).catch((()=>[]))).map((({title:e,url:t,favicon:s},r)=>({name:e||"",url:t,icon:s||a.rH})))}canHaveThumbnail(){return!1}static async askForPermission(){return(0,l.x)("topSites")}clone(){return new d(this.index,this.groupId,(0,c.WR)(this))}styleIcon(e,t){return e.setAttribute("style",(0,o.H)("svg/list-with-dots.svg")),e}}},6419:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var r=s(489),i=s(6683),n=s(1962),a=s(7283),o=s(1481),c=s(4323);class l extends r.z{type=i.kh.URL;isUrlDial(){return!0}url="";thumbnail;crop;reload;visual;settings;constructor(e,t,s){super(e,t),Object.assign(this,s),this.url||(this.url="")}static fromUserInput(e,t,s,r){return new l(e,t,{name:"",...r,url:s})}isSingleLinkDial(){return!0}isLinkDial(){return!0}canHaveThumbnail(){return!0}clone(){return new l(this.index,this.groupId,(0,c.WR)(this))}styleIcon(e,t){return t?e.src=t:(e.src=n.RO,e.setAttribute("style",(0,a.H)((0,o.f)(this.url)))),e}}},1360:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var r=s(6683),i=s(489),n=s(7283),a=s(4323);class o extends i.z{type=r.kh.WEATHER;isWeatherDial(){return!0}weather;thumbnail;visual;settings;isLinkDial(){return!1}canHaveThumbnail(){return!1}constructor(e,t,s){super(e,t),Object.assign(this,s)}static fromUserInput(e,t,s,r){return new o(e,t,{name:"",...r,weather:s})}getWeatherUUID(){return`${this.weather.units}_${this.weather.lat}_${this.weather.lon}`}clone(){return new o(this.index,this.groupId,(0,a.WR)(this))}styleIcon(e,t){return e.setAttribute("style",(0,n.H)("svg/weather.svg")),e}}},6808:(e,t,s)=>{"use strict";s.d(t,{YK:()=>o,v3:()=>l,wh:()=>c});var r=s(4590),i=s(7319),n=s(4069),a=s(841);const o=3,c=4;function l(e,{name:t="",dimensions:s,archived:l=!1,isDefaultFirstGroup:d=!1,sourceGroup:u}={}){const h=d&&n.m0,{rows:p,cols:m}=s||(u?{rows:u.rows,cols:u.cols}:h?{rows:7,cols:3}:{rows:o,cols:c}),g=Object.assign({},{id:e,name:d?(0,r.tr)("default_home_group_name"):t||(0,r.ZB)("group_generated_name",e),iconId:d?37:void 0,rows:p,cols:m,...h?{dynamic:{width:a.v.androidWidth,height:a.v.androidHeight}}:{},dials:Array(p*m).fill(0).map((()=>({}))),archived:l,...u?{ratio:u.ratio,dynamic:u.dynamic,list:u.list,background:u.background,gestures:u.gestures,color:u.color,rowColor:u.rowColor,colColor:u.colColor}:{}});return(0,i.$)(g)}},4623:(e,t,s)=>{"use strict";s.d(t,{Y:()=>y});var r=s(6795),i=s(1374),n=s(5048),a=s(6683),o=s(4323),c=s(7644),l=s(9719),d=s(5717),u=s(2846),h=s(8654),p=s(8794),m=s(1589),g=s(2036),_=s(7283),f=s(6664),w=s(5904);class y{clone(){return new y((0,o.WR)(this))}static DEFAULT_ROWS=3;static DEFAULT_COLS=4;id;name;getSavingInfo(){return this.name}cols;rows;dials;async getDials(){return this.dials}archived;background;createBackgroundFileURL(){return`about:blank#${this.id}`}getAbsoluteURL(){return g.KL+`#${this.id}`}colColor;color;distraction;gestures;options;container;getGestures(){return this.gestures||h.j}dynamic;list;grid;topSites;lock;ratio;rowColor;iconId;constructor(e){Object.assign(this,e),this.options??={},this.dials=e.dials.map(((t,s)=>(0,c._)(s,t,e.id)))}async onBeforeOpen(){return!0}async findDuplicates(e){const t=(0,n.Ty)(e);return(await this.getDials()).filter((e=>e.includesLinkCore(t)))}styleIcon(e=document.createElement("img"),t=this.color||_.e,s=0){const r=this.iconId||s;return r&&e.setAttribute("style",new m.v(0,"",r,t).getIconStyle()),e}async insertNewLink(e){const[t]=e.url?await this.findDuplicates(e.url):[];if(t)return"multi"in t||(t.name=e.name),{action:"update",dial:t};const s=(0,i.SL)(this.dials,(e=>e.isEmptyDial())),r=s>=0?s:this.dials.length;return this.replaceDial(e,r),{action:"insert",dial:e}}removeDial(e){const t=this.dials[e];return this.replaceDial(new l.I(e,this.id,t),e)}replaceDial(e,t=this.dials.length){const s=e.clone();t<0&&(t=this.dials.length);this.dials.length;const r=this.dials[t],i=this.dials[t]?.size??a.ZU.NORMAL;return this.dials=[...this.dials.slice(0,t),s,...this.dials.slice(t+1)],s.size=i,this.grid&&r?.created&&s.created&&(this.grid.areas=new w.x(this.grid.areas).replaceItem(r.created,s.created)),s}hasDynamicLayout(){return Boolean(this.dynamic||this.list||this.topSites||this.grid)}isFlexibleLayout(){return!(this.dynamic||this.list||this.ratio||this.grid&&this.grid.position!==r.Cr.fillSpace)}getLastEmptyDial(){const e=this.dials.at(-1);if(e?.isEmptyDial())return e}async isUnlocked(){return!0}getPosition(){return u.M.GROUPS.findIndex((e=>e.id===this.id))}getDialIndex(e){return this.dials.indexOf(e)}getOrCreateEmptyDialIndex(e=0){const t=this.dials.findIndex(((t,s)=>s>=e&&t.isEmptyDial()));return t>=0?t:(this.dials=this.dials.concat(l.I.createEmptyDial(this.id)),this.dials.length-1)}activateGroup(e){window.dispatchEvent(new CustomEvent("change_active_group",{detail:e??this.id}))}async getNeighbouringGroup(e,t,{isProductivityOn:s=!1}={}){const r=await u.M.getVisibleGroups();let i=this;for(const n of Array(r.length))if(i=i._getNeighbouringGroup(r,e,t),!i.distraction||!s)return i}_getNeighbouringGroup(e,t,s){const r=e.findIndex((e=>e.id===this.id)),i="next"===t?r+1:r-1;switch(s){case"loop":return e[i<0?e.length-1:i%e.length];case"stay":return e[i<0?0:i>=e.length?e.length-1:i];case"none":return i<0||i>=e.length?void 0:e[i]}}async executeGesture(e,t){const s=this.getGestures()[e];switch(s?.type){case r.EM.OPEN_GROUP:return this.activateGroup(s.groupId),!0;case r.EM.HOME_GROUP:return this.activateGroup(await p.ne.get()??u.M.GROUPS[0].id),!0;case r.EM.NEXT_GROUP:return this.activateGroup((await this.getNeighbouringGroup("next","loop",{isProductivityOn:t})).id),!0;case r.EM.PREV_GROUP:return this.activateGroup((await this.getNeighbouringGroup("prev","loop",{isProductivityOn:t})).id),!0}return!1}async getDialsToDraw(){return this.getDials()}async getAutoReloadPoweredDials(){return this.list?[]:(await this.getDials()).filter((e=>e.url&&e.reload&&(!e.thumbnail||e.thumbnail.type===a.O8.AUTO_GENERATED)))}async dialByIndex(e){return(await this.getDials()).at(e)}dialById(e){const t=(0,n.om)(e),s=this.dials[t];if(!s)throw`Dial not found!!! ${e} / ${this.id}`;return s}upgrade(){this.dials.forEach((e=>e.upgrade())),this.archived=!1,delete this.rowColor,delete this.colColor}serialize(){let e=this.dials.filter((e=>!e.isEmptyDial()||!(this.list||this.grid||this.dynamic&&!e.size))).map(((e,t)=>e.isEmptyDial()?{...e.size?{size:e.size}:{}}:{name:e.name,note:e.note,created:e.created&&(e.created<3e7?60*e.created+t:e.created),size:e.size,type:e.type,...e.url?{url:e.url}:{},...e.live?{live:e.live}:{},...e.text?{text:e.text}:{},...e.multi?{multi:Object.assign({links:[],titleAction:a.C2.openAll,linkAction:a.Q0.openLink},e.multi)}:{},...e.session?{session:e.session}:{},...e.topSites?{topSites:e.topSites}:{},...e.timer?{timer:e.timer}:{},...e.weather?{weather:e.weather}:{},...e.providers?{providers:e.providers}:{},...e.thumbnail?{thumbnail:e.thumbnail}:{},...e.reload?{reload:e.reload}:{},...e.crop?{crop:e.crop}:{},...e.settings?{settings:e.settings}:{},...e.distraction?{distraction:e.distraction}:{},...e.visual?{visual:e.visual}:{}}));if((this.list||this.grid)&&e.forEach((e=>e.size=a.ZU.NORMAL)),this.topSites)e.length=0;else if(this.dynamic||this.list||this.grid)e.push({});else{e=d.M6.validateAndFixClusters(e);const t=d.M6.dialsToClusters(this.dials),s=this.rows*this.cols;t.length>s&&(this.rows=Math.ceil(t.length/this.cols));for(let t=e.length;t<s;t++)e.push({})}return this.grid&&(this.grid=f.J.normalizeGrid(this.grid,e)),{id:this.id,name:this.name,rows:(0,o.Kg)(this.rows)?parseInt(this.rows):this.rows,cols:(0,o.Kg)(this.cols)?parseInt(this.cols):this.cols,ratio:this.ratio,dynamic:this.dynamic,list:this.list,grid:this.grid,topSites:this.topSites,background:this.background,color:this.color,iconId:this.iconId,archived:this.archived,rowColor:this.rowColor,colColor:this.colColor,distraction:this.distraction,container:this.container,gestures:this.gestures,options:this.options,lock:this.lock,dials:e}}}},7111:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var r=s(6683),i=s(5048);function n(e,t,s){e.flatMap(((e,n,a)=>function(e,t,n){const a=[],o=(0,i._V)(e),c=(0,i._V)(t);return s?.forEach((s=>{s.group===e&&a.push((()=>s.group=t)),s.url===o&&a.push((()=>s.url=c))})),n.forEach((s=>{s.id===e&&a.push((()=>s.id=t)),s.dials.forEach((e=>{e.type===r.kh.GROUP&&e.url===o&&a.push((()=>e.url=c)),e.type===r.kh.MULTI&&e.multi?.links.forEach((e=>{e.url===o&&a.push((()=>e.url=c))}))}))})),a}(e.id,t+n,a))).forEach((e=>e()))}},2846:(e,t,s)=>{"use strict";s.d(t,{M:()=>V});var r=s(6795),i=s(4323),n=s(6808),a=s(2801),o=s(4590),c=s(1374),l=s(2399),d=s(1038),u=s(9719),h=s(9),p=s(5717);function m(e,t){return(0,c.SL)(e,(e=>e===t||t.equalsTo(e)))}var g=s(1589);class _{masterPassword;tags;constructor(e){Object.assign(this,e),this.tags=(e.tags||[{id:1,icon:36,name:(0,o.tr)("tag_work"),color:"#0095ff"},{id:2,icon:29,name:(0,o.tr)("tag_play"),color:"#00d200"},{id:3,icon:31,name:(0,o.tr)("tag_shopping"),color:"#e94335"}].concat([])).map((e=>new g.v(e.id,e.name,e.icon,e.color)))}getUserTags(){return this.tags.map((e=>new g.v(e.id,e.name,e.icon,e.color)))}tagById(e){const t=this.tags.find((t=>t.id===e));return t?new g.v(t.id,t.name,t.icon,t.color):void 0}hasPassword(){return!!this.masterPassword}getMasterPasswordHint(){return this.masterPassword?.options.hint||""}}var f=s(6672);class w{optionsAutoSync;optionsManual;constructor(e){Object.assign(this,e)}}var y=s(6382),v=s(6062),b=s(5048),E=s(9830),D=s(910),A=s(7319),I=s(4352),S=s(1596),k=s(2542),P=s(1305);async function R(e,t,s){const r=(0,c.BO)(e.url||e.multi?.links.map((e=>e.url))||e.providers?.filter(k.Z).map((e=>e.url))||[]);for(const e of r)await P.i.withDB((r=>r.moveDbDial(t,s,e)))}var L=s(9180);var O=s(2221),C=s(8204),T=s(9114),x=s(6635),B=s(6801),N=(s(7139),s(5076)),M=s(2036),U=s(7111),G=s(2352),z=s(7384),$=s(4069),H=s(5904),F=s(6664);const W="masterPasswordHash"+(T.O?"_incognito":""),V=new class extends y.c{DATA_IS_UP_TO_DATE=new D.F("syncTime",(()=>Date.now()));DATA_LAST_CHANGE=new D.F("lastChangeInfo",i.s6);promise;fields={groups:"groups",metadata:"metadata",sync:"sync"};_executor=new a.V(1);_saveCallbacks=[];masterKeyVault=new C.e(W,(()=>this.METADATA.masterPassword?.options),void 0,void 0,(()=>this.action("removeMasterPassword",{})),x.S);_groups=[];_metadata=new _({});_sync=new w({});get GROUPS(){return this._groups}get METADATA(){return this._metadata}get SYNC(){return this._sync}hasOwnGroups=!0;constructor(){super(),this.promise=browser.storage.local.get([this.fields.groups,this.fields.metadata,this.fields.sync]).then((async({[this.fields.groups]:e,[this.fields.metadata]:t,[this.fields.sync]:s})=>(await Promise.all([O.j_,$.Vq,o.P$]),await this.loadGroups(e),this._metadata=new _(t||{}),this._sync=new w(s),this))),browser.storage.local.onChanged.addListener((async e=>{const t=e[E.J.key],s=e[this.DATA_IS_UP_TO_DATE.key],r=e[this.fields.groups],n=e[this.fields.metadata];(r||n||t)&&(n&&(this._metadata=new _(n.newValue||{})),r&&await this.loadGroups(r.newValue),super.notifyChange({type:r||n?"data":"sync",isDirty:!!s&&0===s.newValue,sync:this.SYNC,groups:this.GROUPS,metadata:this.METADATA,lastChangeInfo:e.lastChangeInfo?.newValue,serialize:()=>this.serialize()}),(0,i.XB)(this._saveCallbacks))}))}async loadGroups(e){if(!e?.length&&v.Dy){const e=(0,n.v3)(0,{isDefaultFirstGroup:!0});await this.action("addGroup",{newGroup:e,addonInit:!0})}else this._groups=(e||[]).map(A.$)}async action(e,t,s=""){switch(e){case"addGroup":{const{newGroup:e,position:r,addonInit:i}=t;return this._groups||(this._groups=[]),this._groups.splice(r??this._groups.length,0,(0,A.$)(e)),void await this.saveState(s||(0,o.tr)("save_group_created"),{dontUpdateVersion:i})}case"newSyncData":case"importData":{const{groups:r,metadata:n,sync:a,version:c,replaceExisting:l,source:d,dontUpdateVersion:u}=t,h="shared"===d;h&&(0,U.j)(r,this.getNewGroupId());const p=r.map(A.$);if(h&&!await(0,M.FJ)()&&p.forEach((e=>e.upgrade())),this._groups=l?p:this._groups.concat(p),n&&(this._metadata=new _(n)),a&&(this._sync=new w(a)),await this.saveState(s||(0,o.tr)("import_done_text"),{dontUpdateVersion:u,version:c,setDirty:"newSyncData"===e?Date.now():0}),h){(0,B.CB)({type:"download_missing_favicons"});const e=await(0,G.e6)();await(0,z.p)(e.id,(()=>browser.tabs.update(e.id,{url:`${M.KL}#${p[0].id}`}))),await(0,B.hC)(e.id,{type:"import_shared_complete",importedGroups:p.map((e=>e.id))}).catch(i.lQ)}return}case"importShared":{const{groupId:e}=t;return!1}case"moveGroup":{const{groupId:e,targetGroupId:r}=t,i=this.getGroupIndexById(e),n=this.getGroupIndexById(r);if(i<0||i>=this._groups.length||n<0||n>=this._groups.length)return;this._groups.splice(n,0,this._groups.splice(i,1)[0]);const a=this.groupById(e);return void await this.saveState(s||(0,o.tr)("save_group_moved",`Group: "${a.getSavingInfo()}"`))}case"deleteGroup":{const{groupId:e}=t,r=this.groupById(e);if(r){this._groups=(0,c.M$)(this._groups,(e=>e.id===r.id));const e=(0,b._V)(r.id);this._groups.forEach((t=>{t.dials.forEach(((s,r)=>{s.url===e&&t.removeDial(r)}))})),await this.saveState(s||(0,o.tr)("save_group_deleted",r.getSavingInfo()))}return}case"updateGroup":{const{groupId:e,update:r,newPosition:n}=t,a=this.groupById(e),l=r.name;if(l&&l!==a.name){const t=(0,b._V)(e);this.GROUPS.forEach((s=>{s.id===e&&(s.name=l),s.dials.forEach((e=>{e.url===t&&(e.name=l)}))}))}return Object.assign(a,r),(0,i.qS)(n)&&(0,c.VE)(this._groups,this.getGroupIndexById(e),n),void await this.saveState(s||(0,o.tr)("save_group_edited",a.getSavingInfo()),{forceCallback:!0})}case"insertLinksToGroup":{const{groupId:e,links:r}=t,i=this.groupById(e),n=await Promise.all(r.map((e=>i.insertNewLink(e))));return(0,c.RD)(this._groups,(e=>e.id===i.id),i),await this.saveState(s||(0,o.tr)("save_dial_edited",this.getDialLogInfo(n.map((e=>e.dial.name)).join(", "),i))),n}case"removeDial":{const{groupId:e,index:r}=t,i=this.groupById(e),n=i.dials[r];return(0,l.D)(e,n),i.removeDial(r),void await this.saveState(s||(0,o.tr)("save_dial_removed",this.getDialLogInfo(n.name,i)))}case"resizeDial":{const{groupId:e,dial:r,dialSize:i}=t,n=this.groupById(e),a=(0,d.f)(e,n.dials,r,i);return void(a&&(n.dials=a,await this.saveState(s||(0,o.tr)("save_dial_resized",this.getDialLogInfo(r.name,n)))))}case"updateDialNameIfNeeded":{const{groupId:e,url:r,newName:i}=t,n=this.groupById(e),a=i.trim().slice(0,128),c=n.dials.filter((e=>e.url&&e.url===r&&e.name!==a&&(e.name===(0,f.QV)(r)||e.settings?.FETCH_NEW_NAME)));return void(a&&c.length>0&&(c.forEach((e=>e.name=a)),await this.saveState(s||(0,o.tr)("save_dial_names_saved",this.getDialLogInfo(c.map((e=>e.name)).join(", "),n)))))}case"replaceDial":case"replaceDials":{const{list:r}="replaceDial"===e?{list:[t]}:t;return r.forEach((({dial:e,groupId:t,gridPlacement:s})=>{const r=this.groupById(t);if(r.replaceDial(e,e.index),s&&r.grid){const t=F.J.create(r).placeItem(e,s);t&&(r.grid.areas=t.areas)}})),void await this.saveState(s||(0,o.tr)("save_dial_edited",this.getDialLogInfo(r.map((e=>e.dial.name)).join(", "),this.groupById(r[0]?.groupId))),{forceCallback:!0,editedDialsTypes:r.map((e=>e.dial.type))})}case"swapDials":{const{srcGroupId:e,destGroupId:r,srcDialIndex:n,destDialIndex:a,operation:d,gridPlacement:g}=t;if(e===r&&n===a)return;const _=this.groupById(e),f=this.groupById(r),w=_.dials[n],y=a<0?f.getOrCreateEmptyDialIndex():a,v=f.dials[y];switch(d){case"swap":case"cut":case"copy":const e="swap"===d?v:"copy"===d?w:"cut"===d?u.I.createEmptyDial(_.id):(0,i.qb)("n/a");if(_===f&&f.grid)f.grid.areas=new H.x(f.grid.areas).swapItems(w.created,v.created);else if(_.replaceDial(e,w.index),f.replaceDial(w,v.index),g&&f.grid&&v.isEmptyDial()){const e=F.J.create(f).placeItem(w,g);e&&(f.grid.areas=e.areas)}break;case"up":case"down":case"left":case"right":const t=function(e,t,s,r){const n="left"===r||"right"===r,a="left"===r||"up"===r,o=!a,l=n?"row":"column";let d=(0,h.QY)(l,t,s);const u=t=>(t.dial?.isEmptyDial()||t.dial===e)&&!t.dials,g=(0,i.t1)(u);d.every((e=>!u(e)))&&(0,h.Ks)(t,n?"column":"row"),d=(0,h.QY)(l,t,s);const _=(0,c.SL)(d,(e=>e.includes(s)));_<0&&(0,i.qb)("bad dial index");const f=[d.slice(_),d.slice(0,_+1).reverse()],[w,y]=f;a&&f.reverse();const[v]=f.filter((e=>e.some(u))),b=v===w,E=!b,D=p.M6.dialsToClusters(t.dials),A=(0,c.v6)(v,g,{closedInterval:!0});return(0,c.qm)(A).slice(b&&o||E&&a?1:0).map((([e,t])=>{const s=m(D,e),r=m(D,t);return s>=0&&r>=0?()=>(0,c.VE)(D,s,r):i.lQ})).reverse().forEach(i.g7),t.dials=p.M6.clustersToDials(D),v.find(u).dial}(w,f,v,d),s=_.getDialIndex(w),r=f.getDialIndex(t);_.replaceDial(t,s),f.replaceDial(w,r)}return await this.saveState(s||(0,o.tr)("save_dial_moved",this.getDialLogInfo(w.name,f))),e!==r&&(await R(w,e,r),"swap"===d&&await R(v,r,e)),(0,I.L)(e,r),void(0,l.D)(r)}case"moveDials":{const{srcGroupId:e,destGroupId:r,srcDialIndexes:n,destDialIndex:a,operation:c}=t,d=this.groupById(e),h=this.groupById(r),p=n.map((e=>d.dials[e])).filter((e=>e.isNotEmptyDial()));p.forEach((e=>d.replaceDial(new u.I(e.index,d.id,{}),e.index)));for(const t of p){const s=h.getOrCreateEmptyDialIndex(a),n=h.dials[s];h.replaceDial(t,n.index),e!==r&&await R(t,e,r).catch(i.lQ)}return await this.saveState(s||(0,o.tr)("save_dial_moved",this.getDialLogInfo(p.map((e=>e.name)).join(", "),h))),(0,I.L)(e,r),void(0,l.D)(r)}case"removeDials":{const{srcGroupId:e,srcDialIndexes:r}=t,i=this.groupById(e),n=r.map((e=>i.dials[e]));return n.forEach((e=>i.removeDial(e.index))),await this.saveState(s||(0,o.tr)("save_dial_removed",this.getDialLogInfo(n.map((e=>e.name)).join(", "),i))),(0,I.L)(e,i.id),void(0,l.D)(i.id)}case"addDial":{const{groupId:e,dial:r}=t,i=this.groupById(e);return i.dials=i.dials.concat(r),void await this.saveState(s||(0,o.tr)("save_dial_edited",this.getDialLogInfo(r.name,i)))}case"deleteDial":return void(0,i.SJ)();case"updateProductivity":{const{selectedGroups:e,selectedDialsPerGroup:s}=t,r=JSON.stringify(this.GROUPS);return this.GROUPS.forEach((t=>{e.has(t.id)?t.distraction={}:t.distraction&&delete t.distraction;const r=s.get(t.id);t.dials.forEach(((e,t)=>{r.has(t)?e.distraction={}:e.distraction&&delete e.distraction}))})),void(r!==JSON.stringify(this.GROUPS)&&await this.saveState((0,o.tr)("save_productivity_selection_changed")))}case"saveMasterPassword":{const{pwdId:e,options:s}=t;return this.METADATA.masterPassword={id:e,options:s,name:"master password"},void await this.saveState((0,o.tr)("save_new_master_password"))}case"removeMasterPassword":return this._groups=this._groups.filter((e=>!e.lock?.passwordId)),this.METADATA.masterPassword=void 0,await this.saveState((0,o.tr)("save_removed_master_password")),(0,B._z)({type:"broadcast",message:{type:"redraw_dials"}}),void self.location.reload();case"updateTags":{const{tags:e,operation:s}=t;return this.METADATA.tags=e.map((e=>new g.v(e.id,e.name,e.icon,e.color))),void await this.saveState((0,o.tr)("save_tags_updated")+" - "+s)}}}async saveState(e,{dontUpdateVersion:t=!1,version:s=Date.now(),forceCallback:r=!1,editedDialsTypes:n=Array(),setDirty:a=0}={}){const o={...this.serialize(),lastChangeInfo:{date:Date.now(),name:e,editedDialsTypes:n.filter(i.zz)},[this.DATA_IS_UP_TO_DATE.key]:a||0,...t?{}:{[E.W.key]:s}};r&&(o._forceCallback=Date.now(),(0,N.J)(o.groups.at(0),(e=>e._forceCallback=Date.now()))),await this._executor.addWork((async()=>{await Promise.all([Promise.race([(0,i.BK)(500),new Promise((e=>this._saveCallbacks.push(e)))]),browser.storage.local.set(o)]),await(0,i.BK)(1)}))}getDialLogInfo(e,t){return t.lock?(0,o.tr)("save_locked_group_change"):`Group: "${t.name}"; Dial: "${(e||"").slice(0,32)}"`}async wasRecentlyChanged(){const e=await this.DATA_LAST_CHANGE.get();return!!e&&e.date+(0,L.xF)(2)>Date.now()}async getRecentChangeInfo(){return(await this.DATA_LAST_CHANGE.get())?.name||""}async isDirty(){return 0===await this.DATA_IS_UP_TO_DATE.get()}async clearDirty(){await this.DATA_IS_UP_TO_DATE.reset()}groupById(e){return this.GROUPS.find((t=>t.id===e))||this.GROUPS[0]}dialByUrl(e,t){return this.groupById(e).dials.find((e=>"url"in e&&e.url===t))}dialByCreated(e){return(0,S.E)(this._groups,(t=>t.created===e))}async findDuplicateDial(e){return await async function(e,t){for(let s=0;s<e.length;s++){const r=e[s];if(await t(r,s,e))return r}}(this.GROUPS,(async t=>(await t.findDuplicates(e)).length>0))}cloneGroups(){return this.GROUPS.map((e=>e.clone()))}getVisibleGroups(e=!1){return(0,c.dS)(e?this.cloneGroups():this.GROUPS,(async e=>!e.lock||e.lock.visibility!==r.Gj.HIDDEN||await e.isUnlocked()))}getNewGroupId(){return 1+Math.max(-1,...this.GROUPS.map((e=>e.id)))}serialize(){return{groups:this._groups.map((e=>e.serialize())),metadata:this._metadata}}getGroupIndexById(e){return this._groups.findIndex((t=>t.id===e))}isEmpty(){return 0===this._groups.length}}},1589:(e,t,s)=>{"use strict";s.d(t,{v:()=>a});var r=s(4067),i=s(4590),n=s(7302);class a{id;name;icon;color;static TOTAL_TAGS=68;static GROUP_TAG=65;constructor(e,t,s,r){this.id=e,this.name=t,this.icon=s,this.color=r}getIconStyle(){return(0,r.W)((0,n.Z)(`/icons/tags/tag (${this.icon}).svg`),this.color)}static getEmptyTag(){return new a(0,(0,i.tr)("tag_none"),0,"#888888")}}},7283:(e,t,s)=>{"use strict";s.d(t,{H:()=>a,e:()=>n});var r=s(4067),i=s(7302);const n="var(--primary)",a=e=>(0,r.W)((0,i.Z)(e),"var(--primary)")},5229:(e,t,s)=>{"use strict";s.d(t,{I:()=>i});var r=s(3672);const i=e=>e.startsWith("ext+container")?(0,r.u)(e,"url=","&",!0):e},9456:(e,t,s)=>{"use strict";s.d(t,{R:()=>n});var r=s(2221),i=s(7852);function n(){const[e,t,s]=function(e){const[t,s,r]=(0,i.E)(e).map((e=>e/255)),n=Math.max(t,s,r),a=n-Math.min(t,s,r),o=1-Math.abs(n+n-a-1),c=a&&(n===t?(s-r)/a:n===s?2+(r-t)/a:4+(t-s)/a);return[60*(c<0?c+6:c),o?100*a/o:0,100*(n+n-a)/2].map(Math.round)}(r.lw.PRIMARY_COLOR),n=document.documentElement.style;n.setProperty("--primary-color",`${e}, ${t}%`),n.setProperty("--primary-lightness",`${s}%`)}},6265:(e,t,s)=>{"use strict";s.d(t,{w:()=>c});var r=s(9598),i=s(3694),n=s(3635),a=s(7302),o=s(4323);class c{index;id;type;value;static ALARM_PREFIX="timer_";static TIMER_INDEX_DATASET="data-timer-index";timerName;alarmName;static getTimerDataFromAlarm(e){if(!e.startsWith(this.ALARM_PREFIX))return null;const[t,s,r,i]=e.split("_").map((e=>parseInt(e)));return{timerType:s,dialCreated:r,timerIndex:i}}domNodes;isRefreshing;runningIcons;pausedIcons;stoppedIcons;getTime(){const[e=0,t=0,s=0]=this.value.split(":").map((e=>parseInt(e)||0));return{hours:e,minutes:t,seconds:s}}getSeconds(){const{hours:e,minutes:t,seconds:s}=this.getTime();return 3600*e+60*t+s}getMinutes(){return this.getSeconds()/60}constructor(e,t,s,i=""){this.index=e,this.id=t,this.type=s,this.value=i,this.timerName=`${c.ALARM_PREFIX}${this.type}`,this.alarmName=`${this.timerName}_${this.id}_${this.index}`,this.isRefreshing=!1,this.runningIcons=[1,0,0],this.pausedIcons=[0,0,0],this.stoppedIcons=[0,1,0];const n=(0,r.z)("div",{class:"timer_head"}),o=(0,r.z)("div",{class:"timer_body"}),l=(0,r.z)("div",{class:"timer_actions"},[(0,r.z)("img",{"data-stop":"1",class:"timer_action invert icon-button",src:(0,a.Z)("svg/stop.svg")}),(0,r.z)("img",{"data-play":"1",class:"timer_action invert icon-button",src:(0,a.Z)("svg/play.svg")}),(0,r.z)("img",{"data-pause":"1",class:"timer_action invert icon-button",src:(0,a.Z)("svg/pause.svg")})]),d=(0,r.z)("li",{class:`flex ${this.timerName}`,[c.TIMER_INDEX_DATASET]:this.index},[(0,r.z)("div",{class:"timer_left flex-column"},[n,o]),l]);this.domNodes={head:n,body:o,actions:l,container:d},this.domNodes.container.onclick=async e=>{const t=e.target.dataset;switch(!0){case!!t.play:await this.start();break;case!!t.pause:await this.pause();break;case!!t.stop:await this.stop();break;default:await this.defaultAction()}await this.updateBodyDOM(),this.registerRefresher()}}async pause(){return!1}defaultAction(){Array.from(this.domNodes.actions.querySelectorAll(".timer_action:not(.hidden)")).at(-1).click()}isRunning(){return this.getScheduledTime().then(Boolean)}isPaused(){return Promise.resolve(!1)}async updateBodyDOM(){const[e,t,s]=await Promise.all([this.renderBody(),this.isRunning(),this.isPaused()]);this.domNodes.body.replaceChildren(e);const r=s?this.pausedIcons:t?this.runningIcons:this.stoppedIcons;for(const e of[0,1,2])this.domNodes.actions.children.item(e).classList.toggle("hidden",!r[e]);this.domNodes.container.classList.toggle("timer_active",t&&!s)}async getScheduledTime(){const e=await browser.alarms.get(this.alarmName);if(!(e&&e.scheduledTime<Date.now()))return e?.scheduledTime}formatSeconds(e){const t=(0,i.Xm)(Math.round(e)).map((e=>e.toString().padStart(2,"0"))).map(((e,t,s)=>(0,r.z)("span",{textContent:`${e}${t+1===s.length?"":":"}`,class:"00"===e?"zeros":""})));return(0,r.z)("span",{class:"timer_time"},t)}async buildDOM(e){const[t]=await Promise.all([this.isRunning(),this.updateBodyDOM(),this.renderHead().then((e=>this.domNodes.head.replaceChildren(e)))]);if(t){e((()=>this.updateScrollTop()));this.registerRefresher()}return this.domNodes.container}updateScrollTop(){const e=this.domNodes.container.parentElement;if(!e)return;const{top:t,height:s}=this.domNodes.container.getBoundingClientRect(),{top:r,height:i}=e.getBoundingClientRect();t<r?e.scrollTop-=r-t:t+s>r+i&&(e.scrollTop+=t+s-r-i)}async registerRefresher(){if(!this.isRefreshing)for(this.isRefreshing=!0,await(0,n.Q)((()=>this.domNodes.container.isConnected),{delay:100,initDelay:100});this.isRefreshing;)this.domNodes.container.isConnected?await this.updateBodyDOM():this.isRefreshing=!1,await(0,o.BK)(200)}}},9998:(e,t,s)=>{"use strict";s.d(t,{$_:()=>a,Ct:()=>o,Jk:()=>n});var r=s(4069),i=(s(9773),s(8671));s(8408);let n=!0;r.Vq.then((e=>{e&&(n=!1)}));const a="about:home";async function o(){await(0,i.l)(a)}},2037:(e,t,s)=>{"use strict";s.d(t,{B8:()=>d,J8:()=>l});var r=s(9074),i=s(2665),n=s(4323),a=s(1470),o=s(235);const c=15e3;async function l(e,t,s,r){return(await async function(e,t,s,r){const n=s instanceof Blob,a=s instanceof FormData,l=await fetch(u(e,t),{method:"POST",signal:(0,o.n)(r?.timeout||c),body:n||a?s:s?JSON.stringify(s):void 0,headers:{Authorization:`Bearer ${await(0,i.c4)()}`,...a?{}:{"Content-Type":n?s.type:"application/json"},Accept:"application/json",...r?.headers}});return l}(e,t,s,r)).json()}async function d(e,t,s){return(await async function(e,t,s){return await fetch(u(e,t),{method:"GET",signal:(0,o.n)(s?.timeout||c),headers:{Authorization:`Bearer ${await(0,i.c4)()}`,...s?.headers}})}(e,t,s)).json()}function u(e,t){const s=new URLSearchParams((0,a.oD)(t)),i=e.replace(new RegExp(String.raw`:(\w+)`,"g"),(e=>{const t=e.slice(1),r=s.get(t)??(0,n.qb)(`missing parameter: ${t}`);return s.delete(t),r})),o=Array.from(s.keys()).length?`?${s}`:"";return`${r.Vd}/api/${i}${o}`}},2665:(e,t,s)=>{"use strict";s.d(t,{c4:()=>n});var r=s(910);s(1055);const i=new r.F("_bearer_tkn_",(()=>""),{storageArea:"local"}),n=()=>i.get()},1374:(e,t,s)=>{"use strict";s.d(t,{BO:()=>f,E6:()=>p,M$:()=>u,Q2:()=>m,RD:()=>h,SL:()=>a,Ub:()=>o,VE:()=>w,dS:()=>y,jw:()=>g,qm:()=>v,v6:()=>l,vC:()=>_,yf:()=>d});var r=s(4214),i=s(4261),n=s(683);function a(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s;return-1}const o=(e,t)=>e.filter(((s,r)=>0===r||!t(e[r-1],s)));function c(e,t){for(let s=0;s<e.length;s++)if(!t(e[s]))return e.slice(s);return[]}function l(e,t,{closedInterval:s=!1}={}){for(let r=0;r<e.length;r++)if(!t(e[r],r))return e.slice(0,s?r+1:r);return e.slice()}const d=(e,t)=>c(((e,t)=>c(e.reverse(),t).reverse())(e,t),t);function u(e,t){return h(e,t)}function h(e,t,...s){for(let r=0;r<e.length;r++)if(t(e[r]))return e.splice(r,1,...s),e;return e}function p(e,t){for(let s=e.length-1;s>=0;s--)e[s]===t&&e.splice(s,1);return e}function m(e,t,s){const r=function(e,t,s){if(e.length<=1)return-1;const r=Math.max(0,s.predicate?a(e,s.predicate):s.index??e.indexOf(s.item));if("closestNext"===t)return r+1>=e.length?e.length-2:r+1;const n=new i.E(r,0,e.length-1);return"next"===t?n.getNext():n.getPrevious()}(e,t,s);return r<0?void 0:e[r]}const g=e=>[...new Set(e)],_=(e,t)=>Object.values((0,r.W)(e,t));const f=e=>Array.isArray(e)?e:[e];function w(e,t,s){const r=e[t];return e[t]=e[s],e[s]=r,e}async function y(e,t,{executeSynchronously:s=!1}={}){const r=await(s?(0,n.f)(e.map(((e,s,r)=>()=>t(e,s,r)))):Promise.all(e.map(t)));return e.filter(((e,t)=>r[t]))}function v(e){const t=[];for(let s=0;s<e.length-1;s++)t.push([e[s],e[s+1]]);return t}},5772:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});const r=(e,t=!0)=>t?(t,s)=>(t[e]||0)-(s[e]||0):(t,s)=>(s[e]||0)-(t[e]||0)},4261:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});class r{startValue;minValue;maxValue;_index;constructor(e,t,s){this.startValue=e,this.minValue=t,this.maxValue=s,this._index=e}get current(){return this._index}get isLast(){return this._index===this.maxValue}get isFirst(){return this._index===this.minValue}setValue(e){this._index=e}getNext(){return this._index>=this.maxValue?this._index=this.minValue:++this._index}getPrevious(){return this._index<=this.minValue?this._index=this.maxValue:--this._index}map(e){const t=[],s=this._index;let r=0;do{t.push(e(this._index,r++))}while(s!==this.getNext());return t}}},959:(e,t,s)=>{"use strict";var r,i;s.d(t,{E:()=>r}),(e=>{e.sync="sync",e.local="local",e.session="session"})(r||(r={})),(e=>{e.loading="loading",e.complete="complete"})(i||(i={}))},7384:(e,t,s)=>{"use strict";s.d(t,{p:()=>o});var r=s(4323),i=s(1374);const n=new Set,a=new Array;async function o(e,t){if(t&&(n.delete(e),await t()),!n.has(e))return new Promise(((t,s)=>{const n={tabId:e,resolve:t};a.push(n),(0,r.BK)(1e4).then((()=>{(0,i.E6)(a,n),s(new Error("timeout waiting for tab"))}))}))}browser.runtime.onMessage.addListener(((e,t)=>{if("___ext_tab_ready"===e.type){const e=t.tab?.id||0;n.add(e),a.forEach((({tabId:t,resolve:s})=>{t===e&&s()}))}}))},9114:(e,t,s)=>{"use strict";s.d(t,{N:()=>i,O:()=>r});const r=!!browser.extension.inIncognitoContext,i=!1},7137:(e,t,s)=>{"use strict";s.d(t,{x:()=>i});const r=new Map;async function i(e){if(r.has(e))return r.get(e);const t=browser.permissions.request({permissions:[e]}).catch((e=>!1));return r.set(e,t),t.finally((()=>r.delete(e)))}},7302:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});s(9074);var r=s(1055);s(4323);const i=e=>r.x&&!browser?.runtime?e:browser.runtime.getURL(e)},364:(e,t,s)=>{"use strict";s.d(t,{U:()=>i});var r=s(7852);function i({hexColor:e,rgb:t},{white:s="#ffffff",black:i="#000000"}={}){const[n,a,o]=e?(0,r.E)(e):t;return(299*n+587*a+114*o)/1e3>=128?i:s}},7852:(e,t,s)=>{"use strict";function r(e){const t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,255&t]}s.d(t,{E:()=>r})},984:(e,t,s)=>{"use strict";function r(e,t,s){s/=100;const r=t*Math.min(s,1-s)/100,i=t=>{const i=(t+e/30)%12,n=s-r*Math.max(Math.min(i-3,9-i,1),-1);return Math.round(255*n).toString(16).padStart(2,"0")};return`#${i(0)}${i(8)}${i(4)}`}s.d(t,{S:()=>r})},303:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});var r=s(4323);const i=e=>{const t=e.toString(16);return 1==t.length?`0${t}`:t};function n(e){const[t,s=""]=e.split("("),n=s.split(",");if(n.length<3)return"";const[a,o,c,l]=n.map((e=>parseInt(e)));return isNaN(a)||isNaN(o)||isNaN(c)?"":`#${i(a)}${i(o)}${i(c)}${(0,r.kf)(l)?i(l):""}`}},2062:(e,t,s)=>{"use strict";s.d(t,{k:()=>i});var r=s(9254);class i{keyPromise;constructor(e){this.keyPromise=i.getWrappingKey(e)}async wrapKey(e){const t=await self.crypto.subtle.wrapKey("raw",e,await this.keyPromise,"AES-KW");return(0,r.JR)(t)}async unwrapKey(e){return self.crypto.subtle.unwrapKey("raw",(0,r.Al)(e),await this.keyPromise,"AES-KW","AES-GCM",!0,["encrypt","decrypt"])}static async getWrappingKey(e){const t=await self.crypto.subtle.importKey("raw",(0,r.Al)(e.hash),"PBKDF2",!1,["deriveBits","deriveKey"]);return self.crypto.subtle.deriveKey({name:"PBKDF2",salt:new Uint8Array(e.options.salt),hash:"SHA-256",iterations:e.options.iterations<=1e6?e.options.iterations:1e5},t,{name:"AES-KW",length:256},!0,["wrapKey","unwrapKey"])}}},4721:(e,t,s)=>{"use strict";s.d(t,{d:()=>i});var r=s(4323);async function i(e,t){const s=(0,r.Kg)(e)?(new TextEncoder).encode(e):e;return Array.from(new Uint8Array(await self.crypto.subtle.digest(t,s))).map((e=>e.toString(16).padStart(2,"0"))).join("")}},9254:(e,t,s)=>{"use strict";function r(e){return self.crypto.subtle.importKey("raw",(new TextEncoder).encode(e),"PBKDF2",!1,["deriveBits","deriveKey"])}function i(e){return String.fromCharCode(...new Uint8Array(e))}function n(e){const t=new ArrayBuffer(e.length),s=new Uint8Array(t);for(let t=0,r=e.length;t<r;t++)s[t]=e.charCodeAt(t);return s}function a(e){return Array.from(self.crypto.getRandomValues(new Uint8Array(e/8)))}s.d(t,{Al:()=>n,JR:()=>i,Tc:()=>r,gU:()=>a})},7398:(e,t,s)=>{"use strict";s.d(t,{Er:()=>a,mA:()=>o,qi:()=>c});var r=s(4716),i=s(9254),n=s(2062);async function a(e,t){const{hint:s="",name:n="PBKDF2",salt:a=[...self.crypto.getRandomValues(new Uint8Array(16))],iterations:o=1e5,hash:c="SHA-256"}=t,l=await(0,i.Tc)(e),d=await(0,r.e)(`Hashing with: ${n}, ${c}, ${o.toLocaleString()}`,(()=>self.crypto.subtle.deriveBits({name:n,salt:new Uint8Array(a),iterations:o,hash:c},l,256)));return{hash:(0,i.JR)(d),options:{name:n,salt:a,iterations:o,hash:c,hint:s,..."secret"in t?{secret:t.secret}:{}}}}async function o(e,t,s={}){const r=await a(e,s),i=await new n.k(r).wrapKey(t);return{hash:r.hash,options:{...r.options,secret:i}}}async function c(e,t,s,r={}){const i=await o(e,s,r),n=await o(t,s,{iterations:r.iterations||1e6,salt:[...self.crypto.getRandomValues(new Uint8Array(r.salt?.length||16))]});return{hash:i.hash,options:{...i.options,recoverySecret:n.options.secret,recoverySalt:n.options.salt}}}},51:(e,t,s)=>{"use strict";s.d(t,{y:()=>i});var r=s(7526);async function i(e,t){const s=`id_file_${t?(0,r.V)():e}`;if(document.getElementById(s))return;const i=document.createElement("link");return i.href=t?`data:text/css;base64,${btoa(e)}`:e,i.id=s,i.type="text/css",i.rel="stylesheet",new Promise(((e,t)=>{i.onload=e,i.onerror=t,document.head.appendChild(i)}))}},3694:(e,t,s)=>{"use strict";s.d(t,{Ib:()=>n,Sy:()=>r,Xm:()=>c,aG:()=>o,dR:()=>a,i5:()=>l,kG:()=>i});const r=()=>Math.floor(Date.now()/1e3),i=(e,t,s=0)=>3600*e+60*t+s;function n(e=Date.now()){const t=new Date(e);return`${t.toLocaleDateString()} ${t.toLocaleTimeString()}`}function a(e,t,s,r){const i=new Date;return function(e,t){const s=t-e.getDay();e.setDate(e.getDate()+s)}(i,e),i.setHours(t,s,r,0),i}function o(e=new Date,t){return t(e),e.getTime()}function c(e){const t=e<0?"ceil":"floor";return e?[Math[t](e/3600),Math[t](e%3600/60),e%60]:[0,0,0]}function l(e){return(e<0?"-":"")+c(60*Math.abs(e)).slice(0,2).map((e=>`${e}`.padStart(2,"0"))).join(":")}},9180:(e,t,s)=>{"use strict";s.d(t,{$L:()=>o,Lm:()=>a,n:()=>r,xE:()=>n,xF:()=>i});const r=e=>1e3*e,i=e=>6e4*e,n=e=>36e5*e,a=e=>864e5*e,o=e=>Math.round(e/6e4)},4896:(e,t,s)=>{"use strict";s.d(t,{f:()=>i});var r=s(1055);const i=(e,t,s)=>{const i=s.value;return s.value=function(...e){if(r.x)return i.apply(this,e)},s}},9849:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(2319);const i=(e,t,s)=>{let i;const n=s.value,a=new r.H((async()=>n.apply(i)));s.value=function(){return i=this,a.execute()}}},1061:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,h:()=>a});var r=s(4681);function i(){return new Worker(s.p+"base_x.worker.worker.js")}s(1055);const n=" !#$%&'()*+,-./0123456789:;=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~";async function a(e){return(0,r.c)(i,{type:"encode",alphabet:n,buffer:e})}async function o(e){return(0,r.c)(i,{type:"decode",alphabet:n,data:e})}},2031:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});s(6062);function r(e){}},170:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r});s(6062);function r(){0}},4069:(e,t,s)=>{"use strict";s.d(t,{Nx:()=>a,Vq:()=>i,m0:()=>r});s(4648);let r=!1;const i=browser.runtime.getPlatformInfo?.().then((e=>r="android"===e.os))||Promise.resolve(!1);let n=null;const a=i.then((e=>n=!e))},4648:(e,t,s)=>{"use strict";s.d(t,{J:()=>r});const r=()=>"moz-extension:"!==self.location.protocol},6062:(e,t,s)=>{"use strict";s.d(t,{Dy:()=>r,XM:()=>i});const r=self.location.href===browser.runtime.getManifest().background?.page||"/_generated_background_page.html"===self.location.pathname;const i=()=>self.location.href===browser.runtime.getManifest().options_ui.page},9773:(e,t,s)=>{"use strict";s.d(t,{n9:()=>i,qV:()=>r});const r=()=>!1,i=()=>!1},9451:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});const r=new(s(910).F)("_errorLogger",(()=>Array()),{storageArea:"session"})},5524:(e,t,s)=>{"use strict";s.d(t,{cO:()=>o,t$:()=>l,vV:()=>c});var r=s(4323),i=s(6062),n=s(9451);const a=e=>n.g.update((t=>{const s=JSON.stringify(e);return s.length>1e4&&(e={name:"Error message is too long",time:Date.now(),context:"x",data:s.slice(0,5e3)+"... (truncated) ..."+s.slice(-100)}),t.push(e),t.slice(-50)}));function o(e,t){const s={name:t?e+" | "+d(t):e,time:Date.now(),context:i.Dy?"bc":"fr"};a(s)}function c(e,t,s){const r=Error().stack,n={name:e,context:i.Dy?"bc":"fr",errName:t?.name||t?.target?.error?.name,errMessage:t?.message||t?.target?.error?.message,err:String(t),data:d(s),time:Date.now(),stack:r};a(n)}function l(e,t){return s=>(c(e,s,t),Promise.reject(s))}function d(e){try{return(0,r.Kg)(e)?e:JSON.stringify(e)}catch(t){return String(e)}}},2801:(e,t,s)=>{"use strict";s.d(t,{V:()=>n});var r=s(4323),i=s(1374);class n{maxConcurrentJobs;options;_work;_runningJobs;_lastRunDoneTime;constructor(e=1,t={}){this.maxConcurrentJobs=e,this.options=t,this._work=this.options.initialWork||[],this._runningJobs=[],this._lastRunDoneTime=0}hasFreeSlot(){return this._runningJobs.length<(0,r.oA)(this.maxConcurrentJobs)}getRunningJobsCount(){return this._runningJobs.length}getPendingJobsCount(){return this._work.length}async addWork(e,t){if(this.options.uniquePredicate){const e=e=>this.options.uniquePredicate(e.info,t),s=this._work.find(e)||this._runningJobs.find(e);if(s)return s.getPromise()}const s=new Promise(((r,n)=>{const a={info:t,getPromise:()=>s,fn:()=>{const s=e();s.finally((async()=>{(0,i.E6)(this._runningJobs,a),this.options.afterEach&&await this.options.afterEach(t),s.then(r,n).finally((()=>{Promise.resolve().then((()=>this.startWork())),this._lastRunDoneTime=Date.now()}))}))}};this._work.push(a),this.startWork()}));return s}async startWork(){if(this.options.minDelayAfterRun&&this._work.length>0){const e=Date.now()-this._lastRunDoneTime;e<this.options.minDelayAfterRun&&await(0,r.BK)(this.options.minDelayAfterRun-e)}for(;this._work.length>0&&this._runningJobs.length<(0,r.oA)(this.maxConcurrentJobs)&&(0===this._runningJobs.length||!this.options.canRunWithOthers||this.options.canRunWithOthers(this._work[0].info,this._runningJobs.map((e=>e.info))));){const e=this._work.shift();this._runningJobs.push(e),this.options.beforeEach&&await this.options.beforeEach(e.info),e.fn()}}}},8698:(e,t,s)=>{"use strict";s.d(t,{U:()=>i});var r=s(4323);function i(e,t,{maximumDelay:s=0}={}){let i=-1,n=-1,a=r.lQ;function o(){i>0&&self.clearTimeout(i),s&&n>0&&self.clearTimeout(n),i=n=-1,a=r.lQ}return c.flush=()=>a(),c.cancel=()=>(-1!==i||-1!==n)&&(o(),!0),c;function c(r=t,c=e){if(self.clearTimeout(i),i=-1,!1===c)return;const l=a=()=>{o(),r()};i=self.setTimeout(l,c),s&&n<0&&(n=self.setTimeout(l,s))}}},9574:(e,t,s)=>{"use strict";function r(e){let t,s=!1;return(...r)=>s?t:(s=!0,t=e(...r))}s.d(t,{m:()=>r})},2319:(e,t,s)=>{"use strict";s.d(t,{H:()=>r});class r{_callback;promise;constructor(e){this._callback=e}execute(){return this.promise||(this.promise=this._callback().finally((()=>{this.promise=void 0}))),this.promise}}},683:(e,t,s)=>{"use strict";s.d(t,{f:()=>i});var r=s(4323);async function i(e,{beforeEach:t=r.lQ,afterEach:s=r.lQ,ignoreExceptions:i=!1}={}){const n=Array(e.length);for(let r=0;r<e.length;r++){await t(r);const a=e[r],o=await(i?a().then((e=>[e])).catch((e=>[void 0,e||"unknown GSD error"])):a().then((e=>[e])));n[r]=o,await s(r,o)}return n}},2780:(e,t,s)=>{"use strict";s.d(t,{v:()=>r});class r{mode;workList;isRunning;constructor(e){this.mode=e,this.workList=[],this.isRunning=!1}addWork(e){return new Promise((t=>{this.workList.push({job:e,resolve:t}),this.startWork()}))}async startWork(){if(!this.isRunning&&this.workList.length){switch(this.isRunning=!0,this.mode){case"one_by_one":{const{job:e,resolve:t}=this.workList.shift();await e().then(t);break}case"one_by_last_one":const e=this.workList.slice();this.workList.length=0;const{job:t,resolve:s}=e.at(-1);await t(),e.forEach((e=>e.resolve()))}this.isRunning=!1,this.startWork()}}}},3635:(e,t,s)=>{"use strict";s.d(t,{Q:()=>i});var r=s(4323);async function i(e,{delay:t,initDelay:s,maxDelay:i}){for(s&&await(0,r.BK)(s);;){const s=await e();if(s)return s;await(0,r.BK)(t),t*=2,i&&(t=Math.min(t,i))}}},416:(e,t,s)=>{"use strict";async function r(e,t){e(!0);try{return await t()}finally{e(!1)}}s.d(t,{$:()=>r})},9676:(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var r=s(4323);function i(e,t,s){return new Promise(((i,n)=>{const a=setTimeout((()=>{try{i((0,r.oA)(t))}catch(e){n(e)}}),e);s().finally((()=>{clearTimeout(a)})).then(i,n)}))}},8063:(e,t,s)=>{"use strict";s.d(t,{F:()=>o});var r=s(235),i=s(4323),n=s(9180);const a=new Map;async function o(e){const t=a.get(e)||fetch(e,{signal:(0,r.n)(12e3)});a.set(e,t);const s=await t;return(0,i.BK)((0,n.xF)(5)).then((()=>a.delete(e))),s.clone()}},235:(e,t,s)=>{"use strict";function r(e){const t=new AbortController;return setTimeout((()=>t.abort()),e),t.signal}s.d(t,{n:()=>r})},1009:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var r=s(1434),i=s(8063);async function n(e,t=!0){const s=await(await(t?i.F:fetch)(e)).text(),[{nodes:n}]=await(0,r.$)(s,[{query:"head > title",attributes:["textContent"]}]);return n?.at(0)?.textContent.trim()||""}},7700:(e,t,s)=>{"use strict";s.d(t,{G:()=>r,T:()=>i});const r=e=>i(e,"readAsDataURL");function i(e,t){return new Promise(((s,r)=>{const i=new FileReader;i.onload=e=>s(i.result),i.onerror=i.onabort=r,i[t](e)}))}},3660:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});var r=s(4323),i=s(9676),n=s(9180);async function a(e,t,{timeout:s=(0,n.n)(10)}={}){return(await Promise.all((await browser.webNavigation.getAllFrames({tabId:t})).map((r=>(0,i.w)(s,void 0,(()=>browser.scripting.executeScript({target:{tabId:t,frameIds:[r.frameId]},func:()=>window.name}).then((([e])=>e.result)).catch((()=>"")).then((t=>t===e?r.frameId:void 0)))))))).find(r.qS)}},8282:(e,t,s)=>{"use strict";s.d(t,{Ac:()=>o,F7:()=>n,P4:()=>i,eC:()=>c,lu:()=>u,pf:()=>r,px:()=>a,tT:()=>l,xz:()=>d});const r="about:blank",i="<all_urls>",n="https://fastaddons.com/",a="https://www.facebook.com/fastaddons",o="https://twitter.com/FastAddons",c="https://www.linkedin.com/company/fastaddons/",l="https://www.patreon.com/fastaddons",d="https://paypal.me/fastaddons/",u="https://ko-fi.com/fastaddons"},9598:(e,t,s)=>{"use strict";s.d(t,{u:()=>a,z:()=>n});var r=s(4323);const i=new Set(["svg","path","circle","text"]);function n(e,t,s=[]){const n=i.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);if(t){const e=(0,r.Kg)(t)?{textContent:t}:t;Object.entries(e).forEach((([t,s])=>{switch(t){case"text":case"textContent":n[t]=s;break;case"handlers":Object.assign(n,e.handlers);break;default:n.setAttribute(t,s)}}))}for(const e of s)n.appendChild(e);return n}function a(e,t){const s=document.createElement(e);return s.textContent=t,s}},2541:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});const r=new class{#s=0;set(e,t=0){t<this.#s||(this.#s=t,document.title=e)}}},3773:(e,t,s)=>{"use strict";function r(e,t){const s=(new self.DOMParser).parseFromString(e,"text/html");return t.map((({query:e,attributes:t})=>({query:e,nodes:Array.from(s.querySelectorAll(e)).map((e=>Object.fromEntries(t.map((t=>[t,("textContent"===t?e.textContent:e.getAttribute(t))||""])))))})))}s.d(t,{x:()=>r})},1434:(e,t,s)=>{"use strict";s.d(t,{$:()=>n});var r=s(9676),i=s(3773);async function n(e,t){if(self.DOMParser)return(0,i.x)(e,t);{const s={type:"_ext_dom_extractor_query",htmlText:e,queries:t},i=await(0,r.w)(5e3,null,(()=>browser.runtime.sendMessage(s).catch((()=>null))));if(i)return i}const s=(await browser.tabs.query({discarded:!1})).filter((e=>e.url?.startsWith("http"))).sort(((e,t)=>+t.active-+e.active)).slice(0,5);for(const n of s)try{return await(0,r.w)(5e3,(()=>Promise.reject()),(()=>browser.scripting.executeScript({target:{tabId:n.id,allFrames:!1},args:[e,t],func:i.x}).then((([e])=>e.result||t.map((e=>({query:e.query,nodes:[]})))))))}catch(e){}throw"DOMParser not available"}},1185:(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var r=s(7865),i=s(8815);class n{key;callback;static PREFIX="dom_c_";constructor(e,t){this.key=e,this.callback=t,r.W.then((()=>{const s=(0,i.g)((()=>window.localStorage.getItem(n.PREFIX+e)))||"";t(e,s)}))}update(e){(0,i.g)((()=>window.localStorage.setItem(n.PREFIX+this.key,e))),this.execute(e)}execute(e){this.callback(this.key,e)}}},7865:(e,t,s)=>{"use strict";s.d(t,{W:()=>i});var r=s(1055);const i=r.x?Promise.resolve():new Promise((e=>"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",(()=>e()))))},1361:(e,t,s)=>{"use strict";s.d(t,{G:()=>i});var r=s(4323);class i{_handlers=[];constructor(){}clearAll(){(0,r.XB)(this._handlers)}addListener(e,t,s,r){e.addEventListener(t,s,r),this._handlers.push((()=>e.removeEventListener(t,s,r)))}addClass(e,t){e.classList.add(t),this._handlers.push((()=>e.classList.remove(t)))}addOnClearHandler(e){this._handlers.push(e)}}},1181:(e,t,s)=>{"use strict";s.d(t,{dG:()=>i,do:()=>r,jo:()=>n});const r=e=>t=>{n(t),e(t)},i=e=>e.stopPropagation();function n(e){e.preventDefault(),e.stopImmediatePropagation()}},8303:(e,t,s)=>{"use strict";function r(e){const t=e.composedPath();return e.composedPath=()=>t,e}function i(e){const t=e.dataTransfer;return Object.defineProperty(e,"dataTransfer",{writable:!1,value:t}),e}s.d(t,{E:()=>r,O:()=>i})},7813:(e,t,s)=>{"use strict";s.d(t,{O$:()=>a,Z5:()=>o,lU:()=>c});var r=s(4323),i=s(8168),n=s(1962);const a={HOVER:["onmouseenter","onmouseleave"],ACTIVE:["onmousedown","onmouseup"],DRAG:["ondragenter","ondragleave"]},o=(e,t="",s={})=>({...c(e,a.HOVER,s),...c(t,a.ACTIVE,s)});function c(e,[t,s],{getNode:a,important:o=!1,restoreOriginalStyles:c=!0}={}){const l=e.split(";").filter(r.zz).map((e=>e.trim())).map((e=>{const[t,s=""]=(0,i.$y)(e,":");return s.endsWith(n.d6)?[t,s,n.d6]:[t,s,""]})),d=[];return{[t]:function(e){const t=a?a():e.currentTarget;0===d.length&&function(e){const t=window.getComputedStyle(e);d.push(...l.map((([e,s])=>[e,t.getPropertyValue(e),t.getPropertyPriority(e)])))}(t);l.forEach((([e,s])=>t.style.setProperty(e,s,o?n.dc:void 0)))},[s]:function(e){const t=a?a():e.currentTarget;d.forEach((([e,s,r])=>c?t.style.setProperty(e,s,r?n.dc:r):t.style.removeProperty(e)))}}}},6004:(e,t,s)=>{"use strict";s.d(t,{$$:()=>w,$A:()=>E,A0:()=>d,DT:()=>I,Gd:()=>y,LF:()=>_,QX:()=>L,Ub:()=>k,Xm:()=>b,Y6:()=>h,Zl:()=>g,_U:()=>A,dQ:()=>P,eC:()=>f,fq:()=>S,iT:()=>R,mj:()=>D,mx:()=>p,nl:()=>u,t$:()=>m});var r=s(4323),i=s(8168),n=s(4590),a=s(7302),o=s(1962),c=s(9598),l=s(5076);const d=e=>e instanceof HTMLInputElement&&e.setSelectionRange(0,e.value.length);function u(e){const t=document.createDocumentFragment();for(let s=0;s<e.length;s++)t.appendChild(e[s]);return t}function h(e){const[t,s,r]=e;return"string"!=typeof t?u(e.map((e=>e&&h(e)))):(0,c.z)(t,s,r?[h(r)]:void 0)}function p(e,t={}){return(0,c.z)("input",{type:"checkbox",...t,...e?{checked:!0}:{}})}function m(e,t={},s={},r={},[i,n]){const o=(0,c.z)("input",{type:"checkbox",...t,...e?{checked:!0}:{}}),l=(0,c.z)("img",{...r}),d=(0,c.z)("div",{...s},[o,l]),u=()=>l.src=(0,a.Z)(o.checked?i:n);return u(),o.addEventListener("change",u),Object.defineProperty(d,"checked",{get:()=>o.checked,set:e=>{o.checked=e,u()}}),d}const g=e=>(0,r.Kg)(e)?(0,o.$H)(e):e;function _(e,t){const s=window.getComputedStyle(e);Array.from(s).forEach((e=>t.style.setProperty(e,s.getPropertyValue(e),s.getPropertyPriority(e))))}const f=(e,t,s)=>e.style.setProperty(t,s,"important");function w(e){e&&(e.style.display="none")}function y(e){e&&(e.style.display="")}function v(e){e.style.visibility="hidden"}function b(e){e.style.visibility="visible"}async function E(e,t,{styleContainer:s="",styleImg:r="",styleLabel:i=""}={}){const o=h(["div",{class:"flex flex-space-between",style:s},[["img",{src:(0,a.Z)("svg/loading.svg"),style:`width: 18px;${r}`,class:"spinning"}],["label",{textContent:(0,n.tr)("sync_working"),style:i}]]]);return e.insertAdjacentElement("beforebegin",o),await async function(e,t){const s="display",[r,i]=[e.style.getPropertyValue(s),e.style.getPropertyPriority(s)];return e.style.setProperty(s,"none","important"),await t().finally((()=>{e.style.setProperty(s,r,i)}))}(e,t).finally((()=>{o.remove()}))}async function D(e,{time:t=1500,animate:s=!1,animationTime:i=200,removeAfter:n=!1}={}){return b(e),s?(e.style.transition=`opacity ${i}ms ease 0s`,await(0,r.BK)(t),e.style.opacity="0",await(0,r.BK)(i)):await(0,r.BK)(t),n?e.remove():v(e),e}const A=e=>e instanceof HTMLButtonElement||e instanceof HTMLFieldSetElement||e instanceof HTMLInputElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement;function I(e="",{important:t=!0,allToInitial:s=!0}={}){if(!s&&!t)return e;const r=e.split(";").filter((e=>e.trim())),i=s?["all: initial",`z-index: ${o.hx}`,"font-family: Verdana, system-ui, sans-serif, Helvetica","font-size: 12px",...r]:r;return(t?i.map((e=>`${e}!important;`)):i).join("")}function S(e,t){const s=t.split(";").filter((e=>e.trim())),r=e.style;s.forEach((e=>{const[t,s]=(0,i.$y)(e,":").map((e=>e.trim())),n=s.endsWith(o.d6),a=n?s.slice(0,o.d6.length).trim():s;r.setProperty(t,a,n?o.dc:"")}))}function k(e){(e=e.isCustomField?e.node:e).focus(),["text","search","url","tel","password"].includes(e.type)&&e.setSelectionRange(0,e.value.length)}const P="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;",R=(e,t=document,s)=>(0,l.J)(t.querySelector(e),s);function L(e,t){for(let s=0;s<t;s++)e=e.parentElement||e;return e}},1962:(e,t,s)=>{"use strict";s.d(t,{$H:()=>c,$b:()=>n,EW:()=>u,RO:()=>i,bf:()=>l,d6:()=>o,dc:()=>a,hx:()=>r,if:()=>d});const r=2147483647,i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n="firefox",a="important",o="!"+a,c=e=>document.getElementById(e),l=e=>e?.remove();function d(e){for(let t=e.length-1;t>=0;t--)e[t].remove()}function u(e){return e?e.target:void 0}},3091:(e,t,s)=>{"use strict";s.d(t,{$:()=>n});var r=s(4323),i=s(6004);const n=(e,{rootNode:t=e,USE_PERCENT:s=!1,PERCENT_RATIO:n=100,elementWidth:a,dontMovePredicate:o=r.lQ,onMoveStart:c=r.lQ,onMoveEnd:l=r.lQ,autoLockFrames:d=!1,autoLockFramesContainer:u,keepInWindow:h}={})=>{let p=0,m=0,g=0,_=0,f=!1,w=r.lQ;const y=e=>Math.round(e*a/n),v=e=>Math.round(e*n/a),b=(e,t,r)=>s?w(v(e),v(t),r):w(e,t,r);return t.addEventListener("mousedown",(function(e){if(0!==e.button||o(e))return;c(e),f=!0,e.preventDefault(),d&&(s=u||t,s.querySelectorAll("iframe").forEach((e=>(0,i.eC)(e,"pointer-events","none"))));var s;p=e.pageX-g,m=e.pageY-_;const r=e=>{_=e.pageY-m,g=e.pageX-p,b(g,_,e)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",(e=>{document.removeEventListener("mousemove",r),f=!1,d&&function(e){e.querySelectorAll("iframe").forEach((e=>e.style.removeProperty("pointer-events")))}(u||t),h&&I(),l(e)}),{once:!0})})),h&&window.addEventListener("resize",(()=>I())),{node:e,getX:D,getY:E,shift:(e,t)=>{g+=e,_+=t,w(g,_)},setCallback:e=>w=e,isMoving:()=>f,setPosition:A,moveToViewport:I};function E(){return s?v(_):_}function D(){return s?v(g):g}function A(e=D(),t=E(),r=!1){s&&(e=y(e),t=y(t));const i=g!==e||_!==t;g=e,_=t,(i||r)&&b(g,_)}function I({pixelsToKeep:t}={}){const{top:s,left:i,bottom:n,right:a,height:o,width:c}=e.getBoundingClientRect();s<0&&A(void 0,0);const l=(0,r.qS)(t)?t:(0,r.qS)(h)?h:0,d=Math.max(0,c-l),u=Math.max(0,o-l);i<0-d&&A(0-d,void 0),n>window.innerHeight+u&&A(void 0,Math.max(0,window.innerHeight-o+u)),a>window.innerWidth+d&&A(Math.max(0,window.innerWidth-c+d),void 0)}}},4590:(e,t,s)=>{"use strict";s.d(t,{C8:()=>l,P$:()=>a,ZB:()=>c,tr:()=>o});var r=s(4323);s(1374);const[i,n]=(0,r.Mj)(),a=Promise.resolve(),o=(e,t)=>e?browser.i18n.getMessage(e,t):"",c=(e,...t)=>o(e,t.map((e=>String(e)))),l=e=>Array.isArray(e)?c(...e):e?o(e):"";new Map},4067:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});const r=(e,t)=>`background-color: ${t};\n-webkit-mask: url('${e}') center center / contain no-repeat;\nmask: url('${e}') center center / contain no-repeat;`},1471:(e,t,s)=>{"use strict";s.d(t,{MO:()=>i,ak:()=>r});function r(e,t,s){return r=>{"Escape"===r.key&&e?e(r):"Enter"===r.key&&t?t(r):s&&s(r)}}function i({onKey:e,onArrowUp:t,onArrowDown:s,onEnter:r,onCtrlEnter:i,onEsc:n,preventDefaultOnMatch:a,stopPropagationOnMatch:o,stopPropagation:c}){return l=>{c&&l.stopPropagation(),e&&e(l);switch(l.key){case"Enter":r&&(r(l),d()),l.ctrlKey&&i&&(i(l),d());break;case"Escape":n&&(n(l),d());break;case"ArrowUp":t&&(t(l),d());break;case"ArrowDown":s&&(s(l),d())}function d(){a&&l.preventDefault(),o&&l.stopPropagation()}}}},7371:(e,t,s)=>{"use strict";s.d(t,{v:()=>n,O:()=>a});var r=s(4681);function i(){return new Worker(s.p+"lzma_high_compressor.worker.worker.js")}s(611),s(1055);async function n(e,t=9){return(0,r.c)(i,{type:"compress",mode:t,data:e})}async function a(e){return(0,r.c)(i,{type:"decompress",byteArray:e})}},3700:(e,t,s)=>{"use strict";s.d(t,{j:()=>r});class r extends Map{options;constructor(e={}){super(e.entries||e.iterable),this.options=e}get(e){const t=super.get(e),s=t||new Set;return t||super.set(e,s),s}add(e,t){const s=this.get(e);return s.add(t),super.set(e,s)}remove(e,t){const s=this.get(e);return s.delete(t),super.set(e,s)}map(e){const t=new r;for(const[s,r]of this){const i=new Set;let n=0;for(const t of r)i.add(e(t,n++,s));t.set(s,i)}return t}}},2460:(e,t,s)=>{"use strict";s.d(t,{FK:()=>i,RM:()=>r});const r=e=>{let t=0;for(let s=0;s<e.length;s++)t+=e[s];return t},i=e=>Math.floor(100*e)/100},6777:(e,t,s)=>{"use strict";var r;s.d(t,{w:()=>r}),(e=>{e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"})(r||(r={}))},9100:(e,t,s)=>{"use strict";s.d(t,{n:()=>r});const r=(e,t,s)=>Math.max(e,Math.min(t,s||0))},7526:(e,t,s)=>{"use strict";s.d(t,{V:()=>r});const r=(()=>{let e=0;return()=>++e})()},4214:(e,t,s)=>{"use strict";function r(e,t){const s={};if(!e)return s;for(let r=0;r<e.length;r++){const i=e[r];s[i[t]]=i}return s}s.d(t,{W:()=>r})},1470:(e,t,s)=>{"use strict";function r(e,t){return function(e){const t=Object.getOwnPropertyNames(e);for(let s=0;s<t.length;s++)delete e[t[s]]}(e),Object.assign(e,t)}function i(e,t,{deleteFalse:s=!1}={}){return e[t]=!e[t],s&&!e[t]&&delete e[t],e}function n(e,t,s){return s?e[t]=s:delete e[t],e}s.d(t,{FP:()=>o,KQ:()=>n,PT:()=>r,Ym:()=>i,oD:()=>a});const a=e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,String(t)]))),o=(e,t)=>Object.keys(e).reduce(((s,r)=>(s[r]=e[r]-t[r],s)),{})},6382:(e,t,s)=>{"use strict";s.d(t,{c:()=>r});class r{subscribers=[];addOnChange(e){this.subscribers.push(e)}removeOnChange(e){this.subscribers=this.subscribers.filter((t=>t!==e))}hasOnChange(e){return this.subscribers.includes(e)}notifyChange(e){this.subscribers.forEach((t=>{try{t(e)}catch(e){}}))}}},2462:(e,t,s)=>{"use strict";s.d(t,{Ie:()=>i,K_:()=>r});const r=()=>[];const i=void 0},5472:(e,t,s)=>{"use strict";s(4323);var r=s(4648),i=(s(7302),s(1055),s(8312),s(2790),s(5654),s(2462),s(1894),s(8282));(0,r.J)()||(browser.windows||(browser.windows={}),browser.windows.getCurrent||(browser.windows.getCurrent=async e=>{const t=await browser.tabs.query({}),s=t.find((e=>e.active));return{id:s?.windowId??1,title:s?.title??"",focused:!0,alwaysOnTop:!1,incognito:!!browser.extension.inIncognitoContext,...e?.populate?{tabs:t}:{},state:"maximized",type:"normal",height:screen.availHeight,width:screen.availWidth,top:0,left:0}}),browser.windows.getLastFocused||(browser.windows.getLastFocused=async e=>browser.windows.getCurrent(e)),browser.windows.get||(browser.windows.get=async(e,t)=>{const[s]=await browser.tabs.query({windowId:e});return{...await browser.windows.getCurrent(t),id:s?.windowId??1,title:s?.title??"",focused:s?.active}}),browser.windows.getAll||(browser.windows.getAll=async e=>!1!==e?.windowTypes?.includes("normal")?[await browser.windows.getCurrent(e)]:[]),browser.windows.update||(browser.windows.update=async(e,t)=>{if(t.focused||"maximized"===t.state){const[t]=await browser.tabs.query({windowId:e});t&&await browser.tabs.update(t.id,{active:!0})}return browser.windows.getCurrent()}),browser.windows.remove||(browser.windows.remove=async e=>{const[t]=await browser.tabs.query({windowId:e});t&&await browser.tabs.remove(t.id)}),browser.windows.create||(browser.windows.create=async e=>{const t=e?.url?Array.isArray(e.url)?e.url:[e.url]:[i.pf];for(const s of t)await browser.tabs.create({url:s,active:e?.focused});const s=await browser.windows.getCurrent({populate:!0});return s.tabs=s.tabs.filter((e=>e.windowId===s.id)),s}))},1894:(e,t,s)=>{"use strict";var r=s(8312),i=s(6382),n=s(9849),a=s(4323),o=s(4896),c=s(2462);function l(e,t,s,r){var i,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(n<3?i(a):n>3?i(t,s,a):i(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a}class d extends i.c{broadcast;storage;constructor(){super(),this.broadcast=new BroadcastChannel("web_ext_alarms"),this.storage=r.r.getBrowserPolyfill("_internal_alarms"),this.infiniteAlarmsCheck()}async clearAll(){return await this.storage.clear(),!0}async clear(e=""){const{[e]:t}=await this.storage.get(e);return!!t&&(await this.storage.remove(e),!0)}async create(e,t){const[s,r]="string"==typeof e?[e,t]:["",e],i=Date.now(),n={name:s,scheduledTime:r.periodInMinutes?this.computeNextRun(r.periodInMinutes):r.when||i+6e4*(r.delayInMinutes||0),periodInMinutes:r.periodInMinutes};n.scheduledTime<i?this.notifyAllContexts(n):await this.storage.set({[s]:n})}async get(e=""){const{[e]:t}=await this.storage.get(e);return t}async getAll(){const e=await this.storage.get();return Object.values(e)}async infiniteAlarmsCheck(){for(;;)await this.checkForDueAlarms(),await(0,a.BK)(12e3)}async checkForDueAlarms(){const e=Date.now(),t=(await this.getAll()).filter((t=>t.scheduledTime<=e));for(const e of t)this.notifyAllContexts(e),e.periodInMinutes?(e.scheduledTime=this.computeNextRun(e.periodInMinutes),await this.storage.set({[e.name]:e})):await this.storage.remove(e.name)}computeNextRun(e){return Date.now()+6e4*e}async notifyAllContexts(e){this.notifyChange(e),await c.Ie,this.broadcast.postMessage(e)}static getBrowserPolyfill(){const e=new d;return{get:e.get.bind(e),getAll:e.getAll.bind(e),create:e.create.bind(e),clear:e.clear.bind(e),clearAll:e.clearAll.bind(e),onAlarm:{addListener:e.addOnChange.bind(e),hasListener:e.hasOnChange.bind(e),removeListener:e.removeOnChange.bind(e)}}}}l([o.f],d.prototype,"infiniteAlarmsCheck",null),l([o.f,n.p],d.prototype,"checkForDueAlarms",null)},2790:(e,t,s)=>{"use strict";s(5076),s(9574),s(4323),s(2462),s(1055)},8312:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var r=s(6382),i=s(4323),n=s(1055),a=s(2462);class o extends r.c{storageArea;onChanged;constructor(e){super(),this.storageArea=e,this.onChanged=new BroadcastChannel(`web_ext_storage.${this.storageArea}.onChanged`),this.onChanged.onmessage=e=>{const t=e.data;this.notifyChange(t)},this.onChanged.onmessageerror=console.error}async notifyAllContexts(e){this.notifyChange(e),await a.Ie,this.onChanged.postMessage(e)}async withDb(e){const t=self.indexedDB.open(`web_ext_storage.${this.storageArea}`,1);return new Promise(((e,s)=>{t.onerror=()=>s(t.error),t.onsuccess=()=>e(t.result),t.onupgradeneeded=()=>{const e=t.result;e.objectStoreNames.contains("data")||e.createObjectStore("data",{keyPath:"key"})}})).then(e).finally((()=>t.result.close()))}async getMultipleItems(e,t){const s=t.map((t=>new Promise(((s,r)=>{const i=e.get(t);i.onerror=()=>r(i.error),i.onsuccess=()=>s(i.result)}))));return Object.fromEntries((await Promise.all(s)).filter(i.zz).map((e=>[e.key,e.value])))}async get(e){return this.withDb((async t=>{const s=t.transaction("data","readonly").objectStore("data");if(Array.isArray(e))return this.getMultipleItems(s,e);const r=s.getAll(e);return new Promise(((e,t)=>{r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result.reduce(((e,{key:t,value:s})=>(e[t]=s,e)),{}))}))}))}async set(e){return this.withDb((async t=>{const s=t.transaction("data","readwrite"),r=s.objectStore("data"),i=await this.getMultipleItems(r,Object.keys(e)),n={};for(const[t,s]of Object.entries(e))r.put({key:t,value:s}),n[t]={oldValue:i[t],newValue:s};return new Promise(((e,t)=>{s.onerror=()=>t(s.error),s.oncomplete=()=>{this.notifyAllContexts(n),e()}}))}))}async remove(e){return this.withDb((async t=>{const s=t.transaction("data","readwrite"),r=s.objectStore("data");e=Array.isArray(e)?e:[e];const i=await this.getMultipleItems(r,e);for(const t of e)r.delete(t);return new Promise(((t,r)=>{s.onerror=()=>r(s.error),s.oncomplete=()=>{const s={};for(const t of e)s[t]={oldValue:i[t]};this.notifyAllContexts(s),t()}}))}))}async clear(){return this.withDb((async e=>{const t=e.transaction("data","readwrite");return t.objectStore("data").clear(),new Promise(((e,s)=>{t.onerror=()=>s(t.error),t.oncomplete=()=>e()}))}))}async getBytesInUse(){return this.withDb((async e=>{const t=e.transaction("data","readonly").objectStore("data").getAll();return new Promise(((e,s)=>{t.onerror=()=>s(t.error),t.onsuccess=()=>{const s=t.result.reduce(((e,{key:t,value:s})=>e+t.length+JSON.stringify(s).length),0);e(s)}}))}))}static getBrowserPolyfill(e){const t=new o(e);return"session"===e&&n.x&&self.addEventListener("activate",(()=>t.clear())),{get:t.get.bind(t),set:t.set.bind(t),remove:t.remove.bind(t),clear:t.clear.bind(t),getBytesInUse:t.getBytesInUse.bind(t),onChanged:{addListener:t.addOnChange.bind(t),removeListener:t.removeOnChange.bind(t),hasListener:t.hasOnChange.bind(t)}}}}},5654:(e,t,s)=>{"use strict";s(1055),s(2462)},9944:(e,t,s)=>{"use strict";s.d(t,{s:()=>r,y:()=>i});const r=e=>"fulfilled"===e.status,i=e=>e instanceof Promise},5574:(e,t,s)=>{"use strict";s.d(t,{R:()=>i,z:()=>r});const r=e=>e[Math.floor(Math.random()*e.length)],i=e=>Math.floor(Math.random()*e)},2804:(e,t,s)=>{"use strict";"ontouchstart"in self||navigator.maxTouchPoints},2016:(e,t,s)=>{"use strict";s.d(t,{O:()=>r});const r=self.matchMedia("only screen and (max-device-width: 1000px)").matches},1282:(e,t,s)=>{"use strict";s.d(t,{tX:()=>r});const r=(e,t)=>new Set([...e].filter((e=>!t.has(e))))},5360:(e,t,s)=>{"use strict";function r(e,{arraySeparator:t="ô"}={}){const s=new Map;return r=>{const i=Array.isArray(r)?r.join(t):r;if(s.hasOwnProperty(i))return s.get(i);{const t=e(r);return s.set(i,t),t}}}s.d(t,{M:()=>r})},2447:(e,t,s)=>{"use strict";s.d(t,{e:()=>r});class r{key;getDefaultValue;storageArea;constructor(e,t,s="localStorage"){this.key=e,this.getDefaultValue=t,this.storageArea=s}set(e){try{self[this.storageArea].setItem(this.key,JSON.stringify(e))}catch(e){}return e}reset(){this.set(this.getDefaultValue())}remove(){try{self[this.storageArea].removeItem(this.key)}catch(e){}}get(){try{return JSON.parse(self[this.storageArea].getItem(this.key)||"")}catch(e){return this.getDefaultValue()}}}},2441:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});class r extends Map{get(e){return super.get(e)||[]}has(e){return this.get(e).length>0}push(e,t){const s=this.get(e);return s.push(t),super.set(e,s)}remove(e,t){const s=this.get(e),r=s.findIndex(t);return r>=0?(s.splice(r,1),0===s.length&&super.delete(e),1):0}}},910:(e,t,s)=>{"use strict";s.d(t,{F:()=>p});var r=s(4323),i=s(8815),n=s(2801),a=s(9574),o=s(9944),c=s(6062),l=s(4648),d=s(170),u=s(959);class h{key;options;_listeners;_listenForChangesFn;storageArea;constructor(e,t={storageArea:"local"}){this.key=e,this.options=t,this._listeners=Array(),this._listenForChangesFn=(0,a.m)((()=>{u.E[this.storageArea]&&browser.storage[this.storageArea].onChanged.addListener((e=>{e[this.key]&&this._listeners.forEach((t=>t(e[this.key])))}))})),this.storageArea=t.storageArea}async addOnChangeListener(e,{dummyInitValue:t}={}){if(this._listeners.push(e),(0,d.Q)(),this._listenForChangesFn(),t){const s=(0,o.y)(t)?await t:t;e({newValue:s,oldValue:s})}}}class p extends h{key;getDefaultValue;options;_updateExecutor;_setExecutor;get legacyStore(){return"localStorage"===this.storageArea?self.localStorage:self.sessionStorage}constructor(e,t,s={storageArea:"local"}){super(e,s),this.key=e,this.getDefaultValue=t,this.options=s,this._updateExecutor=new n.V,this._setExecutor=new n.V}async reset(){return this.set(await this.getDefaultValue())}async orDefault(e){return e.hasOwnProperty(this.key)?e[this.key]:await this.getDefaultValue()}async get(){const e="custom"===this.storageArea?await this.options.customDataSource.get()||await this.getDefaultValue():"remote"===this.storageArea?await(await fetch(this.options.remoteApi.url,await this.getRequestInit())).json()||await this.getDefaultValue():"localStorage"===this.storageArea||"sessionStorage"===this.storageArea?this.options.localStorageTextOnly?(0,i.g)((()=>this.legacyStore.getItem(this.key)),(()=>""))||await this.getDefaultValue():await(0,i.g)((()=>JSON.parse(this.legacyStore.getItem(this.key)||"")),(()=>this.getDefaultValue())):await browser.storage[this.storageArea].get(this.key).then((e=>this.orDefault(e)));return this.options.onBeforeLoad?await this.options.onBeforeLoad(e):e}async remove(){return"custom"===this.storageArea?await this.options.customDataSource.remove():"remote"===this.storageArea?(await fetch(this.options.remoteApi.url,await this.getRequestInit("DELETE"))).json():"localStorage"===this.storageArea||"sessionStorage"===this.storageArea?(0,i.g)((()=>this.legacyStore.removeItem(this.key))):browser.storage[this.storageArea].remove(this.key)}async update(e){return this._updateExecutor.addWork((()=>this.get().then(e).then((e=>this.set(e)))))}async set(e){return this._setExecutor.addWork((async()=>{e=this.options.onBeforeSave?await this.options.onBeforeSave(e):e;const t=await("custom"===this.storageArea?await this.options.customDataSource.set(e):"remote"===this.storageArea?void await fetch(this.options.remoteApi.url,await this.getRequestInit("POST",JSON.stringify(e))):"localStorage"===this.storageArea||"sessionStorage"===this.storageArea?(0,i.g)((()=>this.legacyStore.setItem(this.key,this.options.localStorageTextOnly?String(e):JSON.stringify(e)))):browser.storage[this.storageArea].set({[this.key]:e}));return"session"===this.storageArea&&await(0,r.BK)(1),t}))}async setWith(e,t){return"remote"===this.storageArea||"custom"===this.storageArea||"localStorage"===this.storageArea||"sessionStorage"===this.storageArea?(0,r.qb)("missing"):browser.storage[this.storageArea].set(Object.assign({[this.key]:e},t))}async getWith(...e){const t=e.map((e=>(0,r.Kg)(e)?e:e.key)),s="remote"===this.storageArea||"custom"===this.storageArea||"localStorage"===this.storageArea||"sessionStorage"===this.storageArea?(0,r.qb)("missing"):await browser.storage[this.storageArea].get([this.key,...t]),i=await this.orDefault(s),n=e.map((async e=>(0,r.Kg)(e)?s[e]:await e.orDefault(s)));return[i,...await Promise.all(n)]}async getRequestInit(e="GET",t){const s=await(0,r.oA)(this.options.remoteApi.GET_Headers),i=await(this.options.remoteApi.authToken?.());return{method:e,body:t,...s,...i?{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json",...s?.headers}}:{}}}}(0,l.J)()?browser.storage.session={get:e=>browser.runtime.sendMessage({type:"_session_store_get",key:e}),set:e=>browser.runtime.sendMessage({type:"_session_store_set",items:e}),remove:e=>browser.runtime.sendMessage({type:"_session_store_remove",key:e}),clear:()=>Promise.resolve(),onChanged:{addListener:()=>({removeListener:()=>{}}),removeListener:()=>({removeListener:()=>{}}),hasListener:()=>!1}}:c.Dy&&browser.runtime.onMessage.addListener((e=>{switch(e.type){case"_session_store_get":return browser.storage.session.get(e.key);case"_session_store_set":return browser.storage.session.set(e.items);case"_session_store_remove":return browser.storage.session.remove(e.key)}}))},7548:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});var r=s(1470),i=s(959);async function n(e,t){const s=e.storageArea;i.E[s]&&browser.storage[s].onChanged.addListener((s=>{s[e.key]&&(0,r.PT)(t,s[e.key].newValue||{})}));const n=await e.get();if(!n)return await e.set(t),t;return Object.entries(t).filter((([e])=>!n.hasOwnProperty(e))).map((([e,t])=>n[e]=t)).length>0&&await e.set(n),(0,r.PT)(t,n||{})}},6690:(e,t,s)=>{"use strict";s.d(t,{KN:()=>i,px:()=>r});const r=e=>`${e}px`,i=e=>`${e}%`},865:(e,t,s)=>{"use strict";s.d(t,{aU:()=>i,d6:()=>n,uL:()=>r});const r=browser.tabs.getCurrent();let i=0;const n=r.then((e=>i=e?.id||0))},8408:(e,t,s)=>{"use strict";s.d(t,{K:()=>c});var r=s(2352),i=s(6062),n=s(4323),a=s(1374),o=s(4069);async function c(e,t={}){const s=(0,a.BO)(e),{cookieStoreId:c,inNewTab:d=!1,nextToCurrent:u=!1,active:h=!1,inNewWindow:p=!1,windowId:m,windowOptions:g={},forceIncognitoWindow:_=!1,stopOpenerTabId:f,_directCall:w}=t,y=p||_;if(!i.Dy&&!w)return function(e,t){if(t._directCall)throw Error("infinite loop???");return t._directCall=!0,browser.runtime.sendMessage(new l(e,t))}(s,t);const v=c,b=v?{cookieStoreId:c}:{},[E,...D]=s,A=await I(E,0,m);return D.forEach(((e,t)=>I(e,t+1,A.windowId))),A;async function I(e,t,s){const i=v&&!d&&!y&&0===t;if(y)return browser.windows.create({url:e,...g,...b,..._?{incognito:!0}:{}}).then((e=>e?.tabs[0]));if(d||i||t>0){const a=h&&0===t,c=await(0,r.e6)()||{id:void 0,index:void 0},l=(0,n.f3)(c.index)?c.index+1:void 0,d=o.m0||!!f,p=t=>browser.tabs.create({url:e,...b,windowId:s,active:a,...u?{index:l}:{},...t?{}:{openerTabId:c.id}}),m=d?await p(d):await p(d).catch((()=>p(!0)));return i&&c.id&&browser.tabs.remove(c.id),m}return await browser.tabs.update({url:e})}}class l{links;options;type;constructor(e,t){this.links=e,this.options=t,this.type="openURL"}}i.Dy&&browser.runtime.onMessage.addListener((e=>{if("openURL"===e.type)return c(e.links,e.options)}))},3941:(e,t,s)=>{"use strict";async function r(e){return await browser.contextualIdentities.get(e.cookieStoreId).then((()=>!0),(()=>!1))}s.d(t,{M:()=>r})},2352:(e,t,s)=>{"use strict";s.d(t,{HG:()=>n,e6:()=>i});var r=s(4069);async function i(){const[e]=await browser.tabs.query(r.m0?{active:!0}:{active:!0,lastFocusedWindow:!0});return e}const n=()=>browser.tabs.getCurrent().then((e=>e?.id?browser.tabs.remove(e.id):void 0))},3672:(e,t,s)=>{"use strict";function r(e,t,s,r){let i=0,n=0,a=e.length;return t&&(i=(n=e.indexOf(t))+t.length),s&&(a=e.indexOf(s,i)),a<0&&r&&(a=e.length),a<0||n<0?"":e.substring(i,a)}s.d(t,{u:()=>r})},8168:(e,t,s)=>{"use strict";s.d(t,{$y:()=>a,BB:()=>n,CF:()=>r,WL:()=>i});const r=(e,t=2,s="0")=>`${e}`.padStart(2,"0"),i=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),n=e=>e.charAt(0).toUpperCase()+e.substring(1);function a(e,t){const s=e.indexOf(t);return s<0?[e]:[e.substring(0,s),e.substring(s+1)]}},8671:(e,t,s)=>{"use strict";async function r(e){navigator.clipboard?await navigator.clipboard.writeText(e).catch((e=>{})):function(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(t)}(e)}s.d(t,{l:()=>r})},4716:(e,t,s)=>{"use strict";s.d(t,{e:()=>i,w:()=>r});class r{name;options;startTime;stopTime;logger;performance;constructor(e,t={}){this.name=e,this.options=t,this.startTime=0,this.stopTime=0,this.logger=this.options.logger||console,this.performance=this.options.performance||self.performance,this.options=Object.assign({startNow:!0,round:!0,logTimeAbove:0},t),this.options.startNow&&this.start()}start(){this.startTime=this.performance.now()}stop(e=""){if(!this.options.enableInProd)return;this.stopTime=this.performance.now();const t=this.stopTime-this.startTime;if(t<this.options.logTimeAbove)return;const s=`${this.name} ${e} time: ${(this.options.round?Math.round(t):t).toLocaleString("en-US")}`;return this.logger.log(s),s}diff(e=""){const t=this.startTime;this.stopTime&&(this.startTime=this.stopTime);const s=this.stop(e);return this.startTime=t,s}}async function i(e,t,s){const i=new r(e,s),n=await t();return i.stop(),n}},5076:(e,t,s)=>{"use strict";function r(e,t){if(null!=e)return t(e)}s.d(t,{J:()=>r})},1319:(e,t,s)=>{"use strict";s.d(t,{G:()=>i});var r=s(1055);const i=()=>{try{return!r.x&&window.self!==window.top}catch(e){return!0}}},3456:(e,t,s)=>{"use strict";s.d(t,{k:()=>i});var r=s(1374);class i{_listeners=[];constructor(){}register(e){this._listeners.push(e)}unregister(e){(0,r.E6)(this._listeners,e)}notifyAll(e){this._listeners.forEach((t=>t(e)))}}},8815:(e,t,s)=>{"use strict";function r(e,t){try{return e()}catch(e){return t}}function i(e,t){try{return e()}catch(e){return t?.(e)}}async function n(e,t){try{return await e()}catch(e){return t(e)}}s.d(t,{E:()=>n,g:()=>i,oc:()=>r})},6672:(e,t,s)=>{"use strict";s.d(t,{K9:()=>o,QV:()=>i,bZ:()=>a,lX:()=>n});var r=s(8168);const i=(e="")=>(0,r.BB)(e.trim().replace(/.*:\/\/(www\.)?|^www\./,"").replace(/\/$/,""));function n(e,t=!1){try{const s=new URL(e).hostname;return t&&s.startsWith("www.")?s.substring(4):s}catch(e){return""}}function a(e){try{return new URL(e).origin}catch(e){return""}}function o(e){return/^https?:\/\/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/.test(e)}},4323:(e,t,s)=>{"use strict";s.d(t,{BK:()=>R,Et:()=>E,Gv:()=>f,IQ:()=>m,Kg:()=>g,Lm:()=>w,Lt:()=>l,Mj:()=>L,NU:()=>O,SJ:()=>u,Tn:()=>y,Uo:()=>h,WR:()=>P,XB:()=>k,_w:()=>o,bJ:()=>i,f3:()=>D,g7:()=>S,kf:()=>b,ko:()=>_,lQ:()=>r,oA:()=>A,or:()=>p,qS:()=>v,qb:()=>d,s6:()=>a,t1:()=>c,x2:()=>n,zz:()=>I});const r=(...e)=>{},i=(...e)=>!1,n=(...e)=>!0,a=(...e)=>{},o=(e,t)=>t&&t[e],c=e=>(...t)=>!e(...t),l=e=>async(...t)=>!await e(...t),d=e=>{throw Error(e)},u=()=>d("not implemented"),h=(...e)=>(...t)=>e.every((e=>e.apply(null,t))),p=(...e)=>(...t)=>e.some((e=>e.apply(null,t))),m=(...e)=>async(...t)=>(await Promise.all(e.map((e=>e(...t))))).every(I),g=e=>"string"==typeof e,_=e=>g(e)&&!!e,f=e=>null!==e&&"object"==typeof e,w=e=>"boolean"==typeof e,y=e=>"function"==typeof e,v=e=>"number"==typeof e,b=e=>!isNaN(e-parseFloat(e)),E=e=>b(e),D=e=>Number.isFinite(e),A=e=>y(e)?e():e,I=e=>!!e,S=e=>e(),k=(e,t=[])=>{let s;for(;s=e.pop();)s.apply(null,t)},P=e=>JSON.parse(JSON.stringify(e)),R=e=>new Promise((t=>setTimeout(t,e)));function L(){let e,t;return[new Promise(((s,r)=>{e=s,t=r})),e,t]}function O(){const[e,t,s]=L();return{promise:e,resolve:t,reject:s}}},6898:(e,t,s)=>{"use strict";function r(e,t){return!(e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom)}s.d(t,{U:()=>r})},6278:(e,t,s)=>{"use strict";s.d(t,{$x:()=>n,Nf:()=>i});var r=s(6690);s(1470);const i=e=>e.getBoundingClientRect().toJSON();function n(e,{}={}){const{width:t,height:s,x:i,y:n}=e.getBoundingClientRect(),a=i+t<window.innerWidth,o=n+s<window.innerHeight;a||(e.style.left=(0,r.px)(window.innerWidth-t)),o||(e.style.top=(0,r.px)(window.innerHeight-s))}},5628:(e,t,s)=>{"use strict";s.d(t,{C:()=>o});var r=s(9598),i=s(6004),n=s(9100);const a={dark:[!1,"boolean"],label:["","string"],strokeDark:["","string"],strokeLight:["","string"],strokeBackgroundDark:["","string"],strokeBackgroundLight:["","string"],backgroundDark:["transparent","string"],backgroundLight:["transparent","string"],baseline:["central","string"],stroke:[0,"number"],diameter:[0,"number"],progress:[0,"number"]};class o extends HTMLElement{static tagName="progress-ring";static pauseIcon="<pause>";_circleNode;_circleBackground;_svgNode;_textNode;_pauseNode;white="#fff";black="#444";backgroundDark="#88888877";backgroundLight="#88888822";strokeBackgroundDark="#A7A7A7AA";strokeBackgroundLight="#87878764";constructor(){super(),this.attachShadow({mode:"open"}),this._svgNode=(0,r.z)("svg",{},[this._circleBackground=(0,r.z)("circle",{stroke:this.backgroundDark,fill:"transparent"}),this._circleNode=(0,r.z)("circle",{stroke:this.white,fill:"#88888877"}),this._textNode=(0,r.z)("text",{textContent:"a",x:"50%",y:"50%","dominant-baseline":"central","text-anchor":"middle"}),this._pauseNode=(0,r.z)("path",{d:"M 0,1 L 0,9 L 2,9 L 2,1 L 0,1 M 4,1 L 4,9 L 6,9 L 6,1 L 4,1",transform:"translate(9, 7)"})]),this.shadowRoot.appendChild((0,i.nl)([this._svgNode,(0,r.z)("style",{textContent:c})])),this.updateAttributes()}updateAttributes(){const{dark:e,baseline:t,label:s,stroke:r,diameter:i,progress:a,backgroundDark:c,backgroundLight:l,strokeDark:d,strokeLight:u,strokeBackgroundDark:h,strokeBackgroundLight:p}=this.getAttributes(),m=i/2,g=Math.max(0,m-r),_=2*g*Math.PI,f=_-(0,n.n)(0,100,a)/100*_,w=s===o.pauseIcon;this.setAttributes(this._svgNode,[["height",`${i}`],["width",`${i}`]]),this.setAttributes(this._textNode,[["textContent",s],["dominant-baseline",t],["style",`fill: ${w?"transparent":e?this.white:this.black}`]]),this.setAttributes(this._pauseNode,[["style",`fill: ${w?e?this.white:this.black:"transparent"}`]]);const y=[["stroke-dasharray",`${_} ${_}`],["stroke-width",`${r}`],["style",`stroke-dashoffset:${f}`],["r",`${g}`],["cx",`${m}`],["cy",`${m}`],["fill",`${e?c||this.backgroundDark:l||this.backgroundLight}`]];this.setAttributes(this._circleNode,y),this.setAttributes(this._circleBackground,y.concat([["style","stroke-dashoffset: 0"]])),this._circleBackground.style.stroke=e?h||this.strokeBackgroundDark:p||this.strokeBackgroundLight,this._circleNode.style.stroke=e?d||this.white:u||this.black}setAttributes(e,t){t.forEach((([t,s])=>"textContent"===t?e.textContent=s:e.setAttribute(t,s)))}getAttributes(){const e=Object.entries(a).map((([e,[t,s]])=>{const r=this.getAttribute(e);return[e,null===r?t:"number"===s?parseFloat(r):"string"===s?r:"boolean"===s?"false"!==r:t]}));return Object.fromEntries(e)}static get observedAttributes(){return Object.keys(a)}setAttribute(e,t){return super.setAttribute(e,t)}attributeChangedCallback(e,t,s){this.updateAttributes()}}const c="\ntext {\n  fill: lightgray;\n  font-family: sans-serif;\n}\ncircle {\n  transition: stroke-dashoffset 0.35s;\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n}\n";window.customElements.define("progress-ring",o)},4681:(e,t,s)=>{"use strict";function r(e,t){const s=e();return new Promise(((e,r)=>{s.postMessage(t),s.onmessageerror=r,s.onerror=r,s.onmessage=t=>e(t.data)})).finally((()=>s.terminate()))}s.d(t,{c:()=>r})},1055:(e,t,s)=>{"use strict";s.d(t,{x:()=>r});const r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},1550:(e,t,s)=>{"use strict";var r;s.d(t,{Co:()=>n,Rl:()=>i,Uy:()=>r}),(e=>{e[e.light=0]="light",e[e.dark=1]="dark",e[e.system=2]="system"})(r||(r={}));const i=e=>e?1:0,n="(prefers-color-scheme: dark)"}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return s[e].call(n.exports,n,n.exports,i),n.exports}i.m=s,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,s)=>(i.f[s](e,t),t)),[])),i.u=e=>(({72:"context_menus_module",123:"import_shared_dialog",141:"history",178:"edit_single_group",181:"add_current_module",241:"reloading_thumbnail",267:"search_dial_module",278:"batch_operations",286:"error_handler",353:"unlock_vault_module",363:"share_dials_dialog",609:"productivity_mode_setup",684:"cs_prepare_shooting_self",702:"vuetify_module",711:"edit_group",741:"add_image_module",767:"edit_single_dial",863:"productivity_mode",900:"storage_sync_backup_module",902:"archive_module",913:"statistics_module",992:"tutorial_module"}[e]||e)+".js"),i.miniCssF=e=>(({123:"import_shared_dialog",178:"edit_single_group",181:"add_current_module",353:"unlock_vault_module",363:"share_dials_dialog",609:"productivity_mode_setup",702:"vuetify_module",767:"edit_single_dial",992:"tutorial_module"}[e]||e)+".css"),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="group_speed_dial:",i.l=(s,r,n,a)=>{if(e[s])e[s].push(r);else{var o,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+n){o=u;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",t+n),o.src=s),e[s]=[r];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var i=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),c&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,s)=>{var r=i.miniCssF(e),n=i.p+r;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var i=(a=s[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){var a;if((i=(a=n[r]).getAttribute("data-href"))===e||i===t)return a}})(r,n))return t();((e,t,s,r,n)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",i.nc&&(a.nonce=i.nc),a.onerror=a.onload=s=>{if(a.onerror=a.onload=null,"load"===s.type)r();else{var i=s&&s.type,o=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+": "+o+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=o,a.parentNode&&a.parentNode.removeChild(a),n(c)}},a.href=t,s?s.parentNode.insertBefore(a,s.nextSibling):document.head.appendChild(a)})(e,n,null,t,s)})),t={1:0,711:0,611:0};i.f.miniCss=(s,r)=>{t[s]?r.push(t[s]):0!==t[s]&&{123:1,178:1,181:1,353:1,363:1,525:1,609:1,702:1,767:1,992:1}[s]&&r.push(t[s]=e(s).then((()=>{t[s]=0}),(e=>{throw delete t[s],e})))}}})(),(()=>{var e={1:0,711:0,611:0};i.f.j=(t,s)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var n=new Promise(((s,i)=>r=e[t]=[s,i]));s.push(r[2]=n);var a=i.p+i.u(t),o=new Error;i.l(a,(s=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",o.name="ChunkLoadError",o.type=n,o.request=a,r[1](o)}}),"chunk-"+t,t)}};var t=(t,s)=>{var r,n,[a,o,c]=s,l=0;if(a.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(c)c(i)}for(t&&t(s);l<a.length;l++)n=a[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0},s=globalThis.webpackChunkgroup_speed_dial=globalThis.webpackChunkgroup_speed_dial||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{"use strict";i(5472);var e=i(4590),t=i(9074),s=i(5524);Promise.resolve();var r=i(7813),n=i(7865),a=i(5296),o=i(9114),c=i(2036),l=i(6801),d=i(8282),u=i(7302),h=i(4298),p=i(1962),m=i(9598),g=i(6004),_=i(4323),f=i(4162),w=i(2221);var y=i(8794);const v=(()=>{const[s,i]=(0,_.Mj)();y.P3.addOnChangeListener((({newValue:r})=>async function(r){await s,k.onclick=null,r?(x=!0,(0,g.Gd)(L),k.href=t.jg):(x=!1,r={license:f.G_.Home,supporter:0,name:o.N?"":(0,e.tr)("login_login_create")},(0,g.$$)(L),k.removeAttribute("href"),k.onclick=()=>{(0,g.Gd)(L),(0,l._z)({type:"sync",force:!0,withRedirect:!0})});const i=await w.j_;(o.N||i.DISABLE_DIALS_SYNC||i.HIDE_LOGIN_PART)&&(0,g.$$)(T);O.textContent=r.name||"-",A.classList.toggle("hidden",!r.avatar),A.src=r.avatar||p.RO;const n=(0,c.R)(r),a=r.license||f.G_.Home,d=(e=>{switch(e){case f.G_.Pro:return"Pro";case f.G_.Enterprise:return"Enterprise";default:return"Home"}})(a);I.textContent="Enterprise"===d?"Ent":d,I.className=d.toLowerCase()+"-version",I.title=n?(0,e.tr)("version_pro",d):(0,e.tr)("version_free",d),a>0&&I.remove();const[u,h]=S.children;S.onclick=n?e=>e.preventDefault():_.lQ,u.style.filter=n?"hue-rotate(164deg)":"",h.textContent=n?(0,e.tr)("version_pro",d):(0,e.tr)("cm_upgrade_pro")}(r)),{dummyInitValue:(0,c.wz)()}),y.wd.addOnChangeListener((({newValue:r})=>async function({state:r,message:i,details:n,data:o}){await s;const c=()=>[["p",(0,e.tr)("msg_correct_account")],["a",{href:t.jg,text:t.jg}],["p",(0,e.tr)("msg_replace_text")]];switch(R.textContent=i,L.title=n,[T,P].forEach((e=>e.classList.toggle("spinning","working"===r))),T.src=(0,u.Z)("synced"===r?"svg/done.svg":"working"===r?"svg/refresh.svg":"svg/offline(3).svg"),r){case"none":case"working":case"synced":case"error":break;case"no_permission":L.onclick=B;break;case"conflict":a.p.show((0,e.tr)("sync_conflict"),(0,g.Y6)([["p",(0,e.tr)("sync_conflict_body")],["p",(0,e.tr)("sync_conflict_body_2")]]),{yesText:(0,e.tr)("sync_conflict_replace_local"),noText:(0,e.tr)("sync_conflict_replace_server"),onYes:E,onNo:()=>b()});break;case"mismatch":a.p.show((0,e.tr)("sync_err_account_title"),(0,g.Y6)(c()),{yesText:(0,e.tr)("sync_err_account_replace_local"),noText:(0,e.tr)("sync_err_account_replace_cloud"),elseText:(0,e.tr)("sync_err_account_retry"),onYes:E,onNo:()=>b(o?.remoteUserId),onElse:D});break;case"not_empty":a.p.show((0,e.tr)("sync_not_empty_title"),(0,g.Y6)(c()),{yesText:(0,e.tr)("sync_not_empty_replace_local"),noText:(0,e.tr)("sync_not_empty_replace_cloud"),elseText:(0,e.tr)("sync_not_empty_replace_retry"),onYes:E,onNo:()=>b(o?.remoteUserId),onElse:D})}}(r)),{dummyInitValue:y.wd.get()});const v=()=>(0,l._z)({type:"sync",force:!0,withDelay:!0,userClick:!0}),b=e=>{(0,l._z)({type:"sync",force:!0,withRedirect:!0,replaceRemote:!0,remoteUserId:e})},E=()=>{(0,l._z)({type:"sync",force:!0,withRedirect:!0,replaceLocal:!0})},D=()=>{(0,l._z)({type:"sync",force:!0,withRedirect:!0})};let A,I,S,k,P,R,L,O,C,T,x=!1;return{init:async function(){await n.W,(0,p.$H)("login").appendChild((0,g.nl)([I=(0,m.z)("a",{href:d.tT,style:"padding: 0 0 10px; user-select: none; font-weight: bold; cursor: cell; font-size: smaller;"}),T=(0,m.z)("img",{class:"invert icon-button spinning_1",height:30,width:30,style:"padding: 4px;",src:p.RO}),C=(0,m.z)("div",{id:"sync_state",class:"subtle_border theme_background theme_color"},[L=(0,m.z)("a",{class:"flex flex-space-between",handlers:{onclick:v,...(0,r.lU)("animation-name: spin;animation-duration: 800ms;animation-iteration-count: 10;animation-timing-function: linear;",r.O$.HOVER,{getNode:()=>P,restoreOriginalStyles:!1})}},[P=(0,m.z)("img",{class:"invert spinning_1",height:14,src:(0,u.Z)("svg/refresh.svg")}),R=(0,m.z)("div",{})]),k=(0,m.z)("a",{id:"login-link",title:(0,e.tr)("login_login_title"),class:"flex flex-space-between_10",style:"cursor: pointer;"},[A=(0,m.z)("img",{height:16}),O=(0,m.z)("div",{})]),(0,m.z)("a",{class:"flex flex-space-between_10 hidden",href:t.J8},[(0,m.z)("img",{height:16,src:(0,u.Z)("svg/question.svg")}),(0,m.z)("span",{textContent:(0,e.tr)("about_cloud_dials")})]),S=(0,m.z)("a",{class:"flex flex-space-between_10",href:d.tT},[(0,m.z)("img",{height:24,src:(0,u.Z)(h.In)}),(0,m.z)("span",{})])])])),i()},synchronizeManual:v,get isLoggedIn(){return x}};async function B(){await browser.permissions.request({origins:[d.P4]})&&v()}})();var b=i(1879),E=i(51),D=i(1641),A=i(6690),I=i(2901),S=i(5048),k=i(9439),P=i(1184),R=i(5294),L=i(4559),O=i(6683),C=i(4252),T=i(9456);function x(){const e=(0,L.O1)(),t=(0,L.B)(),s=(0,p.$H)("quick-options"),r=e.style,i=t.style,n=s.style,a=w.lw.GROUP_PADDING+2;r.setProperty("--group-padding",(0,A.px)(a)),r.setProperty("--group-min-height",(0,A.px)(w.lw.GROUPS_SIZE+2*a));const o=document.documentElement,c=o.style;c.setProperty("--groups-height",(0,A.px)((0,P.z)())),o.classList.toggle("hide_top_bar",!!w.lw.HIDE_TOP_BAR),(0,_.BK)(1e3).then((()=>o.classList.toggle("bing_hide_dials",!!w.lw.BING_HIDE_DIALS&&w.lw.BACKGROUND===O.cG.BING))),I.Q.execute(w.lw.TEMPLATE_COLOR);const l=(0,_.Et)(w.lw.GROUPS_SIZE)?w.lw.GROUPS_SIZE:S.O5;c.fontSize=(0,A.px)(w.lw.DIAL_FONT_SIZE),n.fontSize=r.fontSize=(0,A.px)(l),(0,T.R)();const d=w.lw.DIAL_SHADOW_COLOR.slice(0,7);i.setProperty("--dial-shadow",w.lw.DIAL_BORDER_TYPE===O.NO.shadow?`0 0 ${w.lw.DIAL_SHADOW_BLUR}px ${w.lw.DIAL_SHADOW_BLUR/10+1}px ${d}CC`:"none"),i.setProperty("--list-shadow",w.lw.DIAL_BORDER_TYPE===O.NO.shadow?`0 0 ${w.lw.DIAL_SHADOW_BLUR/2}px ${w.lw.DIAL_SHADOW_BLUR/10+1}px ${d}CC`:"none"),i.setProperty("--dial-shadow-active",w.lw.DIAL_BORDER_TYPE===O.NO.shadow?`0 0 ${w.lw.DIAL_SHADOW_BLUR}px ${w.lw.DIAL_SHADOW_BLUR/10+1}px ${d}${w.lw.HOVER_NONE?"CC":"FF"}`:"none"),i.setProperty("--list-shadow-active",w.lw.DIAL_BORDER_TYPE===O.NO.shadow?`0 0 ${w.lw.DIAL_SHADOW_BLUR/2}px ${w.lw.DIAL_SHADOW_BLUR/10+1}px ${d}${w.lw.HOVER_NONE?"CC":"FF"}`:"none");const u=w.lw.DIAL_BORDER_COLOR.slice(0,7);i.setProperty("--dial-border",w.lw.DIAL_BORDER_TYPE===O.NO.solid?`1px solid ${u}66`:"none"),i.setProperty("--dial-border-active",w.lw.DIAL_BORDER_TYPE===O.NO.solid?`1px solid ${u}${w.lw.HOVER_NONE?"66":"AA"}`:"none"),i.setProperty("--dial-header-background",(0,C.g)()?w.lw.DIAL_DARK_HEAD_BACKGROUND:w.lw.DIAL_LIGHT_HEAD_BACKGROUND),i.setProperty("--dial-border-radius",(0,A.px)(w.lw.DIAL_BORDER_RADIUS)),i.setProperty("--dial-icon-offset",(0,A.px)(Math.max(0,w.lw.DIAL_BORDER_RADIUS/2-2))),i.setProperty("--dial-font-family",w.lw.DIAL_FONT_FAMILY?`"${w.lw.DIAL_FONT_FAMILY}", sans-serif`:"inherit");const h=t.classList;h.toggle("titles_down",!!w.lw.DIAL_TITLE_DOWN),h.toggle("no_title",!!w.lw.NO_TITLE),h.toggle("no_favicons",!!w.lw.DIAL_NO_FAVICON),h.toggle("titles_center",!!w.lw.DIAL_TITLE_CENTER),h.toggle("hide_empty_dials",!!w.lw.HIDE_EMPTY_DIALS),h.toggle("hide_dial_plus",!!w.lw.HIDE_DIAL_PLUS),h.toggle("scrollable_thumbnails",!!w.lw.SCROLLABLE_THUMBNAILS),h.toggle("hover_zoom",!!w.lw.HOVER_ZOOM),h.toggle("hover_bold",!!w.lw.HOVER_BOLD),h.toggle("transparent_head",w.lw.DIAL_HEADER_STYLE===O.xk.transparent),h.toggle("solid_head",w.lw.DIAL_HEADER_STYLE===O.xk.solid),(0,R.J)(w.lw)}browser.storage.local.onChanged.addListener((async e=>{c.Dg&&!k.vt&&(e.options&&(await(0,_.BK)(1),x()),(e.groups||e._forceCallback)&&(await(0,_.BK)(),await(0,D.Pz)()))}));i(5022);var B=i(3074),N=i(8698);var M=i(4069);M.Vq.then((e=>{if(!e)return;const t=(e=>{let t=!1;const s=(0,N.U)(e,(()=>t=!1));return{wasCalled:()=>t,call:()=>{t=!0,s()}}})(1500);window.addEventListener("click",t.call),self.matchMedia("(orientation: portrait)").addEventListener("change",(e=>{t.wasCalled()||(0,_.Et)(b.e.id)&&(0,B.$8)()}))}));i(7139);var U=i(2352),G=i(8408),z=i(865),$=i(4823);Promise.all([w.j_,y.Mz.get(),(0,U.e6)(),z.uL,M.Nx]).then((async([e,t,s,r,i])=>{if(s.id===r.id)if(!e.REDIRECT_URL||!$.Y.isEmpty&&!$.Y.has("redirect_away")||window.location.hash||t||k.vt)t&&await y.Mz.set(!1);else{document.body.textContent="";const t=()=>browser.tabs.update({url:e.REDIRECT_URL,...i?{loadReplace:!0}:{}});e.REDIRECT_URL_FORCE_PAGE_FOCUS?((0,G.K)(e.REDIRECT_URL,{inNewTab:!0,nextToCurrent:!0,active:!0}),browser.tabs.remove(r.id)):t()}}));var H=i(7253),F=i(3941);(async()=>{const[e,t,s]=await Promise.all([w.j_,z.uL,H.BW]),{cookieStoreId:r,index:i,id:n}=t;e.PREVENT_NEW_TAB_CONTAINER&&$.Y.isEmpty&&!window.location.hash&&!k.vt&&r&&"firefox-default"!==r&&s.some((e=>e.cookieStoreId===r))&&await(0,F.M)(t)&&(browser.tabs.create({url:window.location.href,active:!0,index:i+1}),browser.tabs.remove(n))})();var W=i(4257),V=i(9225);W.RO.then((async()=>{if(!await V.m.get()){const{runTutorial:e}=await Promise.all([i.e(274),i.e(992)]).then(i.bind(i,936));await e()}}));var K=i(8310);var j=i(7743);browser.commands?.onCommand.addListener((async e=>{if(await async function(){const e=await browser.windows.getLastFocused(),t=await browser.tabs.getCurrent();return t?.windowId===e.id&&t.active}())switch(e){case"search-dial":const{SearchDialModule:e}=await(0,K.n)();await e.onSearchCommand();break;case"edit-group":if(document.body.querySelector("[data-modal-overlay]"))return;await(0,j.c)(b.e.id)}}));var q=i(910);const Y=new q.F("add_current_processed",(()=>[]),{storageArea:"session"});var J=i(3254);(async()=>{const[t]=await Y.get();if(t){const s=()=>Y.update((e=>e.filter((e=>e.type!==t.type))));if("changed_account"===t.type)a.p.show((0,e.tr)("sync_changed_account"),(0,g.Y6)([["p",(0,e.tr)("sync_changed_account_body")],["p",(0,e.tr)("history_revert_dials",(0,e.tr)("history_title"))]]),{yesText:(0,e.tr)("label_close"),noText:(0,e.tr)("history_title"),onYes:_.lQ,onNo:()=>(0,J.R)().then((e=>e.showHistoryModal())),onFinally:s})}})();var X=i(6777),Z=i(1181);i(4261),i(2460);var Q=i(8815);var ee=i(3322);i(8654),i(6795);new class{scheduled=new Map;setTimeout(e,t){return new Promise((s=>{const r=()=>{self.clearTimeout(i),this.scheduled.delete(i),s((0,Q.g)(t))},i=window.setTimeout(r,e);this.scheduled.set(i,r)}))}flushAll(){Array.from(this.scheduled.values()).forEach(_.g7)}};var te=i(2846);const se=2,re=5;var ie=i(6037),ne=i(6810);var ae=i(179),oe=i(6265),ce=i(8641),le=i(3773),de=i(555);let ue=!1;var he=i(5017),pe=(i(744),i(9735)),me=i(3778);i(3210),i(8204),i(9343);i(3943);var ge=i(7861),_e=i(2541);i(8297);var fe=i(6830),we=i(8303);const ye=(async()=>{await n.W;const e=(0,p.$H)("options");return e.onclick=async()=>(await(0,fe.V)()).MainMenu.toggle(),e.onmouseenter=fe.V,window.addEventListener("mousedown",(e=>{e.button===X.w.RIGHT&&(0,fe.V)()})),window.addEventListener("dragstart",(e=>{(0,_.BK)(150).then(fe.V)})),[{id:"dials-container",getMenu:()=>(0,fe.V)().then((e=>e.contextMenuDials))},{id:"dials",getMenu:()=>(0,fe.V)().then((e=>e.contextMenuDials))},{id:"groups",getMenu:()=>(0,fe.V)().then((e=>e.contextMenuGroups))}].forEach((({id:e,getMenu:t})=>{(0,p.$H)(e).addEventListener("contextmenu",(async e=>{(0,Z.jo)(e),(0,we.E)(e);const s=await t();s?.show(e)}),{capture:!1})})),{openMainMenu:()=>e.dispatchEvent(new Event("click"))}})();var ve=i(6214),be=i(9180),Ee=i(1305),De=i(7552),Ae=i(7137);const Ie=new q.F("last_backup_time",(()=>0)),Se=new class{getLastBackupTime(){return Ie.get()}updateLastBackupTime(){return Ie.set(Date.now())}async saveDirectoryHandle(e){const t={key:De.yH,value:e};await Ee.i.withDB((e=>e.dbTransactionOperation(De.ew.DB_RUNTIME,De.p0.DB_OP_READ_WRITE,"put",t)))}async getDirectoryHandle(){return w.lw.AUTO_BACKUP?{name:w.lw.AUTO_BACKUP_FOLDER_NAME||"gsd",queryPermission:async()=>await browser.permissions.contains({permissions:["downloads"]})?"granted":"prompt",requestPermission:async()=>await(0,Ae.x)("downloads")?"granted":"denied"}:void 0}async verifyGrantedPermission(){const e=await this.getDirectoryHandle();return"granted"===await(e?.requestPermission({mode:"readwrite"}))}async createNewBackup(e=!1){return await(0,l._z)({type:"create_automatic_backup",isManual:e})}async disable(){await Ee.i.withDB((e=>e.dbTransactionOperation(De.ew.DB_RUNTIME,De.p0.DB_OP_READ_WRITE,"delete",De.yH))),await w.KY.update((e=>(e.AUTO_BACKUP=!1,e)))}};async function ke(){const t=await Se.getDirectoryHandle();if(!t)return;const s=await Se.getLastBackupTime(),r=(0,be.Lm)(w.lw.AUTO_BACKUP_DAYS_INTERVAL);if(Date.now()-s>r){let s=await t.queryPermission({mode:"readwrite"});return"prompt"===s&&(await new Promise((s=>{a.p.show((0,e.tr)("automatic_local_backups"),(0,e.tr)("automatic_local_backups_permission",t.name),{onFinally:s})})),s=await t.requestPermission({mode:"readwrite"})),"granted"===s?(await Se.updateLastBackupTime(),await Se.createNewBackup()):await Se.disable()}}var Pe=i(1792);let Re=_.lQ;async function Le(){document.documentElement.classList.add(p.$b),k.vt&&document.documentElement.classList.add("in_iframe"),function(){const e=(0,L.B)();e.addEventListener("mousemove",(e=>{ue=!0}),{passive:!0}),e.addEventListener("wheel",(t=>{if(t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)return;const s=t.target.closest(`ul.${de.Ki.dial_list_container}`);if(!(s&&s.scrollHeight>s.clientHeight&&ue)&&(ue=!1,e.classList.contains("list"))){t.preventDefault();const s=(t.deltaY||t.deltaX)>0?1:-1,r=(e.querySelector("a")?.clientWidth||0)/3;e.scrollLeft+=r*s}}))}(),((0,ae.Jl)()||Pe.b)&&(0,E.y)((0,u.Z)("dial/android_dial.css")),await w.j_,w.lw.CUSTOM_CSS&&(0,E.y)(w.lw.CUSTOM_CSS,!0)}browser.runtime.onMessage.addListener(((t,s)=>{switch(t.type){case"data_changed":!async function(e){await W.re,(0,ve.r)(e),(0,_.qS)(e)&&e!==b.e.id||await Oe.execute()}(t.groupId);break;case"reload_page":self.location.reload();break;case"open_main_menu":return ye.then((e=>e?.openMainMenu()));case"openSearch":(0,K.n)().then((e=>e.SearchDialModule.show()));break;case"showError":a.p.showError(t.title,t.message,{yesText:(0,e.tr)("label_close")});break;case"reload_spinners":b.e.promise.then((()=>(0,ne.O)(b.e.getCurrentGroup())));break;case"getCurrentGroupId":return b.e.promise.then((()=>b.e.id));case"activateGroup":return b.e.activate(t.groupId);case"prepare_self_for_shooting":return i.e(684).then(i.bind(i,5249)).then((()=>1));case"productivityStateChange":(0,ee.zb)(t.state);break;case"_ext_dom_extractor_query":return Promise.resolve((0,le.x)(t.htmlText,t.queries));case"getScreenInfo":return Promise.resolve({availWidth:window.screen.availWidth,availHeight:window.screen.availHeight});case"redraw_dials":(0,D.Pz)();break;case"keyVault_lock":!async function(){await te.M.masterKeyVault.lock();const e=(await te.M.getVisibleGroups()).find((e=>!e.lock))||b.e;await b.e.activate(e.id,!0)}();break;case"help_remember_pwd":(0,he.C)().then((e=>e.pwdPrompt(te.M.masterKeyVault,O.pK.rememberPassword,{persistent:!0})));break;case"alarm":!async function(t,s,r,i){await W.re,await(0,pe.v)(s,r,{animated:!0,hideOtherPermanent:!0,callbackFn:e=>{const t=e.querySelector(`[${oe.w.TIMER_INDEX_DATASET}="${i}"]`);t?.classList.add("timer_alarm"),t?.scrollIntoView()}});for(let t=0;t<29;t++)_e.s.set(t%2==0?`${(0,e.tr)("timer_dial")} ${(0,e.tr)(`timer_type_${O.$C.alarm}`)}`:".".repeat(32),4),await(0,_.BK)(500)}(t.timerType,t.groupId,t.dialDomId,t.timerIndex);break;case"import_shared_complete":(0,ge.V)().then((e=>e.openImportDoneModal(t.importedGroups)));break;case"highlight_dial":(0,pe.v)(t.groupId,t.dialDomId,{animated:t.animated,hideOthers:t.hideOthers});break;case"ping":return Promise.resolve("ok");case"sync":0;break;case"share_re_lock":Re(t.uuidBase64)}}));const Oe=new class{leakTime;callback;isEmpty;promise;resolveWaitingPromiseFn;constructor(e,t){this.leakTime=e,this.callback=t,this.isEmpty=!0}execute(){return this.isEmpty?(this.isEmpty=!1,self.setTimeout((()=>this.emptyTheBucket()),this.leakTime),this.callback()):this.promise?this.promise:this.promise=new Promise((e=>this.resolveWaitingPromiseFn=e))}emptyTheBucket(){this.isEmpty=!0,this.resolveWaitingPromiseFn&&(this.resolveWaitingPromiseFn(this.execute()),this.resolveWaitingPromiseFn=void 0,this.promise=void 0)}}(2e3,D.Pz);(async function(){browser.runtime.sendMessage({type:"___ext_tab_ready"}),(0,me.O)(),v.init(),await Promise.all([M.Vq,z.d6,te.M.promise,b.e.initialize({redrawDials:D.Pz}),n.W.then(Le)]),x(),(0,D.Pz)().then((()=>(0,ie.R)(b.e.id))),((0,ae.Jl)()||Pe.b)&&te.M.GROUPS.length>2&&(0,E.y)((0,u.Z)("dial/android_dial_many_groups.css")),function(){const e=(0,p.$H)("show_groups");if(te.M.GROUPS.length<=(M.m0?se:re))return(0,g.$$)(e);e.onclick=async t=>{t.stopPropagation();const s=(0,L.O1)();function r(t){s.classList.toggle("vertical",t),e.classList.toggle("rotate_l_90",t)}window.addEventListener("click",(()=>r(!1)),{once:!0}),r()}}(),function(e){const t=browser.runtime.connect({name:e});self.setInterval((()=>t.postMessage({type:"_keepalive"})),2e4)}("dials_page")})().then(W.EK).catch((async e=>{const{ErrorHandler:t}=await(0,ce.H)();return t.showCriticalErrorMessage(`Error loading dials page: ${e}`,"init_dials_failed",`${e.target?.error?.name}, ${e.target?.error?.message}`),e})).then((async()=>{(0,_.BK)(5e3).then(ke).catch((e=>(0,s.vV)("local backups system",e)))}))})()})();