var aBrowser=chrome||browser,ClockifyCustomField=class{constructor({wsCustomField:e,timeEntryId:i,value:t,index:s}){const{id:l,name:a,allowedValues:d,description:c,placeholder:o,projectDefaultValues:n,required:r,status:u,type:h,workspaceDefaultValue:m,onlyAdminCanEdit:y}=e;this.customFieldId=l,this.timeEntryId=i,this.value=t,this.name=a,this.type=h,this.index=s,this.divId=`divCustomField_${s}`,this.allowedValues=d,this.placeholder=o??this.name.toLowerCase(),this.title=c??this.name.toLowerCase(),this.required=r,this.status=u,this.projectDefaultValues=n,this.workspaceDefaultValue=m,this.onlyAdminCanEdit=y,this.isDisabled=y&&!_clockifyPopupDlg.isOwnerOrAdmin}create(){const e=document.createElement("div");return e.setAttribute("id",`${this.divId}`),e.setAttribute("class","clockify-custom-field"),e.innerHTML=`${this.name} (${this.type})`,e}setValue(e){this.value=e}hide(e){$(`#${this.divId}`,e).style.display="none"}show(e){$(`#${this.divId}`,e).style.display="block"}isVisible(e){return"none"!==$(`#${this.divId}`,e).style.display}onChanged(e=null){aBrowser.runtime.sendMessage({eventName:"submitCustomField",options:{timeEntryId:this.timeEntryId,customFieldId:this.customFieldId,value:e??this.value}},(e=>{if(!e)return e;const{data:i,status:t}=e;201!==t&&400===t&&alert(clockifyLocales.CUSTOM_FIELDS+"?"),aBrowser.storage.local.get("timeEntryInProgress",(({timeEntryInProgress:e})=>{if(e&&e.customFieldValues){const t=e.customFieldValues.map((e=>e.customFieldId===i.customFieldId?Object.assign(e,{value:i.value}):e));aBrowser.storage.local.set({timeEntryInProgress:Object.assign(e,{customFieldValues:t})})}}))}))}destroy(){}},ClockifyCustomFieldText=class extends ClockifyCustomField{constructor(e){super(e)}create(){const e=document.createElement("div");return e.setAttribute("id",`${this.divId}`),e.setAttribute("class","clockify-custom-field-ta"+(this.isDisabled?"-disabled":"")),e.innerHTML=`<textarea id='taCustomField${this.index}' index='${this.index}' rows='1' class='custom-field-text${this.isDisabled?"-disabled":""}' title="${this.title}" placeholder="${this.placeholder}" ${this.isDisabled?"disabled":""}>${this.value??""}</textarea>`,e}redrawValue(e){$(`#${this.divId} > textarea`,e).value=this.value??""}onChanged(e){this.value=e.value.trim().replaceAll("\n"," "),super.onChanged()}},ClockifyCustomFieldNumber=class extends ClockifyCustomField{constructor(e){super(e)}create(){const e=document.createElement("div");return e.setAttribute("id",`${this.divId}`),e.setAttribute("class","clockify-custom-field"+(this.isDisabled?"-disabled":"")),e.innerHTML=`<input id='txtCustomField${this.index}' type="number" index='${this.index}' value="${this.value??""}" class='custom-field-number${this.isDisabled?"-disabled":""}' title="${this.title}" placeholder="${this.placeholder}" ${this.isDisabled?"disabled":""}/>`,e}redrawValue(e){$(`#${this.divId} > input`,e).value=this.value??""}onChanged(e){this.value=parseFloat(e.value),super.onChanged()}},ClockifyCustomFieldLink=class extends ClockifyCustomField{constructor(e){super(e)}get placeholderOrName(){return this.placeholder?this.placeholder:this.name}draw(){return this.value?`<div class='clockify-custom-field-inner${this.isDisabled?"-disabled":""}'>            <a href="${this.value}" style="color: #03a9f4;font-size:14px;" id='aCustomFieldLink' target="_blank" title="${this.title}">${this.placeholderOrName}</a>            <img id='aEditCustomFieldLink' index='${this.index}' title="${this.title}" src='${aBrowser.runtime.getURL("assets/images/edit-unsynced.png")}'                style='margin-left: 8px; width:14px; height:14px;'                class="${this.isDisabled?"":"clockify-close-dlg-icon"}" />        </div>`:`<input id='txtCustomField${this.index}' name='txtCustomField${this.index}' type="url" index='${this.index}' class='custom-field-link clockify-link-input${this.isDisabled?"-disabled":""}' style='margin: 0' title="${this.title}" placeholder="${this.placeholderOrName}" ${this.isDisabled?"disabled":""}>`}create(){const e=document.createElement("div");e.setAttribute("id",`${this.divId}`),e.setAttribute("class","clockify-custom-field"+(this.isDisabled?"-disabled":""));const i=this.draw();return e.innerHTML=i,e}redrawValue(e){$(`#${this.divId}`,e).innerHTML=this.draw()}static injectLinkModal(){if(document.getElementById("divClockifyLinkModal"))return;const e=document.createElement("div");e.setAttribute("id","divClockifyLinkModal"),e.classList.add("clockify-modal"),e.style.display="none",e.innerHTML=`<div class='clockify-modal-content'>            <div class="cl-modal-header">                <h1 class="cl-modal-title">Edit link</h1>                <button type="button" class="cl-close">                    <span aria-hidden="true">                        <span class='clockify-close' style='background: url(${aBrowser.runtime.getURL("assets/images/closeX.svg")}) no-repeat;'></span>                  \n                    </span>                </button>            </div>            <div class="cl-modal-body">                <span id='clLinkLabel' class='custom-field-link-label'></span>\n                <input type="url" id='txtCustomFieldLinkModal' class='custom-field-link clockify-link-input-modal' placeholder="link" autocomplete="off">            </div>            <div class="cl-modal-footer">                <a class="clockify-cancel" disabled="">${clockifyLocales.CANCEL}</a>                <a class="clockify-save clockify-save--disabled" disabled="">SAVE</a>            </div>        </div>`,document.body.appendChild(e)}showModal(){_clockifyPopupDlg.closeAllDropDowns();var e=document.getElementById("divClockifyLinkModal");e.setAttribute("index",this.index),$("input.clockify-link-input-modal",e).value=this.value;const i=$("#clLinkLabel",e);let t=this.placeholderOrName;t.length>40&&(t=t.substr(40)+" ..."),i.textContent=t,e.style.display="block"}onClicked(e){this.isDisabled||"aEditCustomFieldLink"!==e.id||this.showModal()}onClickedLinkModal(e,i,t){const s=i;if(t.classList.contains("clockify-modal"))s.style.display="none";else if(t.classList.contains("clockify-close"))s.style.display="none";else if(t.classList.contains("clockify-cancel"))s.style.display="none";else if(t.classList.contains("clockify-save")){const e=$("input.clockify-link-input-modal",s);this.onChanged(e),this.redrawValue(),s.style.display="none"}}onChanged(e){this.value=e.value?e.value:null,super.onChanged()}},ClockifyCustomFieldCheckbox=class extends ClockifyCustomField{constructor(e){super(e)}draw(){let e=this.placeholder??this.name;return`<label class="clockify-switch" title="${this.title}"><input id='switchboxCustomField' index='${this.index}' ${this.value?"checked":""} class="clockify-switch-input" type="checkbox" ${this.isDisabled?"disabled":""}><span id='switchboxSpan' class="clockify-switch-slider clockify-switch-round"></span></label><span id='switchboxLabel' class='clockify-switch-label' title="${this.title}">${e}</span>`}create(){const e=document.createElement("div");return e.setAttribute("id",`${this.divId}`),e.setAttribute("class","clockify-custom-field"),e.innerHTML=`<div class='clockify-custom-field-inner-checkbox${this.isDisabled?"-disabled":""}'>`+this.draw()+"</div>",e}redrawValue(e){$(`#${this.divId} > div`,e).innerHTML=this.draw()}onChanged(e){this.value=e.checked,super.onChanged()}};