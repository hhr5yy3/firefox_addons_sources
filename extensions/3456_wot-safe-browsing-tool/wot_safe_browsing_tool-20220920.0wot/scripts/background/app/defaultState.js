var _window=window;const localStorage=_window.localStorage;class _DefaultState{getDefaultStateObject(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.state&&!e||(this.state={portName:"4873",lastAction:{type:"init"},api:this.getApi(),rtApi:this.getRtApi(),common:{v:1,tid:GA_ACCOUNT,cid:this.Y2lk(),t:"event"},retentionEvent:this.retentionEvent(),installEventFired:!1,firstRunDate:null,wotTraceId:this.makeWotTraceId(),tabs:{},experimentalFeature:{},whitelist:[],phishingWhitelist:[],templist:[],ratings:{},comments:{loading:!0},reviews:{1:{}},user:{},serps:[],settings:{protection:this.settingsProtection(),optoutPopup:"default",parental:!0,gambling:!1,parentalExtraIcon:!0,shields:{all:this.settingsShields()},warnings:this.settingsWarning(),assistant:!0,assistantHandleTop:0,assistantExpanded:!1,upgradePopUp:{show:!1,numberOfShow:0,firstOfferingDate:null},blockPopUpNotification:!0,blockPopUp:!0,phishing:!0,leakMonitoring:!1},rateUsWidget:{popupOpeningCounter:0,offRateWidget:!1,offRateTime:""},mobileModal:{mobileModalTrigger:!1,mobileModalRateCount:0},onboarding:{step:0},cta:{status:"",appearance:0},survey:{installDate:null,isShowed:!1,prevVersion:"0.0.0"},version:{isFirstTimeUser:!0,versionNumber:"",showWhatsNew:!1,whatsNewShownLastVersion:"4.0.14.2",newFeatures:{leakMonitoring:!1}},trackerBlockerData:{list:{},allowList:{},allBlocked:!1,history:[],historyMaxLength:100,reload:!0,reloadAllowList:!0},focusedReview:{target:"",comment:"",uid:0,safety:0,tags:[]},reminders:this.getInitialReminders(),counters:this.getInitialCounters(),remoteConfig:{meta:{refreshIntervalHours:.5,isDefaultConfig:!0},features:{}},serpPopupCounter:0,emailProtection:{timesShown:0},leakMonitoring:{newInfo:!0,updatedTs:1,email:"",breaches:[]},pinWotPopup:{popupWasShown:!1}}),this.state}getApi(){const e={key:JSON.parse(localStorage.getItem("witness_key")),id:JSON.parse(localStorage.getItem("witness_id"))};return e.key&&e.id?(webextApi.storage.local.set({witness_key:e.key}),webextApi.storage.local.set({witness_id:e.id}),WotApi.sendAnalyticsFromBackground("OLD_CONF","witness_key"),WotApi.sendAnalyticsFromBackground("OLD_CONF","witness_id"),e):{key:"",id:""}}getRtApi(){const e={key:JSON.parse(localStorage.getItem("rt_witness_key")),id:JSON.parse(localStorage.getItem("rt_witness_id"))};return e.key&&e.id?(webextApi.storage.local.set({rt_witness_key:e.key}),webextApi.storage.local.set({rt_witness_id:e.id}),WotApi.sendAnalyticsFromBackground("OLD_CONF","rt_witness_key"),WotApi.sendAnalyticsFromBackground("OLD_CONF","rt_witness_id"),e):{key:"",id:""}}getProtectedTime(){const e=JSON.parse(localStorage.getItem("firstrun:time"));return e?(webextApi.storage.local.set({"firstrun:time":e}),WotApi.sendAnalyticsFromBackground("OLD_CONF","firstrun:time"),new Date(e)/1):Date.now()}getInitialReminders(){return{[SCHEDULER_TYPES.EMAIL_PROTECTION]:void 0,[SCHEDULER_TYPES.RATE_US_SLIDER]:this.getProtectedTime()+ONE_MONTH,[SCHEDULER_TYPES.LEAK_MONITORING_AD]:Date.now()}}getInitialCounters(){return{[SCHEDULER_TYPES.LEAK_MONITORING_AD]:0}}Y2lk(){return generateUuidV4()}retentionEvent(){let e=localStorage.getItem("retention_event_data");e?(webextApi.storage.local.set({retention_event_data:e}),WotApi.sendAnalyticsFromBackground("OLD_CONF","retention_event_data"),e=JSON.parse(e)):e=!1;return{sentDays:e?e.sentDays:{},completed:e&&!0===e.completed}}settingsProtection(){const e=localStorage.getItem("settingsui_dynamicprotect")&&!JSON.parse(localStorage.getItem("settingsui_dynamicprotect")),t=JSON.parse(localStorage.getItem("rtp_has_user_selected"));return e&&(webextApi.storage.local.set({settingsui_dynamicprotect:e}),WotApi.sendAnalyticsFromBackground("OLD_CONF","settingsui_dynamicprotect")),t&&(webextApi.storage.local.set({rtp_has_user_selected:t}),WotApi.sendAnalyticsFromBackground("OLD_CONF","rtp_has_user_selected")),!e||"firefox"===browserName&&!t}settingsShields(){const e=localStorage.getItem("settingsui_searchlevel");if(!e)return SHIELDS_LEVEL_HIGH;webextApi.storage.local.set({settingsui_searchlevel:e}),WotApi.sendAnalyticsFromBackground("OLD_CONF","settingsui_searchlevel");const t=JSON.parse(e);return{off:SHIELDS_LEVEL_OFF,bad:SHIELDS_LEVEL_NORMAL,normal:SHIELDS_LEVEL_HIGH}[t]||SHIELDS_LEVEL_HIGH}settingsWarning(){const e=localStorage.getItem("settingsui_warnlevel");if(!e)return WARNINGS_LEVEL_HIGH;webextApi.storage.local.set({settingsui_warnlevel:e}),WotApi.sendAnalyticsFromBackground("OLD_CONF","settingsui_warnlevel");const t=JSON.parse(e);return{normal:WARNINGS_LEVEL_HIGH,light:WARNINGS_LEVEL_NORMAL,off:WARNINGS_LEVEL_OFF}[t]||WARNINGS_LEVEL_HIGH}makeWotTraceId(){return"ex-"+[makeid(8),makeid(4),makeid(4),makeid(4),makeid(12)].join("-")}}const DefaultState=new _DefaultState;