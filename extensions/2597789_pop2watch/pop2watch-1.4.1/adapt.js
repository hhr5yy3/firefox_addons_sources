/*! For license information please see adapt.js.LICENSE.txt */
(()=>{var e={7856:function(e,t){var r,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=(t,r)=>(...s)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||s.length<=1&&!1!==r.singleCallbackArg?t.resolve(s[0]):t.resolve(s)},a=e=>1==e?"argument":"arguments",i=(e,t,r)=>new Proxy(t,{apply:(t,s,n)=>r.call(s,e,...n)});let o=Function.call.bind(Object.prototype.hasOwnProperty);const g=(e,t={},r={})=>{let s=Object.create(null),l={has:(t,r)=>r in e||r in s,get(l,m,c){if(m in s)return s[m];if(!(m in e))return;let A=e[m];if("function"==typeof A)if("function"==typeof t[m])A=i(e,e[m],t[m]);else if(o(r,m)){let t=((e,t)=>function(r,...s){if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((a,i)=>{if(t.fallbackToNoCallback)try{r[e](...s,n({resolve:a,reject:i},t))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),r[e](...s),t.fallbackToNoCallback=!1,t.noCallback=!0,a()}else t.noCallback?(r[e](...s),a()):r[e](...s,n({resolve:a,reject:i},t))}))})(m,r[m]);A=i(e,e[m],t)}else A=A.bind(e);else if("object"==typeof A&&null!==A&&(o(t,m)||o(r,m)))A=g(A,t[m],r[m]);else{if(!o(r,"*"))return Object.defineProperty(s,m,{configurable:!0,enumerable:!0,get:()=>e[m],set(t){e[m]=t}}),A;A=g(A,t[m],r["*"])}return s[m]=A,A},set:(t,r,n,a)=>(r in s?s[r]=n:e[r]=n,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(s,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(s,t)},m=Object.create(e);return new Proxy(m,l)},l=e=>({addListener(t,r,...s){t.addListener(e.get(r),...s)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),m=new s((e=>"function"!=typeof e?e:function(t){const r=g(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)})),c=new s((e=>"function"!=typeof e?e:function(t,r,s){let n,a,i=!1,o=new Promise((e=>{n=function(t){i=!0,e(t)}}));try{a=e(t,r,n)}catch(e){a=Promise.reject(e)}const g=!0!==a&&((l=a)&&"object"==typeof l&&"function"==typeof l.then);var l;if(!0!==a&&!g&&!i)return!1;return(g?a:o).then((e=>{s(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),A=({reject:r,resolve:s},n)=>{e.runtime.lastError?e.runtime.lastError.message===t?s():r(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?r(new Error(n.message)):s(n)},u=(e,t,r,...s)=>{if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((e,t)=>{const n=A.bind(null,{resolve:e,reject:t});s.push(n),r.sendMessage(...s)}))},p={devtools:{network:{onRequestFinished:l(m)}},runtime:{onMessage:l(c),onMessageExternal:l(c),sendMessage:u.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:u.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},g(e,p,r)};e.exports=r(chrome)}else e.exports=globalThis.browser},void 0===(s=r.apply(t,[e]))||(e.exports=s)},6604:e=>{"use strict";e.exports={WU:"1.4.1"}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,r),a.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";const e={async getStorageEngine(){let e=browser.storage.sync;try{await e.get("test")}catch(t){e=browser.storage.local}return e},async getSubscriptions(){const e=await this.getStorageEngine(),t=await e.get("followed");return t&&t.followed?t.followed:[]},async setSubscriptions(e){const t=await this.getStorageEngine();await t.set({followed:e})}},t=Object.freeze({SUBSCRIBE:"SUBSCRIBE",UNSUBSCRIBE:"UNSUBSCRIBE",SYNCHRONIZE:"SYNCHRONIZE",CLOSE_INSTALLED:"CLOSE_INSTALLED",DOWNLOAD_BLOB:"DOWNLOAD_BLOB",OPEN_TAB:"OPEN_TAB",TRACK_EVENT:"TRACK_EVENT",NOTIFY:"NOTIFY",ERROR:"ERROR"});var s=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===s.call(e)};function a(e){return"function"==typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var g=RegExp.prototype.test,l=/\S/;var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},c=/\s*/,A=/\s+/,u=/\s*=/,p=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function d(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function x(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},d.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var t,r,s,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var i,g,l,m=this,c=!1;m;){if(e.indexOf(".")>0)for(i=m.view,g=e.split("."),l=0;null!=i&&l<g.length;)l===g.length-1&&(c=o(i,g[l])||(r=i,s=g[l],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(s))),i=i[g[l++]];else i=m.view[e],c=o(m.view,e);if(c){t=i;break}m=m.parent}n[e]=t}return a(t)&&(t=t.call(this.view)),t},x.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},x.prototype.parse=function(e,t){var r=this.templateCache,s=e+":"+(t||b.tags).join(":"),a=void 0!==r,o=a?r.get(s):void 0;return null==o&&(o=function(e,t){if(!e)return[];var r,s,a,o,m=!1,f=[],x=[],v=[],w=!1,y=!1,S="",T=0;function E(){if(w&&!y)for(;v.length;)delete x[v.pop()];else v=[];w=!1,y=!1}function C(e){if("string"==typeof e&&(e=e.split(A,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);r=new RegExp(i(e[0])+"\\s*"),s=new RegExp("\\s*"+i(e[1])),a=new RegExp("\\s*"+i("}"+e[1]))}C(t||b.tags);for(var B,k,_,U,I,P,L=new d(e);!L.eos();){if(B=L.pos,_=L.scanUntil(r))for(var R=0,O=_.length;R<O;++R)o=U=_.charAt(R),function(e,t){return g.call(e,t)}(l,o)?(y=!0,m=!0,S+=" "):(v.push(x.length),S+=U),x.push(["text",U,B,B+1]),B+=1,"\n"===U&&(E(),S="",T=0,m=!1);if(!L.scan(r))break;if(w=!0,k=L.scan(h)||"name",L.scan(c),"="===k?(_=L.scanUntil(u),L.scan(u),L.scanUntil(s)):"{"===k?(_=L.scanUntil(a),L.scan(p),L.scanUntil(s),k="&"):_=L.scanUntil(s),!L.scan(s))throw new Error("Unclosed tag at "+L.pos);if(I=">"==k?[k,_,B,L.pos,S,T,m]:[k,_,B,L.pos],T++,x.push(I),"#"===k||"^"===k)f.push(I);else if("/"===k){if(!(P=f.pop()))throw new Error('Unopened section "'+_+'" at '+B);if(P[1]!==_)throw new Error('Unclosed section "'+P[1]+'" at '+B)}else"name"===k||"{"===k||"&"===k?y=!0:"="===k&&C(_)}if(E(),P=f.pop())throw new Error('Unclosed section "'+P[1]+'" at '+L.pos);return function(e){for(var t,r=[],s=r,n=[],a=0,i=e.length;a<i;++a)switch((t=e[a])[0]){case"#":case"^":s.push(t),n.push(t),s=t[4]=[];break;case"/":n.pop()[5]=t[2],s=n.length>0?n[n.length-1][4]:r;break;default:s.push(t)}return r}(function(e){for(var t,r,s=[],n=0,a=e.length;n<a;++n)(t=e[n])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(s.push(t),r=t));return s}(x))}(e,t),a&&r.set(s,o)),o},x.prototype.render=function(e,t,r,s){var n=this.getConfigTags(s),a=this.parse(e,n),i=t instanceof f?t:new f(t,void 0);return this.renderTokens(a,i,r,e,s)},x.prototype.renderTokens=function(e,t,r,s,n){for(var a,i,o,g="",l=0,m=e.length;l<m;++l)o=void 0,"#"===(i=(a=e[l])[0])?o=this.renderSection(a,t,r,s,n):"^"===i?o=this.renderInverted(a,t,r,s,n):">"===i?o=this.renderPartial(a,t,r,n):"&"===i?o=this.unescapedValue(a,t):"name"===i?o=this.escapedValue(a,t,n):"text"===i&&(o=this.rawValue(a)),void 0!==o&&(g+=o);return g},x.prototype.renderSection=function(e,t,r,s,i){var o=this,g="",l=t.lookup(e[1]);if(l){if(n(l))for(var m=0,c=l.length;m<c;++m)g+=this.renderTokens(e[4],t.push(l[m]),r,s,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)g+=this.renderTokens(e[4],t.push(l),r,s,i);else if(a(l)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,s.slice(e[3],e[5]),(function(e){return o.render(e,t,r,i)})))&&(g+=l)}else g+=this.renderTokens(e[4],t,r,s,i);return g}},x.prototype.renderInverted=function(e,t,r,s,a){var i=t.lookup(e[1]);if(!i||n(i)&&0===i.length)return this.renderTokens(e[4],t,r,s,a)},x.prototype.indentPartial=function(e,t,r){for(var s=t.replace(/[^ \t]/g,""),n=e.split("\n"),a=0;a<n.length;a++)n[a].length&&(a>0||!r)&&(n[a]=s+n[a]);return n.join("\n")},x.prototype.renderPartial=function(e,t,r,s){if(r){var n=this.getConfigTags(s),i=a(r)?r(e[1]):r[e[1]];if(null!=i){var o=e[6],g=e[5],l=e[4],m=i;0==g&&l&&(m=this.indentPartial(i,l,o));var c=this.parse(m,n);return this.renderTokens(c,t,r,m,s)}}},x.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},x.prototype.escapedValue=function(e,t,r){var s=this.getConfigEscape(r)||b.escape,n=t.lookup(e[1]);if(null!=n)return"number"==typeof n&&s===b.escape?String(n):s(n)},x.prototype.rawValue=function(e){return e[1]},x.prototype.getConfigTags=function(e){return n(e)?e:e&&"object"==typeof e?e.tags:void 0},x.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!n(e)?e.escape:void 0};var b={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){v.templateCache=e},get templateCache(){return v.templateCache}},v=new x;b.clearCache=function(){return v.clearCache()},b.parse=function(e,t){return v.parse(e,t)},b.render=function(e,t,r,s){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(a=e)?"array":typeof a)+'" was given as the first argument for mustache#render(template, view, partials)');var a;return v.render(e,t,r,s)},b.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return m[e]}))},b.Scanner=d,b.Context=f,b.Writer=x;const w=b,y=Object.freeze({STATUS_SUBSCRIBED:"subscribed",STATUS_OVERFLOW:"overflow",STATUS_AVAILABLE:"available",STATUS_NEW_SUBSCRIPTION:"new_subscription",STATUS_ERROR:"error"});r(6604).WU,r.g.browser=r(7856),(new class{constructor(){this.labels={[y.STATUS_SUBSCRIBED]:{title:browser.i18n.getMessage("notifyAlreadySubscribed"),comment:browser.i18n.getMessage("notifyAlreadySubscribedComment")},[y.STATUS_OVERFLOW]:{title:browser.i18n.getMessage("notifyMaxSubscriptions",50..toString(10)),comment:browser.i18n.getMessage("notifyMaxSubscriptionsComment")},[y.STATUS_AVAILABLE]:{title:browser.i18n.getMessage("notifySubscribe"),comment:browser.i18n.getMessage("notifySubscribeComment")},[y.STATUS_NEW_SUBSCRIPTION]:{title:browser.i18n.getMessage("notifyNewSubscription"),comment:browser.i18n.getMessage("notifyAlreadySubscribedComment")},[y.STATUS_ERROR]:{title:browser.i18n.getMessage("notifyUnavailableService"),comment:browser.i18n.getMessage("notifyUnavailableServiceComment")}}}siteDetector(){const e=document.getElementById("|L4t,K79E$qM%j`]kmCGcg.qAyKh>}SQxq_c6sYfNT|+jNPN_n@.");return e?e.innerHTML:null}getArtworkSubscriptionStatus(e,t){return t.find((t=>{return s=e,(r=t).id===s.id&&r.season===s.season;var r,s}))?y.STATUS_SUBSCRIBED:t.length>=50?y.STATUS_OVERFLOW:y.STATUS_AVAILABLE}updateElementWithHTML(e,t){for(;e.firstChild;)e.firstChild.remove();const r=(new DOMParser).parseFromString(t,"text/html");for(const t of r.body.childNodes)e.appendChild(t)}getWebsiteHTML(e){let t='<div>\n  <h1 class="titleExtension">{{title}}</h1>\n  <br>{{^hasButton}}<p>{{comment}}</p>{{/hasButton}}\n  {{#hasButton}}<button id="followButton" class="bouton4">{{comment}}</button>{{/hasButton}}\n</div>\n';switch(this.siteDetector()){case"voirfilm":t='<div class="bg_titre_page titre1">\n  <h2 class="titre2">{{title}}</h2>\n</div>\n<div>\n  <div class="parentDivExtension">\n    <div class="childrenDivExtension1">\n      <img src="{{icon}}" class="popIcon"/>\n    </div>\n    <div class="childrenDivExtension2">{{#hasButton}}<button id="followButton" style="margin-bottom:5px;margin-top:5px;">{{comment}}</button>{{/hasButton}}{{^hasButton}}{{comment}}{{/hasButton}}<br><br></div>\n  </div>\n</div>\n';break;case"libertyvf":t='<div>\n  <h2 style="color: #007e92">{{title}}</h2>\n  <br>{{^hasButton}}<p>{{comment}}</p>{{/hasButton}}\n  {{#hasButton}}<button id="followButton" class="bouton4">{{comment}}</button>{{/hasButton}}\n</div>\n';break;case"streamcomplet":t='<h1 class="titreExtension">{{title}}</h1>\n<div class="parentDivExtension">\n  <div class="childrenDivExtension1">\n    <img src="{{icon}}" class="popIcon"/>\n  </div>\n  <div class="childrenDivExtension2">{{^hasButton}}{{comment}}{{/hasButton}}{{#hasButton}}<button id="followButton" class="bouton4" style="margin-bottom:5px;margin-top:5px;">{{comment}}</button>{{/hasButton}}</div>\n</div>\n'}return w.render(t,{hasButton:e===y.STATUS_AVAILABLE,title:this.labels[e].title,comment:this.labels[e].comment,icon:browser.runtime.getURL("images/icon128.png")})}adaptWebsiteTemplate(e,t){const r=e.querySelector("#p2w_tpl_title"),s=e.querySelector("#p2w_tpl_subtitle"),n=e.querySelector("#p2w_tpl_followButton"),a=e.querySelector("#p2w_tpl_storeLink");a&&(a.style.display="none"),r&&(r.textContent=this.labels[t].title),s&&(s.textContent=this.labels[t].comment,s.style.display="",t===y.STATUS_AVAILABLE&&(s.style.display="none")),n&&(n.style.display="none",t===y.STATUS_AVAILABLE&&(n.style.display=""))}updatePageBySubscriptionContext(e,t){if(e.querySelector("#p2w_tpl_followButton"))this.adaptWebsiteTemplate(e,t);else{const r=this.getWebsiteHTML(t);r&&this.updateElementWithHTML(e,r)}}updatePageSubscriptionButton(e,r,s){if(s===y.STATUS_AVAILABLE){let s=document.getElementById("p2w_tpl_followButton");if(s||(s=document.getElementById("followButton")),!s)return;s.addEventListener("click",(()=>{browser.runtime.sendMessage({channel:t.SUBSCRIBE,artwork:r}).then((()=>{this.updatePageBySubscriptionContext(e,y.STATUS_NEW_SUBSCRIPTION)})).catch((e=>{console.log("subscribe failed",e)}))}))}}async adaptPage(){const t=document.getElementById("extensionPlaceAlbania");if(!t)return;const r=document.getElementById("tmdb_id");if(null===r)return;const s=parseInt(r.value,10),n=document.getElementById("extension_title");if(null===n)return;const a=n.value,i=document.getElementById("season"),o=window.location.pathname;if(!(s&&a&&o))return;const g={id:s,path:o,title:a};null!==i&&(g.season=parseInt(i.value));const l=await e.getSubscriptions(),m=this.getArtworkSubscriptionStatus(g,l);this.updatePageBySubscriptionContext(t,m),this.updatePageSubscriptionButton(t,g,m)}}).adaptPage().catch((e=>{browser.runtime.sendMessage({channel:t.ERROR,error:e.message}).then()}))})()})();