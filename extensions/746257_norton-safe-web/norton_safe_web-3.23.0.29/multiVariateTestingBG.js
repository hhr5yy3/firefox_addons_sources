((e,t)=>{"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.multiVariateTestingSDK=t():e.multiVariateTestingSDK=t()})(this,()=>{var n={75:(e,t,r)=>{var n=r(453),o=r(487),a=o(n("String.prototype.indexOf"));e.exports=function(e,t){t=n(e,!!t);return"function"==typeof t&&-1<a(e,".prototype.")?o(t):t}},487:(e,t,r)=>{function n(){return u(o,l,arguments)}var o=r(743),a=r(453),i=r(897),s=r(675),l=a("%Function.prototype.apply%"),c=a("%Function.prototype.call%"),u=a("%Reflect.apply%",!0)||o.call(c,l),r=r(655),p=a("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new s("a function is required");var t=u(o,c,arguments);return i(t,1+p(0,e.length-(arguments.length-1)),!0)};r?r(e.exports,"apply",{value:n}):e.exports.apply=n},41:(e,t,r)=>{var l=r(655),c=r(68),u=r(675),p=r(795);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new u("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new u("`property` must be a string or a symbol`");if(3<arguments.length&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new u("`nonEnumerable`, if provided, must be a boolean or null");if(4<arguments.length&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new u("`nonWritable`, if provided, must be a boolean or null");if(5<arguments.length&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new u("`nonConfigurable`, if provided, must be a boolean or null");if(6<arguments.length&&"boolean"!=typeof arguments[6])throw new u("`loose`, if provided, must be a boolean");var n=3<arguments.length?arguments[3]:null,o=4<arguments.length?arguments[4]:null,a=5<arguments.length?arguments[5]:null,i=6<arguments.length&&arguments[6],s=!!p&&p(e,t);if(l)l(e,t,{configurable:null===a&&s?s.configurable:!a,enumerable:null===n&&s?s.enumerable:!n,value:r,writable:null===o&&s?s.writable:!o});else{if(!i&&(n||o||a))throw new c("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},655:(e,t,r)=>{r=r(453)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(e){r=!1}e.exports=r},237:e=>{e.exports=EvalError},383:e=>{e.exports=Error},290:e=>{e.exports=RangeError},538:e=>{e.exports=ReferenceError},68:e=>{e.exports=SyntaxError},675:e=>{e.exports=TypeError},345:e=>{e.exports=URIError},353:e=>{function l(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r}var c=Object.prototype.toString,u=Math.max;e.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==c.apply(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n=(e=>{for(var t=[],r=1,n=0;r<e.length;r+=1,n+=1)t[n]=e[r];return t})(arguments),e=u(0,r.length-n.length),o=[],a=0;a<e;a++)o[a]="$"+a;var i,s=Function("binder","return function ("+(e=>{for(var t="",r=0;r<e.length;r+=1)t+=e[r],r+1<e.length&&(t+=",");return t})(o)+"){ return binder.apply(this,arguments); }")(function(){var e;return this instanceof s?(e=r.apply(this,l(n,arguments)),Object(e)===e?e:this):r.apply(t,l(n,arguments))});return r.prototype&&((i=function(){}).prototype=r.prototype,s.prototype=new i,i.prototype=null),s}},743:(e,t,r)=>{r=r(353);e.exports=Function.prototype.bind||r},453:(e,t,r)=>{var n,o=r(383),a=r(237),i=r(290),s=r(538),f=r(68),h=r(675),l=r(345),c=Function,u=function(e){try{return c('"use strict"; return ('+e+").constructor;")()}catch(e){}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch(e){d=null}function p(){throw new h}var y=d?function(){try{return p}catch(e){try{return d(arguments,"callee").get}catch(e){return p}}}():p,m=r(39)(),g=r(24)(),v=Object.getPrototypeOf||(g?function(e){return e.__proto__}:null),b={},g="undefined"!=typeof Uint8Array&&v?v(Uint8Array):n,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":m&&v?v([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":a,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&v?v(v([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&m&&v?v((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&m&&v?v((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&v?v(""[Symbol.iterator]()):n,"%Symbol%":m?Symbol:n,"%SyntaxError%":f,"%ThrowTypeError%":y,"%TypedArray%":g,"%TypeError%":h,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(v)try{null.error}catch(e){o=v(v(e));w["%Error.prototype%"]=o}function A(e){var t,r;return"%AsyncFunction%"===e?t=u("async function () {}"):"%GeneratorFunction%"===e?t=u("function* () {}"):"%AsyncGeneratorFunction%"===e?t=u("async function* () {}"):"%AsyncGenerator%"===e?(r=A("%AsyncGeneratorFunction%"))&&(t=r.prototype):"%AsyncIteratorPrototype%"===e&&(r=A("%AsyncGenerator%"))&&v&&(t=v(r.prototype)),w[e]=t}var S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},a=r(743),F=r(957),x=a.call(Function.call,Array.prototype.concat),E=a.call(Function.apply,Array.prototype.splice),_=a.call(Function.call,String.prototype.replace),j=a.call(Function.call,String.prototype.slice),O=a.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g;e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new h("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new h('"allowMissing" argument must be a boolean');if(null===O(/^%?[^%]*%?$/,e))throw new f("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=(e=>{var t=j(e,0,1),r=j(e,-1);if("%"===t&&"%"!==r)throw new f("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new f("invalid intrinsic syntax, expected opening `%`");var o=[];return _(e,P,function(e,t,r,n){o[o.length]=r?_(n,I,"$1"):t||e}),o})(e),n=0<r.length?r[0]:"",o=((e,t)=>{var r,n=e;if(F(S,n)&&(n="%"+(r=S[n])[0]+"%"),F(w,n)){var o=w[n];if(void 0!==(o=o===b?A(n):o)||t)return{alias:r,name:n,value:o};throw new h("intrinsic "+e+" exists, but is not available. Please file an issue!")}throw new f("intrinsic "+e+" does not exist!")})("%"+n+"%",t),a=(o.name,o.value),i=!1,o=o.alias;o&&(n=o[0],E(r,x([0,1],o)));for(var s=1,l=!0;s<r.length;s+=1){var c=r[s],u=j(c,0,1),p=j(c,-1);if(('"'===u||"'"===u||"`"===u||'"'===p||"'"===p||"`"===p)&&u!==p)throw new f("property names with quotes must have matching quotes");if("constructor"!==c&&l||(i=!0),F(w,u="%"+(n+="."+c)+"%"))a=w[u];else if(null!=a){if(!(c in a)){if(t)return;throw new h("base intrinsic for "+e+" exists, but the property is not available.")}a=d&&s+1>=r.length?(l=!!(p=d(a,c)))&&"get"in p&&!("originalValue"in p.get)?p.get:a[c]:(l=F(a,c),a[c]),l&&!i&&(w[u]=a)}}return a}},795:(e,t,r)=>{r=r(453)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},592:(e,t,r)=>{function n(){return!!o}var o=r(655);n.hasArrayLengthDefineBug=function(){if(!o)return null;try{return 1!==o([],"length",{value:1}).length}catch(e){return!0}},e.exports=n},24:e=>{var t={__proto__:null,foo:{}},r={__proto__:t}.foo===t.foo&&!(t instanceof Object);e.exports=function(){return r}},39:(e,t,r)=>{var n="undefined"!=typeof Symbol&&Symbol,o=r(333);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},333:e=>{e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"!=typeof Symbol.iterator){var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){r=Object.getOwnPropertyDescriptor(e,t);if(42!==r.value||!0!==r.enumerable)return!1}}return!0}},957:(e,t,r)=>{var n=Function.prototype.call,o=Object.prototype.hasOwnProperty,r=r(743);e.exports=r.call(n,o)},140:(e,t,r)=>{var l=r(677),p=l.ValidatorResult,f=l.SchemaError,r={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0}},n=r.validators={};function s(e,t,r,n,o){var a=t.throwError,i=t.throwAll,e=(t.throwError=!1,t.throwAll=!1,this.validateSchema(e,o,t,r));return t.throwError=a,t.throwAll=i,!e.valid&&n instanceof Function&&n(e),e.valid}function c(e,t){if(Object.hasOwnProperty.call(e,t))return e[t];if(t in e)for(;e=Object.getPrototypeOf(e);)if(Object.propertyIsEnumerable.call(e,t))return e[t]}function h(e,t,r,n,o,a){!this.types.object(e)||t.properties&&void 0!==t.properties[o]||(!1===t.additionalProperties?a.addError({name:"additionalProperties",argument:o,message:"is not allowed to have the additional property "+JSON.stringify(o)}):(t=t.additionalProperties||{},"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,o,t,r,n),(e=this.validateSchema(e[o],t,r,n.makeChild(t,o))).instance!==a.instance[o]&&(a.instance[o]=e.instance),a.importErrors(e)))}n.type=function(e,t,r,n){var o,a;return void 0===e?null:(o=new p(e,t,r,n),(a=Array.isArray(t.type)?t.type:[t.type]).some(this.testType.bind(this,e,t,r,n))||(e=a.map(function(e){var t;if(e)return(t=e.$id||e.id)?"<"+t+">":e+""}),o.addError({name:"type",argument:e,message:"is not of a type(s) "+e})),o)},n.anyOf=function(e,t,r,n){if(void 0===e)return null;var o=new p(e,t,r,n),a=new p(e,t,r,n);if(Array.isArray(t.anyOf))return t.anyOf.some(s.bind(this,e,r,n,function(e){a.importErrors(e)}))||(e=t.anyOf.map(function(e,t){var r=e.$id||e.id;return r?"<"+r+">":e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}),r.nestedErrors&&o.importErrors(a),o.addError({name:"anyOf",argument:e,message:"is not any of "+e.join(",")})),o;throw new f("anyOf must be an array")},n.allOf=function(n,e,o,a){if(void 0===n)return null;var i,s;if(Array.isArray(e.allOf))return i=new p(n,e,o,a),s=this,e.allOf.forEach(function(e,t){var r=s.validateSchema(n,e,o,a);r.valid||(e=e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]",i.addError({name:"allOf",argument:{id:e,length:r.errors.length,valid:r},message:"does not match allOf schema "+e+" with "+r.errors.length+" error[s]:"}),i.importErrors(r))}),i;throw new f("allOf must be an array")},n.oneOf=function(e,t,r,n){if(void 0===e)return null;var o,a;if(Array.isArray(t.oneOf))return o=new p(e,t,r,n),a=new p(e,t,r,n),e=t.oneOf.filter(s.bind(this,e,r,n,function(e){a.importErrors(e)})).length,n=t.oneOf.map(function(e,t){return e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}),1!==e&&(r.nestedErrors&&o.importErrors(a),o.addError({name:"oneOf",argument:n,message:"is not exactly one from "+n.join(",")})),o;throw new f("oneOf must be an array")},n.if=function(e,t,r,n){if(void 0===e)return null;if(!l.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var o,a=s.call(this,e,r,n,null,t.if),i=new p(e,t,r,n);if(a){if(void 0===t.then)return;if(!l.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');o=this.validateSchema(e,t.then,r,n.makeChild(t.then))}else{if(void 0===t.else)return;if(!l.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');o=this.validateSchema(e,t.else,r,n.makeChild(t.else))}return i.importErrors(o),i},n.propertyNames=function(e,t,r,n){if(this.types.object(e)){var o,a,i=new p(e,t,r,n),s=void 0!==t.propertyNames?t.propertyNames:{};if(!l.isSchema(s))throw new f('Expected "propertyNames" to be a schema (object or boolean)');for(o in e)void 0!==c(e,o)&&(a=this.validateSchema(o,s,r,n.makeChild(s)),i.importErrors(a));return i}},n.properties=function(e,t,r,n){if(this.types.object(e)){var o,a=new p(e,t,r,n),i=t.properties||{};for(o in i){var s=i[o];if(void 0!==s){if(null===s)throw new f('Unexpected null, expected schema in "properties"');"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,o,s,r,n);var l=c(e,o),l=this.validateSchema(l,s,r,n.makeChild(s,o));l.instance!==a.instance[o]&&(a.instance[o]=l.instance),a.importErrors(l)}}return a}},n.patternProperties=function(e,t,r,n){if(this.types.object(e)){var o,a=new p(e,t,r,n),i=t.patternProperties||{};for(o in e){var s,l=!0;for(s in i){var c=i[s];if(void 0!==c){if(null===c)throw new f('Unexpected null, expected schema in "patternProperties"');try{var u=new RegExp(s,"u")}catch(e){u=new RegExp(s)}u.test(o)&&(l=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,o,c,r,n),(c=this.validateSchema(e[o],c,r,n.makeChild(c,o))).instance!==a.instance[o]&&(a.instance[o]=c.instance),a.importErrors(c))}}l&&h.call(this,e,t,r,n,o,a)}return a}},n.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var o,a=new p(e,t,r,n);for(o in e)h.call(this,e,t,r,n,o,a);return a}},n.minProperties=function(e,t,r,n){if(this.types.object(e))return r=new p(e,t,r,n),Object.keys(e).length>=t.minProperties||r.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),r},n.maxProperties=function(e,t,r,n){if(this.types.object(e))return r=new p(e,t,r,n),Object.keys(e).length<=t.maxProperties||r.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),r},n.items=function(e,n,o,a){var i,s=this;if(this.types.array(e)&&void 0!==n.items)return i=new p(e,n,o,a),e.every(function(e,t){var r=Array.isArray(n.items)?void 0===n.items[t]?n.additionalItems:n.items[t]:n.items;return void 0===r||(!1===r?(i.addError({name:"items",message:"additionalItems not permitted"}),!1):((e=s.validateSchema(e,r,o,a.makeChild(r,t))).instance!==i.instance[t]&&(i.instance[t]=e.instance),i.importErrors(e),!0))}),i},n.contains=function(e,r,n,o){var t,a=this;if(this.types.array(e)&&void 0!==r.contains){if(l.isSchema(r.contains))return t=new p(e,r,n,o),!1===e.some(function(e,t){return 0===a.validateSchema(e,r.contains,n,o.makeChild(r.contains,t)).errors.length})&&t.addError({name:"contains",argument:r.contains,message:"must contain an item matching given schema"}),t;throw new Error('Expected "contains" keyword to be a schema')}},n.minimum=function(e,t,r,n){if(this.types.number(e))return r=new p(e,t,r,n),t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum||r.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||r.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),r},n.maximum=function(e,t,r,n){if(this.types.number(e))return r=new p(e,t,r,n),t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum||r.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||r.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),r},n.exclusiveMinimum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMinimum&&this.types.number(e))return r=new p(e,t,r,n),e>t.exclusiveMinimum||r.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),r},n.exclusiveMaximum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMaximum&&this.types.number(e))return r=new p(e,t,r,n),e<t.exclusiveMaximum||r.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),r};function o(e,t,r,n,o,a){if(this.types.number(e)){var i=t[o];if(0==i)throw new f(o+" cannot be zero");t=new p(e,t,r,n),r=l.getDecimalPlaces(e),n=l.getDecimalPlaces(i),r=Math.max(r,n),n=Math.pow(10,r);return Math.round(e*n)%Math.round(i*n)!=0&&t.addError({name:o,argument:i,message:a+JSON.stringify(i)}),t}}function a(e,t,r){for(var n=r.length,o=t+1;o<n;o++)if(l.deepCompareStrict(e,r[o]))return!1;return!0}n.multipleOf=function(e,t,r,n){return o.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},n.divisibleBy=function(e,t,r,n){return o.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},n.required=function(t,e,r,n){var o=new p(t,e,r,n);return void 0===t&&!0===e.required?o.addError({name:"required",message:"is required"}):this.types.object(t)&&Array.isArray(e.required)&&e.required.forEach(function(e){void 0===c(t,e)&&o.addError({name:"required",argument:e,message:"requires property "+JSON.stringify(e)})}),o},n.pattern=function(e,t,r,n){if(this.types.string(e)){r=new p(e,t,r,n),n=t.pattern;try{var o=new RegExp(n,"u")}catch(e){o=new RegExp(n)}return e.match(o)||r.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),r}},n.format=function(e,t,r,n){if(void 0!==e)return(r=new p(e,t,r,n)).disableFormat||l.isFormat(e,t.format,this)||r.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),r},n.minLength=function(e,t,r,n){if(this.types.string(e))return r=new p(e,t,r,n),n=e.match(/[\uDC00-\uDFFF]/g),e.length-(n?n.length:0)>=t.minLength||r.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),r},n.maxLength=function(e,t,r,n){if(this.types.string(e))return r=new p(e,t,r,n),n=e.match(/[\uDC00-\uDFFF]/g),e.length-(n?n.length:0)<=t.maxLength||r.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),r},n.minItems=function(e,t,r,n){if(this.types.array(e))return r=new p(e,t,r,n),e.length>=t.minItems||r.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),r},n.maxItems=function(e,t,r,n){if(this.types.array(e))return r=new p(e,t,r,n),e.length<=t.maxItems||r.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),r},n.uniqueItems=function(e,t,r,n){if(!0===t.uniqueItems&&this.types.array(e))return t=new p(e,t,r,n),e.every(a)||t.addError({name:"uniqueItems",message:"contains duplicate item"}),t},n.dependencies=function(t,e,r,n){if(this.types.object(t)){var o,a,i,s=new p(t,e,r,n);for(o in e.dependencies)void 0!==t[o]&&(i=e.dependencies[o],a=n.makeChild(i,o),"string"==typeof i&&(i=[i]),Array.isArray(i)?i.forEach(function(e){void 0===t[e]&&s.addError({name:"dependencies",argument:a.propertyPath,message:"property "+e+" not found, required by "+a.propertyPath})}):(i=this.validateSchema(t,i,r,a),s.instance!==i.instance&&(s.instance=i.instance),i&&i.errors.length&&(s.addError({name:"dependencies",argument:a.propertyPath,message:"does not meet dependency required by "+a.propertyPath}),s.importErrors(i))));return s}},n.enum=function(e,t,r,n){if(void 0===e)return null;if(Array.isArray(t.enum))return r=new p(e,t,r,n),t.enum.some(l.deepCompareStrict.bind(null,e))||r.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),r;throw new f("enum expects an array",t)},n.const=function(e,t,r,n){return void 0===e?null:(r=new p(e,t,r,n),l.deepCompareStrict(t.const,e)||r.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),r)},n.not=n.disallow=function(t,r,n,o){var a,e,i=this;return void 0!==t&&(a=new p(t,r,n,o),e=r.not||r.disallow)?((e=Array.isArray(e)?e:[e]).forEach(function(e){i.testType(t,r,n,o,e)&&(e=e&&(e.$id||e.id)||e,a.addError({name:"not",argument:e,message:"is of prohibited type "+e}))}),a):null},e.exports=r},677:(e,t,r)=>{var o=r(835),n=t.ValidationError=function(e,t,r,n,o,a){Array.isArray(n)?(this.path=n,this.property=n.reduce(function(e,t){return e+c(t)},"instance")):void 0!==n&&(this.property=n),e&&(this.message=e),r&&(n=r.$id||r.id,this.schema=n||r),void 0!==t&&(this.instance=t),this.name=o,this.argument=a,this.stack=this.toString()},r=(n.prototype.toString=function(){return this.property+" "+this.message},t.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.options=r,this.path=n.path,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.throwFirst=r&&r.throwFirst,this.throwAll=r&&r.throwAll,this.disableFormat=r&&!0===r.disableFormat});function a(e,t){return t+": "+e.toString()+"\n"}function i(e){Error.captureStackTrace&&Error.captureStackTrace(this,i),this.instance=e.instance,this.schema=e.schema,this.options=e.options,this.errors=e.errors}r.prototype.addError=function(e){var t;if("string"==typeof e)t=new n(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new n(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new i(this);if(this.throwError)throw t;return t},r.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&(this.errors=this.errors.concat(e.errors))},r.prototype.toString=function(e){return this.errors.map(a).join("")},Object.defineProperty(r.prototype,"valid",{get:function(){return!this.errors.length}}),(((e.exports.ValidatorResultError=i).prototype=new Error).constructor=i).prototype.name="Validation Error";var r=t.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)},s=(r.prototype=Object.create(Error.prototype,{constructor:{value:r,enumerable:!1},name:{value:"SchemaError",enumerable:!1}}),t.SchemaContext=function(e,t,r,n,o){this.schema=e,this.options=t,Array.isArray(r)?(this.path=r,this.propertyPath=r.reduce(function(e,t){return e+c(t)},"instance")):this.propertyPath=r,this.base=n,this.schemas=o}),l=(s.prototype.resolve=function(e){return o.resolve(this.base,e)},s.prototype.makeChild=function(e,t){var t=void 0===t?this.path:this.path.concat([t]),r=e.$id||e.id,n=o.resolve(this.base,r||""),t=new s(e,this.options,t,n,Object.create(this.schemas));return r&&!t.schemas[n]&&(t.schemas[n]=e),t},t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/}),c=(l.regexp=l.regex,l.pattern=l.regex,l.ipv4=l["ip-address"],t.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==l[t]){if(l[t]instanceof RegExp)return l[t].test(e);if("function"==typeof l[t])return l[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0},t.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e});function u(e,t){var r=Array.isArray(t),n=r?[]:{};return r?(n=n.concat(e=e||[]),t.forEach(function(e,t,r,n){"object"==typeof r?t[n]=u(e[n],r):-1===e.indexOf(r)&&t.push(r)}.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(function(e,t,r){t[r]=e[r]}.bind(null,e,n)),Object.keys(t).forEach(function(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=u(e[n],t[n]):r[n]=t[n]}.bind(null,e,t,n))),n}function p(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}t.deepCompareStrict=function r(n,o){var e,t;return typeof n==typeof o&&(Array.isArray(n)?!!Array.isArray(o)&&n.length===o.length&&n.every(function(e,t){return r(n[t],o[t])}):"object"==typeof n&&n&&o?(e=Object.keys(n),t=Object.keys(o),e.length===t.length&&e.every(function(e){return r(n[e],o[e])})):n===o)},e.exports.deepMerge=u,t.objectGetPath=function(e,t){for(var r=t.split("/").slice(1);"string"==typeof(n=r.shift());){var n=decodeURIComponent(n.replace(/~0/,"~").replace(/~1/g,"/"));if(!(n in e))return;e=e[n]}return e},t.encodePath=function(e){return e.map(p).join("")},t.getDecimalPlaces=function(e){var t=0;if(!isNaN(e)){e=(e="number"!=typeof e?Number(e):e).toString().split("e");if(2===e.length){if("-"!==e[1][0])return t;t=Number(e[1].slice(1))}e=e[0].split(".");2===e.length&&(t+=e[1].length)}return t},t.isSchema=function(e){return"object"==typeof e&&e||"boolean"==typeof e}},304:(e,t,r)=>{e.exports.Validator=r(482),r(677).ValidatorResult,r(677).ValidatorResultError,r(677).ValidationError,r(677).SchemaError,r(911),r(911).S},911:(e,t,r)=>{var l=r(835),c=r(677);function u(e,t){this.id=e,this.ref=t}e.exports.S=function(e,t){function n(e,t){if(t&&"object"==typeof t)if(t.$ref){var r=l.resolve(e,t.$ref);s[r]=s[r]?s[r]+1:0}else{r=t.$id||t.id,r=r?l.resolve(e,r):e;if(r){if(r.indexOf("#")<0&&(r+="#"),i[r]){if(c.deepCompareStrict(i[r],t))return i[r];throw new Error("Schema <"+r+"> already exists with different definition")}i[r]=t,"#"==r[r.length-1]&&(i[r.substring(0,r.length-1)]=t)}o(r+"/items",Array.isArray(t.items)?t.items:[t.items]),o(r+"/extends",Array.isArray(t.extends)?t.extends:[t.extends]),n(r+"/additionalItems",t.additionalItems),a(r+"/properties",t.properties),n(r+"/additionalProperties",t.additionalProperties),a(r+"/definitions",t.definitions),a(r+"/patternProperties",t.patternProperties),a(r+"/dependencies",t.dependencies),o(r+"/disallow",t.disallow),o(r+"/allOf",t.allOf),o(r+"/anyOf",t.anyOf),o(r+"/oneOf",t.oneOf),n(r+"/not",t.not)}}function o(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)n(e+"/"+r,t[r])}function a(e,t){if(t&&"object"==typeof t)for(var r in t)n(e+"/"+r,t[r])}var i={},s={};return n(e,t),new u(i,s)}},482:(e,t,r)=>{function n(){this.customFormats=Object.create(n.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(o),this.attributes=Object.create(p.validators)}var c=r(835),p=r(140),f=r(677),u=r(911).S,h=f.ValidatorResult,d=f.ValidatorResultError,y=f.SchemaError,m=f.SchemaContext;function g(e){e="string"==typeof e?e:e.$ref;return"string"==typeof e&&e}n.prototype.customFormats={},n.prototype.schemas=null,n.prototype.types=null,n.prototype.attributes=null,n.prototype.unresolvedRefs=null,n.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n,o=u(t||"/",e),t=t||e.$id||e.id;for(n in o.id)this.schemas[n]=o.id[n];for(n in o.ref)this.unresolvedRefs.push(n);return this.unresolvedRefs=this.unresolvedRefs.filter(function(e){return void 0===r.schemas[e]}),this.schemas[t]},n.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},n.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},n.prototype.setSchemas=function(e){this.schemas=e},n.prototype.getSchema=function(e){return this.schemas[e]},n.prototype.validate=function(e,t,r,n){if("boolean"!=typeof t&&"object"!=typeof t||null===t)throw new y("Expected `schema` to be an object or boolean");var o,a=t.$id||t.id,a=c.resolve((r=r||{}).base||"/",a||"");if(!n){(n=new m(t,r,[],a,Object.create(this.schemas))).schemas[a]||(n.schemas[a]=t);var i,s=u(a,t);for(i in s.id){var l=s.id[i];n.schemas[i]=l}}if(r.required&&void 0===e)(o=new h(e,t,r,n)).addError("is required, but is undefined");else{if(!(o=this.validateSchema(e,t,r,n)))throw new Error("Result undefined");if(r.throwAll&&o.errors.length)throw new d(o)}return o},n.prototype.validateSchema=function(e,t,r,n){var o=new h(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");t.extends&&(Array.isArray(t.extends)?(t.extends.forEach(this.schemaTraverser.bind(this,i={schema:t,ctx:n})),t=i.schema,i.schema=null,i.ctx=null,i=null):t=f.deepMerge(t,this.superResolve(t.extends,n)));var a,i=g(t);if(i)return i=this.resolve(t,i,n),a=new m(i.subschema,r,n.path,i.switchSchema,n.schemas),this.validateSchema(e,i.subschema,r,a);var s,l=r&&r.skipAttributes||[];for(s in t)if(!p.ignoreProperties[s]&&l.indexOf(s)<0){var c=null,u=this.attributes[s];if(u)c=u.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new y("Unsupported attribute: "+s,t);c&&o.importErrors(c)}return"function"==typeof r.rewrite&&(i=r.rewrite.call(this,e,t,r,n),o.instance=i),o},n.prototype.schemaTraverser=function(e,t){e.schema=f.deepMerge(e.schema,this.superResolve(t,e.ctx))},n.prototype.superResolve=function(e,t){var r=g(e);return r?this.resolve(e,r,t).subschema:e},n.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var n=c.parse(t),n=n&&n.hash,o=n&&n.length&&t.substr(0,t.length-n.length);if(!o||!r.schemas[o])throw new y("no such schema <"+t+">",e);r=f.objectGetPath(r.schemas[o],n.substr(1));if(void 0===r)throw new y("no such schema "+n+" located in <"+o+">",e);return{subschema:r,switchSchema:t}},n.prototype.testType=function(e,t,r,n,o){if(void 0!==o){if(null===o)throw new y('Unexpected null in "type" keyword');return"function"==typeof this.types[o]?this.types[o].call(this,e):!o||"object"!=typeof o||void 0===(e=this.validateSchema(e,o,r,n))||!(e&&e.errors.length)}};var o=n.prototype.types={string:function(e){return"string"==typeof e},number:function(e){return"number"==typeof e&&isFinite(e)},integer:function(e){return"number"==typeof e&&e%1==0},boolean:function(e){return"boolean"==typeof e},array:function(e){return Array.isArray(e)},null:function(e){return null===e},date:function(e){return e instanceof Date},any:function(e){return!0},object:function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)}};e.exports=n},859:(r,n,w)=>{var e="function"==typeof Map&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,A=e&&t&&"function"==typeof t.get?t.get:null,S=e&&Map.prototype.forEach,t="function"==typeof Set&&Set.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,F=t&&e&&"function"==typeof e.get?e.get:null,x=t&&Set.prototype.forEach,E="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,_="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,j="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Q=Boolean.prototype.valueOf,a=Object.prototype.toString,X=Function.prototype.toString,Y=String.prototype.match,O=String.prototype.slice,P=String.prototype.replace,i=String.prototype.toUpperCase,I=String.prototype.toLowerCase,u=RegExp.prototype.test,R=Array.prototype.concat,T=Array.prototype.join,ee=Array.prototype.slice,o=Math.floor,C="function"==typeof BigInt?BigInt.prototype.valueOf:null,p=Object.getOwnPropertySymbols,z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,$="function"==typeof Symbol&&"object"==typeof Symbol.iterator,k="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,D=Object.prototype.propertyIsEnumerable,Z=("function"==typeof Reflect?Reflect:Object).getPrototypeOf||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function M(e,t){if(e===1/0||e===-1/0||e!=e||e&&-1e3<e&&e<1e3||u.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-o(-e):o(e);if(n!==e)return e=String(n),n=O.call(t,e.length+1),P.call(e,r,"$&_")+"."+P.call(P.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}return P.call(t,r,"$&_")}var N=w(634),e=N.custom,V=ne(e)?e:null,U={__proto__:null,double:'"',single:"'"},te={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function q(e,t,r){r=r.quoteStyle||t,t=U[r];return t+e+t}function L(e){return!("[object Array]"!==W(e)||k&&"object"==typeof e&&k in e)}function re(e){return!("[object RegExp]"!==W(e)||k&&"object"==typeof e&&k in e)}function ne(e){if($)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return 1;if(e&&"object"==typeof e&&z)try{return z.call(e),1}catch(e){}}r.exports=function n(r,e,o,a){var i=e||{};if(B(i,"quoteStyle")&&!B(U,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(B(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');e=!B(i,"customInspect")||i.customInspect;if("boolean"!=typeof e&&"symbol"!==e)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(B(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&0<i.indent))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(B(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var t=i.numericSeparator;if(void 0===r)return"undefined";if(null===r)return"null";if("boolean"==typeof r)return r?"true":"false";if("string"==typeof r)return function e(t,r){if(t.length>r.maxStringLength)return n=t.length-r.maxStringLength,n="... "+n+" more character"+(1<n?"s":""),e(O.call(t,0,r.maxStringLength),r)+n;var n=te[r.quoteStyle||"single"];return n.lastIndex=0,q(P.call(P.call(t,n,"\\$1"),/[\x00-\x1f]/g,ae),"single",r)}(r,i);if("number"==typeof r)return 0===r?0<1/0/r?"0":"-0":(y=String(r),t?M(r,y):y);if("bigint"==typeof r)return y=String(r)+"n",t?M(r,y):y;t=void 0===i.depth?5:i.depth;if(t<=(o=void 0===o?0:o)&&0<t&&"object"==typeof r)return L(r)?"[Array]":"[Object]";var s,l,c,u,p,f,h,d,y=(e=>{var t;if("\t"===i.indent)t="\t";else{if(!("number"==typeof i.indent&&0<i.indent))return null;t=T.call(Array(i.indent+1)," ")}return{base:t,prev:T.call(Array(e+1),t)}})(o);if(void 0===a)a=[];else if(0<=oe(a,r))return"[Circular]";function m(e,t,r){return t&&(a=ee.call(a)).push(t),r?(t={depth:i.depth},B(i,"quoteStyle")&&(t.quoteStyle=i.quoteStyle),n(e,t,o+1,a)):n(e,i,o+1,a)}if("function"==typeof r&&!re(r))return"[Function"+((s=r.name||((s=Y.call(X.call(r),/^function\s*([\w$]+)/))?s[1]:null))?": "+s:" (anonymous)")+"]"+(0<(c=K(r,m)).length?" { "+T.call(c,", ")+" }":"");if(ne(r))return c=$?P.call(String(r),/^(Symbol\(.*\))_[^)]*$/,"$1"):z.call(r),"object"!=typeof r||$?c:G(c);if((c=r)&&"object"==typeof c&&("undefined"!=typeof HTMLElement&&c instanceof HTMLElement||"string"==typeof c.nodeName&&"function"==typeof c.getAttribute)){for(var g="<"+I.call(String(r.nodeName)),v=r.attributes||[],b=0;b<v.length;b++)g+=" "+v[b].name+"="+q((l=v[b].value,P.call(String(l),/"/g,"&quot;")),"double",i);return g+=">",r.childNodes&&r.childNodes.length&&(g+="..."),g+"</"+I.call(String(r.nodeName))+">"}if(L(r))return 0===r.length?"[]":(c=K(r,m),y&&!(e=>{for(var t=0;t<e.length;t++)if(0<=oe(e[t],"\n"))return;return 1})(c)?"["+J(c,y)+"]":"[ "+T.call(c,", ")+" ]");if(!("[object Error]"!==W(c=r)||k&&"object"==typeof c&&k in c))return f=K(r,m),"cause"in Error.prototype||!("cause"in r)||D.call(r,"cause")?0===f.length?"["+String(r)+"]":"{ ["+String(r)+"] "+T.call(f,", ")+" }":"{ ["+String(r)+"] "+T.call(R.call("[cause]: "+m(r.cause),f),", ")+" }";if("object"==typeof r&&e){if(V&&"function"==typeof r[V]&&N)return N(r,{depth:t-o});if("symbol"!==e&&"function"==typeof r.inspect)return r.inspect()}return(e=>{if(A&&e&&"object"==typeof e)try{A.call(e);try{F.call(e)}catch(e){return 1}return e instanceof Map}catch(e){}})(r)?(u=[],S&&S.call(r,function(e,t){u.push(m(t,r,!0)+" => "+m(e,r))}),ie("Map",A.call(r),u,y)):(e=>{if(F&&e&&"object"==typeof e)try{F.call(e);try{A.call(e)}catch(e){return 1}return e instanceof Set}catch(e){}})(r)?(p=[],x&&x.call(r,function(e){p.push(m(e,r))}),ie("Set",F.call(r),p,y)):(e=>{if(E&&e&&"object"==typeof e)try{E.call(e,E);try{_.call(e,_)}catch(e){return 1}return e instanceof WeakMap}catch(e){}})(r)?H("WeakMap"):(e=>{if(_&&e&&"object"==typeof e)try{_.call(e,_);try{E.call(e,E)}catch(e){return 1}return e instanceof WeakSet}catch(e){}})(r)?H("WeakSet"):(e=>{if(j&&e&&"object"==typeof e)try{return j.call(e),1}catch(e){}})(r)?H("WeakRef"):"[object Number]"!==W(f=r)||k&&"object"==typeof f&&k in f?(e=>{if(e&&"object"==typeof e&&C)try{return C.call(e),1}catch(e){}})(r)?G(m(C.call(r))):"[object Boolean]"!==W(t=r)||k&&"object"==typeof t&&k in t?"[object String]"!==W(e=r)||k&&"object"==typeof e&&k in e?"undefined"!=typeof window&&r===window?"{ [object Window] }":"undefined"!=typeof globalThis&&r===globalThis||void 0!==w.g&&r===w.g?"{ [object globalThis] }":("[object Date]"!==W(t=r)||k&&"object"==typeof t&&k in t)&&!re(r)?(e=K(r,m),t=Z?Z(r)===Object.prototype:r instanceof Object||r.constructor===Object,h=r instanceof Object?"":"null prototype",d=!t&&k&&Object(r)===r&&k in r?O.call(W(r),8,-1):h?"Object":"",t=(!t&&"function"==typeof r.constructor&&r.constructor.name?r.constructor.name+" ":"")+(d||h?"["+T.call(R.call([],d||[],h||[]),": ")+"] ":""),0===e.length?t+"{}":y?t+"{"+J(e,y)+"}":t+"{ "+T.call(e,", ")+" }"):String(r):G(m(String(r))):G(Q.call(r)):G(m(Number(r)))};var s=Object.prototype.hasOwnProperty||function(e){return e in this};function B(e,t){return s.call(e,t)}function W(e){return a.call(e)}function oe(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function ae(e){var e=e.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+i.call(e.toString(16))}function G(e){return"Object("+e+")"}function H(e){return e+" { ? }"}function ie(e,t,r,n){return e+" ("+t+") {"+(n?J(r,n):T.call(r,", "))+"}"}function J(e,t){var r;return 0===e.length?"":(r="\n"+t.prev+t.base)+T.call(e,","+r)+"\n"+t.prev}function K(e,t){var r=L(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=B(e,o)?t(e[o],e):""}var a,i="function"==typeof p?p(e):[];if($)for(var s={},l=0;l<i.length;l++)s["$"+i[l]]=i[l];for(a in e)!B(e,a)||r&&String(Number(a))===a&&a<e.length||$&&s["$"+a]instanceof Symbol||(u.call(/[^\w$]/,a)?n.push(t(a,e)+": "+t(e[a],e)):n.push(a+": "+t(e[a],e)));if("function"==typeof p)for(var c=0;c<i.length;c++)D.call(e,i[c])&&n.push("["+t(i[c])+"]: "+t(e[i[c]],e));return n}},765:e=>{var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},373:(e,t,r)=>{var n=r(636),o=r(642),r=r(765);e.exports={formats:r,parse:o,stringify:n}},642:(e,t,r)=>{function g(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e}var p=r(720),v=Object.prototype.hasOwnProperty,f=Array.isArray,h={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:p.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1};e.exports=function(e,t){var r=(e=>{if(!e)return h;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!=e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?h:e).charset,r=(void 0===e.duplicates?h:e).duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||h.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:h.allowEmptyArrays,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:h).allowPrototypes,allowSparse:("boolean"==typeof e.allowSparse?e:h).allowSparse,arrayLimit:("number"==typeof e.arrayLimit?e:h).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:h).charsetSentinel,comma:("boolean"==typeof e.comma?e:h).comma,decodeDotInKeys:("boolean"==typeof e.decodeDotInKeys?e:h).decodeDotInKeys,decoder:("function"==typeof e.decoder?e:h).decoder,delimiter:("string"==typeof e.delimiter||p.isRegExp(e.delimiter)?e:h).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:h.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:h).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:h).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:h).plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:h.strictDepth,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:h).strictNullHandling}})(t);if(""===e||null==e)return r.plainObjects?{__proto__:null}:{};for(var n="string"==typeof e?((e,t)=>{var r,n,o,a,i={__proto__:null},e=(e=t.ignoreQueryPrefix?e.replace(/^\?/,""):e).replace(/%5B/gi,"[").replace(/%5D/gi,"]"),s=t.parameterLimit===1/0?void 0:t.parameterLimit,l=e.split(t.delimiter,s),c=-1,u=t.charset;if(t.charsetSentinel)for(r=0;r<l.length;++r)0===l[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[r]?u="utf-8":"utf8=%26%2310003%3B"===l[r]&&(u="iso-8859-1"),c=r,r=l.length);for(r=0;r<l.length;++r)r!==c&&((o=-1===(o=-1===(o=(a=l[r]).indexOf("]="))?a.indexOf("="):o+1)?(n=t.decoder(a,h.decoder,u,"key"),t.strictNullHandling?null:""):(n=t.decoder(a.slice(0,o),h.decoder,u,"key"),p.maybeMap(g(a.slice(o+1),t),function(e){return t.decoder(e,h.decoder,u,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===u&&(o=String(o).replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),-1<a.indexOf("[]=")&&(o=f(o)?[o]:o),(a=v.call(i,n))&&"combine"===t.duplicates?i[n]=p.combine(i[n],o):a&&"last"!==t.duplicates||(i[n]=o));return i})(e,r):e,o=r.plainObjects?{__proto__:null}:{},a=Object.keys(n),i=0;i<a.length;++i)var s=a[i],s=((e,t,r,n)=>{if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,i=0<r.depth&&/(\[[^[\]]*])/.exec(o),e=i?o.slice(0,i.index):o,s=[];if(e){if(!r.plainObjects&&v.call(Object.prototype,e)&&!r.allowPrototypes)return;s.push(e)}for(var l=0;0<r.depth&&null!==(i=a.exec(o))&&l<r.depth;){if(l+=1,!r.plainObjects&&v.call(Object.prototype,i[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(i[1])}if(i){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");s.push("["+o.slice(i.index)+"]")}for(var c=s,u=r,p=n?t:g(t,u),f=c.length-1;0<=f;--f){var h,d,y,m=c[f];"[]"===m&&u.parseArrays?h=u.allowEmptyArrays&&(""===p||u.strictNullHandling&&null===p)?[]:[].concat(p):(h=u.plainObjects?{__proto__:null}:{},d="["===m.charAt(0)&&"]"===m.charAt(m.length-1)?m.slice(1,-1):m,d=u.decodeDotInKeys?d.replace(/%2E/g,"."):d,y=parseInt(d,10),u.parseArrays||""!==d?!isNaN(y)&&m!==d&&String(y)===d&&0<=y&&u.parseArrays&&y<=u.arrayLimit?(h=[])[y]=p:"__proto__"!==d&&(h[d]=p):h={0:p}),p=h}return p}})(s,n[s],r,"string"==typeof e),o=p.merge(o,s,r);return!0===r.allowSparse?o:p.compact(o)}},636:(e,t,r)=>{function R(e,t){n.apply(e,$(t)?t:[t])}function T(e,t,r,n,o,a,i,s,l,c,u,p,f,h,d,y,m,g){for(var v=e,b=g,w=0,A=!1;void 0!==(b=b.get(D))&&!A;){var S=b.get(e);if(w+=1,void 0!==S){if(S===w)throw new RangeError("Cyclic object value");A=!0}void 0===b.get(D)&&(w=0)}if("function"==typeof c?v=c(t,v):v instanceof Date?v=f(v):"comma"===r&&$(v)&&(v=z.maybeMap(v,function(e){return e instanceof Date?f(e):e})),null===v){if(a)return l&&!y?l(t,k.encoder,m,"key",h):t;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v||z.isBuffer(v))return l?[d(y?t:l(t,k.encoder,m,"key",h))+"="+d(l(v,k.encoder,m,"value",h))]:[d(t)+"="+d(String(v))];var F=[];if(void 0!==v){x="comma"===r&&$(v)?[{value:0<(v=y&&l?z.maybeMap(v,l):v).length?v.join(",")||null:void 0}]:$(c)?c:(E=Object.keys(v),u?E.sort(u):E);var x,E=s?String(t).replace(/\./g,"%2E"):String(t),_=n&&$(v)&&1===v.length?E+"[]":E;if(o&&$(v)&&0===v.length)return _+"[]";for(var j=0;j<x.length;++j){var O,P=x[j],I="object"==typeof P&&P&&void 0!==P.value?P.value:v[P];i&&null===I||(P=p&&s?String(P).replace(/\./g,"%2E"):String(P),P=$(v)?"function"==typeof r?r(_,P):_:_+(p?"."+P:"["+P+"]"),g.set(e,w),(O=C()).set(D,g),R(F,T(I,P,r,n,o,a,i,s,"comma"===r&&y&&$(v)?null:l,c,u,p,f,h,d,y,m,O)))}}return F}var C=r(920),z=r(720),f=r(765),h=Object.prototype.hasOwnProperty,d={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},$=Array.isArray,n=Array.prototype.push,o=Date.prototype.toISOString,r=f.default,k={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:z.encode,encodeValuesOnly:!1,filter:void 0,format:r,formatter:f.formatters[r],indices:!1,serializeDate:function(e){return o.call(e)},skipNulls:!1,strictNullHandling:!1},D={};e.exports=function(e,t){var r=e,n=(e=>{if(!e)return k;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!=e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||k.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=f.default;if(void 0!==e.format){if(!h.call(f.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,o=f.formatters[r],a=k.filter;if("function"!=typeof e.filter&&!$(e.filter)||(a=e.filter),n=e.arrayFormat in d?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":k.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var i=void 0===e.allowDots?!0===e.encodeDotInKeys||k.allowDots:!!e.allowDots;return{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:k).addQueryPrefix,allowDots:i,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:k.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:k).charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:(void 0===e.delimiter?k:e).delimiter,encode:("boolean"==typeof e.encode?e:k).encode,encodeDotInKeys:("boolean"==typeof e.encodeDotInKeys?e:k).encodeDotInKeys,encoder:("function"==typeof e.encoder?e:k).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:k).encodeValuesOnly,filter:a,format:r,formatter:o,serializeDate:("function"==typeof e.serializeDate?e:k).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:k).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:k).strictNullHandling}})(t),o=("function"==typeof n.filter?r=(0,n.filter)("",r):$(n.filter)&&(s=n.filter),[]);if("object"!=typeof r||null===r)return"";var a=d[n.arrayFormat],i="comma"===a&&n.commaRoundTrip,s=s||Object.keys(r);n.sort&&s.sort(n.sort);for(var l=C(),c=0;c<s.length;++c){var u=s[c],p=r[u];n.skipNulls&&null===p||R(o,T(p,u,a,i,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}e=o.join(n.delimiter),t=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?t+="utf8=%26%2310003%3B&":t+="utf8=%E2%9C%93&"),0<e.length?t+e:""}},720:(e,t,r)=>{function s(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}var f=r(765),l=Object.prototype.hasOwnProperty,y=Array.isArray,h=(()=>{for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();e.exports={arrayToObject:s,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],i=Object.keys(a),s=0;s<i.length;++s){var l=i[s],c=a[l];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:a,prop:l}),r.push(c))}for(var u=t;1<u.length;){var p=u.pop(),f=p.obj[p.prop];if(y(f)){for(var h=[],d=0;d<f.length;++d)void 0!==f[d]&&h.push(f[d]);p.obj[p.prop]=h}}return e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,n,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",s=0;s<a.length;s+=1024){for(var l=1024<=a.length?a.slice(s,s+1024):a,c=[],u=0;u<l.length;++u){var p=l.charCodeAt(u);45===p||46===p||95===p||126===p||48<=p&&p<=57||65<=p&&p<=90||97<=p&&p<=122||o===f.RFC1738&&(40===p||41===p)?c[c.length]=l.charAt(u):p<128?c[c.length]=h[p]:p<2048?c[c.length]=h[192|p>>6]+h[128|63&p]:p<55296||57344<=p?c[c.length]=h[224|p>>12]+h[128|p>>6&63]+h[128|63&p]:(u+=1,p=65536+((1023&p)<<10|1023&l.charCodeAt(u)),c[c.length]=h[240|p>>18]+h[128|p>>12&63]+h[128|p>>6&63]+h[128|63&p])}i+=c.join("")}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(y(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function n(o,a,i){if(!a)return o;if("object"!=typeof a&&"function"!=typeof a){if(y(o))o.push(a);else{if(!o||"object"!=typeof o)return[o,a];(i&&(i.plainObjects||i.allowPrototypes)||!l.call(Object.prototype,a))&&(o[a]=!0)}return o}var e;return o&&"object"==typeof o?(y(e=o)&&!y(a)&&(e=s(o,i)),y(o)&&y(a)?(a.forEach(function(e,t){var r;l.call(o,t)?(r=o[t])&&"object"==typeof r&&e&&"object"==typeof e?o[t]=n(r,e,i):o.push(e):o[t]=e}),o):Object.keys(a).reduce(function(e,t){var r=a[t];return l.call(e,t)?e[t]=n(e[t],r,i):e[t]=r,e},e)):[o].concat(a)}}},897:(e,t,r)=>{var n=r(453),i=r(41),s=r(592)(),l=r(795),c=r(675),u=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new c("`fn` is not a function");if("number"!=typeof t||t<0||4294967295<t||u(t)!==t)throw new c("`length` must be a positive 32-bit integer");var r,n=2<arguments.length&&!!arguments[2],o=!0,a=!0;return"length"in e&&l&&((r=l(e,"length"))&&!r.configurable&&(o=!1),r)&&!r.writable&&(a=!1),!o&&!a&&n||(s?i(e,"length",t,!0,!0):i(e,"length",t)),e}},920:(e,t,r)=>{function s(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r}var n=r(453),o=r(75),l=r(859),c=r(675),u=n("%WeakMap%",!0),p=n("%Map%",!0),f=o("WeakMap.prototype.get",!0),h=o("WeakMap.prototype.set",!0),d=o("WeakMap.prototype.has",!0),y=o("Map.prototype.get",!0),m=o("Map.prototype.set",!0),g=o("Map.prototype.has",!0);e.exports=function(){var o,a,i,t={assert:function(e){if(!t.has(e))throw new c("Side channel does not contain "+l(e))},get:function(e){if(u&&e&&("object"==typeof e||"function"==typeof e)){if(o)return f(o,e)}else if(p){if(a)return y(a,e)}else if(i)return(e=s(i,e))&&e.value},has:function(e){if(u&&e&&("object"==typeof e||"function"==typeof e)){if(o)return d(o,e)}else if(p){if(a)return g(a,e)}else if(i)return!!s(i,e);return!1},set:function(e,t){var r,n;u&&e&&("object"==typeof e||"function"==typeof e)?(o=o||new u,h(o,e,t)):p?(a=a||new p,m(a,e,t)):(t=t,(n=s(r=i=i||{key:{},next:null},e=e))?n.value=t:r.next={key:e,next:r.next,value:t})}};return t}},270:function(e,t,r){var n,o,m,g,a,i,s,l,v,b;function w(e){throw new RangeError(l[e])}function c(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";return 1<r.length&&(n=r[0]+"@",e=r[1]),n+c((e=e.replace(s,".")).split("."),t).join(".")}function A(e){for(var t,r,n=[],o=0,a=e.length;o<a;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<a?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function d(e){return c(e,function(e){var t="";return 65535<e&&(t+=b((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+b(e)}).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function F(e,t,r){var n=0;for(e=r?v(e/700):e>>1,e+=v(e/t);455<e;n+=g)e=v(e/35);return v(n+36*e/(e+38))}function p(e){var t,r,n,o,a,i,s,l,c=[],u=e.length,p=0,f=128,h=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)128<=e.charCodeAt(n)&&w("not-basic"),c.push(e.charCodeAt(n));for(o=0<r?r+1:0;o<u;){for(a=p,i=1,s=g;u<=o&&w("invalid-input"),((l=(l=e.charCodeAt(o++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:g)>=g||l>v((m-p)/i))&&w("overflow"),p+=l*i,!(l<(l=s<=h?1:h+26<=s?26:s-h));s+=g)i>v(m/(l=g-l))&&w("overflow"),i*=l;h=F(p-a,t=c.length+1,0==a),v(p/t)>m-f&&w("overflow"),f+=v(p/t),p%=t,c.splice(p++,0,f)}return d(c)}function f(e){for(var t,r,n,o,a,i,s,l,c,u=[],p=(e=A(e)).length,f=128,h=0,d=72,y=0;y<p;++y)(i=e[y])<128&&u.push(b(i));for(t=r=u.length,r&&u.push("-");t<p;){for(n=m,y=0;y<p;++y)(i=e[y])>=f&&i<n&&(n=i);for(n-f>v((m-h)/(s=t+1))&&w("overflow"),h+=(n-f)*s,f=n,y=0;y<p;++y)if((i=e[y])<f&&++h>m&&w("overflow"),i==f){for(o=h,a=g;!(o<(l=a<=d?1:d+26<=a?26:a-d));a+=g)u.push(b(S(l+(c=o-l)%(l=g-l),0))),o=v(c/l);u.push(b(S(o,0))),d=F(h,s,t==r),h=0,++t}++h,++f}return u.join("")}e=r.nmd(e),t&&t.nodeType,e&&e.nodeType,(n="object"==typeof r.g&&r.g).global!==n&&n.window!==n&&n.self,m=2147483647,g=36,a=/^xn--/,i=/[^\x20-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,b=String.fromCharCode,o={version:"1.4.1",ucs2:{decode:A,encode:d},decode:p,encode:f,toASCII:function(e){return u(e,function(e){return i.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return u(e,function(e){return a.test(e)?p(e.slice(4).toLowerCase()):e})}},void 0!==(n=function(){return o}.call(t,r,t,e))&&(e.exports=n)},835:(e,t,r)=>{var F=r(270);function A(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var x=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,E=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),_=["'"].concat(o),j=["%","/","?",";","#"].concat(_),O=["/","?","#"],P=/^[+a-z0-9A-Z_-]{0,63}$/,I=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},z=r(373);function a(e,t,r){var n;return e&&"object"==typeof e&&e instanceof A?e:((n=new A).parse(e,t,r),n)}A.prototype.parse=function(e,t,r){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),n=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(n);o[0]=o[0].replace(/\\/g,"/");var a=(a=e=o.join(n)).trim();if(!r&&1===e.split("#").length){o=E.exec(a);if(o)return this.path=a,this.href=a,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?z.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var i,n=x.exec(a);if(n&&(i=(n=n[0]).toLowerCase(),this.protocol=i,a=a.substr(n.length)),!(r||n||a.match(/^\/\/[^@/]+@[^@/]+/))||!(w="//"===a.substr(0,2))||n&&T[n]||(a=a.substr(2),this.slashes=!0),!T[n]&&(w||n&&!C[n])){for(var s,l=-1,c=0;c<O.length;c++)-1!==(s=a.indexOf(O[c]))&&(-1===l||s<l)&&(l=s);for(-1!==(e=-1===l?a.lastIndexOf("@"):a.lastIndexOf("@",l))&&(o=a.slice(0,e),a=a.slice(e+1),this.auth=decodeURIComponent(o)),l=-1,c=0;c<j.length;c++)-1!==(s=a.indexOf(j[c]))&&(-1===l||s<l)&&(l=s);-1===l&&(l=a.length),this.host=a.slice(0,l),a=a.slice(l),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var u=this.hostname.split(/\./),p=(c=0,u.length);c<p;c++){var f=u[c];if(f&&!f.match(P)){for(var h="",d=0,y=f.length;d<y;d++)127<f.charCodeAt(d)?h+="x":h+=f[d];if(!h.match(P)){var m=u.slice(0,c),g=u.slice(c+1),v=f.match(I);v&&(m.push(v[1]),g.unshift(v[2])),g.length&&(a="/"+g.join(".")+a),this.hostname=m.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=F.toASCII(this.hostname));var b=this.port?":"+this.port:"",w=this.hostname||"";this.host=w+b,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0])&&(a="/"+a)}if(!R[i])for(c=0,p=_.length;c<p;c++){var A,S=_[c];-1!==a.indexOf(S)&&((A=encodeURIComponent(S))===S&&(A=escape(S)),a=a.split(S).join(A))}n=a.indexOf("#"),-1!==n&&(this.hash=a.substr(n),a=a.slice(0,n)),e=a.indexOf("?");return-1!==e?(this.search=a.substr(e),this.query=a.substr(e+1),t&&(this.query=z.parse(this.query)),a=a.slice(0,e)):t&&(this.search="",this.query={}),a&&(this.pathname=a),C[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(b=this.pathname||"",o=this.search||"",this.path=b+o),this.href=this.format(),this},A.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",o=!1,a="",e=(this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(o+=":"+this.port),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(a=z.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1})),this.search||a&&"?"+a||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o=o||"",n&&"#"!==n.charAt(0)&&(n="#"+n),e&&"?"!==e.charAt(0)&&(e="?"+e),t+o+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+n},A.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},A.prototype.resolveObject=function(e){"string"==typeof e&&((f=new A).parse(e,!1,!0),e=f);for(var t=new A,r=Object.keys(this),n=0;n<r.length;n++){var o=r[n];t[o]=this[o]}if(t.hash=e.hash,""!==e.href)if(e.slashes&&!e.protocol){for(var a=Object.keys(e),i=0;i<a.length;i++){var s=a[i];"protocol"!==s&&(t[s]=e[s])}C[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname)}else if(e.protocol&&e.protocol!==t.protocol)if(C[e.protocol]){if(t.protocol=e.protocol,e.host||T[e.protocol])t.pathname=e.pathname;else{for(var l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==l[0]&&l.unshift(""),l.length<2&&l.unshift(""),t.pathname=l.join("/")}t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(f=t.pathname||"",h=t.search||"",t.path=f+h),t.slashes=t.slashes||e.slashes}else for(var c=Object.keys(e),u=0;u<c.length;u++){var p=c[u];t[p]=e[p]}else{var f=t.pathname&&"/"===t.pathname.charAt(0),h=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=h||f||t.host&&e.pathname,d=f,y=t.pathname&&t.pathname.split("/")||[],m=(l=e.pathname&&e.pathname.split("/")||[],t.protocol&&!C[t.protocol]);if(m&&(t.hostname="",t.port=null,t.host&&(""===y[0]?y[0]=t.host:y.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===l[0]?l[0]=e.host:l.unshift(e.host)),e.host=null),f=f&&(""===l[0]||""===y[0])),h)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,y=l;else if(l.length)(y=y||[]).pop(),y=y.concat(l),t.search=e.search,t.query=e.query;else if(null!=e.search)return m&&(t.host=y.shift(),t.hostname=t.host,w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.hostname=w.shift(),t.host=t.hostname),t.search=e.search,t.query=e.query,null===t.pathname&&null===t.search||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(y.length){for(var g=y.slice(-1)[0],h=(t.host||e.host||1<y.length)&&("."===g||".."===g)||""===g,v=0,b=y.length;0<=b;b--)"."===(g=y[b])?y.splice(b,1):".."===g?(y.splice(b,1),v++):v&&(y.splice(b,1),v--);if(!f&&!d)for(;v--;)y.unshift("..");!f||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),h&&"/"!==y.join("/").substr(-1)&&y.push("");var w,d=""===y[0]||y[0]&&"/"===y[0].charAt(0);m&&(t.hostname=!d&&y.length?y.shift():"",t.host=t.hostname,w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.hostname=w.shift(),t.host=t.hostname),(f=f||t.host&&y.length)&&!d&&y.unshift(""),0<y.length?t.pathname=y.join("/"):(t.pathname=null,t.path=null),null===t.pathname&&null===t.search||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes}else t.pathname=null,t.search?t.path="/"+t.search:t.path=null}return t.href=t.format(),t},A.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.parse=a,t.resolve=function(e,t){return a(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?a(e,!1,!0).resolveObject(t):t},t.format=function(e){return(e="string"==typeof e?a(e):e)instanceof A?e.format():A.prototype.format.call(e)},t.Url=A},634:()=>{}},r={};function g(e){var t=r[e];return void 0!==t||(t=r[e]={id:e,loaded:!1,exports:{}},n[e].call(t.exports,t,t.exports,g),t.loaded=!0),t.exports}g.d=(e,t)=>{for(var r in t)g.o(t,r)&&!g.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var v,b={};{function w(e,t){var e=l(e),t=l(t),r=e.pop(),n=t.pop(),e=u(e,t);return 0!==e?e:r&&n?u(r.split("."),n.split(".")):r||n?r?-1:1:0}g.d(b,{default:()=>e}),(J=v=v||{})[J.Active=0]="Active",J[J.Paused=1]="Paused",J[J.Cancelled=2]="Cancelled";let s=(e,t,r)=>{i(r);e=w(e,t);return a[r].includes(e)},r=(w.validate=e=>"string"==typeof e&&/^[v\d]/.test(e)&&r.test(e),w.compare=s,w.satisfies=(e,t)=>{var r,n,o,a,i=t.match(/^([<>=~^]+)/),i=i?i[1]:"=";return"^"!==i&&"~"!==i?s(e,t,i):([e,r,n]=l(e),[t,o,a]=l(t),0===c(e,t)&&("^"===i?0<=u([r,n],[o,a]):0===c(r,o)&&0<=c(n,a)))},/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i),l=e=>{if("string"!=typeof e)throw new TypeError("Invalid argument expected string");var t=e.match(r);if(t)return t.shift(),t;throw new Error(`Invalid argument not valid semver ('${e}' received)`)},n=e=>"*"===e||"x"===e||"X"===e,o=e=>{var t=parseInt(e,10);return isNaN(t)?e:t},c=(e,t)=>n(e)||n(t)?0:([e,t]=(e=o(e),t=o(t),typeof e!=typeof t?[String(e),String(t)]:[e,t]),t<e?1:e<t?-1:0),u=(t,r)=>{for(let e=0;e<Math.max(t.length,r.length);e++){var n=c(t[e]||0,r[e]||0);if(0!==n)return n}return 0},a={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},t=Object.keys(a),i=e=>{if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===t.indexOf(e))throw new Error("Invalid operator, expected one of "+t.join("|"))};var A=globalThis.SymBfw,S=(A.extensionAdapter,A.globals),F=A.constants.BROWSER_TYPE;function x(e,t,r){return e.some(function(e){return e[t]&&e[t].toLowerCase()===r.toLowerCase()})}function E(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var _="DA2780AF-E99F-4740-82E9-B926E50F3F97",j="ad606587-6be2-457d-a79d-51b9f81df46e",O="30c3a504-6b80-482c-bb99-1e61486b4974",P="e64779f5-fbb2-4d6f-a163-57f6f1553f76",I="92405a2f-b88c-4187-a7dd-3aec859dcbd8",R="multivariate_rules_alarm",T="multivariate_rules_alarm_retry",C="dff31b90-b00b-49f7-8c7e-7e7d41c14d86",X=A.extensionAdapter,Y=A.utils,z=A.logger;function $(){}$._isCurrentLocaleApplicable=function(e){var i,t,r;return 0===e.length||(i=navigator.language.split("-"),t=(e=>{var t="function"==typeof Symbol&&i[Symbol.iterator];if(!t)return i;var r,n,o=t.call(i),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(n)throw n.error}}return a})(2),r={language:t[0]},i[1]&&(r.region=t[1]),t=r.language,x(e,"locale",(r=r.region)?"".concat(t,"-").concat(r):t))||x(e,"region",r)},$._isBrowserApplicable=function(e){var t,r,n,o;return 0===e.length||(n=(r=(()=>{var e=[];switch(S.BROWSER){case F.EDGE_CHROMIUM:e=navigator.userAgent.split("Edg/")[1].split(" ");break;case F.FIREFOX:case F.CHROME:e=navigator.userAgent.split("".concat(S.BROWSER,"/"))[1].split(" ");break;default:e=[]}return{browserName:A.globals.BROWSER,version:e[0]}})()).browserName,r=r.version,o=e,t=n.toLowerCase(),-1!==(n=o.findIndex(function(e){return e.name&&e.name.toLowerCase()===t.toLowerCase()}))&&(!(o=e[n].version)||0<=w(r,o)))},$._isAppAndSubCategoryApplicable=function(e,t,r){return e.appName.toLowerCase()===t.toLowerCase()&&(!e.subCategory||e.subCategory.toLowerCase()===r.toLowerCase())},$._isCategoryApplicable=function(e,t,r){return e.category.toLowerCase()===t.toLowerCase()&&(!e.subCategory||e.subCategory.toLowerCase()===r.toLowerCase())},$._isProductApplicable=function(e,t){var r,n;if(0===e.length)return!0;var o=X.getExtensionId();try{for(var a=E(e),i=a.next();!i.done;i=a.next()){var s=i.value;if(s.appId){if(s.appId===o)return!0}else if(s.appName){if($._isAppAndSubCategoryApplicable(s,t.appName,t.subCategory))return!0}else if(s.category){if($._isCategoryApplicable(s,t.category,t.subCategory))return!0}else if(s.subCategory&&s.subCategory.toLowerCase()===t.subCategory.toLowerCase())return!0}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!1},$._isOperatingSystemApplicable=function(e){return 0===e.length||x(e,"name",Y.getOSType())},$._isTestApplicableForUser=function(e,t){return!e||((e=new Date(t)).setDate(e.getDate()+1),new Date<e)},$._isLayoutApplicable=function(e,t){return e.includes(t)},$._areRequiredExtensionsInstalled=function(e,a){var t,r,i=!1,n=e.combinationsToCheck;try{for(var o=E(n),s=o.next();!s.done;s=o.next())(e=>{var t=e.extensions,r=t.types;switch(t.condition){case"all":a.every(function(e){return r.includes(e)})&&(i=!0);break;case"any":a.some(function(e){return r.includes(e)})&&(i=!0);break;case"none":a.every(function(e){return!r.includes(e)})&&(i=!0);break;case"any_not_all":var n=a.filter(function(e){return r.includes(e)}),o=t.maxCount||1;n.length<=o&&(i=!0)}})(s.value)}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},$.isTestTargetApplicable=function(e,t){return e.locations&&!$._isCurrentLocaleApplicable(e.locations)?(z.log("Target locale is not matched."),!1):e.browsers&&!$._isBrowserApplicable(e.browsers)?(z.log("Target browser is not matched."),!1):e.products&&!$._isProductApplicable(e.products,t)?(z.log("Target product is not matched."),!1):e.operatingSystems&&!$._isOperatingSystemApplicable(e.operatingSystems)?(z.log("Target OS is not matched."),!1):e.isOnlyForNewUsers&&!$._isTestApplicableForUser(e.isOnlyForNewUsers,t.installDate)||e.layouts&&!$._isLayoutApplicable(e.layouts,t.layout)||e.installedExtensions&&!$._areRequiredExtensionsInstalled(e.installedExtensions,t.installedExtensions)?(z.log("Target NOT matched, test is not applicable to this user."),!1):(z.log("All targets are matched."),!0)};let p=$;function k(){}k.getApplicableVariant=function(e,t,r,n){var o,a;if(!(e&&t&&r&&r.settingsStorage))throw new Error("Invalid arguments");var r=r.settingsStorage,i=(i=k._getUserRangeFromStorage(e,r))||n,s=0,l=new Map,c=(t.forEach(function(e){l.set(e.variantId,s+e.percentage),s+=e.percentage}),null);try{for(var u=(e=>{var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")})(l.entries()),p=u.next();!p.done;p=u.next()){var f=((e,t)=>{var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i})(p.value,2),h=f[0];if(i<=f[1]){c=h;break}}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return[c,i]},k._getUserRangeFromStorage=function(e,t){return t.getUserRangeForTest(e)},k.setUserRangeInStorage=function(e,t,r){r.setUserRangeForTest(e,t)};let f=k;function D(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}var Z=A.logger;function M(e){this._config=e,this.getApplicableTestToVariantMap=this.getApplicableTestToVariantMap.bind(this)}M.prototype.init=function(e,i){var s,l=this,c={overallTestsState:e.overallTestsState,tests:[]},u=this._config.settingsStorage.getProcessedRules();u&&(c.overallTestsState=v.Active),e.overallTestsState===v.Cancelled||e.overallTestsState===v.Paused&&!u||(s=0,e.tests.forEach(function(t,e){if(t.testState!==v.Cancelled){var r,n,o,a=u&&u.tests.find(function(e){return e.id===t.id});if(t.testState===v.Paused&&a)c.tests.push(a),Z.debug("This test testId: ".concat(t.id," is paused, but retained for existing user"));else{if(!t.winnerVariantId)return a?(Z.debug("Test rule already exist in storage, so updating only test state and variant data"),(r={id:a.id,description:a.description,category:a.category,testState:a.testState,startTimestamp:a.startTimestamp,duration:a.duration,variant:t.variants.find(function(e){return e.variantId===a.variant.variantId})}).variant.variantState===v.Cancelled?void Z.debug("This test testId: ".concat(t.id," variant: ").concat(r.variant.variantId," is cancelled, variant ignored")):r.variant.variantState===v.Paused?(c.tests.push(a),void Z.debug("This test testId: ".concat(t.id," variant: ").concat(r.variant.variantId," is paused, variant retained"))):void c.tests.push(r)):void(t.testState===v.Active&&M._isTestDurationValid(t.target.startTimestamp,t.target.duration)&&p.isTestTargetApplicable(t.target,l._config)&&(o=D(l._getApplicableVariant(t.id,t.variants,l._config,i[s]),2),n=o[0],o=o[1],s++,n?(r={id:t.id,description:t.description,category:t.category,testState:t.testState,startTimestamp:t.target.startTimestamp,duration:t.target.duration,variant:t.variants.find(function(e){return e.variantId===n})}).variant.variantState===v.Active&&(Z.debug("New user enrolled, userRangeValue: ".concat(o,", testId: ").concat(t.id,", variantId: ").concat(n)),f.setUserRangeInStorage(t.id,o,l._config.settingsStorage),c.tests.push(r)):n||t.testState!==v.Active||(Z.debug("New user NOT enrolled, userRangeValue: ".concat(o,", testId: ").concat(t.id,", variantId: ").concat(n)),f.setUserRangeInStorage(t.id,o,l._config.settingsStorage))));Z.debug("winner variant is declared, test.testState: ".concat(t.testState,", testId: ").concat(t.id,", variantId: ").concat(t.winnerVariantId)),(r={id:t.id,description:t.description,category:t.category,testState:t.testState,startTimestamp:t.target.startTimestamp,duration:t.target.duration,variant:t.variants.find(function(e){return e.variantId===t.winnerVariantId})}).variant||(Z.error("No variant data section found for declared winner variant id, so falling back to storage data.\n                        test.testState: ".concat(t.testState,", testId: ").concat(t.id,", variantId: ").concat(t.winnerVariantId)),a&&(r.variant=t.variants.find(function(e){return e.variantId===a.variant.variantId}))),c.tests.push(r)}}else Z.debug("This test is cancelled, test.testState: ".concat(t.testState,", testId: ").concat(t.id))})),this._config.settingsStorage.setProcessedRules(c)},M.prototype._getApplicableVariant=function(e,t,r,n){try{var o=D(f.getApplicableVariant(e,t,r,n),2);return[o[0],o[1]]}catch(e){Z.error("Exception received from RangeValueMatcher.getApplicableVariant : ".concat(e))}return[null,-1]},M.prototype.getApplicableTestToVariantMap=function(){return this._config.settingsStorage.getProcessedRules()},M._isTestDurationValid=function(e,t){var r,n;return!e||e<=0?(Z.error("Invalid test starttimestamp (".concat(e,") received.")),!1):t?(r=new Date,e=new Date(e),n=new Date(e.getTime()),t.months&&n.setMonth(n.getMonth()+t.months),t.days&&n.setDate(n.getDate()+t.days),t.hours&&n.setHours(n.getHours()+t.hours),(e=e<=r&&r<=n)||Z.log("Test duration is not within the AB testing period"),e):(Z.error("Invalid test duration (".concat(JSON.stringify(t),") received.")),!1)};let h=M;var ee=g(304);let d={$id:"#/definitions/MultiVariantTestingRules",$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{version:{type:"integer"},overallTestsState:{type:"integer"},tests:{type:"array",minItems:1,uniqueItems:!0,items:{type:"object",properties:{id:{type:"string"},category:{type:"string"},description:{type:"string"},testState:{type:"integer"},target:{type:"object",properties:{location:{type:"array",items:{type:"object",properties:{region:{type:"string"},locale:{type:"string"}}}},browsers:{type:"array",items:{type:"object",properties:{name:{type:"string"},version:{type:"string"}}}},operatingSystems:{type:"array",items:{type:"object",properties:{name:{type:"string"},version:{type:"string"}}}},products:{type:"array",items:{type:"object",properties:{category:{type:"string"},subCategory:{type:"string"},appName:{type:"string"},appId:{type:"string"}}}},isOnlyForNewUsers:{type:"boolean"},startTimestamp:{type:"integer"},duration:{type:"object",properties:{months:{type:"integer"},days:{type:"integer"},hours:{type:"integer"}}},maxUsers:{type:"integer"}}},variants:{type:"array",minItems:1,uniqueItems:!0,items:{type:"object",properties:{variantId:{type:"string"},description:{type:"string"},percentage:{type:"number"},variantState:{type:"integer"},data:{type:"array",items:{type:"object",properties:{product:{type:"string"},oCode:{type:"string"}}}}},required:["variantId","percentage","variantState"]}}},required:["id","category","testState","target","variants"]}}}};function N(e,i,s,l){return new(s=s||Promise)(function(r,t){function n(e){try{a(l.next(e))}catch(e){t(e)}}function o(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}a((l=l.apply(e,i||[])).next())})}function V(n,o){var a,i,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(a)throw new TypeError("Generator is already executing.");for(;l=c&&t[c=0]?0:l;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!((s=0<(s=l.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=o.call(n,l)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}var U=A.alarmHelper,te=A.cdnFileDownloader,q=A.logger,re=A.utils;function L(){}L._startScheduler=function(){return N(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return L._canDownloadRules()?[4,L._downloadRules()]:[3,2];case 1:e.sent(),e.label=2;case 2:return L._registerScheduler(),[2]}})})},L._registerScheduler=function(){return N(this,void 0,void 0,function(){var t;return V(this,function(e){switch(e.label){case 0:return t=L._config,[4,U.setAlarm(R,{periodInMinutes:t.schedulerInterval/6e4})];case 1:return e.sent(),[2]}})})},L._registerRetryScheduler=function(){return N(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return[4,U.setAlarm(T,{delayInMinutes:30})];case 1:return e.sent(),[2]}})})},L._canDownloadRules=function(){var e=L._config.settingsStorage.getRulesDownloadedTimeStamp();return!!re.isNil(e)||e+L._config.schedulerInterval<=Date.now()},L._downloadRules=function(){return N(this,void 0,void 0,function(){var t,r;return V(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=!!L._config.certExpiryCheckRequired&&L._config.certExpiryCheckRequired,[4,te.getPayloadFromCdnFile(L._config.rulesJsonCdnPath,L._config.rulesRootCA,L._config.certInfo,t)];case 1:return t=e.sent(),q.log("".concat(L._config.rulesJsonCdnPath," downloaded successfully.")),q.log(t),L._config.settingsStorage.setRulesDownloadedTimeStamp(Date.now()),L._isRulesValid(t)&&L._isRulesUpdated(t)?(q.log("".concat(L._config.rulesJsonCdnPath," validation succeeded.")),L._callback(t),L._config.settingsStorage.setRulesVersion(t.version),[2,!0]):[3,3];case 2:return r=e.sent(),q.error("Fetching ".concat(L._config.rulesJsonCdnPath," from CDN failed.\n").concat(r)),L._registerRetryScheduler(),[3,3];case 3:return[2,!1]}})})},L._isRulesUpdated=function(e){var e=e.version,t=L._config.settingsStorage.getRulesVersion();return!t||t<e?(q.log("Rules json contains new version."),!0):(q.log("Rules json does not contain new version."),!1)},L._isRulesValid=function(e){e=(new ee.Validator).validate(e,d);return e.valid||q.error("jsonschema validation reports following errors. \n".concat(e.errors)),e.valid},L.handleSchedulerEvent=function(e){re.isNil(L._config)||e.name!==R&&e.name!==T||L._startScheduler()},L.prototype.init=function(t,r){return N(this,void 0,void 0,function(){return V(this,function(e){switch(e.label){case 0:return t.settingsStorage?t.schedulerInterval<=0?(q.error("schedulerInterval is invalid"),[2]):r?(L._config=t,L._callback=r,[4,L._startScheduler()]):(q.error("callback cannot be null"),[2]):(q.error("settingsStorage cannot be null"),[2]);case 1:return e.sent(),[2]}})})};let y=L;A.alarmHelper.registerAlarmListener(L.handleSchedulerEvent);var B=function(){return(B=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},W=A.logger;function G(e){this._settingsStorage=null,this._settingsStorage=e}A.utils,G.prototype.setProcessedRules=function(e){e?this._settingsStorage.setValue(_,e):W.error("ProcessedRules object should not be null")},G.prototype.getProcessedRules=function(){return this._settingsStorage.getValue(_)},G.prototype.setUserRangeForTest=function(e,t){var r;e&&t?((r={})[e]=t,e=r,(t=this._settingsStorage.getValue(j))?this._settingsStorage.setValue(j,B(B({},t),e)):this._settingsStorage.setValue(j,e)):W.error("Invalid testId or userRange parameters")},G.prototype.getUserRangeForTest=function(e){var t;return e?(t=this._settingsStorage.getValue(j))?t[e]||null:(W.debug("User Range Settings is not available in storage"),null):(W.error("Invalid testId"),null)},G.prototype.setRulesVersion=function(e){e?this._settingsStorage.setValue(O,e):W.error("invalid rules version")},G.prototype.getRulesVersion=function(){return this._settingsStorage.getValue(O)},G.prototype.setRulesDownloadedTimeStamp=function(e){e?this._settingsStorage.setValue(P,e):W.error("invalid timestamp")},G.prototype.getRulesDownloadedTimeStamp=function(){return this._settingsStorage.getValue(P)},G.prototype.setDownloadedRules=function(e){e?this._settingsStorage.setValue(I,e):W.error("invalid rules")},G.prototype.getDownloadedRules=function(){return this._settingsStorage.getValue(I)},G.prototype.getTestProcessed=function(){return this._settingsStorage.getValue(C)},G.prototype.setTestProcessed=function(e){this._settingsStorage.setValue(C,e)};let m=G;function ne(e,i,s,l){return new(s=s||Promise)(function(r,t){function n(e){try{a(l.next(e))}catch(e){t(e)}}function o(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}a((l=l.apply(e,i||[])).next())})}function oe(n,o){var a,i,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(a)throw new TypeError("Generator is already executing.");for(;l=c&&t[c=0]?0:l;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!((s=0<(s=l.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=o.call(n,l)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}var H=A.logger,J=A.utils,ae=J.isArray,K=J.isNil,ie=J.isntNil;function Q(){}Q.prototype.setRulesCallback=function(e){this._settingsStorage.setTestProcessed(!1),this._settingsStorage.setDownloadedRules(e)},Q.prototype._processDownloadedRules=function(e){if(ae(e)&&0!==e.length){var t=this._settingsStorage.getDownloadedRules();if(K(t))this._resolveOnTestProcessed();else try{this._rulesEngine.init(t,e);var r=this._rulesEngine.getApplicableTestToVariantMap();this._config.onRulesUpdated&&r&&r.tests&&r.tests.length&&this._config.onRulesUpdated(r),this._setBgInitialized()}catch(e){this._resolveOnTestProcessed()}}else this._resolveOnTestProcessed()},Q.prototype.getVariantForTestIds=function(t){return ne(this,void 0,void 0,function(){var r,n;return oe(this,function(e){switch(e.label){case 0:return ie(this._initPromise)?[4,this._initPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return r={tests:[]},(n=this._rulesEngine.getApplicableTestToVariantMap())&&(n.overallTestsState===v.Cancelled?(t.forEach(function(e){r.tests.push({testId:e,variant:null})}),H.debug("overallTestState is cancelled, so returning null for all test variants")):t.forEach(function(t){var e=n.tests.find(function(e){return e.id===t});return e?e.testState!==v.Cancelled&&e.variant&&e.variant.variantState!==v.Cancelled?(r.tests.push({testId:t,variant:e.variant}),void H.debug("Either testState or variantState is Active / Paused")):(H.debug("Either testState or variantState is cancelled"),void r.tests.push({testId:t,variant:null})):(H.debug("Client is requesting variant data for non-existing test"),void r.tests.push({testId:t,variant:null}))})),[2,r]}})})},Q.prototype._setBgInitialized=function(){this._settingsStorage.setTestProcessed(!0),this._resolveOnTestProcessed()},Q.prototype._isTestProcessed=function(){var e=this._settingsStorage.getTestProcessed();return e=K(e)?!1:e},Q.prototype._getRequiredUserRangeCount=function(e,t){var r,n=0,e=e.tests;return K(t)?e.forEach(function(e){e.testState===v.Active&&n++}):(r=t.tests.map(function(e){return e.id}),e.forEach(function(e){e.testState!==v.Active||r.includes(e.id)||n++})),n},Q.prototype.handleIsBGInitalized=function(e){var t,r,n=this,o={};this._isTestProcessed()?o.isInitialized=!0:(this._initPromise=new Promise(function(e){n._resolveOnTestProcessed=e}),t=this._settingsStorage.getDownloadedRules(),o.isInitialized=!1,K(t)?o.userRangeCount=0:(r=this._rulesEngine.getApplicableTestToVariantMap(),o.userRangeCount=this._getRequiredUserRangeCount(t,r))),e(o)},Q.prototype._handleMessage=function(e,t,r){var n=e.payload;switch(e.id){case"ced433c9-604c-491e-aaf4-a995fe1eceb5":this.handleIsBGInitalized(t);break;case"dacdccdc-03f0-4c2c-8434-343294323471":this._processDownloadedRules(n.userRanges)}},Q.prototype.init=function(r){return ne(this,void 0,void 0,function(){var t;return oe(this,function(e){switch(e.label){case 0:return this._handleMessage=this._handleMessage.bind(this),A.extensionAdapter.addMessageListener(this._handleMessage),this._config=r,this._rulesEngine=new h(this._config),this.setRulesCallback=this.setRulesCallback.bind(this),this._settingsStorage=new m(r.settingsStorage),r.settingsStorage=this._settingsStorage,[4,(new y).init(r,this.setRulesCallback)];case 1:return e.sent(),t=this._rulesEngine.getApplicableTestToVariantMap(),this._config.onRulesUpdated&&t&&t.tests&&t.tests.length&&this._config.onRulesUpdated(t),[2]}})})};let e={multiVariateTestManager:new Q,TargetMatcher:p}}return b.default});