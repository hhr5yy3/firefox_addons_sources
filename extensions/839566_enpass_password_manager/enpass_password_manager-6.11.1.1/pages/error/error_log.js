!function(){'use strict';const e=()=>{const e=(navigator&&navigator.userAgent||'').toLowerCase(),t=(navigator&&navigator.vendor||'').toLowerCase(),r=null!==e.match(/(?:firefox|fxios)\/(\d+)/),o=null!==e.match(/version\/(\d+).+?safari/),n=null!==e.match(/edge\/(\d+)/)||null!==e.match(/edg\/(\d+)/),a=null!==e.match(/(?:^opera.+?version|opr)\/(\d+)/),i=/google inc/.test(t)?e.match(/(?:chrome|crios)\/(\d+)/):null;return r?'FIREFOX':o?'SAFARI':n?'EDGE':a?'OPERA':null!==i&&!a?'CHROME':void 0};for(var t='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',r='undefined'==typeof Uint8Array?[]:new Uint8Array(256),o=0;o<64;o++)r[t.charCodeAt(o)]=o;let n=null;'SAFARI'!==e()&&(n='undefined'==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype?chrome:browser);const a=(e,t)=>n.i18n.getMessage(e,t),i='support@enpass.io',l=`<a href='mailto:${i}'>${i}</a>`;var s;function d(e){_(a('error_update_heading')),h(a('error_update_highlight')),p(a('error_update_description'));const t=document.getElementById('link_learnmore'),r=document.getElementById('link_updatenow');t.style.display='none',r.style.display='block',y(a('error_update_heading'))}function c(e){let t=document.querySelector('.section-logs');if(e&&t){let r=function(e){if(!e)return;let t=document.createElement('section');t.className='log-list';for(const r in e){let o=g(r,e[r]);t.appendChild(o)}return t}(e);t.appendChild(r)}}function g(e,t){if(!e||!t)return'';let r=document.createElement('section');r.className='log-item';let o=function(e){if(!e)return'';let t=document.createElement('h4');return t.className='log-item-header',t.textContent=e,t}(e),n=function(e){if(!e)return'';let t=document.createElement('ul');t.className='log-item-list';for(const r in e){let o=u(r,e[r]);t.appendChild(o)}return t}(t);return r.appendChild(o),r.appendChild(n),r}function u(e,t){let r=document.createElement('bdi'),o=document.createTextNode('');if(!e&&!t)return'';if(e&&(r.textContent=e),'certificates'===e&&Array.isArray(t)){let e=[];t.forEach((function(t){e.push(Object.values(t))})),e&&(t=e.join(','))}t&&(o=document.createTextNode(' : '+t));let n=document.createElement('li');return r&&n.appendChild(r),o&&n.appendChild(o),n}function _(e){let t=document.getElementById('main_header');t.textContent=e,t.style.display='block'}function m(){document.getElementById('main_sub_header').style.display='none'}function h(e){document.getElementById('error_highlight_text').textContent=e,document.querySelector('.error-highlight').style.display='block'}function p(e){let t=document.getElementById('error_description');t.style.display='block',t.innerHTML=e}function f(e){document.querySelector('.section-logs').style.display='block',c(e)}function y(e){document.title=e||'Error Page'}!function(){let e=n?n.i18n.getUILanguage():'en';!e||'ar'!==e&&'he'!==e||function(){document.body.style.direction='rtl',e=document.querySelectorAll('section.section-summary>p'),e&&(e.forEach?e.forEach((function(e){e.style.textAlign='right'})):e.style.textAlign='right');var e;let t=document.getElementById('log_header_toggle');t&&(t.classList.remove('down-arrow'),t.classList.add('down-arrow-rtl'))}()}(),document.querySelector('.error-highlight').style.display='none',document.querySelector('.section-logs').style.display='none',document.getElementById('section_summary_header').style.display='none',document.getElementById('error_description').style.display='none',document.getElementById('main_header').style.display='none',m(),function(){let e=document.querySelector('p#link_updatenow > a'),t=a('update_now');e&&t&&(e.textContent=t);let r=document.querySelector('p#link_learnmore > a'),o=a('learn_more');r&&o&&(r.textContent=o);let n=document.getElementById('log_header_toggle'),i=a('diagnostics');n&&i&&(n.textContent=i)}(),document.addEventListener('DOMContentLoaded',(function(e){((e,t)=>{const r={command:e,payload:t};'object'==typeof safari&&safari.extension?safari.extension.dispatchMessage(e,t):n.runtime.sendMessage(r)})('get_updated_error_logs')})),s=function(t,r,o,n){switch(t){case'update_error_logs':!function(e){if(e)switch(y(),e.code){case 2:!function(e){_(a('error_log_main_heading_403')),h(a('error_log_highlight'));var t=a('error_log_code_2')+' '+a('share_string',l);p(t),f(e.logs)}(e);break;case 3:!function(e){_(a('error_log_main_heading_403')),h(a('error_log_highlight'));var t=a('error_log_code_3')+' '+a('share_string',l);p(t),f(e.logs)}(e);break;case 4:!function(e){_(a('error_log_main_heading_403')),h(a('error_log_highlight'));var t=a('error_log_code_4')+' '+a('share_string',l);p(t),f(e.logs)}(e);break;case 1:case 5:!function(e){_(a('error_log_main_heading_403')),h(a('error_log_highlight'));var t=a('error_log_code_1')+' '+a('share_string',l);p(t),f(e.logs)}(e);break;case 7:!function(e){_(a('error_log_main_heading_403')),h(a('error_log_highlight7'));var t=a('error_log_code_7')+'<br /><br />'+a('share_string',l);p(t),f(e.logs)}(e);break;case 8:!function(e){_(a('error_log_main_heading_8')),m(),h(a('error_log_highlight_8')),p(a('error_log_code_8')),f(e.logs)}(e);break;case 404:_(a('error_setup_heading')),p(a('error_setup_description')),y(a('error_setup_heading'));break;case 301:d()}}(r);break;case'setup_required':_(a('error_setup_heading')),p(a('error_setup_description')),y(a('error_setup_heading'));break;case'update_app':d(r.minRequiredVersion);break;case'update_extension':!function(t){_(a('error_update_heading')),h(a('error_update_highlight'));var r=a('error_update_description');p(r);const o=document.getElementById('link_learnmore'),n=document.getElementById('link_updatenow');o.style.display='none',n.style.display='block';const i=e(),l=n.querySelector('a');'EDGE'===i?l.setAttribute('href','https://www.microsoft.com/en-in/p/enpass-extension-for-microsoft-edge/9n94c0bczshg?SilentAuth=1&rtc=1&activetab=pivot:overviewtab'):'FIREFOX'===i?l.setAttribute('href','https://www.enpass.io/downloads/'):l.setAttribute('href','https://chrome.google.com/webstore/detail/enpass-password-manager/kmcfomidfpdkfieipokbalgegidffkal'),y(a('error_update_heading'))}(r.minRequiredVersion)}},'object'==typeof safari&&safari.self&&safari.self.addEventListener?safari.self.addEventListener('message',(({name:e,message:t})=>{s(e,t)})):n.runtime.onMessage.addListener(((e,t,r)=>{if(!e)return;const{command:o,payload:n}=e;s(o,n,t,r)})),document.getElementById('log_header_toggle').addEventListener('click',(function(e){let t=document.getElementById('log_header_toggle'),r=document.querySelector('.log-list');t&&(t.classList.contains('down-arrow-rtl')||t.classList.contains('right-arrow-rtl')?(t.className='down-arrow-rtl'===t.className?'right-arrow-rtl':'down-arrow-rtl',r&&('down-arrow-rtl'===t.className?r.style.display='block':r.style.display='none')):(t.className='down-arrow'===t.className?'right-arrow':'down-arrow',r&&('down-arrow'===t.className?r.style.display='block':r.style.display='none')))}),!0)}();
