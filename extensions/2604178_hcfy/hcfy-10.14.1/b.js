(()=>{var e,t={50657:(e,t,n)=>{"use strict";n.d(t,{Gm:()=>p,pR:()=>l});n(97107),n(69375),n(48605);var s=n(56357),o=n(72431),a=n(34975),r=n(51127),i=n.n(r),c=n(20843);const l=!0,d={id:o.P2.BaiDu,name:"百度文字识别",points:!0,secretKeys:{get:()=>i().storage.local.get({baiDuOCRKey:[]}).then((({baiDuOCRKey:e})=>(Array.isArray(e)?e:[e]).map((e=>({id:e.key,key:e.secret}))))),set:e=>i().storage.local.set({baiDuOCRKey:e.map((e=>({key:e.id,secret:e.key})))}),isComplete:e=>(0,c.hP)(e,["id"])},pointsEnable:{get:()=>i().storage.local.get({bdOcrPoints:l}).then((({bdOcrPoints:e})=>e)),set:e=>i().storage.local.set({bdOcrPoints:e})}};class u extends s.m{constructor(){super(d,!0)}callBySecretKey(e,t){return(0,a.l)(e,{image:t.image,paragraph:!0,language_type:"auto_detect"})}transform(e){if(!e.paragraphs_result)throw new Error("百度文字识别服务配置有误，请确认你领取过免费资源包，且密钥填写无误。");return e.paragraphs_result.reduce(((t,{words_result_idx:n})=>(t.push(n.reduce(((t,n)=>t+e.words_result[n].words),"")),t)),[]).join("\n")}}const p=new u},15999:(e,t,n)=>{"use strict";n.d(t,{Dx:()=>u,I8:()=>p,Qy:()=>h,XN:()=>y,g9:()=>f,zy:()=>g});n(10865);var s=n(73418),o=n(45457),a=n(34047),r=n(72431),i=n(51127),c=n.n(i),l=n(29842),d=n(20843);const u=!0,p={id:r.VI.ALi,name:"阿里翻译",points:!0,secretKeys:{get:()=>c().storage.local.get({aLiApiKey:[]}).then((({aLiApiKey:e})=>Array.isArray(e)?e:[e])),set:e=>c().storage.local.set({aLiApiKey:e}),isComplete:e=>(0,d.hP)(e,["id"])},pointsEnable:{get:()=>c().storage.local.get({aliPoints:u}).then((({aliPoints:e})=>e)),set:e=>c().storage.local.set({aliPoints:e})}},h=!0,g={id:r.VI.ALiPro,name:"阿里翻译（专业版）",points:!0,getDomain:()=>c().storage.local.get("aliDomain").then((({aliDomain:e})=>e)),secretKeys:p.secretKeys,pointsEnable:{get:()=>c().storage.local.get({aliProPoints:h}).then((({aliProPoints:e})=>e)),set:e=>c().storage.local.set({aliProPoints:e})}};class m extends a.c{constructor(e){super(e,{standardMap:s,retry:!0})}isSuccessResponse(e){return(0,o.aq)(e)}throwErrorResponse(e){throw new l.Fw(`${this.service.name}报错了，错误码：${e.Code}，错误消息："${e.Message}"`,{type:l.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:this.service.getDomain?"https://hcfy.app/docs/services/ali-pro-api#troubleshooting":"https://hcfy.app/docs/services/ali-api#troubleshooting"}})}isSameLang(e,t){return(0,o.dL)(e,t.text)}async callBySecretKey(e,t){const n=await(0,o.Tl)(e,{SourceText:t.text,TargetLanguage:t.destination,SourceLanguage:t.source||void 0,Scene:t.domain||void 0},{headerDateName:"Hcfy-Date"});return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}transform(e,t){const n=e.text,s=e.destinations[e.destIndex],o={text:n,link:`https://translate.alibaba.com/#hcfy_text=${encodeURIComponent(n)}&hcfy_from=auto&hcfy_to=${s}`,from:e.source&&this.convertToStandard(e.source),to:s&&this.convertToStandard(s)};if(t)try{o.result=t.Data.Translated.split("\n")}catch(e){}return o}}const f=new m(p),y=new m(g)},52724:()=>{chrome.webRequest.onBeforeSendHeaders.addListener((function(e){var t=e.requestHeaders;return t.some((function(e){if("Hcfy-Date"===e.name)return e.name="Date",!0})),{requestHeaders:t}}),{urls:["https://mt.aliyuncs.com/api/translate/web/general","https://mt.aliyuncs.com/api/translate/web/ecommerce"],types:["xmlhttprequest"]},["blocking","requestHeaders"])},75023:(e,t,n)=>{"use strict";n.d(t,{J:()=>u,L:()=>h});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(76768),d=n(29842);const u={id:o.VI.BaiChuan,name:"百川智能（百小应）",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({baiChuanKey:[]}).then((({baiChuanKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({baiChuanKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({baiChuanPrompt:i.g2.baiChuanPrompt});if(n.baiChuanPrompt&&!n.baiChuanPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({baiChuanPrompt:i.g2.baiChuanPrompt,baiChuanEndpoint:i.g2.baiChuanEndpoint,baiChuanModel:i.g2.baiChuanModel}),s=(n.baiChuanPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e.key,{model:n.baiChuanModel,messages:[{role:"user",content:s.replaceAll("\n","\n\n")}]},n.baiChuanEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://www.baichuan-ai.com/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},41727:(e,t,n)=>{"use strict";n.d(t,{Lg:()=>f,Me:()=>g,RO:()=>p,cG:()=>h,o3:()=>y,p4:()=>u});n(10865);var s=n(51127),o=n.n(s),a=n(30457),r=n(34047),i=n(72431),c=n(98712),l=n(29842),d=n(20843);const u=!0,p={id:i.VI.BaiDu,name:"百度翻译",points:!0,secretKeys:{get:()=>o().storage.local.get({baiDuAppKey:[]}).then((({baiDuAppKey:e})=>Array.isArray(e)?e:[e])),set:e=>o().storage.local.set({baiDuAppKey:e}),isComplete:e=>(0,d.hP)(e,["id"])},pointsEnable:{get:()=>o().storage.local.get({bdPoints:u}).then((({bdPoints:e})=>e)),set:e=>o().storage.local.set({bdPoints:e})}},h=!0,g={id:i.VI.BaiDuPro,name:"百度翻译（专业版）",points:!0,getDomain:()=>o().storage.local.get("baiduDomain").then((({baiduDomain:e})=>e)),secretKeys:p.secretKeys,pointsEnable:{get:()=>o().storage.local.get({bdProPoints:h}).then((({bdProPoints:e})=>e)),set:e=>o().storage.local.set({bdProPoints:e})}};class m extends r.c{constructor(e){super(e,{standardMap:a,retry:!0})}isSuccessResponse(e){return(0,c.aq)(e)}throwErrorResponse(e){throw new l.Fw(`${this.service.name}报错了，错误码：${e.error_code}。`,{type:l.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:this.service.getDomain?"https://hcfy.app/docs/services/baidu-pro-api#troubleshooting":"https://hcfy.app/docs/services/baidu-api#troubleshooting"}})}isSameLang(e){return(0,c.dL)(e)}async callBySecretKey(e,t){const n=async s=>{const o=await(0,c.Tl)(e,{q:t.text,to:t.destination,from:t.source||void 0,domain:t.domain||void 0});if(!this.isSuccessResponse(o)){if(!s&&"54003"===o.error_code)return new Promise(((e,t)=>{setTimeout((()=>{n(!0).then(e,t)}),800)}));this.throwErrorResponse(o)}return o};return n()}transform(e,t){const n=e.text,s=null==t?void 0:t.from,o=null==t?void 0:t.to,a={text:n,link:`https://fanyi.baidu.com/#${s||"auto"}/${o||"zh"}/${encodeURIComponent(n)}`,from:s&&this.convertToStandard(s),to:o&&this.convertToStandard(o)};if(t)try{a.result=t.trans_result.map((e=>e.dst))}catch(e){}return a}}const f=new m(p),y=new m(g)},30275:(e,t,n)=>{"use strict";n.d(t,{Q:()=>d,g:()=>c});n(69375),n(10865),n(98376);var s=n(34047),o=n(73516),a=n(72431),r=n(29842);function i(e){var t;const n={},s=null===(t=e.textContent)||void 0===t?void 0:t.trim().split(/\s+/);var o;s&&(n.name=s[0],n.value=null===(o=s[1])||void 0===o?void 0:o.slice(1,-1));const a=e.nextElementSibling;if(null!=a&&a.matches(".hd_tf")){var r;const e=null===(r=a.getElementsByTagName("a")[0])||void 0===r?void 0:r.getAttribute("data-mp3link");e&&(n.ttsURI=e)}return n}const c={id:a.VI.BingDict,name:"必应词典",free:!0};class l extends s.c{constructor(){super(c,{standardMap:{"中文(简体)":"中文(简体)",英语:"英语"},retry:!0})}async callByFree(e){return(0,o.S)(e.text)}transform(e,t){const{text:n}=e,s={text:n,link:"https://www.bing.com/dict/search?q="+encodeURIComponent(n)+"&cc=cn"};if(t){var o;const e=t.getElementsByClassName("qdef")[0];if(e){const t=e.getElementsByClassName("hd_p1_1")[0];if(t){const e=[],n=t.getElementsByClassName("hd_prUS")[0];n&&e.push(i(n));const o=t.getElementsByClassName("hd_pr")[0];if(o&&e.push(i(o)),n||o)s.from="英语";else{var a;const n=null===(a=t.textContent)||void 0===a?void 0:a.trim().slice(1,-1);n&&(s.from="中文(简体)",e.push({value:n}))}e.length&&(s.phonetic=e)}const n=[];e.querySelectorAll("ul li").forEach((e=>{const t=e.getElementsByClassName("pos")[0];if(t){const e=t.nextElementSibling;if(null!=e&&e.matches(".b_regtxt"))if(t.matches(".web")){var s;const t=null===(s=e.textContent)||void 0===s?void 0:s.trim();t&&n.push({pos:"网络: ",terms:t.split(/；\s*/)})}else{var o;const s=null===(o=e.textContent)||void 0===o?void 0:o.trim().split(/；\s*/);var a;if(s)n.push({pos:null===(a=t.textContent)||void 0===a?void 0:a.trim(),terms:s})}}})),n.length&&(s.dict=n)}s.dict||null!==(o=s.result)&&void 0!==o&&o.length||(s.error={type:r.VC.API_SERVER_ERROR,message:"无翻译结果。",link:{name:"查看解决方案",url:"https://hcfy.app/docs/services/free#bingdict"}})}return s}}const d=new l},2599:(e,t,n)=>{"use strict";n.d(t,{$H:()=>d,Vp:()=>p,n8:()=>l});n(10865);var s=n(51127),o=n.n(s),a=n(34047),r=n(39836),i=n(72431),c=n(20843);const l=!0,d={id:i.VI.CaiYun,name:"彩云小译",points:!0,secretKeys:{get:()=>o().storage.local.get({cyApiToken:[]}).then((({cyApiToken:e})=>e?(Array.isArray(e)?e:[e]).map((e=>({key:e}))):[])),set:e=>o().storage.local.set({cyApiToken:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)},pointsEnable:{get:()=>o().storage.local.get({cyPoints:l}).then((({cyPoints:e})=>e)),set:e=>o().storage.local.set({cyPoints:e})}};class u extends a.c{constructor(){super(d,{standardMap:{"中文(简体)":"zh",英语:"en",日语:"ja"},retry:!0})}isSameLang(e,t){return(0,r.d)(e,[t.text])}async callBySecretKey(e,t){return(0,r.T)(e.key,{source:t.text.split("\n"),trans_type:`${t.source||"auto"}2${t.destination}`,detect:!0})}transform(e,t){const n=e.text,s=e.destinations[e.destIndex],o={text:n,link:"https://fanyi.caiyunapp.com/",from:e.source&&this.convertToStandard(e.source),to:s&&this.convertToStandard(s)};return t&&(o.result=t.target),o}}const p=new u},61479:(e,t,n)=>{"use strict";n.d(t,{P:()=>g,d:()=>p});n(97107),n(62234),n(64727),n(10865),n(98376),n(14293);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(91177),d=n(29842),u=n(51018);const p={id:o.VI.ChatGPT,name:"ChatGPT",free:!1,package:!0,secretKeys:{get:()=>r().storage.local.get({chatGPTKey:[]}).then((({chatGPTKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({chatGPTKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class h extends s.c{constructor(){super(p)}async translateInner(e,t){const n=await r().storage.local.get({chatGPTPrompt:i.g2.chatGPTPrompt});if(n.chatGPTPrompt&&!n.chatGPTPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({chatGPTPrompt:i.g2.chatGPTPrompt,chatGPTEndpoint:i.g2.chatGPTEndpoint,chatGPTModel:i.g2.chatGPTModel}),s=(n.chatGPTPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.zk)(e.key,{model:n.chatGPTModel,messages:[{role:"user",content:s}]},n.chatGPTEndpoint)}async callByPackage(e){const t=await r().storage.local.get({chatGPTPrompt:i.g2.chatGPTPrompt,chatGPTModel:i.g2.chatGPTModel}),n=(t.chatGPTPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",e.text).replace("{{target}}",e.destination),s=await(0,u.Z5)("https://hs-api.limingkai.cn/call/translate/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.chatGPTModel,messages:[{role:"user",content:n}]})}),o=await s.json();if("isError"in o)throw new Error(o.message);return o}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://chat.openai.com/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const g=new h},95548:(e,t,n)=>{"use strict";n.d(t,{O:()=>g,S:()=>p});n(97107),n(62234),n(64727),n(10865),n(98376),n(14293);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(32136),d=n(29842),u=n(51018);const p={id:o.VI.Claude,name:"Claude",free:!1,package:!0,secretKeys:{get:()=>r().storage.local.get({claudeKey:[]}).then((({claudeKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({claudeKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class h extends s.c{constructor(){super(p)}async translateInner(e,t){const n=await r().storage.local.get({claudePrompt:i.g2.claudePrompt});if(n.claudePrompt&&!n.claudePrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({claudePrompt:i.g2.claudePrompt,claudeEndpoint:i.g2.claudeEndpoint,claudeModel:i.g2.claudeModel}),s=(n.claudePrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.D)(e.key,{model:n.claudeModel,messages:[{role:"user",content:s}]},n.claudeEndpoint)}async callByPackage(e){const t=await r().storage.local.get({claudePrompt:i.g2.claudePrompt,claudeModel:i.g2.claudeModel}),n=(t.claudePrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",e.text).replace("{{target}}",e.destination),s=await(0,u.Z5)("https://hs-api.limingkai.cn/call/translate/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.claudeModel,messages:[{role:"user",content:n}]})}),o=await s.json();if("isError"in o)throw new Error(o.message);return{id:o.id,type:"message",role:"assistant",content:[{text:o.choices[0].message.content,type:"text"}],model:o.model,stop_reason:o.choices[0].finish_reason,stop_sequence:null,usage:{input_tokens:o.usage.prompt_tokens,output_tokens:o.usage.completion_tokens}}}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://claude.ai/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.content[0].text.trim()).split("\n")),a}}const g=new h},91357:(e,t,n)=>{"use strict";n.d(t,{a:()=>l,d:()=>i});n(33873),n(98376),n(14293),n(28715),n(47010);var s=n(34047),o=n(9729),a=n(72431);const r={"中文(简体)":"zh",英语:"en",德语:"de",法语:"fr",西班牙语:"es",葡萄牙语:"pt",意大利语:"it",荷兰语:"nl",波兰语:"pl",俄语:"ru",日语:"ja",爱沙尼亚语:"et",保加利亚语:"bg",丹麦语:"da",芬兰语:"fi",捷克语:"cs",拉脱维亚语:"lv",立陶宛语:"lt",罗马尼亚语:"ro",瑞典语:"sv",斯洛伐克语:"sk",斯洛文尼亚语:"sl",希腊语:"el",匈牙利语:"hu",乌克兰语:"uk",印尼语:"id",书面挪威语:"nb",韩语:"ko",土耳其语:"tr"},i={id:a.VI.DeepL,name:"DeepL（内置）",free:!0,points:!1};class c extends s.c{constructor(){super(i,{standardMap:r})}isSameLang(e,t){return e.from?e.from===t.destinations[t.destIndex]:t.text===e.result}callByFree(e){return(0,o.l)(e)}transform(e,t){var n;const s={text:e.text,from:(null==t?void 0:t.from)&&this.convertToStandard(t.from.toLowerCase()),link:`https://www.deepl.com/translator#${(null==t||null===(n=t.from)||void 0===n?void 0:n.toLowerCase())||e.source||"auto"}/${e.destinations[e.destIndex]}/${encodeURIComponent(e.text.replaceAll("/","\\/"))}`};if(t){const e=t.result.split("\n");t.otherResults.length?s.dict=[{terms:e},...t.otherResults.map((e=>({terms:[e]})))]:s.result=e}return s}}const l=new c},17299:(e,t,n)=>{"use strict";n.d(t,{BP:()=>g,Q9:()=>p,rc:()=>u});n(97107),n(64727),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(20843),r=n(51127),i=n.n(r),c=n(17129),l=n(51018);const d={"中文(简体)":"zh",英语:"en",德语:"de",法语:"fr",西班牙语:"es",葡萄牙语:"pt",意大利语:"it",荷兰语:"nl",波兰语:"pl",俄语:"ru",日语:"ja",爱沙尼亚语:"et",保加利亚语:"bg",丹麦语:"da",芬兰语:"fi",捷克语:"cs",拉脱维亚语:"lv",立陶宛语:"lt",罗马尼亚语:"ro",瑞典语:"sv",斯洛伐克语:"sk",斯洛文尼亚语:"sl",希腊语:"el",匈牙利语:"hu",乌克兰语:"uk",印尼语:"id",书面挪威语:"nb",韩语:"ko",土耳其语:"tr"},u=!0,p={id:o.VI.DeepLOfficial,name:"DeepL",free:!1,package:!0,secretKeys:{get:()=>i().storage.local.get({deeplKey:[]}).then((({deeplKey:e})=>e)),set:e=>i().storage.local.set({deeplKey:e}),isComplete:e=>(0,a.hP)(e,["deeplPro"])},pointsEnable:{get:()=>i().storage.local.get({deeplPoints:u}).then((({deeplPoints:e})=>e)),set:e=>i().storage.local.set({deeplPoints:e})}};class h extends s.c{constructor(){super(p,{standardMap:d,retry:{secretKey:!0}})}isSameLang(e,t){return e.translations[0].detected_source_language.toLowerCase()===t.destinations[t.destIndex]}async callBySecretKey(e,t){var n;const{deeplEndpoint:s}=await i().storage.local.get("deeplEndpoint");return(0,c.T)(e.key,{text:[t.text],target_lang:t.destination.toUpperCase(),source_lang:null===(n=t.source)||void 0===n?void 0:n.toUpperCase()},s)}async callByPackage(e){var t;const n=await(0,l.Z5)("https://hs-api.limingkai.cn/call/translate/deepl",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:[e.text],target_lang:e.destination.toUpperCase(),source_lang:null===(t=e.source)||void 0===t?void 0:t.toUpperCase()})}),s=await n.json();if("isError"in s)throw new Error(s.message);return s}transform(e,t){const n=null==t?void 0:t.translations[0].detected_source_language.toLowerCase(),s={text:e.text,from:n&&this.convertToStandard(n),link:`https://www.deepl.com/translator#${n||e.source||"auto"}/${e.destinations[e.destIndex]}/${encodeURIComponent(e.text.replaceAll("/","\\/"))}`};return t&&(s.result=t.translations[0].text.split("\n")),s}}const g=new h},13036:(e,t,n)=>{"use strict";n.d(t,{m:()=>u,q:()=>h});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(20343),d=n(29842);const u={id:o.VI.DeepSeek,name:"DeepSeek",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({deepSeekKey:[]}).then((({deepSeekKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({deepSeekKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({deepSeekPrompt:i.g2.deepSeekPrompt});if(n.deepSeekPrompt&&!n.deepSeekPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({deepSeekPrompt:i.g2.deepSeekPrompt,deepSeekEndpoint:i.g2.deepSeekEndpoint,deepSeekModel:i.g2.deepSeekModel}),s=(n.deepSeekPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e.key,{model:n.deepSeekModel,messages:[{role:"user",content:s.replaceAll("\n","\n\n")}]},n.deepSeekEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://chat.deepseek.com/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},33984:(e,t,n)=>{"use strict";n.d(t,{e:()=>u,s:()=>h});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(82951),d=n(29842);const u={id:o.VI.DouBao,name:"豆包",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({douBaoKey:[]}).then((({douBaoKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({douBaoKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({douBaoPrompt:i.g2.douBaoPrompt});if(n.douBaoPrompt&&!n.douBaoPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({douBaoPrompt:i.g2.douBaoPrompt,douBaoEndpoint:i.g2.douBaoEndpoint,douBaoModel:i.g2.douBaoModel}),s=(n.douBaoPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e.key,{model:n.douBaoModel,messages:[{role:"user",content:s.replaceAll("\n","\n\n")}]},n.douBaoEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://www.doubao.com/chat/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},82225:(e,t,n)=>{"use strict";n.d(t,{V:()=>p,t:()=>g});n(97107),n(62234),n(64727),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(29842),d=n(77010),u=n(51018);const p={id:o.VI.Gemini,name:"Gemini",free:!1,points:!1,package:!0,secretKeys:{get:()=>r().storage.local.get({geminiKey:[]}).then((({geminiKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({geminiKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class h extends s.c{constructor(){super(p)}async translateInner(e,t){const n=await r().storage.local.get({geminiPrompt:i.g2.geminiPrompt});if(n.geminiPrompt&&!n.geminiPrompt.includes("{{text}}"))throw new l.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:l.VC.OTHER});return super.translateInner(e,t)}throwErrorResponse(e){throw new l.Fw(`${this.service.name}报错了，错误码：${e.code}，错误消息：${e.message}。`,{type:l.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:"https://hcfy.app/docs/services/gemini#troubleshooting"}})}async callBySecretKey(e,t){const n=await r().storage.local.get({geminiPrompt:i.g2.geminiPrompt,geminiEndpoint:i.g2.geminiEndpoint,geminiModel:i.g2.geminiModel}),s=(n.geminiPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,d.l)(e.key,n.geminiModel,{contents:[{parts:[{text:s.replaceAll("\n","\n\n")}]}],safetySettings:[{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_NONE"}]},{endpoint:n.geminiEndpoint?e=>n.geminiEndpoint.replace("{model}",e):void 0}).catch((async e=>{if(e.response){let t;try{t=await e.response.json()}catch(e){}throw null!=t&&"object"==typeof t&&"error"in t&&t.error&&this.throwErrorResponse(t.error),new l.Fw(`${this.service.name}报错了，错误消息：${e.message}`,{type:l.VC.API_SERVER_ERROR,context:e})}throw new l.Fw(`${this.service.name}报错了，错误消息：${e.message}`,{type:l.VC.NETWORK_ERROR,context:e})}))}async callByPackage(e){const t=await r().storage.local.get({geminiPrompt:i.g2.geminiPrompt,geminiModel:i.g2.geminiModel}),n=(t.geminiPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",e.text).replace("{{target}}",e.destination);return(0,u.Z5)("https://hs-api.limingkai.cn/call/translate/openai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.geminiModel,messages:[{role:"user",content:n.replaceAll("\n","\n\n")}]})}).then((async e=>{const t=await e.json();if("isError"in t)return Promise.reject(new Error(t.message));return{candidates:[{content:{parts:t.choices.map((e=>({text:e.message.content})))}}]}}),(async e=>{if(e.response){let t;try{t=await e.response.json()}catch(e){}throw null!=t&&"object"==typeof t&&"error"in t&&t.error&&this.throwErrorResponse(t.error),new l.Fw(`${this.service.name}报错了，错误消息：${e.message}`,{type:l.VC.API_SERVER_ERROR,context:e})}throw new l.Fw(`${this.service.name}报错了，错误消息：${e.message}`,{type:l.VC.NETWORK_ERROR,context:e})}))}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://gemini.google.com/app",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.candidates[0].content.parts[0].text.trim()).split("\n")),a}}const g=new h},32290:(e,t,n)=>{"use strict";n.d(t,{G:()=>d,d:()=>p});n(10865);var s=n(34047),o=n(32407),a=n(29842),r=n(72431),i=n(2549),c=n(51964),l=n(51018);const d={id:r.VI.Google,name:"谷歌翻译",free:!0};class u extends s.c{constructor(){super(d,{standardMap:o,retry:{secretKey:!0}}),this.region="cn",this.type="fast",this.mirror=""}isSameLang(e,t){return e.from===t.destinations[t.destIndex]}async callByFree(e){const{text:t,destination:n,source:s="auto"}=e;let o;try{o=await(0,i.GL)(t,n,s,{signal:(0,l._)(8e3)},this.mirror)}catch(e){if("fast"!==this.type)o=await(0,i.EF)({text:t,to:n,source:s,region:this.region});else try{o=await(0,i.C5)(t,n,s,{signal:(0,l._)(8e3)},this.mirror)}catch(e){throw(0,c.$)(e)}}return o}transform(e,t){const{text:n}=e,s=e.destinations[e.destIndex],o=null==t?void 0:t.from,a={text:n,from:o&&this.convertToStandard(o),to:s&&this.convertToStandard(s),link:`https://translate.google.${this.region}/?sl=${o||"auto"}&tl=${s}&text=${encodeURIComponent(n)}&op=translate`};if(t){a.result=t.result.split("\n"),t.dict&&(a.dict=t.dict),t.phonetic&&(a.phonetic=t.phonetic.map((e=>({name:e.name,value:e.value,ttsURI:a.from&&this.getTTS(n,a.from)}))));try{!a.phonetic&&a.from&&(a.ttsURI=this.getTTS(n,a.from))}catch(e){}}return a}getTTS(e,t){const n=this.convertToCustom(t);if(!n)throw new a.Fw(`${this.service.name}不支持朗读${t}。`,{type:a.VC.UNSUPPORTED_LANGUAGE});return`https://translate.googleapis.com/translate_tts?client=gtx&tl=${n}&ie=UTF-8&q=${encodeURIComponent(e)}`}}const p=new u},91629:(e,t,n)=>{n(69375),n(98376);var s=["blocking","responseHeaders"],o=/Chrome\/(\d+)/.exec(navigator.userAgent);(o&&Number(o[1]))>71&&s.push("extraHeaders"),chrome.webRequest.onHeadersReceived.addListener((function(e){var t=e.responseHeaders,n=t.findIndex((e=>"cross-origin-resource-policy"===e.name.toLowerCase()));return-1!==n&&t.splice(n,1),{responseHeaders:t}}),{urls:["https://translate.googleapis.com/translate_tts?*"]},s)},39778:(e,t,n)=>{"use strict";n.d(t,{W:()=>h,s:()=>u});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(80624),d=n(29842);const u={id:o.VI.HunYuan,name:"混元大模型",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({hunYuanKey:[]}).then((e=>e.hunYuanKey)),set:e=>r().storage.local.set({hunYuanKey:e}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({hunYuanPrompt:i.g2.hunYuanPrompt});if(n.hunYuanPrompt&&!n.hunYuanPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({hunYuanPrompt:i.g2.hunYuanPrompt,hunYuanEndpoint:i.g2.hunYuanEndpoint,hunYuanModel:i.g2.hunYuanModel}),s=(n.hunYuanPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e,{Model:n.hunYuanModel,Messages:[{Role:"user",Content:s.replaceAll("\n","\n\n")}]},n.hunYuanEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://yuanbao.tencent.com/chat",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.Response.Choices[0].Message.Content.trim()).split("\n")),a}}const h=new p},83680:(e,t,n)=>{"use strict";n.d(t,{Gs:()=>u,W9:()=>p,wZ:()=>g});n(10865);var s=n(51127),o=n.n(s),a=n(35173),r=n(34047),i=n(72431),c=n(29842),l=n(20843);const d={"中文(简体)":"zh","中文(繁体)":"zh-Hant",英语:"en",越南语:"vi",伊努克提图特语:"iu",意大利语:"it",印尼语:"id",印地语:"hi",希伯来语:"he",西班牙语:"es",现代希腊语:"el",乌克兰语:"uk",乌尔都语:"ur",土库曼语:"tk",土耳其语:"tr",提格利尼亚语:"ti",塔希提语:"ty",他加禄语:"tl",汤加语:"to",泰语:"th",泰米尔语:"ta",泰卢固语:"te",斯洛文尼亚语:"sl",斯洛伐克语:"sk",世界语:"eo",萨摩亚语:"sm",桑戈语:"sg",塞索托语:"st",瑞典语:"sv",日语:"ja",契维语:"tw",克丘亚语:"qu",葡萄牙语:"pt",旁遮普语:"pa",挪威语:"no",新挪威语:"nb",南恩德贝莱语:"nr",缅甸语:"my",孟加拉语:"bn",蒙古语:"mn",马绍尔语:"mh",马其顿语:"mk",马拉雅拉姆语:"ml",马拉地语:"mr",马来语:"ms",罗马尼亚语:"ro",立陶宛语:"lt",拉脱维亚语:"lv",老挝语:"lo",克罗地亚语:"hr",卡纳达语:"kn",捷克语:"cs",加泰隆语:"ca",荷兰语:"nl",韩语:"ko",海地克里奥尔语:"ht",古吉拉特语:"gu",格鲁吉亚语:"ka",格陵兰语:"kl",高棉语:"km",卢干达语:"lg",刚果语:"kg",芬兰语:"fi",斐济语:"fj",法语:"fr",俄语:"ru",德语:"de",鞑靼语:"tt",丹麦语:"da",聪加语:"ts",楚瓦什语:"cv",波斯语:"fa",波斯尼亚语:"bs",波兰语:"pl",比斯拉马语:"bi",巴什基尔语:"ba",保加利亚语:"bg",阿塞拜疆语:"az",阿拉伯语:"ar",南非荷兰语:"af",阿尔巴尼亚语:"sq",阿布哈兹语:"ab",奥塞梯语:"os",埃维语:"ee",爱沙尼亚语:"et",艾马拉语:"ay","中文(文言文)":"lzh",阿姆哈拉语:"am",中库尔德语:"ckb",威尔士语:"cy",加利西亚语:"gl",豪萨语:"ha",亚美尼亚语:"hy",伊博语:"ig",林加拉语:"ln",北索托语:"nso",齐切瓦语:"ny",奥罗莫语:"om",修纳语:"sn",索马里语:"so",塞尔维亚语:"sr",斯瓦希里语:"sw",科萨语:"xh",约鲁巴语:"yo",祖鲁语:"zu",匈牙利语:"hu"},u=!1,p={id:i.VI.HuoShan,name:"火山翻译",points:!1,secretKeys:{get:()=>o().storage.local.get({hsApiKey:[]}).then((({hsApiKey:e})=>Array.isArray(e)?e:[e])),set:e=>o().storage.local.set({hsApiKey:e}),isComplete:e=>(0,l.hP)(e,["id"])}};class h extends r.c{constructor(){super(p,{standardMap:d,retry:!0})}isSuccessResponse(e){return(0,a.aq)(e)}throwErrorResponse(e){const t=e.ResponseMetaData.Error;throw new c.Fw(`${this.service.name}报错了，错误码：${t.Code}，错误消息：${t.Message}。`,{type:c.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:"https://hcfy.app/docs/services/hs-api#troubleshooting"}})}isSameLang(e,t){return(0,a.dL)(e,t.destinations[t.destIndex])}async callBySecretKey(e,t){const n=await(0,a.Tl)(e,{TextList:[t.text],TargetLanguage:t.destination,SourceLanguage:t.source});return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}transform(e,t){const n=e.text,s=t&&this.convertToStandard(t.TranslationList[0].DetectedSourceLanguage),o={text:n,link:`https://translate.volcengine.com/translate?category=&home_language=zh&source_language=${e.source||"detect"}&target_language=${e.destinations[e.destIndex]}&text=${encodeURIComponent(n)}`,from:s};if(t)try{o.result=t.TranslationList[0].Translation.split("\n")}catch(e){}return o}}const g=new h},90328:(e,t,n)=>{"use strict";n.d(t,{C:()=>u,y:()=>h});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(41731),d=n(29842);const u={id:o.VI.LingYi,name:"零一万物",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({lingYiKey:[]}).then((({lingYiKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({lingYiKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({lingYiPrompt:i.g2.lingYiPrompt});if(n.lingYiPrompt&&!n.lingYiPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({lingYiPrompt:i.g2.lingYiPrompt,lingYiEndpoint:i.g2.lingYiEndpoint,lingYiModel:i.g2.lingYiModel}),s=(n.lingYiPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e.key,{model:n.lingYiModel,messages:[{role:"user",content:s.replaceAll("\n","\n\n")}]},n.lingYiEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://www.wanzhi.com/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},32815:(e,t,n)=>{"use strict";n.d(t,{D:()=>u,v:()=>h});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(70476),d=n(29842);const u={id:o.VI.MiniMax,name:"MiniMax",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({miniMaxKey:[]}).then((({miniMaxKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({miniMaxKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({miniMaxPrompt:i.g2.miniMaxPrompt});if(n.miniMaxPrompt&&!n.miniMaxPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({miniMaxPrompt:i.g2.miniMaxPrompt,miniMaxEndpoint:i.g2.miniMaxEndpoint,miniMaxModel:i.g2.miniMaxModel}),s=(n.miniMaxPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e.key,{model:n.miniMaxModel,messages:[{role:"user",content:s.replaceAll("\n","\n\n")}]},n.miniMaxEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://hailuoai.com/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},59503:(e,t,n)=>{"use strict";n.d(t,{h:()=>u,r:()=>h});n(62234),n(10865),n(98376),n(14293);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(76952),d=n(29842);const u={id:o.VI.Moonshot,name:"Moonshot (Kimi)",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({moonshotKey:[]}).then((({moonshotKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({moonshotKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({moonshotPrompt:i.g2.moonshotPrompt});if(n.moonshotPrompt&&!n.moonshotPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({moonshotPrompt:i.g2.moonshotPrompt,moonshotEndpoint:i.g2.moonshotEndpoint,moonshotModel:i.g2.moonshotModel}),s=(n.moonshotPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e.key,{model:n.moonshotModel,messages:[{role:"user",content:s}]},n.moonshotEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://kimi.moonshot.cn/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},6525:(e,t,n)=>{"use strict";n.d(t,{V:()=>h,b:()=>u});n(62234),n(10865),n(98376),n(14293);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(29842),d=n(91734);const u={id:o.VI.SiliConflow,name:"硅基流动",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({siliConflowKey:[]}).then((({siliConflowKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({siliConflowKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({siliConflowPrompt:i.g2.siliConflowPrompt});if(n.siliConflowPrompt&&!n.siliConflowPrompt.includes("{{text}}"))throw new l.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:l.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({siliConflowPrompt:i.g2.siliConflowPrompt,siliConflowEndpoint:i.g2.siliConflowEndpoint,siliConflowModel:i.g2.siliConflowModel}),s=(n.siliConflowPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,d.z)(e.key,{model:n.siliConflowModel,messages:[{role:"user",content:s}]},n.siliConflowEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://cloud.siliconflow.cn/models/text/chat?referrer=clyjj1zam002kv1izq1862nxz",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},55260:(e,t,n)=>{"use strict";n.d(t,{m:()=>r,o:()=>c});n(97107),n(10865);var s=n(34047),o=n(72431),a=n(29842);const r={id:o.VI.SouGou,name:"搜狗翻译"};class i extends s.c{constructor(){super(r)}translate(){return Promise.resolve({text:"",error:{type:a.VC.OTHER,message:"搜狗翻译已下线。",link:{name:"查看公告",url:"https://hcfy.app/blog/2021/11/23/sougou-off"}}})}transform(){throw new Error("Method not implemented.")}}const c=new i},30757:(e,t,n)=>{"use strict";n.d(t,{Fw:()=>g,fH:()=>u,pl:()=>p});n(10865);var s=n(51127),o=n.n(s),a=n(14626),r=n(56925),i=n(34047),c=n(72431),l=n(29842),d=n(20843);const u=!0,p={id:c.VI.QQ,name:"腾讯翻译君",points:!0,secretKeys:{get:()=>o().storage.local.get({qqApiKey:[]}).then((({qqApiKey:e})=>Array.isArray(e)?e:[e])),set:e=>o().storage.local.set({qqApiKey:e}),isComplete:e=>(0,d.hP)(e,["id"])},pointsEnable:{get:()=>o().storage.local.get({qqPoints:u}).then((({qqPoints:e})=>e)),set:e=>o().storage.local.set({qqPoints:e})}};class h extends i.c{constructor(){super(p,{standardMap:a,retry:!0})}isSuccessResponse(e){return(0,r.aq)(e)}throwErrorResponse(e){const t=e.Response.Error;throw new l.Fw(`${this.service.name}报错了，错误码：${t.Code}，错误消息：${t.Message}。`,{type:l.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:"https://hcfy.app/docs/services/qq-api#troubleshooting"}})}isSameLang(e){return(0,r.dL)(e)}async callBySecretKey(e,t){const n=await(0,r.Tl)(e,{SourceText:t.text,Target:t.destination,Source:t.source||void 0});return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}transform(e,t){const n=e.text,s=t&&this.convertToStandard(t.Response.Source),o=t&&this.convertToStandard(t.Response.Target),a={text:n,link:`https://fanyi.qq.com/#hcfy_text=${encodeURIComponent(n)}&hcfy_from=${s||""}&hcfy_to=${o||""}`,from:s,to:o};if(t)try{a.result=t.Response.TargetText.split("\n")}catch(e){}return a}}const g=new h},2226:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,i:()=>h});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(42661),d=n(29842);const u={id:o.VI.TongYi,name:"通义千问",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({tongYiKey:[]}).then((({tongYiKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({tongYiKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({tongYiPrompt:i.g2.tongYiPrompt});if(n.tongYiPrompt&&!n.tongYiPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({tongYiPrompt:i.g2.tongYiPrompt,tongYiEndpoint:i.g2.tongYiEndpoint,tongYiModel:i.g2.tongYiModel}),s=(n.tongYiPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e.key,{model:n.tongYiModel,messages:[{role:"user",content:s.replaceAll("\n","\n\n")}]},n.tongYiEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://tongyi.aliyun.com/qianwen/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},62779:(e,t,n)=>{"use strict";n.d(t,{F:()=>u,h:()=>h});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(94959),d=n(29842);const u={id:o.VI.WenXin,name:"文心一言",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({wenXinKey:[]}).then((e=>e.wenXinKey)),set:e=>r().storage.local.set({wenXinKey:e}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({wenXinPrompt:i.g2.wenXinPrompt});if(n.wenXinPrompt&&!n.wenXinPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({wenXinPrompt:i.g2.wenXinPrompt,wenXinEndpoint:i.g2.wenXinEndpoint,wenXinModel:i.g2.wenXinModel}),s=(n.wenXinPrompt||"将下面的文本翻译为{{target}}并保留段落格式：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)({client_id:e.id,client_secret:e.key},n.wenXinModel,{messages:[{role:"user",content:s.replaceAll("\n","\n\n")}]},n.wenXinEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://yiyan.baidu.com/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.result.trim()).split("\n")),a}}const h=new p},22111:(e,t,n)=>{"use strict";n.d(t,{R:()=>d,l:()=>c});n(33873),n(10865),n(47010);var s=n(34047),o=n(72431),a=n(29842),r=n(15708);const i={"中文(简体)":"zh",英语:"en",阿塞拜疆语:"az",马拉雅拉姆语:"ml",阿尔巴尼亚语:"sq",马耳他语:"mt",阿姆哈拉语:"am",马其顿语:"mk",毛利语:"mi",阿拉伯语:"ar",马拉地语:"mr",亚美尼亚语:"hy","马里语（俄罗斯）":"mhr",南非荷兰语:"af",蒙古语:"mn",巴斯克语:"eu",德语:"de",巴什基尔语:"ba",尼泊尔语:"ne",白俄罗斯语:"be",挪威语:"no",孟加拉语:"bn",旁遮普语:"pa",缅甸语:"my",帕皮阿门托语:"pap",保加利亚语:"bg",波斯语:"fa",波斯尼亚语:"bs",波兰语:"pl",威尔士语:"cy",葡萄牙语:"pt",匈牙利语:"hu",罗马尼亚语:"ro",越南语:"vi",俄语:"ru",海地克里奥尔语:"ht",宿务语:"ceb",加利西亚语:"gl",塞尔维亚语:"sr",荷兰语:"nl",僧伽罗语:"si",斯洛伐克语:"sk",希腊语:"el",斯洛文尼亚语:"sl",格鲁吉亚语:"ka",斯瓦希里语:"sw",古吉拉特语:"gu",印尼巽他语:"su",丹麦语:"da",塔吉克语:"tg",希伯来语:"he",泰语:"th",意第绪语:"yi",他加禄语:"tl",印尼语:"id",泰米尔语:"ta",爱尔兰语:"ga",鞑靼语:"tt",意大利语:"it",泰卢固语:"te",冰岛语:"is",土耳其语:"tr",西班牙语:"es",乌德穆尔特语:"udm",哈萨克语:"kk",乌兹别克语:"uz",卡纳达语:"kn",乌克兰语:"uk",加泰罗尼亚语:"ca",乌尔都语:"ur",吉尔吉斯语:"ky",芬兰语:"fi",法语:"fr",韩语:"ko",印地语:"hi",科萨语:"xh",克罗地亚语:"hr",高棉语:"km",捷克语:"cs",老挝语:"lo",瑞典语:"sv",拉丁语:"la",苏格兰语:"gd",拉脱维亚语:"lv",爱沙尼亚语:"et",立陶宛语:"lt",世界语:"eo",卢森堡语:"lb",爪哇语:"jv",马尔加什语:"mg",日语:"ja",马来语:"ms"},c={id:o.VI.Yandex,name:"Yandex 翻译",free:!0};class l extends s.c{constructor(){super(c,{standardMap:i,retry:!0})}isSuccessResponse(e){return(0,r.wF)(e)}throwErrorResponse(e){const t=e;throw new a.Fw(`${this.service.name}报错了，错误码：${t.code}，错误消息：${t.message}。`,{type:a.VC.API_SERVER_ERROR})}async callByFree(e){const t=await(0,r.Tl)(e.text,e.destination,{source:e.source});return this.isSuccessResponse(t)||this.throwErrorResponse(t),t}transform(e,t){const n=e.text;let s,o,a=e.source,r=e.destinations[e.destIndex];if(t){const[e,n]=t.lang.split("-");a=e,r=n,s=this.convertToStandard(e),o=this.convertToStandard(n)}const i={text:n,link:`https://translate.yandex.com/?source_lang=${a}&target_lang=${r}&text=${encodeURIComponent(n)}`,from:s,to:o};if(t)try{i.result=t.text[0].split("\n")}catch(e){}return i}}const d=new l},6847:(e,t,n)=>{"use strict";n.d(t,{Gu:()=>u,Xh:()=>p,lL:()=>g});n(33873),n(69375),n(10865),n(98376),n(47010);var s=n(51127),o=n.n(s),a=n(10187),r=n(70606),i=n(34047),c=n(72431),l=n(29842),d=n(20843);const u=!0,p={id:c.VI.YouDao,name:"有道翻译",points:!0,secretKeys:{get:()=>o().storage.local.get({youDaoAppKey:[]}).then((({youDaoAppKey:e})=>Array.isArray(e)?e:[e])),set:e=>o().storage.local.set({youDaoAppKey:e}),isComplete:e=>(0,d.hP)(e,["id"])},pointsEnable:{get:()=>o().storage.local.get({ydPoints:u}).then((({ydPoints:e})=>e)),set:e=>o().storage.local.set({ydPoints:e})}};class h extends i.c{constructor(){super(p,{standardMap:a,retry:!0})}isSuccessResponse(e){return(0,r.aq)(e)}throwErrorResponse(e){throw new l.Fw(`${this.service.name}报错了，错误码：${e.errorCode}。`,{type:l.VC.API_SERVER_ERROR,link:{name:"查看错误码释义",url:"https://hcfy.app/docs/services/youdao-api#troubleshooting"}})}isSameLang(e){return(0,r.dL)(e)}async callBySecretKey(e,t){const n=await(0,r.Tl)(e,{q:t.text,to:t.destination,from:t.source||void 0});return this.isSuccessResponse(n)||this.throwErrorResponse(n),n}transform(e,t){var n;const s=e.text,[o,a]=((null==t?void 0:t.l)||"").split("2"),r={text:s,from:this.convertToStandard(o),to:this.convertToStandard(a),ttsURI:null==t?void 0:t.speakUrl,link:null!=t&&t.basic?`https://dict.youdao.com/search?q=${encodeURIComponent(s)}`:`http://fanyi.youdao.com/translate?i=${encodeURIComponent(s)}`,result:null==t||null===(n=t.translation[0])||void 0===n?void 0:n.split("\n")};if(null!=t&&t.basic){r.dict=t.basic.explains.map((e=>{const t=e.match(/^([a-z]+\.)\s+/);return{pos:t?t[1]:void 0,terms:[t?e.slice(t[0].length):e]}}));const e=[];t.basic["us-phonetic"]&&e.push({name:"美",value:t.basic["us-phonetic"],ttsURI:t.basic["us-speech"]}),t.basic["uk-phonetic"]&&e.push({name:"英",value:t.basic["uk-phonetic"],ttsURI:t.basic["uk-speech"]}),!e.length&&t.basic.phonetic&&e.push({value:t.basic.phonetic,ttsURI:t.speakUrl}),e.length&&(r.phonetic=e)}return r}}const g=new h},71978:(e,t,n)=>{"use strict";n.d(t,{_:()=>u,k:()=>h});n(62234),n(10865),n(98376),n(14293),n(28715);var s=n(34047),o=n(72431),a=n(51127),r=n.n(a),i=n(16224),c=n(20843),l=n(3081),d=n(29842);const u={id:o.VI.ZhiPu,name:"智谱 AI",free:!1,points:!1,secretKeys:{get:()=>r().storage.local.get({zhiPuKey:[]}).then((({zhiPuKey:e})=>e.map((e=>({key:e}))))),set:e=>r().storage.local.set({zhiPuKey:e.map((e=>e.key))}),isComplete:e=>(0,c.hP)(e)}};class p extends s.c{constructor(){super(u)}async translateInner(e,t){const n=await r().storage.local.get({zhiPuPrompt:i.g2.zhiPuPrompt});if(n.zhiPuPrompt&&!n.zhiPuPrompt.includes("{{text}}"))throw new d.Fw("翻译命令内必须包含 `{{text}}`，请前往设置修改翻译命令。",{type:d.VC.OTHER});return super.translateInner(e,t)}async callBySecretKey(e,t){const n=await r().storage.local.get({zhiPuPrompt:i.g2.zhiPuPrompt,zhiPuEndpoint:i.g2.zhiPuEndpoint,zhiPuModel:i.g2.zhiPuModel}),s=(n.zhiPuPrompt||"将下面的文本翻译为{{target}}：\n{{text}}").replace("{{text}}",t.text).replace("{{target}}",t.destination);return(0,l.z)(e.key,{model:n.zhiPuModel,messages:[{role:"user",content:s.replaceAll("\n","\n\n")}]},n.zhiPuEndpoint||void 0)}transform(e,t){const n=e.text,o=e.destinations[e.destIndex],a={text:n,link:"https://www.zhipuai.cn/",from:e.source&&this.convertToStandard(e.source),to:o&&this.convertToStandard(o)};return t&&(a.result=(0,s.f)(t.choices[0].message.content.trim()).split("\n")),a}}const h=new p},18785:(e,t,n)=>{"use strict";n.d(t,{B:()=>I});var s=n(15999),o=n(41727),a=n(2599),r=n(55260),i=n(30757),c=n(6847),l=n(32290),d=n(91357),u=n(30275),p=n(83680),h=n(61479),g=n(22111),m=n(82225),f=n(2226),y=n(90328),w=n(59503),v=n(13036),b=n(71978),x=n(32815),P=n(75023),S=n(33984),k=n(62779),C=n(39778),R=n(6525),T=n(17299),E=n(95548);const I=[l.G,d.d,T.Q9,h.d,E.S,m.V,R.b,C.s,k.F,b._,S.e,f.A,v.m,y.C,x.D,P.J,w.h,o.RO,o.Me,i.pl,a.$H,s.I8,s.zy,c.Xh,p.W9,u.g,r.m,g.l].filter((e=>e!==u.g))},72431:(e,t,n)=>{"use strict";n.d(t,{P2:()=>o,VI:()=>s});let s=function(e){return e.Yandex="Yandex",e.ChatGPT="ChatGPT",e.Claude="Claude",e.Gemini="Gemini",e.TongYi="TongYi",e.LingYi="LingYi",e.Moonshot="Moonshot",e.DeepSeek="DeepSeek",e.ZhiPu="ZhiPu",e.MiniMax="MiniMax",e.BaiChuan="BaiChuan",e.DouBao="DouBao",e.WenXin="WenXin",e.HunYuan="HunYuan",e.SiliConflow="SiliConflow",e.BaiDu="BaiDuWeb",e.BaiDuPro="BaiDuDomain",e.HuoShan="HuoShan",e.QQ="QQOfficial",e.CaiYun="CaiYunOfficial",e.ALi="ALiOfficial",e.ALiPro="ALiOfficialDomain",e.SouGou="SoGouOfficial",e.YouDao="YouDaoWeb",e.Google="GoogleWeb",e.DeepL="DeepLWeb",e.DeepLOfficial="DeepL",e.BingDict="BingDictWeb",e}({}),o=function(e){return e.Tesseract="tesseractocr",e.BaiDu="bdocr",e}({})},9959:(e,t,n)=>{"use strict";n(52724),n(91629),n(69375),n(98376);const s=["blocking","responseHeaders"],o=/Chrome\/(\d+)/.exec(navigator.userAgent),a=o&&Number(o[1]);a&&a>71&&s.push("extraHeaders"),chrome.webRequest.onHeadersReceived.addListener((function(e){const t=e.responseHeaders||[],n=t.findIndex((e=>"content-security-policy"===e.name.toLowerCase()));return-1!==n&&t.splice(n,1),{responseHeaders:t}}),{urls:["https://www.deepl.com/translator","https://www.deepl.com/*/translator"],types:["sub_frame"]},s);var r=n(51127),i=n.n(r);i().runtime.onMessage.addListener(((e,t)=>{var n;if("forward between frames"!==(null==e?void 0:e.action))return;const s=null===(n=t.tab)||void 0===n?void 0:n.id;return null!=s?i().tabs.sendMessage(s,e,"top"===e.target?{frameId:0}:void 0):void 0}));const c=["blocking","requestHeaders"],l=/Chrome\/(\d+)/i.exec(navigator.userAgent),d=l&&Number(l[1]);d&&d>71&&c.push("extraHeaders"),chrome.webRequest.onBeforeSendHeaders.addListener((function(e){const t=e.requestHeaders||[];if(t.some((e=>"referer"===e.name.toLowerCase())))return;const n="https://translate.google.com",s=t.find((e=>"origin"===e.name.toLowerCase()));return s?s.value=n:t.push({name:"Origin",value:n}),t.push({name:"Referer",value:n+"/"}),{responseHeaders:t}}),{urls:["https://translate.google.com/_/TranslateWebserverUi/data/batchexecute?*"]},c);n(33873),n(10865),n(47010);function u(e,t){return function(...n){return new Promise(((s,o)=>{e.call(t,...n,(e=>{const t=chrome.runtime.lastError;t?o(t):s(e)}))}))}}u(chrome.runtime.sendMessage),u(chrome.storage.local.set,chrome.storage.local),u(chrome.storage.local.get,chrome.storage.local),u(chrome.storage.local.remove,chrome.storage.local),u(chrome.storage.local.clear,chrome.storage.local),u(chrome.storage.local.getBytesInUse,chrome.storage.local),u(chrome.windows.get),u(chrome.windows.create),u(chrome.windows.update);const p=u(chrome.tabs.sendMessage),h=u(chrome.tabs.query),g=u(chrome.tabs.executeScript),m=u(chrome.tabs.get);u(chrome.tabs.update),u(chrome.tabs.create),u(chrome.permissions.contains);async function f(e){let t;if("number"==typeof e)try{t=await m(e)}catch(e){}else t=e||await async function(){return(await h({active:!0,lastFocusedWindow:!0}))[0]}();return t}n(62234);n(97107);var y=n(27429),w=n(51018),v=n(20124),b=n.n(v);const x=v("@hcfyapp/aftr");function P(e,t,n){S(e,t),t.set(e,n)}function S(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k(e,t){return e.get(C(e,t))}function C(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var R=new WeakMap,T=new WeakMap,E=new WeakSet;class I extends y.b{constructor(...e){var t,n;super(...e),S(t=this,n=E),n.add(t),P(this,R,[]),P(this,T,[])}getMode(e){return k(T,this).includes(e.windowId)?"window":k(R,this).includes(e.id)?"tab":"close"}setMode(e,t){const n=this.getMode(e);switch(t){case"close":(0,w.RG)(k(T,this),e.windowId),(0,w.RG)(k(R,this),e.id),"window"===n&&this.emit("change-other-tabs-to",e,"close"),x("tab %o 变成了 %s 模式之后的内部状态 windowIds: %o tabIds %o",e,t,k(T,this),k(R,this));break;case"window":(0,w.Q3)(k(T,this),e.windowId),(0,w.RG)(k(R,this),e.id),C(E,this,A).call(this,e.windowId).then((()=>{x("tab %o 变成了 %s 模式之后的内部状态 windowIds: %o tabIds %o",e,t,k(T,this),k(R,this))})),this.emit("change-other-tabs-to",e,"window");break;case"tab":(0,w.Q3)(k(R,this),e.id),(0,w.RG)(k(T,this),e.windowId),"window"===n&&this.emit("change-other-tabs-to",e,"close"),x("tab %o 变成了 %s 模式之后的内部状态 windowIds: %o tabIds %o",e,t,k(T,this),k(R,this))}}}async function A(e){(await h({windowId:e})).forEach((e=>{const t=e.id;null!=t&&(0,w.RG)(k(R,this),t)}))}const M=new I;chrome.runtime.onMessage.addListener(((e,t,n)=>{if(!t.tab)return;if(null==t.tab.id)return;if(s=e,!(0,w.Z4)(s)||!("__aftrMessage__"in s))return;var s;const o={id:t.tab.id,windowId:t.tab.windowId};switch(e.__aftrAction__){case"getMode":n(M.getMode(o));break;case"setMode":M.setMode(o,e.__aftrPayload__);break;default:console.warn("未知的消息类型：",e)}})),M.on("change-other-tabs-to",((e,t)=>{x("通知 tab %o 所在的 window 下的其它 tab 需要改变自动模式的值为 %s",e,t),async function(e,t,n){const s=await h({windowId:e}),o={};let a;a="function"==typeof n?n:Array.isArray(n)?e=>n.includes(e.id):()=>!1,s.forEach((e=>{const n=e.id;null!=n&&(a(e)||(o[n]=p(n,t)))}))}(e.windowId,{__aftrMessage__:!0,__aftrAction__:"setMode",__aftrPayload__:t},[e.id])}));var _=n(16224),L=n(74874),K=n.n(L),D=n(69675),O=n(32290),B=n(91357),$=n(30275),V=n(15999),Y=n(2599),F=n(21756),q=n(34047),N=n(29842);K()(_.g2,["customAPI"]);class G extends q.c{constructor(e){super({id:e,name:e})}async translateInner(e){const{customAPI:t}=await i().storage.local.get("customAPI");if(!t)throw new N.Fw("没有配置自定义翻译源。");return(await F.A.post(t,{text:e.text,destination:e.destinations,source:e.source,name:this.service.name})).data}transform(e,t){return t||{text:e.text}}}var U=n(41727),z=n(55260),H=n(30757),W=n(83680),j=n(6847),X=n(61479),Q=n(2226),Z=n(22111),J=n(82225),ee=n(90328),te=n(59503),ne=n(13036),se=n(71978),oe=n(32815),ae=n(75023),re=n(33984),ie=n(62779),ce=n(39778),le=n(6525),de=n(17299),ue=n(95548);function pe(e){switch(e){case"Yandex":return Z.R;case"ChatGPT":return X.P;case"Claude":return ue.O;case"SiliConflow":return le.V;case"TongYi":return Q.i;case"LingYi":return ee.y;case"Moonshot":return te.r;case"DeepSeek":return ne.q;case"ZhiPu":return se.k;case"MiniMax":return oe.v;case"DouBao":return re.s;case"WenXin":return ie.h;case"HunYuan":return ce.W;case"BaiChuan":return ae.L;case"DeepLWeb":return B.a;case"DeepL":return de.BP;case"GoogleWeb":return O.d;case"BaiDuWeb":return U.Lg;case"BaiDuDomain":return U.o3;case"YouDaoWeb":return j.lL;case"BingDictWeb":return $.Q;case"ALiOfficial":return V.g9;case"ALiOfficialDomain":return V.XN;case"QQOfficial":return H.Fw;case"HuoShan":return W.wZ;case"SoGouOfficial":return z.o;case"CaiYunOfficial":return Y.Vp;case"Gemini":return J.t;default:return new G(e)}}(0,D.A)(K()(_.g2,["googleRegion","googleType","googleMirror"]),(e=>{e.googleRegion&&(O.d.region=e.googleRegion),e.googleType&&(O.d.type=e.googleType),null!=e.googleMirror&&(O.d.mirror=e.googleMirror)}));const he={...K()(_.g2,["destination","secondDestination","secondDestinationLatestSource"]),...K()(_.Ne,["latestSource"])};var ge=n(16321),me=n(17546),fe=n.n(me),ye=n(19891),we=n.n(ye);let ve;const be=()=>ve||(ve=(0,ge.L)((()=>new Promise(((e,t)=>{const n=window.speechSynthesis.getVoices();n.length?e(n):t(new Error("无法获取系统支持的语音列表，请稍后重试。"))}))),{delay:500,count:10}).then((e=>{const t={},n={};e.forEach((e=>{const s=e.lang;t[s]?t[s].push(e):t[s]=[e];const o=s.slice(0,s.indexOf("-"));n[o]?n[o].indexOf(s)<0&&n[o].push(s):n[o]=[s]}));const s=[],o={};return fe()(t,((e,n)=>{1===e.length&&(s.push(n),o[n]=e[0],delete t[n])})),fe()(n,((e,t)=>{1===e.length&&delete n[t]})),{singleVoiceMap:o,singleList:s,voicesGroup:t,multipleLang:n}}))),xe={"中文(简体)":"zh-CN","中文(粤语)":"zh-HK","中文(繁体)":"zh-TW",英语:"en","英语(英国)":"en-GB","英语(美国)":"en-US","英语(加拿大)":"en-CA","英语(澳大利亚)":"en-AU","英语(印度)":"en-IN","英语(爱尔兰)":"en-IE","英语(南非)":"en-ZA",德语:"de-DE",西班牙语:"es-ES","西班牙语(墨西哥)":"es-MX","西班牙语(美国)":"es-US","西班牙语(阿根廷)":"es-AR",法语:"fr-FR","法语(加拿大)":"fr-CA",印地语:"hi-IN",印尼语:"id-ID",意大利语:"it-IT",日语:"ja-JP",韩语:"ko-KR",荷兰语:"nl-NL","荷兰语(比利时)":"nl-BE",波兰语:"pl-PL",葡萄牙语:"pt-PT","葡萄牙语(巴西)":"pt-BR",俄语:"ru-RU",土耳其语:"tr-TR",瑞典语:"sv-SE",希伯来语:"he-IL",罗马尼亚语:"ro-RO",泰语:"th-TH",斯洛伐克语:"sk-SK",阿拉伯语:"ar-SA",匈牙利语:"hu-HU",希腊语:"el-GR",挪威语:"nb-NO",丹麦语:"da-DK",芬兰语:"fi-FI",捷克语:"cs-CZ"},Pe=we()(xe),Se={"中文(简体)":"zh",英语:"en",法语:"fr",西班牙语:"es",荷兰语:"nl",葡萄牙语:"pt"};we()(Se).zh="中文";const ke=window.navigator.userAgent,Ce=ke.includes("Mac"),Re=ke.includes("Chrome"),Te=ke.includes("Edg"),Ee=Re&&!Te,Ie=ke.includes("Firefox");function Ae(e){return e.split(".").map((e=>Number(e)))}const Me=Ae(i().runtime.getManifest().version);function _e(e,t){const n="string"==typeof e?Ae(e):e,s="string"==typeof t?Ae(t):t,o=Math.max(n.length,s.length);for(let e=0;e<o;e++){const t=n[e]||0,o=s[e]||0;if(t<o)return-1;if(t>o)return 1}return 0}function Le(e){return _e(e,Me)}const Ke=b()("audio"),De=K()(_.g2,["audioVolume","audioRate","systemTTS","systemTTSVoice","systemTTSAccent"]);let Oe,Be=_.g2.audioVolume,$e=_.g2.audioRate,Ve=_.g2.systemTTS,Ye=_.g2.systemTTSVoice,Fe=_.g2.systemTTSAccent;async function qe(){return(await i().tabs.query({active:!0,highlighted:!0,windowId:i().windows.WINDOW_ID_CURRENT}))[0]}var Ne;let Ge,Ue;(0,D.A)(De,(e=>{null!=e.audioRate&&($e=e.audioRate,Oe&&(Oe.playbackRate=$e)),null!=e.audioVolume&&(Be=e.audioVolume,Oe&&(Oe.volume=Be/100)),null!=e.systemTTS&&(Ve=e.systemTTS),null!=e.systemTTSVoice&&(Ye=e.systemTTSVoice),null!=e.systemTTSAccent&&(Fe=e.systemTTSAccent)})),i().windows.onRemoved.addListener((e=>{Ge===e&&(Ge=void 0)})),null!==(Ne=window)&&void 0!==Ne&&null!==(Ne=Ne.chrome)&&void 0!==Ne&&null!==(Ne=Ne.windows)&&void 0!==Ne&&Ne.onBoundsChanged&&chrome.windows.onBoundsChanged.addListener((e=>{e.id===Ge&&i().storage.local.set({panelPos:K()(e,["width","height","left","top"])})}));const ze=K()(_.g2,["panelPos"]);async function He(){const{panelPos:e}=await i().storage.local.get(ze),t={...e};return e.left<0&&(t.left=0),e.top<0&&(t.top=0),t}const We=K()(_.g2,["panelFocus"]);function je(e,t){return i().windows.create({url:i().runtime.getURL("panel.html")+"?text="+encodeURIComponent(e),type:"popup",...t})}async function Xe(e=""){if(void 0!==Ge&&void 0!==Ue){const t=[i().tabs.sendMessage(Ue,{action:"translateInPopup",data:e})];await async function(){const{panelFocus:e}=await i().storage.local.get(We);return e}()&&t.push(i().windows.update(Ge,{focused:!0})),await Promise.all(t)}else{const t=await He();let n,s=Ie;try{n=await je(e,t)}catch(t){s=!1,n=await je(e,_.g2.panelPos)}s&&n.id&&i().windows.update(n.id,{top:t.top,left:t.left}),Ge=n.id,Ue=n.tabs&&n.tabs[0].id}}async function Qe(e="",t,n=!0){var s;if(!t&&!(t=null===(s=await qe())||void 0===s?void 0:s.id))return void(n&&Xe(e));try{await i().tabs.sendMessage(t,"translate")}catch(t){n&&Xe(e)}}n(8697),n(8096),n(14293);function Ze(e){const t=e.match(/^(([^:]+):\/\/)?([^/]+)?(\/.*)?$/);if(!t)return;let n=t[3]||"";const s=n.indexOf(":");s>=0&&(n=n.slice(0,s));let o=t[4]||"";const a=o.indexOf("#");if(a>=0&&(o=o.slice(0,a)),!n.startsWith(".")){if(!o){if(!n)return;o="/"}return{host:n,path:o}}}function Je(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(t)}function et(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(t)}function tt(e,t,n){let s,o;s="string"==typeof e?Ze(e):e;let a=!1,r=!1;if(s){const e=e=>{const t=function(e,t){let n;if(n="string"==typeof t?Ze(t):t,n)return Je(e.host,n.host)&&et(e.path,n.path)}(e,s);return t&&(o=e),t};a=n.some(e),a||(r=t.some(e))}return{urlParts:s,matchedRule:o,whiteListMatched:a,blackListMatched:r}}async function nt(e){const t=await f(e);if(!t)return;const n=await async function(e){const t=await f(e);if(!t)return;const n=t.id;let s=t.url;if(!s&&n)try{if(s=(await g(n,{code:"location.href",runAt:"document_start"}))[0],s.startsWith("moz-extension"))return}catch(e){}return s}(t);if(n)return n;const s=t.id;if(s)try{return await i().tabs.sendMessage(s,"get tab url")}catch(e){}}n(83165),n(24541),n(34397),n(61412),n(91883),n(70286);const st=i().runtime.getURL("/pdf-viewer/web/viewer.html"),ot=K()(_.g2,["pdfStandalone"]);function at(e){return e.startsWith(st)}function rt(e){let t,n,s;e&&("string"==typeof e?t=e:(t=e.file,n=e.blocked,s=e.incognito));let o="",a="";if(t){const e=new URL(t);o+=`&file=${encodeURIComponent(t)}`,a=e.hash}return n&&(o+="&_blocked"),s&&(o+="&_incognito"),st+o.replace("&","?")+a}function it(e){return async function(e){const{pdfStandalone:t}=await i().storage.local.get(ot);let n;if(t)n=await i().windows.create({url:e,type:"popup"});else{const t=await i().tabs.create({url:e});n=await i().windows.get(t.windowId)}n.focused||await i().windows.update(n.id,{drawAttention:!0})}(rt(e))}async function ct(e){return"normal"===(await i().windows.get(e)).type}async function lt(e){if(!e)return void await i().browserAction.setIcon({path:"logogray.png"});if(at(e))return void await i().browserAction.setIcon({path:"logodark.png"});const{domainBlackList:t,domainWhiteList:n}=await i().storage.local.get(K()(_.g2,["domainBlackList","domainWhiteList"])),s=function(e,t,n){const s=tt(e,t,n);return!s.urlParts||s.whiteListMatched||!s.blackListMatched}(e,t,n);await i().browserAction.setIcon({path:s?"logodark.png":"logogray.png"})}async function dt(e){let t,n;if(e)t=e.tabId,n=e.windowId;else{const e=await qe();if(!e)return lt();t=e.id,n=e.windowId}if(null==n||await ct(n))return lt(await nt(t))}dt(),i().tabs.onActivated.addListener((e=>{dt(e)})),i().tabs.onUpdated.addListener(((e,t)=>{"loading"===t.status&&dt()})),i().windows.onFocusChanged.addListener((async e=>{e!==i().windows.WINDOW_ID_NONE&&await ct(e)&&dt()})),i().storage.onChanged.addListener(((e,t)=>{"local"===t&&(e.hasOwnProperty("domainBlackList")||e.hasOwnProperty("domainWhiteList"))&&dt()}));var ut=n(67396);class pt extends ut.Ay{constructor(){super("hcfy"),this.version(3).stores({historyRecords:"id,date,_id,syncStatus",favorites:"id,date,text,_id,syncStatus"}),this.historyRecords=this.table("historyRecords"),this.favorites=this.table("favorites")}}const ht=new pt;n(48605),n(85100),n(27162),n(66403),n(94154),n(64777),n(38846),n(62896);var gt=n(3514),mt=n.n(gt),ft=n(79071),yt=n.n(ft),wt=n(38285),vt=n.n(wt);const bt=(e,t)=>{e._id?(e.deleted=!0,e.syncStatus=xt.Pending):delete t.value};let xt=function(e){return e.Pending="Pending",e}({});class Pt{constructor(e,t,n,s,o,a,r,i){this.table=e,this.syncKeys=t.concat("date"),this.getDataFromServer=n,this.syncTimeStorageKey=s,this.deleteData=o,this.commitChanges=a,this.pullChanges=r,this.deleteLogsFn=i}async add(e,t){const n={...e},s=Date.now();n.id=vt()(s+"-"),n.date=s,n.syncStatus=xt.Pending,await this.table.add(n),t&&this.commit().catch(yt())}async deleteById(e,t){await this.table.where("id").anyOf(e).modify(bt),t&&this.commit().catch(yt())}async deleteAll(e){let t;e&&(t=await this.deleteData()),await this.table.clear(),t&&await this.setSyncTime(t)}async deleteByKey(e,t,n){await this.table.where(e).equalsIgnoreCase(t).modify(bt),n&&this.commit().catch(yt())}async hasByKey(e,t){return await this.table.where(e).equalsIgnoreCase(t).and((e=>!e.deleted)).count()>0}query(e,t,n){const s=t?this.table.where("date").below(t).reverse():this.table.orderBy("date").reverse();return s.filter(n?e=>!e.deleted&&n(e):e=>!e.deleted),s.limit(e).toArray()}queryAll(){return this.table.orderBy("date").reverse().filter((e=>!e.deleted)).toArray()}async getSyncChanges(){const e=await this.table.where("syncStatus").equals(xt.Pending).toArray(),t=[],n=[],s=[];return e.forEach((e=>{e._id?e.deleted&&s.push(e._id):(t.push(K()(e,this.syncKeys)),n.push(e.id))})),{changes:{added:mt()(t)?void 0:t,deleted:mt()(s)?void 0:s},addedLocalIds:n}}addServerData(e){return ht.transaction("rw",this.table,(async()=>{const t=Date.now()+"-",n=e.map((e=>(e.id=vt()(t),e._id)));await this.table.where("_id").anyOf(n).delete(),await this.table.bulkAdd(e)}))}async downloadData(e){const t=await this.getDataFromServer(e),n=t.list;return Array.isArray(n)&&n.length&&await this.addServerData(n),t.date}setSyncTime(e){return i().storage.local.set({[this.syncTimeStorageKey]:e})}async commit(){const{changes:e,addedLocalIds:t}=await this.getSyncChanges(),n=await this.commitChanges(e);mt()(n)||await this.table.where("id").anyOf(t).modify((e=>{const s=t.indexOf(e.id);s>=0&&(e._id=n[s],delete e.syncStatus)}))}async pull(e){const t=(await i().storage.local.get(this.syncTimeStorageKey))[this.syncTimeStorageKey];if(!t){const e=await this.downloadData();return await this.setSyncTime(e),this.deleteLogsFn(e).catch(yt()),!0}if(!e)return!1;const{changes:n,date:s}=await this.pullChanges(t);let o;const a=n.reduce(((e,t)=>{var n,s;return t.deleteAll?(e.added.clear(),e.deleted.clear(),o=!0,e):(null===(n=t.added)||void 0===n||n.forEach((t=>{e.added.add(t)})),null===(s=t.deleted)||void 0===s||s.forEach((t=>{e.added.has(t)?e.added.delete(t):e.deleted.add(t)})),e)}),{added:new Set,deleted:new Set});let r,c=[];const l=!!a.added.size;a.added.size&&(c=await this.table.where("_id").anyOf(Array.from(a.added)).toArray(),c.forEach((e=>{a.added.delete(e._id)})),a.added.size&&(r=(await this.getDataFromServer(Array.from(a.added))).list));const d=o||!!r||!!a.deleted.size;return d&&await ht.transaction("rw",this.table,(async()=>{o&&(await this.table.clear(),!mt()(c)&&await this.table.bulkAdd(c));const e=[];return r&&e.push(this.addServerData(r)),a.deleted.size&&e.push(this.table.where("_id").anyOf(Array.from(a.deleted)).delete()),Promise.all(e)})),await this.setSyncTime(s),(d||l)&&this.deleteLogsFn(s).catch(yt()),d}}var St=n(7276);const kt=new Pt(ht.historyRecords,["text","url","favicon","title"],(async e=>(await St.c.post("/histories",e)).data),"historiesSyncAt",(async()=>(await St.c.delete("/histories")).data),(async e=>(await St.c.put("/histories",e)).data),(async e=>(await St.c.get("/histories?lastCheck="+e)).data),(e=>St.c.delete("/histories/logs?date="+e)));var Ct=n(77948),Rt=n.n(Ct);const Tt=new Pt(ht.favorites,["text","dir"],(async e=>(await St.c.post("/favorites",e)).data),"favoritesSyncAt",(async()=>(await St.c.delete("/favorites")).data),(async e=>(await St.c.put("/favorites",e)).data),(async e=>(await St.c.get("/favorites?lastCheck="+e)).data),(e=>St.c.delete("/favorites/logs?date="+e)));let Et,It,At=()=>{At=yt(),Et=document.createElement("textarea"),Et.style.position="absolute",Et.style.top="-99999px",document.body.appendChild(Et)};let Mt=()=>{Mt=yt(),It=document.createElement("div"),It.style.position="absolute",It.style.top="-99999px",It.contentEditable="true",document.body.appendChild(It)};function _t(){if(Mt(),It.innerHTML="",It.focus(),document.execCommand("paste")){const e=It.getElementsByTagName("img")[0];if(e)return e.src}return!1}function Lt(){const e=_t();if(e)return{type:"image",dataURI:e};const t=(At(),Et.value="",Et.focus(),!!document.execCommand("paste")&&Et.value);return"string"==typeof t&&{type:"text",text:t}}const Kt=K()(_.Ne,["user"]);async function Dt(){const{user:e}=await i().storage.local.get(Kt);return!!e&&e.vipActivated}var Ot=n(12128),Bt=n(10192),$t=n(56357),Vt=n(72431);const Yt={workerPath:"worker.min.js",corePath:"tesseract-core.js",langPath:"https://tessdata.projectnaptha.com/4.0.0_best",workerBlobURL:!1},Ft={id:Vt.P2.Tesseract,name:"Tesseract OCR",free:!0};class qt extends $t.m{constructor(){super(Ft)}async callByFree(e){const t=await(0,Bt.createWorker)(Yt);await t.loadLanguage(e.lang),await t.initialize(e.lang),await t.setParameters({tessjs_create_hocr:"0",tessjs_create_tsv:"0",preserve_interword_spaces:"1"});const n=await t.recognize(e.image);return t.terminate(),n.data}transform(e){return e.paragraphs.map((e=>e.text.trim().replace(/\r?\n/g," "))).join("\n")}}const Nt=new qt;var Gt=n(50657);const Ut=K()(_.g2,["ocrService","localOCR"]),zt=new Ot.y("ocrLimit",50);const Ht=F.A.create({baseURL:"https://hcfy.app/"}),Wt={...K()(_.Ne,["user"]),...K()(_.g2,["noticesRead"])};let jt=[];async function Xt(e){if(e)try{jt=await Ht.get("/notices.json").then((e=>e.data)),Wt.noticesRead=Wt.noticesRead.filter((e=>jt.find((t=>t.id===e)))),i().storage.local.set({noticesRead:Wt.noticesRead})}catch(e){}const t=function(e,t,n){let s=0;return{filteredNotices:e.filter((e=>{if(e.filter){if(e.filter.noFree&&(null==t||!t.vipActivated))return!1;if(e.filter.noVip&&null!=t&&t.vipActivated&&!t.forever)return!1;if(e.filter.noForever&&null!=t&&t.forever)return!1;if(e.filter.noChrome&&Ee)return!1;if(e.filter.noEdge&&Te)return!1;if(e.filter.noFirefox&&Ie)return!1;const n=Date.now();if(e.filter.start&&e.filter.start>n)return!1;if(e.filter.end&&e.filter.end<n)return!1;if(e.filter.versionStart&&Le(e.filter.versionStart)>0)return!1;if(e.filter.versionEnd&&Le(e.filter.versionEnd)<0)return!1}return n.includes(e.id)||(s+=1),!0})),unreadNum:s}}(jt,Wt.user,Wt.noticesRead);i().storage.local.set({noticesUnreadNum:t.unreadNum,noticesFiltered:t.filteredNotices})}const Qt="fetch-notices-alarm";i().alarms.create(Qt,{periodInMinutes:60}),i().alarms.onAlarm.addListener((async e=>{e.name===Qt&&Xt(!0)})),(0,D.A)(Wt,((e,t)=>{void 0!==e.user&&(Wt.user=e.user),e.noticesRead&&(Wt.noticesRead=e.noticesRead),Xt(!!t)})),(0,D.A)({noticesUnreadNum:0},(e=>{var t;null!=e.noticesUnreadNum&&(t=e.noticesUnreadNum,i().browserAction.setBadgeText({text:t?String(t):""}))}));var Zt=n(38232);function Jt(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function en(e,t,n){return e.set(nn(e,t),n),n}function tn(e,t){return e.get(nn(e,t))}function nn(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var sn=new WeakMap,on=new WeakMap;class an extends y.A{constructor(...e){super(...e),Jt(this,sn,void 0),Jt(this,on,void 0)}get running(){return null!=tn(sn,this)}start(){this.running||en(sn,this,setInterval((()=>{let e;try{e=Zt.Ns.read()}catch(e){return this.stop(),void this.emit("error",e)}const t=tn(on,this);e!==t&&(en(on,this,e),null!=t&&this.emit("change",e))}),500))}stop(){en(on,this,void 0),tn(sn,this)&&(clearInterval(tn(sn,this)),en(sn,this,void 0))}}const rn=new an;rn.on("error",(e=>{console.error(e)})),rn.on("change",(e=>{Xe(e)}));const cn=rn,ln=i().runtime.getURL("settings.html");i().runtime.onMessage.addListener((e=>{switch(e.action){case"open options page":return e.suffix?i().tabs.create({url:ln+e.suffix}).then(yt()):i().runtime.openOptionsPage();case"translate":return async function(e){const t=pe(e.apiCode);let n=e.destinations;if(!n){const e=await i().storage.local.get(he),t=e.secondDestinationLatestSource&&e.latestSource?e.latestSource:e.secondDestination;n=e.destination===t?[e.destination]:[e.destination,t]}return t.translate({text:e.text,destinations:n,source:e.source})}(e.data);case"audio":return async function(e){Oe&&Oe.pause(),speechSynthesis.cancel();try{if("prior"===Ve)throw new Error("由于用户设置了始终使用系统语音朗读，所以主动抛出错误");let t;if(e.ttsURI)t=e.ttsURI;else if(e.source){const n=pe(e.apiId);t=await n.getTTS(e.text,e.source)}if(!t)throw new Error("跳过");await new Promise(((e,n)=>{Oe=new Audio(t),Oe.volume=Be/100,Oe.playbackRate=$e,Oe.addEventListener("canplay",(()=>{var t;null===(t=Oe)||void 0===t||t.play(),e()})),Oe.addEventListener("error",(()=>{n()}))}))}catch(t){if("none"===Ve)throw t;return new Promise((async(t,n)=>{Ke("开始用系统语音朗读 %O",e);const s=new SpeechSynthesisUtterance(e.text);s.volume=Be/100,s.rate=$e;const o=window.setTimeout((()=>{let e;speechSynthesis.cancel(),s.lang&&(e=Pe[s.lang]),n(new Error("系统语音朗读超时。"+(Ee?`Chrome 浏览器提供的网络语音需要连接外网才能使用。你也可以前往设置中选择本地语音朗读${e||""}。`:`如果你的网络状况不佳，可以前往设置中选择本地语音朗读${e||""}。`)))}),2e3);s.addEventListener("start",(()=>{window.clearTimeout(o),t()})),s.addEventListener("error",(e=>{n(e)}));const a=e.source&&Se[e.source];if(a){const e=Fe[a];e&&(Ke("指定用户选择的口音："+e),s.lang=e)}const r=s.lang||e.source&&xe[e.source];if(r){s.lang||(s.lang=r,Ke("指定文本的语种："+r));const e=Ye[r];if(e)try{const{voicesGroup:t}=await be(),n=t[r];if(n){const t=n.find((t=>t.name===e));t&&(Ke("指定系统语音："+t.name),s.voice=t)}}catch(e){}else if(Ce&&"en-US"===r){const e=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Wobble","Eddy","Flo"];try{const{voicesGroup:t}=await be(),n=t[r];if(n){const t=n.find((t=>e.every((e=>!t.name.startsWith(e)))));t&&(Ke("为朗读英语（美国）的 macOS 用户指定系统语音："+t.name),s.voice=t)}}catch(e){}}}Ke("开始朗读"),window.speechSynthesis.speak(s)}))}}(e.url);case"open panel":return Xe();case"update panel pos":return async function(){if(null==Ge)return;const e=await He();await i().windows.update(Ge,{...e,focused:!0})}();case"update badge":return dt();case"save history record":return Dt().then((t=>kt.add(e.record,t)));case"save favorite":return Dt().then((t=>{const n=e.record.results;return n&&(e.record.dir=function(e){const t=[];fe()(e,(e=>{if(!e)return;const n=e.from+" "+e.to,s=t.findIndex((e=>e[0]===n));s>=0?t[s][1]+=1:t.push([n,1])}));const n=Rt()(t,(e=>e[1]));if(n){const e=n[0].split(" ");return{from:e[0],to:e[1]}}}(n)),Tt.add(e.record,t)}));case"is text in favorites":return async function(e){return Tt.hasByKey("text",e)}(e.text);case"delete record in favorites":return Dt().then((t=>Tt.deleteByKey("text",e.text,t)));case"write to clipboard":let n=!1;cn.running&&(n=!0,cn.stop());const s=(t=e.text,At(),Et.value=t,Et.select(),document.execCommand("copy"));return n&&cn.start(),Promise.resolve(s);case"take screenshot":return i().tabs.captureVisibleTab(i().windows.WINDOW_ID_CURRENT,{format:"png"});case"ocr":return async function(e){if(await zt.isOver()){const e=zt.dateEnd;throw new Error(`非会员每七天只能使用 50 次截图翻译功能，下次重置时间：${e}。成为会员即可解除此限制。`)}let t;const{ocrService:n,localOCR:s}=await i().storage.local.get(Ut);switch(n){case"tesseractocr":t=await Nt.ocr({image:e,lang:s.lang});break;case"bdocr":t=await Gt.Gm.ocr({image:e});break;default:throw new TypeError(`不支持的 OCR 服务：${n}`)}return await zt.addOne(),t}(e.dataURI);case"sync data":return Promise.all([kt,Tt].map((e=>e.commit())));case"refresh notices":return Xt(!0);case"get user sid":return St.c.get("https://hs-api.limingkai.cn/sid").then((e=>e.data.sid));case"read clipboard":return Promise.resolve(Lt());case"read clipboard image":return Promise.resolve(_t());case"open pdf viewer":return it(e.params);case"set clipboard monitor":return void(e.data?cn.start():cn.stop())}var t}));const dn=K()(_.g2,["pdfAuto","pdfStandalone"]);let un=dn.pdfStandalone;function pn(e){const{url:t,tabId:n,frameId:s}=e;return i().tabs.get(n).then((e=>{e.incognito?(s||i().tabs.remove(n),it({file:t,incognito:!0})):un&&(s||i().tabs.remove(n),it(t))})),un?{cancel:!0}:{redirectUrl:rt(e.url)}}function hn(e){var t;if("GET"!==e.method)return;let n,s;return null===(t=e.responseHeaders)||void 0===t||t.some((e=>{var t;switch(e.name.toLowerCase()){case"content-type":n=e.value;break;case"content-disposition":s=null===(t=e.value)||void 0===t?void 0:t.trim()}return!(!n||!s)})),n?(n=n.toLowerCase().split(";",1)[0].trim(),"application/pdf"!==n||s&&!s.startsWith("inline")?void 0:pn(e)):void 0}(0,D.A)(dn,(e=>{null!=e.pdfAuto&&(e.pdfAuto?(i().webRequest.onBeforeRequest.hasListener(pn)||i().webRequest.onBeforeRequest.addListener(pn,{urls:["ftp://*/*.pdf","ftp://*/*.PDF","file://*/*.pdf","file://*/*.PDF"],types:["main_frame","sub_frame"]},["blocking"]),i().webRequest.onHeadersReceived.hasListener(hn)||i().webRequest.onHeadersReceived.addListener(hn,{urls:["http://*/*","https://*/*"],types:["main_frame","sub_frame"]},["blocking","responseHeaders"])):(i().webRequest.onBeforeRequest.removeListener(pn),i().webRequest.onHeadersReceived.removeListener(hn))),null!=e.pdfStandalone&&(un=e.pdfStandalone)}));var gn=n(72846),mn=n.n(gn);const fn={YouDao:"YouDaoWeb",BaiDu:"BaiDuWeb",Google:"GoogleWeb",GoogleCN:"GoogleWeb"};i().runtime.onInstalled.addListener((async e=>{if("install"!==e.reason)if("update"!==e.reason);else{const t=e.previousVersion?e.previousVersion.split(".").map((e=>Number(e))):void 0,n=7===(null==t?void 0:t[0]);if(t&&6===t[0]){const e=await i().storage.local.get(),t={};if(t.pdfAuto=null!=e.pdf&&e.pdf,e.disableSelection)t.domainBlackList=[{host:"*",path:"/*"}];else{const n=e.excludeDomains;Array.isArray(n)&&(t.domainBlackList=n.map((e=>({host:`*${"."===e[0]?"":"."}${e}`,path:"/*"}))))}null!=e.showBtn&&(t.button=e.showBtn);const n=e.defaultApi||"GoogleCN",s=fn[n];s&&(t.selectedAPIs=[s]);const o=mn()(_.g2.textList);let a=!1;e.ignoreChinese&&(o[0].enabled=!0,a=!0),e.ignoreNumLike||(o[1].enabled=!1,a=!0),a&&(t.textList=o),await i().storage.local.clear(),await i().storage.local.set(t)}if(t&&n&&t[1]<=3){const{modifierKey:e}=await i().storage.local.get("modifierKey");!1!==e&&await i().storage.local.set({modifierKeys:["ctrl"],modifierKeyPressedAction:"selection",modifierKeyTranslate:!0}),await i().storage.local.remove(["region","tipNewGoogleAPI","modifierKey"])}if(t&&n&&(t[1]<5||5===t[1]&&t[2]<=2)&&await Promise.all([ht.favorites,ht.historyRecords].map((e=>e.filter((e=>!e._id&&!e.syncStatus)).modify({syncStatus:xt.Pending})))),t&&n&&(t[1]<5||5===t[1]&&t[2]<=5)){const{selectedAPIs:e}=await i().storage.local.get("selectedAPIs");e||await i().storage.local.set({selectedAPIs:["BaiDuWeb"]})}if(t&&n&&(t[1]<5||5===t[1]&&t[2]<=6)&&await i().storage.local.set({pinIgnoreDomainList:!1}),t&&_e(t,"8.0.0")<=0){const{baiDuOCRKey:e}=await i().storage.local.get("baiDuOCRKey");if(null!=e&&e.secret||null!=e&&e.key){e.legacy=!0;const t=e.secret&&e.key;await i().storage.local.set(t?{baiDuOCRKey:e,ocrService:"bdocr"}:{baiDuOCRKey:e})}}if(t&&_e(t,"8.5.6")<=0&&await i().storage.local.set({pinAfterDrag:!0}),t&&_e(t,"8.6.0")<=0&&await i().storage.local.set({textAreaShortKey:_.o0.ctrlEnter}),t&&_e(t,"8.6.1")<=0&&await i().storage.local.set({panelButtons:["cut","translate","video","media","microphone"]}),t&&_e(t,"8.6.3")<=0){const{buttonAutoClose:e,pdfAuto:t,autoClipboard:n,autoClipboardImage:s}=await i().storage.local.get(["buttonAutoClose","pdfAuto","autoClipboard","autoClipboardImage"]),o={};null==e&&(o.buttonAutoClose=!1),null==t&&(o.pdfAuto=!0),null==n&&(o.autoClipboard=!0),null==s&&(o.autoClipboardImage=!0),await i().storage.local.set(o)}if(t&&_e(t,"8.6.6")<=0&&await i().storage.local.set({tipForPageTrsClosed:!0}),t&&_e(t,"8.6.8")<=0&&await i().storage.local.set({tipForAddJumpTwoClosed:!1}),t&&_e(t,"8.6.10")<=0){const e=K()(_.Ne,["baiDuAppKey","baiDuOCRKey","youDaoAppKey","aLiApiKey","qqApiKey","cyApiToken"]),t={baiDuAppKey:"bdPoints",baiDuOCRKey:"bdOcrPoints",youDaoAppKey:"ydPoints",aLiApiKey:"aliPoints",qqApiKey:"qqPoints",cyApiToken:"cyPoints"},n=await i().storage.local.get(e),s={tipForServicesUpdateClosed:!1};fe()(n,((e,n)=>{Array.isArray(e)||("string"==typeof e?e&&(s[t[n]]=!1):"secret"in e?e.secret&&e.key&&(s[t[n]]=!1):e.id&&e.key&&(s[t[n]]=!1))})),await i().storage.local.set(s)}if(t&&_e(t,"9.6.0")<=0&&await i().storage.local.set({pageTrsResultStyleId:"STYLE_DOTTED_CLASSIC"}),t&&_e(t,"9.8.0")<=0){const{pageTrsResultStyleId:e}=await i().storage.local.get("pageTrsResultStyleId");e||await i().storage.local.set({pageTrsResultStyleId:"STYLE_BACKGROUND"})}if(t&&_e(t,"9.8.1.1")<=0){const{width:e,selectedAPIs:t}=await i().storage.local.get(["width","selectedAPIs"]),n={tipForFullTextClosed:!0};e||(n.width=250),t||(n.selectedAPIs=["GoogleWeb","DeepLWeb","BingDictWeb"]),await i().storage.local.set(n)}if(t&&_e(t,"9.8.2")<=0&&await i().storage.local.set({tipForSaveSourceSelectClosed:!1}),t&&_e(t,"10.5.0")<=0){const e={electronics:"it",mechanics:"machinery",medicine:"senimed"},{baiduDomain:t}=await i().storage.local.get("baiduDomain"),n=t&&e[t];n&&await i().storage.local.set({baiduDomain:n})}if(t&&_e(t,"10.5.1")<=0){let{chatGPTEndpoint:e}=await i().storage.local.get("chatGPTEndpoint");e&&(e.endsWith("/")||(e+="/"),await i().storage.local.set({chatGPTEndpoint:`${e}v1/chat/completions`}))}}else i().tabs.create({url:"https://hcfy.app/docs/guides/welcome"})}));const yn=K()(_.g2,["quickLinks"]),wn=K()(_.g2,["quickLinks","contextMenus"]),vn=["*://*/*","file://*/*","ftp://*/*",rt()+"*"],bn=["page","frame","link","editable","image","video","audio"],xn=[{id:"screenshot-translate-in-action",title:"截图翻译",contexts:["browser_action"]},{id:"page-translate-in-action",title:"网页全文翻译",contexts:["browser_action"]},{id:"open-pdf-in-action",title:"内置 PDF 阅读器",contexts:["browser_action"]},{id:"open-panel-in-action",title:"独立翻译窗口",contexts:["browser_action"]}];Ie&&xn.push({id:"open-options-in-action",title:"设置",contexts:["browser_action"]});const Pn={translate:{id:"translate",title:"翻译这段文本(&Z)",contexts:["selection"]},"open-link-in-viewer":{id:"open-link-in-viewer",title:"在划词翻译中打开此 PDF (&P)",contexts:["link"],targetUrlPatterns:["*://*/*.pdf","*://*/*.PDF","*://*/*.pdf?*","*://*/*.PDF?*","ftp://*/*.pdf","ftp://*/*.PDF","ftp://*/*.pdf?*","ftp://*/*.PDF?*","file://*/*.pdf","file://*/*.PDF","file://*/*.pdf?*","file://*/*.PDF?*"]},"screen-translate":{id:"screen-translate",title:"截图翻译",contexts:bn,documentUrlPatterns:vn},"page-translate":{id:"page-translate",title:"网页全文翻译",contexts:["page","frame"],documentUrlPatterns:vn},"video-translate":{id:"video-translate",title:"音视频翻译",contexts:bn,documentUrlPatterns:vn}},Sn={id:"sp-for-quick-link",contexts:["selection"],type:"separator"},kn="quick-link-",Cn=e=>`${kn}${e.name}`;(0,D.A)(wn,(()=>{!async function(){await i().contextMenus.removeAll();const{contextMenus:e,quickLinks:t}=await i().storage.local.get(wn),n=t.filter((e=>e.menu));e.length&&e.forEach((e=>{const t=Pn[e];t&&i().contextMenus.create(t)})),e.length&&n.length&&i().contextMenus.create(Sn),n.forEach((e=>{i().contextMenus.create({id:Cn(e),contexts:["selection"],title:e.name})})),xn.forEach((e=>{i().contextMenus.create(e)}))}()})),i().contextMenus.onClicked.addListener((async(e,t)=>{switch(e.menuItemId){case"open-options-in-action":i().runtime.openOptionsPage();break;case"open-panel-in-action":Xe();break;case"translate":const n=e.selectionText,s=e.pageUrl||"";n&&(s.startsWith("chrome")&&!at(s)||s.startsWith("about")||!Ie&&s.startsWith("https://chrome.google.com")?Xe(n):Qe(n,null==t?void 0:t.id));break;case"open-pdf-in-action":it();break;case"open-link-in-viewer":e.linkUrl&&it(e.linkUrl);break;case"screen-translate":case"screenshot-translate-in-action":if(null!=t&&t.id)try{await i().tabs.sendMessage(t.id,"screenshot translate")}catch(e){}break;case"page-translate":case"page-translate-in-action":if(null!=t&&t.id)try{await i().tabs.sendMessage(t.id,"page translate")}catch(e){}break;case"video-translate":if(null!=t&&t.id)try{await i().tabs.sendMessage(t.id,"video translate")}catch(e){}break;default:if("string"==typeof e.menuItemId&&e.menuItemId.startsWith(kn)){const t=e.menuItemId.slice(11),n=(await i().storage.local.get(yn)).quickLinks.find((e=>e.name===t));n&&i().tabs.create({url:n.link.replace("%s",encodeURIComponent(e.selectionText||""))})}}}));n(27534);const Rn=K()(_.g2,["domainBlackList"]);i().commands.onCommand.addListener((async e=>{var t,n,s,o,a,r;let c;switch(e){case"panel":Xe();break;case"translate":Qe("",void 0,!1);break;case"translateWithPopup":if(c=null===(t=await qe())||void 0===t?void 0:t.id,c)try{Xe(await i().tabs.sendMessage(c,"getSelectionText"))}catch(e){}break;case"screenshot":if(c=null===(n=await qe())||void 0===n?void 0:n.id,c)try{await i().tabs.sendMessage(c,"screenshot translate")}catch(e){}break;case"page":if(c=null===(s=await qe())||void 0===s?void 0:s.id,c)try{await i().tabs.sendMessage(c,"page translate")}catch(e){}break;case"pageSwitchMode":if(c=null===(o=await qe())||void 0===o?void 0:o.id,c)try{await i().tabs.sendMessage(c,"page translate switch mode")}catch(e){}break;case"hoverTranslate":if(c=null===(a=await qe())||void 0===a?void 0:a.id,c)try{await i().tabs.sendMessage(c,"hover translate")}catch(e){}break;case"switchWeb":const{domainBlackList:e}=await i().storage.local.get(Rn),l=e.findIndex((e=>"*"===e.host&&"/*"===e.path));l>=0?e.splice(l,1):e.unshift({host:"*",path:"/*"}),await i().storage.local.set({domainBlackList:e});break;case"play":if(c=null===(r=await qe())||void 0===r?void 0:r.id,c)try{await i().tabs.sendMessage(c,"play")}catch(e){}}}));var Tn=n(12784),En=n.n(Tn),In=(n(64727),n(38792)),An=n.n(In);async function Mn(){const e=await i().storage.local.get(_.g2),t=await St.c.put("/options",{options:JSON.stringify(e)});await i().storage.local.set({optionsSyncAt:t.data})}async function _n(){const e=await async function(e){let t;e||(t=(await i().storage.local.get("optionsSyncAt")).optionsSyncAt);const n=await St.c.get("/options",{params:{ifModifiedSince:t}});if(204===n.status)return"no-data";if(304===n.status)return"not-modified";const s=n.data;if(!s)return"server-data-error";let o;try{o=JSON.parse(s.optionsString)}catch(e){return"server-data-error"}return An()(await i().storage.local.get(_.g2),o)?(await i().storage.local.set({optionsSyncAt:s.updatedAt}),"not-modified"):e||t?(o.optionsSyncAt=s.updatedAt,await i().storage.local.set(o),"covered"):{status:"need-confirm",date:s.updatedAt}}();return"no-data"===e?(await Mn(),"uploaded"):e}const Ln=K()(_.Ne,"user"),Kn={..._.g2,...K()(_.Ne,["optionsSyncAt"])},Dn=En()(Mn,5e3);let On;const Bn="sync alarm",$n="notify for options sync",Vn=K()(_.g2,["notifySyncOptions"]);async function Yn(){let e;try{e=await _n()}catch(e){return}if("covered"===e&&await i().permissions.contains({permissions:["notifications"]})){const{notifySyncOptions:e}=await i().storage.local.get(Vn);if(e)try{await i().notifications.create($n,{type:"basic",iconUrl:"logodark.png",title:"划词翻译设置已更新",message:"已将划词翻译设置更新至最新版本。"})}catch(e){i().storage.local.set({disabledNofiByBrowserUI:!0})}}}function Fn(e){e.name===Bn&&Yn()}function qn(e){return`https://translate.google.com/translate?sl=auto&tl=zh-CN&u=${e}`}function Nn(e){return`https://translate.sogoucdn.com/pcvtsnapshot?from=auto&to=zh-CHS&tfr=translatepc&url=${encodeURIComponent(e)}&domainType=sogou`}function Gn(e){return`http://webtrans.yodao.com/webTransPc/index.html#/?url=${encodeURIComponent(e)}&from=auto&to=auto&type=1`}(0,D.A)(Ln,((e,t)=>{var n;null!==(n=e.user)&&void 0!==n&&n.vipActivated?(On=(0,D.A)(Kn,(e=>{Object.prototype.hasOwnProperty.call(e,"optionsSyncAt")||Dn()}),yt()),i().alarms.create(Bn,{periodInMinutes:60}),i().alarms.onAlarm.addListener(Fn),t&&Yn()):(On&&On(),i().alarms.clear(Bn),i().alarms.onAlarm.removeListener(Fn))}));var Un=n(42889);const zn=n.n(Un)()({exact:!0,strict:!1});function Hn(e){return zn.test(e)}const Wn=Re?e=>`<match>${e.k}</match>  <dim>${e.v}</dim>`:e=>`${e.k} ${e.v}`,jn=e=>e?"翻译这段文本":"请输入想要翻译的文本或网址。",Xn=["谷歌翻译","搜狗翻译","有道翻译"];let Qn;i().omnibox.onInputStarted.addListener((()=>{i().omnibox.setDefaultSuggestion({description:jn("")})})),i().omnibox.onInputChanged.addListener(((e,t)=>{const n=vt()();Qn=n,e?Hn(e)?(i().omnibox.setDefaultSuggestion({description:"使用百度翻译此网址"}),t(Xn.map((t=>({content:t+" "+e,description:`使用${t}此网址`}))))):async function(e){return(await F.A.post("https://fanyi.baidu.com/sug",{kw:e})).data.data||[]}(e).then((s=>{if(Qn===n){if(!s.length)return i().omnibox.setDefaultSuggestion({description:jn(e)}),void t([]);i().omnibox.setDefaultSuggestion({description:Wn(s[0])}),t(s.slice(1).map((e=>({content:e.k,description:Wn(e)}))))}})):i().omnibox.setDefaultSuggestion({description:jn("")})})),i().omnibox.onInputEntered.addListener((e=>{if(Hn(e))return void i().tabs.create({url:(t=e,`https://fanyi.baidu.com/transpage?query=${encodeURIComponent(t)}&from=auto&to=zh&source=url&render=1`)});var t;const n=e.split(" ");if(2===n.length&&Xn.includes(n[0])){const e=n[1];switch(n[0]){case"谷歌翻译":i().tabs.create({url:qn(e)});break;case"搜狗翻译":i().tabs.create({url:Nn(e)});break;case"有道翻译":i().tabs.create({url:Gn(e)})}}else Xe(e)}));const Zn=K()(_.g2,["popupAction"]);let Jn=Zn.popupAction;(0,D.A)(Zn,(e=>{e.popupAction&&(Jn=e.popupAction,i().browserAction.setPopup({popup:"show-popup"===e.popupAction?"popup.html":""}))})),i().browserAction.onClicked.addListener((e=>{if(e.id)switch(Jn){case"open-webpage-trs":i().tabs.sendMessage(e.id,"page translate").catch(yt());break;case"open-panel":Xe()}}))},17368:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});n(97107);var s=n(1783),o=n(23298);class a extends Error{constructor(e,t){super(e),null!==(null==t?void 0:t.type)&&(this.type=(null==t?void 0:t.type)||s.V.OTHER),this.link=null==t?void 0:t.link,this.context=null==t?void 0:t.context,this.errors=null==t?void 0:t.errors,this.noRetry=null==t?void 0:t.noRetry}toJSON(){var e;return{type:this.type,message:this.message,link:this.link,errors:null===(e=this.errors)||void 0===e?void 0:e.map((e=>(0,o.x)(e).toJSON()))}}clone(){return new a(this.message,{context:this.context,type:this.type,link:this.link,errors:this.errors,noRetry:this.noRetry})}}},34426:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});n(97107);var s=n(17368),o=n(46123),a=n.n(o);function r(e){if(e instanceof s.F)return e;if(e instanceof Error)return new s.F(e.message,{type:null});const t=a()(e,"message");return"string"==typeof t?new s.F(t,{type:null}):new s.F("划词翻译内部出现了一个预期之外的错误，如果你看到了这条消息，请反馈给我。",{type:null})}},62337:(e,t,n)=>{"use strict";n(96959)},12980:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});n(62234),n(69375);function s(e,t){e.includes(t)||e.push(t)}},51018:(e,t,n)=>{"use strict";n.d(t,{Q3:()=>u.Q,$5:()=>r.$,Z5:()=>g,Z4:()=>i.Z,$2:()=>l,qs:()=>o,RG:()=>d.R,_:()=>c,fm:()=>a.f});n(33873),n(69375),n(47010);var s=n(17546);function o(e){const t=[];return s(e,((e,n)=>{const s=Array.isArray(e)?e:[e];t.push(...s.map((e=>`${n}=${null==e?"":encodeURIComponent(e)}`)))})),t.join("&")}n(29516);var a=n(64347),r=n(37581),i=n(2643);const c=AbortSignal.timeout?function(e){return AbortSignal.timeout(e)}:function(e){const t=new AbortController;return setTimeout((()=>{t.abort()}),e),t.signal};n(93648),n(10865),n(7212);function l(e){let t=null;return function(){return t||(t=e().finally((()=>{t=null})),t)}}var d=n(31531),u=n(12980);n(15400),n(51934),n(97770),n(99687),n(97107);function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends Error{constructor(e,t,n){const s=t instanceof Response;var o;super(s?`Request failed with status code ${t.status}.`:(o=t)instanceof Error?o.message:"Unknown error. See `error.cause` for details."),p(this,"request",void 0),p(this,"response",void 0),p(this,"url",void 0),this.request=n,this.url=e,this.name="FetchError",s?this.response=t:this.cause=t}}function g(e,t){return fetch(e,t).then((n=>{if(!n.ok)throw new h(e,n,t);return n}),(n=>{throw new h(e,n,t)}))}},29516:(e,t,n)=>{"use strict";n(22053)},31531:(e,t,n)=>{"use strict";function s(e,t){const n=e.indexOf(t);return n>=0&&e.splice(n,1),n}n.d(t,{R:()=>s})},93648:(e,t,n)=>{"use strict";n(10865)},64347:(e,t,n)=>{"use strict";n.d(t,{f:()=>s});n(10865);function s(e,t){return new Promise(((n,s)=>{const o=Object.assign({timeout:1e3,interval:50,count:0},t);let a,r,i;o.timeout>0&&(i=setTimeout((()=>{r&&clearTimeout(r),s(a)}),o.timeout));let c=0;(async function t(){let n;c+=1;try{n=await e()}catch(e){if(c===o.count)throw i&&clearTimeout(i),e;return a=e,new Promise(((e,n)=>{r=setTimeout((()=>{t().then(e,n)}),o.interval)}))}return i&&clearTimeout(i),n})().then(n,s)}))}},23810:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});n(97107),n(33873),n(69375),n(47010);function s(e,t,n){o(e,t),t.set(e,n)}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t,n){return e.set(i(e,t),n),n}function r(e,t){return e.get(i(e,t))}function i(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function c(e){const t=document.createElement(e);return"div"===e&&(t.contentEditable="true"),t.style.position="absolute",t.style.top="-99999px",document.body.appendChild(t),t}function l(e){return"TEXTAREA"===e.tagName}var d=new WeakMap,u=new WeakMap,p=new WeakSet;function h(e){return"textarea"===e?r(u,this)||a(u,this,c("textarea")):r(d,this)||a(d,this,c("div"))}const g=new class{constructor(){var e,t;o(e=this,t=p),t.add(e),s(this,d,void 0),s(this,u,void 0)}read(e="text"){const t="text"===e?i(p,this,h).call(this,"textarea"):i(p,this,h).call(this,"div");if(l(t)?t.value="":t.textContent="",t.focus(),!document.execCommand("paste"))throw new Error('document.execCommand("paste") returns false.');if(l(t))return t.value;if("html"===e)return t.innerHTML;if("dom"===e)return t.cloneNode(!0);if("images"===e){const e=t.getElementsByTagName("img"),n=[];for(const t of e)n.push(t.src);return n}}write(e){const t=i(p,this,h).call(this,"textarea");if(t.value=e,t.focus(),t.select(),!document.execCommand("copy"))throw new Error('document.execCommand("copy") returns false.')}clear(){r(u,this)&&(document.removeChild(r(u,this)),a(u,this,void 0)),r(d,this)&&(document.removeChild(r(d,this)),a(d,this,void 0))}}},6229:(e,t,n)=>{"use strict";n(33873),n(47010)},67863:(e,t,n)=>{"use strict";n(97107),n(64727),n(64347),n(6229)},38232:(e,t,n)=>{"use strict";n.d(t,{Ns:()=>s.A});n(6229),n(67863);var s=n(23810);n(3161)}},n={};function s(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=t,e=[],s.O=(t,n,o,a)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],i=!0,c=0;c<n.length;c++)(!1&a||r>=a)&&Object.keys(s.O).every((e=>s.O[e](n[c])))?n.splice(c--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={199:0,756:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[r,i,c]=n,l=0;if(r.some((t=>0!==e[t]))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(c)var d=c(s)}for(t&&t(n);l<r.length;l++)a=r[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},n=self.webpackChunkbrowser_extension=self.webpackChunkbrowser_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=s.O(void 0,[375,702,592,984,189,821],(()=>s(9959)));o=s.O(o)})();