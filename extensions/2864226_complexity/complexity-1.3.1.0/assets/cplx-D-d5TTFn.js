import{j as e,g as w,t as r,G as y,L as v}from"./cplx-DEt7CUyc.js";import{a2 as b,a3 as C}from"./cplx-CejnDNPm.js";import{u as F,T as S}from"./cplx-C5kY8KYf.js";import{r as E}from"./cplx-M4JPizzD.js";import{B as l}from"./cplx-CCGYIZQf.js";import{D as L,g as B,a as k,b as N,c as O,d as P,e as A}from"./cplx-BsCYqTWz.js";import{u as g}from"./cplx-CgmVhoKz.js";import{a1 as f}from"./cplx-CVsLL7Ku.js";import"./cplx-BbAh7E-i.js";import"./cplx-Cdcyb6EG.js";import"./cplx-OhnDHSjW.js";import"./cplx-b9fF-OTI.js";import"./cplx-CXGk_GMP.js";import"./cplx-CCS6eJc0.js";import"./cplx-D9K5ecXe.js";import"./cplx-DyEN9tFf.js";import"./cplx-BF52nfpw.js";import"./cplx-DSnlyBAv.js";import"./cplx-km2FGkQ4.js";import"./cplx-CzQHx1MX.js";function K({isDeleting:t,onDelete:i}){const[n,o]=E.useState(!1);return e.jsxs(L,{unmountOnExit:!0,open:n,onOpenChange:({open:a})=>o(a),children:[e.jsx(B,{asChild:!0,children:e.jsx(l,{type:"button",variant:"outline",size:"icon",children:e.jsx(b,{})})}),e.jsxs(k,{children:[e.jsxs(N,{children:[e.jsx(O,{children:"Delete Theme"}),e.jsx(P,{children:"Are you sure you want to delete this theme? This action cannot be undone."})]}),e.jsxs(A,{children:[e.jsx(l,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(l,{variant:"destructive",disabled:t,onClick:i,children:"Delete"})]})]})]})}function Y(t){var u,d,h,p;const i={title:t.title,fonts:((u=t.config)==null?void 0:u.fonts)??{ui:"",mono:""},accentColor:((d=t.config)==null?void 0:d.accentColor)??"",enhanceThreadTypography:((h=t.config)==null?void 0:h.enhanceThreadTypography)??!1,customCss:((p=t.config)==null?void 0:p.customCss)??""},n=w(),{form:o,generateThemeData:a}=F(i),{mutateAsync:c,isPending:x}=g({mutationKey:["customTheme","edit",t.id],mutationFn:async s=>{const m=await a(s);return await f().update({...t,...m,config:s}),t},onSuccess:(s,m)=>{o.reset({...i,...m}),r({title:"✅ Theme saved",description:"Your theme has been saved successfully"})},onError:s=>{r({title:"❌ Failed to save theme",description:s.message})}}),{mutateAsync:T,isPending:j}=g({mutationKey:["customTheme","delete",t.id],mutationFn:async()=>{await f().delete(t.id)},onSuccess:()=>{n(".."),r({title:"✅ Theme deleted",description:"Your theme has been deleted successfully"})},onError:s=>{r({title:"❌ Failed to delete theme",description:s.message})}}),D=o.handleSubmit(s=>c(s));return{form:o,isPending:x,onSubmit:D,deleteTheme:T,isDeleting:j}}function ie(){const t=y(),{form:i,isPending:n,onSubmit:o,deleteTheme:a,isDeleting:c}=Y(t);return e.jsxs("div",{className:"tw-max-w-3xl tw-space-y-6",children:[e.jsxs(v,{to:"/themes",className:"tw-mb-4 tw-flex tw-items-center tw-gap-2 tw-text-muted-foreground tw-transition hover:tw-text-foreground",children:[e.jsx(C,{}),"Back to themes"]}),e.jsx("div",{children:e.jsx("h1",{className:"tw-mb-2 tw-text-2xl tw-font-bold",children:"Editing Theme"})}),e.jsx(S,{form:i,isPending:n,submitText:"Save Changes",footer:e.jsx(K,{isDeleting:c,onDelete:a}),onSubmit:o})]})}export{ie as default};
