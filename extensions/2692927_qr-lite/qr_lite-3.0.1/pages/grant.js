(()=>{"use strict";const e=browser;function t(e){return document.querySelector(e)}function n(e){return document.querySelectorAll(e)}function i(e,...t){t.forEach((t=>{"string"==typeof t?n(t).forEach((t=>t.classList.add(e))):t.classList.add(e)}))}function r(e,...t){t.forEach((t=>{"string"==typeof t?n(t).forEach((t=>t.classList.remove(e))):t.classList.remove(e)}))}(async()=>{let n,a;switch(window.location.search){case"?camera":a=".grant-camera",n=()=>navigator.mediaDevices.getUserMedia({video:!0,audio:!1});break;case"?all-urls":a=".grant-all-urls",n=()=>e.permissions.request({origins:["<all_urls>"]});break;default:return}document.title=e.i18n.getMessage("grant_permissions_window_title"),function(t){const n=t.innerHTML,i={version:e.runtime.getManifest().version};t.parentElement.innerHTML=n.replace(/{{__MSG_(\w+)__}}/g,(function(t,n,r){const a=i[n]||e.i18n.getMessage(n);return n.endsWith("html")?a:a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}))}(t("#template")),r("hidden",a),t("#refresh").addEventListener("click",(()=>window.location.reload())),t("#close").addEventListener("click",(()=>window.close())),t("#trigger").addEventListener("click",(async()=>{let e;try{e=await n()}catch(e){}e?(i("hidden","#initial"),r("hidden","#granted"),i("hidden","#blocked")):(i("hidden","#initial"),i("hidden","#granted"),r("hidden","#blocked"))})),r("hidden",`#initial ${a}`)})()})();