import{g as D,j as e,t as p}from"./cplx-DEt7CUyc.js";import{b as A}from"./cplx-C-SYgQKx.js";import{e as I,b as T,a8 as L,a9 as O,a0 as M}from"./cplx-CejnDNPm.js";import{e as G}from"./cplx--i0pL27w.js";import{B as o,U as P}from"./cplx-CCGYIZQf.js";import{D as B,a as F,b as R,c as b}from"./cplx-D6x2E8AM.js";import{S}from"./cplx-b9fF-OTI.js";import{A as E,u as W}from"./cplx-hUtawQMb.js";import{D as u,g as m,a as w,b as j,c as g,e as _,d as k,f as z}from"./cplx-BsCYqTWz.js";import{E as f,a as v}from"./cplx-CVsLL7Ku.js";import{s as q}from"./cplx-Cdcyb6EG.js";import{r as x}from"./cplx-M4JPizzD.js";import{E as H}from"./cplx-BkTdWkYU.js";import{T as J}from"./cplx-DyEN9tFf.js";import{e as U}from"./cplx-2ekRUlSR.js";import{u as Y}from"./cplx-fWvIhvmK.js";import{u as $}from"./cplx-BA4LeNkX.js";import"./cplx-BbAh7E-i.js";import"./cplx-DSnlyBAv.js";import"./cplx-CXGk_GMP.js";import"./cplx-B19A3gYQ.js";import"./cplx-CCS6eJc0.js";import"./cplx-D9K5ecXe.js";import"./cplx-CzQHx1MX.js";import"./cplx-DLB-E6VW.js";import"./cplx-B42KOvrD.js";import"./cplx-km2FGkQ4.js";import"./cplx-D3LDHngQ.js";import"./cplx-BkZI4zpB.js";import"./cplx-CgmVhoKz.js";function K(){const i=D(),t=async()=>{await f.clearAll(),await v.clearAll(),i("/plugins")};return e.jsxs(u,{children:[e.jsx(m,{asChild:!0,children:e.jsx(o,{variant:"outline",children:"Clear All Data"})}),e.jsxs(w,{children:[e.jsx(j,{children:e.jsx(g,{children:"Clear All Data"})}),e.jsxs("div",{children:["Are you sure you want to clear all extension data? This action cannot be undone and will wipe the following data:",e.jsxs(P,{children:[e.jsx("li",{children:"Extension settings"}),e.jsx("li",{children:"All custom themes, code blocks rules, etc."}),e.jsx("li",{children:"And any other data stored by the extension"})]})]}),e.jsxs(_,{children:[e.jsx(m,{asChild:!0,children:e.jsx(o,{variant:"outline",children:"Cancel"})}),e.jsx(E,{variant:"destructive",onClick:t,children:"Yes, Clear All Data"})]})]})]})}function Q(){const[i,t]=W({defaultText:"Copy"}),n=x.useCallback(async()=>(await q(300),JSON.stringify({localStorage:await f.exportAll(),db:await v.exportAll()},null,2)),[]),r=x.useCallback(async()=>{const a=await n();await navigator.clipboard.writeText(a),t(e.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2",children:[e.jsx(I,{}),e.jsx("span",{children:"Copied"})]}))},[n,t]),s=x.useCallback(async()=>{try{const a=await n(),d=await(await window.showSaveFilePicker({suggestedName:`complexity-settings-${new Date().toISOString()}.json`,types:[{description:"JSON File",accept:{"application/json":[".json"]}}]})).createWritable();await d.write(a),await d.close()}catch(a){a instanceof Error&&a.name!=="AbortError"&&console.error("Failed to save file:",a)}},[n]);return e.jsxs("div",{className:"tw-flex tw-gap-4",children:[e.jsx(E,{variant:"outline",loadingText:e.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2",children:[e.jsx(T,{className:"tw-animate-spin"}),e.jsx("span",{children:"Exporting"})]}),onClick:r,children:i}),e.jsx(o,{onClick:s,children:"Save as file"})]})}function V({children:i,onSubmit:t}){const n=x.useRef(null);return e.jsxs(u,{closeOnEscape:!1,closeOnInteractOutside:!1,children:[e.jsx(m,{asChild:!0,children:i}),e.jsxs(w,{children:[e.jsxs(j,{children:[e.jsx(g,{children:"Import Data"}),e.jsx(k,{children:"Current settings will be overridden or merged depending on the version of which the data is exported from"})]}),e.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[e.jsx(J,{ref:n,placeholder:"Paste your data here...",className:"tw-min-h-[200px] tw-font-mono"}),e.jsx(z,{asChild:!0,children:e.jsx(o,{onClick:()=>{var r;return t(((r=n.current)==null?void 0:r.value)??"")},children:"Submit"})})]})]})]})}function X(){const i=x.useRef(null),t=async s=>{const[,a]=await U(async()=>{const l=JSON.parse(s);await f.import(l.localStorage),v.import(l.db)})();a?(console.error(a),p({title:"❌ Invalid data"})):p({title:"✅ Data imported"})},n=()=>{var s;(s=i.current)==null||s.click()},r=async s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];if(a){try{await t(await a.text())}catch(d){console.error(d),p({title:"❌ Failed to read file"})}s.target.value=""}};return e.jsxs("div",{className:"tw-flex tw-gap-4",children:[e.jsx("input",{ref:i,type:"file",accept:".json",className:"tw-hidden",onChange:r}),e.jsx(V,{onSubmit:t,children:e.jsx(o,{variant:"outline",children:"Paste as text"})}),e.jsx(o,{onClick:n,children:"Choose file"})]})}const C=["scripting","webNavigation"],N={cookies:{title:"Cookies",description:"Allow the extension to sync settings with your Perplexity.ai preferences. Also used to identify your Supporter status"},scripting:{title:"Scripting",description:"Allow the extension to execute code and apply styles into webpages"},webNavigation:{title:"Web Navigation",description:"Allow the extension to watch for navigation events (for perplexity.ai domains only). We DO NOT use this permission to read your browsing history."}};function Z({children:i}){const{query:{data:t},handleGrantPermission:n,handleRevokePermission:r}=Y();return e.jsxs(u,{children:[e.jsx(m,{asChild:!0,children:i}),e.jsx(w,{children:e.jsxs(j,{children:[e.jsx(g,{children:"Manage Permissions"}),e.jsx(k,{children:"Grant or revoke extension permissions. Please note that some features may be disabled without the necessary permissions."}),C.length>0?C.map(s=>{var a,l,d;return e.jsx("div",{className:"!tw-mt-4 tw-flex tw-flex-col tw-gap-2",children:e.jsx(S,{className:"tw-items-start tw-text-muted-foreground",textLabel:e.jsxs("div",{className:"tw-flex tw-flex-col",children:[e.jsx("div",{children:(a=N[s])==null?void 0:a.title}),e.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:(l=N[s])==null?void 0:l.description})]}),checked:(d=t==null?void 0:t.permissions)==null?void 0:d.includes(s),onCheckedChange:()=>{var y;(y=t==null?void 0:t.permissions)!=null&&y.includes(s)?r({permissions:[s]}):n({permissions:[s]})}})},s)}):e.jsx("div",{className:"tw-mx-auto tw-block tw-italic tw-text-muted-foreground",children:"You're all set!"})]})})]})}function c({title:i,description:t,children:n}){return e.jsxs("div",{className:"tw-flex tw-flex-wrap tw-items-center tw-justify-between tw-gap-4 tw-py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"tw-font-medium",children:i}),t!=null&&e.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:t})]}),n]})}function h({title:i,children:t}){return e.jsxs("section",{children:[e.jsx("h2",{className:"tw-mb-4 tw-text-base tw-font-medium",children:i}),e.jsx("div",{className:"tw-divide-y tw-divide-muted tw-overflow-hidden tw-rounded-md tw-bg-secondary tw-px-4",children:t})]})}function Ie(){const i=D(),{settings:t,mutation:n}=$();return e.jsxs("div",{className:"tw-mx-auto tw-max-w-3xl tw-space-y-8",children:[e.jsxs(h,{title:"General",children:[e.jsx(c,{title:"Extension Permissions",children:e.jsx(Z,{children:e.jsx(o,{children:"Manage"})})}),e.jsx(c,{title:"Extension Icon Action",children:e.jsx(H,{})}),e.jsx(c,{title:e.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2",children:[e.jsx(L,{className:"tw-text-success"}),e.jsx("span",{children:"Energy Saving Mode"})]}),description:e.jsxs("div",{children:[e.jsx("div",{children:"Reduce the extension sensitivity to changes on the page"}),e.jsx("div",{className:"tw-text-sm tw-italic tw-text-muted-foreground",children:"(Existing tabs require a refresh to apply)"})]}),children:e.jsx(S,{checked:t==null?void 0:t.energySavingMode,onCheckedChange:({checked:r})=>n.mutate(s=>s.energySavingMode=r)})}),e.jsx(c,{title:"Onboarding",description:"Go through the onboarding experience again",children:e.jsx(o,{onClick:()=>i("/onboarding"),children:"🚀 Onboarding"})})]}),e.jsxs(h,{title:"Data",children:[e.jsx(c,{title:"Import",description:"Load saved extension's data",children:e.jsx(X,{})}),e.jsx(c,{title:"Export",description:"Download extension's data as a file",children:e.jsx(Q,{})})]}),e.jsx(h,{title:"Support",children:e.jsx(c,{title:"Need assistance?",description:"Get help from the community or email support",children:e.jsxs("div",{className:"tw-flex tw-items-center tw-gap-4",children:[e.jsx(o,{asChild:!0,className:"tw-w-max",children:e.jsxs("a",{href:"https://discord.gg/fxzqdkwmWx",target:"_blank",rel:"noreferrer",children:[e.jsx(G,{className:"tw-mr-2 tw-size-4"}),e.jsx("span",{children:"Discord"})]})}),e.jsxs(B,{children:[e.jsx(F,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(A,{})})}),e.jsxs(R,{children:[e.jsx(b,{asChild:!0,value:"github",children:e.jsxs("a",{href:"https://github.com/pnd280/complexity/issues",target:"_blank",rel:"noreferrer",children:[e.jsx(O,{className:"tw-mr-2 tw-size-4"}),e.jsx("span",{children:"GitHub Issues"})]})}),e.jsx(b,{asChild:!0,value:"mail",children:e.jsxs("a",{href:"mailto:pnd280@gmail.com",target:"_blank",rel:"noreferrer",children:[e.jsx(M,{className:"tw-mr-2 tw-size-4"}),e.jsx("span",{children:"pnd280@gmail.com"})]})})]})]})]})})}),e.jsx(h,{title:"Troubleshooting",children:e.jsx(c,{title:"Reset the extension",children:e.jsx(K,{})})})]})}export{Ie as default};
