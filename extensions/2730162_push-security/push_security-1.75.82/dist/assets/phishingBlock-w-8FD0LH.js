import{b as e}from"./browser-polyfill-BfqLb55p.js";import{s as a,p as t}from"./tippy-CQKUN4J0.js";import{S as l}from"./SafeHtml-KN4mTeRu.js";import{_ as s}from"./Button.vue_vue_type_script_setup_true_lang-DDaL3Au8.js";import{_ as u,a as r}from"./PhishingPreviewVariable.vue_vue_type_script_setup_true_lang-BmLiWZ8I.js";import{r as i,S as o,d as n,c as p,W as v,X as m,b as c,f as h,g,u as d,t as _,q as f,s as x,k as w,p as y,h as b,o as P,F as k,m as $,Y as I,U as L,J as R}from"./FontAwesome-CCo8GKtM.js";import{u as U}from"./useSettings-BaLXaLNb.js";/* empty css              */const j={class:"flex flex-col items-center gap-1 rounded-md px-4 font-thin text-sunny-orange"},B={class:"text-4xl font-light"},S={class:"max-w-[1000px] overflow-y-auto text-center text-xl"},T=n({__name:"PhishingBlock",setup(a){const{mode:t,title:l,subtext:n,ignoreButtonText:L}=function(){const{settings:e}=U(),a=i("OFF"),t=i(""),l=i(""),s=i("");return o(e,(e=>{(null==e?void 0:e.phishing)&&(a.value=e.phishing.mode,t.value=e.phishing.title||"",l.value=e.phishing.subtext||"",s.value=e.phishing.ignore_button_text||"")})),{mode:a,title:t,subtext:l,ignoreButtonText:s}}(),R=i(!1),T=i("BLOCK"),C=i(""),D=i(""),E=i(""),G=i(""),H=i(""),O=i(""),A=i(""),F=p((()=>R.value?D.value.replace(/<a /g,'<a class="text-purple hover:underline"').split(/(\$(?:IDP|URL))/):n.value.replace(/<a /g,'<a class="text-purple hover:underline"').split(/(\$(?:IDP|URL))/))),N=p((()=>R.value?C.value:l.value)),K=p((()=>R.value?T.value:t.value)),M=p((()=>R.value?E.value:L.value)),z=p((()=>R.value?"":G.value.replace(/_/g," ").toLocaleLowerCase()));async function W(){!0===R.value?window.close():(await e.runtime.sendMessage({id:"REQUEST_TEMP_PHISHING_BLOCK_IGNORE",platform:G.value,url:H.value,email:A.value,referrerUrl:O.value,mode:t.value}),window.history.back())}return v(N),e.runtime.onMessage.addListener((function(e){"PHISHING_BLOCK_PAGE_ARGS"===e.id&&("preview"===e.view?(R.value=!0,T.value=e.mode,C.value=e.title,D.value=e.subtext,E.value=e.ignoreButtonText):(A.value=e.email,G.value=e.platform,O.value=e.referrerUrl,H.value=e.url))})),(e,a)=>{const t=u,l=r,i=s,o=m("safe-html");return P(),c(f,null,[h("div",j,[g(d(k),{class:"py-[5px] text-3xl",icon:["fasl","triangle-exclamation"]}),h("h1",B,_(d(N)),1)]),h("div",S,[(P(!0),c(f,null,x(d(F),((e,a)=>(P(),c(f,null,[d(R)?(P(),c(f,{key:0},["$IDP"===e||"$URL"===e?(P(),w(t,{key:`${a}-preview`,tooltip:"$IDP"===e?"The actual IdP sharing the password will be shown here.":"The actual URL that the user was on will be shown here."},{default:y((()=>[$(_(e),1)])),_:2},1032,["tooltip"])):I((P(),c("span",{key:`${a}-part`})),[[o,e]])],64)):(P(),c(f,{key:1},["$IDP"===e?(P(),c("span",{key:`${a}-idp`,class:"capitalize"},_(d(z)),1)):"$URL"===e?(P(),w(l,{key:`${a}-url`,url:d(H)},null,8,["url"])):I((P(),c("span",{key:`${a}-part`})),[[o,e]])],64))],64)))),256))]),"WARN"===d(K)?(P(),w(i,{key:0,color:"dusty-orange",size:"lg",class:"mt-5",onClick:W},{default:y((()=>[$(_(d(M)),1)])),_:1})):b("",!0)],64)}}});a({theme:"push-light",placement:"bottom",animation:!1}),L({render:()=>R(T)}).use(t,{component:"Tippy"}).use(l()).mount("#app");
