var background=function(){"use strict";var d5=Object.defineProperty;var h5=(Zs,Ei,Js)=>Ei in Zs?d5(Zs,Ei,{enumerable:!0,configurable:!0,writable:!0,value:Js}):Zs[Ei]=Js;var pe=(Zs,Ei,Js)=>h5(Zs,typeof Ei!="symbol"?Ei+"":Ei,Js);function Zs(r){return r==null||typeof r=="function"?{main:r}:r}var Ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Js(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function jA(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var o=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return r[n]}})}),t}var lE={exports:{}};(function(r,e){(function(t,n){n(r)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ei,function(t){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)t.exports=globalThis.browser;else{const n="The message port closed before a response was received.",o=i=>{const a={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(a).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class l extends WeakMap{constructor(H,re=void 0){super(re),this.createItem=H}get(H){return this.has(H)||this.set(H,this.createItem(H)),super.get(H)}}const p=j=>j&&typeof j=="object"&&typeof j.then=="function",u=(j,H)=>(...re)=>{i.runtime.lastError?j.reject(new Error(i.runtime.lastError.message)):H.singleCallbackArg||re.length<=1&&H.singleCallbackArg!==!1?j.resolve(re[0]):j.resolve(re)},m=j=>j==1?"argument":"arguments",E=(j,H)=>function(te,...fe){if(fe.length<H.minArgs)throw new Error(`Expected at least ${H.minArgs} ${m(H.minArgs)} for ${j}(), got ${fe.length}`);if(fe.length>H.maxArgs)throw new Error(`Expected at most ${H.maxArgs} ${m(H.maxArgs)} for ${j}(), got ${fe.length}`);return new Promise((Te,Ce)=>{if(H.fallbackToNoCallback)try{te[j](...fe,u({resolve:Te,reject:Ce},H))}catch($){console.warn(`${j} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,$),te[j](...fe),H.fallbackToNoCallback=!1,H.noCallback=!0,Te()}else H.noCallback?(te[j](...fe),Te()):te[j](...fe,u({resolve:Te,reject:Ce},H))})},w=(j,H,re)=>new Proxy(H,{apply(te,fe,Te){return re.call(fe,j,...Te)}});let R=Function.call.bind(Object.prototype.hasOwnProperty);const S=(j,H={},re={})=>{let te=Object.create(null),fe={has(Ce,$){return $ in j||$ in te},get(Ce,$,J){if($ in te)return te[$];if(!($ in j))return;let ge=j[$];if(typeof ge=="function")if(typeof H[$]=="function")ge=w(j,j[$],H[$]);else if(R(re,$)){let ee=E($,re[$]);ge=w(j,j[$],ee)}else ge=ge.bind(j);else if(typeof ge=="object"&&ge!==null&&(R(H,$)||R(re,$)))ge=S(ge,H[$],re[$]);else if(R(re,"*"))ge=S(ge,H[$],re["*"]);else return Object.defineProperty(te,$,{configurable:!0,enumerable:!0,get(){return j[$]},set(ee){j[$]=ee}}),ge;return te[$]=ge,ge},set(Ce,$,J,ge){return $ in te?te[$]=J:j[$]=J,!0},defineProperty(Ce,$,J){return Reflect.defineProperty(te,$,J)},deleteProperty(Ce,$){return Reflect.deleteProperty(te,$)}},Te=Object.create(j);return new Proxy(Te,fe)},P=j=>({addListener(H,re,...te){H.addListener(j.get(re),...te)},hasListener(H,re){return H.hasListener(j.get(re))},removeListener(H,re){H.removeListener(j.get(re))}}),x=new l(j=>typeof j!="function"?j:function(re){const te=S(re,{},{getContent:{minArgs:0,maxArgs:0}});j(te)}),k=new l(j=>typeof j!="function"?j:function(re,te,fe){let Te=!1,Ce,$=new Promise(Ie=>{Ce=function(we){Te=!0,Ie(we)}}),J;try{J=j(re,te,Ce)}catch(Ie){J=Promise.reject(Ie)}const ge=J!==!0&&p(J);if(J!==!0&&!ge&&!Te)return!1;const ee=Ie=>{Ie.then(we=>{fe(we)},we=>{let Be;we&&(we instanceof Error||typeof we.message=="string")?Be=we.message:Be="An unexpected error occurred",fe({__mozWebExtensionPolyfillReject__:!0,message:Be})}).catch(we=>{console.error("Failed to send onMessage rejected reply",we)})};return ee(ge?J:$),!0}),B=({reject:j,resolve:H},re)=>{i.runtime.lastError?i.runtime.lastError.message===n?H():j(new Error(i.runtime.lastError.message)):re&&re.__mozWebExtensionPolyfillReject__?j(new Error(re.message)):H(re)},G=(j,H,re,...te)=>{if(te.length<H.minArgs)throw new Error(`Expected at least ${H.minArgs} ${m(H.minArgs)} for ${j}(), got ${te.length}`);if(te.length>H.maxArgs)throw new Error(`Expected at most ${H.maxArgs} ${m(H.maxArgs)} for ${j}(), got ${te.length}`);return new Promise((fe,Te)=>{const Ce=B.bind(null,{resolve:fe,reject:Te});te.push(Ce),re.sendMessage(...te)})},X={devtools:{network:{onRequestFinished:P(x)}},runtime:{onMessage:P(k),onMessageExternal:P(k),sendMessage:G.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:G.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},F={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return a.privacy={network:{"*":F},services:{"*":F},websites:{"*":F}},S(i,X,a)};t.exports=o(chrome)}})})(lE);var GA=lE.exports;const Gt=Js(GA);var $A=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},eu="1.8.0",fE=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function VA(r){var e=new Set([r]),t=new Set,n=r.match(fE);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(p){return p===r};function i(l){return t.add(l),!1}function a(l){return e.add(l),!0}return function(p){if(e.has(p))return!0;if(t.has(p))return!1;var u=p.match(fE);if(!u)return i(p);var m={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return m.prerelease!=null||o.major!==m.major?i(p):o.major===0?o.minor===m.minor&&o.patch<=m.patch?a(p):i(p):o.minor<=m.minor?a(p):i(p)}}var qA=VA(eu),HA=eu.split(".")[0],rf=Symbol.for("opentelemetry.js.api."+HA),nf=$A;function of(r,e,t,n){var o;n===void 0&&(n=!1);var i=nf[rf]=(o=nf[rf])!==null&&o!==void 0?o:{version:eu};if(!n&&i[r]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+r);return t.error(a.stack||a.message),!1}if(i.version!==eu){var a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+r+" does not match previously registered API v"+eu);return t.error(a.stack||a.message),!1}return i[r]=e,t.debug("@opentelemetry/api: Registered a global for "+r+" v"+eu+"."),!0}function tu(r){var e,t,n=(e=nf[rf])===null||e===void 0?void 0:e.version;if(!(!n||!qA(n)))return(t=nf[rf])===null||t===void 0?void 0:t[r]}function af(r,e){e.debug("@opentelemetry/api: Unregistering a global for "+r+" v"+eu+".");var t=nf[rf];t&&delete t[r]}var WA=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},zA=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},KA=function(){function r(e){this._namespace=e.namespace||"DiagComponentLogger"}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sf("debug",this._namespace,e)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sf("error",this._namespace,e)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sf("info",this._namespace,e)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sf("warn",this._namespace,e)},r.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sf("verbose",this._namespace,e)},r}();function sf(r,e,t){var n=tu("diag");if(n)return t.unshift(e),n[r].apply(n,zA([],WA(t),!1))}var Hr;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(Hr||(Hr={}));function YA(r,e){r<Hr.NONE?r=Hr.NONE:r>Hr.ALL&&(r=Hr.ALL),e=e||{};function t(n,o){var i=e[n];return typeof i=="function"&&r>=o?i.bind(e):function(){}}return{error:t("error",Hr.ERROR),warn:t("warn",Hr.WARN),info:t("info",Hr.INFO),debug:t("debug",Hr.DEBUG),verbose:t("verbose",Hr.VERBOSE)}}var QA=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},XA=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},ZA="diag",So=function(){function r(){function e(o){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var l=tu("diag");if(l)return l[o].apply(l,XA([],QA(i),!1))}}var t=this,n=function(o,i){var a,l,p;if(i===void 0&&(i={logLevel:Hr.INFO}),o===t){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((a=u.stack)!==null&&a!==void 0?a:u.message),!1}typeof i=="number"&&(i={logLevel:i});var m=tu("diag"),E=YA((l=i.logLevel)!==null&&l!==void 0?l:Hr.INFO,o);if(m&&!i.suppressOverrideMessage){var w=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+w),E.warn("Current logger will overwrite one already registered from "+w)}return of("diag",E,t,!0)};t.setLogger=n,t.disable=function(){af(ZA,t)},t.createComponentLogger=function(o){return new KA(o)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return r.instance=function(){return this._instance||(this._instance=new r),this._instance},r}(),JA=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},eI=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tI=function(){function r(e){this._entries=e?new Map(e):new Map}return r.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=JA(e,2),n=t[0],o=t[1];return[n,o]})},r.prototype.setEntry=function(e,t){var n=new r(this._entries);return n._entries.set(e,t),n},r.prototype.removeEntry=function(e){var t=new r(this._entries);return t._entries.delete(e),t},r.prototype.removeEntries=function(){for(var e,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=new r(this._entries);try{for(var a=eI(n),l=a.next();!l.done;l=a.next()){var p=l.value;i._entries.delete(p)}}catch(u){e={error:u}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return i},r.prototype.clear=function(){return new r},r}(),rI=Symbol("BaggageEntryMetadata"),nI=So.instance();function iI(r){return r===void 0&&(r={}),new tI(new Map(Object.entries(r)))}function oI(r){return typeof r!="string"&&(nI.error("Cannot create baggage metadata from unknown type: "+typeof r),r=""),{__TYPE__:rI,toString:function(){return r}}}function Mh(r){return Symbol.for(r)}var aI=function(){function r(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(n){return t._currentContext.get(n)},t.setValue=function(n,o){var i=new r(t._currentContext);return i._currentContext.set(n,o),i},t.deleteValue=function(n){var o=new r(t._currentContext);return o._currentContext.delete(n),o}}return r}(),ru=new aI,gc=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sI=function(){function r(){}return r.prototype.createHistogram=function(e,t){return vI},r.prototype.createCounter=function(e,t){return pI},r.prototype.createUpDownCounter=function(e,t){return mI},r.prototype.createObservableGauge=function(e,t){return yI},r.prototype.createObservableCounter=function(e,t){return gI},r.prototype.createObservableUpDownCounter=function(e,t){return _I},r.prototype.addBatchObservableCallback=function(e,t){},r.prototype.removeBatchObservableCallback=function(e){},r}(),Pm=function(){function r(){}return r}(),uI=function(r){gc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n){},e}(Pm),cI=function(r){gc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n){},e}(Pm),lI=function(r){gc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n){},e}(Pm),xm=function(){function r(){}return r.prototype.addCallback=function(e){},r.prototype.removeCallback=function(e){},r}(),fI=function(r){gc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(xm),dI=function(r){gc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(xm),hI=function(r){gc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(xm),dE=new sI,pI=new uI,vI=new lI,mI=new cI,gI=new fI,yI=new dI,_I=new hI;function EI(){return dE}var pa;(function(r){r[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"})(pa||(pa={}));var bI={get:function(r,e){if(r!=null)return r[e]},keys:function(r){return r==null?[]:Object.keys(r)}},SI={set:function(r,e,t){r!=null&&(r[e]=t)}},wI=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},TI=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},AI=function(){function r(){}return r.prototype.active=function(){return ru},r.prototype.with=function(e,t,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return t.call.apply(t,TI([n],wI(o),!1))},r.prototype.bind=function(e,t){return t},r.prototype.enable=function(){return this},r.prototype.disable=function(){return this},r}(),II=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},OI=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Nm="context",RI=new AI,Lh=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalContextManager=function(e){return of(Nm,e,So.instance())},r.prototype.active=function(){return this._getContextManager().active()},r.prototype.with=function(e,t,n){for(var o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,OI([e,t,n],II(i),!1))},r.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},r.prototype._getContextManager=function(){return tu(Nm)||RI},r.prototype.disable=function(){this._getContextManager().disable(),af(Nm,So.instance())},r}(),va;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(va||(va={}));var hE="0000000000000000",pE="00000000000000000000000000000000",vE={traceId:pE,spanId:hE,traceFlags:va.NONE},uf=function(){function r(e){e===void 0&&(e=vE),this._spanContext=e}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return this},r.prototype.setAttributes=function(e){return this},r.prototype.addEvent=function(e,t){return this},r.prototype.setStatus=function(e){return this},r.prototype.updateName=function(e){return this},r.prototype.end=function(e){},r.prototype.isRecording=function(){return!1},r.prototype.recordException=function(e,t){},r}(),km=Mh("OpenTelemetry Context Key SPAN");function Dm(r){return r.getValue(km)||void 0}function CI(){return Dm(Lh.getInstance().active())}function Mm(r,e){return r.setValue(km,e)}function PI(r){return r.deleteValue(km)}function xI(r,e){return Mm(r,new uf(e))}function mE(r){var e;return(e=Dm(r))===null||e===void 0?void 0:e.spanContext()}var NI=/^([0-9a-f]{32})$/i,kI=/^[0-9a-f]{16}$/i;function gE(r){return NI.test(r)&&r!==pE}function DI(r){return kI.test(r)&&r!==hE}function cf(r){return gE(r.traceId)&&DI(r.spanId)}function MI(r){return new uf(r)}var Lm=Lh.getInstance(),yE=function(){function r(){}return r.prototype.startSpan=function(e,t,n){n===void 0&&(n=Lm.active());var o=!!(t!=null&&t.root);if(o)return new uf;var i=n&&mE(n);return LI(i)&&cf(i)?new uf(i):new uf},r.prototype.startActiveSpan=function(e,t,n,o){var i,a,l;if(!(arguments.length<2)){arguments.length===2?l=t:arguments.length===3?(i=t,l=n):(i=t,a=n,l=o);var p=a??Lm.active(),u=this.startSpan(e,i,p),m=Mm(p,u);return Lm.with(m,l,void 0,u)}},r}();function LI(r){return typeof r=="object"&&typeof r.spanId=="string"&&typeof r.traceId=="string"&&typeof r.traceFlags=="number"}var UI=new yE,FI=function(){function r(e,t,n,o){this._provider=e,this.name=t,this.version=n,this.options=o}return r.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},r.prototype.startActiveSpan=function(e,t,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},r.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):UI},r}(),BI=function(){function r(){}return r.prototype.getTracer=function(e,t,n){return new yE},r}(),jI=new BI,_E=function(){function r(){}return r.prototype.getTracer=function(e,t,n){var o;return(o=this.getDelegateTracer(e,t,n))!==null&&o!==void 0?o:new FI(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:jI},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateTracer=function(e,t,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,t,n)},r}(),Uh;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Uh||(Uh={}));var lf;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(lf||(lf={}));var Um;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(Um||(Um={}));var Dt=Lh.getInstance(),Ue=So.instance(),GI=function(){function r(){}return r.prototype.getMeter=function(e,t,n){return dE},r}(),$I=new GI,Fm="metrics",VI=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalMeterProvider=function(e){return of(Fm,e,So.instance())},r.prototype.getMeterProvider=function(){return tu(Fm)||$I},r.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},r.prototype.disable=function(){af(Fm,So.instance())},r}(),Bm=VI.getInstance(),qI=function(){function r(){}return r.prototype.inject=function(e,t){},r.prototype.extract=function(e,t){return e},r.prototype.fields=function(){return[]},r}(),jm=Mh("OpenTelemetry Baggage Key");function EE(r){return r.getValue(jm)||void 0}function HI(){return EE(Lh.getInstance().active())}function WI(r,e){return r.setValue(jm,e)}function zI(r){return r.deleteValue(jm)}var Gm="propagation",KI=new qI,YI=function(){function r(){this.createBaggage=iI,this.getBaggage=EE,this.getActiveBaggage=HI,this.setBaggage=WI,this.deleteBaggage=zI}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalPropagator=function(e){return of(Gm,e,So.instance())},r.prototype.inject=function(e,t,n){return n===void 0&&(n=SI),this._getGlobalPropagator().inject(e,t,n)},r.prototype.extract=function(e,t,n){return n===void 0&&(n=bI),this._getGlobalPropagator().extract(e,t,n)},r.prototype.fields=function(){return this._getGlobalPropagator().fields()},r.prototype.disable=function(){af(Gm,So.instance())},r.prototype._getGlobalPropagator=function(){return tu(Gm)||KI},r}(),bi=YI.getInstance(),$m="trace",QI=function(){function r(){this._proxyTracerProvider=new _E,this.wrapSpanContext=MI,this.isSpanContextValid=cf,this.deleteSpan=PI,this.getSpan=Dm,this.getActiveSpan=CI,this.getSpanContext=mE,this.setSpan=Mm,this.setSpanContext=xI}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalTracerProvider=function(e){var t=of($m,this._proxyTracerProvider,So.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},r.prototype.getTracerProvider=function(){return tu($m)||this._proxyTracerProvider},r.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},r.prototype.disable=function(){af($m,So.instance()),this._proxyTracerProvider=new _E},r}(),gr=QI.getInstance();const XI={context:Dt,diag:Ue,metrics:Bm,propagation:bi,trace:gr};var Fh;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE"})(Fh||(Fh={}));var yc;(function(r){r[r.HISTOGRAM=0]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",r[r.GAUGE=2]="GAUGE",r[r.SUM=3]="SUM"})(yc||(yc={}));var ZI=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bE=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},SE=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},JI=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},eO=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},tO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function rO(r){return r!=null}function nO(r){var e=Object.keys(r);return e.length===0?"":(e=e.sort(),JSON.stringify(e.map(function(t){return[t,r[t]]})))}function iO(r){var e,t;return r.name+":"+((e=r.version)!==null&&e!==void 0?e:"")+":"+((t=r.schemaUrl)!==null&&t!==void 0?t:"")}var wE=function(r){ZI(e,r);function e(t){var n=r.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error);function ff(r,e){var t,n=new Promise(function(i,a){t=setTimeout(function(){a(new wE("Operation timed out."))},e)});return Promise.race([r,n]).then(function(o){return clearTimeout(t),o},function(o){throw clearTimeout(t),o})}function oO(r){return bE(this,void 0,void 0,function(){var e=this;return SE(this,function(t){return[2,Promise.all(r.map(function(n){return bE(e,void 0,void 0,function(){var o,i;return SE(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n];case 1:return o=a.sent(),[2,{status:"fulfilled",value:o}];case 2:return i=a.sent(),[2,{status:"rejected",reason:i}];case 3:return[2]}})})}))]})})}function aO(r){return r.status==="rejected"}function TE(r,e){var t=[];return r.forEach(function(n){t.push.apply(t,eO([],JI(e(n)),!1))}),t}function sO(r,e){var t,n;if(r.size!==e.size)return!1;try{for(var o=tO(r),i=o.next();!i.done;i=o.next()){var a=i.value;if(!e.has(a))return!1}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}function uO(r,e){for(var t=0,n=r.length-1;n-t>1;){var o=Math.trunc((n+t)/2);r[o]<=e?t=o:n=o-1}return r[n]<=e?n:r[t]<=e?t:-1}function cO(r,e){return r.toLowerCase()===e.toLowerCase()}var nu;(function(r){r[r.DROP=0]="DROP",r[r.SUM=1]="SUM",r[r.LAST_VALUE=2]="LAST_VALUE",r[r.HISTOGRAM=3]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"})(nu||(nu={}));var lO=function(){function r(){this.kind=nu.DROP}return r.prototype.createAccumulation=function(){},r.prototype.merge=function(e,t){},r.prototype.diff=function(e,t){},r.prototype.toMetricData=function(e,t,n,o){},r}(),dr;(function(r){r.COUNTER="COUNTER",r.GAUGE="GAUGE",r.HISTOGRAM="HISTOGRAM",r.UP_DOWN_COUNTER="UP_DOWN_COUNTER",r.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",r.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",r.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(dr||(dr={}));function rs(r,e,t){var n,o,i,a;return pO(r)||Ue.warn('Invalid metric name: "'+r+'". The metric name should be a ASCII string with a length no greater than 255 characters.'),{name:r,type:e,description:(n=t==null?void 0:t.description)!==null&&n!==void 0?n:"",unit:(o=t==null?void 0:t.unit)!==null&&o!==void 0?o:"",valueType:(i=t==null?void 0:t.valueType)!==null&&i!==void 0?i:pa.DOUBLE,advice:(a=t==null?void 0:t.advice)!==null&&a!==void 0?a:{}}}function fO(r,e){var t,n;return{name:(t=r.name)!==null&&t!==void 0?t:e.name,description:(n=r.description)!==null&&n!==void 0?n:e.description,type:e.type,unit:e.unit,valueType:e.valueType,advice:e.advice}}function dO(r,e){return cO(r.name,e.name)&&r.unit===e.unit&&r.type===e.type&&r.valueType===e.valueType}var hO=/^[a-z][a-z0-9_.\-/]{0,254}$/i;function pO(r){return r.match(hO)!=null}var vO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function mO(r){var e=r.map(function(){return 0});return e.push(0),{buckets:{boundaries:r,counts:e},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}var Vm=function(){function r(e,t,n,o){n===void 0&&(n=!0),o===void 0&&(o=mO(t)),this.startTime=e,this._boundaries=t,this._recordMinMax=n,this._current=o}return r.prototype.record=function(e){if(!Number.isNaN(e)){this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);var t=uO(this._boundaries,e);this._current.buckets.counts[t+1]+=1}},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),AE=function(){function r(e,t){this._boundaries=e,this._recordMinMax=t,this.kind=nu.HISTOGRAM}return r.prototype.createAccumulation=function(e){return new Vm(e,this._boundaries,this._recordMinMax)},r.prototype.merge=function(e,t){for(var n=e.toPointValue(),o=t.toPointValue(),i=n.buckets.counts,a=o.buckets.counts,l=new Array(i.length),p=0;p<i.length;p++)l[p]=i[p]+a[p];var u=1/0,m=-1/0;return this._recordMinMax&&(n.hasMinMax&&o.hasMinMax?(u=Math.min(n.min,o.min),m=Math.max(n.max,o.max)):n.hasMinMax?(u=n.min,m=n.max):o.hasMinMax&&(u=o.min,m=o.max)),new Vm(e.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:l},count:n.count+o.count,sum:n.sum+o.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||o.hasMinMax),min:u,max:m})},r.prototype.diff=function(e,t){for(var n=e.toPointValue(),o=t.toPointValue(),i=n.buckets.counts,a=o.buckets.counts,l=new Array(i.length),p=0;p<i.length;p++)l[p]=a[p]-i[p];return new Vm(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:l},count:o.count-n.count,sum:o.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:yc.HISTOGRAM,dataPoints:n.map(function(i){var a=vO(i,2),l=a[0],p=a[1],u=p.toPointValue(),m=e.type===dr.GAUGE||e.type===dr.UP_DOWN_COUNTER||e.type===dr.OBSERVABLE_GAUGE||e.type===dr.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:l,startTime:p.startTime,endTime:o,value:{min:u.hasMinMax?u.min:void 0,max:u.hasMinMax?u.max:void 0,sum:m?void 0:u.sum,buckets:u.buckets,count:u.count}}})}},r}(),qm=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Hm=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},IE=function(){function r(e,t,n,o){e===void 0&&(e=new gO),t===void 0&&(t=0),n===void 0&&(n=0),o===void 0&&(o=0),this.backing=e,this.indexBase=t,this.indexStart=n,this.indexEnd=o}return Object.defineProperty(r.prototype,"offset",{get:function(){return this.indexStart},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1},enumerable:!1,configurable:!0}),r.prototype.counts=function(){var e=this;return Array.from({length:this.length},function(t,n){return e.at(n)})},r.prototype.at=function(e){var t=this.indexBase-this.indexStart;return e<t&&(e+=this.backing.length),e-=t,this.backing.countAt(e)},r.prototype.incrementBucket=function(e,t){this.backing.increment(e,t)},r.prototype.decrementBucket=function(e,t){this.backing.decrement(e,t)},r.prototype.trim=function(){for(var e=0;e<this.length;e++)if(this.at(e)!==0){this.indexStart+=e;break}else if(e===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(var e=this.length-1;e>=0;e--)if(this.at(e)!==0){this.indexEnd-=this.length-e-1;break}this._rotate()},r.prototype.downscale=function(e){this._rotate();for(var t=1+this.indexEnd-this.indexStart,n=1<<e,o=0,i=0,a=this.indexStart;a<=this.indexEnd;){var l=a%n;l<0&&(l+=n);for(var p=l;p<n&&o<t;p++)this._relocateBucket(i,o),o++,a++;i++}this.indexStart>>=e,this.indexEnd>>=e,this.indexBase=this.indexStart},r.prototype.clone=function(){return new r(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)},r.prototype._rotate=function(){var e=this.indexBase-this.indexStart;e!==0&&(e>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,e),this.backing.reverse(e,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+e)),this.indexBase=this.indexStart)},r.prototype._relocateBucket=function(e,t){e!==t&&this.incrementBucket(e,this.backing.emptyBucket(t))},r}(),gO=function(){function r(e){e===void 0&&(e=[0]),this._counts=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this._counts.length},enumerable:!1,configurable:!0}),r.prototype.countAt=function(e){return this._counts[e]},r.prototype.growTo=function(e,t,n){var o=new Array(e).fill(0);o.splice.apply(o,Hm([n,this._counts.length-t],qm(this._counts.slice(t)),!1)),o.splice.apply(o,Hm([0,t],qm(this._counts.slice(0,t)),!1)),this._counts=o},r.prototype.reverse=function(e,t){for(var n=Math.floor((e+t)/2)-e,o=0;o<n;o++){var i=this._counts[e+o];this._counts[e+o]=this._counts[t-o-1],this._counts[t-o-1]=i}},r.prototype.emptyBucket=function(e){var t=this._counts[e];return this._counts[e]=0,t},r.prototype.increment=function(e,t){this._counts[e]+=t},r.prototype.decrement=function(e,t){this._counts[e]>=t?this._counts[e]-=t:this._counts[e]=0},r.prototype.clone=function(){return new r(Hm([],qm(this._counts),!1))},r}(),yO=52,_O=2146435072,EO=1048575,Wm=1023,OE=-Wm+1,RE=Wm,zm=Math.pow(2,-1022);function CE(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=(t&_O)>>20;return n-Wm}function PE(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=e.getUint32(4),o=(t&EO)*Math.pow(2,32);return o+n}function Km(r,e){return r===0||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY||Number.isNaN(r)?r:r*Math.pow(2,e)}function bO(r){return r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r++,r}var SO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),df=function(r){SO(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error),wO=function(){function r(e){this._shift=-e}return r.prototype.mapToIndex=function(e){if(e<zm)return this._minNormalLowerBoundaryIndex();var t=CE(e),n=this._rightShift(PE(e)-1,yO);return t+n>>this._shift},r.prototype.lowerBoundary=function(e){var t=this._minNormalLowerBoundaryIndex();if(e<t)throw new df("underflow: "+e+" is < minimum lower boundary: "+t);var n=this._maxNormalLowerBoundaryIndex();if(e>n)throw new df("overflow: "+e+" is > maximum lower boundary: "+n);return Km(1,e<<this._shift)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._shift===0?0:-this._shift},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){var e=OE>>this._shift;return this._shift<2&&e--,e},r.prototype._maxNormalLowerBoundaryIndex=function(){return RE>>this._shift},r.prototype._rightShift=function(e,t){return Math.floor(e*Math.pow(2,-t))},r}(),TO=function(){function r(e){this._scale=e,this._scaleFactor=Km(Math.LOG2E,e),this._inverseFactor=Km(Math.LN2,-e)}return r.prototype.mapToIndex=function(e){if(e<=zm)return this._minNormalLowerBoundaryIndex()-1;if(PE(e)===0){var t=CE(e);return(t<<this._scale)-1}var n=Math.floor(Math.log(e)*this._scaleFactor),o=this._maxNormalLowerBoundaryIndex();return n>=o?o:n},r.prototype.lowerBoundary=function(e){var t=this._maxNormalLowerBoundaryIndex();if(e>=t){if(e===t)return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor);throw new df("overflow: "+e+" is > maximum lower boundary: "+t)}var n=this._minNormalLowerBoundaryIndex();if(e<=n){if(e===n)return zm;if(e===n-1)return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2;throw new df("overflow: "+e+" is < minimum lower boundary: "+n)}return Math.exp(e*this._inverseFactor)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){return OE<<this._scale},r.prototype._maxNormalLowerBoundaryIndex=function(){return(RE+1<<this._scale)-1},r}(),xE=-10,NE=20,AO=Array.from({length:31},function(r,e){return e>10?new TO(e-10):new wO(e-10)});function kE(r){if(r>NE||r<xE)throw new df("expected scale >= "+xE+" && <= "+NE+", got: "+r);return AO[r+10]}var IO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Bh=function(){function r(e,t){this.low=e,this.high=t}return r.combine=function(e,t){return new r(Math.min(e.low,t.low),Math.max(e.high,t.high))},r}(),OO=20,RO=160,Ym=2,CO=function(){function r(e,t,n,o,i,a,l,p,u,m,E){e===void 0&&(e=e),t===void 0&&(t=RO),n===void 0&&(n=!0),o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),l===void 0&&(l=Number.POSITIVE_INFINITY),p===void 0&&(p=Number.NEGATIVE_INFINITY),u===void 0&&(u=new IE),m===void 0&&(m=new IE),E===void 0&&(E=kE(OO)),this.startTime=e,this._maxSize=t,this._recordMinMax=n,this._sum=o,this._count=i,this._zeroCount=a,this._min=l,this._max=p,this._positive=u,this._negative=m,this._mapping=E,this._maxSize<Ym&&(Ue.warn("Exponential Histogram Max Size set to "+this._maxSize+",                 changing to the minimum size of: "+Ym),this._maxSize=Ym)}return r.prototype.record=function(e){this.updateByIncrement(e,1)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}},Object.defineProperty(r.prototype,"sum",{get:function(){return this._sum},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zeroCount",{get:function(){return this._zeroCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this._count===this._zeroCount?0:this._mapping.scale},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"positive",{get:function(){return this._positive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"negative",{get:function(){return this._negative},enumerable:!1,configurable:!0}),r.prototype.updateByIncrement=function(e,t){if(!Number.isNaN(e)){if(e>this._max&&(this._max=e),e<this._min&&(this._min=e),this._count+=t,e===0){this._zeroCount+=t;return}this._sum+=e*t,e>0?this._updateBuckets(this._positive,e,t):this._updateBuckets(this._negative,-e,t)}},r.prototype.merge=function(e){this._count===0?(this._min=e.min,this._max=e.max):e.count!==0&&(e.min<this.min&&(this._min=e.min),e.max>this.max&&(this._max=e.max)),this.startTime=e.startTime,this._sum+=e.sum,this._count+=e.count,this._zeroCount+=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._mergeBuckets(this.positive,e,e.positive,t),this._mergeBuckets(this.negative,e,e.negative,t)},r.prototype.diff=function(e){this._min=1/0,this._max=-1/0,this._sum-=e.sum,this._count-=e.count,this._zeroCount-=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._diffBuckets(this.positive,e,e.positive,t),this._diffBuckets(this.negative,e,e.negative,t)},r.prototype.clone=function(){return new r(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)},r.prototype._updateBuckets=function(e,t,n){var o=this._mapping.mapToIndex(t),i=!1,a=0,l=0;if(e.length===0?(e.indexStart=o,e.indexEnd=e.indexStart,e.indexBase=e.indexStart):o<e.indexStart&&e.indexEnd-o>=this._maxSize?(i=!0,l=o,a=e.indexEnd):o>e.indexEnd&&o-e.indexStart>=this._maxSize&&(i=!0,l=e.indexStart,a=o),i){var p=this._changeScale(a,l);this._downscale(p),o=this._mapping.mapToIndex(t)}this._incrementIndexBy(e,o,n)},r.prototype._incrementIndexBy=function(e,t,n){if(n!==0){if(e.length===0&&(e.indexStart=e.indexEnd=e.indexBase=t),t<e.indexStart){var o=e.indexEnd-t;o>=e.backing.length&&this._grow(e,o+1),e.indexStart=t}else if(t>e.indexEnd){var o=t-e.indexStart;o>=e.backing.length&&this._grow(e,o+1),e.indexEnd=t}var i=t-e.indexBase;i<0&&(i+=e.backing.length),e.incrementBucket(i,n)}},r.prototype._grow=function(e,t){var n=e.backing.length,o=e.indexBase-e.indexStart,i=n-o,a=bO(t);a>this._maxSize&&(a=this._maxSize);var l=a-o;e.backing.growTo(a,i,l)},r.prototype._changeScale=function(e,t){for(var n=0;e-t>=this._maxSize;)e>>=1,t>>=1,n++;return n},r.prototype._downscale=function(e){if(e!==0){if(e<0)throw new Error("impossible change of scale: "+this.scale);var t=this._mapping.scale-e;this._positive.downscale(e),this._negative.downscale(e),this._mapping=kE(t)}},r.prototype._minScale=function(e){var t=Math.min(this.scale,e.scale),n=Bh.combine(this._highLowAtScale(this.positive,this.scale,t),this._highLowAtScale(e.positive,e.scale,t)),o=Bh.combine(this._highLowAtScale(this.negative,this.scale,t),this._highLowAtScale(e.negative,e.scale,t));return Math.min(t-this._changeScale(n.high,n.low),t-this._changeScale(o.high,o.low))},r.prototype._highLowAtScale=function(e,t,n){if(e.length===0)return new Bh(0,-1);var o=t-n;return new Bh(e.indexStart>>o,e.indexEnd>>o)},r.prototype._mergeBuckets=function(e,t,n,o){for(var i=n.offset,a=t.scale-o,l=0;l<n.length;l++)this._incrementIndexBy(e,i+l>>a,n.at(l))},r.prototype._diffBuckets=function(e,t,n,o){for(var i=n.offset,a=t.scale-o,l=0;l<n.length;l++){var p=i+l>>a,u=p-e.indexBase;u<0&&(u+=e.backing.length),e.decrementBucket(u,n.at(l))}e.trim()},r}(),PO=function(){function r(e,t){this._maxSize=e,this._recordMinMax=t,this.kind=nu.EXPONENTIAL_HISTOGRAM}return r.prototype.createAccumulation=function(e){return new CO(e,this._maxSize,this._recordMinMax)},r.prototype.merge=function(e,t){var n=t.clone();return n.merge(e),n},r.prototype.diff=function(e,t){var n=t.clone();return n.diff(e),n},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:yc.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(function(i){var a=IO(i,2),l=a[0],p=a[1],u=p.toPointValue(),m=e.type===dr.GAUGE||e.type===dr.UP_DOWN_COUNTER||e.type===dr.OBSERVABLE_GAUGE||e.type===dr.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:l,startTime:p.startTime,endTime:o,value:{min:u.hasMinMax?u.min:void 0,max:u.hasMinMax?u.max:void 0,sum:m?void 0:u.sum,positive:{offset:u.positive.offset,bucketCounts:u.positive.bucketCounts},negative:{offset:u.negative.offset,bucketCounts:u.negative.bucketCounts},count:u.count,scale:u.scale,zeroCount:u.zeroCount}}})}},r}(),xO=Mh("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function NO(r){return r.setValue(xO,!0)}function kO(){return function(r){Ue.error(DO(r))}}function DO(r){return typeof r=="string"?r:JSON.stringify(MO(r))}function MO(r){for(var e={},t=r;t!==null;)Object.getOwnPropertyNames(t).forEach(function(n){if(!e[n]){var o=t[n];o&&(e[n]=String(o))}}),t=Object.getPrototypeOf(t);return e}var LO=kO();function UO(r){try{LO(r)}catch{}}var FO="1.25.1",BO="process.runtime.name",jO="service.name",GO="telemetry.sdk.name",$O="telemetry.sdk.language",VO="telemetry.sdk.version",qO=BO,HO=jO,Qm=GO,Xm=$O,Zm=VO,WO="webjs",zO=WO,_c,Jm=(_c={},_c[Qm]="opentelemetry",_c[qO]="browser",_c[Xm]=zO,_c[Zm]=FO,_c);function v5(r){}var KO=6,YO=Math.pow(10,KO);function eg(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*YO);return[t,n]}function jh(r){return r[0]*1e6+r[1]/1e3}var tg;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(tg||(tg={}));function QO(r,e){return new Promise(function(t){Dt.with(NO(Dt.active()),function(){r.export(e,function(n){t(n)})})})}var XO={_export:QO},ZO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},rg=function(){function r(e,t,n){t===void 0&&(t=0),n===void 0&&(n=[0,0]),this.startTime=e,this._current=t,this.sampleTime=n}return r.prototype.record=function(e){this._current=e,this.sampleTime=eg(Date.now())},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),JO=function(){function r(){this.kind=nu.LAST_VALUE}return r.prototype.createAccumulation=function(e){return new rg(e)},r.prototype.merge=function(e,t){var n=jh(t.sampleTime)>=jh(e.sampleTime)?t:e;return new rg(e.startTime,n.toPointValue(),n.sampleTime)},r.prototype.diff=function(e,t){var n=jh(t.sampleTime)>=jh(e.sampleTime)?t:e;return new rg(t.startTime,n.toPointValue(),n.sampleTime)},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:yc.GAUGE,dataPoints:n.map(function(i){var a=ZO(i,2),l=a[0],p=a[1];return{attributes:l,startTime:p.startTime,endTime:o,value:p.toPointValue()}})}},r}(),eR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},hf=function(){function r(e,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1),this.startTime=e,this.monotonic=t,this._current=n,this.reset=o}return r.prototype.record=function(e){this.monotonic&&e<0||(this._current+=e)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),DE=function(){function r(e){this.monotonic=e,this.kind=nu.SUM}return r.prototype.createAccumulation=function(e){return new hf(e,this.monotonic)},r.prototype.merge=function(e,t){var n=e.toPointValue(),o=t.toPointValue();return t.reset?new hf(t.startTime,this.monotonic,o,t.reset):new hf(e.startTime,this.monotonic,n+o)},r.prototype.diff=function(e,t){var n=e.toPointValue(),o=t.toPointValue();return this.monotonic&&n>o?new hf(t.startTime,this.monotonic,o,!0):new hf(t.startTime,this.monotonic,o-n)},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:yc.SUM,dataPoints:n.map(function(i){var a=eR(i,2),l=a[0],p=a[1];return{attributes:l,startTime:p.startTime,endTime:o,value:p.toPointValue()}}),isMonotonic:this.monotonic}},r}(),iu=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ns=function(){function r(){}return r.Drop=function(){return ME},r.Sum=function(){return LE},r.LastValue=function(){return UE},r.Histogram=function(){return FE},r.ExponentialHistogram=function(){return uR},r.Default=function(){return cR},r}(),tR=function(r){iu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new lO,e}(ns),rR=function(r){iu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){switch(t.type){case dr.COUNTER:case dr.OBSERVABLE_COUNTER:case dr.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}},e.MONOTONIC_INSTANCE=new DE(!0),e.NON_MONOTONIC_INSTANCE=new DE(!1),e}(ns),nR=function(r){iu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new JO,e}(ns),iR=function(r){iu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new AE([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0),e}(ns),oR=function(r){iu(e,r);function e(t,n){n===void 0&&(n=!0);var o=r.call(this)||this;if(o._recordMinMax=n,t==null)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");t=t.concat(),t=t.sort(function(l,p){return l-p});var i=t.lastIndexOf(-1/0),a=t.indexOf(1/0);return a===-1&&(a=void 0),o._boundaries=t.slice(i+1,a),o}return e.prototype.createAggregator=function(t){return new AE(this._boundaries,this._recordMinMax)},e}(ns),aR=function(r){iu(e,r);function e(t,n){t===void 0&&(t=160),n===void 0&&(n=!0);var o=r.call(this)||this;return o._maxSize=t,o._recordMinMax=n,o}return e.prototype.createAggregator=function(t){return new PO(this._maxSize,this._recordMinMax)},e}(ns),sR=function(r){iu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._resolve=function(t){switch(t.type){case dr.COUNTER:case dr.UP_DOWN_COUNTER:case dr.OBSERVABLE_COUNTER:case dr.OBSERVABLE_UP_DOWN_COUNTER:return LE;case dr.GAUGE:case dr.OBSERVABLE_GAUGE:return UE;case dr.HISTOGRAM:return t.advice.explicitBucketBoundaries?new oR(t.advice.explicitBucketBoundaries):FE}return Ue.warn("Unable to recognize instrument type: "+t.type),ME},e.prototype.createAggregator=function(t){return this._resolve(t).createAggregator(t)},e}(ns),ME=new tR,LE=new rR,UE=new nR,FE=new iR,uR=new aR,cR=new sR,lR=function(r){return ns.Default()},fR=function(r){return Fh.CUMULATIVE},ng=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},ig=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},BE=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},dR=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},hR=function(){function r(e){var t,n,o;this._shutdown=!1,this._aggregationSelector=(t=e==null?void 0:e.aggregationSelector)!==null&&t!==void 0?t:lR,this._aggregationTemporalitySelector=(n=e==null?void 0:e.aggregationTemporalitySelector)!==null&&n!==void 0?n:fR,this._metricProducers=(o=e==null?void 0:e.metricProducers)!==null&&o!==void 0?o:[]}return r.prototype.setMetricProducer=function(e){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=e,this.onInitialized()},r.prototype.selectAggregation=function(e){return this._aggregationSelector(e)},r.prototype.selectAggregationTemporality=function(e){return this._aggregationTemporalitySelector(e)},r.prototype.onInitialized=function(){},r.prototype.collect=function(e){return ng(this,void 0,void 0,function(){var t,n,o,i,a,l;return ig(this,function(p){switch(p.label){case 0:if(this._sdkMetricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return[4,Promise.all(dR([this._sdkMetricProducer.collect({timeoutMillis:e==null?void 0:e.timeoutMillis})],BE(this._metricProducers.map(function(u){return u.collect({timeoutMillis:e==null?void 0:e.timeoutMillis})})),!1))];case 1:return t=BE.apply(void 0,[p.sent()]),n=t[0],o=t.slice(1),i=n.errors.concat(TE(o,function(u){return u.errors})),a=n.resourceMetrics.resource,l=n.resourceMetrics.scopeMetrics.concat(TE(o,function(u){return u.resourceMetrics.scopeMetrics})),[2,{resourceMetrics:{resource:a,scopeMetrics:l},errors:i}]}})})},r.prototype.shutdown=function(e){return ng(this,void 0,void 0,function(){return ig(this,function(t){switch(t.label){case 0:return this._shutdown?(Ue.error("Cannot call shutdown twice."),[2]):(e==null?void 0:e.timeoutMillis)!=null?[3,2]:[4,this.onShutdown()];case 1:return t.sent(),[3,4];case 2:return[4,ff(this.onShutdown(),e.timeoutMillis)];case 3:t.sent(),t.label=4;case 4:return this._shutdown=!0,[2]}})})},r.prototype.forceFlush=function(e){return ng(this,void 0,void 0,function(){return ig(this,function(t){switch(t.label){case 0:return this._shutdown?(Ue.warn("Cannot forceFlush on already shutdown MetricReader."),[2]):(e==null?void 0:e.timeoutMillis)!=null?[3,2]:[4,this.onForceFlush()];case 1:return t.sent(),[2];case 2:return[4,ff(this.onForceFlush(),e.timeoutMillis)];case 3:return t.sent(),[2]}})})},r}(),pR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pf=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},vf=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},vR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},mR=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},gR=function(r){pR(e,r);function e(t){var n,o,i,a,l=r.call(this,{aggregationSelector:(n=t.exporter.selectAggregation)===null||n===void 0?void 0:n.bind(t.exporter),aggregationTemporalitySelector:(o=t.exporter.selectAggregationTemporality)===null||o===void 0?void 0:o.bind(t.exporter),metricProducers:t.metricProducers})||this;if(t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");return l._exportInterval=(i=t.exportIntervalMillis)!==null&&i!==void 0?i:6e4,l._exportTimeout=(a=t.exportTimeoutMillis)!==null&&a!==void 0?a:3e4,l._exporter=t.exporter,l}return e.prototype._runOnce=function(){return pf(this,void 0,void 0,function(){var t;return vf(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ff(this._doRun(),this._exportTimeout)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),t instanceof wE?(Ue.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout),[2]):(UO(t),[3,3]);case 3:return[2]}})})},e.prototype._doRun=function(){var t,n;return pf(this,void 0,void 0,function(){var o,i,a,l,p,u=this;return vf(this,function(m){switch(m.label){case 0:return[4,this.collect({timeoutMillis:this._exportTimeout})];case 1:return o=m.sent(),i=o.resourceMetrics,a=o.errors,a.length>0&&(p=Ue).error.apply(p,mR(["PeriodicExportingMetricReader: metrics collection errors"],vR(a),!1)),l=function(){return pf(u,void 0,void 0,function(){var E;return vf(this,function(w){switch(w.label){case 0:return[4,XO._export(this._exporter,i)];case 1:if(E=w.sent(),E.code!==tg.SUCCESS)throw new Error("PeriodicExportingMetricReader: metrics export failed (error "+E.error+")");return[2]}})})},i.resource.asyncAttributesPending?((n=(t=i.resource).waitForAsyncAttributes)===null||n===void 0||n.call(t).then(l,function(E){return Ue.debug("Error while resolving async portion of resource: ",E)}),[3,4]):[3,2];case 2:return[4,l()];case 3:m.sent(),m.label=4;case 4:return[2]}})})},e.prototype.onInitialized=function(){var t=this;this._interval=setInterval(function(){t._runOnce()},this._exportInterval),this._interval},e.prototype.onForceFlush=function(){return pf(this,void 0,void 0,function(){return vf(this,function(t){switch(t.label){case 0:return[4,this._runOnce()];case 1:return t.sent(),[4,this._exporter.forceFlush()];case 2:return t.sent(),[2]}})})},e.prototype.onShutdown=function(){return pf(this,void 0,void 0,function(){return vf(this,function(t){switch(t.label){case 0:return this._interval&&clearInterval(this._interval),[4,this._exporter.shutdown()];case 1:return t.sent(),[2]}})})},e}(hR);function yR(){return"unknown_service"}var is=function(){return is=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},is.apply(this,arguments)},_R=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},ER=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},bR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},jE=function(){function r(e,t){var n=this,o;this._attributes=e,this.asyncAttributesPending=t!=null,this._syncAttributes=(o=this._attributes)!==null&&o!==void 0?o:{},this._asyncAttributesPromise=t==null?void 0:t.then(function(i){return n._attributes=Object.assign({},n._attributes,i),n.asyncAttributesPending=!1,i},function(i){return Ue.debug("a resource's async attributes promise rejected: %s",i),n.asyncAttributesPending=!1,{}})}return r.empty=function(){return r.EMPTY},r.default=function(){var e;return new r((e={},e[HO]=yR(),e[Xm]=Jm[Xm],e[Qm]=Jm[Qm],e[Zm]=Jm[Zm],e))},Object.defineProperty(r.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&Ue.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),r.prototype.waitForAsyncAttributes=function(){return _R(this,void 0,void 0,function(){return ER(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},r.prototype.merge=function(e){var t=this,n;if(!e)return this;var o=is(is({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new r(o);var i=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var l,p=bR(a,2),u=p[0],m=p[1];return is(is(is(is({},t._syncAttributes),u),(l=e._syncAttributes)!==null&&l!==void 0?l:e.attributes),m)});return new r(o,i)},r.EMPTY=new r({}),r}(),SR=function(){function r(){this._registeredViews=[]}return r.prototype.addView=function(e){this._registeredViews.push(e)},r.prototype.findViews=function(e,t){var n=this,o=this._registeredViews.filter(function(i){return n._matchInstrument(i.instrumentSelector,e)&&n._matchMeter(i.meterSelector,t)});return o},r.prototype._matchInstrument=function(e,t){return(e.getType()===void 0||t.type===e.getType())&&e.getNameFilter().match(t.name)&&e.getUnitFilter().match(t.unit)},r.prototype._matchMeter=function(e,t){return e.getNameFilter().match(t.name)&&(t.version===void 0||e.getVersionFilter().match(t.version))&&(t.schemaUrl===void 0||e.getSchemaUrlFilter().match(t.schemaUrl))},r}(),ou=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gh=function(){function r(e,t){this._writableMetricStorage=e,this._descriptor=t}return r.prototype._record=function(e,t,n){if(t===void 0&&(t={}),n===void 0&&(n=Dt.active()),typeof e!="number"){Ue.warn("non-number value provided to metric "+this._descriptor.name+": "+e);return}this._descriptor.valueType===pa.INT&&!Number.isInteger(e)&&(Ue.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),e=Math.trunc(e),!Number.isInteger(e))||this._writableMetricStorage.record(e,t,n,eg(Date.now()))},r}(),wR=function(r){ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n,o){this._record(t,n,o)},e}(Gh),TR=function(r){ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n,o){if(t<0){Ue.warn("negative value provided to counter "+this._descriptor.name+": "+t);return}this._record(t,n,o)},e}(Gh),AR=function(r){ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n,o){this._record(t,n,o)},e}(Gh),IR=function(r){ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n,o){if(t<0){Ue.warn("negative value provided to histogram "+this._descriptor.name+": "+t);return}this._record(t,n,o)},e}(Gh),$h=function(){function r(e,t,n){this._observableRegistry=n,this._descriptor=e,this._metricStorages=t}return r.prototype.addCallback=function(e){this._observableRegistry.addCallback(e,this)},r.prototype.removeCallback=function(e){this._observableRegistry.removeCallback(e,this)},r}(),OR=function(r){ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}($h),RR=function(r){ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}($h),CR=function(r){ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}($h);function og(r){return r instanceof $h}var PR=function(){function r(e){this._meterSharedState=e}return r.prototype.createGauge=function(e,t){var n=rs(e,dr.GAUGE,t),o=this._meterSharedState.registerMetricStorage(n);return new AR(o,n)},r.prototype.createHistogram=function(e,t){var n=rs(e,dr.HISTOGRAM,t),o=this._meterSharedState.registerMetricStorage(n);return new IR(o,n)},r.prototype.createCounter=function(e,t){var n=rs(e,dr.COUNTER,t),o=this._meterSharedState.registerMetricStorage(n);return new TR(o,n)},r.prototype.createUpDownCounter=function(e,t){var n=rs(e,dr.UP_DOWN_COUNTER,t),o=this._meterSharedState.registerMetricStorage(n);return new wR(o,n)},r.prototype.createObservableGauge=function(e,t){var n=rs(e,dr.OBSERVABLE_GAUGE,t),o=this._meterSharedState.registerAsyncMetricStorage(n);return new RR(n,o,this._meterSharedState.observableRegistry)},r.prototype.createObservableCounter=function(e,t){var n=rs(e,dr.OBSERVABLE_COUNTER,t),o=this._meterSharedState.registerAsyncMetricStorage(n);return new OR(n,o,this._meterSharedState.observableRegistry)},r.prototype.createObservableUpDownCounter=function(e,t){var n=rs(e,dr.OBSERVABLE_UP_DOWN_COUNTER,t),o=this._meterSharedState.registerAsyncMetricStorage(n);return new CR(n,o,this._meterSharedState.observableRegistry)},r.prototype.addBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)},r.prototype.removeBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)},r}(),GE=function(){function r(e){this._instrumentDescriptor=e}return r.prototype.getInstrumentDescriptor=function(){return this._instrumentDescriptor},r.prototype.updateDescription=function(e){this._instrumentDescriptor=rs(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})},r}(),xR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$E=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},NR=function(){function r(e){this._hash=e,this._valueMap=new Map,this._keyMap=new Map}return r.prototype.get=function(e,t){return t??(t=this._hash(e)),this._valueMap.get(t)},r.prototype.getOrDefault=function(e,t){var n=this._hash(e);if(this._valueMap.has(n))return this._valueMap.get(n);var o=t();return this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,o),o},r.prototype.set=function(e,t,n){n??(n=this._hash(e)),this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,t)},r.prototype.has=function(e,t){return t??(t=this._hash(e)),this._valueMap.has(t)},r.prototype.keys=function(){var e,t;return $E(this,function(n){switch(n.label){case 0:e=this._keyMap.entries(),t=e.next(),n.label=1;case 1:return t.done===!0?[3,3]:[4,[t.value[1],t.value[0]]];case 2:return n.sent(),t=e.next(),[3,1];case 3:return[2]}})},r.prototype.entries=function(){var e,t;return $E(this,function(n){switch(n.label){case 0:e=this._valueMap.entries(),t=e.next(),n.label=1;case 1:return t.done===!0?[3,3]:[4,[this._keyMap.get(t.value[0]),t.value[1],t.value[0]]];case 2:return n.sent(),t=e.next(),[3,1];case 3:return[2]}})},Object.defineProperty(r.prototype,"size",{get:function(){return this._valueMap.size},enumerable:!1,configurable:!0}),r}(),au=function(r){xR(e,r);function e(){return r.call(this,nO)||this}return e}(NR),kR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},VE=function(){function r(e){this._aggregator=e,this._activeCollectionStorage=new au,this._cumulativeMemoStorage=new au}return r.prototype.record=function(e,t,n,o){var i=this,a=this._activeCollectionStorage.getOrDefault(t,function(){return i._aggregator.createAccumulation(o)});a==null||a.record(e)},r.prototype.batchCumulate=function(e,t){var n=this;Array.from(e.entries()).forEach(function(o){var i=kR(o,3),a=i[0],l=i[1],p=i[2],u=n._aggregator.createAccumulation(t);u==null||u.record(l);var m=u;if(n._cumulativeMemoStorage.has(a,p)){var E=n._cumulativeMemoStorage.get(a,p);m=n._aggregator.diff(E,u)}if(n._activeCollectionStorage.has(a,p)){var w=n._activeCollectionStorage.get(a,p);m=n._aggregator.merge(w,m)}n._cumulativeMemoStorage.set(a,u,p),n._activeCollectionStorage.set(a,m,p)})},r.prototype.collect=function(){var e=this._activeCollectionStorage;return this._activeCollectionStorage=new au,e},r}(),ag=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qE=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},HE=function(){function r(e,t){var n=this;this._aggregator=e,this._unreportedAccumulations=new Map,this._reportHistory=new Map,t.forEach(function(o){n._unreportedAccumulations.set(o,[])})}return r.prototype.buildMetrics=function(e,t,n,o){this._stashAccumulations(n);var i=this._getMergedUnreportedAccumulations(e),a=i,l;if(this._reportHistory.has(e)){var p=this._reportHistory.get(e),u=p.collectionTime;l=p.aggregationTemporality,l===Fh.CUMULATIVE?a=r.merge(p.accumulations,i,this._aggregator):a=r.calibrateStartTime(p.accumulations,i,u)}else l=e.selectAggregationTemporality(t.type);this._reportHistory.set(e,{accumulations:a,collectionTime:o,aggregationTemporality:l});var m=DR(a);if(m.length!==0)return this._aggregator.toMetricData(t,l,m,o)},r.prototype._stashAccumulations=function(e){var t,n,o=this._unreportedAccumulations.keys();try{for(var i=ag(o),a=i.next();!a.done;a=i.next()){var l=a.value,p=this._unreportedAccumulations.get(l);p===void 0&&(p=[],this._unreportedAccumulations.set(l,p)),p.push(e)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype._getMergedUnreportedAccumulations=function(e){var t,n,o=new au,i=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),i===void 0)return o;try{for(var a=ag(i),l=a.next();!l.done;l=a.next()){var p=l.value;o=r.merge(o,p,this._aggregator)}}catch(u){t={error:u}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},r.merge=function(e,t,n){for(var o=e,i=t.entries(),a=i.next();a.done!==!0;){var l=qE(a.value,3),p=l[0],u=l[1],m=l[2];if(e.has(p,m)){var E=e.get(p,m),w=n.merge(E,u);o.set(p,w,m)}else o.set(p,u,m);a=i.next()}return o},r.calibrateStartTime=function(e,t,n){var o,i;try{for(var a=ag(e.keys()),l=a.next();!l.done;l=a.next()){var p=qE(l.value,2),u=p[0],m=p[1],E=t.get(u,m);E==null||E.setStartTime(n)}}catch(w){o={error:w}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return t},r}();function DR(r){return Array.from(r.entries())}var MR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),LR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},UR=function(r){MR(e,r);function e(t,n,o,i){var a=r.call(this,t)||this;return a._attributesProcessor=o,a._deltaMetricStorage=new VE(n),a._temporalMetricStorage=new HE(n,i),a}return e.prototype.record=function(t,n){var o=this,i=new au;Array.from(t.entries()).forEach(function(a){var l=LR(a,2),p=l[0],u=l[1];i.set(o._attributesProcessor.process(p),u)}),this._deltaMetricStorage.batchCumulate(i,n)},e.prototype.collect=function(t,n){var o=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,o,n)},e}(GE);function WE(r,e){var t="";return r.unit!==e.unit&&(t+="	- Unit '"+r.unit+"' does not match '"+e.unit+`'
`),r.type!==e.type&&(t+="	- Type '"+r.type+"' does not match '"+e.type+`'
`),r.valueType!==e.valueType&&(t+="	- Value Type '"+r.valueType+"' does not match '"+e.valueType+`'
`),r.description!==e.description&&(t+="	- Description '"+r.description+"' does not match '"+e.description+`'
`),t}function FR(r,e){return"	- use valueType '"+r.valueType+"' on instrument creation or use an instrument name other than '"+e.name+"'"}function BR(r,e){return"	- use unit '"+r.unit+"' on instrument creation or use an instrument name other than '"+e.name+"'"}function jR(r,e){var t={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(t);return"	- create a new view with a name other than '"+r.name+"' and InstrumentSelector '"+n+"'"}function GR(r,e){var t={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(t);return"	- create a new view with a name other than '"+r.name+"' and InstrumentSelector '"+n+`'
    	- OR - create a new view with the name `+r.name+" and description '"+r.description+"' and InstrumentSelector "+n+`
    	- OR - create a new view with the name `+e.name+" and description '"+r.description+"' and InstrumentSelector "+n}function zE(r,e){return r.valueType!==e.valueType?FR(r,e):r.unit!==e.unit?BR(r,e):r.type!==e.type?jR(r,e):r.description!==e.description?GR(r,e):""}var sg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$R=function(){function r(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}return r.create=function(){return new r},r.prototype.getStorages=function(e){var t,n,o,i,a=[];try{for(var l=sg(this._sharedRegistry.values()),p=l.next();!p.done;p=l.next()){var u=p.value;a=a.concat(u)}}catch(R){t={error:R}}finally{try{p&&!p.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}var m=this._perCollectorRegistry.get(e);if(m!=null)try{for(var E=sg(m.values()),w=E.next();!w.done;w=E.next()){var u=w.value;a=a.concat(u)}}catch(R){o={error:R}}finally{try{w&&!w.done&&(i=E.return)&&i.call(E)}finally{if(o)throw o.error}}return a},r.prototype.register=function(e){this._registerStorage(e,this._sharedRegistry)},r.prototype.registerForCollector=function(e,t){var n=this._perCollectorRegistry.get(e);n==null&&(n=new Map,this._perCollectorRegistry.set(e,n)),this._registerStorage(t,n)},r.prototype.findOrUpdateCompatibleStorage=function(e){var t=this._sharedRegistry.get(e.name);return t===void 0?null:this._findOrUpdateCompatibleStorage(e,t)},r.prototype.findOrUpdateCompatibleCollectorStorage=function(e,t){var n=this._perCollectorRegistry.get(e);if(n===void 0)return null;var o=n.get(t.name);return o===void 0?null:this._findOrUpdateCompatibleStorage(t,o)},r.prototype._registerStorage=function(e,t){var n=e.getInstrumentDescriptor(),o=t.get(n.name);if(o===void 0){t.set(n.name,[e]);return}o.push(e)},r.prototype._findOrUpdateCompatibleStorage=function(e,t){var n,o,i=null;try{for(var a=sg(t),l=a.next();!l.done;l=a.next()){var p=l.value,u=p.getInstrumentDescriptor();dO(u,e)?(u.description!==e.description&&(e.description.length>u.description.length&&p.updateDescription(e.description),Ue.warn("A view or instrument with the name ",e.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,WE(u,e),`The longer description will be used.
To resolve the conflict:`,zE(u,e))),i=p):Ue.warn("A view or instrument with the name ",e.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,WE(u,e),`To resolve the conflict:
`,zE(u,e))}}catch(m){n={error:m}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i},r}(),VR=function(){function r(e){this._backingStorages=e}return r.prototype.record=function(e,t,n,o){this._backingStorages.forEach(function(i){i.record(e,t,n,o)})},r}(),qR=function(){function r(e,t){this._instrumentName=e,this._valueType=t,this._buffer=new au}return r.prototype.observe=function(e,t){if(t===void 0&&(t={}),typeof e!="number"){Ue.warn("non-number value provided to metric "+this._instrumentName+": "+e);return}this._valueType===pa.INT&&!Number.isInteger(e)&&(Ue.warn("INT value type cannot accept a floating-point value for "+this._instrumentName+", ignoring the fractional digits."),e=Math.trunc(e),!Number.isInteger(e))||this._buffer.set(t,e)},r}(),HR=function(){function r(){this._buffer=new Map}return r.prototype.observe=function(e,t,n){if(n===void 0&&(n={}),!!og(e)){var o=this._buffer.get(e);if(o==null&&(o=new au,this._buffer.set(e,o)),typeof t!="number"){Ue.warn("non-number value provided to metric "+e._descriptor.name+": "+t);return}e._descriptor.valueType===pa.INT&&!Number.isInteger(t)&&(Ue.warn("INT value type cannot accept a floating-point value for "+e._descriptor.name+", ignoring the fractional digits."),t=Math.trunc(t),!Number.isInteger(t))||o.set(n,t)}},r}(),ug=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},cg=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},KE=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},YE=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},WR=function(){function r(){this._callbacks=[],this._batchCallbacks=[]}return r.prototype.addCallback=function(e,t){var n=this._findCallback(e,t);n>=0||this._callbacks.push({callback:e,instrument:t})},r.prototype.removeCallback=function(e,t){var n=this._findCallback(e,t);n<0||this._callbacks.splice(n,1)},r.prototype.addBatchCallback=function(e,t){var n=new Set(t.filter(og));if(n.size===0){Ue.error("BatchObservableCallback is not associated with valid instruments",t);return}var o=this._findBatchCallback(e,n);o>=0||this._batchCallbacks.push({callback:e,instruments:n})},r.prototype.removeBatchCallback=function(e,t){var n=new Set(t.filter(og)),o=this._findBatchCallback(e,n);o<0||this._batchCallbacks.splice(o,1)},r.prototype.observe=function(e,t){return ug(this,void 0,void 0,function(){var n,o,i,a;return cg(this,function(l){switch(l.label){case 0:return n=this._observeCallbacks(e,t),o=this._observeBatchCallbacks(e,t),[4,oO(YE(YE([],KE(n),!1),KE(o),!1))];case 1:return i=l.sent(),a=i.filter(aO).map(function(p){return p.reason}),[2,a]}})})},r.prototype._observeCallbacks=function(e,t){var n=this;return this._callbacks.map(function(o){var i=o.callback,a=o.instrument;return ug(n,void 0,void 0,function(){var l,p;return cg(this,function(u){switch(u.label){case 0:return l=new qR(a._descriptor.name,a._descriptor.valueType),p=Promise.resolve(i(l)),t!=null&&(p=ff(p,t)),[4,p];case 1:return u.sent(),a._metricStorages.forEach(function(m){m.record(l._buffer,e)}),[2]}})})})},r.prototype._observeBatchCallbacks=function(e,t){var n=this;return this._batchCallbacks.map(function(o){var i=o.callback,a=o.instruments;return ug(n,void 0,void 0,function(){var l,p;return cg(this,function(u){switch(u.label){case 0:return l=new HR,p=Promise.resolve(i(l)),t!=null&&(p=ff(p,t)),[4,p];case 1:return u.sent(),a.forEach(function(m){var E=l._buffer.get(m);E!=null&&m._metricStorages.forEach(function(w){w.record(E,e)})}),[2]}})})})},r.prototype._findCallback=function(e,t){return this._callbacks.findIndex(function(n){return n.callback===e&&n.instrument===t})},r.prototype._findBatchCallback=function(e,t){return this._batchCallbacks.findIndex(function(n){return n.callback===e&&sO(n.instruments,t)})},r}(),zR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),KR=function(r){zR(e,r);function e(t,n,o,i){var a=r.call(this,t)||this;return a._attributesProcessor=o,a._deltaMetricStorage=new VE(n),a._temporalMetricStorage=new HE(n,i),a}return e.prototype.record=function(t,n,o,i){n=this._attributesProcessor.process(n,o),this._deltaMetricStorage.record(t,n,o,i)},e.prototype.collect=function(t,n){var o=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,o,n)},e}(GE),QE=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lg=function(){function r(){}return r.Noop=function(){return QR},r}(),YR=function(r){QE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.process=function(t,n){return t},e}(lg);(function(r){QE(e,r);function e(t){var n=r.call(this)||this;return n._allowedAttributeNames=t,n}return e.prototype.process=function(t,n){var o=this,i={};return Object.keys(t).filter(function(a){return o._allowedAttributeNames.includes(a)}).forEach(function(a){return i[a]=t[a]}),i},e})(lg);var QR=new YR,XR=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},ZR=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},JR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},eC=function(){function r(e,t){this._meterProviderSharedState=e,this._instrumentationScope=t,this.metricStorageRegistry=new $R,this.observableRegistry=new WR,this.meter=new PR(this)}return r.prototype.registerMetricStorage=function(e){var t=this._registerMetricStorage(e,KR);return t.length===1?t[0]:new VR(t)},r.prototype.registerAsyncMetricStorage=function(e){var t=this._registerMetricStorage(e,UR);return t},r.prototype.collect=function(e,t,n){return XR(this,void 0,void 0,function(){var o,i,a;return ZR(this,function(l){switch(l.label){case 0:return[4,this.observableRegistry.observe(t,n==null?void 0:n.timeoutMillis)];case 1:return o=l.sent(),i=this.metricStorageRegistry.getStorages(e),i.length===0?[2,null]:(a=i.map(function(p){return p.collect(e,t)}).filter(rO),a.length===0?[2,{errors:o}]:[2,{scopeMetrics:{scope:this._instrumentationScope,metrics:a},errors:o}])}})})},r.prototype._registerMetricStorage=function(e,t){var n=this,o=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope),i=o.map(function(p){var u=fO(p,e),m=n.metricStorageRegistry.findOrUpdateCompatibleStorage(u);if(m!=null)return m;var E=p.aggregation.createAggregator(u),w=new t(u,E,p.attributesProcessor,n._meterProviderSharedState.metricCollectors);return n.metricStorageRegistry.register(w),w});if(i.length===0){var a=this._meterProviderSharedState.selectAggregations(e.type),l=a.map(function(p){var u=JR(p,2),m=u[0],E=u[1],w=n.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(m,e);if(w!=null)return w;var R=E.createAggregator(e),S=new t(e,R,lg.Noop(),[m]);return n.metricStorageRegistry.registerForCollector(m,S),S});i=i.concat(l)}return i},r}(),tC=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rC=function(){function r(e){this.resource=e,this.viewRegistry=new SR,this.metricCollectors=[],this.meterSharedStates=new Map}return r.prototype.getMeterSharedState=function(e){var t=iO(e),n=this.meterSharedStates.get(t);return n==null&&(n=new eC(this,e),this.meterSharedStates.set(t,n)),n},r.prototype.selectAggregations=function(e){var t,n,o=[];try{for(var i=tC(this.metricCollectors),a=i.next();!a.done;a=i.next()){var l=a.value;o.push([l,l.selectAggregation(e)])}}catch(p){t={error:p}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},r}(),Vh=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},qh=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},nC=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},iC=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},oC=function(){function r(e,t){this._sharedState=e,this._metricReader=t}return r.prototype.collect=function(e){return Vh(this,void 0,void 0,function(){var t,n,o,i,a=this;return qh(this,function(l){switch(l.label){case 0:return t=eg(Date.now()),n=[],o=[],i=Array.from(this._sharedState.meterSharedStates.values()).map(function(p){return Vh(a,void 0,void 0,function(){var u;return qh(this,function(m){switch(m.label){case 0:return[4,p.collect(this,t,e)];case 1:return u=m.sent(),(u==null?void 0:u.scopeMetrics)!=null&&n.push(u.scopeMetrics),(u==null?void 0:u.errors)!=null&&o.push.apply(o,iC([],nC(u.errors),!1)),[2]}})})}),[4,Promise.all(i)];case 1:return l.sent(),[2,{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:o}]}})})},r.prototype.forceFlush=function(e){return Vh(this,void 0,void 0,function(){return qh(this,function(t){switch(t.label){case 0:return[4,this._metricReader.forceFlush(e)];case 1:return t.sent(),[2]}})})},r.prototype.shutdown=function(e){return Vh(this,void 0,void 0,function(){return qh(this,function(t){switch(t.label){case 0:return[4,this._metricReader.shutdown(e)];case 1:return t.sent(),[2]}})})},r.prototype.selectAggregationTemporality=function(e){return this._metricReader.selectAggregationTemporality(e)},r.prototype.selectAggregation=function(e){return this._metricReader.selectAggregation(e)},r}(),XE=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},ZE=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},JE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aC=function(){function r(e){var t,n,o,i,a;this._shutdown=!1;var l=jE.default().merge((a=e==null?void 0:e.resource)!==null&&a!==void 0?a:jE.empty());if(this._sharedState=new rC(l),(e==null?void 0:e.views)!=null&&e.views.length>0)try{for(var p=JE(e.views),u=p.next();!u.done;u=p.next()){var m=u.value;this._sharedState.viewRegistry.addView(m)}}catch(S){t={error:S}}finally{try{u&&!u.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}if((e==null?void 0:e.readers)!=null&&e.readers.length>0)try{for(var E=JE(e.readers),w=E.next();!w.done;w=E.next()){var R=w.value;this.addMetricReader(R)}}catch(S){o={error:S}}finally{try{w&&!w.done&&(i=E.return)&&i.call(E)}finally{if(o)throw o.error}}}return r.prototype.getMeter=function(e,t,n){return t===void 0&&(t=""),n===void 0&&(n={}),this._shutdown?(Ue.warn("A shutdown MeterProvider cannot provide a Meter"),EI()):this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:n.schemaUrl}).meter},r.prototype.addMetricReader=function(e){var t=new oC(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)},r.prototype.shutdown=function(e){return XE(this,void 0,void 0,function(){return ZE(this,function(t){switch(t.label){case 0:return this._shutdown?(Ue.warn("shutdown may only be called once per MeterProvider"),[2]):(this._shutdown=!0,[4,Promise.all(this._sharedState.metricCollectors.map(function(n){return n.shutdown(e)}))]);case 1:return t.sent(),[2]}})})},r.prototype.forceFlush=function(e){return XE(this,void 0,void 0,function(){return ZE(this,function(t){switch(t.label){case 0:return this._shutdown?(Ue.warn("invalid attempt to force flush after MeterProvider shutdown"),[2]):[4,Promise.all(this._sharedState.metricCollectors.map(function(n){return n.forceFlush(e)}))];case 1:return t.sent(),[2]}})})},r}(),eb=Mh("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function tb(r){return r.setValue(eb,!0)}function fg(r){return r.getValue(eb)===!0}var sC="=",dg=";",Hh=",",hg="baggage",uC=180,cC=4096,lC=8192,fC=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function dC(r){return r.reduce(function(e,t){var n=""+e+(e!==""?Hh:"")+t;return n.length>lC?e:n},"")}function hC(r){return r.getAllEntries().map(function(e){var t=fC(e,2),n=t[0],o=t[1],i=encodeURIComponent(n)+"="+encodeURIComponent(o.value);return o.metadata!==void 0&&(i+=dg+o.metadata.toString()),i})}function rb(r){var e=r.split(dg);if(!(e.length<=0)){var t=e.shift();if(t){var n=t.indexOf(sC);if(!(n<=0)){var o=decodeURIComponent(t.substring(0,n).trim()),i=decodeURIComponent(t.substring(n+1).trim()),a;return e.length>0&&(a=oI(e.join(dg))),{key:o,value:i,metadata:a}}}}}function Wh(r){return typeof r!="string"||r.length===0?{}:r.split(Hh).map(function(e){return rb(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,t){return e[t.key]=t.value,e},{})}var pC=function(){function r(){}return r.prototype.inject=function(e,t,n){var o=bi.getBaggage(e);if(!(!o||fg(e))){var i=hC(o).filter(function(l){return l.length<=cC}).slice(0,uC),a=dC(i);a.length>0&&n.set(t,hg,a)}},r.prototype.extract=function(e,t,n){var o=n.get(t,hg),i=Array.isArray(o)?o.join(Hh):o;if(!i)return e;var a={};if(i.length===0)return e;var l=i.split(Hh);return l.forEach(function(p){var u=rb(p);if(u){var m={value:u.value};u.metadata&&(m.metadata=u.metadata),a[u.key]=m}}),Object.entries(a).length===0?e:bi.setBaggage(e,bi.createBaggage(a))},r.prototype.fields=function(){return[hg]},r}(),nb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vC=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function zh(r){var e,t,n={};if(typeof r!="object"||r==null)return n;try{for(var o=nb(Object.entries(r)),i=o.next();!i.done;i=o.next()){var a=vC(i.value,2),l=a[0],p=a[1];if(!mC(l)){Ue.warn("Invalid attribute key: "+l);continue}if(!Kh(p)){Ue.warn("Invalid attribute value set for key: "+l);continue}Array.isArray(p)?n[l]=p.slice():n[l]=p}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}function mC(r){return typeof r=="string"&&r.length>0}function Kh(r){return r==null?!0:Array.isArray(r)?gC(r):ib(r)}function gC(r){var e,t,n;try{for(var o=nb(r),i=o.next();!i.done;i=o.next()){var a=i.value;if(a!=null){if(!n){if(ib(a)){n=typeof a;continue}return!1}if(typeof a!==n)return!1}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!0}function ib(r){switch(typeof r){case"number":case"boolean":case"string":return!0}return!1}function yC(){return function(r){Ue.error(_C(r))}}function _C(r){return typeof r=="string"?r:JSON.stringify(EC(r))}function EC(r){for(var e={},t=r;t!==null;)Object.getOwnPropertyNames(t).forEach(function(n){if(!e[n]){var o=t[n];o&&(e[n]=String(o))}}),t=Object.getPrototypeOf(t);return e}var bC=yC();function os(r){try{bC(r)}catch{}}var wo;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(wo||(wo={}));var mf=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},SC=",",wC=["OTEL_SDK_DISABLED"];function TC(r){return wC.indexOf(r)>-1}var AC=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function IC(r){return AC.indexOf(r)>-1}var OC=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function RC(r){return OC.indexOf(r)>-1}var gf=1/0,yf=128,CC=128,PC=128,ob={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Hr.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:gf,OTEL_ATTRIBUTE_COUNT_LIMIT:yf,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:gf,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:yf,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:gf,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:yf,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:CC,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:PC,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:wo.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function xC(r,e,t){if(!(typeof t[r]>"u")){var n=String(t[r]);e[r]=n.toLowerCase()==="true"}}function NC(r,e,t,n,o){if(n===void 0&&(n=-1/0),o===void 0&&(o=1/0),typeof t[r]<"u"){var i=Number(t[r]);isNaN(i)||(i<n?e[r]=n:i>o?e[r]=o:e[r]=i)}}function kC(r,e,t,n){n===void 0&&(n=SC);var o=t[r];typeof o=="string"&&(e[r]=o.split(n).map(function(i){return i.trim()}))}var DC={ALL:Hr.ALL,VERBOSE:Hr.VERBOSE,DEBUG:Hr.DEBUG,INFO:Hr.INFO,WARN:Hr.WARN,ERROR:Hr.ERROR,NONE:Hr.NONE};function MC(r,e,t){var n=t[r];if(typeof n=="string"){var o=DC[n.toUpperCase()];o!=null&&(e[r]=o)}}function pg(r){var e={};for(var t in ob){var n=t;switch(n){case"OTEL_LOG_LEVEL":MC(n,e,r);break;default:if(TC(n))xC(n,e,r);else if(IC(n))NC(n,e,r);else if(RC(n))kC(n,e,r);else{var o=r[n];typeof o<"u"&&o!==null&&(e[n]=String(o))}}}return e}function ab(){return typeof process<"u"&&process&&process.env?pg(process.env):pg(mf)}function $t(){var r=pg(mf);return Object.assign({},ob,r)}function sb(r){return r>=48&&r<=57?r-48:r>=97&&r<=102?r-87:r-55}function vg(r){for(var e=new Uint8Array(r.length/2),t=0,n=0;n<r.length;n+=2){var o=sb(r.charCodeAt(n)),i=sb(r.charCodeAt(n+1));e[t++]=o<<4|i}return e}var ji=performance,LC="1.22.0";function mg(r){for(var e={},t=r.length,n=0;n<t;n++){var o=r[n];o&&(e[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return e}var UC="aws.lambda.invoked_arn",FC="db.system",BC="db.connection_string",jC="db.user",GC="db.jdbc.driver_classname",$C="db.name",VC="db.statement",qC="db.operation",HC="db.mssql.instance_name",WC="db.cassandra.keyspace",zC="db.cassandra.page_size",KC="db.cassandra.consistency_level",YC="db.cassandra.table",QC="db.cassandra.idempotence",XC="db.cassandra.speculative_execution_count",ZC="db.cassandra.coordinator.id",JC="db.cassandra.coordinator.dc",eP="db.hbase.namespace",tP="db.redis.database_index",rP="db.mongodb.collection",nP="db.sql.table",iP="exception.type",oP="exception.message",aP="exception.stacktrace",sP="exception.escaped",uP="faas.trigger",cP="faas.execution",lP="faas.document.collection",fP="faas.document.operation",dP="faas.document.time",hP="faas.document.name",pP="faas.time",vP="faas.cron",mP="faas.coldstart",gP="faas.invoked_name",yP="faas.invoked_provider",_P="faas.invoked_region",EP="net.transport",bP="net.peer.ip",SP="net.peer.port",wP="net.peer.name",TP="net.host.ip",AP="net.host.port",IP="net.host.name",OP="net.host.connection.type",RP="net.host.connection.subtype",CP="net.host.carrier.name",PP="net.host.carrier.mcc",xP="net.host.carrier.mnc",NP="net.host.carrier.icc",kP="peer.service",DP="enduser.id",MP="enduser.role",LP="enduser.scope",UP="thread.id",FP="thread.name",BP="code.function",jP="code.namespace",GP="code.filepath",$P="code.lineno",VP="http.method",qP="http.url",HP="http.target",WP="http.host",zP="http.scheme",KP="http.status_code",YP="http.flavor",QP="http.user_agent",XP="http.request_content_length",ZP="http.request_content_length_uncompressed",JP="http.response_content_length",ex="http.response_content_length_uncompressed",tx="http.server_name",rx="http.route",nx="http.client_ip",ix="aws.dynamodb.table_names",ox="aws.dynamodb.consumed_capacity",ax="aws.dynamodb.item_collection_metrics",sx="aws.dynamodb.provisioned_read_capacity",ux="aws.dynamodb.provisioned_write_capacity",cx="aws.dynamodb.consistent_read",lx="aws.dynamodb.projection",fx="aws.dynamodb.limit",dx="aws.dynamodb.attributes_to_get",hx="aws.dynamodb.index_name",px="aws.dynamodb.select",vx="aws.dynamodb.global_secondary_indexes",mx="aws.dynamodb.local_secondary_indexes",gx="aws.dynamodb.exclusive_start_table",yx="aws.dynamodb.table_count",_x="aws.dynamodb.scan_forward",Ex="aws.dynamodb.segment",bx="aws.dynamodb.total_segments",Sx="aws.dynamodb.count",wx="aws.dynamodb.scanned_count",Tx="aws.dynamodb.attribute_definitions",Ax="aws.dynamodb.global_secondary_index_updates",Ix="messaging.system",Ox="messaging.destination",Rx="messaging.destination_kind",Cx="messaging.temp_destination",Px="messaging.protocol",xx="messaging.protocol_version",Nx="messaging.url",kx="messaging.message_id",Dx="messaging.conversation_id",Mx="messaging.message_payload_size_bytes",Lx="messaging.message_payload_compressed_size_bytes",Ux="messaging.operation",Fx="messaging.consumer_id",Bx="messaging.rabbitmq.routing_key",jx="messaging.kafka.message_key",Gx="messaging.kafka.consumer_group",$x="messaging.kafka.client_id",Vx="messaging.kafka.partition",qx="messaging.kafka.tombstone",Hx="rpc.system",Wx="rpc.service",zx="rpc.method",Kx="rpc.grpc.status_code",Yx="rpc.jsonrpc.version",Qx="rpc.jsonrpc.request_id",Xx="rpc.jsonrpc.error_code",Zx="rpc.jsonrpc.error_message",Jx="message.type",eN="message.id",tN="message.compressed_size",rN="message.uncompressed_size",Tr=mg([UC,FC,BC,jC,GC,$C,VC,qC,HC,WC,zC,KC,YC,QC,XC,ZC,JC,eP,tP,rP,nP,iP,oP,aP,sP,uP,cP,lP,fP,dP,hP,pP,vP,mP,gP,yP,_P,EP,bP,SP,wP,TP,AP,IP,OP,RP,CP,PP,xP,NP,kP,DP,MP,LP,UP,FP,BP,jP,GP,$P,VP,qP,HP,WP,zP,KP,YP,QP,XP,ZP,JP,ex,tx,rx,nx,ix,ox,ax,sx,ux,cx,lx,fx,dx,hx,px,vx,mx,gx,yx,_x,Ex,bx,Sx,wx,Tx,Ax,Ix,Ox,Rx,Cx,Px,xx,Nx,kx,Dx,Mx,Lx,Ux,Fx,Bx,jx,Gx,$x,Vx,qx,Hx,Wx,zx,Kx,Yx,Qx,Xx,Zx,Jx,eN,tN,rN]),nN="cloud.provider",iN="cloud.account.id",oN="cloud.region",aN="cloud.availability_zone",sN="cloud.platform",uN="aws.ecs.container.arn",cN="aws.ecs.cluster.arn",lN="aws.ecs.launchtype",fN="aws.ecs.task.arn",dN="aws.ecs.task.family",hN="aws.ecs.task.revision",pN="aws.eks.cluster.arn",vN="aws.log.group.names",mN="aws.log.group.arns",gN="aws.log.stream.names",yN="aws.log.stream.arns",_N="container.name",EN="container.id",bN="container.runtime",SN="container.image.name",wN="container.image.tag",TN="deployment.environment",AN="device.id",IN="device.model.identifier",ON="device.model.name",RN="faas.name",CN="faas.id",PN="faas.version",xN="faas.instance",NN="faas.max_memory",kN="host.id",DN="host.name",MN="host.type",LN="host.arch",UN="host.image.name",FN="host.image.id",BN="host.image.version",jN="k8s.cluster.name",GN="k8s.node.name",$N="k8s.node.uid",VN="k8s.namespace.name",qN="k8s.pod.uid",HN="k8s.pod.name",WN="k8s.container.name",zN="k8s.replicaset.uid",KN="k8s.replicaset.name",YN="k8s.deployment.uid",QN="k8s.deployment.name",XN="k8s.statefulset.uid",ZN="k8s.statefulset.name",JN="k8s.daemonset.uid",e1="k8s.daemonset.name",t1="k8s.job.uid",r1="k8s.job.name",n1="k8s.cronjob.uid",i1="k8s.cronjob.name",o1="os.type",a1="os.description",s1="os.name",u1="os.version",c1="process.pid",l1="process.executable.name",f1="process.executable.path",d1="process.command",h1="process.command_line",p1="process.command_args",v1="process.owner",m1="process.runtime.name",g1="process.runtime.version",y1="process.runtime.description",_1="service.name",E1="service.namespace",b1="service.instance.id",S1="service.version",w1="telemetry.sdk.name",T1="telemetry.sdk.language",A1="telemetry.sdk.version",I1="telemetry.auto.version",O1="webengine.name",R1="webengine.version",C1="webengine.description",xn=mg([nN,iN,oN,aN,sN,uN,cN,lN,fN,dN,hN,pN,vN,mN,gN,yN,_N,EN,bN,SN,wN,TN,AN,IN,ON,RN,CN,PN,xN,NN,kN,DN,MN,LN,UN,FN,BN,jN,GN,$N,VN,qN,HN,WN,zN,KN,YN,QN,XN,ZN,JN,e1,t1,r1,n1,i1,o1,a1,s1,u1,c1,l1,f1,d1,h1,p1,v1,m1,g1,y1,_1,E1,b1,S1,w1,T1,A1,I1,O1,R1,C1]),P1="cpp",x1="dotnet",N1="erlang",k1="go",D1="java",M1="nodejs",L1="php",U1="python",F1="ruby",B1="webjs",j1=mg([P1,x1,N1,k1,D1,M1,L1,U1,F1,B1]),Ec,gg=(Ec={},Ec[xn.TELEMETRY_SDK_NAME]="opentelemetry",Ec[xn.PROCESS_RUNTIME_NAME]="browser",Ec[xn.TELEMETRY_SDK_LANGUAGE]=j1.WEBJS,Ec[xn.TELEMETRY_SDK_VERSION]=LC,Ec);function m5(r){}var G1=9,$1=6,V1=Math.pow(10,$1),Yh=Math.pow(10,G1);function To(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*V1);return[t,n]}function yg(){var r=ji.timeOrigin;if(typeof r!="number"){var e=ji;r=e.timing&&e.timing.fetchStart}return r}function su(r){var e=To(yg()),t=To(typeof r=="number"?r:ji.now());return cb(e,t)}function uu(r){if(_g(r))return r;if(typeof r=="number")return r<yg()?su(r):To(r);if(r instanceof Date)return To(r.getTime());throw TypeError("Invalid input type")}function q1(r,e){var t=e[0]-r[0],n=e[1]-r[1];return n<0&&(t-=1,n+=Yh),[t,n]}function ma(r){return r[0]*Yh+r[1]}function Qh(r){return r[0]*1e6+r[1]/1e3}function _g(r){return Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"}function ub(r){return _g(r)||typeof r=="number"||r instanceof Date}function cb(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Yh&&(t[1]-=Yh,t[0]+=1),t}var Zi;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(Zi||(Zi={}));var H1=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W1=function(){function r(e){e===void 0&&(e={});var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,o){return n.concat(o)},[])))}return r.prototype.inject=function(e,t,n){var o,i;try{for(var a=H1(this._propagators),l=a.next();!l.done;l=a.next()){var p=l.value;try{p.inject(e,t,n)}catch(u){Ue.warn("Failed to inject with "+p.constructor.name+". Err: "+u.message)}}}catch(u){o={error:u}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}},r.prototype.extract=function(e,t,n){return this._propagators.reduce(function(o,i){try{return i.extract(o,t,n)}catch(a){Ue.warn("Failed to inject with "+i.constructor.name+". Err: "+a.message)}return o},e)},r.prototype.fields=function(){return this._fields.slice()},r}(),Eg="[_0-9a-z-*/]",z1="[a-z]"+Eg+"{0,255}",K1="[a-z0-9]"+Eg+"{0,240}@[a-z]"+Eg+"{0,13}",Y1=new RegExp("^(?:"+z1+"|"+K1+")$"),Q1=/^[ -~]{0,255}[!-~]$/,X1=/,|=/;function Z1(r){return Y1.test(r)}function J1(r){return Q1.test(r)&&!X1.test(r)}var lb=32,ek=512,fb=",",db="=",tk=function(){function r(e){this._internalState=new Map,e&&this._parse(e)}return r.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},r.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},r.prototype.get=function(e){return this._internalState.get(e)},r.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,n){return t.push(n+db+e.get(n)),t},[]).join(fb)},r.prototype._parse=function(e){e.length>ek||(this._internalState=e.split(fb).reverse().reduce(function(t,n){var o=n.trim(),i=o.indexOf(db);if(i!==-1){var a=o.slice(0,i),l=o.slice(i+1,n.length);Z1(a)&&J1(l)&&t.set(a,l)}return t},new Map),this._internalState.size>lb&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,lb))))},r.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},r.prototype._clone=function(){var e=new r;return e._internalState=new Map(this._internalState),e},r}(),Xh="traceparent",bg="tracestate",rk="00",nk="(?!ff)[\\da-f]{2}",ik="(?![0]{32})[\\da-f]{32}",ok="(?![0]{16})[\\da-f]{16}",ak="[\\da-f]{2}",sk=new RegExp("^\\s?("+nk+")-("+ik+")-("+ok+")-("+ak+")(-.*)?\\s?$");function uk(r){var e=sk.exec(r);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var ck=function(){function r(){}return r.prototype.inject=function(e,t,n){var o=gr.getSpanContext(e);if(!(!o||fg(e)||!cf(o))){var i=rk+"-"+o.traceId+"-"+o.spanId+"-0"+Number(o.traceFlags||va.NONE).toString(16);n.set(t,Xh,i),o.traceState&&n.set(t,bg,o.traceState.serialize())}},r.prototype.extract=function(e,t,n){var o=n.get(t,Xh);if(!o)return e;var i=Array.isArray(o)?o[0]:o;if(typeof i!="string")return e;var a=uk(i);if(!a)return e;a.isRemote=!0;var l=n.get(t,bg);if(l){var p=Array.isArray(l)?l.join(","):l;a.traceState=new tk(typeof p=="string"?p:void 0)}return gr.setSpanContext(e,a)},r.prototype.fields=function(){return[Xh,bg]},r}(),lk="[object Object]",fk="[object Null]",dk="[object Undefined]",hk=Function.prototype,hb=hk.toString,pk=hb.call(Object),vk=mk(Object.getPrototypeOf,Object),pb=Object.prototype,vb=pb.hasOwnProperty,cu=Symbol?Symbol.toStringTag:void 0,mb=pb.toString;function mk(r,e){return function(t){return r(e(t))}}function gb(r){if(!gk(r)||yk(r)!==lk)return!1;var e=vk(r);if(e===null)return!0;var t=vb.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&hb.call(t)===pk}function gk(r){return r!=null&&typeof r=="object"}function yk(r){return r==null?r===void 0?dk:fk:cu&&cu in Object(r)?_k(r):Ek(r)}function _k(r){var e=vb.call(r,cu),t=r[cu],n=!1;try{r[cu]=void 0,n=!0}catch{}var o=mb.call(r);return n&&(e?r[cu]=t:delete r[cu]),o}function Ek(r){return mb.call(r)}var bk=20;function yb(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r.shift(),n=new WeakMap;r.length>0;)t=_b(t,r.shift(),0,n);return t}function Sg(r){return Zh(r)?r.slice():r}function _b(r,e,t,n){t===void 0&&(t=0);var o;if(!(t>bk)){if(t++,Jh(r)||Jh(e)||bb(e))o=Sg(e);else if(Zh(r)){if(o=r.slice(),Zh(e))for(var i=0,a=e.length;i<a;i++)o.push(Sg(e[i]));else if(_f(e))for(var l=Object.keys(e),i=0,a=l.length;i<a;i++){var p=l[i];o[p]=Sg(e[p])}}else if(_f(r))if(_f(e)){if(!Sk(r,e))return e;o=Object.assign({},r);for(var l=Object.keys(e),i=0,a=l.length;i<a;i++){var p=l[i],u=e[p];if(Jh(u))typeof u>"u"?delete o[p]:o[p]=u;else{var m=o[p],E=u;if(Eb(r,p,n)||Eb(e,p,n))delete o[p];else{if(_f(m)&&_f(E)){var w=n.get(m)||[],R=n.get(E)||[];w.push({obj:r,key:p}),R.push({obj:e,key:p}),n.set(m,w),n.set(E,R)}o[p]=_b(o[p],u,t,n)}}}}else o=e;return o}}function Eb(r,e,t){for(var n=t.get(r[e])||[],o=0,i=n.length;o<i;o++){var a=n[o];if(a.key===e&&a.obj===r)return!0}return!1}function Zh(r){return Array.isArray(r)}function bb(r){return typeof r=="function"}function _f(r){return!Jh(r)&&!Zh(r)&&!bb(r)&&typeof r=="object"}function Jh(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r>"u"||r instanceof Date||r instanceof RegExp||r===null}function Sk(r,e){return!(!gb(r)||!gb(e))}var wk=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tk=function(r){wk(e,r);function e(t){var n=r.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error);function Sb(r,e){var t,n=new Promise(function(i,a){t=setTimeout(function(){a(new Tk("Operation timed out."))},e)});return Promise.race([r,n]).then(function(o){return clearTimeout(t),o},function(o){throw clearTimeout(t),o})}var Ak=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function wb(r,e){return typeof e=="string"?r===e:!!r.match(e)}function Tb(r,e){var t,n;if(!e)return!1;try{for(var o=Ak(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(wb(r,a))return!0}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!1}var Ik=function(){function r(){var e=this;this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return Object.defineProperty(r.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),r.prototype.resolve=function(e){this._resolve(e)},r.prototype.reject=function(e){this._reject(e)},r}(),Ok=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Rk=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},ep=function(){function r(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new Ik}return Object.defineProperty(r.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),r.prototype.call=function(){for(var e,t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,Rk([this._that],Ok(n),!1))).then(function(i){return t._deferred.resolve(i)},function(i){return t._deferred.reject(i)})}catch(i){this._deferred.reject(i)}}return this._deferred.promise},r}();function Ck(r,e){return new Promise(function(t){Dt.with(tb(Dt.active()),function(){r.export(e,function(n){t(n)})})})}var Pk={_export:Ck},lu;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE"})(lu||(lu={}));var bc;(function(r){r[r.HISTOGRAM=0]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",r[r.GAUGE=2]="GAUGE",r[r.SUM=3]="SUM"})(bc||(bc={}));var xk=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){xk(e,r);function e(t){var n=r.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return e})(Error);function Nk(r,e){for(var t=0,n=r.length-1;n-t>1;){var o=Math.trunc((n+t)/2);r[o]<=e?t=o:n=o-1}return r[n]<=e?n:r[t]<=e?t:-1}var fu;(function(r){r[r.DROP=0]="DROP",r[r.SUM=1]="SUM",r[r.LAST_VALUE=2]="LAST_VALUE",r[r.HISTOGRAM=3]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"})(fu||(fu={}));var kk=function(){function r(){this.kind=fu.DROP}return r.prototype.createAccumulation=function(){},r.prototype.merge=function(e,t){},r.prototype.diff=function(e,t){},r.prototype.toMetricData=function(e,t,n,o){},r}(),ar;(function(r){r.COUNTER="COUNTER",r.HISTOGRAM="HISTOGRAM",r.UP_DOWN_COUNTER="UP_DOWN_COUNTER",r.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",r.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",r.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(ar||(ar={}));var Dk=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function Mk(r){var e=r.map(function(){return 0});return e.push(0),{buckets:{boundaries:r,counts:e},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}var wg=function(){function r(e,t,n,o){n===void 0&&(n=!0),o===void 0&&(o=Mk(t)),this.startTime=e,this._boundaries=t,this._recordMinMax=n,this._current=o}return r.prototype.record=function(e){if(!Number.isNaN(e)){this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);var t=Nk(this._boundaries,e);this._current.buckets.counts[t+1]+=1}},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),Ab=function(){function r(e,t){this._boundaries=e,this._recordMinMax=t,this.kind=fu.HISTOGRAM}return r.prototype.createAccumulation=function(e){return new wg(e,this._boundaries,this._recordMinMax)},r.prototype.merge=function(e,t){for(var n=e.toPointValue(),o=t.toPointValue(),i=n.buckets.counts,a=o.buckets.counts,l=new Array(i.length),p=0;p<i.length;p++)l[p]=i[p]+a[p];var u=1/0,m=-1/0;return this._recordMinMax&&(n.hasMinMax&&o.hasMinMax?(u=Math.min(n.min,o.min),m=Math.max(n.max,o.max)):n.hasMinMax?(u=n.min,m=n.max):o.hasMinMax&&(u=o.min,m=o.max)),new wg(e.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:l},count:n.count+o.count,sum:n.sum+o.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||o.hasMinMax),min:u,max:m})},r.prototype.diff=function(e,t){for(var n=e.toPointValue(),o=t.toPointValue(),i=n.buckets.counts,a=o.buckets.counts,l=new Array(i.length),p=0;p<i.length;p++)l[p]=a[p]-i[p];return new wg(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:l},count:o.count-n.count,sum:o.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:bc.HISTOGRAM,dataPoints:n.map(function(i){var a=Dk(i,2),l=a[0],p=a[1],u=p.toPointValue(),m=e.type===ar.UP_DOWN_COUNTER||e.type===ar.OBSERVABLE_GAUGE||e.type===ar.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:l,startTime:p.startTime,endTime:o,value:{min:u.hasMinMax?u.min:void 0,max:u.hasMinMax?u.max:void 0,sum:m?void 0:u.sum,buckets:u.buckets,count:u.count}}})}},r}(),Tg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ag=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Ib=function(){function r(e,t,n,o){e===void 0&&(e=new Lk),t===void 0&&(t=0),n===void 0&&(n=0),o===void 0&&(o=0),this.backing=e,this.indexBase=t,this.indexStart=n,this.indexEnd=o}return Object.defineProperty(r.prototype,"offset",{get:function(){return this.indexStart},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1},enumerable:!1,configurable:!0}),r.prototype.counts=function(){var e=this;return Array.from({length:this.length},function(t,n){return e.at(n)})},r.prototype.at=function(e){var t=this.indexBase-this.indexStart;return e<t&&(e+=this.backing.length),e-=t,this.backing.countAt(e)},r.prototype.incrementBucket=function(e,t){this.backing.increment(e,t)},r.prototype.decrementBucket=function(e,t){this.backing.decrement(e,t)},r.prototype.trim=function(){for(var e=0;e<this.length;e++)if(this.at(e)!==0){this.indexStart+=e;break}else if(e===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(var e=this.length-1;e>=0;e--)if(this.at(e)!==0){this.indexEnd-=this.length-e-1;break}this._rotate()},r.prototype.downscale=function(e){this._rotate();for(var t=1+this.indexEnd-this.indexStart,n=1<<e,o=0,i=0,a=this.indexStart;a<=this.indexEnd;){var l=a%n;l<0&&(l+=n);for(var p=l;p<n&&o<t;p++)this._relocateBucket(i,o),o++,a++;i++}this.indexStart>>=e,this.indexEnd>>=e,this.indexBase=this.indexStart},r.prototype.clone=function(){return new r(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)},r.prototype._rotate=function(){var e=this.indexBase-this.indexStart;e!==0&&(e>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,e),this.backing.reverse(e,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+e)),this.indexBase=this.indexStart)},r.prototype._relocateBucket=function(e,t){e!==t&&this.incrementBucket(e,this.backing.emptyBucket(t))},r}(),Lk=function(){function r(e){e===void 0&&(e=[0]),this._counts=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this._counts.length},enumerable:!1,configurable:!0}),r.prototype.countAt=function(e){return this._counts[e]},r.prototype.growTo=function(e,t,n){var o=new Array(e).fill(0);o.splice.apply(o,Ag([n,this._counts.length-t],Tg(this._counts.slice(t)),!1)),o.splice.apply(o,Ag([0,t],Tg(this._counts.slice(0,t)),!1)),this._counts=o},r.prototype.reverse=function(e,t){for(var n=Math.floor((e+t)/2)-e,o=0;o<n;o++){var i=this._counts[e+o];this._counts[e+o]=this._counts[t-o-1],this._counts[t-o-1]=i}},r.prototype.emptyBucket=function(e){var t=this._counts[e];return this._counts[e]=0,t},r.prototype.increment=function(e,t){this._counts[e]+=t},r.prototype.decrement=function(e,t){this._counts[e]>=t?this._counts[e]-=t:this._counts[e]=0},r.prototype.clone=function(){return new r(Ag([],Tg(this._counts),!1))},r}(),Uk=52,Fk=2146435072,Bk=1048575,Ig=1023,Ob=-Ig+1,Rb=Ig,Og=Math.pow(2,-1022);function Cb(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=(t&Fk)>>20;return n-Ig}function Pb(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=e.getUint32(4),o=(t&Bk)*Math.pow(2,32);return o+n}function Rg(r,e){return r===0||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY||Number.isNaN(r)?r:r*Math.pow(2,e)}function jk(r){return r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r++,r}var Gk=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ef=function(r){Gk(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error),$k=function(){function r(e){this._shift=-e}return r.prototype.mapToIndex=function(e){if(e<Og)return this._minNormalLowerBoundaryIndex();var t=Cb(e),n=this._rightShift(Pb(e)-1,Uk);return t+n>>this._shift},r.prototype.lowerBoundary=function(e){var t=this._minNormalLowerBoundaryIndex();if(e<t)throw new Ef("underflow: "+e+" is < minimum lower boundary: "+t);var n=this._maxNormalLowerBoundaryIndex();if(e>n)throw new Ef("overflow: "+e+" is > maximum lower boundary: "+n);return Rg(1,e<<this._shift)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._shift===0?0:-this._shift},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){var e=Ob>>this._shift;return this._shift<2&&e--,e},r.prototype._maxNormalLowerBoundaryIndex=function(){return Rb>>this._shift},r.prototype._rightShift=function(e,t){return Math.floor(e*Math.pow(2,-t))},r}(),Vk=function(){function r(e){this._scale=e,this._scaleFactor=Rg(Math.LOG2E,e),this._inverseFactor=Rg(Math.LN2,-e)}return r.prototype.mapToIndex=function(e){if(e<=Og)return this._minNormalLowerBoundaryIndex()-1;if(Pb(e)===0){var t=Cb(e);return(t<<this._scale)-1}var n=Math.floor(Math.log(e)*this._scaleFactor),o=this._maxNormalLowerBoundaryIndex();return n>=o?o:n},r.prototype.lowerBoundary=function(e){var t=this._maxNormalLowerBoundaryIndex();if(e>=t){if(e===t)return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor);throw new Ef("overflow: "+e+" is > maximum lower boundary: "+t)}var n=this._minNormalLowerBoundaryIndex();if(e<=n){if(e===n)return Og;if(e===n-1)return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2;throw new Ef("overflow: "+e+" is < minimum lower boundary: "+n)}return Math.exp(e*this._inverseFactor)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){return Ob<<this._scale},r.prototype._maxNormalLowerBoundaryIndex=function(){return(Rb+1<<this._scale)-1},r}(),xb=-10,Nb=20,qk=Array.from({length:31},function(r,e){return e>10?new Vk(e-10):new $k(e-10)});function kb(r){if(r>Nb||r<xb)throw new Ef("expected scale >= "+xb+" && <= "+Nb+", got: "+r);return qk[r+10]}var Hk=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},tp=function(){function r(e,t){this.low=e,this.high=t}return r.combine=function(e,t){return new r(Math.min(e.low,t.low),Math.max(e.high,t.high))},r}(),Wk=20,zk=160,Cg=2,Kk=function(){function r(e,t,n,o,i,a,l,p,u,m,E){e===void 0&&(e=e),t===void 0&&(t=zk),n===void 0&&(n=!0),o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),l===void 0&&(l=Number.POSITIVE_INFINITY),p===void 0&&(p=Number.NEGATIVE_INFINITY),u===void 0&&(u=new Ib),m===void 0&&(m=new Ib),E===void 0&&(E=kb(Wk)),this.startTime=e,this._maxSize=t,this._recordMinMax=n,this._sum=o,this._count=i,this._zeroCount=a,this._min=l,this._max=p,this._positive=u,this._negative=m,this._mapping=E,this._maxSize<Cg&&(Ue.warn("Exponential Histogram Max Size set to "+this._maxSize+",                 changing to the minimum size of: "+Cg),this._maxSize=Cg)}return r.prototype.record=function(e){this.updateByIncrement(e,1)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}},Object.defineProperty(r.prototype,"sum",{get:function(){return this._sum},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zeroCount",{get:function(){return this._zeroCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this._count===this._zeroCount?0:this._mapping.scale},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"positive",{get:function(){return this._positive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"negative",{get:function(){return this._negative},enumerable:!1,configurable:!0}),r.prototype.updateByIncrement=function(e,t){if(!Number.isNaN(e)){if(e>this._max&&(this._max=e),e<this._min&&(this._min=e),this._count+=t,e===0){this._zeroCount+=t;return}this._sum+=e*t,e>0?this._updateBuckets(this._positive,e,t):this._updateBuckets(this._negative,-e,t)}},r.prototype.merge=function(e){this._count===0?(this._min=e.min,this._max=e.max):e.count!==0&&(e.min<this.min&&(this._min=e.min),e.max>this.max&&(this._max=e.max)),this.startTime=e.startTime,this._sum+=e.sum,this._count+=e.count,this._zeroCount+=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._mergeBuckets(this.positive,e,e.positive,t),this._mergeBuckets(this.negative,e,e.negative,t)},r.prototype.diff=function(e){this._min=1/0,this._max=-1/0,this._sum-=e.sum,this._count-=e.count,this._zeroCount-=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._diffBuckets(this.positive,e,e.positive,t),this._diffBuckets(this.negative,e,e.negative,t)},r.prototype.clone=function(){return new r(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)},r.prototype._updateBuckets=function(e,t,n){var o=this._mapping.mapToIndex(t),i=!1,a=0,l=0;if(e.length===0?(e.indexStart=o,e.indexEnd=e.indexStart,e.indexBase=e.indexStart):o<e.indexStart&&e.indexEnd-o>=this._maxSize?(i=!0,l=o,a=e.indexEnd):o>e.indexEnd&&o-e.indexStart>=this._maxSize&&(i=!0,l=e.indexStart,a=o),i){var p=this._changeScale(a,l);this._downscale(p),o=this._mapping.mapToIndex(t)}this._incrementIndexBy(e,o,n)},r.prototype._incrementIndexBy=function(e,t,n){if(n!==0){if(e.length===0&&(e.indexStart=e.indexEnd=e.indexBase=t),t<e.indexStart){var o=e.indexEnd-t;o>=e.backing.length&&this._grow(e,o+1),e.indexStart=t}else if(t>e.indexEnd){var o=t-e.indexStart;o>=e.backing.length&&this._grow(e,o+1),e.indexEnd=t}var i=t-e.indexBase;i<0&&(i+=e.backing.length),e.incrementBucket(i,n)}},r.prototype._grow=function(e,t){var n=e.backing.length,o=e.indexBase-e.indexStart,i=n-o,a=jk(t);a>this._maxSize&&(a=this._maxSize);var l=a-o;e.backing.growTo(a,i,l)},r.prototype._changeScale=function(e,t){for(var n=0;e-t>=this._maxSize;)e>>=1,t>>=1,n++;return n},r.prototype._downscale=function(e){if(e!==0){if(e<0)throw new Error("impossible change of scale: "+this.scale);var t=this._mapping.scale-e;this._positive.downscale(e),this._negative.downscale(e),this._mapping=kb(t)}},r.prototype._minScale=function(e){var t=Math.min(this.scale,e.scale),n=tp.combine(this._highLowAtScale(this.positive,this.scale,t),this._highLowAtScale(e.positive,e.scale,t)),o=tp.combine(this._highLowAtScale(this.negative,this.scale,t),this._highLowAtScale(e.negative,e.scale,t));return Math.min(t-this._changeScale(n.high,n.low),t-this._changeScale(o.high,o.low))},r.prototype._highLowAtScale=function(e,t,n){if(e.length===0)return new tp(0,-1);var o=t-n;return new tp(e.indexStart>>o,e.indexEnd>>o)},r.prototype._mergeBuckets=function(e,t,n,o){for(var i=n.offset,a=t.scale-o,l=0;l<n.length;l++)this._incrementIndexBy(e,i+l>>a,n.at(l))},r.prototype._diffBuckets=function(e,t,n,o){for(var i=n.offset,a=t.scale-o,l=0;l<n.length;l++){var p=i+l>>a,u=p-e.indexBase;u<0&&(u+=e.backing.length),e.decrementBucket(u,n.at(l))}e.trim()},r}(),Yk=function(){function r(e,t){this._maxSize=e,this._recordMinMax=t,this.kind=fu.EXPONENTIAL_HISTOGRAM}return r.prototype.createAccumulation=function(e){return new Kk(e,this._maxSize,this._recordMinMax)},r.prototype.merge=function(e,t){var n=t.clone();return n.merge(e),n},r.prototype.diff=function(e,t){var n=t.clone();return n.diff(e),n},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:bc.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(function(i){var a=Hk(i,2),l=a[0],p=a[1],u=p.toPointValue(),m=e.type===ar.UP_DOWN_COUNTER||e.type===ar.OBSERVABLE_GAUGE||e.type===ar.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:l,startTime:p.startTime,endTime:o,value:{min:u.hasMinMax?u.min:void 0,max:u.hasMinMax?u.max:void 0,sum:m?void 0:u.sum,positive:{offset:u.positive.offset,bucketCounts:u.positive.bucketCounts},negative:{offset:u.negative.offset,bucketCounts:u.negative.bucketCounts},count:u.count,scale:u.scale,zeroCount:u.zeroCount}}})}},r}(),Qk=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Pg=function(){function r(e,t,n){t===void 0&&(t=0),n===void 0&&(n=[0,0]),this.startTime=e,this._current=t,this.sampleTime=n}return r.prototype.record=function(e){this._current=e,this.sampleTime=To(Date.now())},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),Xk=function(){function r(){this.kind=fu.LAST_VALUE}return r.prototype.createAccumulation=function(e){return new Pg(e)},r.prototype.merge=function(e,t){var n=Qh(t.sampleTime)>=Qh(e.sampleTime)?t:e;return new Pg(e.startTime,n.toPointValue(),n.sampleTime)},r.prototype.diff=function(e,t){var n=Qh(t.sampleTime)>=Qh(e.sampleTime)?t:e;return new Pg(t.startTime,n.toPointValue(),n.sampleTime)},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:bc.GAUGE,dataPoints:n.map(function(i){var a=Qk(i,2),l=a[0],p=a[1];return{attributes:l,startTime:p.startTime,endTime:o,value:p.toPointValue()}})}},r}(),Zk=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},bf=function(){function r(e,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1),this.startTime=e,this.monotonic=t,this._current=n,this.reset=o}return r.prototype.record=function(e){this.monotonic&&e<0||(this._current+=e)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),Db=function(){function r(e){this.monotonic=e,this.kind=fu.SUM}return r.prototype.createAccumulation=function(e){return new bf(e,this.monotonic)},r.prototype.merge=function(e,t){var n=e.toPointValue(),o=t.toPointValue();return t.reset?new bf(t.startTime,this.monotonic,o,t.reset):new bf(e.startTime,this.monotonic,n+o)},r.prototype.diff=function(e,t){var n=e.toPointValue(),o=t.toPointValue();return this.monotonic&&n>o?new bf(t.startTime,this.monotonic,o,!0):new bf(t.startTime,this.monotonic,o-n)},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:bc.SUM,dataPoints:n.map(function(i){var a=Zk(i,2),l=a[0],p=a[1];return{attributes:l,startTime:p.startTime,endTime:o,value:p.toPointValue()}}),isMonotonic:this.monotonic}},r}(),du=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),as=function(){function r(){}return r.Drop=function(){return Mb},r.Sum=function(){return Lb},r.LastValue=function(){return Ub},r.Histogram=function(){return Fb},r.ExponentialHistogram=function(){return aD},r.Default=function(){return sD},r}(),Jk=function(r){du(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new kk,e}(as),eD=function(r){du(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){switch(t.type){case ar.COUNTER:case ar.OBSERVABLE_COUNTER:case ar.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}},e.MONOTONIC_INSTANCE=new Db(!0),e.NON_MONOTONIC_INSTANCE=new Db(!1),e}(as),tD=function(r){du(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Xk,e}(as),rD=function(r){du(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Ab([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0),e}(as),nD=function(r){du(e,r);function e(t,n){n===void 0&&(n=!0);var o=r.call(this)||this;if(o._recordMinMax=n,t==null)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");t=t.concat(),t=t.sort(function(l,p){return l-p});var i=t.lastIndexOf(-1/0),a=t.indexOf(1/0);return a===-1&&(a=void 0),o._boundaries=t.slice(i+1,a),o}return e.prototype.createAggregator=function(t){return new Ab(this._boundaries,this._recordMinMax)},e}(as),iD=function(r){du(e,r);function e(t,n){t===void 0&&(t=160),n===void 0&&(n=!0);var o=r.call(this)||this;return o._maxSize=t,o._recordMinMax=n,o}return e.prototype.createAggregator=function(t){return new Yk(this._maxSize,this._recordMinMax)},e}(as),oD=function(r){du(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._resolve=function(t){switch(t.type){case ar.COUNTER:case ar.UP_DOWN_COUNTER:case ar.OBSERVABLE_COUNTER:case ar.OBSERVABLE_UP_DOWN_COUNTER:return Lb;case ar.OBSERVABLE_GAUGE:return Ub;case ar.HISTOGRAM:return t.advice.explicitBucketBoundaries?new nD(t.advice.explicitBucketBoundaries):Fb}return Ue.warn("Unable to recognize instrument type: "+t.type),Mb},e.prototype.createAggregator=function(t){return this._resolve(t).createAggregator(t)},e}(as),Mb=new Jk,Lb=new eD,Ub=new tD,Fb=new rD,aD=new iD,sD=new oD;function uD(){return"unknown_service"}var ss=function(){return ss=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},ss.apply(this,arguments)},cD=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},lD=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},fD=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Sc=function(){function r(e,t){var n=this,o;this._attributes=e,this.asyncAttributesPending=t!=null,this._syncAttributes=(o=this._attributes)!==null&&o!==void 0?o:{},this._asyncAttributesPromise=t==null?void 0:t.then(function(i){return n._attributes=Object.assign({},n._attributes,i),n.asyncAttributesPending=!1,i},function(i){return Ue.debug("a resource's async attributes promise rejected: %s",i),n.asyncAttributesPending=!1,{}})}return r.empty=function(){return r.EMPTY},r.default=function(){var e;return new r((e={},e[xn.SERVICE_NAME]=uD(),e[xn.TELEMETRY_SDK_LANGUAGE]=gg[xn.TELEMETRY_SDK_LANGUAGE],e[xn.TELEMETRY_SDK_NAME]=gg[xn.TELEMETRY_SDK_NAME],e[xn.TELEMETRY_SDK_VERSION]=gg[xn.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(r.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&Ue.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),r.prototype.waitForAsyncAttributes=function(){return cD(this,void 0,void 0,function(){return lD(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},r.prototype.merge=function(e){var t=this,n;if(!e)return this;var o=ss(ss({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new r(o);var i=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var l,p=fD(a,2),u=p[0],m=p[1];return ss(ss(ss(ss({},t._syncAttributes),u),(l=e._syncAttributes)!==null&&l!==void 0?l:e.attributes),m)});return new r(o,i)},r.EMPTY=new r({}),r}(),rp;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE",r[r.LOWMEMORY=2]="LOWMEMORY"})(rp||(rp={}));var dD=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},hD=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},xg=function(){return lu.CUMULATIVE},Bb=function(r){switch(r){case ar.COUNTER:case ar.OBSERVABLE_COUNTER:case ar.HISTOGRAM:case ar.OBSERVABLE_GAUGE:return lu.DELTA;case ar.UP_DOWN_COUNTER:case ar.OBSERVABLE_UP_DOWN_COUNTER:return lu.CUMULATIVE}},jb=function(r){switch(r){case ar.COUNTER:case ar.HISTOGRAM:return lu.DELTA;case ar.UP_DOWN_COUNTER:case ar.OBSERVABLE_UP_DOWN_COUNTER:case ar.OBSERVABLE_COUNTER:case ar.OBSERVABLE_GAUGE:return lu.CUMULATIVE}};function pD(){var r=$t(),e=r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE.trim().toLowerCase();return e==="cumulative"?xg:e==="delta"?Bb:e==="lowmemory"?jb:(Ue.warn("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '"+r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE+"', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead."),xg)}function vD(r){return r!=null?r===rp.DELTA?Bb:r===rp.LOWMEMORY?jb:xg:pD()}function mD(r){return r!=null&&r.aggregationPreference?r.aggregationPreference:function(e){return as.Default()}}var gD=function(){function r(e,t){this._otlpExporter=e,this._aggregationSelector=mD(t),this._aggregationTemporalitySelector=vD(t==null?void 0:t.temporalityPreference)}return r.prototype.export=function(e,t){this._otlpExporter.export([e],t)},r.prototype.shutdown=function(){return dD(this,void 0,void 0,function(){return hD(this,function(e){switch(e.label){case 0:return[4,this._otlpExporter.shutdown()];case 1:return e.sent(),[2]}})})},r.prototype.forceFlush=function(){return Promise.resolve()},r.prototype.selectAggregation=function(e){return this._aggregationSelector(e)},r.prototype.selectAggregationTemporality=function(e){return this._aggregationTemporalitySelector(e)},r}(),yD=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Gb=1e4,_D=5,ED=1e3,bD=5e3,SD=1.5;function wD(r){r===void 0&&(r={});var e={};return Object.entries(r).forEach(function(t){var n=yD(t,2),o=n[0],i=n[1];typeof i<"u"?e[o]=String(i):Ue.warn('Header "'+o+'" has wrong value and will be ignored')}),e}function Ng(r,e){return r.endsWith("/")||(r=r+"/"),r+e}function kg(r){try{var e=new URL(r);return e.pathname===""&&(e.pathname=e.pathname+"/"),e.toString()}catch{return Ue.warn("Could not parse export URL: '"+r+"'"),r}}function TD(r){return typeof r=="number"?r<=0?$b(r,Gb):r:AD()}function AD(){var r,e=Number((r=$t().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&r!==void 0?r:$t().OTEL_EXPORTER_OTLP_TIMEOUT);return e<=0?$b(e,Gb):e}function $b(r,e){return Ue.warn("Timeout must be greater than 0",r),e}function ID(r){var e=[429,502,503,504];return e.includes(r)}function OD(r){if(r==null)return-1;var e=Number.parseInt(r,10);if(Number.isInteger(e))return e>0?e*1e3:-1;var t=new Date(r).getTime()-Date.now();return t>=0?t:0}var RD=function(){function r(e){e===void 0&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),typeof e.hostname=="string"&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new ep(this._shutdown,this),this._concurrencyLimit=typeof e.concurrencyLimit=="number"?e.concurrencyLimit:30,this.timeoutMillis=TD(e.timeoutMillis),this.onInit(e)}return r.prototype.export=function(e,t){if(this._shutdownOnce.isCalled){t({code:Zi.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){t({code:Zi.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(e).then(function(){t({code:Zi.SUCCESS})}).catch(function(n){t({code:Zi.FAILED,error:n})})},r.prototype._export=function(e){var t=this;return new Promise(function(n,o){try{Ue.debug("items to be sent",e),t.send(e,n,o)}catch(i){o(i)}})},r.prototype.shutdown=function(){return this._shutdownOnce.call()},r.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then(function(){})},r.prototype._shutdown=function(){return Ue.debug("shutdown started"),this.onShutdown(),this.forceFlush()},r}(),CD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sf=function(r){CD(e,r);function e(t,n,o){var i=r.call(this,t)||this;return i.name="OTLPExporterError",i.data=o,i.code=n,i}return e}(Error),np=function(){return np=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},np.apply(this,arguments)},PD=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function xD(r,e,t,n,o){if(navigator.sendBeacon(e,new Blob([r],t)))Ue.debug("sendBeacon - can send",r),n();else{var i=new Sf("sendBeacon - cannot send "+r);o(i)}}function ND(r,e,t,n,o,i){var a,l,p=!1,u=setTimeout(function(){if(clearTimeout(a),p=!0,l.readyState===XMLHttpRequest.DONE){var E=new Sf("Request Timeout");i(E)}else l.abort()},n),m=function(E,w){E===void 0&&(E=_D),w===void 0&&(w=ED),l=new XMLHttpRequest,l.open("POST",e);var R={Accept:"application/json","Content-Type":"application/json"};Object.entries(np(np({},R),t)).forEach(function(S){var P=PD(S,2),x=P[0],k=P[1];l.setRequestHeader(x,k)}),l.send(r),l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE&&p===!1)if(l.status>=200&&l.status<=299)Ue.debug("xhr success",r),o(),clearTimeout(u),clearTimeout(a);else if(l.status&&ID(l.status)&&E>0){var S=void 0;w=SD*w,l.getResponseHeader("Retry-After")?S=OD(l.getResponseHeader("Retry-After")):S=Math.round(Math.random()*(bD-w)+w),a=setTimeout(function(){m(E-1,w)},S)}else{var P=new Sf("Failed to export with XHR (status: "+l.status+")",l.status);i(P),clearTimeout(u),clearTimeout(a)}},l.onabort=function(){if(p){var S=new Sf("Request Timeout");i(S)}clearTimeout(u),clearTimeout(a)},l.onerror=function(){if(p){var S=new Sf("Request Timeout");i(S)}clearTimeout(u),clearTimeout(a)}};m()}var kD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dg=function(r){kD(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,t)||this;return n._useXHR=!1,n._useXHR=!!t.headers||typeof navigator.sendBeacon!="function",n._useXHR?n._headers=Object.assign({},wD(t.headers),Wh($t().OTEL_EXPORTER_OTLP_HEADERS)):n._headers={},n}return e.prototype.onInit=function(){},e.prototype.onShutdown=function(){},e.prototype.send=function(t,n,o){var i=this;if(this._shutdownOnce.isCalled){Ue.debug("Shutdown already started. Cannot send objects");return}var a=this.convert(t),l=JSON.stringify(a),p=new Promise(function(m,E){i._useXHR?ND(l,i.url,i._headers,i.timeoutMillis,m,E):xD(l,i.url,{type:"application/json"},m,E)}).then(n,o);this._sendingPromises.push(p);var u=function(){var m=i._sendingPromises.indexOf(p);i._sendingPromises.splice(m,1)};p.then(u,u)},e}(RD);function Vb(r){var e=BigInt(1e9);return BigInt(r[0])*e+BigInt(r[1])}function DD(r){var e=Number(BigInt.asUintN(32,r)),t=Number(BigInt.asUintN(32,r>>BigInt(32)));return{low:e,high:t}}function qb(r){var e=Vb(r);return DD(e)}function MD(r){var e=Vb(r);return e.toString()}var LD=typeof BigInt<"u"?MD:ma;function Hb(r){return r}function Wb(r){if(r!==void 0)return vg(r)}var UD={encodeHrTime:qb,encodeSpanContext:vg,encodeOptionalSpanContext:Wb};function Mg(r){var e,t;if(r===void 0)return UD;var n=(e=r.useLongBits)!==null&&e!==void 0?e:!0,o=(t=r.useHex)!==null&&t!==void 0?t:!1;return{encodeHrTime:n?qb:LD,encodeSpanContext:o?Hb:vg,encodeOptionalSpanContext:o?Hb:Wb}}var FD=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function ga(r){return Object.keys(r).map(function(e){return Lg(e,r[e])})}function Lg(r,e){return{key:r,value:Ug(e)}}function Ug(r){var e=typeof r;return e==="string"?{stringValue:r}:e==="number"?Number.isInteger(r)?{intValue:r}:{doubleValue:r}:e==="boolean"?{boolValue:r}:r instanceof Uint8Array?{bytesValue:r}:Array.isArray(r)?{arrayValue:{values:r.map(Ug)}}:e==="object"&&r!=null?{kvlistValue:{values:Object.entries(r).map(function(t){var n=FD(t,2),o=n[0],i=n[1];return Lg(o,i)})}}:{}}function BD(r,e){var t,n=r.spanContext(),o=r.status;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:e.encodeOptionalSpanContext(r.parentSpanId),traceState:(t=n.traceState)===null||t===void 0?void 0:t.serialize(),name:r.name,kind:r.kind==null?0:r.kind+1,startTimeUnixNano:e.encodeHrTime(r.startTime),endTimeUnixNano:e.encodeHrTime(r.endTime),attributes:ga(r.attributes),droppedAttributesCount:r.droppedAttributesCount,events:r.events.map(function(i){return GD(i,e)}),droppedEventsCount:r.droppedEventsCount,status:{code:o.code,message:o.message},links:r.links.map(function(i){return jD(i,e)}),droppedLinksCount:r.droppedLinksCount}}function jD(r,e){var t;return{attributes:r.attributes?ga(r.attributes):[],spanId:e.encodeSpanContext(r.context.spanId),traceId:e.encodeSpanContext(r.context.traceId),traceState:(t=r.context.traceState)===null||t===void 0?void 0:t.serialize(),droppedAttributesCount:r.droppedAttributesCount||0}}function GD(r,e){return{attributes:r.attributes?ga(r.attributes):[],name:r.name,timeUnixNano:e.encodeHrTime(r.time),droppedAttributesCount:r.droppedAttributesCount||0}}var $D=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VD=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function qD(r,e){var t=Mg(e);return{resourceSpans:WD(r,t)}}function HD(r){var e,t,n=new Map;try{for(var o=$D(r),i=o.next();!i.done;i=o.next()){var a=i.value,l=n.get(a.resource);l||(l=new Map,n.set(a.resource,l));var p=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),u=l.get(p);u||(u=[],l.set(p,u)),u.push(a)}}catch(m){e={error:m}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}function WD(r,e){for(var t=HD(r),n=[],o=t.entries(),i=o.next();!i.done;){for(var a=VD(i.value,2),l=a[0],p=a[1],u=[],m=p.values(),E=m.next();!E.done;){var w=E.value;if(w.length>0){var R=w[0].instrumentationLibrary,S=R.name,P=R.version,x=R.schemaUrl,k=w.map(function(G){return BD(G,e)});u.push({scope:{name:S,version:P},spans:k,schemaUrl:x})}E=m.next()}var B={resource:{attributes:ga(l.attributes),droppedAttributesCount:0},scopeSpans:u,schemaUrl:void 0};n.push(B),i=o.next()}return n}var ip;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE"})(ip||(ip={}));var wc;(function(r){r[r.HISTOGRAM=0]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",r[r.GAUGE=2]="GAUGE",r[r.SUM=3]="SUM"})(wc||(wc={}));function zD(r,e){var t=Mg(e);return{resource:{attributes:ga(r.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:KD(r.scopeMetrics,t)}}function KD(r,e){return Array.from(r.map(function(t){return{scope:{name:t.scope.name,version:t.scope.version},metrics:t.metrics.map(function(n){return YD(n,e)}),schemaUrl:t.scope.schemaUrl}}))}function YD(r,e){var t={name:r.descriptor.name,description:r.descriptor.description,unit:r.descriptor.unit},n=JD(r.aggregationTemporality);switch(r.dataPointType){case wc.SUM:t.sum={aggregationTemporality:n,isMonotonic:r.isMonotonic,dataPoints:zb(r,e)};break;case wc.GAUGE:t.gauge={dataPoints:zb(r,e)};break;case wc.HISTOGRAM:t.histogram={aggregationTemporality:n,dataPoints:XD(r,e)};break;case wc.EXPONENTIAL_HISTOGRAM:t.exponentialHistogram={aggregationTemporality:n,dataPoints:ZD(r,e)};break}return t}function QD(r,e,t){var n={attributes:ga(r.attributes),startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)};switch(e){case pa.INT:n.asInt=r.value;break;case pa.DOUBLE:n.asDouble=r.value;break}return n}function zb(r,e){return r.dataPoints.map(function(t){return QD(t,r.descriptor.valueType,e)})}function XD(r,e){return r.dataPoints.map(function(t){var n=t.value;return{attributes:ga(t.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function ZD(r,e){return r.dataPoints.map(function(t){var n=t.value;return{attributes:ga(t.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function JD(r){switch(r){case ip.DELTA:return 1;case ip.CUMULATIVE:return 2}}function eM(r,e){return{resourceMetrics:r.map(function(t){return zD(t,e)})}}var tM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kb=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function Yb(r,e){var t=Mg(e);return{resourceLogs:nM(r,t)}}function rM(r){var e,t,n=new Map;try{for(var o=tM(r),i=o.next();!i.done;i=o.next()){var a=i.value,l=a.resource,p=a.instrumentationScope,u=p.name,m=p.version,E=m===void 0?"":m,w=p.schemaUrl,R=w===void 0?"":w,S=n.get(l);S||(S=new Map,n.set(l,S));var P=u+"@"+E+":"+R,x=S.get(P);x||(x=[],S.set(P,x)),x.push(a)}}catch(k){e={error:k}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}function nM(r,e){var t=rM(r);return Array.from(t,function(n){var o=Kb(n,2),i=o[0],a=o[1];return{resource:{attributes:ga(i.attributes),droppedAttributesCount:0},scopeLogs:Array.from(a,function(l){var p=Kb(l,2),u=p[1],m=u[0].instrumentationScope,E=m.name,w=m.version,R=m.schemaUrl;return{scope:{name:E,version:w},logRecords:u.map(function(S){return iM(S,e)}),schemaUrl:R}}),schemaUrl:void 0}})}function iM(r,e){var t,n,o;return{timeUnixNano:e.encodeHrTime(r.hrTime),observedTimeUnixNano:e.encodeHrTime(r.hrTimeObserved),severityNumber:r.severityNumber,severityText:r.severityText,body:Ug(r.body),attributes:oM(r.attributes),droppedAttributesCount:r.droppedAttributesCount,flags:(t=r.spanContext)===null||t===void 0?void 0:t.traceFlags,traceId:e.encodeOptionalSpanContext((n=r.spanContext)===null||n===void 0?void 0:n.traceId),spanId:e.encodeOptionalSpanContext((o=r.spanContext)===null||o===void 0?void 0:o.spanId)}}function g5(r){return r}function oM(r){return Object.keys(r).map(function(e){return Lg(e,r[e])})}var Qb=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xb="v1/metrics",aM="http://localhost:4318/"+Xb,sM=function(r){Qb(e,r);function e(t){var n=r.call(this,t)||this;return n._headers=Object.assign(n._headers,Wh($t().OTEL_EXPORTER_OTLP_METRICS_HEADERS)),n}return e.prototype.getDefaultUrl=function(t){return typeof t.url=="string"?t.url:$t().OTEL_EXPORTER_OTLP_METRICS_ENDPOINT.length>0?kg($t().OTEL_EXPORTER_OTLP_METRICS_ENDPOINT):$t().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?Ng($t().OTEL_EXPORTER_OTLP_ENDPOINT,Xb):aM},e.prototype.convert=function(t){return eM(t,{useLongBits:!1})},e}(Dg),uM=function(r){Qb(e,r);function e(t){return r.call(this,new sM(t),t)||this}return e}(gD),cM="exception",lM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fM=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},dM=function(){function r(e,t,n,o,i,a,l,p,u,m){l===void 0&&(l=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Um.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=o,this.parentSpanId=a,this.kind=i,this.links=l;var E=Date.now();this._performanceStartTime=ji.now(),this._performanceOffset=E-(this._performanceStartTime+yg()),this._startTimeProvided=p!=null,this.startTime=this._getTime(p??E),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,m!=null&&this.setAttributes(m),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return t==null||this._isSpanEnded()?this:e.length===0?(Ue.warn("Invalid attribute key: "+e),this):Kh(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(Ue.warn("Invalid attribute value set for key: "+e),this)},r.prototype.setAttributes=function(e){var t,n;try{for(var o=lM(Object.entries(e)),i=o.next();!i.done;i=o.next()){var a=fM(i.value,2),l=a[0],p=a[1];this.setAttribute(l,p)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},r.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return Ue.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&Ue.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),ub(t)&&(ub(n)||(n=t),t=void 0);var o=zh(t);return this.events.push({name:e,attributes:o,time:this._getTime(n),droppedAttributesCount:0}),this},r.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},r.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},r.prototype.end=function(e){if(this._isSpanEnded()){Ue.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=q1(this.startTime,this.endTime),this._duration[0]<0&&(Ue.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Ue.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},r.prototype._getTime=function(e){if(typeof e=="number"&&e<ji.now())return su(e+this._performanceOffset);if(typeof e=="number")return To(e);if(e instanceof Date)return To(e.getTime());if(_g(e))return e;if(this._startTimeProvided)return To(Date.now());var t=ji.now()-this._performanceStartTime;return cb(this.startTime,To(t))},r.prototype.isRecording=function(){return this._ended===!1},r.prototype.recordException=function(e,t){var n={};typeof e=="string"?n[Tr.EXCEPTION_MESSAGE]=e:e&&(e.code?n[Tr.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[Tr.EXCEPTION_TYPE]=e.name),e.message&&(n[Tr.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[Tr.EXCEPTION_STACKTRACE]=e.stack)),n[Tr.EXCEPTION_TYPE]||n[Tr.EXCEPTION_MESSAGE]?this.addEvent(cM,n,t):Ue.warn("Failed to record an exception "+e)},Object.defineProperty(r.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),r.prototype._isSpanEnded=function(){return this._ended&&Ue.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},r.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},r.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(Ue.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(o){return typeof o=="string"?t._truncateToLimitUtil(o,n):o}):e},r}(),Tc;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Tc||(Tc={}));var op=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:Tc.NOT_RECORD}},r.prototype.toString=function(){return"AlwaysOffSampler"},r}(),Ac=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:Tc.RECORD_AND_SAMPLED}},r.prototype.toString=function(){return"AlwaysOnSampler"},r}(),Fg=function(){function r(e){var t,n,o,i;this._root=e.root,this._root||(os(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ac),this._remoteParentSampled=(t=e.remoteParentSampled)!==null&&t!==void 0?t:new Ac,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new op,this._localParentSampled=(o=e.localParentSampled)!==null&&o!==void 0?o:new Ac,this._localParentNotSampled=(i=e.localParentNotSampled)!==null&&i!==void 0?i:new op}return r.prototype.shouldSample=function(e,t,n,o,i,a){var l=gr.getSpanContext(e);return!l||!cf(l)?this._root.shouldSample(e,t,n,o,i,a):l.isRemote?l.traceFlags&va.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,o,i,a):this._remoteParentNotSampled.shouldSample(e,t,n,o,i,a):l.traceFlags&va.SAMPLED?this._localParentSampled.shouldSample(e,t,n,o,i,a):this._localParentNotSampled.shouldSample(e,t,n,o,i,a)},r.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},r}(),Bg=function(){function r(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return r.prototype.shouldSample=function(e,t){return{decision:gE(t)&&this._accumulate(t)<this._upperBound?Tc.RECORD_AND_SAMPLED:Tc.NOT_RECORD}},r.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},r.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},r.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var o=n*8,i=parseInt(e.slice(o,o+8),16);t=(t^i)>>>0}return t},r}(),hM=$t(),pM=wo.AlwaysOn,Ic=1;function Zb(){return{sampler:Jb(hM),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:$t().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:$t().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:$t().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:$t().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:$t().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:$t().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:$t().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:$t().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Jb(r){switch(r===void 0&&(r=$t()),r.OTEL_TRACES_SAMPLER){case wo.AlwaysOn:return new Ac;case wo.AlwaysOff:return new op;case wo.ParentBasedAlwaysOn:return new Fg({root:new Ac});case wo.ParentBasedAlwaysOff:return new Fg({root:new op});case wo.TraceIdRatio:return new Bg(e0(r));case wo.ParentBasedTraceIdRatio:return new Fg({root:new Bg(e0(r))});default:return Ue.error('OTEL_TRACES_SAMPLER value "'+r.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+pM+'".'),new Ac}}function e0(r){if(r.OTEL_TRACES_SAMPLER_ARG===void 0||r.OTEL_TRACES_SAMPLER_ARG==="")return Ue.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Ic+"."),Ic;var e=Number(r.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(Ue.error("OTEL_TRACES_SAMPLER_ARG="+r.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Ic+"."),Ic):e<0||e>1?(Ue.error("OTEL_TRACES_SAMPLER_ARG="+r.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Ic+"."),Ic):e}function vM(r){var e={sampler:Jb()},t=Zb(),n=Object.assign({},t,e,r);return n.generalLimits=Object.assign({},t.generalLimits,r.generalLimits||{}),n.spanLimits=Object.assign({},t.spanLimits,r.spanLimits||{}),n}function mM(r){var e,t,n,o,i,a,l,p,u,m,E,w,R=Object.assign({},r.spanLimits),S=ab();return R.attributeCountLimit=(a=(i=(o=(t=(e=r.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&t!==void 0?t:(n=r.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&o!==void 0?o:S.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&i!==void 0?i:S.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:yf,R.attributeValueLengthLimit=(w=(E=(m=(p=(l=r.spanLimits)===null||l===void 0?void 0:l.attributeValueLengthLimit)!==null&&p!==void 0?p:(u=r.generalLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&m!==void 0?m:S.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&E!==void 0?E:S.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&w!==void 0?w:gf,Object.assign({},r,{spanLimits:R})}var gM=function(){function r(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=$t();this._maxExportBatchSize=typeof(t==null?void 0:t.maxExportBatchSize)=="number"?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(t==null?void 0:t.maxQueueSize)=="number"?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(t==null?void 0:t.scheduledDelayMillis)=="number"?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(t==null?void 0:t.exportTimeoutMillis)=="number"?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new ep(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Ue.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return r.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&va.SAMPLED&&this._addToBuffer(e)},r.prototype.shutdown=function(){return this._shutdownOnce.call()},r.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},r.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Ue.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Ue.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},r.prototype._flushAll=function(){var e=this;return new Promise(function(t,n){for(var o=[],i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),a=0,l=i;a<l;a++)o.push(e._flushOneBatch());Promise.all(o).then(function(){t()}).catch(n)})},r.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(t,n){var o=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);Dt.with(tb(Dt.active()),function(){var i=e._finishedSpans.splice(0,e._maxExportBatchSize),a=function(){return e._exporter.export(i,function(p){var u;clearTimeout(o),p.code===Zi.SUCCESS?t():n((u=p.error)!==null&&u!==void 0?u:new Error("BatchSpanProcessor: span export failed"))})},l=i.map(function(p){return p.resource}).filter(function(p){return p.asyncAttributesPending});l.length===0?a():Promise.all(l.map(function(p){var u;return(u=p.waitForAsyncAttributes)===null||u===void 0?void 0:u.call(p)})).then(a,function(p){os(p),n(p)})})})},r.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(n){e._isExporting=!1,os(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(function(){return t()},this._scheduledDelayMillis),this._timer,void 0)}},r.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},r}(),yM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),t0=function(r){yM(e,r);function e(t,n){var o=r.call(this,t,n)||this;return o.onInit(n),o}return e.prototype.onInit=function(t){var n=this;(t==null?void 0:t.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush()},this._pageHideListener=function(){n.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(gM),_M=8,EM=16,bM=function(){function r(){this.generateTraceId=r0(EM),this.generateSpanId=r0(_M)}return r}(),ap=Array(32);function r0(r){return function(){for(var t=0;t<r*2;t++)ap[t]=Math.floor(Math.random()*16)+48,ap[t]>=58&&(ap[t]+=39);return String.fromCharCode.apply(null,ap.slice(0,r*2))}}var SM=function(){function r(e,t,n){this._tracerProvider=n;var o=vM(t);this._sampler=o.sampler,this._generalLimits=o.generalLimits,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new bM,this.resource=n.resource,this.instrumentationLibrary=e}return r.prototype.startSpan=function(e,t,n){var o,i,a;t===void 0&&(t={}),n===void 0&&(n=Dt.active()),t.root&&(n=gr.deleteSpan(n));var l=gr.getSpan(n);if(fg(n)){Ue.debug("Instrumentation suppressed, returning Noop Span");var p=gr.wrapSpanContext(vE);return p}var u=l==null?void 0:l.spanContext(),m=this._idGenerator.generateSpanId(),E,w,R;!u||!gr.isSpanContextValid(u)?E=this._idGenerator.generateTraceId():(E=u.traceId,w=u.traceState,R=u.spanId);var S=(o=t.kind)!==null&&o!==void 0?o:lf.INTERNAL,P=((i=t.links)!==null&&i!==void 0?i:[]).map(function(j){return{context:j.context,attributes:zh(j.attributes)}}),x=zh(t.attributes),k=this._sampler.shouldSample(n,E,e,S,x,P);w=(a=k.traceState)!==null&&a!==void 0?a:w;var B=k.decision===Uh.RECORD_AND_SAMPLED?va.SAMPLED:va.NONE,G={traceId:E,spanId:m,traceFlags:B,traceState:w};if(k.decision===Uh.NOT_RECORD){Ue.debug("Recording is off, propagating context in a non-recording span");var p=gr.wrapSpanContext(G);return p}var X=zh(Object.assign(x,k.attributes)),F=new dM(this,n,e,G,S,R,P,t.startTime,void 0,X);return F},r.prototype.startActiveSpan=function(e,t,n,o){var i,a,l;if(!(arguments.length<2)){arguments.length===2?l=t:arguments.length===3?(i=t,l=n):(i=t,a=n,l=o);var p=a??Dt.active(),u=this.startSpan(e,i,p),m=gr.setSpan(p,u);return Dt.with(m,l,void 0,u)}},r.prototype.getGeneralLimits=function(){return this._generalLimits},r.prototype.getSpanLimits=function(){return this._spanLimits},r.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},r}(),sp=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wM=function(){function r(e){this._spanProcessors=e}return r.prototype.forceFlush=function(){var e,t,n=[];try{for(var o=sp(this._spanProcessors),i=o.next();!i.done;i=o.next()){var a=i.value;n.push(a.forceFlush())}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return new Promise(function(l){Promise.all(n).then(function(){l()}).catch(function(p){os(p||new Error("MultiSpanProcessor: forceFlush failed")),l()})})},r.prototype.onStart=function(e,t){var n,o;try{for(var i=sp(this._spanProcessors),a=i.next();!a.done;a=i.next()){var l=a.value;l.onStart(e,t)}}catch(p){n={error:p}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},r.prototype.onEnd=function(e){var t,n;try{for(var o=sp(this._spanProcessors),i=o.next();!i.done;i=o.next()){var a=i.value;a.onEnd(e)}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},r.prototype.shutdown=function(){var e,t,n=[];try{for(var o=sp(this._spanProcessors),i=o.next();!i.done;i=o.next()){var a=i.value;n.push(a.shutdown())}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return new Promise(function(l,p){Promise.all(n).then(function(){l()},p)})},r}(),TM=function(){function r(){}return r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){},r.prototype.shutdown=function(){return Promise.resolve()},r.prototype.forceFlush=function(){return Promise.resolve()},r}(),hu;(function(r){r[r.resolved=0]="resolved",r[r.timeout=1]="timeout",r[r.error=2]="error",r[r.unresolved=3]="unresolved"})(hu||(hu={}));var AM=function(){function r(e){e===void 0&&(e={});var t;this._registeredSpanProcessors=[],this._tracers=new Map;var n=yb({},Zb(),mM(e));this.resource=(t=n.resource)!==null&&t!==void 0?t:Sc.empty(),this.resource=Sc.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var o=this._buildExporterFromEnv();if(o!==void 0){var i=new t0(o);this.activeSpanProcessor=i}else this.activeSpanProcessor=new TM}return r.prototype.getTracer=function(e,t,n){var o=e+"@"+(t||"")+":"+((n==null?void 0:n.schemaUrl)||"");return this._tracers.has(o)||this._tracers.set(o,new SM({name:e,version:t,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this)),this._tracers.get(o)},r.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(t){return Ue.error("Error while trying to shutdown current span processor",t)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new wM(this._registeredSpanProcessors)},r.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},r.prototype.register=function(e){e===void 0&&(e={}),gr.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&Dt.setGlobalContextManager(e.contextManager),e.propagator&&bi.setGlobalPropagator(e.propagator)},r.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map(function(n){return new Promise(function(o){var i,a=setTimeout(function(){o(new Error("Span processor did not completed within timeout period of "+e+" ms")),i=hu.timeout},e);n.forceFlush().then(function(){clearTimeout(a),i!==hu.timeout&&(i=hu.resolved,o(i))}).catch(function(l){clearTimeout(a),i=hu.error,o(l)})})});return new Promise(function(n,o){Promise.all(t).then(function(i){var a=i.filter(function(l){return l!==hu.resolved});a.length>0?o(a):n()}).catch(function(i){return o([i])})})},r.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},r.prototype._getPropagator=function(e){var t;return(t=this.constructor._registeredPropagators.get(e))===null||t===void 0?void 0:t()},r.prototype._getSpanExporter=function(e){var t;return(t=this.constructor._registeredExporters.get(e))===null||t===void 0?void 0:t()},r.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set($t().OTEL_PROPAGATORS)),n=t.map(function(i){var a=e._getPropagator(i);return a||Ue.warn('Propagator "'+i+'" requested through environment variable is unavailable.'),a}),o=n.reduce(function(i,a){return a&&i.push(a),i},[]);if(o.length!==0)return t.length===1?o[0]:new W1({propagators:o})},r.prototype._buildExporterFromEnv=function(){var e=$t().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var t=this._getSpanExporter(e);return t||Ue.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},r._registeredPropagators=new Map([["tracecontext",function(){return new ck}],["baggage",function(){return new pC}]]),r._registeredExporters=new Map,r}(),IM=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},OM=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},RM=function(){function r(){this._enabled=!1,this._currentContext=ru}return r.prototype._bindFunction=function(e,t){e===void 0&&(e=ru);var n=this,o=function(){for(var i=this,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return n.with(e,function(){return t.apply(i,a)})};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),o},r.prototype.active=function(){return this._currentContext},r.prototype.bind=function(e,t){return e===void 0&&(e=this.active()),typeof t=="function"?this._bindFunction(e,t):t},r.prototype.disable=function(){return this._currentContext=ru,this._enabled=!1,this},r.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=ru,this)},r.prototype.with=function(e,t,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=this._currentContext;this._currentContext=e||ru;try{return t.call.apply(t,OM([n],IM(o),!1))}finally{this._currentContext=a}},r}(),CM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),PM=function(r){CM(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return n}return e.prototype.register=function(t){t===void 0&&(t={}),t.contextManager===void 0&&(t.contextManager=new RM),t.contextManager&&t.contextManager.enable(),r.prototype.register.call(this,t)},e}(AM),wt;(function(r){r.CONNECT_END="connectEnd",r.CONNECT_START="connectStart",r.DECODED_BODY_SIZE="decodedBodySize",r.DOM_COMPLETE="domComplete",r.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",r.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",r.DOM_INTERACTIVE="domInteractive",r.DOMAIN_LOOKUP_END="domainLookupEnd",r.DOMAIN_LOOKUP_START="domainLookupStart",r.ENCODED_BODY_SIZE="encodedBodySize",r.FETCH_START="fetchStart",r.LOAD_EVENT_END="loadEventEnd",r.LOAD_EVENT_START="loadEventStart",r.NAVIGATION_START="navigationStart",r.REDIRECT_END="redirectEnd",r.REDIRECT_START="redirectStart",r.REQUEST_START="requestStart",r.RESPONSE_END="responseEnd",r.RESPONSE_START="responseStart",r.SECURE_CONNECTION_START="secureConnectionStart",r.UNLOAD_EVENT_END="unloadEventEnd",r.UNLOAD_EVENT_START="unloadEventStart"})(wt||(wt={}));var jg;function xM(){return jg||(jg=document.createElement("a")),jg}function pu(r,e){return e in r}function An(r,e,t){if(pu(t,e)&&typeof t[e]=="number")return r.addEvent(e,t[e]),r}function Oc(r,e){An(r,wt.FETCH_START,e),An(r,wt.DOMAIN_LOOKUP_START,e),An(r,wt.DOMAIN_LOOKUP_END,e),An(r,wt.CONNECT_START,e),pu(e,"name")&&e.name.startsWith("https:")&&An(r,wt.SECURE_CONNECTION_START,e),An(r,wt.CONNECT_END,e),An(r,wt.REQUEST_START,e),An(r,wt.RESPONSE_START,e),An(r,wt.RESPONSE_END,e);var t=e[wt.ENCODED_BODY_SIZE];t!==void 0&&r.setAttribute(Tr.HTTP_RESPONSE_CONTENT_LENGTH,t);var n=e[wt.DECODED_BODY_SIZE];n!==void 0&&t!==n&&r.setAttribute(Tr.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,n)}function NM(r){return r.slice().sort(function(e,t){var n=e[wt.FETCH_START],o=t[wt.FETCH_START];return n>o?1:n<o?-1:0})}function n0(){return typeof location<"u"?location.origin:void 0}function i0(r,e,t,n,o,i){o===void 0&&(o=new WeakSet);var a=ya(r);r=a.toString();var l=DM(r,e,t,n,o,i);if(l.length===0)return{mainRequest:void 0};if(l.length===1)return{mainRequest:l[0]};var p=NM(l);if(a.origin!==n0()&&p.length>1){var u=p[0],m=kM(p,u[wt.RESPONSE_END],t),E=u[wt.RESPONSE_END],w=m[wt.FETCH_START];return w<E&&(m=u,u=void 0),{corsPreFlightRequest:u,mainRequest:m}}else return{mainRequest:l[0]}}function kM(r,e,t){for(var n=ma(t),o=ma(uu(e)),i=r[1],a,l=r.length,p=1;p<l;p++){var u=r[p],m=ma(uu(u[wt.FETCH_START])),E=ma(uu(u[wt.RESPONSE_END])),w=n-E;m>=o&&(!a||w<a)&&(a=w,i=u)}return i}function DM(r,e,t,n,o,i){var a=ma(e),l=ma(t),p=n.filter(function(u){var m=ma(uu(u[wt.FETCH_START])),E=ma(uu(u[wt.RESPONSE_END]));return u.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&u.name===r&&m>=a&&E<=l});return p.length>0&&(p=p.filter(function(u){return!o.has(u)})),p}function ya(r){if(typeof URL=="function")return new URL(r,typeof document<"u"?document.baseURI:typeof location<"u"?location.href:void 0);var e=xM();return e.href=r,e}function o0(r,e){if(r.nodeType===Node.DOCUMENT_NODE)return"/";var t=LM(r,e);if(e&&t.indexOf("@id")>0)return t;var n="";return r.parentNode&&(n+=o0(r.parentNode,!1)),n+=t,n}function MM(r){if(!r.parentNode)return 0;var e=[r.nodeType];r.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);var t=Array.from(r.parentNode.childNodes);return t=t.filter(function(n){var o=n.localName;return e.indexOf(n.nodeType)>=0&&o===r.localName}),t.length>=1?t.indexOf(r)+1:0}function LM(r,e){var t=r.nodeType,n=MM(r),o="";if(t===Node.ELEMENT_NODE){var i=r.getAttribute("id");if(e&&i)return'//*[@id="'+i+'"]';o=r.localName}else if(t===Node.TEXT_NODE||t===Node.CDATA_SECTION_NODE)o="text()";else if(t===Node.COMMENT_NODE)o="comment()";else return"";return o&&n>1?"/"+o+"["+n+"]":"/"+o}function a0(r,e){var t=e||[];(typeof t=="string"||t instanceof RegExp)&&(t=[t]);var n=ya(r);return n.origin===n0()?!0:t.some(function(o){return wb(r,o)})}var UM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),s0="v1/traces",FM="http://localhost:4318/"+s0,BM=function(r){UM(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,t)||this;return n._headers=Object.assign(n._headers,Wh($t().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return e.prototype.convert=function(t){return qD(t,{useHex:!0,useLongBits:!1})},e.prototype.getDefaultUrl=function(t){return typeof t.url=="string"?t.url:$t().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?kg($t().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):$t().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?Ng($t().OTEL_EXPORTER_OTLP_ENDPOINT,s0):FM},e}(Dg),u0="v1/logs",jM="http://localhost:4318/"+u0;function GM(r){return typeof r.url=="string"?r.url:$t().OTEL_EXPORTER_OTLP_LOGS_ENDPOINT.length>0?kg($t().OTEL_EXPORTER_OTLP_LOGS_ENDPOINT):$t().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?Ng($t().OTEL_EXPORTER_OTLP_ENDPOINT,u0):jM}var $M=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wf=function(){return wf=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},wf.apply(this,arguments)},VM=function(r){$M(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,wf({timeoutMillis:$t().OTEL_EXPORTER_OTLP_LOGS_TIMEOUT},t))||this;return n._headers=wf(wf({},n._headers),Wh($t().OTEL_EXPORTER_OTLP_LOGS_HEADERS)),n}return e.prototype.convert=function(t){return Yb(t,{useHex:!0,useLongBits:!1})},e.prototype.getDefaultUrl=function(t){return GM(t)},e}(Dg),up;(function(r){r[r.UNSPECIFIED=0]="UNSPECIFIED",r[r.TRACE=1]="TRACE",r[r.TRACE2=2]="TRACE2",r[r.TRACE3=3]="TRACE3",r[r.TRACE4=4]="TRACE4",r[r.DEBUG=5]="DEBUG",r[r.DEBUG2=6]="DEBUG2",r[r.DEBUG3=7]="DEBUG3",r[r.DEBUG4=8]="DEBUG4",r[r.INFO=9]="INFO",r[r.INFO2=10]="INFO2",r[r.INFO3=11]="INFO3",r[r.INFO4=12]="INFO4",r[r.WARN=13]="WARN",r[r.WARN2=14]="WARN2",r[r.WARN3=15]="WARN3",r[r.WARN4=16]="WARN4",r[r.ERROR=17]="ERROR",r[r.ERROR2=18]="ERROR2",r[r.ERROR3=19]="ERROR3",r[r.ERROR4=20]="ERROR4",r[r.FATAL=21]="FATAL",r[r.FATAL2=22]="FATAL2",r[r.FATAL3=23]="FATAL3",r[r.FATAL4=24]="FATAL4"})(up||(up={}));var qM=function(){function r(){}return r.prototype.emit=function(e){},r}(),HM=new qM,WM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zM=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},KM=function(){function r(e,t,n){this.attributes={},this.totalAttributesCount=0,this._isReadonly=!1;var o=n.timestamp,i=n.observedTimestamp,a=n.severityNumber,l=n.severityText,p=n.body,u=n.attributes,m=u===void 0?{}:u,E=n.context,w=Date.now();if(this.hrTime=uu(o??w),this.hrTimeObserved=uu(i??w),E){var R=gr.getSpanContext(E);R&&cf(R)&&(this.spanContext=R)}this.severityNumber=a,this.severityText=l,this.body=p,this.resource=e.resource,this.instrumentationScope=t,this._logRecordLimits=e.logRecordLimits,this.setAttributes(m)}return Object.defineProperty(r.prototype,"severityText",{get:function(){return this._severityText},set:function(e){this._isLogRecordReadonly()||(this._severityText=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"severityNumber",{get:function(){return this._severityNumber},set:function(e){this._isLogRecordReadonly()||(this._severityNumber=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"body",{get:function(){return this._body},set:function(e){this._isLogRecordReadonly()||(this._body=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedAttributesCount",{get:function(){return this.totalAttributesCount-Object.keys(this.attributes).length},enumerable:!1,configurable:!0}),r.prototype.setAttribute=function(e,t){return this._isLogRecordReadonly()?this:t===null?this:e.length===0?(Ue.warn("Invalid attribute key: "+e),this):!Kh(t)&&!(typeof t=="object"&&!Array.isArray(t)&&Object.keys(t).length>0)?(Ue.warn("Invalid attribute value set for key: "+e),this):(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?this:(Kh(t)?this.attributes[e]=this._truncateToSize(t):this.attributes[e]=t,this))},r.prototype.setAttributes=function(e){var t,n;try{for(var o=WM(Object.entries(e)),i=o.next();!i.done;i=o.next()){var a=zM(i.value,2),l=a[0],p=a[1];this.setAttribute(l,p)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},r.prototype.setBody=function(e){return this.body=e,this},r.prototype.setSeverityNumber=function(e){return this.severityNumber=e,this},r.prototype.setSeverityText=function(e){return this.severityText=e,this},r.prototype._makeReadonly=function(){this._isReadonly=!0},r.prototype._truncateToSize=function(e){var t=this,n=this._logRecordLimits.attributeValueLengthLimit;return n<=0?(Ue.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(o){return typeof o=="string"?t._truncateToLimitUtil(o,n):o}):e},r.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substring(0,t)},r.prototype._isLogRecordReadonly=function(){return this._isReadonly&&Ue.warn("Can not execute the operation on emitted log record"),this._isReadonly},r}(),Gg=function(){return Gg=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},Gg.apply(this,arguments)},YM=function(){function r(e,t){this.instrumentationScope=e,this._sharedState=t}return r.prototype.emit=function(e){var t=e.context||Dt.active(),n=new KM(this._sharedState,this.instrumentationScope,Gg({context:t},e));this._sharedState.activeProcessor.onEmit(n,t),n._makeReadonly()},r}();function QM(){return{forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:$t().OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:$t().OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT},includeTraceContext:!0}}function XM(r){var e,t,n,o,i,a,l=ab();return{attributeCountLimit:(n=(t=(e=r.attributeCountLimit)!==null&&e!==void 0?e:l.OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT)!==null&&t!==void 0?t:l.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&n!==void 0?n:yf,attributeValueLengthLimit:(a=(i=(o=r.attributeValueLengthLimit)!==null&&o!==void 0?o:l.OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&i!==void 0?i:l.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&a!==void 0?a:gf}}var c0=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},l0=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ZM=function(){function r(e,t){this.processors=e,this.forceFlushTimeoutMillis=t}return r.prototype.forceFlush=function(){return c0(this,void 0,void 0,function(){var e;return l0(this,function(t){switch(t.label){case 0:return e=this.forceFlushTimeoutMillis,[4,Promise.all(this.processors.map(function(n){return Sb(n.forceFlush(),e)}))];case 1:return t.sent(),[2]}})})},r.prototype.onEmit=function(e,t){this.processors.forEach(function(n){return n.onEmit(e,t)})},r.prototype.shutdown=function(){return c0(this,void 0,void 0,function(){return l0(this,function(e){switch(e.label){case 0:return[4,Promise.all(this.processors.map(function(t){return t.shutdown()}))];case 1:return e.sent(),[2]}})})},r}(),JM=function(){function r(){}return r.prototype.forceFlush=function(){return Promise.resolve()},r.prototype.onEmit=function(e,t){},r.prototype.shutdown=function(){return Promise.resolve()},r}(),eL=function(){function r(e,t,n){this.resource=e,this.forceFlushTimeoutMillis=t,this.logRecordLimits=n,this.loggers=new Map,this.registeredLogRecordProcessors=[],this.activeProcessor=new JM}return r}(),tL="unknown",rL=function(){function r(e){e===void 0&&(e={});var t=yb({},QM(),e),n=t.resource,o=n===void 0?Sc.default():n,i=t.logRecordLimits,a=t.forceFlushTimeoutMillis;this._sharedState=new eL(o,a,XM(i)),this._shutdownOnce=new ep(this._shutdown,this)}return r.prototype.getLogger=function(e,t,n){if(this._shutdownOnce.isCalled)return Ue.warn("A shutdown LoggerProvider cannot provide a Logger"),HM;e||Ue.warn("Logger requested without instrumentation scope name.");var o=e||tL,i=o+"@"+(t||"")+":"+((n==null?void 0:n.schemaUrl)||"");return this._sharedState.loggers.has(i)||this._sharedState.loggers.set(i,new YM({name:o,version:t,schemaUrl:n==null?void 0:n.schemaUrl},this._sharedState)),this._sharedState.loggers.get(i)},r.prototype.addLogRecordProcessor=function(e){this._sharedState.registeredLogRecordProcessors.length===0&&this._sharedState.activeProcessor.shutdown().catch(function(t){return Ue.error("Error while trying to shutdown current log record processor",t)}),this._sharedState.registeredLogRecordProcessors.push(e),this._sharedState.activeProcessor=new ZM(this._sharedState.registeredLogRecordProcessors,this._sharedState.forceFlushTimeoutMillis)},r.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?(Ue.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()},r.prototype.shutdown=function(){return this._shutdownOnce.isCalled?(Ue.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()},r.prototype._shutdown=function(){return this._sharedState.activeProcessor.shutdown()},r}(),nL=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},iL=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},oL=function(){function r(e,t){var n,o,i,a;this._exporter=e,this._finishedLogRecords=[];var l=$t();this._maxExportBatchSize=(n=t==null?void 0:t.maxExportBatchSize)!==null&&n!==void 0?n:l.OTEL_BLRP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=(o=t==null?void 0:t.maxQueueSize)!==null&&o!==void 0?o:l.OTEL_BLRP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=(i=t==null?void 0:t.scheduledDelayMillis)!==null&&i!==void 0?i:l.OTEL_BLRP_SCHEDULE_DELAY,this._exportTimeoutMillis=(a=t==null?void 0:t.exportTimeoutMillis)!==null&&a!==void 0?a:l.OTEL_BLRP_EXPORT_TIMEOUT,this._shutdownOnce=new ep(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Ue.warn("BatchLogRecordProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return r.prototype.onEmit=function(e){this._shutdownOnce.isCalled||this._addToBuffer(e)},r.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},r.prototype.shutdown=function(){return this._shutdownOnce.call()},r.prototype._shutdown=function(){return nL(this,void 0,void 0,function(){return iL(this,function(e){switch(e.label){case 0:return this.onShutdown(),[4,this._flushAll()];case 1:return e.sent(),[4,this._exporter.shutdown()];case 2:return e.sent(),[2]}})})},r.prototype._addToBuffer=function(e){this._finishedLogRecords.length>=this._maxQueueSize||(this._finishedLogRecords.push(e),this._maybeStartTimer())},r.prototype._flushAll=function(){var e=this;return new Promise(function(t,n){for(var o=[],i=Math.ceil(e._finishedLogRecords.length/e._maxExportBatchSize),a=0;a<i;a++)o.push(e._flushOneBatch());Promise.all(o).then(function(){t()}).catch(n)})},r.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedLogRecords.length===0?Promise.resolve():new Promise(function(t,n){Sb(e._export(e._finishedLogRecords.splice(0,e._maxExportBatchSize)),e._exportTimeoutMillis).then(function(){return t()}).catch(n)})},r.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedLogRecords.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(t){os(t)})},this._scheduledDelayMillis),this._timer,void 0)},r.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},r.prototype._export=function(e){var t=this,n=function(){return Pk._export(t._exporter,e).then(function(i){var a;i.code!==Zi.SUCCESS&&os((a=i.error)!==null&&a!==void 0?a:new Error("BatchLogRecordProcessor: log record export failed (status "+i+")"))}).catch(os)},o=e.map(function(i){return i.resource}).filter(function(i){return i.asyncAttributesPending});return o.length===0?n():Promise.all(o.map(function(i){var a;return(a=i.waitForAsyncAttributes)===null||a===void 0?void 0:a.call(i)})).then(n,os)},r}(),aL=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sL=function(r){aL(e,r);function e(t,n){var o=r.call(this,t,n)||this;return o._onInit(n),o}return e.prototype.onShutdown=function(){typeof document>"u"||(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e.prototype._onInit=function(t){var n=this;(t==null?void 0:t.disableAutoFlushOnDocumentHide)===!0||typeof document>"u"||(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush()},this._pageHideListener=function(){n.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e}(oL),$g=function(){return $g=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},$g.apply(this,arguments)},uL=function(){function r(e){var t=e.otelLogger;this.otelLogger=t}return r.prototype.emit=function(e){var t=e.severityNumber,n=e.body,o=e.error,i=e.user,a=e.featureFlag,l=e.attributes,p=$g({"feature_flag.key":a==null?void 0:a.key,"feature_flag.variant":a==null?void 0:a.variant,"exception.message":o==null?void 0:o.message,"exception.stacktrace":o==null?void 0:o.stack,"exception.type":o==null?void 0:o.name,"user.id":i==null?void 0:i.id,"user.experiment":i==null?void 0:i.experiment},l);for(var u in p)p.hasOwnProperty(u)&&!p[u]&&delete p[u];this.otelLogger.emit({body:n,severityNumber:t,attributes:p})},r}(),bt;(function(r){r[r.UNSPECIFIED=0]="UNSPECIFIED",r[r.TRACE=1]="TRACE",r[r.TRACE2=2]="TRACE2",r[r.TRACE3=3]="TRACE3",r[r.TRACE4=4]="TRACE4",r[r.DEBUG=5]="DEBUG",r[r.DEBUG2=6]="DEBUG2",r[r.DEBUG3=7]="DEBUG3",r[r.DEBUG4=8]="DEBUG4",r[r.INFO=9]="INFO",r[r.INFO2=10]="INFO2",r[r.INFO3=11]="INFO3",r[r.INFO4=12]="INFO4",r[r.WARN=13]="WARN",r[r.WARN2=14]="WARN2",r[r.WARN3=15]="WARN3",r[r.WARN4=16]="WARN4",r[r.ERROR=17]="ERROR",r[r.ERROR2=18]="ERROR2",r[r.ERROR3=19]="ERROR3",r[r.ERROR4=20]="ERROR4",r[r.FATAL=21]="FATAL",r[r.FATAL2=22]="FATAL2",r[r.FATAL3=23]="FATAL3",r[r.FATAL4=24]="FATAL4"})(bt||(bt={}));var cL=function(){function r(){}return r.prototype.emit=function(e){},r}(),lL=function(){function r(){}return r.prototype.getLogger=function(e,t,n){return new cL},r}(),f0=new lL,fL=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},cp=Symbol.for("io.opentelemetry.js.api.logs"),Tf=fL;function dL(r,e,t){return function(n){return n===r?e:t}}var d0=1,hL=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalLoggerProvider=function(e){return Tf[cp]?this.getLoggerProvider():(Tf[cp]=dL(d0,e,f0),e)},r.prototype.getLoggerProvider=function(){var e,t;return(t=(e=Tf[cp])===null||e===void 0?void 0:e.call(Tf,d0))!==null&&t!==void 0?t:f0},r.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},r.prototype.disable=function(){delete Tf[cp]},r}(),h0=hL.getInstance();function p0(r){r===void 0&&(r=[]);for(var e=[],t=0,n=r.length;t<n;t++){var o=r[t];if(Array.isArray(o)){var i=p0(o);e=e.concat(i.instrumentations)}else typeof o=="function"?e.push(new o):o.instrumentationName&&e.push(o)}return{instrumentations:e}}function pL(r,e,t,n){for(var o=0,i=r.length;o<i;o++){var a=r[o];e&&a.setTracerProvider(e),t&&a.setMeterProvider(t),n&&a.setLoggerProvider&&a.setLoggerProvider(n),a.getConfig().enabled||a.enable()}}function vL(r){r.forEach(function(e){return e.disable()})}function mL(r){var e=p0(r.instrumentations).instrumentations,t=r.tracerProvider||gr.getTracerProvider(),n=r.meterProvider||Bm.getMeterProvider(),o=r.loggerProvider||h0.getLoggerProvider();return pL(e,t,n,o),function(){vL(e)}}function Vg(r){return typeof r=="function"}var Yn=console.error.bind(console);function Af(r,e,t){var n=!!r[e]&&r.propertyIsEnumerable(e);Object.defineProperty(r,e,{configurable:!0,enumerable:n,writable:!0,value:t})}function If(r){r&&r.logger&&(Vg(r.logger)?Yn=r.logger:Yn("new logger isn't a function, not replacing"))}function v0(r,e,t){if(!r||!r[e]){Yn("no original function "+e+" to wrap");return}if(!t){Yn("no wrapper function"),Yn(new Error().stack);return}if(!Vg(r[e])||!Vg(t)){Yn("original object and wrapper must be functions");return}var n=r[e],o=t(n,e);return Af(o,"__original",n),Af(o,"__unwrap",function(){r[e]===o&&Af(r,e,n)}),Af(o,"__wrapped",!0),Af(r,e,o),o}function gL(r,e,t){if(r)Array.isArray(r)||(r=[r]);else{Yn("must provide one or more modules to patch"),Yn(new Error().stack);return}if(!(e&&Array.isArray(e))){Yn("must provide one or more functions to wrap on modules");return}r.forEach(function(n){e.forEach(function(o){v0(n,o,t)})})}function m0(r,e){if(!r||!r[e]){Yn("no function to unwrap."),Yn(new Error().stack);return}if(!r[e].__unwrap)Yn("no original to unwrap to -- has "+e+" already been unwrapped?");else return r[e].__unwrap()}function yL(r,e){if(r)Array.isArray(r)||(r=[r]);else{Yn("must provide one or more modules to patch"),Yn(new Error().stack);return}if(!(e&&Array.isArray(e))){Yn("must provide one or more functions to unwrap on modules");return}r.forEach(function(t){e.forEach(function(n){m0(t,n)})})}If.wrap=v0,If.massWrap=gL,If.unwrap=m0,If.massUnwrap=yL;var lp=If,qg=function(){return qg=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},qg.apply(this,arguments)},_L=function(){function r(e,t,n){n===void 0&&(n={}),this.instrumentationName=e,this.instrumentationVersion=t,this._wrap=lp.wrap,this._unwrap=lp.unwrap,this._massWrap=lp.massWrap,this._massUnwrap=lp.massUnwrap,this._config=qg({enabled:!0},n),this._diag=Ue.createComponentLogger({namespace:e}),this._tracer=gr.getTracer(e,t),this._meter=Bm.getMeter(e,t),this._logger=h0.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){e===void 0&&(e={}),this._config=Object.assign({},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r}(),EL=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fp=function(r){EL(e,r);function e(t,n,o){o===void 0&&(o={});var i=r.call(this,t,n,o)||this;return i._config.enabled&&i.enable(),i}return e}(_L);function dp(r,e,t){var n,o;try{o=r()}catch(i){n=i}finally{if(e(n,o),n&&!t)throw n;return o}}function In(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var Of;(function(r){r.DOCUMENT_LOAD="documentLoad",r.DOCUMENT_FETCH="documentFetch",r.RESOURCE_FETCH="resourceFetch"})(Of||(Of={}));var bL="0.36.0",hp;(function(r){r.FIRST_PAINT="firstPaint",r.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(hp||(hp={}));var SL=function(){var r,e,t={},n=(e=(r=ji).getEntriesByType)===null||e===void 0?void 0:e.call(r,"navigation")[0];if(n){var o=Object.values(wt);o.forEach(function(l){if(pu(n,l)){var p=n[l];typeof p=="number"&&(t[l]=p)}})}else{var i=ji,a=i.timing;if(a){var o=Object.values(wt);o.forEach(function(p){if(pu(a,p)){var u=a[p];typeof u=="number"&&(t[p]=u)}})}}return t},g0={"first-paint":hp.FIRST_PAINT,"first-contentful-paint":hp.FIRST_CONTENTFUL_PAINT},wL=function(r){var e,t,n=(t=(e=ji).getEntriesByType)===null||t===void 0?void 0:t.call(e,"paint");n&&n.forEach(function(o){var i=o.name,a=o.startTime;pu(g0,i)&&r.addEvent(g0[i],a)})},TL=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),AL=function(r){TL(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,"@opentelemetry/instrumentation-document-load",bL,t)||this;return n.component="document-load",n.version="1",n.moduleName=n.component,n}return e.prototype.init=function(){},e.prototype._onDocumentLoaded=function(){var t=this;window.setTimeout(function(){t._collectPerformance()})},e.prototype._addResourcesSpans=function(t){var n=this,o,i,a=(i=(o=ji).getEntriesByType)===null||i===void 0?void 0:i.call(o,"resource");a&&a.forEach(function(l){n._initResourceSpan(l,t)})},e.prototype._collectPerformance=function(){var t=this,n=Array.from(document.getElementsByTagName("meta")).find(function(a){return a.getAttribute("name")===Xh}),o=SL(),i=n&&n.content||"";Dt.with(bi.extract(ru,{traceparent:i}),function(){var a,l=t._startSpan(Of.DOCUMENT_LOAD,wt.FETCH_START,o);l&&(Dt.with(gr.setSpan(Dt.active(),l),function(){var p=t._startSpan(Of.DOCUMENT_FETCH,wt.FETCH_START,o);p&&(p.setAttribute(Tr.HTTP_URL,location.href),Dt.with(gr.setSpan(Dt.active(),p),function(){var u;Oc(p,o),t._addCustomAttributesOnSpan(p,(u=t._getConfig().applyCustomAttributesOnSpan)===null||u===void 0?void 0:u.documentFetch),t._endSpan(p,wt.RESPONSE_END,o)}))}),l.setAttribute(Tr.HTTP_URL,location.href),l.setAttribute(Tr.HTTP_USER_AGENT,navigator.userAgent),t._addResourcesSpans(l),An(l,wt.FETCH_START,o),An(l,wt.UNLOAD_EVENT_START,o),An(l,wt.UNLOAD_EVENT_END,o),An(l,wt.DOM_INTERACTIVE,o),An(l,wt.DOM_CONTENT_LOADED_EVENT_START,o),An(l,wt.DOM_CONTENT_LOADED_EVENT_END,o),An(l,wt.DOM_COMPLETE,o),An(l,wt.LOAD_EVENT_START,o),An(l,wt.LOAD_EVENT_END,o),wL(l),t._addCustomAttributesOnSpan(l,(a=t._getConfig().applyCustomAttributesOnSpan)===null||a===void 0?void 0:a.documentLoad),t._endSpan(l,wt.LOAD_EVENT_END,o))})},e.prototype._endSpan=function(t,n,o){t&&(pu(o,n)?t.end(o[n]):t.end())},e.prototype._initResourceSpan=function(t,n){var o,i=this._startSpan(Of.RESOURCE_FETCH,wt.FETCH_START,t,n);i&&(i.setAttribute(Tr.HTTP_URL,t.name),Oc(i,t),this._addCustomAttributesOnResourceSpan(i,t,(o=this._getConfig().applyCustomAttributesOnSpan)===null||o===void 0?void 0:o.resourceFetch),this._endSpan(i,wt.RESPONSE_END,t))},e.prototype._startSpan=function(t,n,o,i){if(pu(o,n)&&typeof o[n]=="number"){var a=this.tracer.startSpan(t,{startTime:o[n]},i?gr.setSpan(Dt.active(),i):void 0);return a}},e.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},e.prototype._getConfig=function(){return this._config},e.prototype._addCustomAttributesOnSpan=function(t,n){var o=this;n&&dp(function(){return n(t)},function(i){i&&o._diag.error("addCustomAttributesOnSpan",i)},!0)},e.prototype._addCustomAttributesOnResourceSpan=function(t,n,o){var i=this;o&&dp(function(){return o(t,n)},function(a){a&&i._diag.error("addCustomAttributesOnResourceSpan",a)},!0)},e.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},e.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},e}(fp),pp;(function(r){r.COMPONENT="component",r.HTTP_ERROR_NAME="http.error_name",r.HTTP_STATUS_TEXT="http.status_text"})(pp||(pp={}));var y0="0.49.1",IL=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hg,OL=300,_0=typeof process=="object"&&((Hg=process.release)===null||Hg===void 0?void 0:Hg.name)==="node",RL=function(r){IL(e,r);function e(t){var n=r.call(this,"@opentelemetry/instrumentation-fetch",y0,t)||this;return n.component="fetch",n.version=y0,n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return e.prototype.init=function(){},e.prototype._getConfig=function(){return this._config},e.prototype._addChildSpan=function(t,n){var o=this.tracer.startSpan("CORS Preflight",{startTime:n[wt.FETCH_START]},gr.setSpan(Dt.active(),t));this._getConfig().ignoreNetworkEvents||Oc(o,n),o.end(n[wt.RESPONSE_END])},e.prototype._addFinalSpanAttributes=function(t,n){var o=ya(n.url);t.setAttribute(Tr.HTTP_STATUS_CODE,n.status),n.statusText!=null&&t.setAttribute(pp.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(Tr.HTTP_HOST,o.host),t.setAttribute(Tr.HTTP_SCHEME,o.protocol.replace(":","")),typeof navigator<"u"&&t.setAttribute(Tr.HTTP_USER_AGENT,navigator.userAgent)},e.prototype._addHeaders=function(t,n){if(!a0(n,this._getConfig().propagateTraceHeaderCorsUrls)){var o={};bi.inject(Dt.active(),o),Object.keys(o).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(t instanceof Request)bi.inject(Dt.active(),t.headers,{set:function(i,a,l){return i.set(a,typeof l=="string"?l:String(l))}});else if(t.headers instanceof Headers)bi.inject(Dt.active(),t.headers,{set:function(i,a,l){return i.set(a,typeof l=="string"?l:String(l))}});else if(t.headers instanceof Map)bi.inject(Dt.active(),t.headers,{set:function(i,a,l){return i.set(a,typeof l=="string"?l:String(l))}});else{var o={};bi.inject(Dt.active(),o),t.headers=Object.assign({},o,t.headers||{})}},e.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},e.prototype._createSpan=function(t,n){var o;if(n===void 0&&(n={}),Tb(t,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var i=(n.method||"GET").toUpperCase(),a="HTTP "+i;return this.tracer.startSpan(a,{kind:lf.CLIENT,attributes:(o={},o[pp.COMPONENT]=this.moduleName,o[Tr.HTTP_METHOD]=i,o[Tr.HTTP_URL]=t,o)})},e.prototype._findResourceAndAddNetworkEvents=function(t,n,o){var i=n.entries;if(!i.length){if(!performance.getEntriesByType)return;i=performance.getEntriesByType("resource")}var a=i0(n.spanUrl,n.startTime,o,i,this._usedResources,"fetch");if(a.mainRequest){var l=a.mainRequest;this._markResourceAsUsed(l);var p=a.corsPreFlightRequest;p&&(this._addChildSpan(t,p),this._markResourceAsUsed(p)),this._getConfig().ignoreNetworkEvents||Oc(t,l)}},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._endSpan=function(t,n,o){var i=this,a=To(Date.now()),l=su();this._addFinalSpanAttributes(t,o),setTimeout(function(){var p;(p=n.observer)===null||p===void 0||p.disconnect(),i._findResourceAndAddNetworkEvents(t,n,l),i._tasksCount--,i._clearResources(),t.end(a)},OL)},e.prototype._patchConstructor=function(){var t=this;return function(n){var o=t;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var p=this,u=ya(a[0]instanceof Request?a[0].url:String(a[0])).href,m=a[0]instanceof Request?a[0]:a[1]||{},E=o._createSpan(u,m);if(!E)return n.apply(this,a);var w=o._prepareSpanData(u);function R(k,B){o._applyAttributesAfterFetch(k,m,B),o._endSpan(k,w,{status:B.status||0,statusText:B.message,url:u})}function S(k,B){o._applyAttributesAfterFetch(k,m,B),B.status>=200&&B.status<400?o._endSpan(k,w,B):o._endSpan(k,w,{status:B.status,statusText:B.statusText,url:u})}function P(k,B,G){try{var X=G.clone(),F=G.clone(),j=X.body;if(j){var H=j.getReader(),re=function(){H.read().then(function(te){var fe=te.done;fe?S(k,F):re()},function(te){R(k,te)})};re()}else S(k,G)}finally{B(G)}}function x(k,B,G){try{R(k,G)}finally{B(G)}}return new Promise(function(k,B){return Dt.with(gr.setSpan(Dt.active(),E),function(){return o._addHeaders(m,u),o._tasksCount++,n.apply(p,m instanceof Request?[m]:[u,m]).then(P.bind(p,E,k),x.bind(p,E,B))})})}}},e.prototype._applyAttributesAfterFetch=function(t,n,o){var i=this,a=this._getConfig().applyCustomAttributesOnSpan;a&&dp(function(){return a(t,n,o)},function(l){l&&i._diag.error("applyCustomAttributesOnSpan",l)},!0)},e.prototype._prepareSpanData=function(t){var n=su(),o=[];if(typeof PerformanceObserver!="function")return{entries:o,startTime:n,spanUrl:t};var i=new PerformanceObserver(function(a){var l=a.getEntries();l.forEach(function(p){p.initiatorType==="fetch"&&p.name===t&&o.push(p)})});return i.observe({entryTypes:["resource"]}),{entries:o,observer:i,startTime:n,spanUrl:t}},e.prototype.enable=function(){if(_0){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}In(fetch)&&(this._unwrap(mf,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(mf,"fetch",this._patchConstructor())},e.prototype.disable=function(){_0||(this._unwrap(mf,"fetch"),this._usedResources=new WeakSet)},e}(fp),Rc;(function(r){r.EVENT_TYPE="event_type",r.TARGET_ELEMENT="target_element",r.TARGET_XPATH="target_xpath",r.HTTP_URL="http.url"})(Rc||(Rc={}));var E0="0.36.0",CL=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),PL="OT_ZONE_CONTEXT",xL="Navigation:",NL=["click"];function kL(){return!1}var DL=function(r){CL(e,r);function e(t){var n,o=r.call(this,"@opentelemetry/instrumentation-user-interaction",E0,t)||this;return o.version=E0,o.moduleName="user-interaction",o._spansData=new WeakMap,o._wrappedListeners=new WeakMap,o._eventsSpanMap=new WeakMap,o._eventNames=new Set((n=t==null?void 0:t.eventNames)!==null&&n!==void 0?n:NL),o._shouldPreventSpanCreation=typeof(t==null?void 0:t.shouldPreventSpanCreation)=="function"?t.shouldPreventSpanCreation:kL,o}return e.prototype.init=function(){},e.prototype._checkForTimeout=function(t,n){var o=this._spansData.get(n);o&&(t.source==="setTimeout"?o.hrTimeLastTimeout=su():t.source!=="Promise.then"&&t.source!=="setTimeout"&&(o.hrTimeLastTimeout=void 0))},e.prototype._allowEventName=function(t){return this._eventNames.has(t)},e.prototype._createSpan=function(t,n,o){var i;if(t instanceof HTMLElement&&t.getAttribute&&!t.hasAttribute("disabled")&&this._allowEventName(n)){var a=o0(t,!0);try{var l=this.tracer.startSpan(n,{attributes:(i={},i[Rc.EVENT_TYPE]=n,i[Rc.TARGET_ELEMENT]=t.tagName,i[Rc.TARGET_XPATH]=a,i[Rc.HTTP_URL]=window.location.href,i)},o?gr.setSpan(Dt.active(),o):void 0);return this._shouldPreventSpanCreation(n,t,l)===!0?void 0:(this._spansData.set(l,{taskCount:0}),l)}catch(p){this._diag.error("failed to start create new user interaction span",p)}}},e.prototype._decrementTask=function(t){var n=this._spansData.get(t);n&&(n.taskCount--,n.taskCount===0&&this._tryToEndSpan(t,n.hrTimeLastTimeout))},e.prototype._getCurrentSpan=function(t){var n=t.get(PL);return n&&gr.getSpan(n)},e.prototype._incrementTask=function(t){var n=this._spansData.get(t);n&&n.taskCount++},e.prototype.addPatchedListener=function(t,n,o,i){var a=this._wrappedListeners.get(o);a||(a=new Map,this._wrappedListeners.set(o,a));var l=a.get(n);return l||(l=new Map,a.set(n,l)),l.has(t)?!1:(l.set(t,i),!0)},e.prototype.removePatchedListener=function(t,n,o){var i=this._wrappedListeners.get(o);if(i){var a=i.get(n);if(a){var l=a.get(t);return l&&(a.delete(t),a.size===0&&(i.delete(n),i.size===0&&this._wrappedListeners.delete(o))),l}}},e.prototype._invokeListener=function(t,n,o){return typeof t=="function"?t.apply(n,o):t.handleEvent(o[0])},e.prototype._patchAddEventListener=function(){var t=this;return function(n){return function(i,a,l){if(!a)return n.call(this,i,a,l);var p=l&&typeof l=="object"&&l.once,u=function(){for(var m=this,E=[],w=0;w<arguments.length;w++)E[w]=arguments[w];var R,S=E[0],P=S==null?void 0:S.target;S&&(R=t._eventsSpanMap.get(S)),p&&t.removePatchedListener(this,i,a);var x=t._createSpan(P,i,R);return x?(S&&t._eventsSpanMap.set(S,x),Dt.with(gr.setSpan(Dt.active(),x),function(){var k=t._invokeListener(a,m,E);return x.end(),k})):t._invokeListener(a,this,E)};if(t.addPatchedListener(this,i,a,u))return n.call(this,i,u,l)}}},e.prototype._patchRemoveEventListener=function(){var t=this;return function(n){return function(i,a,l){var p=t.removePatchedListener(this,i,a);return p?n.call(this,i,p,l):n.call(this,i,a,l)}}},e.prototype._getPatchableEventTargets=function(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]},e.prototype._patchHistoryApi=function(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())},e.prototype._patchHistoryMethod=function(){var t=this;return function(n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var l=""+location.pathname+location.hash+location.search,p=n.apply(this,i),u=""+location.pathname+location.hash+location.search;return l!==u&&t._updateInteractionName(u),p}}},e.prototype._unpatchHistoryApi=function(){In(history.replaceState)&&this._unwrap(history,"replaceState"),In(history.pushState)&&this._unwrap(history,"pushState"),In(history.back)&&this._unwrap(history,"back"),In(history.forward)&&this._unwrap(history,"forward"),In(history.go)&&this._unwrap(history,"go")},e.prototype._updateInteractionName=function(t){var n=gr.getSpan(Dt.active());n&&typeof n.updateName=="function"&&n.updateName(xL+" "+t)},e.prototype._patchZoneCancelTask=function(){var t=this;return function(n){return function(i){var a=Zone.current,l=t._getCurrentSpan(a);return l&&t._shouldCountTask(i,a)&&t._decrementTask(l),n.call(this,i)}}},e.prototype._patchZoneScheduleTask=function(){var t=this;return function(n){return function(i){var a=Zone.current,l=t._getCurrentSpan(a);return l&&t._shouldCountTask(i,a)&&(t._incrementTask(l),t._checkForTimeout(i,l)),n.call(this,i)}}},e.prototype._patchZoneRunTask=function(){var t=this;return function(n){return function(i,a,l){var p=Array.isArray(l)&&l[0]instanceof Event?l[0]:void 0,u=p==null?void 0:p.target,m,E=this;if(u){if(m=t._createSpan(u,i.eventName),m)return t._incrementTask(m),E.run(function(){try{return Dt.with(gr.setSpan(Dt.active(),m),function(){var w=Zone.current;return i._zone=w,n.call(w,i,a,l)})}finally{t._decrementTask(m)}})}else m=t._getCurrentSpan(E);try{return n.call(E,i,a,l)}finally{m&&t._shouldCountTask(i,E)&&t._decrementTask(m)}}}},e.prototype._shouldCountTask=function(t,n){if(t._zone&&(n=t._zone),!n||!t.data||t.data.isPeriodic)return!1;var o=this._getCurrentSpan(n);return!o||!this._spansData.get(o)?!1:t.type==="macroTask"||t.type==="microTask"},e.prototype._tryToEndSpan=function(t,n){if(t){var o=this._spansData.get(t);o&&(t.end(n),this._spansData.delete(t))}},e.prototype.enable=function(){var t=this,n=this.getZoneWithPrototype();if(this._diag.debug("applying patch to",this.moduleName,this.version,"zone:",!!n),n)In(n.prototype.runTask)&&(this._unwrap(n.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),In(n.prototype.scheduleTask)&&(this._unwrap(n.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),In(n.prototype.cancelTask)&&(this._unwrap(n.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(n.prototype,"runTask",this._patchZoneRunTask()),this._wrap(n.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(n.prototype,"cancelTask",this._patchZoneCancelTask());else{this._zonePatched=!1;var o=this._getPatchableEventTargets();o.forEach(function(i){In(i.addEventListener)&&(t._unwrap(i,"addEventListener"),t._diag.debug("removing previous patch from method addEventListener")),In(i.removeEventListener)&&(t._unwrap(i,"removeEventListener"),t._diag.debug("removing previous patch from method removeEventListener")),t._wrap(i,"addEventListener",t._patchAddEventListener()),t._wrap(i,"removeEventListener",t._patchRemoveEventListener())})}this._patchHistoryApi()},e.prototype.disable=function(){var t=this,n=this.getZoneWithPrototype();if(this._diag.debug("removing patch from",this.moduleName,this.version,"zone:",!!n),n&&this._zonePatched)In(n.prototype.runTask)&&this._unwrap(n.prototype,"runTask"),In(n.prototype.scheduleTask)&&this._unwrap(n.prototype,"scheduleTask"),In(n.prototype.cancelTask)&&this._unwrap(n.prototype,"cancelTask");else{var o=this._getPatchableEventTargets();o.forEach(function(i){In(i.addEventListener)&&t._unwrap(i,"addEventListener"),In(i.removeEventListener)&&t._unwrap(i,"removeEventListener")})}this._unpatchHistoryApi()},e.prototype.getZoneWithPrototype=function(){var t=window;return t.Zone},e}(fp),_a;(function(r){r.METHOD_OPEN="open",r.METHOD_SEND="send",r.EVENT_ABORT="abort",r.EVENT_ERROR="error",r.EVENT_LOAD="loaded",r.EVENT_TIMEOUT="timeout"})(_a||(_a={}));var b0="0.49.1",Wg;(function(r){r.HTTP_STATUS_TEXT="http.status_text"})(Wg||(Wg={}));var ML=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),LL=300,UL=function(r){ML(e,r);function e(t){var n=r.call(this,"@opentelemetry/instrumentation-xml-http-request",b0,t)||this;return n.component="xml-http-request",n.version=b0,n.moduleName=n.component,n._tasksCount=0,n._xhrMem=new WeakMap,n._usedResources=new WeakSet,n}return e.prototype.init=function(){},e.prototype._getConfig=function(){return this._config},e.prototype._addHeaders=function(t,n){var o=ya(n).href;if(!a0(o,this._getConfig().propagateTraceHeaderCorsUrls)){var i={};bi.inject(Dt.active(),i),Object.keys(i).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}var a={};bi.inject(Dt.active(),a),Object.keys(a).forEach(function(l){t.setRequestHeader(l,String(a[l]))})},e.prototype._addChildSpan=function(t,n){var o=this;Dt.with(gr.setSpan(Dt.active(),t),function(){var i=o.tracer.startSpan("CORS Preflight",{startTime:n[wt.FETCH_START]});Oc(i,n),i.end(n[wt.RESPONSE_END])})},e.prototype._addFinalSpanAttributes=function(t,n,o){if(typeof o=="string"){var i=ya(o);n.status!==void 0&&t.setAttribute(Tr.HTTP_STATUS_CODE,n.status),n.statusText!==void 0&&t.setAttribute(Wg.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(Tr.HTTP_HOST,i.host),t.setAttribute(Tr.HTTP_SCHEME,i.protocol.replace(":","")),t.setAttribute(Tr.HTTP_USER_AGENT,navigator.userAgent)}},e.prototype._applyAttributesAfterXHR=function(t,n){var o=this,i=this._getConfig().applyCustomAttributesOnSpan;typeof i=="function"&&dp(function(){return i(t,n)},function(a){a&&o._diag.error("applyCustomAttributesOnSpan",a)},!0)},e.prototype._addResourceObserver=function(t,n){var o=this._xhrMem.get(t);!o||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(o.createdResources={observer:new PerformanceObserver(function(i){var a=i.getEntries(),l=ya(n);a.forEach(function(p){p.initiatorType==="xmlhttprequest"&&p.name===l.href&&o.createdResources&&o.createdResources.entries.push(p)})}),entries:[]},o.createdResources.observer.observe({entryTypes:["resource"]}))},e.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(ji.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},e.prototype._findResourceAndAddNetworkEvents=function(t,n,o,i,a){if(!(!o||!i||!a||!t.createdResources)){var l=t.createdResources.entries;(!l||!l.length)&&(l=ji.getEntriesByType("resource"));var p=i0(ya(o).href,i,a,l,this._usedResources);if(p.mainRequest){var u=p.mainRequest;this._markResourceAsUsed(u);var m=p.corsPreFlightRequest;m&&(this._addChildSpan(n,m),this._markResourceAsUsed(m)),Oc(n,u)}}},e.prototype._cleanPreviousSpanInformation=function(t){var n=this._xhrMem.get(t);if(n){var o=n.callbackToRemoveEvents;o&&o(),this._xhrMem.delete(t)}},e.prototype._createSpan=function(t,n,o){var i;if(Tb(n,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var a=o.toUpperCase(),l=this.tracer.startSpan(a,{kind:lf.CLIENT,attributes:(i={},i[Tr.HTTP_METHOD]=o,i[Tr.HTTP_URL]=ya(n).toString(),i)});return l.addEvent(_a.METHOD_OPEN),this._cleanPreviousSpanInformation(t),this._xhrMem.set(t,{span:l,spanUrl:n}),l},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._patchOpen=function(){var t=this;return function(n){var o=t;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var p=a[0],u=a[1];return o._createSpan(this,u,p),n.apply(this,a)}}},e.prototype._patchSend=function(){var t=this;function n(m,E,w,R){var S=E.callbackToRemoveEvents;typeof S=="function"&&S();var P=E.span,x=E.spanUrl,k=E.sendStartTime;P&&(t._findResourceAndAddNetworkEvents(E,P,x,k,w),P.addEvent(m,R),t._addFinalSpanAttributes(P,E,x),P.end(R),t._tasksCount--),t._clearResources()}function o(m,E){var w=t._xhrMem.get(E);if(w){w.status=E.status,w.statusText=E.statusText,t._xhrMem.delete(E),w.span&&t._applyAttributesAfterXHR(w.span,E);var R=su(),S=Date.now();setTimeout(function(){n(m,w,R,S)},LL)}}function i(){o(_a.EVENT_ERROR,this)}function a(){o(_a.EVENT_ABORT,this)}function l(){o(_a.EVENT_TIMEOUT,this)}function p(){this.status<299?o(_a.EVENT_LOAD,this):o(_a.EVENT_ERROR,this)}function u(m){m.removeEventListener("abort",a),m.removeEventListener("error",i),m.removeEventListener("load",p),m.removeEventListener("timeout",l);var E=t._xhrMem.get(m);E&&(E.callbackToRemoveEvents=void 0)}return function(m){return function(){for(var w=this,R=[],S=0;S<arguments.length;S++)R[S]=arguments[S];var P=t._xhrMem.get(this);if(!P)return m.apply(this,R);var x=P.span,k=P.spanUrl;return x&&k&&Dt.with(gr.setSpan(Dt.active(),x),function(){t._tasksCount++,P.sendStartTime=su(),x.addEvent(_a.METHOD_SEND),w.addEventListener("abort",a),w.addEventListener("error",i),w.addEventListener("load",p),w.addEventListener("timeout",l),P.callbackToRemoveEvents=function(){u(w),P.createdResources&&P.createdResources.observer.disconnect()},t._addHeaders(w,k),t._addResourceObserver(w,k)}),m.apply(this,R)}}},e.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),In(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),In(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},e.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},e}(fp),zg={"@opentelemetry/instrumentation-document-load":AL,"@opentelemetry/instrumentation-fetch":RL,"@opentelemetry/instrumentation-user-interaction":DL,"@opentelemetry/instrumentation-xml-http-request":UL};function FL(r){var e;r===void 0&&(r={});for(var t=0,n=Object.keys(r);t<n.length;t++){var o=n[t];if(!Object.prototype.hasOwnProperty.call(zg,o)){Ue.error('Provided instrumentation name "'+o+'" not found');continue}}for(var i=[],a=0,l=Object.keys(zg);a<l.length;a++){var p=l[a],u=zg[p],m=(e=r[p])!==null&&e!==void 0?e:{};if(m.enabled===!1){Ue.debug("Disabling instrumentation for "+p);continue}try{Ue.debug("Loading instrumentation for "+p),i.push(new u(m))}catch(E){Ue.error(E)}}return i}var BL=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},jL=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},GL=function(){function r(e){this.url=e}return r.prototype.export=function(e,t){return BL(this,void 0,void 0,function(){var n,o,i;return jL(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n=Yb(e,{useLongBits:!1}),o=JSON.stringify(n),[4,fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:o})];case 1:return i=a.sent(),i.ok?t({code:Zi.SUCCESS}):t({code:Zi.FAILED}),[3,3];case 2:return a.sent(),t({code:Zi.FAILED}),[3,3];case 3:return[2]}})})},r.prototype.shutdown=function(){return Promise.resolve()},r}(),$L=function(){function r(e){var t,n,o,i=e===void 0?{samplingRatio:1}:e,a=i.samplingRatio,l=i.serviceName,p=i.serviceVersion,u=i.tracingConfig,m=i.loggingConfig,E=i.meterConfig,w=i.shouldUseFetchCustomLogExporter;this.serviceName=l||"",this.serviceVersion=p||"0.0.0",this.loggingUrl=(m==null?void 0:m.url)||"",this.tracingUrl=(u==null?void 0:u.url)||"",this.meterUrl=(E==null?void 0:E.url)||"",this.shouldUseFetchCustomLogExporter=w||!1,mL({instrumentations:[FL({"@opentelemetry/instrumentation-xml-http-request":{propagateTraceHeaderCorsUrls:(u==null?void 0:u.propagateUrls)||[new RegExp("api.wordtune")],ignoreUrls:(u==null?void 0:u.ignoreUrls)||[new RegExp("api.wordtune[^/]*/identity")]}})]});var R=new PM({sampler:new Bg(a),resource:new Sc((t={},t[xn.SERVICE_NAME]=this.serviceName,t[xn.SERVICE_VERSION]=this.serviceVersion,t))}),S=new BM({url:this.tracingUrl,headers:{},concurrencyLimit:10}),P=new t0(S);R.addSpanProcessor(P),R.register(),this.tracerProvider=R;var x=new uM({url:this.meterUrl,headers:{},concurrencyLimit:1});this.meterProvider=new aC({resource:new Sc((n={},n[xn.SERVICE_NAME]=this.serviceName,n[xn.SERVICE_VERSION]=this.serviceVersion,n))}),this.meterProvider.addMetricReader(new gR({exporter:x,exportIntervalMillis:(E==null?void 0:E.interval)||1e4}));var k={url:this.loggingUrl,headers:{},concurrencyLimit:1},B=this.shouldUseFetchCustomLogExporter?new GL(this.loggingUrl):new VM(k),G=new rL({resource:new Sc((o={},o[xn.SERVICE_NAME]=this.serviceName,o[xn.SERVICE_VERSION]=this.serviceVersion,o))});G.addLogRecordProcessor(new sL(B)),this.loggerProvider=G}return r.prototype.getTracer=function(e){return XI.trace.getTracer(e)},r.prototype.getLogger=function(e){var t=this.loggerProvider.getLogger(e);return new uL({otelLogger:t})},r.prototype.getMeter=function(e){return this.meterProvider.getMeter(e)},r.prototype.forceFlush=function(){return Promise.allSettled([this.loggerProvider.forceFlush(),this.meterProvider.forceFlush()])},r}();const Ao={local:{ACTIVE_TABS:"WordtuneActiveTabs",WELCOME_PAGE_TAB_ID:"WordtuneStorageWalkthroughTabKey",AMPLITUDE_EXPERIMENTS:"WordtuneStorageAmplitudeExperiments",NUMBER_OF_CHUNKS:"WordtuneStorage:config:userConfigNumberOfChunks",USER_CONFIG:"WordtuneStorage:config:userConfig",INSTALLATION_DATE:"WordtuneInstallationDate",ENGAGED_SINCE_CONFIG_UPDATE:"WordtuneStorageEngagedSinceUpdateKey",SHOW_NO_TEXT_NEW_USER_WALKTHROUGH:"WordtuneShowNoTextNewUserWalkthrough",SHOW_HIGHLIGHT_TEXT_USER_WALKTHROUGH:"WordtuneShowHighlightTextNewUserWalkthrough",SHOW_REWRITE_NEW_USER_WALKTHROUGH:"WordtuneShowRewriteNewUserWalkthrough"}},S0=8e3,VL="GET_USER_CONFIG",qL="UPDATE_USER_CONFIG",HL="REFRESH_USER_CONFIG",WL="extensionAfterLoginRedirectUrl",zL="extensionAfterSignUpRedirectUrl",KL="brazeEnabledExtension",YL="gdocs",Kg="installPage",QL="genericBlacklist",XL="gdocsSpicesEnabled",ZL="genericWhitelist",JL="wordtunteIframeWhitelist",eU="newOnboardingEnabled",tU="newSelectionToolbarEnabled",rU="registrationRequired",nU="rewrite",iU="selectionToolbarAlwaysOpen",oU="enabledSpicesIntents",aU="textareaWhitelist",sU="isRewriteEnabled",uU=()=>{const r="https://app.wordtune.com";return{time:Date.now(),[YL]:!0,[rU]:!0,[XL]:!0,[Kg]:`${r}/welcome/success`,[zL]:`${r}/welcome`,[WL]:`${r}/welcome`,[eU]:!0,[iU]:!0,[nU]:!0,[tU]:!0,[ZL]:["^(?:[^/]*\\.)?[^/]*(?:/|$)"],[aU]:["translate.google.com","^(?:[^/]*\\.)?translate\\.google\\.[^/]*(?:/|$)","^(?:[^/]*\\.)?[^/]*\\.wordtune\\.[^/]*(?:/|$)","^(?:[^/]*\\.)?[^/]*\\.wordtune\\-stg\\.[^/]*(?:/|$)","^(?:[^/]*\\.)?meet\\.google\\.[^/]*(?:/|$)","^(?:[^/]*\\.)?deepl\\.[^/]*(?:/|$)","^(?:[^/]*\\.)?rapidtables\\.[^/]*(?:/|$)","^(?:[^/]*\\.)?chat\\.openai\\.com(?:/|$)","^(?:[^/]*\\.)?classroom\\.google\\.[^/]*(?:/|$)","^(?:[^/]*\\.)?[^/]*\\.force\\.com(?:/|$)","^(?:[^/]*\\.)?[^/]*\\.my\\.salesforce\\-sites\\.com(?:/|$)","^(?:[^/]*\\.)?[^/]*\\.my\\.site\\.com(?:/|$)"],[JL]:["^(?:[^/]*\\.)?manage\\.wix\\.com(?:/|$)"],[QL]:["medium.com","trello.com","www.trello.com","sheets.google.com","slides.google.com","forms.google.com","drawings.google.com","keep.google.com","https://maccabi-dent.com","maccabi-dent.com","stackoverflow.com","studio-stg.ai21.com","studio.ai21.com","app.wordtune-stg.com/editor*","app.wordtune.com/editor*","instagram.com","www.instagram.com"],[oU]:["ask_wordtune","elaborate","explain","emphasize","expand_on","example","contradict","define","analogy","stat_fact","comic","history_fact","nature_fact","quote"],[KL]:!1,[sU]:{"translate.google.com":!0}}},w0="https://chromium-extension.wordtune.com/v1";class cU{constructor(){pe(this,"client");this.client=new $L({shouldUseFetchCustomLogExporter:!0,serviceName:"extension-v2",serviceVersion:Gt.runtime.getManifest().version,loggingConfig:{url:`${w0}/logs`},tracingConfig:{url:`${w0}/traces`},samplingRatio:.1})}}const T0=new cU;class lU{constructor(){pe(this,"userId");pe(this,"deviceId");pe(this,"shouldEmit",()=>Promise.resolve(!0))}setUserId(e){this.userId=e}setDeviceId(e){this.deviceId=e}setShouldEmit(e){this.shouldEmit=e}getLogger(e){return{emitLog:({error:t,...n})=>{this.emitLog(e,{...n,error:t&&t instanceof Error?t:void 0})}}}async emitLog(e,t){if(this.shouldEmit===void 0||!this.userId&&!this.deviceId||!await this.shouldEmit(t.severityNumber))return;const o=this.userId?{user:{id:this.userId,experiment:""}}:{};T0.client.getLogger(e).emit({...o,...t,attributes:{deviceId:this.deviceId,...(t==null?void 0:t.attributes)||{}}})}}const Rf=new lU,fU=(r,e)=>Rf.emitLog(r,e),Qn=r=>Rf.getLogger(r),A0=r=>Rf.setUserId(r),I0=r=>Rf.setDeviceId(r),dU=r=>Rf.setShouldEmit(r),O0=()=>Gt.runtime.getManifest().version,Yg=async()=>{try{const e=(await Gt.tabs.query({currentWindow:!0,active:!0}))[0],t=new URL(e.url||"");return{url:t.toString(),hostName:t.hostname,tabId:e.id}}catch(r){return console.warn("Failed to get host",r),{}}},hU=r=>{try{const t=new URL(r).hostname,n=t.split(".");return n.length>2?n.slice(-2).join("."):t}catch{return""}};var pU=Error,vU=EvalError,mU=RangeError,gU=ReferenceError,R0=SyntaxError,Cf=TypeError,yU=URIError,_U=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==o||a.enumerable!==!0)return!1}return!0},C0=typeof Symbol<"u"&&Symbol,EU=_U,bU=function(){return typeof C0!="function"||typeof Symbol!="function"||typeof C0("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:EU()},Qg={__proto__:null,foo:{}},SU=Object,wU=function(){return{__proto__:Qg}.foo===Qg.foo&&!(Qg instanceof SU)},TU="Function.prototype.bind called on incompatible ",AU=Object.prototype.toString,IU=Math.max,OU="[object Function]",P0=function(e,t){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n},RU=function(e,t){for(var n=[],o=t,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},CU=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t},PU=function(e){var t=this;if(typeof t!="function"||AU.apply(t)!==OU)throw new TypeError(TU+t);for(var n=RU(arguments,1),o,i=function(){if(this instanceof o){var m=t.apply(this,P0(n,arguments));return Object(m)===m?m:this}return t.apply(e,P0(n,arguments))},a=IU(0,t.length-n.length),l=[],p=0;p<a;p++)l[p]="$"+p;if(o=Function("binder","return function ("+CU(l,",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var u=function(){};u.prototype=t.prototype,o.prototype=new u,u.prototype=null}return o},xU=PU,Xg=Function.prototype.bind||xU,NU=Function.prototype.call,kU=Object.prototype.hasOwnProperty,DU=Xg,MU=DU.call(NU,kU),Vt,LU=pU,UU=vU,FU=mU,BU=gU,Cc=R0,Pc=Cf,jU=yU,x0=Function,Zg=function(r){try{return x0('"use strict"; return ('+r+").constructor;")()}catch{}},vu=Object.getOwnPropertyDescriptor;if(vu)try{vu({},"")}catch{vu=null}var Jg=function(){throw new Pc},GU=vu?function(){try{return arguments.callee,Jg}catch{try{return vu(arguments,"callee").get}catch{return Jg}}}():Jg,xc=bU(),$U=wU(),On=Object.getPrototypeOf||($U?function(r){return r.__proto__}:null),Nc={},VU=typeof Uint8Array>"u"||!On?Vt:On(Uint8Array),mu={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Vt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Vt:ArrayBuffer,"%ArrayIteratorPrototype%":xc&&On?On([][Symbol.iterator]()):Vt,"%AsyncFromSyncIteratorPrototype%":Vt,"%AsyncFunction%":Nc,"%AsyncGenerator%":Nc,"%AsyncGeneratorFunction%":Nc,"%AsyncIteratorPrototype%":Nc,"%Atomics%":typeof Atomics>"u"?Vt:Atomics,"%BigInt%":typeof BigInt>"u"?Vt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Vt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Vt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Vt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":LU,"%eval%":eval,"%EvalError%":UU,"%Float32Array%":typeof Float32Array>"u"?Vt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Vt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Vt:FinalizationRegistry,"%Function%":x0,"%GeneratorFunction%":Nc,"%Int8Array%":typeof Int8Array>"u"?Vt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Vt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Vt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xc&&On?On(On([][Symbol.iterator]())):Vt,"%JSON%":typeof JSON=="object"?JSON:Vt,"%Map%":typeof Map>"u"?Vt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!xc||!On?Vt:On(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Vt:Promise,"%Proxy%":typeof Proxy>"u"?Vt:Proxy,"%RangeError%":FU,"%ReferenceError%":BU,"%Reflect%":typeof Reflect>"u"?Vt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Vt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!xc||!On?Vt:On(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Vt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xc&&On?On(""[Symbol.iterator]()):Vt,"%Symbol%":xc?Symbol:Vt,"%SyntaxError%":Cc,"%ThrowTypeError%":GU,"%TypedArray%":VU,"%TypeError%":Pc,"%Uint8Array%":typeof Uint8Array>"u"?Vt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Vt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Vt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Vt:Uint32Array,"%URIError%":jU,"%WeakMap%":typeof WeakMap>"u"?Vt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Vt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Vt:WeakSet};if(On)try{null.error}catch(r){var qU=On(On(r));mu["%Error.prototype%"]=qU}var HU=function r(e){var t;if(e==="%AsyncFunction%")t=Zg("async function () {}");else if(e==="%GeneratorFunction%")t=Zg("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Zg("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=r("%AsyncGenerator%");o&&On&&(t=On(o.prototype))}return mu[e]=t,t},N0={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pf=Xg,vp=MU,WU=Pf.call(Function.call,Array.prototype.concat),zU=Pf.call(Function.apply,Array.prototype.splice),k0=Pf.call(Function.call,String.prototype.replace),mp=Pf.call(Function.call,String.prototype.slice),KU=Pf.call(Function.call,RegExp.prototype.exec),YU=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,QU=/\\(\\)?/g,XU=function(e){var t=mp(e,0,1),n=mp(e,-1);if(t==="%"&&n!=="%")throw new Cc("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Cc("invalid intrinsic syntax, expected opening `%`");var o=[];return k0(e,YU,function(i,a,l,p){o[o.length]=l?k0(p,QU,"$1"):a||i}),o},ZU=function(e,t){var n=e,o;if(vp(N0,n)&&(o=N0[n],n="%"+o[0]+"%"),vp(mu,n)){var i=mu[n];if(i===Nc&&(i=HU(n)),typeof i>"u"&&!t)throw new Pc("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Cc("intrinsic "+e+" does not exist!")},kc=function(e,t){if(typeof e!="string"||e.length===0)throw new Pc("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Pc('"allowMissing" argument must be a boolean');if(KU(/^%?[^%]*%?$/,e)===null)throw new Cc("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=XU(e),o=n.length>0?n[0]:"",i=ZU("%"+o+"%",t),a=i.name,l=i.value,p=!1,u=i.alias;u&&(o=u[0],zU(n,WU([0,1],u)));for(var m=1,E=!0;m<n.length;m+=1){var w=n[m],R=mp(w,0,1),S=mp(w,-1);if((R==='"'||R==="'"||R==="`"||S==='"'||S==="'"||S==="`")&&R!==S)throw new Cc("property names with quotes must have matching quotes");if((w==="constructor"||!E)&&(p=!0),o+="."+w,a="%"+o+"%",vp(mu,a))l=mu[a];else if(l!=null){if(!(w in l)){if(!t)throw new Pc("base intrinsic for "+e+" exists, but the property is not available.");return}if(vu&&m+1>=n.length){var P=vu(l,w);E=!!P,E&&"get"in P&&!("originalValue"in P.get)?l=P.get:l=l[w]}else E=vp(l,w),l=l[w];E&&!p&&(mu[a]=l)}}return l},D0={exports:{}},ey,M0;function ty(){if(M0)return ey;M0=1;var r=kc,e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return ey=e,ey}var JU=kc,gp=JU("%Object.getOwnPropertyDescriptor%",!0);if(gp)try{gp([],"length")}catch{gp=null}var L0=gp,U0=ty(),eF=R0,Dc=Cf,F0=L0,tF=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Dc("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Dc("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Dc("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Dc("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Dc("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Dc("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,p=!!F0&&F0(e,t);if(U0)U0(e,t,{configurable:a===null&&p?p.configurable:!a,enumerable:o===null&&p?p.enumerable:!o,value:n,writable:i===null&&p?p.writable:!i});else if(l||!o&&!i&&!a)e[t]=n;else throw new eF("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ry=ty(),B0=function(){return!!ry};B0.hasArrayLengthDefineBug=function(){if(!ry)return null;try{return ry([],"length",{value:1}).length!==1}catch{return!0}};var rF=B0,nF=kc,j0=tF,iF=rF(),G0=L0,$0=Cf,oF=nF("%Math.floor%"),aF=function(e,t){if(typeof e!="function")throw new $0("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||oF(t)!==t)throw new $0("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],o=!0,i=!0;if("length"in e&&G0){var a=G0(e,"length");a&&!a.configurable&&(o=!1),a&&!a.writable&&(i=!1)}return(o||i||!n)&&(iF?j0(e,"length",t,!0,!0):j0(e,"length",t)),e};(function(r){var e=Xg,t=kc,n=aF,o=Cf,i=t("%Function.prototype.apply%"),a=t("%Function.prototype.call%"),l=t("%Reflect.apply%",!0)||e.call(a,i),p=ty(),u=t("%Math.max%");r.exports=function(w){if(typeof w!="function")throw new o("a function is required");var R=l(e,a,arguments);return n(R,1+u(0,w.length-(arguments.length-1)),!0)};var m=function(){return l(e,i,arguments)};p?p(r.exports,"apply",{value:m}):r.exports.apply=m})(D0);var sF=D0.exports,V0=kc,q0=sF,uF=q0(V0("String.prototype.indexOf")),cF=function(e,t){var n=V0(e,!!t);return typeof n=="function"&&uF(e,".prototype.")>-1?q0(n):n};const lF=jA(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var ny=typeof Map=="function"&&Map.prototype,iy=Object.getOwnPropertyDescriptor&&ny?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,yp=ny&&iy&&typeof iy.get=="function"?iy.get:null,H0=ny&&Map.prototype.forEach,oy=typeof Set=="function"&&Set.prototype,ay=Object.getOwnPropertyDescriptor&&oy?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,_p=oy&&ay&&typeof ay.get=="function"?ay.get:null,W0=oy&&Set.prototype.forEach,fF=typeof WeakMap=="function"&&WeakMap.prototype,xf=fF?WeakMap.prototype.has:null,dF=typeof WeakSet=="function"&&WeakSet.prototype,Nf=dF?WeakSet.prototype.has:null,hF=typeof WeakRef=="function"&&WeakRef.prototype,z0=hF?WeakRef.prototype.deref:null,pF=Boolean.prototype.valueOf,vF=Object.prototype.toString,mF=Function.prototype.toString,gF=String.prototype.match,sy=String.prototype.slice,us=String.prototype.replace,yF=String.prototype.toUpperCase,K0=String.prototype.toLowerCase,Y0=RegExp.prototype.test,Q0=Array.prototype.concat,Io=Array.prototype.join,_F=Array.prototype.slice,X0=Math.floor,uy=typeof BigInt=="function"?BigInt.prototype.valueOf:null,cy=Object.getOwnPropertySymbols,ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Bn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Mc||!0)?Symbol.toStringTag:null,Z0=Object.prototype.propertyIsEnumerable,J0=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function eS(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Y0.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-X0(-r):X0(r);if(n!==r){var o=String(n),i=sy.call(e,o.length+1);return us.call(o,t,"$&_")+"."+us.call(us.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return us.call(e,t,"$&_")}var fy=lF,tS=fy.custom,rS=oS(tS)?tS:null,EF=function r(e,t,n,o){var i=t||{};if(cs(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(cs(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=cs(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(cs(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(cs(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return sS(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var p=String(e);return l?eS(e,p):p}if(typeof e=="bigint"){var u=String(e)+"n";return l?eS(e,u):u}var m=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=m&&m>0&&typeof e=="object")return dy(e)?"[Array]":"[Object]";var E=FF(i,n);if(typeof o>"u")o=[];else if(aS(o,e)>=0)return"[Circular]";function w($,J,ge){if(J&&(o=_F.call(o),o.push(J)),ge){var ee={depth:i.depth};return cs(i,"quoteStyle")&&(ee.quoteStyle=i.quoteStyle),r($,ee,n+1,o)}return r($,i,n+1,o)}if(typeof e=="function"&&!iS(e)){var R=CF(e),S=Ep(e,w);return"[Function"+(R?": "+R:" (anonymous)")+"]"+(S.length>0?" { "+Io.call(S,", ")+" }":"")}if(oS(e)){var P=Mc?us.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ly.call(e);return typeof e=="object"&&!Mc?kf(P):P}if(MF(e)){for(var x="<"+K0.call(String(e.nodeName)),k=e.attributes||[],B=0;B<k.length;B++)x+=" "+k[B].name+"="+nS(bF(k[B].value),"double",i);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+K0.call(String(e.nodeName))+">",x}if(dy(e)){if(e.length===0)return"[]";var G=Ep(e,w);return E&&!UF(G)?"["+py(G,E)+"]":"[ "+Io.call(G,", ")+" ]"}if(wF(e)){var X=Ep(e,w);return!("cause"in Error.prototype)&&"cause"in e&&!Z0.call(e,"cause")?"{ ["+String(e)+"] "+Io.call(Q0.call("[cause]: "+w(e.cause),X),", ")+" }":X.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Io.call(X,", ")+" }"}if(typeof e=="object"&&a){if(rS&&typeof e[rS]=="function"&&fy)return fy(e,{depth:m-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(PF(e)){var F=[];return H0&&H0.call(e,function($,J){F.push(w(J,e,!0)+" => "+w($,e))}),uS("Map",yp.call(e),F,E)}if(kF(e)){var j=[];return W0&&W0.call(e,function($){j.push(w($,e))}),uS("Set",_p.call(e),j,E)}if(xF(e))return hy("WeakMap");if(DF(e))return hy("WeakSet");if(NF(e))return hy("WeakRef");if(AF(e))return kf(w(Number(e)));if(OF(e))return kf(w(uy.call(e)));if(IF(e))return kf(pF.call(e));if(TF(e))return kf(w(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Ei<"u"&&e===Ei)return"{ [object globalThis] }";if(!SF(e)&&!iS(e)){var H=Ep(e,w),re=J0?J0(e)===Object.prototype:e instanceof Object||e.constructor===Object,te=e instanceof Object?"":"null prototype",fe=!re&&Bn&&Object(e)===e&&Bn in e?sy.call(ls(e),8,-1):te?"Object":"",Te=re||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Ce=Te+(fe||te?"["+Io.call(Q0.call([],fe||[],te||[]),": ")+"] ":"");return H.length===0?Ce+"{}":E?Ce+"{"+py(H,E)+"}":Ce+"{ "+Io.call(H,", ")+" }"}return String(e)};function nS(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function bF(r){return us.call(String(r),/"/g,"&quot;")}function dy(r){return ls(r)==="[object Array]"&&(!Bn||!(typeof r=="object"&&Bn in r))}function SF(r){return ls(r)==="[object Date]"&&(!Bn||!(typeof r=="object"&&Bn in r))}function iS(r){return ls(r)==="[object RegExp]"&&(!Bn||!(typeof r=="object"&&Bn in r))}function wF(r){return ls(r)==="[object Error]"&&(!Bn||!(typeof r=="object"&&Bn in r))}function TF(r){return ls(r)==="[object String]"&&(!Bn||!(typeof r=="object"&&Bn in r))}function AF(r){return ls(r)==="[object Number]"&&(!Bn||!(typeof r=="object"&&Bn in r))}function IF(r){return ls(r)==="[object Boolean]"&&(!Bn||!(typeof r=="object"&&Bn in r))}function oS(r){if(Mc)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!ly)return!1;try{return ly.call(r),!0}catch{}return!1}function OF(r){if(!r||typeof r!="object"||!uy)return!1;try{return uy.call(r),!0}catch{}return!1}var RF=Object.prototype.hasOwnProperty||function(r){return r in this};function cs(r,e){return RF.call(r,e)}function ls(r){return vF.call(r)}function CF(r){if(r.name)return r.name;var e=gF.call(mF.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function aS(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function PF(r){if(!yp||!r||typeof r!="object")return!1;try{yp.call(r);try{_p.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function xF(r){if(!xf||!r||typeof r!="object")return!1;try{xf.call(r,xf);try{Nf.call(r,Nf)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function NF(r){if(!z0||!r||typeof r!="object")return!1;try{return z0.call(r),!0}catch{}return!1}function kF(r){if(!_p||!r||typeof r!="object")return!1;try{_p.call(r);try{yp.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function DF(r){if(!Nf||!r||typeof r!="object")return!1;try{Nf.call(r,Nf);try{xf.call(r,xf)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function MF(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function sS(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return sS(sy.call(r,0,e.maxStringLength),e)+n}var o=us.call(us.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,LF);return nS(o,"single",e)}function LF(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+yF.call(e.toString(16))}function kf(r){return"Object("+r+")"}function hy(r){return r+" { ? }"}function uS(r,e,t,n){var o=n?py(t,n):Io.call(t,", ");return r+" ("+e+") {"+o+"}"}function UF(r){for(var e=0;e<r.length;e++)if(aS(r[e],`
`)>=0)return!1;return!0}function FF(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=Io.call(Array(r.indent+1)," ");else return null;return{base:t,prev:Io.call(Array(e+1),t)}}function py(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+Io.call(r,","+t)+`
`+e.prev}function Ep(r,e){var t=dy(r),n=[];if(t){n.length=r.length;for(var o=0;o<r.length;o++)n[o]=cs(r,o)?e(r[o],r):""}var i=typeof cy=="function"?cy(r):[],a;if(Mc){a={};for(var l=0;l<i.length;l++)a["$"+i[l]]=i[l]}for(var p in r)cs(r,p)&&(t&&String(Number(p))===p&&p<r.length||Mc&&a["$"+p]instanceof Symbol||(Y0.call(/[^\w$]/,p)?n.push(e(p,r)+": "+e(r[p],r)):n.push(p+": "+e(r[p],r))));if(typeof cy=="function")for(var u=0;u<i.length;u++)Z0.call(r,i[u])&&n.push("["+e(i[u])+"]: "+e(r[i[u]],r));return n}var cS=kc,Lc=cF,BF=EF,jF=Cf,bp=cS("%WeakMap%",!0),Sp=cS("%Map%",!0),GF=Lc("WeakMap.prototype.get",!0),$F=Lc("WeakMap.prototype.set",!0),VF=Lc("WeakMap.prototype.has",!0),qF=Lc("Map.prototype.get",!0),HF=Lc("Map.prototype.set",!0),WF=Lc("Map.prototype.has",!0),vy=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},zF=function(r,e){var t=vy(r,e);return t&&t.value},KF=function(r,e,t){var n=vy(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},YF=function(r,e){return!!vy(r,e)},QF=function(){var e,t,n,o={assert:function(i){if(!o.has(i))throw new jF("Side channel does not contain "+BF(i))},get:function(i){if(bp&&i&&(typeof i=="object"||typeof i=="function")){if(e)return GF(e,i)}else if(Sp){if(t)return qF(t,i)}else if(n)return zF(n,i)},has:function(i){if(bp&&i&&(typeof i=="object"||typeof i=="function")){if(e)return VF(e,i)}else if(Sp){if(t)return WF(t,i)}else if(n)return YF(n,i);return!1},set:function(i,a){bp&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new bp),$F(e,i,a)):Sp?(t||(t=new Sp),HF(t,i,a)):(n||(n={key:{},next:null}),KF(n,i,a))}};return o},XF=String.prototype.replace,ZF=/%20/g,my={RFC1738:"RFC1738",RFC3986:"RFC3986"},gy={default:my.RFC3986,formatters:{RFC1738:function(r){return XF.call(r,ZF,"+")},RFC3986:function(r){return String(r)}},RFC1738:my.RFC1738,RFC3986:my.RFC3986},JF=gy,yy=Object.prototype.hasOwnProperty,gu=Array.isArray,Oo=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),e2=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(gu(n)){for(var o=[],i=0;i<n.length;++i)typeof n[i]<"u"&&o.push(n[i]);t.obj[t.prop]=o}}},lS=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},t2=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(gu(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!yy.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var o=e;return gu(e)&&!gu(t)&&(o=lS(e,n)),gu(e)&&gu(t)?(t.forEach(function(i,a){if(yy.call(e,a)){var l=e[a];l&&typeof l=="object"&&i&&typeof i=="object"?e[a]=r(l,i,n):e.push(i)}else e[a]=i}),e):Object.keys(t).reduce(function(i,a){var l=t[a];return yy.call(i,a)?i[a]=r(i[a],l,n):i[a]=l,i},o)},r2=function(e,t){return Object.keys(t).reduce(function(n,o){return n[o]=t[o],n},e)},n2=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},_y=1024,i2=function(e,t,n,o,i){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(R){return"%26%23"+parseInt(R.slice(2),16)+"%3B"});for(var l="",p=0;p<a.length;p+=_y){for(var u=a.length>=_y?a.slice(p,p+_y):a,m=[],E=0;E<u.length;++E){var w=u.charCodeAt(E);if(w===45||w===46||w===95||w===126||w>=48&&w<=57||w>=65&&w<=90||w>=97&&w<=122||i===JF.RFC1738&&(w===40||w===41)){m[m.length]=u.charAt(E);continue}if(w<128){m[m.length]=Oo[w];continue}if(w<2048){m[m.length]=Oo[192|w>>6]+Oo[128|w&63];continue}if(w<55296||w>=57344){m[m.length]=Oo[224|w>>12]+Oo[128|w>>6&63]+Oo[128|w&63];continue}E+=1,w=65536+((w&1023)<<10|u.charCodeAt(E)&1023),m[m.length]=Oo[240|w>>18]+Oo[128|w>>12&63]+Oo[128|w>>6&63]+Oo[128|w&63]}l+=m.join("")}return l},o2=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],l=Object.keys(a),p=0;p<l.length;++p){var u=l[p],m=a[u];typeof m=="object"&&m!==null&&n.indexOf(m)===-1&&(t.push({obj:a,prop:u}),n.push(m))}return e2(t),e},a2=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},s2=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},u2=function(e,t){return[].concat(e,t)},c2=function(e,t){if(gu(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n}return t(e)},fS={arrayToObject:lS,assign:r2,combine:u2,compact:o2,decode:n2,encode:i2,isBuffer:s2,isRegExp:a2,maybeMap:c2,merge:t2},dS=QF,wp=fS,Df=gy,l2=Object.prototype.hasOwnProperty,hS={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Ro=Array.isArray,f2=Array.prototype.push,pS=function(r,e){f2.apply(r,Ro(e)?e:[e])},d2=Date.prototype.toISOString,vS=Df.default,pn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:wp.encode,encodeValuesOnly:!1,format:vS,formatter:Df.formatters[vS],indices:!1,serializeDate:function(e){return d2.call(e)},skipNulls:!1,strictNullHandling:!1},h2=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Ey={},p2=function r(e,t,n,o,i,a,l,p,u,m,E,w,R,S,P,x,k,B){for(var G=e,X=B,F=0,j=!1;(X=X.get(Ey))!==void 0&&!j;){var H=X.get(e);if(F+=1,typeof H<"u"){if(H===F)throw new RangeError("Cyclic object value");j=!0}typeof X.get(Ey)>"u"&&(F=0)}if(typeof m=="function"?G=m(t,G):G instanceof Date?G=R(G):n==="comma"&&Ro(G)&&(G=wp.maybeMap(G,function(st){return st instanceof Date?R(st):st})),G===null){if(a)return u&&!x?u(t,pn.encoder,k,"key",S):t;G=""}if(h2(G)||wp.isBuffer(G)){if(u){var re=x?t:u(t,pn.encoder,k,"key",S);return[P(re)+"="+P(u(G,pn.encoder,k,"value",S))]}return[P(t)+"="+P(String(G))]}var te=[];if(typeof G>"u")return te;var fe;if(n==="comma"&&Ro(G))x&&u&&(G=wp.maybeMap(G,u)),fe=[{value:G.length>0?G.join(",")||null:void 0}];else if(Ro(m))fe=m;else{var Te=Object.keys(G);fe=E?Te.sort(E):Te}var Ce=p?t.replace(/\./g,"%2E"):t,$=o&&Ro(G)&&G.length===1?Ce+"[]":Ce;if(i&&Ro(G)&&G.length===0)return $+"[]";for(var J=0;J<fe.length;++J){var ge=fe[J],ee=typeof ge=="object"&&typeof ge.value<"u"?ge.value:G[ge];if(!(l&&ee===null)){var Ie=w&&p?ge.replace(/\./g,"%2E"):ge,we=Ro(G)?typeof n=="function"?n($,Ie):$:$+(w?"."+Ie:"["+Ie+"]");B.set(e,F);var Be=dS();Be.set(Ey,B),pS(te,r(ee,we,n,o,i,a,l,p,n==="comma"&&x&&Ro(G)?null:u,m,E,w,R,S,P,x,k,Be))}}return te},v2=function(e){if(!e)return pn;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||pn.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Df.default;if(typeof e.format<"u"){if(!l2.call(Df.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=Df.formatters[n],i=pn.filter;(typeof e.filter=="function"||Ro(e.filter))&&(i=e.filter);var a;if(e.arrayFormat in hS?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=pn.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:pn.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:pn.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:pn.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:pn.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?pn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:pn.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:pn.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:pn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:pn.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:pn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:pn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:pn.strictNullHandling}},m2=function(r,e){var t=r,n=v2(e),o,i;typeof n.filter=="function"?(i=n.filter,t=i("",t)):Ro(n.filter)&&(i=n.filter,o=i);var a=[];if(typeof t!="object"||t===null)return"";var l=hS[n.arrayFormat],p=l==="comma"&&n.commaRoundTrip;o||(o=Object.keys(t)),n.sort&&o.sort(n.sort);for(var u=dS(),m=0;m<o.length;++m){var E=o[m];n.skipNulls&&t[E]===null||pS(a,p2(t[E],E,l,p,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var w=a.join(n.delimiter),R=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?R+="utf8=%26%2310003%3B&":R+="utf8=%E2%9C%93&"),w.length>0?R+w:""},Uc=fS,by=Object.prototype.hasOwnProperty,g2=Array.isArray,Wr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Uc.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},y2=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},mS=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},_2="utf8=%26%2310003%3B",E2="utf8=%E2%9C%93",b2=function(e,t){var n={__proto__:null},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;o=o.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=t.parameterLimit===1/0?void 0:t.parameterLimit,a=o.split(t.delimiter,i),l=-1,p,u=t.charset;if(t.charsetSentinel)for(p=0;p<a.length;++p)a[p].indexOf("utf8=")===0&&(a[p]===E2?u="utf-8":a[p]===_2&&(u="iso-8859-1"),l=p,p=a.length);for(p=0;p<a.length;++p)if(p!==l){var m=a[p],E=m.indexOf("]="),w=E===-1?m.indexOf("="):E+1,R,S;w===-1?(R=t.decoder(m,Wr.decoder,u,"key"),S=t.strictNullHandling?null:""):(R=t.decoder(m.slice(0,w),Wr.decoder,u,"key"),S=Uc.maybeMap(mS(m.slice(w+1),t),function(x){return t.decoder(x,Wr.decoder,u,"value")})),S&&t.interpretNumericEntities&&u==="iso-8859-1"&&(S=y2(S)),m.indexOf("[]=")>-1&&(S=g2(S)?[S]:S);var P=by.call(n,R);P&&t.duplicates==="combine"?n[R]=Uc.combine(n[R],S):(!P||t.duplicates==="last")&&(n[R]=S)}return n},S2=function(r,e,t,n){for(var o=n?e:mS(e,t),i=r.length-1;i>=0;--i){var a,l=r[i];if(l==="[]"&&t.parseArrays)a=t.allowEmptyArrays&&(o===""||t.strictNullHandling&&o===null)?[]:[].concat(o);else{a=t.plainObjects?Object.create(null):{};var p=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,u=t.decodeDotInKeys?p.replace(/%2E/g,"."):p,m=parseInt(u,10);!t.parseArrays&&u===""?a={0:o}:!isNaN(m)&&l!==u&&String(m)===u&&m>=0&&t.parseArrays&&m<=t.arrayLimit?(a=[],a[m]=o):u!=="__proto__"&&(a[u]=o)}o=a}return o},w2=function(e,t,n,o){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,p=n.depth>0&&a.exec(i),u=p?i.slice(0,p.index):i,m=[];if(u){if(!n.plainObjects&&by.call(Object.prototype,u)&&!n.allowPrototypes)return;m.push(u)}for(var E=0;n.depth>0&&(p=l.exec(i))!==null&&E<n.depth;){if(E+=1,!n.plainObjects&&by.call(Object.prototype,p[1].slice(1,-1))&&!n.allowPrototypes)return;m.push(p[1])}return p&&m.push("["+i.slice(p.index)+"]"),S2(m,t,n,o)}},T2=function(e){if(!e)return Wr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Wr.charset:e.charset,n=typeof e.duplicates>"u"?Wr.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Wr.allowDots:!!e.allowDots;return{allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Wr.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Wr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Wr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Wr.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Wr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Wr.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Wr.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Wr.decoder,delimiter:typeof e.delimiter=="string"||Uc.isRegExp(e.delimiter)?e.delimiter:Wr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Wr.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Wr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Wr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Wr.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Wr.strictNullHandling}},A2=function(r,e){var t=T2(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?b2(r,t):r,o=t.plainObjects?Object.create(null):{},i=Object.keys(n),a=0;a<i.length;++a){var l=i[a],p=w2(l,n[l],t,typeof r=="string");o=Uc.merge(o,p,t)}return t.allowSparse===!0?o:Uc.compact(o)},I2=m2,O2=A2,R2=gy,gS={formats:R2,parse:O2,stringify:I2};function yS(r,e={}){if(!r)throw new Error("base is required");return`${r}?${gS.stringify(e,{sort(t,n){return t.localeCompare(n)}})}`}const _S=Qn("userConfigService");class Tp{constructor(){pe(this,"initPromise");pe(this,"onGetUserConfigMessage",async e=>{const t=await this.getUserConfig();return e(t),!0});pe(this,"onUpdateUserConfigMessage",async(e,t)=>{try{const n=await this.getUserConfig();if(!n){t(null);return}const o={...n,...e};await this.setUserConfig(o);const i=await Yg();i.tabId&&Gt.tabs.sendMessage(i.tabId,{type:HL}),t(o)}catch(n){_S.emitLog({body:"UserConfigService/onUpdateUserConfigMessage: Failed to update user's config",error:n,severityNumber:bt.ERROR})}});this.initPromise=this.getUserConfig()}async initDefaultUserConfig(){const e=await this.initPromise;if(e){const t=Tp.splitUserConfigToChunks(e,S0),n=Object.keys(t);for(const o of n)await Gt.storage.local.remove(o)}await this.setUserConfig(uU())}async storeInstallationDate(e){await Gt.storage.local.set({[Ao.local.INSTALLATION_DATE]:e})}async setUserConfig(e){const t=Tp.splitUserConfigToChunks(e,S0),n={[Ao.local.NUMBER_OF_CHUNKS]:Object.keys(t).length,...t};await Gt.storage.local.set(n),this.initPromise=Promise.resolve(e)}static splitUserConfigToChunks(e,t){const n={};let o=0,i={};return Object.entries(e).forEach(([a,l])=>{const p={[a]:l};JSON.stringify(i).length+JSON.stringify(p).length<t?Object.assign(i,p):(Object.assign(n,{[`${Ao.local.USER_CONFIG}${o}`]:i}),o++,i=p)}),Object.assign(n,{[`${Ao.local.USER_CONFIG}${o}`]:i}),n}async getUserConfig(){try{const e=await Gt.storage.local.get([Ao.local.NUMBER_OF_CHUNKS]),t=e==null?void 0:e[Ao.local.NUMBER_OF_CHUNKS];if(!t)return null;const n=[...Array(t).keys()].map(a=>`${Ao.local.USER_CONFIG}${a}`),o=await Gt.storage.local.get(n);return n.reduce((a,l)=>o[l]?{...a,...o[l]}:a,{})}catch(e){return _S.emitLog({error:e,body:"Failed to get user's config",severityNumber:bt.ERROR}),{}}}async installPage({userId:e,deviceId:t}={}){const n=await this.initPromise;return!n||!n[Kg]?null:`${n[Kg]}${gS.stringify({u:e,deviceId:t})}`}async userConfig(){return this.initPromise}}const Ap=new Tp,Sy="https://app.wordtune.com",C2="https://wordtune.com",P2=`${Sy}/welcome`,x2=`${Sy}/auth`,N2=`${C2}/goodbye`,ES=hU(Sy),wy=`https://${ES}`;var Ty=function(r,e){return Ty=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},Ty(r,e)};function yu(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ty(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pt=function(){return pt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pt.apply(this,arguments)};function Fc(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(t[n[o]]=r[n[o]]);return t}function et(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})}function tt(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Bc(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Si(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i}function jc(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var k2="Event tracked successfully",D2="Unexpected error occurred",M2="Event rejected due to exceeded retry count",L2="Event skipped due to optOut config",U2="Event rejected due to missing API key",F2="Invalid API key",B2="Client not initialized",vn;(function(r){r.SET="$set",r.SET_ONCE="$setOnce",r.ADD="$add",r.APPEND="$append",r.PREPEND="$prepend",r.REMOVE="$remove",r.PREINSERT="$preInsert",r.POSTINSERT="$postInsert",r.UNSET="$unset",r.CLEAR_ALL="$clearAll"})(vn||(vn={}));var fs;(function(r){r.REVENUE_PRODUCT_ID="$productId",r.REVENUE_QUANTITY="$quantity",r.REVENUE_PRICE="$price",r.REVENUE_TYPE="$revenueType",r.REVENUE="$revenue"})(fs||(fs={}));var _u;(function(r){r.IDENTIFY="$identify",r.GROUP_IDENTIFY="$groupidentify",r.REVENUE="revenue_amount"})(_u||(_u={}));var di;(function(r){r[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Verbose=3]="Verbose",r[r.Debug=4]="Debug"})(di||(di={}));var Ay;(function(r){r.US="US",r.EU="EU"})(Ay||(Ay={}));var zr;(function(r){r.Unknown="unknown",r.Skipped="skipped",r.Success="success",r.RateLimit="rate_limit",r.PayloadTooLarge="payload_too_large",r.Invalid="invalid",r.Failed="failed",r.Timeout="Timeout",r.SystemError="SystemError"})(zr||(zr={}));var bS=null;const j2=Object.freeze(Object.defineProperty({__proto__:null,get IdentifyOperation(){return vn},get LogLevel(){return di},OfflineDisabled:bS,get RevenueProperty(){return fs},get ServerZone(){return Ay},get SpecialEventType(){return _u},get Status(){return zr}},Symbol.toStringTag,{value:"Module"}));var Gc=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=zr.Unknown),{event:r,code:e,message:t}},$c=function(r){return r?(r^Math.random()*16>>r/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,$c)},G2=function(){function r(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return r.prototype.register=function(e,t){var n,o,i;return et(this,void 0,void 0,function(){return tt(this,function(a){switch(a.label){case 0:return e.name=(n=e.name)!==null&&n!==void 0?n:$c(),e.type=(o=e.type)!==null&&o!==void 0?o:"enrichment",[4,(i=e.setup)===null||i===void 0?void 0:i.call(e,t,this.client)];case 1:return a.sent(),this.plugins.push(e),[2]}})})},r.prototype.deregister=function(e){var t;return et(this,void 0,void 0,function(){var n,o;return tt(this,function(i){switch(i.label){case 0:return n=this.plugins.findIndex(function(a){return a.name===e}),o=this.plugins[n],this.plugins.splice(n,1),[4,(t=o.teardown)===null||t===void 0?void 0:t.call(o)];case 1:return i.sent(),[2]}})})},r.prototype.reset=function(e){this.applying=!1;var t=this.plugins;t.map(function(n){var o;return(o=n.teardown)===null||o===void 0?void 0:o.call(n)}),this.plugins=[],this.client=e},r.prototype.push=function(e){var t=this;return new Promise(function(n){t.queue.push([e,n]),t.scheduleApply(0)})},r.prototype.scheduleApply=function(e){var t=this;this.applying||(this.applying=!0,setTimeout(function(){t.apply(t.queue.shift()).then(function(){t.applying=!1,t.queue.length>0&&t.scheduleApply(0)})},e))},r.prototype.apply=function(e){return et(this,void 0,void 0,function(){var t,n,o,i,a,l,p,R,S,u,m,E,w,R,S,P,x,k,B,G,X,F;return tt(this,function(j){switch(j.label){case 0:if(!e)return[2];t=Si(e,1),n=t[0],o=Si(e,2),i=o[1],a=this.plugins.filter(function(H){return H.type==="before"}),j.label=1;case 1:j.trys.push([1,6,7,8]),l=Bc(a),p=l.next(),j.label=2;case 2:return p.done?[3,5]:(R=p.value,R.execute?[4,R.execute(pt({},n))]:[3,4]);case 3:if(S=j.sent(),S===null)return i({event:n,code:0,message:""}),[2];n=S,j.label=4;case 4:return p=l.next(),[3,2];case 5:return[3,8];case 6:return u=j.sent(),B={error:u},[3,8];case 7:try{p&&!p.done&&(G=l.return)&&G.call(l)}finally{if(B)throw B.error}return[7];case 8:m=this.plugins.filter(function(H){return H.type==="enrichment"||H.type===void 0}),j.label=9;case 9:j.trys.push([9,14,15,16]),E=Bc(m),w=E.next(),j.label=10;case 10:return w.done?[3,13]:(R=w.value,R.execute?[4,R.execute(pt({},n))]:[3,12]);case 11:if(S=j.sent(),S===null)return i({event:n,code:0,message:""}),[2];n=S,j.label=12;case 12:return w=E.next(),[3,10];case 13:return[3,16];case 14:return P=j.sent(),X={error:P},[3,16];case 15:try{w&&!w.done&&(F=E.return)&&F.call(E)}finally{if(X)throw X.error}return[7];case 16:return x=this.plugins.filter(function(H){return H.type==="destination"}),k=x.map(function(H){var re=pt({},n);return H.execute(re).catch(function(te){return Gc(re,0,String(te))})}),Promise.all(k).then(function(H){var re=Si(H,1),te=re[0],fe=te||Gc(n,100,"Event not tracked, no destination plugins on the instance");i(fe)}),[2]}})})},r.prototype.flush=function(){return et(this,void 0,void 0,function(){var e,t,n,o=this;return tt(this,function(i){switch(i.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(a){return o.apply(a)}))];case 1:return i.sent(),t=this.plugins.filter(function(a){return a.type==="destination"}),n=t.map(function(a){return a.flush&&a.flush()}),[4,Promise.all(n)];case 2:return i.sent(),[2]}})})},r}(),SS="-",Ip="AMP",$2="".concat(Ip,"_unsent"),wS="https://api2.amplitude.com/2/httpapi",V2="https://api.eu.amplitude.com/2/httpapi",q2="https://api2.amplitude.com/batch",H2="https://api.eu.amplitude.com/batch",W2=1e3,Iy=function(r){if(Object.keys(r).length>W2)return!1;for(var e in r){var t=r[e];if(!TS(e,t))return!1}return!0},TS=function(r,e){var t,n;if(typeof r!="string")return!1;if(Array.isArray(e)){var o=!0;try{for(var i=Bc(e),a=i.next();!a.done;a=i.next()){var l=a.value;if(Array.isArray(l))return!1;if(typeof l=="object")o=o&&Iy(l);else if(!["number","string"].includes(typeof l))return!1;if(!o)return!1}}catch(p){t={error:p}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}else{if(e==null)return!1;if(typeof e=="object")return Iy(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},Vc=function(){function r(){this._propertySet=new Set,this._properties={}}return r.prototype.getUserProperties=function(){return pt({},this._properties)},r.prototype.set=function(e,t){return this._safeSet(vn.SET,e,t),this},r.prototype.setOnce=function(e,t){return this._safeSet(vn.SET_ONCE,e,t),this},r.prototype.append=function(e,t){return this._safeSet(vn.APPEND,e,t),this},r.prototype.prepend=function(e,t){return this._safeSet(vn.PREPEND,e,t),this},r.prototype.postInsert=function(e,t){return this._safeSet(vn.POSTINSERT,e,t),this},r.prototype.preInsert=function(e,t){return this._safeSet(vn.PREINSERT,e,t),this},r.prototype.remove=function(e,t){return this._safeSet(vn.REMOVE,e,t),this},r.prototype.add=function(e,t){return this._safeSet(vn.ADD,e,t),this},r.prototype.unset=function(e){return this._safeSet(vn.UNSET,e,SS),this},r.prototype.clearAll=function(){return this._properties={},this._properties[vn.CLEAR_ALL]=SS,this},r.prototype._safeSet=function(e,t,n){if(this._validate(e,t,n)){var o=this._properties[e];return o===void 0&&(o={},this._properties[e]=o),o[t]=n,this._propertySet.add(t),!0}return!1},r.prototype._validate=function(e,t,n){return this._properties[vn.CLEAR_ALL]!==void 0||this._propertySet.has(t)?!1:e===vn.ADD?typeof n=="number":e!==vn.UNSET&&e!==vn.REMOVE?TS(t,n):!0},r}(),z2=function(r,e,t){var n=typeof r=="string"?{event_type:r}:r;return pt(pt(pt({},n),t),e&&{event_properties:e})},AS=function(r,e){var t=pt(pt({},e),{event_type:_u.IDENTIFY,user_properties:r.getUserProperties()});return t},K2=function(r,e,t,n){var o,i=pt(pt({},n),{event_type:_u.GROUP_IDENTIFY,group_properties:t.getUserProperties(),groups:(o={},o[r]=e,o)});return i},Y2=function(r,e,t){var n,o=new Vc;o.set(r,e);var i=pt(pt({},t),{event_type:_u.IDENTIFY,user_properties:o.getUserProperties(),groups:(n={},n[r]=e,n)});return i},Q2=function(r,e){return pt(pt({},e),{event_type:_u.REVENUE,event_properties:r.getEventProperties()})},hi=function(r){return{promise:r||Promise.resolve()}},X2=function(){function r(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new G2(this),this.name=e}return r.prototype._init=function(e){return et(this,void 0,void 0,function(){return tt(this,function(t){switch(t.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return t.sent(),this.isReady=!0,[2]}})})},r.prototype.runQueuedFunctions=function(e){return et(this,void 0,void 0,function(){var t,n,o,i,a,l,p,u;return tt(this,function(m){switch(m.label){case 0:t=this[e],this[e]=[],m.label=1;case 1:m.trys.push([1,8,9,10]),n=Bc(t),o=n.next(),m.label=2;case 2:return o.done?[3,7]:(i=o.value,a=i(),a&&"promise"in a?[4,a.promise]:[3,4]);case 3:return m.sent(),[3,6];case 4:return[4,a];case 5:m.sent(),m.label=6;case 6:return o=n.next(),[3,2];case 7:return[3,10];case 8:return l=m.sent(),p={error:l},[3,10];case 9:try{o&&!o.done&&(u=n.return)&&u.call(n)}finally{if(p)throw p.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:m.sent(),m.label=12;case 12:return[2]}})})},r.prototype.track=function(e,t,n){var o=z2(e,t,n);return hi(this.dispatch(o))},r.prototype.identify=function(e,t){var n=AS(e,t);return hi(this.dispatch(n))},r.prototype.groupIdentify=function(e,t,n,o){var i=K2(e,t,n,o);return hi(this.dispatch(i))},r.prototype.setGroup=function(e,t,n){var o=Y2(e,t,n);return hi(this.dispatch(o))},r.prototype.revenue=function(e,t){var n=Q2(e,t);return hi(this.dispatch(n))},r.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),hi())},r.prototype._addPlugin=function(e){return hi(this.timeline.register(e,this.config))},r.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),hi())},r.prototype._removePlugin=function(e){return hi(this.timeline.deregister(e))},r.prototype.dispatchWithCallback=function(e,t){if(!this.isReady)return t(Gc(e,0,B2));this.process(e).then(t)},r.prototype.dispatch=function(e){return et(this,void 0,void 0,function(){var t=this;return tt(this,function(n){return this.isReady?[2,this.process(e)]:[2,new Promise(function(o){t.dispatchQ.push(t.dispatchWithCallback.bind(t,e,o))})]})})},r.prototype.process=function(e){return et(this,void 0,void 0,function(){var o,t,n,o;return tt(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.config.optOut?[2,Gc(e,0,L2)]:[4,this.timeline.push(e)];case 1:return o=i.sent(),o.code===200?this.config.loggerProvider.log(o.message):o.code===100?this.config.loggerProvider.warn(o.message):this.config.loggerProvider.error(o.message),[2,o];case 2:return t=i.sent(),n=String(t),this.config.loggerProvider.error(n),o=Gc(e,0,n),[2,o];case 3:return[2]}})})},r.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},r.prototype._setOptOut=function(e){this.config.optOut=!!e},r.prototype.flush=function(){return hi(this.timeline.flush())},r}(),IS=function(){function r(){this.productId="",this.quantity=1,this.price=0}return r.prototype.setProductId=function(e){return this.productId=e,this},r.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},r.prototype.setPrice=function(e){return this.price=e,this},r.prototype.setRevenueType=function(e){return this.revenueType=e,this},r.prototype.setRevenue=function(e){return this.revenue=e,this},r.prototype.setEventProperties=function(e){return Iy(e)&&(this.properties=e),this},r.prototype.getEventProperties=function(){var e=this.properties?pt({},this.properties):{};return e[fs.REVENUE_PRODUCT_ID]=this.productId,e[fs.REVENUE_QUANTITY]=this.quantity,e[fs.REVENUE_PRICE]=this.price,e[fs.REVENUE_TYPE]=this.revenueType,e[fs.REVENUE]=this.revenue,e},r}(),Z2=function(r,e){var t=Math.max(e,1);return r.reduce(function(n,o,i){var a=Math.floor(i/t);return n[a]||(n[a]=[]),n[a].push(o),n},[])},Op="Amplitude Logger ",OS=function(){function r(){this.logLevel=di.None}return r.prototype.disable=function(){this.logLevel=di.None},r.prototype.enable=function(e){e===void 0&&(e=di.Warn),this.logLevel=e},r.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<di.Verbose||console.log("".concat(Op,"[Log]: ").concat(e.join(" ")))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<di.Warn||console.warn("".concat(Op,"[Warn]: ").concat(e.join(" ")))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<di.Error||console.error("".concat(Op,"[Error]: ").concat(e.join(" ")))},r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<di.Debug||console.log("".concat(Op,"[Debug]: ").concat(e.join(" ")))},r}(),Rp=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:di.Warn,loggerProvider:new OS,offline:!1,optOut:!1,serverUrl:wS,serverZone:"US",useBatch:!1}},J2=function(){function r(e){var t,n,o,i;this._optOut=!1;var a=Rp();this.apiKey=e.apiKey,this.flushIntervalMillis=(t=e.flushIntervalMillis)!==null&&t!==void 0?t:a.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||a.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||a.flushQueueSize,this.instanceName=e.instanceName||a.instanceName,this.loggerProvider=e.loggerProvider||a.loggerProvider,this.logLevel=(n=e.logLevel)!==null&&n!==void 0?n:a.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:a.offline,this.optOut=(o=e.optOut)!==null&&o!==void 0?o:a.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||a.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(i=e.useBatch)!==null&&i!==void 0?i:a.useBatch,this.loggerProvider.enable(this.logLevel);var l=RS(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=l.serverZone,this.serverUrl=l.serverUrl}return Object.defineProperty(r.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),r}(),eB=function(r,e){return r==="EU"?e?H2:V2:e?q2:wS},RS=function(r,e,t){if(r===void 0&&(r=""),e===void 0&&(e=Rp().serverZone),t===void 0&&(t=Rp().useBatch),r)return{serverUrl:r,serverZone:void 0};var n=["US","EU"].includes(e)?e:Rp().serverZone;return{serverZone:n,serverUrl:eB(n,t)}};function tB(r){return r instanceof Error?r.message:String(r)}function Cp(r){var e="";try{"body"in r&&(e=JSON.stringify(r.body,null,2))}catch{}return e}var rB=function(){function r(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return r.prototype.setup=function(e){var t;return et(this,void 0,void 0,function(){var n,o=this;return tt(this,function(i){switch(i.label){case 0:return this.config=e,this.storageKey="".concat($2,"_").concat(this.config.apiKey.substring(0,10)),[4,(t=this.config.storageProvider)===null||t===void 0?void 0:t.get(this.storageKey)];case 1:return n=i.sent(),n&&n.length>0&&Promise.all(n.map(function(a){return o.execute(a)})).catch(),[2,Promise.resolve(void 0)]}})})},r.prototype.execute=function(e){var t=this;return e.insert_id||(e.insert_id=$c()),new Promise(function(n){var o={event:e,attempts:0,callback:function(i){return n(i)},timeout:0};t.addToQueue(o)})},r.prototype.getTryableList=function(e){var t=this;return e.filter(function(n){return n.attempts<t.config.flushMaxRetries?(n.attempts+=1,!0):(t.fulfillRequest([n],500,M2),!1)})},r.prototype.scheduleTryable=function(e,t){var n=this;t===void 0&&(t=!1),e.forEach(function(o){if(t&&(n.queue=n.queue.concat(o)),o.timeout===0){n.schedule(n.config.flushIntervalMillis);return}setTimeout(function(){o.timeout=0,n.schedule(0)},o.timeout)})},r.prototype.addToQueue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getTryableList(e);this.scheduleTryable(n,!0),this.saveEvents()},r.prototype.schedule=function(e){var t=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout(function(){t.flush(!0).then(function(){t.queue.length>0&&t.schedule(e)})},e))},r.prototype.flush=function(e){return e===void 0&&(e=!1),et(this,void 0,void 0,function(){var t,n,o,i=this;return tt(this,function(a){switch(a.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(t=[],n=[],this.queue.forEach(function(l){return l.timeout===0?t.push(l):n.push(l)}),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),o=Z2(t,this.config.flushQueueSize),[4,Promise.all(o.map(function(l){return i.send(l,e)}))]);case 1:return a.sent(),this.scheduleTryable(n),[2]}})})},r.prototype.send=function(e,t){return t===void 0&&(t=!0),et(this,void 0,void 0,function(){var n,o,i,a,l;return tt(this,function(p){switch(p.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,U2)];n={api_key:this.config.apiKey,events:e.map(function(u){var m=u.event;m.extra;var E=Fc(m,["extra"]);return E}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString()},p.label=1;case 1:return p.trys.push([1,3,,4]),o=RS(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(o,n)];case 2:return i=p.sent(),i===null?(this.fulfillRequest(e,0,D2),[2]):t?(this.handleResponse(i,e),[3,4]):("body"in i?this.fulfillRequest(e,i.statusCode,"".concat(i.status,": ").concat(Cp(i))):this.fulfillRequest(e,i.statusCode,i.status),[2]);case 3:return a=p.sent(),l=tB(a),this.config.loggerProvider.error(l),this.handleResponse({status:zr.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},r.prototype.handleResponse=function(e,t){var n=e.status;switch(n){case zr.Success:{this.handleSuccessResponse(e,t);break}case zr.Invalid:{this.handleInvalidResponse(e,t);break}case zr.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,t);break}case zr.RateLimit:{this.handleRateLimitResponse(e,t);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(n,"' provided for ").concat(t.length,' events"}')),this.handleOtherResponse(t);break}}},r.prototype.handleSuccessResponse=function(e,t){this.fulfillRequest(t,e.statusCode,k2)},r.prototype.handleInvalidResponse=function(e,t){var n=this;if(e.body.missingField||e.body.error.startsWith(F2)){this.fulfillRequest(t,e.statusCode,e.body.error);return}var o=jc(jc(jc(jc([],Si(Object.values(e.body.eventsWithInvalidFields)),!1),Si(Object.values(e.body.eventsWithMissingFields)),!1),Si(Object.values(e.body.eventsWithInvalidIdLengths)),!1),Si(e.body.silencedEvents),!1).flat(),i=new Set(o),a=t.filter(function(p,u){if(i.has(u)){n.fulfillRequest([p],e.statusCode,e.body.error);return}return!0});a.length>0&&this.config.loggerProvider.warn(Cp(e));var l=this.getTryableList(a);this.scheduleTryable(l)},r.prototype.handlePayloadTooLargeResponse=function(e,t){if(t.length===1){this.fulfillRequest(t,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Cp(e)),this.config.flushQueueSize/=2;var n=this.getTryableList(t);this.scheduleTryable(n)},r.prototype.handleRateLimitResponse=function(e,t){var n=this,o=Object.keys(e.body.exceededDailyQuotaUsers),i=Object.keys(e.body.exceededDailyQuotaDevices),a=e.body.throttledEvents,l=new Set(o),p=new Set(i),u=new Set(a),m=t.filter(function(w,R){if(w.event.user_id&&l.has(w.event.user_id)||w.event.device_id&&p.has(w.event.device_id)){n.fulfillRequest([w],e.statusCode,e.body.error);return}return u.has(R)&&(w.timeout=n.throttleTimeout),!0});m.length>0&&this.config.loggerProvider.warn(Cp(e));var E=this.getTryableList(m);this.scheduleTryable(E)},r.prototype.handleOtherResponse=function(e){var t=this,n=e.map(function(i){return i.timeout=i.attempts*t.retryTimeout,i}),o=this.getTryableList(n);this.scheduleTryable(o)},r.prototype.fulfillRequest=function(e,t,n){this.removeEvents(e),e.forEach(function(o){return o.callback(Gc(o.event,t,n))})},r.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(t){return t.event});this.config.storageProvider.set(this.storageKey,e)}},r.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(t){return!e.some(function(n){return n.event.insert_id===t.event.insert_id})}),this.saveEvents()},r}(),nB=function(r){var e=new Error().stack||"";return e.split(`
`).slice(2+r).map(function(t){return t.trim()})},an=function(r){return function(){var e=pt({},r.config),t=e.loggerProvider,n=e.logLevel;return{logger:t,logLevel:n}}},iB=function(r,e){var t,n;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var o=Bc(e.split(".")),i=o.next();!i.done;i=o.next()){var a=i.value;if(a in r)r=r[a];else return}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},sn=function(r,e){return function(){var t,n,o={};try{for(var i=Bc(e),a=i.next();!a.done;a=i.next()){var l=a.value;o[l]=iB(r,l)}}catch(p){t={error:p}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o}},un=function(r,e,t,n,o){return o===void 0&&(o=null),function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var l=t(),p=l.logger,u=l.logLevel;if(u&&u<di.Debug||!u||!p)return r.apply(o,i);var m={type:"invoke public method",name:e,args:i,stacktrace:nB(1),time:{start:new Date().toISOString()},states:{}};n&&m.states&&(m.states.before=n());var E=r.apply(o,i);return E&&E.promise?E.promise.then(function(){n&&m.states&&(m.states.after=n()),m.time&&(m.time.end=new Date().toISOString()),p.debug(JSON.stringify(m,null,2))}):(n&&m.states&&(m.states.after=n()),m.time&&(m.time.end=new Date().toISOString()),p.debug(JSON.stringify(m,null,2))),E}},Oy=function(){function r(){this.memoryStorage=new Map}return r.prototype.isEnabled=function(){return et(this,void 0,void 0,function(){return tt(this,function(e){return[2,!0]})})},r.prototype.get=function(e){return et(this,void 0,void 0,function(){return tt(this,function(t){return[2,this.memoryStorage.get(e)]})})},r.prototype.getRaw=function(e){return et(this,void 0,void 0,function(){var t;return tt(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return t=n.sent(),[2,t?JSON.stringify(t):void 0]}})})},r.prototype.set=function(e,t){return et(this,void 0,void 0,function(){return tt(this,function(n){return this.memoryStorage.set(e,t),[2]})})},r.prototype.remove=function(e){return et(this,void 0,void 0,function(){return tt(this,function(t){return this.memoryStorage.delete(e),[2]})})},r.prototype.reset=function(){return et(this,void 0,void 0,function(){return tt(this,function(e){return this.memoryStorage.clear(),[2]})})},r}(),Ry=function(){function r(){}return r.prototype.send=function(e,t){return Promise.resolve(null)},r.prototype.buildResponse=function(e){var t,n,o,i,a,l,p,u,m,E,w,R,S,P,x,k,B,G,X,F,j,H;if(typeof e!="object")return null;var re=e.code||0,te=this.buildStatus(re);switch(te){case zr.Success:return{status:te,statusCode:re,body:{eventsIngested:(t=e.events_ingested)!==null&&t!==void 0?t:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(o=e.server_upload_time)!==null&&o!==void 0?o:0}};case zr.Invalid:return{status:te,statusCode:re,body:{error:(i=e.error)!==null&&i!==void 0?i:"",missingField:(a=e.missing_field)!==null&&a!==void 0?a:"",eventsWithInvalidFields:(l=e.events_with_invalid_fields)!==null&&l!==void 0?l:{},eventsWithMissingFields:(p=e.events_with_missing_fields)!==null&&p!==void 0?p:{},eventsWithInvalidIdLengths:(u=e.events_with_invalid_id_lengths)!==null&&u!==void 0?u:{},epsThreshold:(m=e.eps_threshold)!==null&&m!==void 0?m:0,exceededDailyQuotaDevices:(E=e.exceeded_daily_quota_devices)!==null&&E!==void 0?E:{},silencedDevices:(w=e.silenced_devices)!==null&&w!==void 0?w:[],silencedEvents:(R=e.silenced_events)!==null&&R!==void 0?R:[],throttledDevices:(S=e.throttled_devices)!==null&&S!==void 0?S:{},throttledEvents:(P=e.throttled_events)!==null&&P!==void 0?P:[]}};case zr.PayloadTooLarge:return{status:te,statusCode:re,body:{error:(x=e.error)!==null&&x!==void 0?x:""}};case zr.RateLimit:return{status:te,statusCode:re,body:{error:(k=e.error)!==null&&k!==void 0?k:"",epsThreshold:(B=e.eps_threshold)!==null&&B!==void 0?B:0,throttledDevices:(G=e.throttled_devices)!==null&&G!==void 0?G:{},throttledUsers:(X=e.throttled_users)!==null&&X!==void 0?X:{},exceededDailyQuotaDevices:(F=e.exceeded_daily_quota_devices)!==null&&F!==void 0?F:{},exceededDailyQuotaUsers:(j=e.exceeded_daily_quota_users)!==null&&j!==void 0?j:{},throttledEvents:(H=e.throttled_events)!==null&&H!==void 0?H:[]}};case zr.Timeout:default:return{status:te,statusCode:re}}},r.prototype.buildStatus=function(e){return e>=200&&e<300?zr.Success:e===429?zr.RateLimit:e===413?zr.PayloadTooLarge:e===408?zr.Timeout:e>=400&&e<500?zr.Invalid:e>=500?zr.Failed:zr.Unknown},r}(),Ji=function(){var r="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[r]<"u")return globalThis[r];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},Pp=function(){var r,e=Ji();if(!(!((r=e==null?void 0:e.location)===null||r===void 0)&&r.search))return{};var t=e.location.search.substring(1).split("&").filter(Boolean),n=t.reduce(function(o,i){var a=i.split("=",2),l=CS(a[0]),p=CS(a[1]);return p&&(o[l]=p),o},{});return n},CS=function(r){r===void 0&&(r="");try{return decodeURIComponent(r)}catch{return""}},oB="utm_campaign",aB="utm_content",sB="utm_id",uB="utm_medium",cB="utm_source",lB="utm_term",PS="dclid",xS="fbclid",NS="gbraid",kS="gclid",DS="ko_click_id",MS="li_fat_id",LS="msclkid",US="rtd_cid",FS="ttclid",BS="twclid",jS="wbraid",xp={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},GS=function(){function r(){}return r.prototype.parse=function(){return et(this,void 0,void 0,function(){return tt(this,function(e){return[2,pt(pt(pt(pt({},xp),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},r.prototype.getUtmParam=function(){var e=Pp(),t=e[oB],n=e[aB],o=e[sB],i=e[uB],a=e[cB],l=e[lB];return{utm_campaign:t,utm_content:n,utm_id:o,utm_medium:i,utm_source:a,utm_term:l}},r.prototype.getReferrer=function(){var e,t,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(t=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&t!==void 0?t:void 0}catch{}return n},r.prototype.getClickIds=function(){var e,t=Pp();return e={},e[PS]=t[PS],e[xS]=t[xS],e[NS]=t[NS],e[kS]=t[kS],e[DS]=t[DS],e[MS]=t[MS],e[LS]=t[LS],e[US]=t[US],e[FS]=t[FS],e[BS]=t[BS],e[jS]=t[jS],e},r}(),$S=function(r,e,t){return e===void 0&&(e=""),t===void 0&&(t=10),[Ip,e,r.substring(0,t)].filter(Boolean).join("_")},fB=function(r){return"".concat(Ip.toLowerCase(),"_").concat(r.substring(0,6))},VS=function(r){var e=r.split(".");return e.length<=2?r:e.slice(e.length-2,e.length).join(".")},dB=function(r){return Object.values(r).every(function(e){return!e})},hB=function(r,e,t,n){n===void 0&&(n=!0),r.referrer;var o=r.referring_domain,i=Fc(r,["referrer","referring_domain"]),a=e||{};a.referrer;var l=a.referring_domain,p=Fc(a,["referrer","referring_domain"]);if(pB(t.excludeReferrers,r.referring_domain)||!n&&dB(r)&&e)return!1;var u=JSON.stringify(i)!==JSON.stringify(p),m=VS(o||"")!==VS(l||"");return!e||u||m},pB=function(r,e){return r===void 0&&(r=[]),e===void 0&&(e=""),r.some(function(t){return t instanceof RegExp?t.test(e):t===e})},vB=function(r,e){var t=pt(pt({},xp),r),n=Object.entries(t).reduce(function(o,i){var a,l=Si(i,2),p=l[0],u=l[1];return o.setOnce("initial_".concat(p),(a=u??e.initialEmptyValue)!==null&&a!==void 0?a:"EMPTY"),u?o.set(p,u):o.unset(p)},new Vc);return AS(n)},mB=function(r){var e=r;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},gB=function(r,e,t){return t===void 0&&(t=10),[Ip,e,r.substring(0,t)].filter(Boolean).join("_")},qS=function(r,e){e===void 0&&(e=Date.now());var t=Date.now(),n=t-e;return n>r},yB=function(){function r(e,t){var n;this.shouldTrackNewCampaign=!1,this.options=pt({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:mB((n=t.cookieOptions)===null||n===void 0?void 0:n.domain)},e),this.storage=t.cookieStorage,this.storageKey=gB(t.apiKey,"MKTG"),this.currentCampaign=xp,this.sessionTimeout=t.sessionTimeout,this.lastEventTime=t.lastEventTime,t.loggerProvider.log("Installing web attribution tracking.")}return r.prototype.init=function(){return et(this,void 0,void 0,function(){var e,t;return tt(this,function(n){switch(n.label){case 0:return[4,this.fetchCampaign()];case 1:return t=Si.apply(void 0,[n.sent(),2]),this.currentCampaign=t[0],this.previousCampaign=t[1],e=this.lastEventTime?qS(this.sessionTimeout,this.lastEventTime):!0,hB(this.currentCampaign,this.previousCampaign,this.options,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},r.prototype.fetchCampaign=function(){return et(this,void 0,void 0,function(){return tt(this,function(e){switch(e.label){case 0:return[4,Promise.all([new GS().parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}})})},r.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var t=vB(this.currentCampaign,this.options);return e&&(t.event_id=e),t},r.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},r}(),Cy=function(){function r(e){this.options=pt({},e)}return r.prototype.isEnabled=function(){return et(this,void 0,void 0,function(){var e,t,n;return tt(this,function(o){switch(o.label){case 0:if(!Ji())return[2,!1];r.testValue=String(Date.now()),e=new r(this.options),t="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,e.set(t,r.testValue)];case 2:return o.sent(),[4,e.get(t)];case 3:return n=o.sent(),[2,n===r.testValue];case 4:return o.sent(),[2,!1];case 5:return[4,e.remove(t)];case 6:return o.sent(),[7];case 7:return[2]}})})},r.prototype.get=function(e){var t;return et(this,void 0,void 0,function(){var n,o;return tt(this,function(i){switch(i.label){case 0:return[4,this.getRaw(e)];case 1:if(n=i.sent(),!n)return[2,void 0];try{return o=(t=_B(n))!==null&&t!==void 0?t:EB(n),o===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]):[2,JSON.parse(o)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]}return[2]}})})},r.prototype.getRaw=function(e){var t,n;return et(this,void 0,void 0,function(){var o,i,a;return tt(this,function(l){return o=Ji(),i=(n=(t=o==null?void 0:o.document)===null||t===void 0?void 0:t.cookie.split("; "))!==null&&n!==void 0?n:[],a=i.find(function(p){return p.indexOf(e+"=")===0}),a?[2,a.substring(e.length+1)]:[2,void 0]})})},r.prototype.set=function(e,t){var n;return et(this,void 0,void 0,function(){var o,i,a,l,p,u,m;return tt(this,function(E){try{o=(n=this.options.expirationDays)!==null&&n!==void 0?n:0,i=t!==null?o:-1,a=void 0,i&&(l=new Date,l.setTime(l.getTime()+i*24*60*60*1e3),a=l),p="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(t)))),a&&(p+="; expires=".concat(a.toUTCString())),p+="; path=/",this.options.domain&&(p+="; domain=".concat(this.options.domain)),this.options.secure&&(p+="; Secure"),this.options.sameSite&&(p+="; SameSite=".concat(this.options.sameSite)),u=Ji(),u&&(u.document.cookie=p)}catch(w){m=w instanceof Error?w.message:String(w),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(m))}return[2]})})},r.prototype.remove=function(e){return et(this,void 0,void 0,function(){return tt(this,function(t){switch(t.label){case 0:return[4,this.set(e,null)];case 1:return t.sent(),[2]}})})},r.prototype.reset=function(){return et(this,void 0,void 0,function(){return tt(this,function(e){return[2]})})},r}(),_B=function(r){try{return decodeURIComponent(atob(r))}catch{return}},EB=function(r){try{return decodeURIComponent(atob(decodeURIComponent(r)))}catch{return}},bB=function(r){yu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.send=function(t,n){return et(this,void 0,void 0,function(){var o,i,a;return tt(this,function(l){switch(l.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return o={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(n),method:"POST"},[4,fetch(t,o)];case 1:return i=l.sent(),[4,i.text()];case 2:a=l.sent();try{return[2,this.buildResponse(JSON.parse(a))]}catch{return[2,this.buildResponse({code:i.status})]}return[2]}})})},e}(Ry),SB=function(){function r(){}return r.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:wB(),platform:"Web",os:void 0,deviceModel:void 0}},r}(),wB=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},TB=function(){function r(){this.queue=[]}return r.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},r.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(t){e(t)}),this.queue=[])},r}(),ds=function(){return ds=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ds.apply(this,arguments)},Np=function(r,e){var t=["string","number","boolean","undefined"],n=typeof r,o=typeof e;if(n!==o)return!1;for(var i=0,a=t;i<a.length;i++){var l=a[i];if(l===n)return r===e}if(r==null&&e==null)return!0;if(r==null||e==null||r.length!==e.length)return!1;var p=Array.isArray(r),u=Array.isArray(e);if(p!==u)return!1;if(p&&u){for(var m=0;m<r.length;m++)if(!Np(r[m],e[m]))return!1}else{var E=Object.keys(r).sort(),w=Object.keys(e).sort();if(!Np(E,w))return!1;var R=!0;return Object.keys(r).forEach(function(S){Np(r[S],e[S])||(R=!1)}),R}return!0},AB="$set",IB="$unset",OB="$clearAll";Object.entries||(Object.entries=function(r){for(var e=Object.keys(r),t=e.length,n=new Array(t);t--;)n[t]=[e[t],r[e[t]]];return n});var RB=function(){function r(){this.identity={userProperties:{}},this.listeners=new Set}return r.prototype.editIdentity=function(){var e=this,t=ds({},this.identity.userProperties),n=ds(ds({},this.identity),{userProperties:t});return{setUserId:function(o){return n.userId=o,this},setDeviceId:function(o){return n.deviceId=o,this},setUserProperties:function(o){return n.userProperties=o,this},setOptOut:function(o){return n.optOut=o,this},updateUserProperties:function(o){for(var i=n.userProperties||{},a=0,l=Object.entries(o);a<l.length;a++){var p=l[a],u=p[0],m=p[1];switch(u){case AB:for(var E=0,w=Object.entries(m);E<w.length;E++){var R=w[E],S=R[0],P=R[1];i[S]=P}break;case IB:for(var x=0,k=Object.keys(m);x<k.length;x++){var S=k[x];delete i[S]}break;case OB:i={};break}}return n.userProperties=i,this},commit:function(){return e.setIdentity(n),this}}},r.prototype.getIdentity=function(){return ds({},this.identity)},r.prototype.setIdentity=function(e){var t=ds({},this.identity);this.identity=ds({},e),Np(t,this.identity)||this.listeners.forEach(function(n){n(e)})},r.prototype.addIdentityListener=function(e){this.listeners.add(e)},r.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},r}(),Mf=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,Py=function(){function r(){this.identityStore=new RB,this.eventBridge=new TB,this.applicationContextProvider=new SB}return r.getInstance=function(e){return Mf.analyticsConnectorInstances||(Mf.analyticsConnectorInstances={}),Mf.analyticsConnectorInstances[e]||(Mf.analyticsConnectorInstances[e]=new r),Mf.analyticsConnectorInstances[e]},r}(),Lf=function(r){return r===void 0&&(r="$default_instance"),Py.getInstance(r)},CB=function(r,e){Lf(e).identityStore.editIdentity().setUserId(r).commit()},PB=function(r,e){Lf(e).identityStore.editIdentity().setDeviceId(r).commit()},xB=function(){function r(){this.name="identity",this.type="before",this.identityStore=Lf().identityStore}return r.prototype.execute=function(e){return et(this,void 0,void 0,function(){var t;return tt(this,function(n){return t=e.user_properties,t&&this.identityStore.editIdentity().updateUserProperties(t).commit(),[2,e]})})},r.prototype.setup=function(e){return et(this,void 0,void 0,function(){return tt(this,function(t){return e.instanceName&&(this.identityStore=Lf(e.instanceName).identityStore),[2]})})},r}(),NB=function(){var r,e,t,n;if(typeof navigator>"u")return"";var o=navigator.userLanguage;return(n=(t=(e=(r=navigator.languages)===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:navigator.language)!==null&&t!==void 0?t:o)!==null&&n!==void 0?n:""},Uf=function(r,e){return typeof r=="boolean"?r:(r==null?void 0:r[e])!==!1},HS=function(r){return Uf(r,"attribution")},kB=function(r){return Uf(r,"fileDownloads")},DB=function(r){return Uf(r,"formInteractions")},WS=function(r){return Uf(r,"pageViews")},zS=function(r){return Uf(r,"sessions")},MB=function(r){var e=function(){return!1},t=void 0,n,o=r.pageCounter,i=WS(r.defaultTracking);return i&&(e=void 0,n=void 0,r.defaultTracking&&typeof r.defaultTracking=="object"&&r.defaultTracking.pageViews&&typeof r.defaultTracking.pageViews=="object"&&("trackOn"in r.defaultTracking.pageViews&&(e=r.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in r.defaultTracking.pageViews&&(t=r.defaultTracking.pageViews.trackHistoryChanges),"eventType"in r.defaultTracking.pageViews&&r.defaultTracking.pageViews.eventType&&(n=r.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:t,eventType:n,pageCounter:o}},LB=function(r){return HS(r.defaultTracking)&&r.defaultTracking&&typeof r.defaultTracking=="object"&&r.defaultTracking.attribution&&typeof r.defaultTracking.attribution=="object"?pt({},r.defaultTracking.attribution):{}},UB=function(r,e){kp(r,e)},kp=function(r,e){for(var t=0;t<e.length;t++){var n=e[t],o=n.name,i=n.args,a=n.resolve,l=r&&r[o];if(typeof l=="function"){var p=l.apply(r,i);typeof a=="function"&&a(p==null?void 0:p.promise)}}return r},xy=function(r){var e=r;return e&&e._q!==void 0},FB="2.9.3",BB="Web",jB="$remote",GB=function(){function r(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat(FB),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return r.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},r.prototype.execute=function(e){var t,n;return et(this,void 0,void 0,function(){var o,i,a,l;return tt(this,function(p){return o=new Date().getTime(),i=(t=this.config.lastEventId)!==null&&t!==void 0?t:-1,a=(n=e.event_id)!==null&&n!==void 0?n:i+1,this.config.lastEventId=a,e.time||(this.config.lastEventTime=o),l=pt(pt(pt(pt(pt(pt(pt(pt({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:o},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:BB}),this.config.trackingOptions.language&&{language:NB()}),this.config.trackingOptions.ipAddress&&{ip:jB}),{insert_id:$c(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:a,library:this.library,user_agent:this.userAgent}),[2,l]})})},r}(),KS=function(){function r(e){this.storage=e}return r.prototype.isEnabled=function(){return et(this,void 0,void 0,function(){var e,t,n,o;return tt(this,function(i){switch(i.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),t=new r(this.storage),n="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,t.set(n,e)];case 2:return i.sent(),[4,t.get(n)];case 3:return o=i.sent(),[2,o===e];case 4:return i.sent(),[2,!1];case 5:return[4,t.remove(n)];case 6:return i.sent(),[7];case 7:return[2]}})})},r.prototype.get=function(e){return et(this,void 0,void 0,function(){var t;return tt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return t=n.sent(),t?[2,JSON.parse(t)]:[2,void 0];case 2:return n.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},r.prototype.getRaw=function(e){var t;return et(this,void 0,void 0,function(){return tt(this,function(n){return[2,((t=this.storage)===null||t===void 0?void 0:t.getItem(e))||void 0]})})},r.prototype.set=function(e,t){var n;return et(this,void 0,void 0,function(){return tt(this,function(o){try{(n=this.storage)===null||n===void 0||n.setItem(e,JSON.stringify(t))}catch{}return[2]})})},r.prototype.remove=function(e){var t;return et(this,void 0,void 0,function(){return tt(this,function(n){try{(t=this.storage)===null||t===void 0||t.removeItem(e)}catch{}return[2]})})},r.prototype.reset=function(){var e;return et(this,void 0,void 0,function(){return tt(this,function(t){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},r}(),Dp=1e3,YS=function(r){yu(e,r);function e(t){var n=this,o;return n=r.call(this,(o=Ji())===null||o===void 0?void 0:o.localStorage)||this,n.loggerProvider=t==null?void 0:t.loggerProvider,n}return e.prototype.set=function(t,n){var o;return et(this,void 0,void 0,function(){var i;return tt(this,function(a){switch(a.label){case 0:return Array.isArray(n)&&n.length>Dp?(i=n.length-Dp,[4,r.prototype.set.call(this,t,n.slice(0,Dp))]):[3,2];case 1:return a.sent(),(o=this.loggerProvider)===null||o===void 0||o.error("Failed to save ".concat(i," events because the queue length exceeded ").concat(Dp,".")),[3,4];case 2:return[4,r.prototype.set.call(this,t,n)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},e}(KS),$B=function(r){yu(e,r);function e(){var t;return r.call(this,(t=Ji())===null||t===void 0?void 0:t.sessionStorage)||this}return e}(KS),VB=function(r){yu(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={done:4},t}return e.prototype.send=function(t,n){return et(this,void 0,void 0,function(){var o=this;return tt(this,function(i){return[2,new Promise(function(a,l){typeof XMLHttpRequest>"u"&&l(new Error("XHRTransport is not supported."));var p=new XMLHttpRequest;p.open("POST",t,!0),p.onreadystatechange=function(){if(p.readyState===o.state.done){var u=p.responseText;try{a(o.buildResponse(JSON.parse(u)))}catch{a(o.buildResponse({code:p.status}))}}},p.setRequestHeader("Content-Type","application/json"),p.setRequestHeader("Accept","*/*"),p.send(JSON.stringify(n))})]})})},e}(Ry),qB=function(r){yu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.send=function(t,n){return et(this,void 0,void 0,function(){var o=this;return tt(this,function(i){return[2,new Promise(function(a,l){var p=Ji();if(!(p!=null&&p.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var u=JSON.stringify(n),m=p.navigator.sendBeacon(t,JSON.stringify(n));return a(m?o.buildResponse({code:200,events_ingested:n.events.length,payload_size_bytes:u.length,server_upload_time:Date.now()}):o.buildResponse({code:500}))}catch(E){l(E)}})]})})},e}(Ry),HB=function(r,e,t){return t===void 0&&(t=!0),et(void 0,void 0,void 0,function(){var n,o,i,a,l,p,u,m,E;return tt(this,function(w){switch(w.label){case 0:return n=fB(r),[4,e.getRaw(n)];case 1:return o=w.sent(),o?t?[4,e.remove(n)]:[3,3]:[2,{optOut:!1}];case 2:w.sent(),w.label=3;case 3:return i=Si(o.split("."),6),a=i[0],l=i[1],p=i[2],u=i[3],m=i[4],E=i[5],[2,{deviceId:a,userId:WB(l),sessionId:Ny(u),lastEventId:Ny(E),lastEventTime:Ny(m),optOut:!!p}]}})})},Ny=function(r){var e=parseInt(r,32);if(!isNaN(e))return e},WB=function(r){if(!(!atob||!escape||!r))try{return decodeURIComponent(escape(atob(r)))}catch{return}},eo="[Amplitude]",QS="".concat(eo," Form Started"),zB="".concat(eo," Form Submitted"),KB="".concat(eo," File Downloaded"),XS="session_start",ZS="session_end",YB="".concat(eo," File Extension"),QB="".concat(eo," File Name"),XB="".concat(eo," Link ID"),ZB="".concat(eo," Link Text"),JB="".concat(eo," Link URL"),ky="".concat(eo," Form ID"),Dy="".concat(eo," Form Name"),My="".concat(eo," Form Destination"),Mp="cookie",ej="US",tj=function(r){yu(e,r);function e(t,n,o,i,a,l,p,u,m,E,w,R,S,P,x,k,B,G,X,F,j,H,re,te,fe,Te,Ce,$,J,ge,ee,Ie){o===void 0&&(o=new Oy),i===void 0&&(i={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),p===void 0&&(p=1e3),u===void 0&&(u=5),m===void 0&&(m=30),E===void 0&&(E=Mp),x===void 0&&(x=new OS),k===void 0&&(k=di.Warn),G===void 0&&(G=!1),X===void 0&&(X=!1),H===void 0&&(H=""),re===void 0&&(re=ej),fe===void 0&&(fe=30*60*1e3),Te===void 0&&(Te=new YS({loggerProvider:x})),Ce===void 0&&(Ce={ipAddress:!0,language:!0,platform:!0}),$===void 0&&($="fetch"),J===void 0&&(J=!1);var we=r.call(this,{apiKey:t,storageProvider:Te,transportProvider:JS($)})||this;return we.apiKey=t,we.appVersion=n,we.cookieOptions=i,we.defaultTracking=a,we.flushIntervalMillis=p,we.flushMaxRetries=u,we.flushQueueSize=m,we.identityStorage=E,we.ingestionMetadata=w,we.instanceName=R,we.loggerProvider=x,we.logLevel=k,we.minIdLength=B,we.offline=G,we.partnerId=F,we.plan=j,we.serverUrl=H,we.serverZone=re,we.sessionTimeout=fe,we.storageProvider=Te,we.trackingOptions=Ce,we.transport=$,we.useBatch=J,we._optOut=!1,we._cookieStorage=o,we.deviceId=l,we.lastEventId=S,we.lastEventTime=P,we.optOut=X,we.sessionId=te,we.pageCounter=ee,we.userId=ge,we.debugLogsEnabled=Ie,we.loggerProvider.enable(Ie?di.Debug:we.logLevel),we}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(t){this._cookieStorage!==t&&(this._cookieStorage=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(t){this._deviceId!==t&&(this._deviceId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(t){this._userId!==t&&(this._userId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(t){this._sessionId!==t&&(this._sessionId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut!==t&&(this._optOut=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(t){this._lastEventTime!==t&&(this._lastEventTime=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(t){this._lastEventId!==t&&(this._lastEventId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(t){this._pageCounter!==t&&(this._pageCounter=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(t){this._debugLogsEnabled!==t&&(this._debugLogsEnabled=t,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var t={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set($S(this.apiKey),t)},e}(J2),rj=function(r,e,t){return e===void 0&&(e={}),et(void 0,void 0,void 0,function(){var n,o,i,a,l,p,u,m,E,w,R,S,P,x,k,B,G,X,F,j,H,re,te,fe,Te,Ce,$,J,ge,ee,Ie,we,Be,st,At,Ar,Ir,sr,Mt,ur,Or,Kr,pr;return tt(this,function(Wt){switch(Wt.label){case 0:return n=e.identityStorage||Mp,F={},n===Mp?[3,1]:(i="",[3,5]);case 1:return(H=(j=e.cookieOptions)===null||j===void 0?void 0:j.domain)!==null&&H!==void 0?(a=H,[3,4]):[3,2];case 2:return[4,ij()];case 3:a=Wt.sent(),Wt.label=4;case 4:i=a,Wt.label=5;case 5:return o=pt.apply(void 0,[(F.domain=i,F.expiration=365,F.sameSite="Lax",F.secure=!1,F.upgrade=!0,F),e.cookieOptions]),l=nj(e.identityStorage,o),[4,HB(r,l,(te=(re=e.cookieOptions)===null||re===void 0?void 0:re.upgrade)!==null&&te!==void 0?te:!0)];case 6:return p=Wt.sent(),[4,l.get($S(r))];case 7:return u=Wt.sent(),m=Pp(),E=(J=($=(Ce=(Te=(fe=e.deviceId)!==null&&fe!==void 0?fe:m.ampDeviceId)!==null&&Te!==void 0?Te:m.deviceId)!==null&&Ce!==void 0?Ce:u==null?void 0:u.deviceId)!==null&&$!==void 0?$:p.deviceId)!==null&&J!==void 0?J:$c(),w=(ge=u==null?void 0:u.lastEventId)!==null&&ge!==void 0?ge:p.lastEventId,R=(ee=u==null?void 0:u.lastEventTime)!==null&&ee!==void 0?ee:p.lastEventTime,S=(we=(Ie=e.optOut)!==null&&Ie!==void 0?Ie:u==null?void 0:u.optOut)!==null&&we!==void 0?we:p.optOut,P=(Be=u==null?void 0:u.sessionId)!==null&&Be!==void 0?Be:p.sessionId,x=(At=(st=e.userId)!==null&&st!==void 0?st:u==null?void 0:u.userId)!==null&&At!==void 0?At:p.userId,t.previousSessionDeviceId=(Ar=u==null?void 0:u.deviceId)!==null&&Ar!==void 0?Ar:p.deviceId,t.previousSessionUserId=(Ir=u==null?void 0:u.userId)!==null&&Ir!==void 0?Ir:p.userId,k={ipAddress:(Mt=(sr=e.trackingOptions)===null||sr===void 0?void 0:sr.ipAddress)!==null&&Mt!==void 0?Mt:!0,language:(Or=(ur=e.trackingOptions)===null||ur===void 0?void 0:ur.language)!==null&&Or!==void 0?Or:!0,platform:(pr=(Kr=e.trackingOptions)===null||Kr===void 0?void 0:Kr.platform)!==null&&pr!==void 0?pr:!0},B=u==null?void 0:u.pageCounter,G=u==null?void 0:u.debugLogsEnabled,X=new tj(r,e.appVersion,l,o,e.defaultTracking,E,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,n,e.ingestionMetadata,e.instanceName,w,R,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,S,e.partnerId,e.plan,e.serverUrl,e.serverZone,P,e.sessionTimeout,e.storageProvider,k,e.transport,e.useBatch,x,B,G),[4,X.storageProvider.isEnabled()];case 8:return Wt.sent()||(X.loggerProvider.warn("Storage provider ".concat(X.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),X.storageProvider=new Oy),[2,X]}})})},nj=function(r,e){switch(r===void 0&&(r=Mp),e===void 0&&(e={}),r){case"localStorage":return new YS;case"sessionStorage":return new $B;case"none":return new Oy;case"cookie":default:return new Cy(pt(pt({},e),{expirationDays:e.expiration}))}},JS=function(r){return r==="xhr"?new VB:r==="beacon"?new qB:new bB},ij=function(r){return et(void 0,void 0,void 0,function(){var e,t,n,o,i,i,a,l,p,u;return tt(this,function(m){switch(m.label){case 0:return[4,new Cy().isEnabled()];case 1:if(!m.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,t=e.split("."),n=[],o="AMP_TLDTEST",i=t.length-2;i>=0;--i)n.push(t.slice(i).join("."));i=0,m.label=2;case 2:return i<n.length?(a=n[i],l={domain:"."+a},p=new Cy(l),[4,p.set(o,1)]):[3,7];case 3:return m.sent(),[4,p.get(o)];case 4:return u=m.sent(),u?[4,p.remove(o)]:[3,6];case 5:return m.sent(),[2,"."+a];case 6:return i++,[3,2];case 7:return[2,""]}})})},oj=function(r){var e={};for(var t in r){var n=r[t];n&&(e[t]=n)}return e},aj="[Amplitude] Page Viewed",sj=function(r){r===void 0&&(r={});var e,t=Ji(),n=void 0,o,i,a=r.trackOn,l=r.trackHistoryChanges,p=r.eventType,u=p===void 0?aj:p,m=function(){return et(void 0,void 0,void 0,function(){var x,k;return tt(this,function(B){switch(B.label){case 0:return k={event_type:u},x=[{}],[4,uj()];case 1:return[2,(k.event_properties=pt.apply(void 0,[pt.apply(void 0,x.concat([B.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":typeof location<"u"&&location.href||"","[Amplitude] Page Path":typeof location<"u"&&location.pathname||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":typeof location<"u"&&location.href.split("?")[0]||""}]),k)]}})})},E=function(){return typeof a>"u"||typeof a=="function"&&a()},w=typeof location<"u"?location.href:null,R=function(){return et(void 0,void 0,void 0,function(){var x,k,B,G;return tt(this,function(X){switch(X.label){case 0:return x=location.href,k=lj(l,x,w||"")&&E(),w=x,k?(n==null||n.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return G=(B=e).track,[4,m()];case 2:G.apply(B,[X.sent()]),X.label=3;case 3:X.label=4;case 4:return[2]}})})},S=function(){R()},P={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(x,k){return et(void 0,void 0,void 0,function(){var B,G;return tt(this,function(X){switch(X.label){case 0:return e=k,i=x,n=x.loggerProvider,n.log("Installing @amplitude/plugin-page-view-tracking-browser"),t&&(t.addEventListener("popstate",S),o=t.history.pushState,t.history.pushState=new Proxy(t.history.pushState,{apply:function(F,j,H){var re=Si(H,3),te=re[0],fe=re[1],Te=re[2];F.apply(j,[te,fe,Te]),R()}})),E()?(n.log("Tracking page view event"),G=(B=e).track,[4,m()]):[3,2];case 1:G.apply(B,[X.sent()]),X.label=2;case 2:return[2]}})})},execute:function(x){return et(void 0,void 0,void 0,function(){var k;return tt(this,function(B){switch(B.label){case 0:return a==="attribution"&&cj(x)?(n==null||n.log("Enriching campaign event to page view event with campaign parameters"),[4,m()]):[3,2];case 1:k=B.sent(),x.event_type=k.event_type,x.event_properties=pt(pt({},x.event_properties),k.event_properties),B.label=2;case 2:return i&&x.event_type===u&&(i.pageCounter=i.pageCounter?i.pageCounter+1:1,x.event_properties=pt(pt({},x.event_properties),{"[Amplitude] Page Counter":i.pageCounter})),[2,x]}})})},teardown:function(){return et(void 0,void 0,void 0,function(){return tt(this,function(x){return t&&(t.removeEventListener("popstate",S),o&&(t.history.pushState=o)),[2]})})}};return P},uj=function(){return et(void 0,void 0,void 0,function(){var r;return tt(this,function(e){switch(e.label){case 0:return r=oj,[4,new GS().parse()];case 1:return[2,r.apply(void 0,[e.sent()])]}})})},cj=function(r){if(r.event_type==="$identify"&&r.user_properties){var e=r.user_properties,t=e[vn.SET]||{},n=e[vn.UNSET]||{},o=jc(jc([],Si(Object.keys(t)),!1),Si(Object.keys(n)),!1);return Object.keys(xp).every(function(i){return o.includes(i)})}return!1},lj=function(r,e,t){switch(r){case"pathOnly":return e.split("?")[0]!==t.split("?")[0];default:return e!==t}},fj=function(){var r,e=[],t=function(u,m,E){u.addEventListener(m,E),e.push({element:u,type:m,handler:E})},n=function(){e.forEach(function(u){var m=u.element,E=u.type,w=u.handler;m==null||m.removeEventListener(E,w)}),e=[]},o="@amplitude/plugin-form-interaction-tracking-browser",i="enrichment",a=function(u,m){return et(void 0,void 0,void 0,function(){var E;return tt(this,function(w){return(E=Ji())===null||E===void 0||E.addEventListener("load",function(){if(!m){u.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var R=function(P){var x=!1;t(P,"change",function(){var k;x||m.track(QS,(k={},k[ky]=qc(P.id),k[Dy]=qc(P.name),k[My]=P.action,k)),x=!0}),t(P,"submit",function(){var k,B;x||m.track(QS,(k={},k[ky]=qc(P.id),k[Dy]=qc(P.name),k[My]=P.action,k)),m.track(zB,(B={},B[ky]=qc(P.id),B[Dy]=qc(P.name),B[My]=P.action,B)),x=!1})},S=Array.from(document.getElementsByTagName("form"));S.forEach(R),typeof MutationObserver<"u"&&(r=new MutationObserver(function(P){P.forEach(function(x){x.addedNodes.forEach(function(k){k.nodeName==="FORM"&&R(k),"querySelectorAll"in k&&typeof k.querySelectorAll=="function"&&Array.from(k.querySelectorAll("form")).map(R)})})}),r.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},l=function(u){return et(void 0,void 0,void 0,function(){return tt(this,function(m){return[2,u]})})},p=function(){return et(void 0,void 0,void 0,function(){return tt(this,function(u){return r==null||r.disconnect(),n(),[2]})})};return{name:o,type:i,setup:a,execute:l,teardown:p}},qc=function(r){if(typeof r=="string")return r},dj=function(){var r,e=[],t=function(u,m,E){u.addEventListener(m,E),e.push({element:u,type:m,handler:E})},n=function(){e.forEach(function(u){var m=u.element,E=u.type,w=u.handler;m==null||m.removeEventListener(E,w)}),e=[]},o="@amplitude/plugin-file-download-tracking-browser",i="enrichment",a=function(u,m){return et(void 0,void 0,void 0,function(){var E;return tt(this,function(w){return(E=Ji())===null||E===void 0||E.addEventListener("load",function(){if(!m){u.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var R=function(x){var k;try{k=new URL(x.href,window.location.href)}catch{return}var B=S.exec(k.href),G=B==null?void 0:B[1];G&&t(x,"click",function(){var X;G&&m.track(KB,(X={},X[YB]=G,X[QB]=k.pathname,X[XB]=x.id,X[ZB]=x.text,X[JB]=x.href,X))})},S=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,P=Array.from(document.getElementsByTagName("a"));P.forEach(R),typeof MutationObserver<"u"&&(r=new MutationObserver(function(x){x.forEach(function(k){k.addedNodes.forEach(function(B){B.nodeName==="A"&&R(B),"querySelectorAll"in B&&typeof B.querySelectorAll=="function"&&Array.from(B.querySelectorAll("a")).map(R)})})}),r.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},l=function(u){return et(void 0,void 0,void 0,function(){return tt(this,function(m){return[2,u]})})},p=function(){return et(void 0,void 0,void 0,function(){return tt(this,function(u){return r==null||r.disconnect(),n(),[2]})})};return{name:o,type:i,setup:a,execute:l,teardown:p}},ew=!1,hj=function(r){if(!(ew||r.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;r.loggerProvider.warn(e),ew=!0}},pj=function(){var r="@amplitude/plugin-network-checker-browser",e="before",t=Ji(),n=[],o=function(p,u){t&&(t.addEventListener(p,u),n.push({type:p,handler:u}))},i=function(){n.forEach(function(p){var u=p.type,m=p.handler;t&&t.removeEventListener(u,m)}),n=[]},a=function(p,u){return et(void 0,void 0,void 0,function(){return tt(this,function(m){return p.offline=!navigator.onLine,o("online",function(){p.loggerProvider.debug("Network connectivity changed to online."),p.offline=!1,setTimeout(function(){u.flush()},p.flushIntervalMillis)}),o("offline",function(){p.loggerProvider.debug("Network connectivity changed to offline."),p.offline=!0}),[2]})})},l=function(){return et(void 0,void 0,void 0,function(){return tt(this,function(p){return i(),[2]})})};return{name:r,type:e,setup:a,teardown:l}},vj=function(r){yu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(t,n,o){t===void 0&&(t="");var i,a;return arguments.length>2?(i=n,a=o):typeof n=="string"?(i=n,a=void 0):(i=n==null?void 0:n.userId,a=n),hi(this._init(pt(pt({},a),{userId:i,apiKey:t})))},e.prototype._init=function(t){var n,o,i;return et(this,void 0,void 0,function(){var a,l,p,u,m,E=this;return tt(this,function(w){switch(w.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,rj(t.apiKey,t,this)]);case 1:return a=w.sent(),[4,r.prototype._init.call(this,a)];case 2:return w.sent(),this.logBrowserOptions(t),HS(this.config.defaultTracking)?(l=LB(this.config),this.webAttribution=new yB(l,this.config),[4,this.webAttribution.init()]):[3,4];case 3:w.sent(),w.label=4;case 4:return p=Pp(),u=Number.isNaN(Number(p.ampSessionId))?void 0:Number(p.ampSessionId),this.setSessionId((i=(o=(n=t.sessionId)!==null&&n!==void 0?n:u)!==null&&o!==void 0?o:this.config.sessionId)!==null&&i!==void 0?i:Date.now()),m=Lf(t.instanceName),m.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===bS?[3,6]:[4,this.add(pj()).promise];case 5:w.sent(),w.label=6;case 6:return[4,this.add(new rB).promise];case 7:return w.sent(),[4,this.add(new GB).promise];case 8:return w.sent(),[4,this.add(new xB).promise];case 9:return w.sent(),hj(this.config),kB(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(dj()).promise]):[3,11];case 10:w.sent(),w.label=11;case 11:return DB(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(fj()).promise]):[3,13];case 12:w.sent(),w.label=13;case 13:return WS(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(sj(MB(this.config))).promise]):[3,15];case 14:w.sent(),w.label=15;case 15:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 16:return w.sent(),m.eventBridge.setEventReceiver(function(R){E.track(R.eventType,R.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.userId},e.prototype.setUserId=function(t){if(!this.config){this.q.push(this.setUserId.bind(this,t));return}this.config.loggerProvider.debug("function setUserId: ",t),(t!==this.config.userId||t===void 0)&&(this.config.userId=t,CB(t,this.config.instanceName))},e.prototype.getDeviceId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.deviceId},e.prototype.setDeviceId=function(t){if(!this.config){this.q.push(this.setDeviceId.bind(this,t));return}this.config.loggerProvider.debug("function setDeviceId: ",t),this.config.deviceId=t,PB(t,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId($c()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var t;return(t=this.config)===null||t===void 0?void 0:t.sessionId},e.prototype.setSessionId=function(t){var n,o=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,t)),hi(Promise.resolve());if(t===this.config.sessionId)return hi(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",t);var i=this.getSessionId(),a=this.config.lastEventTime,l=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1;this.config.sessionId=t,this.config.lastEventTime=void 0,this.config.pageCounter=0,zS(this.config.defaultTracking)&&(i&&a&&o.push(this.track(ZS,void 0,{device_id:this.previousSessionDeviceId,event_id:++l,session_id:i,time:a+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var p=this.trackCampaignEventIfNeeded(++l,o);return zS(this.config.defaultTracking)&&o.push(this.track(XS,void 0,{event_id:p?++l:l,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,hi(Promise.all(o))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(t){if(!this.config){this.q.push(this.setTransport.bind(this,t));return}this.config.transportProvider=JS(t)},e.prototype.identify=function(t,n){if(xy(t)){var o=t._q;t._q=[],t=kp(new Vc,o)}return n!=null&&n.user_id&&this.setUserId(n.user_id),n!=null&&n.device_id&&this.setDeviceId(n.device_id),r.prototype.identify.call(this,t,n)},e.prototype.groupIdentify=function(t,n,o,i){if(xy(o)){var a=o._q;o._q=[],o=kp(new Vc,a)}return r.prototype.groupIdentify.call(this,t,n,o,i)},e.prototype.revenue=function(t,n){if(xy(t)){var o=t._q;t._q=[],t=kp(new IS,o)}return r.prototype.revenue.call(this,t,n)},e.prototype.trackCampaignEventIfNeeded=function(t,n){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var o=this.webAttribution.generateCampaignEvent(t);return n?n.push(this.track(o).promise):this.track(o),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(t){return et(this,void 0,void 0,function(){var n,o,i;return tt(this,function(a){return n=Date.now(),o=qS(this.config.sessionTimeout,this.config.lastEventTime),i=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),t.event_type!==XS&&t.event_type!==ZS&&(!t.session_id||t.session_id===this.getSessionId())&&(o||i?(this.setSessionId(n),i&&this.config.loggerProvider.log("Created a new session for new campaign.")):o||this.trackCampaignEventIfNeeded()),[2,r.prototype.process.call(this,t)]})})},e.prototype.logBrowserOptions=function(t){try{var n=pt(pt({},t),{apiKey:t.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(n))}catch(o){this.config.loggerProvider.error("Error logging browser config",o)}},e}(X2),Ly=function(){var r=new vj;return{init:un(r.init.bind(r),"init",an(r),sn(r,["config"])),add:un(r.add.bind(r),"add",an(r),sn(r,["config.apiKey","timeline.plugins"])),remove:un(r.remove.bind(r),"remove",an(r),sn(r,["config.apiKey","timeline.plugins"])),track:un(r.track.bind(r),"track",an(r),sn(r,["config.apiKey","timeline.queue.length"])),logEvent:un(r.logEvent.bind(r),"logEvent",an(r),sn(r,["config.apiKey","timeline.queue.length"])),identify:un(r.identify.bind(r),"identify",an(r),sn(r,["config.apiKey","timeline.queue.length"])),groupIdentify:un(r.groupIdentify.bind(r),"groupIdentify",an(r),sn(r,["config.apiKey","timeline.queue.length"])),setGroup:un(r.setGroup.bind(r),"setGroup",an(r),sn(r,["config.apiKey","timeline.queue.length"])),revenue:un(r.revenue.bind(r),"revenue",an(r),sn(r,["config.apiKey","timeline.queue.length"])),flush:un(r.flush.bind(r),"flush",an(r),sn(r,["config.apiKey","timeline.queue.length"])),getUserId:un(r.getUserId.bind(r),"getUserId",an(r),sn(r,["config","config.userId"])),setUserId:un(r.setUserId.bind(r),"setUserId",an(r),sn(r,["config","config.userId"])),getDeviceId:un(r.getDeviceId.bind(r),"getDeviceId",an(r),sn(r,["config","config.deviceId"])),setDeviceId:un(r.setDeviceId.bind(r),"setDeviceId",an(r),sn(r,["config","config.deviceId"])),reset:un(r.reset.bind(r),"reset",an(r),sn(r,["config","config.userId","config.deviceId"])),getSessionId:un(r.getSessionId.bind(r),"getSessionId",an(r),sn(r,["config"])),setSessionId:un(r.setSessionId.bind(r),"setSessionId",an(r),sn(r,["config"])),extendSession:un(r.extendSession.bind(r),"extendSession",an(r),sn(r,["config"])),setOptOut:un(r.setOptOut.bind(r),"setOptOut",an(r),sn(r,["config"])),setTransport:un(r.setTransport.bind(r),"setTransport",an(r),sn(r,["config"]))}};const cn=Ly();var mj=cn.add,gj=cn.extendSession,yj=cn.flush,Uy=cn.getDeviceId,_j=cn.getSessionId,Ej=cn.getUserId,bj=cn.groupIdentify,Sj=cn.identify,tw=cn.init,wj=cn.logEvent,Tj=cn.remove,Aj=cn.reset,Ij=cn.revenue,Oj=cn.setDeviceId,Rj=cn.setGroup,Cj=cn.setOptOut,Pj=cn.setSessionId,xj=cn.setTransport,Nj=cn.setUserId,kj=cn.track;const Dj=Object.freeze(Object.defineProperty({__proto__:null,Identify:Vc,Revenue:IS,Types:j2,add:mj,createInstance:Ly,extendSession:gj,flush:yj,getDeviceId:Uy,getSessionId:_j,getUserId:Ej,groupIdentify:bj,identify:Sj,init:tw,logEvent:wj,remove:Tj,reset:Aj,revenue:Ij,runQueuedFunctions:UB,setDeviceId:Oj,setGroup:Rj,setOptOut:Cj,setSessionId:Pj,setTransport:xj,setUserId:Nj,track:kj},Symbol.toStringTag,{value:"Module"})),Mj={stagingdev:"df25d909914d72868b5feb33dc7992d8",stagingprod:"7351ccfe21b4f05f4fb741d097ba8737"},Lj={plan:{version:"9",branch:"main",source:"extension",versionId:"239daef4-1ee7-4caa-a410-4021d46a1710"},ingestionMetadata:{sourceName:"browser-typescript-ampli",sourceVersion:"2.0.0"}};class Uj{constructor(e){pe(this,"event_type","[Experiment] Exposure");this.event_properties=e,this.event_properties=e}}class Fj{constructor(e){pe(this,"event_type","AccountCTAPressed");this.event_properties=e,this.event_properties=e}}class Bj{constructor(e){pe(this,"event_type","AIFeatureSelected");this.event_properties=e,this.event_properties=e}}class jj{constructor(e){pe(this,"event_type","AuthenticationError");this.event_properties=e,this.event_properties=e}}class Gj{constructor(e){pe(this,"event_type","AvatarMenuPressed");this.event_properties=e,this.event_properties=e}}class $j{constructor(e){pe(this,"event_type","BatchRewriteClosed");this.event_properties=e,this.event_properties=e}}class Vj{constructor(e){pe(this,"event_type","BatchRewriteOpened");this.event_properties=e,this.event_properties=e}}class qj{constructor(e){pe(this,"event_type","BusinessCTAPressed");this.event_properties=e,this.event_properties=e}}class Hj{constructor(e){pe(this,"event_type","ComposeStarted");this.event_properties=e,this.event_properties=e}}class Wj{constructor(e){pe(this,"event_type","ContactSalesPressed");this.event_properties=e,this.event_properties=e}}class zj{constructor(e){pe(this,"event_type","ContentPasted");this.event_properties=e,this.event_properties=e}}class Kj{constructor(e){pe(this,"event_type","cookieChange");this.event_properties=e,this.event_properties=e}}class Yj{constructor(e){pe(this,"event_type","DebugGetConfigsEnded");this.event_properties=e,this.event_properties=e}}class Qj{constructor(e){pe(this,"event_type","DebugGetConfigsFailed");this.event_properties=e,this.event_properties=e}}class Xj{constructor(e){pe(this,"event_type","DebugGetConfigsStarted");this.event_properties=e,this.event_properties=e}}class Zj{constructor(e){pe(this,"event_type","DebugUpdateHandlerErrorCaught");this.event_properties=e,this.event_properties=e}}class Jj{constructor(e){pe(this,"event_type","DocumentImportError");this.event_properties=e,this.event_properties=e}}class eG{constructor(e){pe(this,"event_type","DocumentImportStarted");this.event_properties=e,this.event_properties=e}}class tG{constructor(e){pe(this,"event_type","ExperimentClientCreationFailed");this.event_properties=e,this.event_properties=e}}class rG{constructor(e){pe(this,"event_type","ExperimentClientFetchVariantsFailed");this.event_properties=e,this.event_properties=e}}class nG{constructor(e){pe(this,"event_type","ExtensionAlive");this.event_properties=e,this.event_properties=e}}class iG{constructor(e){pe(this,"event_type","ExtensionChange");this.event_properties=e,this.event_properties=e}}class oG{constructor(e){pe(this,"event_type","ExtensionInWebsiteEnabled");this.event_properties=e,this.event_properties=e}}class aG{constructor(e){pe(this,"event_type","ExtensionInWebsiteSuspended");this.event_properties=e,this.event_properties=e}}class sG{constructor(e){pe(this,"event_type","ExtensionNotificationShown");this.event_properties=e,this.event_properties=e}}class uG{constructor(e){pe(this,"event_type","ExtensionPanelClosed");this.event_properties=e,this.event_properties=e}}class cG{constructor(e){pe(this,"event_type","ExtensionPanelOpened");this.event_properties=e,this.event_properties=e}}class lG{constructor(e){pe(this,"event_type","ExtensionPressed");this.event_properties=e,this.event_properties=e}}class fG{constructor(e){pe(this,"event_type","ExtensionStripDismissed");this.event_properties=e,this.event_properties=e}}class dG{constructor(e){pe(this,"event_type","ExtensionStripShown");this.event_properties=e,this.event_properties=e}}class hG{constructor(e){pe(this,"event_type","FeatureInWebsiteEnabled");this.event_properties=e,this.event_properties=e}}class pG{constructor(e){pe(this,"event_type","FeatureInWebsiteSuspended");this.event_properties=e,this.event_properties=e}}class vG{constructor(e){pe(this,"event_type","FeatureModalClosed");this.event_properties=e,this.event_properties=e}}class mG{constructor(e){pe(this,"event_type","FeatureModalOpened");this.event_properties=e,this.event_properties=e}}class gG{constructor(e){pe(this,"event_type","FullSummaryCTAPressed");this.event_properties=e,this.event_properties=e}}class yG{constructor(e){pe(this,"event_type","HelpCTAPressed");this.event_properties=e,this.event_properties=e}}class _G{constructor(e){pe(this,"event_type","InjectedToTabs");this.event_properties=e,this.event_properties=e}}class EG{constructor(e){pe(this,"event_type","InjectionToTabsStarted");this.event_properties=e,this.event_properties=e}}class bG{constructor(e){pe(this,"event_type","InstallSequenceFailed");this.event_properties=e,this.event_properties=e}}class SG{constructor(e){pe(this,"event_type","InstallSequenceStarted");this.event_properties=e,this.event_properties=e}}class wG{constructor(e){pe(this,"event_type","LoginCTAPressed");this.event_properties=e,this.event_properties=e}}class TG{constructor(e){pe(this,"event_type","LogoutCTAPressed");this.event_properties=e,this.event_properties=e}}class AG{constructor(e){pe(this,"event_type","ModalCTAPressed");this.event_properties=e,this.event_properties=e}}class IG{constructor(e){pe(this,"event_type","ModalEntered");this.event_properties=e,this.event_properties=e}}class OG{constructor(e){pe(this,"event_type","ModalExited");this.event_properties=e,this.event_properties=e}}class RG{constructor(e){pe(this,"event_type","OnboardingRoutineStarted");this.event_properties=e,this.event_properties=e}}class CG{constructor(e){pe(this,"event_type","OpenInWebappCTAPressed");this.event_properties=e,this.event_properties=e}}class PG{constructor(e){pe(this,"event_type","PlatformCTAPressed");this.event_properties=e,this.event_properties=e}}class xG{constructor(e){pe(this,"event_type","PremiumCTAPressed");this.event_properties=e,this.event_properties=e}}class NG{constructor(e){pe(this,"event_type","QueryResultCopied");this.event_properties=e,this.event_properties=e}}class kG{constructor(e){pe(this,"event_type","QueryResultError");this.event_properties=e,this.event_properties=e}}class DG{constructor(e){pe(this,"event_type","QueryResultFeedbackSubmitted");this.event_properties=e,this.event_properties=e}}class MG{constructor(e){pe(this,"event_type","QueryResultRetrieved");this.event_properties=e,this.event_properties=e}}class LG{constructor(e){pe(this,"event_type","QueryResultsAggregated");this.event_properties=e,this.event_properties=e}}class UG{constructor(e){pe(this,"event_type","QuerySubmitted");this.event_properties=e,this.event_properties=e}}class FG{constructor(e){pe(this,"event_type","QuerySuggestionListExpandedOrCollapsed");this.event_properties=e,this.event_properties=e}}class BG{constructor(e){pe(this,"event_type","QuotaLimitReached");this.event_properties=e,this.event_properties=e}}class jG{constructor(e){pe(this,"event_type","ReadPanelCTAPressed");this.event_properties=e,this.event_properties=e}}class GG{constructor(e){pe(this,"event_type","RecommendationClosed");this.event_properties=e,this.event_properties=e}}class $G{constructor(e){pe(this,"event_type","RecommendationIgnored");this.event_properties=e,this.event_properties=e}}class VG{constructor(e){pe(this,"event_type","RecommendationOpened");this.event_properties=e,this.event_properties=e}}class qG{constructor(e){pe(this,"event_type","RecommendationSuggestionSelected");this.event_properties=e,this.event_properties=e}}class HG{constructor(e){pe(this,"event_type","RequestCTAPressed");this.event_properties=e,this.event_properties=e}}class WG{constructor(e){pe(this,"event_type","RewriteActivated");this.event_properties=e,this.event_properties=e}}class zG{constructor(e){pe(this,"event_type","RewriteClosed");this.event_properties=e,this.event_properties=e}}class KG{constructor(e){pe(this,"event_type","RewriteError");this.event_properties=e,this.event_properties=e}}class YG{constructor(e){pe(this,"event_type","RewriteOpened");this.event_properties=e,this.event_properties=e}}class QG{constructor(e){pe(this,"event_type","RewriteSuggestionCopied");this.event_properties=e,this.event_properties=e}}class XG{constructor(e){pe(this,"event_type","RewriteSuggestionSelected");this.event_properties=e,this.event_properties=e}}class ZG{constructor(e){pe(this,"event_type","SignInLinkPressed");this.event_properties=e,this.event_properties=e}}class JG{constructor(e){pe(this,"event_type","SigninModalShown");this.event_properties=e,this.event_properties=e}}class e${constructor(e){pe(this,"event_type","SignupCTAPressed");this.event_properties=e,this.event_properties=e}}class t${constructor(e){pe(this,"event_type","SpiceCardClosed");this.event_properties=e,this.event_properties=e}}class r${constructor(e){pe(this,"event_type","SpiceCardOpened");this.event_properties=e,this.event_properties=e}}class n${constructor(e){pe(this,"event_type","SpiceError");this.event_properties=e,this.event_properties=e}}class i${constructor(e){pe(this,"event_type","SpicesCaretDismissed");this.event_properties=e,this.event_properties=e}}class o${constructor(e){pe(this,"event_type","SpicesCaretShown");this.event_properties=e,this.event_properties=e}}class a${constructor(e){pe(this,"event_type","SpicesFeedbackButtonPressed");this.event_properties=e,this.event_properties=e}}class s${constructor(e){pe(this,"event_type","SpicesMenuClosed");this.event_properties=e,this.event_properties=e}}class u${constructor(e){pe(this,"event_type","SpicesMenuOpened");this.event_properties=e,this.event_properties=e}}class c${constructor(e){pe(this,"event_type","SpicesSessionEnded");this.event_properties=e,this.event_properties=e}}class l${constructor(e){pe(this,"event_type","SpicesSessionStarted");this.event_properties=e,this.event_properties=e}}class f${constructor(e){pe(this,"event_type","SpiceSuggestionCopied");this.event_properties=e,this.event_properties=e}}class d${constructor(e){pe(this,"event_type","SpiceSuggestionSelected");this.event_properties=e,this.event_properties=e}}class h${constructor(e){pe(this,"event_type","SpiceSuggestionsGenerated");this.event_properties=e,this.event_properties=e}}class p${constructor(e){pe(this,"event_type","SummaryDocumentClosed");this.event_properties=e,this.event_properties=e}}class v${constructor(e){pe(this,"event_type","SummaryDocumentExported");this.event_properties=e,this.event_properties=e}}class m${constructor(e){pe(this,"event_type","SummaryDocumentRetrieved");this.event_properties=e,this.event_properties=e}}class g${constructor(e){pe(this,"event_type","SummaryItemCopied");this.event_properties=e,this.event_properties=e}}class y${constructor(e){pe(this,"event_type","SummaryItemError");this.event_properties=e,this.event_properties=e}}class _${constructor(e){pe(this,"event_type","SummaryItemHovered");this.event_properties=e,this.event_properties=e}}class E${constructor(e){pe(this,"event_type","SummaryItemPressed");this.event_properties=e,this.event_properties=e}}class b${constructor(e){pe(this,"event_type","SummaryItemRetrieved");this.event_properties=e,this.event_properties=e}}class S${constructor(e){pe(this,"event_type","TextGenAttributionLinkPressed");this.event_properties=e,this.event_properties=e}}class w${constructor(e){pe(this,"event_type","TextGenAttributionShown");this.event_properties=e,this.event_properties=e}}class T${constructor(e){pe(this,"event_type","UpdateSequenceEnded");this.event_properties=e,this.event_properties=e}}class A${constructor(e){pe(this,"event_type","UpdateSequenceStarted");this.event_properties=e,this.event_properties=e}}class I${constructor(e){pe(this,"event_type","WelcomePageEntered");this.event_properties=e,this.event_properties=e}}class O${constructor(e){pe(this,"event_type","WordtuneUpdateFailed");this.event_properties=e,this.event_properties=e}}class R${constructor(e){pe(this,"event_type","writingMonitor");this.event_properties=e,this.event_properties=e}}const Ff=()=>({promise:Promise.resolve()});class C${constructor(){pe(this,"disabled",!1);pe(this,"amplitude")}get client(){return this.isInitializedAndEnabled(),this.amplitude}get isLoaded(){return this.amplitude!=null}isInitializedAndEnabled(){return this.amplitude?!this.disabled:(console.error("ERROR: Ampli is not yet initialized. Have you called ampli.load() on app start?"),!1)}load(e){if(this.disabled=e.disabled??!1,this.amplitude)return console.warn("WARNING: Ampli is already intialized. Ampli.load() should be called once at application startup."),Ff();let t=null;if(e.client&&"apiKey"in e.client?t=e.client.apiKey:"environment"in e&&(t=Mj[e.environment]),e.client&&"instance"in e.client)this.amplitude=e.client.instance;else if(t){this.amplitude=Ly();const n=e.client&&"configuration"in e.client?e.client.configuration:{};return this.amplitude.init(t,void 0,{...Lj,...n})}else console.error("ERROR: ampli.load() requires 'environment', 'client.apiKey', or 'client.instance'");return Ff()}identify(e,t,n){if(!this.isInitializedAndEnabled())return Ff();e&&(n={...n,user_id:e});const o=new Vc,i=t;if(i!=null)for(const[a,l]of Object.entries(i))o.set(a,l);return this.amplitude.identify(o,n)}flush(){return this.isInitializedAndEnabled()?this.amplitude.flush():Ff()}track(e,t){return this.isInitializedAndEnabled()?this.amplitude.track(e,void 0,t):Ff()}experimentExposure(e,t){return this.track(new Uj(e),t)}accountCtaPressed(e,t){return this.track(new Fj(e),t)}aiFeatureSelected(e,t){return this.track(new Bj(e),t)}authenticationError(e,t){return this.track(new jj(e),t)}avatarMenuPressed(e,t){return this.track(new Gj(e),t)}batchRewriteClosed(e,t){return this.track(new $j(e),t)}batchRewriteOpened(e,t){return this.track(new Vj(e),t)}businessCtaPressed(e,t){return this.track(new qj(e),t)}composeStarted(e,t){return this.track(new Hj(e),t)}contactSalesPressed(e,t){return this.track(new Wj(e),t)}contentPasted(e,t){return this.track(new zj(e),t)}cookieChange(e,t){return this.track(new Kj(e),t)}debugGetConfigsEnded(e,t){return this.track(new Yj(e),t)}debugGetConfigsFailed(e,t){return this.track(new Qj(e),t)}debugGetConfigsStarted(e,t){return this.track(new Xj(e),t)}debugUpdateHandlerErrorCaught(e,t){return this.track(new Zj(e),t)}documentImportError(e,t){return this.track(new Jj(e),t)}documentImportStarted(e,t){return this.track(new eG(e),t)}experimentClientCreationFailed(e,t){return this.track(new tG(e),t)}experimentClientFetchVariantsFailed(e,t){return this.track(new rG(e),t)}extensionAlive(e,t){return this.track(new nG(e),t)}extensionChange(e,t){return this.track(new iG(e),t)}extensionInWebsiteEnabled(e,t){return this.track(new oG(e),t)}extensionInWebsiteSuspended(e,t){return this.track(new aG(e),t)}extensionNotificationShown(e,t){return this.track(new sG(e),t)}extensionPanelClosed(e,t){return this.track(new uG(e),t)}extensionPanelOpened(e,t){return this.track(new cG(e),t)}extensionPressed(e,t){return this.track(new lG(e),t)}extensionStripDismissed(e,t){return this.track(new fG(e),t)}extensionStripShown(e,t){return this.track(new dG(e),t)}featureInWebsiteEnabled(e,t){return this.track(new hG(e),t)}featureInWebsiteSuspended(e,t){return this.track(new pG(e),t)}featureModalClosed(e,t){return this.track(new vG(e),t)}featureModalOpened(e,t){return this.track(new mG(e),t)}fullSummaryCtaPressed(e,t){return this.track(new gG(e),t)}helpCtaPressed(e,t){return this.track(new yG(e),t)}injectedToTabs(e,t){return this.track(new _G(e),t)}injectionToTabsStarted(e,t){return this.track(new EG(e),t)}installSequenceFailed(e,t){return this.track(new bG(e),t)}installSequenceStarted(e,t){return this.track(new SG(e),t)}loginCtaPressed(e,t){return this.track(new wG(e),t)}logoutCtaPressed(e,t){return this.track(new TG(e),t)}modalCtaPressed(e,t){return this.track(new AG(e),t)}modalEntered(e,t){return this.track(new IG(e),t)}modalExited(e,t){return this.track(new OG(e),t)}onboardingRoutineStarted(e,t){return this.track(new RG(e),t)}openInWebappCtaPressed(e,t){return this.track(new CG(e),t)}platformCtaPressed(e,t){return this.track(new PG(e),t)}premiumCtaPressed(e,t){return this.track(new xG(e),t)}queryResultCopied(e,t){return this.track(new NG(e),t)}queryResultError(e,t){return this.track(new kG(e),t)}queryResultFeedbackSubmitted(e,t){return this.track(new DG(e),t)}queryResultRetrieved(e,t){return this.track(new MG(e),t)}queryResultsAggregated(e,t){return this.track(new LG(e),t)}querySubmitted(e,t){return this.track(new UG(e),t)}querySuggestionListExpandedOrCollapsed(e,t){return this.track(new FG(e),t)}quotaLimitReached(e,t){return this.track(new BG(e),t)}readPanelCtaPressed(e,t){return this.track(new jG(e),t)}recommendationClosed(e,t){return this.track(new GG(e),t)}recommendationIgnored(e,t){return this.track(new $G(e),t)}recommendationOpened(e,t){return this.track(new VG(e),t)}recommendationSuggestionSelected(e,t){return this.track(new qG(e),t)}requestCtaPressed(e,t){return this.track(new HG(e),t)}rewriteActivated(e,t){return this.track(new WG(e),t)}rewriteClosed(e,t){return this.track(new zG(e),t)}rewriteError(e,t){return this.track(new KG(e),t)}rewriteOpened(e,t){return this.track(new YG(e),t)}rewriteSuggestionCopied(e,t){return this.track(new QG(e),t)}rewriteSuggestionSelected(e,t){return this.track(new XG(e),t)}signInLinkPressed(e,t){return this.track(new ZG(e),t)}signinModalShown(e,t){return this.track(new JG(e),t)}signupCtaPressed(e,t){return this.track(new e$(e),t)}spiceCardClosed(e,t){return this.track(new t$(e),t)}spiceCardOpened(e,t){return this.track(new r$(e),t)}spiceError(e,t){return this.track(new n$(e),t)}spicesCaretDismissed(e,t){return this.track(new i$(e),t)}spicesCaretShown(e,t){return this.track(new o$(e),t)}spicesFeedbackButtonPressed(e,t){return this.track(new a$(e),t)}spicesMenuClosed(e,t){return this.track(new s$(e),t)}spicesMenuOpened(e,t){return this.track(new u$(e),t)}spicesSessionEnded(e,t){return this.track(new c$(e),t)}spicesSessionStarted(e,t){return this.track(new l$(e),t)}spiceSuggestionCopied(e,t){return this.track(new f$(e),t)}spiceSuggestionSelected(e,t){return this.track(new d$(e),t)}spiceSuggestionsGenerated(e,t){return this.track(new h$(e),t)}summaryDocumentClosed(e,t){return this.track(new p$(e),t)}summaryDocumentExported(e,t){return this.track(new v$(e),t)}summaryDocumentRetrieved(e,t){return this.track(new m$(e),t)}summaryItemCopied(e,t){return this.track(new g$(e),t)}summaryItemError(e,t){return this.track(new y$(e),t)}summaryItemHovered(e,t){return this.track(new _$(e),t)}summaryItemPressed(e,t){return this.track(new E$(e),t)}summaryItemRetrieved(e,t){return this.track(new b$(e),t)}textGenAttributionLinkPressed(e,t){return this.track(new S$(e),t)}textGenAttributionShown(e,t){return this.track(new w$(e),t)}updateSequenceEnded(e,t){return this.track(new T$(e),t)}updateSequenceStarted(e,t){return this.track(new A$(e),t)}welcomePageEntered(e,t){return this.track(new I$(e),t)}wordtuneUpdateFailed(e,t){return this.track(new O$(e),t)}writingMonitor(e,t){return this.track(new R$(e),t)}}const hs=new C$,P$=Qn("analyticsService"),rw="__wtDeviceId",x$=`.${ES}`,N$="/",k$=!0,D$=Date.now()+1e3*60*60*24*365,M$=async()=>{try{const r=await Gt.cookies.get({name:rw,url:wy});return r==null?void 0:r.value}catch(r){P$.emitLog({error:r,body:"Failed to getDeviceIdFromCookie",severityNumber:bt.ERROR})}},L$=async r=>{if(r)return await Gt.cookies.set({name:rw,url:wy,domain:x$,value:r,path:N$,secure:k$,expirationDate:D$}),r};class U${constructor(){pe(this,"initPromise",null);pe(this,"logger",null);pe(this,"onTrackEventMessage",e=>{const t=e,{eventType:n,properties:o,options:i}=t;return this.trackEvent(n,o,i),!0})}async init({userId:e,options:t}){return this.initPromise||(this.initPromise=(async()=>{var n;try{const o=await M$();await tw("64be6fdb8aeb001529c8c2c9af7028a0",e,{...t,defaultTracking:!1,deviceId:o,identityStorage:"localStorage"}).promise,await L$(Uy()),await hs.load({client:{instance:Dj}}).promise}catch(o){(n=this.logger)==null||n.emitLog({error:o,body:"AnalyticsService init failed",severityNumber:bt.ERROR})}})()),this.initPromise}setLogger(e){this.logger=e}async trackEvent(e,t,n){var o;try{await hs[e]({app:"extension",currentVersion:O0(),extensionGeneration:"2",...t},n).promise}catch(i){throw(o=this.logger)==null||o.emitLog({error:i,body:`error when tracking event: ${e}`,severityNumber:bt.ERROR}),i}}async setOrigin(e){const t=hs.client.getUserId();return hs.identify(t,{origin:e}).promise}setDeviceId(e){hs.client.setDeviceId(e)}setUserId(e){hs.identify(e)}identifyAsExtensionUser(){const e=this.getUserId();return hs.identify(e,{currentVersion:Gt.runtime.getManifest().version,isExtensionUser:!0})}getUserId(){return hs.client.getUserId()}getDeviceId(){return Uy()}}const Pr=new U$,F$="GET_USER",B$="auth/sync-error",j$="auth/internal-error",G$="LOGOUT_USER";function Fy(r){this.message=r}Fy.prototype=new Error,Fy.prototype.name="InvalidCharacterError";var nw=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(r){var e=String(r).replace(/=+$/,"");if(e.length%4==1)throw new Fy("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,o=0,i=0,a="";n=e.charAt(i++);~n&&(t=o%4?64*t+n:n,o++%4)?a+=String.fromCharCode(255&t>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function $$(r){var e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(nw(t).replace(/(.)/g,function(n,o){var i=o.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return nw(e)}}function Lp(r){this.message=r}function By(r,e){if(typeof r!="string")throw new Lp("Invalid token specified");var t=(e=e||{}).header===!0?0:1;try{return JSON.parse($$(r.split(".")[t]))}catch(n){throw new Lp("Invalid token specified: "+n.message)}}Lp.prototype=new Error,Lp.prototype.name="InvalidTokenError";var iw="firebase-auth",ow="firebase-token",V$="http://127.0.0.1:9099",q$="apple.com",H$="oidc.workos",W$=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),z$="no_organization_match_domain",K$="domain_requires_sso",Y$="sso_email_domain",Q$="rate_limit",X$="authSdk/invalid-jwt",Z$="authSdk/missing-id-token",aw="authSdk/invalid-provider-info",J$="authSdk/invalid-credentials",sw="authSdk/empty-firebase-response",eV="authSdk/identity-failure",tV="identity/no-org-match-domain",rV="identity/domain-requires-sso",nV="identity/sso-email-domain",iV="identity/magic-link-rate-limit",to=function(r){W$(e,r);function e(t){var n=t===void 0?{}:t,o=n.code,i=n.message,a=r.call(this,i)||this;return a.code=o,a}return e}(Error),jy=function(r){var e;if(!r)throw new to({code:Z$,message:"authHeaders: missing idToken"});return e={},e[iw]="true",e[ow]=r,e},uw=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},cw=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Up=function(){function r(e,t){this._firebaseUser=t,this.decodedIdToken=e||{},this.experiment=e.experiment,this.isAuthenticated=!0,this.loginUid=e.sub,this.planExpiration=e.plan_expiration,this.planType=e.plan_type,this.quotaCycle=e.quota_cycle,this.quotaLimit=e.quota_limit,this.readPlanExpiration=e.read_plan_type_expiration,this.readPlanType=e.read_plan_type,this.scopes=e.scopes,this.traceless=e.traceless,this.wordtuneUserId=e.wordtune_user_id}return Object.defineProperty(r.prototype,"isRegistered",{get:function(){var e=this.decodedIdToken.firebase,t=e===void 0?{}:e,n=t.identities,o=n===void 0?{}:n;return Object.keys(o).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"displayName",{get:function(){var e;return(e=this._firebaseUser)===null||e===void 0?void 0:e.displayName},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"email",{get:function(){var e;return(e=this._firebaseUser)===null||e===void 0?void 0:e.email},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"phoneNumber",{get:function(){var e;return(e=this._firebaseUser)===null||e===void 0?void 0:e.phoneNumber},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"photoURL",{get:function(){var e;return(e=this._firebaseUser)===null||e===void 0?void 0:e.photoURL},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"providerId",{get:function(){var e;return(e=this._firebaseUser)===null||e===void 0?void 0:e.providerId},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{displayName:this.displayName,email:this.email,experiment:this.experiment,loginUid:this.loginUid,phoneNumber:this.phoneNumber,photoURL:this.photoURL,planExpiration:this.planExpiration,planType:this.planType,providerId:this.providerId,quotaCycle:this.quotaCycle,quotaLimit:this.quotaLimit,readPlanExpiration:this.readPlanExpiration,readPlanType:this.readPlanType,scopes:this.scopes,traceless:this.traceless,wordtuneUserId:this.wordtuneUserId}},r.prototype.getAuthHeaders=function(){return uw(this,void 0,void 0,function(){var e;return cw(this,function(t){switch(t.label){case 0:return[4,this.getIdToken()];case 1:return e=t.sent(),e?[2,jy(e)]:[2,{}]}})})},r.isUserAnonymousByJwt=function(e){var t;if(!e)return!1;try{var n=By(e);return Object.keys(((t=n.firebase)===null||t===void 0?void 0:t.identities)||{}).length===0}catch{return!1}},r.getUserByJwt=function(e,t){if(!e)return null;try{var n=By(e);return new r(n,t)}catch(o){throw console.error(o),new to({message:"Failed to decode JWT token, ".concat(o),code:X$})}},r.prototype.getIdToken=function(e){var t;return e===void 0&&(e=!1),uw(this,void 0,void 0,function(){var n;return cw(this,function(o){switch(o.label){case 0:return[4,(t=this._firebaseUser)===null||t===void 0?void 0:t.getIdToken(e)];case 1:return n=o.sent(),n&&(this.decodedIdToken=By(n)),[2,n]}})})},r}(),oV=bt.DEBUG,aV=bt.INFO,sV=bt.WARN,uV=bt.ERROR,cV=function(){function r(e,t){this.instance=e,this.identifier=t}return r.prototype.log=function(e){var t;(t=this.instance)===null||t===void 0||t.getLogger(this.identifier).emit(e)},r.prototype.info=function(e,t){this.log({attributes:e,body:t,severityNumber:aV})},r.prototype.debug=function(e,t){this.log({attributes:e,body:t,severityNumber:oV})},r.prototype.warning=function(e,t,n){this.log({attributes:e,error:t,body:n,severityNumber:sV})},r.prototype.error=function(e,t,n){this.log({attributes:e,error:t,body:n,severityNumber:uV})},r}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let o=r.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},lV=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const o=r[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const i=r[t++];e[n++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){const i=r[t++],a=r[t++],l=r[t++],p=((o&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(p>>10)),e[n++]=String.fromCharCode(56320+(p&1023))}else{const i=r[t++],a=r[t++];e[n++]=String.fromCharCode((o&15)<<12|(i&63)<<6|a&63)}}return e.join("")},fw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<r.length;o+=3){const i=r[o],a=o+1<r.length,l=a?r[o+1]:0,p=o+2<r.length,u=p?r[o+2]:0,m=i>>2,E=(i&3)<<4|l>>4;let w=(l&15)<<2|u>>6,R=u&63;p||(R=64,a||(w=64)),n.push(t[m],t[E],t[w],t[R])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(lw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):lV(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<r.length;){const i=t[r.charAt(o++)],l=o<r.length?t[r.charAt(o)]:0;++o;const u=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,i==null||l==null||u==null||E==null)throw new fV;const w=i<<2|l>>4;if(n.push(w),u!==64){const R=l<<4&240|u>>2;if(n.push(R),E!==64){const S=u<<6&192|E;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class fV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dV=function(r){const e=lw(r);return fw.encodeByteArray(e,!0)},dw=function(r){return dV(r).replace(/\./g,"")},hw=function(r){try{return fw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=()=>hV().__FIREBASE_DEFAULTS__,vV=()=>{if(typeof process>"u"||typeof process.env>"u")return;const r=process.env.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},mV=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&hw(r[1]);return e&&JSON.parse(e)},pw=()=>{try{return pV()||vV()||mV()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},gV=r=>{var e,t;return(t=(e=pw())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},vw=()=>{var r;return(r=pw())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _V(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Co())}function EV(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function bV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SV(){try{return typeof indexedDB=="object"}catch{return!1}}function wV(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var i;e(((i=o.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="FirebaseError";class ps extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=TV,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bf.prototype.create)}}class Bf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},o=`${this.service}/${e}`,i=this.errors[e],a=i?AV(i,n):"Error",l=`${this.serviceName}: ${a} (${o}).`;return new ps(o,l,n)}}function AV(r,e){return r.replace(IV,(t,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const IV=/\{\$([^}]+)}/g;function Fp(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const o of t){if(!n.includes(o))return!1;const i=r[o],a=e[o];if(mw(i)&&mw(a)){if(!Fp(i,a))return!1}else if(i!==a)return!1}for(const o of n)if(!t.includes(o))return!1;return!0}function mw(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function jf(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[o,i]=n.split("=");e[decodeURIComponent(o)]=decodeURIComponent(i)}}),e}function Gf(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function OV(r,e){const t=new RV(r,e);return t.subscribe.bind(t)}class RV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let o;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");CV(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:n},o.next===void 0&&(o.next=$y),o.error===void 0&&(o.error=$y),o.complete===void 0&&(o.complete=$y);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CV(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $y(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(r){return r&&r._delegate?r._delegate:r}class Hc{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new yV;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(o)return null;throw i}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NV(e))try{this.getOrInitializeService({instanceIdentifier:Eu})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:o});n.resolve(i)}catch{}}}}clearInstance(e=Eu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eu){return this.instances.has(e)}getOptions(e=Eu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&a.resolve(o)}return o}onInit(e,t){var n;const o=this.normalizeInstanceIdentifier(t),i=(n=this.onInitCallbacks.get(o))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(o,i);const a=this.instances.get(o);return a&&e(a,o),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:xV(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Eu){return this.component?this.component.multipleInstances?e:Eu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xV(r){return r===Eu?void 0:r}function NV(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(hr||(hr={}));const DV={debug:hr.DEBUG,verbose:hr.VERBOSE,info:hr.INFO,warn:hr.WARN,error:hr.ERROR,silent:hr.SILENT},MV=hr.INFO,LV={[hr.DEBUG]:"log",[hr.VERBOSE]:"log",[hr.INFO]:"info",[hr.WARN]:"warn",[hr.ERROR]:"error"},UV=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),o=LV[e];if(o)console[o](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gw{constructor(e){this.name=e,this._logLevel=MV,this._logHandler=UV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in hr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,hr.DEBUG,...e),this._logHandler(this,hr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,hr.VERBOSE,...e),this._logHandler(this,hr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,hr.INFO,...e),this._logHandler(this,hr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,hr.WARN,...e),this._logHandler(this,hr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,hr.ERROR,...e),this._logHandler(this,hr.ERROR,...e)}}const FV=(r,e)=>e.some(t=>r instanceof t);let yw,_w;function BV(){return yw||(yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jV(){return _w||(_w=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ew=new WeakMap,Vy=new WeakMap,bw=new WeakMap,qy=new WeakMap,Hy=new WeakMap;function GV(r){const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("success",i),r.removeEventListener("error",a)},i=()=>{t(vs(r.result)),o()},a=()=>{n(r.error),o()};r.addEventListener("success",i),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Ew.set(t,r)}).catch(()=>{}),Hy.set(e,r),e}function $V(r){if(Vy.has(r))return;const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",a),r.removeEventListener("abort",a)},i=()=>{t(),o()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",i),r.addEventListener("error",a),r.addEventListener("abort",a)});Vy.set(r,e)}let Wy={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Vy.get(r);if(e==="objectStoreNames")return r.objectStoreNames||bw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function VV(r){Wy=r(Wy)}function qV(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(zy(this),e,...t);return bw.set(n,e.sort?e.sort():[e]),vs(n)}:jV().includes(r)?function(...e){return r.apply(zy(this),e),vs(Ew.get(this))}:function(...e){return vs(r.apply(zy(this),e))}}function HV(r){return typeof r=="function"?qV(r):(r instanceof IDBTransaction&&$V(r),FV(r,BV())?new Proxy(r,Wy):r)}function vs(r){if(r instanceof IDBRequest)return GV(r);if(qy.has(r))return qy.get(r);const e=HV(r);return e!==r&&(qy.set(r,e),Hy.set(e,r)),e}const zy=r=>Hy.get(r);function WV(r,e,{blocked:t,upgrade:n,blocking:o,terminated:i}={}){const a=indexedDB.open(r,e),l=vs(a);return n&&a.addEventListener("upgradeneeded",p=>{n(vs(a.result),p.oldVersion,p.newVersion,vs(a.transaction),p)}),t&&a.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),l.then(p=>{i&&p.addEventListener("close",()=>i()),o&&p.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const zV=["get","getKey","getAll","getAllKeys","count"],KV=["put","add","delete","clear"],Ky=new Map;function Sw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ky.get(e))return Ky.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,o=KV.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||zV.includes(t)))return;const i=async function(a,...l){const p=this.transaction(a,o?"readwrite":"readonly");let u=p.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),o&&p.done]))[0]};return Ky.set(e,i),i}VV(r=>({...r,get:(e,t,n)=>Sw(e,t)||r.get(e,t,n),has:(e,t)=>!!Sw(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QV(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function QV(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yy="@firebase/app",ww="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new gw("@firebase/app"),XV="@firebase/app-compat",ZV="@firebase/analytics-compat",JV="@firebase/analytics",e3="@firebase/app-check-compat",t3="@firebase/app-check",r3="@firebase/auth",n3="@firebase/auth-compat",i3="@firebase/database",o3="@firebase/database-compat",a3="@firebase/functions",s3="@firebase/functions-compat",u3="@firebase/installations",c3="@firebase/installations-compat",l3="@firebase/messaging",f3="@firebase/messaging-compat",d3="@firebase/performance",h3="@firebase/performance-compat",p3="@firebase/remote-config",v3="@firebase/remote-config-compat",m3="@firebase/storage",g3="@firebase/storage-compat",y3="@firebase/firestore",_3="@firebase/vertexai-preview",E3="@firebase/firestore-compat",b3="firebase",S3="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="[DEFAULT]",w3={[Yy]:"fire-core",[XV]:"fire-core-compat",[JV]:"fire-analytics",[ZV]:"fire-analytics-compat",[t3]:"fire-app-check",[e3]:"fire-app-check-compat",[r3]:"fire-auth",[n3]:"fire-auth-compat",[i3]:"fire-rtdb",[o3]:"fire-rtdb-compat",[a3]:"fire-fn",[s3]:"fire-fn-compat",[u3]:"fire-iid",[c3]:"fire-iid-compat",[l3]:"fire-fcm",[f3]:"fire-fcm-compat",[d3]:"fire-perf",[h3]:"fire-perf-compat",[p3]:"fire-rc",[v3]:"fire-rc-compat",[m3]:"fire-gcs",[g3]:"fire-gcs-compat",[y3]:"fire-fst",[E3]:"fire-fst-compat",[_3]:"fire-vertex","fire-js":"fire-js",[b3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=new Map,T3=new Map,Xy=new Map;function Tw(r,e){try{r.container.addComponent(e)}catch(t){ba.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function $f(r){const e=r.name;if(Xy.has(e))return ba.debug(`There were multiple attempts to register component ${e}.`),!1;Xy.set(e,r);for(const t of Bp.values())Tw(t,r);for(const t of T3.values())Tw(t,r);return!0}function Aw(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ro(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Bf("app","Firebase",A3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Hc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=S3;function Iw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Qy,automaticDataCollectionEnabled:!1},e),o=n.name;if(typeof o!="string"||!o)throw ms.create("bad-app-name",{appName:String(o)});if(t||(t=vw()),!t)throw ms.create("no-options");const i=Bp.get(o);if(i){if(Fp(t,i.options)&&Fp(n,i.config))return i;throw ms.create("duplicate-app",{appName:o})}const a=new kV(o);for(const p of Xy.values())a.addComponent(p);const l=new I3(t,n,a);return Bp.set(o,l),l}function O3(r=Qy){const e=Bp.get(r);if(!e&&r===Qy&&vw())return Iw();if(!e)throw ms.create("no-app",{appName:r});return e}function Wc(r,e,t){var n;let o=(n=w3[r])!==null&&n!==void 0?n:r;t&&(o+=`-${t}`);const i=o.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${o}" with version "${e}":`];i&&l.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ba.warn(l.join(" "));return}$f(new Hc(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="firebase-heartbeat-database",C3=1,Vf="firebase-heartbeat-store";let Jy=null;function Ow(){return Jy||(Jy=WV(R3,C3,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Vf)}catch(t){console.warn(t)}}}}).catch(r=>{throw ms.create("idb-open",{originalErrorMessage:r.message})})),Jy}async function P3(r){try{const t=(await Ow()).transaction(Vf),n=await t.objectStore(Vf).get(Cw(r));return await t.done,n}catch(e){if(e instanceof ps)ba.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ba.warn(t.message)}}}async function Rw(r,e){try{const n=(await Ow()).transaction(Vf,"readwrite");await n.objectStore(Vf).put(e,Cw(r)),await n.done}catch(t){if(t instanceof ps)ba.warn(t.message);else{const n=ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ba.warn(n.message)}}}function Cw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=1024,N3=30*24*60*60*1e3;class k3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new M3(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Pw();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const p=new Date(l.date).valueOf();return Date.now()-p<=N3}),this._storage.overwrite(this._heartbeatsCache))}catch(o){ba.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Pw(),{heartbeatsToSend:n,unsentEntries:o}=D3(this._heartbeatsCache.heartbeats),i=dw(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ba.warn(t),""}}}function Pw(){return new Date().toISOString().substring(0,10)}function D3(r,e=x3){const t=[];let n=r.slice();for(const o of r){const i=t.find(a=>a.agent===o.agent);if(i){if(i.dates.push(o.date),xw(t)>e){i.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),xw(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class M3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SV()?wV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await P3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Rw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Rw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function xw(r){return dw(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(r){$f(new Hc("platform-logger",e=>new YV(e),"PRIVATE")),$f(new Hc("heartbeat",e=>new k3(e),"PRIVATE")),Wc(Yy,ww,r),Wc(Yy,ww,"esm2017"),Wc("fire-js","")}L3("");var U3="firebase",F3="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wc(U3,F3,"app");function Nw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B3=Nw,kw=new Bf("auth","Firebase",Nw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=new gw("@firebase/auth");function j3(r,...e){jp.logLevel<=hr.WARN&&jp.warn(`Auth (${Zy}): ${r}`,...e)}function Gp(r,...e){jp.logLevel<=hr.ERROR&&jp.error(`Auth (${Zy}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(r,...e){throw e_(r,...e)}function Dw(r,...e){return e_(r,...e)}function Mw(r,e,t){const n=Object.assign(Object.assign({},B3()),{[e]:t});return new Bf("auth","Firebase",n).create(e,{appName:r.name})}function Po(r){return Mw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e_(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return kw.create(r,...e)}function Tt(r,e,...t){if(!r)throw e_(e,...t)}function Sa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gp(e),new Error(e)}function $p(r,e){r||Sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function $3(){return Lw()==="http:"||Lw()==="https:"}function Lw(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($3()||EV()||"connection"in navigator)?navigator.onLine:!0}function q3(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t){this.shortDelay=e,this.longDelay=t,$p(t>e,"Short delay should be less than long delay!"),this.isMobile=_V()||bV()}get(){return V3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(r,e){$p(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=new H3(3e4,6e4);function xo(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function gs(r,e,t,n,o={}){return Fw(r,o,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const l=Gy(Object.assign({key:r.config.apiKey},a)).slice(1),p=await r._getAdditionalHeaders();return p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode),Uw.fetch()(Bw(r,r.config.apiHost,t,l),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},i))})}async function Fw(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},z3),e);try{const o=new Q3(r),i=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Vp(r,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[p,u]=l.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vp(r,"credential-already-in-use",a);if(p==="EMAIL_EXISTS")throw Vp(r,"email-already-in-use",a);if(p==="USER_DISABLED")throw Vp(r,"user-disabled",a);const m=n[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Mw(r,m,u);bu(r,m)}}catch(o){if(o instanceof ps)throw o;bu(r,"network-request-failed",{message:String(o)})}}async function zc(r,e,t,n,o={}){const i=await gs(r,e,t,n,o);return"mfaPendingCredential"in i&&bu(r,"multi-factor-auth-required",{_serverResponse:i}),i}function Bw(r,e,t,n){const o=`${e}${t}?${n}`;return r.config.emulator?W3(r.config,o):`${r.config.apiScheme}://${o}`}function Y3(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Dw(this.auth,"network-request-failed")),K3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vp(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const o=Dw(r,e,n);return o.customData._tokenResponse=t,o}function jw(r){return r!==void 0&&r.enterprise!==void 0}class X3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Y3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Z3(r,e){return gs(r,"GET","/v2/recaptchaConfig",xo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(r,e){return gs(r,"POST","/v1/accounts:delete",e)}async function Gw(r,e){return gs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function e4(r,e=!1){const t=Ea(r),n=await t.getIdToken(e),o=r_(n);Tt(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const i=typeof o.firebase=="object"?o.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:o,token:n,authTime:qf(t_(o.auth_time)),issuedAtTime:qf(t_(o.iat)),expirationTime:qf(t_(o.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function t_(r){return Number(r)*1e3}function r_(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Gp("JWT malformed, contained fewer than 3 sections"),null;try{const o=hw(t);return o?JSON.parse(o):(Gp("Failed to decode base64 JWT payload"),null)}catch(o){return Gp("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function $w(r){const e=r_(r);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof ps&&t4(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function t4({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qf(this.lastLoginAt),this.creationTime=qf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qp(r){var e;const t=r.auth,n=await r.getIdToken(),o=await n_(r,Gw(t,{idToken:n}));Tt(o==null?void 0:o.users.length,t,"internal-error");const i=o.users[0];r._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Vw(i.providerUserInfo):[],l=i4(r.providerData,a),p=r.isAnonymous,u=!(r.email&&i.passwordHash)&&!(l!=null&&l.length),m=p?u:!1,E={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new i_(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(r,E)}async function n4(r){const e=Ea(r);await qp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i4(r,e){return[...r.filter(n=>!e.some(o=>o.providerId===n.providerId)),...e]}function Vw(r){return r.map(e=>{var{providerId:t}=e,n=Fc(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(r,e){const t=await Fw(r,{},async()=>{const n=Gy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:i}=r.config,a=Bw(r,o,"/v1/token",`key=${i}`),l=await r._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Uw.fetch()(a,{method:"POST",headers:l,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function a4(r,e){return gs(r,"POST","/v2/accounts:revokeToken",xo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$w(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const t=$w(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:i}=await o4(e,t);this.updateTokensAndExpiration(n,o,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:o,expirationTime:i}=t,a=new Kc;return n&&(Tt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),o&&(Tt(typeof o=="string","internal-error",{appName:e}),a.accessToken=o),i&&(Tt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kc,this.toJSON())}_performRefresh(){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(r,e){Tt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class wa{constructor(e){var{uid:t,auth:n,stsTokenManager:o}=e,i=Fc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new r4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new i_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await n_(this,this.stsTokenManager.getToken(this.auth,e));return Tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return e4(this,e)}reload(){return n4(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await qp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ro(this.auth.app))return Promise.reject(Po(this.auth));const e=await this.getIdToken();return await n_(this,J3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,o,i,a,l,p,u,m;const E=(n=t.displayName)!==null&&n!==void 0?n:void 0,w=(o=t.email)!==null&&o!==void 0?o:void 0,R=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,S=(a=t.photoURL)!==null&&a!==void 0?a:void 0,P=(l=t.tenantId)!==null&&l!==void 0?l:void 0,x=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,k=(u=t.createdAt)!==null&&u!==void 0?u:void 0,B=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:G,emailVerified:X,isAnonymous:F,providerData:j,stsTokenManager:H}=t;Tt(G&&H,e,"internal-error");const re=Kc.fromJSON(this.name,H);Tt(typeof G=="string",e,"internal-error"),ys(E,e.name),ys(w,e.name),Tt(typeof X=="boolean",e,"internal-error"),Tt(typeof F=="boolean",e,"internal-error"),ys(R,e.name),ys(S,e.name),ys(P,e.name),ys(x,e.name),ys(k,e.name),ys(B,e.name);const te=new wa({uid:G,auth:e,email:w,emailVerified:X,displayName:E,isAnonymous:F,photoURL:S,phoneNumber:R,tenantId:P,stsTokenManager:re,createdAt:k,lastLoginAt:B});return j&&Array.isArray(j)&&(te.providerData=j.map(fe=>Object.assign({},fe))),x&&(te._redirectEventId=x),te}static async _fromIdTokenResponse(e,t,n=!1){const o=new Kc;o.updateFromServerResponse(t);const i=new wa({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:n});return await qp(i),i}static async _fromGetAccountInfoResponse(e,t,n){const o=t.users[0];Tt(o.localId!==void 0,"internal-error");const i=o.providerUserInfo!==void 0?Vw(o.providerUserInfo):[],a=!(o.email&&o.passwordHash)&&!(i!=null&&i.length),l=new Kc;l.updateFromIdToken(n);const p=new wa({uid:o.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:i,metadata:new i_(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(i!=null&&i.length)};return Object.assign(p,u),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Map;function Su(r){$p(r instanceof Function,"Expected a class definition");let e=qw.get(r);return e?($p(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,qw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Hw.type="NONE";const Ww=Hw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(r,e,t){return`firebase:${r}:${e}:${t}`}class Yc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:o,name:i}=this.auth;this.fullUserKey=o_(this.userKey,o.apiKey,i),this.fullPersistenceKey=o_("persistence",o.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Yc(Su(Ww),e,n);const o=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=o[0]||Su(Ww);const a=o_(n,e.config.apiKey,e.name);let l=null;for(const u of t)try{const m=await u._get(a);if(m){const E=wa._fromJSON(e,m);u!==i&&(l=E),i=u;break}}catch{}const p=o.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!p.length?new Yc(i,e,n):(i=p[0],l&&await i._set(a,l.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Yc(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d4(e))return"Blackberry";if(h4(e))return"Webos";if(u4(e))return"Safari";if((e.includes("chrome/")||c4(e))&&!e.includes("edge/"))return"Chrome";if(f4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function s4(r=Co()){return/firefox\//i.test(r)}function u4(r=Co()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c4(r=Co()){return/crios\//i.test(r)}function l4(r=Co()){return/iemobile/i.test(r)}function f4(r=Co()){return/android/i.test(r)}function d4(r=Co()){return/blackberry/i.test(r)}function h4(r=Co()){return/webos/i.test(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(r,e=[]){let t;switch(r){case"Browser":t=zw(Co());break;case"Worker":t=`${zw(Co())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zy}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((a,l)=>{try{const p=e(i);a(p)}catch(p){l(p)}});n.onAbort=t,this.queue.push(n);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(r,e={}){return gs(r,"GET","/v2/passwordPolicy",xo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=6;class g4{constructor(e){var t,n,o,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:m4,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,o,i,a,l;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(n=p.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(i=p.containsUppercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.containsNumericCharacter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),p}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let o=0;o<e.length;o++)n=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,o,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,t,n,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yw(this),this.idTokenSubscription=new Yw(this),this.beforeStateQueue=new p4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Su(t)),this._initializationPromise=this.queue(async()=>{var n,o;if(!this._deleted&&(this.persistenceManager=await Yc.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gw(this,{idToken:e}),n=await wa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ro(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!a||a===l)&&(p!=null&&p.user)&&(o=p.user,i=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(o)}catch(a){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qp(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ro(this.app))return Promise.reject(Po(this));const t=e?Ea(e):null;return t&&Tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ro(this.app)?Promise.reject(Po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ro(this.app)?Promise.reject(Po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Su(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await v4(this),t=new g4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bf("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await a4(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Su(e)||this._popupRedirectResolver;Tt(t,this,"argument-error"),this.redirectPersistenceManager=await Yc.create(this,[Su(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,o){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,n,o);return()=>{a=!0,p()}}else{const p=e.addObserver(t);return()=>{a=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&j3(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function No(r){return Ea(r)}class Yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=OV(t=>this.observer=t)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _4(r){return Qw.loadJS(r)}function E4(){return Qw.recaptchaEnterpriseScript}const b4="recaptcha-enterprise",S4="NO_RECAPTCHA";class w4{constructor(e){this.type=b4,this.auth=No(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{Z3(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new X3(p);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(p=>{l(p)})})}function o(i,a,l){const p=window.grecaptcha;jw(p)?p.enterprise.ready(()=>{p.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(S4)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(l=>{if(!t&&jw(window.grecaptcha))o(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let p=E4();p.length!==0&&(p+=l),_4(p).then(()=>{o(l,i,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function Xw(r,e,t,n=!1){const o=new w4(r);let i;try{i=await o.verify(t)}catch{i=await o.verify(t,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Hf(r,e,t,n){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Xw(r,e,t,t==="getOobCode");return n(r,i)}else return n(r,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Xw(r,e,t,t==="getOobCode");return n(r,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(r,e){const t=Aw(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),i=t.getOptions();if(Fp(i,e??{}))return o;bu(o,"already-initialized")}return t.initialize({options:e})}function A4(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Su);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Zw(r,e,t){const n=No(r);Tt(n._canInitEmulator,n,"emulator-config-failed"),Tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const o=!1,i=Jw(e),{host:a,port:l}=I4(e),p=l===null?"":`:${l}`;n.config.emulator={url:`${i}//${a}${p}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})}),O4()}function Jw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function I4(r){const e=Jw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const i=o[1];return{host:i,port:eT(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:eT(a)}}}function eT(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function O4(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sa("not implemented")}_getIdTokenResponse(e){return Sa("not implemented")}_linkToIdToken(e,t){return Sa("not implemented")}_getReauthenticationResolver(e){return Sa("not implemented")}}async function R4(r,e){return gs(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(r,e){return zc(r,"POST","/v1/accounts:signInWithPassword",xo(r,e))}async function rT(r,e){return gs(r,"POST","/v1/accounts:sendOobCode",xo(r,e))}async function P4(r,e){return rT(r,e)}async function x4(r,e){return rT(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(r,e){return zc(r,"POST","/v1/accounts:signInWithEmailLink",xo(r,e))}async function k4(r,e){return zc(r,"POST","/v1/accounts:signInWithEmailLink",xo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends tT{constructor(e,t,n,o=null){super("password",n),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Wf(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Wf(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hf(e,t,"signInWithPassword",C4);case"emailLink":return N4(e,{email:this._email,oobCode:this._password});default:bu(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hf(e,n,"signUpPassword",R4);case"emailLink":return k4(e,{idToken:t,email:this._email,oobCode:this._password});default:bu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(r,e){return zc(r,"POST","/v1/accounts:signInWithIdp",xo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="http://localhost";class Ta extends tT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bu("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:o}=t,i=Fc(t,["providerId","signInMethod"]);if(!n||!o)return null;const a=new Ta(n,o);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return a_(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,a_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,a_(e,t)}buildRequest(){const e={requestUri:D4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gy(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function L4(r){const e=jf(Gf(r)).link,t=e?jf(Gf(e)).deep_link_id:null,n=jf(Gf(r)).deep_link_id;return(n?jf(Gf(n)).link:null)||n||t||e||r}class Hp{constructor(e){var t,n,o,i,a,l;const p=jf(Gf(e)),u=(t=p.apiKey)!==null&&t!==void 0?t:null,m=(n=p.oobCode)!==null&&n!==void 0?n:null,E=M4((o=p.mode)!==null&&o!==void 0?o:null);Tt(u&&m&&E,"argument-error"),this.apiKey=u,this.operation=E,this.code=m,this.continueUrl=(i=p.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=p.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=p.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=L4(e);try{return new Hp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.providerId=wu.PROVIDER_ID}static credential(e,t){return Wf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Hp.parseLink(t);return Tt(n,"argument-error"),Wf._fromEmailAndCode(e,n.code,n.tenantId)}}wu.PROVIDER_ID="password",wu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends U4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qc extends zf{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return Tt("providerId"in t&&"signInMethod"in t,"argument-error"),Ta._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Tt(e.idToken||e.accessToken,"argument-error"),Ta._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Qc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Qc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:o,pendingToken:i,nonce:a,providerId:l}=e;if(!n&&!o&&!t&&!i||!l)return null;try{return new Qc(l)._credential({idToken:t,accessToken:n,nonce:a,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends zf{constructor(){super("facebook.com")}static credential(e){return Ta._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ko.credential(e.oauthAccessToken)}catch{return null}}}ko.FACEBOOK_SIGN_IN_METHOD="facebook.com",ko.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends zf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ta._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Do.credential(t,n)}catch{return null}}}Do.GOOGLE_SIGN_IN_METHOD="google.com",Do.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends zf{constructor(){super("github.com")}static credential(e){return Ta._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com",_s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends zf{constructor(){super("twitter.com")}static credential(e,t){return Ta._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Es.credential(t,n)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com",Es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(r,e){return zc(r,"POST","/v1/accounts:signUp",xo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,o=!1){const i=await wa._fromIdTokenResponse(e,n,o),a=iT(n);return new bs({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const o=iT(n);return new bs({user:e,providerId:o,_tokenResponse:n,operationType:t})}}function iT(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(r){var e;if(ro(r.app))return Promise.reject(Po(r));const t=No(r);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new bs({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await nT(t,{returnSecureToken:!0}),o=await bs._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp extends ps{constructor(e,t,n,o){var i;super(t.code,t.message),this.operationType=n,this.user=o,Object.setPrototypeOf(this,Wp.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,o){return new Wp(e,t,n,o)}}function B4(r,e,t,n){return t._getIdTokenResponse(r).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wp._fromErrorAndOperation(r,i,e,n):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4(r,e,t=!1){if(ro(r.app))return Promise.reject(Po(r));const n="signIn",o=await B4(r,n,e),i=await bs._fromIdTokenResponse(r,n,o);return t||await r._updateCurrentUser(i.user),i}async function s_(r,e){return j4(No(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(r,e){return zc(r,"POST","/v1/accounts:signInWithCustomToken",xo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(r,e){if(ro(r.app))return Promise.reject(Po(r));const t=No(r),n=await G4(t,{token:e,returnSecureToken:!0}),o=await bs._fromIdTokenResponse(t,"signIn",n);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r,e,t){var n;Tt(((n=t.url)===null||n===void 0?void 0:n.length)>0,r,"invalid-continue-uri"),Tt(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Tt(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Tt(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(r){const e=No(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function V4(r,e,t){const n=No(r),o={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&oT(n,o,t),await Hf(n,o,"getOobCode",P4)}async function q4(r,e,t){if(ro(r.app))return Promise.reject(Po(r));const n=No(r),a=await Hf(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nT).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&aT(r),p}),l=await bs._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function H4(r,e,t){return ro(r.app)?Promise.reject(Po(r)):s_(Ea(r),wu.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&aT(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(r,e,t){const n=No(r),o={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(a,l){Tt(l.handleCodeInApp,n,"argument-error"),l&&oT(n,a,l)}i(o,t),await Hf(n,o,"getOobCode",x4)}function z4(r,e){const t=Hp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function K4(r,e,t){if(ro(r.app))return Promise.reject(Po(r));const n=Ea(r),o=wu.credentialWithLink(e,t||G3());return Tt(o._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),s_(n,o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(r){var e,t;if(!r)return null;const{providerId:n}=r,o=r.rawUserInfo?JSON.parse(r.rawUserInfo):{},i=r.isNewUser||r.kind==="identitytoolkit#SignupNewUserResponse";if(!n&&(r!=null&&r.idToken)){const a=(t=(e=r_(r.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(a){const l=a!=="anonymous"&&a!=="custom"?a:null;return new Xc(i,l)}}if(!n)return null;switch(n){case"facebook.com":return new Q4(i,o);case"github.com":return new X4(i,o);case"google.com":return new Z4(i,o);case"twitter.com":return new J4(i,o,r.screenName||null);case"custom":case"anonymous":return new Xc(i,null);default:return new Xc(i,n,o)}}class Xc{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class sT extends Xc{constructor(e,t,n,o){super(e,t,n),this.username=o}}class Q4 extends Xc{constructor(e,t){super(e,"facebook.com",t)}}class X4 extends sT{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class Z4 extends Xc{constructor(e,t){super(e,"google.com",t)}}class J4 extends sT{constructor(e,t,n){super(e,"twitter.com",t,n)}}function eq(r){const{user:e,_tokenResponse:t}=r;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Y4(t)}function tq(r,e,t,n){return Ea(r).onAuthStateChanged(e,t,n)}function rq(r){return Ea(r).signOut()}async function nq(r){return Ea(r).delete()}const uT="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iq(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const n=new zp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:o,data:i}=t.data,a=this.handlersMap[o];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:o});const l=Array.from(a).map(async u=>u(t.origin,i)),p=await iq(l);t.ports[0].postMessage({status:"done",eventId:n,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let i,a;return new Promise((l,p)=>{const u=oq("",20);o.port1.start();const m=setTimeout(()=>{p(new Error("unsupported_event"))},n);a={messageChannel:o,onMessage(E){const w=E;if(w.data.eventId===u)switch(w.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(w.data.response);break;default:clearTimeout(m),clearTimeout(i),p(new Error("invalid_response"));break}}},this.handlers.add(a),o.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[o.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof cT().WorkerGlobalScope<"u"&&typeof cT().importScripts=="function"}async function sq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uq(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function cq(){return lT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebaseLocalStorageDb",lq=1,Kp="firebaseLocalStorage",dT="fbase_key";class Kf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yp(r,e){return r.transaction([Kp],e?"readwrite":"readonly").objectStore(Kp)}function fq(){const r=indexedDB.deleteDatabase(fT);return new Kf(r).toPromise()}function u_(){const r=indexedDB.open(fT,lq);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Kp,{keyPath:dT})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Kp)?e(n):(n.close(),await fq(),e(await u_()))})})}async function hT(r,e,t){const n=Yp(r,!0).put({[dT]:e,value:t});return new Kf(n).toPromise()}async function dq(r,e){const t=Yp(r,!1).get(e),n=await new Kf(t).toPromise();return n===void 0?null:n.value}function pT(r,e){const t=Yp(r,!0).delete(e);return new Kf(t).toPromise()}const hq=800,pq=3;class vT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await u_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>pq)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zp._getInstance(cq()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await sq(),!this.activeServiceWorker)return;this.sender=new aq(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await u_();return await hT(e,uT,"1"),await pT(e,uT),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>hT(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>dq(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const i=Yp(o,!1).getAll();return new Kf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:o,value:i}of e)n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(i)&&(this.notifyListeners(o,i),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!n.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vT.type="LOCAL";const vq=vT;var mT="@firebase/auth",gT="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yq(r){$f(new Hc("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;Tt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const p={apiKey:a,authDomain:l,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kw(r)},u=new y4(n,o,i,p);return A4(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),$f(new Hc("auth-internal",e=>{const t=No(e.getProvider("auth").getImmediate());return(n=>new mq(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wc(mT,gT,gq(r)),Wc(mT,gT,"esm2017")}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(r=O3()){const e=Aw(r,"auth");if(e.isInitialized())return e.getImmediate();const t=T4(r,{persistence:[vq]}),n=gV("auth");return n&&Zw(t,`http://${n}`),t}yq("WebExtension");var Qp;(function(r){r.SIGNUP="signup",r.LOGIN="login"})(Qp||(Qp={}));var Ss;(function(r){r[r.apple=0]="apple",r[r.facebook=1]="facebook",r[r.google=2]="google",r[r.email=3]="email",r[r.emailLink=4]="emailLink",r[r.workOS=5]="workOS"})(Ss||(Ss={}));var yT;(function(r){r[r.popup=0]="popup",r[r.redirect=1]="redirect",r[r.oneTap=2]="oneTap"})(yT||(yT={}));var wi=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},Ti=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Eq=function(){function r(e,t){t===void 0&&(t=!1);var n=Iw(e);this.firebaseAuth=_q(n),t&&Zw(this.firebaseAuth,V$)}return r.mapFirebaseErrorAndThrow=function(e){var t=e.code,n=e.message;throw new to({code:t,message:n})},r.firebaseAuthResponse=function(e){if(!e)return null;var t=eq(e);return{userCredential:e,isNewUser:!!(t!=null&&t.isNewUser)}},r.getCustomProvider=function(e,t){var n=t===void 0?{}:t,o=n.organization,i;if(e===Ss.apple)i=new Qc(q$),i.addScope("email"),i.addScope("name");else if(e===Ss.facebook)i=new ko;else if(e===Ss.google)i=new Do;else if(e===Ss.workOS&&o)i=new Qc(H$),i.setCustomParameters({organization:o});else throw new to({code:aw,message:"could not determine auth provider type"});return i},r.prototype.authCredential=function(e){return wi(this,void 0,void 0,function(){var t,n;return Ti(this,function(o){switch(o.label){case 0:if(!e)return[2,null];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s_(this.firebaseAuth,e)];case 2:return t=o.sent(),[2,r.firebaseAuthResponse(t)];case 3:return n=o.sent(),r.mapFirebaseErrorAndThrow(n),[3,4];case 4:return[2]}})})},r.prototype.signup=function(e,t){return wi(this,void 0,void 0,function(){var n,o;return Ti(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,q4(this.firebaseAuth,e,t)];case 1:return n=i.sent(),[2,r.firebaseAuthResponse(n)];case 2:return o=i.sent(),r.mapFirebaseErrorAndThrow(o),[3,3];case 3:return[2]}})})},r.prototype.login=function(e,t){return wi(this,void 0,void 0,function(){var n,o;return Ti(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,H4(this.firebaseAuth,e,t)];case 1:return n=i.sent(),[2,r.firebaseAuthResponse(n)];case 2:return o=i.sent(),r.mapFirebaseErrorAndThrow(o),[3,3];case 3:return[2]}})})},r.prototype.sendAuthEmailLink=function(e,t){return wi(this,void 0,void 0,function(){var n;return Ti(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,W4(this.firebaseAuth,e,{url:t.url,handleCodeInApp:!0})];case 1:return o.sent(),[3,3];case 2:return n=o.sent(),r.mapFirebaseErrorAndThrow(n),[3,3];case 3:return[2]}})})},r.prototype.authWithEmailLink=function(e,t){return wi(this,void 0,void 0,function(){var n,o;return Ti(this,function(i){switch(i.label){case 0:if(!z4(this.firebaseAuth,t))return[2,null];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,K4(this.firebaseAuth,e,t)];case 2:return n=i.sent(),[2,r.firebaseAuthResponse(n)];case 3:return o=i.sent(),r.mapFirebaseErrorAndThrow(o),[3,4];case 4:return[2]}})})},r.prototype.getCustomCredential=function(e,t){return wi(this,void 0,void 0,function(){return Ti(this,function(n){if(!t)throw new to({code:J$,message:"invalid credentials"});if(e===Ss.google)return[2,Do.credential(t)];if(e===Ss.facebook)return[2,ko.credential(t)];throw new to({code:aw,message:"invalid auth provider type for credentials"})})})},r.prototype.signInAnonymously=function(){return wi(this,void 0,void 0,function(){var e,t;return Ti(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,F4(this.firebaseAuth)];case 1:return e=n.sent(),[2,r.firebaseAuthResponse(e)];case 2:return t=n.sent(),r.mapFirebaseErrorAndThrow(t),[3,3];case 3:return[2]}})})},r.prototype.logout=function(){return wi(this,void 0,void 0,function(){var e;return Ti(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,rq(this.firebaseAuth)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),r.mapFirebaseErrorAndThrow(e),[3,3];case 3:return[2]}})})},r.prototype.getUser=function(){var e=this;return new Promise(function(t){var n=e.firebaseAuth.onAuthStateChanged(function(o){return wi(e,void 0,void 0,function(){return Ti(this,function(i){return n(),t(o),[2]})})})})},r.prototype.deleteUser=function(e){return wi(this,void 0,void 0,function(){var t;return Ti(this,function(n){return t=e==null?void 0:e.user,t?[2,nq(t)]:[2]})})},r.prototype.signInWithAccessToken=function(e){return wi(this,void 0,void 0,function(){var t;return Ti(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,$4(this.firebaseAuth,e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),r.mapFirebaseErrorAndThrow(t),[3,3];case 3:return[2]}})})},r.prototype.onAuthStateChanged=function(e){tq(this.firebaseAuth,function(t){return e(t)})},r.prototype.isLoggedInWithAnonymousUser=function(){return wi(this,void 0,void 0,function(){var e;return Ti(this,function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return e=t.sent(),e?[2,e.providerData.length===0]:[2,!1]}})})},r.prototype.resetPassword=function(e,t){return wi(this,void 0,void 0,function(){var n,o;return Ti(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=void 0,t&&(n={url:t}),[4,V4(this.firebaseAuth,e,n)];case 1:return i.sent(),[3,3];case 2:return o=i.sent(),r.mapFirebaseErrorAndThrow(o),[3,3];case 3:return[2]}})})},r}(),bq=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zc=function(){return Zc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},Zc.apply(this,arguments)},c_=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},l_=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},_T=function(r){bq(e,r);function e(t){var n=t.message,o=t.data,i=t.status,a=t.headers,l=r.call(this,n)||this;return l.data=o,l.status=i,l.headers=a,l}return e}(Error),Sq=function(r){var e=r.baseURL,t=r.headers,n=function(o,i){return c_(void 0,void 0,void 0,function(){var a,l,p,u;return l_(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),[4,fetch("".concat(e).concat(o),Zc(Zc({},i),{headers:Zc(Zc({},t),(i==null?void 0:i.headers)||{}),credentials:"include"}))];case 1:return a=m.sent(),[3,3];case 2:throw m.sent(),new _T({data:{code:"NETWORK_ERROR"}});case 3:return l=a.headers.get("content-type"),l!=="application/json"?[3,5]:[4,a.json()];case 4:return u=m.sent(),[3,7];case 5:return[4,a.text()];case 6:u=m.sent(),m.label=7;case 7:if(p=u,a.ok)return[2,{data:p,status:a.status,headers:a.headers}];throw new _T({data:p,status:a.status,headers:a.headers})}})})};return{get:function(o){var i=o.url,a=o.headers,l=a===void 0?{}:a;return c_(void 0,void 0,void 0,function(){return l_(this,function(p){switch(p.label){case 0:return[4,n(i,{method:"GET",headers:l})];case 1:return[2,p.sent()]}})})},post:function(o){var i=o.url,a=o.headers,l=a===void 0?{}:a,p=o.body,u=p===void 0?{}:p;return c_(void 0,void 0,void 0,function(){return l_(this,function(m){switch(m.label){case 0:return[4,n(i,{method:"POST",headers:l,body:JSON.stringify(u)})];case 1:return[2,m.sent()]}})})}}},Xp=function(){return Xp=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},Xp.apply(this,arguments)},Yf=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},Qf=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wq=function(r){switch(r==null?void 0:r.data.code){case z$:return tV;case K$:return rV;default:return eV}},Tq=function(){function r(e){var t=e.baseURL,n=e.headers,o=n===void 0?{}:n,i=e.credentials,a=i===void 0?"include":i,l=e.httpsAgent;this.httpClient=Sq({baseURL:t,credentials:a,headers:Xp(Xp({},o),{"X-Wordtune":"true","Content-Type":"application/json"}),httpsAgent:l})}return r.mapIdentityErrorAndThrow=function(e){throw new to({code:wq(e)})},r.prototype.auth=function(e,t){return t===void 0&&(t={}),Yf(this,void 0,void 0,function(){var n,o;return Qf(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.httpClient.post({url:"/identity/auth/login",headers:jy(e),body:t})];case 1:return n=i.sent(),[2,n.data];case 2:return o=i.sent(),r.mapIdentityErrorAndThrow(o),[3,3];case 3:return[2]}})})},r.prototype.getAccessToken=function(){return Yf(this,void 0,void 0,function(){var e,t,n;return Qf(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.httpClient.get({url:"/identity/auth/auth_token",headers:(n={},n[iw]="true",n)})];case 1:return e=o.sent(),[2,e.data[ow]||null];case 2:return t=o.sent(),r.mapIdentityErrorAndThrow(t),[3,3];case 3:return[2]}})})},r.prototype.createNonRegisteredUser=function(e){return Yf(this,void 0,void 0,function(){return Qf(this,function(t){try{return[2,this.httpClient.post({url:"/identity/auth/non_registered_user",headers:jy(e),body:null})]}catch(n){r.mapIdentityErrorAndThrow(n)}return[2]})})},r.prototype.getOrganization=function(e){return Yf(this,void 0,void 0,function(){var t,n;return Qf(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.httpClient.get({url:"/identity/auth/organization?email="+e})];case 1:return t=o.sent(),[2,t.data.organization_id];case 2:return n=o.sent(),r.mapIdentityErrorAndThrow(n),[3,3];case 3:return[2]}})})},r.prototype.isAllowedToMagicLink=function(e){return Yf(this,void 0,void 0,function(){var t,n;return Qf(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.httpClient.post({url:"/identity/auth/allow_email_verification",body:{email:e}})];case 1:return t=o.sent(),[2,t.data];case 2:return n=o.sent(),r.mapIdentityErrorAndThrow(n),[3,3];case 3:return[2]}})})},r}(),Mo=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},Lo=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Aq=function(){function r(e,t,n,o,i,a){i===void 0&&(i=!1),this.refreshStateInProgress=!1,this.identity=new Tq({baseURL:e,headers:t,httpsAgent:o,credentials:a}),this.firebase=new Eq(n,i),this.activeRequest=null}return r.prototype.getAuthResponse=function(e,t){return Mo(this,void 0,void 0,function(){var n,o;return Lo(this,function(i){switch(i.label){case 0:return n=e.isNewUser?Qp.SIGNUP:Qp.LOGIN,o={},[4,this.getCurrentUser()];case 1:return[2,(o.user=i.sent(),o.authType=n,o.identityUserProperties=t.user_properties,o)]}})})},r.prototype.handleIdentityAuthError=function(e){var t=e.isNewUser,n=e.userCredential;return t?this.firebase.deleteUser(n):this.firebase.logout()},r.prototype.loginWithEmail=function(e,t){return Mo(this,void 0,void 0,function(){var n,o,i,a;return Lo(this,function(l){switch(l.label){case 0:return[4,this.firebase.login(e,t)];case 1:if(n=l.sent(),!n)throw new to({code:sw});l.label=2;case 2:return l.trys.push([2,5,,6]),[4,n.userCredential.user.getIdToken()];case 3:return o=l.sent(),[4,this.identity.auth(o)];case 4:return i=l.sent(),[2,this.getAuthResponse(n,i)];case 5:throw a=l.sent(),this.handleIdentityAuthError(n),a;case 6:return[2]}})})},r.prototype.sendAuthEmailLink=function(e,t){return Mo(this,void 0,void 0,function(){var n;return Lo(this,function(o){switch(o.label){case 0:return[4,this.identity.isAllowedToMagicLink(e)];case 1:if(n=o.sent().code,n===Y$)throw new to({code:nV});if(n===Q$)throw new to({code:iV});return[2,this.firebase.sendAuthEmailLink(e,t)]}})})},r.prototype.logout=function(e){return Mo(this,void 0,void 0,function(){var t;return Lo(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.firebase.logout()];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[4,e.delete()];case 4:return n.sent(),[2]}})})},r.prototype.createNonRegisteredUser=function(){return Mo(this,void 0,void 0,function(){var e,t,n;return Lo(this,function(o){switch(o.label){case 0:return[4,this.firebase.signInAnonymously()];case 1:if(e=o.sent(),!e)throw new to({code:sw});o.label=2;case 2:return o.trys.push([2,6,,7]),[4,e.userCredential.user.getIdToken()];case 3:return t=o.sent(),[4,this.identity.createNonRegisteredUser(t)];case 4:return o.sent(),[4,e.userCredential.user.getIdToken(!0)];case 5:return o.sent(),[3,7];case 6:throw n=o.sent(),this.handleIdentityAuthError(e),n;case 7:return[2]}})})},r.prototype.resetPassword=function(e,t){return Mo(this,void 0,void 0,function(){return Lo(this,function(n){return[2,this.firebase.resetPassword(e,t)]})})},r.prototype.refreshAuthenticationState=function(e,t){return Mo(this,void 0,void 0,function(){var n,o,i;return Lo(this,function(a){switch(a.label){case 0:return!e&&!t?[2]:e&&!t?[4,this.firebase.logout()]:[3,2];case 1:return a.sent(),[2];case 2:return n=!(e!=null&&e.isRegistered)&&(t==null?void 0:t.isRegistered),e&&t&&!n?e.loginUid!==t.loginUid?[3,3]:[2]:[3,5];case 3:return[4,this.firebase.logout()];case 4:a.sent(),a.label=5;case 5:return[4,this.identity.getAccessToken()];case 6:return o=a.sent(),i=o,i?[4,this.firebase.signInWithAccessToken(o)]:[3,8];case 7:i=a.sent(),a.label=8;case 8:return[2]}})})},r.prototype.getCurrentUser=function(){return Mo(this,void 0,void 0,function(){var e,t;return Lo(this,function(n){switch(n.label){case 0:return[4,this.firebase.getUser()];case 1:return e=n.sent(),[4,e==null?void 0:e.getIdToken()];case 2:return t=n.sent()||null,[2,Up.getUserByJwt(t,e)]}})})},r.prototype.refreshUserState=function(e){return Mo(this,void 0,void 0,function(){var t,n;return Lo(this,function(o){switch(o.label){case 0:return o.trys.push([0,4,5,6]),this.refreshStateInProgress?[3,3]:(this.refreshStateInProgress=!0,[4,this.getCurrentUser()]);case 1:return t=o.sent(),[4,this.refreshAuthenticationState(t,e)];case 2:o.sent(),o.label=3;case 3:return[2,this.getCurrentUser()];case 4:throw n=o.sent(),console.error(n),n;case 5:return this.refreshStateInProgress=!1,[7];case 6:return[2]}})})},r.prototype._getUser=function(e){return Mo(this,void 0,void 0,function(){var t;return Lo(this,function(n){switch(n.label){case 0:this.activeRequest||(this.activeRequest=this.refreshUserState(e)),t=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.activeRequest];case 2:return t=n.sent(),this.activeRequest=null,[3,4];case 3:return n.sent(),this.activeRequest=null,[3,4];case 4:return[2,t]}})})},r}(),Iq=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},Oq=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Rq=function(){function r(e){this.storageManager=e,this.currentValue=null,this.currentInterval=null}return r.prototype.listenOnStorageChanges=function(e){return Iq(this,void 0,void 0,function(){var t,n;return Oq(this,function(o){switch(o.label){case 0:return[4,this.storageManager.get()];case 1:return t=o.sent(),this.currentValue===t?[3,3]:[4,e(t)];case 2:n=o.sent(),n&&(this.currentValue=t),o.label=3;case 3:return[2]}})})},r.prototype.destroy=function(){this.currentInterval&&clearInterval(this.currentInterval)},r.prototype.listen=function(e,t){var n=this,o=t===void 0?{}:t,i=o.intervalDelayInMilliseconds,a=i===void 0?1e3:i;this.currentInterval&&clearInterval(this.currentInterval),this.currentInterval=setInterval(function(){return n.listenOnStorageChanges(e)},a)},r}(),ET=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},bT=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ST="__session",Cq=function(){function r(e){this.identityUrl=e,this.identityUrl=e}return r.getCookie=function(e){var t=new RegExp("(^| )".concat(e,"=([^;]+)")),n=document.cookie.match(t);return n?n[2]:null},r.prototype.get=function(){return ET(this,void 0,void 0,function(){return bT(this,function(e){return[2,r.getCookie(ST)]})})},r.prototype.delete=function(){return ET(this,void 0,void 0,function(){var e,t,n;return bT(this,function(o){return e=new Date().toUTCString(),t=new URL(this.identityUrl).hostname,n=t==="127.0.0.1"?"":"; domain=.".concat(t.split(".").slice(-2).join(".")),document.cookie="".concat(ST,"=; expires=").concat(e,"; path=/").concat(n),[2]})})},r}(),Zp=function(){return Zp=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},Zp.apply(this,arguments)},Aa=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},Ia=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Pq={identityHeaders:{}},xq=function(){function r(e){this.options=Zp(Zp({},Pq),e),this.authService=new Aq(e.identityBaseUrl,e.identityHeaders||{},e.firebaseConfig,e.identityHttpsAgent,e.useFirebaseEmulator),this.sessionStorage=e.sessionStorage||new Cq(this.options.identityBaseUrl),this.sessionListener=new Rq(this.sessionStorage),e.telemetryInstance&&(this.telemetryClient=new cV(e.telemetryInstance,e.clientIdentifier))}return r.getInstance=function(e){var t;return(!r.instance||e.forceNewInstance)&&((t=r.instance)===null||t===void 0||t.sessionListener.destroy(),r.instance=new r(e)),r.instance},r.prototype.getUser=function(){var e,t;return Aa(this,void 0,void 0,function(){var n,o;return Ia(this,function(i){switch(i.label){case 0:return[4,this.sessionStorage.get()];case 1:n=i.sent();try{o=Up.getUserByJwt(n)}catch(a){return(e=this.telemetryClient)===null||e===void 0||e.error({source:"AuthClient - getUser",jwtToken:"".concat(n)},a,a.message),[2,null]}return(t=this.telemetryClient)===null||t===void 0||t.info({source:"AuthClient - getUser",sessionUser:"".concat(o)},"Succeed to get sessionUser"),[2,this.authService._getUser(o)]}})})},r.prototype.onUserChangeCallbackWrapper=function(e,t){var n;return Aa(this,void 0,void 0,function(){var o,i;return Ia(this,function(a){switch(a.label){case 0:o=null;try{o=Up.getUserByJwt(e)}catch(l){(n=this.telemetryClient)===null||n===void 0||n.error({source:"AuthClient - onUserChangeCallbackWrapper",jwtToken:"".concat(e)},l,l.message)}return this.authService.refreshStateInProgress?[3,2]:[4,this.authService.refreshUserState(o)];case 1:return i=a.sent(),t(i),[2,!0];case 2:return[2,!1]}})})},r.prototype.isUserAnonymous=function(){return Aa(this,void 0,void 0,function(){var e;return Ia(this,function(t){switch(t.label){case 0:return[4,this.sessionStorage.get()];case 1:return e=t.sent(),[2,Up.isUserAnonymousByJwt(e)]}})})},r.prototype.onUserChanged=function(e){var t=this,n=this.options.pollingIntervalInMilliseconds;if(n){var o={intervalDelayInMilliseconds:n};this.sessionListener.listen(function(i){return Aa(t,void 0,void 0,function(){var a;return Ia(this,function(l){try{return[2,this.onUserChangeCallbackWrapper(i,e)]}catch(p){return(a=this.telemetryClient)===null||a===void 0||a.error({source:"AuthClient - onUserChanged",jwtToken:"".concat(i)},p,p.message),[2,!1]}return[2]})})},o)}},r.prototype.authenticateAsNonRegistered=function(){return Aa(this,void 0,void 0,function(){return Ia(this,function(e){return[2,this.authService.createNonRegisteredUser()]})})},r.prototype.loginWithEmail=function(e,t){return Aa(this,void 0,void 0,function(){return Ia(this,function(n){return[2,this.authService.loginWithEmail(e,t)]})})},r.prototype.sendAuthEmailLink=function(e,t){return Aa(this,void 0,void 0,function(){return Ia(this,function(n){return[2,this.authService.sendAuthEmailLink(e,t)]})})},r.prototype.logout=function(){return Aa(this,void 0,void 0,function(){return Ia(this,function(e){return[2,this.authService.logout(this.sessionStorage)]})})},r.prototype.resetPassword=function(e,t){return Aa(this,void 0,void 0,function(){return Ia(this,function(n){return[2,this.authService.resetPassword(e,t)]})})},r}(),Nq=function(r){var e=r.pollingIntervalInMilliseconds;if(e&&e<=0)throw new Error("`pollingIntervalInMilliseconds` should be either a positive number or null.")},kq=function(r){return Nq(r),xq.getInstance(r)};const Dq=Qn("authService"),wT="__session",TT="https://app.wordtune.com";class Mq{async get(){try{const e=await Gt.cookies.get({name:wT,url:TT});return(e==null?void 0:e.value)??null}catch(e){Dq.emitLog({error:e,body:"Failed to SessionCookieService.get",severityNumber:bt.ERROR})}return null}async delete(){await Gt.cookies.remove({name:wT,url:TT})}}const AT=new Mq;class Lq{constructor(){pe(this,"client",kq({clientIdentifier:"extension",credentials:"include",identityHeaders:{createUser:"false","content-type":"application/json","X-wordtune":"true","firebase-auth":"true"},sessionStorage:AT,firebaseConfig:{apiKey:"AIzaSyB-Oh7rpg3j90Sx4uzYl7nW9JK0lKT9x08",authDomain:"auth.wordtune.com",databaseURL:"https://wordtune-productionba9aa0eb.firebaseio.com",projectId:"wordtune-productionba9aa0eb",storageBucket:"wordtune-productionba9aa0eb.appspot.com",messagingSenderId:"527812706492",appId:"1:527812706492:web:ac0e39cf81a73eaf5450b9"},identityBaseUrl:"https://api.wordtune.com",pollingIntervalInMilliseconds:350,telemetryInstance:T0.client}));pe(this,"initPromise",null);pe(this,"user",null);pe(this,"logger",null)}async init(){return this.initPromise||(this.initPromise=(async()=>{var e;try{this.user=await this.client.getUser()}catch(t){this.initPromise=null,this.user=null,(e=this.logger)==null||e.emitLog({error:t,body:"[init] AuthService failed to get user",severityNumber:bt.ERROR})}})()),this.initPromise}setLogger(e){this.logger=e}onUserChange(e){this.client.onUserChanged(t=>{var n;this.user=t,e(t),(n=this.logger)==null||n.emitLog({body:`[onUserChanged] User state change: ${t?"logged in":"logged out"}`,severityNumber:bt.INFO,attributes:{wordtuneUserId:t==null?void 0:t.wordtuneUserId}})})}async getLocalUser(){return await this.init(),this.user}async getUser(){return await this.init(),this.client.getUser()}async onGetUserMessage(e){var t,n;try{const o=await this.getUser();if(!o&&await AT.get())return(t=this.logger)==null||t.emitLog({body:"[onGetUserMessage] User is logged out but session cookie is present",severityNumber:bt.ERROR}),e({isSuccessful:!1,data:null,messages:[{code:B$}]});e({isSuccessful:!0,data:o!=null&&o.isRegistered?o.toJSON():null,messages:[]})}catch(o){(n=this.logger)==null||n.emitLog({error:o,body:"[onGetUserMessage] AuthService failed to get user",severityNumber:bt.ERROR}),e({isSuccessful:!1,data:null,messages:[{code:j$}]})}}async logout(){var e,t;try{return await this.client.logout(),(e=this.logger)==null||e.emitLog({body:"[logout] User logged out successfully",severityNumber:bt.INFO}),!0}catch(n){return(t=this.logger)==null||t.emitLog({error:n,body:"[logout] Failed to logout user",severityNumber:bt.ERROR}),!1}}async onLogoutMessage(e){var t;try{if(!await this.logout())throw new Error("Logout failed");return e({isSuccessful:!0})}catch(n){return(t=this.logger)==null||t.emitLog({error:n,body:"[onLogoutMessage] AuthService failed to logout user",severityNumber:bt.ERROR}),e({isSuccessful:!1,error:"Failed to logout"})}}}const no=new Lq,Uq=Qn("installService"),Fq="extensionInstall";async function Bq(){let r={userCreationDate:new Date().toISOString(),userCreationOrigin:Fq},e;try{e=await Gt.cookies.get({name:"InstallInfo",url:wy})}catch(t){Uq.emitLog({error:t,body:"Failed to getInstallAttribution",severityNumber:bt.ERROR})}if(e)try{const t=JSON.parse(e.value);r={...r,...t}}catch{}return r}const IT=({userId:r,deviceId:e})=>{const t=yS(N2,{u:r,deviceId:e,version:O0()});t&&Gt.runtime.setUninstallURL(t)},OT=Qn("installService"),jq=async r=>{try{const{reason:e}=r;if(e!=="install")return;await Pr.init({}),Pr.trackEvent("installSequenceStarted",{reason:e});const t=await Bq(),{ad_set_name:n}=t,o=yS(x2,{adSetName:n,platform:"extension",origin:"install",isNewExtension:!0,redirect:P2});try{Pr.trackEvent("onboardingRoutineStarted",{userConfig:"{}"}),await Gt.tabs.create({url:o}),Pr.trackEvent("welcomePageEntered",{url:o})}catch(p){OT.emitLog({body:"Failed to open welcome page",severityNumber:bt.ERROR,error:p})}Pr.setOrigin(t),await Gt.storage.local.set({[Ao.local.SHOW_NO_TEXT_NEW_USER_WALKTHROUGH]:!0,[Ao.local.SHOW_HIGHLIGHT_TEXT_USER_WALKTHROUGH]:!0,[Ao.local.SHOW_REWRITE_NEW_USER_WALKTHROUGH]:!0}),await Ap.initDefaultUserConfig(),await no.init();const i=await no.getUser(),a=i==null?void 0:i.wordtuneUserId;a&&Pr.setUserId(a),IT({userId:a,deviceId:Pr.getDeviceId()||""});const l=await Gt.runtime.getPlatformInfo();Gt.storage.local.set({os:l.os}),Pr.identifyAsExtensionUser(),await Ap.storeInstallationDate(Date.now()),Pr.trackEvent("extensionChange",{reason:e,currentVersion:Gt.runtime.getManifest().version})}catch(e){OT.emitLog({body:"Install sequence failed",severityNumber:bt.ERROR,error:e}),Pr.trackEvent("installSequenceFailed",{error:e==null?void 0:e.message})}};class f_ extends Error{constructor({message:t,data:n,status:o,headers:i}){super(t);pe(this,"status");pe(this,"headers");pe(this,"data");this.data=n,this.status=o,this.headers=i}}const Jc=async(r,e)=>{var l,p,u;const t=await no.getUser(),n=await(t==null?void 0:t.getAuthHeaders())||{},o=`https://api.wordtune.com${r}`;let i;try{i=await fetch(o,{...e,credentials:"include",headers:{"x-wordtune":"1","x-wordtune-app":"wordtune-extension-v2","x-wordtune-origin":o,"x-wordtune-version":Gt.runtime.getManifest().version,...n,...e==null?void 0:e.headers}})}catch{throw(l=e==null?void 0:e.signal)!=null&&l.aborted?new f_({data:{code:"ABORTED_ERROR"}}):new f_({data:{code:"NETWORK_ERROR"}})}const a=(u=(p=i.headers)==null?void 0:p.get("Content-Type"))!=null&&u.includes("application/json")?await i.json():await i.text();if(i.ok)return{data:a,status:i.status,headers:i.headers};throw new f_({data:a,status:i.status,headers:i.headers})};var Ht;(function(r){r.assertEqual=o=>o;function e(o){}r.assertIs=e;function t(o){throw new Error}r.assertNever=t,r.arrayToEnum=o=>{const i={};for(const a of o)i[a]=a;return i},r.getValidEnumValues=o=>{const i=r.objectKeys(o).filter(l=>typeof o[o[l]]!="number"),a={};for(const l of i)a[l]=o[l];return r.objectValues(a)},r.objectValues=o=>r.objectKeys(o).map(function(i){return o[i]}),r.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const i=[];for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.push(a);return i},r.find=(o,i)=>{for(const a of o)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function n(o,i=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(Ht||(Ht={}));var d_;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(d_||(d_={}));const We=Ht.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ws=r=>{switch(typeof r){case"undefined":return We.undefined;case"string":return We.string;case"number":return isNaN(r)?We.nan:We.number;case"boolean":return We.boolean;case"function":return We.function;case"bigint":return We.bigint;case"symbol":return We.symbol;case"object":return Array.isArray(r)?We.array:r===null?We.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?We.promise:typeof Map<"u"&&r instanceof Map?We.map:typeof Set<"u"&&r instanceof Set?We.set:typeof Date<"u"&&r instanceof Date?We.date:We.object;default:return We.unknown}},ke=Ht.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Gq=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class Ai extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},n={_errors:[]},o=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let l=n,p=0;for(;p<a.path.length;){const u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(t(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return o(this),n}static assert(e){if(!(e instanceof Ai))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ht.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ai.create=r=>new Ai(r);const el=(r,e)=>{let t;switch(r.code){case ke.invalid_type:r.received===We.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case ke.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Ht.jsonStringifyReplacer)}`;break;case ke.unrecognized_keys:t=`Unrecognized key(s) in object: ${Ht.joinValues(r.keys,", ")}`;break;case ke.invalid_union:t="Invalid input";break;case ke.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Ht.joinValues(r.options)}`;break;case ke.invalid_enum_value:t=`Invalid enum value. Expected ${Ht.joinValues(r.options)}, received '${r.received}'`;break;case ke.invalid_arguments:t="Invalid function arguments";break;case ke.invalid_return_type:t="Invalid function return type";break;case ke.invalid_date:t="Invalid date";break;case ke.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Ht.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case ke.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case ke.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case ke.custom:t="Invalid input";break;case ke.invalid_intersection_types:t="Intersection results could not be merged";break;case ke.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case ke.not_finite:t="Number must be finite";break;default:t=e.defaultError,Ht.assertNever(r)}return{message:t}};let RT=el;function $q(r){RT=r}function Jp(){return RT}const ev=r=>{const{data:e,path:t,errorMaps:n,issueData:o}=r,i=[...t,...o.path||[]],a={...o,path:i};if(o.message!==void 0)return{...o,path:i,message:o.message};let l="";const p=n.filter(u=>!!u).slice().reverse();for(const u of p)l=u(a,{data:e,defaultError:l}).message;return{...o,path:i,message:l}},Vq=[];function Ve(r,e){const t=Jp(),n=ev({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===el?void 0:el].filter(o=>!!o)});r.common.issues.push(n)}class jn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if(o.status==="aborted")return yt;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const o of t){const i=await o.key,a=await o.value;n.push({key:i,value:a})}return jn.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:i,value:a}=o;if(i.status==="aborted"||a.status==="aborted")return yt;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const yt=Object.freeze({status:"aborted"}),tl=r=>({status:"dirty",value:r}),Xn=r=>({status:"valid",value:r}),h_=r=>r.status==="aborted",p_=r=>r.status==="dirty",Xf=r=>r.status==="valid",Zf=r=>typeof Promise<"u"&&r instanceof Promise;function tv(r,e,t,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function CT(r,e,t,n,o){if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}typeof SuppressedError=="function"&&SuppressedError;var nt;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(nt||(nt={}));var Jf,ed;class Uo{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const PT=(r,e)=>{if(Xf(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ai(r.common.issues);return this._error=t,this._error}}};function Rt(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:o}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(a,l)=>{var p,u;const{message:m}=r;return a.code==="invalid_enum_value"?{message:m??l.defaultError}:typeof l.data>"u"?{message:(p=m??n)!==null&&p!==void 0?p:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=m??t)!==null&&u!==void 0?u:l.defaultError}},description:o}}class kt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ws(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ws(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new jn,ctx:{common:e.parent.common,data:e.data,parsedType:ws(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Zf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const o={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ws(e)},i=this._parseSync({data:e,path:o.path,parent:o});return PT(o,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ws(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await(Zf(o)?o:Promise.resolve(o));return PT(n,i)}refine(e,t){const n=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,i)=>{const a=e(o),l=()=>i.addIssue({code:ke.custom,...n(o)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,t){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof t=="function"?t(n,o):t),!1))}_refinement(e){return new ao({schema:this,typeName:vt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Bo.create(this,this._def)}nullable(){return Os.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oo.create(this,this._def)}promise(){return ol.create(this,this._def)}or(e){return id.create([this,e],this._def)}and(e){return od.create(this,e,this._def)}transform(e){return new ao({...Rt(this._def),schema:this,typeName:vt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ld({...Rt(this._def),innerType:this,defaultValue:t,typeName:vt.ZodDefault})}brand(){return new g_({typeName:vt.ZodBranded,type:this,...Rt(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new fd({...Rt(this._def),innerType:this,catchValue:t,typeName:vt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return dd.create(this,e)}readonly(){return hd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qq=/^c[^\s-]{8,}$/i,Hq=/^[0-9a-z]+$/,Wq=/^[0-9A-HJKMNP-TV-Z]{26}$/,zq=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Kq=/^[a-z0-9_-]{21}$/i,Yq=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Qq=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let v_;const Zq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Jq=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,eH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xT="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tH=new RegExp(`^${xT}$`);function NT(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function rH(r){return new RegExp(`^${NT(r)}$`)}function kT(r){let e=`${xT}T${NT(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function nH(r,e){return!!((e==="v4"||!e)&&Zq.test(r)||(e==="v6"||!e)&&Jq.test(r))}class io extends kt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==We.string){const i=this._getOrReturnCtx(e);return Ve(i,{code:ke.invalid_type,expected:We.string,received:i.parsedType}),yt}const n=new jn;let o;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,l=e.data.length<i.value;(a||l)&&(o=this._getOrReturnCtx(e,o),a?Ve(o,{code:ke.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Ve(o,{code:ke.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Qq.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"email",code:ke.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")v_||(v_=new RegExp(Xq,"u")),v_.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"emoji",code:ke.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")zq.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"uuid",code:ke.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Kq.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"nanoid",code:ke.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")qq.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"cuid",code:ke.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Hq.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"cuid2",code:ke.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Wq.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"ulid",code:ke.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),Ve(o,{validation:"url",code:ke.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"regex",code:ke.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?kT(i).test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?tH.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?rH(i).test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Yq.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"duration",code:ke.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?nH(e.data,i.version)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"ip",code:ke.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?eH.test(e.data)||(o=this._getOrReturnCtx(e,o),Ve(o,{validation:"base64",code:ke.invalid_string,message:i.message}),n.dirty()):Ht.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(o=>e.test(o),{validation:t,code:ke.invalid_string,...nt.errToObj(n)})}_addCheck(e){return new io({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...nt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...nt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...nt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...nt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...nt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...nt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...nt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...nt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...nt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...nt.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...nt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...nt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...nt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...nt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...nt.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...nt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...nt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...nt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...nt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...nt.errToObj(t)})}nonempty(e){return this.min(1,nt.errToObj(e))}trim(){return new io({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new io({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new io({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}io.create=r=>{var e;return new io({checks:[],typeName:vt.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...Rt(r)})};function iH(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=t>n?t:n,i=parseInt(r.toFixed(o).replace(".","")),a=parseInt(e.toFixed(o).replace(".",""));return i%a/Math.pow(10,o)}class Ts extends kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==We.number){const i=this._getOrReturnCtx(e);return Ve(i,{code:ke.invalid_type,expected:We.number,received:i.parsedType}),yt}let n;const o=new jn;for(const i of this._def.checks)i.kind==="int"?Ht.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ve(n,{code:ke.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:ke.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:ke.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?iH(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:ke.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ve(n,{code:ke.not_finite,message:i.message}),o.dirty()):Ht.assertNever(i);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,nt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,nt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,nt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,nt.toString(t))}setLimit(e,t,n,o){return new Ts({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:nt.toString(o)}]})}_addCheck(e){return new Ts({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:nt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:nt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ht.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ts.create=r=>new Ts({checks:[],typeName:vt.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...Rt(r)});class As extends kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==We.bigint){const i=this._getOrReturnCtx(e);return Ve(i,{code:ke.invalid_type,expected:We.bigint,received:i.parsedType}),yt}let n;const o=new jn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:ke.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:ke.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:ke.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):Ht.assertNever(i);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,nt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,nt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,nt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,nt.toString(t))}setLimit(e,t,n,o){return new As({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:nt.toString(o)}]})}_addCheck(e){return new As({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}As.create=r=>{var e;return new As({checks:[],typeName:vt.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...Rt(r)})};class td extends kt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==We.boolean){const n=this._getOrReturnCtx(e);return Ve(n,{code:ke.invalid_type,expected:We.boolean,received:n.parsedType}),yt}return Xn(e.data)}}td.create=r=>new td({typeName:vt.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...Rt(r)});class Tu extends kt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==We.date){const i=this._getOrReturnCtx(e);return Ve(i,{code:ke.invalid_type,expected:We.date,received:i.parsedType}),yt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ve(i,{code:ke.invalid_date}),yt}const n=new jn;let o;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(o=this._getOrReturnCtx(e,o),Ve(o,{code:ke.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Ht.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tu({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:nt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:nt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Tu.create=r=>new Tu({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:vt.ZodDate,...Rt(r)});class rv extends kt{_parse(e){if(this._getType(e)!==We.symbol){const n=this._getOrReturnCtx(e);return Ve(n,{code:ke.invalid_type,expected:We.symbol,received:n.parsedType}),yt}return Xn(e.data)}}rv.create=r=>new rv({typeName:vt.ZodSymbol,...Rt(r)});class rd extends kt{_parse(e){if(this._getType(e)!==We.undefined){const n=this._getOrReturnCtx(e);return Ve(n,{code:ke.invalid_type,expected:We.undefined,received:n.parsedType}),yt}return Xn(e.data)}}rd.create=r=>new rd({typeName:vt.ZodUndefined,...Rt(r)});class nd extends kt{_parse(e){if(this._getType(e)!==We.null){const n=this._getOrReturnCtx(e);return Ve(n,{code:ke.invalid_type,expected:We.null,received:n.parsedType}),yt}return Xn(e.data)}}nd.create=r=>new nd({typeName:vt.ZodNull,...Rt(r)});class rl extends kt{constructor(){super(...arguments),this._any=!0}_parse(e){return Xn(e.data)}}rl.create=r=>new rl({typeName:vt.ZodAny,...Rt(r)});class Au extends kt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xn(e.data)}}Au.create=r=>new Au({typeName:vt.ZodUnknown,...Rt(r)});class Oa extends kt{_parse(e){const t=this._getOrReturnCtx(e);return Ve(t,{code:ke.invalid_type,expected:We.never,received:t.parsedType}),yt}}Oa.create=r=>new Oa({typeName:vt.ZodNever,...Rt(r)});class nv extends kt{_parse(e){if(this._getType(e)!==We.undefined){const n=this._getOrReturnCtx(e);return Ve(n,{code:ke.invalid_type,expected:We.void,received:n.parsedType}),yt}return Xn(e.data)}}nv.create=r=>new nv({typeName:vt.ZodVoid,...Rt(r)});class oo extends kt{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==We.array)return Ve(t,{code:ke.invalid_type,expected:We.array,received:t.parsedType}),yt;if(o.exactLength!==null){const a=t.data.length>o.exactLength.value,l=t.data.length<o.exactLength.value;(a||l)&&(Ve(t,{code:a?ke.too_big:ke.too_small,minimum:l?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(Ve(t,{code:ke.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(Ve(t,{code:ke.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,l)=>o.type._parseAsync(new Uo(t,a,t.path,l)))).then(a=>jn.mergeArray(n,a));const i=[...t.data].map((a,l)=>o.type._parseSync(new Uo(t,a,t.path,l)));return jn.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new oo({...this._def,minLength:{value:e,message:nt.toString(t)}})}max(e,t){return new oo({...this._def,maxLength:{value:e,message:nt.toString(t)}})}length(e,t){return new oo({...this._def,exactLength:{value:e,message:nt.toString(t)}})}nonempty(e){return this.min(1,e)}}oo.create=(r,e)=>new oo({type:r,minLength:null,maxLength:null,exactLength:null,typeName:vt.ZodArray,...Rt(e)});function nl(r){if(r instanceof Dr){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=Bo.create(nl(n))}return new Dr({...r._def,shape:()=>e})}else return r instanceof oo?new oo({...r._def,type:nl(r.element)}):r instanceof Bo?Bo.create(nl(r.unwrap())):r instanceof Os?Os.create(nl(r.unwrap())):r instanceof Fo?Fo.create(r.items.map(e=>nl(e))):r}class Dr extends kt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Ht.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==We.object){const u=this._getOrReturnCtx(e);return Ve(u,{code:ke.invalid_type,expected:We.object,received:u.parsedType}),yt}const{status:n,ctx:o}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Oa&&this._def.unknownKeys==="strip"))for(const u in o.data)a.includes(u)||l.push(u);const p=[];for(const u of a){const m=i[u],E=o.data[u];p.push({key:{status:"valid",value:u},value:m._parse(new Uo(o,E,o.path,u)),alwaysSet:u in o.data})}if(this._def.catchall instanceof Oa){const u=this._def.unknownKeys;if(u==="passthrough")for(const m of l)p.push({key:{status:"valid",value:m},value:{status:"valid",value:o.data[m]}});else if(u==="strict")l.length>0&&(Ve(o,{code:ke.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const m of l){const E=o.data[m];p.push({key:{status:"valid",value:m},value:u._parse(new Uo(o,E,o.path,m)),alwaysSet:m in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const u=[];for(const m of p){const E=await m.key,w=await m.value;u.push({key:E,value:w,alwaysSet:m.alwaysSet})}return u}).then(u=>jn.mergeObjectSync(n,u)):jn.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return nt.errToObj,new Dr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var o,i,a,l;const p=(a=(i=(o=this._def).errorMap)===null||i===void 0?void 0:i.call(o,t,n).message)!==null&&a!==void 0?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(l=nt.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new Dr({...this._def,unknownKeys:"strip"})}passthrough(){return new Dr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Dr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Dr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:vt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Dr({...this._def,catchall:e})}pick(e){const t={};return Ht.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new Dr({...this._def,shape:()=>t})}omit(e){const t={};return Ht.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new Dr({...this._def,shape:()=>t})}deepPartial(){return nl(this)}partial(e){const t={};return Ht.objectKeys(this.shape).forEach(n=>{const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()}),new Dr({...this._def,shape:()=>t})}required(e){const t={};return Ht.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Bo;)i=i._def.innerType;t[n]=i}}),new Dr({...this._def,shape:()=>t})}keyof(){return DT(Ht.objectKeys(this.shape))}}Dr.create=(r,e)=>new Dr({shape:()=>r,unknownKeys:"strip",catchall:Oa.create(),typeName:vt.ZodObject,...Rt(e)}),Dr.strictCreate=(r,e)=>new Dr({shape:()=>r,unknownKeys:"strict",catchall:Oa.create(),typeName:vt.ZodObject,...Rt(e)}),Dr.lazycreate=(r,e)=>new Dr({shape:r,unknownKeys:"strip",catchall:Oa.create(),typeName:vt.ZodObject,...Rt(e)});class id extends kt{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function o(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const a=i.map(l=>new Ai(l.ctx.common.issues));return Ve(t,{code:ke.invalid_union,unionErrors:a}),yt}if(t.common.async)return Promise.all(n.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(o);{let i;const a=[];for(const p of n){const u={...t,common:{...t.common,issues:[]},parent:null},m=p._parseSync({data:t.data,path:t.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=a.map(p=>new Ai(p));return Ve(t,{code:ke.invalid_union,unionErrors:l}),yt}}get options(){return this._def.options}}id.create=(r,e)=>new id({options:r,typeName:vt.ZodUnion,...Rt(e)});const Ra=r=>r instanceof sd?Ra(r.schema):r instanceof ao?Ra(r.innerType()):r instanceof ud?[r.value]:r instanceof Is?r.options:r instanceof cd?Ht.objectValues(r.enum):r instanceof ld?Ra(r._def.innerType):r instanceof rd?[void 0]:r instanceof nd?[null]:r instanceof Bo?[void 0,...Ra(r.unwrap())]:r instanceof Os?[null,...Ra(r.unwrap())]:r instanceof g_||r instanceof hd?Ra(r.unwrap()):r instanceof fd?Ra(r._def.innerType):[];class iv extends kt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==We.object)return Ve(t,{code:ke.invalid_type,expected:We.object,received:t.parsedType}),yt;const n=this.discriminator,o=t.data[n],i=this.optionsMap.get(o);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Ve(t,{code:ke.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),yt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const o=new Map;for(const i of t){const a=Ra(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(o.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);o.set(l,i)}}return new iv({typeName:vt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:o,...Rt(n)})}}function m_(r,e){const t=ws(r),n=ws(e);if(r===e)return{valid:!0,data:r};if(t===We.object&&n===We.object){const o=Ht.objectKeys(e),i=Ht.objectKeys(r).filter(l=>o.indexOf(l)!==-1),a={...r,...e};for(const l of i){const p=m_(r[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(t===We.array&&n===We.array){if(r.length!==e.length)return{valid:!1};const o=[];for(let i=0;i<r.length;i++){const a=r[i],l=e[i],p=m_(a,l);if(!p.valid)return{valid:!1};o.push(p.data)}return{valid:!0,data:o}}else return t===We.date&&n===We.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class od extends kt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(i,a)=>{if(h_(i)||h_(a))return yt;const l=m_(i.value,a.value);return l.valid?((p_(i)||p_(a))&&t.dirty(),{status:t.value,value:l.data}):(Ve(n,{code:ke.invalid_intersection_types}),yt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>o(i,a)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}od.create=(r,e,t)=>new od({left:r,right:e,typeName:vt.ZodIntersection,...Rt(t)});class Fo extends kt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==We.array)return Ve(n,{code:ke.invalid_type,expected:We.array,received:n.parsedType}),yt;if(n.data.length<this._def.items.length)return Ve(n,{code:ke.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),yt;!this._def.rest&&n.data.length>this._def.items.length&&(Ve(n,{code:ke.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((a,l)=>{const p=this._def.items[l]||this._def.rest;return p?p._parse(new Uo(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>jn.mergeArray(t,a)):jn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Fo({...this._def,rest:e})}}Fo.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fo({items:r,typeName:vt.ZodTuple,rest:null,...Rt(e)})};class ad extends kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==We.object)return Ve(n,{code:ke.invalid_type,expected:We.object,received:n.parsedType}),yt;const o=[],i=this._def.keyType,a=this._def.valueType;for(const l in n.data)o.push({key:i._parse(new Uo(n,l,n.path,l)),value:a._parse(new Uo(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?jn.mergeObjectAsync(t,o):jn.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof kt?new ad({keyType:e,valueType:t,typeName:vt.ZodRecord,...Rt(n)}):new ad({keyType:io.create(),valueType:e,typeName:vt.ZodRecord,...Rt(t)})}}class ov extends kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==We.map)return Ve(n,{code:ke.invalid_type,expected:We.map,received:n.parsedType}),yt;const o=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:o._parse(new Uo(n,l,n.path,[u,"key"])),value:i._parse(new Uo(n,p,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const p of a){const u=await p.key,m=await p.value;if(u.status==="aborted"||m.status==="aborted")return yt;(u.status==="dirty"||m.status==="dirty")&&t.dirty(),l.set(u.value,m.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const p of a){const u=p.key,m=p.value;if(u.status==="aborted"||m.status==="aborted")return yt;(u.status==="dirty"||m.status==="dirty")&&t.dirty(),l.set(u.value,m.value)}return{status:t.value,value:l}}}}ov.create=(r,e,t)=>new ov({valueType:e,keyType:r,typeName:vt.ZodMap,...Rt(t)});class Iu extends kt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==We.set)return Ve(n,{code:ke.invalid_type,expected:We.set,received:n.parsedType}),yt;const o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(Ve(n,{code:ke.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(Ve(n,{code:ke.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const i=this._def.valueType;function a(p){const u=new Set;for(const m of p){if(m.status==="aborted")return yt;m.status==="dirty"&&t.dirty(),u.add(m.value)}return{status:t.value,value:u}}const l=[...n.data.values()].map((p,u)=>i._parse(new Uo(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,t){return new Iu({...this._def,minSize:{value:e,message:nt.toString(t)}})}max(e,t){return new Iu({...this._def,maxSize:{value:e,message:nt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Iu.create=(r,e)=>new Iu({valueType:r,minSize:null,maxSize:null,typeName:vt.ZodSet,...Rt(e)});class il extends kt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==We.function)return Ve(t,{code:ke.invalid_type,expected:We.function,received:t.parsedType}),yt;function n(l,p){return ev({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Jp(),el].filter(u=>!!u),issueData:{code:ke.invalid_arguments,argumentsError:p}})}function o(l,p){return ev({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Jp(),el].filter(u=>!!u),issueData:{code:ke.invalid_return_type,returnTypeError:p}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof ol){const l=this;return Xn(async function(...p){const u=new Ai([]),m=await l._def.args.parseAsync(p,i).catch(R=>{throw u.addIssue(n(p,R)),u}),E=await Reflect.apply(a,this,m);return await l._def.returns._def.type.parseAsync(E,i).catch(R=>{throw u.addIssue(o(E,R)),u})})}else{const l=this;return Xn(function(...p){const u=l._def.args.safeParse(p,i);if(!u.success)throw new Ai([n(p,u.error)]);const m=Reflect.apply(a,this,u.data),E=l._def.returns.safeParse(m,i);if(!E.success)throw new Ai([o(m,E.error)]);return E.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new il({...this._def,args:Fo.create(e).rest(Au.create())})}returns(e){return new il({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new il({args:e||Fo.create([]).rest(Au.create()),returns:t||Au.create(),typeName:vt.ZodFunction,...Rt(n)})}}class sd extends kt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}sd.create=(r,e)=>new sd({getter:r,typeName:vt.ZodLazy,...Rt(e)});class ud extends kt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ve(t,{received:t.data,code:ke.invalid_literal,expected:this._def.value}),yt}return{status:"valid",value:e.data}}get value(){return this._def.value}}ud.create=(r,e)=>new ud({value:r,typeName:vt.ZodLiteral,...Rt(e)});function DT(r,e){return new Is({values:r,typeName:vt.ZodEnum,...Rt(e)})}class Is extends kt{constructor(){super(...arguments),Jf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return Ve(t,{expected:Ht.joinValues(n),received:t.parsedType,code:ke.invalid_type}),yt}if(tv(this,Jf)||CT(this,Jf,new Set(this._def.values)),!tv(this,Jf).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Ve(t,{received:t.data,code:ke.invalid_enum_value,options:n}),yt}return Xn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Is.create(e,{...this._def,...t})}exclude(e,t=this._def){return Is.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Jf=new WeakMap,Is.create=DT;class cd extends kt{constructor(){super(...arguments),ed.set(this,void 0)}_parse(e){const t=Ht.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==We.string&&n.parsedType!==We.number){const o=Ht.objectValues(t);return Ve(n,{expected:Ht.joinValues(o),received:n.parsedType,code:ke.invalid_type}),yt}if(tv(this,ed)||CT(this,ed,new Set(Ht.getValidEnumValues(this._def.values))),!tv(this,ed).has(e.data)){const o=Ht.objectValues(t);return Ve(n,{received:n.data,code:ke.invalid_enum_value,options:o}),yt}return Xn(e.data)}get enum(){return this._def.values}}ed=new WeakMap,cd.create=(r,e)=>new cd({values:r,typeName:vt.ZodNativeEnum,...Rt(e)});class ol extends kt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==We.promise&&t.common.async===!1)return Ve(t,{code:ke.invalid_type,expected:We.promise,received:t.parsedType}),yt;const n=t.parsedType===We.promise?t.data:Promise.resolve(t.data);return Xn(n.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ol.create=(r,e)=>new ol({type:r,typeName:vt.ZodPromise,...Rt(e)});class ao extends kt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:a=>{Ve(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){const a=o.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async l=>{if(t.value==="aborted")return yt;const p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?yt:p.status==="dirty"||t.value==="dirty"?tl(p.value):p});{if(t.value==="aborted")return yt;const l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?yt:l.status==="dirty"||t.value==="dirty"?tl(l.value):l}}if(o.type==="refinement"){const a=l=>{const p=o.refinement(l,i);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?yt:(l.status==="dirty"&&t.dirty(),a(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?yt:(l.status==="dirty"&&t.dirty(),a(l.value).then(()=>({status:t.value,value:l.value}))))}if(o.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Xf(a))return a;const l=o.transform(a.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Xf(a)?Promise.resolve(o.transform(a.value,i)).then(l=>({status:t.value,value:l})):a);Ht.assertNever(o)}}ao.create=(r,e,t)=>new ao({schema:r,typeName:vt.ZodEffects,effect:e,...Rt(t)}),ao.createWithPreprocess=(r,e,t)=>new ao({schema:e,effect:{type:"preprocess",transform:r},typeName:vt.ZodEffects,...Rt(t)});class Bo extends kt{_parse(e){return this._getType(e)===We.undefined?Xn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bo.create=(r,e)=>new Bo({innerType:r,typeName:vt.ZodOptional,...Rt(e)});class Os extends kt{_parse(e){return this._getType(e)===We.null?Xn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Os.create=(r,e)=>new Os({innerType:r,typeName:vt.ZodNullable,...Rt(e)});class ld extends kt{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===We.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ld.create=(r,e)=>new ld({innerType:r,typeName:vt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Rt(e)});class fd extends kt{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Zf(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ai(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ai(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}fd.create=(r,e)=>new fd({innerType:r,typeName:vt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Rt(e)});class av extends kt{_parse(e){if(this._getType(e)!==We.nan){const n=this._getOrReturnCtx(e);return Ve(n,{code:ke.invalid_type,expected:We.nan,received:n.parsedType}),yt}return{status:"valid",value:e.data}}}av.create=r=>new av({typeName:vt.ZodNaN,...Rt(r)});const oH=Symbol("zod_brand");class g_ extends kt{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class dd extends kt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?yt:i.status==="dirty"?(t.dirty(),tl(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?yt:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,t){return new dd({in:e,out:t,typeName:vt.ZodPipeline})}}class hd extends kt{_parse(e){const t=this._def.innerType._parse(e),n=o=>(Xf(o)&&(o.value=Object.freeze(o.value)),o);return Zf(t)?t.then(o=>n(o)):n(t)}unwrap(){return this._def.innerType}}hd.create=(r,e)=>new hd({innerType:r,typeName:vt.ZodReadonly,...Rt(e)});function MT(r,e={},t){return r?rl.create().superRefine((n,o)=>{var i,a;if(!r(n)){const l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;o.addIssue({code:"custom",...u,fatal:p})}}):rl.create()}const aH={object:Dr.lazycreate};var vt;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(vt||(vt={}));const sH=(r,e={message:`Input not instance of ${r.name}`})=>MT(t=>t instanceof r,e),LT=io.create,UT=Ts.create,uH=av.create,cH=As.create,FT=td.create,lH=Tu.create,fH=rv.create,dH=rd.create,hH=nd.create,pH=rl.create,vH=Au.create,mH=Oa.create,gH=nv.create,yH=oo.create,_H=Dr.create,EH=Dr.strictCreate,bH=id.create,SH=iv.create,wH=od.create,TH=Fo.create,AH=ad.create,IH=ov.create,OH=Iu.create,RH=il.create,CH=sd.create,PH=ud.create,xH=Is.create,NH=cd.create,kH=ol.create,BT=ao.create,DH=Bo.create,MH=Os.create,LH=ao.createWithPreprocess,UH=dd.create;var yr=Object.freeze({__proto__:null,defaultErrorMap:el,setErrorMap:$q,getErrorMap:Jp,makeIssue:ev,EMPTY_PATH:Vq,addIssueToContext:Ve,ParseStatus:jn,INVALID:yt,DIRTY:tl,OK:Xn,isAborted:h_,isDirty:p_,isValid:Xf,isAsync:Zf,get util(){return Ht},get objectUtil(){return d_},ZodParsedType:We,getParsedType:ws,ZodType:kt,datetimeRegex:kT,ZodString:io,ZodNumber:Ts,ZodBigInt:As,ZodBoolean:td,ZodDate:Tu,ZodSymbol:rv,ZodUndefined:rd,ZodNull:nd,ZodAny:rl,ZodUnknown:Au,ZodNever:Oa,ZodVoid:nv,ZodArray:oo,ZodObject:Dr,ZodUnion:id,ZodDiscriminatedUnion:iv,ZodIntersection:od,ZodTuple:Fo,ZodRecord:ad,ZodMap:ov,ZodSet:Iu,ZodFunction:il,ZodLazy:sd,ZodLiteral:ud,ZodEnum:Is,ZodNativeEnum:cd,ZodPromise:ol,ZodEffects:ao,ZodTransformer:ao,ZodOptional:Bo,ZodNullable:Os,ZodDefault:ld,ZodCatch:fd,ZodNaN:av,BRAND:oH,ZodBranded:g_,ZodPipeline:dd,ZodReadonly:hd,custom:MT,Schema:kt,ZodSchema:kt,late:aH,get ZodFirstPartyTypeKind(){return vt},coerce:{string:r=>io.create({...r,coerce:!0}),number:r=>Ts.create({...r,coerce:!0}),boolean:r=>td.create({...r,coerce:!0}),bigint:r=>As.create({...r,coerce:!0}),date:r=>Tu.create({...r,coerce:!0})},any:pH,array:yH,bigint:cH,boolean:FT,date:lH,discriminatedUnion:SH,effect:BT,enum:xH,function:RH,instanceof:sH,intersection:wH,lazy:CH,literal:PH,map:IH,nan:uH,nativeEnum:NH,never:mH,null:hH,nullable:MH,number:UT,object:_H,oboolean:()=>FT().optional(),onumber:()=>UT().optional(),optional:DH,ostring:()=>LT().optional(),pipeline:UH,preprocess:LH,promise:kH,record:AH,set:OH,strictObject:EH,string:LT,symbol:fH,transformer:BT,tuple:TH,undefined:dH,union:bH,unknown:vH,void:gH,NEVER:yt,ZodIssueCode:ke,quotelessJson:Gq,ZodError:Ai});const jT=yr.object({status:yr.literal(409),data:yr.object({item_id:yr.string()})}),FH=yr.object({status:yr.number(),data:yr.object({error:yr.string(),error_code:yr.string()})}),BH=yr.object({status:yr.literal(403)});class jH{isConflictError(e){return jT.safeParse(e).success}isQuotaError(e){return BH.safeParse(e).success}buildConflictResponse(e){const t=this.buildFailureResponseFromException(e),n=jT.safeParse(e),o=n.success?n.data.data.item_id:"";return{...t,details:{id:o}}}buildFailureResponseFromException(e){const t=e instanceof Error?e.message:"Unknown error occurred",n=FH.safeParse(e);return{message:n.success?n.data.data.error:t,error_code:n.success?n.data.data.error_code:"",status:n.success?n.data.status:400}}buildFailureResponse(e){return{message:e.statusText||"Request failed",status:e.status}}}const jo=new jH,GH="/documents/v2/item";class $H{async postDocument({article:e,url:t}){try{const n={item_type:"URL",url:t,item:JSON.stringify(e)};return(await Jc(GH,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).data}catch(n){return jo.isConflictError(n)?jo.buildConflictResponse(n):jo.isQuotaError(n)?{status:403,message:"Quota exceeded"}:jo.buildFailureResponseFromException(n)}}async onPostDocumentMessage(e,t){const n=await this.postDocument(e);return t(n),!0}}const VH=new $H,qH="/documents/v2/item/upload";class HH{async postPdfDocument({blob:e,filename:t,url:n}){try{const o=new FormData;return o.append("file",e,t),o.append("url",n),(await Jc(qH,{method:"POST",headers:{"X-platform":"read_extension"},body:o})).data}catch(o){return jo.isConflictError(o)?jo.buildConflictResponse(o):jo.isQuotaError(o)?{status:403,message:"Quota exceeded"}:jo.buildFailureResponseFromException(o)}}async onPostPdfDocumentMessage(e,t){try{const n=await fetch(e.url);if(!n.ok){const a=jo.buildFailureResponse(n);return t(a),!0}const o=await n.blob(),i=await this.postPdfDocument({blob:o,filename:e.filename,url:e.url});t(i)}catch(n){t(jo.buildFailureResponse(n))}return!0}}const WH=new HH;var y_=function(r,e){return y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},y_(r,e)};function zH(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");y_(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Rs=function(){return Rs=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Rs.apply(this,arguments)};function GT(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,[])).next())})}function $T(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Gi(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i}function E_(r,e,t){if(arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var Ze={IS:"is",IS_NOT:"is not",CONTAINS:"contains",DOES_NOT_CONTAIN:"does not contain",LESS_THAN:"less",LESS_THAN_EQUALS:"less or equal",GREATER_THAN:"greater",GREATER_THAN_EQUALS:"greater or equal",VERSION_LESS_THAN:"version less",VERSION_LESS_THAN_EQUALS:"version less or equal",VERSION_GREATER_THAN:"version greater",VERSION_GREATER_THAN_EQUALS:"version greater or equal",SET_IS:"set is",SET_IS_NOT:"set is not",SET_CONTAINS:"set contains",SET_DOES_NOT_CONTAIN:"set does not contain",SET_CONTAINS_ANY:"set contains any",SET_DOES_NOT_CONTAIN_ANY:"set does not contain any",REGEX_MATCH:"regex match",REGEX_DOES_NOT_MATCH:"regex does not match"},KH=function(r){for(var e=[],t=0,n=0;n<r.length;n++){var o=r.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)==55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)==56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return Uint8Array.from(e)},sv=-862048943,uv=461845907,cv=15,YH=13,QH=5,XH=-430675100,ZH=function(r,e){e===void 0&&(e=0);for(var t=KH(r),n=t.length,o=n>>2,i=e,a=0;a<o;a++){var l=a<<2,p=t6(t,l);i=JH(p,i)}var u=o<<2,m=0;switch(n-u){case 3:m^=t[u+2]<<16,m^=t[u+1]<<8,m^=t[u],m=Math.imul(m,sv),m=pd(m,cv),m=Math.imul(m,uv),i^=m;break;case 2:m^=t[u+1]<<8,m^=t[u],m=Math.imul(m,sv),m=pd(m,cv),m=Math.imul(m,uv),i^=m;break;case 1:m^=t[u],m=Math.imul(m,sv),m=pd(m,cv),m=Math.imul(m,uv),i^=m;break}return i^=n,e6(i)>>>0},JH=function(r,e){var t=r,n=e;return t=Math.imul(t,sv),t=pd(t,cv),t=Math.imul(t,uv),n^=t,n=pd(n,YH),n=Math.imul(n,QH),n+XH|0},e6=function(r){var e=r;return e^=e>>>16,e=Math.imul(e,-2048144789),e^=e>>>13,e=Math.imul(e,-1028477387),e^=e>>>16,e},pd=function(r,e,t){t===void 0&&(t=32),e>t&&(e=e%t);var n=4294967295<<t-e>>>0,o=(r&n)>>>0>>>t-e>>>0;return(r<<e|o)>>>0},t6=function(r,e){e===void 0&&(e=0);var t=r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3];return r6(t)},r6=function(r){return(r&-16777216)>>>24|(r&16711680)>>>8|(r&65280)<<8|(r&255)<<24},VT=function(r,e){var t,n;if(!(!e||e.length===0)){try{for(var o=Gi(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(!a||!r||typeof r!="object")return;r=r[a]}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}if(r)return r}},n6="(\\d+)\\.(\\d+)",i6="(\\d+)",o6="(-(([-\\w]+\\.?)*))?",a6="^".concat(n6,"(\\.").concat(i6).concat(o6,")?$"),s6=function(){function r(e,t,n,o){o===void 0&&(o=void 0),this.major=e,this.minor=t,this.patch=n,this.preRelease=o}return r.parse=function(e){if(e){var t=new RegExp(a6).exec(e);if(t){var n=Number(t[1]),o=Number(t[2]);if(!(isNaN(n)||isNaN(o))){var i=Number(t[4])||0,a=t[5]||void 0;return new r(n,o,i,a)}}}},r.prototype.compareTo=function(e){return this.major>e.major?1:this.major<e.major?-1:this.minor>e.minor?1:this.minor<e.minor?-1:this.patch>e.patch?1:this.patch<e.patch||this.preRelease&&!e.preRelease?-1:!this.preRelease&&e.preRelease?1:this.preRelease&&e.preRelease?this.preRelease>e.preRelease?1:this.preRelease<e.preRelease?-1:0:0},r}(),u6=function(){function r(){}return r.prototype.evaluate=function(e,t){var n,o,i={},a={context:e,result:i};try{for(var l=Gi(t),p=l.next();!p.done;p=l.next()){var u=p.value,m=this.evaluateFlag(a,u);m&&(i[u.key]=m)}}catch(E){n={error:E}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return i},r.prototype.evaluateFlag=function(e,t){var n,o,i;try{for(var a=Gi(t.segments),l=a.next();!l.done;l=a.next()){var p=l.value;if(i=this.evaluateSegment(e,t,p),i){var u=Rs(Rs(Rs({},t.metadata),p.metadata),i.metadata);i=Rs(Rs({},i),{metadata:u});break}}}catch(m){n={error:m}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i},r.prototype.evaluateSegment=function(e,t,n){var o,i,a,l;if(!n.conditions){var p=this.bucket(e,n);return p!==void 0?t.variants[p]:void 0}try{for(var u=Gi(n.conditions),m=u.next();!m.done;m=u.next()){var E=m.value,w=!0;try{for(var R=(a=void 0,Gi(E)),S=R.next();!S.done;S=R.next()){var P=S.value;if(w=this.matchCondition(e,P),!w)break}}catch(x){a={error:x}}finally{try{S&&!S.done&&(l=R.return)&&l.call(R)}finally{if(a)throw a.error}}if(w){var p=this.bucket(e,n);return p!==void 0?t.variants[p]:void 0}}}catch(x){o={error:x}}finally{try{m&&!m.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}},r.prototype.matchCondition=function(e,t){var n=VT(e,t.selector);if(n)if(this.isSetOperator(t.op)){var o=this.coerceStringArray(n);return o?this.matchSet(o,t.op,t.values):!1}else{var i=this.coerceString(n);return i!==void 0?this.matchString(i,t.op,t.values):!1}else return this.matchNull(t.op,t.values)},r.prototype.getHash=function(e){return ZH(e)},r.prototype.bucket=function(e,t){var n,o,i,a;if(!t.bucket)return t.variant;var l=this.coerceString(VT(e,t.bucket.selector));if(!l||l.length===0)return t.variant;var p="".concat(t.bucket.salt,"/").concat(l),u=this.getHash(p),m=u%100,E=Math.floor(u/100);try{for(var w=Gi(t.bucket.allocations),R=w.next();!R.done;R=w.next()){var S=R.value,P=S.range[0],x=S.range[1];if(m>=P&&m<x)try{for(var k=(i=void 0,Gi(S.distributions)),B=k.next();!B.done;B=k.next()){var G=B.value,X=G.range[0],F=G.range[1];if(E>=X&&E<F)return G.variant}}catch(j){i={error:j}}finally{try{B&&!B.done&&(a=k.return)&&a.call(k)}finally{if(i)throw i.error}}}}catch(j){n={error:j}}finally{try{R&&!R.done&&(o=w.return)&&o.call(w)}finally{if(n)throw n.error}}return t.variant},r.prototype.matchNull=function(e,t){var n=this.containsNone(t);switch(e){case Ze.IS:case Ze.CONTAINS:case Ze.LESS_THAN:case Ze.LESS_THAN_EQUALS:case Ze.GREATER_THAN:case Ze.GREATER_THAN_EQUALS:case Ze.VERSION_LESS_THAN:case Ze.VERSION_LESS_THAN_EQUALS:case Ze.VERSION_GREATER_THAN:case Ze.VERSION_GREATER_THAN_EQUALS:case Ze.SET_IS:case Ze.SET_CONTAINS:case Ze.SET_CONTAINS_ANY:return n;case Ze.IS_NOT:case Ze.DOES_NOT_CONTAIN:case Ze.SET_DOES_NOT_CONTAIN:case Ze.SET_DOES_NOT_CONTAIN_ANY:return!n;default:return!1}},r.prototype.matchSet=function(e,t,n){switch(t){case Ze.SET_IS:return this.setEquals(e,n);case Ze.SET_IS_NOT:return!this.setEquals(e,n);case Ze.SET_CONTAINS:return this.matchesSetContainsAll(e,n);case Ze.SET_DOES_NOT_CONTAIN:return!this.matchesSetContainsAll(e,n);case Ze.SET_CONTAINS_ANY:return this.matchesSetContainsAny(e,n);case Ze.SET_DOES_NOT_CONTAIN_ANY:return!this.matchesSetContainsAny(e,n);default:return!1}},r.prototype.matchString=function(e,t,n){var o=this;switch(t){case Ze.IS:return this.matchesIs(e,n);case Ze.IS_NOT:return!this.matchesIs(e,n);case Ze.CONTAINS:return this.matchesContains(e,n);case Ze.DOES_NOT_CONTAIN:return!this.matchesContains(e,n);case Ze.LESS_THAN:case Ze.LESS_THAN_EQUALS:case Ze.GREATER_THAN:case Ze.GREATER_THAN_EQUALS:return this.matchesComparable(e,t,n,function(i){return o.parseNumber(i)},this.comparator);case Ze.VERSION_LESS_THAN:case Ze.VERSION_LESS_THAN_EQUALS:case Ze.VERSION_GREATER_THAN:case Ze.VERSION_GREATER_THAN_EQUALS:return this.matchesComparable(e,t,n,function(i){return s6.parse(i)},this.versionComparator);case Ze.REGEX_MATCH:return this.matchesRegex(e,n);case Ze.REGEX_DOES_NOT_MATCH:return!this.matchesRegex(e,n);default:return!1}},r.prototype.matchesIs=function(e,t){if(this.containsBooleans(t)){var n=e.toLowerCase();if(n==="true"||n==="false")return t.some(function(o){return o.toLowerCase()===n})}return t.some(function(o){return e===o})},r.prototype.matchesContains=function(e,t){var n,o;try{for(var i=Gi(t),a=i.next();!a.done;a=i.next()){var l=a.value;if(e.toLowerCase().includes(l.toLowerCase()))return!0}}catch(p){n={error:p}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return!1},r.prototype.matchesComparable=function(e,t,n,o,i){var a=this,l=o(e),p=n.map(function(u){return o(u)}).filter(function(u){return u!==void 0});return l===void 0||p.length===0?n.some(function(u){return a.comparator(e,t,u)}):p.some(function(u){return i(l,t,u)})},r.prototype.comparator=function(e,t,n){switch(t){case Ze.LESS_THAN:case Ze.VERSION_LESS_THAN:return e<n;case Ze.LESS_THAN_EQUALS:case Ze.VERSION_LESS_THAN_EQUALS:return e<=n;case Ze.GREATER_THAN:case Ze.VERSION_GREATER_THAN:return e>n;case Ze.GREATER_THAN_EQUALS:case Ze.VERSION_GREATER_THAN_EQUALS:return e>=n;default:return!1}},r.prototype.versionComparator=function(e,t,n){var o=e.compareTo(n);switch(t){case Ze.LESS_THAN:case Ze.VERSION_LESS_THAN:return o<0;case Ze.LESS_THAN_EQUALS:case Ze.VERSION_LESS_THAN_EQUALS:return o<=0;case Ze.GREATER_THAN:case Ze.VERSION_GREATER_THAN:return o>0;case Ze.GREATER_THAN_EQUALS:case Ze.VERSION_GREATER_THAN_EQUALS:return o>=0;default:return!1}},r.prototype.matchesRegex=function(e,t){return t.some(function(n){return!!new RegExp(n).exec(e)})},r.prototype.containsNone=function(e){return e.some(function(t){return t==="(none)"})},r.prototype.containsBooleans=function(e){return e.some(function(t){switch(t.toLowerCase()){case"true":case"false":return!0;default:return!1}})},r.prototype.parseNumber=function(e){var t;return(t=Number(e))!==null&&t!==void 0?t:void 0},r.prototype.coerceString=function(e){if(e)return typeof e=="object"?JSON.stringify(e):String(e)},r.prototype.coerceStringArray=function(e){var t=this;if(Array.isArray(e)){var n=e;return n.map(function(a){return t.coerceString(a)}).filter(Boolean)}var o=String(e);try{var i=JSON.parse(o);if(Array.isArray(i)){var n=e;return n.map(function(l){return t.coerceString(l)}).filter(Boolean)}else return}catch{return}},r.prototype.isSetOperator=function(e){switch(e){case Ze.SET_IS:case Ze.SET_IS_NOT:case Ze.SET_CONTAINS:case Ze.SET_DOES_NOT_CONTAIN:case Ze.SET_CONTAINS_ANY:case Ze.SET_DOES_NOT_CONTAIN_ANY:return!0;default:return!1}},r.prototype.setEquals=function(e,t){var n=new Set(e),o=new Set(t);return n.size===o.size&&E_([],__(o),!1).every(function(i){return n.has(i)})},r.prototype.matchesSetContainsAll=function(e,t){var n,o;if(e.length<t.length)return!1;try{for(var i=Gi(t),a=i.next();!a.done;a=i.next()){var l=a.value;if(!this.matchesIs(l,e))return!1}}catch(p){n={error:p}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return!0},r.prototype.matchesSetContainsAny=function(e,t){var n,o;try{for(var i=Gi(t),a=i.next();!a.done;a=i.next()){var l=a.value;if(this.matchesIs(l,e))return!0}}catch(p){n={error:p}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return!1},r}(),c6=function(r,e){var t,n,o=Rs({},r),i=[],a=e||Object.keys(o);try{for(var l=Gi(a),p=l.next();!p.done;p=l.next()){var u=p.value,m=qT(u,o);m&&i.push.apply(i,E_([],__(m),!1))}}catch(E){t={error:E}}finally{try{p&&!p.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return i},qT=function(r,e,t){var n,o;t===void 0&&(t=[]);var i=e[r];if(i){if(!i.dependencies||i.dependencies.length===0)return delete e[i.key],[i]}else return;t.push(i.key);var a=[],l=function(E){if(t.some(function(R){return R===E}))throw Error("Detected a cycle between flags ".concat(t));var w=qT(E,e,t);w&&a.push.apply(a,E_([],__(w),!1))};try{for(var p=Gi(i.dependencies),u=p.next();!u.done;u=p.next()){var m=u.value;l(m)}}catch(E){n={error:E}}finally{try{u&&!u.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return a.push(i),t.pop(),delete e[i.key],a};const HT="3.7.5",l6=HT,f6=typeof atob=="function",d6=typeof btoa=="function",al=typeof Buffer=="function",WT=typeof TextDecoder=="function"?new TextDecoder:void 0,zT=typeof TextEncoder=="function"?new TextEncoder:void 0,vd=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),lv=(r=>{let e={};return r.forEach((t,n)=>e[t]=n),e})(vd),h6=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Nn=String.fromCharCode.bind(String),KT=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):r=>new Uint8Array(Array.prototype.slice.call(r,0)),YT=r=>r.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),QT=r=>r.replace(/[^A-Za-z0-9\+\/]/g,""),XT=r=>{let e,t,n,o,i="";const a=r.length%3;for(let l=0;l<r.length;){if((t=r.charCodeAt(l++))>255||(n=r.charCodeAt(l++))>255||(o=r.charCodeAt(l++))>255)throw new TypeError("invalid character found");e=t<<16|n<<8|o,i+=vd[e>>18&63]+vd[e>>12&63]+vd[e>>6&63]+vd[e&63]}return a?i.slice(0,a-3)+"===".substring(a):i},b_=d6?r=>btoa(r):al?r=>Buffer.from(r,"binary").toString("base64"):XT,S_=al?r=>Buffer.from(r).toString("base64"):r=>{let t=[];for(let n=0,o=r.length;n<o;n+=4096)t.push(Nn.apply(null,r.subarray(n,n+4096)));return b_(t.join(""))},fv=(r,e=!1)=>e?YT(S_(r)):S_(r),p6=r=>{if(r.length<2){var e=r.charCodeAt(0);return e<128?r:e<2048?Nn(192|e>>>6)+Nn(128|e&63):Nn(224|e>>>12&15)+Nn(128|e>>>6&63)+Nn(128|e&63)}else{var e=65536+(r.charCodeAt(0)-55296)*1024+(r.charCodeAt(1)-56320);return Nn(240|e>>>18&7)+Nn(128|e>>>12&63)+Nn(128|e>>>6&63)+Nn(128|e&63)}},v6=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ZT=r=>r.replace(v6,p6),JT=al?r=>Buffer.from(r,"utf8").toString("base64"):zT?r=>S_(zT.encode(r)):r=>b_(ZT(r)),sl=(r,e=!1)=>e?YT(JT(r)):JT(r),eA=r=>sl(r,!0),m6=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,g6=r=>{switch(r.length){case 4:var e=(7&r.charCodeAt(0))<<18|(63&r.charCodeAt(1))<<12|(63&r.charCodeAt(2))<<6|63&r.charCodeAt(3),t=e-65536;return Nn((t>>>10)+55296)+Nn((t&1023)+56320);case 3:return Nn((15&r.charCodeAt(0))<<12|(63&r.charCodeAt(1))<<6|63&r.charCodeAt(2));default:return Nn((31&r.charCodeAt(0))<<6|63&r.charCodeAt(1))}},tA=r=>r.replace(m6,g6),rA=r=>{if(r=r.replace(/\s+/g,""),!h6.test(r))throw new TypeError("malformed base64.");r+="==".slice(2-(r.length&3));let e,t="",n,o;for(let i=0;i<r.length;)e=lv[r.charAt(i++)]<<18|lv[r.charAt(i++)]<<12|(n=lv[r.charAt(i++)])<<6|(o=lv[r.charAt(i++)]),t+=n===64?Nn(e>>16&255):o===64?Nn(e>>16&255,e>>8&255):Nn(e>>16&255,e>>8&255,e&255);return t},w_=f6?r=>atob(QT(r)):al?r=>Buffer.from(r,"base64").toString("binary"):rA,nA=al?r=>KT(Buffer.from(r,"base64")):r=>KT(w_(r).split("").map(e=>e.charCodeAt(0))),iA=r=>nA(oA(r)),y6=al?r=>Buffer.from(r,"base64").toString("utf8"):WT?r=>WT.decode(nA(r)):r=>tA(w_(r)),oA=r=>QT(r.replace(/[-_]/g,e=>e=="-"?"+":"/")),T_=r=>y6(oA(r)),_6=r=>{if(typeof r!="string")return!1;const e=r.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},aA=r=>({value:r,enumerable:!1,writable:!0,configurable:!0}),sA=function(){const r=(e,t)=>Object.defineProperty(String.prototype,e,aA(t));r("fromBase64",function(){return T_(this)}),r("toBase64",function(e){return sl(this,e)}),r("toBase64URI",function(){return sl(this,!0)}),r("toBase64URL",function(){return sl(this,!0)}),r("toUint8Array",function(){return iA(this)})},uA=function(){const r=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,aA(t));r("toBase64",function(e){return fv(this,e)}),r("toBase64URI",function(){return fv(this,!0)}),r("toBase64URL",function(){return fv(this,!0)})},cA={version:HT,VERSION:l6,atob:w_,atobPolyfill:rA,btoa:b_,btoaPolyfill:XT,fromBase64:T_,toBase64:sl,encode:sl,encodeURI:eA,encodeURL:eA,utob:ZT,btou:tA,decode:T_,isValid:_6,fromUint8Array:fv,toUint8Array:iA,extendString:sA,extendUint8Array:uA,extendBuiltins:()=>{sA(),uA()}};var lA=function(r){zH(e,r);function e(t,n){var o=r.call(this,n)||this;return o.statusCode=t,Object.setPrototypeOf(o,e.prototype),o}return e}(Error),E6=function(){function r(e,t,n){this.deploymentKey=e,this.serverUrl=t,this.httpClient=n}return r.prototype.getVariants=function(e,t){return GT(this,void 0,void 0,function(){var n,o,i;return $T(this,function(a){switch(a.label){case 0:return n=cA.encodeURL(JSON.stringify(e)),o={Authorization:"Api-Key ".concat(this.deploymentKey),"X-Amp-Exp-User":n},t!=null&&t.flagKeys&&(o["X-Amp-Exp-Flag-Keys"]=cA.encodeURL(JSON.stringify(t.flagKeys))),t!=null&&t.trackingOption&&(o["X-Amp-Exp-Track"]=t.trackingOption),[4,this.httpClient.request({requestUrl:"".concat(this.serverUrl,"/sdk/v2/vardata?v=0"),method:"GET",headers:o,timeoutMillis:t==null?void 0:t.timeoutMillis})];case 1:if(i=a.sent(),i.status!=200)throw new lA(i.status,"Fetch error response: status=".concat(i.status));return[2,JSON.parse(i.body)]}})})},r}(),b6=function(){function r(e,t,n){this.deploymentKey=e,this.serverUrl=t,this.httpClient=n}return r.prototype.getFlags=function(e){return GT(this,void 0,void 0,function(){var t,n,o;return $T(this,function(i){switch(i.label){case 0:return t={Authorization:"Api-Key ".concat(this.deploymentKey)},e!=null&&e.libraryName&&(e!=null&&e.libraryVersion)&&(t["X-Amp-Exp-Library"]="".concat(e.libraryName,"/").concat(e.libraryVersion)),[4,this.httpClient.request({requestUrl:"".concat(this.serverUrl,"/sdk/v2/flags"),method:"GET",headers:t,timeoutMillis:e==null?void 0:e.timeoutMillis})];case 1:if(n=i.sent(),n.status!=200)throw Error("Flags error response: status=".concat(n.status));return o=JSON.parse(n.body),[2,o.reduce(function(a,l){return a[l.key]=l,a},{})]}})})},r}(),ul=typeof globalThis<"u"?globalThis:global||self,S6=function(){function r(e,t){this.poller=void 0,this.action=e,this.ms=t}return r.prototype.start=function(){this.poller||(this.poller=ul.setInterval(this.action,this.ms),this.action())},r.prototype.stop=function(){this.poller&&(ul.clearInterval(this.poller),this.poller=void 0)},r}(),A_={exports:{}};(function(r,e){(function(t,n){var o="0.7.33",i="",a="?",l="function",p="undefined",u="object",m="string",E="major",w="model",R="name",S="type",P="vendor",x="version",k="architecture",B="console",G="mobile",X="tablet",F="smarttv",j="wearable",H="embedded",re=350,te="Amazon",fe="Apple",Te="ASUS",Ce="BlackBerry",$="Browser",J="Chrome",ge="Edge",ee="Firefox",Ie="Google",we="Huawei",Be="LG",st="Microsoft",At="Motorola",Ar="Opera",Ir="Samsung",sr="Sharp",Mt="Sony",ur="Xiaomi",Or="Zebra",Kr="Facebook",pr=function(it,qe){var ye={};for(var zt in it)qe[zt]&&qe[zt].length%2===0?ye[zt]=qe[zt].concat(it[zt]):ye[zt]=it[zt];return ye},Wt=function(it){for(var qe={},ye=0;ye<it.length;ye++)qe[it[ye].toUpperCase()]=it[ye];return qe},xr=function(it,qe){return typeof it===m?Er(qe).indexOf(Er(it))!==-1:!1},Er=function(it){return it.toLowerCase()},Yr=function(it){return typeof it===m?it.replace(/[^\d\.]/g,i).split(".")[0]:n},_t=function(it,qe){if(typeof it===m)return it=it.replace(/^\s\s*/,i),typeof qe===p?it:it.substring(0,re)},le=function(it,qe){for(var ye=0,zt,It,Gn,mt,kn,Lr;ye<qe.length&&!kn;){var ce=qe[ye],K=qe[ye+1];for(zt=It=0;zt<ce.length&&!kn;)if(kn=ce[zt++].exec(it),kn)for(Gn=0;Gn<K.length;Gn++)Lr=kn[++It],mt=K[Gn],typeof mt===u&&mt.length>0?mt.length===2?typeof mt[1]==l?this[mt[0]]=mt[1].call(this,Lr):this[mt[0]]=mt[1]:mt.length===3?typeof mt[1]===l&&!(mt[1].exec&&mt[1].test)?this[mt[0]]=Lr?mt[1].call(this,Lr,mt[2]):n:this[mt[0]]=Lr?Lr.replace(mt[1],mt[2]):n:mt.length===4&&(this[mt[0]]=Lr?mt[3].call(this,Lr.replace(mt[1],mt[2])):n):this[mt]=Lr||n;ye+=2}},gn=function(it,qe){for(var ye in qe)if(typeof qe[ye]===u&&qe[ye].length>0){for(var zt=0;zt<qe[ye].length;zt++)if(xr(qe[ye][zt],it))return ye===a?n:ye}else if(xr(qe[ye],it))return ye===a?n:ye;return it},Qr={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Xr={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ti={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[R,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[R,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[R,x],[/opios[\/ ]+([\w\.]+)/i],[x,[R,Ar+" Mini"]],[/\bopr\/([\w\.]+)/i],[x,[R,Ar]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[R,x],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[R,"UC"+$]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[x,[R,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[x,[R,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[R,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[R,"IE"]],[/yabrowser\/([\w\.]+)/i],[x,[R,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[R,/(.+)/,"$1 Secure "+$],x],[/\bfocus\/([\w\.]+)/i],[x,[R,ee+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[R,Ar+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[R,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[R,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[R,Ar+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[R,"MIUI "+$]],[/fxios\/([-\w\.]+)/i],[x,[R,ee]],[/\bqihu|(qi?ho?o?|360)browser/i],[[R,"360 "+$]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[R,/(.+)/,"$1 "+$],x],[/(comodo_dragon)\/([\w\.]+)/i],[[R,/_/g," "],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[R,x],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[R],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[R,Kr],x],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[R,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[R,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[R,J+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[R,J+" WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[R,"Android "+$]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[R,x],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[x,[R,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[x,R],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[R,[x,gn,Qr]],[/(webkit|khtml)\/([\w\.]+)/i],[R,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[R,"Netscape"],x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[R,ee+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[R,x],[/(cobalt)\/([\w\.]+)/i],[R,[x,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[k,"amd64"]],[/(ia32(?=;))/i],[[k,Er]],[/((?:i[346]|x)86)[;\)]/i],[[k,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[k,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[k,"armhf"]],[/windows (ce|mobile); ppc;/i],[[k,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[k,/ower/,i,Er]],[/(sun4\w)[;\)]/i],[[k,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[k,Er]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[w,[P,Ir],[S,X]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[w,[P,Ir],[S,G]],[/((ipod|iphone)\d+,\d+)/i],[w,[P,fe],[S,G]],[/(ipad\d+,\d+)/i],[w,[P,fe],[S,X]],[/\((ip(?:hone|od)[\w ]*);/i],[w,[P,fe],[S,G]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[w,[P,fe],[S,X]],[/(macintosh);/i],[w,[P,fe]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[w,[P,we],[S,X]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[w,[P,we],[S,G]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[w,/_/g," "],[P,ur],[S,G]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[w,/_/g," "],[P,ur],[S,X]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[w,[P,"OPPO"],[S,G]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[w,[P,"Vivo"],[S,G]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[w,[P,"Realme"],[S,G]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[w,[P,At],[S,G]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[w,[P,At],[S,X]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[w,[P,Be],[S,X]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[w,[P,Be],[S,G]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[w,[P,"Lenovo"],[S,X]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[w,/_/g," "],[P,"Nokia"],[S,G]],[/(pixel c)\b/i],[w,[P,Ie],[S,X]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[w,[P,Ie],[S,G]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[w,[P,Mt],[S,G]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[w,"Xperia Tablet"],[P,Mt],[S,X]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[w,[P,"OnePlus"],[S,G]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[w,[P,te],[S,X]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[w,/(.+)/g,"Fire Phone $1"],[P,te],[S,G]],[/(playbook);[-\w\),; ]+(rim)/i],[w,P,[S,X]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[w,[P,Ce],[S,G]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[w,[P,Te],[S,X]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[w,[P,Te],[S,G]],[/(nexus 9)/i],[w,[P,"HTC"],[S,X]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[P,[w,/_/g," "],[S,G]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[w,[P,"Acer"],[S,X]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[w,[P,"Meizu"],[S,G]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[w,[P,sr],[S,G]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[P,w,[S,G]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[P,w,[S,X]],[/(surface duo)/i],[w,[P,st],[S,X]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[w,[P,"Fairphone"],[S,G]],[/(u304aa)/i],[w,[P,"AT&T"],[S,G]],[/\bsie-(\w*)/i],[w,[P,"Siemens"],[S,G]],[/\b(rct\w+) b/i],[w,[P,"RCA"],[S,X]],[/\b(venue[\d ]{2,7}) b/i],[w,[P,"Dell"],[S,X]],[/\b(q(?:mv|ta)\w+) b/i],[w,[P,"Verizon"],[S,X]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[w,[P,"Barnes & Noble"],[S,X]],[/\b(tm\d{3}\w+) b/i],[w,[P,"NuVision"],[S,X]],[/\b(k88) b/i],[w,[P,"ZTE"],[S,X]],[/\b(nx\d{3}j) b/i],[w,[P,"ZTE"],[S,G]],[/\b(gen\d{3}) b.+49h/i],[w,[P,"Swiss"],[S,G]],[/\b(zur\d{3}) b/i],[w,[P,"Swiss"],[S,X]],[/\b((zeki)?tb.*\b) b/i],[w,[P,"Zeki"],[S,X]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[P,"Dragon Touch"],w,[S,X]],[/\b(ns-?\w{0,9}) b/i],[w,[P,"Insignia"],[S,X]],[/\b((nxa|next)-?\w{0,9}) b/i],[w,[P,"NextBook"],[S,X]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[P,"Voice"],w,[S,G]],[/\b(lvtel\-)?(v1[12]) b/i],[[P,"LvTel"],w,[S,G]],[/\b(ph-1) /i],[w,[P,"Essential"],[S,G]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[w,[P,"Envizen"],[S,X]],[/\b(trio[-\w\. ]+) b/i],[w,[P,"MachSpeed"],[S,X]],[/\btu_(1491) b/i],[w,[P,"Rotor"],[S,X]],[/(shield[\w ]+) b/i],[w,[P,"Nvidia"],[S,X]],[/(sprint) (\w+)/i],[P,w,[S,G]],[/(kin\.[onetw]{3})/i],[[w,/\./g," "],[P,st],[S,G]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[w,[P,Or],[S,X]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[w,[P,Or],[S,G]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[P,w,[S,B]],[/droid.+; (shield) bui/i],[w,[P,"Nvidia"],[S,B]],[/(playstation [345portablevi]+)/i],[w,[P,Mt],[S,B]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[w,[P,st],[S,B]],[/smart-tv.+(samsung)/i],[P,[S,F]],[/hbbtv.+maple;(\d+)/i],[[w,/^/,"SmartTV"],[P,Ir],[S,F]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[P,Be],[S,F]],[/(apple) ?tv/i],[P,[w,fe+" TV"],[S,F]],[/crkey/i],[[w,J+"cast"],[P,Ie],[S,F]],[/droid.+aft(\w)( bui|\))/i],[w,[P,te],[S,F]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[w,[P,sr],[S,F]],[/(bravia[\w ]+)( bui|\))/i],[w,[P,Mt],[S,F]],[/(mitv-\w{5}) bui/i],[w,[P,ur],[S,F]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[P,_t],[w,_t],[S,F]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,F]],[/((pebble))app/i],[P,w,[S,j]],[/droid.+; (glass) \d/i],[w,[P,Ie],[S,j]],[/droid.+; (wt63?0{2,3})\)/i],[w,[P,Or],[S,j]],[/(quest( 2)?)/i],[w,[P,Kr],[S,j]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[P,[S,H]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[w,[S,G]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[w,[S,X]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,X]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,G]],[/(android[-\w\. ]{0,9});.+buil/i],[w,[P,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[R,ge+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[R,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[R,x],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,R]],os:[[/microsoft (windows) (vista|xp)/i],[R,x],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[R,[x,gn,Xr]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[R,"Windows"],[x,gn,Xr]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[R,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[R,"Mac OS"],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[x,R],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[R,x],[/\(bb(10);/i],[x,[R,Ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[x,[R,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[R,ee+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[R,"webOS"]],[/crkey\/([\d\.]+)/i],[x,[R,J+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[R,"Chromium OS"],x],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[R,x],[/(sunos) ?([\w\.\d]*)/i],[[R,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[R,x]]},rr=function(it,qe){if(typeof it===u&&(qe=it,it=n),!(this instanceof rr))return new rr(it,qe).getResult();var ye=it||(typeof t!==p&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:i),zt=qe?pr(ti,qe):ti;return this.getBrowser=function(){var It={};return It[R]=n,It[x]=n,le.call(It,ye,zt.browser),It.major=Yr(It.version),It},this.getCPU=function(){var It={};return It[k]=n,le.call(It,ye,zt.cpu),It},this.getDevice=function(){var It={};return It[P]=n,It[w]=n,It[S]=n,le.call(It,ye,zt.device),It},this.getEngine=function(){var It={};return It[R]=n,It[x]=n,le.call(It,ye,zt.engine),It},this.getOS=function(){var It={};return It[R]=n,It[x]=n,le.call(It,ye,zt.os),It},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ye},this.setUA=function(It){return ye=typeof It===m&&It.length>re?_t(It,re):It,this},this.setUA(ye),this};rr.VERSION=o,rr.BROWSER=Wt([R,x,E]),rr.CPU=Wt([k]),rr.DEVICE=Wt([w,P,S,B,G,F,X,j,H]),rr.ENGINE=rr.OS=Wt([R,x]),r.exports&&(e=r.exports=rr),e.UAParser=rr;var Rr=typeof t!==p&&(t.jQuery||t.Zepto);if(Rr&&!Rr.ua){var Rn=new rr;Rr.ua=Rn.getResult(),Rr.ua.get=function(){return Rn.getUA()},Rr.ua.set=function(it){Rn.setUA(it);var qe=Rn.getResult();for(var ye in qe)Rr.ua[ye]=qe[ye]}}})(typeof window=="object"?window:Ei)})(A_,A_.exports);var w6=A_.exports,_r=function(){return _r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_r.apply(this,arguments)};function Zn(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,[])).next())})}function Jn(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function md(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function T6(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i}function A6(r,e,t){if(arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function I6(r,e){return e=e||{},new Promise(function(t,n){var o=new XMLHttpRequest,i=[],a=[],l={},p=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:p,headers:{keys:function(){return i},entries:function(){return a},get:function(m){return l[m.toLowerCase()]},has:function(m){return m.toLowerCase()in l}}}};for(var u in o.open(e.method||"get",r,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(m,E,w){i.push(E=E.toLowerCase()),a.push([E,w]),l[E]=l[E]?l[E]+","+w:w}),t(p())},o.onerror=n,o.withCredentials=e.credentials=="include",e.headers)o.setRequestHeader(u,e.headers[u]);o.send(e.body||null)})}var O6=ul.fetch||I6,R6=function(r,e){return e==null||e<=0?r:new Promise(function(t,n){ul.setTimeout(function(){n(Error("Request timeout after "+e+" milliseconds"))},e),r.then(t,n)})},C6=function(r,e,t,n,o){var i=function(){return Zn(void 0,void 0,void 0,function(){var a,l,p;return Jn(this,function(u){switch(u.label){case 0:return[4,O6(r,{method:e,headers:t,body:n})];case 1:return a=u.sent(),p={status:a.status},[4,a.text()];case 2:return l=(p.body=u.sent(),p),[2,l]}})})};return R6(i(),o)},P6=function(){function r(e){this.client=e}return r.prototype.request=function(e){return Zn(this,void 0,void 0,function(){return Jn(this,function(t){switch(t.label){case 0:return[4,this.client.request(e.requestUrl,e.method,e.headers,null,e.timeoutMillis)];case 1:return[2,t.sent()]}})})},r}(),fA={request:C6},Ca;(function(r){r.LocalStorage="localStorage",r.InitialVariants="initialVariants"})(Ca||(Ca={}));var mn;(function(r){r.LocalStorage="storage",r.InitialVariants="initial",r.SecondaryLocalStorage="secondary-storage",r.SecondaryInitialVariants="secondary-initial",r.FallbackInline="fallback-inline",r.FallbackConfig="fallback-config",r.LocalEvaluation="local-evaluation"})(mn||(mn={}));var dA=function(r){return!r||r===mn.FallbackInline||r===mn.FallbackConfig||r===mn.SecondaryInitialVariants},gd={debug:!1,instanceName:"$default_instance",fallbackVariant:{},initialVariants:{},initialFlags:void 0,source:Ca.LocalStorage,serverUrl:"https://api.lab.amplitude.com",flagsServerUrl:"https://flag.lab.amplitude.com",serverZone:"US",fetchTimeoutMillis:1e4,retryFetchOnFailure:!0,automaticExposureTracking:!0,pollOnStart:!0,fetchOnStart:!0,automaticFetchOnAmplitudeIdentityChange:!1,userProvider:null,analyticsProvider:null,exposureTrackingProvider:null,httpClient:fA},hA="1.10.2",pA=function(){function r(e){this.identityStore=e}return r.prototype.identityReady=function(e){return Zn(this,void 0,void 0,function(){var t,n=this;return Jn(this,function(o){return t=this.identityStore.getIdentity(),!t.userId&&!t.deviceId?[2,Promise.race([new Promise(function(i){var a=function(){i(void 0),n.identityStore.removeIdentityListener(a)};n.identityStore.addIdentityListener(a)}),new Promise(function(i,a){ul.setTimeout(a,e,"Timed out waiting for Amplitude Analytics SDK to initialize. You must ensure that the analytics SDK is initialized prior to calling fetch().")})])]:[2]})})},r.prototype.getUser=function(){var e=this.identityStore.getIdentity(),t=void 0;try{t=e.userProperties}catch{console.warn("[Experiment] failed to cast user properties")}return{user_id:e.userId,device_id:e.deviceId,user_properties:t}},r}(),x6=function(){function r(e){this.eventBridge=e}return r.prototype.track=function(e){this.eventBridge.logEvent({eventType:"$exposure",eventProperties:e})},r}(),I_=function(){function r(e,t){this.ua=new w6.UAParser(typeof navigator<"u"?navigator.userAgent:null).getResult(),this.contextProvider=e,this.userProvider=t}return r.prototype.getUser=function(){var e,t=((e=this.userProvider)===null||e===void 0?void 0:e.getUser())||{},n=this.contextProvider.getApplicationContext();return _r({version:n.versionName,language:n.language,platform:n.platform,os:n.os||this.getOs(this.ua),device_model:n.deviceModel||this.getDeviceModel(this.ua)},t)},r.prototype.getOs=function(e){var t,n;return[(t=e.browser)===null||t===void 0?void 0:t.name,(n=e.browser)===null||n===void 0?void 0:n.major].filter(function(o){return o!=null}).join(" ")},r.prototype.getDeviceModel=function(e){var t;return(t=e.os)===null||t===void 0?void 0:t.name},r}(),vA=function(){function r(){}return r.prototype.get=function(e){return localStorage.getItem(e)},r.prototype.put=function(e,t){localStorage.setItem(e,t)},r.prototype.delete=function(e){localStorage.removeItem(e)},r}(),N6=function(r,e,t){var n=r.substring(r.length-6),o="amp-exp-".concat(e,"-").concat(n);return new mA(o,t,gA)},k6=function(r,e,t){t===void 0&&(t=new vA);var n=r.substring(r.length-6),o="amp-exp-".concat(e,"-").concat(n,"-flags");return new mA(o,t)},mA=function(){function r(e,t,n){this.cache={},this.namespace=e,this.storage=t,this.transformer=n}return r.prototype.get=function(e){return this.cache[e]},r.prototype.getAll=function(){return _r({},this.cache)},r.prototype.put=function(e,t){this.cache[e]=t},r.prototype.putAll=function(e){var t,n;try{for(var o=md(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a=i.value;this.cache[a]=e[a]}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},r.prototype.remove=function(e){delete this.cache[e]},r.prototype.clear=function(){this.cache={}},r.prototype.load=function(){var e,t,n=this.storage.get(this.namespace),o;try{o=JSON.parse(n)||{}}catch{return}var i={};try{for(var a=md(Object.keys(o)),l=a.next();!l.done;l=a.next()){var p=l.value;try{var u=void 0;this.transformer?u=this.transformer(o[p]):u=o[p],u&&(i[p]=u)}catch{}}}catch(m){e={error:m}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}this.clear(),this.putAll(i)},r.prototype.store=function(e){e===void 0&&(e=this.cache),this.storage.put(this.namespace,JSON.stringify(e))},r}(),gA=function(r){if(typeof r=="string")return{key:r,value:r};if(typeof r=="object"){var e=r.key,t=r.value,n=r.payload,o=r.metadata,i=r.expKey;o&&o.experimentKey?i=o.experimentKey:i&&(o=o||{},o.experimentKey=i);var a={};return e?a.key=e:t&&(a.key=t),t&&(a.value=t),o&&(a.metadata=o),n&&(a.payload=n),i&&(a.expKey=i),a}},D6=function(r,e,t,n){var o,i="[Experiment] Exposure",a=t==null?void 0:t.value,l="[Experiment] ".concat(e);return{name:i,user:r,key:e,variant:t,userProperty:l,properties:{key:e,variant:a,source:n},userProperties:(o={},o[l]=a,o)}},Go=function(r){return r==null},O_=function(r){return Go(r)?!0:r&&Object.keys(r).length===0},yA=function(r){var e;return((e=r==null?void 0:r.metadata)===null||e===void 0?void 0:e.evaluationMode)==="local"},M6=function(){function r(e,t,n,o){this.started=!1,this.done=!1,this.attempts=e,this.min=t,this.max=n,this.scalar=o}return r.prototype.start=function(e){return Zn(this,void 0,void 0,function(){return Jn(this,function(t){switch(t.label){case 0:if(!this.started)this.started=!0;else throw Error("Backoff already started");return[4,this.backoff(e,0,this.min)];case 1:return t.sent(),[2]}})})},r.prototype.cancel=function(){this.done=!0,clearTimeout(this.timeoutHandle)},r.prototype.backoff=function(e,t,n){return Zn(this,void 0,void 0,function(){var o=this;return Jn(this,function(i){return this.done?[2]:(this.timeoutHandle=ul.setTimeout(function(){return Zn(o,void 0,void 0,function(){var a,l;return Jn(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,e()];case 1:return p.sent(),[3,3];case 2:return p.sent(),a=t+1,a<this.attempts&&(l=Math.min(n*this.scalar,this.max),this.backoff(e,a,l)),[3,3];case 3:return[2]}})})},n),[2])})})},r}(),L6=function(r){var e,t,n,o;if(!r)return{};var i={user:r},a={};if(!r.groups)return i;try{for(var l=md(Object.keys(r.groups)),p=l.next();!p.done;p=l.next()){var u=p.value,m=r.groups[u];if(m.length>0&&m[0]){var E=m[0],w={group_name:E},R=(o=(n=r.group_properties)===null||n===void 0?void 0:n[u])===null||o===void 0?void 0:o[E];R&&Object.keys(R).length>0&&(w.group_properties=R),a[u]=w}}}catch(S){e={error:S}}finally{try{p&&!p.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}return Object.keys(a).length>0&&(i.groups=a),delete i.user.groups,delete i.user.group_properties,i},ei=function(r){return r==null?{}:typeof r=="string"?{key:r,value:r}:r},_A=function(r){if(!r)return{};var e=void 0;r.metadata&&(e=r.metadata.experimentKey);var t={};return r.key&&(t.key=r.key),r.value&&(t.value=r.value),r.payload&&(t.payload=r.payload),e&&(t.expKey=e),r.metadata&&(t.metadata=r.metadata),t},U6=function(){function r(e){this.setProperties={},this.unsetProperties={},this.analyticsProvider=e}return r.prototype.track=function(e){this.setProperties[e.key]!=e.variant.value&&(this.setProperties[e.key]=e.variant.value,delete this.unsetProperties[e.key],this.analyticsProvider.track(e))},r.prototype.setUserProperty=function(e){this.setProperties[e.key]!=e.variant.value&&this.analyticsProvider.setUserProperty(e)},r.prototype.unsetUserProperty=function(e){this.unsetProperties[e.key]||(this.unsetProperties[e.key]="unset",delete this.setProperties[e.key],this.analyticsProvider.unsetUserProperty(e))},r}(),F6=function(){function r(e){this.tracked={},this.exposureTrackingProvider=e}return r.prototype.track=function(e){var t=this.tracked[e.flag_key];t&&t.variant===e.variant||(this.tracked[e.flag_key]=e,this.exposureTrackingProvider.track(e))},r}(),B6=1e4,j6=8,G6=500,$6=1e4,V6=1.5,q6=6e4,H6="https://api.lab.eu.amplitude.com",W6="https://flag.lab.eu.amplitude.com",EA=function(){function r(e,t){var n=this,o,i;if(this.engine=new u6,this.poller=new S6(function(){return n.doFlags()},q6),this.isRunning=!1,this.apiKey=e,this.config=_r(_r(_r({},gd),t),{serverUrl:(t==null?void 0:t.serverUrl)||(((o=t==null?void 0:t.serverZone)===null||o===void 0?void 0:o.toLowerCase())==="eu"?H6:gd.serverUrl),flagsServerUrl:(t==null?void 0:t.flagsServerUrl)||(((i=t==null?void 0:t.serverZone)===null||i===void 0?void 0:i.toLowerCase())==="eu"?W6:gd.flagsServerUrl)}),this.config.initialVariants)for(var a in this.config.initialVariants)this.config.initialVariants[a]=gA(this.config.initialVariants[a]);this.config.userProvider&&(this.userProvider=this.config.userProvider),this.config.analyticsProvider&&(this.analyticsProvider=new U6(this.config.analyticsProvider)),this.config.exposureTrackingProvider&&(this.exposureTrackingProvider=new F6(this.config.exposureTrackingProvider));var l=new P6(this.config.httpClient||fA);this.flagApi=new b6(this.apiKey,this.config.flagsServerUrl,l),this.evaluationApi=new E6(this.apiKey,this.config.serverUrl,l);var p=new vA;this.variants=N6(this.apiKey,this.config.instanceName,p),this.flags=k6(this.apiKey,this.config.instanceName,p);try{this.flags.load(),this.variants.load()}catch{}this.mergeInitialFlagsWithStorage()}return r.prototype.start=function(e){var t;return Zn(this,void 0,void 0,function(){var n,o;return Jn(this,function(i){switch(i.label){case 0:return this.isRunning?[2]:(this.isRunning=!0,this.setUser(e),n=this.doFlags(),o=(t=this.config.fetchOnStart)!==null&&t!==void 0?t:!0,o?[4,Promise.all([this.fetch(e),n])]:[3,2]);case 1:return i.sent(),[3,4];case 2:return[4,n];case 3:i.sent(),i.label=4;case 4:return this.config.pollOnStart&&this.poller.start(),[2]}})})},r.prototype.stop=function(){this.isRunning&&(this.poller.stop(),this.isRunning=!1)},r.prototype.fetch=function(e,t){return e===void 0&&(e=this.user),Zn(this,void 0,void 0,function(){var n;return Jn(this,function(o){switch(o.label){case 0:this.setUser(e||{}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchInternal(e,this.config.fetchTimeoutMillis,this.config.retryFetchOnFailure,t)];case 2:return o.sent(),[3,4];case 3:return n=o.sent(),console.error(n),[3,4];case 4:return[2,this]}})})},r.prototype.variant=function(e,t){var n,o;if(!this.apiKey)return{value:void 0};var i=this.variantAndSource(e,t);return this.config.automaticExposureTracking&&this.exposureInternal(e,i),this.debug("[Experiment] variant for ".concat(e," is ").concat(((n=i.variant)===null||n===void 0?void 0:n.key)||((o=i.variant)===null||o===void 0?void 0:o.value))),i.variant||{}},r.prototype.exposure=function(e){var t=this.variantAndSource(e);this.exposureInternal(e,t)},r.prototype.all=function(){if(!this.apiKey)return{};var e=this.evaluate();for(var t in e){var n=this.flags.get(t);yA(n)||delete e[t]}return _r(_r(_r({},this.secondaryVariants()),this.sourceVariants()),e)},r.prototype.clear=function(){this.variants.clear();try{this.variants.store()}catch{}},r.prototype.getUser=function(){var e;if(!this.user)return this.user;if(!((e=this.user)===null||e===void 0)&&e.user_properties){var t=_r({},this.user.user_properties);return _r(_r({},this.user),{user_properties:t})}else return _r({},this.user)},r.prototype.setUser=function(e){var t;if(!e){this.user=null;return}if(!((t=this.user)===null||t===void 0)&&t.user_properties){var n=_r({},e.user_properties);this.user=_r(_r({},e),{user_properties:n})}else this.user=_r({},e)},r.prototype.getUserProvider=function(){return this.userProvider},r.prototype.setUserProvider=function(e){return this.userProvider=e,this},r.prototype.mergeInitialFlagsWithStorage=function(){var e=this;if(this.config.initialFlags){var t=JSON.parse(this.config.initialFlags);t.forEach(function(n){e.flags.get(n.key)||e.flags.put(n.key,n)})}},r.prototype.evaluate=function(e){var t,n,o=this.addContext(this.user),i=c6(this.flags.getAll(),e),a=L6(o),l=this.engine.evaluate(a,i),p={};try{for(var u=md(Object.keys(l)),m=u.next();!m.done;m=u.next()){var E=m.value;p[E]=_A(l[E])}}catch(w){t={error:w}}finally{try{m&&!m.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return p},r.prototype.variantAndSource=function(e,t){var n={};this.config.source===Ca.LocalStorage?n=this.localStorageVariantAndSource(e,t):this.config.source===Ca.InitialVariants&&(n=this.initialVariantsVariantAndSource(e,t));var o=this.flags.get(e);return(yA(o)||!n.variant&&o)&&(n=this.localEvaluationVariantAndSource(e,o,t)),n},r.prototype.localEvaluationVariantAndSource=function(e,t,n){var o,i={},a=this.evaluate([t.key])[e],l=mn.LocalEvaluation,p=(o=a==null?void 0:a.metadata)===null||o===void 0?void 0:o.default;if(!Go(a)&&!p)return{variant:ei(a),source:l,hasDefaultVariant:!1};if(p&&(i={variant:ei(a),source:l,hasDefaultVariant:!0}),!Go(n))return{variant:ei(n),source:mn.FallbackInline,hasDefaultVariant:i.hasDefaultVariant};var u=this.config.initialVariants[e];if(!Go(u))return{variant:ei(u),source:mn.SecondaryInitialVariants,hasDefaultVariant:i.hasDefaultVariant};var m=ei(this.config.fallbackVariant),E={variant:m,source:mn.FallbackConfig,hasDefaultVariant:i.hasDefaultVariant};return O_(m)?i:E},r.prototype.localStorageVariantAndSource=function(e,t){var n,o={},i=this.variants.get(e),a=(n=i==null?void 0:i.metadata)===null||n===void 0?void 0:n.default;if(!Go(i)&&!a)return{variant:ei(i),source:mn.LocalStorage,hasDefaultVariant:!1};if(a&&(o={variant:ei(i),source:mn.LocalStorage,hasDefaultVariant:!0}),!Go(t))return{variant:ei(t),source:mn.FallbackInline,hasDefaultVariant:o.hasDefaultVariant};var l=this.config.initialVariants[e];if(!Go(l))return{variant:ei(l),source:mn.SecondaryInitialVariants,hasDefaultVariant:o.hasDefaultVariant};var p=ei(this.config.fallbackVariant),u={variant:p,source:mn.FallbackConfig,hasDefaultVariant:o.hasDefaultVariant};return O_(p)?o:u},r.prototype.initialVariantsVariantAndSource=function(e,t){var n,o={},i=this.config.initialVariants[e];if(!Go(i))return{variant:ei(i),source:mn.InitialVariants,hasDefaultVariant:!1};var a=this.variants.get(e),l=(n=a==null?void 0:a.metadata)===null||n===void 0?void 0:n.default;if(!Go(a)&&!l)return{variant:ei(a),source:mn.LocalStorage,hasDefaultVariant:!1};if(l&&(o={variant:ei(a),source:mn.LocalStorage,hasDefaultVariant:!0}),!Go(t))return{variant:ei(t),source:mn.FallbackInline,hasDefaultVariant:o.hasDefaultVariant};var p=ei(this.config.fallbackVariant),u={variant:p,source:mn.FallbackConfig,hasDefaultVariant:o.hasDefaultVariant};return O_(p)?o:u},r.prototype.fetchInternal=function(e,t,n,o){return Zn(this,void 0,void 0,function(){var i,a;return Jn(this,function(l){switch(l.label){case 0:if(!this.apiKey)throw Error("Experiment API key is empty");this.debug("[Experiment] Fetch all: retry=".concat(n)),n&&this.stopRetries(),l.label=1;case 1:return l.trys.push([1,4,,5]),[4,this.doFetch(e,t,o)];case 2:return i=l.sent(),[4,this.storeVariants(i,o)];case 3:return l.sent(),[2,i];case 4:throw a=l.sent(),n&&this.shouldRetryFetch(a)&&this.startRetries(e,o),a;case 5:return[2]}})})},r.prototype.doFetch=function(e,t,n){return Zn(this,void 0,void 0,function(){var o,i,a,l,p,u,m;return Jn(this,function(E){switch(E.label){case 0:return[4,this.addContextOrWait(e,1e4)];case 1:return e=E.sent(),this.debug("[Experiment] Fetch variants for user: ",e),[4,this.evaluationApi.getVariants(e,{timeoutMillis:t,flagKeys:n==null?void 0:n.flagKeys})];case 2:o=E.sent(),i={};try{for(a=md(Object.keys(o)),l=a.next();!l.done;l=a.next())p=l.value,i[p]=_A(o[p])}catch(w){u={error:w}}finally{try{l&&!l.done&&(m=a.return)&&m.call(a)}finally{if(u)throw u.error}}return this.debug("[Experiment] Received variants: ",i),[2,i]}})})},r.prototype.doFlags=function(){return Zn(this,void 0,void 0,function(){var e;return Jn(this,function(t){switch(t.label){case 0:return[4,this.flagApi.getFlags({libraryName:"experiment-js-client",libraryVersion:hA,timeoutMillis:this.config.fetchTimeoutMillis})];case 1:e=t.sent(),this.flags.clear(),this.flags.putAll(e);try{this.flags.store()}catch{}return this.mergeInitialFlagsWithStorage(),[2]}})})},r.prototype.storeVariants=function(e,t){return Zn(this,void 0,void 0,function(){var n,o,i,a,a;return Jn(this,function(l){n=t&&t.flagKeys?t.flagKeys:[],n.length===0&&this.variants.clear(),o=function(p){n=n.filter(function(u){return u!==p}),i.variants.put(p,e[p])},i=this;for(a in e)o(a);for(a in n)this.variants.remove(a);try{this.variants.store()}catch{}return this.debug("[Experiment] Stored variants: ",e),[2]})})},r.prototype.startRetries=function(e,t){return Zn(this,void 0,void 0,function(){var n=this;return Jn(this,function(o){return this.debug("[Experiment] Retry fetch"),this.retriesBackoff=new M6(j6,G6,$6,V6),this.retriesBackoff.start(function(){return Zn(n,void 0,void 0,function(){return Jn(this,function(i){switch(i.label){case 0:return[4,this.fetchInternal(e,B6,!1,t)];case 1:return i.sent(),[2]}})})}),[2]})})},r.prototype.stopRetries=function(){this.retriesBackoff&&this.retriesBackoff.cancel()},r.prototype.addContext=function(e){var t,n,o=(t=this.userProvider)===null||t===void 0?void 0:t.getUser(),i=_r(_r({},e==null?void 0:e.user_properties),o==null?void 0:o.user_properties);return _r(_r(_r({library:"experiment-js-client/".concat(hA)},(n=this.userProvider)===null||n===void 0?void 0:n.getUser()),e),{user_properties:i})},r.prototype.addContextOrWait=function(e,t){return Zn(this,void 0,void 0,function(){return Jn(this,function(n){switch(n.label){case 0:return this.userProvider instanceof I_?this.userProvider.userProvider instanceof pA?[4,this.userProvider.userProvider.identityReady(t)]:[3,2]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.addContext(e)]}})})},r.prototype.sourceVariants=function(){if(this.config.source==Ca.LocalStorage)return this.variants.getAll();if(this.config.source==Ca.InitialVariants)return this.config.initialVariants},r.prototype.secondaryVariants=function(){if(this.config.source==Ca.LocalStorage)return this.config.initialVariants;if(this.config.source==Ca.InitialVariants)return this.variants.getAll()},r.prototype.exposureInternal=function(e,t){var n,o,i,a,l,p;this.legacyExposureInternal(e,t.variant,t.source);var u={flag_key:e},m=dA(t.source);if(!(m&&!t.hasDefaultVariant)){!((n=t.variant)===null||n===void 0)&&n.expKey&&(u.experiment_key=(o=t.variant)===null||o===void 0?void 0:o.expKey);var E=(i=t.variant)===null||i===void 0?void 0:i.metadata;!m&&!(E!=null&&E.default)&&(!((a=t.variant)===null||a===void 0)&&a.key?u.variant=t.variant.key:!((l=t.variant)===null||l===void 0)&&l.value&&(u.variant=t.variant.value)),E&&(u.metadata=E),(p=this.exposureTrackingProvider)===null||p===void 0||p.track(u)}},r.prototype.legacyExposureInternal=function(e,t,n){var o,i,a,l,p;if(this.analyticsProvider){var u=this.addContext(this.getUser()),m=D6(u,e,t,n);dA(n)||!(t!=null&&t.value)?(i=(o=this.analyticsProvider)===null||o===void 0?void 0:o.unsetUserProperty)===null||i===void 0||i.call(o,m):t!=null&&t.value&&((l=(a=this.analyticsProvider)===null||a===void 0?void 0:a.setUserProperty)===null||l===void 0||l.call(a,m),(p=this.analyticsProvider)===null||p===void 0||p.track(m))}},r.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.config.debug&&console.debug.apply(console,A6([e],T6(t),!1))},r.prototype.shouldRetryFetch=function(e){return e instanceof lA?e.statusCode<400||e.statusCode>=500||e.statusCode===429:!0},r}(),Ou={},z6=function(r,e){var t=(e==null?void 0:e.instanceName)||gd.instanceName,n="".concat(t,".").concat(r),o=Py.getInstance(t);return Ou[n]||(e=_r(_r({},e),{userProvider:new I_(o.applicationContextProvider,e==null?void 0:e.userProvider)}),Ou[n]=new EA(r,e)),Ou[n]},K6=function(r,e){var t=(e==null?void 0:e.instanceName)||gd.instanceName,n="".concat(t,".").concat(r),o=Py.getInstance(t);return Ou[n]||(e=_r({userProvider:new I_(o.applicationContextProvider,new pA(o.identityStore)),exposureTrackingProvider:new x6(o.eventBridge)},e),Ou[n]=new EA(r,e),e.automaticFetchOnAmplitudeIdentityChange&&o.identityStore.addIdentityListener(function(){Ou[n].fetch()})),Ou[n]},Y6={initialize:z6,initializeWithAmplitudeAnalytics:K6},yd=function(){return yd=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},yd.apply(this,arguments)},Mr=function(){function r(){}return r.init=function(e,t){r.instance=e,r.clientIdentifier=t.clientIdentifier,r.allowDebug=!!t.debug},r.log=function(e){var t,n=yd({source:"Experiment SDK"},e.attributes),o="[Experiment SDK] ".concat(e.body);(t=r.instance)===null||t===void 0||t.getLogger(r.clientIdentifier).emit(yd(yd({},e),{attributes:n,body:o}))},r.info=function(e,t){t===void 0&&(t={}),r.log({attributes:t,body:e,severityNumber:bt.INFO})},r.debug=function(e,t){t===void 0&&(t={}),r.allowDebug&&(r.log({attributes:t,body:e,severityNumber:bt.DEBUG}),console.debug("[Experiment SDK] ".concat(e),t))},r.warning=function(e,t,n){n===void 0&&(n={}),r.log({attributes:n,error:t,body:e,severityNumber:bt.WARN})},r.error=function(e,t,n){n===void 0&&(n={}),r.log({attributes:n,error:t,body:e,severityNumber:bt.ERROR})},r.getIntCounter=function(e){var t;return(t=r.instance)===null||t===void 0?void 0:t.getMeter(r.clientIdentifier).createCounter(e,{valueType:pa.INT})},r}(),bA=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},SA=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Q6=function(){function r(e){this.trackEvent=e}return r.prototype.track=function(e){e&&this.trackEvent("$exposure",{flag_key:e.flag_key,variant:e.variant,experiment_key:e.experiment_key})},r}(),X6=function(){function r(e){r._instance=Y6.initializeWithAmplitudeAnalytics(e.amplitudeExperimentApiKey,{automaticExposureTracking:!0,automaticFetchOnAmplitudeIdentityChange:!0,debug:e.debug,exposureTrackingProvider:new Q6(e.trackEvent),fetchOnStart:!1,fetchTimeoutMillis:1e4,pollOnStart:!1,serverUrl:"".concat(e.amplitudeServerUrl),flagsServerUrl:"".concat(e.amplitudeFlagsServerUrl)})}return r.prototype.init=function(){return bA(this,void 0,void 0,function(){return SA(this,function(e){switch(e.label){case 0:return Mr.debug("amplitude init called"),[4,r._instance.start()];case 1:return e.sent(),[2]}})})},r.prototype.fetch=function(){return bA(this,void 0,void 0,function(){return SA(this,function(e){switch(e.label){case 0:return Mr.debug("amplitude fetch called"),[4,r._instance.fetch()];case 1:return e.sent(),[2]}})})},r.prototype.getVariant=function(e){Mr.debug("amplitude getVariant called");var t=r._instance.variant(e);if(t.value)return{value:t.value,payload:t.payload}},r.prototype.allVariants=function(){Mr.debug("amplitude allVariants called");var e=r._instance.all();return Object.fromEntries(Object.entries(e).filter(function(t){t[0];var n=t[1];return!!n.value}).map(function(t){var n=t[0],o=t[1];return[n,{value:o.value,payload:o.payload}]}))},r}(),dv,hv,pv,vv,mv,gv,yv,_v,Z6=function(){dv=Mr.getIntCounter("initExperimentSDK"),hv=Mr.getIntCounter("initExperimentProvider"),pv=Mr.getIntCounter("initExperimentProviderFailed"),vv=Mr.getIntCounter("fetchExperimentVariants"),mv=Mr.getIntCounter("fetchExperimentVariantsFailed"),gv=Mr.getIntCounter("getVariant"),yv=Mr.getIntCounter("getVariantReturnedFallback"),_v=Mr.getIntCounter("allVariants")},J6=function(){function r(e){this.experimentProvider=e}return r.prototype.get=function(e,t){Mr.debug("Variants get called",{flagKey:e}),gv==null||gv.add(1);var n=this.experimentProvider.getVariant(e);return n?(Mr.debug("Got variant",{variant:n.value}),n):(yv==null||yv.add(1),Mr.debug("Got fallback variant",{variant:t==null?void 0:t.value}),Mr.debug("No variant was found for `flagKey`, returning fallback variant",{flagKey:e,fallbackHasValue:!!t}),t)},r.prototype.all=function(){Mr.debug("Variants all called"),_v==null||_v.add(1);var e=this.experimentProvider.allVariants();return Mr.debug("Got all variants"),e},r}(),wA=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})},TA=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(m){return p([u,m])}}function p(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(m){u=[6,m],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},eW=function(){function r(e){this.didInitExperimentProvider=!1,this.clientIdentifier=e.clientIdentifier,this.experimentProvider=this.getExperimentProvider(e)}return r.getInstance=function(e){return r._instance||(r._instance=new r(e)),r._instance},r.prototype.getExperimentProvider=function(e){var t=e.experimentProvider,n=e.amplitudeExperimentApiKey,o=e.trackEvent,i=e.debug,a=e.amplitudeServerUrl,l=e.amplitudeFlagsServerUrl;return t||new X6({amplitudeExperimentApiKey:n,debug:!!i,trackEvent:o,amplitudeServerUrl:a,amplitudeFlagsServerUrl:l})},r.prototype.initExperimentProvider=function(){return wA(this,void 0,void 0,function(){var e;return TA(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),Mr.debug("initExperimentProvider called"),hv==null||hv.add(1),[4,this.experimentProvider.init()];case 1:return t.sent(),this.didInitExperimentProvider=!0,[3,3];case 2:throw e=t.sent(),Mr.error("Failed initializing experiment provider",e),pv==null||pv.add(1),e;case 3:return[2]}})})},r.prototype.fetchVariants=function(){return wA(this,void 0,void 0,function(){var e;return TA(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),Mr.debug("fetchVariants called"),this.didInitExperimentProvider?[3,2]:[4,this.initExperimentProvider()];case 1:t.sent(),t.label=2;case 2:return vv==null||vv.add(1),[4,this.experimentProvider.fetch()];case 3:return t.sent(),[3,5];case 4:return e=t.sent(),Mr.error("Failed fetching experiment provider variants",e),mv==null||mv.add(1),[3,5];case 5:return[2,new J6(this.experimentProvider)]}})})},r}(),tW=function(r){var e=r.clientIdentifier,t=r.telemetryInstance,n=r.debug;return t&&(Mr.init(t,{clientIdentifier:e,debug:n}),Z6()),dv==null||dv.add(1),eW.getInstance(r)};const rW={clientIdentifier:"chrome-extension",amplitudeExperimentApiKey:"client-6EqvbyLhXFBGHvqt7EKQys6MQ3AKG78x",trackEvent:(r,e)=>{Pr.trackEvent("experimentExposure",e)},debug:!1,amplitudeServerUrl:"https://api.lab.amplitude.com",amplitudeFlagsServerUrl:"https://flag.lab.amplitude.com"};class nW{constructor({experimentClient:e}){pe(this,"experimentClient");pe(this,"initPromise",null);pe(this,"variantsClient",null);pe(this,"variants",{});pe(this,"logger",null);pe(this,"exposedExperiments",new Set);pe(this,"onGetVariantMessage",async(e,t)=>{const n=await this.getVariant({...e});return t(n),!0});this.experimentClient=e}async init(){return this.initPromise||(this.initPromise=(async()=>{var e;try{this.variantsClient=await this.experimentClient.fetchVariants(),this.variants=this.variantsClient.all()}catch(t){this.initPromise=null,(e=this.logger)==null||e.emitLog({error:t,body:"ExperimentService init failed",severityNumber:bt.ERROR})}})()),this.initPromise}async fetchVariants(){var e;try{this.variantsClient=await this.experimentClient.fetchVariants(),this.variants=this.variantsClient.all()}catch(t){(e=this.logger)==null||e.emitLog({error:t,body:"ExperimentService fetch failed",severityNumber:bt.ERROR})}}setExperimentsFetcherInterval(e){return setInterval(()=>{Pa.fetchVariants().catch(t=>console.error("Error in interval fetching experiments:",t))},e)}setLogger(e){this.logger=e}async getVariant({experimentName:e,defaultValue:t,forceFetch:n}){await this.init(),n&&(this.variantsClient=await this.experimentClient.fetchVariants(),this.variants=this.variantsClient.all());const o=this.variants[e];if(o&&typeof o=="object"&&Object.keys(o).length>0){const i=`${e}:${o.value}`;return this.exposedExperiments.has(i)||(Pr.trackEvent("experimentExposure",{"[Experiment] Flag Key":e,"[Experiment] Variant":o.value}),this.exposedExperiments.add(i)),o}return t||{value:""}}clearExposedExperiments(){this.exposedExperiments.clear()}}const Pa=new nW({experimentClient:tW(rW)}),iW="/reader/insights",AA=Qn("insightService");class oW{constructor(){pe(this,"onPostWebpageDataMessage",async(e,t)=>{try{const n=await this.postWebpageData(e);t(n)}catch{t({success:!1,message:"An error occurred while processing the webpage data"})}return!0})}buildApiRequestPayload(e){const{htmlReadability:t,title:n}=e;return{session_id:e.sessionId,url:e.url,html_raw:e.htmlRaw,...t&&{html_readability:t},...n&&{title:n}}}async postWebpageData(e){try{const t=this.buildApiRequestPayload(e),n=await Jc(iW,{method:"POST",body:JSON.stringify(t),headers:{"X-platform":"read_extension","Content-Type":"application/json"}});return AA.emitLog({body:"Webpage data posted successfully",severityNumber:bt.INFO}),n.data}catch(t){throw AA.emitLog({error:t,body:"Error posting webpage data",severityNumber:bt.ERROR}),t}}}const aW=new oW,IA=r=>{const e=new RegExp("\\d* per \\d [A-Za-z]*");return yr.object({status:yr.literal(429),data:yr.object({detail:yr.string().regex(e)})}).safeParse(r).success},sW=r=>yr.object({code:yr.literal("ABORTED_ERROR")}).safeParse(r).success,uW="GET_REWRITE_SUGGESTIONS",cW="rewrite/quota-limit-reached",lW="rewrite/internal-error",fW="rewrite/no-suggestions",dW="rewrite/paragraph-too-long",hW="rewrite/aborted-error",pW="/rewrite",cl=Qn("rewriteService");class vW{constructor(){pe(this,"abortController",null);pe(this,"onGetRewriteSuggestionsMessage",async(e,t)=>{const n=await this.fetchRewriteSuggestions(e);return t(n),!0})}async fetchRewriteSuggestions(e){try{this.abortController&&(this.abortController.abort(),cl.emitLog({body:"Rewrite suggestions request cancelled",severityNumber:bt.INFO})),this.abortController=new AbortController;const{signal:t}=this.abortController,n=await Jc(pW,{method:"POST",body:JSON.stringify(e),signal:t,headers:{"Content-Type":"application/json"}}),o=n.headers.get("X-Ratelimit-Remaining"),a=!o||o==="unlimited"?-1:Number(o);return cl.emitLog({body:"Rewrite suggestions fetched",severityNumber:bt.INFO}),{isSuccessful:!0,data:{...n.data,quotaLeft:a},messages:[]}}catch(t){return sW(t)?{isSuccessful:!1,messages:[{code:hW}],data:null}:IA(t)?(cl.emitLog({error:t,body:"Quota Limit reached",severityNumber:bt.ERROR}),{isSuccessful:!1,messages:[{code:cW}],data:null}):this.isNoSuggestionsError(t)?(cl.emitLog({body:"No suggestions found",severityNumber:bt.INFO}),{isSuccessful:!1,messages:[{code:fW}],data:null}):this.isParagraphTooLongError(t)?(cl.emitLog({body:"Paragraph too long",severityNumber:bt.ERROR}),{isSuccessful:!1,messages:[{code:dW}],data:null}):(cl.emitLog({error:t,body:"Internal error",severityNumber:bt.ERROR}),{isSuccessful:!1,messages:[{code:lW}],data:null})}}isNoSuggestionsError(e){return yr.object({status:yr.literal(400),data:yr.object({error_code:yr.literal(1001),error_msg:yr.literal("No rewrites were found")})}).safeParse(e).success}isParagraphTooLongError(e){return yr.object({status:yr.literal(400),data:yr.object({error_code:yr.literal(1003)})}).safeParse(e).success}}const mW=new vW,OA=Qn("scriptInjection");class gW{async injectVersionNumberToTab(e){var t;(t=e==null?void 0:e.tab)!=null&&t.id&&await Gt.scripting.executeScript({target:{tabId:e.tab.id},world:"ISOLATED",func:n=>{window._wordtune_extension_version=n},args:[Gt.runtime.getManifest().version]}).catch(n=>{OA.emitLog({body:"Failed to inject version number to tab",error:n,severityNumber:bt.ERROR})})}async compareVersion({tabId:e}){var o;if(!e)return!1;const t=Gt.runtime.getManifest().version,n=await Gt.scripting.executeScript({target:{tabId:e},world:"ISOLATED",func:()=>window._wordtune_extension_version}).catch(i=>{OA.emitLog({body:"Failed to get version number from tab",error:i,severityNumber:bt.ERROR})});return!(n&&((o=n[0])==null?void 0:o.result)!==t)}}const RA=new gW,yW="/v1/spices-intents",_W="/spices",EW="/next/local-generations",R_=Qn("spicesService");class bW{constructor(){pe(this,"onGetSpicesMessage",async(e,t)=>{const n=await this.fetchSpices(e);return t(n),!0});pe(this,"onGetSpicesSuggestionsMessage",async(e,t)=>{const n=await this.fetchSpicesSuggestions(e);return t(n),!0})}async fetchSpices(e){try{return{isSuccessful:!0,data:(await Jc(yW,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).data,messages:[]}}catch{R_.emitLog({error:"Error while fetching spices",body:"Internal error",severityNumber:bt.ERROR})}return{isSuccessful:!0,data:{intents:[]},messages:[]}}async fetchSpicesSuggestions(e){try{const t="intent"in e?_W:EW,n=await Jc(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),o=Number(n.headers.get("X-Ratelimit-Remaining")||-1);return{suggestions:n.data.suggestions,interactionId:n.data.interactionId,quotaLeft:o}}catch(t){return IA(t)?(R_.emitLog({error:"QUOTA_LIMIT_REACHED",body:"Quota Limit reached",severityNumber:bt.ERROR}),{error:{name:"spices",message:"QUOTA_LIMIT_REACHED"}}):(R_.emitLog({error:"INTERNAL_ERROR",body:"Internal error",severityNumber:bt.ERROR}),{error:{name:"spices",message:"INTERNAL_ERROR"}})}}}const CA=new bW;var PA={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(r,e){(function(t,n){r.exports=n()})(Ei,function(){return(()=>{var t={2991:(i,a,l)=>{l.d(a,{R:()=>m,Y:()=>E});var p=l(2176),u={};function m(){return(0,p.KV)()?l.g:typeof window<"u"?window:typeof self<"u"?self:u}function E(w,R,S){var P=S||m(),x=P.__SENTRY__=P.__SENTRY__||{};return x[w]||(x[w]=R())}},2176:(i,a,l)=>{function p(){return!(typeof __SENTRY_BROWSER_BUNDLE__<"u"&&__SENTRY_BROWSER_BUNDLE__)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function u(m,E){return m.require(E)}l.d(a,{l$:()=>u,KV:()=>p}),i=l.hmd(i)},1170:(i,a,l)=>{l.d(a,{yW:()=>R,ph:()=>S});var p=l(2991),u=l(2176);i=l.hmd(i);var m={nowSeconds:()=>Date.now()/1e3},E=(0,u.KV)()?function(){try{return(0,u.l$)(i,"perf_hooks").performance}catch{return}}():function(){const{performance:P}=(0,p.R)();if(P&&P.now)return{now:()=>P.now(),timeOrigin:Date.now()-P.now()}}(),w=E===void 0?m:{nowSeconds:()=>(E.timeOrigin+E.now())/1e3},R=m.nowSeconds.bind(m),S=w.nowSeconds.bind(w);(()=>{const{performance:P}=(0,p.R)();if(P&&P.now){var x=36e5,k=P.now(),B=Date.now(),G=P.timeOrigin?Math.abs(P.timeOrigin+k-B):x,X=G<x,F=P.timing&&P.timing.navigationStart,j=typeof F=="number"?Math.abs(F+k-B):x;return X||j<x?G<=j?P.timeOrigin:F:B}})()},1905:function(){(function(i){(function(a){var l="URLSearchParams"in i,p="Symbol"in i&&"iterator"in Symbol,u="FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),m="FormData"in i,E="ArrayBuffer"in i;if(E)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],R=ArrayBuffer.isView||function($){return $&&w.indexOf(Object.prototype.toString.call($))>-1};function S($){if(typeof $!="string"&&($=String($)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test($))throw new TypeError("Invalid character in header field name");return $.toLowerCase()}function P($){return typeof $!="string"&&($=String($)),$}function x($){var J={next:function(){var ge=$.shift();return{done:ge===void 0,value:ge}}};return p&&(J[Symbol.iterator]=function(){return J}),J}function k($){this.map={},$ instanceof k?$.forEach(function(J,ge){this.append(ge,J)},this):Array.isArray($)?$.forEach(function(J){this.append(J[0],J[1])},this):$&&Object.getOwnPropertyNames($).forEach(function(J){this.append(J,$[J])},this)}function B($){if($.bodyUsed)return Promise.reject(new TypeError("Already read"));$.bodyUsed=!0}function G($){return new Promise(function(J,ge){$.onload=function(){J($.result)},$.onerror=function(){ge($.error)}})}function X($){var J=new FileReader,ge=G(J);return J.readAsArrayBuffer($),ge}function F($){if($.slice)return $.slice(0);var J=new Uint8Array($.byteLength);return J.set(new Uint8Array($)),J.buffer}function j(){return this.bodyUsed=!1,this._initBody=function($){var J;this._bodyInit=$,$?typeof $=="string"?this._bodyText=$:u&&Blob.prototype.isPrototypeOf($)?this._bodyBlob=$:m&&FormData.prototype.isPrototypeOf($)?this._bodyFormData=$:l&&URLSearchParams.prototype.isPrototypeOf($)?this._bodyText=$.toString():E&&u&&(J=$)&&DataView.prototype.isPrototypeOf(J)?(this._bodyArrayBuffer=F($.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):E&&(ArrayBuffer.prototype.isPrototypeOf($)||R($))?this._bodyArrayBuffer=F($):this._bodyText=$=Object.prototype.toString.call($):this._bodyText="",this.headers.get("content-type")||(typeof $=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf($)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var $=B(this);if($)return $;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?B(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(X)}),this.text=function(){var $,J,ge,ee=B(this);if(ee)return ee;if(this._bodyBlob)return $=this._bodyBlob,ge=G(J=new FileReader),J.readAsText($),ge;if(this._bodyArrayBuffer)return Promise.resolve(function(Ie){for(var we=new Uint8Array(Ie),Be=new Array(we.length),st=0;st<we.length;st++)Be[st]=String.fromCharCode(we[st]);return Be.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m&&(this.formData=function(){return this.text().then(te)}),this.json=function(){return this.text().then(JSON.parse)},this}k.prototype.append=function($,J){$=S($),J=P(J);var ge=this.map[$];this.map[$]=ge?ge+", "+J:J},k.prototype.delete=function($){delete this.map[S($)]},k.prototype.get=function($){return $=S($),this.has($)?this.map[$]:null},k.prototype.has=function($){return this.map.hasOwnProperty(S($))},k.prototype.set=function($,J){this.map[S($)]=P(J)},k.prototype.forEach=function($,J){for(var ge in this.map)this.map.hasOwnProperty(ge)&&$.call(J,this.map[ge],ge,this)},k.prototype.keys=function(){var $=[];return this.forEach(function(J,ge){$.push(ge)}),x($)},k.prototype.values=function(){var $=[];return this.forEach(function(J){$.push(J)}),x($)},k.prototype.entries=function(){var $=[];return this.forEach(function(J,ge){$.push([ge,J])}),x($)},p&&(k.prototype[Symbol.iterator]=k.prototype.entries);var H=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function re($,J){var ge,ee,Ie=(J=J||{}).body;if($ instanceof re){if($.bodyUsed)throw new TypeError("Already read");this.url=$.url,this.credentials=$.credentials,J.headers||(this.headers=new k($.headers)),this.method=$.method,this.mode=$.mode,this.signal=$.signal,Ie||$._bodyInit==null||(Ie=$._bodyInit,$.bodyUsed=!0)}else this.url=String($);if(this.credentials=J.credentials||this.credentials||"same-origin",!J.headers&&this.headers||(this.headers=new k(J.headers)),this.method=(ee=(ge=J.method||this.method||"GET").toUpperCase(),H.indexOf(ee)>-1?ee:ge),this.mode=J.mode||this.mode||null,this.signal=J.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Ie)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Ie)}function te($){var J=new FormData;return $.trim().split("&").forEach(function(ge){if(ge){var ee=ge.split("="),Ie=ee.shift().replace(/\+/g," "),we=ee.join("=").replace(/\+/g," ");J.append(decodeURIComponent(Ie),decodeURIComponent(we))}}),J}function fe($,J){J||(J={}),this.type="default",this.status=J.status===void 0?200:J.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in J?J.statusText:"OK",this.headers=new k(J.headers),this.url=J.url||"",this._initBody($)}re.prototype.clone=function(){return new re(this,{body:this._bodyInit})},j.call(re.prototype),j.call(fe.prototype),fe.prototype.clone=function(){return new fe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new k(this.headers),url:this.url})},fe.error=function(){var $=new fe(null,{status:0,statusText:""});return $.type="error",$};var Te=[301,302,303,307,308];fe.redirect=function($,J){if(Te.indexOf(J)===-1)throw new RangeError("Invalid status code");return new fe(null,{status:J,headers:{location:$}})},a.DOMException=i.DOMException;try{new a.DOMException}catch{a.DOMException=function(J,ge){this.message=J,this.name=ge;var ee=Error(J);this.stack=ee.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function Ce($,J){return new Promise(function(ge,ee){var Ie=new re($,J);if(Ie.signal&&Ie.signal.aborted)return ee(new a.DOMException("Aborted","AbortError"));var we=new XMLHttpRequest;function Be(){we.abort()}we.onload=function(){var st,At,Ar={status:we.status,statusText:we.statusText,headers:(st=we.getAllResponseHeaders()||"",At=new k,st.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(sr){var Mt=sr.split(":"),ur=Mt.shift().trim();if(ur){var Or=Mt.join(":").trim();At.append(ur,Or)}}),At)};Ar.url="responseURL"in we?we.responseURL:Ar.headers.get("X-Request-URL");var Ir="response"in we?we.response:we.responseText;ge(new fe(Ir,Ar))},we.onerror=function(){ee(new TypeError("Network request failed"))},we.ontimeout=function(){ee(new TypeError("Network request failed"))},we.onabort=function(){ee(new a.DOMException("Aborted","AbortError"))},we.open(Ie.method,Ie.url,!0),Ie.credentials==="include"?we.withCredentials=!0:Ie.credentials==="omit"&&(we.withCredentials=!1),"responseType"in we&&u&&(we.responseType="blob"),Ie.headers.forEach(function(st,At){we.setRequestHeader(At,st)}),Ie.signal&&(Ie.signal.addEventListener("abort",Be),we.onreadystatechange=function(){we.readyState===4&&Ie.signal.removeEventListener("abort",Be)}),we.send(Ie._bodyInit===void 0?null:Ie._bodyInit)})}Ce.polyfill=!0,i.fetch||(i.fetch=Ce,i.Headers=k,i.Request=re,i.Response=fe),a.Headers=k,a.Request=re,a.Response=fe,a.fetch=Ce,Object.defineProperty(a,"__esModule",{value:!0})})({})})(typeof self<"u"?self:this)},7187:i=>{var a,l=typeof Reflect=="object"?Reflect:null,p=l&&typeof l.apply=="function"?l.apply:function(F,j,H){return Function.prototype.apply.call(F,j,H)};a=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(F){return Object.getOwnPropertyNames(F).concat(Object.getOwnPropertySymbols(F))}:function(F){return Object.getOwnPropertyNames(F)};var u=Number.isNaN||function(F){return F!=F};function m(){m.init.call(this)}i.exports=m,i.exports.once=function(F,j){return new Promise(function(H,re){function te(Te){F.removeListener(j,fe),re(Te)}function fe(){typeof F.removeListener=="function"&&F.removeListener("error",te),H([].slice.call(arguments))}X(F,j,fe,{once:!0}),j!=="error"&&function(Te,Ce,$){typeof Te.on=="function"&&X(Te,"error",Ce,{once:!0})}(F,te)})},m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var E=10;function w(F){if(typeof F!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof F)}function R(F){return F._maxListeners===void 0?m.defaultMaxListeners:F._maxListeners}function S(F,j,H,re){var te,fe,Te,Ce;if(w(H),(fe=F._events)===void 0?(fe=F._events=Object.create(null),F._eventsCount=0):(fe.newListener!==void 0&&(F.emit("newListener",j,H.listener?H.listener:H),fe=F._events),Te=fe[j]),Te===void 0)Te=fe[j]=H,++F._eventsCount;else if(typeof Te=="function"?Te=fe[j]=re?[H,Te]:[Te,H]:re?Te.unshift(H):Te.push(H),(te=R(F))>0&&Te.length>te&&!Te.warned){Te.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+Te.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=F,$.type=j,$.count=Te.length,Ce=$,console&&console.warn&&console.warn(Ce)}return F}function P(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(F,j,H){var re={fired:!1,wrapFn:void 0,target:F,type:j,listener:H},te=P.bind(re);return te.listener=H,re.wrapFn=te,te}function k(F,j,H){var re=F._events;if(re===void 0)return[];var te=re[j];return te===void 0?[]:typeof te=="function"?H?[te.listener||te]:[te]:H?function(fe){for(var Te=new Array(fe.length),Ce=0;Ce<Te.length;++Ce)Te[Ce]=fe[Ce].listener||fe[Ce];return Te}(te):G(te,te.length)}function B(F){var j=this._events;if(j!==void 0){var H=j[F];if(typeof H=="function")return 1;if(H!==void 0)return H.length}return 0}function G(F,j){for(var H=new Array(j),re=0;re<j;++re)H[re]=F[re];return H}function X(F,j,H,re){if(typeof F.on=="function")re.once?F.once(j,H):F.on(j,H);else{if(typeof F.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof F);F.addEventListener(j,function te(fe){re.once&&F.removeEventListener(j,te),H(fe)})}}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(F){if(typeof F!="number"||F<0||u(F))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+F+".");E=F}}),m.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(F){if(typeof F!="number"||F<0||u(F))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+F+".");return this._maxListeners=F,this},m.prototype.getMaxListeners=function(){return R(this)},m.prototype.emit=function(F){for(var j=[],H=1;H<arguments.length;H++)j.push(arguments[H]);var re=F==="error",te=this._events;if(te!==void 0)re=re&&te.error===void 0;else if(!re)return!1;if(re){var fe;if(j.length>0&&(fe=j[0]),fe instanceof Error)throw fe;var Te=new Error("Unhandled error."+(fe?" ("+fe.message+")":""));throw Te.context=fe,Te}var Ce=te[F];if(Ce===void 0)return!1;if(typeof Ce=="function")p(Ce,this,j);else{var $=Ce.length,J=G(Ce,$);for(H=0;H<$;++H)p(J[H],this,j)}return!0},m.prototype.addListener=function(F,j){return S(this,F,j,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(F,j){return S(this,F,j,!0)},m.prototype.once=function(F,j){return w(j),this.on(F,x(this,F,j)),this},m.prototype.prependOnceListener=function(F,j){return w(j),this.prependListener(F,x(this,F,j)),this},m.prototype.removeListener=function(F,j){var H,re,te,fe,Te;if(w(j),(re=this._events)===void 0)return this;if((H=re[F])===void 0)return this;if(H===j||H.listener===j)--this._eventsCount==0?this._events=Object.create(null):(delete re[F],re.removeListener&&this.emit("removeListener",F,H.listener||j));else if(typeof H!="function"){for(te=-1,fe=H.length-1;fe>=0;fe--)if(H[fe]===j||H[fe].listener===j){Te=H[fe].listener,te=fe;break}if(te<0)return this;te===0?H.shift():function(Ce,$){for(;$+1<Ce.length;$++)Ce[$]=Ce[$+1];Ce.pop()}(H,te),H.length===1&&(re[F]=H[0]),re.removeListener!==void 0&&this.emit("removeListener",F,Te||j)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(F){var j,H,re;if((H=this._events)===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[F]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete H[F]),this;if(arguments.length===0){var te,fe=Object.keys(H);for(re=0;re<fe.length;++re)(te=fe[re])!=="removeListener"&&this.removeAllListeners(te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(j=H[F])=="function")this.removeListener(F,j);else if(j!==void 0)for(re=j.length-1;re>=0;re--)this.removeListener(F,j[re]);return this},m.prototype.listeners=function(F){return k(this,F,!0)},m.prototype.rawListeners=function(F){return k(this,F,!1)},m.listenerCount=function(F,j){return typeof F.listenerCount=="function"?F.listenerCount(j):B.call(F,j)},m.prototype.listenerCount=B,m.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},4139:function(i){i.exports=function(){function a(p){return Number.isInteger(p)&&p>=0}function l(p){this.name="ArgumentError",this.message=p}return function(p,u){if(u=u||{},typeof p!="function")throw new l("fetch must be a function");if(typeof u!="object")throw new l("defaults must be an object");if(u.retries!==void 0&&!a(u.retries))throw new l("retries must be a positive integer");if(u.retryDelay!==void 0&&!a(u.retryDelay)&&typeof u.retryDelay!="function")throw new l("retryDelay must be a positive integer or a function returning a positive integer");if(u.retryOn!==void 0&&!Array.isArray(u.retryOn)&&typeof u.retryOn!="function")throw new l("retryOn property expects an array or function");return u=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},u),function(m,E){var w=u.retries,R=u.retryDelay,S=u.retryOn;if(E&&E.retries!==void 0){if(!a(E.retries))throw new l("retries must be a positive integer");w=E.retries}if(E&&E.retryDelay!==void 0){if(!a(E.retryDelay)&&typeof E.retryDelay!="function")throw new l("retryDelay must be a positive integer or a function returning a positive integer");R=E.retryDelay}if(E&&E.retryOn){if(!Array.isArray(E.retryOn)&&typeof E.retryOn!="function")throw new l("retryOn property expects an array or function");S=E.retryOn}return new Promise(function(P,x){var k=function(G){var X=typeof Request<"u"&&m instanceof Request?m.clone():m;p(X,E).then(function(F){if(Array.isArray(S)&&S.indexOf(F.status)===-1)P(F);else if(typeof S=="function")try{return Promise.resolve(S(G,null,F)).then(function(j){j?B(G,null,F):P(F)}).catch(x)}catch(j){x(j)}else G<w?B(G,null,F):P(F)}).catch(function(F){if(typeof S=="function")try{Promise.resolve(S(G,F,null)).then(function(j){j?B(G,F,null):x(F)}).catch(function(j){x(j)})}catch(j){x(j)}else G<w?B(G,F,null):x(F)})};function B(G,X,F){var j=typeof R=="function"?R(G,X,F):R;setTimeout(function(){k(++G)},j)}k(0)})}}}()},5185:(i,a,l)=>{l.r(a),l.d(a,{default:()=>Lr,disableExperimentalFragmentVariables:()=>qe,disableFragmentWarnings:()=>Rn,enableExperimentalFragmentVariables:()=>it,gql:()=>rr,resetCaches:()=>Rr});var p=function(){return p=Object.assign||function(ce){for(var K,V=1,Y=arguments.length;V<Y;V++)for(var ve in K=arguments[V])Object.prototype.hasOwnProperty.call(K,ve)&&(ce[ve]=K[ve]);return ce},p.apply(this,arguments)};function u(ce){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},u(ce)}var m=l(9763);function E(ce,K){for(var V,Y=/\r\n|[\n\r]/g,ve=1,oe=K+1;(V=Y.exec(ce.body))&&V.index<K;)ve+=1,oe=K+1-(V.index+V[0].length);return{line:ve,column:oe}}function w(ce){return R(ce.source,E(ce.source,ce.start))}function R(ce,K){var V=ce.locationOffset.column-1,Y=P(V)+ce.body,ve=K.line-1,oe=ce.locationOffset.line-1,Pe=K.line+oe,me=K.line===1?V:0,ue=K.column+me,rt="".concat(ce.name,":").concat(Pe,":").concat(ue,`
`),ze=Y.split(/\r\n|[\n\r]/g),Yt=ze[ve];if(Yt.length>120){for(var ie=Math.floor(ue/80),Zt=ue%80,br=[],$r=0;$r<Yt.length;$r+=80)br.push(Yt.slice($r,$r+80));return rt+S([["".concat(Pe),br[0]]].concat(br.slice(1,ie+1).map(function(ri){return["",ri]}),[[" ",P(Zt-1)+"^"],["",br[ie+1]]]))}return rt+S([["".concat(Pe-1),ze[ve-1]],["".concat(Pe),Yt],["",P(ue-1)+"^"],["".concat(Pe+1),ze[ve+1]]])}function S(ce){var K=ce.filter(function(Y){return Y[0],Y[1]!==void 0}),V=Math.max.apply(Math,K.map(function(Y){return Y[0].length}));return K.map(function(Y){var ve,oe=Y[0],Pe=Y[1];return P(V-(ve=oe).length)+ve+(Pe?" | "+Pe:" |")}).join(`
`)}function P(ce){return Array(ce+1).join(" ")}function x(ce){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},x(ce)}function k(ce,K){var V=Object.keys(ce);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(ce);K&&(Y=Y.filter(function(ve){return Object.getOwnPropertyDescriptor(ce,ve).enumerable})),V.push.apply(V,Y)}return V}function B(ce,K,V){return K in ce?Object.defineProperty(ce,K,{value:V,enumerable:!0,configurable:!0,writable:!0}):ce[K]=V,ce}function G(ce,K){for(var V=0;V<K.length;V++){var Y=K[V];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(ce,Y.key,Y)}}function X(ce,K){return!K||x(K)!=="object"&&typeof K!="function"?F(ce):K}function F(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function j(ce){var K=typeof Map=="function"?new Map:void 0;return j=function(V){if(V===null||(Y=V,Function.toString.call(Y).indexOf("[native code]")===-1))return V;var Y;if(typeof V!="function")throw new TypeError("Super expression must either be null or a function");if(K!==void 0){if(K.has(V))return K.get(V);K.set(V,ve)}function ve(){return H(V,arguments,fe(this).constructor)}return ve.prototype=Object.create(V.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),te(ve,V)},j(ce)}function H(ce,K,V){return H=re()?Reflect.construct:function(Y,ve,oe){var Pe=[null];Pe.push.apply(Pe,ve);var me=new(Function.bind.apply(Y,Pe));return oe&&te(me,oe.prototype),me},H.apply(null,arguments)}function re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function te(ce,K){return te=Object.setPrototypeOf||function(V,Y){return V.__proto__=Y,V},te(ce,K)}function fe(ce){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)},fe(ce)}var Te=function(ce){(function(me,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(ue&&ue.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),ue&&te(me,ue)})(Pe,ce);var K,V,Y,ve,oe=(K=Pe,V=re(),function(){var me,ue=fe(K);if(V){var rt=fe(this).constructor;me=Reflect.construct(ue,arguments,rt)}else me=ue.apply(this,arguments);return X(this,me)});function Pe(me,ue,rt,ze,Yt,ie,Zt){var br,$r,ri,Qt;(function(de,Dn){if(!(de instanceof Dn))throw new TypeError("Cannot call a class as a function")})(this,Pe),(Qt=oe.call(this,me)).name="GraphQLError",Qt.originalError=ie??void 0,Qt.nodes=Ce(Array.isArray(ue)?ue:ue?[ue]:void 0);for(var $n=[],$i=0,pi=(Zr=Qt.nodes)!==null&&Zr!==void 0?Zr:[];$i<pi.length;$i++){var Zr,Jt=pi[$i].loc;Jt!=null&&$n.push(Jt)}$n=Ce($n),Qt.source=rt??((br=$n)===null||br===void 0?void 0:br[0].source),Qt.positions=ze??(($r=$n)===null||$r===void 0?void 0:$r.map(function(de){return de.start})),Qt.locations=ze&&rt?ze.map(function(de){return E(rt,de)}):(ri=$n)===null||ri===void 0?void 0:ri.map(function(de){return E(de.source,de.start)}),Qt.path=Yt??void 0;var cr,ni=ie==null?void 0:ie.extensions;return Zt==null&&u(cr=ni)=="object"&&cr!==null?Qt.extensions=function(de){for(var Dn=1;Dn<arguments.length;Dn++){var Ii=arguments[Dn]!=null?arguments[Dn]:{};Dn%2?k(Object(Ii),!0).forEach(function(Ur){B(de,Ur,Ii[Ur])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Ii)):k(Object(Ii)).forEach(function(Ur){Object.defineProperty(de,Ur,Object.getOwnPropertyDescriptor(Ii,Ur))})}return de}({},ni):Qt.extensions=Zt??{},Object.defineProperties(F(Qt),{message:{enumerable:!0},locations:{enumerable:Qt.locations!=null},path:{enumerable:Qt.path!=null},extensions:{enumerable:Qt.extensions!=null&&Object.keys(Qt.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),ie!=null&&ie.stack?(Object.defineProperty(F(Qt),"stack",{value:ie.stack,writable:!0,configurable:!0}),X(Qt)):(Error.captureStackTrace?Error.captureStackTrace(F(Qt),Pe):Object.defineProperty(F(Qt),"stack",{value:Error().stack,writable:!0,configurable:!0}),Qt)}return Y=Pe,(ve=[{key:"toString",value:function(){return function(me){var ue=me.message;if(me.nodes)for(var rt=0,ze=me.nodes;rt<ze.length;rt++){var Yt=ze[rt];Yt.loc&&(ue+=`

`+w(Yt.loc))}else if(me.source&&me.locations)for(var ie=0,Zt=me.locations;ie<Zt.length;ie++){var br=Zt[ie];ue+=`

`+R(me.source,br)}return ue}(this)}},{key:m.YF,get:function(){return"Object"}}])&&G(Y.prototype,ve),Pe}(j(Error));function Ce(ce){return ce===void 0||ce.length===0?void 0:ce}function $(ce,K,V){return new Te("Syntax Error: ".concat(V),void 0,ce,[K])}var J=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),ge=l(5217),ee=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"}),Ie=l(143),we=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),Be=l(7392),st=function(){function ce(V){var Y=new ge.WU(ee.SOF,0,0,0,0,null);this.source=V,this.lastToken=Y,this.token=Y,this.line=1,this.lineStart=0}var K=ce.prototype;return K.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},K.lookahead=function(){var V=this.token;if(V.kind!==ee.EOF)do{var Y;V=(Y=V.next)!==null&&Y!==void 0?Y:V.next=Ar(this,V)}while(V.kind===ee.COMMENT);return V},ce}();function At(ce){return isNaN(ce)?ee.EOF:ce<127?JSON.stringify(String.fromCharCode(ce)):'"\\u'.concat(("00"+ce.toString(16).toUpperCase()).slice(-4),'"')}function Ar(ce,K){for(var V=ce.source,Y=V.body,ve=Y.length,oe=K.end;oe<ve;){var Pe=Y.charCodeAt(oe),me=ce.line,ue=1+oe-ce.lineStart;switch(Pe){case 65279:case 9:case 32:case 44:++oe;continue;case 10:++oe,++ce.line,ce.lineStart=oe;continue;case 13:Y.charCodeAt(oe+1)===10?oe+=2:++oe,++ce.line,ce.lineStart=oe;continue;case 33:return new ge.WU(ee.BANG,oe,oe+1,me,ue,K);case 35:return sr(V,oe,me,ue,K);case 36:return new ge.WU(ee.DOLLAR,oe,oe+1,me,ue,K);case 38:return new ge.WU(ee.AMP,oe,oe+1,me,ue,K);case 40:return new ge.WU(ee.PAREN_L,oe,oe+1,me,ue,K);case 41:return new ge.WU(ee.PAREN_R,oe,oe+1,me,ue,K);case 46:if(Y.charCodeAt(oe+1)===46&&Y.charCodeAt(oe+2)===46)return new ge.WU(ee.SPREAD,oe,oe+3,me,ue,K);break;case 58:return new ge.WU(ee.COLON,oe,oe+1,me,ue,K);case 61:return new ge.WU(ee.EQUALS,oe,oe+1,me,ue,K);case 64:return new ge.WU(ee.AT,oe,oe+1,me,ue,K);case 91:return new ge.WU(ee.BRACKET_L,oe,oe+1,me,ue,K);case 93:return new ge.WU(ee.BRACKET_R,oe,oe+1,me,ue,K);case 123:return new ge.WU(ee.BRACE_L,oe,oe+1,me,ue,K);case 124:return new ge.WU(ee.PIPE,oe,oe+1,me,ue,K);case 125:return new ge.WU(ee.BRACE_R,oe,oe+1,me,ue,K);case 34:return Y.charCodeAt(oe+1)===34&&Y.charCodeAt(oe+2)===34?Kr(V,oe,me,ue,K,ce):Or(V,oe,me,ue,K);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Mt(V,oe,Pe,me,ue,K);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Wt(V,oe,me,ue,K)}throw $(V,oe,Ir(Pe))}var rt=ce.line,ze=1+oe-ce.lineStart;return new ge.WU(ee.EOF,ve,ve,rt,ze,K)}function Ir(ce){return ce<32&&ce!==9&&ce!==10&&ce!==13?"Cannot contain the invalid character ".concat(At(ce),"."):ce===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(At(ce),".")}function sr(ce,K,V,Y,ve){var oe,Pe=ce.body,me=K;do oe=Pe.charCodeAt(++me);while(!isNaN(oe)&&(oe>31||oe===9));return new ge.WU(ee.COMMENT,K,me,V,Y,ve,Pe.slice(K+1,me))}function Mt(ce,K,V,Y,ve,oe){var Pe=ce.body,me=V,ue=K,rt=!1;if(me===45&&(me=Pe.charCodeAt(++ue)),me===48){if((me=Pe.charCodeAt(++ue))>=48&&me<=57)throw $(ce,ue,"Invalid number, unexpected digit after 0: ".concat(At(me),"."))}else ue=ur(ce,ue,me),me=Pe.charCodeAt(ue);if(me===46&&(rt=!0,me=Pe.charCodeAt(++ue),ue=ur(ce,ue,me),me=Pe.charCodeAt(ue)),me!==69&&me!==101||(rt=!0,(me=Pe.charCodeAt(++ue))!==43&&me!==45||(me=Pe.charCodeAt(++ue)),ue=ur(ce,ue,me),me=Pe.charCodeAt(ue)),me===46||function(ze){return ze===95||ze>=65&&ze<=90||ze>=97&&ze<=122}(me))throw $(ce,ue,"Invalid number, expected digit but got: ".concat(At(me),"."));return new ge.WU(rt?ee.FLOAT:ee.INT,K,ue,Y,ve,oe,Pe.slice(K,ue))}function ur(ce,K,V){var Y=ce.body,ve=K,oe=V;if(oe>=48&&oe<=57){do oe=Y.charCodeAt(++ve);while(oe>=48&&oe<=57);return ve}throw $(ce,ve,"Invalid number, expected digit but got: ".concat(At(oe),"."))}function Or(ce,K,V,Y,ve){for(var oe,Pe,me,ue,rt=ce.body,ze=K+1,Yt=ze,ie=0,Zt="";ze<rt.length&&!isNaN(ie=rt.charCodeAt(ze))&&ie!==10&&ie!==13;){if(ie===34)return Zt+=rt.slice(Yt,ze),new ge.WU(ee.STRING,K,ze+1,V,Y,ve,Zt);if(ie<32&&ie!==9)throw $(ce,ze,"Invalid character within String: ".concat(At(ie),"."));if(++ze,ie===92){switch(Zt+=rt.slice(Yt,ze-1),ie=rt.charCodeAt(ze)){case 34:Zt+='"';break;case 47:Zt+="/";break;case 92:Zt+="\\";break;case 98:Zt+="\b";break;case 102:Zt+="\f";break;case 110:Zt+=`
`;break;case 114:Zt+="\r";break;case 116:Zt+="	";break;case 117:var br=(oe=rt.charCodeAt(ze+1),Pe=rt.charCodeAt(ze+2),me=rt.charCodeAt(ze+3),ue=rt.charCodeAt(ze+4),pr(oe)<<12|pr(Pe)<<8|pr(me)<<4|pr(ue));if(br<0){var $r=rt.slice(ze+1,ze+5);throw $(ce,ze,"Invalid character escape sequence: \\u".concat($r,"."))}Zt+=String.fromCharCode(br),ze+=4;break;default:throw $(ce,ze,"Invalid character escape sequence: \\".concat(String.fromCharCode(ie),"."))}Yt=++ze}}throw $(ce,ze,"Unterminated string.")}function Kr(ce,K,V,Y,ve,oe){for(var Pe=ce.body,me=K+3,ue=me,rt=0,ze="";me<Pe.length&&!isNaN(rt=Pe.charCodeAt(me));){if(rt===34&&Pe.charCodeAt(me+1)===34&&Pe.charCodeAt(me+2)===34)return ze+=Pe.slice(ue,me),new ge.WU(ee.BLOCK_STRING,K,me+3,V,Y,ve,(0,Be.W7)(ze));if(rt<32&&rt!==9&&rt!==10&&rt!==13)throw $(ce,me,"Invalid character within String: ".concat(At(rt),"."));rt===10?(++me,++oe.line,oe.lineStart=me):rt===13?(Pe.charCodeAt(me+1)===10?me+=2:++me,++oe.line,oe.lineStart=me):rt===92&&Pe.charCodeAt(me+1)===34&&Pe.charCodeAt(me+2)===34&&Pe.charCodeAt(me+3)===34?(ze+=Pe.slice(ue,me)+'"""',ue=me+=4):++me}throw $(ce,me,"Unterminated string.")}function pr(ce){return ce>=48&&ce<=57?ce-48:ce>=65&&ce<=70?ce-55:ce>=97&&ce<=102?ce-87:-1}function Wt(ce,K,V,Y,ve){for(var oe=ce.body,Pe=oe.length,me=K+1,ue=0;me!==Pe&&!isNaN(ue=oe.charCodeAt(me))&&(ue===95||ue>=48&&ue<=57||ue>=65&&ue<=90||ue>=97&&ue<=122);)++me;return new ge.WU(ee.NAME,K,me,V,Y,ve,oe.slice(K,me))}var xr=function(){function ce(V,Y){var ve=(0,Ie.T)(V)?V:new Ie.H(V);this._lexer=new st(ve),this._options=Y}var K=ce.prototype;return K.parseName=function(){var V=this.expectToken(ee.NAME);return{kind:J.NAME,value:V.value,loc:this.loc(V)}},K.parseDocument=function(){var V=this._lexer.token;return{kind:J.DOCUMENT,definitions:this.many(ee.SOF,this.parseDefinition,ee.EOF),loc:this.loc(V)}},K.parseDefinition=function(){if(this.peek(ee.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(ee.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},K.parseOperationDefinition=function(){var V=this._lexer.token;if(this.peek(ee.BRACE_L))return{kind:J.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(V)};var Y,ve=this.parseOperationType();return this.peek(ee.NAME)&&(Y=this.parseName()),{kind:J.OPERATION_DEFINITION,operation:ve,name:Y,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(V)}},K.parseOperationType=function(){var V=this.expectToken(ee.NAME);switch(V.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(V)},K.parseVariableDefinitions=function(){return this.optionalMany(ee.PAREN_L,this.parseVariableDefinition,ee.PAREN_R)},K.parseVariableDefinition=function(){var V=this._lexer.token;return{kind:J.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(ee.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ee.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(V)}},K.parseVariable=function(){var V=this._lexer.token;return this.expectToken(ee.DOLLAR),{kind:J.VARIABLE,name:this.parseName(),loc:this.loc(V)}},K.parseSelectionSet=function(){var V=this._lexer.token;return{kind:J.SELECTION_SET,selections:this.many(ee.BRACE_L,this.parseSelection,ee.BRACE_R),loc:this.loc(V)}},K.parseSelection=function(){return this.peek(ee.SPREAD)?this.parseFragment():this.parseField()},K.parseField=function(){var V,Y,ve=this._lexer.token,oe=this.parseName();return this.expectOptionalToken(ee.COLON)?(V=oe,Y=this.parseName()):Y=oe,{kind:J.FIELD,alias:V,name:Y,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ee.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(ve)}},K.parseArguments=function(V){var Y=V?this.parseConstArgument:this.parseArgument;return this.optionalMany(ee.PAREN_L,Y,ee.PAREN_R)},K.parseArgument=function(){var V=this._lexer.token,Y=this.parseName();return this.expectToken(ee.COLON),{kind:J.ARGUMENT,name:Y,value:this.parseValueLiteral(!1),loc:this.loc(V)}},K.parseConstArgument=function(){var V=this._lexer.token;return{kind:J.ARGUMENT,name:this.parseName(),value:(this.expectToken(ee.COLON),this.parseValueLiteral(!0)),loc:this.loc(V)}},K.parseFragment=function(){var V=this._lexer.token;this.expectToken(ee.SPREAD);var Y=this.expectOptionalKeyword("on");return!Y&&this.peek(ee.NAME)?{kind:J.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(V)}:{kind:J.INLINE_FRAGMENT,typeCondition:Y?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(V)}},K.parseFragmentDefinition=function(){var V,Y=this._lexer.token;return this.expectKeyword("fragment"),((V=this._options)===null||V===void 0?void 0:V.experimentalFragmentVariables)===!0?{kind:J.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(Y)}:{kind:J.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(Y)}},K.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},K.parseValueLiteral=function(V){var Y=this._lexer.token;switch(Y.kind){case ee.BRACKET_L:return this.parseList(V);case ee.BRACE_L:return this.parseObject(V);case ee.INT:return this._lexer.advance(),{kind:J.INT,value:Y.value,loc:this.loc(Y)};case ee.FLOAT:return this._lexer.advance(),{kind:J.FLOAT,value:Y.value,loc:this.loc(Y)};case ee.STRING:case ee.BLOCK_STRING:return this.parseStringLiteral();case ee.NAME:switch(this._lexer.advance(),Y.value){case"true":return{kind:J.BOOLEAN,value:!0,loc:this.loc(Y)};case"false":return{kind:J.BOOLEAN,value:!1,loc:this.loc(Y)};case"null":return{kind:J.NULL,loc:this.loc(Y)};default:return{kind:J.ENUM,value:Y.value,loc:this.loc(Y)}}case ee.DOLLAR:if(!V)return this.parseVariable()}throw this.unexpected()},K.parseStringLiteral=function(){var V=this._lexer.token;return this._lexer.advance(),{kind:J.STRING,value:V.value,block:V.kind===ee.BLOCK_STRING,loc:this.loc(V)}},K.parseList=function(V){var Y=this,ve=this._lexer.token;return{kind:J.LIST,values:this.any(ee.BRACKET_L,function(){return Y.parseValueLiteral(V)},ee.BRACKET_R),loc:this.loc(ve)}},K.parseObject=function(V){var Y=this,ve=this._lexer.token;return{kind:J.OBJECT,fields:this.any(ee.BRACE_L,function(){return Y.parseObjectField(V)},ee.BRACE_R),loc:this.loc(ve)}},K.parseObjectField=function(V){var Y=this._lexer.token,ve=this.parseName();return this.expectToken(ee.COLON),{kind:J.OBJECT_FIELD,name:ve,value:this.parseValueLiteral(V),loc:this.loc(Y)}},K.parseDirectives=function(V){for(var Y=[];this.peek(ee.AT);)Y.push(this.parseDirective(V));return Y},K.parseDirective=function(V){var Y=this._lexer.token;return this.expectToken(ee.AT),{kind:J.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(V),loc:this.loc(Y)}},K.parseTypeReference=function(){var V,Y=this._lexer.token;return this.expectOptionalToken(ee.BRACKET_L)?(V=this.parseTypeReference(),this.expectToken(ee.BRACKET_R),V={kind:J.LIST_TYPE,type:V,loc:this.loc(Y)}):V=this.parseNamedType(),this.expectOptionalToken(ee.BANG)?{kind:J.NON_NULL_TYPE,type:V,loc:this.loc(Y)}:V},K.parseNamedType=function(){var V=this._lexer.token;return{kind:J.NAMED_TYPE,name:this.parseName(),loc:this.loc(V)}},K.parseTypeSystemDefinition=function(){var V=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(V.kind===ee.NAME)switch(V.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(V)},K.peekDescription=function(){return this.peek(ee.STRING)||this.peek(ee.BLOCK_STRING)},K.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},K.parseSchemaDefinition=function(){var V=this._lexer.token,Y=this.parseDescription();this.expectKeyword("schema");var ve=this.parseDirectives(!0),oe=this.many(ee.BRACE_L,this.parseOperationTypeDefinition,ee.BRACE_R);return{kind:J.SCHEMA_DEFINITION,description:Y,directives:ve,operationTypes:oe,loc:this.loc(V)}},K.parseOperationTypeDefinition=function(){var V=this._lexer.token,Y=this.parseOperationType();this.expectToken(ee.COLON);var ve=this.parseNamedType();return{kind:J.OPERATION_TYPE_DEFINITION,operation:Y,type:ve,loc:this.loc(V)}},K.parseScalarTypeDefinition=function(){var V=this._lexer.token,Y=this.parseDescription();this.expectKeyword("scalar");var ve=this.parseName(),oe=this.parseDirectives(!0);return{kind:J.SCALAR_TYPE_DEFINITION,description:Y,name:ve,directives:oe,loc:this.loc(V)}},K.parseObjectTypeDefinition=function(){var V=this._lexer.token,Y=this.parseDescription();this.expectKeyword("type");var ve=this.parseName(),oe=this.parseImplementsInterfaces(),Pe=this.parseDirectives(!0),me=this.parseFieldsDefinition();return{kind:J.OBJECT_TYPE_DEFINITION,description:Y,name:ve,interfaces:oe,directives:Pe,fields:me,loc:this.loc(V)}},K.parseImplementsInterfaces=function(){var V;if(!this.expectOptionalKeyword("implements"))return[];if(((V=this._options)===null||V===void 0?void 0:V.allowLegacySDLImplementsInterfaces)===!0){var Y=[];this.expectOptionalToken(ee.AMP);do Y.push(this.parseNamedType());while(this.expectOptionalToken(ee.AMP)||this.peek(ee.NAME));return Y}return this.delimitedMany(ee.AMP,this.parseNamedType)},K.parseFieldsDefinition=function(){var V;return((V=this._options)===null||V===void 0?void 0:V.allowLegacySDLEmptyFields)===!0&&this.peek(ee.BRACE_L)&&this._lexer.lookahead().kind===ee.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(ee.BRACE_L,this.parseFieldDefinition,ee.BRACE_R)},K.parseFieldDefinition=function(){var V=this._lexer.token,Y=this.parseDescription(),ve=this.parseName(),oe=this.parseArgumentDefs();this.expectToken(ee.COLON);var Pe=this.parseTypeReference(),me=this.parseDirectives(!0);return{kind:J.FIELD_DEFINITION,description:Y,name:ve,arguments:oe,type:Pe,directives:me,loc:this.loc(V)}},K.parseArgumentDefs=function(){return this.optionalMany(ee.PAREN_L,this.parseInputValueDef,ee.PAREN_R)},K.parseInputValueDef=function(){var V=this._lexer.token,Y=this.parseDescription(),ve=this.parseName();this.expectToken(ee.COLON);var oe,Pe=this.parseTypeReference();this.expectOptionalToken(ee.EQUALS)&&(oe=this.parseValueLiteral(!0));var me=this.parseDirectives(!0);return{kind:J.INPUT_VALUE_DEFINITION,description:Y,name:ve,type:Pe,defaultValue:oe,directives:me,loc:this.loc(V)}},K.parseInterfaceTypeDefinition=function(){var V=this._lexer.token,Y=this.parseDescription();this.expectKeyword("interface");var ve=this.parseName(),oe=this.parseImplementsInterfaces(),Pe=this.parseDirectives(!0),me=this.parseFieldsDefinition();return{kind:J.INTERFACE_TYPE_DEFINITION,description:Y,name:ve,interfaces:oe,directives:Pe,fields:me,loc:this.loc(V)}},K.parseUnionTypeDefinition=function(){var V=this._lexer.token,Y=this.parseDescription();this.expectKeyword("union");var ve=this.parseName(),oe=this.parseDirectives(!0),Pe=this.parseUnionMemberTypes();return{kind:J.UNION_TYPE_DEFINITION,description:Y,name:ve,directives:oe,types:Pe,loc:this.loc(V)}},K.parseUnionMemberTypes=function(){return this.expectOptionalToken(ee.EQUALS)?this.delimitedMany(ee.PIPE,this.parseNamedType):[]},K.parseEnumTypeDefinition=function(){var V=this._lexer.token,Y=this.parseDescription();this.expectKeyword("enum");var ve=this.parseName(),oe=this.parseDirectives(!0),Pe=this.parseEnumValuesDefinition();return{kind:J.ENUM_TYPE_DEFINITION,description:Y,name:ve,directives:oe,values:Pe,loc:this.loc(V)}},K.parseEnumValuesDefinition=function(){return this.optionalMany(ee.BRACE_L,this.parseEnumValueDefinition,ee.BRACE_R)},K.parseEnumValueDefinition=function(){var V=this._lexer.token,Y=this.parseDescription(),ve=this.parseName(),oe=this.parseDirectives(!0);return{kind:J.ENUM_VALUE_DEFINITION,description:Y,name:ve,directives:oe,loc:this.loc(V)}},K.parseInputObjectTypeDefinition=function(){var V=this._lexer.token,Y=this.parseDescription();this.expectKeyword("input");var ve=this.parseName(),oe=this.parseDirectives(!0),Pe=this.parseInputFieldsDefinition();return{kind:J.INPUT_OBJECT_TYPE_DEFINITION,description:Y,name:ve,directives:oe,fields:Pe,loc:this.loc(V)}},K.parseInputFieldsDefinition=function(){return this.optionalMany(ee.BRACE_L,this.parseInputValueDef,ee.BRACE_R)},K.parseTypeSystemExtension=function(){var V=this._lexer.lookahead();if(V.kind===ee.NAME)switch(V.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(V)},K.parseSchemaExtension=function(){var V=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var Y=this.parseDirectives(!0),ve=this.optionalMany(ee.BRACE_L,this.parseOperationTypeDefinition,ee.BRACE_R);if(Y.length===0&&ve.length===0)throw this.unexpected();return{kind:J.SCHEMA_EXTENSION,directives:Y,operationTypes:ve,loc:this.loc(V)}},K.parseScalarTypeExtension=function(){var V=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var Y=this.parseName(),ve=this.parseDirectives(!0);if(ve.length===0)throw this.unexpected();return{kind:J.SCALAR_TYPE_EXTENSION,name:Y,directives:ve,loc:this.loc(V)}},K.parseObjectTypeExtension=function(){var V=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var Y=this.parseName(),ve=this.parseImplementsInterfaces(),oe=this.parseDirectives(!0),Pe=this.parseFieldsDefinition();if(ve.length===0&&oe.length===0&&Pe.length===0)throw this.unexpected();return{kind:J.OBJECT_TYPE_EXTENSION,name:Y,interfaces:ve,directives:oe,fields:Pe,loc:this.loc(V)}},K.parseInterfaceTypeExtension=function(){var V=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var Y=this.parseName(),ve=this.parseImplementsInterfaces(),oe=this.parseDirectives(!0),Pe=this.parseFieldsDefinition();if(ve.length===0&&oe.length===0&&Pe.length===0)throw this.unexpected();return{kind:J.INTERFACE_TYPE_EXTENSION,name:Y,interfaces:ve,directives:oe,fields:Pe,loc:this.loc(V)}},K.parseUnionTypeExtension=function(){var V=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var Y=this.parseName(),ve=this.parseDirectives(!0),oe=this.parseUnionMemberTypes();if(ve.length===0&&oe.length===0)throw this.unexpected();return{kind:J.UNION_TYPE_EXTENSION,name:Y,directives:ve,types:oe,loc:this.loc(V)}},K.parseEnumTypeExtension=function(){var V=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var Y=this.parseName(),ve=this.parseDirectives(!0),oe=this.parseEnumValuesDefinition();if(ve.length===0&&oe.length===0)throw this.unexpected();return{kind:J.ENUM_TYPE_EXTENSION,name:Y,directives:ve,values:oe,loc:this.loc(V)}},K.parseInputObjectTypeExtension=function(){var V=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var Y=this.parseName(),ve=this.parseDirectives(!0),oe=this.parseInputFieldsDefinition();if(ve.length===0&&oe.length===0)throw this.unexpected();return{kind:J.INPUT_OBJECT_TYPE_EXTENSION,name:Y,directives:ve,fields:oe,loc:this.loc(V)}},K.parseDirectiveDefinition=function(){var V=this._lexer.token,Y=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ee.AT);var ve=this.parseName(),oe=this.parseArgumentDefs(),Pe=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var me=this.parseDirectiveLocations();return{kind:J.DIRECTIVE_DEFINITION,description:Y,name:ve,arguments:oe,repeatable:Pe,locations:me,loc:this.loc(V)}},K.parseDirectiveLocations=function(){return this.delimitedMany(ee.PIPE,this.parseDirectiveLocation)},K.parseDirectiveLocation=function(){var V=this._lexer.token,Y=this.parseName();if(we[Y.value]!==void 0)return Y;throw this.unexpected(V)},K.loc=function(V){var Y;if(((Y=this._options)===null||Y===void 0?void 0:Y.noLocation)!==!0)return new ge.Ye(V,this._lexer.lastToken,this._lexer.source)},K.peek=function(V){return this._lexer.token.kind===V},K.expectToken=function(V){var Y=this._lexer.token;if(Y.kind===V)return this._lexer.advance(),Y;throw $(this._lexer.source,Y.start,"Expected ".concat(Yr(V),", found ").concat(Er(Y),"."))},K.expectOptionalToken=function(V){var Y=this._lexer.token;if(Y.kind===V)return this._lexer.advance(),Y},K.expectKeyword=function(V){var Y=this._lexer.token;if(Y.kind!==ee.NAME||Y.value!==V)throw $(this._lexer.source,Y.start,'Expected "'.concat(V,'", found ').concat(Er(Y),"."));this._lexer.advance()},K.expectOptionalKeyword=function(V){var Y=this._lexer.token;return Y.kind===ee.NAME&&Y.value===V&&(this._lexer.advance(),!0)},K.unexpected=function(V){var Y=V??this._lexer.token;return $(this._lexer.source,Y.start,"Unexpected ".concat(Er(Y),"."))},K.any=function(V,Y,ve){this.expectToken(V);for(var oe=[];!this.expectOptionalToken(ve);)oe.push(Y.call(this));return oe},K.optionalMany=function(V,Y,ve){if(this.expectOptionalToken(V)){var oe=[];do oe.push(Y.call(this));while(!this.expectOptionalToken(ve));return oe}return[]},K.many=function(V,Y,ve){this.expectToken(V);var oe=[];do oe.push(Y.call(this));while(!this.expectOptionalToken(ve));return oe},K.delimitedMany=function(V,Y){this.expectOptionalToken(V);var ve=[];do ve.push(Y.call(this));while(this.expectOptionalToken(V));return ve},ce}();function Er(ce){var K=ce.value;return Yr(ce.kind)+(K!=null?' "'.concat(K,'"'):"")}function Yr(ce){return function(K){return K===ee.BANG||K===ee.DOLLAR||K===ee.AMP||K===ee.PAREN_L||K===ee.PAREN_R||K===ee.SPREAD||K===ee.COLON||K===ee.EQUALS||K===ee.AT||K===ee.BRACKET_L||K===ee.BRACKET_R||K===ee.BRACE_L||K===ee.PIPE||K===ee.BRACE_R}(ce)?'"'.concat(ce,'"'):ce}var _t=new Map,le=new Map,gn=!0,Qr=!1;function Xr(ce){return ce.replace(/[\s,]+/g," ").trim()}function ti(ce){var K=Xr(ce);if(!_t.has(K)){var V=function(Y,ve){return new xr(Y,ve).parseDocument()}(ce,{experimentalFragmentVariables:Qr,allowLegacyFragmentVariables:Qr});if(!V||V.kind!=="Document")throw new Error("Not a valid GraphQL document.");_t.set(K,function(Y){var ve=new Set(Y.definitions);ve.forEach(function(Pe){Pe.loc&&delete Pe.loc,Object.keys(Pe).forEach(function(me){var ue=Pe[me];ue&&typeof ue=="object"&&ve.add(ue)})});var oe=Y.loc;return oe&&(delete oe.startToken,delete oe.endToken),Y}(function(Y){var ve=new Set,oe=[];return Y.definitions.forEach(function(Pe){if(Pe.kind==="FragmentDefinition"){var me=Pe.name.value,ue=Xr((ze=Pe.loc).source.body.substring(ze.start,ze.end)),rt=le.get(me);rt&&!rt.has(ue)?gn&&console.warn("Warning: fragment with name "+me+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):rt||le.set(me,rt=new Set),rt.add(ue),ve.has(ue)||(ve.add(ue),oe.push(Pe))}else oe.push(Pe);var ze}),p(p({},Y),{definitions:oe})}(V)))}return _t.get(K)}function rr(ce){for(var K=[],V=1;V<arguments.length;V++)K[V-1]=arguments[V];typeof ce=="string"&&(ce=[ce]);var Y=ce[0];return K.forEach(function(ve,oe){ve&&ve.kind==="Document"?Y+=ve.loc.source.body:Y+=ve,Y+=ce[oe+1]}),ti(Y)}function Rr(){_t.clear(),le.clear()}function Rn(){gn=!1}function it(){Qr=!0}function qe(){Qr=!1}var ye,zt=rr,It=Rr,Gn=Rn,mt=it,kn=qe;(ye=rr||(rr={})).gql=zt,ye.resetCaches=It,ye.disableFragmentWarnings=Gn,ye.enableExperimentalFragmentVariables=mt,ye.disableExperimentalFragmentVariables=kn,rr.default=rr;const Lr=rr},8552:(i,a,l)=>{var p=l(852)(l(5639),"DataView");i.exports=p},1989:(i,a,l)=>{var p=l(1789),u=l(401),m=l(7667),E=l(1327),w=l(1866);function R(S){var P=-1,x=S==null?0:S.length;for(this.clear();++P<x;){var k=S[P];this.set(k[0],k[1])}}R.prototype.clear=p,R.prototype.delete=u,R.prototype.get=m,R.prototype.has=E,R.prototype.set=w,i.exports=R},8407:(i,a,l)=>{var p=l(7040),u=l(4125),m=l(2117),E=l(7529),w=l(4705);function R(S){var P=-1,x=S==null?0:S.length;for(this.clear();++P<x;){var k=S[P];this.set(k[0],k[1])}}R.prototype.clear=p,R.prototype.delete=u,R.prototype.get=m,R.prototype.has=E,R.prototype.set=w,i.exports=R},7071:(i,a,l)=>{var p=l(852)(l(5639),"Map");i.exports=p},3369:(i,a,l)=>{var p=l(4785),u=l(1285),m=l(6e3),E=l(9916),w=l(5265);function R(S){var P=-1,x=S==null?0:S.length;for(this.clear();++P<x;){var k=S[P];this.set(k[0],k[1])}}R.prototype.clear=p,R.prototype.delete=u,R.prototype.get=m,R.prototype.has=E,R.prototype.set=w,i.exports=R},3818:(i,a,l)=>{var p=l(852)(l(5639),"Promise");i.exports=p},8525:(i,a,l)=>{var p=l(852)(l(5639),"Set");i.exports=p},8668:(i,a,l)=>{var p=l(3369),u=l(619),m=l(2385);function E(w){var R=-1,S=w==null?0:w.length;for(this.__data__=new p;++R<S;)this.add(w[R])}E.prototype.add=E.prototype.push=u,E.prototype.has=m,i.exports=E},6384:(i,a,l)=>{var p=l(8407),u=l(7465),m=l(3779),E=l(7599),w=l(4758),R=l(4309);function S(P){var x=this.__data__=new p(P);this.size=x.size}S.prototype.clear=u,S.prototype.delete=m,S.prototype.get=E,S.prototype.has=w,S.prototype.set=R,i.exports=S},2705:(i,a,l)=>{var p=l(5639).Symbol;i.exports=p},1149:(i,a,l)=>{var p=l(5639).Uint8Array;i.exports=p},577:(i,a,l)=>{var p=l(852)(l(5639),"WeakMap");i.exports=p},6874:i=>{i.exports=function(a,l,p){switch(p.length){case 0:return a.call(l);case 1:return a.call(l,p[0]);case 2:return a.call(l,p[0],p[1]);case 3:return a.call(l,p[0],p[1],p[2])}return a.apply(l,p)}},7412:i=>{i.exports=function(a,l){for(var p=-1,u=a==null?0:a.length;++p<u&&l(a[p],p,a)!==!1;);return a}},4963:i=>{i.exports=function(a,l){for(var p=-1,u=a==null?0:a.length,m=0,E=[];++p<u;){var w=a[p];l(w,p,a)&&(E[m++]=w)}return E}},4636:(i,a,l)=>{var p=l(2545),u=l(5694),m=l(1469),E=l(4144),w=l(5776),R=l(6719),S=Object.prototype.hasOwnProperty;i.exports=function(P,x){var k=m(P),B=!k&&u(P),G=!k&&!B&&E(P),X=!k&&!B&&!G&&R(P),F=k||B||G||X,j=F?p(P.length,String):[],H=j.length;for(var re in P)!x&&!S.call(P,re)||F&&(re=="length"||G&&(re=="offset"||re=="parent")||X&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||w(re,H))||j.push(re);return j}},9932:i=>{i.exports=function(a,l){for(var p=-1,u=a==null?0:a.length,m=Array(u);++p<u;)m[p]=l(a[p],p,a);return m}},2488:i=>{i.exports=function(a,l){for(var p=-1,u=l.length,m=a.length;++p<u;)a[m+p]=l[p];return a}},2908:i=>{i.exports=function(a,l){for(var p=-1,u=a==null?0:a.length;++p<u;)if(l(a[p],p,a))return!0;return!1}},6556:(i,a,l)=>{var p=l(9465),u=l(7813);i.exports=function(m,E,w){(w!==void 0&&!u(m[E],w)||w===void 0&&!(E in m))&&p(m,E,w)}},4865:(i,a,l)=>{var p=l(9465),u=l(7813),m=Object.prototype.hasOwnProperty;i.exports=function(E,w,R){var S=E[w];m.call(E,w)&&u(S,R)&&(R!==void 0||w in E)||p(E,w,R)}},8470:(i,a,l)=>{var p=l(7813);i.exports=function(u,m){for(var E=u.length;E--;)if(p(u[E][0],m))return E;return-1}},4037:(i,a,l)=>{var p=l(8363),u=l(3674);i.exports=function(m,E){return m&&p(E,u(E),m)}},3886:(i,a,l)=>{var p=l(8363),u=l(1704);i.exports=function(m,E){return m&&p(E,u(E),m)}},9465:(i,a,l)=>{var p=l(8777);i.exports=function(u,m,E){m=="__proto__"&&p?p(u,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):u[m]=E}},5990:(i,a,l)=>{var p=l(6384),u=l(7412),m=l(4865),E=l(4037),w=l(3886),R=l(4626),S=l(278),P=l(8805),x=l(1911),k=l(8234),B=l(6904),G=l(4160),X=l(3824),F=l(9148),j=l(8517),H=l(1469),re=l(4144),te=l(6688),fe=l(3218),Te=l(2928),Ce=l(3674),$=l(1704),J="[object Arguments]",ge="[object Function]",ee="[object Object]",Ie={};Ie[J]=Ie["[object Array]"]=Ie["[object ArrayBuffer]"]=Ie["[object DataView]"]=Ie["[object Boolean]"]=Ie["[object Date]"]=Ie["[object Float32Array]"]=Ie["[object Float64Array]"]=Ie["[object Int8Array]"]=Ie["[object Int16Array]"]=Ie["[object Int32Array]"]=Ie["[object Map]"]=Ie["[object Number]"]=Ie[ee]=Ie["[object RegExp]"]=Ie["[object Set]"]=Ie["[object String]"]=Ie["[object Symbol]"]=Ie["[object Uint8Array]"]=Ie["[object Uint8ClampedArray]"]=Ie["[object Uint16Array]"]=Ie["[object Uint32Array]"]=!0,Ie["[object Error]"]=Ie[ge]=Ie["[object WeakMap]"]=!1,i.exports=function we(Be,st,At,Ar,Ir,sr){var Mt,ur=1&st,Or=2&st,Kr=4&st;if(At&&(Mt=Ir?At(Be,Ar,Ir,sr):At(Be)),Mt!==void 0)return Mt;if(!fe(Be))return Be;var pr=H(Be);if(pr){if(Mt=X(Be),!ur)return S(Be,Mt)}else{var Wt=G(Be),xr=Wt==ge||Wt=="[object GeneratorFunction]";if(re(Be))return R(Be,ur);if(Wt==ee||Wt==J||xr&&!Ir){if(Mt=Or||xr?{}:j(Be),!ur)return Or?x(Be,w(Mt,Be)):P(Be,E(Mt,Be))}else{if(!Ie[Wt])return Ir?Be:{};Mt=F(Be,Wt,ur)}}sr||(sr=new p);var Er=sr.get(Be);if(Er)return Er;sr.set(Be,Mt),Te(Be)?Be.forEach(function(_t){Mt.add(we(_t,st,At,_t,Be,sr))}):te(Be)&&Be.forEach(function(_t,le){Mt.set(le,we(_t,st,At,le,Be,sr))});var Yr=pr?void 0:(Kr?Or?B:k:Or?$:Ce)(Be);return u(Yr||Be,function(_t,le){Yr&&(_t=Be[le=_t]),m(Mt,le,we(_t,st,At,le,Be,sr))}),Mt}},3118:(i,a,l)=>{var p=l(3218),u=Object.create,m=function(){function E(){}return function(w){if(!p(w))return{};if(u)return u(w);E.prototype=w;var R=new E;return E.prototype=void 0,R}}();i.exports=m},4140:(i,a,l)=>{var p=l(7816),u=l(9291)(p);i.exports=u},1848:i=>{i.exports=function(a,l,p,u){for(var m=a.length,E=p+(u?1:-1);u?E--:++E<m;)if(l(a[E],E,a))return E;return-1}},1078:(i,a,l)=>{var p=l(2488),u=l(7285);i.exports=function m(E,w,R,S,P){var x=-1,k=E.length;for(R||(R=u),P||(P=[]);++x<k;){var B=E[x];w>0&&R(B)?w>1?m(B,w-1,R,S,P):p(P,B):S||(P[P.length]=B)}return P}},8483:(i,a,l)=>{var p=l(5063)();i.exports=p},7816:(i,a,l)=>{var p=l(8483),u=l(3674);i.exports=function(m,E){return m&&p(m,E,u)}},7786:(i,a,l)=>{var p=l(1811),u=l(327);i.exports=function(m,E){for(var w=0,R=(E=p(E,m)).length;m!=null&&w<R;)m=m[u(E[w++])];return w&&w==R?m:void 0}},8866:(i,a,l)=>{var p=l(2488),u=l(1469);i.exports=function(m,E,w){var R=E(m);return u(m)?R:p(R,w(m))}},4239:(i,a,l)=>{var p=l(2705),u=l(9607),m=l(2333),E=p?p.toStringTag:void 0;i.exports=function(w){return w==null?w===void 0?"[object Undefined]":"[object Null]":E&&E in Object(w)?u(w):m(w)}},13:i=>{i.exports=function(a,l){return a!=null&&l in Object(a)}},2118:(i,a,l)=>{var p=l(1848),u=l(2722),m=l(2351);i.exports=function(E,w,R){return w==w?m(E,w,R):p(E,u,R)}},9454:(i,a,l)=>{var p=l(4239),u=l(7005);i.exports=function(m){return u(m)&&p(m)=="[object Arguments]"}},939:(i,a,l)=>{var p=l(1299),u=l(7005);i.exports=function m(E,w,R,S,P){return E===w||(E==null||w==null||!u(E)&&!u(w)?E!=E&&w!=w:p(E,w,R,S,m,P))}},1299:(i,a,l)=>{var p=l(6384),u=l(7114),m=l(8351),E=l(6096),w=l(4160),R=l(1469),S=l(4144),P=l(6719),x="[object Arguments]",k="[object Array]",B="[object Object]",G=Object.prototype.hasOwnProperty;i.exports=function(X,F,j,H,re,te){var fe=R(X),Te=R(F),Ce=fe?k:w(X),$=Te?k:w(F),J=(Ce=Ce==x?B:Ce)==B,ge=($=$==x?B:$)==B,ee=Ce==$;if(ee&&S(X)){if(!S(F))return!1;fe=!0,J=!1}if(ee&&!J)return te||(te=new p),fe||P(X)?u(X,F,j,H,re,te):m(X,F,Ce,j,H,re,te);if(!(1&j)){var Ie=J&&G.call(X,"__wrapped__"),we=ge&&G.call(F,"__wrapped__");if(Ie||we){var Be=Ie?X.value():X,st=we?F.value():F;return te||(te=new p),re(Be,st,j,H,te)}}return!!ee&&(te||(te=new p),E(X,F,j,H,re,te))}},5588:(i,a,l)=>{var p=l(4160),u=l(7005);i.exports=function(m){return u(m)&&p(m)=="[object Map]"}},2958:(i,a,l)=>{var p=l(6384),u=l(939);i.exports=function(m,E,w,R){var S=w.length,P=S,x=!R;if(m==null)return!P;for(m=Object(m);S--;){var k=w[S];if(x&&k[2]?k[1]!==m[k[0]]:!(k[0]in m))return!1}for(;++S<P;){var B=(k=w[S])[0],G=m[B],X=k[1];if(x&&k[2]){if(G===void 0&&!(B in m))return!1}else{var F=new p;if(R)var j=R(G,X,B,m,E,F);if(!(j===void 0?u(X,G,3,R,F):j))return!1}}return!0}},2722:i=>{i.exports=function(a){return a!=a}},8458:(i,a,l)=>{var p=l(3560),u=l(5346),m=l(3218),E=l(346),w=/^\[object .+?Constructor\]$/,R=Function.prototype,S=Object.prototype,P=R.toString,x=S.hasOwnProperty,k=RegExp("^"+P.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");i.exports=function(B){return!(!m(B)||u(B))&&(p(B)?k:w).test(E(B))}},9221:(i,a,l)=>{var p=l(4160),u=l(7005);i.exports=function(m){return u(m)&&p(m)=="[object Set]"}},8749:(i,a,l)=>{var p=l(4239),u=l(1780),m=l(7005),E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object Boolean]"]=E["[object DataView]"]=E["[object Date]"]=E["[object Error]"]=E["[object Function]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object WeakMap]"]=!1,i.exports=function(w){return m(w)&&u(w.length)&&!!E[p(w)]}},7206:(i,a,l)=>{var p=l(1573),u=l(6432),m=l(6557),E=l(1469),w=l(9601);i.exports=function(R){return typeof R=="function"?R:R==null?m:typeof R=="object"?E(R)?u(R[0],R[1]):p(R):w(R)}},280:(i,a,l)=>{var p=l(5726),u=l(6916),m=Object.prototype.hasOwnProperty;i.exports=function(E){if(!p(E))return u(E);var w=[];for(var R in Object(E))m.call(E,R)&&R!="constructor"&&w.push(R);return w}},313:(i,a,l)=>{var p=l(3218),u=l(5726),m=l(3498),E=Object.prototype.hasOwnProperty;i.exports=function(w){if(!p(w))return m(w);var R=u(w),S=[];for(var P in w)(P!="constructor"||!R&&E.call(w,P))&&S.push(P);return S}},9199:(i,a,l)=>{var p=l(4140),u=l(8612);i.exports=function(m,E){var w=-1,R=u(m)?Array(m.length):[];return p(m,function(S,P,x){R[++w]=E(S,P,x)}),R}},1573:(i,a,l)=>{var p=l(2958),u=l(1499),m=l(2634);i.exports=function(E){var w=u(E);return w.length==1&&w[0][2]?m(w[0][0],w[0][1]):function(R){return R===E||p(R,E,w)}}},6432:(i,a,l)=>{var p=l(939),u=l(7361),m=l(9095),E=l(5403),w=l(9162),R=l(2634),S=l(327);i.exports=function(P,x){return E(P)&&w(x)?R(S(P),x):function(k){var B=u(k,P);return B===void 0&&B===x?m(k,P):p(x,B,3)}}},2980:(i,a,l)=>{var p=l(6384),u=l(6556),m=l(8483),E=l(9783),w=l(3218),R=l(1704),S=l(6390);i.exports=function P(x,k,B,G,X){x!==k&&m(k,function(F,j){if(X||(X=new p),w(F))E(x,k,j,B,P,G,X);else{var H=G?G(S(x,j),F,j+"",x,k,X):void 0;H===void 0&&(H=F),u(x,j,H)}},R)}},9783:(i,a,l)=>{var p=l(6556),u=l(4626),m=l(7133),E=l(278),w=l(8517),R=l(5694),S=l(1469),P=l(9246),x=l(4144),k=l(3560),B=l(3218),G=l(8630),X=l(6719),F=l(6390),j=l(9881);i.exports=function(H,re,te,fe,Te,Ce,$){var J=F(H,te),ge=F(re,te),ee=$.get(ge);if(ee)p(H,te,ee);else{var Ie=Ce?Ce(J,ge,te+"",H,re,$):void 0,we=Ie===void 0;if(we){var Be=S(ge),st=!Be&&x(ge),At=!Be&&!st&&X(ge);Ie=ge,Be||st||At?S(J)?Ie=J:P(J)?Ie=E(J):st?(we=!1,Ie=u(ge,!0)):At?(we=!1,Ie=m(ge,!0)):Ie=[]:G(ge)||R(ge)?(Ie=J,R(J)?Ie=j(J):B(J)&&!k(J)||(Ie=w(ge))):we=!1}we&&($.set(ge,Ie),Te(Ie,ge,fe,Ce,$),$.delete(ge)),p(H,te,Ie)}}},371:i=>{i.exports=function(a){return function(l){return l==null?void 0:l[a]}}},9152:(i,a,l)=>{var p=l(7786);i.exports=function(u){return function(m){return p(m,u)}}},5976:(i,a,l)=>{var p=l(6557),u=l(5357),m=l(61);i.exports=function(E,w){return m(u(E,w,p),E+"")}},6560:(i,a,l)=>{var p=l(5703),u=l(8777),m=l(6557),E=u?function(w,R){return u(w,"toString",{configurable:!0,enumerable:!1,value:p(R),writable:!0})}:m;i.exports=E},4259:i=>{i.exports=function(a,l,p){var u=-1,m=a.length;l<0&&(l=-l>m?0:m+l),(p=p>m?m:p)<0&&(p+=m),m=l>p?0:p-l>>>0,l>>>=0;for(var E=Array(m);++u<m;)E[u]=a[u+l];return E}},5076:(i,a,l)=>{var p=l(4140);i.exports=function(u,m){var E;return p(u,function(w,R,S){return!(E=m(w,R,S))}),!!E}},2545:i=>{i.exports=function(a,l){for(var p=-1,u=Array(a);++p<a;)u[p]=l(p);return u}},531:(i,a,l)=>{var p=l(2705),u=l(9932),m=l(1469),E=l(3448),w=p?p.prototype:void 0,R=w?w.toString:void 0;i.exports=function S(P){if(typeof P=="string")return P;if(m(P))return u(P,S)+"";if(E(P))return R?R.call(P):"";var x=P+"";return x=="0"&&1/P==-1/0?"-0":x}},7561:(i,a,l)=>{var p=l(7990),u=/^\s+/;i.exports=function(m){return m&&m.slice(0,p(m)+1).replace(u,"")}},7518:i=>{i.exports=function(a){return function(l){return a(l)}}},7406:(i,a,l)=>{var p=l(1811),u=l(928),m=l(292),E=l(327);i.exports=function(w,R){return R=p(R,w),(w=m(w,R))==null||delete w[E(u(R))]}},7415:(i,a,l)=>{var p=l(9932);i.exports=function(u,m){return p(m,function(E){return u[E]})}},4757:i=>{i.exports=function(a,l){return a.has(l)}},1811:(i,a,l)=>{var p=l(1469),u=l(5403),m=l(5514),E=l(9833);i.exports=function(w,R){return p(w)?w:u(w,R)?[w]:m(E(w))}},4318:(i,a,l)=>{var p=l(1149);i.exports=function(u){var m=new u.constructor(u.byteLength);return new p(m).set(new p(u)),m}},4626:(i,a,l)=>{i=l.nmd(i);var p=l(5639),u=a&&!a.nodeType&&a,m=u&&i&&!i.nodeType&&i,E=m&&m.exports===u?p.Buffer:void 0,w=E?E.allocUnsafe:void 0;i.exports=function(R,S){if(S)return R.slice();var P=R.length,x=w?w(P):new R.constructor(P);return R.copy(x),x}},7157:(i,a,l)=>{var p=l(4318);i.exports=function(u,m){var E=m?p(u.buffer):u.buffer;return new u.constructor(E,u.byteOffset,u.byteLength)}},3147:i=>{var a=/\w*$/;i.exports=function(l){var p=new l.constructor(l.source,a.exec(l));return p.lastIndex=l.lastIndex,p}},419:(i,a,l)=>{var p=l(2705),u=p?p.prototype:void 0,m=u?u.valueOf:void 0;i.exports=function(E){return m?Object(m.call(E)):{}}},7133:(i,a,l)=>{var p=l(4318);i.exports=function(u,m){var E=m?p(u.buffer):u.buffer;return new u.constructor(E,u.byteOffset,u.length)}},278:i=>{i.exports=function(a,l){var p=-1,u=a.length;for(l||(l=Array(u));++p<u;)l[p]=a[p];return l}},8363:(i,a,l)=>{var p=l(4865),u=l(9465);i.exports=function(m,E,w,R){var S=!w;w||(w={});for(var P=-1,x=E.length;++P<x;){var k=E[P],B=R?R(w[k],m[k],k,w,m):void 0;B===void 0&&(B=m[k]),S?u(w,k,B):p(w,k,B)}return w}},8805:(i,a,l)=>{var p=l(8363),u=l(9551);i.exports=function(m,E){return p(m,u(m),E)}},1911:(i,a,l)=>{var p=l(8363),u=l(1442);i.exports=function(m,E){return p(m,u(m),E)}},4429:(i,a,l)=>{var p=l(5639)["__core-js_shared__"];i.exports=p},1463:(i,a,l)=>{var p=l(5976),u=l(6612);i.exports=function(m){return p(function(E,w){var R=-1,S=w.length,P=S>1?w[S-1]:void 0,x=S>2?w[2]:void 0;for(P=m.length>3&&typeof P=="function"?(S--,P):void 0,x&&u(w[0],w[1],x)&&(P=S<3?void 0:P,S=1),E=Object(E);++R<S;){var k=w[R];k&&m(E,k,R,P)}return E})}},9291:(i,a,l)=>{var p=l(8612);i.exports=function(u,m){return function(E,w){if(E==null)return E;if(!p(E))return u(E,w);for(var R=E.length,S=m?R:-1,P=Object(E);(m?S--:++S<R)&&w(P[S],S,P)!==!1;);return E}}},5063:i=>{i.exports=function(a){return function(l,p,u){for(var m=-1,E=Object(l),w=u(l),R=w.length;R--;){var S=w[a?R:++m];if(p(E[S],S,E)===!1)break}return l}}},696:(i,a,l)=>{var p=l(8630);i.exports=function(u){return p(u)?void 0:u}},8777:(i,a,l)=>{var p=l(852),u=function(){try{var m=p(Object,"defineProperty");return m({},"",{}),m}catch{}}();i.exports=u},7114:(i,a,l)=>{var p=l(8668),u=l(2908),m=l(4757);i.exports=function(E,w,R,S,P,x){var k=1&R,B=E.length,G=w.length;if(B!=G&&!(k&&G>B))return!1;var X=x.get(E),F=x.get(w);if(X&&F)return X==w&&F==E;var j=-1,H=!0,re=2&R?new p:void 0;for(x.set(E,w),x.set(w,E);++j<B;){var te=E[j],fe=w[j];if(S)var Te=k?S(fe,te,j,w,E,x):S(te,fe,j,E,w,x);if(Te!==void 0){if(Te)continue;H=!1;break}if(re){if(!u(w,function(Ce,$){if(!m(re,$)&&(te===Ce||P(te,Ce,R,S,x)))return re.push($)})){H=!1;break}}else if(te!==fe&&!P(te,fe,R,S,x)){H=!1;break}}return x.delete(E),x.delete(w),H}},8351:(i,a,l)=>{var p=l(2705),u=l(1149),m=l(7813),E=l(7114),w=l(8776),R=l(1814),S=p?p.prototype:void 0,P=S?S.valueOf:void 0;i.exports=function(x,k,B,G,X,F,j){switch(B){case"[object DataView]":if(x.byteLength!=k.byteLength||x.byteOffset!=k.byteOffset)return!1;x=x.buffer,k=k.buffer;case"[object ArrayBuffer]":return!(x.byteLength!=k.byteLength||!F(new u(x),new u(k)));case"[object Boolean]":case"[object Date]":case"[object Number]":return m(+x,+k);case"[object Error]":return x.name==k.name&&x.message==k.message;case"[object RegExp]":case"[object String]":return x==k+"";case"[object Map]":var H=w;case"[object Set]":var re=1&G;if(H||(H=R),x.size!=k.size&&!re)return!1;var te=j.get(x);if(te)return te==k;G|=2,j.set(x,k);var fe=E(H(x),H(k),G,X,F,j);return j.delete(x),fe;case"[object Symbol]":if(P)return P.call(x)==P.call(k)}return!1}},6096:(i,a,l)=>{var p=l(8234),u=Object.prototype.hasOwnProperty;i.exports=function(m,E,w,R,S,P){var x=1&w,k=p(m),B=k.length;if(B!=p(E).length&&!x)return!1;for(var G=B;G--;){var X=k[G];if(!(x?X in E:u.call(E,X)))return!1}var F=P.get(m),j=P.get(E);if(F&&j)return F==E&&j==m;var H=!0;P.set(m,E),P.set(E,m);for(var re=x;++G<B;){var te=m[X=k[G]],fe=E[X];if(R)var Te=x?R(fe,te,X,E,m,P):R(te,fe,X,m,E,P);if(!(Te===void 0?te===fe||S(te,fe,w,R,P):Te)){H=!1;break}re||(re=X=="constructor")}if(H&&!re){var Ce=m.constructor,$=E.constructor;Ce==$||!("constructor"in m)||!("constructor"in E)||typeof Ce=="function"&&Ce instanceof Ce&&typeof $=="function"&&$ instanceof $||(H=!1)}return P.delete(m),P.delete(E),H}},9021:(i,a,l)=>{var p=l(5564),u=l(5357),m=l(61);i.exports=function(E){return m(u(E,void 0,p),E+"")}},1957:(i,a,l)=>{var p=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g;i.exports=p},8234:(i,a,l)=>{var p=l(8866),u=l(9551),m=l(3674);i.exports=function(E){return p(E,m,u)}},6904:(i,a,l)=>{var p=l(8866),u=l(1442),m=l(1704);i.exports=function(E){return p(E,m,u)}},5050:(i,a,l)=>{var p=l(7019);i.exports=function(u,m){var E=u.__data__;return p(m)?E[typeof m=="string"?"string":"hash"]:E.map}},1499:(i,a,l)=>{var p=l(9162),u=l(3674);i.exports=function(m){for(var E=u(m),w=E.length;w--;){var R=E[w],S=m[R];E[w]=[R,S,p(S)]}return E}},852:(i,a,l)=>{var p=l(8458),u=l(7801);i.exports=function(m,E){var w=u(m,E);return p(w)?w:void 0}},5924:(i,a,l)=>{var p=l(5569)(Object.getPrototypeOf,Object);i.exports=p},9607:(i,a,l)=>{var p=l(2705),u=Object.prototype,m=u.hasOwnProperty,E=u.toString,w=p?p.toStringTag:void 0;i.exports=function(R){var S=m.call(R,w),P=R[w];try{R[w]=void 0;var x=!0}catch{}var k=E.call(R);return x&&(S?R[w]=P:delete R[w]),k}},9551:(i,a,l)=>{var p=l(4963),u=l(479),m=Object.prototype.propertyIsEnumerable,E=Object.getOwnPropertySymbols,w=E?function(R){return R==null?[]:(R=Object(R),p(E(R),function(S){return m.call(R,S)}))}:u;i.exports=w},1442:(i,a,l)=>{var p=l(2488),u=l(5924),m=l(9551),E=l(479),w=Object.getOwnPropertySymbols?function(R){for(var S=[];R;)p(S,m(R)),R=u(R);return S}:E;i.exports=w},4160:(i,a,l)=>{var p=l(8552),u=l(7071),m=l(3818),E=l(8525),w=l(577),R=l(4239),S=l(346),P="[object Map]",x="[object Promise]",k="[object Set]",B="[object WeakMap]",G="[object DataView]",X=S(p),F=S(u),j=S(m),H=S(E),re=S(w),te=R;(p&&te(new p(new ArrayBuffer(1)))!=G||u&&te(new u)!=P||m&&te(m.resolve())!=x||E&&te(new E)!=k||w&&te(new w)!=B)&&(te=function(fe){var Te=R(fe),Ce=Te=="[object Object]"?fe.constructor:void 0,$=Ce?S(Ce):"";if($)switch($){case X:return G;case F:return P;case j:return x;case H:return k;case re:return B}return Te}),i.exports=te},7801:i=>{i.exports=function(a,l){return a==null?void 0:a[l]}},222:(i,a,l)=>{var p=l(1811),u=l(5694),m=l(1469),E=l(5776),w=l(1780),R=l(327);i.exports=function(S,P,x){for(var k=-1,B=(P=p(P,S)).length,G=!1;++k<B;){var X=R(P[k]);if(!(G=S!=null&&x(S,X)))break;S=S[X]}return G||++k!=B?G:!!(B=S==null?0:S.length)&&w(B)&&E(X,B)&&(m(S)||u(S))}},1789:(i,a,l)=>{var p=l(4536);i.exports=function(){this.__data__=p?p(null):{},this.size=0}},401:i=>{i.exports=function(a){var l=this.has(a)&&delete this.__data__[a];return this.size-=l?1:0,l}},7667:(i,a,l)=>{var p=l(4536),u=Object.prototype.hasOwnProperty;i.exports=function(m){var E=this.__data__;if(p){var w=E[m];return w==="__lodash_hash_undefined__"?void 0:w}return u.call(E,m)?E[m]:void 0}},1327:(i,a,l)=>{var p=l(4536),u=Object.prototype.hasOwnProperty;i.exports=function(m){var E=this.__data__;return p?E[m]!==void 0:u.call(E,m)}},1866:(i,a,l)=>{var p=l(4536);i.exports=function(u,m){var E=this.__data__;return this.size+=this.has(u)?0:1,E[u]=p&&m===void 0?"__lodash_hash_undefined__":m,this}},3824:i=>{var a=Object.prototype.hasOwnProperty;i.exports=function(l){var p=l.length,u=new l.constructor(p);return p&&typeof l[0]=="string"&&a.call(l,"index")&&(u.index=l.index,u.input=l.input),u}},9148:(i,a,l)=>{var p=l(4318),u=l(7157),m=l(3147),E=l(419),w=l(7133);i.exports=function(R,S,P){var x=R.constructor;switch(S){case"[object ArrayBuffer]":return p(R);case"[object Boolean]":case"[object Date]":return new x(+R);case"[object DataView]":return u(R,P);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return w(R,P);case"[object Map]":case"[object Set]":return new x;case"[object Number]":case"[object String]":return new x(R);case"[object RegExp]":return m(R);case"[object Symbol]":return E(R)}}},8517:(i,a,l)=>{var p=l(3118),u=l(5924),m=l(5726);i.exports=function(E){return typeof E.constructor!="function"||m(E)?{}:p(u(E))}},7285:(i,a,l)=>{var p=l(2705),u=l(5694),m=l(1469),E=p?p.isConcatSpreadable:void 0;i.exports=function(w){return m(w)||u(w)||!!(E&&w&&w[E])}},5776:i=>{var a=/^(?:0|[1-9]\d*)$/;i.exports=function(l,p){var u=typeof l;return!!(p=p??9007199254740991)&&(u=="number"||u!="symbol"&&a.test(l))&&l>-1&&l%1==0&&l<p}},6612:(i,a,l)=>{var p=l(7813),u=l(8612),m=l(5776),E=l(3218);i.exports=function(w,R,S){if(!E(S))return!1;var P=typeof R;return!!(P=="number"?u(S)&&m(R,S.length):P=="string"&&R in S)&&p(S[R],w)}},5403:(i,a,l)=>{var p=l(1469),u=l(3448),m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;i.exports=function(w,R){if(p(w))return!1;var S=typeof w;return!(S!="number"&&S!="symbol"&&S!="boolean"&&w!=null&&!u(w))||E.test(w)||!m.test(w)||R!=null&&w in Object(R)}},7019:i=>{i.exports=function(a){var l=typeof a;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?a!=="__proto__":a===null}},5346:(i,a,l)=>{var p,u=l(4429),m=(p=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+p:"";i.exports=function(E){return!!m&&m in E}},5726:i=>{var a=Object.prototype;i.exports=function(l){var p=l&&l.constructor;return l===(typeof p=="function"&&p.prototype||a)}},9162:(i,a,l)=>{var p=l(3218);i.exports=function(u){return u==u&&!p(u)}},7040:i=>{i.exports=function(){this.__data__=[],this.size=0}},4125:(i,a,l)=>{var p=l(8470),u=Array.prototype.splice;i.exports=function(m){var E=this.__data__,w=p(E,m);return!(w<0||(w==E.length-1?E.pop():u.call(E,w,1),--this.size,0))}},2117:(i,a,l)=>{var p=l(8470);i.exports=function(u){var m=this.__data__,E=p(m,u);return E<0?void 0:m[E][1]}},7529:(i,a,l)=>{var p=l(8470);i.exports=function(u){return p(this.__data__,u)>-1}},4705:(i,a,l)=>{var p=l(8470);i.exports=function(u,m){var E=this.__data__,w=p(E,u);return w<0?(++this.size,E.push([u,m])):E[w][1]=m,this}},4785:(i,a,l)=>{var p=l(1989),u=l(8407),m=l(7071);i.exports=function(){this.size=0,this.__data__={hash:new p,map:new(m||u),string:new p}}},1285:(i,a,l)=>{var p=l(5050);i.exports=function(u){var m=p(this,u).delete(u);return this.size-=m?1:0,m}},6e3:(i,a,l)=>{var p=l(5050);i.exports=function(u){return p(this,u).get(u)}},9916:(i,a,l)=>{var p=l(5050);i.exports=function(u){return p(this,u).has(u)}},5265:(i,a,l)=>{var p=l(5050);i.exports=function(u,m){var E=p(this,u),w=E.size;return E.set(u,m),this.size+=E.size==w?0:1,this}},8776:i=>{i.exports=function(a){var l=-1,p=Array(a.size);return a.forEach(function(u,m){p[++l]=[m,u]}),p}},2634:i=>{i.exports=function(a,l){return function(p){return p!=null&&p[a]===l&&(l!==void 0||a in Object(p))}}},4523:(i,a,l)=>{var p=l(8306);i.exports=function(u){var m=p(u,function(w){return E.size===500&&E.clear(),w}),E=m.cache;return m}},4536:(i,a,l)=>{var p=l(852)(Object,"create");i.exports=p},6916:(i,a,l)=>{var p=l(5569)(Object.keys,Object);i.exports=p},3498:i=>{i.exports=function(a){var l=[];if(a!=null)for(var p in Object(a))l.push(p);return l}},1167:(i,a,l)=>{i=l.nmd(i);var p=l(1957),u=a&&!a.nodeType&&a,m=u&&i&&!i.nodeType&&i,E=m&&m.exports===u&&p.process,w=function(){try{return m&&m.require&&m.require("util").types||E&&E.binding&&E.binding("util")}catch{}}();i.exports=w},2333:i=>{var a=Object.prototype.toString;i.exports=function(l){return a.call(l)}},5569:i=>{i.exports=function(a,l){return function(p){return a(l(p))}}},5357:(i,a,l)=>{var p=l(6874),u=Math.max;i.exports=function(m,E,w){return E=u(E===void 0?m.length-1:E,0),function(){for(var R=arguments,S=-1,P=u(R.length-E,0),x=Array(P);++S<P;)x[S]=R[E+S];S=-1;for(var k=Array(E+1);++S<E;)k[S]=R[S];return k[E]=w(x),p(m,this,k)}}},292:(i,a,l)=>{var p=l(7786),u=l(4259);i.exports=function(m,E){return E.length<2?m:p(m,u(E,0,-1))}},5639:(i,a,l)=>{var p=l(1957),u=typeof self=="object"&&self&&self.Object===Object&&self,m=p||u||Function("return this")();i.exports=m},6390:i=>{i.exports=function(a,l){if((l!=="constructor"||typeof a[l]!="function")&&l!="__proto__")return a[l]}},619:i=>{i.exports=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this}},2385:i=>{i.exports=function(a){return this.__data__.has(a)}},1814:i=>{i.exports=function(a){var l=-1,p=Array(a.size);return a.forEach(function(u){p[++l]=u}),p}},61:(i,a,l)=>{var p=l(6560),u=l(1275)(p);i.exports=u},1275:i=>{var a=Date.now;i.exports=function(l){var p=0,u=0;return function(){var m=a(),E=16-(m-u);if(u=m,E>0){if(++p>=800)return arguments[0]}else p=0;return l.apply(void 0,arguments)}}},7465:(i,a,l)=>{var p=l(8407);i.exports=function(){this.__data__=new p,this.size=0}},3779:i=>{i.exports=function(a){var l=this.__data__,p=l.delete(a);return this.size=l.size,p}},7599:i=>{i.exports=function(a){return this.__data__.get(a)}},4758:i=>{i.exports=function(a){return this.__data__.has(a)}},4309:(i,a,l)=>{var p=l(8407),u=l(7071),m=l(3369);i.exports=function(E,w){var R=this.__data__;if(R instanceof p){var S=R.__data__;if(!u||S.length<199)return S.push([E,w]),this.size=++R.size,this;R=this.__data__=new m(S)}return R.set(E,w),this.size=R.size,this}},2351:i=>{i.exports=function(a,l,p){for(var u=p-1,m=a.length;++u<m;)if(a[u]===l)return u;return-1}},5514:(i,a,l)=>{var p=l(4523),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,E=p(function(w){var R=[];return w.charCodeAt(0)===46&&R.push(""),w.replace(u,function(S,P,x,k){R.push(x?k.replace(m,"$1"):P||S)}),R});i.exports=E},327:(i,a,l)=>{var p=l(3448);i.exports=function(u){if(typeof u=="string"||p(u))return u;var m=u+"";return m=="0"&&1/u==-1/0?"-0":m}},346:i=>{var a=Function.prototype.toString;i.exports=function(l){if(l!=null){try{return a.call(l)}catch{}try{return l+""}catch{}}return""}},7990:i=>{var a=/\s/;i.exports=function(l){for(var p=l.length;p--&&a.test(l.charAt(p)););return p}},5703:i=>{i.exports=function(a){return function(){return a}}},7813:i=>{i.exports=function(a,l){return a===l||a!=a&&l!=l}},5564:(i,a,l)=>{var p=l(1078);i.exports=function(u){return u!=null&&u.length?p(u,1):[]}},7361:(i,a,l)=>{var p=l(7786);i.exports=function(u,m,E){var w=u==null?void 0:p(u,m);return w===void 0?E:w}},9095:(i,a,l)=>{var p=l(13),u=l(222);i.exports=function(m,E){return m!=null&&u(m,E,p)}},6557:i=>{i.exports=function(a){return a}},4721:(i,a,l)=>{var p=l(2118),u=l(8612),m=l(7037),E=l(554),w=l(2628),R=Math.max;i.exports=function(S,P,x,k){S=u(S)?S:w(S),x=x&&!k?E(x):0;var B=S.length;return x<0&&(x=R(B+x,0)),m(S)?x<=B&&S.indexOf(P,x)>-1:!!B&&p(S,P,x)>-1}},5694:(i,a,l)=>{var p=l(9454),u=l(7005),m=Object.prototype,E=m.hasOwnProperty,w=m.propertyIsEnumerable,R=p(function(){return arguments}())?p:function(S){return u(S)&&E.call(S,"callee")&&!w.call(S,"callee")};i.exports=R},1469:i=>{var a=Array.isArray;i.exports=a},8612:(i,a,l)=>{var p=l(3560),u=l(1780);i.exports=function(m){return m!=null&&u(m.length)&&!p(m)}},9246:(i,a,l)=>{var p=l(8612),u=l(7005);i.exports=function(m){return u(m)&&p(m)}},4144:(i,a,l)=>{i=l.nmd(i);var p=l(5639),u=l(5062),m=a&&!a.nodeType&&a,E=m&&i&&!i.nodeType&&i,w=E&&E.exports===m?p.Buffer:void 0,R=(w?w.isBuffer:void 0)||u;i.exports=R},1609:(i,a,l)=>{var p=l(280),u=l(4160),m=l(5694),E=l(1469),w=l(8612),R=l(4144),S=l(5726),P=l(6719),x=Object.prototype.hasOwnProperty;i.exports=function(k){if(k==null)return!0;if(w(k)&&(E(k)||typeof k=="string"||typeof k.splice=="function"||R(k)||P(k)||m(k)))return!k.length;var B=u(k);if(B=="[object Map]"||B=="[object Set]")return!k.size;if(S(k))return!p(k).length;for(var G in k)if(x.call(k,G))return!1;return!0}},3560:(i,a,l)=>{var p=l(4239),u=l(3218);i.exports=function(m){if(!u(m))return!1;var E=p(m);return E=="[object Function]"||E=="[object GeneratorFunction]"||E=="[object AsyncFunction]"||E=="[object Proxy]"}},1780:i=>{i.exports=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991}},6688:(i,a,l)=>{var p=l(5588),u=l(7518),m=l(1167),E=m&&m.isMap,w=E?u(E):p;i.exports=w},3218:i=>{i.exports=function(a){var l=typeof a;return a!=null&&(l=="object"||l=="function")}},7005:i=>{i.exports=function(a){return a!=null&&typeof a=="object"}},8630:(i,a,l)=>{var p=l(4239),u=l(5924),m=l(7005),E=Function.prototype,w=Object.prototype,R=E.toString,S=w.hasOwnProperty,P=R.call(Object);i.exports=function(x){if(!m(x)||p(x)!="[object Object]")return!1;var k=u(x);if(k===null)return!0;var B=S.call(k,"constructor")&&k.constructor;return typeof B=="function"&&B instanceof B&&R.call(B)==P}},2928:(i,a,l)=>{var p=l(9221),u=l(7518),m=l(1167),E=m&&m.isSet,w=E?u(E):p;i.exports=w},7037:(i,a,l)=>{var p=l(4239),u=l(1469),m=l(7005);i.exports=function(E){return typeof E=="string"||!u(E)&&m(E)&&p(E)=="[object String]"}},3448:(i,a,l)=>{var p=l(4239),u=l(7005);i.exports=function(m){return typeof m=="symbol"||u(m)&&p(m)=="[object Symbol]"}},6719:(i,a,l)=>{var p=l(8749),u=l(7518),m=l(1167),E=m&&m.isTypedArray,w=E?u(E):p;i.exports=w},3674:(i,a,l)=>{var p=l(4636),u=l(280),m=l(8612);i.exports=function(E){return m(E)?p(E):u(E)}},1704:(i,a,l)=>{var p=l(4636),u=l(313),m=l(8612);i.exports=function(E){return m(E)?p(E,!0):u(E)}},928:i=>{i.exports=function(a){var l=a==null?0:a.length;return l?a[l-1]:void 0}},6486:function(i,a,l){var p;i=l.nmd(i),(function(){var u,m="Expected a function",E="__lodash_hash_undefined__",w="__lodash_placeholder__",R=32,S=128,P=1/0,x=9007199254740991,k=NaN,B=4294967295,G=[["ary",S],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",R],["partialRight",64],["rearg",256]],X="[object Arguments]",F="[object Array]",j="[object Boolean]",H="[object Date]",re="[object Error]",te="[object Function]",fe="[object GeneratorFunction]",Te="[object Map]",Ce="[object Number]",$="[object Object]",J="[object Promise]",ge="[object RegExp]",ee="[object Set]",Ie="[object String]",we="[object Symbol]",Be="[object WeakMap]",st="[object ArrayBuffer]",At="[object DataView]",Ar="[object Float32Array]",Ir="[object Float64Array]",sr="[object Int8Array]",Mt="[object Int16Array]",ur="[object Int32Array]",Or="[object Uint8Array]",Kr="[object Uint8ClampedArray]",pr="[object Uint16Array]",Wt="[object Uint32Array]",xr=/\b__p \+= '';/g,Er=/\b(__p \+=) '' \+/g,Yr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_t=/&(?:amp|lt|gt|quot|#39);/g,le=/[&<>"']/g,gn=RegExp(_t.source),Qr=RegExp(le.source),Xr=/<%-([\s\S]+?)%>/g,ti=/<%([\s\S]+?)%>/g,rr=/<%=([\s\S]+?)%>/g,Rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rn=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qe=/[\\^$.*+?()[\]{}|]/g,ye=RegExp(qe.source),zt=/^\s+/,It=/\s/,Gn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mt=/\{\n\/\* \[wrapped with (.+)\] \*/,kn=/,? & /,Lr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,K=/\\(\\)?/g,V=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Y=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,Pe=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,rt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ze=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,ie="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zt="a-z\\xdf-\\xf6\\xf8-\\xff",br="A-Z\\xc0-\\xd6\\xd8-\\xde",$r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ri="["+$r+"]",Qt="["+ie+"]",$n="\\d+",$i="["+Zt+"]",pi="[^\\ud800-\\udfff"+$r+$n+"\\u2700-\\u27bf"+Zt+br+"]",Zr="\\ud83c[\\udffb-\\udfff]",Jt="[^\\ud800-\\udfff]",cr="(?:\\ud83c[\\udde6-\\uddff]){2}",ni="[\\ud800-\\udbff][\\udc00-\\udfff]",de="["+br+"]",Dn="(?:"+$i+"|"+pi+")",Ii="(?:"+de+"|"+pi+")",Ur="(?:['’](?:d|ll|m|re|s|t|ve))?",Oi="(?:['’](?:D|LL|M|RE|S|T|VE))?",xa="(?:"+Qt+"|"+Zr+")?",Kt="[\\ufe0e\\ufe0f]?",nr=Kt+xa+"(?:\\u200d(?:"+[Jt,cr,ni].join("|")+")"+Kt+xa+")*",ll="(?:"+["[\\u2700-\\u27bf]",cr,ni].join("|")+")"+nr,$o="(?:"+[Jt+Qt+"?",Qt,cr,ni,"[\\ud800-\\udfff]"].join("|")+")",Ri=RegExp("['’]","g"),Ci=RegExp(Qt,"g"),qt=RegExp(Zr+"(?="+Zr+")|"+$o+nr,"g"),ii=RegExp([de+"?"+$i+"+"+Ur+"(?="+[ri,de,"$"].join("|")+")",Ii+"+"+Oi+"(?="+[ri,de+Dn,"$"].join("|")+")",de+"?"+Dn+"+"+Ur,de+"+"+Oi,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$n,ll].join("|"),"g"),Mn=RegExp("[\\u200d\\ud800-\\udfff"+ie+"\\ufe0e\\ufe0f]"),Cs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ln=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_d=-1,$e={};$e[Ar]=$e[Ir]=$e[sr]=$e[Mt]=$e[ur]=$e[Or]=$e[Kr]=$e[pr]=$e[Wt]=!0,$e[X]=$e[F]=$e[st]=$e[j]=$e[At]=$e[H]=$e[re]=$e[te]=$e[Te]=$e[Ce]=$e[$]=$e[ge]=$e[ee]=$e[Ie]=$e[Be]=!1;var Fe={};Fe[X]=Fe[F]=Fe[st]=Fe[At]=Fe[j]=Fe[H]=Fe[Ar]=Fe[Ir]=Fe[sr]=Fe[Mt]=Fe[ur]=Fe[Te]=Fe[Ce]=Fe[$]=Fe[ge]=Fe[ee]=Fe[Ie]=Fe[we]=Fe[Or]=Fe[Kr]=Fe[pr]=Fe[Wt]=!0,Fe[re]=Fe[te]=Fe[Be]=!1;var Ne={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Oe=parseFloat,De=parseInt,Ps=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g,Ru=typeof self=="object"&&self&&self.Object===Object&&self,Jr=Ps||Ru||Function("return this")(),Cu=a&&!a.nodeType&&a,xs=Cu&&i&&!i.nodeType&&i,fl=xs&&xs.exports===Cu,Pu=fl&&Ps.process,oi=function(){try{return xs&&xs.require&&xs.require("util").types||Pu&&Pu.binding&&Pu.binding("util")}catch{}}(),Ns=oi&&oi.isArrayBuffer,xu=oi&&oi.isDate,wv=oi&&oi.isMap,Vi=oi&&oi.isRegExp,Tv=oi&&oi.isSet,Ed=oi&&oi.isTypedArray;function ai(se,_e,Se){switch(Se.length){case 0:return se.call(_e);case 1:return se.call(_e,Se[0]);case 2:return se.call(_e,Se[0],Se[1]);case 3:return se.call(_e,Se[0],Se[1],Se[2])}return se.apply(_e,Se)}function Av(se,_e,Se,je){for(var gt=-1,Ct=se==null?0:se.length;++gt<Ct;){var Vr=se[gt];_e(je,Vr,Se(Vr),se)}return je}function Fr(se,_e){for(var Se=-1,je=se==null?0:se.length;++Se<je&&_e(se[Se],Se,se)!==!1;);return se}function M_(se,_e){for(var Se=se==null?0:se.length;Se--&&_e(se[Se],Se,se)!==!1;);return se}function Nu(se,_e){for(var Se=-1,je=se==null?0:se.length;++Se<je;)if(!_e(se[Se],Se,se))return!1;return!0}function qi(se,_e){for(var Se=-1,je=se==null?0:se.length,gt=0,Ct=[];++Se<je;){var Vr=se[Se];_e(Vr,Se,se)&&(Ct[gt++]=Vr)}return Ct}function ku(se,_e){return!(se==null||!se.length)&&ir(se,_e,0)>-1}function dl(se,_e,Se){for(var je=-1,gt=se==null?0:se.length;++je<gt;)if(Se(_e,se[je]))return!0;return!1}function vr(se,_e){for(var Se=-1,je=se==null?0:se.length,gt=Array(je);++Se<je;)gt[Se]=_e(se[Se],Se,se);return gt}function so(se,_e){for(var Se=-1,je=_e.length,gt=se.length;++Se<je;)se[gt+Se]=_e[Se];return se}function bd(se,_e,Se,je){var gt=-1,Ct=se==null?0:se.length;for(je&&Ct&&(Se=se[++gt]);++gt<Ct;)Se=_e(Se,se[gt],gt,se);return Se}function L_(se,_e,Se,je){var gt=se==null?0:se.length;for(je&&gt&&(Se=se[--gt]);gt--;)Se=_e(Se,se[gt],gt,se);return Se}function Sd(se,_e){for(var Se=-1,je=se==null?0:se.length;++Se<je;)if(_e(se[Se],Se,se))return!0;return!1}var Pi=pl("length");function Ye(se,_e,Se){var je;return Se(se,function(gt,Ct,Vr){if(_e(gt,Ct,Vr))return je=Ct,!1}),je}function Vn(se,_e,Se,je){for(var gt=se.length,Ct=Se+(je?1:-1);je?Ct--:++Ct<gt;)if(_e(se[Ct],Ct,se))return Ct;return-1}function ir(se,_e,Se){return _e==_e?function(je,gt,Ct){for(var Vr=Ct-1,vi=je.length;++Vr<vi;)if(je[Vr]===gt)return Vr;return-1}(se,_e,Se):Vn(se,Iv,Se)}function hl(se,_e,Se,je){for(var gt=Se-1,Ct=se.length;++gt<Ct;)if(je(se[gt],_e))return gt;return-1}function Iv(se){return se!=se}function wd(se,_e){var Se=se==null?0:se.length;return Se?ml(se,_e)/Se:k}function pl(se){return function(_e){return _e==null?u:_e[se]}}function vl(se){return function(_e){return se==null?u:se[_e]}}function Ov(se,_e,Se,je,gt){return gt(se,function(Ct,Vr,vi){Se=je?(je=!1,Ct):_e(Se,Ct,Vr,vi)}),Se}function ml(se,_e){for(var Se,je=-1,gt=se.length;++je<gt;){var Ct=_e(se[je]);Ct!==u&&(Se=Se===u?Ct:Se+Ct)}return Se}function ks(se,_e){for(var Se=-1,je=Array(se);++Se<se;)je[Se]=_e(Se);return je}function Td(se){return se&&se.slice(0,Cd(se)+1).replace(zt,"")}function qn(se){return function(_e){return se(_e)}}function Du(se,_e){return vr(_e,function(Se){return se[Se]})}function uo(se,_e){return se.has(_e)}function Ad(se,_e){for(var Se=-1,je=se.length;++Se<je&&ir(_e,se[Se],0)>-1;);return Se}function Id(se,_e){for(var Se=se.length;Se--&&ir(_e,se[Se],0)>-1;);return Se}function U_(se,_e){for(var Se=se.length,je=0;Se--;)se[Se]===_e&&++je;return je}var Rv=vl({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Od=vl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ln(se){return"\\"+Ne[se]}function Vo(se){return Mn.test(se)}function gl(se){var _e=-1,Se=Array(se.size);return se.forEach(function(je,gt){Se[++_e]=[gt,je]}),Se}function Cv(se,_e){return function(Se){return se(_e(Se))}}function qo(se,_e){for(var Se=-1,je=se.length,gt=0,Ct=[];++Se<je;){var Vr=se[Se];Vr!==_e&&Vr!==w||(se[Se]=w,Ct[gt++]=Se)}return Ct}function Mu(se){var _e=-1,Se=Array(se.size);return se.forEach(function(je){Se[++_e]=je}),Se}function Rd(se){var _e=-1,Se=Array(se.size);return se.forEach(function(je){Se[++_e]=[je,je]}),Se}function Ho(se){return Vo(se)?function(_e){for(var Se=qt.lastIndex=0;qt.test(_e);)++Se;return Se}(se):Pi(se)}function xi(se){return Vo(se)?function(_e){return _e.match(qt)||[]}(se):function(_e){return _e.split("")}(se)}function Cd(se){for(var _e=se.length;_e--&&It.test(se.charAt(_e)););return _e}var F_=vl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),yl=function se(_e){var Se,je=(_e=_e==null?Jr:yl.defaults(Jr.Object(),_e,yl.pick(Jr,Ln))).Array,gt=_e.Date,Ct=_e.Error,Vr=_e.Function,vi=_e.Math,or=_e.Object,_l=_e.RegExp,Pv=_e.String,si=_e.TypeError,Ds=je.prototype,xv=Vr.prototype,Na=or.prototype,Ms=_e["__core-js_shared__"],El=xv.toString,er=Na.hasOwnProperty,B_=0,Lu=(Se=/[^.]+$/.exec(Ms&&Ms.keys&&Ms.keys.IE_PROTO||""))?"Symbol(src)_1."+Se:"",Ls=Na.toString,j_=El.call(or),Nv=Jr._,Pd=_l("^"+El.call(er).replace(qe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wo=fl?_e.Buffer:u,co=_e.Symbol,Uu=_e.Uint8Array,lr=Wo?Wo.allocUnsafe:u,zo=Cv(or.getPrototypeOf,or),Us=or.create,kv=Na.propertyIsEnumerable,Fu=Ds.splice,bl=co?co.isConcatSpreadable:u,Bu=co?co.iterator:u,ka=co?co.toStringTag:u,ju=function(){try{var f=sa(or,"defineProperty");return f({},"",{}),f}catch{}}(),xd=_e.clearTimeout!==Jr.clearTimeout&&_e.clearTimeout,G_=gt&&gt.now!==Jr.Date.now&&gt.now,Dv=_e.setTimeout!==Jr.setTimeout&&_e.setTimeout,Sl=vi.ceil,Gu=vi.floor,$u=or.getOwnPropertySymbols,$_=Wo?Wo.isBuffer:u,wl=_e.isFinite,yn=Ds.join,Mv=Cv(or.keys,or),en=vi.max,fn=vi.min,Nd=gt.now,Tl=_e.parseInt,Lv=vi.random,Uv=Ds.reverse,kd=sa(_e,"DataView"),Ko=sa(_e,"Map"),Dd=sa(_e,"Promise"),Yo=sa(_e,"Set"),Da=sa(_e,"WeakMap"),lo=sa(or,"create"),fo=Da&&new Da,Ma={},V_=ca(kd),Fv=ca(Ko),q_=ca(Dd),Qo=ca(Yo),Bv=ca(Da),Vu=co?co.prototype:u,La=Vu?Vu.valueOf:u,Md=Vu?Vu.toString:u;function M(f){if(wr(f)&&!lt(f)&&!(f instanceof Lt)){if(f instanceof ui)return f;if(er.call(f,"__wrapped__"))return Un(f)}return new ui(f)}var Ua=function(){function f(){}return function(g){if(!fr(g))return{};if(Us)return Us(g);f.prototype=g;var b=new f;return f.prototype=u,b}}();function qu(){}function ui(f,g){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=u}function Lt(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Xo(f){var g=-1,b=f==null?0:f.length;for(this.clear();++g<b;){var O=f[g];this.set(O[0],O[1])}}function Hi(f){var g=-1,b=f==null?0:f.length;for(this.clear();++g<b;){var O=f[g];this.set(O[0],O[1])}}function Ni(f){var g=-1,b=f==null?0:f.length;for(this.clear();++g<b;){var O=f[g];this.set(O[0],O[1])}}function Wi(f){var g=-1,b=f==null?0:f.length;for(this.__data__=new Ni;++g<b;)this.add(f[g])}function ci(f){var g=this.__data__=new Hi(f);this.size=g.size}function Ld(f,g){var b=lt(f),O=!b&&da(f),N=!b&&!O&&bo(f),L=!b&&!O&&!N&&Gr(f),W=b||O||N||L,Q=W?ks(f.length,Pv):[],ae=Q.length;for(var be in f)!g&&!er.call(f,be)||W&&(be=="length"||N&&(be=="offset"||be=="parent")||L&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||zn(be,ae))||Q.push(be);return Q}function Fs(f){var g=f.length;return g?f[Pl(0,g-1)]:u}function jv(f,g){return sc(Br(f),Fa(g,0,f.length))}function H_(f){return sc(Br(f))}function Ud(f,g,b){(b!==u&&!Li(f[g],b)||b===u&&!(g in f))&&ki(f,g,b)}function Bs(f,g,b){var O=f[g];er.call(f,g)&&Li(O,b)&&(b!==u||g in f)||ki(f,g,b)}function ho(f,g){for(var b=f.length;b--;)if(Li(f[b][0],g))return b;return-1}function Fd(f,g,b,O){return Zo(f,function(N,L,W){g(O,N,b(N),W)}),O}function Bd(f,g){return f&&Wn(g,Cr(g),f)}function ki(f,g,b){g=="__proto__"&&ju?ju(f,g,{configurable:!0,enumerable:!0,value:b,writable:!0}):f[g]=b}function Hu(f,g){for(var b=-1,O=g.length,N=je(O),L=f==null;++b<O;)N[b]=L?u:Jl(f,g[b]);return N}function Fa(f,g,b){return f==f&&(b!==u&&(f=f<=b?f:b),g!==u&&(f=f>=g?f:g)),f}function mi(f,g,b,O,N,L){var W,Q=1&g,ae=2&g,be=4&g;if(b&&(W=N?b(f,O,N,L):b(f)),W!==u)return W;if(!fr(f))return f;var Ee=lt(f);if(Ee){if(W=function(Ae){var Me=Ae.length,ft=new Ae.constructor(Me);return Me&&typeof Ae[0]=="string"&&er.call(Ae,"index")&&(ft.index=Ae.index,ft.input=Ae.input),ft}(f),!Q)return Br(f,W)}else{var xe=tn(f),He=xe==te||xe==fe;if(bo(f))return Xv(f,Q);if(xe==$||xe==X||He&&!N){if(W=ae||He?{}:hh(f),!Q)return ae?function(Ae,Me){return Wn(Ae,rm(Ae),Me)}(f,function(Ae,Me){return Ae&&Wn(Me,Fn(Me),Ae)}(W,f)):function(Ae,Me){return Wn(Ae,Ha(Ae),Me)}(f,Bd(W,f))}else{if(!Fe[xe])return N?f:{};W=function(Ae,Me,ft){var Ke,dt=Ae.constructor;switch(Me){case st:return ah(Ae);case j:case H:return new dt(+Ae);case At:return function(Et,jt){var ot=jt?ah(Et.buffer):Et.buffer;return new Et.constructor(ot,Et.byteOffset,Et.byteLength)}(Ae,ft);case Ar:case Ir:case sr:case Mt:case ur:case Or:case Kr:case pr:case Wt:return mr(Ae,ft);case Te:return new dt;case Ce:case Ie:return new dt(Ae);case ge:return function(Et){var jt=new Et.constructor(Et.source,Y.exec(Et));return jt.lastIndex=Et.lastIndex,jt}(Ae);case ee:return new dt;case we:return Ke=Ae,La?or(La.call(Ke)):{}}}(f,xe,Q)}}L||(L=new ci);var Qe=L.get(f);if(Qe)return Qe;L.set(f,W),_m(f)?f.forEach(function(Ae){W.add(mi(Ae,g,b,Ae,f,L))}):gm(f)&&f.forEach(function(Ae,Me){W.set(Me,mi(Ae,g,b,Me,f,L))});var ct=Ee?u:(be?ae?tc:Bl:ae?Fn:Cr)(f);return Fr(ct||f,function(Ae,Me){ct&&(Ae=f[Me=Ae]),Bs(W,Me,mi(Ae,g,b,Me,f,L))}),W}function jd(f,g,b){var O=b.length;if(f==null)return!O;for(f=or(f);O--;){var N=b[O],L=g[N],W=f[N];if(W===u&&!(N in f)||!L(W))return!1}return!0}function Al(f,g,b){if(typeof f!="function")throw new si(m);return za(function(){f.apply(u,b)},g)}function js(f,g,b,O){var N=-1,L=ku,W=!0,Q=f.length,ae=[],be=g.length;if(!Q)return ae;b&&(g=vr(g,qn(b))),O?(L=dl,W=!1):g.length>=200&&(L=uo,W=!1,g=new Wi(g));e:for(;++N<Q;){var Ee=f[N],xe=b==null?Ee:b(Ee);if(Ee=O||Ee!==0?Ee:0,W&&xe==xe){for(var He=be;He--;)if(g[He]===xe)continue e;ae.push(Ee)}else L(g,xe,O)||ae.push(Ee)}return ae}M.templateSettings={escape:Xr,evaluate:ti,interpolate:rr,variable:"",imports:{_:M}},M.prototype=qu.prototype,M.prototype.constructor=M,ui.prototype=Ua(qu.prototype),ui.prototype.constructor=ui,Lt.prototype=Ua(qu.prototype),Lt.prototype.constructor=Lt,Xo.prototype.clear=function(){this.__data__=lo?lo(null):{},this.size=0},Xo.prototype.delete=function(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g},Xo.prototype.get=function(f){var g=this.__data__;if(lo){var b=g[f];return b===E?u:b}return er.call(g,f)?g[f]:u},Xo.prototype.has=function(f){var g=this.__data__;return lo?g[f]!==u:er.call(g,f)},Xo.prototype.set=function(f,g){var b=this.__data__;return this.size+=this.has(f)?0:1,b[f]=lo&&g===u?E:g,this},Hi.prototype.clear=function(){this.__data__=[],this.size=0},Hi.prototype.delete=function(f){var g=this.__data__,b=ho(g,f);return!(b<0||(b==g.length-1?g.pop():Fu.call(g,b,1),--this.size,0))},Hi.prototype.get=function(f){var g=this.__data__,b=ho(g,f);return b<0?u:g[b][1]},Hi.prototype.has=function(f){return ho(this.__data__,f)>-1},Hi.prototype.set=function(f,g){var b=this.__data__,O=ho(b,f);return O<0?(++this.size,b.push([f,g])):b[O][1]=g,this},Ni.prototype.clear=function(){this.size=0,this.__data__={hash:new Xo,map:new(Ko||Hi),string:new Xo}},Ni.prototype.delete=function(f){var g=Vs(this,f).delete(f);return this.size-=g?1:0,g},Ni.prototype.get=function(f){return Vs(this,f).get(f)},Ni.prototype.has=function(f){return Vs(this,f).has(f)},Ni.prototype.set=function(f,g){var b=Vs(this,f),O=b.size;return b.set(f,g),this.size+=b.size==O?0:1,this},Wi.prototype.add=Wi.prototype.push=function(f){return this.__data__.set(f,E),this},Wi.prototype.has=function(f){return this.__data__.has(f)},ci.prototype.clear=function(){this.__data__=new Hi,this.size=0},ci.prototype.delete=function(f){var g=this.__data__,b=g.delete(f);return this.size=g.size,b},ci.prototype.get=function(f){return this.__data__.get(f)},ci.prototype.has=function(f){return this.__data__.has(f)},ci.prototype.set=function(f,g){var b=this.__data__;if(b instanceof Hi){var O=b.__data__;if(!Ko||O.length<199)return O.push([f,g]),this.size=++b.size,this;b=this.__data__=new Ni(O)}return b.set(f,g),this.size=b.size,this};var Zo=Jv(_n),Gd=Jv(Wu,!0);function $d(f,g){var b=!0;return Zo(f,function(O,N,L){return b=!!g(O,N,L)}),b}function qr(f,g,b){for(var O=-1,N=f.length;++O<N;){var L=f[O],W=g(L);if(W!=null&&(Q===u?W==W&&!Kn(W):b(W,Q)))var Q=W,ae=L}return ae}function Vd(f,g){var b=[];return Zo(f,function(O,N,L){g(O,N,L)&&b.push(O)}),b}function dn(f,g,b,O,N){var L=-1,W=f.length;for(b||(b=Ut),N||(N=[]);++L<W;){var Q=f[L];g>0&&b(Q)?g>1?dn(Q,g-1,b,O,N):so(N,Q):O||(N[N.length]=Q)}return N}var Il=em(),qd=em(!0);function _n(f,g){return f&&Il(f,g,Cr)}function Wu(f,g){return f&&qd(f,g,Cr)}function Jo(f,g){return qi(g,function(b){return Yi(f[b])})}function zi(f,g){for(var b=0,O=(g=ta(g,f)).length;f!=null&&b<O;)f=f[fi(g[b++])];return b&&b==O?f:u}function Ol(f,g,b){var O=g(f);return lt(f)?O:so(O,b(f))}function Cn(f){return f==null?f===u?"[object Undefined]":"[object Null]":ka&&ka in or(f)?function(g){var b=er.call(g,ka),O=g[ka];try{g[ka]=u;var N=!0}catch{}var L=Ls.call(g);return N&&(b?g[ka]=O:delete g[ka]),L}(f):function(g){return Ls.call(g)}(f)}function Ba(f,g){return f>g}function Gv(f,g){return f!=null&&er.call(f,g)}function Hd(f,g){return f!=null&&g in or(f)}function Rl(f,g,b){for(var O=b?dl:ku,N=f[0].length,L=f.length,W=L,Q=je(L),ae=1/0,be=[];W--;){var Ee=f[W];W&&g&&(Ee=vr(Ee,qn(g))),ae=fn(Ee.length,ae),Q[W]=!b&&(g||N>=120&&Ee.length>=120)?new Wi(W&&Ee):u}Ee=f[0];var xe=-1,He=Q[0];e:for(;++xe<N&&be.length<ae;){var Qe=Ee[xe],ct=g?g(Qe):Qe;if(Qe=b||Qe!==0?Qe:0,!(He?uo(He,ct):O(be,ct,b))){for(W=L;--W;){var Ae=Q[W];if(!(Ae?uo(Ae,ct):O(f[W],ct,b)))continue e}He&&He.push(ct),be.push(Qe)}}return be}function gi(f,g,b){var O=(f=Ki(f,g=ta(g,f)))==null?f:f[fi(hn(g))];return O==null?u:ai(O,f,b)}function $v(f){return wr(f)&&Cn(f)==X}function zu(f,g,b,O,N){return f===g||(f==null||g==null||!wr(f)&&!wr(g)?f!=f&&g!=g:function(L,W,Q,ae,be,Ee){var xe=lt(L),He=lt(W),Qe=xe?F:tn(L),ct=He?F:tn(W),Ae=(Qe=Qe==X?$:Qe)==$,Me=(ct=ct==X?$:ct)==$,ft=Qe==ct;if(ft&&bo(L)){if(!bo(W))return!1;xe=!0,Ae=!1}if(ft&&!Ae)return Ee||(Ee=new ci),xe||Gr(L)?En(L,W,Q,ae,be,Ee):function(ot,ht,wn,Bi,ha,Tn,es){switch(wn){case At:if(ot.byteLength!=ht.byteLength||ot.byteOffset!=ht.byteOffset)return!1;ot=ot.buffer,ht=ht.buffer;case st:return!(ot.byteLength!=ht.byteLength||!Tn(new Uu(ot),new Uu(ht)));case j:case H:case Ce:return Li(+ot,+ht);case re:return ot.name==ht.name&&ot.message==ht.message;case ge:case Ie:return ot==ht+"";case Te:var Xs=gl;case ee:var Dh=1&Bi;if(Xs||(Xs=Mu),ot.size!=ht.size&&!Dh)return!1;var mc=es.get(ot);if(mc)return mc==ht;Bi|=2,es.set(ot,ht);var ts=En(Xs(ot),Xs(ht),Bi,ha,Tn,es);return es.delete(ot),ts;case we:if(La)return La.call(ot)==La.call(ht)}return!1}(L,W,Qe,Q,ae,be,Ee);if(!(1&Q)){var Ke=Ae&&er.call(L,"__wrapped__"),dt=Me&&er.call(W,"__wrapped__");if(Ke||dt){var Et=Ke?L.value():L,jt=dt?W.value():W;return Ee||(Ee=new ci),be(Et,jt,Q,ae,Ee)}}return!!ft&&(Ee||(Ee=new ci),function(ot,ht,wn,Bi,ha,Tn){var es=1&wn,Xs=Bl(ot),Dh=Xs.length;if(Dh!=Bl(ht).length&&!es)return!1;for(var mc=Dh;mc--;){var ts=Xs[mc];if(!(es?ts in ht:er.call(ht,ts)))return!1}var UA=Tn.get(ot),FA=Tn.get(ht);if(UA&&FA)return UA==ht&&FA==ot;var Am=!0;Tn.set(ot,ht),Tn.set(ht,ot);for(var cE=es;++mc<Dh;){var Im=ot[ts=Xs[mc]],Om=ht[ts];if(Bi)var BA=es?Bi(Om,Im,ts,ht,ot,Tn):Bi(Im,Om,ts,ot,ht,Tn);if(!(BA===u?Im===Om||ha(Im,Om,wn,Bi,Tn):BA)){Am=!1;break}cE||(cE=ts=="constructor")}if(Am&&!cE){var Rm=ot.constructor,Cm=ht.constructor;Rm==Cm||!("constructor"in ot)||!("constructor"in ht)||typeof Rm=="function"&&Rm instanceof Rm&&typeof Cm=="function"&&Cm instanceof Cm||(Am=!1)}return Tn.delete(ot),Tn.delete(ht),Am}(L,W,Q,ae,be,Ee))}(f,g,b,O,zu,N))}function ja(f,g,b,O){var N=b.length,L=N,W=!O;if(f==null)return!L;for(f=or(f);N--;){var Q=b[N];if(W&&Q[2]?Q[1]!==f[Q[0]]:!(Q[0]in f))return!1}for(;++N<L;){var ae=(Q=b[N])[0],be=f[ae],Ee=Q[1];if(W&&Q[2]){if(be===u&&!(ae in f))return!1}else{var xe=new ci;if(O)var He=O(be,Ee,ae,f,g,xe);if(!(He===u?zu(Ee,be,3,O,xe):He))return!1}}return!0}function Wd(f){return!(!fr(f)||(g=f,Lu&&Lu in g))&&(Yi(f)?Pd:Pe).test(ca(f));var g}function zd(f){return typeof f=="function"?f:f==null?A:typeof f=="object"?lt(f)?Cl(f[0],f[1]):Xd(f):Xe(f)}function Kd(f){if(!qs(f))return Mv(f);var g=[];for(var b in or(f))er.call(f,b)&&b!="constructor"&&g.push(b);return g}function Yd(f,g){return f<g}function Qd(f,g){var b=-1,O=rn(f)?je(f.length):[];return Zo(f,function(N,L,W){O[++b]=g(N,L,W)}),O}function Xd(f){var g=nc(f);return g.length==1&&g[0][2]?Wa(g[0][0],g[0][1]):function(b){return b===f||ja(b,f,g)}}function Cl(f,g){return yo(f)&&nm(g)?Wa(fi(f),g):function(b){var O=Jl(b,f);return O===u&&O===g?ef(b,f):zu(g,O,3)}}function Ga(f,g,b,O,N){f!==g&&Il(g,function(L,W){if(N||(N=new ci),fr(L))(function(ae,be,Ee,xe,He,Qe,ct){var Ae=ph(ae,Ee),Me=ph(be,Ee),ft=ct.get(Me);if(ft)Ud(ae,Ee,ft);else{var Ke=Qe?Qe(Ae,Me,Ee+"",ae,be,ct):u,dt=Ke===u;if(dt){var Et=lt(Me),jt=!Et&&bo(Me),ot=!Et&&!jt&&Gr(Me);Ke=Me,Et||jt||ot?lt(Ae)?Ke=Ae:Nr(Ae)?Ke=Br(Ae):jt?(dt=!1,Ke=Xv(Me,!0)):ot?(dt=!1,Ke=mr(Me,!0)):Ke=[]:dc(Me)||da(Me)?(Ke=Ae,da(Ae)?Ke=Ch(Ae):fr(Ae)&&!Yi(Ae)||(Ke=hh(Me))):dt=!1}dt&&(ct.set(Me,Ke),He(Ke,Me,xe,Qe,ct),ct.delete(Me)),Ud(ae,Ee,Ke)}})(f,g,W,b,Ga,O,N);else{var Q=O?O(ph(f,W),L,W+"",f,g,N):u;Q===u&&(Q=L),Ud(f,W,Q)}},Fn)}function Zd(f,g){var b=f.length;if(b)return zn(g+=g<0?b:0,b)?f[g]:u}function Jd(f,g,b){g=g.length?vr(g,function(L){return lt(L)?function(W){return zi(W,L.length===1?L[0]:L)}:L}):[A];var O=-1;g=vr(g,qn(ut()));var N=Qd(f,function(L,W,Q){var ae=vr(g,function(be){return be(L)});return{criteria:ae,index:++O,value:L}});return function(L,W){var Q=L.length;for(L.sort(function(ae,be){return function(Ee,xe,He){for(var Qe=-1,ct=Ee.criteria,Ae=xe.criteria,Me=ct.length,ft=He.length;++Qe<Me;){var Ke=sh(ct[Qe],Ae[Qe]);if(Ke)return Qe>=ft?Ke:Ke*(He[Qe]=="desc"?-1:1)}return Ee.index-xe.index}(ae,be,b)});Q--;)L[Q]=L[Q].value;return L}(N)}function eh(f,g,b){for(var O=-1,N=g.length,L={};++O<N;){var W=g[O],Q=zi(f,W);b(Q,W)&&Gs(L,ta(W,f),Q)}return L}function Ku(f,g,b,O){var N=O?hl:ir,L=-1,W=g.length,Q=f;for(f===g&&(g=Br(g)),b&&(Q=vr(f,qn(b)));++L<W;)for(var ae=0,be=g[L],Ee=b?b(be):be;(ae=N(Q,Ee,ae,O))>-1;)Q!==f&&Fu.call(Q,ae,1),Fu.call(f,ae,1);return f}function Vv(f,g){for(var b=f?g.length:0,O=b-1;b--;){var N=g[b];if(b==O||N!==L){var L=N;zn(N)?Fu.call(f,N,1):Nl(f,N)}}return f}function Pl(f,g){return f+Gu(Lv()*(g-f+1))}function xl(f,g){var b="";if(!f||g<1||g>x)return b;do g%2&&(b+=f),(g=Gu(g/2))&&(f+=f);while(g);return b}function Pt(f,g){return bn(ac(f,g,A),f+"")}function W_(f){return Fs(kr(f))}function qv(f,g){var b=kr(f);return sc(b,Fa(g,0,b.length))}function Gs(f,g,b,O){if(!fr(f))return f;for(var N=-1,L=(g=ta(g,f)).length,W=L-1,Q=f;Q!=null&&++N<L;){var ae=fi(g[N]),be=b;if(ae==="__proto__"||ae==="constructor"||ae==="prototype")return f;if(N!=W){var Ee=Q[ae];(be=O?O(Ee,ae,Q):u)===u&&(be=fr(Ee)?Ee:zn(g[N+1])?[]:{})}Bs(Q,ae,be),Q=Q[ae]}return f}var th=fo?function(f,g){return fo.set(f,g),f}:A,Hv=ju?function(f,g){return ju(f,"toString",{configurable:!0,enumerable:!1,value:T(g),writable:!0})}:A;function Wv(f){return sc(kr(f))}function Hn(f,g,b){var O=-1,N=f.length;g<0&&(g=-g>N?0:N+g),(b=b>N?N:b)<0&&(b+=N),N=g>b?0:b-g>>>0,g>>>=0;for(var L=je(N);++O<N;)L[O]=f[O+g];return L}function zv(f,g){var b;return Zo(f,function(O,N,L){return!(b=g(O,N,L))}),!!b}function Yu(f,g,b){var O=0,N=f==null?O:f.length;if(typeof g=="number"&&g==g&&N<=2147483647){for(;O<N;){var L=O+N>>>1,W=f[L];W!==null&&!Kn(W)&&(b?W<=g:W<g)?O=L+1:N=L}return N}return rh(f,g,A,b)}function rh(f,g,b,O){var N=0,L=f==null?0:f.length;if(L===0)return 0;for(var W=(g=b(g))!=g,Q=g===null,ae=Kn(g),be=g===u;N<L;){var Ee=Gu((N+L)/2),xe=b(f[Ee]),He=xe!==u,Qe=xe===null,ct=xe==xe,Ae=Kn(xe);if(W)var Me=O||ct;else Me=be?ct&&(O||He):Q?ct&&He&&(O||!Qe):ae?ct&&He&&!Qe&&(O||!Ae):!Qe&&!Ae&&(O?xe<=g:xe<g);Me?N=Ee+1:L=Ee}return fn(L,4294967294)}function Kv(f,g){for(var b=-1,O=f.length,N=0,L=[];++b<O;){var W=f[b],Q=g?g(W):W;if(!b||!Li(Q,ae)){var ae=Q;L[N++]=W===0?0:W}}return L}function Yv(f){return typeof f=="number"?f:Kn(f)?k:+f}function li(f){if(typeof f=="string")return f;if(lt(f))return vr(f,li)+"";if(Kn(f))return Md?Md.call(f):"";var g=f+"";return g=="0"&&1/f==-1/0?"-0":g}function ea(f,g,b){var O=-1,N=ku,L=f.length,W=!0,Q=[],ae=Q;if(b)W=!1,N=dl;else if(L>=200){var be=g?null:aa(f);if(be)return Mu(be);W=!1,N=uo,ae=new Wi}else ae=g?[]:Q;e:for(;++O<L;){var Ee=f[O],xe=g?g(Ee):Ee;if(Ee=b||Ee!==0?Ee:0,W&&xe==xe){for(var He=ae.length;He--;)if(ae[He]===xe)continue e;g&&ae.push(xe),Q.push(Ee)}else N(ae,xe,b)||(ae!==Q&&ae.push(xe),Q.push(Ee))}return Q}function Nl(f,g){return(f=Ki(f,g=ta(g,f)))==null||delete f[fi(hn(g))]}function nh(f,g,b,O){return Gs(f,g,b(zi(f,g)),O)}function kl(f,g,b,O){for(var N=f.length,L=O?N:-1;(O?L--:++L<N)&&g(f[L],L,f););return b?Hn(f,O?0:L,O?L+1:N):Hn(f,O?L+1:0,O?N:L)}function ih(f,g){var b=f;return b instanceof Lt&&(b=b.value()),bd(g,function(O,N){return N.func.apply(N.thisArg,so([O],N.args))},b)}function Dl(f,g,b){var O=f.length;if(O<2)return O?ea(f[0]):[];for(var N=-1,L=je(O);++N<O;)for(var W=f[N],Q=-1;++Q<O;)Q!=N&&(L[N]=js(L[N]||W,f[Q],g,b));return ea(dn(L,1),g,b)}function Qv(f,g,b){for(var O=-1,N=f.length,L=g.length,W={};++O<N;){var Q=O<L?g[O]:u;b(W,f[O],Q)}return W}function Ml(f){return Nr(f)?f:[]}function po(f){return typeof f=="function"?f:A}function ta(f,g){return lt(f)?f:yo(f,g)?[f]:Ya(Xt(f))}var $a=Pt;function ra(f,g,b){var O=f.length;return b=b===u?O:b,!g&&b>=O?f:Hn(f,g,b)}var oh=xd||function(f){return Jr.clearTimeout(f)};function Xv(f,g){if(g)return f.slice();var b=f.length,O=lr?lr(b):new f.constructor(b);return f.copy(O),O}function ah(f){var g=new f.constructor(f.byteLength);return new Uu(g).set(new Uu(f)),g}function mr(f,g){var b=g?ah(f.buffer):f.buffer;return new f.constructor(b,f.byteOffset,f.length)}function sh(f,g){if(f!==g){var b=f!==u,O=f===null,N=f==f,L=Kn(f),W=g!==u,Q=g===null,ae=g==g,be=Kn(g);if(!Q&&!be&&!L&&f>g||L&&W&&ae&&!Q&&!be||O&&W&&ae||!b&&ae||!N)return 1;if(!O&&!L&&!be&&f<g||be&&b&&N&&!O&&!L||Q&&b&&N||!W&&N||!ae)return-1}return 0}function Qu(f,g,b,O){for(var N=-1,L=f.length,W=b.length,Q=-1,ae=g.length,be=en(L-W,0),Ee=je(ae+be),xe=!O;++Q<ae;)Ee[Q]=g[Q];for(;++N<W;)(xe||N<L)&&(Ee[b[N]]=f[N]);for(;be--;)Ee[Q++]=f[N++];return Ee}function Zv(f,g,b,O){for(var N=-1,L=f.length,W=-1,Q=b.length,ae=-1,be=g.length,Ee=en(L-Q,0),xe=je(Ee+be),He=!O;++N<Ee;)xe[N]=f[N];for(var Qe=N;++ae<be;)xe[Qe+ae]=g[ae];for(;++W<Q;)(He||N<L)&&(xe[Qe+b[W]]=f[N++]);return xe}function Br(f,g){var b=-1,O=f.length;for(g||(g=je(O));++b<O;)g[b]=f[b];return g}function Wn(f,g,b,O){var N=!b;b||(b={});for(var L=-1,W=g.length;++L<W;){var Q=g[L],ae=O?O(b[Q],f[Q],Q,b,f):u;ae===u&&(ae=f[Q]),N?ki(b,Q,ae):Bs(b,Q,ae)}return b}function na(f,g){return function(b,O){var N=lt(b)?Av:Fd,L=g?g():{};return N(b,f,ut(O,2),L)}}function ia(f){return Pt(function(g,b){var O=-1,N=b.length,L=N>1?b[N-1]:u,W=N>2?b[2]:u;for(L=f.length>3&&typeof L=="function"?(N--,L):u,W&&Pn(b[0],b[1],W)&&(L=N<3?u:L,N=1),g=or(g);++O<N;){var Q=b[O];Q&&f(g,Q,O,L)}return g})}function Jv(f,g){return function(b,O){if(b==null)return b;if(!rn(b))return f(b,O);for(var N=b.length,L=g?N:-1,W=or(b);(g?L--:++L<N)&&O(W[L],L,W)!==!1;);return b}}function em(f){return function(g,b,O){for(var N=-1,L=or(g),W=O(g),Q=W.length;Q--;){var ae=W[f?Q:++N];if(b(L[ae],ae,L)===!1)break}return g}}function tm(f){return function(g){var b=Vo(g=Xt(g))?xi(g):u,O=b?b[0]:g.charAt(0),N=b?ra(b,1).join(""):g.slice(1);return O[f]()+N}}function oa(f){return function(g){return bd(v(Xi(g).replace(Ri,"")),f,"")}}function Xu(f){return function(){var g=arguments;switch(g.length){case 0:return new f;case 1:return new f(g[0]);case 2:return new f(g[0],g[1]);case 3:return new f(g[0],g[1],g[2]);case 4:return new f(g[0],g[1],g[2],g[3]);case 5:return new f(g[0],g[1],g[2],g[3],g[4]);case 6:return new f(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new f(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var b=Ua(f.prototype),O=f.apply(b,g);return fr(O)?O:b}}function jr(f){return function(g,b,O){var N=or(g);if(!rn(g)){var L=ut(b,3);g=Cr(g),b=function(Q){return L(N[Q],Q,N)}}var W=f(g,b,O);return W>-1?N[L?g[W]:W]:u}}function uh(f){return Di(function(g){var b=g.length,O=b,N=ui.prototype.thru;for(f&&g.reverse();O--;){var L=g[O];if(typeof L!="function")throw new si(m);if(N&&!W&&rc(L)=="wrapper")var W=new ui([],!0)}for(O=W?O:b;++O<b;){var Q=rc(L=g[O]),ae=Q=="wrapper"?jl(L):u;W=ae&&ic(ae[0])&&ae[1]==424&&!ae[4].length&&ae[9]==1?W[rc(ae[0])].apply(W,ae[3]):L.length==1&&ic(L)?W[Q]():W.thru(L)}return function(){var be=arguments,Ee=be[0];if(W&&be.length==1&&lt(Ee))return W.plant(Ee).value();for(var xe=0,He=b?g[xe].apply(this,be):Ee;++xe<b;)He=g[xe].call(this,He);return He}})}function Zu(f,g,b,O,N,L,W,Q,ae,be){var Ee=g&S,xe=1&g,He=2&g,Qe=24&g,ct=512&g,Ae=He?u:Xu(f);return function Me(){for(var ft=arguments.length,Ke=je(ft),dt=ft;dt--;)Ke[dt]=arguments[dt];if(Qe)var Et=qa(Me),jt=U_(Ke,Et);if(O&&(Ke=Qu(Ke,O,N,Qe)),L&&(Ke=Zv(Ke,L,W,Qe)),ft-=jt,Qe&&ft<be){var ot=qo(Ke,Et);return Ul(f,g,Zu,Me.placeholder,b,Ke,ot,Q,ae,be-ft)}var ht=xe?b:this,wn=He?ht[f]:f;return ft=Ke.length,Q?Ke=Hs(Ke,Q):ct&&ft>1&&Ke.reverse(),Ee&&ae<ft&&(Ke.length=ae),this&&this!==Jr&&this instanceof Me&&(wn=Ae||Xu(wn)),wn.apply(ht,Ke)}}function Va(f,g){return function(b,O){return function(N,L,W,Q){return _n(N,function(ae,be,Ee){L(Q,W(ae),be,Ee)}),Q}(b,f,g(O),{})}}function Ju(f,g){return function(b,O){var N;if(b===u&&O===u)return g;if(b!==u&&(N=b),O!==u){if(N===u)return O;typeof b=="string"||typeof O=="string"?(b=li(b),O=li(O)):(b=Yv(b),O=Yv(O)),N=f(b,O)}return N}}function Ll(f){return Di(function(g){return g=vr(g,qn(ut())),Pt(function(b){var O=this;return f(g,function(N){return ai(N,O,b)})})})}function vo(f,g){var b=(g=g===u?" ":li(g)).length;if(b<2)return b?xl(g,f):g;var O=xl(g,Sl(f/Ho(g)));return Vo(g)?ra(xi(O),0,f).join(""):O.slice(0,f)}function ch(f){return function(g,b,O){return O&&typeof O!="number"&&Pn(g,b,O)&&(b=O=u),g=Ui(g),b===u?(b=g,g=0):b=Ui(b),function(N,L,W,Q){for(var ae=-1,be=en(Sl((L-N)/(W||1)),0),Ee=je(be);be--;)Ee[Q?be:++ae]=N,N+=W;return Ee}(g,b,O=O===u?g<b?1:-1:Ui(O),f)}}function mo(f){return function(g,b){return typeof g=="string"&&typeof b=="string"||(g=yi(g),b=yi(b)),f(g,b)}}function Ul(f,g,b,O,N,L,W,Q,ae,be){var Ee=8&g;g|=Ee?R:64,4&(g&=~(Ee?64:R))||(g&=-4);var xe=[f,g,N,Ee?L:u,Ee?W:u,Ee?u:L,Ee?u:W,Q,ae,be],He=b.apply(u,xe);return ic(f)&&ua(He,xe),He.placeholder=O,Ka(He,f,g)}function ec(f){var g=vi[f];return function(b,O){if(b=yi(b),(O=O==null?0:fn(St(O),292))&&wl(b)){var N=(Xt(b)+"e").split("e");return+((N=(Xt(g(N[0]+"e"+(+N[1]+O)))+"e").split("e"))[0]+"e"+(+N[1]-O))}return g(b)}}var aa=Yo&&1/Mu(new Yo([,-0]))[1]==P?function(f){return new Yo(f)}:z;function Fl(f){return function(g){var b=tn(g);return b==Te?gl(g):b==ee?Rd(g):function(O,N){return vr(N,function(L){return[L,O[L]]})}(g,f(g))}}function go(f,g,b,O,N,L,W,Q){var ae=2&g;if(!ae&&typeof f!="function")throw new si(m);var be=O?O.length:0;if(be||(g&=-97,O=N=u),W=W===u?W:en(St(W),0),Q=Q===u?Q:St(Q),be-=N?N.length:0,64&g){var Ee=O,xe=N;O=N=u}var He=ae?u:jl(f),Qe=[f,g,b,O,N,Ee,xe,L,W,Q];if(He&&function(Ae,Me){var ft=Ae[1],Ke=Me[1],dt=ft|Ke,Et=dt<131,jt=Ke==S&&ft==8||Ke==S&&ft==256&&Ae[7].length<=Me[8]||Ke==384&&Me[7].length<=Me[8]&&ft==8;if(!Et&&!jt)return Ae;1&Ke&&(Ae[2]=Me[2],dt|=1&ft?0:4);var ot=Me[3];if(ot){var ht=Ae[3];Ae[3]=ht?Qu(ht,ot,Me[4]):ot,Ae[4]=ht?qo(Ae[3],w):Me[4]}(ot=Me[5])&&(ht=Ae[5],Ae[5]=ht?Zv(ht,ot,Me[6]):ot,Ae[6]=ht?qo(Ae[5],w):Me[6]),(ot=Me[7])&&(Ae[7]=ot),Ke&S&&(Ae[8]=Ae[8]==null?Me[8]:fn(Ae[8],Me[8])),Ae[9]==null&&(Ae[9]=Me[9]),Ae[0]=Me[0],Ae[1]=dt}(Qe,He),f=Qe[0],g=Qe[1],b=Qe[2],O=Qe[3],N=Qe[4],!(Q=Qe[9]=Qe[9]===u?ae?0:f.length:en(Qe[9]-be,0))&&24&g&&(g&=-25),g&&g!=1)ct=g==8||g==16?function(Ae,Me,ft){var Ke=Xu(Ae);return function dt(){for(var Et=arguments.length,jt=je(Et),ot=Et,ht=qa(dt);ot--;)jt[ot]=arguments[ot];var wn=Et<3&&jt[0]!==ht&&jt[Et-1]!==ht?[]:qo(jt,ht);return(Et-=wn.length)<ft?Ul(Ae,Me,Zu,dt.placeholder,u,jt,wn,u,u,ft-Et):ai(this&&this!==Jr&&this instanceof dt?Ke:Ae,this,jt)}}(f,g,Q):g!=R&&g!=33||N.length?Zu.apply(u,Qe):function(Ae,Me,ft,Ke){var dt=1&Me,Et=Xu(Ae);return function jt(){for(var ot=-1,ht=arguments.length,wn=-1,Bi=Ke.length,ha=je(Bi+ht),Tn=this&&this!==Jr&&this instanceof jt?Et:Ae;++wn<Bi;)ha[wn]=Ke[wn];for(;ht--;)ha[wn++]=arguments[++ot];return ai(Tn,dt?ft:this,ha)}}(f,g,b,O);else var ct=function(Ae,Me,ft){var Ke=1&Me,dt=Xu(Ae);return function Et(){return(this&&this!==Jr&&this instanceof Et?dt:Ae).apply(Ke?ft:this,arguments)}}(f,g,b);return Ka((He?th:ua)(ct,Qe),f,g)}function $s(f,g,b,O){return f===u||Li(f,Na[b])&&!er.call(O,b)?g:f}function lh(f,g,b,O,N,L){return fr(f)&&fr(g)&&(L.set(g,f),Ga(f,g,u,lh,L),L.delete(g)),f}function fh(f){return dc(f)?u:f}function En(f,g,b,O,N,L){var W=1&b,Q=f.length,ae=g.length;if(Q!=ae&&!(W&&ae>Q))return!1;var be=L.get(f),Ee=L.get(g);if(be&&Ee)return be==g&&Ee==f;var xe=-1,He=!0,Qe=2&b?new Wi:u;for(L.set(f,g),L.set(g,f);++xe<Q;){var ct=f[xe],Ae=g[xe];if(O)var Me=W?O(Ae,ct,xe,g,f,L):O(ct,Ae,xe,f,g,L);if(Me!==u){if(Me)continue;He=!1;break}if(Qe){if(!Sd(g,function(ft,Ke){if(!uo(Qe,Ke)&&(ct===ft||N(ct,ft,b,O,L)))return Qe.push(Ke)})){He=!1;break}}else if(ct!==Ae&&!N(ct,Ae,b,O,L)){He=!1;break}}return L.delete(f),L.delete(g),He}function Di(f){return bn(ac(f,u,Gl),f+"")}function Bl(f){return Ol(f,Cr,Ha)}function tc(f){return Ol(f,Fn,rm)}var jl=fo?function(f){return fo.get(f)}:z;function rc(f){for(var g=f.name+"",b=Ma[g],O=er.call(Ma,g)?b.length:0;O--;){var N=b[O],L=N.func;if(L==null||L==f)return N.name}return g}function qa(f){return(er.call(M,"placeholder")?M:f).placeholder}function ut(){var f=M.iteratee||D;return f=f===D?zd:f,arguments.length?f(arguments[0],arguments[1]):f}function Vs(f,g){var b,O,N=f.__data__;return((O=typeof(b=g))=="string"||O=="number"||O=="symbol"||O=="boolean"?b!=="__proto__":b===null)?N[typeof g=="string"?"string":"hash"]:N.map}function nc(f){for(var g=Cr(f),b=g.length;b--;){var O=g[b],N=f[O];g[b]=[O,N,nm(N)]}return g}function sa(f,g){var b=function(O,N){return O==null?u:O[N]}(f,g);return Wd(b)?b:u}var Ha=$u?function(f){return f==null?[]:(f=or(f),qi($u(f),function(g){return kv.call(f,g)}))}:Ge,rm=$u?function(f){for(var g=[];f;)so(g,Ha(f)),f=zo(f);return g}:Ge,tn=Cn;function dh(f,g,b){for(var O=-1,N=(g=ta(g,f)).length,L=!1;++O<N;){var W=fi(g[O]);if(!(L=f!=null&&b(f,W)))break;f=f[W]}return L||++O!=N?L:!!(N=f==null?0:f.length)&&Qi(N)&&zn(W,N)&&(lt(f)||da(f))}function hh(f){return typeof f.constructor!="function"||qs(f)?{}:Ua(zo(f))}function Ut(f){return lt(f)||da(f)||!!(bl&&f&&f[bl])}function zn(f,g){var b=typeof f;return!!(g=g??x)&&(b=="number"||b!="symbol"&&ue.test(f))&&f>-1&&f%1==0&&f<g}function Pn(f,g,b){if(!fr(b))return!1;var O=typeof g;return!!(O=="number"?rn(b)&&zn(g,b.length):O=="string"&&g in b)&&Li(b[g],f)}function yo(f,g){if(lt(f))return!1;var b=typeof f;return!(b!="number"&&b!="symbol"&&b!="boolean"&&f!=null&&!Kn(f))||Rn.test(f)||!Rr.test(f)||g!=null&&f in or(g)}function ic(f){var g=rc(f),b=M[g];if(typeof b!="function"||!(g in Lt.prototype))return!1;if(f===b)return!0;var O=jl(b);return!!O&&f===O[0]}(kd&&tn(new kd(new ArrayBuffer(1)))!=At||Ko&&tn(new Ko)!=Te||Dd&&tn(Dd.resolve())!=J||Yo&&tn(new Yo)!=ee||Da&&tn(new Da)!=Be)&&(tn=function(f){var g=Cn(f),b=g==$?f.constructor:u,O=b?ca(b):"";if(O)switch(O){case V_:return At;case Fv:return Te;case q_:return J;case Qo:return ee;case Bv:return Be}return g});var oc=Ms?Yi:Nt;function qs(f){var g=f&&f.constructor;return f===(typeof g=="function"&&g.prototype||Na)}function nm(f){return f==f&&!fr(f)}function Wa(f,g){return function(b){return b!=null&&b[f]===g&&(g!==u||f in or(b))}}function ac(f,g,b){return g=en(g===u?f.length-1:g,0),function(){for(var O=arguments,N=-1,L=en(O.length-g,0),W=je(L);++N<L;)W[N]=O[g+N];N=-1;for(var Q=je(g+1);++N<g;)Q[N]=O[N];return Q[g]=b(W),ai(f,this,Q)}}function Ki(f,g){return g.length<2?f:zi(f,Hn(g,0,-1))}function Hs(f,g){for(var b=f.length,O=fn(g.length,b),N=Br(f);O--;){var L=g[O];f[O]=zn(L,b)?N[L]:u}return f}function ph(f,g){if((g!=="constructor"||typeof f[g]!="function")&&g!="__proto__")return f[g]}var ua=_o(th),za=Dv||function(f,g){return Jr.setTimeout(f,g)},bn=_o(Hv);function Ka(f,g,b){var O=g+"";return bn(f,function(N,L){var W=L.length;if(!W)return N;var Q=W-1;return L[Q]=(W>1?"& ":"")+L[Q],L=L.join(W>2?", ":" "),N.replace(Gn,`{
/* [wrapped with `+L+`] */
`)}(O,function(N,L){return Fr(G,function(W){var Q="_."+W[0];L&W[1]&&!ku(N,Q)&&N.push(Q)}),N.sort()}(function(N){var L=N.match(mt);return L?L[1].split(kn):[]}(O),b)))}function _o(f){var g=0,b=0;return function(){var O=Nd(),N=16-(O-b);if(b=O,N>0){if(++g>=800)return arguments[0]}else g=0;return f.apply(u,arguments)}}function sc(f,g){var b=-1,O=f.length,N=O-1;for(g=g===u?O:g;++b<g;){var L=Pl(b,N),W=f[L];f[L]=f[b],f[b]=W}return f.length=g,f}var uc,vh,Ya=(uc=Kl(function(f){var g=[];return f.charCodeAt(0)===46&&g.push(""),f.replace(it,function(b,O,N,L){g.push(N?L.replace(K,"$1"):O||b)}),g},function(f){return vh.size===500&&vh.clear(),f}),vh=uc.cache,uc);function fi(f){if(typeof f=="string"||Kn(f))return f;var g=f+"";return g=="0"&&1/f==-1/0?"-0":g}function ca(f){if(f!=null){try{return El.call(f)}catch{}try{return f+""}catch{}}return""}function Un(f){if(f instanceof Lt)return f.clone();var g=new ui(f.__wrapped__,f.__chain__);return g.__actions__=Br(f.__actions__),g.__index__=f.__index__,g.__values__=f.__values__,g}var im=Pt(function(f,g){return Nr(f)?js(f,dn(g,1,Nr,!0)):[]}),la=Pt(function(f,g){var b=hn(g);return Nr(b)&&(b=u),Nr(f)?js(f,dn(g,1,Nr,!0),ut(b,2)):[]}),mh=Pt(function(f,g){var b=hn(g);return Nr(b)&&(b=u),Nr(f)?js(f,dn(g,1,Nr,!0),u,b):[]});function gh(f,g,b){var O=f==null?0:f.length;if(!O)return-1;var N=b==null?0:St(b);return N<0&&(N=en(O+N,0)),Vn(f,ut(g,3),N)}function Eo(f,g,b){var O=f==null?0:f.length;if(!O)return-1;var N=O-1;return b!==u&&(N=St(b),N=b<0?en(O+N,0):fn(N,O-1)),Vn(f,ut(g,3),N,!0)}function Gl(f){return f!=null&&f.length?dn(f,1):[]}function $l(f){return f&&f.length?f[0]:u}var Sr=Pt(function(f){var g=vr(f,Ml);return g.length&&g[0]===f[0]?Rl(g):[]}),cc=Pt(function(f){var g=hn(f),b=vr(f,Ml);return g===hn(b)?g=u:b.pop(),b.length&&b[0]===f[0]?Rl(b,ut(g,2)):[]}),om=Pt(function(f){var g=hn(f),b=vr(f,Ml);return(g=typeof g=="function"?g:u)&&b.pop(),b.length&&b[0]===f[0]?Rl(b,u,g):[]});function hn(f){var g=f==null?0:f.length;return g?f[g-1]:u}var Mi=Pt(am);function am(f,g){return f&&f.length&&g&&g.length?Ku(f,g):f}var z_=Di(function(f,g){var b=f==null?0:f.length,O=Hu(f,g);return Vv(f,vr(g,function(N){return zn(N,b)?+N:N}).sort(sh)),O});function Ws(f){return f==null?f:Uv.call(f)}var Vl=Pt(function(f){return ea(dn(f,1,Nr,!0))}),yh=Pt(function(f){var g=hn(f);return Nr(g)&&(g=u),ea(dn(f,1,Nr,!0),ut(g,2))}),sm=Pt(function(f){var g=hn(f);return g=typeof g=="function"?g:u,ea(dn(f,1,Nr,!0),u,g)});function lc(f){if(!f||!f.length)return[];var g=0;return f=qi(f,function(b){if(Nr(b))return g=en(b.length,g),!0}),ks(g,function(b){return vr(f,pl(b))})}function ql(f,g){if(!f||!f.length)return[];var b=lc(f);return g==null?b:vr(b,function(O){return ai(g,u,O)})}var Qa=Pt(function(f,g){return Nr(f)?js(f,g):[]}),um=Pt(function(f){return Dl(qi(f,Nr))}),_h=Pt(function(f){var g=hn(f);return Nr(g)&&(g=u),Dl(qi(f,Nr),ut(g,2))}),cm=Pt(function(f){var g=hn(f);return g=typeof g=="function"?g:u,Dl(qi(f,Nr),u,g)}),Eh=Pt(lc),bh=Pt(function(f){var g=f.length,b=g>1?f[g-1]:u;return b=typeof b=="function"?(f.pop(),b):u,ql(f,b)});function lm(f){var g=M(f);return g.__chain__=!0,g}function Hl(f,g){return g(f)}var Sh=Di(function(f){var g=f.length,b=g?f[0]:0,O=this.__wrapped__,N=function(L){return Hu(L,f)};return!(g>1||this.__actions__.length)&&O instanceof Lt&&zn(b)?((O=O.slice(b,+b+(g?1:0))).__actions__.push({func:Hl,args:[N],thisArg:u}),new ui(O,this.__chain__).thru(function(L){return g&&!L.length&&L.push(u),L})):this.thru(N)}),wh=na(function(f,g,b){er.call(f,b)?++f[b]:ki(f,b,1)}),K_=jr(gh),Y_=jr(Eo);function Wl(f,g){return(lt(f)?Fr:Zo)(f,ut(g,3))}function Th(f,g){return(lt(f)?M_:Gd)(f,ut(g,3))}var Q_=na(function(f,g,b){er.call(f,b)?f[b].push(g):ki(f,b,[g])}),zs=Pt(function(f,g,b){var O=-1,N=typeof g=="function",L=rn(f)?je(f.length):[];return Zo(f,function(W){L[++O]=N?ai(g,W,b):gi(W,g,b)}),L}),fa=na(function(f,g,b){ki(f,b,g)});function zl(f,g){return(lt(f)?vr:Qd)(f,ut(g,3))}var X_=na(function(f,g,b){f[b?0:1].push(g)},function(){return[[],[]]}),fm=Pt(function(f,g){if(f==null)return[];var b=g.length;return b>1&&Pn(f,g[0],g[1])?g=[]:b>2&&Pn(g[0],g[1],g[2])&&(g=[g[0]]),Jd(f,dn(g,1),[])}),fc=G_||function(){return Jr.Date.now()};function Ah(f,g,b){return g=b?u:g,g=f&&g==null?f.length:g,go(f,S,u,u,u,u,g)}function dm(f,g){var b;if(typeof g!="function")throw new si(m);return f=St(f),function(){return--f>0&&(b=g.apply(this,arguments)),f<=1&&(g=u),b}}var Xa=Pt(function(f,g,b){var O=1;if(b.length){var N=qo(b,qa(Xa));O|=R}return go(f,O,g,b,N)}),Ih=Pt(function(f,g,b){var O=3;if(b.length){var N=qo(b,qa(Ih));O|=R}return go(g,O,f,b,N)});function hm(f,g,b){var O,N,L,W,Q,ae,be=0,Ee=!1,xe=!1,He=!0;if(typeof f!="function")throw new si(m);function Qe(dt){var Et=O,jt=N;return O=N=u,be=dt,W=f.apply(jt,Et)}function ct(dt){return be=dt,Q=za(Me,g),Ee?Qe(dt):W}function Ae(dt){var Et=dt-ae;return ae===u||Et>=g||Et<0||xe&&dt-be>=L}function Me(){var dt=fc();if(Ae(dt))return ft(dt);Q=za(Me,function(Et){var jt=g-(Et-ae);return xe?fn(jt,L-(Et-be)):jt}(dt))}function ft(dt){return Q=u,He&&O?Qe(dt):(O=N=u,W)}function Ke(){var dt=fc(),Et=Ae(dt);if(O=arguments,N=this,ae=dt,Et){if(Q===u)return ct(ae);if(xe)return oh(Q),Q=za(Me,g),Qe(ae)}return Q===u&&(Q=za(Me,g)),W}return g=yi(g)||0,fr(b)&&(Ee=!!b.leading,L=(xe="maxWait"in b)?en(yi(b.maxWait)||0,g):L,He="trailing"in b?!!b.trailing:He),Ke.cancel=function(){Q!==u&&oh(Q),be=0,O=ae=N=Q=u},Ke.flush=function(){return Q===u?W:ft(fc())},Ke}var Z_=Pt(function(f,g){return Al(f,1,g)}),J_=Pt(function(f,g,b){return Al(f,yi(g)||0,b)});function Kl(f,g){if(typeof f!="function"||g!=null&&typeof g!="function")throw new si(m);var b=function(){var O=arguments,N=g?g.apply(this,O):O[0],L=b.cache;if(L.has(N))return L.get(N);var W=f.apply(this,O);return b.cache=L.set(N,W)||L,W};return b.cache=new(Kl.Cache||Ni),b}function Ks(f){if(typeof f!="function")throw new si(m);return function(){var g=arguments;switch(g.length){case 0:return!f.call(this);case 1:return!f.call(this,g[0]);case 2:return!f.call(this,g[0],g[1]);case 3:return!f.call(this,g[0],g[1],g[2])}return!f.apply(this,g)}}Kl.Cache=Ni;var pm=$a(function(f,g){var b=(g=g.length==1&&lt(g[0])?vr(g[0],qn(ut())):vr(dn(g,1),qn(ut()))).length;return Pt(function(O){for(var N=-1,L=fn(O.length,b);++N<L;)O[N]=g[N].call(this,O[N]);return ai(f,this,O)})}),Za=Pt(function(f,g){var b=qo(g,qa(Za));return go(f,R,u,g,b)}),vm=Pt(function(f,g){var b=qo(g,qa(vm));return go(f,64,u,g,b)}),eE=Di(function(f,g){return go(f,256,u,u,u,g)});function Li(f,g){return f===g||f!=f&&g!=g}var tE=mo(Ba),Ys=mo(function(f,g){return f>=g}),da=$v(function(){return arguments}())?$v:function(f){return wr(f)&&er.call(f,"callee")&&!kv.call(f,"callee")},lt=je.isArray,Qs=Ns?qn(Ns):function(f){return wr(f)&&Cn(f)==st};function rn(f){return f!=null&&Qi(f.length)&&!Yi(f)}function Nr(f){return wr(f)&&rn(f)}var bo=$_||Nt,mm=xu?qn(xu):function(f){return wr(f)&&Cn(f)==H};function Yl(f){if(!wr(f))return!1;var g=Cn(f);return g==re||g=="[object DOMException]"||typeof f.message=="string"&&typeof f.name=="string"&&!dc(f)}function Yi(f){if(!fr(f))return!1;var g=Cn(f);return g==te||g==fe||g=="[object AsyncFunction]"||g=="[object Proxy]"}function Ql(f){return typeof f=="number"&&f==St(f)}function Qi(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=x}function fr(f){var g=typeof f;return f!=null&&(g=="object"||g=="function")}function wr(f){return f!=null&&typeof f=="object"}var gm=wv?qn(wv):function(f){return wr(f)&&tn(f)==Te};function ym(f){return typeof f=="number"||wr(f)&&Cn(f)==Ce}function dc(f){if(!wr(f)||Cn(f)!=$)return!1;var g=zo(f);if(g===null)return!0;var b=er.call(g,"constructor")&&g.constructor;return typeof b=="function"&&b instanceof b&&El.call(b)==j_}var Oh=Vi?qn(Vi):function(f){return wr(f)&&Cn(f)==ge},_m=Tv?qn(Tv):function(f){return wr(f)&&tn(f)==ee};function Xl(f){return typeof f=="string"||!lt(f)&&wr(f)&&Cn(f)==Ie}function Kn(f){return typeof f=="symbol"||wr(f)&&Cn(f)==we}var Gr=Ed?qn(Ed):function(f){return wr(f)&&Qi(f.length)&&!!$e[Cn(f)]},Zl=mo(Yd),rE=mo(function(f,g){return f<=g});function Rh(f){if(!f)return[];if(rn(f))return Xl(f)?xi(f):Br(f);if(Bu&&f[Bu])return function(b){for(var O,N=[];!(O=b.next()).done;)N.push(O.value);return N}(f[Bu]());var g=tn(f);return(g==Te?gl:g==ee?Mu:kr)(f)}function Ui(f){return f?(f=yi(f))===P||f===-1/0?17976931348623157e292*(f<0?-1:1):f==f?f:0:f===0?f:0}function St(f){var g=Ui(f),b=g%1;return g==g?b?g-b:g:0}function Em(f){return f?Fa(St(f),0,B):0}function yi(f){if(typeof f=="number")return f;if(Kn(f))return k;if(fr(f)){var g=typeof f.valueOf=="function"?f.valueOf():f;f=fr(g)?g+"":g}if(typeof f!="string")return f===0?f:+f;f=Td(f);var b=oe.test(f);return b||me.test(f)?De(f.slice(2),b?2:8):ve.test(f)?k:+f}function Ch(f){return Wn(f,Fn(f))}function Xt(f){return f==null?"":li(f)}var Fi=ia(function(f,g){if(qs(g)||rn(g))Wn(g,Cr(g),f);else for(var b in g)er.call(g,b)&&Bs(f,b,g[b])}),hc=ia(function(f,g){Wn(g,Fn(g),f)}),pc=ia(function(f,g,b,O){Wn(g,Fn(g),f,O)}),nE=ia(function(f,g,b,O){Wn(g,Cr(g),f,O)}),iE=Di(Hu),oE=Pt(function(f,g){f=or(f);var b=-1,O=g.length,N=O>2?g[2]:u;for(N&&Pn(g[0],g[1],N)&&(O=1);++b<O;)for(var L=g[b],W=Fn(L),Q=-1,ae=W.length;++Q<ae;){var be=W[Q],Ee=f[be];(Ee===u||Li(Ee,Na[be])&&!er.call(f,be))&&(f[be]=L[be])}return f}),Ph=Pt(function(f){return f.push(u,lh),ai(Tm,u,f)});function Jl(f,g,b){var O=f==null?u:zi(f,g);return O===u?b:O}function ef(f,g){return f!=null&&dh(f,g,Hd)}var bm=Va(function(f,g,b){g!=null&&typeof g.toString!="function"&&(g=Ls.call(g)),f[g]=b},T(A)),Sm=Va(function(f,g,b){g!=null&&typeof g.toString!="function"&&(g=Ls.call(g)),er.call(f,g)?f[g].push(b):f[g]=[b]},ut),wm=Pt(gi);function Cr(f){return rn(f)?Ld(f):Kd(f)}function Fn(f){return rn(f)?Ld(f,!0):function(g){if(!fr(g))return function(L){var W=[];if(L!=null)for(var Q in or(L))W.push(Q);return W}(g);var b=qs(g),O=[];for(var N in g)(N!="constructor"||!b&&er.call(g,N))&&O.push(N);return O}(f)}var xh=ia(function(f,g,b){Ga(f,g,b)}),Tm=ia(function(f,g,b,O){Ga(f,g,b,O)}),aE=Di(function(f,g){var b={};if(f==null)return b;var O=!1;g=vr(g,function(L){return L=ta(L,f),O||(O=L.length>1),L}),Wn(f,tc(f),b),O&&(b=mi(b,7,fh));for(var N=g.length;N--;)Nl(b,g[N]);return b}),sE=Di(function(f,g){return f==null?{}:function(b,O){return eh(b,O,function(N,L){return ef(b,L)})}(f,g)});function vc(f,g){if(f==null)return{};var b=vr(tc(f),function(O){return[O]});return g=ut(g),eh(f,b,function(O,N){return g(O,N[0])})}var tf=Fl(Cr),Ja=Fl(Fn);function kr(f){return f==null?[]:Du(f,Cr(f))}var Nh=oa(function(f,g,b){return g=g.toLowerCase(),f+(b?kh(g):g)});function kh(f){return d(Xt(f).toLowerCase())}function Xi(f){return(f=Xt(f))&&f.replace(rt,Rv).replace(Ci,"")}var Ft=oa(function(f,g,b){return f+(b?"-":"")+g.toLowerCase()}),Bt=oa(function(f,g,b){return f+(b?" ":"")+g.toLowerCase()}),uE=tm("toLowerCase"),h=oa(function(f,g,b){return f+(b?"_":"")+g.toLowerCase()}),s=oa(function(f,g,b){return f+(b?" ":"")+d(g)}),c=oa(function(f,g,b){return f+(b?" ":"")+g.toUpperCase()}),d=tm("toUpperCase");function v(f,g,b){return f=Xt(f),(g=b?u:g)===u?function(O){return Cs.test(O)}(f)?function(O){return O.match(ii)||[]}(f):function(O){return O.match(Lr)||[]}(f):f.match(g)||[]}var y=Pt(function(f,g){try{return ai(f,u,g)}catch(b){return Yl(b)?b:new Ct(b)}}),_=Di(function(f,g){return Fr(g,function(b){b=fi(b),ki(f,b,Xa(f[b],f))}),f});function T(f){return function(){return f}}var I=uh(),C=uh(!0);function A(f){return f}function D(f){return zd(typeof f=="function"?f:mi(f,1))}var U=Pt(function(f,g){return function(b){return gi(b,f,g)}}),q=Pt(function(f,g){return function(b){return gi(f,b,g)}});function Z(f,g,b){var O=Cr(g),N=Jo(g,O);b!=null||fr(g)&&(N.length||!O.length)||(b=g,g=f,f=this,N=Jo(g,Cr(g)));var L=!(fr(b)&&"chain"in b&&!b.chain),W=Yi(f);return Fr(N,function(Q){var ae=g[Q];f[Q]=ae,W&&(f.prototype[Q]=function(){var be=this.__chain__;if(L||be){var Ee=f(this.__wrapped__),xe=Ee.__actions__=Br(this.__actions__);return xe.push({func:ae,args:arguments,thisArg:f}),Ee.__chain__=be,Ee}return ae.apply(f,so([this.value()],arguments))})}),f}function z(){}var ne=Ll(vr),he=Ll(Nu),Le=Ll(Sd);function Xe(f){return yo(f)?pl(fi(f)):function(g){return function(b){return zi(b,g)}}(f)}var at=ch(),Re=ch(!0);function Ge(){return[]}function Nt(){return!1}var Je,xt=Ju(function(f,g){return f+g},0),tr=ec("ceil"),nn=Ju(function(f,g){return f/g},1),Ot=ec("floor"),_i=Ju(function(f,g){return f*g},1),Sn=ec("round"),on=Ju(function(f,g){return f-g},0);return M.after=function(f,g){if(typeof g!="function")throw new si(m);return f=St(f),function(){if(--f<1)return g.apply(this,arguments)}},M.ary=Ah,M.assign=Fi,M.assignIn=hc,M.assignInWith=pc,M.assignWith=nE,M.at=iE,M.before=dm,M.bind=Xa,M.bindAll=_,M.bindKey=Ih,M.castArray=function(){if(!arguments.length)return[];var f=arguments[0];return lt(f)?f:[f]},M.chain=lm,M.chunk=function(f,g,b){g=(b?Pn(f,g,b):g===u)?1:en(St(g),0);var O=f==null?0:f.length;if(!O||g<1)return[];for(var N=0,L=0,W=je(Sl(O/g));N<O;)W[L++]=Hn(f,N,N+=g);return W},M.compact=function(f){for(var g=-1,b=f==null?0:f.length,O=0,N=[];++g<b;){var L=f[g];L&&(N[O++]=L)}return N},M.concat=function(){var f=arguments.length;if(!f)return[];for(var g=je(f-1),b=arguments[0],O=f;O--;)g[O-1]=arguments[O];return so(lt(b)?Br(b):[b],dn(g,1))},M.cond=function(f){var g=f==null?0:f.length,b=ut();return f=g?vr(f,function(O){if(typeof O[1]!="function")throw new si(m);return[b(O[0]),O[1]]}):[],Pt(function(O){for(var N=-1;++N<g;){var L=f[N];if(ai(L[0],this,O))return ai(L[1],this,O)}})},M.conforms=function(f){return function(g){var b=Cr(g);return function(O){return jd(O,g,b)}}(mi(f,1))},M.constant=T,M.countBy=wh,M.create=function(f,g){var b=Ua(f);return g==null?b:Bd(b,g)},M.curry=function f(g,b,O){var N=go(g,8,u,u,u,u,u,b=O?u:b);return N.placeholder=f.placeholder,N},M.curryRight=function f(g,b,O){var N=go(g,16,u,u,u,u,u,b=O?u:b);return N.placeholder=f.placeholder,N},M.debounce=hm,M.defaults=oE,M.defaultsDeep=Ph,M.defer=Z_,M.delay=J_,M.difference=im,M.differenceBy=la,M.differenceWith=mh,M.drop=function(f,g,b){var O=f==null?0:f.length;return O?Hn(f,(g=b||g===u?1:St(g))<0?0:g,O):[]},M.dropRight=function(f,g,b){var O=f==null?0:f.length;return O?Hn(f,0,(g=O-(g=b||g===u?1:St(g)))<0?0:g):[]},M.dropRightWhile=function(f,g){return f&&f.length?kl(f,ut(g,3),!0,!0):[]},M.dropWhile=function(f,g){return f&&f.length?kl(f,ut(g,3),!0):[]},M.fill=function(f,g,b,O){var N=f==null?0:f.length;return N?(b&&typeof b!="number"&&Pn(f,g,b)&&(b=0,O=N),function(L,W,Q,ae){var be=L.length;for((Q=St(Q))<0&&(Q=-Q>be?0:be+Q),(ae=ae===u||ae>be?be:St(ae))<0&&(ae+=be),ae=Q>ae?0:Em(ae);Q<ae;)L[Q++]=W;return L}(f,g,b,O)):[]},M.filter=function(f,g){return(lt(f)?qi:Vd)(f,ut(g,3))},M.flatMap=function(f,g){return dn(zl(f,g),1)},M.flatMapDeep=function(f,g){return dn(zl(f,g),P)},M.flatMapDepth=function(f,g,b){return b=b===u?1:St(b),dn(zl(f,g),b)},M.flatten=Gl,M.flattenDeep=function(f){return f!=null&&f.length?dn(f,P):[]},M.flattenDepth=function(f,g){return f!=null&&f.length?dn(f,g=g===u?1:St(g)):[]},M.flip=function(f){return go(f,512)},M.flow=I,M.flowRight=C,M.fromPairs=function(f){for(var g=-1,b=f==null?0:f.length,O={};++g<b;){var N=f[g];O[N[0]]=N[1]}return O},M.functions=function(f){return f==null?[]:Jo(f,Cr(f))},M.functionsIn=function(f){return f==null?[]:Jo(f,Fn(f))},M.groupBy=Q_,M.initial=function(f){return f!=null&&f.length?Hn(f,0,-1):[]},M.intersection=Sr,M.intersectionBy=cc,M.intersectionWith=om,M.invert=bm,M.invertBy=Sm,M.invokeMap=zs,M.iteratee=D,M.keyBy=fa,M.keys=Cr,M.keysIn=Fn,M.map=zl,M.mapKeys=function(f,g){var b={};return g=ut(g,3),_n(f,function(O,N,L){ki(b,g(O,N,L),O)}),b},M.mapValues=function(f,g){var b={};return g=ut(g,3),_n(f,function(O,N,L){ki(b,N,g(O,N,L))}),b},M.matches=function(f){return Xd(mi(f,1))},M.matchesProperty=function(f,g){return Cl(f,mi(g,1))},M.memoize=Kl,M.merge=xh,M.mergeWith=Tm,M.method=U,M.methodOf=q,M.mixin=Z,M.negate=Ks,M.nthArg=function(f){return f=St(f),Pt(function(g){return Zd(g,f)})},M.omit=aE,M.omitBy=function(f,g){return vc(f,Ks(ut(g)))},M.once=function(f){return dm(2,f)},M.orderBy=function(f,g,b,O){return f==null?[]:(lt(g)||(g=g==null?[]:[g]),lt(b=O?u:b)||(b=b==null?[]:[b]),Jd(f,g,b))},M.over=ne,M.overArgs=pm,M.overEvery=he,M.overSome=Le,M.partial=Za,M.partialRight=vm,M.partition=X_,M.pick=sE,M.pickBy=vc,M.property=Xe,M.propertyOf=function(f){return function(g){return f==null?u:zi(f,g)}},M.pull=Mi,M.pullAll=am,M.pullAllBy=function(f,g,b){return f&&f.length&&g&&g.length?Ku(f,g,ut(b,2)):f},M.pullAllWith=function(f,g,b){return f&&f.length&&g&&g.length?Ku(f,g,u,b):f},M.pullAt=z_,M.range=at,M.rangeRight=Re,M.rearg=eE,M.reject=function(f,g){return(lt(f)?qi:Vd)(f,Ks(ut(g,3)))},M.remove=function(f,g){var b=[];if(!f||!f.length)return b;var O=-1,N=[],L=f.length;for(g=ut(g,3);++O<L;){var W=f[O];g(W,O,f)&&(b.push(W),N.push(O))}return Vv(f,N),b},M.rest=function(f,g){if(typeof f!="function")throw new si(m);return Pt(f,g=g===u?g:St(g))},M.reverse=Ws,M.sampleSize=function(f,g,b){return g=(b?Pn(f,g,b):g===u)?1:St(g),(lt(f)?jv:qv)(f,g)},M.set=function(f,g,b){return f==null?f:Gs(f,g,b)},M.setWith=function(f,g,b,O){return O=typeof O=="function"?O:u,f==null?f:Gs(f,g,b,O)},M.shuffle=function(f){return(lt(f)?H_:Wv)(f)},M.slice=function(f,g,b){var O=f==null?0:f.length;return O?(b&&typeof b!="number"&&Pn(f,g,b)?(g=0,b=O):(g=g==null?0:St(g),b=b===u?O:St(b)),Hn(f,g,b)):[]},M.sortBy=fm,M.sortedUniq=function(f){return f&&f.length?Kv(f):[]},M.sortedUniqBy=function(f,g){return f&&f.length?Kv(f,ut(g,2)):[]},M.split=function(f,g,b){return b&&typeof b!="number"&&Pn(f,g,b)&&(g=b=u),(b=b===u?B:b>>>0)?(f=Xt(f))&&(typeof g=="string"||g!=null&&!Oh(g))&&!(g=li(g))&&Vo(f)?ra(xi(f),0,b):f.split(g,b):[]},M.spread=function(f,g){if(typeof f!="function")throw new si(m);return g=g==null?0:en(St(g),0),Pt(function(b){var O=b[g],N=ra(b,0,g);return O&&so(N,O),ai(f,this,N)})},M.tail=function(f){var g=f==null?0:f.length;return g?Hn(f,1,g):[]},M.take=function(f,g,b){return f&&f.length?Hn(f,0,(g=b||g===u?1:St(g))<0?0:g):[]},M.takeRight=function(f,g,b){var O=f==null?0:f.length;return O?Hn(f,(g=O-(g=b||g===u?1:St(g)))<0?0:g,O):[]},M.takeRightWhile=function(f,g){return f&&f.length?kl(f,ut(g,3),!1,!0):[]},M.takeWhile=function(f,g){return f&&f.length?kl(f,ut(g,3)):[]},M.tap=function(f,g){return g(f),f},M.throttle=function(f,g,b){var O=!0,N=!0;if(typeof f!="function")throw new si(m);return fr(b)&&(O="leading"in b?!!b.leading:O,N="trailing"in b?!!b.trailing:N),hm(f,g,{leading:O,maxWait:g,trailing:N})},M.thru=Hl,M.toArray=Rh,M.toPairs=tf,M.toPairsIn=Ja,M.toPath=function(f){return lt(f)?vr(f,fi):Kn(f)?[f]:Br(Ya(Xt(f)))},M.toPlainObject=Ch,M.transform=function(f,g,b){var O=lt(f),N=O||bo(f)||Gr(f);if(g=ut(g,4),b==null){var L=f&&f.constructor;b=N?O?new L:[]:fr(f)&&Yi(L)?Ua(zo(f)):{}}return(N?Fr:_n)(f,function(W,Q,ae){return g(b,W,Q,ae)}),b},M.unary=function(f){return Ah(f,1)},M.union=Vl,M.unionBy=yh,M.unionWith=sm,M.uniq=function(f){return f&&f.length?ea(f):[]},M.uniqBy=function(f,g){return f&&f.length?ea(f,ut(g,2)):[]},M.uniqWith=function(f,g){return g=typeof g=="function"?g:u,f&&f.length?ea(f,u,g):[]},M.unset=function(f,g){return f==null||Nl(f,g)},M.unzip=lc,M.unzipWith=ql,M.update=function(f,g,b){return f==null?f:nh(f,g,po(b))},M.updateWith=function(f,g,b,O){return O=typeof O=="function"?O:u,f==null?f:nh(f,g,po(b),O)},M.values=kr,M.valuesIn=function(f){return f==null?[]:Du(f,Fn(f))},M.without=Qa,M.words=v,M.wrap=function(f,g){return Za(po(g),f)},M.xor=um,M.xorBy=_h,M.xorWith=cm,M.zip=Eh,M.zipObject=function(f,g){return Qv(f||[],g||[],Bs)},M.zipObjectDeep=function(f,g){return Qv(f||[],g||[],Gs)},M.zipWith=bh,M.entries=tf,M.entriesIn=Ja,M.extend=hc,M.extendWith=pc,Z(M,M),M.add=xt,M.attempt=y,M.camelCase=Nh,M.capitalize=kh,M.ceil=tr,M.clamp=function(f,g,b){return b===u&&(b=g,g=u),b!==u&&(b=(b=yi(b))==b?b:0),g!==u&&(g=(g=yi(g))==g?g:0),Fa(yi(f),g,b)},M.clone=function(f){return mi(f,4)},M.cloneDeep=function(f){return mi(f,5)},M.cloneDeepWith=function(f,g){return mi(f,5,g=typeof g=="function"?g:u)},M.cloneWith=function(f,g){return mi(f,4,g=typeof g=="function"?g:u)},M.conformsTo=function(f,g){return g==null||jd(f,g,Cr(g))},M.deburr=Xi,M.defaultTo=function(f,g){return f==null||f!=f?g:f},M.divide=nn,M.endsWith=function(f,g,b){f=Xt(f),g=li(g);var O=f.length,N=b=b===u?O:Fa(St(b),0,O);return(b-=g.length)>=0&&f.slice(b,N)==g},M.eq=Li,M.escape=function(f){return(f=Xt(f))&&Qr.test(f)?f.replace(le,Od):f},M.escapeRegExp=function(f){return(f=Xt(f))&&ye.test(f)?f.replace(qe,"\\$&"):f},M.every=function(f,g,b){var O=lt(f)?Nu:$d;return b&&Pn(f,g,b)&&(g=u),O(f,ut(g,3))},M.find=K_,M.findIndex=gh,M.findKey=function(f,g){return Ye(f,ut(g,3),_n)},M.findLast=Y_,M.findLastIndex=Eo,M.findLastKey=function(f,g){return Ye(f,ut(g,3),Wu)},M.floor=Ot,M.forEach=Wl,M.forEachRight=Th,M.forIn=function(f,g){return f==null?f:Il(f,ut(g,3),Fn)},M.forInRight=function(f,g){return f==null?f:qd(f,ut(g,3),Fn)},M.forOwn=function(f,g){return f&&_n(f,ut(g,3))},M.forOwnRight=function(f,g){return f&&Wu(f,ut(g,3))},M.get=Jl,M.gt=tE,M.gte=Ys,M.has=function(f,g){return f!=null&&dh(f,g,Gv)},M.hasIn=ef,M.head=$l,M.identity=A,M.includes=function(f,g,b,O){f=rn(f)?f:kr(f),b=b&&!O?St(b):0;var N=f.length;return b<0&&(b=en(N+b,0)),Xl(f)?b<=N&&f.indexOf(g,b)>-1:!!N&&ir(f,g,b)>-1},M.indexOf=function(f,g,b){var O=f==null?0:f.length;if(!O)return-1;var N=b==null?0:St(b);return N<0&&(N=en(O+N,0)),ir(f,g,N)},M.inRange=function(f,g,b){return g=Ui(g),b===u?(b=g,g=0):b=Ui(b),function(O,N,L){return O>=fn(N,L)&&O<en(N,L)}(f=yi(f),g,b)},M.invoke=wm,M.isArguments=da,M.isArray=lt,M.isArrayBuffer=Qs,M.isArrayLike=rn,M.isArrayLikeObject=Nr,M.isBoolean=function(f){return f===!0||f===!1||wr(f)&&Cn(f)==j},M.isBuffer=bo,M.isDate=mm,M.isElement=function(f){return wr(f)&&f.nodeType===1&&!dc(f)},M.isEmpty=function(f){if(f==null)return!0;if(rn(f)&&(lt(f)||typeof f=="string"||typeof f.splice=="function"||bo(f)||Gr(f)||da(f)))return!f.length;var g=tn(f);if(g==Te||g==ee)return!f.size;if(qs(f))return!Kd(f).length;for(var b in f)if(er.call(f,b))return!1;return!0},M.isEqual=function(f,g){return zu(f,g)},M.isEqualWith=function(f,g,b){var O=(b=typeof b=="function"?b:u)?b(f,g):u;return O===u?zu(f,g,u,b):!!O},M.isError=Yl,M.isFinite=function(f){return typeof f=="number"&&wl(f)},M.isFunction=Yi,M.isInteger=Ql,M.isLength=Qi,M.isMap=gm,M.isMatch=function(f,g){return f===g||ja(f,g,nc(g))},M.isMatchWith=function(f,g,b){return b=typeof b=="function"?b:u,ja(f,g,nc(g),b)},M.isNaN=function(f){return ym(f)&&f!=+f},M.isNative=function(f){if(oc(f))throw new Ct("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Wd(f)},M.isNil=function(f){return f==null},M.isNull=function(f){return f===null},M.isNumber=ym,M.isObject=fr,M.isObjectLike=wr,M.isPlainObject=dc,M.isRegExp=Oh,M.isSafeInteger=function(f){return Ql(f)&&f>=-9007199254740991&&f<=x},M.isSet=_m,M.isString=Xl,M.isSymbol=Kn,M.isTypedArray=Gr,M.isUndefined=function(f){return f===u},M.isWeakMap=function(f){return wr(f)&&tn(f)==Be},M.isWeakSet=function(f){return wr(f)&&Cn(f)=="[object WeakSet]"},M.join=function(f,g){return f==null?"":yn.call(f,g)},M.kebabCase=Ft,M.last=hn,M.lastIndexOf=function(f,g,b){var O=f==null?0:f.length;if(!O)return-1;var N=O;return b!==u&&(N=(N=St(b))<0?en(O+N,0):fn(N,O-1)),g==g?function(L,W,Q){for(var ae=Q+1;ae--;)if(L[ae]===W)return ae;return ae}(f,g,N):Vn(f,Iv,N,!0)},M.lowerCase=Bt,M.lowerFirst=uE,M.lt=Zl,M.lte=rE,M.max=function(f){return f&&f.length?qr(f,A,Ba):u},M.maxBy=function(f,g){return f&&f.length?qr(f,ut(g,2),Ba):u},M.mean=function(f){return wd(f,A)},M.meanBy=function(f,g){return wd(f,ut(g,2))},M.min=function(f){return f&&f.length?qr(f,A,Yd):u},M.minBy=function(f,g){return f&&f.length?qr(f,ut(g,2),Yd):u},M.stubArray=Ge,M.stubFalse=Nt,M.stubObject=function(){return{}},M.stubString=function(){return""},M.stubTrue=function(){return!0},M.multiply=_i,M.nth=function(f,g){return f&&f.length?Zd(f,St(g)):u},M.noConflict=function(){return Jr._===this&&(Jr._=Nv),this},M.noop=z,M.now=fc,M.pad=function(f,g,b){f=Xt(f);var O=(g=St(g))?Ho(f):0;if(!g||O>=g)return f;var N=(g-O)/2;return vo(Gu(N),b)+f+vo(Sl(N),b)},M.padEnd=function(f,g,b){f=Xt(f);var O=(g=St(g))?Ho(f):0;return g&&O<g?f+vo(g-O,b):f},M.padStart=function(f,g,b){f=Xt(f);var O=(g=St(g))?Ho(f):0;return g&&O<g?vo(g-O,b)+f:f},M.parseInt=function(f,g,b){return b||g==null?g=0:g&&(g=+g),Tl(Xt(f).replace(zt,""),g||0)},M.random=function(f,g,b){if(b&&typeof b!="boolean"&&Pn(f,g,b)&&(g=b=u),b===u&&(typeof g=="boolean"?(b=g,g=u):typeof f=="boolean"&&(b=f,f=u)),f===u&&g===u?(f=0,g=1):(f=Ui(f),g===u?(g=f,f=0):g=Ui(g)),f>g){var O=f;f=g,g=O}if(b||f%1||g%1){var N=Lv();return fn(f+N*(g-f+Oe("1e-"+((N+"").length-1))),g)}return Pl(f,g)},M.reduce=function(f,g,b){var O=lt(f)?bd:Ov,N=arguments.length<3;return O(f,ut(g,4),b,N,Zo)},M.reduceRight=function(f,g,b){var O=lt(f)?L_:Ov,N=arguments.length<3;return O(f,ut(g,4),b,N,Gd)},M.repeat=function(f,g,b){return g=(b?Pn(f,g,b):g===u)?1:St(g),xl(Xt(f),g)},M.replace=function(){var f=arguments,g=Xt(f[0]);return f.length<3?g:g.replace(f[1],f[2])},M.result=function(f,g,b){var O=-1,N=(g=ta(g,f)).length;for(N||(N=1,f=u);++O<N;){var L=f==null?u:f[fi(g[O])];L===u&&(O=N,L=b),f=Yi(L)?L.call(f):L}return f},M.round=Sn,M.runInContext=se,M.sample=function(f){return(lt(f)?Fs:W_)(f)},M.size=function(f){if(f==null)return 0;if(rn(f))return Xl(f)?Ho(f):f.length;var g=tn(f);return g==Te||g==ee?f.size:Kd(f).length},M.snakeCase=h,M.some=function(f,g,b){var O=lt(f)?Sd:zv;return b&&Pn(f,g,b)&&(g=u),O(f,ut(g,3))},M.sortedIndex=function(f,g){return Yu(f,g)},M.sortedIndexBy=function(f,g,b){return rh(f,g,ut(b,2))},M.sortedIndexOf=function(f,g){var b=f==null?0:f.length;if(b){var O=Yu(f,g);if(O<b&&Li(f[O],g))return O}return-1},M.sortedLastIndex=function(f,g){return Yu(f,g,!0)},M.sortedLastIndexBy=function(f,g,b){return rh(f,g,ut(b,2),!0)},M.sortedLastIndexOf=function(f,g){if(f!=null&&f.length){var b=Yu(f,g,!0)-1;if(Li(f[b],g))return b}return-1},M.startCase=s,M.startsWith=function(f,g,b){return f=Xt(f),b=b==null?0:Fa(St(b),0,f.length),g=li(g),f.slice(b,b+g.length)==g},M.subtract=on,M.sum=function(f){return f&&f.length?ml(f,A):0},M.sumBy=function(f,g){return f&&f.length?ml(f,ut(g,2)):0},M.template=function(f,g,b){var O=M.templateSettings;b&&Pn(f,g,b)&&(g=u),f=Xt(f),g=pc({},g,O,$s);var N,L,W=pc({},g.imports,O.imports,$s),Q=Cr(W),ae=Du(W,Q),be=0,Ee=g.interpolate||ze,xe="__p += '",He=_l((g.escape||ze).source+"|"+Ee.source+"|"+(Ee===rr?V:ze).source+"|"+(g.evaluate||ze).source+"|$","g"),Qe="//# sourceURL="+(er.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_d+"]")+`
`;f.replace(He,function(Me,ft,Ke,dt,Et,jt){return Ke||(Ke=dt),xe+=f.slice(be,jt).replace(Yt,ln),ft&&(N=!0,xe+=`' +
__e(`+ft+`) +
'`),Et&&(L=!0,xe+=`';
`+Et+`;
__p += '`),Ke&&(xe+=`' +
((__t = (`+Ke+`)) == null ? '' : __t) +
'`),be=jt+Me.length,Me}),xe+=`';
`;var ct=er.call(g,"variable")&&g.variable;if(ct){if(ce.test(ct))throw new Ct("Invalid `variable` option passed into `_.template`")}else xe=`with (obj) {
`+xe+`
}
`;xe=(L?xe.replace(xr,""):xe).replace(Er,"$1").replace(Yr,"$1;"),xe="function("+(ct||"obj")+`) {
`+(ct?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xe+`return __p
}`;var Ae=y(function(){return Vr(Q,Qe+"return "+xe).apply(u,ae)});if(Ae.source=xe,Yl(Ae))throw Ae;return Ae},M.times=function(f,g){if((f=St(f))<1||f>x)return[];var b=B,O=fn(f,B);g=ut(g),f-=B;for(var N=ks(O,g);++b<f;)g(b);return N},M.toFinite=Ui,M.toInteger=St,M.toLength=Em,M.toLower=function(f){return Xt(f).toLowerCase()},M.toNumber=yi,M.toSafeInteger=function(f){return f?Fa(St(f),-9007199254740991,x):f===0?f:0},M.toString=Xt,M.toUpper=function(f){return Xt(f).toUpperCase()},M.trim=function(f,g,b){if((f=Xt(f))&&(b||g===u))return Td(f);if(!f||!(g=li(g)))return f;var O=xi(f),N=xi(g);return ra(O,Ad(O,N),Id(O,N)+1).join("")},M.trimEnd=function(f,g,b){if((f=Xt(f))&&(b||g===u))return f.slice(0,Cd(f)+1);if(!f||!(g=li(g)))return f;var O=xi(f);return ra(O,0,Id(O,xi(g))+1).join("")},M.trimStart=function(f,g,b){if((f=Xt(f))&&(b||g===u))return f.replace(zt,"");if(!f||!(g=li(g)))return f;var O=xi(f);return ra(O,Ad(O,xi(g))).join("")},M.truncate=function(f,g){var b=30,O="...";if(fr(g)){var N="separator"in g?g.separator:N;b="length"in g?St(g.length):b,O="omission"in g?li(g.omission):O}var L=(f=Xt(f)).length;if(Vo(f)){var W=xi(f);L=W.length}if(b>=L)return f;var Q=b-Ho(O);if(Q<1)return O;var ae=W?ra(W,0,Q).join(""):f.slice(0,Q);if(N===u)return ae+O;if(W&&(Q+=ae.length-Q),Oh(N)){if(f.slice(Q).search(N)){var be,Ee=ae;for(N.global||(N=_l(N.source,Xt(Y.exec(N))+"g")),N.lastIndex=0;be=N.exec(Ee);)var xe=be.index;ae=ae.slice(0,xe===u?Q:xe)}}else if(f.indexOf(li(N),Q)!=Q){var He=ae.lastIndexOf(N);He>-1&&(ae=ae.slice(0,He))}return ae+O},M.unescape=function(f){return(f=Xt(f))&&gn.test(f)?f.replace(_t,F_):f},M.uniqueId=function(f){var g=++B_;return Xt(f)+g},M.upperCase=c,M.upperFirst=d,M.each=Wl,M.eachRight=Th,M.first=$l,Z(M,(Je={},_n(M,function(f,g){er.call(M.prototype,g)||(Je[g]=f)}),Je),{chain:!1}),M.VERSION="4.17.21",Fr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){M[f].placeholder=M}),Fr(["drop","take"],function(f,g){Lt.prototype[f]=function(b){b=b===u?1:en(St(b),0);var O=this.__filtered__&&!g?new Lt(this):this.clone();return O.__filtered__?O.__takeCount__=fn(b,O.__takeCount__):O.__views__.push({size:fn(b,B),type:f+(O.__dir__<0?"Right":"")}),O},Lt.prototype[f+"Right"]=function(b){return this.reverse()[f](b).reverse()}}),Fr(["filter","map","takeWhile"],function(f,g){var b=g+1,O=b==1||b==3;Lt.prototype[f]=function(N){var L=this.clone();return L.__iteratees__.push({iteratee:ut(N,3),type:b}),L.__filtered__=L.__filtered__||O,L}}),Fr(["head","last"],function(f,g){var b="take"+(g?"Right":"");Lt.prototype[f]=function(){return this[b](1).value()[0]}}),Fr(["initial","tail"],function(f,g){var b="drop"+(g?"":"Right");Lt.prototype[f]=function(){return this.__filtered__?new Lt(this):this[b](1)}}),Lt.prototype.compact=function(){return this.filter(A)},Lt.prototype.find=function(f){return this.filter(f).head()},Lt.prototype.findLast=function(f){return this.reverse().find(f)},Lt.prototype.invokeMap=Pt(function(f,g){return typeof f=="function"?new Lt(this):this.map(function(b){return gi(b,f,g)})}),Lt.prototype.reject=function(f){return this.filter(Ks(ut(f)))},Lt.prototype.slice=function(f,g){f=St(f);var b=this;return b.__filtered__&&(f>0||g<0)?new Lt(b):(f<0?b=b.takeRight(-f):f&&(b=b.drop(f)),g!==u&&(b=(g=St(g))<0?b.dropRight(-g):b.take(g-f)),b)},Lt.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Lt.prototype.toArray=function(){return this.take(B)},_n(Lt.prototype,function(f,g){var b=/^(?:filter|find|map|reject)|While$/.test(g),O=/^(?:head|last)$/.test(g),N=M[O?"take"+(g=="last"?"Right":""):g],L=O||/^find/.test(g);N&&(M.prototype[g]=function(){var W=this.__wrapped__,Q=O?[1]:arguments,ae=W instanceof Lt,be=Q[0],Ee=ae||lt(W),xe=function(ft){var Ke=N.apply(M,so([ft],Q));return O&&He?Ke[0]:Ke};Ee&&b&&typeof be=="function"&&be.length!=1&&(ae=Ee=!1);var He=this.__chain__,Qe=!!this.__actions__.length,ct=L&&!He,Ae=ae&&!Qe;if(!L&&Ee){W=Ae?W:new Lt(this);var Me=f.apply(W,Q);return Me.__actions__.push({func:Hl,args:[xe],thisArg:u}),new ui(Me,He)}return ct&&Ae?f.apply(this,Q):(Me=this.thru(xe),ct?O?Me.value()[0]:Me.value():Me)})}),Fr(["pop","push","shift","sort","splice","unshift"],function(f){var g=Ds[f],b=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",O=/^(?:pop|shift)$/.test(f);M.prototype[f]=function(){var N=arguments;if(O&&!this.__chain__){var L=this.value();return g.apply(lt(L)?L:[],N)}return this[b](function(W){return g.apply(lt(W)?W:[],N)})}}),_n(Lt.prototype,function(f,g){var b=M[g];if(b){var O=b.name+"";er.call(Ma,O)||(Ma[O]=[]),Ma[O].push({name:g,func:b})}}),Ma[Zu(u,2).name]=[{name:"wrapper",func:u}],Lt.prototype.clone=function(){var f=new Lt(this.__wrapped__);return f.__actions__=Br(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Br(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Br(this.__views__),f},Lt.prototype.reverse=function(){if(this.__filtered__){var f=new Lt(this);f.__dir__=-1,f.__filtered__=!0}else(f=this.clone()).__dir__*=-1;return f},Lt.prototype.value=function(){var f=this.__wrapped__.value(),g=this.__dir__,b=lt(f),O=g<0,N=b?f.length:0,L=function(jt,ot,ht){for(var wn=-1,Bi=ht.length;++wn<Bi;){var ha=ht[wn],Tn=ha.size;switch(ha.type){case"drop":jt+=Tn;break;case"dropRight":ot-=Tn;break;case"take":ot=fn(ot,jt+Tn);break;case"takeRight":jt=en(jt,ot-Tn)}}return{start:jt,end:ot}}(0,N,this.__views__),W=L.start,Q=L.end,ae=Q-W,be=O?Q:W-1,Ee=this.__iteratees__,xe=Ee.length,He=0,Qe=fn(ae,this.__takeCount__);if(!b||!O&&N==ae&&Qe==ae)return ih(f,this.__actions__);var ct=[];e:for(;ae--&&He<Qe;){for(var Ae=-1,Me=f[be+=g];++Ae<xe;){var ft=Ee[Ae],Ke=ft.iteratee,dt=ft.type,Et=Ke(Me);if(dt==2)Me=Et;else if(!Et){if(dt==1)continue e;break e}}ct[He++]=Me}return ct},M.prototype.at=Sh,M.prototype.chain=function(){return lm(this)},M.prototype.commit=function(){return new ui(this.value(),this.__chain__)},M.prototype.next=function(){this.__values__===u&&(this.__values__=Rh(this.value()));var f=this.__index__>=this.__values__.length;return{done:f,value:f?u:this.__values__[this.__index__++]}},M.prototype.plant=function(f){for(var g,b=this;b instanceof qu;){var O=Un(b);O.__index__=0,O.__values__=u,g?N.__wrapped__=O:g=O;var N=O;b=b.__wrapped__}return N.__wrapped__=f,g},M.prototype.reverse=function(){var f=this.__wrapped__;if(f instanceof Lt){var g=f;return this.__actions__.length&&(g=new Lt(this)),(g=g.reverse()).__actions__.push({func:Hl,args:[Ws],thisArg:u}),new ui(g,this.__chain__)}return this.thru(Ws)},M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=function(){return ih(this.__wrapped__,this.__actions__)},M.prototype.first=M.prototype.head,Bu&&(M.prototype[Bu]=function(){return this}),M}();Jr._=yl,(p=(function(){return yl}).call(a,l,a,i))===u||(i.exports=p)}).call(this)},5161:(i,a,l)=>{var p=l(9932),u=l(7206),m=l(9199),E=l(1469);i.exports=function(w,R){return(E(w)?p:m)(w,u(R,3))}},8306:(i,a,l)=>{var p=l(3369);function u(m,E){if(typeof m!="function"||E!=null&&typeof E!="function")throw new TypeError("Expected a function");var w=function(){var R=arguments,S=E?E.apply(this,R):R[0],P=w.cache;if(P.has(S))return P.get(S);var x=m.apply(this,R);return w.cache=P.set(S,x)||P,x};return w.cache=new(u.Cache||p),w}u.Cache=p,i.exports=u},2492:(i,a,l)=>{var p=l(2980),u=l(1463)(function(m,E,w){p(m,E,w)});i.exports=u},7557:(i,a,l)=>{var p=l(9932),u=l(5990),m=l(7406),E=l(1811),w=l(8363),R=l(696),S=l(9021),P=l(6904),x=S(function(k,B){var G={};if(k==null)return G;var X=!1;B=p(B,function(j){return j=E(j,k),X||(X=j.length>1),j}),w(k,P(k),G),X&&(G=u(G,7,R));for(var F=B.length;F--;)m(G,B[F]);return G});i.exports=x},9601:(i,a,l)=>{var p=l(371),u=l(9152),m=l(5403),E=l(327);i.exports=function(w){return m(w)?p(E(w)):u(w)}},9704:(i,a,l)=>{var p=l(2908),u=l(7206),m=l(5076),E=l(1469),w=l(6612);i.exports=function(R,S,P){var x=E(R)?p:m;return P&&w(R,S,P)&&(S=void 0),x(R,u(S,3))}},479:i=>{i.exports=function(){return[]}},5062:i=>{i.exports=function(){return!1}},8601:(i,a,l)=>{var p=l(4841);i.exports=function(u){return u?(u=p(u))===1/0||u===-1/0?17976931348623157e292*(u<0?-1:1):u==u?u:0:u===0?u:0}},554:(i,a,l)=>{var p=l(8601);i.exports=function(u){var m=p(u),E=m%1;return m==m?E?m-E:m:0}},4841:(i,a,l)=>{var p=l(7561),u=l(3218),m=l(3448),E=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,R=/^0o[0-7]+$/i,S=parseInt;i.exports=function(P){if(typeof P=="number")return P;if(m(P))return NaN;if(u(P)){var x=typeof P.valueOf=="function"?P.valueOf():P;P=u(x)?x+"":x}if(typeof P!="string")return P===0?P:+P;P=p(P);var k=w.test(P);return k||R.test(P)?S(P.slice(2),k?2:8):E.test(P)?NaN:+P}},9881:(i,a,l)=>{var p=l(8363),u=l(1704);i.exports=function(m){return p(m,u(m))}},9833:(i,a,l)=>{var p=l(531);i.exports=function(u){return u==null?"":p(u)}},2628:(i,a,l)=>{var p=l(7415),u=l(3674);i.exports=function(m){return m==null?[]:p(m,u(m))}},2527:(i,a,l)=>{a.TypedEmitter=l(7187).EventEmitter},7249:(i,a,l)=>{l.r(a),l.d(a,{AccessDeniedReason:()=>S.fEx,AccountStatus:()=>S.dpb,AddonDependencyFragmentDoc:()=>S.T0E,AddonFragmentDoc:()=>S.d4U,AddonSortFields:()=>S.nwm,AggregationFunction:()=>S.Ijf,Alignment:()=>S.v2N,ApiKeySortFields:()=>S.Mbo,ApiKeyType:()=>S.E34,ApplySubscriptionDocument:()=>S.Bkk,ApplySubscriptionFragmentDoc:()=>S.Y92,ArchiveCustomerDocument:()=>S.m06,Auth0Region:()=>S.nBi,BOOLEAN_DEFAULT_FALLBACK_ENTITLEMENT:()=>P,BillingAnchor:()=>S.PLi,BillingCadence:()=>S.yTz,BillingModel:()=>S.FzK,BillingPeriod:()=>S.tvV,BillingVendorIdentifier:()=>S.ugv,CancelSubscriptionDocument:()=>S.x3v,CancelSubscriptionUpdatesDocument:()=>S.jAf,ChangeType:()=>S.u4I,CheckoutConfigurationFragmentDoc:()=>S.bEP,CheckoutStateFragmentDoc:()=>S.weZ,ConditionOperation:()=>S.uS8,CouponFragmentDoc:()=>S.zdd,CouponSortFields:()=>S.i2A,CouponStatus:()=>S.K79,CouponType:()=>S.$i2,CreateSubscriptionDocument:()=>S.WJn,Currency:()=>S.Fa6,CustomerFragmentDoc:()=>S.hk_,CustomerModel:()=>B,CustomerPortalBillingInformationFragmentDoc:()=>S._d$,CustomerPortalConfigurationFragmentDoc:()=>S.NSU,CustomerPortalEntitlementFragmentDoc:()=>S.Eph,CustomerPortalFragmentDoc:()=>S.g31,CustomerPortalPromotionalEntitlementFragmentDoc:()=>S.u9g,CustomerPortalSubscriptionAddonFragmentDoc:()=>S.aqW,CustomerPortalSubscriptionFragmentDoc:()=>S.LBz,CustomerPortalSubscriptionPriceFragmentDoc:()=>S.qYx,CustomerPortalSubscriptionScheduledUpdateDataFragmentDoc:()=>S.X$1,CustomerResourceFragmentDoc:()=>S.OoB,CustomerResourceSortFields:()=>S.pDu,CustomerSortFields:()=>S.rpU,CustomerStatisticsFragmentDoc:()=>S.fYe,CustomerSubscriptionSortFields:()=>S.Pg9,CustomerWithSubscriptionsFragmentDoc:()=>S.GBW,Department:()=>S.yEZ,DetachCustomerPaymentMethodDocument:()=>S.Wky,DiscountDurationType:()=>S.C2e,DiscountType:()=>S.Lbh,EntitlementBehavior:()=>S.AVk,EntitlementFragmentDoc:()=>S.cUI,EntitlementResetPeriod:()=>S.XHu,EntitlementUsageUpdatedFragmentDoc:()=>S.cG4,EntitlementsUpdatedPayloadFragmentDoc:()=>S.bII,EntitySelectionMode:()=>S.FT8,EnvironmentProvisionStatus:()=>S.IZr,EnvironmentSortFields:()=>S.$BG,EnvironmentType:()=>S.Qj0,ErrorCode:()=>S.jKp,EstimateSubscriptionDocument:()=>S.m5b,EstimateSubscriptionUpdateDocument:()=>S.wO5,EventActor:()=>S.Zr9,EventEntityType:()=>S.g3t,EventLogSortFields:()=>S.m72,EventLogType:()=>S.i3Z,ExperimentGroupType:()=>S.zOd,ExperimentSortFields:()=>S.o_I,ExperimentStatus:()=>S.bWm,FeatureFragmentDoc:()=>S.o5f,FeatureSortFields:()=>S.GAT,FeatureStatus:()=>S.iKc,FeatureType:()=>S.Tex,FontVariantFragmentDoc:()=>S.XsQ,FontWeight:()=>S.U9t,GetActiveSubscriptionsDocument:()=>S.OpC,GetActiveSubscriptionsListDocument:()=>S.bgy,GetCheckoutStateDocument:()=>S.jPD,GetCouponsDocument:()=>S.Q$1,GetCustomerByIdDocument:()=>S.ZeH,GetCustomerPortalByRefIdDocument:()=>S.$Av,GetCustomerStatisticsDocument:()=>S.TpL,GetEntitlementDocument:()=>S.pWb,GetEntitlementsDocument:()=>S.roX,GetMockPaywallDocument:()=>S._xu,GetPaywallDocument:()=>S.RVX,GetProductsDocument:()=>S.Fd7,GetSdkConfigurationDocument:()=>S.N9K,GetSubscriptionDocument:()=>S.do1,GetUsageHistoryDocument:()=>S.K0T,GrantPromotionalEntitlementsDocument:()=>S.Mal,HookSortFields:()=>S.uMn,HookStatus:()=>S.qBr,ImmediateSubscriptionPreviewInvoiceFragmentDoc:()=>S.DFP,ImportCustomerBulkDocument:()=>S.m76,ImportCustomerDocument:()=>S.$jJ,ImportIntegrationTaskSortFields:()=>S.B8X,ImportSubscriptionsBulkDocument:()=>S.N5j,IntegrationSortFields:()=>S.Us3,InvoiceLineItemType:()=>S.isD,LayoutConfigurationFragmentDoc:()=>S.nN6,LogLevel:()=>m,METERED_DEFAULT_FALLBACK_ENTITLEMENT:()=>k,MemberSortFields:()=>S.Kyg,MemberStatus:()=>S.XY6,MeterType:()=>S.puT,MigrateSubscriptionToLatestDocument:()=>S.bGN,MockPaywallAddonDependencyFragmentDoc:()=>S.$Bh,MockPaywallAddonFragmentDoc:()=>S.hVT,MockPaywallPackageEntitlementFragmentDoc:()=>S.k8_,MockPaywallPlanCompatiblePackageGroupsFragmentDoc:()=>S.wn5,MockPaywallPlanFragmentDoc:()=>S.lgL,MockPaywallPriceFragmentDoc:()=>S.VeJ,MonthlyAccordingTo:()=>S.pSI,NUMERIC_DEFAULT_FALLBACK_ENTITLEMENT:()=>x,OnEntitlementsUpdatedDocument:()=>S.Bve,OnPackagePublishedDocument:()=>S.zBW,OnUsageUpdatedDocument:()=>S.LpH,OverageBillingPeriod:()=>S.q5V,OveragePriceFragmentDoc:()=>S.BoX,PackageDtoSortFields:()=>S.zv6,PackageEntitlementFragmentDoc:()=>S.RzF,PackageEntitlementSortFields:()=>S.iI3,PackageGroupSortFields:()=>S.jCI,PackageGroupStatus:()=>S.OeJ,PackagePublishedPayloadFragmentDoc:()=>S.ab2,PackageStatus:()=>S.TVs,PaymentCollection:()=>S.QdX,PaymentCollectionMethod:()=>S.Kf7,PaymentMethodType:()=>S.LtK,PaywallCalculatedPricePointsFragmentDoc:()=>S.fvX,PaywallConfigurationFragmentDoc:()=>S.r4r,PaywallCurrencyFragmentDoc:()=>S.FcI,PaywallFragmentDoc:()=>S.qw4,PlanChangeType:()=>S.Cc7,PlanCompatiblePackageGroupsFragmentDoc:()=>S.kd9,PlanFragmentDoc:()=>S.bOA,PlanSortFields:()=>S.qXR,PreviewNextInvoiceDocument:()=>S.yGq,PreviewSubscriptionDocument:()=>S.ZD9,PriceFragmentDoc:()=>S.wEB,PriceSortFields:()=>S.YGW,PriceTierFragmentDoc:()=>S.Chb,PricingType:()=>S._HY,ProductFragmentDoc:()=>S.cMT,ProductSortFields:()=>S.p_C,PromotionalEntitlementFragmentDoc:()=>S.Ehw,PromotionalEntitlementPeriod:()=>S.JkE,PromotionalEntitlementSortFields:()=>S.ku9,PromotionalEntitlementStatus:()=>S.$Vq,ProrationBehavior:()=>S.QZw,ProvisionCustomerDocument:()=>S.q6C,ProvisionCustomerFragmentDoc:()=>S.YlF,ProvisionSubscriptionDocument:()=>S.rDA,ProvisionSubscriptionFragmentDoc:()=>S.CjA,ProvisionSubscriptionStatus:()=>S.u0j,PublishMigrationType:()=>S.Zam,ReportEntitlementCheckRequestedDocument:()=>S.JDz,ReportEventDocument:()=>S.ZSL,ReportUsageBulkDocument:()=>S.dO5,ReportUsageDocument:()=>S.K5h,ReportUsageFragmentDoc:()=>S.UK7,ResetPeriodConfigurationFragmentDoc:()=>S.JyR,RevokePromotionalEntitlementDocument:()=>S.GHz,ScheduleStrategy:()=>S.nM6,ScheduleVariablesFragmentDoc:()=>S.zWW,SlimCustomerFragmentDoc:()=>S.bj8,SlimSubscriptionFragmentDoc:()=>S.bGH,SlimSubscriptionFragmentV2FragmentDoc:()=>S.cTO,SortDirection:()=>S.SrV,SortNulls:()=>S.Xm9,SourceType:()=>S.PO0,SubscriptionAddonSortFields:()=>S.ueJ,SubscriptionCancelReason:()=>S.w1y,SubscriptionCancellationAction:()=>S.c06,SubscriptionCancellationTime:()=>S.lS0,SubscriptionDecisionStrategy:()=>S.ird,SubscriptionEndSetup:()=>S._oj,SubscriptionEntitlementSortFields:()=>S.e1Q,SubscriptionFragmentDoc:()=>S.Ugm,SubscriptionFutureUpdateDataFragmentDoc:()=>S.hvo,SubscriptionInvoiceBillingReason:()=>S.tV1,SubscriptionInvoiceFragmentDoc:()=>S.FL0,SubscriptionInvoicePreviewFragmentDoc:()=>S.Dxn,SubscriptionInvoiceStatus:()=>S.G6j,SubscriptionMigrationTaskSortFields:()=>S.eSW,SubscriptionMigrationTime:()=>S.DWP,SubscriptionPreviewFragmentDoc:()=>S.zjf,SubscriptionPreviewInvoiceFragmentDoc:()=>S.Eam,SubscriptionPreviewV2FragmentDoc:()=>S.URA,SubscriptionPriceSortFields:()=>S.yBL,SubscriptionScheduleStatus:()=>S.cUf,SubscriptionScheduleType:()=>S.YVG,SubscriptionScheduledUpdateDataFragmentDoc:()=>S.J5K,SubscriptionStartSetup:()=>S.nOi,SubscriptionStatus:()=>S.yhH,SyncStatus:()=>S.wRo,TaskStatus:()=>S.hYU,TaskType:()=>S.UAI,TiersMode:()=>S.PNd,TotalPriceFragmentDoc:()=>S.N9N,TransferSubscriptionDocument:()=>S.$02,TrialPeriodUnits:()=>S.p13,TypographyConfigurationFragmentDoc:()=>S.mGS,UnarchiveCustomerDocument:()=>S._gQ,UnitTransformationRound:()=>S.Dfv,UpdateCustomerDocument:()=>S.eKV,UpdateSubscriptionDocument:()=>S.EQD,UsageHistoryFragmentDoc:()=>S.QNm,UsageMeasurementSortFields:()=>S.Buv,UsageUpdateBehavior:()=>S._yy,UsageUpdatedFragmentDoc:()=>S.l3m,VendorIdentifier:()=>S.FoD,WeeklyAccordingTo:()=>S.rCU,WidgetType:()=>S.l9N,YearlyAccordingTo:()=>S.EOH,__esModule:()=>S.X$v,default:()=>uE,getSdk:()=>S.mKo});var p={};l.r(p),l.d(p,{FunctionToString:()=>Ha,InboundFilters:()=>Wa});var u={};l.r(u),l.d(u,{Breadcrumbs:()=>Za,Dedupe:()=>rn,GlobalHandlers:()=>fa,HttpContext:()=>Qs,LinkedErrors:()=>Ys,TryCatch:()=>Xa});var m,E=l(4721),w=l.n(E);(function(h){h.ALL="ALL",h.NONE="NONE",h.LOG="LOG",h.ERROR="ERROR"})(m||(m={}));var R=function(){function h(s,c){this.logger=s,this.logLevel=c}return h.prototype.error=function(s,c){this.logLevel!==m.NONE&&this.logger.error("[Stigg] ".concat(s),c||{})},h.prototype.log=function(s,c){w()([m.ERROR,m.NONE],this.logLevel)||this.logger.log("[Stigg] ".concat(s),c||{})},h.prototype.debug=function(s,c){w()([m.LOG,m.ALL],this.logLevel)&&this.logger.debug("[Stigg] ".concat(s),c||{})},h}(),S=l(890),P={isFallback:!0,hasAccess:!1,accessDeniedReason:S.fEx.Unknown},x={isFallback:!0,hasAccess:!1,isUnlimited:!1,accessDeniedReason:S.fEx.Unknown},k={isFallback:!0,hasAccess:!1,isUnlimited:!1,currentUsage:0,requestedUsage:1,accessDeniedReason:S.fEx.Unknown},B=function(){function h(s){Object.assign(this,s)}return h.prototype.getActiveSubscriptions=function(){return this.subscriptions.filter(function(s){return s.status===S.yhH.Active})},h.prototype.getActiveTrials=function(){return this.subscriptions.filter(function(s){return s.status===S.yhH.InTrial})},h.prototype.getActivePromotionalEntitlements=function(){return this.promotionalEntitlements.filter(function(s){return s.status===S.$Vq.Active})},h}(),G=l(6486);const X=function(){function h(s,c){this.client=s,this.edgeApiClient=c}return h.prototype.getSdkConfiguration=function(){return this.edgeApiClient?this.edgeApiClient.getSdkConfiguration():this.client.query({query:S.N9K})},h}();var F=function(){return F=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},F.apply(this,arguments)},j=function(){function h(s,c){this.client=s,this.edgeApiClient=c}return h.prototype.getPaywall=function(s){var c=s.productId,d=s.customerId,v=s.resourceId,y=s.context,_=s.billingCountryCode,T=s.includeHiddenPlans;return!d&&this.edgeApiClient?this.edgeApiClient.getPaywall(c,_,T):this.client.query({query:S.RVX,fetchPolicy:"no-cache",variables:{input:F(F(F(F(F(F({},c?{productId:c}:{}),d?{customerId:d}:{}),v?{resourceId:v}:{}),y?{context:y}:{}),_?{billingCountryCode:_}:{}),T?{includeHiddenPlans:T}:{})}})},h}();const H=j;var re=function(h,s,c,d){return new(c||(c=Promise))(function(v,y){function _(C){try{I(d.next(C))}catch(A){y(A)}}function T(C){try{I(d.throw(C))}catch(A){y(A)}}function I(C){var A;C.done?v(C.value):(A=C.value,A instanceof c?A:new c(function(D){D(A)})).then(_,T)}I((d=d.apply(h,[])).next())})},te=function(h,s){var c,d,v,y,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(I){return function(C){return function(A){if(c)throw new TypeError("Generator is already executing.");for(;_;)try{if(c=1,d&&(v=2&A[0]?d.return:A[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,A[1])).done)return v;switch(d=0,v&&(A=[2&A[0],v.value]),A[0]){case 0:case 1:v=A;break;case 4:return _.label++,{value:A[1],done:!1};case 5:_.label++,d=A[1],A=[0];continue;case 7:A=_.ops.pop(),_.trys.pop();continue;default:if(!((v=(v=_.trys).length>0&&v[v.length-1])||A[0]!==6&&A[0]!==2)){_=0;continue}if(A[0]===3&&(!v||A[1]>v[0]&&A[1]<v[3])){_.label=A[1];break}if(A[0]===6&&_.label<v[1]){_.label=v[1],v=A;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(A);break}v[2]&&_.ops.pop(),_.trys.pop();continue}A=s.call(h,_)}catch(D){A=[6,D],d=0}finally{c=v=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([I,C])}}},fe=function(){function h(s,c){this.client=s,this.edgeApiClient=c}return h.prototype.getCustomer=function(s){return this.client.query({query:S.ZeH,variables:{input:{customerId:s}},fetchPolicy:"no-cache"})},h.prototype.getActiveSubscriptions=function(s,c){return re(this,void 0,void 0,function(){return te(this,function(d){return[2,this.client.query({query:S.OpC,variables:{input:(0,G.isArray)(c)?{customerId:s,resourceIds:c}:{customerId:s,resourceId:c}},fetchPolicy:"no-cache"})]})})},h.prototype.getActiveSubscriptionsList=function(s,c){return re(this,void 0,void 0,function(){return te(this,function(d){return this.edgeApiClient?[2,this.edgeApiClient.getActiveSubscriptionsList(s,c)]:[2,this.client.query({query:S.bgy,variables:{input:(0,G.isArray)(c)?{customerId:s,resourceIds:c}:{customerId:s,resourceId:c}},fetchPolicy:"no-cache"})]})})},h.prototype.getSubscription=function(s){return re(this,void 0,void 0,function(){return te(this,function(c){return[2,this.client.query({query:S.do1,variables:{input:{subscriptionId:s}},fetchPolicy:"no-cache"})]})})},h.prototype.getCustomerPortal=function(s,c,d){return this.client.query({query:S.$Av,variables:{input:{customerId:s,resourceId:c,productId:d}},fetchPolicy:"no-cache"})},h.prototype.fetchUsageHistory=function(s){var c=s.customerId,d=s.resourceId,v=s.endDate,y=s.startDate,_=s.featureId;return re(this,void 0,void 0,function(){return te(this,function(T){return[2,this.client.query({query:S.K0T,variables:{usageHistoryInput:{customerRefId:c,featureRefId:_,resourceRefId:d,startDate:y,endDate:v||new Date}},fetchPolicy:"no-cache"})]})})},h}();const Te=fe,Ce=function(){function h(s){this.client=s}return h.prototype.getCoupons=function(){return this.client.query({query:S.Q$1,fetchPolicy:"no-cache"})},h}();var $=function(){return $=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},$.apply(this,arguments)},J=function(){function h(s){this.client=s}return h.prototype.applySubscription=function(s){var c=s.customerId,d=s.payingCustomerId,v=s.planId,y=s.paymentMethodId,_=s.addons,T=s.billableFeatures,I=s.billingInformation,C=s.billingCountryCode,A=s.billingId,D=s.billingPeriod,U=s.metadata,q=s.promotionCode,Z=s.resourceId,z=s.skipTrial,ne=s.startDate,he=s.unitQuantity,Le=s.scheduleStrategy;return this.client.mutate({mutation:S.Bkk,variables:{input:{customerId:c,payingCustomerId:d,planId:v,paymentMethodId:y,startDate:ne,addons:_,billingId:A,billingPeriod:D,unitQuantity:he,billableFeatures:T,additionalMetaData:U,resourceId:Z,skipTrial:z,promotionCode:q,billingInformation:this.mapBillingInformation(I),billingCountryCode:C,scheduleStrategy:Le}}})},h.prototype.checkoutState=function(s){var c=s.customerId,d=s.resourceId,v=s.planId,y=s.billingCountryCode;return this.client.query({query:S.jPD,fetchPolicy:"no-cache",variables:{input:$($({planId:v,customerId:c},d?{resourceId:d}:{}),y?{billingCountryCode:y}:{})}})},h.prototype.mapBillingInformation=function(s){if(s)return{taxRateIds:s==null?void 0:s.taxRateIds,billingAddress:s==null?void 0:s.billingAddress}},h}();const ge=J;var ee=function(h,s,c,d){return new(c||(c=Promise))(function(v,y){function _(C){try{I(d.next(C))}catch(A){y(A)}}function T(C){try{I(d.throw(C))}catch(A){y(A)}}function I(C){var A;C.done?v(C.value):(A=C.value,A instanceof c?A:new c(function(D){D(A)})).then(_,T)}I((d=d.apply(h,[])).next())})},Ie=function(h,s){var c,d,v,y,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(I){return function(C){return function(A){if(c)throw new TypeError("Generator is already executing.");for(;_;)try{if(c=1,d&&(v=2&A[0]?d.return:A[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,A[1])).done)return v;switch(d=0,v&&(A=[2&A[0],v.value]),A[0]){case 0:case 1:v=A;break;case 4:return _.label++,{value:A[1],done:!1};case 5:_.label++,d=A[1],A=[0];continue;case 7:A=_.ops.pop(),_.trys.pop();continue;default:if(!((v=(v=_.trys).length>0&&v[v.length-1])||A[0]!==6&&A[0]!==2)){_=0;continue}if(A[0]===3&&(!v||A[1]>v[0]&&A[1]<v[3])){_.label=A[1];break}if(A[0]===6&&_.label<v[1]){_.label=v[1],v=A;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(A);break}v[2]&&_.ops.pop(),_.trys.pop();continue}A=s.call(h,_)}catch(D){A=[6,D],d=0}finally{c=v=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([I,C])}}},we=function(){function h(s){this.client=s}return h.prototype.estimateSubscription=function(s){var c,d;return ee(this,void 0,void 0,function(){return Ie(this,function(v){return[2,this.client.mutate({mutation:S.m5b,variables:{input:{resourceId:s.resourceId,planId:s.planId,customerId:s.customerId,startDate:s.startDate,addons:s.addons,billingPeriod:s.billingPeriod,priceUnitAmount:s.unitQuantity,billableFeatures:s.billableFeatures,billingInformation:{taxRateIds:(c=s==null?void 0:s.billingInformation)===null||c===void 0?void 0:c.taxRateIds,taxPercentage:(d=s==null?void 0:s.billingInformation)===null||d===void 0?void 0:d.taxPercentage},promotionCode:s.promotionCode,billingCountryCode:s.billingCountryCode,skipTrial:s.skipTrial}}})]})})},h.prototype.estimateSubscriptionUpdate=function(s){return ee(this,void 0,void 0,function(){return Ie(this,function(c){return[2,this.client.mutate({mutation:S.wO5,variables:{input:{subscriptionId:s.subscriptionId,unitQuantity:s.unitQuantity,billableFeatures:s.billableFeatures,addons:s.addons,promotionCode:s.promotionCode}}})]})})},h.prototype.previewSubscription=function(s){var c,d,v;return ee(this,void 0,void 0,function(){return Ie(this,function(y){return[2,this.client.mutate({mutation:S.ZD9,fetchPolicy:"no-cache",variables:{input:{planId:s.planId,customerId:s.customerId,resourceId:s.resourceId,startDate:s.startDate,addons:s.addons,billingPeriod:s.billingPeriod,billableFeatures:s.billableFeatures,promotionCode:s.promotionCode,scheduleStrategy:s.scheduleStrategy,billingCountryCode:s.billingCountryCode,billingInformation:{taxRateIds:(c=s==null?void 0:s.billingInformation)===null||c===void 0?void 0:c.taxRateIds,taxPercentage:(d=s==null?void 0:s.billingInformation)===null||d===void 0?void 0:d.taxPercentage,billingAddress:(v=s==null?void 0:s.billingInformation)===null||v===void 0?void 0:v.billingAddress}}}})]})})},h}();const Be=we;var st=function(){return st=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},st.apply(this,arguments)},At=function(){function h(s){this.client=s}return h.prototype.getMockPaywall=function(s){var c=s.productId,d=s.customerId,v=s.context;return this.client.query({query:S._xu,fetchPolicy:"no-cache",variables:{input:st(st(st({},c?{productId:c}:{}),d?{customerId:d}:{}),v?{context:v}:{})}})},h}();const Ar=At,Ir=function(h,s){this.sdkConfiguration=new X(h,s),this.paywall=new H(h,s),this.subscriptions=new ge(h),this.mockPaywall=new Ar(h),this.customers=new Te(h,s),this.coupons=new Ce(h),this.subscriptionEstimations=new Be(h)};var sr=l(1609),Mt=l.n(sr),ur=l(2492),Or=l.n(ur),Kr=S.PO0.JsClientSdk,pr="js-client-sdk",Wt=["localhost","127.0.0.1","::1"];function xr(h){var s=new URL(h);return Wt.includes(s.hostname)?s.port="3060":s.hostname="edge.".concat(s.hostname),s.toString().slice(0,-1)}function Er(h){var s=h.customerId;if(!s||Mt()(s))throw new Error("You must set customer ID first, use setCustomerId function or pass it via the constructor");return s}var Yr=function(h,s){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(c[v]=d[v])},Yr(h,s)};function _t(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function c(){this.constructor=h}Yr(h,s),h.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}var le=function(){return le=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},le.apply(this,arguments)};function gn(h,s){var c={};for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&s.indexOf(d)<0&&(c[d]=h[d]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var v=0;for(d=Object.getOwnPropertySymbols(h);v<d.length;v++)s.indexOf(d[v])<0&&Object.prototype.propertyIsEnumerable.call(h,d[v])&&(c[d[v]]=h[d[v]])}return c}function Qr(h,s,c,d){return new(c||(c=Promise))(function(v,y){function _(C){try{I(d.next(C))}catch(A){y(A)}}function T(C){try{I(d.throw(C))}catch(A){y(A)}}function I(C){var A;C.done?v(C.value):(A=C.value,A instanceof c?A:new c(function(D){D(A)})).then(_,T)}I((d=d.apply(h,[])).next())})}function Xr(h,s){var c,d,v,y,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(I){return function(C){return function(A){if(c)throw new TypeError("Generator is already executing.");for(;_;)try{if(c=1,d&&(v=2&A[0]?d.return:A[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,A[1])).done)return v;switch(d=0,v&&(A=[2&A[0],v.value]),A[0]){case 0:case 1:v=A;break;case 4:return _.label++,{value:A[1],done:!1};case 5:_.label++,d=A[1],A=[0];continue;case 7:A=_.ops.pop(),_.trys.pop();continue;default:if(!((v=(v=_.trys).length>0&&v[v.length-1])||A[0]!==6&&A[0]!==2)){_=0;continue}if(A[0]===3&&(!v||A[1]>v[0]&&A[1]<v[3])){_.label=A[1];break}if(A[0]===6&&_.label<v[1]){_.label=v[1],v=A;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(A);break}v[2]&&_.ops.pop(),_.trys.pop();continue}A=s.call(h,_)}catch(D){A=[6,D],d=0}finally{c=v=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([I,C])}}}function ti(h,s,c){if(c||arguments.length===2)for(var d,v=0,y=s.length;v<y;v++)!d&&v in s||(d||(d=Array.prototype.slice.call(s,0,v)),d[v]=s[v]);return h.concat(d||Array.prototype.slice.call(s))}var rr=function(h,s){return rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(c[v]=d[v])},rr(h,s)},Rr="Invariant Violation",Rn=Object.setPrototypeOf,it=Rn===void 0?function(h,s){return h.__proto__=s,h}:Rn,qe=function(h){function s(c){c===void 0&&(c=Rr);var d=h.call(this,typeof c=="number"?Rr+": "+c+" (see https://github.com/apollographql/invariant-packages)":c)||this;return d.framesToPop=1,d.name=Rr,it(d,s.prototype),d}return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function v(){this.constructor=c}rr(c,d),c.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)}(s,h),s}(Error);function ye(h,s){if(!h)throw new qe(s)}var zt=["debug","log","warn","error","silent"],It=zt.indexOf("log");function Gn(h){return function(){if(zt.indexOf(h)>=It){var s=console[h]||console.log;return s.apply(console,arguments)}}}function mt(h){try{return h()}catch{}}(function(h){h.debug=Gn("debug"),h.log=Gn("log"),h.warn=Gn("warn"),h.error=Gn("error")})(ye||(ye={}));const kn=mt(function(){return globalThis})||mt(function(){return window})||mt(function(){return self})||mt(function(){return l.g})||mt(function(){return Function("return this")()});var Lr="__",ce=[Lr,Lr].join("DEV");const K=function(){try{return!!__DEV__}catch{return Object.defineProperty(kn,ce,{value:mt(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),kn[ce]}}();function V(h){try{return h()}catch{}}var Y=V(function(){return globalThis})||V(function(){return window})||V(function(){return self})||V(function(){return l.g})||V(function(){return Function("return this")()}),ve=!1;function oe(h){return Array.isArray(h)&&h.length>0}!Y||V(function(){return"production"})||V(function(){return process})||(Object.defineProperty(Y,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),ve=!0),l(143).H,ve&&(delete Y.process,ve=!1),__DEV__?ye(typeof K=="boolean",K):ye(typeof K=="boolean",38);var Pe=function(h){function s(c){var d,v,y=c.graphQLErrors,_=c.clientErrors,T=c.networkError,I=c.errorMessage,C=c.extraInfo,A=h.call(this,I)||this;return A.graphQLErrors=y||[],A.clientErrors=_||[],A.networkError=T||null,A.message=I||(v="",(oe((d=A).graphQLErrors)||oe(d.clientErrors))&&(d.graphQLErrors||[]).concat(d.clientErrors||[]).forEach(function(D){var U=D?D.message:"Error message not found.";v+=U+`
`}),d.networkError&&(v+=d.networkError.message+`
`),v=v.replace(/\n$/,"")),A.extraInfo=C,A.__proto__=s.prototype,A}return _t(s,h),s}(Error),me=(l(1905),l(4139)),ue=fetch,rt=l.n(me)()(fetch,{retryOn:function(h,s,c){return!(h>5)&&(s!==null||!(c!=null&&c.status)||c.status>=500)},retryDelay:function(h){return 1e3*Math.pow(2,h)}}),ze=function(){function h(s,c){this.config=s,this.dynamicData=c}return h.create=function(s,c){return s.enableEdge?new h(s,c):null},h.prototype.getPaywall=function(s,c,d){var v=s?"/p/".concat(s):"",y=c?"billingCountryCode=".concat(c):"",_=d?"&includeHiddenPlans=".concat(d):"";return this.get("/v1".concat(v,"/paywall.json?").concat(y).concat(_))},h.prototype.getEntitlements=function(s,c){var d=c?"?resourceId=".concat(c):"";return this.get("/v1/c/".concat(s,"/entitlements.json").concat(d))},h.prototype.getActiveSubscriptionsList=function(s,c){var d=new URLSearchParams;(0,G.isString)(c)?d.set("resourceId",c):(0,G.isArray)(c)&&c.forEach(function(y){return d.append("resourceIds",y)});var v="/v1/c/".concat(s,"/subscriptions.json?").concat(d.toString());return this.get(v)},h.prototype.getSdkConfiguration=function(){return this.get("/v1/config/client-sdk-configuration.json")},h.prototype.get=function(s){return c=this,d=void 0,y=function(){var _,T,I,C,A;return function(D,U){var q,Z,z,ne,he={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return ne={next:Le(0),throw:Le(1),return:Le(2)},typeof Symbol=="function"&&(ne[Symbol.iterator]=function(){return this}),ne;function Le(Xe){return function(at){return function(Re){if(q)throw new TypeError("Generator is already executing.");for(;he;)try{if(q=1,Z&&(z=2&Re[0]?Z.return:Re[0]?Z.throw||((z=Z.return)&&z.call(Z),0):Z.next)&&!(z=z.call(Z,Re[1])).done)return z;switch(Z=0,z&&(Re=[2&Re[0],z.value]),Re[0]){case 0:case 1:z=Re;break;case 4:return he.label++,{value:Re[1],done:!1};case 5:he.label++,Z=Re[1],Re=[0];continue;case 7:Re=he.ops.pop(),he.trys.pop();continue;default:if(!((z=(z=he.trys).length>0&&z[z.length-1])||Re[0]!==6&&Re[0]!==2)){he=0;continue}if(Re[0]===3&&(!z||Re[1]>z[0]&&Re[1]<z[3])){he.label=Re[1];break}if(Re[0]===6&&he.label<z[1]){he.label=z[1],z=Re;break}if(z&&he.label<z[2]){he.label=z[2],he.ops.push(Re);break}z[2]&&he.ops.pop(),he.trys.pop();continue}Re=U.call(D,he)}catch(Ge){Re=[6,Ge],Z=0}finally{q=z=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}([Xe,at])}}}(this,function(D){switch(D.label){case 0:return(_=new Headers).append("X-API-KEY",this.config.apiKey),_.append("X-API-VERSION","1"),_.append("source",Kr),(T=this.dynamicData.customerToken)&&_.append("X-CUSTOMER-KEY",T),[4,rt("".concat(this.config.baseEdgeUri).concat(s),{headers:_,method:"GET"})];case 1:if(!(I=D.sent()).ok)throw(C=new Error("Failed to fetch data from Edge. Reason: ".concat(I.statusText))).response=I,C;return[4,I.json()];case 2:if(A=D.sent(),!Mt()(A.errors))throw new Pe({graphQLErrors:A.errors});return[2,A]}})},new((v=void 0)||(v=Promise))(function(_,T){function I(D){try{A(y.next(D))}catch(U){T(U)}}function C(D){try{A(y.throw(D))}catch(U){T(U)}}function A(D){var U;D.done?_(D.value):(U=D.value,U instanceof v?U:new v(function(q){q(U)})).then(I,C)}A((y=y.apply(c,d||[])).next())});var c,d,v,y},h}();function Yt(h,s){(s==null||s>h.length)&&(s=h.length);for(var c=0,d=new Array(s);c<s;c++)d[c]=h[c];return d}function ie(h,s){for(var c=0;c<s.length;c++){var d=s[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(h,d.key,d)}}function Zt(h,s,c){return s&&ie(h.prototype,s),c&&ie(h,c),h}var br=function(){return typeof Symbol=="function"},$r=function(h){return br()&&!!Symbol[h]},ri=function(h){return $r(h)?Symbol[h]:"@@"+h};br()&&!$r("observable")&&(Symbol.observable=Symbol("observable"));var Qt=ri("iterator"),$n=ri("observable"),$i=ri("species");function pi(h,s){var c=h[s];if(c!=null){if(typeof c!="function")throw new TypeError(c+" is not a function");return c}}function Zr(h){var s=h.constructor;return s!==void 0&&(s=s[$i])===null&&(s=void 0),s!==void 0?s:Kt}function Jt(h){return h instanceof Kt}function cr(h){cr.log?cr.log(h):setTimeout(function(){throw h})}function ni(h){Promise.resolve().then(function(){try{h()}catch(s){cr(s)}})}function de(h){var s=h._cleanup;if(s!==void 0&&(h._cleanup=void 0,s))try{if(typeof s=="function")s();else{var c=pi(s,"unsubscribe");c&&c.call(s)}}catch(d){cr(d)}}function Dn(h){h._observer=void 0,h._queue=void 0,h._state="closed"}function Ii(h,s,c){h._state="running";var d=h._observer;try{var v=pi(d,s);switch(s){case"next":v&&v.call(d,c);break;case"error":if(Dn(h),!v)throw c;v.call(d,c);break;case"complete":Dn(h),v&&v.call(d)}}catch(y){cr(y)}h._state==="closed"?de(h):h._state==="running"&&(h._state="ready")}function Ur(h,s,c){if(h._state!=="closed"){if(h._state!=="buffering")return h._state!=="ready"?(h._state="buffering",h._queue=[{type:s,value:c}],void ni(function(){return function(d){var v=d._queue;if(v){d._queue=void 0,d._state="ready";for(var y=0;y<v.length&&(Ii(d,v[y].type,v[y].value),d._state!=="closed");++y);}}(h)})):void Ii(h,s,c);h._queue.push({type:s,value:c})}}var Oi=function(){function h(s,c){this._cleanup=void 0,this._observer=s,this._queue=void 0,this._state="initializing";var d=new xa(this);try{this._cleanup=c.call(void 0,d)}catch(v){d.error(v)}this._state==="initializing"&&(this._state="ready")}return h.prototype.unsubscribe=function(){this._state!=="closed"&&(Dn(this),de(this))},Zt(h,[{key:"closed",get:function(){return this._state==="closed"}}]),h}(),xa=function(){function h(c){this._subscription=c}var s=h.prototype;return s.next=function(c){Ur(this._subscription,"next",c)},s.error=function(c){Ur(this._subscription,"error",c)},s.complete=function(){Ur(this._subscription,"complete")},Zt(h,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),h}(),Kt=function(){function h(c){if(!(this instanceof h))throw new TypeError("Observable cannot be called as a function");if(typeof c!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=c}var s=h.prototype;return s.subscribe=function(c){return typeof c=="object"&&c!==null||(c={next:c,error:arguments[1],complete:arguments[2]}),new Oi(c,this._subscriber)},s.forEach=function(c){var d=this;return new Promise(function(v,y){if(typeof c=="function")var _=d.subscribe({next:function(I){try{c(I,T)}catch(C){y(C),_.unsubscribe()}},error:y,complete:v});else y(new TypeError(c+" is not a function"));function T(){_.unsubscribe(),v()}})},s.map=function(c){var d=this;if(typeof c!="function")throw new TypeError(c+" is not a function");return new(Zr(this))(function(v){return d.subscribe({next:function(y){try{y=c(y)}catch(_){return v.error(_)}v.next(y)},error:function(y){v.error(y)},complete:function(){v.complete()}})})},s.filter=function(c){var d=this;if(typeof c!="function")throw new TypeError(c+" is not a function");return new(Zr(this))(function(v){return d.subscribe({next:function(y){try{if(!c(y))return}catch(_){return v.error(_)}v.next(y)},error:function(y){v.error(y)},complete:function(){v.complete()}})})},s.reduce=function(c){var d=this;if(typeof c!="function")throw new TypeError(c+" is not a function");var v=Zr(this),y=arguments.length>1,_=!1,T=arguments[1],I=T;return new v(function(C){return d.subscribe({next:function(A){var D=!_;if(_=!0,!D||y)try{I=c(I,A)}catch(U){return C.error(U)}else I=A},error:function(A){C.error(A)},complete:function(){if(!_&&!y)return C.error(new TypeError("Cannot reduce an empty sequence"));C.next(I),C.complete()}})})},s.concat=function(){for(var c=this,d=arguments.length,v=new Array(d),y=0;y<d;y++)v[y]=arguments[y];var _=Zr(this);return new _(function(T){var I,C=0;return function A(D){I=D.subscribe({next:function(U){T.next(U)},error:function(U){T.error(U)},complete:function(){C===v.length?(I=void 0,T.complete()):A(_.from(v[C++]))}})}(c),function(){I&&(I.unsubscribe(),I=void 0)}})},s.flatMap=function(c){var d=this;if(typeof c!="function")throw new TypeError(c+" is not a function");var v=Zr(this);return new v(function(y){var _=[],T=d.subscribe({next:function(C){if(c)try{C=c(C)}catch(D){return y.error(D)}var A=v.from(C).subscribe({next:function(D){y.next(D)},error:function(D){y.error(D)},complete:function(){var D=_.indexOf(A);D>=0&&_.splice(D,1),I()}});_.push(A)},error:function(C){y.error(C)},complete:function(){I()}});function I(){T.closed&&_.length===0&&y.complete()}return function(){_.forEach(function(C){return C.unsubscribe()}),T.unsubscribe()}})},s[$n]=function(){return this},h.from=function(c){var d=typeof this=="function"?this:h;if(c==null)throw new TypeError(c+" is not an object");var v=pi(c,$n);if(v){var y=v.call(c);if(Object(y)!==y)throw new TypeError(y+" is not an object");return Jt(y)&&y.constructor===d?y:new d(function(_){return y.subscribe(_)})}if($r("iterator")&&(v=pi(c,Qt)))return new d(function(_){ni(function(){if(!_.closed){for(var T,I=function(A,D){var U=typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(U)return(U=U.call(A)).next.bind(U);if(Array.isArray(A)||(U=function(Z,z){if(Z){if(typeof Z=="string")return Yt(Z,z);var ne=Object.prototype.toString.call(Z).slice(8,-1);return ne==="Object"&&Z.constructor&&(ne=Z.constructor.name),ne==="Map"||ne==="Set"?Array.from(Z):ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne)?Yt(Z,z):void 0}}(A))||D&&A&&typeof A.length=="number"){U&&(A=U);var q=0;return function(){return q>=A.length?{done:!0}:{done:!1,value:A[q++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(v.call(c));!(T=I()).done;){var C=T.value;if(_.next(C),_.closed)return}_.complete()}})});if(Array.isArray(c))return new d(function(_){ni(function(){if(!_.closed){for(var T=0;T<c.length;++T)if(_.next(c[T]),_.closed)return;_.complete()}})});throw new TypeError(c+" is not observable")},h.of=function(){for(var c=arguments.length,d=new Array(c),v=0;v<c;v++)d[v]=arguments[v];var y=typeof this=="function"?this:h;return new y(function(_){ni(function(){if(!_.closed){for(var T=0;T<d.length;++T)if(_.next(d[T]),_.closed)return;_.complete()}})})},Zt(h,null,[{key:$i,get:function(){return this}}]),h}();function nr(h){return h!==null&&typeof h=="object"}function ll(h,s){var c=s,d=[];return h.definitions.forEach(function(v){if(v.kind==="OperationDefinition")throw __DEV__?new qe("Found a "+v.operation+" operation"+(v.name?" named '"+v.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed."):new qe(43);v.kind==="FragmentDefinition"&&d.push(v)}),c===void 0&&(__DEV__?ye(d.length===1,"Found "+d.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment."):ye(d.length===1,44),c=d[0].name.value),le(le({},h),{definitions:ti([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:c}}]}}],h.definitions,!0)})}function $o(h){h===void 0&&(h=[]);var s={};return h.forEach(function(c){s[c.name.value]=c}),s}function Ri(h,s){switch(h.kind){case"InlineFragment":return h;case"FragmentSpread":var c=s&&s[h.name.value];return __DEV__?ye(c,"No fragment named "+h.name.value+"."):ye(c,45),c;default:return null}}function Ci(h){return{__ref:String(h)}}function qt(h){return!!(h&&typeof h=="object"&&typeof h.__ref=="string")}function ii(h,s,c,d){if(function(_){return _.kind==="IntValue"}(c)||function(_){return _.kind==="FloatValue"}(c))h[s.value]=Number(c.value);else if(function(_){return _.kind==="BooleanValue"}(c)||function(_){return _.kind==="StringValue"}(c))h[s.value]=c.value;else if(function(_){return _.kind==="ObjectValue"}(c)){var v={};c.fields.map(function(_){return ii(v,_.name,_.value,d)}),h[s.value]=v}else if(function(_){return _.kind==="Variable"}(c)){var y=(d||{})[c.name.value];h[s.value]=y}else if(function(_){return _.kind==="ListValue"}(c))h[s.value]=c.values.map(function(_){var T={};return ii(T,s,_,d),T[s.value]});else if(function(_){return _.kind==="EnumValue"}(c))h[s.value]=c.value;else{if(!function(_){return _.kind==="NullValue"}(c))throw __DEV__?new qe('The inline argument "'+s.value+'" of kind "'+c.kind+'"is not supported. Use variables instead of inline arguments to overcome this limitation.'):new qe(54);h[s.value]=null}}br()&&Object.defineProperty(Kt,Symbol("extensions"),{value:{symbol:$n,hostReportError:cr},configurable:!0});var Mn=["connection","include","skip","client","rest","export"],Cs=Object.assign(function(h,s,c){if(s&&c&&c.connection&&c.connection.key){if(c.connection.filter&&c.connection.filter.length>0){var d=c.connection.filter?c.connection.filter:[];d.sort();var v={};return d.forEach(function(T){v[T]=s[T]}),c.connection.key+"("+Ln(v)+")"}return c.connection.key}var y=h;if(s){var _=Ln(s);y+="("+_+")"}return c&&Object.keys(c).forEach(function(T){Mn.indexOf(T)===-1&&(c[T]&&Object.keys(c[T]).length?y+="@"+T+"("+Ln(c[T])+")":y+="@"+T)}),y},{setStringify:function(h){var s=Ln;return Ln=h,s}}),Ln=function(h){return JSON.stringify(h,_d)};function _d(h,s){return nr(s)&&!Array.isArray(s)&&(s=Object.keys(s).sort().reduce(function(c,d){return c[d]=s[d],c},{})),s}function $e(h,s){if(h.arguments&&h.arguments.length){var c={};return h.arguments.forEach(function(d){var v=d.name,y=d.value;return ii(c,v,y,s)}),c}return null}function Fe(h){return h.alias?h.alias.value:h.name.value}function Ne(h,s,c){if(typeof h.__typename=="string")return h.__typename;for(var d=0,v=s.selections;d<v.length;d++){var y=v[d];if(Oe(y)){if(y.name.value==="__typename")return h[Fe(y)]}else{var _=Ne(h,Ri(y,c).selectionSet,c);if(typeof _=="string")return _}}}function Oe(h){return h.kind==="Field"}function De(h){return h.kind==="InlineFragment"}function Ps(h){__DEV__?ye(h&&h.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):ye(h&&h.kind==="Document",46);var s=h.definitions.filter(function(c){return c.kind!=="FragmentDefinition"}).map(function(c){if(c.kind!=="OperationDefinition")throw __DEV__?new qe('Schema type definitions not allowed in queries. Found: "'+c.kind+'"'):new qe(47);return c});return __DEV__?ye(s.length<=1,"Ambiguous GraphQL document: contains "+s.length+" operations"):ye(s.length<=1,48),h}function Ru(h){return Ps(h),h.definitions.filter(function(s){return s.kind==="OperationDefinition"})[0]}function Jr(h){return h.definitions.filter(function(s){return s.kind==="OperationDefinition"&&s.name}).map(function(s){return s.name.value})[0]||null}function Cu(h){return h.definitions.filter(function(s){return s.kind==="FragmentDefinition"})}function xs(h){var s=Ru(h);return __DEV__?ye(s&&s.operation==="query","Must contain a query definition."):ye(s&&s.operation==="query",49),s}function fl(h){var s;Ps(h);for(var c=0,d=h.definitions;c<d.length;c++){var v=d[c];if(v.kind==="OperationDefinition"){var y=v.operation;if(y==="query"||y==="mutation"||y==="subscription")return v}v.kind!=="FragmentDefinition"||s||(s=v)}if(s)return s;throw __DEV__?new qe("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new qe(53)}function Pu(h){var s=Object.create(null),c=h&&h.variableDefinitions;return c&&c.length&&c.forEach(function(d){d.defaultValue&&ii(s,d.variable.name,d.defaultValue)}),s}function oi(h,s){return s?s(h):Kt.of()}function Ns(h){return typeof h=="function"?new Vi(h):h}function xu(h){return h.request.length<=1}var wv=function(h){function s(c,d){var v=h.call(this,c)||this;return v.link=d,v}return _t(s,h),s}(Error),Vi=function(){function h(s){s&&(this.request=s)}return h.empty=function(){return new h(function(){return Kt.of()})},h.from=function(s){return s.length===0?h.empty():s.map(Ns).reduce(function(c,d){return c.concat(d)})},h.split=function(s,c,d){var v=Ns(c),y=Ns(d||new h(oi));return xu(v)&&xu(y)?new h(function(_){return s(_)?v.request(_)||Kt.of():y.request(_)||Kt.of()}):new h(function(_,T){return s(_)?v.request(_,T)||Kt.of():y.request(_,T)||Kt.of()})},h.execute=function(s,c){return s.request(function(d,v){var y=le({},d);return Object.defineProperty(v,"setContext",{enumerable:!1,value:function(_){y=le(le({},y),typeof _=="function"?_(y):_)}}),Object.defineProperty(v,"getContext",{enumerable:!1,value:function(){return le({},y)}}),v}(c.context,function(d){var v={variables:d.variables||{},extensions:d.extensions||{},operationName:d.operationName,query:d.query};return v.operationName||(v.operationName=typeof v.query!="string"?Jr(v.query)||void 0:""),v}(function(d){for(var v=["query","operationName","variables","extensions","context"],y=0,_=Object.keys(d);y<_.length;y++){var T=_[y];if(v.indexOf(T)<0)throw __DEV__?new qe("illegal argument: "+T):new qe(26)}return d}(c))))||Kt.of()},h.concat=function(s,c){var d=Ns(s);if(xu(d))return __DEV__&&ye.warn(new wv("You are calling concat on a terminating link, which will have no effect",d)),d;var v=Ns(c);return xu(v)?new h(function(y){return d.request(y,function(_){return v.request(_)||Kt.of()})||Kt.of()}):new h(function(y,_){return d.request(y,function(T){return v.request(T,_)||Kt.of()})||Kt.of()})},h.prototype.split=function(s,c,d){return this.concat(h.split(s,c,d||new h(oi)))},h.prototype.concat=function(s){return h.concat(this,s)},h.prototype.request=function(s,c){throw __DEV__?new qe("request is not implemented"):new qe(21)},h.prototype.onError=function(s,c){if(c&&c.error)return c.error(s),!1;throw s},h.prototype.setOnError=function(s){return this.onError=s,this},h}(),Tv=l(5821),Ed=l(5217),ai={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Av=Object.freeze({});function Fr(h,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ai,d=void 0,v=Array.isArray(h),y=[h],_=-1,T=[],I=void 0,C=void 0,A=void 0,D=[],U=[],q=h;do{var Z=++_===y.length,z=Z&&T.length!==0;if(Z){if(C=U.length===0?void 0:D[D.length-1],I=A,A=U.pop(),z){if(v)I=I.slice();else{for(var ne={},he=0,Le=Object.keys(I);he<Le.length;he++){var Xe=Le[he];ne[Xe]=I[Xe]}I=ne}for(var at=0,Re=0;Re<T.length;Re++){var Ge=T[Re][0],Nt=T[Re][1];v&&(Ge-=at),v&&Nt===null?(I.splice(Ge,1),at++):I[Ge]=Nt}}_=d.index,y=d.keys,T=d.edits,v=d.inArray,d=d.prev}else{if(C=A?v?_:y[_]:void 0,(I=A?A[C]:q)==null)continue;A&&D.push(C)}var Je,xt=void 0;if(!Array.isArray(I)){if(!(0,Ed.UG)(I))throw new Error("Invalid AST Node: ".concat((0,Tv.Z)(I),"."));var tr=M_(s,I.kind,Z);if(tr){if((xt=tr.call(s,I,C,A,D,U))===Av)break;if(xt===!1){if(!Z){D.pop();continue}}else if(xt!==void 0&&(T.push([C,xt]),!Z)){if(!(0,Ed.UG)(xt)){D.pop();continue}I=xt}}}xt===void 0&&z&&T.push([C,I]),Z?D.pop():(d={inArray:v,index:_,keys:y,edits:T,prev:d},y=(v=Array.isArray(I))?I:(Je=c[I.kind])!==null&&Je!==void 0?Je:[],_=-1,T=[],A&&U.push(A),A=I)}while(d!==void 0);return T.length!==0&&(q=T[T.length-1][1]),q}function M_(h,s,c){var d=h[s];if(d){if(!c&&typeof d=="function")return d;var v=c?d.leave:d.enter;if(typeof v=="function")return v}else{var y=c?h.leave:h.enter;if(y){if(typeof y=="function")return y;var _=y[s];if(typeof _=="function")return _}}}var Nu=function(h,s){var c;try{c=JSON.stringify(h)}catch(v){var d=__DEV__?new qe("Network request failed. "+s+" is not serializable: "+v.message):new qe(23);throw d.parseError=v,d}return c},qi=function(h,s){return h.getContext().uri||(typeof s=="function"?s(h):s||"/graphql")},ku=function(h,s,c){var d=new Error(c);throw d.name="ServerError",d.response=h,d.statusCode=h.status,d.result=s,d},dl=Object.prototype.hasOwnProperty;function vr(h){return function(s){return s.text().then(function(c){try{return JSON.parse(c)}catch(v){var d=v;throw d.name="ServerParseError",d.response=s,d.statusCode=s.status,d.bodyText=c,d}}).then(function(c){return s.status>=300&&ku(s,c,"Response not successful: Received status code "+s.status),Array.isArray(c)||dl.call(c,"data")||dl.call(c,"errors")||ku(s,c,"Server response was missing for query '"+(Array.isArray(h)?h.map(function(d){return d.operationName}):h.operationName)+"'."),c})}}var so=function(h){if(!h&&typeof fetch>"u")throw __DEV__?new qe(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new qe(22)},bd=l(7392);function L_(h){return Fr(h,{leave:Sd})}var Sd={Name:function(h){return h.value},Variable:function(h){return"$"+h.name},Document:function(h){return Ye(h.definitions,`

`)+`
`},OperationDefinition:function(h){var s=h.operation,c=h.name,d=ir("(",Ye(h.variableDefinitions,", "),")"),v=Ye(h.directives," "),y=h.selectionSet;return c||v||d||s!=="query"?Ye([s,Ye([c,d]),v,y]," "):y},VariableDefinition:function(h){var s=h.variable,c=h.type,d=h.defaultValue,v=h.directives;return s+": "+c+ir(" = ",d)+ir(" ",Ye(v," "))},SelectionSet:function(h){return Vn(h.selections)},Field:function(h){var s=h.alias,c=h.name,d=h.arguments,v=h.directives,y=h.selectionSet,_=ir("",s,": ")+c,T=_+ir("(",Ye(d,", "),")");return T.length>80&&(T=_+ir(`(
`,hl(Ye(d,`
`)),`
)`)),Ye([T,Ye(v," "),y]," ")},Argument:function(h){return h.name+": "+h.value},FragmentSpread:function(h){return"..."+h.name+ir(" ",Ye(h.directives," "))},InlineFragment:function(h){var s=h.typeCondition,c=h.directives,d=h.selectionSet;return Ye(["...",ir("on ",s),Ye(c," "),d]," ")},FragmentDefinition:function(h){var s=h.name,c=h.typeCondition,d=h.variableDefinitions,v=h.directives,y=h.selectionSet;return"fragment ".concat(s).concat(ir("(",Ye(d,", "),")")," ")+"on ".concat(c," ").concat(ir("",Ye(v," ")," "))+y},IntValue:function(h){return h.value},FloatValue:function(h){return h.value},StringValue:function(h,s){var c=h.value;return h.block?(0,bd.LZ)(c,s==="description"?"":"  "):JSON.stringify(c)},BooleanValue:function(h){return h.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(h){return h.value},ListValue:function(h){return"["+Ye(h.values,", ")+"]"},ObjectValue:function(h){return"{"+Ye(h.fields,", ")+"}"},ObjectField:function(h){return h.name+": "+h.value},Directive:function(h){return"@"+h.name+ir("(",Ye(h.arguments,", "),")")},NamedType:function(h){return h.name},ListType:function(h){return"["+h.type+"]"},NonNullType:function(h){return h.type+"!"},SchemaDefinition:Pi(function(h){var s=h.directives,c=h.operationTypes;return Ye(["schema",Ye(s," "),Vn(c)]," ")}),OperationTypeDefinition:function(h){return h.operation+": "+h.type},ScalarTypeDefinition:Pi(function(h){return Ye(["scalar",h.name,Ye(h.directives," ")]," ")}),ObjectTypeDefinition:Pi(function(h){var s=h.name,c=h.interfaces,d=h.directives,v=h.fields;return Ye(["type",s,ir("implements ",Ye(c," & ")),Ye(d," "),Vn(v)]," ")}),FieldDefinition:Pi(function(h){var s=h.name,c=h.arguments,d=h.type,v=h.directives;return s+(wd(c)?ir(`(
`,hl(Ye(c,`
`)),`
)`):ir("(",Ye(c,", "),")"))+": "+d+ir(" ",Ye(v," "))}),InputValueDefinition:Pi(function(h){var s=h.name,c=h.type,d=h.defaultValue,v=h.directives;return Ye([s+": "+c,ir("= ",d),Ye(v," ")]," ")}),InterfaceTypeDefinition:Pi(function(h){var s=h.name,c=h.interfaces,d=h.directives,v=h.fields;return Ye(["interface",s,ir("implements ",Ye(c," & ")),Ye(d," "),Vn(v)]," ")}),UnionTypeDefinition:Pi(function(h){var s=h.name,c=h.directives,d=h.types;return Ye(["union",s,Ye(c," "),d&&d.length!==0?"= "+Ye(d," | "):""]," ")}),EnumTypeDefinition:Pi(function(h){var s=h.name,c=h.directives,d=h.values;return Ye(["enum",s,Ye(c," "),Vn(d)]," ")}),EnumValueDefinition:Pi(function(h){return Ye([h.name,Ye(h.directives," ")]," ")}),InputObjectTypeDefinition:Pi(function(h){var s=h.name,c=h.directives,d=h.fields;return Ye(["input",s,Ye(c," "),Vn(d)]," ")}),DirectiveDefinition:Pi(function(h){var s=h.name,c=h.arguments,d=h.repeatable,v=h.locations;return"directive @"+s+(wd(c)?ir(`(
`,hl(Ye(c,`
`)),`
)`):ir("(",Ye(c,", "),")"))+(d?" repeatable":"")+" on "+Ye(v," | ")}),SchemaExtension:function(h){var s=h.directives,c=h.operationTypes;return Ye(["extend schema",Ye(s," "),Vn(c)]," ")},ScalarTypeExtension:function(h){return Ye(["extend scalar",h.name,Ye(h.directives," ")]," ")},ObjectTypeExtension:function(h){var s=h.name,c=h.interfaces,d=h.directives,v=h.fields;return Ye(["extend type",s,ir("implements ",Ye(c," & ")),Ye(d," "),Vn(v)]," ")},InterfaceTypeExtension:function(h){var s=h.name,c=h.interfaces,d=h.directives,v=h.fields;return Ye(["extend interface",s,ir("implements ",Ye(c," & ")),Ye(d," "),Vn(v)]," ")},UnionTypeExtension:function(h){var s=h.name,c=h.directives,d=h.types;return Ye(["extend union",s,Ye(c," "),d&&d.length!==0?"= "+Ye(d," | "):""]," ")},EnumTypeExtension:function(h){var s=h.name,c=h.directives,d=h.values;return Ye(["extend enum",s,Ye(c," "),Vn(d)]," ")},InputObjectTypeExtension:function(h){var s=h.name,c=h.directives,d=h.fields;return Ye(["extend input",s,Ye(c," "),Vn(d)]," ")}};function Pi(h){return function(s){return Ye([s.description,h(s)],`
`)}}function Ye(h){var s,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(s=h==null?void 0:h.filter(function(d){return d}).join(c))!==null&&s!==void 0?s:""}function Vn(h){return ir(`{
`,hl(Ye(h,`
`)),`
}`)}function ir(h,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return s!=null&&s!==""?h+s+c:""}function hl(h){return ir("  ",h.replace(/\n/g,`
  `))}function Iv(h){return h.indexOf(`
`)!==-1}function wd(h){return h!=null&&h.some(Iv)}var pl={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},vl=function(h,s){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var v=le(le({},s.options),{headers:s.headers,credentials:s.credentials}),y=s.http||{};c.forEach(function(D){v=le(le(le({},v),D.options),{headers:le(le({},v.headers),Ov(D.headers))}),D.credentials&&(v.credentials=D.credentials),y=le(le({},y),D.http)});var _=h.operationName,T=h.extensions,I=h.variables,C=h.query,A={operationName:_,variables:I};return y.includeExtensions&&(A.extensions=T),y.includeQuery&&(A.query=L_(C)),{options:v,body:A}};function Ov(h){if(h){var s=Object.create(null);return Object.keys(Object(h)).forEach(function(c){s[c.toLowerCase()]=h[c]}),s}return h}var ml=function(){if(typeof AbortController>"u")return{controller:!1,signal:!1};var h=new AbortController;return{controller:h,signal:h.signal}};function ks(h){return new Kt(function(s){s.error(h)})}var Td=mt(function(){return fetch}),qn=function(h){function s(c){c===void 0&&(c={});var d=h.call(this,function(v){v===void 0&&(v={});var y=v.uri,_=y===void 0?"/graphql":y,T=v.fetch,I=v.includeExtensions,C=v.useGETForQueries,A=v.includeUnusedVariables,D=A!==void 0&&A,U=gn(v,["uri","fetch","includeExtensions","useGETForQueries","includeUnusedVariables"]);__DEV__&&so(T||Td);var q={http:{includeExtensions:I},options:U.fetchOptions,credentials:U.credentials,headers:U.headers};return new Vi(function(Z){var z=qi(Z,_),ne=Z.getContext(),he={};if(ne.clientAwareness){var Le=ne.clientAwareness,Xe=Le.name,at=Le.version;Xe&&(he["apollographql-client-name"]=Xe),at&&(he["apollographql-client-version"]=at)}var Re,Ge=le(le({},he),ne.headers),Nt={http:ne.http,options:ne.fetchOptions,credentials:ne.credentials,headers:Ge},Je=vl(Z,pl,q,Nt),xt=Je.options,tr=Je.body;if(tr.variables&&!D){var nn=new Set(Object.keys(tr.variables));Fr(Z.query,{Variable:function(b,O,N){N&&N.kind!=="VariableDefinition"&&nn.delete(b.name.value)}}),nn.size&&(tr.variables=le({},tr.variables),nn.forEach(function(b){delete tr.variables[b]}))}if(!xt.signal){var Ot=ml(),_i=Ot.controller,Sn=Ot.signal;(Re=_i)&&(xt.signal=Sn)}if(C&&!Z.query.definitions.some(function(b){return b.kind==="OperationDefinition"&&b.operation==="mutation"})&&(xt.method="GET"),xt.method==="GET"){var on=function(b,O){var N=[],L=function(He,Qe){N.push(He+"="+encodeURIComponent(Qe))};if("query"in O&&L("query",O.query),O.operationName&&L("operationName",O.operationName),O.variables){var W=void 0;try{W=Nu(O.variables,"Variables map")}catch(He){return{parseError:He}}L("variables",W)}if(O.extensions){var Q=void 0;try{Q=Nu(O.extensions,"Extensions map")}catch(He){return{parseError:He}}L("extensions",Q)}var ae="",be=b,Ee=b.indexOf("#");Ee!==-1&&(ae=b.substr(Ee),be=b.substr(0,Ee));var xe=be.indexOf("?")===-1?"?":"&";return{newURI:be+xe+N.join("&")+ae}}(z,tr),f=on.newURI,g=on.parseError;if(g)return ks(g);z=f}else try{xt.body=Nu(tr,"Payload")}catch(b){return ks(b)}return new Kt(function(b){return(T||mt(function(){return fetch})||Td)(z,xt).then(function(O){return Z.setContext({response:O}),O}).then(vr(Z)).then(function(O){return b.next(O),b.complete(),O}).catch(function(O){O.name!=="AbortError"&&(O.result&&O.result.errors&&O.result.data&&b.next(O.result),b.error(O))}),function(){Re&&Re.abort()}})})}(c).request)||this;return d.options=c,d}return _t(s,h),s}(Vi),Du=Vi.execute;function uo(){for(var h=[],s=0;s<arguments.length;s++)h[s]=arguments[s];var c=Object.create(null);return h.forEach(function(d){d&&Object.keys(d).forEach(function(v){var y=d[v];y!==void 0&&(c[v]=y)})}),c}var Ad=Object.prototype,Id=Ad.toString,U_=Ad.hasOwnProperty,Rv=Function.prototype.toString,Od=new Map;function ln(h,s){try{return Vo(h,s)}finally{Od.clear()}}function Vo(h,s){if(h===s)return!0;var c,d,v,y=Id.call(h);if(y!==Id.call(s))return!1;switch(y){case"[object Array]":if(h.length!==s.length)return!1;case"[object Object]":if(Mu(h,s))return!0;var _=gl(h),T=gl(s),I=_.length;if(I!==T.length)return!1;for(var C=0;C<I;++C)if(!U_.call(s,_[C]))return!1;for(C=0;C<I;++C){var A=_[C];if(!Vo(h[A],s[A]))return!1}return!0;case"[object Error]":return h.name===s.name&&h.message===s.message;case"[object Number]":if(h!=h)return s!=s;case"[object Boolean]":case"[object Date]":return+h==+s;case"[object RegExp]":case"[object String]":return h==""+s;case"[object Map]":case"[object Set]":if(h.size!==s.size)return!1;if(Mu(h,s))return!0;for(var D=h.entries(),U=y==="[object Map]";;){var q=D.next();if(q.done)break;var Z=q.value,z=Z[0],ne=Z[1];if(!s.has(z)||U&&!Vo(ne,s.get(z)))return!1}return!0;case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":h=new Uint8Array(h),s=new Uint8Array(s);case"[object DataView]":var he=h.byteLength;if(he===s.byteLength)for(;he--&&h[he]===s[he];);return he===-1;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var Le=Rv.call(h);return Le===Rv.call(s)&&(d=qo,!((v=(c=Le).length-d.length)>=0&&c.indexOf(d,v)===v))}return!1}function gl(h){return Object.keys(h).filter(Cv,h)}function Cv(h){return this[h]!==void 0}var qo="{ [native code] }";function Mu(h,s){var c=Od.get(h);if(c){if(c.has(s))return!0}else Od.set(h,c=new Set);return c.add(s),!1}var Rd,Ho,xi=function(){return Object.create(null)},Cd=Array.prototype,F_=Cd.forEach,yl=Cd.slice,se=function(){function h(s,c){s===void 0&&(s=!0),c===void 0&&(c=xi),this.weakness=s,this.makeData=c}return h.prototype.lookup=function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return this.lookupArray(s)},h.prototype.lookupArray=function(s){var c=this;return F_.call(s,function(d){return c=c.getChildTrie(d)}),c.data||(c.data=this.makeData(yl.call(s)))},h.prototype.getChildTrie=function(s){var c=this.weakness&&function(v){switch(typeof v){case"object":if(v===null)break;case"function":return!0}return!1}(s)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),d=c.get(s);return d||c.set(s,d=new h(this.weakness,this.makeData)),d},h}(),_e=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),Se=typeof WeakSet=="function",je=typeof Symbol=="function"&&typeof Symbol.for=="function",gt=function(){function h(){this.known=new(Se?WeakSet:Set),this.pool=new se(_e),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return h.prototype.isKnown=function(s){return nr(s)&&this.known.has(s)},h.prototype.pass=function(s){if(nr(s)){var c=function(d){return nr(d)?Array.isArray(d)?d.slice(0):le({__proto__:Object.getPrototypeOf(d)},d):d}(s);return this.passes.set(c,s),c}return s},h.prototype.admit=function(s){var c=this;if(nr(s)){var d=this.passes.get(s);if(d)return d;switch(Object.getPrototypeOf(s)){case Array.prototype:if(this.known.has(s))return s;var v=s.map(this.admit,this);return(I=this.pool.lookupArray(v)).array||(this.known.add(I.array=v),__DEV__&&Object.freeze(v)),I.array;case null:case Object.prototype:if(this.known.has(s))return s;var y=Object.getPrototypeOf(s),_=[y],T=this.sortedKeys(s);_.push(T.json);var I,C=_.length;if(T.sorted.forEach(function(D){_.push(c.admit(s[D]))}),!(I=this.pool.lookupArray(_)).object){var A=I.object=Object.create(y);this.known.add(A),T.sorted.forEach(function(D,U){A[D]=_[C+U]}),__DEV__&&Object.freeze(A)}return I.object}}return s},h.prototype.sortedKeys=function(s){var c=Object.keys(s),d=this.pool.lookupArray(c);if(!d.keys){c.sort();var v=JSON.stringify(c);(d.keys=this.keysByJSON.get(v))||this.keysByJSON.set(v,d.keys={sorted:c,json:v})}return d.keys},h}(),Ct=Object.assign(function(h){if(nr(h)){Rd===void 0&&Vr();var s=Rd.admit(h),c=Ho.get(s);return c===void 0&&Ho.set(s,c=JSON.stringify(s)),c}return JSON.stringify(h)},{reset:Vr});function Vr(){Rd=new gt,Ho=new(_e?WeakMap:Map)}function vi(h,s,c){return new Kt(function(d){var v=d.next,y=d.error,_=d.complete,T=0,I=!1,C={then:function(q){return new Promise(function(Z){return Z(q())})}};function A(q,Z){return q?function(z){++T;var ne=function(){return q(z)};C=C.then(ne,ne).then(function(he){--T,v&&v.call(d,he),I&&D.complete()},function(he){throw--T,he}).catch(function(he){y&&y.call(d,he)})}:function(z){return Z&&Z.call(d,z)}}var D={next:A(s,v),error:A(c,y),complete:function(){I=!0,T||_&&_.call(d)}},U=h.subscribe(D);return function(){return U.unsubscribe()}})}function or(h){return h.errors&&h.errors.length>0||!1}function _l(h,s,c){var d=0;return h.forEach(function(v,y){s.call(this,v,y,h)&&(h[d++]=v)},c),h.length=d,h}var Pv={kind:"Field",name:{kind:"Name",value:"__typename"}};function si(h,s){return h.selectionSet.selections.every(function(c){return c.kind==="FragmentSpread"&&si(s[c.name.value],s)})}function Ds(h){return si(Ru(h)||function(s){__DEV__?ye(s.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):ye(s.kind==="Document",50),__DEV__?ye(s.definitions.length<=1,"Fragment must have exactly one definition."):ye(s.definitions.length<=1,51);var c=s.definitions[0];return __DEV__?ye(c.kind==="FragmentDefinition","Must be a fragment definition."):ye(c.kind==="FragmentDefinition",52),c}(h),$o(Cu(h)))?null:h}function xv(h){return function(s){return h.some(function(c){return c.name&&c.name===s.name.value||c.test&&c.test(s)})}}function Na(h,s){var c=Object.create(null),d=[],v=Object.create(null),y=[],_=Ds(Fr(s,{Variable:{enter:function(T,I,C){C.kind!=="VariableDefinition"&&(c[T.name.value]=!0)}},Field:{enter:function(T){if(h&&T.directives&&h.some(function(I){return I.remove})&&T.directives&&T.directives.some(xv(h)))return T.arguments&&T.arguments.forEach(function(I){I.value.kind==="Variable"&&d.push({name:I.value.name.value})}),T.selectionSet&&er(T.selectionSet).forEach(function(I){y.push({name:I.name.value})}),null}},FragmentSpread:{enter:function(T){v[T.name.value]=!0}},Directive:{enter:function(T){if(xv(h)(T))return null}}}));return _&&_l(d,function(T){return!!T.name&&!c[T.name]}).length&&(_=function(T,I){var C=function(A){return function(D){return A.some(function(U){return D.value&&D.value.kind==="Variable"&&D.value.name&&(U.name===D.value.name.value||U.test&&U.test(D))})}}(T);return Ds(Fr(I,{OperationDefinition:{enter:function(A){return le(le({},A),{variableDefinitions:A.variableDefinitions?A.variableDefinitions.filter(function(D){return!T.some(function(U){return U.name===D.variable.name.value})}):[]})}},Field:{enter:function(A){if(T.some(function(U){return U.remove})){var D=0;if(A.arguments&&A.arguments.forEach(function(U){C(U)&&(D+=1)}),D===1)return null}}},Argument:{enter:function(A){if(C(A))return null}}}))}(d,_)),_&&_l(y,function(T){return!!T.name&&!v[T.name]}).length&&(_=function(T,I){function C(A){if(T.some(function(D){return D.name===A.name.value}))return null}return Ds(Fr(I,{FragmentSpread:{enter:C},FragmentDefinition:{enter:C}}))}(y,_)),_}var Ms=Object.assign(function(h){return Fr(Ps(h),{SelectionSet:{enter:function(s,c,d){if(!d||d.kind!=="OperationDefinition"){var v=s.selections;if(v&&!v.some(function(_){return Oe(_)&&(_.name.value==="__typename"||_.name.value.lastIndexOf("__",0)===0)})){var y=d;if(!(Oe(y)&&y.directives&&y.directives.some(function(_){return _.name.value==="export"})))return le(le({},s),{selections:ti(ti([],v,!0),[Pv],!1)})}}}}})},{added:function(h){return h===Pv}}),El={test:function(h){var s=h.name.value==="connection";return s&&(h.arguments&&h.arguments.some(function(c){return c.name.value==="key"})||__DEV__&&ye.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),s}};function er(h){var s=[];return h.selections.forEach(function(c){(Oe(c)||De(c))&&c.selectionSet?er(c.selectionSet).forEach(function(d){return s.push(d)}):c.kind==="FragmentSpread"&&s.push(c)}),s}function B_(h){if(fl(h).operation==="query")return h;var s=Fr(h,{OperationDefinition:{enter:function(c){return le(le({},c),{operation:"query"})}}});return s}function Lu(h,s){var c=h.directives;return!c||!c.length||function(d){var v=[];return d&&d.length&&d.forEach(function(y){if(function(A){var D=A.name.value;return D==="skip"||D==="include"}(y)){var _=y.arguments,T=y.name.value;__DEV__?ye(_&&_.length===1,"Incorrect number of arguments for the @"+T+" directive."):ye(_&&_.length===1,40);var I=_[0];__DEV__?ye(I.name&&I.name.value==="if","Invalid argument for the @"+T+" directive."):ye(I.name&&I.name.value==="if",41);var C=I.value;__DEV__?ye(C&&(C.kind==="Variable"||C.kind==="BooleanValue"),"Argument for the @"+T+" directive must be a variable or a boolean value."):ye(C&&(C.kind==="Variable"||C.kind==="BooleanValue"),42),v.push({directive:y,ifArgument:I})}}),v}(c).every(function(d){var v=d.directive,y=d.ifArgument,_=!1;return y.value.kind==="Variable"?(_=s&&s[y.value.name.value],__DEV__?ye(_!==void 0,"Invalid variable referenced in @"+v.name.value+" directive."):ye(_!==void 0,39)):_=y.value.value,v.name.value==="skip"?!_:_})}function Ls(h,s){return function(c){var d=[];return Fr(c,{Directive:function(v){d.push(v.name.value)}}),d}(s).some(function(c){return h.indexOf(c)>-1})}function j_(h){return h&&Ls(["client"],h)&&Ls(["export"],h)}var Nv=new Map;function Pd(h){var s=Nv.get(h)||1;return Nv.set(h,s+1),h+":"+s+":"+Math.random().toString(36).slice(2)}function Wo(h,s,c){var d=[];h.forEach(function(v){return v[s]&&d.push(v)}),d.forEach(function(v){return v[s](c)})}function co(h){function s(c){Object.defineProperty(h,c,{value:Kt})}return je&&Symbol.species&&s(Symbol.species),s("@@species"),h}function Uu(h){return h&&typeof h.then=="function"}var lr,zo=function(h){function s(c){var d=h.call(this,function(v){return d.addObserver(v),function(){return d.removeObserver(v)}})||this;return d.observers=new Set,d.addCount=0,d.promise=new Promise(function(v,y){d.resolve=v,d.reject=y}),d.handlers={next:function(v){d.sub!==null&&(d.latest=["next",v],Wo(d.observers,"next",v))},error:function(v){var y=d.sub;y!==null&&(y&&setTimeout(function(){return y.unsubscribe()}),d.sub=null,d.latest=["error",v],d.reject(v),Wo(d.observers,"error",v))},complete:function(){if(d.sub!==null){var v=d.sources.shift();v?Uu(v)?v.then(function(y){return d.sub=y.subscribe(d.handlers)}):d.sub=v.subscribe(d.handlers):(d.sub=null,d.latest&&d.latest[0]==="next"?d.resolve(d.latest[1]):d.resolve(),Wo(d.observers,"complete"))}}},d.cancel=function(v){d.reject(v),d.sources=[],d.handlers.complete()},d.promise.catch(function(v){}),typeof c=="function"&&(c=[new Kt(c)]),Uu(c)?c.then(function(v){return d.start(v)},d.handlers.error):d.start(c),d}return _t(s,h),s.prototype.start=function(c){this.sub===void 0&&(this.sources=Array.from(c),this.handlers.complete())},s.prototype.deliverLastMessage=function(c){if(this.latest){var d=this.latest[0],v=c[d];v&&v.call(c,this.latest[1]),this.sub===null&&d==="next"&&c.complete&&c.complete()}},s.prototype.addObserver=function(c){this.observers.has(c)||(this.deliverLastMessage(c),this.observers.add(c),++this.addCount)},s.prototype.removeObserver=function(c,d){this.observers.delete(c)&&--this.addCount<1&&!d&&this.handlers.error(new Error("Observable cancelled prematurely"))},s.prototype.cleanup=function(c){var d=this,v=!1,y=function(){v||(v=!0,d.observers.delete(_),c())},_={next:y,error:y,complete:y},T=this.addCount;this.addObserver(_),this.addCount=T},s}(Kt);function Us(h){return!!h&&h<7}co(zo),function(h){h[h.loading=1]="loading",h[h.setVariables=2]="setVariables",h[h.fetchMore=3]="fetchMore",h[h.refetch=4]="refetch",h[h.poll=6]="poll",h[h.ready=7]="ready",h[h.error=8]="error"}(lr||(lr={}));var kv=Object.prototype.toString;function Fu(h){return bl(h)}function bl(h,s){switch(kv.call(h)){case"[object Array]":if((s=s||new Map).has(h))return s.get(h);var c=h.slice(0);return s.set(h,c),c.forEach(function(v,y){c[y]=bl(v,s)}),c;case"[object Object]":if((s=s||new Map).has(h))return s.get(h);var d=Object.create(Object.getPrototypeOf(h));return s.set(h,d),Object.keys(h).forEach(function(v){d[v]=bl(h[v],s)}),d;default:return h}}var Bu=Object.assign,ka=Object.hasOwnProperty,ju=!1,xd=function(h){function s(c){var d=c.queryManager,v=c.queryInfo,y=c.options,_=h.call(this,function(I){try{var C=I._subscription._observer;C&&!C.error&&(C.error=G_)}catch{}var A=!_.observers.size;_.observers.add(I);var D=_.last;return D&&D.error?I.error&&I.error(D.error):D&&D.result&&I.next&&I.next(D.result),A&&_.reobserve().catch(function(){}),function(){_.observers.delete(I)&&!_.observers.size&&_.tearDownQuery()}})||this;_.observers=new Set,_.subscriptions=new Set,_.isTornDown=!1,_.options=y,_.queryId=v.queryId||d.generateQueryId();var T=Ru(y.query);return _.queryName=T&&T.name&&T.name.value,_.initialFetchPolicy=y.fetchPolicy||"cache-first",_.queryManager=d,_.queryInfo=v,_}return _t(s,h),Object.defineProperty(s.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),s.prototype.result=function(){var c=this;return new Promise(function(d,v){var y={next:function(T){d(T),c.observers.delete(y),c.observers.size||c.queryManager.removeQuery(c.queryId),setTimeout(function(){_.unsubscribe()},0)},error:v},_=c.subscribe(y)})},s.prototype.getCurrentResult=function(c){c===void 0&&(c=!0);var d=this.getLastResult(!0),v=this.queryInfo.networkStatus||d&&d.networkStatus||lr.ready,y=le(le({},d),{loading:Us(v),networkStatus:v}),_=this.options.fetchPolicy,T=_===void 0?"cache-first":_;if((d||T!=="network-only"&&T!=="no-cache"&&T!=="standby")&&!this.queryManager.transform(this.options.query).hasForcedResolvers){var I=this.queryInfo.getDiff();(I.complete||this.options.returnPartialData)&&(y.data=I.result),ln(y.data,{})&&(y.data=void 0),I.complete?(y.networkStatus!==lr.loading||T!=="cache-first"&&T!=="cache-only"||(y.networkStatus=lr.ready,y.loading=!1),delete y.partial):T!=="no-cache"&&(y.partial=!0),!__DEV__||I.complete||this.options.partialRefetch||y.loading||y.data||y.error||Dv(I.missing)}return c&&this.updateLastResult(y),y},s.prototype.isDifferentFromLastResult=function(c){return!this.last||!ln(this.last.result,c)},s.prototype.getLast=function(c,d){var v=this.last;if(v&&v[c]&&(!d||ln(v.variables,this.variables)))return v[c]},s.prototype.getLastResult=function(c){return this.getLast("result",c)},s.prototype.getLastError=function(c){return this.getLast("error",c)},s.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},s.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},s.prototype.refetch=function(c){var d,v={pollInterval:0},y=this.options.fetchPolicy;if(y==="no-cache"?v.fetchPolicy="no-cache":y!=="cache-and-network"&&(v.fetchPolicy="network-only"),__DEV__&&c&&ka.call(c,"variables")){var _=xs(this.options.query),T=_.variableDefinitions;T&&T.some(function(I){return I.variable.name.value==="variables"})||__DEV__&&ye.warn("Called refetch("+JSON.stringify(c)+") for query "+(((d=_.name)===null||d===void 0?void 0:d.value)||JSON.stringify(_))+`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`)}return c&&!ln(this.options.variables,c)&&(v.variables=this.options.variables=le(le({},this.options.variables),c)),this.queryInfo.resetLastWrite(),this.reobserve(v,lr.refetch)},s.prototype.fetchMore=function(c){var d=this,v=le(le({},c.query?c:le(le(le({},this.options),c),{variables:le(le({},this.options.variables),c.variables)})),{fetchPolicy:"no-cache"}),y=this.queryManager.generateQueryId();return v.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=lr.fetchMore,this.observe()),this.queryManager.fetchQuery(y,v,lr.fetchMore).then(function(_){var T=_.data,I=c.updateQuery;return I?(__DEV__&&!ju&&(__DEV__&&ye.warn(`The updateQuery callback for fetchMore is deprecated, and will be removed
in the next major version of Apollo Client.

Please convert updateQuery functions to field policies with appropriate
read and merge functions, or use/adapt a helper function (such as
concatPagination, offsetLimitPagination, or relayStylePagination) from
@apollo/client/utilities.

The field policy system handles pagination more effectively than a
hand-written updateQuery function, and you only need to define the policy
once, rather than every time you call fetchMore.`),ju=!0),d.updateQuery(function(C){return I(C,{fetchMoreResult:T,variables:v.variables})})):d.queryManager.cache.writeQuery({query:v.query,variables:v.variables,data:T}),_}).finally(function(){d.queryManager.stopQuery(y),d.reobserve()})},s.prototype.subscribeToMore=function(c){var d=this,v=this.queryManager.startGraphQLSubscription({query:c.document,variables:c.variables,context:c.context}).subscribe({next:function(y){var _=c.updateQuery;_&&d.updateQuery(function(T,I){var C=I.variables;return _(T,{subscriptionData:y,variables:C})})},error:function(y){c.onError?c.onError(y):__DEV__&&ye.error("Unhandled GraphQL subscription error",y)}});return this.subscriptions.add(v),function(){d.subscriptions.delete(v)&&v.unsubscribe()}},s.prototype.setOptions=function(c){return this.reobserve(c)},s.prototype.setVariables=function(c){return ln(this.variables,c)?this.observers.size?this.result():Promise.resolve():(this.options.variables=c,this.observers.size?this.reobserve({fetchPolicy:this.initialFetchPolicy,variables:c},lr.setVariables):Promise.resolve())},s.prototype.updateQuery=function(c){var d=this.queryManager,v=c(d.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});v&&(d.cache.writeQuery({query:this.options.query,data:v,variables:this.variables}),d.broadcastQueries())},s.prototype.startPolling=function(c){this.options.pollInterval=c,this.updatePolling()},s.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},s.prototype.fetch=function(c,d){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,c,d)},s.prototype.updatePolling=function(){var c=this;if(!this.queryManager.ssrMode){var d=this.pollingInfo,v=this.options.pollInterval;if(v){if(!d||d.interval!==v){__DEV__?ye(v,"Attempted to start a polling query without a polling interval."):ye(v,12),(d||(this.pollingInfo={})).interval=v;var y=function(){c.pollingInfo&&(Us(c.queryInfo.networkStatus)?_():c.reobserve({fetchPolicy:"network-only"},lr.poll).then(_,_))},_=function(){var T=c.pollingInfo;T&&(clearTimeout(T.timeout),T.timeout=setTimeout(y,T.interval))};_()}}else d&&(clearTimeout(d.timeout),delete this.pollingInfo)}},s.prototype.updateLastResult=function(c,d){return d===void 0&&(d=this.variables),this.last=le(le({},this.last),{result:this.queryManager.assumeImmutableResults?c:Fu(c),variables:d}),oe(c.errors)||delete this.last.error,this.last},s.prototype.reobserve=function(c,d){var v=this;this.isTornDown=!1;var y=d===lr.refetch||d===lr.fetchMore||d===lr.poll,_=this.options.variables,T=y?uo(this.options,c):Bu(this.options,uo(c));y||(this.updatePolling(),c&&c.variables&&!c.fetchPolicy&&!ln(c.variables,_)&&(T.fetchPolicy=this.initialFetchPolicy,d===void 0&&(d=lr.setVariables)));var I=T.variables&&le({},T.variables),C=this.fetch(T,d),A={next:function(D){v.reportResult(D,I)},error:function(D){v.reportError(D,I)}};return y||(this.concast&&this.observer&&this.concast.removeObserver(this.observer,!0),this.concast=C,this.observer=A),C.addObserver(A),C.promise},s.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},s.prototype.reportResult=function(c,d){(this.getLastError()||this.isDifferentFromLastResult(c))&&(this.updateLastResult(c,d),Wo(this.observers,"next",c))},s.prototype.reportError=function(c,d){var v=le(le({},this.getLastResult()),{error:c,errors:c.graphQLErrors,networkStatus:lr.error,loading:!1});this.updateLastResult(v,d),Wo(this.observers,"error",this.last.error=c)},s.prototype.hasObservers=function(){return this.observers.size>0},s.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(c){return c.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},s}(Kt);function G_(h){__DEV__&&ye.error("Unhandled error",h.message,h.stack)}function Dv(h){__DEV__&&oe(h)&&__DEV__&&ye.debug("Missing cache result fields: "+h.map(function(s){return s.path.join(".")}).join(", "),h)}co(xd);var Sl=Object.prototype.hasOwnProperty;function Gu(){for(var h=[],s=0;s<arguments.length;s++)h[s]=arguments[s];return $u(h)}function $u(h){var s=h[0]||{},c=h.length;if(c>1)for(var d=new wl,v=1;v<c;++v)s=d.merge(s,h[v]);return s}var $_=function(h,s,c){return this.merge(h[c],s[c])},wl=function(){function h(s){s===void 0&&(s=$_),this.reconciler=s,this.isObject=nr,this.pastCopies=new Set}return h.prototype.merge=function(s,c){for(var d=this,v=[],y=2;y<arguments.length;y++)v[y-2]=arguments[y];return nr(c)&&nr(s)?(Object.keys(c).forEach(function(_){if(Sl.call(s,_)){var T=s[_];if(c[_]!==T){var I=d.reconciler.apply(d,ti([s,c,_],v,!1));I!==T&&((s=d.shallowCopyForMerge(s))[_]=I)}}else(s=d.shallowCopyForMerge(s))[_]=c[_]}),s):c},h.prototype.shallowCopyForMerge=function(s){return nr(s)&&!this.pastCopies.has(s)&&(s=Array.isArray(s)?s.slice(0):le({__proto__:Object.getPrototypeOf(s)},s),this.pastCopies.add(s)),s},h}(),yn=null,Mv={},en=1,fn="@wry/context:Slot",Nd=Array,Tl=Nd[fn]||function(){var h=function(){function s(){this.id=["slot",en++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return s.prototype.hasValue=function(){for(var c=yn;c;c=c.parent)if(this.id in c.slots){var d=c.slots[this.id];if(d===Mv)break;return c!==yn&&(yn.slots[this.id]=d),!0}return yn&&(yn.slots[this.id]=Mv),!1},s.prototype.getValue=function(){if(this.hasValue())return yn.slots[this.id]},s.prototype.withValue=function(c,d,v,y){var _,T=((_={__proto__:null})[this.id]=c,_),I=yn;yn={parent:I,slots:T};try{return d.apply(y,v)}finally{yn=I}},s.bind=function(c){var d=yn;return function(){var v=yn;try{return yn=d,c.apply(this,arguments)}finally{yn=v}}},s.noContext=function(c,d,v){if(!yn)return c.apply(v,d);var y=yn;try{return yn=null,c.apply(v,d)}finally{yn=y}},s}();try{Object.defineProperty(Nd,fn,{value:Nd[fn]=h,enumerable:!1,writable:!1,configurable:!1})}finally{return h}}();function Lv(){}Tl.bind,Tl.noContext;var Uv,kd=function(){function h(s,c){s===void 0&&(s=1/0),c===void 0&&(c=Lv),this.max=s,this.dispose=c,this.map=new Map,this.newest=null,this.oldest=null}return h.prototype.has=function(s){return this.map.has(s)},h.prototype.get=function(s){var c=this.getNode(s);return c&&c.value},h.prototype.getNode=function(s){var c=this.map.get(s);if(c&&c!==this.newest){var d=c.older,v=c.newer;v&&(v.older=d),d&&(d.newer=v),c.older=this.newest,c.older.newer=c,c.newer=null,this.newest=c,c===this.oldest&&(this.oldest=v)}return c},h.prototype.set=function(s,c){var d=this.getNode(s);return d?d.value=c:(d={key:s,value:c,newer:null,older:this.newest},this.newest&&(this.newest.newer=d),this.newest=d,this.oldest=this.oldest||d,this.map.set(s,d),d.value)},h.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},h.prototype.delete=function(s){var c=this.map.get(s);return!!c&&(c===this.newest&&(this.newest=c.older),c===this.oldest&&(this.oldest=c.newer),c.newer&&(c.newer.older=c.older),c.older&&(c.older.newer=c.newer),this.map.delete(s),this.dispose(c.value,s),!0)},h}(),Ko=new Tl,Dd=Object.prototype.hasOwnProperty,Yo=(Uv=Array.from)===void 0?function(h){var s=[];return h.forEach(function(c){return s.push(c)}),s}:Uv;function Da(h){var s=h.unsubscribe;typeof s=="function"&&(h.unsubscribe=void 0,s())}var lo=[];function fo(h,s){if(!h)throw new Error(s||"assertion failure")}function Ma(h){switch(h.length){case 0:throw new Error("unknown value");case 1:return h[0];case 2:throw h[1]}}var V_=function(){function h(s){this.fn=s,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++h.count}return h.prototype.peek=function(){if(this.value.length===1&&!Qo(this))return Fv(this),this.value[0]},h.prototype.recompute=function(s){return fo(!this.recomputing,"already recomputing"),Fv(this),Qo(this)?function(c,d){return qu(c),Ko.withValue(c,q_,[c,d]),function(v,y){if(typeof v.subscribe=="function")try{Da(v),v.unsubscribe=v.subscribe.apply(null,y)}catch{return v.setDirty(),!1}return!0}(c,d)&&function(v){v.dirty=!1,Qo(v)||Vu(v)}(c),Ma(c.value)}(this,s):Ma(this.value)},h.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Bv(this),Da(this))},h.prototype.dispose=function(){var s=this;this.setDirty(),qu(this),La(this,function(c,d){c.setDirty(),ui(c,s)})},h.prototype.forget=function(){this.dispose()},h.prototype.dependOn=function(s){s.add(this),this.deps||(this.deps=lo.pop()||new Set),this.deps.add(s)},h.prototype.forgetDeps=function(){var s=this;this.deps&&(Yo(this.deps).forEach(function(c){return c.delete(s)}),this.deps.clear(),lo.push(this.deps),this.deps=null)},h.count=0,h}();function Fv(h){var s=Ko.getValue();if(s)return h.parents.add(s),s.childValues.has(h)||s.childValues.set(h,[]),Qo(h)?Md(s,h):M(s,h),s}function q_(h,s){h.recomputing=!0,h.value.length=0;try{h.value[0]=h.fn.apply(null,s)}catch(c){h.value[1]=c}h.recomputing=!1}function Qo(h){return h.dirty||!(!h.dirtyChildren||!h.dirtyChildren.size)}function Bv(h){La(h,Md)}function Vu(h){La(h,M)}function La(h,s){var c=h.parents.size;if(c)for(var d=Yo(h.parents),v=0;v<c;++v)s(d[v],h)}function Md(h,s){fo(h.childValues.has(s)),fo(Qo(s));var c=!Qo(h);if(h.dirtyChildren){if(h.dirtyChildren.has(s))return}else h.dirtyChildren=lo.pop()||new Set;h.dirtyChildren.add(s),c&&Bv(h)}function M(h,s){fo(h.childValues.has(s)),fo(!Qo(s));var c,d,v,y=h.childValues.get(s);y.length===0?h.childValues.set(s,s.value.slice(0)):(c=y,d=s.value,(v=c.length)>0&&v===d.length&&c[v-1]===d[v-1]||h.setDirty()),Ua(h,s),Qo(h)||Vu(h)}function Ua(h,s){var c=h.dirtyChildren;c&&(c.delete(s),c.size===0&&(lo.length<100&&lo.push(c),h.dirtyChildren=null))}function qu(h){h.childValues.size>0&&h.childValues.forEach(function(s,c){ui(h,c)}),h.forgetDeps(),fo(h.dirtyChildren===null)}function ui(h,s){s.parents.delete(h),h.childValues.delete(s),Ua(h,s)}var Lt={setDirty:!0,dispose:!0,forget:!0};function Xo(h){var s=new Map;function c(d){var v=Ko.getValue();if(v){var y=s.get(d);y||s.set(d,y=new Set),v.dependOn(y)}}return c.dirty=function(d,v){var y=s.get(d);if(y){var _=v&&Dd.call(Lt,v)?v:"setDirty";Yo(y).forEach(function(T){return T[_]()}),s.delete(d),Da(y)}},c}function Hi(){var h=new se(typeof WeakMap=="function");return function(){return h.lookupArray(arguments)}}Hi();var Ni=new Set;function Wi(h,s){s===void 0&&(s=Object.create(null));var c=new kd(s.max||Math.pow(2,16),function(C){return C.dispose()}),d=s.keyArgs,v=s.makeCacheKey||Hi(),y=function(){var C=v.apply(null,d?d.apply(null,arguments):arguments);if(C===void 0)return h.apply(null,arguments);var A=c.get(C);A||(c.set(C,A=new V_(h)),A.subscribe=s.subscribe,A.forget=function(){return c.delete(C)});var D=A.recompute(Array.prototype.slice.call(arguments));return c.set(C,A),Ni.add(c),Ko.hasValue()||(Ni.forEach(function(U){return U.clean()}),Ni.clear()),D};function _(C){var A=c.get(C);A&&A.setDirty()}function T(C){var A=c.get(C);if(A)return A.peek()}function I(C){return c.delete(C)}return Object.defineProperty(y,"size",{get:function(){return c.map.size},configurable:!1,enumerable:!1}),y.dirtyKey=_,y.dirty=function(){_(v.apply(null,arguments))},y.peekKey=T,y.peek=function(){return T(v.apply(null,arguments))},y.forgetKey=I,y.forget=function(){return I(v.apply(null,arguments))},y.makeCacheKey=v,y.getKey=d?function(){return v.apply(null,d.apply(null,arguments))}:v,Object.freeze(y)}var ci=new Tl,Ld=new WeakMap;function Fs(h){var s=Ld.get(h);return s||Ld.set(h,s={vars:new Set,dep:Xo()}),s}function jv(h){Fs(h).vars.forEach(function(s){return s.forgetCache(h)})}function H_(h){var s=new Set,c=new Set,d=function(y){if(arguments.length>0){if(h!==y){h=y,s.forEach(function(I){Fs(I).dep.dirty(d),Ud(I)});var _=Array.from(c);c.clear(),_.forEach(function(I){return I(h)})}}else{var T=ci.getValue();T&&(v(T),Fs(T).dep(d))}return h};d.onNextChange=function(y){return c.add(y),function(){c.delete(y)}};var v=d.attachCache=function(y){return s.add(y),Fs(y).vars.add(d),d};return d.forgetCache=function(y){return s.delete(y)},d}function Ud(h){h.broadcastWatches&&h.broadcastWatches()}var Bs=function(){function h(s){var c=s.cache,d=s.client,v=s.resolvers,y=s.fragmentMatcher;this.cache=c,d&&(this.client=d),v&&this.addResolvers(v),y&&this.setFragmentMatcher(y)}return h.prototype.addResolvers=function(s){var c=this;this.resolvers=this.resolvers||{},Array.isArray(s)?s.forEach(function(d){c.resolvers=Gu(c.resolvers,d)}):this.resolvers=Gu(this.resolvers,s)},h.prototype.setResolvers=function(s){this.resolvers={},this.addResolvers(s)},h.prototype.getResolvers=function(){return this.resolvers||{}},h.prototype.runResolvers=function(s){var c=s.document,d=s.remoteResult,v=s.context,y=s.variables,_=s.onlyRunForcedResolvers,T=_!==void 0&&_;return Qr(this,void 0,void 0,function(){return Xr(this,function(I){return c?[2,this.resolveDocument(c,d.data,v,y,this.fragmentMatcher,T).then(function(C){return le(le({},d),{data:C.result})})]:[2,d]})})},h.prototype.setFragmentMatcher=function(s){this.fragmentMatcher=s},h.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},h.prototype.clientQuery=function(s){return Ls(["client"],s)&&this.resolvers?s:null},h.prototype.serverQuery=function(s){return function(c){Ps(c);var d=Na([{test:function(v){return v.name.value==="client"},remove:!0}],c);return d&&(d=Fr(d,{FragmentDefinition:{enter:function(v){if(v.selectionSet&&v.selectionSet.selections.every(function(y){return Oe(y)&&y.name.value==="__typename"}))return null}}})),d}(s)},h.prototype.prepareContext=function(s){var c=this.cache;return le(le({},s),{cache:c,getCacheKey:function(d){return c.identify(d)}})},h.prototype.addExportedVariables=function(s,c,d){return c===void 0&&(c={}),d===void 0&&(d={}),Qr(this,void 0,void 0,function(){return Xr(this,function(v){return s?[2,this.resolveDocument(s,this.buildRootValueFromCache(s,c)||{},this.prepareContext(d),c).then(function(y){return le(le({},c),y.exportedVariables)})]:[2,le({},c)]})})},h.prototype.shouldForceResolvers=function(s){var c=!1;return Fr(s,{Directive:{enter:function(d){if(d.name.value==="client"&&d.arguments&&(c=d.arguments.some(function(v){return v.name.value==="always"&&v.value.kind==="BooleanValue"&&v.value.value===!0})))return Av}}}),c},h.prototype.buildRootValueFromCache=function(s,c){return this.cache.diff({query:B_(s),variables:c,returnPartialData:!0,optimistic:!1}).result},h.prototype.resolveDocument=function(s,c,d,v,y,_){return d===void 0&&(d={}),v===void 0&&(v={}),y===void 0&&(y=function(){return!0}),_===void 0&&(_=!1),Qr(this,void 0,void 0,function(){var T,I,C,A,D,U,q,Z,z;return Xr(this,function(ne){return T=fl(s),I=Cu(s),C=$o(I),A=T.operation,D=A?A.charAt(0).toUpperCase()+A.slice(1):"Query",q=(U=this).cache,Z=U.client,z={fragmentMap:C,context:le(le({},d),{cache:q,client:Z}),variables:v,fragmentMatcher:y,defaultOperationType:D,exportedVariables:{},onlyRunForcedResolvers:_},[2,this.resolveSelectionSet(T.selectionSet,c,z).then(function(he){return{result:he,exportedVariables:z.exportedVariables}})]})})},h.prototype.resolveSelectionSet=function(s,c,d){return Qr(this,void 0,void 0,function(){var v,y,_,T,I,C=this;return Xr(this,function(A){return v=d.fragmentMap,y=d.context,_=d.variables,T=[c],I=function(D){return Qr(C,void 0,void 0,function(){var U,q;return Xr(this,function(Z){return Lu(D,_)?Oe(D)?[2,this.resolveField(D,c,d).then(function(z){var ne;z!==void 0&&T.push(((ne={})[Fe(D)]=z,ne))})]:(De(D)?U=D:(U=v[D.name.value],__DEV__?ye(U,"No fragment named "+D.name.value):ye(U,11)),U&&U.typeCondition&&(q=U.typeCondition.name.value,d.fragmentMatcher(c,q,y))?[2,this.resolveSelectionSet(U.selectionSet,c,d).then(function(z){T.push(z)})]:[2]):[2]})})},[2,Promise.all(s.selections.map(I)).then(function(){return $u(T)})]})})},h.prototype.resolveField=function(s,c,d){return Qr(this,void 0,void 0,function(){var v,y,_,T,I,C,A,D,U,q=this;return Xr(this,function(Z){return v=d.variables,y=s.name.value,_=Fe(s),T=y!==_,I=c[_]||c[y],C=Promise.resolve(I),d.onlyRunForcedResolvers&&!this.shouldForceResolvers(s)||(A=c.__typename||d.defaultOperationType,(D=this.resolvers&&this.resolvers[A])&&(U=D[T?y:_])&&(C=Promise.resolve(ci.withValue(this.cache,U,[c,$e(s,v),d.context,{field:s,fragmentMap:d.fragmentMap}])))),[2,C.then(function(z){return z===void 0&&(z=I),s.directives&&s.directives.forEach(function(ne){ne.name.value==="export"&&ne.arguments&&ne.arguments.forEach(function(he){he.name.value==="as"&&he.value.kind==="StringValue"&&(d.exportedVariables[he.value.value]=z)})}),s.selectionSet?z==null?z:Array.isArray(z)?q.resolveSubSelectedArray(s,z,d):s.selectionSet?q.resolveSelectionSet(s.selectionSet,z,d):void 0:z})]})})},h.prototype.resolveSubSelectedArray=function(s,c,d){var v=this;return Promise.all(c.map(function(y){return y===null?null:Array.isArray(y)?v.resolveSubSelectedArray(s,y,d):s.selectionSet?v.resolveSelectionSet(s.selectionSet,y,d):void 0}))},h}(),ho=new(_e?WeakMap:Map);function Fd(h,s){var c=h[s];typeof c=="function"&&(h[s]=function(){return ho.set(h,(ho.get(h)+1)%1e15),c.apply(this,arguments)})}function Bd(h){h.notifyTimeout&&(clearTimeout(h.notifyTimeout),h.notifyTimeout=void 0)}var ki=function(){function h(s,c){c===void 0&&(c=s.generateQueryId()),this.queryId=c,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var d=this.cache=s.cache;ho.has(d)||(ho.set(d,0),Fd(d,"evict"),Fd(d,"modify"),Fd(d,"reset"))}return h.prototype.init=function(s){var c=s.networkStatus||lr.loading;return this.variables&&this.networkStatus!==lr.loading&&!ln(this.variables,s.variables)&&(c=lr.setVariables),ln(s.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:s.document,variables:s.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:c}),s.observableQuery&&this.setObservableQuery(s.observableQuery),s.lastRequestId&&(this.lastRequestId=s.lastRequestId),this},h.prototype.reset=function(){Bd(this),this.lastDiff=void 0,this.dirty=!1},h.prototype.getDiff=function(s){s===void 0&&(s=this.variables);var c=this.getDiffOptions(s);if(this.lastDiff&&ln(c,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=s);var d=this.observableQuery;if(d&&d.options.fetchPolicy==="no-cache")return{complete:!1};var v=this.cache.diff(c);return this.updateLastDiff(v,c),v},h.prototype.updateLastDiff=function(s,c){this.lastDiff=s?{diff:s,options:c||this.getDiffOptions()}:void 0},h.prototype.getDiffOptions=function(s){var c;return s===void 0&&(s=this.variables),{query:this.document,variables:s,returnPartialData:!0,optimistic:!0,canonizeResults:(c=this.observableQuery)===null||c===void 0?void 0:c.options.canonizeResults}},h.prototype.setDiff=function(s){var c=this,d=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(s),this.dirty||ln(d&&d.result,s&&s.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return c.notify()},0)))},h.prototype.setObservableQuery=function(s){var c=this;s!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=s,s?(s.queryInfo=this,this.listeners.add(this.oqListener=function(){c.getDiff().fromOptimisticTransaction?s.observe():s.reobserve()})):delete this.oqListener)},h.prototype.notify=function(){var s=this;Bd(this),this.shouldNotify()&&this.listeners.forEach(function(c){return c(s)}),this.dirty=!1},h.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Us(this.networkStatus)&&this.observableQuery){var s=this.observableQuery.options.fetchPolicy;if(s!=="cache-only"&&s!=="cache-and-network")return!1}return!0},h.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=h.prototype.cancel,this.subscriptions.forEach(function(c){return c.unsubscribe()});var s=this.observableQuery;s&&s.stopPolling()}},h.prototype.cancel=function(){},h.prototype.updateWatch=function(s){var c=this;s===void 0&&(s=this.variables);var d=this.observableQuery;if(!d||d.options.fetchPolicy!=="no-cache"){var v=le(le({},this.getDiffOptions(s)),{watcher:this,callback:function(y){return c.setDiff(y)}});this.lastWatch&&ln(v,this.lastWatch)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=v))}},h.prototype.resetLastWrite=function(){this.lastWrite=void 0},h.prototype.shouldWrite=function(s,c){var d=this.lastWrite;return!(d&&d.dmCount===ho.get(this.cache)&&ln(c,d.variables)&&ln(s.data,d.result.data))},h.prototype.markResult=function(s,c,d){var v=this;this.graphQLErrors=oe(s.errors)?s.errors:[],this.reset(),c.fetchPolicy==="no-cache"?this.updateLastDiff({result:s.data,complete:!0},this.getDiffOptions(c.variables)):d!==0&&(Hu(s,c.errorPolicy)?this.cache.performTransaction(function(y){if(v.shouldWrite(s,c.variables))y.writeQuery({query:v.document,data:s.data,variables:c.variables,overwrite:d===1}),v.lastWrite={result:s,variables:c.variables,dmCount:ho.get(v.cache)};else if(v.lastDiff&&v.lastDiff.diff.complete)return void(s.data=v.lastDiff.diff.result);var _=v.getDiffOptions(c.variables),T=y.diff(_);v.stopped||v.updateWatch(c.variables),v.updateLastDiff(T,_),T.complete&&(s.data=T.result)}):this.lastWrite=void 0)},h.prototype.markReady=function(){return this.networkError=null,this.networkStatus=lr.ready},h.prototype.markError=function(s){return this.networkStatus=lr.error,this.lastWrite=void 0,this.reset(),s.graphQLErrors&&(this.graphQLErrors=s.graphQLErrors),s.networkError&&(this.networkError=s.networkError),s},h}();function Hu(h,s){s===void 0&&(s="none");var c=s==="ignore"||s==="all",d=!or(h);return!d&&c&&h.data&&(d=!0),d}var Fa=Object.prototype.hasOwnProperty,mi=function(){function h(s){var c=s.cache,d=s.link,v=s.queryDeduplication,y=v!==void 0&&v,_=s.onBroadcast,T=s.ssrMode,I=T!==void 0&&T,C=s.clientAwareness,A=C===void 0?{}:C,D=s.localState,U=s.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(_e?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=c,this.link=d,this.queryDeduplication=y,this.clientAwareness=A,this.localState=D||new Bs({cache:c}),this.ssrMode=I,this.assumeImmutableResults=!!U,(this.onBroadcast=_)&&(this.mutationStore=Object.create(null))}return h.prototype.stop=function(){var s=this;this.queries.forEach(function(c,d){s.stopQueryNoBroadcast(d)}),this.cancelPendingFetches(__DEV__?new qe("QueryManager stopped while query was in flight"):new qe(13))},h.prototype.cancelPendingFetches=function(s){this.fetchCancelFns.forEach(function(c){return c(s)}),this.fetchCancelFns.clear()},h.prototype.mutate=function(s){var c=s.mutation,d=s.variables,v=s.optimisticResponse,y=s.updateQueries,_=s.refetchQueries,T=_===void 0?[]:_,I=s.awaitRefetchQueries,C=I!==void 0&&I,A=s.update,D=s.onQueryUpdated,U=s.errorPolicy,q=U===void 0?"none":U,Z=s.fetchPolicy,z=Z===void 0?"network-only":Z,ne=s.keepRootFields,he=s.context;return Qr(this,void 0,void 0,function(){var Le,Xe,at;return Xr(this,function(Re){switch(Re.label){case 0:return __DEV__?ye(c,"mutation option is required. You must specify your GraphQL document in the mutation option."):ye(c,14),__DEV__?ye(z==="network-only"||z==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):ye(z==="network-only"||z==="no-cache",15),Le=this.generateMutationId(),c=this.transform(c).document,d=this.getVariables(c,d),this.transform(c).hasClientExports?[4,this.localState.addExportedVariables(c,d,he)]:[3,2];case 1:d=Re.sent(),Re.label=2;case 2:return Xe=this.mutationStore&&(this.mutationStore[Le]={mutation:c,variables:d,loading:!0,error:null}),v&&this.markMutationOptimistic(v,{mutationId:Le,document:c,variables:d,fetchPolicy:z,errorPolicy:q,context:he,updateQueries:y,update:A,keepRootFields:ne}),this.broadcastQueries(),at=this,[2,new Promise(function(Ge,Nt){return vi(at.getObservableFromLink(c,le(le({},he),{optimisticResponse:v}),d,!1),function(Je){if(or(Je)&&q==="none")throw new Pe({graphQLErrors:Je.errors});Xe&&(Xe.loading=!1,Xe.error=null);var xt=le({},Je);return typeof T=="function"&&(T=T(xt)),q==="ignore"&&or(xt)&&delete xt.errors,at.markMutationResult({mutationId:Le,result:xt,document:c,variables:d,fetchPolicy:z,errorPolicy:q,context:he,update:A,updateQueries:y,awaitRefetchQueries:C,refetchQueries:T,removeOptimistic:v?Le:void 0,onQueryUpdated:D,keepRootFields:ne})}).subscribe({next:function(Je){at.broadcastQueries(),Ge(Je)},error:function(Je){Xe&&(Xe.loading=!1,Xe.error=Je),v&&at.cache.removeOptimistic(Le),at.broadcastQueries(),Nt(Je instanceof Pe?Je:new Pe({networkError:Je}))}})})]}})})},h.prototype.markMutationResult=function(s,c){var d=this;c===void 0&&(c=this.cache);var v=s.result,y=[],_=s.fetchPolicy==="no-cache";if(!_&&Hu(v,s.errorPolicy)){y.push({result:v.data,dataId:"ROOT_MUTATION",query:s.document,variables:s.variables});var T=s.updateQueries;T&&this.queries.forEach(function(C,A){var D=C.observableQuery,U=D&&D.queryName;if(U&&Fa.call(T,U)){var q=T[U],Z=d.queries.get(A),z=Z.document,ne=Z.variables,he=c.diff({query:z,variables:ne,returnPartialData:!0,optimistic:!1}),Le=he.result;if(he.complete&&Le){var Xe=q(Le,{mutationResult:v,queryName:z&&Jr(z)||void 0,queryVariables:ne});Xe&&y.push({result:Xe,dataId:"ROOT_QUERY",query:z,variables:ne})}}})}if(y.length>0||s.refetchQueries||s.update||s.onQueryUpdated||s.removeOptimistic){var I=[];if(this.refetchQueries({updateCache:function(C){_||y.forEach(function(U){return C.write(U)});var A=s.update;if(A){if(!_){var D=C.diff({id:"ROOT_MUTATION",query:d.transform(s.document).asQuery,variables:s.variables,optimistic:!1,returnPartialData:!0});D.complete&&(v=le(le({},v),{data:D.result}))}A(C,v,{context:s.context,variables:s.variables})}_||s.keepRootFields||C.modify({id:"ROOT_MUTATION",fields:function(U,q){var Z=q.fieldName,z=q.DELETE;return Z==="__typename"?U:z}})},include:s.refetchQueries,optimistic:!1,removeOptimistic:s.removeOptimistic,onQueryUpdated:s.onQueryUpdated||null}).forEach(function(C){return I.push(C)}),s.awaitRefetchQueries||s.onQueryUpdated)return Promise.all(I).then(function(){return v})}return Promise.resolve(v)},h.prototype.markMutationOptimistic=function(s,c){var d=this,v=typeof s=="function"?s(c.variables):s;return this.cache.recordOptimisticTransaction(function(y){try{d.markMutationResult(le(le({},c),{result:{data:v}}),y)}catch(_){__DEV__&&ye.error(_)}},c.mutationId)},h.prototype.fetchQuery=function(s,c,d){return this.fetchQueryObservable(s,c,d).promise},h.prototype.getQueryStore=function(){var s=Object.create(null);return this.queries.forEach(function(c,d){s[d]={variables:c.variables,networkStatus:c.networkStatus,networkError:c.networkError,graphQLErrors:c.graphQLErrors}}),s},h.prototype.resetErrors=function(s){var c=this.queries.get(s);c&&(c.networkError=void 0,c.graphQLErrors=[])},h.prototype.transform=function(s){var c,d=this.transformCache;if(!d.has(s)){var v=this.cache.transformDocument(s),y=(c=this.cache.transformForLink(v),Na([El],Ps(c))),_=this.localState.clientQuery(v),T=y&&this.localState.serverQuery(y),I={document:v,hasClientExports:j_(v),hasForcedResolvers:this.localState.shouldForceResolvers(v),clientQuery:_,serverQuery:T,defaultVars:Pu(Ru(v)),asQuery:le(le({},v),{definitions:v.definitions.map(function(A){return A.kind==="OperationDefinition"&&A.operation!=="query"?le(le({},A),{operation:"query"}):A})})},C=function(A){A&&!d.has(A)&&d.set(A,I)};C(s),C(v),C(_),C(T)}return d.get(s)},h.prototype.getVariables=function(s,c){return le(le({},this.transform(s).defaultVars),c)},h.prototype.watchQuery=function(s){(s=le(le({},s),{variables:this.getVariables(s.query,s.variables)})).notifyOnNetworkStatusChange===void 0&&(s.notifyOnNetworkStatusChange=!1);var c=new ki(this),d=new xd({queryManager:this,queryInfo:c,options:s});return this.queries.set(d.queryId,c),c.init({document:s.query,observableQuery:d,variables:s.variables}),d},h.prototype.query=function(s,c){var d=this;return c===void 0&&(c=this.generateQueryId()),__DEV__?ye(s.query,"query option is required. You must specify your GraphQL document in the query option."):ye(s.query,16),__DEV__?ye(s.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):ye(s.query.kind==="Document",17),__DEV__?ye(!s.returnPartialData,"returnPartialData option only supported on watchQuery."):ye(!s.returnPartialData,18),__DEV__?ye(!s.pollInterval,"pollInterval option only supported on watchQuery."):ye(!s.pollInterval,19),this.fetchQuery(c,s).finally(function(){return d.stopQuery(c)})},h.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},h.prototype.generateRequestId=function(){return this.requestIdCounter++},h.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},h.prototype.stopQueryInStore=function(s){this.stopQueryInStoreNoBroadcast(s),this.broadcastQueries()},h.prototype.stopQueryInStoreNoBroadcast=function(s){var c=this.queries.get(s);c&&c.stop()},h.prototype.clearStore=function(s){return s===void 0&&(s={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new qe("Store reset while query was in flight (not completed in link chain)"):new qe(20)),this.queries.forEach(function(c){c.observableQuery?c.networkStatus=lr.loading:c.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(s)},h.prototype.getObservableQueries=function(s){var c=this;s===void 0&&(s="active");var d=new Map,v=new Map,y=new Set;return Array.isArray(s)&&s.forEach(function(_){var T;typeof _=="string"?v.set(_,!1):nr(T=_)&&T.kind==="Document"&&Array.isArray(T.definitions)?v.set(c.transform(_).document,!1):nr(_)&&_.query&&y.add(_)}),this.queries.forEach(function(_,T){var I=_.observableQuery,C=_.document;if(I){if(s==="all")return void d.set(T,I);var A=I.queryName;if(I.options.fetchPolicy==="standby"||s==="active"&&!I.hasObservers())return;(s==="active"||A&&v.has(A)||C&&v.has(C))&&(d.set(T,I),A&&v.set(A,!0),C&&v.set(C,!0))}}),y.size&&y.forEach(function(_){var T=Pd("legacyOneTimeQuery"),I=c.getQuery(T).init({document:_.query,variables:_.variables}),C=new xd({queryManager:c,queryInfo:I,options:le(le({},_),{fetchPolicy:"network-only"})});ye(C.queryId===T),I.setObservableQuery(C),d.set(T,C)}),__DEV__&&v.size&&v.forEach(function(_,T){_||__DEV__&&ye.warn("Unknown query "+(typeof T=="string"?"named ":"")+JSON.stringify(T,null,2)+" requested in refetchQueries options.include array")}),d},h.prototype.reFetchObservableQueries=function(s){var c=this;s===void 0&&(s=!1);var d=[];return this.getObservableQueries(s?"all":"active").forEach(function(v,y){var _=v.options.fetchPolicy;v.resetLastResults(),(s||_!=="standby"&&_!=="cache-only")&&d.push(v.refetch()),c.getQuery(y).setDiff(null)}),this.broadcastQueries(),Promise.all(d)},h.prototype.setObservableQuery=function(s){this.getQuery(s.queryId).setObservableQuery(s)},h.prototype.startGraphQLSubscription=function(s){var c=this,d=s.query,v=s.fetchPolicy,y=s.errorPolicy,_=s.variables,T=s.context,I=T===void 0?{}:T;d=this.transform(d).document,_=this.getVariables(d,_);var C=function(D){return c.getObservableFromLink(d,I,D).map(function(U){if(v!=="no-cache"&&(Hu(U,y)&&c.cache.write({query:d,result:U.data,dataId:"ROOT_SUBSCRIPTION",variables:D}),c.broadcastQueries()),or(U))throw new Pe({graphQLErrors:U.errors});return U})};if(this.transform(d).hasClientExports){var A=this.localState.addExportedVariables(d,_,I).then(C);return new Kt(function(D){var U=null;return A.then(function(q){return U=q.subscribe(D)},D.error),function(){return U&&U.unsubscribe()}})}return C(_)},h.prototype.stopQuery=function(s){this.stopQueryNoBroadcast(s),this.broadcastQueries()},h.prototype.stopQueryNoBroadcast=function(s){this.stopQueryInStoreNoBroadcast(s),this.removeQuery(s)},h.prototype.removeQuery=function(s){this.fetchCancelFns.delete(s),this.getQuery(s).stop(),this.queries.delete(s)},h.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(s){return s.notify()})},h.prototype.getLocalState=function(){return this.localState},h.prototype.getObservableFromLink=function(s,c,d,v){var y,_,T=this;v===void 0&&(v=(y=c==null?void 0:c.queryDeduplication)!==null&&y!==void 0?y:this.queryDeduplication);var I=this.transform(s).serverQuery;if(I){var C=this.inFlightLinkObservables,A=this.link,D={query:I,variables:d,operationName:Jr(I)||void 0,context:this.prepareContext(le(le({},c),{forceFetch:!v}))};if(c=D.context,v){var U=C.get(I)||new Map;C.set(I,U);var q=Ct(d);if(!(_=U.get(q))){var Z=new zo([Du(A,D)]);U.set(q,_=Z),Z.cleanup(function(){U.delete(q)&&U.size<1&&C.delete(I)})}}else _=new zo([Du(A,D)])}else _=new zo([Kt.of({data:{}})]),c=this.prepareContext(c);var z=this.transform(s).clientQuery;return z&&(_=vi(_,function(ne){return T.localState.runResolvers({document:z,remoteResult:ne,context:c,variables:d})})),_},h.prototype.getResultsFromLink=function(s,c,d){var v=s.lastRequestId=this.generateRequestId();return vi(this.getObservableFromLink(s.document,d.context,d.variables),function(y){var _=oe(y.errors);if(v>=s.lastRequestId){if(_&&d.errorPolicy==="none")throw s.markError(new Pe({graphQLErrors:y.errors}));s.markResult(y,d,c),s.markReady()}var T={data:y.data,loading:!1,networkStatus:s.networkStatus||lr.ready};return _&&d.errorPolicy!=="ignore"&&(T.errors=y.errors),T},function(y){var _=y.hasOwnProperty("graphQLErrors")?y:new Pe({networkError:y});throw v>=s.lastRequestId&&s.markError(_),_})},h.prototype.fetchQueryObservable=function(s,c,d){var v=this;d===void 0&&(d=lr.loading);var y=this.transform(c.query).document,_=this.getVariables(y,c.variables),T=this.getQuery(s),I=c.fetchPolicy,C=I===void 0?"cache-first":I,A=c.errorPolicy,D=A===void 0?"none":A,U=c.returnPartialData,q=U!==void 0&&U,Z=c.notifyOnNetworkStatusChange,z=Z!==void 0&&Z,ne=c.context,he=ne===void 0?{}:ne,Le=Object.assign({},c,{query:y,variables:_,fetchPolicy:C,errorPolicy:D,returnPartialData:q,notifyOnNetworkStatusChange:z,context:he}),Xe=function(Re){return Le.variables=Re,v.fetchQueryByPolicy(T,Le,d)};this.fetchCancelFns.set(s,function(Re){setTimeout(function(){return at.cancel(Re)})});var at=new zo(this.transform(Le.query).hasClientExports?this.localState.addExportedVariables(Le.query,Le.variables,Le.context).then(Xe):Xe(Le.variables));return at.cleanup(function(){v.fetchCancelFns.delete(s),function(Re){var Ge=Re.fetchPolicy,Nt=Ge===void 0?"cache-first":Ge,Je=Re.nextFetchPolicy;Je&&(Re.fetchPolicy=typeof Je=="function"?Je.call(Re,Nt):Je)}(c)}),at},h.prototype.refetchQueries=function(s){var c=this,d=s.updateCache,v=s.include,y=s.optimistic,_=y!==void 0&&y,T=s.removeOptimistic,I=T===void 0?_?Pd("refetchQueries"):void 0:T,C=s.onQueryUpdated,A=new Map;v&&this.getObservableQueries(v).forEach(function(U,q){A.set(q,{oq:U,lastDiff:c.getQuery(q).getDiff()})});var D=new Map;return d&&this.cache.batch({update:d,optimistic:_&&I||!1,removeOptimistic:I,onWatchUpdated:function(U,q,Z){var z=U.watcher instanceof ki&&U.watcher.observableQuery;if(z){if(C){A.delete(z.queryId);var ne=C(z,q,Z);return ne===!0&&(ne=z.refetch()),ne!==!1&&D.set(z,ne),!1}C!==null&&A.set(z.queryId,{oq:z,lastDiff:Z,diff:q})}}}),A.size&&A.forEach(function(U,q){var Z,z=U.oq,ne=U.lastDiff,he=U.diff;if(C){if(!he){var Le=z.queryInfo;Le.reset(),he=Le.getDiff()}Z=C(z,he,ne)}C&&Z!==!0||(Z=z.refetch()),Z!==!1&&D.set(z,Z),q.indexOf("legacyOneTimeQuery")>=0&&c.stopQueryNoBroadcast(q)}),I&&this.cache.removeOptimistic(I),D},h.prototype.fetchQueryByPolicy=function(s,c,d){var v=this,y=c.query,_=c.variables,T=c.fetchPolicy,I=c.refetchWritePolicy,C=c.errorPolicy,A=c.returnPartialData,D=c.context,U=c.notifyOnNetworkStatusChange,q=s.networkStatus;s.init({document:y,variables:_,networkStatus:d});var Z=function(){return s.getDiff(_)},z=function(at,Re){Re===void 0&&(Re=s.networkStatus||lr.loading);var Ge=at.result;!__DEV__||A||ln(Ge,{})||Dv(at.missing);var Nt=function(Je){return Kt.of(le({data:Je,loading:Us(Re),networkStatus:Re},at.complete?null:{partial:!0}))};return Ge&&v.transform(y).hasForcedResolvers?v.localState.runResolvers({document:y,remoteResult:{data:Ge},context:D,variables:_,onlyRunForcedResolvers:!0}).then(function(Je){return Nt(Je.data||void 0)}):Nt(Ge)},ne=T==="no-cache"?0:d===lr.refetch&&I!=="merge"?1:2,he=function(){return v.getResultsFromLink(s,ne,{variables:_,context:D,fetchPolicy:T,errorPolicy:C})},Le=U&&typeof q=="number"&&q!==d&&Us(d);switch(T){default:case"cache-first":return(Xe=Z()).complete?[z(Xe,s.markReady())]:A||Le?[z(Xe),he()]:[he()];case"cache-and-network":var Xe;return(Xe=Z()).complete||A||Le?[z(Xe),he()]:[he()];case"cache-only":return[z(Z(),s.markReady())];case"network-only":return Le?[z(Z()),he()]:[he()];case"no-cache":return Le?[z(s.getDiff()),he()]:[he()];case"standby":return[]}},h.prototype.getQuery=function(s){return s&&!this.queries.has(s)&&this.queries.set(s,new ki(this,s)),this.queries.get(s)},h.prototype.prepareContext=function(s){s===void 0&&(s={});var c=this.localState.prepareContext(s);return le(le({},c),{clientAwareness:this.clientAwareness})},h}(),jd=!1;function Al(h,s){return uo(h,s,s.variables&&{variables:le(le({},h.variables),s.variables)})}var js=function(){function h(s){var c=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var d=s.uri,v=s.credentials,y=s.headers,_=s.cache,T=s.ssrMode,I=T!==void 0&&T,C=s.ssrForceFetchDelay,A=C===void 0?0:C,D=s.connectToDevTools,U=D===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:D,q=s.queryDeduplication,Z=q===void 0||q,z=s.defaultOptions,ne=s.assumeImmutableResults,he=ne!==void 0&&ne,Le=s.resolvers,Xe=s.typeDefs,at=s.fragmentMatcher,Re=s.name,Ge=s.version,Nt=s.link;if(Nt||(Nt=d?new qn({uri:d,credentials:v,headers:y}):Vi.empty()),!_)throw __DEV__?new qe(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new qe(9);if(this.link=Nt,this.cache=_,this.disableNetworkFetches=I||A>0,this.queryDeduplication=Z,this.defaultOptions=z||{},this.typeDefs=Xe,A&&setTimeout(function(){return c.disableNetworkFetches=!1},A),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),U&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!jd&&__DEV__&&(jd=!0,typeof window<"u"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var Je=window.navigator,xt=Je&&Je.userAgent,tr=void 0;typeof xt=="string"&&(xt.indexOf("Chrome/")>-1?tr="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":xt.indexOf("Firefox/")>-1&&(tr="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),tr&&__DEV__&&ye.log("Download the Apollo DevTools for a better development experience: "+tr)}this.version="3.4.17",this.localState=new Bs({cache:_,client:this,resolvers:Le,fragmentMatcher:at}),this.queryManager=new mi({cache:this.cache,link:this.link,queryDeduplication:Z,ssrMode:I,clientAwareness:{name:Re,version:Ge},localState:this.localState,assumeImmutableResults:he,onBroadcast:U?function(){c.devToolsHookCb&&c.devToolsHookCb({action:{},state:{queries:c.queryManager.getQueryStore(),mutations:c.queryManager.mutationStore||{}},dataWithOptimisticResults:c.cache.extract(!0)})}:void 0})}return h.prototype.stop=function(){this.queryManager.stop()},h.prototype.watchQuery=function(s){return this.defaultOptions.watchQuery&&(s=Al(this.defaultOptions.watchQuery,s)),!this.disableNetworkFetches||s.fetchPolicy!=="network-only"&&s.fetchPolicy!=="cache-and-network"||(s=le(le({},s),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(s)},h.prototype.query=function(s){return this.defaultOptions.query&&(s=Al(this.defaultOptions.query,s)),__DEV__?ye(s.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):ye(s.fetchPolicy!=="cache-and-network",10),this.disableNetworkFetches&&s.fetchPolicy==="network-only"&&(s=le(le({},s),{fetchPolicy:"cache-first"})),this.queryManager.query(s)},h.prototype.mutate=function(s){return this.defaultOptions.mutate&&(s=Al(this.defaultOptions.mutate,s)),this.queryManager.mutate(s)},h.prototype.subscribe=function(s){return this.queryManager.startGraphQLSubscription(s)},h.prototype.readQuery=function(s,c){return c===void 0&&(c=!1),this.cache.readQuery(s,c)},h.prototype.readFragment=function(s,c){return c===void 0&&(c=!1),this.cache.readFragment(s,c)},h.prototype.writeQuery=function(s){this.cache.writeQuery(s),this.queryManager.broadcastQueries()},h.prototype.writeFragment=function(s){this.cache.writeFragment(s),this.queryManager.broadcastQueries()},h.prototype.__actionHookForDevTools=function(s){this.devToolsHookCb=s},h.prototype.__requestRaw=function(s){return Du(this.link,s)},h.prototype.resetStore=function(){var s=this;return Promise.resolve().then(function(){return s.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(s.resetStoreCallbacks.map(function(c){return c()}))}).then(function(){return s.reFetchObservableQueries()})},h.prototype.clearStore=function(){var s=this;return Promise.resolve().then(function(){return s.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(s.clearStoreCallbacks.map(function(c){return c()}))})},h.prototype.onResetStore=function(s){var c=this;return this.resetStoreCallbacks.push(s),function(){c.resetStoreCallbacks=c.resetStoreCallbacks.filter(function(d){return d!==s})}},h.prototype.onClearStore=function(s){var c=this;return this.clearStoreCallbacks.push(s),function(){c.clearStoreCallbacks=c.clearStoreCallbacks.filter(function(d){return d!==s})}},h.prototype.reFetchObservableQueries=function(s){return this.queryManager.reFetchObservableQueries(s)},h.prototype.refetchQueries=function(s){var c=this.queryManager.refetchQueries(s),d=[],v=[];c.forEach(function(_,T){d.push(T),v.push(_)});var y=Promise.all(v);return y.queries=d,y.results=v,y.catch(function(_){__DEV__&&ye.debug("In client.refetchQueries, Promise.all promise rejected with error "+_)}),y},h.prototype.getObservableQueries=function(s){return s===void 0&&(s="active"),this.queryManager.getObservableQueries(s)},h.prototype.extract=function(s){return this.cache.extract(s)},h.prototype.restore=function(s){return this.cache.restore(s)},h.prototype.addResolvers=function(s){this.localState.addResolvers(s)},h.prototype.setResolvers=function(s){this.localState.setResolvers(s)},h.prototype.getResolvers=function(){return this.localState.getResolvers()},h.prototype.setLocalStateFragmentMatcher=function(s){this.localState.setFragmentMatcher(s)},h.prototype.setLink=function(s){this.link=this.queryManager.link=s},h}(),Zo=function(){function h(){this.getFragmentDoc=Wi(ll)}return h.prototype.batch=function(s){var c=typeof s.optimistic=="string"?s.optimistic:s.optimistic===!1?null:void 0;this.performTransaction(s.update,c)},h.prototype.recordOptimisticTransaction=function(s,c){this.performTransaction(s,c)},h.prototype.transformDocument=function(s){return s},h.prototype.identify=function(s){},h.prototype.gc=function(){return[]},h.prototype.modify=function(s){return!1},h.prototype.transformForLink=function(s){return s},h.prototype.readQuery=function(s,c){return c===void 0&&(c=!!s.optimistic),this.read(le(le({},s),{rootId:s.id||"ROOT_QUERY",optimistic:c}))},h.prototype.readFragment=function(s,c){return c===void 0&&(c=!!s.optimistic),this.read(le(le({},s),{query:this.getFragmentDoc(s.fragment,s.fragmentName),rootId:s.id,optimistic:c}))},h.prototype.writeQuery=function(s){var c=s.id,d=s.data,v=gn(s,["id","data"]);return this.write(Object.assign(v,{dataId:c||"ROOT_QUERY",result:d}))},h.prototype.writeFragment=function(s){var c=s.id,d=s.data,v=s.fragment,y=s.fragmentName,_=gn(s,["id","data","fragment","fragmentName"]);return this.write(Object.assign(_,{query:this.getFragmentDoc(v,y),dataId:c,result:d}))},h}(),Gd=function(h){function s(c,d,v,y){var _=h.call(this,c)||this;return _.message=c,_.path=d,_.query=v,_.variables=y,_.__proto__=s.prototype,_}return _t(s,h),s}(Error);function $d(h){return __DEV__&&(s=h,(c=new Set([s])).forEach(function(d){nr(d)&&function(v){if(__DEV__&&!Object.isFrozen(v))try{Object.freeze(v)}catch(y){if(y instanceof TypeError)return null;throw y}return v}(d)===d&&Object.getOwnPropertyNames(d).forEach(function(v){nr(d[v])&&c.add(d[v])})})),h;var s,c}var qr=Object.prototype.hasOwnProperty;function Vd(h,s){var c=h.__typename,d=h.id,v=h._id;if(typeof c=="string"&&(s&&(s.keyObject=d!==void 0?{id:d}:v!==void 0?{_id:v}:void 0),d===void 0&&(d=v),d!==void 0))return c+":"+(typeof d=="number"||typeof d=="string"?d:JSON.stringify(d))}var dn={dataIdFromObject:Vd,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Il(h){var s=h.canonizeResults;return s===void 0?dn.canonizeResults:s}var qd=/^[_a-z][_0-9a-z]*/i;function _n(h){var s=h.match(qd);return s?s[0]:h}function Wu(h,s,c){return!!nr(s)&&(Array.isArray(s)?s.every(function(d){return Wu(h,d,c)}):h.selections.every(function(d){if(Oe(d)&&Lu(d,c)){var v=Fe(d);return qr.call(s,v)&&(!d.selectionSet||Wu(d.selectionSet,s[v],c))}return!0}))}function Jo(h){return nr(h)&&!qt(h)&&!Array.isArray(h)}var zi=Object.create(null),Ol=function(){return zi},Cn=Object.create(null),Ba=function(){function h(s,c){var d=this;this.policies=s,this.group=c,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(v,y){return $d(qt(v)?d.get(v.__ref,y):v&&v[y])},this.canRead=function(v){return qt(v)?d.has(v.__ref):typeof v=="object"},this.toReference=function(v,y){if(typeof v=="string")return Ci(v);if(qt(v))return v;var _=d.policies.identify(v)[0];if(_){var T=Ci(_);return y&&d.merge(_,v),T}}}return h.prototype.toObject=function(){return le({},this.data)},h.prototype.has=function(s){return this.lookup(s,!0)!==void 0},h.prototype.get=function(s,c){if(this.group.depend(s,c),qr.call(this.data,s)){var d=this.data[s];if(d&&qr.call(d,c))return d[c]}return c==="__typename"&&qr.call(this.policies.rootTypenamesById,s)?this.policies.rootTypenamesById[s]:this instanceof gi?this.parent.get(s,c):void 0},h.prototype.lookup=function(s,c){return c&&this.group.depend(s,"__exists"),qr.call(this.data,s)?this.data[s]:this instanceof gi?this.parent.lookup(s,c):this.policies.rootTypenamesById[s]?Object.create(null):void 0},h.prototype.merge=function(s,c){var d,v=this;qt(s)&&(s=s.__ref),qt(c)&&(c=c.__ref);var y=typeof s=="string"?this.lookup(d=s):s,_=typeof c=="string"?this.lookup(d=c):c;if(_){__DEV__?ye(typeof d=="string","store.merge expects a string ID"):ye(typeof d=="string",1);var T=new wl(zu).merge(y,_);if(this.data[d]=T,T!==y&&(delete this.refs[d],this.group.caching)){var I=Object.create(null);y||(I.__exists=1),Object.keys(_).forEach(function(C){if(!y||y[C]!==T[C]){I[C]=1;var A=_n(C);A===C||v.policies.hasKeyArgs(T.__typename,A)||(I[A]=1),T[C]!==void 0||v instanceof gi||delete T[C]}}),!I.__typename||y&&y.__typename||this.policies.rootTypenamesById[d]!==T.__typename||delete I.__typename,Object.keys(I).forEach(function(C){return v.group.dirty(d,C)})}}},h.prototype.modify=function(s,c){var d=this,v=this.lookup(s);if(v){var y=Object.create(null),_=!1,T=!0,I={DELETE:zi,INVALIDATE:Cn,isReference:qt,toReference:this.toReference,canRead:this.canRead,readField:function(C,A){return d.policies.readField(typeof C=="string"?{fieldName:C,from:A||Ci(s)}:C,{store:d})}};if(Object.keys(v).forEach(function(C){var A=_n(C),D=v[C];if(D!==void 0){var U=typeof c=="function"?c:c[C]||c[A];if(U){var q=U===Ol?zi:U($d(D),le(le({},I),{fieldName:A,storeFieldName:C,storage:d.getStorage(s,C)}));q===Cn?d.group.dirty(s,C):(q===zi&&(q=void 0),q!==D&&(y[C]=q,_=!0,D=q))}D!==void 0&&(T=!1)}}),_)return this.merge(s,y),T&&(this instanceof gi?this.data[s]=void 0:delete this.data[s],this.group.dirty(s,"__exists")),!0}return!1},h.prototype.delete=function(s,c,d){var v,y=this.lookup(s);if(y){var _=this.getFieldValue(y,"__typename"),T=c&&d?this.policies.getStoreFieldName({typename:_,fieldName:c,args:d}):c;return this.modify(s,T?((v={})[T]=Ol,v):Ol)}return!1},h.prototype.evict=function(s,c){var d=!1;return s.id&&(qr.call(this.data,s.id)&&(d=this.delete(s.id,s.fieldName,s.args)),this instanceof gi&&this!==c&&(d=this.parent.evict(s,c)||d),(s.fieldName||d)&&this.group.dirty(s.id,s.fieldName||"__exists")),d},h.prototype.clear=function(){this.replace(null)},h.prototype.extract=function(){var s=this,c=this.toObject(),d=[];return this.getRootIdSet().forEach(function(v){qr.call(s.policies.rootTypenamesById,v)||d.push(v)}),d.length&&(c.__META={extraRootIds:d.sort()}),c},h.prototype.replace=function(s){var c=this;if(Object.keys(this.data).forEach(function(y){s&&qr.call(s,y)||c.delete(y)}),s){var d=s.__META,v=gn(s,["__META"]);Object.keys(v).forEach(function(y){c.merge(y,v[y])}),d&&d.extraRootIds.forEach(this.retain,this)}},h.prototype.retain=function(s){return this.rootIds[s]=(this.rootIds[s]||0)+1},h.prototype.release=function(s){if(this.rootIds[s]>0){var c=--this.rootIds[s];return c||delete this.rootIds[s],c}return 0},h.prototype.getRootIdSet=function(s){return s===void 0&&(s=new Set),Object.keys(this.rootIds).forEach(s.add,s),this instanceof gi?this.parent.getRootIdSet(s):Object.keys(this.policies.rootTypenamesById).forEach(s.add,s),s},h.prototype.gc=function(){var s=this,c=this.getRootIdSet(),d=this.toObject();c.forEach(function(_){qr.call(d,_)&&(Object.keys(s.findChildRefIds(_)).forEach(c.add,c),delete d[_])});var v=Object.keys(d);if(v.length){for(var y=this;y instanceof gi;)y=y.parent;v.forEach(function(_){return y.delete(_)})}return v},h.prototype.findChildRefIds=function(s){if(!qr.call(this.refs,s)){var c=this.refs[s]=Object.create(null),d=this.data[s];if(!d)return c;var v=new Set([d]);v.forEach(function(y){qt(y)&&(c[y.__ref]=!0),nr(y)&&Object.keys(y).forEach(function(_){var T=y[_];nr(T)&&v.add(T)})})}return this.refs[s]},h.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},h}(),Gv=function(){function h(s,c){c===void 0&&(c=null),this.caching=s,this.parent=c,this.d=null,this.resetCaching()}return h.prototype.resetCaching=function(){this.d=this.caching?Xo():null,this.keyMaker=new se(_e)},h.prototype.depend=function(s,c){if(this.d){this.d(Hd(s,c));var d=_n(c);d!==c&&this.d(Hd(s,d)),this.parent&&this.parent.depend(s,c)}},h.prototype.dirty=function(s,c){this.d&&this.d.dirty(Hd(s,c),c==="__exists"?"forget":"setDirty")},h}();function Hd(h,s){return s+"#"+h}function Rl(h,s){ja(h)&&h.group.depend(s,"__exists")}(function(h){var s=function(c){function d(v){var y=v.policies,_=v.resultCaching,T=_===void 0||_,I=v.seed,C=c.call(this,y,new Gv(T))||this;return C.stump=new $v(C),C.storageTrie=new se(_e),I&&C.replace(I),C}return _t(d,c),d.prototype.addLayer=function(v,y){return this.stump.addLayer(v,y)},d.prototype.removeLayer=function(){return this},d.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},d}(h);h.Root=s})(Ba||(Ba={}));var gi=function(h){function s(c,d,v,y){var _=h.call(this,d.policies,y)||this;return _.id=c,_.parent=d,_.replay=v,_.group=y,v(_),_}return _t(s,h),s.prototype.addLayer=function(c,d){return new s(c,this,d,this.group)},s.prototype.removeLayer=function(c){var d=this,v=this.parent.removeLayer(c);return c===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(y){var _=d.data[y],T=v.lookup(y);T?_?_!==T&&Object.keys(_).forEach(function(I){ln(_[I],T[I])||d.group.dirty(y,I)}):(d.group.dirty(y,"__exists"),Object.keys(T).forEach(function(I){d.group.dirty(y,I)})):d.delete(y)}),v):v===this.parent?this:v.addLayer(this.id,this.replay)},s.prototype.toObject=function(){return le(le({},this.parent.toObject()),this.data)},s.prototype.findChildRefIds=function(c){var d=this.parent.findChildRefIds(c);return qr.call(this.data,c)?le(le({},d),h.prototype.findChildRefIds.call(this,c)):d},s.prototype.getStorage=function(){for(var c=this.parent;c.parent;)c=c.parent;return c.getStorage.apply(c,arguments)},s}(Ba),$v=function(h){function s(c){return h.call(this,"EntityStore.Stump",c,function(){},new Gv(c.group.caching,c.group))||this}return _t(s,h),s.prototype.removeLayer=function(){return this},s.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},s}(gi);function zu(h,s,c){var d=h[c],v=s[c];return ln(d,v)?d:v}function ja(h){return!!(h instanceof Ba&&h.group.caching)}function Wd(h,s){return new Gd(h.message,s.path.slice(),s.query,s.variables)}function zd(h){return[h.selectionSet,h.objectOrReference,h.context,h.context.canonizeResults]}var Kd=function(){function h(s){var c=this;this.knownResults=new(_e?WeakMap:Map),this.config=uo(s,{addTypename:s.addTypename!==!1,canonizeResults:Il(s)}),this.canon=s.canon||new gt,this.executeSelectionSet=Wi(function(d){var v,y=d.context.canonizeResults,_=zd(d);_[3]=!y;var T=(v=c.executeSelectionSet).peek.apply(v,_);return T?y?le(le({},T),{result:c.canon.admit(T.result)}):T:(Rl(d.context.store,d.enclosingRef.__ref),c.execSelectionSetImpl(d))},{max:this.config.resultCacheMaxSize,keyArgs:zd,makeCacheKey:function(d,v,y,_){if(ja(y.store))return y.store.makeCacheKey(d,qt(v)?v.__ref:v,y.varString,_)}}),this.executeSubSelectedArray=Wi(function(d){return Rl(d.context.store,d.enclosingRef.__ref),c.execSubSelectedArrayImpl(d)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(d){var v=d.field,y=d.array,_=d.context;if(ja(_.store))return _.store.makeCacheKey(v,y,_.varString)}})}return h.prototype.resetCanon=function(){this.canon=new gt},h.prototype.diffQueryAgainstStore=function(s){var c=s.store,d=s.query,v=s.rootId,y=v===void 0?"ROOT_QUERY":v,_=s.variables,T=s.returnPartialData,I=T===void 0||T,C=s.canonizeResults,A=C===void 0?this.config.canonizeResults:C,D=this.config.cache.policies;_=le(le({},Pu(xs(d))),_);var U=Ci(y),q=this.executeSelectionSet({selectionSet:fl(d).selectionSet,objectOrReference:U,enclosingRef:U,context:{store:c,query:d,policies:D,variables:_,varString:Ct(_),canonizeResults:A,fragmentMap:$o(Cu(d)),path:[]}}),Z=q.missing&&q.missing.length>0;if(Z&&!I)throw q.missing[0];return{result:q.result,missing:q.missing,complete:!Z}},h.prototype.isFresh=function(s,c,d,v){if(ja(v.store)&&this.knownResults.get(s)===d){var y=this.executeSelectionSet.peek(d,c,v,this.canon.isKnown(s));if(y&&s===y.result)return!0}return!1},h.prototype.execSelectionSetImpl=function(s){var c=this,d=s.selectionSet,v=s.objectOrReference,y=s.enclosingRef,_=s.context;if(qt(v)&&!_.policies.rootTypenamesById[v.__ref]&&!_.store.has(v.__ref))return{result:this.canon.empty,missing:[Wd(__DEV__?new qe("Dangling reference to missing "+v.__ref+" object"):new qe(5),_)]};var T=_.variables,I=_.policies,C=_.store,A=[],D={result:null},U=C.getFieldValue(v,"__typename");function q(){return D.missing||(D.missing=[])}function Z(he){var Le;return he.missing&&(Le=q()).push.apply(Le,he.missing),he.result}this.config.addTypename&&typeof U=="string"&&!I.rootIdsByTypename[U]&&A.push({__typename:U});var z=new Set(d.selections);z.forEach(function(he){var Le;if(Lu(he,T))if(Oe(he)){var Xe=I.readField({fieldName:he.name.value,field:he,variables:_.variables,from:v},_),at=Fe(he);_.path.push(at),Xe===void 0?Ms.added(he)||q().push(Wd(__DEV__?new qe("Can't find field '"+he.name.value+"' on "+(qt(v)?v.__ref+" object":"object "+JSON.stringify(v,null,2))):new qe(6),_)):Array.isArray(Xe)?Xe=Z(c.executeSubSelectedArray({field:he,array:Xe,enclosingRef:y,context:_})):he.selectionSet?Xe!=null&&(Xe=Z(c.executeSelectionSet({selectionSet:he.selectionSet,objectOrReference:Xe,enclosingRef:qt(Xe)?Xe:y,context:_}))):_.canonizeResults&&(Xe=c.canon.pass(Xe)),Xe!==void 0&&A.push(((Le={})[at]=Xe,Le)),ye(_.path.pop()===at)}else{var Re=Ri(he,_.fragmentMap);Re&&I.fragmentMatches(Re,U)&&Re.selectionSet.selections.forEach(z.add,z)}});var ne=$u(A);return D.result=_.canonizeResults?this.canon.admit(ne):$d(ne),this.knownResults.set(D.result,d),D},h.prototype.execSubSelectedArrayImpl=function(s){var c,d=this,v=s.field,y=s.array,_=s.enclosingRef,T=s.context;function I(C,A){return C.missing&&(c=c||[]).push.apply(c,C.missing),ye(T.path.pop()===A),C.result}return v.selectionSet&&(y=y.filter(T.store.canRead)),y=y.map(function(C,A){return C===null?null:(T.path.push(A),Array.isArray(C)?I(d.executeSubSelectedArray({field:v,array:C,enclosingRef:_,context:T}),A):v.selectionSet?I(d.executeSelectionSet({selectionSet:v.selectionSet,objectOrReference:C,enclosingRef:qt(C)?C:_,context:T}),A):(__DEV__&&function(D,U,q){if(!U.selectionSet){var Z=new Set([q]);Z.forEach(function(z){nr(z)&&(__DEV__?ye(!qt(z),"Missing selection set for object of type "+function(ne,he){return qt(he)?ne.get(he.__ref,"__typename"):he&&he.__typename}(D,z)+" returned for query field "+U.name.value):ye(!qt(z),7),Object.values(z).forEach(Z.add,Z))})}}(T.store,v,C),ye(T.path.pop()===A),C))}),{result:T.canonizeResults?this.canon.admit(y):y,missing:c}},h}(),Yd=function(){function h(s,c){this.cache=s,this.reader=c}return h.prototype.writeToStore=function(s,c){var d=this,v=c.query,y=c.result,_=c.dataId,T=c.variables,I=c.overwrite,C=Ru(v),A=new wl;T=le(le({},Pu(C)),T);var D={store:s,written:Object.create(null),merge:function(q,Z){return A.merge(q,Z)},variables:T,varString:Ct(T),fragmentMap:$o(Cu(v)),overwrite:!!I,incomingById:new Map,clientOnly:!1},U=this.processSelectionSet({result:y||Object.create(null),dataId:_,selectionSet:C.selectionSet,mergeTree:{map:new Map},context:D});if(!qt(U))throw __DEV__?new qe("Could not identify object "+JSON.stringify(y)):new qe(8);return D.incomingById.forEach(function(q,Z){var z=q.fields,ne=q.mergeTree,he=q.selections,Le=Ci(Z);if(ne&&ne.map.size){var Xe=d.applyMerges(ne,Le,z,D);if(qt(Xe))return;z=Xe}if(__DEV__&&!D.overwrite){var at=new Set;he.forEach(function(Re){Oe(Re)&&Re.selectionSet&&at.add(Re.name.value)}),Object.keys(z).forEach(function(Re){(function(Ge){return at.has(_n(Ge))})(Re)&&!function(Ge){var Nt=ne&&ne.map.get(Ge);return!!(Nt&&Nt.info&&Nt.info.merge)}(Re)&&function(Ge,Nt,Je,xt){var tr=function(g){var b=xt.getFieldValue(g,Je);return typeof b=="object"&&b},nn=tr(Ge);if(nn){var Ot=tr(Nt);if(Ot&&!qt(nn)&&!ln(nn,Ot)&&!Object.keys(nn).every(function(g){return xt.getFieldValue(Ot,g)!==void 0})){var _i=xt.getFieldValue(Ge,"__typename")||xt.getFieldValue(Nt,"__typename"),Sn=_n(Je),on=_i+"."+Sn;if(!Jd.has(on)){Jd.add(on);var f=[];Array.isArray(nn)||Array.isArray(Ot)||[nn,Ot].forEach(function(g){var b=xt.getFieldValue(g,"__typename");typeof b!="string"||f.includes(b)||f.push(b)}),__DEV__&&ye.warn("Cache data may be lost when replacing the "+Sn+" field of a "+_i+` object.

To address this problem (which is not a bug in Apollo Client), `+(f.length?"either ensure all objects of type "+f.join(" and ")+" have an ID or a custom merge function, or ":"")+"define a custom merge function for the "+on+` field, so InMemoryCache can safely merge these objects:

  existing: `+JSON.stringify(nn).slice(0,1e3)+`
  incoming: `+JSON.stringify(Ot).slice(0,1e3)+`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`)}}}}(Le,z,Re,D.store)})}s.merge(Z,z)}),s.retain(U.__ref),U},h.prototype.processSelectionSet=function(s){var c=this,d=s.dataId,v=s.result,y=s.selectionSet,_=s.context,T=s.mergeTree,I=this.cache.policies,C=I.identify(v,y,_.fragmentMap),A=C[0],D=C[1];if(typeof(d=d||A)=="string"){var U=_.written[d]||(_.written[d]=[]),q=Ci(d);if(U.indexOf(y)>=0||(U.push(y),this.reader&&this.reader.isFresh(v,q,y,_)))return q}var Z=Object.create(null);D&&(Z=_.merge(Z,D));var z=d&&I.rootTypenamesById[d]||Ne(v,y,_.fragmentMap)||d&&_.store.get(d,"__typename");typeof z=="string"&&(Z.__typename=z);var ne=new Set(y.selections);if(ne.forEach(function(Le){var Xe;if(Lu(Le,_.variables))if(Oe(Le)){var at=Fe(Le),Re=v[at],Ge=_.clientOnly;if(_.clientOnly=Ge||!(!Le.directives||!Le.directives.some(function(Sn){return Sn.name.value==="client"})),Re!==void 0){var Nt=I.getStoreFieldName({typename:z,fieldName:Le.name.value,field:Le,variables:_.variables}),Je=Xd(T,Nt),xt=c.processFieldValue(Re,Le,_,Je),tr=void 0;if(Le.selectionSet&&!(tr=_.store.getFieldValue(xt,"__typename"))&&qt(xt)){var nn=_.incomingById.get(xt.__ref);tr=nn&&nn.fields.__typename}var Ot=I.getMergeFunction(z,Le.name.value,tr);Ot?Je.info={field:Le,typename:z,merge:Ot}:Zd(T,Nt),Z=_.merge(Z,((Xe={})[Nt]=xt,Xe))}else _.clientOnly||Ms.added(Le)||__DEV__&&ye.error(("Missing field '"+Fe(Le)+"' while writing result "+JSON.stringify(v,null,2)).substring(0,1e3));_.clientOnly=Ge}else{var _i=Ri(Le,_.fragmentMap);_i&&I.fragmentMatches(_i,z,v,_.variables)&&_i.selectionSet.selections.forEach(ne.add,ne)}}),typeof d=="string"){var he=_.incomingById.get(d);return he?(he.fields=_.merge(he.fields,Z),he.mergeTree=Cl(he.mergeTree,T),he.selections.forEach(ne.add,ne),he.selections=ne):_.incomingById.set(d,{fields:Z,mergeTree:Ga(T)?void 0:T,selections:ne}),Ci(d)}return Z},h.prototype.processFieldValue=function(s,c,d,v){var y=this;return c.selectionSet&&s!==null?Array.isArray(s)?s.map(function(_,T){var I=y.processFieldValue(_,c,d,Xd(v,T));return Zd(v,T),I}):this.processSelectionSet({result:s,selectionSet:c.selectionSet,context:d,mergeTree:v}):__DEV__?Fu(s):s},h.prototype.applyMerges=function(s,c,d,v,y){var _,T=this;if(s.map.size&&!qt(d)){var I,C=Array.isArray(d)||!qt(c)&&!Jo(c)?void 0:c,A=d;C&&!y&&(y=[qt(C)?C.__ref:C]);var D=function(U,q){return Array.isArray(U)?typeof q=="number"?U[q]:void 0:v.store.getFieldValue(U,String(q))};s.map.forEach(function(U,q){var Z=D(C,q),z=D(A,q);if(z!==void 0){y&&y.push(q);var ne=T.applyMerges(U,Z,z,v,y);ne!==z&&(I=I||new Map).set(q,ne),y&&ye(y.pop()===q)}}),I&&(d=Array.isArray(A)?A.slice(0):le({},A),I.forEach(function(U,q){d[q]=U}))}return s.info?this.cache.policies.runMergeFunction(c,d,s.info,v,y&&(_=v.store).getStorage.apply(_,y)):d},h}(),Qd=[];function Xd(h,s){var c=h.map;return c.has(s)||c.set(s,Qd.pop()||{map:new Map}),c.get(s)}function Cl(h,s){if(h===s||!s||Ga(s))return h;if(!h||Ga(h))return s;var c=h.info&&s.info?le(le({},h.info),s.info):h.info||s.info,d=h.map.size&&s.map.size,v={info:c,map:d?new Map:h.map.size?h.map:s.map};if(d){var y=new Set(s.map.keys());h.map.forEach(function(_,T){v.map.set(T,Cl(_,s.map.get(T))),y.delete(T)}),y.forEach(function(_){v.map.set(_,Cl(s.map.get(_),h.map.get(_)))})}return v}function Ga(h){return!h||!(h.info||h.map.size)}function Zd(h,s){var c=h.map,d=c.get(s);d&&Ga(d)&&(Qd.push(d),c.delete(s))}var Jd=new Set;function eh(h){var s=Pd("stringifyForDisplay");return JSON.stringify(h,function(c,d){return d===void 0?s:d}).split(JSON.stringify(s)).join("<undefined>")}function Ku(h){return h.args!==void 0?h.args:h.field?$e(h.field,h.variables):null}Cs.setStringify(Ct);var Vv=function(){},Pl=function(h,s){return s.fieldName},xl=function(h,s,c){return(0,c.mergeObjects)(h,s)},Pt=function(h,s){return s},W_=function(){function h(s){this.config=s,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=le({dataIdFromObject:Vd},s),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),s.possibleTypes&&this.addPossibleTypes(s.possibleTypes),s.typePolicies&&this.addTypePolicies(s.typePolicies)}return h.prototype.identify=function(s,c,d){var v=c&&d?Ne(s,c,d):s.__typename;if(v===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var y,_={typename:v,selectionSet:c,fragmentMap:d},T=v&&this.getTypePolicy(v),I=T&&T.keyFn||this.config.dataIdFromObject;I;){var C=I(s,_);if(!Array.isArray(C)){y=C;break}I=Hv(C)}return y=y?String(y):void 0,_.keyObject?[y,_.keyObject]:[y]},h.prototype.addTypePolicies=function(s){var c=this;Object.keys(s).forEach(function(d){var v=s[d],y=v.queryType,_=v.mutationType,T=v.subscriptionType,I=gn(v,["queryType","mutationType","subscriptionType"]);y&&c.setRootTypename("Query",d),_&&c.setRootTypename("Mutation",d),T&&c.setRootTypename("Subscription",d),qr.call(c.toBeAdded,d)?c.toBeAdded[d].push(I):c.toBeAdded[d]=[I]})},h.prototype.updateTypePolicy=function(s,c){var d=this,v=this.getTypePolicy(s),y=c.keyFields,_=c.fields;function T(I,C){I.merge=typeof C=="function"?C:C===!0?xl:C===!1?Pt:I.merge}T(v,c.merge),v.keyFn=y===!1?Vv:Array.isArray(y)?Hv(y):typeof y=="function"?y:v.keyFn,_&&Object.keys(_).forEach(function(I){var C=d.getFieldPolicy(s,I,!0),A=_[I];if(typeof A=="function")C.read=A;else{var D=A.keyArgs,U=A.read,q=A.merge;C.keyFn=D===!1?Pl:Array.isArray(D)?th(D):typeof D=="function"?D:C.keyFn,typeof U=="function"&&(C.read=U),T(C,q)}C.read&&C.merge&&(C.keyFn=C.keyFn||Pl)})},h.prototype.setRootTypename=function(s,c){c===void 0&&(c=s);var d="ROOT_"+s.toUpperCase(),v=this.rootTypenamesById[d];c!==v&&(__DEV__?ye(!v||v===s,"Cannot change root "+s+" __typename more than once"):ye(!v||v===s,2),v&&delete this.rootIdsByTypename[v],this.rootIdsByTypename[c]=d,this.rootTypenamesById[d]=c)},h.prototype.addPossibleTypes=function(s){var c=this;this.usingPossibleTypes=!0,Object.keys(s).forEach(function(d){c.getSupertypeSet(d,!0),s[d].forEach(function(v){c.getSupertypeSet(v,!0).add(d);var y=v.match(qd);y&&y[0]===v||c.fuzzySubtypes.set(v,new RegExp(v))})})},h.prototype.getTypePolicy=function(s){var c=this;if(!qr.call(this.typePolicies,s)){var d=this.typePolicies[s]=Object.create(null);d.fields=Object.create(null);var v=this.supertypeMap.get(s);v&&v.size&&v.forEach(function(_){var T=c.getTypePolicy(_),I=T.fields,C=gn(T,["fields"]);Object.assign(d,C),Object.assign(d.fields,I)})}var y=this.toBeAdded[s];return y&&y.length&&y.splice(0).forEach(function(_){c.updateTypePolicy(s,_)}),this.typePolicies[s]},h.prototype.getFieldPolicy=function(s,c,d){if(s){var v=this.getTypePolicy(s).fields;return v[c]||d&&(v[c]=Object.create(null))}},h.prototype.getSupertypeSet=function(s,c){var d=this.supertypeMap.get(s);return!d&&c&&this.supertypeMap.set(s,d=new Set),d},h.prototype.fragmentMatches=function(s,c,d,v){var y=this;if(!s.typeCondition)return!0;if(!c)return!1;var _=s.typeCondition.name.value;if(c===_)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(_))for(var T=this.getSupertypeSet(c,!0),I=[T],C=function(Z){var z=y.getSupertypeSet(Z,!1);z&&z.size&&I.indexOf(z)<0&&I.push(z)},A=!(!d||!this.fuzzySubtypes.size),D=!1,U=0;U<I.length;++U){var q=I[U];if(q.has(_))return T.has(_)||(D&&__DEV__&&ye.warn("Inferring subtype "+c+" of supertype "+_),T.add(_)),!0;q.forEach(C),A&&U===I.length-1&&Wu(s.selectionSet,d,v)&&(A=!1,D=!0,this.fuzzySubtypes.forEach(function(Z,z){var ne=c.match(Z);ne&&ne[0]===c&&C(z)}))}return!1},h.prototype.hasKeyArgs=function(s,c){var d=this.getFieldPolicy(s,c,!1);return!(!d||!d.keyFn)},h.prototype.getStoreFieldName=function(s){var c,d=s.typename,v=s.fieldName,y=this.getFieldPolicy(d,v,!1),_=y&&y.keyFn;if(_&&d)for(var T={typename:d,fieldName:v,field:s.field||null,variables:s.variables},I=Ku(s);_;){var C=_(I,T);if(!Array.isArray(C)){c=C||v;break}_=th(C)}return c===void 0&&(c=s.field?function(A,D){var U=null;A.directives&&(U={},A.directives.forEach(function(Z){U[Z.name.value]={},Z.arguments&&Z.arguments.forEach(function(z){var ne=z.name,he=z.value;return ii(U[Z.name.value],ne,he,D)})}));var q=null;return A.arguments&&A.arguments.length&&(q={},A.arguments.forEach(function(Z){var z=Z.name,ne=Z.value;return ii(q,z,ne,D)})),Cs(A.name.value,q,U)}(s.field,s.variables):Cs(v,Ku(s))),c===!1?v:v===_n(c)?c:v+":"+c},h.prototype.readField=function(s,c){var d=s.from;if(d&&(s.field||s.fieldName)){if(s.typename===void 0){var v=c.store.getFieldValue(d,"__typename");v&&(s.typename=v)}var y=this.getStoreFieldName(s),_=_n(y),T=c.store.getFieldValue(d,y),I=this.getFieldPolicy(s.typename,_,!1),C=I&&I.read;if(C){var A=qv(this,d,s,c,c.store.getStorage(qt(d)?d.__ref:d,y));return ci.withValue(this.cache,C,[T,A])}return T}},h.prototype.getMergeFunction=function(s,c,d){var v=this.getFieldPolicy(s,c,!1),y=v&&v.merge;return!y&&d&&(y=(v=this.getTypePolicy(d))&&v.merge),y},h.prototype.runMergeFunction=function(s,c,d,v,y){var _=d.field,T=d.typename,I=d.merge;return I===xl?Gs(v.store)(s,c):I===Pt?c:(v.overwrite&&(s=void 0),I(s,c,qv(this,void 0,{typename:T,fieldName:_.name.value,field:_,variables:v.variables},v,y||Object.create(null))))},h}();function qv(h,s,c,d,v){var y=h.getStoreFieldName(c),_=_n(y),T=c.variables||d.variables,I=d.store,C=I.toReference,A=I.canRead;return{args:Ku(c),field:c.field||null,fieldName:_,storeFieldName:y,variables:T,isReference:qt,toReference:C,storage:v,cache:h.cache,canRead:A,readField:function(D,U){var q;if(typeof D=="string")q={fieldName:D,from:arguments.length>1?U:s};else{if(!nr(D))return void(__DEV__&&ye.warn("Unexpected readField arguments: "+eh(Array.from(arguments))));q=le({},D),qr.call(D,"from")||(q.from=s)}return __DEV__&&q.from===void 0&&__DEV__&&ye.warn("Undefined 'from' passed to readField with arguments "+eh(Array.from(arguments))),q.variables===void 0&&(q.variables=T),h.readField(q,d)},mergeObjects:Gs(d.store)}}function Gs(h){return function(s,c){if(Array.isArray(s)||Array.isArray(c))throw __DEV__?new qe("Cannot automatically merge arrays"):new qe(3);if(nr(s)&&nr(c)){var d=h.getFieldValue(s,"__typename"),v=h.getFieldValue(c,"__typename");if(d&&v&&d!==v)return c;if(qt(s)&&Jo(c))return h.merge(s.__ref,c),s;if(Jo(s)&&qt(c))return h.merge(s,c.__ref),c;if(Jo(s)&&Jo(c))return le(le({},s),c)}return c}}function th(h){return function(s,c){return s?c.fieldName+":"+JSON.stringify(Hn(s,h,!1)):c.fieldName}}function Hv(h){var s=new se(_e);return function(c,d){var v;if(d.selectionSet&&d.fragmentMap){var y=s.lookupArray([d.selectionSet,d.fragmentMap]);v=y.aliasMap||(y.aliasMap=Wv(d.selectionSet,d.fragmentMap))}var _=d.keyObject=Hn(c,h,!0,v);return d.typename+":"+JSON.stringify(_)}}function Wv(h,s){var c=Object.create(null),d=new Set([h]);return d.forEach(function(v){v.selections.forEach(function(y){if(Oe(y)){if(y.alias){var _=y.alias.value,T=y.name.value;T!==_&&((c.aliases||(c.aliases=Object.create(null)))[T]=_)}y.selectionSet&&((c.subsets||(c.subsets=Object.create(null)))[y.name.value]=Wv(y.selectionSet,s))}else{var I=Ri(y,s);I&&d.add(I.selectionSet)}})}),c}function Hn(h,s,c,d){var v,y,_=Object.create(null);return s.forEach(function(T){if(Array.isArray(T)){if(typeof y=="string"&&typeof v=="string"){var I=d&&d.subsets,C=I&&I[y];_[y]=Hn(h[v],T,c,C)}}else{var A=d&&d.aliases,D=A&&A[T]||T;qr.call(h,D)?_[y=T]=h[v=D]:(__DEV__?ye(!c,"Missing field '"+D+"' while computing key fields"):ye(!c,4),v=y=void 0)}}),_}var zv=function(h){function s(c){c===void 0&&(c={});var d=h.call(this)||this;return d.watches=new Set,d.typenameDocumentCache=new Map,d.makeVar=H_,d.txCount=0,d.config=function(v){return uo(dn,v)}(c),d.addTypename=!!d.config.addTypename,d.policies=new W_({cache:d,dataIdFromObject:d.config.dataIdFromObject,possibleTypes:d.config.possibleTypes,typePolicies:d.config.typePolicies}),d.init(),d}return _t(s,h),s.prototype.init=function(){var c=this.data=new Ba.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=c.stump,this.resetResultCache()},s.prototype.resetResultCache=function(c){var d=this,v=this.storeReader;this.storeWriter=new Yd(this,this.storeReader=new Kd({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Il(this.config),canon:c?void 0:v&&v.canon})),this.maybeBroadcastWatch=Wi(function(y,_){return d.broadcastWatch(y,_)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(y){var _=y.optimistic?d.optimisticData:d.data;if(ja(_)){var T=y.optimistic,I=y.rootId,C=y.variables;return _.makeCacheKey(y.query,y.callback,Ct({optimistic:T,rootId:I,variables:C}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(y){return y.resetCaching()})},s.prototype.restore=function(c){return this.init(),c&&this.data.replace(c),this},s.prototype.extract=function(c){return c===void 0&&(c=!1),(c?this.optimisticData:this.data).extract()},s.prototype.read=function(c){var d=c.returnPartialData,v=d!==void 0&&d;try{return this.storeReader.diffQueryAgainstStore(le(le({},c),{store:c.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:v})).result||null}catch(y){if(y instanceof Gd)return null;throw y}},s.prototype.write=function(c){try{return++this.txCount,this.storeWriter.writeToStore(this.data,c)}finally{--this.txCount||c.broadcast===!1||this.broadcastWatches()}},s.prototype.modify=function(c){if(qr.call(c,"id")&&!c.id)return!1;var d=c.optimistic?this.optimisticData:this.data;try{return++this.txCount,d.modify(c.id||"ROOT_QUERY",c.fields)}finally{--this.txCount||c.broadcast===!1||this.broadcastWatches()}},s.prototype.diff=function(c){return this.storeReader.diffQueryAgainstStore(le(le({},c),{store:c.optimistic?this.optimisticData:this.data,rootId:c.id||"ROOT_QUERY",config:this.config}))},s.prototype.watch=function(c){var d,v=this;return this.watches.size||Fs(d=this).vars.forEach(function(y){return y.attachCache(d)}),this.watches.add(c),c.immediate&&this.maybeBroadcastWatch(c),function(){v.watches.delete(c)&&!v.watches.size&&jv(v),v.maybeBroadcastWatch.forget(c)}},s.prototype.gc=function(c){Ct.reset();var d=this.optimisticData.gc();return c&&!this.txCount&&(c.resetResultCache?this.resetResultCache(c.resetResultIdentities):c.resetResultIdentities&&this.storeReader.resetCanon()),d},s.prototype.retain=function(c,d){return(d?this.optimisticData:this.data).retain(c)},s.prototype.release=function(c,d){return(d?this.optimisticData:this.data).release(c)},s.prototype.identify=function(c){return qt(c)?c.__ref:this.policies.identify(c)[0]},s.prototype.evict=function(c){if(!c.id){if(qr.call(c,"id"))return!1;c=le(le({},c),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(c,this.data)}finally{--this.txCount||c.broadcast===!1||this.broadcastWatches()}},s.prototype.reset=function(c){var d=this;return this.init(),Ct.reset(),c&&c.discardWatches?(this.watches.forEach(function(v){return d.maybeBroadcastWatch.forget(v)}),this.watches.clear(),jv(this)):this.broadcastWatches(),Promise.resolve()},s.prototype.removeOptimistic=function(c){var d=this.optimisticData.removeLayer(c);d!==this.optimisticData&&(this.optimisticData=d,this.broadcastWatches())},s.prototype.batch=function(c){var d=this,v=c.update,y=c.optimistic,_=y===void 0||y,T=c.removeOptimistic,I=c.onWatchUpdated,C=function(D){var U=d,q=U.data,Z=U.optimisticData;++d.txCount,D&&(d.data=d.optimisticData=D);try{v(d)}finally{--d.txCount,d.data=q,d.optimisticData=Z}},A=new Set;I&&!this.txCount&&this.broadcastWatches(le(le({},c),{onWatchUpdated:function(D){return A.add(D),!1}})),typeof _=="string"?this.optimisticData=this.optimisticData.addLayer(_,C):_===!1?C(this.data):C(),typeof T=="string"&&(this.optimisticData=this.optimisticData.removeLayer(T)),I&&A.size?(this.broadcastWatches(le(le({},c),{onWatchUpdated:function(D,U){var q=I.call(this,D,U);return q!==!1&&A.delete(D),q}})),A.size&&A.forEach(function(D){return d.maybeBroadcastWatch.dirty(D)})):this.broadcastWatches(c)},s.prototype.performTransaction=function(c,d){return this.batch({update:c,optimistic:d||d!==null})},s.prototype.transformDocument=function(c){if(this.addTypename){var d=this.typenameDocumentCache.get(c);return d||(d=Ms(c),this.typenameDocumentCache.set(c,d),this.typenameDocumentCache.set(d,d)),d}return c},s.prototype.broadcastWatches=function(c){var d=this;this.txCount||this.watches.forEach(function(v){return d.maybeBroadcastWatch(v,c)})},s.prototype.broadcastWatch=function(c,d){var v=c.lastDiff,y=this.diff(c);d&&(c.optimistic&&typeof d.optimistic=="string"&&(y.fromOptimisticTransaction=!0),d.onWatchUpdated&&d.onWatchUpdated.call(this,c,y,v)===!1)||v&&ln(v.result,y.result)||c.callback(c.lastDiff=y,v)},s}(Zo);const Yu=JSON.parse('{"g":{"Credentials":["Auth0Credentials","AwsMarketplaceCredentials","BigQueryCredentials","HubspotCredentials","OpenFGACredentials","SalesforceCredentials","SnowflakeCredentials","StripeCredentials","ZuoraCredentials"],"PaymentMethodForm":["StripePaymentMethodForm","ZuoraPaymentMethodForm"],"ResetPeriodConfiguration":["MonthlyResetPeriodConfig","WeeklyResetPeriodConfig","YearlyResetPeriodConfig"],"ScheduleVariables":["AddonChangeVariables","BillingPeriodChangeVariables","DowngradeChangeVariables","PlanChangeVariables","UnitAmountChangeVariables"]}}');var rh=function(){function h(s){var c=s.batchDebounce,d=s.batchInterval,v=s.batchMax,y=s.batchHandler,_=s.batchKey;this.queuedRequests=new Map,this.batchDebounce=c,this.batchInterval=d,this.batchMax=v||0,this.batchHandler=y,this.batchKey=_||function(){return""}}return h.prototype.enqueueRequest=function(s){var c=this,d=le({},s),v=!1,y=this.batchKey(s.operation);return d.observable||(d.observable=new Kt(function(_){c.queuedRequests.has(y)||c.queuedRequests.set(y,[]),v||(c.queuedRequests.get(y).push(d),v=!0),d.next=d.next||[],_.next&&d.next.push(_.next.bind(_)),d.error=d.error||[],_.error&&d.error.push(_.error.bind(_)),d.complete=d.complete||[],_.complete&&d.complete.push(_.complete.bind(_)),c.queuedRequests.get(y).length===1?c.scheduleQueueConsumption(y):c.batchDebounce&&(clearTimeout(c.scheduledBatchTimer),c.scheduleQueueConsumption(y)),c.queuedRequests.get(y).length===c.batchMax&&c.consumeQueue(y)})),d.observable},h.prototype.consumeQueue=function(s){var c=s||"",d=this.queuedRequests.get(c);if(d){this.queuedRequests.delete(c);var v=d.map(function(U){return U.operation}),y=d.map(function(U){return U.forward}),_=[],T=[],I=[],C=[];d.forEach(function(U,q){_.push(U.observable),T.push(U.next),I.push(U.error),C.push(U.complete)});var A=this.batchHandler(v,y)||Kt.of(),D=function(U){I.forEach(function(q){q&&q.forEach(function(Z){return Z(U)})})};return A.subscribe({next:function(U){if(Array.isArray(U)||(U=[U]),T.length!==U.length){var q=new Error("server returned results with length "+U.length+", expected length of "+T.length);return q.result=U,D(q)}U.forEach(function(Z,z){T[z]&&T[z].forEach(function(ne){return ne(Z)})})},error:D,complete:function(){C.forEach(function(U){U&&U.forEach(function(q){return q()})})}}),_}},h.prototype.scheduleQueueConsumption=function(s){var c=this,d=s||"";this.scheduledBatchTimer=setTimeout(function(){c.queuedRequests.get(d)&&c.queuedRequests.get(d).length&&c.consumeQueue(d)},this.batchInterval)},h}(),Kv=function(h){function s(c){var d=h.call(this)||this,v=c||{},y=v.batchDebounce,_=v.batchInterval,T=_===void 0?10:_,I=v.batchMax,C=I===void 0?0:I,A=v.batchHandler,D=A===void 0?function(){return null}:A,U=v.batchKey,q=U===void 0?function(){return""}:U;return d.batcher=new rh({batchDebounce:y,batchInterval:T,batchMax:C,batchHandler:D,batchKey:q}),c.batchHandler.length<=1&&(d.request=function(Z){return d.batcher.enqueueRequest({operation:Z})}),d}return _t(s,h),s.prototype.request=function(c,d){return this.batcher.enqueueRequest({operation:c,forward:d})},s}(Vi),Yv=function(h){function s(c){var d=h.call(this)||this,v=c||{},y=v.uri,_=y===void 0?"/graphql":y,T=v.fetch,I=v.includeExtensions,C=v.batchInterval,A=v.batchDebounce,D=v.batchMax,U=v.batchKey,q=gn(v,["uri","fetch","includeExtensions","batchInterval","batchDebounce","batchMax","batchKey"]);so(T),T||(T=fetch);var Z={http:{includeExtensions:I},options:q.fetchOptions,credentials:q.credentials,headers:q.headers};return d.batchDebounce=A,d.batchInterval=C||10,d.batchMax=D||10,U=U||function(z){var ne=z.getContext(),he={http:ne.http,options:ne.fetchOptions,credentials:ne.credentials,headers:ne.headers};return qi(z,_)+JSON.stringify(he)},d.batcher=new Kv({batchDebounce:d.batchDebounce,batchInterval:d.batchInterval,batchMax:d.batchMax,batchKey:U,batchHandler:function(z){var ne=qi(z[0],_),he=z[0].getContext(),Le={};if(he.clientAwareness){var Xe=he.clientAwareness,at=Xe.name,Re=Xe.version;at&&(Le["apollographql-client-name"]=at),Re&&(Le["apollographql-client-version"]=Re)}var Ge,Nt={http:he.http,options:he.fetchOptions,credentials:he.credentials,headers:le(le({},Le),he.headers)},Je=z.map(function(Sn){return vl(Sn,pl,Z,Nt)}),xt=Je.map(function(Sn){return Sn.body}),tr=Je[0].options;if(tr.method==="GET")return ks(new Error("apollo-link-batch-http does not support GET requests"));try{tr.body=Nu(xt,"Payload")}catch(Sn){return ks(Sn)}if(!tr.signal){var nn=ml(),Ot=nn.controller,_i=nn.signal;(Ge=Ot)&&(tr.signal=_i)}return new Kt(function(Sn){return T(ne,tr).then(function(on){return z.forEach(function(f){return f.setContext({response:on})}),on}).then(vr(z)).then(function(on){return Sn.next(on),Sn.complete(),on}).catch(function(on){on.name!=="AbortError"&&(on.result&&on.result.errors&&on.result.data&&Sn.next(on.result),Sn.error(on))}),function(){Ge&&Ge.abort()}})}}),d}return _t(s,h),s.prototype.request=function(c){return this.batcher.request(c)},s}(Vi),li=function(){function h(s,c,d,v){var y=this;this.operation=s,this.nextLink=c,this.delayFor=d,this.retryIf=v,this.retryCount=0,this.values=[],this.complete=!1,this.canceled=!1,this.observers=[],this.currentSubscription=null,this.onNext=function(_){y.values.push(_);for(var T=0,I=y.observers;T<I.length;T++){var C=I[T];C&&C.next(_)}},this.onComplete=function(){y.complete=!0;for(var _=0,T=y.observers;_<T.length;_++){var I=T[_];I&&I.complete()}},this.onError=function(_){return Qr(y,void 0,void 0,function(){var T,I,C;return Xr(this,function(A){switch(A.label){case 0:return this.retryCount+=1,[4,this.retryIf(this.retryCount,this.operation,_)];case 1:if(A.sent())return this.scheduleRetry(this.delayFor(this.retryCount,this.operation,_)),[2];for(this.error=_,T=0,I=this.observers;T<I.length;T++)(C=I[T])&&C.error(_);return[2]}})})}}return h.prototype.subscribe=function(s){if(this.canceled)throw new Error("Subscribing to a retryable link that was canceled is not supported");this.observers.push(s);for(var c=0,d=this.values;c<d.length;c++){var v=d[c];s.next(v)}this.complete?s.complete():this.error&&s.error(this.error)},h.prototype.unsubscribe=function(s){var c=this.observers.indexOf(s);if(c<0)throw new Error("RetryLink BUG! Attempting to unsubscribe unknown observer!");this.observers[c]=null,this.observers.every(function(d){return d===null})&&this.cancel()},h.prototype.start=function(){this.currentSubscription||this.try()},h.prototype.cancel=function(){this.currentSubscription&&this.currentSubscription.unsubscribe(),clearTimeout(this.timerId),this.timerId=void 0,this.currentSubscription=null,this.canceled=!0},h.prototype.try=function(){this.currentSubscription=this.nextLink(this.operation).subscribe({next:this.onNext,error:this.onError,complete:this.onComplete})},h.prototype.scheduleRetry=function(s){var c=this;if(this.timerId)throw new Error("RetryLink BUG! Encountered overlapping retries");this.timerId=setTimeout(function(){c.timerId=void 0,c.try()},s)},h}(),ea=function(h){function s(c){var d=h.call(this)||this,v=c||{},y=v.attempts,_=v.delay;return d.delayFor=typeof _=="function"?_:function(T){var I=T||{},C=I.initial,A=C===void 0?300:C,D=I.jitter,U=D===void 0||D,q=I.max,Z=q===void 0?1/0:q,z=U?A:A/2;return function(ne){var he=Math.min(Z,z*Math.pow(2,ne));return U&&(he=Math.random()*he),he}}(_),d.retryIf=typeof y=="function"?y:function(T){var I=T||{},C=I.retryIf,A=I.max,D=A===void 0?5:A;return function(U,q,Z){return!(U>=D)&&(C?C(Z,q):!!Z)}}(y),d}return _t(s,h),s.prototype.request=function(c,d){var v=new li(c,d,this.delayFor,this.retryIf);return v.start(),new Kt(function(y){return v.subscribe(y),function(){v.unsubscribe(y)}})},s}(Vi),Nl=l(4147);function nh(h,s){return new Vi(function(c,d){var v={"X-API-KEY":h,"x-graphql-operation-name":c.operationName,source:Kr},y=s.customerToken;return y&&(v["X-CUSTOMER-KEY"]=y),c.setContext({headers:v}),d(c)})}var kl=function(h){return!!h&&![500,400].includes(h.statusCode)},ih=function(h,s,c,d){return new(c||(c=Promise))(function(v,y){function _(C){try{I(d.next(C))}catch(A){y(A)}}function T(C){try{I(d.throw(C))}catch(A){y(A)}}function I(C){var A;C.done?v(C.value):(A=C.value,A instanceof c?A:new c(function(D){D(A)})).then(_,T)}I((d=d.apply(h,[])).next())})},Dl=function(h,s){var c,d,v,y,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(I){return function(C){return function(A){if(c)throw new TypeError("Generator is already executing.");for(;_;)try{if(c=1,d&&(v=2&A[0]?d.return:A[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,A[1])).done)return v;switch(d=0,v&&(A=[2&A[0],v.value]),A[0]){case 0:case 1:v=A;break;case 4:return _.label++,{value:A[1],done:!1};case 5:_.label++,d=A[1],A=[0];continue;case 7:A=_.ops.pop(),_.trys.pop();continue;default:if(!((v=(v=_.trys).length>0&&v[v.length-1])||A[0]!==6&&A[0]!==2)){_=0;continue}if(A[0]===3&&(!v||A[1]>v[0]&&A[1]<v[3])){_.label=A[1];break}if(A[0]===6&&_.label<v[1]){_.label=v[1],v=A;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(A);break}v[2]&&_.ops.pop(),_.trys.pop();continue}A=s.call(h,_)}catch(D){A=[6,D],d=0}finally{c=v=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([I,C])}}},Qv=function(){function h(s,c){this.client=s,this.edgeApiClient=c}return h.prototype.getEntitlements=function(s,c,d){return c===void 0&&(c=!1),ih(this,void 0,void 0,function(){return Dl(this,function(v){return this.edgeApiClient&&!c?[2,this.edgeApiClient.getEntitlements(s,d)]:[2,this.client.query({query:S.roX,variables:{query:{customerId:s,resourceId:d}},fetchPolicy:"no-cache"})]})})},h.prototype.reportEntitlementRequested=function(s,c,d,v,y){return ih(this,void 0,void 0,function(){return Dl(this,function(_){switch(_.label){case 0:return[4,this.client.mutate({mutation:S.JDz,variables:{entitlementCheckRequested:{entitlementCheckResult:d,customerId:c,featureId:s,resourceId:v,requestedUsage:y}},fetchPolicy:"no-cache"})];case 1:return _.sent(),[2]}})})},h}();const Ml=Qv;var po,ta=l(5161),$a=l.n(ta),ra=l(7557),oh=l.n(ra),Xv=l(9704),ah=l.n(Xv),mr=function(){return mr=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},mr.apply(this,arguments)},sh=function(){function h(){var s=this;this.mapApplySubscriptionResults=function(c){var d=c.applySubscription.subscription;return{subscription:d?s.mapSubscription(d):void 0}},this.mapSlimCustomer=function(c){return{id:c.refId,name:c.name||void 0,email:c.email||void 0,billingId:c.billingId||void 0,createdAt:new Date(c.createdAt),updatedAt:new Date(c.updatedAt),metadata:c.additionalMetaData,awsMarketplaceCustomerId:c.awsMarketplaceCustomerId}},this.getResetPeriodData=function(c,d){switch(c){case S.XHu.Month:return{monthlyResetPeriodConfiguration:{accordingTo:d.monthlyAccordingTo||S.pSI.SubscriptionStart}};case S.XHu.Week:return{weeklyResetPeriodConfiguration:{accordingTo:d.weeklyAccordingTo||S.rCU.EveryFriday}};default:return{}}}}return h.prototype.mapBooleanEntitlement=function(s,c){return{isFallback:!1,hasAccess:c.hasAccess,accessDeniedReason:c.accessDeniedReason,feature:s.calculatedEntitlement.feature?mr(mr({},s.calculatedEntitlement.feature),{isMetered:!1}):void 0}},h.prototype.mapNumericEntitlement=function(s,c){var d=s.calculatedEntitlement,v=d.hasUnlimitedUsage,y=d.usageLimit;return{isFallback:!1,hasAccess:c.hasAccess,accessDeniedReason:c.accessDeniedReason,isUnlimited:v,value:y??void 0,feature:s.calculatedEntitlement.feature?mr(mr({},s.calculatedEntitlement.feature),{isMetered:!1}):void 0}},h.prototype.mapMeteredEntitlement=function(s,c,d){var v=s.calculatedEntitlement,y=v.hasUnlimitedUsage,_=v.usageLimit,T=v.feature,I=s.featureUsage,C=I.currentUsage,A=I.nextResetDate,D=I.resetPeriod,U=null;return T&&T.featureType===S.Tex.Number&&T.meterType===S.puT.Incremental&&D&&(U={nextResetDate:A,resetPeriod:D}),{isFallback:!1,hasAccess:c.hasAccess,accessDeniedReason:c.accessDeniedReason,isUnlimited:y,usageLimit:_??void 0,currentUsage:C,requestedUsage:d||0,resetSettings:U||void 0,feature:s.calculatedEntitlement.feature?mr(mr({},s.calculatedEntitlement.feature),{meterType:s.calculatedEntitlement.feature.meterType||void 0,isMetered:!0}):void 0}},h.prototype.mapEntitlement=function(s,c,d){var v=s.calculatedEntitlement;if(!v.feature)return this.mapBooleanEntitlement(s,c);var y=v.feature,_=y.featureType,T=y.meterType,I=_===S.Tex.Number&&(T===S.puT.Incremental||T===S.puT.Fluctuating);switch(_){case S.Tex.Boolean:return this.mapBooleanEntitlement(s,c);case S.Tex.Number:return I?this.mapMeteredEntitlement(s,c,d):this.mapNumericEntitlement(s,c)}},h.prototype.mapCachedEntitlement=function(s,c,d){var v;return s.feature&&(v={id:s.feature.refId,featureType:s.feature.featureType,meterType:s.feature.meterType||void 0,units:s.feature.featureUnits||void 0,unitsPlural:s.feature.featureUnitsPlural||void 0,displayName:s.feature.displayName,description:s.feature.description||""}),{calculatedEntitlement:{usageLimit:s.usageLimit,hasUnlimitedUsage:s.hasUnlimitedUsage,hasSoftLimit:!!s.hasSoftLimit,accessDeniedReason:s.accessDeniedReason||void 0,feature:v},featureUsage:{resetPeriod:s.resetPeriod,resetPeriodConfiguration:s.resetPeriodConfiguration,currentUsage:c||s.currentUsage||0,nextResetDate:d||s.nextResetDate}}},h.prototype.mapCachedEntitlements=function(s){var c=this;return new Map(s.map(function(d){var v;return[((v=d.feature)===null||v===void 0?void 0:v.refId)||"",c.mapCachedEntitlement(d)]}))},h.prototype.mapPlans=function(s){var c=this;return((s==null?void 0:s.paywall.plans)||[]).map(function(d,v){return c.mapPlan(d,v)})},h.prototype.mapPaywall=function(s){var c=this.mapPlans(s),d=s==null?void 0:s.paywall.configuration,v=!(s!=null&&s.paywall.resource)&&(s==null?void 0:s.paywall.activeSubscriptions)||[];return{plans:c,configuration:d,customer:s!=null&&s.paywall.customer?this.mapCustomer(s==null?void 0:s.paywall.customer,v):null,resource:s!=null&&s.paywall.resource?this.mapResource(s==null?void 0:s.paywall.resource):null,activeSubscriptions:s!=null&&s.paywall.activeSubscriptions?this.mapSubscriptions(s==null?void 0:s.paywall.activeSubscriptions):null,currency:s.paywall.currency,paywallCalculatedPricePoints:s.paywall.paywallCalculatedPricePoints}},h.prototype.mapMockPlans=function(s){var c=this;return{plans:((s==null?void 0:s.mockPaywall.plans)||[]).map(function(d,v){return c.mapPlan(d,v)}),configuration:s.mockPaywall.configuration,customer:null,resource:null,activeSubscriptions:null,currency:{code:S.Fa6.Usd,symbol:"$"}}},h.prototype.mapCoupons=function(s){var c=this;return s.coupons.edges.map(function(d){return d.node}).map(function(d){return c.mapCoupon(d)})},h.prototype.mapResource=function(s){return{id:s.resourceId}},h.prototype.mapCustomerPortal=function(s){var c=s.resource?this.mapResource(s.resource):null;return mr(mr({},s),{resource:c})},h.prototype.mapCheckoutState=function(s){var c=s.configuration,d=s.customer,v=s.plan,y=s.billingIntegration,_=s.resource,T=s.activeSubscription;return{setupSecret:s.setupSecret,configuration:c,customer:this.mapCustomer(d,T?[T]:[]),plan:this.mapPlan(v),resource:_?this.mapResource(_):null,billingIntegration:y,activeSubscription:T?this.mapSubscription(T):null}},h.prototype.mapCustomer=function(s,c){var d,v,y=this;return new B({id:s.refId,name:s.name||void 0,email:s.email||void 0,createdAt:new Date(s.createdAt),updatedAt:new Date(s.updatedAt),hasPaymentMethod:s.hasPaymentMethod,subscriptions:$a()(c,function(_){return y.mapSubscription(_)}),promotionalEntitlements:$a()(s.promotionalEntitlements,function(_){return y.mapPromotionalEntitlement(_)}),metadata:s.additionalMetaData,paymentMethodDetails:this.mapPaymentDetails(s),trialedPlans:((d=s.trialedPlans)===null||d===void 0?void 0:d.map(function(_){return{productId:_.productRefId,planId:_.planRefId}}))||void 0,eligibleForTrial:(v=s.eligibleForTrial)===null||v===void 0?void 0:v.map(function(_){return{productId:_.productRefId,eligible:_.eligible}}),experimentInfo:oh()(s.experimentInfo,"__typename")})},h.prototype.mapPaymentDetails=function(s){var c=s.defaultPaymentExpirationYear,d=s.defaultPaymentExpirationMonth,v=s.defaultPaymentMethodLast4Digits;if(ah()([v,d,c],function(y){return y}))return{expirationMonth:d,expirationYear:c,last4Digits:v}},h.prototype.mapPriceWithTotalPrice=function(s,c,d){var v=s.feature,y=s.tiersMode,_=s.tiers,T=s.billingModel,I=s.billingPeriod,C=s.blockSize,A={pricingModel:T,billingPeriod:I,amount:c.total.amount,grossAmount:c.subTotal.amount,currency:this.getPriceCurrency(s),tiersMode:y,tiers:_,isTieredPrice:!!y,blockSize:C};return v&&(A.feature={featureId:v.refId,displayName:v.displayName,units:v.featureUnits,unitsPlural:v.featureUnitsPlural,unitQuantity:d}),A},h.prototype.mapPrice=function(s,c){var d=s.feature,v=s.price,y=s.tiers,_=s.tiersMode,T=s.billingId,I=s.billingModel,C=s.billingPeriod,A=s.minUnitQuantity,D=s.maxUnitQuantity,U=s.billingCountryCode,q=s.blockSize,Z={pricingModel:I,billingPeriod:C,billingId:T,amount:v?v.amount:null,currency:this.getPriceCurrency(s),tiersMode:_,tiers:y,isTieredPrice:!!_,minUnitQuantity:A,maxUnitQuantity:D,billingCountryCode:U,blockSize:q};return d&&(Z.feature={featureId:d.refId,displayName:d.displayName,units:d.featureUnits,unitsPlural:d.featureUnitsPlural,unitQuantity:c}),Z},h.prototype.mapPlan=function(s,c){var d=this;return c===void 0&&(c=0),{id:s.refId,order:c,displayName:s.displayName,description:s.description,billingId:s.billingId,basePlan:s.basePlan?{id:s.basePlan.refId,displayName:s.basePlan.displayName}:void 0,entitlements:$a()(s.entitlements,function(v){return d.mapPackageEntitlement(v)}),inheritedEntitlements:$a()(s.inheritedEntitlements,function(v){return d.mapPackageEntitlement(v)}),pricePoints:$a()(s.prices,function(v){return d.mapPrice(v)}),pricingType:s.pricingType,defaultTrialConfig:this.mapDefaultTrialConfig(s.defaultTrialConfig),compatibleAddons:this.mapCompatibleAddons(s),compatiblePackageGroups:this.mapCompatiblePackageGroups(s),product:{id:s.product.refId,displayName:s.product.displayName,description:s.product.description,metadata:s.product.additionalMetaData},metadata:s.additionalMetaData}},h.prototype.mapCompatibleAddons=function(s){var c=this;if(s.pricingType===S._HY.Free||!s.compatibleAddons)return[];var d=s.compatibleAddons;return(s.pricingType===S._HY.Paid?d.filter(function(v){return v.pricingType===S._HY.Paid}):d).map(function(v){return c.mapAddon(v)})},h.prototype.mapDefaultTrialConfig=function(s){if(s)return{duration:s==null?void 0:s.duration,units:s==null?void 0:s.units,budget:s.budget?{limit:s.budget.limit}:void 0}},h.prototype.mapPackageEntitlement=function(s){var c=s.feature;return c?{usageLimit:s.usageLimit||0,feature:{id:c.refId,featureType:c.featureType,description:c.description||"",meterType:c.meterType||void 0,units:c.featureUnits||void 0,unitsPlural:c.featureUnitsPlural||void 0,displayName:c.displayName,isMetered:c.meterType===S.puT.Fluctuating||c.meterType===S.puT.Incremental,metadata:c.additionalMetaData},isCustom:s.isCustom||void 0,hasUnlimitedUsage:s.hasUnlimitedUsage,resetPeriod:s.resetPeriod,hiddenFromWidgets:s.hiddenFromWidgets,displayNameOverride:s.displayNameOverride}:{usageLimit:s.usageLimit||0,hasUnlimitedUsage:s.hasUnlimitedUsage,resetPeriod:s.resetPeriod}},h.prototype.mapPromotionalEntitlement=function(s){var c=s.feature;return{status:s.status,usageLimit:s.usageLimit||0,feature:{id:c.refId,displayName:c.displayName,description:c.description||"",featureType:c.featureType,meterType:c.meterType||void 0,units:c.featureUnits||void 0,unitsPlural:c.featureUnitsPlural||void 0,isMetered:c.meterType===S.puT.Fluctuating||c.meterType===S.puT.Incremental},hasUnlimitedUsage:s.hasUnlimitedUsage,expiresAt:s.endDate,hasExpirationDate:!!s.endDate,isVisible:s.isVisible}},h.prototype.mapSubscription=function(s){var c,d,v=this,y=s.totalPrice,_=(s.prices||[])[0];return{id:s.subscriptionId,billingId:s.billingId||void 0,resourceId:(c=s.resource)===null||c===void 0?void 0:c.resourceId,payingCustomer:s.payingCustomer?this.mapSlimCustomer(s.payingCustomer):null,status:s.status,currentBillingPeriodEnd:this.mapDate(s.currentBillingPeriodEnd),plan:this.mapPlan(s.plan),prices:s.prices?s.prices.filter(function(T){return T.price!==null}).map(function(T){return v.mapPrice(T.price,T.usageLimit)}):[],totalPrice:y,price:_&&y&&_.price?this.mapPriceWithTotalPrice(_.price,y,_.usageLimit):null,pricingType:s.pricingType,addons:((d=s.addons)===null||d===void 0?void 0:d.map(function(T){var I=T.quantity,C=T.addon;return{quantity:I,addon:v.mapAddon(C)}}))||[],startDate:s.startDate,endDate:this.mapDate(s.endDate),trialEndDate:this.mapDate(s.trialEndDate),cancellationDate:this.mapDate(s.cancellationDate),effectiveEndDate:this.mapDate(s.effectiveEndDate),metadata:s.additionalMetaData,experimentInfo:oh()(s.experimentInfo,"__typename"),scheduledUpdates:s.scheduledUpdates||[],futureUpdates:s.futureUpdates||[],latestInvoice:this.mapLatestInvoice(s.latestInvoice),paymentCollection:s.paymentCollection,paymentCollectionMethod:s.paymentCollectionMethod||void 0}},h.prototype.mapLatestInvoice=function(s){return s?mr(mr({},s),{createdAt:this.mapDate(s.createdAt),updatedAt:this.mapDate(s.updatedAt)}):void 0},h.prototype.mapDate=function(s){return s?new Date(s):void 0},h.prototype.mapAddon=function(s){var c,d=this;return{id:s.refId,displayName:s.displayName,description:s.description||"",billingId:s.billingId,entitlements:$a()(s.entitlements,function(v){return d.mapPackageEntitlement(v)}),pricePoints:$a()(s.prices,function(v){return d.mapPrice(v)}),pricingType:s.pricingType,dependencies:((c=s.dependencies)===null||c===void 0?void 0:c.map(function(v){return d.mapDependencyAddon(v)}))||[],metadata:s.additionalMetaData}},h.prototype.mapFallbackBooleanEntitlementResult=function(s,c){return{hasAccess:s.hasAccess,accessDeniedReason:c.accessDeniedReason}},h.prototype.mapFallbackNumericEntitlementResult=function(s,c){return{hasAccess:s.hasAccess,accessDeniedReason:c.accessDeniedReason,usageLimit:s.value,hasUnlimitedUsage:s.isUnlimited}},h.prototype.mapEntitlementResult=function(s,c,d){return mr({hasAccess:s.hasAccess,accessDeniedReason:s.accessDeniedReason,hasUnlimitedUsage:c==null?void 0:c.calculatedEntitlement.hasUnlimitedUsage,usageLimit:c==null?void 0:c.calculatedEntitlement.usageLimit,currentUsage:c==null?void 0:c.featureUsage.currentUsage,requestedUsage:d,nextResetDate:c==null?void 0:c.featureUsage.nextResetDate,resetPeriod:c==null?void 0:c.featureUsage.resetPeriod},this.getResetPeriodData(c==null?void 0:c.featureUsage.resetPeriod,c==null?void 0:c.featureUsage.resetPeriodConfiguration))},h.prototype.mapFallbackMeteredEntitlementResult=function(s,c,d){return{hasAccess:s.hasAccess,accessDeniedReason:c.accessDeniedReason,hasUnlimitedUsage:s.isUnlimited,usageLimit:s.usageLimit,requestedUsage:d}},h.prototype.mapTaxFields=function(s){return s!=null&&s.tax&&(s!=null&&s.taxDetails)?{tax:this.mapMoney(s.tax),taxDetails:{displayName:s.taxDetails.displayName,percentage:s.taxDetails.percentage,inclusive:s.taxDetails.inclusive}}:{}},h.prototype.mapSubscriptionPreview=function(s){var c=s.subscription,d=s.proration,v=s.billingPeriodRange,y=s.credits;return mr(mr(mr({total:this.mapMoney(s.total),totalExcludingTax:this.mapMoney(s.totalExcludingTax),subTotal:this.mapMoney(s.subTotal),discountAmount:s.discountAmount?this.mapMoney(s.discountAmount):void 0},this.mapTaxFields(s)),s.discount?{discount:this.mapDiscount(s.discount)}:{}),{billingPeriodRange:{start:v.start&&new Date(v.start),end:v.end&&new Date(v.end)},proration:d?{credit:this.mapMoney(d.credit),debit:this.mapMoney(d.debit),netAmount:this.mapMoney(d.netAmount),prorationDate:new Date(d.prorationDate)}:void 0,subscription:c?mr(mr({total:this.mapMoney(c.total),totalExcludingTax:this.mapMoney(c.totalExcludingTax),subTotal:this.mapMoney(c.subTotal),discountAmount:c.discountAmount?this.mapMoney(c.discountAmount):void 0},c.discount?{discount:this.mapDiscount(c.discount)}:{}),this.mapTaxFields(c)):void 0,isPlanDowngrade:!!s.isPlanDowngrade,hasScheduledUpdates:!!s.hasScheduledUpdates,credits:y?{initial:this.mapMoney(y.initial),used:this.mapMoney(y.used),remaining:this.mapMoney(y.remaining)}:void 0})},h.prototype.mapSubscriptionPreviewV2=function(s){var c=s.immediateInvoice,d=s.recurringInvoice,v=s.billingPeriodRange,y=s.hasScheduledUpdates,_=s.isPlanDowngrade;return{immediateInvoice:mr(mr({},this.mapSubscriptionPreviewInvoice(c)),{proration:c.proration?{credit:this.mapMoney(c.proration.credit),debit:this.mapMoney(c.proration.debit),netAmount:this.mapMoney(c.proration.netAmount),prorationDate:new Date(c.proration.prorationDate),hasProrations:c.proration.hasProrations||void 0}:void 0,credits:c.credits?{initial:this.mapMoney(c.credits.initial),used:this.mapMoney(c.credits.used),remaining:this.mapMoney(c.credits.remaining)}:void 0}),recurringInvoice:d?mr({},this.mapSubscriptionPreviewInvoice(d)):void 0,billingPeriodRange:{start:v.start&&new Date(v.start),end:v.end&&new Date(v.end)},isPlanDowngrade:!!_,hasScheduledUpdates:!!y}},h.prototype.mapSubscriptionPreviewInvoice=function(s){return mr(mr({total:this.mapMoney(s.total),subTotal:this.mapMoney(s.subTotal),totalExcludingTax:this.mapMoney(s.totalExcludingTax),discount:s.discount?this.mapMoney(s.discount):void 0},s.discountDetails?{discountDetails:this.mapDiscount(s.discountDetails)}:{}),this.mapTaxFields(s))},h.prototype.mapDiscount=function(s){var c=s.name,d=s.type,v=s.value,y=s.durationType,_=s.durationInMonths;return mr({name:c,type:d,value:v,durationType:y},_?{durationInMonths:_}:{})},h.prototype.mapMoney=function(s){return{amount:s.amount,currency:s.currency}},h.prototype.mapCoupon=function(s){return{id:s.refId,name:s.name,description:s.description,metadata:s.additionalMetaData,discountValue:s.discountValue}},h.prototype.mapSubscriptions=function(s){var c=this;return s.map(function(d){return c.mapSubscription(d)})},h.prototype.mapUsageHistory=function(s){return s.usageMeasurements.map(function(c){var d=c.date,v=c.value,y=c.isResetPoint;return{date:new Date(d),value:v,isResetPoint:!!y}})},h.prototype.getPriceCurrency=function(s){var c,d,v=s.price,y=s.tiers;return(v==null?void 0:v.currency)||((c=y==null?void 0:y[0].unitPrice)===null||c===void 0?void 0:c.currency)||((d=y==null?void 0:y[0].flatPrice)===null||d===void 0?void 0:d.currency)||S.Fa6.Usd},h.prototype.mapCompatiblePackageGroups=function(s){var c=this;return s.pricingType!==S._HY.Free&&s.compatiblePackageGroups?s.compatiblePackageGroups.map(function(d){var v=d.packageGroupId,y=d.displayName,_=d.options,T=d.addons;return{packageGroupId:v,displayName:y,addons:(T==null?void 0:T.map(function(I){return c.mapAddon(I)}))||[],options:{minItems:(_==null?void 0:_.minItems)||void 0,freeItems:(_==null?void 0:_.freeItems)||void 0}}}):[]},h.prototype.mapDependencyAddon=function(s){return{refId:s.refId,displayName:s.displayName,description:s.description||void 0}},h}(),Qu=function(){function h(){}return h.decideEntitlementPolicy=function(s,c){var d,v;if(!s||!s.calculatedEntitlement.feature)return{hasAccess:!1,accessDeniedReason:S.fEx.NoFeatureEntitlementInSubscription};if(s.calculatedEntitlement.accessDeniedReason===S.fEx.BudgetExceeded)return{hasAccess:!1,accessDeniedReason:S.fEx.BudgetExceeded};var y=s.calculatedEntitlement.feature,_=y.featureType,T=y.meterType;switch(_){case S.Tex.Boolean:return{hasAccess:!0};case S.Tex.Number:if(((d=s.calculatedEntitlement.feature)===null||d===void 0?void 0:d.meterType)===S.puT.None)return{hasAccess:!0};if(s.calculatedEntitlement.hasUnlimitedUsage||s.calculatedEntitlement.hasSoftLimit)return{hasAccess:!0};var I=s.featureUsage.currentUsage,C=s.featureUsage.nextResetDate;return T===S.puT.Incremental&&!(0,G.isNil)(C)&&C<new Date().getTime()&&(I=0),I+(c||0)<=(((v=s.calculatedEntitlement)===null||v===void 0?void 0:v.usageLimit)||0)?{hasAccess:!0}:{hasAccess:!1,accessDeniedReason:S.fEx.RequestedUsageExceedingLimit}}},h}(),Zv=function(){function h(s,c,d,v){this.entitlementsApi=s,this.customerId=c,this.loggerService=d,this.resourceId=v}return h.prototype.reportEntitlementCheckRequested=function(s,c,d){var v=this;this.entitlementsApi.reportEntitlementRequested(s,this.customerId,c,this.resourceId,d).then(function(){v.loggerService.debug("Successfully reported entitlement check requested")},function(){})},h}(),Br=function(){return Br=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},Br.apply(this,arguments)},Wn=function(h,s,c,d){return new(c||(c=Promise))(function(v,y){function _(C){try{I(d.next(C))}catch(A){y(A)}}function T(C){try{I(d.throw(C))}catch(A){y(A)}}function I(C){var A;C.done?v(C.value):(A=C.value,A instanceof c?A:new c(function(D){D(A)})).then(_,T)}I((d=d.apply(h,[])).next())})},na=function(h,s){var c,d,v,y,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(I){return function(C){return function(A){if(c)throw new TypeError("Generator is already executing.");for(;_;)try{if(c=1,d&&(v=2&A[0]?d.return:A[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,A[1])).done)return v;switch(d=0,v&&(A=[2&A[0],v.value]),A[0]){case 0:case 1:v=A;break;case 4:return _.label++,{value:A[1],done:!1};case 5:_.label++,d=A[1],A=[0];continue;case 7:A=_.ops.pop(),_.trys.pop();continue;default:if(!((v=(v=_.trys).length>0&&v[v.length-1])||A[0]!==6&&A[0]!==2)){_=0;continue}if(A[0]===3&&(!v||A[1]>v[0]&&A[1]<v[3])){_.label=A[1];break}if(A[0]===6&&_.label<v[1]){_.label=v[1],v=A;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(A);break}v[2]&&_.ops.pop(),_.trys.pop();continue}A=s.call(h,_)}catch(D){A=[6,D],d=0}finally{c=v=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([I,C])}}},ia=function(){function h(s,c,d,v,y,_,T,I){this.customerId=s,this.resourceId=c,this.cacheService=d,this.loggerService=T,this.onEntitlementsUpdated=I,this.modelMapper=new sh,this.loadingEntitlements=null,this.entitlementsApi=new Ml(v,_),this.entitlementCheckReportingService=new Zv(new Ml(y,_),s,this.loggerService,c)}return h.prototype.refresh=function(){return Wn(this,void 0,void 0,function(){return na(this,function(s){switch(s.label){case 0:return[4,this.loadEntitlements(!0)];case 1:return s.sent(),[2]}})})},Object.defineProperty(h.prototype,"isInitialized",{get:function(){return this.cacheService.isLoaded()},enumerable:!1,configurable:!0}),h.prototype.getBooleanEntitlement=function(s,c,d){var v=(d==null?void 0:d.shouldTrack)||!1,y=this.getEntitlement(s),_=Qu.decideEntitlementPolicy(y);if(y!=null&&y.calculatedEntitlement.feature&&y.calculatedEntitlement.feature.featureType!==S.Tex.Boolean)return this.tryTrackEntitlementCheck(v,s,this.modelMapper.mapFallbackBooleanEntitlementResult(c,_)),c;if(!y){var T=this.modelMapper.mapEntitlementResult(_);return this.tryTrackEntitlementCheck(v,s,T),Br(Br({},_),{isFallback:!1})}var I=this.modelMapper.mapEntitlementResult(_,y);return this.tryTrackEntitlementCheck(v,s,I),this.modelMapper.mapBooleanEntitlement(y,_)},h.prototype.getNumericEntitlement=function(s,c,d){var v,y=(d==null?void 0:d.shouldTrack)||!1,_=this.getEntitlement(s),T=Qu.decideEntitlementPolicy(_);if(_!=null&&_.calculatedEntitlement.feature&&((v=_.calculatedEntitlement.feature)===null||v===void 0?void 0:v.featureType)!==S.Tex.Number){var I=this.modelMapper.mapFallbackNumericEntitlementResult(c,T);return this.tryTrackEntitlementCheck(y,s,I),c}if(!_){var C=this.modelMapper.mapEntitlementResult(T);return this.tryTrackEntitlementCheck(y,s,C),Br(Br({},T),{isFallback:!1,isUnlimited:!1})}var A=this.modelMapper.mapEntitlementResult(T,_);return this.tryTrackEntitlementCheck(y,s,A),this.modelMapper.mapNumericEntitlement(_,T)},h.prototype.getMeteredEntitlement=function(s,c,d){var v,y,_=(d==null?void 0:d.shouldTrack)||!1,T=this.getEntitlement(s),I=d==null?void 0:d.requestedUsage,C=Qu.decideEntitlementPolicy(T,I);if(T!=null&&T.calculatedEntitlement.feature&&((v=T.calculatedEntitlement.feature)===null||v===void 0?void 0:v.meterType)!==S.puT.Fluctuating&&((y=T.calculatedEntitlement.feature)===null||y===void 0?void 0:y.meterType)!==S.puT.Incremental){var A=this.modelMapper.mapFallbackMeteredEntitlementResult(c,C,I);return this.tryTrackEntitlementCheck(_,s,A,I),c}if(!T){var D=this.modelMapper.mapEntitlementResult(C,void 0,I);return this.tryTrackEntitlementCheck(_,s,D,I),Br(Br({},C),{currentUsage:0,isFallback:!1,isUnlimited:!1,requestedUsage:I||0})}var U=this.modelMapper.mapEntitlementResult(C,T,I);return this.tryTrackEntitlementCheck(_,s,U,I),this.modelMapper.mapMeteredEntitlement(T,C,I)},h.prototype.tryTrackEntitlementCheck=function(s,c,d,v){s&&this.entitlementCheckReportingService.reportEntitlementCheckRequested(c,d,v)},h.prototype.loadEntitlements=function(s){return Wn(this,void 0,void 0,function(){return na(this,function(c){switch(c.label){case 0:this.loadingEntitlements||(this.loadingEntitlements=this.loadEntitlementsFromRemote(s)),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.loadingEntitlements];case 2:return[2,c.sent()];case 3:return this.loadingEntitlements=null,[7];case 4:return[2]}})})},h.prototype.loadEntitlementsFromRemote=function(s){return Wn(this,void 0,void 0,function(){var c;return na(this,function(d){switch(d.label){case 0:return[4,this.entitlementsApi.getEntitlements(this.customerId,s,this.resourceId)];case 1:return c=d.sent(),this.storeFetchedEntitlementsInCache(c.data.entitlements),[2]}})})},h.prototype.storeFetchedEntitlementsInCache=function(s){this.cacheService.updateLastChecked();var c=this.cacheService.getLastUpdate(),d=this.getLastEntitlementsUpdate(s);if(!(c&&d.getTime()<c.getTime())){var v=this.modelMapper.mapCachedEntitlements(s);this.cacheService.setEntitlements(v,d),this.onEntitlementsUpdated(v)}},h.prototype.getLastEntitlementsUpdate=function(s){return(0,G.max)(s.flatMap(function(c){return[new Date(c.entitlementUpdatedAt),new Date(c.usageUpdatedAt)]}))||new Date},h.prototype.getEntitlement=function(s){var c=this.cacheService.getEntitlement(s);return this.renewOutdatedCacheInBackground(),c},h.prototype.getEntitlements=function(){return Wn(this,void 0,void 0,function(){var s=this;return na(this,function(c){switch(c.label){case 0:return[4,this.renewOutdatedCache()];case 1:return c.sent(),[2,Array.from(this.cacheService.getEntitlements().values()).map(function(d){var v=Qu.decideEntitlementPolicy(d);return s.modelMapper.mapEntitlement(d,v)})]}})})},h.prototype.renewOutdatedCache=function(){return Wn(this,void 0,void 0,function(){return na(this,function(s){switch(s.label){case 0:return!this.cacheService.isLoaded()||this.cacheService.isOutdated()?[4,this.loadEntitlements()]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},h.prototype.renewOutdatedCacheInBackground=function(){var s=this;this.renewOutdatedCache().catch(function(c){s.loggerService.error("Failed to renew cache in background",c)})},h}(),Jv=l(2527),em=function(){var h=function(s,c){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y])},h(s,c)};return function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=s}h(s,c),s.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),tm=function(h){function s(){return h.call(this)||this}return em(s,h),s}(Jv.TypedEmitter),oa=function(){function h(s){var c=this;s===void 0&&(s=3e4),this.ttlMs=s,this.setFeatures=function(d){return c.features=new Set(d)},this.ttlMs=s,this.entitlements=new Map,this.features=new Set,this.lastUpdate=null,this.lastChecked=null}return h.prototype.getEntitlement=function(s){return this.entitlements.get(s)||null},h.prototype.validateFeature=function(s){return this.features.has(s)},h.prototype.updateLastChecked=function(){this.lastChecked=new Date},h.prototype.setEntitlements=function(s,c){this.entitlements=s,this.lastUpdate=c},h.prototype.getEntitlements=function(){return this.entitlements},h.prototype.getLastUpdate=function(){return this.lastUpdate},h.prototype.isLoaded=function(){return!!this.lastUpdate},h.prototype.isOutdated=function(){return this.lastChecked===null||new Date().getTime()-this.lastChecked.getTime()>this.ttlMs},h}();(function(h){h.IN_PROGRESS="IN_PROGRESS",h.SUCCESS="READY",h.FAILED="FAILED"})(po||(po={}));var Xu=function(){function h(s){this.eventEmitter=s,this.initializationPromise=null,this.initializationStatus=po.IN_PROGRESS,this.initFailureError=null}return h.prototype.getInitializationPromise=function(){var s=this;return this.initializationPromise?this.initializationPromise:this.initializationStatus===po.SUCCESS?Promise.resolve():this.initializationStatus===po.FAILED?Promise.reject(this.initFailureError):(this.initializationPromise=new Promise(function(c,d){s.eventEmitter.once("initializeSuccessfully",function(){c()}),s.eventEmitter.once("initializeFailed",function(v){d(v)})}),this.initializationPromise)},h.prototype.signalSuccessInit=function(){this.initializationStatus=po.SUCCESS,this.eventEmitter.emit("initializeSuccessfully")},h.prototype.signalFailedInit=function(s){this.initializationStatus=po.FAILED,this.initFailureError=s,this.eventEmitter.emit("initializeFailed",s)},h}(),jr=l(2991),uh=Object.prototype.toString;function Zu(h){switch(uh.call(h)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return aa(h,Error)}}function Va(h,s){return uh.call(h)===`[object ${s}]`}function Ju(h){return Va(h,"ErrorEvent")}function Ll(h){return Va(h,"DOMError")}function vo(h){return Va(h,"String")}function ch(h){return h===null||typeof h!="object"&&typeof h!="function"}function mo(h){return Va(h,"Object")}function Ul(h){return typeof Event<"u"&&aa(h,Event)}function ec(h){return!!(h&&h.then&&typeof h.then=="function")}function aa(h,s){try{return h instanceof s}catch{return!1}}function Fl(h,s){try{let v=h;var c=[];let y=0,_=0;var d=3;let T;for(;v&&y++<5&&(T=go(v,s),!(T==="html"||y>1&&_+c.length*d+T.length>=80));)c.push(T),_+=T.length,v=v.parentNode;return c.reverse().join(" > ")}catch{return"<unknown>"}}function go(h,s){var c=h,d=[];let v,y,_,T,I;if(!c||!c.tagName)return"";d.push(c.tagName.toLowerCase());var C=s&&s.length?s.filter(D=>c.getAttribute(D)).map(D=>[D,c.getAttribute(D)]):null;if(C&&C.length)C.forEach(D=>{d.push(`[${D[0]}="${D[1]}"]`)});else if(c.id&&d.push(`#${c.id}`),v=c.className,v&&vo(v))for(y=v.split(/\s+/),I=0;I<y.length;I++)d.push(`.${y[I]}`);var A=["type","name","title","alt"];for(I=0;I<A.length;I++)_=A[I],T=c.getAttribute(_),T&&d.push(`[${_}="${T}"]`);return d.join("")}function $s(h,s=0){return typeof h!="string"||s===0||h.length<=s?h:`${h.substr(0,s)}...`}function lh(h,s){if(!Array.isArray(h))return"";var c=[];for(let v=0;v<h.length;v++){var d=h[v];try{c.push(String(d))}catch{c.push("[value cannot be serialized]")}}return c.join(s)}function fh(h,s){return!!vo(h)&&(Va(s,"RegExp")?s.test(h):typeof s=="string"&&h.indexOf(s)!==-1)}function En(h,s,c){if(s in h){var d=h[s],v=c(d);if(typeof v=="function")try{Bl(v,d)}catch{}h[s]=v}}function Di(h,s,c){Object.defineProperty(h,s,{value:c,writable:!0,configurable:!0})}function Bl(h,s){var c=s.prototype||{};h.prototype=s.prototype=c,Di(h,"__sentry_original__",s)}function tc(h){return h.__sentry_original__}function jl(h){if(Zu(h))return{message:h.message,name:h.name,stack:h.stack,...qa(h)};if(Ul(h)){var s={type:h.type,target:rc(h.target),currentTarget:rc(h.currentTarget),...qa(h)};return typeof CustomEvent<"u"&&aa(h,CustomEvent)&&(s.detail=h.detail),s}return h}function rc(h){try{return typeof Element<"u"&&aa(h,Element)?Fl(h):Object.prototype.toString.call(h)}catch{return"<unknown>"}}function qa(h){if(typeof h=="object"&&h!==null){var s={};for(var c in h)Object.prototype.hasOwnProperty.call(h,c)&&(s[c]=h[c]);return s}return{}}function ut(h,s=40){var c=Object.keys(jl(h));if(c.sort(),!c.length)return"[object has no keys]";if(c[0].length>=s)return $s(c[0],s);for(let v=c.length;v>0;v--){var d=c.slice(0,v).join(", ");if(!(d.length>s))return v===c.length?d:$s(d,s)}return""}function Vs(h){return nc(h,new Map)}function nc(h,s){if(mo(h)){if((v=s.get(h))!==void 0)return v;var c={};for(var d of(s.set(h,c),Object.keys(h)))h[d]!==void 0&&(c[d]=nc(h[d],s));return c}var v;return Array.isArray(h)?(v=s.get(h))!==void 0?v:(c=[],s.set(h,c),h.forEach(y=>{c.push(nc(y,s))}),c):h}let sa;class Ha{constructor(){Ha.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Ha.id}setupOnce(){sa=Function.prototype.toString,Function.prototype.toString=function(...s){var c=tc(this)||this;return sa.apply(c,s)}}}Ha.__initStatic();var rm=(0,jr.R)(),tn=["debug","info","warn","error","log","assert","trace"];function dh(h){var s=(0,jr.R)();if(!("console"in s))return h();var c=s.console,d={};tn.forEach(v=>{var y=c[v]&&c[v].__sentry_original__;v in s.console&&y&&(d[v]=c[v],c[v]=y)});try{return h()}finally{Object.keys(d).forEach(v=>{c[v]=d[v]})}}function hh(){let h=!1;var s={enable:()=>{h=!0},disable:()=>{h=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?tn.forEach(c=>{s[c]=(...d)=>{h&&dh(()=>{rm.console[c](`Sentry Logger [${c}]:`,...d)})}}):tn.forEach(c=>{s[c]=()=>{}}),s}let Ut;function zn(){var h=(0,jr.R)(),s=h.crypto||h.msCrypto;if(s&&s.randomUUID)return s.randomUUID().replace(/-/g,"");var c=s&&s.getRandomValues?()=>s.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return("10000000100040008000"+1e11).replace(/[018]/g,d=>(d^(15&c())>>d/4).toString(16))}function Pn(h){return h.exception&&h.exception.values?h.exception.values[0]:void 0}function yo(h){const{message:s,event_id:c}=h;if(s)return s;var d=Pn(h);return d?d.type&&d.value?`${d.type}: ${d.value}`:d.type||d.value||c||"<unknown>":c||"<unknown>"}function ic(h,s,c){var d=h.exception=h.exception||{},v=d.values=d.values||[],y=v[0]=v[0]||{};y.value||(y.value=s||""),y.type||(y.type="Error")}function oc(h,s){var c=Pn(h);if(c){var d=c.mechanism;if(c.mechanism={type:"generic",handled:!0,...d,...s},s&&"data"in s){var v={...d&&d.data,...s.data};c.mechanism.data=v}}}function qs(h){if(h&&h.__sentry_captured__)return!0;try{Di(h,"__sentry_captured__",!0)}catch{}return!1}Ut=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?(0,jr.Y)("logger",hh):hh();var nm=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class Wa{static __initStatic(){this.id="InboundFilters"}__init(){this.name=Wa.id}constructor(s={}){this._options=s,Wa.prototype.__init.call(this)}setupOnce(s,c){var d=v=>{var y=c();if(y){var _=y.getIntegration(Wa);if(_){var T=y.getClient(),I=T?T.getOptions():{},C=function(A={},D={}){return{allowUrls:[...A.allowUrls||[],...D.allowUrls||[]],denyUrls:[...A.denyUrls||[],...D.denyUrls||[]],ignoreErrors:[...A.ignoreErrors||[],...D.ignoreErrors||[],...nm],ignoreInternal:A.ignoreInternal===void 0||A.ignoreInternal}}(_._options,I);return function(A,D){return D.ignoreInternal&&function(U){try{return U.exception.values[0].type==="SentryError"}catch{}return!1}(A)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn(`Event dropped due to being internal Sentry Error.
Event: ${yo(A)}`),!0):function(U,q){return!(!q||!q.length)&&function(Z){if(Z.message)return[Z.message];if(Z.exception)try{const{type:z="",value:ne=""}=Z.exception.values&&Z.exception.values[0]||{};return[`${ne}`,`${z}: ${ne}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error(`Cannot extract message for event ${yo(Z)}`),[]}return[]}(U).some(Z=>q.some(z=>fh(Z,z)))}(A,D.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${yo(A)}`),!0):function(U,q){if(!q||!q.length)return!1;var Z=ac(U);return!!Z&&q.some(z=>fh(Z,z))}(A,D.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${yo(A)}.
Url: ${ac(A)}`),!0):!function(U,q){if(!q||!q.length)return!0;var Z=ac(U);return!Z||q.some(z=>fh(Z,z))}(A,D.allowUrls)&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${yo(A)}.
Url: ${ac(A)}`),!0)}(v,C)?null:v}}return v};d.id=this.name,s(d)}}function ac(h){try{let s;try{s=h.exception.values[0].stacktrace.frames}catch{}return s?function(c=[]){for(let v=c.length-1;v>=0;v--){var d=c[v];if(d&&d.filename!=="<anonymous>"&&d.filename!=="[native code]")return d.filename||null}return null}(s):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error(`Cannot extract url for event ${yo(h)}`),null}}Wa.__initStatic();var Ki,Hs=l(1170),ph=l(2176);function ua(h){return new bn(s=>{s(h)})}function za(h){return new bn((s,c)=>{c(h)})}(function(h){h[h.PENDING=0]="PENDING",h[h.RESOLVED=1]="RESOLVED",h[h.REJECTED=2]="REJECTED"})(Ki||(Ki={}));class bn{__init(){this._state=Ki.PENDING}__init2(){this._handlers=[]}constructor(s){bn.prototype.__init.call(this),bn.prototype.__init2.call(this),bn.prototype.__init3.call(this),bn.prototype.__init4.call(this),bn.prototype.__init5.call(this),bn.prototype.__init6.call(this);try{s(this._resolve,this._reject)}catch(c){this._reject(c)}}then(s,c){return new bn((d,v)=>{this._handlers.push([!1,y=>{if(s)try{d(s(y))}catch(_){v(_)}else d(y)},y=>{if(c)try{d(c(y))}catch(_){v(_)}else v(y)}]),this._executeHandlers()})}catch(s){return this.then(c=>c,s)}finally(s){return new bn((c,d)=>{let v,y;return this.then(_=>{y=!1,v=_,s&&s()},_=>{y=!0,v=_,s&&s()}).then(()=>{y?d(v):c(v)})})}__init3(){this._resolve=s=>{this._setResult(Ki.RESOLVED,s)}}__init4(){this._reject=s=>{this._setResult(Ki.REJECTED,s)}}__init5(){this._setResult=(s,c)=>{this._state===Ki.PENDING&&(ec(c)?c.then(this._resolve,this._reject):(this._state=s,this._value=c,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state!==Ki.PENDING){var s=this._handlers.slice();this._handlers=[],s.forEach(c=>{c[0]||(this._state===Ki.RESOLVED&&c[1](this._value),this._state===Ki.REJECTED&&c[2](this._value),c[0]=!0)})}}}}function Ka(h,s={}){if(s.user&&(!h.ipAddress&&s.user.ip_address&&(h.ipAddress=s.user.ip_address),h.did||s.did||(h.did=s.user.id||s.user.email||s.user.username)),h.timestamp=s.timestamp||(0,Hs.ph)(),s.ignoreDuration&&(h.ignoreDuration=s.ignoreDuration),s.sid&&(h.sid=s.sid.length===32?s.sid:zn()),s.init!==void 0&&(h.init=s.init),!h.did&&s.did&&(h.did=`${s.did}`),typeof s.started=="number"&&(h.started=s.started),h.ignoreDuration)h.duration=void 0;else if(typeof s.duration=="number")h.duration=s.duration;else{var c=h.timestamp-h.started;h.duration=c>=0?c:0}s.release&&(h.release=s.release),s.environment&&(h.environment=s.environment),!h.ipAddress&&s.ipAddress&&(h.ipAddress=s.ipAddress),!h.userAgent&&s.userAgent&&(h.userAgent=s.userAgent),typeof s.errors=="number"&&(h.errors=s.errors),s.status&&(h.status=s.status)}class _o{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(s){var c=new _o;return s&&(c._breadcrumbs=[...s._breadcrumbs],c._tags={...s._tags},c._extra={...s._extra},c._contexts={...s._contexts},c._user=s._user,c._level=s._level,c._span=s._span,c._session=s._session,c._transactionName=s._transactionName,c._fingerprint=s._fingerprint,c._eventProcessors=[...s._eventProcessors],c._requestSession=s._requestSession,c._attachments=[...s._attachments]),c}addScopeListener(s){this._scopeListeners.push(s)}addEventProcessor(s){return this._eventProcessors.push(s),this}setUser(s){return this._user=s||{},this._session&&Ka(this._session,{user:s}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(s){return this._requestSession=s,this}setTags(s){return this._tags={...this._tags,...s},this._notifyScopeListeners(),this}setTag(s,c){return this._tags={...this._tags,[s]:c},this._notifyScopeListeners(),this}setExtras(s){return this._extra={...this._extra,...s},this._notifyScopeListeners(),this}setExtra(s,c){return this._extra={...this._extra,[s]:c},this._notifyScopeListeners(),this}setFingerprint(s){return this._fingerprint=s,this._notifyScopeListeners(),this}setLevel(s){return this._level=s,this._notifyScopeListeners(),this}setTransactionName(s){return this._transactionName=s,this._notifyScopeListeners(),this}setContext(s,c){return c===null?delete this._contexts[s]:this._contexts={...this._contexts,[s]:c},this._notifyScopeListeners(),this}setSpan(s){return this._span=s,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){var s=this.getSpan();return s&&s.transaction}setSession(s){return s?this._session=s:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(s){if(!s)return this;if(typeof s=="function"){var c=s(this);return c instanceof _o?c:this}return s instanceof _o?(this._tags={...this._tags,...s._tags},this._extra={...this._extra,...s._extra},this._contexts={...this._contexts,...s._contexts},s._user&&Object.keys(s._user).length&&(this._user=s._user),s._level&&(this._level=s._level),s._fingerprint&&(this._fingerprint=s._fingerprint),s._requestSession&&(this._requestSession=s._requestSession)):mo(s)&&(s=s,this._tags={...this._tags,...s.tags},this._extra={...this._extra,...s.extra},this._contexts={...this._contexts,...s.contexts},s.user&&(this._user=s.user),s.level&&(this._level=s.level),s.fingerprint&&(this._fingerprint=s.fingerprint),s.requestSession&&(this._requestSession=s.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(s,c){var d=typeof c=="number"?Math.min(c,100):100;if(d<=0)return this;var v={timestamp:(0,Hs.yW)(),...s};return this._breadcrumbs=[...this._breadcrumbs,v].slice(-d),this._notifyScopeListeners(),this}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(s){return this._attachments.push(s),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(s,c={}){if(this._extra&&Object.keys(this._extra).length&&(s.extra={...this._extra,...s.extra}),this._tags&&Object.keys(this._tags).length&&(s.tags={...this._tags,...s.tags}),this._user&&Object.keys(this._user).length&&(s.user={...this._user,...s.user}),this._contexts&&Object.keys(this._contexts).length&&(s.contexts={...this._contexts,...s.contexts}),this._level&&(s.level=this._level),this._transactionName&&(s.transaction=this._transactionName),this._span){s.contexts={trace:this._span.getTraceContext(),...s.contexts};var d=this._span.transaction&&this._span.transaction.name;d&&(s.tags={transaction:d,...s.tags})}return this._applyFingerprint(s),s.breadcrumbs=[...s.breadcrumbs||[],...this._breadcrumbs],s.breadcrumbs=s.breadcrumbs.length>0?s.breadcrumbs:void 0,s.sdkProcessingMetadata={...s.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...sc(),...this._eventProcessors],s,c)}setSDKProcessingMetadata(s){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...s},this}_notifyEventProcessors(s,c,d,v=0){return new bn((y,_)=>{var T=s[v];if(c===null||typeof T!="function")y(c);else{var I=T({...c},d);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&T.id&&I===null&&Ut.log(`Event processor "${T.id}" dropped event`),ec(I)?I.then(C=>this._notifyEventProcessors(s,C,d,v+1).then(y)).then(null,_):this._notifyEventProcessors(s,I,d,v+1).then(y).then(null,_)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(s=>{s(this)}),this._notifyingListeners=!1)}_applyFingerprint(s){s.fingerprint=s.fingerprint?Array.isArray(s.fingerprint)?s.fingerprint:[s.fingerprint]:[],this._fingerprint&&(s.fingerprint=s.fingerprint.concat(this._fingerprint)),s.fingerprint&&!s.fingerprint.length&&delete s.fingerprint}}function sc(){return(0,jr.Y)("globalEventProcessors",()=>[])}function uc(h){sc().push(h)}var vh=100;class Ya{__init(){this._stack=[{}]}constructor(s,c=new _o,d=4){this._version=d,Ya.prototype.__init.call(this),this.getStackTop().scope=c,s&&this.bindClient(s)}isOlderThan(s){return this._version<s}bindClient(s){this.getStackTop().client=s,s&&s.setupIntegrations&&s.setupIntegrations()}pushScope(){var s=_o.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:s}),s}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(s){var c=this.pushScope();try{s(c)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(s,c){var d=this._lastEventId=c&&c.event_id?c.event_id:zn(),v=new Error("Sentry syntheticException");return this._withClient((y,_)=>{y.captureException(s,{originalException:s,syntheticException:v,...c,event_id:d},_)}),d}captureMessage(s,c,d){var v=this._lastEventId=d&&d.event_id?d.event_id:zn(),y=new Error(s);return this._withClient((_,T)=>{_.captureMessage(s,c,{originalException:s,syntheticException:y,...d,event_id:v},T)}),v}captureEvent(s,c){var d=c&&c.event_id?c.event_id:zn();return s.type!=="transaction"&&(this._lastEventId=d),this._withClient((v,y)=>{v.captureEvent(s,{...c,event_id:d},y)}),d}lastEventId(){return this._lastEventId}addBreadcrumb(s,c){const{scope:d,client:v}=this.getStackTop();if(!d||!v)return;const{beforeBreadcrumb:y=null,maxBreadcrumbs:_=vh}=v.getOptions&&v.getOptions()||{};if(!(_<=0)){var T={timestamp:(0,Hs.yW)(),...s},I=y?dh(()=>y(T,c)):T;I!==null&&d.addBreadcrumb(I,_)}}setUser(s){var c=this.getScope();c&&c.setUser(s)}setTags(s){var c=this.getScope();c&&c.setTags(s)}setExtras(s){var c=this.getScope();c&&c.setExtras(s)}setTag(s,c){var d=this.getScope();d&&d.setTag(s,c)}setExtra(s,c){var d=this.getScope();d&&d.setExtra(s,c)}setContext(s,c){var d=this.getScope();d&&d.setContext(s,c)}configureScope(s){const{scope:c,client:d}=this.getStackTop();c&&d&&s(c)}run(s){var c=ca(this);try{s(this)}finally{ca(c)}}getIntegration(s){var c=this.getClient();if(!c)return null;try{return c.getIntegration(s)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn(`Cannot retrieve integration ${s.id} from the current Hub`),null}}startTransaction(s,c){return this._callExtensionMethod("startTransaction",s,c)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(s=!1){if(s)return this.endSession();this._sendSessionUpdate()}endSession(){var s=this.getStackTop(),c=s&&s.scope,d=c&&c.getSession();d&&function(v,y){let _={};v.status==="ok"&&(_={status:"exited"}),Ka(v,_)}(d),this._sendSessionUpdate(),c&&c.setSession()}startSession(s){const{scope:c,client:d}=this.getStackTop(),{release:v,environment:y}=d&&d.getOptions()||{};var _=(0,jr.R)();const{userAgent:T}=_.navigator||{};var I=function(A){var D=(0,Hs.ph)(),U={sid:zn(),init:!0,timestamp:D,started:D,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(q){return Vs({sid:`${q.sid}`,init:q.init,started:new Date(1e3*q.started).toISOString(),timestamp:new Date(1e3*q.timestamp).toISOString(),status:q.status,errors:q.errors,did:typeof q.did=="number"||typeof q.did=="string"?`${q.did}`:void 0,duration:q.duration,attrs:{release:q.release,environment:q.environment,ip_address:q.ipAddress,user_agent:q.userAgent}})}(U)};return A&&Ka(U,A),U}({release:v,environment:y,...c&&{user:c.getUser()},...T&&{userAgent:T},...s});if(c){var C=c.getSession&&c.getSession();C&&C.status==="ok"&&Ka(C,{status:"exited"}),this.endSession(),c.setSession(I)}return I}shouldSendDefaultPii(){var s=this.getClient(),c=s&&s.getOptions();return!!(c&&c.sendDefaultPii)}_sendSessionUpdate(){const{scope:s,client:c}=this.getStackTop();if(s){var d=s.getSession();d&&c&&c.captureSession&&c.captureSession(d)}}_withClient(s){const{scope:c,client:d}=this.getStackTop();d&&s(d,c)}_callExtensionMethod(s,...c){var d=fi().__SENTRY__;if(d&&d.extensions&&typeof d.extensions[s]=="function")return d.extensions[s].apply(this,c);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn(`Extension method ${s} couldn't be found, doing nothing.`)}}function fi(){var h=(0,jr.R)();return h.__SENTRY__=h.__SENTRY__||{extensions:{},hub:void 0},h}function ca(h){var s=fi(),c=la(s);return mh(s,h),c}function Un(){var h=fi();return im(h)&&!la(h).isOlderThan(4)||mh(h,new Ya),(0,ph.KV)()?function(s){try{var c=fi().__SENTRY__,d=c&&c.extensions&&c.extensions.domain&&c.extensions.domain.active;if(!d)return la(s);if(!im(d)||la(d).isOlderThan(4)){var v=la(s).getStackTop();mh(d,new Ya(v.client,_o.clone(v.scope)))}return la(d)}catch{return la(s)}}(h):la(h)}function im(h){return!!(h&&h.__SENTRY__&&h.__SENTRY__.hub)}function la(h){return(0,jr.Y)("hub",()=>new Ya,h)}function mh(h,s){return!!h&&((h.__SENTRY__=h.__SENTRY__||{}).hub=s,!0)}var gh="<anonymous>";function Eo(h){try{return h&&typeof h=="function"&&h.name||gh}catch{return gh}}function Gl(){if(!("fetch"in(0,jr.R)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch{return!1}}function $l(h){return h&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(h.toString())}var Sr=(0,jr.R)(),cc={},om={};function hn(h,s){cc[h]=cc[h]||[],cc[h].push(s),function(c){if(!om[c])switch(om[c]=!0,c){case"console":"console"in Sr&&tn.forEach(function(d){d in Sr.console&&En(Sr.console,d,function(v){return function(...y){Mi("console",{args:y,level:d}),v&&v.apply(Sr.console,y)}})});break;case"dom":(function(){if("document"in Sr){var d=Mi.bind(null,"dom"),v=sm(d,!0);Sr.document.addEventListener("click",v,!1),Sr.document.addEventListener("keypress",v,!1),["EventTarget","Node"].forEach(y=>{var _=Sr[y]&&Sr[y].prototype;_&&_.hasOwnProperty&&_.hasOwnProperty("addEventListener")&&(En(_,"addEventListener",function(T){return function(I,C,A){if(I==="click"||I=="keypress")try{var D=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},U=D[I]=D[I]||{refCount:0};if(!U.handler){var q=sm(d);U.handler=q,T.call(this,I,q,A)}U.refCount+=1}catch{}return T.call(this,I,C,A)}}),En(_,"removeEventListener",function(T){return function(I,C,A){if(I==="click"||I=="keypress")try{var D=this.__sentry_instrumentation_handlers__||{},U=D[I];U&&(U.refCount-=1,U.refCount<=0&&(T.call(this,I,U.handler,A),U.handler=void 0,delete D[I]),Object.keys(D).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return T.call(this,I,C,A)}}))})}})();break;case"xhr":(function(){if("XMLHttpRequest"in Sr){var d=XMLHttpRequest.prototype;En(d,"open",function(v){return function(...y){var _=this,T=y[1],I=_.__sentry_xhr__={method:vo(y[0])?y[0].toUpperCase():y[0],url:y[1]};vo(T)&&I.method==="POST"&&T.match(/sentry_key/)&&(_.__sentry_own_request__=!0);var C=function(){if(_.readyState===4){try{I.status_code=_.status}catch{}Mi("xhr",{args:y,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:_})}};return"onreadystatechange"in _&&typeof _.onreadystatechange=="function"?En(_,"onreadystatechange",function(A){return function(...D){return C(),A.apply(_,D)}}):_.addEventListener("readystatechange",C),v.apply(_,y)}}),En(d,"send",function(v){return function(...y){return this.__sentry_xhr__&&y[0]!==void 0&&(this.__sentry_xhr__.body=y[0]),Mi("xhr",{args:y,startTimestamp:Date.now(),xhr:this}),v.apply(this,y)}})}})();break;case"fetch":(function(){if(!Gl())return!1;var d=(0,jr.R)();if($l(d.fetch))return!0;let v=!1;var y=d.document;if(y&&typeof y.createElement=="function")try{var _=y.createElement("iframe");_.hidden=!0,y.head.appendChild(_),_.contentWindow&&_.contentWindow.fetch&&(v=$l(_.contentWindow.fetch)),y.head.removeChild(_)}catch(T){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",T)}return v})()&&En(Sr,"fetch",function(d){return function(...v){var y={args:v,fetchData:{method:am(v),url:z_(v)},startTimestamp:Date.now()};return Mi("fetch",{...y}),d.apply(Sr,v).then(_=>(Mi("fetch",{...y,endTimestamp:Date.now(),response:_}),_),_=>{throw Mi("fetch",{...y,endTimestamp:Date.now(),error:_}),_})}});break;case"history":(function(){if(function(){var y=(0,jr.R)(),_=y.chrome,T=_&&_.app&&_.app.runtime,I="history"in y&&!!y.history.pushState&&!!y.history.replaceState;return!T&&I}()){var d=Sr.onpopstate;Sr.onpopstate=function(...y){var _=Sr.location.href,T=Ws;if(Ws=_,Mi("history",{from:T,to:_}),d)try{return d.apply(this,y)}catch{}},En(Sr.history,"pushState",v),En(Sr.history,"replaceState",v)}function v(y){return function(..._){var T=_.length>2?_[2]:void 0;if(T){var I=Ws,C=String(T);Ws=C,Mi("history",{from:I,to:C})}return y.apply(this,_)}}})();break;case"error":lc=Sr.onerror,Sr.onerror=function(d,v,y,_,T){return Mi("error",{column:_,error:T,line:y,msg:d,url:v}),!!lc&&lc.apply(this,arguments)};break;case"unhandledrejection":ql=Sr.onunhandledrejection,Sr.onunhandledrejection=function(d){return Mi("unhandledrejection",d),!ql||ql.apply(this,arguments)};break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn("unknown instrumentation type:",c)}}(h)}function Mi(h,s){if(h&&cc[h])for(var c of cc[h]||[])try{c(s)}catch(d){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error(`Error while triggering instrumentation handler.
Type: ${h}
Name: ${Eo(c)}
Error:`,d)}}function am(h=[]){return"Request"in Sr&&aa(h[0],Request)&&h[0].method?String(h[0].method).toUpperCase():h[1]&&h[1].method?String(h[1].method).toUpperCase():"GET"}function z_(h=[]){return typeof h[0]=="string"?h[0]:"Request"in Sr&&aa(h[0],Request)?h[0].url:String(h[0])}let Ws,Vl,yh;function sm(h,s=!1){return c=>{if(c&&yh!==c&&!function(v){if(v.type!=="keypress")return!1;try{var y=v.target;if(!y||!y.tagName)return!0;if(y.tagName==="INPUT"||y.tagName==="TEXTAREA"||y.isContentEditable)return!1}catch{}return!0}(c)){var d=c.type==="keypress"?"input":c.type;(Vl===void 0||function(v,y){if(!v||v.type!==y.type)return!0;try{if(v.target!==y.target)return!0}catch{}return!1}(yh,c))&&(h({event:c,name:d,global:s}),yh=c),clearTimeout(Vl),Vl=Sr.setTimeout(()=>{Vl=void 0},1e3)}}}let lc=null,ql=null;function Qa(h,s=1/0,c=1/0){try{return _h("",h,s,c)}catch(d){return{ERROR:`**non-serializable** (${d})`}}}function um(h,s=3,c=102400){var d,v=Qa(h,s);return d=v,function(y){return~-encodeURI(y).split(/%..|./).length}(JSON.stringify(d))>c?um(h,s-1,c):v}function _h(h,s,c=1/0,d=1/0,v=function(){var y=typeof WeakSet=="function",_=y?new WeakSet:[];return[function(T){if(y)return!!_.has(T)||(_.add(T),!1);for(let I=0;I<_.length;I++)if(_[I]===T)return!0;return _.push(T),!1},function(T){if(y)_.delete(T);else for(let I=0;I<_.length;I++)if(_[I]===T){_.splice(I,1);break}}]}()){const[y,_]=v;if(s===null||["number","boolean","string"].includes(typeof s)&&(typeof(T=s)!="number"||T==T))return s;var T,I=function(z,ne){try{return z==="domain"&&ne&&typeof ne=="object"&&ne._events?"[Domain]":z==="domainEmitter"?"[DomainEmitter]":l.g!==void 0&&ne===l.g?"[Global]":typeof window<"u"&&ne===window?"[Window]":typeof document<"u"&&ne===document?"[Document]":function(he){return mo(he)&&"nativeEvent"in he&&"preventDefault"in he&&"stopPropagation"in he}(ne)?"[SyntheticEvent]":typeof ne=="number"&&ne!=ne?"[NaN]":ne===void 0?"[undefined]":typeof ne=="function"?`[Function: ${Eo(ne)}]`:typeof ne=="symbol"?`[${String(ne)}]`:typeof ne=="bigint"?`[BigInt: ${String(ne)}]`:`[object ${Object.getPrototypeOf(ne).constructor.name}]`}catch(he){return`**non-serializable** (${he})`}}(h,s);if(!I.startsWith("[object "))return I;if(s.__sentry_skip_normalization__)return s;if(c===0)return I.replace("object ","");if(y(s))return"[Circular ~]";var C=s;if(C&&typeof C.toJSON=="function")try{return _h("",C.toJSON(),c-1,d,v)}catch{}var A=Array.isArray(s)?[]:{};let D=0;var U=jl(s);for(var q in U)if(Object.prototype.hasOwnProperty.call(U,q)){if(D>=d){A[q]="[MaxProperties ~]";break}var Z=U[q];A[q]=_h(q,Z,c-1,d,v),D+=1}return _(s),A}function cm(h,s){var c=bh(h,s),d={type:s&&s.name,value:Hl(s)};return c.length&&(d.stacktrace={frames:c}),d.type===void 0&&d.value===""&&(d.value="Unrecoverable error caught"),d}function Eh(h,s){return{exception:{values:[cm(h,s)]}}}function bh(h,s){var c=s.stacktrace||s.stack||"",d=function(v){if(v){if(typeof v.framesToPop=="number")return v.framesToPop;if(lm.test(v.message))return 1}return 0}(s);try{return h(c,d)}catch{}return[]}var lm=/Minified React error #\d+;/i;function Hl(h){var s=h&&h.message;return s?s.error&&typeof s.error.message=="string"?s.error.message:s:"No error message"}function Sh(h,s,c,d,v){let y;if(Ju(s)&&s.error)return Eh(h,s.error);if(Ll(s)||Va(s,"DOMException")){var _=s;if("stack"in s)y=Eh(h,s);else{var T=_.name||(Ll(_)?"DOMError":"DOMException"),I=_.message?`${T}: ${_.message}`:T;y=wh(h,I,c,d),ic(y,I)}return"code"in _&&(y.tags={...y.tags,"DOMException.code":`${_.code}`}),y}return Zu(s)?Eh(h,s):mo(s)||Ul(s)?(y=function(C,A,D,U){var q={exception:{values:[{type:Ul(A)?A.constructor.name:U?"UnhandledRejection":"Error",value:`Non-Error ${U?"promise rejection":"exception"} captured with keys: ${ut(A)}`}]},extra:{__serialized__:um(A)}};if(D){var Z=bh(C,D);Z.length&&(q.exception.values[0].stacktrace={frames:Z})}return q}(h,s,c,v),oc(y,{synthetic:!0}),y):(y=wh(h,s,c,d),ic(y,`${s}`),oc(y,{synthetic:!0}),y)}function wh(h,s,c,d){var v={message:s};if(d&&c){var y=bh(h,c);y.length&&(v.exception={values:[{value:s,stacktrace:{frames:y}}]})}return v}function K_(h,s){return Un().captureException(h,{captureContext:s})}function Y_(h){Un().withScope(h)}let Wl=0;function Th(){return Wl>0}function Q_(){Wl+=1,setTimeout(()=>{Wl-=1})}function zs(h,s={},c){if(typeof h!="function")return h;try{var d=h.__sentry_wrapped__;if(d)return d;if(tc(h))return h}catch{return h}var v=function(){var _=Array.prototype.slice.call(arguments);try{c&&typeof c=="function"&&c.apply(this,arguments);var T=_.map(I=>zs(I,s));return h.apply(this,T)}catch(I){throw Q_(),Y_(C=>{C.addEventProcessor(A=>(s.mechanism&&(ic(A,void 0),oc(A,s.mechanism)),A.extra={...A.extra,arguments:_},A)),K_(I)}),I}};try{for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(v[y]=h[y])}catch{}Bl(v,h),Di(h,"__sentry_wrapped__",v);try{Object.getOwnPropertyDescriptor(v,"name").configurable&&Object.defineProperty(v,"name",{get:()=>h.name})}catch{}return v}class fa{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=fa.id}__init2(){this._installFunc={onerror:zl,onunhandledrejection:X_}}constructor(s){fa.prototype.__init.call(this),fa.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...s}}setupOnce(){Error.stackTraceLimit=50;var s,c=this._options;for(var d in c){var v=this._installFunc[d];v&&c[d]&&(s=d,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.log(`Global Handler attached: ${s}`),v(),this._installFunc[d]=void 0)}}}function zl(){hn("error",h=>{const[s,c,d]=Ah();if(!s.getIntegration(fa))return;const{msg:v,url:y,line:_,column:T,error:I}=h;if(!(Th()||I&&I.__sentry_own_request__)){var C=I===void 0&&vo(v)?function(A,D,U,q){let Z=Ju(A)?A.message:A,z="Error";var ne=Z.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);return ne&&(z=ne[1],Z=ne[2]),fm({exception:{values:[{type:z,value:Z}]}},D,U,q)}(v,y,_,T):fm(Sh(c,I||v,void 0,d,!1),y,_,T);C.level="error",fc(s,I,C,"onerror")}})}function X_(){hn("unhandledrejection",h=>{const[s,c,d]=Ah();if(!s.getIntegration(fa))return;let v=h;try{"reason"in h?v=h.reason:"detail"in h&&"reason"in h.detail&&(v=h.detail.reason)}catch{}if(Th()||v&&v.__sentry_own_request__)return!0;var y=ch(v)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(v)}`}]}}:Sh(c,v,void 0,d,!0);y.level="error",fc(s,v,y,"onunhandledrejection")})}function fm(h,s,c,d){var v=h.exception=h.exception||{},y=v.values=v.values||[],_=y[0]=y[0]||{},T=_.stacktrace=_.stacktrace||{},I=T.frames=T.frames||[],C=isNaN(parseInt(d,10))?void 0:d,A=isNaN(parseInt(c,10))?void 0:c,D=vo(s)&&s.length>0?s:function(){var U=(0,jr.R)();try{return U.document.location.href}catch{return""}}();return I.length===0&&I.push({colno:C,filename:D,function:"?",in_app:!0,lineno:A}),h}function fc(h,s,c,d){oc(c,{handled:!1,type:d}),h.captureEvent(c,{originalException:s})}function Ah(){var h=Un(),s=h.getClient(),c=s&&s.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[h,c.stackParser,c.attachStacktrace]}fa.__initStatic();var dm=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Xa{static __initStatic(){this.id="TryCatch"}__init(){this.name=Xa.id}constructor(s){Xa.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...s}}setupOnce(){var s=(0,jr.R)();this._options.setTimeout&&En(s,"setTimeout",Ih),this._options.setInterval&&En(s,"setInterval",Ih),this._options.requestAnimationFrame&&En(s,"requestAnimationFrame",hm),this._options.XMLHttpRequest&&"XMLHttpRequest"in s&&En(XMLHttpRequest.prototype,"send",Z_);var c=this._options.eventTarget;c&&(Array.isArray(c)?c:dm).forEach(J_)}}function Ih(h){return function(...s){var c=s[0];return s[0]=zs(c,{mechanism:{data:{function:Eo(h)},handled:!0,type:"instrument"}}),h.apply(this,s)}}function hm(h){return function(s){return h.apply(this,[zs(s,{mechanism:{data:{function:"requestAnimationFrame",handler:Eo(h)},handled:!0,type:"instrument"}})])}}function Z_(h){return function(...s){var c=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(d=>{d in c&&typeof c[d]=="function"&&En(c,d,function(v){var y={mechanism:{data:{function:d,handler:Eo(v)},handled:!0,type:"instrument"}},_=tc(v);return _&&(y.mechanism.data.handler=Eo(_)),zs(v,y)})}),h.apply(this,s)}}function J_(h){var s=(0,jr.R)(),c=s[h]&&s[h].prototype;c&&c.hasOwnProperty&&c.hasOwnProperty("addEventListener")&&(En(c,"addEventListener",function(d){return function(v,y,_){try{typeof y.handleEvent=="function"&&(y.handleEvent=zs(y.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Eo(y),target:h},handled:!0,type:"instrument"}}))}catch{}return d.apply(this,[v,zs(y,{mechanism:{data:{function:"addEventListener",handler:Eo(y),target:h},handled:!0,type:"instrument"}}),_])}}),En(c,"removeEventListener",function(d){return function(v,y,_){var T=y;try{var I=T&&T.__sentry_wrapped__;I&&d.call(this,v,I,_)}catch{}return d.call(this,v,T,_)}}))}Xa.__initStatic();var Kl=["fatal","error","warning","log","info","debug"];function Ks(h){if(!h)return{};var s=h.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!s)return{};var c=s[6]||"",d=s[8]||"";return{host:s[4],path:s[5],protocol:s[2],relative:s[5]+c+d}}var pm="Breadcrumbs";class Za{static __initStatic(){this.id=pm}__init(){this.name=Za.id}constructor(s){Za.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...s}}setupOnce(){var s;this.options.console&&hn("console",vm),this.options.dom&&hn("dom",(s=this.options.dom,function(c){let d,v=typeof s=="object"?s.serializeAttribute:void 0;typeof v=="string"&&(v=[v]);try{d=c.event.target?Fl(c.event.target,v):Fl(c.event,v)}catch{d="<unknown>"}d.length!==0&&Un().addBreadcrumb({category:`ui.${c.name}`,message:d},{event:c.event,name:c.name,global:c.global})})),this.options.xhr&&hn("xhr",eE),this.options.fetch&&hn("fetch",Li),this.options.history&&hn("history",tE)}}function vm(h){var s,c={category:"console",data:{arguments:h.args,logger:"console"},level:(s=h.level,s==="warn"?"warning":Kl.includes(s)?s:"log"),message:lh(h.args," ")};if(h.level==="assert"){if(h.args[0]!==!1)return;c.message=`Assertion failed: ${lh(h.args.slice(1)," ")||"console.assert"}`,c.data.arguments=h.args.slice(1)}Un().addBreadcrumb(c,{input:h.args,level:h.level})}function eE(h){if(h.endTimestamp){if(h.xhr.__sentry_own_request__)return;const{method:s,url:c,status_code:d,body:v}=h.xhr.__sentry_xhr__||{};Un().addBreadcrumb({category:"xhr",data:{method:s,url:c,status_code:d},type:"http"},{xhr:h.xhr,input:v})}}function Li(h){h.endTimestamp&&(h.fetchData.url.match(/sentry_key/)&&h.fetchData.method==="POST"||(h.error?Un().addBreadcrumb({category:"fetch",data:h.fetchData,level:"error",type:"http"},{data:h.error,input:h.args}):Un().addBreadcrumb({category:"fetch",data:{...h.fetchData,status_code:h.response.status},type:"http"},{input:h.args,response:h.response})))}function tE(h){var s=(0,jr.R)();let c=h.from,d=h.to;var v=Ks(s.location.href);let y=Ks(c);var _=Ks(d);y.path||(y=v),v.protocol===_.protocol&&v.host===_.host&&(d=_.relative),v.protocol===y.protocol&&v.host===y.host&&(c=y.relative),Un().addBreadcrumb({category:"navigation",data:{from:c,to:d}})}Za.__initStatic();class Ys{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Ys.id}constructor(s={}){Ys.prototype.__init.call(this),this._key=s.key||"cause",this._limit=s.limit||5}setupOnce(){var s=Un().getClient();s&&uc((c,d)=>{var v=Un().getIntegration(Ys);return v?function(y,_,T,I,C){if(!(I.exception&&I.exception.values&&C&&aa(C.originalException,Error)))return I;var A=da(y,T,C.originalException,_);return I.exception.values=[...A,...I.exception.values],I}(s.getOptions().stackParser,v._key,v._limit,c,d):c})}}function da(h,s,c,d,v=[]){if(!aa(c[d],Error)||v.length+1>=s)return v;var y=cm(h,c[d]);return da(h,s,c[d],d,[y,...v])}Ys.__initStatic();var lt=(0,jr.R)();class Qs{constructor(){Qs.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Qs.id}setupOnce(){uc(s=>{if(Un().getIntegration(Qs)){if(!lt.navigator&&!lt.location&&!lt.document)return s;var c=s.request&&s.request.url||lt.location&&lt.location.href;const{referrer:v}=lt.document||{},{userAgent:y}=lt.navigator||{};var d={...c&&{url:c},headers:{...s.request&&s.request.headers,...v&&{Referer:v},...y&&{"User-Agent":y}}};return{...s,request:d}}return s})}}Qs.__initStatic();class rn{constructor(){rn.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=rn.id}setupOnce(s,c){var d=v=>{var y=c().getIntegration(rn);if(y){try{if(function(_,T){return!!T&&(!!function(I,C){var A=I.message,D=C.message;return!(!A&&!D)&&!(A&&!D||!A&&D)&&A===D&&!!bo(I,C)&&!!Nr(I,C)}(_,T)||!!function(I,C){var A=mm(C),D=mm(I);return!(!A||!D)&&A.type===D.type&&A.value===D.value&&!!bo(I,C)&&!!Nr(I,C)}(_,T))}(v,y._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return y._previousEvent=v}return y._previousEvent=v}return v};d.id=this.name,s(d)}}function Nr(h,s){let c=Yl(h),d=Yl(s);if(!c&&!d)return!0;if(c&&!d||!c&&d||(c=c,d=d,d.length!==c.length))return!1;for(let _=0;_<d.length;_++){var v=d[_],y=c[_];if(v.filename!==y.filename||v.lineno!==y.lineno||v.colno!==y.colno||v.function!==y.function)return!1}return!0}function bo(h,s){let c=h.fingerprint,d=s.fingerprint;if(!c&&!d)return!0;if(c&&!d||!c&&d)return!1;c=c,d=d;try{return c.join("")===d.join("")}catch{return!1}}function mm(h){return h.exception&&h.exception.values&&h.exception.values[0]}function Yl(h){var s=h.exception;if(s)try{return s.values[0].stacktrace.frames}catch{return}}rn.__initStatic();let Yi={};var Ql=(0,jr.R)();Ql.Sentry&&Ql.Sentry.Integrations&&(Yi=Ql.Sentry.Integrations);var Qi={...Yi,...p,...u},fr="?";function wr(h,s,c,d){var v={filename:h,function:s,in_app:!0};return c!==void 0&&(v.lineno=c),d!==void 0&&(v.colno=d),v}var gm=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ym=/\((\S*)(?::(\d+))(?::(\d+))\)/,dc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Oh=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,_m=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Xl=function(...h){var s=h.sort((c,d)=>c[0]-d[0]).map(c=>c[1]);return(c,d=0)=>{var v=[];for(var y of c.split(`
`).slice(d)){var _=y.replace(/\(error: (.*)\)/,"$1");for(var T of s){var I=T(_);if(I){v.push(I);break}}}return function(C){if(!C.length)return[];let A=C;var D=A[0].function||"",U=A[A.length-1].function||"";return D.indexOf("captureMessage")===-1&&D.indexOf("captureException")===-1||(A=A.slice(1)),U.indexOf("sentryWrapped")!==-1&&(A=A.slice(0,-1)),A.slice(0,50).map(q=>({...q,filename:q.filename||A[0].filename,function:q.function||"?"})).reverse()}(v)}}([30,h=>{var s=gm.exec(h);if(s){if(s[2]&&s[2].indexOf("eval")===0){var c=ym.exec(s[2]);c&&(s[2]=c[1],s[3]=c[2],s[4]=c[3])}const[d,v]=Kn(s[1]||fr,s[2]);return wr(v,d,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,h=>{var s=dc.exec(h);if(s){if(s[3]&&s[3].indexOf(" > eval")>-1){var c=Oh.exec(s[3]);c&&(s[1]=s[1]||"eval",s[3]=c[1],s[4]=c[2],s[5]="")}let d=s[3],v=s[1]||fr;return[v,d]=Kn(v,d),wr(d,v,s[4]?+s[4]:void 0,s[5]?+s[5]:void 0)}}],[40,h=>{var s=_m.exec(h);return s?wr(s[2],s[1]||fr,+s[3],s[4]?+s[4]:void 0):void 0}]),Kn=(h,s)=>{var c=h.indexOf("safari-extension")!==-1,d=h.indexOf("safari-web-extension")!==-1;return c||d?[h.indexOf("@")!==-1?h.split("@")[0]:fr,c?`safari-extension:${s}`:`safari-web-extension:${s}`]:[h,s]};class Gr extends Error{constructor(s,c="warn"){super(s),this.message=s,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=c}}function Zl(h,s=[]){return[h,s]}function rE(h,s){const[c,d]=h;return[c,[...d,s]]}function Rh(h,s){h[1].forEach(c=>{var d=c[0].type;s(c,d)})}function Ui(h,s){return(s||new TextEncoder).encode(h)}function St(h,s){const[c,d]=h;let v=JSON.stringify(c);function y(T){typeof v=="string"?v=typeof T=="string"?v+T:[Ui(v,s),T]:v.push(typeof T=="string"?Ui(T,s):T)}for(var _ of d){const[T,I]=_;y(`
${JSON.stringify(T)}
`),y(typeof I=="string"||I instanceof Uint8Array?I:JSON.stringify(I))}return typeof v=="string"?v:function(T){var I=T.reduce((U,q)=>U+q.length,0),C=new Uint8Array(I);let A=0;for(var D of T)C.set(D,A),A+=D.length;return C}(v)}function Em(h,s){var c=typeof h.data=="string"?Ui(h.data,s):h.data;return[Vs({type:"attachment",length:c.length,filename:h.filename,content_type:h.contentType,attachment_type:h.attachmentType}),c]}var yi={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default"};function Ch(h){return yi[h]}function Xt(h,s,c=function(d){var v=[];function y(_){return v.splice(v.indexOf(_),1)[0]}return{$:v,add:function(_){if(!(d===void 0||v.length<d))return za(new Gr("Not adding Promise due to buffer limit reached."));var T=_();return v.indexOf(T)===-1&&v.push(T),T.then(()=>y(T)).then(null,()=>y(T).then(null,()=>{})),T},drain:function(_){return new bn((T,I)=>{let C=v.length;if(!C)return T(!0);var A=setTimeout(()=>{_&&_>0&&T(!1)},_);v.forEach(D=>{ua(D).then(()=>{--C||(clearTimeout(A),T(!0))},I)})})}}}(h.bufferSize||30)){let d={};return{send:function(v){var y=[];if(Rh(v,(I,C)=>{var A=Ch(C);(function(D,U,q=Date.now()){return function(Z,z){return Z[z]||Z.all||0}(D,U)>q})(d,A)?h.recordDroppedEvent("ratelimit_backoff",A):y.push(I)}),y.length===0)return ua();var _=Zl(v[0],y),T=I=>{Rh(_,(C,A)=>{h.recordDroppedEvent(I,Ch(A))})};return c.add(()=>s({body:St(_,h.textEncoder)}).then(I=>{I.statusCode!==void 0&&(I.statusCode<200||I.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn(`Sentry responded with status code ${I.statusCode} to sent event.`),d=function(C,{statusCode:A,headers:D},U=Date.now()){var q={...C},Z=D&&D["x-sentry-rate-limits"],z=D&&D["retry-after"];if(Z)for(var ne of Z.trim().split(",")){const[at,Re]=ne.split(":",2);var he=parseInt(at,10),Le=1e3*(isNaN(he)?60:he);if(Re)for(var Xe of Re.split(";"))q[Xe]=U+Le;else q.all=U+Le}else z?q.all=U+function(at,Re=Date.now()){var Ge=parseInt(`${at}`,10);if(!isNaN(Ge))return 1e3*Ge;var Nt=Date.parse(`${at}`);return isNaN(Nt)?6e4:Nt-Re}(z,U):A===429&&(q.all=U+6e4);return q}(d,I)},I=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error("Failed while sending event:",I),T("network_error")})).then(I=>I,I=>{if(I instanceof Gr)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error("Skipped sending event due to full buffer"),T("queue_overflow"),ua();throw I})},flush:v=>c.drain(v)}}var Fi=(0,jr.R)();let hc;function pc(){if(hc)return hc;if($l(Fi.fetch))return hc=Fi.fetch.bind(Fi);var h=Fi.document;let s=Fi.fetch;if(h&&typeof h.createElement=="function")try{var c=h.createElement("iframe");c.hidden=!0,h.head.appendChild(c);var d=c.contentWindow;d&&d.fetch&&(s=d.fetch),h.head.removeChild(c)}catch(v){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",v)}return hc=s.bind(Fi)}function nE(h,s=pc()){return Xt(h,function(c){var d={body:c.body,method:"POST",referrerPolicy:"origin",headers:h.headers,...h.fetchOptions};return s(h.url,d).then(v=>({statusCode:v.status,headers:{"x-sentry-rate-limits":v.headers.get("X-Sentry-Rate-Limits"),"retry-after":v.headers.get("Retry-After")}}))})}function iE(h){return Xt(h,function(s){return new bn((c,d)=>{var v=new XMLHttpRequest;for(var y in v.onerror=d,v.onreadystatechange=()=>{v.readyState===4&&c({statusCode:v.status,headers:{"x-sentry-rate-limits":v.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":v.getResponseHeader("Retry-After")}})},v.open("POST",h.url),h.headers)Object.prototype.hasOwnProperty.call(h.headers,y)&&v.setRequestHeader(y,h.headers[y]);v.send(s.body)})})}var oE=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Ph(h,s=!1){const{host:c,path:d,pass:v,port:y,projectId:_,protocol:T,publicKey:I}=h;return`${T}://${I}${s&&v?`:${v}`:""}@${c}${y?`:${y}`:""}/${d&&`${d}/`}${_}`}function Jl(h){return{protocol:h.protocol,publicKey:h.publicKey||"",pass:h.pass||"",host:h.host,port:h.port||"",path:h.path||"",projectId:h.projectId}}function ef(h,s={}){var c=typeof s=="string"?s:s.tunnel,d=typeof s!="string"&&s._metadata?s._metadata.sdk:void 0;return c||`${function(v){return`${function(y){var _=y.protocol?`${y.protocol}:`:"",T=y.port?`:${y.port}`:"";return`${_}//${y.host}${T}${y.path?`/${y.path}`:""}/api/`}(v)}${v.projectId}/envelope/`}(h)}?${function(v,y){return _={sentry_key:v.publicKey,sentry_version:"7",...y&&{sentry_client:`${y.name}/${y.version}`}},Object.keys(_).map(T=>`${encodeURIComponent(T)}=${encodeURIComponent(_[T])}`).join("&");var _}(h,d)}`}function bm(h){if(!h||!h.sdk)return;const{name:s,version:c}=h.sdk;return{name:s,version:c}}var Sm=[],wm="Not capturing exception because it's already been captured.";class Cr{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(s){if(Cr.prototype.__init.call(this),Cr.prototype.__init2.call(this),Cr.prototype.__init3.call(this),Cr.prototype.__init4.call(this),this._options=s,s.dsn){this._dsn=(d=s.dsn,v=typeof d=="string"?function(y){var _=oE.exec(y);if(!_)throw new Gr(`Invalid Sentry Dsn: ${y}`);const[T,I,C="",A,D="",U]=_.slice(1);let q="",Z=U;var z=Z.split("/");if(z.length>1&&(q=z.slice(0,-1).join("/"),Z=z.pop()),Z){var ne=Z.match(/^\d+/);ne&&(Z=ne[0])}return Jl({host:A,pass:C,path:q,projectId:Z,port:D,protocol:T,publicKey:I})}(d):Jl(d),function(y){if(typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__)return;const{port:_,projectId:T,protocol:I}=y;if(["protocol","publicKey","host","projectId"].forEach(C=>{if(!y[C])throw new Gr(`Invalid Sentry Dsn: ${C} missing`)}),!T.match(/^\d+$/))throw new Gr(`Invalid Sentry Dsn: Invalid projectId ${T}`);if(!function(C){return C==="http"||C==="https"}(I))throw new Gr(`Invalid Sentry Dsn: Invalid protocol ${I}`);if(_&&isNaN(parseInt(_,10)))throw new Gr(`Invalid Sentry Dsn: Invalid port ${_}`)}(v),v);var c=ef(this._dsn,s);this._transport=s.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...s.transportOptions,url:c})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn("No DSN provided, client will not do anything.");var d,v}captureException(s,c,d){if(qs(s))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.log(wm));let v=c&&c.event_id;return this._process(this.eventFromException(s,c).then(y=>this._captureEvent(y,c,d)).then(y=>{v=y})),v}captureMessage(s,c,d,v){let y=d&&d.event_id;var _=ch(s)?this.eventFromMessage(String(s),c,d):this.eventFromException(s,d);return this._process(_.then(T=>this._captureEvent(T,d,v)).then(T=>{y=T})),y}captureEvent(s,c,d){if(c&&c.originalException&&qs(c.originalException))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.log(wm));let v=c&&c.event_id;return this._process(this._captureEvent(s,c,d).then(y=>{v=y})),v}captureSession(s){this._isEnabled()?typeof s.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn("Discarded session because of missing or non-string release"):(this.sendSession(s),Ka(s,{init:!1})):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(s){var c=this._transport;return c?this._isClientDoneProcessing(s).then(d=>c.flush(s).then(v=>d&&v)):ua(!0)}close(s){return this.flush(s).then(c=>(this.getOptions().enabled=!1,c))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(s){var c={};return s.forEach(d=>{c[d.name]=d,Sm.indexOf(d.name)===-1&&(d.setupOnce(uc,Un),Sm.push(d.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.log(`Integration installed: ${d.name}`))}),c}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(s){return this._integrations[s]}getIntegration(s){try{return this._integrations[s.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.warn(`Cannot retrieve integration ${s.id} from the current Client`),null}}sendEvent(s,c={}){if(this._dsn){let v=function(y,_,T,I){var C=bm(T),A=y.type||"event";const{transactionSampling:D}=y.sdkProcessingMetadata||{},{method:U,rate:q}=D||{};(function(z,ne){ne&&(z.sdk=z.sdk||{},z.sdk.name=z.sdk.name||ne.name,z.sdk.version=z.sdk.version||ne.version,z.sdk.integrations=[...z.sdk.integrations||[],...ne.integrations||[]],z.sdk.packages=[...z.sdk.packages||[],...ne.packages||[]])})(y,T&&T.sdk);var Z=function(z,ne,he,Le){var Xe=z.sdkProcessingMetadata&&z.sdkProcessingMetadata.baggage,at=Xe&&function(Re){return Re[0]}(Xe);return{event_id:z.event_id,sent_at:new Date().toISOString(),...ne&&{sdk:ne},...!!he&&{dsn:Ph(Le)},...z.type==="transaction"&&at&&{trace:Vs({...at})}}}(y,C,I,_);return delete y.sdkProcessingMetadata,Zl(Z,[[{type:A,sample_rates:[{id:U,rate:q}]},y]])}(s,this._dsn,this._options._metadata,this._options.tunnel);for(var d of c.attachments||[])v=rE(v,Em(d,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(v)}}sendSession(s){if(this._dsn){var c=function(d,v,y,_){var T=bm(y);return Zl({sent_at:new Date().toISOString(),...T&&{sdk:T},...!!_&&{dsn:Ph(v)}},["aggregates"in d?[{type:"sessions"},d]:[{type:"session"},d]])}(s,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(c)}}recordDroppedEvent(s,c){if(this._options.sendClientReports){var d=`${s}:${c}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.log(`Adding outcome: "${d}"`),this._outcomes[d]=this._outcomes[d]+1||1}}_updateSessionFromEvent(s,c){let d=!1,v=!1;var y=c.exception&&c.exception.values;if(y)for(var _ of(v=!0,y)){var T=_.mechanism;if(T&&T.handled===!1){d=!0;break}}var I=s.status==="ok";(I&&s.errors===0||I&&d)&&(Ka(s,{...d&&{status:"crashed"},errors:s.errors||Number(v||d)}),this.captureSession(s))}_isClientDoneProcessing(s){return new bn(c=>{let d=0;var v=setInterval(()=>{this._numProcessing==0?(clearInterval(v),c(!0)):(d+=1,s&&d>=s&&(clearInterval(v),c(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(s,c,d){const{normalizeDepth:v=3,normalizeMaxBreadth:y=1e3}=this.getOptions();var _={...s,event_id:s.event_id||c.event_id||zn(),timestamp:s.timestamp||(0,Hs.yW)()};this._applyClientOptions(_),this._applyIntegrationsMetadata(_);let T=d;c.captureContext&&(T=_o.clone(T).update(c.captureContext));let I=ua(_);if(T){var C=[...c.attachments||[],...T.getAttachments()];C.length&&(c.attachments=C),I=T.applyToEvent(_,c)}return I.then(A=>typeof v=="number"&&v>0?this._normalizeEvent(A,v,y):A)}_normalizeEvent(s,c,d){if(!s)return null;var v={...s,...s.breadcrumbs&&{breadcrumbs:s.breadcrumbs.map(y=>({...y,...y.data&&{data:Qa(y.data,c,d)}}))},...s.user&&{user:Qa(s.user,c,d)},...s.contexts&&{contexts:Qa(s.contexts,c,d)},...s.extra&&{extra:Qa(s.extra,c,d)}};return s.contexts&&s.contexts.trace&&v.contexts&&(v.contexts.trace=s.contexts.trace,s.contexts.trace.data&&(v.contexts.trace.data=Qa(s.contexts.trace.data,c,d))),s.spans&&(v.spans=s.spans.map(y=>(y.data&&(y.data=Qa(y.data,c,d)),y))),v}_applyClientOptions(s){var c=this.getOptions();const{environment:d,release:v,dist:y,maxValueLength:_=250}=c;"environment"in s||(s.environment="environment"in c?d:"production"),s.release===void 0&&v!==void 0&&(s.release=v),s.dist===void 0&&y!==void 0&&(s.dist=y),s.message&&(s.message=$s(s.message,_));var T=s.exception&&s.exception.values&&s.exception.values[0];T&&T.value&&(T.value=$s(T.value,_));var I=s.request;I&&I.url&&(I.url=$s(I.url,_))}_applyIntegrationsMetadata(s){var c=Object.keys(this._integrations);c.length>0&&(s.sdk=s.sdk||{},s.sdk.integrations=[...s.sdk.integrations||[],...c])}_captureEvent(s,c={},d){return this._processEvent(s,c,d).then(v=>v.event_id,v=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){var y=v;y.logLevel==="log"?Ut.log(y.message):Ut.warn(y)}})}_processEvent(s,c,d){const{beforeSend:v,sampleRate:y}=this.getOptions();if(!this._isEnabled())return za(new Gr("SDK not enabled, will not capture event.","log"));var _=s.type==="transaction";return!_&&typeof y=="number"&&Math.random()>y?(this.recordDroppedEvent("sample_rate","error"),za(new Gr(`Discarding event because it's not included in the random sample (sampling rate = ${y})`,"log"))):this._prepareEvent(s,c,d).then(T=>{if(T===null)throw this.recordDroppedEvent("event_processor",s.type||"error"),new Gr("An event processor returned null, will not send event.","log");return c.data&&c.data.__sentry__===!0||_||!v?T:function(I){var C="`beforeSend` method has to return `null` or a valid event.";if(ec(I))return I.then(A=>{if(!mo(A)&&A!==null)throw new Gr(C);return A},A=>{throw new Gr(`beforeSend rejected with ${A}`)});if(!mo(I)&&I!==null)throw new Gr(C);return I}(v(T,c))}).then(T=>{if(T===null)throw this.recordDroppedEvent("before_send",s.type||"error"),new Gr("`beforeSend` returned `null`, will not send event.","log");var I=d&&d.getSession();return!_&&I&&this._updateSessionFromEvent(I,T),this.sendEvent(T,c),T}).then(null,T=>{throw T instanceof Gr?T:(this.captureException(T,{data:{__sentry__:!0},originalException:T}),new Gr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${T}`))})}_process(s){this._numProcessing+=1,s.then(c=>(this._numProcessing-=1,c),c=>(this._numProcessing-=1,c))}_sendEnvelope(s){this._transport&&this._dsn?this._transport.send(s).then(null,c=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error("Error while sending event:",c)}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error("Transport disabled")}_clearOutcomes(){var s=this._outcomes;return this._outcomes={},Object.keys(s).map(c=>{const[d,v]=c.split(":");return{reason:d,category:v,quantity:s[c]}})}}var Fn="7.11.1",xh=(0,jr.R)();class Tm extends Cr{constructor(s){s._metadata=s._metadata||{},s._metadata.sdk=s._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:Fn}],version:Fn},super(s),s.sendClientReports&&xh.document&&xh.document.addEventListener("visibilitychange",()=>{xh.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(s,c){return function(d,v,y,_){var T=Sh(d,v,y&&y.syntheticException||void 0,_);return oc(T),T.level="error",y&&y.event_id&&(T.event_id=y.event_id),ua(T)}(this._options.stackParser,s,c,this._options.attachStacktrace)}eventFromMessage(s,c="info",d){return function(v,y,_="info",T,I){var C=wh(v,y,T&&T.syntheticException||void 0,I);return C.level=_,T&&T.event_id&&(C.event_id=T.event_id),ua(C)}(this._options.stackParser,s,c,d,this._options.attachStacktrace)}sendEvent(s,c){var d=this.getIntegrationById(pm);d&&d.options&&d.options.sentry&&Un().addBreadcrumb({category:"sentry."+(s.type==="transaction"?"transaction":"event"),event_id:s.event_id,level:s.level,message:yo(s)},{event:s}),super.sendEvent(s,c)}_prepareEvent(s,c,d){return s.platform=s.platform||"javascript",super._prepareEvent(s,c,d)}_flushOutcomes(){var s=this._clearOutcomes();if(s.length!==0)if(this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.log("Sending outcomes:",s);var c,d,v=ef(this._dsn,this._options),y=(c=s,Zl((d=this._options.tunnel&&Ph(this._dsn))?{dsn:d}:{},[[{type:"client_report"},{timestamp:(0,Hs.yW)(),discarded_events:c}]]));try{(function(_,T){Object.prototype.toString.call(Fi&&Fi.navigator)==="[object Navigator]"&&typeof Fi.navigator.sendBeacon=="function"?Fi.navigator.sendBeacon.bind(Fi.navigator)(_,T):Gl()&&pc()(_,{body:T,method:"POST",credentials:"omit",keepalive:!0}).then(null,I=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error(I)})})(v,St(y))}catch(_){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.error(_)}}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.log("No dsn provided, will not send outcomes");else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ut.log("No outcomes to send")}}var aE=l(4147),sE=[new Qi.InboundFilters,new Qi.FunctionToString,new Qi.TryCatch,new Qi.Breadcrumbs,new Qi.LinkedErrors,new Qi.Dedupe,new Qi.HttpContext],vc=new Ya,tf=function(){return tf=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},tf.apply(this,arguments)},Ja=function(){return Ja=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},Ja.apply(this,arguments)};function kr(h,s){return c=this,d=void 0,y=function(){return function(_,T){var I,C,A,D,U={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return D={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function q(Z){return function(z){return function(ne){if(I)throw new TypeError("Generator is already executing.");for(;U;)try{if(I=1,C&&(A=2&ne[0]?C.return:ne[0]?C.throw||((A=C.return)&&A.call(C),0):C.next)&&!(A=A.call(C,ne[1])).done)return A;switch(C=0,A&&(ne=[2&ne[0],A.value]),ne[0]){case 0:case 1:A=ne;break;case 4:return U.label++,{value:ne[1],done:!1};case 5:U.label++,C=ne[1],ne=[0];continue;case 7:ne=U.ops.pop(),U.trys.pop();continue;default:if(!((A=(A=U.trys).length>0&&A[A.length-1])||ne[0]!==6&&ne[0]!==2)){U=0;continue}if(ne[0]===3&&(!A||ne[1]>A[0]&&ne[1]<A[3])){U.label=ne[1];break}if(ne[0]===6&&U.label<A[1]){U.label=A[1],A=ne;break}if(A&&U.label<A[2]){U.label=A[2],U.ops.push(ne);break}A[2]&&U.ops.pop(),U.trys.pop();continue}ne=T.call(_,U)}catch(he){ne=[6,he],C=0}finally{I=A=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([Z,z])}}}(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,h()];case 1:return[2,_.sent()];case 2:return[2,kh(_.sent(),s)];case 3:return[2]}})},new((v=void 0)||(v=Promise))(function(_,T){function I(D){try{A(y.next(D))}catch(U){T(U)}}function C(D){try{A(y.throw(D))}catch(U){T(U)}}function A(D){var U;D.done?_(D.value):(U=D.value,U instanceof v?U:new v(function(q){q(U)})).then(I,C)}A((y=y.apply(c,d||[])).next())});var c,d,v,y}function Nh(h,s){try{return h()}catch(c){return kh(c,s)}}function kh(h,s){var c=s.loggerService,d=s.sdkConfiguration,v=s.errorMessage,y=s.rethrowError,_=s.errorReportMetadata,T=v?v(h):"Operation failed. Error: ".concat(h.message);if(c.error(T,h),function(I,C){var A=C.sdkConfiguration,D=C.errorMessage,U=C.errorReportMetadata;vc.withScope(function(q){var Z={errorMessage:D};if(A){var z=A.customerId,ne=Ja(Ja({},A),{apiKey:void 0});z&&q.setTags({customerId:z}),Z.sdkConfiguration=ne}U&&(Z=Ja(Ja({},Z),U)),q.setExtras(Z),vc.captureException(I)})}(h,{sdkConfiguration:d,errorMessage:T,errorReportMetadata:_}),y)throw new Error(T)}var Xi=function(){return Xi=Object.assign||function(h){for(var s,c=1,d=arguments.length;c<d;c++)for(var v in s=arguments[c])Object.prototype.hasOwnProperty.call(s,v)&&(h[v]=s[v]);return h},Xi.apply(this,arguments)},Ft=function(h,s,c,d){return new(c||(c=Promise))(function(v,y){function _(C){try{I(d.next(C))}catch(A){y(A)}}function T(C){try{I(d.throw(C))}catch(A){y(A)}}function I(C){var A;C.done?v(C.value):(A=C.value,A instanceof c?A:new c(function(D){D(A)})).then(_,T)}I((d=d.apply(h,[])).next())})},Bt=function(h,s){var c,d,v,y,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(I){return function(C){return function(A){if(c)throw new TypeError("Generator is already executing.");for(;_;)try{if(c=1,d&&(v=2&A[0]?d.return:A[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,A[1])).done)return v;switch(d=0,v&&(A=[2&A[0],v.value]),A[0]){case 0:case 1:v=A;break;case 4:return _.label++,{value:A[1],done:!1};case 5:_.label++,d=A[1],A=[0];continue;case 7:A=_.ops.pop(),_.trys.pop();continue;default:if(!((v=(v=_.trys).length>0&&v[v.length-1])||A[0]!==6&&A[0]!==2)){_=0;continue}if(A[0]===3&&(!v||A[1]>v[0]&&A[1]<v[3])){_.label=A[1];break}if(A[0]===6&&_.label<v[1]){_.label=v[1],v=A;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(A);break}v[2]&&_.ops.pop(),_.trys.pop();continue}A=s.call(h,_)}catch(D){A=[6,D],d=0}finally{c=v=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([I,C])}}},uE=function(){function h(s,c){this.modelMapper=new sh,this.eventEmitter=new tm,this.showWidgetsWatermark=!1,this.configuration=s,this.edgeApiClient=ze.create(s,s),this.graphClient=function(d){var v=d.apiKey,y=d.baseUri,_=d.clientName,T=_===void 0?pr:_,I=d.clientVersion,C=I===void 0?Nl.version:I,A=nh(v,d),D=function(q){return new qn({uri:"".concat(q,"/graphql"),fetch:ue})}(y),U=new ea({attempts:{max:5,retryIf:kl},delay:{initial:500,max:2e3,jitter:!0}});return new js({link:A.concat(U.concat(D)),cache:new zv({possibleTypes:Yu.g}),name:T,version:C})}(this.configuration),this.batchedGraphClient=function(d){var v=d.apiKey,y=d.baseUri,_=d.clientName,T=_===void 0?pr:_,I=d.clientVersion,C=I===void 0?Nl.version:I,A=nh(v,d),D=function(U){return new Yv({uri:"".concat(U,"/graphql"),batchMax:25,batchInterval:500,fetch:ue})}(y);return new js({link:A.concat(D),cache:new zv({possibleTypes:Yu.g}),name:T,version:C})}(this.configuration),this.loggerService=c,this.apiGateway=new Ir(this.graphClient,this.edgeApiClient),this.globalEntitlementsService=null,this.resourceEntitlementsService=null,this.initializationStateTracker=new Xu(this.eventEmitter)}return h.initialize=function(s){var c=function(y){var _={baseUri:"https://api.stigg.io",baseEdgeUri:xr("https://api.stigg.io"),logConfiguration:{logger:console,logLevel:m.ERROR},enableEdge:!0,cacheTtlMs:3e4},T=y.baseEdgeUri?y.baseEdgeUri:y.baseUri?xr(y.baseUri):_.baseEdgeUri,I=y.cacheTtlMs||y.entitlementPollingInterval;return Or()(_,y,{baseEdgeUri:T,cacheTtlMs:I})}(s),d=new R(c.logConfiguration.logger,c.logConfiguration.logLevel);(function(y,_){if(Mt()(y.apiKey)){var T="You must configure the client with an SDK key";throw _.error(T),new Error(T)}})(c,d);var v=new h(c,d);return this.initializeSdk(v).then(function(){c.customerId?c.lazyLoad||v.setCustomerId(c.customerId,c.customerToken,c.resourceId):v.initializationStateTracker.signalSuccessInit()}).catch(function(y){return v.initializationStateTracker.signalFailedInit(y)}),v},h.prototype.waitForInitialization=function(){return Ft(this,void 0,void 0,function(){var s=this;return Bt(this,function(c){return[2,this.initializationStateTracker.getInitializationPromise().then(function(){return s})]})})},h.initializeSdk=function(s){var c,d,v,y;return Ft(this,void 0,void 0,function(){var _,T,I,C;return Bt(this,function(A){switch(A.label){case 0:return A.trys.push([0,2,,3]),[4,s.apiGateway.sdkConfiguration.getSdkConfiguration()];case 1:return _=A.sent(),T=(c=_.data)===null||c===void 0?void 0:c.sdkConfiguration,!vc.getClient()&&(T!=null&&T.sentryDsn)&&(z=T.sentryDsn,D=void 0,U=void 0,Z=function(){var ne,he;return function(Le,Xe){var at,Re,Ge,Nt,Je={label:0,sent:function(){if(1&Ge[0])throw Ge[1];return Ge[1]},trys:[],ops:[]};return Nt={next:xt(0),throw:xt(1),return:xt(2)},typeof Symbol=="function"&&(Nt[Symbol.iterator]=function(){return this}),Nt;function xt(tr){return function(nn){return function(Ot){if(at)throw new TypeError("Generator is already executing.");for(;Je;)try{if(at=1,Re&&(Ge=2&Ot[0]?Re.return:Ot[0]?Re.throw||((Ge=Re.return)&&Ge.call(Re),0):Re.next)&&!(Ge=Ge.call(Re,Ot[1])).done)return Ge;switch(Re=0,Ge&&(Ot=[2&Ot[0],Ge.value]),Ot[0]){case 0:case 1:Ge=Ot;break;case 4:return Je.label++,{value:Ot[1],done:!1};case 5:Je.label++,Re=Ot[1],Ot=[0];continue;case 7:Ot=Je.ops.pop(),Je.trys.pop();continue;default:if(!((Ge=(Ge=Je.trys).length>0&&Ge[Ge.length-1])||Ot[0]!==6&&Ot[0]!==2)){Je=0;continue}if(Ot[0]===3&&(!Ge||Ot[1]>Ge[0]&&Ot[1]<Ge[3])){Je.label=Ot[1];break}if(Ot[0]===6&&Je.label<Ge[1]){Je.label=Ge[1],Ge=Ot;break}if(Ge&&Je.label<Ge[2]){Je.label=Ge[2],Je.ops.push(Ot);break}Ge[2]&&Je.ops.pop(),Je.trys.pop();continue}Ot=Xe.call(Le,Je)}catch(_i){Ot=[6,_i],Re=0}finally{at=Ge=0}if(5&Ot[0])throw Ot[1];return{value:Ot[0]?Ot[1]:void 0,done:!0}}([tr,nn])}}}(this,function(Le){return ne={dsn:z,normalizeDepth:6,release:"".concat(pr,"@").concat(aE.version),integrations:sE,stackParser:Xl,transport:Gl()?nE:iE},he=new Tm(ne),vc.bindClient(he),[2]})},new((q=void 0)||(q=Promise))(function(ne,he){function Le(Re){try{at(Z.next(Re))}catch(Ge){he(Ge)}}function Xe(Re){try{at(Z.throw(Re))}catch(Ge){he(Ge)}}function at(Re){var Ge;Re.done?ne(Re.value):(Ge=Re.value,Ge instanceof q?Ge:new q(function(Nt){Nt(Ge)})).then(Le,Xe)}at((Z=Z.apply(D,U||[])).next())})),s.showWidgetsWatermark=!!(T!=null&&T.isWidgetWatermarkEnabled),[3,3];case 2:throw I=A.sent(),((d=I.response)===null||d===void 0?void 0:d.status)===401||I.graphQLErrors&&((y=(v=I.graphQLErrors[0])===null||v===void 0?void 0:v.extensions)===null||y===void 0?void 0:y.code)===S.jKp.Unauthenticated?(C="Authentication failed. Double check your SDK key.",s.loggerService.error(C),new Error(C)):(s.loggerService.error("Failed to load sdk configuration",I),I);case 3:return[2]}var D,U,q,Z,z})})},Object.defineProperty(h.prototype,"isCustomerLoaded",{get:function(){var s;return((s=this.globalEntitlementsService)===null||s===void 0?void 0:s.isInitialized)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"isResourceLoaded",{get:function(){var s;return((s=this.resourceEntitlementsService)===null||s===void 0?void 0:s.isInitialized)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"isWidgetWatermarkEnabled",{get:function(){return this.showWidgetsWatermark},enumerable:!1,configurable:!0}),h.prototype.addListener=function(s,c){this.eventEmitter.on(s,c)},h.prototype.removeListener=function(s,c){this.eventEmitter.off(s,c)},h.prototype.setCustomerId=function(s,c,d){return c===void 0&&(c=null),d===void 0&&(d=null),Ft(this,void 0,void 0,function(){var v,y,_,T,I,C=this;return Bt(this,function(A){switch(A.label){case 0:if(v=this.configuration,y=v.customerToken,_=v.customerId,T=v.resourceId,s===_&&c===y&&d===T)return[2];if(this.clearCustomer(),!s)return this.loggerService.log("`setCustomerId` was called without a customerId, did you mean to call `clearCustomer`?"),[2];if(!(0,G.isString)(s))throw new Error("customerId parameter must be a string");if(c&&!(0,G.isString)(c))throw new Error("customerToken parameter must be a string");if(d&&!(0,G.isString)(d))throw new Error("resourceId parameter must be a string");this.configuration.customerId=s,this.configuration.customerToken=c,this.configuration.resourceId=d,this.globalEntitlementsService=new ia(s,void 0,new oa(this.configuration.cacheTtlMs),this.graphClient,this.batchedGraphClient,this.edgeApiClient,this.loggerService,function(D){return C.eventEmitter.emit("entitlementsUpdated",D)}),d&&(this.resourceEntitlementsService=new ia(s,d,new oa(this.configuration.cacheTtlMs),this.graphClient,this.batchedGraphClient,this.edgeApiClient,this.loggerService,function(D){return C.eventEmitter.emit("entitlementsUpdated",D)})),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,kr(function(){return Ft(C,void 0,void 0,function(){var D,U;return Bt(this,function(q){switch(q.label){case 0:return[4,Promise.all([(D=this.globalEntitlementsService)===null||D===void 0?void 0:D.loadEntitlements(),(U=this.resourceEntitlementsService)===null||U===void 0?void 0:U.loadEntitlements()])];case 1:return q.sent(),[2]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(D){return"Failed to load initial entitlements for customer. Error: ".concat(D.message)},rethrowError:!0})];case 2:return A.sent(),this.initializationStateTracker.signalSuccessInit(),[3,4];case 3:return I=A.sent(),this.initializationStateTracker.signalFailedInit(I),[3,4];case 4:return[2]}})})},h.prototype.clearCustomer=function(){this.globalEntitlementsService=null,this.resourceEntitlementsService=null,this.configuration.customerId=null,this.configuration.customerToken=null,this.configuration.resourceId=null},h.prototype.setResource=function(s){return Ft(this,void 0,void 0,function(){var c,d,v=this;return Bt(this,function(y){switch(y.label){case 0:if(!this.configuration.customerId)throw new Error("`setResource` must be called when customer was set, did you forget to call `setCustomerId`?");if(c=this.configuration.resourceId,s===c)return[2];if(this.clearResource(),!(0,G.isString)(s))throw new Error("resourceId parameter must be a string");this.configuration.resourceId=s,this.resourceEntitlementsService=new ia(this.configuration.customerId,s,new oa(this.configuration.cacheTtlMs),this.graphClient,this.batchedGraphClient,this.edgeApiClient,this.loggerService,function(_){return v.eventEmitter.emit("entitlementsUpdated",_)}),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,kr(function(){return Ft(v,void 0,void 0,function(){var _;return Bt(this,function(T){return(_=this.resourceEntitlementsService)===null||_===void 0||_.loadEntitlements(),[2]})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(_){return"Failed to load initial entitlements for customer resource. Error: ".concat(_.message)},rethrowError:!0})];case 2:return y.sent(),this.initializationStateTracker.signalSuccessInit(),[3,4];case 3:return d=y.sent(),this.initializationStateTracker.signalFailedInit(d),[3,4];case 4:return[2]}})})},h.prototype.clearResource=function(){if(!this.configuration.customerId)throw new Error("`clearResource` must be called when customer was set, did you forget to call `setCustomerId`?");this.resourceEntitlementsService=null,this.configuration.resourceId=null},h.prototype.refresh=function(){return Ft(this,void 0,void 0,function(){var s=this;return Bt(this,function(c){return[2,kr(function(){return Ft(s,void 0,void 0,function(){var d,v;return Bt(this,function(y){switch(y.label){case 0:return[4,Promise.all([(d=this.globalEntitlementsService)===null||d===void 0?void 0:d.refresh(),(v=this.resourceEntitlementsService)===null||v===void 0?void 0:v.refresh()])];case 1:return y.sent(),[2]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(d){return"Failed to refresh entitlements. Error: ".concat(d.message)},rethrowError:!0})]})})},h.prototype.getBooleanEntitlement=function(s){var c,d=this,v=s.featureId,y=s.options,_=s.resourceId,T=(y==null?void 0:y.fallback)||((c=this.configuration.entitlementsFallback)===null||c===void 0?void 0:c[v])||{},I=Xi(Xi({},P),T);return Nh(function(){return d.globalEntitlementsService&&d.isCustomerLoaded?_?_!==d.configuration.resourceId?(d.loggerService.log("Resource ID ".concat(_," does not match the current resource ID ").concat(d.configuration.resourceId,".")),d.loggerService.log("Using fallback entitlements for customer: ".concat(d.configuration.customerId," with resourceId ").concat(_,"}")),I):d.isResourceLoaded&&d.resourceEntitlementsService?d.resourceEntitlementsService.getBooleanEntitlement(v,I,y):I:d.globalEntitlementsService.getBooleanEntitlement(v,I,y):(d.loggerService.log("Using fallback entitlements for customer: ".concat(d.configuration.customerId,". Reason: ").concat(d.globalEntitlementsService?"Customer not loaded":"Entitlements service not initialized "),{initializationStatus:d.initializationStateTracker.initializationStatus,customerId:d.configuration.customerId||""}),I)},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(C){return"Failed to get boolean entitlement. Error: ".concat(C.message)},rethrowError:!1,errorReportMetadata:{featureId:v,options:y}})||(this.loggerService.log("Using fallback entitlements for customer: ".concat(this.configuration.customerId,". Reason: Failed to get entitlement")),I)},h.prototype.getNumericEntitlement=function(s){var c,d=this,v=s.featureId,y=s.options,_=s.resourceId,T=(y==null?void 0:y.fallback)||((c=this.configuration.entitlementsFallback)===null||c===void 0?void 0:c[v])||{},I=Xi(Xi({},x),T);return Nh(function(){return d.globalEntitlementsService&&d.isCustomerLoaded?_?_!==d.configuration.resourceId?(d.loggerService.log("Resource ID ".concat(_," does not match the current resource ID ").concat(d.configuration.resourceId,".")),d.loggerService.log("Using fallback entitlements for customer: ".concat(d.configuration.customerId," with resourceId ").concat(_,"}")),I):d.isResourceLoaded&&d.resourceEntitlementsService?d.resourceEntitlementsService.getNumericEntitlement(v,I,y):I:d.globalEntitlementsService.getNumericEntitlement(v,I,y):(d.loggerService.log("Using fallback entitlements for customer: ".concat(d.configuration.customerId,". Reason: ").concat(d.globalEntitlementsService?"Customer not loaded":"Entitlements service not initialized "),{initializationStatus:d.initializationStateTracker.initializationStatus,customerId:d.configuration.customerId||""}),I)},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(C){return"Failed to get numeric entitlement. Error: ".concat(C.message)},rethrowError:!1,errorReportMetadata:{featureId:v,options:y}})||(this.loggerService.log("Using fallback entitlements for customer: ".concat(this.configuration.customerId,". Reason: Failed to get entitlement")),I)},h.prototype.getMeteredEntitlement=function(s){var c,d=this,v=s.featureId,y=s.options,_=s.resourceId,T=(y==null?void 0:y.fallback)||((c=this.configuration.entitlementsFallback)===null||c===void 0?void 0:c[v])||{},I=Xi(Xi({},k),T);return Nh(function(){return d.globalEntitlementsService&&d.isCustomerLoaded?_?_!==d.configuration.resourceId?(d.loggerService.log("Resource ID ".concat(_," does not match the current resource ID ").concat(d.configuration.resourceId,".")),d.loggerService.log("Using fallback entitlements for customer: ".concat(d.configuration.customerId," with resourceId ").concat(_,"}")),I):d.isResourceLoaded&&d.resourceEntitlementsService?d.resourceEntitlementsService.getMeteredEntitlement(v,I,y):I:d.globalEntitlementsService.getMeteredEntitlement(v,I,y):(d.loggerService.log("Using fallback entitlements for customer: ".concat(d.configuration.customerId,". Reason: ").concat(d.globalEntitlementsService?"Customer not loaded":"Entitlements service not initialized "),{initializationStatus:d.initializationStateTracker.initializationStatus,customerId:d.configuration.customerId||""}),I)},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(C){return"Failed to get metered entitlement. Error: ".concat(C.message)},rethrowError:!1,errorReportMetadata:{featureId:v,options:y}})||(this.loggerService.log("Using fallback entitlements for customer: ".concat(this.configuration.customerId,". Reason: Failed to get entitlement")),I)},h.prototype.getPaywall=function(s){var c=s===void 0?{}:s,d=c.productId,v=c.resourceId,y=c.context,_=c.billingCountryCode,T=c.includeHiddenPlans;return Ft(this,void 0,void 0,function(){var I,C=this;return Bt(this,function(A){return I={productId:d,customerId:this.configuration.customerId,resourceId:v,context:y,billingCountryCode:_,includeHiddenPlans:T},[2,kr(function(){return Ft(C,void 0,void 0,function(){var D;return Bt(this,function(U){switch(U.label){case 0:return d!=null&&d.startsWith("stiggTestData")?[4,this.apiGateway.mockPaywall.getMockPaywall(I)]:[3,2];case 1:return D=U.sent(),[2,this.modelMapper.mapMockPlans(D.data)];case 2:return[4,this.apiGateway.paywall.getPaywall(I)];case 3:return D=U.sent(),[2,this.modelMapper.mapPaywall(D.data)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(D){return"Failed to get paywall. Error: ".concat(D.message)},rethrowError:!0,errorReportMetadata:{productId:d}})]})})},h.prototype.getCoupons=function(){return Ft(this,void 0,void 0,function(){var s=this;return Bt(this,function(c){return[2,kr(function(){return Ft(s,void 0,void 0,function(){var d;return Bt(this,function(v){switch(v.label){case 0:return[4,this.apiGateway.coupons.getCoupons()];case 1:return d=v.sent(),[2,this.modelMapper.mapCoupons(d.data)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(d){return"Failed to get coupons. Error: ".concat(d.message)},rethrowError:!0})]})})},h.prototype.getCustomer=function(){return Ft(this,void 0,void 0,function(){var s=this;return Bt(this,function(c){return[2,kr(function(){return Ft(s,void 0,void 0,function(){var d,v,y,_;return Bt(this,function(T){switch(T.label){case 0:return d=Er(this.configuration),[4,this.apiGateway.customers.getCustomer(d)];case 1:if(v=T.sent(),!(y=v.data.getCustomerByRefId))throw new Error("Customer not found");return _=y.subscriptions||[],[2,this.modelMapper.mapCustomer(y,_)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(d){return"Failed to get customer. Error: ".concat(d.message)},rethrowError:!0})]})})},h.prototype.getCustomerPortal=function(s){var c=s===void 0?{}:s,d=c.resourceId,v=c.productId;return Ft(this,void 0,void 0,function(){var y=this;return Bt(this,function(_){return[2,kr(function(){return Ft(y,void 0,void 0,function(){var T,I;return Bt(this,function(C){switch(C.label){case 0:return T=Er(this.configuration),[4,this.apiGateway.customers.getCustomerPortal(T,d,v)];case 1:return I=C.sent(),[2,this.modelMapper.mapCustomerPortal(I.data.customerPortal)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(T){return"Failed to get customer portal details. Error: ".concat(T.message)},rethrowError:!0})]})})},h.prototype.getCheckoutState=function(s){var c=s.planId,d=s.resourceId,v=d===void 0?this.configuration.resourceId:d,y=s.billingCountryCode;return Ft(this,void 0,void 0,function(){var _=this;return Bt(this,function(T){return[2,kr(function(){return Ft(_,void 0,void 0,function(){var I,C;return Bt(this,function(A){switch(A.label){case 0:return I=Er(this.configuration),[4,this.apiGateway.subscriptions.checkoutState({customerId:I,resourceId:v,planId:c,billingCountryCode:y})];case 1:return C=A.sent(),[2,this.modelMapper.mapCheckoutState(C.data.checkoutState)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(I){return"Failed to get checkout details. Error: ".concat(I.message)},rethrowError:!0})]})})},h.prototype.applySubscription=function(s){return Ft(this,void 0,void 0,function(){var c=this;return Bt(this,function(d){return[2,kr(function(){return Ft(c,void 0,void 0,function(){var v,y;return Bt(this,function(_){switch(_.label){case 0:return v=Er(this.configuration),[4,this.apiGateway.subscriptions.applySubscription(Xi({customerId:v},s))];case 1:if(!(y=_.sent().data)||!y.applySubscription)throw new Error("Invalid response");return[2,this.modelMapper.mapApplySubscriptionResults(y)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(v){return"Failed to apply subscription to customer. Error: ".concat(v.message)},rethrowError:!0})]})})},h.prototype.fetchUsageHistory=function(s){return Ft(this,void 0,void 0,function(){var c=this;return Bt(this,function(d){return[2,kr(function(){return Ft(c,void 0,void 0,function(){var v;return Bt(this,function(y){switch(y.label){case 0:return[4,this.apiGateway.customers.fetchUsageHistory(s)];case 1:if(!(v=y.sent().data)||!v.usageHistory)throw new Error("Invalid response");return[2,this.modelMapper.mapUsageHistory(v.usageHistory)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(v){return"Failed to fetch usage history. Error: ".concat(v.message)},rethrowError:!1})]})})},h.prototype.getEntitlements=function(s){return Ft(this,void 0,void 0,function(){var c,d,v=this;return Bt(this,function(y){switch(y.label){case 0:return c=function(_){return _?Object.keys(_).map(function(T){return tf({isFallback:!0,accessDeniedReason:S.fEx.Unknown,feature:{id:T}},_[T])}):[]}(this.configuration.entitlementsFallback),[4,kr(function(){return Ft(v,void 0,void 0,function(){var _;return Bt(this,function(T){return Er(this.configuration),s?s!==this.configuration.resourceId?(this.loggerService.log("Resource ID ".concat(s," does not match the current resource ID ").concat(this.configuration.resourceId,".")),this.loggerService.log("Using fallback entitlements for customer: ".concat(this.configuration.customerId," with resourceId ").concat(s,"}")),[2,c]):this.isResourceLoaded&&this.resourceEntitlementsService?(this.loggerService.log("Using fallback entitlements for customer: ".concat(this.configuration.customerId)),[2,this.resourceEntitlementsService.getEntitlements()]):[2,c]:[2,(_=this.globalEntitlementsService)===null||_===void 0?void 0:_.getEntitlements()]})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(_){return"Failed to get entitlements. Error: ".concat(_.message)},rethrowError:!0})];case 1:return(d=y.sent())?[2,d]:(this.loggerService.log("Using fallback entitlements for customer: ".concat(this.configuration.customerId,". Reason: Failed to get entitlements.")),[2,c])}})})},h.prototype.estimateSubscription=function(s){return Ft(this,void 0,void 0,function(){var c=this;return Bt(this,function(d){return[2,kr(function(){return Ft(c,void 0,void 0,function(){var v;return Bt(this,function(y){switch(y.label){case 0:return[4,this.apiGateway.subscriptionEstimations.estimateSubscription(s)];case 1:if(!(v=y.sent().data))throw new Error("Invalid response");return[2,this.modelMapper.mapSubscriptionPreview(v.estimateSubscription)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(v){return"Failed to estimate subscription. Error: ".concat(v.message)},rethrowError:!0})]})})},h.prototype.estimateSubscriptionUpdate=function(s){return Ft(this,void 0,void 0,function(){var c=this;return Bt(this,function(d){return[2,kr(function(){return Ft(c,void 0,void 0,function(){var v;return Bt(this,function(y){switch(y.label){case 0:return[4,this.apiGateway.subscriptionEstimations.estimateSubscriptionUpdate(s)];case 1:if(!(v=y.sent().data))throw new Error("Invalid response");return[2,this.modelMapper.mapSubscriptionPreview(v.estimateSubscriptionUpdate)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(v){return"Failed to estimate subscription update. Error: ".concat(v.message)},rethrowError:!0})]})})},h.prototype.previewSubscription=function(s){return Ft(this,void 0,void 0,function(){var c=this;return Bt(this,function(d){return[2,kr(function(){return Ft(c,void 0,void 0,function(){var v;return Bt(this,function(y){switch(y.label){case 0:return[4,this.apiGateway.subscriptionEstimations.previewSubscription(s)];case 1:if(!(v=y.sent().data))throw new Error("Invalid response");return[2,this.modelMapper.mapSubscriptionPreviewV2(v.previewSubscription)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(v){return"Failed to estimate checkout. Error: ".concat(v.message)},rethrowError:!0})]})})},h.prototype.waitForCheckoutCompleted=function(s){var c=s===void 0?{}:s,d=c.timeoutMs,v=d===void 0?15e3:d,y=c.refreshOnComplete,_=y===void 0||y;return Ft(this,void 0,void 0,function(){var T,I,C,A,D,U,q,Z;return Bt(this,function(z){switch(z.label){case 0:if(typeof window>"u")throw new Error("`waitForCheckoutCompleted` was called, but `window` is not defined");if(T=new URLSearchParams(window.location.search),I=T.get("subscriptionId"),C=T.get("resourceId")||void 0,A=T.get("checkoutCompleted"),!I)return this.loggerService.log("`waitCheckoutCompleted` was called, but no `subscriptionId` found in query params"),[2,null];if(!A||A.toLowerCase()==="false")return this.loggerService.log("The checkout session was cancelled by the user"),[2,null];D=Date.now(),U=!1,q=null,z.label=1;case 1:return U?[4,new Promise(function(ne){return setTimeout(ne,1e3)})]:[3,3];case 2:z.sent(),z.label=3;case 3:return[4,this.getActiveSubscriptions({resourceId:C})];case 4:Z=z.sent(),q=Z.find(function(ne){return ne.id===I})||null,U=!0,z.label=5;case 5:if(!q&&Date.now()-D<v)return[3,1];z.label=6;case 6:if(!q)throw new Error("Timeout while waiting for checkout to complete, subscription ".concat(I," is not active"));return _?[4,this.refresh()]:[3,8];case 7:z.sent(),z.label=8;case 8:return[2,q]}})})},h.prototype.getActiveSubscriptions=function(s){var c=this,d=(s===void 0?{}:s).resourceId;return kr(function(){return Ft(c,void 0,void 0,function(){var v,y,_;return Bt(this,function(T){switch(T.label){case 0:return v=Er(this.configuration),[4,this.apiGateway.customers.getActiveSubscriptions(v,d)];case 1:if(y=T.sent(),!(_=y.data.getActiveSubscriptions))throw new Error("Customer ".concat(d?"or resource ":"","not found"));return[2,this.modelMapper.mapSubscriptions(_)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(v){return"Failed to get active subscriptions. Error: ".concat(v.message)},rethrowError:!0})},h.prototype.getActiveSubscriptionsList=function(s){var c=(s===void 0?{}:s).resourceId;return Ft(this,void 0,void 0,function(){var d=this;return Bt(this,function(v){return[2,kr(function(){return Ft(d,void 0,void 0,function(){var y;return Bt(this,function(_){switch(_.label){case 0:return y=Er(this.configuration),[4,this.apiGateway.customers.getActiveSubscriptionsList(y,c)];case 1:return[2,_.sent().data.getActiveSubscriptions]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(y){return"Failed to get active subscriptions list. Error: ".concat(y.message)},rethrowError:!0})]})})},h.prototype.getSubscription=function(s){var c=s.subscriptionId;return Ft(this,void 0,void 0,function(){var d=this;return Bt(this,function(v){return[2,kr(function(){return Ft(d,void 0,void 0,function(){var y,_;return Bt(this,function(T){switch(T.label){case 0:return[4,this.apiGateway.customers.getSubscription(c)];case 1:return y=T.sent(),_=y.data.getSubscription,[2,this.modelMapper.mapSubscription(_)]}})})},{loggerService:this.loggerService,sdkConfiguration:this.configuration,errorMessage:function(y){return"Failed to get subscription. Error: ".concat(y.message)},rethrowError:!0})]})})},h}()},890:(i,a,l)=>{Object.defineProperty(a,"X$v",{value:!0}),a.puT=a.XY6=a.Kyg=a.isD=a.Us3=a.B8X=a.qBr=a.uMn=a.U9t=a.Tex=a.iKc=a.GAT=a.bWm=a.o_I=a.i3Z=a.m72=a.g3t=a.Zr9=a.jKp=a.Qj0=a.$BG=a.IZr=a.FT8=a.XHu=a.AVk=a.Lbh=a.C2e=a.yEZ=a.Pg9=a.rpU=a.pDu=a.Fa6=a.$i2=a.K79=a.i2A=a.uS8=a.u4I=a.ugv=a.tvV=a.FzK=a.yTz=a.PLi=a.nBi=a.E34=a.Mbo=a.v2N=a.Ijf=a.nwm=a.dpb=a.fEx=void 0,a.FoD=a._yy=a.Buv=a.Dfv=a.p13=a.PNd=a.UAI=a.hYU=a.wRo=a.yhH=a.nOi=a.YVG=a.cUf=a.yBL=a.DWP=a.eSW=a.G6j=a.tV1=a.e1Q=a._oj=a.ird=a.lS0=a.c06=a.w1y=a.ueJ=a.PO0=a.Xm9=a.SrV=a.nM6=a.Zam=a.u0j=a.QZw=a.$Vq=a.ku9=a.JkE=a.p_C=a._HY=a.YGW=a.qXR=a.Cc7=a.LtK=a.Kf7=a.QdX=a.TVs=a.OeJ=a.jCI=a.iI3=a.zv6=a.q5V=a.pSI=void 0,a.g31=a.NSU=a.mGS=a.XsQ=a._d$=a.u9g=a.Eph=a.LBz=a.X$1=a.aqW=a.qYx=a.ab2=a.cG4=a.l3m=a.bII=a.cUI=a.o5f=a.JyR=a.Dxn=a.URA=a.Eam=a.DFP=a.zjf=a.fYe=a.GBW=a.Ugm=a.hvo=a.J5K=a.zWW=a.bOA=a.kd9=a.d4U=a.T0E=a.BoX=a.RzF=a.cMT=a.N9N=a.wEB=a.Chb=a.OoB=a.FL0=a.hk_=a.Ehw=a.zdd=a.bj8=a.cTO=a.zOd=a.EOH=a.l9N=a.rCU=void 0,a.do1=a.bgy=a.OpC=a.TpL=a.ZeH=a.$02=a._gQ=a.m06=a.bGN=a.WJn=a.JDz=a.ZSL=a.dO5=a.K5h=a.jAf=a.yGq=a.ZD9=a.wO5=a.m5b=a.x3v=a.EQD=a.N5j=a.Bkk=a.rDA=a.GHz=a.Mal=a.Wky=a.eKV=a.$jJ=a.m76=a.q6C=a.UK7=a.CjA=a.Y92=a.YlF=a.bGH=a.QNm=a.qw4=a.fvX=a.r4r=a.nN6=a.FcI=a.lgL=a.wn5=a.hVT=a.$Bh=a.VeJ=a.k8_=a.weZ=a.bEP=void 0,a.mKo=a.zBW=a.LpH=a.Bve=a.K0T=a._xu=a.jPD=a.$Av=a.N9K=a.Fd7=a.pWb=a.roX=a.RVX=a.Q$1=void 0;const p=l(5185);var u,m,E,w,R,S,P,x,k,B,G,X,F,j,H,re,te,fe,Te,Ce,$,J,ge,ee,Ie,we,Be,st,At,Ar,Ir,sr,Mt,ur,Or,Kr,pr,Wt,xr,Er,Yr,_t,le,gn,Qr,Xr,ti,rr,Rr,Rn,it,qe,ye,zt,It,Gn,mt,kn,Lr,ce,K,V,Y,ve,oe,Pe,me,ue,rt,ze,Yt,ie,Zt,br,$r,ri,Qt,$n,$i,pi,Zr,Jt,cr,ni,de,Dn,Ii,Ur,Oi,xa,Kt,nr,ll,$o,Ri,Ci,qt,ii,Mn,Cs,Ln;(Ln=a.fEx||(a.fEx={})).BudgetExceeded="BudgetExceeded",Ln.CustomerIsArchived="CustomerIsArchived",Ln.CustomerNotFound="CustomerNotFound",Ln.CustomerResourceNotFound="CustomerResourceNotFound",Ln.FeatureNotFound="FeatureNotFound",Ln.NoActiveSubscription="NoActiveSubscription",Ln.NoFeatureEntitlementInSubscription="NoFeatureEntitlementInSubscription",Ln.RequestedUsageExceedingLimit="RequestedUsageExceedingLimit",Ln.Unknown="Unknown",(Cs=a.dpb||(a.dpb={})).Active="ACTIVE",Cs.Blocked="BLOCKED",(Mn=a.nwm||(a.nwm={})).BillingId="billingId",Mn.CreatedAt="createdAt",Mn.Description="description",Mn.DisplayName="displayName",Mn.EnvironmentId="environmentId",Mn.Id="id",Mn.IsLatest="isLatest",Mn.PricingType="pricingType",Mn.ProductId="productId",Mn.RefId="refId",Mn.Status="status",Mn.UpdatedAt="updatedAt",Mn.VersionNumber="versionNumber",(ii=a.Ijf||(a.Ijf={})).Avg="AVG",ii.Count="COUNT",ii.Max="MAX",ii.Min="MIN",ii.Sum="SUM",ii.Unique="UNIQUE",(qt=a.v2N||(a.v2N={})).Center="CENTER",qt.Left="LEFT",qt.Right="RIGHT",(a.Mbo||(a.Mbo={})).Id="id",(Ci=a.E34||(a.E34={})).Client="CLIENT",Ci.Salesforce="SALESFORCE",Ci.Server="SERVER",(Ri=a.nBi||(a.nBi={})).Au="AU",Ri.Ca="CA",Ri.Eu="EU",Ri.Jp="JP",Ri.Uk="UK",Ri.Us="US",($o=a.PLi||(a.PLi={})).StartOfTheMonth="START_OF_THE_MONTH",$o.SubscriptionsConsolidateBilling="SUBSCRIPTIONS_CONSOLIDATE_BILLING",$o.SubscriptionStart="SUBSCRIPTION_START",(ll=a.yTz||(a.yTz={})).OneOff="ONE_OFF",ll.Recurring="RECURRING",(nr=a.FzK||(a.FzK={})).FlatFee="FLAT_FEE",nr.MinimumSpend="MINIMUM_SPEND",nr.PerUnit="PER_UNIT",nr.UsageBased="USAGE_BASED",(Kt=a.tvV||(a.tvV={})).Annually="ANNUALLY",Kt.Monthly="MONTHLY",(a.ugv||(a.ugv={})).Stripe="STRIPE",(xa=a.u4I||(a.u4I={})).Added="ADDED",xa.Deleted="DELETED",xa.Modified="MODIFIED",xa.Reordered="REORDERED",(Oi=a.uS8||(a.uS8={})).Equals="EQUALS",Oi.GreaterThan="GREATER_THAN",Oi.GreaterThanOrEqual="GREATER_THAN_OR_EQUAL",Oi.IsNotNull="IS_NOT_NULL",Oi.IsNull="IS_NULL",Oi.LessThan="LESS_THAN",Oi.LessThanOrEqual="LESS_THAN_OR_EQUAL",Oi.NotEquals="NOT_EQUALS",(Ur=a.i2A||(a.i2A={})).BillingId="billingId",Ur.CreatedAt="createdAt",Ur.Description="description",Ur.EnvironmentId="environmentId",Ur.Id="id",Ur.Name="name",Ur.RefId="refId",Ur.Status="status",Ur.Type="type",Ur.UpdatedAt="updatedAt",(Ii=a.K79||(a.K79={})).Active="ACTIVE",Ii.Archived="ARCHIVED",(Dn=a.$i2||(a.$i2={})).Fixed="FIXED",Dn.Percentage="PERCENTAGE",(de=a.Fa6||(a.Fa6={})).Aed="AED",de.All="ALL",de.Amd="AMD",de.Ang="ANG",de.Aud="AUD",de.Awg="AWG",de.Azn="AZN",de.Bam="BAM",de.Bbd="BBD",de.Bdt="BDT",de.Bgn="BGN",de.Bif="BIF",de.Bmd="BMD",de.Bnd="BND",de.Bsd="BSD",de.Bwp="BWP",de.Byn="BYN",de.Bzd="BZD",de.Cad="CAD",de.Cdf="CDF",de.Chf="CHF",de.Clp="CLP",de.Cny="CNY",de.Czk="CZK",de.Djf="DJF",de.Dkk="DKK",de.Dop="DOP",de.Dzd="DZD",de.Egp="EGP",de.Etb="ETB",de.Eur="EUR",de.Fjd="FJD",de.Gbp="GBP",de.Gel="GEL",de.Gip="GIP",de.Gmd="GMD",de.Gnf="GNF",de.Gyd="GYD",de.Hkd="HKD",de.Hrk="HRK",de.Htg="HTG",de.Idr="IDR",de.Ils="ILS",de.Inr="INR",de.Isk="ISK",de.Jmd="JMD",de.Jpy="JPY",de.Kes="KES",de.Kgs="KGS",de.Khr="KHR",de.Kmf="KMF",de.Krw="KRW",de.Kyd="KYD",de.Kzt="KZT",de.Lbp="LBP",de.Lkr="LKR",de.Lrd="LRD",de.Lsl="LSL",de.Mad="MAD",de.Mdl="MDL",de.Mga="MGA",de.Mkd="MKD",de.Mmk="MMK",de.Mnt="MNT",de.Mop="MOP",de.Mro="MRO",de.Mvr="MVR",de.Mwk="MWK",de.Mxn="MXN",de.Myr="MYR",de.Mzn="MZN",de.Nad="NAD",de.Ngn="NGN",de.Nok="NOK",de.Npr="NPR",de.Nzd="NZD",de.Pgk="PGK",de.Php="PHP",de.Pkr="PKR",de.Pln="PLN",de.Pyg="PYG",de.Qar="QAR",de.Ron="RON",de.Rsd="RSD",de.Rub="RUB",de.Rwf="RWF",de.Sar="SAR",de.Sbd="SBD",de.Scr="SCR",de.Sek="SEK",de.Sgd="SGD",de.Sle="SLE",de.Sll="SLL",de.Sos="SOS",de.Szl="SZL",de.Thb="THB",de.Tjs="TJS",de.Top="TOP",de.Try="TRY",de.Ttd="TTD",de.Tzs="TZS",de.Uah="UAH",de.Ugx="UGX",de.Usd="USD",de.Uzs="UZS",de.Vnd="VND",de.Vuv="VUV",de.Wst="WST",de.Xaf="XAF",de.Xcd="XCD",de.Xof="XOF",de.Xpf="XPF",de.Yer="YER",de.Zar="ZAR",de.Zmw="ZMW",(ni=a.pDu||(a.pDu={})).CreatedAt="createdAt",ni.EnvironmentId="environmentId",ni.ResourceId="resourceId",(cr=a.rpU||(a.rpU={})).BillingId="billingId",cr.CreatedAt="createdAt",cr.CrmHubspotCompanyId="crmHubspotCompanyId",cr.CrmHubspotCompanyUrl="crmHubspotCompanyUrl",cr.CrmId="crmId",cr.CustomerId="customerId",cr.DeletedAt="deletedAt",cr.Email="email",cr.EnvironmentId="environmentId",cr.Id="id",cr.Name="name",cr.RefId="refId",cr.SearchQuery="searchQuery",cr.UpdatedAt="updatedAt",(Jt=a.Pg9||(a.Pg9={})).BillingCycleAnchor="billingCycleAnchor",Jt.BillingId="billingId",Jt.CancelReason="cancelReason",Jt.CancellationDate="cancellationDate",Jt.CreatedAt="createdAt",Jt.CrmId="crmId",Jt.CrmLinkUrl="crmLinkUrl",Jt.CurrentBillingPeriodEnd="currentBillingPeriodEnd",Jt.CurrentBillingPeriodStart="currentBillingPeriodStart",Jt.CustomerId="customerId",Jt.EffectiveEndDate="effectiveEndDate",Jt.EndDate="endDate",Jt.EnvironmentId="environmentId",Jt.Id="id",Jt.OldBillingId="oldBillingId",Jt.PayingCustomerId="payingCustomerId",Jt.PaymentCollection="paymentCollection",Jt.PricingType="pricingType",Jt.RefId="refId",Jt.ResourceId="resourceId",Jt.StartDate="startDate",Jt.Status="status",Jt.SubscriptionId="subscriptionId",Jt.TrialEndDate="trialEndDate",(Zr=a.yEZ||(a.yEZ={})).CeoOrFounder="CEO_OR_FOUNDER",Zr.Engineering="ENGINEERING",Zr.Growth="GROWTH",Zr.Marketing="MARKETING",Zr.Monetization="MONETIZATION",Zr.Other="OTHER",Zr.Product="PRODUCT",(pi=a.C2e||(a.C2e={})).Forever="FOREVER",pi.Once="ONCE",pi.Repeating="REPEATING",($i=a.Lbh||(a.Lbh={})).Fixed="FIXED",$i.Percentage="PERCENTAGE",($n=a.AVk||(a.AVk={})).Increment="Increment",$n.Override="Override",(Qt=a.XHu||(a.XHu={})).Day="DAY",Qt.Hour="HOUR",Qt.Month="MONTH",Qt.Week="WEEK",Qt.Year="YEAR",(ri=a.FT8||(a.FT8={})).BlackList="BLACK_LIST",ri.WhiteList="WHITE_LIST",($r=a.IZr||(a.IZr={})).Done="DONE",$r.Failed="FAILED",$r.InProgress="IN_PROGRESS",$r.NotProvisioned="NOT_PROVISIONED",(br=a.$BG||(a.$BG={})).CreatedAt="createdAt",br.DisplayName="displayName",br.Id="id",br.PermanentDeletionDate="permanentDeletionDate",br.Slug="slug",(Zt=a.Qj0||(a.Qj0={})).Development="DEVELOPMENT",Zt.Production="PRODUCTION",Zt.Sandbox="SANDBOX",(ie=a.jKp||(a.jKp={})).AccountNotFoundError="AccountNotFoundError",ie.AddonDependencyMissingError="AddonDependencyMissingError",ie.AddonHasToHavePriceError="AddonHasToHavePriceError",ie.AddonIsCompatibleWithGroup="AddonIsCompatibleWithGroup",ie.AddonIsCompatibleWithPlan="AddonIsCompatibleWithPlan",ie.AddonNotFound="AddonNotFound",ie.AddonQuantityExceedsLimitError="AddonQuantityExceedsLimitError",ie.AddonWithDraftCannotBeDeletedError="AddonWithDraftCannotBeDeletedError",ie.AddonsNotFound="AddonsNotFound",ie.AmountTooLarge="AmountTooLarge",ie.ArchivedCouponCantBeApplied="ArchivedCouponCantBeApplied",ie.AuthCustomerMismatch="AuthCustomerMismatch",ie.AuthCustomerReadonly="AuthCustomerReadonly",ie.AwsMarketplaceIntegrationError="AwsMarketplaceIntegrationError",ie.AwsMarketplaceIntegrationValidationError="AwsMarketplaceIntegrationValidationError",ie.BadUserInput="BadUserInput",ie.BillingIntegrationAlreadyExistsError="BillingIntegrationAlreadyExistsError",ie.BillingIntegrationMissing="BillingIntegrationMissing",ie.BillingPeriodMissingError="BillingPeriodMissingError",ie.CannotAddOverrideEntitlementToPlan="CannotAddOverrideEntitlementToPlan",ie.CannotArchiveFeatureError="CannotArchiveFeatureError",ie.CannotDeleteCustomerError="CannotDeleteCustomerError",ie.CannotDeleteFeatureError="CannotDeleteFeatureError",ie.CannotDeleteProductError="CannotDeleteProductError",ie.CannotEditPackageInNonDraftMode="CannotEditPackageInNonDraftMode",ie.CannotRemovePaymentMethodFromCustomerError="CannotRemovePaymentMethodFromCustomerError",ie.CannotReportUsageForEntitlementWithMeterError="CannotReportUsageForEntitlementWithMeterError",ie.CannotUpdateUnitTransformationError="CannotUpdateUnitTransformationError",ie.CannotUpsertToPackageThatHasDraft="CannotUpsertToPackageThatHasDraft",ie.ChangingPayingCustomerIsNotSupportedError="ChangingPayingCustomerIsNotSupportedError",ie.CheckoutIsNotSupported="CheckoutIsNotSupported",ie.CouponNotFound="CouponNotFound",ie.CustomerAlreadyHaveCustomerCoupon="CustomerAlreadyHaveCustomerCoupon",ie.CustomerAlreadyUsesCoupon="CustomerAlreadyUsesCoupon",ie.CustomerHasNoEmailAddress="CustomerHasNoEmailAddress",ie.CustomerNoBillingId="CustomerNoBillingId",ie.CustomerNotFound="CustomerNotFound",ie.CustomerResourceNotFound="CustomerResourceNotFound",ie.DowngradeBillingPeriodNotSupportedError="DowngradeBillingPeriodNotSupportedError",ie.DraftAddonCantBeArchived="DraftAddonCantBeArchived",ie.DraftPlanCantBeArchived="DraftPlanCantBeArchived",ie.DuplicateAddonProvisionedError="DuplicateAddonProvisionedError",ie.DuplicateProductValidationError="DuplicateProductValidationError",ie.DuplicatedEntityNotAllowed="DuplicatedEntityNotAllowed",ie.EditAllowedOnDraftPackageOnlyError="EditAllowedOnDraftPackageOnlyError",ie.EntitlementLimitExceededError="EntitlementLimitExceededError",ie.EntitlementUsageOutOfRangeError="EntitlementUsageOutOfRangeError",ie.EntitlementsMustBelongToSamePackage="EntitlementsMustBelongToSamePackage",ie.EntityIdDifferentFromRefIdError="EntityIdDifferentFromRefIdError",ie.EntityIsArchivedError="EntityIsArchivedError",ie.EnvironmentMissing="EnvironmentMissing",ie.ExperimentAlreadyRunning="ExperimentAlreadyRunning",ie.ExperimentNotFoundError="ExperimentNotFoundError",ie.ExperimentStatusError="ExperimentStatusError",ie.FailedToCreateCheckoutSessionError="FailedToCreateCheckoutSessionError",ie.FailedToImportCustomer="FailedToImportCustomer",ie.FeatureNotFound="FeatureNotFound",ie.FetchAllCountriesPricesNotAllowed="FetchAllCountriesPricesNotAllowed",ie.FreePlanCantHaveCompatiblePackageGroupError="FreePlanCantHaveCompatiblePackageGroupError",ie.HubspotIntegrationError="HubspotIntegrationError",ie.IdentityForbidden="IdentityForbidden",ie.ImportAlreadyInProgress="ImportAlreadyInProgress",ie.ImportSubscriptionsBulkError="ImportSubscriptionsBulkError",ie.IncompatibleSubscriptionAddon="IncompatibleSubscriptionAddon",ie.InitStripePaymentMethodError="InitStripePaymentMethodError",ie.IntegrationNotFound="IntegrationNotFound",ie.IntegrationValidationError="IntegrationValidationError",ie.IntegrityViolation="IntegrityViolation",ie.InvalidAddressError="InvalidAddressError",ie.InvalidArgumentError="InvalidArgumentError",ie.InvalidCancellationDate="InvalidCancellationDate",ie.InvalidEntitlementResetPeriod="InvalidEntitlementResetPeriod",ie.InvalidMemberDelete="InvalidMemberDelete",ie.InvalidMetadataError="InvalidMetadataError",ie.InvalidQuantity="InvalidQuantity",ie.InvalidSubscriptionStatus="InvalidSubscriptionStatus",ie.InvalidUpdatePriceUnitAmountError="InvalidUpdatePriceUnitAmountError",ie.MemberInvitationError="MemberInvitationError",ie.MemberNotFound="MemberNotFound",ie.MergeEnvironmentValidationError="MergeEnvironmentValidationError",ie.MeterMustBeAssociatedToMeteredFeature="MeterMustBeAssociatedToMeteredFeature",ie.MeteringNotAvailableForFeatureType="MeteringNotAvailableForFeatureType",ie.MissingEntityIdError="MissingEntityIdError",ie.MissingSubscriptionInvoiceError="MissingSubscriptionInvoiceError",ie.MultiSubscriptionCantBeAutoCancellationSourceError="MultiSubscriptionCantBeAutoCancellationSourceError",ie.NoFeatureEntitlementError="NoFeatureEntitlementError",ie.NoFeatureEntitlementInSubscription="NoFeatureEntitlementInSubscription",ie.NoProductsAvailable="NoProductsAvailable",ie.OperationNotAllowedDuringInProgressExperiment="OperationNotAllowedDuringInProgressExperiment",ie.PackageAlreadyPublished="PackageAlreadyPublished",ie.PackageGroupMinItemsError="PackageGroupMinItemsError",ie.PackageGroupNotFound="PackageGroupNotFound",ie.PackagePricingTypeNotSet="PackagePricingTypeNotSet",ie.PaymentMethodNotFoundError="PaymentMethodNotFoundError",ie.PlanCannotBePublishWhenBasePlanIsDraft="PlanCannotBePublishWhenBasePlanIsDraft",ie.PlanCannotBePublishWhenCompatibleAddonIsDraft="PlanCannotBePublishWhenCompatibleAddonIsDraft",ie.PlanIsUsedAsDefaultStartPlan="PlanIsUsedAsDefaultStartPlan",ie.PlanIsUsedAsDowngradePlan="PlanIsUsedAsDowngradePlan",ie.PlanNotFound="PlanNotFound",ie.PlanWithChildCantBeDeleted="PlanWithChildCantBeDeleted",ie.PlansCircularDependencyError="PlansCircularDependencyError",ie.PreparePaymentMethodFormError="PreparePaymentMethodFormError",ie.PriceNotFound="PriceNotFound",ie.ProductNotFoundError="ProductNotFoundError",ie.PromotionCodeCustomerNotFirstPurchase="PromotionCodeCustomerNotFirstPurchase",ie.PromotionCodeMaxRedemptionsReached="PromotionCodeMaxRedemptionsReached",ie.PromotionCodeMinimumAmountNotReached="PromotionCodeMinimumAmountNotReached",ie.PromotionCodeNotActive="PromotionCodeNotActive",ie.PromotionCodeNotForCustomer="PromotionCodeNotForCustomer",ie.PromotionCodeNotFound="PromotionCodeNotFound",ie.PromotionalEntitlementNotFoundError="PromotionalEntitlementNotFoundError",ie.RateLimitExceeded="RateLimitExceeded",ie.RecalculateEntitlementsError="RecalculateEntitlementsError",ie.RequiredSsoAuthenticationError="RequiredSsoAuthenticationError",ie.ResyncAlreadyInProgress="ResyncAlreadyInProgress",ie.ScheduledMigrationAlreadyExistsError="ScheduledMigrationAlreadyExistsError",ie.SelectedBillingModelDoesntMatchImportedItemError="SelectedBillingModelDoesntMatchImportedItemError",ie.SingleSubscriptionCantBeAutoCancellationTargetError="SingleSubscriptionCantBeAutoCancellationTargetError",ie.StripeCustomerIsDeleted="StripeCustomerIsDeleted",ie.StripeError="StripeError",ie.SubscriptionAlreadyCanceledOrExpired="SubscriptionAlreadyCanceledOrExpired",ie.SubscriptionAlreadyOnLatestPlanError="SubscriptionAlreadyOnLatestPlanError",ie.SubscriptionDoesNotHaveBillingPeriod="SubscriptionDoesNotHaveBillingPeriod",ie.SubscriptionInvoiceStatusError="SubscriptionInvoiceStatusError",ie.SubscriptionMustHaveSinglePlanError="SubscriptionMustHaveSinglePlanError",ie.SubscriptionNoBillingId="SubscriptionNoBillingId",ie.SubscriptionNotFound="SubscriptionNotFound",ie.TooManySubscriptionsPerCustomer="TooManySubscriptionsPerCustomer",ie.TrialMinDateError="TrialMinDateError",ie.TrialMustBeCancelledImmediately="TrialMustBeCancelledImmediately",ie.UnPublishedPackage="UnPublishedPackage",ie.Unauthenticated="Unauthenticated",ie.UnexpectedError="UnexpectedError",ie.UnsupportedFeatureType="UnsupportedFeatureType",ie.UnsupportedSubscriptionScheduleType="UnsupportedSubscriptionScheduleType",ie.UnsupportedVendorIdentifier="UnsupportedVendorIdentifier",ie.UsageMeasurementDiffOutOfRangeError="UsageMeasurementDiffOutOfRangeError",(Yt=a.Zr9||(a.Zr9={})).AppCustomer="APP_CUSTOMER",Yt.AppPublic="APP_PUBLIC",Yt.AppServer="APP_SERVER",Yt.Aws="AWS",Yt.Import="IMPORT",Yt.Migration="MIGRATION",Yt.Salesforce="SALESFORCE",Yt.Scheduler="SCHEDULER",Yt.Service="SERVICE",Yt.Stripe="STRIPE",Yt.Support="SUPPORT",Yt.System="SYSTEM",Yt.User="USER",(ze=a.g3t||(a.g3t={})).Addon="ADDON",ze.Coupon="COUPON",ze.Customer="CUSTOMER",ze.Entitlement="ENTITLEMENT",ze.Feature="FEATURE",ze.Import="IMPORT",ze.Measurement="MEASUREMENT",ze.Package="PACKAGE",ze.PackageGroup="PACKAGE_GROUP",ze.Plan="PLAN",ze.Product="PRODUCT",ze.PromotionalEntitlement="PROMOTIONAL_ENTITLEMENT",ze.Subscription="SUBSCRIPTION",(rt=a.m72||(a.m72={})).CreatedAt="createdAt",rt.EntityId="entityId",rt.EnvironmentId="environmentId",rt.EventLogType="eventLogType",rt.Id="id",rt.ParentEntityId="parentEntityId",(ue=a.i3Z||(a.i3Z={})).AddonCreated="ADDON_CREATED",ue.AddonDeleted="ADDON_DELETED",ue.AddonUpdated="ADDON_UPDATED",ue.CouponArchived="COUPON_ARCHIVED",ue.CouponCreated="COUPON_CREATED",ue.CouponUpdated="COUPON_UPDATED",ue.CreateSubscriptionFailed="CREATE_SUBSCRIPTION_FAILED",ue.CustomerCreated="CUSTOMER_CREATED",ue.CustomerDeleted="CUSTOMER_DELETED",ue.CustomerEntitlementCalculationTriggered="CUSTOMER_ENTITLEMENT_CALCULATION_TRIGGERED",ue.CustomerPaymentFailed="CUSTOMER_PAYMENT_FAILED",ue.CustomerResourceEntitlementCalculationTriggered="CUSTOMER_RESOURCE_ENTITLEMENT_CALCULATION_TRIGGERED",ue.CustomerUpdated="CUSTOMER_UPDATED",ue.EdgeApiCustomerDataResync="EDGE_API_CUSTOMER_DATA_RESYNC",ue.EdgeApiDataResync="EDGE_API_DATA_RESYNC",ue.EdgeApiDoggoResync="EDGE_API_DOGGO_RESYNC",ue.EdgeApiPackageEntitlementsDataResync="EDGE_API_PACKAGE_ENTITLEMENTS_DATA_RESYNC",ue.EdgeApiSubscriptionsDataResync="EDGE_API_SUBSCRIPTIONS_DATA_RESYNC",ue.EntitlementsUpdated="ENTITLEMENTS_UPDATED",ue.EntitlementDenied="ENTITLEMENT_DENIED",ue.EntitlementGranted="ENTITLEMENT_GRANTED",ue.EntitlementRequested="ENTITLEMENT_REQUESTED",ue.EntitlementUsageExceeded="ENTITLEMENT_USAGE_EXCEEDED",ue.EnvironmentDeleted="ENVIRONMENT_DELETED",ue.FeatureArchived="FEATURE_ARCHIVED",ue.FeatureCreated="FEATURE_CREATED",ue.FeatureDeleted="FEATURE_DELETED",ue.FeatureUpdated="FEATURE_UPDATED",ue.ImportIntegrationCatalogTriggered="IMPORT_INTEGRATION_CATALOG_TRIGGERED",ue.ImportIntegrationCustomersTriggered="IMPORT_INTEGRATION_CUSTOMERS_TRIGGERED",ue.ImportSubscriptionsBulkTriggered="IMPORT_SUBSCRIPTIONS_BULK_TRIGGERED",ue.MeasurementReported="MEASUREMENT_REPORTED",ue.PackageGroupCreated="PACKAGE_GROUP_CREATED",ue.PackageGroupUpdated="PACKAGE_GROUP_UPDATED",ue.PackagePublished="PACKAGE_PUBLISHED",ue.PlanCreated="PLAN_CREATED",ue.PlanDeleted="PLAN_DELETED",ue.PlanUpdated="PLAN_UPDATED",ue.ProductCreated="PRODUCT_CREATED",ue.ProductDeleted="PRODUCT_DELETED",ue.ProductUpdated="PRODUCT_UPDATED",ue.PromotionalEntitlementExpired="PROMOTIONAL_ENTITLEMENT_EXPIRED",ue.PromotionalEntitlementGranted="PROMOTIONAL_ENTITLEMENT_GRANTED",ue.PromotionalEntitlementRevoked="PROMOTIONAL_ENTITLEMENT_REVOKED",ue.PromotionalEntitlementUpdated="PROMOTIONAL_ENTITLEMENT_UPDATED",ue.RecalculateEntitlementsTriggered="RECALCULATE_ENTITLEMENTS_TRIGGERED",ue.ResyncIntegrationTriggered="RESYNC_INTEGRATION_TRIGGERED",ue.SubscriptionsMigrated="SUBSCRIPTIONS_MIGRATED",ue.SubscriptionsMigrationTriggered="SUBSCRIPTIONS_MIGRATION_TRIGGERED",ue.SubscriptionBillingMonthEndsSoon="SUBSCRIPTION_BILLING_MONTH_ENDS_SOON",ue.SubscriptionCanceled="SUBSCRIPTION_CANCELED",ue.SubscriptionCreated="SUBSCRIPTION_CREATED",ue.SubscriptionExpired="SUBSCRIPTION_EXPIRED",ue.SubscriptionSpentLimitExceeded="SUBSCRIPTION_SPENT_LIMIT_EXCEEDED",ue.SubscriptionTrialConverted="SUBSCRIPTION_TRIAL_CONVERTED",ue.SubscriptionTrialEndsSoon="SUBSCRIPTION_TRIAL_ENDS_SOON",ue.SubscriptionTrialExpired="SUBSCRIPTION_TRIAL_EXPIRED",ue.SubscriptionTrialStarted="SUBSCRIPTION_TRIAL_STARTED",ue.SubscriptionUpdated="SUBSCRIPTION_UPDATED",ue.SubscriptionUsageChargeTriggered="SUBSCRIPTION_USAGE_CHARGE_TRIGGERED",ue.SubscriptionUsageUpdated="SUBSCRIPTION_USAGE_UPDATED",ue.SyncFailed="SYNC_FAILED",ue.WidgetConfigurationUpdated="WIDGET_CONFIGURATION_UPDATED",(me=a.o_I||(a.o_I={})).CreatedAt="createdAt",me.EnvironmentId="environmentId",me.Id="id",me.Name="name",me.ProductId="productId",me.RefId="refId",me.Status="status",(Pe=a.bWm||(a.bWm={})).Completed="COMPLETED",Pe.Draft="DRAFT",Pe.InProgress="IN_PROGRESS",(oe=a.GAT||(a.GAT={})).CreatedAt="createdAt",oe.Description="description",oe.DisplayName="displayName",oe.EnvironmentId="environmentId",oe.FeatureStatus="featureStatus",oe.FeatureType="featureType",oe.Id="id",oe.MeterType="meterType",oe.RefId="refId",oe.UpdatedAt="updatedAt",(ve=a.iKc||(a.iKc={})).Active="ACTIVE",ve.New="NEW",ve.Suspended="SUSPENDED",(Y=a.Tex||(a.Tex={})).Boolean="BOOLEAN",Y.Number="NUMBER",(V=a.U9t||(a.U9t={})).Bold="BOLD",V.Normal="NORMAL",(K=a.uMn||(a.uMn={})).CreatedAt="createdAt",K.Endpoint="endpoint",K.EnvironmentId="environmentId",K.Id="id",K.Status="status",(ce=a.qBr||(a.qBr={})).Active="ACTIVE",ce.Inactive="INACTIVE",(Lr=a.B8X||(a.B8X={})).CreatedAt="createdAt",Lr.EnvironmentId="environmentId",Lr.Id="id",Lr.Status="status",Lr.TaskType="taskType",(kn=a.Us3||(a.Us3={})).CreatedAt="createdAt",kn.EnvironmentId="environmentId",kn.Id="id",kn.VendorIdentifier="vendorIdentifier",(mt=a.isD||(a.isD={})).AddonCharge="AddonCharge",mt.BaseCharge="BaseCharge",mt.InAdvanceCommitmentCharge="InAdvanceCommitmentCharge",mt.MinimumSpendAdjustmentCharge="MinimumSpendAdjustmentCharge",mt.MinimumSpendCharge="MinimumSpendCharge",mt.Other="Other",mt.OverageCharge="OverageCharge",mt.PayAsYouGoCharge="PayAsYouGoCharge",mt.TierCharge="TierCharge",mt.ZeroAmountBaseCharge="ZeroAmountBaseCharge",(Gn=a.Kyg||(a.Kyg={})).CreatedAt="createdAt",Gn.Id="id",(It=a.XY6||(a.XY6={})).Invited="INVITED",It.Registered="REGISTERED",(zt=a.puT||(a.puT={})).Fluctuating="Fluctuating",zt.Incremental="Incremental",zt.None="None",(ye=a.pSI||(a.pSI={})).StartOfTheMonth="StartOfTheMonth",ye.SubscriptionStart="SubscriptionStart",(qe=a.q5V||(a.q5V={})).Monthly="MONTHLY",qe.OnSubscriptionRenewal="ON_SUBSCRIPTION_RENEWAL",(it=a.zv6||(a.zv6={})).BillingId="billingId",it.CreatedAt="createdAt",it.Description="description",it.DisplayName="displayName",it.EnvironmentId="environmentId",it.Id="id",it.IsLatest="isLatest",it.PricingType="pricingType",it.ProductId="productId",it.RefId="refId",it.Status="status",it.UpdatedAt="updatedAt",it.VersionNumber="versionNumber",(Rn=a.iI3||(a.iI3={})).CreatedAt="createdAt",Rn.EnvironmentId="environmentId",Rn.Id="id",Rn.PackageId="packageId",Rn.UpdatedAt="updatedAt",(Rr=a.jCI||(a.jCI={})).CreatedAt="createdAt",Rr.DisplayName="displayName",Rr.EnvironmentId="environmentId",Rr.IsLatest="isLatest",Rr.PackageGroupId="packageGroupId",Rr.ProductId="productId",Rr.Status="status",Rr.UpdatedAt="updatedAt",Rr.VersionNumber="versionNumber",(rr=a.OeJ||(a.OeJ={})).Archived="ARCHIVED",rr.Draft="DRAFT",rr.Published="PUBLISHED",(ti=a.TVs||(a.TVs={})).Archived="ARCHIVED",ti.Draft="DRAFT",ti.Published="PUBLISHED",(Xr=a.QdX||(a.QdX={})).ActionRequired="ACTION_REQUIRED",Xr.Failed="FAILED",Xr.NotRequired="NOT_REQUIRED",Xr.Processing="PROCESSING",(Qr=a.Kf7||(a.Kf7={})).Charge="CHARGE",Qr.Invoice="INVOICE",Qr.None="NONE",(gn=a.LtK||(a.LtK={})).Bank="BANK",gn.Card="CARD",(le=a.Cc7||(a.Cc7={})).Downgrade="DOWNGRADE",le.None="NONE",le.Upgrade="UPGRADE",(_t=a.qXR||(a.qXR={})).BillingId="billingId",_t.CreatedAt="createdAt",_t.Description="description",_t.DisplayName="displayName",_t.EnvironmentId="environmentId",_t.Id="id",_t.IsLatest="isLatest",_t.PricingType="pricingType",_t.ProductId="productId",_t.RefId="refId",_t.Status="status",_t.UpdatedAt="updatedAt",_t.VersionNumber="versionNumber",(Yr=a.YGW||(a.YGW={})).BillingCadence="billingCadence",Yr.BillingId="billingId",Yr.BillingModel="billingModel",Yr.BillingPeriod="billingPeriod",Yr.CreatedAt="createdAt",Yr.Id="id",Yr.TiersMode="tiersMode",(Er=a._HY||(a._HY={})).Custom="CUSTOM",Er.Free="FREE",Er.Paid="PAID",(xr=a.p_C||(a.p_C={})).AwsMarketplaceProductCode="awsMarketplaceProductCode",xr.AwsMarketplaceProductId="awsMarketplaceProductId",xr.CreatedAt="createdAt",xr.Description="description",xr.DisplayName="displayName",xr.EnvironmentId="environmentId",xr.Id="id",xr.IsDefaultProduct="isDefaultProduct",xr.MultipleSubscriptions="multipleSubscriptions",xr.RefId="refId",xr.UpdatedAt="updatedAt",(Wt=a.JkE||(a.JkE={})).Custom="CUSTOM",Wt.Lifetime="LIFETIME",Wt.OneMonth="ONE_MONTH",Wt.OneWeek="ONE_WEEK",Wt.OneYear="ONE_YEAR",Wt.SixMonth="SIX_MONTH",(pr=a.ku9||(a.ku9={})).CreatedAt="createdAt",pr.EnvironmentId="environmentId",pr.Id="id",pr.Status="status",pr.UpdatedAt="updatedAt",(Kr=a.$Vq||(a.$Vq={})).Active="Active",Kr.Expired="Expired",Kr.Paused="Paused",(Or=a.QZw||(a.QZw={})).CreateProrations="CREATE_PRORATIONS",Or.InvoiceImmediately="INVOICE_IMMEDIATELY",(ur=a.u0j||(a.u0j={})).PaymentRequired="PAYMENT_REQUIRED",ur.Success="SUCCESS",(Mt=a.Zam||(a.Zam={})).AllCustomers="ALL_CUSTOMERS",Mt.NewCustomers="NEW_CUSTOMERS",(sr=a.nM6||(a.nM6={})).EndOfBillingMonth="END_OF_BILLING_MONTH",sr.EndOfBillingPeriod="END_OF_BILLING_PERIOD",sr.Immediate="IMMEDIATE",(Ir=a.SrV||(a.SrV={})).Asc="ASC",Ir.Desc="DESC",(Ar=a.Xm9||(a.Xm9={})).NullsFirst="NULLS_FIRST",Ar.NullsLast="NULLS_LAST",(At=a.PO0||(a.PO0={})).JsClientSdk="JS_CLIENT_SDK",At.NodeServerSdk="NODE_SERVER_SDK",At.PersistentCacheService="PERSISTENT_CACHE_SERVICE",(st=a.ueJ||(a.ueJ={})).CreatedAt="createdAt",st.Id="id",st.Quantity="quantity",st.UpdatedAt="updatedAt",(Be=a.w1y||(a.w1y={})).AutoCancellationRule="AutoCancellationRule",Be.CancelledByBilling="CancelledByBilling",Be.CustomerArchived="CustomerArchived",Be.DetachBilling="DetachBilling",Be.Expired="Expired",Be.Immediate="Immediate",Be.PendingPaymentExpired="PendingPaymentExpired",Be.ScheduledCancellation="ScheduledCancellation",Be.TrialConverted="TrialConverted",Be.TrialEnded="TrialEnded",Be.UpgradeOrDowngrade="UpgradeOrDowngrade",(we=a.c06||(a.c06={})).Default="DEFAULT",we.RevokeEntitlements="REVOKE_ENTITLEMENTS",(Ie=a.lS0||(a.lS0={})).EndOfBillingPeriod="END_OF_BILLING_PERIOD",Ie.Immediate="IMMEDIATE",Ie.SpecificDate="SPECIFIC_DATE",(ee=a.ird||(a.ird={})).PredefinedFreePlan="PREDEFINED_FREE_PLAN",ee.PredefinedTrialPlan="PREDEFINED_TRIAL_PLAN",ee.RequestedPlan="REQUESTED_PLAN",ee.SkippedSubscriptionCreation="SKIPPED_SUBSCRIPTION_CREATION",(ge=a._oj||(a._oj={})).CancelSubscription="CANCEL_SUBSCRIPTION",ge.DowngradeToFree="DOWNGRADE_TO_FREE",(J=a.e1Q||(a.e1Q={})).CreatedAt="createdAt",J.EnvironmentId="environmentId",J.Id="id",J.SubscriptionId="subscriptionId",J.UpdatedAt="updatedAt",($=a.tV1||(a.tV1={})).BillingCycle="BILLING_CYCLE",$.Manual="MANUAL",$.MinimumInvoiceAmountExceeded="MINIMUM_INVOICE_AMOUNT_EXCEEDED",$.Other="OTHER",$.SubscriptionCreation="SUBSCRIPTION_CREATION",$.SubscriptionUpdate="SUBSCRIPTION_UPDATE",(Ce=a.G6j||(a.G6j={})).Canceled="CANCELED",Ce.Open="OPEN",Ce.Paid="PAID",(Te=a.eSW||(a.eSW={})).CreatedAt="createdAt",Te.EnvironmentId="environmentId",Te.Id="id",Te.Status="status",Te.TaskType="taskType",(fe=a.DWP||(a.DWP={})).EndOfBillingPeriod="END_OF_BILLING_PERIOD",fe.Immediate="IMMEDIATE",(te=a.yBL||(a.yBL={})).BillingModel="billingModel",te.CreatedAt="createdAt",te.FeatureId="featureId",te.HasSoftLimit="hasSoftLimit",te.Id="id",te.UpdatedAt="updatedAt",te.UsageLimit="usageLimit",(re=a.cUf||(a.cUf={})).Canceled="Canceled",re.Done="Done",re.Failed="Failed",re.PendingPayment="PendingPayment",re.Scheduled="Scheduled",(H=a.YVG||(a.YVG={})).Addon="Addon",H.BillingPeriod="BillingPeriod",H.Downgrade="Downgrade",H.MigrateToLatest="MigrateToLatest",H.Plan="Plan",H.UnitAmount="UnitAmount",(j=a.nOi||(a.nOi={})).FreePlan="FREE_PLAN",j.PlanSelection="PLAN_SELECTION",j.TrialPeriod="TRIAL_PERIOD",(F=a.yhH||(a.yhH={})).Active="ACTIVE",F.Canceled="CANCELED",F.Expired="EXPIRED",F.InTrial="IN_TRIAL",F.NotStarted="NOT_STARTED",F.PaymentPending="PAYMENT_PENDING",(X=a.wRo||(a.wRo={})).Error="ERROR",X.NoSyncRequired="NO_SYNC_REQUIRED",X.Pending="PENDING",X.Success="SUCCESS",(G=a.hYU||(a.hYU={})).Canceled="CANCELED",G.Completed="COMPLETED",G.Failed="FAILED",G.InProgress="IN_PROGRESS",G.PartiallyFailed="PARTIALLY_FAILED",G.Pending="PENDING",(B=a.UAI||(a.UAI={})).ImportIntegrationCatalog="IMPORT_INTEGRATION_CATALOG",B.ImportIntegrationCustomers="IMPORT_INTEGRATION_CUSTOMERS",B.ImportSubscriptionsBulk="IMPORT_SUBSCRIPTIONS_BULK",B.RecalculateBatchEntitlements="RECALCULATE_BATCH_ENTITLEMENTS",B.RecalculateEntitlements="RECALCULATE_ENTITLEMENTS",B.ResyncIntegration="RESYNC_INTEGRATION",B.SubscriptionMigration="SUBSCRIPTION_MIGRATION",B.SubscriptionMigrationV2="SUBSCRIPTION_MIGRATION_V2",(k=a.PNd||(a.PNd={})).Graduated="GRADUATED",k.Volume="VOLUME",(x=a.p13||(a.p13={})).Day="DAY",x.Month="MONTH",(P=a.Dfv||(a.Dfv={})).Down="DOWN",P.Up="UP",(S=a.Buv||(a.Buv={})).CreatedAt="createdAt",S.EnvironmentId="environmentId",S.Id="id",(R=a._yy||(a._yy={})).Delta="DELTA",R.Set="SET",(w=a.FoD||(a.FoD={})).Auth0="AUTH0",w.AwsMarketplace="AWS_MARKETPLACE",w.BigQuery="BIG_QUERY",w.Hubspot="HUBSPOT",w.OpenFga="OPEN_FGA",w.Salesforce="SALESFORCE",w.Snowflake="SNOWFLAKE",w.Stripe="STRIPE",w.Zuora="ZUORA",(E=a.rCU||(a.rCU={})).EveryFriday="EveryFriday",E.EveryMonday="EveryMonday",E.EverySaturday="EverySaturday",E.EverySunday="EverySunday",E.EveryThursday="EveryThursday",E.EveryTuesday="EveryTuesday",E.EveryWednesday="EveryWednesday",E.SubscriptionStart="SubscriptionStart",(m=a.l9N||(a.l9N={})).Checkout="CHECKOUT",m.CustomerPortal="CUSTOMER_PORTAL",m.Paywall="PAYWALL",(a.EOH||(a.EOH={})).SubscriptionStart="SubscriptionStart",(u=a.zOd||(a.zOd={})).Control="CONTROL",u.Variant="VARIANT",a.cTO=p.default`
    fragment SlimSubscriptionFragmentV2 on CustomerSubscription {
  subscriptionId
  status
  pricingType
  startDate
  currentBillingPeriodEnd
  customer {
    customerId
  }
  payingCustomer {
    customerId
  }
  resource {
    resourceId
  }
  plan {
    planId: refId
    displayName
  }
  addons {
    quantity
    addon {
      addonId: refId
    }
  }
}
    `,a.bj8=p.default`
    fragment SlimCustomerFragment on Customer {
  id
  name
  email
  createdAt
  updatedAt
  refId
  customerId
  billingId
  additionalMetaData
  awsMarketplaceCustomerId
}
    `,a.zdd=p.default`
    fragment CouponFragment on Coupon {
  id
  discountValue
  type
  additionalMetaData
  refId
  name
  description
  createdAt
  updatedAt
  billingId
  billingLinkUrl
  status
  syncStates {
    vendorIdentifier
    status
  }
}
    `,a.Ehw=p.default`
    fragment PromotionalEntitlementFragment on PromotionalEntitlement {
  status
  usageLimit
  featureId
  hasUnlimitedUsage
  hasSoftLimit
  resetPeriod
  endDate
  isVisible
  feature {
    featureType
    meterType
    featureUnits
    featureUnitsPlural
    displayName
    description
    refId
    additionalMetaData
  }
}
    `,a.hk_=p.default`
    fragment CustomerFragment on Customer {
  ...SlimCustomerFragment
  hasPaymentMethod
  hasActiveSubscription
  defaultPaymentExpirationMonth
  defaultPaymentExpirationYear
  defaultPaymentMethodLast4Digits
  trialedPlans {
    productId
    productRefId
    planRefId
    planId
  }
  experimentInfo {
    groupType
    groupName
    id
    name
  }
  coupon {
    ...CouponFragment
  }
  eligibleForTrial {
    productId
    productRefId
    eligible
  }
  promotionalEntitlements {
    ...PromotionalEntitlementFragment
  }
}
    `,a.FL0=p.default`
    fragment SubscriptionInvoiceFragment on SubscriptionInvoice {
  billingId
  status
  createdAt
  updatedAt
  errorMessage
  requiresAction
  paymentSecret
  paymentUrl
  pdfUrl
  billingReason
  currency
  subTotal
  subTotalExcludingTax
  total
  totalExcludingTax
  tax
  amountDue
}
    `,a.OoB=p.default`
    fragment CustomerResourceFragment on CustomerResource {
  resourceId
}
    `,a.Chb=p.default`
    fragment PriceTierFragment on PriceTier {
  upTo
  unitPrice {
    amount
    currency
  }
  flatPrice {
    amount
    currency
  }
}
    `,a.wEB=p.default`
    fragment PriceFragment on Price {
  billingModel
  billingPeriod
  billingCadence
  billingId
  minUnitQuantity
  maxUnitQuantity
  billingCountryCode
  price {
    amount
    currency
  }
  tiersMode
  tiers {
    ...PriceTierFragment
  }
  feature {
    refId
    featureUnits
    featureUnitsPlural
    displayName
    description
  }
  blockSize
}
    `,a.N9N=p.default`
    fragment TotalPriceFragment on CustomerSubscriptionTotalPrice {
  subTotal {
    amount
    currency
  }
  total {
    amount
    currency
  }
}
    `,a.cMT=p.default`
    fragment ProductFragment on Product {
  refId
  displayName
  description
  additionalMetaData
  productSettings {
    downgradePlan {
      refId
      displayName
    }
  }
}
    `,a.RzF=p.default`
    fragment PackageEntitlementFragment on PackageEntitlement {
  usageLimit
  hasUnlimitedUsage
  hasSoftLimit
  featureId
  resetPeriod
  hiddenFromWidgets
  isCustom
  displayNameOverride
  feature {
    featureType
    meterType
    featureUnits
    featureUnitsPlural
    displayName
    description
    refId
    additionalMetaData
  }
}
    `,a.BoX=p.default`
    fragment OveragePriceFragment on Price {
  billingModel
  billingPeriod
  billingId
  billingCountryCode
  price {
    amount
    currency
  }
  tiersMode
  tiers {
    ...PriceTierFragment
  }
  feature {
    refId
    featureUnits
    featureUnitsPlural
    displayName
    description
  }
}
    `,a.T0E=p.default`
    fragment AddonDependencyFragment on Addon {
  id
  refId
  displayName
  description
}
    `,a.d4U=p.default`
    fragment AddonFragment on Addon {
  id
  refId
  billingId
  displayName
  description
  additionalMetaData
  entitlements {
    ...PackageEntitlementFragment
  }
  prices {
    ...PriceFragment
  }
  overagePrices {
    ...OveragePriceFragment
  }
  pricingType
  maxQuantity
  dependencies {
    ...AddonDependencyFragment
  }
}
    `,a.kd9=p.default`
    fragment PlanCompatiblePackageGroupsFragment on PlanCompatiblePackageGroups {
  packageGroupId
  displayName
  addons {
    ...AddonFragment
  }
  options {
    minItems
    freeItems
  }
}
    `,a.bOA=p.default`
    fragment PlanFragment on Plan {
  id
  refId
  displayName
  description
  billingId
  versionNumber
  additionalMetaData
  hiddenFromWidgets
  product {
    ...ProductFragment
  }
  basePlan {
    refId
    displayName
  }
  entitlements {
    ...PackageEntitlementFragment
  }
  inheritedEntitlements {
    ...PackageEntitlementFragment
  }
  compatibleAddons {
    ...AddonFragment
  }
  compatiblePackageGroups {
    ...PlanCompatiblePackageGroupsFragment
  }
  prices {
    ...PriceFragment
  }
  overagePrices {
    ...OveragePriceFragment
  }
  pricingType
  defaultTrialConfig {
    duration
    units
    budget {
      limit
    }
  }
}
    `,a.zWW=p.default`
    fragment ScheduleVariablesFragment on ScheduleVariables {
  __typename
  ... on PlanChangeVariables {
    planRefId
    changeType
    billingPeriod
    billableFeatures {
      featureId
      quantity
    }
    addons {
      addonRefId
      quantity
    }
  }
  ... on DowngradeChangeVariables {
    downgradePlanRefId
    billingPeriod
    billableFeatures {
      featureId
      quantity
    }
    addons {
      addonRefId
      quantity
    }
  }
  ... on BillingPeriodChangeVariables {
    billingPeriod
  }
  ... on UnitAmountChangeVariables {
    newUnitAmount
    featureId
  }
  ... on AddonChangeVariables {
    addonRefId
    newQuantity
  }
}
    `,a.J5K=p.default`
    fragment SubscriptionScheduledUpdateData on SubscriptionScheduledUpdate {
  subscriptionScheduleType
  scheduleStatus
  scheduledExecutionTime
  targetPackage {
    id
    refId
    displayName
  }
  scheduleVariables {
    ...ScheduleVariablesFragment
  }
}
    `,a.hvo=p.default`
    fragment SubscriptionFutureUpdateData on SubscriptionFutureUpdate {
  subscriptionScheduleType
  scheduleStatus
  scheduledExecutionTime
  targetPackage {
    id
    refId
    displayName
  }
  scheduleVariables {
    ...ScheduleVariablesFragment
  }
}
    `,a.Ugm=p.default`
    fragment SubscriptionFragment on CustomerSubscription {
  id
  subscriptionId
  payingCustomer {
    ...SlimCustomerFragment
  }
  startDate
  endDate
  trialEndDate
  cancellationDate
  effectiveEndDate
  status
  refId
  currentBillingPeriodEnd
  additionalMetaData
  billingId
  billingLinkUrl
  latestInvoice {
    ...SubscriptionInvoiceFragment
  }
  paymentCollection
  paymentCollectionMethod
  billingSyncError
  resource {
    ...CustomerResourceFragment
  }
  experimentInfo {
    name
    groupType
    groupName
    id
  }
  prices {
    usageLimit
    price {
      ...PriceFragment
    }
  }
  totalPrice {
    ...TotalPriceFragment
  }
  pricingType
  plan {
    ...PlanFragment
  }
  addons {
    id
    quantity
    addon {
      ...AddonFragment
    }
  }
  scheduledUpdates {
    ...SubscriptionScheduledUpdateData
  }
  futureUpdates {
    ...SubscriptionFutureUpdateData
  }
}
    `,a.GBW=p.default`
    fragment CustomerWithSubscriptionsFragment on Customer {
  ...CustomerFragment
  subscriptions {
    ...SubscriptionFragment
  }
}
    `,a.fYe=p.default`
    fragment CustomerStatisticsFragment on Customer {
  statistics {
    activeSubscriptionsByPricingType {
      pricingType
      totalCount
    }
  }
}
    `,a.zjf=p.default`
    fragment SubscriptionPreviewFragment on SubscriptionPreview {
  subTotal {
    amount
    currency
  }
  totalExcludingTax {
    amount
    currency
  }
  total {
    amount
    currency
  }
  discountAmount {
    amount
    currency
  }
  taxDetails {
    displayName
    percentage
    inclusive
  }
  tax {
    amount
    currency
  }
  billingPeriodRange {
    start
    end
  }
  discount {
    name
    type
    value
    durationType
    durationInMonths
  }
  subscription {
    subTotal {
      amount
      currency
    }
    totalExcludingTax {
      amount
      currency
    }
    total {
      amount
      currency
    }
    tax {
      amount
      currency
    }
    discountAmount {
      amount
      currency
    }
    taxDetails {
      displayName
      percentage
      inclusive
    }
    discount {
      name
      type
      value
      durationType
      durationInMonths
    }
  }
  proration {
    prorationDate
    credit {
      amount
      currency
    }
    debit {
      amount
      currency
    }
    netAmount {
      amount
      currency
    }
  }
  isPlanDowngrade
  hasScheduledUpdates
  credits {
    initial {
      amount
      currency
    }
    used {
      amount
      currency
    }
    remaining {
      amount
      currency
    }
  }
}
    `,a.DFP=p.default`
    fragment ImmediateSubscriptionPreviewInvoiceFragment on ImmediateSubscriptionPreviewInvoice {
  total {
    amount
    currency
  }
  subTotal {
    amount
    currency
  }
  totalExcludingTax {
    amount
    currency
  }
  tax {
    amount
    currency
  }
  discount {
    amount
    currency
  }
  taxDetails {
    displayName
    percentage
    inclusive
  }
  discountDetails {
    type
    value
    durationType
    durationInMonths
  }
  credits {
    initial {
      amount
      currency
    }
    used {
      amount
      currency
    }
    remaining {
      amount
      currency
    }
  }
  proration {
    prorationDate
    hasProrations
    credit {
      amount
      currency
    }
    debit {
      amount
      currency
    }
    netAmount {
      amount
      currency
    }
  }
}
    `,a.Eam=p.default`
    fragment SubscriptionPreviewInvoiceFragment on SubscriptionPreviewInvoice {
  total {
    amount
    currency
  }
  subTotal {
    amount
    currency
  }
  totalExcludingTax {
    amount
    currency
  }
  tax {
    amount
    currency
  }
  discount {
    amount
    currency
  }
  taxDetails {
    displayName
    percentage
    inclusive
  }
  discountDetails {
    type
    value
    durationType
    durationInMonths
  }
}
    `,a.URA=p.default`
    fragment SubscriptionPreviewV2Fragment on SubscriptionPreviewV2 {
  immediateInvoice {
    ...ImmediateSubscriptionPreviewInvoiceFragment
  }
  recurringInvoice {
    ...SubscriptionPreviewInvoiceFragment
  }
  billingPeriodRange {
    start
    end
  }
  isPlanDowngrade
  hasScheduledUpdates
}
    `,a.Dxn=p.default`
    fragment SubscriptionInvoicePreviewFragment on SubscriptionInvoicePreview {
  amountDue {
    amount
    currency
  }
  minimumSpendAdjustment {
    amount
    currency
  }
  total {
    amount
    currency
  }
  totalExcludingTax {
    amount
    currency
  }
  subTotal {
    amount
    currency
  }
  subTotalExcludingTax {
    amount
    currency
  }
  tax {
    amount
    currency
  }
  taxDetails {
    displayName
    percentage
    inclusive
  }
  discount {
    amount
    currency
  }
  discountDetails {
    name
    type
    value
    durationType
    durationInMonths
  }
  credits {
    initial {
      amount
      currency
    }
    used {
      amount
      currency
    }
    remaining {
      amount
      currency
    }
  }
  lastUpdatedAt
  lines {
    type
    description
    costDescription
    amount {
      amount
      currency
    }
    unitPrice {
      amount
      currency
    }
    quantity
    proration
    price {
      ...PriceFragment
    }
    usageLimit
    period {
      start
      end
    }
    hasSoftLimit
    lines {
      type
      description
      costDescription
      quantity
      proration
      usageLimit
      hasSoftLimit
    }
  }
}
    `,a.JyR=p.default`
    fragment ResetPeriodConfigurationFragment on ResetPeriodConfiguration {
  __typename
  ... on MonthlyResetPeriodConfig {
    monthlyAccordingTo
  }
  ... on WeeklyResetPeriodConfig {
    weeklyAccordingTo
  }
}
    `,a.o5f=p.default`
    fragment FeatureFragment on EntitlementFeature {
  __typename
  featureType
  meterType
  featureUnits
  featureUnitsPlural
  description
  displayName
  refId
  unitTransformation {
    divide
    round
  }
}
    `,a.cUI=p.default`
    fragment EntitlementFragment on Entitlement {
  __typename
  isGranted
  accessDeniedReason
  customerId
  resourceId
  usageLimit
  hasUnlimitedUsage
  hasSoftLimit
  currentUsage
  requestedUsage
  entitlementUpdatedAt
  usageUpdatedAt
  nextResetDate
  resetPeriod
  resetPeriodConfiguration {
    ...ResetPeriodConfigurationFragment
  }
  feature {
    ...FeatureFragment
  }
}
    `,a.bII=p.default`
    fragment EntitlementsUpdatedPayload on EntitlementsUpdated {
  customerId
  resourceId
  entitlements {
    ...EntitlementFragment
  }
}
    `,a.l3m=p.default`
    fragment UsageUpdatedFragment on UsageMeasurementUpdated {
  customerId
  resourceId
  featureId
  currentUsage
  nextResetDate
}
    `,a.cG4=p.default`
    fragment EntitlementUsageUpdated on UsageUpdated {
  usage {
    ...UsageUpdatedFragment
  }
  entitlement {
    ...EntitlementFragment
  }
}
    `,a.ab2=p.default`
    fragment PackagePublishedPayload on PackagePublished {
  accountId
  environmentId
  packageType
  packageRefId
  packageVersion
  migrationType
}
    `,a.qYx=p.default`
    fragment CustomerPortalSubscriptionPriceFragment on CustomerPortalSubscriptionPrice {
  billingPeriod
  billingModel
  price {
    amount
    currency
  }
  feature {
    id
    refId
    displayName
    featureUnits
    featureUnitsPlural
  }
}
    `,a.aqW=p.default`
    fragment CustomerPortalSubscriptionAddonFragment on CustomerPortalAddon {
  addonId
  description
  displayName
  quantity
}
    `,a.X$1=p.default`
    fragment CustomerPortalSubscriptionScheduledUpdateDataFragment on SubscriptionScheduledUpdate {
  subscriptionScheduleType
  scheduleStatus
  scheduledExecutionTime
  targetPackage {
    id
    refId
    displayName
    pricingType
  }
  scheduleVariables {
    ...ScheduleVariablesFragment
  }
}
    `,a.LBz=p.default`
    fragment CustomerPortalSubscriptionFragment on CustomerPortalSubscription {
  subscriptionId
  planId
  planName
  pricingType
  prices {
    ...CustomerPortalSubscriptionPriceFragment
  }
  pricing {
    unitQuantity
    billingPeriod
    billingModel
    pricingType
    usageBasedEstimatedBill
    price {
      amount
      currency
    }
    feature {
      featureUnits
      featureUnitsPlural
      displayName
    }
  }
  status
  trialRemainingDays
  billingPeriodRange {
    start
    end
  }
  totalPrice {
    subTotal {
      amount
      currency
    }
    total {
      amount
      currency
    }
    addonsTotal {
      amount
      currency
    }
  }
  addons {
    ...CustomerPortalSubscriptionAddonFragment
  }
  scheduledUpdates {
    ...CustomerPortalSubscriptionScheduledUpdateDataFragment
  }
}
    `,a.Eph=p.default`
    fragment CustomerPortalEntitlementFragment on Entitlement {
  isGranted
  usageLimit
  currentUsage
  hasUnlimitedUsage
  hasSoftLimit
  nextResetDate
  resetPeriod
  resetPeriodConfiguration {
    ...ResetPeriodConfigurationFragment
  }
  feature {
    ...FeatureFragment
  }
}
    `,a.u9g=p.default`
    fragment CustomerPortalPromotionalEntitlementFragment on CustomerPortalPromotionalEntitlement {
  displayName
  hasUnlimitedUsage
  hasSoftLimit
  usageLimit
  period
  startDate
  endDate
}
    `,a._d$=p.default`
    fragment CustomerPortalBillingInformationFragment on CustomerPortalBillingInformation {
  email
  name
  defaultPaymentMethodLast4Digits
  defaultPaymentMethodId
  defaultPaymentExpirationMonth
  defaultPaymentExpirationYear
}
    `,a.XsQ=p.default`
    fragment FontVariantFragment on FontVariant {
  fontSize
  fontWeight
}
    `,a.mGS=p.default`
    fragment TypographyConfigurationFragment on TypographyConfiguration {
  fontFamily
  h1 {
    ...FontVariantFragment
  }
  h2 {
    ...FontVariantFragment
  }
  h3 {
    ...FontVariantFragment
  }
  body {
    ...FontVariantFragment
  }
}
    `,a.NSU=p.default`
    fragment CustomerPortalConfigurationFragment on CustomerPortalConfiguration {
  palette {
    primary
    textColor
    backgroundColor
    borderColor
    currentPlanBackground
    iconsColor
    paywallBackgroundColor
  }
  typography {
    ...TypographyConfigurationFragment
  }
  customCss
}
    `,a.g31=p.default`
    fragment CustomerPortalFragment on CustomerPortal {
  subscriptions {
    ...CustomerPortalSubscriptionFragment
  }
  entitlements {
    ...CustomerPortalEntitlementFragment
  }
  promotionalEntitlements {
    ...CustomerPortalPromotionalEntitlementFragment
  }
  billingInformation {
    ...CustomerPortalBillingInformationFragment
  }
  showWatermark
  billingPortalUrl
  canUpgradeSubscription
  configuration {
    ...CustomerPortalConfigurationFragment
  }
  resource {
    ...CustomerResourceFragment
  }
}
    `,a.bEP=p.default`
    fragment CheckoutConfigurationFragment on CheckoutConfiguration {
  palette {
    primary
    textColor
    backgroundColor
    borderColor
    summaryBackgroundColor
    __typename
  }
  typography {
    ...TypographyConfigurationFragment
    __typename
  }
  customCss
  content {
    collectPhoneNumber
  }
  __typename
}
    `,a.weZ=p.default`
    fragment CheckoutStateFragment on CheckoutState {
  configuration {
    ...CheckoutConfigurationFragment
  }
  setupSecret
  customer {
    ...CustomerFragment
  }
  activeSubscription {
    ...SubscriptionFragment
  }
  resource {
    ...CustomerResourceFragment
  }
  plan {
    ...PlanFragment
  }
  billingIntegration {
    billingIdentifier
    credentials {
      accountId
      publicKey
    }
  }
}
    `,a.k8_=p.default`
    fragment MockPaywallPackageEntitlementFragment on Entitlement {
  usageLimit
  hasUnlimitedUsage
  hasSoftLimit
  resetPeriod
  hiddenFromWidgets
  displayNameOverride
  feature {
    featureType
    meterType
    featureUnits
    featureUnitsPlural
    displayName
    description
    refId
    additionalMetaData
  }
}
    `,a.VeJ=p.default`
    fragment MockPaywallPriceFragment on PaywallPrice {
  billingModel
  billingPeriod
  billingId
  minUnitQuantity
  maxUnitQuantity
  billingCountryCode
  price {
    amount
    currency
  }
  tiersMode
  tiers {
    ...PriceTierFragment
  }
  feature {
    refId
    featureUnits
    featureUnitsPlural
    displayName
  }
  blockSize
}
    `,a.$Bh=p.default`
    fragment MockPaywallAddonDependencyFragment on PaywallAddon {
  refId
  displayName
  description
}
    `,a.hVT=p.default`
    fragment MockPaywallAddonFragment on PaywallAddon {
  refId
  displayName
  description
  additionalMetaData
  billingId
  maxQuantity
  dependencies {
    ...MockPaywallAddonDependencyFragment
  }
  entitlements {
    ...MockPaywallPackageEntitlementFragment
  }
  prices {
    ...MockPaywallPriceFragment
  }
  pricingType
}
    `,a.wn5=p.default`
    fragment MockPaywallPlanCompatiblePackageGroupsFragment on PaywallPlanCompatiblePackageGroup {
  packageGroupId
  displayName
  description
  addons {
    ...MockPaywallAddonFragment
  }
  options {
    minItems
    freeItems
  }
}
    `,a.lgL=p.default`
    fragment MockPaywallPlanFragment on PaywallPlan {
  refId
  description
  displayName
  billingId
  additionalMetaData
  product {
    refId
    displayName
    description
    additionalMetaData
  }
  basePlan {
    refId
    displayName
  }
  entitlements {
    ...MockPaywallPackageEntitlementFragment
  }
  inheritedEntitlements {
    ...MockPaywallPackageEntitlementFragment
  }
  prices {
    ...MockPaywallPriceFragment
  }
  pricingType
  defaultTrialConfig {
    duration
    units
    budget {
      limit
    }
  }
  compatibleAddons {
    ...MockPaywallAddonFragment
  }
  compatiblePackageGroups {
    ...MockPaywallPlanCompatiblePackageGroupsFragment
  }
}
    `,a.FcI=p.default`
    fragment PaywallCurrencyFragment on PaywallCurrency {
  code
  symbol
}
    `,a.nN6=p.default`
    fragment LayoutConfigurationFragment on PaywallLayoutConfiguration {
  alignment
  planWidth
  planMargin
  planPadding
}
    `,a.r4r=p.default`
    fragment PaywallConfigurationFragment on PaywallConfiguration {
  palette {
    primary
    textColor
    backgroundColor
    borderColor
    currentPlanBackground
  }
  typography {
    ...TypographyConfigurationFragment
  }
  layout {
    ...LayoutConfigurationFragment
  }
  customCss
}
    `,a.fvX=p.default`
    fragment PaywallCalculatedPricePointsFragment on PaywallPricePoint {
  planId
  additionalChargesMayApply
  billingPeriod
  amount
  currency
  billingCountryCode
  feature {
    refId
    featureUnits
    featureUnitsPlural
    displayName
    description
  }
}
    `,a.qw4=p.default`
    fragment PaywallFragment on Paywall {
  plans {
    ...PlanFragment
  }
  currency {
    ...PaywallCurrencyFragment
  }
  configuration {
    ...PaywallConfigurationFragment
  }
  customer {
    ...CustomerFragment
  }
  activeSubscriptions {
    ...SubscriptionFragment
  }
  resource {
    ...CustomerResourceFragment
  }
  paywallCalculatedPricePoints {
    ...PaywallCalculatedPricePointsFragment
  }
}
    `,a.QNm=p.default`
    fragment UsageHistoryFragment on UsageHistory {
  startDate
  endDate
  usageMeasurements {
    date
    value
    isResetPoint
  }
  groups {
    groupInfo {
      key
      value
    }
    usageMeasurements {
      date
      value
      isResetPoint
    }
  }
}
    `,a.bGH=p.default`
    fragment SlimSubscriptionFragment on CustomerSubscription {
  id
  subscriptionId
  refId
  status
  additionalMetaData
  billingId
  billingLinkUrl
  effectiveEndDate
  currentBillingPeriodEnd
  pricingType
  latestInvoice {
    ...SubscriptionInvoiceFragment
  }
  paymentCollection
  billingSyncError
  resource {
    ...CustomerResourceFragment
  }
  experimentInfo {
    name
    id
    groupType
    groupName
  }
  prices {
    usageLimit
    price {
      ...PriceFragment
    }
  }
  totalPrice {
    ...TotalPriceFragment
  }
  plan {
    id
    refId
  }
  addons {
    quantity
    addon {
      id
      refId
    }
  }
  customer {
    id
    refId
  }
}
    `,a.YlF=p.default`
    fragment ProvisionCustomerFragment on ProvisionedCustomer {
  customer {
    ...SlimCustomerFragment
  }
  subscriptionDecisionStrategy
  subscription {
    ...SlimSubscriptionFragment
  }
  entitlements {
    ...EntitlementFragment
  }
}
    `,a.Y92=p.default`
    fragment ApplySubscriptionFragment on ApplySubscription {
  subscription {
    ...SubscriptionFragment
  }
  entitlements {
    ...EntitlementFragment
  }
}
    `,a.CjA=p.default`
    fragment ProvisionSubscriptionFragment on ProvisionSubscriptionResult {
  status
  checkoutUrl
  checkoutBillingId
  subscription {
    ...SlimSubscriptionFragment
  }
  entitlements {
    ...EntitlementFragment
  }
}
    `,a.UK7=p.default`
    fragment ReportUsageFragment on UsageMeasurementWithCurrentUsage {
  id
  featureId
  customerId
  resourceId
  currentUsage
  nextResetDate
  timestamp
}
    `,a.q6C=p.default`
    mutation ProvisionCustomer($input: ProvisionCustomerInput!) {
  provisionCustomer(input: $input) {
    ...ProvisionCustomerFragment
  }
}
    ${a.YlF}
${a.bj8}
${a.bGH}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}
${a.cUI}
${a.JyR}
${a.o5f}`,a.m76=p.default`
    mutation ImportCustomerBulk($input: ImportCustomerBulkInput!) {
  importCustomersBulk(input: $input)
}
    `,a.$jJ=p.default`
    mutation ImportCustomer($input: ImportCustomerInput!) {
  importCustomer: importOneCustomer(input: $input) {
    ...SlimCustomerFragment
  }
}
    ${a.bj8}`,a.eKV=p.default`
    mutation UpdateCustomer($input: UpdateCustomerInput!) {
  updateCustomer: updateOneCustomer(input: $input) {
    ...SlimCustomerFragment
  }
}
    ${a.bj8}`,a.Wky=p.default`
    mutation DetachCustomerPaymentMethod($input: DetachCustomerPaymentMethodInput!) {
  detachCustomerPaymentMethod(input: $input) {
    ...SlimCustomerFragment
  }
}
    ${a.bj8}`,a.Mal=p.default`
    mutation GrantPromotionalEntitlements($input: GrantPromotionalEntitlementsInput!) {
  grantPromotionalEntitlements(input: $input) {
    ...PromotionalEntitlementFragment
  }
}
    ${a.Ehw}`,a.GHz=p.default`
    mutation RevokePromotionalEntitlement($input: RevokePromotionalEntitlementInput!) {
  revokePromotionalEntitlement(input: $input) {
    id
  }
}
    `,a.rDA=p.default`
    mutation ProvisionSubscription($input: ProvisionSubscriptionInput!) {
  provisionSubscription: provisionSubscriptionV2(input: $input) {
    ...ProvisionSubscriptionFragment
  }
}
    ${a.CjA}
${a.bGH}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}
${a.cUI}
${a.JyR}
${a.o5f}`,a.Bkk=p.default`
    mutation ApplySubscription($input: ApplySubscriptionInput!) {
  applySubscription(input: $input) {
    ...ApplySubscriptionFragment
  }
}
    ${a.Y92}
${a.Ugm}
${a.bj8}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}
${a.bOA}
${a.cMT}
${a.RzF}
${a.d4U}
${a.BoX}
${a.T0E}
${a.kd9}
${a.J5K}
${a.zWW}
${a.hvo}
${a.cUI}
${a.JyR}
${a.o5f}`,a.N5j=p.default`
    mutation ImportSubscriptionsBulk($input: ImportSubscriptionsBulkInput!) {
  importSubscriptionsBulk(input: $input)
}
    `,a.EQD=p.default`
    mutation UpdateSubscription($input: UpdateSubscriptionInput!) {
  updateSubscription: updateOneSubscription(input: $input) {
    ...SlimSubscriptionFragment
  }
}
    ${a.bGH}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}`,a.x3v=p.default`
    mutation CancelSubscription($input: SubscriptionCancellationInput!) {
  cancelSubscription(input: $input) {
    ...SlimSubscriptionFragment
  }
}
    ${a.bGH}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}`,a.m5b=p.default`
    mutation EstimateSubscription($input: EstimateSubscriptionInput!) {
  estimateSubscription(input: $input) {
    ...SubscriptionPreviewFragment
  }
}
    ${a.zjf}`,a.wO5=p.default`
    mutation EstimateSubscriptionUpdate($input: EstimateSubscriptionUpdateInput!) {
  estimateSubscriptionUpdate(input: $input) {
    ...SubscriptionPreviewFragment
  }
}
    ${a.zjf}`,a.ZD9=p.default`
    mutation PreviewSubscription($input: PreviewSubscriptionInput!) {
  previewSubscription(input: $input) {
    ...SubscriptionPreviewV2Fragment
  }
}
    ${a.URA}
${a.DFP}
${a.Eam}`,a.yGq=p.default`
    mutation PreviewNextInvoice($input: PreviewNextInvoiceInput!) {
  previewNextInvoice(input: $input) {
    ...SubscriptionInvoicePreviewFragment
  }
}
    ${a.Dxn}
${a.wEB}
${a.Chb}`,a.jAf=p.default`
    mutation CancelSubscriptionUpdates($input: SubscriptionUpdateScheduleCancellationInput!) {
  cancelSchedule(input: $input)
}
    `,a.K5h=p.default`
    mutation ReportUsage($input: ReportUsageInput!) {
  reportUsage(input: $input) {
    ...ReportUsageFragment
  }
}
    ${a.UK7}`,a.dO5=p.default`
    mutation ReportUsageBulk($input: ReportUsageBulkInput!) {
  reportUsageBulk(input: $input) {
    ...ReportUsageFragment
  }
}
    ${a.UK7}`,a.ZSL=p.default`
    mutation ReportEvent($input: UsageEventsReportInput!) {
  reportEvent(events: $input)
}
    `,a.JDz=p.default`
    mutation ReportEntitlementCheckRequested($entitlementCheckRequested: EntitlementCheckRequested!) {
  reportEntitlementCheckRequested(
    entitlementCheckRequested: $entitlementCheckRequested
  )
}
    `,a.WJn=p.default`
    mutation CreateSubscription($input: SubscriptionInput!) {
  createSubscription(subscription: $input) {
    ...SlimSubscriptionFragment
  }
}
    ${a.bGH}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}`,a.bGN=p.default`
    mutation MigrateSubscriptionToLatest($input: SubscriptionMigrationInput!) {
  migrateSubscriptionToLatest(input: $input) {
    subscriptionId
  }
}
    `,a.m06=p.default`
    mutation ArchiveCustomer($input: ArchiveCustomerInput!) {
  archiveCustomer(input: $input) {
    customerId
  }
}
    `,a._gQ=p.default`
    mutation UnarchiveCustomer($input: UnarchiveCustomerInput!) {
  unarchiveCustomer(input: $input) {
    ...SlimCustomerFragment
  }
}
    ${a.bj8}`,a.$02=p.default`
    mutation TransferSubscription($input: TransferSubscriptionInput!) {
  transferSubscription(input: $input) {
    ...SlimSubscriptionFragment
  }
}
    ${a.bGH}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}`,a.ZeH=p.default`
    query GetCustomerById($input: GetCustomerByRefIdInput!) {
  getCustomerByRefId(input: $input) {
    ...CustomerWithSubscriptionsFragment
  }
}
    ${a.GBW}
${a.hk_}
${a.bj8}
${a.zdd}
${a.Ehw}
${a.Ugm}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}
${a.bOA}
${a.cMT}
${a.RzF}
${a.d4U}
${a.BoX}
${a.T0E}
${a.kd9}
${a.J5K}
${a.zWW}
${a.hvo}`,a.TpL=p.default`
    query GetCustomerStatistics($input: GetCustomerByRefIdInput!) {
  getCustomerByRefId(input: $input) {
    ...CustomerStatisticsFragment
  }
}
    ${a.fYe}`,a.OpC=p.default`
    query GetActiveSubscriptions($input: GetActiveSubscriptionsInput!) {
  getActiveSubscriptions(input: $input) {
    ...SubscriptionFragment
  }
}
    ${a.Ugm}
${a.bj8}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}
${a.bOA}
${a.cMT}
${a.RzF}
${a.d4U}
${a.BoX}
${a.T0E}
${a.kd9}
${a.J5K}
${a.zWW}
${a.hvo}`,a.bgy=p.default`
    query GetActiveSubscriptionsList($input: GetActiveSubscriptionsInput!) {
  getActiveSubscriptions(input: $input) {
    ...SlimSubscriptionFragmentV2
  }
}
    ${a.cTO}`,a.do1=p.default`
    query GetSubscription($input: GetSubscriptionInput!) {
  getSubscription(input: $input) {
    ...SubscriptionFragment
  }
}
    ${a.Ugm}
${a.bj8}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}
${a.bOA}
${a.cMT}
${a.RzF}
${a.d4U}
${a.BoX}
${a.T0E}
${a.kd9}
${a.J5K}
${a.zWW}
${a.hvo}`,a.Q$1=p.default`
    query GetCoupons {
  coupons(filter: {status: {eq: ACTIVE}}, paging: {first: 50}) {
    edges {
      node {
        ...CouponFragment
      }
    }
  }
}
    ${a.zdd}`,a.RVX=p.default`
    query GetPaywall($input: GetPaywallInput!) {
  paywall(input: $input) {
    ...PaywallFragment
  }
}
    ${a.qw4}
${a.bOA}
${a.cMT}
${a.RzF}
${a.d4U}
${a.wEB}
${a.Chb}
${a.BoX}
${a.T0E}
${a.kd9}
${a.FcI}
${a.r4r}
${a.mGS}
${a.XsQ}
${a.nN6}
${a.hk_}
${a.bj8}
${a.zdd}
${a.Ehw}
${a.Ugm}
${a.FL0}
${a.OoB}
${a.N9N}
${a.J5K}
${a.zWW}
${a.hvo}
${a.fvX}`,a.roX=p.default`
    query GetEntitlements($query: FetchEntitlementsQuery!) {
  entitlements: cachedEntitlements(query: $query) {
    ...EntitlementFragment
  }
}
    ${a.cUI}
${a.JyR}
${a.o5f}`,a.pWb=p.default`
    query GetEntitlement($query: FetchEntitlementQuery!) {
  entitlement(query: $query) {
    ...EntitlementFragment
  }
}
    ${a.cUI}
${a.JyR}
${a.o5f}`,a.Fd7=p.default`
    query GetProducts {
  products(paging: {first: 50}) {
    edges {
      node {
        ...ProductFragment
      }
    }
  }
}
    ${a.cMT}`,a.N9K=p.default`
    query GetSdkConfiguration {
  sdkConfiguration {
    sentryDsn
    isWidgetWatermarkEnabled
  }
}
    `,a.$Av=p.default`
    query GetCustomerPortalByRefId($input: CustomerPortalInput!) {
  customerPortal(input: $input) {
    ...CustomerPortalFragment
  }
}
    ${a.g31}
${a.LBz}
${a.qYx}
${a.aqW}
${a.X$1}
${a.zWW}
${a.Eph}
${a.JyR}
${a.o5f}
${a.u9g}
${a._d$}
${a.NSU}
${a.mGS}
${a.XsQ}
${a.OoB}`,a.jPD=p.default`
    query GetCheckoutState($input: CheckoutStateInput!) {
  checkoutState(input: $input) {
    ...CheckoutStateFragment
  }
}
    ${a.weZ}
${a.bEP}
${a.mGS}
${a.XsQ}
${a.hk_}
${a.bj8}
${a.zdd}
${a.Ehw}
${a.Ugm}
${a.FL0}
${a.OoB}
${a.wEB}
${a.Chb}
${a.N9N}
${a.bOA}
${a.cMT}
${a.RzF}
${a.d4U}
${a.BoX}
${a.T0E}
${a.kd9}
${a.J5K}
${a.zWW}
${a.hvo}`,a._xu=p.default`
    query GetMockPaywall($input: GetPaywallInput!) {
  mockPaywall(input: $input) {
    plans {
      ...MockPaywallPlanFragment
    }
    configuration {
      ...PaywallConfigurationFragment
    }
  }
}
    ${a.lgL}
${a.k8_}
${a.VeJ}
${a.Chb}
${a.hVT}
${a.$Bh}
${a.wn5}
${a.r4r}
${a.mGS}
${a.XsQ}
${a.nN6}`,a.K0T=p.default`
    query GetUsageHistory($usageHistoryInput: UsageHistoryInput!) {
  usageHistory(usageHistoryInput: $usageHistoryInput) {
    ...UsageHistoryFragment
  }
}
    ${a.QNm}`,a.Bve=p.default`
    subscription OnEntitlementsUpdated {
  entitlementsUpdated {
    ...EntitlementsUpdatedPayload
  }
}
    ${a.bII}
${a.cUI}
${a.JyR}
${a.o5f}`,a.LpH=p.default`
    subscription OnUsageUpdated {
  usageUpdated {
    ...EntitlementUsageUpdated
  }
}
    ${a.cG4}
${a.l3m}
${a.cUI}
${a.JyR}
${a.o5f}`,a.zBW=p.default`
    subscription OnPackagePublished {
  packagePublished {
    ...PackagePublishedPayload
  }
}
    ${a.ab2}`;const _d=($e,Fe,Ne)=>$e();a.mKo=function($e,Fe=_d){return{ProvisionCustomer:(Ne,Oe)=>Fe(De=>$e.request(a.q6C,Ne,Object.assign(Object.assign({},Oe),De)),"ProvisionCustomer","mutation"),ImportCustomerBulk:(Ne,Oe)=>Fe(De=>$e.request(a.m76,Ne,Object.assign(Object.assign({},Oe),De)),"ImportCustomerBulk","mutation"),ImportCustomer:(Ne,Oe)=>Fe(De=>$e.request(a.$jJ,Ne,Object.assign(Object.assign({},Oe),De)),"ImportCustomer","mutation"),UpdateCustomer:(Ne,Oe)=>Fe(De=>$e.request(a.eKV,Ne,Object.assign(Object.assign({},Oe),De)),"UpdateCustomer","mutation"),DetachCustomerPaymentMethod:(Ne,Oe)=>Fe(De=>$e.request(a.Wky,Ne,Object.assign(Object.assign({},Oe),De)),"DetachCustomerPaymentMethod","mutation"),GrantPromotionalEntitlements:(Ne,Oe)=>Fe(De=>$e.request(a.Mal,Ne,Object.assign(Object.assign({},Oe),De)),"GrantPromotionalEntitlements","mutation"),RevokePromotionalEntitlement:(Ne,Oe)=>Fe(De=>$e.request(a.GHz,Ne,Object.assign(Object.assign({},Oe),De)),"RevokePromotionalEntitlement","mutation"),ProvisionSubscription:(Ne,Oe)=>Fe(De=>$e.request(a.rDA,Ne,Object.assign(Object.assign({},Oe),De)),"ProvisionSubscription","mutation"),ApplySubscription:(Ne,Oe)=>Fe(De=>$e.request(a.Bkk,Ne,Object.assign(Object.assign({},Oe),De)),"ApplySubscription","mutation"),ImportSubscriptionsBulk:(Ne,Oe)=>Fe(De=>$e.request(a.N5j,Ne,Object.assign(Object.assign({},Oe),De)),"ImportSubscriptionsBulk","mutation"),UpdateSubscription:(Ne,Oe)=>Fe(De=>$e.request(a.EQD,Ne,Object.assign(Object.assign({},Oe),De)),"UpdateSubscription","mutation"),CancelSubscription:(Ne,Oe)=>Fe(De=>$e.request(a.x3v,Ne,Object.assign(Object.assign({},Oe),De)),"CancelSubscription","mutation"),EstimateSubscription:(Ne,Oe)=>Fe(De=>$e.request(a.m5b,Ne,Object.assign(Object.assign({},Oe),De)),"EstimateSubscription","mutation"),EstimateSubscriptionUpdate:(Ne,Oe)=>Fe(De=>$e.request(a.wO5,Ne,Object.assign(Object.assign({},Oe),De)),"EstimateSubscriptionUpdate","mutation"),PreviewSubscription:(Ne,Oe)=>Fe(De=>$e.request(a.ZD9,Ne,Object.assign(Object.assign({},Oe),De)),"PreviewSubscription","mutation"),PreviewNextInvoice:(Ne,Oe)=>Fe(De=>$e.request(a.yGq,Ne,Object.assign(Object.assign({},Oe),De)),"PreviewNextInvoice","mutation"),CancelSubscriptionUpdates:(Ne,Oe)=>Fe(De=>$e.request(a.jAf,Ne,Object.assign(Object.assign({},Oe),De)),"CancelSubscriptionUpdates","mutation"),ReportUsage:(Ne,Oe)=>Fe(De=>$e.request(a.K5h,Ne,Object.assign(Object.assign({},Oe),De)),"ReportUsage","mutation"),ReportUsageBulk:(Ne,Oe)=>Fe(De=>$e.request(a.dO5,Ne,Object.assign(Object.assign({},Oe),De)),"ReportUsageBulk","mutation"),ReportEvent:(Ne,Oe)=>Fe(De=>$e.request(a.ZSL,Ne,Object.assign(Object.assign({},Oe),De)),"ReportEvent","mutation"),ReportEntitlementCheckRequested:(Ne,Oe)=>Fe(De=>$e.request(a.JDz,Ne,Object.assign(Object.assign({},Oe),De)),"ReportEntitlementCheckRequested","mutation"),CreateSubscription:(Ne,Oe)=>Fe(De=>$e.request(a.WJn,Ne,Object.assign(Object.assign({},Oe),De)),"CreateSubscription","mutation"),MigrateSubscriptionToLatest:(Ne,Oe)=>Fe(De=>$e.request(a.bGN,Ne,Object.assign(Object.assign({},Oe),De)),"MigrateSubscriptionToLatest","mutation"),ArchiveCustomer:(Ne,Oe)=>Fe(De=>$e.request(a.m06,Ne,Object.assign(Object.assign({},Oe),De)),"ArchiveCustomer","mutation"),UnarchiveCustomer:(Ne,Oe)=>Fe(De=>$e.request(a._gQ,Ne,Object.assign(Object.assign({},Oe),De)),"UnarchiveCustomer","mutation"),TransferSubscription:(Ne,Oe)=>Fe(De=>$e.request(a.$02,Ne,Object.assign(Object.assign({},Oe),De)),"TransferSubscription","mutation"),GetCustomerById:(Ne,Oe)=>Fe(De=>$e.request(a.ZeH,Ne,Object.assign(Object.assign({},Oe),De)),"GetCustomerById","query"),GetCustomerStatistics:(Ne,Oe)=>Fe(De=>$e.request(a.TpL,Ne,Object.assign(Object.assign({},Oe),De)),"GetCustomerStatistics","query"),GetActiveSubscriptions:(Ne,Oe)=>Fe(De=>$e.request(a.OpC,Ne,Object.assign(Object.assign({},Oe),De)),"GetActiveSubscriptions","query"),GetActiveSubscriptionsList:(Ne,Oe)=>Fe(De=>$e.request(a.bgy,Ne,Object.assign(Object.assign({},Oe),De)),"GetActiveSubscriptionsList","query"),GetSubscription:(Ne,Oe)=>Fe(De=>$e.request(a.do1,Ne,Object.assign(Object.assign({},Oe),De)),"GetSubscription","query"),GetCoupons:(Ne,Oe)=>Fe(De=>$e.request(a.Q$1,Ne,Object.assign(Object.assign({},Oe),De)),"GetCoupons","query"),GetPaywall:(Ne,Oe)=>Fe(De=>$e.request(a.RVX,Ne,Object.assign(Object.assign({},Oe),De)),"GetPaywall","query"),GetEntitlements:(Ne,Oe)=>Fe(De=>$e.request(a.roX,Ne,Object.assign(Object.assign({},Oe),De)),"GetEntitlements","query"),GetEntitlement:(Ne,Oe)=>Fe(De=>$e.request(a.pWb,Ne,Object.assign(Object.assign({},Oe),De)),"GetEntitlement","query"),GetProducts:(Ne,Oe)=>Fe(De=>$e.request(a.Fd7,Ne,Object.assign(Object.assign({},Oe),De)),"GetProducts","query"),GetSdkConfiguration:(Ne,Oe)=>Fe(De=>$e.request(a.N9K,Ne,Object.assign(Object.assign({},Oe),De)),"GetSdkConfiguration","query"),GetCustomerPortalByRefId:(Ne,Oe)=>Fe(De=>$e.request(a.$Av,Ne,Object.assign(Object.assign({},Oe),De)),"GetCustomerPortalByRefId","query"),GetCheckoutState:(Ne,Oe)=>Fe(De=>$e.request(a.jPD,Ne,Object.assign(Object.assign({},Oe),De)),"GetCheckoutState","query"),GetMockPaywall:(Ne,Oe)=>Fe(De=>$e.request(a._xu,Ne,Object.assign(Object.assign({},Oe),De)),"GetMockPaywall","query"),GetUsageHistory:(Ne,Oe)=>Fe(De=>$e.request(a.K0T,Ne,Object.assign(Object.assign({},Oe),De)),"GetUsageHistory","query"),OnEntitlementsUpdated:(Ne,Oe)=>Fe(De=>$e.request(a.Bve,Ne,Object.assign(Object.assign({},Oe),De)),"OnEntitlementsUpdated","subscription"),OnUsageUpdated:(Ne,Oe)=>Fe(De=>$e.request(a.LpH,Ne,Object.assign(Object.assign({},Oe),De)),"OnUsageUpdated","subscription"),OnPackagePublished:(Ne,Oe)=>Fe(De=>$e.request(a.zBW,Ne,Object.assign(Object.assign({},Oe),De)),"OnPackagePublished","subscription")}}},5821:(i,a,l)=>{l.d(a,{Z:()=>m});var p=l(5695);function u(w){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},u(w)}function m(w){return E(w,[])}function E(w,R){switch(u(w)){case"string":return JSON.stringify(w);case"function":return w.name?"[function ".concat(w.name,"]"):"[function]";case"object":return w===null?"null":function(S,P){if(P.indexOf(S)!==-1)return"[Circular]";var x=[].concat(P,[S]),k=function(G){var X=G[String(p.Z)];return typeof X=="function"?X:typeof G.inspect=="function"?G.inspect:void 0}(S);if(k!==void 0){var B=k.call(S);if(B!==S)return typeof B=="string"?B:E(B,x)}else if(Array.isArray(S))return function(G,X){if(G.length===0)return"[]";if(X.length>2)return"[Array]";for(var F=Math.min(10,G.length),j=G.length-F,H=[],re=0;re<F;++re)H.push(E(G[re],X));return j===1?H.push("... 1 more item"):j>1&&H.push("... ".concat(j," more items")),"["+H.join(", ")+"]"}(S,x);return function(G,X){var F=Object.keys(G);return F.length===0?"{}":X.length>2?"["+function(j){var H=Object.prototype.toString.call(j).replace(/^\[object /,"").replace(/]$/,"");if(H==="Object"&&typeof j.constructor=="function"){var re=j.constructor.name;if(typeof re=="string"&&re!=="")return re}return H}(G)+"]":"{ "+F.map(function(j){return j+": "+E(G[j],X)}).join(", ")+" }"}(S,x)}(w,R);default:return String(w)}}},5695:(i,a,l)=>{l.d(a,{Z:()=>p});const p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0},5217:(i,a,l)=>{l.d(a,{Ye:()=>m,WU:()=>E,UG:()=>w});var p=l(5695);function u(R){var S=R.prototype.toJSON;typeof S=="function"||function(P,x){throw new Error("Unexpected invariant triggered.")}(),R.prototype.inspect=S,p.Z&&(R.prototype[p.Z]=S)}var m=function(){function R(S,P,x){this.start=S.start,this.end=P.end,this.startToken=S,this.endToken=P,this.source=x}return R.prototype.toJSON=function(){return{start:this.start,end:this.end}},R}();u(m);var E=function(){function R(S,P,x,k,B,G,X){this.kind=S,this.start=P,this.end=x,this.line=k,this.column=B,this.value=X,this.prev=G,this.next=null}return R.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},R}();function w(R){return R!=null&&typeof R.kind=="string"}u(E)},7392:(i,a,l)=>{function p(E){var w=E.split(/\r\n|[\n\r]/g),R=function(k){for(var B,G=!0,X=!0,F=0,j=null,H=0;H<k.length;++H)switch(k.charCodeAt(H)){case 13:k.charCodeAt(H+1)===10&&++H;case 10:G=!1,X=!0,F=0;break;case 9:case 32:++F;break;default:X&&!G&&(j===null||F<j)&&(j=F),X=!1}return(B=j)!==null&&B!==void 0?B:0}(E);if(R!==0)for(var S=1;S<w.length;S++)w[S]=w[S].slice(R);for(var P=0;P<w.length&&u(w[P]);)++P;for(var x=w.length;x>P&&u(w[x-1]);)--x;return w.slice(P,x).join(`
`)}function u(E){for(var w=0;w<E.length;++w)if(E[w]!==" "&&E[w]!=="	")return!1;return!0}function m(E){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",R=arguments.length>2&&arguments[2]!==void 0&&arguments[2],S=E.indexOf(`
`)===-1,P=E[0]===" "||E[0]==="	",x=E[E.length-1]==='"',k=E[E.length-1]==="\\",B=!S||x||k||R,G="";return!B||S&&P||(G+=`
`+w),G+=w?E.replace(/\n/g,`
`+w):E,B&&(G+=`
`),'"""'+G.replace(/"""/g,'\\"""')+'"""'}l.d(a,{W7:()=>p,LZ:()=>m})},143:(i,a,l)=>{l.d(a,{H:()=>w,T:()=>R});var p=l(9763),u=l(5821);function m(S,P){if(!S)throw new Error(P)}function E(S,P){for(var x=0;x<P.length;x++){var k=P[x];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(S,k.key,k)}}var w=function(){function S(k){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof k=="string"||m(0,"Body must be a string. Received: ".concat((0,u.Z)(k),".")),this.body=k,this.name=B,this.locationOffset=G,this.locationOffset.line>0||m(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||m(0,"column in locationOffset is 1-indexed and must be positive.")}var P,x;return P=S,(x=[{key:p.YF,get:function(){return"Source"}}])&&E(P.prototype,x),S}();function R(S){return S instanceof w}},9763:(i,a,l)=>{l.d(a,{YF:()=>p});var p=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag"},4147:i=>{i.exports=JSON.parse(`{"name":"@stigg/js-client-sdk","version":"3.25.0","description":"Stigg client-side SDK for Browser","main":"dist/index.js","typings":"dist/index.d.ts","repository":"https://github.com/stiggio/js-client-sdk.git","license":"MIT","scripts":{"start":"webpack serve","build:types":"tsc --emitDeclarationOnly","build":"yarn build:types && webpack","build:watch":"webpack --watch","build:prod":"yarn build:types && webpack --env production","fix":"run-s fix:*","fix:prettier":"prettier \\"src/**/*.ts\\" --write","fix:lint":"eslint src --ext .ts --fix","pretty-quick":"pretty-quick --staged --pattern '**/*.*(js|jsx|ts|tsx)'","test":"jest --silent","test:watch":"jest --watch","test:cov":"jest --coverage","prepare":"husky install","docs":"typedoc"},"files":["dist/**/*"],"dependencies":{"@apollo/client":"^3.4.17","@sentry/browser":"^7.11.1","@stigg/api-client-js":"2.129.0","cross-fetch":"^3.1.6","fetch-retry":"^5.0.6","husky":"^7.0.4","lint-staged":"^12.0.2","lodash":"^4.17.21","tiny-typed-emitter":"^2.1.0"},"devDependencies":{"@commitlint/cli":"^14.1.0","@commitlint/config-conventional":"^14.1.0","@mswjs/interceptors":"^0.19.2","@types/jest":"^27.0.2","@types/lodash":"^4.14.177","@typescript-eslint/eslint-plugin":"^5.4.0","@typescript-eslint/parser":"^5.4.0","eslint":"^8.2.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","jest":"^27.3.1","jest-fetch-mock":"^3.0.3","msw":"^0.35.0","npm-run-all":"^4.1.5","prettier":"^2.4.1","pretty-quick":"^3.1.3","ts-jest":"^27.0.7","ts-loader":"^9.2.6","typedoc":"^0.22.13","typedoc-plugin-rename-defaults":"^0.4.0","typescript":"^4.5.3","webpack":"^5.64.1","webpack-cli":"^4.9.1","webpack-dev-server":"^4.5.0"},"publishConfig":{"access":"public"},"lint-staged":{"*.{js,jsx,ts,tsx}":["prettier --check","eslint --cache"]}}`)}},n={};function o(i){var a=n[i];if(a!==void 0)return a.exports;var l=n[i]={id:i,loaded:!1,exports:{}};return t[i].call(l.exports,l,l.exports,o),l.loaded=!0,l.exports}return o.n=i=>{var a=i&&i.__esModule?()=>i.default:()=>i;return o.d(a,{a}),a},o.d=(i,a)=>{for(var l in a)o.o(a,l)&&!o.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:a[l]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.hmd=i=>((i=Object.create(i)).children||(i.children=[]),Object.defineProperty(i,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+i.id)}}),i),o.o=(i,a)=>Object.prototype.hasOwnProperty.call(i,a),o.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.nmd=i=>(i.paths=[],i.children||(i.children=[]),i),o(7249)})()})})(PA);var SW=PA.exports;const wW=Js(SW),C_=Qn("stiggService");class TW{constructor(){pe(this,"initPromise",null);pe(this,"onGetSubscriptionsMessage",async(e,t)=>{try{const n=await this.init(e);if(!n)throw new Error("Stigg client is not initialized");if(!e)throw new Error("User is not defined");await n.setCustomerId(e);const o=await n.getActiveSubscriptions();return t({isSuccessful:!0,data:o})}catch(n){return C_.emitLog({error:n,body:"StiggService.getSubscriptions failed",severityNumber:bt.ERROR}),t({isSuccessful:!1,data:null})}});pe(this,"onGetCustomerMessage",async(e,t)=>{try{const n=await this.init(e);if(!n)throw new Error("Stigg client is not initialized");if(!e)throw new Error("User is not defined");await n.setCustomerId(e);const o=await n.getCustomer();return t({isSuccessful:!0,data:o})}catch(n){return C_.emitLog({error:n,body:"StiggService.getCustomer failed",severityNumber:bt.ERROR}),t({isSuccessful:!1,data:null})}})}async init(e){return this.initPromise||(this.initPromise=(async()=>{try{if(!e)throw new Error("User is not defined");const t=wW.initialize({apiKey:"client-5f997eb8-94df-4064-80f6-3cc7864d1bd0:857fd2fa-3bca-4339-babb-031dd60fc706",customerId:e});return await t.waitForInitialization(),t}catch(t){return C_.emitLog({error:t,body:"StiggService init failed",severityNumber:bt.ERROR}),this.initPromise=null,null}})()),this.initPromise}}const xA=new TW,AW=Qn("updateHandler"),IW=r=>{const{reason:e,previousVersion:t=""}=r;if(e!=="update")return;const n=Gt.runtime.getManifest().version;try{Pr.trackEvent("updateSequenceStarted",{thisVersion:n,reason:e,previousVersion:t}),Pr.identifyAsExtensionUser(),Pr.trackEvent("extensionChange",{currentVersion:n,previous:t,reason:e}),Pr.trackEvent("updateSequenceEnded",{previousVersion:t,thisVersion:n,reason:e})}catch(o){AW.emitLog({error:o,body:"Failed to update extension",severityNumber:bt.ERROR}),Pr.trackEvent("wordtuneUpdateFailed",{error:o==null?void 0:o.toString(),version:n,previousVersion:t,reason:e})}},OW="TRACK_EVENT",RW="GET_VARIANT",CW="extension-logger-2",PW="on",xW="extension-fetching-interval",NW="SEND_WEBDATA_MESSAGE",kW="EMIT_LOG",DW="INJECT_EXTENSION_VERSION_INTO_TAB",MW="COMPARE_EXTENSION_VERSION_WITH_TAB",LW="GET_ACTIVE_TAB",UW="OPEN_NEW_TAB",FW="PING",BW="USER_CHANGED",jW="SET_BROWSER_TYPE",GW="POST_DOCUMENT",$W="POST_PDF_DOCUMENT",VW="GET_SPICES",qW="GET_SPICES_SUGGESTIONS",HW="GET_STIGG_SUBSCRIPTIONS",WW="GET_STIGG_CUSTOMER";var NA=Object.prototype.hasOwnProperty;function P_(r,e){var t,n;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&P_(r[n],e[n]););return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(NA.call(r,t)&&++n&&!NA.call(e,t)||!(t in e)||!P_(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}function Ev(r,...e){}const x_={debug:(...r)=>Ev(console.debug,...r),log:(...r)=>Ev(console.log,...r),warn:(...r)=>Ev(console.warn,...r),error:(...r)=>Ev(console.error,...r)};function zW(r){return Array.isArray(r)?r:[r]}const KW=new Error("request for lock canceled");var YW=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})};class QW{constructor(e,t=KW){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((n,o)=>{const i={resolve:n,reject:o,weight:e,priority:t},a=kA(this._queue,l=>t<=l.priority);a===-1&&e<=this._value?this._dispatchItem(i):this._queue.splice(a+1,0,i)})}runExclusive(e){return YW(this,arguments,void 0,function*(t,n=1,o=0){const[i,a]=yield this.acquire(n,o);try{return yield t(i)}finally{a()}})}waitForUnlock(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(n=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),XW(this._weightedWaiters[e-1],{resolve:n,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const t=this._weightedWaiters[e-1];t&&(t.forEach(n=>n.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let t=this._value;t>0;t--){const n=this._weightedWaiters[t-1];if(!n)continue;const o=n.findIndex(i=>i.priority<=e);(o===-1?n:n.splice(0,o)).forEach(i=>i.resolve())}}}_couldLockImmediately(e,t){return(this._queue.length===0||this._queue[0].priority<t)&&e<=this._value}}function XW(r,e){const t=kA(r,n=>e.priority<=n.priority);r.splice(t+1,0,e)}function kA(r,e){for(let t=r.length-1;t>=0;t--)if(e(r[t]))return t;return-1}var ZW=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(m){try{u(n.next(m))}catch(E){a(E)}}function p(m){try{u(n.throw(m))}catch(E){a(E)}}function u(m){m.done?i(m.value):o(m.value).then(l,p)}u((n=n.apply(r,e||[])).next())})};class JW{constructor(e){this._semaphore=new QW(1,e)}acquire(){return ZW(this,arguments,void 0,function*(e=0){const[,t]=yield this._semaphore.acquire(1,e);return t})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const e5=t5();function t5(){const r={local:bv("local"),session:bv("session"),sync:bv("sync"),managed:bv("managed")},e=S=>{const P=r[S];if(P==null){const x=Object.keys(r).join(", ");throw Error(`Invalid area "${S}". Options: ${x}`)}return P},t=S=>{const P=S.indexOf(":"),x=S.substring(0,P),k=S.substring(P+1);if(k==null)throw Error(`Storage key should be in the form of "area:key", but received "${S}"`);return{driverArea:x,driverKey:k,driver:e(x)}},n=S=>S+"$",o=(S,P)=>S??P??null,i=S=>typeof S=="object"&&!Array.isArray(S)?S:{},a=async(S,P,x)=>{const k=await S.getItem(P);return o(k,(x==null?void 0:x.fallback)??(x==null?void 0:x.defaultValue))},l=async(S,P)=>{const x=n(P),k=await S.getItem(x);return i(k)},p=async(S,P,x)=>{await S.setItem(P,x??null)},u=async(S,P,x)=>{const k=n(P),G={...i(await S.getItem(k))};Object.entries(x).forEach(([X,F])=>{F==null?delete G[X]:G[X]=F}),await S.setItem(k,G)},m=async(S,P,x)=>{if(await S.removeItem(P),x!=null&&x.removeMeta){const k=n(P);await S.removeItem(k)}},E=async(S,P,x)=>{const k=n(P);if(x==null)await S.removeItem(k);else{const B=i(await S.getItem(k));zW(x).forEach(G=>delete B[G]),await S.setItem(k,B)}},w=(S,P,x)=>S.watch(P,x);return{getItem:async(S,P)=>{const{driver:x,driverKey:k}=t(S);return await a(x,k,P)},getItems:async S=>{const P=new Map,x=new Map;return S.forEach(B=>{let G,X;typeof B=="string"?G=B:(G=B.key,X=B.options);const{driverArea:F,driverKey:j}=t(G),H=P.get(F)??[];P.set(F,H.concat(j)),x.set(G,X)}),(await Promise.all(Array.from(P.entries()).map(async([B,G])=>(await r[B].getItems(G)).map(F=>{const j=`${B}:${F.key}`,H=x.get(j),re=o(F.value,(H==null?void 0:H.fallback)??(H==null?void 0:H.defaultValue));return{key:j,value:re}})))).flat()},getMeta:async S=>{const{driver:P,driverKey:x}=t(S);return await l(P,x)},setItem:async(S,P)=>{const{driver:x,driverKey:k}=t(S);await p(x,k,P)},setItems:async S=>{const P=new Map;S.forEach(({key:x,value:k})=>{const{driverArea:B,driverKey:G}=t(x),X=P.get(B)??[];P.set(B,X.concat({key:G,value:k}))}),await Promise.all(Array.from(P.entries()).map(async([x,k])=>{await e(x).setItems(k)}))},setMeta:async(S,P)=>{const{driver:x,driverKey:k}=t(S);await u(x,k,P)},removeItem:async(S,P)=>{const{driver:x,driverKey:k}=t(S);await m(x,k,P)},removeItems:async S=>{const P=new Map;S.forEach(x=>{let k,B;typeof x=="string"?k=x:(k=x.key,B=x.options);const{driverArea:G,driverKey:X}=t(k),F=P.get(G)??[];F.push(X),B!=null&&B.removeMeta&&F.push(n(X)),P.set(G,F)}),await Promise.all(Array.from(P.entries()).map(async([x,k])=>{await e(x).removeItems(k)}))},removeMeta:async(S,P)=>{const{driver:x,driverKey:k}=t(S);await E(x,k,P)},snapshot:async(S,P)=>{var B;const k=await e(S).snapshot();return(B=P==null?void 0:P.excludeKeys)==null||B.forEach(G=>{delete k[G],delete k[n(G)]}),k},restoreSnapshot:async(S,P)=>{await e(S).restoreSnapshot(P)},watch:(S,P)=>{const{driver:x,driverKey:k}=t(S);return w(x,k,P)},unwatch(){Object.values(r).forEach(S=>{S.unwatch()})},defineItem:(S,P)=>{const{driver:x,driverKey:k}=t(S),{version:B=1,migrations:G={}}=P??{};if(B<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const X=async()=>{var ge;const te=n(k),[{value:fe},{value:Te}]=await x.getItems([k,te]);if(fe==null)return;const Ce=(Te==null?void 0:Te.v)??1;if(Ce>B)throw Error(`Version downgrade detected (v${Ce} -> v${B}) for "${S}"`);x_.debug(`Running storage migration for ${S}: v${Ce} -> v${B}`);const $=Array.from({length:B-Ce},(ee,Ie)=>Ce+Ie+1);let J=fe;for(const ee of $)J=await((ge=G==null?void 0:G[ee])==null?void 0:ge.call(G,J))??J;await x.setItems([{key:k,value:J},{key:te,value:{...Te,v:B}}]),x_.debug(`Storage migration completed for ${S} v${B}`,{migratedValue:J})},F=(P==null?void 0:P.migrations)==null?Promise.resolve():X().catch(te=>{x_.error(`Migration failed for ${S}`,te)}),j=new JW,H=()=>(P==null?void 0:P.fallback)??(P==null?void 0:P.defaultValue)??null,re=()=>j.runExclusive(async()=>{const te=await x.getItem(k);if(te!=null||(P==null?void 0:P.init)==null)return te;const fe=await P.init();return await x.setItem(k,fe),fe});return F.then(re),{get defaultValue(){return H()},get fallback(){return H()},getValue:async()=>(await F,P!=null&&P.init?await re():await a(x,k,P)),getMeta:async()=>(await F,await l(x,k)),setValue:async te=>(await F,await p(x,k,te)),setMeta:async te=>(await F,await u(x,k,te)),removeValue:async te=>(await F,await m(x,k,te)),removeMeta:async te=>(await F,await E(x,k,te)),watch:te=>w(x,k,(fe,Te)=>te(fe??H(),Te??H())),migrate:X}}}}function bv(r){const e=()=>{if(Gt.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(Gt.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const n=Gt.storage[r];if(n==null)throw Error(`"browser.storage.${r}" is undefined`);return n},t=new Set;return{getItem:async n=>(await e().get(n))[n],getItems:async n=>{const o=await e().get(n);return n.map(i=>({key:i,value:o[i]??null}))},setItem:async(n,o)=>{o==null?await e().remove(n):await e().set({[n]:o})},setItems:async n=>{const o=n.reduce((i,{key:a,value:l})=>(i[a]=l,i),{});await e().set(o)},removeItem:async n=>{await e().remove(n)},removeItems:async n=>{await e().remove(n)},snapshot:async()=>await e().get(),restoreSnapshot:async n=>{await e().set(n)},watch(n,o){const i=a=>{const l=a[n];l!=null&&(P_(l.newValue,l.oldValue)||o(l.newValue??null,l.oldValue??null))};return e().onChanged.addListener(i),t.add(i),()=>{e().onChanged.removeListener(i),t.delete(i)}},unwatch(){t.forEach(n=>{e().onChanged.removeListener(n)}),t.clear()}}}const r5=async r=>{try{return await e5.setItem("local:browser",r)}catch(e){return console.error("Error in setting browser type:",e),null}},n5=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(r=>[r.name,r]),i5=new Map(n5);class N_ extends Error{constructor(t){super(N_._prepareSuperMessage(t));pe(this,"name","NonError")}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}}const o5=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],k_=new WeakSet,a5=r=>{k_.add(r);const e=r.toJSON();return k_.delete(r),e},DA=r=>i5.get(r)??Error,MA=({from:r,seen:e,to:t,forceEnumerable:n,maxDepth:o,depth:i,useToJSON:a,serialize:l})=>{if(!t)if(Array.isArray(r))t=[];else if(!l&&LA(r)){const u=DA(r.name);t=new u}else t={};if(e.push(r),i>=o)return t;if(a&&typeof r.toJSON=="function"&&!k_.has(r))return a5(r);const p=u=>MA({from:u,seen:[...e],forceEnumerable:n,maxDepth:o,depth:i,useToJSON:a,serialize:l});for(const[u,m]of Object.entries(r)){if(m&&m instanceof Uint8Array&&m.constructor.name==="Buffer"){t[u]="[object Buffer]";continue}if(m!==null&&typeof m=="object"&&typeof m.pipe=="function"){t[u]="[object Stream]";continue}if(typeof m!="function"){if(!m||typeof m!="object"){try{t[u]=m}catch{}continue}if(!e.includes(r[u])){i++,t[u]=p(r[u]);continue}t[u]="[Circular]"}}for(const{property:u,enumerable:m}of o5)typeof r[u]<"u"&&r[u]!==null&&Object.defineProperty(t,u,{value:LA(r[u])?p(r[u]):r[u],enumerable:n?!0:m,configurable:!0,writable:!0});return t};function s5(r,e={}){const{maxDepth:t=Number.POSITIVE_INFINITY}=e;if(r instanceof Error)return r;if(u5(r)){const n=DA(r.name);return MA({from:r,seen:[],to:new n,maxDepth:t,depth:0,serialize:!1})}return new N_(r)}function LA(r){return!!r&&typeof r=="object"&&"name"in r&&"message"in r&&"stack"in r}function u5(r){return!!r&&typeof r=="object"&&"message"in r&&!Array.isArray(r)}const c5="3600000",l5=Zs({main:()=>{const r=m=>{const E=m==null?void 0:m.wordtuneUserId;Gt.runtime.sendMessage({type:BW,payload:{userId:E}}),E&&(Pr.setUserId(E),A0(E),I0(Pr.getDeviceId()),Pa.clearExposedExperiments(),Pa.fetchVariants(),IT({userId:E,deviceId:Pr.getDeviceId()}))},e=async m=>{const E=await Pa.getVariant({experimentName:CW,defaultValue:{value:PW,payload:{logLevel:up.ERROR.toString()}},forceFetch:!1});return Number(E.payload.logLevel)<=Number(m)},t=Qn("sidePanel");no.setLogger(Qn("authService")),Pr.setLogger(Qn("analyticsService")),Pa.setLogger(Qn("experimentService"));let n=!1;function o(){n||(dU(e),no.onUserChange(r),n=!0)}let i;const a=async()=>(i||(i=(async()=>{})()),i);async function l(){await no.init();const m=await no.getLocalUser();await Pr.init({userId:m==null?void 0:m.wordtuneUserId}),m!=null&&m.wordtuneUserId&&A0(m==null?void 0:m.wordtuneUserId),I0(Pr.getDeviceId()),await Pa.init(),o(),await a()}const p=async m=>{switch(m.reason){case"install":return jq(m);case"update":return await l(),IW(m);default:return}};let u;l().then(()=>{Pa.getVariant({experimentName:xW,defaultValue:{value:c5}}).then(({value:m})=>{u||(u=Pa.setExperimentsFetcherInterval(Number(m)))}).catch(m=>console.error("Error in interval fetching experiments:",m))}),Gt.runtime.onMessage.addListener((m,E,w)=>(l().then(async()=>{switch(m.type){case jW:m.payload.browser==="arc"&&await chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!1}).catch(B=>{t.emitLog({body:"Error in setting side panel behavior",severityNumber:up.ERROR,error:B})}),await r5(m.payload.browser),w();break;case F$:no.onGetUserMessage(w);break;case VL:Ap.onGetUserConfigMessage(w);break;case qL:Ap.onUpdateUserConfigMessage(m.payload,w);break;case OW:Pr.onTrackEventMessage(m.payload);break;case NW:aW.onPostWebpageDataMessage(m.payload,w);break;case RW:Pa.onGetVariantMessage(m.payload,w);break;case DW:RA.injectVersionNumberToTab(E).then(()=>w==null?void 0:w());break;case MW:const R=await Yg(),S=R==null?void 0:R.tabId;if(!S){w({isVersionMatch:!0});return}RA.compareVersion({tabId:S}).then(B=>w({isVersionMatch:B})).catch(()=>w({isVersionMatch:!0}));break;case LW:w(await Yg());break;case UW:Gt.tabs.create(m.payload),w();break;case uW:mW.onGetRewriteSuggestionsMessage(m.payload,w);break;case VW:CA.onGetSpicesMessage(m.payload,w);break;case qW:CA.onGetSpicesSuggestionsMessage(m.payload,w);break;case HW:{const B=await no.getUser();xA.onGetSubscriptionsMessage(B==null?void 0:B.wordtuneUserId,w);break}case GW:VH.onPostDocumentMessage(m.payload,w);break;case $W:WH.onPostPdfDocumentMessage(m.payload,w);break;case WW:{const B=await no.getUser();xA.onGetCustomerMessage(B==null?void 0:B.wordtuneUserId,w);break}case kW:const{logName:P,logRecord:x,serializedError:k}=m.payload;fU(P,{...x,error:k?s5(k):void 0}),w();break;case G$:no.onLogoutMessage(w);break;default:w()}}),!0)),Gt.runtime.onMessage.addListener((m,E,w)=>{m.type===FW&&w(!0)}),Gt.runtime.onInstalled.addListener(m=>(p(m),!0)),Gt.runtime.onSuspend.addListener(()=>{clearInterval(u)})}});function O5(){}function Sv(r,...e){}const f5={debug:(...r)=>Sv(console.debug,...r),log:(...r)=>Sv(console.log,...r),warn:(...r)=>Sv(console.warn,...r),error:(...r)=>Sv(console.error,...r)};let D_;try{D_=l5.main(),D_ instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(r){throw f5.error("The background crashed on startup!"),r}return D_}();
background;
