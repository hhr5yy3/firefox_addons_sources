function parseTimesToDates(e){const t=parseInt(e.split(":")[0]),r=parseInt(e.split(":")[1]);return new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),t,r,0)}function removeStopTimerEvent(){aBrowser.alarms.clear("stopEntryInProgress")}aBrowser.alarms.onAlarm.addListener((async e=>{"stopEntryInProgress"===e.name&&windowIds.length>0&&e.scheduledTime>Date.now()-6e4&&TimeEntry.endInProgress()})),aBrowser.runtime.onMessage.addListener(((e,t,r)=>{"createStopTimerEvent"===e.eventName&&(removeStopTimerEvent(),aBrowser.storage.local.get(["userId"]).then((e=>{aBrowser.storage.local.get("permanent_stopTimerOnSelectedTime").then((t=>{const{permanent_stopTimerOnSelectedTime:r}=t;if(r){let t=JSON.parse(r).find((t=>t.userId===e.userId));if(t&&!0===t.enabled){const e=parseTimesToDates(t.time),r=new Date;stopTimerEvent=e>r?aBrowser.alarms.create("stopEntryInProgress",{when:e.getTime()}):aBrowser.alarms.create("stopEntryInProgress",{when:e.getTime()+864e5})}}}))}))),"removeStopTimerEvent"===e.eventName&&removeStopTimerEvent()}));