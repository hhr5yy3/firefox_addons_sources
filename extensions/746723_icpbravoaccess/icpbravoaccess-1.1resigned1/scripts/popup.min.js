var app=angular.module("IcpBravoAccessNgApp",["blockUI","ui.bootstrap"]),_AnalyticsCode;app.filter("cpf",function(){return function(n){var t=n+"";return t=t.replace(/\D/g,""),t=t.replace(/(\d{3})(\d)/,"$1.$2"),t=t.replace(/(\d{3})(\d)/,"$1.$2"),t.replace(/(\d{3})(\d{1,2})$/,"$1-$2")}});app.filter("cnpj",function(){return function(n){var t=n+"";return t=t.replace(/\D/g,""),t=t.replace(/^(\d{2})(\d)/,"$1.$2"),t=t.replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3"),t=t.replace(/\.(\d{3})(\d)/,".$1/$2"),t.replace(/(\d{4})(\d)/,"$1-$2")}});_AnalyticsCode="UA-XXXXXX-X";app.controller("popUpNgController",["$scope","$window","blockUI","$timeout","$uibModal",function(n,t,i,r,u){function e(t){n.modalInstance=u.open({animation:!0,controller:"OutdatedController",templateUrl:"views/outdated.html",backdrop:"static",size:"sm",resolve:{info:{message:t.statusMessage,title:t.info,download:t.downloadRequired}}})}function f(t){return n.modalInstance=u.open({animation:!0,controller:"OutdatedController",templateUrl:"views/outdated.html",backdrop:"static",size:"sm",resolve:{info:{message:t.statusMessage,title:t.info,download:t.downloadRequired}}}),i.stop(),!1}n.type={current:"Todos"};n.CertificatesList=[];timeOut=0;n.modalInstance=null;n.onGetCertificateList=function(t){t?(t=t.toLowerCase(),t.search("icpbrasil")>=0?n.type.current="ICPBrasil":t.search("unknown")>=0||t.search("desconhecidos")>=0?(t="unknown",n.type.current="Desconhecidos"):n.type.current="Todos"):n.type.current="Todos";i.start("Getting certificates...");icpBravoAccessExt.getCertificateList({filter:{type:t},onSuccess:function(t){n.onCertificatesLoaded(t);r(function(){i.stop();n.modalInstance&&(n.modalInstance.close(t),n.modalInstance=null)},500)},onError:f})};n.onLoad=function(){i.start("Loading...");icpBravoAccessExt.connect({license:"",angular:n,onSuccess:function(t){n.onGetCertificateList(t);i.stop()},onError:f,onNotInstalled:function(n){e(n);i.stop()}})};n.onCertificatesLoaded=function(t){var i=t.certificates;n.CertificatesList=t.certificates};n.certificateInfoModal=function(t){var i=u.open({animation:!0,controller:"CertificateController",templateUrl:"views/certificate_info.html",size:"sm",resolve:{cert:t,icpBravoAccessExt:icpBravoAccessExt,uibModal:u}});i.result.then(function(t){if(t)n.onGetCertificateList(n.type.current)})};n.authorizedSitesModal=function(){u.open({animation:!0,controller:"AuthorizedController",templateUrl:"views/authorized_info.html",size:"sm"})};n.redirectTo=function(n){t.open(n,"_blank")}}]);