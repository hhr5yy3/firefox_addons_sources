window.browser=window.msBrowser||window.browser||window.chrome;var Securden_AccountWorkPersonalUpdate={username:null,password:null,init:function(){window.addEventListener("load",(function(){SecurdenExtensionUtils.sendMessage(null,"getNewAccountDetails",{},(function(e){Securden_AccountWorkPersonalUpdate.showAccountDetails(e),workText=Securden_AccountSave.workText,SecurdenExtensionUtils.initializeAccountWorkPersonalUpdateTexts(workText)})),$("#closeUpdateAccountForm").click((function(e){SecurdenExtensionUtils.sendMessage(null,"removeIFrame",{})})),$("#cancel_all_password_button").click((function(e){SecurdenExtensionUtils.sendMessage(null,"removeIFrame",{})})),$("#neverSaveUpdateAccountFormButton").click((function(e){SecurdenExtensionUtils.sendMessage(null,"neverSaveAccountDetails",{},(function(){}))})),$("#update_account_id").click((function(e){Securden_AccountWorkPersonalUpdate.updateAccountDetails()})),$("input[type=radio]").on("click change",(function(e){SecurdenExtensionUtils.stopEventPropagation(e),SecurdenExtensionUtils.showHide([],["account_error_msg"]);var t=e.target;Securden_AccountWorkPersonalUpdate.changeAccountType(t,t.getAttribute("id"))})),$("#account_type_work_parent").click((function(e){SecurdenExtensionUtils.stopEventPropagation(e),SecurdenExtensionUtils.showHide([],["account_error_msg"]);var t=e.target;"account_type_work"!=t.getAttribute("id")?($("#account_type_personal").prop("checked",!1),$("#account_type_work").prop("checked",!0),Securden_AccountWorkPersonalUpdate.changeAccountType(t,"account_type_work_parent")):Securden_AccountWorkPersonalUpdate.changeAccountType(t,"account_type_work")})),$("#account_type_personal_parent").click((function(e){SecurdenExtensionUtils.stopEventPropagation(e),SecurdenExtensionUtils.showHide([],["account_error_msg"]);var t=e.target;"account_type_personal"!=t.getAttribute("id")?($("#account_type_work").prop("checked",!1),$("#account_type_personal").prop("checked",!0),Securden_AccountWorkPersonalUpdate.changeAccountType(t,"account_type_personal_parent")):Securden_AccountWorkPersonalUpdate.changeAccountType(t,"account_type_personal")}))}))},showAccountDetails:function(e){var t=(null!=e.data.product_version&&e.data.product_version,e.data.product_version),n=e.data.accounts,c=[],o=n.length,a=document.getElementById("autofill_outer_div_id"),r=document.createElement("div");r.className="sec-accounts-list-wrapper";for(var s=0;s<o;s++){var u=n[s].id;c.push(u);var l=n[s].acc_title,d=n[s].acc_name,i=n[s].acc_category;1==i?l=l+"("+browser.i18n.getMessage("work")+")":3==i&&(l=l+"("+browser.i18n.getMessage("personal")+")");var p=document.createElement("div");p.id="auto_fill_accounts_div_"+u,p.setAttribute("account_id",u),0!=s&&(p.className="sec-autofill-account-list");var _="100%",w=document.createElement("div");w.className="sec-accounts-value-wrap";var v=document.createElement("div");v.innerText=l,v.style.width=_,v.className="sec-account-title-div sec-font-weight600";var g=document.createElement("div");g.innerText=d,g.style.width=_,g.className="sec-account-title-div sec-margin-top2",w.appendChild(v),w.appendChild(g);var m=document.createElement("button");m.setAttribute("name","Update"),m.setAttribute("username",d),m.setAttribute("account_id",u),m.setAttribute("is_submit",!1),m.innerText=browser.i18n.getMessage("update"),m.className="sec-update-account-password-btn",m.onclick=function(e){Securden_AccountWorkPersonalUpdate.updateAccountDetails(e)};var A=document.createElement("div");if(A.className="sec-accounts-actions-wrap",A.appendChild(m),t&&SecurdenExtensionUtils.checkIfFeatureEnabledInVersion("UPDATE_ALL_PASSWORD",t))$("#update_all_password_wrap").removeClass("hide"),$("#update_all_password_wrap").addClass("show"),$("#update_all_password_button").val(browser.i18n.getMessage("update_all")),$("#cancel_all_password_button").val(browser.i18n.getMessage("cancel")),document.getElementById("update_all_password_button").onclick=function(e){Securden_AccountWorkPersonalUpdate.updateAllAccountDetails(e)};p.appendChild(w),p.appendChild(A),r.appendChild(p)}a.appendChild(r),Securden_AccountWorkPersonalUpdate.accountIds=c,document.getElementById("SecurdenPasswordUpdataDiv").style.width="320px",e.data.never_save_allowed?SecurdenExtensionUtils.showHide(["neverSaveUpdateAccountFormButton"],[]):SecurdenExtensionUtils.showHide([],["neverSaveUpdateAccountFormButton"])},closeIFrame:function(e){null!=e&&null!=e||(e=!0),SecurdenExtensionUtils.sendMessage(null,"removeIFrame",{clearValues:e})},updateAccountDetails:function(){SecurdenExtensionUtils.stopEventPropagation(event);var e={account_id:event.target.getAttribute("account_id")};SecurdenExtensionUtils.sendMessage(null,"updateWorkPersonalAccountDetails",e,(function(){}))},updateAllAccountDetails:function(){SecurdenExtensionUtils.stopEventPropagation(event);event.target;var e={account_ids:Securden_AccountWorkPersonalUpdate.accountIds};SecurdenExtensionUtils.sendMessage(null,"updateAllWorkPersonalAccountDetails",e,(function(){}))},changeAccountType:function(e,t){$("#account_type_help_text").removeClass("hide").addClass("show"),"account_type_work_parent"!=t&&"account_type_work"!=t||!SecurdenExtensionUtils.checkIfIDPresentInsideElement(e,t)?"account_type_personal_parent"!=t&&"account_type_personal"!=t||!SecurdenExtensionUtils.checkIfIDPresentInsideElement(e,t)||($("#account_type_work_parent").removeClass("whiteBgColor").addClass("greyBgColor"),$("#account_type_personal_parent").removeClass("greyBgColor").addClass("whiteBgColor")):($("#account_type_personal_parent").removeClass("whiteBgColor").addClass("greyBgColor"),$("#account_type_work_parent").removeClass("greyBgColor").addClass("whiteBgColor"))}};Securden_AccountWorkPersonalUpdate.init();