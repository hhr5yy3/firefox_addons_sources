var inject=function(){"use strict";var Qe=Object.defineProperty;var Je=(P,x,k)=>x in P?Qe(P,x,{enumerable:!0,configurable:!0,writable:!0,value:k}):P[x]=k;var F=(P,x,k)=>Je(P,typeof x!="symbol"?x+"":x,k);var pe,be,_e,Ee;function P(n){return n}/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let x;const k=()=>x||(x=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/k().requestIdleCallback,k().cancelIdleCallback;{const n=k(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),c=>{i.length>1?i.forEach(f=>f(c)):i[0](c)}};e("__VUE_INSTANCE_SETTERS__",t=>t),e("__VUE_SSR_SETTERS__",t=>t)}function Se(){const n=["","webkit"];return{get element(){return document.fullscreenElement},get isActive(){return!!this.element},onChange(e){n.forEach(t=>document.addEventListener(`${t}fullscreenchange`,e))}}}const _=((be=(pe=globalThis.browser)==null?void 0:pe.runtime)==null?void 0:be.id)==null?globalThis.chrome:globalThis.browser,ie=["normal","upscale","stretch"];ie.map(n=>({value:n,label:_.i18n.getMessage(`mode_${n}`),disabled:!1}));const V={activity:!0,mode:ie[1],scaleX:1,scaleY:1,helpers:[],booster:!1},y={body:"uwInstance",video:"uwElement",banner:"uwBanner",mode:"uwMode",scale:"uwScale",inline:"uwInline",inlineParent:"uwInlineParent",animate:"uwAnimate",helper:"uwHelper",booster:"uwBooster"},X='<svg data-uw-id="booster"><defs><filter id="uw-booster"><feConvolveMatrix order="3" kernelMatrix="0 -1 0 -1 5 -1 0 -1 0" edgeMode="none" preserveAlpha="true" /></filter></defs></svg>';function Te(){let n=null;const e=document.createElement("div");e.dataset[y.banner]="";const t=document.createElement("span");return e.appendChild(t),e.addEventListener("animationend",r=>{r.animationName==="fadeOutUp"&&e.remove()}),{inject(r){r.before(e),t.dataset[y.animate]="in"},cleanup(){n&&clearTimeout(n),e.remove()},setText(r){n&&clearTimeout(n),t.textContent=r,n=setTimeout(()=>{t.dataset[y.animate]="out"},1e3)}}}function Me(){let n=null,e;const t=document.createElement("div");t.dataset[y.helper]="",t.addEventListener("animationend",()=>{delete t.dataset.uwInvalid});function r(u,m,v){var A;const M=[u];for(;M.length>0;){const K=M.shift();if(K){if(K instanceof HTMLVideoElement&&K.clientWidth===m&&K.clientHeight===v)return K;if(K instanceof HTMLIFrameElement){const o=(A=K.contentDocument)==null?void 0:A.body;o&&M.push(o)}for(let o=0;o<K.children.length;o++){let a=K.children[o];a instanceof HTMLElement&&M.push(a)}}}return u&&u.parentElement?r(u.parentElement,m,v):null}function i(u){return u instanceof MouseEvent?{x:u.clientX,y:u.clientY}:u instanceof TouchEvent&&u.touches.length>0?{x:u.touches[0].clientX,y:u.touches[0].clientY}:{x:0,y:0}}function c(u){u.stopPropagation();const{x:m,y:v}=i(u);if(n=document.elementFromPoint(m,v),!n)return;const{width:M,height:A}=n.getBoundingClientRect();if(!(n instanceof HTMLVideoElement))for(;(!n.hasChildNodes()||M===0||A===0)&&n.parentElement;)n=n.parentElement;if(!n)return;const{width:K,height:o,top:a,left:s}=n.getBoundingClientRect(),l=window.getComputedStyle(n).getPropertyValue("border-radius");t.style.setProperty("--uw-helper-width",`${K}px`),t.style.setProperty("--uw-helper-height",`${o}px`),t.style.setProperty("--uw-helper-y",`${a+window.scrollY}px`),t.style.setProperty("--uw-helper-x",`${s+window.scrollX}px`),t.style.setProperty("--uw-helper-radii",l)}function f(u){if(u.preventDefault(),u.stopPropagation(),!n)return;const m=r(n,n.offsetWidth,n.offsetHeight);m&&e?e(m):t.dataset.uwInvalid="true"}function g(){document.addEventListener("mousemove",c),document.addEventListener("click",f,{capture:!0,passive:!1})}function S(){document.removeEventListener("mousemove",c),document.removeEventListener("click",f,{capture:!0})}return{register(){document.body.prepend(t),g()},unregister(){t.remove(),S()},onSelect(u){e=u}}}var se=Object.prototype.hasOwnProperty;function B(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&B(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(se.call(n,t)&&++r&&!se.call(e,t)||!(t in e)||!B(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}const Ke=new Error("request for lock canceled");var xe=function(n,e,t,r){function i(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function g(m){try{u(r.next(m))}catch(v){f(v)}}function S(m){try{u(r.throw(m))}catch(v){f(v)}}function u(m){m.done?c(m.value):i(m.value).then(g,S)}u((r=r.apply(n,e||[])).next())})};class Le{constructor(e,t=Ke){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((r,i)=>{const c={resolve:r,reject:i,weight:e,priority:t},f=ae(this._queue,g=>t<=g.priority);f===-1&&e<=this._value?this._dispatchItem(c):this._queue.splice(f+1,0,c)})}runExclusive(e){return xe(this,arguments,void 0,function*(t,r=1,i=0){const[c,f]=yield this.acquire(r,i);try{return yield t(c)}finally{f()}})}waitForUnlock(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(r=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),ke(this._weightedWaiters[e-1],{resolve:r,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const t=this._weightedWaiters[e-1];t&&(t.forEach(r=>r.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let t=this._value;t>0;t--){const r=this._weightedWaiters[t-1];if(!r)continue;const i=r.findIndex(c=>c.priority<=e);(i===-1?r:r.splice(0,i)).forEach(c=>c.resolve())}}}_couldLockImmediately(e,t){return(this._queue.length===0||this._queue[0].priority<t)&&e<=this._value}}function ke(n,e){const t=ae(n,r=>e.priority<=r.priority);n.splice(t+1,0,e)}function ae(n,e){for(let t=n.length-1;t>=0;t--)if(e(n[t]))return t;return-1}var $e=function(n,e,t,r){function i(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function g(m){try{u(r.next(m))}catch(v){f(v)}}function S(m){try{u(r.throw(m))}catch(v){f(v)}}function u(m){m.done?c(m.value):i(m.value).then(g,S)}u((r=r.apply(n,e||[])).next())})};class Ce{constructor(e){this._semaphore=new Le(1,e)}acquire(){return $e(this,arguments,void 0,function*(e=0){const[,t]=yield this._semaphore.acquire(1,e);return t})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const W=((Ee=(_e=globalThis.browser)==null?void 0:_e.runtime)==null?void 0:Ee.id)==null?globalThis.chrome:globalThis.browser,$=Ae();function Ae(){const n={local:H("local"),session:H("session"),sync:H("sync"),managed:H("managed")},e=o=>{const a=n[o];if(a==null){const s=Object.keys(n).join(", ");throw Error(`Invalid area "${o}". Options: ${s}`)}return a},t=o=>{const a=o.indexOf(":"),s=o.substring(0,a),l=o.substring(a+1);if(l==null)throw Error(`Storage key should be in the form of "area:key", but received "${o}"`);return{driverArea:s,driverKey:l,driver:e(s)}},r=o=>o+"$",i=(o,a)=>{const s={...o};return Object.entries(a).forEach(([l,d])=>{d==null?delete s[l]:s[l]=d}),s},c=(o,a)=>o??a??null,f=o=>typeof o=="object"&&!Array.isArray(o)?o:{},g=async(o,a,s)=>{const l=await o.getItem(a);return c(l,(s==null?void 0:s.fallback)??(s==null?void 0:s.defaultValue))},S=async(o,a)=>{const s=r(a),l=await o.getItem(s);return f(l)},u=async(o,a,s)=>{await o.setItem(a,s??null)},m=async(o,a,s)=>{const l=r(a),d=f(await o.getItem(l));await o.setItem(l,i(d,s))},v=async(o,a,s)=>{if(await o.removeItem(a),s!=null&&s.removeMeta){const l=r(a);await o.removeItem(l)}},M=async(o,a,s)=>{const l=r(a);if(s==null)await o.removeItem(l);else{const d=f(await o.getItem(l));[s].flat().forEach(h=>delete d[h]),await o.setItem(l,d)}},A=(o,a,s)=>o.watch(a,s);return{getItem:async(o,a)=>{const{driver:s,driverKey:l}=t(o);return await g(s,l,a)},getItems:async o=>{const a=new Map,s=new Map,l=[];o.forEach(h=>{let w,p;typeof h=="string"?w=h:"getValue"in h?(w=h.key,p={fallback:h.fallback}):(w=h.key,p=h.options),l.push(w);const{driverArea:L,driverKey:E}=t(w),I=a.get(L)??[];a.set(L,I.concat(E)),s.set(w,p)});const d=new Map;return await Promise.all(Array.from(a.entries()).map(async([h,w])=>{(await n[h].getItems(w)).forEach(L=>{const E=`${h}:${L.key}`,I=s.get(E),b=c(L.value,(I==null?void 0:I.fallback)??(I==null?void 0:I.defaultValue));d.set(E,b)})})),l.map(h=>({key:h,value:d.get(h)}))},getMeta:async o=>{const{driver:a,driverKey:s}=t(o);return await S(a,s)},getMetas:async o=>{const a=o.map(d=>{const h=typeof d=="string"?d:d.key,{driverArea:w,driverKey:p}=t(h);return{key:h,driverArea:w,driverKey:p,driverMetaKey:r(p)}}),s=a.reduce((d,h)=>{var w;return d[w=h.driverArea]??(d[w]=[]),d[h.driverArea].push(h),d},{}),l={};return await Promise.all(Object.entries(s).map(async([d,h])=>{const w=await W.storage[d].get(h.map(p=>p.driverMetaKey));h.forEach(p=>{l[p.key]=w[p.driverMetaKey]??{}})})),a.map(d=>({key:d.key,meta:l[d.key]}))},setItem:async(o,a)=>{const{driver:s,driverKey:l}=t(o);await u(s,l,a)},setItems:async o=>{const a={};o.forEach(s=>{const{driverArea:l,driverKey:d}=t("key"in s?s.key:s.item.key);a[l]??(a[l]=[]),a[l].push({key:d,value:s.value})}),await Promise.all(Object.entries(a).map(async([s,l])=>{await e(s).setItems(l)}))},setMeta:async(o,a)=>{const{driver:s,driverKey:l}=t(o);await m(s,l,a)},setMetas:async o=>{const a={};o.forEach(s=>{const{driverArea:l,driverKey:d}=t("key"in s?s.key:s.item.key);a[l]??(a[l]=[]),a[l].push({key:d,properties:s.meta})}),await Promise.all(Object.entries(a).map(async([s,l])=>{const d=e(s),h=l.map(({key:E})=>r(E));console.log(s,h);const w=await d.getItems(h),p=Object.fromEntries(w.map(({key:E,value:I})=>[E,f(I)])),L=l.map(({key:E,properties:I})=>{const b=r(E);return{key:b,value:i(p[b]??{},I)}});await d.setItems(L)}))},removeItem:async(o,a)=>{const{driver:s,driverKey:l}=t(o);await v(s,l,a)},removeItems:async o=>{const a={};o.forEach(s=>{let l,d;typeof s=="string"?l=s:"getValue"in s?l=s.key:"item"in s?(l=s.item.key,d=s.options):(l=s.key,d=s.options);const{driverArea:h,driverKey:w}=t(l);a[h]??(a[h]=[]),a[h].push(w),d!=null&&d.removeMeta&&a[h].push(r(w))}),await Promise.all(Object.entries(a).map(async([s,l])=>{await e(s).removeItems(l)}))},removeMeta:async(o,a)=>{const{driver:s,driverKey:l}=t(o);await M(s,l,a)},snapshot:async(o,a)=>{var d;const l=await e(o).snapshot();return(d=a==null?void 0:a.excludeKeys)==null||d.forEach(h=>{delete l[h],delete l[r(h)]}),l},restoreSnapshot:async(o,a)=>{await e(o).restoreSnapshot(a)},watch:(o,a)=>{const{driver:s,driverKey:l}=t(o);return A(s,l,a)},unwatch(){Object.values(n).forEach(o=>{o.unwatch()})},defineItem:(o,a)=>{const{driver:s,driverKey:l}=t(o),{version:d=1,migrations:h={}}=a??{};if(d<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const w=async()=>{var Ie;const b=r(l),[{value:N},{value:q}]=await s.getItems([l,b]);if(N==null)return;const R=(q==null?void 0:q.v)??1;if(R>d)throw Error(`Version downgrade detected (v${R} -> v${d}) for "${o}"`);console.debug(`[@wxt-dev/storage] Running storage migration for ${o}: v${R} -> v${d}`);const ze=Array.from({length:d-R},(ne,re)=>R+re+1);let O=N;for(const ne of ze)try{O=await((Ie=h==null?void 0:h[ne])==null?void 0:Ie.call(h,O))??O}catch(re){throw Error(`v${ne} migration failed for "${o}"`,{cause:re})}await s.setItems([{key:l,value:O},{key:b,value:{...q,v:d}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${o} v${d}`,{migratedValue:O})},p=(a==null?void 0:a.migrations)==null?Promise.resolve():w().catch(b=>{console.error(`[@wxt-dev/storage] Migration failed for ${o}`,b)}),L=new Ce,E=()=>(a==null?void 0:a.fallback)??(a==null?void 0:a.defaultValue)??null,I=()=>L.runExclusive(async()=>{const b=await s.getItem(l);if(b!=null||(a==null?void 0:a.init)==null)return b;const N=await a.init();return await s.setItem(l,N),N});return p.then(I),{key:o,get defaultValue(){return E()},get fallback(){return E()},getValue:async()=>(await p,a!=null&&a.init?await I():await g(s,l,a)),getMeta:async()=>(await p,await S(s,l)),setValue:async b=>(await p,await u(s,l,b)),setMeta:async b=>(await p,await m(s,l,b)),removeValue:async b=>(await p,await v(s,l,b)),removeMeta:async b=>(await p,await M(s,l,b)),watch:b=>A(s,l,(N,q)=>b(N??E(),q??E())),migrate:w}}}}function H(n){const e=()=>{if(W.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(W.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const r=W.storage[n];if(r==null)throw Error(`"browser.storage.${n}" is undefined`);return r},t=new Set;return{getItem:async r=>(await e().get(r))[r],getItems:async r=>{const i=await e().get(r);return r.map(c=>({key:c,value:i[c]??null}))},setItem:async(r,i)=>{i==null?await e().remove(r):await e().set({[r]:i})},setItems:async r=>{const i=r.reduce((c,{key:f,value:g})=>(c[f]=g,c),{});await e().set(i)},removeItem:async r=>{await e().remove(r)},removeItems:async r=>{await e().remove(r)},snapshot:async()=>await e().get(),restoreSnapshot:async r=>{await e().set(r)},watch(r,i){const c=f=>{const g=f[r];g!=null&&(B(g.newValue,g.oldValue)||i(g.newValue??null,g.oldValue??null))};return e().onChanged.addListener(c),t.add(c),()=>{e().onChanged.removeListener(c),t.delete(c)}},unwatch(){t.forEach(r=>{e().onChanged.removeListener(r)}),t.clear()}}}function C(n,e="local"){return`${e}:${n}`}const oe=$.defineItem(C("activity"),{fallback:V.activity}),le=$.defineItem(C("mode"),{fallback:V.mode}),ce=$.defineItem(C("scaleX"),{fallback:V.scaleX}),ue=$.defineItem(C("scaleY"),{fallback:V.scaleY});$.defineItem(C("license"));const G=$.defineItem(C("helpers"),{fallback:V.helpers}),de=$.defineItem(C("tabsInFullscreen"),{fallback:[]}),he=$.defineItem(C("booster"),{fallback:V.booster});async function fe(n,e,t,r){var c;let i=null;n&&(e.insertAdjacentHTML("afterbegin",X),t&&t.nodeName.toLowerCase()==="style"&&(i=document.createElement("div"),(c=t.parentNode)==null||c.insertBefore(i,n),i.appendChild(n)),t&&(t.nodeName.toLowerCase()==="style"&&i?i.insertAdjacentHTML("afterbegin",X):t.insertAdjacentHTML("afterbegin",X)),await oe.getValue()&&(e.dataset[y.body]="",t&&(t.nodeName.toLowerCase()==="style"&&i?i.dataset[y.body]="":t.dataset[y.body]="")),r&&(n.parentElement&&(n.parentElement.dataset[y.inlineParent]=""),n.dataset.uwInline="true"),n.dataset[y.video]="",n.dataset[y.scale]="",n.dataset[y.mode]=await le.getValue(),n.dataset[y.booster]=(await he.getValue()).toString(),n.style.setProperty("--uw-scaleX",String(await ce.getValue())),n.style.setProperty("--uw-scaleY",String(await ue.getValue())),setTimeout(()=>{Ne(n)},400))}function z(n,e,t,r){if(!n)return;const i=e.querySelector('[data-uw-id="booster"]');if(i&&e.removeChild(i),r&&(n.parentElement&&delete n.parentElement.dataset[y.inlineParent],delete n.dataset[y.inline]),t){delete t.dataset[y.body];const c=t.querySelector('[data-uw-id="booster"]');c&&t.removeChild(c)}delete e.dataset[y.body],delete n.dataset[y.video],delete n.dataset[y.mode],delete n.dataset[y.scale],delete n.dataset[y.booster],n.style.removeProperty("--uw-scaleX"),n.style.removeProperty("--uw-scaleY")}function Ne(n){var t;if(!n.hasAttribute("style"))return;const e=(t=n.getAttribute("style"))==null?void 0:t.replace(/\s*!important\s*/gi,"");e&&n.setAttribute("style",e)}function Pe(n){if(!n)return null;if(n.nodeName.toLowerCase()==="video")return n;const e=n.querySelectorAll("video"),t=Array.from(e).filter(c=>(c.src||c.currentSrc).startsWith("blob:"));if(t.length)return t[0];const r=Array.from(e).filter(c=>c.src||c.currentSrc);if(r.length)return r[0];const i=n.querySelector("iframe");if(i!=null&&i.contentDocument){const c=i.contentDocument.querySelector("video");if(c)return c}return e[0]??null}function Ve(n){let e=null;if(!n)return e;const t=document.createTreeWalker(n.shadowRoot??n,NodeFilter.SHOW_ELEMENT,{acceptNode(r){if(r.nodeType===Node.ELEMENT_NODE){const i=r.nodeName.toLowerCase();if(i.endsWith("-player")||i.endsWith("-playback"))return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_SKIP}});for(;t.nextNode();){const{currentNode:r}=t;r.nodeType===Node.ELEMENT_NODE&&(e="shadowRoot"in r?r.shadowRoot:null)}return e}function qe(n){const e=n==null?void 0:n.querySelector("video");return e||null}async function Fe(n,e){let t=await fetch(_.runtime.getURL(e)).then(i=>i.text());const r=document.createElement("style");return r.id=n,r.textContent=t,r}function je(n,e){let t=null;return(...r)=>{t&&clearTimeout(t),t=setTimeout(()=>n(...r),e)}}const Q=.5,T={initial:0,final:0};function me(n,e){return Math.hypot(n.clientX-e.clientX,n.clientY-e.clientY)}function J(n){const e=new CustomEvent("pinch",{detail:{direction:n}});document.dispatchEvent(e)}function ge(n){if(n.touches.length!==2)return;const[e,t]=n.touches;T.initial=me(e,t),T.final=T.initial}function ye(n){if(n.touches.length!==2)return;const[e,t]=n.touches;T.final=me(e,t)}function we(n){if(n.touches.length!==0||T.initial===T.final)return;const e=T.final-T.initial;e>T.initial*Q?J("out"):e<-T.initial*Q&&J("in"),T.initial=0,T.final=0}const Re=je(n=>{Math.abs(n.deltaY)>Q*2&&J(n.deltaY<0?"out":"in")},100);function ve(n){n.ctrlKey&&(n.preventDefault(),Re(n))}function Oe(){document.addEventListener("touchstart",ge),document.addEventListener("touchmove",ye),document.addEventListener("touchend",we),document.addEventListener("wheel",ve,{passive:!1})}function We(){document.removeEventListener("touchstart",ge),document.removeEventListener("touchmove",ye),document.removeEventListener("touchend",we),document.removeEventListener("wheel",ve)}const He={allFrames:!0,matches:["https://*/*","http://*/*"],async main(){let n,e=null,t=null,r=document.body,i=null;const c=await Fe("uw-inline-style","/content-scripts/inject.css"),f=Se(),g=Te(),S=Me();_.runtime.onMessage.addListener(u=>{"currentTab"in u&&(n=u.currentTab)}),S.onSelect(async u=>{z(i,r,t,!0),S.unregister(),i=u,fe(i,r,t,!0)}),f.onChange(async()=>{if(n){const u=await de.getValue();await de.setValue(f.isActive?[...u,n]:u.filter(v=>v!==n));const m=await G.getValue();m.includes(n)&&await G.setValue(m.filter(v=>v!==n))}if(f.isActive){if(i=Pe(f.element),!i){if(e=Ve(f.element),!e)return;t=e.parentElement??e.firstElementChild,i=qe(e),e.querySelector("#uw-inline-style")||e.appendChild(c)}Oe(),fe(i,r,t)}else We(),z(i,r,t),g.cleanup(),i=null}),oe.watch(u=>{u?(r.dataset[y.body]="",t&&(t.dataset[y.body]="")):(delete r.dataset[y.body],t&&delete t.dataset[y.body]),i&&(g.inject(i),g.setText(`${_.i18n.getMessage("activity_label")}: ${u?"On":"Off"}`))}),le.watch(u=>{!i||typeof u!="string"||(i.dataset[y.mode]=u,g.inject(i),g.setText(`${_.i18n.getMessage("mode_label")}: ${_.i18n.getMessage(`mode_${u}`)}`))}),ce.watch((u,m)=>{i&&(i.style.setProperty("--uw-scaleX",String(u)),g.inject(i),g.setText(`${_.i18n.getMessage("scale_label")}: ${u>m?_.i18n.getMessage("increment_x_sr"):_.i18n.getMessage("decrement_x_sr")}`))}),ue.watch((u,m)=>{i&&(i.style.setProperty("--uw-scaleY",String(u)),g.inject(i),g.setText(`${_.i18n.getMessage("scale_label")}: ${u>m?_.i18n.getMessage("increment_y_sr"):_.i18n.getMessage("decrement_y_sr")}`))}),G.watch((u,m)=>{if(!n)return;const v=u==null?void 0:u.includes(n),M=m==null?void 0:m.includes(n);v&&!M&&S.register(),!v&&M&&(z(i,r,t,!0),S.unregister(),g.cleanup(),i=null)}),he.watch(u=>{i&&(i.dataset[y.booster]=u.toString())}),document.addEventListener("pinch",({detail:u})=>{const m={in:"next",out:"prev"};_.runtime.sendMessage({toggle_mode:m[u.direction]})})}};function D(n,...e){}const De={debug:(...n)=>D(console.debug,...n),log:(...n)=>D(console.log,...n),warn:(...n)=>D(console.warn,...n),error:(...n)=>D(console.error,...n)},Y=class Y extends Event{constructor(e,t){super(Y.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=t}};F(Y,"EVENT_NAME",ee("wxt:locationchange"));let Z=Y;function ee(n){var e;return`${(e=_==null?void 0:_.runtime)==null?void 0:e.id}:inject:${n}`}function Ue(n){let e,t;return{run(){e==null&&(t=new URL(location.href),e=n.setInterval(()=>{let r=new URL(location.href);r.href!==t.href&&(window.dispatchEvent(new Z(r,t)),t=r)},1e3))}}}const j=class j{constructor(e,t){F(this,"isTopFrame",window.self===window.top);F(this,"abortController");F(this,"locationWatcher",Ue(this));this.contentScriptName=e,this.options=t,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return _.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,t){const r=setInterval(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(e,t){const r=setTimeout(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(e){const t=requestAnimationFrame((...r)=>{this.isValid&&e(...r)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(e,t){const r=requestIdleCallback((...i)=>{this.signal.aborted||e(...i)},t);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(e,t,r,i){var c;t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(c=e.addEventListener)==null||c.call(e,t.startsWith("wxt:")?ee(t):t,r,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),De.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:j.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")}listenForNewerScripts(e){let t=!0;const r=i=>{var c,f;if(((c=i.data)==null?void 0:c.type)===j.SCRIPT_STARTED_MESSAGE_TYPE&&((f=i.data)==null?void 0:f.contentScriptName)===this.contentScriptName){const g=t;if(t=!1,g&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}};F(j,"SCRIPT_STARTED_MESSAGE_TYPE",ee("wxt:content-script-started"));let te=j;const Ye=Symbol("null");let Xe=0;class Be extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[t,r]of e)this.set(t,r)}}_getPublicKeys(e,t=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const r=this._getPrivateKey(e,t);let i;return r&&this._publicKeys.has(r)?i=this._publicKeys.get(r):t&&(i=[...e],this._publicKeys.set(r,i)),{privateKey:r,publicKey:i}}_getPrivateKey(e,t=!1){const r=[];for(let i of e){i===null&&(i=Ye);const c=typeof i=="object"||typeof i=="function"?"_objectHashes":typeof i=="symbol"?"_symbolHashes":!1;if(!c)r.push(i);else if(this[c].has(i))r.push(this[c].get(i));else if(t){const f=`@@mkm-ref-${Xe++}@@`;this[c].set(i,f),r.push(f)}else return!1}return JSON.stringify(r)}set(e,t){const{publicKey:r}=this._getPublicKeys(e,!0);return super.set(r,t)}get(e){const{publicKey:t}=this._getPublicKeys(e);return super.get(t)}has(e){const{publicKey:t}=this._getPublicKeys(e);return super.has(t)}delete(e){const{publicKey:t,privateKey:r}=this._getPublicKeys(e);return!!(t&&super.delete(t)&&this._publicKeys.delete(r))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new Be;function Ze(){}function U(n,...e){}const Ge={debug:(...n)=>U(console.debug,...n),log:(...n)=>U(console.log,...n),warn:(...n)=>U(console.warn,...n),error:(...n)=>U(console.error,...n)};return(async()=>{try{const{main:n,...e}=He,t=new te("inject",e);return await n(t)}catch(n){throw Ge.error('The content script "inject" crashed on startup!',n),n}})()}();
inject;
