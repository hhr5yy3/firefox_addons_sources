var n;Array.prototype.Fb||(Array.prototype.Fb=function(a){0>a&&(a+=this.length);return this[a]});Array.prototype.includes||(Array.prototype.includes=function(a,b){return 0<=this.indexOf(a,b)});NodeList.prototype[Symbol.iterator]||(NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]);HTMLCollection.prototype[Symbol.iterator]||(HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]);
const aa=Boolean,w=Object.isExtensible,y=RegExp.prototype.test,ba=RegExp.prototype.exec,ca=Array.isArray,da=Array.from,ha=Array.prototype.includes;Array.prototype.concat.bind([]);const ia=Function.call.bind(Array.prototype.slice),ja=Function.apply.bind(Array.prototype.push),ka=Function.apply.bind(String.fromCharCode,null),B=Math.floor,C=Math.random;navigator.userAgent.includes("Firefox/");var D=0,la,ma,na,oa;const E="undefined"==typeof globalThis?this:globalThis,G=browser.runtime.getManifest();
var pa=G.permissions.includes("notifications")||null;const qa={16:"images/logo16.png",32:"images/logo32.png"},ra={16:"images/logo16x.png",32:"images/logo32x.png"},H=["127.0.0.1:1001","0.1.0.1:1001"],sa=/(?!)/,ta=["main_frame","sub_frame"],ua=["object","image"];var va=ua.concat("xmlhttprequest",[]),wa=ta.concat(ua,"xmlhttprequest","other");
const I=["*://*/*"],xa=["ftp://*/*"],ya=I.concat(xa,"file:///*",[]),za=I.concat([]),Aa=browser.runtime.getURL("captured.html?"),Ba=browser.runtime.getURL("welcome.html?"),Ca=browser.runtime.getURL("").slice(0,-1),Da=location.href;var Ea=!1;
const Fa=y.bind(/^(?:chrome|about|chrome-extension|chrome-search|ms-browser-extension|ms-appx-web|moz-extension):/),Ga=y.bind(/^(?:Host|Origin|Referer|Cookie|User-Agent|Connection|DNT|Accept-Encoding|Sec-.+)$/i),Ha=y.bind(/^(?:application\/(?:json|x-javascript)|text\/(?:javascript|plain))$/),Ia=y.bind(/^(HTM|HTML|CGI|PHP|ASP|ASPX|JSP|JSPX)$/i),Ja=y.bind(/^(MPD|M3U8|F4M)$/i),Ka=y.bind(/^ftp:|^idmreg:|\bidman|\binternetdownloadmanager\b/i),La=y.bind(/^[GPTSDVACRHX]*$/),Ma=ba.bind(/^(.*?)(,\s*)?\bapplication\/vnd\.t1c\.([^\s,]+)(?:,\s*)?(.*)$/);
ba.bind(/:\/\/.+\/([^/]+?(?:\.([^./]+?))?)(?=[?#]|$)/);
const Na=ba.bind(/\.([^.\\/]*?)(?:\.[0-9.]+)?$/),Oa=ba.bind(/^v(\d+)\.(\d+)(?:b(\d+))?\b/),Pa=ha.bind([301,302,303,307,308]),Qa=ha.bind([301,302,303]),Ra=/[:,;]/,Sa=/[,;]/,Ta=y.bind(/no such native application|application is not installed/i),Ua=y.bind(/^(?:https?|socks[45])$/),Va=[],Wa={"-1":[2,[111,112],[111]],1:[2,[115,116,117,124,118,119,120,121,127,123,125,126,129,130],[115,111,112,113,114]],2:[2,[114,113,113,115,116,117,118,122,119,125,126,124,121,120,123,112],[111,112,114]],3:[null,[113,114,
115,116,117],[112]],4:[2,[111,101,113,112,114,118,119,124,115,116,117,120,121,122,123],[111]],5:[null,[111,112,113],[111]],6:[null,[],[111]]},Xa={16:1,17:2,18:4,45:8,46:16},Ya={http:1,https:9,ftp:2,ftps:10,idmreg:12,idmdwnlmfv3:33,idmdwnlmfv4:33},Za={"text/html":"HTML|HTM","text/css":"CSS","text/javascript":"JS|JSON","text/mspg-legacyinfo":"MSI|MSP","text/plain":"TXT|VTT|SRT|M3U|PLS|M3U8|MPD|F4M|TORRENT|BTT","text/srt":"SRT","text/vtt":"VTT|SRT","text/xml":"XML|MPD|F4M|TTML|TTML2","text/x-javascript":"JS|JSON",
"text/x-json":"JSON","application/dash+xml":"MPD","application/f4m+xml":"F4M|MPD","application/gzip":"GZ","application/javascript":"JS","application/json":"JSON","application/json+protobuf":"JSON","application/msword":"DOC|DOCX|DOT|DOTX","application/ocsp-response":"OCSP","application/octet-stream-m3u8":"M3U8","application/pdf":"PDF","application/pkix-crl":"CRL","application/torrent":"TORRENT|BTT","application/ttaf+xml":"DFXP","application/ttml+xml":"TTML|TTML2","application/vnd.apple.mpegurl":"M3U8",
"application/vnd.yt-ump":"UMP","application/zip":"ZIP","application/x-7z-compressed":"7Z","application/x-aim":"PLJ","application/x-bittorrent":"TORRENT|BTT","application/x-chrome-extension":"CRX","application/x-compress":"Z","application/x-compress-7z":"7Z","application/x-compressed":"ARJ","application/x-dosexec":"EXE","application/x-gtar":"TAR","application/x-gzip":"GZ","application/x-gzip-compressed":"GZ","application/x-javascript":"JS","application/x-mpegurl":"M3U8","application/x-msdos-program":"EXE|DLL",
"application/x-msi":"MSI","application/x-msp":"MSP","application/x-ole-storage":"MSI|MSP","application/x-rar":"RAR","application/x-rar-compressed":"RAR","application/x-sdlc":"EXE|SDLC","application/x-shockwave-flash":"SWF","application/x-silverlight-app":"XAP","application/x-subrip":"SRT","application/x-tar":"TAR","application/x-zip":"ZIP","application/x-zip-compressed":"ZIP","video/3gpp":"3GP|3GPP","video/3gpp2":"3GP|3GPP","video/avi":"AVI","video/f4f":"F4F","video/f4m":"F4M","video/flv":"FLV","video/mp2t":"TS|TSV|M3U8",
"video/mp4":"MP4|M4V|M4S","video/mpeg":"MPG|MPEG","video/mpegurl":"M3U|M3U8","video/mpg4":"MP4|M4V","video/msvideo":"AVI","video/quicktime":"MOV|QT","video/vnd.mpeg.dash.mpd":"MPD","video/webm":"WEBM","video/x-flash-video":"FLV","video/x-flv":"FLV","video/x-mp4":"MP4|M4V","video/x-mpegurl":"M3U|M3U8","video/x-mpg4":"MP4|M4V","video/x-ms-asf":"ASF","video/x-ms-wmv":"WMV","video/x-msvideo":"AVI","audio/3gpp":"3GP|3GPP","audio/3gpp2":"3GP|3GPP","audio/mp2t":"TS|TSA|M3U8","audio/mp3":"MP3","audio/mp4":"M4A|MP4|M4S",
"audio/mp4a-latm":"M4A|MP4","audio/mpeg":"MP3","audio/mpeg4-generic":"M4A|MP4","audio/mpegurl":"M3U|M3U8","audio/webm":"WEBM","audio/wav":"WAV","audio/x-mpeg":"MP3","audio/x-mpegurl":"M3U|M3U8","audio/x-ms-wma":"WMA","audio/x-wav":"WAV","ilm/tm":"MP3","image/avif":"AVIF","image/gif":"GIF|GFA","image/icon":"ICO|CUR","image/jpg":"JPG|JPEG","image/jpeg":"JPG|JPEG","image/png":"PNG|APNG","image/tiff":"TIF|TIFF","image/vnd.microsoft.icon":"ICO|CUR","image/webp":"WEBP","image/x-icon":"ICO|CUR","flv-application/octet-stream":"FLV"};
function J(a,b,c,d,e,f,k,g){if(a){var h=["MSG#",a,"#",b,"#",c,"#",d];this.f=a;this.type=b;this.o=c;this.h=d;this.a=e||[];this.i=h;this.C=k;this.v=g;if(e)for(var l of e)h.push(":",l||0);if(f)for(var m in f)if(parseInt(m)&&(a=void 0,b=f[m],null!=b&&!this.g))switch(c=this.i,d=this.C,k=this.v,e=d&&k,k=k?"/":":",g=b instanceof String?"string":typeof b,c.push(",",m,"="),g){case "string":c.push($a(b),":",b);break;case "number":c.push(b);break;case "boolean":c.push(b?1:0);break;case "object":if(b instanceof
Array){g=c.length;l=h=0;for(a of b)a instanceof ArrayBuffer||a instanceof Uint8Array?(d?(a=ab(a),h+=a.length):h+=a.byteLength,++l):(a=a.toString(),h+=$a(a)),c.push(a);l&&e?(b=btoa(c.splice(g).join("")),c.push(b.length,"%",b)):c.splice(g,0,h,l?k:":")}else b instanceof ArrayBuffer||b instanceof Uint8Array?e?(b=btoa(ab(b)),c.push(b.length,"%",b)):d?(b=ab(b),c.push(b.length,":",b)):c.push(b.byteLength,k,b):b instanceof Blob&&c.push(b.size,k,b)}}else this.m=new FileReader}
function bb(){this.a=bb.prototype.h++}bb.prototype.h=1;function cb(a,b,c,d){this.id=a;this.port=b;c&&(this.b=c=c.toLowerCase(),this.ba="iframe"==c);d&&(this.c=d)}cb.prototype.a=0;function db(a,b,c){this.id=b+","+a;this.A=0==a;this.b=null==c||0>c?null:b+","+c}function eb(){}function fb(a){a.g||(a.i.push(";"),a.g=!0);return a.i.join("")}function gb(a){a.g||(a.i.push(";"),a.g=!0);return new Blob(a.i)}function hb(a,b,c){a.g?a.b(a):(b.a=c||0,b.b=0,a.m.onload=a.s.bind(a,b),ib(a,b,0,50))}
J.prototype.s=function(a){for(var b=this.m.result;;)switch(a.b){case 0:var c=b.search(Ra);if(0>=c)return this.b(this);var d=b[c],e=b.slice(0,c++).split("#",6);if(5!=e.length||"MSG"!=e[0])return this.b(this);this.f=parseInt(e[1]);this.type=parseInt(e[2]);this.o=parseInt(e[3]);this.h=parseInt(e[4]);b=b.slice(c);a.a+=c;a.b=":"==d?1:","==d?2:5;break;case 1:c=b.search(Sa);if(0>=c)return c?ib(this,a,b.length,100):this.b(this);d=b[c];e=this.a=b.slice(0,c++).split(":");for(var f=0;f<e.length;f++){var k=e[f];
e[f]=k.includes(".")?parseFloat(k):parseInt(k)}b=b.slice(c);a.a+=c;a.b=","==d?2:5;break;case 2:c=b.search(Ra);if(0>=c)return c?ib(this,a,b.length,25):this.b(this);d=b[c];e=b.slice(0,c++).split("=",3);if(2!=e.length)return this.b(this);f=parseInt(e[0]);e=parseInt(e[1]);a.a+=c;if(":"==d){a.f=f;a.c=e;a.b=3;b=a.c;c=a.a;a=a.slice(c,c+b);a.size==b?this.m.readAsText(a):this.b(this);return}this[f]=e;b=b.slice(c);a.b=","==d?2:5;break;case 3:return this[a.f]=b,a.a+=a.c,a.b=4,ib(this,a,0,21);case 4:switch(b[0]){case ",":a.b=
2;b=b.slice(1);break;case ";":a.b=5;break;default:return this.b(this)}a.a++;break;case 5:this.g=!0;this.j(this);a.size>a.a&&(b=new J,b.j=this.j,b.b=this.b,hb(b,a,a.a));return}};function ib(a,b,c,d){var e=b.a;c=e+c;b.size>c?a.m.readAsBinaryString(b.slice(e,c+d)):a.b(a)}
function K(){var a=this.constructor.prototype,b;for(b in a)b.startsWith("_")||"constructor"==b||(this[b]=a[b].bind(this));this.m=0;this.v=null;this.ua=this.va=0;this.zb=1;this.o=null;this.Fa=G.version||"";this.Za="";this.ka=0;this.ma=!1;this.ta=null;this.sa=!1;this.J=null;this.C=this.Ab=this.pb=this.eb=this.ra=!1;this.rb=!0;this.ob=this.I=this.H=null;this.nb=this.la=this.na=!1;this.yb=!0;this.Cc=1;this.Ea=this.j=this.M=null;this.Ia=1;this.oa=this.G=this.Ga=null;this.fb=sa;this.$=[];this.Ha=0;this.qb=
null;this.Xa=this.sb=!1;this.Z=null;this.g={};this.h={};this.a={};this.s={};this.b={};this.P={};this.f={};this.c={};this.pa={};this.i={};this.R={};this.qa={};this.qa.zc=[];this.Wa=[];browser.browserAction&&(L(this,!1),browser.browserAction.onClicked.addListener(this.cc));1056964608<=D&&browser.contextMenus.onShown.addListener(this.Nb);browser.runtime.onInstalled.addListener(this.Ub);browser.runtime.onMessage.addListener(this.Tb);browser.windows.onCreated.addListener(this.kb);browser.windows.onRemoved.addListener(this.lb);
browser.windows.onFocusChanged.addListener(this.fc);browser.windows.onBoundsChanged&&browser.windows.onBoundsChanged.addListener(this.hc);browser.tabs.onActivated.addListener(this.Xb);browser.tabs.onUpdated.addListener(this.Wb);browser.tabs.onRemoved.addListener(this.Yb);browser.tabs.onAttached&&browser.tabs.onAttached.addListener(this.Vb);this.Gc();this.ub()}function jb(){}jb.prototype=[];var N=jb.prototype;jb=null;n=K.prototype;n.Nb=function(a,b){b&&kb(this,b.id,!0,!1,!0)};
n.Ub=function(a){this.Fa=a.version=G.version;this.Dc=a};function lb(a,b){b&&browser.storage.local.set({consent:a.Fa});a.I=null;a.Ka(5);a.C=!0;mb(a)}n.Tb=function(a,b){switch(a[0]){case 38:a[1]&&this.ma&&browser.storage.local.set({silent:!0});browser.tabs.remove(b.tab.id);break;case 42:lb(this,!0);break;case 43:browser.management.uninstallSelf({showConfirmDialog:!0})}};
n.cc=function(a){if(this.nb){if(this.I)return browser.windows.update(this.I,{focused:!0});var b=a.id,c=this.i[b];L(this,c,b,!0);this.la&&(c?(this.V(a.windowId),nb(this,b)):O(this,b))}};function L(a,b,c,d){c?a.i[c]=!b:a.nb=b||d;ob(b,c,d)}
function ob(a,b,c){if(c||!b||!a){var d=a;b||(a||c?browser.browserAction.enable():browser.browserAction.disable(),d=!0);c=a?pb+qb:b?rb+qb:c?rb:sb;var e=d?qa:ra,f=b&&989855744<=D;browser.browserAction.setTitle({title:a&&f?null:c,tabId:b});browser.browserAction.setIcon({path:d&&f?null:e,tabId:b});a||browser.browserAction.setBadgeBackgroundColor({color:"#606060"});browser.browserAction.setBadgeText({text:a?f?null:"":"X",tabId:b})}}
function mb(a){var b=a.g,c=a.R={};browser.contextMenus.removeAll();for(var d=0;d<tb.length;d++){var e=tb[d];e[0]&&b[e[1]]&&(c[d]=browser.contextMenus.create({title:ub(e[2]),contexts:e[3].split(","),onclick:e[4].bind(a),documentUrlPatterns:e[5]||ya,enabled:!0}))}a.la||(a.la=!0,L(a,!0),a.D(1,browser.runtime.onConnect,a.Sb),a.D(1,browser.webNavigation.onCreatedNavigationTarget,a.Ob),a.D(1,browser.webNavigation.onCommitted,a.jb),a.D(1,browser.webNavigation.onHistoryStateUpdated,a.ec),(b=a.g[17])&&a.D(2,
browser.webRequest.onBeforeRequest,a.jc,{urls:b.split("|"),types:ta},["blocking"]),vb(a,!0),browser.tabs.query({url:I},a.Ca))}
function vb(a,b){if(b){b=oa?void 0:wa;const c=["blocking"];a.D(4,browser.webRequest.onBeforeRequest,a.mb,{urls:xa,types:ta},c);a.D(4,browser.webRequest.onBeforeRequest,a.mb,{urls:I,types:b},["requestBody"]);a.D(4,browser.webRequest.onBeforeSendHeaders,a.lc,{urls:I,types:b},["requestHeaders"].concat(c,[]));a.D(4,browser.webRequest.onHeadersReceived,a.oc,{urls:I,types:b},["responseHeaders"].concat(c));a.D(4,browser.webRequest.onResponseStarted,a.mc,{urls:I,types:b});a.D(4,browser.webRequest.onErrorOccurred,
a.nc,{urls:I,types:b});a.D(4,browser.webRequest.onBeforeRedirect,a.kc,{urls:I,types:ta})}else a.Ka(3,4)}function wb(a,b,c,d){if(b){var e=b.type;if("direct"==e)return"0";"socks"==e&&(e="socks5");if(Ua(e)){var f="1:"+e+"://"+b.host+":"+b.port;"socks5"==e&&b.proxyDNS&&(f+="#");c||d||!(c=a.Z)||(c=c.substr(c.indexOf(";")+1||c.length));c&&(f+=";"+c);d&&f&&(a.Z=f);return f}}}
n.Lc=N[N.length]=function xb(a,b){if(void 0===a){if(Ea&&this.m){var d=this.G;d||(b="http://"+(1==this.m?(new URL(this.v.url)).host:H[0]),d=b+"/status/204+IDM");a=new XMLHttpRequest;a.timeout=1E3;a.onreadystatechange=xb.bind(this,a,b);a.open("GET",d,!0);a.send()}}else 4==a.readyState&&(204!=a.status?this.G=this.oa=null:b&&(this.G=b+"/status/204+IDM"))};n.Qa=function(a,b,c,d){var e=this.f;return b in e?e[b]:e[b]=new cb(b,a,c,d)};
function yb(a,b){a=a.c;var c=b.id;a[c]!==b&&(a[c]=b);b.Aa&&(a[b.Aa]=b)}function zb(a,b,c,d,e){if(w(b)){var f=b.frameId||0;var k=b.parentFrameId;var g=b.method&&b.id;c||(c=b.tabId);e||(e=b.url)}else f=b;var h=a.s[c+","+f];h||(h=new db(f,c,k),a.s[h.id]=h);g?(h.f!=g&&(h.f=g,h.j=e,h.B=!1,h.c&&(h.c=e.startsWith(b.initiator||b.originUrl))),h.h="POST"==b.method):e&&(e.startsWith("about:blank")?f&&(h.c=!0):h.l=e);null!=d&&(h.refresh=d);return h}function Ab(a,b){return a.s[b.tabId+","+b.frameId]}
function Db(a){var b=new bb;return a.P[b.a]=b}function Eb(a,b){var c;b instanceof bb?c=b.a:b=a.P[c=b];delete a.P[c];return b}function Fb(a,b){for(var c of a.$)if(c&&c[101].test(b))return c.ga;return 0}
n.Pa=function(){var a=this.va%(H.length+1);if(a<H.length){a=H[a];var b=this.ta||0,c=C().toString().substr(2,9);a=this.v=new WebSocket("ws://"+a+"/?cid="+b+"&rnd="+c,"plugin.v3.internetdownloadmanager.com");a.onopen=this.Ma;a.onclose=this.ca;a.onmessage=this.bc;a.onerror=P;1==a.readyState?this.Ma(1):3==a.readyState?this.ca():this.o=E.setTimeout(this.ca,1500,a)}else a=this.v=browser.runtime.connectNative("com.tonec.idm"),a.onDisconnect.addListener(this.ca),a.onMessage.addListener(this.Lb),this.o=E.setTimeout(this.Ma,
0,2)};n.Ma=function(a){this.o&&(E.clearTimeout(this.o),this.o=null);this.m=w(a)?1:a;this.zb=1;this.ma=!1;a=browser.i18n.getUILanguage().replace("_","-");"sr"==a&&(a+="-Cyrl-CS");var b=[102,73,1031,0,16845059,this.ta],c={};c[112]=ma;c[113]=la;c[114]="MozillaWindowClass";c[125]=JSON.stringify(this.Dc);c[116]=a;Q(this,2,3,1024,b,c)};
n.ca=function(a){this.o&&(E.clearTimeout(this.o),this.o=null);var b=browser.runtime.lastError||a&&a.error,c=this.v;if(c instanceof WebSocket){if(a===c)return c.close()}else c&&Ta(b&&b.message)&&(this.ma=!0);this.v=null;this.m&&(this.m=0,this.pa={},vb(this,!1),this.Ka(1,2),this.la=!1,this.oa=this.G=null,L(this,!1));a=++this.va;b=H.length+1;c=a/b;120>c&&(1==c&&Gb(this),!a||a%b?this.Pa():E.setTimeout(this.Pa,5E3*c))};n.ib=function(){var a=this.v;a instanceof WebSocket?a.close():a&&(a.disconnect(),this.ca())};
n.bc=function(a){var b=new J;b.j=this.hb;b.b=this.ib;hb(b,a.data)};n.Lb=function(a){var b=new J;b.j=this.hb;b.b=this.ib;hb(b,new Blob([a]))};function Q(a,b,c,d,e,f,k){var g=a.ua,h=a.m;if(!h)return 0;1==b&&92>g&&4>e.length&&(e.length=4);var l=a.zb++;b=new J(l,b,c,d,e,f,2==h,99<=g);if(k)return k.open("POST",a.oa+"?seq="+l,!1),k.send(gb(b)),200==k.status?l:0;if(1==h)a.v.send(gb(b));else try{a.v.postMessage(fb(b))}catch(m){return a.ca(),0}d&1&&(a.pa[l]=b);return l}
function Hb(a,b){if(b.a){var c=b.a[1],d=a.c[c];if(d)return d.S?b.c=d.port.id:null;d=a.h;for(var e in d)if(d[e].c==c)return b.c=e}e=b[6];d=b[17];var f=b[50],k=b[7],g=a.qa,h=a.f;a=a.a;var l;if((l=g[e])||(l=g[d]))return b.c=l.id;if(l=g[f])var m=l.id;for(c in h){g=h[c];var r=g.c;if(r){if(r==e||r==d||r==f){l=g.port;if(k){var p=a[l.tabId];p&&p.l!=k&&(l=null)}if(l)return b.c=l.id}if(r==k)var q=g.port.id}}return m?b.c=m:q?b.c=q:null}
n.Kc=N[N.length]=function Ib(a,b,c,d){var f;a:for(;!c;){if(f=a.c)return f;if(a.a){var k=this.a[a.a[6]+","+a.a[7]];k?f=k.id:(k=a.a[7])&&this.h[k]&&(f=k)}if(f||(f=Hb(this,a)))break;var g=this.h,h=a[50],l=a[7],m;for(m in g){k=g[m];if(k.l==h){f=m;break a}k.l==l&&(f=m)}if(f)break;return l?browser.tabs.query({url:l},Ib.bind(this,a,b,!0)):null}return c?(browser.runtime.lastError,d&&(d=d.shift())&&(k=this.a[d.id])&&(f=a.c=k.id),b&&b(f)):a.c=f};
n.$a=N[N.length]=function Jb(a,b,c){var e=a.tabId,f=a.O;if(b)if(ca(c))for(var k=a.l,g=k.includes("#")&&Kb(k),h=c.length;h--;){b=c[h];var l=b.frameId;if(l!=f)if(l&&!b.Rc&&(b.url==k||g&&b.url==g))f=a.O=l;else continue;var m=b.parentFrameId;break}else c?m=c.parentFrameId:browser.runtime.lastError;else if(0<f?!a.b:null==f){if(f&&822083584<=D)return browser.webNavigation.getFrame({frameId:f,tabId:e},Jb.bind(this,a,!0));if(f||a.l)return browser.webNavigation.getAllFrames({tabId:e},Jb.bind(this,a,!0))}0<=
m&&(a.b=e+","+m);if(null!=f&&a.g){if(b=this.s[e+","+f])a.c=b.f,a.B|=b.B,a.refresh|=b.refresh,a.i=b.c,(c=b.Y)&&a.l!=c&&(a.Y=c),a.b||(a.b=b.b),(c=this.c[a.c])&&!c.port&&(c.port=a);this.a[e+","+f]=a;m=this.eb?1:null;c=a.ga;e=[11,this.ua,a.id,e,f,c,a.refresh,a.B,m&&Va[m]];c&&a.B&&(f=this.$[c],e.push(Va[f.rc]),ja(e,f.Bc.map(Lb(f)).map(Mb)));a.postMessage(e)}};
n.aa=N[N.length]=function Nb(a,b,c,d,e,f,k,g){var l=Ob(a);if(l){var m=0<(l&32),r=1==(l&=7);if(r&&!m&&!k)return R(a,Nb.bind(this,a,b,c,d,e,f,!0));k=[l];l={};l[6]=Kb(a,r,this);l[50]=b;l[7]=c;l[8]=d;l[100]=e;l[102]=f;l[51]=S(g);l[54]=navigator.userAgent;l[121]=this.Z;Q(this,14,1,0,k,l)}};
n.Gb=N[N.length]=function Pb(a,b,c,d,e,f){if(a&&a.length){if(c){var g=c.c;var h=c.Z;var l=c.j}if(!d){if(!a||!a.length)return;f=Qb();g&&!h&&R(g,e=T());for(var m of a)R(m[0],f[f.length]=T());return U(Pb,this,a,b,c,!0,e,f)}e&&(h=S(e));for(m of a)m[5]=S(f.shift());b=0;c=[0,0,0];d={8:4};d[54]=navigator.userAgent;d[7]=g;d[110]=l;d[111]=h;d[121]=this.Z;1<a.length&&(c[1]=Q(this,15,1,0,[a.length],d),b=16,d={});for(m of a)c[2]++,d[6]=m[0],d[100]=m[2],d[102]=m[3],d[50]=m[4],d[51]=m[5],Q(this,14,2,b,c,d)}};
n.xb=function(a,b){if(!this.m)return Rb(b.id,"cannot_contact_idm");var c=a.linkUrl,d=a.pageUrl,e=d;if(a.menuItemId==this.R[4])return browser.downloads.search({query:[c]},this.xc.bind(this,c));if(a.menuItemId==this.R[1])c=a.frameUrl,c&&"about:blank"!=c||(c=d,e=null);else if(!c&&(c=a.srcUrl,(a=this.a[b.id+","+a.frameId])&&c)){var f=Db(this);f.tabId=b.id;f.port=a;f.m=c;f.o=e;f.c=d;f.i=4;return a.postMessage([18,f.a,c])}c&&this.aa(c,e,d,4)};
n.wb=function(a,b){if(!this.m)return Rb(b.id,"cannot_contact_idm");kb(this,b.id,a.menuItemId==this.R[2])};n.xc=function(a,b){for(var c,d,e;c=b.pop();)c.exists&&"complete"==c.state?d||e||(e=c.referrer):(d||(d=c.referrer),browser.downloads.erase({id:c.id}));this.aa(a,d||e,null,4)};
function kb(a,b,c,d,e,f,k,g,h){if(!d||a.g[-5]){var l=a.a[b];if(l){var m=Db(a);m.tabId=b;m.port=l;m.s=c;m.C=e;m.b=0;m.f=[];if(l=d&&!!f)m.J=!0,m.$=f,m.M=k,m.P=g,m.G=h,f.A||Sb(a,f);f=m.a;(d=d&&a.g[12])?(d=d.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/~/g,"(?:.*\\.)?"),d="^(?:http|https|ftp|ftps)://(?:[^\\/]*@)?(?:"+d+")(?::\\d+)?(?:\\W|$)"):d="^(?:http|https|ftp|ftps)://";m.g=Tb(a,b,[12,f,c,l||e,d]);m.v=0;m.g||Eb(a,m)}}}
n.Ec=function(a,b,c,d,e,f,k,g){if(a=this.P[b]){d&&(a.b+=d);k&&(a.c=k);g&&(a.j=g);if(e&&("string"==typeof e&&(e=JSON.parse(e)),e instanceof Array)){if(f)for(var h of e)h[4]=f;ja(a.f,e)}++a.v<a.g||(a.J?(d=a.tabId,(e=this.b[a.port.a])&&e.u==d&&a.b&&(f=a.G,k=e.b,g=e.a,Q(this,10,1,0,[4294967295,e.h,Math.round(a.M*f+(e.f+k)*g),Math.round(a.P*f+(e.C+k)*g),0,a.b]),this.j=d,Tb(this,d,[13,!0]))):a.C?(d=0<a.b,this.yb!=d&&(this.yb=d,browser.contextMenus.update(this.R[2],{visible:d}),browser.contextMenus.refresh())):
(d=a.f,d.length?this.Gb(d,a.s,a):Rb(a.tabId,"cannot_find_links")),Eb(this,a))}};n.$b=function(a,b,c,d){(a=Eb(this,b))&&this.aa(a.m,a.o,a.c,a.i,c,d)};n.Qb=function(a,b,c,d,e,f){this.Qa(a,b,c,d);a=[b,a.tabId,a.c,a.ga,a.O];b={};b[132]=d;b[133]=e;b[134]=f;Q(this,23,2,0,a,b)};
n.U=N[N.length]=function Ub(a,b,c){if(4294967295==a)this.j=null,c=!0;else{var e=this.f[a];if(e){c=e.a;if(!c)return;if(b)switch(c){case 3:return;case 2:break;default:e.a=3;E.setTimeout(Ub.bind(this),1E3,a,!1,!0);return}e.a=0;c=!0}}c&&Q(this,8,1,32,[a])};
n.wc=function(a,b,c,d,e,f,k,g,h,l){var m=a.tabId,r=a.a,p=this.b[r],q=this.i[m];if(b){var t=Eb(this,b);if(t=t&&t.R){if(!c&&a.i){var z=this.a[a.b];if(z)return z.postMessage([15,b,null,t[6],t[17],t[50],t[31],t[133],t[134]])}var v,u;b={};if(!d){if(!c||null==e){if(!a.A){c=a.ja;f="iframe";k=a.l;var x=!!c}if(!x){c=m;f=k=null;var F=!0}}a=this.Qa(a,c,f,k);p=m==p.u&&!p.K&&(F||x||e)&&!q;!p||F||a.a||E.setTimeout(this.V,3E3,r);var A=2;a.a=p?1:2;var M=(p?128:64)|(F?512:0);!g&&(v=this.a[m])&&(g=v.j)}g&&(b[101]=
g,b[128]=h);l&&(b[137]=l);!A||F||q||(u=this.za.bind(this,c,e));V(this,t,A||1,M||0,r,m,c,b,u)}}else d?(this.U(c,!0),delete this.f[c]):m!=p.u||p.K||q||(e?this.za(c,e,!0):Vb(this,c))};function Wb(a,b){var c=a.b[b];if(c&&c.fa){var d=c.b,e=c.a;Q(a,7,2,c.K?128:c.j?256:c.c?512:0,[b,Math.round((c.f+d)*e),Math.round((c.C+d)*e),Math.round((c.width-d-c.G)*e),Math.round((c.height-d)*e)])}}
n.za=function(a,b,c){var d=this.f[a];if(d&&d.a){var e=d.port,f,k=256;2==d.a&&(null==c&&(f=this.b[e.a])&&(c=e.tabId==f.u&&!f.K),c?(k|=128,d.a=1):k|=64);(c=d.ba)&&!b&&(b=e.f);if(b){var g=b[0];var h=b[1];var l=b[2]||g+1;var m=b[3]||h+1;var r=b[4];if(b=!c&&e.f)g+=b[0],h+=b[1],l=Math.min(l+b[0],b[2]),m=Math.min(m+b[1],b[3]);if(e=this.a[e.tabId])var p=e.o}Q(this,9,1,k,[a,g,h,l,m,r,p])}};
n.V=function(a){var b=this.i,c=this.a,d=this.b,e=a?[d[a]]:W(d);a=[];d={};for(var f of e)!f||f.K||f.X||b[f.u]||a.push(f.u);if(a.length)for(var k of W(this.f))k.a&&(b=k.port,f=b.tabId,a.includes(f)&&((f=b.A?b:c[f])&&f.update&&(f.update=!1,f.postMessage([14,!1])),k.b?b.A?b.postMessage([15,null,k.id]):Sb(this,b,null,d):this.za(k.id,null,!0)))};function Xb(a,b){var c=a.b,d;if(b=null==b?W(c):(d=c[b])?[d]:null)for(d of b)O(a,d.u,void 0)}
function O(a,b,c,d){d=0!=d;var e=c?0:2;c=c?32:64;var f=a.f,k;for(k in f){var g=f[k];g.a&&g.port.tabId==b&&g.a!=e&&(d||g.b)&&(g.a=e,Q(a,8,1,c,[k]))}}function Vb(a,b){var c=a.f[b];c&&1==c.a&&(c.a=2,Q(a,8,1,64,[b]))}function Yb(a,b,c,d){var e=a.Ha,f=(e&b)!=((c?255:128)&b);a.Ha=c?e|=b:e&=~b;f&&(c=a.g[-32],b=a.g[-33],c=a.sb=0!=c&&(e&c)==c,e=a.Xa=0!=b&&(e&b)==b,a.qb=(c||e)&&d||null)}
n.tb=N[N.length]=function Zb(a,b,c,d,e){var k=this.b[a];if(k)if(k.X?d&&(E.clearTimeout(k.X),k.X=null):d||(d=-1),0<=d)k.m|=b,k.o|=c,d&&(k.X=E.setTimeout(Zb.bind(this),d,a));else{b|=k.m;c|=k.o;k.m=k.o=k.X=null;if(b){for(var g of W(this.h))g.A&&g.a==a&&(g.update=!0);e?this.L(e):browser.windows.get(a,this.L);browser.tabs.query({windowId:a,active:!0},this.L)}if(c){if((a=this.b[a])&&!a.K&&!a.X&&(a=a.u,!this.i[a])){b=this.f;for(var h in b)c=b[h],c.a&&c.port.tabId==a&&1==c.a&&Q(this,8,1,1152,[h])}}else this.V(a)}};
n.L=N[N.length]=function(a,b){browser.runtime.lastError;a instanceof Array&&(a=a.shift());if(a){var c=a.windowId||a.id,d=this.b[c];if(d){if(a.windowId){if(d.J&&Fa(a.url))return;a.active&&(d.u=a.id);a.width&&(d.v=a.width);a.height&&(d.s=a.height)}else{b&&(d.a=this.Ia);var e=d.c="minimized"==a.state,f=d.j="maximized"==a.state;e||(d.width=a.width,d.height=a.height,d.g=a.left,d.i=a.top,e=d.K,a=d.K="fullscreen"==a.state,f=f&&-d.g,0<f&&16>=f&&f==-d.i&&(d.b=f),a==e||b||(a?Xb(this,c):this.V(c)))}if(!d.c){f=
d.v;e=d.height;a=d.s;if(!f||!a)return;var k=d.width-f;f=k/2;0<=f&&16>=f?(d.b=f,d.f=d.G=0):(f=d.b,d.f=k-2*f);f=e-a-2*f;f>=(d.M?20:50)&&220>=f&&(d.C=f);d.J=!0}b||Wb(this,c);return d}}};function nb(a,b){return a.i[b]?!0:(a=a.a[b])&&a.refresh?(a.refresh=!1,browser.tabs.reload(b),!0):!1}n.tc=function(a,b,c,d){a.l=b;a.s=c;a.refresh&&!d&&(a.refresh=!1);null==a.O&&this.$a(a);this.V(a.a);0<this.J&&a.A&&$b(this)};
n.sc=function(a,b,c,d,e){a.j=b;a.o=e;a=[a.c,a.tabId,a.a,d,e];d={};d[110]=b;d[128]=c;Q(this,21,1,0,a,d)};
n.vc=function(a,b,c,d,e){var f=a.tabId,k=this.a[f+","+c];if(k){var g=k.f;k.ja=d;if(k.f=e){var h=a.f;h&&(e[0]+=h[0],e[1]+=h[1],e[2]=Math.min(e[2]+h[0],h[2]),e[3]=Math.min(e[3]+h[1],h[3]));if(g&&g.join()!=e.join()){g=this.a;a=a.tabId+",";c=a+c;for(var l in g)l.startsWith(a)&&(h=g[l],h.b==c&&k.postMessage([16,b,h.O,h.ja]))}}if(!this.i[f]){this.za(d,e);for(var m of W(this.f))m.port==k&&m.a&&m.b&&!m.ba&&k.postMessage([15,null,m.id])}}};
function Sb(a,b,c,d){a=a.a;c=[16,c];for(var e=[b],f;f=a[b.b];b=f){if(d)if(d[b.id])break;else d[b.id]=!0;e.push(f)}for(f=e.pop();b=e.pop();f=b)d=b.ja,c[2]=b.O,c[3]=d,c[4]=d?null:b.l,c[5]=d?null:b.Y,f.postMessage(c)}function Tb(a,b,c){a=a.a;b+=",";var d=0,e;for(e in a)e.startsWith(b)&&(a[e].postMessage(c),d++);return d}
n.Ca=function(a,b){var c={file:"content.js",runAt:"document_start",matchAboutBlank:!0};b?c.frameId=b:c.allFrames=!0;if(a instanceof Array)for(;b=a.shift();)try{b.discarded||browser.tabs.executeScript(b.id,c,P)}catch(d){}else if(b=a)try{browser.tabs.executeScript(b.id||b,c,P)}catch(d){}};function ac(a,b,c,d){null==c&&(c=b.h==a.M);c=17|(c?2048:1024)|(b.j?256:b.c?512:0);b=[b.h,b.fa,b.width,b.height,b.g,b.i,b.a];var e={};e[117]=d;Q(a,6,2,c,b,e)}
n.ub=N[N.length]=function bc(a,b,c){if(b){a={};for(var e of c)a[e.windowId]=e;for(var f of b)e=a[f.id],b=this.L(f,!0)||this.kb(f,!0,e),ac(this,b,f.focused,f.title||e&&e.title)}else if(!a){try{browser.windows.getAll({windowTypes:["normal","popup","app"]},b=T())}catch(k){browser.windows.getAll(b)}browser.tabs.query({active:!0},c=T());return U(bc,this,1,b,c)}};
n.Sb=function(a){var b=a.sender.tab;if(b&&!(0>b.id)){a.name=a.name.split(":").shift();var c=a.id;null==c&&(c=a.id=this.Cc++);var d=b.id,e="top"==a.name;a.tabId=d;a.a=0>b.index?null:b.windowId;a.g=!0;a.h=!1;a.update=e;a.A=e;a.O=e?0:a.sender.frameId;a.m=0;a.l=a.sender.url||e&&b.url||null;a.Y=null;this.h[c]=a;e&&(this.a[d]=a);a.l&&(a.ga=Fb(this,(new URL(a.l)).hostname));a.onMessage.addListener(this.Rb.bind(this,a));a.onDisconnect.addListener(this.ya);this.$a(a)}};
n.ya=function(a){browser.runtime.lastError;if(a.g){a.g=!1;var b=a.tabId+","+a.O,c=this.P,d=this.f,e,f=this.qa,k=this.c,g,h;for(h in c)c[h].port===a&&delete c[h];for(h in d)if(e=d[h],e.port===a)this.U(h),delete d[h];for(var l in f)f[l]===a&&delete f[l];for(h in k)(g=k[h],g.port!==a||g.B)||delete k[h];this.qb===a&&Yb(this,255,!1);delete this.h[a.id];delete this.a[b];a.A&&delete this.a[a.tabId];a=this.s;for(h in a)b==a[h].b&&delete a[h]}};
n.Rb=function(a,b){var c=b[0];b[0]=a;switch(c){case 21:this.tc.apply(this,b);break;case 24:this.sc.apply(this,b);break;case 22:this.vc.apply(this,b);break;case 23:this.wc.apply(this,b);break;case 41:this.Qb.apply(this,b);break;case 25:this.Qa.apply(this,b);break;case 26:kb(this,a.tabId,!0,!0,!1,a,b[1],b[2],b[3]);break;case 27:this.Ec.apply(this,b);break;case 28:this.U(4294967295);break;case 29:this.gb.apply(this,b);break;case 30:this.gb.apply(this,b);break;case 31:this.Mb.apply(this,b);break;case 32:this.ic.apply(this,
b);break;case 39:this.ac.apply(this,b);break;case 33:this.Pb.apply(this,b);break;case 34:this.Jb.apply(this,b);break;case 35:this.$b.apply(this,b);break;case 36:this.pc.apply(this,b);break;case 37:this.Zb.apply(this,b)}};
n.hb=function(a){var b=a.type,c=a.o,d=a.h,e=a.a,f;if(1==b){var k=e[0];if(f=this.pa[k])b=f.type,delete this.pa[k]}switch(b){case 3:0<=this.va&&(this.va=-1,this.Lc());var g=e[0];d=e[5];var h=e[6];c=e[4];e=e[8];this.ua=g;this.pb=9>g;this.Ab=10<=g;cc(this,h);dc(this,d,a);ec(this);if(c||e)this.Ia=(c?c/96:1)*(e?e/100:1),this.ub();Gb(this);break;case 4:g=this.g;this.ra=!!(e[3]&2147483648);this.eb=!!(e[3]&1073741824);dc(this,e[2],a);ec(this);d&2048&&(E.idm=this);g[-6]=0<(d&64);g[-10]=0<(d&1024)||!1;g[-5]=
0<(d&32);g[-1]=0<(d&2);g[-8]=0<(d&256)||2>c;g[-9]=0<(d&512)||2>c;g[-32]=e[0];g[-33]=e[1];g[12]=a[12];g[17]=a[17];X(g,a,1);X(g,a,2);X(g,a,3);X(g,a,4);X(g,a,10);X(g,a,9,2);X(g,a,11,2);X(g,a,20);X(g,a,21,1);fc(g,a,19);fc(g,a,18,1,1);mb(this);break;case 18:d=e[0];e=e[1];e=Wa[e?-e:d];if(!e)break;g=this.$[d]={};c=e[2];g.ga=d;g.rc=e[0];g.Bc=e[1];for(h in a)(h=parseInt(h))&&(102==h||110<h&&150>h)&&(g[h]=c.includes(h)?RegExp(a[h]):a[h]);for(h of c)g[h]||(g[h]=sa);e=this.$.map(gc(102)).filter(aa);this.fb=RegExp("^https?://(?:"+
e.join("|")+")","i");X(g,a,101,2);break;case 5:a=e[0];e=e[1];hc(this,a,d,e);break;case 6:if(d&4)break;a=f.a[0];g=e[1];e=e[2];hc(this,a,d,e,g);break;case 8:a=e[0];e=d&32;if(4294967295==a)Tb(this,this.j,[13,!1]),this.j=null;else if(a=this.f[a])a.a=e?0:2;break;case 11:a=e[0];4294967295==a&&(kb(this,this.j,!0,!0),this.j=null);break;case 12:try{var l=a.a[5];e=4==l?2:3;if(1==l||2==l){if(Hb(this,a)){var m=a[4];if(this.g[3].test(m))1==l?e=6:l=4;else if(this.g[-1]||this.g[4].test(m))e=6;a[8]|=256}if(3==e){var r=
this.b[this.M];r&&this.i[r.u]&&(e=1)}}if(4!=l)V(this,a,e);else if(!this.pb||a.a[6]||a.a[7]){switch(a.a[4]){case 1:a[7]||(a[7]=a[50]);break;case 3:a[7]||(a[7]=a[32]),a[50]||(a[50]=a[31])}this.Fc(a)}else V(this,a,1)}catch(p){V(this,a,0)}break;case 13:a=f.a[0];d=f.a[5];e=e[1];if(3>=d)Y(this,a,3==e);else if(5==d)if(e){if(a=(d=this.c[a])&&d.ha){h=d.method;e=d.W;c=d.requestHeaders;e&&((e=ic(e,Z(c,"Content-Type")))?e=new Blob(e):h="GET");a.timeout=1E4;a.onreadystatechange=this.dc.bind(this,a,d.id);a.open(h,
d.url,!0);for(g of c)d=g.name,h=d.toLowerCase(),h.startsWith("x-idm-")||(Ga(h)&&(d="x-idm-"+d),a.setRequestHeader(d,g.value));a.send(e)}}else jc(this,a);break;case 20:e=a[123];g=!e;a=[a.f];d={};if(h=this.Z)d[122]=h,g||(g=h.substr(2).split(";",1).shift()==e);Q(this,1,2,g?2:4,a,d);break;case 24:this.Jc(a);break;case 22:this.Ac(e[0],e[1],a[131],a[130]);break;case 100:d&1&&Q(this,100,1,0,[a.f],a);break;default:d&1&&Q(this,1,2,0,[a.f])}};
n.Ac=N[N.length]=function kc(a,b,c,d,e){if(null==pa){if(void 0===e){(a=kc.bind(this,a,b,c,d))&&browser.runtime.lastError||browser.permissions.request({permissions:["notifications"]},a);return}pa=e}pa&&(browser.notifications.create(a.toString(),{type:"basic",title:d||"",message:c,iconUrl:"images/logo48.png"},P),b&&E.setTimeout(browser.notifications.clear,1E3*b,a.toString(),P))};
n.Jc=N[N.length]=function lc(a,b,c){if(!b)return c=!!(a.h&16),R(a[6],lc.bind(this,a,!0),c);b=browser.runtime.lastError||!c;a=[a.f,c?c.length:0];var e={};c&&(e[51]=S(c));Q(this,1,2,b?4:2,a,e)};
n.Fc=N[N.length]=function mc(a,b,c,d){try{var f=a.c||a.a[2],k=a.a[8],g=this.f[k];if(b)if(c)var h=this.h[c];else{if(d){var l=this.b[d.id];l&&(h=this.a[l.u])}}else if(g&&g.port)h=g.port;else if(f in this.h)h=this.h[f];else if(f=this.Kc(a,c=T()))h=this.h[f];else return browser.windows.getLastFocused(d=T()),U(mc,this,a,!0,c,d);if(h)a.c=h.id;else return V(this,a,0);l=this.b[h.a];if(!l||!l.fa)return V(this,a,1);var m=this.a[h.tabId];m&&m.update&&(m.update=!1,m.postMessage([14,!0]));var r=Db(this),p=[15,
r.a,k];r.R=a;k||p.push(a[6],a[17],a[50],a[31],a[133],a[134]);h.A||Sb(this,h,r.a);h.postMessage(p)}catch(q){return V(this,a,0)}};function V(a,b,c,d,e,f,k,g,h){if(-1!=c){g||(g={});g[8]=b[8];a=l.bind(a,d|(0==c?4:2),[b.f,c,e,k,f,-1],g,h);b.h&32&&(3==c||2==c)?R(b[6],a,!!(b.h&16)):a();function l(m,r,p,q,t){browser.runtime.lastError;t&&(r[5]=t.length,p[51]=S(t));Q(this,1,2,m,r,p)&&q&&q()}}}n.Ob=function(a){zb(this,a).a=!0;browser.windows.get(a.windowId,this.L)};
n.jb=function(a,b){var c=a.tabId,d=a.frameId,e=a.url,f=a.transitionType,k=a.frameType,g=a.documentId,h="prerender"==a.documentLifecycle;this.H!=c||Fa(e)||(this.H=null);d&&h&&"outermost_frame"==k&&(d=a.frameId=0);f=f?f.endsWith("_subframe"):!1;var l=!0;if(k=this.s[c+","+d]){l=k.g;k.g=h?g:null;if(l&&l==g)return;g=k.i;l=!(e&&g&&(new URL(e)).hostname==(new URL(g)).hostname);k.i=e}else h&&(k=zb(this,a),k.g=g);!f&&this.i[c]&&L(this,l,c);if(g=this.a[c+","+d])if(this.j&&(a=this.b[g.a])&&a.u==this.j&&this.U(4294967295),
b){a:{b=g.l;c=new URL(b);d=new URL(e);if(c.origin==d.origin&&c.pathname==d.pathname)switch(Fb(this,c.hostname)){case 1:if("/watch"==c.pathname&&c.a("v")==d.a("v")){b=!0;break a}break;case 4:if((c.pathname.startsWith("/p/")||c.pathname.startsWith("/reel/"))&&c.a("img_index")==d.a("img_index")){b=!0;break a}}b=e==b}if(!b){b=this.f;var m,r;for(r in b)if(m=b[r],m.port===g)2==g.ga||4==g.ga?Vb(this,r):(this.U(r),delete b[r]);g.m++;g.l=e;g.A&&(g.update=!0);g.postMessage([17,!0])}}else this.ya(g,!0),f&&"about:blank"==
g.l&&this.Ca(c,d);else f&&"about:blank"==e?(zb(this,a),this.Ca(c,d)):k&&k.a&&(k.l||!b)?k.a=!1:browser.tabs.get(c,this.L)};n.ec=function(a){return this.jb(a,!0)};
n.kb=function(a,b,c){var d=a.id;c={h:d,width:a.width,height:a.height,g:a.left,i:a.top,a:this.Ia,b:8,C:69,f:0,G:0,M:"popup"==a.type||"app"==a.type,K:"fullscreen"==a.state,j:"maximized"==a.state,c:"minimized"==a.state,u:c&&c.id,s:c&&c.height,v:c&&c.width,J:!1,fa:null,X:null};Object.setPrototypeOf(c,eb.prototype);this.b[d]=c;a.focused&&(this.M=d);b?(browser.tabs.query({windowId:d,active:!0},this.L),browser.tabs.query({windowId:d,url:I},this.uc),browser.tabs.query({windowId:d,url:I},this.Ca)):this.Ga==
d&&(this.Ga=null,browser.tabs.query({windowId:d,active:!0},this.L));return c};n.uc=function(a){for(var b of a)zb(this,0,b.id,!0,b.url)};n.lb=function(a){Q(this,5,1,32,[a]);delete this.b[a];this.I==a&&lb(this)};n.fc=function(a){if(0<a){this.I&&browser.windows.update(this.I,{drawAttention:!0});var b=this.b[a];b&&(this.M=a,b.fa||ac(this,b,!0),browser.windows.onBoundsChanged||browser.windows.get(a,this.L),nb(this,b.u))}else this.M=null};n.hc=function(a){this.tb(a.id,!0,!1,-1,a)};
function hc(a,b,c,d,e){var f=a.b[b];f?(d&&(f.a=d),e&&(f.fa=e),d=!!(c&128),f.K!=d&&(f.K=d)&&Xb(a,b),(e||c&4096)&&Wb(a,b)):a.lb(b)}n.Wb=function(a,b,c){var d=c.active;c=c.windowId;var e=d&&this.b[c];e&&(e.fa||ac(this,e));"complete"==b.status&&(a=this.a[a])&&!a.h&&(a.h=!0,d&&this.V(c))};n.Yb=function(a){var b=this.a,c=this.s,d=a+",";this.H==a&&(this.H=null);var e=b[a];e&&this.ya(e,!0);for(var f in b)f.startsWith(d)&&this.ya(b[f],!0);for(var k in c)k.startsWith(d)&&delete c[k];delete this.i[a]};
n.Xb=function(a){var b=a.tabId;a=a.windowId;this.Ha=0;this.j&&this.U(4294967295);var c=this.b[a];c?(O(this,c.u),c.u=b,(c=this.H)&&b!=c&&(this.I?browser.windows.update(this.I,{drawAttention:!0}):this.m&&this.C&&(this.H=null,E.setTimeout(browser.tabs.remove,250,c))),browser.tabs.get(b,this.L),nb(this,b)||this.V(a)):this.Ga=a};n.Vb=function(a,b){b=b.newWindowId;for(var c of W(this.h))c.tabId==a&&(c.a=b);O(this,a,!0)};n.Kb=function(a){this.I&&"idle"==a&&browser.windows.update(this.I,{focused:!0})};
n.gb=function(a,b,c){if(a.A){var d=a.tabId;a=a.a;var e=this.b[a];this.j&&this.U(4294967295);if(e&&e.u==d){var f=!1;b&&(e.v=b,f=!0);c&&(e.s=c,f=!0);O(this,d,!1,f);this.tb(a,f,!1,500)}}else a.ja&&(b=this.a[a.b])&&b.postMessage([16,null,a.O,a.ja])};n.Mb=function(a,b,c){(b=Xa[b])&&Yb(this,b,c,a)};n.ic=function(a,b,c){0==b&&Yb(this,128,c,a)};n.ac=function(a,b,c,d){this.Ea=a.id;a.Ic=b;a.Db=c;a.Hc=d};n.Pb=function(){Yb(this,255,!1)};
n.Jb=function(a,b,c,d){var e=a.c;e&&(a=32,c=[e,null==c?(a|=16,-2):c],e={},e[110]=b,e[115]=d,Q(this,16,1,a,c,e))};n.pc=function(a,b,c){if(a=this.c[b]){b=[a.id,0];var d={};d[115]=c;Q(this,16,1,48,b,d);a.Da=!1;a.ab&&Y(this,a)}};n.Zb=function(a,b,c,d){Q(this,19,2,0,[b,c,a.tabId,a.c],d)};function jc(a,b){if(b=a.c[b]){var c=b.ha;b.Da=!1;b.ha=null;b.ab&&Y(a,b);c&&c.abort()}}n.dc=function(a,b){if(4==a.readyState){var c=[b,0],d={};200==a.status&&(d[115]=a.response);Q(this,16,1,48,c,d);jc(this,b)}};
function nc(a,b){var c=a.g;if(b.wa||a.i[b.tabId]||!c[-6])return 1;if(b.Ba)return 6;if(b.S&&c[-1])return 1;var d=b.Ua,e=b.Va=oc(d.pathname);return c[9].test(d.hostname)||c[19].test(d.href)?1:2==(b.ea&7)&&(b.La||c[-10])?d.pathname.endsWith("/")||c[21].test(d.pathname)?1:c[1].test(e)||a.ra&&!c[20].test(e)?4:1:6}
function pc(a,b){var c=!b.N;if(b.Ba&&c)return 3;var d=a.g,e=d[18],f=d[1],k=b.Ua,g=b.Va,h=b.Oa||(k.search?null:g),l=b.S,m=ua.includes(b.type),r=!b.La,p=!m&&e.exec(k.href);if(p){var q=e.Mc,t=e.Nc,z=e.Pc,v=e.Oc;for(e=1;e<p.length;++e)if(p[e]){q=q[--e];if(null===q)break;p=0;if(q.includes("G")){var u=!0;p|="GET"==b.method}q.includes("P")&&(u=!0,p|="POST"==b.method);if(u&&!p)break;u=q.includes("V")|q.includes("A")|q.includes("C");q.includes("H")&&(b.vb=!0);if((u?b.vb:l?!q.includes("S"):q.includes("X"))||
r&&q.includes("D"))return 1;if(p=v[e]){p=p.exec(k.href);if(!p)break;k=t[e];if(t=k.F){var x=!0;var F=p[t]}if(t=k.T){x=!0;var A=p[t]}}A||(A=oc(F)||q.includes("T")&&(x=!0,g)||z[e]);if(u)return A&&(b.Va=A),l||(b.S=!0),b.N=!0,6;if(c&&(A?f.test(A):!x))return b.Sa=16777216,4;break}}if(!c)return 6;if(h&&(m&&d[2].test(h)||l&&d[4].test(h)))return 1;if(b.La||d[-10]){if(l&&d[3].test(h))return 6;if((!l||a.ra)&&h&&f.test(h))return b.Sa=8,4}return 6}
function qc(a,b){if(b.Hb)return a.da(6,b),6;var c=b.statusCode;if(200!=c&&206!=c&&304!=c)return 1;var d=Z(b.responseHeaders,"Content-Type"),e=Z(b.responseHeaders,"Content-Disposition"),f=rc(d).toLowerCase(),k="attachment"==rc(e).toLowerCase();c=b.S;var g=b.ba;if(b.Ib=g&&!k&&"text/html"==f){if(b.B){var h=Ab(a,b);h&&(h.B=!0);a.da(5,b)}return 1}if(c?b.wa:b.N)return 1;if(a.ra&&g&&k)return 4;var l,m,r,p=a.g,q=b.Ua,t=q.hostname,z=q.pathname;e=(d=sc(e,"filename")||sc(d,"name"))&&oc(d);if(d){if(!e&&!c)return 1;
if(e&&(!c||5>=e.length)){b.Na=d;var v=r=!0}}r||(d=z.split("/").pop(),(e=b.Va||oc(d))&&e.toLowerCase()==f.split("/").pop()&&(v=!0));if(!v){var u=p[10].test(f),x=Za[f];if(x)if(x=x.split("|"),e&&x.includes(e))v=!0;else if(c&&Ja(e))v=!0;else if(c?!u:!e){v=!0;var F=u;e=x[0]}!v&&e&&(k&&g?v=!0:u?v=F=!0:x||Ia(e)||(v=F=!0))}if(c){x=Fb(a,t);g=a.$[x];u=z+q.search;switch(x){case 0:break;case 1:if(g[111].test(u)){var A=v=!0;e=null}else if(g[112].test(u))var M=!0;else if(g[115].test(u)&&"application/json"==f)var ea=
!0;else if(g[113].test(u)||g[114].test(u))var fa=!0;break;case 2:(t=g[111].exec(u))&&(Ha(f)||"text/html"==f)?(f=t[1]&&g[112].exec(b.port.l))&&t[1]!=f[1]||(fa=!0):g[114].test(u)?ea=!0:k&&"image"==b.type&&"MP4"==e&&(m=!0);break;case 3:"M4S"==e&&(v=!0);t==g[111]&&g[112].test(z)&&Ha(f)&&(fa=!0);break;case 4:g[111].test(u)&&Ha(f)&&(ea=!0);break;case 5:g[111].test(u)&&"text/html"==f&&(ea=!0);break;case 6:g[111].test(u)&&(fa=!0);break;default:g[111].test(z)&&(ea=!0)}v&&("M3U8"==e||"F4M"==e||a.Ab&&"MPD"==
e?fa=!0:"F4F"==e&&(d.endsWith("Seg1-Frag1")||d.endsWith("Seg1-Frag2")||d.includes("Seg1-Frag2_"))&&(l=!0));"ASF"==e&&((f=Z(b.responseHeaders,"Content-Length"))&&102400>=parseInt(f)&&(m=!0),"DCLK-AdSvr"==Z(b.responseHeaders,"Server")&&(m=!0))}if(m)return 1;v&&(c&&p[3].test(e)?A=!0:c&&p[4].test(e)?b.N=!0:!b.N&&p[1].test(e)&&(h=!0));if(A){var Bb,Cb;if(b.vb)A=!1;else if(m=p[11])m.test(q.hostname)?A=!1:(Bb=a.a[b.tabId])&&(Cb=Bb.l)&&m.test((new URL(Cb)).hostname)&&(A=!1)}if(ea)M=b.Da=!0;else if(fa||l)"POST"!=
b.method||b.W?(a=new XMLHttpRequest,a.responseType=l?"blob":"text",b.ha=a,M=!0):M=!1;if(!h&&!A&&!M)return 1;v&&(b.Oa=e);r&&(b.Na=d);b.B|=M;b.Sa=A||M?256:16|(c?4096:0)|(F?8388608:0);return h?4:A?2:5}
n.da=N[N.length]=function tc(a,b,c,d,e,f){var g=b.url,h=b.ea||Ob(g),l=1==(h&7),m=b.requestHeaders;if(l&&!m&&!d)if(e)f=S(f);else if(f=Z(m,"Cookie"),null==f)return R(g,tc.bind(this,a,b,c,d,!0)),!0;var r=b.id,p=b.port&&b.port.id;e=b.timeStamp;var q=c?B(c.timeStamp-e):null,t=b.Sa,z=b.responseHeaders,v=b.Cb,u=c&&c.ip;c=0;3==(u?u.length-u.replaceAll(".","").length:0)?t|=33554432:2<(u?u.length-u.replaceAll(":","").length:0)&&(t|=4194304);h&16&&(t|=2097152);"POST"==b.method&&(t|=512);4>a&&(c|=1);b.B&&b.ha&&
(c|=1);b.B&&5!=a&&(c|=32);b.S&&(c|=16);b.cb&&(c|=8192);b.ba&&(c|=b.A?2048:4096);a=[r,p,e.toFixed(),b.statusCode,h&7,a,b.tabId,b.frameId];h={};h[6]=Kb(g,l,this);h[12]=b.statusLine;h[17]=b.Y;h[4]=b.Oa;h[100]=b.Na;h[127]=b.Qc;h[8]=t;h[129]=q;h[11]=uc(m);h[13]=uc(z);h[18]=uc(v);b.W&&(h[14]=ic(b.W,Z(m,"Content-Type")));b.Ta&&(h[19]=ic(b.Ta,Z(v,"Content-Type")));if(!m){g=this.s;l=b.tabId+","+b.frameId;do l=(q=g[l])&&q.b,q=q&&q.l,"about:blank"==q&&(q=null);while(!q&&l);h[50]=q;h[51]=f;h[54]=navigator.userAgent}h[122]=
wb(this,b.proxyInfo,Z(m,"Proxy-Authorization"));h[55]=wb(this,b.Bb,Z(v,"Proxy-Authorization"));if(!b.Ib||!b.A)if(b=this.a[b.tabId])h[7]=b.l;16>this.ua&&(a[2]=B(e/1E3),a[3]=B(e%1E3*1E3));return!!Q(this,13,1,c,a,h,d)};n.ia=N[N.length]=function vc(a,b,c,d,e){if(0==a)b.Ra=d,b.Ja=e,yb(this,b);else{this.J&&$b(this,!0);d=this.oa?new XMLHttpRequest:null;e=this.da(a,b,c,d);d&&(e=(d=e&&parseInt(d.getResponseHeader("x-idm-status")))?3==d:this.da(a,b,c));if(e)return new Promise(vc.bind(this,0,b,null));b.N=!0}};
function Y(a,b,c){var d=a.c,e;if(!w(b))if(b=d[b])void 0;else return;var f=b.id;if(c){if(b.ba||b.cb){var k=0<b.statusCode||!b.requestHeaders,g=Ab(a,b);g&&g.a&&b.A?browser.tabs.remove(b.tabId):Ea&&k&&((e=a.G)||(e=b.port,g=g&&!g.h,e=new URL(e&&e.l||b.url),e=Aa+(g?"back=1":"host="+e.hostname)),e={redirectUrl:e})}e||(e={cancel:!0});b.bb=!0}(g=b.Ra)&&void 0!==c&&(b.Ra=b.Ja=null,g(e||{}));if(c=b.Ja)b.Ra=b.Ja=null,c();if(b.ha||b.Da)return b.ab=!0,e;delete d[f];delete d[b.Aa];b.Ya&&delete d[b.Ya];return e}
n.jc=function(a){var b=new URL(a.url);if(b.search.startsWith("?d=")){var c=this.a[a.tabId];this.aa("idmreg:"+b.href.substr(b.protocol.length),null,c&&c.l);Y(this,a.requestId);(b=Ab(this,a))&&b.a&&"main_frame"==a.type&&browser.tabs.remove(a.tabId);return{redirectUrl:Aa+"register=1"}}};
n.mb=function(a){var b=a.type,c=a.tabId,d=a.frameId;if(!(oa&&!wa.includes(b)||0>c&&0==d&&a.originUrl==Da)){var e=a.url,f=a.method,k=Ob(e);if(k&&("GET"==f||"POST"==f)&&e!=this.G){d&&"outermost_frame"==a.frameType&&(d=a.frameId=0);var g=a.id=a.requestId,h=this.c[g],l=this.Xa,m="POST"==f,r="image"==b,p=!1,q=!p&&0>c,t=0<c&&b.endsWith("_frame"),z=q?null:this.a[c+","+d];if(z||t||q||p||h){m&&h&&Qa(h.statusCode)&&(f=a.method="GET",m=!1);t&&zb(this,a,null,!1);if(!l&&m&&a.requestBody){m=a.requestBody;var v=
m.raw;if(v)for(var u=0;u<v.length&&(v[u].bytes||(v=null));u++);if(!v&&!m.formData)return}if((m=this.Ea)&&(v=z?z.id==m&&z:this.h[m])&&e==v.Db){p=v.Ic;if(m=v.Hc)a.Na=m,a.Oa=oc(m);z||(z=v);this.Ea=null}m=new URL(e);m.hash="";a.Ua=m;a.ea=k;a.Ba=this.sb;a.wa=l;a.A=t&&"main_frame"==b;a.ba=t;a.cb=p;a.qc=q;a.S=q||va.includes(b);a.N=r;a.B=this.fb.test(e);a.W=a.requestBody;a.port=z;a.La=k&8||a.proxyInfo&&"https"==a.proxyInfo.type;0>c&&(a.tabId=null);0>d&&(a.frameId=null);if(h)a.id=h.id,a.port=z=h.port,a.Ba=
h.Ba,a.wa=h.wa,a.Y=h.Y||h.url,a.Cb=h.Cb||h.requestHeaders,a.Ta=h.Ta||h.W,a.Bb=h.Bb||h.proxyInfo;else if(q)for(var x of W(this.c))if(x.Eb&&!x.Aa&&e==x.url&&b==x.type&&f==x.method){a=x;a.Aa=g;break}if(a.S&&!r){b=this.qa;c=b.zc;d=c.indexOf(e);if(0<=d)c.splice(d,1);else for(;30<=c.length;)delete b[c.shift()];b[e]=z;c.push(e)}switch(a.xa=nc(this,a)){case 1:a.N=!0;case 6:yb(this,a);break;case 4:return this.ia(1,a)}}}}};
n.lc=function(a){var b=this.c[a.requestId];if(b){var c=b.requestHeaders=a.requestHeaders;b.timeStamp=a.timeStamp;if(!b.bb){if(b.qc&&!b.port&&(a=Z(c,"Referer")))for(var d of W(this.h))if(d.l==a){b.port=d;break}b.proxyInfo&&wb(this,b.proxyInfo,Z(c,"Proxy-Authorization"),!0);if("POST"==b.method&&(!b.W||b.W.error&&0<Z(c,"Content-Length")))return Y(this,b);switch(b.xa=pc(this,b)){case 1:b.N=!0;break;case 4:return this.ia(1,b);case 3:return this.ia(3,b)}if(b.port&&b.port.B&&"xmlhttprequest"==b.type)for(d=
0;d<c.length;d++){a=c[d];var e;if("accept"==a.name.toLowerCase()&&(e=Ma(a.value))){var f=b.Ya=e[3];this.c[f]=b;e[1]||e[4]?a.value=e[1]+(e[4]&&e[2]||"")+e[4]:c.splice(d--,1);return{requestHeaders:c}}}}}else if(0>a.tabId&&"xmlhttprequest"==a.type&&(a.initiator?a.initiator==Ca:a.originUrl?a.originUrl==Da:1)){b=a.requestHeaders;c={};e=!1;for(d=0;d<b.length;d++)a=b[d],f=a.name.toLowerCase(),f.startsWith("x-idm-")?c[f.substr(6)]=e=!0:"origin"==f&&a.value==Ca&&(c[f]=e=!0);if(e){for(d=0;d<b.length;d++)a=
b[d],f=a.name.toLowerCase(),c[f]?b.splice(d--,1):f.startsWith("x-idm-")&&(a.name=a.name.substr(6));return{requestHeaders:b}}}};n.kc=function(a){if(!a.statusCode&&a.redirectUrl==a.url){a=a.requestId;var b=this.c[a],c=b&&Ab(this,b);c&&!b.statusCode&&c.f==a&&(b.Eb=!0)}};
n.oc=function(a){var b=this.c[a.requestId];if(b){var c=b.statusLine=a.statusLine,d=b.statusCode=a.statusCode||parseInt(c.split(" ",2).pop());if(b.bb||204==d&&c.includes(" IDM "))return Y(this,b,!0);c=b.responseHeaders=a.responseHeaders;b.Hb=Pa(d);if("image"==b.type&&(d=Z(c,"Content-Type"))&&d.toLowerCase().startsWith("image"))return Y(this,b);"quic"==Z(c,"Client-Protocol")?b.ea|=16:(d=Z(c,"Alternate-Protocol"))&&d.endsWith(":quic,p=0")&&"chunked"!=Z(c,"Transfer-Encoding")&&(b.ea|=16);switch(b.xa=
qc(this,b)){case 1:return Y(this,b);case 4:return this.ia(2,b,a);case 3:return this.ia(3,b,a)}if(b.Da)return c||(c=[]),c.push({name:"x-idm-request-id",value:b.id.toString()}),{responseHeaders:c}}};n.mc=function(a){var b=this.c[a.requestId];if(a.type.endsWith("_frame")&&(200==a.statusCode||304==a.statusCode)){var c=Ab(this,a);c&&(c.l=a.url,c.Y=c.j)}b&&(2==b.xa?this.da(4,b,a):5==b.xa&&this.da(5,b,a),Y(this,b))};n.nc=function(a){Y(this,a.requestId)};
n.Gc=N[N.length]=function wc(a,b,c,d){if(a){this.Za=b.version||"";this.na=b.silent;this.ob=d;this.C=!!b.consent;b=b.client;if(c)for(var f of c)switch(f.name){case "idmwebext_cid":var k=parseInt(f.value)}cc(this,null,b,k);this.Pa()}else c={url:G.homepage_url},na&&(c.firstPartyDomain=null),browser.storage.local.get(null,b=T()),browser.cookies.getAll(c,c=T()),1124073472<=D&&browser.extension.isAllowedIncognitoAccess(d=T()),U(wc,this,!0,b,c,d)};
function cc(a,b,c,d){(b||(b=c||d))&&b!=a.ta&&(a.ta=b,c||browser.storage.local.set({client:b}),d||browser.cookies.set({url:G.homepage_url,name:"idmwebext_cid",value:String(b),expirationDate:2147483647}))}
function Gb(a){function b(l){l&&(this.H=l.id)}a.H&&(browser.tabs.remove(a.H),a.H=null);if(a.rb||!a.C){var c=!a.m,d=!a.ob,e=!a.C,f=a.sa,k=a.ka,g=a.Za,h=a.Fa;if(c){if(a.ma&&a.na)return}else a.rb=!1,h!=g&&(h&&browser.storage.local.set({version:h}),browser.cookies.set({url:G.homepage_url,name:"idmmzcc3_uri",value:Ca,expirationDate:2147483647})),a.na&&(a.na=!1,browser.storage.local.set({silent:!1}));if(null!=g&&(e=!1,a.C=!0,h!=g?k&&g&&!f&&!e:!e))return;h=Ba+"current="+escape(h);g&&(h+="&previous="+escape(g));
k&&(h+="&manager="+(k?[k>>24&255,k>>16&255,k>>8&255,k&255].join("."):""));c&&(h+="&error=1");d&&(h+="&incognito=1");f&&(h+="&update=1");e&&(h+="&consent=1");h+="&mzffox=1";if(e&&!c){browser.idle&&a.D(5,browser.idle.onStateChanged,a.Kb)&&browser.idle.setDetectionInterval(15);browser.windows.create({type:"popup",width:Math.min(Math.round(.85*screen.availWidth),1100),height:Math.min(Math.round(.85*screen.availHeight),900),url:h},l.bind(a));function l(m){m&&m.id?(this.I=m.id,this.H=m.tabs[0].id,L(this,
!1,null,!0)):lb(this)}}else browser.tabs.create({url:h},b.bind(a))}}function dc(a,b,c){null==b&&(b=Oa(c[13]))&&(b=b[1]<<24|b[2]<<16|b[3]<<8);a.ka=b>>>0}function ec(a){a.sa=103352064>a.ka;a.J=0>a.ka?6E4*B(120*C()+60)+Date.now():null}function $b(a,b){if(a.J<Date.now()||b&&!a.sa){0<a.J&&(a.J=6E4*B(240*C()+120)+Date.now());var c="idmdwnlmfv4://idmreg://"+C().toString(36).substr(2);b?a.aa(c):E.setTimeout(a.aa,B(5E3*C()+5E3),c)}}
function Rb(a,b){b=browser.i18n.getMessage(b);browser.tabs.executeScript(a,{code:'window.alert(unescape("'+escape(b)+'")); true;'},P)}n.D=function(a,b,c){if(null==b)return!1;var d=da(arguments);d[2]=function(){return c.apply(null,arguments)};this.Wa.push(d);b.addListener.apply(b,d.slice(2));return!0};n.Ka=function(){for(var a=arguments.length?da(arguments):null,b=this.Wa,c=0;c<b.length;c++)if(!a||a.includes(b[c][0])){var d=b.splice(c--,1).pop(),e=d.splice(0,2).pop();e.removeListener.apply(e,d)}};
function T(){function a(b){browser.runtime.lastError;a.a?a.a(b):a.c=b;a.b=!0}return a}T.prototype=Object.create(Function.prototype);function Qb(){var a=[];Object.setPrototypeOf(a,Qb.prototype);return a}Qb.prototype=Object.create(Array.prototype);
function U(a,b,c){if(this instanceof U){c instanceof Array||(c=ia(arguments,2));for(var d=0,e=0,f=Function.prototype.bind.bind(this.g,this),k=0;k<c.length;k++){var g=c[k];if(g instanceof Function)g.b?(c[k]=g.c,e++):(g.a=f(k,null),d++);else if(g instanceof Qb)for(var h=0;h<g.length;h++){var l=g[h];l.b?(g[h]=l.c,e++):(l.a=f(k,h),d++)}}d?(this.c=a,this.a=b,this.b=c,this.f=d):a.apply(b,c)}else return(new U(a,b,ia(arguments,2))).f}
U.prototype.g=function(a,b,c){var d=this.b;if(null===b)for(var e=2;e<arguments.length;e++)d[a++]=arguments[e];else d[a][b]=c;0==--this.f&&(this.c.apply(this.a,d),delete this.c,delete this.a,delete this.b)};function ub(a){return browser.i18n.getMessage(a)||a}function Kb(a,b,c){var d=a.lastIndexOf("#");d>a.indexOf("?")&&"!"!=a[d+1]&&(a=a.substr(0,d));b&&c.sa&&!a.startsWith("idmdwnlmfv")&&!Ka(a)&&(a="idmdwnlmfv3://"+a);return a}function Ob(a){a=a.split(":",1).shift().toLowerCase();return Ya[a]||0}
function oc(a){return(a=Na(a))?a[1].toUpperCase():""}function R(a,b,c){a={url:a};c&&(a.session=!1);na&&(a.firstPartyDomain=null);browser.cookies.getAll(a,b)}function S(a){if(!w(a))return a;var b=[],c;for(c of a)b.length&&b.push("; "),b.push(c.name,"=",c.value);return b.join("")}function uc(a){if(!a||!a.length)return null;var b=[],c;for(c of a)b.push(c.name,": "),null!=c.value?b.push(c.value):c.binaryValue&&b.push(new Uint8Array(c.binaryValue)),b.push("\r\n");return b}
function Z(a,b){if(!a)return null;b=b.toLowerCase();for(var c of a)if(c.name.toLowerCase()==b){if(null!=c.value)return c.value;if(c.binaryValue)return String.fromCharCode.apply(null,c.binaryValue)}return null}
function sc(a,b){if(!a)return null;a=a.split(";");for(b=b.toLowerCase();a.length;){var c=a.shift(),d=c.indexOf("=");if(0<d){var e=c.slice(0,d).trim().toLowerCase(),f=e.endsWith("*");if(f)e=e.slice(0,-1).trimRight();else if(g)continue;if(e==b){c=c.substr(d+1).trim();d=c.length-1;if('"'==c[0]?'"'==c[d]:"'"==c[0]&&"'"==c[d])c=c.slice(1,d);if(f&&c.includes("'")){if(c=c.split("'",3),f=c.shift().toLowerCase(),(d="utf-8"==f||"utf8"==f)||!g){var k=unescape(c.pop());var g=f;if(d)break}}else k=unescape(c)}}else 0>
d&&null==k&&c.trim().toLowerCase()==b&&(k="")}return k}function rc(a){const b=/[;,]/;return a&&(a=a.split(b,1).shift().trim())&&!a.includes("=")&&unescape(a)||""}
function ic(a,b){var c,d=[];if(c=a.raw)for(var e of c)if(e.bytes)d.push(e.bytes);else return null;else if(a=a.formData)if((c=rc(b).toLowerCase())&&"application/x-www-form-urlencoded"!=c)if("multipart/form-data"==c){(b=sc(b,"boundary"))||(b="----WebKitFormBoundary"+C().toString(36).substr(2));for(f in a)for(k of a[f])d.push("--",b,'\r\nContent-Disposition: form-data; name="',f,'"\r\n\r\n',k||"","\r\n");d.push("--",b,"--\r\n")}else return null;else for(var f in a){b=encodeURIComponent(f).replaceAll("%20",
"+");for(var k of a[f])k=k instanceof ArrayBuffer?escape(xc(k)):null==k?"":encodeURIComponent(k),d.length&&d.push("&"),d.push(b,"=",k&&k.replaceAll("%20","+"))}else return null;return d.length?d:null}function $a(a){for(var b=a.length,c=b,d=0;d<c;){var e=a.charCodeAt(d++);128<=e&&(2048<=e?(b+=2,e-55296&56320||d++):b++)}return b}
function yc(a,b,c,d,e){browser.runtime.lastError;if(!a){browser.runtime.getPlatformInfo(b=T());navigator.userAgentData?navigator.userAgentData.getHighEntropyValues(["fullVersionList","uaFullVersion"]).then(c=T()):browser.runtime.getBrowserInfo&&browser.runtime.getBrowserInfo(c=T());try{browser.privacy&&browser.privacy.websites.firstPartyIsolate.get({},d=T())}catch(h){d=null}return U(yc,null,!0,b,c,d,e)}if(b&&"win"!=b.os)return ob(!1);a=navigator.userAgent;var f=a.match(/\s(?!(?:Chrome|Firefox|Gecko|Safari)\/)([A-Z]\w+)(?:\/(\d+(?:\.\d+){0,3}))?\b(?!.*\)\s+\S)/);
e=a.match(/\s(Chrome|Firefox)\/(\d+(?:\.\d+){0,3})\b/);var k;a=e?e[1]:"UNKNOWN";b=f?f[1]:a;e=e&&e[2]||"0.0";f=f&&f[2]||e;a="Mozilla";if(w(c)){if(k=c.uaFullVersion)f=k;if(k=c.fullVersionList)for(var g of k){if(k=g.version)switch(g.brand){case b:f=k}}else if(k=c.version)if(53<=parseInt(k)&&(e=k),k=c.name)b=k}k=e.split(/\D+/);D=(k[0]<<24|k[1]<<22|k[2]<<8|k[3])>>>0;la=a+"/"+e;ma=b+"/"+f;w(d)&&(na=d.value);939524096>D&&(Ea=!0);if(c=browser.webRequest.ResourceType)if(c.MEDIA&&(wa.push("media"),va.push("media")),
c.OBJECT_SUBREQUEST||(oa=922746880>D))wa.push("object_subrequest"),va.push("object_subrequest");922746880>D&&va.push("other");new K;zc(1,"debug.js");zc(2,"document.js")}function zc(a,b,c){c?4==c.readyState&&(Va[a]=btoa(c.responseText)):(c=new XMLHttpRequest,c.responseType="text",c.onreadystatechange=zc.bind(null,a,b,c),c.open("GET",browser.runtime.getURL(b)),c.send())}
function X(a,b,c,d){if(b=b[c]||void 0)try{b=b.replace(/^\|+|\|+(?=\||$)/g,"").replace(/\./g,"\\."),b=1==d?b.replace(/\?/g,"[^/\\\\]").replace(/(^|[^*])\*(?!\*)/g,"$1[^/\\\\]*").replace(/\*\*/g,".*?"):b.replace(/\?/g,".").replace(/\*/g,".*?"),2==d&&(b=b.replace(/(^|\|)([^|]+?)~/g,"$1(?:$2\\.)?").replace(/(^|\|)~/g,"$1(?:.*?\\.)?")),b=RegExp("^(?:"+b+")$",1==d?"":"i")}catch(e){b=null}a[c]=b||sa}
function fc(a,b,c,d,e){b=b[c];var f=[],k=[],g=[],h=[];if(b)try{b=b.replace(/^\|+|\|+(?=\||$)|\*+(?=\*)/g,"").replace(/[.?+(){}[\]]/g,"\\$&").replace(/\*(?=[^:/|&]*:\/\/)/g,"\\w%%").replace(/(:\/\/[^:/]*?)~/g,"$1(?:\\b[^./]+\\.)?").replace(/\\\?(?=\||$)/g,"(?:$&.%%)?");if(d){for(var l=b.replace(/(^|\|)(?:([A-Z]+)?(?:#(\w+))?!)?[^|]+/g,"$1$2|$3").split("|");l.length;){var m=l.shift();f.push(La(m)?m:null);k.push(l.shift())}b=b.replace(/(^|\|)[\w#]+!/g,"$1")}if(e){l=b.replace(/(^|\|)(?:(?=[^|]+?<[A-Z]:.*?>)|[^|]+)/g,
"$1").split("|");m=/<([A-Z]):(.*?)>/g;for(var r={F:"[^/\\?#&;]%%",T:"[^/\\?#&;.]%%"},p,q=0;l.length;++q)if(p=l.shift()){for(var t={},z=["^"],v="",u,x=1;u=m.exec(p);++x)t[u[1]]=x++,v=RegExp.rightContext,z.push(RegExp.leftContext,"(",u[2].replace(/\*/g,r[u[1]]||".%%?"),")");z.push(v,"$");g[q]=t;h[q]=RegExp(z.join("").replace(/\*/g,".*?").replace(/%%/g,"*"))}b=b.replace(m,"(?:$2)")}b=b.replace(/\*/g,".*?").replace(/%%/g,"*");b=d||e?RegExp("^(?:("+b.replace(/\|/g,")|(")+"))$"):RegExp("^(?:"+b+")$")}catch(F){b=
null}a[c]=b||(b=/(?!)/);d&&(b.Mc=f,b.Pc=k);e&&(b.Nc=g,b.Oc=h)}function ab(a){return ka(a instanceof ArrayBuffer?new Uint8Array(a):a)}function Mb(a){return w(a)?a.source.replaceAll("\\/","/"):a}function P(a){browser.runtime.lastError;a;!0}URL.prototype.a="searchParams"in URL.prototype?function(a){return this.searchParams.get(a)}:function Ac(a){var c=Ac.yc||(Ac.yc={});return(a=(c[a]||(c[a]=new RegExp("[?&]"+escape(a)+"\\b(?:=([^&]*))?"))).exec(this.search))&&unescape(a[1]||"")};
const Lb=Function.bind.bind(function(a){return this[a]}),gc=Function.bind.bind(function(a){return a&&a[this]}),xc=E.TextDecoder?TextDecoder.prototype.decode.bind(new TextDecoder("ascii")):function(){return""};var W=Object.values;W||(W=function(a){return Object.keys(a).map(Lb(a))});Array.prototype.fill||(Array.prototype.fill=function(a){for(var b=this.length;b--;this[b]=a);return this});String.prototype.replaceAll||(String.prototype.replaceAll=function(a,b){return this.split(a).join(b)});
const tb=[[!0,-8,"menu_download_link","link,image,video",K.prototype.xb],[!0,-8,"menu_download_link","page,frame,editable",K.prototype.xb,za],[!0,-8,"menu_download_selected","selection",K.prototype.wb],[!0,-9,"menu_download_all","page,frame,editable",K.prototype.wb]],pb=ub("tooltip_title"),rb=ub("tooltip_disabled"),sb=ub("tooltip_error"),qb="\n"+ub("tooltip_text");N.splice(0);yc();
