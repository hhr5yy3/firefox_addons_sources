{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/dayjs/dayjs.min.js","webpack:///./src/ImpulseBlocker.js","webpack:///./src/PopupIcon.js","webpack:///./src/background.js","webpack:///./src/enums/extensionStatus.js","webpack:///./src/enums/messages.js","webpack:///./src/enums/settings.js","webpack:///./src/storage/StorageHandler.js","webpack:///./src/storage/Website.js","webpack:///./src/utils/functions.js","webpack:///./src/utils/tabs.js"],"names":["ImpulseBlocker","constructor","storageHandler","boot","bind","onStorageUpdated","getState","updateStatus","start","stop","getBlockedDomains","browser","storage","onChanged","addListener","getStatus","then","status","extensionStatus","ON","OFF","PAUSED","getPausedUntil","pausedUntil","pausedUntilParsed","dayjs","differenceFromNow","diff","pause","attachWebRequestListener","getBlockedWebsites","sites","domainsToBlock","createMatchPatterns","webRequest","onBeforeRequest","removeListener","redirectToBlockedPage","length","urls","types","changes","undefined","Promise","resolve","setStatus","PopupIcon","off","on","duration","add","setPausedUntil","setTimeout","isDomainBlocked","domainToCheck","domains","map","site","domain","includes","website","promises","getSettings","all","results","extensionSettings","newStatus","reject","Error","addToBlockList","domainToBlock","replace","updatedWebsites","Website","create","setBlockedWebsites","removeFromBlockList","domainToRemove","filter","updateSetting","key","value","set","path","browserAction","setIcon","blocker","messageHandlers","MessageTypes","GET_CURRENT_DOMAIN","getCurrentWebsiteDomain","IS_DOMAIN_BLOCKED","req","GET_EXTENSION_STATUS","UPDATE_EXTENSION_STATUS","parameter","START_BLOCKING_DOMAIN","START_ALLOWING_DOMAIN","PAUSE_BLOCKER","UNPAUSE_BLOCKER","UPDATE_EXTENSION_SETTING","GET_BLOCKED_DOMAINS_LIST","default","type","runtime","onMessage","onInstalled","local","get","Array","isArray","SettingTypes","SHOW_ON_OFF_BUTTONS_IN_POPUP","SHOW_PAUSE_BUTTONS_IN_POPUP","ExtensionStatus","Object","freeze","messages","settings","StorageHandler","datetime","toISOString","updatedSettings","setting","push","url","isActive","timesBlocked","createdAt","format","openOptionsPage","window","close","requestDetails","original","encodeURIComponent","theme","matchMedia","matches","interceptPage","tabs","update","tabId","getActiveTab","query","active","currentWindow","parse","URL","indexOf","protocol","hostname","e","activeTab"],"mappings":"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","file":"background.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/background.js\");\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.dayjs=e()}(this,function(){\"use strict\";var t=\"millisecond\",e=\"second\",n=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",a=\"quarter\",o=\"year\",f=\"date\",h=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,c=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},$=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},l={s:$,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+$(r,2,\"0\")+\":\"+$(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,u),s=n-i<0,a=e.clone().add(r+(s?-1:1),u);return+(-(r+(n-i)/(s?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:o,w:s,d:i,D:f,h:r,m:n,s:e,ms:t,Q:a}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},y=\"en\",M={};M[y]=d;var m=function(t){return t instanceof S},D=function(t,e,n){var r;if(!t)return y;if(\"string\"==typeof t)M[t]&&(r=t),e&&(M[t]=e,r=t);else{var i=t.name;M[i]=t,r=i}return!n&&r&&(y=r),r||!n&&y},v=function(t,e){if(m(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},g=l;g.l=D,g.i=m,g.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function d(t){this.$L=D(t.locale,null,!0),this.parse(t)}var $=d.prototype;return $.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(g.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(h);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},$.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},$.$utils=function(){return g},$.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},$.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},$.isAfter=function(t,e){return v(t)<this.startOf(e)},$.isBefore=function(t,e){return this.endOf(e)<v(t)},$.$g=function(t,e,n){return g.u(t)?this[e]:this.set(n,t)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(t,a){var h=this,c=!!g.u(a)||a,d=g.p(t),$=function(t,e){var n=g.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return c?n:n.endOf(i)},l=function(t,e){return g.w(h.toDate()[t].apply(h.toDate(\"s\"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},y=this.$W,M=this.$M,m=this.$D,D=\"set\"+(this.$u?\"UTC\":\"\");switch(d){case o:return c?$(1,0):$(31,11);case u:return c?$(1,M):$(0,M+1);case s:var v=this.$locale().weekStart||0,S=(y<v?y+7:y)-v;return $(c?m-S:m+(6-S),M);case i:case f:return l(D+\"Hours\",0);case r:return l(D+\"Minutes\",1);case n:return l(D+\"Seconds\",2);case e:return l(D+\"Milliseconds\",3);default:return this.clone()}},$.endOf=function(t){return this.startOf(t,!1)},$.$set=function(s,a){var h,c=g.p(s),d=\"set\"+(this.$u?\"UTC\":\"\"),$=(h={},h[i]=d+\"Date\",h[f]=d+\"Date\",h[u]=d+\"Month\",h[o]=d+\"FullYear\",h[r]=d+\"Hours\",h[n]=d+\"Minutes\",h[e]=d+\"Seconds\",h[t]=d+\"Milliseconds\",h)[c],l=c===i?this.$D+(a-this.$W):a;if(c===u||c===o){var y=this.clone().set(f,1);y.$d[$](l),y.init(),this.$d=y.set(f,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},$.set=function(t,e){return this.clone().$set(t,e)},$.get=function(t){return this[g.p(t)]()},$.add=function(t,a){var f,h=this;t=Number(t);var c=g.p(a),d=function(e){var n=v(h);return g.w(n.date(n.date()+Math.round(e*t)),h)};if(c===u)return this.set(u,this.$M+t);if(c===o)return this.set(o,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(f={},f[n]=6e4,f[r]=36e5,f[e]=1e3,f)[c]||1,l=this.$d.getTime()+t*$;return g.w(l,this)},$.subtract=function(t,e){return this.add(-1*t,e)},$.format=function(t){var e=this;if(!this.isValid())return\"Invalid Date\";var n=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=g.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,f=i.months,h=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},d=function(t){return g.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:g.s(a+1,2,\"0\"),MMM:h(i.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:g.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,o,2),ddd:h(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:g.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:g.s(u,2,\"0\"),s:String(this.$s),ss:g.s(this.$s,2,\"0\"),SSS:g.s(this.$ms,3,\"0\"),Z:r};return n.replace(c,function(t,e){return e||l[t]||r.replace(\":\",\"\")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(t,f,h){var c,d=g.p(f),$=v(t),l=6e4*($.utcOffset()-this.utcOffset()),y=this-$,M=g.m(this,$);return M=(c={},c[o]=M/12,c[u]=M,c[a]=M/3,c[s]=(y-l)/6048e5,c[i]=(y-l)/864e5,c[r]=y/36e5,c[n]=y/6e4,c[e]=y/1e3,c)[d]||y,h?M:g.a(M)},$.daysInMonth=function(){return this.endOf(u).$D},$.$locale=function(){return M[this.$L]},$.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=D(t,e,!0);return r&&(n.$L=r),n},$.clone=function(){return g.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},d}(),p=S.prototype;return v.prototype=p,[[\"$ms\",t],[\"$s\",e],[\"$m\",n],[\"$H\",r],[\"$W\",i],[\"$M\",u],[\"$y\",o],[\"$D\",f]].forEach(function(t){p[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),v.extend=function(t,e){return t.$i||(t(e,S,v),t.$i=!0),v},v.locale=D,v.isDayjs=m,v.unix=function(t){return v(1e3*t)},v.en=M[y],v.Ls=M,v.p={},v});\n","import dayjs from 'dayjs';\n\nimport extensionStatus from './enums/extensionStatus';\nimport Website from './storage/Website';\nimport PopupIcon from './PopupIcon';\nimport { createMatchPatterns, redirectToBlockedPage } from './utils/functions';\n\nclass ImpulseBlocker {\n  constructor(storageHandler) {\n    this.storageHandler = storageHandler;\n\n    this.boot = this.boot.bind(this);\n    this.onStorageUpdated = this.onStorageUpdated.bind(this);\n    this.getState = this.getState.bind(this);\n    this.updateStatus = this.updateStatus.bind(this);\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this.getBlockedDomains = this.getBlockedDomains.bind(this);\n  }\n\n  boot() {\n    browser.storage.onChanged.addListener(this.onStorageUpdated);\n\n    return this.storageHandler.getStatus().then(async ({ status }) => {\n      if (status === extensionStatus.ON) {\n        return this.start(false);\n      }\n\n      if (status === extensionStatus.OFF) {\n        return this.stop(false);\n      }\n\n      if (status === extensionStatus.PAUSED) {\n        /* pausedUntil format is 2021-01-10T11:52:32.067Z */\n        return this.storageHandler.getPausedUntil().then(({ pausedUntil }) => {\n          if (!pausedUntil) {\n            return this.start(false);\n          }\n\n          const pausedUntilParsed = dayjs(pausedUntil);\n\n          const differenceFromNow = pausedUntilParsed.diff(dayjs(), 'second');\n\n          if (differenceFromNow < 0) {\n            return this.start(false);\n          }\n\n          return this.pause(differenceFromNow, false);\n        });\n      }\n\n      return this.start(false);\n    });\n  }\n\n  attachWebRequestListener() {\n    return this.storageHandler.getBlockedWebsites().then(({ sites }) => {\n      if (!sites) {\n        return false;\n      }\n\n      const domainsToBlock = createMatchPatterns(sites);\n      browser.webRequest.onBeforeRequest.removeListener(redirectToBlockedPage);\n\n      if (domainsToBlock.length > 0) {\n        browser.webRequest.onBeforeRequest.addListener(\n          redirectToBlockedPage,\n          { urls: domainsToBlock, types: ['main_frame'] },\n          ['blocking'],\n        );\n      }\n\n      return true;\n    });\n  }\n\n  onStorageUpdated(changes) {\n    if (changes.sites === undefined) {\n      return Promise.resolve('No need for action');\n    }\n\n    return this.storageHandler.getStatus().then(({ status }) => {\n      if (status === extensionStatus.ON) {\n        return this.attachWebRequestListener();\n      }\n\n      return Promise.resolve('No need for action');\n    });\n  }\n\n  async stop(setStatus = true) {\n    if (setStatus) {\n      await this.storageHandler.setStatus(extensionStatus.OFF);\n    }\n\n    await browser.webRequest.onBeforeRequest.removeListener(redirectToBlockedPage);\n    await PopupIcon.off();\n  }\n\n  async start(setStatus = true) {\n    if (setStatus) {\n      await this.storageHandler.setStatus(extensionStatus.ON);\n    }\n\n    await this.attachWebRequestListener();\n    await PopupIcon.on();\n  }\n\n  async pause(duration = 60 * 5, setStatus = true) {\n    browser.webRequest.onBeforeRequest.removeListener(redirectToBlockedPage);\n\n    const pausedUntil = dayjs().add(duration, 'seconds');\n\n    if (setStatus) {\n      await this.storageHandler.setStatus(extensionStatus.PAUSED);\n    }\n\n    await this.storageHandler.setPausedUntil(pausedUntil);\n    await PopupIcon.off();\n\n    setTimeout(() => {\n      this.start();\n    }, 1000 * duration);\n  }\n\n  isDomainBlocked(domainToCheck) {\n    return this.storageHandler.getBlockedWebsites().then(({ sites }) => {\n      const domains = sites.map((site) => site.domain);\n\n      return domains.includes(domainToCheck);\n    });\n  }\n\n  getBlockedDomains() {\n    return this.storageHandler.getBlockedWebsites()\n      .then((storage) => storage.sites.map((website) => website.domain));\n  }\n\n  getState() {\n    const promises = [\n      this.storageHandler.getStatus(),\n      this.storageHandler.getSettings(),\n      this.storageHandler.getPausedUntil(),\n    ];\n\n    return Promise.all(promises).then((results) => ({\n      extensionStatus: results[0].status,\n      extensionSettings: results[1].extensionSettings,\n      pausedUntil: results[2].pausedUntil,\n    }));\n  }\n\n  updateStatus(newStatus) {\n    if (newStatus === extensionStatus.OFF) {\n      return this.stop();\n    }\n\n    if (newStatus === extensionStatus.ON) {\n      return this.start();\n    }\n\n    return Promise.reject(new Error(`Unknown status: ${newStatus}`));\n  }\n\n  addToBlockList(domain) {\n    const domainToBlock = domain.replace(/.*www\\./, '');\n\n    return this.storageHandler.getBlockedWebsites().then(({ sites }) => {\n      const updatedWebsites = [...sites, Website.create(domainToBlock)];\n\n      return this.storageHandler.setBlockedWebsites(updatedWebsites);\n    });\n  }\n\n  removeFromBlockList(domain) {\n    const domainToRemove = domain.replace(/.*www\\./, '');\n\n    return this.storageHandler.getBlockedWebsites().then((storage) => {\n      const updatedWebsites = storage.sites.filter(\n        (website) => website.domain !== domainToRemove,\n      );\n\n      return this.storageHandler.setBlockedWebsites(updatedWebsites);\n    });\n  }\n\n  updateSetting(key, value) {\n    return this.storageHandler.updateSetting(key, value);\n  }\n}\n\nexport default ImpulseBlocker;\n","const PopupIcon = {\n  set: (path) => browser.browserAction.setIcon({ path }),\n  off: () => PopupIcon.set('icons/icon96-disabled.png'),\n  on: () => PopupIcon.set('icons/icon96.png'),\n};\n\nexport default PopupIcon;\n","import ImpulseBlocker from './ImpulseBlocker';\nimport MessageTypes from './enums/messages';\nimport ExtensionStatus from './enums/extensionStatus';\nimport SettingTypes from './enums/settings';\nimport getCurrentWebsiteDomain from './utils/tabs';\nimport storageHandler from './storage/StorageHandler';\n\nconst blocker = new ImpulseBlocker(storageHandler);\n\nblocker.boot();\n\nconst messageHandlers = {\n  [MessageTypes.GET_CURRENT_DOMAIN]: getCurrentWebsiteDomain,\n  [MessageTypes.IS_DOMAIN_BLOCKED]: (req) => blocker.isDomainBlocked(req.domain),\n  [MessageTypes.GET_EXTENSION_STATUS]: blocker.getState,\n  [MessageTypes.UPDATE_EXTENSION_STATUS]: (req) => blocker.updateStatus(req.parameter),\n  [MessageTypes.START_BLOCKING_DOMAIN]: (req) => blocker.addToBlockList(req.domain),\n  [MessageTypes.START_ALLOWING_DOMAIN]: (req) => blocker.removeFromBlockList(req.domain),\n  [MessageTypes.PAUSE_BLOCKER]: (req) => blocker.pause(req.duration),\n  [MessageTypes.UNPAUSE_BLOCKER]: blocker.start,\n  [MessageTypes.UPDATE_EXTENSION_SETTING]: (req) => blocker.updateSetting(req.key, req.value),\n  [MessageTypes.GET_BLOCKED_DOMAINS_LIST]: blocker.getBlockedDomains,\n\n  default: (req) => {\n    throw new Error('Message type not recognized: ', req.type);\n  },\n};\n\nbrowser.runtime.onMessage.addListener((req) => (messageHandlers[req.type] || messageHandlers.default)(req));\n\nbrowser.runtime.onInstalled.addListener(() => {\n  browser.storage.local.get('sites').then((storage) => {\n    // if the user is installed the extension first time\n    // we should create the sites key in the storage\n    if (!Array.isArray(storage.sites)) {\n      return browser.storage.local.set({ sites: [] });\n    }\n  });\n\n  browser.storage.local.get('extensionSettings').then((storage) => {\n    if (!Array.isArray(storage.extensionSettings)) {\n      return browser.storage.local.set({\n        extensionSettings: [\n          {\n            key: SettingTypes.SHOW_ON_OFF_BUTTONS_IN_POPUP,\n            value: SettingTypes.ON,\n          },\n          {\n            key: SettingTypes.SHOW_PAUSE_BUTTONS_IN_POPUP,\n            value: SettingTypes.ON,\n          },\n        ],\n      });\n    }\n  });\n\n  browser.storage.local.get('status').then((storage) => {\n    if (!storage.status) {\n      return browser.storage.local.set({ status: ExtensionStatus.ON });\n    }\n  });\n});\n","const extensionStatus = {\n  OFF: 'off',\n  ON: 'on',\n  PAUSED: 'paused',\n};\n\nObject.freeze(extensionStatus);\n\nexport default extensionStatus;\n","const messages = {\n  GET_EXTENSION_STATUS: 'getExtensionStatus',\n  GET_CURRENT_DOMAIN: 'getCurrentDomain',\n  IS_DOMAIN_BLOCKED: 'isDomainBlocked',\n  UPDATE_EXTENSION_STATUS: 'updateExtensionStatus',\n  START_BLOCKING_DOMAIN: 'startBlockingDomain',\n  START_ALLOWING_DOMAIN: 'startAllowingDomain',\n  GET_BLOCKED_DOMAINS_LIST: 'getBlockedDomainsList',\n  PAUSE_BLOCKER: 'pauseBlocker',\n  UNPAUSE_BLOCKER: 'unpauseBlocker',\n  UPDATE_EXTENSION_SETTING: 'updateExtensionSetting',\n};\n\nObject.freeze(messages);\n\nexport default messages;\n","const settings = {\n  SHOW_ON_OFF_BUTTONS_IN_POPUP: 'showOnOffButtonsInPopup',\n  SHOW_PAUSE_BUTTONS_IN_POPUP: 'showPauseButtonsInPopup',\n  ON: 'on',\n  OFF: 'off',\n};\n\nObject.freeze(settings);\n\nexport default settings;\n","const StorageHandler = {\n  getStatus: () => browser.storage.local.get('status'),\n\n  setStatus: (status) => browser.storage.local.set({\n    status,\n  }),\n\n  getSettings: () => browser.storage.local.get('extensionSettings'),\n\n  getBlockedWebsites: () => browser.storage.local.get('sites'),\n\n  setBlockedWebsites: (sites) => browser.storage.local.set({\n    sites,\n  }),\n\n  setPausedUntil: (datetime) => browser.storage.local.set({\n    pausedUntil: datetime.toISOString(),\n  }),\n\n  getPausedUntil: () => browser.storage.local.get('pausedUntil'),\n\n  updateSetting: (key, value) => StorageHandler.getSettings().then((storage) => {\n    const updatedSettings = storage.extensionSettings.filter(\n      (setting) => setting.key !== key,\n    );\n    updatedSettings.push({ key, value });\n\n    browser.storage.local.set({\n      extensionSettings: updatedSettings,\n    });\n\n    return updatedSettings;\n  }),\n};\n\nexport default StorageHandler;\n","import dayjs from 'dayjs';\n\nclass Website {\n  static create(url) {\n    return {\n      domain: url,\n      isActive: true,\n      timesBlocked: 0,\n      createdAt: dayjs().format(),\n    };\n  }\n}\n\nexport default Website;\n","export function openOptionsPage() {\n  browser.runtime.openOptionsPage();\n  window.close();\n}\n\nexport function redirectToBlockedPage(requestDetails) {\n  const original = encodeURIComponent(requestDetails.url);\n  const theme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n\n  const interceptPage = `/resources/redirect.html?target=${original}&theme=${theme}`;\n\n  browser.tabs.update(requestDetails.tabId, { url: interceptPage });\n}\n\nexport function createMatchPatterns(sites) {\n  return sites.map((site) => `*://*.${site.domain}/*`);\n}\n","function getActiveTab() {\n  return browser.tabs.query({\n    active: true,\n    currentWindow: true,\n  });\n}\n\nfunction parse(url) {\n  try {\n    const domain = new URL(url);\n\n    // dont show the button for non-http pages\n    if (['http:', 'https:'].indexOf(domain.protocol) === -1) {\n      throw new Error('URLS with non-http protocols are not supported.');\n    }\n\n    return domain.hostname.replace(/^www\\./, '');\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default function getCurrentWebsiteDomain() {\n  return getActiveTab().then((tabs) => {\n    const activeTab = tabs[0];\n\n    return parse(activeTab.url);\n  });\n}\n"],"sourceRoot":""}