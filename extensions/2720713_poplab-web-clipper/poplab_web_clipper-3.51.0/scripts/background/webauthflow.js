(()=>{"use strict";({5541:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,s)}c((n=n.apply(e,t||[])).next())}))};function n(e,t,r,n,o,i,u){var s,c;try{c=(s=e[i](u)).value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){let t=this,r=arguments;return new Promise((function(o,i){var u=e.apply(t,r);function s(e){n(u,o,i,s,c,"next",e)}function c(e){n(u,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){let n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((t=>Object.getOwnPropertyDescriptor(e,t).enumerable))),r.push.apply(r,n)}return r}function s(e,t){return c.apply(this,arguments)}function c(){return o((function*(e,t){if(browser.windows&&!t)return yield browser.windows.create(e);const r={active:"minimized"!==e.state,url:e.url};return{tabs:[yield browser.tabs.update(browser.tabs.getCurrent().id,r)]}})).apply(this,arguments)}function a(e,t,r){return l.apply(this,arguments)}function l(){return o((function*(e,t,r){return e?yield browser.windows.update(e,r):yield browser.tabs.update(t,{active:r.focused})})).apply(this,arguments)}function d(e,t){return f.apply(this,arguments)}function f(){return o((function*(e,t){return e?yield browser.windows.remove(e):yield browser.tabs.remove(t)})).apply(this,arguments)}function b(){var e=o((function*({url:e,redirect_uri:t,interactive:n=!1,alwaysUseTab:o=!1,windowOptions:c}){const l=yield s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"popup",url:e,state:"minimized"},c),o),f=l.id,b=l.tabs[0].id,p=function(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}(),w=p.promise,y=p.resolve,v=p.reject;browser.tabs.onUpdated.addListener(h),browser.webNavigation.onDOMContentLoaded.addListener(m),browser.tabs.onRemoved.addListener(O);try{return yield w}finally{browser.tabs.onUpdated.removeListener(h),browser.webNavigation.onDOMContentLoaded.removeListener(m),browser.tabs.onRemoved.removeListener(O),d(f,b).catch((e=>console.warn(JSON.stringify(e))))}function h(e,n,o){return r(this,void 0,void 0,(function*(){if(e===b&&null!=o.url&&o.url.startsWith(t))return y(o.url),{cancel:!0}}))}function m(e){e.frameId||e.tabId!==b||(n?a(f,b,{focused:!0,state:"normal"}).catch((e=>console.error(e))):y(null),browser.webNavigation.onDOMContentLoaded.removeListener(m))}function O(e){e===b&&v()}}));return e.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.launchWebAuthFlow=void 0,t.launchWebAuthFlow=function(e){return b.apply(this,arguments)}}})[5541](0,{})})();