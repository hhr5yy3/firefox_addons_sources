!function(){'use strict';const e='fetch_pairing_pin';for(var t='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',n='undefined'==typeof Uint8Array?[]:new Uint8Array(256),o=0;o<64;o++)n[t.charCodeAt(o)]=o;let i=null;'SAFARI'!==(()=>{const e=(navigator&&navigator.userAgent||'').toLowerCase(),t=(navigator&&navigator.vendor||'').toLowerCase(),n=null!==e.match(/(?:firefox|fxios)\/(\d+)/),o=null!==e.match(/version\/(\d+).+?safari/),i=null!==e.match(/edge\/(\d+)/)||null!==e.match(/edg\/(\d+)/),r=null!==e.match(/(?:^opera.+?version|opr)\/(\d+)/),d=/google inc/.test(t)?e.match(/(?:chrome|crios)\/(\d+)/):null;return n?'FIREFOX':o?'SAFARI':i?'EDGE':r?'OPERA':null!==d&&!r?'CHROME':void 0})()&&(i='undefined'==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype?chrome:browser);const r=(e,t)=>{const n={command:e,payload:t};'object'==typeof safari&&safari.extension?safari.extension.dispatchMessage(e,t):i.runtime.sendMessage(n)},d=(e,t)=>i.i18n.getMessage(e,t);let l=!1;const a=d('pairing_description'),s=d('pairing_pin_error_description'),c=d('pairing_highlight_error'),m=d('pairing_main_header1'),g=d('pairing_main_header2');var u;function y(){document.getElementById('section_loading_code').style.display='none'}function p(){document.getElementById('sub_header').textContent='',document.getElementById('sub_header').style.display='none'}function _(){document.getElementById('section_header').classList.remove('bg-error-header')}function f(e){document.querySelector('.error-highlight').style.display='none'}function h(){document.querySelector('.section-pin').style.display='none'}function E(){document.querySelector('.footer').style.display='none'}u=function(e){l=!(!e||'cros'!==e.os)},i.runtime.getPlatformInfo((e=>{u(e)})),function(){let e=i?i.i18n.getUILanguage():'en';!e||'ar'!==e&&'he'!==e||function(){document.body.style.direction='rtl',document.getElementById('section-pin').style.direction='ltr',document.getElementById('pin_description').style.textAlign='right';let e=document.getElementById('retry_link');e.classList.remove('retry_link'),e.classList.add('retry_link_rtl')}()}(),document.getElementById('pairing_main_heading').textContent=m,document.getElementById('section_loading_code').style.display='flex',h(),p(),_(),f(),E(),function(){let e=document.getElementById('retry_link'),t=d('retry');e&&t&&(e.textContent=t);let n=document.getElementById('cancel_link'),o=d('cancel');n&&o&&(n.textContent=o)}(),function(){let e=d('pairing_title');e&&(document.title=e)}(),document.addEventListener('DOMContentLoaded',(t=>{r(e)}),!0),document.getElementById('retry_link').addEventListener('click',(t=>{r(e)}),!0),document.getElementById('cancel_link').addEventListener('click',(e=>{window.close(),r('close_tab')}),!0),(e=>{'object'==typeof safari&&safari.self&&safari.self.addEventListener?safari.self.addEventListener('message',(({name:t,message:n})=>{e(t,n)})):i.runtime.onMessage.addListener(((t,n,o)=>{if(!t)return;const{command:i,payload:r}=t;e(i,r,n,o)}))})(((e,t,n,o)=>{switch(e){case'display_pairing_pin':if((''+t.generated_pin).split('').forEach(((e,t)=>{let n=document.getElementById(`digit_${t+1}`);n&&(n.textContent=e)})),document.getElementById('pairing_main_heading').textContent=m,document.getElementById('section-pin').style.display='flex',document.getElementById('pin_description').textContent=a,p(),_(),f(),E(),document.querySelector('.section-pin').style.display='flex',y(),l){let e=3;const t=document.getElementById('progress');t.classList.remove('hide');const n=setInterval((()=>{e-=1,document.getElementById('counter').textContent=e,e||(clearInterval(n),t.classList.add('hide'))}),1e3)}break;case'srp_pairing_failed':document.getElementById('pin_description').textContent=s,document.getElementById('pairing_main_heading').textContent=g,i=c,document.getElementById('error_highlight_text').textContent=i,document.querySelector('.error-highlight').style.display='block',document.getElementById('section_header').classList.add('bg-error-header'),document.querySelector('.footer').style.display='flex',document.getElementById('retry_link').focus(),h(),y();break;case'close_pairing_page':window.close(),r('close_me')}var i}))}();
