"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[8240,4910],{88134:(e,t,a)=>{a.d(t,{t:()=>f});var r=a(96832),i=a(48062),n=a(61468),l=a(8180),d=a(78346),s=a(25792),o=a(39431),c=a(92077),u=a(45272),_=a(88203),E=a(77063),p=a(55752),m=a(14900),I=a(68593);const b=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:i}=(0,_.Z)();return(0,I.BX)(n.kC,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexWrap:"nowrap",children:[a?(0,I.tZ)(m.zxk,{type:"submit",form:e,disabled:r,children:i("webapp_panel_edition_generic_save_changes")}):null,(0,I.tZ)(m.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button",children:i("webapp_panel_edition_generic_cancel_changes")})]})},L="id-add-form",h={GENERIC_ERROR:"_common_generic_error"};function f({children:e,initialValues:t,listRoute:a,reportError:m,countryToKeys:f,header:A,type:S,requiredProperty:C="idNumber"}){const{translate:N}=(0,_.Z)(),{openDialog:T,shouldShowFrozenStateDialog:y}=(0,E.Ub)(),[D,g]=r.useState(!1),[v,w]=r.useState(!1),[R,B]=r.useState(t.country),{createVaultItem:U}=(0,l.u)(s.L),{showToast:P}=(0,n.pm)();r.useEffect((()=>{const e={[o.U.DriversLicense]:i.PageView.ItemDriverLicenceCreate,[o.U.FiscalId]:i.PageView.ItemFiscalStatementCreate,[o.U.IdCard]:i.PageView.ItemIdCardCreate,[o.U.Passport]:i.PageView.ItemPassportCreate,[o.U.SocialSecurityId]:i.PageView.ItemSocialSecurityStatementCreate};(0,u.Nc)(e[S])}),[S]),r.useEffect((()=>{y&&T()}),[y]);const Z=()=>{(0,u.Nc)(i.PageView.ItemIdList),(0,c.uX)(a)},x=()=>{P({description:N(h.GENERIC_ERROR),mood:"danger",isManualDismiss:!0})},O=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;g(t),w(a),B(r.country)}}));return(0,I.BX)(I.HY,{children:[A(R),(0,I.tZ)(p.P,{formId:L,formRef:O.current,handleSubmit:async(e,{setSubmitting:t,setFieldError:a})=>{if(!e[C])return a(C,"");try{const a=await U({vaultItemType:S,content:e});(0,d.d6)(a)?(P({description:N(f(R).success)}),Z()):(t(!1),x(),m(new Error("[ids][add] Unable to add id"),a.error?.errorMessage))}catch(e){t(!1),x(),m(e,"[ids][add] Unexpected exception while add id")}},initialValues:t,variant:"add",children:t=>e({values:t})}),(0,I.tZ)(b,{formId:L,handleCancel:()=>{Z()},hasDataBeenModified:D,isSubmitting:v})]})}},54750:(e,t,a)=>{a.r(t),a.d(t,{DriverLicenseAddPanel:()=>_}),a(96832);var r=a(39431),i=a(88203),n=a(39649),l=a(66219),d=a(74910),s=a(30611),o=a(88134),c=a(68593);const u=()=>({title:"webapp_id_creation_driverlicense_title_default",success:"webapp_id_creation_driverlicense_alert_add_success_default"}),_=({lee:e,listRoute:t})=>{var a;const{translate:_}=(0,i.Z)(),E=(0,l.lt)(e.carbon.currentLocation),p=null!=(a=(0,n.B)(e.globalState))?a:"",m=t=>{e.reportError(t)},I={idName:"",idNumber:"",expirationDate:"",issueDate:"",country:E,spaceId:p,state:""};return(0,c.tZ)(o.t,{initialValues:I,listRoute:t,reportError:e.reportError,countryToKeys:u,type:r.U.DriversLicense,header:e=>(0,c.tZ)(d.h,{title:(0,l.Il)(_("webapp_id_creation_driverlicense_title_default"),_.getLocale(),e),type:r.U.DriversLicense}),children:({values:e})=>(0,c.tZ)(s.g,{variant:"add",handleError:m,country:e.country})})}},72055:(e,t,a)=>{a.d(t,{a:()=>i});var r=a(30309);const i=new Set([r.cH.AU,r.cH.GB,r.cH.IE,r.cH.NZ])},30611:(e,t,a)=>{a.d(t,{g:()=>I});var r=a(96832),i=a(88355),n=a(88203),l=a(49023),d=a(77063),s=a(72055),o=a(16792),c=a(87773),u=a(68037),_=a(82207),E=a(68593);const p={...o.k,STATE_LABEL:"webapp_id_form_field_label_state",DETAILS_CONTENT_LABEL:"webapp_id_form_driver_license_content_details_label"},m=({variant:e,handleCopy:t,handleError:a,country:o})=>{const{translate:m}=(0,n.Z)(),I=r.useRef(null),{shouldShowFrozenStateDialog:b}=(0,d.Ub)(),{values:L}=(0,i.u6)();return r.useEffect("add"===e?()=>{const e=setTimeout((()=>{I.current?.focus()}),l.sc);return()=>clearTimeout(e)}:()=>{},[]),(0,E.BX)(E.HY,{children:[(0,E.BX)(u.u,{title:m(p.DETAILS_CONTENT_LABEL),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.tZ)(c.YI,{name:"idName",label:m(p.NAME_LABEL),placeholder:m(p.NAME_PLACEHOLDER),ref:I,disabled:!!b}),(0,E.tZ)(c.YI,{name:"idNumber",label:m(p.ID_NUMBER_LABEL),placeholder:m(p.ID_NUMBER_PLACEHOLDER),actions:"edit"===e?[(0,E.tZ)(_.m,{data:L.idNumber,onCopy:t},"copy")]:void 0,disabled:!!b}),(0,E.tZ)(c.Nn,{name:"issueDate",label:m(p.ISSUE_DATE_LABEL),calendarButtonLabel:m(p.ISSUE_DATE_PICK),disabled:!!b}),(0,E.tZ)(c.Nn,{name:"expirationDate",label:m(s.a.has(o)?p.EXPIRATION_DATE_LABEL_UK:p.EXPIRATION_DATE_LABEL_US),calendarButtonLabel:m(s.a.has(o)?p.EXPIRATION_DATE_PICK_UK:p.EXPIRATION_DATE_PICK_US),disabled:!!b}),(0,E.tZ)(c.ju,{countryFieldLabel:m(p.COUNTRY_LABEL),stateFieldLabel:m(p.STATE_LABEL),handleError:a,disabled:!!b})]}),(0,E.tZ)(c.A0,{name:"spaceId",disabled:!!b,wrapInContentCard:!0,contentCardLabel:m(p.ORGANIZATION_CONTENT_LABEL)})]})},I=r.memo(m)}}]);