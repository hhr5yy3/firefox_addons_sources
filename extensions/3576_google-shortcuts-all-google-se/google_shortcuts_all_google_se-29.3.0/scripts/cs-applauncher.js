"use strict";!function(){var n,t,e,a,o,i,r,s,c,l,d,g,p=window,u=p.location,m=document,h="undefined"!=typeof chrome&&chrome||{},F='.ðŸ’™-egbwa #gb div:has(>div>#gbwa)+div>div{background:transparent!important;box-shadow:none!important}.ðŸ’™-dgbwa #gbwa a{-webkit-filter:brightness(1.1);filter:brightness(1.1)}.ðŸ’™-ugbwa #gbwa>div:after{content:"âœµ";position:absolute;top:0;right:0;bottom:0;left:0;width:12px;height:12px;margin:auto;border:2px solid #fff;border-radius:7px;background:#ec574c;color:#fff;font-size:.6875rem;text-align:center;-webkit-transform:translate(8px,8px);transform:translate(8px,8px)}.ðŸ’™-cgbwa #gb[style*="(32,33,36"] #gbwa:before{content:none}.ðŸ’™-cgbwa #gbwa a{background-image:url(\'data:image/svg+xml,%3Csvg viewBox="0 0 16 16" height="16" width="16" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M2 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm12 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM8 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z" fill="%23EA4335"/%3E%3Cpath d="M14 12c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM8 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm6 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z" fill="%234285F4"/%3E%3Cpath d="M8 12c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm-6 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z" fill="%2334A853"/%3E%3Cpath d="M2 10c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z" fill="%23FBBC05"/%3E%3C/svg%3E\')!important;background-position:50%!important;background-size:16px!important;background-repeat:no-repeat!important;opacity:1!important}.ðŸ’™-c>:not(.ðŸ’™-i),.ðŸ’™-c[style*=visibility][style*=hidden],.ðŸ’™-cgbwa #gbwa svg,.ðŸ’™-egbwa .docs-homescreen-material-bar-enabled .modal-dialog-bg,.ðŸ’™-egbwa .docs-homescreen-material-bar-enabled .modal-dialog.docs-dialog,.ðŸ’™-hgbwa #gbwa{display:none!important}.ðŸ’™-c{width:370px!important;height:532px!important;height:calc(100vh - 80px)!important;height:var(--ðŸ’™-c-h,calc(100vh - 80px))!important;max-height:calc(100vh - 80px)!important;color-scheme:light!important;transition:none!important}.ðŸ’™-i{position:relative!important;display:block!important;width:100%!important;height:100%!important;border:0!important;visibility:visible!important}',b=u.origin,f=u.href,w=u.pathname,P=h.runtime.getURL("/views/embed.html"),v=null,x=null,y=!1,E=!1,k=!1,C=!1,L=5,M=!1,W=[];function T(t){return t?p.getComputedStyle(t).backgroundColor.replace(/ /g,""):""}function _(){var t=T(m.body);if(-1===(t=t.startsWith("rgba(")&&t.endsWith(",0)")?T(m.documentElement):t).indexOf("(")||t.startsWith("rgba("))return!1;for(var e=t.split("(")[1].split(")")[0].split(","),a=0;a<e.length;a++)if(50<parseFloat(e[a]))return!1;return!0}function z(){return t&&"none"!==p.getComputedStyle(t).display}function S(){e&&z()&&e.click()}function q(t){var e=a||m.querySelector('.ðŸ’™-i,iframe[src^="https://ogs.google."][src*="/widget/app"]');(a=e.cloneNode()).src=t,e.replaceWith(a)}function D(t,e){M||h.runtime.sendMessage({method:"forward",data:{method:t,data:e,target:"app"},targetFrame:(t=a,"getFrameId"in h.runtime&&t?h.runtime.getFrameId(a):-1)})}function A(){var e=Date.now()+"-"+Math.random();try{D("ping",e)}catch(t){if((t.message||"").includes("Extension context invalidated"))return void(M=!0)}setTimeout(function(){var t;-1===W.indexOf(e)&&(t=["t="+Date.now()],c&&t.push("darkmode=1"),l&&t.push("newtab=1"),d&&t.push("hl="+d),v&&t.push("authuser="+v),x&&t.push("pageId="+x),q(P+"?"+t.join("&")))},2e3)}function B(){var t,e=a.src||"";s=e.startsWith("https://ogs.google.com/")&&e,a.className="ðŸ’™-i",a.allowTransparency=!0,a.referrerPolicy="no-referrer",a.sandbox="allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox",a.style.cssText="display: block !important; border: 0 !important; width: 100% !important; height: 100% !important; position: relative !important;",e=(u.pathname||"/").match(/(?:\/u\/(\d))?(?:\/b\/(\d{21}))?\//),v=e[1],x=e[2],v||x||(t=(e=u.search).match(/[&?]authuser=(\d)(?:&|$)/),e=e.match(/[&?]pageId=(\d{21})(?:&|$)/),t&&(v=t[1]),e&&(x=e[1]),v)||x||null===(e=(t=n.textContent).match(/accounts\.google\.com\/ListAccounts.{0,40}authuser=(\d)/))&&null===(e=t.match(/\/u\/(\d)\//))&&null===(e=t.match(/authuser=(\d)/))||(v=e[1]),l="about:blank"===f||"about:newtab"===b||"about:home"===b||"chrome-native://newtab"===b||"chrome-search://local-ntp"===b||"chrome-untrusted://new-tab-page"===b||"chrome://new-tab-page"===b||"chrome://new-tab-page-third-party"===b||"chrome://newtab"===b||"chrome://startpage"===b||"chrome://startpageshared"===b||"edge://newtab"===b||f.startsWith("chrome://vivaldi-webui/startpage")||-1!==f.indexOf("/components/startpage/startpage.html")||-1!==f.indexOf("/_/chrome/newtab"),t=m.documentElement.lang||"",d=!t||6<t.length?null:t.split("&")[0],(c=_())&&m.documentElement.classList.add("ðŸ’™-dgbwa"),D("newDarkMode",c),D("newPageLanguage",d),D("shareDocHeightRequest"),setTimeout(function(){D("shareDocHeightRequest")},100),setTimeout(function(){D("shareDocHeightRequest")},500),A(),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(){M||setTimeout(function(){var t=_();t!==c&&(c=t,m.documentElement.classList.toggle("ðŸ’™-dgbwa",c),D("newDarkMode",c))},200)})}function I(){(e=m.querySelector("#gbwa > div > a"))&&(e.removeAttribute("href"),e.addEventListener("click",function(){var t;M||(y&&(h.runtime.sendMessage({method:"cjeLandingOpen"}),n.classList.remove("ðŸ’™-ugbwa"),y=!1),t=z(),setTimeout(function(){D("popupOpenState",t)}),E?V():"openpopup"===i&&(k?k=!1:h.runtime.sendMessage({method:"openActionPopup"},function(t){"success"===t&&(k=!0,e.click())})))}))}function R(t){y=Boolean(t),n.classList.toggle("ðŸ’™-ugbwa",y)}function H(){C||(C=!0,(t=a.parentNode).classList.add("ðŸ’™-c"),B(),I(),m.addEventListener("click",function(){M||(t.style.visibility="hidden",S())}),h.runtime.onMessage.addListener(function(t){var e,a;M||(a=t&&t.method)&&"contentscript"===t.target&&("pong"===a?(e=t.data,W.push(e)):"closePopup"===a?S():"popupHeight"===a&&(e=0|t.data,a=e,(a=2e3<(a=(a|=0)<200?200:a)?2e3:a)!==o)&&(o=a,n.style.setProperty("--ðŸ’™-c-h",a+14+"px")))}),h.storage.local.get("cj_landing_lastupdated",function(t){R(t&&t.cj_landing_lastupdated)}),setTimeout(G,3e3))}var N=["leave","override","hide","launcheronly","openpopup"];function O(t){t="override"===(i=-1===N.indexOf(t)?"override":t)||"openpopup"===i;E=t||"launcheronly"===i,n.classList.toggle("ðŸ’™-egbwa",E),n.classList.toggle("ðŸ’™-hgbwa","hide"===i),n.classList.toggle("ðŸ’™-cgbwa",t),"hide"===i&&S()}function j(){(a=m.querySelector('.ðŸ’™-i,iframe[src^="https://ogs.google."][src*="/widget/app"]'))?r.then(function(){E&&H()}):(L*=2,g=setTimeout(j,L))}function V(){C&&(clearTimeout(g),L=5,j())}function G(){M||(A(),setTimeout(G,4e3))}function U(){q(s||"https://ogs.google.com/u/"+(v||0)+"/widget/app?awwd=1&gm3=1&origin="+encodeURIComponent(b)+"&cn=app")}function $(){var t,e;(e=m.querySelector(".ðŸ’™-s"))||((e=m.createElement("style")).className="ðŸ’™-s",(t=m.head||m.documentElement).insertBefore(e,t.firstChild)),e.textContent=F,r=new Promise(function(e){h.storage.sync.get("gbwaConfig",function(t){e(t&&t.gbwaConfig)})}).then(O,O),h.storage.onChanged.addListener(function(t,e){M||(E&&"local"===e&&t.cj_landing_lastupdated?R(t.cj_landing_lastupdated.newValue):"sync"===e&&t.gbwaConfig&&(O(t.gbwaConfig.newValue),E?V():C&&U()))}),j()}function J(){m.documentElement?(n=m.documentElement,$()):setTimeout(J,10)}m.documentElement instanceof SVGSVGElement||b.startsWith("https://ogs.google.")||b.startsWith("https://accounts.google.")||b.startsWith("https://cello.client-channel.google.")||w.startsWith("/_/")||w.startsWith("/embed/")||w.startsWith("/widget/")||w.startsWith("/companion/")||w.startsWith("/offline/")||/[&?](bm_iid|bm_cid)=/.test(u.search)||J()}();