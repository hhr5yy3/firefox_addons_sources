(()=>{"use strict";var e={576:function(e,t){var o,n=this&&this.__extends||(o=(e,t)=>(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&((e,t)=>{e.__proto__=t})||((e,t)=>{for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}),o(e,t)),function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=()=>{};t.Option=r;var i=function(e){function o(t){var o=e.call(this)||this;return o.value=t,o}return n(o,e),o.prototype.exists=function(e){return e(this.value)},o.prototype.filter=function(e){return e(this.value)?this:t.none},o.prototype.filterNot=function(e){return e(this.value)?t.none:this},o.prototype.flatMap=function(e){return e(this.value)},o.prototype.fold=function(){var e=this;return t=>t(e.value)},o.prototype.forAll=function(e){return e(this.value)},o.prototype.forComprehension=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o=this,n=0;n<e.length-1;++n)o=o.flatMap(e[n]);return o.map(e[e.length-1])},o.prototype.forEach=function(e){return e(this.value)},Object.defineProperty(o.prototype,"get",{get:function(){return this.value},enumerable:!0,configurable:!0}),o.prototype.getOrElse=function(){return this.value},o.prototype.getOrElseValue=function(){return this.value},Object.defineProperty(o.prototype,"isDefined",{get:()=>!0,enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isEmpty",{get:()=>!1,enumerable:!0,configurable:!0}),o.prototype.map=function(e){return s(e(this.value))},o.prototype.match=function(e){return e.some(this.value)},Object.defineProperty(o.prototype,"nonEmpty",{get:()=>!0,enumerable:!0,configurable:!0}),o.prototype.orElse=function(){return this},o.prototype.orElseValue=function(){return this},Object.defineProperty(o.prototype,"orNull",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"orUndefined",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"toArray",{get:function(){return[this.value]},enumerable:!0,configurable:!0}),o.prototype.toString=function(){return"Some("+this.value+")"},o}(r);t.Some=i;var a=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return n(o,e),o.prototype.exists=()=>!1,o.prototype.filter=function(){return this},o.prototype.filterNot=function(){return this},o.prototype.flatMap=()=>t.none,o.prototype.fold=e=>()=>e(),o.prototype.forAll=()=>!0,o.prototype.forComprehension=()=>t.none,o.prototype.forEach=()=>{},Object.defineProperty(o.prototype,"get",{get:()=>{throw new Error("No such element.")},enumerable:!0,configurable:!0}),o.prototype.getOrElse=e=>e(),o.prototype.getOrElseValue=e=>e,Object.defineProperty(o.prototype,"isDefined",{get:()=>!1,enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isEmpty",{get:()=>!0,enumerable:!0,configurable:!0}),o.prototype.map=()=>t.none,o.prototype.match=e=>e.none(),Object.defineProperty(o.prototype,"nonEmpty",{get:()=>!1,enumerable:!0,configurable:!0}),o.prototype.orElse=e=>e(),o.prototype.orElseValue=e=>e,Object.defineProperty(o.prototype,"orNull",{get:()=>null,enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"orUndefined",{get:()=>{},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"toArray",{get:()=>[],enumerable:!0,configurable:!0}),o.prototype.toString=()=>"None",o}(r);function s(e){return new i(e)}t.None=a,t.some=s,t.none=new a,t.option=function(e){return null==e?t.none:s(e)}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}(()=>{const e=function(e){let t,o=!1;return(...n)=>o?t:(o=!0,t=e(...n))}((()=>self.location.href===browser.runtime.getManifest().background.page));const t="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,n=t?Promise.resolve():new Promise((e=>"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",(()=>e()))));o(576);function r(e,t){return(e=>{const t=Object.getOwnPropertyNames(e);for(let o=0;o<t.length;o++)delete e[t[o]]})(e),Object.assign(e,t)}const i=(e,t,{deleteFalse:o=!1}={})=>(e[t]=!e[t],o&&!e[t]&&delete e[t],e),a=(...e)=>{},s=(...e)=>!1,l=(...e)=>{},c=e=>{throw Error(e)};function p(e,t=l){try{return e()}catch(e){return t(e)}}Object.entries;const u=e=>"string"==typeof e,d=e=>!!e,h=e=>new Promise((t=>setTimeout(t,e))),g=()=>{const e=[];return e.splice(0,0,new Promise(((t,o)=>{e.push(t,o)}))),e};const f=(e,t)=>{for(let o=0;o<e.length;o++)if(!t(e[o]))return e.slice(o);return[]},m=(e,t)=>f(((e,t)=>f(e.reverse(),t).reverse())(e,t),t);const y=e=>Array.isArray(e)?e:[e];const[b,w]=g(),_=Promise.resolve(),v=(e,t)=>e?browser.i18n.getMessage(e,t):"",k=e=>Array.isArray(e)?((e,...t)=>v(e,t.map((e=>String(e)))))(...e):e?v(e):"";new Map;const x=({initialWork:e=[],canRunWithOthers:t,beforeEach:o,afterEach:n,maxConcurrentJobs:r=1}={})=>{const i=[...e],a=new Set;return{addWork:async function(e,t){return new Promise(((o,r)=>{const l={info:t,fn(){const i=e();i.finally((async()=>{a.delete(l),n&&await n(t),i.then(o,r).finally((()=>{Promise.resolve().then(s)}))}))}};i.push(l),s()}))},startWork:s,getRunningJobsCount:()=>a.size,getPendingJobsCount:()=>i.length,hasFreeSlot:()=>a.size<r};async function s(){for(;i.length>0&&a.size<r&&(0===a.size||!t||t(i[0].info,[...a].map((e=>e.info))));){const e=i.shift();a.add(e),o&&await o(e.info),e.fn()}}};const{port1:A,port2:I}=new MessageChannel;class S extends class{constructor(e,t={storageArea:"local"}){this.key=e,this.options=t,this._listeners=Array(),this._listenForChangesFn=(e=>{let t=!1;return(...o)=>{t||(t=!0,e(...o))}})((()=>browser.storage.onChanged.addListener(((e,t)=>{t===this.storageArea&&e[this.key]&&this._listeners.forEach((t=>t(e[this.key])))})))),this.storageArea=t.storageArea}async addOnChangeListener(e,{dummyInitValue:t}={}){var o;this._listeners.push(e),this._listenForChangesFn(),t&&e({newValue:(o=t,o instanceof Promise?await t:t)})}}{constructor(e,t,o={storageArea:"local"}){super(e,o),this.key=e,this.getDefaultValue=t,this.options=o,this._updateExecutor=x({maxConcurrentJobs:1}),this._setExecutor=x({maxConcurrentJobs:1}),this.storageArea=o.storageArea}async reset(){return this.set(await this.getDefaultValue())}async orDefault(e){return e.hasOwnProperty(this.key)?e[this.key]:await this.getDefaultValue()}async get(){const e="custom"===this.storageArea?await this.options.customDataSource.get()||await this.getDefaultValue():"remote"===this.storageArea?await(await fetch(this.options.remoteApi.url,await this.getRequestInit())).json()||await this.getDefaultValue():"localStorage"===this.storageArea?this.options.localStorageTextOnly?p((()=>self.localStorage.getItem(this.key)),(()=>""))||await this.getDefaultValue():await p((()=>JSON.parse(self.localStorage.getItem(this.key))),(()=>this.getDefaultValue())):await browser.storage[this.storageArea].get(this.key).then((e=>this.orDefault(e)));return this.options.preProcessor?await this.options.preProcessor(e):e}async remove(){return"custom"===this.storageArea?await this.options.customDataSource.remove():"remote"===this.storageArea?(await fetch(this.options.remoteApi.url,await this.getRequestInit("DELETE"))).json():"localStorage"===this.storageArea?p((()=>self.localStorage.removeItem(this.key))):browser.storage[this.storageArea].remove(this.key)}async update(e){return this._updateExecutor.addWork((()=>this.get().then(e).then((e=>this.set(e)))))}async set(e){return this._setExecutor.addWork((async()=>{this.options.onBeforeSave&&await this.options.onBeforeSave(e);return await("custom"===this.storageArea?await this.options.customDataSource.set(e):"remote"===this.storageArea?void await fetch(this.options.remoteApi.url,await this.getRequestInit("POST",JSON.stringify(e))):"localStorage"===this.storageArea?p((()=>self.localStorage.setItem(this.key,this.options.localStorageTextOnly?String(e):JSON.stringify(e)))):browser.storage[this.storageArea].set({[this.key]:e}))}))}async setWith(e,t){return"remote"===this.storageArea||"custom"===this.storageArea||"localStorage"===this.storageArea?c("missing"):browser.storage[this.storageArea].set(Object.assign({[this.key]:e},t))}async getWith(...e){const t=e.map((e=>u(e)?e:e.key)),o="remote"===this.storageArea||"custom"===this.storageArea||"localStorage"===this.storageArea?c("missing"):await browser.storage[this.storageArea].get([this.key,...t]),n=await this.orDefault(o),r=e.map((async e=>u(e)?o[e]:await e.orDefault(o)));return[n,...await Promise.all(r)]}async getRequestInit(e="GET",t){var o,n;const r=await(i=this.options.remoteApi.GET_Headers,"function"==typeof i?i():i);var i;const a=await(null===(n=(o=this.options.remoteApi).authToken)||void 0===n?void 0:n.call(o));return{method:e,body:t,...r,...a?{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json",...null==r?void 0:r.headers}}:{}}}}const N=new S("DISABLED_DOMAINS",(()=>({}))),E=new S("DISABLED_HORIZONTAL_SCROLLING_DOMAINS",(()=>({})));new S("IS_DISABLED",(()=>!1));let P=!1;const C=browser.runtime.getPlatformInfo?browser.runtime.getPlatformInfo().then((({os:e})=>P="android"===e)):Promise.resolve(!1);let O=!1;C.then((e=>O=!e));const F=()=>browser.tabs.query(P?{active:!0}:{active:!0,lastFocusedWindow:!0}).then((([e])=>e));const T="important",D="!important",L=e=>document.getElementById(e),$=e();async function R(e,t={}){const o=y(e);const{cookieStoreId:n,inNewTab:r=!1,nextToCurrent:i=!1,active:a=!1,inNewWindow:s=!1,windowId:l,forceIncognitoWindow:c=!1,stopOpenerTabId:p,_directCall:u}=t;if(!$&&!u)return function(e,t){if(t._directCall)throw Error("infinite loop???");return t._directCall=!0,browser.runtime.sendMessage(new B(e,t))}(o,t);const d=n,h=d?{cookieStoreId:n}:{},[g,...f]=o,m=await b(g,0,l);return f.forEach(((e,t)=>b(e,t+1,m.windowId))),m;async function b(e,t,o){const n=d&&!r&&!s&&0===t;if(s)return browser.windows.create({url:e,...h,...c?{incognito:!0}:{}}).then((e=>e.tabs[0]));if(r||n||t>0){const r=a&&0===t,s=await F()||{id:void 0,index:void 0},c=(l=s.index,Number.isFinite(l)?s.index+1:void 0),u=!(!P&&!p),d=t=>browser.tabs.create({url:e,...h,windowId:o,active:r,...i?{index:c}:{},...t?{}:{openerTabId:s.id}}),g=u?await d(u):await d(u).catch((()=>d(!0)));return n&&s.id&&browser.tabs.remove(s.id),g}return await browser.tabs.update({url:e});var l}}class B{constructor(e,t){this.links=e,this.options=t,this.type="openURL"}}$&&browser.runtime.onMessage.addListener((e=>{if("openURL"===e.type)return R(e.links,e.options)}));const j="https://www.patreon.com/fastaddons",M="https://paypal.me/fastaddons/",W="https://ko-fi.com/fastaddons",z=async()=>{browser.tabs.reload((await F()).id),browser.runtime.reload()},V=e=>t?e:browser.runtime.getURL(e),H=e=>e[Math.floor(Math.random()*e.length)],U=(e,t)=>{const{column:o,substitutions:n}=t||{};let r=v(e,n);return!0!==o&&!1!==o||(r.endsWith(":")?o||(r=r.slice(0,-1)):o&&(r+=":")),r};function G({githubLink:e="",thunderbirdLink:t="",firefoxLink:o="",chromeLink:n="",safariLink:r="",optionsIconStyle:i=""}){const s=(e=a)=>({event:t})=>{t.stopImmediatePropagation(),e()},l=H(Array(19).fill(0).map(((e,t)=>`utils/svg/donation/${t}.svg`))),c=e=>({options:t})=>R(e,{...t.inNewTab?{inNewTab:!0,active:!0,nextToCurrent:!0}:{}});return{_dev_reload:{nameFix:"Reload add-on",icon:"utils/svg/undo.svg",fn:z},op_options:{name:"menu_options",title:"",icon:"utils/svg/settings.svg",iconStyle:i,smallName:"",fn:()=>{browser.runtime.openOptionsPage()}},op_about:{name:"op_visit_home",icon:"utils/svg/fastaddons.svg",smallNameFix:"FastAddons.com",fn:c("https://fastaddons.com/")},op_advanced:{name:"cm_advanced",title:"",icon:"svg/flask.svg",fn:s()},op_help:{name:"op_help",icon:"svg/question.svg",smallNameFn:()=>`v${browser.runtime.getManifest().version}`,fn:s()},social_facebook:{titleFix:"Facebook",icon:"utils/svg/facebook.svg",fn:c("https://www.facebook.com/fastaddons")},social_twitter:{titleFix:"Twitter",icon:"utils/svg/twitter.svg",fn:c("https://twitter.com/FastAddons")},social_linked_in:{titleFix:"LinkedIn",icon:"utils/svg/linkedin.svg",fn:c("https://www.linkedin.com/company/fastaddons/")},...t?{thunderbird_addons:{name:"thunderbird_store",title:"",icon:"utils/svg/thunderbird.svg",fn:c(t)}}:{},...o?{firefox_addons:{name:"firefox_store",title:"",icon:"utils/svg/firefox.svg",fn:c(o)}}:{},...n?{chrome_store:{name:"chrome_store",title:"",icon:"utils/svg/chrome.svg",fn:c(n)}}:{},...r?{safari_store:{name:"safari_store",title:"",icon:"utils/svg/safari.svg",fn:c(r)}}:{},...e?{report_issues:{nameFix:U("o_about_issues",{column:!1}),title:"",icon:"utils/svg/github.svg",fn:c(e)}}:{},op_support_patreon:{name:"op_support_me",titleFix:`${v("o_about_support_by")} ${v("o_about_support_by_patron")}`,icon:l,smallNameFix:"Patreon",style:"background-color: #F9685466",fn:c(j)},op_support_paypal:{name:"op_support_me",titleFix:`${v("o_about_support_by")} ${v("o_about_support_by_donation")}`,icon:"utils/svg/donation/paypal.svg",smallNameFix:"PayPal",style:"background-color: #00AADF4D",fn:c(M)},op_support_coffee:{name:"op_support_me",icon:"utils/svg/donation/coffee.svg",smallNameFix:"Buy me a Coffee",style:"background-color: #FF9935",fn:c(W)},support_me:{name:"op_support_me",icon:l,style:"background-color: #F9685466",fn:s()},support_patreon:{nameFix:"Patreon",titleFix:`${v("o_about_support_by")} ${v("o_about_support_by_patron")}`,icon:l,style:"background-color: #F9685466",fn:c(j)},support_paypal:{nameFix:"PayPal",titleFix:`${v("o_about_support_by")} ${v("o_about_support_by_donation")}`,icon:"utils/svg/donation/paypal.svg",style:"background-color: #00AADF4D",fn:c(M)},support_coffee:{nameFix:"Buy me a Coffee",titleFix:"Buy me a Coffee",icon:"utils/svg/donation/coffee.svg",style:"background-color: #FF9935",fn:c(W)}}}const q=e=>browser.runtime.sendMessage(e);const K=new Set(["svg","path","circle","text"]);function J(e,t,o){const n=K.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);if(t){const e=u(t)?{textContent:t}:t;Object.entries(e).forEach((([t,o])=>{switch(t){case"text":case"textContent":n[t]=o;break;case"handlers":Object.assign(n,e.handlers);break;default:n.setAttribute(t,o)}}))}return o&&y(o).forEach((e=>{e&&n.appendChild(e)})),n}function X(e){const[t,o,n]=e;return"string"!=typeof t?e.map((e=>e&&X(e))):J(t,o,n?X(n):null)}const Y=(e,t,o)=>e.style.setProperty(t,o,"important");const Q="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;";const Z=["onmouseenter","onmouseleave"],ee=["onmousedown","onmouseup"],te=(e,t="",o={})=>({...oe(e,Z,o),...oe(t,ee,o)});function oe(e,[t,o],{getNode:n,important:r=!1,restoreOriginalStyles:i=!0}={}){const a=e.split(";").filter(d).map((e=>e.trim())).map((e=>{const[t,o=""]=function(e,t){const o=e.indexOf(t);return o<0?[e]:[e.substring(0,o),e.substring(o+1)]}(e,":");return o.endsWith(D)?[t,o,D]:[t,o,""]})),s=[];return{[t]:function(e){const t=n?n():e.currentTarget;0===s.length&&function(e){const t=window.getComputedStyle(e);s.push(...a.map((([e,o])=>[e,t.getPropertyValue(e),t.getPropertyPriority(e)])))}(t);a.forEach((([e,o])=>t.style.setProperty(e,o,r?T:void 0)))},[o]:function(e){const t=n?n():e.currentTarget;s.forEach((([e,o,n])=>i?t.style.setProperty(e,o,n?T:n):t.style.removeProperty(e)))}}}const ne=(()=>{let e=0;return()=>++e})();const re=e=>t=>{t.preventDefault(),t.stopImmediatePropagation(),e(t)},ie=e=>`${e}px`;function ae({important:e=!1,generateIds:t=!1,roundEdges:o=!1,showShortcutsTitle:n=!1,maxWidth:r="300px",itemPadding:i="6px",iconSize:l=26,hoverColor:c="#e7e7e7",activeColor:p="#d7d7d7",autoCloseParentOnClickFn:u=a,containerStyle:g="",submenuStyle:f="",darkThemeService:y={isDarkPromise:Promise.resolve(!1)}}={}){const b=t=>function(e="",{important:t=!0,allToInitial:o=!0}={}){if(!o&&!t)return e;const n=e.split(";").filter((e=>e.trim())),r=o?["all: initial","z-index: 2147483647","font-family: Verdana, system-ui, sans-serif, Helvetica","font-size: 12px",...n]:n;return(t?r.map((e=>`${e}!important;`)):r).join("")}(t,{important:e,allToInitial:e}),w=[],_=[];let x=!0;return{setAutoCloseParentOnclick:e=>u=e,addOnClickHandler:e=>_.push(e),handleKey:function(e,t){const o=w.find((t=>t.key===e));return!!o&&(o.executeAction({data:{},options:{},event:t}),!0)},buildMenu:async function(e,t,o){const n=await y.isDarkPromise.catch(s),r=n?"#FFFFFF":"#000000",i=`background: ${n?"#2b2b2b":"#FFFFFF"}; color: ${r}; border: 1px solid ${r}32;`;x=!0,w.length=0;const a=(await Promise.all(o.map((o=>A(e,o,t,{mainStyle:i,darkTheme:n},w))))).filter(d),l=(p=a,u=(e,t)=>Boolean(e.isSeparator&&t.isSeparator),p.filter(((e,t)=>0===t||!((e,t)=>{try{return e()}catch(e){return t}})((()=>u(p[t-1],e)))))),c=m(l,(e=>e.isSeparator)).map((e=>e.node));var p,u;return J("div",{class:"context-menu-items-container",style:`${i}${g}`},c)}};async function A(g,y,I={},{darkTheme:S,mainStyle:N},E=[],P=!1){const C=String(ne()),O=(e=>t=>(e(t),t))((e=>E.push(e))),F="inline"===y.type;if("separator"===y.type)return O({id:"separator",isSeparator:!0,node:J("separator",{style:b(`${N}; border-left: 0; border-right: 0; border-bottom: 0; margin: 3px 0; padding: 0; display: block;`)}),executeAction:a,hideChildNode:a,children:[]});const{key:T,action:D,children:L=[],options:$={}}=y,B=g[D];if(!B)return!1;const{name:j,nameFix:M,nameFn:W,title:z,titleFix:H,autoTitle:U,titleFn:G,smallName:q,smallNameFn:K,smallNameFix:Z,proIcon:ee,proLink:oe,icon:ae,iconStyle:se,darkIconStyle:le,darkIconInvert:ce,fn:pe,allowAuxClick:ue,anchor:de,children:he,test:ge,disabled:fe,enabled:me,checkbox:ye,checkboxIcons:be,style:we="",smallStyle:_e=""}=B,ve=await ee,ke={data:I,options:$,event:new Event("noop")};if(ge&&!await Promise.resolve(ge(ke)).catch(a))return!1;const xe=ve&&oe?()=>R(oe,{nextToCurrent:!0,active:!0,inNewTab:!0}):a,Ae=!me&&(!!ve||!(!fe||!await Promise.resolve(fe(ke)).catch(s))),Ie=Ae?xe:pe,Se=!(!de||Ae)&&await Promise.resolve(de(ke)).catch(s),Ne=he?await he(ke):[],Ee=Ne.reduce(((e,{action:t,menuItem:o})=>(t&&(e[o.action]=t),e)),{});L.push(...Ne.map((({menuItem:e})=>e)));const Pe=()=>Promise.resolve(!!ye&&ye(ke)).catch(s),Ce=ye&&(be?function(e,t={},o={},n={},[r,i]){const a=J("input",{type:"checkbox",...t,...e?{checked:!0}:{}}),s=J("img",{...n}),l=J("div",{...o},[a,s]),c=()=>s.src=V(a.checked?r:i);return c(),a.addEventListener("change",c),Object.defineProperty(l,"checked",{get:()=>a.checked,set:e=>{a.checked=e,c()}}),l}(await Pe(),{handlers:{onclick:e=>e.preventDefault()},style:b("visibility: hidden")},{style:b(`margin: 0 10px 0 0; width: ${l}px; height: ${l}px`)},{style:b("width: 100%;")},be):function(e,t={}){return J("input",{type:"checkbox",...t,...e?{checked:!0}:{}})}(await Pe(),{handlers:{onclick:e=>e.preventDefault()},style:b(`margin: 0 10px 0 0; width: ${l-3}px; height: ${l}px; appearance: checkbox; -moz-appearance: checkbox; -webkit-appearance: checkbox;`)}));async function Oe(e){Ce&&(Ce.checked=!Ce.checked);const t=Promise.resolve(Ie(Object.assign({},ke,{event:e}))).catch(console.error);$.showWorking?await async function(e,t,{styleContainer:o="",styleImg:n="",styleLabel:r=""}={}){const i=X(["div",{class:"flex flex-space-between",style:o},[["img",{src:V("svg/loading.svg"),style:`width: 18px;${n}`,class:"spinning"}],["label",{textContent:v("sync_working"),style:r}]]]);return e.insertAdjacentElement("beforebegin",i),await(async(e,t)=>{const o="display",[n,r]=[e.style.getPropertyValue(o),e.style.getPropertyPriority(o)];return e.style.setProperty(o,"none","important"),await t().finally((()=>{e.style.setProperty(o,n,r)}))})(e,t).finally((()=>{i.remove()}))}(e.currentTarget,(()=>t),{styleContainer:`display: ${F?"inline-":""}flex; align-items: center; font-size: 14px; cursor: default; padding: ${i}; margin: 2px; -moz-user-select: none; user-select: none; white-space: nowrap;`,styleImg:`height: ${l}px; width: ${l}px;`,styleLabel:`${F?"display: none":""}; margin: 0 10px; max-width: ${r}; ${Q}`}):await t,_.forEach((e=>e(ke))),$.delayedClose&&await h($.delayedClose),$.preventClose||u()}const Fe=e=>t=>{t.stopPropagation();let o=!0;t.stopImmediatePropagation=()=>o=!1,e(t),o&&u()},Te=Z||(K?await K(ke):q?k(q):""),De=await(async(e,t)=>e.nameFn&&await e.nameFn(t)||e.nameFix||k(e.name))(B,ke),Le=G&&await G(ke)||`${U&&De||H||(z?k(z):"")}\n${n&&T?v("cm_shortcut_title",T):""}`.trim(),$e=[],Re=m((await Promise.all(L.map((e=>A(Object.assign({},g,Ee),e,I,{darkTheme:S,mainStyle:N},$e,!0))))).filter(d),(e=>e.isSeparator)),Be=Re.length>0,je=Re.some((e=>e.children.length>0));if((L.length>0||he)&&!Be)return!1;E.push(...$e);const Me=Be&&J("div",{class:"context-menu-items-container",style:b(`${N}; position: absolute; display: none; box-shadow: 0px 0px 2px -1px; ${je?"":"max-height: 100vh; overflow-y: auto;"}${f}`),handlers:{...te("visibility: show; display: block;","",{important:e})}},Re.map((e=>e.node))),We=Ae?"opacity: 0.5;":"",ze=Ae?Fe(xe):P?Fe(Oe):Oe,Ve=J(Se?"a":"div",{...Se?{href:Se,target:"_blank"}:{},...t?{id:`cm_${D}`}:{},style:b(`display: ${F?"inline-":""}flex; align-items: center; font-size: 14px; padding: ${i}; margin: 2px; cursor: pointer; -moz-user-select: none; user-select: none; white-space: nowrap; \n        ${o?"border-radius: 4px;":""}\n        ${Se?"text-decoration: none; color: inherit;":""}\n        ${we}`),title:`${ve?`${v("msg_pro_header")}\n${v("msg_pro_support")}\n\n`:""}${Le}`.trim(),handlers:{onclick:ze,...ue?{onauxclick:ze}:{},...te(`background:${c}${S?"42":""};`,`background:${p}${S?"84":""}`,{important:e})}},[Ce||J("img",{style:b(`${We} height: ${l}px; width: ${l}px; ${ce&&S?"filter: invert(1);":""}${se||""}; ${S?le:""}`),src:ae?V(ae):"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}),J("label",{style:b(`${We}${F?"display: none":""}; margin: 0 10px; cursor: pointer; max-width: ${r}; ${Q}`),textContent:De}),Te&&J("i",{style:b(`margin-left: auto; opacity: 0.5;${_e}`),textContent:Te}),Be&&J("img",{style:b("margin: 0 0 0 auto; height: 12px; opacity: 0.5;"+(S?"filter: invert(1);":"")),src:V("utils/svg/keyboard-right-arrow-button.svg")}),ve&&J("img",{style:b(`margin: 0 0 0 ${Te||Be?"5px":"auto"}; height: ${l}px; width: ${l}px;`),src:V(ve),handlers:{onclick:re(xe)}}),Be&&J("div",{style:b("position: absolute; left: 0; width: 100%; align-self: start;")},Me||null)].filter(d));return Ve.addEventListener("mouseleave",(()=>{})),Ve.addEventListener("mouseenter",(async()=>{await h(0),function(e){w.filter((t=>!t.children.find((t=>t.id===e)))).forEach((e=>e.hideChildNode()))}(C),Me&&(Y(Me,"display","block"),Y(Me,"top",ie(-2-parseInt(function(e,t,o,n){let r=0,i=0,a=e.length;return t&&(r=(i=e.indexOf(t))+t.length),o&&(a=e.indexOf(o,r)),a<0&&n&&(a=e.length),a<0||i<0?"":e.substring(r,a)}(i,"","px"))||0)),x?function(){if(!Me)return;Y(Me,"left","100%");const{right:e}=Me.getBoundingClientRect();e>window.innerWidth&&(Y(Me,"left",""),Y(Me,"right","100%"),x=!1);const{left:t}=Me.getBoundingClientRect();t<0&&(Y(Me,"left",""),Y(Me,"right",`calc(100% + ${t}px)`))}():function(){if(!Me)return;Y(Me,"right","100%");const{left:e}=Me.getBoundingClientRect();e<0&&(Y(Me,"right",""),Y(Me,"left","100%"));const{right:t}=Me.getBoundingClientRect();t>window.innerWidth&&(Y(Me,"right",""),Y(Me,"left",`calc(100% - ${t-window.innerWidth}px)`))}(),function(){if(!Me)return;const{bottom:e}=Me.getBoundingClientRect(),t=e-window.innerHeight;t>0&&Y(Me,"top",ie(parseInt(Me.style.top||"0")-t))}())})),O({id:C,isSeparator:!1,node:Ve,executeAction:()=>Ie(ke),key:T,children:$e,hideChildNode:()=>{Me&&(Y(Me,"display","none"),Y(Me,"right",""),Y(Me,"left",""))}})}}let se=!1;const le=(async()=>await C&&await async function(){return browser.runtime.getBrowserInfo?browser.runtime.getBrowserInfo().then((e=>parseInt(e.version))):0}()>=79)().then((e=>se=e));async function ce(){await C&&!await le&&await browser.tabs.getCurrent().then((e=>browser.tabs.remove(e.id))),window.close()}const pe={},ue=async function(e){return browser.storage.onChanged.addListener((t=>{Object.entries(t).forEach((([t,{newValue:o}])=>{e[t]=o}))})),r(e,await browser.storage.local.get())}(pe),de=(e="")=>({action:`_s_${e}`,type:"separator"});var he,ge,fe,me,ye,be,we,_e;n.then((()=>_)).then((function(){const e=document.querySelectorAll("[data-i]");for(let t=0,o=e.length;t<o;t++){const o=e[t],n=o.dataset,r=n.i,i=n.p,a=i?v(r,i.split("|")):v(r);o.appendChild(document.createTextNode(a))}const t=document.querySelectorAll("[data-a]");for(let e=0,o=t.length;e<o;e++){const o=t[e];let[n,r]=o.dataset.a.split("|");r=v(r),n?o.setAttribute(n,r):o.appendChild(document.createTextNode(r))}})),(e=>{e[e.TEXT=0]="TEXT",e[e.CLICKABLE=1]="CLICKABLE",e[e.LINK=2]="LINK",e[e.OTHER=3]="OTHER"})(he||(he={})),(e=>{e[e.UNIFORM=0]="UNIFORM",e[e.EXPONENTIAL=1]="EXPONENTIAL",e[e.INFINITE=2]="INFINITE"})(ge||(ge={})),(e=>{e[e.SCROLLBAR=0]="SCROLLBAR",e[e.GRAB_AND_DRAG=1]="GRAB_AND_DRAG",e[e.DYNAMIC_MULTIPLIER=2]="DYNAMIC_MULTIPLIER"})(fe||(fe={})),(e=>{e[e.SINGLE_CLICK=0]="SINGLE_CLICK",e[e.DOUBLE_CLICK=1]="DOUBLE_CLICK"})(me||(me={})),(e=>{e[e.NORMAL=0]="NORMAL",e[e.THIN=1]="THIN",e[e.HIDDEN=2]="HIDDEN"})(ye||(ye={})),(e=>{e[e.IF_PRESSED=0]="IF_PRESSED",e[e.NOT_PRESSED=1]="NOT_PRESSED"})(be||(be={})),(e=>{e[e.enabled=0]="enabled",e[e.userDisabled=1]="userDisabled",e[e.browserDisabled=2]="browserDisabled"})(we||(we={})),(e=>{e[e.smart=0]="smart",e[e.strict=1]="strict",e[e.none=2]="none",e[e.y_only=3]="y_only",e[e.x_only=4]="x_only"})(_e||(_e={}));const ve=F().then((({url:e})=>e||""));async function ke(){pe.TOOLBAR_BUTTON_MAIN_SWITCH&&(browser.storage.local.set({IS_DISABLED:!pe.IS_DISABLED}),ce()),await n,L("IS_DISABLED").checked=!pe.IS_DISABLED}async function xe(){L("title").textContent=(()=>{const e=browser.runtime.getManifest();return`${e.name} ${e.version}`})(),L("IS_DISABLED").onchange=e=>{browser.storage.local.set({IS_DISABLED:!e.target.checked})};const e=await q({type:"current_tab",data:{type:"ping"}}).catch(s),t=function(e,t=!1){try{const o=new URL(e).hostname;return t&&o.startsWith("www.")?o.substring(4):o}catch(e){return""}}(await ve,!0),o=ae({roundEdges:!0,containerStyle:"border: none;",autoCloseParentOnClickFn:ce}),n={...G({firefoxLink:"https://addons.mozilla.org/addon/scroll_anywhere/?utm_source=sa",chromeLink:"https://chrome.google.com/webstore/detail/scrollanywhere/jehmdpemhgfgjblpkilmeoafmkhbckhi",thunderbirdLink:"https://addons.thunderbird.net/addon/scroll_anywhere/?utm_source=sa",safariLink:"https://apps.apple.com/app/scrollanywhere/id1556838353",githubLink:"https://github.com/fastaddons/ScrollAnywhere/issues",optionsIconStyle:"filter: hue-rotate(280deg);"}),_dev_test_pages:{nameFix:"Test pages",icon:"utils/svg/resize-corner.svg",fn:()=>{}},show_scrollbars:{name:"show_scrollbars",title:"show_scrollbars_title",icon:"svg/scroll-bar.svg",fn:()=>q({type:"current_tab",data:{type:"show_scrollbars"},allFrames:!0})},win_horizontal_scrolling_disable:{nameFn:({data:{hostName:e}})=>v("win_horizontal_scrolling_disable",`"${e}"`),autoTitle:!0,icon:"",fn:async({data:{hostName:e}})=>E.set(i(await E.get(),e,{deleteFalse:!0})),checkbox:async({data:{hostName:e}})=>(await E.get())[e]},win_disable:{nameFn:({data:{hostName:e}})=>v("win_disable",`"${e}"`),autoTitle:!0,icon:"",fn:async({data:{hostName:e}})=>N.set(i(await N.get(),e,{deleteFalse:!0})),checkbox:async({data:{hostName:e}})=>(await N.get())[e]},not_working:{nameFix:v("not_working"),title:"not_working_title",icon:"svg/cancel.svg",iconStyle:"filter: grayscale(1);",fn:(r="/not_working/not_working.html",({options:e})=>R(r,{...e.inNewTab?{inNewTab:!0,active:!0,nextToCurrent:!0}:{}}))}};var r;document.querySelector("nav").appendChild(await o.buildMenu(n,{hostName:t},[...e?[{key:"",action:"win_disable",options:{delayedClose:1e9}},{key:"",action:"win_horizontal_scrolling_disable",options:{delayedClose:1e9}}]:[{key:"",action:"not_working",options:{inNewTab:!0}}],...pe.SCROLLBARS_WIDTH===ye.HIDDEN&&e?[{key:"",action:"show_scrollbars"}]:[],de(),{key:"o",action:"op_options"},de(),{key:"",action:"safari_store",options:{inNewTab:!0}},{key:"",action:"firefox_addons",options:{inNewTab:!0}},{key:"",action:"thunderbird_addons",options:{inNewTab:!0}},{key:"",action:"chrome_store",options:{inNewTab:!0}},de(),{key:"",action:"report_issues",options:{inNewTab:!0}},{key:"",action:"op_about",options:{inNewTab:!0}},de(),H([{key:"",action:"op_support_paypal",options:{inNewTab:!0}},{key:"",action:"op_support_coffee",options:{inNewTab:!0}}]),{key:"",type:"inline",action:"support_coffee",options:{inNewTab:!0}},{key:"",type:"inline",action:"support_paypal",options:{inNewTab:!0}},{key:"",type:"inline",action:"social_facebook",options:{inNewTab:!0}},{key:"",type:"inline",action:"social_twitter",options:{inNewTab:!0}},{key:"",type:"inline",action:"social_linked_in",options:{inNewTab:!0}}]))}browser.storage.onChanged.addListener((e=>{ke()})),Promise.all([ue.then(ke),n]).then(xe)})()})();