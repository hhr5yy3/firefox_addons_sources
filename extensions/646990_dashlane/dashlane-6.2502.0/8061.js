"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[8061,4910],{88134:(e,t,a)=>{a.d(t,{t:()=>C});var r=a(96832),n=a(48062),i=a(61468),d=a(8180),l=a(78346),o=a(25792),s=a(39431),c=a(92077),u=a(45272),_=a(88203),p=a(77063),E=a(55752),m=a(14900),I=a(68593);const b=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:n}=(0,_.Z)();return(0,I.BX)(i.kC,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexWrap:"nowrap",children:[a?(0,I.tZ)(m.zxk,{type:"submit",form:e,disabled:r,children:n("webapp_panel_edition_generic_save_changes")}):null,(0,I.tZ)(m.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button",children:n("webapp_panel_edition_generic_cancel_changes")})]})},h="id-add-form",f={GENERIC_ERROR:"_common_generic_error"};function C({children:e,initialValues:t,listRoute:a,reportError:m,countryToKeys:C,header:L,type:A,requiredProperty:N="idNumber"}){const{translate:y}=(0,_.Z)(),{openDialog:S,shouldShowFrozenStateDialog:D}=(0,p.Ub)(),[T,g]=r.useState(!1),[R,w]=r.useState(!1),[P,B]=r.useState(t.country),{createVaultItem:U}=(0,d.u)(o.L),{showToast:Z}=(0,i.pm)();r.useEffect((()=>{const e={[s.U.DriversLicense]:n.PageView.ItemDriverLicenceCreate,[s.U.FiscalId]:n.PageView.ItemFiscalStatementCreate,[s.U.IdCard]:n.PageView.ItemIdCardCreate,[s.U.Passport]:n.PageView.ItemPassportCreate,[s.U.SocialSecurityId]:n.PageView.ItemSocialSecurityStatementCreate};(0,u.Nc)(e[A])}),[A]),r.useEffect((()=>{D&&S()}),[D]);const v=()=>{(0,u.Nc)(n.PageView.ItemIdList),(0,c.uX)(a)},x=()=>{Z({description:y(f.GENERIC_ERROR),mood:"danger",isManualDismiss:!0})},O=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;g(t),w(a),B(r.country)}}));return(0,I.BX)(I.HY,{children:[L(P),(0,I.tZ)(E.P,{formId:h,formRef:O.current,handleSubmit:async(e,{setSubmitting:t,setFieldError:a})=>{if(!e[N])return a(N,"");try{const a=await U({vaultItemType:A,content:e});(0,l.d6)(a)?(Z({description:y(C(P).success)}),v()):(t(!1),x(),m(new Error("[ids][add] Unable to add id"),a.error?.errorMessage))}catch(e){t(!1),x(),m(e,"[ids][add] Unexpected exception while add id")}},initialValues:t,variant:"add",children:t=>e({values:t})}),(0,I.tZ)(b,{formId:h,handleCancel:()=>{v()},hasDataBeenModified:T,isSubmitting:R})]})}},14336:(e,t,a)=>{a.r(t),a.d(t,{IdCardAddPanel:()=>_});var r=a(39431),n=a(88203),i=a(39649),d=a(88134),l=a(66219),o=a(74910),s=a(62428),c=a(68593);const u=()=>({title:"webapp_id_creation_idcard_title_default",success:"webapp_id_creation_idcard_alert_add_success_default"}),_=({lee:e,listRoute:t})=>{var a;const{translate:_}=(0,n.Z)(),p={idName:"",idNumber:"",expirationDate:"",issueDate:"",country:(0,l.lt)(e.carbon.currentLocation),spaceId:null!=(a=(0,i.B)(e.globalState))?a:""};return(0,c.tZ)(d.t,{initialValues:p,listRoute:t,reportError:e.reportError,countryToKeys:u,header:()=>(0,c.tZ)(o.h,{title:_("webapp_id_creation_idcard_title_default"),type:r.U.IdCard}),type:r.U.IdCard,children:({values:e})=>(0,c.tZ)(s.P,{variant:"add",country:e.country})})}},72055:(e,t,a)=>{a.d(t,{a:()=>n});var r=a(30309);const n=new Set([r.cH.AU,r.cH.GB,r.cH.IE,r.cH.NZ])},62428:(e,t,a)=>{a.d(t,{P:()=>I});var r=a(96832),n=a(88355),i=a(88203),d=a(49023),l=a(77063),o=a(68037),s=a(72055),c=a(16792),u=a(87773),_=a(82207),p=a(68593);const E={...c.k,DETAILS_CONTENT_LABEL:"webapp_id_form_id_card_content_details_label"},m=({variant:e,handleCopy:t,country:a})=>{const{translate:c}=(0,i.Z)(),{shouldShowFrozenStateDialog:m}=(0,l.Ub)(),{values:I}=(0,n.u6)(),b=r.useRef(null);return r.useEffect("add"===e?()=>{const e=setTimeout((()=>{b.current?.focus()}),d.sc);return()=>clearTimeout(e)}:()=>{},[]),(0,p.BX)(p.HY,{children:[(0,p.BX)(o.u,{title:c(E.DETAILS_CONTENT_LABEL),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,p.tZ)(u.YI,{name:"idName",label:c(E.NAME_LABEL),placeholder:c(E.NAME_PLACEHOLDER),ref:b,disabled:!!m}),(0,p.tZ)(u.YI,{name:"idNumber",label:c(E.ID_NUMBER_LABEL),placeholder:c(E.ID_NUMBER_PLACEHOLDER),actions:"edit"===e?[(0,p.tZ)(_.m,{data:I.idNumber,onCopy:t},"copy")]:void 0,disabled:!!m}),(0,p.tZ)(u.Nn,{name:"issueDate",label:c(E.ISSUE_DATE_LABEL),disabled:!!m,calendarButtonLabel:c(E.ISSUE_DATE_PICK)}),(0,p.tZ)(u.Nn,{name:"expirationDate",label:c(s.a.has(a)?E.EXPIRATION_DATE_LABEL_UK:E.EXPIRATION_DATE_LABEL_US),calendarButtonLabel:c(s.a.has(a)?E.EXPIRATION_DATE_PICK_UK:E.EXPIRATION_DATE_PICK_US),disabled:!!m}),(0,p.tZ)(u.Dz,{name:"country",label:c(E.COUNTRY_LABEL),disabled:!!m})]}),(0,p.tZ)(u.A0,{name:"spaceId",disabled:!!m,wrapInContentCard:!0,contentCardLabel:c(E.ORGANIZATION_CONTENT_LABEL)})]})},I=r.memo(m)}}]);