"undefined"==typeof _idaptiveUniqueGlobal&&(_idaptiveUniqueGlobal={}),function(){var c=this;void 0===c.login&&(c.login={}),c.i18n.UI={get:function(e){var t=browser.i18n.getMessage(e);return t||e},getFormat:function(){var n=arguments;if(!n||n.length<2)throw"wrong arguments";return this.get(n[0]).replace(/{(\d+)}/g,function(e,t){t=parseInt(t);return isNaN(t)||void 0===n[t+1]?e:n[t+1]})}},c.landcatch.CaptureLog=function(e){c.landcatch.CaptureLogBase.call(this,e)},c.landcatch.CaptureLog.prototype={logWithLevel:c.firefox.Log.prototype.logWithLevel,generateDiagnosticData:function(e){return c.internal.generateDiagnosisData(this.logs,e)}},c.common.objectExtend(c.landcatch.CaptureLog,c.landcatch.CaptureLogBase),c.landcatch.Monitor=function(e,t){c.landcatch.MonitorBase.call(this,e,t),this.logWithLevel=c.firefox.Log.prototype.logWithLevel},c.landcatch.Monitor.prototype={captureUI:null,sendNavigateEvents:function(i){var o=this,e=this.bhTypeEnum.navigate,t=this.getDocUrl(i);t.isRoot&&c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.LandCatchEventEnum.behaviorNavigate,data:{type:e,data:{},sender:t}},function(e){if(e){var t=e.detectedApp,e=e.userSetting;if(t&&t.notifyFlag&&o.checkToShowLandCatchInline()){var n=new c.landcatch.CaptureLog(i);if(e.ignoreMultipleLCPrompts){if(o.captureUI){if(JSON.stringify(o.captureUI.detectedApp)===JSON.stringify(t))return;o.captureUI.userSetting=e,o.captureUI.detectedApp="object"==typeof t&&null!==t?t:{},o.captureUI.removeFrame()}else o.captureUI=new c.landcatch.CaptureUI(i,e,n,t);o.captureUI.init()}else new c.landcatch.CaptureUI(i,e,n,t).init()}}})},sendAppDetails:function(e){c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.LandCatchEventEnum.sendAppDetail,data:e})},sendLandCatchEvent:function(e){c.firefox.communicate2Bg.sendMessage2Bg({action:e.type,data:e})},listener:function(e,t,n){var i=this;switch(e.action){case c.communication.LandCatchEventEnum.credentialCheckingResponse:var o=e.data;if(o&&this.checkToShowLandCatchInline()){var a=new c.landcatch.CaptureLog(document);if(o.userSetting.ignoreMultipleLCPrompts){if(i.captureUI){if(JSON.stringify(i.captureUI.detectedApp)===JSON.stringify(o.detectedApp))return;i.captureUI.userSetting=o.userSetting,i.captureUI.detectedApp="object"==typeof o.detectedApp&&null!==o.detectedApp?o.detectedApp:{},i.captureUI.removeFrame()}else i.captureUI=new c.landcatch.CaptureUI(document,o.userSetting,a,o.detectedApp);i.captureUI.init()}else new c.landcatch.CaptureUI(document,o.userSetting,a,o.detectedApp).init()}break;case c.communication.LandCatchEventEnum.lcLocalConfig:a=e.data;this.isLocalEnabled=a,this.updateIsEnabled()}}},c.common.objectExtend(c.landcatch.Monitor,c.landcatch.MonitorBase),c.login.CentrifyBELogin=function(){c.login.CentrifyBELoginBase.call(this),this.logWithLevel=c.firefox.Log.prototype.logWithLevel},c.login.CentrifyBELogin.prototype=new c.login.CentrifyBELoginBase,c.login.CentrifyBELogin.prototype={setLoginData:function(e,t){this.log("setLoginData"),c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.CentrifyEventEnum.setLoginData,loginData:t})},updateLoginData:function(e,t){this.log("updateLoginData"),c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.CentrifyEventEnum.updateLoginData,loginData:t})},startRedirect:function(e,t,n){c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.CentrifyEventEnum.setLastLoginMap,appkey:n.appkey}),c.login.CentrifyBELoginBase.prototype.startRedirect.call(this,e,t,n)},end:function(e){c.login.centrifyBEShade&&c.login.centrifyBEShade.removeShade(e),c.login.CentrifyBELoginBase.prototype.end.call(this,e),c.landcatch.monitor.resume()},clearLoginData:function(e){this.log("clearLoginData"),c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.CentrifyEventEnum.removeLoginData})},checkSecurityOnAppClick:function(t,n,i){var e,o,a=this,r="https://"+t.location.host+"/uprest/bewarning";a.userSetting?"CPS"==(a.userSetting.entitlement||"APPS")?(a.log("entitlement is CPS only, skip security checking, launch app directly"),a.setLoginData(t,i),a.startRedirect(t,n,i)):(o=this.getAppKeyFromUrl(t))?c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.AppsUpdaterEventEnum.getAppByKey,appkey:o},function(e){e?(a.log("appkey: "+e.appkey+" with name "+e.displayName+", is found in app cache, will save loginData and redirect"),a.setLoginData(t,i),a.startRedirect(t,n,i)):(a.logWarn("appkey: "+o+" doesn't exist in app cache, for security reason, please make sure you are signed in as the correct user and the app shows in app cache"),e={CBEUser:a.userSetting.username,CBETenant:a.userSetting.tenantId,PortalHostname:a.portalHostname,ChildHostname:a.associatedChildPod,AppKey:o},e={WarnCode:a.warnCode.appKeyNotFound,CBEData:JSON.stringify(e)},a.gotoWarningPage(t,r,e))}):this.log("No valid appkey found in doc.URL, do nothing"):(a.logWarn("IBE userSetting is empty, user not login, or the userSetting info is not obtained yet"),e={PortalHostname:a.portalHostname,ChildHostname:a.associatedChildPod},e={WarnCode:a.warnCode.notSignedIn,CBEData:JSON.stringify(e)},a.gotoWarningPage(t,r,e))},promptWarningDiag:function(e,t){c.communication.centrifyWarnDiag.addDialog(e,t)},notInAppClickPage:function(t){var n=this;c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.CentrifyEventEnum.getLoginData},function(e){c.landcatch.monitor.pause(),n.tryLogin(t,e)||(n.debugMode&&n.logIgnore(t),c.formfill.pageChecker.checkpage(t,!0,!0),c.landcatch.monitor.resume())},function(e){n.logError(e)})},buildContextMenu:function(e){c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.AppsUpdaterEventEnum.buildContextMenu,docAppUrl:e.location?.href})},fireEnterEvents:function(e,n,t){this.log("fireEnterEvents: started");var i=this,o=t.pattern,t=e.createEvent("KeyboardEvent");t.initKeyEvent("keydown",!0,!0,null,!1,!1,!1,!1,13,13),n.dispatchEvent(t),(t=e.createEvent("KeyboardEvent")).initKeyEvent("keyup",!0,!0,null,!1,!1,!1,!1,13,13),n.dispatchEvent(t),(t=e.createEvent("KeyboardEvent")).initKeyEvent("keypress",!0,!0,null,!1,!1,!1,!1,13,13),n.dispatchEvent(t),c.login.centrifyBELogin.userSetting.isAutoSubmitAfterEnterEnabled&&setTimeout(()=>{var e=document.querySelector(o);if(e&&this.checkVisibility(e)){i.log("fireEnterEvents: field is still visible"),i.log("fireEnterEvents: Form was not submitted using enter key events, going with the finding submit button and clicking on it");var t=n.parentNode;let e=!1;for(;t;){if("FORM"===t.tagName){e=!0,i.findAndClickSubmitButton(t,n);break}t=t.parentNode}e||(i.log("fireEnterEvents: parent form was not found, so searching over the document"),i.findAndClickSubmitButton(document,n))}else i.log("fireEnterEvents: form got submitted with enter key events")},this.enterKeyTimeout)},afterFillingValue:function(e,t){"password"==e.type&&(t=t?t.pbl:null,this.insertDummyPass(e,t,"do_not_look_at_me_1"),this.insertDummyPass(e,t,"do_not_look_at_me_2"),this.log("Password Saver has been blocked"))},insertDummyPass:function(e,t,n){var i=document.createElement("input"),n=(i.setAttribute("type","password"),i.setAttribute("value",n),i.style),o=(n.setProperty("display","inline","important"),n.setProperty("padding","0px","important"),n.setProperty("width","0","important"),n.setProperty("height","0","important"),n.setProperty("border","0","important"),e.parentNode);switch(t){case c.login.PasswordBlockerPosition.none:this.log("No dummy password field is inserted");break;case c.login.PasswordBlockerPosition.justAfter:o.insertBefore(i,e.nextSibling),this.log("A dummy password field has been inserted after the field");break;default:c.login.PasswordBlockerPosition.justBefore;o.insertBefore(i,e),this.log("A dummy password field has been inserted before the field")}},tryRelaunchApplication:function(e){e.referrer&&e.URL.includes("uprest/bewarning")&&(e.referrer.includes("uprest/HandleAppClick")||e.referrer.includes("run?appkey="))&&(window.location=e.referrer)},showSpinnerForAppsUpdater:function(e){var t,n=e.querySelector("p.msgTitle"),i=e.querySelector("p.msgContent"),o=e.querySelector("img.warning-icon"),a=document.querySelector("p.msgTitle.loading-apps"),r=document.querySelector("p.msgContent.loading-apps"),c=e.querySelector("img.spinning-icon");n&&i&&o&&a&&r&&c&&(n.style.display="none",i.style.display="none",o.style.display="none",a.style.display="block",r.style.display="block",c.style.display="block",t=this,setTimeout(function(){t.tryRelaunchApplication(e)},3e4,this))},listener:function(e,t,n){switch(e.action){case c.communication.CentrifyEventEnum.appsUpdated:this.tryRelaunchApplication(document);break;case c.communication.CentrifyEventEnum.getAppsUpdaterStatus:e.data&&"requesting"==e.data.status&&document.URL.includes("uprest/bewarning")&&this.showSpinnerForAppsUpdater(document)}},initialize:function(){c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.CentrifyEventEnum.initAll},function(e){c.login.centrifyBELogin.debugMode=e.debugMode,c.login.centrifyBELogin.debugDelay=e.debugDelay,c.login.centrifyBELogin.portalHostname=e.portalHostname,c.login.centrifyBELogin.associatedChildPod=e.associatedChildPod,c.login.centrifyBELogin.userSetting=e.userSetting,c.login.centrifyBELogin.isLoggedInShellTenant=e.isLoggedInShellTenant,c.login.centrifyBELogin.loggedInShellTenantDetails=e.loggedInShellTenantDetails,c.login.centrifyBELogin.checkPage(document),c.v2.Config.init(e.userSetting),c.v2.Config.setProperty("tenantURL",e.associatedChildPod),e.debugMode&&c.v2.setBackgroundLogLevel(1),c.landcatch.monitor.initParams=e,c.landcatch.monitor.initSetting(),c.landcatch.monitor.startToMonitor(document),e.userSetting?.disableContextMenuCheckOnAllIFrames&&document.defaultView.top!==document.defaultView.self||(c.login.centrifyBELogin.buildContextMenu(document),document.addEventListener("visibilitychange",function(){document.hidden?c.login.centrifyBELogin.contextMenuTimer&&clearTimeout(c.login.centrifyBELogin.contextMenuTimer):c.login.centrifyBELogin.contextMenuTimer=setTimeout(()=>{c.login.centrifyBELogin.buildContextMenu(document)},1e3)},!1)),e.debugMode&&c.experimental.parameter.isEnable(e.addtlParams,c.experimental.parameter.KnownParameters.enableConsoleLogin)&&document.addEventListener(c.experimental.EventEnum.login,c.experimental.consoleLoginListener,!1)})}},c.common.objectExtend(c.login.CentrifyBELogin,c.login.CentrifyBELoginBase),c.login.centrifyBELogin=new c.login.CentrifyBELogin,c.landcatch.monitor=new c.landcatch.Monitor(null),c.communication.CentrifyWarnDiag=function(){c.communication.CentrifyWarnDiagBase.call(this),this.logWithLevel=c.firefox.Log.prototype.logWithLevel},c.common.objectExtend(c.communication.CentrifyWarnDiag,c.communication.CentrifyWarnDiagBase),c.communication.centrifyWarnDiag=new c.communication.CentrifyWarnDiag,c.landcatch.CaptureUI=function(e,t,n,i){c.landcatch.CaptureUIBase.call(this,e,t,n,i),this.logWithLevel=c.landcatch.CaptureLog.prototype.logWithLevel},c.landcatch.CaptureUI.prototype={ignoreDetectedApp:function(e,t){c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.LandCatchEventEnum.ignoreApp,data:{appData:e,isNever:t}})},centrifyServiceRequest:function(e,t,n,i,o){var a=Math.random();browser.runtime.onMessage.addListener(function e(t){if(t.action==c.communication.CentrifyEventEnum.centrifyServiceResponse){if(t.data.messageId!==a)return;t.data.success?i(t.data.success):o(t.data.error)}browser.runtime.onMessage.hasListener(e)&&browser.runtime.onMessage.removeListener(e)}),c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.CentrifyEventEnum.centrifyServiceRequest,data:{messageId:a,input:t,path:e,method:n}})},loadIframe:function(e){var t=this;e.onload=function(e){e=e.target.contentDocument||e.target.contentWindow.document;t.setStyle(e.body,{margin:"0px",padding:"0px"}),t.initFrame(e)}},addToAppCache:function(e,t){e&&e.appkey&&(e=this.convertCapturedAppToFFRaw(e,t),c.firefox.communicate2Bg.sendMessage2Bg({action:c.communication.AppsUpdaterEventEnum.addAppNode,appData:e}))}},c.common.objectExtend(c.landcatch.CaptureUI,c.landcatch.CaptureUIBase),c.common.toast=new c.common.Toast,browser.runtime.onMessage.addListener(function(e,t,n){c.landcatch.monitor.listener(e,t,n),c.login.centrifyBELogin.listener(e,t,n),c.common.toast.listener(e,t,n)}),c.common.messageBox=new c.common.MessageBox,document.URL.includes("uprest/bewarning")&&browser.runtime.sendMessage({action:c.communication.CentrifyEventEnum.getAppsUpdaterStatus}).then(function(e){c.login.centrifyBELogin.listener({action:c.communication.CentrifyEventEnum.getAppsUpdaterStatus,data:e})}),c.login.centrifyBELogin.initialize()}.call(_idaptiveUniqueGlobal);