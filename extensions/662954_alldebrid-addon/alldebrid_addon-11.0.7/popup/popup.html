<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="normalize.css">
		<link rel="stylesheet" href="fa.css">
		<link rel="stylesheet" href="simplebar.css">
		<link rel="stylesheet" href="popup.css">
	</head>
	<body>
		<div class='guest'>
			<span data-lang='guest_please_login'>Please log in to use the extension</span><br /><br />
			<a href='https://alldebrid.com/register/' target='_blank' class='greenBtn' data-lang='guest_login'>Log in on Alldebrid</a>
		</div>
		<div class="privacy" data-simplebar>
			<div class="exitPolicy"><i class="far fa-arrow-alt-left"></i></div>
			<div class="privacyTitle" data-lang="privacy_title">Privacy policy</div>
			<div class="privacyDesc" data-lang="privacy_main_desc_1">This extension have some features that process your data automatically and may send some of them to the Alldebrid service or to a local app. You have to enable (opt-in) the use of those data to enable the related features.</div>
			<div class="privacyDesc" data-lang="privacy_main_desc_2">The main data this extension may send to the Alldebrid service are urls (links) that are supported by the Alldebrid service and not explicitly blacklisted by the user in the settings. Magnet url/file are also forwarded on your demand when you use magnet-related features.</div>
			<div class="privacyDescLast" data-lang="privacy_main_desc_3">Other features may send supported url to the Alldebrid service, but that will always be when you manually use a feature and you will be redirected to the Alldebrid website.</div>

			<div class="privacyCat privacyRemote">
				<div class="privacyCatTitle" data-lang="privacy_remote_title">Remote data use</div>
				<div class="privacyCatDesc" data-lang="privacy_remote_desc_1">Only links from hosts supported by the Alldebrid links are sent, and only if the host has not been blacklisted and the automatic link scan is enabled.</div>
				<div class="privacyCatDesc"><span data-lang="privacy_remote_desc_2">The following features automatically send supported links to the Alldebrid service : </span> <b data-lang="privacy_remote_desc_feat">Display quick action icons, Scan for files</b></div>
				<div data-lang="privacy_remote_desc_3">You have to enable this to use those features.</div>
				
				<div class="privacyCatStatus" style="min-height: 30px;display: flex;justify-content: center;align-items: center;"><span data-lang="privacy_status">Status : </span>
					<div style="min-width: 150px;text-align: left;margin-left: 10px; user-select: none; cursor: pointer;"><span class="tristate tristate-switcher">
						<input style="pointer-events: none;" type="radio" id="remoteUse-state-off" name="remoteUse" value="-1">
						<input style="pointer-events: none;" type="radio" id="remoteUse-state-null" name="remoteUse" value="0">
						<input style="pointer-events: none;" type="radio" id="remoteUse-state-on" name="remoteUse" value="1">
						<i></i>
						<label data-lang="privacy_status_disabled" style="cursor: pointer; font-weight: bold; color: #b11e13" for="remoteUse-state-null">Disabled</label>
						<label data-lang="privacy_must_choose" style="cursor: pointer; font-weight: bold; " for="remoteUse-state-on">Must choose</label>
						<label data-lang="privacy_status_enabled" style="cursor: pointer; font-weight: bold;  color: #218624" for="remoteUse-state-off">Enabled</label>
					</span></div>
				</div>
			</div>
			<div class="privacySubTitleRemote" data-lang="privacy_subtitle_remote">You must enable remote data policy to use this feature.</div>
			

			<div class="privacyCat privacyLocal">
				<div class="privacyCatTitle" data-lang="privacy_local_title">Local data use</div>
				<div class="privacyCatDesc" data-lang="privacy_local_desc_1">This extension have a feature to open a video link to a local video player once you have installed the required app and enable the local streaming by choosing a player.</div>
				<div class="privacyCatDesc" data-lang="privacy_local_desc_2">Only video links that you have manually clicked on (via the local streaming icon) will be sent to this local app, to be opened in your video player.</div>
				<div><span data-lang="privacy_local_desc_3">You have to enable this to use the </span> <b data-lang="privacy_local_desc_feat">Local Streaming feature</b>.</div>
				
				<div class="privacyCatStatus" style="min-height: 30px;display: flex;justify-content: center;align-items: center;"><span data-lang="privacy_status">Status : </span>
					<div style="min-width: 150px;text-align: left;margin-left: 10px; user-select: none; cursor: pointer;"><span class="tristate tristate-switcher">
						<input style="pointer-events: none;" type="radio" id="localUse-state-off" name="localUse" value="-1">
						<input style="pointer-events: none;" type="radio" id="localUse-state-null" name="localUse" value="0">
						<input style="pointer-events: none;" type="radio" id="localUse-state-on" name="localUse" value="1">
						<i></i>
						<label data-lang="privacy_status_disabled" style="cursor: pointer; font-weight: bold; color: #b11e13" for="localUse-state-null">Disabled</label>
						<label data-lang="privacy_must_choose" style="cursor: pointer; font-weight: bold; " for="localUse-state-on">Must choose</label>
						<label data-lang="privacy_status_enabled" style="cursor: pointer; font-weight: bold;  color: #218624" for="localUse-state-off">Enabled</label>
					</span></div>
				</div>
			</div>
			<div class="privacySubTitleLocal" data-lang="privacy_subtitle_local">You must enable local data policy to use Local Streaming.</div>
			
			<div style="text-align: center;">
				<br />
				<span class="grayBtn privacySubmit" disabled data-lang="privacy_submit">Submit</span> 
			</div>
			<br />
			<br />
			<br />
			<div class="privacyDescLast"><span data-lang="privacy_external_privacy">You will find the Alldebrid service privacy policy</span> <a target="_blank" href="https://alldebrid.com/privacy/" data-lang="privacy_external_privacy_page">on this page</a>.</div>
			<hr>
			<div style="margin: 10px 0px; text-align: center;">
				<div>
					<span>Automated requests to the Alldebrid service are loggued here.</span><br />
					<span>API informations about requests can be found <a href="https://docs.alldebrid.com/v4/#general-informations" target="_blank" >in the Docs</a>.</span><br />
					<br />
				</div>
				<div style="width: auto; margin: 0 auto; text-align: left; display: inline-block;">
					<span>In the 2 minutes, there were</span> <span class="logsCount">0</span> <span>background requests</span> :
					<ul>
						<li><span class="linksLogs">0</span> <span>links information requests</span></li>
						<li><span class="magnetsLogs">0</span> magnets status requests</li>
						<li><span class="systemLogs">0</span> <span>system requests</span></li>
					</ul>
				</div>
				<div>
					<span class="privacySeeData"><span>See all data sent</span> <i class="fas fa-chevron-down"></i></span>
					<span class="privacyHideData"><span>Hide data</span> <i class="fas fa-chevron-up"></i></span>
				</div>
				<textarea class="privacyRawData"></textarea>
			</div>
		</div>
		<header>
			<a id="logoLink" href="https://alldebrid.com" target="_blank">
				<img src="../img/logo.png" />
			</a>
			<button data-lang='logo_send'  id="logoSendToAlld" style="margin: 22px auto 0 auto;" class='greenBtn'>Send current url to Alldebrid</button>
		</header>

		<div class="tab-wrap">
			<input type="radio" id="tab0" name="tabGroup1" class="tab" >
			<label class="tabHead" data-id="tab0" for="tab0"><i class="far fa-link"></i> <span data-lang='tab_links'>Files</span></label>

			<input type="radio" id="tab1" name="tabGroup1" class="tab" >
			<label class="tabHead" data-id="tab1" for="tab1"><i class="far fa-sliders-h"></i> <span data-lang='tab_general'>General</span></label>

			<input type="radio" id="tab2" name="tabGroup1" class="tab" >
			<label class="tabHead" data-id="tab2" for="tab2"><i class="fas fa-cloud-download"></i> <span data-lang='tab_rivers'></span></label>

			<input type="radio" id="tab3" name="tabGroup1" class="tab">
			<label class="tabHead" data-id="tab3" for="tab3"><i class="fas fa-play-circle"></i> <span data-lang='tab_stream'>Streaming</span></label>

			<div class="tab__content" data-simplebar>
				<div id="pageLinksWhitelist">
					<div id="pageLinksWhitelistTitle" data-lang='find_links_whitelist_active'>Website whitelist for files scanning is active</div>
					<div id="pageLinksSiteNotWhitelisted">
						<i class="fas fa-times-circle"></i> <span class="pageLinksSiteName"></span> <span data-lang='find_links_is_not_whitelisted'>is not whitelisted</span> <button data-lang='find_links_whitelist_add' style="padding: 3px 10px;" class="greenBtn" id="pageLinksSiteAdd">Add</button>
					</div>
					<div id="pageLinksSiteWhitelisted">
						<i class="fas fa-check-circle"></i> <span class="pageLinksSiteName"></span> <span data-lang='find_links_is_whitelisted'>is whitelisted</span> <button data-lang='find_links_whitelist_remove' style="padding: 3px 10px;" class="greenBtn" id="pageLinksSiteRemove">Remove</button>
					</div>
				</div>
				<div id="pageLinksNotFound">
					<span data-lang='find_links_no_files_found'>No files found on this page</span><br />
					<!-- data-lang='local_stream_scan' -->
				</div>
				<div id="pageLinksList">
					<div id="fileListLoading" data-lang='find_links_page_analyzing'>Page is being scanned, please wait...</div>
					<div id="fileListTitle"><span id="fileListNbFiles"></span> <span data-lang='find_links_files_found'>available files found on this page</span></div>
					<div id="fileList">
					</div>
				</div>
				<div id="pageLinksScan">
					<span id="pageLinksScanBtn" class='greenBtn' data-lang='find_links_analyze_again'>Re-scan page</span>
					<span id="pageLinksOpenBtn" class='greenBtn' data-lang='find_links_open_all'>Open all files</span>
					<span id="pageLinksScanReload" data-lang='find_links_need_reload'>Please reload the page to scan it</span>
				</div>
			</div>
			<div class="tab__content" data-simplebar>
				<div class="radioWrapper">
				 	<input type="checkbox" name="displayIcons" id="displayIcons">
				 	<label for="displayIcons"></label>
				 	<label data-lang="general_display_icons" for="displayIcons">Display quick action icons</label>
				 	<div span data-lang="general_display_icons_desc" class="">Display quick download, stream and send to Alldebrid icon next to supported links.</div>
				</div>
				<div class="radioWrapper">
					<input type="checkbox" name="findPageLinks" id="findPageLinks">
				 	<label for="findPageLinks"></label>
				 	<label data-lang="general_find_links" for="findPageLinks">Find links in pages</label>
				 	<div span data-lang="general_find_links_desc" class="">Automatically find available files in the page.</div>
				</div>
				<div class="radioWrapper">
					<input type="checkbox" name="findPageWhitelisted" id="findPageWhitelisted">
				 	<label for="findPageWhitelisted"></label>
				 	<label data-lang="general_find_links_whitelist" for="findPageWhitelisted">Only scan links on some websites</label>
				 	<div span data-lang="general_find_links_whitelist_desc" class="">Only display quick action icons and check links on whitelisted websites.</div>
				</div>
				<div class="line"></div>
				<div class="radioWrapper">
				 	<input type="checkbox" name="changeLink" id="changeLink">
				 	<label for="changeLink"></label>
				 	<label data-lang="general_forward" for="changeLink">Forward links</label>
				 	<div span data-lang="general_forward_desc" class="">Forward supported link to Alldebrid automatically when clicked or opened in a tab.</div>
				</div>
				<div class="radioWrapper">
				 	<input type="checkbox" name="blackBar" id="blackBar">
				 	<label for="blackBar"></label>
				 	<label data-lang="general_blackbar" for="blackBar">Top black bar</label>
				 	<div span data-lang="general_blackbar_desc" class="">Display a black bar on at the top of supported website pages to send the link to Alldebrid in one click.</div>
				</div>
				<div class="radioWrapper">
				 	<input type="checkbox" name="blackBarStream" id="blackBarStream">
				 	<label for="blackBarStream"></label>
				 	<label data-lang="general_blackbar_stream" for="blackBarStream">Download button above videos</label>
				 	<div span data-lang="general_blackbar_stream_desc" class="">Display a download button to quickly send a video to Alldebrid for download.</div>
				</div>
				<div class="radioWrapper">
				 	<input type="checkbox" name="autoPopup" id="autoPopup">
				 	<label for="autoPopup"></label>
				 	<label data-lang="general_popup" for="autoPopup">Popup on links selection</label>
				 	<div span data-lang="general_popup_desc" class="">Display an image popup when supported links are selected to quickly send to Alldebrid.</div>
				</div>
				<div class="line"></div>
				<div class="radioWrapper">
				 	<input type="checkbox" name="disabledHosts" id="disabledHosts">
				 	<label for="disabledHosts"></label>
				 	<label data-lang="general_host_disable" for="disabledHosts">Disable extension for some websites</label>
				 	<div span data-lang="general_host_disable_desc" class="">Disable extension functionalities for some websites.</div>
				</div>
				<div id="disabledHostersBox">
					<span data-lang="general_host_disable_add">Add a website</span> : <select id="hosts"></select> <span class="add"><i class="fas fa-plus" style="margin-right: 4px; color: rgb(144, 199, 111);"></i></span>
				</div>
				<div id="disabledHostList"></div>
				<div class="line"></div>
				<div class="radioWrapper">
				 	<input type="checkbox" name="enabledStream" id="enabledStream">
				 	<label for="enabledStream"></label>
				 	<label data-lang="general_stream_enable" for="enabledStream">Enable extension for some stream websites</label>
				 	<div span data-lang="general_stream_enable_desc" class="">Enable extension functionalities for some streaming websites</div>
				</div>
				<div id="enabledStreamBox">
					<span data-lang="general_host_disable_add">Add a website</span> : <select id="streams"></select> <span class="add"><i class="fas fa-plus" style="margin-right: 4px; color: rgb(144, 199, 111);"></i></span>
				</div>
				<div id="enabledStreamList">
				</div>
				<div class="line"></div>
				<div style="padding-left: 35px;" id="langForceBox">
					  <span data-lang="privacy_force_lang" style="font-size: 14px;">Language</span> <select style="margin-left: 10px;" id="forcedLang">
						<option id="userDefaultLang" value="default" selected></option>
						<option value="fr">🇫🇷 Français</option>
						<option value="en">🇺🇸 English</option>
						<option value="de">🇩🇪 Deutsche</option>
						<!-- <option value="es">Español</option> -->
						<option value="it">🇮🇹 Italiano</option>
						<option value="tr">🇹🇷 Türkçe</option>
					</select></span>
				</div>
			</div>
			<div class="tab__content" data-simplebar>
				<div data-lang="need_subscription" class='disabledFeatures'>Need premium subscription to work</div>
				<div class="radioWrapper">
				 	<input type="checkbox" name="riverCompletionNotif" id="riverCompletionNotif">
				 	<label for="riverCompletionNotif"></label>
				 	<label data-lang="rivers_notif_completed" for="riverCompletionNotif"></label>
				 	<div span data-lang="rivers_notif_completed_desc" class=""></div>
				</div>
				<div class="radioWrapper liveNotifEnabled">
				 	<input type="checkbox" name="riverLiveNotif" id="riverLiveNotif">
				 	<label for="riverLiveNotif"></label>
				 	<label data-lang="rivers_notif_live" for="riverLiveNotif">Live persistent notifications</label>
				 	<div span data-lang="rivers_notif_live_desc" class=""></div>
				</div>
				<div class="line"></div>
				<div class="radioWrapper">
				 	<input type="checkbox" name="riverCustomSource" id="riverCustomSource">
				 	<label for="riverCustomSource"></label>
				 	<label data-lang="rivers_custom_sources" for="riverCustomSource"></label>
				 	<div span data-lang="rivers_custom_sources_desc" class=""></div>
				</div>
				<div id="currentCustomPatterns">
					<span data-lang="rivers_custom_sources_current">Current custom sources</span> : 
					<ul></ul>
				</div>
				<div id="addCustomSource">
					<div id="customSourceNotLearning" class='center' style="margin-left: -30px;">
						<button data-lang='rivers_custom_sources_add' class='greenBtn'>Learn a new source</button><br />
						<span data-lang='rivers_custom_sources_added' id="newCustomSource">New pattern added</span>
					</div>
					<div id="customSourceLearning">
						<div class='center' style="margin-left: -30px; margin-bottom: 15px;"><button data-lang='rivers_custom_sources_disable' class='greenBtn'>Disable learning</button></div>
						<div data-lang='rivers_custom_sources_add_desc' style="margin-bottom: 15px; font-size: 13px; "></div>
						<div id="needMoreSources">
							<span style="font-size: 13px;"><span data-lang='rivers_custom_sources_add_you_saved'>You saved</span> <span id="nbCustomSources">0</span> <span data-lang='rivers_custom_sources_add_still_need'>links, need at least 3.</span> <span data-lang='rivers_custom_sources_selected'>Selected links</span> : </span>
							<ul></ul>
						</div>
						<div id="resultsFromLearning">
							<span data-lang='rivers_custom_sources_selected'>Selected links</span> : <span data-lang='rivers_custom_sources_no_common' id="notCommonFound">No common URL detected, retry.</span>
							<ul></ul>
							<span id="resultsFromLearningAdd"><input type="text" size="45" value="" /> <span class="add">➕</span></span>
							<div data-lang='rivers_custom_sources_invalid_pattern' style="color: #d44545; margin-top: 12px;" id="patternNotValid" >This pattern is not valid.</div>
						</div>
					</div>
					
				</div>
			</div>
			<div class="tab__content" data-simplebar>
				<div id="localStreamPrivacy" style="text-align: center; display: none;">
					<br />
					<div data-lang='privacy_subtitle_local'  style="color: #c71e1e;">You must enable local data policy to use Local Streaming.</div>
					<br />
					<span id="openPrivacyLocal" class='greenBtn' data-lang='privacy_title'>Privacy policy</span>
				</div>
				<div id="localStreamContent">
					<div id="localStreamDesc" data-lang='local_stream_desc'>
						This extension can stream links generated on Alldebrid directly to your favourite local video or music player. It require to install a small programm to forward the stream request from the extension to your native player.
					</div>
					<div class="localStreamStatus" id="localStreamDown">
						<div data-lang='local_stream_status'  style="color: red;">Status</div>
						<span data-lang='local_stream_script_version'>Script version</span> : <span data-lang='local_stream_not_detected'>Not installed or detected</span><br />
						<span data-lang='local_stream_default_player'>Default player</span> : <span>/</span><br /><br />
						<span data-lang='local_stream_need_install'>Please install the script by</span> <a href='https://help.alldebrid.com/en/Alldebrid%20tools/streaming' target="_blank" data-lang='local_stream_following_guide' id="streamHelpLink">following this guide</a>.
					</div>
					<div style="text-align:left;" class="localStreamStatus" id="localStreamUp">
						<div data-lang='local_stream_status' style="color: green; font-size: 14px; text-align:center;">Status</div>
						<span data-lang='local_stream_script_version'>Script version</span> : <span id="localScriptVersion"></span> / <span id="nodeVersion"></span><br />
						<span id="localPlayerSet"><span data-lang='local_stream_default_player'>Default player</span> : <span id="customPlayerName"></span> <br /><span data-lang='local_stream_default_path'>Path</span> : <span id="customPlayerPath" style='font-family: monospace;     word-break: break-all;'></span></span><span data-lang='local_stream_no_player' id="localPlayerNotSet">No player chosen yet, please scan or specify custom player.
					</div>
					<div class="line"></div>
					<div id="localPLayerSelection">
						<div style="text-align: center">
							<span class='greenBtn' id="localPlayersScan"><span data-lang='local_stream_scan'>Detect local players</span> <i class="fas fa-spinner fa-spin loading" style="opacity: 0;"></i></span>
							<div data-lang='local_stream_scan_no_player' style="color: #d44545; margin-top: 12px;" id="localPlayersNotFound" >Could not find any player, please manually specify your player path.</div>
							<div data-lang='local_stream_scan_one_player' style="margin-top: 12px;" id="localPlayersFoundOne" ><span>Detected one player, setting it by default.</span>(<span id="localPlayersFoundOneName"></span>)</div>
							<div style="margin-top: 12px;" id="localPlayersFound" ><span data-lang='local_stream_scan_multiple_players'>We detected the following players, please choose one</span> : 
								<ul style="text-align: left; list-style: none;"></ul>
							</div>
						</div>
	
						<br /><br />
						<span data-lang='local_stream_manual'>Or specify yourself the player path</span> : <br/>
						<input id="customPlayerInput" type="text" size="42" value="" style="max-width: 330px;" /> <span id="customPlayerAdd" class="add"><i class="fas fa-plus" style="margin-right: 4px; color: rgb(144, 199, 111);"></i></span>
						<div data-lang='local_stream_manual_invalid_path' style="color: #d44545; margin-top: 12px; text-align: center;" id="localPlayersInvalidPath" >This path is not valid.</div>
					</div>
				</div>
			</div>
		</div>

		<footer>
			<div class='loggued'>
				<span data-lang="hello">Hello</span> <a target="_blank" id="accountLink" href='http://alldebrid.com/account/'><span id="username"></span></a>, <span id="premiumUntil"></span>
			</div>
			<div id="notPremium"></div>
			<div id="openPrivacy" style="position: absolute;top: 0px;right: 5px; font-size: 11px;cursor: pointer;" data-lang="privacy"></div>
		</footer>

		<script src="simplebar.js"></script>
		<script src="../libs/browser-polyfill.min.js"></script>
		<script src="../libs/loglevel.js"></script>
		<script src="../libs/xregexp.js"></script>
		<script src="../utils.js"></script>
		<script src="../helpers.js"></script>
		<script src="popup.js"></script>
	</body>
</html>
