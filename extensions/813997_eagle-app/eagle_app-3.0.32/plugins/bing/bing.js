class BingPlugin extends SitePlugin{inject(){let e=null,i=0;function l(){$(".imgpt a.iusc, #vs_images a.richImgLnk").each(function(t,e){var i,l=$(this).attr("m")||$(this).attr("data-m");l&&(l=JSON.parse(l),i=$(this).find("img"),l.murl&&i.attr("eagle-src",l.murl),l.t)&&i.attr("eagle-title",l.t)})}{let t=!1;setInterval(()=>{location.href==e&&t||(e=location.href,function(){var t=document.querySelector('div[role="main"]');if(null!=t){let e=new MutationObserver(function(t){l(),e.disconnect()});return e.observe(t,{childList:!0,subtree:!0,attributes:!0}),1}}()&&(t=!0))},1e3)}{let t=null;window.addEventListener("scroll",()=>{clearTimeout(t),t=setTimeout(()=>{window.document.body.scrollHeight!=i&&(i=window.document.body.scrollHeight,l())},500)})}l()}getMeta(t){var e,i={};if(t.closest("a[data-m]")&&((e=JSON.parse(t.closest("a[data-m]").dataset.m)).t&&(i.title=e.t),e.murl)&&(i.src=e.murl),t.closest("a[m]")){const e=JSON.parse(t.closest("a[m]").getAttribute("m"));e.t&&(i.title=e.t),e.murl&&(i.src=e.murl)}return i}}(()=>{var t=new BingPlugin;eagle.plugin.register("https://(cn|www).bing.com/images/(.*)",t)})();