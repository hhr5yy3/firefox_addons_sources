import{a as M}from"./cplx-Bzmv935M.js";import{$ as p}from"./cplx-BbAh7E-i.js";import{o as u}from"./cplx-DNOGgzzX.js";import{i as g,F as h}from"./cplx-SsoyhRxE.js";import{m as d,U as A,b as s}from"./cplx-Cdcyb6EG.js";import{e as c}from"./cplx-2ekRUlSR.js";import"./cplx-wwbq-DDb.js";import"./cplx-B814hFp-.js";import"./cplx-CejnDNPm.js";import"./cplx-M4JPizzD.js";import"./cplx-DewpVJ-0.js";function C(){u("reactVdom:isMessageBlockInFlight",({data:{index:t}})=>{const l=`[data-cplx-component="${s.THREAD.MESSAGE.BLOCK}"][data-index="${t}"] [data-cplx-component="${s.THREAD.MESSAGE.TEXT_COL}"]`,e=p(l);if(!e.length)return null;const[n,r]=c(()=>a({fiberNode:e[0][d(e[0])],condition:o=>o.memoizedProps.children[2].props.result.status!=null,select:o=>o.memoizedProps.children[2].props.result.status}))();return r&&console.warn("[VDOM Plugin] isMessageBlockInFlight",r),r||n==null?null:n.toLowerCase()!=="completed"}),u("reactVdom:getMessageDisplayModelCode",({data:{index:t}})=>{const l=`[data-cplx-component="${s.THREAD.MESSAGE.BLOCK}"][data-index="${t}"]`,e=p(l).prev();if(!e.length)return null;const[n,r]=c(()=>a({fiberNode:e[0][d(e[0])],condition:o=>o.return.memoizedProps.result.display_model!=null,select:o=>o.return.memoizedProps.result.display_model}))();return r&&console.warn("[VDOM Plugin] getMessageDisplayModelCode",r),r||n==null?null:n}),u("reactVdom:getMessageContent",({data:{index:t}})=>{const l=`[data-cplx-component="${s.THREAD.MESSAGE.BLOCK}"][data-index="${t}"] [data-cplx-component="${s.THREAD.MESSAGE.TEXT_COL_CHILD.ANSWER}"] div[dir="auto"]`,e=p(l);if(!e.length)return null;const[n,r]=c(()=>a({fiberNode:e[0][d(e[0])],condition:o=>o.memoizedProps.children[2].props.response.answer!=null,select:o=>o.memoizedProps.children[2].props.response.answer}))();return r&&console.warn("[VDOM Plugin] getMessageContent",r),r||n==null?null:n}),u("reactVdom:getCodeFromCodeBlock",({data:{messageBlockIndex:t,codeBlockIndex:l}})=>{const e=`[data-cplx-component="${s.THREAD.MESSAGE.BLOCK}"][data-index="${t}"] [data-cplx-component="${s.THREAD.MESSAGE.TEXT_COL_CHILD.CODE_BLOCK}"][data-index="${l}"] pre`,n=p(e);if(!n.length)return null;const r=n[0][d(n[0])],[o,f]=c(()=>a({fiberNode:r,condition:i=>i.memoizedProps.children[0].props.children[0]!=null,select:i=>i.memoizedProps.children[0].props.children[0]}))(),[m,E]=c(()=>a({fiberNode:r,condition:i=>i.memoizedProps.children[0].props.className!=null,select:i=>i.memoizedProps.children[0].props.className.replace(/^language-/,"")}))();return f||o==null?null:{code:o,language:E||m==null?"text":m}}),u("reactVdom:getMessageFocusMode",({data:{index:t}})=>{const l=`[data-cplx-component="${s.THREAD.MESSAGE.BLOCK}"][data-index="${t}"]`,e=p(l).prev();if(!e.length)return null;const[n,r]=c(()=>a({fiberNode:e[0][d(e[0])],condition:o=>o.return.memoizedProps.result.search_focus!=null,select:o=>o.return.memoizedProps.result.search_focus}))();return r&&console.warn("[VDOM Plugin] getMessageFocusMode",r),r||n==null||!g(n)?null:n}),u("reactVdom:setFocusMode",({data:{focusMode:t}})=>{if(!g(t))return;const l=A.getActiveQueryBox();if(!l.length)return;const e=l.find('button:has(svg[data-icon="bars-filter"]), button:has(svg[data-icon="chevron-down"])');if(!e.length)return;const n=e.parent();if(!n.length)return;const r=n[0][d(n[0])];r!=null&&c(()=>{const o=h.indexOf(t);o!==-1&&r.return.return.memoizedProps.items[o].onClick()})()})}function a({fiberNode:t,condition:l,select:e}){return t==null?null:l!=null&&l(t)?e==null?void 0:e(t):a({fiberNode:t.child,condition:l,select:e})||a({fiberNode:t.sibling,condition:l,select:e})}M();C();
