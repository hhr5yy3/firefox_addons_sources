!function(window){"use strict";function _pause(player){if(player.pause)return player.pause();player.pauseVideo()}function stopAutoplay(player){return seeked?(seeked=!1,!1):!((player.loop||-1!==document.location.search.indexOf("list=")||document.hasFocus())&&!focusStop)&&(focusStop=!extended,_pause(player),!0)}function _play(player){if(player.play)return player.play();player.playVideo()}function handleVisibilityChange(e){window.setTimeout(()=>{document.hidden||_play(this)},60)}function bindPlayer(player){player.readyState>1&&stopAutoplay(player),player.addEventListener("canplaythrough",stopAutoplay.bind(null,player));let i=0;player.addEventListener("playing",function playing(){stopAutoplay(player),2==++i&&player.removeEventListener("playing",playing)}),player.addEventListener("loadeddata",function(){i=0}),extended?window.addEventListener("focus",handleVisibilityChange.bind(player)):(player.addEventListener("seeked",function(){seeked=!0}),player.addEventListener("play",function(){player.readyState>1&&(seeked=!0)}))}const document=window.document,extended=!1;let focusStop=!extended,seeked=!1;!function(){const observer=new MutationObserver(function(mutations){for(let i=0;i<mutations.length;++i)for(var mutation=mutations[i].addedNodes,x=0;x<mutation.length;++x)if("VIDEO"===mutation[x].nodeName||"OBJECT"===mutation[x].nodeName)return observer.disconnect(),void bindPlayer(mutation[x])});observer.observe(document,{childList:!0,subtree:!0})}(),function(){const original=window.onYouTubePlayerReady;window.onYouTubePlayerReady=function(player){3!==player.getPlayerState()&&stopAutoplay(player),original&&original()}}()}(window);
