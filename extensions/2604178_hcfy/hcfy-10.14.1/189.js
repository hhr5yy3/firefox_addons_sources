"use strict";(self.webpackChunkbrowser_extension=self.webpackChunkbrowser_extension||[]).push([[189],{16224:(t,e,i)=>{i.d(e,{Ne:()=>y,g2:()=>g,o0:()=>m});i(93510);var n=i(94903),o=i(18785),a=i(54712),s=i(6847),r=i(15999),l=i(2599),d=i(41727),u=i(50657),p=i(30757),h=i(83680),c=i(17299);let m=function(t){return t.ctrlEnter="ctrl-enter",t.enter="enter",t}({});const g={button:!0,buttonAutoClose:!0,buttonOffsetTop:0,buttonOffsetLeft:0,closeAfterMove:!1,charsLimit:0,disableInTextarea:!1,domainBlackList:[],domainWhiteList:[],textList:[{name:"忽略中文",readonly:!0,enabled:!1,value:"[\\u4e00-\\u9fa5]",description:"如果划选的文本当中包含中文，则不显示翻译按钮或翻译结果。"},{name:"忽略字符",readonly:!0,enabled:!0,value:"^[\\s.\\-0-9()•+]+$",description:"如果划选的文本全部都是由数字、点、括号、空格、横线、加号和圆点（即 •，多用于密码框）组成的，则不显示翻译按钮或翻译结果。"}],placement:"bottom",pin:!1,pinAfterDrag:!1,pinPos:null,pinEnhance:!0,pinIgnoreDomainList:!0,darkMode:"system",pdfAuto:!1,pdfSnifferEnable:!0,pdfStandalone:!1,width:290,source:"",destination:"中文(简体)",secondDestination:"英语",secondDestinationLatestSource:!1,showTextArea:!1,textAreaAuto:!1,textAreaShortKey:m.enter,selectedAPIs:["GoogleWeb","DeepLWeb","Yandex","BingDictWeb"],collapsedAPIs:[],selectedExternalLinks:[],autoClipboard:null,autoClipboardImage:null,autoPlay:!1,autoCopy:!1,autoPaste:!0,recentUseLangFrom:[""],recentUseLangTo:["中文(简体)"],tipPanelSettingsClosed:!1,tipBlockedPDFClosed:!1,tipIncognitoPDFClosed:!1,tipOcrChangeClosed:!0,tipForeverVIPClosed:!0,tipQuickLinksClosed:!1,tipNewProfessionalClosed:!1,tipTextareaBtnClosed:!0,tipForSTTClosed:!1,tipForPinAfterDragClosed:!0,tipForPageTrsNoLoadingClosed:!0,tipForSlowDeepLPageTrsClosed:!1,tipForPageTrsClosed:!1,panelPos:{width:270,height:500,left:100,top:100},panelFocus:!0,panelSize:"small",panelButtons:["media","microphone"],panelCustomStyle:"",notifySyncOptions:!0,sourceTransformNoBr:!1,sourceTransformNCaml:!1,sourceTransformNoComment:!1,sourceLower:!1,sourceTransformRegExps:[],historyEnabled:!1,favoritesEnabled:!0,modifierKeys:[],modifierKeyPressedAction:"",modifierKeyTranslate:!1,modifierKeyLink:!1,audioVolume:100,audioRate:1,systemTTS:"aid",systemTTSAccent:{},systemTTSVoice:{},localOCR:{lang:"eng"},pageTrsApi:"GoogleWeb",pageTrsHighlight:!0,pageTrsResultStyleId:"STYLE_LINE",pageTrsResultStyleMainColor:null,pageTrsResultStyleTextColor:null,pageTrsResultStyleTextSize:null,pageTrsResultStyleTextWeight:null,pageTrsResultStyleCustom:"",pageTrsApiOptions:o.B.map((t=>t.id)),pageTrsJumpTwo:!1,pageTrsEditable:!0,googleRegion:"com",googleType:"fast",googleMirror:"",googleHidePhonetic:!1,quickLinks:[{name:"谷歌搜索",link:"https://www.google.com/search?q=%s",menu:!0,panel:!0},{name:"维基百科",link:"https://zh.wikipedia.org/w/index.php?search=%s",menu:!0,panel:!0},{name:"剑桥词典",link:"https://dictionary.cambridge.org/dictionary/english-chinese-simplified/%s",menu:!0,panel:!0}],noticesRead:[],customAPI:"",customAPINames:[],pointsEnabled:[],baiduDomain:null,aliDomain:null,ocrService:"tesseractocr",contextMenus:a.$,popupAction:"show-popup",pageTrsSource:"",pageTrsDest:["中文(简体)"],pageTrsPanelPos:"bottom-right",chatGPTPrompt:"",chatGPTEndpoint:"",chatGPTModel:"gpt-3.5-turbo",claudePrompt:"",claudeEndpoint:"",claudeModel:"claude-3-haiku-20240307",tongYiPrompt:"",tongYiEndpoint:"",tongYiModel:"qwen-turbo",lingYiPrompt:"",lingYiEndpoint:"",lingYiModel:"yi-medium",moonshotPrompt:"",moonshotEndpoint:"",moonshotModel:"moonshot-v1-8k",deepSeekPrompt:"",deepSeekEndpoint:"",deepSeekModel:"deepseek-chat",zhiPuPrompt:"",zhiPuEndpoint:"",zhiPuModel:"glm-4-flash",miniMaxPrompt:"",miniMaxEndpoint:"",miniMaxModel:"abab5.5s-chat",baiChuanPrompt:"",baiChuanEndpoint:"",baiChuanModel:"baichuan2-turbo",douBaoPrompt:"",douBaoEndpoint:"",douBaoModel:"",wenXinPrompt:"",wenXinEndpoint:"",wenXinModel:"ernie_speed",hunYuanPrompt:"",hunYuanEndpoint:"",hunYuanModel:"hunyuan-lite",siliConflowPrompt:"",siliConflowEndpoint:"",siliConflowModel:"Qwen/Qwen2-7B-Instruct",geminiPrompt:"",geminiEndpoint:"",geminiModel:"gemini-1.0-pro",deeplEndpoint:""},y={chatGPTConversationInfo:null,hoverTranslate:!1,latestSource:"",pageTrsAuto:!1,pageTrsType:n.a.both,tipForShortKeyForPageTrsTypeClosed:!1,tipForFullTextClosed:!1,tipForDeepLLimitClosed:!1,user:null,optionsSyncAt:null,disabledNofiByBrowserUI:!1,favoritesSyncAt:null,historiesSyncAt:null,deeplKey:[],deeplPoints:c.rc,baiDuAppKey:[],bdPoints:d.p4,bdProPoints:d.cG,baiDuOCRKey:[],bdOcrPoints:u.pR,youDaoAppKey:[],ydPoints:s.Gu,aLiApiKey:[],aliPoints:r.Dx,aliProPoints:r.Qy,qqApiKey:[],qqPoints:p.fH,hsApiKey:[],hsPoints:h.Gs,soGouApiKey:[],cyApiToken:[],cyPoints:l.n8,chatGPTKey:[],claudeKey:[],tongYiKey:[],lingYiKey:[],moonshotKey:[],deepSeekKey:[],zhiPuKey:[],miniMaxKey:[],baiChuanKey:[],douBaoKey:[],wenXinKey:[],hunYuanKey:[],siliConflowKey:[],geminiKey:[],ocrLimit:{date:0,times:0},pdfLimit:{date:0,times:0},pageTranslateLimit:{date:0,times:0},sttLimit:{date:0,times:0},videoLimit:{date:0,times:0},panelTranslateLimit:{date:0,times:0},crossTranslateLimit:{date:0,times:0},pdfZoom:"",noticesUnreadNum:0,noticesFiltered:[],tipForFirstExportClosed:!1,tipForPasteTranslateClosed:!1,tipForDropTranslateClosed:!1,tipForAddJumpTwoClosed:!0,tipForServicesUpdateClosed:!0,tipForGoogleTranslateClosed:!1,tipForSaveSourceSelectClosed:!0}},54712:(t,e,i)=>{i.d(e,{$:()=>n});const n=[{value:"translate",label:"翻译这段文本"},{value:"open-link-in-viewer",label:"在划词翻译中打开此 PDF"},{value:"screen-translate",label:"截图翻译"},{value:"page-translate",label:"网页全文翻译"},{value:"video-translate",label:"音视频翻译"}].map((t=>t.value))},12128:(t,e,i)=>{i.d(e,{y:()=>F});i(97107),i(33873),i(10865),i(47010);var n=i(51127),o=i.n(n),a=i(74874),s=i.n(a),r=i(16224),l=i(41776),d=i(39988),u=i(57892),p=i(27429),h=i(20124),c=i.n(h);function m(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function g(t,e,i){y(t,e),e.set(t,i)}function y(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(t,e){return t.get(T(t,e))}function v(t,e,i){return t.set(T(t,e),i),i}function T(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}var P=new WeakMap,w=new WeakMap,b=new WeakSet;class S extends p.b{constructor(t){var e,i,n,o,a;super(),y(o=this,a=b),a.add(o),g(this,P,void 0),m(this,"max",void 0),m(this,"dateStart",void 0),m(this,"dateDuration",void 0),m(this,"dateEndOfDay",void 0),m(this,"end",void 0),g(this,w,void 0),v(w,this,h("Counter")),v(P,this,(null==t?void 0:t.count)||0),this.dateStart=null!=t&&null!==(e=t.date)&&void 0!==e&&e.start?new Date(t.date.start):null,this.max=(null==t?void 0:t.max)||1/0,this.dateDuration=null==t||null===(i=t.date)||void 0===i?void 0:i.duration,this.dateEndOfDay=null==t||null===(n=t.date)||void 0===n?void 0:n.endOfDay,this.end=null,f(w,this).call(this,"初始状态：%o",{count:f(P,this),max:this.max,start:this.dateStart,duration:this.dateDuration,endOfDay:this.dateEndOfDay}),T(b,this,E).call(this,!0)}isOver(t=0){return T(b,this,E).call(this),f(P,this)+t>this.max}add(t=1){T(b,this,E).call(this),this.dateStart||(this.dateStart=new Date),v(P,this,f(P,this)+t),this.emit("change")}get status(){return{count:f(P,this),max:this.max,start:this.dateStart,end:T(b,this,C).call(this),duration:this.dateDuration}}}function C(){if(null!=this.end)return this.end;if(this.dateStart&&this.dateDuration){let t=(0,l.W)(this.dateStart,this.dateDuration);return this.dateEndOfDay&&(t=(0,d.D)(t)),this.end=t}return this.end=null}function E(t){if(f(w,this).call(this,"开始刷新计数。刷新前状态：%o",{count:f(P,this),max:this.max,start:this.dateStart,duration:this.dateDuration,endOfDay:this.dateEndOfDay}),this.dateStart){const e=T(b,this,C).call(this);if(e){const i=new Date;(0,u.d)(i,e)&&(v(P,this,0),this.dateStart=null,this.end=null,t&&this.emit("change"))}}f(w,this).call(this,"开始刷新计数。刷新后状态：%o",{count:f(P,this),max:this.max,start:this.dateStart,duration:this.dateDuration,endOfDay:this.dateEndOfDay})}function D(t,e,i){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,i)}function x(t,e){return t.get(A(t,e))}function k(t,e,i){return t.set(A(t,e),i),i}function A(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}var K=new WeakMap,L=new WeakMap;class F{constructor(t,e){D(this,K,void 0),D(this,L,void 0),this.storageKey=t,this.max=e,k(K,this,c()(`FunctionLimit:${t}`))}async isOver(t){var e;const i=this.storageKey,n=s()(r.Ne,["user",i]),a=await o().storage.local.get(n),l=a[i];x(K,this).call(this,"读取了使用情况：开始日期 %o，已使用次数 %d，最大使用次数 %d",l.date?new Date(l.date).toLocaleString():"无",l.times,this.max);const d=new S({count:l.times,max:this.max,date:{start:l.date,duration:{weeks:1}}});k(L,this,d.status),d.on("change",(()=>{var t;x(K,this).call(this,"计数状态发生变化，新状态为 %o",d.status),k(L,this,d.status),o().storage.local.set({[i]:{date:null===(t=d.status.start)||void 0===t?void 0:t.getTime(),times:d.status.count}})}));const u=d.isOver(1);return t&&!u&&(x(K,this).call(this,"指定了 add 参数且未超过限额，所以次数加 1"),d.add(1)),x(K,this).call(this,"最终计数状态: %o",d.status),(null===(e=a.user)||void 0===e||!e.vipActivated)&&u}async addOne(){const t=s()(r.Ne,["user",this.storageKey]),e=(await o().storage.local.get(t))[this.storageKey];e.times=((null==e?void 0:e.times)||0)+1,e.date||(e.date=Date.now()),x(K,this).call(this,"使用 addOne 增加了一次次数，现在为 %d",e.times),await o().storage.local.set({[this.storageKey]:e})}get dateEnd(){var t;const e=(null===(t=x(L,this))||void 0===t||null===(t=t.end)||void 0===t?void 0:t.toLocaleString())||"获取结束时间时发生未知错误";return x(K,this).call(this,"获取结束时间：%s",e),e}}},23298:(t,e,i)=>{i.d(e,{x:()=>l});i(62234),i(33873),i(47010),i(83165),i(24541),i(34397),i(61412),i(91883),i(70286);var n=i(21756),o=i(17368),a=i(1783),s=i(34426);const r={401:"登录状态已失效，请重新登录。"};function l(t){if(n.A.isAxiosError(t)){const e=function(t={}){var e;const{url:i,baseURL:n}=t;let o;try{o=new URL(i||"",n)}catch(t){return"远程服务器"}const{host:a}=o;return null!==(e="https://hs-api.limingkai.cn/")&&e.includes(a)?"划词翻译服务器":"远程服务器"}(t.config),i="划词翻译服务器"===e;if(t.response){const n=t.response.status;return new o.F(i?r[n]||`划词翻译服务器内部产生了一个错误，请稍后重试。HTTP 响应码：${n}。`:`${e}返回了错误的 HTTP 响应码：${n}。`,{type:a.V.API_SERVER_ERROR})}return t.request?new o.F(`${e}没有响应。`,{type:a.V.NETWORK_ERROR,link:{name:"查看解决方案",url:"划词翻译服务器"===e?"https://hcfy.app/docs/faqs/server-no-response":"https://hcfy.app/docs/faqs/why-services-always-loading"}}):new o.F(`向${e}发起请求时发生了一个错误：“${t.message}”`,{type:null})}return(0,s.H)(t)}},3161:(t,e,i)=>{i(33873),i(47010),i(83165),i(24541),i(34397),i(61412),i(91883),i(70286)}}]);