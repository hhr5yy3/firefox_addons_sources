// Copyright (c) Zanger LLC. All rights reserved.

(function(){var injected=false;var DEFAULT_DUPLICATE_DELAY=4000;browser.runtime.onMessage.addListener(function(message,sender,reply){if(message.type=="DuplicatePrompt"){if(!injected){injectModal();}
var modal=document.getElementById("stubTabsDuplicateModal");var input=document.getElementById("stubTabsDuplicateNumber");modal.style.display="block";input.focus();input.select();}});function injectModal(){var node=document.createElement("div");node.classList.add("stubtabs-duplicate");var t='<div class="stubtabs-duplicate-modal" id="stubTabsDuplicateModal">';t+='<div class="stubtabs-duplicate-modal-content">';t+='<span class="stubtabs-duplicate-close" id="stubTabsDuplicateClose">&times;</span>';t+='<br>';t+='<img src="https://www.stubtabs.com/wp-content/uploads/2017/09/st_yellow.ico" style="float:left;height:32px;width:32px">';t+='<span style="font-weight:700;font-size:20px;line-height:32px">';t+='&nbsp;&nbsp;Duplicate Tab';t+='</span>';t+='<br><br>';t+='How many times to duplicate this tab:';t+='<input class="stubtabs-duplicate-number" type="number" id="stubTabsDuplicateNumber" value="2" min="1" max="10">';t+='<br><br>';t+='Delay between creating tabs in milliseconds:';t+='<input class="stubtabs-duplicate-delay" type="number" id="stubTabsDuplicateDelayMs" value="'+DEFAULT_DUPLICATE_DELAY+'" min="0" max="3600000">';t+='<br><br>';t+='<input class="stubtabs-duplicate-button" type="button" value="Duplicate!" id="stubTabsDuplicateOk">';t+='<br><br>';t+='</div>';t+='</div>';node.innerHTML=t;document.body.appendChild(node);var modal=document.getElementById("stubTabsDuplicateModal");var span=document.getElementById("stubTabsDuplicateClose");var input=document.getElementById("stubTabsDuplicateNumber");input.addEventListener("keyup",function(event){event.preventDefault();if(event.keyCode===13){document.getElementById("stubTabsDuplicateOk").click();}});span.onclick=function(){modal.style.display="none";};modal.onclick=function(event){if(event.target==modal){modal.style.display="none";}};var button=document.getElementById("stubTabsDuplicateOk");button.addEventListener("click",function(event){var num=document.getElementById("stubTabsDuplicateNumber").value;var delayMs=document.getElementById("stubTabsDuplicateDelayMs").value;browser.runtime.sendMessage({'type':"Duplicate",'number':num,'delayMs':delayMs});modal.style.display="none";});injected=true;}})();