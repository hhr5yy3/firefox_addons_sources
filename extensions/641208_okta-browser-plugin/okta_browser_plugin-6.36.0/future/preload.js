"use strict";(()=>{var l;typeof self<"u"?l=self:typeof window<"u"&&(l=window);var h=Object.getOwnPropertyDescriptor(l,"globalThis");(!h||h.configurable&&(h.enumerable||!h.writable||globalThis!==l))&&Object.defineProperty(l,"globalThis",{configurable:!0,enumerable:!1,value:l,writable:!0});globalThis.ThrushFuture=globalThis.ThrushFuture||{};ThrushFuture.Preload=ThrushFuture.Preload||{};typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope||document.querySelector("meta[name=thrush-future__pluginExecutionContext][content=background]")!=null?ThrushFuture.Preload._zone="background":document.querySelector("meta[name=thrush-future__pluginExecutionContext][content=popover]")!=null?ThrushFuture.Preload._zone="popover":ThrushFuture.Preload._zone="content";var s={PLUGIN_SETTINGS:"PLUGIN_SETTINGS",DBG_PLUGIN_SETTINGS:"DBG_PLUGIN_SETTINGS",ALLOW_LISTED_OKTA_ACCOUNTS:String.fromCharCode.apply(null,[79,75,84,65,95,65,67,67,79,85,78,84,95,87,72,73,84,69,95,76,73,83,84])};async function T(e,n){let t=Okta.Constants.Storage[e];if(t?.type.toLocaleLowerCase()!=="persistent")return null;let a=o=>new Promise(i=>{chrome.storage.local.get(o,c=>{i(c[o]??null)})}),r=e;if(t.multiAccount&&await a(s.DBG_PLUGIN_SETTINGS).then(i=>!!i?.multiAccountAwarePlugin))if(n!=null)r=`${r}_${n.index}`;else{let c=(await a(s.ALLOW_LISTED_OKTA_ACCOUNTS))?.find(({isCurrentAccount:g})=>g)??null;if(c!=null)r=`${r}_${c.index}`;else return null}return a(r)}var u=null;chrome.storage.onChanged.addListener((e,n)=>{if(n==="local"){let t=Object.keys(e);Object.values(s).some(r=>r in e||t.some(o=>o.startsWith(r)))&&(u=null)}});ThrushFuture.Preload.isThrushFutureEnabled=async function(){if(u!=null)return u;try{let e=await T(s.ALLOW_LISTED_OKTA_ACCOUNTS)??[];return u=(await Promise.all(e.map(async t=>T(s.PLUGIN_SETTINGS,t)))).some(t=>!!t?.orgSettings?.pluginIsThrushFutureEnabled),!!u}catch{return u=null,!1}};var d=null,f=new Promise(e=>{d=e});globalThis.addEventListener("thrush-future/ready",()=>{d?.()},{once:!0});ThrushFuture.Preload.waitForThrushFutureReady=function(){return f};})();
