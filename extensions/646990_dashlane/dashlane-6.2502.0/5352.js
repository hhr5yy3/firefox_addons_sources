"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[5352],{42521:(e,t,a)=>{a.d(t,{Jh:()=>o,UE:()=>l,ZP:()=>r});var i=a(96832),s=a(26849);const l=(0,s.compose)(s.not,s.isEmpty,s.trim,(0,s.defaultTo)("")),n=/.+@.+\..+/,o=e=>n.test(e.trim());class r extends i.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:a}=this.props,i={...this.state.values,...e};this.setState({values:i},(()=>{t&&t(this.hasFormBeenEdited()),a&&a(i)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const a=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(a)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,s.reduce)(((t,a)=>(t[a]=e[a]?(0,s.compose)(s.not,e[a]):()=>!1,t)),{},Object.keys(this.state.values)),a=(0,s.evolve)(t,this.state.values);return this.setState({errors:a}),(0,s.all)((0,s.equals)(!1),(0,s.values)(a))},this.hasFormBeenEdited=()=>!(0,s.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,s.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},53748:(e,t,a)=>{a.d(t,{B:()=>f});var i=a(96832),s=a(48062),l=a(14900),n=a(8180),o=a(25792),r=a(39431),d=a(92077),h=a(39649),_=a(86498),p=a(88203),u=a(45272),c=a(77063),m=a(63520),b=a(15446),v=a(18462),y=a(68593);function f(e){const{renderForm:t,vaultItemType:a,iconType:f}=e;return({lee:e})=>{const{translate:E}=(0,p.Z)(),{routes:g}=(0,d.Xo)(),N=(0,_.V)(),{createVaultItem:I}=(0,n.u)(o.L),w=(0,i.useRef)(null),{openDialog:T,shouldShowFrozenStateDialog:A}=(0,c.Ub)(),[C,S]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e={[r.U.Address]:s.PageView.ItemAddressCreate,[r.U.Company]:s.PageView.ItemCompanyCreate,[r.U.Email]:s.PageView.ItemEmailCreate,[r.U.Identity]:s.PageView.ItemIdentityCreate,[r.U.Phone]:s.PageView.ItemPhoneCreate,[r.U.Website]:s.PageView.ItemWebsiteCreate};(0,u.Nc)(e[a])}),[]),(0,i.useEffect)((()=>{A&&T()}),[A]);const V=()=>{(0,u.Nc)(s.PageView.ItemPersonalInfoList),(0,d.uX)(g.userPersonalInfo)},M=(0,h.B)(e.globalState),P=(0,y.tZ)(b.ZP,{iconSize:b.Jh.headerEditPanelIcon,iconType:f}),D=(0,v.gV)(E,a);return(0,y.tZ)(m.zI,{isUsingNewDesign:!0,isViewingExistingItem:!1,itemHasBeenEdited:C,onNavigateOut:V,onSubmit:async()=>{Boolean(w.current?.isFormValid())&&(await(async()=>{const e=w.current?.getValues();e&&"success"!==(await I({vaultItemType:a,content:e})).tag&&N.showAlert(E("_common_generic_error"),l.BLW.ERROR)})(),V())},formId:"add_personalinfo_panel",header:(0,y.tZ)(m.V9,{icon:P,title:D}),children:t(e,w,(()=>S(!0)),M)})}}},45352:(e,t,a)=>{a.r(t),a.d(t,{IdentityAddPanel:()=>_}),a(96832);var i=a(7973),s=a(44105),l=a(26311),n=a(39431),o=a(79862),r=a(53748),d=a(15446),h=a(68593);const _=(0,r.B)({iconType:d.Tu.identity,vaultItemType:n.U.Identity,renderForm:(e,t,a,n)=>{const r=s.c[e.globalState.locale.country]||s.c.US,d={birthDate:(0,i.Z)(new Date,"yyyy-MM-dd"),birthPlace:"",firstName:"",lastName2:"",lastName:"",localeFormat:r,middleName:"",pseudo:"",spaceId:n,title:l.t.Mr};return(0,h.tZ)(o.P,{lee:e,currentValues:d,signalEditedValues:a,ref:t})}})},79862:(e,t,a)=>{a.d(t,{P:()=>y});var i=a(26849),s=a(26311),l=a(61468),n=a(42521),o=a(77063),r=a(67406),d=a(50506);let h=function(e){return e[e.TITLE=0]="TITLE",e[e.FIRSTNAME=1]="FIRSTNAME",e[e.MIDDLENAME=2]="MIDDLENAME",e[e.LASTNAME=3]="LASTNAME",e[e.LASTNAME2=4]="LASTNAME2",e[e.PSEUDO=5]="PSEUDO",e[e.BIRTHDATE=6]="BIRTHDATE",e[e.BIRTHPLACE=7]="BIRTHPLACE",e}({});const _=e=>e!==d.n.JAPAN,p=e=>e===d.n.NORTH_AMERICA_AND_ASIA,u=e=>e===d.n.SPANISH;var c=a(68037),m=a(68593);const b="webapp_personal_info_edition_identity_error",v="webapp_personal_info_edition_identity_birthdate_label";class y extends n.ZP{constructor(...e){super(...e),this.isFieldVisible=(e=>{const t=(0,d.S)(e),a={[h.TITLE]:_(t),[h.FIRSTNAME]:!0,[h.MIDDLENAME]:p(t),[h.LASTNAME]:!0,[h.LASTNAME2]:u(t),[h.PSEUDO]:!0,[h.BIRTHDATE]:!0,[h.BIRTHPLACE]:!0};return(e,t)=>a[e]||!!t})(this.props.currentValues.localeFormat)}isFormValid(){return this.validateValues({firstName:n.UE,lastName:n.UE})}render(){var e,t,a;const n=this.props.lee.translate,{shouldShowFrozenStateDialog:o}=this.context,d=[{label:n("webapp_personal_info_edition_identity_title_mr"),value:s.t.Mr},{label:n("webapp_personal_info_edition_identity_title_mrs"),value:s.t.Mrs},{label:n("webapp_personal_info_edition_identity_title_miss"),value:s.t.Miss},{label:n("webapp_personal_info_edition_identity_title_ms"),value:s.t.Ms},{label:n("webapp_personal_info_edition_identity_title_mx"),value:s.t.Mx},{label:n("webapp_personal_info_edition_identity_title_none_of_these"),value:s.t.NoneOfThese}],_=(0,i.uniqBy)((e=>e.label),d),p=null!=(e=_.find((({value:e})=>this.state.values.title===e)))?e:_[_.length-1];return(0,m.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,m.BX)(c.u,{title:n("webapp_payment_edition_content_identity_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[this.isFieldVisible(h.TITLE,null!=(t=this.state.values.title)?t:"")&&(0,m.tZ)(l.mg,{label:n("webapp_personal_info_edition_identity_title_label"),placeholder:p.label,"data-name":"title",value:p.value,onChange:e=>this.handleChange(e,"title"),disabled:!!o,children:_.map((e=>(0,m.tZ)(l.$m,{value:e.value,children:e.label},e.value)))}),this.isFieldVisible(h.FIRSTNAME,this.state.values.firstName)&&(0,m.tZ)(l.qo,{required:!0,label:n("webapp_personal_info_edition_identity_firstname_label"),placeholder:n("webapp_personal_info_edition_identity_placeholder_no_firstname"),"data-name":"firstName",onChange:this.handleChange,readOnly:!!o,value:this.state.values.firstName,error:this.state.errors.firstName,feedback:this.state.errors.firstName?{text:n(b)}:void 0}),this.isFieldVisible(h.MIDDLENAME,this.state.values.middleName)&&(0,m.tZ)(l.qo,{label:n("webapp_personal_info_edition_identity_middlename_label"),placeholder:n("webapp_personal_info_edition_identity_placeholder_no_middlename"),"data-name":"middleName",value:this.state.values.middleName,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(h.LASTNAME,this.state.values.lastName)&&(0,m.tZ)(l.qo,{required:!0,label:n("webapp_personal_info_edition_identity_lastname_label"),placeholder:n("webapp_personal_info_edition_identity_placeholder_no_lastname"),"data-name":"lastName",value:this.state.values.lastName,onChange:this.handleChange,readOnly:!!o,error:this.state.errors.lastName,feedback:this.state.errors.lastName?{text:n(b)}:void 0}),this.isFieldVisible(h.LASTNAME2,this.state.values.lastName2)&&(0,m.tZ)(l.qo,{label:n("webapp_personal_info_edition_identity_lastname2_label"),placeholder:n("webapp_personal_info_edition_identity_placeholder_no_lastname2"),"data-name":"lastName2",value:this.state.values.lastName2,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(h.PSEUDO,this.state.values.pseudo)&&(0,m.tZ)(l.qo,{label:n("webapp_personal_info_edition_identity_pseudo_label"),placeholder:n("webapp_personal_info_edition_identity_placeholder_no_pseudo"),"data-name":"pseudo",value:this.state.values.pseudo,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(h.BIRTHDATE,this.state.values.birthDate)&&(0,m.tZ)(l.Nn,{value:this.state.values.birthDate,calendarButtonLabel:n(v),label:n(v),onChange:e=>{this.handleChange(e.target.value,"birthDate")},readOnly:!!o}),this.isFieldVisible(h.BIRTHPLACE,this.state.values.birthPlace)&&(0,m.tZ)(l.qo,{label:n("webapp_personal_info_edition_identity_birthplace_label"),placeholder:n("webapp_personal_info_edition_identity_placeholder_no_birthplace"),"data-name":"birthPlace",value:this.state.values.birthPlace,onChange:this.handleChange,readOnly:!!o})]}),(0,m.tZ)(r.M,{isUsingNewDesign:!0,wrapInContentCard:!0,contentCardLabel:n("webapp_payment_edition_content_identity_organization_label"),labelSx:r.e,spaceId:null!=(a=this.state.values.spaceId)?a:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!o})]})}}y.contextType=o.CQ},26311:(e,t,a)=>{a.d(t,{t:()=>i});var i=function(e){return e.Mr="MR",e.Mrs="MRS",e.Miss="MISS",e.Ms="MS",e.Mx="MX",e.NoneOfThese="NONEOFTHESE",e}({})}}]);