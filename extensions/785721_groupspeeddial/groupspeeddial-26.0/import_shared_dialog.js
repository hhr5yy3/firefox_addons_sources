"use strict";(globalThis.webpackChunkgroup_speed_dial=globalThis.webpackChunkgroup_speed_dial||[]).push([[123],{4667:(t,e,i)=>{i.d(e,{e:()=>G});var a=i(4323),s=i(2036),o=i(2497),r=i(6795),n=i(6683),l=i(1374),d=i(8794),c=i(4590),h=i(9),u=i(1879),p=i(6119),g=i(4069),v=i(1641),y=i(2846),m=i(5717),w=i(2221),b=i(6801),f=i(6317),k=i(1285),L=i(8654),C=i(841),_=i(5750),x=i(6664),R=i(9100);class E{MIN;MAX;STEP;_value;constructor(t,e,i,a){this.MIN=t,this.MAX=e,this.STEP=i,this._value=a,this.value=this._value}get value(){return this._value}set value(t){this._value=(0,R.n)(this.MIN,this.MAX,t)}increment(){this.value+=this.STEP}decrement(){this.value-=this.STEP}}class G{groupId;isNewGroup;originalGroup;group;groupPosition;background;hasTextColor;groupLayout;ratioX;ratioY;dialWidth;dialHeight;listWidth;gridRows;gridColumns;gridPosition;isDefault;isDefaultDisabled;isLocked;lockPasswordId;hideLocked;isTopSites;errorMessage;get isBlankNewGroup(){return this.isNewGroup&&this.group.dials.every((t=>t.isEmptyDial()))&&this.originalGroup.name===(0,c.ZB)("group_generated_name",this.group.id)}constructor(t,e){this.groupId=t,this.isNewGroup=e,this.isDefault=!1,this.isDefaultDisabled=!!w.lw.REMEMBER_GROUP,this.isLocked=!1,this.hideLocked=!1,this.isTopSites=!1,this.errorMessage="",this.originalGroup=y.M.groupById(t).clone();const i=this.group=this.originalGroup.clone();this.groupPosition=(0,l.SL)(y.M.GROUPS,(t=>t.id===i.id))+1,this.isLocked=!!i.lock,this.hideLocked=i.lock?.visibility===r.Gj.HIDDEN,this.lockPasswordId=i.lock?.passwordId,this.hasTextColor=!!i.color;{const t=i.background?.type??n.sf.NONE,e=i.background?.value||"";this.background={onlyName:!!i.background?.onlyName,type:t,color:t===n.sf.COLOR&&e||"#28005FFF",url:t===n.sf.URL&&e||"",gradient:(0,_.w)(e)}}i.gestures=Object.assign({},L.j,i.gestures),i.container||="";{let t;[this.ratioX,this.ratioY,t]=i.ratio||[16,12,!1],this.groupLayout=i.dynamic?n.Rv.DYNAMIC:i.list?n.Rv.LIST:i.grid?n.Rv.GRID:i.ratio?t?n.Rv.SCROLL:n.Rv.CENTER:n.Rv.FILL}this.dialWidth=i.dynamic?.width||(g.m0?C.v.androidWidth:C.v.width),this.dialHeight=i.dynamic?.height||(g.m0?C.v.androidHeight:C.v.height),this.listWidth=i.list?.width||(g.m0?C.v.androidListWidth:C.v.listWidth),this.gridRows=new E(4,36,4,i.grid?.areas?.length||12),this.gridColumns=new E(4,36,4,i.grid?.areas?.[0]?.length||24),this.gridPosition=i.grid?.position||r.Cr.fillSpace,this.isTopSites=!!i.topSites,this.isDefaultGroup().then((t=>this.isDefault=t))}async isDefaultGroup(){return await d.ne.get()===this.groupId}async previewCurrentChanges(){try{const t=await this.serializeGroup(this.group);return this.applyVisualChanges(t)}catch(t){this.errorMessage||(this.errorMessage=String(t))}}async applyVisualChanges(t,e=!1){const i=(0,l.RD)(y.M.cloneGroups(),(e=>e.id===t.id),t);await(0,v.Wx)(t),await(0,k.N)(i),(0,p.L)(t),(0,f.s)(t)}async discardChanges(){await this.applyVisualChanges(this.originalGroup,!0),this.isBlankNewGroup&&(0,o.removeGroup)(this.originalGroup)}validate(){this.errorMessage="";const t=m.M6.dialsToClusters(this.group.dials).filter((t=>!t.isEmptyDial())).length;if(t>this.group.rows*this.group.cols)switch(this.groupLayout){case n.Rv.DYNAMIC:case n.Rv.LIST:case n.Rv.GRID:return!0;case n.Rv.SCROLL:return this.group.rows=Math.ceil(t/this.group.cols),!0;case n.Rv.CENTER:case n.Rv.FILL:return this.errorMessage=(0,c.ZB)("validation_small_group_dimensions",t),!1;default:throw"unknown layout"}return!0}async serializeGroup(t){if(!this.validate())throw"not valid";const e=(0,a.WR)(this.background),i=t.clone();switch(i.name||=(0,c.ZB)("group_generated_name",i.id),i.background=e.type===n.sf.NONE?void 0:{onlyName:e.onlyName,type:e.type,value:await(async()=>{switch(e.type){case n.sf.COLOR:return e.color;case n.sf.URL:return e.url;case n.sf.GRADIENT:return(0,_.n)(e.gradient);case n.sf.FILE:return e.fileBase64&&await(0,b._z)({type:"save_db_image",notify:!1,groupId:i.id,url:i.createBackgroundFileURL(),img:e.fileBase64}),"";default:return""}})()},L.x.forEach((t=>{const e=i.gestures?.[t];e&&e.type!==r.EM.OPEN_GROUP&&delete e.groupId})),this.hasTextColor||(i.color=void 0),await(0,s.FJ)()||(i.archived=!1,i.container=void 0,this.groupLayout===n.Rv.GRID&&(this.groupLayout=n.Rv.FILL)),i.topSites=this.isTopSites?{}:void 0,i.lock=this.isLocked&&this.lockPasswordId?{encrypted:!1,visibility:this.hideLocked?r.Gj.HIDDEN:r.Gj.NORMAL,passwordId:this.lockPasswordId}:void 0,i.dynamic=void 0,i.list=void 0,i.grid=void 0,i.ratio=void 0,this.groupLayout){case n.Rv.FILL:break;case n.Rv.CENTER:i.ratio=[this.ratioX,this.ratioY,!1];break;case n.Rv.SCROLL:i.ratio=[this.ratioX,this.ratioY,!0];break;case n.Rv.DYNAMIC:i.dynamic={width:Math.max(60,this.dialWidth),height:Math.max(60,this.dialHeight)};break;case n.Rv.LIST:i.list={width:this.listWidth,direction:n.PX.row};break;case n.Rv.GRID:i.grid={areas:this.originalGroup.grid?.areas||[],position:this.gridPosition||r.Cr.fillSpace}}return i.dials=(0,h.yd)(i.id,i.dials,i.rows,i.cols,i.dynamic,i.list,i.grid,this.originalGroup.rows,this.originalGroup.cols),i.grid&&(i.grid=x.J.normalizeGrid(i.grid,i.dials,this.gridRows.value,this.gridColumns.value)),i}async saveGroup(){const t=await this.serializeGroup(this.group),{name:e,rows:i,cols:a,archived:s}=this.originalGroup;if(await y.M.action("updateGroup",{groupId:this.groupId,update:t,newPosition:this.groupPosition-1}),await this.isDefaultGroup()!==this.isDefault&&(this.isDefault?d.ne.set(this.groupId):d.ne.remove()),!!t.archived!=!!s){const e=await y.M.getVisibleGroups();await u.e.activate(e.find((e=>t.archived?!e.archived:e.archived)).id)}}}},298:(t,e,i)=>{i.r(e),i.d(e,{openImportDoneModal:()=>v});var a=i(5471),s=i(6499),o=i(97),r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("v-app",{staticStyle:{width:"100%",height:"100%"}},[e("v-main",{staticStyle:{width:"100%",height:"100%",padding:"0"}},[e("v-container",{staticStyle:{width:"100%",height:"100%"},attrs:{fluid:""}},[e("v-card",{staticStyle:{width:"100%",height:"100%"},attrs:{elevation:"6"}},[e("v-card-title",{staticClass:"justify-center"},[e("h2",{directives:[{name:"tr",rawName:"v-tr",value:"import_finished",expression:"'import_finished'"}]})]),t._v(" "),e("v-card-text",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("v-radio-group",{attrs:{label:t.tro("group_layout",{column:!0}),"hide-details":""},model:{value:t.layout,callback:e=>{t.layout=e},expression:"layout"}},[e("v-radio",{attrs:{label:t.tro("group_layout_original",{capitalize:!0}),value:"original"}}),t._v(" "),e("v-radio",{attrs:{label:t.tro("group_layout_list",{capitalize:!0}),value:"list"}}),t._v(" "),e("v-radio",{attrs:{label:t.tr("label_more_options"),value:"more"}})],1)],1),t._v(" "),e("v-col",{attrs:{cols:"12",sm:"12"}},[e("v-btn",{attrs:{"x-large":"",block:"",color:"primary"},on:{click:t.closeEditor}},[e("v-icon",{attrs:{size:"24",left:""}},[t._v("fa-check-circle")]),t._v(" "),e("span",{directives:[{name:"tr",rawName:"v-tr",value:"btn_done",expression:"'btn_done'"}]})],1)],1)],1)],1)],1)],1)],1)],1)};r._withStripped=!0;var n=i(4590),l=i(6346),d=i(8495),c=i(7743),h=i(4667),u=i(6683);const p=a.default.extend({name:"import_shared_finished_modal",props:{importedGroups:{type:Array,required:!0}},components:{},data(){const t=this.importedGroups.map((t=>new h.e(t))),e=t[0];return{groupId:this.importedGroups[0],controllers:t,controller:e,originalLayout:e.groupLayout,layout:"original"}},watch:{layout(t){switch(t){case"original":this.controller.groupLayout=this.originalLayout;break;case"list":this.controller.groupLayout=u.Rv.LIST;break;case"more":this.openEditGroup()}this.controller.previewCurrentChanges()}},async created(){},methods:{tro:d.e,tr:n.tr,closePages(){},returnToTab(){},async closeEditor(){const t="list"===this.layout?u.Rv.LIST:"more"===this.layout?new h.e(this.groupId).groupLayout:null;if(null!==t)for(const e of this.controllers)e.groupLayout=t,await e.saveGroup();(0,l.Q)(this.$el,{type:"close"})},openEditGroup(){(0,c.c)(this.importedGroups.at(0))}}});const g=(0,i(4486).A)(p,r,[],!1,null,null,null).exports;async function v(t){const e=new a.default({el:(0,s.Q)(document.createElement("div"),{width:500,height:330,onClose(){e&&e.$destroy()}}).node,vuetify:(await(0,o.X)())(),render:e=>e(g,{props:{importedGroups:t}})})}},5750:(t,e,i)=>{i.d(e,{n:()=>o,w:()=>r});var a=i(6683),s=i(303);function o(t){const e=t.colors.toReversed().join(",");switch(t.type){case a.hq.radialCircle:return`radial-gradient(circle, ${e})`;case a.hq.radialEllipse:return`radial-gradient(ellipse, ${e})`;case a.hq.linear:return`linear-gradient(${t.degree}deg, ${e})`;default:return"black"}}function r(t){const e=(()=>{switch(!0){case t.startsWith("linear-gradient("):return a.hq.linear;case t.startsWith("radial-gradient(circle"):return a.hq.radialCircle;case t.startsWith("radial-gradient(ellipse"):default:return a.hq.radialEllipse}})(),i=parseInt(t.match(new RegExp(String.raw`(\d+)deg`,"i"))?.at(1))??180;return{type:e,colors:(t.match(new RegExp(String.raw`#[0-9a-f]+|rgba?\(\d+,\s?\d+,\s?\d+(,\s?\d+)?\)`,"gi"))||["#ffa142","#420000"]).map((t=>t.startsWith("rgb")?(0,s.H)(t):t)).reverse(),degree:i}}},6499:(t,e,i)=>{i.d(e,{Q:()=>w});var a=i(6004),s=i(3091),o=i(4323),r=i(6690);var n=i(7302),l=i(1471),d=i(910),c=i(9598),h=i(8698),u=i(6346),p=i(1374),g=i(1181),v=i(9100),y=i(4590),m=i(4069);function w(t,{width:e=800,height:i=600,draggableStyle:w="",onClose:b=o.lQ,appendToBody:f=!0,rememberPositionKey:k="",closableOverlay:L=!0,overlayBackground:C="rgba(0, 0, 0, 0.3)",closeOnOverlayClick:_=!0,closeOnESC:x=!0}){const R={get node(){return t},get overlayNode(){return T},minimize:async function(t){A("0"),M.style.transition="top 550ms",M.classList.add("pointer_all"),M.title=(0,y.tr)("label_restore");const e=O.getY();O.setPosition(void 0,window.innerHeight-64),M.addEventListener("mousedown",(0,g.do)(D=()=>{A("100%"),M.classList.remove("pointer_all"),M.title="",(0,o.BK)(250).then((()=>M.style.removeProperty("transition"))),O.setPosition(void 0,e),t?.()}),{capture:!0,once:!0})},maximize:async function(){M.style.transition="top 250ms, left 250ms, width 250ms, height 250ms";O.setPosition(40,40),$.setPosition(window.innerWidth-80,window.innerHeight-80),await(0,o.BK)(250),M.style.removeProperty("transition")},closeModal:()=>{T.isConnected&&(T.remove(),b(),(0,o.XB)(z),window.removeEventListener("keydown",E),m.m0&&document.body.focus({preventScroll:!0}))}},E=(0,l.ak)(R.closeModal);x&&window.addEventListener("keydown",E);const G=`\nz-index: 20;\nwidth: ${L?"100%":"0"};\nheight: 100%;\nbackground: ${C};\nposition: fixed;\ntop: 0;\nleft: 0;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\n`,I=`\ndisplay: flex;\nflex-direction: column;\nopacity: 0;\ntop: 0;\nleft: 0;\nposition: fixed;\nbackground: transparent;\nbox-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;\nwidth: ${e}px;\nheight: ${i}px;\nmin-width: 320px;\nmin-height: 170px;\nmax-width: 100%;\nmax-height: 100%;\n/*border: 1px solid rgb(65, 65, 65);*/\n`,P=`\nz-index: 10;\ncursor: move;\nposition: absolute;\nwidth: 100%;\ntop: 0;\nleft: 0;\nheight: 15px;\n${w}\n`;let M;const S=new d.F(k,(()=>({}))),N=(0,h.U)(500),T=(0,c.z)("div",{"data-modal-overlay":1,style:G,handlers:{onmousedown:t=>{t.target===T&&(T.onclick=t=>{t.target===T&&_&&R.closeModal()})}}},[M=(0,c.z)("div",{style:I},[(0,c.z)("div",{style:"\ndisplay: flex;\noverflow: auto;\nwidth: 100%;\nheight: 100%;\n"},[t]),(0,c.z)("draggable-top",{style:P,"data-draggable-top":0,handlers:{ondblclick:()=>{R.maximize()}}}),(0,c.z)("img",{style:"\nz-index: 10;\ncursor: nw-resize;\nwidth: 16px;\nheight: 16px;\nopacity: 0.8;\npadding: 2px;\nposition: absolute;\nright: 0;\nbottom: 0;\nuser-select: none;\n",src:(0,n.Z)("utils/svg/resize-corner.svg"),"data-resize-corner":0})])]),z=Array();let D=o.lQ;(0,u.Z)(T,(t=>{switch(t.type){case"changeOpacity":T.style.opacity=t.opacity;break;case"changeTransparency":T.style.backgroundColor=t.isTransparent?"transparent":C;break;case"changeOverlayCloseOnClick":_=t.value;break;case"maximize":R.maximize();break;case"addOnCloseHandler":z.push(t.callback);break;case"removeOnCloseHandler":(0,p.E6)(z,t.callback);break;case"close":R.closeModal();break;case"minimize":R.minimize(t.restoreCallback);break;case"restore":D()}})),f&&document.body.appendChild(T);const O=(0,s.$)(M,{autoLockFrames:!0,keepInWindow:250,dontMovePredicate:t=>t.target!==M&&!t.target.hasAttribute("data-draggable-top")});O.setCallback(((t,e,i)=>{(0,a.eC)(M,"top",(0,r.px)(e)),(0,a.eC)(M,"left",(0,r.px)(t)),k&&N((()=>S.update((({w:i,h:a})=>({x:t,y:e,w:i,h:a})))))}));const W=document.documentElement.clientWidth,F=document.documentElement.clientHeight,[B,H]=[W/2-e/2,F/2-i/2];O.setPosition((0,v.n)(0,W-e-10,B),(0,v.n)(0,F-i-10,H)),(0,a.eC)(M,"opacity","1");const $=function(t,{cornerNode:e=t.querySelector("[data-resize-corner]"),originalWidth:i,originalHeight:n,callback:l=o.lQ,autoLockFrames:d=!1}){let c=i,h=n;const u=(0,s.$)(e,d?{autoLockFrames:!0,autoLockFramesContainer:t}:{});return u.setCallback(((e,s,o)=>{c=i+e,h=n+s,(0,a.eC)(t,"width",(0,r.px)(c)),(0,a.eC)(t,"height",(0,r.px)(h)),l(c,h,o)})),{setPosition:(t,e,a)=>u.setPosition(t-i,e-n,a),getWidth:()=>c,getHeight:()=>h}}(M,{autoLockFrames:!0,originalWidth:e,originalHeight:i,callback:(t,e,i)=>{k&&S.update((({x:i,y:a})=>({w:t,h:e,x:i,y:a})))}});return k&&S.get().then((({x:t,y:e,w:i,h:a})=>{[t,e].every(o.Et)&&O.setPosition(t,e,!0),[i,a].every(o.Et)&&$.setPosition(i,a,!0),O.moveToViewport()})),R;function A(t){["width","height"].forEach((e=>T.style.setProperty(e,t)))}}},6346:(t,e,i)=>{i.d(e,{Q:()=>s,Z:()=>o});const a="__modal_window_custom_event",s=(t,e)=>t.dispatchEvent(new CustomEvent(a,{detail:e,bubbles:!0})),o=(t,e)=>t.addEventListener(a,(t=>e(t.detail)))},8495:(t,e,i)=>{i.d(e,{e:()=>s});var a=i(4590);const s=(t,e)=>{const{column:i,capitalize:s,substitutions:o}=e||{};let r=(0,a.tr)(t,o);return!0!==i&&!1!==i||(r.endsWith(":")?i||(r=r.slice(0,-1)):i&&(r+=":")),s&&(r=r[0].toLocaleUpperCase()+r.slice(1)),r}},97:(t,e,i)=>{i.d(e,{X:()=>a});const a=()=>Promise.all([i.e(525),i.e(702)]).then(i.bind(i,6276)).then((t=>t.getVuetifyInstance))}}]);