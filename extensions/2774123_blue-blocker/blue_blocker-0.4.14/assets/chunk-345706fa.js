import"./chunk-1ebdbb1b.js";import{a as m,D as Q,l as I}from"./chunk-70aa1672.js";import{f as L,c as C}from"./chunk-4da8f9f7.js";import{Q as N}from"./chunk-e6f612bb.js";function p(a,t,o,c={}){var u,g,v,y;const l=t[o],r=(u=c.optionName)!=null?u:a.id+"-option";(g=c.statusText)!=null,a.checked=l;const h=[...document.getElementsByName(a.id)];h.forEach(f=>{l?f.classList.add("checked"):f.classList.remove("checked")}),((v=c.callback)!=null?v:()=>{document.getElementsByName(r).forEach(f=>f.style.display=l?"":"none")})(a,!0);const k=(y=c.callback)!=null?y:()=>{b(a.id+"-status"),document.getElementsByName(r).forEach(f=>f.style.display=a.checked?"":"none")};a.addEventListener("input",f=>{const E=f.target;m.storage.sync.set({[o]:E.checked}).then(()=>console.debug(I,"saved value",E.checked,"in",`config.${o}`)).then(()=>k(E,!1)).then(()=>{h.forEach(x=>{E.checked?x.classList.add("checked"):x.classList.remove("checked")})})})}function M(a,t,o){const c=t[o];a.value=c.join(", ");let l=null;a.addEventListener("input",r=>{l&&clearTimeout(l),l=setTimeout(()=>j(r),1e3)})}function T(a,t,o,c="input"){const l=[...document.getElementsByName(a)];l.forEach(r=>{r.value=t,r.addEventListener(c,o),r.addEventListener(c==="input"?"change":"input",h=>{const k=h.target;l.filter(u=>u!==k).forEach(u=>u.value=k.value)})})}function F(a,t,o,c={}){var h;const l=[...document.getElementsByName(a)];l[0].value=o[t].toString();const r=(h=c==null?void 0:c.onInput)!=null?h:k=>{const u=k.target;l.forEach(g=>g.value=u.value),document.getElementsByName(u.name+"-value").forEach(g=>g.textContent=u.value.toString()+"s")};r({target:l[0]},l),l.forEach(k=>{const u=o[t].toString();k.value=u,k.addEventListener("input",g=>r(g,l.filter(v=>v!==g.target))),k.addEventListener("change",g=>{const v=g.target,y=parseInt(v.value),f=y.toString()+"s";document.getElementsByName(v.name+"-value").forEach(E=>E.innerText=f),m.storage.sync.set({[t]:y}).then(()=>console.debug(I,"saved value",y,"in",`config.${t}`)).then(()=>b(v.name+"-status"))})})}function U(){m.storage.sync.get({unblocked:{}}).then(a=>{const t=a.unblocked,o=`user_id,screen_name
`+Object.entries(t).map(l=>{var r;return l[0]+","+((r=l[1])!=null?r:"this user's @ is not stored")}).join(`
`),c=document.createElement("a");c.href="data:text/csv;charset=utf-8,"+encodeURIComponent(o),c.target="_blank",c.download="BlueBlockerSafelist.csv",c.click()})}function j(a){let o=a.target.value.split(",");o=o.map(c=>c.trim().replace(/ {2,}/g," ")).filter(c=>c),m.storage.sync.set({disallowedWords:o}).then(()=>console.debug(I,"saved value",o,"in config.disallowedWords")).then(()=>b("blockstrings-status"))}const D=m.storage.local.get({popupActiveTab:"general"});function b(a,t="saved"){document.getElementsByName(a).forEach(o=>{o.textContent=t,setTimeout(()=>o.textContent=null,1e3)})}document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("version");a.textContent="v"+m.runtime.getManifest().version;const t={};let o;function c(e){if(e===o)return;if(!t.hasOwnProperty(e)){if(e!="quick"&&e!="advanced")throw new Error("invalid tab value. must be one of: "+Object.values(t).map(n=>`'${n}'`).join(", ")+".");e="general"}t[e].content.style.display="block",t[e].button.style.flexGrow="1000";const s=t[e].button.getElementsByTagName("div")[0];if(s.style.borderBottomWidth="5px",t[e].scroll?document.body.style.overflowY="":document.body.style.overflowY="hidden",o){t[o].content.style.display="none",t[o].button.style.flexGrow="";const n=t[o].button.getElementsByTagName("div")[0];n.style.borderBottomWidth="0"}o=e,m.storage.local.set({popupActiveTab:o})}function l(e,s={}){var i,w;const n=document.getElementById((i=s.buttonId)!=null?i:"button-"+e),d=document.getElementById(e);d.style.display="none",t[e]={button:n,content:d,scroll:(w=s.scroll)!=null?w:!1},n.addEventListener("click",()=>c(e)),console.debug(I,"registered tab",e,t[e])}l("general"),l("verified"),l("moderation"),l("appearance"),D.then(e=>t.hasOwnProperty(e.popupActiveTab)?e:{popupActiveTab:"general"}).then(e=>c(e.popupActiveTab));const r=document.getElementById("blocked-users-count"),h=document.getElementById("blocked-user-queue-length"),k=document.getElementById("suspend-block-collection"),u=document.getElementById("show-block-popups"),g=document.getElementById("mute-instead-of-block"),v=document.getElementById("block-following"),y=document.getElementById("block-followers"),f=document.getElementById("skip-following-qrts"),E=document.getElementById("skip-verified"),x=document.getElementById("skip-affiliated"),S=document.getElementById("skip-1mplus"),A=document.getElementById("block-promoted-tweets"),O=document.getElementById("block-for-use"),P=document.getElementById("skip-checkmark"),W=document.getElementById("blockstrings"),V=document.getElementById("blockstrings-input");m.storage.sync.get(Q).then(e=>{const s=e;p(k,s,"suspendedBlockCollection",{callback(n,d){d||b(n.id+"-status",n.checked?"paused":"resumed"),m.action.setIcon({path:n.checked?"/icon/icon-128-greyscale.png":"/icon/icon-128.png"})}}),p(u,s,"showBlockPopups"),p(g,s,"mute"),p(v,s,"blockFollowing"),p(y,s,"blockFollowers"),p(f,s,"skipFollowingQrts"),p(E,s,"skipVerified"),p(x,s,"skipAffiliated"),p(S,s,"skip1Mplus",{optionName:"skip-follower-count-option"}),p(A,s,"blockPromoted"),p(O,s,"blockForUse"),p(P,s,"skipBlueCheckmark",{callback(n,d){d||b(n.id+"-status"),document.getElementsByName(n.id+"-option").forEach(i=>i.style.display=n.checked?"":"none"),document.querySelectorAll("[data-bb-skip-checkmark]").forEach(i=>i.style.display=n.checked?"none":"")}}),p(W,s,"blockDisallowedWords"),M(V,s,"disallowedWords"),document.getElementsByName("skip-follower-count-value").forEach(n=>n.innerText=L(s.skipFollowerCount)),T("skip-follower-count",s.skipFollowerCount,n=>{const d=n.target,i=parseInt(d.value),w=L(i);document.getElementsByName("skip-follower-count-value").forEach(B=>B.innerText=w),m.storage.sync.set({skipFollowerCount:i}).then(()=>console.debug(I,"saved value",i,"in config.skipFollowerCount")).then(()=>b(d.name+"-status"))}),T("toasts-location",s.toastsLocation,n=>{const d=n.target;m.storage.sync.set({toastsLocation:d.value}).then(()=>console.debug(I,"saved value",d.value,"in config.toastsLocation")).then(()=>b(d.name+"-status"))}),F("popup-timer","popupTimer",s),F("block-interval","blockInterval",s,{onInput(n,d){const i=n.target,w=parseInt(i.value);d.forEach(B=>B.value=i.value),document.getElementsByName("variance").forEach(B=>B.innerText="\xB1"+(w/10).toFixed(1)+"s"),document.getElementsByName(i.name+"-value").forEach(B=>B.textContent=i.value.toString()+"s")}}),document.getElementsByName("export-safelist").forEach(n=>n.addEventListener("click",U)),document.getElementsByName("clear-safelist").forEach(n=>{n.addEventListener("click",()=>m.storage.sync.set({unblocked:{}}).then(()=>document.getElementsByName("safelist-status").forEach(d=>d.innerText="cleared safelist.")))})}),m.storage.local.get({BlockCounter:0}).then(e=>{r.textContent=C(e.BlockCounter)}),m.storage.local.onChanged.addListener(e=>{e.hasOwnProperty("BlockCounter")&&(r.textContent=C(e.BlockCounter.newValue),N().then(s=>{h.textContent=C(s)})),e.hasOwnProperty("BlockQueue")&&(h.textContent=C(e.BlockQueue.newValue.length))}),N().then(e=>{h.textContent=C(e)})});
