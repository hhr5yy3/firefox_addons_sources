"use strict";(self.webpackChunk_keplr_wallet_extension=self.webpackChunk_keplr_wallet_extension||[]).push([[947],{49113:(e,t)=>{t.Ar=t.yM=void 0,t.yM=class{logEvent(){}setUserId(){}setUserProperties(){}},t.Ar=class{constructor(e,t={}){this.analyticsClient=e,this.middleware=t}setUserId(e){this.analyticsClient.setUserId(e)}setUserProperties(e){this.analyticsClient.setUserProperties(e)}logEvent(e,t){if(this.middleware.logEvent){const n=this.middleware.logEvent(e,t);e=n.eventName,t=n.eventProperties}this.analyticsClient.logEvent(e,t)}}},94531:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(56309),t),i(n(54737),t),i(n(75468),t),i(n(88092),t),i(n(93395),t),i(n(31289),t),i(n(90924),t)},70223:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(61364),t)},9538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebounceActionTimer=void 0;const r=n(80075);t.DebounceActionTimer=class{constructor(e,t){this.debounceMs=e,this.handler=t,this.requests=[],this.startTime=0,this.tick=()=>{let e=this.debounceMs<=0;if(this.debounceMs>0&&Date.now()-this.startTime>=this.debounceMs&&(e=!0),e){const e=this.requests.slice(),t=this.handler(e);"object"==typeof t&&"then"in t?Promise.resolve(t).then((t=>{this.handleResponses(e,t)})):this.handleResponses(e,t),this.requests=[]}else this.nextTick(this.tick)},this.handleResponses=(e,t)=>{(0,r.runInAction)((()=>{for(let n=0;n<e.length;n++){const r=e[n],i=t[n];r.action(i)}}));for(const t of e)t.resolver()}}call(e,t){return new Promise((n=>{const r=0===this.requests.length;this.requests.push({args:e,action:t,resolver:n}),r&&this.startTimer()}))}startTimer(){this.startTime=Date.now(),this.nextTick(this.tick)}nextTick(e){this.debounceMs<=0?Promise.resolve().then(e):"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,this.debounceMs)}}},83816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toGenerator=void 0,t.toGenerator=function*(e){return yield e}},61364:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(83816),t),i(n(9538),t)},48976:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PrivKey=t.PubKey=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737));function o(){return{key:new Uint8Array}}function a(){return{key:new Uint8Array}}t.protobufPackage="cosmos.crypto.secp256k1",t.PubKey={encode:(e,t=s.default.Writer.create())=>(0!==e.key.length&&t.uint32(10).bytes(e.key),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=o();for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.key=n.bytes():n.skipType(7&e)}return i},fromJSON:e=>({key:p(e.key)?d(e.key):new Uint8Array}),toJSON(e){const t={};return void 0!==e.key&&(t.key=h(void 0!==e.key?e.key:new Uint8Array)),t},fromPartial(e){var t;const n=o();return n.key=null!==(t=e.key)&&void 0!==t?t:new Uint8Array,n}},t.PrivKey={encode:(e,t=s.default.Writer.create())=>(0!==e.key.length&&t.uint32(10).bytes(e.key),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=a();for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.key=n.bytes():n.skipType(7&e)}return i},fromJSON:e=>({key:p(e.key)?d(e.key):new Uint8Array}),toJSON(e){const t={};return void 0!==e.key&&(t.key=h(void 0!==e.key?e.key:new Uint8Array)),t},fromPartial(e){var t;const n=a();return n.key=null!==(t=e.key)&&void 0!==t?t:new Uint8Array,n}};var c=(()=>{if(void 0!==c)return c;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw"Unable to locate global object"})();const u=c.atob||(e=>c.Buffer.from(e,"base64").toString("binary"));function d(e){const t=u(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const l=c.btoa||(e=>c.Buffer.from(e,"binary").toString("base64"));function h(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return l(t.join(""))}function p(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},86404:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionOptionsWeb3Tx=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737));function o(){return{typedDataChainId:"0",feePayer:"",feePayerSig:new Uint8Array}}t.protobufPackage="ethermint.types.v1",t.ExtensionOptionsWeb3Tx={encode:(e,t=s.default.Writer.create())=>("0"!==e.typedDataChainId&&t.uint32(8).uint64(e.typedDataChainId),""!==e.feePayer&&t.uint32(18).string(e.feePayer),0!==e.feePayerSig.length&&t.uint32(26).bytes(e.feePayerSig),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=o();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.typedDataChainId=n.uint64().toString();break;case 2:i.feePayer=n.string();break;case 3:i.feePayerSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({typedDataChainId:l(e.typedDataChainId)?String(e.typedDataChainId):"0",feePayer:l(e.feePayer)?String(e.feePayer):"",feePayerSig:l(e.feePayerSig)?u(e.feePayerSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.typedDataChainId&&(t.typedDataChainId=e.typedDataChainId),void 0!==e.feePayer&&(t.feePayer=e.feePayer),void 0!==e.feePayerSig&&(t.feePayerSig=function(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return d(t.join(""))}(void 0!==e.feePayerSig?e.feePayerSig:new Uint8Array)),t},fromPartial(e){var t,n,r;const i=o();return i.typedDataChainId=null!==(t=e.typedDataChainId)&&void 0!==t?t:"0",i.feePayer=null!==(n=e.feePayer)&&void 0!==n?n:"",i.feePayerSig=null!==(r=e.feePayerSig)&&void 0!==r?r:new Uint8Array,i}};var a=(()=>{if(void 0!==a)return a;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw"Unable to locate global object"})();const c=a.atob||(e=>a.Buffer.from(e,"base64").toString("binary"));function u(e){const t=c(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const d=a.btoa||(e=>a.Buffer.from(e,"binary").toString("base64"));function l(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},99553:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MsgClearAdminResponse=t.MsgClearAdmin=t.MsgUpdateAdminResponse=t.MsgUpdateAdmin=t.MsgMigrateContractResponse=t.MsgMigrateContract=t.MsgExecuteContractResponse=t.MsgExecuteContract=t.MsgInstantiateContractResponse=t.MsgInstantiateContract=t.MsgStoreCodeResponse=t.MsgStoreCode=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737)),o=n(58113);function a(){return{sender:new Uint8Array,wasmByteCode:new Uint8Array,source:"",builder:""}}function c(){return{sender:new Uint8Array,callbackCodeHash:"",codeId:"0",label:"",initMsg:new Uint8Array,initFunds:[],callbackSig:new Uint8Array,admin:""}}function u(){return{address:"",data:new Uint8Array}}function d(){return{sender:new Uint8Array,contract:new Uint8Array,msg:new Uint8Array,callbackCodeHash:"",sentFunds:[],callbackSig:new Uint8Array}}function l(){return{data:new Uint8Array}}function h(){return{sender:"",contract:"",codeId:"0",msg:new Uint8Array,callbackSig:new Uint8Array,callbackCodeHash:""}}function p(){return{data:new Uint8Array}}function f(){return{sender:"",newAdmin:"",contract:"",callbackSig:new Uint8Array}}function g(){return{sender:"",contract:"",callbackSig:new Uint8Array}}t.protobufPackage="secret.compute.v1",t.MsgStoreCode={encode:(e,t=s.default.Writer.create())=>(0!==e.sender.length&&t.uint32(10).bytes(e.sender),0!==e.wasmByteCode.length&&t.uint32(18).bytes(e.wasmByteCode),""!==e.source&&t.uint32(26).string(e.source),""!==e.builder&&t.uint32(34).string(e.builder),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=a();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.wasmByteCode=n.bytes();break;case 3:i.source=n.string();break;case 4:i.builder=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?v(e.sender):new Uint8Array,wasmByteCode:C(e.wasmByteCode)?v(e.wasmByteCode):new Uint8Array,source:C(e.source)?String(e.source):"",builder:C(e.builder)?String(e.builder):""}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=w(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.wasmByteCode&&(t.wasmByteCode=w(void 0!==e.wasmByteCode?e.wasmByteCode:new Uint8Array)),void 0!==e.source&&(t.source=e.source),void 0!==e.builder&&(t.builder=e.builder),t},fromPartial(e){var t,n,r,i;const s=a();return s.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,s.wasmByteCode=null!==(n=e.wasmByteCode)&&void 0!==n?n:new Uint8Array,s.source=null!==(r=e.source)&&void 0!==r?r:"",s.builder=null!==(i=e.builder)&&void 0!==i?i:"",s}},t.MsgStoreCodeResponse={encode:(e,t=s.default.Writer.create())=>("0"!==e.codeId&&t.uint32(8).uint64(e.codeId),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={codeId:"0"};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.codeId=_(n.uint64()):n.skipType(7&e)}return i},fromJSON:e=>({codeId:C(e.codeId)?String(e.codeId):"0"}),toJSON(e){const t={};return void 0!==e.codeId&&(t.codeId=e.codeId),t},fromPartial(e){var t;const n={codeId:"0"};return n.codeId=null!==(t=e.codeId)&&void 0!==t?t:"0",n}},t.MsgInstantiateContract={encode(e,t=s.default.Writer.create()){0!==e.sender.length&&t.uint32(10).bytes(e.sender),""!==e.callbackCodeHash&&t.uint32(18).string(e.callbackCodeHash),"0"!==e.codeId&&t.uint32(24).uint64(e.codeId),""!==e.label&&t.uint32(34).string(e.label),0!==e.initMsg.length&&t.uint32(42).bytes(e.initMsg);for(const n of e.initFunds)o.Coin.encode(n,t.uint32(50).fork()).ldelim();return 0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),""!==e.admin&&t.uint32(66).string(e.admin),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=c();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.callbackCodeHash=n.string();break;case 3:i.codeId=_(n.uint64());break;case 4:i.label=n.string();break;case 5:i.initMsg=n.bytes();break;case 6:i.initFunds.push(o.Coin.decode(n,n.uint32()));break;case 7:i.callbackSig=n.bytes();break;case 8:i.admin=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?v(e.sender):new Uint8Array,callbackCodeHash:C(e.callbackCodeHash)?String(e.callbackCodeHash):"",codeId:C(e.codeId)?String(e.codeId):"0",label:C(e.label)?String(e.label):"",initMsg:C(e.initMsg)?v(e.initMsg):new Uint8Array,initFunds:Array.isArray(null==e?void 0:e.initFunds)?e.initFunds.map((e=>o.Coin.fromJSON(e))):[],callbackSig:C(e.callbackSig)?v(e.callbackSig):new Uint8Array,admin:C(e.admin)?String(e.admin):""}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=w(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.callbackCodeHash&&(t.callbackCodeHash=e.callbackCodeHash),void 0!==e.codeId&&(t.codeId=e.codeId),void 0!==e.label&&(t.label=e.label),void 0!==e.initMsg&&(t.initMsg=w(void 0!==e.initMsg?e.initMsg:new Uint8Array)),e.initFunds?t.initFunds=e.initFunds.map((e=>e?o.Coin.toJSON(e):void 0)):t.initFunds=[],void 0!==e.callbackSig&&(t.callbackSig=w(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),void 0!==e.admin&&(t.admin=e.admin),t},fromPartial(e){var t,n,r,i,s,a,u,d;const l=c();return l.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,l.callbackCodeHash=null!==(n=e.callbackCodeHash)&&void 0!==n?n:"",l.codeId=null!==(r=e.codeId)&&void 0!==r?r:"0",l.label=null!==(i=e.label)&&void 0!==i?i:"",l.initMsg=null!==(s=e.initMsg)&&void 0!==s?s:new Uint8Array,l.initFunds=(null===(a=e.initFunds)||void 0===a?void 0:a.map((e=>o.Coin.fromPartial(e))))||[],l.callbackSig=null!==(u=e.callbackSig)&&void 0!==u?u:new Uint8Array,l.admin=null!==(d=e.admin)&&void 0!==d?d:"",l}},t.MsgInstantiateContractResponse={encode:(e,t=s.default.Writer.create())=>(""!==e.address&&t.uint32(10).string(e.address),0!==e.data.length&&t.uint32(18).bytes(e.data),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=u();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.address=n.string();break;case 2:i.data=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({address:C(e.address)?String(e.address):"",data:C(e.data)?v(e.data):new Uint8Array}),toJSON(e){const t={};return void 0!==e.address&&(t.address=e.address),void 0!==e.data&&(t.data=w(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){var t,n;const r=u();return r.address=null!==(t=e.address)&&void 0!==t?t:"",r.data=null!==(n=e.data)&&void 0!==n?n:new Uint8Array,r}},t.MsgExecuteContract={encode(e,t=s.default.Writer.create()){0!==e.sender.length&&t.uint32(10).bytes(e.sender),0!==e.contract.length&&t.uint32(18).bytes(e.contract),0!==e.msg.length&&t.uint32(26).bytes(e.msg),""!==e.callbackCodeHash&&t.uint32(34).string(e.callbackCodeHash);for(const n of e.sentFunds)o.Coin.encode(n,t.uint32(42).fork()).ldelim();return 0!==e.callbackSig.length&&t.uint32(50).bytes(e.callbackSig),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=d();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.contract=n.bytes();break;case 3:i.msg=n.bytes();break;case 4:i.callbackCodeHash=n.string();break;case 5:i.sentFunds.push(o.Coin.decode(n,n.uint32()));break;case 6:i.callbackSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?v(e.sender):new Uint8Array,contract:C(e.contract)?v(e.contract):new Uint8Array,msg:C(e.msg)?v(e.msg):new Uint8Array,callbackCodeHash:C(e.callbackCodeHash)?String(e.callbackCodeHash):"",sentFunds:Array.isArray(null==e?void 0:e.sentFunds)?e.sentFunds.map((e=>o.Coin.fromJSON(e))):[],callbackSig:C(e.callbackSig)?v(e.callbackSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=w(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.contract&&(t.contract=w(void 0!==e.contract?e.contract:new Uint8Array)),void 0!==e.msg&&(t.msg=w(void 0!==e.msg?e.msg:new Uint8Array)),void 0!==e.callbackCodeHash&&(t.callbackCodeHash=e.callbackCodeHash),e.sentFunds?t.sentFunds=e.sentFunds.map((e=>e?o.Coin.toJSON(e):void 0)):t.sentFunds=[],void 0!==e.callbackSig&&(t.callbackSig=w(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),t},fromPartial(e){var t,n,r,i,s,a;const c=d();return c.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,c.contract=null!==(n=e.contract)&&void 0!==n?n:new Uint8Array,c.msg=null!==(r=e.msg)&&void 0!==r?r:new Uint8Array,c.callbackCodeHash=null!==(i=e.callbackCodeHash)&&void 0!==i?i:"",c.sentFunds=(null===(s=e.sentFunds)||void 0===s?void 0:s.map((e=>o.Coin.fromPartial(e))))||[],c.callbackSig=null!==(a=e.callbackSig)&&void 0!==a?a:new Uint8Array,c}},t.MsgExecuteContractResponse={encode:(e,t=s.default.Writer.create())=>(0!==e.data.length&&t.uint32(10).bytes(e.data),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=l();for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.data=n.bytes():n.skipType(7&e)}return i},fromJSON:e=>({data:C(e.data)?v(e.data):new Uint8Array}),toJSON(e){const t={};return void 0!==e.data&&(t.data=w(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){var t;const n=l();return n.data=null!==(t=e.data)&&void 0!==t?t:new Uint8Array,n}},t.MsgMigrateContract={encode:(e,t=s.default.Writer.create())=>(""!==e.sender&&t.uint32(10).string(e.sender),""!==e.contract&&t.uint32(18).string(e.contract),"0"!==e.codeId&&t.uint32(24).uint64(e.codeId),0!==e.msg.length&&t.uint32(34).bytes(e.msg),0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),""!==e.callbackCodeHash&&t.uint32(66).string(e.callbackCodeHash),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=h();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.string();break;case 2:i.contract=n.string();break;case 3:i.codeId=_(n.uint64());break;case 4:i.msg=n.bytes();break;case 7:i.callbackSig=n.bytes();break;case 8:i.callbackCodeHash=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?String(e.sender):"",contract:C(e.contract)?String(e.contract):"",codeId:C(e.codeId)?String(e.codeId):"0",msg:C(e.msg)?v(e.msg):new Uint8Array,callbackSig:C(e.callbackSig)?v(e.callbackSig):new Uint8Array,callbackCodeHash:C(e.callbackCodeHash)?String(e.callbackCodeHash):""}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=e.sender),void 0!==e.contract&&(t.contract=e.contract),void 0!==e.codeId&&(t.codeId=e.codeId),void 0!==e.msg&&(t.msg=w(void 0!==e.msg?e.msg:new Uint8Array)),void 0!==e.callbackSig&&(t.callbackSig=w(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),void 0!==e.callbackCodeHash&&(t.callbackCodeHash=e.callbackCodeHash),t},fromPartial(e){var t,n,r,i,s,o;const a=h();return a.sender=null!==(t=e.sender)&&void 0!==t?t:"",a.contract=null!==(n=e.contract)&&void 0!==n?n:"",a.codeId=null!==(r=e.codeId)&&void 0!==r?r:"0",a.msg=null!==(i=e.msg)&&void 0!==i?i:new Uint8Array,a.callbackSig=null!==(s=e.callbackSig)&&void 0!==s?s:new Uint8Array,a.callbackCodeHash=null!==(o=e.callbackCodeHash)&&void 0!==o?o:"",a}},t.MsgMigrateContractResponse={encode:(e,t=s.default.Writer.create())=>(0!==e.data.length&&t.uint32(10).bytes(e.data),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=p();for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.data=n.bytes():n.skipType(7&e)}return i},fromJSON:e=>({data:C(e.data)?v(e.data):new Uint8Array}),toJSON(e){const t={};return void 0!==e.data&&(t.data=w(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){var t;const n=p();return n.data=null!==(t=e.data)&&void 0!==t?t:new Uint8Array,n}},t.MsgUpdateAdmin={encode:(e,t=s.default.Writer.create())=>(""!==e.sender&&t.uint32(10).string(e.sender),""!==e.newAdmin&&t.uint32(18).string(e.newAdmin),""!==e.contract&&t.uint32(26).string(e.contract),0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=f();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.string();break;case 2:i.newAdmin=n.string();break;case 3:i.contract=n.string();break;case 7:i.callbackSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?String(e.sender):"",newAdmin:C(e.newAdmin)?String(e.newAdmin):"",contract:C(e.contract)?String(e.contract):"",callbackSig:C(e.callbackSig)?v(e.callbackSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=e.sender),void 0!==e.newAdmin&&(t.newAdmin=e.newAdmin),void 0!==e.contract&&(t.contract=e.contract),void 0!==e.callbackSig&&(t.callbackSig=w(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),t},fromPartial(e){var t,n,r,i;const s=f();return s.sender=null!==(t=e.sender)&&void 0!==t?t:"",s.newAdmin=null!==(n=e.newAdmin)&&void 0!==n?n:"",s.contract=null!==(r=e.contract)&&void 0!==r?r:"",s.callbackSig=null!==(i=e.callbackSig)&&void 0!==i?i:new Uint8Array,s}},t.MsgUpdateAdminResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgClearAdmin={encode:(e,t=s.default.Writer.create())=>(""!==e.sender&&t.uint32(10).string(e.sender),""!==e.contract&&t.uint32(26).string(e.contract),0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=g();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.string();break;case 3:i.contract=n.string();break;case 7:i.callbackSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?String(e.sender):"",contract:C(e.contract)?String(e.contract):"",callbackSig:C(e.callbackSig)?v(e.callbackSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=e.sender),void 0!==e.contract&&(t.contract=e.contract),void 0!==e.callbackSig&&(t.callbackSig=w(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),t},fromPartial(e){var t,n,r;const i=g();return i.sender=null!==(t=e.sender)&&void 0!==t?t:"",i.contract=null!==(n=e.contract)&&void 0!==n?n:"",i.callbackSig=null!==(r=e.callbackSig)&&void 0!==r?r:new Uint8Array,i}},t.MsgClearAdminResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})};var y=(()=>{if(void 0!==y)return y;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw"Unable to locate global object"})();const m=y.atob||(e=>y.Buffer.from(e,"base64").toString("binary"));function v(e){const t=m(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const b=y.btoa||(e=>y.Buffer.from(e,"binary").toString("base64"));function w(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return b(t.join(""))}function _(e){return e.toString()}function C(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},180:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MsgExecuteContract=t.MsgInstantiateContract=t.MsgStoreCode=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737)),o=n(58113);function a(){return{sender:new Uint8Array,wasmByteCode:new Uint8Array,source:"",builder:""}}function c(){return{sender:new Uint8Array,callbackCodeHash:"",codeId:"0",label:"",initMsg:new Uint8Array,initFunds:[],callbackSig:new Uint8Array}}function u(){return{sender:new Uint8Array,contract:new Uint8Array,msg:new Uint8Array,callbackCodeHash:"",sentFunds:[],callbackSig:new Uint8Array}}t.protobufPackage="secret.compute.v1beta1",t.MsgStoreCode={encode:(e,t=s.default.Writer.create())=>(0!==e.sender.length&&t.uint32(10).bytes(e.sender),0!==e.wasmByteCode.length&&t.uint32(18).bytes(e.wasmByteCode),""!==e.source&&t.uint32(26).string(e.source),""!==e.builder&&t.uint32(34).string(e.builder),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=a();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.wasmByteCode=n.bytes();break;case 3:i.source=n.string();break;case 4:i.builder=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:g(e.sender)?h(e.sender):new Uint8Array,wasmByteCode:g(e.wasmByteCode)?h(e.wasmByteCode):new Uint8Array,source:g(e.source)?String(e.source):"",builder:g(e.builder)?String(e.builder):""}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=f(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.wasmByteCode&&(t.wasmByteCode=f(void 0!==e.wasmByteCode?e.wasmByteCode:new Uint8Array)),void 0!==e.source&&(t.source=e.source),void 0!==e.builder&&(t.builder=e.builder),t},fromPartial(e){var t,n,r,i;const s=a();return s.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,s.wasmByteCode=null!==(n=e.wasmByteCode)&&void 0!==n?n:new Uint8Array,s.source=null!==(r=e.source)&&void 0!==r?r:"",s.builder=null!==(i=e.builder)&&void 0!==i?i:"",s}},t.MsgInstantiateContract={encode(e,t=s.default.Writer.create()){0!==e.sender.length&&t.uint32(10).bytes(e.sender),""!==e.callbackCodeHash&&t.uint32(18).string(e.callbackCodeHash),"0"!==e.codeId&&t.uint32(24).uint64(e.codeId),""!==e.label&&t.uint32(34).string(e.label),0!==e.initMsg.length&&t.uint32(42).bytes(e.initMsg);for(const n of e.initFunds)o.Coin.encode(n,t.uint32(50).fork()).ldelim();return 0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=c();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.callbackCodeHash=n.string();break;case 3:i.codeId=n.uint64().toString();break;case 4:i.label=n.string();break;case 5:i.initMsg=n.bytes();break;case 6:i.initFunds.push(o.Coin.decode(n,n.uint32()));break;case 7:i.callbackSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:g(e.sender)?h(e.sender):new Uint8Array,callbackCodeHash:g(e.callbackCodeHash)?String(e.callbackCodeHash):"",codeId:g(e.codeId)?String(e.codeId):"0",label:g(e.label)?String(e.label):"",initMsg:g(e.initMsg)?h(e.initMsg):new Uint8Array,initFunds:Array.isArray(null==e?void 0:e.initFunds)?e.initFunds.map((e=>o.Coin.fromJSON(e))):[],callbackSig:g(e.callbackSig)?h(e.callbackSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=f(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.callbackCodeHash&&(t.callbackCodeHash=e.callbackCodeHash),void 0!==e.codeId&&(t.codeId=e.codeId),void 0!==e.label&&(t.label=e.label),void 0!==e.initMsg&&(t.initMsg=f(void 0!==e.initMsg?e.initMsg:new Uint8Array)),e.initFunds?t.initFunds=e.initFunds.map((e=>e?o.Coin.toJSON(e):void 0)):t.initFunds=[],void 0!==e.callbackSig&&(t.callbackSig=f(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),t},fromPartial(e){var t,n,r,i,s,a,u;const d=c();return d.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,d.callbackCodeHash=null!==(n=e.callbackCodeHash)&&void 0!==n?n:"",d.codeId=null!==(r=e.codeId)&&void 0!==r?r:"0",d.label=null!==(i=e.label)&&void 0!==i?i:"",d.initMsg=null!==(s=e.initMsg)&&void 0!==s?s:new Uint8Array,d.initFunds=(null===(a=e.initFunds)||void 0===a?void 0:a.map((e=>o.Coin.fromPartial(e))))||[],d.callbackSig=null!==(u=e.callbackSig)&&void 0!==u?u:new Uint8Array,d}},t.MsgExecuteContract={encode(e,t=s.default.Writer.create()){0!==e.sender.length&&t.uint32(10).bytes(e.sender),0!==e.contract.length&&t.uint32(18).bytes(e.contract),0!==e.msg.length&&t.uint32(26).bytes(e.msg),""!==e.callbackCodeHash&&t.uint32(34).string(e.callbackCodeHash);for(const n of e.sentFunds)o.Coin.encode(n,t.uint32(42).fork()).ldelim();return 0!==e.callbackSig.length&&t.uint32(50).bytes(e.callbackSig),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=u();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.contract=n.bytes();break;case 3:i.msg=n.bytes();break;case 4:i.callbackCodeHash=n.string();break;case 5:i.sentFunds.push(o.Coin.decode(n,n.uint32()));break;case 6:i.callbackSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:g(e.sender)?h(e.sender):new Uint8Array,contract:g(e.contract)?h(e.contract):new Uint8Array,msg:g(e.msg)?h(e.msg):new Uint8Array,callbackCodeHash:g(e.callbackCodeHash)?String(e.callbackCodeHash):"",sentFunds:Array.isArray(null==e?void 0:e.sentFunds)?e.sentFunds.map((e=>o.Coin.fromJSON(e))):[],callbackSig:g(e.callbackSig)?h(e.callbackSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=f(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.contract&&(t.contract=f(void 0!==e.contract?e.contract:new Uint8Array)),void 0!==e.msg&&(t.msg=f(void 0!==e.msg?e.msg:new Uint8Array)),void 0!==e.callbackCodeHash&&(t.callbackCodeHash=e.callbackCodeHash),e.sentFunds?t.sentFunds=e.sentFunds.map((e=>e?o.Coin.toJSON(e):void 0)):t.sentFunds=[],void 0!==e.callbackSig&&(t.callbackSig=f(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),t},fromPartial(e){var t,n,r,i,s,a;const c=u();return c.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,c.contract=null!==(n=e.contract)&&void 0!==n?n:new Uint8Array,c.msg=null!==(r=e.msg)&&void 0!==r?r:new Uint8Array,c.callbackCodeHash=null!==(i=e.callbackCodeHash)&&void 0!==i?i:"",c.sentFunds=(null===(s=e.sentFunds)||void 0===s?void 0:s.map((e=>o.Coin.fromPartial(e))))||[],c.callbackSig=null!==(a=e.callbackSig)&&void 0!==a?a:new Uint8Array,c}};var d=(()=>{if(void 0!==d)return d;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw"Unable to locate global object"})();const l=d.atob||(e=>d.Buffer.from(e,"base64").toString("binary"));function h(e){const t=l(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const p=d.btoa||(e=>d.Buffer.from(e,"binary").toString("base64"));function f(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return p(t.join(""))}function g(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},91985:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Keplr=void 0;const s=n(47722),o=n(81880),a=n(4941),c=i(n(39714)),u=i(n(27808)),d=n(48834),l=i(n(22699));t.Keplr=class{constructor(e,t,n){this.version=e,this.mode=t,this.requester=n,this.enigmaUtils=new Map,this.defaultOptions={},this.ethereum=new p(this,this.requester),this.starknet=new g(this,this.requester)}ping(){return r(this,void 0,void 0,(function*(){yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","keplr-ping",{})}))}enable(e){return"string"==typeof e&&(e=[e]),new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access",{chainIds:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}isEnabled(e){return r(this,void 0,void 0,(function*(){return"string"==typeof e&&(e=[e]),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","is-enabled-access",{chainIds:e})}))}disable(e){return r(this,void 0,void 0,(function*(){return"string"==typeof e&&(e=[e]),new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","disable-access",{chainIds:null!=e?e:[]}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}experimentalSuggestChain(e){return r(this,void 0,void 0,(function*(){if(e.hideInUI)throw new Error("hideInUI is not allowed");if(e.gasPriceStep){const t=Object.assign({},e.gasPriceStep);for(const n of e.feeCurrencies)n.gasPriceStep||(n.gasPriceStep=t);delete e.gasPriceStep,console.warn("The `gasPriceStep` field of the `ChainInfo` has been moved under `feeCurrencies`. This is automatically handled as of right now, but the upcoming update would potentially cause errors.")}return e.coinType&&(console.warn("The `coinType` field of the `ChainInfo` is removed. This is automatically handled as of right now, but the upcoming update would potentially cause errors."),delete e.coinType),new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","need-suggest-chain-info-interaction",{chainInfo:e}).then((i=>{i||(r=!0),(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","suggest-chain-info",{chainInfo:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}))}getKey(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","get-cosmos-key",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}getKeysSettled(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","get-cosmos-keys-settled",{chainIds:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}getChainInfosWithoutEndpoints(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{let n=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","get-chain-infos-without-endpoints",{}).then((t=>e(t.chainInfos))).catch(t).finally((()=>n=!0)),setTimeout((()=>{n||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}getChainInfoWithoutEndpoints(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","get-chain-info-without-endpoints",{chainId:e}).then((e=>t(e.chainInfo))).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}sendTx(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.enable(e),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"background-tx","send-tx-to-background",{chainId:e,tx:t,mode:n})}))}signAmino(e,t,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let u=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-amino",{chainId:e,signer:t,signDoc:n,signOptions:(0,c.default)(null!==(a=this.defaultOptions.sign)&&void 0!==a?a:{},i)}).then(r).catch(o).finally((()=>u=!0)),setTimeout((()=>{u||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}signDirect(e,t,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let d=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-direct",{chainId:e,signer:t,signDoc:{bodyBytes:n.bodyBytes,authInfoBytes:n.authInfoBytes,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null},signOptions:(0,c.default)(null!==(a=this.defaultOptions.sign)&&void 0!==a?a:{},i)}).then((e=>r({signed:{bodyBytes:e.signed.bodyBytes,authInfoBytes:e.signed.authInfoBytes,chainId:e.signed.chainId,accountNumber:u.default.fromString(e.signed.accountNumber)},signature:e.signature}))).catch(o).finally((()=>d=!0)),setTimeout((()=>{d||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}signDirectAux(e,t,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let d=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-direct-aux",{chainId:e,signer:t,signDoc:{bodyBytes:n.bodyBytes,publicKey:n.publicKey,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null,sequence:n.sequence?n.sequence.toString():null},signOptions:(0,c.default)({preferNoSetMemo:null===(a=this.defaultOptions.sign)||void 0===a?void 0:a.preferNoSetMemo},i)}).then((e=>r({signed:{bodyBytes:e.signed.bodyBytes,publicKey:e.signed.publicKey,chainId:e.signed.chainId,accountNumber:u.default.fromString(e.signed.accountNumber),sequence:u.default.fromString(e.signed.sequence)},signature:e.signature}))).catch(o).finally((()=>d=!0)),setTimeout((()=>{d||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}signArbitrary(e,t,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-amino-adr-36",{chainId:e,signer:t,data:"string"==typeof n?d.Buffer.from(n):n,signOptions:{isADR36WithString:"string"==typeof n}}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}verifyArbitrary(e,t,n,i){return r(this,void 0,void 0,(function*(){return"string"==typeof n&&(n=d.Buffer.from(n)),new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","verify-cosmos-sign-amino-adr-36",{chainId:e,signer:t,data:n,signature:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{a||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}signEthereum(e,t,n,i){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","request-sign-ethereum",{chainId:e,signer:t,message:"string"==typeof n?d.Buffer.from(n):n,signType:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{a||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}signICNSAdr36(e,t,n,i,o){return r(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{let c=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-icns-adr-36-signatures-v2",{chainId:e,contractAddress:t,owner:n,username:i,addressChainIds:o}).then(r).catch(a).finally((()=>c=!0)),setTimeout((()=>{c||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}getOfflineSigner(e,t){return new a.CosmJSOfflineSigner(e,this,t)}getOfflineSignerOnlyAmino(e,t){return new a.CosmJSOfflineSignerOnlyAmino(e,this,t)}getOfflineSignerAuto(e,t){return r(this,void 0,void 0,(function*(){return(yield this.getKey(e)).isNanoLedger?new a.CosmJSOfflineSignerOnlyAmino(e,this,t):new a.CosmJSOfflineSigner(e,this,t)}))}suggestToken(e,t,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-cw20","SuggestTokenMsg",{chainId:e,contractAddress:t,viewingKey:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}getSecret20ViewingKey(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-cw20","get-secret20-viewing-key",{chainId:e,contractAddress:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}getEnigmaPubKey(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","get-pubkey-msg",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}getEnigmaTxEncryptionKey(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","get-tx-encryption-key-msg",{chainId:e,nonce:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}enigmaIsNewApi(e){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","is-new-api-msg",{chainId:e})}))}enigmaEncrypt(e,t,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","request-encrypt-msg",{chainId:e,contractCodeHash:t,msg:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}enigmaDecrypt(e,t,n){return r(this,void 0,void 0,(function*(){return t&&0!==t.length?new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","request-decrypt-msg",{chainId:e,cipherText:t,nonce:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),100)})):new Uint8Array}))}getEnigmaUtils(e){if(this.enigmaUtils.has(e))return this.enigmaUtils.get(e);const t=new o.KeplrEnigmaUtils(e,this);return this.enigmaUtils.set(e,t),t}experimentalSignEIP712CosmosTx_v0(e,t,n,i,o={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{var u;let d=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-sign-eip-712-cosmos-tx-v0",{chainId:e,signer:t,eip712:n,signDoc:i,signOptions:(0,c.default)(null!==(u=this.defaultOptions.sign)&&void 0!==u?u:{},o)}).then(r).catch(a).finally((()=>d=!0)),setTimeout((()=>{d||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}__core__getAnalyticsId(){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"analytics","get-analytics-id",{})}))}changeKeyRingName({defaultName:e,editable:t=!0}){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-v2","change-keyring-name-interactive",{defaultName:e,editable:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}__core__privilageSignAminoWithdrawRewards(e,t,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","PrivilegeCosmosSignAminoWithdrawRewards",{chainId:e,signer:t,signDoc:n})}))}__core__privilageSignAminoDelegate(e,t,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","PrivilegeCosmosSignAminoDelegate",{chainId:e,signer:t,signDoc:n})}))}sendEthereumTx(e,t){return r(this,void 0,void 0,(function*(){return yield this.enable(e),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"background-tx-ethereum","send-ethereum-tx-to-background",{chainId:e,tx:t})}))}suggestERC20(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-erc20","SuggestERC20TokenMsg",{chainId:e,contractAddress:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}__core__webpageClosed(){return r(this,void 0,void 0,(function*(){yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","injected-webpage-closed",{})}))}getStarknetKey(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","get-starknet-key",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}getStarknetKeysSettled(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","get-starknet-keys-settled",{chainIds:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}signStarknetTx(e,t,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-sign-starknet-tx",{chainId:e,transactions:t,details:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}signStarknetDeployAccountTransaction(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-sign-starknet-deploy-account-tx",{chainId:e,transaction:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}))}))}))}protectedTryOpenSidePanelIfEnabled(e=!1){return r(this,void 0,void 0,(function*(){let t=!1;if("undefined"!=typeof window&&!0===window.__keplr_content_script&&(t=!0),t&&(yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"side-panel","GetSidePanelEnabledMsg",{})).enabled)try{return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"router-extension/src/router/extension.ts","tryOpenSidePanelIfEnabled",{})}catch(t){if(console.log(t),!e&&t.message&&t.message.includes("in response to a user gesture")&&!document.getElementById("__open_keplr_side_panel__")){if(yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","ping-content-script-tab-has-opened-side-panel",{}))return;const e=yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring","GetIsLockedMsg",{}),t=yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"settings","GetThemeOptionMsg",{}),n=`\n                @font-face {\n                  font-family: 'Inter-SemiBold-Keplr';\n                  src: url('${chrome.runtime.getURL("/assets/Inter-SemiBold.ttf")}') format('truetype');\n                  font-weight: 600;\n                  font-style: normal;\n                }\n\n                @keyframes slide-left {\n                  0% {\n                    transform: translateY(0%) translateX(100%);\n                  }\n                  100% {\n                    transform: translateY(0%) translateX(0);\n                  }\n                }\n                    \n                @keyframes tada {\n                  0% {\n                    transform: scale3d(1, 1, 1);\n                  }\n                  10%, 20% {\n                    transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);\n                  }\n                  30%, 50%, 70%, 90% {\n                    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);\n                  }\n                  40%, 60%, 80% {\n                    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);\n                  }\n                  100% {\n                    transform: scale3d(1, 1, 1);\n                  }\n                }\n                  \n            `,r="auto"===t?!window.matchMedia("(prefers-color-scheme: dark)").matches:"light"===t,i=document.createElement("style");i.appendChild(document.createTextNode(n)),document.head.appendChild(i);const o=document.createElement("div");o.id="__open_keplr_side_panel__",o.style.boxSizing="border-box",o.style.animation="slide-left 0.5s forwards",o.style.position="fixed",o.style.right="1.5rem",o.style.top="1.5rem",o.style.padding="1rem 1.75rem 1rem 0.75rem",o.style.zIndex="2147483647",o.style.borderRadius="1rem",o.style.display="flex",o.style.alignItems="center",o.style.fontFamily="Inter-SemiBold-Keplr",o.style.fontWeight="600",o.style.background=r?"#FEFEFE":"#1D1D1F";const a=document.createElement("div");a.style.boxSizing="border-box",a.style.transform="translateY(-0.65rem)",a.style.marginRight="0.35rem",a.innerHTML=`\n                <svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M30 29.7522C25.1484 31.0691 16.7109 27.1184 18.6093 18.3391C20.5078 9.55979 25.5703 11.5351 26.414 12.852C27.2578 14.1689 28.3125 22.2898 15.8672 19.2171C5.9109 16.7589 7.15625 6.04811 8 1M8 1L14 8M8 1L1 7.5" stroke="${r?"#2C4BE2":"#72747B"}"/>\n                </svg>\n              `;const c=document.createElement("div");c.style.boxSizing="border-box",c.style.position="relative",c.style.marginRight="1rem";const u=document.createElement("img"),d=chrome.runtime.getURL(`/assets/${e?"locked-keplr-logo":"icon"}-128.png`);u.src=d,u.style.boxSizing="border-box",u.style.width="3rem",u.style.height="3rem",c.appendChild(u);const l=document.createElement("img"),h=chrome.runtime.getURL("assets/icon-click-cursor.png");l.src=h,l.style.boxSizing="border-box",l.style.position="absolute",l.style.right="-0.2rem",l.style.bottom="-0.2rem",l.style.aspectRatio="78/98",l.style.height="1.375rem",c.appendChild(l);const p=document.createElement("span");if(p.style.boxSizing="border-box",p.style.fontSize="1rem",p.style.color=r?"#020202":"#FEFEFE",p.textContent=e?"Unlock Keplr to proceed":"Open Keplr to approve request(s)",o.appendChild(a),o.appendChild(c),o.appendChild(p),!document.getElementById("__open_keplr_side_panel__")){let e=!1;const t=setInterval((()=>{(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","ping-content-script-tab-has-opened-side-panel",{}).then((n=>{n&&(clearInterval(t),e||(o.remove(),e=!0))}))}),300);document.body.appendChild(o)}}}}))}};const h=["eth_sendTransaction","personal_sign","eth_signTypedData_v3","eth_signTypedData_v4","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset"];class p extends l.default{constructor(e,t){super(),this.keplr=e,this.requester=t,this.chainId=null,this.selectedAddress=null,this.networkVersion=null,this.isKeplr=!0,this.isMetaMask=!0}protectedEnableAccess(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{let n=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access-for-evm",{}).then(e).catch(t).finally((()=>n=!0)),setTimeout((()=>{n||this.keplr.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}isConnected(){return!0}request({method:e,params:t,providerId:n,chainId:i}){return r(this,void 0,void 0,(function*(){if("string"!=typeof e)throw new Error("Invalid paramater: `method` must be a string");return"keplr_initProviderState"!==e&&(yield this.protectedEnableAccess()),new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","request-json-rpc-to-evm",{method:e,params:t,providerId:n,chainId:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{!a&&h.includes(e)&&this.keplr.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}enable(){return r(this,void 0,void 0,(function*(){return yield this.request({method:"eth_requestAccounts"})}))}net_version(){return r(this,void 0,void 0,(function*(){return yield this.request({method:"net_version"})}))}}const f=["wallet_watchAsset","wallet_switchStarknetChain","wallet_addInvokeTransaction","wallet_addDeclareTransaction","wallet_signTypedData"];class g{constructor(e,t){this.keplr=e,this.requester=t,this.id="",this.name="",this.version="",this.icon="",this.isConnected=!1}protectedEnableAccess(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{let n=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access-for-starknet",{}).then(e).catch(t).finally((()=>n=!0)),setTimeout((()=>{n||this.keplr.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}request({type:e,params:t}){return r(this,void 0,void 0,(function*(){if("string"!=typeof e)throw new Error("Invalid parameter: `type` must be a string");let n=!1;return"keplr_initStarknetProviderState"===e&&(n=!0),"wallet_getPermissions"===e&&(n=!0),"wallet_requestAccounts"===e&&!Array.isArray(t)&&(null==t?void 0:t.silent_mode)&&(n=!0),n||(yield this.protectedEnableAccess()),new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-json-rpc-to-starknet",{method:e,params:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{!i&&f.includes(e)&&this.keplr.protectedTryOpenSidePanelIfEnabled()}),100)}))}))}enable(e){return r(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}isPreauthorized(){throw new Error("Method not implemented.")}on(e,t){throw new Error("Method not implemented.")}off(e,t){throw new Error("Method not implemented.")}}},4941:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CosmJSOfflineSigner=t.CosmJSOfflineSignerOnlyAmino=void 0;class r{constructor(e,t,n){this.chainId=e,this.keplr=t,this.signOptions=n}getAccounts(){return n(this,void 0,void 0,(function*(){const e=yield this.keplr.getKey(this.chainId);return[{address:e.bech32Address,algo:"secp256k1",pubkey:e.pubKey}]}))}signAmino(e,t){return n(this,void 0,void 0,(function*(){if(this.chainId!==t.chain_id)throw new Error("Unmatched chain id with the offline signer");if((yield this.keplr.getKey(t.chain_id)).bech32Address!==e)throw new Error("Unknown signer address");return yield this.keplr.signAmino(this.chainId,e,t,this.signOptions)}))}sign(e,t){return n(this,void 0,void 0,(function*(){return yield this.signAmino(e,t)}))}}t.CosmJSOfflineSignerOnlyAmino=r,t.CosmJSOfflineSigner=class extends r{constructor(e,t,n){super(e,t,n)}signDirect(e,t){return n(this,void 0,void 0,(function*(){if(this.chainId!==t.chainId)throw new Error("Unmatched chain id with the offline signer");if((yield this.keplr.getKey(t.chainId)).bech32Address!==e)throw new Error("Unknown signer address");return yield this.keplr.signDirect(this.chainId,e,t,this.signOptions)}))}}},81880:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KeplrEnigmaUtils=void 0,t.KeplrEnigmaUtils=class{constructor(e,t){this.chainId=e,this.keplr=t}isNewApi(){return n(this,void 0,void 0,(function*(){return yield this.keplr.enigmaIsNewApi(this.chainId)}))}getPubkey(){return n(this,void 0,void 0,(function*(){return yield this.keplr.getEnigmaPubKey(this.chainId)}))}getTxEncryptionKey(e){return n(this,void 0,void 0,(function*(){return yield this.keplr.getEnigmaTxEncryptionKey(this.chainId,e)}))}encrypt(e,t){return n(this,void 0,void 0,(function*(){return yield this.keplr.enigmaEncrypt(this.chainId,e,t)}))}decrypt(e,t){return n(this,void 0,void 0,(function*(){return yield this.keplr.enigmaDecrypt(this.chainId,e,t)}))}}},33210:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(91985),t),i(n(4941),t),i(n(81880),t),i(n(77818),t)},77818:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InjectedKeplr=t.injectKeplrToWindow=void 0;const s=n(65880),o=n(47722),a=n(81880),c=n(4941),u=i(n(39714)),d=i(n(27808)),l=i(n(22699));function h(e,t,n){const r=Object.getOwnPropertyDescriptor(e,t);!r||r.writable?!r||r.configurable?Object.defineProperty(e,t,{value:n,writable:!1}):e[t]=n:console.warn(`Failed to inject ${t} from keplr. Probably, other wallet is trying to intercept Keplr`)}t.injectKeplrToWindow=function(e){h(window,"keplr",e),h(window,"getOfflineSigner",e.getOfflineSigner),h(window,"getOfflineSignerOnlyAmino",e.getOfflineSignerOnlyAmino),h(window,"getOfflineSignerAuto",e.getOfflineSignerAuto),h(window,"getEnigmaUtils",e.getEnigmaUtils),h(window,"starknet_keplr",e.starknet)};class p{static startProxy(e,t={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},n){const i=i=>r(this,void 0,void 0,(function*(){const s=n?n(i.data):i.data;if(s&&"proxy-request"===s.type)try{if(!s.id)throw new Error("Empty id");if(s.method.startsWith("protected"))throw new Error("Rejected");if("version"===s.method)throw new Error("Version is not function");if("mode"===s.method)throw new Error("Mode is not function");if("defaultOptions"===s.method)throw new Error("DefaultOptions is not function");if(!e[s.method]||"ethereum"!==s.method&&"starknet"!==s.method&&"function"!=typeof e[s.method])throw new Error(`Invalid method: ${s.method}`);if("getOfflineSigner"===s.method)throw new Error("GetOfflineSigner method can't be proxy request");if("getOfflineSignerOnlyAmino"===s.method)throw new Error("GetOfflineSignerOnlyAmino method can't be proxy request");if("getOfflineSignerAuto"===s.method)throw new Error("GetOfflineSignerAuto method can't be proxy request");if("getEnigmaUtils"===s.method)throw new Error("GetEnigmaUtils method can't be proxy request");const n=s.method,i=yield(()=>r(this,void 0,void 0,(function*(){var t;if("signDirect"===n)return yield(()=>r(this,void 0,void 0,(function*(){const t=s.args[2],n=yield e.signDirect(s.args[0],s.args[1],{bodyBytes:t.bodyBytes,authInfoBytes:t.authInfoBytes,chainId:t.chainId,accountNumber:t.accountNumber?d.default.fromString(t.accountNumber):null},s.args[3]);return{signed:{bodyBytes:n.signed.bodyBytes,authInfoBytes:n.signed.authInfoBytes,chainId:n.signed.chainId,accountNumber:n.signed.accountNumber.toString()},signature:n.signature}})))();if("signDirectAux"===n)return yield(()=>r(this,void 0,void 0,(function*(){const t=s.args[2],n=yield e.signDirectAux(s.args[0],s.args[1],{bodyBytes:t.bodyBytes,publicKey:t.publicKey,chainId:t.chainId,accountNumber:t.accountNumber?d.default.fromString(t.accountNumber):null,sequence:t.sequence?d.default.fromString(t.sequence):null},s.args[3]);return{signed:{bodyBytes:n.signed.bodyBytes,publicKey:n.signed.publicKey,chainId:n.signed.chainId,accountNumber:n.signed.accountNumber.toString(),sequence:n.signed.sequence.toString()},signature:n.signature}})))();if("ethereum"===n){const t=s.ethereumProviderMethod;if(null==t?void 0:t.startsWith("protected"))throw new Error("Rejected");if("chainId"===t)throw new Error("chainId is not function");if("selectedAddress"===t)throw new Error("selectedAddress is not function");if("networkVersion"===t)throw new Error("networkVersion is not function");if("isKeplr"===t)throw new Error("isKeplr is not function");if("isMetaMask"===t)throw new Error("isMetaMask is not function");if(void 0===t||"function"!=typeof e.ethereum[t])throw new Error(`${s.ethereumProviderMethod} is not function or invalid Ethereum provider method`);const n=o.JSONUint8Array.unwrap(s.args);return"request"===t?yield e.ethereum.request("string"==typeof n?JSON.parse(n):n):yield e.ethereum[t](..."string"==typeof n?JSON.parse(n):n)}if("starknet"===n){const n=s.starknetProviderMethod;if(null==n?void 0:n.startsWith("protected"))throw new Error("Rejected");if("id"===n)throw new Error("id is not function");if("name"===n)throw new Error("name is not function");if("version"===n)throw new Error("version is not function");if("icon"===n)throw new Error("icon is not function");if("chainId"===n)throw new Error("chainId is not function");if("selectedAddress"===n)throw new Error("selectedAddress is not function");if("isConnected"===n)throw new Error("isConnected is not function");if("account"===n)throw new Error("account is not function");if("provider"===n)throw new Error("provider is not function");if(void 0===n||"function"!=typeof(null===(t=e.starknet)||void 0===t?void 0:t[n]))throw new Error(`${s.starknetProviderMethod} is not function or invalid Starknet provider method`);const r=o.JSONUint8Array.unwrap(s.args);return"request"===n?yield e.starknet.request("string"==typeof r?JSON.parse(r):r):yield e.starknet[n](..."string"==typeof r?JSON.parse(r):r)}return yield e[n](...o.JSONUint8Array.unwrap(s.args))})))(),a={type:"proxy-request-response",id:s.id,result:{return:o.JSONUint8Array.wrap(i)}};t.postMessage(a)}catch(e){const n={type:"proxy-request-response",id:s.id,result:{error:e.code&&!e.module?{code:e.code,message:e.message,data:e.data}:e.message||e.toString()}};t.postMessage(n)}}));return t.addMessageListener(i),()=>{t.removeMessageListener(i)}}requestMethod(e,t){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((e=>e.toString(16))).join(""),i={type:"proxy-request",id:r,method:e,args:o.JSONUint8Array.wrap(t)};return new Promise(((e,t)=>{const n=i=>{const s=this.parseMessage?this.parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this.eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);a?a.error?t(new Error(a.error)):e(a.return):t(new Error("Result is null"))};this.eventListener.addMessageListener(n),this.eventListener.postMessage(i)}))}constructor(e,t,n,r,i={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},s,o,a){this.version=e,this.mode=t,this.onStarknetStateChange=n,this.onStarknetAccountChange=r,this.eventListener=i,this.parseMessage=s,this.eip6963ProviderInfo=o,this.starknetProviderInfo=a,this.enigmaUtils=new Map,this.defaultOptions={},this.ethereum=new f((()=>this),this.eventListener,this.parseMessage,this.eip6963ProviderInfo),this.starknet=this.generateStarknetProvider();const c=Object.keys(this);for(const e of c)if("defaultOptions"!==e&&Object.defineProperty(this,e,{value:this[e],writable:!1}),"eventListener"===e){const e=Object.keys(this.eventListener);for(const t of e)Object.defineProperty(this.eventListener,t,{value:this.eventListener[t],writable:!1})}const u=Object.getOwnPropertyNames(p.prototype);for(const e of u)"constructor"!==e&&"function"==typeof this[e]&&Object.defineProperty(this,e,{value:this[e].bind(this),writable:!1})}ping(){return r(this,void 0,void 0,(function*(){yield this.requestMethod("ping",[])}))}enable(e){return r(this,void 0,void 0,(function*(){yield this.requestMethod("enable",[e])}))}disable(e){return r(this,void 0,void 0,(function*(){yield this.requestMethod("disable",[e])}))}experimentalSuggestChain(e){var t,n;return r(this,void 0,void 0,(function*(){if(e.hideInUI)throw new Error("hideInUI is not allowed");((null===(t=e.features)||void 0===t?void 0:t.includes("stargate"))||(null===(n=e.features)||void 0===n?void 0:n.includes("no-legacy-stdTx")))&&console.warn("stargate, no-legacy-stdTx feature has been deprecated. The launchpad is no longer supported, thus works without the two features. We would keep the aforementioned two feature for a while, but the upcoming update would potentially cause errors. Remove the two feature."),yield this.requestMethod("experimentalSuggestChain",[e])}))}getKey(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getKey",[e])}))}getKeysSettled(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getKeysSettled",[e])}))}sendTx(e,t,n){return r(this,void 0,void 0,(function*(){return"length"in t||console.warn("Do not send legacy std tx via `sendTx` API. We now only support protobuf tx. The usage of legeacy std tx would throw an error in the near future."),yield this.requestMethod("sendTx",[e,t,n])}))}signAmino(e,t,n,i={}){var s;return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signAmino",[e,t,n,(0,u.default)(null!==(s=this.defaultOptions.sign)&&void 0!==s?s:{},i)])}))}signDirect(e,t,n,i={}){var s;return r(this,void 0,void 0,(function*(){const r=yield this.requestMethod("signDirect",[e,t,{bodyBytes:n.bodyBytes,authInfoBytes:n.authInfoBytes,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null},(0,u.default)(null!==(s=this.defaultOptions.sign)&&void 0!==s?s:{},i)]),o=r.signed;return{signed:{bodyBytes:o.bodyBytes,authInfoBytes:o.authInfoBytes,chainId:o.chainId,accountNumber:d.default.fromString(o.accountNumber)},signature:r.signature}}))}signDirectAux(e,t,n,i={}){var s;return r(this,void 0,void 0,(function*(){const r=yield this.requestMethod("signDirectAux",[e,t,{bodyBytes:n.bodyBytes,publicKey:n.publicKey,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null,sequence:n.sequence?n.sequence.toString():null},(0,u.default)({preferNoSetMemo:null===(s=this.defaultOptions.sign)||void 0===s?void 0:s.preferNoSetMemo},i)]),o=r.signed;return{signed:{bodyBytes:o.bodyBytes,publicKey:o.publicKey||void 0,chainId:o.chainId,accountNumber:d.default.fromString(o.accountNumber),sequence:d.default.fromString(o.sequence)},signature:r.signature}}))}signArbitrary(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signArbitrary",[e,t,n])}))}signICNSAdr36(e,t,n,r,i){return this.requestMethod("signICNSAdr36",[e,t,n,r,i])}verifyArbitrary(e,t,n,i){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("verifyArbitrary",[e,t,n,i])}))}signEthereum(e,t,n,i){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signEthereum",[e,t,n,i])}))}getOfflineSigner(e,t){return new c.CosmJSOfflineSigner(e,this,t)}getOfflineSignerOnlyAmino(e,t){return new c.CosmJSOfflineSignerOnlyAmino(e,this,t)}getOfflineSignerAuto(e,t){return r(this,void 0,void 0,(function*(){return(yield this.getKey(e)).isNanoLedger?new c.CosmJSOfflineSignerOnlyAmino(e,this,t):new c.CosmJSOfflineSigner(e,this,t)}))}suggestToken(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("suggestToken",[e,t,n])}))}getSecret20ViewingKey(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getSecret20ViewingKey",[e,t])}))}getEnigmaPubKey(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getEnigmaPubKey",[e])}))}getEnigmaTxEncryptionKey(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getEnigmaTxEncryptionKey",[e,t])}))}enigmaEncrypt(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("enigmaEncrypt",[e,t,n])}))}enigmaDecrypt(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("enigmaDecrypt",[e,t,n])}))}enigmaIsNewApi(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("enigmaIsNewApi",[e])}))}getEnigmaUtils(e){if(this.enigmaUtils.has(e))return this.enigmaUtils.get(e);const t=new a.KeplrEnigmaUtils(e,this);return this.enigmaUtils.set(e,t),t}experimentalSignEIP712CosmosTx_v0(e,t,n,i,s={}){var o;return r(this,void 0,void 0,(function*(){return yield this.requestMethod("experimentalSignEIP712CosmosTx_v0",[e,t,n,i,(0,u.default)(null!==(o=this.defaultOptions.sign)&&void 0!==o?o:{},s)])}))}getChainInfosWithoutEndpoints(){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getChainInfosWithoutEndpoints",[])}))}getChainInfoWithoutEndpoints(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getChainInfoWithoutEndpoints",[e])}))}__core__getAnalyticsId(){return this.requestMethod("__core__getAnalyticsId",[])}changeKeyRingName({defaultName:e,editable:t=!0}){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("changeKeyRingName",[{defaultName:e,editable:t}])}))}__core__privilageSignAminoWithdrawRewards(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__privilageSignAminoWithdrawRewards",[e,t,n])}))}__core__privilageSignAminoDelegate(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__privilageSignAminoDelegate",[e,t,n])}))}sendEthereumTx(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("sendEthereumTx",[e,t])}))}suggestERC20(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("suggestERC20",[e,t])}))}__core__webpageClosed(){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__webpageClosed",[])}))}getStarknetKey(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getStarknetKey",[e])}))}getStarknetKeysSettled(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getStarknetKeysSettled",[e])}))}signStarknetTx(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signStarknetTx",[e,t,n])}))}signStarknetDeployAccountTransaction(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signStarknetDeployAccountTransaction",[e,t])}))}generateStarknetProvider(){return new g(this.starknetProviderInfo.id,this.starknetProviderInfo.name,this.version,this.starknetProviderInfo.icon,(()=>this),this.onStarknetStateChange,this.onStarknetAccountChange,this.eventListener,this.parseMessage)}}t.InjectedKeplr=p;class f extends l.default{constructor(e,t={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},n,i){if(super(),this.injectedKeplr=e,this.eventListener=t,this.parseMessage=n,this.eip6963ProviderInfo=i,this.chainId=null,this.networkVersion=null,this.selectedAddress=null,this.isKeplr=!0,this.isMetaMask=!0,this._isConnected=!1,this._currentChainId=null,this._requestMethod=(e,t)=>r(this,void 0,void 0,(function*(){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((e=>e.toString(16))).join(""),i={type:"proxy-request",id:r,method:"ethereum",args:o.JSONUint8Array.wrap(t),ethereumProviderMethod:e};return new Promise(((e,t)=>{const n=i=>{const s=this.parseMessage?this.parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this.eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);if(a)if(a.error){const e=a.error;t(e.code&&!e.module?new o.EthereumProviderRpcError(e.code,e.message,e.data):new Error(e))}else e(a.return);else t(new Error("Result is null"))};this.eventListener.addMessageListener(n),this.eventListener.postMessage(i)}))})),this._initProviderState=()=>r(this,void 0,void 0,(function*(){const e=yield this._requestMethod("request",{method:"keplr_initProviderState"});if(e){const{currentEvmChainId:t,currentChainId:n,selectedAddress:r}=e;null!=n&&null!=t&&null!=r&&(this._handleConnect(t),this._handleChainChanged(t),this._currentChainId=n,this._handleAccountsChanged(r))}})),this._handleConnect=e=>r(this,void 0,void 0,(function*(){if(!this._isConnected){this._isConnected=!0;const t=`0x${e.toString(16)}`;this.emit("connect",{chainId:t})}})),this._handleDisconnect=()=>r(this,void 0,void 0,(function*(){this._isConnected&&(yield this._requestMethod("request",{method:"keplr_disconnect"}),this._isConnected=!1,this.chainId=null,this.selectedAddress=null,this.networkVersion=null,this.emit("disconnect"))})),this._handleChainChanged=e=>r(this,void 0,void 0,(function*(){const t=`0x${e.toString(16)}`;t!==this.chainId&&(this.chainId=t,this.networkVersion=e.toString(10),this.emit("chainChanged",t))})),this._handleAccountsChanged=e=>r(this,void 0,void 0,(function*(){this.selectedAddress!==e&&(this.selectedAddress=e,this.emit("accountsChanged",[e]))})),this.request=({method:e,params:t,chainId:n})=>r(this,void 0,void 0,(function*(){var r;if("string"!=typeof e)throw new Error("Invalid paramater: `method` must be a string");return this._isConnected||(yield this._initProviderState()),"eth_accounts"===e?this.selectedAddress?[this.selectedAddress]:[]:yield this._requestMethod("request",{method:e,params:t,providerId:null===(r=this.eip6963ProviderInfo)||void 0===r?void 0:r.uuid,chainId:n})})),this.enable=()=>r(this,void 0,void 0,(function*(){return yield this.request({method:"eth_requestAccounts"})})),this.net_version=()=>r(this,void 0,void 0,(function*(){return yield this.request({method:"net_version"})})),this._initProviderState(),window.addEventListener("keplr_keystorechange",(()=>r(this,void 0,void 0,(function*(){if(this._currentChainId&&(yield e().getChainInfoWithoutEndpoints(this._currentChainId))){const t=(yield e().getKey(this._currentChainId)).ethereumHexAddress;this._handleAccountsChanged(t)}})))),window.addEventListener("keplr_chainChanged",(e=>{if(e.detail.origin===window.location.origin){const t=e.detail.evmChainId;this._handleChainChanged(t)}})),window.addEventListener("keplr_ethSubscription",(e=>{var t;const n=e.detail.origin,r=e.detail.providerId;if(n===window.location.origin&&r===(null===(t=this.eip6963ProviderInfo)||void 0===t?void 0:t.uuid)){const t=e.detail.data;this.emit("message",{type:"eth_subscription",data:t})}})),this.eip6963ProviderInfo){const e=new CustomEvent(s.EIP6963EventNames.Announce,{detail:Object.freeze({info:this.eip6963ProviderInfo,provider:this})});window.addEventListener(s.EIP6963EventNames.Request,(()=>window.dispatchEvent(e))),window.dispatchEvent(e)}}isConnected(){return this._isConnected}}class g{constructor(e,t,n,i,s,o,a,c={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},u){this.id=e,this.name=t,this.version=n,this.icon=i,this._injectedKeplr=s,this.onStateChange=o,this.onAccountChange=a,this._eventListener=c,this._parseMessage=u,this.isConnected=!1,this.chainId=void 0,this.selectedAddress=void 0,this.account=void 0,this.provider=void 0,this._currentChainId=void 0,this._userWalletEvents=[],this._initProviderState(),window.addEventListener("keplr_keystorechange",(()=>r(this,void 0,void 0,(function*(){if(this._currentChainId){const e=(yield this._injectedKeplr().getStarknetKey(this._currentChainId)).hexAddress;this.selectedAddress=e,this.onAccountChange({selectedAddress:e}),this._userWalletEvents.forEach((t=>{"accountsChanged"===t.type&&t.handler([e])}))}})))),window.addEventListener("keplr_starknetChainChanged",(e=>{const t=e.detail.origin,n=e.detail.starknetChainId;this.chainId=n,t===window.location.origin&&this._userWalletEvents.forEach((e=>{"networkChanged"===e.type&&e.handler(n)}))}))}_requestMethod(e,t){return r(this,void 0,void 0,(function*(){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((e=>e.toString(16))).join(""),i={type:"proxy-request",id:r,method:"starknet",args:o.JSONUint8Array.wrap(t),starknetProviderMethod:e};return new Promise(((e,t)=>{const n=i=>{const s=this._parseMessage?this._parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this._eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);if(a)if(a.error){const e=a.error;t(e.code&&!e.module?new o.EthereumProviderRpcError(e.code,e.message,e.data):new Error(e))}else e(a.return);else t(new Error("Result is null"))};this._eventListener.addMessageListener(n),this._eventListener.postMessage(i)}))}))}_initProviderState(){return r(this,void 0,void 0,(function*(){const{currentChainId:e,selectedAddress:t,rpc:n}=yield this.request({type:"keplr_initStarknetProviderState"});null!=e&&null!=t&&null!=n?(this.onStateChange({selectedAddress:t,chainId:e,rpc:n}),this._currentChainId=e,this.chainId=e.replace("starknet:",""),this.selectedAddress=t,this.isConnected=!0):this.onStateChange({selectedAddress:null,chainId:null,rpc:null})}))}request({type:e,params:t}){return r(this,void 0,void 0,(function*(){if("string"!=typeof e)throw new Error("Invalid parameter: `type` must be a string");return yield this._requestMethod("request",{type:e,params:t})}))}enable(e){return r(this,void 0,void 0,(function*(){const{currentChainId:e,selectedAddress:t,rpc:n}=yield this.request({type:"keplr_enableStarknetProvider"});return this.onStateChange({selectedAddress:t,chainId:e,rpc:n}),this._currentChainId=e,this.chainId=e.replace("starknet:",""),this.selectedAddress=t,this.isConnected=!0,[t]}))}isPreauthorized(){return r(this,void 0,void 0,(function*(){const{currentChainId:e,selectedAddress:t}=yield this.request({type:"keplr_initStarknetProviderState"});return null!=e&&null!=t}))}on(e,t){if("accountsChanged"===e)this._userWalletEvents.push({type:"accountsChanged",handler:t});else{if("networkChanged"!==e)throw new Error("Invalid event type");this._userWalletEvents.push({type:"networkChanged",handler:t})}}off(e,t){if("accountsChanged"!==e&&"networkChanged"!==e)throw new Error("Invalid event type");const n=this._userWalletEvents.findIndex((n=>n.type===e&&n.handler===t));n>=0&&this._userWalletEvents.splice(n,1)}}},25472:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(43705),t),i(n(35263),t),i(n(73659),t),i(n(15915),t)},74484:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ChainSuggestStore=void 0;const s=n(33783),o=n(80075),a=n(94531),c=n(89642),u=n(86693);class d{constructor(e,t){this.interactionStore=e,this.communityChainInfoRepo=t,this.communityChainInfo=new Map,(0,o.makeObservable)(this)}get waitingSuggestedChainInfo(){const e=this.interactionStore.getAllData(s.SuggestChainInfoMsg.type());if(e.length>0)return e[0]}get waitingSuggestedChainInfos(){return this.interactionStore.getAllData(s.SuggestChainInfoMsg.type())}get communityChainInfoRepoUrl(){return`https://github.com/${this.communityChainInfoRepo.organizationName}/${this.communityChainInfoRepo.repoName}`}getCommunityChainInfoUrl(e){const t=e.startsWith("eip155:"),n=a.ChainIdHelper.parse(e);return`${this.communityChainInfoRepoUrl}/blob/${this.communityChainInfoRepo.branchName}/${t?"evm":"cosmos"}/${n.identifier}.json`}getCommunityChainInfo(e){const t=a.ChainIdHelper.parse(e).identifier;return this.communityChainInfo.has(t)||this.fetchCommunityChainInfo(e),this.communityChainInfo.get(t)}*fetchCommunityChainInfo(e){var t;const n=a.ChainIdHelper.parse(e).identifier;if(!this.communityChainInfo.get(n)){this.communityChainInfo.set(n,{isLoading:!0,chainInfo:void 0});try{const r=e.startsWith("eip155:"),i=yield*(0,c.toGenerator)((0,u.simpleFetch)(this.communityChainInfoRepo.alternativeURL?this.communityChainInfoRepo.alternativeURL.replace("{chain_identifier}",n).replace("/cosmos/",r?"/evm/":"/cosmos/"):`https://raw.githubusercontent.com/${this.communityChainInfoRepo.organizationName}/${this.communityChainInfoRepo.repoName}/${this.communityChainInfoRepo.branchName}/${r?"evm":"cosmos"}/${n}.json`)),s="rest"in i.data&&!r?i.data:Object.assign(Object.assign({},i.data),{rest:i.data.rpc,evm:Object.assign({chainId:parseInt(i.data.chainId.replace("eip155:",""),10),rpc:i.data.rpc},"websocket"in i.data&&{websocket:i.data.websocket}),features:["eth-address-gen","eth-key-sign"].concat(null!==(t=i.data.features)&&void 0!==t?t:[])});if(a.ChainIdHelper.parse(i.data.chainId).identifier!==n)throw new Error(`Invalid chain identifier: (expected: ${n}, actual: ${a.ChainIdHelper.parse(i.data.chainId).identifier})`);this.communityChainInfo.set(n,{isLoading:!1,chainInfo:s})}catch(e){console.log(e),this.communityChainInfo.set(n,{isLoading:!1,chainInfo:void 0})}}}approveWithProceedNext(e,t,n){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,t,n)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll(s.SuggestChainInfoMsg.type())}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([o.observable.shallow],d.prototype,"communityChainInfo",void 0),r([o.flow],d.prototype,"fetchCommunityChainInfo",null),t.ChainSuggestStore=d},20833:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignEthereumInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-ethereum")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t,n,r,s={}){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{signingData:t,signature:n},r,s)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-ethereum")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.SignEthereumInteractionStore=o},23782:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ICNSInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-icns-adr36")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{},t)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNextV2(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-icns-adr36")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.ICNSInteractionStore=o},43705:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(83769),t),i(n(45685),t),i(n(76942),t),i(n(74484),t),i(n(23782),t),i(n(20833),t),i(n(79499),t),i(n(28001),t)},83769:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractionStore=void 0;const s=n(47722),o=n(33783),a=n(80075),c=n(58242);class u{constructor(e,t,n,r,i,s){this.router=e,this.msgRequester=t,this.afterInteraction=n,this.onDataReceived=r,this.onDataChanged=i,this.pingHandler=s,this._isInitialized=!1,this.data=[],this.obsoleteData=new Map,this.getAllData=(0,c.computedFn)((e=>(0,a.toJS)(this.data.filter((t=>t.type===e))))),this.getData=(0,c.computedFn)((e=>this.data.find((t=>t.id===e)))),(0,a.makeObservable)(this);const u=new o.InteractionForegroundService(this,s);(0,o.interactionForegroundInit)(e,u),this.init()}init(){return i(this,void 0,void 0,(function*(){yield this.refreshData(),(0,a.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}refreshData(){return i(this,void 0,void 0,(function*(){const e=this.data.map((e=>e.id)).join("/");let t=yield this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.GetInteractionWaitingDataArrayMsg);if(this.onDataReceived&&(t=yield this.onDataReceived(t)),e!==t.map((e=>e.id)).join("/")){const e=this.data.slice();(0,a.runInAction)((()=>{this.data=t})),this.onDataChanged&&this.onDataChanged(e,t.slice())}}))}onInteractionDataReceived(){this.refreshData()}onEventDataReceived(){}*approveWithProceedNext(e,t,n){if(this.getData(e)&&!this.isObsoleteInteraction(e)&&(this.markAsObsolete(e,!0),yield this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.ApproveInteractionMsg(e,t)),yield this.delay(100),yield n(this.hasOtherData(e)),this.removeData(e),this.afterInteraction)){const e=this.data[0];this.afterInteraction(e)}}*approveWithProceedNextV2(e,t,n,r={}){var i;"string"==typeof e&&(e=[e]);const a=[];for(const t of e)this.getData(t)&&!this.isObsoleteInteraction(t)&&(this.markAsObsolete(t,!0),a.push(t));r.preDelay&&r.preDelay>0&&(yield new Promise((e=>setTimeout(e,r.preDelay))));const c=[];for(const e of a)c.push(this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.ApproveInteractionV2Msg(e,t)));if(yield Promise.all(c),(null==r.postDelay||r.postDelay>0)&&(yield this.delay(null!==(i=r.postDelay)&&void 0!==i?i:50)),yield n(this.hasOtherData(e)),this.removeData(e),this.afterInteraction){const e=this.data[0];this.afterInteraction(e)}}*rejectWithProceedNext(e,t){if(this.getData(e)&&!this.isObsoleteInteraction(e)&&(this.markAsObsolete(e),yield this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.RejectInteractionMsg(e)),yield this.delay(100),yield t(this.hasOtherData(e)),this.removeData(e),this.afterInteraction)){const e=this.data[0];this.afterInteraction(e)}}*rejectWithProceedNextV2(e,t){"string"==typeof e&&(e=[e]);const n=[];for(const t of e)this.getData(t)&&!this.isObsoleteInteraction(t)&&(this.markAsObsolete(t),n.push(t));const r=[];for(const e of n)r.push(this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.RejectInteractionV2Msg(e)));if(yield Promise.all(r),yield this.delay(50),yield t(this.hasOtherData(e)),this.removeData(e),this.afterInteraction){const e=this.data[0];this.afterInteraction(e)}}delay(e){return new Promise((t=>{setTimeout(t,e)}))}*rejectAll(e){const t=this.getAllData(e);for(const e of t)this.isObsoleteInteraction(e.id)||(yield this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.RejectInteractionMsg(e.id)),this.removeData(e.id))}isObsoleteInteraction(e){var t,n;return!!e&&null!==(n=null===(t=this.obsoleteData.get(e))||void 0===t?void 0:t.obsolete)&&void 0!==n&&n}isObsoleteInteractionApproved(e){if(!e)return!1;const t=this.obsoleteData.get(e);return!!t&&t.obsolete&&t.approved}removeData(e){"string"==typeof e&&(e=[e]);for(const t of e)this.data=this.data.filter((e=>e.id!==t)),this.obsoleteData.delete(t)}markAsObsolete(e,t=!1){this.getData(e)&&this.obsoleteData.set(e,{obsolete:!0,approved:t})}hasOtherData(e){return"string"==typeof e&&(e=[e]),!!this.data.find((t=>!e.includes(t.id)))}}r([a.observable],u.prototype,"_isInitialized",void 0),r([a.observable.shallow],u.prototype,"data",void 0),r([a.observable.shallow],u.prototype,"obsoleteData",void 0),r([a.action],u.prototype,"onInteractionDataReceived",null),r([a.action],u.prototype,"onEventDataReceived",null),r([a.flow],u.prototype,"approveWithProceedNext",null),r([a.flow],u.prototype,"approveWithProceedNextV2",null),r([a.flow],u.prototype,"rejectWithProceedNext",null),r([a.flow],u.prototype,"rejectWithProceedNextV2",null),r([a.flow],u.prototype,"rejectAll",null),r([a.action],u.prototype,"removeData",null),r([a.action],u.prototype,"markAsObsolete",null),t.InteractionStore=u},45685:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionStore=void 0;const s=n(33783),o=n(47722),a=n(80075);class c{constructor(e,t,n){this.interactionStore=e,this.permissionManagerStore=t,this.requester=n,(0,a.makeObservable)(this)}get waitingPermissionData(){if(this.waitingPermissionDatas.length>0)return this.waitingPermissionDatas[0]}get waitingPermissionDatas(){return this.interactionStore.getAllData(s.INTERACTION_TYPE_PERMISSION)}get waitingPermissionMergedData(){const e=this.waitingPermissionDatas.filter((e=>{var t,n;return!(null===(t=e.data.options)||void 0===t?void 0:t.isForEVM)&&!(null===(n=e.data.options)||void 0===n?void 0:n.isForStarknet)}));if(0===e.length)return;const t=e[0],n={ids:[t.id],chainIds:t.data.chainIds,type:t.data.type,origins:t.data.origins,options:t.data.options};for(let r=1;r<e.length;r++){const i=e[r];if(i.data.type!==t.data.type)break;if(i.data.origins.join(",")!==t.data.origins.join(","))break;n.ids.push(i.id),n.chainIds.push(...i.data.chainIds)}return n.chainIds=[...new Set(n.chainIds)],n}get waitingPermissionMergedDataForEVM(){const e=this.waitingPermissionDatas.filter((e=>{var t;return!!(null===(t=e.data.options)||void 0===t?void 0:t.isForEVM)}));if(0===e.length)return;const t=e[0],n={ids:[t.id],chainIds:t.data.chainIds,type:t.data.type,origins:t.data.origins,options:t.data.options};for(let r=1;r<e.length;r++){const i=e[r];if(i.data.type!==t.data.type)break;if(i.data.origins.join(",")!==t.data.origins.join(","))break;n.ids.push(i.id),n.chainIds.push(...i.data.chainIds)}return n.chainIds=[...new Set(n.chainIds)],n}get waitingPermissionMergedDataForStarknet(){const e=this.waitingPermissionDatas.filter((e=>{var t;return!!(null===(t=e.data.options)||void 0===t?void 0:t.isForStarknet)}));if(0===e.length)return;const t=e[0],n={ids:[t.id],chainIds:t.data.chainIds,type:t.data.type,origins:t.data.origins,options:t.data.options};for(let r=1;r<e.length;r++){const i=e[r];if(i.data.type!==t.data.type)break;if(i.data.origins.join(",")!==t.data.origins.join(","))break;n.ids.push(i.id),n.chainIds.push(...i.data.chainIds)}return n.chainIds=[...new Set(n.chainIds)],n}get waitingGlobalPermissionData(){if(this.waitingGlobalPermissionDatas.length>0)return this.waitingGlobalPermissionDatas[0]}get waitingGlobalPermissionDatas(){return this.interactionStore.getAllData(s.INTERACTION_TYPE_GLOBAL_PERMISSION)}approvePermissionWithProceedNext(e,t,n){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,n,t),yield this.permissionManagerStore.syncPermissionsFromBackground()}))}rejectPermissionWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNextV2(e,t)}))}rejectPermissionAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll(s.INTERACTION_TYPE_PERMISSION)}))}approveGlobalPermissionWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{},t),yield this.permissionManagerStore.syncPermissionsFromBackground()}))}rejectGlobalPermissionWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNextV2(e,t)}))}rejectGlobalPermissionAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll(s.INTERACTION_TYPE_GLOBAL_PERMISSION)}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}getOriginPermittedChains(e,t){return i(this,void 0,void 0,(function*(){return yield this.requester.sendMessage(o.BACKGROUND_PORT,new s.GetOriginPermittedChainsMsg(e,t))}))}}r([a.computed],c.prototype,"waitingPermissionMergedData",null),r([a.computed],c.prototype,"waitingPermissionMergedDataForEVM",null),r([a.computed],c.prototype,"waitingPermissionMergedDataForStarknet",null),t.PermissionStore=c},76942:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignInteractionStore=void 0;const s=n(80075),o=n(94531);class a{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-cosmos").map((e=>{const t="amino"===e.data.mode?o.SignDocWrapper.fromAminoSignDoc(e.data.signDoc):e.data.isDirectAux?o.SignDocWrapper.fromDirectAuxSignDocBytes(e.data.signDocBytes):o.SignDocWrapper.fromDirectSignDocBytes(e.data.signDocBytes);return{id:e.id,type:e.type,isInternal:e.isInternal,data:Object.assign(Object.assign({},e.data),{signDocWrapper:t})}}))}get waitingData(){const e=this.waitingDatas;if(0===e.length)return;const t=e[0],n="amino"===t.data.mode?o.SignDocWrapper.fromAminoSignDoc(t.data.signDoc):t.data.isDirectAux?o.SignDocWrapper.fromDirectAuxSignDocBytes(t.data.signDocBytes):o.SignDocWrapper.fromDirectSignDocBytes(t.data.signDocBytes);return{id:t.id,type:t.type,isInternal:t.isInternal,data:Object.assign(Object.assign({},t.data),{signDocWrapper:n})}}approveWithProceedNext(e,t,n,r,s={}){return i(this,void 0,void 0,(function*(){const i="amino"===t.mode?{newSignDoc:t.aminoSignDoc}:{newSignDocBytes:t.protoSignDoc.toBytes()};yield this.interactionStore.approveWithProceedNextV2(e,Object.assign(Object.assign({},i),{signature:n}),r,s)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-cosmos")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],a.prototype,"waitingDatas",null),r([s.computed],a.prototype,"waitingData",null),t.SignInteractionStore=a},28001:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignStarknetMessageInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-starknet-message")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t,n,r,s={}){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{message:t,signature:n},r,s)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-starknet-message")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.SignStarknetMessageInteractionStore=o},79499:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignStarknetTxInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-starknet-tx")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t,n,r,s,o={}){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{transactions:t,details:n,signature:r},s,o)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-starknet-tx")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.SignStarknetTxInteractionStore=o},35263:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyRingStore=void 0;const s=n(47722),o=n(80075),a=n(89642),c=n(33783),u=n(94531);class d{constructor(e,t){this.eventDispatcher=e,this.requester=t,this._isInitialized=!1,this._status="not-loaded",this._needMigration=!1,this._isMigrating=!1,this._keyInfos=[],(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){yield this.refreshKeyRingStatus(),(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get needMigration(){return this._needMigration}get isMigrating(){return this._isMigrating}get isInitialized(){return this._isInitialized}waitUntilInitialized(){return i(this,void 0,void 0,(function*(){if(!this.isInitialized)return new Promise((e=>{const t=(0,o.autorun)((()=>{this.isInitialized&&(e(),t&&t())}))}))}))}get status(){return this._status}get keyInfos(){return this._keyInfos}fetchKeyRingStatus(){return i(this,void 0,void 0,(function*(){const e=new c.GetKeyRingStatusOnlyMsg;return(yield this.requester.sendMessage(s.BACKGROUND_PORT,e)).status}))}get selectedKeyInfo(){return this._keyInfos.find((e=>e.isSelected))}get isEmpty(){return"empty"===this._status}*refreshKeyRingStatus(){const e=new c.GetKeyRingStatusMsg,t=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,e));this._status=t.status,this._keyInfos=t.keyInfos,this._needMigration=t.needMigration,this._isMigrating=t.isMigrating}*selectKeyRing(e){const t=new c.SelectKeyRingMsg(e),n=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,t));this._status=n.status,this._keyInfos=n.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}needKeyCoinTypeFinalize(e,t){const n=this.keyInfos.find((t=>t.id===e));if(!n)return!1;if("mnemonic"!==n.type&&"keystone"!==n.type)return!1;const r=`keyRing-${u.ChainIdHelper.parse(t.chainId).identifier}-coinType`;return null==n.insensitive[r]}computeNotFinalizedKeyAddresses(e,t){return i(this,void 0,void 0,(function*(){const n=new c.ComputeNotFinalizedKeyAddressesMsg(e,t);return yield this.requester.sendMessage(s.BACKGROUND_PORT,n)}))}showKeyRing(e,t){return i(this,void 0,void 0,(function*(){const n=new c.ShowSensitiveKeyRingDataMsg(e,t);return yield this.requester.sendMessage(s.BACKGROUND_PORT,n)}))}*finalizeKeyCoinType(e,t,n){const r=new c.FinalizeKeyCoinTypeMsg(e,t,n),i=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,r));this._status=i.status,this._keyInfos=i.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}*newMnemonicKey(e,t,n,r,i){const o=new c.NewMnemonicKeyMsg(e,t,n,r,i),u=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,o));return this._status=u.status,this._keyInfos=u.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange"),u.vaultId}*newLedgerKey(e,t,n,r,i){const o=new c.NewLedgerKeyMsg(e,t,n,r,i),u=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,o));return this._status=u.status,this._keyInfos=u.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange"),u.vaultId}*appendLedgerKeyApp(e,t,n){const r=new c.AppendLedgerKeyAppMsg(e,t,n),i=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,r));this._status=i.status,this._keyInfos=i.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}*newKeystoneKey(e,t,n){const r=new c.NewKeystoneKeyMsg(e,t,n),i=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,r));return this._status=i.status,this._keyInfos=i.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange"),i.vaultId}*newPrivateKeyKey(e,t,n,r){const i=new c.NewPrivateKeyKeyMsg(e,t,n,r),o=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,i));return this._status=o.status,this._keyInfos=o.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange"),o.vaultId}*lock(){const e=new c.LockKeyRingMsg,t=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,e));this._status=t.status}*unlock(e){this._needMigration&&(this._isMigrating=!0);try{const t=new c.UnlockKeyRingMsg(e),n=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,t));this._status=n.status,this._keyInfos=n.keyInfos,this._needMigration=!1}finally{this._isMigrating=!1}}*unlockWithoutSyncStatus(e){this._needMigration&&(this._isMigrating=!0);try{const t=new c.UnlockKeyRingMsg(e),n=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,t));this._keyInfos=n.keyInfos,this._needMigration=!1}finally{this._isMigrating=!1}}*changeKeyRingName(e,t){const n=new c.ChangeKeyRingNameMsg(e,t),r=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,n));this._status=r.status,this._keyInfos=r.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}*deleteKeyRing(e,t){const n=new c.DeleteKeyRingMsg(e,t),r=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,n));this._status=r.status,this._keyInfos=r.keyInfos,r.wasSelected&&"unlocked"===r.status&&this.eventDispatcher.dispatchEvent("keplr_keystorechange")}changeUserPassword(e,t){return i(this,void 0,void 0,(function*(){const n=new c.ChangeUserPasswordMsg(e,t);return yield this.requester.sendMessage(s.BACKGROUND_PORT,n)}))}checkLegacyKeyRingPassword(e){return i(this,void 0,void 0,(function*(){const t=new c.CheckLegacyKeyRingPasswordMsg(e);return yield this.requester.sendMessage(s.BACKGROUND_PORT,t)}))}checkPassword(e){return i(this,void 0,void 0,(function*(){const t=new c.CheckPasswordMsg(e);return yield this.requester.sendMessage(s.BACKGROUND_PORT,t)}))}searchKeyRings(e){return i(this,void 0,void 0,(function*(){const t=new c.SearchKeyRingsMsg(e);return yield this.requester.sendMessage(s.BACKGROUND_PORT,t)}))}}r([o.observable],d.prototype,"_isInitialized",void 0),r([o.observable],d.prototype,"_status",void 0),r([o.observable],d.prototype,"_needMigration",void 0),r([o.observable],d.prototype,"_isMigrating",void 0),r([o.observable.ref],d.prototype,"_keyInfos",void 0),r([o.computed],d.prototype,"selectedKeyInfo",null),r([o.flow],d.prototype,"refreshKeyRingStatus",null),r([o.flow],d.prototype,"selectKeyRing",null),r([o.flow],d.prototype,"finalizeKeyCoinType",null),r([o.flow],d.prototype,"newMnemonicKey",null),r([o.flow],d.prototype,"newLedgerKey",null),r([o.flow],d.prototype,"appendLedgerKeyApp",null),r([o.flow],d.prototype,"newKeystoneKey",null),r([o.flow],d.prototype,"newPrivateKeyKey",null),r([o.flow],d.prototype,"lock",null),r([o.flow],d.prototype,"unlock",null),r([o.flow],d.prototype,"unlockWithoutSyncStatus",null),r([o.flow],d.prototype,"changeKeyRingName",null),r([o.flow],d.prototype,"deleteKeyRing",null),t.KeyRingStore=d},15915:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionManagerStore=void 0;const s=n(47722),o=n(80075),a=n(33783),c=n(94531);class u{constructor(e){this.requester=e,this._isInitialized=!1,this._permissionData={},(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e=new a.GetAllPermissionDataPerOriginMsg,t=yield this.requester.sendMessage(s.BACKGROUND_PORT,e);(0,o.runInAction)((()=>{this._permissionData=t})),(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}get permissionData(){const e={};for(const[t,n]of Object.entries(this._permissionData))n&&(n.permissions.length>0||n.globalPermissions.length>0)&&(e[t]=n);return e}syncPermissionsFromBackground(){return i(this,void 0,void 0,(function*(){const e=new a.GetAllPermissionDataPerOriginMsg,t=yield this.requester.sendMessage(s.BACKGROUND_PORT,e);(0,o.runInAction)((()=>{this._permissionData=t}))}))}clearAllPermissions(){return i(this,void 0,void 0,(function*(){(0,o.runInAction)((()=>{this._permissionData={}}));const e=new a.ClearAllPermissionsMsg;yield this.requester.sendMessage(s.BACKGROUND_PORT,e)}))}clearOrigin(e){return i(this,void 0,void 0,(function*(){if(this._permissionData[e]){(0,o.runInAction)((()=>{delete this._permissionData[e]}));const t=new a.ClearOriginPermissionMsg(e);yield this.requester.sendMessage(s.BACKGROUND_PORT,t)}}))}removePermission(e,t,n){return i(this,void 0,void 0,(function*(){const r=c.ChainIdHelper.parse(t).identifier,i=this._permissionData[e],u=i?i.permissions.findIndex((e=>e.chainIdentifier===r&&e.type===n)):-1;if(u>=0&&i){(0,o.runInAction)((()=>{i.permissions.splice(u,1)}));const r=new a.RemovePermissionOrigin(t,n,e);yield this.requester.sendMessage(s.BACKGROUND_PORT,r)}}))}removeGlobalPermission(e,t){return i(this,void 0,void 0,(function*(){const n=this._permissionData[e],r=n?n.globalPermissions.findIndex((e=>e.type===t)):-1;if(r>=0&&n){(0,o.runInAction)((()=>{n.globalPermissions.splice(r,1)}));const i=new a.RemoveGlobalPermissionOriginMsg(t,e);yield this.requester.sendMessage(s.BACKGROUND_PORT,i)}}))}}r([o.observable],u.prototype,"_isInitialized",void 0),r([o.observable],u.prototype,"_permissionData",void 0),r([o.computed],u.prototype,"permissionData",null),t.PermissionManagerStore=u},73659:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TokensStore=void 0;const s=n(47722),o=n(33783),a=n(80075),c=n(94531),u=n(48834);class d{constructor(e,t,n,r,i,s){this.eventListener=e,this.requester=t,this.chainStore=n,this.accountStore=r,this.keyRingStore=i,this.interactionStore=s,this._isInitialized=!1,this.tokenMap=new Map,this.prevTokenMap=new Map,(0,a.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){yield this.refreshTokens(),this.eventListener.addEventListener("keplr_keystorechange",(()=>{this.clearTokensFromChainInfos(),this.refreshTokens()})),(0,a.autorun)((()=>{this.updateChainInfos()})),(0,a.runInAction)((()=>{this._isInitialized=!0}))}))}refreshTokens(){return i(this,void 0,void 0,(function*(){const e=new o.GetAllTokenInfosMsg,t=new o.GetAllERC20TokenInfosMsg,n=yield this.requester.sendMessage(s.BACKGROUND_PORT,e),r=yield this.requester.sendMessage(s.BACKGROUND_PORT,t);(0,a.runInAction)((()=>{const e=new Map;for(const[t,i]of Object.entries(n).concat(Object.entries(r)))i&&e.set(t,i);this.tokenMap=e}))}))}clearTokensFromChainInfos(){var e,t;const n=this.chainStore.chainInfos;for(const t of n){const n=c.ChainIdHelper.parse(t.chainId),r=null!==(e=this.prevTokenMap.get(n.identifier))&&void 0!==e?e:[];t.removeCurrencies(...r.map((e=>e.currency.coinMinimalDenom)))}const r=this.chainStore.modularChainInfoImpls;for(const e of r){const n=c.ChainIdHelper.parse(e.chainId),r=null!==(t=this.prevTokenMap.get(n.identifier))&&void 0!==t?t:[];"starknet"in e&&null!=e.starknet&&e.removeCurrencies("starknet",...r.map((e=>e.currency.coinMinimalDenom)))}}updateChainInfos(){var e,t;const n=this.chainStore.modularChainInfoImpls;for(const r of n)if("cosmos"in r.embedded){const t=c.ChainIdHelper.parse(r.chainId),n=null!==(e=this.tokenMap.get(t.identifier))&&void 0!==e?e:[],i=[];for(const e of n)e.associatedAccountAddress?"unlocked"===this.keyRingStore.status&&this.accountStore.getAccount(r.chainId).bech32Address&&u.Buffer.from(c.Bech32Address.fromBech32(this.accountStore.getAccount(r.chainId).bech32Address).address).toString("hex")===e.associatedAccountAddress&&i.push(e.currency):i.push(e.currency);this.chainStore.getChain(r.chainId).addCurrencies(...i)}else if("starknet"in r.embedded&&"starknet"in r.embedded){const e=c.ChainIdHelper.parse(r.chainId),n=null!==(t=this.tokenMap.get(e.identifier))&&void 0!==t?t:[],i=[];for(const e of n)i.push(e.currency);r.addCurrencies("starknet",...i)}this.prevTokenMap=this.tokenMap}get isInitialized(){return this._isInitialized}waitUntilInitialized(){return i(this,void 0,void 0,(function*(){if(!this.isInitialized)return new Promise((e=>{const t=(0,a.autorun)((()=>{this.isInitialized&&(e(),t&&t())}))}))}))}getTokens(e){var t,n;const r=this.accountStore.getAccount(e).bech32Address,i=this.chainStore.getModularChain(e);if("cosmos"in i){const n=this.chainStore.getChain(e),i=null!=n.bech32Config&&r?u.Buffer.from(c.Bech32Address.fromBech32(r,n.bech32Config.bech32PrefixAccAddr).address).toString("hex"):void 0;return(null!==(t=this.tokenMap.get(c.ChainIdHelper.parse(e).identifier))&&void 0!==t?t:[]).filter((e=>!e.associatedAccountAddress||!i||e.associatedAccountAddress===i))}if("starknet"in i)return null!==(n=this.tokenMap.get(e))&&void 0!==n?n:[];throw new Error(`Unsupported chain: ${e}`)}addToken(e,t){return i(this,void 0,void 0,(function*(){const n=this.chainStore.getModularChain(e);if("cosmos"in n){const n=this.accountStore.getAccount(e).bech32Address;if(!n)throw new Error("Account not initialized");const r=this.chainStore.getChain(e),i=null!=r.evm,d=null!=r.bech32Config?u.Buffer.from(c.Bech32Address.fromBech32(n,r.bech32Config.bech32PrefixAccAddr).address).toString("hex"):"",l=i?new o.AddERC20TokenMsg(e,t):new o.AddTokenMsg(e,d,t),h=yield this.requester.sendMessage(s.BACKGROUND_PORT,l);(0,a.runInAction)((()=>{const e=new Map(this.tokenMap),t=c.ChainIdHelper.parse(r.chainId),n=h[t.identifier];n&&e.set(t.identifier,n),this.tokenMap=e}))}else{if(!("starknet"in n))throw new Error(`Unsupported chain: ${e}`);{const r=new o.AddERC20TokenMsg(e,t),i=yield this.requester.sendMessage(s.BACKGROUND_PORT,r);(0,a.runInAction)((()=>{const e=new Map(this.tokenMap),t=c.ChainIdHelper.parse(n.chainId),r=i[t.identifier];r&&e.set(t.identifier,r),this.tokenMap=e}))}}}))}removeToken(e,t){var n;return i(this,void 0,void 0,(function*(){const r=(()=>{if("contractAddress"in t.currency)return t.currency.contractAddress;throw new Error("Token info is not for contract")})(),i=this.chainStore.getModularChain(e);if("cosmos"in i){const i=this.chainStore.getChain(e),u=void 0!==i.evm?new o.RemoveERC20TokenMsg(e,r):new o.RemoveTokenMsg(e,null!==(n=t.associatedAccountAddress)&&void 0!==n?n:"",r),d=yield this.requester.sendMessage(s.BACKGROUND_PORT,u);(0,a.runInAction)((()=>{this.clearTokensFromChainInfos();const e=new Map(this.tokenMap),t=c.ChainIdHelper.parse(i.chainId),n=d[t.identifier];n&&e.set(t.identifier,n),this.tokenMap=e}))}else{if(!("starknet"in i))throw new Error(`Unsupported chain: ${e}`);{const t=new o.RemoveERC20TokenMsg(e,r),n=yield this.requester.sendMessage(s.BACKGROUND_PORT,t);(0,a.runInAction)((()=>{this.clearTokensFromChainInfos();const e=new Map(this.tokenMap),t=c.ChainIdHelper.parse(i.chainId),r=n[t.identifier];r&&e.set(t.identifier,r),this.tokenMap=e}))}}}))}get waitingSuggestedToken(){const e=this.interactionStore.getAllData("suggest-token-cw20");if(e.length>0)return e[0];const t=this.interactionStore.getAllData("suggest-token-erc20");return t.length>0?t[0]:void 0}approveSuggestedTokenWithProceedNext(e,t,n){return i(this,void 0,void 0,(function*(){this.interactionStore.getData(e)&&(yield this.interactionStore.approveWithProceedNext(e,t,n),this.refreshTokens())}))}rejectSuggestedToken(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAllSuggestedTokens(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("suggest-token-cw20"),yield this.interactionStore.rejectAll("suggest-token-erc20")}))}}r([a.observable],d.prototype,"_isInitialized",void 0),r([a.observable.ref],d.prototype,"tokenMap",void 0),r([a.action],d.prototype,"clearTokensFromChainInfos",null),t.TokensStore=d},30935:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(25472),t)},80412:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AxelarEVMBridgeCurrencyRegistrar=void 0;const s=n(80075);class o{constructor(e,t=864e5,n,r,i){this.kvStore=e,this.cacheDuration=t,this.chainStore=n,this.queriesStore=r,this.mainChain=i,this._isInitialized=!1,this.cacheMetadata=new Map,this.chainStore.registerCurrencyRegistrar(this.currencyRegistrar.bind(this)),(0,s.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cacheMetadata",t=yield this.kvStore.get(e);t&&(0,s.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.cacheMetadata.set(e,n)})),(0,s.autorun)((()=>{const t=(0,s.toJS)(this.cacheMetadata),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,s.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}currencyRegistrar(e,t){if(!this.chainStore.hasChain(e))return;const n=this.chainStore.getChain(e);if(!n.features||!n.features.includes("axelar-evm-bridge"))return;const r=`${e}/${t}`,i=this.cacheMetadata.get(r);if(i){if(Date.now()-i.timestamp<this.cacheDuration)return{value:{coinMinimalDenom:t,coinDenom:i.symbol,coinDecimals:i.decimals},done:!0};(0,s.runInAction)((()=>{this.cacheMetadata.delete(r)}))}const o=this.queriesStore.get(e).keplrETC.queryEVMTokenInfo.getAsset(this.mainChain,t);return o.symbol&&null!=o.decimals&&o.isConfirmed?(o.isFetching||(0,s.runInAction)((()=>{this.cacheMetadata.set(r,{symbol:o.symbol,decimals:o.decimals,timestamp:Date.now()})})),{value:{coinMinimalDenom:t,coinDenom:o.symbol,coinDecimals:o.decimals},done:!o.isFetching}):o.isFetching?{value:void 0,done:!1}:{value:void 0,done:!0}}}r([s.observable],o.prototype,"_isInitialized",void 0),r([s.observable.shallow],o.prototype,"cacheMetadata",void 0),t.AxelarEVMBridgeCurrencyRegistrar=o},17966:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(80412),t),i(n(65652),t)},65652:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEVMTokenInfo=t.ObservableQueryEVMTokenInfoInner=void 0;const r=n(11169);class i extends r.ObservableChainQuery{constructor(e,t,n,r,i){super(e,t,n,`/axelar/evm/v1beta1/token_info/${r}?asset=${i}`),this._chain=r,this._denom=i}get chain(){return this._chain}get denom(){return this._denom}get tokenName(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.details.token_name}get symbol(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.details.symbol}get decimals(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.details.decimals}get isConfirmed(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.confirmed}get isExternal(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.is_external}}t.ObservableQueryEVMTokenInfoInner=i;class s extends r.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=e.indexOf("/"),n=e.slice(0,t),r=e.slice(t+1);return new i(this.sharedContext,this.chainId,this.chainGetter,n,r)}))}getAsset(e,t){return this.get(`${e}/${t}`)}}t.ObservableQueryEVMTokenInfo=s},5524:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(45323),t)},45323:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryERC20Metadata=t.ObservableQueryERC20MetadataInner=t.ObservableQueryERC20MetadataDecimals=t.ObservableQueryERC20MetadataSymbol=t.ObservableQueryERC20MetadataName=void 0;const i=n(11169),s=n(19370),o=n(80075),a=new s.Interface([{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"}]);class c extends i.ObservableJsonRPCQuery{constructor(e,t,n){super(e,t,"","eth_call",[{to:n,data:a.encodeFunctionData("name")},"latest"]),(0,o.makeObservable)(this)}get name(){if(this.response)try{return a.decodeFunctionResult("name",this.response.data)[0]}catch(e){console.log(e)}}}r([o.computed],c.prototype,"name",null),t.ObservableQueryERC20MetadataName=c;class u extends i.ObservableJsonRPCQuery{constructor(e,t,n){super(e,t,"","eth_call",[{to:n,data:a.encodeFunctionData("symbol")},"latest"]),(0,o.makeObservable)(this)}get symbol(){if(this.response)try{return a.decodeFunctionResult("symbol",this.response.data)[0]}catch(e){console.log(e)}}}r([o.computed],u.prototype,"symbol",null),t.ObservableQueryERC20MetadataSymbol=u;class d extends i.ObservableJsonRPCQuery{constructor(e,t,n){super(e,t,"","eth_call",[{to:n,data:a.encodeFunctionData("decimals")},"latest"]),(0,o.makeObservable)(this)}get decimals(){if(this.response)try{return a.decodeFunctionResult("decimals",this.response.data)[0]}catch(e){console.log(e)}}}r([o.computed],d.prototype,"decimals",null),t.ObservableQueryERC20MetadataDecimals=d;class l{constructor(e,t,n){this.sharedContext=e,this._queryName=new c(e,t,n),this._querySymbol=new u(e,t,n),this._queryDecimals=new d(e,t,n)}get queryName(){return this._queryName}get querySymbol(){return this._querySymbol}get queryDecimals(){return this._queryDecimals}get symbol(){return this._querySymbol.symbol}get name(){return this._queryName.name}get decimals(){return this._queryDecimals.decimals}}t.ObservableQueryERC20MetadataInner=l;class h extends i.HasMapStore{constructor(e,t){super((e=>new l(this.sharedContext,this.ethereumURL,e))),this.sharedContext=e,this.ethereumURL=t}get(e){return super.get(e)}}t.ObservableQueryERC20Metadata=h},51292:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GravityBridgeCurrencyRegistrar=void 0;const s=n(89642),o=n(80075);class a{constructor(e,t=864e5,n,r){this.kvStore=e,this.cacheDuration=t,this.chainStore=n,this.queriesStore=r,this._isInitialized=!1,this.cacheERC20Metadata=new Map,this.chainStore.registerCurrencyRegistrar(this.currencyRegistrar.bind(this)),(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cacheERC20Metadata",t=yield this.kvStore.get(e);t&&(0,o.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.cacheERC20Metadata.set(e,n)})),(0,o.autorun)((()=>{const t=(0,o.toJS)(this.cacheERC20Metadata),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}currencyRegistrar(e,t){if(!this.chainStore.hasChain(e))return;const n=new s.DenomHelper(t);if("native"!==n.type||!n.denom.startsWith("gravity0x"))return;const r=this.queriesStore.get(e),i=n.denom.replace("gravity",""),a=this.cacheERC20Metadata.get(i);if(a){if(Date.now()-a.timestamp<this.cacheDuration)return{value:{coinMinimalDenom:n.denom,coinDenom:a.symbol,coinDecimals:a.decimals},done:!0};(0,o.runInAction)((()=>{this.cacheERC20Metadata.delete(i)}))}const c=r.keplrETC.queryERC20Metadata.get(i);return c.symbol&&null!=c.decimals?(c.querySymbol.isFetching||c.queryDecimals.isFetching||(0,o.runInAction)((()=>{this.cacheERC20Metadata.set(i,{symbol:c.symbol,decimals:c.decimals,timestamp:Date.now()})})),{value:{coinMinimalDenom:n.denom,coinDenom:c.symbol,coinDecimals:c.decimals},done:!c.querySymbol.isFetching&&!c.queryDecimals.isFetching}):c.querySymbol.isFetching||c.queryDecimals.isFetching?{value:void 0,done:!1}:{value:void 0,done:!0}}}r([o.observable],a.prototype,"_isInitialized",void 0),r([o.observable.shallow],a.prototype,"cacheERC20Metadata",void 0),t.GravityBridgeCurrencyRegistrar=a},82510:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(51292),t)},4136:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(14036),t),i(n(5524),t),i(n(82510),t),i(n(17966),t),i(n(20079),t)},14036:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeplrETCQueriesImpl=t.KeplrETCQueries=void 0;const r=n(5524),i=n(17966),s=n(20079);t.KeplrETCQueries={use:e=>(t,n,r,i)=>({keplrETC:new o(t,n,r,i,e.ethereumURL)})};class o{constructor(e,t,n,o,a){this.queryERC20Metadata=new r.ObservableQueryERC20Metadata(t,a),this.queryEVMTokenInfo=new i.ObservableQueryEVMTokenInfo(t,n,o),this.queryTerraClassicTaxRate=new s.ObservableQueryTaxRate(t,n,o),this.queryTerraClassicTaxCaps=new s.ObservableQueryTaxCaps(t,n,o)}}t.KeplrETCQueriesImpl=o},20079:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(32655),t)},32655:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTaxRate=t.ObservableQueryTaxCaps=void 0;const i=n(11169),s=n(80075),o=n(19731),a=n(58242);class c extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/terra/treasury/v1beta1/tax_caps"),this.getTaxCaps=(0,a.computedFn)((e=>{if(!this.response||!this.response.data.tax_caps)return;const t=this.response.data.tax_caps.find((t=>t.denom===e));return t?new o.Int(t.tax_cap):void 0})),(0,s.makeObservable)(this)}}t.ObservableQueryTaxCaps=c;class u extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/terra/treasury/v1beta1/tax_rate"),(0,s.makeObservable)(this)}get taxRate(){if(this.response)return new o.RatePretty(this.response.data.tax_rate)}}r([s.computed],u.prototype,"taxRate",null),t.ObservableQueryTaxRate=u},19370:(e,t,n)=>{n.r(t),n.d(t,{AbiCoder:()=>nt,ConstructorFragment:()=>oe,ErrorFragment:()=>ue,EventFragment:()=>ne,FormatTypes:()=>X,Fragment:()=>te,FunctionFragment:()=>ae,Indexed:()=>ut,Interface:()=>ht,LogDescription:()=>ot,ParamType:()=>Y,TransactionDescription:()=>at,checkResultErrors:()=>ge,defaultAbiCoder:()=>rt});var r=n(62197),i=n.n(r);let s=!1,o=!1;const a={debug:1,default:2,info:2,warning:3,error:4,off:5};let c=a.default,u=null;const d=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(n){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var l,h;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(l||(l={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(h||(h={}));const p="0123456789abcdef";class f{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();null==a[n]&&this.throwArgumentError("invalid log level name","logLevel",e),c>a[n]||console.log.apply(console,t)}debug(...e){this._log(f.levels.DEBUG,e)}info(...e){this._log(f.levels.INFO,e)}warn(...e){this._log(f.levels.WARNING,e)}makeError(e,t,n){if(o)return this.makeError("censored error",t,{});t||(t=f.errors.UNKNOWN_ERROR),n||(n={});const r=[];Object.keys(n).forEach((e=>{const t=n[e];try{if(t instanceof Uint8Array){let n="";for(let e=0;e<t.length;e++)n+=p[t[e]>>4],n+=p[15&t[e]];r.push(e+"=Uint8Array(0x"+n+")")}else r.push(e+"="+JSON.stringify(t))}catch(t){r.push(e+"="+JSON.stringify(n[e].toString()))}})),r.push(`code=${t}`),r.push(`version=${this.version}`);const i=e;let s="";switch(t){case h.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case h.CALL_EXCEPTION:case h.INSUFFICIENT_FUNDS:case h.MISSING_NEW:case h.NONCE_EXPIRED:case h.REPLACEMENT_UNDERPRICED:case h.TRANSACTION_REPLACED:case h.UNPREDICTABLE_GAS_LIMIT:s=t}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),r.length&&(e+=" ("+r.join(", ")+")");const a=new Error(e);return a.reason=i,a.code=t,Object.keys(n).forEach((function(e){a[e]=n[e]})),a}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,f.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,r){e||this.throwError(t,n,r)}assertArgument(e,t,n,r){e||this.throwArgumentError(t,n,r)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),d&&this.throwError("platform missing String.prototype.normalize",f.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:d})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,f.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,f.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n=n?": "+n:"",e<t&&this.throwError("missing argument"+n,f.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,f.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",f.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",f.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",f.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return u||(u=new f("logger/5.6.0")),u}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",f.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),s){if(!e)return;this.globalLogger().throwError("error censorship permanent",f.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}o=!!e,s=!!t}static setLogLevel(e){const t=a[e.toLowerCase()];null!=t?c=t:f.globalLogger().warn("invalid log level - "+e)}static from(e){return new f(e)}}f.errors=h,f.levels=l;const g=new f("bytes/5.6.1");function y(e){return!!e.toHexString}function m(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return m(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function v(e){return"number"==typeof e&&e==e&&e%1==0}function b(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!v(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const n=e[t];if(!v(n)||n<0||n>=256)return!1}return!0}function w(e,t){if(t||(t={}),"number"==typeof e){g.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),m(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),y(e)&&(e=e.toHexString()),C(e)){let n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":g.throwArgumentError("hex data is odd-length","value",e));const r=[];for(let e=0;e<n.length;e+=2)r.push(parseInt(n.substring(e,e+2),16));return m(new Uint8Array(r))}return b(e)?m(new Uint8Array(e)):g.throwArgumentError("invalid arrayify value","value",e)}function _(e){const t=e.map((e=>w(e))),n=t.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(n);return t.reduce(((e,t)=>(r.set(t,e),e+t.length)),0),m(r)}function C(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const O="0123456789abcdef";function I(e,t){if(t||(t={}),"number"==typeof e){g.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=O[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),y(e))return e.toHexString();if(C(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":g.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(b(e)){let t="0x";for(let n=0;n<e.length;n++){let r=e[n];t+=O[(240&r)>>4]+O[15&r]}return t}return g.throwArgumentError("invalid hexlify value","value",e)}function S(e,t){for("string"!=typeof e?e=I(e):C(e)||g.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&g.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}var k=i().BN;const M=new f("bignumber/5.6.0"),P={},A=9007199254740991;let R=!1;class x{constructor(e,t){M.checkNew(new.target,x),e!==P&&M.throwError("cannot call constructor directly; use BigNumber.from",f.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return D(T(this).fromTwos(e))}toTwos(e){return D(T(this).toTwos(e))}abs(){return"-"===this._hex[0]?x.from(this._hex.substring(1)):this}add(e){return D(T(this).add(T(e)))}sub(e){return D(T(this).sub(T(e)))}div(e){return x.from(e).isZero()&&j("division-by-zero","div"),D(T(this).div(T(e)))}mul(e){return D(T(this).mul(T(e)))}mod(e){const t=T(e);return t.isNeg()&&j("division-by-zero","mod"),D(T(this).umod(t))}pow(e){const t=T(e);return t.isNeg()&&j("negative-power","pow"),D(T(this).pow(t))}and(e){const t=T(e);return(this.isNegative()||t.isNeg())&&j("unbound-bitwise-result","and"),D(T(this).and(t))}or(e){const t=T(e);return(this.isNegative()||t.isNeg())&&j("unbound-bitwise-result","or"),D(T(this).or(t))}xor(e){const t=T(e);return(this.isNegative()||t.isNeg())&&j("unbound-bitwise-result","xor"),D(T(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&j("negative-width","mask"),D(T(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&j("negative-width","shl"),D(T(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&j("negative-width","shr"),D(T(this).shrn(e))}eq(e){return T(this).eq(T(e))}lt(e){return T(this).lt(T(e))}lte(e){return T(this).lte(T(e))}gt(e){return T(this).gt(T(e))}gte(e){return T(this).gte(T(e))}isNegative(){return"-"===this._hex[0]}isZero(){return T(this).isZero()}toNumber(){try{return T(this).toNumber()}catch(e){j("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return M.throwError("this platform does not support BigInt",f.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?R||(R=!0,M.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?M.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",f.errors.UNEXPECTED_ARGUMENT,{}):M.throwError("BigNumber.toString does not accept parameters",f.errors.UNEXPECTED_ARGUMENT,{})),T(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof x)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new x(P,E(e)):e.match(/^-?[0-9]+$/)?new x(P,E(new k(e))):M.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&j("underflow","BigNumber.from",e),(e>=A||e<=-A)&&j("overflow","BigNumber.from",e),x.from(String(e));const t=e;if("bigint"==typeof t)return x.from(t.toString());if(b(t))return x.from(I(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return x.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(C(e)||"-"===e[0]&&C(e.substring(1))))return x.from(e)}return M.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function E(e){if("string"!=typeof e)return E(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&M.throwArgumentError("invalid hex","value",e),"0x00"===(e=E(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function D(e){return x.from(E(e))}function T(e){const t=x.from(e).toHexString();return"-"===t[0]?new k("-"+t.substring(3),16):new k(t.substring(2),16)}function j(e,t,n){const r={fault:e,operation:t};return null!=n&&(r.value=n),M.throwError(e,f.errors.NUMERIC_FAULT,r)}const N=new f("properties/5.6.0");function B(e,t,n){Object.defineProperty(e,t,{enumerable:!0,value:n,writable:!1})}function U(e,t){for(let n=0;n<32;n++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}const F={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function q(e){if(null==e||F[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let n=0;n<t.length;n++){let r=null;try{r=e[t[n]]}catch(e){continue}if(!q(r))return!1}return!0}return N.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Q(e){if(q(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>G(e))));if("object"==typeof e){const t={};for(const n in e){const r=e[n];void 0!==r&&B(t,n,G(r))}return t}return N.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function G(e){return Q(e)}class K{constructor(e){for(const t in e)this[t]=G(e[t])}}const H="abi/5.6.0",L=new f(H),V={};let W={calldata:!0,memory:!0,storage:!0},$={calldata:!0,memory:!0};function J(e,t){if("bytes"===e||"string"===e){if(W[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&$[t])return!0;return(W[t]||"payable"===t)&&L.throwArgumentError("invalid modifier","name",t),!1}function z(e,t){for(let n in t)B(e,n,t[n])}const X=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Z=new RegExp(/^(.*)\[([0-9]*)\]$/);class Y{constructor(e,t){e!==V&&L.throwError("use fromString",f.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),z(this,t);let n=this.type.match(Z);z(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Y.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=X.sighash),X[e]||L.throwArgumentError("invalid format type","format",e),e===X.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==X.sighash&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join(e===X.full?", ":",")+")"):t+=this.type,e!==X.sighash&&(!0===this.indexed&&(t+=" indexed"),e===X.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?Y.fromString(e,t):Y.fromObject(e)}static fromObject(e){return Y.isParamType(e)?e:new Y(V,{name:e.name||null,type:de(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(Y.fromObject):null})}static fromString(e,t){return n=function(e,t){let n=e;function r(t){L.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let n={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(n.indexed=!1),n}e=e.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},o=s;for(let n=0;n<e.length;n++){let s=e[n];switch(s){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||r(n),o.state.allowType=!1,o.type=de(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(t||r(n),o.indexed=!0,o.name=""),J(o.type,o.name)&&(o.name=""),o.type=de(o.type);let e=o;o=o.parent,o||r(n),delete e.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(t||r(n),o.indexed=!0,o.name=""),J(o.type,o.name)&&(o.name=""),o.type=de(o.type);let a=i(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=de(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(t||r(n),o.indexed&&r(n),o.indexed=!0,o.name=""):J(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(n),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(n),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:r(n)}}return o.parent&&L.throwArgumentError("unexpected eof","param",e),delete s.state,"indexed"===o.name?(t||r(n.length-7),o.indexed&&r(n.length-7),o.indexed=!0,o.name=""):J(o.type,o.name)&&(o.name=""),s.type=de(s.type),s}(e,!!t),Y.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n}static isParamType(e){return!(null==e||!e._isParamType)}}function ee(e,t){return function(e){e=e.trim();let t=[],n="",r=0;for(let i=0;i<e.length;i++){let s=e[i];","===s&&0===r?(t.push(n),n=""):(n+=s,"("===s?r++:")"===s&&(r--,-1===r&&L.throwArgumentError("unbalanced parenthesis","value",e)))}return n&&t.push(n),t}(e).map((e=>Y.fromString(e,t)))}class te{constructor(e,t){e!==V&&L.throwError("use a static from method",f.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),z(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return te.isFragment(e)?e:"string"==typeof e?te.fromString(e):te.fromObject(e)}static fromObject(e){if(te.isFragment(e))return e;switch(e.type){case"function":return ae.fromObject(e);case"event":return ne.fromObject(e);case"constructor":return oe.fromObject(e);case"error":return ue.fromObject(e);case"fallback":case"receive":return null}return L.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?ne.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?ae.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?oe.fromString(e.trim()):"error"===e.split(" ")[0]?ue.fromString(e.substring(5).trim()):L.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class ne extends te{format(e){if(e||(e=X.sighash),X[e]||L.throwArgumentError("invalid format type","format",e),e===X.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==X.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===X.full?", ":",")+") ",e!==X.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?ne.fromString(e):ne.fromObject(e)}static fromObject(e){if(ne.isEventFragment(e))return e;"event"!==e.type&&L.throwArgumentError("invalid event object","value",e);const t={name:he(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Y.fromObject):[],type:"event"};return new ne(V,t)}static fromString(e){let t=e.match(pe);t||L.throwArgumentError("invalid event string","value",e);let n=!1;return t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":n=!0;break;case"":break;default:L.warn("unknown modifier: "+e)}})),ne.fromObject({name:t[1].trim(),anonymous:n,inputs:ee(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function re(e,t){t.gas=null;let n=e.split("@");return 1!==n.length?(n.length>2&&L.throwArgumentError("invalid human-readable ABI signature","value",e),n[1].match(/^[0-9]+$/)||L.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=x.from(n[1]),n[0]):e}function ie(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function se(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&L.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&L.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||L.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&L.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&L.throwArgumentError("unable to determine stateMutability","value",e),t}class oe extends te{format(e){if(e||(e=X.sighash),X[e]||L.throwArgumentError("invalid format type","format",e),e===X.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});e===X.sighash&&L.throwError("cannot format a constructor for sighash",f.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===X.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?oe.fromString(e):oe.fromObject(e)}static fromObject(e){if(oe.isConstructorFragment(e))return e;"constructor"!==e.type&&L.throwArgumentError("invalid constructor object","value",e);let t=se(e);t.constant&&L.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Y.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?x.from(e.gas):null};return new oe(V,n)}static fromString(e){let t={type:"constructor"},n=(e=re(e,t)).match(pe);return n&&"constructor"===n[1].trim()||L.throwArgumentError("invalid constructor string","value",e),t.inputs=ee(n[2].trim(),!1),ie(n[3].trim(),t),oe.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class ae extends oe{format(e){if(e||(e=X.sighash),X[e]||L.throwArgumentError("invalid format type","format",e),e===X.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==X.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===X.full?", ":",")+") ",e!==X.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?ae.fromString(e):ae.fromObject(e)}static fromObject(e){if(ae.isFunctionFragment(e))return e;"function"!==e.type&&L.throwArgumentError("invalid function object","value",e);let t=se(e);const n={type:e.type,name:he(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Y.fromObject):[],outputs:e.outputs?e.outputs.map(Y.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?x.from(e.gas):null};return new ae(V,n)}static fromString(e){let t={type:"function"},n=(e=re(e,t)).split(" returns ");n.length>2&&L.throwArgumentError("invalid function string","value",e);let r=n[0].match(pe);if(r||L.throwArgumentError("invalid function signature","value",e),t.name=r[1].trim(),t.name&&he(t.name),t.inputs=ee(r[2],!1),ie(r[3].trim(),t),n.length>1){let r=n[1].match(pe);""==r[1].trim()&&""==r[3].trim()||L.throwArgumentError("unexpected tokens","value",e),t.outputs=ee(r[2],!1)}else t.outputs=[];return ae.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function ce(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||L.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class ue extends te{format(e){if(e||(e=X.sighash),X[e]||L.throwArgumentError("invalid format type","format",e),e===X.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==X.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===X.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?ue.fromString(e):ue.fromObject(e)}static fromObject(e){if(ue.isErrorFragment(e))return e;"error"!==e.type&&L.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:he(e.name),inputs:e.inputs?e.inputs.map(Y.fromObject):[]};return ce(new ue(V,t))}static fromString(e){let t={type:"error"},n=e.match(pe);return n||L.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&he(t.name),t.inputs=ee(n[2],!1),ce(ue.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function de(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const le=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function he(e){return e&&e.match(le)||L.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const pe=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),fe=new f(H);function ge(e){const t=[],n=function(e,r){if(Array.isArray(r))for(let i in r){const s=e.slice();s.push(i);try{n(s,r[i])}catch(e){t.push({path:s,error:e})}}};return n([],e),t}class ye{constructor(e,t,n,r){this.name=e,this.type=t,this.localName=n,this.dynamic=r}_throwError(e,t){fe.throwArgumentError(e,this.localName,t)}}class me{constructor(e){B(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return function(e){let t="0x";return e.forEach((e=>{t+=I(e).substring(2)})),t}(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(_(e._data))}writeBytes(e){let t=w(e);const n=t.length%this.wordSize;return n&&(t=_([t,this._padding.slice(n)])),this._writeData(t)}_getValue(e){let t=w(x.from(e));return t.length>this.wordSize&&fe.throwError("value out-of-bounds",f.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=_([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class ve{constructor(e,t,n,r){B(this,"_data",w(e)),B(this,"wordSize",t||32),B(this,"_coerceFunc",n),B(this,"allowLoose",r),this._offset=0}get data(){return I(this._data)}get consumed(){return this._offset}static coerce(e,t){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):ve.coerce(e,t)}_peekBytes(e,t,n){let r=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+r>this._data.length&&(this.allowLoose&&n&&this._offset+t<=this._data.length?r=t:fe.throwError("data out-of-bounds",f.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+r})),this._data.slice(this._offset,this._offset+r)}subReader(e){return new ve(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let n=this._peekBytes(0,e,!!t);return this._offset+=n.length,n.slice(0,e)}readValue(){return x.from(this.readBytes(this.wordSize))}}var be=n(83669),we=n.n(be);function _e(e){return"0x"+we().keccak_256(w(e))}const Ce=new f("address/5.6.0");function Oe(e){C(e,20)||Ce.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let e=0;e<40;e++)n[e]=t[e].charCodeAt(0);const r=w(_e(n));for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&r[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Ie={};for(let e=0;e<10;e++)Ie[String(e)]=String(e);for(let e=0;e<26;e++)Ie[String.fromCharCode(65+e)]=String(10+e);const Se=Math.floor((ke=9007199254740991,Math.log10?Math.log10(ke):Math.log(ke)/Math.LN10));var ke;function Me(e){let t=null;if("string"!=typeof e&&Ce.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Oe(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Ce.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>Ie[e])).join("");for(;t.length>=Se;){let e=t.substring(0,Se);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}(e)&&Ce.throwArgumentError("bad icap checksum","address",e),n=e.substring(4),t=new k(n,36).toString(16);t.length<40;)t="0"+t;t=Oe("0x"+t)}else Ce.throwArgumentError("invalid address","address",e);var n;return t}class Pe extends ye{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Me(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Me(S(e.readValue().toHexString(),20))}}class Ae extends ye{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Re=new f(H);function xe(e,t,n){let r=null;if(Array.isArray(n))r=n;else if(n&&"object"==typeof n){let e={};r=t.map((t=>{const r=t.localName;return r||Re.throwError("cannot encode object for signature with missing names",f.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),e[r]&&Re.throwError("cannot encode object for signature with duplicate names",f.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),e[r]=!0,n[r]}))}else Re.throwArgumentError("invalid tuple value","tuple",n);t.length!==r.length&&Re.throwArgumentError("types/value length mismatch","tuple",n);let i=new me(e.wordSize),s=new me(e.wordSize),o=[];t.forEach(((e,t)=>{let n=r[t];if(e.dynamic){let t=s.length;e.encode(s,n);let r=i.writeUpdatableValue();o.push((e=>{r(e+t)}))}else e.encode(i,n)})),o.forEach((e=>{e(i.length)}));let a=e.appendWriter(i);return a+=e.appendWriter(s),a}function Ee(e,t){let n=[],r=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readValue(),s=r.subReader(n.toNumber());try{i=t.decode(s)}catch(e){if(e.code===f.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===f.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&n.push(i)}));const i=t.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});t.forEach(((e,t)=>{let r=e.localName;if(!r||1!==i[r])return;if("length"===r&&(r="_length"),null!=n[r])return;const s=n[t];s instanceof Error?Object.defineProperty(n,r,{enumerable:!0,get:()=>{throw s}}):n[r]=s}));for(let e=0;e<n.length;e++){const t=n[e];t instanceof Error&&Object.defineProperty(n,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(n)}class De extends ye{constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let n=this.length;-1===n&&(n=t.length,e.writeValue(t.length)),Re.checkArgumentCount(t.length,n,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let e=0;e<t.length;e++)r.push(this.coder);return xe(e,r,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&Re.throwError("insufficient data length",f.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let n=[];for(let e=0;e<t;e++)n.push(new Ae(this.coder));return e.coerce(this.name,Ee(e,n))}}class Te extends ye{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class je extends ye{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=w(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Ne extends je{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,I(super.decode(e)))}}class Be extends ye{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=w(t);return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return e.coerce(this.name,I(e.readBytes(this.size)))}}class Ue extends ye{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Fe=x.from(-1),qe=x.from(0),Qe=x.from(1),Ge=x.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ke extends ye{constructor(e,t,n){const r=(t?"int":"uint")+8*e;super(r,r,n,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let n=x.from(t),r=Ge.mask(8*e.wordSize);if(this.signed){let e=r.mask(8*this.size-1);(n.gt(e)||n.lt(e.add(Qe).mul(Fe)))&&this._throwError("value out-of-bounds",t)}else(n.lt(qe)||n.gt(r.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return n=n.toTwos(8*this.size).mask(8*this.size),this.signed&&(n=n.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}const He=new f("strings/5.6.0");var Le,Ve;function We(e,t,n,r,i){if(e===Ve.BAD_PREFIX||e===Ve.UNEXPECTED_CONTINUE){let e=0;for(let r=t+1;r<n.length&&n[r]>>6==2;r++)e++;return e}return e===Ve.OVERRUN?n.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Le||(Le={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Ve||(Ve={}));const $e=Object.freeze({error:function(e,t,n,r,i){return He.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:We,replace:function(e,t,n,r,i){return e===Ve.OVERLONG?(r.push(i),0):(r.push(65533),We(e,t,n))}});function Je(e,t=Le.current){t!=Le.current&&(He.checkNormalize(),e=e.normalize(t));let n=[];for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(63&r|128);else if(55296==(64512&r)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&r)<<10)+(1023&i);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(63&s|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(63&r|128)}return w(n)}function ze(e,t){return function(e,t){null==t&&(t=$e.error),e=w(e);const n=[];let r=0;for(;r<e.length;){const i=e[r++];if(i>>7==0){n.push(i);continue}let s=null,o=null;if(192==(224&i))s=1,o=127;else if(224==(240&i))s=2,o=2047;else{if(240!=(248&i)){r+=t(128==(192&i)?Ve.UNEXPECTED_CONTINUE:Ve.BAD_PREFIX,r-1,e,n);continue}s=3,o=65535}if(r-1+s>=e.length){r+=t(Ve.OVERRUN,r-1,e,n);continue}let a=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=e[r];if(128!=(192&i)){r+=t(Ve.MISSING_CONTINUE,r,e,n),a=null;break}a=a<<6|63&i,r++}null!==a&&(a>1114111?r+=t(Ve.OUT_OF_RANGE,r-1-s,e,n,a):a>=55296&&a<=57343?r+=t(Ve.UTF16_SURROGATE,r-1-s,e,n,a):a<=o?r+=t(Ve.OVERLONG,r-1-s,e,n,a):n.push(a))}return n}(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}class Xe extends je{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Je(t))}decode(e){return ze(super.decode(e))}}class Ze extends ye{constructor(e,t){let n=!1;const r=[];e.forEach((e=>{e.dynamic&&(n=!0),r.push(e.type)})),super("tuple","tuple("+r.join(",")+")",t,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,r)=>{let i=n.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[r]))})),Object.freeze(e)}encode(e,t){return xe(e,this.coders,t)}decode(e){return e.coerce(this.name,Ee(e,this.coders))}}const Ye=new f(H),et=new RegExp(/^bytes([0-9]*)$/),tt=new RegExp(/^(u?int)([0-9]*)$/);class nt{constructor(e){Ye.checkNew(new.target,nt),B(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Pe(e.name);case"bool":return new Te(e.name);case"string":return new Xe(e.name);case"bytes":return new Ne(e.name);case"array":return new De(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Ze((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new Ue(e.name)}let t=e.type.match(tt);if(t){let n=parseInt(t[2]||"256");return(0===n||n>256||n%8!=0)&&Ye.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Ke(n/8,"int"===t[1],e.name)}if(t=e.type.match(et),t){let n=parseInt(t[1]);return(0===n||n>32)&&Ye.throwArgumentError("invalid bytes length","param",e),new Be(n,e.name)}return Ye.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new ve(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new me(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(Y.from(e))));return new Ze(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Ye.throwError("types/values length mismatch",f.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const n=e.map((e=>this._getCoder(Y.from(e)))),r=new Ze(n,"_"),i=this._getWriter();return r.encode(i,t),i.data}decode(e,t,n){const r=e.map((e=>this._getCoder(Y.from(e))));return new Ze(r,"_").decode(this._getReader(w(t),n))}}const rt=new nt;function it(e){return _e(Je(e))}const st=new f(H);class ot extends K{}class at extends K{}class ct extends K{}class ut extends K{static isIndexed(e){return!(!e||!e._isIndexed)}}const dt={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function lt(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return n.error=t,n}class ht{constructor(e){st.checkNew(new.target,ht);let t=[];t="string"==typeof e?JSON.parse(e):e,B(this,"fragments",t.map((e=>te.from(e))).filter((e=>null!=e))),B(this,"_abiCoder",U(new.target,"getAbiCoder")()),B(this,"functions",{}),B(this,"errors",{}),B(this,"events",{}),B(this,"structs",{}),this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void st.warn("duplicate definition - constructor"):void B(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let n=e.format();t[n]?st.warn("duplicate definition - "+n):t[n]=e})),this.deploy||B(this,"deploy",oe.from({payable:!1,type:"constructor"})),B(this,"_isInterface",!0)}format(e){e||(e=X.full),e===X.sighash&&st.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map((t=>t.format(e)));return e===X.json?JSON.stringify(t.map((e=>JSON.parse(e)))):t}static getAbiCoder(){return rt}static getAddress(e){return Me(e)}static getSighash(e){return n=0,4,"string"!=typeof(t=it(e.format()))?t=I(t):(!C(t)||t.length%2)&&g.throwArgumentError("invalid hexData","value",t),n=2+2*n,"0x"+t.substring(n,10);var t,n}static getEventTopic(e){return it(e.format())}getFunction(e){if(C(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];st.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));return 0===n.length?st.throwArgumentError("no matching function","name",t):n.length>1&&st.throwArgumentError("multiple matching functions","name",t),this.functions[n[0]]}const t=this.functions[ae.fromString(e).format()];return t||st.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(C(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];st.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.events).filter((e=>e.split("(")[0]===t));return 0===n.length?st.throwArgumentError("no matching event","name",t):n.length>1&&st.throwArgumentError("multiple matching events","name",t),this.events[n[0]]}const t=this.events[ne.fromString(e).format()];return t||st.throwArgumentError("no matching event","signature",e),t}getError(e){if(C(e)){const t=U(this.constructor,"getSighash");for(const n in this.errors)if(e===t(this.errors[n]))return this.errors[n];st.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));return 0===n.length?st.throwArgumentError("no matching error","name",t):n.length>1&&st.throwArgumentError("multiple matching errors","name",t),this.errors[n[0]]}const t=this.errors[ae.fromString(e).format()];return t||st.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}return U(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),U(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const n=w(t);return I(n.slice(0,4))!==this.getSighash(e)&&st.throwArgumentError(`data signature does not match error ${e.name}.`,"data",I(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),I(_([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const n=w(t);return I(n.slice(0,4))!==this.getSighash(e)&&st.throwArgumentError(`data signature does not match function ${e.name}.`,"data",I(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),I(_([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let n=w(t),r=null,i=null,s=null,o=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch(e){}break;case 4:{const e=I(n.slice(0,4)),t=dt[e];if(t)i=this._abiCoder.decode(t.inputs,n.slice(4)),s=t.name,o=t.signature,t.reason&&(r=i[0]);else try{const t=this.getError(e);i=this._abiCoder.decode(t.inputs,n.slice(4)),s=t.name,o=t.format()}catch(e){}break}}return st.throwError("call revert exception",f.errors.CALL_EXCEPTION,{method:e.format(),errorArgs:i,errorName:s,errorSignature:o,reason:r})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),I(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&st.throwError("too many arguments for "+e.format(),f.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let n=[];e.anonymous||n.push(this.getEventTopic(e));const r=(e,t)=>"string"===e.type?it(t):"bytes"===e.type?_e(I(t)):("address"===e.type&&this._abiCoder.encode(["address"],[t]),S(I(t),32));for(t.forEach(((t,i)=>{let s=e.inputs[i];s.indexed?null==t?n.push(null):"array"===s.baseType||"tuple"===s.baseType?st.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?n.push(t.map((e=>r(s,e)))):n.push(r(s,t)):null!=t&&st.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const n=[],r=[],i=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&st.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach(((e,s)=>{const o=t[s];if(e.indexed)if("string"===e.type)n.push(it(o));else if("bytes"===e.type)n.push(_e(o));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this._abiCoder.encode([e.type],[o]))}else r.push(e),i.push(o)})),{data:this._abiCoder.encode(r,i),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e&&(e=this.getEvent(e)),null!=n&&!e.anonymous){let t=this.getEventTopic(e);C(n[0],32)&&n[0].toLowerCase()===t||st.throwError("fragment/topic mismatch",f.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:n[0]}),n=n.slice(1)}let r=[],i=[],s=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(Y.fromObject({type:"bytes32",name:e.name})),s.push(!0)):(r.push(e),s.push(!1)):(i.push(e),s.push(!1))}));let o=null!=n?this._abiCoder.decode(r,_(n)):null,a=this._abiCoder.decode(i,t,!0),c=[],u=0,d=0;e.inputs.forEach(((e,t)=>{if(e.indexed)if(null==o)c[t]=new ut({_isIndexed:!0,hash:null});else if(s[t])c[t]=new ut({_isIndexed:!0,hash:o[d++]});else try{c[t]=o[d++]}catch(e){c[t]=e}else try{c[t]=a[u++]}catch(e){c[t]=e}if(e.name&&null==c[e.name]){const n=c[t];n instanceof Error?Object.defineProperty(c,e.name,{enumerable:!0,get:()=>{throw lt(`property ${JSON.stringify(e.name)}`,n)}}):c[e.name]=n}}));for(let e=0;e<c.length;e++){const t=c[e];t instanceof Error&&Object.defineProperty(c,e,{enumerable:!0,get:()=>{throw lt(`index ${e}`,t)}})}return Object.freeze(c)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new at({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:x.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new ot({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=I(e);let n=this.getError(t.substring(0,10).toLowerCase());return n?new ct({args:this._abiCoder.decode(n.inputs,"0x"+t.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!(!e||!e._isInterface)}}},33122:function(e,t,n){var r=n(48834).Buffer,i=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumAccountBase=void 0;const o=n(65880),a=n(89642),c=n(76181),u=n(97750),d=n(37472),l=n(75960),h=n(63523),p=n(80075),f=n(65575),g=new f.Interface([{constant:!0,inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}]),y=new f.Interface([{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]);class m{constructor(e,t,n){this.chainGetter=e,this.chainId=t,this.getKeplr=n,this._isSendingTx=!1,(0,p.makeObservable)(this)}setIsSendingTx(e){this._isSendingTx=e}get isSendingTx(){return this._isSendingTx}simulateGas(e,t){return s(this,void 0,void 0,(function*(){if(!this.chainGetter.getChain(this.chainId).evm)throw new Error("No EVM chain info provided");const{to:n,value:r,data:i}=t,s=yield this.getKeplr(),o=yield s.ethereum.request({method:"eth_estimateGas",params:[{from:e,to:n,value:r,data:i}],chainId:this.chainId});return{gasUsed:parseInt(o)}}))}simulateGasForSendTokenTx({currency:e,amount:t,sender:n,recipient:r}){return s(this,void 0,void 0,(function*(){const i=m.isEthereumHexAddressWithChecksum(r)?r:n,s=(0,d.parseUnits)(t,e.coinDecimals),o=new a.DenomHelper(e.coinMinimalDenom),l="erc20"===o.type?{to:o.contractAddress,value:"0x0",data:c.erc20ContractInterface.encodeFunctionData("transfer",[i,(0,u.hexValue)(s)])}:{to:i,value:(0,u.hexValue)(s)};return this.simulateGas(n,l)}))}simulateOpStackL1Fee(e){return s(this,void 0,void 0,(function*(){const t=this.chainGetter.getChain(this.chainId);if(!t.features.includes("op-stack-l1-data-fee"))throw new Error("The chain isn't built with OP Stack");if(!t.evm)throw new Error("No EVM chain info provided");const n=yield this.getKeplr(),r="0x"+(yield n.ethereum.request({method:"eth_call",params:[{to:"0x420000000000000000000000000000000000000F",data:g.encodeFunctionData("implementation")}],chainId:this.chainId})).slice(26);return yield n.ethereum.request({method:"eth_call",params:[{to:r,data:y.encodeFunctionData("getL1Fee",[(0,l.serialize)(e)])}],chainId:this.chainId})}))}makeSendTokenTx({currency:e,amount:t,to:n,gasLimit:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:o}){const l=this.chainGetter.getChain(this.chainId).evm;if(!l)throw new Error("No EVM chain info provided");const h=(0,d.parseUnits)(t,e.coinDecimals),p=new a.DenomHelper(e.coinMinimalDenom),f=i&&s?{maxFeePerGas:(0,u.hexValue)(Number(i)),maxPriorityFeePerGas:(0,u.hexValue)(Number(s)),gasLimit:(0,u.hexValue)(r)}:{gasPrice:(0,u.hexValue)(Number(null!=o?o:"0")),gasLimit:(0,u.hexValue)(r)};return"erc20"===p.type?Object.assign({chainId:l.chainId,to:p.contractAddress,value:"0x0",data:c.erc20ContractInterface.encodeFunctionData("transfer",[n,(0,u.hexValue)(h)])},f):Object.assign({chainId:l.chainId,to:n,value:(0,u.hexValue)(h)},f)}sendEthereumTx(e,t,n){return s(this,void 0,void 0,(function*(){try{if(!this.chainGetter.getChain(this.chainId).evm)throw new Error("No EVM info provided");const i=yield this.getKeplr(),c=yield i.ethereum.request({method:"eth_getTransactionCount",params:[e,"pending"],chainId:this.chainId});t=Object.assign(Object.assign({},t),{nonce:parseInt(c)});const u=i.signEthereum.bind(i),d=yield u(this.chainId,e,JSON.stringify(t),o.EthSignType.TRANSACTION);(t.maxFeePerGas||t.maxPriorityFeePerGas)&&(t.type=l.TransactionTypes.eip1559);const h=r.from((0,l.serialize)(t,d).replace("0x",""),"hex"),p=i.sendEthereumTx.bind(i),f=yield p(this.chainId,h);if(!f)throw new Error("No tx hash responded");return(null==n?void 0:n.onBroadcasted)&&n.onBroadcasted(f),(0,a.retry)((()=>new Promise(((e,t)=>s(this,void 0,void 0,(function*(){var r;const s=yield i.ethereum.request({method:"eth_getTransactionReceipt",params:[f],chainId:this.chainId});s&&(null===(r=null==n?void 0:n.onFulfill)||void 0===r||r.call(n,s),e()),t()}))))),{maxRetries:10,waitMsAfterError:500,maxWaitMsAfterError:4e3}),f}catch(e){throw(null==n?void 0:n.onBroadcastFailed)&&n.onBroadcastFailed(e),e}}))}static isEthereumHexAddressWithChecksum(e){const t=!!e.match(/^0x[0-9A-Fa-f]*$/),n=!!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/);if(!t||42!==e.length)return!1;const r=(0,h.getAddress)(e.toLowerCase());return!n||r===e}}i([p.observable],m.prototype,"_isSendingTx",void 0),i([p.action],m.prototype,"setIsSendingTx",null),t.EthereumAccountBase=m},21554:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(33122),t),i(n(34686),t)},34686:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumAccountStore=void 0;const r=n(11169),i=n(33122);class s extends r.HasMapStore{constructor(e,t){super((n=>new i.EthereumAccountBase(e,n,t))),this.chainGetter=e,this.getKeplr=t}getAccount(e){return this.get(this.chainGetter.getChain(e).chainId)}}t.EthereumAccountStore=s},76181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.erc20ContractInterface=void 0;const r=n(65575);t.erc20ContractInterface=new r.Interface([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"usr",type:"address"}],name:"Deny",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"usr",type:"address"}],name:"Rely",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"usr",type:"address"}],name:"deny",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deploymentChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"usr",type:"address"}],name:"rely",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"wards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}])},62233:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ERC20CurrencyRegistrar=void 0;const s=n(89642),o=n(80075);class a{constructor(e,t=864e5,n,r){this.kvStore=e,this.cacheDuration=t,this.chainStore=n,this.queriesStore=r,this._isInitialized=!1,this.cacheERC20Metadata=new Map,this.chainStore.registerCurrencyRegistrar(this.currencyRegistrar.bind(this)),(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cacheERC20Metadata",t=yield this.kvStore.get(e);t&&(0,o.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.cacheERC20Metadata.set(e,n)})),(0,o.autorun)((()=>{const t=(0,o.toJS)(this.cacheERC20Metadata),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}currencyRegistrar(e,t){if(!this.chainStore.hasChain(e))return;const n=new s.DenomHelper(t);if("erc20"!==n.type)return;const r=this.queriesStore.get(e),i=n.denom.replace("erc20:",""),a=this.cacheERC20Metadata.get(i);if(a){if(Date.now()-a.timestamp<this.cacheDuration)return{value:{coinMinimalDenom:n.denom,coinDenom:a.symbol,coinDecimals:a.decimals,coinGeckoId:a.coingeckoId,coinImageUrl:a.logoURI},done:!0};(0,o.runInAction)((()=>{this.cacheERC20Metadata.delete(i)}))}const c=r.ethereum.queryEthereumCoingeckoTokenInfo.getQueryContract(i);return null!=(null==c?void 0:c.symbol)&&null!=(null==c?void 0:c.decimals)?(c.isFetching||(0,o.runInAction)((()=>{this.cacheERC20Metadata.set(i,{symbol:c.symbol,decimals:c.decimals,coingeckoId:c.coingeckoId,logoURI:c.logoURI,timestamp:Date.now()})})),{value:{coinMinimalDenom:n.denom,coinDenom:c.symbol,coinDecimals:c.decimals,coinGeckoId:c.coingeckoId,coinImageUrl:c.logoURI},done:!c.isFetching}):(null==c?void 0:c.isFetching)?{value:void 0,done:!1}:{value:void 0,done:!0}}}r([o.observable],a.prototype,"_isInitialized",void 0),r([o.observable.shallow],a.prototype,"cacheERC20Metadata",void 0),t.ERC20CurrencyRegistrar=a},80151:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(54481),t),i(n(21554),t),i(n(76181),t),i(n(62233),t)},21058:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthAccountBalanceRegistry=t.ObservableQueryEthAccountBalanceImpl=void 0;const i=n(89642),s=n(19731),o=n(80075),a=n(21554),c=n(39289);class u extends c.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r,i){super(e,t,n,"eth_getBalance",[i,"latest"]),this.denomHelper=r,this.ethereumHexAddress=i,(0,o.makeObservable)(this)}canFetch(){return this.ethereumHexAddress.length>0}get balance(){const e=this.denomHelper.denom,t=this.chainGetter.getChain(this.chainId).currencies.find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${e}`);return this.response&&this.response.data?new s.CoinPretty(t,new s.Int(BigInt(this.response.data))):new s.CoinPretty(t,new s.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}}r([o.computed],u.prototype,"balance",null),r([o.computed],u.prototype,"currency",null),t.ObservableQueryEthAccountBalanceImpl=u,t.ObservableQueryEthAccountBalanceRegistry=class{constructor(e){this.sharedContext=e}getBalanceImpl(e,t,n,r){const s=new i.DenomHelper(r),o=t.getChain(e),c=a.EthereumAccountBase.isEthereumHexAddressWithChecksum(n);if("native"===s.type&&c&&null!=o.evm)return new u(this.sharedContext,e,t,s,n)}}},54040:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumBlock=t.ObservableQueryEthereumBlockInner=void 0;const i=n(80075),s=n(39289);class o extends s.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"eth_getBlockByNumber",[r,!0]),(0,i.makeObservable)(this)}get block(){if(this.response)return this.response.data}}r([i.computed],o.prototype,"block",null),t.ObservableQueryEthereumBlockInner=o;class a extends s.ObservableEvmChainJsonRpcQueryMap{constructor(e,t,n){super(e,t,n,(e=>new o(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryByBlockNumberOrTag(e){const t="number"==typeof e?`0x${Number(e).toString(16)}`:e;return this.get(null!=t?t:"latest")}}t.ObservableQueryEthereumBlock=a},83962:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryCoingeckoTokenInfo=t.ObservableQueryCoingeckoTokenInfoInner=void 0;const r=n(11169),i=n(80075);class s extends r.ObservableQuery{constructor(e,t,n,r,s){super(e,t,n.replace("{coingeckoChainId}",r).replace("{contractAddress}",s)),this.coingeckoChainId=r,(0,i.makeObservable)(this)}get symbol(){var e,t;return null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.symbol.toUpperCase()}get decimals(){var e,t,n;return null===(n=null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.detail_platforms[this.coingeckoChainId])||void 0===n?void 0:n.decimal_place}get coingeckoId(){var e,t;return null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.id}get logoURI(){var e,t;return null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.image.small}}t.ObservableQueryCoingeckoTokenInfoInner=s;class o extends r.HasMapStore{constructor(e,t,n,r,i){const o=a[t];super((e=>{if(null!=o)return new s(this.sharedContext,r,i,o,e)})),this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.coingeckoAPIBaseURL=r,this.coingeckoAPIURI=i}getQueryContract(e){return this.get(e)}}t.ObservableQueryCoingeckoTokenInfo=o;const a={"eip155:1":"ethereum","eip155:10":"optimistic-ethereum","eip155:137":"polygon-pos","eip155:8453":"base","eip155:42161":"arbitrum-one"}},62826:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumERC20BalanceRegistry=t.ObservableQueryEthereumERC20BalanceImpl=void 0;const s=n(19731),o=n(80075),a=i(n(48166)),c=n(76181),u=n(89642),d=n(21554),l=n(39289);class h extends l.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r,i,s){super(e,t,n,"eth_call",[{to:s,data:c.erc20ContractInterface.encodeFunctionData("balanceOf",[i])},"latest"]),this.denomHelper=r,this.ethereumHexAddress=i,this.contractAddress=s,(0,o.makeObservable)(this)}get balance(){const e=this.denomHelper.denom,t=this.chainGetter.getChain(this.chainId).currencies.find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${this.contractAddress}`);return this.response&&this.response.data?new s.CoinPretty(t,new s.Int((0,a.default)(this.response.data.replace("0x",""),16).toString())):new s.CoinPretty(t,new s.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}}r([o.computed],h.prototype,"balance",null),r([o.computed],h.prototype,"currency",null),t.ObservableQueryEthereumERC20BalanceImpl=h,t.ObservableQueryEthereumERC20BalanceRegistry=class{constructor(e){this.sharedContext=e}getBalanceImpl(e,t,n,r){const i=new u.DenomHelper(r),s=t.getChain(e),o=d.EthereumAccountBase.isEthereumHexAddressWithChecksum(n);if("erc20"===i.type&&o&&null!=s.evm)return new h(this.sharedContext,e,t,i,n,i.contractAddress)}}},19542:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryThirdpartyERC20BalanceRegistry=t.ObservableQueryThirdpartyERC20BalancesImpl=t.ObservableQueryThirdpartyERC20BalancesImplParent=void 0;const s=n(89642),o=n(80075),a=n(19731),c=n(11169),u=n(21554),d={"eip155:1":"eth","eip155:10":"opt","eip155:137":"polygon","eip155:8453":"base","eip155:42161":"arb"};class l extends c.ObservableJsonRPCQuery{constructor(e,t,n,r){super(e,`https://evm-${t.replace("eip155:","")}.keplr.app/api`,"","alchemy_getTokenBalances",[r,"erc20",{maxCount:100}]),this.chainId=t,this.chainGetter=n,this.ethereumHexAddress=r,(0,o.makeObservable)(this)}canFetch(){return this.ethereumHexAddress.length>0&&null!=d[this.chainId]}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.chainGetter.getChain(this.chainId),n=e.data.tokenBalances.filter((e=>null!=e.tokenBalance&&BigInt(e.tokenBalance)>0)).map((e=>`erc20:${e.contractAddress}`));n&&t.addUnknownDenoms(...n)}}t.ObservableQueryThirdpartyERC20BalancesImplParent=l;class h{constructor(e,t,n,r){this.parent=e,this.chainId=t,this.chainGetter=n,this.denomHelper=r,(0,o.makeObservable)(this)}get balance(){const e=this.currency;if(!this.response)return new a.CoinPretty(e,new a.Int(0)).ready(!1);const t=this.denomHelper.denom.replace("erc20:",""),n=this.response.data.tokenBalances.find((e=>e.contractAddress===t));return null==(null==n?void 0:n.tokenBalance)?new a.CoinPretty(e,new a.Int(0)).ready(!1):new a.CoinPretty(e,new a.Int(BigInt(n.tokenBalance)))}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}get error(){return this.parent.error}get isFetching(){return this.parent.isFetching}get isObserved(){return this.parent.isObserved}get isStarted(){return this.parent.isStarted}get response(){return this.parent.response}fetch(){return this.parent.duplicatedFetchResolver||(this.parent.duplicatedFetchResolver=new Promise(((e,t)=>{(()=>{i(this,void 0,void 0,(function*(){try{yield this.parent.fetch(),this.parent.duplicatedFetchResolver=void 0,e()}catch(e){this.parent.duplicatedFetchResolver=void 0,t(e)}}))})()}))),this.parent.duplicatedFetchResolver}waitFreshResponse(){return i(this,void 0,void 0,(function*(){return yield this.parent.waitFreshResponse()}))}waitResponse(){return i(this,void 0,void 0,(function*(){return yield this.parent.waitResponse()}))}}r([o.computed],h.prototype,"balance",null),r([o.computed],h.prototype,"currency",null),t.ObservableQueryThirdpartyERC20BalancesImpl=h,t.ObservableQueryThirdpartyERC20BalanceRegistry=class{constructor(e){this.sharedContext=e,this.parentMap=new Map}getBalanceImpl(e,t,n,r){const i=new s.DenomHelper(r),o=t.getChain(e),a=u.EthereumAccountBase.isEthereumHexAddressWithChecksum(n);if(!Object.keys(d).includes(e)||"erc20"!==i.type||!a||!o.evm)return;const c=`${e}/${n}`;return this.parentMap.has(c)||this.parentMap.set(c,new l(this.sharedContext,e,t,n)),new h(this.parentMap.get(c),e,t,i)}}},36111:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryERC20ContractInfo=t.ObservableQueryERC20ContactInfoInner=void 0;const i=n(11169),s=n(50898),o=n(80075);class a extends s.ObservableQueryEVMChainERC20MetadataInner{constructor(e,t,n,r){super(e,t,n,r),this.contractAddress=r}get tokenInfo(){if(void 0!==this.symbol&&void 0!==this.decimals)return{decimals:this.decimals,symbol:this.symbol}}get isFetching(){return this._querySymbol.isFetching||this._queryDecimals.isFetching}get error(){return this._querySymbol.error||this._queryDecimals.error}}r([o.computed],a.prototype,"tokenInfo",null),t.ObservableQueryERC20ContactInfoInner=a;class c extends i.HasMapStore{constructor(e,t,n){super((e=>new a(this.sharedContext,this.chainId,this.chainGetter,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n}getQueryContract(e){return this.get(e)}}t.ObservableQueryERC20ContractInfo=c},50898:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEVMChainERC20Metadata=t.ObservableQueryEVMChainERC20MetadataInner=t.ObservableQueryEVMChainERC20MetadataDecimals=t.ObservableQueryEVMChainERC20MetadataSymbol=void 0;const i=n(11169),s=n(80075),o=n(39289),a=n(76181);class c extends o.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"eth_call",[{to:r,data:a.erc20ContractInterface.encodeFunctionData("symbol")},"latest"]),this.contractAddress=r,(0,s.makeObservable)(this)}canFetch(){return super.canFetch()&&""!==this.contractAddress}get symbol(){if(this.response)try{return a.erc20ContractInterface.decodeFunctionResult("symbol",this.response.data)[0]}catch(e){console.log(e)}}}r([s.computed],c.prototype,"symbol",null),t.ObservableQueryEVMChainERC20MetadataSymbol=c;class u extends o.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"eth_call",[{to:r,data:a.erc20ContractInterface.encodeFunctionData("decimals")},"latest"]),this.contractAddress=r,(0,s.makeObservable)(this)}canFetch(){return super.canFetch()&&""!==this.contractAddress}get decimals(){if(this.response)try{return a.erc20ContractInterface.decodeFunctionResult("decimals",this.response.data)[0]}catch(e){console.log(e)}}}r([s.computed],u.prototype,"decimals",null),t.ObservableQueryEVMChainERC20MetadataDecimals=u;class d{constructor(e,t,n,r){this.sharedContext=e,this._querySymbol=new c(e,t,n,r),this._queryDecimals=new u(e,t,n,r)}get querySymbol(){return this._querySymbol}get queryDecimals(){return this._queryDecimals}get symbol(){return this._querySymbol.symbol}get decimals(){return this._queryDecimals.decimals}}t.ObservableQueryEVMChainERC20MetadataInner=d;class l extends i.HasMapStore{constructor(e,t,n){super((e=>new d(this.sharedContext,this.chainId,this.chainGetter,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n}get(e){return super.get(e)}}t.ObservableQueryEVMChainERC20Metadata=l},39289:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableEvmChainJsonRpcQueryMap=t.ObservableEvmChainJsonRpcQuery=void 0;const i=n(11169);class s extends i.ObservableJsonRPCQuery{constructor(e,t,n,r,i){var s,o;super(e,null!==(o=null===(s=n.getChain(t).evm)||void 0===s?void 0:s.rpc)&&void 0!==o?o:"","",r,i),this._chainId=t,this.chainGetter=n}fetchResponse(){return r(this,void 0,void 0,(function*(){const e=yield(0,i.getKeplrFromWindow)();return{headers:{},data:yield null==e?void 0:e.ethereum.request({method:this.method,params:this.params,chainId:this._chainId})}}))}get chainId(){return this._chainId}}t.ObservableEvmChainJsonRpcQuery=s;class o extends i.HasMapStore{constructor(e,t,n,r){super(r),this.sharedContext=e,this.chainId=t,this.chainGetter=n}}t.ObservableEvmChainJsonRpcQueryMap=o},12778:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumFeeHistory=t.ObservableQueryEthereumFeeHistoryInner=void 0;const i=n(80075),s=n(39289);class o extends s.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r,s,o){super(e,t,n,"eth_feeHistory",["string"==typeof r?r:`0x${r.toString(16)}`,s,o]),(0,i.makeObservable)(this)}get feeHistory(){if(this.response)return this.response.data}}r([i.computed],o.prototype,"feeHistory",null),t.ObservableQueryEthereumFeeHistoryInner=o;class a extends s.ObservableEvmChainJsonRpcQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=(()=>{try{return JSON.parse(e)}catch(e){throw new Error("Invalid JSON RPC params")}})(),n=t[0],r=t[1],i=t[2];return new o(this.sharedContext,this.chainId,this.chainGetter,n,r,i)}))}getQueryByFeeHistoryParams(e,t,n){const r=JSON.stringify([e,t,n]);return this.get(r)}}t.ObservableQueryEthereumFeeHistory=a},6938:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumGasPrice=void 0;const i=n(80075),s=n(39289);class o extends s.ObservableEvmChainJsonRpcQuery{constructor(e,t,n){super(e,t,n,"eth_gasPrice",[]),(0,i.makeObservable)(this)}get gasPrice(){if(this.response)return this.response.data}}r([i.computed],o.prototype,"gasPrice",null),t.ObservableQueryEthereumGasPrice=o},54481:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumQueriesImpl=t.EthereumQueries=void 0;const r=n(21058),i=n(54040),s=n(12778),o=n(50898),a=n(36111),c=n(20994),u=n(19542),d=n(83962),l=n(62826),h=n(6938);t.EthereumQueries={use:e=>(t,n,r,i)=>({ethereum:new p(t,n,r,i,e.coingeckoAPIBaseURL,e.coingeckoAPIURI)})};class p{constructor(e,t,n,p,f,g){this.chainId=n,this.chainGetter=p,this.coingeckoAPIBaseURL=f,this.coingeckoAPIURI=g,e.queryBalances.addBalanceRegistry(new l.ObservableQueryEthereumERC20BalanceRegistry(t)),e.queryBalances.addBalanceRegistry(new u.ObservableQueryThirdpartyERC20BalanceRegistry(t)),e.queryBalances.addBalanceRegistry(new r.ObservableQueryEthAccountBalanceRegistry(t)),this.queryEthereumBlock=new i.ObservableQueryEthereumBlock(t,n,p),this.queryEthereumFeeHistory=new s.ObservableQueryEthereumFeeHistory(t,n,p),this.queryEthereumERC20Metadata=new o.ObservableQueryEVMChainERC20Metadata(t,n,p),this.queryEthereumERC20ContractInfo=new a.ObservableQueryERC20ContractInfo(t,n,p),this.queryEthereumMaxPriorityFee=new c.ObservableQueryEthereumMaxPriorityFee(t,n,p),this.queryEthereumCoingeckoTokenInfo=new d.ObservableQueryCoingeckoTokenInfo(t,n,p,f,g),this.queryEthereumGasPrice=new h.ObservableQueryEthereumGasPrice(t,n,p)}}t.EthereumQueriesImpl=p},20994:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumMaxPriorityFee=void 0;const i=n(80075),s=n(39289);class o extends s.ObservableEvmChainJsonRpcQuery{constructor(e,t,n){super(e,t,n,"eth_maxPriorityFeePerGas",[]),(0,i.makeObservable)(this)}get maxPriorityFeePerGas(){if(this.response)return this.response.data}}r([i.computed],o.prototype,"maxPriorityFeePerGas",null),t.ObservableQueryEthereumMaxPriorityFee=o},82454:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IBCChannelStore=void 0;const s=n(89642),o=n(80075),a=n(58242),c=n(94531);class u{constructor(e,t){this.kvStore=e,this.chainStore=t,this.channelMap=new Map,this.isInitialized=!1,this.getChannels=(0,a.computedFn)(((e,t)=>{const n=this.channelMap.get(c.ChainIdHelper.parse(e).identifier);if(!n)return[];const r=[];for(const[e,i]of n.entries())e.startsWith(`${t}/`)&&r.push(i);return r})),this.getChannel=(0,a.computedFn)(((e,t,n)=>{const r=this.channelMap.get(c.ChainIdHelper.parse(e).identifier);if(r)return r.get(`${t}/${n}`)})),this.legacyKVStore=e,this.kvStore=new s.PrefixKVStore(e,"v2"),(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){if(this.chainStore.waitUntilInitialized&&(yield this.chainStore.waitUntilInitialized()),!(yield this.kvStore.get("migrate/v1"))){const e=new Map;for(const t of this.chainStore.chainInfos){const n=c.ChainIdHelper.parse(t.chainId),r=`${n.identifier}-channels`,i=yield this.legacyKVStore.get(r);if(i)for(const t of Object.keys(i)){const r=i[t];if(r)for(const t of Object.keys(r)){e.has(n.identifier)||e.set(n.identifier,new Map);const i=e.get(n.identifier),s=r[t];s&&i.set(`${s.portId}/${s.channelId}`,s)}}}(0,o.runInAction)((()=>{this.channelMap=e})),yield this.kvStore.set("migrate/v1",!0)}const e=yield this.kvStore.get("channelMap");e&&(0,o.runInAction)((()=>{for(const[t,n]of Object.entries(e)){const e=new Map;if(n)for(const[t,r]of Object.entries(n))r&&e.set(t,r);this.channelMap.set(t,e)}})),(0,o.autorun)((()=>{const e={};for(const[t,n]of this.channelMap.entries()){const r={};for(const[e,t]of n.entries())r[e]=t;e[t]=r}this.kvStore.set("channelMap",e)})),(0,o.autorun)((()=>{const t=new Set(Object.keys(null!=e?e:{})),n=[];for(const e of t)this.chainStore.hasChain(e)||n.push(e);n.length>0&&(0,o.runInAction)((()=>{for(const e of n)this.channelMap.delete(e)}))})),(0,o.runInAction)((()=>{this.isInitialized=!0}))}))}getTransferChannels(e){return this.getChannels(e,"transfer")}addChannel(e,t){const n=c.ChainIdHelper.parse(e).identifier;this.channelMap.has(n)||this.channelMap.set(n,new Map),this.channelMap.get(n).set(`${t.portId}/${t.channelId}`,t)}}r([o.observable],u.prototype,"channelMap",void 0),r([o.observable],u.prototype,"isInitialized",void 0),r([o.action],u.prototype,"addChannel",null),t.IBCChannelStore=u},75319:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IBCCurrencyRegistrar=void 0;const s=n(80075),o=n(89642),a=n(94531);class c{static defaultCoinDenomGenerator(e,t,n,r){return r?`${r.coinDenom} (${n?n.chainName:"Unknown"}/${e.paths[0].channelId})`:`${e.denom} (${n?n.chainName:"Unknown"}/${e.paths[0].channelId})`}constructor(e,t=864e5,n,r,i,o=c.defaultCoinDenomGenerator){this.kvStore=e,this.cacheDuration=t,this.chainStore=n,this.accountStore=r,this.queriesStore=i,this.coinDenomGenerator=o,this.cacheDenomTracePaths=new Map,this.isInitialized=!1,this.chainStore.registerCurrencyRegistrar(this.ibcCurrencyRegistrar.bind(this)),(0,s.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cache-ibc-denom-trace-paths-v2",t=yield this.kvStore.get(e);t&&(0,s.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.cacheDenomTracePaths.set(e,n)})),(0,s.autorun)((()=>{const t=(0,s.toJS)(this.cacheDenomTracePaths),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,s.runInAction)((()=>{this.isInitialized=!0}))}))}ibcCurrencyRegistrar(e,t){var n;if(!this.chainStore.hasChain(e))return;const r=new o.DenomHelper(t);if("native"!==r.type||!r.denom.startsWith("ibc/"))return;if(!this.isInitialized)return{value:void 0,done:!1};const i=this.queriesStore.get(e),a=r.denom.replace("ibc/","");let c,u,d,l=!1;const h=this.getCacheIBCDenomData(e,a);if(h)Date.now()-h.timestamp<this.cacheDuration&&!h.denomTrace.paths.some((e=>!e.clientChainId||!this.chainStore.hasChain(e.clientChainId)))?(d=h.denomTrace,h.originChainId&&this.chainStore.hasChain(h.originChainId)&&(u=this.chainStore.getChain(h.originChainId)),h.counterpartyChainId&&this.chainStore.hasChain(h.counterpartyChainId)&&(c=this.chainStore.getChain(h.counterpartyChainId)),l=!0):(0,s.runInAction)((()=>{this.cacheDenomTracePaths.delete(a)}));else{let t=!1;const n=i.cosmos.queryIBCDenomTrace.getDenomTrace(a);if(d=n.denomTrace,n.isFetching&&(t=!0),d){const n=d.paths;let r=e;for(const e of n){const n=this.queriesStore.get(r).cosmos.queryIBCClientState.getClientState(e.portId,e.channelId);n.isFetching&&(t=!0);const i=this.queriesStore.get(r).cosmos.queryIBCChannel.getChannel(e.portId,e.channelId);if(i.isFetching&&(t=!0),i.response&&(e.counterpartyChannelId=i.response.data.channel.counterparty.channel_id,e.counterpartyPortId=i.response.data.channel.counterparty.port_id),!n.clientChainId||!this.chainStore.hasChain(n.clientChainId)){u=void 0;break}e.clientChainId=n.clientChainId,r=n.clientChainId,u=this.chainStore.getChain(n.clientChainId),c||(c=this.chainStore.getChain(n.clientChainId))}u&&!t&&this.setCacheIBCDenomData(e,a,{counterpartyChainId:null==c?void 0:c.chainId,denomTrace:d,originChainId:u.chainId,timestamp:Date.now()})}}if(u&&d){const e=4===d.denom.split(/^(cw20):(\w+)$/).length,t=4===d.denom.split(/^(erc20)\/(\w+)$/).length;switch(!0){case e:if(null===(n=u.features)||void 0===n?void 0:n.includes("secretwasm")){let e=!1,t=u.currencies.find((e=>d&&e.coinMinimalDenom.startsWith(d.denom)));if(!t&&this.chainStore.hasChain(u.chainId)){const n=this.queriesStore.get(u.chainId);if(n.secret){const r=d.denom.replace("cw20:",""),i=n.secret.querySecret20ContractInfo.getQueryContract(r);e=i.isFetching,i.response&&(t={type:"secret20",contractAddress:r,coinDecimals:i.response.data.token_info.decimals,coinDenom:i.response.data.token_info.symbol,coinMinimalDenom:`secret20:${r}:${i.response.data.token_info.name}`})}}if(t)return{value:{coinDecimals:t.coinDecimals,coinGeckoId:t.coinGeckoId,coinImageUrl:t.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(d,u,c,t),paths:d.paths,originChainId:u.chainId,originCurrency:t},done:l&&!e}}else{let e=!1,t=u.currencies.find((e=>d&&e.coinMinimalDenom.startsWith(d.denom)));if(!t&&this.chainStore.hasChain(u.chainId)){const n=this.queriesStore.get(u.chainId);if(n.cosmwasm){const r=d.denom.replace("cw20:",""),i=n.cosmwasm.querycw20ContractInfo.getQueryContract(r);e=i.isFetching,i.response&&(t={type:"cw20",contractAddress:r,coinDecimals:i.response.data.decimals,coinDenom:i.response.data.symbol,coinMinimalDenom:`cw20:${r}:${i.response.data.name}`})}}if(t)return{value:{coinDecimals:t.coinDecimals,coinGeckoId:t.coinGeckoId,coinImageUrl:t.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(d,u,c,t),paths:d.paths,originChainId:u.chainId,originCurrency:t},done:l&&!e}}break;case t:let i=!1,s=u.currencies.find((e=>d&&e.coinMinimalDenom.startsWith(d.denom)));if(!s&&this.chainStore.hasChain(u.chainId)){const e=this.queriesStore.get(u.chainId);if(e.ethereum){const t=d.denom.replace("erc20/",""),n=e.ethereum.queryEthereumERC20ContractInfo.getQueryContract(t);i=n.isFetching,n.tokenInfo&&(s={type:"erc20",contractAddress:t,coinDecimals:n.tokenInfo.decimals,coinDenom:n.tokenInfo.symbol,coinMinimalDenom:`erc20:${t}`})}}if(s)return{value:{coinDecimals:s.coinDecimals,coinGeckoId:s.coinGeckoId,coinImageUrl:s.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(d,u,c,s),paths:d.paths,originChainId:u.chainId,originCurrency:s},done:l&&!i};break;default:const o=u.findCurrency(d.denom);if(o&&!("paths"in o))return{value:{coinDecimals:o.coinDecimals,coinGeckoId:o.coinGeckoId,coinImageUrl:o.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(d,u,c,o),paths:d.paths,originChainId:u.chainId,originCurrency:o},done:!u.isCurrencyRegistrationInProgress(o.coinMinimalDenom)&&l}}return{value:{coinDecimals:0,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(d,u,c,void 0),paths:d.paths,originChainId:void 0,originCurrency:void 0},done:!1}}return{value:void 0,done:!1}}getCacheIBCDenomData(e,t){return this.cacheDenomTracePaths.get(`${a.ChainIdHelper.parse(e).identifier}/${t}`)}setCacheIBCDenomData(e,t,n){this.cacheDenomTracePaths.set(`${a.ChainIdHelper.parse(e).identifier}/${t}`,n)}}r([s.observable.shallow],c.prototype,"cacheDenomTracePaths",void 0),r([s.observable],c.prototype,"isInitialized",void 0),r([s.action],c.prototype,"setCacheIBCDenomData",null),t.IBCCurrencyRegistrar=c},84227:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(82454),t),i(n(75319),t)},1300:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StarknetAccountBase=void 0;const s=n(80075),o=n(11047),a=n(49096),c=n(19731);class u{constructor(e,t,n){this.chainGetter=e,this.chainId=t,this.getKeplr=n,this._isSendingTx=!1,this._isDeployingAccount=!1,(0,s.makeObservable)(this)}setIsSendingTx(e){this._isSendingTx=e}get isSendingTx(){return this._isSendingTx}setIsDeployingAccount(e){this._isDeployingAccount=e}get isDeployingAccount(){return this._isDeployingAccount}estimateDeployAccount(e,t,n,r,s){return i(this,void 0,void 0,(function*(){const i=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in i))throw new Error(`${this.chainId} is not starknet chain`);const o=new a.StoreAccount(i.starknet.rpc,e,this.chainId,this.getKeplr);return yield o.estimateAccountDeployFee({classHash:t,constructorCalldata:n,addressSalt:r},{version:"ETH"===s?"0x1":"0x3"})}))}deployAccount(e,t,n,r,s,{onFulfilled:o,onBroadcastFailed:c}={}){return i(this,void 0,void 0,(function*(){const i=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in i))throw new Error(`${this.chainId} is not starknet chain`);const u=new a.StoreAccount(i.starknet.rpc,e,this.chainId,this.getKeplr);try{const e=yield u.deployAccount({classHash:t,constructorCalldata:n,addressSalt:r},{version:"ETH"===s?"0x1":"0x3"});null==o||o(e)}catch(e){null==c||c(e)}}))}deployAccountWithFee(e,t,n,r,s,o){return i(this,void 0,void 0,(function*(){const i=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in i))throw new Error(`${this.chainId} is not starknet chain`);const c=new a.StoreAccount(i.starknet.rpc,e,this.chainId,this.getKeplr);try{return yield c.deployAccountWithFee({classHash:t,constructorCalldata:n,addressSalt:r},s,o)}catch(e){throw e}}))}estimateInvokeFee(e,t,n){return i(this,void 0,void 0,(function*(){const r=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in r))throw new Error(`${this.chainId} is not starknet chain`);const i=new a.StoreAccount(r.starknet.rpc,e,this.chainId,this.getKeplr);return yield i.estimateInvokeFee(t,{version:"ETH"===n?"0x1":"0x3"})}))}estimateInvokeFeeForSendTokenTx({currency:e,amount:t,sender:n,recipient:r},s){return i(this,void 0,void 0,(function*(){const i=(()=>{let n=new c.Dec(t);return n=n.mul(c.DecUtils.getTenExponentNInPrecisionRange(e.coinDecimals)),n.truncate().toString()})(),a=o.uint256.bnToUint256(i),u=[{contractAddress:e.contractAddress,calldata:[""===r?n:r,a],entrypoint:"transfer"}];return yield this.estimateInvokeFee(n,u,s)}))}execute(e,t,n){return i(this,void 0,void 0,(function*(){const r=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in r))throw new Error(`${this.chainId} is not starknet chain`);const i=new a.StoreAccount(r.starknet.rpc,e,this.chainId,this.getKeplr);return yield i.executeWithFee(t,n)}))}executeForSendTokenTx(e,t,n,r,s){return i(this,void 0,void 0,(function*(){const i=(()=>{let e=new c.Dec(t);return e=e.mul(c.DecUtils.getTenExponentNInPrecisionRange(n.coinDecimals)),e.truncate().toString()})(),a=o.uint256.bnToUint256(i),u=[{contractAddress:n.contractAddress,calldata:[r,a],entrypoint:"transfer"}];return yield this.execute(e,u,s)}))}getNonce(e){return i(this,void 0,void 0,(function*(){const t=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in t))throw new Error(`${this.chainId} is not starknet chain`);const n=new a.StoreAccount(t.starknet.rpc,e,this.chainId,this.getKeplr);return new c.Int(o.num.toBigInt(yield n.getNonce()))}))}}r([s.observable],u.prototype,"_isSendingTx",void 0),r([s.observable],u.prototype,"_isDeployingAccount",void 0),r([s.action],u.prototype,"setIsSendingTx",null),r([s.action],u.prototype,"setIsDeployingAccount",null),t.StarknetAccountBase=u},14543:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1300),t),i(n(42153),t)},49096:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StoreAccount=void 0;const i=n(11047);class s extends i.Account{constructor(e,t,n,r){super({nodeUrl:e},t,"","1"),this.rpc=e,this.address=t,this.keplrChainId=n,this.getKeplr=r}deployAccount({classHash:e,constructorCalldata:t=[],addressSalt:n=0,contractAddress:s},o={}){return r(this,void 0,void 0,(function*(){const r=o.version;if("0x1"!==r&&"0x3"!==r)throw new Error(`Invalid version: ${r}`);const a=yield this.getChainId(),c=i.CallData.compile(t),u=null!=s?s:i.hash.calculateContractAddressFromHash(n,e,c,0),d=yield this.getUniversalSuggestedFee(r,{type:i.TransactionType.DEPLOY_ACCOUNT,payload:{classHash:e,constructorCalldata:c,addressSalt:n,contractAddress:u}},o),l=yield this.getKeplr();if(!l)throw new Error("Keplr is not initialized");const{transaction:h,signature:p}=yield l.signStarknetDeployAccountTransaction(this.keplrChainId,Object.assign(Object.assign({},i.stark.v3Details(o)),{classHash:e,constructorCalldata:c,contractAddress:u,addressSalt:n,chainId:a,resourceBounds:d.resourceBounds,maxFee:d.maxFee,version:r,nonce:0}));return this.deployAccountContract({classHash:e,addressSalt:n,constructorCalldata:t,signature:p},Object.assign(Object.assign({},i.stark.v3Details(h)),h))}))}deployAccountWithFee({classHash:e,constructorCalldata:t=[],addressSalt:n=0,contractAddress:s},o,a){return r(this,void 0,void 0,(function*(){if(a){const{transaction:{classHash:e,addressSalt:t,constructorCalldata:n},signature:r}=a;return this.deployAccountContract({classHash:e,addressSalt:t,constructorCalldata:n,signature:r},a.transaction)}const r=yield this.getChainId(),c=i.CallData.compile(t),u=null!=s?s:i.hash.calculateContractAddressFromHash(n,e,c,0),d=(()=>{switch(o.type){case"ETH":return{classHash:e,constructorCalldata:c,contractAddress:u,addressSalt:n,version:"0x1",nonce:0,chainId:r,maxFee:i.num.toHex(o.maxFee),resourceBounds:{l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}},tip:"0x0",paymasterData:[],accountDeploymentData:[],nonceDataAvailabilityMode:"L1",feeDataAvailabilityMode:"L1"};case"STRK":return{classHash:e,constructorCalldata:c,contractAddress:u,addressSalt:n,version:"0x3",nonce:0,chainId:r,resourceBounds:{l1_gas:{max_amount:i.num.toHex(o.gas),max_price_per_unit:i.num.toHex(o.maxGasPrice)},l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}},tip:"0x0",paymasterData:[],accountDeploymentData:[],nonceDataAvailabilityMode:"L1",feeDataAvailabilityMode:"L1"};default:throw new Error("Invalid fee type")}})(),l=yield this.getKeplr();if(!l)throw new Error("Keplr is not initialized");const{transaction:h,signature:p}=yield l.signStarknetDeployAccountTransaction(this.keplrChainId,d);return this.deployAccountContract({classHash:e,addressSalt:n,constructorCalldata:t,signature:p},Object.assign(Object.assign({},i.stark.v3Details(h)),h))}))}execute(e,t,n={}){var s;return r(this,void 0,void 0,(function*(){const r=void 0===t||Array.isArray(t)?n:t,o=Array.isArray(e)?e:[e],a=i.num.toBigInt(null!==(s=r.nonce)&&void 0!==s?s:yield this.getNonce()),c=r.version;if("0x1"!==c&&"0x3"!==c)throw new Error(`Invalid version: ${c}`);const u=yield this.getUniversalSuggestedFee(c,{type:i.TransactionType.INVOKE,payload:e},Object.assign(Object.assign({},r),{version:c})),d=yield this.getChainId(),l=Object.assign(Object.assign({},i.stark.v3Details(r)),{resourceBounds:u.resourceBounds,walletAddress:this.address,nonce:a,maxFee:u.maxFee,version:c,chainId:d,cairoVersion:yield this.getCairoVersion()}),h=yield this.getKeplr();if(!h)throw new Error("Keplr is not initialized");const{transactions:p,details:f,signature:g}=yield h.signStarknetTx(this.keplrChainId,o,l),y=i.transaction.getExecuteCalldata(p,yield this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:y,signature:g},f)}))}executeWithFee(e,t){return r(this,void 0,void 0,(function*(){const n=yield this.getNonce(),r=yield this.getChainId(),s=(()=>{switch(t.type){case"ETH":return{version:"0x1",walletAddress:this.address,nonce:n,chainId:r,cairoVersion:this.cairoVersion,skipValidate:!1,maxFee:i.num.toHex(t.maxFee)};case"STRK":return{version:"0x3",walletAddress:this.address,nonce:n,chainId:r,cairoVersion:this.cairoVersion,skipValidate:!1,resourceBounds:{l1_gas:{max_amount:i.num.toHex(t.gas),max_price_per_unit:i.num.toHex(t.maxGasPrice)},l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}},tip:"0x0",paymasterData:[],accountDeploymentData:[],nonceDataAvailabilityMode:"L1",feeDataAvailabilityMode:"L1"};default:throw new Error("Invalid fee type")}})(),o=yield this.getKeplr();if(!o)throw new Error("Keplr is not initialized");const{transactions:a,details:c,signature:u}=yield o.signStarknetTx(this.keplrChainId,e,s),d=i.transaction.getExecuteCalldata(a,yield this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:d,signature:u},c)}))}}t.StoreAccount=s},42153:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StarknetAccountStore=void 0;const r=n(11169),i=n(1300);class s extends r.HasMapStore{constructor(e,t){super((n=>new i.StarknetAccountBase(e,n,t))),this.chainGetter=e,this.getKeplr=t}getAccount(e){const t=this.chainGetter.getModularChain(e);if(!("starknet"in t))throw new Error(`${e} is not starknet chain`);return this.get(t.chainId)}}t.StarknetAccountStore=s},34310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.starknetERC20ContractABI=void 0,t.starknetERC20ContractABI=[{members:[{name:"low",offset:0,type:"felt"},{name:"high",offset:1,type:"felt"}],name:"Uint256",size:2,type:"struct"},{inputs:[{name:"name",type:"felt"},{name:"symbol",type:"felt"},{name:"recipient",type:"felt"}],name:"constructor",outputs:[],type:"constructor"},{inputs:[],name:"name",outputs:[{name:"name",type:"felt"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{name:"symbol",type:"felt"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{name:"totalSupply",type:"Uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{name:"decimals",type:"felt"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"felt"}],name:"balanceOf",outputs:[{name:"balance",type:"Uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"felt"},{name:"spender",type:"felt"}],name:"allowance",outputs:[{name:"remaining",type:"Uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"recipient",type:"felt"},{name:"amount",type:"Uint256"}],name:"transfer",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"sender",type:"felt"},{name:"recipient",type:"felt"},{name:"amount",type:"Uint256"}],name:"transferFrom",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"spender",type:"felt"},{name:"amount",type:"Uint256"}],name:"approve",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"spender",type:"felt"},{name:"added_value",type:"Uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"spender",type:"felt"},{name:"subtracted_value",type:"Uint256"}],name:"decreaseAllowance",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"recipient",type:"felt"},{name:"amount",type:"Uint256"}],name:"mint",outputs:[],type:"function"},{inputs:[{name:"user",type:"felt"},{name:"amount",type:"Uint256"}],name:"burn",outputs:[],type:"function"}]},19702:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28051),t),i(n(34310),t),i(n(14543),t)},18039:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryAccountNonce=t.ObservableQueryAccountNonceInner=void 0;const r=n(75137);class i extends r.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"starknet_getNonce",{contract_address:r}),this.address=r}}t.ObservableQueryAccountNonceInner=i;class s extends r.ObservableStarknetChainJsonRpcQueryMap{constructor(e,t,n){super(e,t,n,(r=>new i(e,t,n,r)))}getNonce(e){return this.get(e)}}t.ObservableQueryAccountNonce=s},79254:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStarknetERC20Balance=t.ObservableQueryStarknetERC20BalanceImpl=void 0;const i=n(19731),s=n(80075),o=n(89642),a=n(75137),c=n(11047);class u extends a.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r,i,o){super(e,t,n,"starknet_call",{request:{contract_address:o,calldata:[i],entry_point_selector:"0x2e4263afad30923c891518314c3c95dbe830a16874e8abc5777a9a20b54c76e"}}),this.denomHelper=r,this.starknetHexAddress=i,this.contractAddress=o,(0,s.makeObservable)(this)}get balance(){const e=this.currency;return this.response&&this.response.data?new i.CoinPretty(e,new i.Int(new c.CairoUint256({low:this.response.data[0],high:this.response.data[1]}).toBigInt())):new i.CoinPretty(e,new i.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;if(!("starknet"in this.chainGetter.getModularChain(this.chainId)))throw new Error(`The chain (${this.chainId}) doesn't support starknet`);const t=this.chainGetter.getModularChainInfoImpl(this.chainId).getCurrencies("starknet").find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${this.contractAddress}`);return t}}r([s.computed],u.prototype,"balance",null),r([s.computed],u.prototype,"currency",null),t.ObservableQueryStarknetERC20BalanceImpl=u,t.ObservableQueryStarknetERC20Balance=class{constructor(e){this.sharedContext=e,this.map=new Map}getBalance(e,t,n,r){const i=`${e}/${n}/${r}`,s=this.map.get(i);if(s)return s;const a=new o.DenomHelper(r),c=t.getModularChain(e);if("erc20"!==a.type||!("starknet"in c))return;const d=new u(this.sharedContext,e,t,a,n,a.contractAddress);return this.map.set(i,d),d}}},28450:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStarknetERC20ContractInfo=t.ObservableQueryStarknetERC20ContactInfoInner=t.ObservableQueryStarknetERC20Metadata=t.ObservableQueryStarknetERC20MetadataInner=t.ObservableQueryStarknetERC20MetadataDecimals=t.ObservableQueryStarknetERC20MetadataSymbol=void 0;const i=n(11169),s=n(80075),o=n(75137),a=n(11047);class c extends o.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"starknet_call",{request:{contract_address:r,calldata:[],entry_point_selector:"0x216b05c387bab9ac31918a3e61672f4618601f3c598a2f3f2710f37053e1ea4"}}),this.contractAddress=r,(0,s.makeObservable)(this)}canFetch(){return super.canFetch()&&""!==this.contractAddress}get symbol(){if(this.response)try{return a.shortString.decodeShortString(this.response.data[0])}catch(e){console.log(e)}}}r([s.computed],c.prototype,"symbol",null),t.ObservableQueryStarknetERC20MetadataSymbol=c;class u extends o.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"starknet_call",{request:{contract_address:r,calldata:[],entry_point_selector:"0x4c4fb1ab068f6039d5780c68dd0fa2f8742cceb3426d19667778ca7f3518a9"}}),this.contractAddress=r,(0,s.makeObservable)(this)}canFetch(){return super.canFetch()&&""!==this.contractAddress}get decimals(){if(this.response)try{return parseInt(this.response.data[0])}catch(e){console.log(e)}}}r([s.computed],u.prototype,"decimals",null),t.ObservableQueryStarknetERC20MetadataDecimals=u;class d{constructor(e,t,n,r){this.sharedContext=e,this._querySymbol=new c(e,t,n,r),this._queryDecimals=new u(e,t,n,r)}get querySymbol(){return this._querySymbol}get queryDecimals(){return this._queryDecimals}get symbol(){return this._querySymbol.symbol}get decimals(){return this._queryDecimals.decimals}}t.ObservableQueryStarknetERC20MetadataInner=d;class l extends i.HasMapStore{constructor(e,t,n){super((e=>new d(this.sharedContext,this.chainId,this.chainGetter,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n}get(e){return super.get(e)}}t.ObservableQueryStarknetERC20Metadata=l;class h extends d{constructor(e,t,n,r){super(e,t,n,r),this.contractAddress=r}get tokenInfo(){if(void 0!==this.symbol&&void 0!==this.decimals)return{decimals:this.decimals,symbol:this.symbol}}get isFetching(){return this._querySymbol.isFetching||this._queryDecimals.isFetching}get error(){return this._querySymbol.error||this._queryDecimals.error}}r([s.computed],h.prototype,"tokenInfo",null),t.ObservableQueryStarknetERC20ContactInfoInner=h;class p extends i.HasMapStore{constructor(e,t,n){super((e=>new h(this.sharedContext,this.chainId,this.chainGetter,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n}getQueryContract(e){return this.get(e)}}t.ObservableQueryStarknetERC20ContractInfo=p},28051:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StarknetQueriesStore=void 0;const r=n(79254),i=n(28450),s=n(23816),o=n(18039);t.StarknetQueriesStore=class{constructor(e,t,n){this.sharedContext=e,this.chainGetter=t,this.tokenContractListURL=n,this.map=new Map}get(e){const t=this.map.get(e);if(t)return t;const n=new a(this.sharedContext,e,this.chainGetter,this.tokenContractListURL);return this.map.set(e,n),n}};class a{constructor(e,t,n,a){this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.tokenContractListURL=a,this.queryStarknetERC20Balance=new r.ObservableQueryStarknetERC20Balance(e),this.queryStarknetERC20ContractInfo=new i.ObservableQueryStarknetERC20ContractInfo(e,t,n),this.queryTokenContracts=new s.ObservableQueryTokenContracts(e,t,a),this.queryAccountNonce=new o.ObservableQueryAccountNonce(e,t,n)}}},75137:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableStarknetChainJsonRpcQueryMap=t.ObservableStarknetChainJsonRpcQuery=void 0;const r=n(11169);class i extends r.ObservableJsonRPCQuery{constructor(e,t,n,r,i){let s="";const o=n.getModularChain(t);"starknet"in o&&(s=o.starknet.rpc),super(e,s,"",r,Object.assign({block_id:"latest"},i)),this._chainId=t,this.chainGetter=n}get chainId(){return this._chainId}}t.ObservableStarknetChainJsonRpcQuery=i;class s extends r.HasMapStore{constructor(e,t,n,r){super(r),this.sharedContext=e,this.chainId=t,this.chainGetter=n}}t.ObservableStarknetChainJsonRpcQueryMap=s},23816:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTokenContracts=void 0;const r=n(11169);class i extends r.ObservableQuery{constructor(e,t,n){super(e,n,`tokens/${t}`)}get tokenContracts(){return this.response&&this.response.data?this.response.data:[]}}t.ObservableQueryTokenContracts=i},21330:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountSetBaseSuper=t.AccountSetBase=t.WalletStatus=void 0;const s=n(80075),o=n(89642);var a;!function(e){e.NotInit="NotInit",e.Loading="Loading",e.Loaded="Loaded",e.NotExist="NotExist",e.Rejected="Rejected"}(a=t.WalletStatus||(t.WalletStatus={}));class c{constructor(e,t,n,r,i){this.eventListener=e,this.chainGetter=t,this.chainId=n,this.sharedContext=r,this.opts=i,this._walletVersion=void 0,this._walletStatus=a.NotInit,this._rejectionReason=void 0,this._name="",this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress="",this._isNanoLedger=!1,this._isKeystone=!1,this._txTypeInProgress="",this.hasInited=!1,this.makeSendTokenTxFns=[],this.handleInit=()=>this.init(),(0,s.makeObservable)(this),this._pubKey=new Uint8Array,i.autoInit&&this.init()}getKeplr(){return this.sharedContext.getKeplr()}registerMakeSendTokenFn(e){this.makeSendTokenTxFns.push(e)}enable(e){return i(this,void 0,void 0,(function*(){if("cosmos"in this.chainGetter.getModularChain(e)&&this.opts.suggestChain){const t=yield this.sharedContext.getKeplr();this.opts.suggestChainFn?yield this.sharedContext.suggestChain((()=>i(this,void 0,void 0,(function*(){t&&this.opts.suggestChainFn&&(yield this.opts.suggestChainFn(t,this.chainGetter.getChain(e)))})))):yield this.sharedContext.suggestChain((()=>i(this,void 0,void 0,(function*(){t&&(yield t.experimentalSuggestChain(this.chainGetter.getChain(e).embedded))}))))}yield this.sharedContext.enable(e)}))}*init(){if(this.walletStatus===a.NotExist)return;this.hasInited||this.eventListener.addEventListener("keplr_keystorechange",this.handleInit),this.hasInited=!0,this._walletStatus=a.Loading;const e=yield*(0,o.toGenerator)(this.sharedContext.getKeplr());if(!e)return void(this._walletStatus=a.NotExist);this._walletVersion=e.version;try{yield this.enable(this.chainId)}catch(e){return console.log(e),this._walletStatus=a.Rejected,void(this._rejectionReason=e)}const t="starknet"in this.chainGetter.getModularChain(this.chainId);yield this.sharedContext.getKeyMixed(this.chainId,t,(e=>{if("fulfilled"===e.status){const t=e.value;"bech32Address"in t?(this._bech32Address=t.bech32Address,this._ethereumHexAddress=t.ethereumHexAddress,this._starknetHexAddress="",this._isNanoLedger=t.isNanoLedger,this._isKeystone=t.isKeystone,this._name=t.name,this._pubKey=t.pubKey):(this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress=t.hexAddress,this._isNanoLedger=t.isNanoLedger,this._isKeystone=!1,this._name=t.name,this._pubKey=t.pubKey),this._walletStatus=a.Loaded}else this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress="",this._isNanoLedger=!1,this._isKeystone=!1,this._name="",this._pubKey=new Uint8Array(0),this._walletStatus=a.Rejected,this._rejectionReason=e.reason;this._walletStatus!==a.Rejected&&(this._rejectionReason=void 0)}))}disconnect(){this._walletStatus=a.NotInit,this.hasInited=!1,this.eventListener.removeEventListener("keplr_keystorechange",this.handleInit),this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress="",this._isNanoLedger=!1,this._isKeystone=!1,this._name="",this._pubKey=new Uint8Array(0),this._rejectionReason=void 0}get walletVersion(){return this._walletVersion}get isReadyToSendTx(){return this.walletStatus===a.Loaded&&""!==this.bech32Address}get isReadyToSendMsgs(){return this.walletStatus===a.Loaded&&""!==this.bech32Address}makeSendTokenTx(e,t,n){for(let r=0;r<this.makeSendTokenTxFns.length;r++){const i=(0,this.makeSendTokenTxFns[r])(e,t,n);if(i)return i}const r=new o.DenomHelper(t.coinMinimalDenom);throw new Error(`Unsupported type of currency (${r.type})`)}get walletStatus(){return this._walletStatus}get rejectionReason(){return this._rejectionReason}get name(){return this._name}get bech32Address(){return this._bech32Address}get pubKey(){return this._pubKey.slice()}get isNanoLedger(){return this._isNanoLedger}get isKeystone(){return this._isKeystone}get txTypeInProgress(){return this._txTypeInProgress}get isSendingMsg(){return this.txTypeInProgress}get hasEthereumHexAddress(){var e,t;const n=this.chainGetter.getChain(this.chainId);return null!=n.evm||60===n.bip44.coinType||!!(null===(e=n.features)||void 0===e?void 0:e.includes("eth-address-gen"))||!!(null===(t=n.features)||void 0===t?void 0:t.includes("eth-key-sign"))}get ethereumHexAddress(){return this._ethereumHexAddress}get starknetHexAddress(){return this._starknetHexAddress}}r([s.observable],c.prototype,"_walletVersion",void 0),r([s.observable],c.prototype,"_walletStatus",void 0),r([s.observable.ref],c.prototype,"_rejectionReason",void 0),r([s.observable],c.prototype,"_name",void 0),r([s.observable],c.prototype,"_bech32Address",void 0),r([s.observable],c.prototype,"_ethereumHexAddress",void 0),r([s.observable],c.prototype,"_starknetHexAddress",void 0),r([s.observable],c.prototype,"_isNanoLedger",void 0),r([s.observable],c.prototype,"_isKeystone",void 0),r([s.observable],c.prototype,"_txTypeInProgress",void 0),r([s.flow],c.prototype,"init",null),r([s.action],c.prototype,"disconnect",null),r([s.computed],c.prototype,"isReadyToSendTx",null),r([s.computed],c.prototype,"isReadyToSendMsgs",null),t.AccountSetBase=c;class u extends c{constructor(...e){super(...e),(0,s.makeObservable)(this)}setTxTypeInProgress(e){this._txTypeInProgress=e}}r([s.action],u.prototype,"setTxTypeInProgress",null),t.AccountSetBaseSuper=u},25009:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountSharedContext=void 0;const i=n(70223);t.AccountSharedContext=class{constructor(e){this._getKeplr=e,this.suggestChainDebounceTimer=new i.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=[];for(const n of e)try{yield n.args[0](),t.push({status:"fulfilled",value:void 0})}catch(e){t.push({status:"rejected",reason:e})}return t})))),this.enableDebounceTimer=new i.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=yield this.getKeplr();if(!t)return e.map((()=>({status:"rejected",reason:new Error("Keplr is not installed")})));const n=new Set(e.map((e=>e.args[0]))),r=Array.from(n);try{return yield t.enable(r),e.map((()=>({status:"fulfilled",value:void 0})))}catch(t){return e.map((()=>({status:"rejected",reason:t})))}})))),this.getKeyDebounceTimer=new i.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=yield this.getKeplr();if(!t)return e.map((()=>({status:"rejected",reason:new Error("Keplr is not installed")})));const n=new Set(e.map((e=>e.args[0]))),r=Array.from(n),i=yield t.getKeysSettled(r),s=new Map;for(let e=0;e<r.length;e++){const t=r[e],n=i[e];s.set(t,n)}return e.map((e=>s.get(e.args[0])))})))),this.getKeyMixedDebounceTimer=new i.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=yield this.getKeplr();if(!t)return e.map((()=>({status:"rejected",reason:new Error("Keplr is not installed")})));const n=e.filter((e=>!e.args[1])),r=e.filter((e=>e.args[1])),i=new Set(n.map((e=>e.args[0]))),s=Array.from(i),o=new Set(r.map((e=>e.args[0]))),a=Array.from(o),c=new Map;if(s.length>0){const e=yield t.getKeysSettled(s);for(let t=0;t<s.length;t++){const n=s[t],r=e[t];c.set(n,r)}}if(a.length>0){const e=yield t.getStarknetKeysSettled(a);for(let t=0;t<a.length;t++){const n=a[t],r=e[t];c.set(n,r)}}return e.map((e=>c.get(e.args[0])))}))))}getKeplr(){return r(this,void 0,void 0,(function*(){if(this.promiseGetKeplr)return this.promiseGetKeplr;const e=new Promise(((e,t)=>{this._getKeplr().then((t=>{this.promiseGetKeplr=void 0,e(t)})).catch((e=>{this.promiseGetKeplr=void 0,t(e)}))}));return this.promiseGetKeplr=e}))}suggestChain(e){return new Promise(((t,n)=>{this.suggestChainDebounceTimer.call([e],(e=>{"fulfilled"===e.status?t():n(e.reason)}))}))}enable(e){return new Promise(((t,n)=>{this.enableDebounceTimer.call([e],(e=>{"fulfilled"===e.status?t():n(e.reason)}))}))}getKey(e,t){return this.getKeyDebounceTimer.call([e],t)}getKeyMixed(e,t,n){return this.getKeyMixedDebounceTimer.call([e,t],n)}}},84713:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CosmosAccountImpl=t.defaultCosmosMsgOpts=t.CosmosAccount=void 0;const s=n(21330),o=n(89642),a=n(19731),c=n(3542),u=n(30899),d=n(48976),l=n(22062),h=n(94465),p=n(18436),f=n(83612),g=n(94531),y=n(97021),m=i(n(39714)),v=n(48834),b=n(40515),w=n(86404),_=n(91428),C=n(86693),O=i(n(27808)),I=n(80075);t.CosmosAccount={use:e=>(n,r,i)=>{const s=e.msgOptsCreator?e.msgOptsCreator(i):void 0;return{cosmos:new S(n,r,i,e.queriesStore,(0,m.default)(t.defaultCosmosMsgOpts,s||{}),e)}}},t.defaultCosmosMsgOpts={send:{native:{type:"cosmos-sdk/MsgSend",gas:8e4}},ibcTransfer:{type:"cosmos-sdk/MsgTransfer",gas:45e4},delegate:{type:"cosmos-sdk/MsgDelegate",gas:25e4},undelegate:{type:"cosmos-sdk/MsgUndelegate",gas:25e4},redelegate:{type:"cosmos-sdk/MsgBeginRedelegate",gas:25e4},withdrawRewards:{type:"cosmos-sdk/MsgWithdrawDelegationReward",gas:14e4},govVote:{type:"cosmos-sdk/MsgVote",gas:25e4}};class S{constructor(e,t,n,r,i,s){this.base=e,this.chainGetter=t,this.chainId=n,this.queriesStore=r,this._msgOpts=i,this.txOpts=s,this.base.registerMakeSendTokenFn(this.processMakeSendTokenTx.bind(this))}get msgOpts(){return this._msgOpts}processMakeSendTokenTx(e,t,n){var r;if("native"===new o.DenomHelper(t.coinMinimalDenom).type){const i=(()=>{let n=new a.Dec(e);return n=n.mul(a.DecUtils.getPrecisionDec(t.coinDecimals)),n.truncate().toString()})();g.Bech32Address.validate(n,null===(r=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===r?void 0:r.bech32PrefixAccAddr);const s={type:this.msgOpts.send.native.type,value:{from_address:this.base.bech32Address,to_address:n,amount:[{denom:t.coinMinimalDenom,amount:i}]}};return this.makeTx("send",{aminoMsgs:[s],protoMsgs:[{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:l.MsgSend.encode({fromAddress:s.value.from_address,toAddress:s.value.to_address,amount:s.value.amount}).finish()}],rlpTypes:{MsgValue:[{name:"from_address",type:"string"},{name:"to_address",type:"string"},{name:"amount",type:"TypeAmount[]"}],TypeAmount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]}},(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===t.coinMinimalDenom));e&&e.fetch()}}))}}sendMsgs(e,t,n="",i,s,o){var a,u;return r(this,void 0,void 0,(function*(){let r,d,l,h;this.base.setTxTypeInProgress(e);try{"function"==typeof t&&(t=yield t());const e=yield this.broadcastMsgs(t,i,n,s);r=e.txHash,d=e.signDoc}catch(e){throw this.base.setTxTypeInProgress(""),(null===(a=this.txOpts.preTxEvents)||void 0===a?void 0:a.onBroadcastFailed)&&this.txOpts.preTxEvents.onBroadcastFailed(this.chainId,e),o&&"onBroadcastFailed"in o&&o.onBroadcastFailed&&o.onBroadcastFailed(e),e}o&&("function"==typeof o?h=o:(l=o.onBroadcasted,h=o.onFulfill)),(null===(u=this.txOpts.preTxEvents)||void 0===u?void 0:u.onBroadcasted)&&this.txOpts.preTxEvents.onBroadcasted(this.chainId,r),l&&l(r);const p=new g.TendermintTxTracer(this.chainGetter.getChain(this.chainId).rpc,"/websocket",{wsObject:this.txOpts.wsObject});p.traceTx(r).then((e=>{var t;p.close(),this.base.setTxTypeInProgress("");const n=(()=>{var e,t;return"fee"in d?d.fee.amount.map((e=>e.denom)):"authInfoBytes"in d&&null!==(t=null===(e=c.AuthInfo.decode(d.authInfoBytes).fee)||void 0===e?void 0:e.amount.map((e=>e.denom)))&&void 0!==t?t:[]})();for(const e of n){const t=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((t=>t.currency.coinMinimalDenom===e));t&&t.fetch()}e&&!e.hash&&(e.hash=v.Buffer.from(r).toString("hex")),(null===(t=this.txOpts.preTxEvents)||void 0===t?void 0:t.onFulfill)&&this.txOpts.preTxEvents.onFulfill(this.chainId,e),h&&h(e)}))}))}broadcastMsgs(e,t,n="",i){var a;return r(this,void 0,void 0,(function*(){if(this.base.walletStatus!==s.WalletStatus.Loaded)throw new Error(`Wallet is not loaded: ${this.base.walletStatus}`);const l=!e.aminoMsgs||0===e.aminoMsgs.length,h=e.aminoMsgs||[],p=e.protoMsgs;if(0===p.length)throw new Error("There is no msg to send");if(!l&&h.length!==p.length)throw new Error("The length of aminoMsgs and protoMsgs are different");const f=yield g.BaseAccount.fetchFromRest(this.chainGetter.getChain(this.chainId).rest,this.base.bech32Address,!0),y=!0===(null===(a=this.chainGetter.getChain(this.chainId).features)||void 0===a?void 0:a.includes("eth-key-sign")),m=y&&this.base.isNanoLedger;if(m&&!e.rlpTypes)throw new Error("RLP types information is needed for signing tx for ethermint chain with ledger");if(m&&l)throw new Error("EIP712 signing is not supported for proto signing");const _=yield this.base.getKeplr(),C=yield(()=>r(this,void 0,void 0,(function*(){if(l)return yield this.createSignedTxWithDirectSign(_,f,e.protoMsgs,t,n,i);{const s={chain_id:this.chainId,account_number:f.getAccountNumber().toString(),sequence:f.getSequence().toString(),fee:t,msgs:h,memo:(0,o.escapeHTML)(n)},a=this.chainId.startsWith("injective"),l=this.chainId.startsWith("stratos");m&&(a?s.timeout_height=Number.MAX_SAFE_INTEGER.toString():s.fee=Object.assign(Object.assign({},s.fee),{feePayer:this.base.bech32Address}));const C=(0,o.sortObjectByKey)(s);let O=_.signAmino.bind(_);(null==i?void 0:i.signAmino)&&(O=i.signAmino);let I=_.experimentalSignEIP712CosmosTx_v0.bind(_);(null==i?void 0:i.experimentalSignEIP712CosmosTx_v0)&&(I=i.experimentalSignEIP712CosmosTx_v0);const S=yield(()=>r(this,void 0,void 0,(function*(){return m?yield I(this.chainId,this.base.bech32Address,(0,b.getEip712TypedDataBasedOnChainId)(this.chainId,e),C,i):yield O(this.chainId,this.base.bech32Address,C,i)})))();return{tx:c.TxRaw.encode({bodyBytes:c.TxBody.encode(c.TxBody.fromPartial({messages:p,timeoutHeight:S.signed.timeout_height,memo:S.signed.memo,extensionOptions:m?[{typeUrl:a?"/injective.types.v1beta1.ExtensionOptionsWeb3Tx":"/ethermint.types.v1.ExtensionOptionsWeb3Tx",value:w.ExtensionOptionsWeb3Tx.encode(w.ExtensionOptionsWeb3Tx.fromPartial({typedDataChainId:g.EthermintChainIdHelper.parse(this.chainId).ethChainId.toString(),feePayer:a?void 0:S.signed.fee.feePayer,feePayerSig:a?void 0:v.Buffer.from(S.signature.signature,"base64")})).finish()}]:void 0})).finish(),authInfoBytes:c.AuthInfo.encode({signerInfos:[{publicKey:{typeUrl:y?a?"/injective.crypto.v1beta1.ethsecp256k1.PubKey":l?"/stratos.crypto.v1.ethsecp256k1.PubKey":"/ethermint.crypto.v1.ethsecp256k1.PubKey":"/cosmos.crypto.secp256k1.PubKey",value:d.PubKey.encode({key:v.Buffer.from(S.signature.pub_key.value,"base64")}).finish()},modeInfo:{single:{mode:u.SignMode.SIGN_MODE_LEGACY_AMINO_JSON},multi:void 0},sequence:S.signed.sequence}],fee:c.Fee.fromPartial({amount:S.signed.fee.amount,gasLimit:S.signed.fee.gas,payer:m&&!a?S.signed.fee.feePayer:void 0})}).finish(),signatures:!m||a?[v.Buffer.from(S.signature.signature,"base64")]:[new Uint8Array(0)]}).finish(),signDoc:S.signed}}})))();let O=_.sendTx.bind(_);return(null==i?void 0:i.sendTx)&&(O=i.sendTx),{txHash:yield O(this.chainId,C.tx,"sync"),signDoc:C.signDoc}}))}createSignedTxWithDirectSign(e,t,n,i,s,o){var a;return r(this,void 0,void 0,(function*(){const r=!0===(null===(a=this.chainGetter.getChain(this.chainId).features)||void 0===a?void 0:a.includes("eth-key-sign")),l=this.chainId.startsWith("injective"),h=this.chainId.startsWith("stratos");let p=e.signDirect.bind(e);(null==o?void 0:o.signDirect)&&(p=o.signDirect);const f=yield p(this.chainId,this.base.bech32Address,{bodyBytes:c.TxBody.encode(c.TxBody.fromPartial({messages:n,memo:s})).finish(),authInfoBytes:c.AuthInfo.encode({signerInfos:[{publicKey:{typeUrl:r?l?"/injective.crypto.v1beta1.ethsecp256k1.PubKey":h?"/stratos.crypto.v1.ethsecp256k1.PubKey":"/ethermint.crypto.v1.ethsecp256k1.PubKey":"/cosmos.crypto.secp256k1.PubKey",value:d.PubKey.encode({key:this.base.pubKey}).finish()},modeInfo:{single:{mode:u.SignMode.SIGN_MODE_DIRECT},multi:void 0},sequence:t.getSequence().toString()}],fee:c.Fee.fromPartial({amount:i.amount.map((e=>({denom:e.denom,amount:e.amount.toString()}))),gasLimit:i.gas})}).finish(),chainId:this.chainId,accountNumber:O.default.fromString(t.getAccountNumber().toString())},o);return{tx:c.TxRaw.encode({bodyBytes:f.signed.bodyBytes,authInfoBytes:f.signed.authInfoBytes,signatures:[v.Buffer.from(f.signature.signature,"base64")]}).finish(),signDoc:f.signed}}))}simulateTx(e,t,n=""){return r(this,void 0,void 0,(function*(){const r=yield g.BaseAccount.fetchFromRest(this.chainGetter.getChain(this.chainId).rest,this.base.bech32Address,!0),i=c.TxRaw.encode({bodyBytes:c.TxBody.encode(c.TxBody.fromPartial({messages:e,memo:n})).finish(),authInfoBytes:c.AuthInfo.encode({signerInfos:[c.SignerInfo.fromPartial({modeInfo:{single:{mode:u.SignMode.SIGN_MODE_LEGACY_AMINO_JSON},multi:void 0},sequence:r.getSequence().toString()})],fee:c.Fee.fromPartial({amount:t.amount.map((e=>({amount:e.amount,denom:e.denom})))})}).finish(),signatures:[new Uint8Array(64)]}).finish(),s=yield(0,C.simpleFetch)(this.chainGetter.getChain(this.chainId).rest,"/cosmos/tx/v1beta1/simulate",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({tx_bytes:v.Buffer.from(i).toString("base64")})}),o=parseInt(s.data.gas_info.gas_used);if(Number.isNaN(o))throw new Error(`Invalid integer gas: ${s.data.gas_info.gas_used}`);return{gasUsed:o}}))}makeTx(e,t,n){let i=e;const s=(e={},n="")=>r(this,void 0,void 0,(function*(){var r;return"function"==typeof t&&(t=yield t()),this.simulateTx(t.protoMsgs,{amount:null!==(r=e.amount)&&void 0!==r?r:[]},n)})),o=(e,s="",o,c)=>r(this,void 0,void 0,(function*(){if(e.gas<0)throw new Error("Gas is zero or negative");const r={gas:e.gas.toString(),amount:e.gasPrice?[{denom:e.gasPrice.denom,amount:e.gasPrice.amount.mul(new a.Dec(e.gas)).truncate().toString()}]:[]};return this.sendMsgs(i,t,s,r,o,(0,b.txEventsWithPreOnFulfill)(c,n))}));return{ui:{type:()=>i,overrideType:e=>{i=e}},msgs:()=>r(this,void 0,void 0,(function*(){return"function"==typeof t&&(t=yield t()),t})),simulate:s,simulateAndSend:(e,t="",n,a)=>r(this,void 0,void 0,(function*(){this.base.setTxTypeInProgress(i);try{const{gasUsed:r}=yield s({},t);if(r<0)throw new Error("Gas estimated is zero or negative");const i=Math.floor(e.gasAdjustment*r);return o({gas:i,gasPrice:e.gasPrice},t,n,a)}catch(e){throw this.base.setTxTypeInProgress(""),e}})),send:(e,s="",o,a)=>r(this,void 0,void 0,(function*(){return this.sendMsgs(i,t,s,e,o,(0,b.txEventsWithPreOnFulfill)(a,n))})),sendWithGasPrice:o}}makePacketForwardIBCTransferTx(e,t,n,i,o){var a;if(0===t.length)throw new Error("No channels");const c=t[t.length-1].counterpartyChainId,u=this.chainGetter.getChain(c);if(g.Bech32Address.validate(o,null===(a=u.bech32Config)||void 0===a?void 0:a.bech32PrefixAccAddr),null==this.chainGetter.getChain(t[0].counterpartyChainId).bech32Config)throw new Error("Counterparty chain bech32 config is not set");return this.makeIBCTransferTxWithAsyncMemoConstructor(t[0],n,i,(()=>r(this,void 0,void 0,(function*(){if(1===t.length){const e=this.chainGetter.getChain(t[0].counterpartyChainId);if(!e.bech32Config)throw new Error("Bech32 config is not set");return g.Bech32Address.fromBech32(o).toBech32(e.bech32Config.bech32PrefixAccAddr)}const n=t[0],r=this.chainGetter.getChain(n.counterpartyChainId),i=e.getAccount(r.chainId);if(i.walletStatus!==s.WalletStatus.Loaded&&i.init(),i.walletStatus===s.WalletStatus.Loading&&(yield new Promise((e=>{i.walletStatus!==s.WalletStatus.Loaded?(0,I.autorun)((()=>{i.walletStatus===s.WalletStatus.Loaded&&e()})):e()}))),i.walletStatus!==s.WalletStatus.Loaded)throw new Error(`The account of ${r.chainId} is not loaded: ${i.walletStatus}`);return i.bech32Address}))),(()=>r(this,void 0,void 0,(function*(){const n={};let r;if(t.length>1){const i=t.slice(1);for(let t=0;t<i.length;t++){const a=i[t];if(t===i.length-1){const e=this.chainGetter.getChain(a.counterpartyChainId);if(!e.bech32Config)throw new Error("Bech32 config is not set");g.Bech32Address.validate(o,e.bech32Config.bech32PrefixAccAddr);const t={receiver:o,port:a.portId,channel:a.channelId};r?r.next={forward:t}:n.forward=t,r=t}else{const t=this.chainGetter.getChain(a.counterpartyChainId),i=e.getAccount(t.chainId);if(i.walletStatus!==s.WalletStatus.Loaded&&i.init(),i.walletStatus===s.WalletStatus.Loading&&(yield new Promise((e=>{i.walletStatus!==s.WalletStatus.Loaded?(0,I.autorun)((()=>{i.walletStatus===s.WalletStatus.Loaded&&e()})):e()}))),i.walletStatus!==s.WalletStatus.Loaded)throw new Error(`The account of ${t.chainId} is not loaded: ${i.walletStatus}`);const o={receiver:i.bech32Address,port:a.portId,channel:a.channelId};r?r.next={forward:o}:n.forward=o,r=o}}}return Object.keys(n).length>0?JSON.stringify(n):void 0}))))}makeIBCTransferTx(e,t,n,i,s){return this.makeIBCTransferTxWithAsyncMemoConstructor(e,t,n,i,(()=>r(this,void 0,void 0,(function*(){return s}))))}makeIBCTransferTxWithAsyncMemoConstructor(e,t,n,i,s){if("native"!==new o.DenomHelper(n.coinMinimalDenom).type)throw new Error("Only native token can be sent via IBC");const c=(()=>{let e=new a.Dec(t);return e=e.mul(a.DecUtils.getPrecisionDec(n.coinDecimals)),e.truncate().toString()})(),u=this.queriesStore.get(e.counterpartyChainId).cosmos.queryRPCStatus;return this.makeTx("ibcTransfer",(()=>r(this,void 0,void 0,(function*(){var t;if(yield u.waitFreshResponse(),!u.network)throw new Error(`Failed to fetch the network chain id of ${e.counterpartyChainId}`);if(g.ChainIdHelper.parse(u.network).identifier!==g.ChainIdHelper.parse(e.counterpartyChainId).identifier)throw new Error(`Fetched the network chain id is different with counterparty chain id (${u.network}, ${e.counterpartyChainId})`);if(!u.latestBlockHeight||u.latestBlockHeight.equals(new a.Int("0")))throw new Error(`Failed to fetch the latest block of ${e.counterpartyChainId}`);const r=!0===(null===(t=this.chainGetter.getChain(this.chainId).features)||void 0===t?void 0:t.includes("eth-key-sign"))&&this.base.isNanoLedger,o=this.chainId.startsWith("injective");let d=yield s();"function"==typeof i&&(i=yield i()),r&&o&&(d||(d="IBC Transfer"));const l=r?"18446744073709551615":"0",p={type:this.msgOpts.ibcTransfer.type,value:{source_port:e.portId,source_channel:e.channelId,token:{denom:n.coinMinimalDenom,amount:c},sender:this.base.bech32Address,receiver:i,timeout_height:{revision_number:g.ChainIdHelper.parse(u.network).version.toString(),revision_height:u.latestBlockHeight.add(new a.Int("150")).toString()},timeout_timestamp:l,memo:d}};return"0"===p.value.timeout_height.revision_number&&delete p.value.timeout_height.revision_number,"0"===p.value.timeout_timestamp&&delete p.value.timeout_timestamp,d||delete p.value.memo,{aminoMsgs:(()=>!(this.base.isNanoLedger||!(this.chainId.startsWith("injective")||this.chainId.startsWith("stride")||this.chainGetter.getChain(this.chainId).hasFeature("ibc-go-v7-hot-fix"))))()?void 0:[p],protoMsgs:[{typeUrl:"/ibc.applications.transfer.v1.MsgTransfer",value:h.MsgTransfer.encode(h.MsgTransfer.fromPartial({sourcePort:p.value.source_port,sourceChannel:p.value.source_channel,token:p.value.token,sender:p.value.sender,receiver:p.value.receiver,timeoutHeight:{revisionNumber:p.value.timeout_height.revision_number?p.value.timeout_height.revision_number:"0",revisionHeight:p.value.timeout_height.revision_height},timeoutTimestamp:p.value.timeout_timestamp,memo:p.value.memo})).finish()}],rlpTypes:{MsgValue:[{name:"source_port",type:"string"},{name:"source_channel",type:"string"},{name:"token",type:"TypeToken"},{name:"sender",type:"string"},{name:"receiver",type:"string"},{name:"timeout_height",type:"TypeTimeoutHeight"},{name:"timeout_timestamp",type:"uint64"},...null!=d?[{name:"memo",type:"string"}]:[]],TypeToken:[{name:"denom",type:"string"},{name:"amount",type:"string"}],TypeTimeoutHeight:[{name:"revision_number",type:"uint64"},{name:"revision_height",type:"uint64"}]}}}))),(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===n.coinMinimalDenom));e&&e.fetch()}}))}sendIBCTransferMsg(e,t,n,i,s="",c={},u,d){var l,p;return r(this,void 0,void 0,(function*(){if("native"!==new o.DenomHelper(n.coinMinimalDenom).type)throw new Error("Only native token can be sent via IBC");const f=(()=>{let e=new a.Dec(t);return e=e.mul(a.DecUtils.getPrecisionDec(n.coinDecimals)),e.truncate().toString()})(),y=this.queriesStore.get(e.counterpartyChainId).cosmos.queryRPCStatus;yield this.sendMsgs("ibcTransfer",(()=>r(this,void 0,void 0,(function*(){if(yield y.waitFreshResponse(),!y.network)throw new Error(`Failed to fetch the network chain id of ${e.counterpartyChainId}`);if(g.ChainIdHelper.parse(y.network).identifier!==g.ChainIdHelper.parse(e.counterpartyChainId).identifier)throw new Error(`Fetched the network chain id is different with counterparty chain id (${y.network}, ${e.counterpartyChainId})`);if(!y.latestBlockHeight||y.latestBlockHeight.equals(new a.Int("0")))throw new Error(`Failed to fetch the latest block of ${e.counterpartyChainId}`);const t={type:this.msgOpts.ibcTransfer.type,value:{source_port:e.portId,source_channel:e.channelId,token:{denom:n.coinMinimalDenom,amount:f},sender:this.base.bech32Address,receiver:i,timeout_height:{revision_number:g.ChainIdHelper.parse(y.network).version.toString(),revision_height:y.latestBlockHeight.add(new a.Int("150")).toString()}}};return"0"===t.value.timeout_height.revision_number&&delete t.value.timeout_height.revision_number,{aminoMsgs:[t],protoMsgs:[{typeUrl:"/ibc.applications.transfer.v1.MsgTransfer",value:h.MsgTransfer.encode(h.MsgTransfer.fromPartial({sourcePort:t.value.source_port,sourceChannel:t.value.source_channel,token:t.value.token,sender:t.value.sender,receiver:t.value.receiver,timeoutHeight:{revisionNumber:t.value.timeout_height.revision_number?t.value.timeout_height.revision_number:"0",revisionHeight:t.value.timeout_height.revision_height}})).finish()}]}}))),s,{amount:null!==(l=c.amount)&&void 0!==l?l:[],gas:null!==(p=c.gas)&&void 0!==p?p:this.msgOpts.ibcTransfer.gas.toString()},u,(0,b.txEventsWithPreOnFulfill)(d,(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===n.coinMinimalDenom));e&&e.fetch()}})))}))}makeRevokeMsg(e,t){var n;g.Bech32Address.validate(e,null===(n=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===n?void 0:n.bech32PrefixAccAddr);const r=this.chainGetter.getChain(this.chainId),i="osmosis"===r.chainIdentifier||r.hasFeature("authz-msg-revoke-fixed")?{type:"cosmos-sdk/MsgRevoke",value:{granter:this.base.bech32Address,grantee:e,msg_type_url:t}}:{granter:this.base.bech32Address,grantee:e,msg_type_url:t};return this.makeTx("revoke",{aminoMsgs:[i],protoMsgs:[{typeUrl:"/cosmos.authz.v1beta1.MsgRevoke",value:_.MsgRevoke.encode({granter:this.base.bech32Address,grantee:e,msgTypeUrl:t}).finish()}]},(e=>{null!=e.code&&0!==e.code||this.queries.cosmos.queryAuthZGranter.getGranter(this.base.bech32Address).fetch()}))}makeDelegateTx(e,t){var n;g.Bech32Address.validate(t,null===(n=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===n?void 0:n.bech32PrefixValAddr);const r=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!r)throw new Error("Stake currency is null");let i=new a.Dec(e);i=i.mulTruncate(a.DecUtils.getPrecisionDec(r.coinDecimals));const s={type:this.msgOpts.delegate.type,value:{delegator_address:this.base.bech32Address,validator_address:t,amount:{denom:r.coinMinimalDenom,amount:i.truncate().toString()}}};return this.makeTx("delegate",{aminoMsgs:[s],protoMsgs:[{typeUrl:"/cosmos.staking.v1beta1.MsgDelegate",value:p.MsgDelegate.encode({delegatorAddress:s.value.delegator_address,validatorAddress:s.value.validator_address,amount:s.value.amount}).finish()}],rlpTypes:{MsgValue:[{name:"delegator_address",type:"string"},{name:"validator_address",type:"string"},{name:"amount",type:"TypeAmount"}],TypeAmount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]}},(e=>{null!=e.code&&0!==e.code||(this.queries.cosmos.queryValidators.getQueryStatus(y.BondStatus.Bonded).fetch(),this.queries.cosmos.queryDelegations.getQueryBech32Address(this.base.bech32Address).fetch(),this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch())}))}sendDelegateMsg(e,t,n="",i={},s,o){var c,u;return r(this,void 0,void 0,(function*(){const r=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!r)throw new Error("Stake currency is null");let d=new a.Dec(e);d=d.mulTruncate(a.DecUtils.getPrecisionDec(r.coinDecimals));const l={type:this.msgOpts.delegate.type,value:{delegator_address:this.base.bech32Address,validator_address:t,amount:{denom:r.coinMinimalDenom,amount:d.truncate().toString()}}};yield this.sendMsgs("delegate",{aminoMsgs:[l],protoMsgs:[{typeUrl:"/cosmos.staking.v1beta1.MsgDelegate",value:p.MsgDelegate.encode({delegatorAddress:l.value.delegator_address,validatorAddress:l.value.validator_address,amount:l.value.amount}).finish()}]},n,{amount:null!==(c=i.amount)&&void 0!==c?c:[],gas:null!==(u=i.gas)&&void 0!==u?u:this.msgOpts.delegate.gas.toString()},s,(0,b.txEventsWithPreOnFulfill)(o,(e=>{null!=e.code&&0!==e.code||(this.queries.cosmos.queryValidators.getQueryStatus(y.BondStatus.Bonded).fetch(),this.queries.cosmos.queryDelegations.getQueryBech32Address(this.base.bech32Address).fetch(),this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch())})))}))}makeUndelegateTx(e,t){var n;g.Bech32Address.validate(t,null===(n=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===n?void 0:n.bech32PrefixValAddr);const r=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!r)throw new Error("Stake currency is null");let i=new a.Dec(e);i=i.mulTruncate(a.DecUtils.getPrecisionDec(r.coinDecimals));const s={type:this.msgOpts.undelegate.type,value:{delegator_address:this.base.bech32Address,validator_address:t,amount:{denom:r.coinMinimalDenom,amount:i.truncate().toString()}}};return this.makeTx("undelegate",{aminoMsgs:[s],protoMsgs:[{typeUrl:"/cosmos.staking.v1beta1.MsgUndelegate",value:p.MsgUndelegate.encode({delegatorAddress:s.value.delegator_address,validatorAddress:s.value.validator_address,amount:s.value.amount}).finish()}],rlpTypes:{MsgValue:[{name:"delegator_address",type:"string"},{name:"validator_address",type:"string"},{name:"amount",type:"TypeAmount"}],TypeAmount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]}},(e=>{null!=e.code&&0!==e.code||(this.queries.cosmos.queryValidators.getQueryStatus(y.BondStatus.Bonded).fetch(),this.queries.cosmos.queryDelegations.getQueryBech32Address(this.base.bech32Address).fetch(),this.queries.cosmos.queryUnbondingDelegations.getQueryBech32Address(this.base.bech32Address).fetch(),this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch())}))}makeBeginRedelegateTx(e,t,n){var r,i;g.Bech32Address.validate(t,null===(r=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===r?void 0:r.bech32PrefixValAddr),g.Bech32Address.validate(n,null===(i=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===i?void 0:i.bech32PrefixValAddr);const s=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!s)throw new Error("Stake currency is null");let o=new a.Dec(e);o=o.mulTruncate(a.DecUtils.getPrecisionDec(s.coinDecimals));const c={type:this.msgOpts.redelegate.type,value:{delegator_address:this.base.bech32Address,validator_src_address:t,validator_dst_address:n,amount:{denom:s.coinMinimalDenom,amount:o.truncate().toString()}}};return this.makeTx("redelegate",{aminoMsgs:[c],protoMsgs:[{typeUrl:"/cosmos.staking.v1beta1.MsgBeginRedelegate",value:p.MsgBeginRedelegate.encode({delegatorAddress:c.value.delegator_address,validatorSrcAddress:c.value.validator_src_address,validatorDstAddress:c.value.validator_dst_address,amount:c.value.amount}).finish()}],rlpTypes:{MsgValue:[{name:"delegator_address",type:"string"},{name:"validator_src_address",type:"string"},{name:"validator_dst_address",type:"string"},{name:"amount",type:"TypeAmount"}],TypeAmount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]}},(e=>{null!=e.code&&0!==e.code||(this.queries.cosmos.queryValidators.getQueryStatus(y.BondStatus.Bonded).fetch(),this.queries.cosmos.queryDelegations.getQueryBech32Address(this.base.bech32Address).fetch(),this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch())}))}makeWithdrawDelegationRewardTx(e){var t;for(const n of e)g.Bech32Address.validate(n,null===(t=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===t?void 0:t.bech32PrefixValAddr);const n=e.map((e=>({type:this.msgOpts.withdrawRewards.type,value:{delegator_address:this.base.bech32Address,validator_address:e}})));return this.makeTx("withdrawRewards",{aminoMsgs:n,protoMsgs:n.map((e=>({typeUrl:"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",value:f.MsgWithdrawDelegatorReward.encode({delegatorAddress:e.value.delegator_address,validatorAddress:e.value.validator_address}).finish()}))),rlpTypes:{MsgValue:[{name:"delegator_address",type:"string"},{name:"validator_address",type:"string"}]}},(e=>{null!=e.code&&0!==e.code||this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch()}))}get queries(){return this.queriesStore.get(this.chainId)}}t.CosmosAccountImpl=S},66263:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CosmwasmAccountImpl=t.defaultCosmwasmMsgOpts=t.CosmwasmAccount=void 0;const i=n(89642),s=n(19731),o=n(78566),a=n(48834),c=r(n(39714)),u=n(94531);t.CosmwasmAccount={use:e=>(n,r,i)=>{const s=e.msgOptsCreator?e.msgOptsCreator(i):void 0;return{cosmwasm:new d(n,r,i,e.queriesStore,(0,c.default)(t.defaultCosmwasmMsgOpts,s||{}))}}},t.defaultCosmwasmMsgOpts={send:{cw20:{gas:15e4}},executeWasm:{type:"wasm/MsgExecuteContract"}};class d{constructor(e,t,n,r,i){this.base=e,this.chainGetter=t,this.chainId=n,this.queriesStore=r,this._msgOpts=i,this.base.registerMakeSendTokenFn(this.processMakeSendTokenTx.bind(this))}get msgOpts(){return this._msgOpts}processMakeSendTokenTx(e,t,n){var r;if("cw20"===new i.DenomHelper(t.coinMinimalDenom).type){const i=(()=>{let n=new s.Dec(e);return n=n.mul(s.DecUtils.getPrecisionDec(t.coinDecimals)),n.truncate().toString()})();if(!("type"in t)||"cw20"!==t.type)throw new Error("Currency is not cw20");return u.Bech32Address.validate(n,null===(r=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===r?void 0:r.bech32PrefixAccAddr),this.makeExecuteContractTx("send",t.contractAddress,{transfer:{recipient:n,amount:i}},[],(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===t.coinMinimalDenom));e&&e.fetch()}}))}}makeExecuteContractTx(e="executeWasm",t,n,r,i){var s;u.Bech32Address.validate(t,null===(s=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===s?void 0:s.bech32PrefixAccAddr);const c={type:this.msgOpts.executeWasm.type,value:{sender:this.base.bech32Address,contract:t,msg:n,funds:r}};return this.base.cosmos.makeTx(e,{aminoMsgs:[c],protoMsgs:[{typeUrl:"/cosmwasm.wasm.v1.MsgExecuteContract",value:o.MsgExecuteContract.encode({sender:c.value.sender,contract:c.value.contract,msg:a.Buffer.from(JSON.stringify(c.value.msg)),funds:c.value.funds}).finish()}]},i)}get queries(){return this.queriesStore.get(this.chainId)}}t.CosmwasmAccountImpl=d},28911:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeplrFromWindow=void 0,t.getKeplrFromWindow=()=>n(void 0,void 0,void 0,(function*(){if("undefined"!=typeof window)return window.keplr||"complete"===document.readyState?window.keplr:new Promise((e=>{const t=n=>{n.target&&"complete"===n.target.readyState&&(e(window.keplr),document.removeEventListener("readystatechange",t))};document.addEventListener("readystatechange",t)}))}))},5177:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67364),t),i(n(21330),t),i(n(84713),t),i(n(28911),t),i(n(42164),t),i(n(35966),t),i(n(66263),t),i(n(40515),t),i(n(25009),t)},42164:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SecretAccountImpl=t.defaultSecretMsgOpts=t.SecretAccount=void 0;const s=n(48834),o=n(89642),a=n(180),c=n(99553),u=n(94531),d=n(19731),l=i(n(39714));t.SecretAccount={use:e=>(n,r,i)=>{const s=e.msgOptsCreator?e.msgOptsCreator(i):void 0;return{secret:new h(n,r,i,e.queriesStore,(0,l.default)(t.defaultSecretMsgOpts,s||{}))}}},t.defaultSecretMsgOpts={send:{secret20:{gas:25e4}},createSecret20ViewingKey:{gas:15e4},executeSecretWasm:{type:"wasm/MsgExecuteContract"}};class h{constructor(e,t,n,r,i){this.base=e,this.chainGetter=t,this.chainId=n,this.queriesStore=r,this._msgOpts=i,this.base.registerMakeSendTokenFn(this.processMakeSendTokenTx.bind(this))}get msgOpts(){return this._msgOpts}processMakeSendTokenTx(e,t,n){var r;if("secret20"===new o.DenomHelper(t.coinMinimalDenom).type){const i=(()=>{let n=new d.Dec(e);return n=n.mul(d.DecUtils.getPrecisionDec(t.coinDecimals)),n.truncate().toString()})();if(!("type"in t)||"secret20"!==t.type)throw new Error("Currency is not secret20");return u.Bech32Address.validate(n,null===(r=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===r?void 0:r.bech32PrefixAccAddr),this.makeExecuteSecretContractTx("send",t.contractAddress,{transfer:{recipient:n,amount:i}},[],(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===t.coinMinimalDenom));e&&e.fetch()}}))}}createSecret20ViewingKey(e,t="",n={},i,o){var a,c;return r(this,void 0,void 0,(function*(){const r=new Uint8Array(32);crypto.getRandomValues(r);const u=s.Buffer.from(r).toString("hex");yield this.makeExecuteSecretContractTx("createSecret20ViewingKey",e,{set_viewing_key:{key:u}},[]).send({amount:null!==(a=n.amount)&&void 0!==a?a:[],gas:null!==(c=n.gas)&&void 0!==c?c:this.msgOpts.createSecret20ViewingKey.gas.toString()},t,i,(e=>{let t="";null!=e.code&&0!==e.code||(t=u),o&&o(e,t)}))}))}makeExecuteSecretContractTx(e="executeSecretWasm",t,n,i,o){var d;let l;return u.Bech32Address.validate(t,null===(d=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===d?void 0:d.bech32PrefixAccAddr),this.base.cosmos.makeTx(e,(()=>r(this,void 0,void 0,(function*(){const e=yield this.base.getKeplr();if(!e)throw new Error("Can't get the Keplr API");const r=e.getEnigmaUtils(this.chainId);l=yield this.encryptSecretContractMsg(t,n,r);const o=(yield r.isNewApi())?{type:this.msgOpts.executeSecretWasm.type,value:{sender:s.Buffer.from(u.Bech32Address.fromBech32(this.base.bech32Address).address).toString("base64"),contract:s.Buffer.from(u.Bech32Address.fromBech32(t).address).toString("base64"),msg:s.Buffer.from(l).toString("base64"),sent_funds:i}}:{type:this.msgOpts.executeSecretWasm.type,value:{sender:this.base.bech32Address,contract:t,msg:s.Buffer.from(l).toString("base64"),sent_funds:i}};return{aminoMsgs:[o],protoMsgs:[(yield r.isNewApi())?{typeUrl:"/secret.compute.v1beta1.MsgExecuteContract",value:c.MsgExecuteContract.encode(c.MsgExecuteContract.fromPartial({sender:s.Buffer.from(o.value.sender,"base64"),contract:s.Buffer.from(o.value.contract,"base64"),msg:s.Buffer.from(o.value.msg,"base64"),sentFunds:o.value.sent_funds})).finish()}:{typeUrl:"/secret.compute.v1beta1.MsgExecuteContract",value:a.MsgExecuteContract.encode(a.MsgExecuteContract.fromPartial({sender:u.Bech32Address.fromBech32(o.value.sender).address,contract:u.Bech32Address.fromBech32(o.value.contract).address,msg:s.Buffer.from(o.value.msg,"base64"),sentFunds:o.value.sent_funds})).finish()}]}}))),o)}sendExecuteSecretContractMsg(e="executeSecretWasm",t,n,i,o="",d,l,h){var p;return r(this,void 0,void 0,(function*(){let f;return yield this.base.cosmos.sendMsgs(e,(()=>r(this,void 0,void 0,(function*(){const e=yield this.base.getKeplr();if(!e)throw new Error("Can't get the Keplr API");const r=e.getEnigmaUtils(this.chainId);f=yield this.encryptSecretContractMsg(t,n,r);const o=(yield r.isNewApi())?{type:this.msgOpts.executeSecretWasm.type,value:{sender:s.Buffer.from(u.Bech32Address.fromBech32(this.base.bech32Address).address).toString("base64"),contract:s.Buffer.from(u.Bech32Address.fromBech32(t).address).toString("base64"),msg:s.Buffer.from(f).toString("base64"),sent_funds:i}}:{type:this.msgOpts.executeSecretWasm.type,value:{sender:this.base.bech32Address,contract:t,msg:s.Buffer.from(f).toString("base64"),sent_funds:i}};return{aminoMsgs:[o],protoMsgs:[(yield r.isNewApi())?{typeUrl:"/secret.compute.v1beta1.MsgExecuteContract",value:c.MsgExecuteContract.encode(c.MsgExecuteContract.fromPartial({sender:s.Buffer.from(o.value.sender,"base64"),contract:s.Buffer.from(o.value.contract,"base64"),msg:s.Buffer.from(o.value.msg,"base64"),sentFunds:o.value.sent_funds})).finish()}:{typeUrl:"/secret.compute.v1beta1.MsgExecuteContract",value:a.MsgExecuteContract.encode(a.MsgExecuteContract.fromPartial({sender:u.Bech32Address.fromBech32(o.value.sender).address,contract:u.Bech32Address.fromBech32(o.value.contract).address,msg:s.Buffer.from(o.value.msg,"base64"),sentFunds:o.value.sent_funds})).finish()}]}}))),o,{amount:null!==(p=d.amount)&&void 0!==p?p:[],gas:d.gas},l,h),f}))}encryptSecretContractMsg(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield this.queries.secret.querySecretContractCodeHash.getQueryContract(e).waitResponse();if(!r)throw new Error(`Can't get the code hash of the contract (${e})`);const i=r.data.code_hash;return yield n.encrypt(i,t)}))}get queries(){return this.queriesStore.get(this.chainId)}}t.SecretAccountImpl=h},35966:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccountStore=void 0;const r=n(5136),i=n(21330),s=n(25009);class o extends r.HasMapStore{constructor(e,t,n,o,...a){const c=new s.AccountSharedContext(n);super((n=>{const s=new i.AccountSetBaseSuper(e,t,n,c,o(n));return(0,r.mergeStores)(s,[this.chainGetter,n],...this.accountSetCreators)})),this.eventListener=e,this.chainGetter=t,this.getKeplr=n,this.storeOptsCreator=o,this.accountSetCreators=a}getAccount(e){return this.chainGetter.hasChain(e)?this.get(this.chainGetter.getChain(e).chainId):this.get(e)}hasAccount(e){return this.chainGetter.hasChain(e)?this.has(this.chainGetter.getChain(e).chainId):this.has(e)}}t.AccountStore=o},67364:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},40515:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEip712TypedDataBasedOnChainId=t.txEventsWithPreOnFulfill=void 0;const r=n(94531);t.txEventsWithPreOnFulfill=function(e,t){const n=e?"function"==typeof e?void 0:e.onBroadcasted:void 0,r=e?"function"==typeof e?e:e.onFulfill:void 0,i=t?"function"==typeof t?void 0:t.onBroadcasted:void 0,s=t?"function"==typeof t?t:t.onFulfill:void 0;return{onBroadcastFailed:"function"==typeof t||null==t?void 0:t.onBroadcastFailed,onBroadcasted:n||i?e=>{i&&i(e),n&&n(e)}:void 0,onFulfill:r||s?e=>{s&&s(e),r&&r(e)}:void 0}},t.getEip712TypedDataBasedOnChainId=(e,t)=>{const n=e.startsWith("injective"),{ethChainId:i}=r.EthermintChainIdHelper.parse(e),s={types:Object.assign({EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"string"},{name:"salt",type:"string"}],Tx:[{name:"account_number",type:"string"},{name:"chain_id",type:"string"},{name:"fee",type:"Fee"},{name:"memo",type:"string"},{name:"msgs",type:"Msg[]"},{name:"sequence",type:"string"}],Fee:[{name:"feePayer",type:"string"},{name:"amount",type:"Coin[]"},{name:"gas",type:"string"}],Coin:[{name:"denom",type:"string"},{name:"amount",type:"string"}],Msg:[{name:"type",type:"string"},{name:"value",type:"MsgValue"}]},t.rlpTypes),domain:{name:"Cosmos Web3",version:"1.0.0",chainId:i.toString(),verifyingContract:"cosmos",salt:"0"},primaryType:"Tx"};return n?(s.types.Tx=[...s.types.Tx,{name:"timeout_height",type:"string"}],s.domain.name="Injective Web3",s.domain.chainId="0x"+i.toString(16),s.types.Fee=[{name:"amount",type:"Coin[]"},{name:"gas",type:"string"}],s):s}},49246:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ChainStore=t.ModularChainInfoImpl=t.ChainInfoImpl=void 0;const i=n(80075),s=n(94531),o=n(58242),a=n(89642);class c{constructor(e,t){this.currencyRegistry=t,this.unknownDenoms=[],this.registeredCurrencies=[],this.registeredCurrenciesNoReaction=[],this.registrationInProgressCurrencyMap=new Map,this._embedded=e,(0,i.makeObservable)(this),(0,o.keepAlive)(this,"currencyMap"),(0,o.keepAlive)(this,"unknownDenomMap")}addUnknownDenoms(...e){this.addUnknownDenomsImpl(e,!0)}addUnknownDenomsWithoutReaction(...e){this.addUnknownDenomsImpl(e,!1)}addUnknownDenomsImpl(e,t){for(const n of e){let e=!1;const r=this.unknownDenomMap.get(n);if(r){if(r.reaction===t)continue;t&&(e=!0,r.reaction=t)}if(this.currencyMap.has(n))continue;if(this.currencyNoReactionMap.has(n))continue;e||(0,i.runInAction)((()=>{this.unknownDenoms.push({denom:n,reaction:t}),this.registrationInProgressCurrencyMap.set(n,!0)}));let s=0,o=!1;const a=(0,i.autorun)((()=>{s++;const e=()=>{o=!0,1===s?setTimeout((()=>{a&&a()}),1):a&&a()};if(o)return;const t=this.currencyRegistry.getCurrencyRegistrar(this.chainId,n);if(t){const r=t.value;(0,i.runInAction)((()=>{if(t.done||this.registrationInProgressCurrencyMap.set(n,!0),r){const e=this.unknownDenoms.findIndex((e=>e.denom===r.coinMinimalDenom));let n;e>=0&&(n=this.unknownDenoms[e],t.done&&this.unknownDenoms.splice(e,1)),!n||n.reaction?this.addOrReplaceCurrency(r):this.addOrReplaceCurrencyNoReaction(r)}t.done&&this.registrationInProgressCurrencyMap.delete(n)})),t.done&&e()}else this.registrationInProgressCurrencyMap.get(n)&&(0,i.runInAction)((()=>{this.registrationInProgressCurrencyMap.delete(n)})),e()}))}}get embedded(){return this._embedded}get chainId(){return this._embedded.chainId}get chainIdentifier(){return s.ChainIdHelper.parse(this.chainId).identifier}get currencies(){return this._embedded.currencies.concat(this.registeredCurrencies)}get currencyMap(){const e=new Map;for(const t of this.currencies)e.set(t.coinMinimalDenom,t);return e}get currencyNoReactionMap(){const e=new Map;for(const t of this.registeredCurrenciesNoReaction)e.set(t.coinMinimalDenom,t);return e}moveNoReactionCurrencyToReaction(e){const t=this.registeredCurrenciesNoReaction.findIndex((t=>t.coinMinimalDenom===e));if(t>=0){const e=this.registeredCurrenciesNoReaction[t];this.registeredCurrenciesNoReaction.splice(t,1),this.registeredCurrencies.push(e)}}get unknownDenomMap(){const e=new Map;for(const t of this.unknownDenoms)e.set(t.denom,t);return e}addCurrencies(...e){if(0===e.length)return;const t=this.currencyMap;for(const n of e)t.has(n.coinMinimalDenom)||this.registeredCurrencies.push(n)}removeCurrencies(...e){if(0===e.length)return;const t=new Map;for(const n of e)t.set(n,!0);this.registeredCurrencies=this.registeredCurrencies.filter((e=>!t.get(e.coinMinimalDenom)))}findCurrency(e){return this.currencyMap.has(e)?this.currencyMap.get(e):this.currencyNoReactionMap.has(e)?(this.moveNoReactionCurrencyToReaction(e),this.currencyNoReactionMap.get(e)):(this.addUnknownDenoms(e),this.currencyMap.has(e)?this.currencyMap.get(e):this.currencyNoReactionMap.has(e)?(this.moveNoReactionCurrencyToReaction(e),this.currencyNoReactionMap.get(e)):void 0)}findCurrencyWithoutReaction(e){return this.currencyMap.has(e)?this.currencyMap.get(e):this.currencyNoReactionMap.has(e)?this.currencyNoReactionMap.get(e):(this.addUnknownDenomsWithoutReaction(e),this.currencyMap.has(e)?this.currencyMap.get(e):this.currencyNoReactionMap.has(e)?this.currencyNoReactionMap.get(e):void 0)}findCurrencyAsync(e){if(this.currencyMap.has(e))return Promise.resolve(this.currencyMap.get(e));let t;return this.addUnknownDenoms(e),new Promise((n=>{t=(0,i.autorun)((()=>{this.registrationInProgressCurrencyMap.get(e)||n(this.currencyMap.get(e))}))})).finally((()=>{t&&t()}))}forceFindCurrency(e){return this.findCurrency(e)||{coinMinimalDenom:e,coinDenom:e,coinDecimals:0}}forceFindCurrencyWithoutReaction(e){return this.findCurrencyWithoutReaction(e)||{coinMinimalDenom:e,coinDenom:e,coinDecimals:0}}addOrReplaceCurrency(e){if(this.currencyMap.has(e.coinMinimalDenom)){const t=this.registeredCurrencies.findIndex((t=>t.coinMinimalDenom===e.coinMinimalDenom));if(t>=0){const n=this.registeredCurrencies[t];(0,a.sortedJsonByKeyStringify)(n)!==(0,a.sortedJsonByKeyStringify)(e)&&this.registeredCurrencies.splice(t,1,e)}}else this.registeredCurrencies.push(e)}addOrReplaceCurrencyNoReaction(e){if(this.currencyNoReactionMap.has(e.coinMinimalDenom)){const t=this.registeredCurrenciesNoReaction.findIndex((t=>t.coinMinimalDenom===e.coinMinimalDenom));if(t>=0){const n=this.registeredCurrenciesNoReaction[t];(0,a.sortedJsonByKeyStringify)(n)!==(0,a.sortedJsonByKeyStringify)(e)&&this.registeredCurrenciesNoReaction.splice(t,1,e)}}else this.registeredCurrenciesNoReaction.push(e)}get stakeCurrency(){return this._embedded.stakeCurrency}get alternativeBIP44s(){return this._embedded.alternativeBIP44s}get bech32Config(){return this._embedded.bech32Config}get beta(){return this._embedded.beta}get bip44(){return this._embedded.bip44}get chainName(){return this._embedded.chainName}get features(){var e;return null!==(e=this._embedded.features)&&void 0!==e?e:[]}get feeCurrencies(){return this._embedded.feeCurrencies}get rest(){return this._embedded.rest}get rpc(){return this._embedded.rpc}get walletUrl(){return this._embedded.walletUrl}get walletUrlForStaking(){return this._embedded.walletUrlForStaking}get chainSymbolImageUrl(){return this._embedded.chainSymbolImageUrl}get evm(){return this._embedded.evm}get hideInUI(){return this._embedded.hideInUI}hasFeature(e){return!(!this._embedded.features||!this._embedded.features.includes(e))}setEmbeddedChainInfo(e){this._embedded=e}isCurrencyRegistrationInProgress(e){return this.registrationInProgressCurrencyMap.get(e)||!1}}r([i.observable.ref],c.prototype,"_embedded",void 0),r([i.observable.shallow],c.prototype,"unknownDenoms",void 0),r([i.observable.shallow],c.prototype,"registeredCurrencies",void 0),r([i.observable.shallow],c.prototype,"registeredCurrenciesNoReaction",void 0),r([i.observable.shallow],c.prototype,"registrationInProgressCurrencyMap",void 0),r([i.computed],c.prototype,"chainIdentifier",null),r([i.computed],c.prototype,"currencies",null),r([i.computed],c.prototype,"currencyMap",null),r([i.computed],c.prototype,"currencyNoReactionMap",null),r([i.action],c.prototype,"moveNoReactionCurrencyToReaction",null),r([i.computed],c.prototype,"unknownDenomMap",null),r([i.action],c.prototype,"addCurrencies",null),r([i.action],c.prototype,"removeCurrencies",null),r([i.action],c.prototype,"addOrReplaceCurrency",null),r([i.action],c.prototype,"addOrReplaceCurrencyNoReaction",null),r([i.action],c.prototype,"setEmbeddedChainInfo",null),t.ChainInfoImpl=c;class u{constructor(e,t){this.currencyRegistry=t,this.registeredCosmosCurrencies=[],this.registeredStarkentCurrencies=[],this._embedded=e,(0,i.makeObservable)(this),(0,o.keepAlive)(this,"cosmosCurrencyMap"),(0,o.keepAlive)(this,"starknetCurrencyMap")}get embedded(){return this._embedded}setEmbeddedModularChainInfo(e){this._embedded=e}get chainId(){return this._embedded.chainId}getCurrencies(e){switch(e){case"cosmos":if(!("cosmos"in this._embedded))throw new Error(`No cosmos module for this chain: ${this.chainId}`);return this._embedded.cosmos.currencies.concat(this.registeredCosmosCurrencies);case"starknet":if(!("starknet"in this._embedded))throw new Error(`No starknet module for this chain: ${this.chainId}`);return this._embedded.starknet.currencies.concat(this.registeredStarkentCurrencies);default:throw new Error(`Unknown module: ${e}`)}}addCurrencies(e,...t){if(0!==t.length)switch(e){case"cosmos":if(!("cosmos"in this._embedded))throw new Error(`No cosmos module for this chain: ${this.chainId}`);for(const e of t)this.cosmosCurrencyMap.has(e.coinMinimalDenom)||this.registeredCosmosCurrencies.push(e);break;case"starknet":if(!("starknet"in this._embedded))throw new Error(`No starknet module for this chain: ${this.chainId}`);for(const e of t)!this.starknetCurrencyMap.has(e.coinMinimalDenom)&&"type"in e&&"erc20"===e.type&&this.registeredStarkentCurrencies.push(e);break;default:throw new Error(`Unknown module: ${e}`)}}removeCurrencies(e,...t){if(0===t.length)return;const n=new Map;for(const e of t)n.set(e,!0);switch(e){case"cosmos":if(!("cosmos"in this._embedded))throw new Error(`No cosmos module for this chain: ${this.chainId}`);this.registeredCosmosCurrencies=this.registeredCosmosCurrencies.filter((e=>!n.get(e.coinMinimalDenom)));break;case"starknet":if(!("starknet"in this._embedded))throw new Error(`No starknet module for this chain: ${this.chainId}`);this.registeredStarkentCurrencies=this.registeredStarkentCurrencies.filter((e=>!n.get(e.coinMinimalDenom)));break;default:throw new Error(`Unknown module: ${e}`)}}get cosmosCurrencyMap(){const e=new Map;if("cosmos"in this._embedded)for(const t of this._embedded.cosmos.currencies)e.set(t.coinMinimalDenom,t);return e}get starknetCurrencyMap(){const e=new Map;if("starknet"in this._embedded)for(const t of this._embedded.starknet.currencies)e.set(t.coinMinimalDenom,t);return e}}r([i.observable.ref],u.prototype,"_embedded",void 0),r([i.observable.shallow],u.prototype,"registeredCosmosCurrencies",void 0),r([i.observable.shallow],u.prototype,"registeredStarkentCurrencies",void 0),r([i.action],u.prototype,"setEmbeddedModularChainInfo",null),r([i.action],u.prototype,"addCurrencies",null),r([i.action],u.prototype,"removeCurrencies",null),r([i.computed],u.prototype,"cosmosCurrencyMap",null),r([i.computed],u.prototype,"starknetCurrencyMap",null),t.ModularChainInfoImpl=u;class d{constructor(e){this._chainInfos=[],this._modularChainInfos=[],this._modularChainInfoImpls=[],this.currencyRegistrars=[],(0,i.makeObservable)(this),this.setEmbeddedChainInfos(e),(0,o.keepAlive)(this,"chainInfoMap"),(0,o.keepAlive)(this,"modularChainInfoMap")}get chainInfos(){return this._chainInfos}get modularChainInfos(){return this._modularChainInfos}get modularChainInfoImpls(){return this._modularChainInfoImpls}get chainInfoMap(){const e=new Map;for(const t of this._chainInfos)e.set(s.ChainIdHelper.parse(t.chainId).identifier,t);return e}getChain(e){const t=s.ChainIdHelper.parse(e),n=this.chainInfoMap.get(t.identifier);if(!n)throw new Error(`Unknown chain info: ${e}`);return n}hasChain(e){const t=s.ChainIdHelper.parse(e);return this.chainInfoMap.has(t.identifier)}get modularChainInfoMap(){const e=new Map;for(const t of this._modularChainInfos)e.set(s.ChainIdHelper.parse(t.chainId).identifier,t);return e}getModularChain(e){const t=s.ChainIdHelper.parse(e),n=this.modularChainInfoMap.get(t.identifier);if(!n)throw new Error(`Unknown modular chain info: ${e}`);return n}hasModularChain(e){const t=s.ChainIdHelper.parse(e);return this.modularChainInfoMap.has(t.identifier)}get modularChainInfoImplMap(){const e=new Map;for(const t of this._modularChainInfoImpls)e.set(s.ChainIdHelper.parse(t.chainId).identifier,t);return e}getModularChainInfoImpl(e){const t=s.ChainIdHelper.parse(e),n=this.modularChainInfoImplMap.get(t.identifier);if(!n)throw new Error(`Unknown modular chain info: ${e}`);return n}setEmbeddedChainInfos(e){this._chainInfos=e.filter((e=>"currencies"in e||"cosmos"in e)).map((e=>{if("cosmos"in e&&(e=e.cosmos),!("currencies"in e))throw new Error("Can't happen");const t=this.chainInfoMap.get(s.ChainIdHelper.parse(e.chainId).identifier);return t?(t.setEmbeddedChainInfo(e),t):new c(e,this)})),this._modularChainInfos=e.map((e=>"currencies"in e?{chainId:e.chainId,chainName:e.chainName,chainSymbolImageUrl:e.chainSymbolImageUrl,cosmos:e}:e)),this._modularChainInfoImpls=e.map((e=>{const t="currencies"in e?{chainId:e.chainId,chainName:e.chainName,chainSymbolImageUrl:e.chainSymbolImageUrl,cosmos:e}:e,n=this.modularChainInfoImplMap.get(s.ChainIdHelper.parse(e.chainId).identifier);return n?(n.setEmbeddedModularChainInfo(t),n):new u(t,this)}))}setEmbeddedChainInfosV2(e){this._chainInfos=e.chainInfos.map((e=>{const t=this.chainInfoMap.get(s.ChainIdHelper.parse(e.chainId).identifier);return t?(t.setEmbeddedChainInfo(e),t):new c(e,this)})),this._modularChainInfos=e.modulrChainInfos.map((t=>{if("currencies"in t){const n=e.chainInfos.find((e=>e.chainId===t.chainId));if(!n)throw new Error("Can't find cosmos chain info");return{chainId:n.chainId,chainName:n.chainName,chainSymbolImageUrl:n.chainSymbolImageUrl,cosmos:n}}return t})),this._modularChainInfoImpls=e.modulrChainInfos.map((t=>{const n=(()=>{if("currencies"in t){const n=e.chainInfos.find((e=>e.chainId===t.chainId));if(!n)throw new Error("Can't find cosmos chain info");return{chainId:n.chainId,chainName:n.chainName,chainSymbolImageUrl:n.chainSymbolImageUrl,cosmos:n}}return t})(),r=this.modularChainInfoImplMap.get(s.ChainIdHelper.parse(t.chainId).identifier);return r?(r.setEmbeddedModularChainInfo(n),r):new u(n,this)}))}getCurrencyRegistrar(e,t){for(let n=0;n<this.currencyRegistrars.length;n++){const r=(0,this.currencyRegistrars[n])(e,t);if(r)return r}}registerCurrencyRegistrar(e){this.currencyRegistrars.push(e)}isEvmChain(e){return null!=this.getChain(e).evm}isEvmOnlyChain(e){const t=e.split(":");return this.isEvmChain(e)&&2===t.length&&"eip155"===t[0]}}r([i.observable.ref],d.prototype,"_chainInfos",void 0),r([i.observable.ref],d.prototype,"_modularChainInfos",void 0),r([i.observable.ref],d.prototype,"_modularChainInfoImpls",void 0),r([i.observable],d.prototype,"currencyRegistrars",void 0),r([i.computed],d.prototype,"chainInfoMap",null),r([i.computed],d.prototype,"modularChainInfoMap",null),r([i.computed],d.prototype,"modularChainInfoImplMap",null),r([i.action],d.prototype,"setEmbeddedChainInfos",null),r([i.action],d.prototype,"setEmbeddedChainInfosV2",null),r([i.action],d.prototype,"registerCurrencyRegistrar",null),t.ChainStore=d},59324:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7901),t),i(n(49246),t)},7901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5136:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6074),t),i(n(77267),t),i(n(33354),t),i(n(4595),t),i(n(96180),t)},6074:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.HasMapStore=void 0;const i=n(80075);class s{constructor(e){this.creater=e,this.map=new Map,(0,i.makeObservable)(this)}get(e){if(!this.map.has(e)){const t=this.creater(e);(0,i.runInAction)((()=>{this.map.set(e,t)}))}return this.map.get(e)}has(e){return this.map.has(e)}}r([i.observable.shallow],s.prototype,"map",void 0),t.HasMapStore=s},96180:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeStores=void 0,t.mergeStores=(e,t,...n)=>{for(let r=0;r<n.length;r++){const i=(0,n[r])(e,...t);for(const t of Object.keys(i)){if(e[t])throw new Error(`${t} is already merged`);e[t]=i[t]}}return e}},91044:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.QuerySharedContext=void 0;const i=n(89642),s=n(70223);t.QuerySharedContext=class{constructor(e,t){this.kvStore=e,this.options=t,this.multiGetStore="multiGet"in e?e:new i.WrapMultiGetKVStore(e),this.storeDebounceTimer=new s.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=Array.from(new Set(e.map((e=>e.args[0])))),n=yield this.multiGetStore.multiGet(t);return e.map((e=>({status:"fulfilled",value:n[e.args[0]]})))})))),this.handleResponseDebounceTimer=new s.DebounceActionTimer(this.options.responseDebounceMs,(e=>e.map((()=>({status:"fulfilled",value:void 0})))))}loadStore(e,t){return this.storeDebounceTimer.call([e],t)}handleResponse(e){return this.handleResponseDebounceTimer.call([],e)}saveResponse(e,t){return r(this,void 0,void 0,(function*(){yield this.kvStore.set(e,t)}))}}},77267:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28360),t),i(n(75261),t),i(n(91044),t)},75261:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableJsonRPCQueryMap=t.ObservableJsonRPCQuery=void 0;const s=n(28360),o=n(80075),a=n(34298),c=n(48834),u=n(6074),d=n(86693);class l extends s.ObservableQuery{constructor(e,t,n,r,i,s={}){super(e,t,n,s),this.method=r,this._params=i,(0,o.makeObservable)(this)}get params(){return this._params}setParams(e){this._params=e,this.fetch()}fetchResponse(e){return i(this,void 0,void 0,(function*(){const t=yield(0,d.simpleFetch)(this.baseURL,this.url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"1",method:this.method,params:this.params}),signal:e.signal});if(t.data.error&&t.data.error.message)throw new Error(t.data.error.message);if(!t.data.result)throw new Error("Unknown error");return{headers:t.headers,data:t.data.result}}))}getCacheKey(){const e=c.Buffer.from(a.Hash.sha256(c.Buffer.from(JSON.stringify(this.params))).slice(0,8)).toString("hex");return`${super.getCacheKey()}-${this.method}-${e}`}}r([o.observable.ref],l.prototype,"_params",void 0),r([o.action],l.prototype,"setParams",null),t.ObservableJsonRPCQuery=l;class h extends u.HasMapStore{constructor(e){super(e)}}t.ObservableJsonRPCQueryMap=h},28360:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryMap=t.ObservableQuery=t.defaultOptions=void 0;const s=n(80075),o=n(89642),a=n(6074),c=n(86693);t.defaultOptions={cacheMaxAge:0,fetchingInterval:0};class u extends Error{constructor(e){super(e),Object.setPrototypeOf(this,u.prototype)}}class d{constructor(){this.rejectors=[]}get hasCancelable(){return this.rejectors.length>0}cancel(e){for(;this.rejectors.length>0;){const t=this.rejectors.shift();t&&(t.reject(new u(e)),t.onCancel&&t.onCancel())}}callOrCanceledWithPromise(e,t){return new Promise(((n,r)=>{this.rejectors.push({reject:r,onCancel:t}),e.then((e=>{const t=this.rejectors.findIndex((e=>e.reject===r));t>=0&&this.rejectors.splice(t,1),n(e)}),(e=>{const t=this.rejectors.findIndex((e=>e.reject===r));t>=0&&this.rejectors.splice(t,1),r(e)}))}))}callOrCanceled(e,t){return new Promise(((n,r)=>{this.rejectors.push({reject:r,onCancel:t}),Promise.resolve().then((()=>{this.rejectors.find((e=>e.reject===r))&&e().then((e=>{const t=this.rejectors.findIndex((e=>e.reject===r));t>=0&&this.rejectors.splice(t,1),n(e)}),(e=>{const t=this.rejectors.findIndex((e=>e.reject===r));t>=0&&this.rejectors.splice(t,1),r(e)}))}))}))}}class l{constructor(){this.queue=[],this.isPendingPromise=!1}enqueue(e){this.queue.push(e),this.handleQueue()}handleQueue(){if(!this.isPendingPromise&&this.queue.length>0){const e=this.queue.shift();if(e){const t=e();"object"==typeof t&&"then"in t?(this.isPendingPromise=!0,t.then((()=>{this.isPendingPromise=!1,this.handleQueue()}))):this.handleQueue()}}}}class h{static guessResponseTruncated(e,t){return e&&"get"in e&&"function"==typeof e.get&&(e.get("content-type")||"").startsWith("application/json")&&t.startsWith("{")}constructor(e,n,r,i={}){this.sharedContext=e,this._response=void 0,this._isFetching=!1,this._error=void 0,this._isStarted=!1,this.stateQueue=new l,this.pendingOnStart=!1,this.observedCount=0,this.intervalId=void 0,this._url="",this.becomeObserved=()=>{0===this.observedCount&&this.start(),this.observedCount++},this.becomeUnobserved=()=>{this.observedCount--,0===this.observedCount&&this.stop()},this.intervalFetch=()=>{this.isFetching||this.fetch()},this.options=Object.assign(Object.assign({},t.defaultOptions),i),this.baseURL=n,this.queryCanceler=new d,(0,s.makeObservable)(this),this.setUrl(r),(0,s.onBecomeObserved)(this,"_response",this.becomeObserved),(0,s.onBecomeObserved)(this,"_isFetching",this.becomeObserved),(0,s.onBecomeObserved)(this,"_error",this.becomeObserved),(0,s.onBecomeUnobserved)(this,"_response",this.becomeUnobserved),(0,s.onBecomeUnobserved)(this,"_isFetching",this.becomeUnobserved),(0,s.onBecomeUnobserved)(this,"_error",this.becomeUnobserved)}get isObserved(){return this.observedCount>0}start(){this._isStarted||(this._isStarted=!0,this._isFetching=!0,this.pendingOnStart=!0,this.stateQueue.enqueue((()=>this.onStart())),this.stateQueue.enqueue((()=>{this.pendingOnStart=!1})),this.stateQueue.enqueue((()=>this.postStart())))}stop(){this._isStarted&&(this.isFetching&&this.queryCanceler.hasCancelable&&this.cancel(),this._isFetching=!1,null!=this.intervalId&&clearInterval(this.intervalId),this.intervalId=void 0,this.stateQueue.enqueue((()=>this.onStop())),this._isStarted=!1)}get isStarted(){return this._isStarted}postStart(){this.fetch(),this.options.fetchingInterval>0&&(this.intervalId=setInterval(this.intervalFetch,this.options.fetchingInterval))}onStart(){}onStop(){}canFetch(){return!0}get isFetching(){return this._isFetching}*fetch(){var e,t;if(!this.isStarted||this.pendingOnStart)return;if(!this.canFetch())return void(this._isFetching&&(this._isFetching=!1));if(this.isFetching&&this.queryCanceler.hasCancelable&&this.cancel("__fetching__proceed__next__"),this._response){if(this.options.cacheMaxAge>0&&this._response.timestamp>Date.now()-this.options.cacheMaxAge)return void(this._isFetching=!1);this._isFetching=!0,this.setResponse(Object.assign(Object.assign({},this._response),{staled:!0}))}else{this._isFetching=!0;let e=!1;const t=this.loadStabledResponse().then((t=>{e=t}));if(this.options.cacheMaxAge<=0);else if(yield t,e)return void(this._isFetching=!1)}const n=new AbortController;try{let e=!1,{data:t,headers:r}=yield*(0,o.toGenerator)(this.queryCanceler.callOrCanceled((()=>(e=!0,this.fetchResponse(n))),(()=>{e&&n.abort()})));if(t&&"string"==typeof t&&(t.startsWith("stream was reset:")||h.suspectedResponseDatasWithInvalidValue.includes(t)||h.guessResponseTruncated(r,t))){if(n.signal.aborted)return;console.log("There is an unknown problem to the response. Request one more time.");let e=!1;const i=yield*(0,o.toGenerator)(this.queryCanceler.callOrCanceled((()=>(e=!0,this.fetchResponse(n))),(()=>{e&&n.abort()})));if(t=i.data,r=i.headers,t&&"string"==typeof t){if(t.startsWith("stream was reset:")||h.suspectedResponseDatasWithInvalidValue.includes(t))throw new Error(t);if(h.guessResponseTruncated(r,t))throw new Error("The response data seems to be truncated")}}const i={data:t,staled:!1,local:!1,timestamp:Date.now()};this.saveResponse(i),this.onReceiveResponse(i),yield this.sharedContext.handleResponse((()=>{this.setResponse(i),this.setError(void 0),this._isFetching=!1}))}catch(n){let r=!1;if(n instanceof u)return void("__fetching__proceed__next__"===n.message&&(r=!0));if(n.response){let i=n.response.statusText;const s=n.response.headers&&n.response.headers.get("content-type")||"";s.startsWith("text/plain")&&"string"==typeof n.response.data&&(i=n.response.data),s.startsWith("application/json")&&(null===(e=n.response.data)||void 0===e?void 0:e.message)&&"string"==typeof(null===(t=n.response.data)||void 0===t?void 0:t.message)&&(i=n.response.data.message);const o={status:n.response.status,statusText:n.response.statusText,message:i,data:n.response.data};yield this.sharedContext.handleResponse((()=>{this.setError(o),r||(this._isFetching=!1)}))}else if(n.request){const e={status:0,statusText:"Failed to get response",message:"Failed to get response"};yield this.sharedContext.handleResponse((()=>{this.setError(e),r||(this._isFetching=!1)}))}else{const e={status:0,statusText:n.message,message:n.message,data:n};yield this.sharedContext.handleResponse((()=>{this.setError(e),r||(this._isFetching=!1)}))}}}get response(){return this._response}get error(){return this._error}loadStabledResponse(){return new Promise((e=>{this.sharedContext.loadStore(this.getCacheKey(),(t=>{if("rejected"===t.status)console.warn("Failed to get the last response from disk."),e(!1);else{const n=t.value;if(n&&!this._response&&(this.options.cacheMaxAge<=0||n.timestamp>Date.now()-this.options.cacheMaxAge)){const t=Object.assign(Object.assign({},n),{staled:!0,local:!0});return this.onReceiveResponse(t),this.setResponse(t),void e(!0)}e(!1)}}))}))}setResponse(e){this._response=e}setError(e){this._error=e}onReceiveResponse(e){}cancel(e){this.queryCanceler.cancel(e)}get url(){return this._url}setUrl(e){this._url!==e&&(this._url=e,this.fetch())}waitResponse(){if(this.response)return Promise.resolve(this.response);const e=[];let t=!1;return e.push((0,s.reaction)((()=>this.isFetching),(()=>{t||(this.isFetching||this.fetch(),t=!0)}),{fireImmediately:!0})),new Promise((t=>{const n=(0,s.autorun)((()=>{this.isFetching||t(this.response)}));e.push(n)})).finally((()=>{for(const t of e)t()}))}waitFreshResponse(){const e=[];let t=!1;return e.push((0,s.reaction)((()=>this.isFetching),(()=>{t||(this.isFetching||this.fetch(),t=!0)}),{fireImmediately:!0})),new Promise((t=>{const n=(0,s.autorun)((()=>{this.isFetching||t(this.response)}));e.push(n)})).finally((()=>{for(const t of e)t()}))}getCacheKey(){return(0,c.makeURL)(this.baseURL,this.url)}fetchResponse(e){return i(this,void 0,void 0,(function*(){const t=yield(0,c.simpleFetch)(this.baseURL,this.url,{signal:e.signal});return{headers:t.headers,data:t.data}}))}saveResponse(e){return i(this,void 0,void 0,(function*(){const t=this.getCacheKey();yield this.sharedContext.saveResponse(t,e)}))}}h.suspectedResponseDatasWithInvalidValue=["The network connection was lost.","The request timed out."],r([s.observable.ref],h.prototype,"_response",void 0),r([s.observable],h.prototype,"_isFetching",void 0),r([s.observable.ref],h.prototype,"_error",void 0),r([s.observable],h.prototype,"_isStarted",void 0),r([s.observable],h.prototype,"baseURL",void 0),r([s.observable],h.prototype,"_url",void 0),r([s.action],h.prototype,"start",null),r([s.action],h.prototype,"stop",null),r([s.flow],h.prototype,"fetch",null),r([s.action],h.prototype,"setResponse",null),r([s.action],h.prototype,"setError",null),r([s.action],h.prototype,"setUrl",null),t.ObservableQuery=h;class p extends a.HasMapStore{constructor(e){super(e)}}t.ObservableQueryMap=p},4595:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},33354:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoreUtils=void 0;const r=n(19731);class i{static toCoinPretties(e,t){const n=[];for(const i of t){const t=e.findCurrency(i.denom);if(t){const e=new r.Dec(i.amount);e.truncate().gt(new r.Int(0))&&n.push(new r.CoinPretty(t,e))}}return n}static getBalancesFromCurrencies(e,t){const n=[];for(const i of t){const t=e[i.denom];if(t){const e=new r.Dec(i.amount);e.truncate().gt(new r.Int(0))&&n.push(new r.CoinPretty(t,e))}}return n}static getBalanceFromCurrency(e,t){const n=i.getBalancesFromCurrencies({[e.coinMinimalDenom]:e},t);return 1===n.length?n[0]:new r.CoinPretty(e,new r.Int(0)).ready(!1)}}t.StoreUtils=i},11169:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5177),t),i(n(5136),t),i(n(48338),t),i(n(42369),t),i(n(59324),t),i(n(96312),t),i(n(32262),t)},38878:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LSMCurrencyRegistrar=void 0;const s=n(80075),o=n(89642),a=n(94531),c=n(97021);class u{constructor(e,t=864e5,n,r){this.kvStore=e,this.cacheDuration=t,this.chainStore=n,this.queriesStore=r,this.lsmDenomCacheData=new Map,this.isInitialized=!1,this.chainStore.registerCurrencyRegistrar(this.lsmCurrencyRegistrar.bind(this)),(0,s.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cache-lsm-denom-data",t=yield this.kvStore.get(e);t&&(0,s.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.lsmDenomCacheData.set(e,n)})),(0,s.autorun)((()=>{const t=(0,s.toJS)(this.lsmDenomCacheData),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,s.runInAction)((()=>{this.isInitialized=!0}))}))}lsmCurrencyRegistrar(e,t){var n;if(!this.chainStore.hasChain(e))return;if("native"!==new o.DenomHelper(t).type)return;const r=this.chainStore.getChain(e);if(!r.stakeCurrency)return;if(!r.bech32Config||!t.startsWith(r.bech32Config.bech32PrefixValAddr))return;const i=t.indexOf("/");if(i<0)return;const u=t.slice(0,i);try{a.Bech32Address.validate(u,null===(n=r.bech32Config)||void 0===n?void 0:n.bech32PrefixValAddr)}catch(e){return}const d=parseInt(t.slice(i+1));if(d.toString()!==t.slice(i+1))return;const l=this.queriesStore.get(e),h=(()=>{const n=this.lsmDenomCacheData.get(`${a.ChainIdHelper.parse(e).identifier}/${t}`);if(n&&Date.now()-n.timestamp<this.cacheDuration)return{moniker:n.moniker,thumbnail:n.thumbnail,isFetching:!1,fromCache:!0};const r=[l.cosmos.queryValidators.getQueryStatus(c.BondStatus.Bonded),l.cosmos.queryValidators.getQueryStatus(c.BondStatus.Unbonded),l.cosmos.queryValidators.getQueryStatus(c.BondStatus.Unbonding)];for(const e of r){const t=e.getValidator(u),n=e.getQueryValidatorThumbnail(u);if(t)return{moniker:t.description.moniker,thumbnail:n&&n.thumbnail?n.thumbnail:void 0,isFetching:e.isFetching||!!n&&n.isFetching,fromCache:!1};if(e.isFetching)return}})();return h?(h.fromCache||h.isFetching||(0,s.runInAction)((()=>{this.lsmDenomCacheData.set(`${a.ChainIdHelper.parse(e).identifier}/${t}`,{moniker:h.moniker,thumbnail:h.thumbnail,timestamp:Date.now()})})),{value:{coinMinimalDenom:t,coinDenom:`${(()=>{if(h.moniker){let e=h.moniker;return e.length>=10&&(e=e.slice(0,7)+"..."),e}return"Unknown"})()}/${d}`,coinDecimals:r.stakeCurrency.coinDecimals,coinImageUrl:h.thumbnail||void 0},done:!h.isFetching}):{value:void 0,done:!1}}}r([s.observable.shallow],u.prototype,"lsmDenomCacheData",void 0),r([s.observable],u.prototype,"isInitialized",void 0),t.LSMCurrencyRegistrar=u},96312:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(38878),t)},48338:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoinGeckoPriceStore=void 0;const o=n(5136),a=n(19731),c=s(n(39714)),u=n(80075),d=n(86693);class l{constructor(e){this.duration=e,this.fns=[],this.callback=()=>{null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.fns.length>0&&((0,this.fns[this.fns.length-1])(),this.fns=[])}}call(e){this.duration<=0?e():(this.fns.push(e),null!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.callback,this.duration))}}class h{constructor(e,t,n=0){if(this.array=[],this.map={},this.restored={},this.isRestored=!1,this.storeKey="",!t)throw new Error("Empty store key");this.kvStore=e,this.storeKey=t,this.throttler=new l(n)}has(e){return!0===this.map[e]}add(...e){let t=!1,n=[];for(const r of e)this.isRestored&&this.restored[r]&&(t=!0,delete this.restored[r]),this.has(r)||n.push(r);if(0===n.length)return this.isRestored&&t&&this.throttler.call((()=>this.save())),!1;n=[...new Set(n)];for(const e of n)this.map[e]=!0;let r=this.array.slice().concat(n);return r=r.sort(((e,t)=>e<t?-1:1)),this.array=r,this.isRestored&&this.throttler.call((()=>this.save())),!0}get values(){return this.array.slice()}save(){return i(this,void 0,void 0,(function*(){yield this.kvStore.set(this.storeKey,this.array.filter((e=>!this.restored[e])))}))}restore(){return i(this,void 0,void 0,(function*(){const e=yield this.kvStore.get(this.storeKey);if(e){for(const t of e)this.restored[t]=!0;for(const e of this.array)this.restored[e]&&delete this.restored[e];this.add(...e)}this.isRestored=!0}))}}class p extends o.ObservableQuery{constructor(e,t,n,r={}){var i;super(new o.QuerySharedContext(e,{responseDebounceMs:0}),r.baseURL||"https://api.coingecko.com/api/v3",r.uri||"/simple/price"),this.kvStore=e,this._optionUri=r.uri||"/simple/price",this._isInitialized=!1;const s=null!==(i=r.throttleDuration)&&void 0!==i?i:250;this._coinIds=new h(e,"__coin_ids",s),this._vsCurrencies=new h(e,"__vs_currencies",s),this._defaultVsCurrency=n,this._supportedVsCurrencies=t,this._throttler=new l(s),(0,u.makeObservable)(this),this.init()}onStart(){return super.onStart(),this.waitUntilInitialized()}init(){return i(this,void 0,void 0,(function*(){this._isInitialized||(yield this.loadStabledResponse(),yield Promise.all([this._coinIds.restore(),this._vsCurrencies.restore()]),this._coinIds.save(),this._vsCurrencies.save(),this.updateURL([],[],!0),this._isInitialized=!0)}))}waitUntilInitialized(){return i(this,void 0,void 0,(function*(){if(!this.isInitialized)return new Promise((e=>{const t=(0,u.autorun)((()=>{this.isInitialized&&(e(),t&&t())}))}))}))}get isInitialized(){return this._isInitialized}get defaultVsCurrency(){return this._defaultVsCurrency}setDefaultVsCurrency(e){this._defaultVsCurrency=e}get supportedVsCurrencies(){return this._supportedVsCurrencies}getFiatCurrency(e){return this._supportedVsCurrencies[e]}canFetch(){return this._coinIds.values.length>0&&this._vsCurrencies.values.length>0}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});return i(this,void 0,void 0,(function*(){const{data:n,headers:r}=yield t.fetchResponse.call(this,e);return{headers:r,data:(0,c.default)(this.response?this.response.data:{},n)}}))}updateURL(e,t,n=!1){const r=this._coinIds.add(...e),i=this._vsCurrencies.add(...t,"usd");if(r||i||n){const e=`${this._optionUri}?ids=${this._coinIds.values.join(",")}&vs_currencies=${this._vsCurrencies.values.join(",")}`;this._isInitialized?this._throttler.call((()=>this.setUrl(e))):this.setUrl(e)}}getCacheKey(){return(0,d.makeURL)(this.baseURL,this._optionUri)}getPrice(e,t){if(t||(t=this.defaultVsCurrency),!this.supportedVsCurrencies[t])return;if(this.updateURL([e],[t]),!this.response)return;const n=this.response.data[e];return n?n[t]:void 0}calculatePrice(e,t){if(!e.currency.coinGeckoId)return;t||(t=this.defaultVsCurrency);const n=this.supportedVsCurrencies[t];if(!n)return;if(e.toDec().isZero())return new a.PricePretty(n,0);const r=this.getPrice(e.currency.coinGeckoId,t);if(void 0===r)return new a.PricePretty(n,new a.Int(0)).ready(!1);const i=e.toDec(),s=new a.Dec(r.toString());return new a.PricePretty(n,i.mul(s))}waitPrice(e,t){var n,r;return i(this,void 0,void 0,(function*(){if(t||(t=this.defaultVsCurrency),!this.supportedVsCurrencies[t])return Promise.resolve(void 0);if((null===(n=this.response)||void 0===n?void 0:n.data[e])&&this.response.data[e][t])return Promise.resolve(this.response.data[e][t]);this.updateURL([e],[t]),yield this.waitResponse();const i=null===(r=this.response)||void 0===r?void 0:r.data[e];return i?i[t]:void 0}))}waitFreshPrice(e,t){var n;return i(this,void 0,void 0,(function*(){if(t||(t=this.defaultVsCurrency),!this.supportedVsCurrencies[t])return Promise.resolve(void 0);this.updateURL([e],[t]),yield this.waitFreshResponse();const r=null===(n=this.response)||void 0===n?void 0:n.data[e];return r?r[t]:void 0}))}waitCalculatePrice(e,t){return i(this,void 0,void 0,(function*(){if(!e.currency.coinGeckoId)return;t||(t=this.defaultVsCurrency);const n=this.supportedVsCurrencies[t];if(!n)return;if(e.toDec().isZero())return new a.PricePretty(n,0);const r=yield this.waitPrice(e.currency.coinGeckoId,t);if(void 0===r)return new a.PricePretty(n,new a.Int(0)).ready(!1);const i=e.toDec(),s=new a.Dec(r.toString());return new a.PricePretty(n,i.mul(s))}))}waitFreshCalculatePrice(e,t){return i(this,void 0,void 0,(function*(){if(!e.currency.coinGeckoId)return;t||(t=this.defaultVsCurrency);const n=this.supportedVsCurrencies[t];if(!n)return;if(e.toDec().isZero())return new a.PricePretty(n,0);const r=yield this.waitFreshPrice(e.currency.coinGeckoId,t);if(void 0===r)return new a.PricePretty(n,new a.Int(0)).ready(!1);const i=e.toDec(),s=new a.Dec(r.toString());return new a.PricePretty(n,i.mul(s))}))}}r([u.observable],p.prototype,"_defaultVsCurrency",void 0),r([u.action],p.prototype,"setDefaultVsCurrency",null),t.CoinGeckoPriceStore=p},69081:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBoardAux=void 0;const r=n(80075),i=n(27932);class s extends i.ObservableChainQuery{constructor(e,t,n,i){super(e,t,n,`/agoric/vstorage/data/published.boardAux.${i}`),(0,r.makeObservable)(this)}get data(){if(!this.response)return;const{value:e}=this.response.data,t=JSON.parse(e),n="values"in t?t.values[t.values.length-1]:t;return JSON.parse(n)}}class o extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new s(this.sharedContext,this.chainId,this.chainGetter,e)))}getBoardAux(e){return this.get(e)}}t.ObservableQueryBoardAux=o},95081:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBrands=void 0;const r=n(27932),i=n(80075);class s extends r.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/agoric/vstorage/data/published.agoricNames.brand"),(0,i.makeObservable)(this)}get data(){if(!this.response)return;const{value:e}=this.response.data,t=JSON.parse(e),n="values"in t?t.values[t.values.length-1]:t;return JSON.parse(n)}}t.ObservableQueryBrands=s},4957:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(46655),t)},46655:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AgoricQueriesImpl=t.AgoricQueries=void 0;const r=n(69081),i=n(95081),s=n(28468);t.AgoricQueries={use:()=>(e,t,n,r)=>({agoric:new o(e,t,n,r)})};class o{constructor(e,t,n,o){this.queryBoardAux=new r.ObservableQueryBoardAux(t,n,o),this.queryBrands=new i.ObservableQueryBrands(t,n,o),this.queryVbankAssets=new s.ObservableQueryVbankAssets(t,n,o)}}t.AgoricQueriesImpl=o},28468:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryVbankAssets=void 0;const r=n(80075),i=n(27932);class s extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/agoric/vstorage/data/published.agoricNames.vbankAsset"),(0,r.makeObservable)(this)}get data(){if(!this.response)return;const{value:e}=this.response.data,t=JSON.parse(e),n="values"in t?t.values[t.values.length-1]:t;return JSON.parse(n)}}t.ObservableQueryVbankAssets=s},51787:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBalances=t.ObservableQueryBalancesImplMap=void 0;const i=n(89642),s=n(80075),o=n(19731),a=n(5136),c=n(58242);class u{constructor(e,t,n,r,i){this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.balanceRegistries=r,this.balanceImplMap=new Map,this.getBalanceFromCurrency=(0,c.computedFn)((e=>{const t=this.balances.find((t=>t.currency.coinMinimalDenom===e.coinMinimalDenom));return t?t.balance:new o.CoinPretty(e,new o.Int(0))})),this.getBalance=(0,c.computedFn)((e=>{const t=this.balances.find((t=>t.currency.coinMinimalDenom===e.coinMinimalDenom));if(t)return t})),(0,s.makeObservable)(this),this.address=i}fetch(){this.balanceImplMap.forEach((e=>e.fetch()))}getBalanceInner(e){let t=e.coinMinimalDenom;return"type"in e&&"secret20"===e.type&&(t=e.coinMinimalDenom+"/"+e.viewingKey),this.balanceImplMap.has(t)||(0,s.runInAction)((()=>{this.balanceRegistries.forEach((n=>{const r=n.getBalanceImpl(this.chainId,this.chainGetter,this.address,e.coinMinimalDenom);r&&this.balanceImplMap.set(t,r)}))})),this.balanceImplMap.get(t)}get stakable(){const e=this.chainGetter.getChain(this.chainId);if(e.stakeCurrency)return this.getBalanceInner(e.stakeCurrency)}get balances(){const e=this.chainGetter.getChain(this.chainId),t=[];for(let n=0;n<e.currencies.length;n++){const r=e.currencies[n],i=this.getBalanceInner(r);i&&t.push(i)}return t}get positiveBalances(){return this.balances.filter((e=>e.balance.toDec().gt(new o.Dec(0))))}get nonNativeBalances(){return this.balances.filter((e=>"native"!==new i.DenomHelper(e.currency.coinMinimalDenom).type))}get positiveNativeUnstakables(){const e=this.chainGetter.getChain(this.chainId);return this.balances.filter((t=>{var n;return"native"===new i.DenomHelper(t.currency.coinMinimalDenom).type&&t.balance.toDec().gt(new o.Dec(0))&&t.currency.coinMinimalDenom!==(null===(n=e.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)}))}get unstakables(){const e=this.chainGetter.getChain(this.chainId),t=e.currencies.filter((t=>{var n;return t.coinMinimalDenom!==(null===(n=e.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)})),n=[];for(let e=0;e<t.length;e++){const r=t[e],i=this.getBalanceInner(r);i&&n.push(i)}return n}}r([s.observable.shallow],u.prototype,"balanceImplMap",void 0),r([s.computed],u.prototype,"stakable",null),r([s.computed],u.prototype,"balances",null),r([s.computed],u.prototype,"positiveBalances",null),r([s.computed],u.prototype,"nonNativeBalances",null),r([s.computed],u.prototype,"positiveNativeUnstakables",null),r([s.computed],u.prototype,"unstakables",null),t.ObservableQueryBalancesImplMap=u;class d extends a.HasMapStore{constructor(e,t,n){super((e=>new u(this.sharedContext,this.chainId,this.chainGetter,this.balanceRegistries,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.balanceRegistries=[]}addBalanceRegistry(e){this.balanceRegistries.push(e)}getQueryBech32Address(e){return this.get(e)}getQueryEthereumHexAddress(e){return this.get(e)}}t.ObservableQueryBalances=d},27932:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableChainQueryMap=t.ObservableChainQuery=void 0;const r=n(5136),i=n(5136);class s extends r.ObservableQuery{constructor(e,t,n,r){super(e,n.getChain(t).rest,r),this._chainId=t,this.chainGetter=n}get chainId(){return this._chainId}}t.ObservableChainQuery=s;class o extends i.HasMapStore{constructor(e,t,n,r){super(r),this.sharedContext=e,this.chainId=t,this.chainGetter=n}}t.ObservableChainQueryMap=o},80008:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableChainQueryRPCMap=t.ObservableChainQueryRPC=void 0;const r=n(5136),i=n(5136);class s extends r.ObservableQuery{constructor(e,t,n,r){super(e,n.getChain(t).rpc,r),this._chainId=t,this.chainGetter=n}get chainId(){return this._chainId}}t.ObservableChainQueryRPC=s;class o extends i.HasMapStore{constructor(e,t,n,r){super(r),this.sharedContext=e,this.chainId=t,this.chainGetter=n}}t.ObservableChainQueryRPCMap=o},57428:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryAccount=t.ObservableQueryAccountInner=void 0;const i=n(27932),s=n(80075),o=n(94531);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/auth/v1beta1/accounts/${r}`),this.bech32Address=r,(0,s.makeObservable)(this)}canFetch(){return this.bech32Address.length>0}get sequence(){if(!this.response)return"0";try{return o.BaseAccount.fromProtoJSON(this.response.data,this.bech32Address).getSequence().toString()}catch(e){return"0"}}get isVestingAccount(){var e;return!!this.response&&!!(null===(e=this.response.data)||void 0===e?void 0:e.account.base_vesting_account)}}r([s.computed],a.prototype,"sequence",null),r([s.computed],a.prototype,"isVestingAccount",null),t.ObservableQueryAccountInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryAccount=c},21239:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19682:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryAuthZGranter=t.ObservableQueryAuthZGranterInner=void 0;const r=n(27932);class i extends r.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/authz/v1beta1/grants/granter/${r}?pagination.limit=1000`),this.granter=r}canFetch(){return this.granter.length>0}}t.ObservableQueryAuthZGranterInner=i;class s extends r.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new i(this.sharedContext,this.chainId,this.chainGetter,e)))}getGranter(e){return this.get(e)}}t.ObservableQueryAuthZGranter=s},22756:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7104:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryCosmosBalanceRegistry=t.ObservableQueryCosmosBalancesImpl=t.ObservableQueryCosmosBalancesImplParent=void 0;const s=n(89642),o=n(5136),a=n(80075),c=n(19731),u=n(27932),d=n(94531);class l extends u.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/bank/v1beta1/balances/${r}?pagination.limit=1000`),this.bech32Address=r,(0,a.makeObservable)(this)}canFetch(){return this.bech32Address.length>0}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.chainGetter.getChain(this.chainId),n=e.data.balances.map((e=>e.denom));t.addUnknownDenoms(...n)}}t.ObservableQueryCosmosBalancesImplParent=l;class h{constructor(e,t,n,r){this.parent=e,this.chainId=t,this.chainGetter=n,this.denomHelper=r,(0,a.makeObservable)(this)}get balance(){const e=this.currency;return this.response?o.StoreUtils.getBalanceFromCurrency(e,this.response.data.balances):new c.CoinPretty(e,new c.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}get error(){return this.parent.error}get isFetching(){return this.parent.isFetching}get isObserved(){return this.parent.isObserved}get isStarted(){return this.parent.isStarted}get response(){return this.parent.response}fetch(){return this.parent.duplicatedFetchResolver||(this.parent.duplicatedFetchResolver=new Promise(((e,t)=>{(()=>{i(this,void 0,void 0,(function*(){try{yield this.parent.fetch(),this.parent.duplicatedFetchResolver=void 0,e()}catch(e){this.parent.duplicatedFetchResolver=void 0,t(e)}}))})()}))),this.parent.duplicatedFetchResolver}waitFreshResponse(){return i(this,void 0,void 0,(function*(){return yield this.parent.waitFreshResponse()}))}waitResponse(){return i(this,void 0,void 0,(function*(){return yield this.parent.waitResponse()}))}}r([a.computed],h.prototype,"balance",null),r([a.computed],h.prototype,"currency",null),t.ObservableQueryCosmosBalancesImpl=h,t.ObservableQueryCosmosBalanceRegistry=class{constructor(e){this.sharedContext=e,this.parentMap=new Map}getBalanceImpl(e,t,n,r){const i=new s.DenomHelper(r);if("native"!==i.type)return;try{d.Bech32Address.validate(n)}catch(e){return}const o=`${e}/${n}`;return this.parentMap.has(o)||this.parentMap.set(o,new l(this.sharedContext,e,t,n)),new h(this.parentMap.get(o),e,t,i)}}},24789:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7104),t),i(n(87228),t)},87228:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySpendableBalances=t.ObservableChainQuerySpendableBalances=void 0;const i=n(27932),s=n(19731),o=n(80075);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/bank/v1beta1/spendable_balances/${r}`)}get balances(){if(!this.response)return[];const e=[],t=this.chainGetter.getChain(this.chainId);for(const n of this.response.data.balances){const r=t.findCurrency(n.denom);r&&e.push(new s.CoinPretty(r,n.amount))}return e}}r([o.computed],a.prototype,"balances",null),t.ObservableChainQuerySpendableBalances=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQuerySpendableBalances=c},9109:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},73453:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(66598),t)},66598:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryDistributionParams=void 0;const i=n(27932),s=n(80075),o=n(19731);class a extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/cosmos/distribution/v1beta1/params"),(0,s.makeObservable)(this)}get communityTax(){return this.response?new o.RatePretty(this.response.data.params.community_tax):new o.RatePretty(0)}}r([s.computed],a.prototype,"communityTax",null),t.ObservableQueryDistributionParams=a},36513:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryFeeMarketGasPrices=void 0;const r=n(27932),i=n(80075),s=n(19731);class o extends r.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/feemarket/v1/gas_prices"),(0,i.makeObservable)(this)}get gasPrices(){return this.response&&this.response.data.prices?this.response.data.prices.map((e=>({denom:e.denom,amount:new s.Dec(e.amount)}))):[]}}t.ObservableQueryFeeMarketGasPrices=o},41909:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryIBCChannel=t.ObservableChainQueryIBCChannel=void 0;const r=n(27932),i=n(80075);class s extends r.ObservableChainQuery{constructor(e,t,n,r,i){super(e,t,n,`/ibc/core/channel/v1beta1/channels/${i}/ports/${r}`),this.portId=r,this.channelId=i}onStart(){super.onStart(),this.disposer=(0,i.autorun)((()=>{const e=this.chainGetter.getChain(this.chainId);e.features&&e.features.includes("ibc-go")&&this.setUrl(`/ibc/core/channel/v1/channels/${this.channelId}/ports/${this.portId}`)}))}onStop(){this.disposer&&(this.disposer(),this.disposer=void 0),super.onStop()}}t.ObservableChainQueryIBCChannel=s;class o extends r.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=JSON.parse(e);return new s(this.sharedContext,this.chainId,this.chainGetter,t.portId,t.channelId)}))}getTransferChannel(e){return this.getChannel("transfer",e)}getChannel(e,t){const n=JSON.stringify({portId:e,channelId:t});return this.get(n)}}t.ObservableQueryIBCChannel=o},56864:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryIBCClientState=t.ObservableChainQueryClientState=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n,r,i){super(e,t,n,`/ibc/core/channel/v1beta1/channels/${i}/ports/${r}/client_state`),this.portId=r,this.channelId=i}onStart(){super.onStart(),this.disposer=(0,s.autorun)((()=>{const e=this.chainGetter.getChain(this.chainId);e.features&&e.features.includes("ibc-go")&&this.setUrl(`/ibc/core/channel/v1/channels/${this.channelId}/ports/${this.portId}/client_state`)}))}onStop(){this.disposer&&(this.disposer(),this.disposer=void 0),super.onStop()}get clientChainId(){var e,t;if(this.response)return null===(t=null===(e=this.response.data.identified_client_state)||void 0===e?void 0:e.client_state)||void 0===t?void 0:t.chain_id}}r([s.computed],o.prototype,"clientChainId",null),t.ObservableChainQueryClientState=o;class a extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=JSON.parse(e);return new o(this.sharedContext,this.chainId,this.chainGetter,t.portId,t.channelId)}))}getClientStateOnTransferPort(e){return this.getClientState("transfer",e)}getClientState(e,t){const n=JSON.stringify({portId:e,channelId:t});return this.get(n)}}t.ObservableQueryIBCClientState=a},62595:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryDenomTrace=t.ObservableChainQueryDenomTrace=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/ibc/applications/transfer/v1beta1/denom_traces/${r}`),this.hash=r}onStart(){super.onStart(),this.disposer=(0,s.autorun)((()=>{const e=this.chainGetter.getChain(this.chainId);e.features&&e.features.includes("ibc-go")&&this.setUrl(`/ibc/apps/transfer/v1/denom_traces/${this.hash}`)}))}onStop(){this.disposer&&(this.disposer(),this.disposer=void 0),super.onStop()}get paths(){if(!this.response)return[];const e=this.response.data.denom_trace.path.split("/");if(e.length%2!=0)return console.log("Failed to parse paths",e),[];const t=[];for(let n=0;n<e.length;n+=2)t.push(e.slice(n,n+2));return t.map((e=>({portId:e[0],channelId:e[1]})))}get denom(){if(this.response)return this.response.data.denom_trace.base_denom}get denomTrace(){if(this.response&&this.denom)return{denom:this.denom,paths:this.paths}}}r([s.computed],o.prototype,"paths",null),r([s.computed],o.prototype,"denomTrace",null),t.ObservableChainQueryDenomTrace=o;class a extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new o(this.sharedContext,this.chainId,this.chainGetter,e)))}getDenomTrace(e){return this.get(e)}}t.ObservableQueryDenomTrace=a},94222:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(41909),t),i(n(56864),t),i(n(62595),t)},44213:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},18247:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthZ=t.Balance=t.IBC=t.Account=t.Staking=void 0,s(n(81918),t),s(n(57428),t),s(n(94222),t),s(n(24789),t),s(n(19682),t),t.Staking=o(n(97021)),t.Account=o(n(21239)),t.IBC=o(n(44213)),t.Balance=o(n(9109)),t.AuthZ=o(n(22756)),s(n(92775),t)},92775:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CosmosQueriesImpl=t.CosmosQueries=void 0;const r=n(57428),i=n(81918),s=n(94222),o=n(24789),a=n(73453),c=n(37527),u=n(19682),d=n(36513);t.CosmosQueries={use:()=>(e,t,n,r)=>({cosmos:new l(e,t,n,r)})};class l{constructor(e,t,n,l){this.queryRPCStatus=new c.ObservableQueryRPCStatus(t,n,l),e.queryBalances.addBalanceRegistry(new o.ObservableQueryCosmosBalanceRegistry(t)),this.queryAccount=new r.ObservableQueryAccount(t,n,l),this.querySpendableBalances=new o.ObservableQuerySpendableBalances(t,n,l),this.queryPool=new i.ObservableQueryStakingPool(t,n,l),this.queryStakingParams=new i.ObservableQueryStakingParams(t,n,l),this.queryDistributionParams=new a.ObservableQueryDistributionParams(t,n,l),this.queryRewards=new i.ObservableQueryRewards(t,n,l),this.queryDelegations=new i.ObservableQueryDelegations(t,n,l),this.queryUnbondingDelegations=new i.ObservableQueryUnbondingDelegations(t,n,l),this.queryValidators=new i.ObservableQueryValidators(t,n,l),this.queryIBCClientState=new s.ObservableQueryIBCClientState(t,n,l),this.queryIBCChannel=new s.ObservableQueryIBCChannel(t,n,l),this.queryIBCDenomTrace=new s.ObservableQueryDenomTrace(t,n,l),this.queryAuthZGranter=new u.ObservableQueryAuthZGranter(t,n,l),this.queryFeeMarketGasPrices=new d.ObservableQueryFeeMarketGasPrices(t,n,l)}}t.CosmosQueriesImpl=l},44322:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryDelegations=t.ObservableQueryDelegationsInner=void 0;const i=n(27932),s=n(19731),o=n(80075),a=n(58242);class c extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/staking/v1beta1/delegations/${r}?pagination.limit=1000`),this.getDelegationTo=(0,a.computedFn)((e=>{const t=this.delegations,n=this.chainGetter.getChain(this.chainId).stakeCurrency;if(n){if(!this.response)return new s.CoinPretty(n,new s.Int(0)).ready(!1);for(const r of t)if(r.delegation.validator_address===e)return new s.CoinPretty(n,new s.Int(r.balance.amount));return new s.CoinPretty(n,new s.Int(0))}})),(0,o.makeObservable)(this),this.bech32Address=r}canFetch(){return this.bech32Address.length>0||null!=this.chainGetter.getChain(this.chainId).stakeCurrency}get total(){const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return;if(!this.response)return new s.CoinPretty(e,new s.Int(0)).ready(!1);let t=new s.Int(0);for(const e of this.response.data.delegation_responses){const n=new s.Int(e.balance.amount);n.gt(new s.Int(0))&&(t=t.add(n))}return new s.CoinPretty(e,t)}get delegationBalances(){if(!this.response)return[];const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return[];const t=[];for(const n of this.response.data.delegation_responses){const r=new s.CoinPretty(e,new s.Int(n.balance.amount));r.toDec().gt(new s.Dec(0))&&t.push({validatorAddress:n.delegation.validator_address,balance:r})}return t}get delegations(){return this.response?this.response.data.delegation_responses.filter((e=>new s.Int(e.balance.amount).gt(new s.Int(0)))):[]}}r([o.computed],c.prototype,"total",null),r([o.computed],c.prototype,"delegationBalances",null),r([o.computed],c.prototype,"delegations",null),t.ObservableQueryDelegationsInner=c;class u extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new c(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryDelegations=u},81918:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(44322),t),i(n(55121),t),i(n(88115),t),i(n(4741),t),i(n(43780),t),i(n(66979),t)},66979:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStakingParams=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/cosmos/staking/v1beta1/params"),(0,s.makeObservable)(this)}get unbondingTimeSec(){return this.response?parseInt(this.response.data.params.unbonding_time.replace("s","")):0}get maxValidators(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.params.max_validators)&&void 0!==t?t:0}get maxEntries(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.params.max_entries)&&void 0!==t?t:0}get historicalEntries(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.params.historical_entries)&&void 0!==t?t:0}get bondDenom(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.params.bond_denom)&&void 0!==t?t:""}}r([s.computed],o.prototype,"unbondingTimeSec",null),t.ObservableQueryStakingParams=o},43780:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStakingPool=void 0;const i=n(27932),s=n(80075),o=n(19731);class a extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/cosmos/staking/v1beta1/pool"),(0,s.makeObservable)(this)}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&super.canFetch()}get notBondedTokens(){const e=this.chainGetter.getChain(this.chainId);if(e.stakeCurrency)return this.response?new o.CoinPretty(e.stakeCurrency,this.response.data.pool.not_bonded_tokens):new o.CoinPretty(e.stakeCurrency,0)}get bondedTokens(){const e=this.chainGetter.getChain(this.chainId);if(e.stakeCurrency)return this.response?new o.CoinPretty(e.stakeCurrency,this.response.data.pool.bonded_tokens):new o.CoinPretty(e.stakeCurrency,0)}}r([s.computed],a.prototype,"notBondedTokens",null),r([s.computed],a.prototype,"bondedTokens",null),t.ObservableQueryStakingPool=a},55121:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryRewards=t.ObservableQueryRewardsInner=void 0;const i=n(27932),s=n(80075),o=n(19731),a=n(5136),c=n(58242);class u extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/distribution/v1beta1/delegators/${r}/rewards`),this.getRewardsOf=(0,c.computedFn)((e=>{var t,n;const r=this.chainGetter.getChain(this.chainId),i=null===(n=null===(t=this.response)||void 0===t?void 0:t.data.rewards)||void 0===n?void 0:n.find((t=>t.validator_address===e));if(!i||!i.reward)return[];const s=new Map;for(const e of i.reward){const t=new o.Dec(e.amount).truncate();if(!t.gt(new o.Int(0)))continue;const n=s.get(e.denom);n?n.amount=new o.Int(n.amount).add(t).toString():s.set(e.denom,{denom:e.denom,amount:t.toString()})}return a.StoreUtils.toCoinPretties(r,Array.from(s.values()))})),this.getStakableRewardOf=(0,c.computedFn)((e=>{const t=this.chainGetter.getChain(this.chainId);if(!t.stakeCurrency)return;const n=this.getRewardsOf(e).find((e=>{var n;return e.currency.coinMinimalDenom===(null===(n=t.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)}));return null!=n?n:new o.CoinPretty(t.stakeCurrency,new o.Int(0))})),this.getUnstakableRewardsOf=(0,c.computedFn)((e=>this.getRewardsOf(e).filter((e=>{var t;return e.currency.coinMinimalDenom!==(null===(t=this.chainGetter.getChain(this.chainId).stakeCurrency)||void 0===t?void 0:t.coinMinimalDenom)})))),this.getDescendingPendingRewardValidatorAddresses=(0,c.computedFn)((e=>{var t,n;if(!this.response)return[];const r=this.chainGetter.getChain(this.chainId);if(!r.stakeCurrency)return[];const i=null!==(n=null===(t=this.response.data.rewards)||void 0===t?void 0:t.slice())&&void 0!==n?n:[];return i.sort(((e,t)=>{var n,i;const s=a.StoreUtils.getBalanceFromCurrency(r.stakeCurrency,null!==(n=e.reward)&&void 0!==n?n:[]),o=a.StoreUtils.getBalanceFromCurrency(r.stakeCurrency,null!==(i=t.reward)&&void 0!==i?i:[]);return s.toDec().gt(o.toDec())?-1:1})),i.filter((e=>{if(e.reward)for(const t of e.reward)if(new o.Dec(t.amount).truncate().gt(new o.Int(0)))return!0;return!1})).slice(0,e).map((e=>e.validator_address))})),(0,s.makeObservable)(this),this.bech32Address=r}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&this.bech32Address.length>0}get rewards(){var e;const t=this.chainGetter.getChain(this.chainId);if(!this.response||!this.response.data.rewards)return[];const n=new Map;for(const t of this.response.data.rewards)for(const r of null!==(e=t.reward)&&void 0!==e?e:[]){const e=new o.Dec(r.amount).truncate();if(!e.gt(new o.Int(0)))continue;const t=n.get(r.denom);t?t.amount=new o.Int(t.amount).add(e).toString():n.set(r.denom,{denom:r.denom,amount:e.toString()})}return a.StoreUtils.toCoinPretties(t,Array.from(n.values()))}get stakableReward(){const e=this.chainGetter.getChain(this.chainId);if(!e.stakeCurrency)return;const t=this.rewards.find((t=>{var n;return t.currency.coinMinimalDenom===(null===(n=e.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)}));return null!=t?t:new o.CoinPretty(e.stakeCurrency,new o.Int(0))}get unstakableRewards(){const e=this.chainGetter.getChain(this.chainId);return this.rewards.filter((t=>{var n;return t.currency.coinMinimalDenom!==(null===(n=e.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)}))}get pendingRewardValidatorAddresses(){var e;if(!this.response)return[];const t=[];for(const n of null!==(e=this.response.data.rewards)&&void 0!==e?e:[])if(n.reward)for(const e of n.reward)if(new o.Dec(e.amount).truncate().gt(new o.Int(0))){t.push(n.validator_address);break}return t}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.chainGetter.getChain(this.chainId),n=e.data.total.map((e=>e.denom));t.addUnknownDenoms(...n)}}r([s.computed],u.prototype,"rewards",null),r([s.computed],u.prototype,"stakableReward",null),r([s.computed],u.prototype,"unstakableRewards",null),r([s.computed],u.prototype,"pendingRewardValidatorAddresses",null),t.ObservableQueryRewardsInner=u;class d extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new u(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryRewards=d},97021:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BondStatus=void 0,(n=t.BondStatus||(t.BondStatus={})).Unbonded="Unbonded",n.Unbonding="Unbonding",n.Bonded="Bonded",n.Unspecified="Unspecified"},88115:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryUnbondingDelegations=t.ObservableQueryUnbondingDelegationsInner=void 0;const i=n(27932),s=n(19731),o=n(80075);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/staking/v1beta1/delegators/${r}/unbonding_delegations?pagination.limit=1000`),(0,o.makeObservable)(this),this.bech32Address=r}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&this.bech32Address.length>0}get total(){const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return;if(!this.response)return new s.CoinPretty(e,new s.Int(0)).ready(!1);let t=new s.Int(0);for(const e of this.response.data.unbonding_responses)for(const n of e.entries){const e=new s.Int(n.balance);e.gt(new s.Int(0))&&(t=t.add(e))}return new s.CoinPretty(e,t)}get unbondingBalances(){const e=this.unbondings,t=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!t)return[];const n=[];for(const r of e){const e=[];for(const n of r.entries){const r=new s.CoinPretty(t,new s.Int(n.balance));r.toDec().gt(new s.Dec(0))&&e.push({creationHeight:new s.Int(n.creation_height),completionTime:n.completion_time,balance:r})}e.length>0&&n.push({validatorAddress:r.validator_address,entries:e})}return n}get unbondings(){if(!this.response)return[];const e=[];for(const t of this.response.data.unbonding_responses){const n=Object.assign({},t);n.entries=n.entries.filter((e=>new s.Int(e.balance).gt(new s.Int(0)))),e.push(n)}return e}}r([o.computed],a.prototype,"total",null),r([o.computed],a.prototype,"unbondingBalances",null),r([o.computed],a.prototype,"unbondings",null),t.ObservableQueryUnbondingDelegationsInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryUnbondingDelegations=c},4741:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryValidators=t.ObservableQueryValidatorsInner=t.ObservableQueryValidatorThumbnail=void 0;const o=n(27932),a=n(97021),c=n(80075),u=n(5136),d=s(n(10978)),l=n(19731),h=n(58242);class p extends u.ObservableQuery{constructor(e,t){super(e,"https://keybase.io/",`_/api/1.0/user/lookup.json?fields=pictures&key_suffix=${t.description.identity}`),(0,c.makeObservable)(this),this.validator=t}canFetch(){return""!==this.validator.description.identity}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});return i(this,void 0,void 0,(function*(){return yield p.fetchingThumbnailQueue.add((()=>t.fetchResponse.call(this,e)))}))}get thumbnail(){var e,t,n,r;return 0===(null===(e=this.response)||void 0===e?void 0:e.data.status.code)&&this.response.data.them&&this.response.data.them.length>0&&null!==(r=null===(n=null===(t=this.response.data.them[0].pictures)||void 0===t?void 0:t.primary)||void 0===n?void 0:n.url)&&void 0!==r?r:""}}p.fetchingThumbnailQueue=new d.default({concurrency:3}),r([c.computed],p.prototype,"thumbnail",null),t.ObservableQueryValidatorThumbnail=p;class f extends o.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/staking/v1beta1/validators?pagination.limit=1000&status=${(()=>{switch(r){case a.BondStatus.Bonded:return"BOND_STATUS_BONDED";case a.BondStatus.Unbonded:return"BOND_STATUS_UNBONDED";case a.BondStatus.Unbonding:return"BOND_STATUS_UNBONDING";default:return"BOND_STATUS_UNSPECIFIED"}})()}`),this.status=r,this.thumbnailMap=new Map,this.getValidator=(0,h.computedFn)((e=>this.validators.find((t=>t.operator_address===e)))),this.getValidatorThumbnail=(0,h.computedFn)((e=>{const t=this.getQueryValidatorThumbnail(e);return t?t.thumbnail:""})),this.getQueryValidatorThumbnail=(0,h.computedFn)((e=>{const t=this.validators.find((t=>t.operator_address===e));if(!t)return;if(!t.description.identity)return;const n=t.description.identity;return this.thumbnailMap.has(n)||(0,c.runInAction)((()=>{this.thumbnailMap.set(n,new p(this.sharedContext,t))})),this.thumbnailMap.get(n)})),this.getValidatorShare=(0,h.computedFn)((e=>{const t=this.validators.find((t=>t.operator_address===e));if(!t)return;const n=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!n)return;const r=new l.Dec(t.tokens).truncate();return new l.CoinPretty(n,r)})),(0,c.makeObservable)(this)}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&super.canFetch()}get validators(){return this.response?this.response.data.validators:[]}get validatorsSortedByVotingPower(){return this.validators.sort(((e,t)=>new l.Dec(e.tokens).gt(new l.Dec(t.tokens))?-1:1))}}r([c.observable.shallow],f.prototype,"thumbnailMap",void 0),r([c.computed],f.prototype,"validators",null),r([c.computed],f.prototype,"validatorsSortedByVotingPower",null),t.ObservableQueryValidatorsInner=f;class g extends o.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new f(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryStatus(e=a.BondStatus.Bonded){return this.get(e)}}t.ObservableQueryValidators=g},37527:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryRPCStatus=void 0;const r=n(80008),i=n(19731);class s extends r.ObservableChainQueryRPC{constructor(e,t,n){super(e,t,n,"/status")}get network(){if(this.response)return"result"in this.response.data?this.response.data.result.node_info.network:this.response.data.node_info.network}get latestBlockHeight(){if(this.response)return"result"in this.response.data?new i.Int(this.response.data.result.sync_info.latest_block_height):new i.Int(this.response.data.sync_info.latest_block_height)}}t.ObservableQueryRPCStatus=s},79970:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableCosmwasmContractChainQuery=void 0;const i=n(27932),s=n(48834),o=n(80075);class a extends i.ObservableChainQuery{constructor(e,t,n,r,i){super(e,t,n,a.getUrlFromObj(r,i)),this.contractAddress=r,this.obj=i}onStart(){super.onStart(),this.disposer=(0,o.autorun)((()=>{const e=this.chainGetter.getChain(this.chainId);e.features&&e.features.includes("wasmd_0.24+")?this.url.startsWith("/wasm/v1/")&&this.setUrl(`/cosmwasm${this.url}`):this.url.startsWith("/cosmwasm/")&&this.setUrl(`${this.url.replace("/cosmwasm","")}`)}))}onStop(){this.disposer&&(this.disposer(),this.disposer=void 0),super.onStop()}static getUrlFromObj(e,t){const n=JSON.stringify(t);return`/wasm/v1/contract/${e}/smart/${s.Buffer.from(n).toString("base64")}`}canFetch(){return 0!==this.contractAddress.length}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});return r(this,void 0,void 0,(function*(){const{data:n,headers:r}=yield t.fetchResponse.call(this,e),i=n;if(!i)throw new Error("Failed to get the response from the contract");return{headers:r,data:i.data}}))}}t.ObservableCosmwasmContractChainQuery=a},16182:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryCw20BalanceRegistry=t.ObservableQueryCw20BalanceImpl=void 0;const i=n(80075),s=n(89642),o=n(19731),a=n(79970);class c extends a.ObservableCosmwasmContractChainQuery{constructor(e,t,n,r,i){if("cw20"!==r.type)throw new Error(`Denom helper must be cw20: ${r.denom}`);super(e,t,n,r.contractAddress,{balance:{address:i}}),this.denomHelper=r,this.bech32Address=i}canFetch(){return super.canFetch()&&""!==this.bech32Address}get balance(){const e=this.denomHelper.denom,t=this.chainGetter.getChain(this.chainId).currencies.find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${e}`);return this.response&&this.response.data.balance?new o.CoinPretty(t,new o.Int(this.response.data.balance)):new o.CoinPretty(t,new o.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}}r([i.computed],c.prototype,"balance",null),r([i.computed],c.prototype,"currency",null),t.ObservableQueryCw20BalanceImpl=c,t.ObservableQueryCw20BalanceRegistry=class{constructor(e){this.sharedContext=e}getBalanceImpl(e,t,n,r){const i=new s.DenomHelper(r);if("cw20"===i.type)return new c(this.sharedContext,e,t,i,n)}}},84996:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryCw20ContractInfo=t.ObservableQueryCw20ContactInfoInner=void 0;const i=n(27932),s=n(80075),o=n(79970);class a extends o.ObservableCosmwasmContractChainQuery{constructor(e,t,n,r){super(e,t,n,r,{token_info:{}})}get tokenInfo(){if(this.response&&this.response.data)return this.response.data}}r([s.computed],a.prototype,"tokenInfo",null),t.ObservableQueryCw20ContactInfoInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryContract(e){return this.get(e)}}t.ObservableQueryCw20ContractInfo=c},82043:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CosmWasm=void 0,s(n(16182),t),t.CosmWasm=o(n(97019)),s(n(26173),t)},26173:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CosmwasmQueriesImpl=t.CosmwasmQueries=void 0;const r=n(84996),i=n(16182);t.CosmwasmQueries={use:()=>(e,t,n,r)=>({cosmwasm:new s(e,t,n,r)})};class s{constructor(e,t,n,s){e.queryBalances.addBalanceRegistry(new i.ObservableQueryCw20BalanceRegistry(t)),this.querycw20ContractInfo=new r.ObservableQueryCw20ContractInfo(t,n,s)}}t.CosmwasmQueriesImpl=s},97019:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},14097:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ICNS=void 0,s(n(55195),t),s(n(94989),t),t.ICNS=o(n(82887))},55195:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryICNSNames=t.ObservableQueryICNSNamesInner=void 0;const i=n(79970),s=n(80075),o=n(27932);class a extends i.ObservableCosmwasmContractChainQuery{constructor(e,t,n,r,i){super(e,t,n,r,{icns_names:{address:i}}),this.address=i}canFetch(){return""!==this.address}get primaryName(){return this.response&&this.response.data?this.response.data.primary_name:""}get names(){return this.response&&this.response.data?this.response.data.names:[]}}r([s.computed],a.prototype,"primaryName",null),r([s.computed],a.prototype,"names",null),t.ObservableQueryICNSNamesInner=a;class c extends o.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=e.split("/");return new a(this.sharedContext,this.chainId,this.chainGetter,t[0],t[1])}))}getQueryContract(e,t){return this.get(`${e}/${t}`)}}t.ObservableQueryICNSNames=c},94989:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICNSQueriesImpl=t.ICNSQueries=void 0;const r=n(55195);t.ICNSQueries={use:()=>(e,t,n,r)=>({icns:new i(e,t,n,r)})};class i{constructor(e,t,n,i){this.queryICNSNames=new r.ObservableQueryICNSNames(t,n,i)}}t.ICNSQueriesImpl=i},82887:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},42369:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(44513),t),i(n(27932),t),i(n(51787),t),i(n(4957),t),i(n(18247),t),i(n(82043),t),i(n(64585),t),i(n(7312),t),i(n(14097),t)},13445:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBaseFee=void 0;const i=n(27932),s=n(80075),o=n(19731);class a extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/osmosis/txfees/v1beta1/cur_eip_base_fee"),(0,s.makeObservable)(this)}get baseFeeAmount(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.base_fee)&&void 0!==t?t:""}get baseFee(){var e;if(null===(e=this.response)||void 0===e?void 0:e.data.base_fee)return new o.Dec(this.response.data.base_fee)}}r([s.computed],a.prototype,"baseFee",null),t.ObservableQueryBaseFee=a},45157:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7312:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFee=t.TxFeesBaseDenom=t.TxFeesSpotPriceByDenom=t.TxFeesFeeTokens=void 0,s(n(23171),t),s(n(17220),t),s(n(49135),t),s(n(13445),t),t.TxFeesFeeTokens=o(n(819)),t.TxFeesSpotPriceByDenom=o(n(20956)),t.TxFeesBaseDenom=o(n(30847)),t.BaseFee=o(n(45157)),s(n(47418),t)},47418:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OsmosisQueriesImpl=t.OsmosisQueries=void 0;const r=n(23171),i=n(17220),s=n(49135),o=n(13445);t.OsmosisQueries={use:()=>(e,t,n,r)=>({osmosis:new a(e,t,n,r)})};class a{constructor(e,t,n,a){this.queryTxFeesFeeTokens=new r.ObservableQueryTxFeesFeeTokens(t,n,a),this.queryTxFeesSpotPriceByDenom=new i.ObservableQueryTxFeesSpotPriceByDenom(t,n,a),this.queryTxFeesBaseDenom=new s.ObservableQueryTxFeesBaseDenom(t,n,a),this.queryBaseFee=new o.ObservableQueryBaseFee(t,n,a)}}t.OsmosisQueriesImpl=a},49135:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTxFeesBaseDenom=void 0;const r=n(27932),i=n(80075);class s extends r.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/osmosis/txfees/v1beta1/base_denom"),(0,i.makeObservable)(this)}get baseDenom(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.base_denom)&&void 0!==t?t:""}}t.ObservableQueryTxFeesBaseDenom=s},30847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},23171:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTxFeesFeeTokens=void 0;const i=n(27932),s=n(80075),o=n(58242);class a extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/osmosis/txfees/v1beta1/fee_tokens"),this.isTxFeeToken=(0,o.computedFn)((e=>!!this.response&&!0===this.feeCurrenciesDenomMap.get(e))),(0,s.makeObservable)(this)}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.chainGetter.getChain(this.chainId),n=e.data.fee_tokens.map((e=>e.denom));t.addUnknownDenoms(...n)}get feeCurrenciesDenomMap(){const e=new Map;if(!this.response)return e;for(const t of this.response.data.fee_tokens)e.set(t.denom,!0);return e}get feeCurrencies(){if(!this.response)return[];const e=[],t=this.chainGetter.getChain(this.chainId);for(const n of this.response.data.fee_tokens){const r=t.findCurrency(n.denom);r&&e.push(r)}return e}}r([s.computed],a.prototype,"feeCurrenciesDenomMap",null),r([s.computed],a.prototype,"feeCurrencies",null),t.ObservableQueryTxFeesFeeTokens=a},819:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},17220:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTxFeesSpotPriceByDenom=t.ObservableQueryTxFeesSpotPriceByDenomInner=void 0;const i=n(27932),s=n(80075),o=n(19731);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`osmosis/txfees/v1beta1/spot_price_by_denom?denom=${r}`),(0,s.makeObservable)(this)}get poolId(){return this.response?this.response.data.poolID:""}get spotPriceDec(){return this.response?new o.Dec(this.response.data.spot_price):new o.Dec(0)}}r([s.computed],a.prototype,"spotPriceDec",null),t.ObservableQueryTxFeesSpotPriceByDenomInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryDenom(e){return this.get(e)}}t.ObservableQueryTxFeesSpotPriceByDenom=c},20956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},44513:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.QueriesStore=t.createQueriesSetBase=void 0;const i=n(80075),s=n(51787),o=n(5136),a=n(14532);t.createQueriesSetBase=(e,t,n)=>({queryBalances:new s.ObservableQueryBalances(e,t,n)});class c{constructor(e,t,n,...r){var s;this.kvStore=e,this.chainGetter=t,this.options=n,this.queriesMap=new Map,this.sharedContext=new o.QuerySharedContext(e,{responseDebounceMs:null!==(s=this.options.responseDebounceMs)&&void 0!==s?s:0}),this.queriesCreators=r,this.simpleQuery=new a.ObservableSimpleQuery(this.sharedContext),(0,i.makeObservable)(this)}get(e){if(!this.queriesMap.has(e)){const n=(0,t.createQueriesSetBase)(this.sharedContext,e,this.chainGetter);(0,i.runInAction)((()=>{const t=(0,o.mergeStores)(n,[this.sharedContext,e,this.chainGetter],...this.queriesCreators);this.queriesMap.set(e,t)}))}return this.queriesMap.get(e)}}r([i.observable.shallow],c.prototype,"queriesMap",void 0),t.QueriesStore=c},79468:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySecretContractCodeHash=t.ObservableQuerySecretContractCodeHashInner=void 0;const r=n(27932);class i extends r.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/compute/v1beta1/code_hash/by_contract_address/${r}`),this.contractAddress=r}canFetch(){return this.contractAddress.length>0}}t.ObservableQuerySecretContractCodeHashInner=i;class s extends r.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new i(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryContract(e){return this.get(e)}}t.ObservableQuerySecretContractCodeHash=s},87274:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableSecretContractChainQuery=void 0;const s=n(27932),o=n(89642),a=n(80075),c=n(48834),u=n(86693);class d extends s.ObservableChainQuery{constructor(e,t,n,r,i,s,o){super(e,t,n,""),this.apiGetter=r,this.contractAddress=i,this.obj=s,this.querySecretContractCodeHash=o,this.keplr=void 0,this._isIniting=!1,(0,a.makeObservable)(this)}onStart(){const e=Object.create(null,{onStart:{get:()=>super.onStart}});return i(this,void 0,void 0,(function*(){if(e.onStart.call(this),this.keplr||(yield this.initKeplr()),!this.keplr)throw new Error("Failed to get keplr");yield this.querySecretContractCodeHash.getQueryContract(this.contractAddress).waitResponse(),yield this.init()}))}get isFetching(){return this.querySecretContractCodeHash.getQueryContract(this.contractAddress).isFetching||null==this.keplr||this._isIniting||super.isFetching}canFetch(){return!!this.querySecretContractCodeHash.getQueryContract(this.contractAddress).response&&0!==this.contractAddress.length&&null!=this.nonce}*initKeplr(){this.keplr=yield*(0,o.toGenerator)(this.apiGetter())}*init(){if(this._isIniting=!0,this.keplr&&this.contractCodeHash){const e=this.keplr.getEnigmaUtils(this.chainId),t=yield*(0,o.toGenerator)(e.encrypt(this.contractCodeHash,this.obj));this.nonce=t.slice(0,32);const n=c.Buffer.from(t).toString("base64");this.setUrl(this.getSecretWasmUrl(this.contractAddress,n))}this._isIniting=!1}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});var n,r;return i(this,void 0,void 0,(function*(){let i,s;try{const n=yield t.fetchResponse.call(this,e);i=n.data,s=n.headers}catch(e){if(null===(r=null===(n=e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.error){const t=e.response.data.error,n=/rpc error: code = (.+) = encrypted: (.+): (.+)/g.exec(t);if(null!=n&&4===n.length){const e=n[2],t=c.Buffer.from(e,"base64");if(this.keplr&&this.nonce){const e=yield this.keplr.getEnigmaUtils(this.chainId).decrypt(t,this.nonce),n=c.Buffer.from(e).toString();throw new Error(n)}}}throw e}const o=i;if(!this.keplr)throw new Error("Keplr API not initialized");if(!this.nonce)throw new Error("Nonce is unknown");if(!o)throw new Error("Failed to get the response from the contract");const a=yield this.keplr.getEnigmaUtils(this.chainId).decrypt(c.Buffer.from(o.data,"base64"),this.nonce),u=c.Buffer.from(c.Buffer.from(a).toString(),"base64").toString();return{headers:s,data:JSON.parse(u)}}))}getSecretWasmUrl(e,t){return`/compute/v1beta1/query/${e}?${new URLSearchParams({query:t}).toString()}`}getCacheKey(){return(0,u.makeURL)(this.baseURL,this.getSecretWasmUrl(this.contractAddress,JSON.stringify(this.obj)))}get contractCodeHash(){const e=this.querySecretContractCodeHash.getQueryContract(this.contractAddress);if(e.response)return e.response.data.code_hash}}r([a.observable.ref],d.prototype,"keplr",void 0),r([a.observable],d.prototype,"_isIniting",void 0),r([a.flow],d.prototype,"initKeplr",null),r([a.flow],d.prototype,"init",null),r([a.computed],d.prototype,"contractCodeHash",null),t.ObservableSecretContractChainQuery=d},81334:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WrongViewingKeyError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}t.WrongViewingKeyError=n},64585:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SecretWasm=void 0,s(n(79468),t),s(n(63517),t),s(n(81334),t),t.SecretWasm=o(n(11077)),s(n(57523),t)},57523:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SecretQueriesImpl=t.SecretQueries=void 0;const r=n(79468),i=n(35832),s=n(63517);t.SecretQueries={use:e=>(t,n,r,i)=>({secret:new o(t,n,r,i,e.apiGetter)})};class o{constructor(e,t,n,o,a){this.querySecretContractCodeHash=new r.ObservableQuerySecretContractCodeHash(t,n,o),e.queryBalances.addBalanceRegistry(new s.ObservableQuerySecret20BalanceRegistry(t,a,this.querySecretContractCodeHash)),this.querySecret20ContractInfo=new i.ObservableQuerySecret20ContractInfo(t,n,o,a,this.querySecretContractCodeHash)}}t.SecretQueriesImpl=o},63517:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySecret20BalanceRegistry=t.ObservableQuerySecret20BalanceImpl=void 0;const s=n(80075),o=n(89642),a=n(19731),c=n(87274),u=n(81334);class d extends c.ObservableSecretContractChainQuery{constructor(e,t,n,r,i,o,a){if("secret20"!==i.type)throw new Error(`Denom helper must be secret20: ${i.denom}`);const c=n.getChain(t).forceFindCurrency(i.denom);let u="";"type"in c&&"secret20"===c.type&&(u=c.viewingKey),super(e,t,n,r,i.contractAddress,{balance:{address:o,key:u}},a),this.denomHelper=i,this.bech32Address=o,this.viewingKey=u,(0,s.makeObservable)(this),u||this.setError({status:0,statusText:"Viewing key is empty",message:"Viewing key is empty"})}canFetch(){return super.canFetch()&&""!==this.bech32Address&&""!==this.viewingKey}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});var n;return i(this,void 0,void 0,(function*(){const{data:r,headers:i}=yield t.fetchResponse.call(this,e);if(r.viewing_key_error)throw new u.WrongViewingKeyError(null===(n=r.viewing_key_error)||void 0===n?void 0:n.msg);return{headers:i,data:r}}))}get balance(){const e=this.denomHelper.denom,t=this.chainGetter.getChain(this.chainId).findCurrency(e);if(!t)throw new Error(`Unknown currency: ${e}`);return this.response&&this.response.data.balance?new a.CoinPretty(t,new a.Int(this.response.data.balance.amount)):new a.CoinPretty(t,new a.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}}r([s.computed],d.prototype,"balance",null),r([s.computed],d.prototype,"currency",null),t.ObservableQuerySecret20BalanceImpl=d,t.ObservableQuerySecret20BalanceRegistry=class{constructor(e,t,n){this.sharedContext=e,this.apiGetter=t,this.querySecretContractCodeHash=n}getBalanceImpl(e,t,n,r){const i=new o.DenomHelper(r);if("secret20"===i.type)return new d(this.sharedContext,e,t,this.apiGetter,i,n,this.querySecretContractCodeHash)}}},35832:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySecret20ContractInfo=t.ObservableQuerySecret20ContactInfoInner=void 0;const i=n(27932),s=n(80075),o=n(87274);class a extends o.ObservableSecretContractChainQuery{constructor(e,t,n,r,i,o){super(e,t,n,r,i,{token_info:{}},o),(0,s.makeObservable)(this)}get error(){return super.error||this.querySecretContractCodeHash.getQueryContract(this.contractAddress).error}get tokenInfo(){if(this.response)return this.response.data.token_info}}r([s.computed],a.prototype,"tokenInfo",null),t.ObservableQuerySecret20ContactInfoInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n,r,i){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,this.apiGetter,e,i))),this.apiGetter=r,this.querySecretContractCodeHash=i}getQueryContract(e){return this.get(e)}}t.ObservableQuerySecret20ContractInfo=c},11077:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},14532:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableSimpleQuery=t.ObservableSimpleQueryImpl=void 0;const r=n(5136);class i extends r.ObservableQuery{constructor(e,t,n){super(e,t,n)}}t.ObservableSimpleQueryImpl=i;class s extends r.ObservableQueryMap{constructor(e){super((t=>{const{baseURL:n,url:r}=JSON.parse(t);return new i(e,n,r||"")})),this.sharedContext=e}queryGet(e,t){return this.get(JSON.stringify({baseURL:(n=e,n.length>0&&"/"===n[n.length-1]?n.slice(0,n.length-1):n),url:null!=t?o(t):void 0}));var n}}function o(e){return e.length>0&&"/"===e[0]?e.slice(1):e}t.ObservableSimpleQuery=s},9499:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenFactoryCurrencyRegistrar=void 0;const s=n(89642),o=n(80075);class a{constructor(e,t=864e5,n,r,i,s){this.kvStore=e,this.cacheDuration=t,this.baseURL=n,this.uri=r,this.chainStore=i,this.queriesStore=s,this._isInitialized=!1,this.cache=new Map,this.chainStore.registerCurrencyRegistrar(this.currencyRegistrar.bind(this)),(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cache-token-factory-registrar",t=yield this.kvStore.get(e);t&&(0,o.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.cache.set(e,n)})),(0,o.autorun)((()=>{const t=(0,o.toJS)(this.cache),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}currencyRegistrar(e,t){if(!this.baseURL)return;if(!this.chainStore.hasChain(e))return;const n=new s.DenomHelper(t);if("native"!==n.type||!n.denom.startsWith("factory/"))return;const r=this.cache.get(t);if(r){if(Date.now()-r.timestamp<this.cacheDuration)return{value:Object.assign(Object.assign({},r.currency),{coinMinimalDenom:n.denom}),done:!0};(0,o.runInAction)((()=>{this.cache.delete(t)}))}const i=this.queriesStore.simpleQuery.queryGet(this.baseURL,this.uri.replace("{chainId}",e).replace("{denom}",encodeURIComponent(t)));return i.response?i.response.data.coinMinimalDenom!==t?{value:void 0,done:!0}:(i.isFetching||(0,o.runInAction)((()=>{i.response&&this.cache.set(t,{currency:i.response.data,timestamp:Date.now()})})),{value:Object.assign(Object.assign({},i.response.data),{coinMinimalDenom:n.denom}),done:!i.isFetching}):i.isFetching?{value:void 0,done:!1}:{value:void 0,done:!0}}}r([o.observable],a.prototype,"_isInitialized",void 0),r([o.observable.shallow],a.prototype,"cache",void 0),t.TokenFactoryCurrencyRegistrar=a},32262:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9499),t)}}]);