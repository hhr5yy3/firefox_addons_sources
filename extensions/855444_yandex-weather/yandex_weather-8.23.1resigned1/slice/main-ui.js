require(["slice/adapter/main"],function(){require(["slice/ui/main/main","browser-adapter","api/manager"],function(a,b,c){c.onReady(function(){b.initSliceShowEvent()})})}),define("main-ui",function(){}),define("slice/ui/dayparts/dayparts",["browser-adapter","api/manager","api/xml"],function(a,b,c){function d(a){this._parent=a,this._temp=a.querySelector(".b-daypart__temp"),this._name=a.querySelector(".b-daypart__name"),this._img=a.querySelector(".b-daypart__image")}d.prototype.show=function(b){b&&(c.setText(this._temp,b.temperature),c.setText(this._name,a.getString("dp."+b.type)),this._parent.style.backgroundColor=b.bgcolor,this._img.style.backgroundImage="url('images/parts/"+b.img+".png')"),this._parent.setAttribute("data-hasvalue",!!b)};var e={init:function(){this._parent=document.querySelector(".b-dayparts"),this._parts=[].map.call(this._parent.querySelectorAll(".b-daypart"),function(a){return new d(a)})},observers:{"slice:data":function(a,b){this._parts.forEach(function(a,c){a.show(b.period[c])}),this._parent.setAttribute("data-count",b.period.length)}}};return b.onReady(e),e}),define("slice/ui/footer/footer",["browser-adapter","api/manager","api/stat","api/utils","api/xml"],function(a,b,c,d,e){var f={init:function(){var b=this._link=document.querySelector(".b-footer__link");e.setText(this._link,a.getString("url.title")),this._link.onclick=function(a){return c.logWidget("slice.link"),d.navigate(b.href,a||window.event),!1}},observers:{"slice:data":function(a,b){this._link.href=b.url}}};return b.onReady(f),f}),define("slice/ui/error-view/error",["browser-adapter","api/manager"],function(a,b){var c={init:function(){this._text=document.querySelector(".b-error-view")},observers:{"weather:error":function(b,c){this._text.innerHTML=a.getString("error."+c.type).replace("##","<br />")}}};return b.onReady(c),c}),function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define("jade",["browser-adapter"],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.jade=a()}}(function(a){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c||a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){"use strict";function e(a){return null!=a&&""!==a}function f(a){return Array.isArray(a)?a.map(f).filter(e).join(" "):a}d.i18n=function(b){return a&&a.getString?a.getString(b):""},d.merge=function a(b,c){if(1===arguments.length){for(var d=b[0],f=1;f<b.length;f++)d=a(d,b[f]);return d}var g=b.class,h=c.class;(g||h)&&(g=g||[],h=h||[],Array.isArray(g)||(g=[g]),Array.isArray(h)||(h=[h]),b.class=g.concat(h).filter(e));for(var i in c)"class"!=i&&(b[i]=c[i]);return b},d.joinClasses=f,d.cls=function(a,b){for(var c=[],e=0;e<a.length;e++)b&&b[e]?c.push(d.escape(f([a[e]]))):c.push(f(a[e]));var g=f(c);return g.length?' class="'+g+'"':""},d.attr=function(a,b,c,e){return"boolean"==typeof b||null==b?b?" "+(e?a:a+'="'+a+'"'):"":0==a.indexOf("data")&&"string"!=typeof b?" "+a+"='"+JSON.stringify(b).replace(/'/g,"&apos;")+"'":c?" "+a+'="'+d.escape(b)+'"':" "+a+'="'+b+'"'},d.attrs=function(a,b){var c=[],e=Object.keys(a);if(e.length)for(var g=0;g<e.length;++g){var h=e[g],i=a[h];"class"==h?(i=f(i))&&c.push(" "+h+'="'+i+'"'):c.push(d.attr(h,i,!1,b))}return c.join("")},d.escape=function(a){var b=String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return b===""+a?a:b},d.rethrow=function a(c,d,e,f){if(!(c instanceof Error))throw c;if(!("undefined"==typeof window&&d||f))throw c.message+=" on line "+e,c;try{f=f||b("fs").readFileSync(d,"utf8")}catch(b){a(c,null,e)}var g=3,h=f.split("\n"),i=Math.max(e-g,0),j=Math.min(h.length,e+g),g=h.slice(i,j).map(function(a,b){var c=b+i+1;return(c==e?"  > ":"    ")+c+"| "+a}).join("\n");throw c.path=d,c.message=(d||"Jade")+":"+e+"\n"+g+"\n\n"+c.message,c}},{fs:2}],2:[function(a,b,c){},{}]},{},[1])(1)}),define("slice/templates",["jade"],function(jade){return jade&&void 0!==jade.runtime&&(jade=jade.runtime),this.JTEMPLATES=this.JTEMPLATES||{},this.JTEMPLATES.daypart=function anonymous(locals){var buf=[];with(locals||{})buf.push('<div class="b-daypart"><div class="b-daypart__image"></div><span class="b-daypart__deg b-daypart__deghide">&deg;</span><span class="b-daypart__temp"></span><span class="b-daypart__deg">&deg;</span><div class="b-daypart__name"></div></div>');return buf.join("")},this.JTEMPLATES.error=function anonymous(locals){var buf=[];with(locals||{})buf.push('<div class="b-error-view"></div>');return buf.join("")},this.JTEMPLATES.now=function anonymous(locals){var buf=[];with(locals||{})buf.push('<div class="b-title"></div><div class="b-description b-fact"><span class="b-description__text"></span><span class="b-description__image"></span></div><div class="b-fact"><span class="b-dampness__name">'+(null==(jade.interp=jade.i18n("dampness"))?"":jade.interp)+'</span><span class="b-dampness__value"></span></div><div class="b-fact"><span class="b-wind__name">'+(null==(jade.interp=jade.i18n("wind"))?"":jade.interp)+'</span><span class="b-wind__value"></span></div><div class="b-fact"><span class="b-pressure__name">'+(null==(jade.interp=jade.i18n("pressure"))?"":jade.interp)+'</span><span class="b-pressure__value"></span></div>');return buf.join("")},this.JTEMPLATES}),define("slice/ui/now/now",["browser-adapter","api/manager","api/xml","slice/templates"],function(a,b,c,d){function e(a){return a?a.charAt(0).toUpperCase()+a.substr(1):""}var f={init:function(){var a=document.querySelector(".b-now");a.innerHTML=d.now(),this._title=a.querySelector(".b-title"),this._descr=a.querySelector(".b-description"),this._descrText=this._descr.querySelector(".b-description__text"),this._descrImg=this._descr.querySelector(".b-description__image"),this._wind=a.querySelector(".b-wind__value"),this._dampness=a.querySelector(".b-dampness__value"),this._pressure=a.querySelector(".b-pressure__value")},observers:{"slice:data":function(b,d){c.setText(this._title,d.title+", "+d.now.temperature+String.fromCharCode(176)),c.setText(this._descrText,e(d.now.description)),this._descrImg.style.backgroundImage="url('images/now/"+d.now.img+".png')",c.setText(this._wind,d.now.windSpeed+" "+a.getString("wind.ms")),c.setText(this._dampness,d.now.dampness+"%"),c.setText(this._pressure,d.now.pressure+" "+a.getString("pressure."+d.pressureUnit)),this._wind.style.backgroundPosition="1px "+(9-(this._windDirMap[d.now.windDir]||5))+"px"}},_windDirMap:{sw:5,nw:21,ne:37,se:52,s:69,w:85,n:101,e:117}};return b.onReady(f),f}),define("slice/ui/main/main",["browser-adapter","api/manager","slice/ui/dayparts/dayparts","slice/ui/footer/footer","slice/ui/error-view/error","slice/ui/now/now"],function(a,b){var c={init:function(){this._parent=document.querySelector(".b-weather-widget"),a.sendMessage("slice:request");var b=this._resize.bind(this);this._resize=function(){setTimeout(b,20)},this._resize()},observers:{"slice:data":function(){this._parent.setAttribute("data-state","loaded"),this._resize()},"weather:loading":function(a,b){b.sender&&"options"!=b.sender||(this._parent.setAttribute("data-state","loading"),this._resize())},"weather:error":function(){this._parent.setAttribute("data-state","error"),this._resize()}},_resize:function(){var b=this._parent.offsetHeight;a.log("***** H = "+b),a.resizeWindowTo(320,b)}};b.onReady(c)});