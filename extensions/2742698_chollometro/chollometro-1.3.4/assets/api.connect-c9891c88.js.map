{"version":3,"file":"api.connect-c9891c88.js","sources":["../../src/ui/utils/api/api.connect.ts"],"sourcesContent":["import { APIHandler } from '.';\nimport logger from '../logger';\n\nconst modules = import.meta.glob('~F/**/*.api.ts');\nlogger.log(modules, 'modules');\n\nfor (const filename of Object.keys(modules)) {\n    modules[filename]()\n        .then((apiHandler) => {\n            logger.log(apiHandler, 'module result on connect');\n            const moduleKeys = Object.keys(apiHandler);\n            //todo replace this check by something  more representative. execution halt is module export more than one item.\n            if (moduleKeys.length === 1) {\n                const moduleKey = moduleKeys[0];\n                return connectAPIHandler(apiHandler[moduleKey]);\n            }\n            throw new Error();\n        })\n        .catch((e) => {\n            const error = `${filename}: Exported key is not an APIHandler`;\n\n            logger.error(error, e);\n        });\n}\n\nfunction connectAPIHandler(apiHandler: APIHandler<any, any>) {\n    apiHandler.connect();\n}\n"],"names":[],"mappings":"AAGA,MAAM;AAGN,WAAW,YAAY,OAAO,KAAK,OAAO,GAAG;AACzC,UAAQ,QAAQ,EAAA,EACX,KAAK,CAAC,eAAe;AAEZ,UAAA,aAAa,OAAO,KAAK,UAAU;AAErC,QAAA,WAAW,WAAW,GAAG;AACnB,YAAA,YAAY,WAAW,CAAC;AACvB,aAAA,kBAAkB,WAAW,SAAS,CAAC;AAAA,IAClD;AACA,UAAM,IAAI,MAAM;AAAA,EAAA,CACnB,EACA,MAAM,CAAC,MAAM;AAAA,EAGW,CACxB;AACT;AAEA,SAAS,kBAAkB,YAAkC;AACzD,aAAW,QAAQ;AACvB;"}