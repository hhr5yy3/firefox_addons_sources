!function(){"use strict";const e=chrome.action||chrome.browserAction;let n=null;const o=()=>{n&&chrome.runtime.onInstalled.removeListener(n)},r=(()=>{let e=[];const n={register:n=>{e.push(n)},unregister:n=>{e=e.filter((e=>e!==n))},notify:n=>{e.forEach((e=>e(n)))}};return Object.freeze(n)})();chrome.storage.sync.onChanged.addListener((()=>r.notify("sync"))),chrome.storage.local.onChanged.addListener((()=>r.notify("local")));var t,s;t=async n=>{const o=chrome.runtime.getManifest().version,{version:r}=await new Promise((e=>{chrome.storage.local.get(null,(n=>e(n)))}));var t,s;r&&r<"3.0.0"&&(t={apiKey:null,email:null,token:null},new Promise((e=>chrome.storage.sync.set(t,e)))),await(async e=>new Promise((n=>chrome.storage.local.set(e,n))))({version:o}),"install"===n.reason&&(e.setBadgeBackgroundColor({color:[250,0,64,127]}),e.setBadgeText({text:"New"}),s={url:"https://usersnap.com/chrome/welcome"},new Promise((e=>{chrome.tabs.create(s,(n=>e(n)))})))},o(),chrome.runtime.onInstalled.addListener(t),n=t,s="https://usersnap.com/s/chrome-uninstall",chrome.runtime.setUninstallURL(s)}();