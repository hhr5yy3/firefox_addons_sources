const ClassWorkerContentScript=function(e,t,n){"use strict";let o=null,r=!1,s=0,a=[],i=[],c=[],l=[],u=0;const d=new Set(["https://www.elster.de"]);let g="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTVweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMTUgMTUiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7ZmlsbDpyZ2IoNTkuNjA3ODQzJSw4NS40OTAxOTYlLDY4LjYyNzQ1MSUpO2ZpbGwtb3BhY2l0eTowLjUwMTk2MTsiIGQ9Ik0gMC42OTUzMTIgMy43ODkwNjIgTCAzLjE3NTc4MSA1LjE3OTY4OCBMIDcuNTY2NDA2IDIuNzM0Mzc1IEwgMTEuOTE0MDYyIDUuMTYwMTU2IEwgMTQuMzc4OTA2IDMuODA4NTk0IEwgNy41ODU5MzggMC4wNDY4NzUgWiBNIDAuNjk1MzEyIDMuNzg5MDYyICIvPgo8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpldmVub2RkO2ZpbGw6cmdiKDU5LjYwNzg0MyUsODUuNDkwMTk2JSw2OC42Mjc0NTElKTtmaWxsLW9wYWNpdHk6MC41MDE5NjE7IiBkPSJNIDUuMTYwMTU2IDUuODY3MTg4IEwgNy41NzAzMTIgNy4yMTg3NSBMIDkuOTIxODc1IDUuOTUzMTI1IEwgNy41NjY0MDYgNC42NTIzNDQgWiBNIDUuMTYwMTU2IDUuODY3MTg4ICIvPgo8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpldmVub2RkO2ZpbGw6cmdiKDI5LjAxOTYwOCUsNzUuMjk0MTE4JSw1Ni4wNzg0MzElKTtmaWxsLW9wYWNpdHk6MC41MDE5NjE7IiBkPSJNIDAuNjk1MzEyIDMuNzczNDM4IEwgMC42OTUzMTIgMTEuMjEwOTM4IEwgMy4xNzU3ODEgMTIuNTMxMjUgTCAzLjE5NTMxMiA1LjE3OTY4OCBaIE0gMC42OTUzMTIgMy43NzM0MzggIi8+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7ZmlsbDpyZ2IoMjkuMDE5NjA4JSw3NS4yOTQxMTglLDU2LjA3ODQzMSUpO2ZpbGwtb3BhY2l0eTowLjUwMTk2MTsiIGQ9Ik0gNS4xNzU3ODEgNS44NjcxODggTCA1LjE1NjI1IDguMzA4NTk0IEwgNy41NjY0MDYgOS41OTM3NSBMIDkuOTM3NSA4LjI3NzM0NCBMIDkuOTM3NSA1Ljk5MjE4OCBMIDcuNTg1OTM4IDcuMjM4MjgxIFogTSA1LjE3NTc4MSA1Ljg2NzE4OCAiLz4KPHBhdGggc3R5bGU9IiBzdHJva2U6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtmaWxsOnJnYigyOS4wMTk2MDglLDc1LjI5NDExOCUsNTYuMDc4NDMxJSk7ZmlsbC1vcGFjaXR5OjAuNTAxOTYxOyIgZD0iTSAxMS44OTg0MzggNS4xNzk2ODggTCAxMS45MTQwNjIgOS4xMTcxODggTCA3LjU2NjQwNiAxMS40ODgyODEgTCA1LjE3NTc4MSAxMC4yNDIxODggTCA1LjE3NTc4MSAxMy42MzI4MTIgTCA3LjU0Njg3NSAxNC45NTMxMjUgTCAxNC40MTc5NjkgMTEuMjA3MDMxIEwgMTQuMzc4OTA2IDMuODM5ODQ0IFogTSAxMS44OTg0MzggNS4xNzk2ODggIi8+CjwvZz4KPC9zdmc+Cg==",p="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTVweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMTUgMTUiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7ZmlsbDpyZ2IoNTkuNjA3ODQzJSw4NS40OTAxOTYlLDY4LjYyNzQ1MSUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAwLjY5NTMxMiAzLjc4OTA2MiBMIDMuMTc1NzgxIDUuMTc5Njg4IEwgNy41NjY0MDYgMi43MzQzNzUgTCAxMS45MTQwNjIgNS4xNjAxNTYgTCAxNC4zNzg5MDYgMy44MDg1OTQgTCA3LjU4NTkzOCAwLjA0Njg3NSBaIE0gMC42OTUzMTIgMy43ODkwNjIgIi8+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7ZmlsbDpyZ2IoNTkuNjA3ODQzJSw4NS40OTAxOTYlLDY4LjYyNzQ1MSUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA1LjE2MDE1NiA1Ljg2NzE4OCBMIDcuNTcwMzEyIDcuMjE4NzUgTCA5LjkyMTg3NSA1Ljk1MzEyNSBMIDcuNTY2NDA2IDQuNjUyMzQ0IFogTSA1LjE2MDE1NiA1Ljg2NzE4OCAiLz4KPHBhdGggc3R5bGU9IiBzdHJva2U6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtmaWxsOnJnYigyOS4wMTk2MDglLDc1LjI5NDExOCUsNTYuMDc4NDMxJSk7ZmlsbC1vcGFjaXR5OjE7IiBkPSJNIDAuNjk1MzEyIDMuNzczNDM4IEwgMC42OTUzMTIgMTEuMjEwOTM4IEwgMy4xNzU3ODEgMTIuNTMxMjUgTCAzLjE5NTMxMiA1LjE3OTY4OCBaIE0gMC42OTUzMTIgMy43NzM0MzggIi8+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7ZmlsbDpyZ2IoMjkuMDE5NjA4JSw3NS4yOTQxMTglLDU2LjA3ODQzMSUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA1LjE3NTc4MSA1Ljg2NzE4OCBMIDUuMTU2MjUgOC4zMDg1OTQgTCA3LjU2NjQwNiA5LjU5Mzc1IEwgOS45Mzc1IDguMjc3MzQ0IEwgOS45Mzc1IDUuOTkyMTg4IEwgNy41ODU5MzggNy4yMzgyODEgWiBNIDUuMTc1NzgxIDUuODY3MTg4ICIvPgo8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpldmVub2RkO2ZpbGw6cmdiKDI5LjAxOTYwOCUsNzUuMjk0MTE4JSw1Ni4wNzg0MzElKTtmaWxsLW9wYWNpdHk6MTsiIGQ9Ik0gMTEuODk4NDM4IDUuMTc5Njg4IEwgMTEuOTE0MDYyIDkuMTE3MTg4IEwgNy41NjY0MDYgMTEuNDg4MjgxIEwgNS4xNzU3ODEgMTAuMjQyMTg4IEwgNS4xNzU3ODEgMTMuNjMyODEyIEwgNy41NDY4NzUgMTQuOTUzMTI1IEwgMTQuNDE3OTY5IDExLjIwNzAzMSBMIDE0LjM3ODkwNiAzLjgzOTg0NCBaIE0gMTEuODk4NDM4IDUuMTc5Njg4ICIvPgo8L2c+Cjwvc3ZnPgo=";const m=new Set(["change","change password","continue","log in","save","save password","submit","sign in","go","login","update password","next","cambiar contraseña","passwort ändern","changer le mot de passe","cambia password","mudar senha","wachtwoord wijzigen","enviar","einreichen","soumettre","inviare","enviar","indienen","siguiente","nächster","suivant","prossimo","próximo","volgende","continuar","fortsetzen","continuer","continuare","continuar","doorgaan","iniciar sesión","einloggen","se connecter","accedere","entrar","inloggen","guardar contraseña","passwort speichern","sauvegarder le mot de passe","salva password","salvar senha","wachtwoord opslaan","inicio de sesión","Login","connexion","login","login","login","registrarse","anmelden","s'inscrire","registrarsi","inscrever-se","aanmelden","ir","gehen","aller","andare","ir","gaan","actualizar contraseña","passwort aktualisieren","mettre à jour le mot de passe","aggiorna password","atualizar senha","wachtwoord bijwerken","guardar","speichern","sauvegarder","salvare","salvar","opslaan","cambiar","ändern","changer","cambiare","mudar","wijzigen"]),M=new Set(["cc-name"]),w=new Set(["cc-number"]),N=new Set(["cc-csc"]),T=new Set(["cc-exp"]),y=new Set(["cc-exp-month"]),I=new Set(["cc-exp-year"]),O=new Set([...M,...w,...N,...T,...y,...I]),h=new Set(["username","email"]),f=new Set(["new-password"]),D=new Set(["current-password"]),b=new Set(["one-time-code"]),E=new Set([...h,...f,...D,...b]);function j(t){d.has(t.defaultView.location.origin)||(function(t){let n;const o=v(t,"input[type='text'], input:not([type]), input[type='email'], input[type='password']");for(let r=0;r<o.length;++r){if("password"!==o[r].type)continue;if(o[r].classList.contains("psono-addPasswordFormButtons-covered"))continue;o[r].classList.add("psono-addPasswordFormButtons-covered");let s={username:null,password:null,form:null};for(let a=r-1;a>-1;a--)if("password"!==o[a].type&&"none"!==o[a].style.display&&!(o[r].hasOwnProperty("checkVisibility")&&o[r].checkVisibility()&&o[a].offsetWidth<90)){n=window.getComputedStyle(o[a]).getPropertyValue("padding-right"),e.modifyInputField(o[a],g,"center right "+n,t,Y,x,k,A),s.username=o[a];break}(!o[r].hasOwnProperty("checkVisibility")||!o[r].checkVisibility()||o[r].offsetWidth>=90)&&(n=window.getComputedStyle(o[r]).getPropertyValue("padding-right"),e.modifyInputField(o[r],g,"center right "+n,t,Y,x,k,A)),s.password=o[r];let a=o[r].parentElement;for(;"FORM"!==a.nodeName&&a.parentNode;)a=a.parentNode;"FORM"===a.nodeName&&(s.form=a),null===s.username&&null===s.password||i.push(s)}}(t),function(e){const t=v(e,"input");for(let e=0;e<t.length;++e)t[e].classList.contains("psono-findCreditCardInputFields-covered")||O.has(t[e].autocomplete.trim().toLowerCase())&&(t[e].classList.add("psono-findCreditCardInputFields-covered"),c.push(t[e]))}(t),function(e){const t=v(e,"input");for(let e=0;e<t.length;++e)t[e].classList.contains("psono-findIdentityInputFields-covered")||E.has(t[e].autocomplete.trim().toLowerCase())&&(t[e].classList.add("psono-findIdentityInputFields-covered"),l.push(t[e]))}(t),function(e){for(let t=0;t<e.forms.length;t++)C(e.forms[t])}(t))}function z(e){const t=document.createElement("div");return t.innerText=e,t.innerHTML}function C(t){if(1!==v(t,"input[type='password']").length)return;if(t.classList.contains("psono-formSubmitCatcher-covered"))return;t.classList.add("psono-formSubmitCatcher-covered");const n=function(t){let n;n="click"===t.type?t.target.closest("form"):this,n&&L(n)&&e.emit("login-form-submit",L(n))};t.addEventListener("submit",n);let o=v(t,"button[type='submit'], input[type='submit'], input[type='image']");if(o.length<1){const e=v(t,"button[type='button'], input[type='button'], input[type='image'], button:not([type]), a, span");o=[];for(let t=0;t<e.length;t++){let n="input"===e[t].tagName.toLowerCase()?e[t].value:e[t].innerText;m.has(n.toLowerCase().trim())&&o.append(e[t])}}else for(let e=0;e<o.length;e++)o[0].addEventListener("click",n,!1)}function L(e){let t=v(e,"input[type='text'], input[type='email'], input[type='password']"),n="",o="";for(let e=0;e<t.length;e++)if(""!==t[e].type&&"none"!==t[e].style.display){if("password"===t[e].type){o=t[e].value;break}n=t[e].value}if(""!==n&&""!==o)return{username:n,password:o}}function v(e,t){let n=[];return n=n.concat(Array.from(e.querySelectorAll(t))),e.querySelectorAll("*").forEach((e=>{e.shadowRoot&&(n=n.concat(v(e.shadowRoot,t)))})),n}function S(e,t){return t.offsetWidth-e.pageX+t.getBoundingClientRect().left+(document.documentElement.scrollLeft||document.body.scrollLeft)}function x(e,t){e.target.style.setProperty("background-image",'url("'+p+'")',"important")}function k(e,t){e.target.style.setProperty("background-image",'url("'+g+'")',"important")}function A(e,t){S(e,t)<30?e.target.style.setProperty("cursor","pointer","important"):e.target.style.setProperty("cursor","auto","important")}function U(t){e.emit("request-secret",{url:document.location.toString(),secret_id:t})}function Z(){let e="";for(let t=0;t<i.length;t++)if(i[t].username&&i[t].username.value){e=i[t].username.value;break}return e}function _(){e.emit("generate-password",{url:document.location.toString(),username:Z()})}async function Y(t,r,s,i){r.hasOwnProperty("checkVisibility")&&!r.checkVisibility()||S(t,r)>=30||e.emit("website-password-refresh",s.location.toString(),(async r=>{let c="psono_open-datastore-"+uuid.v4(),l="psono_generate-password-"+uuid.v4(),d=[],g="";if(g+='<div class="psono-drop-content-inner">',g+='<ul class="navigations">',await new Promise((function(t){e.emit("is-logged-in",void 0,(e=>{t(e)}))}))){g+='<li><div class="'+c+'" style="cursor: pointer !important;">Open Datastore</div></li>',r.data.length<1&&(g+='<li><div class="'+l+'" style="cursor: pointer !important;">Generate Password</div></li>'),r.data.length>5&&(g+='<li><input type="text" class="psono-search-input" placeholder="Search..." /></li>');for(let e=0;e<r.data.length;e++){let t=z(r.data[e].name),n="psono_request-secret-"+uuid.v4(),o="";e>=5&&(o="display:none !important"),g+='<li class="psono_request-secret" style="'+o+'"><div class="'+n+'" style="cursor: pointer !important;"">'+t+"</div></li>",d.push({class:n,secret_id:r.data[e].secret_id})}}else g+='<li><div class="'+c+'" style="cursor: pointer !important;">Login</div></li>';g+="</ul>",g+="</div>",o=i;let p=function(e,t,n){let o=function(e){if(e.getClientRects().length<1)return{top:0,left:0};let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}}(e.target),r=e.target.offsetHeight,s="psono_drop-"+uuid.v4(),a=n.createElement("div");function i(){n.body.appendChild(a)}function c(){a.remove(),u=(new Date).getTime()}function l(){return n.getElementById(s)}return a.id=s,a.className="psono-drop yui3-cssreset",a.setAttribute("style",`transform: translateX(${o.left}px) translateY(${o.top+r}px) translateZ(0px) !important`),a.innerHTML='<div class="psono-drop-content">'+t+"</div>",n.onclick=function(t){if(t.target!==e.target){let e=n.getElementsByClassName("psono-drop");for(let t=e.length-1;t>=0;t--)e[t].remove();u=(new Date).getTime()}},{open:i,close:c,getElement:l}}(t,g,s);p.open(),a.push(p),n((function(){let t=p.getElement(),n=t.getElementsByClassName(c);for(let t of n)t.addEventListener("click",(function(){e.emit("open-tab",{url:"/data/index.html"})}));let o=t.getElementsByClassName(l);for(let e of o)e.addEventListener("click",(function(){_()}));for(let e=0;e<d.length;e++){let n=d[e].class,o=d[e].secret_id,r=t.getElementsByClassName(n);for(let e of r)e.addEventListener("click",(function(){U(o)}))}if(r.data.length>5){let e=s.querySelector(".psono-search-input"),t=v(s,".psono_request-secret");e.addEventListener("click",(function(e){e.stopPropagation()})),e.addEventListener("keyup",(function(){const n=e.value.toLowerCase().split(" ");let o=0;t.forEach((function(e){!function(e){let t=0;e=e.toLowerCase();for(let o=n.length-1;o>=0;o--)e.indexOf(n[o])>-1&&t++;return t===n.length}(e.textContent.toLowerCase())||o>=5?e.setAttribute("style","display:none !important"):(o+=1,e.setAttribute("style",""))}))}))}}),0)}))}function P(e,t){e&&t&&(e.focus(),["keydown","keypress"].forEach((t=>{e.dispatchEvent(new Event(t,{bubbles:!0,cancelable:!0}))})),e.value=t,["input","keyup","change","blur"].forEach((t=>{e.dispatchEvent(new Event(t,{bubbles:!0,cancelable:!0}))})),e.classList.contains("psono-autofill-style")||(e.classList.add("psono-autofill-style"),n((function(){e&&e.classList.remove("psono-autofill-style")}),100)))}function B(e,t,o){let r,s,a;for(let t=0;t<i.length;t++)if(e.hasOwnProperty("username")&&""!==e.username&&(r=!0,P(i[t].username,e.username)),e.hasOwnProperty("password")&&""!==e.password&&(s=!0,P(i[t].password,e.password)),1===i.length&&null!==i[t].form&&e.hasOwnProperty("submit")&&e.submit&&e.hasOwnProperty("auto_submit")&&e.auto_submit){const e=i[t];n((function(){e.form.submit()}),1e3)}for(let t=0;t<l.length;t++)h.has(l[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("username")&&""!==e.username&&(r=!0,P(l[t],e.username)),f.has(l[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("password")&&""!==e.password&&(s=!0,P(l[t],e.password)),D.has(l[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("password")&&""!==e.password&&(s=!0,P(l[t],e.password)),b.has(l[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("totp_token")&&""!==e.totp_token&&(a=!0,P(l[t],e.totp_token));if(!r){const t=Array.from(v(document,"input"));let n=t.filter((e=>"username"===e.name.toLowerCase()));0===n.length&&(n=t.filter((e=>"email"===e.name.toLowerCase()))),1===n.length&&P(n[0],e.username)}}function W(e,t,n){for(let t=0;t<c.length;t++)M.has(c[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("credit_card_name")&&""!==e.credit_card_name&&P(c[t],e.credit_card_name),w.has(c[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("credit_card_number")&&""!==e.credit_card_number&&P(c[t],e.credit_card_number),N.has(c[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("credit_card_cvc")&&""!==e.credit_card_cvc&&P(c[t],e.credit_card_cvc),T.has(c[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("credit_card_valid_through")&&""!==e.credit_card_valid_through&&P(c[t],e.credit_card_valid_through),y.has(c[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("credit_card_valid_through")&&""!==e.credit_card_valid_through&&P(c[t],e.credit_card_valid_through.slice(0,2)),I.has(c[t].autocomplete.trim().toLowerCase())&&e.hasOwnProperty("credit_card_valid_through")&&""!==e.credit_card_valid_through&&P(c[t],e.credit_card_valid_through.slice(2,4))}function G(e,t,n){for(let t=0;t<i.length;t++)if(i[t].username&&i[t].username.isEqualNode(o)||i[t].password&&i[t].password.isEqualNode(o)||r){P(i[t].username,e.website_password_username),P(i[t].password,e.website_password_password);for(let e=0;e<a.length;e++)a[e].close();if(a=[],!r)break}r=!1}function Q(e,t,n){n({username:Z()})}function V(e,t,n){navigator.clipboard.writeText("")}e.ready((function(){e.on("fillpassword",B),e.on("fillcreditcard",W),e.on("return-secret",G),e.on("get-username",Q),e.on("clear-clipboard-content-script",V),e.ready((function(){e.emit("ready",document.location.toString());let t=[],n=[];e.getAllDocuments(window,t,n),e.registerObserver(j)})),document.onkeyup=function(t){t.ctrlKey&&t.shiftKey&&"KeyL"===t.code&&e.emit("website-password-refresh",document.location.toString(),(async e=>{r=!0,U(e.data[s%e.data.length].secret_id),s+=1}))}}))};