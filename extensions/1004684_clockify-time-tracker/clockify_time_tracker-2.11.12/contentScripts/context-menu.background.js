function listener(e,t){switch(e.menuItemId){case"startTimerWithDescriptionCM":case"startTimerCM":TimeEntry.startTimerWithDescription(e)}}function toggleBrowserContextMenu(e){const t=clockifyLocales.START_TIMER?clockifyLocales.START_TIMER:"Start timer",n=clockifyLocales.START_TIMER_WITH_DESCRIPTION?clockifyLocales.START_TIMER_WITH_DESCRIPTION+" '%s'":"Start timer with description";aBrowser.contextMenus.removeAll(),e&&(aBrowser.contextMenus.create({id:"startTimerWithDescriptionCM",title:n,contexts:["selection"]}),aBrowser.contextMenus.create({id:"startTimerCM",title:t,contexts:["page"]}),aBrowser.contextMenus.onClicked.removeListener(listener),aBrowser.contextMenus.onClicked.addListener(listener))}async function setContextMenuOnBrowserStart(){const e=await localStorage.getItem("appStore");let t=JSON.parse(e).state.contextMenuEnabled;"boolean"!=typeof t&&(t=!0),toggleBrowserContextMenu(t)}aBrowser.runtime.onMessage.addListener(((e,t,n)=>{"contextMenuEnabledToggle"===e.eventName?toggleBrowserContextMenu(e.enabled):"updateContexMenu"===e.eventName&&setContextMenuOnBrowserStart()})),this.setContextMenuOnBrowserStart();