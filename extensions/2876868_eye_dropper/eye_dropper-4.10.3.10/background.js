var background=function(){"use strict";var Ir=Object.defineProperty;var Fr=(X,L,ee)=>L in X?Ir(X,L,{enumerable:!0,configurable:!0,writable:!0,value:ee}):X[L]=ee;var Ie=(X,L,ee)=>Fr(X,typeof L!="symbol"?L+"":L,ee);var Le,Be;function X(e){return e==null||typeof e=="function"?{main:e}:e}var L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ee(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var be={exports:{}};(function(e,r){(function(s,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:L,function(s){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)s.exports=globalThis.browser;else{const n="The message port closed before a response was received.",a=i=>{const A={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(A).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class f extends WeakMap{constructor(l,t=void 0){super(t),this.createItem=l}get(l){return this.has(l)||this.set(l,this.createItem(l)),super.get(l)}}const b=g=>g&&typeof g=="object"&&typeof g.then=="function",d=(g,l)=>(...t)=>{i.runtime.lastError?g.reject(new Error(i.runtime.lastError.message)):l.singleCallbackArg||t.length<=1&&l.singleCallbackArg!==!1?g.resolve(t[0]):g.resolve(t)},p=g=>g==1?"argument":"arguments",S=(g,l)=>function(o,...c){if(c.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${p(l.minArgs)} for ${g}(), got ${c.length}`);if(c.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${p(l.maxArgs)} for ${g}(), got ${c.length}`);return new Promise((x,y)=>{if(l.fallbackToNoCallback)try{o[g](...c,d({resolve:x,reject:y},l))}catch(u){console.warn(`${g} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,u),o[g](...c),l.fallbackToNoCallback=!1,l.noCallback=!0,x()}else l.noCallback?(o[g](...c),x()):o[g](...c,d({resolve:x,reject:y},l))})},w=(g,l,t)=>new Proxy(l,{apply(o,c,x){return t.call(c,g,...x)}});let N=Function.call.bind(Object.prototype.hasOwnProperty);const M=(g,l={},t={})=>{let o=Object.create(null),c={has(y,u){return u in g||u in o},get(y,u,C){if(u in o)return o[u];if(!(u in g))return;let m=g[u];if(typeof m=="function")if(typeof l[u]=="function")m=w(g,g[u],l[u]);else if(N(t,u)){let O=S(u,t[u]);m=w(g,g[u],O)}else m=m.bind(g);else if(typeof m=="object"&&m!==null&&(N(l,u)||N(t,u)))m=M(m,l[u],t[u]);else if(N(t,"*"))m=M(m,l[u],t["*"]);else return Object.defineProperty(o,u,{configurable:!0,enumerable:!0,get(){return g[u]},set(O){g[u]=O}}),m;return o[u]=m,m},set(y,u,C,m){return u in o?o[u]=C:g[u]=C,!0},defineProperty(y,u,C){return Reflect.defineProperty(o,u,C)},deleteProperty(y,u){return Reflect.deleteProperty(o,u)}},x=Object.create(g);return new Proxy(x,c)},j=g=>({addListener(l,t,...o){l.addListener(g.get(t),...o)},hasListener(l,t){return l.hasListener(g.get(t))},removeListener(l,t){l.removeListener(g.get(t))}}),v=new f(g=>typeof g!="function"?g:function(t){const o=M(t,{},{getContent:{minArgs:0,maxArgs:0}});g(o)}),T=new f(g=>typeof g!="function"?g:function(t,o,c){let x=!1,y,u=new Promise(E=>{y=function($){x=!0,E($)}}),C;try{C=g(t,o,y)}catch(E){C=Promise.reject(E)}const m=C!==!0&&b(C);if(C!==!0&&!m&&!x)return!1;const O=E=>{E.then($=>{c($)},$=>{let G;$&&($ instanceof Error||typeof $.message=="string")?G=$.message:G="An unexpected error occurred",c({__mozWebExtensionPolyfillReject__:!0,message:G})}).catch($=>{console.error("Failed to send onMessage rejected reply",$)})};return O(m?C:u),!0}),Y=({reject:g,resolve:l},t)=>{i.runtime.lastError?i.runtime.lastError.message===n?l():g(new Error(i.runtime.lastError.message)):t&&t.__mozWebExtensionPolyfillReject__?g(new Error(t.message)):l(t)},F=(g,l,t,...o)=>{if(o.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${p(l.minArgs)} for ${g}(), got ${o.length}`);if(o.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${p(l.maxArgs)} for ${g}(), got ${o.length}`);return new Promise((c,x)=>{const y=Y.bind(null,{resolve:c,reject:x});o.push(y),t.sendMessage(...o)})},q={devtools:{network:{onRequestFinished:j(v)}},runtime:{onMessage:j(T),onMessageExternal:j(T),sendMessage:F.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:F.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Q={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return A.privacy={network:{"*":Q},services:{"*":Q},websites:{"*":Q}},M(i,q,A)};s.exports=a(chrome)}})})(be);var Fe=be.exports;const P=ee(Fe);var pe={exports:{}};(function(e,r){(function(s,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:L,function(s){var n,a;if(!((a=(n=globalThis.chrome)==null?void 0:n.runtime)!=null&&a.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const i="The message port closed before a response was received.",A=f=>{const b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class d extends WeakMap{constructor(o,c=void 0){super(c),this.createItem=o}get(o){return this.has(o)||this.set(o,this.createItem(o)),super.get(o)}}const p=t=>t&&typeof t=="object"&&typeof t.then=="function",S=(t,o)=>(...c)=>{f.runtime.lastError?t.reject(new Error(f.runtime.lastError.message)):o.singleCallbackArg||c.length<=1&&o.singleCallbackArg!==!1?t.resolve(c[0]):t.resolve(c)},w=t=>t==1?"argument":"arguments",N=(t,o)=>function(x,...y){if(y.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${w(o.minArgs)} for ${t}(), got ${y.length}`);if(y.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${w(o.maxArgs)} for ${t}(), got ${y.length}`);return new Promise((u,C)=>{if(o.fallbackToNoCallback)try{x[t](...y,S({resolve:u,reject:C},o))}catch(m){console.warn(`${t} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),x[t](...y),o.fallbackToNoCallback=!1,o.noCallback=!0,u()}else o.noCallback?(x[t](...y),u()):x[t](...y,S({resolve:u,reject:C},o))})},M=(t,o,c)=>new Proxy(o,{apply(x,y,u){return c.call(y,t,...u)}});let j=Function.call.bind(Object.prototype.hasOwnProperty);const v=(t,o={},c={})=>{let x=Object.create(null),y={has(C,m){return m in t||m in x},get(C,m,O){if(m in x)return x[m];if(!(m in t))return;let E=t[m];if(typeof E=="function")if(typeof o[m]=="function")E=M(t,t[m],o[m]);else if(j(c,m)){let $=N(m,c[m]);E=M(t,t[m],$)}else E=E.bind(t);else if(typeof E=="object"&&E!==null&&(j(o,m)||j(c,m)))E=v(E,o[m],c[m]);else if(j(c,"*"))E=v(E,o[m],c["*"]);else return Object.defineProperty(x,m,{configurable:!0,enumerable:!0,get(){return t[m]},set($){t[m]=$}}),E;return x[m]=E,E},set(C,m,O,E){return m in x?x[m]=O:t[m]=O,!0},defineProperty(C,m,O){return Reflect.defineProperty(x,m,O)},deleteProperty(C,m){return Reflect.deleteProperty(x,m)}},u=Object.create(t);return new Proxy(u,y)},T=t=>({addListener(o,c,...x){o.addListener(t.get(c),...x)},hasListener(o,c){return o.hasListener(t.get(c))},removeListener(o,c){o.removeListener(t.get(c))}}),Y=new d(t=>typeof t!="function"?t:function(c){const x=v(c,{},{getContent:{minArgs:0,maxArgs:0}});t(x)}),F=new d(t=>typeof t!="function"?t:function(c,x,y){let u=!1,C,m=new Promise(G=>{C=function(D){u=!0,G(D)}}),O;try{O=t(c,x,C)}catch(G){O=Promise.reject(G)}const E=O!==!0&&p(O);if(O!==!0&&!E&&!u)return!1;const $=G=>{G.then(D=>{y(D)},D=>{let xe;D&&(D instanceof Error||typeof D.message=="string")?xe=D.message:xe="An unexpected error occurred",y({__mozWebExtensionPolyfillReject__:!0,message:xe})}).catch(D=>{console.error("Failed to send onMessage rejected reply",D)})};return $(E?O:m),!0}),q=({reject:t,resolve:o},c)=>{f.runtime.lastError?f.runtime.lastError.message===i?o():t(new Error(f.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?t(new Error(c.message)):o(c)},Q=(t,o,c,...x)=>{if(x.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${w(o.minArgs)} for ${t}(), got ${x.length}`);if(x.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${w(o.maxArgs)} for ${t}(), got ${x.length}`);return new Promise((y,u)=>{const C=q.bind(null,{resolve:y,reject:u});x.push(C),c.sendMessage(...x)})},g={devtools:{network:{onRequestFinished:T(Y)}},runtime:{onMessage:T(F),onMessageExternal:T(F),sendMessage:Q.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:Q.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},l={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":l},services:{"*":l},websites:{"*":l}},v(f,g,b)};s.exports=A(chrome)}else s.exports=globalThis.browser})})(pe);var De=pe.exports;const W=ee(De);var We=(e,r,s)=>new Promise((n,a)=>{var i=b=>{try{f(s.next(b))}catch(d){a(d)}},A=b=>{try{f(s.throw(b))}catch(d){a(d)}},f=b=>b.done?n(b.value):Promise.resolve(b.value).then(i,A);f((s=s.apply(e,r)).next())});function se(e){const r=i=>We(this,null,function*(){const A=s.map(({key:f,cb:b})=>{if(!(f in i))return;const{newValue:d,oldValue:p}=i[f];if(d!==p)return b(d,p)});yield Promise.all(A)});let s=[];function n(i){s.length===0&&e.onChanged.addListener(r),s.push(i)}function a(i){const A=s.indexOf(i);A>=0&&s.splice(A,1),s.length===0&&W.storage.onChanged.removeListener(r)}return{clear(){return e.clear()},getItem(i){return e.get(i).then(A=>{var f;return(f=A[i])!=null?f:null})},setItem(i,A){return e.set({[i]:A??null})},removeItem(i){return e.remove(i)},onChange(i,A){const f={key:i,cb:A};return n(f),()=>a(f)}}}var ae=se(W.storage.local);se(W.storage.session),se(W.storage.sync),se(W.storage.managed);const re={autoClipboard:!0,autoClipboardType:"hex6",enableColorToolbox:!0,enableColorTooltip:!0,enableRightClickDeactivate:!0,dropperCursor:"default",enablePromoOnUpdate:!0,enableErrorReportingTab:!0},Ue=async e=>await _.getItem(e)??re[e],U=Symbol.for("@ts-pattern/matcher"),Ve=Symbol.for("@ts-pattern/isVariadic"),he="@ts-pattern/anonymous-select-key",ie=e=>!!(e&&typeof e=="object"),te=e=>e&&!!e[U],V=(e,r,s)=>{if(te(e)){const n=e[U](),{matched:a,selections:i}=n.match(r);return a&&i&&Object.keys(i).forEach(A=>s(A,i[A])),a}if(ie(e)){if(!ie(r))return!1;if(Array.isArray(e)){if(!Array.isArray(r))return!1;let n=[],a=[],i=[];for(const A of e.keys()){const f=e[A];te(f)&&f[Ve]?i.push(f):i.length?a.push(f):n.push(f)}if(i.length){if(i.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(r.length<n.length+a.length)return!1;const A=r.slice(0,n.length),f=a.length===0?[]:r.slice(-a.length),b=r.slice(n.length,a.length===0?1/0:-a.length);return n.every((d,p)=>V(d,A[p],s))&&a.every((d,p)=>V(d,f[p],s))&&(i.length===0||V(i[0],b,s))}return e.length===r.length&&e.every((A,f)=>V(A,r[f],s))}return Reflect.ownKeys(e).every(n=>{const a=e[n];return(n in r||te(i=a)&&i[U]().matcherType==="optional")&&V(a,r[n],s);var i})}return Object.is(r,e)},z=e=>{var r,s,n;return ie(e)?te(e)?(r=(s=(n=e[U]()).getSelectionKeys)==null?void 0:s.call(n))!=null?r:[]:Array.isArray(e)?ne(e,z):ne(Object.values(e),z):[]},ne=(e,r)=>e.reduce((s,n)=>s.concat(r(n)),[]);function R(e){return Object.assign(e,{optional:()=>qe(e),and:r=>k(e,r),or:r=>Ge(e,r),select:r=>r===void 0?ye(e):ye(r,e)})}function qe(e){return R({[U]:()=>({match:r=>{let s={};const n=(a,i)=>{s[a]=i};return r===void 0?(z(e).forEach(a=>n(a,void 0)),{matched:!0,selections:s}):{matched:V(e,r,n),selections:s}},getSelectionKeys:()=>z(e),matcherType:"optional"})})}function k(...e){return R({[U]:()=>({match:r=>{let s={};const n=(a,i)=>{s[a]=i};return{matched:e.every(a=>V(a,r,n)),selections:s}},getSelectionKeys:()=>ne(e,z),matcherType:"and"})})}function Ge(...e){return R({[U]:()=>({match:r=>{let s={};const n=(a,i)=>{s[a]=i};return ne(e,z).forEach(a=>n(a,void 0)),{matched:e.some(a=>V(a,r,n)),selections:s}},getSelectionKeys:()=>ne(e,z),matcherType:"or"})})}function h(e){return{[U]:()=>({match:r=>({matched:!!e(r)})})}}function ye(...e){const r=typeof e[0]=="string"?e[0]:void 0,s=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return R({[U]:()=>({match:n=>{let a={[r??he]:n};return{matched:s===void 0||V(s,n,(i,A)=>{a[i]=A}),selections:a}},getSelectionKeys:()=>[r??he].concat(s===void 0?[]:z(s))})})}function B(e){return typeof e=="number"}function K(e){return typeof e=="string"}function H(e){return typeof e=="bigint"}R(h(function(e){return!0}));const Z=e=>Object.assign(R(e),{startsWith:r=>{return Z(k(e,(s=r,h(n=>K(n)&&n.startsWith(s)))));var s},endsWith:r=>{return Z(k(e,(s=r,h(n=>K(n)&&n.endsWith(s)))));var s},minLength:r=>Z(k(e,(s=>h(n=>K(n)&&n.length>=s))(r))),length:r=>Z(k(e,(s=>h(n=>K(n)&&n.length===s))(r))),maxLength:r=>Z(k(e,(s=>h(n=>K(n)&&n.length<=s))(r))),includes:r=>{return Z(k(e,(s=r,h(n=>K(n)&&n.includes(s)))));var s},regex:r=>{return Z(k(e,(s=r,h(n=>K(n)&&!!n.match(s)))));var s}});Z(h(K));const I=e=>Object.assign(R(e),{between:(r,s)=>I(k(e,((n,a)=>h(i=>B(i)&&n<=i&&a>=i))(r,s))),lt:r=>I(k(e,(s=>h(n=>B(n)&&n<s))(r))),gt:r=>I(k(e,(s=>h(n=>B(n)&&n>s))(r))),lte:r=>I(k(e,(s=>h(n=>B(n)&&n<=s))(r))),gte:r=>I(k(e,(s=>h(n=>B(n)&&n>=s))(r))),int:()=>I(k(e,h(r=>B(r)&&Number.isInteger(r)))),finite:()=>I(k(e,h(r=>B(r)&&Number.isFinite(r)))),positive:()=>I(k(e,h(r=>B(r)&&r>0))),negative:()=>I(k(e,h(r=>B(r)&&r<0)))});I(h(B));const J=e=>Object.assign(R(e),{between:(r,s)=>J(k(e,((n,a)=>h(i=>H(i)&&n<=i&&a>=i))(r,s))),lt:r=>J(k(e,(s=>h(n=>H(n)&&n<s))(r))),gt:r=>J(k(e,(s=>h(n=>H(n)&&n>s))(r))),lte:r=>J(k(e,(s=>h(n=>H(n)&&n<=s))(r))),gte:r=>J(k(e,(s=>h(n=>H(n)&&n>=s))(r))),positive:()=>J(k(e,h(r=>H(r)&&r>0))),negative:()=>J(k(e,h(r=>H(r)&&r<0)))});J(h(H)),R(h(function(e){return typeof e=="boolean"})),R(h(function(e){return typeof e=="symbol"})),R(h(function(e){return e==null})),R(h(function(e){return e!=null}));const we=async()=>await _.getItem("p")??0,ze=()=>"#fec76f",Ke=async e=>{_.setItem("p",e);const r=await _.getItem(`p${e}c`);if(r&&r.length>0){const s=r.at(-1);if(s){_.setItem("c",s.h);return}}_.setItem("c",ze())},He=async e=>{ve(e)},ve=async e=>{P.browserAction.setBadgeTextColor({color:e}),await P.browserAction.setBadgeBackgroundColor({color:[0,0,0,0]})},Ze=async(e,r)=>{_.setItem("c",e),He(e);{const s=await we();if(s===void 0)return;const n=await rr(s);if(!n.some(a=>a.h===e)){const a=Ce(e,r);n.push(a),Je(s,n)}}},Je=async(e,r)=>{if(e===0&&!await _.getItem(`p${e}m`)){ge(e,"default",r);return}_.setItem(`p${e}c`,r)},Ye=e=>{e.sort((r,s)=>r-s),e[0]!==0&&e.unshift(0);for(let r=0;r<=e.length;r++)if(e[r]!==r)return r;return-1},Qe=async()=>Ye(await ke()),Xe=async()=>{const e=await P.storage.sync.get();return 1+Object.keys(e).filter(r=>/^p[0-9]+m$/.test(r)).map(r=>e[r].w).reduce((r,s)=>s>r?s:r??0,0)},ge=async(e,r,s,n,a)=>(e===null&&(e=await Qe()),e<0?-1:(await _.getItem(`p${e}c`)||(await _.setItem(`p${e}m`,{i:e,n:r,t:n??Date.now(),s:"m:asc",w:await Xe()}),await _.setItem(`p${e}c`,s)),e));async function er(){return await _.getItem("c")??"#75bb75"}const rr=async e=>(e??(e=await we()),e===void 0?(console.error("no palette"),[]):await _.getItem(`p${e}c`)??[]),Ce=(e,r)=>({h:e,s:r,t:Date.now()}),sr=()=>"#75bb75",nr=()=>["#f5945c","#fec76f","#b3be62","#75ba75","#6dbfb8","#71a3c1","#be95be"].map(s=>Ce(s,"def")),ke=async()=>{const e=await P.storage.sync.get();return Object.keys(e).filter(r=>/^p[0-9]+m$/.test(r)).map(r=>e[r]).sort((r,s)=>r.w-s.w).map(r=>r.i)};function le(e){try{const r=e.split(".");if(r.length===4||r.length===3)return Number(r[0])}catch{return null}return null}async function tr(){return await ae.getItem("app_version")}async function me(e="4.10.3.10"){await ae.setItem("app_version",e)}async function or(){const e=await tr();if(e==="4.10.3.10")return!1;const r=le(e),s=le("4.10.3.10");return r===null||s===null?!1:r<s}const ar=26,_=se(P.storage.sync),Ee=async e=>{const r=Date.now();await ae.setItem(`backup${r}`,e)},Te=async()=>{await P.storage.sync.set({v:ar,p:0}),await ge(0,"default",nr())},ir=async()=>{await lr();const e=await _.getItem("v");return e?(e===26&&(console.log("Storage version v26 - adding palette weights"),await gr(),await _.setItem("v",27)),!0):!1},gr=async()=>{const r=(await ke()).sort((s,n)=>s-n).map(async(s,n)=>{const a=`p${s}m`,i=await _.getItem(a);i.w=n+1,await _.setItem(a,i)});await Promise.all(r)},lr=async()=>{var s,n,a,i,A,f,b,d,p;if(await _.getItem("v"))return console.debug("Storage: latest version, everything OK."),!0;const r=await P.storage.sync.get();if(r){if(Object.keys(r).length===0&&r.constructor===Object)return console.debug("Storage: empty storage, setting default."),Te(),!0;if((s=r.history)!=null&&s.v||r.settings){console.debug("Storage: old V24 storage, making backup and converting to new format.");const w=r;await Ee(w);const N={v:26,c:((n=w.history)==null?void 0:n.lc)||sr(),p:0,autoClipboard:((a=w.settings)==null?void 0:a.autoClipboard)??re.autoClipboard,autoClipboardType:(i=w.settings)!=null&&i.autoClipboardNoGrid?"nhex6":"hex6",enableColorToolbox:((A=w.settings)==null?void 0:A.enableColorToolbox)??re.enableColorToolbox,enableColorTooltip:((f=w.settings)==null?void 0:f.enableColorTooltip)??re.enableColorTooltip,enableRightClickDeactivate:((b=w.settings)==null?void 0:b.enableRightClickDeactivate)??re.enableRightClickDeactivate,dropperCursor:((d=w.settings)==null?void 0:d.dropperCursor)??re.dropperCursor,enablePromoOnUpdate:((p=w.settings)==null?void 0:p.enablePromoOnUpdate)??re.enablePromoOnUpdate,enableErrorReportingTab:!0};await P.storage.sync.clear(),await P.storage.sync.set(N),await me("0.5.25");let M=0;return Object.keys(w).forEach(j=>{if(/^palette\./.test(j)){const v=j.split(".")[1],T=w[j],Y=T.c.map(q=>{const Q=l=>{switch(l){case 0:return"ed";case 1:return"cp";case 2:return"old";default:return"ed"}};return{h:q.h,s:Q(q.s),t:typeof q.t=="number"?q.t:0,d:q.d}});let F;v=="default"?F=0:(M+=1,F=M),ge(F,v,Y,T.t),w.history.cp===v&&Ke(F)}}),!0}else return console.debug("Storage: unknown storage, making backup and setting default."),await me("0.0.0.0"),Ee(r),await P.storage.sync.clear(),await Te(),!0}return!1},mr=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),cr=new Map(mr);class ce extends Error{constructor(s){super(ce._prepareSuperMessage(s));Ie(this,"name","NonError")}static _prepareSuperMessage(s){try{return JSON.stringify(s)}catch{return String(s)}}}const Ar=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],Ae=new WeakSet,ur=e=>{Ae.add(e);const r=e.toJSON();return Ae.delete(e),r},Se=e=>cr.get(e)??Error,ue=({from:e,seen:r,to:s,forceEnumerable:n,maxDepth:a,depth:i,useToJSON:A,serialize:f})=>{if(!s)if(Array.isArray(e))s=[];else if(!f&&Pe(e)){const d=Se(e.name);s=new d}else s={};if(r.push(e),i>=a)return s;if(A&&typeof e.toJSON=="function"&&!Ae.has(e))return ur(e);const b=d=>ue({from:d,seen:[...r],forceEnumerable:n,maxDepth:a,depth:i,useToJSON:A,serialize:f});for(const[d,p]of Object.entries(e)){if(p&&p instanceof Uint8Array&&p.constructor.name==="Buffer"){s[d]="[object Buffer]";continue}if(p!==null&&typeof p=="object"&&typeof p.pipe=="function"){s[d]="[object Stream]";continue}if(typeof p!="function"){if(!p||typeof p!="object"){try{s[d]=p}catch{}continue}if(!r.includes(e[d])){i++,s[d]=b(e[d]);continue}s[d]="[Circular]"}}for(const{property:d,enumerable:p}of Ar)typeof e[d]<"u"&&e[d]!==null&&Object.defineProperty(s,d,{value:Pe(e[d])?b(e[d]):e[d],enumerable:n?!0:p,configurable:!0,writable:!0});return s};function dr(e,r={}){const{maxDepth:s=Number.POSITIVE_INFINITY,useToJSON:n=!0}=r;return typeof e=="object"&&e!==null?ue({from:e,seen:[],forceEnumerable:!0,maxDepth:s,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function fr(e,r={}){const{maxDepth:s=Number.POSITIVE_INFINITY}=r;if(e instanceof Error)return e;if(xr(e)){const n=Se(e.name);return ue({from:e,seen:[],to:new n,maxDepth:s,depth:0,serialize:!1})}return new ce(e)}function Pe(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function xr(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var br=Object.defineProperty,pr=Object.defineProperties,hr=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,yr=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable,Oe=(e,r,s)=>r in e?br(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,Me=(e,r)=>{for(var s in r||(r={}))yr.call(r,s)&&Oe(e,s,r[s]);if(_e)for(var s of _e(r))wr.call(r,s)&&Oe(e,s,r[s]);return e},je=(e,r)=>pr(e,hr(r)),vr=(e,r,s)=>new Promise((n,a)=>{var i=b=>{try{f(s.next(b))}catch(d){a(d)}},A=b=>{try{f(s.throw(b))}catch(d){a(d)}},f=b=>b.done?n(b.value):Promise.resolve(b.value).then(i,A);f((s=s.apply(e,r)).next())});function Cr(e){let r,s={};function n(){Object.entries(s).length===0&&(r==null||r(),r=void 0)}let a=Math.floor(Math.random()*1e4);function i(){return a++}return{sendMessage(A,f,...b){return vr(this,null,function*(){var d,p,S,w;const N={id:i(),type:A,data:f,timestamp:Date.now()},M=(p=yield(d=e.verifyMessageData)==null?void 0:d.call(e,N))!=null?p:N;(S=e.logger)==null||S.debug(`[messaging] sendMessage {id=${M.id}} ─ᐅ`,M,...b);const j=yield e.sendMessage(M,...b),{res:v,err:T}=j??{err:new Error("No response")};if((w=e.logger)==null||w.debug(`[messaging] sendMessage {id=${M.id}} ᐊ─`,{res:v,err:T}),T!=null)throw fr(T);return v})},onMessage(A,f){var b,d,p;if(r==null&&((b=e.logger)==null||b.debug(`[messaging] "${A}" initialized the message listener for this context`),r=e.addRootListener(S=>{var w,N;if(typeof S.type!="string"||typeof S.timestamp!="number"){if(e.breakError)return;const v=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(S)}`);throw(w=e.logger)==null||w.error(v),v}(N=e==null?void 0:e.logger)==null||N.debug("[messaging] Received message",S);const M=s[S.type];if(M==null)return;const j=M(S);return Promise.resolve(j).then(v=>{var T,Y;return(Y=(T=e.verifyMessageData)==null?void 0:T.call(e,v))!=null?Y:v}).then(v=>{var T;return(T=e==null?void 0:e.logger)==null||T.debug(`[messaging] onMessage {id=${S.id}} ─ᐅ`,{res:v}),{res:v}}).catch(v=>{var T;return(T=e==null?void 0:e.logger)==null||T.debug(`[messaging] onMessage {id=${S.id}} ─ᐅ`,{err:v}),{err:dr(v)}})})),s[A]!=null){const S=Error(`[messaging] In this JS context, only one listener can be setup for ${A}`);throw(d=e.logger)==null||d.error(S),S}return s[A]=f,(p=e.logger)==null||p.log(`[messaging] Added listener for ${A}`),()=>{delete s[A],n()}},removeAllListeners(){Object.keys(s).forEach(A=>{delete s[A]}),n()}}}function kr(e){return Cr(je(Me({},e),{sendMessage(r,s){return s==null?W.runtime.sendMessage(r):W.tabs.sendMessage(s,r)},addRootListener(r){const s=(n,a)=>r(typeof n=="object"?je(Me({},n),{sender:a}):n);return W.runtime.onMessage.addListener(s),()=>W.runtime.onMessage.removeListener(s)}}))}const{sendMessage:$e,onMessage:de}=kr(),Ne=14;async function Re(e){if(console.log("picking from webpage"),e??(e=await Sr()),e==null)return{status:"noTab"};await Pr(e);const r={cursor:"default",enableColorToolbox:!0,enableColorTooltip:!0,enableRightClickDeactivate:!0},s=3e3,n=new Promise(a=>setTimeout(()=>a({status:"timeout"}),s));try{return await Promise.race([$e("pickupActivate",r,e),n])}catch(a){return a instanceof Error?a.message=="Could not establish connection. Receiving end does not exist."?{status:"injectFailed",error:a.message}:(console.error(a),{status:"unknownError",error:a.message}):(console.error(a),{status:"unknownError",error:`${a}`})}}async function Er(e){console.log("needInject?");try{const r=await $e("getVersion",void 0,e);return console.log("checking",r),r<Ne?(console.log(`eDropper is ${r} which is lower than ${Ne}`),!0):(console.log(`eDropper version is already ${r}`),!1)}catch{return console.log("not injected"),!0}}async function Tr(){return(await P.tabs.query({active:!0,currentWindow:!0}))[0]}async function Sr(){return(await Tr()).id}async function Pr(e){console.log("want to inject"),await Er(e)&&(console.log("need inject, injecting..."),await P.scripting.executeScript({target:{tabId:e},files:["edropper.js"]}))}async function _r(){return P.tabs.captureVisibleTab().then(r=>r,r=>(console.log("error when trying to capture screenshot",r),null))}async function Or(e){console.log(`Setting color to ${e}`),Ze(e,"ed")}async function Mr(){de("pickFromWeb",e=>Re(e.data)),de("setColor",e=>{Or(e.data)}),de("capture",()=>_r())}function jr(e){switch(console.log(`commandHandler: ${e}`),e){case"pick-from-webpage":Re();break}}async function $r(e){if(console.log("Extension installed:",e),await ir(),e.reason==="install")console.info("Extension has been installed."),P.tabs.create({url:"https://eyedropper.org/firefox/installed/",active:!0});else if(e.reason==="update"){console.info("Extension has been updated");const r=await or(),s=le("4.10.3.10"),n=await Ue("enablePromoOnUpdate");await me(),r&&s!==null&&n&&(console.info("This is big update, show update tab."),P.tabs.create({url:`https://eyedropper.org/firefox/updated/${s}/`,active:!0}))}}async function Nr(){console.log("init badge"),await P.browserAction.setBadgeText({text:"⏹"}),await P.browserAction.setBadgeBackgroundColor({color:[0,0,0,0]});const e=await er();e&&ve(e)}async function Rr(){console.log("worker init"),Nr()}const Lr=X({type:"module",main(){P.commands.onCommand.addListener(jr),P.runtime.onInstalled.addListener($r),Mr(),Rr()}});function Dr(){}((Be=(Le=globalThis.browser)==null?void 0:Le.runtime)==null?void 0:Be.id)==null?globalThis.chrome:globalThis.browser;function oe(e,...r){}const Br={debug:(...e)=>oe(console.debug,...e),log:(...e)=>oe(console.log,...e),warn:(...e)=>oe(console.warn,...e),error:(...e)=>oe(console.error,...e)};let fe;try{fe=Lr.main(),fe instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw Br.error("The background crashed on startup!"),e}return fe}();
background;
