import{B as i}from"./browser.cf86e89d.js";var g=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBINDS=1]="KEYBINDS",e[e.OPTIONS=2]="OPTIONS",e[e.FEATURES=3]="FEATURES",e))(g||{}),l=(e=>(e[e.KEYBINDS=0]="KEYBINDS",e[e.OPTIONS=1]="OPTIONS",e[e.SETTINGS=2]="SETTINGS",e[e.FEATURES=3]="FEATURES",e))(l||{}),p=(e=>(e.ACTION_ELEMENT="Action Elements",e.PROGRESS_BAR="Progress Bar",e.VOLUME_SLIDER="Volume Slider",e.INFO="Info",e))(p||{});function u(e,r){(async()=>{var c;const[t]=await i.tabs.query({active:!0,lastFocusedWindow:!0}),o=(c=l[e].toLowerCase())!=null?c:null,a={};a[o]=r,await i.tabs.sendMessage(t.id,a),console.log("[BYS] :: Saving Changes")})().catch(()=>{})}const s=i.i18n.getMessage,T=i.runtime.getManifest().version,S={seekBackward:"ArrowLeft",seekForward:"ArrowRight",decreaseSpeed:"KeyU",resetSpeed:"KeyI",increaseSpeed:"KeyO",decreaseVolume:"Minus",increaseVolume:"Equal",toggleFullScreen:"KeyF",nextFrame:s("disabled"),previousFrame:s("disabled"),restartShort:"KeyJ",nextShort:s("disabled"),previousShort:s("disabled")},N=["seekBackward","seekForward","decreaseSpeed","resetSpeed","increaseSpeed","decreaseVolume","increaseVolume","toggleFullScreen","restartShort","nextFrame","previousFrame","nextShort","previousShort"],f={skipEnabled:!1,skipThreshold:500,seekAmount:5,automaticallyOpenComments:!1,hideShortsOverlay:!1,showVolumeHorizontally:!1,defaultPlaybackRate:1,fullScreenDoubleClick:!0},b=["defaultPlaybackRate","fullScreenDoubleClick","seekAmount","automaticallyOpenComments","skipEnabled","skipThreshold","hideShortsOverlay","showVolumeHorizontally"],I={skipEnabled:{desc:s("autoSkipTitle"),type:"checkbox"},skipThreshold:{desc:s("skipThresholdTitle"),type:"number",min:0},seekAmount:{desc:s("seekAmountTitle"),type:"number",min:0,max:60},automaticallyOpenComments:{desc:s("automaticallyOpenCommentsTitle"),type:"checkbox"},hideShortsOverlay:{desc:s("hideShortsOverlayTitle"),type:"checkbox"},showVolumeHorizontally:{desc:s("showVolumeHorizontally"),type:"checkbox"},defaultPlaybackRate:{desc:s("defaultPlaybackRate"),type:"number",min:.25,max:16},fullScreenDoubleClick:{desc:s("fullScreenDoubleClick"),type:"checkbox"}};function A(e,r,t){const o={...e};return o[r]=t,o}function k(e,r,t){const o={...e};return o[r]=t,o}const n=i.storage.local,R={id:0,topId:0,playbackRate:1,lastTime:-1,openedCommentsId:-1,actualVolume:null,skippedId:null,muted:!1},E={volume:.5,autoplay:!1},m={autoplay:!0,progressBar:!0,timer:!0,playbackRate:!0,volumeSlider:!0,keybinds:!0,viewCounter:!0,uploadDate:!0},B=["autoplay","progressBar","timer","playbackRate","volumeSlider","keybinds","viewCounter","uploadDate"],y={b:1e9,m:1e6,k:1e3,mln:1e6,lakh:1e5,mil:1e3,mi:1e6,mio:1e6,md:1e3,mrd:1e9,tsd:1e3,\u5104:1e8,\u4E07:1e4,\u4EBF:1e8,\u842C:1e4,\u043C\u043B\u043D:1e6,\u0442\u044B\u0441:1e3,\u0915\u0930\u094B\u0921\u093C:1e7,\u0932\u093E\u0916:1e5,\u0645\u0644\u064A\u0648\u0646:1e6,\u0645\u0644\u064A\u0627\u0631:1e9,\u0623\u0644\u0641:1e3,\uC5B5:1e8,\uB9CC:1e4,milyon:1e6,milyar:1e9,bin:1e3,tri\u1EC7u:1e6,t\u1EF7:1e9,ngh\u00ECn:1e3,\u0E25\u0E49\u0E32\u0E19:1e6,\u0E1E\u0E31\u0E19\u0E25\u0E49\u0E32\u0E19:1e9,\u0E1E\u0E31\u0E19:1e3,mld:1e9,\u03B5\u03BA:1e6,\u03B4\u03B9\u03C3:1e9,\u03C7\u03B9\u03BB:1e3,mn:1e6,t:1e3},D=["Backspace","Enter","NumpadEnter","Escape","Tab","Space","PageUp","PageDown","ArrowUp","ArrowDown","F13","MetaLeft","MetaRight","ControlLeft","ControlRight","ShiftLeft","ShiftRight","AltLeft","AltRight"],F=s("pressAKey"),v=s("disabled"),w=.025,C=[.5,1,1.5,2],L="bys-injection-marker";function U(e){n.set({settings:e}),localStorage.setItem("yt-settings",JSON.stringify(e)),u(l.SETTINGS,e)}function K(e){n.set({keybinds:e}),localStorage.setItem("yt-keybinds",JSON.stringify(e)),u(l.KEYBINDS,e)}function _(e){n.set({extraopts:e}),localStorage.setItem("yt-extraopts",JSON.stringify(e)),u(l.OPTIONS,e)}function x(e){n.set({features:e}),localStorage.setItem("yt-features",JSON.stringify(e)),u(l.FEATURES,e)}function M(e){var d;if(typeof e!="string")return null;const r=/^([0-9.,]+)\s?(\p{L}+)?/iu,t=e.match(r);if(!t)return 0;let o=t[1];const a=(d=t[2])==null?void 0:d.toLowerCase();return a?o=t[1].replace(/,/g,"."):o=t[1].replace(/\.,/g,""),Object.prototype.hasOwnProperty.call(y,a)?Number(o)*y[a]:parseInt(o.replace(/[.,]/g,""),10)}function Y(e,r,t){e.addEventListener("wheel",o=>{o.preventDefault(),o.deltaY<0?r():t()},{passive:!1})}function V(e){const r=new DOMParser().parseFromString(e,"text/html").body.children;if(r.length>1)throw new Error("ADSU | HTML String cannot have siblings!");if(r.length<1)throw new Error("ADSU | HTML String must have an element!");return r[0]}function J(e){switch(typeof e){case"boolean":return"checkbox";case"number":return"number";case"string":return"text";default:return"text"}}function P(e){return Object.entries(e).filter(([r])=>isNaN(Number(r)))}async function G(e){const r=JSON.parse(localStorage.getItem("yt-extraopts"));r&&e(r),n.get(["extraopts"]).then(({extraopts:t})=>{if(!t)throw Error("[BYS] :: Extra Options couldnt be loaded from storage, using defaults");for(const[o,a]of Object.entries(f))t[o]===null&&(t[o]=a);t!==r&&localStorage.setItem("yt-extraopts",JSON.stringify(t)),e(t)}).catch(()=>{e(f)})}async function H(e){const r=JSON.parse(localStorage.getItem("yt-keybinds"));e(r),n.get(["keybinds"]).then(({keybinds:t})=>{if(!t)throw Error("[BYS] :: Keybinds couldnt be loaded from storage, using defaults");for(const o in S){const a=S[o];t[o]===null&&(t[o]=a)}t!==r&&localStorage.setItem("yt-keybinds",JSON.stringify(t)),e(t)}).catch(()=>{e(S)})}async function z(e){const r=JSON.parse(localStorage.getItem("yt-settings"));e(r),n.get(["settings"]).then(({settings:t})=>{if(!t)throw Error("[BYS] :: Settings couldnt be loaded from storage, using defaults");for(const[o,a]of Object.entries(E))t[o]||(t[o]=a);t!==r&&localStorage.setItem("yt-settings",JSON.stringify(t)),e(t)}).catch(()=>{e(E)})}async function W(e){const r=JSON.parse(localStorage.getItem("yt-features"));e(r),n.get(["features"]).then(({features:t})=>{if(!t)throw Error("[BYS] :: Features couldnt be loaded from storage, using defaults");for(const[o,a]of Object.entries(m))t[o]===null&&(t[o]=a);t!==r&&localStorage.setItem("yt-features",JSON.stringify(t)),e(t)}).catch(()=>{e(m)})}export{x as A,C,R as D,D as E,B as F,L as I,N as K,b as O,g as P,w as V,p as a,H as b,M as c,G as d,z as e,W as f,T as g,n as h,S as i,l as j,f as k,s as l,m,F as n,v as o,u as p,K as q,V as r,U as s,I as t,J as u,A as v,Y as w,_ as x,P as y,k as z};
